(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&r(y)}).observe(document,{childList:!0,subtree:!0});function i(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(a){if(a.ep)return;a.ep=!0;const d=i(a);fetch(a.href,d)}})();function b(e,t,i,r){var a,d=arguments.length,y=d<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,r);else for(var m=e.length-1;m>=0;m--)(a=e[m])&&(y=(d<3?a(y):d>3?a(t,i,y):a(t,i))||y);return d>3&&y&&Object.defineProperty(t,i,y),y}function x0e(e,t,i,r){function a(d){return d instanceof i?d:new i(function(y){y(d)})}return new(i||(i=Promise))(function(d,y){function m(M){try{$(r.next(M))}catch(A){y(A)}}function _(M){try{$(r.throw(M))}catch(A){y(A)}}function $(M){M.done?d(M.value):a(M.value).then(m,_)}$((r=r.apply(e,t||[])).next())})}const ML="modulepreload",AL=function(e){return"/map/v1/"+e},VS={},be=function(t,i,r){if(!i||i.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=AL(d),d in VS)return;VS[d]=!0;const y=d.endsWith(".css"),m=y?'[rel="stylesheet"]':"";if(!!r)for(let M=a.length-1;M>=0;M--){const A=a[M];if(A.href===d&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const $=document.createElement("link");if($.rel=y?"stylesheet":ML,y||($.as="script",$.crossOrigin=""),$.href=d,document.head.appendChild($),y)return new Promise((M,A)=>{$.addEventListener("load",M),$.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t())};function kL(e){return e&&e.release&&typeof e.release=="function"}function OL(e){return e&&e.acquire&&typeof e.acquire=="function"}let ru=class xw{constructor(t,i,r,a=1,d=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=a,this._pool=new Array(d),this._initialSize=d,this._ctor)for(let y=0;y<d;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(a,1)}destroy(){this.prune(0)}acquire(...t){let i;if(xw.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let a=0;a<r;a++)this._pool[a]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):OL(i)&&i.acquire(...t),i}release(t){t&&!xw.test.disabled&&(this._releaseFunction?this._releaseFunction(t):kL(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};ru.test={disabled:!1};function PL(e){e.length=0}let Cr=class{constructor(t=50,i=50){this._pool=new ru(Array,void 0,PL,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return D2.acquire()}static release(t){return D2.release(t)}static prune(){D2.prune()}};const D2=new Cr(100);function T0e(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function CL(e,t){for(const i of e)if(i!=null&&t(i))return i}function Ym(e){return e!=null&&typeof e[Symbol.iterator]=="function"}function mh(e,t){return e!=null?t(e):null}function Ur(e,t){return vv(e,t),e}function vv(e,t){if(e==null)throw new Error(t??"value is None")}function Wt(e){return e==null||e.destroy(),null}function I0e(e){return e==null||e.dispose(),null}function ai(e){return e==null||e.remove(),null}function pf(e){return e==null||e.abort(),null}function E0e(e){return e==null||e.release(),null}function NL(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function jL(e){return null}function M0e(e,t){const i=new Array;for(const r of e)i.push(r!=null?t(r):null);return i}function A0e(e,t){for(const i of e)mh(i,t)}function k0e(e){return e}let Mo=class $w{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(Ym(t)){const r=this._getOrCreateGroup(i);for(const a of t)this._isHandle(a)&&r.push(a)}else this._isHandle(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&Ym(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&(!!t.remove||t instanceof $w)}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(this._ensureGroupKey(t),i),i}_getGroup(t){return this._groups.get(this._ensureGroupKey(t))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){for(const i of t)i instanceof $w?i.removeAll():i.remove()}};const uI=Symbol("Accessor-beforeDestroy");function bv(e){return va(()=>e.forEach(t=>t!=null&&t.remove()))}function va(e){return{remove:()=>{e&&(e(),e=void 0)}}}let F2=class Tu{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Tu._m}getInt(){return this._seed=(Tu._a*this._seed+Tu._c)%Tu._m,this._seed}getFloat(){return this.getInt()/(Tu._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Tu._m*r}};F2._m=2147483647,F2._a=48271,F2._c=0;const O0e=1.5;function P0e(e,t){return t?e.filter((i,r,a)=>a.findIndex(t.bind(null,i))===r):e.filter((i,r,a)=>a.indexOf(i)===r)}function wv(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function C0e(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function N0e(e,t,i){let r,a;return i?(r=t.filter(d=>!e.some(y=>i(y,d))),a=e.filter(d=>!t.some(y=>i(y,d)))):(r=t.filter(d=>!e.includes(d)),a=e.filter(d=>!t.includes(d))),{added:r,removed:a}}function j0e(e){return e&&typeof e.length=="number"}const RL=!!Array.prototype.fill;function R0e(e,t){if(RL)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function L0e(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}let hI=class{constructor(){this.last=0}};const cI=new hI;function Tw(e,t,i,r){r=r||cI;const a=Math.max(0,r.last-10);for(let y=a;y<i;++y)if(e[y]===t)return r.last=y,y;const d=Math.min(a,i);for(let y=0;y<d;++y)if(e[y]===t)return r.last=y,y;return-1}function LL(e,t,i,r){const a=i??e.length,d=Tw(e,t,a,r);if(d!==-1)return e[d]=e[a-1],i==null&&e.pop(),t}const Zs=new Set;function DL(e,t,i=e.length,r=t.length,a,d){if(r===0||i===0)return i;Zs.clear();for(let m=0;m<r;++m)Zs.add(t[m]);a=a||cI;const y=Math.max(0,a.last-10);for(let m=y;m<i;++m)if(Zs.has(e[m])&&(d&&d.push(e[m]),Zs.delete(e[m]),e[m]=e[i-1],--i,--m,Zs.size===0||i===0))return Zs.clear(),i;for(let m=0;m<y;++m)if(Zs.has(e[m])&&(d&&d.push(e[m]),Zs.delete(e[m]),e[m]=e[i-1],--i,--m,Zs.size===0||i===0))return Zs.clear(),i;return Zs.clear(),i}function FL(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Oh(e,t){return e!=null}let Cl;function le(e){return typeof Cl[e]=="function"?Cl[e]=Cl[e](globalThis):Cl[e]}var tI,iI,rI,sI;Cl=(tI=globalThis.dojoConfig)!=null&&tI.has||(iI=globalThis.esriConfig)!=null&&iI.has?{...(rI=globalThis.dojoConfig)==null?void 0:rI.has,...(sI=globalThis.esriConfig)==null?void 0:sI.has}:{},le.add=(e,t,i,r)=>((r||Cl[e]===void 0)&&(Cl[e]=t),i&&le(e)),le.cache=Cl,le.add("esri-deprecation-warnings",!0),le.add("esri-force-fullscreen-debug",!1),(()=>{var t;le.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(le.add("host-browser",e),le.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),le.add("dom",e),le("host-browser")){const i=navigator,r=i.userAgent,a=i.appVersion,d=parseFloat(a);if(le.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),le.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),le.add("khtml",a.includes("Konqueror")?d:void 0),le.add("edge",parseFloat(r.split("Edge/")[1])||void 0),le.add("opr",parseFloat(r.split("OPR/")[1])||void 0),le.add("webkit",!le("wp")&&!le("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),le.add("chrome",!le("edge")&&!le("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),le.add("android",!le("wp")&&parseFloat(r.split("Android ")[1])||void 0),le.add("safari",!a.includes("Safari")||le("wp")||le("chrome")||le("android")||le("edge")||le("opr")?void 0:parseFloat(a.split("Version/")[1])),le.add("mac",a.includes("Macintosh")),!le("wp")&&/(iPhone|iPod|iPad)/.test(r)){const y=RegExp.$1.replace(/P/,"p"),m=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",_=parseFloat(m.replace(/_/,".").replaceAll("_",""));le.add(y,_),le.add("ios",_)}le("webkit")||(!r.includes("Gecko")||le("wp")||le("khtml")||le("edge")||le.add("mozilla",d),le("mozilla")&&le.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&le.add("esri-mobile",t),i&&le.add("esri-iPhone",i),le.add("esri-geolocation",!!navigator.geolocation)}le.add("esri-wasm","WebAssembly"in globalThis),le.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),le.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),le.add("esri-atomics","Atomics"in globalThis),le.add("esri-workers","Worker"in globalThis),le.add("web-feat:cache","caches"in globalThis),le.add("esri-workers-arraybuffer-transfer",!le("safari")||Number(le("safari"))>=12),le.add("workers-pool-size",8),le.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),le.add("featurelayer-simplify-payload-size-factors",[1,1,4]),le.add("featurelayer-animation-enabled",!0),le.add("featurelayer-snapshot-enabled",!0),le.add("featurelayer-snapshot-point-min-threshold",8e4),le.add("featurelayer-snapshot-point-max-threshold",4e5),le.add("featurelayer-snapshot-point-coverage",.1),le.add("featurelayer-advanced-symbols",!1),le.add("featurelayer-pbf",!0),le.add("featurelayer-pbf-statistics",!1),le.add("feature-layers-workers",!0),le.add("feature-polyline-generalization-factor",1),le.add("mapview-transitions-duration",200),le.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),le.add("mapserver-pbf-version-support",10.81),le.add("mapservice-popup-identify-max-tolerance",20),le.add("heatmap-allow-raster-fallback",!1),le.add("heatmap-force-raster",!1),le("host-webworker")||le("host-browser")&&(le.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),le.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{le.add("esri-image-decode",!0,!0,!0)}).catch(()=>{le.add("esri-image-decode",!1,!0,!0)})}return!1}),le.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function F0e(e){return e instanceof ArrayBuffer}function e4(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function pI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function dI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function t4(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function fI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function i4(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function yI(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function _v(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function Sv(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function zL(e){return!("buffer"in e)}function z0e(e){return e!=null?zL(e)?8*e.length+12:e.byteLength+VL:0}const VL=145,V0e=1024;function G0e(e){return Sv(e)||_v(e)||i4(e)||t4(e)||e4(e)}function q0e(e){return Sv(e)||_v(e)}function U0e(e){return Sv(e)?179769e303:_v(e)?3402823e32:yI(e)?4294967295:fI(e)?65535:pI(e)||dI(e)?255:i4(e)?2147483647:t4(e)?32767:e4(e)?127:256}function mI(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&mI(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function re(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=bI(e);if(t!=null)return t;if(Zm(e))return e.clone();if(gI(e))return e.map(re);if(vI(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=re(e[r]);return i}function Iw(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=bI(e);if(t!=null)return t;if(gI(e)){let i=!0;const r=e.map(a=>{const d=Iw(a);return a!=null&&d==null&&(i=!1),d});return i?r:null}if(Zm(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!vI(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const a=e[r],d=Iw(a);if(a!=null&&d==null)return null;i[r]=d}return i}return null}function Zm(e){return typeof e.clone=="function"}function gI(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function vI(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function GS(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function bI(e){if(e4(e)||pI(e)||dI(e)||t4(e)||fI(e)||i4(e)||yI(e)||_v(e)||Sv(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,re(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(re(i));return t}return null}function r4(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function wI(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&wv(e,t):e instanceof Set?t instanceof Set&&qL(e,t):e instanceof Map?t instanceof Map&&UL(e,t):!!GS(e)&&GS(t)&&GL(e,t))}function GL(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function qL(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function UL(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const a=t.get(i);if(a!==r||a===void 0&&!t.has(i))return!1}return!0}function qi(e){return e.__accessor__??null}function BL(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function Ny(e,t,i){return i?Xm(e,t,{policy:i,path:""}):Xm(e,t,null)}function Xm(e,t,i){return t?Object.keys(t).reduce((r,a)=>{const d=a;let y=null,m="merge";if(i&&(y=i.path?`${i.path}.${a}`:a,m=i.policy(y)),m==="replace"||m==="replace-arrays"&&Array.isArray(r[d]))return r[d]=t[d],r;if(r[d]===void 0)return r[d]=re(t[d]),r;let _=r[d],$=t[d];if(_===$)return r;if(Array.isArray($)||Array.isArray(r))_=_?Array.isArray(_)?r[d]=_.concat():r[d]=[_]:r[d]=[],$&&(Array.isArray($)||($=[$]),$.forEach(M=>{_.includes(M)||_.push(M)}));else if($&&typeof $=="object")if(i){const M=i.path;i.path=y,r[d]=Xm(_,$,i),i.path=M}else r[d]=Xm(_,$,null);else r.hasOwnProperty(a)&&!t.hasOwnProperty(a)||(r[d]=$);return r},e||{}):e}function _I(e){return Array.isArray(e)?e:e.split(".")}function qS(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function HL(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...qS(i));return t}return qS(e)}function SI(e,t,i,r){const a=HL(t);if(a.length!==1){const d=a.map(y=>r(e,y,i));return bv(d)}return r(e,a[0],i)}function xI(e){let t=!1;return()=>{t||(t=!0,e())}}function $I(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const a=parseInt(i,10);if(!isNaN(a))return Array.isArray(t)?t[a]:t.at(a)}const r=qi(t);return BL(r,i)?r.get(i):t[i]}function TI(e,t,i){if(e==null)return e;const r=$I(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:TI(r,t,i+1)}function zf(e,t,i=0){return typeof t!="string"||t.includes(".")?TI(e,_I(t),i):$I(t,e)}function Qm(e,t){return zf(e,t)}function US(e,t){return zf(t,e)!==void 0}function Vf(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=re(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function xv(e,t){const i=Vf(e);let r=i[t];return r||(r=i[t]={}),r}function WL(e,t){return Ny(e,t,KL)}const JL=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function KL(e){return JL.test(e)?"replace":"merge"}function II(e,t,i=!1){return MI(e,t,i)}function Gf(e,t){if(t!=null)return t[e]||EI(e.split("."),!1,t)}function _r(e,t,i){const r=e.split("."),a=r.pop(),d=EI(r,!0,i);d&&a&&(d[a]=t)}function EI(e,t,i){let r=i;for(const a of e){if(r==null)return;if(!(a in r)){if(!t)return;r[a]={}}r=r[a]}return r}function MI(e,t,i){return t?Object.keys(t).reduce((r,a)=>{let d=r[a],y=t[a];return d===y?r:d===void 0?(r[a]=re(y),r):(Array.isArray(y)||Array.isArray(r)?(d=d?Array.isArray(d)?r[a]=d.concat():r[a]=[d]:r[a]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(m=>{d.includes(m)||d.push(m)}):r[a]=y.concat())):y&&typeof y=="object"?r[a]=MI(d,y,i):r.hasOwnProperty(a)&&!t.hasOwnProperty(a)||(r[a]=y),r)},e||{}):e}var nI;const $t={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(nI=globalThis.location)==null?void 0:nI.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(II($t,globalThis.esriConfig,!0),delete $t.has),!$t.assetsPath){{const e="4.27";$t.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}$t.defaultAssetsPath=$t.assetsPath}const YL=/\{([^\}]+)\}/g;function BS(e){return e??""}function $v(e,t){return e.replaceAll(YL,typeof t=="object"?(i,r)=>BS(Gf(r,t)):(i,r)=>BS(t(r)))}function B0e(e,t){return e.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function s4(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function H0e(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}function W0e(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const HS={info:0,warn:1,error:2,none:3};let fe=class dr{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,dr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=dr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(t=new Map){const i=dr._loggers;return dr._loggers=t,i},set throttlingDisabled(t){dr._throttlingDisabled=t}}}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,dr._loggers.get(t)||new dr({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!dr._throttlingDisabled){const a=this._argsToKey(r),d=this._loggedMessages[t].get(a);if(i==="once"&&d!=null||i==="oncePerTick"&&d&&d>=dr._tickCounter)return;this._loggedMessages[t].set(a,dr._tickCounter),dr._scheduleTickCounterIncrement()}for(const a of $t.log.interceptors)if(a(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const a=r[t];if(a!=null)return a;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=$t.log.level||"warn";return HS[this._parentWithMember("level",i)]<=HS[t]}_argsToKey(...t){return s4(JSON.stringify(t,(r,a)=>typeof a!="object"||Array.isArray(a)?a:"[Object]"))}static _scheduleTickCounterIncrement(){dr._tickCounterScheduled||(dr._tickCounterScheduled=!0,Promise.resolve().then(()=>{dr._tickCounter++,dr._tickCounterScheduled=!1}))}};fe._loggers=new Map,fe._tickCounter=0,fe._tickCounterScheduled=!1,fe._throttlingDisabled=!1;var ha;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(ha||(ha={}));let ZL=class{constructor(t,i){this._observers=t,this._observer=i}remove(){FL(this._observers,this._observer)}},AI=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return XL;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,a=!1;const d=i.length;for(let y=0;y<d;++y){const m=i[y];if(m.destroyed)a=!0;else if(m===t){r=!0;break}}return r||(i.push(t),a&&this._removeDestroyedObservers()),new ZL(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let a=0;a<i;++a){for(;a+r<i&&t[a+r].destroyed;)++r;if(r>0){if(!(a+r<i))break;t[a]=t[a+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const XL=va();var Te;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Te||(Te={}));const Ew=Te.USER+1;function Nr(e){switch(e){case"defaults":return Te.DEFAULTS;case"service":return Te.SERVICE;case"portal-item":return Te.PORTAL_ITEM;case"web-scene":return Te.WEB_SCENE;case"web-map":return Te.WEB_MAP;case"link-chart":return Te.LINK_CHART;case"user":return Te.USER;default:return null}}function df(e){switch(e){case Te.DEFAULTS:return"defaults";case Te.SERVICE:return"service";case Te.PORTAL_ITEM:return"portal-item";case Te.WEB_SCENE:return"web-scene";case Te.WEB_MAP:return"web-map";case Te.LINK_CHART:return"link-chart";case Te.USER:return"user"}return void 0}function QL(e){return df(e)}var jt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(jt||(jt={}));const eg={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},N0=[];let jd=eg;function Je(e){jd.onObservableAccessed(e)}let jy=!1,Ry=!1;function ba(e,t,i){if(jy)return n4(e,t,i);kI(e);const r=t.call(i);return OI(),r}function eD(e,t){return ba(eg,e,t)}function n4(e,t,i){const r=jy;jy=!0,kI(e);let a=null;try{a=t.call(i)}catch(d){Ry&&fe.getLogger("esri.core.accessorSupport.tracking").error(d)}return OI(),jy=r,a}function kI(e){jd=e,N0.push(e)}function OI(){const e=N0.length;if(e>1){const t=N0.pop();jd=N0[e-2],t.onTrackingEnd()}else if(e===1){const t=N0.pop();jd=eg,t.onTrackingEnd()}else jd=eg}function PI(e,t){const i=t.observerObject;if(i.flags&jt.DepTrackingInitialized)return;const r=Ry;Ry=!1,i.flags&jt.AutoTracked?n4(t,t.metadata.get,e):CI(e,t),Ry=r}const tD=[];function CI(e,t){const i=t.observerObject;i.flags&jt.ExplicitlyTracking||(i.flags|=jt.ExplicitlyTracking,n4(t,()=>{const r=t.metadata.dependsOn||tD;for(const a of r)if(typeof a!="string"||a.includes(".")){const d=_I(a);for(let y=0,m=e;y<d.length&&m!=null&&typeof m=="object";++y)m=WS(m,d[y],y!==d.length-1)}else WS(e,a,!1)}),i.flags&=~jt.ExplicitlyTracking)}function WS(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const d=parseInt(r,10);if(!isNaN(d))return Array.isArray(e)?e[d]:e.at(d)}const a=qi(e);if(a){const d=a.propertiesByName.get(r);d&&(Je(d.observerObject),PI(e,d))}return i?e[r]:void 0}let JS=class{constructor(t,i){this.propertyName=t,this.metadata=i,this.observerObject=new iD,this._accessed=null,this._handles=null,this.observerObject.flags=jt.Dirty|(i.nonNullable?jt.NonNullable:0)|(i.hasOwnProperty("value")?jt.HasDefaultValue:0)|(i.get===void 0?jt.DepTrackingInitialized:0)|(i.dependsOn===void 0?jt.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){const i=this.observerObject;Je(i);const r=t.store,a=this.propertyName,d=i.flags,y=r.get(a);if(d&jt.Computing||~d&jt.Dirty&&r.has(a))return y;i.flags|=jt.Computing;const m=t.host;let _;d&jt.AutoTracked?_=ba(this,this.metadata.get,m):(CI(m,this),_=this.metadata.get.call(m)),r.set(a,_,Te.COMPUTED);const $=r.get(a);return $===y?i.flags&=~jt.Dirty:eD(this.commit,this),i.flags&=~jt.Computing,$}onObservableAccessed(t){if(t===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(t))return;i.push(t)}onTrackingEnd(){this._clearObservationHandles();const t=this.observerObject;t.flags|=jt.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let r=this._handles;r==null&&(r=[],this._handles=r);for(let a=0;a<i.length;++a)r.push(i[a].observe(t));i.length=0}notifyChange(){const t=this.observerObject;t.onInvalidated(),t.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const t=this.observerObject;t.flags&=~jt.Dirty,t.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}},iD=class extends AI{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&jt.Overriden&&(this.flags|=jt.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&jt.Dirty&&this.onCommitted(),super.destroy()}},rD=class NI{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new NI;return this._values.forEach((r,a)=>{t&&t.has(a)||i.set(a,re(r))}),i}get(t){return this._values.get(t)}originOf(){return Te.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function E1(e,t,i){return e!==void 0}function KS(e,t,i,r){return e!==void 0&&(!(i==null&&e.observerObject.flags&jt.NonNullable)||(r.lifecycle,ha.INITIALIZING,!1))}function sD(e){return e&&typeof e.destroy=="function"}fe.getLogger("esri.core.accessorSupport.Properties");let nD=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=ha.INITIALIZING,this.store=new rD,this._origin=Te.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const a=new JS(r,i[r]);this.propertiesByName.set(r,a)}this.metadatas=i}initialize(){this.lifecycle=ha.CONSTRUCTING}constructed(){this.lifecycle=ha.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[t,i]of this.propertiesByName){if(i.metadata.autoDestroy){const r=this.internalGet(t);r&&sD(r)&&(r.destroy(),~i.observerObject.flags&jt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==ha.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);Je(i.observerObject);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.observerObject.flags&jt.HasDefaultValue)return"defaults"}return df(i)}has(t){return!!this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(E1(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);E1(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const a=this.propertiesByName.get(i);if(!E1(a))return"";const d=new Set,y=ba({onObservableAccessed:_=>d.add(_),onTrackingEnd:()=>{}},()=>{var _;return(_=a.metadata.get)==null?void 0:_.call(t)});let m=`${r}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;if(d.size===0)return m;r+="  ";for(const _ of d)_ instanceof JS&&(m+=`${r}${_.propertyName}: undefined
`);return m}setAtOrigin(t,i,r){const a=this.propertiesByName.get(t);if(E1(a))return this._setAtOrigin(a,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.observerObject.flags&jt.Overriden)}clearOverride(t){const i=this.propertiesByName.get(t),r=i==null?void 0:i.observerObject;r&&r.flags&jt.Overriden&&(r.flags&=~jt.Overriden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!KS(r,t,i,this))return;const a=r.metadata.cast;if(a){const d=this._cast(a,i),{valid:y,value:m}=d;if(z2.release(d),!y)return;i=m}r.observerObject.flags|=jt.Overriden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!KS(r,t,i,this))return;const a=r.metadata.cast;if(a){const y=this._cast(a,i),{valid:m,value:_}=y;if(z2.release(y),!m)return;i=_}const d=r.metadata.set;d?d.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Nr(t)}getDefaultOrigin(){return df(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==ha.INITIALIZING?this._origin:Te.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const a=this.store,d=t.propertyName;a.has(d,r)&&r4(i,a.get(d))&&~t.observerObject.flags&jt.Overriden&&r===a.originOf(d)||(t.invalidate(),a.set(d,i,r),t.commit(),PI(this.host,t))}_cast(t,i){const r=z2.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},oD=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const z2=new ru(oD);function aD(e,t){return e.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>r===""?"$":(Gf(r,t)??"").toString())}let jI=class{constructor(t,i,r){this.name=t,this.details=r,this.message=(i&&aD(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},se=class RI extends jI{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return re(i)}catch{return"[object]"}}))}}catch(t){throw fe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new RI(t.name,t.message,t.details)}};se.prototype.type="error";function tg(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))tg(e,r,t[r]);else{if(t.includes(".")){const a=t.split("."),d=a.splice(a.length-1,1)[0];return void tg(Qm(e,a),d,i)}const r=e.__accessor__;r!=null&&lD(t,r),e[t]=i}}function lD(e,t){if(le("esri-unknown-property-errors")&&!uD(e,t))throw new se("set:unknown-property",hD(e,t))}function uD(e,t){return t.metadatas[e]!=null}function hD(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let cD;function pD(){return cD}let LI=class extends ru{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=jL(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const M1=[];function ig(e){M1.push(e),M1.length===1&&queueMicrotask(()=>{const t=M1.slice();M1.length=0;for(const i of t)i()})}let Rd=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Mw;(function(e){const t=(d,y,m,_)=>{let $=y,M=y;const A=m>>>1,P=d[$-1];for(;M<=A;){M=$<<1,M<m&&_(d[M-1],d[M])<0&&++M;const j=d[M-1];if(_(j,P)<=0)break;d[$-1]=j,$=M}d[$-1]=P},i=(d,y)=>d<y?-1:d>y?1:0;function r(d,y,m,_){y===void 0&&(y=0),m===void 0&&(m=d.length),_===void 0&&(_=i);for(let M=m>>>1;M>y;M--)t(d,M,m,_);const $=y+1;for(let M=m-1;M>y;M--){const A=d[y];d[y]=d[M],d[M]=A,t(d,$,M,_)}}function*a(d,y,m,_){y===void 0&&(y=0),m===void 0&&(m=d.length),_===void 0&&(_=i);for(let M=m>>>1;M>y;M--)t(d,M,m,_),yield;const $=y+1;for(let M=m-1;M>y;M--){const A=d[y];d[y]=d[M],d[M]=A,t(d,$,M,_),yield}}e.sort=r,e.iterableSort=a})(Mw||(Mw={}));const YS=Mw,dD=1.5,fD=1.1;let Sh=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new hI,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>ZS(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const a=this.data[r];t(a)&&i.push(a)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,ZS(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=Tw(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Tw(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=DL(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){YS.sort(this.data,0,this.length,t)}iterableSort(t){return YS.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){for(let r=0;r<this.length;++r){const a=this.data[r];if(t.call(i,a,r))return a}}filterInPlace(t,i){let r=0;for(let a=0;a<this._length;++a){const d=this.data[a];t.call(i,d,a,this.data)&&(this.data[a]=this.data[r],this.data[r]=d,r++)}if(this._deallocator)for(let a=r;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,a=this.data;for(let d=0;d<r;++d)t.call(i,a[d],d,a)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let a=0;a<this.length;++a)r[a]=t.call(i,this.data[a],a,this.data);return r}reduce(t,i){let r=i;for(let a=0;a<this.length;++a)r=t(r,this.data[a],a,this.data);return r}has(t){const i=this.length,r=this.data;for(let a=0;a<i;++a)if(r[a]===t)return!0;return!1}};function ZS(e){e.data.length>dD*e.length&&(e.data.length=Math.floor(e.length*fD))}function yD(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const zp=yD(globalThis);function Tv(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Iv(e,t,i){if(!Tv(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const a of r)e.addEventListener(a,i);return{remove(){for(const a of r)e.removeEventListener(a,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function DI(e,t,i){if(!Tv(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=Iv(e,t,a=>{r.remove(),i.call(e,a)});return{remove(){r.remove()}}}const mD={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function FI({key:e}){return mD[e]||e}function li(e="Aborted"){return new se("AbortError",e)}function Jt(e,t="Aborted"){if(jn(e))throw li(t)}function Ev(e){return e!=null?"aborted"in e?e:e.signal:e}function jn(e){const t=Ev(e);return t!=null&&t.aborted}function Ps(e){if(Jr(e))throw e}function XS(e){if(!Jr(e))throw e}function Fs(e,t){const i=Ev(e);if(i!=null){if(!i.aborted)return DI(i,"abort",()=>t());t()}}function o4(e,t){const i=Ev(e);if(i!=null)return Jt(i),DI(i,"abort",()=>t(li()))}function Lo(e,t){return Ev(t)==null?e:new Promise((i,r)=>{let a=Fs(t,()=>r(li()));const d=()=>a=ai(a);e.then(d,d),e.then(i,r)})}function Jr(e){return(e==null?void 0:e.name)==="AbortError"}async function Aw(e){try{return await e}catch(t){if(!Jr(t))throw t;return}}async function Kh(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(y=>e[y]),a=await Kh(r),d={};return i.map((y,m)=>d[y]=a[m]),d}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,a)=>{const d=i[a];return d.status==="fulfilled"?{promise:r,value:d.value}:{promise:r,error:d.reason}}))}async function gD(e){return(await Kh(e)).filter(t=>!!t.value).map(t=>t.value)}function zI(e,t=void 0,i){const r=new AbortController;return Fs(i,()=>r.abort()),new Promise((a,d)=>{let y=setTimeout(()=>{y=0,a(t)},e);Fs(r,()=>{y&&(clearTimeout(y),d(li()))})})}function Ia(e){return e&&typeof e.then=="function"}function kw(e){return Ia(e)?e:Promise.resolve(e)}function a4(e,t=-1){let i,r,a,d,y=null;const m=(..._)=>{if(i){r=_,d&&d.reject(li()),d=Vs();const P=d.promise;if(y){const j=y;y=null,j.abort()}return P}if(a=d||Vs(),d=null,t>0){const P=new AbortController;i=kw(e(..._,P.signal));const j=i;zI(t).then(()=>{i===j&&(d?P.abort():y=P)})}else i=1,i=kw(e(..._));const $=()=>{const P=r;r=a=i=y=null,P!=null&&m(...P)},M=i,A=a;return M.then($,$),M.then(A.resolve,A.reject),A.promise};return m}function Vs(){let e,t;const i=new Promise((a,d)=>{e=a,t=d}),r=a=>{e(a)};return r.resolve=a=>e(a),r.reject=a=>t(a),r.timeout=(a,d)=>zp.setTimeout(()=>r.reject(d),a),r.promise=i,r}async function QS(e){await Promise.resolve(),Jt(e)}function sde(e){return e}let vD=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},bD=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},Ow=0;const c0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Pw=["prepare","preRender","render","postRender","update","finish"],Cw=[],Ph=new Sh;let wD=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const rg={frameTasks:Ph,willDispatch:!1,clearFrameTasks:_D,dispatch:qI,executeFrameTasks:SD};function Vp(e){const t=new bD(e);return Cw.push(t),rg.willDispatch||(rg.willDispatch=!0,ig(qI)),t}function Sp(e){const t=new vD(e);return Ph.push(t),sg==null&&(Ow=performance.now(),sg=requestAnimationFrame(VI)),new wD(t)}let sg=null;function _D(e=!1){Ph.forAll(t=>{t.removed=!0}),e&&GI()}function VI(){const e=performance.now();sg=null,sg=Ph.length>0?requestAnimationFrame(VI):null,rg.executeFrameTasks(e)}function SD(e){const t=e-Ow;Ow=e;const i=1e3/60,r=Math.max(0,t-i);c0.time=e,c0.frameDuration=i-r;for(let a=0;a<Pw.length;a++){const d=performance.now(),y=Pw[a];Ph.forAll(m=>{var _;m.paused||m.removed||(a===0&&m.ticks++,m.phases[y]&&(c0.elapsedFrameTime=performance.now()-e,c0.deltaTime=m.ticks===0?0:t,(_=m.phases[y])==null||_.call(m,c0)))}),xD[a].record(performance.now()-d)}GI(),$D.record(performance.now()-e)}const A1=new Sh;function GI(){Ph.forAll(e=>{e.removed&&A1.push(e)}),Ph.removeUnorderedMany(A1.data,A1.length),A1.clear()}function qI(){for(;Cw.length;){const e=Cw.shift();e.isActive&&e.callback()}rg.willDispatch=!1}function lde(e=1,t){const i=Vs(),r=()=>{jn(t)?i.reject(li()):e===0?i():(--e,ig(()=>r()))};return r(),i.promise}const xD=Pw.map(e=>new Rd(e)),$D=new Rd("total");function TD(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let ID=0;function Ld(){return++ID}let Mv=class{constructor(t){this._accessed=[],this._handles=[],this._observerObject=new ED(t),ex.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;ex.unregister(this._observerObject),this._accessed.length=0,(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){const i=this._accessed;i.includes(t)||i.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed,r=this._observerObject;for(let a=0;a<i.length;++a)t.push(i[a].observe(r));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}},ED=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=MD}};const ex=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function MD(){}let lp=!1;const ng=[];function UI(e,t){let i=new Mv(d),r=null,a=!1;function d(){if(!i||a)return;if(lp)return void WI(d);const m=r;i.clear(),lp=!0,a=!0,r=ba(i,e),a=!1,lp=!1,t(r,m),JI()}function y(){i&&(i.destroy(),i=null,r=null)}return a=!0,r=ba(i,e),a=!1,{remove:y}}function BI(e,t){let i=new Mv(a),r=null;function a(){t(r,y)}function d(){i&&(i.destroy(),i=null),r=null}function y(){return i?(i.clear(),r=ba(i,e),r):null}return y(),{remove:d}}function HI(e){let t=new Mv(r),i=!1;function r(){t&&!i&&(lp?WI(r):(t.clear(),lp=!0,i=!0,ba(t,e),i=!1,lp=!1,JI()))}function a(){t&&(t.destroy(),t=null)}return i=!0,ba(t,e),i=!1,{remove:a}}function WI(e){ng.includes(e)||ng.unshift(e)}function JI(){for(;ng.length;)ng.pop()()}var Dd;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Dd||(Dd={}));let ff=class{constructor(){this.uid=Ld(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,a,d){return this.pool.acquire(Dd.Untracked,t,i,r,a,d,r4)}static acquireTracked(t,i,r,a){return this.pool.acquire(Dd.Tracked,t,i,r,null,null,a)}notify(t,i){this.type===Dd.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,a,d,y,m){this.uid=Ld(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=a,this.target=d,this.path=y,this.equals=m}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Ld(),this.removed=!0}};ff.pool=new LI(ff);const Ly=new Cr,da=new Set;let og;function ag(e){da.delete(e),da.add(e),og||(og=Vp(OD))}function AD(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function kD(e){for(const t of da.values())t.target===e&&(t.removed=!0)}function OD(){let e=10;for(;og&&e--;){og=null;const t=PD(),i=Ly.acquire();for(const r of t){const a=r.uid;AD(r),a===r.uid&&r.removed&&i.push(r)}for(const r of da)r.removed&&(i.push(r),da.delete(r));for(const r of i)ff.pool.release(r);Ly.release(i),Ly.release(t),Nw.forEach(r=>r())}}function PD(){const e=Ly.acquire();e.length=da.size;let t=0;for(const i of da)e[t]=i,++t;return da.clear(),e}const Nw=new Set;function CD(e){return Nw.add(e),{remove(){Nw.delete(e)}}}function ND(e,t,i){let r=SI(e,t,i,(a,d,y)=>{let m,_,$=BI(()=>zf(a,d),(M,A)=>{a.__accessor__.destroyed||m&&m.uid!==_?r.remove():(m||(m=ff.acquireUntracked(M,y,A,a,d),_=m.uid),ag(m))});return{remove:xI(()=>{$.remove(),m&&(m.uid!==_||m.removed||(m.removed=!0,ag(m)),m=null),r=$=null})}});return r}function jD(e,t,i){const r=SI(e,t,i,(a,d,y)=>{let m=!1;return UI(()=>zf(a,d),(_,$)=>{a.__accessor__.destroyed?r.remove():m||(m=!0,r4($,_)||y.call(a,_,$,d,a),m=!1)})});return r}function RD(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?jD(e,t,i):ND(e,t,i)}function LD(e,t,i){let r,a,d=BI(e,(y,m)=>{r&&r.uid!==a?d.remove():(r||(r=ff.acquireTracked(y,t,m,i),a=r.uid),ag(r))});return{remove:xI(()=>{d.remove(),r&&(r.uid!==a||r.removed||(r.removed=!0,ag(r)),r=null),d=null})}}function DD(e,t,i){let r=!1;return UI(e,(a,d)=>{r||(r=!0,i(d,a)||t(a,d),r=!1)})}function FD(e,t,i=!1,r=wI){return i?DD(e,t,r):LD(e,t,r)}function tx(e){return TD(da,t=>t.oldValue===e)}function Av(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function KI(e,t,i){const r=e.get(t);if(r!==void 0)return r;const a=i();return e.set(t,a),a}const up=fe.getLogger("esri.core.accessorSupport.ensureTypes");function zD(e){return e==null?e:new Date(e)}function VD(e){return e==null?e:!!e}function qf(e){return e==null?e:e.toString()}function Cs(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function kv(e){return e==null?e:Math.round(parseFloat(e))}function YI(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function lg(e,t){return t!=null&&e&&!(t instanceof e)}function ZI(e){return e&&"isCollection"in e}function ix(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function GD(e,t){if(!t||!t.constructor||!ZI(t.constructor))return jw(e,t)?t:new e(t);const i=ix(e.prototype.itemType),r=ix(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(jw(e,t),t):new e(t):t}function jw(e,t){return!!YI(t)&&(up.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Ov(e)+"'"),!0)}function Ch(e,t){return t==null?t:ZI(e)?GD(e,t):lg(e,t)?jw(e,t)?t:new e(t):t}function Ov(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const qD=new WeakMap;function UD(e){switch(e){case Number:return Cs;case Ot:return kv;case Boolean:return VD;case String:return qf;case Date:return zD;default:return KI(qD,e,()=>Ch.bind(null,e))}}function yi(e,t){const i=UD(e);return arguments.length===1?i:i(t)}function yf(e,t,i){return arguments.length===1?yf.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function BD(e,t){return arguments.length===1?yf(i=>yi(e,i)):yf(i=>yi(e,i),t)}function XI(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>XI(e,t-1,r)):e(i)}function ug(e,t,i){if(arguments.length===2)return d=>ug(e,t,d);if(!i)return i;i=XI(e,t,i);let r=t,a=i;for(;r>0&&Array.isArray(a);)r--,a=a[0];if(a!==void 0)for(let d=0;d<r;d++)i=[i];return i}function HD(e,t,i){return arguments.length===2?ug(r=>yi(e,r),t):ug(r=>yi(e,r),t,i)}function QI(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function Rw(e,t){if(arguments.length===2)return Rw(e).call(null,t);const i=new Set,r=e.filter(m=>typeof m!="function"),a=e.filter(m=>typeof m=="function");for(const m of e)typeof m!="string"&&typeof m!="number"||i.add(m);let d=null,y=null;return(m,_)=>{if(m==null)return m;const $=typeof m,M=$==="string"||$==="number";return M&&(i.has(m)||a.some(A=>$==="string"&&A===String||$==="number"&&A===Number))||$==="object"&&a.some(A=>!lg(m,A))?m:(M&&r.length?(d||(d=r.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),up.error("Accessor#set",`'${m}' is not a valid value for this property, only the following values are valid: ${d}`)):typeof m=="object"&&a.length?(y||(y=a.map(A=>Ov(A)).join(", ")),up.error("Accessor#set",`'${m}' is not a valid value for this property, value must be one of ${y}`)):up.error("Accessor#set",`'${m}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function _o(e,t){if(arguments.length===2)return _o(e).call(null,t);const i={},r=[],a=[];for(const _ in e.typeMap){const $=e.typeMap[_];i[_]=yi($),r.push(Ov($)),a.push(_)}const d=()=>`'${r.join("', '")}'`,y=()=>`'${a.join("', '")}'`,m=typeof e.key=="string"?_=>_[e.key]:e.key;return _=>{if(e.base&&!lg(e.base,_)||_==null)return _;const $=m(_)||e.defaultKeyValue,M=i[$];if(!M)return up.error("Accessor#set",`Invalid property value, value needs to be one of ${d()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!lg(e.typeMap[$],_))return _;if(typeof e.key=="string"&&!YI(_)){const A={};for(const P in _)P!==e.key&&(A[P]=_[P]);return M(A)}return M(_)}}let Ot=class{};const dde={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function WD(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function eE(e){switch(e.type){case"native":return yi(e.value);case"array":return yf(eE(e.value));case"one-of":return JD(e);default:return null}}function JD(e){let t=null;return(i,r)=>Dw(i,e)?i:(t==null&&(t=Lw(e)),up.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function Lw(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ot:return"integer";case Date:return"date";default:return Ov(e.value)}case"array":return`array of ${Lw(e.value)}`;case"one-of":{const t=e.values.map(i=>Lw(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function Dw(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ot:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!Dw(i,t.value));case"one-of":return t.values.some(i=>Dw(e,i))}}function S(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),a=xv(t,i);r&&(r.get||r.set?(a.get=r.get||a.get,a.set=r.set||a.set):"value"in r&&("value"in e&&fe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),a.value=e.value=r.value)),e.readOnly!=null&&(a.readOnly=e.readOnly);const d=e.aliasOf;if(d){const _=typeof d=="string"?d:d.source,$=typeof d=="string"?null:d.overridable===!0;let M;a.dependsOn=[_],a.get=function(){let A=Qm(this,_);if(typeof A=="function"){M||(M=_.split(".").slice(0,-1).join("."));const P=Qm(this,M);P&&(A=A.bind(P))}return A},a.readOnly||(a.set=$?function(A){this._override(i,A)}:function(A){tg(this,_,A)})}const y=e.type,m=e.types;a.cast||(y?a.cast=KD(y):m&&(Array.isArray(m)?a.cast=yf(_o(m[0])):a.cast=_o(m))),WL(a,e),e.range&&(a.cast=YD(a.cast,e.range))}}function tE(e,t,i){const r=xv(e,i);r.json||(r.json={});let a=r.json;return t!==void 0&&(a.origins||(a.origins={}),a.origins[t]||(a.origins[t]={}),a=a.origins[t]),a}function KD(e){let t=0,i=e;if(WD(e))return eE(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(QI(r))return t===0?Rw(r):ug(Rw(r),t);if(t===1)return BD(r);if(t>1)return HD(r,t);const a=e;return a.from?a.from:yi(a)}function YD(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function ZD(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const a=t[r];i[r].forEach(d=>{t[d]=a}),delete t[r]}}}let Gs=class extends jI{constructor(t,i,r){super(t,i,r)}};Gs.prototype.type="warning";function iE(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Fw=fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function rx(e,t,i){var r,a;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((a=t.read)==null?void 0:a.enabled)===!1||eF(e)&&_r("read.reader",Gp(e),t))}function Gp(e){var i,r;const t=e.ndimArray??0;if(t>1)return QD(e);if(t===1)return sx(e);if("type"in e&&sE(e.type)){const a=(r=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,d=sx(typeof a=="function"?{type:a}:{types:a});return(y,m,_)=>{const $=d(y,m,_);return $&&new e.type($)}}return l4(e)}function l4(e){return"type"in e?XD(e.type):tF(e.types)}function XD(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const a=typeof t;if(a!=="object")return void Fw.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${a}'`);const d=new e;return d.read(t,r),d}:e.fromJSON}function rE(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(a=>rE(e,a,i,r-1)):e(t,void 0,i)}function QD(e){const t=l4(e),i=rE.bind(null,t),r=e.ndimArray??0;return(a,d,y)=>{if(a==null)return a;a=i(a,y,r);let m=r,_=a;for(;m>0&&Array.isArray(_);)m--,_=_[0];if(_!==void 0)for(let $=0;$<m;$++)a=[a];return a}}function sx(e){const t=l4(e);return(i,r,a)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const m of i){const _=t(m,void 0,a);_!==void 0&&y.push(_)}return y}const d=t(i,void 0,a);return d!==void 0?[d]:void 0}}function sE(e){if(!iE(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?u4(t.Type):nE(t.Type))}function eF(e){return"types"in e?nE(e.types):u4(e.type)}function u4(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||sE(e))}function nE(e){for(const t in e.typeMap)if(!u4(e.typeMap[t]))return!1;return!0}function tF(e){let t=null;const i=e.errorContext??"type";return(r,a,d)=>{if(r==null)return r;const y=typeof r;if(y!=="object")return void Fw.error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);t||(t=iF(e));const m=e.key;if(typeof m!="string")return;const _=r[m],$=_?t[_]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!$){const A=`Type '${_||"unknown"}' is not supported`;return d&&d.messages&&r&&d.messages.push(new Gs(`${i}:unsupported`,A,{definition:r,context:d})),void Fw.error(A)}const M=new $;return M.read(r,d),M}}function iF(e){var i,r;const t={};for(const a in e.typeMap){const d=e.typeMap[a],y=Vf(d.prototype);if(typeof e.key=="function")continue;const m=y[e.key];if(!m)continue;(i=m.json)!=null&&i.type&&Array.isArray(m.json.type)&&m.json.type.length===1&&typeof m.json.type[0]=="string"&&(t[m.json.type[0]]=d);const _=(r=m.json)==null?void 0:r.write;if(!_||!_.writer){t[a]=d;continue}const $=_.target,M=typeof $=="string"?$:e.key,A={};_.writer(a,A,M),A[M]&&(t[A[M]]=d)}return t}function rF(e){if(e.json||(e.json={}),ox(e.json),ax(e.json),nx(e.json),e.json.origins)for(const t in e.json.origins)ox(e.json.origins[t]),ax(e.json.origins[t]),nx(e.json.origins[t]);return!0}function nx(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function ox(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function ax(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function lx(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&iE(e.type))?t.write.writer=oF:i>1?t.write.writer=aF(i):t.types?Array.isArray(t.types)?t.write.writer=nF(t.types[0]):t.write.writer=sF(t.types):t.write.writer=mf}function sF(e){return(t,i,r,a)=>t?oE(t,e,a)?mf(t,i,r,a):void 0:mf(t,i,r,a)}function oE(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i!=null&&i.messages){const r=t.errorContext??"type",a=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new se(`${r}:unsupported`,a,{definition:e,context:i})),fe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(a)}return!1}function nF(e){return(t,i,r,a)=>!t||!Array.isArray(t)?mf(t,i,r,a):mf(t.filter(d=>oE(d,e,a)),i,r,a)}function mf(e,t,i,r){_r(i,hg(e,r),t)}function hg(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?cg(e):e}function cg(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function oF(e,t,i,r){let a;e===null?a=null:e&&typeof e.map=="function"?(a=e.map(d=>hg(d,r)),typeof a.toArray=="function"&&(a=a.toArray())):a=[hg(e,r)],_r(i,a,t)}function aE(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>aE(r,t,i-1)):hg(e,t)}function aF(e){return(t,i,r,a)=>{let d;if(t===null)d=null;else{d=aE(t,a,e);let y=e,m=d;for(;y>0&&Array.isArray(m);)y--,m=m[0];if(m!==void 0)for(let _=0;_<y;_++)d=[d]}_r(r,d,i)}}function lF(e,t){return h4(e,"any",t==null?void 0:t.origin)}function zw(e,t){return h4(e,"read",t==null?void 0:t.origin)}function lE(e,t){return h4(e,"write",t==null?void 0:t.origin)}function h4(e,t,i){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&i){let a;a=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],a&&(t==="any"||t in a)&&(r=a)}return r}function uF(e){const t=hF(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],a=r.types?cF(r):t;rx(a,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),lx(a,r)}rx(t,e.json,!0),lx(t,e.json)}function hF(e){return e.json.types?Vw(e.json):e.type?uE(e):Vw(e)}function cF(e){return e.type?uE(e):Vw(e)}function uE(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!QI(i);)i=i[0],t++;return{type:i,ndimArray:t}}function Vw(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function pF(e){rF(e)&&(ZD(e),uF(e))}const V2=new Set,G2=new Set;function B(e){return t=>{t.prototype.declaredClass=e,fF(t);const i=[],r=[];let a=t.prototype;for(;a;)a.hasOwnProperty("initialize")&&!V2.has(a.initialize)&&(V2.add(a.initialize),i.push(a.initialize)),a.hasOwnProperty("destroy")&&!G2.has(a.destroy)&&(G2.add(a.destroy),r.push(a.destroy)),a=Object.getPrototypeOf(a);V2.clear(),G2.clear();class d extends t{constructor(...m){if(super(...m),this.constructor===d&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),r.length){let _=!1;const $=this[uI];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0,$.call(this);for(let M=0;M<r.length;M++)r[M].call(this)}}})}this.postscript(...m)}}}return d.__accessorMetadata__=Vf(t.prototype),d.prototype.declaredClass=e,d}}function dF(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;Je(r.observerObject);const a=i.store;return a.has(e)?a.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function fF(e){const t=e.prototype,i=Vf(t),r={};for(const a of Object.getOwnPropertyNames(i)){const d=i[a];pF(d),r[a]={enumerable:!0,configurable:!0,get:dF(a,d),set(y){const m=this.__accessor__;if(m!==void 0){if(!Object.isFrozen(this)){if(m.initialized&&d.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${a}' of ${this.declaredClass}`);if(m.lifecycle===ha.CONSTRUCTED&&d.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${a}' of ${this.declaredClass}`);m.set(a,y)}}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,r)}var hE,cE;function yF(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ka=Symbol("Accessor-Handles"),Gw=Symbol("Accessor-Initialized");let De=class pE{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:a}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const d=this;class y extends d{constructor(..._){super(..._),this.inherited=null,a&&a.apply(this,_)}}Vf(y.prototype);for(const m in t){const _=t[m];y.prototype[m]=typeof _=="function"?function(...$){const M=this.inherited;let A;this.inherited=function(...P){if(d.prototype[m])return d.prototype[m].apply(this,P)};try{A=_.apply(this,$)}catch(P){throw this.inherited=M,P}return this.inherited=M,A}:t[m]}for(const m in i){const _=yF(i[m]);S(_)(y.prototype,m)}return B(r)(y)}constructor(...t){if(this[hE]=null,this[cE]=!1,this.constructor===pE)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new nD(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,t)),ux.register(this,i.propertiesByName,this)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[Gw]=!0}initialize(){}[uI](){this[Ka]=Wt(this[Ka])}destroy(){var t;this.destroyed||(ux.unregister(this),kD(this),this.__accessor__.destroy(),(t=pD())==null||t.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Gw]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Qm(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return tg(this,t,i),this}watch(t,i,r){return RD(this,t,i,r)}own(t){this.addHandles(t)}addHandles(t,i){if(this.destroyed){const a=Array.isArray(t)?t:[t];for(const d of a)d.remove();return}let r=this[Ka];r==null&&(r=this[Ka]=new Mo),r.add(t,i)}removeHandles(t){const i=this[Ka];i!=null&&i.remove(t)}removeAllHandles(){const t=this[Ka];t!=null&&t.removeAll()}hasHandles(t){const i=this[Ka];return i!=null&&i.has(t)}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};hE=Ka,cE=Gw;const ux=new FinalizationRegistry(e=>{for(const t of e.values())t.destroy()});let Dy=class dE{constructor(){this._emitter=new dE.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(a=null){this._target=a,this._listenersMap=null}clear(){var a;(a=this._listenersMap)==null||a.clear(),this._listenersMap=null}destroy(){this.clear()}emit(a,d){const y=this._listenersMap&&this._listenersMap.get(a);if(!y)return!1;const m=this._target||this;return[...y].forEach(_=>{_.call(m,d)}),y.length>0}on(a,d){if(Array.isArray(a)){const m=a.map(_=>this.on(_,d));return bv(m)}if(a.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(a)||[];return y.push(d),this._listenersMap.set(a,y),{remove:()=>{const m=this._listenersMap&&this._listenersMap.get(a)||[],_=m.indexOf(d);_>=0&&m.splice(_,1)}}}once(a,d){const y=this.on(a,m=>{y.remove(),d.call(null,m)});return y}hasEventListener(a){const d=this._listenersMap&&this._listenersMap.get(a);return d!=null&&d.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let a=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(d,y){return this._emitter.emit(d,y)}on(d,y){return this._emitter.on(d,y)}once(d,y){return this._emitter.once(d,y)}hasEventListener(d){return this._emitter.hasEventListener(d)}};return a=b([B("esri.core.Evented")],a),a};let i=class extends De{constructor(){super(...arguments),this._emitter=new Dy.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,a){return this._emitter.emit(r,a)}on(r,a){return this._emitter.on(r,a)}once(r,a){return this._emitter.once(r,a)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=b([B("esri.core.Evented")],i),e.EventedAccessor=i})(Dy||(Dy={}));const Ea=Dy;var Mt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Mt||(Mt={}));function c4(e){return(t,i)=>{t[i]=e}}let Pv=class extends AI{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var oa;let mF=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}};const ds=new ru(mF,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),gF=()=>{};function q2(e){return e?e instanceof uh?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function U2(e){if(e&&e.length)return e[0]}function vF(e,t,i,r){const a=Math.min(e.length-i,t.length-r);let d=0;for(;d<a&&e[i+d]===t[r+d];)d++;return d}function fE(e,t,i,r){t&&t.forEach((a,d,y)=>{e.push(a),fE(e,i.call(r,a,d,y),i,r)})}const Ca=new Set,Na=new Set,ja=new Set,B2=new Map;let bF=0,uh=oa=class extends Ea.EventedAccessor{static isCollection(e){return e!=null&&e instanceof oa}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new Pv,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:bF++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof oa?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Je(this._observable),this._items}set items(e){this._emitBeforeChanges(Mt.ADD)||(this._splice(0,this.length,q2(e)),this._emitAfterChanges(Mt.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=gF,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Je(this._observable),this._emitBeforeChanges(Mt.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(Mt.ADD),this}addMany(e,t=this._items.length){if(Je(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Mt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,q2(e)),this._emitAfterChanges(Mt.ADD),this}at(e){if(Je(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Je(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Mt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Je(this._observable),this._createNewInstance({items:this._items.map(re)})}concat(...e){Je(this._observable);const t=e.map(q2);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Je(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let a=0;a<r;a++)e.call(t,i[a],a,i);this._emitAfterChanges(Mt.REMOVE)}every(e,t){return Je(this._observable),this._items.every(e,t)}filter(e,t){let i;return Je(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Je(this._observable),this._items.find(e,t)}findIndex(e,t){return Je(this._observable),this._items.findIndex(e,t)}flatten(e,t){Je(this._observable);const i=[];return fE(i,this,e,t),new oa(i)}forEach(e,t){return Je(this._observable),this._items.forEach(e,t)}getItemAt(e){return Je(this._observable),this._items[e]}getNextIndex(e){Je(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Je(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Je(this._observable),this._items.indexOf(e,t)}join(e=","){return Je(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Je(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Je(this._observable);const i=this._items.map(e,t);return new oa({items:i})}reorder(e,t=this.length-1){Je(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Mt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Mt.MOVE)}return e}}pop(){if(Je(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return;const e=U2(this._splice(this.length-1,1));return this._emitAfterChanges(Mt.REMOVE),e}push(...e){return Je(this._observable),this._emitBeforeChanges(Mt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Mt.ADD)),this.length}reduce(e,t){Je(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Je(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Je(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Je(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Mt.REMOVE))return;const t=U2(this._splice(e,1));return this._emitAfterChanges(Mt.REMOVE),t}removeMany(e){if(Je(this._observable),!e||!e.length||this._emitBeforeChanges(Mt.REMOVE))return[];const t=e instanceof oa?e.toArray():e,i=this._items,r=[],a=t.length;for(let d=0;d<a;d++){const y=t[d],m=i.indexOf(y);if(m>-1){const _=1+vF(t,i,d+1,m+1),$=this._splice(m,_);$&&$.length>0&&r.push.apply(r,$),d+=_-1}}return this._emitAfterChanges(Mt.REMOVE),r}reverse(){if(Je(this._observable),this._emitBeforeChanges(Mt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Mt.MOVE),this}shift(){if(Je(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return;const e=U2(this._splice(0,1));return this._emitAfterChanges(Mt.REMOVE),e}slice(e=0,t=this.length){return Je(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Je(this._observable),this._items.some(e,t)}sort(e){if(Je(this._observable),!this.length||this._emitBeforeChanges(Mt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Mt.MOVE),this}splice(e,t,...i){Je(this._observable);const r=(t?Mt.REMOVE:0)|(i.length?Mt.ADD:0);if(this._emitBeforeChanges(r))return[];const a=this._splice(e,t,i)||[];return this._emitAfterChanges(r),a}toArray(){return Je(this._observable),this._items.slice()}toJSON(){return Je(this._observable),this.toArray()}toLocaleString(){return Je(this._observable),this._items.toLocaleString()}toString(){return Je(this._observable),this._items.toString()}unshift(...e){return Je(this._observable),!e.length||this._emitBeforeChanges(Mt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Mt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,a=this.itemType;let d,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Vp(()=>this._dispatchChange())),t){if(y=r.splice(e,t),this.hasEventListener("before-remove")){const m=ds.acquire();m.target=this,m.cancellable=!0;for(let _=0,$=y.length;_<$;_++)d=y[_],m.reset(d),this.emit("before-remove",m),m.defaultPrevented&&(y.splice(_,1),r.splice(e,0,d),e+=1,_-=1,$-=1);ds.release(m)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const m=ds.acquire();m.target=this,m.cancellable=!1;const _=y.length;for(let $=0;$<_;$++)m.reset(y[$]),this.emit("after-remove",m);ds.release(m)}}if(i&&i.length){if(a){const M=[];for(const A of i){const P=a.ensureType(A);P==null&&A!=null||M.push(P)}i=M}const m=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),$=e===this.length;if(m||_){const M=ds.acquire();M.target=this,M.cancellable=!0;const A=ds.acquire();A.target=this,A.cancellable=!1;for(const P of i)m?(M.reset(P),this.emit("before-add",M),M.defaultPrevented||($?r.push(P):r.splice(e++,0,P),this._set("length",r.length),_&&(A.reset(P),this.emit("after-add",A)))):($?r.push(P):r.splice(e++,0,P),this._set("length",r.length),A.reset(P),this.emit("after-add",A));ds.release(A),ds.release(M)}else{if($)for(const M of i)r.push(M);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=ds.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,ds.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=ds.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),ds.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Ca.clear(),Na.clear(),ja.clear();for(const{added:_,removed:$}of i){if(_)if(ja.size===0&&Na.size===0)for(const M of _)Ca.add(M);else for(const M of _)Na.has(M)?(ja.add(M),Na.delete(M)):ja.has(M)||Ca.add(M);if($)if(ja.size===0&&Ca.size===0)for(const M of $)Na.add(M);else for(const M of $)Ca.has(M)?Ca.delete(M):(ja.delete(M),Na.add(M))}const r=Cr.acquire();Ca.forEach(_=>{r.push(_)});const a=Cr.acquire();Na.forEach(_=>{a.push(_)});const d=this._items,y=t.items,m=Cr.acquire();if(ja.forEach(_=>{y.indexOf(_)!==d.indexOf(_)&&m.push(_)}),t.listeners&&(r.length||a.length||m.length)){const _={target:this,added:r,removed:a,moved:m},$=t.listeners.length;for(let M=0;M<$;M++){const A=t.listeners[M];A.removed||A.callback.call(this,_)}}Cr.release(r),Cr.release(a),Cr.release(m)}Ca.clear(),Na.clear(),ja.clear()}};uh.ofType=e=>{if(!e)return oa;if(B2.has(e))return B2.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const a=e.typeMap[r].prototype.declaredClass;t?t+=` | ${a}`:t=a}let i=class extends oa{};return b([c4({Type:e,ensureType:typeof e=="function"?yi(e):_o(e)})],i.prototype,"itemType",void 0),i=b([B(`esri.core.Collection<${t}>`)],i),B2.set(e,i),i},b([S()],uh.prototype,"length",void 0),b([S()],uh.prototype,"items",null),uh=oa=b([B("esri.core.Collection")],uh);const Le=uh;function Nh(e,t,i=Le){return t||(t=new i),t===e||(t.removeAll(),wF(e)?t.addMany(e):e&&t.add(e)),t}function yE(e){return e}function wF(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const hx=new Set;function _F(e,t,i=!1){i&&hx.has(t)||(i&&hx.add(t),e.warn(`🛑 DEPRECATED - ${t}`))}function qw(e,t,i={}){if(le("esri-deprecation-warnings")){const{moduleName:r}=i;pg(e,`Property: ${(r?r+"::":"")+t}`,i)}}function pg(e,t,i={}){if(le("esri-deprecation-warnings")){const{replacement:r,version:a,see:d,warnOnce:y}=i;let m=t;r&&(m+=`
	🛠️ Replacement: ${r}`),a&&(m+=`
	⚙️ Version: ${a}`),d&&(m+=`
	🔗 See ${d} for more details.`),_F(e,m,y)}}let SF=class mE{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new mE;return this._values.forEach((r,a)=>{t&&t.has(a)||i.set(a,re(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??Te.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var a;return((a=this._values.get(r))==null?void 0:a.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===Te.DEFAULTS){const a=this._values.get(t);if(a&&a.origin!=null&&a.origin>r)return}this._values.set(t,new xF(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===Te.DEFAULTS?t:Te.USER}},xF=class{constructor(t,i){this.value=t,this.origin=i}};function gE(e,t,i){t.keys().forEach(a=>{i.set(a,t.get(a),Te.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(a=>{e.internalGet(a)&&i.set(a,e.internalGet(a),Te.DEFAULTS)})}function $F(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&US(r,i))return!0}else for(const a of r)if(a===t||a.includes(".")&&a.indexOf(t)===0&&US(a,i))return!0;return!1}function TF(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function IF(e,t,i,r,a){let d=zw(t[i],a);TF(d)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))d=zw(t[y],a),$F(d,i,r)&&(e[y]=!0)}function EF(e,t,i,r){const a=i.metadatas,d=lF(a[t],r),y=d==null?void 0:d.default;if(y===void 0)return;const m=typeof y=="function"?y.call(e,t,r):y;m!==void 0&&i.set(t,m)}const vE={origin:"service"};function bE(e,t,i=vE){if(!t||typeof t!="object")return;const r=qi(e),a=r.metadatas,d={};for(const y of Object.getOwnPropertyNames(t))IF(d,a,y,t,i);r.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(d)){const m=zw(a[y],i).read,_=m&&m.source;let $;$=_&&typeof _=="string"?zf(t,_):t[y],m&&m.reader&&($=m.reader.call(e,$,t,i)),$!==void 0&&r.set(y,$)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(a))d[y]||EF(e,y,r,i)}r.setDefaultOrigin("user")}function MF(e,t,i,r=vE){var d;const a={...r,messages:[]};i(a),(d=a.messages)==null||d.forEach(y=>{y.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(y):e.loadWarnings.push(y)})}function AF(e,t,i,r,a){var y,m;const d={};return(m=(y=t.write)==null?void 0:y.writer)==null||m.call(e,r,d,i,a),d}function wE(e,t,i,r,a,d){if(!r||!r.write)return!1;const y=e.get(i);if(!a&&r.write.overridePolicy){const m=r.write.overridePolicy.call(e,y,i,d??void 0);m!==void 0&&(a=m)}if(a||(a=r.write),!a||a.enabled===!1)return!1;if((y===null&&!a.allowNull&&!a.writerEnsuresNonNull||y===void 0)&&a.isRequired){const m=new se("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return m&&d&&d.messages?d.messages.push(m):m&&!d&&fe.getLogger("esri.core.accessorSupport.write").error(m.name,m.message),!1}return!(y===void 0||y===null&&!a.allowNull&&!a.writerEnsuresNonNull||!a.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===Te.DEFAULTS)&&kF(e,i,d,r,y)||!a.ignoreOrigin&&d&&d.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Nr(d.origin))}function kF(e,t,i,r,a){const d=r.default;if(d===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(a);if(typeof d=="function"){if(Array.isArray(a)){const y=d.call(e,t,i??void 0);return wv(y,a)}return!1}return d===a}function OF(e,t,i,r){const a=qi(e),d=a.metadatas,y=lE(d[t],r);return!!y&&wE(e,a,t,y,i,r)}function _E(e,t,i){var d,y;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Ny(t,e.toJSON(i));const r=qi(e),a=r.metadatas;for(const m in a){const _=lE(a[m],i);if(!wE(e,r,m,_,void 0,i))continue;const $=e.get(m),M=AF(e,_,_.write&&typeof _.write.target=="string"?_.write.target:m,$,i);Object.keys(M).length>0&&(t=Ny(t,M),(y=(d=i==null?void 0:i.resources)==null?void 0:d.pendingOperations)!=null&&y.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>Ny(t,M,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:m,oldOrigin:QL(r.store.originOf(m)),newOrigin:i.origin}))}return t}const Uf=e=>{let t=class extends e{constructor(...i){super(...i);const r=qi(this),a=r.store,d=new SF;r.store=d,gE(r,a,d)}read(i,r){bE(this,i,r)}write(i,r){return _E(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return PF.call(this,i,r)}};return t=b([B("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function PF(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let pe=class extends Uf(De){};pe=b([B("esri.core.JSONSupport")],pe);var _l;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(_l||(_l={}));let CF=class{constructor(){this._resolver=Vs(),this._status=_l.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=_l.RESOLVED,this._cleanUp()},()=>{this._status=_l.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===_l.RESOLVED}isRejected(){return this._status===_l.REJECTED}isFulfilled(){return this._status!==_l.PENDING}abort(){this._resolver.reject(li())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Vs(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},a=>{this.isFulfilled()||this._allPromise!==r||Jr(a)||this._resolver.reject(a)}),t.resolve()}};const Cv=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new CF,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=b([B("esri.core.Promise")],t),t};let dg=class extends Cv(De){};dg=b([B("esri.core.Promise")],dg);const NF="not-loaded",jF="loading",RF="failed",cx="loaded",SE=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const a=this.load.bind(this);this.load=d=>{const y=new Promise((m,_)=>{const $=o4(d,_);this.destroyed&&_(new se("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(m,_).finally(()=>{$&&$.remove()})});if(this.loadStatus===NF){this._set("loadStatus",jF);const m=this._loadController=new AbortController;a({signal:m.signal}),Fs(m.signal,()=>{this._promiseProps.abort()})}return r(),y}})),this.when(()=>{this._set("loadStatus",cx),this._loadController=null},r=>{this._set("loadStatus",RF),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController=pf(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===cx}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new se("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return b([S({readOnly:!0})],t.prototype,"loaded",null),b([S({readOnly:!0})],t.prototype,"loadError",void 0),b([S({clonable:!1})],t.prototype,"loadStatus",void 0),b([S({type:[Gs],readOnly:!0})],t.prototype,"loadWarnings",null),t=b([B("esri.core.Loadable")],t),t};let j0=class extends SE(dg){};j0=b([B("esri.core.Loadable")],j0),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=SE,e.isLoadable=t}(j0||(j0={}));const Rn=j0;function Sde(e,t,i){return Kh(e.map((r,a)=>t.apply(i,[r,a])))}async function LF(e,t,i){return(await Kh(e.map((r,a)=>t.apply(i,[r,a])))).map(r=>r.value)}function p4(e){return{ok:!0,value:e}}function d4(e){return{ok:!1,error:e}}function DF(e){return e!=null&&e.ok===!0?e.value:null}function FF(e){return e!=null&&e.ok===!1?e.error:null}async function Nv(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return p4(await e)}catch(t){return d4(t)}}async function xde(e){try{return p4(await e)}catch(t){return Ps(t),d4(t)}}function f4(e,t){return new Ya(e,t)}let Ya=class extends De{get value(){return DF(this._result)}get error(){return FF(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=pf(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(a=>{this._result=p4(a),this._cleanup()},a=>{this._result=d4(a),this._cleanup()}),this._abortHandle=Fs(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ai(this._abortHandle),this._abortController=null}};b([S()],Ya.prototype,"value",null),b([S()],Ya.prototype,"error",null),b([S()],Ya.prototype,"finished",null),b([S()],Ya.prototype,"promise",void 0),b([S()],Ya.prototype,"_result",void 0),Ya=b([B("esri.core.asyncUtils.ReactiveTask")],Ya);async function y4(e,t){return await e.load(),zF(e,t)}async function zF(e,t){const i=[],r=(...d)=>{for(const y of d)y!=null&&(Array.isArray(y)?r(...y):Le.isCollection(y)?y.forEach(m=>r(m)):Rn.isLoadable(y)&&i.push(y))};t(r);let a=null;if(await LF(i,async d=>{const y=await Nv(VF(d)?d.loadAll():d.load());y.ok!==!1||a||(a=y)}),a)throw a.error;return e}function VF(e){return"loadAll"in e&&typeof e.loadAll=="function"}const GF=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,qF={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function px(e){const t=e==null?void 0:e.match(GF);if(!t)return null;const[,i,r,a]=t;if(!i)return null;let d=null,y=null,m=null;const{devext:_,qaext:$,www:M}=qF;if(r)if(d=i,a)switch(a.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:m}=_);break;case"qa":({customBaseUrl:y,portalHostname:m}=$);break;default:return null}else({customBaseUrl:y,portalHostname:m}=M);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:m}=_);break;case"qaext":({customBaseUrl:y,portalHostname:m}=$);break;case"www":({customBaseUrl:y,portalHostname:m}=M);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:m,urlKey:d}}function UF(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function BF(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}const HF=fe.getLogger("esri.core.urlUtils"),qp=$t.request,dx="esri/config: esriConfig.request.proxyUrl is not set.",xE=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,$E=/^\s*http:/i,WF=/^\s*https:/i,JF=/^\s*file:/i,KF=/:\d+$/,YF=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ZF=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),XF=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let hp=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(ZF);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(XF),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const k1={},QF=new hp($t.applicationUrl);let vr=QF;const ez=tz();let m4=ez;const g4=()=>vr,Ide=()=>m4;function tz(){const e=vr.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${vr.scheme}://${vr.host}${vr.port!=null?`:${vr.port}`:""}`}${t}`}function Qi(e){if(!e)return null;const t={path:null,query:null},i=new hp(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=v4(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function v4(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const a=r.indexOf("=");let d,y;a<0?(d=decodeURIComponent(r),y=""):(d=decodeURIComponent(r.slice(0,a)),y=decodeURIComponent(r.slice(a+1)));let m=i[d];typeof m=="string"&&(m=i[d]=[m]),Array.isArray(m)?m.push(y):i[d]=y}return i}function fx(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function xp(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const a=encodeURIComponent(i)+"=",d=t&&t[i];return d?a+encodeURIComponent(d(r)):Array.isArray(r)?r.map(y=>fx(y)?a+encodeURIComponent(JSON.stringify(y)):a+encodeURIComponent(y)).join("&"):fx(r)?a+encodeURIComponent(JSON.stringify(r)):a+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function iz(e=!1){let t,i=qp.proxyUrl;if(typeof e=="string"){t=uz(e);const r=jv(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw HF.warn(dx),new se("urlutils:proxy-not-set",dx);return t&&Uw()&&(i=x4(i)),Qi(i)}function Ede(e){const t=jv(e);let i,r;if(t){const a=b4(t.proxyUrl);i=a.path,r=a.query?v4(a.query):null}if(i){const a=Qi(e);e=i+"?"+a.path;const d=xp({...r,...a.query});d&&(e=`${e}?${d}`)}return e}const p0={path:"",query:""};function b4(e){const t=e.indexOf("?");return t!==-1?(p0.path=e.slice(0,t),p0.query=e.slice(t+1)):(p0.path=e,p0.query=null),p0}function TE(e){return e=(e=yg(e=yz(e=b4(e).path),!0)).toLowerCase()}function rz(e){const t={proxyUrl:e.proxyUrl,urlPrefix:TE(e.urlPrefix)},i=qp.proxyRules,r=t.urlPrefix;let a=i.length;for(let d=0;d<i.length;d++){const y=i[d].urlPrefix;if(r.indexOf(y)===0){if(r.length===y.length)return-1;a=d;break}y.indexOf(r)===0&&(a=d+1)}return i.splice(a,0,t),a}function jv(e){const t=qp.proxyRules,i=TE(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function sz(e,t){if(!e||!t)return!1;e=fg(e),t=fg(t);const i=px(e),r=px(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&$p(e,t,!0)}function IE(e,t){return e=fg(e),t=fg(t),yg(e)===yg(t)}function fg(e){const t=(e=An(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function EE(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=qp.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function $p(e,t,i=!1){if(!e||!t)return!1;const r=Hw(e),a=Hw(t);return!(!i&&r.scheme!==a.scheme)&&r.host!=null&&a.host!=null&&r.host.toLowerCase()===a.host.toLowerCase()&&r.port===a.port}function w4(e){if(typeof e=="string"){if(!us(e))return!0;e=Hw(e)}if($p(e,vr))return!0;const t=qp.trustedServers||[];for(let i=0;i<t.length;i++){const r=nz(t[i]);for(let a=0;a<r.length;a++)if($p(e,r[a]))return!0}return!1}function nz(e){return k1[e]||(S4(e)||So(e)?k1[e]=[new hp(js(e))]:k1[e]=[new hp(`http://${e}`),new hp(`https://${e}`)]),k1[e]}function js(e,t=m4,i){return So(e)?i&&i.preserveProtocolRelative?e:vr.scheme==="http"&&vr.authority===kn(e).slice(2)?`http:${e}`:`https:${e}`:S4(e)?e:wa(e[0]==="/"?dz(t):t,e)}function _4(e,t=m4,i){if(e==null||!us(e))return e;const r=An(e),a=r.toLowerCase(),d=An(t).toLowerCase().replace(/\/+$/,""),y=i?An(i).toLowerCase().replace(/\/+$/,""):null;if(y&&d.indexOf(y)!==0)return e;const m=(A,P,j)=>(j=A.indexOf(P,j))===-1?A.length:j;let _=m(a,"/",a.indexOf("//")+2),$=-1;for(;a.slice(0,_+1)===d.slice(0,_)+"/"&&($=_+1,_!==a.length);)_=m(a,"/",_+1);if($===-1||y&&$<y.length)return e;e=r.slice($);const M=d.slice($-1).replaceAll(/[^/]+/g,"").length;if(M>0)for(let A=0;A<M;A++)e=`../${e}`;else e=`./${e}`;return e}function An(e){return e=vz(e=gz(e=mz(e=js(e=e.trim()))))}function wa(...e){const t=e.filter(Oh);if(!t||!t.length)return;const i=[];if(us(t[0])){const a=t[0],d=a.indexOf("//");d!==-1&&(i.push(a.slice(0,d+1)),cz(t[0])&&(i[0]+="/"),t[0]=a.slice(d+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((a,d)=>d?a.concat(d.split("/")):a,[]);for(let a=0;a<r.length;a++){const d=r[a];d===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!d&&a===r.length-1||d&&(d!=="."||i.length===0))&&i.push(d)}return i.join("/")}function kn(e,t=!1){if(e==null||Rv(e)||Yh(e))return null;let i=e.indexOf("://");if(i===-1&&So(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=yg(e,!0)),e}function us(e){return So(e)||S4(e)}function Rv(e){return e!=null&&e.slice(0,5)==="blob:"}function Yh(e){return e!=null&&e.slice(0,5)==="data:"}function oz(e){const t=gf(e);return t&&t.isBase64?BF(t.data):null}function Mde(e){return btoa(String.fromCharCode.apply(null,e)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const az=/^data:(.*?)(;base64)?,(.*)$/;function gf(e){const t=e.match(az);if(!t)return null;const[,i,r,a]=t;return{mediaType:i,isBase64:!!r,data:a}}function ME(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function Ade(e){const t=oz(e);if(!t)return null;const i=gf(e);return new Blob([t],{type:i.mediaType})}function kde(e,t){lz(e,t)}function lz(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function So(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function S4(e){return e!=null&&xE.test(e)}function uz(e){return e!=null&&WF.test(e)||vr.scheme==="https"&&So(e)}function hz(e){return e!=null&&$E.test(e)||vr.scheme==="http"&&So(e)}function cz(e){return e!=null&&JF.test(e)}function x4(e){return So(e)?`https:${e}`:e.replace($E,"https:")}function pz(){return vr.scheme==="http"}function Uw(){return vr.scheme==="https"}function yg(e,t=!1){return So(e)?e.slice(2):(e=e.replace(xE,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function dz(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function fz(e){let t=0;if(us(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function Ode(e,t){if(!e)return"";const i=Qi(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const a=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(a,"")}function yz(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function AE(e){return e.replace(/\/+$/,"")}function mz(e){if(/^https?:\/\//i.test(e)){const t=b4(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function gz(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function vz(e){const t=qp.httpsDomains;if(!hz(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),KF.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return pz()&&r===vr.authority&&!YF.test(e)||(Uw()&&r===vr.authority||t&&t.some(a=>r===a||r.endsWith(`.${a}`))||Uw()&&!jv(e))&&(e=x4(e)),e}function Bw(e,t,i){if(!(t&&i&&e&&us(e)))return e;const r=e.indexOf("//"),a=e.indexOf("/",r+2),d=e.indexOf(":",r+2),y=Math.min(a<0?e.length:a,d<0?e.length:d);return e.slice(r+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(y)}`}function Hw(e){return typeof e=="string"?new hp(js(e)):(e.scheme||(e.scheme=vr.scheme),e)}function Pde(e){return bz.test(e)}function kE(e,t){const i=Qi(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function OE(e,t,i){const r=Qi(e),a=r.query||{};return a[t]=String(i),`${r.path}?${xp(a)}`}function H2(e,t){const i=Qi(e),r=i.query||{};for(const d in t)r[d]=t[d];const a=xp(r);return a?`${i.path}?${a}`:i.path}function Cde(e){if(e==null)return null;const t=e.match(PE);return t?t[2]:null}function yx(e){if(e==null)return null;const t=e.match(PE);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Nde(e){return typeof e=="string"?gf(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(gf(r.result)),r.onerror=a=>i(a)})}const PE=/([^.]*)\.([^\/]*)$/,bz=/(^data:image\/svg|\.svg$)/i;function Se(e,t,i){let r,a;return t===void 0?(a=e,r=[void 0]):typeof t!="string"?(a=e,r=[void 0],i=t):(a=t,r=Array.isArray(e)?e:[e]),(d,y)=>{const m=d.constructor.prototype;for(const _ of r){const $=tE(d,_,a);$.write&&typeof $.write=="object"||($.write={}),i&&($.write.target=i),$.write.writer=m[y]}}}let ut=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,a,d)=>{const y=this.toJSON(r);y!==void 0&&_r(d,y,a)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}};function Sr(){return function(e,t){return new ut(e,{ignoreUnknown:!0,...t})}}let $4=class{constructor(t,i,r,a){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const d=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*d,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Lt=new $4(6378137,1/298.257223563,3e5,.006694379990137799),fa=new $4(3396190,1/169.8944472236118,23e4),Jl=new $4(1737400,0,0);var jh;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(jh||(jh={}));let I;const q={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)q[I]=0;for(I=2056;I<=2065;I++)q[I]=0;for(I=2067;I<=2135;I++)q[I]=0;for(I=2137;I<=2154;I++)q[I]=0;for(I=2161;I<=2170;I++)q[I]=0;for(I=2172;I<=2193;I++)q[I]=0;for(I=2195;I<=2198;I++)q[I]=0;for(I=2200;I<=2203;I++)q[I]=0;for(I=2205;I<=2217;I++)q[I]=0;for(I=2222;I<=2224;I++)q[I]=1;for(I=2225;I<=2250;I++)q[I]=2;for(I=2251;I<=2253;I++)q[I]=1;for(I=2257;I<=2264;I++)q[I]=2;for(I=2274;I<=2279;I++)q[I]=2;for(I=2280;I<=2282;I++)q[I]=1;for(I=2283;I<=2289;I++)q[I]=2;for(I=2290;I<=2292;I++)q[I]=0;for(I=2308;I<=2313;I++)q[I]=0;for(I=2315;I<=2491;I++)q[I]=0;for(I=2494;I<=2866;I++)q[I]=0;for(I=2867;I<=2869;I++)q[I]=1;for(I=2870;I<=2888;I++)q[I]=2;for(I=2891;I<=2895;I++)q[I]=2;for(I=2896;I<=2898;I++)q[I]=1;for(I=2902;I<=2908;I++)q[I]=2;for(I=2915;I<=2920;I++)q[I]=2;for(I=2921;I<=2923;I++)q[I]=1;for(I=2924;I<=2930;I++)q[I]=2;for(I=2931;I<=2962;I++)q[I]=0;for(I=2964;I<=2968;I++)q[I]=2;for(I=2969;I<=2973;I++)q[I]=0;for(I=2975;I<=2991;I++)q[I]=0;for(I=2995;I<=3051;I++)q[I]=0;for(I=3054;I<=3079;I++)q[I]=0;for(I=3081;I<=3088;I++)q[I]=0;for(I=3092;I<=3101;I++)q[I]=0;for(I=3106;I<=3138;I++)q[I]=0;for(I=3146;I<=3151;I++)q[I]=0;for(I=3153;I<=3166;I++)q[I]=0;for(I=3168;I<=3172;I++)q[I]=0;for(I=3174;I<=3203;I++)q[I]=0;for(I=3294;I<=3358;I++)q[I]=0;for(I=3367;I<=3403;I++)q[I]=0;for(I=3408;I<=3416;I++)q[I]=0;for(I=3417;I<=3438;I++)q[I]=2;for(I=3441;I<=3446;I++)q[I]=2;for(I=3447;I<=3450;I++)q[I]=0;for(I=3451;I<=3459;I++)q[I]=2;for(I=3460;I<=3478;I++)q[I]=0;for(I=3554;I<=3559;I++)q[I]=0;for(I=3560;I<=3570;I++)q[I]=2;for(I=3571;I<=3581;I++)q[I]=0;for(I=3594;I<=3597;I++)q[I]=0;for(I=3601;I<=3604;I++)q[I]=0;for(I=3637;I<=3639;I++)q[I]=0;for(I=3665;I<=3667;I++)q[I]=0;for(I=3693;I<=3695;I++)q[I]=0;for(I=3701;I<=3727;I++)q[I]=0;for(I=3728;I<=3739;I++)q[I]=2;for(I=3740;I<=3751;I++)q[I]=0;for(I=3753;I<=3760;I++)q[I]=2;for(I=3761;I<=3773;I++)q[I]=0;for(I=3775;I<=3777;I++)q[I]=0;for(I=3779;I<=3781;I++)q[I]=0;for(I=3783;I<=3785;I++)q[I]=0;for(I=3788;I<=3791;I++)q[I]=0;for(I=3797;I<=3802;I++)q[I]=0;for(I=3814;I<=3816;I++)q[I]=0;for(I=3825;I<=3829;I++)q[I]=0;for(I=3832;I<=3841;I++)q[I]=0;for(I=3844;I<=3852;I++)q[I]=0;for(I=3873;I<=3885;I++)q[I]=0;for(I=3890;I<=3893;I++)q[I]=0;for(I=3907;I<=3912;I++)q[I]=0;for(I=3942;I<=3950;I++)q[I]=0;for(I=3968;I<=3970;I++)q[I]=0;for(I=3973;I<=3976;I++)q[I]=0;for(I=3986;I<=3989;I++)q[I]=0;for(I=3994;I<=3997;I++)q[I]=0;for(I=4048;I<=4051;I++)q[I]=0;for(I=4056;I<=4063;I++)q[I]=0;for(I=4093;I<=4096;I++)q[I]=0;for(I=4390;I<=4398;I++)q[I]=0;for(I=4399;I<=4413;I++)q[I]=2;for(I=4418;I<=4433;I++)q[I]=2;for(I=4455;I<=4457;I++)q[I]=2;for(I=4484;I<=4489;I++)q[I]=0;for(I=4491;I<=4554;I++)q[I]=0;for(I=4568;I<=4589;I++)q[I]=0;for(I=4652;I<=4656;I++)q[I]=0;for(I=4766;I<=4800;I++)q[I]=0;for(I=5014;I<=5016;I++)q[I]=0;for(I=5069;I<=5072;I++)q[I]=0;for(I=5105;I<=5130;I++)q[I]=0;for(I=5173;I<=5188;I++)q[I]=0;for(I=5253;I<=5259;I++)q[I]=0;for(I=5269;I<=5275;I++)q[I]=0;for(I=5292;I<=5311;I++)q[I]=0;for(I=5329;I<=5331;I++)q[I]=0;for(I=5343;I<=5349;I++)q[I]=0;for(I=5355;I<=5357;I++)q[I]=0;for(I=5387;I<=5389;I++)q[I]=0;for(I=5459;I<=5463;I++)q[I]=0;for(I=5479;I<=5482;I++)q[I]=0;for(I=5518;I<=5520;I++)q[I]=0;for(I=5530;I<=5539;I++)q[I]=0;for(I=5550;I<=5552;I++)q[I]=0;for(I=5562;I<=5583;I++)q[I]=0;for(I=5623;I<=5625;I++)q[I]=2;for(I=5631;I<=5639;I++)q[I]=0;for(I=5649;I<=5653;I++)q[I]=0;for(I=5663;I<=5680;I++)q[I]=0;for(I=5682;I<=5685;I++)q[I]=0;for(I=5875;I<=5877;I++)q[I]=0;for(I=5896;I<=5899;I++)q[I]=0;for(I=5921;I<=5940;I++)q[I]=0;for(I=6050;I<=6125;I++)q[I]=0;for(I=6244;I<=6275;I++)q[I]=0;for(I=6328;I<=6348;I++)q[I]=0;for(I=6350;I<=6356;I++)q[I]=0;for(I=6366;I<=6372;I++)q[I]=0;for(I=6381;I<=6387;I++)q[I]=0;for(I=6393;I<=6404;I++)q[I]=0;for(I=6480;I<=6483;I++)q[I]=0;for(I=6511;I<=6514;I++)q[I]=0;for(I=6579;I<=6581;I++)q[I]=0;for(I=6619;I<=6624;I++)q[I]=0;for(I=6625;I<=6627;I++)q[I]=2;for(I=6628;I<=6632;I++)q[I]=0;for(I=6634;I<=6637;I++)q[I]=0;for(I=6669;I<=6692;I++)q[I]=0;for(I=6707;I<=6709;I++)q[I]=0;for(I=6720;I<=6723;I++)q[I]=0;for(I=6732;I<=6738;I++)q[I]=0;for(I=6931;I<=6933;I++)q[I]=0;for(I=6956;I<=6959;I++)q[I]=0;for(I=7005;I<=7007;I++)q[I]=0;for(I=7057;I<=7070;I++)q[I]=2;for(I=7074;I<=7082;I++)q[I]=0;for(I=7109;I<=7118;I++)q[I]=0;for(I=7119;I<=7127;I++)q[I]=1;for(I=7374;I<=7376;I++)q[I]=0;for(I=7528;I<=7586;I++)q[I]=0;for(I=7587;I<=7645;I++)q[I]=2;for(I=7692;I<=7696;I++)q[I]=0;for(I=7755;I<=7787;I++)q[I]=0;for(I=7791;I<=7795;I++)q[I]=0;for(I=7799;I<=7801;I++)q[I]=0;for(I=7803;I<=7805;I++)q[I]=0;for(I=7825;I<=7831;I++)q[I]=0;for(I=7845;I<=7859;I++)q[I]=0;for(I=8013;I<=8032;I++)q[I]=0;for(I=8065;I<=8068;I++)q[I]=1;for(I=8518;I<=8529;I++)q[I]=2;for(I=8533;I<=8536;I++)q[I]=2;for(I=8538;I<=8540;I++)q[I]=2;for(I=8677;I<=8679;I++)q[I]=0;for(I=8836;I<=8840;I++)q[I]=0;for(I=8857;I<=8859;I++)q[I]=0;for(I=8908;I<=8910;I++)q[I]=0;for(I=9154;I<=9159;I++)q[I]=0;for(I=9205;I<=9218;I++)q[I]=0;for(I=9271;I<=9273;I++)q[I]=0;for(I=9295;I<=9297;I++)q[I]=0;for(I=9356;I<=9360;I++)q[I]=0;for(I=9404;I<=9407;I++)q[I]=0;for(I=9476;I<=9482;I++)q[I]=0;for(I=9487;I<=9494;I++)q[I]=0;for(I=9697;I<=9699;I++)q[I]=0;for(I=9821;I<=9865;I++)q[I]=0;for(I=20002;I<=20032;I++)q[I]=0;for(I=20047;I<=20049;I++)q[I]=0;for(I=20062;I<=20092;I++)q[I]=0;for(I=20135;I<=20138;I++)q[I]=0;for(I=20248;I<=20258;I++)q[I]=0;for(I=20348;I<=20358;I++)q[I]=0;for(I=20436;I<=20440;I++)q[I]=0;for(I=20822;I<=20824;I++)q[I]=0;for(I=20904;I<=20932;I++)q[I]=0;for(I=20934;I<=20936;I++)q[I]=0;for(I=21004;I<=21032;I++)q[I]=0;for(I=21035;I<=21037;I++)q[I]=0;for(I=21095;I<=21097;I++)q[I]=0;for(I=21148;I<=21150;I++)q[I]=0;for(I=21207;I<=21264;I++)q[I]=0;for(I=21307;I<=21364;I++)q[I]=0;for(I=21413;I<=21423;I++)q[I]=0;for(I=21453;I<=21463;I++)q[I]=0;for(I=21473;I<=21483;I++)q[I]=0;for(I=21780;I<=21782;I++)q[I]=0;for(I=21891;I<=21894;I++)q[I]=0;for(I=21896;I<=21899;I++)q[I]=0;for(I=22171;I<=22177;I++)q[I]=0;for(I=22181;I<=22187;I++)q[I]=0;for(I=22191;I<=22197;I++)q[I]=0;for(I=22207;I<=22222;I++)q[I]=0;for(I=22234;I<=22236;I++)q[I]=0;for(I=22243;I<=22250;I++)q[I]=0;for(I=22262;I<=22265;I++)q[I]=0;for(I=22307;I<=22322;I++)q[I]=0;for(I=22348;I<=22357;I++)q[I]=0;for(I=22407;I<=22422;I++)q[I]=0;for(I=22462;I<=22465;I++)q[I]=0;for(I=22521;I<=22525;I++)q[I]=0;for(I=22607;I<=22622;I++)q[I]=0;for(I=22641;I<=22646;I++)q[I]=0;for(I=22648;I<=22657;I++)q[I]=0;for(I=22707;I<=22722;I++)q[I]=0;for(I=22762;I<=22765;I++)q[I]=0;for(I=22991;I<=22994;I++)q[I]=0;for(I=23028;I<=23038;I++)q[I]=0;for(I=23830;I<=23853;I++)q[I]=0;for(I=23866;I<=23872;I++)q[I]=0;for(I=23877;I<=23884;I++)q[I]=0;for(I=23886;I<=23894;I++)q[I]=0;for(I=23946;I<=23948;I++)q[I]=0;for(I=24311;I<=24313;I++)q[I]=0;for(I=24342;I<=24347;I++)q[I]=0;for(I=24370;I<=24374;I++)q[I]=10;for(I=24375;I<=24381;I++)q[I]=0;for(I=24718;I<=24721;I++)q[I]=0;for(I=24817;I<=24821;I++)q[I]=0;for(I=24877;I<=24882;I++)q[I]=0;for(I=24891;I<=24893;I++)q[I]=0;for(I=25391;I<=25395;I++)q[I]=0;for(I=25828;I<=25838;I++)q[I]=0;for(I=26191;I<=26195;I++)q[I]=0;for(I=26391;I<=26393;I++)q[I]=0;for(I=26701;I<=26722;I++)q[I]=0;for(I=26729;I<=26799;I++)q[I]=2;for(I=26801;I<=26803;I++)q[I]=2;for(I=26811;I<=26813;I++)q[I]=2;for(I=26847;I<=26870;I++)q[I]=2;for(I=26891;I<=26899;I++)q[I]=0;for(I=26901;I<=26923;I++)q[I]=0;for(I=26929;I<=26946;I++)q[I]=0;for(I=26948;I<=26998;I++)q[I]=0;for(I=27037;I<=27040;I++)q[I]=0;for(I=27205;I<=27232;I++)q[I]=0;for(I=27258;I<=27260;I++)q[I]=0;for(I=27391;I<=27398;I++)q[I]=0;for(I=27561;I<=27564;I++)q[I]=0;for(I=27571;I<=27574;I++)q[I]=0;for(I=27581;I<=27584;I++)q[I]=0;for(I=27591;I<=27594;I++)q[I]=0;for(I=28191;I<=28193;I++)q[I]=0;for(I=28348;I<=28358;I++)q[I]=0;for(I=28402;I<=28432;I++)q[I]=0;for(I=28462;I<=28492;I++)q[I]=0;for(I=29118;I<=29122;I++)q[I]=0;for(I=29168;I<=29172;I++)q[I]=0;for(I=29177;I<=29185;I++)q[I]=0;for(I=29187;I<=29195;I++)q[I]=0;for(I=29900;I<=29903;I++)q[I]=0;for(I=30161;I<=30179;I++)q[I]=0;for(I=30491;I<=30494;I++)q[I]=0;for(I=30729;I<=30732;I++)q[I]=0;for(I=31251;I<=31259;I++)q[I]=0;for(I=31265;I<=31268;I++)q[I]=0;for(I=31275;I<=31279;I++)q[I]=0;for(I=31281;I<=31297;I++)q[I]=0;for(I=31461;I<=31469;I++)q[I]=0;for(I=31491;I<=31495;I++)q[I]=0;for(I=31917;I<=31922;I++)q[I]=0;for(I=31965;I<=32e3;I++)q[I]=0;for(I=32001;I<=32003;I++)q[I]=2;for(I=32005;I<=32031;I++)q[I]=2;for(I=32033;I<=32060;I++)q[I]=2;for(I=32064;I<=32067;I++)q[I]=2;for(I=32074;I<=32077;I++)q[I]=2;for(I=32081;I<=32086;I++)q[I]=0;for(I=32107;I<=32130;I++)q[I]=0;for(I=32133;I<=32159;I++)q[I]=0;for(I=32164;I<=32167;I++)q[I]=2;for(I=32180;I<=32199;I++)q[I]=0;for(I=32201;I<=32260;I++)q[I]=0;for(I=32301;I<=32360;I++)q[I]=0;for(I=32601;I<=32662;I++)q[I]=0;for(I=32664;I<=32667;I++)q[I]=2;for(I=32701;I<=32761;I++)q[I]=0;for(I=53001;I<=53004;I++)q[I]=0;for(I=53008;I<=53019;I++)q[I]=0;for(I=53021;I<=53032;I++)q[I]=0;for(I=53034;I<=53037;I++)q[I]=0;for(I=53042;I<=53046;I++)q[I]=0;for(I=53074;I<=53080;I++)q[I]=0;for(I=54001;I<=54004;I++)q[I]=0;for(I=54008;I<=54019;I++)q[I]=0;for(I=54021;I<=54032;I++)q[I]=0;for(I=54034;I<=54037;I++)q[I]=0;for(I=54042;I<=54046;I++)q[I]=0;for(I=54048;I<=54053;I++)q[I]=0;for(I=54074;I<=54080;I++)q[I]=0;for(I=54098;I<=54101;I++)q[I]=0;for(I=102001;I<=102040;I++)q[I]=0;for(I=102042;I<=102063;I++)q[I]=0;for(I=102065;I<=102067;I++)q[I]=0;for(I=102070;I<=102117;I++)q[I]=0;for(I=102122;I<=102216;I++)q[I]=0;for(I=102221;I<=102377;I++)q[I]=0;for(I=102382;I<=102388;I++)q[I]=0;for(I=102389;I<=102398;I++)q[I]=2;for(I=102399;I<=102444;I++)q[I]=0;for(I=102445;I<=102447;I++)q[I]=2;for(I=102448;I<=102458;I++)q[I]=0;for(I=102459;I<=102468;I++)q[I]=2;for(I=102469;I<=102499;I++)q[I]=0;for(I=102500;I<=102519;I++)q[I]=1;for(I=102520;I<=102524;I++)q[I]=0;for(I=102525;I<=102529;I++)q[I]=2;for(I=102530;I<=102588;I++)q[I]=0;for(I=102590;I<=102598;I++)q[I]=0;for(I=102601;I<=102603;I++)q[I]=0;for(I=102605;I<=102628;I++)q[I]=0;for(I=102629;I<=102646;I++)q[I]=2;for(I=102648;I<=102700;I++)q[I]=2;for(I=102701;I<=102703;I++)q[I]=0;for(I=102707;I<=102730;I++)q[I]=2;for(I=102733;I<=102758;I++)q[I]=2;for(I=102767;I<=102900;I++)q[I]=0;for(I=102901;I<=102933;I++)q[I]=2;for(I=102934;I<=102950;I++)q[I]=13;for(I=102951;I<=102955;I++)q[I]=0;for(I=102961;I<=102963;I++)q[I]=0;for(I=102965;I<=102969;I++)q[I]=0;for(I=102971;I<=102973;I++)q[I]=0;for(I=102975;I<=102989;I++)q[I]=0;for(I=102990;I<=102992;I++)q[I]=1;for(I=102997;I<=103002;I++)q[I]=0;for(I=103003;I<=103008;I++)q[I]=2;for(I=103009;I<=103011;I++)q[I]=0;for(I=103012;I<=103014;I++)q[I]=2;for(I=103019;I<=103021;I++)q[I]=0;for(I=103022;I<=103024;I++)q[I]=2;for(I=103029;I<=103031;I++)q[I]=0;for(I=103032;I<=103034;I++)q[I]=2;for(I=103065;I<=103068;I++)q[I]=0;for(I=103074;I<=103076;I++)q[I]=0;for(I=103077;I<=103079;I++)q[I]=1;for(I=103080;I<=103082;I++)q[I]=0;for(I=103083;I<=103085;I++)q[I]=2;for(I=103090;I<=103093;I++)q[I]=0;for(I=103097;I<=103099;I++)q[I]=0;for(I=103100;I<=103102;I++)q[I]=2;for(I=103107;I<=103109;I++)q[I]=0;for(I=103110;I<=103112;I++)q[I]=2;for(I=103113;I<=103116;I++)q[I]=0;for(I=103117;I<=103120;I++)q[I]=2;for(I=103153;I<=103157;I++)q[I]=0;for(I=103158;I<=103162;I++)q[I]=2;for(I=103163;I<=103165;I++)q[I]=0;for(I=103166;I<=103168;I++)q[I]=1;for(I=103169;I<=103171;I++)q[I]=2;for(I=103186;I<=103188;I++)q[I]=0;for(I=103189;I<=103191;I++)q[I]=2;for(I=103192;I<=103195;I++)q[I]=0;for(I=103196;I<=103199;I++)q[I]=2;for(I=103200;I<=103224;I++)q[I]=0;for(I=103225;I<=103227;I++)q[I]=1;for(I=103232;I<=103237;I++)q[I]=0;for(I=103238;I<=103243;I++)q[I]=2;for(I=103244;I<=103246;I++)q[I]=0;for(I=103247;I<=103249;I++)q[I]=2;for(I=103254;I<=103256;I++)q[I]=0;for(I=103257;I<=103259;I++)q[I]=2;for(I=103264;I<=103266;I++)q[I]=0;for(I=103267;I<=103269;I++)q[I]=2;for(I=103300;I<=103375;I++)q[I]=0;for(I=103381;I<=103383;I++)q[I]=0;for(I=103384;I<=103386;I++)q[I]=1;for(I=103387;I<=103389;I++)q[I]=0;for(I=103390;I<=103392;I++)q[I]=2;for(I=103397;I<=103399;I++)q[I]=0;for(I=103400;I<=103471;I++)q[I]=2;for(I=103476;I<=103478;I++)q[I]=0;for(I=103479;I<=103481;I++)q[I]=2;for(I=103486;I<=103488;I++)q[I]=0;for(I=103489;I<=103491;I++)q[I]=2;for(I=103492;I<=103495;I++)q[I]=0;for(I=103496;I<=103499;I++)q[I]=2;for(I=103528;I<=103543;I++)q[I]=0;for(I=103544;I<=103548;I++)q[I]=2;for(I=103549;I<=103551;I++)q[I]=0;for(I=103552;I<=103554;I++)q[I]=1;for(I=103555;I<=103557;I++)q[I]=2;for(I=103558;I<=103560;I++)q[I]=0;for(I=103571;I<=103573;I++)q[I]=0;for(I=103574;I<=103576;I++)q[I]=2;for(I=103577;I<=103580;I++)q[I]=0;for(I=103581;I<=103583;I++)q[I]=2;for(I=103595;I<=103694;I++)q[I]=0;for(I=103696;I<=103699;I++)q[I]=0;for(I=103700;I<=103793;I++)q[I]=2;for(I=103794;I<=103890;I++)q[I]=0;for(I=103891;I<=103896;I++)q[I]=2;for(I=103900;I<=103971;I++)q[I]=2;for(I=103972;I<=103977;I++)q[I]=0;for(I=112e3;I<=112101;I++)q[I]=0;const wz={102113:!0,102100:!0,3857:!0,3785:!0},_z={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},mx='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',O1=[-20037508342788905e-9,20037508342788905e-9],P1=[-20037508342787e-6,20037508342787e-6],CE={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:O1,origin:P1,dx:1e-5},102100:{wkTemplate:mx,valid:O1,origin:P1,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:O1,origin:P1,dx:1e-5},3857:{wkTemplate:mx,valid:O1,origin:P1,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ti(e,t){return e===t||e!=null&&t!=null&&(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Rh(e)&&Rh(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase())}function On(e){return Zi(e)&&e.wkid&&CE[e.wkid]||null}function NE(e){return!!Zi(e)&&(e.wkid?q[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function Sz(e){return!(I4(e)||M4(e))}function vf(e){return Zi(e)&&e.wkid===4326}function Lde(e){return Zi(e)&&e.wkid===jh.CGCS2000}function Rh(e){return Zi(e)&&e.wkid!=null&&wz[e.wkid]===!0}function xz(e){return Zi(e)&&e.wkid===32662}function T4(e){return e===jh.GCSMARS2000||e===jh.GCSMARS2000_SPHERE}function I4(e){return Zi(e)&&e.wkid!=null&&T4(e.wkid)}function E4(e){return e===jh.GCSMOON2000}function M4(e){return Zi(e)&&e.wkid!=null&&E4(e.wkid)}function $z(e){return Zi(e)&&e.wkid!=null&&_z[e.wkid]===!0}function Zi(e){return e!=null&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const Tz={wkid:4326,wkt:$v(CE[4326].wkTemplate,{Central_Meridian:"0.0"})},Iz={wkid:102100,latestWkid:3857},Ez={wkid:32662};function A4(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Mz=A4(Lt),jE=A4(fa),RE=A4(Jl),Az={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Lt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function kz(e){return e!=null&&(I4(e)||Ti(e,jE))?fa:e!=null&&(M4(e)||Ti(e,RE))?Jl:Lt}function Dde(e){return T4(e)?fa:E4(e)?Jl:Lt}const LE=39.37,Oz=Lt.radius*Math.PI/200,DE=/UNIT\[([^\]]+)\]\]$/i,xh=q,FE=/UNIT\[([^\]]+)\]/i,Pz=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Cz=Sr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Bn=e=>e*e,Ra=e=>e*e*e,bf={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Bn(.001)},"square-centimeters":{inBaseUnits:Bn(.01)},"square-decimeters":{inBaseUnits:Bn(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Bn(1e3)},"square-inches":{inBaseUnits:Bn(.0254)},"square-feet":{inBaseUnits:Bn(.3048)},"square-yards":{inBaseUnits:Bn(.9144)},"square-miles":{inBaseUnits:Bn(1609.344)},"square-us-feet":{inBaseUnits:Bn(1200/3937)},acres:{inBaseUnits:.0015625*Bn(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ra(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ra(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ra(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ra(1e3)},"cubic-inches":{inBaseUnits:1e3*Ra(.0254)},"cubic-feet":{inBaseUnits:1e3*Ra(.3048)},"cubic-yards":{inBaseUnits:1e3*Ra(.9144)},"cubic-miles":{inBaseUnits:1e3*Ra(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Nz=(()=>{const e={};for(const t in bf)for(const i in bf[t].units)e[i]=t;return e})();function jz(e,t,i){return e*bf[i].units[t].inBaseUnits}function Rz(e,t,i){return e/bf[i].units[t].inBaseUnits}function Ww(e){const t=Nz[e];if(!t)throw new Error("unknown type");return t}function gx(e,t=null){return t=t||Ww(e),bf[t].baseUnit===e}function gs(e,t,i){if(t===i)return e;const r=Ww(t);if(r!==Ww(i))throw new Error("incompatible units");const a=gx(t,r)?e:jz(e,t,r);return gx(i,r)?a:Rz(a,i,r)}function Lz(e,t,i){return gs(e,t,"meters")/(i*Math.PI/180)}function zE(e){return Cz.fromJSON(e.toLowerCase())||null}function Tp(e){if(e!=null&&!Sz(e))return 1;const t=Ma(e);return t>1e5?1:t}function Dz(e){return Ma(e)>=kz(e).metersPerDegree?"meters":GE(e)}function Ma(e,t=Lt.metersPerDegree){return Fz(e,!0)??t}function Fz(e,t=!1){const i=e!=null?e.wkid:null,r=e!=null?e.wkt:null;let a=null;if(i){if(T4(i))return fa.metersPerDegree;if(E4(i))return Jl.metersPerDegree;a=xh.values[xh[i]],!a&&t&&Pz.has(i)&&(a=Oz)}else r&&(UE(r)?a=vx(DE.exec(r),a):qE(r)&&(a=vx(FE.exec(r),a)));return a}function Fde(e){return e.isGeographic?1:Ma(e)}function vx(e,t){return e&&e[1]?VE(e[1]):t}function VE(e){return parseFloat(e.split(",")[1])}function GE(e){const t=e!=null?e.wkid:null,i=e!=null?e.wkt:null;let r=null;if(t)r=xh.units[xh[t]];else if(i){const a=UE(i)?DE:qE(i)?FE:null;if(a){const d=a.exec(i);d&&d[1]&&(r=Vz(d[1]))}}return r!=null?zE(r):null}function qE(e){return/^GEOCCS/i.test(e)}function UE(e){return/^PROJCS/i.test(e)}const zz=1e-7;function Vz(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!xh.units.includes(i)){const r=VE(e);i=null;const a=xh.values;for(let d=0;d<a.length;++d)if(Math.abs(r-a[d])<zz){i=xh.units[d];break}}return i}const Gz={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},qz={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Uz={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Bz=Sr()(Gz),Hz=Sr()(qz),zde=Sr()(Uz);var Jn;let Et=Jn=class extends pe{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Jn.WebMercator;if(e.wkid===4326)return Jn.WGS84}const t=new Jn;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return vf(this)}get isWebMercator(){return Rh(this)}get isGeographic(){return NE(this)}get isWrappable(){return $z(this)}get metersPerUnit(){return Ma(this)}get unit(){return GE(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Jn.WGS84)return Jn.WGS84;if(this===Jn.WebMercator)return Jn.WebMercator;const e=new Jn;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=re(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,a=this.imageCoordinateSystem;return t==null||r?JSON.stringify(a)===JSON.stringify(e.imageCoordinateSystem):i?a.id===t&&a.referenceServiceName===i:a.id===t}return Ti(this,e)}toJSON(e){return this.write(void 0,e)}};Et.GCS_NAD_1927=null,Et.WGS84=null,Et.WebMercator=null,Et.PlateCarree=null,b([S({readOnly:!0})],Et.prototype,"isWGS84",null),b([S({readOnly:!0})],Et.prototype,"isWebMercator",null),b([S({readOnly:!0})],Et.prototype,"isGeographic",null),b([S({readOnly:!0})],Et.prototype,"isWrappable",null),b([S({type:Ot,json:{write:!0}})],Et.prototype,"latestWkid",void 0),b([S({readOnly:!0})],Et.prototype,"metersPerUnit",null),b([S({readOnly:!0})],Et.prototype,"unit",null),b([S({type:Ot,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Et.prototype,"wkid",void 0),b([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Et.prototype,"wkt",void 0),b([Se("wkt"),Se("web-scene","wkt")],Et.prototype,"writeWkt",null),b([S({type:Ot,json:{write:!0}})],Et.prototype,"vcsWkid",void 0),b([S({type:Ot,json:{write:!0}})],Et.prototype,"latestVcsWkid",void 0),b([S()],Et.prototype,"imageCoordinateSystem",void 0),Et=Jn=b([B("esri.geometry.SpatialReference")],Et),Et.prototype.toJSON.isDefaultToJSON=!0,Et.GCS_NAD_1927=new Et({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Et.WGS84=new Et(Tz),Et.WebMercator=new Et(Iz),Et.PlateCarree=new Et(Ez),Object.freeze&&(Object.freeze(Et.GCS_NAD_1927),Object.freeze(Et.WGS84),Object.freeze(Et.WebMercator));const Xe=Et,BE="20230626",HE="b81703b48e0b92e492f4cc6b739af02a9af50038",Wz="4.27";let k4=Wz;k4="4.27.6";const Jz={async request(e,t){var m,_;const{default:i}=await be(()=>Promise.resolve().then(()=>dV),void 0),r=e.options,a=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=a==="native"||a==="native-request-init"?"native-request-init":a&&["blob","json","text"].includes(a)&&((m=EE(e.url))!=null&&m.after)?a:"array-buffer";const d=await i(e.url,r),y={data:d.data,httpStatus:d.httpStatus,ssl:d.ssl};switch((_=d.requestOptions)==null?void 0:_.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let pt;function Vde(e){pt=e}function Gde(e){const t=pt==null?void 0:pt.findCredential(e);return t!=null&&t.token?OE(e,"token",t.token):e}le("host-webworker");const Kz=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function WE(e){const t=kn(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Kz.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function Yz(e,t,i=!1,r){return new Promise((a,d)=>{if(jn(r))return void d(bx());let y=()=>{$(),d(new Error(`Unable to load ${t}`))},m=()=>{const M=e;$(),a(M)},_=()=>{if(!e)return;const M=e;$(),M.src="",d(bx())};const $=()=>{le("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",m)),y=null,m=null,e=null,r!=null&&r.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",_),le("esri-image-decode")?e.decode().then(m,y):(e.addEventListener("error",y),e.addEventListener("load",m))})}function bx(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const Zz="Timeout exceeded";function Xz(){return new Error(Zz)}function Qz(e){$t.request.crossOriginNoCorsDomains||($t.request.crossOriginNoCorsDomains={});const t=$t.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[kn(i)??""]=0:(t[kn("http://"+i)??""]=0,t[kn("https://"+i)??""]=0)}function eV(e){const t=$t.request.crossOriginNoCorsDomains;if(t){let i=kn(e);if(i)return i=i.toLowerCase(),!$p(i,g4())&&t[i]<Date.now()-36e5}return!1}async function tV(e){var a;const t=$t.request.crossOriginNoCorsDomains,i=kn(e);t&&i&&(t[i.toLowerCase()]=Date.now());const r=Qi(e);e=r.path,((a=r.query)==null?void 0:a.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Vt(e,t){var $;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=v4(t.query.toString().replaceAll("+"," ")));const i=Yh(e),r=Rv(e);r||i||(e=An(e));const a={url:e,requestOptions:{...t}};let d=EE(e);if(d){const M=await uV(d,a);if(M!=null)return{data:M,getHeader:O4,httpStatus:200,requestOptions:a.requestOptions,url:a.url};d.after||d.error||(d=null)}if(e=a.url,(t=a.requestOptions).responseType==="image"&&(le("host-webworker")||le("host-node")))throw vo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),a);if(t.method==="head"){if(t.body)throw vo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),a);if(i||r)throw vo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),a)}if(await oV(),mg)return mg.execute(e,t);const y=new AbortController;Fs(t,()=>y.abort());const m={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:d,params:a,redoRequest:!1,useIdentity:$n.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await cV(m);return($=d==null?void 0:d.after)==null||$.call(d,_),_}let mg;const $n=$t.request,JE="FormData"in globalThis,iV=[499,498,403,401],rV=["COM_0056","COM_0057","SB_0008"],sV=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],O4=()=>null,gg=Symbol();function nV(e){const t=kn(e);t&&!Vt._corsServers.includes(t)&&Vt._corsServers.push(t)}function wx(e){const t=kn(e);return!t||t.endsWith(".arcgis.com")||Vt._corsServers.includes(t)||w4(t)}function vo(e,t,i,r){let a="Error";const d={url:i.url,requestOptions:i.requestOptions,getHeader:O4,ssl:!1};if(t instanceof se)return t.details?(t.details=re(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=d,t;if(t){const y=r&&($=>r.headers.get($)),m=r==null?void 0:r.status,_=t.message;_&&(a=_),y&&(d.getHeader=y),d.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||m||0,d.subCode=t.subcode,d.messageCode=t.messageCode,typeof t.details=="string"?d.messages=[t.details]:d.messages=t.details,d.raw=gg in t?t[gg]:t}return Jr(t)?li():new se(e,a,d)}async function oV(){le("host-webworker")?mg||(mg=await be(()=>import("./request-77ba89df.js"),[])):Vt._abortableFetch||(Vt._abortableFetch=globalThis.fetch.bind(globalThis))}async function Jw(){pt||await be(()=>import("./IdentityManager-17ac63ea.js"),[])}async function aV(e){var m;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,a=i.body;let d=null,y=null;if(JE&&"HTMLFormElement"in globalThis&&(a instanceof FormData?d=a:a instanceof HTMLFormElement&&(d=new FormData(a))),typeof a=="string"&&(y=a),e.fetchOptions={cache:i.cacheBust&&!("polyfill"in Vt._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:$n.priority,redirect:"follow",signal:r},(d||y)&&(e.fetchOptions.body=d||y),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(m=i.query)!=null&&m.token||d!=null&&d.get("token")),!e.hasToken&&$t.apiKey&&WE(t)&&(i.query||(i.query={}),i.query.token=$t.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!KE(t)&&!jn(r)){let _;i.authMode==="immediate"?(await Jw(),_=await pt.getCredential(t,{signal:r}),e.credential=_):i.authMode==="no-prompt"?(await Jw(),_=await pt.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=_):pt&&(_=pt.findCredential(t)),_&&(e.credentialToken=_.token,e.useSSL=!!_.ssl)}}function KE(e){return sV.some(t=>t.test(e))}async function lV(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},a=Rv(t)||Yh(t),d=i.responseType||"json",y=a?0:i.timeout!=null?i.timeout:$n.timeout;let m=!1;if(!a){e.useSSL&&(t=x4(t)),i.cacheBust&&r.cache==="default"&&(t=OE(t,"request.preventCache",Date.now()));let P={...i.query};e.credentialToken&&(P.token=e.credentialToken);let j=xp(P);le("esri-url-encodes-apostrophe")&&(j=j.replaceAll("'","%27"));const L=t.length+1+j.length;let F;m=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>$n.maxUrlLength;const V=i.useProxy||!!jv(t);if(V){const J=iz(t);F=J.path,!m&&F.length+1+L>$n.maxUrlLength&&(m=!0),J.query&&(P={...J.query,...P})}if(r.method==="HEAD"&&(m||V)){if(m)throw L>$n.maxUrlLength?vo("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):vo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(V)throw vo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(m?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=H2(t,P):(r.body=xp(P),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=H2(t,P),V&&(e.useProxy=!0,t=`${F}?${t}`),P.token&&JE&&r.body instanceof FormData&&!UF(t)&&r.body.set("token",P.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!$p(t,g4())){if(w4(t))e.withCredentials=!0;else if(pt){const J=pt.findServerInfo(t);J!=null&&J.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",eV(t)&&await tV(m?H2(t,P):t))}let _,$,M=0,A=!1;y>0&&(M=setTimeout(()=>{A=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")$=r,$.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||m||hV(i.headers)||!a&&!e.useProxy&&$n.proxyUrl&&!wx(t)){if(_=await Vt._abortableFetch(t,r),e.useProxy||nV(t),i.responseType==="native")$=_;else if(r.method!=="HEAD")if(_.ok){switch(d){case"array-buffer":$=await _.arrayBuffer();break;case"blob":case"image":$=await _.blob();break;default:$=await _.text()}if(M&&(clearTimeout(M),M=0),d==="json"||d==="xml"||d==="document")if($)switch(d){case"json":$=JSON.parse($);break;case"xml":$=_x($,"application/xml");break;case"document":$=_x($,"text/html")}else $=null;if($){if(d==="array-buffer"||d==="blob"){const P=_.headers.get("Content-Type");if(P&&/application\/json|text\/plain/i.test(P)&&$[d==="blob"?"size":"byteLength"]<=750)try{const j=await new Response($).json();j.error&&($=j)}catch{}}d==="image"&&$ instanceof Blob&&($=await Sx(URL.createObjectURL($),e,!0))}}else{$=await _.text();try{$=JSON.parse($)}catch{}}}else $=await Sx(t,e)}catch(P){if(P.name==="AbortError")throw A?Xz():li("Request canceled");if(!(!_&&P instanceof TypeError&&$n.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||wx(t))throw P;e.redoRequest=!0,rz({proxyUrl:$n.proxyUrl,urlPrefix:kn(t)??""})}finally{M&&clearTimeout(M)}return[_,$]}async function uV(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(a){i=vo("request:interceptor",a,t)}if((r instanceof Error||r instanceof se)&&(i=vo("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function hV(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function _x(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function cV(e){var d,y;let t,i;await aV(e);try{do[t,i]=await lV(e);while(!await pV(e,t,i))}catch(m){const _=vo("request:server",m,e.params,t);throw _.details.ssl=e.useSSL,(d=e.interceptor)!=null&&d.error&&e.interceptor.error(_),_}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((y=i.user)!=null&&y.username)&&!w4(r)){const m=kn(r,!0);m&&$n.trustedServers.push(m)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Qz(i.authorizedCrossOriginNoCorsDomains)}const a=e.credential;if(a&&pt){const m=pt.findServerInfo(a.server);let _=m==null?void 0:m.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const $=pt.findCredential(_,a.userId);$&&pt._getIdenticalSvcIdx(_,$)===-1&&$.resources.unshift(_)}}return{data:i,getHeader:t?m=>t==null?void 0:t.headers.get(m):O4,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function pV(e,t,i){var $;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let a,d;if(i&&(i.error?a=i.error:i.status==="error"&&Array.isArray(i.messages)&&(a={...i},a[gg]=i,a.details=i.messages)),!a&&!t.ok)throw a=new Error(`Unable to load ${t.url} status: ${t.status}`),a[gg]=i,a;let y,m=null;a&&(d=Number(a.code),m=a.hasOwnProperty("subcode")?Number(a.subcode):null,y=a.messageCode,y=y==null?void 0:y.toUpperCase());const _=r.authMode;if(d===403&&(m===4||($=a.message)!=null&&$.toLowerCase().includes("ssl")&&!a.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(_!=="no-prompt"||d===498)&&d!==void 0&&iV.includes(d)&&!KE(e.params.url)&&(d!==403||y&&!rV.includes(y)&&(m==null||m===2&&e.credentialToken))){await Jw();try{const M=await pt.getCredential(e.params.url,{error:vo("request:server",a,e.params),prompt:_!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=M,e.credentialToken=M.token,e.useSSL=e.useSSL||M.ssl,!1}catch(M){if(_==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;a=M}}if(a)throw a;return!0}function Sx(e,t,i=!1){const r=t.controller.signal,a=new Image;return t.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.fetchPriority=$n.priority,a.src=e,Yz(a,e,i,r)}Vt._abortableFetch=null,Vt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const dV=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"}));function me(e,t,i){let r,a;return t===void 0||Array.isArray(t)?(a=e,i=t,r=[void 0]):(a=t,r=Array.isArray(e)?e:[e]),(d,y)=>{const m=d.constructor.prototype;r.forEach(_=>{const $=tE(d,_,a);$.read&&typeof $.read=="object"||($.read={}),$.read.reader=m[y],i&&($.read.source=($.read.source||[]).concat(i))})}}let Kn=class extends pe{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Xe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof Xe)return t;if(t!=null){const r=new Xe;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};b([S()],Kn.prototype,"type",void 0),b([S({readOnly:!0})],Kn.prototype,"cache",null),b([S({readOnly:!0})],Kn.prototype,"extent",null),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Kn.prototype,"hasM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Kn.prototype,"hasZ",void 0),b([S({type:Xe,json:{write:!0},value:Xe.WGS84})],Kn.prototype,"spatialReference",void 0),b([me("spatialReference")],Kn.prototype,"readSpatialReference",null),Kn=b([B("esri.geometry.Geometry")],Kn);const su=Kn,fV=Object.prototype.toString;function yV(e){const t="__accessorMetadata__"in e?yi(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return mV.apply(this,i)}}function mV(e,t,i,r){xv(e,t).cast=r}function gV(e){return(t,i)=>{xv(t,e).cast=t[i]}}function Tt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&fV.call(e[0])==="[object Function]"?yV(e[0]):e.length===1&&typeof e[0]=="string"?gV(e[0]):void 0}function vV(e,t){const i=e.x-t.x,r=e.y-t.y,a=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+a*a)}const bV=57.29577951308232,wV=.017453292519943;function xx(e){return e*bV}function $x(e){return e*wV}function Ude(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Lt.radius))}function Kw(e){return e.wkid!=null||e.wkt!=null}const W2=[0,0];function vg(e,t,i,r,a){const d=e,y=a;if(y.spatialReference=i,"x"in d&&"x"in y)[y.x,y.y]=t(d.x,d.y,W2,r);else if("xmin"in d&&"xmin"in y)[y.xmin,y.ymin]=t(d.xmin,d.ymin,W2,r),[y.xmax,y.ymax]=t(d.xmax,d.ymax,W2,r);else if("paths"in d&&"paths"in y||"rings"in d&&"rings"in y){const m="paths"in d?d.paths:d.rings,_=[];let $;for(let M=0;M<m.length;M++){const A=m[M];$=[],_.push($);for(let P=0;P<A.length;P++)$.push(t(A[P][0],A[P][1],[0,0],r)),A[P].length>2&&$[P].push(A[P][2]),A[P].length>3&&$[P].push(A[P][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in d&&"points"in y){const m=d.points,_=[];for(let $=0;$<m.length;$++)_[$]=t(m[$][0],m[$][1],[0,0],r),m[$].length>2&&_[$].push(m[$][2]),m[$].length>3&&_[$].push(m[$][3]);y.points=_}return a}function Fy(e,t){const i=e&&(Kw(e)?e:e.spatialReference),r=t&&(Kw(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Ti(r,i)||Rh(r)&&vf(i)||Rh(i)&&vf(r))}function Lv(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(Kw(t)?t:t.spatialReference);return Fy(i,r)?Ti(i,r)?re(e):Rh(r)?vg(e,tp,Xe.WebMercator,!1,re(e)):vf(r)?vg(e,Fd,Xe.WGS84,!1,re(e)):null:null}function tp(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=$x(t);return i[0]=$x(e)*Lt.radius,i[1]=Lt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Fd(e,t,i=[0,0],r=!1){const a=xx(e/Lt.radius);return i[0]=r?a:a-360*Math.floor((a+180)/360),i[1]=xx(Math.PI/2-2*Math.atan(Math.exp(-t/Lt.radius))),i}function $h(e,t=!1,i=re(e)){return vg(e,tp,Xe.WebMercator,t,i)}function ip(e,t=!1,i=re(e)){return vg(e,Fd,Xe.WGS84,t,i)}var zy;const d0=[0,0];function Tx(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Ir=zy=class extends su{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,a){let d;if(Array.isArray(e))d=e,a=t,e=d[0],t=d[1],i=d[2],r=d[3];else if(e&&typeof e=="object"){if(d=e,e=d.x!=null?d.x:d.longitude,t=d.y!=null?d.y:d.latitude,i=d.z,r=d.m,(a=d.spatialReference)&&a.declaredClass!=="esri.geometry.SpatialReference"&&(a=new Xe(a)),d.longitude!=null||d.latitude!=null){if(d.longitude==null)fe.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(d.latitude==null)fe.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!d.declaredClass&&a&&a.isWebMercator){const m=tp(d.longitude,d.latitude,d0);e=m[0],t=m[1]}}}else Tx(i)?(a=i,i=null):Tx(r)&&(a=r,r=null);const y={x:e,y:t};return y.x==null&&y.y!=null?fe.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&fe.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),a!=null&&(y.spatialReference=a),i!=null&&(y.z=i),r!=null&&(y.m=r),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return Fd(t,i,d0)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",tp(i,e,d0)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return Fd(e,t,d0)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",tp(e,t,d0)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new zy;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return zy.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:a,spatialReference:d}=this,{z:y,m}=e;let{x:_,y:$,spatialReference:M}=e;if(!d.equals(M))if(d.isWebMercator&&M.isWGS84)[_,$]=tp(_,$),M=d;else{if(!d.isWGS84||!M.isWebMercator)return!1;[_,$]=Fd(_,$),M=d}return t===_&&i===$&&r===y&&a===m&&d.wkid===M.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=On(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,a=2*r;let d;return t>r?(d=Math.ceil(Math.abs(t-r)/a),t-=d*a):t<i&&(d=Math.ceil(Math.abs(t-i)/a),t+=d*a),this._set("x",t),this}distance(e){return vV(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};b([S({readOnly:!0})],Ir.prototype,"cache",null),b([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ir.prototype,"hasM",null),b([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ir.prototype,"hasZ",null),b([S({type:Number})],Ir.prototype,"latitude",null),b([S({type:Number})],Ir.prototype,"longitude",null),b([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Tt(e=>isNaN(e)?e:Cs(e))],Ir.prototype,"x",void 0),b([Se("x")],Ir.prototype,"writeX",null),b([me("x")],Ir.prototype,"readX",null),b([S({type:Number,json:{write:!0}})],Ir.prototype,"y",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ir.prototype,"z",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ir.prototype,"m",void 0),Ir=zy=b([B("esri.geometry.Point")],Ir),Ir.prototype.toJSON.isDefaultToJSON=!0;const Ze=Ir,J2=[0,0];function Dv(e,t){return t!=null&&Or(e,t.x,t.y,t.z)}function Bde(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!Ip(e,i))return!1;return!0}function _V(e,t){const{xmin:i,ymin:r,zmin:a,xmax:d,ymax:y,zmax:m}=t;return e.hasZ&&t.hasZ?Or(e,i,r,a)&&Or(e,i,y,a)&&Or(e,d,y,a)&&Or(e,d,r,a)&&Or(e,i,r,m)&&Or(e,i,y,m)&&Or(e,d,y,m)&&Or(e,d,r,m):Or(e,i,r)&&Or(e,i,y)&&Or(e,d,y)&&Or(e,d,r)}function Ip(e,t){return Or(e,t[0],t[1])}function SV(e,t){return Or(e,t[0],t[1],t[2])}function Or(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function YE(e,t){return J2[1]=t.y,J2[0]=t.x,xV(e,J2)}function xV(e,t){return ZE(e.rings,t)}function ZE(e,t){if(!e)return!1;if($V(e))return Ix(!1,e,t);let i=!1;for(let r=0,a=e.length;r<a;r++)i=Ix(i,e[r],t);return i}function $V(e){return!Array.isArray(e[0][0])}function Ix(e,t,i){const[r,a]=i;let d=e,y=0;for(let m=0,_=t.length;m<_;m++){y++,y===_&&(y=0);const[$,M]=t[m],[A,P]=t[y];(M<a&&P>=a||P<a&&M>=a)&&$+(a-M)/(P-M)*(A-$)<r&&(d=!d)}return d}function TV(e,t){return Dv(e,t)}function IV(e,t){const i=e.hasZ&&t.hasZ;let r,a,d;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(a=t.ymin,e.ymax<a)return!1}else if(a=e.ymin,t.ymax<a)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(d=t.zmin,e.zmax<d)return!1}else if(d=e.zmin,t.zmax<d)return!1}return!0}function EV(e,t){const{points:i,hasZ:r}=t,a=r?SV:Ip;for(const d of i)if(a(e,d))return!0;return!1}const Lh=[0,0],Dh=[0,0],Fh=[0,0],zh=[0,0],MV=[Lh,Dh,Fh,zh],XE=[[Fh,Lh],[Lh,Dh],[Dh,zh],[zh,Fh]];function AV(e,t){return kV(e,t.rings)}function kV(e,t){Lh[0]=e.xmin,Lh[1]=e.ymax,Dh[0]=e.xmax,Dh[1]=e.ymax,Fh[0]=e.xmin,Fh[1]=e.ymin,zh[0]=e.xmax,zh[1]=e.ymin;for(const i of MV)if(ZE(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Ip(e,r))return!0;for(let a=1;a<i.length;a++){const d=i[a];if(Ip(e,d)||QE(r,d,XE))return!0;r=d}}return!1}function OV(e,t){Lh[0]=e.xmin,Lh[1]=e.ymax,Dh[0]=e.xmax,Dh[1]=e.ymax,Fh[0]=e.xmin,Fh[1]=e.ymin,zh[0]=e.xmax,zh[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let a=r[0];if(Ip(e,a))return!0;for(let d=1;d<r.length;d++){const y=r[d];if(Ip(e,y)||QE(a,y,XE))return!0;a=y}}return!1}const Bi=[0,0];function PV(e){for(let t=0;t<e.length;t++){const i=e[t];for(let a=0;a<i.length-1;a++){const d=i[a],y=i[a+1];for(let m=t+1;m<e.length;m++)for(let _=0;_<e[m].length-1;_++){const $=e[m][_],M=e[m][_+1];if(Yw(d,y,$,M,Bi)&&!(Bi[0]===d[0]&&Bi[1]===d[1]||Bi[0]===$[0]&&Bi[1]===$[1]||Bi[0]===y[0]&&Bi[1]===y[1]||Bi[0]===M[0]&&Bi[1]===M[1]))return!0}}const r=i.length;if(!(r<=4))for(let a=0;a<r-3;a++){let d=r-1;a===0&&(d=r-2);const y=i[a],m=i[a+1];for(let _=a+2;_<d;_++){const $=i[_],M=i[_+1];if(Yw(y,m,$,M,Bi)&&!(Bi[0]===y[0]&&Bi[1]===y[1]||Bi[0]===$[0]&&Bi[1]===$[1]||Bi[0]===m[0]&&Bi[1]===m[1]||Bi[0]===M[0]&&Bi[1]===M[1]))return!0}}}return!1}function QE(e,t,i){for(let r=0;r<i.length;r++)if(Yw(e,t,i[r][0],i[r][1]))return!0;return!1}function Yw(e,t,i,r,a){const[d,y]=e,[m,_]=t,[$,M]=i,[A,P]=r,j=A-$,L=d-$,F=m-d,V=P-M,J=y-M,Q=_-y,Y=V*F-j*Q;if(Y===0)return!1;const te=(j*J-V*L)/Y,oe=(F*J-Q*L)/Y;return te>=0&&te<=1&&oe>=0&&oe<=1&&(a&&(a[0]=d+te*(m-d),a[1]=y+te*(_-y)),!0)}function CV(e){switch(e){case"esriGeometryEnvelope":case"extent":return IV;case"esriGeometryMultipoint":case"multipoint":return EV;case"esriGeometryPoint":case"point":return TV;case"esriGeometryPolygon":case"polygon":return AV;case"esriGeometryPolyline":case"polyline":return OV}}var vs;function NV(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function La(e,t,i){return t==null?i:i==null?t:e(t,i)}let ji=vs=class extends su{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,a){return NV(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Xe.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:a??Xe.WGS84}}static fromBounds(e,t){return new vs({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new vs({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Ze({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new vs;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Fy(t,i)&&(e=t.isWebMercator?$h(e):ip(e,!0)),e.type==="point"?Dv(this,e):e.type==="extent"&&_V(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Fy(t,i)&&(e=t.isWebMercator?$h(e):ip(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const a=(this.zmax-this.zmin)*t;this.zmin+=a,this.zmax-=a}if(this.hasM){const a=(this.mmax-this.mmin)*t;this.mmin+=a,this.mmax-=a}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!Ti(t,i)&&Fy(t,i)&&(e=t.isWebMercator?$h(e):ip(e,!0)),CV(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=La(Math.min,this.zmin,e.zmin),this.zmax=La(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=La(Math.min,this.mmin,e.mmin),this.mmax=La(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=La(Math.max,this.zmin,e.zmin),this.zmax=La(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=La(Math.max,this.mmin,e.mmin),this.mmax=La(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=On(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?ip(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new Xe($v((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,a=this.xmin,d=this.xmax;return a>=i&&a<=r&&d>=i&&d<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const a=i??On(r);if(a==null)return this;const d=this._getParts(a).map(_=>_.extent);if(d.length<2)return d[0]||this;if(d.length>2)return e?this._shiftCM(a):this.set({xmin:a.valid[0],xmax:a.valid[1]});if(e)return this._shiftCM(a);if(t)return d;let y=!0,m=!0;return d.forEach(_=>{_.hasZ||(y=!1),_.hasM||(m=!1)}),{rings:d.map(_=>{const $=[[_.xmin,_.ymin],[_.xmin,_.ymax],[_.xmax,_.ymax],[_.xmax,_.ymin],[_.xmin,_.ymin]];if(y){const M=(_.zmax-_.zmin)/2;for(let A=0;A<$.length;A++)$[A].push(M)}if(m){const M=(_.mmax-_.mmin)/2;for(let A=0;A<$.length;A++)$[A].push(M)}return $}),hasZ:y,hasM:m,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:a,ymax:d,spatialReference:y}=this,m=this.width,_=this.xmin,$=this.xmax;let M;e=e||On(y);const[A,P]=e.valid;M=this._normalizeX(this.xmin,e);const j=M.x,L=M.frameId;M=this._normalizeX(this.xmax,e);const F=M.x,V=M.frameId,J=j===F&&m>0;if(m>2*P){const Q=new vs(_<$?j:F,a,P,d,y),Y=new vs(A,a,_<$?F:j,d,y),te=new vs(0,a,P,d,y),oe=new vs(A,a,0,d,y),ae=[],de=[];Q.contains(te)&&ae.push(L),Q.contains(oe)&&de.push(L),Y.contains(te)&&ae.push(V),Y.contains(oe)&&de.push(V);for(let ve=L+1;ve<V;ve++)ae.push(ve),de.push(ve);t.push({extent:Q,frameIds:[L]},{extent:Y,frameIds:[V]},{extent:te,frameIds:ae},{extent:oe,frameIds:de})}else j>F||J?t.push({extent:new vs(j,a,P,d,y),frameIds:[L]},{extent:new vs(A,a,F,d,y),frameIds:[V]}):t.push({extent:new vs(j,a,F,d,y),frameIds:[L]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const a={};i&&(a.zmin=this.zmin,a.zmax=this.zmax),r&&(a.mmin=this.mmin,a.mmax=this.mmax);for(let d=0;d<t.length;d++)t[d].extent.set(a)}return t}_normalizeX(e,t){const[i,r]=t.valid,a=2*r;let d,y=0;return e>r?(d=Math.ceil(Math.abs(e-r)/a),e-=d*a,y=d):e<i&&(d=Math.ceil(Math.abs(e-i)/a),e+=d*a,y=-d),{x:e,frameId:y}}};b([S({readOnly:!0})],ji.prototype,"cache",null),b([S({readOnly:!0})],ji.prototype,"center",null),b([S({readOnly:!0})],ji.prototype,"extent",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ji.prototype,"hasM",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ji.prototype,"hasZ",null),b([S({readOnly:!0})],ji.prototype,"height",null),b([S({readOnly:!0})],ji.prototype,"width",null),b([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ji.prototype,"xmin",void 0),b([S({type:Number,json:{write:!0}})],ji.prototype,"ymin",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ji.prototype,"mmin",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ji.prototype,"zmin",void 0),b([S({type:Number,json:{write:!0}})],ji.prototype,"xmax",void 0),b([S({type:Number,json:{write:!0}})],ji.prototype,"ymax",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ji.prototype,"mmax",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ji.prototype,"zmax",void 0),ji=vs=b([B("esri.geometry.Extent")],ji),ji.prototype.toJSON.isDefaultToJSON=!0;const gt=ji;let zd;var oI,aI;const jV=((oI=globalThis.esriConfig)==null?void 0:oI.locale)??((aI=globalThis.dojoConfig)==null?void 0:aI.locale);function eM(){var e;return jV??((e=globalThis.navigator)==null?void 0:e.language)??"en"}function Pn(){return zd===void 0&&(zd=eM()),zd}const Vd=[];function tM(e){return Vd.push(e),{remove(){Vd.splice(Vd.indexOf(e),1)}}}const Zw=[];function P4(e){return Zw.push(e),{remove(){Vd.splice(Zw.indexOf(e),1)}}}function RV(){const e=eM();zd!==e&&(zd=e,[...Zw].forEach(t=>{t.call(null,e)}),[...Vd].forEach(t=>{t.call(null,e)}))}var lI;(lI=globalThis.addEventListener)==null||lI.call(globalThis,"languagechange",RV);let C1;function LV(e){return C1&&!C1.destroyed||(C1=e()),C1}var Xw;const DV=new ut({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let bs=Xw=class extends De{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Xw({categories:this.categories?re(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y));let r="";if(this.extent){const y=Lv(this.extent,Xe.WGS84);y!=null&&(r=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let a=this.query;!this.disableExtraQuery&&e.extraQuery&&(a="("+a+")"+e.extraQuery);const d={categories:i,bbox:r,q:a,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(d.sortField=this.sortField.split(",").map(y=>DV.toJSON(y.trim())).join(","),d.sortOrder=this.sortOrder),{query:{...t,...d}}}};b([S()],bs.prototype,"categories",void 0),b([S()],bs.prototype,"disableExtraQuery",void 0),b([S({type:gt})],bs.prototype,"extent",void 0),b([S()],bs.prototype,"filter",void 0),b([S()],bs.prototype,"num",void 0),b([S()],bs.prototype,"query",void 0),b([S()],bs.prototype,"sortField",void 0),b([S()],bs.prototype,"sortOrder",null),b([S()],bs.prototype,"start",void 0),bs=Xw=b([B("esri.portal.PortalQueryParams")],bs);const go=bs;let Iu=class extends De{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};b([S()],Iu.prototype,"nextQueryParams",void 0),b([S()],Iu.prototype,"queryParams",void 0),b([S()],Iu.prototype,"results",void 0),b([S()],Iu.prototype,"total",void 0),Iu=b([B("esri.portal.PortalQueryResult")],Iu);const FV=Iu;let Do=class extends pe{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new se("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};b([S({type:Date})],Do.prototype,"created",void 0),b([S()],Do.prototype,"id",void 0),b([S()],Do.prototype,"portal",void 0),b([S()],Do.prototype,"title",void 0),b([S({readOnly:!0})],Do.prototype,"url",null),b([S()],Do.prototype,"username",void 0),Do=b([B("esri.portal.PortalFolder")],Do);const zV=Do;let Ri=class extends pe{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const t=this.url,i=this.thumbnail;return t&&i&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${t}/info/${i}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return Ur(this.portal).request(this.url+"/categorySchema",t).then(i=>{const r=i.categorySchema||[];return r.some(a=>a.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):r})}fetchMembers(t){return Ur(this.portal).request(this.url+"/users",t)}getThumbnailUrl(t){let i=this.thumbnailUrl;return i&&t&&(i+=`&w=${t}`),i}toJSON(){throw new se("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,i){let r=yi(go,t);const a=Ur(this.portal);return parseFloat(a.currentVersion)>5?(r=r||new go,a.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new go,r.query="group:"+this.id+(r.query?" "+r.query:""),a.queryItems(r,i))}_fetchCategorySchemaSet(t,i){const r=Ur(this.portal);return r.fetchSelf(r.authMode,!0,i).then(a=>{const d=a.contentCategorySetsGroupQuery;if(d){const y=new go;return y.disableExtraQuery=!0,y.num=1,y.query=d,r.queryGroups(y,i)}throw new se("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(a=>{if(a.total){const d=a.results[0],y=new go;return y.num=1,y.query=`typekeywords:"${t}"`,d.queryItems(y,i)}throw new se("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(a=>a.total?a.results[0].fetchData("json",i).then(d=>{const y=d&&d.categorySchema;return y&&y.length?y:[]}):[])}};b([S()],Ri.prototype,"access",void 0),b([S({type:Date})],Ri.prototype,"created",void 0),b([S()],Ri.prototype,"description",void 0),b([S()],Ri.prototype,"id",void 0),b([S()],Ri.prototype,"isInvitationOnly",void 0),b([S({type:Date})],Ri.prototype,"modified",void 0),b([S()],Ri.prototype,"owner",void 0),b([S()],Ri.prototype,"portal",void 0),b([S()],Ri.prototype,"snippet",void 0),b([S()],Ri.prototype,"sortField",void 0),b([S()],Ri.prototype,"sortOrder",void 0),b([S()],Ri.prototype,"tags",void 0),b([S()],Ri.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Ri.prototype,"thumbnailUrl",null),b([S()],Ri.prototype,"title",void 0),b([S({readOnly:!0})],Ri.prototype,"url",null),Ri=b([B("esri.portal.PortalGroup")],Ri);const Qw=Ri,VV=Object.freeze(Object.defineProperty({__proto__:null,default:Qw},Symbol.toStringTag,{value:"Module"}));var e3;let Yt=e3=class extends pe{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,a={method:"post"};t&&(a.query=t.createPostQuery(),i!=null&&(typeof i=="string"?a.query.text=i:typeof i=="object"&&(a.query.text=JSON.stringify(i))));let d=this.userContentUrl;return r&&(d+="/"+(typeof r=="string"?r:r.id)),this.portal.request(d+"/addItem",a).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(t,r).then(()=>{e.forEach(a=>{a.id=null,a.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const a=zV.fromJSON(r);return a.portal=this.portal,a}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=Qw.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){const t=e??{};let i,r=this.userContentUrl??"";return t.folder&&(r+="/"+t.folder.id),be(()=>Promise.resolve().then(()=>iM),void 0).then(({default:a})=>{i=a;const d={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(r,{query:d})}).then(a=>{let d;return a&&a.items?(d=a.items.map(y=>{const m=i.fromJSON(y);return m.portal=this.portal,m}),Promise.all(d.map(y=>y.load())).catch(y=>y).then(()=>({items:d,nextStart:a.nextStart,total:a.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new Qw({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new se("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new se("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new e3;return t.sourceJSON=e,t.read(e),t}};b([S()],Yt.prototype,"access",void 0),b([S({type:Date})],Yt.prototype,"created",void 0),b([S()],Yt.prototype,"culture",void 0),b([S()],Yt.prototype,"description",void 0),b([S()],Yt.prototype,"email",void 0),b([S()],Yt.prototype,"favGroupId",void 0),b([S()],Yt.prototype,"fullName",void 0),b([S({type:Date})],Yt.prototype,"modified",void 0),b([S()],Yt.prototype,"orgId",void 0),b([S()],Yt.prototype,"portal",void 0),b([S()],Yt.prototype,"preferredView",void 0),b([S()],Yt.prototype,"privileges",void 0),b([S()],Yt.prototype,"region",void 0),b([S()],Yt.prototype,"role",void 0),b([S()],Yt.prototype,"roleId",void 0),b([S()],Yt.prototype,"sourceJSON",void 0),b([S()],Yt.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Yt.prototype,"thumbnailUrl",null),b([S()],Yt.prototype,"units",void 0),b([S({readOnly:!0})],Yt.prototype,"userContentUrl",null),b([S({readOnly:!0})],Yt.prototype,"url",null),b([S()],Yt.prototype,"username",void 0),b([S()],Yt.prototype,"userType",void 0),Yt=e3=b([B("esri.portal.PortalUser")],Yt);const C4=Yt,GV=Object.freeze(Object.defineProperty({__proto__:null,default:C4},Symbol.toStringTag,{value:"Module"}));var Fo;let N1;const Ex={PortalGroup:()=>be(()=>Promise.resolve().then(()=>VV),void 0),PortalItem:()=>be(()=>Promise.resolve().then(()=>iM),void 0),PortalUser:()=>be(()=>Promise.resolve().then(()=>GV),void 0)};let _e=Fo=class extends Uf(Rn){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=$t.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){Mx.unregister(this),this.defaultBasemap=Wt(this.defaultBasemap),this.defaultDevBasemap=Wt(this.defaultDevBasemap),this.defaultVectorBasemap=Wt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ai(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)$t.request.trustedServers.includes(t)||$t.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=C4.fromJSON(e),t.portal=this),t}load(e){const t=be(()=>Promise.resolve().then(()=>dG),void 0).then(({default:i})=>{Jt(e),N1=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var r;if(pt){const a=pt;this.credential=a.findCredential(this.restUrl),this.credential||this.authMode!==Fo.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=a.on("credential-create",qV(new WeakRef(this))),Mx.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await be(()=>import("./ElevationLayer-1e6d0160.js"),["assets/ElevationLayer-1e6d0160.js","assets/ArcGISCachedService-5607aed1.js","assets/TileInfoTilemapCache-7d06f29e.js","assets/TilemapCache-cde2d558.js","assets/ByteSizeUnit-d4757d40.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):jn(e)?Promise.reject(li()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new go;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const a of t)r.push(`(title:"${a.title}" AND owner:${a.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(a=>a.results)}return jn(e)?Promise.reject(li()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Pn();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Pn();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return LV(()=>new Fo)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",a={authMode:e,query:{culture:Pn().toLowerCase()},...i};return a.authMode==="auto"&&(a.authMode="no-prompt"),t&&(a.query.default=!0),this.request(r,a)}queryPortal(e,t,i,r){const a=yi(go,t),d=y=>this.request(this.restUrl+e,{...a.toRequestOptions(this),...r}).then(m=>{const _=a.clone();return _.start=m.nextStart,new FV({nextQueryParams:_,queryParams:a,total:m.total,results:Fo._resultsToTypedArray(y,{portal:this},m,r)})}).then(m=>Promise.all(m.results.map(_=>typeof _.when=="function"?_.when():m)).then(()=>m,_=>(Ps(_),m)));return i&&Ex[i]?Ex[i]().then(({default:y})=>(Jt(r),d(y))):d()}signIn(){if(this.authMode===Fo.AUTH_MODE_ANONYMOUS)return Promise.reject(new se("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return pt?pt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const a=Fo._resultsToTypedArray(i,{portal:this},r);return Promise.all(a.map(d=>typeof d.when=="function"?d.when():r)).then(()=>a,()=>a)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===Fo.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:a=null,cacheBust:d=!1,method:y="auto",responseType:m="json",signal:_}=t,$={authMode:r,body:a,cacheBust:d,method:y,query:i,responseType:m,timeout:0,signal:_};return Vt(this._normalizeSSL(e),$).then(M=>M.data)}toJSON(){throw new se("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Fo({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new se("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new go;i.query=e||($t.apiKey&&WE(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const a=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=a.sortField||"name",i.sortOrder=a.sortOrder||"desc";const d=await a.queryItems(i,t);return d.total?d.results.filter(y=>y.type==="Web Map").map(y=>new N1({portalItem:y})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new go({query:i,disableExtraQuery:!0}),a=await this.queryGroups(r,t);if(!a.total)return[];const d=a.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=d.sortField||"name",r.sortOrder=d.sortOrder||"desc";const y=await d.queryItems(r,t);return y.total?y.results.filter(m=>m.type==="Web Scene").map(m=>new N1({portalItem:m})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=N1.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let a=[];if(i){const d=r!=null?r.signal:null;a=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(a=a.map(y=>{const m=Object.assign(e?e.fromJSON(y):y,t);return typeof m.load=="function"&&m.load(d),m}))}else a=[];return a}};_e.AUTH_MODE_ANONYMOUS="anonymous",_e.AUTH_MODE_AUTO="auto",_e.AUTH_MODE_IMMEDIATE="immediate",b([S()],_e.prototype,"access",void 0),b([S()],_e.prototype,"allSSL",void 0),b([S()],_e.prototype,"authMode",void 0),b([S()],_e.prototype,"authorizedCrossOriginDomains",void 0),b([me("authorizedCrossOriginDomains")],_e.prototype,"readAuthorizedCrossOriginDomains",null),b([S()],_e.prototype,"basemapGalleryGroupQuery",void 0),b([S({json:{name:"3DBasemapGalleryGroupQuery"}})],_e.prototype,"basemapGalleryGroupQuery3D",void 0),b([S()],_e.prototype,"bingKey",void 0),b([S()],_e.prototype,"canListApps",void 0),b([S()],_e.prototype,"canListData",void 0),b([S()],_e.prototype,"canListPreProvisionedItems",void 0),b([S()],_e.prototype,"canProvisionDirectPurchase",void 0),b([S()],_e.prototype,"canSearchPublic",void 0),b([S()],_e.prototype,"canShareBingPublic",void 0),b([S()],_e.prototype,"canSharePublic",void 0),b([S()],_e.prototype,"canSignInArcGIS",void 0),b([S()],_e.prototype,"canSignInIDP",void 0),b([S()],_e.prototype,"colorSetsGroupQuery",void 0),b([S()],_e.prototype,"commentsEnabled",void 0),b([S({type:Date})],_e.prototype,"created",void 0),b([S()],_e.prototype,"credential",void 0),b([S()],_e.prototype,"culture",void 0),b([S()],_e.prototype,"currentVersion",void 0),b([S()],_e.prototype,"customBaseUrl",void 0),b([S()],_e.prototype,"defaultBasemap",void 0),b([me("defaultBasemap")],_e.prototype,"readDefaultBasemap",null),b([S()],_e.prototype,"defaultDevBasemap",void 0),b([me("defaultDevBasemap")],_e.prototype,"readDefaultDevBasemap",null),b([S({type:gt})],_e.prototype,"defaultExtent",void 0),b([S()],_e.prototype,"defaultVectorBasemap",void 0),b([me("defaultVectorBasemap")],_e.prototype,"readDefaultVectorBasemap",null),b([S()],_e.prototype,"description",void 0),b([S()],_e.prototype,"devBasemapGalleryGroupQuery",void 0),b([S()],_e.prototype,"eueiEnabled",void 0),b([S({readOnly:!0})],_e.prototype,"extraQuery",null),b([S()],_e.prototype,"featuredGroups",void 0),b([S()],_e.prototype,"featuredItemsGroupQuery",void 0),b([S()],_e.prototype,"galleryTemplatesGroupQuery",void 0),b([S()],_e.prototype,"livingAtlasGroupQuery",void 0),b([S()],_e.prototype,"hasCategorySchema",void 0),b([S()],_e.prototype,"helpBase",void 0),b([S()],_e.prototype,"helperServices",void 0),b([S()],_e.prototype,"helpMap",void 0),b([S()],_e.prototype,"homePageFeaturedContent",void 0),b([S()],_e.prototype,"homePageFeaturedContentCount",void 0),b([S()],_e.prototype,"httpPort",void 0),b([S()],_e.prototype,"httpsPort",void 0),b([S()],_e.prototype,"id",void 0),b([S()],_e.prototype,"ipCntryCode",void 0),b([S({readOnly:!0})],_e.prototype,"isOrganization",null),b([S()],_e.prototype,"isPortal",void 0),b([S()],_e.prototype,"isReadOnly",void 0),b([S({readOnly:!0})],_e.prototype,"itemPageUrl",null),b([S()],_e.prototype,"layerTemplatesGroupQuery",void 0),b([S()],_e.prototype,"maxTokenExpirationMinutes",void 0),b([S({type:Date})],_e.prototype,"modified",void 0),b([S()],_e.prototype,"name",void 0),b([S()],_e.prototype,"portalHostname",void 0),b([S()],_e.prototype,"portalMode",void 0),b([S()],_e.prototype,"portalProperties",void 0),b([S()],_e.prototype,"region",void 0),b([S({readOnly:!0})],_e.prototype,"restUrl",null),b([S()],_e.prototype,"rotatorPanels",void 0),b([S()],_e.prototype,"showHomePageDescription",void 0),b([S()],_e.prototype,"sourceJSON",void 0),b([S()],_e.prototype,"staticImagesUrl",void 0),b([S({json:{name:"2DStylesGroupQuery"}})],_e.prototype,"stylesGroupQuery2d",void 0),b([S({json:{name:"stylesGroupQuery"}})],_e.prototype,"stylesGroupQuery3d",void 0),b([S()],_e.prototype,"supportsHostedServices",void 0),b([S()],_e.prototype,"symbolSetsGroupQuery",void 0),b([S()],_e.prototype,"templatesGroupQuery",void 0),b([S()],_e.prototype,"thumbnail",void 0),b([S({readOnly:!0})],_e.prototype,"thumbnailUrl",null),b([S()],_e.prototype,"units",void 0),b([S()],_e.prototype,"url",void 0),b([S()],_e.prototype,"urlKey",void 0),b([me("urlKey")],_e.prototype,"readUrlKey",null),b([S()],_e.prototype,"user",void 0),b([me("user")],_e.prototype,"readUser",null),b([S()],_e.prototype,"use3dBasemaps",void 0),b([S()],_e.prototype,"useStandardizedQuery",void 0),b([S()],_e.prototype,"useVectorBasemaps",void 0),b([S()],_e.prototype,"vectorBasemapGalleryGroupQuery",void 0),_e=Fo=b([B("esri.portal.Portal")],_e);const Wr=_e,Mx=new FinalizationRegistry(e=>{e.remove()});function qV(e){const t=pt;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const UV=fe.getLogger("esri.assets");function At(e){if(!$t.assetsPath)throw UV.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new se("assets:path-not-set","config.assetsPath is not set");return wa($t.assetsPath,e)}let zo=class extends De{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this._normalizePath(t.path,t.portalItem)}:t}set path(t){t!=null&&us(t)?fe.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return this._normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new se("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResource:r}=await be(()=>import("./resourceUtils-b7ec6b76.js"),[]);return r(this,"update",t,i)}hasPath(){return this.path!=null}_normalizePath(t,i){return t==null?t:(t=t.replace(/^\/+/,""),i!=null&&us(t)&&(t=_4(t,i.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};b([S()],zo.prototype,"portalItem",void 0),b([S({type:String,value:null})],zo.prototype,"path",null),b([Tt("path")],zo.prototype,"_castPath",null),b([S({type:String,readOnly:!0})],zo.prototype,"url",null),b([S({type:String,readOnly:!0})],zo.prototype,"cdnUrl",null),b([S({type:String,readOnly:!0})],zo.prototype,"itemRelativeUrl",null),zo=b([B("esri.portal.PortalItemResource")],zo);const BV=zo;let R0=class extends De{constructor(t){super(t),this.created=null,this.rating=null}};b([S()],R0.prototype,"created",void 0),b([S()],R0.prototype,"rating",void 0),R0=b([B("esri.portal.PortalRating")],R0);const K2=R0;var Eu;const HV=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),WV=new Set(["KML","GeoJson","CSV"]);let Qe=Eu=class extends Uf(Rn){static from(e){return Ch(Eu,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(e){return e&&e.length?new gt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let a,d=!1,y=!1,m=!1,_=!1,$=!1,M=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(d=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.includes("Table"),m=t.includes("Route Layer"),_=t.includes("Markup"),$=t.includes("Spatiotemporal"),M=t.includes("UtilityNetwork"),a=$&&y?"spatiotemporaltable":y?"table":m?"routelayer":_?"markup":$?"spatiotemporal":d?"featureshosted":M?"utilitynetwork":"features"):a=e==="map service"||e==="wms"||e==="wmts"?d||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):a=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="360 vr experience"?"360vr":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="pro report template"?"proreporttemplate":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":e==="discussion"?"discussion":e==="allsource project"?"allsourceproject":e==="api key"?"apikey":e==="data pipeline"?"datapipelines":"maps",a?At(i+a+r+".png"):null}get isLayer(){return this.type!=null&&HV.has(this.type)}get itemCdnUrl(){let e=this.itemUrl;return e&&pt&&!pt.findCredential(e)&&(e=pt._normalizeAGOLorgDomain(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Wr.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof K2&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new K2({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:re(this.applicationProxies),avgRating:this.avgRating,categories:re(this.categories),created:re(this.created),culture:this.culture,description:this.description,extent:re(this.extent),groupCategories:re(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:re(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:re(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:re(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:re(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Eu({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var i;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(i=e[r])==null?void 0:i.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await Ur(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return Ur(this.portal).request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await Ur(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new K2(t)):null}fetchRelatedItems(e,t){return Ur(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Eu)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return Ur(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>Ur(this.portal).signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new se("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new se("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await Ur(t).signIn();const{copyResources:r,folder:a,tags:d,title:y}=e||{},m={method:"post",query:{copyPrivateResources:r==="all",folder:typeof a=="string"?a:a==null?void 0:a.id,includeResources:!!r,tags:d==null?void 0:d.join(","),title:y}},{itemId:_}=await t.request(`${i}/copy`,m);return new Eu({id:_,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Yh(t)?r.query={data:t}:r.query={url:js(t)},i!=null&&(r.query.filename=i);else{const a=new FormData;i!=null?a.append("file",t,i):a.append("file",t),r.body=a}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new se("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await be(()=>import("./resourceUtils-b7ec6b76.js"),[]);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResource:r}=await be(()=>import("./resourceUtils-b7ec6b76.js"),[]);return e.portalItem=this,r(e,"add",t,i)}async removeResource(e,t){const{removeResource:i}=await be(()=>import("./resourceUtils-b7ec6b76.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new se("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await be(()=>import("./resourceUtils-b7ec6b76.js"),[]);return t(this,e)}resourceFromPath(e){return new BV({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:re(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:re(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:re(this.typeKeywords),url:this.url};return mI(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Eu({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};b([S({type:["private","shared","org","public"]})],Qe.prototype,"access",void 0),b([S()],Qe.prototype,"accessInformation",void 0),b([S({type:String})],Qe.prototype,"apiKey",void 0),b([S({json:{read:{source:"appProxies"}}})],Qe.prototype,"applicationProxies",void 0),b([S()],Qe.prototype,"avgRating",void 0),b([S()],Qe.prototype,"categories",void 0),b([S({type:Date})],Qe.prototype,"created",void 0),b([S()],Qe.prototype,"culture",void 0),b([S()],Qe.prototype,"description",void 0),b([S({readOnly:!0})],Qe.prototype,"displayName",null),b([S({type:gt})],Qe.prototype,"extent",void 0),b([me("extent")],Qe.prototype,"readExtent",null),b([S()],Qe.prototype,"groupCategories",void 0),b([S({readOnly:!0})],Qe.prototype,"iconUrl",null),b([S()],Qe.prototype,"id",void 0),b([S({readOnly:!0})],Qe.prototype,"isLayer",null),b([S({type:Boolean,readOnly:!0})],Qe.prototype,"isOrgItem",void 0),b([S()],Qe.prototype,"itemControl",void 0),b([S({readOnly:!0})],Qe.prototype,"itemPageUrl",null),b([S({readOnly:!0})],Qe.prototype,"itemUrl",null),b([S()],Qe.prototype,"licenseInfo",void 0),b([S({type:Date})],Qe.prototype,"modified",void 0),b([S()],Qe.prototype,"name",void 0),b([S()],Qe.prototype,"numComments",void 0),b([S()],Qe.prototype,"numRatings",void 0),b([S()],Qe.prototype,"numViews",void 0),b([S()],Qe.prototype,"owner",void 0),b([S()],Qe.prototype,"ownerFolder",void 0),b([S({type:Wr})],Qe.prototype,"portal",void 0),b([S()],Qe.prototype,"screenshots",void 0),b([S()],Qe.prototype,"size",void 0),b([S()],Qe.prototype,"snippet",void 0),b([S()],Qe.prototype,"sourceJSON",void 0),b([S({type:String})],Qe.prototype,"sourceUrl",void 0),b([S({type:String})],Qe.prototype,"spatialReference",void 0),b([S()],Qe.prototype,"tags",void 0),b([S()],Qe.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Qe.prototype,"thumbnailUrl",null),b([S()],Qe.prototype,"title",void 0),b([S()],Qe.prototype,"type",void 0),b([S()],Qe.prototype,"typeKeywords",void 0),b([S({type:String,json:{read(e,t){var i;if(WV.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Qe.prototype,"url",void 0),b([S({readOnly:!0})],Qe.prototype,"userItemUrl",null),Qe=Eu=b([B("esri.portal.PortalItem")],Qe);const Gd=Qe,iM=Object.freeze(Object.defineProperty({__proto__:null,default:Gd},Symbol.toStringTag,{value:"Module"})),Ax=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,JV={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function kx(e){return e in JV}const L0=[],cp=new Map;function Ox(e){for(const t of cp.keys())sM(e.pattern,t)&&cp.delete(t)}function KV(e){return L0.includes(e)||(Ox(e),L0.unshift(e)),{remove(){const t=L0.indexOf(e);t>-1&&(L0.splice(t,1),Ox(e))}}}async function rM(e){const t=Pn();cp.has(e)||cp.set(e,ZV(e,t));const i=cp.get(e);return i&&await XV.add(i),i}function YV(e){if(!Ax.test(e))return null;const t=Ax.exec(e);if(t===null)return null;const[,i,r]=t,a=i+(r?"-"+r.toUpperCase():"");return kx(a)?a:kx(i)?i:null}async function ZV(e,t){const i=[];for(const r of L0)if(sM(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(a){i.push(a)}throw i.length?new se("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new se("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function sM(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}P4(()=>{cp.clear()});const XV=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Vs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function QV(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await rM("esri/t9n/basemaps");return i[e]||i[t]}const t3={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return At("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return At("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return At("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return At("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return At("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return At("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return At("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return At("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return At("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return At("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return At("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return At("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return At("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return At("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return At("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return At("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function Zde(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}const Xde={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function nM(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function N4(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function Qde(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}async function oM(e,t){const i=pt==null?void 0:pt.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const a=`${e.substring(0,r)}/rest/info`,d=t!=null?t.signal:null,{data:y}=await Vt(a,{query:{f:"json"},responseType:"json",signal:d});return(y==null?void 0:y.owningSystemUrl)||null}function eG(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function tG(e){return eG(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function iG(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function rG(e){return!!iG(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const sG=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),nG=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function oG(e){return e.layerContainerType==="basemap"?sG:e.layerContainerType==="operational-layers"?nG:null}function aG(e,t){if(t.restrictedWebMapWriting){const i=oG(t);return i==null||i.has(e.type)&&!N4(e)}return!0}function lG(e,t){if(t)if(N4(e)){const i=Gf("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&Px(e,r)}else e.type!=="group"&&Px(e,t)}function Px(e,t){"maxScale"in e&&(t.maxScale=cg(e.maxScale)??void 0),"minScale"in e&&(t.minScale=cg(e.minScale)??void 0)}function uG(e,t){if(lG(e,t),t&&("blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=cg(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(N4(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function Cx(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new se("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(aG(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&uG(e,t=re(t)),t}var Vy;let hG=0;const aM="esri.Basemap";let ws=Vy=class extends Uf(Rn){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+hG++,this.baseLayers=new Le,this.referenceLayers=new Le;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&fe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{fe.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Nh(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(a=>{const d=Cx(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);d!=null&&r.push(d)}),this.referenceLayers.forEach(a=>{const d=Cx(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);d!=null&&(a.type!=="scene"&&(d.isReference=!0),r.push(d))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Nh(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return y4(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>Zm(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>Zm(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Vy({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=re(i);return r.url&&So(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&So(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;Jt(e);const r=[];if(t){const a=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,a,e)),t.data.id&&!t.data.title){const d=t.data.id;r.push(QV(d).then(y=>{y&&this.read({title:y},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,a=this.portalItem&&this.portalItem.portal||r&&r.portal||null,d=pG[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:y}=await be(()=>import("./layersCreator-3bd0e577.js"),["assets/layersCreator-3bd0e577.js","assets/lazyLayerLoader-7d715d04.js","assets/portalLayers-35b8965e.js","assets/layersLoader-ef744e63.js","assets/fetchService-50ce87f2.js","assets/jsonContext-4430ffa2.js"]),m=[];if(Jt(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const _={context:{origin:d,url:t,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},$=P=>d==="web-scene"&&P.layerType==="ArcGISSceneServiceLayer"||P.isReference,M=y(this.baseLayers,e.baseMapLayers.filter(P=>!$(P)),_);m.push(M);const A=y(this.referenceLayers,e.baseMapLayers.filter($),_);m.push(A)}await Kh(m)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),a=Qi(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:cG[e.type||""]??"web-map",portal:e.portal||Wr.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Wr.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,t)}static fromId(e){const t=t3[e];if(!t)return null;if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),pg(fe.getLogger(aM),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Vy.fromJSON(t)}};b([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Le}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],ws.prototype,"baseLayers",null),b([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],ws.prototype,"id",void 0),b([S({type:Gd})],ws.prototype,"portalItem",void 0),b([S()],ws.prototype,"referenceLayers",null),b([S({readOnly:!0})],ws.prototype,"resourceInfo",void 0),b([S({type:Xe})],ws.prototype,"spatialReference",void 0),b([S()],ws.prototype,"thumbnailUrl",void 0),b([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ws.prototype,"title",void 0),b([Se("title")],ws.prototype,"writeTitle",null),ws=Vy=b([B(aM)],ws);const cG={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},pG={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},bg=ws,dG=Object.freeze(Object.defineProperty({__proto__:null,default:bg},Symbol.toStringTag,{value:"Module"})),wg={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function lM(e){return!!wg[e]||!!wg[e.toLowerCase()]}function j4(e){return wg[e]??wg[e.toLowerCase()]}function fG(e){return[...j4(e)]}function Y2(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function uM(e,t,i,r=1){const a=(e%360+360)%360/360,d=i<=.5?i*(t+1):i+t-i*t,y=2*i-d;return[Math.round(255*Y2(y,d,a+1/3)),Math.round(255*Y2(y,d,a)),Math.round(255*Y2(y,d,a-1/3)),r]}function yG(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,a=t?1:17,d=t?e.length===9:e.length===5;let y=Number("0x"+e.substr(1));if(isNaN(y))return null;const m=[0,0,0,1];let _;return d&&(_=y&r,y>>=i,m[3]=a*_/255),_=y&r,y>>=i,m[2]=a*_,_=y&r,y>>=i,m[1]=a*_,_=y&r,y>>=i,m[0]=a*_,m}function Vn(){return[0,0,0]}function mG(e){return[e[0],e[1],e[2]]}function Bf(e,t,i){return[e,t,i]}function gG(e){const t=Vn(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function vG(e,t){return new Float64Array(e,t,3)}function hM(){return Vn()}function cM(){return Bf(1,1,1)}function pM(){return Bf(1,0,0)}function dM(){return Bf(0,1,0)}function fM(){return Bf(0,0,1)}const bG=hM(),wG=cM(),_G=pM(),SG=dM(),xG=fM();Object.freeze(Object.defineProperty({__proto__:null,ONES:wG,UNIT_X:_G,UNIT_Y:SG,UNIT_Z:xG,ZEROS:bG,clone:mG,create:Vn,createView:vG,fromArray:gG,fromValues:Bf,ones:cM,unitX:pM,unitY:dM,unitZ:fM,zeros:hM},Symbol.toStringTag,{value:"Module"}));let R4=1e-6;function Bs(){return R4}function $G(e){R4=e}const Fv=Math.random,TG=Math.PI/180,IG=180/Math.PI;function L4(e){return e*TG}function EG(e){return e*IG}function MG(e,t){return Math.abs(e-t)<=R4*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Fv,equals:MG,getEpsilon:Bs,setEpsilon:$G,toDegree:EG,toRadian:L4},Symbol.toStringTag,{value:"Module"}));function zv(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function _g(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Vv(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function yM(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function D4(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function mM(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function gM(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function AG(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function kG(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function OG(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function PG(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function CG(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function NG(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function jG(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function vM(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function RG(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function bM(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(i*i+r*r+a*a)}function wM(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return i*i+r*r+a*a}function _M(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function LG(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function DG(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Sg(e,t){const i=t[0],r=t[1],a=t[2];let d=i*i+r*r+a*a;return d>0&&(d=1/Math.sqrt(d),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d),e}function SM(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function FG(e,t,i){const r=t[0],a=t[1],d=t[2],y=i[0],m=i[1],_=i[2];return e[0]=a*_-d*m,e[1]=d*y-r*_,e[2]=r*m-a*y,e}function zG(e,t,i,r){const a=t[0],d=t[1],y=t[2];return e[0]=a+r*(i[0]-a),e[1]=d+r*(i[1]-d),e[2]=y+r*(i[2]-y),e}function VG(e,t,i,r,a,d){const y=d*d,m=y*(2*d-3)+1,_=y*(d-2)+d,$=y*(d-1),M=y*(3-2*d);return e[0]=t[0]*m+i[0]*_+r[0]*$+a[0]*M,e[1]=t[1]*m+i[1]*_+r[1]*$+a[1]*M,e[2]=t[2]*m+i[2]*_+r[2]*$+a[2]*M,e}function GG(e,t,i,r,a,d){const y=1-d,m=y*y,_=d*d,$=m*y,M=3*d*m,A=3*_*y,P=_*d;return e[0]=t[0]*$+i[0]*M+r[0]*A+a[0]*P,e[1]=t[1]*$+i[1]*M+r[1]*A+a[1]*P,e[2]=t[2]*$+i[2]*M+r[2]*A+a[2]*P,e}function qG(e,t){t=t||1;const i=Fv,r=2*i()*Math.PI,a=2*i()-1,d=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(r)*d,e[1]=Math.sin(r)*d,e[2]=a*t,e}function UG(e,t,i){const r=t[0],a=t[1],d=t[2];return e[0]=i[0]*r+i[4]*a+i[8]*d+i[12],e[1]=i[1]*r+i[5]*a+i[9]*d+i[13],e[2]=i[2]*r+i[6]*a+i[10]*d+i[14],e}function BG(e,t,i){const r=t[0],a=t[1],d=t[2];return e[0]=r*i[0]+a*i[3]+d*i[6],e[1]=r*i[1]+a*i[4]+d*i[7],e[2]=r*i[2]+a*i[5]+d*i[8],e}function HG(e,t,i){const r=i[0],a=i[1],d=i[2],y=i[3],m=t[0],_=t[1],$=t[2];let M=a*$-d*_,A=d*m-r*$,P=r*_-a*m,j=a*P-d*A,L=d*M-r*P,F=r*A-a*M;const V=2*y;return M*=V,A*=V,P*=V,j*=2,L*=2,F*=2,e[0]=m+M+j,e[1]=_+A+L,e[2]=$+P+F,e}function WG(e,t,i,r){const a=[],d=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],d[0]=a[0],d[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),d[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function JG(e,t,i,r){const a=[],d=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],d[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),d[1]=a[1],d[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function KG(e,t,i,r){const a=[],d=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],d[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),d[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),d[2]=a[2],e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function YG(e,t){_g(j1,e),_g(R1,t),Sg(j1,j1),Sg(R1,R1);const i=SM(j1,R1);return i>1?0:i<-1?Math.PI:Math.acos(i)}const j1=Vn(),R1=Vn();function ZG(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function XG(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function QG(e,t){if(e===t)return!0;const i=e[0],r=e[1],a=e[2],d=t[0],y=t[1],m=t[2],_=Bs();return Math.abs(i-d)<=_*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-y)<=_*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-m)<=_*Math.max(1,Math.abs(a),Math.abs(m))}function eq(e,t,i){const r=i[0]-t[0],a=i[1]-t[1],d=i[2]-t[2];let y=r*r+a*a+d*d;return y>0?(y=1/Math.sqrt(y),e[0]=r*y,e[1]=a*y,e[2]=d*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const tq=D4,iq=mM,rq=gM,sq=bM,nq=wM,oq=zv,aq=_M;Object.freeze(Object.defineProperty({__proto__:null,abs:OG,add:yM,angle:YG,bezier:GG,ceil:AG,copy:_g,cross:FG,direction:eq,dist:sq,distance:bM,div:rq,divide:gM,dot:SM,equals:QG,exactEquals:XG,floor:kG,hermite:VG,inverse:DG,len:oq,length:zv,lerp:zG,max:NG,min:CG,mul:iq,multiply:mM,negate:LG,normalize:Sg,random:qG,rotateX:WG,rotateY:JG,rotateZ:KG,round:jG,scale:vM,scaleAndAdd:RG,set:Vv,sign:PG,sqrDist:nq,sqrLen:aq,squaredDistance:wM,squaredLength:_M,str:ZG,sub:tq,subtract:D4,transformMat3:BG,transformMat4:UG,transformQuat:HG},Symbol.toStringTag,{value:"Module"}));function lq(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function uq(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e}function hq(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function xM(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function $M(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function TM(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function cq(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function pq(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function dq(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function fq(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function yq(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function mq(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function gq(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function IM(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],d=t[3]-e[3];return Math.sqrt(i*i+r*r+a*a+d*d)}function EM(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],d=t[3]-e[3];return i*i+r*r+a*a+d*d}function MM(e){const t=e[0],i=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+i*i+r*r+a*a)}function AM(e){const t=e[0],i=e[1],r=e[2],a=e[3];return t*t+i*i+r*r+a*a}function vq(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function bq(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function wq(e,t){const i=t[0],r=t[1],a=t[2],d=t[3];let y=i*i+r*r+a*a+d*d;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=r*y,e[2]=a*y,e[3]=d*y),e}function _q(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function kM(e,t,i,r){const a=t[0],d=t[1],y=t[2],m=t[3];return e[0]=a+r*(i[0]-a),e[1]=d+r*(i[1]-d),e[2]=y+r*(i[2]-y),e[3]=m+r*(i[3]-m),e}function Sq(e,t){const i=Fv;let r,a,d,y,m,_;t=t||1;do r=2*i()-1,a=2*i()-1,m=r*r+a*a;while(m>=1);do d=2*i()-1,y=2*i()-1,_=d*d+y*y;while(_>=1);const $=Math.sqrt((1-m)/_);return e[0]=t*r,e[1]=t*a,e[2]=t*d*$,e[3]=t*y*$,e}function xq(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3];return e[0]=i[0]*r+i[4]*a+i[8]*d+i[12]*y,e[1]=i[1]*r+i[5]*a+i[9]*d+i[13]*y,e[2]=i[2]*r+i[6]*a+i[10]*d+i[14]*y,e[3]=i[3]*r+i[7]*a+i[11]*d+i[15]*y,e}function $q(e,t,i){const r=t[0],a=t[1],d=t[2],y=i[0],m=i[1],_=i[2],$=i[3],M=$*r+m*d-_*a,A=$*a+_*r-y*d,P=$*d+y*a-m*r,j=-y*r-m*a-_*d;return e[0]=M*$+j*-y+A*-_-P*-m,e[1]=A*$+j*-m+P*-y-M*-_,e[2]=P*$+j*-_+M*-m-A*-y,e[3]=t[3],e}function Tq(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Iq(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Eq(e,t){const i=e[0],r=e[1],a=e[2],d=e[3],y=t[0],m=t[1],_=t[2],$=t[3],M=Bs();return Math.abs(i-y)<=M*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-m)<=M*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(a-_)<=M*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(d-$)<=M*Math.max(1,Math.abs(d),Math.abs($))}const Mq=xM,Aq=$M,kq=TM,Oq=IM,Pq=EM,Cq=MM,Nq=AM;Object.freeze(Object.defineProperty({__proto__:null,add:hq,ceil:cq,copy:lq,dist:Oq,distance:IM,div:kq,divide:TM,dot:_q,equals:Eq,exactEquals:Iq,floor:pq,inverse:bq,len:Cq,length:MM,lerp:kM,max:fq,min:dq,mul:Aq,multiply:$M,negate:vq,normalize:wq,random:Sq,round:yq,scale:mq,scaleAndAdd:gq,set:uq,sqrDist:Pq,sqrLen:Nq,squaredDistance:EM,squaredLength:AM,str:Tq,sub:Mq,subtract:xM,transformMat4:xq,transformQuat:$q},Symbol.toStringTag,{value:"Module"}));const Nx=new Float32Array(1);function efe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function qs(e,t,i){return Math.min(Math.max(e,t),i)}function tfe(e){return(e&e-1)==0}function ife(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function rfe(e,t,i){return e+(t-e)*i}function jq(e){return e*Math.PI/180}function OM(e){return 180*e/Math.PI}function sfe(e){return Math.acos(qs(e,-1,1))}function PM(e){return Math.asin(qs(e,-1,1))}function Z2(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const xg=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Rq(e){return xg.setFloat64(0,e),xg.getBigInt64(0)}function Lq(e){return xg.setBigInt64(0,e),xg.getFloat64(0)}const X2=BigInt("1000000");Dq(1);function Dq(e){const t=Rq(e=Math.abs(e)),i=Lq(t<=X2?X2:t-X2);return Math.abs(e-i)}function nfe(e){return CM(Math.max(-jx,Math.min(e,jx)))}function CM(e){return Nx[0]=e,Nx[0]}function ofe(e,t){const i=zv(e),r=PM(e[2]/i),a=Math.atan2(e[1]/i,e[0]/i);return Vv(t,i,r,a),t}function afe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Z2(t,1)&&Z2(i,1)&&Z2(r,1))}const jx=CM(34028234663852886e22);function L1(e){return qs(kv(e),0,255)}function D1(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}let Gy=class tr{static blendColors(t,i,r,a=new tr){return a.r=Math.round(t.r+(i.r-t.r)*r),a.g=Math.round(t.g+(i.g-t.g)*r),a.b=Math.round(t.b+(i.b-t.b)*r),a.a=t.a+(i.a-t.a)*r,a._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const a=r[2].split(/\s*,\s*/),d=r[1];if(d==="rgb"&&a.length===3||d==="rgba"&&a.length===4){const y=a[0];if(y.charAt(y.length-1)==="%"){const m=a.map(_=>2.56*parseFloat(_));return a.length===4&&(m[3]=parseFloat(a[3])),tr.fromArray(m,i)}return tr.fromArray(a.map(m=>parseFloat(m)),i)}if(d==="hsl"&&a.length===3||d==="hsla"&&a.length===4)return tr.fromArray(uM(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100,parseFloat(a[3])),i)}return null}static fromHex(t,i=new tr){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,a=(1<<r)-1;let d=Number("0x"+t.substr(1));return isNaN(d)?null:(["b","g","r"].forEach(y=>{const m=d&a;d>>=r,i[y]=r===4?17*m:m}),i.a=1,i)}static fromArray(t,i=new tr){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=lM(t)?j4(t):null;return r&&tr.fromArray(r,i)||tr.fromRgb(t,i)||tr.fromHex(t,i)}static fromJSON(t){return t&&new tr([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?tr.fromString(t,this):Array.isArray(t)?tr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof tr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=tr.AlphaMode.ALWAYS){const i=L1(this.r),r=L1(this.g),a=L1(this.b);return t===tr.AlphaMode.ALWAYS||this.a!==1?[i,r,a,L1(255*this.a)]:[i,r,a]}clone(){return new tr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(D1(this.r,0,255)),this.g=Math.round(D1(this.g,0,255)),this.b=Math.round(D1(this.b,0,255)),this.a=D1(this.a,0,1),this}_set(t,i,r,a){this.r=t,this.g=i,this.b=r,this.a=a}};Gy.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Gy||(Gy={}));const et=Gy;function lfe(e){}function Fq(e){return()=>e}function je(e,t={}){const i=e instanceof ut?e:new ut(e,t),r={type:(t==null?void 0:t.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(r.nonNullable=t.nonNullable),S(r)}var i3;let qy=i3=class extends pe{constructor(e){super(e),this.type="none"}clone(){return new i3({type:this.type})}};b([je({none:"none",stayAbove:"stay-above"})],qy.prototype,"type",void 0),qy=i3=b([B("esri.ground.NavigationConstraint")],qy);function Gv(e){const t=kv(100*(1-e));return Math.max(0,Math.min(t,100))}function wf(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var r3;let Vo=r3=class extends Uf(Rn){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Le;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&fe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{Jr(e)||fe.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Nh(e,this._get("layers")))}writeLayers(e,t,i,r){const a=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(d=>{if("write"in d){const y={};Fq(d)().write(y,r)&&a.push(y)}else r&&r.messages&&r.messages.push(new se("layer:unsupported",`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in the ground`,{layer:d}))})),t.layers=a}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return y4(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await be(()=>import("./ElevationQuery-b08548c6.js"),[]);Jt(t);const r=new i,a=this.layers.filter(Rx).toArray();return r.queryAll(a,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await be(()=>import("./ElevationQuery-b08548c6.js"),[]);Jt(t);const r=new i,a=this.layers.filter(Rx).toArray();return r.createSamplerAll(a,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:re(this.surfaceColor),navigationConstraint:re(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new r3({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",a=t&&t.portal||null,d=t&&t.url||null;return be(()=>import("./layersCreator-3bd0e577.js"),["assets/layersCreator-3bd0e577.js","assets/lazyLayerLoader-7d715d04.js","assets/portalLayers-35b8965e.js","assets/layersLoader-ef744e63.js","assets/fetchService-50ce87f2.js","assets/jsonContext-4430ffa2.js"]).then(({populateOperationalLayers:y})=>{Jt(i);const m=[];if(e.layers&&Array.isArray(e.layers)){const _={context:{origin:r,url:d,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};m.push(y(this.layers,e.layers,_))}return Kh(m)}).then(()=>{})}};function zq(e){return e&&"createElevationSampler"in e}function Rx(e){return e.type==="elevation"||zq(e)}b([S({json:{read:!1}})],Vo.prototype,"layers",null),b([Se("layers")],Vo.prototype,"writeLayers",null),b([S({readOnly:!0})],Vo.prototype,"resourceInfo",void 0),b([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ot,read:{reader:wf,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Gv(e)},target:"transparency"}}})],Vo.prototype,"opacity",void 0),b([S({type:et,json:{type:[Ot],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Vo.prototype,"surfaceColor",void 0),b([S({type:qy,json:{write:!0}})],Vo.prototype,"navigationConstraint",void 0),Vo=r3=b([B("esri.Ground")],Vo);const $g=Vo;let bc=class extends Le{constructor(t){super(t),this.getCollections=null}initialize(){this.own(HI(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new Le(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(a=>!!a);for(const a of i)if(a){if(r(a)){const d=this.indexOf(a,t);d>=0?d!==t&&this.reorder(a,t):this.add(a,t),++t}if(this.getChildrenFunction){const d=this.getChildrenFunction(a);if(Array.isArray(d))for(const y of d)t=this._processCollection(t,y);else t=this._processCollection(t,d)}}return t}};b([S()],bc.prototype,"getCollections",void 0),b([S()],bc.prototype,"getChildrenFunction",void 0),b([S()],bc.prototype,"itemFilterFunction",void 0),bc=b([B("esri.core.CollectionFlattener")],bc);const Ep=bc,Vq=[["binary","application/octet-stream","bin",""]];function s3(e,t){return z4(qq(e,t))}function n3(e,t){return z4(Uq(e,t))}function hfe(e,t){return NM(Gq(e,t))}function F4(e){return[...Vq,...e]}function Gq(e,t){return F4(t).find(i=>z4(i)===e)}function qq(e,t){return F4(t).find(i=>NM(i)===e)}function Uq(e,t){const i=e.toLowerCase();return F4(t).find(r=>Bq(r).some(a=>i.endsWith(a)))}function z4(e){return e==null?void 0:e[0]}function NM(e){return e==null?void 0:e[1]}function Bq(e){return(e==null?void 0:e[2].split(","))??[]}function cfe(e){var t;return(t=e.tables)==null?void 0:t.find(i=>i.role==="assetMaps")}function Hq(e){var t,i;return!(!(e&&typeof e=="object"&&"loaded"in e&&e.loaded&&((i=(t=tG(e))==null?void 0:t.operations)!=null&&i.supportsEditing)&&"type"in e)||"editingEnabled"in e&&!rG(e)||e.type==="scene"&&!Wq(e))}function Wq(e){const t=e.infoFor3D;if(!t)return!0;const{supportedFormats:i,queryFormats:r}=t,a=s3("model/gltf-binary",i)??n3("glb",i);return a!=null&&r.includes(a)}const Lx=fe.getLogger("esri.support.basemapUtils");function Jq(){return{}}function Kq(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function Yq(e,t){let i;if(typeof e=="string"){if(!(e in t3)){const r=Object.entries(t3).filter(([a,d])=>$t.apiKey&&!d.classic||!$t.apiKey&&d.classic&&!d.deprecated).map(([a])=>`"${a}"`).join(", ");return Lx.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=bg.fromId(e),t&&(t[e]=i))}else i=yi(bg,e);return i!=null&&i.destroyed&&(Lx.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function Zq(e){return new Ep({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function Q2(e){for(const t of e.values())t==null||t.destroy();e.clear()}const Dx={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Xq(e){let t=null;if(typeof e=="string")if(e in Dx){const i=Dx[e];t=new $g({resourceInfo:{data:{layers:[i]}}})}else fe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=yi($g,e);return t}function Mp(e,t,i=!1){let{hasM:r,hasZ:a}=e;Array.isArray(t)?t.length!==4||r||a?t.length===3&&i&&!r?(a=!0,r=!1):t.length===3&&r&&a&&(r=!1,a=!1):(r=!0,a=!0):(a=!a&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!a||t.hasZ)),e.hasZ=a,e.hasM=r}var o3;function Fx(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function Qq(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Za=o3=class extends su{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):Qq(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new gt,i=this.hasZ,r=this.hasM,a=i?3:2,d=e[0],y=Fx(Math.min),m=Fx(Math.max);let _,$,M,A,[P,j]=d,[L,F]=d;for(let V=0,J=e.length;V<J;V++){const Q=e[V],[Y,te]=Q;if(P=y(P,Y),j=y(j,te),L=m(L,Y),F=m(F,te),i&&Q.length>2){const oe=Q[2];_=y(_,oe),M=m(M,oe)}if(r&&Q.length>a){const oe=Q[a];$=y($,oe),A=m(A,oe)}}return t.xmin=P,t.ymin=j,t.xmax=L,t.ymax=F,t.spatialReference=this.spatialReference,i?(t.zmin=_,t.zmax=M):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=$,t.mmax=A):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=re(this.points)}addPoint(e){return Mp(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:re(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new o3(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new Ze(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Ze(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Mp(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};b([S({readOnly:!0})],Za.prototype,"cache",null),b([S()],Za.prototype,"extent",null),b([S({type:[[Number]],json:{write:{isRequired:!0}}})],Za.prototype,"points",void 0),b([Se("points")],Za.prototype,"writePoints",null),Za=o3=b([B("esri.geometry.Multipoint")],Za),Za.prototype.toJSON.isDefaultToJSON=!0;const Hf=Za;function pfe(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function eU(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}function jM(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const a=e[2]-t[2];return Math.sqrt(i*i+r*r+a*a)}return Math.sqrt(i*i+r*r)}function tU(e,t,i){const r=e[0]+i*(t[0]-e[0]),a=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,a,e[2]+i*(t[2]-e[2])]:[r,a]}function iU(e,t,i,r){const[a,d]=t,[y,m]=i[r],[_,$]=i[r+1],M=_-y,A=$-m,P=M*M+A*A,j=(a-y)*M+(d-m)*A,L=Math.min(1,Math.max(0,j/P));return e[0]=y+M*L,e[1]=m+A*L,e}function dfe(e,t,i){let r,a,d,y,m=!1,_=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,a=i.y;i.nextPoint();)d=i.x,y=i.y,a>t!=y>t&&e<(d-r)*(t-a)/(y-a)+r&&(m=!m),_=Math.min(_,rU(e,t,r,a,d,y)),r=d,a=y;return _===0?0:(m?1:-1)*Math.sqrt(_)}function rU(e,t,i,r,a,d){let y=i,m=r,_=a-y,$=d-m;if(_!==0||$!==0){const M=((e-y)*_+(t-m)*$)/(_*_+$*$);M>1?(y=a,m=d):M>0&&(y+=_*M,m+=$*M)}return _=e-y,$=t-m,_*_+$*$}function RM(e,t){return tU(e,t,.5)}function LM(e,t,i){const r=e.length;let a=0,d=0,y=0;for(let m=0;m<r;m++){const _=e[m],$=e[(m+1)%r];let M=2;a+=_[0]*$[1]-$[0]*_[1],_.length>2&&$.length>2&&i&&(d+=_[0]*$[2]-$[0]*_[2],M=3),_.length>M&&$.length>M&&t&&(y+=_[0]*$[M]-$[0]*_[M])}return a<=0&&d<=0&&y<=0}function sU(e){const t=e.length;return t>2&&wv(e[0],e[t-1])}function ffe(e){if("rings"in e&&(nU(e),e.rings.length>0&&!LM(e.rings[0],e.hasM??!1,e.hasZ??!1)))for(const t of e.rings)t.reverse()}function nU(e){if("rings"in e)for(const t of e.rings)sU(t)||t.push(t[0].slice())}function yfe(e){if(!e||e.length<3)return 0;let t=0;const i=e.length-1;for(let r=0;r<i;r++)t+=(e[r][0]-e[r+1][0])*(e[r][1]+e[r+1][1]);return t+=(e[i][0]-e[0][0])*(e[i][1]+e[0][1]),-.5*t}function DM(e){if(!e||e.numPoints<3)return 0;let t,i,r=0;if(e.seekPathStart(),!e.nextPoint())return 0;t=e.x,i=e.y;const a=t,d=i;for(;e.nextPoint();)r+=(t-e.x)*(i+e.y),t=e.x,i=e.y;return r+=(t-a)*(i+d),-.5*r}function mfe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function oU(e){return e?aU(e.rings,e.hasZ??!1):null}function aU(e,t){if(!e||!e.length)return null;const i=[],r=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let d=0,y=e.length;d<y;d++){const m=FM(e[d],t,a);m&&r.push(m)}if(r.sort((d,y)=>{let m=d[2]-y[2];return m===0&&t&&(m=d[4]-y[4]),m}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||t&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)),!i.length){const d=e[0]&&e[0].length?lU(e[0],t):null;if(!d)return null;i[0]=d[0],i[1]=d[1],t&&d.length>2&&(i[2]=d[2])}return i}function FM(e,t,i){let r=0,a=0,d=0,y=0,m=0;const _=e.length?e[0][0]:0,$=e.length?e[0][1]:0,M=e.length&&t?e[0][2]:0;for(let P=0;P<e.length;P++){const j=e[P],L=e[(P+1)%e.length],[F,V,J]=j,Q=F-_,Y=V-$,[te,oe,ae]=L,de=te-_,ve=oe-$,Ie=Q*ve-de*Y;if(y+=Ie,r+=(Q+de)*Ie,a+=(Y+ve)*Ie,t&&j.length>2&&L.length>2){const Oe=J-M,Ne=ae-M,Re=Q*Ne-de*Oe;d+=(Oe+Ne)*Re,m+=Re}F<i[0]&&(i[0]=F),F>i[1]&&(i[1]=F),V<i[2]&&(i[2]=V),V>i[3]&&(i[3]=V),t&&(J<i[4]&&(i[4]=J),J>i[5]&&(i[5]=J))}if(y>0&&(y*=-1),m>0&&(m*=-1),!y)return null;y*=.5,m*=.5;const A=[r/(6*y)+_,a/(6*y)+$,y];return t&&(i[4]===i[5]||m===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=d/(6*m)+M,A[4]=m)),A}function lU(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let a=0,d=0,y=0,m=0;for(let _=0,$=e.length;_<$-1;_++){const M=e[_],A=e[_+1];if(M&&A){i[0]=M[0],i[1]=M[1],r[0]=A[0],r[1]=A[1],t&&M.length>2&&A.length>2&&(i[2]=M[2],r[2]=A[2]);const P=jM(i,r);if(P){a+=P;const j=RM(M,A);d+=P*j[0],y+=P*j[1],t&&j.length>2&&(m+=P*j[2])}}}return a>0?t?[d/a,y/a,m/a]:[d/a,y/a]:e.length?e[0]:null}function uU(e){const{hasZ:t,numPaths:i}=e;if(i===0)return null;const r=[],a=[],d=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const y=FM(eU(e),e.hasZ,d);y&&a.push(y)}if(a.sort((y,m)=>{let _=y[2]-m[2];return _===0&&t&&(_=y[4]-m[4]),_}),a.length&&(r[0]=a[0][0],r[1]=a[0][1],t&&(r[2]=a[0][3]),(r[0]<d[0]||r[0]>d[1]||r[1]<d[2]||r[1]>d[3]||t&&(r[2]<d[4]||r[2]>d[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const y=e.numPoints?hU(e):null;if(!y)return null;r[0]=y[0],r[1]=y[1],t&&y.length>2&&(r[2]=y[2])}return r}function hU(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let a=0,d=0,y=0,m=0;if(e.nextPoint()){let _=e.x,$=e.y,M=e.z;for(;e.nextPoint();){const A=e.x,P=e.y,j=e.z;i[0]=_,i[1]=$,r[0]=A,r[1]=P,t&&(i[2]=M,r[2]=j);const L=jM(i,r);if(L){a+=L;const F=RM(i,r);d+=L*F[0],y+=L*F[1],t&&F.length>2&&(m+=L*F[2])}_=A,$=P,M=j}}return a>0?t?[d/a,y/a,m/a]:[d/a,y/a]:e.numPoints?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const cU=1e-6;function gfe(e){let t=0;for(e.reset();e.nextPath();)t+=DM(e);if(t<cU){const a=uU(e);return a?[a[0],a[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)dU(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const pU=1/3;function dU(e,t,i){if(!e||!i||i.numPoints<3)return null;i.nextPoint();const r=i.x,a=i.y;i.nextPoint();let d,y=i.x-r,m=i.y-a,_=0,$=0;for(;i.nextPoint();)_=i.x-r,$=i.y-a,d=.5*pU*(_*m-$*y),e[0]+=d*(y+_),e[1]+=d*(m+$),y=_,m=$;const M=DM(i),A=[r,a];return A[0]-=t[0],A[1]-=t[1],A[0]*=M,A[1]*=M,e[0]+=A[0],e[1]+=A[1],e}function xo(e=vU){return[e[0],e[1],e[2],e[3]]}function vfe(e){return[e[0],e[1],e[2],e[3]]}function V4(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function fU(e,t,i,r,a=xo()){return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a}function bfe(e,t=xo()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function wfe(e,t){return new gt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function _fe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Sfe(e,t,i){if(t!=null)if("length"in t)a3(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else V4(i,e)}function yU(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function mU(e){return e[1]>=e[3]?0:e[3]-e[1]}function xfe(e){return yU(e)*mU(e)}function $fe(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function Tfe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function Ife(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function gU(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Efe(e){return e?V4(e,zx):xo(zx)}function a3(e){return e!=null&&e.length===4}function Mfe(e,t){return a3(e)&&a3(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const zx=[1/0,1/0,-1/0,-1/0],vU=[0,0,0,0];function zM(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function VM(e){return e.points!==void 0}function GM(e){return e.x!==void 0&&e.y!==void 0}function qM(e){return e.paths!==void 0}function UM(e){return e.rings!==void 0}function BM(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Nl=BM(Math.min),jl=BM(Math.max);function Afe(e,t){return qM(t)?Ap(e,t.paths,!1,!1):UM(t)?Ap(e,t.rings,!1,!1):VM(t)?G4(e,t.points,!1,!1,!1,!1):zM(t)?HM(e,t):(GM(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function kfe(e){let t,i,r,a;for(e.reset(),t=r=1/0,i=a=-1/0;e.nextPath();){const d=bU(e);t=Math.min(d[0],t),r=Math.min(d[1],r),i=Math.max(d[2],i),a=Math.max(d[3],a)}return xo([t,r,i,a])}function bU(e){let t,i,r,a;for(t=r=1/0,i=a=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),a=Math.max(e.y,a);return xo([t,r,i,a])}function Ofe(e,t){return qM(t)?Ap(e,t.paths,!0,!1):UM(t)?Ap(e,t.rings,!0,!1):VM(t)?G4(e,t.points,!0,!1,!0,!1):zM(t)?HM(e,t,!0,!1,!0,!1):(GM(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Ap(e,t,i,r){const a=i?3:2;if(!t.length||!t[0].length)return null;let d,y,m,_,[$,M]=t[0][0],[A,P]=t[0][0];for(let j=0;j<t.length;j++){const L=t[j];for(let F=0;F<L.length;F++){const V=L[F],[J,Q]=V;if($=Nl($,J),M=Nl(M,Q),A=jl(A,J),P=jl(P,Q),i&&V.length>2){const Y=V[2];d=Nl(d,Y),y=jl(y,Y)}if(r&&V.length>a){const Y=V[a];m=Nl(d,Y),_=jl(y,Y)}}}return i?r?(e[0]=$,e[1]=M,e[2]=d,e[3]=m,e[4]=A,e[5]=P,e[6]=y,e[7]=_,e.length=8,e):(e[0]=$,e[1]=M,e[2]=d,e[3]=A,e[4]=P,e[5]=y,e.length=6,e):r?(e[0]=$,e[1]=M,e[2]=m,e[3]=A,e[4]=P,e[5]=_,e.length=6,e):(e[0]=$,e[1]=M,e[2]=A,e[3]=P,e.length=4,e)}function HM(e,t,i,r,a,d){const y=t.xmin,m=t.xmax,_=t.ymin,$=t.ymax;let M=t.zmin,A=t.zmax,P=t.mmin,j=t.mmax;return a?(M=M||0,A=A||0,d?(P=P||0,j=j||0,e[0]=y,e[1]=_,e[2]=M,e[3]=P,e[4]=m,e[5]=$,e[6]=A,e[7]=j,e):(e[0]=y,e[1]=_,e[2]=M,e[3]=m,e[4]=$,e[5]=A,e)):d?(P=P||0,j=j||0,e[0]=y,e[1]=_,e[2]=P,e[3]=m,e[4]=$,e[5]=j,e):(e[0]=y,e[1]=_,e[2]=m,e[3]=$,e)}function G4(e,t,i,r,a,d){const y=i?3:2,m=r&&d,_=i&&a;if(!t.length||!t[0].length)return null;let $,M,A,P,[j,L]=t[0],[F,V]=t[0];for(let J=0;J<t.length;J++){const Q=t[J],[Y,te]=Q;if(j=Nl(j,Y),L=Nl(L,te),F=jl(F,Y),V=jl(V,te),_&&Q.length>2){const oe=Q[2];$=Nl($,oe),M=jl(M,oe)}if(m&&Q.length>y){const oe=Q[y];A=Nl($,oe),P=jl(M,oe)}}return a?($=$||0,M=M||0,d?(A=A||0,P=P||0,e[0]=j,e[1]=L,e[2]=$,e[3]=A,e[4]=F,e[5]=V,e[6]=M,e[7]=P,e):(e[0]=j,e[1]=L,e[2]=$,e[3]=F,e[4]=V,e[5]=M,e)):d?(A=A||0,P=P||0,e[0]=j,e[1]=L,e[2]=A,e[3]=F,e[4]=V,e[5]=P,e):(e[0]=j,e[1]=L,e[2]=F,e[3]=V,e)}function wU(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function _U(e){return e.points!==void 0}function SU(e){return e.x!==void 0&&e.y!==void 0}function xU(e){return e.paths!==void 0}function $U(e){return e.rings!==void 0}const q4=[];function WM(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function JM(e,t,i,r,a,d){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:a,zmax:d}}function KM(e,t,i,r,a,d){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:a,mmax:d}}function YM(e,t,i,r,a,d,y,m){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:a,ymax:d,zmax:y,mmax:m}}function U4(e,t=!1,i=!1){return t?i?YM(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):JM(e[0],e[1],e[2],e[3],e[4],e[5]):i?KM(e[0],e[1],e[2],e[3],e[4],e[5]):WM(e[0],e[1],e[2],e[3])}function Pfe(e){return e?wU(e)?e:SU(e)?IU(e):$U(e)?ZM(e):xU(e)?XM(e):_U(e)?TU(e):null:null}function TU(e){const{hasZ:t,hasM:i,points:r}=e;return U4(G4(q4,r,t??!1,i??!1),t,i)}function IU(e){const{x:t,y:i,z:r,m:a}=e,d=a!=null;return r!=null?d?YM(t,i,r,a,t,i,r,a):JM(t,i,r,t,i,r):d?KM(t,i,a,t,i,a):WM(t,i,t,i)}function ZM(e){const{hasZ:t,hasM:i,rings:r}=e,a=Ap(q4,r,t??!1,i??!1);return a?U4(a,t,i):null}function XM(e){const{hasZ:t,hasM:i,paths:r}=e,a=Ap(q4,r,t??!1,i??!1);return a?U4(a,t,i):null}var Uy;function Vx(e){return!Array.isArray(e[0])}let Yn=Uy=class extends su{static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,a=!1;for(const y of t)y.hasZ&&(r=!0),y.hasM&&(a=!0);const d={rings:t.map(y=>{const m=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(r&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let $=0;$<m.length;$++)m[$].push(_)}if(a&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let $=0;$<m.length;$++)m[$].push(_)}return m}),spatialReference:i};return r&&(d.hasZ=!0),a&&(d.hasM=!0),new Uy(d)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let i,r,a=null,d=null;return e&&!Array.isArray(e)?(a=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):a=e,a=a||[],t=t||Xe.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),d=a[0]&&a[0][0],d&&(i===void 0&&r===void 0?(i=d.length>2,r=d.length>3):i===void 0?i=r?d.length>3:d.length>2:r===void 0&&(r=i?d.length>3:d.length>2)),{rings:a,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=oU(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Ze;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=ZM(this);if(!t)return null;const i=new gt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return PV(this.rings)}writeRings(e,t){t.rings=re(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(Vx(e)){const r=[];for(let a=0,d=e.length;a<d;a++)r[a]=e[a].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Uy;return e.spatialReference=this.spatialReference,e.rings=re(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([a,d,y,m],[_,$,M,A])=>a===_&&d===$&&(y==null&&M==null||y===M)&&(m==null&&A==null||m===A);for(let a=0;a<this.rings.length;a++){const d=this.rings[a],y=e.rings[a];if(!wv(d,y,r))return!1}return!0}contains(e){if(!e)return!1;const t=Lv(e,this.spatialReference);return YE(this,t??e)}isClockwise(e){let t;return t=Vx(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,LM(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,a=this.hasM;return r&&!a?new Ze(i[0],i[1],i[2],void 0,this.spatialReference):a&&!r?new Ze(i[0],i[1],void 0,i[2],this.spatialReference):r&&a?new Ze(i[0],i[1],i[2],i[3],this.spatialReference):new Ze(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Mp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Ze(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(a=>new Ze(a,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Mp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};b([S({readOnly:!0})],Yn.prototype,"cache",null),b([S({readOnly:!0})],Yn.prototype,"centroid",null),b([S({readOnly:!0})],Yn.prototype,"extent",null),b([S({readOnly:!0})],Yn.prototype,"isSelfIntersecting",null),b([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Yn.prototype,"rings",void 0),b([Se("rings")],Yn.prototype,"writeRings",null),Yn=Uy=b([B("esri.geometry.Polygon")],Yn),Yn.prototype.toJSON.isDefaultToJSON=!0;const $o=Yn;var l3;function EU(e){return!Array.isArray(e[0])}let Xa=l3=class extends su{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,a=null,d=null;return e&&!Array.isArray(e)?(a=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):a=e,a=a||[],t=t||Xe.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),d=a[0]&&a[0][0],d&&(i===void 0&&r===void 0?(i=d.length>2,r=!1):i===void 0?i=!r&&d.length>3:r===void 0&&(r=!i&&d.length>3)),{paths:a,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=XM(this);if(!t)return null;const i=new gt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=re(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(EU(e)){const r=[];for(let a=0,d=e.length;a<d;a++)r[a]=e[a].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new l3;return e.spatialReference=this.spatialReference,e.paths=re(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,a=this.hasM;return r&&!a?new Ze(i[0],i[1],i[2],void 0,this.spatialReference):a&&!r?new Ze(i[0],i[1],void 0,i[2],this.spatialReference):r&&a?new Ze(i[0],i[1],i[2],i[3],this.spatialReference):new Ze(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Mp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(a=>new Ze(a,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Ze(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Mp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};b([S({readOnly:!0})],Xa.prototype,"cache",null),b([S({readOnly:!0})],Xa.prototype,"extent",null),b([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Xa.prototype,"paths",void 0),b([Se("paths")],Xa.prototype,"writePaths",null),Xa=l3=b([B("esri.geometry.Polyline")],Xa),Xa.prototype.toJSON.isDefaultToJSON=!0;const ls=Xa,Tg=Sr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),u3=Sr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function QM(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function B4(e){return e.points!==void 0}function H4(e){return e.x!==void 0&&e.y!==void 0}function W4(e){return e.paths!==void 0}function Th(e){return e.rings!==void 0}function _a(e){return e==null?null:e instanceof su?e:H4(e)?Ze.fromJSON(e):W4(e)?ls.fromJSON(e):Th(e)?$o.fromJSON(e):B4(e)?Hf.fromJSON(e):QM(e)?gt.fromJSON(e):null}function Wf(e){return e?H4(e)?"esriGeometryPoint":W4(e)?"esriGeometryPolyline":Th(e)?"esriGeometryPolygon":QM(e)?"esriGeometryEnvelope":B4(e)?"esriGeometryMultipoint":null:null}const MU={esriGeometryPoint:Ze,esriGeometryPolyline:ls,esriGeometryPolygon:$o,esriGeometryEnvelope:gt,esriGeometryMultipoint:Hf};function AU(e){return e&&MU[e]||null}const nu={base:su,key:"type",typeMap:{extent:gt,multipoint:Hf,point:Ze,polyline:ls,polygon:$o}};_o(nu);let eA=0;const Up=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+eA++})}};return t=b([B("esri.core.Identifiable")],t),t},J4=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:eA++})}};return t=b([B("esri.core.NumericIdentifiable")],t),t};let Gx=class extends Up(class{}){};Gx=b([B("esri.core.Identifiable")],Gx);async function kU(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await be(()=>import("./portalLayers-35b8965e.js"),["assets/portalLayers-35b8965e.js","assets/lazyLayerLoader-7d715d04.js","assets/layersLoader-ef744e63.js","assets/fetchService-50ce87f2.js","assets/jsonContext-4430ffa2.js"]);try{return await i(t)}catch(r){const a=t&&t.portalItem,d=a&&a.id||"unset",y=a&&a.portal&&a.portal.url||$t.portalUrl;throw fe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+d+"')",r),r}}let OU=0,Li=class extends Ea.EventedMixin(Up(Rn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new gt(-180,-90,180,90,Xe.WGS84),this.id=Date.now().toString(16)+"-layer-"+OU++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Xe.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await be(()=>import("./arcgisLayers-65446d88.js"),["assets/arcgisLayers-65446d88.js","assets/fetchService-50ce87f2.js","assets/lazyLayerLoader-7d715d04.js"])).fromUrl(i)}static fromPortalItem(t){return kU(t)}initialize(){this.when().catch(t=>{Jr(t)||fe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){if(this.parent){const t=this,i=this.parent;"layers"in i&&i.layers.includes(t)?i.layers.remove(t):"tables"in i&&i.tables.includes(t)?i.tables.remove(t):"baseLayers"in i&&i.baseLayers.includes(t)?i.baseLayers.remove(t):"baseLayers"in i&&i.referenceLayers.includes(t)&&i.referenceLayers.remove(t)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Qi(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Vt(t,{query:{f:"json"},responseType:"json"})).data;throw new se("layer:no-attribution-data","Layer does not have attribution data")}};b([S({type:String})],Li.prototype,"attributionDataUrl",void 0),b([S({type:gt})],Li.prototype,"fullExtent",void 0),b([S({readOnly:!0})],Li.prototype,"hasAttributionData",null),b([S({type:String,clonable:!1})],Li.prototype,"id",void 0),b([S({type:Boolean,nonNullable:!0})],Li.prototype,"legendEnabled",void 0),b([S({type:["show","hide","hide-children"]})],Li.prototype,"listMode",void 0),b([S({type:Number,range:{min:0,max:1},nonNullable:!0})],Li.prototype,"opacity",void 0),b([S({clonable:!1})],Li.prototype,"parent",void 0),b([S({readOnly:!0})],Li.prototype,"parsedUrl",null),b([S({type:Boolean})],Li.prototype,"popupEnabled",void 0),b([S({type:Boolean})],Li.prototype,"attributionVisible",void 0),b([S({type:Xe})],Li.prototype,"spatialReference",void 0),b([S({type:String})],Li.prototype,"title",void 0),b([S({readOnly:!0,json:{read:!1}})],Li.prototype,"type",void 0),b([S()],Li.prototype,"url",void 0),b([S({type:Boolean,nonNullable:!0})],Li.prototype,"visible",void 0),Li=b([B("esri.layers.Layer")],Li);const K4=Li;function h3(e,t,i){let r,a;if(e)for(let d=0,y=e.length;d<y;d++){if(r=e.at(d),(r==null?void 0:r[t])===i)return r;if((r==null?void 0:r.type)==="group"&&(a=h3(r.layers,t,i),a))return a}}const PU=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Le;const r=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},a=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||fe.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},d=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",y=>r(y.item)),this.layers.on("after-add",y=>a(y.item)),this.layers.on("after-remove",y=>d(y.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Nh(i,this._get("layers")))}add(i,r){const a=this.layers;if(r=a.getNextIndex(r),i instanceof K4){const d=i;d.parent===this?this.reorder(d,r):a.add(d,r)}else Ia(i)?i.then(d=>{this.destroyed||this.add(d,r)}):fe.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const a=this.layers;let d=a.getNextIndex(r);i.slice().forEach(y=>{y.parent!==this?(a.add(y,d),d+=1):this.reorder(y,d)})}findLayerById(i){return h3(this.layers,"id",i)}findLayerByUid(i){return h3(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return b([S()],t.prototype,"layers",null),t=b([B("esri.support.LayersMixin")],t),t};function c3(e,t,i){if(e)for(let r=0,a=e.length;r<a;r++){const d=e.at(r);if(d[t]===i)return d;if((d==null?void 0:d.type)==="group"){const y=c3(d.tables,t,i);if(y)return y}}}const CU=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Le,this.addHandles([this.tables.on("after-add",r=>{const a=r.item;a.parent&&a.parent!==this&&"tables"in a.parent&&a.parent.tables.remove(a),a.parent=this,a.type!=="feature"&&fe.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Nh(i,this._get("tables")))}findTableById(i){return c3(this.tables,"id",i)}findTableByUid(i){return c3(this.tables,"uid",i)}};return b([S()],t.prototype,"tables",null),t=b([B("esri.support.TablesMixin")],t),t};let Zn=class extends CU(PU(Ea.EventedMixin(De))){constructor(t){super(t),this.allLayers=new Ep({getCollections:()=>{var i,r,a;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(a=this.basemap)==null?void 0:a.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=Zq(this),this.basemap=null,this.editableLayers=new Ep({getCollections:()=>[this.allLayers],itemFilterFunction:Hq}),this.ground=new $g,this._basemapCache=Jq()}destroy(){var t,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(t=this.ground)==null||t.destroy(),(i=this.basemap)==null||i.destroy(),Kq(this._basemapCache),this._basemapCache=null}castBasemap(t){return Yq(t,this._basemapCache)}castGround(t){return Xq(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};b([S({readOnly:!0,dependsOn:[]})],Zn.prototype,"allLayers",void 0),b([S({readOnly:!0})],Zn.prototype,"allTables",void 0),b([S({type:bg})],Zn.prototype,"basemap",void 0),b([Tt("basemap")],Zn.prototype,"castBasemap",null),b([S({readOnly:!0})],Zn.prototype,"editableLayers",void 0),b([S({type:$g,nonNullable:!0})],Zn.prototype,"ground",void 0),b([Tt("ground")],Zn.prototype,"castGround",null),Zn=b([B("esri.Map")],Zn);const tA=Zn,Kt=e=>{let t=class extends e{clone(){var _;const i=Ur(qi(this),"unable to clone instance of non-accessor class"),r=i.metadatas,a=i.store,d={},y=new Map;for(const $ in r){const M=r[$],A=a==null?void 0:a.originOf($),P=M.clonable;if(M.readOnly||P===!1||A!==Te.USER&&A!==Te.DEFAULTS&&A!==Te.WEB_MAP&&A!==Te.WEB_SCENE)continue;const j=this[$];let L=null;L=typeof P=="function"?P(j):P==="reference"?j:Iw(j),j!=null&&L==null||(A===Te.DEFAULTS?y.set($,L):d[$]=L)}const m=new(Object.getPrototypeOf(this)).constructor(d);if(y.size){const $=(_=qi(m))==null?void 0:_.store;if($)for(const[M,A]of y)$.set(M,A,Te.DEFAULTS)}return m}};return t=b([B("esri.core.Clonable")],t),t};let qx=class extends Kt(De){};qx=b([B("esri.core.Clonable")],qx);var kp;function NU(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(i!=null&&+t<i||r!=null&&+t>r)return kp.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return kp.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(kp||(kp={}));const jU=fe.getLogger("esri.support.arcadeOnDemand");let eb;function Vh(){return eb||(eb=(async()=>{const e=await be(()=>import("./arcadeUtils-8136ab26.js").then(t=>t.az),["assets/arcadeUtils-8136ab26.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/number-c0055d08.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),eb}const Lfe=(e,t,i)=>Y4.create(e,t,i,null,["$feature"],[]),Dfe=(e,t,i)=>Y4.create(e,t,i,null,["$feature","$view"],[]),RU=(e,t,i,r)=>Y4.create(e,t,i,r,["$feature","$view"],[]);let Y4=class iA{constructor(t,i,r,a,d,y,m){this.services=null,this.script=t,this.evaluate=a;const _=Array.isArray(y)?y:y.fields;this.fields=_,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=d,this._spatialReference=m,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,a,d,y){const{arcade:m,Feature:_,Dictionary:$}=await Vh(),M=Xe.fromJSON(i);let A;try{A=m.parseScript(t,y)}catch(ve){return jU.error(new se("arcade-bad-expression","Failed to parse arcade script",{script:t,error:ve})),null}const P=d.reduce((ve,Ie)=>({...ve,[Ie]:null}),{});let j=null;a!=null&&(j=new $(a),j.immutable=!0,P.$config=null);const L=m.scriptUsesGeometryEngine(A),F=L&&m.enableGeometrySupport(),V=m.scriptUsesFeatureSet(A)&&m.enableFeatureSetSupport(),J=m.scriptIsAsync(A),Q=J&&m.enableAsyncSupport(),Y={vars:P,spatialReference:M,useAsync:!!Q};await Promise.all([F,V,Q]);const te=new Set;await m.loadDependentModules(te,A,null,J,L);const oe=new $;oe.immutable=!1,oe.setField("scale",0);const ae=m.compileScript(A,Y),de=(ve,Ie)=>("$view"in ve&&ve.$view&&(oe.setField("scale",typeof ve.$view=="object"&&"scale"in ve.$view?ve.$view.scale:void 0),ve.$view=oe),j&&(ve.$config=j),ae({vars:ve,spatialReference:M,services:Ie}));return new iA(t,m,A,de,new _,r,M)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const LU=/^([0-9_])/,DU=/[^a-z0-9_\u0080-\uffff]+/gi;function FU(e){return e==null?null:e.trim().replaceAll(DU,"_").replace(LU,"F$1")||null}const zU=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],VU=["field","normalizationField"];function Ux(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(Bx(zU,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)Bx(VU,r,t)}}function Bx(e,t,i){if(e)for(const r of e){const a=Gf(r,t),d=a&&typeof a!="function"&&i.get(a);d&&_r(r,d.name,t)}}function rA(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const r=t.get(e.startField),a=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(a==null?void 0:a.name)??null}else{const r=t.get(e.startTimeField),a=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(a==null?void 0:a.name)??null}}const tb=new Set;function Z4(e,t){return e&&t?(tb.clear(),_f(tb,e,t),Array.from(tb).sort()):[]}function _f(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:a}of t.fields)e.add(a);else for(const a of i)hs(e,t,a);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const a of i)a!=null&&e.add(a)}}function hs(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function Ffe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}async function Rr(e,t,i){var d;if(!i)return;const{arcadeUtils:r}=await Vh(),a=r.extractFieldNames(i,(d=t==null?void 0:t.fields)==null?void 0:d.map(y=>y.name));for(const y of a)hs(e,t,y)}async function sA(e,t,i){if(i&&i!=="1=1"){const{WhereClause:r}=await be(()=>import("./WhereClause-05449cfc.js").then(d=>d.W),["assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js"]),a=r.create(i,t);if(!a.isStandardized)throw new se("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});_f(e,t,a.fieldNames)}}function GU({displayField:e,fields:t}){return e||(t&&t.length?ib(t,"name-or-title")||ib(t,"unique-identifier")||ib(t,"type-or-category")||qU(t):null)}function qU(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function ib(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function zfe(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function UU(e,t,i){i.onStatisticExpression?Rr(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function Vfe(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],a=i.popupTemplate;r.push(BU(e,t,a)),i.fields&&r.push(...i.fields.map(async d=>UU(e,t.fieldsIndex,d))),await Promise.all(r)}async function BU(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(d=>Rr(e,t.fieldsIndex,d.expression)));const a=i==null?void 0:i.content;if(Array.isArray(a))for(const d of a)d.type==="expression"&&d.expressionInfo&&r.push(Rr(e,t.fieldsIndex,d.expressionInfo.expression));await Promise.all(r)}async function Gfe(e,t,i){t&&(t.timeInfo&&i!=null&&i.timeExtent&&_f(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&_f(e,t.fieldsIndex,[t.floorInfo.floorField]),i!=null&&i.where!=null&&await sA(e,t.fieldsIndex,i.where))}async function qfe(e,t,i){t&&i&&await Promise.all(i.map(r=>HU(e,t,r)))}async function HU(e,t,i){t&&i&&(i.valueExpression?await Rr(e,t.fieldsIndex,i.valueExpression):i.field&&hs(e,t.fieldsIndex,i.field))}function Ufe(e){return e?Z4(e.fieldsIndex,nA(e)):[]}function WU(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?Z4(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const JU=["oid","global-id","guid"],KU=["oid","global-id"],YU=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function ZU(e){const t=new Set;oA(e).forEach(r=>t.add(r)),WU(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function nA(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:a,editorField:d}=t;return[i,r,a,d].filter(Boolean)}function oA(e){return nA(e).map(t=>t.toLowerCase())}function XU(e,t){var i;return e.editable&&!JU.includes(e.type)&&!oA(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function QU(e,t){var r;const i=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||ZU(t).includes(i)||KU.includes(e.type)||YU.some(a=>a.test(i)))}async function Bfe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(a=>eB(e,r,a)))}async function eB(e,t,i){if(!i)return;const r=i.getLabelExpression(),a=i.where;if(r.type==="arcade")await Rr(e,t,r.expression);else{const d=r.expression.match(/{[^}]*}/g);d&&d.forEach(y=>{hs(e,t,y.slice(1,-1))})}await sA(e,t,a)}function tB(e){const t=e.defaultValue;return t!==void 0&&uA(e,t)?t:e.nullable?null:void 0}function aA(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function iB(e){return e===null||aA(e)}const X4="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function rB(e){return e===null||X4(e)}function lA(e){return e!=null&&typeof e=="string"}function sB(e){return e===null||lA(e)}function nB(){return!0}function uA(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?rB:X4;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?iB:aA;break;case"string":case"esriFieldTypeString":i=e.nullable?sB:lA;break;default:i=nB}return arguments.length===1?i:i(t)}const oB=["integer","small-integer","single","double"],aB=new Set([...oB,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),lB=["date","date-only","time-only","timestamp-offset"],uB=new Set([...lB,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function hA(e){return e!=null&&aB.has(e.type)}function Hfe(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Wfe(e){return e!=null&&uB.has(e.type)}var Ig,Eg;function Jfe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Kfe(e,t){return e==null||e.nullable&&t===null?null:hA(e)&&!hB(e.type,Number(t))?Ig.OUT_OF_RANGE:uA(e,t)?e.domain?NU(e.domain,t):null:Eg.INVALID_TYPE}function hB(e,t){const i=typeof e=="string"?cA(e):e;if(!i)return!1;const r=i.min,a=i.max;return i.isInteger?X4(t)&&t>=r&&t<=a:t>=r&&t<=a}function cA(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return cB;case"esriFieldTypeInteger":case"integer":return pB;case"esriFieldTypeBigInteger":case"big-integer":return dB;case"esriFieldTypeSingle":case"single":return fB;case"esriFieldTypeDouble":case"double":return yB}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Ig||(Ig={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Eg||(Eg={}));const cB={min:-32768,max:32767,isInteger:!0},pB={min:-2147483648,max:2147483647,isInteger:!0},dB={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},fB={min:-34e37,max:12e37,isInteger:!1},yB={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Yfe(e,t,i){switch(e){case kp.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case kp.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Eg.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Ig.OUT_OF_RANGE:{const{min:r,max:a}=cA(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${a}`}}}function Zfe(e,t){return!mB(e,t,null)}function mB(e,t,i){if(!t||!t.attributes||!e){if(i!=null)for(const d of e??[])i.add(d);return!0}const r=t.attributes;let a=!1;for(const d of e)if(!(d in r)){if(a=!0,i==null)break;i.add(d)}return a}function gB(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let By=class extends pe{constructor(t){super(t),this.type=null}};b([S({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],By.prototype,"type",void 0),By=b([B("esri.popup.content.Content")],By);const ou=By;var p3;let Mu=p3=class extends ou{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new p3({description:this.description,displayType:this.displayType,title:this.title})}};b([S({type:String,json:{write:!0}})],Mu.prototype,"description",void 0),b([S({type:["auto","preview","list"],json:{write:!0}})],Mu.prototype,"displayType",void 0),b([S({type:String,json:{write:!0}})],Mu.prototype,"title",void 0),b([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Mu.prototype,"type",void 0),Mu=p3=b([B("esri.popup.content.AttachmentsContent")],Mu);const Sf=Mu;var d3;let Au=d3=class extends ou{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new d3({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?re(this.outFields):null})}};b([S()],Au.prototype,"creator",void 0),b([S()],Au.prototype,"destroyer",void 0),b([S()],Au.prototype,"outFields",void 0),b([S({type:["custom"],readOnly:!0})],Au.prototype,"type",void 0),Au=d3=b([B("esri.popup.content.CustomContent")],Au);const vB=Au;var f3;let wc=f3=class extends pe{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new f3({title:this.title,expression:this.expression})}};b([S({type:String,json:{write:!0}})],wc.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],wc.prototype,"expression",void 0),b([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],wc.prototype,"returnType",void 0),wc=f3=b([B("esri.popup.ElementExpressionInfo")],wc);const bB=wc;var y3;let D0=y3=class extends ou{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new y3({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};b([S({type:bB,json:{write:!0}})],D0.prototype,"expressionInfo",void 0),b([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],D0.prototype,"type",void 0),D0=y3=b([B("esri.popup.content.ExpressionContent")],D0);const Q4=D0;class Zh extends Error{}class wB extends Zh{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class _B extends Zh{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class SB extends Zh{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class F0 extends Zh{}class pA extends Zh{constructor(t){super(`Invalid unit ${t}`)}}class Ns extends Zh{}class Da extends Zh{constructor(){super("Zone is an abstract class")}}const Me="numeric",Ln="short",cs="long",Mg={year:Me,month:Me,day:Me},dA={year:Me,month:Ln,day:Me},xB={year:Me,month:Ln,day:Me,weekday:Ln},fA={year:Me,month:cs,day:Me},yA={year:Me,month:cs,day:Me,weekday:cs},mA={hour:Me,minute:Me},gA={hour:Me,minute:Me,second:Me},vA={hour:Me,minute:Me,second:Me,timeZoneName:Ln},bA={hour:Me,minute:Me,second:Me,timeZoneName:cs},wA={hour:Me,minute:Me,hourCycle:"h23"},_A={hour:Me,minute:Me,second:Me,hourCycle:"h23"},SA={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:Ln},xA={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:cs},$A={year:Me,month:Me,day:Me,hour:Me,minute:Me},TA={year:Me,month:Me,day:Me,hour:Me,minute:Me,second:Me},IA={year:Me,month:Ln,day:Me,hour:Me,minute:Me},EA={year:Me,month:Ln,day:Me,hour:Me,minute:Me,second:Me},$B={year:Me,month:Ln,day:Me,weekday:Ln,hour:Me,minute:Me},MA={year:Me,month:cs,day:Me,hour:Me,minute:Me,timeZoneName:Ln},AA={year:Me,month:cs,day:Me,hour:Me,minute:Me,second:Me,timeZoneName:Ln},kA={year:Me,month:cs,day:Me,weekday:cs,hour:Me,minute:Me,timeZoneName:cs},OA={year:Me,month:cs,day:Me,weekday:cs,hour:Me,minute:Me,second:Me,timeZoneName:cs};class Jf{get type(){throw new Da}get name(){throw new Da}get ianaName(){return this.name}get isUniversal(){throw new Da}offsetName(t,i){throw new Da}formatOffset(t,i){throw new Da}offset(t){throw new Da}equals(t){throw new Da}get isValid(){throw new Da}}let rb=null;class qv extends Jf{static get instance(){return rb===null&&(rb=new qv),rb}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return CA(t,i,r)}formatOffset(t,i){return Ud(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Hy={};function TB(e){return Hy[e]||(Hy[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Hy[e]}const IB={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function EB(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,a,d,y,m,_,$,M]=r;return[y,a,d,m,_,$,M]}function MB(e,t){const i=e.formatToParts(t),r=[];for(let a=0;a<i.length;a++){const{type:d,value:y}=i[a],m=IB[d];d==="era"?r[m]=y:vt(m)||(r[m]=parseInt(y,10))}return r}let F1={};class Sa extends Jf{static create(t){return F1[t]||(F1[t]=new Sa(t)),F1[t]}static resetCache(){F1={},Hy={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Sa.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return CA(t,i,r,this.name)}formatOffset(t,i){return Ud(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=TB(this.name);let[a,d,y,m,_,$,M]=r.formatToParts?MB(r,i):EB(r,i);m==="BC"&&(a=-Math.abs(a)+1);const P=i6({year:a,month:d,day:y,hour:_===24?0:_,minute:$,second:M,millisecond:0});let j=+i;const L=j%1e3;return j-=L>=0?L:1e3+L,(P-j)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Hx={};function AB(e,t={}){const i=JSON.stringify([e,t]);let r=Hx[i];return r||(r=new Intl.ListFormat(e,t),Hx[i]=r),r}let m3={};function g3(e,t={}){const i=JSON.stringify([e,t]);let r=m3[i];return r||(r=new Intl.DateTimeFormat(e,t),m3[i]=r),r}let v3={};function kB(e,t={}){const i=JSON.stringify([e,t]);let r=v3[i];return r||(r=new Intl.NumberFormat(e,t),v3[i]=r),r}let b3={};function OB(e,t={}){const{base:i,...r}=t,a=JSON.stringify([e,r]);let d=b3[a];return d||(d=new Intl.RelativeTimeFormat(e,t),b3[a]=d),d}let z0=null;function PB(){return z0||(z0=new Intl.DateTimeFormat().resolvedOptions().locale,z0)}function CB(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,a;try{r=g3(e).resolvedOptions(),a=e}catch{const _=e.substring(0,i);r=g3(_).resolvedOptions(),a=_}const{numberingSystem:d,calendar:y}=r;return[a,d,y]}}function NB(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function jB(e){const t=[];for(let i=1;i<=12;i++){const r=st.utc(2016,i,1);t.push(e(r))}return t}function RB(e){const t=[];for(let i=1;i<=7;i++){const r=st.utc(2016,11,13+i);t.push(e(r))}return t}function z1(e,t,i,r,a){const d=e.listingMode(i);return d==="error"?null:d==="en"?r(t):a(t)}function LB(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class DB{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:a,floor:d,...y}=r;if(!i||Object.keys(y).length>0){const m={useGrouping:!1,...r};r.padTo>0&&(m.minimumIntegerDigits=r.padTo),this.inf=kB(t,m)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):t6(t,3);return Ci(i,this.padTo)}}}class FB{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const y=-1*(t.offset/60),m=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;t.offset!==0&&Sa.create(m).valid?(a=m,this.dt=t):(a="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,a=t.zone.name):(a="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const d={...this.opts};d.timeZone=d.timeZone||a,this.dtf=g3(i,d)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class zB{constructor(t,i,r){this.opts={style:"long",...r},!i&&PA()&&(this.rtf=OB(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):rH(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class ri{static fromOpts(t){return ri.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,r,a=!1){const d=t||Pi.defaultLocale,y=d||(a?"en-US":PB()),m=i||Pi.defaultNumberingSystem,_=r||Pi.defaultOutputCalendar;return new ri(y,m,_,d)}static resetCache(){z0=null,m3={},v3={},b3={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r}={}){return ri.create(t,i,r)}constructor(t,i,r,a){const[d,y,m]=CB(t);this.locale=d,this.numberingSystem=i||y||null,this.outputCalendar=r||m||null,this.intl=NB(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=LB(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ri.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,r=!0){return z1(this,t,r,RA,()=>{const a=i?{month:t,day:"numeric"}:{month:t},d=i?"format":"standalone";return this.monthsCache[d][t]||(this.monthsCache[d][t]=jB(y=>this.extract(y,a,"month"))),this.monthsCache[d][t]})}weekdays(t,i=!1,r=!0){return z1(this,t,r,FA,()=>{const a=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},d=i?"format":"standalone";return this.weekdaysCache[d][t]||(this.weekdaysCache[d][t]=RB(y=>this.extract(y,a,"weekday"))),this.weekdaysCache[d][t]})}meridiems(t=!0){return z1(this,void 0,t,()=>zA,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[st.utc(2016,11,13,9),st.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return z1(this,t,i,VA,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[st.utc(-40,1,1),st.utc(2017,1,1)].map(a=>this.extract(a,r,"era"))),this.eraCache[t]})}extract(t,i,r){const a=this.dtFormatter(t,i),d=a.formatToParts(),y=d.find(m=>m.type.toLowerCase()===r);return y?y.value:null}numberFormatter(t={}){return new DB(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new FB(t,this.intl,i)}relFormatter(t={}){return new zB(this.intl,this.isEnglish(),t)}listFormatter(t={}){return AB(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let sb=null;class wr extends Jf{static get utcInstance(){return sb===null&&(sb=new wr(0)),sb}static instance(t){return t===0?wr.utcInstance:new wr(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new wr(Bv(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ud(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ud(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return Ud(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class VB extends Jf{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function kl(e,t){if(vt(e)||e===null)return t;if(e instanceof Jf)return e;if(GB(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?qv.instance:i==="utc"||i==="gmt"?wr.utcInstance:wr.parseSpecifier(i)||Sa.create(e)}else return Ih(e)?wr.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new VB(e)}let Wx=()=>Date.now(),Jx="system",Kx=null,Yx=null,Zx=null,Xx=60,Qx;class Pi{static get now(){return Wx}static set now(t){Wx=t}static set defaultZone(t){Jx=t}static get defaultZone(){return kl(Jx,qv.instance)}static get defaultLocale(){return Kx}static set defaultLocale(t){Kx=t}static get defaultNumberingSystem(){return Yx}static set defaultNumberingSystem(t){Yx=t}static get defaultOutputCalendar(){return Zx}static set defaultOutputCalendar(t){Zx=t}static get twoDigitCutoffYear(){return Xx}static set twoDigitCutoffYear(t){Xx=t%100}static get throwOnInvalid(){return Qx}static set throwOnInvalid(t){Qx=t}static resetCaches(){ri.resetCache(),Sa.resetCache()}}function vt(e){return typeof e>"u"}function Ih(e){return typeof e=="number"}function Uv(e){return typeof e=="number"&&e%1===0}function GB(e){return typeof e=="string"}function qB(e){return Object.prototype.toString.call(e)==="[object Date]"}function PA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function UB(e){return Array.isArray(e)?e:[e]}function e7(e,t,i){if(e.length!==0)return e.reduce((r,a)=>{const d=[t(a),a];return r&&i(r[0],d[0])===r[0]?r:d},null)[1]}function BB(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function Op(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pa(e,t,i){return Uv(e)&&e>=t&&e<=i}function HB(e,t){return e-t*Math.floor(e/t)}function Ci(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Sl(e){if(!(vt(e)||e===null||e===""))return parseInt(e,10)}function yu(e){if(!(vt(e)||e===null||e===""))return parseFloat(e)}function e6(e){if(!(vt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function t6(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function Kf(e){return e%4===0&&(e%100!==0||e%400===0)}function qd(e){return Kf(e)?366:365}function Ag(e,t){const i=HB(t-1,12)+1,r=e+(t-i)/12;return i===2?Kf(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function i6(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function kg(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function w3(e){return e>99?e:e>Pi.twoDigitCutoffYear?1900+e:2e3+e}function CA(e,t,i,r=null){const a=new Date(e),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(d.timeZone=r);const y={timeZoneName:t,...d},m=new Intl.DateTimeFormat(i,y).formatToParts(a).find(_=>_.type.toLowerCase()==="timezonename");return m?m.value:null}function Bv(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,a=i<0||Object.is(i,-0)?-r:r;return i*60+a}function NA(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Ns(`Invalid unit value ${e}`);return t}function Og(e,t){const i={};for(const r in e)if(Op(e,r)){const a=e[r];if(a==null)continue;i[t(r)]=NA(a)}return i}function Ud(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),a=e>=0?"+":"-";switch(t){case"short":return`${a}${Ci(i,2)}:${Ci(r,2)}`;case"narrow":return`${a}${i}${r>0?`:${r}`:""}`;case"techie":return`${a}${Ci(i,2)}${Ci(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Hv(e){return BB(e,["hour","minute","second","millisecond"])}const WB=["January","February","March","April","May","June","July","August","September","October","November","December"],jA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JB=["J","F","M","A","M","J","J","A","S","O","N","D"];function RA(e){switch(e){case"narrow":return[...JB];case"short":return[...jA];case"long":return[...WB];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const LA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],DA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],KB=["M","T","W","T","F","S","S"];function FA(e){switch(e){case"narrow":return[...KB];case"short":return[...DA];case"long":return[...LA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const zA=["AM","PM"],YB=["Before Christ","Anno Domini"],ZB=["BC","AD"],XB=["B","A"];function VA(e){switch(e){case"narrow":return[...XB];case"short":return[...ZB];case"long":return[...YB];default:return null}}function QB(e){return zA[e.hour<12?0:1]}function eH(e,t){return FA(t)[e.weekday-1]}function tH(e,t){return RA(t)[e.month-1]}function iH(e,t){return VA(t)[e.year<0?0:1]}function rH(e,t,i="always",r=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&d){const A=e==="days";switch(t){case 1:return A?"tomorrow":`next ${a[e][0]}`;case-1:return A?"yesterday":`last ${a[e][0]}`;case 0:return A?"today":`this ${a[e][0]}`}}const y=Object.is(t,-0)||t<0,m=Math.abs(t),_=m===1,$=a[e],M=r?_?$[1]:$[2]||$[1]:_?a[e][0]:e;return y?`${m} ${M} ago`:`in ${m} ${M}`}function t7(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const sH={D:Mg,DD:dA,DDD:fA,DDDD:yA,t:mA,tt:gA,ttt:vA,tttt:bA,T:wA,TT:_A,TTT:SA,TTTT:xA,f:$A,ff:IA,fff:MA,ffff:kA,F:TA,FF:EA,FFF:AA,FFFF:OA};class br{static create(t,i={}){return new br(t,i)}static parseFormat(t){let i=null,r="",a=!1;const d=[];for(let y=0;y<t.length;y++){const m=t.charAt(y);m==="'"?(r.length>0&&d.push({literal:a||/^\s+$/.test(r),val:r}),i=null,r="",a=!a):a||m===i?r+=m:(r.length>0&&d.push({literal:/^\s+$/.test(r),val:r}),r=m,i=m)}return r.length>0&&d.push({literal:a||/^\s+$/.test(r),val:r}),d}static macroTokenToFormatOpts(t){return sH[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}formatInterval(t,i={}){return this.loc.dtFormatter(t.start,{...this.opts,...i}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Ci(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(j,L)=>this.loc.extract(t,j,L),y=j=>t.isOffsetFixed&&t.offset===0&&j.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,j.format):"",m=()=>r?QB(t):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(j,L)=>r?tH(t,j):d(L?{month:j}:{month:j,day:"numeric"},"month"),$=(j,L)=>r?eH(t,j):d(L?{weekday:j}:{weekday:j,month:"long",day:"numeric"},"weekday"),M=j=>{const L=br.macroTokenToFormatOpts(j);return L?this.formatWithSystemDefault(t,L):j},A=j=>r?iH(t,j):d({era:j},"era"),P=j=>{switch(j){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return m();case"d":return a?d({day:"numeric"},"day"):this.num(t.day);case"dd":return a?d({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return $("short",!0);case"cccc":return $("long",!0);case"ccccc":return $("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return $("short",!1);case"EEEE":return $("long",!1);case"EEEEE":return $("narrow",!1);case"L":return a?d({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return a?d({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return a?d({month:"numeric"},"month"):this.num(t.month);case"MM":return a?d({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return a?d({year:"numeric"},"year"):this.num(t.year);case"yy":return a?d({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return a?d({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return a?d({year:"numeric"},"year"):this.num(t.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return M(j)}};return t7(br.parseFormat(i),P)}formatDurationFromString(t,i){const r=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=_=>$=>{const M=r($);return M?this.num(_.get(M),$.length):$},d=br.parseFormat(i),y=d.reduce((_,{literal:$,val:M})=>$?_:_.concat(M),[]),m=t.shiftTo(...y.map(r).filter(_=>_));return t7(d,a(m))}}class En{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const GA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Bp(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function Hp(...e){return t=>e.reduce(([i,r,a],d)=>{const[y,m,_]=d(t,a);return[{...i,...y},m||r,_]},[{},null,1]).slice(0,2)}function Wp(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const a=i.exec(e);if(a)return r(a)}return[null,null]}function qA(...e){return(t,i)=>{const r={};let a;for(a=0;a<e.length;a++)r[e[a]]=Sl(t[i+a]);return[r,null,i+a]}}const UA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,nH=`(?:${UA.source}?(?:\\[(${GA.source})\\])?)?`,r6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BA=RegExp(`${r6.source}${nH}`),s6=RegExp(`(?:T${BA.source})?`),oH=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,aH=/(\d{4})-?W(\d\d)(?:-?(\d))?/,lH=/(\d{4})-?(\d{3})/,uH=qA("weekYear","weekNumber","weekDay"),hH=qA("year","ordinal"),cH=/(\d{4})-(\d\d)-(\d\d)/,HA=RegExp(`${r6.source} ?(?:${UA.source}|(${GA.source}))?`),pH=RegExp(`(?: ${HA.source})?`);function pp(e,t,i){const r=e[t];return vt(r)?i:Sl(r)}function dH(e,t){return[{year:pp(e,t),month:pp(e,t+1,1),day:pp(e,t+2,1)},null,t+3]}function Jp(e,t){return[{hours:pp(e,t,0),minutes:pp(e,t+1,0),seconds:pp(e,t+2,0),milliseconds:e6(e[t+3])},null,t+4]}function Yf(e,t){const i=!e[t]&&!e[t+1],r=Bv(e[t+1],e[t+2]),a=i?null:wr.instance(r);return[{},a,t+3]}function Zf(e,t){const i=e[t]?Sa.create(e[t]):null;return[{},i,t+1]}const fH=RegExp(`^T?${r6.source}$`),yH=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function mH(e){const[t,i,r,a,d,y,m,_,$]=e,M=t[0]==="-",A=_&&_[0]==="-",P=(j,L=!1)=>j!==void 0&&(L||j&&M)?-j:j;return[{years:P(yu(i)),months:P(yu(r)),weeks:P(yu(a)),days:P(yu(d)),hours:P(yu(y)),minutes:P(yu(m)),seconds:P(yu(_),_==="-0"),milliseconds:P(e6($),A)}]}const gH={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function n6(e,t,i,r,a,d,y){const m={year:t.length===2?w3(Sl(t)):Sl(t),month:jA.indexOf(i)+1,day:Sl(r),hour:Sl(a),minute:Sl(d)};return y&&(m.second=Sl(y)),e&&(m.weekday=e.length>3?LA.indexOf(e)+1:DA.indexOf(e)+1),m}const vH=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function bH(e){const[,t,i,r,a,d,y,m,_,$,M,A]=e,P=n6(t,a,r,i,d,y,m);let j;return _?j=gH[_]:$?j=0:j=Bv(M,A),[P,new wr(j)]}function wH(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const _H=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,SH=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,xH=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function i7(e){const[,t,i,r,a,d,y,m]=e;return[n6(t,a,r,i,d,y,m),wr.utcInstance]}function $H(e){const[,t,i,r,a,d,y,m]=e;return[n6(t,m,i,r,a,d,y),wr.utcInstance]}const TH=Bp(oH,s6),IH=Bp(aH,s6),EH=Bp(lH,s6),MH=Bp(BA),WA=Hp(dH,Jp,Yf,Zf),AH=Hp(uH,Jp,Yf,Zf),kH=Hp(hH,Jp,Yf,Zf),OH=Hp(Jp,Yf,Zf);function PH(e){return Wp(e,[TH,WA],[IH,AH],[EH,kH],[MH,OH])}function CH(e){return Wp(wH(e),[vH,bH])}function NH(e){return Wp(e,[_H,i7],[SH,i7],[xH,$H])}function jH(e){return Wp(e,[yH,mH])}const RH=Hp(Jp);function LH(e){return Wp(e,[fH,RH])}const DH=Bp(cH,pH),FH=Bp(HA),zH=Hp(Jp,Yf,Zf);function VH(e){return Wp(e,[DH,WA],[FH,zH])}const GH="Invalid Duration",JA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},qH={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...JA},fs=146097/400,ac=146097/4800,UH={years:{quarters:4,months:12,weeks:fs/7,days:fs,hours:fs*24,minutes:fs*24*60,seconds:fs*24*60*60,milliseconds:fs*24*60*60*1e3},quarters:{months:3,weeks:fs/28,days:fs/4,hours:fs*24/4,minutes:fs*24*60/4,seconds:fs*24*60*60/4,milliseconds:fs*24*60*60*1e3/4},months:{weeks:ac/7,days:ac,hours:ac*24,minutes:ac*24*60,seconds:ac*24*60*60,milliseconds:ac*24*60*60*1e3},...JA},ku=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],BH=ku.slice(0).reverse();function Fa(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new xt(r)}function HH(e){return e<0?Math.floor(e):Math.ceil(e)}function KA(e,t,i,r,a){const d=e[a][i],y=t[i]/d,m=Math.sign(y)===Math.sign(r[a]),_=!m&&r[a]!==0&&Math.abs(y)<=1?HH(y):Math.trunc(y);r[a]+=_,t[i]-=_*d}function WH(e,t){BH.reduce((i,r)=>vt(t[r])?i:(i&&KA(e,t,i,t,r),r),null)}function JH(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class xt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?UH:qH;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||ri.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return xt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new Ns(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new xt({values:Og(t,xt.normalizeUnit),loc:ri.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Ih(t))return xt.fromMillis(t);if(xt.isDuration(t))return t;if(typeof t=="object")return xt.fromObject(t);throw new Ns(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=jH(t);return r?xt.fromObject(r,i):xt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=LH(t);return r?xt.fromObject(r,i):xt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new Ns("need to specify a reason the Duration is invalid");const r=t instanceof En?t:new En(t,i);if(Pi.throwOnInvalid)throw new SB(r);return new xt({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new pA(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?br.create(this.loc,r).formatDurationFromString(this,t):GH}toHuman(t={}){const i=ku.map(r=>{const a=this.values[r];return vt(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(a)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=t6(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let a=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(a+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||r.milliseconds!==0)&&(a+=".SSS"));let d=r.toFormat(a);return t.includePrefix&&(d="T"+d),d}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=xt.fromDurationLike(t),r={};for(const a of ku)(Op(i.values,a)||Op(this.values,a))&&(r[a]=i.get(a)+this.get(a));return Fa(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=xt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=NA(t(this.values[r],r));return Fa(this,{values:i},!0)}get(t){return this[xt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...Og(t,xt.normalizeUnit)};return Fa(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:a}={}){const y={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:a,conversionAccuracy:r};return Fa(this,y)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return WH(this.matrix,t),Fa(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=JH(this.normalize().shiftToAll().toObject());return Fa(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(y=>xt.normalizeUnit(y));const i={},r={},a=this.toObject();let d;for(const y of ku)if(t.indexOf(y)>=0){d=y;let m=0;for(const $ in r)m+=this.matrix[$][y]*r[$],r[$]=0;Ih(a[y])&&(m+=a[y]);const _=Math.trunc(m);i[y]=_,r[y]=(m*1e3-_*1e3)/1e3;for(const $ in a)ku.indexOf($)>ku.indexOf(y)&&KA(this.matrix,a,$,i,y)}else Ih(a[y])&&(r[y]=a[y]);for(const y in r)r[y]!==0&&(i[d]+=y===d?r[y]:r[y]/this.matrix[d][y]);return Fa(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Fa(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,a){return r===void 0||r===0?a===void 0||a===0:r===a}for(const r of ku)if(!i(this.values[r],t.values[r]))return!1;return!0}}const lc="Invalid Interval";function KH(e,t){return!e||!e.isValid?xi.invalid("missing or invalid start"):!t||!t.isValid?xi.invalid("missing or invalid end"):t<e?xi.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class xi{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new Ns("need to specify a reason the Interval is invalid");const r=t instanceof En?t:new En(t,i);if(Pi.throwOnInvalid)throw new _B(r);return new xi({invalid:r})}static fromDateTimes(t,i){const r=m0(t),a=m0(i),d=KH(r,a);return d??new xi({start:r,end:a})}static after(t,i){const r=xt.fromDurationLike(i),a=m0(t);return xi.fromDateTimes(a,a.plus(r))}static before(t,i){const r=xt.fromDurationLike(i),a=m0(t);return xi.fromDateTimes(a.minus(r),a)}static fromISO(t,i){const[r,a]=(t||"").split("/",2);if(r&&a){let d,y;try{d=st.fromISO(r,i),y=d.isValid}catch{y=!1}let m,_;try{m=st.fromISO(a,i),_=m.isValid}catch{_=!1}if(y&&_)return xi.fromDateTimes(d,m);if(y){const $=xt.fromISO(a,i);if($.isValid)return xi.after(d,$)}else if(_){const $=xt.fromISO(r,i);if($.isValid)return xi.before(m,$)}}return xi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),r=this.end.startOf(t);return Math.floor(r.diff(i,t).get(t))+(r.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?xi.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(m0).filter(y=>this.contains(y)).sort(),r=[];let{s:a}=this,d=0;for(;a<this.e;){const y=i[d]||this.e,m=+y>+this.e?this.e:y;r.push(xi.fromDateTimes(a,m)),a=m,d+=1}return r}splitBy(t){const i=xt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,a=1,d;const y=[];for(;r<this.e;){const m=this.start.plus(i.mapUnits(_=>_*a));d=+m>+this.e?this.e:m,y.push(xi.fromDateTimes(r,d)),r=d,a+=1}return y}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:xi.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return xi.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((a,d)=>a.s-d.s).reduce(([a,d],y)=>d?d.overlaps(y)||d.abutsStart(y)?[a,d.union(y)]:[a.concat([d]),y]:[a,y],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const a=[],d=t.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...d),m=y.sort((_,$)=>_.time-$.time);for(const _ of m)r+=_.type==="s"?1:-1,r===1?i=_.time:(i&&+i!=+_.time&&a.push(xi.fromDateTimes(i,_.time)),i=null);return xi.merge(a)}difference(...t){return xi.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:lc}toLocaleString(t=Mg,i={}){return this.isValid?br.create(this.s.loc.clone(i),t).formatInterval(this):lc}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:lc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:lc}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:lc}toFormat(t,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:lc}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):xt.invalid(this.invalidReason)}mapEndpoints(t){return xi.fromDateTimes(t(this.s),t(this.e))}}class V1{static hasDST(t=Pi.defaultZone){const i=st.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Sa.isValidZone(t)}static normalizeZone(t){return kl(t,Pi.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null,outputCalendar:d="gregory"}={}){return(a||ri.create(i,r,d)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null,outputCalendar:d="gregory"}={}){return(a||ri.create(i,r,d)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null}={}){return(a||ri.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null}={}){return(a||ri.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ri.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return ri.create(i,null,"gregory").eras(t)}static features(){return{relative:PA()}}}function r7(e,t){const i=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(xt.fromMillis(r).as("days"))}function YH(e,t,i){const r=[["years",(_,$)=>$.year-_.year],["quarters",(_,$)=>$.quarter-_.quarter+($.year-_.year)*4],["months",(_,$)=>$.month-_.month+($.year-_.year)*12],["weeks",(_,$)=>{const M=r7(_,$);return(M-M%7)/7}],["days",r7]],a={},d=e;let y,m;for(const[_,$]of r)i.indexOf(_)>=0&&(y=_,a[_]=$(e,t),m=d.plus(a),m>t?(a[_]--,e=d.plus(a)):e=m);return[e,a,m,y]}function ZH(e,t,i,r){let[a,d,y,m]=YH(e,t,i);const _=t-a,$=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);$.length===0&&(y<t&&(y=a.plus({[m]:1})),y!==a&&(d[m]=(d[m]||0)+_/(y-a)));const M=xt.fromObject(d,r);return $.length>0?xt.fromMillis(_,r).shiftTo(...$).plus(M):M}const o6={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},s7={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},XH=o6.hanidec.replace(/[\[|\]]/g,"").split("");function QH(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(o6.hanidec)!==-1)t+=XH.indexOf(e[i]);else for(const a in s7){const[d,y]=s7[a];r>=d&&r<=y&&(t+=r-d)}}return parseInt(t,10)}else return t}function Xs({numberingSystem:e},t=""){return new RegExp(`${o6[e||"latn"]}${t}`)}const eW="missing Intl.DateTimeFormat.formatToParts support";function Pt(e,t=i=>i){return{regex:e,deser:([i])=>t(QH(i))}}const tW=String.fromCharCode(160),YA=`[ ${tW}]`,ZA=new RegExp(YA,"g");function iW(e){return e.replace(/\./g,"\\.?").replace(ZA,YA)}function n7(e){return e.replace(/\./g,"").replace(ZA," ").toLowerCase()}function Qs(e,t){return e===null?null:{regex:RegExp(e.map(iW).join("|")),deser:([i])=>e.findIndex(r=>n7(i)===n7(r))+t}}function o7(e,t){return{regex:e,deser:([,i,r])=>Bv(i,r),groups:t}}function G1(e){return{regex:e,deser:([t])=>t}}function rW(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function sW(e,t){const i=Xs(t),r=Xs(t,"{2}"),a=Xs(t,"{3}"),d=Xs(t,"{4}"),y=Xs(t,"{6}"),m=Xs(t,"{1,2}"),_=Xs(t,"{1,3}"),$=Xs(t,"{1,6}"),M=Xs(t,"{1,9}"),A=Xs(t,"{2,4}"),P=Xs(t,"{4,6}"),j=V=>({regex:RegExp(rW(V.val)),deser:([J])=>J,literal:!0}),F=(V=>{if(e.literal)return j(V);switch(V.val){case"G":return Qs(t.eras("short",!1),0);case"GG":return Qs(t.eras("long",!1),0);case"y":return Pt($);case"yy":return Pt(A,w3);case"yyyy":return Pt(d);case"yyyyy":return Pt(P);case"yyyyyy":return Pt(y);case"M":return Pt(m);case"MM":return Pt(r);case"MMM":return Qs(t.months("short",!0,!1),1);case"MMMM":return Qs(t.months("long",!0,!1),1);case"L":return Pt(m);case"LL":return Pt(r);case"LLL":return Qs(t.months("short",!1,!1),1);case"LLLL":return Qs(t.months("long",!1,!1),1);case"d":return Pt(m);case"dd":return Pt(r);case"o":return Pt(_);case"ooo":return Pt(a);case"HH":return Pt(r);case"H":return Pt(m);case"hh":return Pt(r);case"h":return Pt(m);case"mm":return Pt(r);case"m":return Pt(m);case"q":return Pt(m);case"qq":return Pt(r);case"s":return Pt(m);case"ss":return Pt(r);case"S":return Pt(_);case"SSS":return Pt(a);case"u":return G1(M);case"uu":return G1(m);case"uuu":return Pt(i);case"a":return Qs(t.meridiems(),0);case"kkkk":return Pt(d);case"kk":return Pt(A,w3);case"W":return Pt(m);case"WW":return Pt(r);case"E":case"c":return Pt(i);case"EEE":return Qs(t.weekdays("short",!1,!1),1);case"EEEE":return Qs(t.weekdays("long",!1,!1),1);case"ccc":return Qs(t.weekdays("short",!0,!1),1);case"cccc":return Qs(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return o7(new RegExp(`([+-]${m.source})(?::(${r.source}))?`),2);case"ZZZ":return o7(new RegExp(`([+-]${m.source})(${r.source})?`),2);case"z":return G1(/[a-z_+-/]{1,256}?/i);case" ":return G1(/[^\S\n\r]/);default:return j(V)}})(e)||{invalidReason:eW};return F.token=e,F}const nW={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function oW(e,t){const{type:i,value:r}=e;if(i==="literal"){const y=/^\s+$/.test(r);return{literal:!y,val:y?" ":r}}const a=t[i];let d=nW[i];if(typeof d=="object"&&(d=d[a]),d)return{literal:!1,val:d}}function aW(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function lW(e,t,i){const r=e.match(t);if(r){const a={};let d=1;for(const y in i)if(Op(i,y)){const m=i[y],_=m.groups?m.groups+1:1;!m.literal&&m.token&&(a[m.token.val[0]]=m.deser(r.slice(d,d+_))),d+=_}return[r,a]}else return[r,{}]}function uW(e){const t=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return vt(e.z)||(i=Sa.create(e.z)),vt(e.Z)||(i||(i=new wr(e.Z)),r=e.Z),vt(e.q)||(e.M=(e.q-1)*3+1),vt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),vt(e.u)||(e.S=e6(e.u)),[Object.keys(e).reduce((d,y)=>{const m=t(y);return m&&(d[m]=e[y]),d},{}),i,r]}let nb=null;function hW(){return nb||(nb=st.fromMillis(1555555555555)),nb}function cW(e,t){if(e.literal)return e;const i=br.macroTokenToFormatOpts(e.val),r=ek(i,t);return r==null||r.includes(void 0)?e:r}function XA(e,t){return Array.prototype.concat(...e.map(i=>cW(i,t)))}function QA(e,t,i){const r=XA(br.parseFormat(i),e),a=r.map(y=>sW(y,e)),d=a.find(y=>y.invalidReason);if(d)return{input:t,tokens:r,invalidReason:d.invalidReason};{const[y,m]=aW(a),_=RegExp(y,"i"),[$,M]=lW(t,_,m),[A,P,j]=M?uW(M):[null,null,void 0];if(Op(M,"a")&&Op(M,"H"))throw new F0("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:_,rawMatches:$,matches:M,result:A,zone:P,specificOffset:j}}}function pW(e,t,i){const{result:r,zone:a,specificOffset:d,invalidReason:y}=QA(e,t,i);return[r,a,d,y]}function ek(e,t){return e?br.create(t,e).formatDateTimeParts(hW()).map(a=>oW(a,e)):null}const tk=[0,31,59,90,120,151,181,212,243,273,304,334],ik=[0,31,60,91,121,152,182,213,244,274,305,335];function Rs(e,t){return new En("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function rk(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const a=r.getUTCDay();return a===0?7:a}function sk(e,t,i){return i+(Kf(e)?ik:tk)[t-1]}function nk(e,t){const i=Kf(e)?ik:tk,r=i.findIndex(d=>d<t),a=t-i[r];return{month:r+1,day:a}}function _3(e){const{year:t,month:i,day:r}=e,a=sk(t,i,r),d=rk(t,i,r);let y=Math.floor((a-d+10)/7),m;return y<1?(m=t-1,y=kg(m)):y>kg(t)?(m=t+1,y=1):m=t,{weekYear:m,weekNumber:y,weekday:d,...Hv(e)}}function a7(e){const{weekYear:t,weekNumber:i,weekday:r}=e,a=rk(t,1,4),d=qd(t);let y=i*7+r-a-3,m;y<1?(m=t-1,y+=qd(m)):y>d?(m=t+1,y-=qd(t)):m=t;const{month:_,day:$}=nk(m,y);return{year:m,month:_,day:$,...Hv(e)}}function ob(e){const{year:t,month:i,day:r}=e,a=sk(t,i,r);return{year:t,ordinal:a,...Hv(e)}}function l7(e){const{year:t,ordinal:i}=e,{month:r,day:a}=nk(t,i);return{year:t,month:r,day:a,...Hv(e)}}function dW(e){const t=Uv(e.weekYear),i=pa(e.weekNumber,1,kg(e.weekYear)),r=pa(e.weekday,1,7);return t?i?r?!1:Rs("weekday",e.weekday):Rs("week",e.week):Rs("weekYear",e.weekYear)}function fW(e){const t=Uv(e.year),i=pa(e.ordinal,1,qd(e.year));return t?i?!1:Rs("ordinal",e.ordinal):Rs("year",e.year)}function ok(e){const t=Uv(e.year),i=pa(e.month,1,12),r=pa(e.day,1,Ag(e.year,e.month));return t?i?r?!1:Rs("day",e.day):Rs("month",e.month):Rs("year",e.year)}function ak(e){const{hour:t,minute:i,second:r,millisecond:a}=e,d=pa(t,0,23)||t===24&&i===0&&r===0&&a===0,y=pa(i,0,59),m=pa(r,0,59),_=pa(a,0,999);return d?y?m?_?!1:Rs("millisecond",a):Rs("second",r):Rs("minute",i):Rs("hour",t)}const ab="Invalid DateTime",u7=864e13;function q1(e){return new En("unsupported zone",`the zone "${e.name}" is not supported`)}function lb(e){return e.weekData===null&&(e.weekData=_3(e.c)),e.weekData}function f0(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new st({...i,...t,old:i})}function lk(e,t,i){let r=e-t*60*1e3;const a=i.offset(r);if(t===a)return[r,t];r-=(a-t)*60*1e3;const d=i.offset(r);return a===d?[r,a]:[e-Math.min(a,d)*60*1e3,Math.max(a,d)]}function h7(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Wy(e,t,i){return lk(i6(e),t,i)}function c7(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,d={...e.c,year:r,month:a,day:Math.min(e.c.day,Ag(r,a))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},y=xt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),m=i6(d);let[_,$]=lk(m,i,e.zone);return y!==0&&(_+=y,$=e.zone.offset(_)),{ts:_,o:$}}function y0(e,t,i,r,a,d){const{setZone:y,zone:m}=i;if(e&&Object.keys(e).length!==0||t){const _=t||m,$=st.fromObject(e,{...i,zone:_,specificOffset:d});return y?$:$.setZone(m)}else return st.invalid(new En("unparsable",`the input "${a}" can't be parsed as ${r}`))}function U1(e,t,i=!0){return e.isValid?br.create(ri.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function ub(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Ci(e.c.year,i?6:4),t?(r+="-",r+=Ci(e.c.month),r+="-",r+=Ci(e.c.day)):(r+=Ci(e.c.month),r+=Ci(e.c.day)),r}function p7(e,t,i,r,a,d){let y=Ci(e.c.hour);return t?(y+=":",y+=Ci(e.c.minute),(e.c.second!==0||!i)&&(y+=":")):y+=Ci(e.c.minute),(e.c.second!==0||!i)&&(y+=Ci(e.c.second),(e.c.millisecond!==0||!r)&&(y+=".",y+=Ci(e.c.millisecond,3))),a&&(e.isOffsetFixed&&e.offset===0&&!d?y+="Z":e.o<0?(y+="-",y+=Ci(Math.trunc(-e.o/60)),y+=":",y+=Ci(Math.trunc(-e.o%60))):(y+="+",y+=Ci(Math.trunc(e.o/60)),y+=":",y+=Ci(Math.trunc(e.o%60)))),d&&(y+="["+e.zone.ianaName+"]"),y}const uk={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yW={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},mW={ordinal:1,hour:0,minute:0,second:0,millisecond:0},hk=["year","month","day","hour","minute","second","millisecond"],gW=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],vW=["year","ordinal","hour","minute","second","millisecond"];function d7(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new pA(e);return t}function f7(e,t){const i=kl(t.zone,Pi.defaultZone),r=ri.fromObject(t),a=Pi.now();let d,y;if(vt(e.year))d=a;else{for(const $ of hk)vt(e[$])&&(e[$]=uk[$]);const m=ok(e)||ak(e);if(m)return st.invalid(m);const _=i.offset(a);[d,y]=Wy(e,_,i)}return new st({ts:d,zone:i,loc:r,o:y})}function y7(e,t,i){const r=vt(i.round)?!0:i.round,a=(y,m)=>(y=t6(y,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(y,m)),d=y=>i.calendary?t.hasSame(e,y)?0:t.startOf(y).diff(e.startOf(y),y).get(y):t.diff(e,y).get(y);if(i.unit)return a(d(i.unit),i.unit);for(const y of i.units){const m=d(y);if(Math.abs(m)>=1)return a(m,y)}return a(e>t?-0:0,i.units[i.units.length-1])}function m7(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class st{constructor(t){const i=t.zone||Pi.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new En("invalid input"):null)||(i.isValid?null:q1(i));this.ts=vt(t.ts)?Pi.now():t.ts;let a=null,d=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[a,d]=[t.old.c,t.old.o];else{const m=i.offset(this.ts);a=h7(this.ts,m),r=Number.isNaN(a.year)?new En("invalid input"):null,a=r?null:a,d=r?null:m}this._zone=i,this.loc=t.loc||ri.create(),this.invalid=r,this.weekData=null,this.c=a,this.o=d,this.isLuxonDateTime=!0}static now(){return new st({})}static local(){const[t,i]=m7(arguments),[r,a,d,y,m,_,$]=i;return f7({year:r,month:a,day:d,hour:y,minute:m,second:_,millisecond:$},t)}static utc(){const[t,i]=m7(arguments),[r,a,d,y,m,_,$]=i;return t.zone=wr.utcInstance,f7({year:r,month:a,day:d,hour:y,minute:m,second:_,millisecond:$},t)}static fromJSDate(t,i={}){const r=qB(t)?t.valueOf():NaN;if(Number.isNaN(r))return st.invalid("invalid input");const a=kl(i.zone,Pi.defaultZone);return a.isValid?new st({ts:r,zone:a,loc:ri.fromObject(i)}):st.invalid(q1(a))}static fromMillis(t,i={}){if(Ih(t))return t<-u7||t>u7?st.invalid("Timestamp out of range"):new st({ts:t,zone:kl(i.zone,Pi.defaultZone),loc:ri.fromObject(i)});throw new Ns(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Ih(t))return new st({ts:t*1e3,zone:kl(i.zone,Pi.defaultZone),loc:ri.fromObject(i)});throw new Ns("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=kl(i.zone,Pi.defaultZone);if(!r.isValid)return st.invalid(q1(r));const a=Pi.now(),d=vt(i.specificOffset)?r.offset(a):i.specificOffset,y=Og(t,d7),m=!vt(y.ordinal),_=!vt(y.year),$=!vt(y.month)||!vt(y.day),M=_||$,A=y.weekYear||y.weekNumber,P=ri.fromObject(i);if((M||m)&&A)throw new F0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if($&&m)throw new F0("Can't mix ordinal dates with month/day");const j=A||y.weekday&&!M;let L,F,V=h7(a,d);j?(L=gW,F=yW,V=_3(V)):m?(L=vW,F=mW,V=ob(V)):(L=hk,F=uk);let J=!1;for(const ve of L){const Ie=y[ve];vt(Ie)?J?y[ve]=F[ve]:y[ve]=V[ve]:J=!0}const Q=j?dW(y):m?fW(y):ok(y),Y=Q||ak(y);if(Y)return st.invalid(Y);const te=j?a7(y):m?l7(y):y,[oe,ae]=Wy(te,d,r),de=new st({ts:oe,zone:r,o:ae,loc:P});return y.weekday&&M&&t.weekday!==de.weekday?st.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${de.toISO()}`):de}static fromISO(t,i={}){const[r,a]=PH(t);return y0(r,a,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,a]=CH(t);return y0(r,a,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,a]=NH(t);return y0(r,a,i,"HTTP",i)}static fromFormat(t,i,r={}){if(vt(t)||vt(i))throw new Ns("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:d=null}=r,y=ri.fromOpts({locale:a,numberingSystem:d,defaultToEN:!0}),[m,_,$,M]=pW(y,t,i);return M?st.invalid(M):y0(m,_,r,`format ${i}`,t,$)}static fromString(t,i,r={}){return st.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,a]=VH(t);return y0(r,a,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new Ns("need to specify a reason the DateTime is invalid");const r=t instanceof En?t:new En(t,i);if(Pi.throwOnInvalid)throw new wB(r);return new st({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=ek(t,ri.fromObject(i));return r?r.map(a=>a?a.val:null).join(""):null}static expandFormat(t,i={}){return XA(br.parseFormat(t),ri.fromObject(i)).map(a=>a.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?lb(this).weekYear:NaN}get weekNumber(){return this.isValid?lb(this).weekNumber:NaN}get weekday(){return this.isValid?lb(this).weekday:NaN}get ordinal(){return this.isValid?ob(this.c).ordinal:NaN}get monthShort(){return this.isValid?V1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?V1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?V1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?V1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Kf(this.year)}get daysInMonth(){return Ag(this.year,this.month)}get daysInYear(){return this.isValid?qd(this.year):NaN}get weeksInWeekYear(){return this.isValid?kg(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:a}=br.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:a}}toUTC(t=0,i={}){return this.setZone(wr.instance(t),i)}toLocal(){return this.setZone(Pi.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=kl(t,Pi.defaultZone),t.equals(this.zone))return this;if(t.isValid){let a=this.ts;if(i||r){const d=t.offset(this.ts),y=this.toObject();[a]=Wy(y,d,t)}return f0(this,{ts:a,zone:t})}else return st.invalid(q1(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const a=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return f0(this,{loc:a})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=Og(t,d7),r=!vt(i.weekYear)||!vt(i.weekNumber)||!vt(i.weekday),a=!vt(i.ordinal),d=!vt(i.year),y=!vt(i.month)||!vt(i.day),m=d||y,_=i.weekYear||i.weekNumber;if((m||a)&&_)throw new F0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&a)throw new F0("Can't mix ordinal dates with month/day");let $;r?$=a7({..._3(this.c),...i}):vt(i.ordinal)?($={...this.toObject(),...i},vt(i.day)&&($.day=Math.min(Ag($.year,$.month),$.day))):$=l7({...ob(this.c),...i});const[M,A]=Wy($,this.o,this.zone);return f0(this,{ts:M,o:A})}plus(t){if(!this.isValid)return this;const i=xt.fromDurationLike(t);return f0(this,c7(this,i))}minus(t){if(!this.isValid)return this;const i=xt.fromDurationLike(t).negate();return f0(this,c7(this,i))}startOf(t){if(!this.isValid)return this;const i={},r=xt.normalizeUnit(t);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const a=Math.ceil(this.month/3);i.month=(a-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?br.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):ab}toLocaleString(t=Mg,i={}){return this.isValid?br.create(this.loc.clone(i),t).formatDateTime(this):ab}toLocaleParts(t={}){return this.isValid?br.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:a=!0,extendedZone:d=!1}={}){if(!this.isValid)return null;const y=t==="extended";let m=ub(this,y);return m+="T",m+=p7(this,y,i,r,a,d),m}toISODate({format:t="extended"}={}){return this.isValid?ub(this,t==="extended"):null}toISOWeekDate(){return U1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:a=!1,extendedZone:d=!1,format:y="extended"}={}){return this.isValid?(a?"T":"")+p7(this,y==="extended",i,t,r,d):null}toRFC2822(){return U1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return U1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ub(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let a="HH:mm:ss.SSS";return(i||t)&&(r&&(a+=" "),i?a+="z":t&&(a+="ZZ")),U1(this,a,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():ab}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return xt.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...r},d=UB(i).map(xt.normalizeUnit),y=t.valueOf()>this.valueOf(),m=y?this:t,_=y?t:this,$=ZH(m,_,d,a);return y?$.negate():$}diffNow(t="milliseconds",i={}){return this.diff(st.now(),t,i)}until(t){return this.isValid?xi.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const r=t.valueOf(),a=this.setZone(t.zone,{keepLocalTime:!0});return a.startOf(i)<=r&&r<=a.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||st.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let a=["years","months","days","hours","minutes","seconds"],d=t.unit;return Array.isArray(t.unit)&&(a=t.unit,d=void 0),y7(i,this.plus(r),{...t,numeric:"always",units:a,unit:d})}toRelativeCalendar(t={}){return this.isValid?y7(t.base||st.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(st.isDateTime))throw new Ns("min requires all arguments be DateTimes");return e7(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(st.isDateTime))throw new Ns("max requires all arguments be DateTimes");return e7(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:a=null,numberingSystem:d=null}=r,y=ri.fromOpts({locale:a,numberingSystem:d,defaultToEN:!0});return QA(y,t,i)}static fromStringExplain(t,i,r={}){return st.fromFormatExplain(t,i,r)}static get DATE_SHORT(){return Mg}static get DATE_MED(){return dA}static get DATE_MED_WITH_WEEKDAY(){return xB}static get DATE_FULL(){return fA}static get DATE_HUGE(){return yA}static get TIME_SIMPLE(){return mA}static get TIME_WITH_SECONDS(){return gA}static get TIME_WITH_SHORT_OFFSET(){return vA}static get TIME_WITH_LONG_OFFSET(){return bA}static get TIME_24_SIMPLE(){return wA}static get TIME_24_WITH_SECONDS(){return _A}static get TIME_24_WITH_SHORT_OFFSET(){return SA}static get TIME_24_WITH_LONG_OFFSET(){return xA}static get DATETIME_SHORT(){return $A}static get DATETIME_SHORT_WITH_SECONDS(){return TA}static get DATETIME_MED(){return IA}static get DATETIME_MED_WITH_SECONDS(){return EA}static get DATETIME_MED_WITH_WEEKDAY(){return $B}static get DATETIME_FULL(){return MA}static get DATETIME_FULL_WITH_SECONDS(){return AA}static get DATETIME_HUGE(){return kA}static get DATETIME_HUGE_WITH_SECONDS(){return OA}}function m0(e){if(st.isDateTime(e))return e;if(e&&e.valueOf&&Ih(e.valueOf()))return st.fromJSDate(e);if(e&&typeof e=="object")return st.fromObject(e);throw new Ns(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const bW={year:void 0,month:void 0,day:void 0,weekday:void 0},wW={hour:void 0,minute:void 0,second:void 0},_W={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},a6={timeZone:"Etc/UTC"},Hn={year:"numeric",month:"numeric",day:"numeric"},g0={year:"numeric",month:"long",day:"numeric"},v0={year:"numeric",month:"short",day:"numeric"},b0={year:"numeric",month:"long",weekday:"long",day:"numeric"},_s={hour:"numeric",minute:"numeric"},en={..._s,second:"numeric"},Kp={"short-date":Hn,"short-date-short-time":{...Hn,..._s},"short-date-short-time-24":{...Hn,..._s,hour12:!1},"short-date-long-time":{...Hn,...en},"short-date-long-time-24":{...Hn,...en,hour12:!1},"short-date-le":Hn,"short-date-le-short-time":{...Hn,..._s},"short-date-le-short-time-24":{...Hn,..._s,hour12:!1},"short-date-le-long-time":{...Hn,...en},"short-date-le-long-time-24":{...Hn,...en,hour12:!1},"long-month-day-year":g0,"long-month-day-year-short-time":{...g0,..._s},"long-month-day-year-short-time-24":{...g0,..._s,hour12:!1},"long-month-day-year-long-time":{...g0,...en},"long-month-day-year-long-time-24":{...g0,...en,hour12:!1},"day-short-month-year":v0,"day-short-month-year-short-time":{...v0,..._s},"day-short-month-year-short-time-24":{...v0,..._s,hour12:!1},"day-short-month-year-long-time":{...v0,...en},"day-short-month-year-long-time-24":{...v0,...en,hour12:!1},"long-date":b0,"long-date-short-time":{...b0,..._s},"long-date-short-time-24":{...b0,..._s,hour12:!1},"long-date-long-time":{...b0,...en},"long-date-long-time-24":{...b0,...en,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":_s,"long-time":en},SW=Sr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),ck={ar:"ar-u-nu-latn-ca-gregory"};let S3=new WeakMap,pk=Kp["short-date-short-time"];function xW(e){const t=e||pk;let i=S3.get(t);if(!i){const r=Pn(),a=ck[r]||r;i=new Intl.DateTimeFormat(a,t),S3.set(t,i)}return i}function B1(e){return Kp[e]}function Gh(e,t){return xW(t).format(e)}function $W(e,t=Kp["short-date"]){return Gh(new Date(e),{...t,...a6,...wW})}function TW(e,t=Kp["short-time"]){return Gh(new Date(`1970-01-01T${e}Z`),{...t,...a6,...bW})}function IW(e,t=Kp["short-date-short-time"]){const i=st.fromISO(e,{setZone:!0}),r=Pn(),a=ck[r]??r;return i.toLocaleString({..._W,...t},{locale:a})}P4(()=>{S3=new WeakMap,pk=Kp["short-date-short-time"]});const EW={ar:"ar-u-nu-latn"};let Jy=new WeakMap,dk={};function MW(e){const t=e||dk;if(!Jy.has(t)){const i=Pn(),r=EW[Pn()]||i;Jy.set(t,new Intl.NumberFormat(r,e))}return Jy.get(t)}function AW(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function xf(e,t){return Object.is(e,-0)&&(e=0),MW(t).format(e)}P4(()=>{Jy=new WeakMap,dk={}});let _c=class extends Kt(pe){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(t){return xf(t,AW(this))}formatDate(t,i=!1){return this.dateFormat?Gh(t,{...B1(this.dateFormat),...i&&a6}):this.formatNumber(t)}formatDateOnly(t){const i=(this.dateFormat&&B1(this.dateFormat))??void 0;return $W(t,i)}formatTimeOnly(t){const i=(this.dateFormat&&B1(this.dateFormat))??void 0;return TW(t,i)}formatTimestamp(t){const i=(this.dateFormat&&B1(this.dateFormat))??void 0;return IW(t,i)}formatRasterPixelValue(t){return t.includes("-")?t:t.trim().includes(",")?this._formatDelimitedString(t,",",", "):t.trim().includes(";")?this._formatDelimitedString(t,";","; "):t.trim().includes(" ")?this._formatDelimitedString(t," "," "):this.formatNumber(Number(t))}_formatDelimitedString(t,i,r){return t&&i&&r?t.trim().split(i).map(a=>this.formatNumber(Number(a))).join(r):t}};b([je(SW)],_c.prototype,"dateFormat",void 0),b([S({type:Boolean,json:{write:!0}})],_c.prototype,"digitSeparator",void 0),b([S({type:Ot,json:{write:!0}})],_c.prototype,"places",void 0),_c=b([B("esri.popup.support.FieldInfoFormat")],_c);const V0=_c;var x3;let an=x3=class extends pe{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new x3({fieldName:this.fieldName,format:this.format?re(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};b([S({type:String,json:{write:!0}})],an.prototype,"fieldName",void 0),b([S({type:V0,json:{write:!0}})],an.prototype,"format",void 0),b([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],an.prototype,"isEditable",void 0),b([S({type:String,json:{write:!0}})],an.prototype,"label",void 0),b([je(new ut({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],an.prototype,"stringFieldOption",void 0),b([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],an.prototype,"statisticType",void 0),b([S({type:String,json:{write:!0}})],an.prototype,"tooltip",void 0),b([S({type:Boolean,json:{write:!0}})],an.prototype,"visible",void 0),an=x3=b([B("esri.popup.FieldInfo")],an);const l6=an;var $3;let Go=$3=class extends ou{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new $3(re({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};b([S({type:Object,json:{write:!0}})],Go.prototype,"attributes",void 0),b([S({type:String,json:{write:!0}})],Go.prototype,"description",void 0),b([S({type:[l6]})],Go.prototype,"fieldInfos",void 0),b([Se("fieldInfos")],Go.prototype,"writeFieldInfos",null),b([S({type:String,json:{write:!0}})],Go.prototype,"title",void 0),b([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Go.prototype,"type",void 0),Go=$3=b([B("esri.popup.content.FieldsContent")],Go);const $f=Go;let Ou=class extends pe{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};b([S({type:String,json:{write:!0}})],Ou.prototype,"altText",void 0),b([S({type:String,json:{write:!0}})],Ou.prototype,"caption",void 0),b([S({type:String,json:{write:!0}})],Ou.prototype,"title",void 0),b([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),Ou=b([B("esri.popup.content.mixins.MediaInfo")],Ou);const u6=Ou;var T3;let Sc=T3=class extends De{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new T3({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};b([S()],Sc.prototype,"fieldName",void 0),b([S()],Sc.prototype,"tooltip",void 0),b([S()],Sc.prototype,"value",void 0),Sc=T3=b([B("esri.popup.content.support.ChartMediaInfoValueSeries")],Sc);const kW=Sc;var I3;let Pu=I3=class extends pe{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new I3({fields:re(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};b([S({type:[String],json:{write:!0}})],Pu.prototype,"fields",void 0),b([S({type:String,json:{write:!0}})],Pu.prototype,"normalizeField",void 0),b([S({type:[kW],json:{read:!1}})],Pu.prototype,"series",void 0),b([S({type:String,json:{write:!0}})],Pu.prototype,"tooltipField",void 0),Pu=I3=b([B("esri.popup.content.support.ChartMediaInfoValue")],Pu);const OW=Pu;let G0=class extends u6{constructor(t){super(t),this.type=null,this.value=null}};b([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],G0.prototype,"type",void 0),b([S({type:OW,json:{write:!0}})],G0.prototype,"value",void 0),G0=b([B("esri.popup.content.mixins.ChartMediaInfo")],G0);const Wv=G0,Jv=Sr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var E3;let Ky=E3=class extends Wv{constructor(e){super(e),this.type="bar-chart"}clone(){return new E3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Jv.write}})],Ky.prototype,"type",void 0),Ky=E3=b([B("esri.popup.content.BarChartMediaInfo")],Ky);const fk=Ky;var M3;let Yy=M3=class extends Wv{constructor(e){super(e),this.type="column-chart"}clone(){return new M3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Jv.write}})],Yy.prototype,"type",void 0),Yy=M3=b([B("esri.popup.content.ColumnChartMediaInfo")],Yy);const yk=Yy;var A3;let q0=A3=class extends pe{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new A3({linkURL:this.linkURL,sourceURL:this.sourceURL})}};b([S({type:String,json:{write:!0}})],q0.prototype,"linkURL",void 0),b([S({type:String,json:{write:!0}})],q0.prototype,"sourceURL",void 0),q0=A3=b([B("esri.popup.content.support.ImageMediaInfoValue")],q0);const PW=q0;var k3;let xc=k3=class extends u6{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new k3({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};b([S({type:Number,json:{write:!0}})],xc.prototype,"refreshInterval",void 0),b([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],xc.prototype,"type",void 0),b([S({type:PW,json:{write:!0}})],xc.prototype,"value",void 0),xc=k3=b([B("esri.popup.content.ImageMediaInfo")],xc);const mk=xc;var O3;let Zy=O3=class extends Wv{constructor(e){super(e),this.type="line-chart"}clone(){return new O3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Jv.write}})],Zy.prototype,"type",void 0),Zy=O3=b([B("esri.popup.content.LineChartMediaInfo")],Zy);const gk=Zy;var P3;let Xy=P3=class extends Wv{constructor(e){super(e),this.type="pie-chart"}clone(){return new P3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Jv.write}})],Xy.prototype,"type",void 0),Xy=P3=b([B("esri.popup.content.PieChartMediaInfo")],Xy);const vk=Xy,bk={base:u6,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":fk,"column-chart":yk,"line-chart":gk,"pie-chart":vk,image:mk}};var C3;let ln=C3=class extends ou{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?mk.fromJSON(t):t.type==="barchart"?fk.fromJSON(t):t.type==="columnchart"?yk.fromJSON(t):t.type==="linechart"?gk.fromJSON(t):t.type==="piechart"?vk.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new C3(re({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};b([S()],ln.prototype,"activeMediaInfoIndex",void 0),b([S({type:Object,json:{write:!0}})],ln.prototype,"attributes",void 0),b([S({type:String,json:{write:!0}})],ln.prototype,"description",void 0),b([S({types:[bk]})],ln.prototype,"mediaInfos",void 0),b([me("mediaInfos")],ln.prototype,"readMediaInfos",null),b([Se("mediaInfos")],ln.prototype,"writeMediaInfos",null),b([S({type:String,json:{write:!0}})],ln.prototype,"title",void 0),b([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ln.prototype,"type",void 0),ln=C3=b([B("esri.popup.content.MediaContent")],ln);const Pg=ln;var N3;let U0=N3=class extends pe{constructor(e){super(e),this.field=null,this.order=null}clone(){return new N3({field:this.field,order:this.order})}};b([S({type:String,json:{write:!0}})],U0.prototype,"field",void 0),b([S({type:["asc","desc"],json:{write:!0}})],U0.prototype,"order",void 0),U0=N3=b([B("esri.popup.support.RelatedRecordsInfoFieldOrder")],U0);const h6=U0;let Xn=class extends Kt(ou){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};b([S({type:String,json:{write:!0}})],Xn.prototype,"description",void 0),b([S({type:Number,json:{type:Ot,write:!0}})],Xn.prototype,"displayCount",void 0),b([S({type:["list"],json:{write:!0}})],Xn.prototype,"displayType",void 0),b([S({type:[h6],json:{write:!0}})],Xn.prototype,"orderByFields",void 0),b([S({type:Number,json:{type:Ot,write:!0}})],Xn.prototype,"relationshipId",void 0),b([S({type:String,json:{write:!0}})],Xn.prototype,"title",void 0),b([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Xn.prototype,"type",void 0),Xn=b([B("esri.popup.content.RelationshipContent")],Xn);const Cg=Xn;var j3;let B0=j3=class extends ou{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new j3({text:this.text})}};b([S({type:String,json:{write:!0}})],B0.prototype,"text",void 0),b([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],B0.prototype,"type",void 0),B0=j3=b([B("esri.popup.content.TextContent")],B0);const Ng=B0,CW={base:null,key:"type",typeMap:{attachment:Sf,media:Pg,text:Ng,expression:Q4,field:$f,relationship:Cg}};var R3;let Cu=R3=class extends pe{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new R3({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};b([S({type:String,json:{write:!0}})],Cu.prototype,"name",void 0),b([S({type:String,json:{write:!0}})],Cu.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],Cu.prototype,"expression",void 0),b([S({type:["string","number"],json:{write:!0}})],Cu.prototype,"returnType",void 0),Cu=R3=b([B("esri.popup.ExpressionInfo")],Cu);const NW=Cu;var L3;let H0=L3=class extends pe{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new L3({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};b([S({type:Boolean,json:{write:!0}})],H0.prototype,"returnTopmostRaster",void 0),b([S({type:Boolean,json:{write:!0}})],H0.prototype,"showNoDataRecords",void 0),H0=L3=b([B("esri.popup.LayerOptions")],H0);const jW=H0;var D3;let W0=D3=class extends pe{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new D3({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?re(this.orderByFields):null})}};b([S({type:Boolean,json:{write:!0}})],W0.prototype,"showRelatedRecords",void 0),b([S({type:[h6],json:{write:!0}})],W0.prototype,"orderByFields",void 0),W0=D3=b([B("esri.popup.RelatedRecordsInfo")],W0);const RW=W0;var F3;let Ss=F3=class extends Up(De){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new F3({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};b([S()],Ss.prototype,"active",void 0),b([S()],Ss.prototype,"className",void 0),b([S()],Ss.prototype,"disabled",void 0),b([S()],Ss.prototype,"icon",void 0),b([S()],Ss.prototype,"id",void 0),b([S()],Ss.prototype,"indicator",void 0),b([S()],Ss.prototype,"title",void 0),b([S()],Ss.prototype,"type",void 0),b([S()],Ss.prototype,"visible",void 0),Ss=F3=b([B("esri.support.actions.ActionBase")],Ss);const Xf=Ss;var z3;let Qy=z3=class extends Xf{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new z3({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};b([S()],Qy.prototype,"image",void 0),Qy=z3=b([B("esri.support.Action.ActionButton")],Qy);const wk=Qy;var V3;let J0=V3=class extends Xf{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new V3({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};b([S()],J0.prototype,"image",void 0),b([S()],J0.prototype,"value",void 0),J0=V3=b([B("esri.support.Action.ActionToggle")],J0);const _k=J0,LW="esri.PopupTemplate",DW=fe.getLogger(LW),w0="relationships/",g7="expression/",FW=Le.ofType({key:"type",defaultKeyValue:"button",base:Xf,typeMap:{button:wk,toggle:_k}}),zW={base:ou,key:"type",typeMap:{media:Pg,custom:vB,text:Ng,attachments:Sf,fields:$f,expression:Q4,relationship:Cg}},VW=["attachments","fields","media","text","expression","relationship"];let Di=class extends Kt(pe){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>_o(zW,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ia(t)?t:(DW.error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(t,i,r,a){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(d=>VW.includes(d.type)).map(d=>d&&d.toJSON(a)),i.popupElements.forEach(d=>{d.type==="attachments"?this._writeAttachmentContent(i):d.type==="media"?this._writeMediaContent(d,i):d.type==="text"?this._writeTextContent(d,i):d.type==="relationship"&&this._writeRelationshipContent(d,i)})):i.description=t}writeFieldInfos(t,i,r,a){const{content:d}=this,y=Array.isArray(d)?d:null;if(t){const m=y?y.filter($=>$.type==="fields"):[],_=m.length&&m.every($=>{var M;return(M=$.fieldInfos)==null?void 0:M.length});i.fieldInfos=t.filter(Boolean).map($=>{const M=$.toJSON(a);return _&&(M.visible=!1),M})}if(y)for(const m of y)m.type==="fields"&&this._writeFieldsContent(m,i)}writeLayerOptions(t,i,r,a){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(a)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),_f(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=re(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(a=>{const d=i.fieldInfos.find(y=>y.fieldName.toLowerCase()===a.fieldName.toLowerCase());d?d.visible=!0:i.fieldInfos.push(a)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var d,y;const r=((d=t.orderByFields)==null?void 0:d.map(m=>this._toFieldOrderJSON(m,t.relationshipId)))||[],a=[...((y=i.relatedRecordsInfo)==null?void 0:y.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(a==null?void 0:a.length)&&{orderByFields:a}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=re(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const a={description:!1,mediaInfos:!1};return r.map(d=>d.type==="media"?(d.mediaInfos||!i||a.mediaInfos||(d.mediaInfos=i,a.mediaInfos=!0),Pg.fromJSON(d)):d.type==="text"?(d.text||!t||a.description||(d.text=t,a.description=!0),Ng.fromJSON(d)):d.type==="attachments"?Sf.fromJSON(d):d.type==="fields"?$f.fromJSON(d):d.type==="expression"?Q4.fromJSON(d):d.type==="relationship"?Cg.fromJSON(d):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!(i!=null&&i.startsWith(w0)))return null;const a=i.replace(w0,"").split("/");if(a.length!==2)return null;const d=parseInt(a[0],10),y=a[1];return typeof d=="number"&&y?Cg.fromJSON({relationshipId:d,orderByFields:[{field:y,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:a}=t;return{field:`${w0}${i}/${a}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:a={showRelatedRecords:!1}}){const d=[];t?d.push(new Ng({text:t})):d.push(new $f),Array.isArray(i)&&i.length&&d.push(Pg.fromJSON({mediaInfos:i})),r&&d.push(Sf.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:m}=a;return y&&(m!=null&&m.length)&&m.forEach(_=>{const $=this._toRelationshipContent(_);$&&d.push($)}),d.length?d:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((a,d)=>[...a,...this._getMediaInfoFields(d)],[])]}return i==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:i,title:r,value:a}=t,d=a||{},{fields:y,normalizeField:m,tooltipField:_,sourceURL:$,linkURL:M}=d,A=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames($),...this._extractFieldNames(M),...y??[]];return m&&A.push(m),_&&A.push(_),A}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,a)=>[...r,...a.type==="expression"&&a.expressionInfo?[a.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(a=>Rr(t,i,a.expression)))}_getFieldInfoFields(t){return t?t.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(w0)&&!i.startsWith(g7)):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:a}=t,d=a==="button"||a==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(d)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||typeof t!="string")return[];const i=/{[^}]*}/g,r=t.match(i);if(!r)return[];const a=/\{(\w+):.+\}/,d=r.filter(y=>!(y.indexOf(`{${w0}`)===0||y.indexOf(`{${g7}`)===0)).map(y=>y.replace(a,"{$1}"));return d?d.map(y=>y.slice(1,-1)):[]}};b([S({type:FW})],Di.prototype,"actions",void 0),b([S()],Di.prototype,"content",void 0),b([Tt("content")],Di.prototype,"castContent",null),b([me("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Di.prototype,"readContent",null),b([Se("content",{popupElements:{type:Le.ofType(CW)},showAttachments:{type:Boolean},mediaInfos:{type:Le.ofType(bk)},description:{type:String},relatedRecordsInfo:{type:RW}})],Di.prototype,"writeContent",null),b([S({type:[NW],json:{write:!0}})],Di.prototype,"expressionInfos",void 0),b([S({type:[l6]})],Di.prototype,"fieldInfos",void 0),b([Se("fieldInfos")],Di.prototype,"writeFieldInfos",null),b([S({type:jW})],Di.prototype,"layerOptions",void 0),b([Se("layerOptions")],Di.prototype,"writeLayerOptions",null),b([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Di.prototype,"lastEditInfoEnabled",void 0),b([S()],Di.prototype,"outFields",void 0),b([S()],Di.prototype,"overwriteActions",void 0),b([S()],Di.prototype,"returnGeometry",void 0),b([S({json:{type:String}})],Di.prototype,"title",void 0),b([Se("title")],Di.prototype,"writeTitle",null),Di=b([B("esri.PopupTemplate")],Di);const Yp=Di,v7=new ut({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let GW=0,$c=class extends pe{constructor(t){super(t),this.id="sym"+GW++,this.type=null,this.color=new et([0,0,0,1])}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};b([S({type:v7.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:v7.write}}})],$c.prototype,"type",void 0),b([S({type:et,json:{write:{allowNull:!0}}})],$c.prototype,"color",void 0),b([me("color")],$c.prototype,"readColor",null),$c=b([B("esri.symbols.Symbol")],$c);const Kr=$c;var G3;let Qa=G3=class extends Kr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const a=r.map(d=>{const y=d.valueExpressionInfo;return Rr(e,t,y.expression)});await Promise.all(a)}}}clone(){return new G3({data:re(this.data)})}hash(){return s4(JSON.stringify(this.data)).toString()}};b([S({json:{write:!1}})],Qa.prototype,"color",void 0),b([S({json:{write:!0}})],Qa.prototype,"data",void 0),b([me("data",["symbol"])],Qa.prototype,"readData",null),b([Se("data",{})],Qa.prototype,"writeData",null),b([je({CIMSymbolReference:"cim"},{readOnly:!0})],Qa.prototype,"type",void 0),Qa=G3=b([B("esri.symbols.CIMSymbol")],Qa);const Qf=Qa;let Tc=class extends pe{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};b([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Tc.prototype,"enabled",void 0),b([Se("enabled")],Tc.prototype,"writeEnabled",null),b([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Tc.prototype,"type",void 0),Tc=b([B("esri.symbols.Symbol3DLayer")],Tc);const Ao=Tc,qW=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,UW="screenUtils.toPt: input not recognized!",Sk=96;function xk(e){return e?e/72*Sk:0}function xa(e){return e?72*e/Sk:0}function mt(e){if(typeof e=="string"){const t=e.match(qW);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),a=e.charAt(0)==="-",d=r==="px"?xa(i):i;return a?-d:d}return console.warn(UW),null}return e}function jr(e=0,t=0){return{x:e,y:t}}function o1e(e=0,t=0){return[e,t]}function BW(e,t){const i=t.transparency!=null?wf(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new et([r[0]||0,r[1]||0,r[2]||0,i]):null}function HW(e,t){t.color=e.toJSON().slice(0,3);const i=Gv(e.a);i!==0&&(t.transparency=i)}const au={type:et,json:{type:[Ot],default:null,read:{source:["color","transparency"],reader:BW},write:{target:{color:{type:[Ot]},transparency:{type:Ot}},writer:HW}}},To={type:Number,cast:mt,json:{write:!0}};let Nu=class extends pe{constructor(t){super(t),this.color=new et([0,0,0,1]),this.extensionLength=0,this.size=xa(1)}clone(){}cloneProperties(){return{color:re(this.color),size:this.size,extensionLength:this.extensionLength}}};b([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Nu.prototype,"type",void 0),b([S(au)],Nu.prototype,"color",void 0),b([S({...To,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Nu.prototype,"extensionLength",void 0),b([S(To)],Nu.prototype,"size",void 0),Nu=b([B("esri.symbols.edges.Edges3D")],Nu);const c6=Nu;var q3;let em=q3=class extends c6{constructor(e){super(e),this.type="sketch"}clone(){return new q3(this.cloneProperties())}};b([je({sketch:"sketch"},{readOnly:!0})],em.prototype,"type",void 0),em=q3=b([B("esri.symbols.edges.SketchEdges3D")],em);const WW=em;var U3;let tm=U3=class extends c6{constructor(e){super(e),this.type="solid"}clone(){return new U3(this.cloneProperties())}};b([je({solid:"solid"},{readOnly:!0})],tm.prototype,"type",void 0),tm=U3=b([B("esri.symbols.support.SolidEdges3D")],tm);const JW=tm,$k={types:{key:"type",base:c6,typeMap:{solid:JW,sketch:WW}},json:{write:!0}};var B3;let zs=B3=class extends pe{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new B3(e)}};b([S(au)],zs.prototype,"color",void 0),zs=B3=b([B("esri.symbols.support.Symbol3DMaterial")],zs);var H3;let el=H3=class extends Ao{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new H3({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};b([je({Extrude:"extrude"},{readOnly:!0})],el.prototype,"type",void 0),b([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],el.prototype,"size",void 0),b([S({type:zs,json:{write:!0}})],el.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],el.prototype,"castShadows",void 0),b([S($k)],el.prototype,"edges",void 0),el=H3=b([B("esri.symbols.ExtrudeSymbol3DLayer")],el);const Tk=el;let K0=class extends Kr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};b([je({esriSLS:"simple-line"},{readOnly:!0})],K0.prototype,"type",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],K0.prototype,"width",void 0),K0=b([B("esri.symbols.LineSymbol")],K0);const KW=K0,YW=["begin","end","begin-end"],Ik=["arrow","circle","square","diamond","cross","x"];var W3;let Qn=W3=class extends pe{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new W3({color:re(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};b([S({type:["begin","end","begin-end"],json:{write:!0}})],Qn.prototype,"placement",void 0),b([je({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],Qn.prototype,"type",void 0),b([S({type:Ik})],Qn.prototype,"style",void 0),b([Se("style")],Qn.prototype,"writeStyle",null),b([S({type:et,value:null,json:{write:{allowNull:!0}}})],Qn.prototype,"color",null),b([me("color")],Qn.prototype,"readColor",null),b([Se("color")],Qn.prototype,"writeColor",null),Qn=W3=b([B("esri.symbols.LineSymbolMarker")],Qn);const ZW=Qn;var J3;const hb=new ut({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let qo=J3=class extends KW{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,a,d){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=mt(i)),r!=null&&(y.cap=r),a!=null&&(y.join=a),d!=null&&(y.miterLimit=mt(d)),y}clone(){var e;return new J3({color:re(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};b([je({esriSLS:"simple-line"},{readOnly:!0})],qo.prototype,"type",void 0),b([S({type:hb.apiValues,json:{read:hb.read,write:hb.write}})],qo.prototype,"style",void 0),b([S({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],qo.prototype,"cap",void 0),b([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],qo.prototype,"join",void 0),b([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":ZW}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],qo.prototype,"marker",void 0),b([S({type:Number,json:{read:!1,write:!1}})],qo.prototype,"miterLimit",void 0),qo=J3=b([B("esri.symbols.SimpleLineSymbol")],qo);const Hs=qo;let Y0=class extends Kr{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};b([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Hs}},json:{default:null,write:!0}})],Y0.prototype,"outline",void 0),b([S({type:["simple-fill","picture-fill"],readOnly:!0})],Y0.prototype,"type",void 0),Y0=b([B("esri.symbols.FillSymbol")],Y0);const Ek=Y0;let im=class extends pe{constructor(t){super(t)}clone(){}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],im.prototype,"type",void 0),im=b([B("esri.symbols.patterns.LinePattern3D")],im);const Mk=im,XW=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var K3;const QW=Sr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Z0=K3=class extends Mk{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new K3(e)}};b([S({type:["style"]})],Z0.prototype,"type",void 0),b([je(QW),S({type:XW})],Z0.prototype,"style",void 0),Z0=K3=b([B("esri.symbols.patterns.LineStylePattern3D")],Z0);const p6=Z0;let rm=class extends pe{constructor(t){super(t)}clone(){}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],rm.prototype,"type",void 0),rm=b([B("esri.symbols.patterns.Pattern3D")],rm);const Ak=rm,eJ=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Y3;let X0=Y3=class extends Ak{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Y3(e)}};b([S({type:["style"]})],X0.prototype,"type",void 0),b([S({type:eJ,json:{read:!0,write:!0}})],X0.prototype,"style",void 0),X0=Y3=b([B("esri.symbols.patterns.StylePattern3D")],X0);const kk=X0,tJ={types:{key:"type",base:Ak,typeMap:{style:kk}},json:{write:!0}},Ok={types:{key:"type",base:Mk,typeMap:{style:p6}},json:{write:!0}},Bd=new et("white");new et("black");const iJ=new et([255,255,255,0]);function rJ(e){return e.r===0&&e.g===0&&e.b===0}var Z3;let Hd=Z3=class extends zs{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new Z3(e)}};b([je({multiply:"multiply",replace:"replace",tint:"tint"})],Hd.prototype,"colorMixMode",void 0),Hd=Z3=b([B("esri.symbols.support.Symbol3DFillMaterial")],Hd);function d6(e=uJ){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function f6(e,t,i,r,a,d,y=d6()){return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=a,y[5]=d,y}function p1e(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new gt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function d1e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function f1e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function sJ(e){return e[0]>=e[3]?0:e[3]-e[0]}function nJ(e){return e[1]>=e[4]?0:e[4]-e[1]}function oJ(e){return e[2]>=e[5]?0:e[5]-e[2]}function y1e(e,t=[0,0,0]){return t[0]=sJ(e),t[1]=nJ(e),t[2]=oJ(e),t}function m1e(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function g1e(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function aJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function v1e(e){return e?aJ(e,b7):d6(b7)}function b1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function lJ(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=a,e[5]=Number.POSITIVE_INFINITY,e}function X3(e){return e.length===6}function w1e(e,t,i){if(e==null||t==null)return e===t;if(!X3(e)||!X3(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const b7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],uJ=[0,0,0,0,0,0];d6();const hJ=f6(-.5,-.5,-.5,.5,.5,.5),cJ=f6(-.5,-.5,0,.5,.5,1),pJ=f6(-.5,-.5,0,.5,.5,.5);function _1e(e){switch(e){case"sphere":case"cube":case"diamond":return hJ;case"cylinder":case"cone":case"inverted-cone":return cJ;case"tetrahedron":return pJ;default:return}}const y6=["butt","square","round"],dJ=[...y6,"none"],Pk=["miter","bevel","round"];var Q3;let ju=Q3=class extends pe{constructor(e){super(e),this.color=new et([0,0,0,1]),this.size=xa(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Q3(e)}};b([S(au)],ju.prototype,"color",void 0),b([S(To)],ju.prototype,"size",void 0),b([S(Ok)],ju.prototype,"pattern",void 0),b([S({type:y6,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ju.prototype,"patternCap",void 0),ju=Q3=b([B("esri.symbols.support.Symbol3DOutline")],ju);var sm;let Uo=sm=class extends Ao{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new sm(e)}static fromSimpleFillSymbol(e){var r,a,d;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new p6({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((a=e.outline)==null?void 0:a.color)??Bd).clone(),pattern:t};return t&&((d=e.outline)!=null&&d.cap)&&(i.patternCap=e.outline.cap),new sm({material:new Hd({color:(e.color??iJ).clone()}),pattern:e.style&&e.style!=="solid"?new kk({style:e.style}):null,outline:i})}};b([je({Fill:"fill"},{readOnly:!0})],Uo.prototype,"type",void 0),b([S({type:Hd,json:{write:!0}})],Uo.prototype,"material",void 0),b([S(tJ)],Uo.prototype,"pattern",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Uo.prototype,"castShadows",void 0),b([S({type:ju,json:{write:!0}})],Uo.prototype,"outline",void 0),b([S($k)],Uo.prototype,"edges",void 0),Uo=sm=b([B("esri.symbols.FillSymbol3DLayer")],Uo);const e1=Uo,fJ=["none","underline","line-through"],yJ=["normal","italic","oblique"],mJ=["normal","lighter","bold","bolder"],Ck={type:Number,cast:e=>{const t=Cs(e);return t===0?1:qs(t,.1,4)},nonNullable:!0},gJ=["left","right","center"],vJ=["baseline","top","middle","bottom"],Nk={type:gJ,nonNullable:!0},jk={type:vJ,nonNullable:!0},S1e=8;var e9;let Bo=e9=class extends pe{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return mt(e)}clone(){return new e9({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};b([S({type:fJ,json:{default:"none",write:!0}})],Bo.prototype,"decoration",void 0),b([S({type:String,json:{write:!0}})],Bo.prototype,"family",void 0),b([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Bo.prototype,"size",void 0),b([Tt("size")],Bo.prototype,"castSize",null),b([S({type:yJ,json:{default:"normal",write:!0}})],Bo.prototype,"style",void 0),b([S({type:mJ,json:{default:"normal",write:!0}})],Bo.prototype,"weight",void 0),Bo=e9=b([B("esri.symbols.Font")],Bo);const Kv=Bo;function Zp(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=js(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=_4(e,t.portalItem.itemUrl);r!=null&&bJ.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return t9(e,t&&t.portal)}function t1(e,t,i=Tf.YES){if(e==null)return e;!us(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=js(e);if(t){const a=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(a){const d=t9(a,t.portal),y=t9(r,t.portal);r=_4(y,d,d),r!=null&&r!==y&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=Lk(r,t==null?void 0:t.portal),us(r)&&(r=An(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!us(r)&&!Yh(r)&&i===Tf.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function Yv(e,t,i){return Zp(e,i)}function Kl(e,t,i,r){const a=t1(e,r);a!==void 0&&(t[i]=a)}const Rk=/\/items\/([^\/]+)\/resources\/(.*)/,bJ=/^\.\/resources\//;function wJ(e){const t=(e==null?void 0:e.match(Rk))??null;return(t==null?void 0:t[1])??null}function _J(e){const t=(e==null?void 0:e.match(Rk))??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:y,extension:m}=yx(i);return{prefix:null,filename:y,extension:m}}const{path:a,extension:d}=yx(i.slice(r+1));return{prefix:i.slice(0,r),filename:a,extension:d}}function Lk(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Bw(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function t9(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=g4();return $p(r,`${r.scheme}://${i}`)?Bw(e,t.portalHostname,i):Bw(e,i,t.portalHostname)}var Tf;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Tf||(Tf={}));const x1e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Tf},ensureMainOnlineDomain:Lk,fromJSON:Zp,itemIdFromResourceUrl:wJ,prefixAndFilenameFromResourceUrl:_J,read:Yv,toJSON:t1,write:Kl},Symbol.toStringTag,{value:"Module"}));var i9;const SJ=Sr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Ru=i9=class extends pe{constructor(e){super(e)}readHref(e,t,i){return e?Zp(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Yh(e)?t.dataURI=e:(t.href=t1(e,r),us(t.href)&&(t.href=An(t.href))))}clone(){return new i9({href:this.href,primitive:this.primitive})}};b([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Ru.prototype,"href",void 0),b([me("href")],Ru.prototype,"readHref",null),b([Se("href",{href:{type:String},dataURI:{type:String}})],Ru.prototype,"writeHref",null),b([je(SJ)],Ru.prototype,"primitive",void 0),Ru=i9=b([B("esri.symbols.support.IconSymbol3DLayerResource")],Ru);const $1e="circle";var r9;let rp=r9=class extends De{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new r9({x:this.x,y:this.y})}};b([S({type:Number})],rp.prototype,"x",void 0),b([S({type:Number})],rp.prototype,"y",void 0),rp=r9=b([B("esri.symbols.support.Symbol3DAnchorPosition2D")],rp);var s9;let Q0=s9=class extends pe{constructor(e){super(e),this.color=new et([0,0,0,1]),this.size=xa(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new s9(e)}};b([S(au)],Q0.prototype,"color",void 0),b([S(To)],Q0.prototype,"size",void 0),Q0=s9=b([B("esri.symbols.support.Symbol3DIconOutline")],Q0);var Ic;const Dk="esri.symbols.IconSymbol3DLayer";let eo=Ic=class extends Ao{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Ic({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Bd,i=w7(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Bd).clone()}:null;return new Ic({size:e.size,resource:{primitive:$J(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||rJ(e.color)?Bd:e.color,i=w7(e);return new Ic({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Ic({resource:{href:ME({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function w7(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=_7(e.xoffset),a=_7(e.yoffset);return(r||a)&&t&&i?{x:-r/t,y:a/i}:null}function _7(e){return isFinite(e)?e:0}b([S({type:zs,json:{write:!0}})],eo.prototype,"material",void 0),b([S({type:Ru,json:{write:!0}})],eo.prototype,"resource",void 0),b([je({Icon:"icon"},{readOnly:!0})],eo.prototype,"type",void 0),b([S(To)],eo.prototype,"size",void 0),b([je({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],eo.prototype,"anchor",void 0),b([S({type:rp,json:{type:[Number],read:{reader:e=>new rp({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],eo.prototype,"anchorPosition",void 0),b([S({type:Q0,json:{write:!0}})],eo.prototype,"outline",void 0),eo=Ic=b([B(Dk)],eo);const xJ={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function $J(e){return xJ[e]||(fe.getLogger(Dk).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const gh=eo;let Lu=class extends Kt(pe){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Lu.prototype,"type",void 0),b([S({type:YW,json:{default:"begin-end",write:!0}})],Lu.prototype,"placement",void 0),b([S({type:Ik,json:{default:"arrow",write:!0}})],Lu.prototype,"style",void 0),b([S({type:et,json:{type:[Ot],default:null,write:!0}})],Lu.prototype,"color",void 0),Lu=b([B("esri.symbols.LineStyleMarker3D")],Lu);const n9=Lu;var nm;let to=nm=class extends Ao{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=xa(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new nm(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??xa(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new p6({style:e.style}):null,material:new zs({color:(e.color||Bd).clone()}),marker:e.marker?new n9({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new nm(t)}};b([S({type:zs,json:{write:!0}})],to.prototype,"material",void 0),b([je({Line:"line"},{readOnly:!0})],to.prototype,"type",void 0),b([S({type:Pk,json:{write:!0,default:"miter"}})],to.prototype,"join",void 0),b([S({type:y6,json:{write:!0,default:"butt"}})],to.prototype,"cap",void 0),b([S(To)],to.prototype,"size",void 0),b([S(Ok)],to.prototype,"pattern",void 0),b([S({types:{key:"type",base:n9,typeMap:{style:n9}},json:{write:!0}})],to.prototype,"marker",void 0),to=nm=b([B("esri.symbols.LineSymbol3DLayer")],to);const i1=to;var o9;const TJ=Sr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let ed=o9=class extends pe{clone(){return new o9({href:this.href,primitive:this.primitive})}};b([S({type:String,json:{read:Yv,write:Kl}})],ed.prototype,"href",void 0),b([je(TJ)],ed.prototype,"primitive",void 0),ed=o9=b([B("esri.symbols.support.ObjectSymbol3DLayerResource")],ed);const I1e="sphere";var a9;let hh=a9=class extends De{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new a9({x:this.x,y:this.y,z:this.z})}};b([S({type:Number})],hh.prototype,"x",void 0),b([S({type:Number})],hh.prototype,"y",void 0),b([S({type:Number})],hh.prototype,"z",void 0),hh=a9=b([B("esri.symbols.support.Symbol3DAnchorPosition3D")],hh);var l9;let fr=l9=class extends Ao{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new l9({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};b([S({type:zs,json:{write:!0}})],fr.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fr.prototype,"castShadows",void 0),b([S({type:ed,json:{write:!0}})],fr.prototype,"resource",void 0),b([je({Object:"object"},{readOnly:!0})],fr.prototype,"type",void 0),b([S({type:Number,json:{write:!0}})],fr.prototype,"width",void 0),b([S({type:Number,json:{write:!0}})],fr.prototype,"height",void 0),b([S({type:Number,json:{write:!0}})],fr.prototype,"depth",void 0),b([je({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],fr.prototype,"anchor",void 0),b([S({type:hh,json:{type:[Number],read:{reader:e=>new hh({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],fr.prototype,"anchorPosition",void 0),b([S({type:Number,json:{write:!0}})],fr.prototype,"heading",void 0),b([S({type:Number,json:{write:!0}})],fr.prototype,"tilt",void 0),b([S({type:Number,json:{write:!0}})],fr.prototype,"roll",void 0),b([S({readOnly:!0})],fr.prototype,"isPrimitive",null),fr=l9=b([B("esri.symbols.ObjectSymbol3DLayer")],fr);const m6=fr;var u9;let Er=u9=class extends Ao{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new u9({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};b([S({type:zs,json:{write:!0}})],Er.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Er.prototype,"castShadows",void 0),b([je({Path:"path"},{readOnly:!0})],Er.prototype,"type",void 0),b([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],Er.prototype,"profile",void 0),b([S({type:Pk,json:{write:!0,default:"miter"}})],Er.prototype,"join",void 0),b([S({type:dJ,json:{write:!0,default:"butt"}})],Er.prototype,"cap",void 0),b([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Er.prototype,"width",void 0),b([me("width",["width","size","height"])],Er.prototype,"readWidth",null),b([S({type:Number,json:{write:!0}})],Er.prototype,"height",void 0),b([me("height",["height","size","width"])],Er.prototype,"readHeight",null),b([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Er.prototype,"anchor",void 0),b([S({type:["heading","all"],json:{write:!0,default:"all"}})],Er.prototype,"profileRotation",void 0),Er=u9=b([B("esri.symbols.PathSymbol3DLayer")],Er);const g6=Er;var h9;let sp=h9=class extends pe{constructor(){super(...arguments),this.color=new et([0,0,0,1]),this.size=0}clone(){const e={color:re(this.color),size:this.size};return new h9(e)}};b([S(au)],sp.prototype,"color",void 0),b([S(To)],sp.prototype,"size",void 0),sp=h9=b([B("esri.symbols.support.Symbol3DHalo")],sp);let Wd=class extends Kt(pe){constructor(t){super(t),this.color=null}};b([S(au)],Wd.prototype,"color",void 0),Wd=b([B("esri.symbols.support.Symbol3DTextBackground")],Wd);var om;let Fr=om=class extends Ao{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const a={...r,textSymbol3D:!0};t.font=e.write({},a),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new om({enabled:this.enabled,font:this.font&&re(this.font),halo:this.halo&&re(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:re(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new om({font:e.font!=null?e.font.clone():new Kv,halo:IJ(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new zs({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Wd({color:e.backgroundColor.clone()}):null})}};function IJ(e,t){return e&&t!=null&&t>0?new sp({color:re(e),size:t}):null}b([S({type:Kv,json:{write:!0}})],Fr.prototype,"font",null),b([Se("font")],Fr.prototype,"writeFont",null),b([S({type:sp,json:{write:!0}})],Fr.prototype,"halo",void 0),b([S({...Nk,json:{default:"center",write:!0}})],Fr.prototype,"horizontalAlignment",void 0),b([S({...Ck,json:{default:1,write:!0}})],Fr.prototype,"lineHeight",void 0),b([S({type:zs,json:{write:!0}})],Fr.prototype,"material",void 0),b([S({type:Wd,json:{write:!0}})],Fr.prototype,"background",void 0),b([S(To)],Fr.prototype,"size",null),b([S({type:String,json:{write:!0}})],Fr.prototype,"text",void 0),b([je({Text:"text"},{readOnly:!0})],Fr.prototype,"type",void 0),b([S({...jk,json:{default:"baseline",write:!0}})],Fr.prototype,"verticalAlignment",void 0),Fr=om=b([B("esri.symbols.TextSymbol3DLayer")],Fr);const Xp=Fr;var c9;let tl=c9=class extends Ao{constructor(e){super(e),this.color=p9.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new c9({color:re(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};b([S({type:et,nonNullable:!0,json:{type:[Ot],write:(e,t,i)=>t[i]=e.toArray(et.AlphaMode.UNLESS_OPAQUE),default:()=>p9.clone(),defaultEquals:e=>e.toCss(!0)===p9.toCss(!0)}})],tl.prototype,"color",void 0),b([je({Water:"water"},{readOnly:!0})],tl.prototype,"type",void 0),b([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],tl.prototype,"waterbodySize",void 0),b([S({type:Number,json:{write:!0,default:null}})],tl.prototype,"waveDirection",void 0),b([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],tl.prototype,"waveStrength",void 0),tl=c9=b([B("esri.symbols.WaterSymbol3DLayer")],tl);const p9=new et([0,119,190]),Fk=tl;var d9;let Du=d9=class extends De{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new d9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};b([S({type:String})],Du.prototype,"name",void 0),b([S({type:String})],Du.prototype,"styleUrl",void 0),b([S({type:String})],Du.prototype,"styleName",void 0),b([S({type:Wr})],Du.prototype,"portal",void 0),Du=d9=b([B("esri.symbols.support.StyleOrigin")],Du);const f9=Du;var y9;let Jd=y9=class extends De{constructor(){super(...arguments),this.url=""}clone(){return new y9({url:this.url})}};b([S({type:String})],Jd.prototype,"url",void 0),Jd=y9=b([B("esri.symbols.support.Thumbnail")],Jd);const zk={icon:gh,object:m6,line:i1,path:g6,fill:e1,extrude:Tk,text:Xp,water:Fk},EJ=Le.ofType({base:Ao,key:"type",typeMap:zk,errorContext:"symbol-layer"});let io=class extends Kr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||Le;this._set("symbolLayers",new r)}get color(){return null}set color(t){this.constructed&&fe.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Nh(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const a=Zp(t.styleUrl,r);return new f9({styleUrl:a,name:t.name})}if(t.styleName&&t.name)return new f9({portal:r&&r.portal||Wr.getDefault(),styleName:t.styleName,name:t.name});r&&r.messages&&r.messages.push(new Gs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,a){if(t.styleUrl&&t.name){let d=t1(t.styleUrl,a);us(d)&&(d=An(d)),i.styleOrigin={styleUrl:d,name:t.name}}else t.styleName&&t.name&&(t.portal&&a&&a.portal&&!IE(t.portal.restUrl,a.portal.restUrl)?a&&a.messages&&a.messages.push(new Gs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Ao||t&&zk[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};b([S({json:{read:!1,write:!1}})],io.prototype,"color",null),b([S({type:EJ,nonNullable:!0,json:{write:!0}}),Tt(yE)],io.prototype,"symbolLayers",null),b([S({type:f9})],io.prototype,"styleOrigin",void 0),b([me("styleOrigin")],io.prototype,"readStyleOrigin",null),b([Se("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],io.prototype,"writeStyleOrigin",null),b([S({type:Jd,json:{read:!1}})],io.prototype,"thumbnail",void 0),b([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],io.prototype,"type",void 0),io=b([B("esri.symbols.Symbol3D")],io);const Qp=io;let td=class extends pe{constructor(t){super(t),this.visible=!0}clone(){}};b([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],td.prototype,"type",void 0),b([S({readOnly:!0})],td.prototype,"visible",void 0),td=b([B("esri.symbols.callouts.Callout3D")],td);const Vk=td;var m9;let am=m9=class extends pe{constructor(){super(...arguments),this.color=new et("white")}clone(){return new m9({color:re(this.color)})}};b([S(au)],am.prototype,"color",void 0),am=m9=b([B("esri.symbols.callouts.LineCallout3DBorder")],am);const Gk=am;Object.freeze(Object.defineProperty({__proto__:null,default:Gk},Symbol.toStringTag,{value:"Module"}));var g9;let il=g9=class extends Vk{constructor(e){super(e),this.type="line",this.color=new et([0,0,0,1]),this.size=xa(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new g9({color:re(this.color),size:this.size,border:re(this.border)})}};b([je({line:"line"},{readOnly:!0})],il.prototype,"type",void 0),b([S(au)],il.prototype,"color",void 0),b([S(To)],il.prototype,"size",void 0),b([S({type:Gk,json:{write:!0}})],il.prototype,"border",void 0),b([S({readOnly:!0})],il.prototype,"visible",null),il=g9=b([B("esri.symbols.callouts.LineCallout3D")],il);const MJ=il;function v6(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function qk(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!v6(e)}const Uk={types:{key:"type",base:Vk,typeMap:{line:MJ}},json:{write:!0}};var v9;let Ec=v9=class extends pe{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new v9({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};b([S(To)],Ec.prototype,"screenLength",void 0),b([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Ec.prototype,"minWorldLength",void 0),b([S({type:Number,json:{write:!0}})],Ec.prototype,"maxWorldLength",void 0),Ec=v9=b([B("esri.symbols.support.Symbol3DVerticalOffset")],Ec);const Bk=Ec;var lm;const Hk=Le.ofType({base:null,key:"type",typeMap:{text:Xp}});let rl=lm=class extends Qp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Hk,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return qk(this)}hasVisibleVerticalOffset(){return v6(this)}clone(){return new lm({styleOrigin:re(this.styleOrigin),symbolLayers:re(this.symbolLayers),thumbnail:re(this.thumbnail),callout:re(this.callout),verticalOffset:re(this.verticalOffset)})}static fromTextSymbol(e){return new lm({symbolLayers:[Xp.fromTextSymbol(e)]})}};b([S({type:Bk,json:{write:!0}})],rl.prototype,"verticalOffset",void 0),b([S(Uk)],rl.prototype,"callout",void 0),b([S({json:{read:!1,write:!1}})],rl.prototype,"styleOrigin",void 0),b([S({type:Hk})],rl.prototype,"symbolLayers",void 0),b([je({LabelSymbol3D:"label-3d"},{readOnly:!0})],rl.prototype,"type",void 0),rl=lm=b([B("esri.symbols.LabelSymbol3D")],rl);const Zv=rl;var um;const Wk=Le.ofType({base:null,key:"type",typeMap:{line:i1,path:g6}}),AJ=Le.ofType({base:null,key:"type",typeMap:{line:i1,path:g6}});let id=um=class extends Qp{constructor(e){super(e),this.symbolLayers=new Wk,this.type="line-3d"}clone(){return new um({styleOrigin:re(this.styleOrigin),symbolLayers:re(this.symbolLayers),thumbnail:re(this.thumbnail)})}static fromSimpleLineSymbol(e){return new um({symbolLayers:[i1.fromSimpleLineSymbol(e)]})}};b([S({type:Wk,json:{type:AJ}})],id.prototype,"symbolLayers",void 0),b([je({LineSymbol3D:"line-3d"},{readOnly:!0})],id.prototype,"type",void 0),id=um=b([B("esri.symbols.LineSymbol3D")],id);const Xv=id;let sl=class extends Kr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};b([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],sl.prototype,"angle",void 0),b([S({type:["simple-marker","picture-marker"],readOnly:!0})],sl.prototype,"type",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],sl.prototype,"xoffset",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],sl.prototype,"yoffset",void 0),b([S({type:Number,cast:e=>e==="auto"?e:mt(e),json:{write:!0}})],sl.prototype,"size",void 0),sl=b([B("esri.symbols.MarkerSymbol")],sl);const Jk=sl;var hm;const Kk=Le.ofType({base:null,key:"type",typeMap:{fill:e1}});let rd=hm=class extends Qp{constructor(e){super(e),this.symbolLayers=new Kk,this.type="mesh-3d"}clone(){return new hm({styleOrigin:re(this.styleOrigin),symbolLayers:re(this.symbolLayers),thumbnail:re(this.thumbnail)})}static fromSimpleFillSymbol(e){return new hm({symbolLayers:[e1.fromSimpleFillSymbol(e)]})}};b([S({type:Kk})],rd.prototype,"symbolLayers",void 0),b([je({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],rd.prototype,"type",void 0),rd=hm=b([B("esri.symbols.MeshSymbol3D")],rd);const Qv=rd;function kJ(e,t,i){return t.imageData?ME({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Yk(t.url,i)}function Yk(e,t){var i;return PJ(t)&&!us(e)&&((i=t==null?void 0:t.layer)!=null&&i.parsedUrl)?wa(t.layer.parsedUrl.path,"images",e):Zp(e,t)}function OJ(e,t,i,r){if(Yh(e)){const a=gf(e);if(!a)return;t.contentType=a.mediaType,t.imageData=a.data,i&&i.imageData===t.imageData&&i.url&&Kl(i.url,t,"url",r)}else Kl(e,t,"url",r)}const Zk={json:{read:{source:["imageData","url"],reader:kJ},write:{writer(e,t,i,r){OJ(e,t,this.source,r)}}}},Xk={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=Yk(t.url,i)),r}}}};function PJ(e){var t,i;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((i=e.layer)==null?void 0:i.type)!=="stream")}var b9;let xs=b9=class extends Ek{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const a={};return e&&(a.url=e),t&&(a.outline=t),i!=null&&(a.width=mt(i)),r!=null&&(a.height=mt(r)),a}clone(){const e=new b9({color:re(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",re(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};b([je({esriPFS:"picture-fill"},{readOnly:!0})],xs.prototype,"type",void 0),b([S(Zk)],xs.prototype,"url",void 0),b([S({type:Number,json:{write:!0}})],xs.prototype,"xscale",void 0),b([S({type:Number,json:{write:!0}})],xs.prototype,"yscale",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],xs.prototype,"width",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],xs.prototype,"height",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],xs.prototype,"xoffset",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],xs.prototype,"yoffset",void 0),b([S(Xk)],xs.prototype,"source",void 0),xs=b9=b([B("esri.symbols.PictureFillSymbol")],xs);const Qk=xs;var w9;let un=w9=class extends Jk{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=mt(t)),i!=null&&(r.height=mt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new w9({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",re(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};b([S({json:{write:!1}})],un.prototype,"color",void 0),b([je({esriPMS:"picture-marker"},{readOnly:!0})],un.prototype,"type",void 0),b([S(Zk)],un.prototype,"url",void 0),b([S(Xk)],un.prototype,"source",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],un.prototype,"height",void 0),b([me("height",["height","size"])],un.prototype,"readHeight",null),b([S({type:Number,cast:mt,json:{write:!0}})],un.prototype,"width",void 0),b([S({json:{write:!1}})],un.prototype,"size",void 0),un=w9=b([B("esri.symbols.PictureMarkerSymbol")],un);const e2=un;var Fu;const eO=Le.ofType({base:null,key:"type",typeMap:{icon:gh,object:m6,text:Xp}});let zu=Fu=class extends Qp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new eO,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return qk(this)}hasVisibleVerticalOffset(){return v6(this)}clone(){return new Fu({verticalOffset:re(this.verticalOffset),callout:re(this.callout),styleOrigin:re(this.styleOrigin),symbolLayers:re(this.symbolLayers),thumbnail:re(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Fu({symbolLayers:[gh.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Fu({symbolLayers:[gh.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var r,a;if(((a=(r=e.data)==null?void 0:r.symbol)==null?void 0:a.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Fu(i!=null&&i.callout?{symbolLayers:[gh.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[gh.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Fu({symbolLayers:[Xp.fromTextSymbol(e)]})}};b([S({type:Bk,json:{write:!0}})],zu.prototype,"verticalOffset",void 0),b([S(Uk)],zu.prototype,"callout",void 0),b([S({type:eO,json:{origins:{"web-scene":{write:!0}}}})],zu.prototype,"symbolLayers",void 0),b([je({PointSymbol3D:"point-3d"},{readOnly:!0})],zu.prototype,"type",void 0),zu=Fu=b([B("esri.symbols.PointSymbol3D")],zu);const vh=zu;var sd;const tO=Le.ofType({base:null,key:"type",typeMap:{extrude:Tk,fill:e1,icon:gh,line:i1,object:m6,text:Xp,water:Fk}});let nd=sd=class extends Qp{constructor(e){super(e),this.symbolLayers=new tO,this.type="polygon-3d"}clone(){return new sd({styleOrigin:re(this.styleOrigin),symbolLayers:re(this.symbolLayers),thumbnail:re(this.thumbnail)})}static fromJSON(e){const t=new sd;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),r=t.symbolLayers.at(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new sd({symbolLayers:[e1.fromSimpleFillSymbol(e)]})}};b([S({type:tO,json:{write:!0}})],nd.prototype,"symbolLayers",void 0),b([je({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],nd.prototype,"type",void 0),nd=sd=b([B("esri.symbols.PolygonSymbol3D")],nd);const r1=nd;var _9;const cb=new ut({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Vu=_9=class extends Ek{constructor(...e){super(...e),this.color=new et([0,0,0,.25]),this.outline=new Hs,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new _9({color:re(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};b([S()],Vu.prototype,"color",void 0),b([S()],Vu.prototype,"outline",void 0),b([je({esriSFS:"simple-fill"},{readOnly:!0})],Vu.prototype,"type",void 0),b([S({type:cb.apiValues,json:{read:cb.read,write:cb.write}})],Vu.prototype,"style",void 0),Vu=_9=b([B("esri.symbols.SimpleFillSymbol")],Vu);const Xh=Vu;var S9;const pb=new ut({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ro=S9=class extends Jk{constructor(...e){super(...e),this.color=new et([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Hs}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const a={};return e&&(a.style=e),t!=null&&(a.size=mt(t)),i&&(a.outline=i),r&&(a.color=r),a}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new S9({angle:this.angle,color:re(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};b([S()],ro.prototype,"color",void 0),b([Se("color")],ro.prototype,"writeColor",null),b([je({esriSMS:"simple-marker"},{readOnly:!0})],ro.prototype,"type",void 0),b([S()],ro.prototype,"size",void 0),b([S({type:pb.apiValues,json:{read:pb.read,write:pb.write}})],ro.prototype,"style",void 0),b([S({type:String,json:{write:!0}})],ro.prototype,"path",null),b([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Hs}},json:{default:null,write:!0}})],ro.prototype,"outline",void 0),ro=S9=b([B("esri.symbols.SimpleMarkerSymbol")],ro);const lu=ro;var x9;let ei=x9=class extends Kr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Kv,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return mt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new x9({angle:this.angle,backgroundColor:re(this.backgroundColor),borderLineColor:re(this.borderLineColor),borderLineSize:this.borderLineSize,color:re(this.color),font:this.font&&this.font.clone(),haloColor:re(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};b([S({type:et,json:{write:!0}})],ei.prototype,"backgroundColor",void 0),b([S({type:et,json:{write:!0}})],ei.prototype,"borderLineColor",void 0),b([S({type:Number,json:{write:!0},cast:mt})],ei.prototype,"borderLineSize",void 0),b([S({type:Kv,json:{write:!0}})],ei.prototype,"font",void 0),b([S({...Nk,json:{write:!0}})],ei.prototype,"horizontalAlignment",void 0),b([S({type:Boolean,json:{write:!0}})],ei.prototype,"kerning",void 0),b([S({type:et,json:{write:!0}})],ei.prototype,"haloColor",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],ei.prototype,"haloSize",void 0),b([S({type:Boolean,json:{write:!0}})],ei.prototype,"rightToLeft",void 0),b([S({type:Boolean,json:{write:!0}})],ei.prototype,"rotated",void 0),b([S({type:String,json:{write:!0}})],ei.prototype,"text",void 0),b([je({esriTS:"text"},{readOnly:!0})],ei.prototype,"type",void 0),b([S({...jk,json:{write:!0}})],ei.prototype,"verticalAlignment",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],ei.prototype,"xoffset",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],ei.prototype,"yoffset",void 0),b([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ei.prototype,"angle",void 0),b([S({type:Number,json:{write:!0}})],ei.prototype,"width",void 0),b([S({type:Number})],ei.prototype,"lineWidth",void 0),b([Se("lineWidth")],ei.prototype,"writeLineWidth",null),b([Tt("lineWidth")],ei.prototype,"castLineWidth",null),b([S(Ck)],ei.prototype,"lineHeight",void 0),b([Se("lineHeight")],ei.prototype,"writeLineHeight",null),ei=x9=b([B("esri.symbols.TextSymbol")],ei);const e0=ei;var $9;let hn=$9=class extends Kr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Wr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new $9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=t!=null?t.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const m=r&&i.get(r);if(m)return m.clone()}const{resolveWebStyleSymbol:a}=await be(()=>import("./webStyleSymbolUtils-71af9c5e.js"),["assets/webStyleSymbolUtils-71af9c5e.js","assets/devEnvironmentUtils-5002a058.js"]);Jt(t);const d=a(this,{portal:this.portal},e,t);d.catch(m=>{fe.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",m)});const y=await d;return e==="webRef"&&y.type==="point-3d"||e==="cimRef"&&y.type==="cim"?(i!=null&&i.set(r,y.clone()),y):null}};b([S({json:{write:!1}})],hn.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],hn.prototype,"styleName",void 0),b([S({type:Wr,json:{write:!1}})],hn.prototype,"portal",void 0),b([S({type:String,json:{read:Yv,write:Kl}})],hn.prototype,"styleUrl",void 0),b([S({type:Jd,json:{read:!1}})],hn.prototype,"thumbnail",void 0),b([S({type:String,json:{write:!0}})],hn.prototype,"name",void 0),b([je({styleSymbolReference:"web-style"},{readOnly:!0})],hn.prototype,"type",void 0),b([S()],hn.prototype,"_fetchCacheKey",null),hn=$9=b([B("esri.symbols.WebStyleSymbol")],hn);const Qh=hn;function O1e(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function T9(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Eh={base:Kr,key:"type",typeMap:{"simple-fill":Xh,"picture-fill":Qk,"picture-marker":e2,"simple-line":Hs,"simple-marker":lu,text:e0,"label-3d":Zv,"line-3d":Xv,"mesh-3d":Qv,"point-3d":vh,"polygon-3d":r1,"web-style":Qh,cim:Qf},errorContext:"symbol"},CJ={base:Kr,key:"type",typeMap:{"picture-marker":e2,"simple-marker":lu,text:e0,"web-style":Qh,cim:Qf},errorContext:"symbol"},NJ=Gp({types:Eh}),iO={base:Kr,key:"type",typeMap:{"simple-fill":Xh,"picture-fill":Qk,"picture-marker":e2,"simple-line":Hs,"simple-marker":lu,text:e0,"line-3d":Xv,"mesh-3d":Qv,"point-3d":vh,"polygon-3d":r1,"web-style":Qh,cim:Qf},errorContext:"symbol"},jJ={base:Kr,key:"type",typeMap:{text:e0,"label-3d":Zv},errorContext:"symbol"},S7={base:Kr,key:"type",typeMap:{"line-3d":Xv,"mesh-3d":Qv,"point-3d":vh,"polygon-3d":r1,"web-style":Qh,cim:Qf},errorContext:"symbol"},RJ={base:Kr,key:"type",typeMap:{"label-3d":Zv},errorContext:"symbol"},rO=_o(Eh);var I9;function LJ(e){if(!e)return null;const t={};for(const i in e){const r=_a(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function DJ(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let zr=I9=class extends Kt(pe){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Ld(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new I9({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&t.defaultPopupTemplate!=null)return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:DJ(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const a={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(a.action=r),e==="attributes"&&(a.attributeName=r),this.layer.graphicChanged(a)}};b([S({value:null,json:{read:LJ}})],zr.prototype,"aggregateGeometries",null),b([S({value:null})],zr.prototype,"attributes",null),b([S({value:null,types:nu,json:{read:_a}})],zr.prototype,"geometry",null),b([S({type:Boolean})],zr.prototype,"isAggregate",void 0),b([S({clonable:"reference"})],zr.prototype,"layer",void 0),b([S({type:Yp})],zr.prototype,"popupTemplate",void 0),b([S({clonable:"reference"})],zr.prototype,"sourceLayer",void 0),b([S({value:null,types:Eh})],zr.prototype,"symbol",null),b([S({type:Boolean,value:!0})],zr.prototype,"visible",null),zr=I9=b([B("esri.Graphic")],zr),function(e){e.generateUID=Ld}(zr||(zr={}));const Us=zr;let b6=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,a=0,d=!1){return(r-=a)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),d&&r===i&&(r=t),r+a}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return qs(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,a=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(a)?r:a}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function w6(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}w6(new b6(0,2*Math.PI));w6(new b6(-Math.PI,Math.PI));const FJ=w6(new b6(0,360));let Ho=class extends Kt(pe){constructor(...t){super(...t),this.position=new Ze([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(t,i,r,a){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const d={position:t};return i!=null&&(d.heading=i),r!=null&&(d.tilt=r),a!=null&&(d.fov=a),d}return t}writePosition(t,i,r,a){const d=t.clone();d.x=Cs(t.x||0),d.y=Cs(t.y||0),d.z=t.hasZ?Cs(t.z||0):t.z,i[r]=d.write({},a)}readPosition(t,i){const r=new Ze;return r.read(t,i),r.x=Cs(r.x||0),r.y=Cs(r.y||0),r.z=r.hasZ?Cs(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)}};b([S({type:Ze,json:{write:{isRequired:!0}}})],Ho.prototype,"position",void 0),b([Se("position")],Ho.prototype,"writePosition",null),b([me("position")],Ho.prototype,"readPosition",null),b([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Tt(e=>FJ.normalize(Cs(e)))],Ho.prototype,"heading",void 0),b([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Tt(e=>qs(Cs(e),-180,180))],Ho.prototype,"tilt",void 0),b([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ho.prototype,"fov",void 0),Ho=b([B("esri.Camera")],Ho);const zJ=Ho;var E9;let nl=E9=class extends pe{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new E9({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function db(){return{enabled:!this.camera}}b([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:db}}}}})],nl.prototype,"rotation",void 0),b([Tt("rotation")],nl.prototype,"castRotation",null),b([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:db}}}}})],nl.prototype,"scale",void 0),b([S({types:nu,json:{read:_a,write:!0,origins:{"web-scene":{read:_a,write:{overridePolicy:db}}}}})],nl.prototype,"targetGeometry",void 0),b([S({type:zJ,json:{write:!0}})],nl.prototype,"camera",void 0),nl=E9=b([B("esri.Viewpoint")],nl);const bo=nl;function ke(e,t,i={}){return _6(e,t,i,sO)}function Yl(e,t,i={}){return _6(e,t,i,nO)}function _6(e,t,i={},r){let a=null;const d=i.once?(y,m)=>{r(y)&&(ai(a),t(y,m))}:(y,m)=>{r(y)&&t(y,m)};if(a=FD(e,d,i.sync,i.equals),i.initial){const y=e();d(y,y)}return a}function Pp(e,t,i,r={}){let a=null,d=null,y=null;function m(){var M;a&&d&&(d.remove(),(M=r.onListenerRemove)==null||M.call(r,a),a=null,d=null)}function _(M){r.once&&r.once&&ai(y),i(M)}const $=ke(e,(M,A)=>{var P;m(),Tv(M)&&(a=M,d=Iv(M,t,_),(P=r.onListenerAdd)==null||P.call(r,M))},{sync:r.sync,initial:!0});return y=va(()=>{$.remove(),m()}),y}function S6(e,t){return VJ(e,nO,t)}function VJ(e,t,i){if(jn(i))return Promise.reject(li());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let a=null;function d(){a=ai(a)}return new Promise((y,m)=>{a=bv([Fs(i,()=>{d(),m(li())}),_6(e,_=>{d(),y(_)},{sync:!1,once:!0},t??sO)])})}function sO(e){return!0}function nO(e){return!!e}const t0={sync:!0},kt={initial:!0},aa={sync:!0,initial:!0};let jg=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new Pv,this._items=new Set}get length(){return Je(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Je(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Je(this._observable),yield*this._items}};const GJ={statsWorker:()=>be(()=>import("./statsWorker-def89749.js"),["assets/statsWorker-def89749.js","assets/quantizationUtils-fc51302a.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js"]),geometryEngineWorker:()=>be(()=>import("./geometryEngineWorker-74a3769b.js"),["assets/geometryEngineWorker-74a3769b.js","assets/geometryEngineJSON-ea076524.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>be(()=>import("./CSVSourceWorker-ebc467bb.js"),["assets/CSVSourceWorker-ebc467bb.js","assets/json-48e3ea08.js","assets/FeatureStore-3a6fef38.js","assets/BoundsStore-422fd2b4.js","assets/PooledRBush-b0b4b47d.js","assets/projectionSupport-c10c4c97.js","assets/timeSupport-77b1ed46.js","assets/QueryEngine-dd2a5dc6.js","assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-fc51302a.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js","assets/number-c0055d08.js"]),EdgeProcessingWorker:()=>be(()=>import("./EdgeProcessingWorker-906fa80b.js"),["assets/EdgeProcessingWorker-906fa80b.js","assets/InterleavedLayout-92bc2fc0.js","assets/BufferView-799e911f.js","assets/types-1305598a.js","assets/edgeProcessing-694c69aa.js","assets/deduplicate-95aca537.js","assets/Indices-00b9f4f6.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>be(()=>import("./ElevationSamplerWorker-3858e982.js"),["assets/ElevationSamplerWorker-3858e982.js","assets/PooledRBush-b0b4b47d.js","assets/georeference-d01362e5.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-d4474fd9.js","assets/MeshLocalVertexSpace-55bec386.js","assets/MeshGeoreferencedRelativeVertexSpace-2f6407fc.js","assets/quat-614e8411.js","assets/quatf64-3363c48e.js","assets/vec32-6396a3a3.js","assets/BufferView-799e911f.js"]),FeatureServiceSnappingSourceWorker:()=>be(()=>import("./FeatureServiceSnappingSourceWorker-83edbea8.js"),["assets/FeatureServiceSnappingSourceWorker-83edbea8.js","assets/FeatureStore-3a6fef38.js","assets/BoundsStore-422fd2b4.js","assets/PooledRBush-b0b4b47d.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/timeSupport-77b1ed46.js","assets/QueryEngine-dd2a5dc6.js","assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-fc51302a.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js","assets/byteSizeEstimations-7cf1c05d.js","assets/ByteSizeUnit-d4757d40.js"]),GeoJSONSourceWorker:()=>be(()=>import("./GeoJSONSourceWorker-671229f6.js"),["assets/GeoJSONSourceWorker-671229f6.js","assets/FeatureStore-3a6fef38.js","assets/BoundsStore-422fd2b4.js","assets/PooledRBush-b0b4b47d.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/timeSupport-77b1ed46.js","assets/QueryEngine-dd2a5dc6.js","assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-fc51302a.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js","assets/geojson-728fe22b.js","assets/sourceUtils-668d9dc0.js"]),LercWorker:()=>be(()=>import("./LercWorker-53cb2c4d.js"),[]),MemorySourceWorker:()=>be(()=>import("./MemorySourceWorker-ce62a019.js"),["assets/MemorySourceWorker-ce62a019.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-3a6fef38.js","assets/BoundsStore-422fd2b4.js","assets/PooledRBush-b0b4b47d.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/timeSupport-77b1ed46.js","assets/QueryEngine-dd2a5dc6.js","assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-fc51302a.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js","assets/sourceUtils-668d9dc0.js"]),PBFDecoderWorker:()=>be(()=>import("./PBFDecoderWorker-a09097d0.js"),[]),Pipeline:()=>be(()=>import("./Pipeline-1401cad9.js"),["assets/Pipeline-1401cad9.js","assets/QueryEngine-dd2a5dc6.js","assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/quantizationUtils-fc51302a.js","assets/timeSupport-77b1ed46.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js","assets/FeatureStore2D-74725c2f.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/definitions-8a2650b8.js","assets/visualVariablesUtils-466359eb.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-fd7043bc.js","assets/geojson-728fe22b.js","assets/createConnection-4f62c9cb.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>be(()=>import("./PointCloudWorker-e547c59a.js"),["assets/PointCloudWorker-e547c59a.js","assets/quat-614e8411.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-fec13c54.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-7baa5191.js"]),RasterWorker:()=>be(()=>import("./RasterWorker-40a2c567.js"),["assets/RasterWorker-40a2c567.js","assets/dataUtils-035fed75.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-eb49c023.js","assets/colorUtils-c0f43caf.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-17ff1b7c.js","assets/rasterProjectionHelper-e8ec5eca.js"]),SceneLayerSnappingSourceWorker:()=>be(()=>import("./SceneLayerSnappingSourceWorker-30f19d0b.js"),["assets/SceneLayerSnappingSourceWorker-30f19d0b.js","assets/lineSegment-ac2d0568.js","assets/sphere-4a69039e.js","assets/ByteSizeUnit-d4757d40.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-8b0bd9de.js","assets/InterleavedLayout-92bc2fc0.js","assets/BufferView-799e911f.js","assets/types-1305598a.js","assets/edgeProcessing-694c69aa.js","assets/deduplicate-95aca537.js","assets/Indices-00b9f4f6.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>be(()=>import("./SceneLayerWorker-56c2122a.js"),["assets/SceneLayerWorker-56c2122a.js","assets/MeshLocalVertexSpace-55bec386.js","assets/MeshGeoreferencedRelativeVertexSpace-2f6407fc.js","assets/vec32-6396a3a3.js","assets/sphere-4a69039e.js","assets/ByteSizeUnit-d4757d40.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>be(()=>import("./WFSSourceWorker-8e1e9829.js"),["assets/WFSSourceWorker-8e1e9829.js","assets/FeatureStore-3a6fef38.js","assets/BoundsStore-422fd2b4.js","assets/PooledRBush-b0b4b47d.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/timeSupport-77b1ed46.js","assets/QueryEngine-dd2a5dc6.js","assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-fc51302a.js","assets/utils-7a377acc.js","assets/generateRendererUtils-2a5a9690.js","assets/geojson-728fe22b.js","assets/sourceUtils-668d9dc0.js","assets/wfsUtils-1931fd9e.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>be(()=>import("./WorkerTileHandler-1b51ea4a.js"),["assets/WorkerTileHandler-1b51ea4a.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-19f91545.js","assets/definitions-8a2650b8.js","assets/StyleRepository-f4735dd5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-c0f43caf.js","assets/earcut-48db4b31.js","assets/BidiEngine-9a40f2f4.js"])};var Yi;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Yi||(Yi={}));let qJ=0;function oO(){return qJ++}function UJ(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function If(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function x6(e,t,i,r){if(t.type===Yi.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Yi.INVOKE&&t.type!==Yi.RESPONSE)return void e.postMessage(t);let a;if(UJ(i)?(a=x7(i.transferList),t.data=i.result):(a=x7(r),t.data=i),a){if(le("ff")){for(const d of a)if("byteLength"in d&&d.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Yi.INVOKE:throw y;case Yi.RESPONSE:return void x6(e,{type:Yi.RESPONSE,jobId:t.jobId,error:If(y)})}}}e.postMessage(t,a)}else e.postMessage(t)}function Ef(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function x7(e){if(!e||!e.length)return null;if(le("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!BJ(i));return t.length?t:null}function BJ(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}const{CLOSE:$7,ABORT:T7,INVOKE:I7,RESPONSE:_0,OPEN_PORT:E7,ON:HJ}=Yi,WJ=2;let JJ=class{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Yi.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Zl=class Mc{static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const a=new Mc(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=a),Mc.clients.set(a,r),i.port2}static loadWorker(t){const i=GJ[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new JJ(a=>this._onInvokeMessage(a)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:$7}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const a=r==null?void 0:r.signal,d=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new se("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=oO();return new Promise((m,_)=>{if(jn(a))return this._processWork(),void _(li());const $=Fs(a,()=>{const A=this._outJobs.get(y);A&&(this._outJobs.delete(y),this._processWork(),ai(A.abortHandle),this._post({type:T7,jobId:y}),_(li()))}),M={resolve:m,reject:_,abortHandle:$,debugInfo:t};this._outJobs.set(y,M),this._post({type:I7,jobId:y,methodName:t,abortable:a!=null},i,d)})}on(t,i){const r=new MessageChannel;function a(d){i(d.data)}return this._port.postMessage({type:Yi.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",a),r.port1.start(),{remove(){r.port1.postMessage({type:Yi.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",a)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:E7,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=WJ)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:a,resolver:d}=t;this.invoke(i,r,a).then(y=>d.resolve(y)).catch(y=>d.reject(y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{ai(t.abortHandle),t.reject(li(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=Ef(t);if(i)switch(i.type){case _0:this._onResponseMessage(i);break;case I7:this._invokeQueue.push(i);break;case T7:this._onAbortMessage(i);break;case $7:this._onCloseMessage();break;case E7:this._onOpenPortMessage(i);break;case HJ:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,a=i.get(r);this._invokeQueue.push(t),a&&(a.controller&&a.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Mc.clients.get(this)===t&&t.destroy(),Mc.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:a,abortable:d}=t,y=d?new AbortController:null,m=this._inJobs;let _,$=this._client,M=$[i];try{if(!M&&i&&i.includes(".")){const A=i.split(".");for(let P=0;P<A.length-1;P++)$=$[A[P]],M=$[A[P+1]]}if(typeof M!="function")throw new TypeError(`${i} is not a function`);_=M.call($,a,{client:this,signal:y?y.signal:null})}catch(A){return void this._post({type:_0,jobId:r,error:If(A)})}Ia(_)?(m.set(r,{controller:y,promise:_}),_.then(A=>{m.has(r)&&(m.delete(r),this._post({type:_0,jobId:r},A))},A=>{m.has(r)&&(m.delete(r),Jr(A)||this._post({type:_0,jobId:r,error:If(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:_0,jobId:r},_)}_onOpenPortMessage(t){new Mc(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,d=>{i.postMessage(d)}),a=Iv(t.port,"message",d=>{const y=Ef(d);(y==null?void 0:y.type)===Yi.CLOSE&&(a.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:a}=t,d=this._outJobs;if(!d.has(i))return;const y=d.get(i);d.delete(i),this._processWork(),ai(y.abortHandle),r?y.reject(se.fromJSON(JSON.parse(r))):y.resolve(a)}_post(t,i,r){return x6(this._port,t,i,r)}};Zl.kernelInfo={buildDate:BE,fullVersion:k4,revision:HE},Zl.clients=new Map;let KJ=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new jg}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,a)=>{let d=!0;const y=m=>{Jt(i.signal),d&&(d=!1,m())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let m=0;m<t.length;++m){const _=t[m];Ia(_)?this._clientPromises[m]=_.then($=>(this._clients[m]=new Zl($,i,()=>this._ongoingJobsQueue.pop()??null),y(r),this._clients[m]),()=>(y(a),null)):(this._clients[m]=new Zl(_,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[m]=Promise.resolve(this._clients[m]),y(r))}})}broadcast(t,i,r){const a=new Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d){const y=this._clientPromises[d];a[d]=y.then(m=>m==null?void 0:m.invoke(t,i,r))}return a}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(li(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(t,i,r){let a;Array.isArray(r)?(fe.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),a={transferList:r}):a=r;const d=Vs();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:a,resolver:d});for(let y=0;y<this._clientPromises.length;y++){const m=this._clients[y];m?m.jobAdded():this._clientPromises[y].then(_=>_==null?void 0:_.jobAdded())}return d.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>bv(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let a=0;a<this._clientPromises.length;++a)this._clientPromises[a].then(d=>{d&&(i[a]=d.openPort()),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}};const aO=fe.getLogger("esri.intl.substitute");function L1e(e,t,i={}){const{format:r={}}=i;return $v(e,a=>YJ(a,t,r))}function YJ(e,t,i){let r,a;const d=e.indexOf(":");if(d===-1?r=e.trim():(r=e.slice(0,d).trim(),a=e.slice(d+1).trim()),!r)return"";const y=Gf(r,t);if(y==null)return"";const m=(a?i==null?void 0:i[a]:null)??(i==null?void 0:i[r]);return m?ZJ(y,m):a?XJ(y,a):$6(y)}function ZJ(e,t){switch(t.type){case"date":return Gh(e,t.intlOptions);case"number":return xf(e,t.intlOptions);default:return aO.warn("missing format descriptor for key {key}"),$6(e)}}function XJ(e,t){switch(t.toLowerCase()){case"dateformat":return Gh(e);case"numberformat":return xf(e);default:return aO.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Gh(e):/^numberformat/i.test(t)?xf(e):$6(e)}}function $6(e){switch(typeof e){case"string":return e;case"number":return xf(e);case"boolean":return""+e;default:return e instanceof Date?Gh(e):""}}async function QJ(e,t,i,r){const a=t.exec(i);if(!a)throw new se("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const d=a[1]?`${a[1]}/`:"",y=a[2],m=YV(r),_=`${d}${y}.json`,$=m?`${d}${y}_${m}.json`:_;let M;try{M=await M7(e($))}catch(A){if($===_)throw new se("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{M=await M7(e(_))}catch(P){throw new se("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P})}}return M}async function M7(e){if(A7.fetchBundleAsset!=null)return A7.fetchBundleAsset(e);const t=await Vt(e,{responseType:"text"});return JSON.parse(t.data)}let eK=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let a;a=typeof r=="string"?d=>new URL(d,new URL(r,window.location.href)).href:r instanceof URL?d=>new URL(d,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=a,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return QJ(this.getAssetUrl,this.matcher,t,i)}};function tK(e){return new eK(e)}const A7={};KV(tK({pattern:"esri/",location:At}));const iK={};function rK(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=iK.baseUrl),t}let sK=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},cm=class{constructor(){this._dispatcher=new sK,this._workerPostMessage({type:Yi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){ig(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){ig(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=Ef(t);if(i&&i.type===Yi.OPEN){const{modulePath:r,jobId:a}=i;let d=await Zl.loadWorker(r);d||(d=await be(()=>import(r),[]));const y=Zl.connect(d);this._workerPostMessage({type:Yi.OPENED,jobId:a,data:y})}}};const M9=fe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:nK}=Yi,oK='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let H1,W1;const k7="Failed to create Worker. Fallback to execute module in main thread";async function aK(){if(!le("esri-workers")||(le("mozilla"),0))return O7(new cm);if(!H1&&!W1)try{const t=oK.split('"{CONFIGURATION}"').join(`'${lK()}'`);H1=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){W1=t||{}}let e;if(H1)try{e=new Worker(H1,{name:"esri-worker-"+uK++})}catch{M9.warn(k7,W1),e=new cm}else M9.warn(k7,W1),e=new cm;return O7(e)}async function O7(e){return new Promise(t=>{function i(a){const d=Ef(a);d&&d.type===nK&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(a){a.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),M9.warn("Failed to create Worker. Fallback to execute module in main thread",a),(e=new cm).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function lK(){let e;if($t.default!=null){const a={...$t};delete a.default,e=JSON.parse(JSON.stringify(a))}else e=JSON.parse(JSON.stringify($t));e.assetsPath=js(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?js(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Pn(),e.has={"esri-csp-restrictions":le("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":le("esri-2d-update-debug"),"esri-2d-log-updating":le("esri-2d-log-updating"),"featurelayer-pbf":le("featurelayer-pbf"),"featurelayer-simplify-thresholds":le("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":le("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":le("featurelayer-simplify-mobile-factor"),"esri-atomics":le("esri-atomics"),"esri-shared-array-buffer":le("esri-shared-array-buffer"),"esri-tiles-debug":le("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":le("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":le("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":le("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=js(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=js(e.workers.workerPath):e.workers.workerPath=js(At("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=$t.workers.loaderConfig,i=rK({baseUrl:t==null?void 0:t.baseUrl,locale:Pn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:BE,fullVersion:k4,revision:HE}})}let uK=0;const{ABORT:P7,INVOKE:hK,OPEN:cK,OPENED:pK,RESPONSE:S0}=Yi;let dK=class lO{static async create(t){const i=await aK();return new lO(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),fe.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,a=oO();return new Promise((d,y)=>{const m={resolve:d,reject:y,abortHandle:o4(r,()=>{this._outJobs.delete(a),this._post({type:P7,jobId:a})})};this._outJobs.set(a,m),this._post({type:cK,jobId:a,modulePath:t})})}_onMessage(t){const i=Ef(t);if(i)switch(i.type){case pK:this._onOpenedMessage(i);break;case S0:this._onResponseMessage(i);break;case P7:this._onAbortMessage(i);break;case hK:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,a=i.get(r);a&&(a.controller&&a.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:a,abortable:d}=t,y=d?new AbortController:null,m=this._inJobs,_=Jz[i];let $;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);$=_.call(null,a,{signal:y?y.signal:null})}catch(M){return void this._post({type:S0,jobId:r,error:If(M)})}Ia($)?(m.set(r,{controller:y,promise:$}),$.then(M=>{m.has(r)&&(m.delete(r),this._post({type:S0,jobId:r},M))},M=>{m.has(r)&&(m.delete(r),M||(M={message:"Error encountered at method"+i}),Jr(M)||this._post({type:S0,jobId:r,error:If(M||{message:`Error encountered at method ${i}`})}))})):this._post({type:S0,jobId:r},$)}_onOpenedMessage(t){const{jobId:i,data:r}=t,a=this._outJobs.get(i);a&&(this._outJobs.delete(i),ai(a.abortHandle),a.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:a}=t,d=this._outJobs.get(i);d&&(this._outJobs.delete(i),ai(d.abortHandle),r?d.reject(se.fromJSON(JSON.parse(r))):d.resolve(a))}_post(t,i,r){return x6(this.worker,t,i,r)}};const C7=le("host-browser")?Math.min(navigator.hardwareConcurrency-1,le("workers-pool-size")):0;let bh=le("esri-mobile")?Math.min(C7,3):C7;bh||(bh=le("safari")&&le("mac")?7:2);let N7=0;const pm=[];function fK(){hO()}async function J1(e,t){const i=new KJ;return await i.open(e,t),i}async function uO(e,t={}){if(typeof e!="string")throw new se("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(le("host-webworker")&&!le("esri-workers")&&(i="local"),i==="local"){let r=await Zl.loadWorker(e);r||(r=await be(()=>import(e),[])),Jt(t.signal);const a=t.client||r;return J1([Zl.connect(r)],{...t,client:a})}if(await hO(),Jt(t.signal),i==="dedicated"){const r=N7++%bh;return J1([await pm[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,bh);if(r<bh){const a=new Array(r);for(let d=0;d<r;++d){const y=N7++%bh;a[d]=pm[y].open(e,t)}return J1(a,t)}}return J1(pm.map(r=>r.open(e,t)),t)}let K1=null;async function hO(){if(K1)return K1;new AbortController;const e=[];for(let t=0;t<bh;t++){const i=dK.create(t).then(r=>(pm[t]=r,r));e.push(i)}return K1=Promise.all(e),K1}function yK(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function uu(e,t,i,r,a,d,y,m,_,$,M,A,P,j,L,F,V){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=d,e[5]=y,e[6]=m,e[7]=_,e[8]=$,e[9]=M,e[10]=A,e[11]=P,e[12]=j,e[13]=L,e[14]=F,e[15]=V,e}function s1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Aa(e,t){if(e===t){const i=t[1],r=t[2],a=t[3],d=t[6],y=t[7],m=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=d,e[11]=t[14],e[12]=a,e[13]=y,e[14]=m}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function mK(e,t){return cO(e,t)||s1(e),e}function cO(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],$=t[7],M=t[8],A=t[9],P=t[10],j=t[11],L=t[12],F=t[13],V=t[14],J=t[15],Q=i*m-r*y,Y=i*_-a*y,te=i*$-d*y,oe=r*_-a*m,ae=r*$-d*m,de=a*$-d*_,ve=M*F-A*L,Ie=M*V-P*L,Oe=M*J-j*L,Ne=A*V-P*F,Re=A*J-j*F,We=P*J-j*V;let Pe=Q*We-Y*Re+te*Ne+oe*Oe-ae*Ie+de*ve;return Pe?(Pe=1/Pe,e[0]=(m*We-_*Re+$*Ne)*Pe,e[1]=(a*Re-r*We-d*Ne)*Pe,e[2]=(F*de-V*ae+J*oe)*Pe,e[3]=(P*ae-A*de-j*oe)*Pe,e[4]=(_*Oe-y*We-$*Ie)*Pe,e[5]=(i*We-a*Oe+d*Ie)*Pe,e[6]=(V*te-L*de-J*Y)*Pe,e[7]=(M*de-P*te+j*Y)*Pe,e[8]=(y*Re-m*Oe+$*ve)*Pe,e[9]=(r*Oe-i*Re-d*ve)*Pe,e[10]=(L*ae-F*te+J*Q)*Pe,e[11]=(A*te-M*ae-j*Q)*Pe,e[12]=(m*Ie-y*Ne-_*ve)*Pe,e[13]=(i*Ne-r*Ie+a*ve)*Pe,e[14]=(F*Y-L*oe-V*Q)*Pe,e[15]=(M*oe-A*Y+P*Q)*Pe,e):null}function gK(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],$=t[7],M=t[8],A=t[9],P=t[10],j=t[11],L=t[12],F=t[13],V=t[14],J=t[15];return e[0]=m*(P*J-j*V)-A*(_*J-$*V)+F*(_*j-$*P),e[1]=-(r*(P*J-j*V)-A*(a*J-d*V)+F*(a*j-d*P)),e[2]=r*(_*J-$*V)-m*(a*J-d*V)+F*(a*$-d*_),e[3]=-(r*(_*j-$*P)-m*(a*j-d*P)+A*(a*$-d*_)),e[4]=-(y*(P*J-j*V)-M*(_*J-$*V)+L*(_*j-$*P)),e[5]=i*(P*J-j*V)-M*(a*J-d*V)+L*(a*j-d*P),e[6]=-(i*(_*J-$*V)-y*(a*J-d*V)+L*(a*$-d*_)),e[7]=i*(_*j-$*P)-y*(a*j-d*P)+M*(a*$-d*_),e[8]=y*(A*J-j*F)-M*(m*J-$*F)+L*(m*j-$*A),e[9]=-(i*(A*J-j*F)-M*(r*J-d*F)+L*(r*j-d*A)),e[10]=i*(m*J-$*F)-y*(r*J-d*F)+L*(r*$-d*m),e[11]=-(i*(m*j-$*A)-y*(r*j-d*A)+M*(r*$-d*m)),e[12]=-(y*(A*V-P*F)-M*(m*V-_*F)+L*(m*P-_*A)),e[13]=i*(A*V-P*F)-M*(r*V-a*F)+L*(r*P-a*A),e[14]=-(i*(m*V-_*F)-y*(r*V-a*F)+L*(r*_-a*m)),e[15]=i*(m*P-_*A)-y*(r*P-a*A)+M*(r*_-a*m),e}function vK(e){const t=e[0],i=e[1],r=e[2],a=e[3],d=e[4],y=e[5],m=e[6],_=e[7],$=e[8],M=e[9],A=e[10],P=e[11],j=e[12],L=e[13],F=e[14],V=e[15];return(t*y-i*d)*(A*V-P*F)-(t*m-r*d)*(M*V-P*L)+(t*_-a*d)*(M*F-A*L)+(i*m-r*y)*($*V-P*j)-(i*_-a*y)*($*F-A*j)+(r*_-a*m)*($*L-M*j)}function pO(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=t[6],M=t[7],A=t[8],P=t[9],j=t[10],L=t[11],F=t[12],V=t[13],J=t[14],Q=t[15];let Y=i[0],te=i[1],oe=i[2],ae=i[3];return e[0]=Y*r+te*m+oe*A+ae*F,e[1]=Y*a+te*_+oe*P+ae*V,e[2]=Y*d+te*$+oe*j+ae*J,e[3]=Y*y+te*M+oe*L+ae*Q,Y=i[4],te=i[5],oe=i[6],ae=i[7],e[4]=Y*r+te*m+oe*A+ae*F,e[5]=Y*a+te*_+oe*P+ae*V,e[6]=Y*d+te*$+oe*j+ae*J,e[7]=Y*y+te*M+oe*L+ae*Q,Y=i[8],te=i[9],oe=i[10],ae=i[11],e[8]=Y*r+te*m+oe*A+ae*F,e[9]=Y*a+te*_+oe*P+ae*V,e[10]=Y*d+te*$+oe*j+ae*J,e[11]=Y*y+te*M+oe*L+ae*Q,Y=i[12],te=i[13],oe=i[14],ae=i[15],e[12]=Y*r+te*m+oe*A+ae*F,e[13]=Y*a+te*_+oe*P+ae*V,e[14]=Y*d+te*$+oe*j+ae*J,e[15]=Y*y+te*M+oe*L+ae*Q,e}function bK(e,t,i){const r=i[0],a=i[1],d=i[2];if(t===e)e[12]=t[0]*r+t[4]*a+t[8]*d+t[12],e[13]=t[1]*r+t[5]*a+t[9]*d+t[13],e[14]=t[2]*r+t[6]*a+t[10]*d+t[14],e[15]=t[3]*r+t[7]*a+t[11]*d+t[15];else{const y=t[0],m=t[1],_=t[2],$=t[3],M=t[4],A=t[5],P=t[6],j=t[7],L=t[8],F=t[9],V=t[10],J=t[11];e[0]=y,e[1]=m,e[2]=_,e[3]=$,e[4]=M,e[5]=A,e[6]=P,e[7]=j,e[8]=L,e[9]=F,e[10]=V,e[11]=J,e[12]=y*r+M*a+L*d+t[12],e[13]=m*r+A*a+F*d+t[13],e[14]=_*r+P*a+V*d+t[14],e[15]=$*r+j*a+J*d+t[15]}return e}function wK(e,t,i){const r=i[0],a=i[1],d=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _K(e,t,i,r){let a,d,y,m,_,$,M,A,P,j,L,F,V,J,Q,Y,te,oe,ae,de,ve,Ie,Oe,Ne,Re=r[0],We=r[1],Pe=r[2],Gt=Math.sqrt(Re*Re+We*We+Pe*Pe);return Gt<Bs()?null:(Gt=1/Gt,Re*=Gt,We*=Gt,Pe*=Gt,a=Math.sin(i),d=Math.cos(i),y=1-d,m=t[0],_=t[1],$=t[2],M=t[3],A=t[4],P=t[5],j=t[6],L=t[7],F=t[8],V=t[9],J=t[10],Q=t[11],Y=Re*Re*y+d,te=We*Re*y+Pe*a,oe=Pe*Re*y-We*a,ae=Re*We*y-Pe*a,de=We*We*y+d,ve=Pe*We*y+Re*a,Ie=Re*Pe*y+We*a,Oe=We*Pe*y-Re*a,Ne=Pe*Pe*y+d,e[0]=m*Y+A*te+F*oe,e[1]=_*Y+P*te+V*oe,e[2]=$*Y+j*te+J*oe,e[3]=M*Y+L*te+Q*oe,e[4]=m*ae+A*de+F*ve,e[5]=_*ae+P*de+V*ve,e[6]=$*ae+j*de+J*ve,e[7]=M*ae+L*de+Q*ve,e[8]=m*Ie+A*Oe+F*Ne,e[9]=_*Ie+P*Oe+V*Ne,e[10]=$*Ie+j*Oe+J*Ne,e[11]=M*Ie+L*Oe+Q*Ne,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function SK(e,t,i){const r=Math.sin(i),a=Math.cos(i),d=t[4],y=t[5],m=t[6],_=t[7],$=t[8],M=t[9],A=t[10],P=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*a+$*r,e[5]=y*a+M*r,e[6]=m*a+A*r,e[7]=_*a+P*r,e[8]=$*a-d*r,e[9]=M*a-y*r,e[10]=A*a-m*r,e[11]=P*a-_*r,e}function xK(e,t,i){const r=Math.sin(i),a=Math.cos(i),d=t[0],y=t[1],m=t[2],_=t[3],$=t[8],M=t[9],A=t[10],P=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*a-$*r,e[1]=y*a-M*r,e[2]=m*a-A*r,e[3]=_*a-P*r,e[8]=d*r+$*a,e[9]=y*r+M*a,e[10]=m*r+A*a,e[11]=_*r+P*a,e}function $K(e,t,i){const r=Math.sin(i),a=Math.cos(i),d=t[0],y=t[1],m=t[2],_=t[3],$=t[4],M=t[5],A=t[6],P=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*a+$*r,e[1]=y*a+M*r,e[2]=m*a+A*r,e[3]=_*a+P*r,e[4]=$*a-d*r,e[5]=M*a-y*r,e[6]=A*a-m*r,e[7]=P*a-_*r,e}function dO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function TK(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function IK(e,t,i){if(t===0)return s1(e);let r,a,d,y=i[0],m=i[1],_=i[2],$=Math.sqrt(y*y+m*m+_*_);return $<Bs()?null:($=1/$,y*=$,m*=$,_*=$,r=Math.sin(t),a=Math.cos(t),d=1-a,e[0]=y*y*d+a,e[1]=m*y*d+_*r,e[2]=_*y*d-m*r,e[3]=0,e[4]=y*m*d-_*r,e[5]=m*m*d+a,e[6]=_*m*d+y*r,e[7]=0,e[8]=y*_*d+m*r,e[9]=m*_*d-y*r,e[10]=_*_*d+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function EK(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function MK(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function AK(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fO(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=r+r,_=a+a,$=d+d,M=r*m,A=r*_,P=r*$,j=a*_,L=a*$,F=d*$,V=y*m,J=y*_,Q=y*$;return e[0]=1-(j+F),e[1]=A+Q,e[2]=P-J,e[3]=0,e[4]=A-Q,e[5]=1-(M+F),e[6]=L+V,e[7]=0,e[8]=P+J,e[9]=L-V,e[10]=1-(M+j),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function kK(e,t){const i=OK,r=-t[0],a=-t[1],d=-t[2],y=t[3],m=t[4],_=t[5],$=t[6],M=t[7],A=r*r+a*a+d*d+y*y;return A>0?(i[0]=2*(m*y+M*r+_*d-$*a)/A,i[1]=2*(_*y+M*a+$*r-m*d)/A,i[2]=2*($*y+M*d+m*a-_*r)/A):(i[0]=2*(m*y+M*r+_*d-$*a),i[1]=2*(_*y+M*a+$*r-m*d),i[2]=2*($*y+M*d+m*a-_*r)),fO(e,t,i),e}const OK=Vn();function PK(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function CK(e,t){const i=t[0],r=t[1],a=t[2],d=t[4],y=t[5],m=t[6],_=t[8],$=t[9],M=t[10];return e[0]=Math.sqrt(i*i+r*r+a*a),e[1]=Math.sqrt(d*d+y*y+m*m),e[2]=Math.sqrt(_*_+$*$+M*M),e}function NK(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function jK(e,t,i,r){const a=t[0],d=t[1],y=t[2],m=t[3],_=a+a,$=d+d,M=y+y,A=a*_,P=a*$,j=a*M,L=d*$,F=d*M,V=y*M,J=m*_,Q=m*$,Y=m*M,te=r[0],oe=r[1],ae=r[2];return e[0]=(1-(L+V))*te,e[1]=(P+Y)*te,e[2]=(j-Q)*te,e[3]=0,e[4]=(P-Y)*oe,e[5]=(1-(A+V))*oe,e[6]=(F+J)*oe,e[7]=0,e[8]=(j+Q)*ae,e[9]=(F-J)*ae,e[10]=(1-(A+L))*ae,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function RK(e,t,i,r,a){const d=t[0],y=t[1],m=t[2],_=t[3],$=d+d,M=y+y,A=m+m,P=d*$,j=d*M,L=d*A,F=y*M,V=y*A,J=m*A,Q=_*$,Y=_*M,te=_*A,oe=r[0],ae=r[1],de=r[2],ve=a[0],Ie=a[1],Oe=a[2],Ne=(1-(F+J))*oe,Re=(j+te)*oe,We=(L-Y)*oe,Pe=(j-te)*ae,Gt=(1-(P+J))*ae,gi=(V+Q)*ae,qt=(L+Y)*de,ht=(V-Q)*de,xr=(1-(P+F))*de;return e[0]=Ne,e[1]=Re,e[2]=We,e[3]=0,e[4]=Pe,e[5]=Gt,e[6]=gi,e[7]=0,e[8]=qt,e[9]=ht,e[10]=xr,e[11]=0,e[12]=i[0]+ve-(Ne*ve+Pe*Ie+qt*Oe),e[13]=i[1]+Ie-(Re*ve+Gt*Ie+ht*Oe),e[14]=i[2]+Oe-(We*ve+gi*Ie+xr*Oe),e[15]=1,e}function LK(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=i+i,m=r+r,_=a+a,$=i*y,M=r*y,A=r*m,P=a*y,j=a*m,L=a*_,F=d*y,V=d*m,J=d*_;return e[0]=1-A-L,e[1]=M+J,e[2]=P-V,e[3]=0,e[4]=M-J,e[5]=1-$-L,e[6]=j+F,e[7]=0,e[8]=P+V,e[9]=j-F,e[10]=1-$-A,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function DK(e,t,i,r,a,d,y){const m=1/(i-t),_=1/(a-r),$=1/(d-y);return e[0]=2*d*m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*d*_,e[6]=0,e[7]=0,e[8]=(i+t)*m,e[9]=(a+r)*_,e[10]=(y+d)*$,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*d*2*$,e[15]=0,e}function FK(e,t,i,r,a){const d=1/Math.tan(t/2);let y;return e[0]=d/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(y=1/(r-a),e[10]=(a+r)*y,e[14]=2*a*r*y):(e[10]=-1,e[14]=-2*r),e}function zK(e,t,i,r){const a=Math.tan(t.upDegrees*Math.PI/180),d=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),m=Math.tan(t.rightDegrees*Math.PI/180),_=2/(y+m),$=2/(a+d);return e[0]=_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=$,e[6]=0,e[7]=0,e[8]=-(y-m)*_*.5,e[9]=(a-d)*$*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function VK(e,t,i,r,a,d,y){const m=1/(t-i),_=1/(r-a),$=1/(d-y);return e[0]=-2*m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*_,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*$,e[11]=0,e[12]=(t+i)*m,e[13]=(a+r)*_,e[14]=(y+d)*$,e[15]=1,e}function GK(e,t,i,r){const a=t[0],d=t[1],y=t[2];let m=a-i[0],_=d-i[1],$=y-i[2];const M=Bs();if(Math.abs(m)<M&&Math.abs(_)<M&&Math.abs($)<M)return void s1(e);let A=1/Math.sqrt(m*m+_*_+$*$);m*=A,_*=A,$*=A;const P=r[0],j=r[1],L=r[2];let F=j*$-L*_,V=L*m-P*$,J=P*_-j*m;A=Math.sqrt(F*F+V*V+J*J),A?(A=1/A,F*=A,V*=A,J*=A):(F=0,V=0,J=0);let Q=_*J-$*V,Y=$*F-m*J,te=m*V-_*F;A=Math.sqrt(Q*Q+Y*Y+te*te),A?(A=1/A,Q*=A,Y*=A,te*=A):(Q=0,Y=0,te=0),e[0]=F,e[1]=Q,e[2]=m,e[3]=0,e[4]=V,e[5]=Y,e[6]=_,e[7]=0,e[8]=J,e[9]=te,e[10]=$,e[11]=0,e[12]=-(F*a+V*d+J*y),e[13]=-(Q*a+Y*d+te*y),e[14]=-(m*a+_*d+$*y),e[15]=1}function qK(e,t,i,r){const a=t[0],d=t[1],y=t[2],m=r[0],_=r[1],$=r[2];let M=a-i[0],A=d-i[1],P=y-i[2],j=M*M+A*A+P*P;j>0&&(j=1/Math.sqrt(j),M*=j,A*=j,P*=j);let L=_*P-$*A,F=$*M-m*P,V=m*A-_*M;return j=L*L+F*F+V*V,j>0&&(j=1/Math.sqrt(j),L*=j,F*=j,V*=j),e[0]=L,e[1]=F,e[2]=V,e[3]=0,e[4]=A*V-P*F,e[5]=P*L-M*V,e[6]=M*F-A*L,e[7]=0,e[8]=M,e[9]=A,e[10]=P,e[11]=0,e[12]=a,e[13]=d,e[14]=y,e[15]=1,e}function UK(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function BK(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function HK(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function yO(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function WK(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function JK(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function KK(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function YK(e,t){if(e===t)return!0;const i=e[0],r=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],$=e[7],M=e[8],A=e[9],P=e[10],j=e[11],L=e[12],F=e[13],V=e[14],J=e[15],Q=t[0],Y=t[1],te=t[2],oe=t[3],ae=t[4],de=t[5],ve=t[6],Ie=t[7],Oe=t[8],Ne=t[9],Re=t[10],We=t[11],Pe=t[12],Gt=t[13],gi=t[14],qt=t[15],ht=Bs();return Math.abs(i-Q)<=ht*Math.max(1,Math.abs(i),Math.abs(Q))&&Math.abs(r-Y)<=ht*Math.max(1,Math.abs(r),Math.abs(Y))&&Math.abs(a-te)<=ht*Math.max(1,Math.abs(a),Math.abs(te))&&Math.abs(d-oe)<=ht*Math.max(1,Math.abs(d),Math.abs(oe))&&Math.abs(y-ae)<=ht*Math.max(1,Math.abs(y),Math.abs(ae))&&Math.abs(m-de)<=ht*Math.max(1,Math.abs(m),Math.abs(de))&&Math.abs(_-ve)<=ht*Math.max(1,Math.abs(_),Math.abs(ve))&&Math.abs($-Ie)<=ht*Math.max(1,Math.abs($),Math.abs(Ie))&&Math.abs(M-Oe)<=ht*Math.max(1,Math.abs(M),Math.abs(Oe))&&Math.abs(A-Ne)<=ht*Math.max(1,Math.abs(A),Math.abs(Ne))&&Math.abs(P-Re)<=ht*Math.max(1,Math.abs(P),Math.abs(Re))&&Math.abs(j-We)<=ht*Math.max(1,Math.abs(j),Math.abs(We))&&Math.abs(L-Pe)<=ht*Math.max(1,Math.abs(L),Math.abs(Pe))&&Math.abs(F-Gt)<=ht*Math.max(1,Math.abs(F),Math.abs(Gt))&&Math.abs(V-gi)<=ht*Math.max(1,Math.abs(V),Math.abs(gi))&&Math.abs(J-qt)<=ht*Math.max(1,Math.abs(J),Math.abs(qt))}function ZK(e){const t=Bs(),i=e[0],r=e[1],a=e[2],d=e[4],y=e[5],m=e[6],_=e[8],$=e[9],M=e[10];return Math.abs(1-(i*i+d*d+_*_))<=t&&Math.abs(1-(r*r+y*y+$*$))<=t&&Math.abs(1-(a*a+m*m+M*M))<=t}function XK(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const QK=pO,eY=yO;Object.freeze(Object.defineProperty({__proto__:null,add:HK,adjoint:gK,copy:yK,determinant:vK,equals:YK,exactEquals:KK,frob:BK,fromQuat:LK,fromQuat2:kK,fromRotation:IK,fromRotationTranslation:fO,fromRotationTranslationScale:jK,fromRotationTranslationScaleOrigin:RK,fromScaling:TK,fromTranslation:dO,fromXRotation:EK,fromYRotation:MK,fromZRotation:AK,frustum:DK,getRotation:NK,getScaling:CK,getTranslation:PK,hasIdentityRotation:XK,identity:s1,invert:cO,invertOrIdentity:mK,isOrthoNormal:ZK,lookAt:GK,mul:QK,multiply:pO,multiplyScalar:WK,multiplyScalarAndAdd:JK,ortho:VK,perspective:FK,perspectiveFromFieldOfView:zK,rotate:_K,rotateX:SK,rotateY:xK,rotateZ:$K,scale:wK,set:uu,str:UK,sub:eY,subtract:yO,targetTo:qK,translate:bK,transpose:Aa},Symbol.toStringTag,{value:"Module"}));let fb,ie=null;function T6(){return!!ie}function tY(){return!!le("esri-wasm")}function mO(){return fb||(fb=be(()=>import("./pe-wasm-21c6955d.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>At(`esri/geometry/support/${t}`)})).then(e=>{vO(e)}),fb)}var A9,ii,k9;(function(e){function t(d,y,m){ie.ensureCache.prepare();const _=ch(m),$=m===_,M=ie.ensureFloat64(_),A=ie._pe_geog_to_proj(ie.getPointer(d),y,M);return A&&Ol(m,y,M,$),A}function i(d,y,m,_){switch(_){case ii.PE_TRANSFORM_P_TO_G:return r(d,y,m);case ii.PE_TRANSFORM_G_TO_P:return t(d,y,m)}return 0}function r(d,y,m){return a(d,y,m,0)}function a(d,y,m,_){ie.ensureCache.prepare();const $=ch(m),M=m===$,A=ie.ensureFloat64($),P=ie._pe_proj_to_geog_center(ie.getPointer(d),y,A,_);return P&&Ol(m,y,A,M),P}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=a})(A9||(A9={})),function(e){function t(){e.PE_BUFFER_MAX=ie.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=ie.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=ie.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=ie.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=ie.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=ie.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=ie.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=ie.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=ie.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=ie.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=ie.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=ie.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=ie.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=ie.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=ie.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=ie.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=ie.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=ie.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=ie.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=ie.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=ie.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=ie.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=ie.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=ie.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=ie.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=ie.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=ie.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=ie.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=ie.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=ie.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(ii||(ii={})),function(e){const t={},i={},r=j=>{if(j){const L=j.getType();switch(L){case ii.PE_TYPE_GEOGCS:j=ie.castObject(j,ie.PeGeogcs);break;case ii.PE_TYPE_PROJCS:j=ie.castObject(j,ie.PeProjcs);break;case ii.PE_TYPE_GEOGTRAN:j=ie.castObject(j,ie.PeGeogtran);break;default:L&ii.PE_TYPE_UNIT&&(j=ie.castObject(j,ie.PeUnit))}}return j};function a(){ie.PeFactory.prototype.initialize(null)}function d(j){return y(ii.PE_TYPE_COORDSYS,j)}function y(j,L){let F=null,V=t[j];if(V||(V={},t[j]=V),V.hasOwnProperty(String(L)))F=V[L];else{const J=ie.PeFactory.prototype.factoryByType(j,L);ie.compare(J,ie.NULL)||(F=J,V[L]=F)}return F=r(F),F}function m(j,L){let F=null,V=i[j];if(V||(V={},i[j]=V),V.hasOwnProperty(L))F=V[L];else{const J=ie.PeFactory.prototype.fromString(j,L);ie.compare(J,ie.NULL)||(F=J,V[L]=F)}return F=r(F),F}function _(j){return y(ii.PE_TYPE_GEOGCS,j)}function $(j){return y(ii.PE_TYPE_GEOGTRAN,j)}function M(j){return ie.PeFactory.prototype.getCode(j)}function A(j){return y(ii.PE_TYPE_PROJCS,j)}function P(j){return y(ii.PE_TYPE_UNIT,j)}e.initialize=a,e.coordsys=d,e.factoryByType=y,e.fromString=m,e.geogcs=_,e.geogtran=$,e.getCode=M,e.projcs=A,e.unit=P}(k9||(k9={}));let gO=null;var Rg,O9,P9,C9,Lg,N9,Dg,Fg,j9;function vO(e){function t(d,y,m){d[y]=m(d[y])}ie=e,ii.init(),Rg.init(),Lg.init(),Dg.init(),Fg.init(),gO=class extends ie.PeGCSExtent{destroy(){ie.destroy(this)}};const i=[ie.PeDatum,ie.PeGeogcs,ie.PeGeogtran,ie.PeObject,ie.PeParameter,ie.PePrimem,ie.PeProjcs,ie.PeSpheroid,ie.PeUnit];for(const d of i)t(d.prototype,"getName",y=>function(){return y.call(this,new Array(ii.PE_NAME_MAX))});for(const d of[ie.PeGeogtran,ie.PeProjcs])t(d.prototype,"getParameters",y=>function(){const m=new Array(ii.PE_PARM_MAX);let _=y.call(this);for(let $=0;$<m.length;$++){const M=ie.getValue(_,"*");m[$]=M?ie.wrapPointer(M,ie.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return m});t(ie.PeHorizon.prototype,"getCoord",d=>function(){const y=this.getSize();if(!y)return null;const m=[];return Ol(m,y,d.call(this)),m}),t(ie.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const y=ie._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;const _=d.call(this);if(!ie.compare(_,ie.NULL)){m=[_];const $=this.getSteps();if($>1){const M=ie.getPointer(_);for(let A=1;A<$;A++)m.push(ie.wrapPointer(M+y*A,ie.PeGTlistExtendedGTs))}}return m}});const r=ie._pe_getPeHorizonSize(),a=d=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(d))return y.get(d);let m=null;const _=d.call(this);if(!ie.compare(_,ie.NULL)){m=[_];const $=_.getNump();if($>1){const M=ie.getPointer(_);for(let A=1;A<$;A++)m.push(ie.wrapPointer(M+r*A,ie.PeHorizon))}}return y.set(d,m),m};t(ie.PeProjcs.prototype,"horizonGcsGenerate",a),t(ie.PeProjcs.prototype,"horizonPcsGenerate",a),ie.PeObject.prototype.toString=function(d=ii.PE_STR_OPTS_NONE){ie.ensureCache.prepare();const y=ie.getPointer(this),m=ie.ensureInt8(new Array(ii.PE_BUFFER_MAX));return ie.UTF8ToString(ie._pe_object_to_string_ext(y,d,m))}}function Oo(e){if(!e)return;const t=ie.getClass(e);if(!t)return;const i=ie.getCache(t);if(!i)return;const r=ie.getPointer(e);r&&delete i[r]}function Y1(e,t){const i=[],r=new Array(t);for(let a=0;a<e;a++)i.push(ie.ensureInt8(r));return i}function ch(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function Ol(e,t,i,r=!1){if(r)for(let a=0;a<2*t;a++)e[a]=ie.getValue(i+a*Float64Array.BYTES_PER_ELEMENT,"double");else{const a=e.length===0;for(let d=0;d<t;d++)a&&(e[d]=new Array(2)),e[d][0]=ie.getValue(i,"double"),e[d][1]=ie.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=ie.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=ie._pe_getPeGTlistExtendedEntrySize()}function r(a,d,y,m,_,$){let M=null;const A=new ie.PeInteger($);try{const P=ie.PeGTlistExtended.prototype.getGTlist(a,d,y,m,_,A);if(($=A.val)&&(M=[P],$>1)){const j=ie.getPointer(P);for(let L=1;L<$;L++)M.push(ie.wrapPointer(j+t*L,ie.PeGTlistExtendedEntry))}}finally{ie.destroy(A)}return M}e.init=i,e.getGTlist=r})(Rg||(Rg={})),function(e){function t(i){if(i&&i.length){for(const r of i)Oo(r),r.getEntries().forEach(a=>{Oo(a);const d=a.getGeogtran();Oo(d),d.getParameters().forEach(Oo),[d.getGeogcs1(),d.getGeogcs2()].forEach(y=>{Oo(y);const m=y.getDatum();Oo(m),Oo(m.getSpheroid()),Oo(y.getPrimem()),Oo(y.getUnit())})});ie.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(O9||(O9={})),function(e){function t(i,r,a,d,y){ie.ensureCache.prepare();const m=ch(a),_=a===m,$=ie.ensureFloat64(m);let M=0;d&&(M=ie.ensureFloat64(d));const A=ie._pe_geog_to_geog(ie.getPointer(i),r,$,M,y);return A&&Ol(a,r,$,_),A}e.geogToGeog=t}(P9||(P9={})),function(e){const t=($,M,A,P,j,L)=>{let F,V;switch(ie.ensureCache.prepare(),$){case"dd":F=ie._pe_geog_to_dd,V=ii.PE_DD_MAX;break;case"ddm":F=ie._pe_geog_to_ddm,V=ii.PE_DDM_MAX;break;case"dms":F=ie._pe_geog_to_dms,V=ii.PE_DMS_MAX}let J=0;M&&(J=ie.getPointer(M));const Q=ch(P),Y=ie.ensureFloat64(Q),te=Y1(A,V),oe=F(J,A,Y,j,ie.ensureInt32(te));if(oe)for(let ae=0;ae<A;ae++)L[ae]=ie.UTF8ToString(te[ae]);return oe},i=($,M,A,P,j)=>{let L;switch(ie.ensureCache.prepare(),$){case"dd":L=ie._pe_dd_to_geog;break;case"ddm":L=ie._pe_ddm_to_geog;break;case"dms":L=ie._pe_dms_to_geog}let F=0;M&&(F=ie.getPointer(M));const V=P.map(te=>ie.ensureString(te)),J=ie.ensureInt32(V),Q=ie.ensureFloat64(new Array(2*A)),Y=L(F,A,J,Q);return Y&&Ol(j,A,Q),Y};function r($,M,A,P,j){return t("dms",$,M,A,P,j)}function a($,M,A,P){return i("dms",$,M,A,P)}function d($,M,A,P,j){return t("ddm",$,M,A,P,j)}function y($,M,A,P){return i("ddm",$,M,A,P)}function m($,M,A,P,j){return t("dd",$,M,A,P,j)}function _($,M,A,P){return i("dd",$,M,A,P)}e.geogToDms=r,e.dmsToGeog=a,e.geogToDdm=d,e.ddmToGeog=y,e.geogToDd=m,e.ddToGeog=_}(C9||(C9={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=ie.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=ie.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(a,d,y,m,_,$,M){ie.ensureCache.prepare();let A=0;a&&(A=ie.getPointer(a));const P=ch(y),j=ie.ensureFloat64(P),L=Y1(d,ii.PE_MGRS_MAX),F=ie.ensureInt32(L),V=ie._pe_geog_to_mgrs_extended(A,d,j,m,_,$,F);if(V)for(let J=0;J<d;J++)M[J]=ie.UTF8ToString(L[J]);return V}function r(a,d,y,m,_){ie.ensureCache.prepare();let $=0;a&&($=ie.getPointer(a));const M=y.map(L=>ie.ensureString(L)),A=ie.ensureInt32(M),P=ie.ensureFloat64(new Array(2*d)),j=ie._pe_mgrs_to_geog_extended($,d,A,m,P);return j&&Ol(_,d,P),j}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(Lg||(Lg={})),function(e){function t(r,a,d,y,m,_,$){ie.ensureCache.prepare();let M=0;r&&(M=ie.getPointer(r));const A=ch(d),P=ie.ensureFloat64(A),j=Y1(a,ii.PE_MGRS_MAX),L=ie.ensureInt32(j),F=ie._pe_geog_to_usng(M,a,P,y,m,_,L);if(F)for(let V=0;V<a;V++)$[V]=ie.UTF8ToString(j[V]);return F}function i(r,a,d,y){ie.ensureCache.prepare();let m=0;r&&(m=ie.getPointer(r));const _=d.map(P=>ie.ensureString(P)),$=ie.ensureInt32(_),M=ie.ensureFloat64(new Array(2*a)),A=ie._pe_usng_to_geog(m,a,$,M);return A&&Ol(y,a,M),A}e.geogToUsng=t,e.usngToGeog=i}(N9||(N9={})),function(e){function t(){e.PE_UTM_OPTS_NONE=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=ie.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(a,d,y,m,_){ie.ensureCache.prepare();let $=0;a&&($=ie.getPointer(a));const M=ch(y),A=ie.ensureFloat64(M),P=Y1(d,ii.PE_UTM_MAX),j=ie.ensureInt32(P),L=ie._pe_geog_to_utm($,d,A,m,j);if(L)for(let F=0;F<d;F++)_[F]=ie.UTF8ToString(P[F]);return L}function r(a,d,y,m,_){ie.ensureCache.prepare();let $=0;a&&($=ie.getPointer(a));const M=y.map(L=>ie.ensureString(L)),A=ie.ensureInt32(M),P=ie.ensureFloat64(new Array(2*d)),j=ie._pe_utm_to_geog($,d,A,m,P);return j&&Ol(_,d,P),j}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(Dg||(Dg={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=ie.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=ie.PePCSInfo.prototype.PE_POLE_POINT}function r(a,d=e.PE_PCSINFO_OPTION_DOMAIN){let y=null,m=null;return t.has(a)&&(m=t.get(a),m[d]&&(y=m[d])),y||(y=ie.PePCSInfo.prototype.generate(a,d),m||(m=[],t.set(a,m)),m[d]=y),y}e.init=i,e.generate=r}(Fg||(Fg={})),function(e){function t(){return ie.PeVersion.prototype.version_string()}e.versionString=t}(j9||(j9={}));const iY=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return A9},get PeDefs(){return ii},get PeFactory(){return k9},get PeGCSExtent(){return gO},get PeGTTransformations(){return P9},get PeGTlistExtended(){return Rg},get PeGTlistExtendedEntry(){return O9},get PeNotationDms(){return C9},get PeNotationMgrs(){return Lg},get PeNotationUsng(){return N9},get PeNotationUtm(){return Dg},get PePCSInfo(){return Fg},get PeVersion(){return j9},_init:vO,get _pe(){return ie},isLoaded:T6,isSupported:tY,load:mO},Symbol.toStringTag,{value:"Module"})),za=Lt.radius,tn=Lt.eccentricitySquared,rY={a1:za*tn,a2:za*tn*za*tn,a3:za*tn*tn/2,a4:za*tn*za*tn*2.5,a5:za*tn+za*tn*tn/2,a6:1-tn};1/294.9786982,1/298.257222101,Lt.radius,Lt.flattening,Jl.radius,Jl.flattening,1/192.0430107526882,fa.radius,fa.flattening,1/10.2079945799458,1/43.61604095563141,fa.radius;let Z1=0,yb=class R9{static fromGE(t){const i=new R9;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=Z1++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Z1++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Z1++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Z1++}getInverse(){const t=new R9;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},zg=class od{static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new od;let r="";for(const a of t.steps){const d=yb.fromGE(a);i.steps.push(d),r+=d.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof yb?this.steps.push(i):this.steps.push(new yb({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new od;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[od.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const d of this.steps)r+=d.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const a=this._cachedProjection[od.cacheKey(t,i)];return a===void 0?null:a}};function I6(e,t,i){if(t==null||i==null||i.vcsWkid||Ti(t,i))return null;const r=Tp(t)/Tp(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return a=>sY(a,r);case"polyline":case"esriGeometryPolyline":return a=>oY(a,r);case"polygon":case"esriGeometryPolygon":return a=>nY(a,r);case"multipoint":case"esriGeometryMultipoint":return a=>aY(a,r);case"extent":case"esriGeometryEnvelope":return a=>lY(a,r);default:return null}}function sY(e,t){e&&e.z!=null&&(e.z*=t)}function nY(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function oY(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function aY(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function lY(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Cn=null,Xl=null,Kd=null,dm={};const bO=new Pv;function ec(){return!!Cn&&T6()}function Ql(e){return Kd==null&&(Kd=Promise.all([mO(),be(()=>Promise.resolve().then(()=>ane),void 0).then(t=>t.g),be(()=>Promise.resolve().then(()=>fne),void 0)])),Kd.then(([,t,{hydratedAdapter:i}])=>{Jt(e),Xl=i,Cn=t.default,Cn._enableProjection(iY),bO.notify()})}function hu(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:L9(Xl,e,e[0].spatialReference,t,i,r):L9(Xl,[e],e.spatialReference,t,i,r)[0]}function L9(e,t,i,r,a=null,d=null){if(i==null||r==null)return t;if($a(i,r,a))return t.map(y=>$O(y,i,r));if(a==null){const y=zg.cacheKey(i,r);dm[y]!==void 0?a=dm[y]:((a=_O(i,r,void 0))==null&&(a=new zg),dm[y]=a)}if(Cn==null||e==null)throw new t2;return d!=null?Cn._project(e,t,i,r,a,d):Cn._project(e,t,i,r,a)}function uY(e,t){const i=wO([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function wO(e,t){if(!ec()){for(const i of e)if(i!=null&&!Ti(i.spatialReference,t)&&Zi(i.spatialReference)&&Zi(t)&&!$a(i.spatialReference,t))return Je(bO),{pending:Ql(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:Ti(i.spatialReference,t)?i:Zi(i.spatialReference)&&Zi(t)?SO(i,t):null)}}function _O(e,t,i=null){if(e==null||t==null)return null;if(Cn==null||Xl==null)throw new t2;const r=Cn._getTransformation(Xl,e,t,i,i==null?void 0:i.spatialReference);return r!==null?zg.fromGE(r):null}function hY(e,t,i=null){if(Cn==null||Xl==null)throw new t2;const r=Cn._getTransformationBySuitability(Xl,e,t,i,i==null?void 0:i.spatialReference);if(r!==null){const a=[];for(const d of r)a.push(zg.fromGE(d));return a}return[]}let t2=class extends se{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var Z;function cY(){Cn=null,Xl=null,Kd=null,dm={}}(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(Z||(Z={}));const pY={get loadPromise(){return Kd}};function SO(e,t){try{const i=hu(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=I6(i.type,e.spatialReference,t);return r!=null&&r(i),i}catch(i){if(!(i instanceof t2))throw i;return null}}function $a(e,t,i){return!i&&(!!Ti(e,t)||Zi(e)&&Zi(t)&&!!A6(e,t,O6))}async function xO(e,t,i,r){if(ec())return QS(r);if(Array.isArray(e)){for(const{source:a,dest:d,geographicTransformation:y}of e)if(!$a(a,d,y))return Ql(r)}else if(!$a(e,t,i))return Ql(r);return QS(r)}function dY(e,t){switch(A6(e,t,O6)){case Ct:return"copy3";case Ll:return"wgs84ToSphericalECEF";case qh:return"wgs84ToWebMercator";case Rl:return"wgs84ToPlateCarree";case Fl:return"wgs84ToWGS84ECEF";case Mh:return"webMercatorToWGS84";case CO:return"webMercatorToSphericalECEF";case NO:return"webMercatorToWGS84ECEF";case RO:return"webMercatorToPlateCarree";case zl:return"wgs84ECEFToWGS84";case FO:return"wgs84ECEFToSphericalECEF";case zO:return"wgs84ECEFToWebMercator";case Dl:return"sphericalECEFToWGS84";case LO:return"sphericalECEFToWebMercator";case q9:return"sphericalMarsPCPFToMars2000";case G9:return"sphericalMoonPCPFToMoon2000";case DO:return"sphericalECEFToWGS84ECEF";case V9:return"mars2000ToSphericalPCPF";case z9:return"moon2000ToSphericalPCPF";default:return null}}function $O(e,t,i){return e?"x"in e?TO(e,t,new Ze,i,0):"xmin"in e?AO(e,t,new gt,i,0):"rings"in e?MO(e,t,new $o,i,0):"paths"in e?EO(e,t,new ls,i,0):"points"in e?IO(e,t,new Hf,i,0):null:null}function fY(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&TO(e,e.spatialReference,t,i,r)!=null}function TO(e,t,i,r,a){ct[0]=e.x,ct[1]=e.y;const d=e.z;return ct[2]=d!==void 0?d:a,Dn(ct,t,0,ct,r,0,1)?(i.x=ct[0],i.y=ct[1],i.spatialReference=r,d===void 0?(i.z=void 0,i.hasZ=!1):(i.z=ct[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function yY(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&IO(e,e.spatialReference,t,i,r)!=null}function IO(e,t,i,r,a){const{points:d,hasZ:y,hasM:m}=e,_=[],$=d.length,M=[];for(const A of d)M.push(A[0],A[1],y?A[2]:a);if(!Dn(M,t,0,M,r,0,$))return null;for(let A=0;A<$;++A){const P=3*A,j=M[P],L=M[P+1];y&&m?_.push([j,L,M[P+2],d[A][3]]):y?_.push([j,L,M[P+2]]):m?_.push([j,L,d[A][2]]):_.push([j,L])}return i.points=_,i.spatialReference=r,i.hasZ=y,i.hasM=m,i}function mY(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&EO(e,e.spatialReference,t,i,r)!=null}function EO(e,t,i,r,a){const{paths:d,hasZ:y,hasM:m}=e,_=[];return OO(d,y??!1,m??!1,t,_,r,a)?(i.paths=_,i.spatialReference=r,i.hasZ=y,i.hasM=m,i):null}function gY({hasZ:e,spatialReference:t,paths:i},r,a=0){const d=Io(t,i0),y=Ls[d][Z.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const m=e?_=>_:_=>Vv(ct,_[0],_[1],a);for(const _ of i){const $=[];for(const M of _){const A=[0,0,a];y(m(M),0,A,0),$.push(A)}r.push($)}return!0}function vY({hasZ:e,spatialReference:t,rings:i},r,a=0){const d=Io(t,i0),y=Ls[d][Z.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const m=e?_=>_:_=>Vv(ct,_[0],_[1],a);for(const _ of i){const $=[];for(const M of _){const A=[0,0,a];y(m(M),0,A,0),$.push(A)}r.push($)}return!0}function bY(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&MO(e,e.spatialReference,t,i,r)!=null}function MO(e,t,i,r,a){const{rings:d,hasZ:y,hasM:m}=e,_=[];return OO(d,y??!1,m??!1,t,_,r,a)?(i.rings=_,i.spatialReference=r,i.hasZ=y,i.hasM=m,i):null}function wY(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&AO(e,e.spatialReference,t,i,r)!=null}function AO(e,t,i,r,a){const{xmin:d,ymin:y,xmax:m,ymax:_,hasZ:$,hasM:M}=e;return D9(d,y,$?e.zmin:a,t,ct,r)?(i.xmin=ct[0],i.ymin=ct[1],$&&(i.zmin=ct[2]),D9(m,_,$?e.zmax:a,t,ct,r)?(i.xmax=ct[0],i.ymax=ct[1],$&&(i.zmax=ct[2]),M&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function _Y(e,t,i){if(t==null||i==null)return null;const r=new Ze({spatialReference:i});return Dn(e,t,0,ct,i,0,1)?(r.x=ct[0],r.y=ct[1],r.z=ct[2],r):null}function SY(e,t,i){return Dn(e,t,0,ct,i.spatialReference,0,1)?(i.x=ct[0],i.y=ct[1],i.z=ct[2],i):null}function xY(e,t,i,r=0){ct[0]=e.x,ct[1]=e.y;const a=e.z;return ct[2]=a!==void 0?a:r,Dn(ct,e.spatialReference,0,t,i,0,1)}function D9(e,t,i,r,a,d){return Ht[0]=e,Ht[1]=t,Ht[2]=i,Dn(Ht,r,0,a,d,0,1)}function F9(e,t,i,r){return!(t==null||r==null||e.length<2)&&(e.length===2&&(Ht[0]=e[0],Ht[1]=e[1],Ht[2]=0,e=Ht),Dn(e,t,0,i,r,0,1))}function $Y(e,t){ct[0]=e.x,ct[1]=e.y;const i=e.z;return ct[2]=i!==void 0?i:0,kO(ct,e.spatialReference,t)}function kO(e,t,i){return TY(e,t,i)}function TY(e,t,i){if(t==null)return!1;const r=Io(t,i0),a=Ls[r][Z.WGS84_COMPARABLE_LON_LAT];return a!=null&&(a(e,0,Ht,0),i!==Ht&&(i[0]=Ht[0],i[1]=Ht[1],i.length>2&&(i[2]=Ht[2])),!0)}function Dn(e,t,i,r,a,d,y=1){const m=A6(t,a,O6);if(m==null)return!1;if(m===Ct){if(e===r&&i===d)return!0;const $=i+3*y;for(let M=i,A=d;M<$;M++,A++)r[A]=e[M];return!0}const _=i+3*y;for(let $=i,M=d;$<_;$+=3,M+=3)m(e,$,r,M);return!0}function IY(e,t,i,r,a){_g(ct,e),yM(X1,e,t),F9(ct,i,ct,a),F9(X1,i,X1,a),D4(r,X1,ct),Sg(r,r)}function OO(e,t,i,r,a,d,y=0){const m=new Array;for(const $ of e)for(const M of $)m.push(M[0],M[1],t?M[2]:y);if(!Dn(m,r,0,m,d,0,m.length/3))return!1;let _=0;a.length=0;for(const $ of e){const M=new Array;for(const A of $)t&&i?M.push([m[_++],m[_++],m[_++],A[3]]):t?M.push([m[_++],m[_++],m[_++]]):i?(M.push([m[_++],m[_++],A[2]]),_++):(M.push([m[_++],m[_++]]),_++);a.push(M)}return!0}function EY(e,t,i,r){if(t==null||r==null)return!1;const a=VO(t,r,FY);if(a.projector===Ct)return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],!0;if(a.projector==null)return!1;const{source:d,dest:y}=a;if(y.spatialReferenceId===Z.WEB_MERCATOR){const m=Ls[d.spatialReferenceId][Z.WGS84];return m!=null&&(m(e,0,Sn,0),qh(Sn,0,i,0),i[3]=j7(Sn[1],e[2],e[3],Lt.radius),!0)}if(d.spatialReferenceId!==Z.WGS84&&d.spatialReferenceId!==Z.CGCS2000||y.spatialReferenceId!==Z.PLATE_CARREE){a.projector(e,0,i,0);const m=d.metersPerUnit??1,_=y.metersPerUnit??1;i[3]=e[3]*m/_}else{const m=Ls[d.spatialReferenceId][Z.SPHERICAL_ECEF],_=Ls[Z.SPHERICAL_ECEF][Z.PLATE_CARREE];let $=e[3];m!=null&&_!=null&&($=j7(e[1],e[2],e[3],Lt.radius)),a.projector(e,0,i,0),i[3]=$}return!0}function j7(e,t,i,r){const a=r+t;if(a<r/2||i>a)return Number.MAX_VALUE;const d=Math.abs(Mn*e)+Math.asin(i/a);return d>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(d)}function MY(e,t,i,r){return e!=null&&(Ti(t,r)?(V4(i,e),!0):(Ht[0]=e[0],Ht[1]=e[1],Ht[2]=0,!!Dn(Ht,t,0,Ht,r,0,1)&&(i[0]=Ht[0],i[1]=Ht[1],Ht[0]=e[2],Ht[1]=e[3],Ht[2]=0,!!Dn(Ht,t,0,Ht,r,0,1)&&(i[2]=Ht[0],i[3]=Ht[1],!0))))}function AY(e,t,i,r){if(t==null||r==null)return!1;const a=Io(t,i0),d=Io(r,GO);if(a===d&&a!==Z.UNKNOWN||Ti(t,r))return i[0]=1,i[1]=1,i[2]=1,!0;if(a===Z.SPHERICAL_ECEF){const y=zv(e),m=y/Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=y/Lt.radius;if(d===Z.WEB_MERCATOR)return i[0]=m*_,i[1]=m*_,i[2]=1,!0;if(d===Z.WGS84||d===Z.CGCS2000){const $=Yd;return i[0]=$*m*_,i[1]=$*_,i[2]=1,!0}}else if(a===Z.PLATE_CARREE){if(d===Z.WGS84||d===Z.CGCS2000)return i[0]=Yd,i[1]=Yd,i[2]=1,!0;if(d===Z.WEB_MERCATOR){const y=e[1]/Lt.radius;return i[0]=1,i[1]=1/Math.cos(y),i[2]=1,!0}}return!1}function kY(e,t,i,r){if(e==null||r==null)return!1;const a=Io(e,i0),d=Io(r,GO);if(a===d&&!R7(d)&&(a!==Z.UNKNOWN||Ti(e,r)))return dO(i,t),!0;if(R7(d)){const y=Ls[a][Z.LON_LAT],m=Ls[Z.LON_LAT][d];return y!=null&&m!=null&&(y(t,0,Sn,0),m(Sn,0,Va,0),E6(Mn*Sn[0],Mn*Sn[1],i),i[12]=Va[0],i[13]=Va[1],i[14]=Va[2],!0)}if((d===Z.WEB_MERCATOR||d===Z.PLATE_CARREE)&&(a===Z.WGS84||a===Z.CGCS2000&&d===Z.PLATE_CARREE||a===Z.SPHERICAL_ECEF||a===Z.WEB_MERCATOR)){const y=Ls[a][Z.LON_LAT],m=Ls[Z.LON_LAT][d];return y!=null&&m!=null&&(y(t,0,Sn,0),m(Sn,0,Va,0),a===Z.SPHERICAL_ECEF?PO(Mn*Sn[0],Mn*Sn[1],i):s1(i),i[12]=Va[0],i[13]=Va[1],i[14]=Va[2],!0)}return!1}function R7(e){return e===Z.SPHERICAL_ECEF||e===Z.SPHERICAL_MARS_PCPF||e===Z.SPHERICAL_MOON_PCPF}function E6(e,t,i){const r=Math.sin(e),a=Math.cos(e),d=Math.sin(t),y=Math.cos(t),m=i;return m[0]=-r,m[4]=-d*a,m[8]=y*a,m[12]=0,m[1]=a,m[5]=-d*r,m[9]=y*r,m[13]=0,m[2]=0,m[6]=y,m[10]=d,m[14]=0,m[3]=0,m[7]=0,m[11]=0,m[15]=1,m}function PO(e,t,i){return E6(e,t,i),Aa(i,i),i}function Io(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Ma(e,1)),e.wkt===Mz.wkt?t.spatialReferenceId=Z.SPHERICAL_ECEF:vf(e)?t.spatialReferenceId=Z.WGS84:Rh(e)?t.spatialReferenceId=Z.WEB_MERCATOR:xz(e)?t.spatialReferenceId=Z.PLATE_CARREE:e.wkt===Az.wkt?t.spatialReferenceId=Z.WGS84_ECEF:e.wkid===jh.CGCS2000?t.spatialReferenceId=Z.CGCS2000:e.wkt===jE.wkt?t.spatialReferenceId=Z.SPHERICAL_MARS_PCPF:e.wkt===RE.wkt?t.spatialReferenceId=Z.SPHERICAL_MOON_PCPF:I4(e)?t.spatialReferenceId=Z.GCSMARS2000:M4(e)?t.spatialReferenceId=Z.GCSMOON2000:t.spatialReferenceId=Z.UNKNOWN):Z.UNKNOWN}function Ct(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function Mh(e,t,i,r){i[r++]=Cp*(e[t++]/Lt.radius),i[r++]=Cp*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Lt.radius))),i[r]=e[t]}function CO(e,t,i,r){Mh(e,t,i,r),Ll(i,r,i,r)}function NO(e,t,i,r){Mh(e,t,i,r),Fl(i,r,i,r)}function jO(e,t,i,r,a){const d=.4999999*Math.PI,y=qs(Mn*e[t+1],-d,d),m=Math.sin(y);i[r++]=Mn*e[t]*a.radius,i[r++]=a.halfSemiMajorAxis*Math.log((1+m)/(1-m)),i[r]=e[t+2]}function qh(e,t,i,r){jO(e,t,i,r,Lt)}const L7=Lt.radius*Math.PI/180,Yd=180/(Lt.radius*Math.PI);function Rl(e,t,i,r){i[r]=e[t]*L7,i[r+1]=e[t+1]*L7,i[r+2]=e[t+2]}function wh(e,t,i,r){i[r]=e[t]*Yd,i[r+1]=e[t+1]*Yd,i[r+2]=e[t+2]}function RO(e,t,i,r){Mh(e,t,i,r),Rl(i,r,i,r)}function OY(e,t,i,r){zl(e,t,i,r),Rl(i,r,i,r)}function PY(e,t,i,r){Dl(e,t,i,r),Rl(i,r,i,r)}function CY(e,t,i,r){wh(e,t,i,r),Ll(i,r,i,r)}function NY(e,t,i,r){wh(e,t,i,r),qh(i,r,i,r)}function jY(e,t,i,r){wh(e,t,i,r),Fl(i,r,i,r)}function RY(e){if(e==null)return!1;const t=Io(e,i0);return!!Ls[t][Z.WGS84_COMPARABLE_LON_LAT]}function LY(e,t,i,r){const a=Math.cos(i);e[0]=Math.cos(t)*a*r,e[1]=Math.sin(t)*a*r,e[2]=Math.sin(i)*r}function M6(e,t,i,r,a){const d=a+e[t+2],y=Mn*e[t+1],m=Mn*e[t],_=Math.cos(y);i[r++]=Math.cos(m)*_*d,i[r++]=Math.sin(m)*_*d,i[r]=Math.sin(y)*d}function z9(e,t,i,r){M6(e,t,i,r,Jl.radius)}function V9(e,t,i,r){M6(e,t,i,r,fa.radius)}function Ll(e,t,i,r){M6(e,t,i,r,Lt.radius)}function i2(e,t,i,r,a){const d=e[t],y=e[t+1],m=e[t+2],_=Math.sqrt(d*d+y*y+m*m),$=PM(m/(_===0?1:_)),M=Math.atan2(y,d);i[r++]=Cp*M,i[r++]=Cp*$,i[r]=_-a}function G9(e,t,i,r){i2(e,t,i,r,Jl.radius)}function q9(e,t,i,r){i2(e,t,i,r,fa.radius)}function Dl(e,t,i,r){i2(e,t,i,r,Lt.radius)}function LO(e,t,i,r){Dl(e,t,i,r),qh(i,r,i,r)}function DO(e,t,i,r){Dl(e,t,i,r),Fl(i,r,i,r)}function DY(e,t,i,r,a){const d=Mn*e[t],y=Mn*e[t+1],m=e[t+2],_=Math.sin(y),$=Math.cos(y),M=a.radius/Math.sqrt(1-a.eccentricitySquared*_*_);i[r++]=(M+m)*$*Math.cos(d),i[r++]=(M+m)*$*Math.sin(d),i[r++]=(M*(1-a.eccentricitySquared)+m)*_}function Fl(e,t,i,r){DY(e,t,i,r,Lt)}function zl(e,t,i,r){const a=rY,d=e[t],y=e[t+1],m=e[t+2];let _,$,M,A,P,j,L,F,V,J,Q,Y,te,oe,ae,de,ve,Ie,Oe,Ne,Re;_=Math.abs(m),$=d*d+y*y,M=Math.sqrt($),A=$+m*m,P=Math.sqrt(A),Ne=Math.atan2(y,d),j=m*m/A,L=$/A,oe=a.a2/P,ae=a.a3-a.a4/P,L>.3?(F=_/P*(1+L*(a.a1+oe+j*ae)/P),Oe=Math.asin(F),J=F*F,V=Math.sqrt(1-J)):(V=M/P*(1-j*(a.a5-oe-L*ae)/P),Oe=Math.acos(V),J=1-V*V,F=Math.sqrt(J)),Q=1-Lt.eccentricitySquared*J,Y=Lt.radius/Math.sqrt(Q),te=a.a6*Y,oe=M-Y*V,ae=_-te*F,ve=V*oe+F*ae,de=V*ae-F*oe,Ie=de/(te/Q+ve),Oe+=Ie,Re=ve+de*Ie/2,m<0&&(Oe=-Oe),i[r++]=Cp*Ne,i[r++]=Cp*Oe,i[r]=Re}function FO(e,t,i,r){zl(e,t,i,r),Ll(i,r,i,r)}function zO(e,t,i,r){zl(e,t,i,r),qh(i,r,i,r)}const Ls={[Z.WGS84]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Ct,[Z.WGS84_COMPARABLE_LON_LAT]:Ct,[Z.SPHERICAL_ECEF]:Ll,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:qh,[Z.PLATE_CARREE]:Rl,[Z.WGS84]:Ct,[Z.WGS84_ECEF]:Fl},[Z.CGCS2000]:{[Z.CGCS2000]:Ct,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Ct,[Z.WGS84_COMPARABLE_LON_LAT]:Ct,[Z.SPHERICAL_ECEF]:Ll,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:Rl,[Z.WGS84]:null,[Z.WGS84_ECEF]:Fl},[Z.GCSMARS2000]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:Ct,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Ct,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:V9,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.GCSMOON2000]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:Ct,[Z.LON_LAT]:Ct,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:z9,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.WEB_MERCATOR]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Mh,[Z.WGS84_COMPARABLE_LON_LAT]:Mh,[Z.SPHERICAL_ECEF]:CO,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Ct,[Z.PLATE_CARREE]:RO,[Z.WGS84]:Mh,[Z.WGS84_ECEF]:NO},[Z.WGS84_ECEF]:{[Z.CGCS2000]:zl,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:zl,[Z.WGS84_COMPARABLE_LON_LAT]:zl,[Z.SPHERICAL_ECEF]:FO,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:zO,[Z.PLATE_CARREE]:OY,[Z.WGS84]:zl,[Z.WGS84_ECEF]:Ct},[Z.SPHERICAL_ECEF]:{[Z.CGCS2000]:Dl,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Dl,[Z.WGS84_COMPARABLE_LON_LAT]:Dl,[Z.SPHERICAL_ECEF]:Ct,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:LO,[Z.PLATE_CARREE]:PY,[Z.WGS84]:Dl,[Z.WGS84_ECEF]:DO},[Z.SPHERICAL_MARS_PCPF]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:q9,[Z.GCSMOON2000]:null,[Z.LON_LAT]:q9,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:Ct,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.SPHERICAL_MOON_PCPF]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:G9,[Z.LON_LAT]:G9,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:Ct,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.UNKNOWN]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:null,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:Ct,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.LON_LAT]:{[Z.CGCS2000]:Ct,[Z.GCSMARS2000]:Ct,[Z.GCSMOON2000]:Ct,[Z.LON_LAT]:Ct,[Z.WGS84_COMPARABLE_LON_LAT]:Ct,[Z.SPHERICAL_ECEF]:Ll,[Z.SPHERICAL_MARS_PCPF]:V9,[Z.SPHERICAL_MOON_PCPF]:z9,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:qh,[Z.PLATE_CARREE]:Rl,[Z.WGS84]:Ct,[Z.WGS84_ECEF]:Fl},[Z.WGS84_COMPARABLE_LON_LAT]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Ct,[Z.WGS84_COMPARABLE_LON_LAT]:Ct,[Z.SPHERICAL_ECEF]:Ll,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:Rl,[Z.WGS84]:Ct,[Z.WGS84_ECEF]:Fl},[Z.PLATE_CARREE]:{[Z.CGCS2000]:wh,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:wh,[Z.WGS84_COMPARABLE_LON_LAT]:wh,[Z.SPHERICAL_ECEF]:CY,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:NY,[Z.PLATE_CARREE]:Ct,[Z.WGS84]:wh,[Z.WGS84_ECEF]:jY}};function A6(e,t,i=k6()){return e==null||t==null?null:VO(e,t,i).projector}function VO(e,t,i){if(e==null||t==null||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=Io(e,i.source),a=Io(t,i.dest);return r===Z.UNKNOWN&&a===Z.UNKNOWN?Ti(e,t)?i.projector=Ct:i.projector=null:i.projector=Ls[r][a],i}function k6(){return{source:{spatialReference:null,spatialReferenceId:Z.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Z.UNKNOWN,metersPerUnit:1},projector:Ct}}const i0={spatialReference:null,spatialReferenceId:Z.UNKNOWN},GO={spatialReference:null,spatialReferenceId:Z.UNKNOWN},O6=k6(),FY=k6(),Mn=jq(1),Cp=OM(1),Ht=Vn(),Sn=Vn(),Va=Vn(),ct=Vn(),X1=Vn(),G1e=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:RY,canProjectWithoutEngine:$a,computeENUToSphericalPCPFLocalRotation:E6,computeSphericalPCPFToENULocalRotation:PO,computeTranslationToOriginAndRotation:kY,getProjectorName:dY,getTransformation:_O,getTransformations:hY,initializeProjection:xO,isLoaded:ec,load:Ql,localLinearScaleFactors:AY,lonLatToSphericalPCPF:LY,lonLatToWebMercatorComparable:jO,project:hu,projectBoundingRect:MY,projectBoundingSphere:EY,projectBuffer:Dn,projectDirection:IY,projectExtent:wY,projectMany:L9,projectMultipoint:yY,projectOrLoad:uY,projectOrLoadMany:wO,projectPoint:fY,projectPointToVector:xY,projectPointToWGS84ComparableLonLat:$Y,projectPolygon:bY,projectPolygonToWGS84ComparableLonLat:vY,projectPolyline:mY,projectPolylineToWGS84ComparableLonLat:gY,projectVectorToDehydratedPoint:SY,projectVectorToPoint:_Y,projectVectorToVector:F9,projectVectorToWGS84ComparableLonLat:kO,projectWithoutEngine:$O,projectXYZToVector:D9,sphericalPCPFtoLonLatElevation:i2,test:pY,tryProjectWithZConversion:SO,unload:cY},Symbol.toStringTag,{value:"Module"}));var U9;let so=U9=class extends pe{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new U9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],so.prototype,"cols",void 0),b([S({type:Ot,json:{write:!0}})],so.prototype,"level",void 0),b([S({type:String,json:{write:!0}})],so.prototype,"levelValue",void 0),b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],so.prototype,"origin",void 0),b([S({type:Number,json:{write:!0}})],so.prototype,"resolution",void 0),b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],so.prototype,"rows",void 0),b([S({type:Number,json:{write:!0}})],so.prototype,"scale",void 0),so=U9=b([B("esri.layers.support.LOD")],so);const xl=so;let zY=class{constructor(t,i,r,a,d=void 0){this.id=t,this.level=i,this.row=r,this.col=a,this.extent=d}};var ol;const D7=new ut({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let ir=ol=class extends pe{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:a=Xe.WebMercator,numLODs:d=24}=e;if(!Zi(a)){const A=[];if(i)for(let P=0;P<i.length;P++){const j=i[P];A.push(new xl({level:P,scale:j,resolution:j}))}else{let P=5e-4;for(let j=d-1;j>=0;j--)A.unshift(new xl({level:j,scale:P,resolution:P})),P*=2}return new ol({dpi:96,lods:A,origin:new Ze(0,0,a),size:[r,r],spatialReference:a})}const y=On(a),m=e.origin?new Ze({x:e.origin.x,y:e.origin.y,spatialReference:a}):new Ze(y?{x:y.origin[0],y:y.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),_=96,$=1/(Ma(a)*39.37*_),M=[];if(i)for(let A=0;A<i.length;A++){const P=i[A],j=P*$;M.push(new xl({level:A,scale:P,resolution:j}))}else{let A=NE(a)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const P=Math.ceil(d/t);M.push(new xl({level:0,scale:A,resolution:A*$}));for(let j=1;j<P;j++){const L=A/2**t,F=L*$;M.push(new xl({level:j,scale:L,resolution:F})),A=L}}return new ol({dpi:_,lods:M,origin:m,size:[r,r],spatialReference:a})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=On(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Ze.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],a=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(d=>{r.push(d.scale),t=d.scale>t?d.scale:t,i=d.scale<i?d.scale:i,a[d.level]=d})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const a=t[r],d=t[r+1];if(a<=e)return r;if(d===e)return r+1;if(a>e&&d<e)return r+Math.log(a/e)/Math.log(a/d)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const a=this.lodAt(e);if(!a)return null;let d,y;if(typeof t=="number")d=t,y=i;else if(Ti(t.spatialReference,this.spatialReference))d=t.x,y=t.y,r=i;else{const $=Lv(t,this.spatialReference);if($==null)return null;d=$.x,y=$.y,r=i}const m=a.resolution*this.size[0],_=a.resolution*this.size[1];return r||(r=new zY(null,0,0,0,xo())),r.level=e,r.row=Math.floor((this.origin.y-y)/_+.001),r.col=Math.floor((d-this.origin.x)/m+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=ol.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===ol.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const r=e.level-i.level,a=i.resolution*this.size[0]/2**r,d=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=xo()),e.extent[0]=this.origin.x+e.col*a,e.extent[1]=this.origin.y-(e.row+1)*d,e.extent[2]=e.extent[0]+a,e.extent[3]=e.extent[1]+d}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,a=r*this.size[0],d=r*this.size[1];return e[0]=this.origin.x+t.col*a,e[1]=this.origin.y-(t.row+1)*d,e[2]=e[0]+a,e[3]=e[1]+d,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return ol.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let a=0;a<r;a++){const d=this.lods[a],y=d.resolution*t;i.push(new xl({level:d.level,scale:d.scale,resolution:y}))}return new ol({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};b([S({type:Number,json:{write:!0}})],ir.prototype,"compressionQuality",void 0),b([S({type:Number,json:{write:!0}})],ir.prototype,"dpi",void 0),b([S({type:String,json:{read:D7.read,write:D7.write,origins:{"web-scene":{read:!1,write:!1}}}})],ir.prototype,"format",void 0),b([S({readOnly:!0})],ir.prototype,"isWrappable",null),b([S({type:Ze,json:{write:!0}})],ir.prototype,"origin",void 0),b([me("origin")],ir.prototype,"readOrigin",null),b([S({type:[xl],value:null,json:{write:!0}})],ir.prototype,"lods",null),b([S({readOnly:!0})],ir.prototype,"scales",void 0),b([S({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],ir.prototype,"size",void 0),b([me("size",["rows","cols"])],ir.prototype,"readSize",null),b([Se("size",{cols:{type:Ot},rows:{type:Ot}})],ir.prototype,"writeSize",null),b([S({type:Xe,json:{write:!0}})],ir.prototype,"spatialReference",void 0),ir=ol=b([B("esri.layers.support.TileInfo")],ir),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(ir||(ir={}));const VY=ir,fm={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],a=this.values;return r>=i?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},mb={xsmall:544,small:768,medium:992,large:1200};function GY(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function gb(e,t){return t?fm[e].valueToClassName[t].split(" "):[]}const qY=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Mo,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=mb}initialize(){this._breakpointsHandles.add(ke(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),kt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Wt(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=GY(i);if(!r){const a=JSON.stringify(mb,null,2);console.warn("provided breakpoints are not valid, using defaults:"+a)}i=r?i:mb,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Cr.acquire(),r=Cr.acquire();let a,d=!1;for(a in fm){const y=this[a],m=fm[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==m&&(d=!0,this[a]=m,gb(a,y).forEach(_=>r.push(_)),gb(a,m).forEach(_=>i.push(_)))}d&&(this._applyClassNameChanges(i,r),Cr.release(i),Cr.release(r))}_applyClassNameChanges(i,r){const a=this.container;a&&(r.forEach(d=>a.classList.remove(d)),i.forEach(d=>a.classList.add(d)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in fm)gb(r,this[r]).forEach(a=>i.classList.remove(a))}};return b([S()],t.prototype,"breakpoints",null),b([S()],t.prototype,"orientation",void 0),b([S()],t.prototype,"widthBreakpoint",void 0),b([S()],t.prototype,"heightBreakpoint",void 0),t=b([B("esri.views.BreakpointsOwner")],t),t};function P6(e){return typeof e=="string"?document.getElementById(e):e??null}function qO(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function F7(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function z7(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let dp=class extends De{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Mo,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(t,i,r={}){return this._installWatch(t,i,r,ke)}addWhen(t,i,r={}){return this._installWatch(t,i,r,Yl)}addOnCollectionChange(t,i,{initial:r=!1,final:a=!1}={}){const d=++this._handleId;return this._handles.add([Pp(t,"after-changes",this._createSyncUpdatingCallback(),t0),Pp(t,"change",i,{onListenerAdd:r?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:a?y=>i({added:[],removed:y.toArray()}):void 0})],d),va(()=>this._handles.remove(d))}addPromise(t){if(t==null)return t;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this._handles.has(Q1)||this._set("updating",!1))}},i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this._handles.remove(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(t,i,r={},a){const d=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,d);const y=a(t,i,r);return this._handles.add(y,d),va(()=>this._handles.remove(d))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),a=ke(t,r,{sync:!0,equals:()=>!1});return this._handles.add(a,i),a}_createSyncUpdatingCallback(){return()=>{this._handles.remove(Q1),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Vp(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(Q1))}),Q1)}}};b([S({readOnly:!0})],dp.prototype,"updating",void 0),dp=b([B("esri.core.support.WatchUpdatingTracking")],dp);const Q1=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var UY=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},ph={exports:{}},mi={},Mf={exports:{}},tc={};function UO(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function BY(e,t,i){}function HY(e,t,i){}var WY=/javascript\s*\:/img;function JY(e,t){return WY.test(t)?"":t}tc.whiteList=UO();tc.getDefaultWhiteList=UO;tc.onAttr=BY;tc.onIgnoreAttr=HY;tc.safeAttrValue=JY;var KY={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,a;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,a=e.length;r<a;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},x0=KY;function YY(e,t){e=x0.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,a=0,d=0,y="";function m(){if(!r){var M=x0.trim(e.slice(a,d)),A=M.indexOf(":");if(A!==-1){var P=x0.trim(M.slice(0,A)),j=x0.trim(M.slice(A+1));if(P){var L=t(a,y.length,P,j,M);L&&(y+=L+"; ")}}}a=d+1}for(;d<i;d++){var _=e[d];if(_==="/"&&e[d+1]==="*"){var $=e.indexOf("*/",d+2);if($===-1)break;d=$+1,a=d+1,r=!1}else _==="("?r=!0:_===")"?r=!1:_===";"?r||m():_===`
`&&m()}return x0.trim(y)}var ZY=YY,ey=tc,XY=ZY;function V7(e){return e==null}function QY(e){var t={};for(var i in e)t[i]=e[i];return t}function BO(e){e=QY(e||{}),e.whiteList=e.whiteList||ey.whiteList,e.onAttr=e.onAttr||ey.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||ey.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||ey.safeAttrValue,this.options=e}BO.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,a=i.onAttr,d=i.onIgnoreAttr,y=i.safeAttrValue,m=XY(e,function(_,$,M,A,P){var j=r[M],L=!1;if(j===!0?L=j:typeof j=="function"?L=j(A):j instanceof RegExp&&(L=j.test(A)),L!==!0&&(L=!1),A=y(M,A),!!A){var F={position:$,sourcePosition:_,source:P,isWhite:L};if(L){var V=a(M,A,F);return V7(V)?M+":"+A:V}else{var V=d(M,A,F);if(!V7(V))return V}}});return m};var eZ=BO;(function(e,t){var i=tc,r=eZ;function a(y,m){var _=new r(m);return _.process(y)}t=e.exports=a,t.FilterCSS=r;for(var d in i)t[d]=i[d]})(Mf,Mf.exports);var C6={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,a;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,a=e.length;r<a;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},tZ=Mf.exports.FilterCSS,iZ=Mf.exports.getDefaultWhiteList,Vg=C6;function HO(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var WO=new tZ;function rZ(e,t,i){}function sZ(e,t,i){}function nZ(e,t,i){}function oZ(e,t,i){}function JO(e){return e.replace(lZ,"&lt;").replace(uZ,"&gt;")}function aZ(e,t,i,r){if(i=eP(i),t==="href"||t==="src"){if(i=Vg.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(ty.lastIndex=0,ty.test(i))return""}else if(t==="style"){if(G7.lastIndex=0,G7.test(i)||(q7.lastIndex=0,q7.test(i)&&(ty.lastIndex=0,ty.test(i))))return"";r!==!1&&(r=r||WO,i=r.process(i))}return i=tP(i),i}var lZ=/</g,uZ=/>/g,hZ=/"/g,cZ=/&quot;/g,pZ=/&#([a-zA-Z0-9]*);?/gim,dZ=/&colon;?/gim,fZ=/&newline;?/gim,ty=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,G7=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,q7=/u\s*r\s*l\s*\(.*/gi;function KO(e){return e.replace(hZ,"&quot;")}function YO(e){return e.replace(cZ,'"')}function ZO(e){return e.replace(pZ,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function XO(e){return e.replace(dZ,":").replace(fZ," ")}function QO(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Vg.trim(t)}function eP(e){return e=YO(e),e=ZO(e),e=XO(e),e=QO(e),e}function tP(e){return e=KO(e),e=JO(e),e}function yZ(){return""}function mZ(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(y){return i?!0:Vg.indexOf(e,y)!==-1}var a=[],d=!1;return{onIgnoreTag:function(y,m,_){if(r(y))if(_.isClosing){var $="[/removed]",M=_.position+$.length;return a.push([d!==!1?d:_.position,M]),d=!1,$}else return d||(d=_.position),"[removed]";else return t(y,m,_)},remove:function(y){var m="",_=0;return Vg.forEach(a,function($){m+=y.slice(_,$[0]),_=$[1]}),m+=y.slice(_),m}}}function gZ(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var a=e.indexOf("-->",r);if(a===-1)break;i=a+3}return t}function vZ(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}mi.whiteList=HO();mi.getDefaultWhiteList=HO;mi.onTag=rZ;mi.onIgnoreTag=sZ;mi.onTagAttr=nZ;mi.onIgnoreTagAttr=oZ;mi.safeAttrValue=aZ;mi.escapeHtml=JO;mi.escapeQuote=KO;mi.unescapeQuote=YO;mi.escapeHtmlEntities=ZO;mi.escapeDangerHtml5Entities=XO;mi.clearNonPrintableCharacter=QO;mi.friendlyAttrValue=eP;mi.escapeAttrValue=tP;mi.onIgnoreTagStripAll=yZ;mi.StripTagBody=mZ;mi.stripCommentTag=gZ;mi.stripBlankChar=vZ;mi.cssFilter=WO;mi.getDefaultCSSWhiteList=iZ;var r2={},$l=C6;function bZ(e){var t=$l.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=$l.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function wZ(e){return e.slice(0,2)==="</"}function _Z(e,t,i){var r="",a=0,d=!1,y=!1,m=0,_=e.length,$="",M="";e:for(m=0;m<_;m++){var A=e.charAt(m);if(d===!1){if(A==="<"){d=m;continue}}else if(y===!1){if(A==="<"){r+=i(e.slice(a,m)),d=m,a=m;continue}if(A===">"){r+=i(e.slice(a,d)),M=e.slice(d,m+1),$=bZ(M),r+=t(d,r.length,$,M,wZ(M)),a=m+1,d=!1;continue}if(A==='"'||A==="'")for(var P=1,j=e.charAt(m-P);j.trim()===""||j==="=";){if(j==="="){y=A;continue e}j=e.charAt(m-++P)}}else if(A===y){y=!1;continue}}return a<e.length&&(r+=i(e.substr(a))),r}var SZ=/[^a-zA-Z0-9\\_:.-]/gim;function xZ(e,t){var i=0,r=0,a=[],d=!1,y=e.length;function m(P,j){if(P=$l.trim(P),P=P.replace(SZ,"").toLowerCase(),!(P.length<1)){var L=t(P,j||"");L&&a.push(L)}}for(var _=0;_<y;_++){var $=e.charAt(_),M,A;if(d===!1&&$==="="){d=e.slice(i,_),i=_+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:TZ(e,_+1);continue}if(d!==!1&&_===r){if(A=e.indexOf($,_+1),A===-1)break;M=$l.trim(e.slice(r+1,A)),m(d,M),d=!1,_=A,i=_+1;continue}if(/\s|\n|\t/.test($))if(e=e.replace(/\s|\n|\t/g," "),d===!1)if(A=$Z(e,_),A===-1){M=$l.trim(e.slice(i,_)),m(M),d=!1,i=_+1;continue}else{_=A-1;continue}else if(A=IZ(e,_-1),A===-1){M=$l.trim(e.slice(i,_)),M=U7(M),m(d,M),d=!1,i=_+1;continue}else continue}return i<e.length&&(d===!1?m(e.slice(i)):m(d,U7($l.trim(e.slice(i))))),$l.trim(a.join(" "))}function $Z(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function TZ(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function IZ(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function EZ(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function U7(e){return EZ(e)?e.substr(1,e.length-2):e}r2.parseTag=_Z;r2.parseAttr=xZ;var MZ=Mf.exports.FilterCSS,xn=mi,iP=r2,AZ=iP.parseTag,kZ=iP.parseAttr,ym=C6;function iy(e){return e==null}function OZ(e){var t=ym.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=ym.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=ym.trim(e.slice(0,-1))),{html:e,closing:i}}function PZ(e){var t={};for(var i in e)t[i]=e[i];return t}function CZ(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function rP(e){e=PZ(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=xn.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=CZ(e.whiteList||e.allowList):e.whiteList=xn.whiteList,e.onTag=e.onTag||xn.onTag,e.onTagAttr=e.onTagAttr||xn.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||xn.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||xn.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||xn.safeAttrValue,e.escapeHtml=e.escapeHtml||xn.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new MZ(e.css))}rP.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,a=i.onTag,d=i.onIgnoreTag,y=i.onTagAttr,m=i.onIgnoreTagAttr,_=i.safeAttrValue,$=i.escapeHtml,M=t.cssFilter;i.stripBlankChar&&(e=xn.stripBlankChar(e)),i.allowCommentTag||(e=xn.stripCommentTag(e));var A=!1;i.stripIgnoreTagBody&&(A=xn.StripTagBody(i.stripIgnoreTagBody,d),d=A.onIgnoreTag);var P=AZ(e,function(j,L,F,V,J){var Q={sourcePosition:j,position:L,isClosing:J,isWhite:Object.prototype.hasOwnProperty.call(r,F)},Y=a(F,V,Q);if(!iy(Y))return Y;if(Q.isWhite){if(Q.isClosing)return"</"+F+">";var te=OZ(V),oe=r[F],ae=kZ(te.html,function(de,ve){var Ie=ym.indexOf(oe,de)!==-1,Oe=y(F,de,ve,Ie);return iy(Oe)?Ie?(ve=_(F,de,ve,M),ve?de+'="'+ve+'"':de):(Oe=m(F,de,ve,Ie),iy(Oe)?void 0:Oe):Oe});return V="<"+F,ae&&(V+=" "+ae),te.closing&&(V+=" /"),V+=">",V}else return Y=d(F,V,Q),iy(Y)?$(V):Y},$);return A&&(P=A.remove(P)),P};var NZ=rP;(function(e,t){var i=mi,r=r2,a=NZ;function d(m,_){var $=new a(_);return $.process(m)}t=e.exports=d,t.filterXSS=d,t.FilterXSS=a,function(){for(var m in i)t[m]=i[m];for(var _ in r)t[_]=r[_]}();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=e.exports)})(ph,ph.exports);var jZ=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(d,y,m,_){return d==="a"&&y==="href"||(d==="img"||d==="source")&&y==="src"?r.sanitizeUrl(m):ph.exports.safeAttrValue(d,y,m,_)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var a;t&&!i?a=t:t&&i?(a=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(d){d==="whiteList"?a.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):a[d]=t[d]})):(a=Object.create(this.arcgisFilterOptions),a.whiteList=this.arcgisWhiteList),this.xssFilterOptions=a,this._xssFilter=new ph.exports.FilterXSS(a)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,a=r===void 0?!0:r,d=this._trim(t.substring(0,t.indexOf(":"))),y=t==="/",m=/^#/.test(t),_=d&&this.allowedProtocols.indexOf(d.toLowerCase())>-1;return y||m||_?ph.exports.escapeAttrValue(t):!d&&!a?ph.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,a){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,a):ph.exports.safeAttrValue(t,i,r,a)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,a){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(a)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(a){Array.isArray(r[a])&&Array.isArray(i[a])?i[a]=i[a].concat(r[a]):i[a]=r[a]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var a=!1,d=void 0;if(Array.isArray(t))d=t.reduce(function(m,_){var $=r.validate(_,i);return $.isValid?m.concat([_]):(a=!0,m.concat([$.sanitized]))},[]);else if(UY(t)){var y=Object.keys(t);d=y.reduce(function(m,_){var $=t[_],M=r.validate($,i);return M.isValid?m[_]=$:(a=!0,m[_]=M.sanitized),m},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return a?d:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const s2=new Map;function sP(){s2.clear()}function RZ(e){return s2.get(e)}function LZ(e,t){s2.set(e,t)}function vb(e){s2.delete(e)}var Uh,Np,DZ=function(e){if("WebkitTransition"in e.style)Uh="webkitTransitionEnd",Np="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Uh="transitionend",Np="animationend"}},nP=function(e){Uh||DZ(e)},FZ=function(e,t){return t===void 0&&(t=e+"-active"),function(i){nP(i);var r=!1,a=function(d){r||(r=!0,i.removeEventListener(Uh,a),i.removeEventListener(Np,a),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(Uh,a),i.addEventListener(Np,a),requestAnimationFrame(function(){i.classList.add(t)})}},zZ=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){nP(i);var a=!1,d=function(y){a||(a=!0,i.removeEventListener(Uh,d),i.removeEventListener(Np,d),r())};i.classList.add(e),i.addEventListener(Uh,d),i.addEventListener(Np,d),requestAnimationFrame(function(){i.classList.add(t)})}};const VZ=fe.getLogger("esri.widgets.support.widgetUtils");function GZ(e){const t=Cr.acquire();for(let r=0;r<arguments.length;r++){const a=arguments[r],d=typeof a;if(d==="string")t.push(a);else if(Array.isArray(a))t.push.apply(t,a);else if(d==="object")for(const y in a)a[y]&&t.push(y)}const i=t.join(" ");return Cr.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{var a;sP();for(const d of r)(a=e.get(d.target))==null||a(d)}),i=(r,a,d)=>(e.has(r)&&VZ.error("Already observing element",r),e.set(r,a),t.observe(r,d),va(()=>{t.unobserve(r),e.delete(r)}));return(r,a,d)=>{let y=null;return ke(()=>typeof r=="function"?r():r,m=>{y==null||y.remove(),m&&(y=i(m,a,d))},aa)}})();function qZ(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function B1e(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function H1e(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function W1e(e,t){return(e==="enter"?FZ:zZ)(t)}const UZ=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],BZ=UZ.reduce((e,t)=>(e[t]=[],e),{}),HZ=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],oP=new jZ({whiteList:BZ,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(HZ.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function WZ(e){return e==="Enter"||e===" "}const aP="http://www.w3.org/",n2=`${aP}2000/svg`,lP=`${aP}1999/xlink`;let B7=[],N6=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},j6=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),uP=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},JZ=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(j6(e[r],t))return r}return-1},bb=(e,t,i,r)=>{let a=e[t];if(a.vnodeSelector==="")return;let d=a.properties;if(!(d&&(d.key===void 0?d.bind:d.key))){for(let y=0;y<e.length;y++)if(y!==t){let m=e[y];if(j6(m,a))throw new Error(`${i.vnodeSelector} had a ${a.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},KZ=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},B9=[],H9=!1,hP=e=>{(e.children||[]).forEach(hP),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},H7=()=>{H9=!1,B9.forEach(hP),B9.length=0},W7=e=>{B9.push(e),H9||(H9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(H7,{timeout:16}):setTimeout(H7,16))},J7=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),W7(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),W7(e))},YZ=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,a=Object.keys(t),d=a.length;for(let y=0;y<d;y++){let m=a[y],_=t[m];if(m==="className")throw new Error('Property "className" is not supported, use "class".');if(m==="class")W9(e,_,!0);else if(m==="classes"){let $=Object.keys(_),M=$.length;for(let A=0;A<M;A++){let P=$[A];_[P]&&e.classList.add(P)}}else if(m==="styles"){let $=Object.keys(_),M=$.length;for(let A=0;A<M;A++){let P=$[A],j=_[P];j&&(uP(j),i.styleApplyer(e,P,j))}}else if(m!=="key"&&_!=null){let $=typeof _;$==="function"?(m.lastIndexOf("on",0)===0&&(r&&(_=r(m,_,e,t)),m==="oninput"&&function(){let M=_;_=function(A){M.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),e[m]=_):i.namespace===n2?m==="href"?e.setAttributeNS(lP,m,_):e.setAttribute(m,_):$==="string"&&m!=="value"?m==="innerHTML"?e[m]=oP.sanitize(_):cP(e)&&m in e?e[m]=_:e.setAttribute(m,_):e[m]=_}}};function cP(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Gg,ZZ=(e,t,i)=>{if(t)for(let r of t)np(r,e,void 0,i)},pP=(e,t,i)=>{ZZ(e,t.children,i),t.text&&(e.textContent=t.text),YZ(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},np=(e,t,i,r)=>{let a,d=0,y=e.vnodeSelector,m=t.ownerDocument;if(y==="")a=e.domNode=m.createTextNode(e.text),i!==void 0?t.insertBefore(a,i):t.appendChild(a);else{for(let _=0;_<=y.length;++_){let $=y.charAt(_);if(_===y.length||$==="."||$==="#"){let M=y.charAt(d-1),A=y.slice(d,_);M==="."?a.classList.add(A):M==="#"?a.id=A:(A==="svg"&&(r=N6(r,{namespace:n2})),r.namespace!==void 0?a=e.domNode=m.createElementNS(r.namespace,A):(a=e.domNode=e.domNode||m.createElement(A),A==="input"&&e.properties&&e.properties.type!==void 0&&a.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(a,i):a.parentNode!==t&&t.appendChild(a)),d=_+1}}pP(a,e,r)}},W9=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},XZ=(e,t,i,r)=>{if(!i)return;let a=!1,d=Object.keys(i),y=d.length;for(let m=0;m<y;m++){let _=d[m],$=i[_],M=t[_];if(_==="class")M!==$&&(W9(e,M,!1),W9(e,$,!0));else if(_==="classes"){let A=e.classList,P=Object.keys($),j=P.length;for(let L=0;L<j;L++){let F=P[L],V=!!$[F];V!==!!M[F]&&(a=!0,V?A.add(F):A.remove(F))}}else if(_==="styles"){let A=Object.keys($),P=A.length;for(let j=0;j<P;j++){let L=A[j],F=$[L];F!==M[L]&&(a=!0,F?(uP(F),r.styleApplyer(e,L,F)):r.styleApplyer(e,L,""))}}else if($||typeof M!="string"||($=""),_==="value"){let A=e[_];A!==$&&(e["oninput-value"]?A===e["oninput-value"]:$!==M)&&(e[_]=$,e["oninput-value"]=void 0),$!==M&&(a=!0)}else if($!==M){let A=typeof $;A==="function"&&r.eventHandlerInterceptor||(r.namespace===n2?_==="href"?e.setAttributeNS(lP,_,$):e.setAttribute(_,$):A==="string"?_==="innerHTML"?e[_]=oP.sanitize($):_==="role"&&$===""?e.removeAttribute(_):cP(e)&&_ in e?e[_]=$:e.setAttribute(_,$):e[_]!==$&&(e[_]=$),a=!0)}}return a},QZ=(e,t,i,r,a)=>{if(i===r)return!1;r=r||B7;let d,y=(i=i||B7).length,m=r.length,_=0,$=0,M=!1;for(;$<m;){let A=_<y?i[_]:void 0,P=r[$];if(A!==void 0&&j6(A,P))M=Gg(A,P,a)||M,_++;else{let j=JZ(i,P,_+1);if(j>=0){for(d=_;d<j;d++)J7(i[d]),bb(i,d,e,"removed");M=Gg(i[j],P,a)||M,_=j+1}else np(P,t,_<y?i[_].domNode:void 0,a),KZ(P),bb(r,$,e,"added")}$++}if(y>_)for(d=_;d<y;d++)J7(i[d]),bb(i,d,e,"removed");return M};Gg=(e,t,i)=>{let r=e.domNode,a=!1;if(e===t)return!1;let d=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(y,r),t.domNode=y,a=!0,a}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=N6(i,{namespace:n2})),e.text!==t.text&&(d=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,d=QZ(t,r,e.children,t.children,i)||d,d=XZ(r,e.properties,t.properties,i)||d,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return d&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),a};let $0=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,Gg(r,i,t)},domNode:e.domNode});const eX={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Ac=e=>N6(eX,e),Vl={create:(e,t)=>(t=Ac(t),np(e,document.createElement("div"),void 0,t),$0(e,t)),append:(e,t,i)=>(i=Ac(i),np(t,e,void 0,i),$0(t,i)),insertBefore:(e,t,i)=>(i=Ac(i),np(t,e.parentNode,e,i),$0(t,i)),merge:(e,t,i)=>(i=Ac(i),t.domNode=e,pP(e,t,i),$0(t,i)),replace:(e,t,i)=>(i=Ac(i),np(t,e.parentNode,e,i),e.parentNode.removeChild(e),$0(t,i))},dP,tX=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};dP=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let iX=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?dP(i.children,a=>a.domNode===r):void 0}),i},rX=(e,t,i)=>{let r=function(a){i("domEvent",a);let d=t(),y=tX(a.currentTarget,d.domNode);y.reverse();let m,_=iX(d.getLastRender(),y);return e.scheduleRender(),_&&(m=_.properties[`on${a.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",a),m};return(a,d,y,m)=>r},K7=e=>{let t,i,r=Ac(e),a=r.performanceLogger,d=!0,y=!1,m=[],_=[],$=(A,P,j)=>{let L,F=()=>L;r.eventHandlerInterceptor=rX(t,F,a),L=A(P,j(),r),m.push(L),_.push(j)},M=()=>{if(i=void 0,d){d=!1,a("renderStart",void 0);for(let A=0;A<m.length;A++){let P=_[A]();a("rendered",void 0),m[A].update(P),a("patched",void 0)}a("renderDone",void 0),d=!0}};return t={renderNow:M,scheduleRender:()=>{i||y||(i=requestAnimationFrame(M))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,d=!0,t.scheduleRender()},append:(A,P)=>{$(Vl.append,A,P)},insertBefore:(A,P)=>{$(Vl.insertBefore,A,P)},merge:(A,P)=>{$(Vl.merge,A,P)},replace:(A,P)=>{$(Vl.replace,A,P)},detach:A=>{for(let P=0;P<_.length;P++)if(_[P]===A)return _.splice(P,1),m.splice(P,1)[0];throw new Error("renderFunction was not found")}},t},al=class extends De{constructor(){super(...arguments),this.items=new Le,this._watchUpdatingTracking=new dp,this._callbacks=new Map,this._projector=K7(),this._hiddenProjector=K7()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const a=()=>r.render();this._callbacks.set(r,a),this._projector.append(this.surface,a)}for(const r of i.removed){const a=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(a.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let a;const d=()=>(a=t.render(),a);r.append(i,d),r.renderNow();const y={left:0,top:0,right:0,bottom:0};if(a&&a.domNode){const m=a.domNode.getBoundingClientRect();y.left=m.left,y.top=m.top,y.right=m.right,y.bottom=m.bottom}for(r.detach(d);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(t,i){const r=this.computeBoundingRect(t),a=this.computeBoundingRect(i);return Math.max(r.left,a.left)<=Math.min(r.right,a.right)&&Math.max(r.top,a.top)<=Math.min(r.bottom,a.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t){if(!this.items.some(r=>r.visible))return;const i=t.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};b([S({readOnly:!0})],al.prototype,"surface",void 0),b([S({readOnly:!0})],al.prototype,"items",void 0),b([S({readOnly:!0})],al.prototype,"needsRender",null),b([S({readOnly:!0})],al.prototype,"_watchUpdatingTracking",void 0),b([S({readOnly:!0})],al.prototype,"updating",null),al=b([B("esri.views.overlay.ViewOverlay")],al);const Y7=al,wb=[0,0];function sX(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return wb[0]=i.left+((t==null?void 0:t.pageXOffset)??0),wb[1]=i.top+((t==null?void 0:t.pageYOffset)??0),wb}function Z7(e){e&&(qO(e),e.parentNode&&e.parentNode.removeChild(e))}function nX(e){const t=document.createElement("div");return e.appendChild(t),t}const T0=16,ry=750,oX=512,aX=2,lX=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:T0,time:ry},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ke(()=>this.cursor,r=>{const{surface:a}=this;a&&a.setAttribute("data-cursor",r)}),ke(()=>this.navigating,r=>{const{surface:a}=this;a&&a.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([ke(()=>this.ui,(i,r)=>this._handleUIChange(i,r),kt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Wt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),a=P6(i);if(a||typeof i!="string"||fe.getLogger(this).error("#container",`element with id '${i}' not found`),r===a)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Z7(this.root),this._set("root",null)),this.userContent&&(z7(this.userContent,r),Z7(this.userContent),this._set("userContent",null))),!a)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);a.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",z7(a,d),a.appendChild(d),this._set("userContent",d);const y=document.createElement("div");y.className="esri-view-root",a.insertBefore(y,a.firstChild),this._set("root",y);const m=document.createElement("div");m.className="esri-view-surface",m.setAttribute("role","application"),m.tabIndex=0,y.appendChild(m),this._set("surface",m);const _=new Y7;y.appendChild(_.surface),this._set("overlay",_),this.addHandles(ke(()=>_.needsRender,$=>{$&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Sp({render:()=>{var M;return(M=this.overlay)==null?void 0:M.render()}}):this._overlayRenderTaskHandle=ai(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",a),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,a){const d=this.position;return i-=d?d[0]:0,r-=d?d[1]:0,a?(a[0]=i,a[1]=r):a=[i,r],a}containerToPage(i,r,a){const d=this.position;return i+=d?d[0]:0,r+=d?d[1]:0,a?(a[0]=i,a[1]=r):a=[i,r],a}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(ke(()=>this.root,a=>{i.container=a?nX(a):null},kt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=T0,i.time=ry,this.addHandles([(()=>{const r=()=>{i.freq=T0,i.time=ry};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Sp({prepare:r=>{const a=this._measure(),d=this._freqInfo;if(d.time+=r.deltaTime,a&&(d.freq=T0,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const y=this._position();d.freq=y||a?T0:Math.min(ry,d.freq*aX),!a&&d.freq>=oX&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,a=i?i.clientHeight:0;if(r===0||a===0)return this.suspended||this._set("suspended",!0),!1;const d=this.width,y=this.height;return r===d&&a===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",a),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:d,oldHeight:y,width:r,height:a}),!0)}_position(){const i=this.container,r=this.position,a=i&&sX(i);return!!a&&(!r||a[0]!==r[0]||a[1]!==r[1])&&(this._set("position",[a[0],a[1]]),!0)}forceDOMReadyCycle(){}};return b([S()],t.prototype,"container",null),b([S({readOnly:!0})],t.prototype,"focused",null),b([S({readOnly:!0})],t.prototype,"height",void 0),b([S({type:Y7})],t.prototype,"overlay",void 0),b([S({readOnly:!0})],t.prototype,"position",void 0),b([S({readOnly:!0})],t.prototype,"resizing",void 0),b([S({readOnly:!0})],t.prototype,"root",void 0),b([S({value:null,readOnly:!0})],t.prototype,"size",null),b([S({readOnly:!0})],t.prototype,"surface",void 0),b([S({readOnly:!0})],t.prototype,"suspended",void 0),b([S()],t.prototype,"ui",void 0),b([S({readOnly:!0})],t.prototype,"userContent",void 0),b([S({readOnly:!0})],t.prototype,"width",void 0),b([S()],t.prototype,"widthBreakpoint",void 0),t=b([B("esri.views.DOMContainer")],t),t};let uX=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const a=t[r],d=new LI(a,void 0,void 0,2,2);this._properties[r]={pool:d,acquired:[]}}this._afterDispatchHandle=CD(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)tx(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let a=r.pool.acquire();for(r.acquired.push(a);a===i;)r.acquired.push(a),a=r.pool.acquire();return a}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const a of i.acquired)tx(a)?i.acquired[r++]=a:i.pool.release(a);i.acquired.length=r}}};const hX=le("mac")?"Meta":"Ctrl",o2={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)o2[e]=String.fromCharCode(e);for(let e=1;e<25;e++)o2[111+e]=`F${e}`;for(let e=65;e<91;e++)o2[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function cX(e){if(e.key!==void 0)return FI(e);const t=o2[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function pX(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let dX=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const X7=fe.getLogger("esri.views.input.InputHandler");let Ui=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?X7.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let a;typeof i=="function"?(r=i,a=[]):a=i||[];const d=typeof t=="string"?new dX(t,a):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},m=M=>{const A=this._incoming[M.match.eventType];if(A){const P=A.indexOf(M);A.splice(P,1),y(),this._manager&&this._manager.updateDependencies()}},_=new fX(d,r,{onPause:m,onRemove:m,onResume:M=>{const A=this._incoming[M.match.eventType];A&&!A.includes(M)&&(A.push(M),y(),this._manager&&this._manager.updateDependencies())}});let $=this._incoming[d.eventType];return $||($=[],this._incoming[d.eventType]=$),$.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new yX(t,{onEmit:(r,a,d,y)=>{var m;(m=this._manager)==null||m.emit(r.eventType,a,d,y)},onRemove:r=>{var a;delete this._outgoing[r.eventType],(a=this._manager)==null||a.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):X7.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const a of i)if(a.match.matches(t)&&((r=a.callback)==null||r.call(a,t),t.shouldStopPropagation()))break}}},fX=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},yX=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},mX=class extends Ui{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:a}=t;i===this._value&&this._x===r&&this._y===a||(this._value=i,this._x=r,this._y=a,this._onChange(i,r,a))}},gX=class{constructor(t,i){this._observable=new Pv,this._value=t,this._equalityFunction=i}get value(){return Je(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function qg(e,t=wI){return new gX(e,t)}let vX=class extends Ui{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=qg(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},$s=class extends De{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=hX,this._latestPointerType="mouse",this._propertiesPool=new uX({latestPointerLocation:_X},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=Bl.INTERNAL){if(this._nameToGroup[t])return void fe.getLogger(this).error("There is already an InputHandler group registered under the name `"+t+"`");if(i.length===0)return void fe.getLogger(this).error("Can't register a group of zero handlers");const a={name:t,handlers:i.map(d=>({handler:d,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=a;for(let d=a.handlers.length-1;d>=0;d--){const y=a.handlers[d];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(m,_,$,M,A)=>{this._emitInputEvent(y.priorityIndex+1,m,_,$,A,M)},setPointerCapture:(m,_)=>{this._setPointerCapture(a,y,m,_)},setEventCallback:m=>{y.eventCallback=m},setUninstallCallback:m=>{y.uninstallCallback=m},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{var a;r.removed=!0,(a=r.uninstallCallback)==null||a.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):fe.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const a=this._handlers[r];a.priorityIndex=r,this._handlersPriority.push(a)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const a=this._handlersPriority[r];a.priorityIndex=r;let d=a.handler.hasSideEffects;if(!d){for(const y of a.handler.outgoingEventTypes)if(t.has(y)){d=!0;break}}if(d)for(const y of a.handler.incomingEventMatches){t.add(y.eventType);for(const m of y.keyModifiers)pX(m)||i.add(m)}a.active=d}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const a=this._get("latestPointerLocation");if(a==null||a.x!==i||a.y!==r){const d=this._propertiesPool.get("latestPointerLocation");d.x=i,d.y=r,this._set("latestPointerLocation",d)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const d=i;this._pointerCaptures.delete(d.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,a=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,a)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const a=()=>{if(!r){const m=new Set;this._activeKeyModifiers.forEach(_=>{m.add(_)}),this._activeKeyModifiers=m,r=!0}},d=(m,_)=>{_&&!this._activeKeyModifiers.has(m)?(a(),this._activeKeyModifiers.add(m)):!_&&this._activeKeyModifiers.has(m)&&(a(),this._activeKeyModifiers.delete(m))};if(t==="key-down"||t==="key-up"){const m=i.key;this._keyModifiers.has(m)&&d(m,t==="key-down")}const y=i.native;d("Alt",!(!y||!y.altKey)),d("Ctrl",!(!y||!y.ctrlKey)),d("Shift",!(!y||!y.shiftKey)),d("Meta",!(!y||!y.metaKey)),d("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new mX((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new vX,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Bl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Bl.INTERNAL)}_setPointerCapture(t,i,r,a){const d=t.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,y),a?(y.add(d),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):y.has(d)&&(y.delete(d),y.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,a){this._emitInputEvent(0,t,i,r,a)}_emitInputEvent(t,i,r,a,d,y){const m=a!==void 0?a:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_=d!==void 0&&d,$={event:new bX(i,r,m,y||this._activeKeyModifiers,_),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push($):this._doNewPropagation($)}_doNewPropagation(t){this._currentPropagation={events:new jg,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,r;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:a,priorityIndex:d}=t.events.pop(),y=a.data&&a.data.eventId;if(!(y!=null&&this._stoppedPropagationEventIds.has(y)))for(t.currentHandler=this._handlersPriority[d];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!a.shouldStopPropagation()&&((r=(i=t.currentHandler).eventCallback)==null||r.call(i,a)),a.shouldStopPropagation()){y!=null&&this._stoppedPropagationEventIds.add(y);break}if(a.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:a,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new jg;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const a of i.handler.incomingEventMatches){if(r.eventType!==a.eventType)continue;const d=r.keyModifiers.filter(y=>a.keyModifiers.includes(y));if(d.length===r.keyModifiers.length!=(d.length===a.keyModifiers.length))return r.keyModifiers.length>a.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let a=0;for(;a<i.length&&this._compareHandlerPriority(r,i[a])>=0;)a++;i.splice(a,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>{this._onEventReceived(i,r)})},disablePointerCapture:t}}};b([S({readOnly:!0})],$s.prototype,"hasPendingInputs",null),b([S({constructOnly:!0})],$s.prototype,"eventSource",void 0),b([S({constructOnly:!0})],$s.prototype,"recognizers",void 0),b([S()],$s.prototype,"_latestPointerType",void 0),b([S()],$s.prototype,"latestPointerType",null),b([S()],$s.prototype,"multiTouchActive",null),b([S({readOnly:!0})],$s.prototype,"latestPointerLocation",void 0),b([S()],$s.prototype,"_paused",void 0),b([S({readOnly:!0})],$s.prototype,"updating",null),$s=b([B("esri.views.input.InputManager")],$s);let bX=class{constructor(t,i,r,a,d){this.type=t,this.data=i,this.timestamp=r,this.modifiers=a,this.cancelable=d,this._propagationState=Tl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Tl.STOPPED}shouldStopPropagation(){return(this._propagationState&Tl.STOPPED)!=0}async(t){this._propagationState|=Tl.PAUSED;const i=(r,a)=>{this._propagationState&=~Tl.PAUSED;const d=this._resumeCallback;if(this._resumeCallback=null,d&&d(),a)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Tl.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Tl;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Tl||(Tl={}));const Bl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let wX=class{};const _X=wX;function Wn(e){return e!=null&&"open"in e&&"declaredClass"in e}function Q7(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const SX=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ke(()=>[this.ui,this.popup],([i,r],a)=>{const d="popup",y="manual";if(a){const[m,_]=a;m&&Wn(_)&&(_.view=null,Q7(_)&&m.remove(_,d))}i&&Wn(r)&&(r.view=this,Q7(r)&&i.add(r,{key:d,position:y,internal:!0}))},kt),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!Wn(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(Wn(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Wn(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},Bl.WIDGET)]),S6(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{be(()=>import("./Popup-0fb2d428.js").then(i=>i.a0),["assets/Popup-0fb2d428.js","assets/throttle-7bf02de9.js","assets/ByteSizeUnit-d4757d40.js","assets/AttachmentInfo-c77cb828.js","assets/symbolUtils-3d06f842.js","assets/utils-7c7e7983.js","assets/utils-d75b7bae.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/devEnvironmentUtils-5002a058.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){Wn(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void fe.getLogger(this).error(new se("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Wn(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){await this.when();const{location:a,queryArea:d,layerViewsAndGraphics:y,clientOnlyGraphics:m}=await this._prepareFetchPopupFeatures(i,r),_=Promise.resolve(m),$=this._queryLayerPopupFeatures(d,y,r),M=$.map(A=>A.promise);return{location:a,clientOnlyGraphics:m,allGraphicsPromise:gD([_,...M]).then(A=>Array.from(new Set(A.flat()))),promisesPerLayerView:$}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Wn(this.popup))return this._popupSetupTask=f4(async r=>{const{default:a}=await be(()=>import("./Popup-0fb2d428.js").then(y=>y.a0),["assets/Popup-0fb2d428.js","assets/throttle-7bf02de9.js","assets/ByteSizeUnit-d4757d40.js","assets/AttachmentInfo-c77cb828.js","assets/symbolUtils-3d06f842.js","assets/utils-7c7e7983.js","assets/utils-d75b7bae.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/devEnvironmentUtils-5002a058.js"]);if(Jt(r),!this.popup||Wn(this.popup))return;const d=this.popup;delete d.open,delete d.close,this.popup=new a(d)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,r,a){return r.map(({layerView:d,graphics:y})=>{const m={clientGraphics:y,event:a!=null?a.event:void 0,signal:a!=null?a.signal:void 0,defaultPopupTemplateEnabled:a!=null&&!!a.defaultPopupTemplateEnabled},_=d.fetchPopupFeatures(i,m);return{layerView:d,promise:_}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:a,queryArea:d,location:y}=await this._popupHitTestGraphics(i,r),m=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:_,clientOnlyGraphics:$}=this._graphicsPerFetchPopupLayerView(a,m);return{clientOnlyGraphics:$,layerViewsAndGraphics:_,queryArea:d,location:y}}async _popupHitTestGraphics(i,r){const a=await this.popupHitTest(i),d=a.results,y=a.mapPoint,m=d.filter($=>$.type==="graphic"&&this._isValidPopupGraphic($.graphic,r)),_=m.length?m[0].mapPoint:null;return{clientGraphics:m.map($=>$.graphic),queryArea:y,location:y||_}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const a=[],d=new Map,y=r.map(m=>{const _=[];return"layer"in m?d.set(m.layer,_):d.set(m.graphics,_),{layerView:m,graphics:_}});for(const m of i){const _=d.get(m.layer)||d.get(m.sourceLayer)||null;_?_.push(m):a.push(m)}return{layerViewsAndGraphics:y,clientOnlyGraphics:a}}};return b([S({cast(i){return!i||Wn(i)||typeof i=="object"&&(i.open=r=>(pg(fe.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),i.close=()=>(pg(fe.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],t.prototype,"popup",void 0),b([S()],t.prototype,"popupEnabled",void 0),t=b([B("esri.views.PopupView")],t),t},e8={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},xX={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function $X(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function Ah(e,t,i){const r=new Date(e.getTime());if(t&&i){const a=xX[i],{getter:d,setter:y,multiplier:m}=a;if(i==="months"){const _=$X(r.getFullYear(),r.getMonth()+t);r.getDate()>_&&r.setDate(_)}r[y](r[d]()+t*m)}return r}function t8(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function TX(e,t,i){return e===0?0:e*e8[t]/e8[i]}var cn;let ns=cn=class extends pe{static get allTime(){return i8}static get empty(){return IX}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(cn.allTime)}get isEmpty(){return this.equals(cn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new cn({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,r=e.start!=null?e.start.getTime():e.start,a=e.end!=null?e.end.getTime():e.end;return t===r&&i===a}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=mh(this.start,r=>t8(r,e)),i=mh(this.end,r=>{const a=t8(r,e);return r.getTime()===a.getTime()?a:Ah(a,1,e)});return new cn({start:t,end:i})}intersection(e){var m,_,$,M;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return cn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((m=this.start)==null?void 0:m.getTime())??-1/0,i=((_=this.end)==null?void 0:_.getTime())??1/0,r=(($=e.start)==null?void 0:$.getTime())??-1/0,a=((M=e.end)==null?void 0:M.getTime())??1/0;let d,y;if(r>=t&&r<=i?d=r:t>=r&&t<=a&&(d=t),i>=r&&i<=a?y=i:a>=t&&a<=i&&(y=a),d!=null&&y!=null&&!isNaN(d)&&!isNaN(y)){const A=new cn;return A.start=d===-1/0?null:new Date(d),A.end=y===1/0?null:new Date(y),A}return cn.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new cn,{start:r,end:a}=this;return r!=null&&(i.start=Ah(r,e,t)),a!=null&&(i.end=Ah(a,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return i8.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new cn({start:t,end:i})}};b([S({type:Date,json:{write:{allowNull:!0}}})],ns.prototype,"end",void 0),b([me("end")],ns.prototype,"readEnd",null),b([Se("end")],ns.prototype,"writeEnd",null),b([S({readOnly:!0,json:{read:!1}})],ns.prototype,"isAllTime",null),b([S({readOnly:!0,json:{read:!1}})],ns.prototype,"isEmpty",null),b([S({type:Date,json:{write:{allowNull:!0}}})],ns.prototype,"start",void 0),b([me("start")],ns.prototype,"readStart",null),b([Se("start")],ns.prototype,"writeStart",null),ns=cn=b([B("esri.TimeExtent")],ns);const i8=new ns,IX=new ns({start:void 0,end:void 0}),Ws=ns,cu=e=>{let t=class extends e{constructor(){super(...arguments),this._handles=new Mo,this._updatingHandles=new dp}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return b([S({readOnly:!0})],t.prototype,"handles",null),b([S({readOnly:!0})],t.prototype,"updatingHandles",null),t=b([B("esri.core.HandleOwner")],t),t};let Ug=class extends cu(De){};Ug=b([B("esri.core.HandleOwner")],Ug);let Zd=class extends cu(Le){constructor(t){super(t),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Le.ofType(this.itemType.Type))(t):new Le(t)}};function r8(e,t){return{type:e,cast:yE,set(i){const r=Nh(i,this._get(t),e);r.owner=this,this._set(t,r)}}}b([S()],Zd.prototype,"owner",null),Zd=b([B("esri.core.support.OwningCollection")],Zd);var ad;const Bg=Sr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),fP=Bg.jsonValues.slice();LL(fP,"orthometric");const Xd=Sr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let pn=ad=class extends pe{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return Bg.write(e,t,i)}readHeightModel(e,t,i){return Bg.read(e)||(i&&i.messages&&i.messages.push(EX(e,{context:i})),null)}readHeightUnit(e,t,i){return Xd.read(e)||(i&&i.messages&&i.messages.push(s8(e,{context:i})),null)}readHeightUnitService(e,t,i){return zE(e)||Xd.read(e)||(i&&i.messages&&i.messages.push(s8(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new ad({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=Dz(t);return new ad({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new ad;return t.read(e,{origin:"web-scene"}),t}};function s8(e,t){return new Gs("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function EX(e,t){return new Gs("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}b([S({type:Bg.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:fP,default:"ellipsoidal"}}}})],pn.prototype,"heightModel",void 0),b([Se("web-scene","heightModel")],pn.prototype,"writeHeightModel",null),b([me(["web-scene","service"],"heightModel")],pn.prototype,"readHeightModel",null),b([S({type:Xd.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Xd.jsonValues,write:Xd.write}}}})],pn.prototype,"heightUnit",void 0),b([me("web-scene","heightUnit")],pn.prototype,"readHeightUnit",null),b([me("service","heightUnit")],pn.prototype,"readHeightUnitService",null),b([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],pn.prototype,"vertCRS",void 0),b([me("service","vertCRS",["vertCRS","ellipsoid","geoid"])],pn.prototype,"readVertCRS",null),pn=ad=b([B("esri.geometry.HeightModelInfo")],pn);const a2=pn;let Hg=class extends Zd{constructor(t){super(t),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(fe.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Hg=b([B("esri.support.AnalysesCollection")],Hg);let Qd=class extends Zd{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};b([c4({Type:Us,ensureType:yi(Us)})],Qd.prototype,"itemType",void 0),Qd=b([B("esri.support.GraphicsCollection")],Qd);const n8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function MX(e,t="system"){if(!e||!n8.has(e.timeZone))return t;const i=n8.get(e.timeZone);return kX(e.timeZone)||e.respectsDaylightSaving?i:AX(i)}function AX(e){const t=st.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${wr.instance(-i).formatOffset(0,"narrow")}`}function kX(e){return e.startsWith("UTC")}let ll=class extends Kt(pe){constructor(t){super(t),this.legacy=null,this.timeZone="system"}readLegacy(t,i){const{timeZone:r,respectsDaylightSaving:a}=i;return{timeZone:r,respectsDaylightSaving:a}}readTimeZone(t,i){return"timeZoneIANA"in i?i.timeZoneIANA:MX(i)}writeTimeZone(t,i){i.timeZoneIANA=t}equals(t){return t!=null&&this.timeZone!=null&&t.timeZone!=null&&this.timeZone===t.timeZone}};b([S()],ll.prototype,"legacy",void 0),b([me("legacy",["timeZone"])],ll.prototype,"readLegacy",null),b([S({type:String,nonNullable:!0})],ll.prototype,"timeZone",void 0),b([me("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],ll.prototype,"readTimeZone",null),b([Se("timeZone")],ll.prototype,"writeTimeZone",null),ll=b([B("esri.time.TimeReference")],ll);const eu=ll;let ul=class extends De{constructor(t){super(t),this.view=null,this.baseLayerViews=new Le,this.referenceLayerViews=new Le,this._loadingHandle=ke(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},kt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const t=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(a=>a.updating)||this.referenceLayerViews.some(a=>a.updating))}};b([S({constructOnly:!0})],ul.prototype,"view",void 0),b([S({readOnly:!0})],ul.prototype,"baseLayerViews",void 0),b([S({readOnly:!0})],ul.prototype,"referenceLayerViews",void 0),b([S({readOnly:!0})],ul.prototype,"suspended",null),b([S({type:Boolean,readOnly:!0})],ul.prototype,"updating",null),ul=b([B("esri.views.BasemapView")],ul);function OX(e){return"tryRecycleWith"in e}let PX=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Vs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Fs(this._controller.signal,()=>{const a=new se("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(a)})}tryRecycle(t){if(!this.done||!this.layerView||!OX(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let a=0;a<t.length;a++){const d=t[a];if(d.type!==i)continue;const y=this.layerView.tryRecycleWith(d,{signal:r});if(y){t.splice(a,1),this.layer=d;const m=this.layerView,_=m.view;return this.promise=Promise.race([y.then(()=>(Jt(this._controller.signal),d.emit("layerview-destroy",{view:_,layerView:m}),_.emit("layerview-destroy",{view:_,layerView:m}),d.emit("layerview-create",{view:_,layerView:m}),_.emit("layerview-create",{view:_,layerView:m}),m)),new Promise(($,M)=>Fs(this._controller.signal,()=>M(li())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var a,d,y;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let m,_;if(await i.load({signal:t}),"prefetchResources"in i&&await((a=i.prefetchResources)==null?void 0:a.call(i,{signal:t})),NX(i))m=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new se("layer:view-not-supported","No layerview implementation was found");const A=await this.layerViewImporter.importLayerView(i);Jt(t),m="default"in A?new A.default({layer:i,view:r}):new A({layer:i,view:r})}const $=()=>{_=ai(_),m.destroyed||m.destroy(),m.layer=null,m.parent=null,m.view=null,this.done=!0};_=Fs(t,$),Jt(t);try{await m.when()}catch(A){throw $(),A}if(!((y=(d=this._map)==null?void 0:d.allLayers)==null?void 0:y.includes(i)))return $(),void this._deferred.reject(new se("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=m,i.emit("layerview-create",{view:r,layerView:m}),r.emit("layerview-create",{layer:i,layerView:m}),this.done=!0,this._deferred.resolve(m)}catch(m){i.emit("layerview-create-error",{view:r,error:m}),r.emit("layerview-create-error",{layer:i,error:m}),this.done=!0,this._deferred.reject(new se("layerview:create-error","layerview creation failed",{layer:i,error:m}))}}},Ts=class extends De{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new dp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const a of i)this.layerViewImporter.hasLayerViewModule(a)&&this.layerViewImporter.importLayerView(a)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Vs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Vp(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var _,$,M;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,a=[],d=this.view.ready,y=A=>{if(A!=null){for(const P of A)if(P){r.add(P);const j=this._layerLayerViewInfoMap.get(P);j&&d?j.start():j||this._recyclingInfoMap.has(P)||a.push(P),"layers"in P&&P.layers&&y(P.layers)}}};for(const A of this._rootCollectionNames)y(this.get(A));for(const[A,P]of this._layerLayerViewInfoMap)if(!r.has(A)){this._layerLayerViewInfoMap.delete(P.layer);const j=P.tryRecycle(a);j?(this.notifyChange("updating"),this._recyclingInfoMap.set(P.layer,P),j.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),this._layerLayerViewInfoMap.set(P.layer,P),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),P.destroy(),this._reschedule()})):P.destroy()}for(const[A,P]of this._recyclingInfoMap)r.has(A)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),P.destroy());for(const A of a)this._createLayerView(A);this._refreshCollections();const m=[(_=i==null?void 0:i.ground)==null?void 0:_.layers,($=i==null?void 0:i.basemap)==null?void 0:$.baseLayers,(M=i==null?void 0:i.basemap)==null?void 0:M.referenceLayers,i==null?void 0:i.layers].filter(A=>!!A);r.forEach(A=>"layers"in A&&m.push(A.layers)),this.addHandles(m.map(A=>this._watchUpdatingTracking.addOnCollectionChange(()=>A,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Pp(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ke(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),aa)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Q2(this._recyclingInfoMap),Q2(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(li()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Av(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(Q2(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new se("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(t),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let a=0;for(const d of t){const y=this._layerLayerViewInfoMap.get(d);if(!y||!y.layerView)continue;const m=y.layerView;m.layer=d,m.parent=r,i.at(a)!==m&&i.splice(a,0,m),d.layers&&this._populateLayerViewsOwners(d.layers,m.layerViews,m),a+=1}a<i.length&&i.splice(a,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new PX(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(Jr(r)||r.name==="cancelled:layerview-create")||fe.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};b([S()],Ts.prototype,"_workPromise",void 0),b([S({readOnly:!0})],Ts.prototype,"_watchUpdatingTracking",void 0),b([S({readOnly:!0})],Ts.prototype,"_layersToLayerViews",null),b([S({readOnly:!0})],Ts.prototype,"_rootCollectionNames",null),b([S()],Ts.prototype,"layerViewImporter",void 0),b([S()],Ts.prototype,"supportsGround",void 0),b([S({readOnly:!0})],Ts.prototype,"updating",null),b([S({readOnly:!0})],Ts.prototype,"updatingRemaining",null),b([S({constructOnly:!0})],Ts.prototype,"view",void 0),Ts=b([B("esri.views.LayerViewManager")],Ts);const CX=Ts;function NX(e){return"createLayerView"in e&&e.createLayerView!=null}let Xr=class extends De{constructor(t){super(t),this.factor=1.5,this.offset=jr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};b([S({type:Number})],Xr.prototype,"factor",void 0),b([S({nonNullable:!0})],Xr.prototype,"offset",void 0),b([S()],Xr.prototype,"position",void 0),b([S({type:Number,range:{min:0}})],Xr.prototype,"size",void 0),b([S()],Xr.prototype,"maskUrl",void 0),b([S()],Xr.prototype,"maskEnabled",void 0),b([S()],Xr.prototype,"overlayUrl",void 0),b([S()],Xr.prototype,"overlayEnabled",void 0),b([S({readOnly:!0})],Xr.prototype,"version",null),b([S({type:Boolean})],Xr.prototype,"visible",void 0),Xr=b([B("esri.views.Magnifier")],Xr);const yP=Xr;let jX=class{constructor(){this._tasks=new Array,this._running=qg(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return this._running.value=!0,new Promise((a,d)=>this._tasks.push(new o8(a,d,t,i,r)))}unshift(t,i,r){return this._running.value=!0,new Promise((a,d)=>this._tasks.unshift(new o8(a,d,t,i,r)))}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const a=jn(i.signal);if(a&&!i.abortCallback)i.reject(li());else{const d=a?(r=i.abortCallback)==null?void 0:r.call(i,li()):i.callback(t);Ia(d)?d.then(i.resolve,i.reject):i.resolve(d)}}catch(a){i.reject(a)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const t=li();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0,this._running.value=!1}},o8=class{constructor(t,i,r,a=void 0,d=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=a,this.abortCallback=d}},ld=class extends De{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};b([S()],ld.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),b([S()],ld.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),ld=b([B("esri.views.support.DebugFlags")],ld);const RX=new ld;var rs;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(rs||(rs={}));var J9,ot;(function(e){e[e.YIELD=1]="YIELD"})(J9||(J9={})),function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"}(ot||(ot={}));const po=0,a8=new Map([[ot.RESOURCE_CONTROLLER_IMMEDIATE,po],[ot.RESOURCE_CONTROLLER,4],[ot.SLIDE,po],[ot.STREAM_DATA_LOADER,po],[ot.ELEVATION_QUERY,po],[ot.TERRAIN_SURFACE,1],[ot.SURFACE_GEOMETRY_UPDATES,1],[ot.LOD_RENDERER,2],[ot.GRAPHICS_CORE,2],[ot.I3S_CONTROLLER,2],[ot.POINT_CLOUD_LAYER,2],[ot.FEATURE_TILE_FETCHER,2],[ot.OVERLAY,4],[ot.STAGE,4],[ot.GRAPHICS_DECONFLICTOR,4],[ot.FILTER_VISIBILITY,4],[ot.SCALE_VISIBILITY,4],[ot.FRUSTUM_VISIBILITY,4],[ot.CLOUDS_GENERATOR,4],[ot.POINT_OF_INTEREST_FREQUENT,6],[ot.POINT_OF_INTEREST_INFREQUENT,30],[ot.LABELER,8],[ot.FEATURE_QUERY_ENGINE,8],[ot.FEATURE_TILE_TREE,16],[ot.FEATURE_TILE_TREE_ACTIVE,po],[ot.ELEVATION_ALIGNMENT,12],[ot.TEXT_TEXTURE_ATLAS,12],[ot.TEXTURE_UNLOAD,12],[ot.LINE_OF_SIGHT_TOOL,16],[ot.LINE_OF_SIGHT_TOOL_INTERACTIVE,po],[ot.SNAPPING,po],[ot.SHADOW_ACCUMULATOR,30]]);function l8(e){return a8.has(e)?a8.get(e):typeof e=="number"?e:1}const u8=6.5,h8=1,LX=30,c8=1e3/30,p8=100,d8=.9;var K9,mu;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(d=>d.needsUpdate)}constructor(){this._updating=qg(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Rd("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=rs.INTERACTING,this._tasks=new Sh,this._runQueue=new Sh,this._load=0,this._idleStateCallbacks=new Sh,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ke(()=>RX.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,kt);for(const y of Object.keys(ot))this.performanceInfo.tasks.set(ot[y],new Rd(ot[y]));const d=this;this._test={FRAME_SAFETY_BUDGET:u8,INTERACTING_BUDGET:c8,IDLE_BUDGET:p8,get availableBudget(){return d._budget.budget},usedBudget:0,getBudget:()=>d._budget,setBudget:y=>d._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(d=>d.remove()),this._tasks.clear(),ai(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(d){this._updatingChanged(),d&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(d,y){const m=l8(d),_=new i(this,d,y,m);return this._tasks.push(_),this._updatingChanged(),this.performanceInfo.tasks.has(d)||this.performanceInfo.tasks.set(d,new Rd(d)),_}registerIdleStateCallbacks(d,y){const m={idleBegin:d,idleEnd:y};this._idleStateCallbacks.push(m),this.state===rs.IDLE&&this._idleUpdatesStartFired&&m.idleBegin();const _=this;return{remove:()=>this._removeIdleStateCallbacks(m),set idleBegin($){_._idleUpdatesStartFired&&(m.idleEnd(),_._state===rs.IDLE&&$()),m.idleBegin=$},set idleEnd($){m.idleEnd=$}}}get load(){return this._load}set state(d){this._state!==d&&(this._state=d,this.state!==rs.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}updateBudget(d){this._test.usedBudget=0,++this._frameNumber;let y=u8,m=d.frameDuration,_=h8;switch(this.state){case rs.IDLE:y=0,m=Math.max(p8,d.frameDuration),_=LX;break;case rs.INTERACTING:m=Math.max(c8,d.frameDuration);case rs.ANIMATING:}return m=m-d.elapsedFrameTime-y,this.state!==rs.IDLE&&m<h8&&!this._forceTask?(this._forceTask=!0,!1):(m=Math.max(m,_),this._budget.reset(m,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case rs.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(d=>d.idleBegin())),this._runIdle();break;case rs.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(d){this._idleUpdatesStartFired&&d.idleEnd(),this._idleStateCallbacks.removeUnordered(d)}removeTask(d){this._tasks.removeUnordered(d),this._runQueue.removeUnordered(d),this._updatingChanged()}_updateTask(d){this._tasks.forAll(y=>{y.name===d&&y.setPriority(d)})}_getState(d){if(this._runQueue.some(m=>m.name===d))return mu.SCHEDULED;let y=mu.IDLE;return this._tasks.forAll(m=>{m.name===d&&m.needsUpdate&&(m.schedulePriority<=1?y=mu.READY:y!==mu.READY&&(y=mu.WAITING))}),y}_getRuntime(d){let y=0;return this._tasks.forAll(m=>{m.name===d&&(y+=m.runtime)}),y}_resetRuntimes(){this._tasks.forAll(d=>d.runtime=0)}_getRunning(){const d=new Map;if(this._tasks.forAll(m=>{m.needsUpdate&&d.set(m.name,(d.get(m.name)||0)+1)}),d.size===0)return null;let y="";return d.forEach((m,_)=>{y+=m>1?` ${m}x ${_}`:` ${_}`}),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const d=this._tasks.reduce((y,m)=>m.needsUpdate?++y:y,0);this._load=this._load*d8+d*(1-d8)}_schedule(){for(this._runQueue.filterInPlace(d=>!!d.needsUpdate||(d.schedulePriority=d.basePriority,!1)),this._tasks.forAll(d=>{d.basePriority===po&&d.needsUpdate&&!this._runQueue.includes(d)&&d.blockFrame!==this._frameNumber&&this._runQueue.unshift(d)});this._runQueue.length===0;){let d=!1,y=0;if(this._tasks.forAll(m=>{m.needsUpdate&&m.schedulePriority!==0&&m.basePriority!==po&&m.blockFrame!==this._frameNumber&&(d=!0,y=Math.max(y,m.basePriority),m.schedulePriority===1?(m.schedulePriority=0,this._runQueue.push(m)):--m.schedulePriority)}),!d)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const d=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const y=this._budget.now(),m=this._runQueue.pop();this._budget.resetProgress();try{m.task.runTask(this._budget)===J9.YIELD&&(m.blockFrame=this._frameNumber)}catch($){fe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${m.name}"`,$)}!this._budget.hasProgressed&&m.blockFrame!==this._frameNumber&&m.needsUpdate&&(m.name,ot.I3S_CONTROLLER,m.blockFrame=this._frameNumber),m.schedulePriority=m.basePriority;const _=this._budget.now()-y;if(m.runtime+=_,this._frameTaskTimes.set(m.priority,this._frameTaskTimes.get(m.priority)+_),this._debug&&_>2*this._budget.budget&&console.log("Task",m.name,"used",_,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-d)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-d)}_startFrameTaskTimes(){for(const d of Object.keys(ot))this._frameTaskTimes.set(ot[d],0)}_recordFrameTaskTimes(d){this._frameTaskTimes.forEach((y,m)=>this.performanceInfo.tasks.get(m).record(y)),this.performanceInfo.total.record(d)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(d,y,m,_){this._scheduler=d,this.name=y,this._basePriority=_,this.blockFrame=0,this.runtime=0,this._queue=new jX,this._handles=new Mo,this.schedulePriority=this._basePriority,this._task=qg(m??this._queue),this._handles.add(Yl(()=>this.task.running,$=>d.taskRunningChanged($)))}remove(){this.processQueue(mP),this._scheduler.removeTask(this),this.schedule=Y9.schedule,this.reschedule=Y9.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(d){this.name=d;const y=l8(d);this._basePriority!==po&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(d){this.setPriority(d)}get needsUpdate(){return this.updating||this.task.running}schedule(d,y,m){return this._queue.push(d,y,m)}reschedule(d,y,m){return this._queue.unshift(d,y,m)}processQueue(d){this._queue.runTask(d)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=rs.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(d){return!this.done&&(d()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(d){this._enabled=d}reset(d,y){this._begin=this.now(),this._budget=d,this._state=y,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(K9||(K9={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(mu||(mu={}));const mP=(()=>{const e=new K9.Budget;return e.enabled=!1,e})();let DX=class{remove(){}processQueue(){}schedule(t,i,r){try{if(jn(i)){const a=li();return r?Promise.resolve(r(a)):Promise.reject(a)}return kw(t(mP))}catch(a){return Promise.reject(a)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const Y9=new DX;let ud=class extends De{constructor(t,i){super({}),this._stage=t,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(ot.TEXTURE_UNLOAD))??Y9}normalizeCtorArgs(){return{}}destroy(){var t,i,r;super.destroy(),(t=this._frameTask)==null||t.remove(),(i=this._textureRequests)==null||i.forEach(a=>this._releaseTextureRequest(a)),(r=this._textureRequests)==null||r.clear()}get updating(){return this._frameTask.updating}fromData(t,i,r){var y,m;const a=this.makeUid(t);let d=this._textureRequests.get(a);if(!d){const _=new FX(r);_.texture=i(),(y=this._stage)==null||y.add(_.texture),(m=this._stage)==null||m.loadImmediate(_.texture),this._textureRequests.set(a,_),d=_}return d.referenceCount++,{uid:a,texture:d.texture,release:()=>this._release(a)}}_release(t){const i=this._textureRequests.get(t);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+t),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(t))):console.warn(`TextureCollection: texture doesn't exist: '${t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(t){if(!this._textureRequests)return;const i=this._textureRequests.get(t);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(t))}_releaseTextureRequest(t){var i;t.onRemove&&t.onRemove(),t.texture?(i=this._stage)==null||i.remove(t.texture):t.abortController&&(t.abortController.abort(),t.abortController=null)}makeUid(t,i=null){return i!=null?`${t}.${i}px`:t}};b([S()],ud.prototype,"_frameTask",void 0),b([S()],ud.prototype,"updating",null),ud=b([B("esri.views.3d.support.TextureCollection")],ud);let FX=class{constructor(t){this.onRemove=t,this.referenceCount=0}};var f8;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(f8||(f8={}));const gP=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],vP={};function bP(e){return!!vP[e]}function zX(e){for(const t of e)if(!bP(t))return!1;return!0}gP.forEach(e=>{vP[e]=!0});let VX=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},a)=>{var d;return(d=this.inputManager)==null?void 0:d.installHandlers(a,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,a){const d=Array.isArray(t)?t:t.split(",");if(!zX(d))return d.some(bP)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,m;Array.isArray(i)?m=i:(y=i,m=[]),typeof r=="function"?y=r:a=r,a=a??Bl.DEFAULT;const _=this._createUniqueGroupName(),$=new GX(this.view,d,m,y);this._handlers.set(_,{handler:$,priority:a});for(const M of d){const A=this._handlerCounts.get(M)||0;this._handlerCounts.set(M,A+1)}return this.inputManager&&this.inputManager.installHandlers(_,[$],a),{remove:()=>this._removeHandler(_,d)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const a=this._handlerCounts.get(r);a===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):a===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,a-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},GX=class extends Ui{constructor(t,i,r,a){super(!0),this._latestDragStart=void 0,this.view=t;for(const d of i)switch(d){case"click":this.registerIncoming("click",r,y=>a(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",r,y=>a(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",r,y=>a(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,y=>a(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",r,y=>a(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",r,y=>{const m=this._wrapDrag(y);m&&a(m)});break;case"key-down":this.registerIncoming("key-down",r,y=>a(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",r,y=>a(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",r,y=>a(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,y=>a(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,y=>a(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,y=>a(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,y=>a(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,y=>a(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,y=>a(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,y=>{a(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",r,y=>{a(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",r,y=>{a(this._wrapBlur(y))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:a,x:d,y,native:m,eventId:_}=t.data,{cancelable:$,timestamp:M}=t;return{type:"click",pointerType:i,button:r,buttons:a,x:d,y,native:m,timestamp:M,screenPoint:jr(d,y),mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:$,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:a,x:d,y,native:m,eventId:_}=t.data,{cancelable:$,timestamp:M}=t;return{type:"double-click",pointerType:i,button:r,buttons:a,x:d,y,native:m,timestamp:M,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:$,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:a,x:d,y,native:m,eventId:_}=t.data,$=m.pointerId,{cancelable:M,timestamp:A}=t;return{type:"immediate-click",pointerId:$,pointerType:i,button:r,buttons:a,x:d,y,native:m,timestamp:A,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:a,x:d,y,native:m,eventId:_}=t.data,$=m.pointerId,{cancelable:M,timestamp:A}=t;return{type:"immediate-double-click",pointerId:$,pointerType:i,button:r,buttons:a,x:d,y,native:m,timestamp:A,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:a,x:d,y,native:m}=t.data,{cancelable:_,timestamp:$}=t;return{type:"hold",pointerType:i,button:r,buttons:a,x:d,y,native:m,timestamp:$,mapPoint:this._getMapPoint(d,y),cancelable:_,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(jr(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:a}=i.center,{action:d,pointerType:y,button:m}=i;if(d==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const _=i.pointer.native,$=i.buttons,{cancelable:M,timestamp:A}=t,P={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return d==="end"&&(this._latestDragStart=void 0),{type:"drag",action:d,x:r,y:a,origin:P,pointerType:y,button:m,buttons:$,radius:i.radius,angle:OM(i.angle),native:_,timestamp:A,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:j=>t.async(j),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:a}=t.data,{cancelable:d,timestamp:y}=t;return{type:"key-down",key:i,repeat:r,native:a,timestamp:y,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:a,timestamp:d}=t;return{type:"key-up",key:i,native:r,timestamp:d,cancelable:a,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:a,button:d,buttons:y,native:m,eventId:_}=t.data,$=m.pointerId,M=m.pointerType,{cancelable:A,timestamp:P}=t;return{type:i,x:r,y:a,pointerId:$,pointerType:M,button:d,buttons:y,native:m,timestamp:P,eventId:_,cancelable:A,stopPropagation:()=>t.stopPropagation(),async:j=>t.async(j),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:a,native:d,eventId:y}=t.data.currentEvent,{button:m}=t.data.startEvent,_=t.data.startEvent.native.pointerId,$=t.data.startEvent.native.pointerType,M=t.data.action,A={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:P,timestamp:j}=t;return{type:"pointer-drag",x:i,y:r,pointerId:_,pointerType:$,button:m,buttons:a,action:M,origin:A,native:d,timestamp:j,eventId:y,cancelable:P,stopPropagation:()=>t.stopPropagation(),async:L=>t.async(L),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:a}=t,{x:d,y,deltaY:m,native:_}=r;return{type:"mouse-wheel",x:d,y,deltaY:m,native:_,timestamp:a,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:$=>t.async($),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:a}=t.data,{cancelable:d,timestamp:y}=t,{buttons:m,axes:_}=r;return{type:"gamepad",device:a,timestamp:y,action:i,buttons:m,axes:_,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:$=>t.async($),preventDefault:()=>t.preventDefault()}}};var Af,y8,m8;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Af||(Af={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(y8||(y8={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(m8||(m8={}));function qX(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return fe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function Z9(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Af.USER)&&e.getEditableFlag(Af.MANAGER)}function no(e){return jr(e.x,e.y)}function wP(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?jr(t.clientX-i.left,t.clientY-i.top):jr(0,0)}function g8(e,t){return t instanceof Event?wP(e,t):no(t)}function v8(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let UX=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":b8(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!w8(t))break;const a=no(t),d=this._intersect(a,t.pointerType,i.forEachTool);if(d==null)break;const y=d.manipulator,m=d.tool;y==null||m==null||!y.interactive||y.grabbable&&y.grabbableForEvent(t)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,t,i),y!=null&&m!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(t)&&!y.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:y,tool:m,start:a,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(d.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:a}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!w8(t))break;const a=this._grabbedManipulators.get(t.pointerId),d=mh(a,({manipulator:M})=>M),y=mh(a,({tool:M})=>M);if(d==null||y==null)break;const m=no(t);m.x=qs(m.x,0,i.view.width),m.y=qs(m.y,0,i.view.height);const _=a.start,$=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(d.dragging=!0,$?d.events.emit("drag",{action:"update",start:_,screenPoint:m}):d.events.emit("drag",{action:"start",start:_,screenPoint:m,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:y,manipulator:d,start:_}));break;case"end":d.dragging=!1,$&&d.events.emit("drag",{action:"end",start:_,screenPoint:m}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const a=no(t),d=this._intersect(a,t.pointerType,i.forEachTool);if(BX(t)||i.forEachTool($=>{if((d==null||d.tool!==$||$.automaticManipulatorSelection)&&$.manipulators){let M=!1;$.manipulators.forEach(({manipulator:A})=>{A.selected&&(A.selected=!1,M=!0)}),M&&$.onManipulatorSelectionChanged&&$.onManipulatorSelectionChanged()}}),d==null)break;const{manipulator:y,tool:m}=d;if(!y.interactive)break;y.selectable&&m.automaticManipulatorSelection&&(y.selected=!y.selected,m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged());const _=t.native.shiftKey;y.events.emit("immediate-click",{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:_,stopPropagation:r});break}case"click":{const a=no(t),d=this._intersect(a,t.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const m=t.native.shiftKey;y.events.emit(t.type,{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:m}),r();break}case"double-click":{const a=no(t),d=this._intersect(a,t.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const m=t.native.shiftKey;y.events.emit("double-click",{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:m,stopPropagation:r});break}case"immediate-double-click":{const a=no(t),d=this._intersect(a,t.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const m=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:m,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:no(i)}),this._grabbedManipulators.forEach(({manipulator:a},d)=>{a===t&&this._grabbedManipulators.delete(d)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(t,i){const r=mh(this._grabbedManipulators.get(t.pointerId),({manipulator:a})=>a);r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:no(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(t){let i=null;return Av(t,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:a})=>{i.add(a)}),this._hoveredManipulators.forEach(({tool:a})=>{r.add(a)}),t(a=>{a.hasGrabbedManipulators=i.has(a),a.hasHoveredManipulators=r.has(a);const d=this._grabbedManipulators.values(),y=CL(d,({tool:m})=>m===a);a.firstGrabbedManipulator=y!=null?y.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},a=!0,d){const y=(m,_)=>m===t&&(d==null||d===_);this._grabbedManipulators.forEach(({tool:m,manipulator:_,pointerType:$},M)=>{y(m,_)&&(this._grabbedManipulators.delete(M),_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:$}))}),this._draggedManipulators.forEach(({tool:m,manipulator:_},$)=>{y(m,_)&&(this._draggedManipulators.delete($),_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}),a&&this._hoveredManipulators.forEach(({tool:m,manipulator:_},$)=>{y(m,_)&&(this._hoveredManipulators.delete($),_.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(t,i,r){let a=null;return r(d=>{if(d.manipulators==null||!Z9(d))return!1;const y=d.manipulators.intersect(t,i);return y!=null&&(a={tool:d,manipulator:y},!0)}),a}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(jr(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!b8(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(no(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,a){let d=this._intersect(t,r,a);const y=mh(this._hoveredManipulators.get(i),({manipulator:m})=>m);d==null||d.manipulator.interactive||(d=null),d!=null&&y===d.manipulator||(y!=null&&(y.hovering=!1),d!=null?(d.manipulator.hovering=!0,this._hoveredManipulators.set(i,d)):this._hoveredManipulators.delete(i),this._onFocusChange(a))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function b8(e){return e==="mouse"}function w8(e){return e.pointerType!=="mouse"||e.button===0}function BX(e){return!!e.native.shiftKey}const _8="attached",_b="tools",HX=1e3;let dn=class extends Ug{constructor(t){super(t),this._clock=zp,this._manipulatorState=new UX,this.tools=new Le,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(gP,t=>{this._handleInputEvent(t)},Bl.TOOL),...qX(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void fe.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const a=Z9(r);this.activeTool!=null&&a||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!a)}this._updateCursor()}get updating(){var t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((t=this.textures)==null?void 0:t.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=ai(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,HX)}attach(){var t;this.view.type==="3d"?(this._set("textures",new ud(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([ke(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i))),va(()=>this._set("textures",Wt(this.textures)))],_8)):this.handles.add(ke(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(_8),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(a=>{!i&&a.visible&&a.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(_b),this._forEachTool(t=>{if(t instanceof De){const i=ke(()=>[t.cursor,t.visible,t.editable],()=>{Z9(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,_b)}t.manipulators&&this.handles.add([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],_b)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,Af.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:t=>this._clock=t}}};b([S({constructOnly:!0,nonNullable:!0})],dn.prototype,"view",void 0),b([S({readOnly:!0,nonNullable:!0})],dn.prototype,"textures",void 0),b([S({value:null})],dn.prototype,"activeTool",null),b([S({readOnly:!0,type:Le})],dn.prototype,"tools",void 0),b([S({readOnly:!0})],dn.prototype,"cursor",void 0),b([S({readOnly:!0})],dn.prototype,"updating",null),b([S()],dn.prototype,"_interacting",void 0),b([S({readOnly:!0})],dn.prototype,"interacting",null),dn=b([B("esri.views.ToolViewManager")],dn);let kc=class extends De{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":WX.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return JX[this.deviceType]}};b([S({nonNullable:!0,readOnly:!0})],kc.prototype,"nativeIndex",void 0),b([S({type:String,readOnly:!0})],kc.prototype,"deviceType",null),b([S({type:Number,readOnly:!0})],kc.prototype,"axisThreshold",null),kc=b([B("esri.views.input.gamepad.GamepadInputDevice")],kc);const WX=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),JX={standard:.15,spacemouse:.025,unknown:0},R6=kc;let hd=class extends De{constructor(...t){super(...t),this.devices=new Le,this.enabledFocusMode="document"}};b([S({type:Le.ofType(R6),readOnly:!0})],hd.prototype,"devices",void 0),b([S({type:["document","view","none"]})],hd.prototype,"enabledFocusMode",void 0),hd=b([B("esri.views.input.gamepad.GamepadSettings")],hd);const KX=hd;let mm=class extends De{constructor(){super(...arguments),this.gamepad=new KX}};b([S({readOnly:!0})],mm.prototype,"gamepad",void 0),mm=b([B("esri.views.input.Input")],mm);const YX=mm;let hl=class extends De{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};b([S({type:Boolean,nonNullable:!0})],hl.prototype,"enabled",void 0),b([S({type:R6})],hl.prototype,"device",void 0),b([S({type:["pan","zoom"],nonNullable:!0})],hl.prototype,"mode",void 0),b([S({type:["forward-down","forward-up"],nonNullable:!0})],hl.prototype,"tiltDirection",void 0),b([S({type:Number,nonNullable:!0})],hl.prototype,"velocityFactor",void 0),hl=b([B("esri.views.navigation.gamepad.GamepadSettings")],hl);const _P=hl;let Gu=class extends De{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new _P,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};b([S({type:Boolean})],Gu.prototype,"browserTouchPanEnabled",void 0),b([S({type:_P,nonNullable:!0})],Gu.prototype,"gamepad",void 0),b([S({type:Boolean})],Gu.prototype,"momentumEnabled",void 0),b([S({type:Boolean})],Gu.prototype,"mouseWheelZoomEnabled",void 0),Gu=b([B("esri.views.navigation.Navigation")],Gu);const SP=Gu,xP={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},$P=Object.values(xP),TP=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${$P.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),ZX=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${$P.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),XX=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function kye(e){return!!TP.test(e)}function ic(e){if(e==null)return null;const t=Qi(e),i=t.path.match(TP)||t.path.match(ZX);if(!i)return null;const[,r,a,d,y]=i,m=a.indexOf("/");return{title:L6(m!==-1?a.slice(m+1):a),serverType:xP[d.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:r}}}function QX(e){const t=Qi(e).path.match(XX);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function L6(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function eQ(e,t){const i=[];if(e){const r=ic(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=L6(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function IP(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",a="//features",d=(e=e.toLowerCase()).includes(t),y=e.includes(i)||e.includes(r)||e.includes(a);return d&&y}function tQ(e,t){return e&&AE(kE(e,t))}function iQ(e){let{url:t}=e;if(!t)return{url:t};t=kE(t,e.logger);const i=Qi(t),r=ic(i.path);let a;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(a=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const d=QX(i.path);d!=null&&(t=d.serviceUrl,a=d.sublayerId)}return{url:AE(t),layerId:a}}function rQ(e,t,i,r,a){Kl(t,r,"url",a),r.url&&e.layerId!=null&&(r.url=wa(r.url,i,e.layerId.toString()))}function Oye(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),a=t.includes("/imageserver/wmsserver"),d=t.includes("/wmsserver");return i&&(r||a||d)}var S8;function sQ(e){var r;const t=e.url?ic(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&EP(e)&&e.heightModelInfo?e.heightModelInfo:nQ(e)?a2.deriveUnitFromSR(aQ,e.spatialReference):null}function EP(e){return"heightModelInfo"in e}function MP(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function nQ(e){return MP(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):AP(e)}function oQ(e){return e.layers!=null||AP(e)||MP(e)||EP(e)}function AP(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(S8||(S8={}));const aQ=new a2({heightModel:"gravity-related-height"});var Wg;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Wg||(Wg={}));let X9,Sb=null;async function lQ(e){Sb||(Sb=be(()=>import("./geometryServiceUtils-087dbf0a.js"),[]).then(t=>X9=t)),await Sb,Jt(e)}async function kP(e,t,i,r){if(!e)return null;const a=e.spatialReference;return ec()||$a(a,t)?hu(e,t):X9?X9.projectGeometry(e,t,i,r):(await Promise.race([lQ(r),Ql(r)]),kP(e,t,i,r))}let zt=class extends De{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=pf(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,a,d,y;const t=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(a=t==null?void 0:t.basemap)==null?void 0:a.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(d=t==null?void 0:t.ground)==null?void 0:d.layers},{parent:t==null?void 0:t.basemap,layers:(y=t==null?void 0:t.basemap)==null?void 0:y.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:i}=this._allLayers;let r=null;for(const d of t){const y=this._getSupportedSpatialReferences(d);if(y.length>0){const m=this._narrowDownSpatialReferenceCandidates(r,y);m!=null&&(r=m)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const a=this._pickSpatialReferenceCandidate(r);return{spatialReference:a!=null?a.spatialReference:null,viewingMode:a!=null?a.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,a,d,y,m,_,$;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:i}=this._collectLayers([{parent:(a=(r=this.map)==null?void 0:r.call(this))==null?void 0:a.basemap,layers:(m=(y=(d=this.map)==null?void 0:d.call(this))==null?void 0:y.basemap)==null?void 0:m.baseLayers},{layers:($=(_=this.map)==null?void 0:_.call(this))==null?void 0:$.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const M=t[0].tileInfo;return{tileInfo:M&&M.spatialReference.equals(this.spatialReference)?M:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,a,d;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:i}=this._allLayers;for(const y of t)if(oQ(y)){const m=sQ(y);if(m)return{heightModelInfo:m,vcsWkid:(a=y.spatialReference)==null?void 0:a.vcsWkid,latestVcsWkid:(d=y.spatialReference)==null?void 0:d.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,i=t.updating,r=[];for(const a of t.layers){const d="fullExtents"in a&&a.fullExtents||(a.fullExtent!=null?[a.fullExtent]:[]),y=this.requiresExtentInSpatialReference?null:d[0],m=d.find(_=>_.spatialReference.equals(this.spatialReference))??y;if(m)return{candidates:[{extent:m,layer:a}],updating:!1};if(this._getSupportedSpatialReferences(a).length>0)for(const _ of d)r.push({extent:_,layer:a})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),a=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&a.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=pf(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:a.clone(),task:f4(async d=>{try{const y=await kP(r.extent,a,"portalItem"in r.layer?r.layer.portalItem:void 0,d);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(jn(d))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=[],a=(d,y)=>d!=null?y!=null?d===y&&d:d:y;for(const d of t)for(const y of i){if(!d.spatialReference.equals(y.spatialReference))continue;const m=a(d.viewingMode,y.viewingMode);if(m!==!1){r.push({spatialReference:d.spatialReference,viewingMode:m});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==Wg.Local)&&(t=t.filter(({viewingMode:r})=>r!==Wg.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const a of i){const d=this.getSpatialReferenceSupport({spatialReference:a,layer:t});if(d!=null){const y=d.constraints!=null?d.constraints:[{spatialReference:a,viewingMode:null}];for(const{spatialReference:m,viewingMode:_}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!m.equals(this.userSpatialReference)||r.push({spatialReference:m,viewingMode:_})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new uQ;for(const a of t)if(this._collectCollection(a,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{Jr(i)||console.log(i)}),"loading"):t.loadStatus:"loaded"}};b([S()],zt.prototype,"required",void 0),b([S({constructOnly:!0})],zt.prototype,"map",void 0),b([S({constructOnly:!0})],zt.prototype,"getSpatialReferenceSupport",void 0),b([S()],zt.prototype,"defaultSpatialReference",void 0),b([S()],zt.prototype,"userSpatialReference",void 0),b([S()],zt.prototype,"sourcePreloadCount",void 0),b([S()],zt.prototype,"priorityCollection",void 0),b([S()],zt.prototype,"requiresExtentInSpatialReference",void 0),b([S()],zt.prototype,"suspended",void 0),b([S({readOnly:!0})],zt.prototype,"ready",null),b([S({readOnly:!0})],zt.prototype,"heightModelInfoReady",null),b([S({readOnly:!0})],zt.prototype,"spatialReference",null),b([S({readOnly:!0})],zt.prototype,"extent",null),b([S({readOnly:!0})],zt.prototype,"heightModelInfo",null),b([S({readOnly:!0})],zt.prototype,"vcsWkid",null),b([S({readOnly:!0})],zt.prototype,"latestVcsWkid",null),b([S({readOnly:!0})],zt.prototype,"viewingMode",null),b([S({readOnly:!0})],zt.prototype,"tileInfo",null),b([S({readOnly:!0})],zt.prototype,"mapCollections",null),b([S({readOnly:!0})],zt.prototype,"_allLayers",null),b([S({readOnly:!0})],zt.prototype,"_spatialReferenceTask",null),b([S({readOnly:!0})],zt.prototype,"_tileInfoTask",null),b([S({readOnly:!0})],zt.prototype,"_heightModelInfoTask",null),b([S({readOnly:!0})],zt.prototype,"_extentCandidatesTask",null),b([S()],zt.prototype,"_extentTask",null),b([S()],zt.prototype,"_projectExtentTask",void 0),zt=b([B("esri.views.support.DefaultsFromMap")],zt);let uQ=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var cd;let ze=cd=class extends cu(Ea.EventedMixin(Cv(De))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Ep({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:cQ}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Qd,this.analyses=new Hg,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Le,this.magnifier=new yP,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new eu,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new YX,this.navigation=new SP,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new VX(this),this.persistableViewModels=new Le,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(ke(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,cd.views.add(this)):(this._currentSpatialReference=null,cd.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):t&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},t0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,S6(()=>this.ready)))),this.basemapView=new ul({view:this}),this.layerViewManager=new CX({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new dn({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([ke(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),ke(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),ke(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([ke(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(e!=null)return;const a=va(()=>e=pf(e));e=f4(async d=>{try{await zI(this.spatialReferenceWarningDelay,null,d)}catch{return}finally{e=null}fe.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(a,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(cd.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Wt(this.graphics),this.analyses=Wt(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Wt(this.analysisViewManager),this.toolViewManager=Wt(this.toolViewManager),this.layerViewManager=Wt(this.layerViewManager),this.basemapView=Wt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Wt(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return fe.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new zt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Rn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(fe.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Rn.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Ti(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return e??(this._cursor||"default")}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}importLayerView(e){throw new se("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport({spatialReference:e})!=null}when(e,t){return this.isResolved()&&!this.ready&&fe.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Yl(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ze.views=new Le,b([S()],ze.prototype,"_userSpatialReference",void 0),b([S()],ze.prototype,"activeTool",null),b([S({readOnly:!0})],ze.prototype,"allLayerViews",void 0),b([S()],ze.prototype,"groundView",void 0),b([S()],ze.prototype,"animation",null),b([S()],ze.prototype,"basemapView",void 0),b([S()],ze.prototype,"center",null),b([S({readOnly:!0})],ze.prototype,"_defaultsFromMapSettings",null),b([S()],ze.prototype,"defaultsFromMap",null),b([S()],ze.prototype,"fatalError",void 0),b([S({type:gt})],ze.prototype,"extent",null),b([S(r8(Qd,"graphics"))],ze.prototype,"graphics",void 0),b([S(r8(Hg,"analyses"))],ze.prototype,"analyses",void 0),b([S({readOnly:!0,type:a2})],ze.prototype,"heightModelInfo",null),b([S({readOnly:!0})],ze.prototype,"interacting",null),b([S({readOnly:!0})],ze.prototype,"navigating",null),b([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ze.prototype,"preconditionsReady",null),b([S({readOnly:!0})],ze.prototype,"typeSpecificPreconditionsReady",void 0),b([S({type:Le,readOnly:!0})],ze.prototype,"layerViews",void 0),b([S()],ze.prototype,"resolution",null),b([S({type:yP})],ze.prototype,"magnifier",void 0),b([S({value:null,type:tA})],ze.prototype,"map",null),b([S()],ze.prototype,"padding",void 0),b([S({readOnly:!0})],ze.prototype,"ready",void 0),b([S({type:Xe})],ze.prototype,"spatialReference",null),b([S()],ze.prototype,"spatialReferenceWarningDelay",void 0),b([S()],ze.prototype,"stationary",null),b([S({readOnly:!0})],ze.prototype,"supportsGround",void 0),b([S({type:Ws})],ze.prototype,"timeExtent",void 0),b([S({type:eu,nonNullable:!0})],ze.prototype,"timeReference",void 0),b([S()],ze.prototype,"tools",null),b([S()],ze.prototype,"toolViewManager",void 0),b([S({readOnly:!0})],ze.prototype,"type",void 0),b([S({type:Number})],ze.prototype,"scale",void 0),b([S({readOnly:!0})],ze.prototype,"updating",void 0),b([S({readOnly:!0})],ze.prototype,"initialExtentRequired",void 0),b([S({readOnly:!0})],ze.prototype,"initialExtent",null),b([S()],ze.prototype,"cursor",null),b([S({readOnly:!0})],ze.prototype,"input",void 0),b([S({type:SP,nonNullable:!0})],ze.prototype,"navigation",void 0),b([S()],ze.prototype,"layerViewManager",void 0),b([S()],ze.prototype,"analysisViewManager",void 0),b([S()],ze.prototype,"width",void 0),b([S()],ze.prototype,"height",void 0),b([S({readOnly:!0})],ze.prototype,"resizing",void 0),b([S({value:null,readOnly:!0})],ze.prototype,"size",null),b([S({readOnly:!0})],ze.prototype,"suspended",void 0),b([S({readOnly:!0})],ze.prototype,"viewEvents",void 0),b([S({readOnly:!0})],ze.prototype,"persistableViewModels",void 0),b([S()],ze.prototype,"_isValid",void 0),b([S()],ze.prototype,"_readyCycleForced",void 0),b([S()],ze.prototype,"_currentSpatialReference",void 0),ze=cd=b([B("esri.views.View")],ze);const hQ=ze;function cQ(e){return e.layerViews}let cl=class extends dg{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Vs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new se("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=Ia(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};b([S({readOnly:!0})],cl.prototype,"done",null),b([S({readOnly:!0,type:String})],cl.prototype,"state",void 0),b([S()],cl.prototype,"target",void 0),cl=b([B("esri.views.ViewAnimation")],cl),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(cl||(cl={}));const Q9=cl;function dh(e,t,i,r){const a=3*e,d=3*(i-e)-a,y=1-a-d,m=3*t,_=3*(r-t)-m,$=1-m-_;function M(L){return((y*L+d)*L+a)*L}function A(L){return(($*L+_)*L+m)*L}function P(L){return(3*y*L+2*d)*L+a}function j(L,F){let V,J,Q,Y,te,oe;for(Q=L,oe=0;oe<8;oe++){if(Y=M(Q)-L,Math.abs(Y)<F)return Q;if(te=P(Q),Math.abs(te)<1e-6)break;Q-=Y/te}if(V=0,J=1,Q=L,Q<V)return V;if(Q>J)return J;for(;V<J;){if(Y=M(Q),Math.abs(Y-L)<F)return Q;L>Y?V=Q:J=Q,Q=.5*(J-V)+V}return Q}return function(L,F=1e-6){return A(j(L,F))}}const pQ=/^cubic-bezier\((.*)\)/,Os={};function dQ(e){let t=Os[e]||null;if(!t){const i=pQ.exec(e);if(i){const r=i[1].split(",").map(a=>parseFloat(a.trim()));r.length!==4||r.some(a=>isNaN(a))||(t=dh.apply(dh,r))}}return t}Os.ease=dh(.25,.1,.25,1),Os.linear=dh(0,0,1,1),Os.easeIn=Os["ease-in"]=dh(.42,0,1,1),Os.easeOut=Os["ease-out"]=dh(0,0,.58,1),Os.easeInOut=Os["ease-in-out"]=dh(.42,0,.58,1);function fQ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function yQ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function mQ(e,t,i,r,a,d,y){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=d,e[5]=y,e}function D6(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=t[4],m=t[5];let _=i*d-r*a;return _?(_=1/_,e[0]=d*_,e[1]=-r*_,e[2]=-a*_,e[3]=i*_,e[4]=(a*m-d*y)*_,e[5]=(r*y-i*m)*_,e):null}function gQ(e){return e[0]*e[3]-e[1]*e[2]}function OP(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=i[0],M=i[1],A=i[2],P=i[3],j=i[4],L=i[5];return e[0]=r*$+d*M,e[1]=a*$+y*M,e[2]=r*A+d*P,e[3]=a*A+y*P,e[4]=r*j+d*L+m,e[5]=a*j+y*L+_,e}function l2(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=Math.sin(i),M=Math.cos(i);return e[0]=r*M+d*$,e[1]=a*M+y*$,e[2]=r*-$+d*M,e[3]=a*-$+y*M,e[4]=m,e[5]=_,e}function F6(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=i[0],M=i[1];return e[0]=r*$,e[1]=a*$,e[2]=d*M,e[3]=y*M,e[4]=m,e[5]=_,e}function kf(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=i[0],M=i[1];return e[0]=r,e[1]=a,e[2]=d,e[3]=y,e[4]=r*$+d*M+m,e[5]=a*$+y*M+_,e}function PP(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function CP(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function z6(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function vQ(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function bQ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function wQ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function NP(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function _Q(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function SQ(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function xQ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function $Q(e,t){const i=e[0],r=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=t[0],$=t[1],M=t[2],A=t[3],P=t[4],j=t[5],L=Bs();return Math.abs(i-_)<=L*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-$)<=L*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(a-M)<=L*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(d-A)<=L*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-P)<=L*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(m-j)<=L*Math.max(1,Math.abs(m),Math.abs(j))}const TQ=OP,IQ=NP;Object.freeze(Object.defineProperty({__proto__:null,add:wQ,copy:fQ,determinant:gQ,equals:$Q,exactEquals:xQ,frob:bQ,fromRotation:PP,fromScaling:CP,fromTranslation:z6,identity:yQ,invert:D6,mul:TQ,multiply:OP,multiplyScalar:_Q,multiplyScalarAndAdd:SQ,rotate:l2,scale:F6,set:mQ,str:vQ,sub:IQ,subtract:NP,translate:kf},Symbol.toStringTag,{value:"Module"}));function Hl(){return[1,0,0,1,0,0]}function EQ(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function MQ(e,t,i,r,a,d){return[e,t,i,r,a,d]}function AQ(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:EQ,create:Hl,createView:AQ,fromValues:MQ},Symbol.toStringTag,{value:"Module"}));function Of(e,t){return e[0]=t[0],e[1]=t[1],e}function Ki(e,t,i){return e[0]=t,e[1]=i,e}function jP(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Pf(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function RP(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function LP(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function kQ(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function OQ(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function PQ(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function CQ(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function NQ(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function n1(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function jQ(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function o1(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function Jg(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function Kg(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function DP(e){const t=e[0],i=e[1];return t*t+i*i}function FP(e,t){return e[0]=-t[0],e[1]=-t[1],e}function RQ(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function e5(e,t){const i=t[0],r=t[1];let a=i*i+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a),e}function zP(e,t){return e[0]*t[0]+e[1]*t[1]}function VP(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function LQ(e,t,i,r){const a=t[0],d=t[1];return e[0]=a+r*(i[0]-a),e[1]=d+r*(i[1]-d),e}function DQ(e,t){t=t||1;const i=2*Fv()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function FQ(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[2]*a,e[1]=i[1]*r+i[3]*a,e}function yo(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[2]*a+i[4],e[1]=i[1]*r+i[3]*a+i[5],e}function zQ(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[3]*a+i[6],e[1]=i[1]*r+i[4]*a+i[7],e}function VQ(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[4]*a+i[12],e[1]=i[1]*r+i[5]*a+i[13],e}function GQ(e,t,i,r){const a=t[0]-i[0],d=t[1]-i[1],y=Math.sin(r),m=Math.cos(r);return e[0]=a*m-d*y+i[0],e[1]=a*y+d*m+i[1],e}function qQ(e,t){const i=e[0],r=e[1],a=t[0],d=t[1];let y=i*i+r*r;y>0&&(y=1/Math.sqrt(y));let m=a*a+d*d;m>0&&(m=1/Math.sqrt(m));const _=(i*a+r*d)*y*m;return _>1?0:_<-1?Math.PI:Math.acos(_)}function UQ(e){return"vec2("+e[0]+", "+e[1]+")"}function BQ(e,t){return e[0]===t[0]&&e[1]===t[1]}function HQ(e,t){const i=e[0],r=e[1],a=t[0],d=t[1],y=Bs();return Math.abs(i-a)<=y*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-d)<=y*Math.max(1,Math.abs(r),Math.abs(d))}function WQ(e,t,i,r,a){let d=t[0]-i[0],y=t[1]-i[1];const m=(r[0]*d+r[1]*y)*(a-1);return d=r[0]*m,y=r[1]*m,e[0]=t[0]+d,e[1]=t[1]+y,e}const JQ=Kg,V6=Pf,KQ=RP,YQ=LP,ZQ=o1,XQ=Jg,QQ=DP;Object.freeze(Object.defineProperty({__proto__:null,add:jP,angle:qQ,ceil:kQ,copy:Of,cross:VP,dist:ZQ,distance:o1,div:YQ,divide:LP,dot:zP,equals:HQ,exactEquals:BQ,floor:OQ,inverse:RQ,len:JQ,length:Kg,lerp:LQ,max:CQ,min:PQ,mul:KQ,multiply:RP,negate:FP,normalize:e5,projectAndScale:WQ,random:DQ,rotate:GQ,round:NQ,scale:n1,scaleAndAdd:jQ,set:Ki,sqrDist:XQ,sqrLen:QQ,squaredDistance:Jg,squaredLength:DP,str:UQ,sub:V6,subtract:Pf,transformMat2:FQ,transformMat2d:yo,transformMat3:zQ,transformMat4:VQ},Symbol.toStringTag,{value:"Module"}));function $i(){return[0,0]}function eee(e){return[e[0],e[1]]}function a1(e,t){return[e,t]}function tee(e){const t=$i(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function iee(e,t){return new Float64Array(e,t,2)}function GP(){return $i()}function qP(){return a1(1,1)}function UP(){return a1(1,0)}function BP(){return a1(0,1)}const ree=GP(),see=qP(),nee=UP(),oee=BP();Object.freeze(Object.defineProperty({__proto__:null,ONES:see,UNIT_X:nee,UNIT_Y:oee,ZEROS:ree,clone:eee,create:$i,createView:iee,fromArray:tee,fromValues:a1,ones:qP,unitX:UP,unitY:BP,zeros:GP},Symbol.toStringTag,{value:"Module"}));const HP=96,WP=39.37,aee=180/Math.PI;function JP(e){return e.wkid?e:e.spatialReference||Xe.WGS84}function G6(e,t){return t.type?Ki(e,t.x,t.y):Of(e,t)}function KP(e){return Ma(e)}function fp(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*mee(e.spatialReference)}async function pd(e,t,i,r){var m,_;let a,d;if(!e||Array.isArray(e)&&!e.length)return null;if(Le.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const $=e.every(P=>"attributes"in P),M=e.some(P=>!P.geometry);let A=e;if($&&M&&t&&t.allLayerViews){const P=new Map;for(const V of e){const J=V.layer,Q=P.get(J)||[],Y=V.attributes[J.objectIdField];Y!=null&&Q.push(Y),P.set(J,Q)}const j=[];P.forEach((V,J)=>{const Q=t.allLayerViews.find(Y=>Y.layer.id===J.id);if(Q&&"queryFeatures"in Q){const Y=J.createQuery();Y.objectIds=V,Y.returnGeometry=!0,j.push(Q.queryFeatures(Y))}});const L=await Promise.all(j),F=[];for(const V of L)if(V&&V.features&&V.features.length)for(const J of V.features)J.geometry!=null&&F.push(J.geometry);A=F}for(const P of A)r=await pd(P,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")a=new Ze(e);else if(e instanceof su)a=e;else if("geometry"in e){if(e.geometry)a=e.geometry;else if(e.layer){const $=e.layer,M=t.allLayerViews.find(A=>A.layer.id===$.id);if(M&&"queryFeatures"in M){const A=$.createQuery();A.objectIds=[e.attributes[$.objectIdField]],A.returnGeometry=!0;const P=await M.queryFeatures(A);a=(_=(m=P==null?void 0:P.features)==null?void 0:m[0])==null?void 0:_.geometry}}}if(a==null||(d=a.type==="point"?new gt({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference}):a.extent,!d))return null;ec()||$a(d.spatialReference,i)||await Ql();const y=hu(d,i);return y?r=r?r.union(y):y:null}function lee(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const a=r.layer;a&&a.minScale&&a.maxScale&&(t=a.minScale<t?a.minScale:t,i=a.maxScale>i?a.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function xb(e,t){return Ti(JP(e),t)?e:hu(e,t)}async function uee(e,t){if(!e||!t)return new bo({targetGeometry:new Ze,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:a,viewpoint:d,size:y}=t,m=[a?y[0]-a.left-a.right:y[0],a?y[1]-a.top-a.bottom:y[1]];let _=null;e instanceof bo?_=e:e.viewpoint?_=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(_=e.target);let $=null;_&&_.targetGeometry?$=_.targetGeometry:e instanceof gt?$=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&($=await pd(e.center,t,i)||await pd(e.extent,t,i)||await pd(e.target,t,i)||await pd(e,t,i)),!$&&d&&d.targetGeometry?$=d.targetGeometry:!$&&t.extent&&($=t.extent),i||(i=JP(t.spatialReference||t.extent||$)),ec()||Ti($.spatialReference,i)||$a($,i)||await Ql();const M=xb($.center??$,i);let A=0;if(_&&_.targetGeometry!=null&&_.targetGeometry.type==="point")A=_.scale;else if("scale"in e&&e.scale)A=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)A=r.zoomToScale(e.zoom);else if(Array.isArray($)||$.type==="point"||$.type==="extent"&&$.width===0&&$.height===0){const F=xb(t.extent,i);A=F!=null?fp(F,m):t.extent?fp(t.extent,m):d.scale}else A=fp(xb($.extent,i),m);const P=lee(e);P&&(P.min&&P.min>A?A=P.min:P.max&&P.max<A&&(A=P.max));let j=0;_?j=_.rotation:e.hasOwnProperty("rotation")?j=e.rotation:d&&(j=d.rotation);let L=new bo({targetGeometry:M,scale:A,rotation:j});return r&&(L=r.fit(L),r.constrainByGeometry(L),r.rotationEnabled||(L.rotation=j)),L}function Gn(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function hee(e,t,i){return i?Ki(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):n1(e,t,.5)}const cee=function(){const e=$i();return function(t,i,r){const a=i.targetGeometry;G6(e,a);const d=.5*r0(i);return t.xmin=e[0]-d*r[0],t.ymin=e[1]-d*r[1],t.xmax=e[0]+d*r[0],t.ymax=e[1]+d*r[1],t.spatialReference=a.spatialReference,t}}();function pee(e,t,i,r,a){var d;return t5(e,t,i.center),e.scale=fp(i,r),(d=a==null?void 0:a.constraints)==null||d.constrain(e),e}function dee(e,t,i,r){return B6(e,t,i,r),D6(e,e)}const YP=function(){const e=$i();return function(t,i,r){return V6(t,gee(t,i),hee(e,i,r))}}(),fee=function(){const e=Hl(),t=$i();return function(i,r,a,d){const y=r0(r),m=q6(r);return Ki(t,y,y),CP(e,t),l2(e,e,m),kf(e,e,YP(t,a,d)),kf(e,e,[0,d.top-d.bottom]),Ki(i,e[4],e[5])}}();function r0(e){return e.scale*yee(e.targetGeometry)}function yee(e){return e!=null&&Zi(e.spatialReference)?1/(KP(e.spatialReference)*WP*HP):1}function q6(e){return L4(e.rotation)||0}function mee(e){return Zi(e)?KP(e)*WP*HP:1}function gee(e,t){return n1(e,t,.5)}const U6=function(){const e=$i(),t=$i(),i=$i();return function(r,a,d,y,m,_){return FP(e,a),n1(t,d,.5*_),Ki(i,1/y*_,-1/y*_),z6(r,t),m&&l2(r,r,m),F6(r,r,i),kf(r,r,e),r}}(),B6=function(){const e=$i();return function(t,i,r,a){const d=r0(i),y=q6(i);return G6(e,i.targetGeometry),U6(t,e,r,d,y,a)}}(),vee=function(){const e=$i();return function(t,i,r,a){const d=r0(i);return G6(e,i.targetGeometry),U6(t,e,r,d,0,a)}}();function bee(e){const t=On(e);return t?t.valid[1]-t.valid[0]:0}function wee(e,t){return Math.round(bee(e)/t)}const _ee=function(){const e=$i(),t=$i(),i=[0,0,0];return function(r,a,d){Pf(e,r,a),e5(e,e),Pf(t,r,d),e5(t,t),VP(i,e,t);let y=Math.acos(zP(e,t)/(Kg(e)*Kg(t)))*aee;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),See=function(){const e=$i();return function(t,i,r,a){const d=t.targetGeometry;return Gn(t,i),fee(e,i,r,a),d.x+=e[0],d.y+=e[1],t}}(),t5=function(e,t,i){Gn(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},xee=function(){const e=$i();return function(t,i,r,a,d){d||(d="center"),V6(e,r,a),n1(e,e,.5);const y=e[0],m=e[1];switch(d){case"center":Ki(e,0,0);break;case"left":Ki(e,-y,0);break;case"top":Ki(e,0,m);break;case"right":Ki(e,y,0);break;case"bottom":Ki(e,0,-m);break;case"top-left":Ki(e,-y,m);break;case"bottom-left":Ki(e,-y,-m);break;case"top-right":Ki(e,y,m);break;case"bottom-right":Ki(e,y,-m)}return u2(t,i,e),t}}();function jye(e,t,i){return Gn(e,t),e.rotation+=i,e}function $ee(e,t,i){return Gn(e,t),e.rotation=i,e}const Tee=function(){const e=$i();return function(t,i,r,a,d){return Gn(t,i),isNaN(r)||r===0||(XP(e,a,i,d),t.scale=i.scale*r,QP(e,e,t,d),u2(t,t,Ki(e,e[0]-a[0],a[1]-e[1]))),t}}();function x8(e,t,i){return Gn(e,t),e.scale=i,e}const ZP=function(){const e=$i();return function(t,i,r,a,d,y){return Gn(t,i),isNaN(r)||r===0||(XP(e,d,i,y),t.scale=i.scale*r,t.rotation+=a,QP(e,e,t,y),u2(t,t,Ki(e,e[0]-d[0],d[1]-e[1]))),t}}(),Rye=function(){const e=$i(),t=$i();return function(i,r,a,d,y,m,_){return YP(t,m,_),jP(e,y,t),d?ZP(i,r,a,d,e,m):Tee(i,r,a,e,m)}}(),XP=function(){const e=Hl();return function(t,i,r,a){return yo(t,i,dee(e,r,a,1))}}(),QP=function(){const e=Hl();return function(t,i,r,a){return yo(t,i,B6(e,r,a,1))}}(),u2=function(){const e=$i(),t=Hl();return function(i,r,a){Gn(i,r);const d=r0(r),y=i.targetGeometry;return PP(t,q6(r)),F6(t,t,a1(d,d)),yo(e,a,t),y.x+=e[0],y.y+=e[1],i}}();let Iee=class{constructor(t,i,r,a){const d=t.targetGeometry,y=i.targetGeometry;a?typeof a=="string"&&(a=dQ(a)||Os.ease):a=Os.ease,this.easing=a,this.duration=r,this.sCenterX=d.x,this.sCenterY=d.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let a,d,y,m;i>=1?(a=this.tCenterX,d=this.tCenterY,y=this.tRotation,m=this.tScale):(a=this.sCenterX+r*this.dCenterX,d=this.sCenterY+r*this.dCenterY,y=this.sRotation+r*this.dRotation,m=this.sScale+r*this.dScale),t.targetGeometry.x=a,t.targetGeometry.y=d,t.scale=m,t.rotation=y}},Wo=class extends De{constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Os.ease,this.view=null,this.viewpoint=new bo({targetGeometry:new Ze,scale:0,rotation:0}),this._updateTask=Sp({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=ai(this._updateTask)}animate(t,i,r){this.stop();const a=this.viewpoint;Gn(a,i),this.transition=new Iee(this.viewpoint,t.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const d=()=>{var y,m;this.animation===t&&this._updateTask&&(t.state==="finished"&&((y=this.transition)==null||y.applyRatio(this.viewpoint,1),(m=this.view)!=null&&m.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(d,d),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new Q9({target:t.clone()}),a=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,a;const i=this.animation;if(i&&i.state!==Q9.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const d=this.transition,y=(performance.now()-this._startTime)/d.duration,m=y>=1;d.applyRatio(this.viewpoint,y),m&&((r=this.animation)==null||r.finish())}(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};b([S()],Wo.prototype,"animation",void 0),b([S()],Wo.prototype,"duration",void 0),b([S()],Wo.prototype,"transition",void 0),b([S()],Wo.prototype,"easing",void 0),b([S()],Wo.prototype,"view",void 0),b([S()],Wo.prototype,"viewpoint",void 0),Wo=b([B("esri.views.2d.AnimationManager")],Wo);const Eee=Wo;let Mee=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var y,m;if(this._updateRequested=!1,(y=this.view)==null?void 0:y.destroyed)return;const{allLayerViews:i,graphicsView:r,labelManager:a,state:{id:d}}=this.view;i.forEach(this._updateLayerView,this),a!=null&&(a.lastUpdateId!==d&&(a.viewChange(),a.lastUpdateId=d),a.updateRequested&&a.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==d&&(r.viewChange(),r.lastUpdateId=d),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((m=this._frameTaskHandle)==null||m.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ke(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Sp(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var a;if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((a=t.layerViews)==null||a.forEach(this._updateLayerView,this))}};function di(){return Promise.all([be(()=>import("./webglDeps-477848d3.js"),["assets/webglDeps-477848d3.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/ProgramTemplate-364b0a9c.js","assets/programUtils-9de6691a.js","assets/NestedMap-1b5db22e.js"]),be(()=>import("./mapViewDeps-d93e19d2.js"),["assets/mapViewDeps-d93e19d2.js","assets/CIMResourceManager-96a01e5c.js","assets/fontUtils-b3b35a0e.js","assets/Rasterizer-c7b37ef1.js","assets/cimAnalyzer-1d026d97.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-d75b7bae.js","assets/alignmentUtils-ae955d28.js","assets/definitions-8a2650b8.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/rasterizingUtils-81a80b5f.js","assets/imageutils-d5fd8f85.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/BufferPool-715c9a7b.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/enums-fb086c25.js","assets/programUtils-9de6691a.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-9da7f876.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f5c4cd6d.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/RenderingContext-ed41c065.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/GraphicContainer-b6aeb656.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-1a08b208.js"])])}const I0=()=>di().then(()=>be(()=>import("./TileLayerView2D-e8c34c96.js"),["assets/TileLayerView2D-e8c34c96.js","assets/Rasterizer-c7b37ef1.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-d75b7bae.js","assets/alignmentUtils-ae955d28.js","assets/definitions-8a2650b8.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/rasterizingUtils-81a80b5f.js","assets/EffectView-d311bb0b.js","assets/Container-880a32cf.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/BufferPool-715c9a7b.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-9da7f876.js","assets/imageutils-d5fd8f85.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f5c4cd6d.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-8cb463e4.js","assets/BitmapTileContainer-8cb684c0.js","assets/Bitmap-29314f46.js","assets/TileContainer-af6e173d.js","assets/LayerView-47607e7e.js","assets/HighlightGraphicContainer-b8d3cf60.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/RefreshableLayerView-4198bedf.js","assets/drapedUtils-8823eca0.js","assets/popupUtils-e2b1dd75.js"])),uc=()=>di().then(()=>be(()=>import("./FeatureLayerView2D-09c99a72.js"),["assets/FeatureLayerView2D-09c99a72.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/BitmapTileContainer-8cb684c0.js","assets/Bitmap-29314f46.js","assets/TileContainer-af6e173d.js","assets/CircularArray-ef508845.js","assets/BufferPool-715c9a7b.js","assets/FeatureContainer-956ec1c3.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),$8={"base-dynamic":()=>di().then(()=>be(()=>import("./BaseDynamicLayerView2D-d26dc1a2.js"),["assets/BaseDynamicLayerView2D-d26dc1a2.js","assets/BitmapContainer-b48c86e3.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/ExportStrategy-2ff244a1.js","assets/Bitmap-29314f46.js","assets/RefreshableLayerView-4198bedf.js"])),"base-tile":I0,"bing-maps":I0,csv:uc,"geo-rss":()=>di().then(()=>be(()=>import("./GeoRSSLayerView2D-ac9e8f18.js"),["assets/GeoRSSLayerView2D-ac9e8f18.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/GraphicContainer-b6aeb656.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js"])),feature:uc,geojson:uc,graphics:()=>di().then(()=>be(()=>import("./GraphicsLayerView2D-4f491715.js"),["assets/GraphicsLayerView2D-4f491715.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/GraphicContainer-b6aeb656.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js"])),group:()=>di().then(()=>be(()=>import("./GroupLayerView2D-4e65f9e2.js"),["assets/GroupLayerView2D-4e65f9e2.js","assets/GroupContainer-f8bff2f7.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js"])),imagery:()=>di().then(()=>be(()=>import("./ImageryLayerView2D-20882657.js"),["assets/ImageryLayerView2D-20882657.js","assets/RasterVFDisplayObject-55dcfd43.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-035fed75.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/GraphicsView2D-eebd3137.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/visualVariablesUtils-466359eb.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-b8d3cf60.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-b48c86e3.js","assets/Bitmap-29314f46.js","assets/ExportStrategy-2ff244a1.js","assets/rasterProjectionHelper-e8ec5eca.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),"imagery-tile":()=>di().then(()=>be(()=>import("./ImageryTileLayerView2D-e786b8c0.js"),["assets/ImageryTileLayerView2D-e786b8c0.js","assets/multidimensionalUtils-254ddc49.js","assets/RasterVFDisplayObject-55dcfd43.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-035fed75.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/rasterUtils-a3cd2e4f.js","assets/TiledDisplayObject-782c6658.js","assets/TileContainer-af6e173d.js","assets/RawBlockCache-0f95f84f.js","assets/rasterProjectionHelper-e8ec5eca.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-b6d3787a.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),kml:()=>di().then(()=>be(()=>import("./KMLLayerView2D-a529c364.js"),["assets/KMLLayerView2D-a529c364.js","assets/kmlUtils-74e49e75.js","assets/Bitmap-29314f46.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/BitmapContainer-b48c86e3.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/GraphicContainer-b6aeb656.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-e8ec5eca.js","assets/RenderingContext-ed41c065.js","assets/programUtils-9de6691a.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-f5c4cd6d.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-a3cd2e4f.js"])),"knowledge-graph":()=>di().then(()=>be(()=>import("./KnowledgeGraphLayerView2D-a910dcfd.js"),["assets/KnowledgeGraphLayerView2D-a910dcfd.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js"])),"link-chart":()=>di().then(()=>be(()=>import("./KnowledgeGraphLayerView2D-a910dcfd.js"),["assets/KnowledgeGraphLayerView2D-a910dcfd.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js"])),"knowledge-graph-sublayer":uc,"map-image":()=>di().then(()=>be(()=>import("./MapImageLayerView2D-768c71b3.js"),["assets/MapImageLayerView2D-768c71b3.js","assets/BitmapContainer-b48c86e3.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/GraphicsView2D-eebd3137.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/visualVariablesUtils-466359eb.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-b8d3cf60.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-2ff244a1.js","assets/Bitmap-29314f46.js","assets/RefreshableLayerView-4198bedf.js","assets/drapedUtils-8823eca0.js","assets/popupUtils-e2b1dd75.js"])),"map-notes":()=>di().then(()=>be(()=>import("./MapNotesLayerView2D-5a03ae31.js"),["assets/MapNotesLayerView2D-5a03ae31.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/GroupContainer-f8bff2f7.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/GraphicContainer-b6aeb656.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js"])),media:()=>di().then(()=>be(()=>import("./MediaLayerView2D-42682ca3.js"),["assets/MediaLayerView2D-42682ca3.js","assets/perspectiveUtils-2476c1bd.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/mat3f64-221ce671.js","assets/Rasterizer-c7b37ef1.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-d75b7bae.js","assets/alignmentUtils-ae955d28.js","assets/definitions-8a2650b8.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/rasterizingUtils-81a80b5f.js","assets/EffectView-d311bb0b.js","assets/Container-880a32cf.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/BufferPool-715c9a7b.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-9da7f876.js","assets/imageutils-d5fd8f85.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f5c4cd6d.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-eebd3137.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-47607e7e.js"])),"ogc-feature":()=>di().then(()=>be(()=>import("./OGCFeatureLayerView2D-d027b1f9.js"),["assets/OGCFeatureLayerView2D-d027b1f9.js","assets/FeatureLayerView2D-09c99a72.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/BitmapTileContainer-8cb684c0.js","assets/Bitmap-29314f46.js","assets/TileContainer-af6e173d.js","assets/CircularArray-ef508845.js","assets/BufferPool-715c9a7b.js","assets/FeatureContainer-956ec1c3.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),"open-street-map":I0,"oriented-imagery":uc,route:()=>di().then(()=>be(()=>import("./RouteLayerView2D-6bcb2872.js"),["assets/RouteLayerView2D-6bcb2872.js","assets/Stop-88e46fc0.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/GraphicContainer-b6aeb656.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js"])),stream:()=>di().then(()=>be(()=>import("./StreamLayerView2D-712a5668.js"),["assets/StreamLayerView2D-712a5668.js","assets/FeatureLayerView2D-09c99a72.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/BitmapTileContainer-8cb684c0.js","assets/Bitmap-29314f46.js","assets/TileContainer-af6e173d.js","assets/CircularArray-ef508845.js","assets/BufferPool-715c9a7b.js","assets/FeatureContainer-956ec1c3.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),"subtype-group":()=>di().then(()=>be(()=>import("./SubtypeGroupLayerView2D-7ae4937c.js"),["assets/SubtypeGroupLayerView2D-7ae4937c.js","assets/FeatureLayerView2D-09c99a72.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/cimAnalyzer-1d026d97.js","assets/fontUtils-b3b35a0e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-d75b7bae.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/BitmapTileContainer-8cb684c0.js","assets/Bitmap-29314f46.js","assets/TileContainer-af6e173d.js","assets/CircularArray-ef508845.js","assets/BufferPool-715c9a7b.js","assets/FeatureContainer-956ec1c3.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),tile:I0,"vector-tile":()=>di().then(()=>be(()=>import("./VectorTileLayerView2D-318e1bd8.js"),["assets/VectorTileLayerView2D-318e1bd8.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/rasterizingUtils-81a80b5f.js","assets/floatRGBA-257ab887.js","assets/VertexArrayObject-2ee58a76.js","assets/config-1337d16e.js","assets/TiledDisplayObject-782c6658.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-a52b1098.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-af6e173d.js","assets/WGLContainer-1d369137.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/earcut-48db4b31.js","assets/StyleRepository-f4735dd5.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/LayerView-47607e7e.js"])),video:()=>di().then(()=>be(()=>import("./VideoLayerView2D-84993ccb.js"),["assets/VideoLayerView2D-84993ccb.js","assets/LayerView-47607e7e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js"])),wcs:()=>di().then(()=>be(()=>import("./ImageryTileLayerView2D-e786b8c0.js"),["assets/ImageryTileLayerView2D-e786b8c0.js","assets/multidimensionalUtils-254ddc49.js","assets/RasterVFDisplayObject-55dcfd43.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-035fed75.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/rasterUtils-a3cd2e4f.js","assets/TiledDisplayObject-782c6658.js","assets/TileContainer-af6e173d.js","assets/RawBlockCache-0f95f84f.js","assets/rasterProjectionHelper-e8ec5eca.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-b6d3787a.js","assets/popupUtils-e2b1dd75.js","assets/RefreshableLayerView-4198bedf.js"])),"web-tile":I0,wfs:uc,wms:()=>di().then(()=>be(()=>import("./WMSLayerView2D-0b3e29a7.js"),["assets/WMSLayerView2D-0b3e29a7.js","assets/BitmapContainer-b48c86e3.js","assets/WGLContainer-1d369137.js","assets/definitions-8a2650b8.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/earcut-48db4b31.js","assets/LayerView-47607e7e.js","assets/ExportStrategy-2ff244a1.js","assets/Bitmap-29314f46.js","assets/RefreshableLayerView-4198bedf.js","assets/ExportWMSImageParameters-3f7b2334.js"])),wmts:()=>di().then(()=>be(()=>import("./WMTSLayerView2D-c980c67f.js"),["assets/WMTSLayerView2D-c980c67f.js","assets/imageUtils-8cb463e4.js","assets/BitmapTileContainer-8cb684c0.js","assets/Bitmap-29314f46.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/definitions-8a2650b8.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/TiledDisplayObject-782c6658.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-a52b1098.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/TileContainer-af6e173d.js","assets/LayerView-47607e7e.js","assets/RefreshableLayerView-4198bedf.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Aee(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new se(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const T8={hasLayerViewModule:e=>$8[e.type]!=null,importLayerView:e=>{const t=$8[e.type];if(t==null)throw Aee(e);return t(e)}};function kee(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let a=Number.POSITIVE_INFINITY,d=0,y=0;const m=[0,0],_=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const $ of _)for(let M=0;M<$.length-1;M++){iU(m,r,$,M);const A=o1(r,m);A<a&&(a=A,d=m[0],y=m[1])}return{coordinate:new Ze({x:d,y,spatialReference:i}),distance:a}}var i5;let fh=i5=class extends J4(De){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return hu(this.geometry,this.spatialReference)}catch(e){return fe.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Dv(this.normalizedGeometry,i):YE(this.normalizedGeometry,i))return e;const{coordinate:r}=kee(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new i5({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};b([S({constructOnly:!0})],fh.prototype,"geometry",void 0),b([S({readOnly:!0})],fh.prototype,"normalizedGeometry",null),b([S({constructOnly:!0})],fh.prototype,"spatialReference",void 0),fh=i5=b([B("esri.views.2d.constraints.GeometryConstraint")],fh);var r5;let dd=r5=class extends J4(De){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new r5({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b([S()],dd.prototype,"enabled",void 0),b([S()],dd.prototype,"rotationEnabled",void 0),dd=r5=b([B("esri.views.2d.constraints.RotationConstraint")],dd);const eC=dd;var s5;let Vr=s5=class extends J4(De){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:a,maxZoom:d}=this,y=-1,m=-1,_=!1,$=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(M=>M.clone()),t.sort((M,A)=>A.scale-M.scale),t.forEach((M,A)=>M.level=A);for(const M of t)!_&&i>0&&i>=M.scale&&(y=M.level,_=!0),!$&&r>0&&r>=M.scale&&(m=e?e.level:-1,$=!0),e=M;a===-1&&(a=i===0?0:y),d===-1&&(d=r===0?t.length-1:m),a=Math.max(a,0),a=Math.min(a,t.length-1),d=Math.max(d,0),d=Math.min(d,t.length-1),a>d&&([a,d]=[d,a]),i=t[a].scale,r=t[d].scale,t.splice(0,a),t.splice(d-a+1,t.length),t.forEach((M,A)=>{this._lodByScale[M.scale]=M,this._scales[A]=M.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",d),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,a=e.targetGeometry,d=t&&t.targetGeometry,y=r!==0&&e.scale<r,m=i!==0&&e.scale>i;if(y||m){const _=m?i:r;if(t&&d){const $=(_-t.scale)/(e.scale-t.scale);a.x=d.x+(a.x-d.x)*$,a.y=d.y+(a.y-d.y)*$}e.scale=_}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let a=0;a<t.length-1;a++){if(i=t[a],r=t[a+1],r===e)return a+this.effectiveMinZoom+1;if(i>e&&r<e)return a+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new s5({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};b([S({readOnly:!0})],Vr.prototype,"effectiveLODs",void 0),b([S({readOnly:!0})],Vr.prototype,"effectiveMinZoom",void 0),b([S({readOnly:!0})],Vr.prototype,"effectiveMaxZoom",void 0),b([S({readOnly:!0})],Vr.prototype,"effectiveMinScale",void 0),b([S({readOnly:!0})],Vr.prototype,"effectiveMaxScale",void 0),b([S()],Vr.prototype,"lods",void 0),b([S()],Vr.prototype,"minZoom",void 0),b([S()],Vr.prototype,"maxZoom",void 0),b([S()],Vr.prototype,"minScale",void 0),b([S()],Vr.prototype,"maxScale",void 0),b([S()],Vr.prototype,"snapToZoom",void 0),Vr=s5=b([B("esri.views.2d.constraints.ZoomConstraint")],Vr);const tC=Vr,Oee={base:null,key:"type",typeMap:{extent:gt,polygon:$o}};let bi=class extends De{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Le}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new fh({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new eC({rotationEnabled:this.rotationEnabled})}get _zoom(){var _;const t=this._get("_zoom"),i=this.lods||((_=this.view)==null?void 0:_.constraintsInfo.lods),r=this.minZoom,a=this.maxZoom,d=this.minScale,y=this.maxScale,m=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===a&&t.minScale===d&&t.maxScale===y&&t.snapToZoom===m?t:new tC({lods:i,minZoom:r,maxZoom:a,minScale:d,maxScale:y,snapToZoom:m})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};b([S({readOnly:!0})],bi.prototype,"effectiveLODs",null),b([S({readOnly:!0})],bi.prototype,"effectiveMinScale",null),b([S({readOnly:!0})],bi.prototype,"effectiveMaxScale",null),b([S({readOnly:!0})],bi.prototype,"effectiveMinZoom",null),b([S({readOnly:!0})],bi.prototype,"effectiveMaxZoom",null),b([S({types:Oee,value:null})],bi.prototype,"geometry",null),b([S({type:[xl]})],bi.prototype,"lods",void 0),b([S()],bi.prototype,"minScale",void 0),b([S()],bi.prototype,"maxScale",void 0),b([S()],bi.prototype,"minZoom",void 0),b([S()],bi.prototype,"maxZoom",void 0),b([S()],bi.prototype,"rotationEnabled",void 0),b([S()],bi.prototype,"snapToZoom",void 0),b([S({type:Le})],bi.prototype,"customConstraints",void 0),b([S()],bi.prototype,"view",void 0),b([S({readOnly:!0})],bi.prototype,"version",null),b([S({type:fh,readOnly:!0})],bi.prototype,"_geometry",null),b([S({type:eC})],bi.prototype,"_rotation",null),b([S({readOnly:!0,type:tC})],bi.prototype,"_zoom",null),bi=b([B("esri.views.2d.MapViewConstraints")],bi);const iC=bi;let Pee=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},rC=class{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new jg(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=ai(this._schedule),this._task=ai(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const a=new AbortController;let d=null;i&&(d=Fs(i,()=>a.abort()));const y=()=>{const M=this._processingItems.get(t);M&&M.controller.abort(),m(),$.reject(li())},m=()=>{_.remove(),d!=null&&d.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},_=o4(a.signal,y),$=Vs();return this._deferreds.set(t,$),this._controllers.set(t,a),$.promise.then(m,m),this._queue.push(t),this._scheduleNext(),$.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Vp(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,a=new Pee(t,r);this._processingItems.set(t,a);try{i=this.process(t,r.signal)}catch(d){this._processError(a,d)}Ia(i)?(a.promise=i,i.then(d=>this._processResult(a,d),d=>this._processError(a,d))):this._processResult(a,i)}get test(){return{update:t=>this.runTask(t)}}};function Cee(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const $b=new Set,sy=[],hc=new Map,I8=[0,0];let Ga=class extends De{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:i}=this;this._queue=new rC({concurrency:t,process:(r,a)=>{const d=this._keyToItem.get(r);return i(d,{signal:a})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=Wt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const i=typeof t=="string"?t:t.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(t,i){const r=t.key.id+"-"+i;if(this.has(r))return this.get(r);const a=this._queue.push(r),d=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,t),a.then(d,d),this.notifyChange("updating"),a}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;t.forEach(M=>{const A=this._keyToItem.get(M),P=this.tileInfoView.getTileScale(A.key);hc.has(P)||(hc.set(P,[]),r=Math.max(P,r),a=Math.min(P,a)),hc.get(P).push(A.key),$b.add(P)});let d=this.state.scale;hc.has(d)||(Cee(sy,$b),sy.sort((M,A)=>M-A),d=sy.reduce((M,A)=>Math.abs(A-d)<Math.abs(M-d)?A:M,sy[0])),d=Math.min(d,r),d=Math.max(d,a);const y=hc.get(d),m=i.getClosestInfoForScale(d),_=m.getColumnForX(this.state.center[0]),$=m.getRowForY(this.state.center[1]);return y.sort((M,A)=>{const P=m.denormalizeCol(M.col,M.world),j=m.denormalizeCol(A.col,A.world);return Math.sqrt((_-P)*(_-P)+($-M.row)*($-M.row))-Math.sqrt((_-j)*(_-j)+($-A.row)*($-A.row))}),$b.clear(),hc.clear(),y[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView,r=this.state.center;let a,d=Number.POSITIVE_INFINITY;return t.forEach(y=>{const m=this._keyToItem.get(y);i.getTileCoords(I8,m.key);const _=o1(I8,r);_<d&&(d=_,a=m.key)}),a.id}};b([S({constructOnly:!0})],Ga.prototype,"concurrency",void 0),b([S({constructOnly:!0})],Ga.prototype,"process",void 0),b([S()],Ga.prototype,"state",void 0),b([S({constructOnly:!0})],Ga.prototype,"strategy",void 0),b([S({constructOnly:!0})],Ga.prototype,"tileInfoView",void 0),b([S({readOnly:!0})],Ga.prototype,"updating",null),Ga=b([B("esri.views.2d.tiling.PagedTileQueue")],Ga);let Bh=class qu{static getId(t,i,r,a){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${a}`}constructor(t,i,r,a){this.set(t,i,r,a)}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,a){this.set(t,i,r,a)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new qu(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,a){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[d,y,m,_]=t.split("/");this.level=parseFloat(d),this.row=parseFloat(y),this.col=parseFloat(m),this.world=parseFloat(_)}else this.level=+t,this.row=+i,this.col=+r,this.world=+a||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new qu(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,a=this.world;return[new qu(t,i,r,a),new qu(t,i,r+1,a),new qu(t,i+1,r,a),new qu(t,i+1,r+1,a)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Bh.pool=new ru(Bh,null,null,25,50);function qa(e,t){return[e,t]}function gu(e,t,i){return e[0]=t,e[1]=i,e}function Nee(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e}const rn=new Bh("0/0/0/0");let jee=class sC{static create(t,i,r=null){const a=On(t.spatialReference),d=i.origin||qa(t.origin.x,t.origin.y),y=qa(t.size[0]*i.resolution,t.size[1]*i.resolution),m=qa(-1/0,-1/0),_=qa(1/0,1/0),$=qa(1/0,1/0);r!=null&&(gu(m,Math.max(0,Math.floor((r.xmin-d[0])/y[0])),Math.max(0,Math.floor((d[1]-r.ymax)/y[1]))),gu(_,Math.max(0,Math.floor((r.xmax-d[0])/y[0])),Math.max(0,Math.floor((d[1]-r.ymin)/y[1]))),gu($,_[0]-m[0]+1,_[1]-m[1]+1));const{cols:M,rows:A}=i;let P,j,L,F;return!r&&M&&A&&(gu(m,M[0],A[0]),gu(_,M[1],A[1]),gu($,M[1]-M[0]+1,A[1]-A[0]+1)),t.isWrappable?(P=qa(Math.ceil(Math.round((a.valid[1]-a.valid[0])/i.resolution)/t.size[0]),$[1]),j=qa(Math.floor((a.origin[0]-d[0])/y[0]),m[1]),L=qa(P[0]+j[0]-1,_[1]),F=!0):(j=m,L=_,P=$,F=!1),new sC(i.level,i.resolution,i.scale,d,m,_,$,y,j,L,P,F)}constructor(t,i,r,a,d,y,m,_,$,M,A,P){this.level=t,this.resolution=i,this.scale=r,this.origin=a,this.first=d,this.last=y,this.size=m,this.norm=_,this.worldStart=$,this.worldEnd=M,this.worldSize=A,this.wrap=P}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){rn.set(i);const a=r?rn.col:this.denormalizeCol(rn.col,rn.world),d=rn.row;return Nee(t,this.getXForColumn(a),this.getYForRow(d+1),this.getXForColumn(a+1),this.getYForRow(d)),t}getTileCoords(t,i,r=!1){rn.set(i);const a=r?rn.col:this.denormalizeCol(rn.col,rn.world);return Array.isArray(t)?gu(t,this.getXForColumn(a),this.getYForRow(rn.row)):(t.x=this.getXForColumn(a),t.y=this.getYForRow(rn.row)),t}},Cf=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:a}=this,{level:d}=a;if(r.length!==0)for(const{row:y,colFrom:m,colTo:_}of r)for(let $=m;$<=_;$++)t.call(i,d,y,a.normalizeCol($),a.getWorldForColumn($))}};Cf.pool=new ru(Cf);let Tb=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const Qt=new Bh("0/0/0/0");let Ree=class nC{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,a]=t,[d,y]=i,m=d-r,_=y-a,$=_!==0?m/_:0,M=(Math.ceil(a)-a)*$,A=(Math.floor(a)-a)*$;return new nC(r,Math.floor(a),Math.ceil(y),$,m<0?M:A,m<0?A:M,m<0?d:r,m<0?r:d)}constructor(t,i,r,a,d,y,m,_){this.x=t,this.ymin=i,this.ymax=r,this.invM=a,this.leftAdjust=d,this.rightAdjust=y,this.leftBound=m,this.rightBound=_}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Zr=[[0,0],[0,0],[0,0],[0,0]],Lee=1e-6;let Dee=class{constructor(t,i=null,r=t.lods[0].level,a=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const d=t.lods.filter(m=>m.level>=r&&m.level<=a);this.minScale=d[0].scale,this.maxScale=d[d.length-1].scale;const y=this._lodInfos=d.map(m=>jee.create(t,m,i));d.forEach((m,_)=>{this._infoByLevel[m.level]=y[_],this._infoByScale[m.scale]=y[_],this.scales[_]=m.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){Qt.set(i);const a=this._infoByLevel[Qt.level];return a?a.getTileBounds(t,Qt,r):t}getTileCoords(t,i,r=!1){Qt.set(i);const a=this._infoByLevel[Qt.level];return a?a.getTileCoords(t,Qt,r):t}getTileCoverage(t,i=192,r=!0,a="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const d=a==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),y=Cf.pool.acquire(d),m=this._wrap;let _,$,M,A=1/0,P=-1/0;const j=y.spans;Zr[0][0]=Zr[0][1]=Zr[1][1]=Zr[3][0]=-i,Zr[1][0]=Zr[2][0]=t.size[0]+i,Zr[2][1]=Zr[3][1]=t.size[1]+i;for(const J of Zr)t.toMap(J,J),J[0]=d.getColumnForX(J[0]),J[1]=d.getRowForY(J[1]);const L=[];let F=3;for(let J=0;J<4;J++){if(Zr[J][1]===Zr[F][1]){F=J;continue}const Q=Ree.create(Zr[J],Zr[F]);A=Math.min(Q.ymin,A),P=Math.max(Q.ymax,P),L[Q.ymin]===void 0&&(L[Q.ymin]=[]),L[Q.ymin].push(Q),F=J}if(A==null||P==null||P-A>100)return null;let V=[];for(_=A;_<P;){L[_]!=null&&(V=V.concat(L[_])),$=1/0,M=-1/0;for(let J=V.length-1;J>=0;J--){const Q=V[J];$=Math.min($,Q.getLeftCol()),M=Math.max(M,Q.getRightCol())}if($=Math.floor($),M=Math.floor(M),_>=d.first[1]&&_<=d.last[1])if(m)if(d.size[0]<d.worldSize[0]){const J=Math.floor(M/d.worldSize[0]);for(let Q=Math.floor($/d.worldSize[0]);Q<=J;Q++)j.push(new Tb(_,Math.max(d.getFirstColumnForWorld(Q),$),Math.min(d.getLastColumnForWorld(Q),M)))}else j.push(new Tb(_,$,M));else $>d.last[0]||M<d.first[0]||($=Math.max($,d.first[0]),M=Math.min(M,d.last[0]),j.push(new Tb(_,$,M)));_+=1;for(let J=V.length-1;J>=0;J--){const Q=V[J];Q.ymax>=_?Q.incrRow():V.splice(J,1)}}return y}getTileParentId(t){Qt.set(t);const i=this._infoByLevel[Qt.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Qt,this._lodInfos[r],Qt),Qt.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Qt.set(i);const r=this._infoByLevel[Qt.level],a=t.lodInfo;if(a.resolution>r.resolution){this._getTileIdAtLOD(Qt,a,Qt);const y=a.denormalizeCol(Qt.col,Qt.world);for(const m of t.spans)if(m.row===Qt.row&&m.colFrom<=y&&m.colTo>=y)return!0}if(a.resolution<r.resolution){const[y,m,_,$]=t.spans.reduce((F,V)=>(F[0]=Math.min(F[0],V.row),F[1]=Math.max(F[1],V.row),F[2]=Math.min(F[2],V.colFrom),F[3]=Math.max(F[3],V.colTo),F),[1/0,-1/0,1/0,-1/0]),M=r.denormalizeCol(Qt.col,Qt.world),A=a.getColumnForX(r.getXForColumn(M)),P=a.getRowForY(r.getYForRow(Qt.row)),j=a.getColumnForX(r.getXForColumn(M+1))-1,L=a.getRowForY(r.getYForRow(Qt.row+1))-1;return!(A>$||j<_||P>m||L<y)}const d=a.denormalizeCol(Qt.col,Qt.world);return t.spans.some(y=>y.row===Qt.row&&y.colFrom<=d&&y.colTo>=d)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const a=On(this.tileInfo.spatialReference),d=-r*(a.valid[1]-a.valid[0]);t[0]+=d,t[2]+=d}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+Lee)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,a)=>Math.abs(a-t)<Math.abs(r-t)?a:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const a=this._infoByLevel[r.level];return t.set(r),i.resolution<a.resolution?null:(i.resolution===a.resolution||(t.level=i.level,t.col=Math.floor(r.col*a.resolution/i.resolution+.01),t.row=Math.floor(r.row*a.resolution/i.resolution+.01)),t)}};function Fee(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const Ib=new Set,ny=[],cc=new Map,E8=[0,0];let Jo=class extends De{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:i,strategy:r}=this;this._queue=new rC({concurrency:t,process:(a,d)=>{const y=this._keyToItem.get(a);return i(y,{signal:d})},peeker:r==="scale-first"?a=>this._peekByScaleFirst(a):a=>this._peekByCenterFirst(a)})}destroy(){this.clear(),this._queue=Wt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const i=typeof t=="string"?t:t.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),a=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,t),r.then(a,a),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;t.forEach(M=>{const A=this._keyToItem.get(M),P=this.tileInfoView.getTileScale(A.key);cc.has(P)||(cc.set(P,[]),r=Math.max(P,r),a=Math.min(P,a)),cc.get(P).push(A.key),Ib.add(P)});let d=this.state.scale;cc.has(d)||(Fee(ny,Ib),ny.sort((M,A)=>M-A),d=ny.reduce((M,A)=>Math.abs(A-d)<Math.abs(M-d)?A:M,ny[0])),d=Math.min(d,r),d=Math.max(d,a);const y=cc.get(d),m=i.getClosestInfoForScale(d),_=m.getColumnForX(this.state.center[0]),$=m.getRowForY(this.state.center[1]);return y.sort((M,A)=>{const P=m.denormalizeCol(M.col,M.world),j=m.denormalizeCol(A.col,A.world);return Math.sqrt((_-P)*(_-P)+($-M.row)*($-M.row))-Math.sqrt((_-j)*(_-j)+($-A.row)*($-A.row))}),Ib.clear(),cc.clear(),y[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView,r=this.state.center;let a,d=Number.POSITIVE_INFINITY;return t.forEach(y=>{const m=this._keyToItem.get(y);i.getTileCoords(E8,m.key);const _=o1(E8,r);_<d&&(d=_,a=m.key)}),a.id}};b([S({constructOnly:!0})],Jo.prototype,"concurrency",void 0),b([S({constructOnly:!0})],Jo.prototype,"process",void 0),b([S()],Jo.prototype,"state",void 0),b([S({constructOnly:!0})],Jo.prototype,"strategy",void 0),b([S({constructOnly:!0})],Jo.prototype,"tileInfoView",void 0),b([S({readOnly:!0})],Jo.prototype,"updating",null),Jo=b([B("esri.views.2d.tiling.TileQueue")],Jo);const Jye=Jo;let zee=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,a=this._tileKeysPerLevel[r];M8(this._tilePerId,t);for(let d=0;d<a.length;d++)if(a[d].id===t){a.splice(d,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const a=i.level;this._tileKeysPerLevel[a]||(this._tileKeysPerLevel[a]=[]),this._tileKeysPerLevel[a].push(i)}prune(t,i,r){let a=this._tilePerId.size;if(a<=this.maxSize)return;let d=this._tileKeysPerLevel.length-1;for(;a>this.maxSize&&d>=0;)d!==t&&(a=this._pruneAroundCenterTile(a,i,r,d)),d--;a>this.maxSize&&(a=this._pruneAroundCenterTile(a,i,r,t))}_pruneAroundCenterTile(t,i,r,a){const d=this._tileKeysPerLevel[a];if(!d||d.length===0)return t;const{size:y,origin:m}=this._tileInfoView.tileInfo,_=r*y[0],$=r*y[1],M=[0,0],A=[0,0];for(d.sort((P,j)=>(M[0]=m.x+_*(P.col+.5),M[1]=m.y-$*(P.row+.5),A[0]=m.x+_*(j.col+.5),A[1]=m.y-$*(j.row+.5),Jg(M,i)-Jg(A,i)));d.length>0;){const P=d.pop();if(this._removeTile(P.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),M8(this._tilePerId,t)}};function M8(e,t){e.delete(t)}const vu=new Bh(0,0,0,0),Po=new Map,bu=[],Eb=[];let Yye=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new zee(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var J,Q;const{resampling:i,tileIndex:r}=this,{scale:a,center:d,resolution:y}=t.state,{minScale:m,maxScale:_}=this.tileInfoView,$=!t.stationary&&a>this._previousScale;if(this._previousScale=a,!i&&(a>m||a<_))return this.tiles.length=0,void this.clear();const M=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!M)return this.tiles.length=0,void this.clear();const{spans:A,lodInfo:P}=M,{level:j}=P;this.tiles.length=0,r.forEach(Y=>Y.visible=!0);let L=0,F=0;if(A.length>0)for(const{row:Y,colFrom:te,colTo:oe}of A)for(let ae=te;ae<=oe;ae++){L++;const de=vu.set(j,Y,P.normalizeCol(ae),P.getWorldForColumn(ae)).id;let ve=r.get(de);if(ve)ve.isReady?(Po.set(de,ve),F++):$||this._addParentTile(de,Po);else{if((J=this._tileCache)!=null&&J.has(de)){if(ve=this._tileCache.pop(de),this.tileIndex.set(de,ve),ve.isReady){Po.set(de,ve),F++;continue}}else ve=this.acquireTile(vu),this.tileIndex.set(de,ve);$||this._addParentTile(de,Po)}}const V=F===L;for(const[Y,te]of r){if(Po.has(Y))continue;vu.set(Y);const oe=this.tileInfoView.intersects(M,vu),ae=this.cachePolicy==="purge"?vu.level!==j:vu.level>j;!oe||!$&&V?!ae&&oe||bu.push(te):te.isReady?ae&&this.cachePolicy==="purge"&&this._hasReadyAncestor(vu,j)?bu.push(te):Eb.push(te):ae&&bu.push(te)}for(const Y of Eb)Y.isReady&&Po.set(Y.key.id,Y);for(const Y of bu)this._tileCache?this._tileCache.add(Y):this.releaseTile(Y),r.delete(Y.key.id);for(const Y of Po.values())this.tiles.push(Y);for(const Y of r.values())Po.has(Y.key.id)||(Y.visible=!1);(Q=this._tileCache)==null||Q.prune(j,d,y),Cf.pool.release(M),Eb.length=0,bu.length=0,Po.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const r of this.tileIndex.values())this.tiles.includes(r)?t(r):bu.push(r);for(const r of bu)this.releaseTile(r),this.tileIndex.delete(r.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var d;let r=t,a=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(a=this.tileIndex.get(r),a==null?void 0:a.isReady){i.has(a.key.id)||i.set(a.key.id,a);break}}else if((d=this._tileCache)!=null&&d.has(r)&&(a=this._tileCache.pop(r),this.tileIndex.set(r,a),a==null?void 0:a.isReady)){i.has(a.key.id)||i.set(a.key.id,a);break}}_hasReadyAncestor(t,i){const r=xo();this.tileInfoView.getTileBounds(r,t,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=i&&a.key.level<t.level){const d=xo();if(this.tileInfoView.getTileBounds(d,a.key,!0),gU(d,r))return!0}return!1}};function oC(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Vee(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Gee(e,t,i,r,a,d){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=a,y[5]=d,y}function qee(e,t){return new Float32Array(e,t,6)}function aC(e,t,i,r){const a=t[r],d=t[r+1];e[r]=i[0]*a+i[2]*d+i[4],e[r+1]=i[1]*a+i[3]*d+i[5]}function Uee(e,t,i,r=0,a=0,d=2){const y=a||t.length/d;for(let m=r;m<y;m++)aC(e,t,i,m*d)}Object.freeze(Object.defineProperty({__proto__:null,clone:Vee,create:oC,createView:qee,fromValues:Gee,transform:aC,transformMany:Uee},Symbol.toStringTag,{value:"Module"}));function Bee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Hee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function lC(e,t,i,r,a,d,y,m,_,$){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=d,e[5]=y,e[6]=m,e[7]=_,e[8]=$,e}function uC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Wee(e,t){if(e===t){const i=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Jee(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],$=t[7],M=t[8],A=M*y-m*$,P=-M*d+m*_,j=$*d-y*_;let L=i*A+r*P+a*j;return L?(L=1/L,e[0]=A*L,e[1]=(-M*r+a*$)*L,e[2]=(m*r-a*y)*L,e[3]=P*L,e[4]=(M*i-a*_)*L,e[5]=(-m*i+a*d)*L,e[6]=j*L,e[7]=(-$*i+r*_)*L,e[8]=(y*i-r*d)*L,e):null}function Kee(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],$=t[7],M=t[8];return e[0]=y*M-m*$,e[1]=a*$-r*M,e[2]=r*m-a*y,e[3]=m*_-d*M,e[4]=i*M-a*_,e[5]=a*d-i*m,e[6]=d*$-y*_,e[7]=r*_-i*$,e[8]=i*y-r*d,e}function Yee(e){const t=e[0],i=e[1],r=e[2],a=e[3],d=e[4],y=e[5],m=e[6],_=e[7],$=e[8];return t*($*d-y*_)+i*(-$*a+y*m)+r*(_*a-d*m)}function H6(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=t[6],M=t[7],A=t[8],P=i[0],j=i[1],L=i[2],F=i[3],V=i[4],J=i[5],Q=i[6],Y=i[7],te=i[8];return e[0]=P*r+j*y+L*$,e[1]=P*a+j*m+L*M,e[2]=P*d+j*_+L*A,e[3]=F*r+V*y+J*$,e[4]=F*a+V*m+J*M,e[5]=F*d+V*_+J*A,e[6]=Q*r+Y*y+te*$,e[7]=Q*a+Y*m+te*M,e[8]=Q*d+Y*_+te*A,e}function n5(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=t[6],M=t[7],A=t[8],P=i[0],j=i[1];return e[0]=r,e[1]=a,e[2]=d,e[3]=y,e[4]=m,e[5]=_,e[6]=P*r+j*y+$,e[7]=P*a+j*m+M,e[8]=P*d+j*_+A,e}function hC(e,t,i){const r=t[0],a=t[1],d=t[2],y=t[3],m=t[4],_=t[5],$=t[6],M=t[7],A=t[8],P=Math.sin(i),j=Math.cos(i);return e[0]=j*r+P*y,e[1]=j*a+P*m,e[2]=j*d+P*_,e[3]=j*y-P*r,e[4]=j*m-P*a,e[5]=j*_-P*d,e[6]=$,e[7]=M,e[8]=A,e}function Zee(e,t,i){const r=i[0],a=i[1],d=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=d*t[6],e[7]=d*t[7],e[8]=d*t[8],e}function Xee(e,t,i){const r=i[0],a=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e}function Qee(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ete(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function tte(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ite(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function rte(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=i+i,m=r+r,_=a+a,$=i*y,M=r*y,A=r*m,P=a*y,j=a*m,L=a*_,F=d*y,V=d*m,J=d*_;return e[0]=1-A-L,e[3]=M-J,e[6]=P+V,e[1]=M+J,e[4]=1-$-L,e[7]=j-F,e[2]=P-V,e[5]=j+F,e[8]=1-$-A,e}function ste(e,t){const i=t[0],r=t[1],a=t[2],d=t[4],y=t[5],m=t[6],_=t[8],$=t[9],M=t[10],A=M*y-m*$,P=-M*d+m*_,j=$*d-y*_,L=i*A+r*P+a*j;if(!L)return null;const F=1/L;return e[0]=A*F,e[1]=(-M*r+a*$)*F,e[2]=(m*r-a*y)*F,e[3]=P*F,e[4]=(M*i-a*_)*F,e[5]=(-m*i+a*d)*F,e[6]=j*F,e[7]=(-$*i+r*_)*F,e[8]=(y*i-r*d)*F,e}function nte(e,t){const i=t[0],r=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],$=t[7],M=t[8],A=t[9],P=t[10],j=t[11],L=t[12],F=t[13],V=t[14],J=t[15],Q=i*m-r*y,Y=i*_-a*y,te=i*$-d*y,oe=r*_-a*m,ae=r*$-d*m,de=a*$-d*_,ve=M*F-A*L,Ie=M*V-P*L,Oe=M*J-j*L,Ne=A*V-P*F,Re=A*J-j*F,We=P*J-j*V;let Pe=Q*We-Y*Re+te*Ne+oe*Oe-ae*Ie+de*ve;return Pe?(Pe=1/Pe,e[0]=(m*We-_*Re+$*Ne)*Pe,e[1]=(_*Oe-y*We-$*Ie)*Pe,e[2]=(y*Re-m*Oe+$*ve)*Pe,e[3]=(a*Re-r*We-d*Ne)*Pe,e[4]=(i*We-a*Oe+d*Ie)*Pe,e[5]=(r*Oe-i*Re-d*ve)*Pe,e[6]=(F*de-V*ae+J*oe)*Pe,e[7]=(V*te-L*de-J*Y)*Pe,e[8]=(L*ae-F*te+J*Q)*Pe,e):null}function ote(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function ate(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function lte(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function ute(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function cC(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function hte(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function cte(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function pte(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function dte(e,t){const i=e[0],r=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],$=e[7],M=e[8],A=t[0],P=t[1],j=t[2],L=t[3],F=t[4],V=t[5],J=t[6],Q=t[7],Y=t[8],te=Bs();return Math.abs(i-A)<=te*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-P)<=te*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(a-j)<=te*Math.max(1,Math.abs(a),Math.abs(j))&&Math.abs(d-L)<=te*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(y-F)<=te*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(m-V)<=te*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(_-J)<=te*Math.max(1,Math.abs(_),Math.abs(J))&&Math.abs($-Q)<=te*Math.max(1,Math.abs($),Math.abs(Q))&&Math.abs(M-Y)<=te*Math.max(1,Math.abs(M),Math.abs(Y))}function fte(e){const t=Bs(),i=e[0],r=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],$=e[7],M=e[8];return Math.abs(1-(i*i+d*d+_*_))<=t&&Math.abs(1-(r*r+y*y+$*$))<=t&&Math.abs(1-(a*a+m*m+M*M))<=t}const yte=H6,mte=cC;Object.freeze(Object.defineProperty({__proto__:null,add:ute,adjoint:Kee,copy:Hee,determinant:Yee,equals:dte,exactEquals:pte,frob:lte,fromMat2d:ite,fromMat4:Bee,fromQuat:rte,fromRotation:ete,fromScaling:tte,fromTranslation:Qee,identity:uC,invert:Jee,isOrthoNormal:fte,mul:yte,multiply:H6,multiplyScalar:hte,multiplyScalarAndAdd:cte,normalFromMat4:nte,normalFromMat4Legacy:ste,projection:ote,rotate:hC,scale:Zee,scaleByVec2:Xee,set:lC,str:ate,sub:mte,subtract:cC,translate:n5,transpose:Wee},Symbol.toStringTag,{value:"Module"}));function gm(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function gte(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function vte(e,t,i,r,a,d,y,m,_){const $=new Float32Array(9);return $[0]=e,$[1]=t,$[2]=i,$[3]=r,$[4]=a,$[5]=d,$[6]=y,$[7]=m,$[8]=_,$}function bte(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:gte,create:gm,createView:bte,fromValues:vte},Symbol.toStringTag,{value:"Module"}));function pC(){return new Float32Array(2)}function wte(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function jp(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function _te(e,t){return new Float32Array(e,t,2)}function dC(){return pC()}function fC(){return jp(1,1)}function yC(){return jp(1,0)}function mC(){return jp(0,1)}const Ste=dC(),xte=fC(),$te=yC(),Tte=mC();Object.freeze(Object.defineProperty({__proto__:null,ONES:xte,UNIT_X:$te,UNIT_Y:Tte,ZEROS:Ste,clone:wte,create:pC,createView:_te,fromValues:jp,ones:fC,unitX:yC,unitY:mC,zeros:dC},Symbol.toStringTag,{value:"Module"}));function Ite(e){return e instanceof Float32Array&&e.length>=2}function Ete(e){return Array.isArray(e)&&e.length>=2}function Mb(e){return Ite(e)||Ete(e)}var o5;const Co=[0,0];let pl=o5=class extends pe{constructor(e){super(e),this._viewpoint2D={center:$i(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new gt,this.id=0,this.inverseTransform=Hl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Hl(),this.transformNoRotation=Hl(),this.displayMat3=gm(),this.displayViewMat3=gm(),this.viewMat3=gm(),this.viewMat2d=oC(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Gn(i,e.viewpoint),this._set("size",Of(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new o5({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return Mb(t)?yo(e,t,this.inverseTransform):(Co[0]=t,Co[1]=i,yo(e,Co,this.inverseTransform))}toScreen(e,t,i){return Mb(t)?yo(e,t,this.transform):(Co[0]=t,Co[1]=i,yo(e,Co,this.transform))}toScreenNoRotation(e,t,i){return Mb(t)?yo(e,t,this.transformNoRotation):(Co[0]=t,Co[1]=i,yo(e,Co,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,a=this._get("size");return U6(e,i,a,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,a=this._get("pixelRatio")||1,d=this._get("size"),y=new bo({targetGeometry:new Ze(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",y),!d||!t||!i)return;this.resolution=r0(y),this.rotation=r,this.scale=i,this.spatialReference=t,Of(this.center,e);const m=d[0]!==0?2/d[0]:0,_=d[1]!==0?-2/d[1]:0;lC(this.displayMat3,m,0,0,0,_,0,-1,1,1);const $=uC(this.viewMat3),M=jp(d[0]/2,d[1]/2),A=jp(-d[0]/2,-d[1]/2),P=L4(r);n5($,$,M),hC($,$,P),n5($,$,A),H6(this.displayViewMat3,this.displayMat3,$);const j=z6(this.viewMat2d,M);return l2(j,j,P),kf(j,j,A),cee(this.extent,y,d),B6(this.transform,y,d,a),D6(this.inverseTransform,this.transform),vee(this.transformNoRotation,y,d,a),this.worldScreenWidth=wee(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};b([S({readOnly:!0})],pl.prototype,"id",void 0),b([S({value:1,json:{write:!0}})],pl.prototype,"pixelRatio",null),b([S({json:{write:!0}})],pl.prototype,"size",null),b([S()],pl.prototype,"spatialReference",void 0),b([S({type:bo,json:{write:!0}})],pl.prototype,"viewpoint",null),pl=o5=b([B("esri.views.2d.ViewState")],pl);const A8=pl;var a5,l5;let la=a5=class extends De{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new a5({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b([S()],la.prototype,"left",void 0),b([S()],la.prototype,"top",void 0),b([S()],la.prototype,"right",void 0),b([S()],la.prototype,"bottom",void 0),la=a5=b([B("esri.views.2d.PaddedViewState.Padding")],la);let Oc=l5=class extends A8{constructor(...e){super(...e),this.paddedViewState=new A8,this._updateContent=(()=>{const t=$i();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const a=this.paddedViewState;Ki(t,r.left+r.right,r.top+r.bottom),Pf(t,i,t),Of(a.size,t);const d=a.viewpoint;d&&(this.viewpoint=d)}})(),this.addHandles(ke(()=>[this.size,this.padding],()=>this._updateContent(),t0)),this.padding=new la,this.size=[0,0]}set padding(e){this._set("padding",e||new la)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,See(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new l5({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b([S()],Oc.prototype,"paddedViewState",void 0),b([S({type:la})],Oc.prototype,"padding",null),b([S()],Oc.prototype,"viewpoint",null),Oc=l5=b([B("esri.views.2d.PaddedViewState")],Oc);const Mte=Oc;let Mr=class extends De{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ke(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},t0)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ze({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(a){return void fe.getLogger(this).error(new se("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:a}))}const r=this.viewpoint;t5(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void fe.getLogger(this).error(new se("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(a){return void fe.getLogger(this).error(new se("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:a}))}const r=this.viewpoint;pee(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;$ee(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;x8(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var d;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new se("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new se("mapview:invalid-viewpoint","geometry not defined"))}catch(y){r=new se("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:y})}if(r)return void fe.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const a=new bo({targetGeometry:new Ze,scale:0,rotation:0});Gn(a,i),(d=this.constraints)==null||d.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this._set("viewpoint",a)}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var a,d;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const y=this._get("extent");return void(y&&(this._set("extent",void 0),this._set("center",y.center)))}const i=((a=this.constraints)==null?void 0:a.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;x8(r,r,i),this.viewpoint=r,this._set("zoom",((d=this.constraints)==null?void 0:d.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,a=this._get("center"),d=this._get("extent"),y=this._get("scale"),m=this._get("rotation"),_=this._get("viewpoint"),$=this._get("zoom"),M=$!=null&&r!=null&&r.zoomToScale($)||void 0;let A,P,j;const L=_==null?void 0:_.rotation,F=_==null?void 0:_.targetGeometry;(F==null?void 0:F.type)==="extent"?A=F:(F==null?void 0:F.type)==="point"&&(P=F,j=_==null?void 0:_.scale);const V=d??A;return{center:a??P??(V==null?void 0:V.center),rotation:m??L,scale:(y??M??j??(V&&fp(V,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,a){var y;const d=t.targetGeometry;try{this._project(t,r)}catch(m){fe.getLogger(this).warn(new Gs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:d.toJSON(),spatialReference:r,error:m})),t.targetGeometry=a||new Ze({x:0,y:0,spatialReference:r})}(y=this.constraints)==null||y.fit(t),this._set("state",new Mte({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:a,scale:d}=this.state.paddedViewState,y=new Ze({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",a),this._set("scale",d),this._set("state",null)}changeSpatialReference(t){var _;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const $=i.viewpoint.clone();$.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=$}const r=i.clone(),[a,d]=i.center;let y=null;try{y=this._project(new Ze({x:a,y:d,spatialReference:i.spatialReference}),t)}catch($){T6()||fe.getLogger(this).warn(new Gs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y==null?void 0:y.toJSON(),spatialReference:t,error:$}))}y||(y=new Ze({x:0,y:0,spatialReference:t}));const m=t5(new bo({targetGeometry:new Ze,scale:0,rotation:0}),i.viewpoint,y);r.viewpoint=m;try{const M=[i.size[0]/2,i.size[1]/2],A=[M[0]+20,M[1]],P=i.toMap([0,0],A),{x:j,y:L}=this._project(new Ze({x:P[0],y:P[1],spatialReference:i.spatialReference}),t);P[0]=j,P[1]=L,r.toScreen(P,P);const F=_ee(M,P,A),V=Math.hypot(P[0]-M[0],P[1]-M[1])/20;!Number.isFinite(V)||Math.abs(V)>4?(m.rotation=0,m.targetGeometry=new Ze({x:0,y:0,spatialReference:t})):(m.scale*=V,m.scale>le("mapview-srswitch-adjust-rotation-scale-threshold")?m.rotation=0:m.rotation+=Number.isFinite(F)?F:0)}catch{}(_=this._get("constraints"))==null||_.constrain(m,void 0),this._get("state").viewpoint=m}resize(t,i){var y;if(!this.ready)return;const r=this.state;let a=this.state.paddedViewState.viewpoint;const d=this.state.paddedViewState.size.concat();r.size=[t,i],xee(a,a,d,this.state.paddedViewState.size,this.resizeAlign),a=((y=this.constraints)==null?void 0:y.constrain(a,void 0))??a,this.state.viewpoint=a}toMap(t){if(!this.ready)return null;const i=[0,0],[r,a]=this.state.toMap(i,[t.x,t.y]),d=this.state.spatialReference;return new Ze({x:r,y:a,spatialReference:d})}toScreen(t){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),r=[i.x,i.y];return this.state.toScreen(r,r),jr(r[0],r[1])}_project(t,i){var d;const r=t&&t.targetGeometry||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||(d=r.spatialReference)!=null&&d.imageCoordinateSystem||Ti(i,r.spatialReference))return t;const a=hu(r,i);if(!a)throw new se("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return Ate(t)?(t.targetGeometry=a,t):a}};function Ate(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}b([S({type:Ze})],Mr.prototype,"center",null),b([S()],Mr.prototype,"constraints",void 0),b([S({type:gt})],Mr.prototype,"extent",null),b([S({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Mr.prototype,"padding",null),b([S()],Mr.prototype,"ready",void 0),b([S()],Mr.prototype,"resizeAlign",void 0),b([S({readOnly:!0})],Mr.prototype,"resolution",null),b([S({type:Number})],Mr.prototype,"rotation",null),b([S({type:Number})],Mr.prototype,"scale",null),b([S({readOnly:!0})],Mr.prototype,"state",void 0),b([S({type:bo})],Mr.prototype,"viewpoint",null),b([S()],Mr.prototype,"zoom",null),Mr=b([B("esri.views.2d.ViewStateManager")],Mr);function W6(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let k8=class extends Ui{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){W6(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},kte=class extends Ui{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:a,delta:d}=i,{view:y}=this,{mapViewNavigation:m}=y;switch(a){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=d,m.begin();break}case"update":{if(this._previousDelta.y===d.y)return;this._previousDelta=d;const _=1.015**d.y,$=this._startScale*_,M=$/this._currentScale;m.setViewpointImmediate(M),this._currentScale=$;break}case"end":{const{constraints:_}=y,{effectiveLODs:$,snapToZoom:M}=_;if(!M||!$)return void m.end();const A=_.snapScale(this._currentScale),P=(d.y>0?Math.max(A,_.snapToPreviousScale(this._startScale)):Math.min(A,_.snapToNextScale(this._startScale)))/this._currentScale;m.zoom(P);break}}}},h2=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},Ote=class extends Ui{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new h2({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&W6(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Pte=class extends Ui{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new h2({start:(d,y)=>{a.rotate.begin(this._view,y.data),y.stopPropagation()},update:(d,y)=>{a.rotate.update(this._view,y.data),y.stopPropagation()},end:(d,y)=>{a.rotate.end(),y.stopPropagation()},condition:(d,y)=>d===1&&W6(y.data,this.pointerAction)}),this.registerIncoming("drag",r,d=>this._dragEventSeparator.handle(d))}};function sn(e){let t=e*e;return e<0&&(t*=-1),t}function Cte(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Nte(e,t,i){const r=i,a=e.state,d=e.device,y=t.tiltDirection==="forward-down"?1:-1,m=1;return d.deviceType==="standard"?(r.translation[0]=sn(a.axes[0]),r.translation[1]=sn(a.axes[1]),r.translation[2]=sn(a.buttons[7])-sn(a.buttons[6]),r.heading=sn(a.axes[2]),r.tilt=sn(a.axes[3])):d.deviceType==="spacemouse"&&(r.translation[0]=1.2*sn(a.axes[0]),r.translation[1]=1.2*sn(a.axes[1]),r.translation[2]=2*-sn(a.axes[2]),r.heading=1.2*sn(a.axes[5]),r.tilt=1.2*sn(a.axes[3])),r.tilt*=y,vM(r.translation,r.translation,m),r}function jte(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let Rte=class extends Ui{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Mo,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ke(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Sp({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},kt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Cte(this._transformation)):(this._currentDevice=t.data.device,Nte(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(jte(i))return;const r=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,d=Dte*a*t;u2(r,r,[i.translation[0]*d,-i.translation[1]*d]);const y=1+i.translation[2]*Fte*t,m=this._view.constraints.rotationEnabled?-i.heading*Lte*t:0,_=this._view.size,$=[_[0]/2,_[1]];ZP(r,r,y,m,$,_);const M=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=M}};const Lte=.06,Dte=.7,Fte=6e-4;let zte=class extends Ui{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",r,a=>this._handleKeyUp(a)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}},Vte=class extends Ui{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",r,a=>this._handleKeyUp(a)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection[t.data.key];if(this._pressed=a!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var op;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(op||(op={}));let Gte=class extends Ui{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=op.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=op.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const a=this._keysToZoomAction[r],{mapViewNavigation:d}=this.view;let y=null;switch(a){case op.IN:y=d.zoomIn();break;case op.OUT:y=d.zoomOut();break;default:return}d.begin(),y.then(()=>d.end()),t.stopPropagation()}};const qte=.6;let Ute=class extends Ui{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:a,deltaY:d}=t.data,y=1/qte**(1/60*d),m=i.zoom(y,[r,a]);m&&(this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Bte=class extends Ui{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new h2({start:(r,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(r,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(r,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function O8(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>Jte(i,e.axisThreshold))}:{buttons:[],axes:[]}}function Hte(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Wte(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Jte(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let Kte=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=d=>{this._connectGamepad(d.gamepad)},this._onDisconnectGamepad=d=>{const y=d.gamepad,m=y.index,_=this._inputDevices[m];_&&(this._emitGamepadEvent(y,O8(_),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(_),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=r&&a,this.supported&&(this._forEachGamepad(d=>this._connectGamepad(d)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new R6(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Sp({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(a=>{const d=this._inputDevices[a.index];if(!d)return;const y=this._latestUpdate[a.index],m=O8(d),_=r||Wte(m);y&&(y.timestamp===a.timestamp||!y.active&&_||Hte(y.state,m))||this._emitGamepadEvent(a,m,!_)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const a=i[r];this._validate(a)&&t(a)}}_emitGamepadEvent(t,i,r){const a=this._latestUpdate[t.index],d=a&&a.active;if(!d&&!r)return;const y=!d&&r?"start":d&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:y})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}};const P8=le("edge"),Yte=le("chrome"),Zte=le("ff"),Xte=le("safari"),C8="esri-view-surface",pc={touchNone:`${C8}--touch-none`,touchPan:`${C8}--touch-pan`};let gC=class vC{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Kte(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Wt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(Ab[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&Ab[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(Ab[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,i){i?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?pc.touchNone:pc.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?pc.touchPan:pc.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(pc.touchNone),this._element.classList.remove(pc.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=wP(this._element,t);return vC.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=cX(i);r&&t==="key-up"&&this._keyDownState.delete(r);const a={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(a.key),this._callback(t,a)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:P8&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}P8?r*=.7:Yte||Xte?r*=.6:Zte&&(r*=1.375);const a=100,d=Math.abs(r);d>a&&(r=r/d*200/(1+Math.exp(-.02*(d-a))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};gC.test={disableSubpixelCoordinates:!1};const Ab={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Qte=class extends Ui{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};function J6(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function eie(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function tie(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:jr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[Y,te]=e,[oe,ae]=[te.x-Y.x,te.y-Y.y];return t.radius=Math.sqrt(oe*oe+ae*ae)/2,t.center.x=(Y.x+te.x)/2,t.center.y=(Y.y+te.y)/2,t}let i=0,r=0;for(let Y=0;Y<e.length;Y++)i+=e[Y].x,r+=e[Y].y;i/=e.length,r/=e.length;const a=e.map(Y=>Y.x-i),d=e.map(Y=>Y.y-r);let y=0,m=0,_=0,$=0,M=0,A=0,P=0;for(let Y=0;Y<a.length;Y++){const te=a[Y],oe=d[Y],ae=te*te,de=oe*oe;y+=ae,m+=de,_+=te*oe,$+=ae*te,M+=de*oe,A+=te*de,P+=oe*ae}const j=.5*($+A),L=.5*(M+P),F=y*m-_*_,V=(j*m-L*_)/F,J=(y*L-_*j)/F,Q=jr(V+i,J+r);return{radius:Math.sqrt(V*V+J*J+(y+m)/e.length),center:Q}}function kh(e){const{native:t}=e,{pointerId:i,button:r,pointerType:a}=t;return a==="mouse"?`${i}:${r}`:`${a}`}const Ds={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let iie=class extends Ui{constructor(t=Ds.maximumDoubleClickDelay,i=Ds.maximumDoubleClickDistance,r=Ds.maximumDoubleTouchDelay,a=Ds.maximumDoubleTouchDistance,d=zp){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=d,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=ai(t.doubleClickTimer))}get hasPendingInputs(){return Av(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=ai(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:i,pointerType:r,button:a}=t.native;return r==="mouse"?`${i}:${a}`:`${r}`}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,a=this._getPointerId(i);if(!this._pointerState.has(a))return void this._startClick(t);const d=this._pointerState.get(a),{data:y,modifiers:m}=d.event,_=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;J6(y,i)>_?(this._clearDoubleClickTimer(a,!0),this._startClick(t)):(this._clearDoubleClickTimer(a,!1),d.pointerDownCount===2&&this._doubleClick.emit(y,void 0,m))}_handlePointerDown(t){const i=kh(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,a=kh(i),d=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),d),m=1;this._pointerState.set(a,{event:t,doubleClickTimer:y,pointerDownCount:m}),this.refreshHasPendingInputs()}},rie=class extends Ui{constructor(t=Ds.maximumDoubleClickDelay,i=Ds.maximumDoubleClickDistance,r=Ds.maximumDoubleTouchDelay,a=Ds.maximumDoubleTouchDistance,d=zp){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=d,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=jr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new h2({start:(y,m)=>this._dragStart(y,m),update:(y,m)=>this._dragUpdate(m),end:(y,m)=>this._dragEnd(m)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=ai(t.doubleTapTimeout)})}get hasPendingInputs(){return Av(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=ai(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:a,buttons:d,pointer:y,pointers:m,pointerType:_,timestamp:$}=r;return{action:t,delta:i,button:a,buttons:d,pointer:y,pointers:m,pointerType:_,timestamp:$}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:a}=i,{center:d}=r;this._dragStartCenter=d;const y=this._createDoubleTapDragData("begin",jr(0,0),r);this._doubleTapDrag.emit(y,void 0,a),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:a}=i,d=jr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",d,i);this._doubleTapDrag.emit(y,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:a}=i,d=jr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",d,i);this._doubleTapDrag.emit(y,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=kh(i),a=this._pointerState.get(r),{pointerType:d}=i.native;if(a){const y=d==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),J6(a.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,a=kh(i),d=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(a),d);this._pointerState.set(a,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}},sie=class extends Ui{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,a){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:a,pointers:nie(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=oy(this._activePointerMap).angle,a={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,a);const d=vm(a,bC(this._activePointerMap));a.initialAngle=d,a.lastAngle=d,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=oy(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=oy(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=vm(r,i)-t,r.lastAngle=vm(r,i)-t})}_emitEvent(t,i,r){const a=oy(this._activePointerMap);this._drag.emit(this._createPayload(t,i,a,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,a=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,a)):(this._addPointer(r),this._emitEvent("added",r,a),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,a))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function bC(e){const t=[];return e.forEach(i=>{t.push(jr(i.event.x,i.event.y))}),tie(t)}function oy(e){const t=bC(e);let i=0;return e.forEach(r=>{let a=vm(r,t),d=a-r.lastAngle;for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;a=r.lastAngle+d,r.lastAngle=a;const y=a-r.initialAngle;i+=y}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function nie(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function vm(e,t){const i=e.event,r=i.x-t.center.x,a=i.y-t.center.y;return Math.atan2(a,r)}var N8;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(N8||(N8={}));let oie=class extends Ui{constructor(t=Ds.maximumDoubleClickDelay,i=Ds.maximumDoubleClickDistance,r=Ds.maximumDoubleTouchDelay,a=Ds.maximumDoubleTouchDistance,d=zp){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=d,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=kh(i);if(!this._pointerState.has(r)){const a={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,a),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=kh(i),a=this._pointerState.get(r);if(a&&a.downButton===i.native.button){const d=a.immediateDoubleClick;if(d){d.timeoutHandle.remove();const y=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;J6(d,t.data)>y?this._startImmediateDoubleClick(t,a):(this._immediateDoubleClick.emit(t.data,void 0,d.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,a)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=kh(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};const E0={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let aie=class extends Ui{constructor(t=E0.maximumClickDelay,i=E0.movementUntilMouseDrag,r=E0.movementUntilPenDrag,a=E0.movementUntilTouchDrag,d=E0.holdDelay,y=zp){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=a,this._holdDelay=d,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",m=>{this._handlePointerLoss(m,"pointer-up")}),this.registerIncoming("pointer-capture-lost",m=>{this._handlePointerLoss(m,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",m=>{this._handlePointerLoss(m,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=ai(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let a=null;this._pointerState.size===0&&(a=this._clock.setTimeout(()=>{const y=this._pointerState.get(r);if(y){if(!y.isDragging){const m=y.previousEvent;this._pointerHold.emit(m,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const d={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(r,d),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,a=this._pointerState.get(r);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,i),void 0,a.modifiers):eie(i,a.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),a.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(a=>{a.holdTimeout!=null&&(a.holdTimeout.remove(),a.holdTimeout=null),a.isDragging||(a.modifiers=t.modifiers,a.isDragging=!0,r===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,i)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,a=r.native.pointerId,d=this._pointerState.get(a);d&&(d.holdTimeout!=null&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,i==="pointer-up"?r:d.previousEvent),void 0,d.modifiers):i==="pointer-up"&&d.downButton===r.native.button&&t.timestamp-d.startTimestamp<=this._maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(a),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const ay={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Uu=class extends De{constructor(){super(...arguments),this._handles=new Mo}initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Yl(()=>!t(),()=>this._disconnect()),Yl(t,()=>this._connect())])}destroy(){this._handles=Wt(this._handles),this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Wt(this._inputManager)}_connect(){const t=this.view.surface,i=new gC(t,this.view.input),r=[new oie,new aie,new iie,new sie(this.view.navigation),new rie],a=new $s({eventSource:i,recognizers:r});a.installHandlers("prevent-context-menu",[new Qte],Bl.INTERNAL),a.installHandlers("navigation",[new Bte(this.view),new Rte(this.view),new Ute(this.view),new k8(this.view),new k8(this.view,[ay.counter]),new Ote(this.view,"primary"),new zte(this.view,ay.pan),new Gte(this.view,ay.zoom),new Vte(this.view,ay.rotate),new Pte(this.view,"secondary"),new kte(this.view,"touch")],Bl.INTERNAL),this.view.viewEvents.connect(a),this._source=i,this._inputManager=a,ke(()=>{var d,y;return(y=(d=this.view)==null?void 0:d.navigation)==null?void 0:y.browserTouchPanEnabled},d=>{this._source&&(this._source.browserTouchPanningEnabled=!d)},kt)}get test(){return{inputManager:this._inputManager}}};b([S()],Uu.prototype,"view",void 0),b([S()],Uu.prototype,"latestPointerType",null),b([S()],Uu.prototype,"latestPointerLocation",null),b([S()],Uu.prototype,"multiTouchActive",null),Uu=b([B("esri.views.2d.input.MapViewInputManager")],Uu);const lie=Uu;var vme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j8,R8,L8,u5={exports:{}};u5.exports,j8=u5,R8=function(){function e(a,d,y,m,_){t(a,d,y||0,m||a.length-1,_||r)}function t(a,d,y,m,_){for(;m>y;){if(m-y>600){var $=m-y+1,M=d-y+1,A=Math.log($),P=.5*Math.exp(2*A/3),j=.5*Math.sqrt(A*P*($-P)/$)*(M-$/2<0?-1:1);t(a,d,Math.max(y,Math.floor(d-M*P/$+j)),Math.min(m,Math.floor(d+($-M)*P/$+j)),_)}var L=a[d],F=y,V=m;for(i(a,y,d),_(a[m],L)>0&&i(a,y,m);F<V;){for(i(a,F,V),F++,V--;_(a[F],L)<0;)F++;for(;_(a[V],L)>0;)V--}_(a[y],L)===0?i(a,y,V):i(a,++V,m),V<=d&&(y=V+1),d<=V&&(m=V-1)}}function i(a,d,y){var m=a[d];a[d]=a[y],a[y]=m}function r(a,d){return a<d?-1:a>d?1:0}return e},(L8=R8())!==void 0&&(j8.exports=L8);const uie=wC(u5.exports);function Yg(e,t){if(!(this instanceof Yg))return new Yg(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function hie(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function dc(e,t){fd(e,0,e.children.length,t,e)}function fd(e,t,i,r,a){a||(a=Pc(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var d,y=t;y<i;y++)d=e.children[y],yd(a,e.leaf?r(d):d);return a}function yd(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function D8(e,t){return e.minX-t.minX}function F8(e,t){return e.minY-t.minY}function kb(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ly(e){return e.maxX-e.minX+(e.maxY-e.minY)}function cie(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function pie(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),a=Math.min(e.maxX,t.maxX),d=Math.min(e.maxY,t.maxY);return Math.max(0,a-i)*Math.max(0,d-r)}function Ob(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function uy(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Pc(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z8(e,t,i,r,a){for(var d,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=r||(d=t+Math.ceil((i-t)/r/2)*r,uie(e,d,t,i,a),y.push(t,d,d,i))}Yg.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!uy(e,t))return i;for(var a,d,y,m,_=[];t;){for(a=0,d=t.children.length;a<d;a++)y=t.children[a],uy(e,m=t.leaf?r(y):y)&&(t.leaf?i.push(y):Ob(e,m)?this._all(y,i):_.push(y));t=_.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!uy(e,t))return!1;for(var r,a,d,y,m=[];t;){for(r=0,a=t.children.length;r<a;r++)if(d=t.children[r],uy(e,y=t.leaf?i(d):d)){if(t.leaf||Ob(e,y))return!0;m.push(d)}t=m.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Pc([]),this},remove:function(e,t){if(!e)return this;for(var i,r,a,d,y=this.data,m=this.toBBox(e),_=[],$=[];y||_.length;){if(y||(y=_.pop(),r=_[_.length-1],i=$.pop(),d=!0),y.leaf&&(a=hie(e,y.children,t))!==-1)return y.children.splice(a,1),_.push(y),this._condense(_),this;d||y.leaf||!Ob(y,m)?r?(i++,y=r.children[i],d=!1):y=null:(_.push(y),$.push(i),i=0,r=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:D8,compareMinY:F8,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var a,d=i-t+1,y=this._maxEntries;if(d<=y)return dc(a=Pc(e.slice(t,i+1)),this.toBBox),a;r||(r=Math.ceil(Math.log(d)/Math.log(y)),y=Math.ceil(d/Math.pow(y,r-1))),(a=Pc([])).leaf=!1,a.height=r;var m,_,$,M,A=Math.ceil(d/y),P=A*Math.ceil(Math.sqrt(y));for(z8(e,t,i,P,this.compareMinX),m=t;m<=i;m+=P)for(z8(e,m,$=Math.min(m+P-1,i),A,this.compareMinY),_=m;_<=$;_+=A)M=Math.min(_+A-1,$),a.children.push(this._build(e,_,M,r-1));return dc(a,this.toBBox),a},_chooseSubtree:function(e,t,i,r){for(var a,d,y,m,_,$,M,A;r.push(t),!t.leaf&&r.length-1!==i;){for(M=A=1/0,a=0,d=t.children.length;a<d;a++)_=kb(y=t.children[a]),($=cie(e,y)-_)<A?(A=$,M=_<M?_:M,m=y):$===A&&_<M&&(M=_,m=y);t=m||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,a=i?e:r(e),d=[],y=this._chooseSubtree(a,this.data,t,d);for(y.children.push(e),yd(y,a);t>=0&&d[t].children.length>this._maxEntries;)this._split(d,t),t--;this._adjustParentBBoxes(a,d,t)},_split:function(e,t){var i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);var d=this._chooseSplitIndex(i,a,r),y=Pc(i.children.splice(d,i.children.length-d));y.height=i.height,y.leaf=i.leaf,dc(i,this.toBBox),dc(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=Pc([e,t]),this.data.height=e.height+1,this.data.leaf=!1,dc(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,a,d,y,m,_,$,M;for(_=$=1/0,r=t;r<=i-t;r++)y=pie(a=fd(e,0,r,this.toBBox),d=fd(e,r,i,this.toBBox)),m=kb(a)+kb(d),y<_?(_=y,M=r,$=m<$?m:$):y===_&&m<$&&($=m,M=r);return M},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:D8,a=e.leaf?this.compareMinY:F8;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,a)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var a,d,y=this.toBBox,m=fd(e,0,t,y),_=fd(e,i-t,i,y),$=ly(m)+ly(_);for(a=t;a<i-t;a++)d=e.children[a],yd(m,e.leaf?y(d):d),$+=ly(m);for(a=i-t-1;a>=t;a--)d=e.children[a],yd(_,e.leaf?y(d):d),$+=ly(_);return $},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)yd(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():dc(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var h5;const V8=new ut({upperLeft:"upper-left",lowerLeft:"lower-left"});let Bu=h5=class extends pe{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new h5(re({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};b([S({type:gt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Bu.prototype,"extent",void 0),b([S({type:["view","edit"],json:{write:!0}})],Bu.prototype,"mode",void 0),b([S({type:String,json:{read:V8.read,write:V8.write}})],Bu.prototype,"originPosition",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Bu.prototype,"tolerance",void 0),Bu=h5=b([B("esri.rest.support.QuantizationParameters")],Bu);const _C=Bu;let G8=class SC{constructor(t,i){this.key=new Bh(0,0,0,0),this.bounds=xo(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return gt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=Cr.acquire();for(let r=0;r<t.length;r++)i[r]=new SC(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return _C.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const wu={added:[],removed:[]},Pb=new Set,die=new Bh(0,0,0,0);let fie=class extends Ea{constructor(t){super(),this._tiles=new Map,this._index=Yg(9,le("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const a=new G8(this.tileScheme,r);this._tiles.set(r,a),this._index.insert(a),i.added.push(a)}for(const r of t.removed)if(this.has(r)){const a=this.get(r);this._tiles.delete(r),this._index.remove(a),i.removed.push(a)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:a}=i,{level:d}=a;if(r.length>0)for(const{row:y,colFrom:m,colTo:_}of r)for(let $=m;$<=_;$++){const M=die.set(d,y,a.normalizeCol($),a.getWorldForColumn($)).id;if(Pb.add(M),!this.has(M)){const A=new G8(this.tileScheme,M);this._tiles.set(M,A),this._index.insert(A),this.tiles.push(A),wu.added.push(A)}}for(let y=this.tiles.length-1;y>=0;y--){const m=this.tiles[y];Pb.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(y,1),this._index.remove(m),wu.removed.push(m))}(wu.added.length||wu.removed.length)&&this.emit("update",wu),Cf.pool.release(i),Pb.clear(),wu.added.length=0,wu.removed.length=0}},Hu=class extends De{constructor(){super(...arguments),this.color=new et([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};b([S({type:et})],Hu.prototype,"color",void 0),b([S({type:et})],Hu.prototype,"haloColor",void 0),b([S()],Hu.prototype,"haloOpacity",void 0),b([S()],Hu.prototype,"fillOpacity",void 0),Hu=b([B("esri.views.2d.support.HighlightOptions")],Hu);const xC=Hu,yie=e=>e.includes("Brush");let $C=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),yie(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function mie(e,t,i,r,a,d,y,m){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let _=null;e.width!=null&&e.height!=null?_=[e.width,e.height]:e.width==null&&e.height!=null?_=[e.height,e.height]:e.width!=null&&e.height==null?_=[e.width,e.width]:e.width==null&&e.height==null&&(_=null);const $=i[0]-(r.left+r.right),M=i[1]-(r.top+r.bottom);let A,P,j=e.area||{x:0,y:0,width:$,height:M};if(_){const L=$/M,F=_[0]/_[1];if(F>L){const V=j.width/F;j={x:j.x,y:Math.round(j.y+(j.height-V)/2),width:j.width,height:Math.round(V)}}else{const V=j.height*F;j={x:Math.round(j.x+(j.width-V)/2),y:j.y,width:Math.round(V),height:j.height}}}else _=[j.width,j.height];return _[0]>j.width?(A=Math.min(_[0]/j.width,t),P=_[0]/j.width/A):(A=1,P=_[0]/j.width),{resolutionScale:A,cropArea:{x:Math.round((j.x+r.left)*A),y:Math.round((j.y+r.top)*A),width:Math.round(j.width*A),height:Math.round(j.height*A)},outputScale:P,format:a,quality:d,children:y,rotation:m}}function gie(e,t,i){const{ctx:r,canvas:a}=TC(e,i),d=r.getImageData(0,0,e.width,e.height),y=wie(a,t);return IC(a),{dataUrl:y,data:d}}function vie(e,t){const{ctx:i,canvas:r}=TC(e,t),a=i.getImageData(0,0,e.width,e.height);return IC(r),a}function TC(e,t){const i=bie();t.premultipliedAlpha&&Tie(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&$ie(r),{ctx:r,canvas:i}}function IC(e){e.width=0,e.height=0}function bie(){return Cb==null&&(Cb=document.createElement("canvas")),Cb}let Cb=null;function wie(e,t){const i=Iie[t.format],r=t.quality/100;return e.toDataURL(i,r)}function _ie(e,t){const i=xie(e),r=Mie[i];return{format:i,quality:qs(t??r,0,100)}}function Sie(e,t){return t/Math.max(e[0],e[1])}function Sme(e,t,i,r=0,a=0,d=e.width-r,y=e.height-a,m=!1){const{data:_}=e,{width:$,height:M,data:A}=t,P=d/$,j=y/M,L=Math.ceil(P/2),F=Math.ceil(j/2),V=e.width;for(let J=0;J<M;J++)for(let Q=0;Q<$;Q++){const Y=4*(Q+(m?M-J-1:J)*$);let te=0,oe=0,ae=0,de=0,ve=0,Ie=0;const Oe=(J+.5)*j;for(let Ne=Math.floor(J*j);Ne<(J+1)*j;Ne++){const Re=Math.abs(Oe-(Ne+.5))/F,We=(Q+.5)*P,Pe=Re*Re;for(let Gt=Math.floor(Q*P);Gt<(Q+1)*P;Gt++){const gi=Math.abs(We-(Gt+.5))/L,qt=Math.sqrt(Pe+gi*gi);if(qt>=1)continue;let ht=2*qt*qt*qt-3*qt*qt+1;const xr=4*(r+Gt+(a+Ne)*V);Ie+=ht*_[xr+3],oe+=ht,!i&&_[xr+3]<255&&(ht=ht*_[xr+3]/255),ae+=ht*_[xr],de+=ht*_[xr+1],ve+=ht*_[xr+2],te+=ht}}A[Y]=ae/te,A[Y+1]=de/te,A[Y+2]=ve/te,A[Y+3]=Ie/oe}return t}function xie(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return Eie}}function $ie(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function Tie(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const a=t[r+3];if(a!==255&&a>0){const d=255/a;t[r]=t[r]*d,t[r+1]=t[r+1]*d,t[r+2]=t[r+2]*d}}}const Iie={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},q8=98,Eie="png",Mie={png:100,jpg:q8,jpeg:q8};var Ni;function c5(e,t,i={}){const r=t===Ni.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const a of r){const d=e.getContext(a,i);if(d)return d}return null}function xme(e,t,i={}){const r=EC(e);for(const a of r){const d=c5(t,a,i);if(d)return d}return null}function EC(e){if(e==="3d")return[Ni.WEBGL2];const t=le("esri-force-webgl");return t===Ni.WEBGL1||t===Ni.WEBGL2?[t]:le("mac")&&le("chrome")?[Ni.WEBGL1,Ni.WEBGL2]:[Ni.WEBGL2,Ni.WEBGL1]}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Ni||(Ni={}));let Nb,jb;function Aie(e){const t=EC(e);for(;t.length>1;){const i=U8(t.shift());if(i.available)return i}return U8(t.shift())}function U8(e){switch(e){case Ni.WEBGL1:return kie();case Ni.WEBGL2:return Oie()}}function kie(){return Nb||(Nb=Nie()),Nb}function Oie(){return jb||(jb=jie()),jb}let MC=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},Pie=class extends MC{constructor(){super(...arguments),this.type=Ni.WEBGL1}},Cie=class extends MC{constructor(){super(...arguments),this.type=Ni.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function AC(e,t){if(e===Ni.WEBGL1&&typeof WebGLRenderingContext>"u"||e===Ni.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=c5(i,e,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=c5(i,e),r!=null&&(t.majorPerformanceCaveat=!0)),r==null)return r;if(e===Ni.WEBGL1){const d=r.getParameter(r.VERSION),y=d==null?void 0:d.match(/^WebGL\s+([\d.]*)/);if(y){const m=parseFloat(y[1]);t.available=m>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return a&&(t.supportsHighPrecisionFragment=a.precision>0),r}function Nie(){const e=new Pie,t=AC(Ni.WEBGL1,e);return t==null||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function jie(){const e=new Cie,t=AC(Ni.WEBGL2,e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function Rie(e){const t=Aie(e);if(!t.available)return new se("webgl:required",e==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(e==="3d"&&t.majorPerformanceCaveat)return new se("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new se("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new se("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Ni.WEBGL1){if(!t.supportsElementIndexUint)return new se("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new se("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new se("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Lie(e){return e&&"nodeType"in e}function Die(e){return e&&typeof e.render=="function"}const B8={component:"esri-component"};let Wu=class extends De{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(B8.component),i&&i.classList.remove(B8.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||Lie(t)?(this._set("widget",null),P6(t)):(Die(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};b([S({dependsOn:[]})],Wu.prototype,"id",null),b([S()],Wu.prototype,"node",null),b([Tt("node")],Wu.prototype,"castNode",null),b([S({readOnly:!0})],Wu.prototype,"widget",void 0),Wu=b([B("esri.views.ui.Component")],Wu);const bm=Wu,kC="calcite-mode-";function Fie(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function zie(){return Fie().startsWith("dark")}function Vie(){return`${kC}${zie()?"dark":"light"}`}function Gie(e){qie(e),e.classList.add(Vie())}function qie(e){Array.from(e.classList).forEach(t=>{t.startsWith(kC)&&e.classList.remove(t)})}const Uie={left:0,top:0,bottom:0,right:0},OC={bottom:30,top:15,right:15,left:15},No="esri-ui",Lr={ui:No,corner:`${No}-corner`,innerContainer:`${No}-inner-container`,manualContainer:`${No}-manual-container`,cornerContainer:`${No}-corner-container`,topLeft:`${No}-top-left`,topRight:`${No}-top-right`,bottomLeft:`${No}-bottom-left`,bottomRight:`${No}-bottom-right`};function Bie(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function hy(e){return e===0?"0":`${e}px`}function Rb(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function Lb(e,{top:t,bottom:i,left:r,right:a}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=a}let oo=class extends Ea.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Pn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&Lb(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&Lb(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ke(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,kt),ke(()=>this.padding,this._applyUIPadding,kt),ke(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},kt),tM(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(Lr.ui),Gie(t),this._attachContainers(t)),i&&(i.classList.remove(Lr.ui),Lb(i,{top:"",bottom:"",left:"",right:""}),qO(i)),this._set("container",t))}get height(){var d;const t=((d=this.view)==null?void 0:d.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:r,bottom:a}=i;return Math.max(t-r-a,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...OC,...t}}get width(){var d;const t=((d=this.view)==null?void 0:d.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:r,right:a}=i;return Math.max(t-r-a,0)}add(t,i){let r,a,d;if(Array.isArray(t))return void t.forEach(m=>this.add(m,i));const y=Rb(t);y&&({index:r,position:i,component:t,key:a}=y),i&&typeof i=="object"&&({index:r,key:a,position:i,internal:d}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,a,d)}remove(t,i){var a;if(!t)return;if(Array.isArray(t))return t.map(d=>this.remove(d,i));const r=this._find(t);if(r){if(this._componentMap.has(t)&&((a=this._componentMap.get(t))==null?void 0:a.key)!==i)return;const d=this._components.indexOf(r),y=r.node.parentNode;return y==null||y.removeChild(r.node),this._componentMap.delete(t),this._components.splice(d,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const d of t)this.empty(d,i);return}const r=this._positionNameToContainerLookup[t??"manual"],a=Array.prototype.slice.call(r.children).map(d=>this._findByNode(d)).filter(d=>{var y;return d==null?!1:!(((y=this._componentMap.get(d))==null?void 0:y.internal)??!1)||i.removeInternal});for(const d of a)this.remove(d)}move(t,i){if(Array.isArray(t)&&t.forEach(y=>this.move(y,i)),!t)return;let r;const a=Rb(t)||Rb(i);if(a&&(r=a.index,i=a.position,t=a.component||t),i&&!this._isValidPosition(i))return;const d=this.remove(t);d&&this.add(d,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.map(r=>this._getComponentsAtPosition(r,i)).flat():this._getComponentsAtPosition(t,i):this._components.filter(r=>{var a;return i.includeInternal||!((a=this._componentMap.get(r))!=null&&a.internal)}).map(({widget:r,node:a})=>r??a)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,a,d){t instanceof bm||(t=new bm({node:t})),this._place({component:t,position:i,index:r}),this._components.push(t),this._componentMap.set(t,{key:a,internal:d})}_find(t){return t?t instanceof bm?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??Uie}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Lr.innerContainer,Lr.cornerContainer);const i=document.createElement("div");i.classList.add(Lr.innerContainer,Lr.manualContainer);const r=document.createElement("div");r.classList.add(Lr.topLeft,Lr.corner),t.appendChild(r);const a=document.createElement("div");a.classList.add(Lr.topRight,Lr.corner),t.appendChild(a);const d=document.createElement("div");d.classList.add(Lr.bottomLeft,Lr.corner),t.appendChild(d);const y=document.createElement("div");y.classList.add(Lr.bottomRight,Lr.corner),t.appendChild(y),this._innerContainer=t,this._manualContainer=i;const m=qZ();this._cornerNameToContainerLookup={"top-left":r,"top-right":a,"bottom-left":d,"bottom-right":y,"top-leading":m?a:r,"top-trailing":m?r:a,"bottom-leading":m?y:d,"bottom-trailing":m?d:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const i=t.position??"manual",{component:r,index:a}=t,d=this._positionNameToContainerLookup[i],y=a!=null&&a>-1;if(Bie(r.widget)&&r.widget.startup(),!y)return void d.appendChild(r.node);const m=Array.from(d.children);if(a===0)return void(d.firstChild?F7(r.node,d.firstChild):d.appendChild(r.node));a>=m.length?d.appendChild(r.node):F7(r.node,m[a])}_toPixelPosition(t){return{top:hy(t.top),left:hy(t.left),right:hy(t.right),bottom:hy(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const r=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(r.children).map(a=>this._findByNode(a)).filter(Oh).filter(a=>{var d;return i.includeInternal||!((d=this._componentMap.get(a))!=null&&d.internal)}).map(({widget:a,node:d})=>a??d)}};b([S()],oo.prototype,"_locale",void 0),b([S()],oo.prototype,"container",null),b([S()],oo.prototype,"height",null),b([S({value:OC})],oo.prototype,"padding",null),b([Tt("padding")],oo.prototype,"castPadding",null),b([S()],oo.prototype,"view",void 0),b([S()],oo.prototype,"width",null),oo=b([B("esri.views.ui.UI")],oo);const Hie=oo,Wie="randomUUID"in crypto;function PC(){if(Wie)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function Ame(){return`{${PC()}}`}const Jie={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},Kie={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},Yie=e=>({...Kie,...e}),Zie=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},Xie=(e,t)=>e.find(t),H8=(e,t,i=!1)=>{let r=e;return t.forEach((a,d)=>{const y=r!=null&&r.children?Xie(r.children,m=>m.domNode===a):void 0;i&&!y&&d!==t.length-1||(r=y)}),r},Qie=e=>{let t;const i={...Jie,...e},r=Yie(i),a=r.performanceLogger;let d,y=!0,m=!1;const _=[],$=[],M=(P,j,L)=>{var J;let F;r.eventHandlerInterceptor=(Q,Y,te,oe)=>function(ae){let de;a("domEvent",ae);const ve=Zie(ae.currentTarget,F.domNode),Ie=ve.some(Ne=>{var Re;return customElements.get((Re=Ne==null?void 0:Ne.tagName)==null?void 0:Re.toLowerCase())});if(ae.eventPhase===Event.CAPTURING_PHASE||!Ie)ve.reverse(),de=H8(F.getLastRender(),ve);else{const Ne=ae.composedPath(),Re=Ne.slice(Ne.indexOf(ae.currentTarget),Ne.indexOf(F.domNode)).filter(We=>We.getRootNode()===We.ownerDocument).reverse();de=H8(F.getLastRender(),Re,!0)}let Oe;return de&&(Oe=i.handleInterceptedEvent(t,de,this,ae)),a("domEventProcessed",ae),Oe},(J=i.postProcessProjectionOptions)==null||J.call(i,r);const V=L();F=P(j,V,r),_.push(F),$.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(F,V)};let A=()=>{if(d=void 0,y){y=!1,a("renderStart",void 0);for(let P=0;P<_.length;P++){const j=$[P]();a("rendered",void 0),_[P].update(j),a("patched",void 0)}a("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,_,$)),t={renderNow:A,scheduleRender:()=>{d||m||(d=requestAnimationFrame(A))},stop:()=>{d&&(cancelAnimationFrame(d),d=void 0),m=!0},resume:()=>{m=!1,y=!0,t.scheduleRender()},append:(P,j)=>{M(Vl.append,P,j)},insertBefore:(P,j)=>{M(Vl.insertBefore,P,j)},merge:(P,j)=>{M(Vl.merge,P,j)},replace:(P,j)=>{M(Vl.replace,P,j)},detach:P=>{for(let j=0;j<$.length;j++)if($[j]===P)return $.splice(j,1),_.splice(j,1)[0];throw new Error("renderFunction was not found")}},t},Cc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Nc,CC,c2,NC=!1,Zg=!1,K6=!1,os=!1,W8=null,p5=!1;const ere=e=>{const t=new URL(e,Xi.$resourcesUrl$);return t.origin!==h1.location.origin?t.href:t.pathname},tre=e=>Xi.$resourcesUrl$=e,Hh=(e,t="")=>()=>{},J8="http://www.w3.org/1999/xlink",K8={},ire="http://www.w3.org/2000/svg",rre="http://www.w3.org/1999/xhtml",sre=e=>e!=null,Y6=e=>(e=typeof e,e==="object"||e==="function");function nre(e){var t,i,r;return(r=(i=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const jC=(e,t,...i)=>{let r=null,a=null,d=null,y=!1,m=!1;const _=[],$=A=>{for(let P=0;P<A.length;P++)r=A[P],Array.isArray(r)?$(r):r!=null&&typeof r!="boolean"&&((y=typeof e!="function"&&!Y6(r))&&(r=String(r)),y&&m?_[_.length-1].$text$+=r:_.push(y?Xg(null,r):r),m=y)};if($(i),t){t.key&&(a=t.key),t.name&&(d=t.name);{const A=t.className||t.class;A&&(t.class=typeof A!="object"?A:Object.keys(A).filter(P=>A[P]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,_,lre);const M=Xg(e,null);return M.$attrs$=t,_.length>0&&(M.$children$=_),M.$key$=a,M.$name$=d,M},Xg=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},ore={},are=e=>e&&e.$tag$===ore,lre={forEach:(e,t)=>e.map(Y8).forEach(t),map:(e,t)=>e.map(Y8).map(t).map(ure)},Y8=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),ure=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),jC(e.vtag,i,...e.vchildren||[])}const t=Xg(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},hre=e=>Lre.map(t=>t(e)).find(t=>!!t),cre=(e,t)=>e!=null&&!Y6(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,pre=e=>e,kme=(e,t,i)=>{const r=pre(e);return{emit:a=>dre(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:a})}},dre=(e,t,i)=>{const r=Xi.ce(t,i);return e.dispatchEvent(r),r},Z8=new WeakMap,fre=(e,t,i)=>{let r=ev.get(e);zre&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,ev.set(e,r)},yre=(e,t,i,r)=>{var a;let d=RC(t,i);const y=ev.get(d);if(e=e.nodeType===11?e:Nn,y)if(typeof y=="string"){e=e.head||e;let m=Z8.get(e),_;if(m||Z8.set(e,m=new Set),!m.has(d)){{_=Nn.createElement("style"),_.innerHTML=y;const $=(a=Xi.$nonce$)!==null&&a!==void 0?a:nre(Nn);$!=null&&_.setAttribute("nonce",$),e.insertBefore(_,e.querySelector("link"))}m&&m.add(d)}}else e.adoptedStyleSheets.includes(y)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,y]);return d},mre=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,a=Hh("attachStyles",t.$tagName$),d=yre(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=d,i.classList.add(d+"-h"),r&2&&i.classList.add(d+"-s")),a()},RC=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),X8=(e,t,i,r,a,d)=>{if(i!==r){let y=i$(e,t),m=t.toLowerCase();if(t==="class"){const _=e.classList,$=Q8(i),M=Q8(r);_.remove(...$.filter(A=>A&&!M.includes(A))),_.add(...M.filter(A=>A&&!$.includes(A)))}else if(t==="style"){for(const _ in i)(!r||r[_]==null)&&(_.includes("-")?e.style.removeProperty(_):e.style[_]="");for(const _ in r)(!i||r[_]!==i[_])&&(_.includes("-")?e.style.setProperty(_,r[_]):e.style[_]=r[_])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):i$(h1,m)?t=m.slice(2):t=m[2]+t.slice(3),i&&Xi.rel(e,t,i,!1),r&&Xi.ael(e,t,r,!1);else{const _=Y6(r);if((y||_&&r!==null)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{const M=r??"";t==="list"?y=!1:(i==null||e[t]!=M)&&(e[t]=M)}}catch{}let $=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(t=m,$=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&($?e.removeAttributeNS(J8,t):e.removeAttribute(t)):(!y||d&4||a)&&!_&&(r=r===!0?"":r,$?e.setAttributeNS(J8,t,r):e.setAttribute(t,r))}}},gre=/\s/,Q8=e=>e?e.split(gre):[],LC=(e,t,i,r)=>{const a=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,d=e&&e.$attrs$||K8,y=t.$attrs$||K8;for(r in d)r in y||X8(a,r,d[r],void 0,i,t.$flags$);for(r in y)X8(a,r,d[r],y[r],i,t.$flags$)},Qg=(e,t,i,r)=>{const a=t.$children$[i];let d=0,y,m,_;if(NC||(K6=!0,a.$tag$==="slot"&&(Nc&&r.classList.add(Nc+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)y=a.$elm$=Nn.createTextNode(a.$text$);else if(a.$flags$&1)y=a.$elm$=Nn.createTextNode("");else{if(os||(os=a.$tag$==="svg"),y=a.$elm$=Nn.createElementNS(os?ire:rre,a.$flags$&2?"slot-fb":a.$tag$),os&&a.$tag$==="foreignObject"&&(os=!1),LC(null,a,os),sre(Nc)&&y["s-si"]!==Nc&&y.classList.add(y["s-si"]=Nc),a.$children$)for(d=0;d<a.$children$.length;++d)m=Qg(e,a,d,y),m&&y.appendChild(m);a.$tag$==="svg"?os=!1:y.tagName==="foreignObject"&&(os=!0)}return y["s-hn"]=c2,a.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=CC,y["s-sn"]=a.$name$||"",_=e&&e.$children$&&e.$children$[i],_&&_.$tag$===a.$tag$&&e.$elm$&&Nf(e.$elm$,!1)),y},Nf=(e,t)=>{Xi.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const a=i[r];a["s-hn"]!==c2&&a["s-ol"]&&(zC(a).insertBefore(a,Z6(a)),a["s-ol"].remove(),a["s-ol"]=void 0,K6=!0),t&&Nf(a,t)}Xi.$flags$&=-2},DC=(e,t,i,r,a,d)=>{let y=e["s-cr"]&&e["s-cr"].parentNode||e,m;for(y.shadowRoot&&y.tagName===c2&&(y=y.shadowRoot);a<=d;++a)r[a]&&(m=Qg(null,i,a,e),m&&(r[a].$elm$=m,y.insertBefore(m,Z6(t))))},FC=(e,t,i,r,a)=>{for(;t<=i;++t)(r=e[t])&&(a=r.$elm$,qC(r),Zg=!0,a["s-ol"]?a["s-ol"].remove():Nf(a,!0),a.remove())},vre=(e,t,i,r)=>{let a=0,d=0,y=0,m=0,_=t.length-1,$=t[0],M=t[_],A=r.length-1,P=r[0],j=r[A],L,F;for(;a<=_&&d<=A;)if($==null)$=t[++a];else if(M==null)M=t[--_];else if(P==null)P=r[++d];else if(j==null)j=r[--A];else if(cy($,P))jc($,P),$=t[++a],P=r[++d];else if(cy(M,j))jc(M,j),M=t[--_],j=r[--A];else if(cy($,j))($.$tag$==="slot"||j.$tag$==="slot")&&Nf($.$elm$.parentNode,!1),jc($,j),e.insertBefore($.$elm$,M.$elm$.nextSibling),$=t[++a],j=r[--A];else if(cy(M,P))($.$tag$==="slot"||j.$tag$==="slot")&&Nf(M.$elm$.parentNode,!1),jc(M,P),e.insertBefore(M.$elm$,$.$elm$),M=t[--_],P=r[++d];else{for(y=-1,m=a;m<=_;++m)if(t[m]&&t[m].$key$!==null&&t[m].$key$===P.$key$){y=m;break}y>=0?(F=t[y],F.$tag$!==P.$tag$?L=Qg(t&&t[d],i,y,e):(jc(F,P),t[y]=void 0,L=F.$elm$),P=r[++d]):(L=Qg(t&&t[d],i,d,e),P=r[++d]),L&&zC($.$elm$).insertBefore(L,Z6($.$elm$))}a>_?DC(e,r[A+1]==null?null:r[A+1].$elm$,i,r,d,A):d>A&&FC(t,a,_)},cy=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,Z6=e=>e&&e["s-ol"]||e,zC=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,jc=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$,d=t.$tag$,y=t.$text$;let m;y===null?(os=d==="svg"?!0:d==="foreignObject"?!1:os,d==="slot"||LC(e,t,os),r!==null&&a!==null?vre(i,r,t,a):a!==null?(e.$text$!==null&&(i.textContent=""),DC(i,null,t,a,0,a.length-1)):r!==null&&FC(r,0,r.length-1),os&&d==="svg"&&(os=!1)):(m=i["s-cr"])?m.parentNode.textContent=y:e.$text$!==y&&(i.data=y)},VC=e=>{const t=e.childNodes;let i,r,a,d,y,m;for(r=0,a=t.length;r<a;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,d=0;d<a;d++)if(m=t[d].nodeType,t[d]["s-hn"]!==i["s-hn"]||y!==""){if(m===1&&y===t[d].getAttribute("slot")){i.hidden=!0;break}}else if(m===1||m===3&&t[d].textContent.trim()!==""){i.hidden=!0;break}}VC(i)}},In=[],GC=e=>{let t,i,r,a,d,y,m=0;const _=e.childNodes,$=_.length;for(;m<$;m++){if(t=_[m],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,a=t["s-sn"],y=r.length-1;y>=0;y--)i=r[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(e$(i,a)?(d=In.find(M=>M.$nodeToRelocate$===i),Zg=!0,i["s-sn"]=i["s-sn"]||a,d?d.$slotRefNode$=t:In.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&In.map(M=>{e$(M.$nodeToRelocate$,i["s-sn"])&&(d=In.find(A=>A.$nodeToRelocate$===i),d&&!M.$slotRefNode$&&(M.$slotRefNode$=d.$slotRefNode$))})):In.some(M=>M.$nodeToRelocate$===i)||In.push({$nodeToRelocate$:i}));t.nodeType===1&&GC(t)}},e$=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",qC=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(qC)},bre=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||Xg(null,null),d=are(t)?t:jC(null,null,t);c2=i.tagName,r.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},r.$attrsToReflect$.map(([y,m])=>d.$attrs$[m]=i[y])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=a.$elm$=i.shadowRoot||i,Nc=i["s-sc"],CC=i["s-cr"],NC=(r.$flags$&1)!==0,Zg=!1,jc(a,d);{if(Xi.$flags$|=1,K6){GC(d.$elm$);let y,m,_,$,M,A,P=0;for(;P<In.length;P++)y=In[P],m=y.$nodeToRelocate$,m["s-ol"]||(_=Nn.createTextNode(""),_["s-nr"]=m,m.parentNode.insertBefore(m["s-ol"]=_,m));for(P=0;P<In.length;P++)if(y=In[P],m=y.$nodeToRelocate$,y.$slotRefNode$){for($=y.$slotRefNode$.parentNode,M=y.$slotRefNode$.nextSibling,_=m["s-ol"];_=_.previousSibling;)if(A=_["s-nr"],A&&A["s-sn"]===m["s-sn"]&&$===A.parentNode&&(A=A.nextSibling,!A||!A["s-nr"])){M=A;break}(!M&&$!==m.parentNode||m.nextSibling!==M)&&m!==M&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),$.insertBefore(m,M))}else m.nodeType===1&&(m.hidden=!0)}Zg&&VC(d.$elm$),Xi.$flags$&=-2,In.length=0}},wre=(e,t)=>{},X6=(e,t)=>(e.$flags$|=16,wre(e,e.$ancestorComponent$),Gre(()=>_re(e,t))),_re=(e,t)=>{const i=e.$hostElement$,r=Hh("scheduleUpdate",e.$cmpMeta$.$tagName$),a=i;let d;return t?d=yp(a,"componentWillLoad"):d=yp(a,"componentWillUpdate"),d=t$(d,()=>yp(a,"componentWillRender")),r(),t$(d,()=>Sre(e,a,t))},Sre=async(e,t,i)=>{const r=e.$hostElement$,a=Hh("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&mre(e);const d=Hh("render",e.$cmpMeta$.$tagName$);xre(e,t,r),d(),a(),$re(e)},xre=(e,t,i)=>{try{W8=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Cc.hasRenderFn||Cc.reflect)&&(Cc.vdomRender||Cc.reflect)&&(Cc.hydrateServerSide||bre(e,t))}catch(m){u1(m,e.$hostElement$)}return W8=null,null},$re=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=Hh("postUpdate",t),a=i;e.$ancestorComponent$,yp(a,"componentDidRender"),e.$flags$&64?(yp(a,"componentDidUpdate"),r()):(e.$flags$|=64,yp(a,"componentDidLoad"),r())},Ome=e=>{{const t=l1(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&X6(t,!1),i}},yp=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){u1(r)}},t$=(e,t)=>e&&e.then?e.then(t):t(),Tre=(e,t)=>l1(e).$instanceValues$.get(t),Ire=(e,t,i,r)=>{const a=l1(e),d=e,y=a.$instanceValues$.get(t),m=a.$flags$,_=d;i=cre(i,r.$members$[t][0]);const $=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!$){a.$instanceValues$.set(t,i);{if(r.$watchers$&&m&128){const A=r.$watchers$[t];A&&A.map(P=>{try{_[P](i,y,t)}catch(j){u1(j,d)}})}if((m&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,y,t)===!1)return;X6(a,!1)}}}},Ere=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),a=e.prototype;r.map(([d,[y]])=>{(y&31||y&32)&&Object.defineProperty(a,d,{get(){return Tre(this,d)},set(m){Ire(this,d,m,t)},configurable:!0,enumerable:!0})});{const d=new Map;a.attributeChangedCallback=function(y,m,_){Xi.jmp(()=>{const $=d.get(y);if(this.hasOwnProperty($))_=this[$],delete this[$];else if(a.hasOwnProperty($)&&typeof this[$]=="number"&&this[$]==_)return;this[$]=_===null&&typeof this[$]=="boolean"?!1:_})},e.observedAttributes=r.filter(([y,m])=>m[0]&15).map(([y,m])=>{const _=m[1]||y;return d.set(_,y),m[0]&512&&t.$attrsToReflect$.push([y,_]),_})}}return e},Mre=async(e,t,i,r,a)=>{if(!(t.$flags$&32)&&(a=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),a.style)){let y=a.style;typeof y!="string"&&(y=y[t.$modeName$=hre(e)]);const m=RC(i,t.$modeName$);if(!ev.has(m)){const _=Hh("registerStyles",i.$tagName$);fre(m,y,!!(i.$flags$&1)),_()}}t.$ancestorComponent$,(()=>X6(t,!0))()},Are=e=>{},kre=e=>{if(!(Xi.$flags$&1)){const t=l1(e),i=t.$cmpMeta$,r=Hh("connectedCallback",i.$tagName$);t.$flags$&1?(UC(e,t,i.$listeners$),Are(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&Ore(e),i.$members$&&Object.entries(i.$members$).map(([a,[d]])=>{if(d&31&&e.hasOwnProperty(a)){const y=e[a];delete e[a],e[a]=y}}),Mre(e,t,i)),r()}},Ore=e=>{const t=e["s-cr"]=Nn.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Pre=e=>{if(!(Xi.$flags$&1)){const t=l1(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},Pme=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Rre(this,i)},connectedCallback(){kre(this),r&&r.call(this)},disconnectedCallback(){Pre(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),e.is=i.$tagName$,Ere(e,i)},Cme=(e,t)=>t,UC=(e,t,i,r)=>{i&&i.map(([a,d,y])=>{const m=Nre(e,a),_=Cre(t,y),$=jre(a);Xi.ael(m,d,_,$),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Xi.rel(m,d,_,$))})},Cre=(e,t)=>i=>{try{Cc.lazyLoad||e.$hostElement$[t](i)}catch(r){u1(r)}},Nre=(e,t)=>t&4?Nn:t&8?h1:t&16?Nn.body:e,jre=e=>Dre?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,BC=new WeakMap,l1=e=>BC.get(e),Rre=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return UC(e,i,t.$listeners$),BC.set(e,i)},i$=(e,t)=>t in e,u1=(e,t)=>(0,console.error)(e,t),ev=new Map,Lre=[],h1=typeof window<"u"?window:{},Nn=h1.document||{head:{}},Nme=h1.HTMLElement||class{},Xi={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},Dre=(()=>{let e=!1;try{Nn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Fre=e=>Promise.resolve(e),zre=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),d5=[],HC=[],WC=(e,t)=>i=>{e.push(i),p5||(p5=!0,t&&Xi.$flags$&4?Vre(f5):Xi.raf(f5))},r$=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){u1(i)}e.length=0},f5=()=>{r$(d5),r$(HC),(p5=d5.length>0)&&Xi.raf(f5)},Vre=e=>Fre().then(e),jme=WC(d5,!1),Gre=WC(HC,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const JC="calcite-mode-auto",KC="calcite-mode-dark",qre="calcite-mode-light",Rme={autoMode:JC,darkMode:KC,lightMode:qre,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var YC=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],tv=YC.join(","),ZC=typeof Element>"u",Wh=ZC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,iv=!ZC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},rv=function e(t,i){var r;i===void 0&&(i=!0);var a=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),d=a===""||a==="true",y=d||i&&t&&e(t.parentNode);return y},Ure=function(t){var i,r=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return r===""||r==="true"},XC=function(t,i,r){if(rv(t))return[];var a=Array.prototype.slice.apply(t.querySelectorAll(tv));return i&&Wh.call(t,tv)&&a.unshift(t),a=a.filter(r),a},QC=function e(t,i,r){for(var a=[],d=Array.from(t);d.length;){var y=d.shift();if(!rv(y,!1))if(y.tagName==="SLOT"){var m=y.assignedElements(),_=m.length?m:y.children,$=e(_,!0,r);r.flatten?a.push.apply(a,$):a.push({scopeParent:y,candidates:$})}else{var M=Wh.call(y,tv);M&&r.filter(y)&&(i||!t.includes(y))&&a.push(y);var A=y.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(y),P=!rv(A,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(y));if(A&&P){var j=e(A===!0?y.children:A.children,!0,r);r.flatten?a.push.apply(a,j):a.push({scopeParent:y,candidates:j})}else d.unshift.apply(d,y.children)}}return a},eN=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},tN=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Ure(t))&&!eN(t)?0:t.tabIndex},Bre=function(t,i){var r=tN(t);return r<0&&i&&!eN(t)?0:r},Hre=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},iN=function(t){return t.tagName==="INPUT"},Wre=function(t){return iN(t)&&t.type==="hidden"},Jre=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},Kre=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},Yre=function(t){if(!t.name)return!0;var i=t.form||iv(t),r=function(m){return i.querySelectorAll('input[type="radio"][name="'+m+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=r(window.CSS.escape(t.name));else try{a=r(t.name)}catch(y){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",y.message),!1}var d=Kre(a,t.form);return!d||d===t},Zre=function(t){return iN(t)&&t.type==="radio"},Xre=function(t){return Zre(t)&&!Yre(t)},Qre=function(t){var i,r=t&&iv(t),a=(i=r)===null||i===void 0?void 0:i.host,d=!1;if(r&&r!==t){var y,m,_;for(d=!!((y=a)!==null&&y!==void 0&&(m=y.ownerDocument)!==null&&m!==void 0&&m.contains(a)||t!=null&&(_=t.ownerDocument)!==null&&_!==void 0&&_.contains(t));!d&&a;){var $,M,A;r=iv(a),a=($=r)===null||$===void 0?void 0:$.host,d=!!((M=a)!==null&&M!==void 0&&(A=M.ownerDocument)!==null&&A!==void 0&&A.contains(a))}}return d},s$=function(t){var i=t.getBoundingClientRect(),r=i.width,a=i.height;return r===0&&a===0},ese=function(t,i){var r=i.displayCheck,a=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var d=Wh.call(t,"details>summary:first-of-type"),y=d?t.parentElement:t;if(Wh.call(y,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof a=="function"){for(var m=t;t;){var _=t.parentElement,$=iv(t);if(_&&!_.shadowRoot&&a(_)===!0)return s$(t);t.assignedSlot?t=t.assignedSlot:!_&&$!==t.ownerDocument?t=$.host:t=_}t=m}if(Qre(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return s$(t);return!1},tse=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var a=i.children.item(r);if(a.tagName==="LEGEND")return Wh.call(i,"fieldset[disabled] *")?!0:!a.contains(t)}return!0}i=i.parentElement}return!1},sv=function(t,i){return!(i.disabled||rv(i)||Wre(i)||ese(i,t)||Jre(i)||tse(i))},y5=function(t,i){return!(Xre(i)||tN(i)<0||!sv(t,i))},ise=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},rse=function e(t){var i=[],r=[];return t.forEach(function(a,d){var y=!!a.scopeParent,m=y?a.scopeParent:a,_=Bre(m,y),$=y?e(a.candidates):m;_===0?y?i.push.apply(i,$):i.push(m):r.push({documentOrder:d,tabIndex:_,item:a,isScope:y,content:$})}),r.sort(Hre).reduce(function(a,d){return d.isScope?a.push.apply(a,d.content):a.push(d.content),a},[]).concat(i)},sse=function(t,i){i=i||{};var r;return i.getShadowRoot?r=QC([t],i.includeContainer,{filter:y5.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:ise}):r=XC(t,i.includeContainer,y5.bind(null,i)),rse(r)},Lme=function(t,i){i=i||{};var r;return i.getShadowRoot?r=QC([t],i.includeContainer,{filter:sv.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=XC(t,i.includeContainer,sv.bind(null,i)),r},Dme=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Wh.call(t,tv)===!1?!1:y5(i,t)},nse=YC.concat("iframe").join(","),Fme=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Wh.call(t,nse)===!1?!1:sv(i,t)};const ose={getShadowRoot:!0};function zme(e){const t="dir",i=`[${t}]`,r=ase(e,i);return r?r.getAttribute(t):"ltr"}function Q6(e){return e.getRootNode()}function Vme(e){const t=Q6(e);return"host"in t?t:null}function rN(e){return e.host||null}function Gme(e,{selector:t,id:i}){function r(a){if(!a)return null;a.assignedSlot&&(a=a.assignedSlot);const d=Q6(a),y=i?"getElementById"in d?d.getElementById(i):null:t?d.querySelector(t):null,m=rN(d);return y||(m?r(m):null)}return r(e)}function ase(e,t){function i(r){return r?r.closest(t)||i(rN(Q6(r))):null}return i(e)}function lse(e,t){return sN(e,t)}function sN(e,t){if(!e)return;const i=t(e);if(i!==void 0)return i;const{parentNode:r}=e;return sN(r instanceof ShadowRoot?r.host:r,t)}function qme(e,t){return!!lse(t,i=>i===e?!0:void 0)}function use(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function Ume(e){if(e)return use(e)?e.setFocus():e.focus()}function Bme(e){e&&(sse(e,ose)[0]||e).focus()}const jf=":not([slot])";function Hme(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(a=>`[slot="${a}"]`).join(","):`[slot="${t}"]`:jf;return i!=null&&i.all?hse(e,r,i):cse(e,r,i)}function nN(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function hse(e,t,i){let r=t===jf?nN(e,jf):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(d=>d.parentElement===e),r=i!=null&&i.matches?r.filter(d=>d==null?void 0:d.matches(i.matches)):r;const a=i==null?void 0:i.selector;return a?r.map(d=>Array.from(d.querySelectorAll(a))).reduce((d,y)=>[...d,...y],[]).filter(d=>!!d):r}function cse(e,t,i){let r=t===jf?nN(e,jf)[0]||null:e.querySelector(t);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===e?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const a=i==null?void 0:i.selector;return a?r==null?void 0:r.querySelector(a):r}function Wme(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function Jme(e){return Boolean(e).toString()}function Kme(e){return yse(e)||dse(e)}function pse(e){return fse(e).filter(t=>t.nodeType===Node.TEXT_NODE).map(t=>t.textContent).join("").trim()}function dse(e){return!!pse(e)}function fse(e){return e.target.assignedNodes({flatten:!0})}function yse(e){return!!mse(e).length}function mse(e){return e.target.assignedElements({flatten:!0})}function Yme(e){return!!(e.isPrimary&&e.button===0)}function Zme(e,t){if(e.parentNode!==t.parentNode)return!1;const i=Array.from(e.parentNode.children);return i.indexOf(e)<i.indexOf(t)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function n$(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(KC)||e.contains(JC)&&t?"dark":"light",r=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),a=y=>{d!==y&&r(y),d=y};let d=i();r(d),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>a(y.matches?"dark":"light")),new MutationObserver(()=>a(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function gse(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?n$():document.addEventListener("DOMContentLoaded",()=>n$(),{once:!0}))}const vse=gse;vse();let oN;function bse(){try{ere(".")}catch{tre(js(At(oN)))}}function wse(e){var i;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((i=e[r])==null?void 0:i.call(e));return Promise.all(t)}oN="components/assets";const aN=Symbol("widget"),_se=Symbol("widget-test-data"),Sse=[],xse={},nv=new WeakMap;function lN(e,t){let i=t.children;if(i&&i.length)for(let a=0;a<i.length;++a)i[a]=lN(e,i[a]);else i=Sse;const r=t.vnodeSelector;if(eS(r)){const a=t.properties||xse,d=a.key||r;return{vnodeSelector:"div",properties:{key:d,afterCreate:$se,afterUpdate:Tse,afterRemoved:uN,parentWidget:e,widgetConstructor:r,widgetProperties:{...a,key:d,children:i}},children:void 0,text:void 0,domNode:null}}return t}function $se(e,t,i,{parentWidget:r,widgetConstructor:a,widgetProperties:d}){var m;const y=new a(d);y.container=e,nv.set(e,y),(m=y.afterCreate)==null||m.call(y,y,e),r._internalHandles.add(va(()=>uN(e)))}function Tse(e,t,i,{widgetProperties:r}){var d;const a=nv.get(e);a&&(a.set(r),(d=a.afterUpdate)==null||d.call(a,a,e))}function uN(e){var i;const t=nv.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),nv.delete(e))}function eS(e){return typeof e=="function"&&e[aN]}const o$=new Set;function Ise(e){o$.add(e),e.finally(()=>o$.delete(e))}var hN;const Ese="esri.widgets.Widget";let Mse=0;const Ase={widgetIcon:"esri-icon-checkbox-unchecked"};function cN(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?cN(e[i],t==null?void 0:t[i]):e[i]=t[i]);return e}const kse=Qie({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,a,d,y)=>{const m=t==null?void 0:t(r,a,d,y),_=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in d)||_){const $=r[2].toLowerCase()+r.slice(3),M=j=>m==null?void 0:m.call(d,j);d.addEventListener($,M,_);const A=()=>d.removeEventListener($,M,_),P=y.afterRemoved;y.afterRemoved=j=>{P==null||P(j),A()}}return m}},handleInterceptedEvent(e,t,i,r){const{eventPhase:a,type:d}=r,y=a===Event.CAPTURING_PHASE;let m=`on${d}${y?"capture":""}`;const _=t.properties;(_&&m in _||(m=`on${d[0].toUpperCase()}${d.slice(1)}${y?"Capture":""}`,_&&m in _))&&(sP(),e.scheduleRender(),_[m].call(_.bind||i,r))}});let Db=!1,Mi=class extends Cv(Ea.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._internalHandles=new Mo,this._projector=kse,this._readyForTrueRender=!1,this.iconClass=Ase.widgetIcon,this.icon=null,this.key=this,this._loadLocale=a4(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const y=await Kh(this._messageBundleProps.map(async({bundlePath:m,propertyName:_})=>{if(this.destroyed)return;let $=await rM(m);this.uiStrings&&Object.keys(this.uiStrings)&&($=cN(re($),this.uiStrings)),this[_]=$}));if(this.destroyed)return;for(const m of y)m.error&&fe.getLogger(this).error("widget-intl:locale-error",this.declaredClass,m.error)}await this.loadLocale()}),bse();const r="esri-widget-uid-"+PC(),a=this.render.bind(this);this._trackingTarget=new Mv(()=>this.scheduleRender());const d=()=>{var M;if(!this._readyForTrueRender||this.destroyed)return null;const y=a();let{properties:m}=y;m||(y.properties=m={});const{key:_}=m;_||(m.key=r),this.visible?m.styles||(m.styles={}):(m.class="",m.styles={display:"none"}),m.styles.display||(m.styles.display="");let $=0;return(M=y.children)==null||M.forEach(A=>{if(eS(A.vnodeSelector))return;let{properties:P}=A;P||(A.properties=P={}),P.key||(P.key=`${this.id}--${$++}`)}),lN(this,y)};this.render=()=>{if(Db)return d();let y=RZ(this)??null;if(y)return y;this._trackingTarget.clear(),Db=!0;try{y=ba(this._trackingTarget,d)}catch(m){throw console.error(m),m}finally{Db=!1}return y&&LZ(this,y),y},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Ise(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(XS)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Wt(this._trackingTarget),Wt(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,vb(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return P6(t)}get domNode(){return this.container}set domNode(t){this.container=t}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Mse++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(hN=aN,_se)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(vb(this),this._projector.scheduleRender())}classes(...t){return GZ.apply(this,t)}renderNow(){vb(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(ke(()=>this.viewModel,(r,a)=>{a&&this._internalHandles.remove("delegated-events"),r&&Tv(r)&&this._internalHandles.add(this._delegatedEventNames.map(d=>Iv(r,d,y=>{this.emit(d,y)})),"delegated-events")},kt)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(XS),this.scheduleRender()};this._internalHandles.add([tM(t),ke(()=>this.uiStrings,t),Yl(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};Mi[hN]=!0,b([S()],Mi.prototype,"_readyForTrueRender",void 0),b([S({value:null})],Mi.prototype,"container",null),b([Tt("container")],Mi.prototype,"castContainer",null),b([S()],Mi.prototype,"iconClass",void 0),b([S()],Mi.prototype,"icon",void 0),b([S()],Mi.prototype,"id",null),b([S()],Mi.prototype,"label",null),b([S()],Mi.prototype,"renderable",null),b([S()],Mi.prototype,"uiStrings",void 0),b([S()],Mi.prototype,"viewModel",void 0),b([S({value:!0})],Mi.prototype,"visible",null),b([S()],Mi.prototype,"key",void 0),b([S()],Mi.prototype,"children",void 0),b([S()],Mi.prototype,"afterCreate",void 0),b([S()],Mi.prototype,"afterUpdate",void 0),b([S()],Mi.prototype,"afterRemoved",void 0),Mi=b([B(Ese)],Mi);const rc=Mi;function a$(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Ose(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function py(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function Pse(e){return e.type==="bing-maps"}const Ua=[];let Rc=class extends Ug{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Le,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(a=>ke(()=>{var d;return[a.suspended,(d=a.layer)==null?void 0:d.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(a=>{this._pendingAttributions.delete(a),this._fetchedAttributionData.delete(a)}),this._updateAttributionItems()},this.handles.add([Pp(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Yl(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;Ua.length=0,t&&i?(i.forEach(r=>{var y;if(r.suspended||!((y=r.layer)!=null&&y.attributionVisible))return;const a=r.layer;if(a$(a,"user"))return void py(Ua,r,a.copyright);if(a.hasAttributionData){if(this._fetchedAttributionData.has(r)){const m=this._fetchedAttributionData.get(r);return void(m?py(Ua,r,this._getDynamicAttribution(m,t,a)):a$(a)&&py(Ua,r,a.copyright))}return void this._fetchAttributionData(r)}const d=a.get("portalItem.accessInformation");py(Ua,r,d||a.copyright)}),Ose(this.items,Ua)&&(this.items.removeAll(),this.items.addMany(Ua)),Ua.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await Nv(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,Pse(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,a={};if(!r)return a;for(let d=0;d<r.length;d++){const y=r[d],m=y.coverageAreas;if(!m)return;for(const _ of m){const $=_.bbox,M=_.zoomMin-(i&&_.zoomMin?1:0),A=_.zoomMax-(i&&_.zoomMax?1:0),P=new gt({xmin:$[1],ymin:$[0],xmax:$[3],ymax:$[2],spatialReference:Xe.WGS84}),j={extent:$h(P),attribution:y.attribution||"",score:_.score!=null?_.score:100,id:d};for(let L=M;L<=A;L++)a[L]??(a[L]=[]),a[L].push(j)}}return a.maxKey=Math.max.apply(null,Object.keys(a)),a}_getDynamicAttribution(t,i,r){var M;const{extent:a,scale:d}=i;let y=((M=r.tileInfo)==null?void 0:M.scaleToZoom(d))??0;if(y=Math.min(t.maxKey??0,Math.round(y)),!a||y==null||y<=-1)return"";const m=t[y],_=Lv(a.center.clone().normalize(),i.spatialReference),$=new Set;return m?m.filter(A=>{const P=A.id,j=!$.has(P)&&_&&A.extent&&Dv(A.extent,_);return j&&$.add(P),j}).sort((A,P)=>P.score-A.score||A.objectId-P.objectId).map(A=>A.attribution).join(", "):""}};b([S({readOnly:!0,type:Le})],Rc.prototype,"items",void 0),b([S({readOnly:!0})],Rc.prototype,"state",null),b([S()],Rc.prototype,"view",void 0),Rc=b([B("esri.widgets.Attribution.AttributionViewModel")],Rc);const pN=Rc;function mo(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Nse(e[t])}}}function Cse(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Nse(e){return function(t,...i){Cse(t)?WZ(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Rp(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var jse=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},dN=function(e,t){for(var i=0,r=e.length;i<r;i++){var a=e[i];Array.isArray(a)?dN(a,t):a!=null&&a!==!1&&(a.hasOwnProperty("vnodeSelector")||(a=jse(a)),t.push(a))}},Rse=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var a=[];return dN(i,a),{vnodeSelector:e,properties:t||void 0,children:a,text:void 0,domNode:null}};function Ge(e,t,...i){return typeof e!="function"||eS(e)?Rse(e,t,...i):e(t,...i)}const fc="esri-attribution",Ba={base:`${fc} esri-widget`,poweredBy:`${fc}__powered-by`,sources:`${fc}__sources`,open:`${fc}--open`,sourcesOpen:`${fc}__sources--open`,link:`${fc}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let yr=class extends rc{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:a})=>this._checkSourceTextOverflow(a))),this.iconClass=Ba.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new pN}initialize(){this.addHandles(Pp(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Ba.open]:this._isOpen};return Ge("div",{bind:this,class:this.classes(Ba.base,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return Ge("div",{class:Ba.poweredBy},"Powered by"," ",Ge("a",{class:Ba.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:a}=this,d={[Ba.sourcesOpen]:t,[Ba.interactive]:i};return Ge("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Ba.sources,d),innerHTML:a,tabindex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:a,scrollWidth:d}=t,y=d>a,m=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,m&&(i=!0),this._isOpen){const _=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,_&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};b([S()],yr.prototype,"_isOpen",void 0),b([S()],yr.prototype,"_isInteractive",null),b([S()],yr.prototype,"_attributionTextOverflowed",void 0),b([S()],yr.prototype,"_prevSourceNodeHeight",void 0),b([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],yr.prototype,"attributionText",null),b([S()],yr.prototype,"iconClass",void 0),b([S()],yr.prototype,"icon",void 0),b([S()],yr.prototype,"itemDelimiter",void 0),b([S()],yr.prototype,"label",null),b([S(),Rp("esri/widgets/Attribution/t9n/Attribution")],yr.prototype,"messages",void 0),b([S()],yr.prototype,"view",null),b([S({type:pN})],yr.prototype,"viewModel",void 0),b([mo()],yr.prototype,"_toggleState",null),yr=b([B("esri.widgets.Attribution")],yr);const Lse=yr,Dse=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return vv(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return b([S()],t.prototype,"goToOverride",void 0),b([S()],t.prototype,"view",void 0),t=b([B("esri.widgets.support.GoTo")],t),t},Fse="esri.widgets.CompassViewModel";let Ju=class extends Dse(De){constructor(t){super(t),this._handles=new Mo,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(ke(()=>this.view,this._updateRotationWatcher,kt))}destroy(){ai(this._handles),this.view=null}get canShowNorth(){const t=this.get("view.spatialReference");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const t={};((i=this.view)==null?void 0:i.type)==="2d"?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){t!=null&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(t){this._handles.removeAll(),t&&this._handles.add(t.type==="2d"?ke(()=>t==null?void 0:t.rotation,this._updateForRotation,kt):ke(()=>t==null?void 0:t.camera,this._updateForCamera,kt))}};b([S({readOnly:!0})],Ju.prototype,"canShowNorth",null),b([S()],Ju.prototype,"orientation",void 0),b([S({readOnly:!0})],Ju.prototype,"state",null),b([S()],Ju.prototype,"view",void 0),Ju=b([B(Fse)],Ju);const fN=Ju,Ha={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let fn=class extends rc{constructor(t,i){super(t,i),this.iconClass=Ha.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new fN}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,r=i==="disabled",a=(i==="rotation"?"rotation":"compass")=="compass",d=r?-1:0,y={[Ha.disabled]:r,[Ha.interactive]:!r},m={[Ha.northIcon]:a,[Ha.rotationIcon]:!a},{messages:_}=this;return Ge("div",{bind:this,class:this.classes(Ha.base,y),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:d,"aria-label":_.reset,title:_.reset},Ge("span",{"aria-hidden":"true",class:this.classes(Ha.icon,m),styles:this._toRotationTransform(t)}),Ge("span",{class:Ha.text},_.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(t){return{transform:`rotateZ(${t.z}deg)`}}};b([S()],fn.prototype,"goToOverride",null),b([S()],fn.prototype,"iconClass",void 0),b([S()],fn.prototype,"icon",void 0),b([S()],fn.prototype,"label",null),b([S(),Rp("esri/widgets/Compass/t9n/Compass")],fn.prototype,"messages",void 0),b([S()],fn.prototype,"view",null),b([S({type:fN})],fn.prototype,"viewModel",void 0),b([mo()],fn.prototype,"_reset",null),fn=b([B("esri.widgets.Compass")],fn);const zse=fn,yc="esri-navigation-toggle",ys={base:`${yc} esri-widget`,button:`${yc}__button esri-widget--button`,activeButton:`${yc}__button--active`,panButton:`${yc}__button--pan`,rotateButton:`${yc}__button--rotate`,isLayoutHorizontal:`${yc}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Lc=class extends De{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.own(Yl(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t;return this.get("view.ready")&&((t=this.view)==null?void 0:t.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};b([S({readOnly:!0})],Lc.prototype,"state",null),b([S()],Lc.prototype,"navigationMode",void 0),b([S()],Lc.prototype,"view",void 0),Lc=b([B("esri.widgets.NavigationToggleViewModel")],Lc);const yN=Lc;let yn=class extends rc{constructor(t,i){super(t,i),this.iconClass=ys.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new yN}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}toggle(){return this.viewModel.toggle()}render(){const t=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[ys.disabled]:t,[ys.isLayoutHorizontal]:this.layout==="horizontal"},a={[ys.activeButton]:i},d={[ys.activeButton]:!i},y=t?-1:0,m=this.messages.toggle;return Ge("div",{bind:this,class:this.classes(ys.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:y,"aria-label":m,title:m},Ge("div",{class:this.classes(ys.button,ys.panButton,a)},Ge("span",{class:ys.panIcon})),Ge("div",{class:this.classes(ys.button,ys.rotateButton,d)},Ge("span",{class:ys.rotationIcon})))}_toggle(){this.toggle()}};b([S()],yn.prototype,"iconClass",void 0),b([S()],yn.prototype,"icon",void 0),b([S()],yn.prototype,"label",null),b([S({value:"vertical"})],yn.prototype,"layout",null),b([S(),Rp("esri/widgets/NavigationToggle/t9n/NavigationToggle")],yn.prototype,"messages",void 0),b([S()],yn.prototype,"view",null),b([S({type:yN})],yn.prototype,"viewModel",void 0),b([mo()],yn.prototype,"_toggle",null),yn=b([B("esri.widgets.NavigationToggle")],yn);const Vse=yn,M0={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Ko=class extends rc{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const t=this.enabled?0:-1,i={[M0.disabled]:!this.enabled,[M0.interactive]:this.enabled};return Ge("div",{bind:this,class:this.classes(M0.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},Ge("span",{"aria-hidden":"true",role:"presentation",class:this.classes(M0.icon,this.iconClass??"")}),Ge("span",{class:M0.iconText},this.title))}_triggerAction(){this.action.call(this)}};b([S()],Ko.prototype,"action",void 0),b([S()],Ko.prototype,"enabled",void 0),b([S()],Ko.prototype,"iconClass",void 0),b([S()],Ko.prototype,"icon",void 0),b([S()],Ko.prototype,"title",void 0),b([mo()],Ko.prototype,"_triggerAction",null),Ko=b([B("esri.widgets.IconButton")],Ko);const l$=Ko;let Dc=class extends De{get canZoomIn(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||t>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||t<i}};b([S({readOnly:!0})],Dc.prototype,"canZoomIn",null),b([S({readOnly:!0})],Dc.prototype,"canZoomOut",null),b([S()],Dc.prototype,"view",void 0),Dc=b([B("esri.widgets.Zoom.ZoomConditions2D")],Dc);const Gse=Dc;let Fc=class extends De{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};b([S({readOnly:!0})],Fc.prototype,"canZoomIn",null),b([S({readOnly:!0})],Fc.prototype,"canZoomOut",null),b([S()],Fc.prototype,"view",void 0),Fc=b([B("esri.widgets.Zoom.ZoomConditions3D")],Fc);const qse=Fc;let dl=class extends De{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new Gse({view:t}):t.type==="3d"&&(this._zoomConditions=new qse({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():Aw(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():Aw(t.goTo({zoomFactor:.5}))}};b([S()],dl.prototype,"_zoomConditions",void 0),b([S()],dl.prototype,"canZoomIn",null),b([S()],dl.prototype,"canZoomOut",null),b([S({readOnly:!0})],dl.prototype,"state",null),b([S()],dl.prototype,"view",null),dl=b([B("esri.widgets.Zoom.ZoomViewModel")],dl);const mN=dl,A0={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let ao=class extends rc{constructor(t,i){super(t,i),this.iconClass=A0.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new mN}initialize(){this._zoomInButton=new l$({action:this.zoomIn.bind(this),iconClass:A0.zoomInIcon}),this._zoomOutButton=new l$({action:this.zoomOut.bind(this),iconClass:A0.zoomOutIcon})}destroy(){this._zoomInButton=Wt(this._zoomInButton),this._zoomOutButton=Wt(this._zoomOutButton)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t=this.viewModel,i={[A0.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:a}=t;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=a;const{zoomIn:d,zoomOut:y}=this.messages;return this._zoomInButton.title=d,this._zoomOutButton.title=y,Ge("div",{class:this.classes(A0.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};b([S()],ao.prototype,"iconClass",void 0),b([S()],ao.prototype,"icon",void 0),b([S()],ao.prototype,"label",null),b([S({value:"vertical"})],ao.prototype,"layout",null),b([S(),Rp("esri/widgets/Zoom/t9n/Zoom")],ao.prototype,"messages",void 0),b([S()],ao.prototype,"view",null),b([S({type:mN})],ao.prototype,"viewModel",void 0),ao=b([B("esri.widgets.Zoom")],ao);const Use=ao;function Bse(e){return(e==null?void 0:e.view)!==void 0}let wm=class extends Hie{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const a=this._find(r),d=a==null?void 0:a.widget;Bse(d)&&(d.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([ke(()=>this.components,this._componentsWatcher,kt),ke(()=>this.view,this._updateViewAwareWidgets,kt)])}_add(t,i,r,a,d){let y=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;y=this._createComponent(t)}super._add(y,i,r,a,d)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new bm({id:t,node:i})}_createWidget(t){const{view:i}=this;switch(t){case"attribution":return new Lse({view:i});case"compass":return new zse({view:i});case"navigation-toggle":return new Vse({view:i});case"zoom":return new Use({view:i})}}};b([S()],wm.prototype,"components",void 0),wm=b([B("esri.views.ui.DefaultUI")],wm);const gN=wm;let _m=class extends gN{constructor(t){super(t),this.components=["attribution","zoom"]}};b([S()],_m.prototype,"components",void 0),_m=b([B("esri.views.ui.2d.DefaultUI2D")],_m);const vN=_m;var m5;let Sm=m5=class extends pe{constructor(e){super(e),this.color=new et([0,0,0,1])}clone(){return new m5(re({color:this.color}))}};b([S({type:et,json:{write:!0}})],Sm.prototype,"color",void 0),Sm=m5=b([B("esri.webmap.background.ColorBackground")],Sm);const Hse=Sm;let bN,wN,_N,SN,xN,$N;async function Wse(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:a,Stage:d}]=await Promise.all([be(()=>import("./webglDeps-477848d3.js"),["assets/webglDeps-477848d3.js","assets/VertexArrayObject-2ee58a76.js","assets/Texture-1c9e1f26.js","assets/enums-b14466b3.js","assets/ProgramTemplate-364b0a9c.js","assets/programUtils-9de6691a.js","assets/NestedMap-1b5db22e.js"]),be(()=>import("./mapViewDeps-d93e19d2.js"),["assets/mapViewDeps-d93e19d2.js","assets/CIMResourceManager-96a01e5c.js","assets/fontUtils-b3b35a0e.js","assets/Rasterizer-c7b37ef1.js","assets/cimAnalyzer-1d026d97.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-d75b7bae.js","assets/alignmentUtils-ae955d28.js","assets/definitions-8a2650b8.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fc51302a.js","assets/floatRGBA-257ab887.js","assets/rasterizingUtils-81a80b5f.js","assets/imageutils-d5fd8f85.js","assets/Container-880a32cf.js","assets/EffectView-d311bb0b.js","assets/enums-b14466b3.js","assets/Texture-1c9e1f26.js","assets/BufferPool-715c9a7b.js","assets/AttributeStoreView-b54ae26e.js","assets/TiledDisplayObject-782c6658.js","assets/color-a52b1098.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1d369137.js","assets/VertexArrayObject-2ee58a76.js","assets/ProgramTemplate-364b0a9c.js","assets/GeometryUtils-6a0ba467.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-48db4b31.js","assets/visualVariablesUtils-466359eb.js","assets/ExpandedCIM-8eeb3a03.js","assets/util-b6d3787a.js","assets/enums-fb086c25.js","assets/programUtils-9de6691a.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-9da7f876.js","assets/Matcher-a3a88a59.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-19f91545.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f5c4cd6d.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-a0dacfd3.js","assets/arcadeTimeUtils-38644e65.js","assets/executionError-c92d3b85.js","assets/projectionSupport-c10c4c97.js","assets/json-48e3ea08.js","assets/RenderingContext-ed41c065.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-eebd3137.js","assets/normalizeUtilsSync-6d4e5e78.js","assets/GraphicContainer-b6aeb656.js","assets/BaseGraphicContainer-70d65058.js","assets/FeatureContainer-956ec1c3.js","assets/TileContainer-af6e173d.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-1a08b208.js"])]);wN=e,_N=t,SN=i,xN=r,$N=a,bN=d}const u$=160,h$={flipY:!0,premultipliedAlpha:!0};let Be=class extends qY(SX(lX(hQ))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Ep({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new Mr({constraints:new iC({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new Mee(this),this._pePromise=null,this.floors=new Le,this.highlightOptions=new xC,this.inputManager=new lie({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new $C,this.type="2d",this.ui=new vN,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ke(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(u$)},t0),this.on("resize",t=>this.stateManager.resize(t.width,t.height)),ke(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),fK()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Wt(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new fie(this.featuresTilingScheme)}get constraintsInfo(){var i,r;const e=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,t=this.spatialReference;return{lods:(r=e==null?void 0:e.spatialReference)!=null&&r.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:i,viewpoint:r,extent:a}=this;let d=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!a&&(t!=null&&t.effectiveLODs||(d=-1),(!i||e===0&&d===-1)&&(!r||r.targetGeometry==null||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!ec()||(this._pePromise||(this._pePromise=Ql().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!$a(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var r;e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return Kse(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t==null||t.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){this.stateManager.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,i,r;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0));if(le("esri-2d-log-updating")){const a=this.allLayerViews.reduce((d,y)=>({...d,[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(a)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),S6(()=>this.ready,t).then(()=>{var a;const i={animate:!0,...t},r=uee(e,this);return(a=this.animation)==null||a.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});fe.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=v8(e)?g8(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,a=!1,d=null,y=null;t!=null&&t.include?p$(t.include,c$(this,M=>r.add(M),M=>{d||(d=new Set),d.add(M)},M=>r.add(M),()=>a=!0)):(a=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&p$(t.exclude,c$(this,M=>r.delete(M),M=>{y||(y=new Set),y.add(M)}));const m=this.allLayerViews.filter(M=>!M.suspended&&r.has(M)).reverse(),_=this.toMap(i);let $=[...a?this.graphicsView.hitTest(_).map(M=>({type:"graphic",graphic:M,layer:null,mapPoint:_})):[],...await Promise.all(m.map(M=>M.hitTest(_,i)).toArray())].filter(Oh).flat().filter(Oh);return d&&($=$.filter(M=>!("graphic"in M)||!M.graphic||(d==null?void 0:d.has(g5(M.graphic))))),y&&($=$.filter(M=>!("graphic"in M)||!M.graphic||!(y!=null&&y.has(g5(M.graphic))))),{screenPoint:i,results:$}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return gie(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},h$)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return vie(i,h$)}_createScreenshotPlan(e){e=e??{};const t=this.supersampleScreenshotsEnabled?Math.min(4,Sie(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(d=>{const y=this.allLayerViews.find(m=>m.layer.id===d.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:r,quality:a}=_ie(e.format,e.quality);return mie(e,t,this.size,this.padding,r,a,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=v8(e)?g8(this,e):e;return this.stateManager.toMap(t)}toScreen(e){return this.stateManager.toScreen(e)}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return T8.hasLayerViewModule(e)}importLayerView(e){return T8.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(fe.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=Rie(this.type);return le("safari")&&le("safari")<9&&(e=new se("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:le("safari")})),e!=null?(fe.getLogger(this).warn("#validate()",e.message),Promise.reject(e)):Wse()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Q9),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,a=i.then(()=>{r()&&(this.animation=null)}).catch(y=>{throw r()&&(t&&!t.done&&(t.stop(),this.frameTask.animationInProgress=!1),this.animation=null),y}),d=new Promise(y=>y(a));return t.when().catch(()=>{r()&&d.cancel&&d.cancel()}),d}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,a=e.then(d=>{if(Jt(t),i!==this._gotoTask)throw new se("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=d,r.finish()});return this._cancellableGoTo(i,r,a)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<u$&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var F;const{constraints:e,initialExtent:t,map:i,padding:r,size:a}=this;if(!e)return null;const d=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),m=d==null?void 0:d.viewpoint,_=((F=m==null?void 0:m.targetGeometry)==null?void 0:F.extent)??t,$=_==null?void 0:_.center,M=(m==null?void 0:m.rotation)??0,A=(m==null?void 0:m.scale)||_&&fp(_,[a[0]-r.left-r.right,a[1]-r.top-r.bottom]),P=y.center??$,j=y.rotation??M,L=y.scale??A;return P&&L?new bo({targetGeometry:P,scale:L,rotation:j}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const a=e.then(d=>{if(Jt(t),i!==this._gotoTask)throw new se("view:goto-interrupted","Goto was interrupted");return r.update(d),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,a)}_startup(){var y;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const t=new bN(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=t,this._magnifierView=new $N,this._magnifierView.magnifier=this.magnifier;const i=new SN({view:this});this._set("labelManager",i);const r=new Eee({view:this});this._set("animationManager",r);const a=new xN({view:this,animationManager:r});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",m=>this.fatalError=m.error),ke(()=>this.stationary,m=>t.stationary=m,aa),ke(()=>this.background,m=>{t.backgroundColor=m==null?void 0:m.color,this._magnifierView.backgroundColor=m==null?void 0:m.color},aa),ke(()=>this.magnifier,m=>this._magnifierView.magnifier=m,aa),ke(()=>this.renderingOptions,m=>t.renderingOptions=m,aa),ke(()=>this.highlightOptions,m=>t.highlightOptions=m,aa),ke(()=>this.state.id,()=>t.state=this.state,aa)],"map-view"),this._updateStageChildren();const d=this._resolveWhenReady;this._resolveWhenReady=[],d.forEach(m=>m(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Dee(VY.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new wN({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new _N(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Be.type="2d",b([S({readOnly:!0})],Be.prototype,"animationManager",void 0),b([S({constructOnly:!0})],Be.prototype,"deactivatedWebGLExtensions",void 0),b([S({constructOnly:!0})],Be.prototype,"debugWebGLExtensions",void 0),b([S({readOnly:!0})],Be.prototype,"featuresTilingScheme",void 0),b([S({readOnly:!0})],Be.prototype,"fullOpacity",void 0),b([S({readOnly:!0})],Be.prototype,"graphicsTileStore",null),b([S()],Be.prototype,"graphicsView",void 0),b([S()],Be.prototype,"stateManager",void 0),b([S()],Be.prototype,"constraintsInfo",null),b([S({readOnly:!0})],Be.prototype,"state",null),b([S()],Be.prototype,"initialExtentRequired",null),b([S()],Be.prototype,"labelManager",void 0),b([S({readOnly:!0})],Be.prototype,"resourceManager",null),b([S({readOnly:!0})],Be.prototype,"textureManager",null),b([S({readOnly:!0})],Be.prototype,"mapViewNavigation",void 0),b([S({constructOnly:!0})],Be.prototype,"renderCanvas",void 0),b([S()],Be.prototype,"renderingOptions",void 0),b([S({readOnly:!0})],Be.prototype,"rendering",void 0),b([S({constructOnly:!0})],Be.prototype,"supersampleScreenshotsEnabled",void 0),b([S({readOnly:!0})],Be.prototype,"supportsGround",void 0),b([S()],Be.prototype,"_stationaryTimer",void 0),b([S()],Be.prototype,"_defaultsFromMapSettings",null),b([S()],Be.prototype,"_pePromise",void 0),b([S({readOnly:!0})],Be.prototype,"typeSpecificPreconditionsReady",null),b([S()],Be.prototype,"animation",null),b([S({type:Hse})],Be.prototype,"background",null),b([S()],Be.prototype,"center",null),b([S({type:iC})],Be.prototype,"constraints",null),b([S()],Be.prototype,"extent",null),b([S()],Be.prototype,"floors",void 0),b([S({type:xC})],Be.prototype,"highlightOptions",void 0),b([S({readOnly:!0})],Be.prototype,"inputManager",void 0),b([S()],Be.prototype,"map",void 0),b([S()],Be.prototype,"padding",null),b([S()],Be.prototype,"resizeAlign",null),b([S({readOnly:!0})],Be.prototype,"resolution",null),b([S()],Be.prototype,"rotation",null),b([S()],Be.prototype,"scale",null),b([S({constructOnly:!0})],Be.prototype,"spatialReferenceLocked",void 0),b([S()],Be.prototype,"stationary",null),b([S({type:$C,readOnly:!0})],Be.prototype,"timeline",void 0),b([S({readOnly:!0})],Be.prototype,"type",void 0),b([S({readOnly:!0})],Be.prototype,"updating",null),b([S()],Be.prototype,"viewpoint",null),b([S()],Be.prototype,"zoom",null),b([S({readOnly:!0})],Be.prototype,"navigating",null),b([S(),Tt(e=>e instanceof gN?e:Ch(vN,e))],Be.prototype,"ui",void 0),Be=b([B("esri.views.MapView")],Be);const Jse=Be;function g5(e){var i,r;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function c$(e,t,i,r,a){return d=>{if(d instanceof Us){if(d.layer===e)a==null||a();else{const y=e.allLayerViews.find(m=>m.layer===d.layer);y&&(r==null||r(y))}i(g5(d))}else{const y=e.allLayerViews.find(m=>m.layer===d);y&&t(y)}}}function p$(e,t){if(e)if(Ym(e))for(const i of e)if(Ym(i))for(const r of i)t(r);else t(i);else t(e)}function Kse(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}var v5;let md=v5=class extends pe{constructor(e){super(e),this.name=null,this.code=null}clone(){return new v5({name:this.name,code:this.code})}};b([S({type:String,json:{write:!0}})],md.prototype,"name",void 0),b([S({type:[String,Number],json:{write:!0}})],md.prototype,"code",void 0),md=v5=b([B("esri.layers.support.CodedValue")],md);const Yse=new ut({inherited:"inherited",codedValue:"coded-value",range:"range"});let gd=class extends pe{constructor(t){super(t),this.name=null,this.type=null}};b([S({type:String,json:{write:!0}})],gd.prototype,"name",void 0),b([je(Yse)],gd.prototype,"type",void 0),gd=b([B("esri.layers.support.Domain")],gd);const p2=gd;var b5;let vd=b5=class extends p2{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new b5({codedValues:re(this.codedValues),name:this.name})}};b([S({type:[md],json:{write:!0}})],vd.prototype,"codedValues",void 0),b([je({codedValue:"coded-value"})],vd.prototype,"type",void 0),vd=b5=b([B("esri.layers.support.CodedValueDomain")],vd);const TN=vd;var w5;let xm=w5=class extends p2{constructor(e){super(e),this.type="inherited"}clone(){return new w5}};b([je({inherited:"inherited"})],xm.prototype,"type",void 0),xm=w5=b([B("esri.layers.support.InheritedDomain")],xm);const IN=xm;var _5;let zc=_5=class extends p2{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new _5({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};b([S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],zc.prototype,"maxValue",void 0),b([S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],zc.prototype,"minValue",void 0),b([je({range:"range"})],zc.prototype,"type",void 0),zc=_5=b([B("esri.layers.support.RangeDomain")],zc);const EN=zc,MN={key:"type",base:p2,typeMap:{range:EN,"coded-value":TN,inherited:IN}};function tS(e){if(!e||!e.type)return null;switch(e.type){case"range":return EN.fromJSON(e);case"codedValue":return TN.fromJSON(e);case"inherited":return IN.fromJSON(e)}return null}const Zse=new ut({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var S5;const Xse=new ut({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let mr=S5=class extends pe{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?Xse.fromJSON(i.fieldValueType):null}clone(){return new S5({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};b([S({type:String,json:{write:!0}})],mr.prototype,"alias",void 0),b([S({type:[String,Number],json:{write:{allowNull:!0}}})],mr.prototype,"defaultValue",void 0),b([S()],mr.prototype,"description",void 0),b([me("description")],mr.prototype,"readDescription",null),b([S({types:MN,json:{read:{reader:tS},write:!0}})],mr.prototype,"domain",void 0),b([S({type:Boolean,json:{write:!0}})],mr.prototype,"editable",void 0),b([S({type:Ot,json:{write:!0}})],mr.prototype,"length",void 0),b([S({type:String,json:{write:!0}})],mr.prototype,"name",void 0),b([S({type:Boolean,json:{write:!0}})],mr.prototype,"nullable",void 0),b([je(Zse)],mr.prototype,"type",void 0),b([S()],mr.prototype,"valueType",void 0),b([me("valueType",["description"])],mr.prototype,"readValueType",null),b([S({type:Boolean,json:{read:!1}})],mr.prototype,"visible",void 0),mr=S5=b([B("esri.layers.support.Field")],mr);const d2=mr;var x5;let ca=x5=class extends pe{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new x5({mapLayerId:e,gdbVersion:t})}};b([je({mapLayer:"map-layer"})],ca.prototype,"type",void 0),b([S({type:Ot,json:{write:!0}})],ca.prototype,"mapLayerId",void 0),b([S({type:String,json:{write:!0}})],ca.prototype,"gdbVersion",void 0),ca=x5=b([B("esri.layers.support.source.MapLayerSource")],ca);var $5;let Yo=$5=class extends pe{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:a}=this,d={workspaceId:e,query:t,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:a};return new $5(d)}};b([je({queryTable:"query-table"})],Yo.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Yo.prototype,"workspaceId",void 0),b([S({type:String,json:{write:!0}})],Yo.prototype,"query",void 0),b([S({type:String,json:{write:!0}})],Yo.prototype,"oidFields",void 0),b([S({type:Xe,json:{write:!0}})],Yo.prototype,"spatialReference",void 0),b([je(Tg)],Yo.prototype,"geometryType",void 0),Yo=$5=b([B("esri.layers.support.source.QueryTableDataSource")],Yo);var T5;let Vc=T5=class extends pe{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new T5({workspaceId:e,dataSourceName:t})}};b([je({raster:"raster"})],Vc.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Vc.prototype,"dataSourceName",void 0),b([S({type:String,json:{write:!0}})],Vc.prototype,"workspaceId",void 0),Vc=T5=b([B("esri.layers.support.source.RasterDataSource")],Vc);var I5;let Ku=I5=class extends pe{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new I5({workspaceId:e,gdbVersion:t,dataSourceName:i})}};b([je({table:"table"})],Ku.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ku.prototype,"workspaceId",void 0),b([S({type:String,json:{write:!0}})],Ku.prototype,"gdbVersion",void 0),b([S({type:String,json:{write:!0}})],Ku.prototype,"dataSourceName",void 0),Ku=I5=b([B("esri.layers.support.source.TableDataSource")],Ku);var E5,M5;const Qse=Sr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Qr=E5=class extends pe{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return d$()(e,t,i)}castLeftTableSource(e){return _o(A5(),e)}readRightTableSource(e,t,i){return d$()(e,t,i)}castRightTableSource(e){return _o(A5(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:a}=this,d={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:a};return new E5(d)}};b([je({joinTable:"join-table"})],Qr.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Qr.prototype,"leftTableKey",void 0),b([S({type:String,json:{write:!0}})],Qr.prototype,"rightTableKey",void 0),b([S({json:{write:!0}})],Qr.prototype,"leftTableSource",void 0),b([me("leftTableSource")],Qr.prototype,"readLeftTableSource",null),b([Tt("leftTableSource")],Qr.prototype,"castLeftTableSource",null),b([S({json:{write:!0}})],Qr.prototype,"rightTableSource",void 0),b([me("rightTableSource")],Qr.prototype,"readRightTableSource",null),b([Tt("rightTableSource")],Qr.prototype,"castRightTableSource",null),b([je(Qse)],Qr.prototype,"joinType",void 0),Qr=E5=b([B("esri.layers.support.source.JoinTableDataSource")],Qr);let Fb=null;function d$(){return Fb||(Fb=Gp({types:A5()})),Fb}let zb=null;function A5(){return zb||(zb={key:"type",base:null,typeMap:{"data-layer":Pr,"map-layer":ca}}),zb}const ene={key:"type",base:null,typeMap:{"join-table":Qr,"query-table":Yo,raster:Vc,table:Ku}};let Pr=M5=class extends pe{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new M5({fields:e,dataSource:t})}};b([je({dataLayer:"data-layer"})],Pr.prototype,"type",void 0),b([S({type:[d2],json:{write:!0}})],Pr.prototype,"fields",void 0),b([S({types:ene,json:{write:!0}})],Pr.prototype,"dataSource",void 0),Pr=M5=b([B("esri.layers.support.source.DataLayerSource")],Pr),Pr.from=yi(Pr);let Yu=class extends Kt(pe){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};b([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Yu.prototype,"onFields",void 0),b([S({type:String,json:{write:!0}})],Yu.prototype,"operator",void 0),b([S({type:String,json:{write:!0}})],Yu.prototype,"searchTerm",void 0),b([S({type:String,json:{write:!0}})],Yu.prototype,"searchType",void 0),Yu=b([B("esri.rest.support.FullTextSearch")],Yu);const tne=Yu;var k5;const f$=new ut({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let mn=k5=class extends pe{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=re(e))}clone(){return new k5({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:re(this.statisticParameters)})}};b([S({type:Number,json:{write:!0}})],mn.prototype,"maxPointCount",void 0),b([S({type:Number,json:{write:!0}})],mn.prototype,"maxRecordCount",void 0),b([S({type:Number,json:{write:!0}})],mn.prototype,"maxVertexCount",void 0),b([S({type:String,json:{write:!0}})],mn.prototype,"onStatisticField",void 0),b([S({type:String,json:{write:!0}})],mn.prototype,"outStatisticFieldName",void 0),b([S({type:String,json:{read:{source:"statisticType",reader:f$.read},write:{target:"statisticType",writer:f$.write}}})],mn.prototype,"statisticType",void 0),b([S({type:Object})],mn.prototype,"statisticParameters",void 0),b([Se("statisticParameters")],mn.prototype,"writeStatisticParameters",null),mn=k5=b([B("esri.rest.support.StatisticDefinition")],mn);const ine=mn;var mp;const rne=new ut({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),sne=new ut({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ve=mp=class extends pe{static from(e){return Ch(mp,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const a=e[r];Array.isArray(a)?i[r]=a.map(d=>d instanceof Date?d.getTime():d):a instanceof Date?i[r]=a.getTime():i[r]=a}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new mp(re({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ve.MAX_MAX_RECORD_COUNT_FACTOR=5,b([S({json:{write:!0}})],Ve.prototype,"aggregateIds",void 0),b([S({type:Boolean,json:{write:!0}})],Ve.prototype,"cacheHint",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"compactGeometryEnabled",void 0),b([S({json:{write:!0}})],Ve.prototype,"datumTransformation",void 0),b([Tt("datumTransformation")],Ve.prototype,"castDatumTransformation",null),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"defaultSpatialReferenceEnabled",void 0),b([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Ve.prototype,"distance",void 0),b([S({type:Pr,json:{write:!0}})],Ve.prototype,"dynamicDataSource",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"formatOf3DObjects",void 0),b([S({type:[tne],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ve.prototype,"fullText",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"gdbVersion",void 0),b([S({types:nu,json:{read:_a,write:!0}})],Ve.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],Ve.prototype,"geometryPrecision",void 0),b([S({type:[String],json:{write:!0}})],Ve.prototype,"groupByFieldsForStatistics",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"having",void 0),b([S({type:Date})],Ve.prototype,"historicMoment",void 0),b([Se("historicMoment")],Ve.prototype,"writeHistoricMoment",null),b([S({type:Number,json:{write:!0}})],Ve.prototype,"maxAllowableOffset",void 0),b([S({type:Number,cast:e=>e<1?1:e>mp.MAX_MAX_RECORD_COUNT_FACTOR?mp.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Ve.prototype,"maxRecordCountFactor",void 0),b([S({type:["xyFootprint"],json:{write:!0}})],Ve.prototype,"multipatchOption",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ve.prototype,"num",void 0),b([S({json:{write:!0}})],Ve.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],Ve.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],Ve.prototype,"outFields",void 0),b([S({type:Xe,json:{name:"outSR",write:!0}})],Ve.prototype,"outSpatialReference",void 0),b([S({type:[ine],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ve.prototype,"outStatistics",void 0),b([S({json:{write:!0}})],Ve.prototype,"parameterValues",void 0),b([Se("parameterValues")],Ve.prototype,"writeParameterValues",null),b([S({type:Ze,json:{write:!0}})],Ve.prototype,"pixelSize",void 0),b([S({type:_C,json:{write:!0}})],Ve.prototype,"quantizationParameters",void 0),b([S({type:[Object],json:{write:!0}})],Ve.prototype,"rangeValues",void 0),b([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ve.prototype,"relationParameter",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"resultType",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnCentroid",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnDistinctValues",void 0),b([S({type:Boolean,json:{default:!0,write:!0}})],Ve.prototype,"returnExceededLimitFeatures",void 0),b([S({type:Boolean,json:{write:!0}})],Ve.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnQueryGeometry",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ve.prototype,"returnZ",void 0),b([S({type:Xe,json:{write:!0}})],Ve.prototype,"sourceSpatialReference",void 0),b([je(rne,{ignoreUnknown:!1,name:"spatialRel"})],Ve.prototype,"spatialRelationship",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Ve.prototype,"start",void 0),b([Se("start"),Se("num")],Ve.prototype,"writeStart",null),b([S({type:String,json:{write:!0}})],Ve.prototype,"sqlFormat",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"text",void 0),b([S({type:Ws,json:{write:!0}})],Ve.prototype,"timeExtent",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"timeReferenceUnknownClient",void 0),b([je(sne,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],Ve.prototype,"units",void 0),b([S({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Ve.prototype,"where",void 0),b([Se("where")],Ve.prototype,"writeWhere",null),Ve=mp=b([B("esri.rest.support.Query")],Ve);const sr=Ve;function nne(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const d=Object.getOwnPropertyDescriptor(r,a);d&&Object.defineProperty(e,a,d.get?d:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var $m={exports:{}};$m.exports,function(e,t){function i(){function a(h){if(typeof h=="number")return U.Uc.ah(h);if(h==null)return null;if(Ys[h]!=null)return U.Uc.ah(Ys[h]);throw Error("Unrecognised Unit Type")}function d(h){if(typeof h=="number")return U.Uc.ah(h);if(h==null)return null;if(T1[h]!=null)return U.Uc.ah(T1[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function m(h,k,v,u){if(v==null||v.B())return null;switch(v.K()){case U.sn.Point:return h.exportPoint(k,v,u);case U.sn.Polygon:return h.exportPolygon(k,v,u);case U.sn.Polyline:return h.exportPolyline(k,v,u);case U.sn.MultiPoint:return h.exportMultipoint(k,v,u);case U.sn.Envelope:return h.exportExtent(k,v,u)}return null}function _(h,k,v,u){if(v.K()!==U.sn.Point)throw Error("Geometry not Point");return h.exportPoint(k,v,u)}function $(h,k,v){return h.convertToGEGeometry(k,v)}function M(h){var k=h.wkid;h=h.wkt;var v=ko.get(k||h);return v==null&&(k!==-1&&k!=null?(v=U.Gg.create(k),ko.set(k,v)):h&&(v=U.Gg.lP(h),ko.set(h,v)),Pa.has(k||h)&&v.QW(Pa.get(k||h))),v}function A(h){var k;if(h==null)return null;var v=M(h);return h=v.Id(),v=v.Mn(),(k={}).tolerance=v,k.unitType=h==null?-1:h.pd,k.unitID=h==null?-1:h.Fc(),k.unitBaseFactor=h==null?0:h.ci,k.unitSquareDerivative=h==null?0:U.Uc.WF(h).Fc(),k}function P(h,k,v,u){return v==null?null:(v=U.ac.clip($(h,we,v),$(h,we,u),M(k)),m(h,we,v,k))}function j(h,k,v,u){v=U.ac.fl($(h,we,v),$(h,we,u),M(k)),u=[];for(var o=0;o<v.length;o++)u.push(m(h,we,v[o],k));return u}function L(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.contains($(h,we,v),$(h,we,u),M(k))}function F(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.wP($(h,we,v),$(h,we,u),M(k))}function V(h,k,v,u,o){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.ub($(h,we,v),$(h,we,u),M(k),a(o))}function J(h,k,v,u){return!(v==null&&u!=null||u==null&&v!=null)&&U.ac.Nb($(h,we,v),$(h,we,u),M(k))}function Q(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.OS($(h,we,v),$(h,we,u),M(k))}function Y(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.touches($(h,we,v),$(h,we,u),M(k))}function te(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.mY($(h,we,v),$(h,we,u),M(k))}function oe(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.OP($(h,we,v),$(h,we,u),M(k))}function ae(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.yU($(h,we,v),$(h,we,u),M(k))}function de(h,k,v,u,o){if(v==null||u==null)throw Error("Illegal Argument Exception");return U.ac.tB($(h,we,v),$(h,we,u),M(k),o)}function ve(h,k,v){if(v==null)throw Error("Illegal Argument Exception");return U.ac.ZS($(h,we,v),M(k))}function Ie(h,k,v){if(v==null)throw Error("Illegal Argument Exception");return v=U.ac.$B($(h,we,v),M(k)),m(h,we,v,k)}function Oe(h,k,v,u){if(u===void 0&&(u=!1),v==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){var o=u,s=[];for(u=0;u<v.length;u++)s.push($(h,we,v[u]));for(v=U.ac.eP(s,o),o=Array(v.length),u=0;u<v.length;u++)o[u]=m(h,we,v[u],k);return o}return u=U.ac.dP($(h,we,v),M(k)),m(h,we,u,k)}function Ne(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],s=0;s<v.length;s++)o.push($(h,we,v[s]));for(v=U.ac.LP(o,$(h,we,u),M(k)),u=Array(v.length),s=0;s<v.length;s++)u[s]=m(h,we,v[s],k);return u}return s=U.ac.km($(h,we,v),$(h,we,u),M(k)),m(h,we,s,k)}function Re(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],s=0;s<v.length;s++)o.push($(h,we,v[s]));for(v=U.ac.RX(o,$(h,we,u),M(k)),u=Array(v.length),s=0;s<v.length;s++)u[s]=m(h,we,v[s],k);return u}return s=U.ac.gp($(h,we,v),$(h,we,u),M(k)),m(h,we,s,k)}function We(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],s=0;s<v.length;s++)o.push($(h,we,v[s]));for(v=U.ac.MS(o,$(h,we,u),M(k)),u=Array(v.length),s=0;s<v.length;s++)u[s]=m(h,we,v[s],k);return u}return s=U.ac.Fa($(h,we,v),$(h,we,u),M(k)),m(h,we,s,k)}function Pe(h,k,v,u){if(v==null)return null;var o=[];if(Array.isArray(v)){if(v.length===0)return null;for(u=0;u<v.length;u++)o.push($(h,we,v[u]))}else o.push($(h,we,v)),u!=null&&o.push($(h,we,u));return m(h,we,U.ac.fY(o,M(k)),k)}function Gt(h,k,v,u,o,s,n,l){var c=0;if(s!=null)switch(s){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(v)){if(v==null)h=null;else if(v.length===0)h=[];else{var p=[];for(s=0;s<v.length;s++)p.push($(h,we,v[s]));for(v=U.ac.wU(p,M(k),u,c,n,l,a(o)),u=Array(v.length),s=0;s<v.length;s++)u[s]=m(h,we,v[s],k);h=u}return h}return v=U.ac.offset($(h,we,v),M(k),u,c,n,l,a(o)),m(h,we,v,k)}function gi(h,k,v,u,o,s){if(s===void 0&&(s=!1),Array.isArray(v)){if(!Array.isArray(u)){for(var n=[],l=0;l<v.length;l++)n.push(u);u=n}if(u.length!=v.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(l=0;l<v.length;l++)u[l]===void 0?n.push(c):(n.push(u[l]),c=u[l]);u=n}return ht(h,k,v,u,o,!1,s,"geodesic",NaN)}return v=U.ac.buffer($(h,we,v),M(k),u,a(o),!1,0,NaN),m(h,we,v,k)}function qt(h,k,v,u,o,s,n,l){if(Array.isArray(v)){if(!Array.isArray(u)){for(var c=[],p=0;p<v.length;p++)c.push(u);u=c}if(u.length!==v.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(p=0;p<v.length;p++)u[p]===void 0?c.push(f):(c.push(u[p]),f=u[p]);u=c}return ht(h,k,v,u,o,!0,s,n,l)}return n===void 0&&(n=NaN),v=U.ac.buffer($(h,we,v),M(k),u,a(o),!0,y(s),n),m(h,we,v,k)}function ht(h,k,v,u,o,s,n,l,c){if(c===void 0&&(c=NaN),v==null)return null;if(v.length===0)return[];for(var p=[],f=0;f<v.length;f++)p.push($(h,we,v[f]));for(v=U.ac.HN(p,M(k),u,a(o),s,n,y(l),c),u=Array(v.length),f=0;f<v.length;f++)u[f]=m(h,we,v[f],k);return u}function xr(h,k,v,u,o){var s;return o===void 0&&(o=!0),v=U.ac.iz($(h,we,v),$(h,we,u),o),(s={}).coordinate=_(h,we,v.az(),k),s.distance=v.cz(),s.isRightSide=v.Nz(),s.vertexIndex=v.Va(),s.isEmpty=v.B(),s}function w1(h,k,v,u){var o;return v=U.ac.jz($(h,we,v),$(h,we,u)),(o={}).coordinate=_(h,we,v.az(),k),o.distance=v.cz(),o.isRightSide=v.Nz(),o.vertexIndex=v.Va(),o.isEmpty=v.B(),o}function fu(h,k,v,u,o,s){var n;for(v=U.ac.kz($(h,we,v),$(h,we,u),o,s),u=[],o=0;o<v.length;o++)v[o].B()===!1&&u.push(((n={}).coordinate=_(h,we,v[o].az(),k),n.distance=v[o].cz(),n.isRightSide=v[o].Nz(),n.vertexIndex=v[o].Va(),n.isEmpty=v[o].B(),n));return u}function h0(h,k,v,u,o,s){return v=U.ac.LQ($(h,we,v),M(k),u,o,a(s)),m(h,we,v,k)}function _1(h,k,v,u,o){return v=U.ac.Sr($(h,we,v),M(k),u,a(o)),m(h,we,v,k)}function E2(h,k,v,u,o,s){return s===void 0&&(s=0),v=U.ac.Ry($(h,we,v),M(k),u,a(o),s),m(h,we,v,k)}function M2(h,k,v,u){if(v==null)throw Error("Illegal Argument Exception");return U.ac.EU($(h,we,v),M(k),d(u))}function A2(h,k,v,u){if(v==null)throw Error("Illegal Argument Exception");return U.ac.FU($(h,we,v),M(k),a(u))}function S1(h,k,v,u,o){if(v==null)throw Error("Illegal Argument Exception");return U.ac.RQ($(h,we,v),M(k),d(u),y(o))}function k2(h,k,v,u,o){if(v==null)throw Error("Illegal Argument Exception");return U.ac.UQ($(h,we,v),M(k),a(u),y(o))}function O2(h){U.IL.bind(h)}function P2(h,k,v,u,o){var s=null,n=null;if(u){if(!o)throw U.i.O("AOI missing Spatial Reference");s=$(h,we,u),n=M(o).hh()}return(h=U.iu.SR(M(k).hh(),M(v).hh(),s,n))!==null?h:null}function C2(h,k,v,u,o){var s=null,n=null;if(u){if(!o)throw U.i.O("AOI missing Spatial Reference");s=$(h,we,u),n=M(o).hh()}return U.iu.TR(M(k).hh(),M(v).hh(),s,n)}function N2(h,k,v,u,o,s){if(o===void 0&&(o=null),s===void 0&&(s=null),s){var n=new U.tC;n.Xu=s.densificationStep,n.Lr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&n.KW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&n.LW(s.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(k.length===0)return[];if(o){if(!(s=o.getCachedGeTransformation(v,u)))e:{if(s=o,o=null,s){var l=s.getGTListEntry();if(l!==null){o=new U.rC(null);for(var c=0,p=l.steps;c<p.length;c++){l=p[c];var f=new U.Cx(l.geogtran);l.isInverse&&f.Lz(),o.add(f)}n=U.xr.Pr(M(v).hh(),M(u).hh(),o,n),s.assignCachedGe(v,u,n),s=n;break e}}if(o===null&&s&&s.steps&&0<s.steps.length){for(o=new U.rC(null),c=0,p=s.steps;c<p.length;c++)(l=p[c]).wkid!=-1&&l.wkid!=null?o.add(U.Cx.create(l.wkid,l.isInverse)):o.add(U.Cx.pP(l.wkt,l.isInverse));n=U.xr.Pr(M(v).hh(),M(u).hh(),o,n),s.assignCachedGe(v,u,n),s=n}else s=U.xr.Pr(M(v).hh(),M(u).hh(),o,n)}for(v=[],o=0;o<k.length;o++)n=k[o],v.push(x1(h,n,u,s))}else for(s=U.xr.Pr(M(v).hh(),M(u).hh(),null),v=[],o=0;o<k.length;o++)n=k[o],v.push(x1(h,n,u,s));return v}function x1(h,k,v,u){return k=U.ac.Bh($(h,we,k),u),m(h,we,k,v)}function j2(h,k){h!=null&&(h=h.wkid||h.wkt,Pa.has(h),Pa.set(h,k),ko.has(h)&&ko.delete(h))}function R2(h){h!=null&&(h=h.wkid||h.wkt,Pa.has(h)&&(Pa.delete(h),ko.has(h)&&ko.delete(h)))}function L2(h,k,v,u){if(v==null||u==null)return[];var o=[],s=0;for(v=U.ac.LS($(h,we,v),$(h,we,u),M(k))||[];s<v.length;s++)o.push(m(h,we,v[s],k));return o}var Ii,U,or,$1,yt=this&&this.__extends||function(){function h(k,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var s in o)o.hasOwnProperty(s)&&(u[s]=o[s])})(k,v)}return function(k,v){function u(){this.constructor=k}h(k,v),k.prototype=v===null?Object.create(v):(u.prototype=v.prototype,new u)}}();(function(h){var k;(k=h.sn||(h.sn={}))[k.Unknown=0]="Unknown",k[k.Point=33]="Point",k[k.Line=322]="Line",k[k.Envelope=197]="Envelope",k[k.MultiPoint=550]="MultiPoint",k[k.Polyline=1607]="Polyline",k[k.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(h.TK||(h.TK={}));var v=function(){function u(){this.description=null,this.QA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.Pf=function(o){this.wc(),o!=this.description&&this.un(o)},u.prototype.un=function(){},u.prototype.Ll=function(o){this.wc(),o!=this.description&&(o=h.fe.xR(this.description,o))!=this.description&&this.un(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.se=function(o){this.wc(),this.description.hasAttribute(o)||(o=h.fe.wR(this.description,o),this.un(o))},u.prototype.Vg=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.So=function(){},u.prototype.yc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.dG=function(){return this.hasAttribute(1)},u.uf=function(o){return 1+((192&o)>>6)>>1},u.Tn=function(o){return(32&o)!=0},u.PS=function(o){return(128&o)!=0},u.zd=function(o){return(256&o)!=0},u.zj=function(o){return(512&o)!=0},u.Ic=function(o){return(1024&o)!=0},u.prototype.Qf=function(){var o=this.Ja();return this.copyTo(o),o},u.prototype.ng=function(){return null},u.kg=function(o){var s=o.Ja();return o.copyTo(s),s},u.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},u.zx=function(o){var s=o.K();if(u.zj(s))return o.I();if(o.B())return 0;if(s==197)return 4;if(s==33)return 1;if(u.zd(s))return 2;throw h.i.ga("missing type")},u}();h.ba=v})(U||(U={})),or=U||(U={}),$1=function(){function h(){this.y=this.x=0}return h.construct=function(k,v){var u=new h;return u.x=k,u.y=v,u},h.cl=function(k){var v=new h;return v.x=k.x,v.y=k.y,v},h.prototype.na=function(k,v){this.x=k,this.y=v},h.prototype.N=function(k){this.x=k.x,this.y=k.y},h.prototype.hq=function(k,v){return this.x===k&&this.y===v},h.prototype.Mz=function(k){return 2220446049250313e-31>=Math.abs(this.x-k.x)&&2220446049250313e-31>=Math.abs(this.y-k.y)},h.prototype.rb=function(k){return this.x===k.x&&this.y===k.y},h.prototype.Nb=function(k){return k==this||k instanceof h&&this.x==k.x&&this.y==k.y},h.prototype.sub=function(k){this.x-=k.x,this.y-=k.y},h.prototype.vc=function(k,v){this.x=k.x-v.x,this.y=k.y-v.y},h.prototype.add=function(k,v){v!==void 0?(this.x=k.x+v.x,this.y=k.y+v.y):(this.x+=k.x,this.y+=k.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(k){this.x=-k.x,this.y=-k.y},h.prototype.IS=function(k,v,u){this.x=k.x*(1-u)+v.x*u,this.y=k.y*(1-u)+v.y*u},h.prototype.Dt=function(k,v){this.x=this.x*k+v.x,this.y=this.y*k+v.y},h.prototype.BW=function(k,v,u){this.x=v.x*k+u.x,this.y=v.y*k+u.y},h.prototype.scale=function(k){this.x*=k,this.y*=k},h.prototype.compare=function(k){return this.y<k.y?-1:this.y>k.y?1:this.x<k.x?-1:this.x>k.x?1:0},h.prototype.normalize=function(){var k=this.length();k==0&&(this.x=1,this.y=0),this.x/=k,this.y/=k},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Uk=function(){return this.x*this.x+this.y*this.y},h.ub=function(k,v){return Math.sqrt(this.zc(k,v))},h.Jy=function(k,v,u,o){return k-=u,v-=o,Math.sqrt(k*k+v*v)},h.prototype.Sh=function(k){return this.x*k.x+this.y*k.y},h.prototype.aD=function(k){return Math.abs(this.x*k.x)+Math.abs(this.y*k.y)},h.prototype.yi=function(k){return this.x*k.y-this.y*k.x},h.prototype.Ct=function(k,v){var u=-this.x*v+this.y*k;this.x=this.x*k+this.y*v,this.y=u},h.prototype.Jv=function(){var k=this.x;this.x=-this.y,this.y=k},h.prototype.HG=function(k){this.x=-k.y,this.y=k.x},h.prototype.cr=function(){var k=this.x;this.x=this.y,this.y=-k},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(k,v){var u=k.su(),o=v.su();return o==u?0>(k=k.yi(v))?1:0<k?-1:0:u<o?-1:1},h.zc=function(k,v){var u=k.x-v.x;return u*u+(k=k.y-v.y)*k},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(k,v){var u=h.ub(k,v),o=h.construct(this.x,this.y);if(u==0)return h.ub(o,k);var s=new h;return s.N(v),s.sub(k),o.sub(k),o.yi(s)/u},h.Wq=function(k,v,u){var o=new or.Xb;o.set(v.x),o.sub(k.x);var s=new or.Xb;s.set(u.y),s.sub(k.y);var n=new or.Xb;n.set(v.y),n.sub(k.y);var l=new or.Xb;return l.set(u.x),l.sub(k.x),o.Bg(s),n.Bg(l),o.sub(n),o.rs()?(o=new or.jp(v.x),s=new or.jp(k.x),n=new or.jp(k.y),o=o.kt(s),k=(k=new or.jp(u.y)).kt(n),v=(v=new or.jp(v.y)).kt(n),u=(u=new or.jp(u.x)).kt(s),o=o.nr(k),v=v.nr(u),(o=o.nr(v)).iT()?-1:o.aS()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.dc=function(){return or.P.wj(or.P.wj())},h}(),or.h=$1,function(h){var k=function(){function v(u){this.Ay=this.Ot=0,this.KX=u}return v.prototype.reset=function(){this.Ay=this.Ot=0},v.prototype.add=function(u){u-=this.Ay;var o=this.Ot+u;this.Ay=o-this.Ot-u,this.Ot=o},v.prototype.sub=function(u){this.add(-u)},v.prototype.tm=function(){return this.KX+this.Ot},v}();h.Ex=k,h.mc=function(){function v(){}return v.En=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},v.sign=function(u){return 0>u?-1:0<u?1:0},v.MK=function(u){return u-360*Math.floor(u/360)},v.round=function(u){return Math.floor(u+.5)},v.ox=function(u){return u*u},v.jq=function(u,o,s){return .5>=s?u+(o-u)*s:o-(o-u)*(1-s)},v.JG=function(u,o,s,n){.5>=s?(n.x=u.x+(o.x-u.x)*s,n.y=u.y+(o.y-u.y)*s):(n.x=o.x-(o.x-u.x)*(1-s),n.y=o.y-(o.y-u.y)*(1-s))},v.gT=function(u,o,s,n,l,c){.5>=l?(c.x=u+(s-u)*l,c.y=o+(n-o)*l):(c.x=s-(s-u)*(1-l),c.y=n-(n-o)*(1-l))},v}()}(U||(U={})),function(h){var k=function(v){function u(){var o=v.call(this)||this;return o.ta=0,o.oa=0,o.qa=0,o.ma=0,o.la=null,o}return yt(u,v),u.prototype.bc=function(){return h.h.construct(this.ta,this.oa)},u.prototype.$p=function(o){o.x=this.ta,o.y=this.oa},u.prototype.Ec=function(o){this.gm(0,o)},u.prototype.UB=function(o,s){this.gm(0,h.h.construct(o,s))},u.prototype.Vo=function(o){this.cD(0,o)},u.prototype.setStart=function(o){this.pD(0,o)},u.prototype.yv=function(o,s){return this.Pd(0,o,s)},u.prototype.TB=function(o,s,n){this.vn(0,o,s,n)},u.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},u.prototype.Vr=function(o){o.x=this.qa,o.y=this.ma},u.prototype.Rc=function(o){this.gm(1,o)},u.prototype.Sl=function(o,s){this.gm(1,h.h.construct(o,s))},u.prototype.Ro=function(o){this.cD(1,o)},u.prototype.setEnd=function(o){this.pD(1,o)},u.prototype.jv=function(o,s){return this.Pd(1,o,s)},u.prototype.JB=function(o,s,n){this.vn(1,o,s,n)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(o,s,n,l,c){return this.FM(o,s,n,l,c)},u.prototype.isIntersecting=function(o,s){return this.Br(o,s,!1)!=0},u.prototype.ss=function(o,s){return this.tu(o,s,!1)},u.prototype.tu=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.$x=function(o){if(this.wc(),this.la==null&&0<o)this.la=h.P.mg(2*o);else if(this.la!=null&&this.la.length<2*o){for(var s=this.la.slice(0),n=this.la.length;n<2*o;n++)s[n]=0;this.la=s}},u.bM=function(o,s,n){if(0<n)var l=0;for(var c=0;c<n;c++)s[0+l]=o[0],l++},u.prototype.gm=function(o,s){o!=0?(this.qa=s.x,this.ma=s.y):(this.ta=s.x,this.oa=s.y)},u.prototype.un=function(o){if(this.la!=null){for(var s=h.fe.Kw(o,this.description),n=[],l=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),g=0,w=1,x=o.Ba;w<x;w++){var T=o.ld(w),E=h.sa.Wa(T);if(s[w]==-1){var O=h.sa.te(T);for(T=0;T<E;T++)n[p+g]=O,n[f+g]=O,g++}else for(O=this.description.bk(s[w])-2,T=0;T<E;T++)n[p+g]=this.la[l+O],n[f+g]=this.la[c+O],g++,O++}this.la=n}this.description=o},u.prototype.cD=function(o,s){if(this.Bc())throw h.i.ga("empty geometry");s.Pf(this.description),s.Bc()&&s.wn();for(var n=0;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=0,p=h.sa.Wa(l);c<p;c++){var f=this.Pd(o,l,c);s.setAttribute(l,c,f)}},u.prototype.pD=function(o,s){if(this.wc(),s.Bc())throw h.i.ga("empty geometry");for(var n=s.description,l=0,c=n.Ba;l<c;l++)for(var p=n.Fd(l),f=h.sa.Wa(p),g=0;g<f;g++){var w=s.Vc(p,g);this.vn(o,p,g,w)}},u.prototype.Pd=function(o,s,n){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return o!=0?n!=0?this.ma:this.qa:n!=0?this.oa:this.ta;if(n>=h.sa.Wa(s))throw h.i.de();var l=this.description.Rf(s);return 0<=l?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.bk(l)-2+n]):h.sa.te(s)},u.prototype.vn=function(o,s,n,l){if(this.wc(),n>=h.sa.Wa(s))throw h.i.de();var c=this.description.Rf(s);0>c&&(this.se(s),c=this.description.Rf(s)),s==0?o!=0?n!=0?this.ma=l:this.qa=l:n!=0?this.oa=l:this.ta=l:(this.la==null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.bk(c)-2+n]=l)},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();o.description=this.description,o.$x(this.description.Be.length-2),u.bM(this.la,o.la,2*(this.description.Be.length-2)),o.ta=this.ta,o.oa=this.oa,o.qa=this.qa,o.ma=this.ma,o.wc(),this.qp(o)},u.prototype.Vg=function(o,s){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(n.pa=this.Pd(0,o,s),n.wa=n.pa,n.Nk(this.Pd(1,o,s)),n)},u.prototype.UI=function(o){this.Bc()?o.Pa():(o.pa=this.Pd(0,0,0),o.wa=o.pa,o.Nk(this.Pd(1,0,0)))},u.prototype.Vw=function(o,s){s.Pf(this.description),s.Db(this.ic(o));for(var n=1,l=this.description.Ba;n<l;n++)for(var c=this.description.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++){var g=this.Vc(o,c,f);s.setAttribute(c,f,g)}},u.prototype.AM=function(o){if(this.description!=o.description||this.ta!=o.ta||this.qa!=o.qa||this.oa!=o.oa||this.ma!=o.ma)return!1;for(var s=0;s<2*(this.description.Be.length-2);s++)if(this.la[s]!=o.la[s])return!1;return!0},u.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=1;for(var s=this.description.Ba;o<s;o++)for(var n=this.description.ld(o),l=0,c=h.sa.Wa(n);l<c;l++){var p=this.Pd(0,n,l),f=this.Pd(1,n,l);this.vn(0,n,l,f),this.vn(1,n,l,p)}},u.prototype.Br=function(o,s,n){var l=o.K();if(this.K()===322){if(l==322)return h.zb.JM(this,o,s,n);throw h.i.Ra()}throw h.i.Ra()},u.prototype.FM=function(o,s,n,l,c){var p=o.K();if(this.K()===322){if(p==322)return h.zb.Yx(this,o,s,n,l,c);throw h.i.Ra()}throw h.i.Ra()},u.prototype.Sx=function(){return null},u.Ig=function(o,s){return s*(o.Be.length-2)},u.prototype.ic=function(o,s){if(s===void 0)return s=new h.h,this.ic(o,s),s;h.mc.gT(this.ta,this.oa,this.qa,this.ma,o,s)},u.prototype.ge=function(){return null},u.prototype.$F=function(){return null},u.prototype.fq=function(){return null},u.prototype.Di=function(){return null},u.prototype.Rn=function(){return null},u.prototype.lg=function(){return null},u.prototype.Tx=function(o,s){return s!==void 0?this.ux(s)-this.ux(o):this.ux(o)},u.prototype.qp=function(){},u.prototype.fl=function(){return null},u.prototype.dh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.ux=function(){return null},u.prototype.IG=function(){return null},u.prototype.ub=function(o,s){if(!s&&this.Br(o,0,!1)!=0)return 0;s=17976931348623157e292;var n=this.bc(),l=o.ge(n,!1);return n.sub(o.ic(l)),(n=n.length())<s&&(s=n),n=this.xc(),l=o.ge(n,!1),n.sub(o.ic(l)),(n=n.length())<s&&(s=n),n=o.bc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<s&&(s=n),n=o.xc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<s&&(s=n),s},u.prototype.ng=function(){return h.si.im(this,null)},u}(h.ba);h.NC=k}(U||(U={})),new U.h,function(h){var k;(k=h.VK||(h.VK={}))[k.Unknown=-1]="Unknown",k[k.Not=0]="Not",k[k.Weak=1]="Weak",k[k.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(h.HK||(h.HK={}));var v=function(u){function o(){var s=u.call(this)||this;return s.Jm=65535,s.xa=0,s.Rg=-1,s.Cb=null,s}return yt(o,u),o.prototype.qp=function(){},o.prototype.Zx=function(){},o.prototype.ey=function(){},o.prototype.I=function(){return this.xa},o.prototype.B=function(){return this.Bc()},o.prototype.Bc=function(){return this.xa==0},o.prototype.ck=function(s){return(this.Jm&s)!=0},o.prototype.Nf=function(s,n){this.Jm=n?this.Jm|s:this.Jm&~s},o.prototype.oc=function(){this.ck(32)&&this.XM()},o.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},o.prototype.we=function(s,n){if(0>s||s>=this.xa)throw h.i.ga("index out of bounds");this.oc(),n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.Fd(l),p=0,f=h.sa.Wa(c);p<f;p++){var g=this.Aa[l].gg(f*s+p);n.setAttribute(c,p,g)}},o.prototype.It=function(s,n){this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var p=l.Fd(c),f=h.sa.Wa(p),g=0;g<f;g++){var w=n.Vc(p,g);this.setAttribute(p,s,g,w)}},o.prototype.D=function(s,n){if(0>s||s>=this.I())throw h.i.de();this.oc(),this.Aa[0].uc(2*s,n)},o.prototype.Oa=function(s){var n=new h.h;return this.D(s,n),n},o.prototype.Hc=function(s,n){this.Aa[0].uc(2*s,n)},o.prototype.Db=function(s,n,l){if(0>s||s>=this.xa)throw h.i.de();this.oc();var c=this.Aa[0];l!==void 0?(c.write(2*s,n),c.write(2*s+1,l)):c.Vt(2*s,n),this.Qc(1993)},o.prototype.xz=function(){if(void 0>=this.I())throw h.i.de();this.oc();var s=this.Aa[0],n=new h.Od;return n.x=s.read(NaN),n.y=s.read(NaN),n.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):h.sa.te(1),n},o.prototype.ZB=function(s){if(0>s||s>=this.I())throw h.i.de();this.se(1),this.oc(),this.Qc(1993);var n=this.Aa[0];n.write(2*s,(void 0).x),n.write(2*s+1,(void 0).y),this.Aa[1].rr(s,(void 0).z)},o.prototype.Vc=function(s,n,l){if(0>n||n>=this.xa)throw h.i.de();var c=h.sa.Wa(s);if(l>=c)throw h.i.de();this.oc();var p=this.description.Rf(s);return 0<=p?this.Aa[p].gg(n*c+l):h.sa.te(s)},o.prototype.tF=function(s,n){return this.Vc(s,n,void 0)},o.prototype.setAttribute=function(s,n,l,c){if(0>n||n>=this.xa)throw h.i.de();var p=h.sa.Wa(s);if(l>=p)throw h.i.de();this.se(s),this.oc(),s=this.description.Rf(s),this.Qc(1993),this.Aa[s].rr(n*p+l,c)},o.prototype.vb=function(s){return this.vx(),this.se(s),this.oc(),this.Aa[this.description.Rf(s)]},o.prototype.kn=function(s,n){if(n!=null&&h.sa.Vp(s)!=n.Vp())throw h.i.O();this.se(s),s=this.description.Rf(s),this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Aa[s]=n,this.Qc(16777215)},o.prototype.un=function(s){var n=null;if(this.Aa!=null){var l=h.fe.Kw(s,this.description);n=[];for(var c=0,p=s.Ba;c<p;c++)l[c]!=-1&&(n[c]=this.Aa[l[c]])}this.description=s,this.Aa=n,this.Rg=-1,this.Qc(16777215)},o.prototype.vD=function(s){this.yu(!0),s instanceof h.l?this.aa.A(s):this.aa.So(s)},o.prototype.WM=function(s){this.yu(!1),s instanceof h.l?this.aa.A(s):this.aa.So(s)},o.prototype.dn=function(s){this.yu(!0),this.aa.copyTo(s)},o.prototype.A=function(s){this.vD(s)},o.prototype.So=function(s){this.vD(s)},o.prototype.yc=function(s){this.WM(s)},o.prototype.Vg=function(s,n){var l=new h.Oc;return this.Bc()?(l.Pa(),l):(this.yu(!0),this.aa.Vg(s,n))},o.prototype.dc=function(){var s=this.description.dc();if(!this.Bc())for(var n=this.I(),l=0,c=this.description.Ba;l<c;l++)s=this.Aa[l].Cn(s,0,n*h.sa.Wa(this.description.Fd(l)));return s},o.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof o&&this.description.Nb(s.description))||this.Bc()!=s.Bc())return!1;if(this.Bc())return!0;var n=this.I();if(n!=s.I())return!1;for(var l=0;l<this.description.Ba;l++){var c=this.description.ld(l),p=this.vb(c),f=s.vb(c);if(!p.Nb(f,0,n*h.sa.Wa(c)))return!1}return!0},o.prototype.copyTo=function(s){if(s.K()!=this.K())throw h.i.O();this.ZC(s)},o.prototype.ZC=function(s){this.oc(),s.description=this.description,s.Aa=null;var n=this.description.Ba,l=null;if(this.Aa!=null){l=[];for(var c=0;c<n;c++)this.Aa[c]!=null&&(l[c]=this.Aa[c].BB(this.I()*h.sa.Wa(this.description.Fd(c))))}this.aa!=null?(s.aa=this.aa.Ja(),this.aa.copyTo(s.aa)):s.aa=null,s.xa=this.xa,s.Jm=this.Jm,s.Aa=l;try{this.qp(s)}catch{throw s.Pa(),h.i.hu()}},o.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},o.prototype.Qc=function(s){s==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=s,this.gM(),this.wc()},o.prototype.yu=function(s){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(s);for(var n=1;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=h.sa.Wa(l),p=this.Aa[n],f=0;f<c;f++){var g=new h.Oc;g.Pa();for(var w=0;w<this.xa;w++){var x=p.gg(w*c+f);g.$b(x)}this.aa.setInterval(l,f,g)}s&&this.Nf(192,!1)}},o.prototype.dy=function(){this.aa.Pa();for(var s=this.Aa[0],n=new h.h,l=0;l<this.xa;l++)s.uc(2*l,n),this.aa.$b(n)},o.prototype.Ap=function(s){s.Pa();for(var n=this.Aa[0],l=new h.h,c=0;c<this.xa;c++)n.uc(2*c,l),s.$b(l)},o.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var s=0;s<this.description.Ba;s++){var n=this.description.Fd(s);if(this.Aa[s]!=null){var l=h.sa.Wa(n),c=h.P.truncate(this.Aa[s].size/l);c<this.xa&&(c=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[s].resize(c*l,h.sa.te(n))),c<this.Rg&&(this.Rg=c)}else this.Aa[s]=h.Zc.TE(n,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},o.prototype.fm=function(s){if(0>s)throw h.i.O();s!=this.xa&&(this.xa=s,this.Qc(65535))},o.prototype.qm=function(s){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=s)return this.ck(8)?1:2}return-1},o.prototype.Eh=function(s,n){if(this.LT=n,s==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),s==0)this.Nf(2,!1),this.Nf(4,!1);else if(s==1)this.Nf(2,!0),this.Nf(4,!1);else{if(s!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},o.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},o.prototype.fD=function(s,n,l,c){if(0>s||s>=this.xa||0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.oc(),c.Pf(this.description),c.B()&&c.wn();for(var p=0;p<this.description.Ba;p++)for(var f=this.description.Fd(p),g=0,w=h.sa.Wa(f);g<w;g++){var x=this.Aa[p].gg(w*s+g),T=this.Aa[p].gg(w*n+g);c.setAttribute(f,g,h.mc.jq(x,T,l))}},o.prototype.Ar=function(s,n){var l=this.Aa[0].o,c=l[2*s]-l[2*n];return s=l[2*s+1]-l[2*n+1],Math.sqrt(c*c+s*s)},o.prototype.FR=function(s){if(0>s||s>=this.xa)throw h.i.de();this.oc();var n=new h.Ta;n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.ld(l),p=0,f=h.sa.Wa(c);p<f;p++){var g=this.Aa[l].gg(f*s+p);n.setAttribute(c,p,g)}return n},o.prototype.Fh=function(s,n){if(0>s||s>=this.xa)throw h.i.de();if(n.B())throw h.i.O();this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var p=l.ld(c),f=h.sa.Wa(p),g=0;g<f;g++){var w=n.Vc(p,g);this.setAttribute(p,s,g,w)}},o.prototype.nu=function(){return null},o.prototype.hj=function(){return null},o}(h.ba);h.Fx=v}(U||(U={})),function(h){var k=function(){function v(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.ao=null}return v.prototype.Xo=function(u){this.ao=u},v.prototype.MP=function(){this.Tv=!1},v.prototype.Ee=function(u){this.ob.Ee(u)},v.prototype.Rr=function(u){var o=this.ob.De();return this.nX(o),this.qX(u,o),o},v.prototype.HP=function(u){this.ob.kd(u)},v.prototype.addElement=function(u,o){return o==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),o=this.Ne),this.AD(u,0,o)},v.prototype.ED=function(u){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(u,1,this.Ne)},v.prototype.zn=function(u){this.Ne==-1&&(this.Ne=this.Rr(-1));var o=this.Ne,s=this.ob.o;if(o==-1||s[7*o]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(s=this.ob.o)[7*o]=u,this.xp(-1,u,o,s),u;var n=o==-1?-1:s[7*o+2];return u=this.ob.Nl([-1,-1,n,u,this.il(),-1,-1]),(s=this.ob.o)[7*n+1]=u,this.ky(u,s),s[7*u+2]===-1&&(s[7*o]=u),this.xp(-1,u,o,s),u},v.prototype.Bu=function(u,o,s,n){var l=-1;l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne);var c=this.ob.o;if(l==-1||c[7*l]==-1)return s=this.ob.Nl([-1,-1,-1,s,this.il(),-1,-1]),(c=this.ob.o)[7*l]=s,this.xp(-1,s,l,c),s;if(n){n=o!=-1?this.ao.compare(this,s,o):-1;var p=u!=-1?this.ao.compare(this,s,u):1}else n=-1,p=1;if(n==0||p==0)return c[7*l+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Vm>h.P.XA(this.Vm)>>1:o!=-1)?u=o:n=p,o=!0;;){if(0>n){if((p=c[7*u])==-1){n=u,s=this.ob.Nl([-1,-1,u,s,this.il(),-1,-1]),(c=this.ob.o)[7*u]=s;break}u=p}else{if((p=c[7*u+1])==-1){n=c[7*u+6],s=this.ob.Nl([-1,-1,u,s,this.il(),-1,-1]),(c=this.ob.o)[7*u+1]=s;break}u=p}o&&(n*=-1,o=!1)}return this.ky(s,c),c[7*s+2]===-1&&(c[7*l]=s),this.xp(n,s,l,c),s},v.prototype.AF=function(){return this.dR(this.Ne)},v.prototype.wd=function(u,o){o=o==-1?this.Ne:o,this.Tv?this.GP(u,o):this.eY(u,o)},v.prototype.search=function(u,o){for(o=this.uv(o);o!=-1;){var s=this.ao.compare(this,u,o);if(s==0)return o;o=0>s?this.nl(o):this.Zp(o)}return-1},v.prototype.DW=function(u){for(var o=this.uv(-1),s=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.nl(o):(s=o,o=this.Zp(o))}return s},v.prototype.pJ=function(u){for(var o=this.uv(-1),s=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(s=o,o=this.nl(o)):o=this.Zp(o)}return s},v.prototype.ka=function(u){return this.ob.U(u,3)},v.prototype.nl=function(u){return this.ob.U(u,0)},v.prototype.Zp=function(u){return this.ob.U(u,1)},v.prototype.getParent=function(u){return this.ob.U(u,2)},v.prototype.lb=function(u){return this.ob.U(u,6)},v.prototype.xe=function(u){return this.ob.U(u,5)},v.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},v.prototype.Gc=function(u){return u==-1?this.bs(this.Ne):this.bs(u)},v.prototype.UR=function(u){return u==-1?this.XF(this.Ne):this.XF(u)},v.prototype.Uj=function(u,o){this.IB(u,o)},v.prototype.uv=function(u){return u==-1?this.TF(this.Ne):this.TF(u)},v.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},v.prototype.size=function(u){return u==-1?this.VF(this.Ne):this.VF(u)},v.prototype.FN=function(u,o){for(var s=o[7*u],n=o[7*u+1],l=o[7*u+4];s!=-1||n!=-1;){var c=s!=-1?o[7*s+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,l<=Math.min(c,n))break;c<=n?this.nJ(s,o):this.mJ(u,o),s=o[7*u],n=o[7*u+1]}},v.prototype.ky=function(u,o){if(this.Tv)for(var s=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>s;)o[7*n]==u?this.nJ(u,o):this.mJ(n,o),n=o[7*u+2]},v.prototype.mJ=function(u,o){var s=o[7*u+1];o[7*s+2]=o[7*u+2],o[7*u+2]=s;var n=o[7*s];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*s]=u,(n=o[7*s+2])!=-1&&(o[7*n]==u?o[7*n]=s:o[7*n+1]=s)},v.prototype.nJ=function(u,o){var s=o[7*u+2];o[7*u+2]=o[7*s+2],o[7*s+2]=u;var n=o[7*u+1];o[7*s]=n,n!=-1&&(o[7*n+2]=s),o[7*u+1]=s,(n=o[7*u+2])!=-1&&(o[7*n]===s?o[7*n]=u:o[7*n+1]=u)},v.prototype.Rk=function(u,o){this.ob.T(u,2,o)},v.prototype.OB=function(u,o){this.ob.T(u,0,o)},v.prototype.SB=function(u,o){this.ob.T(u,1,o)},v.prototype.RB=function(u,o){this.ob.T(u,5,o)},v.prototype.fx=function(u,o){this.ob.T(u,6,o)},v.prototype.SJ=function(u,o){this.ob.T(o,0,u)},v.prototype.nX=function(u){this.ob.T(u,4,0)},v.prototype.qX=function(u,o){this.ob.T(o,5,u)},v.prototype.TF=function(u){return u==-1?-1:this.ob.U(u,0)},v.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},v.prototype.bs=function(u){return u==-1?-1:this.ob.U(u,2)},v.prototype.dR=function(u){return u==-1?-1:this.ob.U(u,3)},v.prototype.VF=function(u){return u==-1?0:this.ob.U(u,4)},v.prototype.XF=function(u){return this.ob.U(u,5)},v.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},v.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},v.prototype.il=function(){return this.Vm=h.P.XA(this.Vm),1073741823&this.Vm},v.prototype.AD=function(u,o,s){var n=this.ob.o;if(s==-1||n[7*s]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*s]=u,this.xp(-1,u,s,n),u;for(var l=s==-1?-1:n[7*s];;){var c=o==-1?1:this.ao.compare(this,u,l);if(0>c){if((c=this.nl(l))==-1){o=l,u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(n=this.ob.o)[7*l]=u;break}l=c}else{if(o==1&&c==0)return n[7*s+3]=l,-1;if((c=n[7*l+1])==-1){o=n[7*l+6],u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(n=this.ob.o)[7*l+1]=u;break}l=c}}return this.ky(u,n),n[7*u+2]===-1&&(n[7*s]=u),this.xp(o,u,s,n),u},v.prototype.xp=function(u,o,s,n){if(u!=-1){var l=n[7*u+5];n[7*u+5]=o}else l=s==-1?-1:n[7*s+2];n[7*o+5]=l,l!=-1&&(n[7*l+6]=o),n[7*o+6]=u,u==(s==-1?-1:n[7*s+1])&&(n[7*s+1]=o),u==-1&&(n[7*s+2]=o),n[7*s+4]=(s==-1?0:n[7*s+4])+1},v.prototype.vB=function(u,o){var s=this.ob.o,n=s[7*u+5];u=s[7*u+6],n!=-1?s[7*n+6]=u:s[7*o+1]=u,u!=-1?s[7*u+5]=n:s[7*o+2]=n,s[7*o+4]=o===-1?-1:s[7*o+4]-1},v.prototype.eY=function(u,o){this.vB(u,o);var s=this.nl(u),n=this.Zp(u),l=this.getParent(u),c=u;if(s!=-1&&n!=-1){this.Vm=h.P.XA(this.Vm);var p=1073741823<this.Vm?this.lb(u):this.xe(u),f=this.getParent(p)==u;this.ob.bC(u,p,0),this.ob.bC(u,p,1),this.ob.bC(u,p,2),l!=-1?this.nl(l)==u?this.OB(l,p):this.SB(l,p):this.SJ(p,o),f?(s==p?(this.OB(p,u),this.Rk(n,p)):n==p&&(this.SB(p,u),this.Rk(s,p)),this.Rk(u,p),l=p):(this.Rk(s,p),this.Rk(n,p),l=this.getParent(u),c=p),s=this.nl(u),n=this.Zp(u),s!=-1&&this.Rk(s,u),n!=-1&&this.Rk(n,u)}s=s!=-1?s:n,l==-1?this.SJ(s,o):this.nl(l)==c?this.OB(l,s):this.SB(l,s),s!=-1&&this.Rk(s,l),this.hl(u)},v.prototype.GP=function(u,o){var s=this.ob.o;s[7*u+4]=2147483647;var n=-1,l=-1,c=o===-1?-1:s[7*o],p=c==u;if(p&&(n=s[7*c],l=s[7*c+1],n==-1&&l==-1))return this.vB(c,o),this.hl(c),void(s[7*o]=-1);this.FN(u,s),(c=s[7*u+2])!=-1&&(s[7*c]==u?s[7*c]=-1:s[7*c+1]=-1),this.vB(u,o),this.hl(u),p&&(s[7*o]=n==-1||s[7*n+2]!=-1?l:n)},v.prototype.IB=function(u,o){this.ob.T(u,3,o)},v}();h.$j=k}(U||(U={})),function(h){var k=function(){function v(u,o){u!==void 0&&this.L(u,o)}return v.prototype.L=function(u,o){this.pa=u,this.wa=o,this.normalize()},v.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},v.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},v.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},v.prototype.Pa=function(){this.wa=this.pa=NaN},v.prototype.B=function(){return isNaN(this.pa)},v.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Nk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},v.prototype.Nk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},v.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},v.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},v.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},v.prototype.FB=function(u,o){u>o?(this.pa=o,this.wa=u):(this.pa=u,this.wa=o)},v.prototype.Kt=function(u){return h.P.Tk(u,this.pa,this.wa)},v.prototype.S=function(){return this.wa-this.pa},v.prototype.tf=function(){return .5*(this.pa+this.wa)},v.prototype.Nb=function(u){return u==this||u instanceof v&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},v.prototype.dc=function(){return h.P.wj(h.P.wj())},v}();h.Oc=k}(U||(U={})),function(h){var k=new h.Oc,v=new h.Oc,u=function(){this.oe=null,this.pb=-1,this.tb=new h.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new h.Oc,this.Wf.FB(0,0)};h.EY=u;var o=function(){function s(n,l,c){this.g=n,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=l,this.Pq=10*l,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=c,this.OA=new u,this.TH=new u,h.P.truncate(3*n.gd/2)}return s.prototype.hG=function(n,l,c,p){n.oe=p===null?null:p[c[5*l]],n.Vv=n.oe!=null,n.Vv||((p=c[5*l+2])!==-1&&this.g.hW(c[5*l],c[5*p],n.tb),n.oe=n.tb,n.Wf.FB(n.tb.ta,n.tb.qa),n.Wf.wa+=this.ra,n.tb.mI(),n.Xv=n.tb.ma==n.tb.oa,n.Xv||(n.lA=(n.tb.qa-n.tb.ta)/(n.tb.ma-n.tb.oa)))},s.prototype.JO=function(n,l){var c=n.Br(l,this.ra,!0);return c!=0?c==2?this.Ly():this.zi():(n.$p(Js),n.Vr(qn),l.$p(Ks),l.Vr(Un),ui.na(this.Mq,this.Jk),Js.rb(Ks)&&this.Jk==Js.y?0>qn.compare(Un)?ui.N(qn):ui.N(Un):Js.rb(Un)&&this.Jk==Js.y?0>qn.compare(Ks)?ui.N(qn):ui.N(Ks):Ks.rb(qn)&&this.Jk==Ks.y?0>Js.compare(Un)?ui.N(Js):ui.N(Un):qn.rb(Un)&&this.Jk==qn.y&&(0>Js.compare(Ks)?ui.N(Js):ui.N(Ks)),n.Me(ui.y,ui.x)<l.Me(ui.y,ui.x)?-1:1)},s.prototype.HO=function(n,l){if(n.tb.oa==l.tb.oa&&n.tb.ta==l.tb.ta)return n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa?this.bA?this.Ly():0:this.KE(n,l);if(n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa)return this.JE(n,l);var c=this.JE(n,l);return n=this.KE(n,l),0>c&&0>n?-1:0<c&&0<n?1:this.zi()},s.prototype.DO=function(n,l){if(n.qa>l.qa){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.qa-n.ta)<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 1},s.prototype.EO=function(n,l){if(n.ta<l.ta){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.ta-n.qa)<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi();return-1},s.prototype.FO=function(n,l){var c=new h.h;c.vc(l.xc(),l.bc()),c.cr(),c.normalize();var p=new h.h;p.vc(n.bc(),l.bc());var f=new h.h;f.vc(n.xc(),l.bc()),p=p.Sh(c),c=f.Sh(c),f=Math.abs(p);var g=Math.abs(c);if(f<g){if(f<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi()}else if(g<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 0>p&&0>c?-1:0<p&&0<c?1:this.zi()},s.prototype.IE=function(n,l){return n.oa==l.oa&&n.ta==l.ta?this.DO(n,l):n.ma==l.ma&&n.qa==l.qa?this.EO(n,l):this.FO(n,l)},s.prototype.GO=function(n,l){return n.ma==l.ma&&n.qa==l.qa&&n.oa==l.oa&&n.ta==l.ta?this.bA?this.Ly():0:this.zi()},s.prototype.JE=function(n,l){var c=1;if(n.tb.oa<l.tb.oa){c=-1;var p=n;n=l,l=p}n=n.tb,p=l.tb;var f=n.ta-p.ta;l=l.lA*(n.oa-p.oa);var g=this.Pq;return f<l-g?-c:f>l+g?c:p.xi(n.ta,n.oa,this.ra)?this.zi():f<l?-c:c},s.prototype.KE=function(n,l){var c=1;if(l.tb.ma<n.tb.ma){c=-1;var p=n;n=l,l=p}n=n.tb,p=l.tb;var f=n.qa-p.ta;l=l.lA*(n.ma-p.oa);var g=this.Pq;return f<l-g?-c:f>l+g?c:p.xi(n.qa,n.ma,this.ra)?this.zi():f<l?-c:c},s.prototype.Ly=function(){return this.sg=!0,this.Pi=new h.Nd(5,this.No,this.ht),-1},s.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new h.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},s.prototype.IO=function(n,l,c,p){if(this.sg)return-1;var f=this.JH==this.Jk&&this.IH==this.Mq;if(f&&n==this.Ys)var g=this.KH;else g=NaN,this.Ys=-1;return f&&l==this.Zs?f=this.LH:(f=NaN,this.Zs=-1),c.oe.UI(k),p.oe.UI(v),k.wa<v.pa?-1:v.wa<k.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(g)&&(this.Ys=n,this.KH=g=n=c.oe.Me(this.Jk,this.Mq)),isNaN(f)&&(this.Zs=l,this.LH=f=n=p.oe.Me(this.Jk,this.Mq)),Math.abs(g-f)<=this.ra?this.JO(c.oe,p.oe):g<f?-1:g>f?1:0)},s.prototype.Mr=function(){this.sg=!1},s.prototype.tm=function(){return this.Pi},s.prototype.VJ=function(n,l){this.Jk=n,this.Mq=l,this.ht=this.No=this.Zs=this.Ys=-1},s.prototype.compare=function(n,l,c){return this.sg?-1:(n=n.ka(c),this.Fm=c,this.ME(l,l,n,n))},s.prototype.ME=function(n,l,c,p){if(this.No==l)var f=this.OA;else this.No=l,f=this.OA,this.OA.pb=n,this.hG(f,l,this.g.ud.o,this.g.Te);if(g==null){this.ht=p;var g=this.TH;this.TH.pb=c,this.hG(g,p,this.g.ud.o,this.g.Te)}return f.Vv||g.Vv?this.IO(l,p,f,g):f.Wf.wa<g.Wf.pa?-1:g.Wf.wa<f.Wf.pa?1:(n=f.Xv?1:0,(n|=g.Xv?2:0)==0?this.HO(f,g):n==1?this.IE(f.tb,g.tb):n==2?-1*this.IE(g.tb,f.tb):this.GO(f.tb,g.tb))},s}();h.PC=o}(U||(U={})),function(h){var k=function(){function v(u,o){this.g=u,this.ra=o,this.sg=!1,this.No=-1,this.Wf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.je=new h.zb,this.Fm=-1,this.wA=17976931348623157e292}return v.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},v.prototype.Fh=function(u){this.Iq.N(u)},v.prototype.compare=function(u,o){return this.NE(o,u.ka(o))},v.prototype.NE=function(u,o){var s=this.g.cc(o)!=null;if(s||(this.g.fd(o,this.je),this.Wf.FB(this.je.ta,this.je.qa)),s)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=u,this.sg=!0,0;this.je.mI(),s=this.je.bc(),(o=new h.h).vc(this.je.xc(),s),o.cr();var n=new h.h;return n.vc(this.Iq,s),s=o.Sh(n),(s/=o.length())<10*-this.ra?-1:s>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((o=Math.abs(s))<this.wA&&(this.Fm=u,this.wA=o),this.sg=!0,o<.25*this.ra)?0:0>s?-1:1},v}();h.WL=k}(U||(U={})),function(h){function k(u,o,s,n){s=new Float64Array(u.subarray(s,n)),u.set(s,o)}var v=function(){function u(o){this.Pb=this.rk=!1,this.o=null;var s=o;2>s&&(s=2),this.o=new Float64Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.ga("invalid_call");if(s<o||s>n||o>n)throw h.i.O();o!=s&&n!=s&&(this.pi(o,s-o,1),this.pi(s,n-s,1),this.pi(o,n-o,1))},u.rf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Dn=function(o){var s=new u(0);return s.o=new Float64Array(o.o),s.size=o.size,s},u.Nr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Float64Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Vt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,s){this.write(o,s)},u.prototype.Cn=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.P.wj(this.read(s));return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(s,s+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[p+f+g]=o.o[s+l+g]}}},u.prototype.On=function(o,s,n,l,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||l%p!=0))throw h.i.O();var g=this.size-f;if(g<l&&this.resize(this.size+l-g),k(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p)for(c-=p,g=0;g<p;g++)this.o[o+f+g]=s.o[n+c+g]},u.prototype.Dz=function(o,s,n,l,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=s[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=s[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Nn=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.xj=function(o,s,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Wt=function(o,s,n,l,c,p){if(0>o||0>s||0>l||!c&&(0>=p||s%p!=0)||n.size<l+s)throw h.i.O();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Cr(o,s,l,c,p);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-p,p==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.P.truncate(s/p);c<s;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},u.prototype.Gn=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&k(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.pi=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+s+p],this.o[o+s+p]=f}}},u.prototype.Yj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.O();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Cr=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.P.truncate(s/2);l<s;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.qC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.O();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.pC=function(o,s,n){if(0>o||0>s)throw h.i.O();if(s!=0){this.size<(s<<1)+o&&this.resize((s<<1)+o),s+=0;for(var l=0;l<s;l++)this.o[o]=n[l][0],this.o[o+1]=n[l][1],o+=2}},u.prototype.Xw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.O();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.pB=function(o,s,n){if(0>o||0>s||this.size<(s>>1)+o)throw h.i.O();if(s!=0){s=0+s;for(var l=0;l<s;l++)n[l][0]=this.o[o],n[l][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,s,n){Array.prototype.sort.call(this.o.subarray(o,s),n)},u.prototype.Vp=function(){return 1},u}();h.ce=v}(U||(U={})),function(h){function k(u,o,s,n){s=new Int32Array(u.subarray(s,n)),u.set(s,o)}h.nY=function(){this.random=1973};var v=function(){function u(o){this.Pb=this.rk=!1,this.o=null;var s=o;2>s&&(s=2),this.o=new Int32Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.ga("invalid_call");if(s<o||s>n||o>n)throw h.i.O();o!=s&&n!=s&&(this.pi(o,s-o,1),this.pi(s,n-s,1),this.pi(o,n-o,1))},u.rf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Dn=function(o){var s=new u(0);return s.o=new Int32Array(o.o),s.size=o.size,s},u.Nr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Int32Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Vt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,s){this.write(o,s)},u.prototype.Cn=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.P.Vh(this.read(s),o);return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(s,s+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[p+f+g]=o.o[s+l+g]}}},u.prototype.On=function(o,s,n,l,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||l%p!=0))throw h.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p){c-=p;for(var g=0;g<p;g++)this.o[o+f+g]=s.o[n+c+g]}},u.prototype.Dz=function(o,s,n,l,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=s[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=s[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Nn=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.xj=function(o,s,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Wt=function(o,s,n,l,c,p){if(0>o||0>s||0>l||!c&&(0>=p||s%p!=0)||n.size<l+s)throw h.i.O();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Cr(o,s,l,c,p);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-p,p==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.P.truncate(s/p);c<s;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},u.prototype.Gn=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&k(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.pi=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+s+p],this.o[o+s+p]=f}}},u.prototype.Yj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.O();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Cr=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.P.truncate(s/2);l<s;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.qC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.O();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Xw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.O();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,s,n){10>s-o?u.mG(this.o,o,s,n):u.lB(this.o,o,s-1,n)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.XW=function(o){this.o[this.size-1]=o},u.prototype.NV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.gF=function(o){for(var s=0,n=this.size;s<n;s++)if(this.o[s]==o)return s;return-1},u.prototype.cG=function(o){return 0<=this.gF(o)},u.mG=function(o,s,n,l){for(var c=s;c<n;c++){for(var p=o[c],f=c-1;f>=s&&0<l(o[f],p);)o[f+1]=o[f],f--;o[f+1]=p}},u.sx=function(o,s,n){var l=o[n];o[n]=o[s],o[s]=l},u.lB=function(o,s,n,l){if(!(s>=n))for(;;){if(9>n-s){u.mG(o,s,n+1,l);break}var c=o[s];u.sx(o,s,n);for(var p=s,f=s;f<n;f++)0>=l(o[f],c)&&(u.sx(o,p,f),p+=1);u.sx(o,p,n),p-s<n-p?(u.lB(o,s,p-1,l),s=p+1):(u.lB(o,p+1,n,l),n=p-1)}},u}();h.ja=v}(U||(U={})),function(h){function k(u,o,s,n){s=new Int8Array(u.subarray(s,n)),u.set(s,o)}var v=function(){function u(o){this.o=null;var s=o;2>s&&(s=2),this.o=new Int8Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.ga("invalid_call");if(s<o||s>n||o>n)throw h.i.O();o!=s&&n!=s&&(this.pi(o,s-o,1),this.pi(s,n-s,1),this.pi(o,n-o,1))},u.rf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Dn=function(o){var s=new u(0);return s.o=new Int8Array(o.o),s.size=o.size,s},u.Nr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Int8Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Vt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,s){this.write(o,s)},u.prototype.Cn=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.P.Vh(this.read(s),o);return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(s,s+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[p+f+g]=o.o[s+l+g]}}},u.prototype.On=function(o,s,n,l,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||l%p!=0))throw h.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p){c-=p;for(var g=0;g<p;g++)this.o[o+f+g]=s.o[n+c+g]}},u.prototype.Nn=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.Dz=function(o,s,n,l,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=s[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=s[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.xj=function(o,s,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Wt=function(o,s,n,l,c,p){if(0>o||0>s||0>l||!c&&(0>=p||s%p!=0)||n.size<l+s)throw h.i.O();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Cr(o,s,l,c,p);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-p,p==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.P.truncate(s/p);c<s;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},u.prototype.Gn=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&k(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.pi=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+s+p],this.o[o+s+p]=f}}},u.prototype.Yj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.O();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Cr=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.P.truncate(s/2);l<s;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.qC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.O();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Xw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.O();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,s,n){s=this.o.subarray(o,s),Array.prototype.sort.call(s,n),this.o.set(s,o)},u.prototype.uJ=function(o,s){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]|=s},u.prototype.FE=function(o,s){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]&=~s},u.prototype.Vp=function(){return 1},u}();h.rn=v}(U||(U={})),function(h){h.Zc=function(){function k(){}return k.Or=function(v,u){return h.rn.rf(v,u)},k.Fn=function(v,u){return h.ce.rf(v,u)},k.kP=function(v,u,o){switch(v){case 1:v=h.ce.rf(u,o);break;case 2:v=h.ja.rf(u,o);break;case 4:v=h.rn.rf(u,o);break;default:throw h.i.Ra()}return v},k.TE=function(v,u){return k.kP(h.sa.Vp(v),u*h.sa.Wa(v),h.sa.te(v))},k.Qh=function(v,u){return h.ja.rf(v,u)},k.lI=function(v){var u,o=[];for(u=0;u<v;u++)o.push(null);return o},k}()}(U||(U={})),function(h){h.ha=function(k){k===void 0&&(k=0),this.u=k}}(U||(U={})),function(h){h.IL=function(){function k(){}return k.bind=function(v){h.Tc=v.PeDefs,h.qf=v.PeFactory,h.IC=v.PeVertcs,h.gj=v.PeCSTransformations,h.HC=v.PeGTTransformations,h.GL=v.PeGeogtran,h.FL=v.PeFactoryCodechange,h.GC=v.PeGCSExtent,h.Eg=v.PePCSInfo,h.HL=v.PeHorizon,h.EL=v.PeCoordsys,h.np=v.PeGTlistExtended,h.np.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=v.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},k}(),h.qf=null,h.IC=null,h.EL=null,h.HL=null,h.Eg=null,h.np=null,h.Lx=null,h.GC=null,h.FL=null,h.GL=null,h.Tc=null,h.HC=null,h.gj=null}(U||(U={})),function(h){var k=function(){function v(){}return v.Mb=function(u,o){return 0<=o?v.R(u):-v.R(u)},v.R=function(u){return 0>u?-u:u},v.vi=function(u){return 3552713678800501e-30>u},v.FC=function(u,o,s){return v.R(u-o)<=s*(1+(v.R(u)+v.R(o))/2)},v.$=function(u,o){return v.FC(u,o,3552713678800501e-30)},v.AL=function(u){return 3552713678800501e-30>=v.R(u)},v.Dd=function(u){return v.AL(u)},v}();h.s=k,h.F=function(){function v(){}return v.ip=function(u,o){var s=0;return(u=k.R(u))+(o=k.R(o))!=0&&(u>o?(s=o/u,s=u*Math.sqrt(1+s*s)):(s=u/o,s=o*Math.sqrt(1+s*s))),s},v.Yq=function(u,o,s,n,l){for(var c=[0,0,0],p=[0,0,0],f=0;2>=f;f++)o[f]-=u[f],s[f]-=o[f];s=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],u=-1*(s*u[0]+o*u[1]+c*u[2]),n[0]=s,n[1]=o,n[2]=c,n[3]=u,p=v.qn(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,l!=0&&(p=k.Dd(c)?k.Dd(u)?k.Mb(1,o):-k.Mb(1,u):k.Mb(1,c),p*=k.Mb(1,l),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},v.yx=function(u,o,s){s[0]=u[1]*o[2]-o[1]*u[2],s[1]=u[2]*o[0]-o[2]*u[0],s[2]=u[0]*o[1]-o[0]*u[1]},v.Ut=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},v.qn=function(u){return v.ip(v.ip(u[0],u[1]),u[2])},v.el=function(u,o,s,n,l,c,p,f){u=v.n(u,o,s);var g=Math.cos(s);c.u=(u+l)*g*Math.cos(n),p.u=(u+l)*g*Math.sin(n),f.u=(u*(1-o)+l)*Math.sin(s)},v.eO=function(u,o,s,n,l,c,p){var f=v.ip(o,s),g=1*Math.sqrt(1-u),w=g/1;if(k.$(f,0))c.u=0,l.u=k.Mb(1.570796326794897,n),p.u=k.R(n)-g;else{c.u=Math.atan2(s,o),s=Math.atan2(1*n,g*f),c=Math.cos(s);var x=Math.sin(s);o=g*u/(1-u),u*=1,s=Math.atan2(n+o*x*x*x,f-u*c*c*c),3.141592653589793<k.R(s)&&(s=k.Mb(3.141592653589793,s)-s),s=Math.atan(w*Math.tan(s)),x=Math.sin(s),c=Math.cos(s),l.u=Math.atan2(n+o*x*x*x,f-u*c*c*c),1.570796326794897<k.R(l.u)&&(l.u=k.Mb(3.141592653589793,l.u)-l.u),s=Math.atan(w*Math.tan(l.u)),x=Math.sin(s),c=Math.cos(s),p.u=(n-g*x)*Math.sin(l.u)+(f-1*c)*Math.cos(l.u)}},v.n=function(u,o,s){return s=Math.sin(s),u/Math.sqrt(1-o*s*s)},v.pt=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},v.Sj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},v.Tq=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var s=Math.sqrt(1-u),n=(1-s)/(1+s),l=n*n,c=n*l,p=n*c,f=n*p,g=n*f,w=n*g,x=1.572916666666667*c-3.2578125*f+4.295068359375*w;u=2.142578125*p-6.071484375*g,s=3.129296875*f-11.249837239583334*w;var T=4.775276692708333*g,E=7.958636765252976*w,O=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*w-x+s-E+O*(2*(1.3125*l-1.71875*p+1.650146484375*g)-4*u+6*T+O*(4*x-12*s+24*E+O*(8*u-32*T+O*(16*s-80*E+O*(32*T+64*O*E))))))}for(s=1-u,n=u/2,c=(l=k.R(o))*v.av(u)/(1.570796326794897*s),p=9999,g=l,l=0;1e-16<p&&50>l;l++)w=v.w(u,g),f=g-(x=(f=(v.fG(g,u)-n*Math.sin(2*g)/w)/s-c)/(w=1/(w*w*w))),p=k.R(x),g=f;return 0<=o?g:-g},v.lW=function(u,o){return k.vi(o)?u:u*v.av(o)/1.570796326794897},v.ca=function(u){return 0>(u=v.kF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>k.R(u)||k.$(k.R(u),3.141592653589793)?u:u-6.283185307179586},v.kF=function(u,o){return u-Math.floor(u/o)*o},v.Ch=function(u,o){if(.006884661117170036>o){var s=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=s*s;return u/(1+o)*(1+.25*s+.015625*n+.00390625*s*n)*1.570796326794897}return u*v.av(o)},v.Xq=function(u,o){var s=k.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=k.R(v.kF(o,3.141592653589793)))?o:3.141592653589793-o,(k.$(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*s},v.q=function(u,o,s){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,l=o*n,c=o*l,p=o*c,f=o*p,g=o*f,w=-.7291666666666666*l+.2278645833333333*p+.03987630208333334*g,x=.615234375*c-.21533203125*f,T=-.54140625*p+.20302734375*g,E=.48876953125*f,O=-.4488699776785715*g,C=Math.cos(2*s);return u/(1+o)*((1+.25*n+.015625*c+.00390625*f)*s+Math.sin(2*s)*(-1.5*o+.1875*l+.0234375*p+.00732421875*g-w+T-O+C*(2*(.9375*n-.234375*c-.03662109375*f)-4*x+6*E+C*(4*w-12*T+24*O+C*(8*x-32*E+C*(16*T-80*O+C*(32*E+64*C*O)))))))}return u*(v.fG(s,o)-.5*o*Math.sin(2*s)/v.w(o,s))},v.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},v.av=function(u){return k.FC(u,1,2220446049250313e-31)?1:1>u?v.Zw(0,1-u)-u/3*v.Ww(0,1-u):NaN},v.fG=function(u,o){var s=k.Mb(1,u);u=k.R(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(k.Dd(n))o=(u=v.sin(u))*v.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Ww(1-u*u,1-o*u*u);else{var l=h.P.truncate(n%2),c=v.av(o);0<l?o=c*(n+1)-(o=(u=Math.sin(1.570796326794897*(n+1)-u))*v.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Ww(1-u*u,1-o*u*u)):o=c*n+(o=(u=Math.sin(u-1.570796326794897*n))*v.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Ww(1-u*u,1-o*u*u))}return o*s},v.sin=function(u){u=v.ca(u);var o=k.Mb(1,u);return u=k.R(u),k.$(u,3.141592653589793)?0:k.$(u,1.570796326794897)?1*o:Math.sin(u)*o},v.Ww=function(u,o){var s,n,l,c,p=u,f=o,g=1;for(o=0,u=1;n=((s=.2*(p+f+3*g))-p)/s,l=(s-f)/s,c=(s-g)/s,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));)c=Math.sqrt(f),o+=u/((s=Math.sqrt(g))*(g+(c=Math.sqrt(p)*(c+s)+c*s))),u*=.25,p=.25*(p+c),f=.25*(f+c),g=.25*(g+c);return f=(p=n*l)-(g=c*c),3*o+u*(1+(g=p-6*g)*(.10227272727272728*g-.2142857142857143-.1730769230769231*c*(n=g+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*p)))/(s*Math.sqrt(s))},v.Zw=function(u,o){for(var s,n,l,c,p=1;n=2-((s=(u+o+p)/3)+u)/s,l=2-(s+o)/s,c=2-(s+p)/s,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));p=.25*(p+s))s=Math.sqrt(o),n=Math.sqrt(p),u=.25*(u+(s=Math.sqrt(u)*(s+n)+s*n)),o=.25*(o+s);return(1+(.04166666666666666*(u=n*l-c*c)-.1-.06818181818181818*(o=n*l*c))*u+.07142857142857142*o)/Math.sqrt(s)},v.Sw=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var s=u*u,n=u*s,l=u*n,c=u*l,p=u*c,f=u*p,g=-(.02708333333333333*n+.03430059523809524*l+.03149181547619048*c+.02634359154541446*p+.02156896735835538*f),w=.007669890873015873*l+.01299603174603175*c+.0148051353064374*p+.01454454953803912*f,x=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*f),T=.0006957236677288761*p+.001775193002406544*f,E=-.000217324089394402*f,O=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*s+.09375*n+.04878472222222222*l+.02916666666666667*c+.01938905423280423*p+.01388255931712963*f)-g+x-E+O*(2*(.1041666666666667*s+.0875*n+.06050347222222222*l+.04151785714285714*c+.02958958540013228*p+.02203667534722222*f)-4*w+6*T+O*(4*g-12*x+24*E+O*(8*w-32*T+O*(16*x-80*E+O*(32*T+64*O*E))))))}return o==0||k.$(k.R(o),1.570796326794897)?s=o:(l=(n=Math.sqrt(u))*Math.sin(o),s=Math.tan(.7853981633974483+o/2)*Math.pow((1-l)/(1+l),n/2),s=2*Math.atan(s)-1.570796326794897),s},v.tO=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var s=u*(T=u*(x=u*(O=u*u))),n=u*(E=u*s),l=.05833333333333333*x+.07232142857142858*T+.05634300595238095*s+.0355325796406526*E+.020235546186067*n,c=.02653149801587302*T+.04379960317460317*s+.0429211791776896*E+.03255384637546096*n,p=.01294022817460318*s+.02668104344536636*E+.03155651254609588*n,f=.00659454790965208*E+.0163075268674227*n,g=.003463473736911237*n,w=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*O+.08333333333333333*x+.03611111111111111*T+.01875*s+.01195601851851852*E+.008863673941798942*n-l+p-g+w*(2*(.1458333333333333*O+.1208333333333333*x+.07039930555555556*T+.03616071428571429*s+.01839451058201058*E+.01017113095238095*n)-4*c+6*f+w*(4*l-12*p+24*g+w*(8*c-32*f+w*(16*p-80*g+w*(32*f+64*w*g))))))}var x=Math.sqrt(u),T=x/2,E=Math.tan(.7853981633974483+o/2);u=0,l=1;for(var O=o;l!=0;O=n)s=x*Math.sin(O),n=E*Math.pow((1+s)/(1-s),T),n=2*Math.atan(n)-1.570796326794897,u++,(k.$(n,O)||3e4<u)&&(l=0);return O},v}()}(U||(U={})),function(h){var k=function(){function v(u){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new h.h,this.SH=new h.h,this.FA=!1,this.xq=new h.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=u,this.Cs=h.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var o=u.getCode();0<o?(this.Mk=o,h.qf.getCode(u)):this.Mk=h.qf.getCode(u),0>this.Mk&&(this.Mk=0);var s=this.Re.getType();if(this.eH=s==h.Tc.PE_TYPE_PROJCS?2:1,s==h.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");o=s==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),s!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(o),this.Go=u.getUnit(),this.MH=o.getPrimem().getLongitude(),this.rH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.BA=u,s&h.Tc.PE_TYPE_PROJCS?(o=this.Re,this.CA=1/o.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(o,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,s=1/o.getUnit().getUnitFactor(),this.uw=.001/o.getDatum().getSpheroid().getAxis()*s,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return v.prototype.cs=function(){return this.Mk},v.prototype.mk=function(){return this.vw},v.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.Mk==0&&o.Mk==0&&u.Cs===o.Cs},v.prototype.Xc=function(){return this.Bl},v.prototype.ih=function(u){u.L(this.uo)},v.prototype.rv=function(){return this.uo.v},v.prototype.qv=function(){return this.uo.C},v.prototype.BR=function(u){u.L(this.ww)},v.prototype.hY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){u=this.Re;var o=this.mk().getCentralMeridian(),s=u.getGeogcs();if(s==null)throw h.i.ga("internal error");o=[[o+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(u,1,o),o=o[0][0],s=u.getParameters()[h.Tc.PE_PARM_X0].getValue();var n=this.ol();u=new h.l,n.A(u),o=(n=Math.abs(o-s))+s,s=-1*n+s,n=u.H,u=u.G;var l=new h.l;l.L(s,u,o,n),this.uo==null&&(this.uo=l)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");s=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-s,-s/2,s,s/2),this.uo==null&&(this.uo=u)}},v.prototype.iY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){var o=this.Re;if(u=this.mk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.ga("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var s=this.Xr(),n=new h.l;s.A(n),(s=new h.l).L(u-o,n.G,u+o,n.H),this.ww==null&&(this.ww=s)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");o=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-o,-o/2,o,o/2),this.ww==null&&(this.ww=u)}},v.prototype.bf=function(){return this.BA},v.prototype.rm=function(){return this.CA},v.prototype.Xr=function(){if(this.Bl)return this.wl;var u=this.wl;return u??(this.wx(),this.wl)},v.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},v.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=this.Re,o=u.getGeogcs(),s=u.horizonGcsGenerate();if(s!=null){var n=s[0].getNump(),l=s[0].getKind();u=0<s[0].getInclusive();var c=this.bf(),p=90*c,f=360*c,g=370*c,w=180*c*h.Tc.PE_HORIZON_DELTA/Math.PI,x=new h.l,T=null;if(1<n){for(var E=1;E<n;E++)if(s[E].getKind()==h.Tc.PE_HORIZON_LINE){T==null&&(T=new h.Ua);var O=s[E].getCoord();T.rx(O[0][0],O[0][1]),T.Aj(O[1][0],O[1][1])}}if(l==h.Tc.PE_HORIZON_RECT)s=s[0].getCoord(),x.L(s[0][0],s[0][1]),x.$b(s[1][0],s[1][1]),Math.abs(x.H-p)<1e-7*w&&(x.H=p),Math.abs(x.G+p)<1e-7*w&&(x.G=-p),x.S()>g&&(s=-400*c,x.L(s,x.G,s+5*f,x.H)),s=new h.Hh(x),this.wl==null&&(this.wl=s,this.Kv=u);else{if(g=new h.Ea,f=this.mk().isGcsHorizonMultiOverlap(),x=h.iu.XE(o,h.ju.Integer64),f){for(g=new h.bL,w=h.Ih.local().W(g,x,null),E=0;E<n;E++)if(s[E].getKind()==h.Tc.PE_HORIZON_POLY){for(o=s[E].getSize(),c=s[E].getCoord(),l=[],p=0;p<o;p++)l[p]=h.h.construct(c[p][0],c[p][1]);s[E].getInclusive(),f&&((c=new h.Ea).$k(l,o-1),g.VX(c),w.re())}g=w.next()}else for(E=0;E<n;E++)if(s[E].getKind()==h.Tc.PE_HORIZON_POLY){for(o=s[E].getSize(),c=s[E].getCoord(),f=[],p=0;p<o;p++)f[p]=h.h.construct(c[p][0],c[p][1]);s[E].getInclusive(),g.$k(f,o-1)}u?h.Zj.local().yn(g,x,1):h.mp.local().yn(g,x,1),h.fj.local().yn(g,x,1),this.wl==null&&(this.wl=g,this.Kv=u,this.TG=T)}}}},v.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},v.prototype.yK=function(){if(this.eH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var s=u[0].getNump(),n=!1;if(o==h.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(s=new h.l).L(u[0][0],u[0][1]),s.$b(u[1][0],u[1][1]),u=new h.Hh(s);else{for(o=-1,n=0;n<s;n++)u[n].getKind()==h.Tc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),s=[],o=0;o<n;o++)s[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Ea,o.$k(s,n),n=!0}this.mk().isDensificationNeeded()&&(s=1e5*this.rm(),u=h.Zl.local().W(u,s,null)),n&&(n=new h.Hh,u.dn(n),u.He(),u.Rb(),u.kR(),h.Zj.local().yn(u,null,1)),this.Ws==null&&(this.Ws=u)}}},v.prototype.ol=function(){if(this.Bl)return this.Ws;var u=this.Ws;return u??(this.yK(),this.Ws)},v.prototype.jY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.gj.geogToProj(this.Re,2,u);var o=this.mk(),s=o.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(s&&this.CH.na(u[0][0],u[0][1]),o&&this.SH.na(u[1][0],u[1][1]))}this.FA=!0},v.prototype.xK=function(){if(this.eH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},v.prototype.cR=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.xK(),u.L(this.xq)},v.prototype.Wp=function(){return this.MH},v.prototype.Bi=function(){return this.Xz},v.prototype.Id=function(){return this.Go},v.prototype.Zr=function(){return this.rH},v}();h.JC=k}(U||(U={})),function(h){var k=function(){function v(u){this.FT=u,this.Cs=h.Ab.zv(u,0,!0);var o=u.getCode();this.us=0<o?o:h.qf.getCode(u),0>this.us&&(this.us=0),this.Go=o=this.FT.getUnit(),this.DH=1/o.getUnitFactor(),h.qf.getCode(u)}return v.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.us==0&&o.us==0&&u.Cs===o.Cs},v.prototype.cs=function(){return this.us},v}();h.KL=k}(U||(U={})),function(h){h.$g=function(){function k(){}return k.ub=function(v,u,o,s,n,l,c,p){if(l!=null||c!=null||p!=null){s=h.F.ca(s),u=h.F.ca(u),o=h.F.ca(o),n=h.F.ca(n),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),1.570796326794897<h.s.R(n)&&(n=h.s.Mb(3.141592653589793,n)-n,s=h.F.ca(s+3.141592653589793));var f=h.F.ca(s-u);if(h.s.$(o,n)&&(h.s.$(u,s)||h.s.$(h.s.R(o),1.570796326794897)))l!=null&&(l.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(h.s.$(o,-n)){if(h.s.$(h.s.R(o),1.570796326794897))return l!=null&&(l.u=3.141592653589793*v),c!=null&&(c.u=0<o?h.F.ca(3.141592653589793-h.F.ca(s)):h.F.ca(s)),void(p!=null&&(p.u=0<o?h.F.ca(s):h.F.ca(3.141592653589793-h.F.ca(s))));if(h.s.$(h.s.R(f),3.141592653589793))return l!=null&&(l.u=3.141592653589793*v),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var g=h.s.R(o)==1.570796326794897?0:Math.cos(o),w=Math.sin(o),x=h.s.R(n)==1.570796326794897?0:Math.cos(n),T=Math.sin(n),E=h.s.R(f)==1.570796326794897?0:Math.cos(f),O=h.s.R(f)==3.141592653589793?0:Math.sin(f);if(l!=null){var C=Math.sin((n-o)/2);f=Math.sin(f/2),l.u=2*Math.asin(Math.sqrt(C*C+g*x*f*f))*v}c!=null&&(c.u=h.s.$(h.s.R(o),1.570796326794897)?0>o?s:h.F.ca(3.141592653589793-s):Math.atan2(x*O,g*T-w*x*E)),p!=null&&(h.s.$(h.s.R(n),1.570796326794897)?p.u=0>n?u:h.F.ca(3.141592653589793-u):(p.u=Math.atan2(g*O,T*g*E-x*w),p.u=h.F.ca(p.u+3.141592653589793)))}}},k.sf=function(v,u,o,s,n,l,c){if(l!=null||c!=null){u=h.F.ca(u),o=h.F.ca(o),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),h.s.$(h.s.R(o),1.570796326794897)&&(u=0),n=h.F.ca(n);var p=h.s.$(h.s.R(n),1.570796326794897)?0:Math.cos(n),f=h.s.$(h.s.R(n),3.141592653589793)?0:Math.sin(n),g=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),w=Math.sin(o);v=s/v,s=h.s.$(h.s.R(v),1.570796326794897)?0:Math.cos(v);var x=h.s.$(h.s.R(v),3.141592653589793)?0:Math.sin(v),T=Math.asin(w*s+g*x*p);c!=null&&(c.u=T),l!=null&&(l.u=h.s.$(h.s.R(T),1.570796326794897)?h.s.$(o,-T)?0>T?n:h.F.ca(3.141592653589793-n):u:h.s.$(h.s.R(o),1.570796326794897)&&h.s.$(v,3.141592653589793)?0>o?n:h.F.ca(3.141592653589793-n):h.F.ca(u+Math.atan2(x*f,g*s-w*x*p)))}},k}()}(U||(U={})),function(h){h.Yk=function(){function k(){}return k.ub=function(v,u,o,s,n,l,c,p,f){var g=new h.ha(0),w=new h.ha(0),x=[0,0,0],T=[0,0,0],E=[0,0,0],O=new h.ha(0),C=new h.ha(0),N=new h.ha(0),D=new h.ha(0),z=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(v,o,s,n,l,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var R=h.F.ca(n-o);if(h.s.$(s,l)&&(h.s.$(o,n)||h.s.$(h.s.R(s),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(s,-l)){if(h.s.$(h.s.R(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0<s?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<s?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(R),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else(h.s.$(h.s.R(s),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897))&&(h.s.$(h.s.R(s),1.570796326794897)?o=n:n=o);var G=0;if(0>R){G=1;var W=o;o=n,n=W,W=s,s=l,l=W}R=h.F.pt(u,s);var H=h.F.pt(u,l);p==null&&f==null||(h.$g.ub(v,o,R,n,H,null,g,w),g=Math.atan2(Math.sin(g.u)*Math.cos(s-R),Math.cos(g.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(l-H),Math.cos(w.u)),G!=0&&(W=g,g=w,w=W),p!=null&&(p.u=g),f!=null&&(f.u=w)),c!=null&&(h.F.el(1,u,s,o,0,N,D,z),x[0]=N.u,x[1]=D.u,x[2]=z.u,h.F.el(1,u,l,n,0,N,D,z),T[0]=N.u,T[1]=D.u,T[2]=z.u,E[0]=x[1]*T[2]-T[1]*x[2],E[1]=-(x[0]*T[2]-T[0]*x[2]),E[2]=x[0]*T[1]-T[0]*x[1],u=1-h.F.w(u,h.F.Xq(u,h.F.Sj(u,Math.acos(E[2]/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]))))),u*=2-u,p=Math.atan2(-E[1],-E[0]),E=h.F.ca(p-1.570796326794897),p=h.F.ca(p+1.570796326794897),E=h.s.R(h.F.ca(o-E))<=h.s.R(h.F.ca(o-p))?E:p,h.$g.ub(1,E,0,o,R,O,null,null),h.$g.ub(1,E,0,n,H,C,null,null),3.141592653589793<O.u+C.u&&(E=h.F.ca(E+3.141592653589793),h.$g.ub(1,E,0,o,R,O,null,null),h.$g.ub(1,E,0,n,H,C,null,null)),O.u*=h.s.Mb(1,s),C.u*=h.s.Mb(1,l),O.u=h.F.Sj(u,O.u),C.u=h.F.Sj(u,C.u),o=h.F.q(v,u,O.u),v=h.F.q(v,u,C.u),c.u=h.s.R(v-o))}}},k.sf=function(v,u,o,s,n,l,c,p){var f=0,g=new h.ha(0),w=new h.ha(0),x=[0,0,0],T=[0,0,0],E=new h.ha(0),O=new h.ha(0),C=new h.ha(0);if(c!=null||p!=null)if(h.s.vi(u))h.$g.sf(v,o,s,n,l,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=s);else if(l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),o=h.F.ca(o),s=h.F.ca(s),1.570796326794897<h.s.R(s)&&(o=h.F.ca(o+3.141592653589793),s=h.s.Mb(3.141592653589793,s)-s),h.s.$(h.s.R(s),1.570796326794897)&&(o=0),h.s.Dd(s)){var N=h.s.R(1.570796326794897-h.s.R(l));N=h.F.Sj(u,N),N=1-h.F.w(u,h.F.Xq(u,N)),N*=2-N,v=n/h.F.Ch(v,N)*1.570796326794897,v=h.F.Tq(N,v),v=h.F.pt(N,v),h.$g.sf(1,o,s,v,l,c,g),p!=null&&(f=g.u),p!=null&&(p.u=h.F.Sj(u,f))}else if(h.s.$(h.s.R(s),1.570796326794897))g=2*(f=h.F.Ch(v,u)),l=0<(v=h.s.Mb(1.570796326794897,s))?h.F.ca(3.141592653589793-l):l,s=f-n,h.s.R(s)<=f?c!=null&&(c.u=l):(s=Math.floor(n/g),h.P.truncate(s%2)==0?(c!=null&&(c.u=l),n-=s*g):(c!=null&&(c.u=h.F.ca(l+3.141592653589793)),n=(s+1)*g-n),s=f-n),p!=null&&(p.u=h.F.Tq(u,s/f*v));else{N=h.F.pt(u,s),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(s-N));var D=h.P.truncate(h.s.Mb(1,N))*(1.570796326794897>=h.s.R(l)?1:-1);l=h.F.ca(o+Math.atan(Math.tan(l)*-Math.sin(N))),h.$g.ub(v,l,0,o,N,null,w,null),N=h.s.R(1.570796326794897-h.s.R(w.u)),N=h.F.Sj(u,N),N=1-h.F.w(u,h.F.Xq(u,N)),N*=2-N,h.F.el(1,u,0,l,0,E,O,C),x[0]=E.u,x[1]=O.u,x[2]=C.u,h.F.el(1,u,s,o,0,E,O,C),T[0]=E.u,T[1]=O.u,T[2]=C.u,s=Math.acos((x[0]*T[0]+x[1]*T[1]+x[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),s=h.F.Sj(N,s),n=0<(s=h.F.q(v,N,s)+n*D)?w.u:h.F.ca(w.u+3.141592653589793),v=h.s.R(s)/h.F.Ch(v,N)*1.570796326794897,v=h.F.Tq(N,v),v=h.F.pt(N,v),h.$g.sf(1,l,0,v,n,c,g),p!=null&&(f=g.u),p!=null&&(p.u=h.F.Sj(u,f))}},k}()}(U||(U={})),function(h){h.eu=function(){function k(){}return k.ub=function(v,u,o,s,n,l,c,p,f){var g=0,w=0,x=0;if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(v,o,s,n,l,c,p,f);else{var T=h.F.ca(n-o);if(h.s.$(s,l)&&(h.s.Dd(T)||h.s.$(h.s.R(s),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(s,-l)){if(h.s.$(h.s.R(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0<s?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<s?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(T),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(s),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897)||h.s.Dd(T)||h.s.$(h.s.R(T),3.141592653589793))return void h.Yk.ub(v,u,o,s,n,l,c,p,f);var E=1-Math.sqrt(1-u),O=u/(1-u),C=v*(1-E);v=h.F.Xq(u,s);var N=h.F.Xq(u,l);u=h.s.R(v)==1.570796326794897?0:Math.cos(v);var D=Math.sin(v),z=h.s.R(N)==1.570796326794897?0:Math.cos(N),R=Math.sin(N),G=T,W=Math.cos(G),H=Math.sin(G),ee=1,X=0;do{var ne=G,ce=Math.sqrt(Math.pow(z*H,2)+Math.pow(u*R-D*z*W,2)),ue=D*R+u*z*W,Ee=Math.atan2(ce,ue);if(ce==0){ee=0;break}var ye=u*z*H/ce;if(g=Math.cos(Math.asin(ye)),w=ue-2*D*R/(g*=g),1<h.s.R(w)&&(w=h.s.Mb(1,w)),G=T+(1-(G=E/16*g*(4+E*(4-3*g))))*E*ye*(Ee+G*ce*(w+G*ue*(2*(x=w*w)-1))),W=Math.cos(G),H=Math.sin(G),X++,3.141592653589793<h.s.R(G)&&30<X){ee=0;break}}while(5e3>=X&&!h.s.$(ne,G));if(ee!=0)E=(O*=g)*(256+O*(O*(74-47*O)-128))/1024,c!=null&&(c.u=C*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Ee-E*ce*(w+E/4*(ue*(2*x-1)-E/6*w*(4*ce*ce-3)*(4*x-3))))),p!=null&&(p.u=h.s.$(h.s.R(s),1.570796326794897)?0>s?n:h.F.ca(3.141592653589793-n):Math.atan2(z*H,u*R-D*z*W)),f!=null&&(h.s.$(h.s.R(l),1.570796326794897)?f.u=0>l?o:h.F.ca(3.141592653589793-o):(f.u=Math.atan2(u*H,u*R*W-D*z),f.u=h.F.ca(f.u+3.141592653589793)));else{G=h.s.Mb(3.141592653589793,T),ue=D*R-u*z,Ee=Math.acos(ue),ce=Math.sin(Ee),g=1,X=ye=0;do x=ye,W=1-.25*(ye=E*(g*=g)*(1+E+E*E))+.1875*(w=E*E*(W=g*g)*(1+2.25*E))-.1953125*(ee=E*E*E*W*g),ye=.25*ye-.25*w+.29296875*ee,H=.03125*w-.05859375*ee,ee*=.00651041666666667,w=ue-2*D*R/g,1<h.s.R(w)&&(w=h.s.Mb(1,w)),g=Math.acos(w),ue=Math.cos(2*g),ne=Math.cos(3*g),H=(ye=h.s.$(s,-l)?h.F.ca(3.141592653589793-T)/(3.141592653589793*E*W):h.F.ca(G-T)/(E*(W*Ee+ye*ce*w+H*Math.sin(2*Ee)*ue+ee*Math.sin(3*Ee)*ne)))*ce/(u*z),G=1.570796326794897<h.s.R(T)?h.s.Mb(3.141592653589793,H)-Math.asin(H):Math.asin(H),W=Math.cos(G),ce=Math.sqrt(Math.pow(z*H,2)+Math.pow(u*R-D*z*W,2)),Ee=3.141592653589793-Math.asin(h.s.R(ce)),ue=Math.cos(Ee),g=Math.cos(Math.asin(ye)),X++;while(70>=X&&!h.s.$(x,ye));c!=null&&(W=1+(O*=g*=g)*(4096+O*(O*(320-175*O)-768))/16384,h.s.$(s,-l)?c.u=3.141592653589793*C*W:(w=ue-2*D*R/g,g=Math.acos(w),ue=Math.cos(2*g),ne=Math.cos(3*g),c.u=C*(W*Ee+O*(O*(128+O*(35*O-60))-512)/2048*ce*w+O*(5*O-4)/6144*O*O*Math.sin(2*Ee)*ue+ee*Math.sin(3*Ee)*ne+-762939453125e-16*O*O*O*O*Math.sin(4*Ee)*Math.cos(4*g)))),p!=null&&(h.s.Dd(s)&&h.s.Dd(l)?(g=Math.sqrt(1-ye*ye),p.u=Math.acos(g),0>T&&(p.u*=-1)):h.s.$(h.s.R(s),1.570796326794897)?p.u=0>s?n:h.F.ca(3.141592653589793-n):(c=ye/u,C=Math.sqrt(1-c*c),0>u*R-D*z*Math.cos(G)&&(C*=-1),p.u=Math.atan2(c,C),h.s.$(s,-l)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(0<s&&1.570796326794897>h.s.R(p.u)||0>s&&1.570796326794897<h.s.R(p.u))&&(p.u=h.s.Mb(3.141592653589793,p.u)-p.u))),f!=null&&(h.s.Dd(s)&&h.s.Dd(l)?(g=Math.sqrt(1-ye*ye),f.u=Math.acos(g),0<=T&&(f.u*=-1)):h.s.$(h.s.R(l),1.570796326794897)?f.u=0>l?o:h.F.ca(3.141592653589793-o):(T=ye/z,c=Math.sqrt(1-T*T),C=Math.sin(G/2),0>Math.sin(N-v)-2*u*R*C*C&&(c*=-1),f.u=Math.atan2(T,c),f.u=h.F.ca(f.u+3.141592653589793),h.s.$(s,-l)&&!h.s.Dd(s)&&!h.s.$(h.s.R(s),1.570796326794897)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(p!=null?C=p.u:(c=ye/u,C=Math.sqrt(1-c*c),0>u*R-D*z*Math.cos(G)&&(C*=-1),C=Math.atan2(c,C),h.s.$(s,-l)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(0<s&&1.570796326794897>h.s.R(C)||0>s&&1.570796326794897<h.s.R(C))&&(C=h.s.Mb(3.141592653589793,C)-C)),1.570796326794897>=h.s.R(C)&&1.570796326794897<h.s.R(f.u)||1.570796326794897<=h.s.R(C)&&1.570796326794897>h.s.R(f.u))&&(f.u=-1*h.F.ca(f.u+3.141592653589793))))}}}},k.sf=function(v,u,o,s,n,l,c,p){if(c!=null||p!=null)if(h.s.vi(u))h.$g.sf(v,o,s,n,l,c,p);else if(l=h.F.ca(l),h.s.$(h.s.R(s),1.570796326794897)||h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))h.Yk.sf(v,u,o,s,n,l,c,p);else{var f=h.s.R(l)==1.570796326794897?0:Math.cos(l),g=h.s.R(l)==3.141592653589793?0:Math.sin(l);h.s.$(h.s.R(s),1.570796326794897)&&(o=0),l=1-Math.sqrt(1-u);var w=h.F.Xq(u,s);s=h.s.R(w)==1.570796326794897?0:Math.cos(w);var x=Math.sin(w);w=Math.atan2(Math.tan(w),f);var T=s*g,E=T*T,O=1-E,C=u/(1-u)*O,N=(u=C*(256+C*(C*(74-47*C)-128))/1024)/4,D=u/6,z=n/(v*(1-l)*(1+C*(4096+C*(C*(320-175*C)-768))/16384)),R=z;do{var G=R;n=h.s.R(R)==1.570796326794897?0:Math.cos(R);var W=(C=h.s.R(R)==3.141592653589793?0:Math.sin(R))*C;R=u*C*((v=Math.cos(2*w+R))+N*(n*(2*(R=v*v)-1)-D*v*(4*W-3)*(4*R-3)))+z}while(!h.s.$(G,R));n=h.s.R(R)==1.570796326794897?0:Math.cos(R),C=h.s.R(R)==3.141592653589793?0:Math.sin(R),c!=null&&(g=Math.atan2(C*g,s*n-x*C*f),O=l/16*O*(4+l*(4-3*O)),v=Math.cos(2*w+R),c.u=h.F.ca(o+(g-(1-O)*l*T*(R+O*C*(v+O*n*(2*v*v-1)))))),p!=null&&(O=x*C-s*n*f,O=(1-l)*Math.sqrt(E+O*O),p.u=Math.atan2(x*n+s*C*f,O))}},k}()}(U||(U={})),function(h){h.KC=function(){function k(){}return k.ub=function(v,u,o,s,n,l,c,p,f){var g=h.F.ca(n-o),w=h.s.$(h.s.R(s),1.570796326794897),x=h.s.$(h.s.R(l),1.570796326794897);if(h.s.$(s,l)&&(h.s.Dd(g)||w))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.vi(u)){var T=Math.sin(s),E=Math.sin(l);T=Math.sqrt((1+T)/(1-T)),E=Math.sqrt((1+E)/(1-E)),T=Math.log(E)-Math.log(T),T=Math.atan2(g,T),c!=null&&(c.u=h.s.$(s,l)?h.s.R(v*Math.cos(s)*g):h.s.R((v*l-v*s)/Math.cos(T)))}else E=h.F.Sw(u,l),T=Math.sin(h.F.Sw(u,s)),E=Math.sin(E),T=Math.sqrt((1+T)/(1-T)),E=Math.sqrt((1+E)/(1-E)),T=Math.log(E)-Math.log(T),T=Math.atan2(g,T),c!=null&&(h.s.$(s,l)?c.u=h.s.R(v*g*Math.cos(s)/h.F.w(u,s)):(g=h.F.q(v,u,s),v=h.F.q(v,u,l),c.u=h.s.R((v-g)/Math.cos(T))));p==null&&f==null||(c=h.F.ca(T+3.141592653589793),w&&x||!w&&!x||(w?T=0>s?n:h.F.ca(3.141592653589793-n):x&&(c=0>l?o:h.F.ca(3.141592653589793-o))),p!=null&&(p.u=T),f!=null&&(f.u=c))}},k.sf=function(v,u,o,s,n,l,c,p){l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),h.s.vi(u)?h.s.$(h.s.R(s),1.570796326794897)?(o=0>s?l:h.F.ca(3.141592653589793-l),3.141592653589793>=(l=n/v%6.283185307179586)?v=s-h.s.Mb(l,s):(o=h.F.ca(o+3.141592653589793),v=-s+h.s.Mb(l-3.141592653589793,s))):h.s.$(h.s.R(l),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,l)/(v*Math.cos(s))),v=s):(v=s+n*Math.cos(l)/v,1.570796326794897<h.s.R(v)&&(v=1.570796326794897),h.s.$(h.s.R(v),1.570796326794897)&&(h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))||(1.570796316258184<h.s.R(v)&&(v=h.s.Mb(1.570796316258184,v)),u=Math.sin(s),s=Math.sin(v),u=Math.sqrt((1+u)/(1-u)),s=Math.sqrt((1+s)/(1-s)),u=Math.log(s)-Math.log(u),o=h.F.ca(o+Math.tan(l)*u))):h.s.$(h.s.R(s),1.570796326794897)?(o=0>s?l:h.F.ca(3.141592653589793-l),l=n/h.F.lW(v,u),3.141592653589793>=(l%=6.283185307179586)?v=s-h.s.Mb(l,s):(o=h.F.ca(o+3.141592653589793),v=-s+h.s.Mb(l-3.141592653589793,s)),v=h.F.Tq(u,v)):h.s.$(h.s.R(l),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,l)*h.F.w(u,s)/(v*Math.cos(s))),v=s):(v=1.570796326794897*(n*Math.cos(l)+h.F.q(v,u,s))/h.F.Ch(v,u),1.570796326794897<h.s.R(v)&&(v=h.s.Mb(1.570796326794897,v)),v=h.F.Tq(u,v),h.s.$(h.s.R(v),1.570796326794897)&&(h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))||(n=h.F.Sw(u,s),s=h.F.Sw(u,v),1.570796316258184<h.s.R(s)&&(s=h.s.Mb(1.570796316258184,v),v=h.F.tO(u,s)),u=Math.sin(n),s=Math.sin(s),u=Math.sqrt((1+u)/(1-u)),s=Math.sqrt((1+s)/(1-s)),u=Math.log(s)-Math.log(u),o=h.F.ca(o+Math.tan(l)*u))),c!=null&&(c.u=o),p!=null&&(p.u=v)},k}()}(U||(U={})),function(h){h.kb=function(){function k(){}return k.Sy=function(v,u,o,s,n,l,c){h.eu.ub(v,u,o,s,n,l,null,c,null)},k.Ai=function(v,u,o,s,n,l,c,p){h.eu.sf(v,u,o,s,n,l,c,p)},k.xd=function(v,u,o,s,n,l,c,p,f,g){switch(g){case 2:h.Yk.ub(v,u,o,s,n,l,c,p,f);break;case 3:h.LC.ub(v,u,o,s,n,l,c,p,f);break;case 1:h.KC.ub(v,u,o,s,n,l,c,p,f);break;default:h.eu.ub(v,u,o,s,n,l,c,p,f)}},k.qj=function(v,u,o,s,n,l,c,p,f){switch(f){case 2:h.Yk.sf(v,u,o,s,n,l,c,p);break;case 3:h.LC.sf(v,u,o,s,n,l,c,p);break;case 1:h.KC.sf(v,u,o,s,n,l,c,p);break;default:h.eu.sf(v,u,o,s,n,l,c,p)}},k}()}(U||(U={})),function(h){var k=function(){function u(){this.y=this.x=null}return u.construct=function(o){var s=new u;return s.x=new h.Xb,s.x.set(o.x),s.y=new h.Xb,s.y.set(o.y),s},u.QE=function(o,s){var n=new u;return n.x=new h.Xb,n.x.set(o),n.y=new h.Xb,n.y.set(s),n},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u}();h.rY=k;var v=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var s=new u;return s.x=new h.Xb,s.x.set(o.x),s.y=new h.Xb,s.y.set(o.y),s.z=new h.Xb,s.z.set(o.z),s},u.QE=function(o,s,n){var l=new u;return l.x=new h.Xb,l.x.set(o),l.y=new h.Xb,l.y.set(s),l.z=new h.Xb,l.z.set(n),l},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},u.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Sh=function(o){var s=new h.Xb,n=new h.Xb,l=new h.Xb;return s.Ml(this.x,o.x),n.Ml(this.y,o.y),l.Ml(this.z,o.z),(o=new h.Xb).ZM(s,n),o.add(l),o},u.prototype.YE=function(o){var s=new u;s.x.Ml(this.y,o.z),s.y.Ml(this.z,o.x),s.z.Ml(this.x,o.y);var n=new h.Xb,l=new h.Xb,c=new h.Xb;return n.Ml(this.z,o.y),l.Ml(this.x,o.z),c.Ml(this.y,o.x),s.x.sub(n),s.y.sub(l),s.z.sub(c),s},u}();h.sY=v,h.Nx=function(){function u(){}return u.zP=function(o,s,n){var l=s.x;s=s.y,u.el(1,o,Math.cos(l),Math.sin(l),Math.cos(s),Math.sin(s),n)},u.yP=function(o,s){var n=new h.Od;return u.zP(o,s,n),n},u.el=function(o,s,n,l,c,p,f){o/=Math.sqrt(1-s*p*p),f.L(o*c*n,o*c*l,o*(1-s)*p)},u.$u=function(o,s){var n=new h.Xb,l=new h.Xb,c=new h.Xb,p=new h.Xb;n.cos(s.x),l.sin(s.x),c.cos(s.y),p.sin(s.y);var f=new h.Xb;return f.set(p),f.Bg(p),f.Po(o),f.Po(-1),f.fN(),f.sqrt(),(s=new h.Xb).set(1),s.lm(f),(f=new h.Xb).set(s),f.Bg(c),f.Bg(n),(n=new h.Xb).set(s),n.Bg(c),n.Bg(l),(l=new h.Xb).set(s),l.Po(1-o),l.Bg(p),v.QE(f,n,l)},u.NS=function(o,s,n,l){if(Math.abs(s.x-n.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&s.x!=n.x)return NaN;if(l=u.YA(l,Math.min(s.x,n.x),Math.max(s.x,n.x)),!new h.Oc(s.x,n.x).contains(l))return NaN;var c=k.construct(s);if(n=k.construct(n),c=u.$u(o,c),n=u.$u(o,n),(n=c.YE(n)).z.rg())return s.y;var p=new h.Xb;p.set(n.x),p.lm(n.z),p.Po(-1);var f=new h.Xb;f.set(n.y),f.lm(n.z),f.Po(-1);var g=new h.Xb;return g.set(f),g.Bg(f),(c=new h.Xb).set(p),c.Bg(p),c.add(g),c.sqrt(),c.rg()||p.rg()&&f.rg()?s.y:(s=Math.atan2(f.value(),p.value()),s=Math.atan2(c.value()*Math.cos(s-l),1-o),l=u.yP(o,h.h.construct(l,s)),o=new h.Od(l.x,l.y,-l.z),l=n.value().Sh(l),o=n.value().Sh(o),Math.abs(o)<Math.abs(l)&&(s=-s),s)},u.Jz=function(o,s,n,l,c){if(c[0]=NaN,c[1]=NaN,Math.abs(s.x-n.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&s.x!=n.x||Math.abs(l)>=.5*Math.PI||0<s.y&&0<n.y&&s.y>l&&n.y>l||0>s.y&&0>n.y&&s.y<l&&n.y<l)return 0;var p=k.construct(s),f=k.construct(n);p=u.$u(o,p),f=u.$u(o,f);var g=p.YE(f);if(g.z.rg())return new h.Oc(s.y,n.y).contains(l)?(c[0]=s.x,1):0;(f=new h.Xb).set(g.x),f.lm(g.z),f.Po(-1),(p=new h.Xb).set(g.y),p.lm(g.z),p.Po(-1),(g=new h.Xb).set(p),g.Bg(p);var w=new h.Xb;return w.set(f),w.Bg(f),w.add(g),w.sqrt(),w.rg()||f.rg()&&p.rg()?l==0?(c[0]=s.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(l)/w.value(),1<Math.abs(o)?0:(o=Math.acos(o),g=Math.atan2(p.value(),f.value()),f=Math.min(s.x,n.x),p=Math.max(s.x,n.x),n=u.YA(g-o,f,p),o=l!=0?u.YA(g+o,f,p):n,l=0,f<=n&&n<=p&&(c[l]=n,l++),o!=n&&f<=o&&o<=p&&(c[l]=o,++l==2&&Math.abs(c[0]-s.x)>Math.abs(c[1]-s.x)&&(s=c[0],c[0]=c[1],c[1]=s)),l))},u.YA=function(o,s,n){return o>n?o-=2*(s=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<s&&(o+=2*(s=Math.ceil((s-o)/(2*Math.PI)))*Math.PI),o},u}()}(U||(U={})),function(h){h.SK=function(){function k(){}return k.WX=function(v,u){var o=8,s=[0,0,0,0],n=new h.h;n.N(u),n.scale(h.cb.tc(v).Id().Fc()==9102?1:h.cb.tc(v).Id().ci/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var l=-180,c=180,p=(v=5*o)-1,f=(u=(v+31)/32)-1;0<=f;f--)for(var g=p-32*f,w=Math.min(32,v-32*f),x=1;x<w;x+=2){var T=.5*(c+l);n.x>=T?(s[f]|=1<<g,l=T):c=T,g-=2,p-=2}for(l=-90,c=90,p=v-2,f=u-1;0<=f;f--)for(g=p-32*f,w=Math.min(32,v-32*f),x=0;x<w;x+=2)T=.5*(c+l),n.y>=T?(s[f]|=1<<g,l=T):c=T,g-=2,p-=2;return k.VP(s,o,o)},k.VP=function(v,u,o){for(var s=[],n=0;n<u;n++)s[n]="";for(var l=n=0,c=0;c<u;c++){var p=v[n]>>l&31;if(31<(l+=5)){var f=37-l;p&=(1<<f)-1,l-=32,p|=(v[++n]&(1<<l)-1)<<f}s[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>u)for(c=0;c<o-u;c++)s.push("0");else o<u&&(s.length=o);return s.join("")},k}()}(U||(U={})),function(h){var k={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},v={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function u(){}return u.Ny=function(o){u.zp===!1&&u.zt();var s=u.AQ(o);if(s==-1){var n=u.Ax(o);n!=o&&(s=u.Ny(n))}return s==-1&&(n=u.AK(o))!=o&&(s=u.Ny(n)),s},u.AQ=function(o){return u.Hw[o]!==void 0?u.Hw[o]:-1},u.xQ=function(o){u.zp===!1&&u.zt();var s=u.iF(o);if(s==1e38){var n=u.Ax(o);if(n!=o&&(s=u.iF(n)),s==1e38)return 1e-10}return s},u.US=function(o){if(u.Ks[o]!==void 0)return!0;var s=u.Ax(o);return s!=o&&u.Ks[s]!==void 0},u.WS=function(o){if(u.zo[o]!==void 0)return!0;var s=u.Ax(o);return s!=o&&u.zo[s]!==void 0},u.iF=function(o){return u.zp===!1&&u.zt(),u.Ks[o]!==void 0?u.Ks[o]:u.zo[o]!==void 0?u.zo[o]:1e38},u.AK=function(o){return u.zp===!1&&u.zt(),u.RA[o]!==void 0?u.RA[o]:o},u.Ax=function(o){return u.zp===!1&&u.zt(),u.SA[o]!==void 0?u.SA[o]:o},u.zt=function(){for(var o,s=k,n=0;n<s.pcsid.length;n+=2)u.zo[s.pcsid[n]]=s.pcstol[2*s.pcsid[n+1]+1];for(n=0;n<s.pcsidc.length;n+=1)for(var l=(o=s.pcsidc[n])[0];l<=o[1];l++)u.zo[l]=s.pcstol[2*o[2]+1];for(n=0;n<s.gcsid.length;n+=2)u.Ks[s.gcsid[n]]=s.gcstol[2*s.gcsid[n+1]+1];for(n=0;n<s.gcsidc.length;n+=1)for(l=(o=s.gcsidc[n])[0];l<=o[1];l++)u.zo[l]=s.gcstol[2*o[2]+1];for(n=0;n<v.c.length;n+=1)for(l=(o=v.c[n])[0];l<=o[1];l++)u.Hw[l]=o[2];for(n=0;n<v.nc.length;n+=2)u.Hw[v.nc[n]]=v.nc[n+1];for(v=null,n=0;n<s.newtoold.length;n+=2)u.RA[s.newtoold[n+1]]=s.newtoold[n],u.SA[s.newtoold[n]]=s.newtoold[n+1];k=null,u.zp=!0},u.zp=!1,u.Ks=[],u.zo=[],u.RA=[],u.SA=[],u.Hw=[],u}()}(U||(U={})),function(h){function k(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var v=[];h.SC=function(){function u(){}return u.zQ=function(o){try{for(var s=0;s<v.length;s++)if(v[s].wkttext===o)return v[s].unit;for(var n,l=s="",c=!1,p=0;p<o.length;p++){var f=o[p];c===!0?f=='"'?o[p+1]=='"'?s+=f:c=c=!1:s+=f:/[\s]/.test(f)||(f==","?(l=s!==""?l+(k(s)+","):l+",",s=""):f==")"||f=="]"?(l=s!==""?l+(k(s)+"]}"):l+"]}",s=""):f=="("||f=="["?(l+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):f=='"'?(c=!0,s=""):s+=f)}n=JSON.parse(l);var g=u.hF(n);if(g===null)return null;for(n=null,f=0;f<g.values.length;f++)if(typeof g.values[f]=="object"&&g.values[f].entity==="UNIT"){n=g.values[f];break}if(n===null)return null;var w=h.Uc.UO(g.entity==="GEOGCS"?1:0,n.values[1],n.values[2]);return v.push({wkttext:o,unit:w}),10<v.length&&v.shift(),w}catch{return null}},u.hF=function(o){if(o===null)return null;if(o.entity==="GEOGCS"||o.entity==="PROJCS")return o;for(var s=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0){if(o.values[n].entity==="GEOGCS"||o.values[n].entity=="PROJCS")return o.values[n];s.push(o.values[n])}for(o=0;o<s.length;o++)if((n=u.hF(s[o]))!==null)return n;return null},u.yQ=function(o){var s=-1;if(o!=null&&0<o.length){var n=o.indexOf("PROJCS");if(0<=n){var l=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<l&&(s=.001/l)}else if(0<=(n=o.indexOf("GEOGCS"))){var p=0;if(l=0,0<(n=o.indexOf("SPHEROID",n+6))&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&0<=(n=o.indexOf("UNIT",c+1))&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1))))try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<p&&0<l&&(s=.001/(p*l))}}return s},u}()}(U||(U={})),function(h){var k;(k=h.$K||(h.$K={}))[k.NONE=0]="NONE",k[k.LINEAR=1]="LINEAR",k[k.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(h.LL||(h.LL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var v=function(){function u(o,s){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,s!==void 0){for(this.Ba=s.Ba,this.Qq=s.Qq,this.dg=s.dg.slice(0),this.wh=s.wh.slice(0),this.yl=s.yl,this.Xs=[],o=s=0;o<this.Ba;o++)this.Xs[o]=s,s+=u.Wa(this.dg[o]);for(this.Qq=s,this.Be=[],o=0;o<this.Ba;o++){s=u.Wa(this.ld(o));for(var n=u.te(this.ld(o)),l=0;l<s;l++)this.Be[this.Xs[o]+l]=n}}else this.Qq=this.Ba=0}return u.prototype.ld=function(o){if(0>o||o>this.Ba)throw h.i.O();return this.dg[o]},u.prototype.Rf=function(o){return this.wh[o]},u.gz=function(o){return u.EM[o]},u.Vp=function(o){return u.NM[o]},u.Wa=function(o){return u.mM[o]},u.prototype.hasAttribute=function(o){return 0<=this.wh[o]},u.prototype.dG=function(){return this.hasAttribute(1)},u.te=function(o){return u.$C[o]},u.prototype.GR=function(o){return this.Xs[o]},u.yG=function(o,s){return u.$C[o]===s},u.prototype.Nb=function(o){return this===o},u.prototype.Cn=function(){for(var o=h.P.Vh(this.dg[0]),s=1;s<this.Ba;s++)o=h.P.Vh(this.dg[s],o);return o},u.prototype.bk=function(o){return this.Xs[o]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(o){return this.dg[o]},u.$C=[0,0,NaN,0,0,0,0,0,0],u.EM=[1,1,1,0,2,1,1,1,0],u.NM=[1,1,1,2,0,0,0,0,2],u.mM=[2,1,1,1,3,1,2,3,2],u}();h.sa=v}(U||(U={})),function(h){function k(c,p,f){var g=p-(c=new l(c)).e,w=c.c;for(w.length>++p&&v(c,g,l.gu),w[0]?f?g=p:(w=c.c,g=c.e+g+1):++g;w.length<g;w.push(0));return g=c.e,f===1||f&&(p<=g||g<=o)?(0>c.Cd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>g?"e":"e+")+g:c.toString()}function v(c,p,f,g){var w=c.c,x=c.e+p+1;if(f===1?g=5<=w[x]:f===2?g=5<w[x]||w[x]==5&&(g||0>x||w[x+1]!==void 0||1&w[x-1]):f===3?g=g||w[x]!==void 0||0>x:(g=!1,f!==0&&u("!Big.RM!")),1>x||!w[0])g?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(w.length=x--,g)for(;9<++w[x];)w[x]=0,x--||(++c.e,w.unshift(1));for(x=w.length;!w[--x];w.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,s=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function c(p){if(p instanceof c)this.Cd=p.Cd,this.e=p.e,this.c=p.c.slice();else{var f,g,w;for(p===0&&0>1/p?p="-0":n.test(p+="")||u(NaN),this.Cd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(f=p.indexOf("."))&&(p=p.replace(".","")),0<(g=p.search(/e/i))?(0>f&&(f=g),f+=+p.slice(g+1),p=p.substring(0,g)):0>f&&(f=p.length),g=0;p.charAt(g)=="0";g++);if(g==(w=p.length))this.c=[this.e=0];else{for(;p.charAt(--w)=="0";);for(this.e=f-g-1,this.c=[],f=0;g<=w;this.c[f++]=+p.charAt(g++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Cd=1,p},c.prototype.cmp=function(p){var f=this.c,g=(p=new c(p)).c,w=this.Cd,x=p.Cd,T=this.e,E=p.e;if(!f[0]||!g[0])return f[0]?w:g[0]?-x:0;if(w!=x)return w;if(p=0>w,T!=E)return T>(E^p)?1:-1;for(w=-1,x=(T=f.length)<(E=g.length)?T:E;++w<x;)if(f[w]!=g[w])return f[w]>(g[w]^p)?1:-1;return T==E?0:T>(E^p)?1:-1},c.prototype.lm=function(p){var f=this.c,g=(p=new c(p)).c,w=this.Cd==p.Cd?1:-1,x=c.tr;if((x!==~~x||0>x||1e6<x)&&u("!Big.DP!"),!f[0]||!g[0])return f[0]==g[0]&&u(NaN),g[0]||u(w/0),new c(0*w);var T,E,O=g.slice(),C=T=g.length,N=f.length,D=f.slice(0,T),z=D.length,R=p,G=R.c=[],W=0,H=x+(R.e=this.e-p.e)+1;for(R.Cd=w,w=0>H?0:H,O.unshift(0);z++<T;D.push(0));do{for(E=0;10>E;E++){if(T!=(z=D.length))var ee=T>z?1:-1;else{var X=-1;for(ee=0;++X<T;)if(g[X]!=D[X]){ee=g[X]>D[X]?1:-1;break}}if(!(0>ee))break;for(p=z==T?g:O;z;){if(D[--z]<p[z]){for(X=z;X&&!D[--X];D[X]=9);--D[X],D[z]+=10}D[z]-=p[z]}for(;!D[0];D.shift());}G[W++]=ee?E:++E,D[0]&&ee?D[z]=f[C]||0:D=[f[C]]}while((C++<N||D[0]!==void 0)&&w--);return G[0]||W==1||(G.shift(),R.e--),W>H&&v(R,x,c.gu,D[0]!==void 0),R},c.prototype.aS=function(){return 0<this.cmp(0)},c.prototype.iT=function(){return 0>this.cmp(0)},c.prototype.kt=function(p){var f,g=this.Cd,w=(p=new c(p)).Cd;if(g!=w)return p.Cd=-w,this.oI(p);var x=this.c.slice(),T=this.e,E=p.c,O=p.e;if(!x[0]||!E[0])return E[0]?(p.Cd=-w,p):new c(x[0]?this:0);if(g=T-O){for((f=0>g)?(g=-g,T=x):(O=T,T=E),T.reverse(),w=g;w--;T.push(0));T.reverse()}else for(T=((f=x.length<E.length)?x:E).length,g=w=0;w<T;w++)if(x[w]!=E[w]){f=x[w]<E[w];break}if(f&&(T=x,x=E,E=T,p.Cd=-p.Cd),0<(w=(T=E.length)-(f=x.length)))for(;w--;x[f++]=0);for(w=f;T>g;){if(x[--T]<E[T]){for(f=T;f&&!x[--f];x[f]=9);--x[f],x[T]+=10}x[T]-=E[T]}for(;x[--w]==0;x.pop());for(;x[0]==0;)x.shift(),--O;return x[0]||(p.Cd=1,x=[O=0]),p.c=x,p.e=O,p},c.prototype.oI=function(p){var f=this.Cd,g=(p=new c(p)).Cd;if(f!=g)return p.Cd=-g,this.kt(p);g=this.e;var w=this.c,x=p.e,T=p.c;if(!w[0]||!T[0])return T[0]?p:new c(w[0]?this:0*f);if(w=w.slice(),f=g-x){for(0<f?(x=g,g=T):(f=-f,g=w),g.reverse();f--;g.push(0));g.reverse()}for(0>w.length-T.length&&(g=T,T=w,w=g),f=T.length,g=0;f;)g=(w[--f]=w[f]+T[f]+g)/10|0,w[f]%=10;for(g&&(w.unshift(g),++x),f=w.length;w[--f]==0;w.pop());return p.c=w,p.e=x,p},c.prototype.pow=function(p){var f=this,g=new c(1),w=g,x=0>p;for((p!==~~p||-1e6>p||1e6<p)&&u("!pow!"),p=x?-p:p;1&p&&(w=w.nr(f)),p>>=1;)f=f.nr(f);return x?g.lm(w):w},c.prototype.round=function(p,f){var g=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&u("!round!"),v(g=new c(g),p,f??c.gu),g},c.prototype.sqrt=function(){var p=this.c,f=this.Cd,g=this.e,w=new c("0.5");if(!p[0])return new c(this);0>f&&u(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=p.join("")).length+g&1||(f+="0"),(p=new c(Math.sqrt(f).toString())).e=((g+1)/2|0)-(0>g||1&g)):p=new c(f.toString()),f=p.e+(c.tr+=4);do g=p,p=w.nr(g.oI(this.lm(g)));while(g.c.slice(0,f).join("")!==p.c.slice(0,f).join(""));return v(p,c.tr-=4,c.gu),p},c.prototype.nr=function(p){var f=this.c,g=(p=new c(p)).c,w=f.length,x=g.length,T=this.e,E=p.e;if(p.Cd=this.Cd==p.Cd?1:-1,!f[0]||!g[0])return new c(0*p.Cd);if(p.e=T+E,w<x){var O=f;f=g,g=O,E=w,w=x,x=E}for(O=Array(E=w+x);E--;O[E]=0);for(T=x;T--;){for(x=0,E=w+T;E>T;)x=O[E]+g[T]*f[E-T-1]+x,O[E--]=x%10,x=x/10|0;O[E]=(O[E]+x)%10}for(x&&++p.e,O[0]||O.shift(),T=O.length;!O[--T];O.pop());return p.c=O,p},c.prototype.toString=function(){var p=this.e,f=this.c.join(""),g=f.length;if(p<=o||p>=s)f=f.charAt(0)+(1<g?"."+f.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;f="0"+f);f="0."+f}else if(0<p)if(++p>g)for(p-=g;p--;f+="0");else p<g&&(f=f.slice(0,p)+"."+f.slice(p));else 1<g&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Cd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&u("!toExp!"),k(this,p,1)},c.prototype.toFixed=function(p){var f=o,g=s;if(o=-(s=1/0),p==null)var w=this.toString();else p===~~p&&0<=p&&1e6>=p&&(w=k(this,this.e+p),0>this.Cd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return o=f,s=g,w||u("!toFix!"),w},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&u("!toPre!"),k(this,p-1,2))},c.tr=20,c.gu=1,c}();h.jp=l}(U||(U={})),function(h){var k=function(){function v(u){this.lf=u}return v.prototype.qr=function(u,o,s){var n=new h.h,l=new h.h,c=this.lf;s.Wd(u,o,function(p,f){return c.uc(2*p,n),c.uc(2*f,l),n.compare(l)})},v.prototype.bq=function(u){return this.lf.read(2*u+1)},v}();h.si=function(){function v(){}return v.cq=function(u){if(u.B())return!1;var o=u.K();return o==1736?u.He()!=0:o==1607?(o=[!1],v.nE(u,!0,o),o[0]):!(o!=197&&(!h.ba.zd(o)||u.wG()))},v.im=function(u){var o=u.K();if(o==1736)return o=new h.Ua(u.description),u.B()||u.ZC(o),o;if(o==1607)return v.nE(u,!1,null);if(o==197)return o=new h.Ua(u.description),u.B()||o.bd(u,!1),o;if(h.ba.zd(o)){if(o=new h.ee(u.description),!u.B()&&!u.wG()){var s=new h.Ta;u.Vo(s),o.add(s),u.Ro(s),o.add(s)}return o}if(h.ba.Tn(o))return null;throw h.i.O()},v.nE=function(u,o,s){s!=null&&(s[0]=!1);var n=null;if(o||(n=new h.ee(u.description)),!u.B()){var l=new h.ja(0);l.Jb(2*u.ea());for(var c=0,p=u.ea();c<p;c++)if(0<u.Ka(c)&&!u.Pn(c)){var f=u.Ca(c);l.add(f),f=u.Wc(c)-1,l.add(f)}if(0<l.size){p=new h.Zt,c=u.vb(0),p.sort(l,0,l.size,new k(c)),p=new h.h,c.uc(2*l.get(0),p),f=0;for(var g=1,w=new h.Ta,x=new h.h,T=1,E=l.size;T<E;T++)if(c.uc(2*l.get(T),x),x.rb(p))l.get(f)>l.get(T)?(l.set(f,2147483647),f=T):l.set(T,2147483647),g++;else{if(!(1&g))l.set(f,2147483647);else if(o)return s!=null&&(s[0]=!0),null;p.N(x),f=T,g=1}if(!(1&g))l.set(f,2147483647);else if(o)return s!=null&&(s[0]=!0),null;if(!o)for(l.Wd(0,l.size,function(O,C){return O-C}),T=0,E=l.size;T<E&&l.get(T)!=2147483647;T++)u.we(l.get(T),w),n.add(w)}}return o?null:n},v}()}(U||(U={})),function(h){var k=function(){function v(){this.zf=new h.ja(0),this.As=new h.ja(0),this.zH=1,this.Gs=NaN}return v.prototype.sort=function(u,o,s,n){if(32>s-o)n.qr(o,s,u);else{var l=!0;try{for(var c=1/0,p=-1/0,f=o;f<s;f++){var g=n.bq(u.get(f));g<c&&(c=g),g>p&&(p=g)}if(this.reset(s-o,c,p,s-o)){for(f=o;f<s;f++){var w=u.get(f);g=n.bq(w);var x=this.uF(g);this.zf.set(x,this.zf.get(x)+1),this.As.write(f-o,w)}var T=this.zf.get(0);this.zf.set(0,0),f=1;for(var E=this.zf.size;f<E;f++){var O=this.zf.get(f);this.zf.set(f,T),T+=O}for(f=o;f<s;f++){w=this.As.read(f-o),g=n.bq(w),x=this.uF(g);var C=this.zf.get(x);u.set(C+o,w),this.zf.set(x,C+1)}l=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(l)n.qr(o,s,u);else{for(f=s=0,E=this.zf.size;f<E;f++)l=s,(s=this.zf.get(f))>l&&n.qr(o+l,o+s,u);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},v.prototype.reset=function(u,o,s,n){return!(2>u||s==o)&&(u=Math.min(v.cL,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Yj(0,0,this.zf.size),this.zH=o,this.As.resize(n),this.Gs=(s-o)/(u-1),!0)},v.prototype.uF=function(u){return h.P.truncate((u-this.zH)/this.Gs)},v.cL=65536,v}();h.Zt=k}(U||(U={})),function(h){var k,v;(v=k||(k={}))[v.enum_line=1]="enum_line",v[v.enum_arc=2]="enum_arc",v[v.enum_dummy=4]="enum_dummy",v[v.enum_concave_dip=8]="enum_concave_dip",v[v.enum_connection=3]="enum_connection";var u=function(){function c(){}return c.Su=function(p,f,g,w,x,T){var E=new c;return E.Km=new h.h,E.Xm=new h.h,E.cw=new h.h,E.Km.N(p),E.Xm.N(f),E.cw.N(g),E.Eo=w,E.sh=x,E.uh=T,E},c.construct=function(p,f,g,w){var x=new c;return x.Km=new h.h,x.Xm=new h.h,x.cw=new h.h,x.Km.N(p),x.Xm.N(f),x.cw.Sc(),x.Eo=4,x.sh=g,x.uh=w,x},c}(),o=function(){function c(p,f,g,w,x,T){this.$v=null,this.za=0,this.zA=p,this.XH=this.VH=0,this.La=f,this.Oj=g,this.xk=w,this.Fq=x,this.Vb=T}return c.prototype.next=function(){for(var p=new h.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,p),this.za++,!p.B())break}var f=!1;if(this.$v==null&&(this.VH=p.Ng(),this.XH=p.kh(),this.$v=l.buffer(p,this.La,this.Oj,this.xk,this.Fq,this.Vb),f=!0),this.za<this.zA.I()){var g=new h.Ea;this.$v.copyTo(g)}else g=this.$v;if(!f){f=new h.Ed;var w=p.Ng()-this.VH;p=p.kh()-this.XH,f.ig(w,p),g.Pc(f)}return g},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),s=function(){function c(p,f){this.Xa=p,this.za=0,this.qq=f}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;if(this.za++,!p.Pn(f))for(var g=p.Oa(p.Wc(f)-1);this.za<p.ea();){var w=p.Oa(p.Ca(this.za));if(p.Pn(this.za)||w!=g)break;g=p.Oa(p.Wc(this.za)-1),this.za++}if(this.za-f==1)return this.Xa.fE(this.Xa.Y,f,this.qq);for((g=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,f,!0),f+=1;f<this.za;f++)g.Fr(this.Xa.Y,f,0,p.tv(f),!1);return this.Xa.fE(g,0,this.qq)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),n=function(){function c(p){this.Xa=p,this.za=0}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;for(p.Kr(this.za),this.za++;this.za<p.ea()&&!(0<p.Kr(this.za));)this.za++;return f==0&&this.za==p.ea()?this.Xa.ly(p,0,p.ea()):this.Xa.ly(p,f,this.za)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),l=function(){function c(p){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=p,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return c.buffer=function(p,f,g,w,x,T){if(p==null||0>w)throw h.i.O();if(p.B())return new h.Ea(p.description);var E=new h.l;return p.yc(E),0<f&&E.X(f,f),(T=new c(T)).Oj=g,T.Y=p,T.ra=h.ua.Xd(g,E,!0),T.dt=h.ua.Xd(null,E,!0),T.La=f,T.ET=p.K(),0>=x&&(x=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(w)||w==0?w=1e-5*T.sb:w>.5*T.sb&&(w=.5*T.sb),12>x&&(x=12),(p=Math.abs(f)*(1-Math.cos(Math.PI/x)))>w?w=p:(p=Math.PI/Math.acos(1-w/Math.abs(f)))<x-1&&12>(x=h.P.truncate(p))&&(x=12,w=Math.abs(f)*(1-Math.cos(Math.PI/x))),T.xk=w,T.Fq=x,T.oA=Math.min(T.dt,.25*w),T.gE()},c.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var p=this.lE();p=h.P.truncate((p+3)/4);var f=.5*Math.PI/p;this.jA=f;for(var g=0;g<4*p;g++)this.Jd.push(null);var w=Math.cos(f);f=Math.sin(f);var x=h.h.construct(0,1);for(g=0;g<p;g++)this.Jd[g+0*p]=h.h.construct(x.y,-x.x),this.Jd[g+1*p]=h.h.construct(-x.x,-x.y),this.Jd[g+2*p]=h.h.construct(-x.y,x.x),this.Jd[g+3*p]=x,(x=h.h.construct(x.x,x.y)).Ct(w,f)},c.prototype.gE=function(){var p=this.Y.K();if(h.ba.zd(p))return(p=new h.Ua(this.Y.description)).pc(this.Y,!0),this.Y=p,this.gE();if(this.La<=this.ra){if(!h.ba.PS(p))return new h.Ea(this.Y.description);if(0>=this.La&&(p=new h.l,this.Y.A(p),p.S()<=2*-this.La||p.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw h.i.Ra()}},c.prototype.MN=function(){if(this.zG(this.Y)){var p=new h.Ta;this.Y.we(0,p);var f=new h.l;return this.Y.A(f),p.Db(f.tf()),this.Iu(p)}return this.Y=this.RV(this.Y),p=new s(this,this.qq),h.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.LN=function(){if(this.La==0)return this.Y;var p=h.$l.local();if(this.ev(),this.Y=p.W(this.Y,null,!1,this.Vb),0>this.La){var f=this.Y;return f=this.ly(f,0,f.ea()),p.W(f,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(p=new h.Ta,this.Y.we(0,p),f=new h.l,this.Y.A(f),p.Db(f.tf()),this.Iu(p)):(p=new n(this),h.Ih.local().W(p,this.Oj,this.Vb).next())},c.prototype.ly=function(p,f,g){for(var w=new h.Ea(p.description);f<g;f++)if(!(1>p.Ka(f))){var x=p.Kr(f),T=new h.l;if(p.Tj(f,T),0<this.La){if(0<x)if(this.AG(p,f))x=new h.Ta,p.we(p.Ca(f),x),x.Db(T.tf()),this.Au(w,x);else{var E=x=new h.Ua(p.description);E=h.au.EG(this.Y,f)||this.Bn(this.Y,f,E,!0,1)==2?this.eE(p,f):this.An(x),w.add(E,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(E=x=new h.Ua(p.description),this.Bn(this.Y,f,E,!0,1),x.B()))){var O=new h.l;for(O.L(T),O.X(this.sb,this.sb),E.vp(O),T=1,x=(E=this.An(x)).ea();T<x;T++)w.addPath(E,T,!0)}}else if(0<x){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(E=x=new h.Ua(p.description),this.Bn(this.Y,f,E,!0,-1),x.B())))for(O=new h.l,E.yc(O),O.X(this.sb,this.sb),E.vp(O),T=1,x=(E=this.An(x)).ea();T<x;T++)w.addPath(E,T,!0)}else for(E=x=new h.Ua(p.description),this.Bn(this.Y,f,E,!0,-1),T=0,x=(E=this.An(x)).ea();T<x;T++)w.addPath(E,T,!0)}if(0<this.La)return 1<w.ea()?w=this.An(w):c.kx(w);if(p=new h.l,w.yc(p),w.B())return c.kx(w);for(p.X(this.sb,this.sb),w.vp(p),w=this.An(w),p=new h.Ea(w.description),T=1,x=w.ea();T<x;T++)p.addPath(w,T,!1);return c.kx(p)},c.prototype.KN=function(){return this.Iu(this.Y)},c.prototype.Iu=function(p){var f=new h.Ea(this.Y.description);return this.Au(f,p),this.oX(f)},c.prototype.JN=function(){var p=new o(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return h.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.GN=function(){var p=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)p.bd(this.Y,!1);else{var f=new h.Hh;this.Y.dn(f),f.X(this.La,this.La),p.bd(f,!1)}return p}return p.bd(this.Y,!1),this.Y=p,this.eE(p,0)},c.prototype.eE=function(p,f){this.ev();var g=new h.Ea(p.description),w=new h.h,x=new h.h,T=new h.h,E=new h.h,O=new h.h,C=new h.h,N=new h.h,D=new h.h,z=p.Ka(f),R=p.Ca(f),G=0;for(f=p.Ka(f);G<f;G++){if(p.D(R+G,x),p.D(R+(G+1)%z,E),p.D(R+(G+2)%z,C),N.vc(E,x),N.length()==0||(N.Jv(),N.normalize(),N.scale(this.sb),w.add(N,x),T.add(N,E),G==0?g.Nt(w):g.Ei(w),g.Ei(T),D.vc(C,E),D.length()==0))throw h.i.Ra();D.Jv(),D.normalize(),D.scale(this.sb),O.add(D,E),this.BD(g,E,T,O,!1)}return c.kx(g)},c.prototype.fE=function(p,f,g){if(this.ev(),1>p.Ka(f))return null;if(this.AG(p,f)&&0<this.La){g=new h.Ta,p.we(p.Ca(f),g);var w=new h.l;return p.Tj(f,w),g.Db(w.tf()),this.Iu(g)}if(w=new h.Ua(p.description),p.Pn(f))this.Bn(p,f,w,g,1),this.Bn(p,f,w,g,-1);else{var x=new h.Ua(p.description);x.addPath(p,f,!1),x.Fr(p,f,0,p.tv(f),!1),this.Bn(x,0,w,g,1)}return this.An(w)},c.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},c.prototype.An=function(p){return h.Hg.Ok(p,this.dt,!0,!0,this.Vb)},c.prototype.lE=function(){if(this.xk==0)return this.Fq;var p=1-this.xk*Math.abs(this.Mv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Fq&&(p=this.Fq),h.P.truncate(p)},c.prototype.BD=function(p,f,g,w,x){this.ev();var T=new h.h;T.vc(g,f),T.scale(this.Mv);var E=new h.h;E.vc(w,f),E.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.jA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(E=Math.atan2(E.y,E.x)/this.jA)&&(E=this.Jd.length+E),(E=this.Jd.length-E)<T&&(E+=this.Jd.length);var O=h.P.truncate(E);E=h.P.truncate(Math.ceil(T)),(T=new h.h).N(this.Jd[E%this.Jd.length]),T.Dt(this.sb,f);var C=10*this.ra;for(T.sub(g),T.length()<C&&(E+=1),T.N(this.Jd[O%this.Jd.length]),T.Dt(this.sb,f),T.sub(w),T.length()<C&&--O,g=O-E,g++,O=0,E%=this.Jd.length;O<g;O++,E=(E+1)%this.Jd.length)T.N(this.Jd[E]),T.Dt(this.sb,f),p.Ei(T),this.Zq();x&&p.Ei(w)},c.prototype.Bn=function(p,f,g,w,x){var T=new h.hd,E=T.hN(p,f);if(T.Ip(this.oA,!1,!1),2>T.I(E))return 0>x||(x=p,T=new h.Ta,x.we(x.Ca(f),T),this.Au(g,T)),1;var O=T.Oa(T.Ya(T.Ob(E))),C=new h.Ed;if(C.ig(-O.x,-O.y),T.Pc(C),w&&(this.oQ(T,E,x),2>T.I(E)))return 0>x||(x=p,T=new h.Ta,x.we(x.Ca(f),T),this.Au(g,T)),1;this.$d.length=0;var N=T.Ob(E);f=T.Ya(N);var D=x==1?T.Na(f):T.V(f);p=x==1?T.V(f):T.Na(f);var z=!0;w=new h.h,E=new h.h;var R=new h.h,G=new h.h,W=new h.h,H=new h.h,ee=new h.h,X=new h.h,ne=new h.h,ce=new h.h,ue=this.sb;N=T.Ka(N);for(var Ee=0;Ee<N;Ee++)T.D(p,E),z&&(T.D(f,w),T.D(D,R),X.vc(w,R),X.normalize(),ce.HG(X),ce.scale(ue),G.add(ce,w)),ee.vc(E,w),ee.normalize(),ne.HG(ee),ne.scale(ue),W.add(w,ne),D=X.yi(ee),z=X.Sh(ee),0>D||0>z&&D==0?this.$d.push(u.Su(G,W,w,2,this.$d.length+1,this.$d.length-1)):G.rb(W)||(this.$d.push(u.construct(G,w,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(w,W,this.$d.length+1,this.$d.length-1,"dummy"))),H.add(E,ne),this.$d.push(u.Su(W,H,w,1,this.$d.length+1,this.$d.length-1)),G.N(H),ce.N(ne),R.N(w),w.N(E),X.N(ee),D=f,f=p,z=!1,p=x==1?T.V(f):T.Na(f);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(g),C.ig(O.x,O.y),g.TD(C,g.ea()-1),1},c.prototype.TV=function(p){for(var f=this.uO(),g=!0,w=f+1,x=f;w!=f;x=w){var T=this.$d[x];w=T.sh!=-1?T.sh:(x+1)%this.$d.length,T.Eo!=0&&(g&&p.Nt(T.Km),T.Eo==2?this.BD(p,T.cw,T.Km,T.Xm,!0):p.Ei(T.Xm),g=!1)}},c.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var p=0,f=0,g=this.$d.length;f<g;){var w=this.$d[f];if(3&w.Eo){p=f;break}f=w.sh}for(g=p+1,f=p;g!=p;f=g){g=(w=this.$d[f]).sh;for(var x=1,T=null;g!=f&&!(3&(T=this.$d[g]).Eo);)g=T.sh,x++;x!=1&&(w.Eo&T.Eo)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(w.Km),this.Ns.Rc(w.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(w.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),w.sh=g,T.uh=f))}return p},c.prototype.Hv=function(p,f,g){var w=new h.h;if(w.vc(g,p),g=w.length(),0<(g=this.sb*this.sb-g*g*.25)){g=Math.sqrt(g),w.normalize(),w.cr();var x=new h.h;if(x.vc(f,p),x.Sh(w)+g>=this.sb)return!0}return!1},c.prototype.oQ=function(p,f,g){for(var w=0;1>w;w++){var x=!1,T=p.Ob(f),E=p.Ka(T);if(E==0)break;var O=E;if(3>E)break;!p.ec(T)&&(O=E-1),T=p.Ya(T),E=0<g?p.Na(T):p.V(T);for(var C=0<g?p.V(T):p.Na(T),N=E,D=!0,z=new h.h,R=new h.h,G=new h.h,W=new h.h,H=new h.h,ee=h.h.construct(0,0),X=new h.h,ne=new h.h,ce=new h.h,ue=new h.h,Ee=this.sb,ye=0,Ue=0;Ue<O&&(p.D(C,R),D&&(p.D(T,z),p.D(E,G),N=E),ne.vc(z,G),ne.normalize(),X.vc(R,z),X.normalize(),N!=C);){var Fe=ne.yi(X),xe=ne.Sh(X),Rt=!0;if(0>Fe||0>xe&&Fe==0||!this.Hv(G,z,R)||(ee.N(R),Rt=!1,++ye,x=!0),Rt){if(0<ye)for(;(Fe=0<g?p.Na(N):p.V(N))!=T;){if(p.D(Fe,W),!this.Hv(W,G,ee)){Fe!=C&&this.Hv(W,G,R)&&this.Hv(W,z,R)&&(G.N(W),N=Fe,Rt=!1,++ye);break}G.N(W),N=Fe,Rt=!1,++ye}if(!Rt)continue;if(0<ye){for(N=0<g?p.Na(E):p.V(E),D=1;D<ye;D++)Rt=0<g?p.Na(N):p.V(N),p.qd(N,!0),N=Rt;ce.vc(z,G),ye=Ee*Ee-(ye=ce.length())*ye*.25,Ee-(ye=Math.sqrt(ye))>.5*this.xk?(H.add(G,z),H.scale(.5),ce.normalize(),ce.cr(),ue.N(ce),ue.scale(Ee-ye),H.add(ue),p.mf(E,H)):p.qd(E,!0),ye=0}G.N(z),N=T}z.N(R),E=T,T=C,C=0<g?p.V(T):p.Na(T),Ue++,D=!1}if(0<ye){for(N=0<g?p.Na(E):p.V(E),D=1;D<ye;D++)Rt=0<g?p.Na(N):p.V(N),p.qd(N,!0),N=Rt;H.add(G,z),H.scale(.5),ce.vc(z,G),ye=Ee*Ee-(ye=ce.length())*ye*.25,ye=Math.sqrt(ye),ce.normalize(),ce.cr(),ue.N(ce),ue.scale(Ee-ye),H.add(ue),p.mf(E,H)}if(p.Ip(this.oA,!1,!1),!x)break}},c.prototype.AG=function(p,f){if(p.Ka(f)==1)return!0;var g=new h.l;return p.Tj(f,g),Math.max(g.S(),g.da())<.5*this.xk},c.prototype.zG=function(p){var f=new h.l;return p.A(f),Math.max(f.S(),f.da())<.5*this.xk},c.prototype.RV=function(p){for(var f=0,g=0,w=(p=h.zC.local().W(p,.25*this.xk,!1,this.Vb)).ea();g<w;g++)f=Math.max(p.Ka(g),f);return 32>f?(this.qq=!1,p):(this.qq=!0,h.Hg.Ok(p,this.dt,!1,!0,this.Vb))},c.prototype.Au=function(p,f){if(f=f.D(),this.Jd!=null&&this.Jd.length!==0){var g=new h.h;g.N(this.Jd[0]),g.Dt(this.sb,f),p.Nt(g);for(var w=1,x=this.Jd.length;w<x;w++)g.N(this.Jd[w]),g.Dt(this.sb,f),p.Ei(g)}else{w=this.lE(),g=h.P.truncate((w+3)/4),w=.5*Math.PI/g,x=Math.cos(w);for(var T=Math.sin(w),E=new h.h,O=3;0<=O;O--){switch(E.na(0,this.sb),O){case 0:for(w=0;w<g;w++)p.Aj(E.x+f.x,E.y+f.y),E.Ct(x,T);break;case 1:for(w=0;w<g;w++)p.Aj(-E.y+f.x,E.x+f.y),E.Ct(x,T);break;case 2:for(w=0;w<g;w++)p.Aj(-E.x+f.x,-E.y+f.y),E.Ct(x,T);break;default:for(p.rx(E.y+f.x,-E.x+f.y),w=1;w<g;w++)E.Ct(x,T),p.Aj(E.y+f.x,-E.x+f.y)}this.Zq()}}},c.kx=function(p){return p.Eh(1,0),p},c.prototype.oX=function(p){return p.Eh(2,this.ra),p.hm(),p},c}();h.CK=l}(U||(U={})),function(h){var k=function(){function v(u){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0)}return v.prototype.Nh=function(u,o,s){switch(o){case 0:if(u.v<s&&u.C<=s)break;return u.v>=s?1:-1;case 1:if(u.G<s&&u.H<=s)break;return u.G>=s?1:-1;case 2:if(u.v>=s&&u.C>s)break;return u.C<=s?1:-1;case 3:if(!(u.G>=s&&u.H>s))return u.H<=s?1:-1}return 0},v.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},v.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var s=new h.l;u.yc(s),this.Y=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0];new h.jg;var w=new h.zb,x=new h.ja(0);x.Jb(Math.min(100,u.I()));for(var T=!1,E=0;!T&&4>E;E++){var O=!1,C=(1&E)!=0,N=0;switch(E){case 0:N=this.Da.v,O=s.v<=N&&s.C>=N;break;case 1:N=this.Da.G,O=s.G<=N&&s.H>=N;break;case 2:N=this.Da.C,O=s.v<=N&&s.C>=N;break;case 3:N=this.Da.H,O=s.G<=N&&s.H>=N}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var D=-1,z=-1,R=this.g.Ya(O),G=R;do{var W=this.g.cc(G);W==null&&(W=w,this.g.D(G,c),W.Ec(c),this.g.D(this.g.V(G),p),W.Rc(p)),W.A(n);var H=this.Nh(n,E,N),ee=0,X=-1;if(H==-1){ee=0<(W=W.fq(C,N,f,g))?this.g.Wl(G,g,W):0,ee+=1;var ne=G,ce=this.g.V(ne);for(W=0;W<ee;W++){if(this.g.D(ne,c),this.g.D(ce,p),(X=this.g.cc(ne))==null&&((X=w).Ec(c),X.Rc(p)),X.A(l),(X=this.Nh(l,E,N))==-1){if(C)(X=Math.abs(c.y-N))<(ue=Math.abs(p.y-N))?(c.y=N,this.g.mf(ne,c)):(p.y=N,this.g.mf(ce,p));else{X=Math.abs(c.x-N);var ue=Math.abs(p.x-N);X<ue?(c.x=N,this.g.mf(ne,c)):(p.x=N,this.g.mf(ce,p))}(X=this.g.cc(ne))==null&&((X=w).Ec(c),X.Rc(p)),X.A(l),X=this.Nh(l,E,N)}ue=D,D=X,z==-1&&(z=D),ue==0&&D==1||ue==1&&D==0||ue!=0||D!=0||x.add(ne),D==1&&(T=!1),X=ne=ce,ce=this.g.V(ce)}}ee==0&&(ue=D,D=H,z==-1&&(z=D),ue==0&&D==1||ue==1&&D==0||ue!=0||D!=0||x.add(G),D==1&&(T=!1),X=this.g.V(G)),G=X}while(G!=R);for(z==0&&D==0&&x.add(R),W=0,D=x.size;W<D;W++)z=x.get(W),this.g.qd(z,!1);x.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.yy=function(u){var o=new h.l,s=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.jg,p=u,f=new h.l;u.yc(f);for(var g=0;4>g;g++){var w=!1,x=(1&g)!=0,T=0;switch(g){case 0:T=this.Da.v,w=f.v<=T&&f.C>=T;break;case 1:T=this.Da.G,w=f.G<=T&&f.H>=T;break;case 2:T=this.Da.C,w=f.v<=T&&f.C>=T;break;case 3:T=this.Da.H,w=f.G<=T&&f.H>=T}if(w){w=p,p=u.Ja(),(w=w.Ha()).aj();for(var E,O=new h.h;w.ab();)for(var C,N=!0;w.Ia();){var D=w.ia();D.A(o);var z=this.Nh(o,g,T);if(z==-1){if(0<(z=D.fq(x,T,n,l))){var R=0;E=D.bc();for(var G=0;G<=z;G++)if(R!=(C=G<z?l[G]:1)){D.dh(R,C,c);var W=c.get();W.Ec(E),G<z&&(x?(O.x=n[G],O.y=T):(O.x=T,O.y=n[G]),W.Rc(O)),W.A(s);var H=this.Nh(s,g,T);if(H==-1){if(E=W.bc(),R=W.xc(),x)(H=Math.abs(E.y-T))<(ee=Math.abs(R.y-T))?(E.y=T,W.Ec(E)):(R.y=T,W.Rc(R));else{H=Math.abs(E.x-T);var ee=Math.abs(R.x-T);H<ee?(E.x=T,W.Ec(E)):(R.x=T,W.Rc(R))}W.A(s),H=this.Nh(s,g,T)}E=W.xc(),R=C,(C=H)==1?(p.pc(W,N),N=!1):N=!0}}}else(C=z)==1?(p.pc(D,N),N=!1):N=!0}}}return p},v.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var s=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,s=this.g.V(s))this.g.D(s,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(u){for(var o=new h.h,s=new h.h,n=h.P.mg(2048,0),l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l)){var c=this.g.Ya(l),p=c;do{var f=this.g.V(p);this.g.D(p,o);var g=-1;if(o.x==this.Da.v?(this.g.D(f,s),s.x==this.Da.v&&(g=1)):o.x==this.Da.C&&(this.g.D(f,s),s.x==this.Da.C&&(g=1)),o.y==this.Da.G?(this.g.D(f,s),s.y==this.Da.G&&(g=0)):o.y==this.Da.H&&(this.g.D(f,s),s.y==this.Da.H&&(g=0)),g!=-1&&(g=h.h.ub(o,s),!(1>=(g=h.P.truncate(Math.min(Math.ceil(g/u),2048)))))){for(var w=1;w<g;w++)n[w-1]=1*w/g;this.g.Wl(p,n,g-1)}p=f}while(p!=c)}},v.prototype.Xl=function(u,o){var s=this.g.Hd(),n=new h.h,l=new h.ja(0);l.Jb(100);for(var c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,g=this.g.Ka(c);f<g;f++){var w=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(this.g.Qa(p,s)!=1&&(l.add(p),this.g.Sa(p,s,1)),this.g.Qa(w,s)!=1&&(l.add(w),this.g.Sa(w,s,1)))),p=w}if(this.g.Ud(s),!(3>l.size)){var x=this;l.Wd(0,l.size,function(H,ee){return x.Oh(H,ee)}),s=new h.h,c=new h.h,p=new h.h,c.Sc();var T=-1;f=new h.ja(0),g=new h.ja(0),w=this.g.Hd();for(var E=this.g.Hd(),O=0,C=l.size;O<C;O++){var N=l.get(O);if(this.g.D(N,n),!n.rb(c)){if(T!=-1){for(var D=T;D<O;D++){T=l.get(D);var z=this.g.V(T);N=this.g.Na(T);var R=!1;0>this.Oh(T,z)&&(this.g.D(z,s),u?s.y==o:s.x==o)&&(f.add(T),R=!0,this.g.Sa(T,E,1)),0>this.Oh(T,N)&&(this.g.D(N,s),u?s.y==o:s.x==o)&&(R||f.add(T),this.g.Sa(T,w,1))}for(D=0,R=f.size;D<R;D++){if(T=f.get(D),N=this.g.Qa(T,w),z=this.g.Qa(T,E),N==1){N=this.g.Na(T),this.g.D(N,p);var G=[0];if(G[0]=0,!p.rb(n)){var W=h.h.ub(c,p);G[0]=h.h.ub(p,n)/W,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(N,G,1),N=this.g.Na(T),this.g.mf(N,n),g.add(N),this.g.Sa(N,w,1),this.g.Sa(N,E,-1)}}z==1&&(z=this.g.V(T),this.g.D(z,p),(G=[0])[0]=0,p.rb(n)||(W=h.h.ub(c,p),G[0]=h.h.ub(c,n)/W,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(T,G,1),N=this.g.V(T),this.g.mf(N,n),g.add(N),this.g.Sa(N,w,-1),this.g.Sa(N,E,1)))}T=f,f=g,(g=T).clear(!1)}T=O,c.N(n)}}this.g.Ud(w),this.g.Ud(E)}},v.prototype.Pl=function(u,o){var s=new h.h,n=new h.ja(0);n.Jb(100);for(var l=this.g.Hd(),c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var g=this.g.V(f);this.g.D(f,s),(u?s.y==o:s.x==o)&&(this.g.D(g,s),(u?s.y==o:s.x==o)&&(this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(g,l)!=-2&&(n.add(g),this.g.Sa(g,l,-2))))}}if(n.size!=0){var w=this;for(n.Wd(0,n.size,function(ee,X){return w.Oh(ee,X)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Sa(x,l,c)}f=new h.h,(g=new h.h).Sc();var T=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,s),!s.rb(g))){if(T!=-1)for(;;){x=!1;for(var E=1<c-T?c-1:c,O=T;O<E;O++){var C=n.get(O);if(C!=-1){var N=-1,D=this.g.V(C);0>this.Oh(C,D)&&(this.g.D(D,f),u?f.y==o:f.x==o)&&(N=D),D=-1;var z=this.g.Na(C);if(0>this.Oh(C,z)&&(this.g.D(z,f),u?f.y==o:f.x==o)&&(D=z),N!=-1&&D!=-1)this.Mh(C,n,l),this.g.qd(C,!1),this.Mh(N,n,l),this.g.qd(N,!1),x=!0;else if(N!=-1||D!=-1){for(z=O+1;z<c;z++){var R=n.get(z);if(R!=-1){var G=this.g.V(R),W=-1;0>this.Oh(R,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(W=G),G=this.g.Na(R);var H=-1;if(0>this.Oh(R,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(H=G),W!=-1&&H!=-1){this.Mh(R,n,l),this.g.qd(R,!1),this.Mh(W,n,l),this.g.qd(W,!1),x=!0;break}if(N!=-1&&H!=-1){this.At(n,C,N,R,H,l),x=!0;break}if(D!=-1&&W!=-1){this.At(n,R,W,C,D,l),x=!0;break}}}if(x)break}}}if(!x)break}T=c,g.N(s)}}this.g.Ud(l)},v.prototype.Mh=function(u,o,s){s=this.g.Qa(u,s),o.set(s,-1),s=this.g.Qa(u,this.li),this.ed.set(s,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},v.prototype.At=function(u,o,s,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(s,l),this.g.Cc(l,s),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(l,u,c),this.g.oi(l,!0)},v.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var s=this.ed.get(u);s!=-1&&this.g.cj(s,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{s=p,f=0;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=p);2>=f?(s=this.g.Qa(p,this.li),this.ed.set(s,-1),p=this.g.qd(p,!1),f==2&&(s=this.g.Qa(p,this.li),this.ed.set(s,-1),this.g.qd(p,!1)),f=c,c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)):(this.g.fp(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c))}}for(u=0,o=this.ed.size;u<o;u++)if((s=this.ed.get(u))!=-1&&(c=this.g.cd(s))==-1){c=this.g.wf(this.Y,-1),f=0,p=s;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=p);2>=f?(s=this.g.Qa(p,this.li),this.ed.set(s,-1),p=this.g.qd(p,!1),f==2&&(0<=(s=this.g.Qa(p,this.li))&&this.ed.set(s,-1),this.g.qd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},v.wy=function(u,o,s){return new v(o).vy(u,s)},v.clip=function(u,o,s,n){if(u.B())return u;if(o.B())return u.Ja();if((s=u.K())==33)return n=u.D(),o.contains(n)?u:u.Ja();if(s==197)return n=new h.l,u.A(n),n.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Zo(n),o):u.Ja();var l=new h.l;if(u.yc(l),o.contains(l))return u;if(!o.isIntersecting(l))return u.Ja();if((l=u.Cb)!=null&&(l=l.Hk)!=null){if((l=l.To(o))==1){if(s!=1736)throw h.i.Ra();return(u=new h.Ea(u.description)).vp(o),u}if(l==0)return u.Ja()}switch(s){case 550:s=null,l=u.I();for(var c=u.vb(0),p=0,f=0;f<l;f++)n=new h.h,c.uc(2*f,n),o.contains(n)||(p==0&&(s=u.Ja()),p<f&&s.Gd(u,p,f),p=f+1);return 0<p&&s.Gd(u,p,l),p==0?u:s;case 1736:case 1607:return v.wy(u,o,n);default:throw h.i.Ra()}},v.prototype.Oh=function(u,o){var s=new h.h;return this.g.D(u,s),u=new h.h,this.g.D(o,u),s.compare(u)},v}();h.Vd=k}(U||(U={})),function(h){var k=function(){function v(u,o){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0),this.od=o}return v.prototype.Nh=function(u,o,s){switch(o){case 0:if(u.v<s&&u.C<=s)break;return u.v>=s?1:-1;case 1:if(u.G<s&&u.H<=s)break;return u.G>=s?1:-1;case 2:if(u.v>=s&&u.C>s)break;return u.C<=s?1:-1;case 3:if(!(u.G>=s&&u.H>s))return u.H<=s?1:-1}return 0},v.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},v.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var s=new h.l;u.yc(s),this.Y=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0],w=new h.zb,x=new h.ja(0);x.Jb(256);for(var T=!1,E=0;!T&&4>E;E++){var O=!1,C=(1&E)!=0,N=0;switch(E){case 0:N=this.Da.v,O=s.v<=N&&s.C>=N;break;case 1:N=this.Da.G,O=s.G<=N&&s.H>=N;break;case 2:N=this.Da.C,O=s.v<=N&&s.C>=N;break;case 3:N=this.Da.H,O=s.G<=N&&s.H>=N}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var D=!0,z=-1,R=-1,G=this.g.Ya(O),W=G;do{var H=this.g.cc(W);H==null&&(H=w,this.g.D(W,c),H.Ec(c),this.g.D(this.g.V(W),p),H.Rc(p)),H.A(n);var ee=this.Nh(n,E,N),X=0,ne=-1;if(ee==-1){X=0<(H=H.fq(C,N,f,g))?this.g.HX(W,g,H):0,X+=1;var ce=W,ue=this.g.V(ce);for(H=0;H<X;H++){if(this.g.D(ce,c),this.g.D(ue,p),(ne=this.g.cc(ce))==null&&((ne=w).Ec(c),ne.Rc(p)),ne.A(l),(ne=this.Nh(l,E,N))==-1){if(C)(ne=Math.abs(c.y-N))<(Ee=Math.abs(p.y-N))?(c.y=N,this.g.mf(ce,c)):(p.y=N,this.g.mf(ue,p));else{ne=Math.abs(c.x-N);var Ee=Math.abs(p.x-N);ne<Ee?(c.x=N,this.g.mf(ce,c)):(p.x=N,this.g.mf(ue,p))}(ne=this.g.cc(ce))==null&&((ne=w).Ec(c),ne.Rc(p)),ne.A(l),ne=this.Nh(l,E,N)}Ee=z,z=ne,R==-1&&(R=z),Ee==0&&z==1||Ee==1&&z==0||Ee!=0||z!=0||x.add(ce),z==1&&(D=T=!1),ne=ce=ue,ue=this.g.V(ue)}}if(X==0&&(Ee=z,z=ee,R==-1&&(R=z),Ee==0&&z==1||Ee==1&&z==0||Ee!=0||z!=0||x.add(W),z==1&&(D=T=!1),ne=this.g.V(W)),W=ne,256<=x.size){for(H=1,ee=x.size-1;H<ee;H++)X=x.get(H),this.g.qd(X,!1);x.set(1,x.Gc()),x.Dh(2)}}while(W!=G);if(!D)for(R==0&&z==0&&x.add(G),H=0,ee=x.size;H<ee;H++)X=x.get(H),this.g.qd(X,!1);x.clear(!1),O=D||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.yy=function(u){var o=new h.l,s=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.jg,p=u,f=new h.l;u.yc(f);for(var g=new h.h,w=new h.h,x=null,T=null,E=0;4>E;E++){var O=!1,C=(1&E)!=0,N=0;switch(E){case 0:N=this.Da.v,O=f.v<=N&&f.C>=N;break;case 1:N=this.Da.G,O=f.G<=N&&f.H>=N;break;case 2:N=this.Da.C,O=f.v<=N&&f.C>=N;break;case 3:N=this.Da.H,O=f.G<=N&&f.H>=N}if(O)for(O=p,p=u.Ja(),(O=O.Ha()).aj();O.ab();)for(var D,z=!0;O.Ia();){var R=O.ia();R.A(o);var G=this.Nh(o,E,N);if(G==-1){if(0<(G=R.fq(C,N,n,l))){var W=0;R.$p(g);for(var H=0;H<=G;H++)if(W!=(D=H<G?l[H]:1)){R.dh(W,D,c);var ee=c.get();ee.Ec(g),H<G&&(C?(w.x=n[H],w.y=N):(w.x=N,w.y=n[H]),ee.Rc(w)),ee.A(s);var X=this.Nh(s,E,N);X==-1&&(x==null&&(x=new h.h),T==null&&(T=new h.h),ee.$p(x),ee.Vr(T),C?(W=Math.abs(x.y-N))<(X=Math.abs(T.y-N))?(x.y=N,ee.Ec(x)):(T.y=N,ee.Rc(T)):(W=Math.abs(x.x-N))<(X=Math.abs(T.x-N))?(x.x=N,ee.Ec(x)):(T.x=N,ee.Rc(T)),ee.A(s),X=this.Nh(s,E,N)),ee.Vr(g),W=D,(D=X)==1?(p.pc(ee,z),z=!1):z=!0}}}else(D=G)==1?(p.pc(R,z),z=!1):z=!0}}return p},v.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var s=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,s=this.g.V(s))this.g.D(s,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(u){for(var o=new h.h,s=new h.h,n=null,l=null,c=h.P.mg(2048,0),p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p)){var f=this.g.Ya(p),g=f;do{var w=this.g.V(g);this.g.D(g,o);var x=-1;if(o.x==this.Da.v?(this.g.D(w,s),s.x==this.Da.v&&(x=1)):o.x==this.Da.C&&(this.g.D(w,s),s.x==this.Da.C&&(x=1)),o.y==this.Da.G?(this.g.D(w,s),s.y==this.Da.G&&(x=0)):o.y==this.Da.H&&(this.g.D(w,s),s.y==this.Da.H&&(x=0)),x!=-1){if(n==null&&(n=new h.h),l==null&&(l=new h.h),n.N(o),l.na(0,0),x==0){var T=o.x-this.Da.v;l.x=h.mc.sign(s.x-o.x),n.x=u*h.mc.En(Math.floor(Math.abs(T/u)),T)+this.Da.v,0>n.x&&(n.x+=u)}else T=o.y-this.Da.G,l.y=h.mc.sign(s.y-o.y),n.y=u*h.mc.En(Math.floor(Math.abs(T/u)),T)+this.Da.G,0>n.y&&(n.y+=u);T=x!=0?s.y-o.y:s.x-o.x;var E=Math.abs(T);if(65536<E/u)throw h.i.ga("internal error");if(0<E){E=h.P.truncate(E/u)+2,c.length<E&&(c=h.P.mg(E));for(var O=E=0;;O++){var C=new h.h;if(C.x=n.x+l.x*O*u,C.y=n.y+l.y*O*u,1<=(C=(x!=0?C.y-o.y:C.x-o.x)/T))break;0>=C||(c[E]=C,E++)}E!=0&&this.g.Wl(g,c,E)}}g=w}while(g!=f)}},v.prototype.Xl=function(u,o){for(var s=-1,n=new h.h,l=null,c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,g=this.g.Ka(c);f<g;f++){var w=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(s==-1&&(s=this.g.Hd()),l==null&&(l=new h.ja(0)).Jb(100),this.g.Qa(p,s)!=1&&(l.add(p),this.g.Sa(p,s,1)),this.g.Qa(w,s)!=1&&(l.add(w),this.g.Sa(w,s,1)))),p=w}if(s!=-1&&this.g.Ud(s),!(l==null||3>l.size)){var x=this;l.Wd(0,l.size,function(H,ee){return x.Oh(H,ee)}),s=new h.h,c=new h.h,p=new h.h,c.Sc();var T=-1;f=new h.ja(0),g=new h.ja(0),w=null;for(var E=this.g.Hd(),O=this.g.Hd(),C=0,N=l.size;C<N;C++){var D=l.get(C);if(this.g.D(D,n),!n.rb(c)){if(T!=-1){for(var z=T;z<C;z++){T=l.get(z);var R=this.g.V(T);D=this.g.Na(T);var G=!1;this.g.D(R,s),0>c.compare(s)&&(u?s.y==o:s.x==o)&&(f.add(T),G=!0,this.g.Sa(T,O,1)),this.g.D(D,s),0>c.compare(s)&&(u?s.y==o:s.x==o)&&(G||f.add(T),this.g.Sa(T,E,1))}for(z=0,G=f.size;z<G;z++){if(T=f.get(z),D=this.g.Qa(T,E),R=this.g.Qa(T,O),D==1&&(D=this.g.Na(T),this.g.D(D,p),!p.rb(n))){w==null&&(w=[]);var W=h.h.ub(c,p);w[0]=h.h.ub(p,n)/W,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(D,w,1),D=this.g.Na(T),this.g.mf(D,n),g.add(D),this.g.Sa(D,E,1),this.g.Sa(D,O,-1)}R==1&&(R=this.g.V(T),this.g.D(R,p),p.rb(n)||(w==null&&(w=[]),W=h.h.ub(c,p),w[0]=h.h.ub(c,n)/W,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(T,w,1),D=this.g.V(T),this.g.mf(D,n),g.add(D),this.g.Sa(D,E,-1),this.g.Sa(D,O,1)))}T=f,f=g,(g=T).clear(!1)}T=C,c.N(n)}}this.g.Ud(E),this.g.Ud(O)}},v.prototype.Pl=function(u,o){for(var s=new h.h,n=null,l=-1,c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var g=this.g.V(f);this.g.D(f,s),(u?s.y==o:s.x==o)&&(this.g.D(g,s),(u?s.y==o:s.x==o)&&(l==-1&&(l=this.g.Hd()),n==null&&(n=new h.ja(0)).Jb(100),this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(g,l)!=-2&&(n.add(g),this.g.Sa(g,l,-2))))}}if(n==null)l!=-1&&this.g.Ud(l);else{var w=this;for(n.Wd(0,n.size,function(ee,X){return w.Oh(ee,X)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Sa(x,l,c)}f=new h.h,(g=new h.h).Sc();var T=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,s),!s.rb(g))){if(T!=-1)for(;;){x=!1;for(var E=1<c-T?c-1:c,O=T;O<E;O++){var C=n.get(O);if(C!=-1){var N=-1,D=this.g.V(C);this.g.D(D,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(N=D),D=-1;var z=this.g.Na(C);if(this.g.D(z,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(D=z),N!=-1&&D!=-1)this.Mh(C,n,l),this.g.qd(C,!1),this.Mh(N,n,l),this.g.qd(N,!1),x=!0;else if(N!=-1||D!=-1){for(z=O+1;z<c;z++){var R=n.get(z);if(R!=-1){var G=this.g.V(R),W=-1;this.g.D(G,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(W=G),G=this.g.Na(R);var H=-1;if(this.g.D(G,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(H=G),W!=-1&&H!=-1){this.Mh(R,n,l),this.g.qd(R,!1),this.Mh(W,n,l),this.g.qd(W,!1),x=!0;break}if(N!=-1&&H!=-1){this.At(n,C,N,R,H,l),x=!0;break}if(D!=-1&&W!=-1){this.At(n,R,W,C,D,l),x=!0;break}}}if(x)break}}}if(!x)break}T=c,g.N(s)}this.g.Ud(l)}},v.prototype.Mh=function(u,o,s){s=this.g.Qa(u,s),o.set(s,-1),s=this.g.Qa(u,this.li),this.ed.set(s,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},v.prototype.At=function(u,o,s,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(s,l),this.g.Cc(l,s),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(l,u,c),this.g.oi(l,!0)},v.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var s=this.ed.get(u);s!=-1&&this.g.cj(s,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{s=p,f=0;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=p);this.g.fp(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c)}}for(u=0,o=this.ed.size;u<o;u++)if((s=this.ed.get(u))!=-1&&(c=this.g.cd(s))==-1){c=this.g.wf(this.Y,-1),f=0,p=s;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=p);2>=f?(s=this.g.Qa(p,this.li),this.ed.set(s,-1),p=this.g.qd(p,!1),f==2&&(0<=(s=this.g.Qa(p,this.li))&&this.ed.set(s,-1),this.g.qd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},v.wy=function(u,o,s,n){return new v(o,n).vy(u,s)},v.clip=function(u,o,s,n,l){return v.Pu(u,o,null,s,n,l)},v.Pu=function(u,o,s,n,l,c){var p=u.K();if(p==33)return l=u.D(),o.contains(l)?u:u.Ja();if(p==197)return l=new h.l,u.A(l),l.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Zo(l),o):u.Ja();if(u.B())return u;if(o.B())return u.Ja();var f=new h.l;if(u.yc(f),o.contains(f))return u;if(!o.isIntersecting(f))return u.Ja();if((s!=null||isNaN(n))&&h.ua.oy(s,o,!1),!h.ba.zj(p))throw h.i.O();if((s=u.Cb)!=null&&(s=s.Hk)!=null){if((s=s.To(o))==1){if(p!=1736)throw h.i.ga("internal error");return(u=new h.Ea(u.description)).vp(o),u}if(s==0)return u.Ja()}switch(p){case 550:for(c=null,p=u.I(),s=u.vb(0),n=0,l=new h.h,f=0;f<p;f++)s.uc(2*f,l),o.contains(l)||(n==0&&(c=u.Ja()),n<f&&c.Gd(u,n,f),n=f+1);return 0<n&&c.Gd(u,n,p),n==0?u:c;case 1736:case 1607:return v.wy(u,o,l,c);default:throw h.i.ga("internal error")}},v.prototype.Oh=function(u,o){var s=new h.h;return this.g.D(u,s),u=new h.h,this.g.D(o,u),s.compare(u)},v}();h.ti=k}(U||(U={})),function(h){var k=new h.h,v=function(){function o(s,n,l,c,p){this.Rm=new h.h,this.Fk=new h.h,this.Ri=new h.h,this.g=s,this.Cw=l,this.po=c,this.Rm=n,this.Al=p,this.Fk.Sc(),this.Ri.Sc()}return o.prototype.sE=function(s){this.g.D(s,this.Fk),s=h.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var n=h.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return u.eG(s,n)},o.prototype.ez=function(s){return this.g.Qa(s,this.Al)},o.prototype.Ky=function(s,n){return this.g.D(s,this.Fk),this.g.D(n,this.Ri),u.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},o}();h.oY=function(){};var u=function(){function o(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return o.dQ=function(s,n){var l=new o;return l.g=s,l.ra=n,l.Cw=n*n,l.bw=2*n,l.po=1/l.bw,l.wO()},o.Ev=function(s,n,l,c,p){return(s-=l)*s+(n-=c)*n<=p},o.eG=function(s,n){return h.P.Vh(n,h.P.Vh(s))},o.prototype.yO=function(s,n){this.g.Hc(s,k);for(var l=(k.y-this.Rm.y)*this.po,c=h.P.truncate((k.x-this.Rm.x)*this.po),p=h.P.truncate(l),f=l=0;1>=f;f+=1)for(var g=0;1>=g;g+=1){var w=o.eG(c+f,p+g),x=this.zl.lR(w);x!=-1&&(this.rq[l]=x,this.zs[l]=w,l++)}for(c=l-1;1<=c;c--)for(x=this.rq[c],p=c-1;0<=p;p--)if(x==this.rq[p]){this.zs[p]=-1,c!=--l&&(this.zs[c]=this.zs[l],this.rq[c]=this.rq[l]);break}for(p=0;p<l;p++)this.zO(s,this.zs[p],k,this.rq[p],n)},o.prototype.zO=function(s,n,l,c,p){for(var f=new h.h;c!=-1;c=this.zl.zR(c)){var g=this.zl.ka(c);s==g||n!=-1&&this.g.Qa(g,this.Al)!=n||(this.g.Hc(g,f),o.Ev(l.x,l.y,f.x,f.y,this.Cw)&&p.add(c))}},o.prototype.Zm=function(s,n,l){var c=this.g.Qa(s,this.so),p=this.g.Qa(n,this.so);return c==-1&&(c=this.Ad.Rh(),this.Ad.addElement(c,s),this.g.Sa(s,this.so,c)),p==-1?this.Ad.addElement(c,n):this.Ad.Cy(c,p),this.g.Sa(n,this.so,-2),n=this.TT(s,n),l&&(l=this.mw.sE(s),this.g.Sa(s,this.Al,l)),n},o.RT=function(s,n,l){s.Nb(n),l=s;var c=new h.h;o.ST(s.D(),n.D(),c),l.Db(c)},o.ST=function(s,n,l){var c=s.x;s.x!=n.x&&(c=(1*s.x+1*n.x)/2);var p=s.y;s.y!=n.y&&(p=(1*s.y+1*n.y)/2),l.na(c,p)},o.prototype.TT=function(s,n){var l=new h.h;this.g.D(s,l);var c=new h.h;this.g.D(n,c);var p=this.g.YF(s),f=p+(n=this.g.YF(n)),g=0,w=l.x;l.x!=c.x&&(w=(l.x*p+c.x*n)/f,g++);var x=l.y;return l.y!=c.y&&(x=(l.y*p+c.y*n)/f,g++),0<g&&this.g.Db(s,w,x),this.g.rX(s,f),g!=0},o.prototype.wO=function(){var s=this.g.gd,n=this.g.DF();for(this.Rm=n.hz(),n=Math.max(n.da(),n.S())/2147483646,this.bw<n&&(this.bw=n,this.po=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new v(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new h.ZK(h.P.truncate(4*s/3),this.mw),this.zl.vW(this.g.gd),s=!1,n=this.g.md;n!=-1;n=this.g.ve(n))for(var l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++){var g=this.mw.sE(c);this.g.Sa(c,this.Al,g),this.zl.addElement(c,g),c=this.g.V(c)}var w=new h.ja(0);for(w.Jb(10),n=this.g.md;n!=-1;n=this.g.ve(n))for(l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++){if(this.g.Qa(c,this.so)!=-2)for(g=this.g.Qa(c,this.Al),this.zl.kd(c,g);this.yO(c,w),w.size!=0;){g=!1;for(var x=0,T=w.size;x<T;x++){var E=w.get(x),O=this.zl.ka(E);this.zl.wd(E),g=this.Zm(c,O,x+1==T)||g}if(s=s||g,w.clear(!1),!g)break}c=this.g.V(c)}return s&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),s},o.prototype.qN=function(){for(var s=new h.h,n=this.Ad.ke;n!=-1;n=this.Ad.lz(n)){var l=this.Ad.sc(n);for(this.g.D(this.Ad.ka(l),s),l=this.Ad.lb(l);l!=-1;l=this.Ad.lb(l))this.g.mf(this.Ad.ka(l),s)}},o}();h.$t=u}(U||(U={})),function(h){var k=function(){function v(u){u===void 0&&(u=null),this.zg=null,this.Pb=!1,this.zg=u===null?[]:u}return v.prototype.copyTo=function(u){if(u.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var o=0;o<this.zg.length;o++)u.zg.push(this.zg[o].Qf())},v.prototype.count=function(){return this.zg.length},v.prototype.add=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(u.Qf())},v.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},v.prototype.remove=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(u,1)},v.prototype.kg=function(){var u=new v;return this.copyTo(u),u},v.prototype.Qf=function(){return this.kg()},v.prototype.transform=function(u,o,s,n){if(u.length<o)throw h.i.ga("invalid Argument");var l=s;for(s=0;s<this.zg.length;s++){var c=this.zg[s];if(c.sm()!=null){var p=c.Wn,f=p?1:0,g=p?c.sm().getGeogcs2():c.sm().getGeogcs1();if(g=l/(g=g.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(g-1))for(l=0;l<o;l++)u[l][0]*=g,u[l][1]*=g;h.HC.geogToGeog(c.sm(),o,u,null,f),l=(p?c.sm().getGeogcs1():c.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(g=l/n,3552713678800501e-30<Math.abs(g-1))for(l=0;l<o;l++)u[l][0]*=g,u[l][1]*=g;return o},v.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof v)||this.zg.length!=u.zg.length)return!1;for(var o=0;o<this.zg.length;o++)if(!this.zg[o].Nb(u.zg[o]))return!1;return!0},v.prototype.ix=function(){this.Pb=!0},v.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,s=this.count();o<s;++o)u+=this.zg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},v.create=function(){return new v},v}();h.rC=k}(U||(U={})),function(h){var k,v=Math.PI,u=2*Math.PI,o=Math.PI/2,s=function(){function c(){}return c.OO=function(p,f){var g=new c;return g.x=p,g.y=f,g.type=0,g.Wh=0,g},c.cl=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=0,f.Wh=0,f},c.NO=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=p.type,f.Wh=p.Wh,f},c.Qd=function(p,f,g){var w=new c;return w.x=p.x+f*Math.cos(g),w.y=p.y+f*Math.sin(g),w.type=p.type,w.Wh=p.Wh,w},c.Ru=function(p,f){var g=new c;return g.x=.5*(p.x+f.x),g.y=.5*(p.y+f.y),g.type=p.type,g.Wh=p.Wh,g},c.OE=function(p,f){var g=new c;return g.x=p.x+.001*(f.x-p.x),g.y=p.y+.001*(f.y-p.y),g.type=p.type,g.Wh=p.Wh,g},c}(),n=function(){};(k=h.aL||(h.aL={}))[k.Round=0]="Round",k[k.Bevel=1]="Bevel",k[k.Miter=2]="Miter",k[k.Square=3]="Square";var l=function(){function c(p){this.IA=this.Zb=this.xg=null,this.od=p}return c.W=function(p,f,g,w,x,T){if(p==null||1>p.Eb())throw h.i.O();return f==0||p.B()?p:((T=new c(T)).mo=p,T.La=f,T.ra=x,T.Mi=g,T.xA=w,T.Qx())},c.prototype.$L=function(){var p=this.mo,f=p.bc(),g=p.xc(),w=new h.h;return w.vc(g,f),w.normalize(),w.Jv(),w.scale(this.La),f.add(w),g.add(w),w=p.Ja(),p.Ec(f),p.Rc(g),w},c.prototype.ZL=function(){var p=this.mo;if(0<this.La&&this.Mi!=2){var f=new h.Ea;return f.bd(p,!1),this.mo=f,this.Qx()}return(p=new h.Hh(p.aa)).X(this.La,this.La),p},c.prototype.oJ=function(p,f,g,w){return(f.x-p.x)*(w.x-g.x)+(f.y-p.y)*(w.y-g.y)},c.prototype.hc=function(p,f){if(f===void 0)this.Zb.push(p),this.gf++;else if(this.gf==0)this.hc(p);else{var g=this.Dw,w=this.xg[f==0?g-1:f-1],x=this.xg[f],T=this.oJ(w,x,this.Zb[this.gf-1],p);0<T?this.hc(p):0>T&&(0<this.oJ(w,x,x,this.Zb[this.gf-1])?(x=this.xg[f==0?g-2:f==1?g-1:f-2],g=s.Qd(w,this.La,Math.atan2(w.y-x.y,w.x-x.x)-o),this.Zb[this.gf-1]=g,this.Mi==1||this.Mi==2?(g=s.Ru(g,w),this.hc(g),g=s.Qd(w,this.La,this.Lv+o),(w=s.Ru(g,w)).type|=256,this.hc(w)):(g=s.Qd(w,this.La,this.Lv+o)).type|=256,this.hc(g),this.hc(p,f)):(g=s.Qd(x,this.La,this.Lv+o),this.hc(g),this.Mi==1||this.Mi==2?(g=s.Ru(g,x),this.hc(g),g=s.Qd(x,this.La,this.Wz-o),(w=s.Ru(g,x)).type|=256,this.hc(w)):(g=s.Qd(x,this.La,this.Wz-o)).type|=256,this.hc(g)))}},c.prototype.hE=function(){var p,f=this.Dw;this.gf=0;var g=.5*this.ra,w=0,x=0;for(p=0;p<f;p++){var T=this.xg[p],E=p==0?this.xg[f-1]:this.xg[p-1],O=p==f-1?this.xg[0]:this.xg[p+1],C=E.x-T.x,N=E.y-T.y,D=O.x-T.x,z=O.y-T.y,R=Math.atan2(N,C),G=Math.atan2(z,D);if(this.Lv=R,this.Wz=G,p==0&&(w=R,x=G),C=C*z-D*N,N=G,G<R&&(G+=u),0<C*this.La)this.Mi==1||this.Mi==2?(R=s.Qd(T,this.La,R+o),this.hc(R),R=s.OE(T,R),this.hc(R),R=s.Qd(T,this.La,G-o),(T=s.OE(T,R)).type|=256,this.hc(T),this.hc(R)):(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),R=s.Qd(T,C,.5*(R+G)),this.hc(R,p));else if(512&T.type){for(C=1-g/Math.abs(this.La),E=1,O=0>this.La?-v:v,-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(E=h.P.truncate(v/N+1.5))&&(O/=E)),N=R+o,R=s.Qd(T,this.La,N),p==0&&(R.type|=1024),this.hc(R,p),C=this.La/Math.cos(O/2),N+=O/2,(R=s.Qd(T,C,N)).type|=1024,this.hc(R);0<--E;)N+=O,(R=s.Qd(T,C,N)).type|=1024,this.hc(R);(R=s.Qd(T,this.La,G-o)).type|=1024,this.hc(R)}else if(this.Mi==1)R=s.Qd(T,this.La,R+o),this.hc(R,p),R=s.Qd(T,this.La,G-o),this.hc(R);else if(this.Mi==0)for(C=1-g/Math.abs(this.La),E=1,O=G-o-(R+o),-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(E=h.P.truncate(Math.abs(O)/N+1.5))&&(O/=E)),C=this.La/Math.cos(.5*O),N=R+o+.5*O,R=s.Qd(T,C,N),this.hc(R,p);0<--E;)N+=O,R=s.Qd(T,C,N),this.hc(R);else this.Mi==2?(C=E.x-T.x,N=E.y-T.y,.99999999<(E=(C*(D=O.x-T.x)+N*(z=O.y-T.y))/Math.sqrt(C*C+N*N)/Math.sqrt(D*D+z*z))?(R=s.Qd(T,1.4142135623730951*this.La,G-.25*v),this.hc(R,p),R=s.Qd(T,1.4142135623730951*this.La,G+.25*v),this.hc(R)):(E=Math.abs(this.La/Math.sin(.5*Math.acos(E))))>(O=Math.abs(this.xA*this.La))?(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),R=s.Qd(T,C,.5*(R+G)),G=h.h.construct(R.x,R.y),R=h.h.construct(T.x,T.y),(T=new h.h).vc(G,R),(G=new h.h).BW(O/T.length(),T,R),R=(E-O)*Math.abs(this.La)/Math.sqrt(E*E-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(R/T.length()),(R=new h.h).add(G,T),(E=new h.h).vc(G,T),R=s.cl(R),this.hc(R,p),R=s.cl(E),this.hc(R)):(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),R=s.Qd(T,C,.5*(R+G)),this.hc(R,p))):(G=N,0<this.La?(G>R&&(G-=u),E=R-G<o):(G<R&&(G+=u),E=G-R<o),E?(N=0>(C=1.4142135623730951*this.La)?R+.25*v:R+.75*v,R=s.Qd(T,C,N),this.hc(R,p),N=0>C?G-.25*v:G-.75*v,R=s.Qd(T,C,N),this.hc(R)):(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),G<R&&(G+=u),R=s.Qd(T,C,(R+G)/2),this.hc(R,p)))}return this.Lv=w,this.Wz=x,this.hc(this.Zb[0],0),T=s.NO(this.Zb[this.gf-1]),this.Zb[0]=T,this.rW()},c.prototype.Cu=function(p,f){if(!(2>f))for(var g=0;g<f;g++){var w=this.Zb[p+g];g!=0?this.IA.Ei(h.h.construct(w.x,w.y)):this.IA.Nt(h.h.construct(w.x,w.y))}},c.prototype.aM=function(p,f,g){var w=p.Ca(f),x=p.Wc(f);if(this.Zb=[],this.IA=g,p.ec(f)){for(f=p.Oa(w);p.Oa(x-1).rb(f);)x--;if(2<=x-w){for(this.Dw=x-w,this.xg=[],f=w;f<x;f++)this.xg.push(s.cl(p.Oa(f)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(f=p.Oa(w);w<x&&p.Oa(w+1).rb(f);)w++;for(f=p.Oa(x-1);w<x&&p.Oa(x-2).rb(f);)x--;if(2<=x-w){for(this.Dw=2*(x-w)-2,this.xg=[],(g=s.cl(p.Oa(w))).type|=1536,this.xg.push(g),f=w+1;f<x-1;f++)g=s.cl(p.Oa(f)),this.xg.push(g);for((g=s.cl(p.Oa(x-1))).type|=512,this.xg.push(g),f=x-2;f>=w+1;f--)(g=s.cl(p.Oa(f))).type|=1024,this.xg.push(g);if(this.hE())if(2<=this.Zb.length){for(p=-1,(x=(1024&this.Zb[this.gf-1].type)!=0)||(p=0),f=1;f<this.gf;f++)(w=(1024&this.Zb[f].type)!=0)?x||1<(x=f-1)-p+1&&this.Cu(p,x-p+1):x&&(p=f-1),x=w;x||1<(x=this.gf-1)-p+1&&this.Cu(p,x-p+1)}else p=0,x=this.gf-1,0<=p&&1<=x-p&&this.Cu(p,x-p+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},c.prototype.rW=function(){for(var p=!1,f=0;f<this.gf;f++){var g=this.Zb[f];g.sh=f+1,g.uh=f-1,this.Zb[f]=g}for((g=this.Zb[0]).uh=this.gf-2,this.Zb[0]=g,(g=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=g,f=g=0;f<this.gf;f++)if(256&this.Zb[g].type){var w=this.BP(g);if(w==-1){p=!0;break}g=w}else g=this.Zb[g].sh;return!p&&(this.LO(g),!0)},c.prototype.BP=function(p){for(var f,g,w=this.gf-1,x=p,T=1;T<=w-2;T++){f=x=this.Zb[x].sh,g=p;for(var E=1;E<=T;E++){if(g=this.Zb[g].uh,(256&this.Zb[g].type)==0&&(256&this.Zb[f].type)==0){var O=this.bS(g,f);if(O!=-1)return O}f=this.Zb[f].uh}}return-1},c.prototype.bS=function(p,f){var g=this.Zb[this.Zb[p].uh],w=this.Zb[p],x=this.Zb[this.Zb[f].uh],T=this.Zb[f];if(!this.EW(g,w,x,T))return-1;var E=new n;return this.sQ(g,w,x,T,E)&&!E.XD&&h.P.XJ((w.x-g.x)*(T.y-x.y)-(w.y-g.y)*(T.x-x.x))!=h.P.XJ(this.La)?(g=this.Zb[p].uh,E.cn.type=w.type,E.cn.sh=f,E.cn.uh=g,this.Zb[p]=E.cn,E.cn=this.Zb[f],E.cn.uh=p,this.Zb[f]=E.cn,f):-1},c.prototype.EW=function(p,f,g,w){return Math.max(p.x,f.x)>=Math.min(g.x,w.x)&&Math.max(g.x,w.x)>=Math.min(p.x,f.x)&&Math.max(p.y,f.y)>=Math.min(g.y,w.y)&&Math.max(g.y,w.y)>=Math.min(p.y,f.y)},c.prototype.sQ=function(p,f,g,w,x){x.XD=!1;var T=(f.y-p.y)*(w.x-g.x)-(f.x-p.x)*(w.y-g.y),E=(g.y-p.y)*(f.x-p.x)-(g.x-p.x)*(f.y-p.y);if(0<=(T=T==0?2:E/T)&&1>=T){var O=T;if(T=(w.y-g.y)*(f.x-p.x)-(w.x-g.x)*(f.y-p.y),E=(p.y-g.y)*(w.x-g.x)-(p.x-g.x)*(w.y-g.y),0<=(T=T==0?2:E/T)&&1>=T)return x.cn=s.OO(p.x+T*(f.x-p.x),p.y+T*(f.y-p.y)),x.cn.Wh=g.Wh+O*(w.Wh-g.Wh),O!=0&&O!=1||T!=0&&T!=1||(x.XD=!0),x.RY=T,x.SY=O,!((O==0||O==1)&&0<T&&1>T||(T==0||T==1)&&0<O&&1>O)}return!1},c.prototype.LO=function(p){for(;this.Zb[p].uh<p;)p=this.Zb[p].uh;var f=0,g=p;do g=this.Zb[g],this.Zb[f]=g,g=g.sh,f++;while(g!=p);this.Zb[f]=this.Zb[0],this.gf=f+1},c.prototype.VC=function(p){var f=this.mo,g=f.Ha();if(g!=null){g.aj();for(var w=-1;g.ab();)w++,this.aM(f,w,p)}},c.prototype.Qx=function(){var p=this.mo.K();return p==322?this.$L():p==197?this.ZL():h.ba.zd(p)?((p=new h.Ua).pc(this.mo,!0),this.mo=p,this.Qx()):p==1607?(p=new h.Ua,this.VC(p),p):p==1736?(p=new h.Ea,this.VC(p),p):null},c}();h.DK=l}(U||(U={})),function(h){var k=function(){function s(n){this.sk=n}return s.prototype.D=function(n,l){this.sk.g.D(n,l)},s.prototype.wd=function(n){var l=this.sk.Ga.ka(n);this.sk.Ga.wd(n,-1),this.sk.g.qd(l,!1)},s}(),v=function(){function s(n){this.sk=n}return s.prototype.D=function(n,l){this.sk.DT.D(n,l)},s.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},s}(),u=function(){function s(n){this.sk=n}return s.prototype.D=function(n,l){l.N(this.sk.GT[n])},s.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},s}(),o=function(){function s(n){n===void 0?(this.Ga=new h.$j,this.Ga.Ee(20),this.g=new h.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new k(this)):n instanceof Array?(this.Ga=new h.$j,this.Ga.Ee(20),this.GT=n,this.Zh=new u(this)):(this.Ga=new h.$j,this.Ga.Ee(20),this.DT=n,this.Zh=new v(this))}return s.prototype.Ib=function(n){var l=n.K();if(h.Fx.zj(l))this.eN(n);else if(h.Xk.zd(l))this.jN(n);else if(l==197)this.bN(n);else{if(l!=33)throw h.i.O("invalid shape type");this.iN(n)}},s.prototype.YQ=function(){var n=new h.Ta,l=this.Ga.sc(-1),c=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(l),n),c.nf(n),l=this.Ga.lb(l);l!=-1;l=this.Ga.lb(l))this.g.Xi(this.Ga.ka(l),n),c.lineTo(n);return c},s.MO=function(n){var l=new s(n),c=n.I(),p=1,f=new h.h,g=new h.h,w=new h.h;for(n.D(0,f);n.D(p,g),g.Mz(f)&&p<c-1;)p++;for(l.Ga.addElement(0,-1),l.Ga.zn(p),c=p+1;c<n.I();c++)n.D(c,w),(p=l.kC(w))!=-1&&l.Ga.Uj(p,c);for(w=new h.Ta,p=l.Ga.sc(-1),c=new h.Ea(n.description),n.we(l.Ga.ka(p),w),c.nf(w),p=l.Ga.lb(p);p!=-1;p=l.Ga.lb(p))n.we(l.Ga.ka(p),w),c.lineTo(w);return c},s.construct=function(n,l,c){for(var p=new s(n),f=1,g=n[0];n[f].Mz(g)&&f<l-1;)f++;for(p.Ga.addElement(0,-1),p.Ga.zn(f),f+=1;f<l;f++)(g=p.kC(n[f]))!=-1&&p.Ga.Uj(g,f);for(n=0,l=p.Ga.sc(-1);l!=-1;l=p.Ga.lb(l))c[n++]=p.Ga.ka(l);return n},s.EG=function(n,l){var c=n.Ca(l),p=n.Wc(l);if(l=!n.ec(l)&&n.Pn(l),n=n.vb(0),p*=2,l&&(p-=2),6>p-(c*=2))return!0;l=new h.h;var f=new h.h,g=new h.h;n.uc(c,l),n.uc(c+2,f),n.uc(c+4,g);var w=s.Yu(f,g,l);if(w.rs()||!s.wm(w.value()))return!1;var x=h.h.construct(f.x,f.y),T=new h.h;for(c+=6;c<p;c+=2)if(T.N(f),f.N(g),n.uc(c,g),(w=s.Yu(f,g,l)).rs()||!s.wm(w.value())||(w=s.Yu(x,g,l)).rs()||!s.wm(w.value())||(w=s.Yu(f,g,T)).rs()||!s.wm(w.value()))return!1;return!0},s.prototype.eN=function(n){for(var l=new h.Ta,c=new h.h,p=0;p<n.I();p++){n.D(p,c);var f=this.Er(c);if(f!=-1){n.we(p,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(f,g)}}},s.prototype.bN=function(n){for(var l=new h.Ta,c=new h.h,p=0;4>p;p++){n.hB(p,c);var f=this.Er(c);if(f!=-1){n.If(p,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(f,g)}}},s.prototype.jN=function(n){var l=new h.Ta,c=n.bc();if((c=this.Er(c))!=-1){n.Vo(l);var p=this.g.hc(this.Us,l);this.Ga.Uj(c,p)}c=n.xc(),(c=this.Er(c))!=-1&&(n.Ro(l),n=this.g.hc(this.Us,l),this.Ga.Uj(c,n))},s.prototype.iN=function(n){var l=n.D();(l=this.Er(l))!=-1&&(n=this.g.hc(this.Us,n),this.Ga.Uj(l,n))},s.prototype.Er=function(n){var l=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var c=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return n.Mz(c)||(l=this.Ga.zn(-5)),l}return this.kC(n)},s.prototype.kC=function(n){var l=-1;do{var c=this.Ga.sc(-1),p=this.Ga.Gc(-1),f=this.Ga.ka(c),g=this.Ga.ka(p),w=new h.h,x=new h.h;if(this.Zh.D(f,w),this.Zh.D(g,x),f=h.h.Wq(x,n,w),s.wm(f))l=this.Ga.zn(-1),(w=this.iC(n,p,c))!=c&&this.jC(n,c,this.Ga.xe(w));else if(s.xG(f)){x=this.Ga.uv(-1);var T=this.Ga.sc(-1),E=this.Ga.Gc(-1);for(f=new h.h,g=new h.h;T!=this.Ga.xe(E);){var O=this.Ga.ka(x);this.Zh.D(O,f),O=h.h.Wq(f,n,w),s.xG(O)?(E=x,x=this.Ga.nl(x)):(T=x,x=this.Ga.Zp(x))}if(x=E,w=T,O=this.Ga.ka(x),T=this.Ga.ka(w),this.Zh.D(O,f),this.Zh.D(T,g),w!=c&&(f=h.h.Wq(g,n,f),!s.wm(f)))continue;l=this.Ga.Bu(w,x,-2,!1),this.jC(n,x,p),this.iC(n,w,c)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec(x),this.tb.Rc(w),0>(w=this.tb.ge(n,!0))?(w=this.Ga.xe(p),this.Ga.wd(p,-1),l=this.Ga.zn(-3),this.iC(n,w,c)):1<w&&(w=this.Ga.lb(c),this.Ga.wd(c,-1),l=this.Ga.Bu(-1,w,-3,!1),this.jC(n,w,p))}while(0);return l},s.prototype.jC=function(n,l,c){if(l!=c){var p=this.Ga.ka(l),f=this.Ga.lb(l),g=new h.h,w=new h.h;for(this.Zh.D(p,g);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),w),p=h.h.Wq(w,n,g),!s.wm(p));)p=l,l=f,g.N(w),f=this.Ga.lb(l),this.Zh.wd(p)}},s.prototype.iC=function(n,l,c){if(l==c)return c;var p=this.Ga.ka(l),f=this.Ga.xe(l),g=new h.h,w=new h.h;for(this.Zh.D(p,g);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),w),p=h.h.Wq(g,n,w),!s.wm(p));)p=l,l=f,g.N(w),f=this.Ga.xe(l),this.Zh.wd(p);return l},s.Yu=function(n,l,c){var p=new h.Xb;p.set(l.x),p.sub(n.x);var f=new h.Xb;f.set(c.y),f.sub(n.y);var g=new h.Xb;return g.set(l.y),g.sub(n.y),(l=new h.Xb).set(c.x),l.sub(n.x),p.Bg(f),g.Bg(l),p.sub(g),p},s.wm=function(n){return 0>n},s.xG=function(n){return 0<n},s}();h.au=o}(U||(U={})),function(h){var k=function(){function v(u){this.g=null,this.oH=!0,this.od=u}return v.uU=function(u,o,s){return u=h.ua.Gr(u),h.$t.Ev(o.Ng(),o.kh(),s.Ng(),s.kh(),h.mc.ox(u))},v.xO=function(u,o){var s=new h.Ta;return h.$t.RT(u,o,s),s},v.W=function(u,o,s,n){return(s=new v(s)).g=u,s.ra=o,s.oH=n,s.zM()},v.prototype.iM=function(u){return h.$t.dQ(this.g,u)},v.prototype.nM=function(u){return h.bu.W(this.g,u,this.od)},v.prototype.zM=function(){var u=this.ra,o=h.ua.Gr(u),s=1.00001*(u=h.ua.mN(u));u*=1.000001;for(var n=!1,l=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),c=0,p=this.g.eS();;c++){if(c>l)throw h.i.ga("Internal Error: max number of iterations exceeded");var f=this.iM(o);if(n=n||f,this.oH&&(f=this.g.Ip(o,!0,!1)!=0,n=n||f),f=!1,(c==0||p||h.bu.fI(!0,this.g,u,null,this.od))&&(f=this.nM(s),n=n||f),!f)break;h.op.Bp(this.od)}return n},v}();h.Vk=k}(U||(U={})),function(h){var k=function(){function u(o){this.ae=this.Nc=null,this.$s=0,this.Vb=o,this.Yz=!0}return u.prototype.wv=function(o,s){var n=this.g.cc(o);if(n==null){if(!this.g.fd(o,s))return null;n=s}return n},u.prototype.Zq=function(){var o;o===void 0&&(o=!1),this.$s++,(o||!(4095&this.$s))&&(this.$s=0,h.op.Bp(this.Vb))},u.prototype.iP=function(){var o=this.g.$q(!1),s=!1,n=new h.zb,l=new h.zb,c=new h.l;c.Pa();var p=new h.l;p.Pa();for(var f=new h.Ta,g=new h.OC,w=o.next();w!=-1;w=o.next()){h.op.Bp(this.Vb);var x=null,T=!1;if(!h.ba.Tn(this.g.jc(o.ek))){if((x=this.wv(w,n))==null)continue;if(x.A(c),c.X(this.ra,this.ra),x.Di(this.ra)){if(!x.Di(0))continue;T=!0,x=null}}var E=this.g.$q(o),O=E.next();for(O!=-1&&(O=E.next());O!=-1;O=E.next()){var C=null,N=!1;if(!h.ba.Tn(this.g.jc(E.ek))){if((C=this.wv(O,l))==null)continue;if(C.A(p),C.Di(this.ra)){if(!C.Di(0))continue;N=!0,C=null}}var D=0,z=0;if(x!=null&&C!=null)c.CG(p)&&(g.Qo(x),g.Qo(C),g.Fa(this.ra,!1),0<(D=g.ql(0))+(z=g.ql(1))&&(this.g.lr(w,g,0,!0),this.g.lr(O,g,1,!0)),g.clear());else if(x!=null){var R=new h.h;if(this.g.D(O,R),c.contains(R)){if(g.Qo(x),this.g.Xi(O,f),g.Fz(this.ra,f,!1),0<(D=g.ql(0)))if(this.g.lr(w,g,0,!0),N){for(N=-1,R=this.g.V(O);R!=-1&&R!=O&&(N=R,(C=this.wv(R,l))!=null&&C.Di(0));R=this.g.V(R));for(R=O;R!=-1&&(this.g.Fh(R,g.Cf),R!=N);R=this.g.V(R));}else this.g.Fh(O,g.Cf);g.clear()}}else{if(C==null)continue;if(R=new h.h,this.g.D(w,R),p.X(this.ra,this.ra),p.contains(R)){if(g.Qo(C),this.g.Xi(w,f),g.Fz(this.ra,f,!1),0<(z=g.ql(0)))if(this.g.lr(O,g,0,!0),T){for(N=-1,R=this.g.V(w);R!=-1&&R!=w&&(N=R,(C=this.wv(R,l))!=null&&C.Di(0));R=this.g.V(R));for(R=w;R!=-1&&(this.g.Fh(R,g.Cf),R!=N);R=this.g.V(R));}else this.g.Fh(w,g.Cf);g.clear()}}if(D+z!=0){if(D!=0){if((x=this.g.cc(w))==null){if(!this.g.fd(w,n))continue;x=n,n.A(c)}else x.A(c);if(x.Di(this.ra))break}s=!0}}}return s},u.prototype.jP=function(){return this.LU()},u.prototype.LU=function(){return new h.MC().LX(this.g,this.ra)},u.prototype.gI=function(){var o=!1;this.Nc==null&&(this.Nc=new h.$j);var s=new h.ja(0);s.Jb(this.g.gd+1);for(var n=this.g.$q(),l=n.next();l!=-1;l=n.next())s.add(l);this.g.nx(s,s.size),s.add(-1),n=this.g.Hd(),l=this.g.Hd(),this.ae=new h.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var c=new h.ja(0),p=new h.ja(0),f=0;new h.h;var g=this.g.ud;this.g.wb.oc();for(var w,x,T=this.g.wb.Aa[0].o,E=s.get(f++);E!=-1;){var O=w=T[2*(x=g.U(E,0))],C=x=T[2*x+1];do{var N=g.U(E,2),D=g.U(E,1);if(N!=-1){var z=g.U(N,0),R=T[2*z];0>(C<(z=T[2*z+1])?-1:C>z?1:O<R?-1:O>R?1:0)&&(p.add(E),p.add(N))}D!=-1&&(R=T[2*(z=g.U(D,0))],0>(C<(z=T[2*z+1])?-1:C>z?1:O<R?-1:O>R?1:0)&&(p.add(D),p.add(D))),(R=this.g.Qa(E,n))!=-1&&(c.add(R),this.g.Sa(E,n,-1)),(R=this.g.Qa(E,l))!=-1&&(c.add(R),this.g.Sa(E,l,-1)),(E=s.get(f++))!==-1&&(O=T[2*(C=g.U(E,0))],C=T[2*C+1])}while(E!=-1&&O===w&&C===x);for(O=c.size==1&&p.size==2,R=C=-1,N=0,D=c.size;N<D;N++){z=c.get(N);var G=this.Nc.xe(z);if(G==-1||c.cG(G)||(C=G),(z=this.Nc.lb(z))==-1||c.cG(z)||(R=z),C!=-1&&R!=-1)break}for(this.ae.VJ(x,w),N=0,D=c.size;N<D;N++)z=c.get(N),this.Nc.wd(z,-1);if(c.clear(!1),!O&&C!=-1&&R!=-1&&this.lO(C,R)){o=!0,this.Pi=this.ae.tm();break}for(N=0,D=p.size;N<D;N+=2){if(x=p.get(N),w=p.get(N+1),O?(x=this.Nc.Bu(C,R,x,!0),O=!1):x=this.Nc.addElement(x,-1),this.ae.sg){this.Pi=this.ae.tm(),o=!0;break}this.g.Qa(w,n)==-1?this.g.Sa(w,n,x):this.g.Sa(w,l,x)}if(o)break;p.Dh(0)}return this.g.Ud(n),this.g.Ud(l),o},u.prototype.lO=function(o,s){return this.ae.compare(this.Nc,this.Nc.ka(o),s),o=this.ae.sg,this.ae.Mr(),o},u.tE=function(o){for(var s=o.md;s!=-1;s=o.ve(s))if(h.ba.Ic(o.jc(s)))return!0;return!1},u.aQ=function(o,s,n,l){return!!u.tE(o)&&((s=new u(l)).g=o,s.ra=n,15>o.gd?o=s.iP():s.jP())},u.W=function(o,s,n){return u.aQ(o,o.DF(),s,n)},u.fI=function(o,s,n,l,c){if(!u.tE(s))return!1;var p=new u(c);if(p.g=s,p.ra=n,p.Yz=o,p.gI())return l!=null&&l.Yt(p.Pi),!0;var f=new h.Ed;return f.VB(),s.Pc(f),(p=new u(c)).g=s,p.ra=n,p.Yz=o,o=p.gI(),f.VB(),s.Pc(f),!!o&&(l!=null&&l.Yt(p.Pi),!0)},u.Ol=function(o,s){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*s<1*o*s},u.gP=function(o,s,n,l){if(h.ba.Ic(s.K()))return new u(l).hP(o,s,n);throw h.i.ga("crack_A_with_B")},u.prototype.hP=function(o,s,n){var l=new h.l;o.yc(l);var c=new h.l;if(s.yc(c),c.X(n,n),!c.isIntersecting(l))return o;var p=o.Cb,f=null;p!=null&&(f=p.Gb),u.Ol(o,o.I())&&(f=h.ua.lj(o,c));var g=f!=null?f.getIterator():null,w=s.Ha();s=o.Ha();var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];w.ab();)for(;w.Ia();){var T=w.ia();if(f!=null){for(g.Wo(T,n),p=g.next();p!=-1;p=g.next())if(this.Zq(),s.Wb(f.ka(p),-1),s.Ia()){var E=(p=s.ia()).Fa(T,null,x,null,n);for(p=0;p<E;++p){var O=x[p];if(O!=0&&O!=1){var C=s.xb(),N=new v;N.t=O,N.index=C,c.push(N)}}}}else{var D=new h.l;if(T.yc(D),D.X(n,n),l.isIntersecting(D)){for(s.aj();s.ab();)for(;s.Ia();)if(this.Zq(),p=s.ia(),O=new h.l,p.yc(O),O.isIntersecting(D))for(E=p.Fa(T,null,x,null,n),p=0;p<E;++p)(O=x[p])!=0&&O!=1&&(C=s.xb(),(N=new v).t=O,N.index=C,c.push(N))}}}if(c.length==0)return o;for(c=c.sort(v.zy),o=o.Ja(),s.aj();s.ab()&&!s.Ia(););for(n=s.ia(),l=new h.jg,f=-1,p=0,g=c.length;p<g;){for(x=c[p].index,w=p+1;w<g&&c[w].index==x;)++w;for(;s.xb()<x;){if(this.Zq(),T=s.Ia(),O=s.gb,(D=T||!s.Qn()||s.Rn())&&o.pc(n,f!=O),f=O,!T)for(;s.ab()&&!s.Ia(););n=s.ia()}for(x=0;p<w;p++)(O=c[p].t)!=x&&(n.dh(x,O,l),x=O,O=s.gb,o.pc(l.get(),f!=O),f=O);if((D=(T=s.Ia())||!s.Qn()||s.Rn())&&(n.dh(x,1,l),o.pc(l.get(),!1)),T)n=s.ia();else{for(;s.ab()&&!s.Ia(););n=s.Ia()?s.ia():null}p=w}for(n!=null&&(O=s.gb,(D=(T=s.Ia())||!s.Qn()||s.Rn())&&o.pc(n,f!=O),f=O),T=s.Ia();;){if(!T){for(;s.ab()&&!(T=s.Ia()););if(!T)break}n=s.ia(),O=s.gb,(D=(T=s.Ia())||!s.Qn()||s.Rn())&&o.pc(n,f!=O),f=O}return o},u}();h.bu=k;var v=function(){function u(){}return u.zy=function(o,s){return o.index==s.index?o.t>s.t?1:o.t<s.t?-1:0:o.index>s.index?1:-1},u}()}(U||(U={})),function(h){var k;(k=h.FK||(h.FK={}))[k.Left=0]="Left",k[k.Right=1]="Right",k[k.Coincident=2]="Coincident",k[k.Undefined=3]="Undefined",k[k.Uncut=4]="Uncut";var v=function(s,n,l,c,p,f,g,w,x,T,E){this.Y=s,this.ct=n,this.Ps=l,this.ug=c,this.Nm=T,this.Cl=E};h.qY=v;var u=function(){function s(n,l){this.EH=n,this.Ji=l}return s.prototype.lM=function(n,l){var c=new h.h;this.Ji.D(n,c);var p=new h.h;return this.Ji.D(l,p),(c=c.compare(p))!=0?c:(n=this.Ji.Qa(n,this.EH))<(l=this.Ji.Qa(l,this.EH))?-1:n==l?0:1},s}(),o=function(s,n,l,c,p,f,g,w,x){this.ug=s,this.Ps=n,this.JA=l,this.PH=c,this.Gi=p,this.Cl=f,this.Nm=g,this.QH=w,this.JT=x};h.pY=o,h.GK=function(){function s(){}return s.EK=function(n,l,c,p,f,g){if(l.B())n=new v(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new v(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var w=new h.hd;if(w.Ib(l),w.Ib(c),h.Vk.W(w,p,g,!0),w.gd==0)n=new v(l.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(l=0,c=w.Hd(),p=w.md;p!=-1;p=w.ve(p))for(g=w.Ob(p);g!=-1;g=w.Sb(g))for(var x=w.Ya(g),T=0,E=w.Ka(g);T<E;x=w.V(x),T++)w.Sa(x,c,l++);l=s.CM(c,w),s.YL(n,l,w,f)}}},s.CM=function(n,l){for(var c=l.gd,p=new h.ja(0),f=l.md;f!=-1;f=l.ve(f))for(var g=l.Ob(f);g!=-1;g=l.Sb(g))for(var w=l.Ya(g),x=0,T=l.Ka(g);x<T;w=l.V(w),x++)p.add(w);var E=new u(n,l);p.Wd(0,c,function(ce,ue){return E.lM(ce,ue)}),n=[];var O=[],C=l.Hd(),N=l.Hd();f=l.md,g=l.ve(f),T=new h.h;var D=new h.h,z=p.get(0),R=l.cd(z),G=l.Sf(R);l.D(z,T);var W=1;for(w=0;W<c-1;){var H=!1;for(x=W;x<c;x++)if(x!=w){var ee=p.get(x),X=l.cd(ee),ne=l.Sf(X);if(l.D(ee,D),!T.rb(D))break;G==f&&ne==g&&(H=s.pM(C,N,l,n,O,R,z,X,ee))}if(H||w==W-1){if(H&&w==W-1&&W--,++w==c)break;z=p.get(w),R=l.cd(z),G=l.Sf(R),l.D(z,T)}H||(W=w+1)}for(c=[],f=l.md;f!=-1;f=l.ve(f))for(g=l.Ob(f);g!=-1;g=l.Sb(g))for(p=l.Ya(g),x=0,T=l.Ka(g);x<T;p=l.V(p),x++){if(0<=(w=l.Qa(p,N)))for(;w<O.length&&O[w].ug==p;)c.push(O[w++]);if(0<=(w=l.Qa(p,C)))for(;w<n.length&&n[w].ug==p;)c.push(n[w++])}return l.Ud(C),l.Ud(N),c},s.pM=function(n,l,c,p,f,g,w,x,T){var E=c.tj(g),O=c.tj(x),C=c.Ya(g),N=c.Ya(x),D=c.Na(w),z=c.Na(T),R=!1,G=!1,W=!1,H=!1;return w!=C&&(T!=N&&(R=s.qM(n,c,p,g,D,x,z)),T!=O&&(G=s.rM(n,c,p,g,D,x,T))),w!=E&&(T!=N&&(W=s.sM(l,c,f,g,w,x,z,C)),T!=O&&(H=s.tM(l,c,f,g,w,x,T,C))),R&&G&&W?(n=p.length-1,f[H?f.length-2:f.length-1].Gi==2&&(p[n-1]=p[n],--p.length)):R&&G&&H&&f[f.length-1].Gi==2&&(f=p[p.length-1],--p.length,c.Qa(f.ug,n)==p.length&&c.Sa(f.ug,n,-1)),R||G||W||H},s.qM=function(n,l,c,p,f,g,w){var x=new h.zb,T=new h.zb,E=[0,0],O=[0,0],C=l.cc(f);return C==null&&(l.fd(f,x),C=x),(x=l.cc(w))==null&&(l.fd(w,T),x=T),2>(C=C.Fa(x,null,E,O,0))&&(p=new o(f,p,E[0],NaN,C,w,g,O[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1)),!0},s.rM=function(n,l,c,p,f,g,w){var x=new h.zb,T=new h.zb,E=[0,0],O=[0,0],C=l.cc(f);return C==null&&(l.fd(f,x),C=x),(x=l.cc(w))==null&&(l.fd(w,T),x=T),2>(C=C.Fa(x,null,E,O,0))&&(p=new o(f,p,E[0],NaN,C,w,g,O[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0)},s.sM=function(n,l,c,p,f,g,w,x){var T=new h.zb,E=new h.zb,O=[0,0],C=[0,0],N=l.cc(f);return N==null&&(l.fd(f,T),N=T),(T=l.cc(w))==null&&(l.fd(w,E),T=E),(N=N.Fa(T,null,O,C,0))==2?(p=new o(f,p,O[0],O[1],N,w,g,C[0],C[1]),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==x&&(p=new o(f,p,O[0],NaN,N,w,g,C[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},s.tM=function(n,l,c,p,f,g,w,x){var T=new h.zb,E=new h.zb,O=[0,0],C=[0,0],N=l.cc(f);return N==null&&(l.fd(f,T),N=T),(T=l.cc(w))==null&&(l.fd(w,E),T=E),(N=N.Fa(T,null,O,C,0))==2?(p=new o(f,p,O[0],O[1],N,w,g,C[0],C[1]),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==x&&(p=new o(f,p,O[0],NaN,N,w,g,C[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},s.YL=function(n,l,c,p){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var g=new h.h,w=new h.h,x=new h.h,T=new h.h,E=null;p!=null&&(E=new h.jg).Qr();var O=0,C=null,N=new h.zb;new h.zb;for(var D=c.Ob(c.md);D!=-1;D=c.Sb(D)){for(var z=4,R=-1,G=-1,W=-1,H=-1,ee=NaN,X=!0,ne=!1,ce=!0,ue=!0,Ee=!0,ye=0,Ue=D,Fe=0,xe=c.Ya(D),Rt=c.Ka(D),vi=0;vi<Rt;xe=c.V(xe),vi++){var Dt=c.cc(xe);if(Dt==null){if(!c.fd(xe,N))continue;Dt=N}G==-1&&(G=xe);for(var dt=0;O<l.length&&xe==l[O].ug;){R=l[O].Ps;var ft=l[O].ug,it=l[O].JA,Ut=l[O].Nm,tt=l[O].Cl,Yr=l[O].QH;if(l[O].Gi==2){if(ne||(Ue=R,G=ft,Fe=it,W=Ut,H=tt,ee=Yr,z=2,p!=null?C=new h.Ua:ye=0,Ee=!1,ue=!0),it=l[O].PH,Yr=l[O].JT,p!=null?(Dt.dh(dt,l[O].PH,E),C.pc(E.get(),ue)):ye++,dt=it,ne=!0,ue=X=!1,O+1==l.length||l[O+1].Gi!=2||l[O+1].ug==ft&&l[O+1].JA!=dt){if(p!=null){var lt=new v(C,2,R,ft,it,z,Ue,G,Fe,Ut,tt);p.push(lt)}else null.add(ye);Ue=R,G=ft,Fe=it,W=Ut,H=tt,ee=Yr,z=2,ne=X=!1,ue=Ee=!0}}else{var er=c.V(ft);if(O<l.length-1&&l[O+1].ug==er&&l[O+1].Cl==tt&&l[O+1].Gi==2)it!=dt&&(Ee&&(p!=null?C=new h.Ua:ye=0),X=0<O&&l[O-1].Ps==R?z==1?0:z==0?1:3:3,p!=null?(Dt.dh(dt,it,E),C.pc(E.get(),ue),lt=new v(C,X,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):(ye++,null.add(ye)),dt=it,Ue=R,G=ft,Fe=it,W=Ut,H=tt,ee=Yr,z=X,X=ce=!1,ue=Ee=!0);else if(!s.xM(n,c,l,O,g,w)){s.uM(c,l,O,D,xe,x,T);var wt=!1;if(er=!1,lt=!0,!(g.rb(x)||w.rb(x)||g.rb(T)||w.rb(T))){f[0].N(g),f[1].N(w),f[2].N(x),f[3].N(T),f.sort(h.h.pu);var sc=f[0],nc=f[1],oc=f[2],ar=f[3];sc.rb(g)?nc.rb(w)?n?(er=wt=!0,lt=!1):wt=!1:ar.rb(w)?n?lt=er=wt=!0:wt=!1:(wt=!0,lt=nc.rb(x)):nc.rb(g)?oc.rb(w)?n?(er=wt=!0,lt=!1):wt=!1:sc.rb(w)?n?lt=er=wt=!0:wt=!1:(wt=!0,lt=oc.rb(x)):oc.rb(g)?ar.rb(w)?n?(er=wt=!0,lt=!1):wt=!1:nc.rb(w)?n?lt=er=wt=!0:wt=!1:(wt=!0,lt=ar.rb(x)):sc.rb(w)?n?(er=wt=!0,lt=!1):wt=!1:oc.rb(w)?n?lt=er=wt=!0:wt=!1:(wt=!0,lt=sc.rb(x))}wt&&(wt=xe==ft,(it!=dt||wt&&dt==0)&&(Ee&&(p!=null?C=new h.Ua:ye=0),p!=null?(Dt.dh(dt,it,E),C.pc(E.get(),ue)):ye++),lt?z!=1?((it!=dt||wt&&dt==0)&&(p!=null?(lt=new v(C,1,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):null.add(ye)),er?(O>=l.length-2||l[O+2].Ps!=R)&&(z=0):z=1):((it!=dt||wt&&dt==0)&&(p!=null?(lt=new v(C,3,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):null.add(ye)),z=1):z!=0?((it!=dt||wt&&dt==0)&&(p!=null?(lt=new v(C,0,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):null.add(ye)),er?(O>=l.length-2||l[O+2].Ps!=R)&&(z=1):z=0):((it!=dt||wt&&dt==0)&&(p!=null?(lt=new v(C,3,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):null.add(ye)),z=0),(it!=dt||wt&&dt==0)&&(dt=it,Ue=R,G=ft,Fe=it,W=Ut,H=tt,ee=Yr,X=ce=!1,ue=Ee=!0))}}O++}dt!=1&&(Ee&&(p!=null?C=new h.Ua:ye=0),p!=null?(Dt.dh(dt,1,E),C.pc(E.get(),ue)):ye++,ue=Ee=!1,ce=!0)}ce&&(it=1,ft=c.tj(D),ft=c.Na(ft),tt=Ut=-1,Yr=NaN,X?p!=null?(lt=new v(C,4,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):null.add(ye):(X=z==1?0:z==0?1:3,p!=null?(lt=new v(C,X,R,ft,it,z,Ue,G,Fe,Ut,tt),p.push(lt)):null.add(ye)))}},s.xM=function(n,l,c,p,f,g){var w=c[p].QH;if(w==1)return s.vM(n,l,c,p,f,g);if(w==0)return s.wM(n,l,c,p,f,g);throw h.i.Ra()},s.vM=function(n,l,c,p,f,g){var w=new h.zb,x=c[p].ug,T=c[p].Nm,E=c[p].Cl,O=-1,C=-1,N=-1,D=-1;if(!n&&0<p){var z=c[p-1];O=z.ug,C=z.Nm,N=z.Cl,D=z.Gi}var R=-1,G=-1,W=-1,H=-1;p<c.length-1&&(R=(z=c[p+1]).ug,G=z.Nm,W=z.Cl,H=z.Gi);var ee=l.V(x);return z=l.V(E),n?p==c.length-1||R!=x||G!=T||W!=z||H==2?((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):((n=l.cc(E))==null&&(l.fd(E,w),n=w),f.N(n.lg()),(n=l.cc(z))==null&&(l.fd(z,w),n=w),g.N(n.lg()),f.Uq(),g.normalize(),f.normalize(),!1):0<p&&O==x&&C==T&&N==z&&D==2||p<c.length-1&&R==ee&&G==T&&W==z&&H==2?((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):!(p<c.length-1&&R==x&&G==T&&W==z)||((n=l.cc(E))==null&&(l.fd(E,w),n=w),f.N(n.lg()),(n=l.cc(z))==null&&(l.fd(z,w),n=w),g.N(n.lg()),f.Uq(),g.normalize(),f.normalize(),!1)},s.wM=function(n,l,c,p,f,g){var w=new h.zb,x=c[p].ug,T=c[p].Nm,E=c[p].Cl,O=-1,C=-1,N=-1,D=-1;if(!n&&p<c.length-1){var z=c[p+1];O=z.ug,C=z.Nm,N=z.Cl,D=z.Gi}var R=-1,G=-1,W=-1;z=-1,0<p&&(R=(z=c[p-1]).ug,G=z.Nm,W=z.Cl,z=z.Gi);var H=l.V(x),ee=l.Na(E);return n?p!=0&&R==x&&G==T&&W==ee&&z!=2||((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):!(0<p&&R==x&&G==T&&W==ee&&z==2||p<c.length-1&&O==H&&C==T&&N==ee&&D==2)||((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1)},s.uM=function(n,l,c,p,f,g,w){var x=new h.zb,T=n.cc(f);if(T==null&&(n.fd(f,x),T=x),l=(c=l[c]).ug,c=c.JA,f=n.V(l),c==1)g.N(T.lg()),f!=-1&&f!=n.tj(p)?((T=n.cc(f))==null&&(n.fd(f,x),T=x),w.N(T.lg()),(T=n.cc(l))==null&&n.fd(l,x)):w.N(g),g.Uq(),w.normalize(),g.normalize();else{if(c!=0)throw h.i.Ra();w.N(T.lg()),g.nt(w),w.normalize(),g.normalize()}},s}()}(U||(U={})),function(h){var k;(k=h.XL||(h.XL={}))[k.Linear=0]="Linear",k[k.Angular=1]="Angular",k[k.Area=2]="Area";var v=function(){function p(f,g,w){this.pd=g,this.ci=w,this.qA=f}return p.prototype.Nb=function(f){return f instanceof p&&this.ci===f.ci},p.WF=function(f){return f.pd!==0?null:f.qA===-1?new p(-1,2,f.ci*f.ci):p.ah(l[f.qA])},p.ah=function(f){return(f=n[f])===void 0?null:f},p.UO=function(f,g,w){var x=null;if(w!=null)try{w.values[0]==="EPSG"&&(x=p.ah(parseInt(w.values[1])))}catch{}return x===null&&(x=new p(-1,f,g)),x},p.prototype.Fc=function(){return this.qA},p.prototype.xF=function(f){if(f.pd!=this.pd)throw h.i.Hb();return this.ci/f.ci},p.Ph=function(f,g,w){return g.xF(w)*f},p.SE=function(f,g,w,x,T){for(w=w.xF(x),x=0;x<g;x++)T[x]=f[x]*w},p}();h.Uc=v;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],l=[],c=0;c<u.length;c+=2)n[u[c]]=new v(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new v(o[c],1,o[c+1]);for(o=null,c=0;c<s.length;c+=3)n[s[c]]=new v(s[c],0,s[c+1]),l[s[c]]=s[c+2];s=null}(U||(U={})),function(h){var k=function(){function v(){this.yb=this.pb=0}return v.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.yb=o):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},v.prototype.value=function(){return this.pb},v.prototype.add=function(u){var o=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(o),this.pb=o,this.yb=u},v.prototype.fN=function(){var u=this.pb+1,o=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=o},v.prototype.ZM=function(u,o){this.pb=u.pb+o.pb,this.yb=u.yb+o.yb+2220446049250313e-31*Math.abs(this.pb)},v.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(o);this.pb=o,this.yb=u},v.prototype.Bg=function(u){var o=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Po=function(u){var o=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Ml=function(u,o){var s=Math.abs(u.pb)*Math.abs(o.pb);this.yb=u.yb*Math.abs(o.pb)+o.yb*Math.abs(u.pb)+u.yb*o.yb+2220446049250313e-31*Math.abs(s),this.pb=s},v.prototype.lm=function(u){var o=Math.abs(u.pb),s=this.pb/u.pb,n=(this.yb+Math.abs(s)*u.yb)/o;u.yb>.01*o&&(n*=1+(1+(u=u.yb/o))*u),this.pb=s,this.yb=n+2220446049250313e-31*Math.abs(s)},v.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?o=u=NaN:(u=0,o=Math.sqrt(this.yb));this.pb=u,this.yb=o},v.prototype.sin=function(u){var o=Math.sin(u.pb),s=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.yb=(Math.abs(s)+.5*o*u.yb)*u.yb+2220446049250313e-31*o},v.prototype.cos=function(u){var o=Math.sin(u.pb),s=Math.cos(u.pb);this.pb=s,s=Math.abs(s),this.yb=(Math.abs(o)+.5*s*u.yb)*u.yb+2220446049250313e-31*s},v.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},v.prototype.rs=function(){return this.rg()&&this.yb!=0},v}();h.Xb=k}(U||(U={}));var ui=new U.h,Js=new U.h,qn=new U.h,Ks=new U.h,Un=new U.h;(function(h){var k,v;(v=k||(k={}))[v.closedPath=1]="closedPath",v[v.exteriorPath=2]="exteriorPath",v[v.ringAreaValid=4]="ringAreaValid";var u=function(){function o(s,n,l,c,p,f,g){n!==void 0?(this.ib=s,this.ek=n,this.dl=l,this.ki=c,this.za=f,this.cA=g,this.gw=p):(this.ib=s.ib,this.ek=s.ek,this.dl=s.dl,this.ki=s.ki,this.za=s.za,this.cA=s.cA,this.gw=s.gw),this.XG=!0}return o.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},o.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},o.vP=function(s,n,l,c,p,f,g){return new o(s,n,l,c,p,f,g)},o}();h.vY=u,k=function(){function o(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return o.prototype.Uh=function(s){return this.Te!=null?this.Te[s]:null},o.prototype.Zg=function(s,n){if(this.Te==null){if(n==null)return;this.Te=[];for(var l=0,c=this.wb.I();l<c;l++)this.Te.push(null)}this.Te[s]=n},o.prototype.ep=function(s,n){this.nd.T(s,1,n)},o.prototype.cp=function(s,n){this.nd.T(s,2,n)},o.prototype.QB=function(s,n){this.nd.T(s,6,n)},o.prototype.Up=function(s){return this.nd.U(s,6)},o.prototype.gx=function(s,n){this.nd.T(s,7,n)},o.prototype.sv=function(s){return this.nd.U(s,0)},o.prototype.JJ=function(s,n){this.dd.T(s,1,n)},o.prototype.NJ=function(s,n){this.dd.T(s,0,n)},o.prototype.EF=function(s){return this.dd.U(s,7)},o.prototype.ap=function(s,n){this.dd.T(s,3,n)},o.prototype.bp=function(s,n){this.dd.T(s,4,n)},o.prototype.pU=function(s){this.dd==null&&(this.dd=new h.ad(8));var n=this.dd.De();return this.dd.T(n,2,s),this.dd.T(n,5,0),this.dd.T(n,6,0),this.dd.T(n,7,n),n},o.prototype.JQ=function(s){this.dd.kd(s)},o.prototype.rU=function(s){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var n=this.nd.De();return this.nd.T(n,0,n),this.nd.T(n,3,0),this.nd.T(n,6,0),this.gx(n,s),n>=this.Qi.size&&(s=16>n?16:h.P.truncate(3*n/2),this.Qi.resize(s),this.xo.resize(s)),this.Qi.set(n,0),this.xo.set(n,0),n},o.prototype.nF=function(s){this.nd.kd(s)},o.prototype.Qy=function(s){this.ud.kd(s),this.gd--},o.prototype.jI=function(s){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var n=this.ud.De(),l=0<=s?s:n;if(this.ud.T(n,0,l),0>s){if(l>=this.wb.I()){if(s=16>l?16:h.P.truncate(3*l/2),this.wb.resize(s),this.Te!=null)for(var c=0;c<s;c++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(s),this.jt=this.wb.vb(0)}this.wb.Db(l,-1e38,-1e38),this.Te!=null&&(this.Te[l]=null),this.Ug!=null&&this.Ug.write(l,1)}return this.ud.T(n,4,2*l),this.gd++,n},o.prototype.yj=function(s,n,l){var c=n!=-1?this.Na(n):this.tj(s),p=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),g=this.Va(f);return l!=null&&this.wb.It(g,l),this.cj(f,s),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),l=this.ec(s),c=this.Ya(s),n==-1&&this.Yg(s,f),n==c&&this.Kf(s,f),l&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),f},o.prototype.pm=function(){return this.lo==null&&(this.lo=new h.Ta(this.wb.description)),this.lo},o.prototype.$o=function(s,n){this.dd.T(s,2,-134217729&this.dd.U(s,2)||(n==1?134217728:0))},o.prototype.Kn=function(s){return 134217728&this.dd.U(s,2)?1:0},o.prototype.cN=function(s){var n=this.Kg(s.K(),s.description);return s.K()==1736&&this.$o(n,s.Kn()),this.PD(n,s),n},o.prototype.dN=function(s){var n=this.Kg(s.K(),s.description);return this.QD(n,s),n},o.prototype.SV=function(s,n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0)),this.nd.Ee(this.nd.Jg+s),this.ud.Ee(this.ud.Jg+n),this.Qi.Jb(this.Qi.size+s),this.xo.Jb(this.xo.size+s)},o.prototype.PD=function(s,n){this.SV(n.ea(),n.I()),this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0);for(var l=this.Te!=null&&n.Se!=null,c=0,p=n.ea();c<p;c++)if(!(2>n.Ka(c))){var f=this.wf(s,-1);this.mn(f,n.ec(c));for(var g=n.Ca(c),w=n.Wc(c);g<w;g++){var x=this.yj(f,-1,null);if(l)if(x=this.Va(x),(1&n.UF(g))!=0)this.Zg(x,null);else{var T=new h.jg;n.cc(g,T,!0),this.Zg(x,T.get())}}}},o.prototype.QD=function(s,n){this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0),s=this.wf(s,-1);var l=0;for(n=n.I();l<n;l++)this.yj(s,-1,null)},o.prototype.JX=function(s,n,l){var c=this.V(s);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(s),g=0,w=n.ql(l);g<w;g++){var x=this.Va(s),T=this.V(s),E=n.Xp(l,g);g==0&&(E.Vo(p),this.Fh(s,p)),E.K()==322?this.Zg(x,null):this.Zg(x,h.ba.kg(E)),E.Ro(p),g<w-1?s=this.yj(f,T,p):this.Fh(c,p)}},o.prototype.IX=function(s,n,l){var c=this.V(s);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(s),g=0,w=n.ql(l);g<w;g++){var x=this.Va(s),T=this.V(s),E=n.Xp(l,w-g-1);g==0&&(E.Ro(p),this.Fh(s,p)),E.K()==322?this.Zg(x,null):this.Zg(x,h.ba.kg(E)),E.Vo(p),g<w-1?s=this.yj(f,T,p):this.Fh(c,p)}},o.prototype.DF=function(){var s=new h.l;s.Pa();for(var n=this.$q(),l=new h.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,l),c?s.$b(l.x,l.y):s.Nk(l.x,l.y),c=!1;return s},o.prototype.Ib=function(s){var n=s.K();if(h.ba.Ic(n))return this.cN(s);if(n==550)return this.dN(s);throw h.i.Ra()},o.prototype.pN=function(s,n){var l=n.K();if(h.ba.Ic(l))this.PD(s,n);else{if(l!=550)throw h.i.Ra();this.QD(s,n)}},o.prototype.hN=function(s,n){var l=this.Kg(1736,s.description);if(2>s.Ka(n))return l;this.Kl.Gd(s,s.Ca(n),s.Wc(n)),this.jt=this.wb.vb(0);var c=this.wf(l,-1);this.mn(c,s.ec(n)||!0);var p=this.Te!=null&&s.Se!=null,f=s.Ca(n);for(n=s.Wc(n);f<n;f++){var g=this.yj(c,-1,null);if(p)if(g=this.Va(g),(1&s.UF(f))!=0)this.Zg(g,null);else{var w=new h.jg;s.cc(f,w,!0),this.Zg(g,w.get())}}return l},o.prototype.Ke=function(s){var n=this.jc(s),l=h.UK.Kg(n,this.Kl.description),c=this.I(s);if(c==0)return l;if(h.ba.Ic(n)){n=this.ea(s);for(var p=h.Zc.Qh(n+1),f=h.Zc.Or(n+1,0),g=l.description,w=0,x=g.Ba;w<x;w++){for(var T=g.ld(w),E=h.sa.Wa(T),O=h.Zc.TE(T,c),C=this.wb.vb(T),N=0,D=0,z=0,R=this.Ob(s);R!=-1;R=this.Sb(R)){var G=0;this.ec(R)&&(G|=1),this.TS(R)&&(G|=4),G!=0&&f.uJ(D,G);var W=this.Ka(R);if(p.write(D++,z),z+=W,T==0){W=C;var H=O,ee=new h.h;for(G=this.Ya(R);N<z;G=this.V(G),N++){var X=this.Va(G);W.uc(2*X,ee),H.Vt(2*N,ee)}}else for(G=this.Ya(R);N<z;G=this.V(G),N++)for(X=this.Va(G),H=0;H<E;H++)ee=C.gg(X*E+H),O.rr(N*E+H,ee)}l.kn(T,O),p.write(n,c)}l.KJ(f),l.LJ(p),l.Qc(16777215)}else if(n==550){for(g=l.description,l.resize(c),w=0,x=g.Ba;w<x;w++){for(T=g.ld(w),E=h.sa.Wa(T),O=l.vb(T),C=this.wb.vb(T),N=0,R=this.Ob(s),W=this.Ka(R),G=this.Ya(R);N<W;G=this.V(G),N++)for(X=this.Va(G),H=0;H<E;H++)ee=C.gg(X*E+H),O.rr(N*E+H,ee);l.kn(T,O)}l.Qc(16777215)}return l},o.prototype.wB=function(s){for(var n=this.Ob(s);n!=-1;n=this.ar(n));n=this.KR(s);var l=this.ve(s);n!=-1?this.JJ(n,l):this.md=l,l!=-1?this.NJ(l,n):this.sw=n,this.JQ(s)},o.prototype.Kg=function(s,n){return n===void 0?this.VE(s,h.fe.pg()):this.VE(s,n)},o.prototype.VE=function(s,n){return s=this.pU(s),this.wb==null?this.wb=this.Kl=new h.ee(n):this.Kl.Ll(n),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=s:(this.NJ(s,this.sw),this.JJ(this.sw,s)),this.sw=s},o.prototype.ve=function(s){return this.dd.U(s,1)},o.prototype.KR=function(s){return this.dd.U(s,0)},o.prototype.jc=function(s){return 2147483647&this.dd.U(s,2)},o.prototype.CJ=function(s,n,l){n=this.yk[n],(s=this.EF(s))>=n.size&&n.resize(Math.max(h.P.truncate(1.25*s),16),-1),n.write(s,l)},o.prototype.FF=function(s,n){return(s=this.EF(s))<(n=this.yk[n]).size?n.read(s):-1},o.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var s=0;s<this.yk.length;s++)if(this.yk[s]==null)return this.yk[s]=h.Zc.Qh(0),s;return this.yk.push(h.Zc.Qh(0)),this.yk.length-1},o.prototype.sW=function(s){this.yk[s]=null},o.prototype.Ob=function(s){return this.dd.U(s,3)},o.prototype.mv=function(s){return this.dd.U(s,4)},o.prototype.I=function(s){return this.dd.U(s,5)},o.prototype.ea=function(s){return this.dd.U(s,6)},o.prototype.Ip=function(s,n,l){for(var c=0,p=this.md;p!=-1;p=this.ve(p)){var f=this.jc(p);if(h.ba.Ic(f)&&(!l||f==1736)){f=this.jc(p)==1736;for(var g=this.Ob(p);g!=-1;){for(var w=0,x=this.Ya(g);w<h.P.truncate(this.Ka(g)/2);){var T=this.V(x);if(T==-1)break;var E=this.Va(x),O=this.Uh(E);O!=null?E=O.Rb():(O=this.Va(T),E=this.wb.Ar(E,O)),E<=s?(E==0?c==0&&(c=-1):c=1,T!=this.tj(g)&&(this.gC(T,x),this.qd(T,!0))):x=this.V(x),w++}for(w=this.Ya(g),x=this.ec(g)?w:this.tj(g);0<this.Ka(g);){if((T=this.Na(x))==-1){this.qd(x,!0),c==0&&(c=-1);break}var C=this.Va(T);if((O=this.Uh(C))!=null?E=O.Rb():(E=this.Va(x),E=this.wb.Ar(E,C)),E<=s)E==0?c==0&&(c=-1):c=1,this.gC(T,x),this.qd(T,!1),w==T&&(w=this.Ya(g));else if((x=this.Na(x))==w)break}x=this.Ka(g),n&&(f?3>x:2>x)?(g=this.ar(g),c=0<x?1:c==0?-1:c):g=this.Sb(g)}}}return c},o.prototype.gC=function(s,n){var l=this.Va(s),c=this.Va(n);if(this.Ug!=null&&(l=this.Ug.read(l),this.Ug.write(c,l)),this.di!=null){for(c=0,l=this.di.length;c<l;c++)if(this.di[c]!=null){var p=this.Qa(s,c);p!=-1&&this.Sa(n,c,p)}}},o.prototype.Wl=function(s,n,l){var c=0,p=this.V(s);if(p==-1)throw h.i.Ra();for(var f=this.Va(s),g=this.Va(p),w=this.Uh(f),x=w==null?this.wb.Ar(f,g):w.Rb(),T=0;T<l;T++){var E=n[T];if(0<E&&1>E){var O=E;w!=null&&(O=0<x?w.Tx(E)/x:0),this.wb.fD(f,g,O,this.pm());var C=this.yj(this.cd(s),p,this.pm());if(c++,w!=null){var N=w.fl(0,E);O=this.Va(this.Na(C)),this.Zg(O,N),this.mf(C,N.xc()),T!=l-1&&n[T+1]!=1||(E=w.fl(E,1),this.Zg(O,E))}}}return c},o.prototype.HX=function(s,n,l){var c=0,p=this.V(s);if(p==-1)throw h.i.ga("internal error");var f=this.Va(s),g=this.Va(p),w=this.Uh(f),x=w==null?this.wb.Ar(f,g):w.Rb(),T=0;s=this.cd(s);for(var E=0;E<l;E++){var O=n[E];if(T<O&&1>O){var C=O;if(w!=null&&(C=0<x?w.Tx(O)/x:0),this.wb.fD(f,g,C,this.pm()),C=this.tS(s,p,this.pm()),c++,w!=null){T=w.fl(T,O);var N=this.Va(this.Na(C));this.Zg(N,T),this.Db(C,T.qa,T.ma),E!=l-1&&n[E+1]!=1||(T=w.fl(O,1),C=this.Va(C),this.Zg(C,T))}}T=O}return c},o.prototype.tS=function(s,n,l){var c=n!=-1?this.Na(n):this.tj(s),p=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),g=this.Va(f);return l!=null&&this.wb.It(g,l),this.cj(f,s),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),l=this.ec(s),c=this.Ya(s),n==-1&&this.Yg(s,f),n==c&&(l&&c!=-1||this.Kf(s,f)),l&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),f},o.prototype.pE=function(s,n,l){var c=this.Va(n),p=this.Va(l);if(0>c||p>this.gd-1)throw h.i.O("invalid call");if(c>p&&!this.ec(s))throw h.i.O("cannot iterate across an open path");for(s=0;n!=l;n=this.V(n))c=this.Va(n),(p=this.Uh(c))!=null?s+=p.Rb():(p=this.Va(this.V(n)),s+=this.wb.Ar(c,p));return s},o.prototype.Fh=function(s,n){var l=this.Va(s);this.wb.It(l,n),(l=this.Uh(l))!=null&&l.setStart(n),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&l.setEnd(n))},o.prototype.Xi=function(s,n){s=this.Va(s),this.wb.we(s,n)},o.prototype.mf=function(s,n){this.Db(s,n.x,n.y)},o.prototype.Db=function(s,n,l){var c=this.Va(s);this.wb.Db(c,n,l),(c=this.Uh(c))!=null&&c.UB(n,l),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&c.Sl(n,l))},o.prototype.D=function(s,n){this.wb.D(this.ud.U(s,0),n)},o.prototype.Hc=function(s,n){this.wb.Aa[0].uc(2*this.ud.U(s,0),n)},o.prototype.Oa=function(s){var n=new h.h;return this.wb.D(this.ud.U(s,0),n),n},o.prototype.ZF=function(s,n){this.jt.uc(2*s,n)},o.prototype.Vc=function(s,n,l){return this.wb.Vc(s,this.Va(n),l)},o.prototype.setAttribute=function(s,n,l,c){this.wb.setAttribute(s,this.Va(n),l,c)},o.prototype.Va=function(s){return this.ud.U(s,0)},o.prototype.kh=function(){var s=new h.h;return this.D(void 0,s),s.y},o.prototype.hq=function(s,n){s=this.Va(s),n=this.Va(n);var l=this.wb.Aa[0].o;return l[2*s]===l[2*n]&&l[2*s+1]===l[2*n+1]},o.prototype.Fv=function(s,n){s=this.Va(s);var l=this.wb.Aa[0].o;return l[2*s]===n.x&&l[2*s+1]===n.y},o.prototype.rX=function(s,n){if(1>n&&(n=1),this.Ug==null){if(n==1)return;this.Ug=h.Zc.Fn(this.wb.I(),1)}(s=this.Va(s))>=this.Ug.size&&this.Ug.resize(s+1,1),this.Ug.write(s,n)},o.prototype.YF=function(s){return s=this.Va(s),this.Ug==null||s>=this.Ug.size?1:this.Ug.read(s)},o.prototype.Sa=function(s,n,l){n=this.di[n],s=this.Va(s),n.size<this.wb.I()&&n.resize(this.wb.I(),-1),n.write(s,l)},o.prototype.Qa=function(s,n){return(s=this.Va(s))<(n=this.di[n]).size?n.read(s):-1},o.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var s=0;s<this.di.length;s++)if(this.di[s]==null)return this.di[s]=h.Zc.Qh(0,-1),s;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},o.prototype.Ud=function(s){this.di[s]=null},o.prototype.cc=function(s){return this.Te!=null?(s=this.Va(s),this.Te[s]):null},o.prototype.fd=function(s,n){var l=this.ud.U(s,2);if(l==-1)return!1;if(this.aA){var c=new h.Ta;this.Xi(s,c),n.setStart(c),this.Xi(l,c),n.setEnd(c)}else this.wb.Hc(this.ud.U(s,0),ui),n.gm(0,ui),this.wb.Hc(this.ud.U(l,0),ui),n.gm(1,ui);return!0},o.prototype.hW=function(s,n,l){if(this.aA){var c=new h.Ta;this.Xi(s,c),l.setStart(c),this.Xi(n,c),l.setEnd(c)}else this.wb.Hc(s,ui),l.gm(0,ui),this.wb.Hc(n,ui),l.gm(1,ui)},o.prototype.wf=function(s,n){if(n!=-1){if(s!=this.Sf(n))throw h.i.Ra();var l=this.es(n)}else l=this.mv(s);var c=this.rU(s);return n!=-1&&this.ep(n,c),this.cp(c,n),this.ep(c,l),l!=-1?this.cp(l,c):this.ap(s,c),n==-1&&this.bp(s,c),this.Tl(s,this.ea(s)+1),c},o.prototype.iG=function(s,n,l,c){s=this.wf(s,-1);for(var p=0,f=n,g=!1;f==l&&(g=!0),this.cj(f,s),p++,(f=this.V(f))!=n;);return this.mn(s,!0),this.Xj(s,p),g&&(n=l),this.Kf(s,n),this.Yg(s,this.Na(n)),this.fp(s,!1),c!=null&&(c[0]=g),s},o.prototype.ar=function(s){var n=this.es(s),l=this.Sb(s),c=this.Sf(s);return n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.vO(s),this.Tl(c,this.ea(c)-1),this.nF(s),l},o.prototype.vO=function(s){var n=this.Ya(s);if(n!=-1){for(var l=0,c=this.Ka(s);l<c;l++){var p=n;n=this.V(n),this.Qy(p)}n=this.Sf(s),this.Vj(n,this.I(n)-this.Ka(s))}this.Xj(s,0)},o.prototype.Sb=function(s){return this.nd.U(s,2)},o.prototype.es=function(s){return this.nd.U(s,1)},o.prototype.Ka=function(s){return this.nd.U(s,3)},o.prototype.ec=function(s){return(1&this.Up(s))!=0},o.prototype.mn=function(s,n){if(this.ec(s)!=n){if(0<this.Ka(s)){var l=this.Ya(s),c=this.tj(s);n?(this.Cc(c,l),this.Dc(l,c),l=this.Va(c)):(this.Cc(c,-1),this.Dc(l,-1),l=this.Va(c)),this.Zg(l,null)}this.QB(s,(1|this.Up(s))-1|(n?1:0))}},o.prototype.Sf=function(s){return this.nd.U(s,7)},o.prototype.TS=function(s){return(2&this.Up(s))!=0},o.prototype.KB=function(s,n){this.QB(s,(2|this.Up(s))-2|(n?2:0))},o.prototype.qz=function(s){if(this.YS(s))return this.Qi.get(this.sv(s));var n=new h.zb,l=this.Ya(s);if(l==-1)return 0;var c=new h.h;this.D(l,c);for(var p=0,f=0,g=this.Ka(s);f<g;f++,l=this.V(l)){var w=this.cc(l);if(w==null){if(!this.fd(l,n))continue;w=n}p+=w.Sx(c.x,c.y)}return this.fp(s,!0),this.Qi.set(this.sv(s),p),p},o.prototype.ir=function(s,n,l){n=this.Ek[n],s=this.sv(s),n.size<this.Qi.size&&n.resize(this.Qi.size,-1),n.write(s,l)},o.prototype.uj=function(s,n){return(s=this.sv(s))<(n=this.Ek[n]).size?n.read(s):-1},o.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var s=0;s<this.Ek.length;s++)if(this.Ek[s]==null)return this.Ek[s]=h.Zc.Qh(0),s;return this.Ek.push(h.Zc.Qh(0)),this.Ek.length-1},o.prototype.xB=function(s){this.Ek[s]=null},o.prototype.UT=function(s,n,l){if(l==-1)throw h.i.O();if(n!=l){var c=this.Sb(l),p=this.es(l),f=this.Sf(l);p==-1?this.ap(f,c):this.cp(p,c),c==-1?this.bp(f,p):this.ep(c,p),this.Vj(f,this.I(f)-this.Ka(l)),this.Tl(f,this.ea(f)-1),p=n==-1?this.mv(s):this.es(n),this.ep(l,p),this.cp(l,n),n==-1?this.bp(s,l):this.ep(n,l),p==-1?this.ap(s,l):this.cp(p,l),this.Vj(s,this.I(s)+this.Ka(l)),this.Tl(s,this.ea(s)+1),this.gx(l,s)}},o.prototype.kj=function(s,n){this.wb.we(this.Va(n),this.pm()),this.yj(s,-1,this.pm())},o.prototype.qd=function(s,n){var l=this.cd(s),c=this.Na(s),p=this.V(s);c!=-1&&this.Cc(c,p);var f=this.Ka(l);if(s==this.Ya(l)&&this.Kf(l,1<f?p:-1),p!=-1&&this.Dc(p,c),s==this.tj(l)&&this.Yg(l,1<f?c:-1),c!=-1&&p!=-1){c=this.Va(c);var g=this.Va(p);n?(n=this.Uh(c))!=null&&(c=new h.h,this.wb.D(g,c),n.Rc(c)):(g=this.Va(s),n=this.Uh(g),this.Zg(c,n),n!=null&&(c=this.wb.Oa(c),n.Ec(c)))}return this.Xj(l,f-1),l=this.Sf(l),this.Vj(l,this.I(l)-1),this.Qy(s),p},o.prototype.Ya=function(s){return this.nd.U(s,4)},o.prototype.tj=function(s){return this.nd.U(s,5)},o.prototype.V=function(s){return this.ud.U(s,2)},o.prototype.Na=function(s){return this.ud.U(s,1)},o.prototype.cd=function(s){return this.ud.U(s,3)},o.prototype.hc=function(s,n){return this.yj(s,-1,n)},o.prototype.$q=function(s){if(s===void 0)return this.$q(!1);if(s instanceof u)return new u(s);var n,l=-1,c=-1,p=-1,f=0,g=!1;for(n=this.md;n!=-1;n=this.ve(n))if(!s||h.ba.Ic(this.jc(n))){for(l=this.Ob(n);l!=-1;l=this.Sb(l))if(p=c=this.Ya(l),f=0,c!=-1){g=!0;break}if(g)break}return u.vP(this,n,l,c,p,f,s)},o.prototype.Pc=function(s){if(this.Kl.Pc(s),this.Te!=null)for(var n=0,l=this.Te.length;n<l;n++)this.Te[n]!=null&&this.Te[n].Pc(s)},o.prototype.lr=function(s,n,l,c){c?this.JX(s,n,l):this.IX(s,n,l)},o.prototype.Dc=function(s,n){this.ud.T(s,1,n)},o.prototype.Cc=function(s,n){this.ud.T(s,2,n)},o.prototype.cj=function(s,n){this.ud.T(s,3,n)},o.prototype.Xj=function(s,n){this.nd.T(s,3,n)},o.prototype.Kf=function(s,n){this.nd.T(s,4,n)},o.prototype.Yg=function(s,n){this.nd.T(s,5,n)},o.prototype.Tl=function(s,n){this.dd.T(s,6,n)},o.prototype.Vj=function(s,n){this.dd.T(s,5,n)},o.prototype.kJ=function(s){var n=s;do{var l=this.V(n);this.Cc(n,this.Na(n)),this.Dc(n,l),n=l}while(n!=s)},o.prototype.XB=function(s){this.gd=s},o.prototype.br=function(s){var n=this.es(s),l=this.Sb(s),c=this.Sf(s);n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.Kf(s,-1),this.Yg(s,-1),this.nF(s)},o.prototype.oi=function(s,n){var l=this.Na(s),c=this.V(s);if(l!=-1&&this.Cc(l,c),c!=-1&&this.Dc(c,l),l!=-1&&c!=-1)if(l=this.Va(l),c=this.Va(c),n){if((n=this.Uh(l))!=null){var p=new h.h;this.wb.D(c,p),n.Rc(p)}}else n=this.Va(s),n=this.Uh(n),this.Zg(l,n),n!=null&&(p=new h.h,this.wb.D(l,p),n.Ec(p));this.Qy(s)},o.prototype.YS=function(s){return(4&this.Up(s))!=0},o.prototype.fp=function(s,n){this.QB(s,(4|this.Up(s))-4|(n?4:0))},o.prototype.nx=function(s,n){var l=this.ud.o;this.wb.oc();var c=this.wb.Aa[0].o;s.Wd(0,n,function(p,f){var g=l[5*p];p=l[5*f],f=c[2*g],g=c[2*g+1];var w=c[2*p];return g<(p=c[2*p+1])?-1:g>p?1:f<w?-1:f>w?1:0})},o.prototype.eS=function(){for(var s=this.md;s!=-1;s=this.ve(s))if(!h.ba.Ic(this.jc(s)))return!0;return!1},o.prototype.cC=function(s,n){for(var l=this.Ob(s),c=this.Ob(n),p=this.mv(s),f=this.mv(n),g=this.Ob(s);g!=-1;g=this.Sb(g))this.gx(g,n);for(g=this.Ob(n);g!=-1;g=this.Sb(g))this.gx(g,s);this.ap(s,c),this.ap(n,l),this.bp(s,f),this.bp(n,p),l=this.I(s),c=this.ea(s),p=this.ea(n),this.Vj(s,this.I(n)),this.Vj(n,l),this.Tl(s,p),this.Tl(n,c),l=this.dd.U(s,2),this.dd.T(s,2,this.dd.U(n,2)),this.dd.T(n,2,l)},o}(),h.hd=k})(U||(U={})),function(h){var k=function(v){function u(o,s,n,l){var c=v.call(this)||this;return c.aa=new h.l,o===void 0?c.PE():typeof o=="number"?c.QO(o,s,n,l):o instanceof h.Ta?s!==void 0?c.Su(o,s,n):c.RO(o):o instanceof h.sa?s!==void 0?c.TO(o,s):c.SO(o):o instanceof h.l?c.PO(o):c.PE(),c}return yt(u,v),u.prototype.Su=function(o,s,n){this.description=h.fe.pg(),this.aa.Pa(),o.B()||this.vu(o,s,n)},u.prototype.PO=function(o){this.description=h.fe.pg(),this.aa.L(o),this.aa.normalize()},u.prototype.SO=function(o){if(o==null)throw h.i.O();this.description=o,this.aa.Pa()},u.prototype.TO=function(o,s){if(o==null)throw h.i.O();this.description=o,this.aa.L(s),this.aa.normalize()},u.prototype.PE=function(){this.description=h.fe.pg(),this.aa.Pa()},u.prototype.RO=function(o){this.description=h.fe.pg(),this.aa.Pa(),o.B()||this.vu(o)},u.prototype.QO=function(o,s,n,l){this.description=h.fe.pg(),this.L(o,s,n,l)},u.prototype.L=function(o,s,n,l){if(this.wc(),typeof o=="number")this.aa.L(o,s,n,l);else for(this.Pa(),s=0,n=o.length;s<n;s++)this.$b(o[s])},u.prototype.Zo=function(o){if(this.wc(),!o.aT())throw h.i.O();this.aa.L(o)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.ik=function(){return this.aa.ik()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(o){if(o instanceof h.h)this.wc(),this.aa.$b(o);else if(o instanceof h.l)this.wc(),this.aa.$b(o);else if(o instanceof h.Ta){if(this.wc(),!o.Bc()){var s=o.description;if(this.description!=s&&this.Ll(s),this.B())this.vu(o);else{this.aa.$b(o.D());for(var n=1,l=s.Ba;n<l;n++)for(var c=s.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++){var g=o.Vc(c,f),w=this.Vg(c,f);w.$b(g),this.setInterval(c,f,w)}}}}else if(o instanceof u&&!o.B())for((s=o.description)!=this.description&&this.Ll(s),this.aa.$b(o.aa),n=1,l=s.Ba;n<l;n++)for(c=s.ld(n),p=h.sa.Wa(c),f=0;f<p;f++)g=o.Vg(c,f),(w=this.Vg(c,f)).$b(g),this.setInterval(c,f,w)},u.prototype.vu=function(o,s,n){if(s!==void 0){this.aa.L(o.D(),s,n),n=1;for(var l=(s=o.description).Ba;n<l;n++)for(var c=s.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++){var g=o.Vc(c,f);this.setInterval(c,f,g,g)}}else for(this.aa.L(o.la[0],o.la[1]),n=1,l=(s=o.description).Ba;n<l;n++)for(c=s.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++)g=o.Vc(c,f),this.setInterval(c,f,g,g)},u.prototype.setInterval=function(o,s,n,l){if(n=typeof n=="number"?new h.Oc(n,l):n,this.wc(),o==0)if(s==0)this.aa.v=n.pa,this.aa.C=n.wa;else{if(s!=1)throw h.i.de();this.aa.G=n.pa,this.aa.H=n.wa}else this.qD(0,o,s,n.pa),this.qD(1,o,s,n.wa)},u.prototype.X=function(o,s){this.wc(),this.aa.X(o,s)},u.prototype.Pc=function(o){if(o instanceof h.Ed)this.wc(),o.hC(this.aa);else if(this.wc(),!this.aa.B()){var s=new h.JK;this.So(s),s.SS()?s.Pa():o.hC(s)}},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();if(o.wc(),o.description=this.description,o.aa.L(this.aa),o.la=null,this.la!=null){o.qu();for(var s=0;s<2*(this.description.Be.length-2);s++)o.la[s]=this.la[s]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.rF()},u.prototype.Rb=function(){return this.aa.tR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H},u.prototype.So=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H,o.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Vg=function(o,s){var n=new h.Oc;return n.L(this.Pd(0,o,s),this.Pd(1,o,s)),n},u.prototype.If=function(o,s){s.Pf(this.description);var n=this.description.Ba-1;switch(o){case 0:for(o=0;o<n;o++)for(var l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)s.setAttribute(l,p,this.Pd(0,l,p));s.Db(this.aa.v,this.aa.G);break;case 1:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)s.setAttribute(l,p,this.Pd(1,l,p));s.Db(this.aa.v,this.aa.H);break;case 2:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)s.setAttribute(l,p,this.Pd(0,l,p));s.Db(this.aa.C,this.aa.H);break;case 3:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)s.setAttribute(l,p,this.Pd(1,l,p));s.Db(this.aa.C,this.aa.G);break;default:throw h.i.de()}},u.prototype.hB=function(o,s){o=this.aa.hB(o),s.na(o.x,o.y)},u.prototype.fR=function(o,s){return s*(o.Qq-2)},u.prototype.sF=function(o,s,n){if(this.aa.B())throw h.i.ga("empty geometry");if(s==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.sa.Wa(s))throw h.i.O();var l=this.description.Rf(s);return this.qu(),0<=l?this.la[this.fR(this.description,o)+this.description.GR(l)-2+n]:h.sa.te(s)},u.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var o=u.Ig(this.description,0),s=u.Ig(this.description,1),n=0,l=1,c=this.description.Ba;l<c;l++){var p=this.description.ld(l),f=h.sa.Wa(p);p=h.sa.te(p);for(var g=0;g<f;g++)this.la[o+n]=p,this.la[s+n]=p,n++}}},u.prototype.un=function(o){if(this.la!=null)if(2<o.Be.length){for(var s=h.fe.Kw(o,this.description),n=[],l=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),g=0,w=1,x=o.Ba;w<x;w++){var T=o.ld(w),E=h.sa.Wa(T);if(s[w]==-1){var O=h.sa.te(T);for(T=0;T<E;T++)n[p+g]=O,n[f+g]=O,g++}else for(O=this.description.bk(s[w])-2,T=0;T<E;T++)n[p+g]=this.la[l+O],n[f+g]=this.la[c+O],g++,O++}this.la=n}else this.la=null;this.description=o},u.prototype.Pd=function(o,s,n){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.sa.Wa(s))throw h.i.de();var l=this.description.Rf(s);return 0<=l?(this.qu(),this.la[u.Ig(this.description,o)+this.description.bk(l)-2+n]):h.sa.te(s)},u.prototype.qD=function(o,s,n,l){if(this.wc(),s==0)o!=0?n!=0?this.aa.H=l:this.aa.C=l:n!=0?this.aa.G=l:this.aa.v=l;else{if(n>=h.sa.Wa(s))throw h.i.de();if(!this.hasAttribute(s)){if(h.sa.yG(s,l))return;this.se(s)}s=this.description.Rf(s),this.qu(),this.la[u.Ig(this.description,o)+this.description.bk(s)-2+n]=l}},u.Ig=function(o,s){return s*(o.Be.length-2)},u.prototype.Fa=function(o){this.wc();var s=new h.l;return o.A(s),this.aa.Fa(s)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.aa.isIntersecting(o):this.aa.isIntersecting(o.aa)},u.prototype.Lu=function(o,s){this.wc(),o.B()?this.Pa():s!==void 0?this.vu(o,s,void 0):this.aa.Lu(o.Ng(),o.kh())},u.prototype.offset=function(o,s){this.wc(),this.aa.offset(o,s)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(o){if(o===void 0){if(o=new h.Ta(this.description),this.B())return o;for(s=this.description.Ba,n=1;n<s;n++)for(l=this.description.Fd(n),c=h.sa.Wa(l),p=0;p<c;p++)f=.5*(this.Pd(0,l,p)+this.Pd(1,l,p)),o.setAttribute(l,p,f);return o.Db(this.aa.ik(),this.aa.Lp()),o}if(o.Pf(this.description),this.B())o.Pa();else{for(var s=this.description.Ba,n=1;n<s;n++)for(var l=this.description.ld(n),c=h.sa.Wa(l),p=0;p<c;p++){var f=.5*(this.sF(0,l,p)+this.sF(1,l,p));o.setAttribute(l,p,f)}o.Db(this.aa.tf())}},u.prototype.hz=function(){return new h.Ta(this.aa.hz())},u.prototype.contains=function(o){return o instanceof h.Ta?!o.B()&&this.aa.contains(o.Ng(),o.kh()):this.aa.contains(o.aa)},u.prototype.ZO=function(o){return this.aa.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.aa.Nb(o.aa))return!1;for(var s=0,n=2*(this.description.Be.length-2);s<n;s++)if(this.la[s]!=o.la[s])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(o=h.P.Vh(o,this.aa.dc()),!this.B()&&this.la!=null)for(var s=0,n=2*(this.description.Be.length-2);s<n;s++)o=h.P.Vh(o,this.la[s]);return o},u.prototype.gs=function(){return this.aa.v},u.prototype.js=function(){return this.aa.G},u.prototype.fs=function(){return this.aa.C},u.prototype.hs=function(){return this.aa.H},u.prototype.ng=function(){return h.si.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(h.ba);h.Hh=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n){u===void 0?this.Pa():(this.v=u,this.G=o,this.C=s,this.H=n)}return v.construct=function(u,o,s,n){var l=new v;return l.v=u,l.G=o,l.C=s,l.H=n,l},v.prototype.L=function(u,o,s,n){typeof u=="number"?s!==void 0?(this.v=u,this.G=o,this.C=s,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof v?this.L(u.v,u.G,u.C,u.H):u instanceof h.Oc&&(u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa))},v.prototype.bx=function(u,o){if(o!==void 0)if(o==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<o;s++){var n=u[s];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Pa();else for(n=u[0],this.L(n.x,n.y),s=1;s<u.length;s++)o=u[s],this.Nk(o.x,o.y)},v.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.$b=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Od?this.$b(u.x,u.y):u instanceof v&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},v.prototype.Nk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},v.prototype.X=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Pa())},v.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},v.prototype.zoom=function(u,o){this.B()||this.L(this.tf(),u*this.S(),o*this.da())},v.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},v.prototype.CG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},v.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},v.prototype.hB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.de()}},v.prototype.iB=function(u){if(u==null||4>u.length)throw h.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},v.prototype.rF=function(){return this.B()?0:this.S()*this.da()},v.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},v.prototype.ik=function(){return(this.C+this.v)/2},v.prototype.Lp=function(){return(this.H+this.G)/2},v.prototype.S=function(){return this.C-this.v},v.prototype.da=function(){return this.H-this.G},v.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},v.prototype.Lu=function(u,o){if(o!==void 0)this.move(u-this.ik(),o-this.Lp());else if(u instanceof h.h)this.Lu(u.x,u.y);else{if(!(u instanceof h.Ta))throw h.i.O();o=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=u.Ng()-o,this.C=u.Ng()+o,this.G=u.kh()-s,this.H=u.kh()+s}},v.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},v.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},v.prototype.fn=function(u){u.na(this.v,this.G)},v.prototype.VI=function(u){u.na(this.C,this.G)},v.prototype.YI=function(u){u.na(this.v,this.H)},v.prototype.gn=function(u){u.na(this.C,this.H)},v.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},v.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},v.prototype.hz=function(){return h.h.construct(this.v,this.G)},v.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Ta)return this.contains(u.Ng(),u.kh());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof v)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.O()},v.prototype.jm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.jm(u.x,u.y);if(u instanceof v)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.O()},v.prototype.Nb=function(u){return u==this||u instanceof v&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},v.prototype.dc=function(){var u=this.v;u=h.P.truncate(u^u>>>32);var o=h.P.Vh(u);return u=this.C,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.G,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.H,u=h.P.truncate(u^u>>>32),h.P.Vh(u,o)},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},v.prototype.uy=function(u,o){var s=this.ak(u),n=this.ak(o);if(s&n)return 0;if(!(s|n))return 4;var l=(s!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,p=o.y-u.y;if(c>p?s&v.TC?(s&v.lu?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),s=this.ak(u)):n&v.TC?(n&v.lu?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)):s!=0?(s&v.mu?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),s=this.ak(u)):(n&v.mu?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.ak(o)):s&v.UC?(s&v.mu?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),s=this.ak(u)):n&v.UC?(n&v.mu?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.ak(o)):s!=0?(s&v.lu?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),s=this.ak(u)):(n&v.lu?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)),(s&n)!=0)return 0}while(s|n);return l},v.prototype.ak=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},v.prototype.Di=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},v.prototype.ub=function(u){return u instanceof h.h?Math.sqrt(this.dK(u)):Math.sqrt(this.px(u))},v.prototype.px=function(u){var o=0,s=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>s&&(s=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>s&&(s=n),o*o+s*s},v.prototype.dK=function(u){var o=0,s=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>s&&(s=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>s&&(s=n),o*o+s*s},v.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},v.lu=1,v.mu=4,v.TC=3,v.UC=12,v}();h.l=k}(U||(U={})),function(h){var k,v;(v=k||(k={}))[v.initialize=0]="initialize",v[v.initializeRed=1]="initializeRed",v[v.initializeBlue=2]="initializeBlue",v[v.initializeRedBlue=3]="initializeRedBlue",v[v.sweep=4]="sweep",v[v.sweepBruteForce=5]="sweepBruteForce",v[v.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",v[v.sweepRedBlue=7]="sweepRedBlue",v[v.sweepRed=8]="sweepRed",v[v.sweepBlue=9]="sweepBlue",v[v.iterate=10]="iterate",v[v.iterateRed=11]="iterateRed",v[v.iterateBlue=12]="iterateBlue",v[v.iterateBruteForce=13]="iterateBruteForce",v[v.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",v[v.resetRed=15]="resetRed",v[v.resetBlue=16]="resetBlue";var u=function(){function o(s,n){this.ei=s,this.ZG=n}return o.prototype.qr=function(s,n,l){this.ei.FX(l,s,n,this.ZG)},o.prototype.bq=function(s){return this.ei.Tr(s,this.ZG)},o}();k=function(){function o(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return o.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.bd=function(s,n){if(!this.Rv)throw h.i.Hb();var l=new h.l;l.L(n),this.io.add(s),this.Fb.push(l)},o.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},o.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.DD=function(s,n){if(!this.Qv)throw h.i.Hb();var l=new h.l;l.L(n),this.io.add(s),this.Fb.push(l)},o.prototype.dF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},o.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},o.prototype.zD=function(s,n){if(!this.Pv)throw h.i.Hb();var l=new h.l;l.L(n),this.ew.add(s),this.rd.push(l)},o.prototype.cF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},o.prototype.next=function(){if(this.Jc)return!1;for(var s=!0;s;)switch(this.Yb){case 0:s=this.Bz();break;case 1:s=this.mS();break;case 2:s=this.jS();break;case 3:s=this.lS();break;case 4:s=this.QX();break;case 5:s=this.MX();break;case 6:s=this.NX();break;case 7:s=this.OX();break;case 8:s=this.tx();break;case 9:s=this.dC();break;case 10:s=this.Pz();break;case 11:s=this.eT();break;case 12:s=this.bT();break;case 13:s=this.cT();break;case 14:s=this.dT();break;case 15:s=this.fJ();break;case 16:s=this.eJ();break;default:throw h.i.Ra()}return!this.Jc},o.prototype.WB=function(s){this.ra=s},o.prototype.oz=function(s){return this.Fb[s]},o.prototype.Wy=function(s){return this.rd[s]},o.prototype.pl=function(s){return this.io.read(s)},o.prototype.jl=function(s){return this.ew.read(s)},o.Oz=function(s){return(1&s)==1},o.gq=function(s){return(1&s)==0},o.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},o.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var n=this.Fb[s];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},o.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var n=this.Fb[s];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},o.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var s=0;s<this.rd.length;s++){var n=this.rd[s];this.ff.Dr(n.v,n.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},o.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var n=this.Fb[s];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.ff.mr(),s=0;s<this.rd.length;s++)n=this.rd[s],this.ff.Dr(n.v,n.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);for(s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},o.prototype.QX=function(){var s=this.Md.get(--this.qe),n=s>>1;return o.gq(s)?(this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=10,!0)},o.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},o.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},o.prototype.OX=function(){var s=this.Md.get(this.qe-1),n=this.Ff.get(this.Tg-1),l=this.Tr(s,!0),c=this.Tr(n,!1);return l>c?this.tx():l<c?this.dC():o.Oz(s)?this.tx():o.Oz(n)?this.dC():this.tx()},o.prototype.tx=function(){var s=this.Md.get(--this.qe),n=s>>1;if(o.gq(s))return this.Ef!=-1&&this.Kj.get(n)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(n)),this.Kj.set(n,-1)):this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(s=this.Bd.sc(this.Df);s!=-1;){var l=this.Bd.getData(s);this.ff.xj(l),this.Jj.set(l,-1),l=this.Bd.lb(s),this.Bd.kd(this.Df,s),s=l}return 0<this.ff.size()?(this.qw.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(n,this.Bd.addElement(this.Ef,n)),this.Yb=7),!0},o.prototype.dC=function(){var s=this.Ff.get(--this.Tg),n=s>>1;if(o.gq(s))return this.Df!=-1&&this.Jj.get(n)!=-1?(this.Bd.kd(this.Df,this.Jj.get(n)),this.Jj.set(n,-1)):this.ff.remove(n),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(s=this.Bd.sc(this.Ef);s!=-1;){var l=this.Bd.getData(s);this.sd.xj(l),this.Kj.set(l,-1),l=this.Bd.lb(s),this.Bd.kd(this.Ef,s),s=l}return 0<this.sd.size()?(this.qo.zB(this.rd[n].v,this.rd[n].C,this.ra),this.Bf=n,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(n,this.Bd.addElement(this.Df,n)),this.Yb=7),!0},o.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=4,!0},o.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var s=this.Ff.get(this.Tg)>>1;return this.ff.xj(s),this.Yb=7,!0},o.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=7,!0},o.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var s=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},o.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var s=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},o.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},o.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},o.prototype.Mt=function(s,n,l){this.Cm==null&&(this.Cm=new h.Zt),l=new u(this,l),this.Cm.sort(s,0,n,l)},o.prototype.FX=function(s,n,l,c){var p=this;s.Wd(n,l,function(f,g){var w=p.Tr(f,c),x=p.Tr(g,c);return w<x||w==x&&o.gq(f)&&o.Oz(g)?-1:1})},o.prototype.Tr=function(s,n){var l=.5*this.ra;return n?(n=this.Fb[s>>1],o.gq(s)?n.G-l:n.H+l):(n=this.rd[s>>1],o.gq(s)?n.G-l:n.H+l)},o}(),h.sC=k}(U||(U={})),function(h){var k=function(){function v(){}return v.construct=function(u,o,s,n,l,c){var p=new v;return p.v=u,p.G=o,p.Xe=s,p.C=n,p.H=l,p.Dg=c,p},v.prototype.Pa=function(){this.Xe=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.SS=function(){return isNaN(this.Xe)},v.prototype.L=function(u,o,s,n,l,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Xe=s,this.C=n,this.H=l,this.Dg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*s,this.H=this.G+s,this.Xe=u.z-.5*n,this.Dg=this.Xe+n):(this.v=u,this.G=o,this.Xe=s,this.C=u,this.H=o,this.Dg=s)},v.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},v.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},v.prototype.Nk=function(u,o,s){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Xe)==0?this.Xe>s?this.Xe=s:this.Dg<s&&(this.Dg=s):this.Dg=this.Xe=s},v.prototype.$b=function(u,o,s){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Xe=s,this.C=u,this.H=o,this.Dg=s):this.Nk(u,o,s);else if(u instanceof h.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof v))throw h.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},v.prototype.construct=function(u,o,s){u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa,this.Xe=s.pa,this.Dg=s.wa)},v.prototype.iB=function(u){if(u==null||8>u.length)throw h.i.O();u[0]=new h.Od(this.v,this.G,this.Xe),u[1]=new h.Od(this.v,this.H,this.Xe),u[2]=new h.Od(this.C,this.H,this.Xe),u[3]=new h.Od(this.C,this.G,this.Xe),u[4]=new h.Od(this.v,this.G,this.Dg),u[5]=new h.Od(this.v,this.H,this.Dg),u[6]=new h.Od(this.C,this.H,this.Dg),u[7]=new h.Od(this.C,this.G,this.Dg)},v.prototype.bx=function(u){if(u==null||u.length==0)this.Pa();else{var o=u[0];for(this.L(o.x,o.y,o.z),o=1;o<u.length;o++){var s=u[o];this.Nk(s.x,s.y,s.z)}}},v}();h.JK=k}(U||(U={})),function(h){(function(k){k.Ra=function(){var v=Error();return v.message="Internal Error",v},k.Fe=function(){var v=Error();return v.message="Not Implemented",v},k.Zk=function(){var v=Error();return v.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",v},k.Hb=function(){var v=Error();return v.message="Invalid Call",v},k.O=function(v){var u=Error();return u.message="Illegal Argument Exception",v!==void 0&&(u.message+=": "+v),u},k.hu=function(v){var u=Error();return u.message=v!==void 0?"Runtime Exception: "+v:"Runtime Exception.",u},k.ga=function(v){var u=Error();return u.message="Geometry Exception: "+v,u},k.BK=function(){var v=Error();return v.message="Assert Failed Exception",v},k.de=function(){var v=Error();return v.message="IndexOutOfBoundsException",v},k.RC=function(){var v=Error();return v.message="UserCancelException",v}})(h.i||(h.i={}))}(U||(U={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(U||(U={})),function(h){var k=function(){function o(s,n){this.Xa=s,this.AH=n,this.GH=-1,this.ul=!1}return o.prototype.re=function(){},o.prototype.next=function(){if(++this.GH==this.AH.I())return null;var s=this.AH.Oa(this.GH);s.scale(this.Xa.fc);var n=new h.Ea;return this.Xa.ny(s,this.ul,n),n},o.prototype.Ma=function(){return 0},o}(),v=function(){function o(s,n,l){this.Xa=s,this.tw=n,this.Zn=!1,this.fo=l,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.wk=[]}return o.prototype.re=function(){},o.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var s=h.ba.kg(this.sq);return h.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}s=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var n=this.wk.length=0,l=new h.h,c=new h.h,p=[0];this.td.Ia()&&8>this.AA;){var f=this.td.ia();if(l.N(f.bc()),c.N(f.xc()),l.scale(this.Xa.fc),c.scale(this.Xa.fc),h.ej.Ou(l,c)?l.x=c.x:h.ej.Mu(l,c)&&(c.x=l.x),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,l,c,this.Xa.LA,this.Xa.at,p,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(f=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,f,f.length-1)),h.ej.Nu(l,c)?(this.sq.Pa(),this.Xa.ny(l,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(p[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}s==null&&(s=new h.Ea).$k(null,0),this.JD(s),n++}if(this.dw[0]=0,0<n){for(p=this.td.xb();0<n;)this.td.ni(),l.N(this.tw.Oa(this.td.xb())),c.N(this.tw.Oa(this.td.kk())),l.scale(this.Xa.fc),c.scale(this.Xa.fc),this.ul&&(h.ej.Ou(l,c)?l.x=c.x:h.ej.Mu(l,c)&&(c.x=l.x)),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,c,l,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(s),n--;return l.N(this.tw.Oa(this.td.xb())),l.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,l,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.td.Wb(p),this.td.ia(),n=h.ua.mj(null,s,!0),h.Hg.Ok(s,n,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),s=h.ba.kg(this.sq),h.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)},o.prototype.JD=function(s){var n=this.wk[0],l=this.Pj[0]-1.570796326794897,c=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var p=this.fi+1.570796326794897;l=p+3.141592653589793-(this.fi-this.Pj[0])}else l=(p=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var f=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),g=!1;if(Math.abs(l-p)<=.5*this.Xa.co)if(f){var w=s.Oa(s.I()-2);w.scale(this.Xa.fc);var x=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,n.x,n.y,w.x,w.y,x),w=x.u;w<=p;)w+=6.283185307179586;for(;w>p;)w-=6.283185307179586;w<l&&(g=!0)}else g=!0;g?(s.yB(0,s.I()-1),this.ul||((n=new h.h).N(s.Oa(s.I()-1)),n.scale(this.Xa.fc),-3.141592653589793>n.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<n.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),f||(l=.5*(l+p))):(f?((p=new h.h).N(n),p.scale(1/this.Xa.fc),s.xf(0,-1,p)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],p,l,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.AA+=1)}u.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,l,c,this.ul,this.uk,s),this.fi=this.Is[0]},o.prototype.sy=function(s,n){return this.Xa.sy(this.wk,s,this.Pj[0],this.Is[0],this.ul,n)},o.prototype.Ma=function(){return 0},o}(),u=function(){function o(){}return o.buffer=function(s,n,l,c,p,f){if(s==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(s.B())return new h.Ea(s.description);var g=new o;g.Sg=n,g.Kc=h.cb.tc(n);var w=h.cb.xv(g.Kc);if(g.Vb=f,g.Ub=h.cb.gv(g.Kc),g.lc=w*(2-w),g.fc=g.Kc.Id().ci,g.ra=g.Sg.Mn(),g.Cq=g.Kc.Mn(),g.at=g.Cq*g.fc,g.Bq=1.570796326794897/g.fc,g.KY=3.141592653589793/g.fc,g.Ls=6.283185307179586/g.fc,g.LY=g.Ls/6,g.GA=0,g.JY=1.5707963267948966*g.Ub/g.GA,l==4?(g.Ae=2,g.Yv=!0):(g.Ae=l,g.Yv=!1),g.La=c,g.sb=Math.abs(c),isNaN(p)||.001>p?g.tX():g.bo=p,l=s.K(),h.ba.zd(l)?((l=new h.Ua(s.description)).pc(s,!0),s=l,l=1607):l==197&&(l=new h.l,s.A(l),l.S()<=g.ra||l.da()<=g.ra?((l=new h.Ua(s.description)).bd(s,!1),s=l,l=1607):((l=new h.Ea(s.description)).bd(s,!1),s=l,l=1736)),g.uX(),h.ba.Tn(l)||g.vX(),g.sb<=.5*g.bo)return l!=1736?new h.Ea(s.description):g.Yv?s:h.ej.Sr(s,g.Sg,g.Ae,g.LA,-1,f);if(0>g.La&&l!=1736)return new h.Ea(s.description);if(g.Yv&&h.ba.Ic(l)?(n=h.ej.Sr(s,n,4,NaN,g.bo,f),s=h.cb.Bh(n,g.Sg,g.Kc)):s=h.cb.Bh(s,g.Sg,g.Kc),(s=h.Jh.nj(s,g.Kc)).B())return new h.Ea(s.description);switch(!g.Yv&&h.ba.Ic(l)&&(s=h.ej.kI(g.fc,s)),s=o.GX(s,g.Kc),l){case 1736:n=g.PN(s);break;case 1607:n=g.QN(s);break;case 550:n=g.NN(s);break;case 33:n=g.ON(s);break;default:throw h.i.ga("corrupted_geometry")}return(g=h.cb.Bh(n,g.Kc,g.Sg)).Ll(s.description),g},o.prototype.PN=function(s){var n=new h.Ea;s=new v(this,s,n),s=h.Ih.local().W(s,this.Kc,this.Vb).next(),s=h.kp.pj(s,this.Kc,2);var l=new h.Ed;return l.scale(1/this.fc,1/this.fc),n.Pc(l),n=h.kp.pj(n,this.Kc,2),0<=this.La?h.Ih.local().W(n,s,this.Kc,this.Vb):h.mp.local().W(n,s,this.Kc,this.Vb)},o.prototype.QN=function(s){return s=new v(this,s,null),s=h.Ih.local().W(s,this.Kc,this.Vb).next(),h.kp.pj(s,this.Kc,2)},o.prototype.NN=function(s){return s=new k(this,s),s=h.Ih.local().W(s,this.Kc,this.Vb).next(),h.kp.pj(s,this.Kc,2)},o.prototype.ON=function(s){(s=s.D()).scale(this.fc);var n=new h.Ea;return this.ny(s,!1,n),h.kp.pj(n,this.Kc,2)},o.prototype.sy=function(s,n,l,c,p,f){var g=s[0],w=s[s.length-1],x=g.y>w.y?g.y:w.y,T=h.F.q(this.Ub,this.lc,g.y<w.y?g.y:w.y);if(x=h.F.q(this.Ub,this.lc,x),.001<this.GA-(T+n+this.sb)&&.001<this.GA+(x-n-this.sb))return!1;T=(n=l-1.570796326794897)-3.141592653589793,x=n+3.141592653589793;var E=(l=c+1.570796326794897)+3.141592653589793,O=[NaN],C=[NaN],N=[NaN],D=[NaN];if(c=!1,o.ZI(this.Ub,this.lc,this.sb,g,n,T,w,l,O,C),o.ZI(this.Ub,this.lc,this.sb,w,E,l,g,T,N,D),(l<O[0]&&O[0]<E||l<C[0]&&C[0]<E)&&(c=!0),c||(T<N[0]&&N[0]<n||T<D[0]&&D[0]<n)&&(c=!0),!c&&p)return!1;for(var z=[],R=s.length-1;0<=R;R--)z.push(s[R]);return f.Pa(),f.$k(null,0),R=[0],o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,s,n,l,p,R,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,w,l,E,this.co,p,R,f,O[0],C[0]),o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,z,E,x,p,R,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,g,T,n,this.co,p,R,f,N[0],D[0]),s=!1,p||(s=this.DE(this.fc,f)),c||s},o.prototype.ny=function(s,n,l){l.Pa(),l.$k(null,0),o.Jr(this.Ub,this.lc,this.fc,this.sb,s,-this.co,6.283185307179586,this.co,n,[0],l,NaN,NaN),n||this.DE(this.fc,l)},o.prototype.DE=function(s,n){var l=this.qO(s,n);return s=this.rO(s,n),l||s},o.prototype.qO=function(s,n){var l=n.I(),c=!1,p=new h.l;if(n.A(p),!h.s.$(p.H*s,1.570796326794897)&&!h.s.$(p.G*s,-1.570796326794897))return!1;var f=new h.h;for(--l;0<=l;l--)n.D(l,f),(f.y==p.H&&h.s.$(f.y*s,1.570796326794897)||f.y==p.G&&h.s.$(f.y*s,-1.570796326794897))&&(c=!0,this.JI(f,l,n));return c},o.prototype.rO=function(s,n){var l=n.Oa(0),c=n.Oa(n.I()-1);return 3.141592653589793<Math.abs(l.x-c.x)*s?(this.QV(n),!0):this.pO(n)},o.prototype.pO=function(s){return 0>s.He()&&(this.PV(s),!0)},o.prototype.JI=function(s,n,l){var c=l.I(),p=0<n?n-1:c-1;if(c=l.Oa(n<c-1?n+1:0),p=l.Oa(p),!h.s.$(c.y,s.y)&&!h.s.$(c.x,s.x)){var f=new h.h;f.na(c.x,s.y),l.Db(n,f)}h.s.$(p.y,s.y)||h.s.$(p.x,s.x)||((c=new h.h).na(p.x,s.y),l.xf(0,n,c))},o.prototype.QV=function(s){var n=new h.Ea,l=new h.Ea,c=new h.Ed,p=s.Oa(0),f=s.Oa(s.I()-1),g=new h.h;p.x>f.x?(f=this.Bq,c.ig(-this.Ls,0)):(f=-this.Bq,c.ig(this.Ls,0)),n.add(s,!1),s.Pa(),l.add(n,!1),l.Pc(c),p=new h.l,l.A(p),p.X((this.Ls-p.S())/2,0),p.G=-this.Bq,p.H=this.Bq;for(var w=0;w<l.I();w++)l.D(w,g),n.xf(0,-1,g);for(l.Pc(c),w=0;w<l.I();w++)l.D(w,g),n.xf(0,-1,g);l=n.Oa(0),c=n.Oa(n.I()-1),g.na(c.x,f),n.xf(0,-1,g),g.na(.5*(c.x+l.x),f),n.xf(0,-1,g),g.na(l.x,f),n.xf(0,-1,g),n=h.Jh.ms(n,this.Kc,2,!0,p.v),n=h.Jh.ms(n,this.Kc,2,!0,p.C),n=h.Vd.clip(n,p,this.Cq,NaN),s.add(n,!1)},o.prototype.PV=function(s){var n=new h.l;s.A(n),n.X((this.Ls-n.S())/2,0),n.G=-this.Bq,n.H=this.Bq,s.$k(null,0);var l=new h.h;l.na(n.v,n.G),s.xf(1,-1,l),l.na(n.v,n.H),s.xf(1,-1,l),l.na(.5*(n.v+n.C),n.H),s.xf(1,-1,l),l.na(n.C,n.H),s.xf(1,-1,l),l.na(n.C,n.G),s.xf(1,-1,l),l.na(.5*(n.v+n.C),n.G),s.xf(1,-1,l)},o.my=function(s,n,l,c,p,f,g,w,x,T,E){var O=null;x||((O=new h.h).Sc(),0<E.I()&&(O.N(E.Oa(E.I()-1)),O.scale(l)));var C=new h.ha(0),N=new h.ha(0),D=new h.ha(0),z=new h.h,R=new h.h,G=f[f.length-1];l=1/l;for(var W=0;W<f.length;W++){var H=f[W];if(W==0)var ee=g;else W==f.length-1?ee=w:(h.kb.xd(s,n,G.x,G.y,H.x,H.y,null,null,C,p),ee=C.u-1.570796326794897);h.kb.Ai(s,n,H.x,H.y,c,ee,N,D),x?R.na(N.u,D.u):(z.na(N.u,D.u),o.bJ(H.x,z.x,O.x,T),R.na(T[0]+z.x,z.y),O.N(R)),R.scale(l),E.xf(0,-1,R)}},o.Jr=function(s,n,l,c,p,f,g,w,x,T,E,O,C){if(!(g-f<w)){var N=new h.ha(0),D=new h.ha(0),z=new h.h,R=new h.h,G=null;x||((G=new h.h).Sc(),0<E.I()&&(G.N(E.Oa(E.I()-1)),G.scale(l)));var W=h.P.truncate(Math.ceil(f/w)),H=W++*w;for(H==f&&(H=W++*w),l=1/l;H<g+w&&(f<O&&O<H?(H=O,W--):f<C&&C<H&&(H=C,W--),!(H>=g));)h.kb.Ai(s,n,p.x,p.y,c,H,N,D),x?R.na(N.u,D.u):(z.na(N.u,D.u),o.bJ(p.x,z.x,G.x,T),R.na(T[0]+z.x,z.y),G.N(R)),R.scale(l),E.xf(0,-1,R),f=H,H=W++*w}},o.ZI=function(s,n,l,c,p,f,g,w,x,T){var E=new h.h,O=new h.h,C=new h.ha(0),N=new h.ha(0);for(h.kb.Ai(s,n,c.x,c.y,l,p,C,N),E.na(C.u,N.u),h.kb.Ai(s,n,c.x,c.y,l,f,C,N),O.na(C.u,N.u),l=new h.ha(0),h.kb.Sy(s,n,g.x,g.y,E.x,E.y,l),x[0]=l.u,h.kb.Sy(s,n,g.x,g.y,O.x,O.y,l),T[0]=l.u;x[0]<=T[0];)x[0]+=6.283185307179586;for(;x[0]>T[0];)x[0]-=6.283185307179586;for(;x[0]>=w;)x[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;x[0]<w;)x[0]+=6.283185307179586,T[0]+=6.283185307179586},o.bJ=function(s,n,l,c){if(isNaN(l)){for(;3.141592653589793<c[0]+n-s;)c[0]-=6.283185307179586;for(;3.141592653589793<s-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-l?c[0]-=6.283185307179586:3.141592653589793<l-(c[0]+n)&&(c[0]+=6.283185307179586)},o.GX=function(s,n){var l=s.K(),c=h.ba.Ic(l)?s.ea():l==550?s.I():1;if(c==1)return s;var p=new h.ja(0);p.resize(c);for(var f=[],g=new h.l,w=0;w<c;w++){if(p.write(w,w),h.ba.Ic(l)){s.Tj(w,g);var x=g.tf()}else x=s.Oa(w);x=h.SK.WX(n,x),f[w]=x}for(p.Wd(0,p.size,function(T,E){return f[T]<f[E]?-1:f[T]>f[E]?1:0}),n=s.Ja(),w=0;w<c;w++)g=p.read(w),h.ba.Ic(l)?n.addPath(s,g,!0):n.Gd(s,g,g+1);return n},o.prototype.uX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var n=new h.h;n.na(0,10*this.fc);var l=45*this.fc,c=new h.ha(0),p=new h.ha(0),f=new h.ha(0),g=new h.ha(0),w=new h.ha(0),x=new h.ha(0),T=new h.ha(0),E=new h.ha(0),O=new h.h,C=new h.h,N=new h.h,D=new h.h;h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,0,c,p),O.na(c.u,p.u),h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,l,f,g),C.na(f.u,g.u),c=new h.ha(0),p=new h.ha(0);for(var z=new h.ha(0);h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,.5*(0+l),w,x),N.na(w.u,x.u),h.kb.xd(this.Ub,this.lc,O.x,O.y,C.x,C.y,c,p,null,2),h.kb.qj(this.Ub,this.lc,O.x,O.y,.5*c.u,p.u,T,E,2),D.na(T.u,E.u),h.kb.xd(this.Ub,this.lc,N.x,N.y,D.x,D.y,z,null,null,2),!(z.u<=this.bo);)l*=.9,h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,l,f,g),C.na(f.u,g.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},o.prototype.vX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var n=new h.h,l=new h.h;n.na(0,10*this.fc),l.na(10*this.fc,10*this.fc);var c=new h.ha(0),p=new h.ha(0),f=new h.ha(0);h.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,f,c,p,this.Ae);var g=new h.ha(0),w=new h.ha(0),x=new h.ha(0),T=new h.ha(0),E=new h.h,O=new h.ha(0),C=new h.ha(0),N=new h.ha(0),D=new h.ha(0),z=new h.ha(0),R=new h.ha(0),G=new h.ha(0),W=new h.ha(0),H=new h.ha(0),ee=new h.h,X=new h.h,ne=new h.h,ce=new h.h,ue=1;c=c.u,p=p.u+1.570796326794897,f=f.u,h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,c-1.570796326794897,C,N),ee.na(C.u,N.u),h.kb.Ai(this.Ub,this.lc,l.x,l.y,s,p,D,z),X.na(D.u,z.u),C=new h.ha(0),N=new h.ha(0),p=new h.ha(0);for(var Ee=new h.ha(0);h.kb.qj(this.Ub,this.lc,n.x,n.y,.5*(0+ue)*f,c,g,w,this.Ae),E.na(g.u,w.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,E.x,E.y,null,null,O,this.Ae),h.kb.Ai(this.Ub,this.lc,E.x,E.y,s,O.u+1.570796326794897,R,G),ne.na(R.u,G.u),h.kb.xd(this.Ub,this.lc,ee.x,ee.y,X.x,X.y,C,N,null,2),h.kb.qj(this.Ub,this.lc,ee.x,ee.y,.5*C.u,N.u,W,H,2),ce.na(W.u,H.u),h.kb.xd(this.Ub,this.lc,ne.x,ne.y,ce.x,ce.y,p,null,null,2),!(p.u<=this.bo);)ue*=.9,h.kb.qj(this.Ub,this.lc,n.x,n.y,ue*f,c,x,T,this.Ae),l.na(x.u,T.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,null,null,Ee,this.Ae),h.kb.Ai(this.Ub,this.lc,l.x,l.y,s,Ee.u+1.570796326794897,D,z),X.na(D.u,z.u);1e5<(s=ue*f)&&(s=1e5),this.LA=s},o.prototype.tX=function(){var s=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/s&&(s=this.sb/500),.01>s&&(s=.01),this.bo=s},o}();h.QK=u}(U||(U={})),function(h){var k=function(){function v(){}return v.Of=function(u,o){var s=new h.h;s.N(o),u.push(s)},v.wp=function(u,o){u.add(o.x),u.add(o.y)},v.cB=function(u){u.Dh(u.size-2)},v.jB=function(u,o){o.na(u.get(u.size-2),u.get(u.size-1))},v.Sr=function(u,o,s,n,l,c){if(u==null)throw h.i.O();var p=u.K();if(u.B()||h.ba.Tn(p))return u;var f=new v;f.Sg=o,f.Kc=h.cb.tc(o);var g=h.cb.xv(f.Kc);if(f.Vb=c,f.Ub=h.cb.gv(f.Kc),f.lc=g*(2-g),f.fc=f.Kc.Id().ci,f.Cq=f.Kc.Mn(),f.at=f.Cq*f.fc,f.vA=n,f.uA=l,f.Ae=s,p==197?(s=new h.Ea(u.description)).bd(u,!1):h.ba.zd(p)?(s=new h.Ua(u.description)).pc(u,!0):s=u,f.Ae!=4){if((o=f.Sg.Nb(f.Kc)==0?h.cb.Bh(s,f.Sg,f.Kc):h.Jh.nj(s,f.Kc)).B())return o;o=v.kI(f.fc,o),o=f.Uy(o),o=h.kp.pj(o,f.Kc,f.Ae),f=h.cb.Bh(o,f.Kc,f.Sg)}else{if(h.Gg.Tb(o)==2?(u=h.cb.ol(),(o=h.Zj.local().W(s,u,o,c))==u&&(o=new h.Ea,u.copyTo(o))):o=h.Jh.nj(s,f.Kc),o.B())return o;f=f.yX(o)}return f},v.kI=function(u,o){var s=new h.l;if(o.yc(s),3.141592653589793>s.S()*u)return o;var n=!1;s=o.Ha();for(var l=new h.h,c=new h.h;s.ab();)for(;s.Ia();){var p=s.ia();if(l.N(p.bc()),c.N(p.xc()),l.scale(u),c.scale(u),3.141592653589793<Math.abs(l.x-c.x)){var f=v.Nu(l,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(l.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ja();var g=1<o.description.Ba,w=new h.h,x=new h.h,T=new h.h,E=new h.h,O=new h.Ta;for(s.aj();s.ab();)for(var C=NaN,N=[0];s.Ia();){if(p=s.ia(),l.N(p.bc()),c.N(p.xc()),l.scale(u),c.scale(u),isNaN(C)?(v.Yi(l.x,NaN,N),x.N(l)):x.N(T),C=x.x,f=v.Nu(l,c)){if(6.283185307179586<c.x-l.x)for(;6.283185307179586<c.x-l.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-l.x)for(;-6.283185307179586>c.x-l.x;)c.x+=6.283185307179586;v.Yi(c.x,NaN,N),T.N(c)}else w.N(c),v.vU(w),v.Yi(w.x,C,N),T.na(N[0]+w.x,w.y);.5>Math.abs(T.x-c.x)&&T.N(c),g?(p.Vw(0,O),E.N(x),E.scale(1/u),O.Db(E),(f=s.xm())?n.nf(O):n.lineTo(O),s.Sn()&&!o.ec(s.gb)&&(p.Vw(1,O),E.N(T),E.scale(1/u),O.Db(E),n.lineTo(O))):((f=s.xm())&&n.Cz(null,0),p=n.ea()-1,E.N(x),E.scale(1/u),n.xf(p,-1,E),s.Sn()&&!o.ec(s.gb)&&(E.N(T),E.scale(1/u),n.xf(p,-1,E)))}return n},v.oF=function(u,o,s,n,l,c,p,f,g,w,x,T){var E=new h.h,O=new h.h,C=0<n.compare(l);v.aJ(C,n,l,E,O),v.pF(u,o,s,E,O,c,NaN,p,f,g,w,null,x,T),C&&v.aC(g,w,null,x)},v.prototype.Uy=function(u){var o=u.Ja(),s=u.Ha(),n=[],l=null,c=null,p=1<u.description.Ba;p&&(l=new h.ce(0),c=new h.jg);for(var f=[0],g=new h.h,w=new h.h,x=new h.h,T=new h.h;s.ab();)for(f[0]=0;s.Ia();){var E=s.ia();g.N(E.bc()),w.N(E.xc()),g.scale(this.fc),w.scale(this.fc);var O=0<g.compare(w);v.aJ(O,g,w,x,T),n.length=0,l!=null&&l.Dh(0),0<this.vA?v.pF(this.Ub,this.lc,this.Ae,x,T,this.vA,this.uA,this.at,null,null,null,p?l:null,n,f):v.WQ(this.Ub,this.lc,this.Ae,x,T,this.uA,this.at,p?l:null,n,f),O&&v.aC(null,null,p?l:null,n),n[0].N(E.bc()),n[n.length-1].N(E.xc());for(var C=1;C<n.length-1;C++)n[C].scale(1/this.fc);p?(O=v.$I(O,E,c),v.OD(s.xm(),s.Sn()&&!u.ec(s.gb),E,O,l,n,o)):v.ND(s.xm(),s.Sn()&&!u.ec(s.gb),n,o)}return o},v.prototype.yX=function(u){var o=u.Ja(),s=u.Ha(),n=[],l=null,c=new h.jg,p=1<u.description.Ba;for(p&&(l=new h.ce(0));s.ab();)for(;s.Ia();){var f=s.ia(),g=f.bc(),w=f.xc();g=0<g.compare(w),w=v.$I(g,f,c),n.length=0,l!=null&&l.Dh(0),v.xX(this.Ub,this.lc,this.fc,w,this.Sg,this.vA,this.uA,p?l:null,n),g&&v.aC(null,null,p?l:null,n),p?v.OD(s.xm(),s.Sn()&&!u.ec(s.gb),f,w,l,n,o):v.ND(s.xm(),s.Sn()&&!u.ec(s.gb),n,o)}return o},v.ND=function(u,o,s,n){u&&n.Cz(null,0),u=n.ea()-1;var l=s.slice(0);n.lG(u,l,l.length-1),o&&n.xf(u,-1,s[s.length-1])},v.OD=function(u,o,s,n,l,c,p){var f=new h.Ta;if(s.Vo(f),u?p.nf(f):p.lineTo(f),2<c.length){u=n.Rb();for(var g=1;g<c.length-1;g++){var w=n.IG(l.get(g)*u);n.Vw(w,f),f.Db(c[g]),p.lineTo(f)}}o&&(s.Ro(f),p.lineTo(f))},v.pF=function(u,o,s,n,l,c,p,f,g,w,x,T,E,O){var C=new h.ha(0),N=new h.ha(0),D=new h.ha(0);h.kb.xd(u,o,n.x,n.y,l.x,l.y,D,C,N,s),D=D.u;var z=C=C.u;0>z&&(z+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),g!=null&&(g[0]=D),w!=null&&(w[0]=z),x!=null&&(x[0]=N),w=g=NaN,T!=null&&(g=((w=h.F.Ch(u,o))-(x=h.F.q(u,o,n.y)))/D,w=(w+x)/D),x=v.Ou(n,l),N=v.Mu(n,l),z=x||N;var R=v.AE(n,l,f),G=new h.ha(0),W=new h.ha(0),H=new h.h,ee=new h.h,X=new h.h;v.Yi(n.x,NaN,O);var ne=[O[0]];if(D<=c)v.Of(E,n),v.Yi(l.x,NaN,O),T!=null&&T.add(0),z?(x&&v.fB(n,l,T,E),N&&v.dB(n,l,T,E)):R?v.eB(n,l,C,g,w,T,E):0<p&&(ee.na(n.x-ne[0],n.y),H.na(l.x-O[0],l.y),v.Ty(u,o,s,n,D,C,ee,H,0,1,p,T,E,ne)),v.Of(E,l);else{var ce=D/((c=1+h.P.truncate(Math.ceil(D/c)))-1),ue=new h.h,Ee=0;v.Of(E,n),ue.N(n),ee.na(n.x-O[0],n.y),T!=null&&T.add(0);for(var ye=1;ye<c;ye++){if(ye<c-1){h.kb.qj(u,o,n.x,n.y,ye*ce,C,G,W,s),H.na(G.u,W.u),v.Yi(H.x,ue.x,O),X.na(O[0]+H.x,H.y);var Ue=ye/(c-1)}else v.Yi(l.x,NaN,O),H.na(l.x-O[0],l.y),X.N(l),Ue=1;z?(ye==1&&x&&v.fB(n,X,T,E),ye==c-1&&N&&v.dB(ue,l,T,E)):R?v.zE(ue,X,f)&&(n.x<l.x?ue.x>X.x&&(O[0]+=6.283185307179586,X.na(O[0]+H.x,H.y)):ue.x<X.x&&(O[0]-=6.283185307179586,X.na(O[0]+H.x,H.y)),v.eB(ue,X,C,g,w,T,E)):0<p&&v.Ty(u,o,s,n,D,C,ee,H,Ee,Ue,p,T,E,ne),v.Of(E,X),T!=null&&T.add(Ue),ue.N(X),ee.N(H),ne[0]=O[0],Ee=Ue}}},v.WQ=function(u,o,s,n,l,c,p,f,g,w){var x=new h.ha(0),T=new h.ha(0),E=new h.ha(0);h.kb.xd(u,o,n.x,n.y,l.x,l.y,E,x,T,s),T=E.u,x=x.u;var O=E=NaN;if(f!=null){O=h.F.Ch(u,o);var C=h.F.q(u,o,n.y);E=(O-C)/T,O=(O+C)/T}C=v.Ou(n,l);var N=v.Mu(n,l),D=C||N;p=v.AE(n,l,p);var z=v.Nu(n,l);z=D||p||z,v.Yi(n.x,NaN,w);var R=new h.h;v.Of(g,n),R.N(n),f!=null&&f.add(0),z?(D?(C&&v.fB(n,l,f,g),N&&v.dB(n,l,f,g)):p&&v.eB(n,l,x,E,O,f,g),v.Yi(l.x,NaN,w),v.Of(g,l)):T<=c?(v.Yi(l.x,NaN,w),v.Of(g,l)):(E=new h.h,p=new h.h,E.N(n),p.N(l),E.x-=w[0],p.x-=w[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),v.Ty(u,o,s,n,T,x,E,p,0,1,c,f,g,w),v.Of(g,l),v.Yi(l.x,NaN,w)),f!=null&&f.add(1)},v.Ty=function(u,o,s,n,l,c,p,f,g,w,x,T,E,O){var C=new h.h,N=new h.h;C.na(p.x+O[0],p.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var D=new h.ha(0),z=new h.ha(0),R=new h.ha(0),G=new h.h,W=new h.h,H=new h.h,ee=new h.h;G.N(p),W.N(f),p=new h.ce(0),f=new h.ce(0),v.wp(p,W),f.add(w);var X=new h.h,ne=new h.zb,ce=[];for(v.TJ(4,ce);0<p.size;){for(var ue,Ee=!1,ye=NaN,Ue=0;3>Ue;Ue++)if(ue=ce[Ue]*w+(1-ce[Ue])*g,h.kb.qj(u,o,n.x,n.y,ue*l,c,D,z,s),H.na(D.u,z.u),Ue==0&&(ye=ue,ee.N(H)),v.RW(G,H,W,ne),ne.ic(ne.ge(H,!0),X),h.kb.xd(u,o,H.x,H.y,X.x,X.y,R,null,null,2),R.u>x){Ee=!0;break}Ee?(W.N(ee),w=ye,v.wp(p,W),f.add(w)):(v.cB(p),f.Gn(f.size-1,1,f.size-1),0<p.size&&(v.Yi(W.x,C.x,O),N.na(O[0]+W.x,W.y),v.Of(E,N),C.N(N),T!=null&&T.add(w),G.N(W),g=w,v.jB(p,W),w=f.get(f.size-1)))}},v.xX=function(u,o,s,n,l,c,p,f,g){var w=new h.h,x=new h.h,T=new h.h,E=new h.h,O=new h.h,C=new h.h,N=new h.h,D=new h.h,z=new h.h,R=new h.h,G=new h.ha(0),W=new h.ha(0),H=new h.h,ee=[[],[]],X=h.Gg.Tb(l)==1;l=l.Yd(0);var ne=n.bc(),ce=n.xc();X?(C.na(ne.x*s,ne.y*s),N.na(ce.x*s,ce.y*s)):(ee[0][0]=ne.x,ee[0][1]=ne.y,ee[1][0]=ce.x,ee[1][1]=ce.y,h.cb.wt(),C.x=ee[0][0]*s,C.y=ee[0][1]*s,N.x=ee[1][0]*s,N.y=ee[1][1]*s);var ue=0,Ee=0,ye=1,Ue=n.Rn();w.N(ne),x.N(ce),ce=new h.ce(0);var Fe=new h.ce(0),xe=new h.ce(0);v.wp(ce,x),v.wp(Fe,N),xe.add(ye),v.Of(g,w),f!=null&&f.add(Ee);var Rt=[],vi=0<p?Ue?5:3:Ue?5:1;v.TJ(vi,Rt);for(var Dt=new h.ha(0),dt=new h.ha(0),ft=new h.ha(0),it=new h.ha(0),Ut=new h.ha(0),tt=new h.ha(0),Yr=new h.ha(0);0<Fe.size;){var lt=!1,er=NaN;for(h.kb.xd(u,o,C.x,C.y,N.x,N.y,Dt,dt,null,2),ne=0;ne<vi&&!(ne==0&&(!Ue&&0>=p&&Dt.u<=c&&3.141592653589793>Math.abs(C.x-N.x)||n.Tx(Ee,ye)<=l));ne++){var wt=Rt[ne]*ye+(1-Rt[ne])*Ee;if(n.ic(wt,T),X?D.na(T.x*s,T.y*s):(ee[0][0]=T.x,ee[0][1]=T.y,h.cb.wt(),D.x=ee[0][0]*s,D.y=ee[0][1]*s),ne==0&&(er=wt,O.N(T),R.N(D),0<c&&(Dt.u>c||3.141592653589793<=Math.abs(C.x-N.x)))){lt=!0;break}if(Ue&&0<c){if(h.kb.xd(u,o,C.x,C.y,D.x,D.y,ft,null,null,2),ft.u>c||3.141592653589793<=Math.abs(C.x-D.x)){lt=!0;break}}else if(0<p){if(Ue?(E.IS(w,x,Rt[ne]),X?z.na(E.x*s,E.y*s):(ee[0][0]=E.x,ee[0][1]=E.y,h.cb.wt(),z.x=ee[0][0]*s,z.y=ee[0][1]*s)):(E.N(T),z.N(D)),h.kb.xd(u,o,C.x,C.y,z.x,z.y,it,null,null,2),!(it.u<=Dt.u)){lt=!0;break}if(h.kb.qj(u,o,C.x,C.y,it.u,dt.u,G,W,2),H.na(G.u,W.u),h.kb.xd(u,o,H.x,H.y,D.x,D.y,Ut,null,null,2),Ut.u>p){lt=!0;break}if(Ue){if(h.kb.xd(u,o,H.x,H.y,z.x,z.y,tt,null,null,2),tt.u>p){lt=!0;break}if(h.kb.xd(u,o,z.x,z.y,D.x,D.y,Yr,null,null,2),Yr.u>p){lt=!0;break}}}}lt?(x.N(O),N.N(R),ye=er,v.wp(ce,x),v.wp(Fe,N),xe.add(ye)):(v.cB(ce),v.cB(Fe),xe.Gn(xe.size-1,1,xe.size-1),v.Of(g,x),ue+=Dt.u,f!=null&&f.add(ue),0<Fe.size&&(w.N(x),C.N(N),Ee=ye,v.jB(ce,x),v.jB(Fe,N),ye=xe.get(xe.size-1)))}if(f!=null)for(u=1/ue,ne=0;ne<f.size;ne++)f.write(ne,f.read(ne)*u)},v.aC=function(u,o,s,n){n.reverse(),s!=null&&s.pi(0,s.size,1),s=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=s)},v.aJ=function(u,o,s,n,l){u?(n.N(s),l.N(o)):(n.N(o),l.N(s))},v.$I=function(u,o,s){return u?(s.create(o.K()),o.copyTo(s.get()),s.get().reverse(),s.get()):o},v.Yi=function(u,o,s){if(isNaN(o)){for(;3.141592653589793<s[0]-u;)s[0]-=6.283185307179586;for(;3.141592653589793<u-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+u-o?s[0]-=6.283185307179586:3.141592653589793<o-(s[0]+u)&&(s[0]+=6.283185307179586)},v.RW=function(u,o,s,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Ec(u),3.141592653589793<=s.x-u.x?n.Sl(s.x-6.283185307179586,s.y):3.141592653589793<=u.x-s.x?n.Sl(s.x+6.283185307179586,s.y):n.Sl(s.x,s.y)):(n.Ec(s),3.141592653589793<=u.x-s.x?n.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=s.x-u.x?n.Sl(u.x+6.283185307179586,u.y):n.Sl(u.x,u.y))},v.TJ=function(u,o){for(var s=0;s<u;s++){var n=Math.ceil(s/2)/(u+1);s%2!=0&&(n=-n),o[s]=.5+n}},v.Ou=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&!h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&!h.s.$(o.y,-1.570796326794897))},v.Mu=function(u,o){return!!(h.s.$(o.y,1.570796326794897)&&!h.s.$(u.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897)&&!h.s.$(u.y,-1.570796326794897))},v.AE=function(u,o,s){return!(!v.zE(u,o,s)||h.s.$(u.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)||h.s.$(o.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897))},v.zE=function(u,o,s){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=s},v.Nu=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&h.s.$(o.y,-1.570796326794897))},v.fB=function(u,o,s,n){if(0<u.y){var l=new h.h;l.na(o.x,1.570796326794897)}else(l=new h.h).na(o.x,-1.570796326794897);h.s.$(u.x,l.x)||h.s.$(o.y,l.y)||(v.Of(n,l),s!=null&&s.add(0))},v.dB=function(u,o,s,n){if(0<o.y){var l=new h.h;l.na(u.x,1.570796326794897)}else(l=new h.h).na(u.x,-1.570796326794897);h.s.$(o.x,l.x)||h.s.$(u.y,l.y)||(v.Of(n,l),s!=null&&s.add(1))},v.eB=function(u,o,s,n,l,c,p){h.s.Dd(s)?(0<1.570796326794897-u.y&&((s=new h.h).na(u.x,1.570796326794897),v.Of(p,s),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((s=new h.h).na(o.x,1.570796326794897),v.Of(p,s),c!=null&&c.add(n))):(0<1.570796326794897+u.y&&((s=new h.h).na(u.x,-1.570796326794897),v.Of(p,s),c!=null&&c.add(l)),0<1.570796326794897+o.y&&((s=new h.h).na(o.x,-1.570796326794897),v.Of(p,s),c!=null&&c.add(l)))},v.vU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},v}();h.ej=k}(U||(U={})),function(h){h.kp=function(){function k(){}return k.pj=function(v,u,o){if(v==null||u==null||!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var s=v,n=s.K();if(h.ba.Ic(n)){s=h.Jh.nj(v,u),v=new h.l,s.A(v),n=h.ua.Xd(u,v,!1);for(var l=h.cb.ih(u),c=Math.floor((v.v-l.v)/l.S())*l.S()+l.v;c<v.C;)c>v.v+n&&c<v.C-n&&(s=h.Jh.ms(s,u,o,!0,c)),c+=l.S()}else{if(n==197)return(v=new h.Ea(s.description)).bd(s,!1),k.pj(v,u,o);if(h.ba.zd(n))return(v=new h.Ua(s.description)).pc(s,!0),k.pj(v,u,o)}return k.Py(s,u)},k.Py=function(v,u){if(v==null||u==null||!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var o=v.K();return o==197?(o=new h.Ea(v.description)).bd(v,!1):h.ba.zd(o)?(o=new h.Ua(v.description)).pc(v,!0):o=v,(o=h.Jh.nj(o,u)).B()?o:h.Gg.Tb(u)==1?h.Jh.Hn(o,u,0,o!=v,0):k.IQ(o,u,o!=v)},k.IQ=function(v,u,o){if(!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var s=h.cb.bf(u),n=-180*s;return s*=360,h.Gg.Tb(u)==2&&(s=(n=h.cb.ih(u)).C,s-=n=n.v),h.Jh.Jp(v,n,s,u,o,0,!0)},k}()}(U||(U={})),function(h){h.xY=function(){function k(){}return k.R=function(v){return 0>v?-v:v},k.Mb=function(v,u){return 0<=u?k.R(v):-k.R(v)},k.$=function(v,u){return v==u||k.R(v-u)<=k.EC*(1+(k.R(v)+k.R(u))/2)},k.Dd=function(v){return v==0||k.R(v)<=k.EC},k.Ch=function(v,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return v/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*k.zL},k.zL=1.5707963267948966,k.EC=3552713678800501e-30,k}()}(U||(U={})),function(h){var k=function(u){this.Yf=u,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};h.zY=k;var v=function(){function u(o){o===void 0&&(o=null),this.Ej=null,this.Wn=!1,o!==null&&(this.Ej=new k(o))}return u.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},u.prototype.Qf=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Ej=this.Ej,o.Wn=this.Wn},u.prototype.Lz=function(){this.Wn=!this.Wn},u.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},u.prototype.GJ=function(o){if(0>=o)throw h.i.O();if(o!=this.Fc()){if((o=h.qf.geogtran(o))==null)throw h.i.O("Geogtran not found.");this.Ej=new k(o)}},u.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},u.prototype.pX=function(o){if(o==null)throw h.i.O();var s=null;try{s=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.O()}this.Ej=new k(s)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Fc()||this.Fc()!=o.Fc())&&!this.sm().isEqual(o.sm()))&&this.Wn==o.Wn},u.prototype.toString=function(){var o="GeographicTransformation: "+this.wz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,s){var n=new u;return n.GJ(o),s&&n.Lz(),n},u.pP=function(o,s){var n=new u;return n.pX(o),s&&n.Lz(),n},u}();h.Cx=v}(U||(U={})),function(h){var k=function(){function u(){}return u.construct=function(o,s,n,l){var c=new u;return c.jw=o,c.kw=s,c.MY=n,c.NY=l,c},u.zy=function(o,s){return o.jw==s.jw?o.kw==s.kw?0:o.kw<s.kw?-1:1:o.jw<s.jw?-1:1},u}(),v=function(){function u(){this.tT=[],this.uT=[],this.sp()}return u.fz=function(){return u.eK==null&&(u.eK=new u),u.eK},u.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},u.prototype.dD=function(o){try{var s=[];s=s.sort(k.zy);for(var n=0;n<s.length;n++)o.push(s[n])}catch{}},u}();h.yY=v}(U||(U={})),function(h){var k=function(){function v(){}return v.prototype.tD=function(u){this.Hk=u},v.prototype.RM=function(u){this.Gb=u},v.prototype.sD=function(u){this.Bo=u},v.xE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},v.vE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},v.wE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},v}();h.Wk=k}(U||(U={})),function(h){h.ac=function(){function k(){}return k.OT=function(v){var u=new h.Ea;return u.rx(v.gs(),v.js()),u.Aj(v.gs(),v.hs()),u.Aj(v.fs(),v.hs()),u.Aj(v.fs(),v.js()),u},k.Bh=function(v,u){return v===null?null:h.Gx.local().W(v,u,null)},k.fY=function(v,u){var o=h.Ih.local();return v=new h.$c(v),o.W(v,u,null).next()},k.km=function(v,u,o){return h.mp.local().W(v,u,o,null)},k.gp=function(v,u,o){return h.Jx.local().W(v,u,o,null)},k.RX=function(v,u,o){var s=h.Jx.local();for(v=new h.$c(v),u=new h.$c(u),o=s.W(v,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},k.Nb=function(v,u,o){return h.fj.local().W(3,v,u,o,null)},k.OP=function(v,u,o){return h.fj.local().W(4,v,u,o,null)},k.MS=function(v,u,o){var s=h.Zj.local();for(v=new h.$c(v),u=new h.$c(u),o=s.W(v,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},k.LP=function(v,u,o){var s=h.mp.local();for(v=new h.$c(v),u=new h.$c(u),o=s.W(v,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},k.Fa=function(v,u,o){return h.Zj.local().W(v,u,o,null)},k.LS=function(v,u,o){if((v=h.Zj.local().W(v,u,o,null,1))===null)return[];if(v.K()===550){for(u=[],o=0;o<v.xa;o++)u.push(v.FR(o));return u}return v.K()===33?[v]:[]},k.mY=function(v,u,o){return h.fj.local().W(2,v,u,o,null)},k.contains=function(v,u,o){return h.fj.local().W(1,v,u,o,null)},k.wP=function(v,u,o){return h.fj.local().W(16,v,u,o,null)},k.touches=function(v,u,o){return h.fj.local().W(8,v,u,o,null)},k.yU=function(v,u,o){return h.fj.local().W(32,v,u,o,null)},k.OS=function(v,u,o){return h.fj.local().W(1073741824,v,u,o,null)},k.tB=function(v,u,o,s){return h.uL.local().W(v,u,o,s,null)},k.ub=function(v,u,o,s){var n=null;if(o!=null){if(n=o.Id(),s!=null&&n.Fc()!=s.Fc()&&n.pd!=s.pd)throw h.i.Zk()}else if(s!=null)throw h.i.O();return v=h.lL.local().W(v,u,null),n!==null&&s!==null&&(v=h.Uc.Ph(v,n,s)),v},k.clip=function(v,u,o){return h.fL.local().W(v,h.l.construct(u.gs(),u.js(),u.fs(),u.hs()),o,null)},k.fl=function(v,u,o){if(v==null||u==null)return null;for(v=h.hL.local().W(!0,v,u,o,null),u=[];(o=v.next())!=null;)o.B()||u.push(o);return u.slice(0)},k.HN=function(v,u,o,s,n,l,c,p){if(n===!0)return k.IN(v,u,o,s,l,c,p);if(n=o,u!=null){if(c=u.Id(),s!=null&&c.Fc()!=s.Fc()){if(c.pd!=s.pd)throw h.i.Zk();n=[],h.Uc.SE(o,o.length,s,c,n)}}else if(s!=null)throw h.i.O();if(o=h.vC.local(),l){for(v=new h.$c(v),u=o.W(v,u,n,l,null),v=[];(l=u.next())!=null;)v.push(l);l=v.slice(0)}else for(l=[],s=0;s<v.length;s++)l[s]=o.W(v[s],u,n[s],null);return l},k.IN=function(v,u,o,s,n,l,c){if(u===null||(s==null&&(s=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),s.pd!==0))throw h.i.O();if(h.Uc.SE(o,o.length,s,h.Uc.ah(9001),o),s=h.AC.local(),n){for(v=new h.$c(v),u=s.W(v,u,l,o,c,!1,n,null),o=[];(l=u.next())!=null;)o.push(l);n=o.slice(0)}else{n=[];for(var p=0;p<v.length;p++)n[p]=s.W(v[p],u,l,o[p],c,!1,null)}return n},k.buffer=function(v,u,o,s,n,l,c){var p=o;if(n===!1){if(u!=null){if(n=u.Id(),s!=null&&n.Fc()!=s.Fc()){if(n.pd!=s.pd)throw h.i.Zk();p=h.Uc.Ph(o,s,n)}}else if(s!=null)throw h.i.O();v=h.vC.local().W(v,u,p,null)}else{if(u===null||(s==null&&(s=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),s.pd!==0))throw h.i.O();p=h.Uc.Ph(o,s,h.Uc.ah(9001)),v=h.AC.local().W(v,u,l,p,c,!1,null)}return v},k.wU=function(v,u,o,s,n,l,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.pd!=c.pd)throw h.i.Zk();o=h.Uc.Ph(o,c,p)}}else if(c!=null)throw h.i.O();for(v=new h.$c(v),u=h.DC.local().W(v,u,o,s,n,l,null),o=[];(s=u.next())!=null;)o.push(s);return o.slice(0)},k.offset=function(v,u,o,s,n,l,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.pd!=c.pd)throw h.i.Zk();o=h.Uc.Ph(o,c,p)}}else if(c!=null)throw h.i.O();return h.DC.local().W(v,u,o,s,n,l,null)},k.dP=function(v){return h.xC.local().W(v,null)},k.eP=function(v,u){var o=h.xC.local();for(v=new h.$c(v),u=o.W(v,u,null),o=[];(v=u.next())!=null;)o.push(v);return o},k.iz=function(v,u,o){return h.Hx.local().iz(v,u,o)},k.jz=function(v,u){return h.Hx.local().jz(v,u)},k.kz=function(v,u,o,s){return h.Hx.local().kz(v,u,o,s)},k.$B=function(v,u){return h.$l.local().W(v,u,!1,null)},k.ZS=function(v,u){return h.$l.local().ts(v,u,null)},k.LQ=function(v,u,o,s,n){var l=h.zC.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.pd!=n.pd)throw h.i.Zk();o=h.Uc.Ph(o,n,u)}}else if(n!=null)throw h.i.O();return l.W(v,o,s,null)},k.Sr=function(v,u,o,s){var n=h.Zl.local();if(u!=null){if(u=u.Id(),s!=null&&u.Fc()!=s.Fc()){if(u.pd!=s.pd)throw h.i.Zk();o=h.Uc.Ph(o,s,u)}}else if(s!=null)throw h.i.O();return n.W(v,o,null)},k.Ry=function(v,u,o,s,n){n===void 0&&(n=0);var l=h.nL.local();if(n==4||n!==0)throw h.i.Fe();if(s!==null){if(s.pd!==0)throw h.i.O("Unit must be a linear unit type");o=h.Uc.Ph(o,s,h.Uc.ah(9001))}return l.W(v,o,u,n,null)},k.RQ=function(v,u,o,s){if(v===null)return 0;if(s==4||s!==0)throw h.i.Fe();if(v.K()==197)v=k.OT(v);else if(v.K()!=1736)return 0;if(s=h.cb.tc(u),v=h.cb.Bh(v,u,s),v=h.PK.SQ([v])[0],o!==null){if(o.pd!==2)throw h.i.O("Unit must be a area unit type");v=h.Uc.Ph(v,h.Uc.ah(109404),o)}return v},k.UQ=function(v,u,o,s){if(v=h.qL.local().W(v,u,s,null),o!==null){if(o.pd!==0)throw h.i.O("Unit must be a linear unit type");v=h.Uc.Ph(v,h.Uc.ah(9001),o)}return v},k.EU=function(v,u,o){if(v===null)return 0;var s=null;if(u!=null){if((s=u.Id()).pd==0&&(s=h.Uc.WF(s))==null&&o!==null)throw h.i.O();if(o!=null&&s.Fc()!=o.Fc()&&s.pd!=o.pd)throw h.i.Zk()}else if(o!=null)throw h.i.O();return v.K()==1736||v.K()==197?(v=v.He(),o!==null?h.Uc.Ph(v,s,o):v):0},k.FU=function(v,u,o){if(v===null||v.B()||1>v.Eb())return 0;var s=null;if(u!=null){if(s=u.Id(),o!=null&&s.Fc()!=o.Fc()&&s.pd!=o.pd)throw h.i.Zk()}else if(o!=null)throw h.i.O();v.K()==1736||v.K()==197?u=v.ng():h.ba.zd(v.K())?(u=new h.Ua(v.description)).pc(v,!0):u=v,v=0,u=u.Ha();for(var n=new h.h,l=new h.h;u.ab();)for(;u.Ia();){var c=u.ia();c.$p(n),c.Vr(l),v+=h.h.ub(n,l)}return s!==null&&o!==null&&(v=h.Uc.Ph(v,s,o)),v},k.aP=function(v){return v.points!==void 0?k.hS(v,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM):v.rings!==void 0?k.gG(v.rings,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"P"):v.paths!==void 0?k.gG(v.paths,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"L"):v.x!==void 0?k.iS(v):v.xmin!==void 0?k.gS(v):null},k.iS=function(v){if(v.x==null||v.x=="NaN")return new h.Ta;var u=new h.Ta(v.x,v.y);return v.z!==void 0&&v.z!==null&&u.sX(v.z),v.m!==void 0&&v.m!==null&&u.cX(v.m),u},k.gS=function(v){if(v.xmin==null||v.xmin=="NaN")return new h.Hh;var u=new h.Hh(v.xmin,v.ymin,v.xmax,v.ymax);return v.zmin!==void 0&&v.zmin!==null&&u.setInterval(1,0,v.zmin,v.zmax),v.mmin!==void 0&&v.mmin!==null&&u.setInterval(2,0,v.mmin,v.mmax),u},k.hS=function(v,u,o){var s=0,n=new h.ee,l=3*v.points.length;l%2!=0&&l++,2>l&&(l=2);var c=h.P.truncate(3*v.points.length/2);4>c?c=4:16>c&&(c=16),l=h.Zc.Fn(l,0);var p=h.Zc.Fn(c);c=h.Zc.Fn(c);for(var f=0;f<v.points.length;f++)l.write(2*f,v.points[f][0]),l.write(2*f+1,v.points[f][1]),p.write(f,u||o?v.points[f][2]:NaN),c.write(f,o&&u?v.points[f][3]:NaN),s++;return s!=0&&(n.resize(s),n.kn(0,l)),u&&(n.se(1),n.kn(1,p)),o&&(n.se(2),n.kn(2,u==0?p:c)),n.Qc(16777215),n},k.gG=function(v,u,o,s){var n=0,l=2;if(s=="P"){var c=new h.Ea;n=1,l=3}else c=new h.Ua;for(var p=h.Zc.Qh(0),f=h.Zc.Or(0),g=0,w=0,x=[],T=[],E=0;E<v.length;E++){var O=v[E].length;if(x[E]=!1,s==="P"&&v[E][0][0]===v[E][v[E].length-1][0]&&v[E][0][1]===v[E][v[E].length-1][1]){var C=o==0||v[E][0][3]===v[E][v[E].length-1][3]||v[E][0][3]===void 0&&v[E][v[E].length-1][3]===void 0;(u==0||v[E][0][2]===v[E][v[E].length-1][2]||v[E][0][2]===void 0&&v[E][v[E].length-1][2]===void 0)&&C&&(x[E]=!0,--O)}O>=l?(T[E]=!1,w+=1,p.add(g),f.add(n),g+=O):T[E]=!0}for((s=3*g)%2!=0&&s++,2>s&&(s=2),4>(E=h.P.truncate(3*g/2))?E=4:16>E&&(E=16),s=h.Zc.Fn(s,0),n=h.Zc.Fn(E),l=h.Zc.Fn(E),E=O=0;E<v.length;E++)if(T[E]===!1)for(C=0;C<v[E].length;C++){var N=!1;C===v[E].length-1&&x[E]===!0&&(N=!0),N||(s.write(2*O,v[E][C][0]),s.write(2*O+1,v[E][C][1]),n.write(O,u||o?v[E][C][2]:NaN),l.write(O,o&&u?v[E][C][3]:NaN),O++)}return g!=0&&(v=c,p.resize(w),f.resize(w),0<g&&(p.add(g),f.add(0)),v.kn(0,s),v.KJ(f),v.LJ(p)),u&&(c.se(1),c.kn(1,n)),o&&(c.se(2),c.kn(2,u==0?n:l)),c.Qc(16777215),c},k}()}(U||(U={})),function(h){h.Dx=function(){function k(){}return k.dr=function(v){var u,o=0,s=v.length,n=v[0];for(u=0;u<s-1;u++){var l=v[u+1];o+=(l[0]-n[0])*(l[1]+n[1]),n=l}return 0<=o},k.rotate=function(v,u,o){u=u*Math.PI/180;var s=Math.cos(u),n=Math.sin(u);if(v.paths!==void 0){u={paths:[]};for(var l=0;l<v.paths.length;l++){for(var c=v.paths[l],p=[],f=0;f<c.length;f++){var g=c[f].slice(0);p.push(g);var w=s*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+s*(c[f][1]-o.y)+o.y;g[0]=w,g[1]=x}u.paths.push(p),v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM)}return u}if(v.rings!==void 0){for(u={rings:[]},l=0;l<v.rings.length;l++){c=v.rings[l],p=[];var T=k.dr(c);for(f=0;f<c.length;f++)g=c[f].slice(0),p.push(g),w=s*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+s*(c[f][1]-o.y)+o.y,g[0]=w,g[1]=x;k.dr(p)!==T&&p.reverse(),u.rings.push(p),v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM)}return u}if(v.x!==void 0)return u={x:s*(v.x-o.x)-n*(v.y-o.y)+o.x,y:n*(v.x-o.x)+s*(v.y-o.y)+o.y},v.z!==void 0&&(u.z=v.z),v.m!==void 0&&(u.m=v.m),v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM),u;if(v.points!==void 0){for(u={points:[]},l=v.points,f=0;f<l.length;f++)(c=l[f].slice(0))[0]=s*(l[f][0]-o.x)-n*(l[f][1]-o.y)+o.x,c[1]=n*(l[f][0]-o.x)+s*(l[f][1]-o.y)+o.y,u.points.push(c);return v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM),u}return null},k.EQ=function(v,u){if(v.paths!==void 0){for(var o={paths:[]},s=0;s<v.paths.length;s++){for(var n=v.paths[s],l=[],c=0;c<n.length;c++){var p=n[c].slice(0);l.push(p);var f=u.x-n[c][0];p[0]=n[c][0]+2*f}o.paths.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.rings!==void 0){for(o={rings:[]},s=0;s<v.rings.length;s++){n=v.rings[s];var g=k.dr(n);for(l=[],c=0;c<n.length;c++)p=n[c].slice(0),l.push(p),f=u.x-n[c][0],p[0]=n[c][0]+2*f;k.dr(l)!==g&&l.reverse(),o.rings.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.x!==void 0)return f=u.x-v.x,o={x:v.x+2*f,y:v.y},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o;if(v.points!==void 0){for(o={points:[]},s=v.points,c=0;c<s.length;c++)n=s[c].slice(0),f=u.x-n[0],n[0]+=2*f,o.points.push(n);return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=u.x-v.xmin,o.xmax=v.xmin+2*f,f=u.x-v.xmax,o.xmin=v.xmax+2*f,v.zmin!==void 0&&(o.zmin=v.zmin),v.zmax!==void 0&&(o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin),v.mmax!==void 0&&(o.mmax=v.mmax),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o):null},k.FQ=function(v,u){if(v.paths!==void 0){for(var o={paths:[]},s=0;s<v.paths.length;s++){for(var n=v.paths[s],l=[],c=0;c<n.length;c++){var p=n[c].slice(0);l.push(p);var f=u.y-n[c][1];p[1]=n[c][1]+2*f}o.paths.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.rings!==void 0){for(o={rings:[]},s=0;s<v.rings.length;s++){n=v.rings[s];var g=k.dr(n);for(l=[],c=0;c<n.length;c++)p=n[c].slice(0),l.push(p),f=u.y-n[c][1],p[1]=n[c][1]+2*f;k.dr(l)!==g&&l.reverse(),o.rings.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.x!==void 0)return f=u.y-v.y,o={y:v.y+2*f,x:v.x},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o;if(v.points!==void 0){for(o={points:[]},s=v.points,c=0;c<s.length;c++)n=s[c].slice(0),f=u.y-n[1],n[1]+=2*f,o.points.push(n);return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=u.y-v.ymin,o.ymax=v.ymin+2*f,f=u.y-v.ymax,o.ymin=v.ymax+2*f,v.zmin!==void 0&&(o.zmin=v.zmin),v.zmax!==void 0&&(o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin),v.mmax!==void 0&&(o.mmax=v.mmax),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o):null},k}()}(U||(U={})),function(h){h.UK=function(){function k(){}return k.Kg=function(v,u){switch(u==null&&(u=h.fe.pg()),v){case 33:return new h.Ta(u);case 322:return new h.zb(u);case 197:return new h.Hh(u);case 550:return new h.ee(u);case 1607:return new h.Ua(u);case 1736:return new h.Ea(u);default:throw h.i.ga("invalid argument.")}},k}()}(U||(U={})),function(h){var k=function(){function v(u,o){this.Qe=h.ja.rf(u,-1),this.va=new h.cu,this.yl=o}return v.prototype.vW=function(u){this.va.Bt(Math.min(this.Qe.size,u)),this.va.hn(u)},v.prototype.addElement=function(u,o){if(o===void 0)return this.$M(u);o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);return s==-1&&(s=this.va.Rh(),this.Qe.set(o,s)),this.va.addElement(s,u)},v.prototype.$M=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);return s==-1&&(s=this.va.Rh(),this.Qe.set(o,s)),this.va.addElement(s,u)},v.prototype.kd=function(u,o){if(o===void 0)this.FP(u);else{o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);if(s==-1)throw h.i.O();for(var n=this.va.sc(s),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(s,l,n),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(o,-1))):l=n,n=c}}},v.prototype.FP=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);if(s==-1)throw h.i.O();for(var n=this.va.sc(s),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(s,l,n),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(o,-1))):l=n,n=c}},v.prototype.lR=function(u){return u=h.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},v.prototype.zR=function(u){return this.va.lb(u)},v.prototype.wd=function(u){var o=this.yl.ez(this.ka(u));o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);if(s==-1)throw h.i.O();for(var n=this.va.sc(s),l=-1;n!=-1;){if(n==u)return this.va.kd(s,l,n),void(this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(o,-1)));l=n,n=this.va.lb(n)}throw h.i.O()},v.prototype.ka=function(u){return this.va.ka(u)},v.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},v.prototype.size=function(){return this.va.OF()},v}();h.ZK=k}(U||(U={})),function(h){var k=function(){function v(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.mT=!1,this.ke=-1}return v.prototype.hl=function(u){this.Ni.kd(u)},v.prototype.Rw=function(){return this.Ni.De()},v.prototype.dv=function(u){this.va.kd(u)},v.prototype.VA=function(){return this.va.De()},v.prototype.RB=function(u,o){this.Ni.T(u,1,o)},v.prototype.fx=function(u,o){this.Ni.T(u,2,o)},v.prototype.bX=function(u,o){this.Ni.T(u,3,o)},v.prototype.PB=function(u,o){this.va.T(u,4,o)},v.prototype.eX=function(u,o){this.va.T(u,3,o)},v.prototype.OJ=function(u,o){this.va.T(u,2,o)},v.prototype.Rh=function(u){var o=this.VA();return this.va.T(o,3,this.ke),this.va.T(o,4,0),this.va.T(o,5,u),this.ke!=-1&&this.OJ(this.ke,o),this.ke=o},v.prototype.eh=function(u){this.GE(u);var o=this.va.U(u,2),s=this.va.U(u,3);return o!=-1?this.eX(o,s):this.ke=s,s!=-1&&this.OJ(s,o),this.dv(u),s},v.prototype.Bt=function(u){this.va.Ee(u)},v.prototype.KF=function(u){return this.va.U(u,5)},v.prototype.aX=function(u,o){this.va.T(u,5,o)},v.prototype.addElement=function(u,o){return this.oS(u,o)},v.prototype.oS=function(u,o){var s=this.Rw();this.fx(s,-1),this.va.U(u,0)==-1&&this.va.T(u,0,s);var n=this.va.U(u,1);return this.RB(s,n),n!=-1&&this.fx(n,s),this.va.T(u,1,s),this.setData(s,o),this.PB(u,this.ds(u)+1),this.mT&&this.bX(s,u),s},v.prototype.kd=function(u,o){var s=this.xe(o),n=this.lb(o);return s!=-1?this.fx(s,n):this.va.T(u,0,n),n!=-1?this.RB(n,s):this.va.T(u,1,s),this.hl(o),this.PB(u,this.ds(u)-1),n},v.prototype.hn=function(u){this.Ni.Ee(u)},v.prototype.getData=function(u){return this.Ni.U(u,0)},v.prototype.setData=function(u,o){this.Ni.T(u,0,o)},v.prototype.lb=function(u){return this.Ni.U(u,2)},v.prototype.xe=function(u){return this.Ni.U(u,1)},v.prototype.sc=function(u){return this.va.U(u,0)},v.prototype.Gc=function(u){return this.va.U(u,1)},v.prototype.clear=function(){for(var u=this.ke;u!=-1;)u=this.eh(u)},v.prototype.GE=function(u){for(var o=this.Gc(u);o!=-1;){var s=o;o=this.xe(s),this.hl(s)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.PB(u,0)},v.prototype.B=function(){return this.Ni.size==0},v.prototype.OF=function(){return this.Ni.size},v.prototype.ds=function(u){return this.va.U(u,4)},v.prototype.lz=function(u){return this.va.U(u,3)},v}();h.lp=k}(U||(U={})),function(h){var k=function(){function v(u){u===void 0?(this.vg=new h.ad(2),this.va=new h.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new h.ad(2),this.va=new h.ad(u?4:2),this.ke=-1,this.Sv=u)}return v.prototype.hl=function(u){this.vg.kd(u)},v.prototype.Rw=function(){return this.vg.De()},v.prototype.dv=function(u){this.va.kd(u)},v.prototype.VA=function(){return this.va.De()},v.prototype.Rh=function(){var u=this.VA();return this.Sv&&(this.va.T(u,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,u),this.ke=u),u},v.prototype.eh=function(u){for(var o=this.sc(u);o!=-1;){var s=o;o=this.lb(o),this.hl(s)}this.Sv&&(o=this.va.U(u,2),s=this.va.U(u,3),o!=-1?this.va.T(o,3,s):this.ke=s,s!=-1&&this.va.T(s,2,o)),this.dv(u)},v.prototype.Bt=function(u){this.va.Ee(u)},v.prototype.addElement=function(u,o){var s=this.va.U(u,1),n=this.Rw();return s!=-1?this.vg.T(s,1,n):this.va.T(u,0,n),this.va.T(u,1,n),this.vg.T(n,0,o),n},v.prototype.hn=function(u){this.vg.Ee(u)},v.prototype.kd=function(u,o,s){o!=-1?(this.vg.T(o,1,this.vg.U(s,1)),this.va.U(u,1)==s&&this.va.T(u,1,o)):(this.va.T(u,0,this.vg.U(s,1)),this.va.U(u,1)==s&&this.va.T(u,1,-1)),this.hl(s)},v.prototype.Cy=function(u,o){var s=this.va.U(u,1),n=this.va.U(o,0);n!=-1&&(s!=-1?this.vg.T(s,1,n):this.va.T(u,0,n),this.va.T(u,1,this.va.U(o,1))),this.Sv&&(u=this.va.U(o,2),s=this.va.U(o,3),u!=-1?this.va.T(u,3,s):this.ke=s,s!=-1&&this.va.T(s,2,u)),this.dv(o)},v.prototype.ka=function(u){return this.vg.U(u,0)},v.prototype.Uj=function(u,o){this.vg.T(u,0,o)},v.prototype.lb=function(u){return this.vg.U(u,1)},v.prototype.sc=function(u){return this.va.U(u,0)},v.prototype.Ln=function(u){return this.ka(this.sc(u))},v.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},v.prototype.B=function(){return this.vg.size==0},v.prototype.OF=function(){return this.vg.size},v.prototype.lz=function(u){return this.va.U(u,3)},v}();h.cu=k}(U||(U={})),function(h){h.ua=function(){function k(){}return k.Xd=function(v,u,o){return u=u.zr(),v=v!=null&&v.Yd!==void 0?v.Yd(0):0,o&&(u*=4,v*=1.1),Math.max(v,u)},k.Gr=function(v){return 2*Math.sqrt(2)*v},k.mN=function(v){return Math.sqrt(2)*v},k.mj=function(v,u,o){var s=new h.l;return u.A(s),k.Xd(v,s,o)},k.rE=function(v,u,o){return u=u.Vg(1,0).zr(),v=v!=null?v.Yd(1):0,o&&(u*=4,v*=1.1),Math.max(v,u)},k.ov=function(v,u){var o=new h.l;return v.yc(o),v=new h.l,u.yc(v),o.$b(v),o},k.TN=function(v){var u=new h.l;if(v.yc(u),u.B())return null;var o=new h.fu(u,8),s=-1,n=new h.l,l=!1;do for(var c=0,p=v.ea();c<p;c++){if(v.Tj(c,n),(s=o.Ez(c,n,s))==-1){if(l)throw h.i.ga("internal error");v.Ap(u,!1),l=!0,o.reset(u,8);break}l=!1}while(l);return o},k.iE=function(v){var u=new h.l;v.yc(u);for(var o=new h.fu(u,8),s=-1,n=v.Ha(),l=new h.l,c=!1;n.ab();)for(;n.Ia();){var p=n.ia(),f=n.xb();if(p.A(l),(s=o.Ez(f,l,s))==-1){if(c)throw h.i.Ra();v.Ap(u,!1),c=!0,o.reset(u,8),n.aj();break}}return o},k.lj=function(v,u){var o=new h.l;v.yc(o);for(var s=new h.fu(o,8),n=-1,l=new h.l,c=v.Ha(),p=!1;c.ab();)for(;c.Ia();){var f=c.ia(),g=c.xb();if(f.A(l),l.isIntersecting(u)&&(n=s.Ez(g,l,n))==-1){if(p)throw h.i.ga("internal error.");v.Ap(o,!1),p=!0,s.reset(o,8),c.aj();break}}return s},k.jE=function(v,u){for(var o=new h.fu(u,8),s=new h.h,n=!1,l=new h.l,c=0;c<v.I();c++)if(v.D(c,s),u.contains(s)&&(l.L(s),o.xj(c,l)==-1)){if(n)throw h.i.Ra();n=!0,c=new h.l,v.Ap(c,!1),o.reset(c,8),c=-1}return o},k.gR=function(v,u,o){var s=new h.l,n=new h.l;v.yc(s),u.yc(n),s.X(o,o),n.X(o,o);var l=new h.l;l.L(s),l.Fa(n),v=v.Ha(),u=u.Ha();var c=new h.sC;c.WB(o);var p=!1;for(c.kK();v.ab();)for(;v.Ia();)v.ia().A(s),s.isIntersecting(l)&&(p=!0,(o=new h.l).L(s),c.DD(v.xb(),o));if(c.dF(),!p)return null;for(s=!1,c.jK();u.ab();)for(;u.Ia();)u.ia().A(n),n.isIntersecting(l)&&(s=!0,(o=new h.l).L(n),c.zD(u.xb(),o));return c.cF(),s?c:null},k.hR=function(v,u,o,s,n){var l=v.K(),c=u.K(),p=new h.l,f=new h.l;v.yc(p),u.yc(f),p.X(o,o),f.X(o,o);var g=new h.l;g.L(p),g.Fa(f);var w=new h.sC;w.WB(o);var x=!1;w.kK();var T=0;for(o=v.ea();T<o;T++)s&&l==1736&&!v.Gv(T)||(v.Tj(T,p),p.isIntersecting(g)&&(x=!0,w.DD(T,p)));if(w.dF(),!x)return null;for(v=!1,w.jK(),s=0,o=u.ea();s<o;s++)n&&c==1736&&!u.Gv(s)||(u.Tj(s,f),f.isIntersecting(g)&&(v=!0,w.zD(s,f)));return w.cF(),v?w:null},k.Tu=function(v,u,o){if(v!=u)for(var s=0;s<o;s++)v[s]==null?v[s]=h.h.cl(u[s]):v[s].N(u[s])},k.Ey=function(v,u,o,s){var n=0;for(s+=0;n<s;o++,n++)v[n]==null&&(v[n]=[0,0]),v[n][0]=u[o].x,v[n][1]=u[o].y},k.Dy=function(v,u,o,s){var n=u,l=0;for(u=s+u;n<u;l++,n++)v[n]==null?v[n]=h.h.construct(o[l][0],o[l][1]):v[n].na(o[l][0],o[l][1])},k.fP=function(v,u,o){if(v!=u)for(var s=0;s<o;s++)v[s]==null?v[s]=new h.Ta(u[s]):u[s].copyTo(v[s])},k.qE=function(v,u,o,s){var n=0;return v!=null&&(n=v.Yd(0),s&&!o||v==null||(n+=1.01*v.pz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},k.oy=function(v,u,o){return k.qE(v,u.zr(),o,!1)},k.bO=function(v,u){var o=new h.l;return u.A(o),k.oy(v,o,!0)},k.py=function(v,u){return k.qE(v,u.zr(),!1,!0)},k.Ju=function(v,u){var o=new h.l;return u.A(o),k.py(v,o)},k.vG=function(v,u,o,s){s*=s;var n=new h.h;if(n.vc(v,u),(v=new h.h).vc(o,u),u=n.Uk(),o=v.Uk(),u<=s&&o<=s)return!0;var l=h.mc.ox(n.yi(v));return(l<=s*u||l<=s*o)&&0<=n.Sh(v)},k.ZJ=function(v,u,o,s){for(var n=0;n<u;n++){var l=v[n].y,c=h.P.Tk(l,o,s);c!=l&&(v[n].y=c)}},k}()}(U||(U={})),function(h){var k,v,u=function(){function l(c){this.Za=c}return l.prototype.compare=function(c,p,f){c=c.ka(f),f=this.Za.qk(p);var g=this.Za.qk(c);return f<g?-1:f==g?n.iq(p)&&n.Iv(c)?-1:n.iq(c)&&n.Iv(p)?1:0:1},l}(),o=function(){function l(c){this.Za=c}return l.prototype.qr=function(c,p,f){this.Za.CX(f,c,p)},l.prototype.bq=function(c){return this.Za.qk(c)},l}();(v=k||(k={}))[v.initialize=0]="initialize",v[v.pIn=1]="pIn",v[v.pL=2]="pL",v[v.pR=3]="pR",v[v.pT=4]="pT",v[v.right=5]="right",v[v.left=6]="left",v[v.all=7]="all";var s=function(){function l(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.tg=[0,0]}return l.prototype.Zi=function(c,p){this.Si.pa=c.pa-p,this.Si.wa=c.wa+p,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.zB=function(c,p,f){if(c>p)throw h.i.O();this.Si.pa=c-f,this.Si.wa=p+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.Wo=function(c,p){this.Si.pa=c-p,this.Si.wa=c+p,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.ie)return-1;for(var c=!0;c;)switch(this.tg[this.ie]){case 1:c=this.AU();break;case 2:c=this.BU();break;case 3:c=this.CU();break;case 4:c=this.DU();break;case 5:c=this.AW();break;case 6:c=this.fT();break;case 7:c=this.oN();break;case 0:c=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},l.construct=function(c){var p=new l;return p.Za=c,p.ji.Jb(20),p.ie=-1,p},l.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},l.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var c=this.Za.Pp(this.Mc);return this.Si.wa<c?(c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0):c<this.Si.pa?(c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),!0)},l.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.nk(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.sj(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var c=this.Za.pk(this.Mc);return c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},l.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&n.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},l.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},l.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},l.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},l}();h.AY=s;var n=function(){function l(c){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=c,this.nq=this.Uv=!1}return l.prototype.mr=function(){this.Pk(!0)},l.prototype.Dr=function(c,p){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(c,p))},l.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},l.prototype.xj=function(c){if(!this.Uf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var p=this.Hj.length;if(this.dA){var f=new h.ja(0);f.Jb(2*p),this.XI(f),this.bi.Jb(2*p),this.bi.resize(0),this.WI(f),this.Mm.resize(p,-1),this.Mm.Yj(-1,0,p),this.dA=!1}else this.Mm.Yj(-1,0,p);this.kf=this.Vu()}p=this.kG(c<<1,this.kf),f=this.bg.addElement(1+(c<<1),this.rz(p)),this.QJ(p,f),this.Mm.set(c,p),this.aw++},l.prototype.remove=function(c){if(!this.Uf||!this.nq)throw h.i.ga("invalid call");var p=this.Mm.get(c);if(p==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(c,-1),this.aw--;var f=this.rz(p),g=this.bg.UR(f);this.bg.wd(this.rR(p),f),this.bg.wd(this.OR(p),f),(c=this.bg.size(f))==0&&(this.bg.HP(f),this.UJ(g,-1)),this.Gj.kd(p),f=this.PF(g);var w=this.sj(g),x=this.nk(g);for(p=0;!(0<c||g==this.kf||w!=-1&&x!=-1);)g==this.sj(f)?w!=-1?(this.Qk(f,w),this.Wj(w,f),this.Qk(g,-1)):x!=-1?(this.Qk(f,x),this.Wj(x,f),this.Sk(g,-1)):this.Qk(f,-1):w!=-1?(this.Sk(f,w),this.Wj(w,f),this.Qk(g,-1)):x!=-1?(this.Sk(f,x),this.Wj(x,f),this.Sk(g,-1)):this.Sk(f,-1),this.Wj(g,-1),p++,g=f,c=(f=this.pk(g))!=-1?this.bg.size(f):0,w=this.sj(g),x=this.nk(g),f=this.PF(g)},l.prototype.reset=function(){if(!this.Uf||!this.nq)throw h.i.O("invalid call");this.Pk(!1)},l.prototype.size=function(){return this.aw},l.prototype.getIterator=function(){return s.construct(this)},l.prototype.XI=function(c){for(var p=this.Hj.length,f=0;f<2*p;f++)c.add(f);this.DX(c,2*p)},l.prototype.WI=function(c){for(var p=NaN,f=0;f<c.size;f++){var g=c.get(f),w=this.qk(g);w!=p&&(this.bi.add(g),p=w)}},l.prototype.qS=function(){var c=this.Hj.length,p=new h.ja(0);p.Jb(2*c),this.XI(p),this.bi.Jb(2*c),this.bi.resize(0),this.WI(p),this.Gj.Ee(c),this.Vi.hn(2*c);var f=h.Zc.Qh(c);for(f.Yj(-1,0,c),this.kf=this.Vu(),c=0;c<p.size;c++){var g=p.get(c),w=f.get(g>>1);w!=-1?this.QJ(w,this.Vi.addElement(this.rz(w),g)):(w=this.kG(g,this.kf),f.set(g>>1,w))}},l.prototype.kG=function(c,p){var f=p,g=p,w=-1,x=0,T=this.bi.size-1,E=0,O=c>>1,C=NaN,N=NaN,D=!0,z=this.yR(O);for(O=this.vR(O);D;){x<T?(E=x+h.P.truncate((T-x)/2),this.bz(f)==-1&&this.AJ(f,this.bi.get(E),this.bi.get(E+1))):this.bz(f)==-1&&this.AJ(f,this.bi.get(x),this.bi.get(x));var R=this.Pp(f);if(O<R)p!=-1&&(p==f?(g=f,C=R,N=(p=this.sj(f))!=-1?this.Pp(p):NaN):N>R&&(R<C?this.Qk(g,f):this.Sk(g,f),this.Sk(f,p),this.Uf&&(this.Wj(f,g),this.Wj(p,f)),g=f,C=R,p=-1,N=NaN)),(T=this.sR(f))==-1&&(T=this.Vu(),this.ZW(f,T)),f=T,T=E;else if(z>R)p!=-1&&(p==f?(g=f,C=R,N=(p=this.nk(f))!=-1?this.Pp(p):NaN):N<R&&(R<C?this.Qk(g,f):this.Sk(g,f),this.Qk(f,p),this.Uf&&(this.Wj(f,g),this.Wj(p,f)),g=f,C=R,p=-1,N=NaN)),(x=this.PR(f))==-1&&(x=this.Vu(),this.jX(f,x)),f=x,x=E+1;else{(D=this.pk(f))==-1&&(D=this.uP(f),this.UJ(f,D));var G=this.aN(D,c);w=this.sP(),this.mX(w,D),this.YW(w,G),f!=p&&(R<C?this.Qk(g,f):this.Sk(g,f),this.Uf&&this.Wj(f,g),p!=-1&&(N<R?this.Qk(f,p):this.Sk(f,p),this.Uf&&this.Wj(p,f))),D=!1}}return w},l.prototype.Vu=function(){return this.ne.De()},l.prototype.uP=function(c){return this.Uf?this.bg.Rr(c):this.Vi.Rh(c)},l.prototype.sP=function(){return this.Gj.De()},l.prototype.Pk=function(c){c?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.bg=new h.$j,this.bg.Xo(new u(this))):this.bg.clear():this.Vi==null?this.Vi=new h.lp:this.Vi.clear(),this.ne==null?(this.Gj=new h.ad(3),this.ne=new h.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},l.prototype.AJ=function(c,p,f){this.SW(c,p),this.TW(c,f)},l.prototype.Pp=function(c){var p=this.bz(c);return p==-1?NaN:(p=this.qk(p))==(c=this.qk(this.bR(c)))?p:.5*(p+c)},l.prototype.SW=function(c,p){this.ne.T(c,0,p)},l.prototype.TW=function(c,p){this.ne.T(c,1,p)},l.prototype.ZW=function(c,p){this.ne.T(c,3,p)},l.prototype.jX=function(c,p){this.ne.T(c,4,p)},l.prototype.UJ=function(c,p){this.ne.T(c,2,p)},l.prototype.Qk=function(c,p){this.ne.T(c,5,p)},l.prototype.Sk=function(c,p){this.ne.T(c,6,p)},l.prototype.Wj=function(c,p){this.ne.T(c,7,p)},l.prototype.mX=function(c,p){this.Gj.T(c,0,p)},l.prototype.aN=function(c,p){return this.Uf?this.bg.addElement(p,c):this.Vi.addElement(c,p)},l.prototype.YW=function(c,p){this.Gj.T(c,1,p)},l.prototype.QJ=function(c,p){this.Gj.T(c,2,p)},l.prototype.ml=function(c){return this.Uf?this.bg.sc(c):this.Vi.sc(c)},l.prototype.bs=function(c){return this.Uf?this.bg.Gc(c):this.Vi.Gc(c)},l.iq=function(c){return(1&c)==0},l.Iv=function(c){return(1&c)==1},l.prototype.bz=function(c){return this.ne.U(c,0)},l.prototype.bR=function(c){return this.ne.U(c,1)},l.prototype.pk=function(c){return this.ne.U(c,2)},l.prototype.sR=function(c){return this.ne.U(c,3)},l.prototype.PR=function(c){return this.ne.U(c,4)},l.prototype.sj=function(c){return this.ne.U(c,5)},l.prototype.nk=function(c){return this.ne.U(c,6)},l.prototype.PF=function(c){return this.ne.U(c,7)},l.prototype.rz=function(c){return this.Gj.U(c,0)},l.prototype.rR=function(c){return this.Gj.U(c,1)},l.prototype.OR=function(c){return this.Gj.U(c,2)},l.prototype.yR=function(c){return this.Hj[c].pa},l.prototype.vR=function(c){return this.Hj[c].wa},l.prototype.DX=function(c,p){this.Cm==null&&(this.Cm=new h.Zt);var f=new o(this);this.Cm.sort(c,0,p,f)},l.prototype.CX=function(c,p,f){var g=this;c.Wd(p,f,function(w,x){var T=g.qk(w),E=g.qk(x);return T<E||T==E&&l.iq(w)&&l.Iv(x)?-1:1})},l.prototype.qk=function(c){var p=this.Hj[c>>1];return l.iq(c)?p.pa:p.wa},l}();h.ur=n}(U||(U={})),function(h){var k=function(){function v(u){if(u==null)throw h.i.ga("Invalid arguement");this.hf=u;var o=u.iR();o.cS()?u.ef.DG()?this.no=h.ui.PannableFold:this.no=h.ui.Clip:this.no=h.ui.DontClip,o.dS()?u.$f.DG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=o.Lr,this.hH=o.Xu,u=this.hf.nH,this.WG=u.ks(2147483648),this.Wv=u.ks(1073741824)}return v.Bh=function(u,o,s){return o.yw.Bh(u,s)},v.Tt=function(u,o,s,n){return u.yw.Tt(o,s,n)},v.St=function(u,o,s,n){if(s=0>s?o.length:s,(u=u.yw.Tt(o,s,n))==s)return u;for(var l=o=0;l<s;l++){var c=n[l];c.isNaN()||(o<l&&n[o].N(c),o++)}for(;o<s;o++)n[o].Sc();return u},v.transform=function(u,o,s,n,l){if(u.isIdentity())return h.ua.fP(n,o,s),s;for(var c=[],p=0,f=0;f<s;){for(var g=Math.min(c.length,s-f),w=f,x=0;w<g;w++,x++)c[x]==null?c[x]=o[w].D():o[w].D(c[x]);var T=l?v.St(u,c,g,c):v.Tt(u,c,g,c);for(x=w=0;w<T;w++,x++)n[f]==null&&(n[f]=new h.Ta(o[f])),n[f].Db(c[x]);f+=g,p+=T}return p},v.prototype.Tt=function(u,o,s){if(this.hf.isIdentity())return u!=s&&h.ua.Tu(s,u,o),o;var n=this.hf.ef,l=this.hf.$f,c=n.Tb(),p=l.Tb();if(c==0&&c===p){var f=n.Sp();return l=f/(l=l.Sp()),(f=new h.Ed).Jt(l,l),f.aY(u,o,s),o}if(f=h.P.Hu(Math.min(o,64)),c==3){var g=n.Li;c=(n=g.hk()).Tb(),s!=u&&h.ua.Tu(s,u,o),h.Ab.bl(g,s,o,!0),g.St(h.dm.forward,s,o),h.Ab.al(g,s,o,!0)}if(c==3||p===3)throw h.i.ga("image: transform_in_place_");if(c==2)this.no==h.ui.Clip?(s!=u&&h.ua.Tu(s,u,o),u=n.ol(),h.Ab.JS(u,n,s,o)):(s!=u&&h.ua.Tu(s,u,o),n.Xc()&&(c=n.Yd(0),g=n.Le(),h.Ab.AX(s,o,g,c),h.Ab.lF(s,o,n,0))),h.Ab.DL(n,s,o,f);else for(c=n.Yd(0),g=n.Le(),n=0;n<o;n++)h.Ab.BX(u[n],g,c,s[n]);for(h.Ab.BL(this.hf,s,o,f),u=0,(p=p==2)?u=l.Bi():isNaN(this.Dm)||(u=this.Dm),p&&this.Sm!=h.ui.Clip||h.Ab.lF(s,o,l.tc(),u),p&&(h.Ab.tG(s,o,l,this.Sm),h.Ab.CL(l,s,o,f)),u=o,n=0;n<o;++n)s[n].isNaN()&&u--;return u},v.prototype.Bh=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.SI(u);var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb();if(l==0&&l==c)return o=s.Sp(),o/=n=n.Sp(),(n=new h.Ed).Jt(o,o),(u=h.ba.kg(u)).Pc(n),u;switch(u.K()){case 1607:case 1736:u=this.QI(u,o);break;case 550:u=this.aW(u,o);break;case 197:u=this.$V(u,o);break;default:throw h.i.ga("")}return u},v.prototype.SI=function(u){var o=u.D(),s=[];return s[0]=o,this.Tt(s,1,s),(u=new h.Ta(u)).Db(s[0]),u},v.prototype.QI=function(u,o){if(u.vm())throw h.i.ga("curves not supported");var s=u.K();if(s==1736)return this.bW(u,o);if(s==1607)return this.cW(u,o);throw h.i.ga("projectMultiPath")},v.prototype.bW=function(u,o){var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64)),f=h.Ea.kg(u);l==3&&(l=(s=(u=s.Li).hk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).hk()).Tb());var g=l==2,w=c==2,x=w?n.tc():n,T=!w&&!this.Wv;c=!1;var E=f;if(g){if((E=h.Ab.OI(E,s,this.no,o)).B())return E}else{if(f=new h.l,E.yc(f),l=s.Le(),f.G<l.G||f.H>l.H){var O=h.l.construct(f.v-1,l.G,f.C+1,l.H);if((E=h.ti.Pu(E,O,s,NaN,0,o)).B())return E}f.S()>2*l.S()&&(E=h.Ab.Jp(E,-2*l.S(),2*l.S(),s,!0,0,!0,o))}f=this.hH,(l=!isNaN(f))&&(E=h.Zl.local().W(E,f,o)),O=w?n.mk():null;var C=NaN;g&&(C=s.Bi());var N=n.Yr()!=null;if(this.WG)g&&(h.Ab.wr(s,C,E,p),l&&(g=s.jh(),f*=(C=s.tc().jh())/g)),h.Ab.vr(this.hf,E,T,p),l&&(g=s.tc().jh(),f*=(C=n.tc().jh())/g),s=E;else{var D=new h.Ua(E.description);D.yD(E),g&&(h.Ab.wr(s,C,D,p),l&&(g=s.jh(),f*=(C=s.tc().jh())/g)),h.Ab.vr(this.hf,D,T,p),l&&(g=s.tc().rm(),f*=(C=n.tc().rm())/g),T=NaN,w?(O=n.mk(),T=n.Bi()):isNaN(this.Dm)||(T=this.Dm),g=v.vv(s)|v.vv(n),C=10*x.Yd(0),this.Wv&&(g=3,C=0),s=h.Ab.PQ(E,s,D,x,T,o,g,C)}return N&&(s=h.Ab.SD(s,n,o)),w&&(c||(w=x.Le().S(),s.Vg(0,0).S()>=w-x.Yd(0)&&(x=O.getNorthPoleLocation(),w=O.getSouthPoleLocation(),E=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),T=0,E==h.Eg.PE_POLE_POINT&&x!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),O==h.Eg.PE_POLE_POINT&&w!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(c=!0))),s=h.Ab.Hz(s,n,this.Sm,o),l&&(s=h.Zl.local().W(s,f,o)),h.Ab.Kx(n,s,p)),s.B()||(c&&(s=h.$l.local().W(s,n,!1,o)),u!=null&&(s=u.al(s,!1),this.yp(u,h.dm.reverse,s),s=u.bl(s,!1))),s},v.vv=function(u){if(u.Tb()!=2)return 0;var o=0,s=u.mk();u=s.getNorthPoleLocation();var n=s.getSouthPoleLocation(),l=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),l==h.Eg.PE_POLE_POINT&&u!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),s==h.Eg.PE_POLE_POINT&&n!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},v.prototype.cW=function(u,o){var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64)),f=h.Ua.kg(u);l==3&&(l=(s=(u=s.Li).hk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).hk()).Tb());var g=l==2;l=(c=c==2)?n.tc():n;var w=!c&&!this.Wv;if(g){if((f=h.Ab.OI(f,s,this.no,o)).B())return f}else{var x=new h.l;f.yc(x);var T=s.Le();if((x.G<T.G||x.H>T.H)&&(x=h.l.construct(x.v-1,T.G,x.C+1,T.H),(f=h.ti.Pu(f,x,s,NaN,0,o)).B()))return f}var E=NaN;g&&(E=s.Bi()),x=n.Yr()!=null,T=this.hH;var O=!isNaN(T);if(O&&(f=h.Zl.local().W(f,T,o)),this.WG)g&&h.Ab.wr(s,E,f,p),O&&(g=s.jh(),T*=(E=s.tc().jh())/g),h.Ab.vr(this.hf,f,w,p),O&&(g=s.tc().jh(),T*=(E=n.tc().jh())/g),s=f;else{var C=new h.Ua(f.description);C.yD(f),g&&(h.Ab.wr(s,E,C,p),O&&(g=s.jh(),T*=(E=s.tc().jh())/g)),h.Ab.vr(this.hf,C,w,p),O&&(g=s.tc().jh(),T*=(E=n.tc().jh())/g),w=NaN,c?w=n.Bi():isNaN(this.Dm)||(w=this.Dm),g=v.vv(s)|v.vv(n),E=10*l.Yd(0),this.Wv&&(g=3,E=0),s=h.Ab.QQ(f,s,C,l,w,o,g,E)}return x&&(s=h.Ab.SD(s,n,o)),c&&(s=h.Ab.Hz(s,n,this.Sm,o),O&&(s=h.Zl.local().W(s,T,o)),h.Ab.Kx(n,s,p)),s.B()||u!=null&&(s=u.al(s,!1),this.yp(u,h.dm.reverse,s),s=u.bl(s,!1)),s},v.prototype.$V=function(u,o){var s=(u.da()+u.S())/400;return s!=0?(s=h.Zl.local().W(u,s,o),s=this.QI(s,o),o=u.Ja(),s.dn(o)):(o=new h.Ta(u.Kp()),s=this.SI(o),o=u.Ja(),s.B()?o.Pa():(u.copyTo(o),u=s.D(),o.L(u.x,u.y,u.x,u.y))),o},v.prototype.aW=function(u,o){u=h.ba.kg(u);var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64));if(l==3){var f=s.Li;l=(s=f.hk()).Tb(),u=f.al(u,!0),this.yp(f,h.dm.forward,u),u=f.bl(u,!0)}if(l==2){if(this.no==h.ui.Clip?u=h.Zj.local().W(u,s.ol(),s,o):s.Xc()&&(l=new h.l,u.yc(l),s.Le().contains(l)||(this.no==h.ui.PannableFold&&(u=h.Ab.nj(u,s)),h.Ab.Lt(u,s.Le(),s.Yd(0),!0),u=h.Ab.Hn(u,s,0,!0,0,o))),u.B())return u;h.Ab.wr(s,0,u,p)}else h.Ab.Lt(u,s.Le(),s.Yd(0),!0);return h.Ab.vr(this.hf,u,!1,p),s=0,l=!1,f=null,c==3&&(l=!0,c=(n=(f=n.Li).hk()).Tb()),(c=c==2)?s=n.Bi():isNaN(this.Dm)||(s=this.Dm),c&&this.Sm!=h.ui.Clip||(u=h.Ab.Hn(u,n.tc(),s,!1,0,o)),c&&(u=h.Ab.Hz(u,n,this.Sm,o),h.Ab.Kx(n,u,p),u.B())||l&&(u=f.al(u,!0),this.yp(f,h.dm.reverse,u),u=f.bl(u,!0)),u},v.prototype.yp=function(u,o,s){var n=s.I();if(n!=0){for(var l=s.vb(0),c=h.P.mg(200,0),p=[],f=0;f<n;){var g=Math.min(100,n-f);l.Xw(2*f,2*g,c,2,!0);for(var w=0;w<g;++w)p[w]=h.h.construct(c[2*f],c[2*f+1]);u.St(o,p,g),f+=g}s.Qc(1993)}},v.Py=function(u,o,s){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var n=u.K();return n==197?(n=new h.Ea(u.description)).bd(u,!1):h.ba.zd(n)?(n=new h.Ua(u.description)).pc(u,!0):n=u,(n=h.Ab.nj(n,o)).B()?n:h.Ab.Hn(n,o,0,n!=u,0,s)},v.pj=function(u,o,s,n){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var l=u.K();if(h.ba.Ic(l)){u=h.Ab.nj(u,o),l=new h.l,u.A(l);for(var c=h.ua.oy(o,l,!1),p=o.ih(),f=Math.floor((l.v-p.v)/p.S())*p.S()+p.v;f<l.C;)f>l.v+c&&f<l.C-c&&(u=h.Ab.pS(u,o,s,f)),f+=p.S()}else{if(l==197)return(l=new h.Ea(u.description)).bd(u,!1),v.pj(l,o,s,n);if(h.ba.zd(l))return(l=new h.Ua(u.description)).pc(u,!0),v.pj(l,o,s,n)}return v.Py(u,o,n)},v}();h.du=k}(U||(U={})),function(h){var k=function(v){function u(o,s,n,l){var c=v.call(this)||this;return o===void 0?c.description=h.fe.pg():n===void 0?c.description=o:(c.description=h.fe.pg(),c.UB(o,s),c.Sl(n,l)),c}return yt(u,v),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var o=this.ta-this.qa,s=this.oa-this.ma;return Math.sqrt(o*o+s*s)},u.prototype.Di=function(o){var s=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(s*s+n*n)<=o},u.prototype.Rn=function(){return!1},u.prototype.lg=function(){var o=new h.h;return o.vc(this.xc(),this.bc()),o},u.YO=function(o,s){return new u(o.x,o.y,s.x,s.y)},u.prototype.dn=function(o){o.Pa(),o.Pf(this.description);var s=new h.l;this.A(s),o.Zo(s),s=1;for(var n=this.description.Ba;s<n;s++)for(var l=this.description.ld(s),c=h.sa.Wa(l);s<c;s++){var p=this.Vg(l,0);o.setInterval(l,0,p)}},u.prototype.A=function(o){o.L(this.ta,this.oa,this.qa,this.ma),o.normalize()},u.prototype.So=function(o){o.Pa(),o.$b(this.ta,this.oa,this.Pd(0,1,0)),o.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(o){if(o instanceof h.Ed){this.wc();var s=new h.h;s.x=this.ta,s.y=this.oa,o.Gh(s,s),this.ta=s.x,this.oa=s.y,s.x=this.qa,s.y=this.ma,o.Gh(s,s),this.qa=s.x,this.ma=s.y}else this.wc(),(s=new h.Od).x=this.ta,s.y=this.oa,s.z=this.Pd(0,1,0),s=o.hp(s),this.ta=s.x,this.oa=s.y,this.vn(0,1,0,s.z),s.x=this.qa,s.y=this.ma,s.z=this.Pd(1,1,0),s=o.hp(s),this.qa=s.x,this.ma=s.y,this.vn(1,1,0,s.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Sx=function(o,s){return(this.qa-o-(this.ta-o))*(this.ma-s+(this.oa-s))*.5},u.prototype.ux=function(o){return o*this.Rb()},u.prototype.IG=function(o){return o/this.Rb()},u.prototype.yF=function(o){return h.mc.jq(this.ta,this.qa,o)},u.prototype.aR=function(o){return h.mc.jq(this.oa,this.ma,o)},u.prototype.fl=function(o,s){var n=new h.jg;return this.dh(o,s,n),n.get()},u.prototype.dh=function(o,s,n){if(n==null)throw h.i.O();n.Qr(),(n=n.get()).Pf(this.description);var l=new h.h;this.ic(o,l),n.UB(l.x,l.y),this.ic(s,l),n.Sl(l.x,l.y),l=1;for(var c=this.description.Ba;l<c;l++)for(var p=this.description.Fd(l),f=h.sa.Wa(p),g=0;g<f;g++){var w=this.Vc(o,p,g);n.TB(p,g,w),w=this.Vc(s,p,g),n.JB(p,g,w)}},u.prototype.Vc=function(o,s,n){if(s==0)return n==0?this.ic(o).x:this.ic(o).y;switch(h.sa.gz(s)){case 0:return .5>o?this.yv(s,n):this.jv(s,n);case 1:var l=this.yv(s,n);return s=this.jv(s,n),h.mc.jq(l,s,o);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},u.prototype.ge=function(o,s){var n=this.qa-this.ta,l=this.ma-this.oa,c=n*n+l*l;return c==0?.5:(o=((o.x-this.ta)*n+(o.y-this.oa)*l)/c,s||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.fq=function(o,s,n,l){if(o){if((o=this.ma-this.oa)==0)return s==this.ma?-1:0;if(0>(s=(s-this.oa)/o)||1<s)return 0;n!=null&&(n[0]=this.yF(s))}else{if((o=this.qa-this.ta)==0)return s==this.qa?-1:0;if(0>(s=(s-this.ta)/o)||1<s)return 0;n!=null&&(n[0]=this.aR(s))}return l!=null&&(l[0]=s),1},u.prototype.Me=function(o,s){var n=this.ma-this.oa;return n==0?o==this.ma?s:NaN:(o=(o-this.oa)/n,s=this.yF(o),o==1&&(s=this.qa),s)},u.prototype.tu=function(o,s,n){return 0<=this.tp(o.x,o.y,s,n)},u.prototype.xi=function(o,s,n){return 0<=this.tp(o,s,n,!0)},u.prototype.ss=function(o,s){return this.tu(o,s,!1)},u.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=0;for(var s=this.description.Qq-2;o<s;o++){var n=this.la[o];this.la[o]=this.la[o+s],this.la[o+s]=n}}},u.prototype.wu=function(o,s){(s=h.h.construct(o,s)).sub(this.bc());var n=new h.h;return n.vc(this.xc(),this.bc()),(o=n.yi(s))>(s=8881784197001252e-31*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x)))?-1:o<-s?1:0},u.prototype.tp=function(o,s,n,l){var c=this.ta,p=this.oa,f=o-c,g=s-p;if((f=Math.sqrt(f*f+g*g))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:0;if(f=o-this.qa,g=s-this.ma,(f=Math.sqrt(f*f+g*g))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:1;if(f=this.qa-this.ta,g=this.ma-this.oa,0<(l=Math.sqrt(f*f+g*g))){var w=1/l,x=o-c,T=s-p,E=x*(f*=w)+T*(g*=w),O=17763568394002505e-31*(Math.abs(x*f)+Math.abs(T*g)),C=f;if(f=-g,g=C,E<-(O=Math.max(n,O))||E>l+O)return NaN;if(Math.abs(x*f+T*g)<=Math.max(n,17763568394002505e-31*(Math.abs(x*f)+Math.abs(T*g)))&&(.5>=(f=h.P.Tk(E*w,0,1))?(g=this.ta+(this.qa-this.ta)*f,l=this.oa+(this.ma-this.oa)*f):(g=this.qa-(this.qa-this.ta)*(1-f),l=this.ma-(this.ma-this.oa)*(1-f)),h.h.Jy(g,l,o,s)<=n)){if(.5>f){if(h.h.Jy(g,l,c,p)<=n)return 0}else if(h.h.Jy(g,l,this.qa,this.ma)<=n)return 1;return f}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.AM(o))},u.prototype.mD=function(o,s,n){var l=n?this.ta:this.qa;n=n?this.oa:this.ma;var c=new h.h;return c.x=o.qa-l,c.y=o.ma-n,!(s.Sh(c)>6661338147750939e-31*s.aD(c))||(c.x=o.ta-l,c.y=o.oa-n,s.Sh(c)<=6661338147750939e-31*s.aD(c))},u.prototype.lD=function(o){var s=new h.h;return s.x=this.qa-this.ta,s.y=this.ma-this.oa,!!this.mD(o,s,!1)&&(s.Uq(),!!this.mD(o,s,!0))},u.IM=function(o,s){var n=o.wu(s.ta,s.oa),l=o.wu(s.qa,s.ma);return!(0>n&&0>l||0<n&&0<l)&&(n=s.wu(o.ta,o.oa),l=s.wu(o.qa,o.ma),!(0>n&&0>l||0<n&&0<l)&&((n=o.Rb())>(l=s.Rb())?o.lD(s):s.lD(o)))},u.GM=function(o,s,n){var l=h.h.construct(NaN,NaN),c=o.qa-o.ta,p=o.ma-o.oa,f=s.qa-s.ta,g=s.ma-s.oa,w=f*p-c*g;if(w==0)return l;var x=8881784197001252e-31*(Math.abs(f*p)+Math.abs(c*g)),T=s.ta-o.ta,E=s.oa-o.oa,O=f*E-T*g,C=O/w,N=Math.abs(w);return C<-(f=(8881784197001252e-31*(Math.abs(f*E)+Math.abs(T*g))*N+x*Math.abs(O))/(w*w)+2220446049250313e-31*Math.abs(C))||C>1+f||(f=(g=c*E-T*p)/w)<-(c=(8881784197001252e-31*(Math.abs(c*E)+Math.abs(T*p))*N+x*Math.abs(g))/(w*w)+2220446049250313e-31*Math.abs(f))||f>1+c||(C=h.P.Tk(C,0,1),c=h.P.Tk(f,0,1),p=o.ic(C),w=s.ic(c),(x=new h.h).vc(p,w),x.length()>n&&(x.add(p,w),x.scale(.5),C=o.ge(x,!1),c=s.ge(x,!1),o=o.ic(C),s=s.ic(c),o.sub(s),o.length()>n)||l.na(C,c)),l},u.JM=function(o,s,n,l){var c=0;if((o.ta==s.ta&&o.oa==s.oa||o.ta==s.qa&&o.oa==s.ma)&&(c++,!l))return 1;if(o.qa==s.ta&&o.ma==s.oa||o.qa==s.qa&&o.ma==s.ma){if(++c==2)return 2;if(!l)return 1}return s.xi(o.ta,o.oa,n)||s.xi(o.qa,o.ma,n)||o.xi(s.ta,s.oa,n)||o.xi(s.qa,s.ma,n)?1:l&&c!=0||u.IM(o,s)==0?0:1},u.Yx=function(o,s,n,l,c,p){var f=0,g=o.tp(s.ta,s.oa,p,!1),w=o.tp(s.qa,s.ma,p,!1),x=s.tp(o.ta,o.oa,p,!1),T=s.tp(o.qa,o.ma,p,!1);return isNaN(g)||(l!=null&&(l[f]=g),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(s.ta,s.oa)),f++),isNaN(w)||(l!=null&&(l[f]=w),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(s.qa,s.ma)),f++),f==2||isNaN(x)||g==0&&x==0||w==0&&x==1||(l!=null&&(l[f]=0),c!=null&&(c[f]=x),n!=null&&(n[f]=h.h.construct(o.ta,o.oa)),f++),f==2||isNaN(T)||g==1&&T==0||w==1&&T==1||(l!=null&&(l[f]=1),c!=null&&(c[f]=T),n!=null&&(n[f]=h.h.construct(s.qa,s.ma)),f++),0<f?(f==2&&l!=null&&l[0]>l[1]&&(o=l[0],l[0]=l[1],l[1]=o,c!=null&&(l=c[0],c[0]=c[1],c[1]=l),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=u.GM(o,s,p),isNaN(f.x)?0:(n!=null&&(n[0]=o.ic(f.x)),l!=null&&(l[0]=f.x),c!=null&&(c[0]=f.y),1))},u.prototype.$F=function(){return 0},u.prototype.qp=function(){},u.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(h.NC);h.zb=k}(U||(U={})),function(h){var k=function(){function v(){this.Lm=[],this.za=-1}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},v.prototype.VX=function(u){this.Lm.push(u)},v.prototype.re=function(){},v}();h.bL=k}(U||(U={})),function(h){var k;(k=h.NL||(h.NL={}))[k.enumFillRuleOddEven=0]="enumFillRuleOddEven",k[k.enumFillRuleWinding=1]="enumFillRuleWinding";var v=function(u){function o(s,n){var l=u.call(this)||this;if(l.yf=!1,l.Gq=null,l.uq=0,l.tq=0,l.Cj=null,l.Og=!1,l.nb=null,l.mb=null,l.Se=null,l.Nj=null,l.Td=null,l.vq=0,l.gb=0,l.zq=0,n===void 0)l.yf=s,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=h.fe.pg();else{if(n==null)throw h.i.O();l.yf=s,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=n}return l.Cj=null,l.gb=0,l}return yt(o,u),o.prototype.vm=function(){return 0<this.vq},o.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.Pf(this.description)},o.prototype.rx=function(s,n){var l=new h.h;l.x=s,l.y=n,this.Nt(l)},o.prototype.Nt=function(s){this.Xx(),this.Gq.Db(s),this.Og=!0},o.prototype.nf=function(s){if(s.B())throw h.i.O();this.Ll(s.description),this.Xx(),s.copyTo(this.Gq),this.Og=!0},o.prototype.Rx=function(){var s=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),s++);var n=this.xa;this.nb.write(this.nb.size-1,this.xa+s),this.fm(n+s),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(n,this.Gq),this.Og=!1)},o.prototype.Aj=function(s,n){this.Rx(),this.Db(this.xa-1,s,n)},o.prototype.Ei=function(s){this.Rx(),this.Db(this.xa-1,s)},o.prototype.lineTo=function(s){this.Rx(),this.It(this.xa-1,s)},o.prototype.xU=function(s){if(this.wc(),this.yf)throw h.i.Ra();var n=this.ea();if(s>n)throw h.i.Ra();if(this.ec(s)){if(this.mb==null)throw h.i.Ra();var l=this.xa,c=this.Ca(s),p=this.Wc(s);this.fm(this.xa+1),this.oc();for(var f=0,g=this.description.Ba;f<g;f++)if(this.Aa[f]!=null){var w=h.sa.Wa(this.description.Fd(f));this.Aa[f].On(w*p,this.Aa[f],w*c,w,!0,1,w*l)}for(;n>s;n--)l=this.nb.read(n),this.nb.write(n,l+1);this.mb.FE(s,1)}},o.prototype.Cp=function(){if(this.vx(),s===void 0){this.Og=!1;var s=this.ea()-1}var n=this.mb.read(s);this.mb.write(s,1|n),this.Se!=null&&(s=this.Wc(s)-1,this.Se.write(s,1),this.Nj.write(s,-1))},o.prototype.ec=function(s){return(1&this.mb.read(s))!=0},o.prototype.Pn=function(s){if(this.ec(s))return!0;var n=this.Ca(s);return!(n>(s=this.Wc(s)-1))&&(n=this.Oa(n),s=this.Oa(s),n.rb(s))},o.prototype.Av=function(s){return(2&this.mb.read(s))!=0},o.prototype.pc=function(s,n){if(this.Ll(s.description),s.K()!=322)throw h.i.Ra();var l=new h.Ta;(n||this.B())&&(s.Vo(l),this.nf(l)),s.Ro(l),this.lineTo(l)},o.prototype.vp=function(s){var n=this.xa==0;this.rx(s.v,s.G),this.Aj(s.v,s.H),this.Aj(s.C,s.H),this.Aj(s.C,s.G),this.Cp(),this.Og=!1,n&&this.Nf(256,!1)},o.prototype.bd=function(s,n){if(!s.B()){for(var l=this.xa==0,c=new h.Ta(this.description),p=0;4>p;p++)s.If(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Cp(),this.Og=!1,l&&!n&&this.Nf(256,!1)}},o.prototype.add=function(s,n){for(var l=0;l<s.ea();l++)this.addPath(s,l,!n)},o.prototype.addPath=function(s,n,l){this.wf(-1,s,n,l)},o.prototype.$k=function(s,n){this.Cz(s,n)},o.prototype.Fr=function(s,n,l,c,p){if(p||this.ea()!=0||(p=!0),0>n&&(n=s.ea()-1),n>=s.ea()||0>l||0>c||c>s.tv(n))throw h.i.ga("index out of bounds");if(c!=0){var f=s.ec(n)&&l+c==s.tv(n);if(!f||c!=1){if(this.Og=!1,this.Ll(s.description),l=s.Ca(n)+l+1,p&&(c++,l--),f&&c--,f=this.xa,this.fm(this.xa+c),this.oc(),p){if(c==0)return;this.nb.add(this.xa),p=s.mb.read(n),p&=-5,this.yf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);p=0;for(var g=this.description.Ba;p<g;p++){var w=this.description.ld(p),x=h.sa.Wa(w),T=s.description.Rf(w);0>T||s.Aa[T]==null?this.Aa[p].Nn(x*f,h.sa.te(w),c*x,x*f):this.Aa[p].On(x*f,s.Aa[T],x*l,c*x,!0,x,x*f)}if(this.vm()||s.Av(n))throw h.i.Ra();this.Qc(1993)}}},o.prototype.jJ=function(){for(var s=0,n=this.ea();s<n;s++)this.zW(s)},o.prototype.zW=function(s){if(this.oc(),s>=this.ea())throw h.i.O();var n=this.Ca(s),l=this.Ka(s);s=this.ec(s)?1:0;for(var c=0,p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.sa.Wa(this.description.Fd(c));this.Aa[c].pi(f*(n+s),f*(l-s),f)}this.Qc(1993)},o.prototype.ar=function(s){this.oc();var n=this.ea();if(0>s&&(s=n-1),s>=n)throw h.i.O();for(var l=this.Ca(s),c=this.Ka(s),p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var g=h.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(g*l,g*c,g*this.xa)}for(l=s+1;l<=n;l++)p=this.nb.read(l),this.nb.write(l-1,p-c);if(this.mb==null)for(l=s+1;l<=n;l++)s=this.mb.read(l),this.mb.write(l-1,s);this.nb.resize(n),this.mb.resize(n),this.xa-=c,this.Rg-=c,this.Qc(1993)},o.prototype.wf=function(s,n,l,c){if(n==this||l>=n.ea())throw h.i.O();var p=this.ea();if(s>p)throw h.i.O();0>s&&(s=p),0>l&&(l=n.ea()-1),this.Og=!1,this.Ll(n.description),n.oc();var f=n.Ca(l),g=n.Ka(l),w=this.xa,x=n.ec(l)&&!c?1:0;this.fm(this.xa+g),this.oc();for(var T=s<p?this.Ca(s):w,E=0,O=this.description.Ba;E<O;E++){var C=this.description.Fd(E),N=n.description.Rf(C),D=h.sa.Wa(C);0<=N&&n.Aa[N]!=null?(x!=0&&this.Aa[E].On(T*D,n.Aa[N],D*f,D,!0,D,D*w),this.Aa[E].On((T+x)*D,n.Aa[N],D*(f+x),D*(g-x),c,D,D*(w+x))):this.Aa[E].Nn(T*D,h.sa.te(C),D*g,D*w)}for(this.nb.add(w+g),c=p;c>=s+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+g);for(n.Av(l),this.mb.add(0),c=p-1;c>=s+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.ER().read(l),p&=-5,this.yf&&(p|=1),this.mb.write(s,p)},o.prototype.Cz=function(s,n){var l=-1,c=this.ea();if(l>c)throw h.i.O();0>l&&(l=c),this.Og=!1;var p=this.xa;this.fm(this.xa+n),this.oc();var f=l<c?this.Ca(l):p;if(s!=null)this.Aa[0].Dz(2*f,s,0,n,!0,2*p);else{var g=h.sa.te(0);this.Aa[0].Nn(2*f,g,2*n,2*p)}s=1;for(var w=this.description.Ba;s<w;s++){g=this.description.ld(s);var x=h.sa.Wa(g);g=h.sa.te(g),this.Aa[s].Nn(f*x,g,x*n,x*p)}for(this.nb.add(this.xa),p=c;p>=l+1;p--)f=this.nb.read(p-1),this.nb.write(p,f+n);for(this.mb.add(0),p=c-1;p>=l+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.yf&&this.mb.write(l,1)},o.prototype.lG=function(s,n,l){var c=-1;if(0>s&&(s=this.ea()),s>this.ea()||c>this.Ka(s)||l>n.length)throw h.i.ga("index out of bounds");if(l!=0){s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ka(s)),this.oc();var p=this.xa;this.fm(this.xa+l),this.oc();for(var f=0,g=this.description.Ba;f<g;f++){var w=this.description.Fd(f),x=h.sa.Wa(w);this.Aa[f].Wt(x*(this.Ca(s)+c+l),(p-this.Ca(s)-c)*x,this.Aa[f],x*(this.Ca(s)+c),!0,x),f==0?this.Aa[f].qC(x*(this.Ca(s)+c),l,n,0,!0):this.Aa[f].Yj(h.sa.te(w),(this.Ca(s)+c)*x,l*x)}for(this.vm()&&(this.Se.Wt(this.Ca(s)+c+l,p-this.Ca(s)-c,this.Se,this.Ca(s)+c,!0,1),this.Nj.Wt(this.Ca(s)+c+l,p-this.Ca(s)-c,this.Nj,this.Ca(s)+c,!0,1),this.Se.Yj(1,this.Ca(s)+c,l),this.Nj.Yj(-1,this.Ca(s)+c,l)),s+=1,n=this.ea();s<=n;s++)this.nb.write(s,this.nb.read(s)+l)}},o.prototype.xf=function(s,n,l){var c=this.ea();if(0>s&&(s=this.ea()),s>=c||n>this.Ka(s))throw h.i.ga("index out of bounds");s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ka(s));var p=this.xa;this.fm(this.xa+1),this.oc();var f=this.Ca(s);this.Aa[0].xj(2*(f+n),l,2*p),l=1;for(var g=this.description.Ba;l<g;l++){var w=this.description.Fd(l),x=h.sa.Wa(w);this.Aa[l].Nn(x*(f+n),h.sa.te(w),x,x*p)}for(s+=1;s<=c;s++)this.nb.write(s,this.nb.read(s)+1)},o.prototype.yB=function(s,n){var l=this.ea();if(0>s&&(s=l-1),s>=l||n>=this.Ka(s))throw h.i.ga("index out of bounds");this.oc();var c=this.Ca(s);0>n&&(n=this.Ka(s)-1),n=c+n,c=0;for(var p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.sa.Wa(this.description.Fd(c));this.Aa[c].Gn(f*n,f,f*this.xa)}for(;l>=s+1;l--)n=this.nb.read(l),this.nb.write(l,n-1);this.xa--,this.Rg--,this.Qc(1993)},o.prototype.pE=function(s,n,l,c){if(s=this.Ca(s)+n,(l=this.Ca(l)+c)<s||0>s||l>this.I()-1)throw h.i.O();n=0,(c=this.Ha()).Wb(s);do{for(;c.Ia()&&(s=c.ia(),c.xb()!=l);)n+=s=s.Rb();if(c.xb()==l)break}while(c.ab());return n},o.prototype.aO=function(s,n,l){if(n=this.Ca(s)+n,l=this.Ca(s)+l,0>n||l>this.I()-1)throw h.i.O();var c=this.Ha();if(n>l){if(!this.ec(s))throw h.i.O("cannot iterate across an open path");c.EB()}var p=s=0;c.Wb(n);do p+=s,s=c.ia().Rb();while(c.xb()!=l);return p},o.prototype.ng=function(){return h.si.im(this,null)},o.prototype.FS=function(s,n,l){for(var c=s;c<l-1;c++)if(this.ec(c))throw h.i.O("cannot interpolate across closed paths");if((c=this.description.Ba)!=1){var p=this.pE(s,n,l,void 0);if(p!=0)for(var f=1;f<c;f++){var g=this.description.ld(f);if(h.sa.gz(g)!=2)for(var w=h.sa.Wa(g),x=0;x<w;x++)this.HS(g,s,n,l,p,x)}}},o.prototype.ES=function(s,n,l){var c=this.description.Ba;if(c!=1){var p=this.aO(s,n,l);if(p!=0)for(var f=1;f<c;f++){var g=this.description.ld(f);if(h.sa.gz(g)!=2)for(var w=h.sa.Wa(g),x=0;x<w;x++)this.GS(g,s,n,l,p,x)}}},o.prototype.HS=function(s,n,l,c,p,f){var g=this.Ha(),w=this.Ca(n)+l;c=this.Ca(c)+void 0,n=this.Vc(s,w,f),l=this.Vc(s,c,f);var x=n,T=0;g.Wb(w);do if(g.Ia()){if(g.ia(),g.xb()==c)break;this.setAttribute(s,g.xb(),f,x),g.ni();do{if(w=g.ia(),g.kk()==c)return;T+=w=w.Rb(),x=h.mc.jq(n,l,T/p),g.Qn()||this.setAttribute(s,g.kk(),f,x)}while(g.Ia())}while(g.ab())},o.prototype.GS=function(s,n,l,c,p,f){var g=this.Ha(),w=this.Ca(n)+l;if((n=this.Ca(n)+c)!=w){c=this.Vc(s,w,f),l=this.Vc(s,n,f);var x=0;g.Wb(w),g.EB(),w=c;do{var T=g.ia();this.setAttribute(s,g.xb(),f,w),x+=w=T.Rb(),w=h.mc.jq(c,l,x/p)}while(g.kk()!=n)}},o.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},o.prototype.Pc=function(s){s instanceof h.Ed?this.TD(s,-1):this.rN(s)},o.prototype.TD=function(s,n){if(!this.B()&&!s.isIdentity()){this.oc();var l=this.Aa[0],c=new h.h,p=new h.h;if(0>n){var f=this.vm(),g=0;n=this.xa}else f=this.Av(n),g=this.Ca(n),n=this.Wc(n);for(;g<n;g++){if(c.x=l.read(2*g),c.y=l.read(2*g+1),f){var w=this.Nj.read(g);if(0<=w)switch(7&this.Se.read(g)){case 2:p.x=this.Td.read(w),p.y=this.Td.read(w+1),s.Gh(p,p),this.Td.write(w,p.x),this.Td.write(w+1,p.y),p.x=this.Td.read(w+3),p.y=this.Td.read(w+4),s.Gh(p,p),this.Td.write(w+3,p.x),this.Td.write(w+4,p.y);break;case 4:throw h.i.Ra()}}s.Gh(c,c),l.write(2*g,c.x),l.write(2*g+1,c.y)}this.Qc(1993)}},o.prototype.rN=function(s){if(!this.B()){this.se(1),this.oc();for(var n=this.Aa[0],l=this.Aa[1],c=new h.Od,p=new h.Od,f=this.vm(),g=0;g<this.xa;g++){if(c.x=n.read(2*g),c.y=n.read(2*g+1),c.z=l.read(g),f){var w=this.Nj.read(g);if(0<=w)switch(7&this.Se.read(g)){case 2:p.x=this.Td.read(w),p.y=this.Td.read(w+1),p.z=this.Td.read(w+2),p=s.hp(p),this.Td.write(w,p.x),this.Td.write(w+1,p.y),this.Td.write(w+1,p.z),p.x=this.Td.read(w+3),p.y=this.Td.read(w+4),p.z=this.Td.read(w+5),p=s.hp(p),this.Td.write(w+3,p.x),this.Td.write(w+4,p.y),this.Td.write(w+5,p.z);break;case 4:throw h.i.Ra()}}c=s.hp(c),n.write(2*g,c.x),n.write(2*g+1,c.y),l.write(g,c.z)}this.Qc(1993)}},o.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},o.prototype.qp=function(s){s.Og=!1,s.vq=this.vq,s.zq=this.zq,s.nb=this.nb!=null?h.ja.Dn(this.nb):null,s.mb=this.mb!=null?h.rn.Dn(this.mb):null,s.Nj=this.Nj!=null?h.ja.Dn(this.Nj):null,s.Se=this.Se!=null?h.rn.Dn(this.Se):null,s.Td=this.Td!=null?h.ce.Dn(this.Td):null,s.uq=this.uq,s.tq=this.tq,s.Cj=this.ck(1024)?null:this.Cj},o.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var s=this.Ha(),n=new h.Ex(0);s.ab();)for(;s.Ia();)n.add(s.ia().Rb());return this.uq=n.tm(),this.Nf(512,!1),n.tm()},o.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof o&&u.prototype.Nb.call(this,s)))return!1;var n=this.ea();return!(n!=s.ea()||this.nb!=null&&!this.nb.Nb(s.nb,0,n+1)||this.zq!=s.zq||this.mb!=null&&!this.mb.Nb(s.mb,0,n))&&u.prototype.Nb.call(this,s)},o.prototype.Ha=function(){return new h.TL(this)},o.prototype.dy=function(s){if(u.prototype.dy.call(this,s),this.vm())for(s=this.Ha();s.ab();)s.Ia()},o.prototype.Ap=function(s,n){if(u.prototype.Ap.call(this,s,n),this.vm())for(s=this.Ha();s.ab();)s.Ia()},o.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},o.prototype.Gv=function(s){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(s)):(4&this.mb.read(s))!=0)},o.prototype.Kr=function(s){return this.yf?(this.zu(),this.Cj.read(s)):0},o.prototype.zu=function(){if(this.ck(1024)){var s=this.ea();this.Cj==null?this.Cj=new h.ce(s):this.Cj.size!=s&&this.Cj.resize(s),s=new h.Ex(0);for(var n=new h.Ex(0),l=new h.h,c=0,p=this.Ha();p.ab();){for(n.reset(),this.D(this.Ca(p.gb),l);p.Ia();)n.add(p.ia().Sx(l.x,l.y));s.add(n.tm());var f=c++;this.Cj.write(f,n.tm())}this.tq=s.tm(),this.Nf(1024,!1)}},o.prototype.AR=function(){if(this.yf){this.hm();for(var s=this.ea(),n=0;n<s;n++)4&this.mb.read(n)}},o.prototype.hm=function(){if(this.ck(8)){this.zu();var s=this.ea();(this.mb==null||this.mb.size<s)&&(this.mb=h.Zc.Or(s+1));for(var n=1,l=0;l<s;l++){var c=this.Cj.read(l);l==0&&(n=0<c?1:-1),0<c*n?this.mb.uJ(l,4):this.mb.FE(l,4)}this.Nf(8,!1)}},o.prototype.nz=function(s){var n=this.gb,l=this.ea();if(0<=n&&n<l){if(s<this.Wc(n)){if(s>=this.Ca(n))return n;n--}else n++;if(0<=n&&n<l&&s>=this.Ca(n)&&s<this.Wc(n))return this.gb=n}if(5>l){for(n=0;n<l;n++)if(s<this.Wc(n))return this.gb=n;throw h.i.ga("corrupted geometry")}for(n=0,--l;l>n;){var c=n+(l-n>>1);if(s<this.Ca(c))l=c-1;else{if(!(s>=(n=this.Wc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.sz=function(){var s=this.I();if(!this.yf){s-=this.ea();for(var n=0,l=this.ea();n<l;n++)this.ec(n)&&s++}return s},o.prototype.tv=function(s){var n=this.Ka(s);return this.ec(s)||n--,n},o.prototype.Ja=function(){return new o(this.yf,this.description)},o.prototype.Eb=function(){return this.yf?2:1},o.prototype.K=function(){return this.yf?1736:1607},o.prototype.LJ=function(s){this.nb=s,this.Qc(16777215)},o.prototype.QR=function(){return this.vx(),this.Se},o.prototype.ER=function(){return this.vx(),this.mb},o.prototype.KJ=function(s){this.mb=s,this.Qc(16777215)},o.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Wc=function(s){return this.nb.read(s+1)},o.prototype.Ka=function(s){return this.nb.read(s+1)-this.nb.read(s)},o.prototype.Ca=function(s){return this.nb.read(s)},o.prototype.nu=function(s,n){this.Cb==null&&(this.Cb=new h.Wk),n=h.Mx.kW(n);var l=this.Cb.Hk;if(l!=null){if(!(l.Kk<s||n>l.MR()))return!0;this.Cb.tD(null)}return l=h.Mx.create(this,s,n),this.Cb.tD(l),!0},o.prototype.dc=function(){var s=u.prototype.dc.call(this);if(!this.Bc()){var n=this.ea();this.nb!=null&&this.nb.Cn(s,0,n+1),this.mb!=null&&this.mb.Cn(s,0,n)}return s},o.prototype.UF=function(s){return this.Se!=null?this.Se.read(s):1},o.prototype.cc=function(s,n,l){var c=this.nz(s);if(s==this.Wc(c)-1&&!this.ec(c))throw h.i.ga("index out of bounds");this.oc();var p=this.Se,f=1;if(p!=null&&(f=7&p.read(s)),f!==1)throw h.i.Ra();if(n.Qr(),n=n.get(),l?n.Pf(h.fe.pg()):n.Pf(this.description),c=s==this.Wc(c)-1&&this.ec(c)?this.Ca(c):s+1,p=new h.h,this.D(s,p),n.Ec(p),this.D(c,p),n.Rc(p),!l)for(l=1,p=this.description.Ba;l<p;l++){f=this.description.Fd(l);for(var g=h.sa.Wa(f),w=0;w<g;w++){var x=this.Vc(f,s,w);n.TB(f,w,x),x=this.Vc(f,c,w),n.JB(f,w,x)}}},o.prototype.Tj=function(s,n){if(s>=this.ea())throw h.i.O();if(this.B())n.Pa();else{if(this.Av(s))throw h.i.ga("not implemented");var l=this.vb(0),c=new h.h,p=new h.l;p.Pa();var f=this.Ca(s);for(s=this.Wc(s);f<s;f++)l.uc(2*f,c),p.$b(c);n.L(p)}},o.prototype.hj=function(s){return this.Cb==null&&(this.Cb=new h.Wk),!(s==0||16>this.I())&&(s=h.ua.iE(this),this.Cb.RM(s),!0)},o.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new h.Wk),this.Cb.Bo==null){this.Cb.sD(null);var s=h.ua.TN(this);this.Cb.sD(s)}},o.prototype.$o=function(s){this.zq=s},o.prototype.Kn=function(){return this.zq},o.prototype.yD=function(s){if(this==s)throw h.i.ga("MultiPathImpl.add");for(var n=this.ea(),l=0;l<s.ea();l++)this.addPath(s,l,!0),this.xU(n),n++},o.prototype.fO=function(s){var n=this.nz(s),l=this.Ca(n);if(l!=s){if(s>=(n=this.Wc(n))||s<l)throw h.i.ga("change_ring_start_point");for(var c=0,p=this.description.Ba;c<p;c++){var f=this.description.ld(c);f=h.sa.Wa(f),this.Aa[c].rotate(l*f,s*f,n*f)}}},o}(h.Fx);h.Xk=v}(U||(U={})),function(h){var k=function(v){function u(o){var s=v.call(this)||this;if(o!==void 0){if(o==null)throw h.i.O();s.description=o}else s.description=h.fe.pg();return s.xa=0,s}return yt(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.xa+1),this.Fh(this.xa-1,o)},u.prototype.Du=function(o,s){this.resize(this.xa+1);var n=new h.h;n.na(o,s),this.Db(this.xa-1,n)},u.prototype.Gd=function(o,s,n){if(n=0>n?o.I():n,0>s||s>o.I()||n<s)throw h.i.O();if(s!=n){this.Ll(o.description),n-=s;var l=this.xa;this.resize(this.xa+n),this.oc();for(var c=0,p=o.description.Ba;c<p;c++){var f=o.description.Fd(c),g=h.sa.Wa(f),w=this.vb(f);f=o.vb(f),w.On(l*g,f,s*g,n*g,!0,1,l*g)}}},u.prototype.CD=function(o,s){var n=o.length;if(s=0>s?n:s,0>n||0>s)throw h.i.O();if(s!=0){n=s-0,s=this.xa,this.resize(this.xa+n);for(var l=0;l<n;l++)this.Db(s+l,o[0+l])}},u.prototype.yB=function(o){if(0>o||o>=this.I())throw h.i.ga("index out of bounds");this.oc();for(var s=0,n=this.description.Ba;s<n;s++)if(this.Aa[s]!=null){var l=h.sa.Wa(this.description.Fd(s));this.Aa[s].Gn(l*o,l,l*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},u.prototype.resize=function(o){this.fm(o)},u.prototype.qp=function(){},u.prototype.Pa=function(){v.prototype.rD.call(this)},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(this.B())return;this.oc();for(var s=this.Aa[0],n=new h.h,l=0;l<this.xa;l++)n.x=s.read(2*l),n.y=s.read(2*l+1),o.Gh(n,n),s.write(2*l,n.x),s.write(2*l+1,n.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),s=this.Aa[0],n=this.Aa[1];var c=new h.Od;for(l=0;l<this.xa;l++){c.x=s.read(2*l),c.y=s.read(2*l+1),c.z=n.read(l);var p=o.hp(c);s.write(2*l,p.x),s.write(2*l+1,p.y),n.write(l,p.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&v.prototype.Nb.call(this,o)},u.prototype.gW=function(o,s){var n=this.xa;if(n=Math.min(n,s+1e3),0>s||s>=this.xa||n<s||o.length!=1e3)throw h.i.O();var l=n-s,c=[];for(this.vb(0).Xw(2*s,2*l,c,0,!0),s=0;s<l;s++)o[s]=h.h.construct(c[2*s],c[2*s+1]);return n},u.prototype.Zx=function(){},u.prototype.ey=function(){},u.prototype.nu=function(){return!1},u.prototype.hj=function(){return!1},u.prototype.ng=function(){return null},u}(h.Fx);h.ee=k}(U||(U={})),function(h){var k;(k=h.dL||(h.dL={}))[k.NotDetermined=0]="NotDetermined",k[k.Structure=1]="Structure",k[k.DegenerateSegments=2]="DegenerateSegments",k[k.Clustering=3]="Clustering",k[k.Cracking=4]="Cracking",k[k.CrossOver=5]="CrossOver",k[k.RingOrientation=6]="RingOrientation",k[k.RingOrder=7]="RingOrder",k[k.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",k[k.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",k[k.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var v=function(){function u(o,s,n){o===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=o,this.Lo=s,this.Mo=n)}return u.prototype.Yt=function(o){this.Lj=o.Lj,this.Lo=o.Lo,this.Mo=o.Mo},u}();h.Nd=v}(U||(U={})),function(h){h.P=function(){function k(){}return k.assert=function(v){if(v===!1)throw h.i.BK()},k.XJ=function(v){return isNaN(v)?NaN:v===0?v:0<v?1:-1},k.Hu=function(v){var u;u===void 0&&(u=0);for(var o=[],s=0;s<v;s++)o[s]=k.mg(2,u);return o},k.mg=function(v,u){u===void 0&&(u=0);for(var o=[],s=0;s<v;s++)o[s]=u;return o},k.bv=function(v,u){var o,s;for(o===void 0&&(o=0),s===void 0&&(s=v.length-1);o<=s;o++)v[o]=u},k.Tk=function(v,u,o){return v<u?u:v>o?o:v},k.Vh=function(v,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&v):(o<<5)+o+(255&v))<<5)+o+(v>>8&255))<<5)+o+(v>>16&255))<<5)+o+(v>>24&255)&2147483647},k.wj=function(){throw Error("Not Implemented")},k.XA=function(v){return k.WT(v)+12345&2147483647},k.SG=function(v){var u=32,o=v%k.Px|0,s=v/k.Px|0;return(u&=63)==0?v:(32>u?(v=o>>>u|s<<32-u,u=s>>u):(v=s>>u-32,u=0<=s?0:-1),u*k.Px+(v>>>0))},k.WT=function(v){var u=1103515245,o=65535&u;return((u-o)*(v|=0)|0)+(o*v|0)|0},k.truncate=function(v){return 0>v?-1*Math.floor(Math.abs(v)):Math.floor(v)},k.MAX_SAFE_INTEGER=Math.pow(2,53)-1,k.MIN_SAFE_INTEGER=-k.MAX_SAFE_INTEGER,k.QC=65536,k.Px=k.QC*k.QC,k}()}(U||(U={})),function(h){var k;(k=h.xL||(h.xL={}))[k.Project=0]="Project",k[k.Union=1]="Union",k[k.Difference=2]="Difference",k[k.Proximity2D=3]="Proximity2D",k[k.Relate=4]="Relate",k[k.Equals=5]="Equals",k[k.Disjoint=6]="Disjoint",k[k.Intersects=7]="Intersects",k[k.Within=8]="Within",k[k.Contains=9]="Contains",k[k.Crosses=10]="Crosses",k[k.Touches=11]="Touches",k[k.Overlaps=12]="Overlaps",k[k.Buffer=13]="Buffer",k[k.Distance=14]="Distance",k[k.Intersection=15]="Intersection",k[k.Clip=16]="Clip",k[k.Cut=17]="Cut",k[k.DensifyByLength=18]="DensifyByLength",k[k.DensifyByAngle=19]="DensifyByAngle",k[k.LabelPoint=20]="LabelPoint",k[k.GeodesicBuffer=21]="GeodesicBuffer",k[k.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",k[k.ShapePreservingDensify=23]="ShapePreservingDensify",k[k.GeodeticLength=24]="GeodeticLength",k[k.GeodeticArea=25]="GeodeticArea",k[k.Simplify=26]="Simplify",k[k.SimplifyOGC=27]="SimplifyOGC",k[k.Offset=28]="Offset",k[k.Generalize=29]="Generalize",k[k.SymmetricDifference=30]="SymmetricDifference",k[k.ConvexHull=31]="ConvexHull",k[k.Boundary=32]="Boundary",k[k.SimpleRelation=33]="SimpleRelation";var v=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.yn=function(){},u.prototype.Ku=function(){return!1},u}();h.Ge=v}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c){return o instanceof h.ba?(c=new h.$c(o),this.W(c,s,[n],!1,l).next()):l===!0?(n=new h.wC(o,s,n,!1,c),h.Ih.local().W(n,s,c)):new h.wC(o,s,n,!1,c)},u.instance=null,u}(h.Ge);h.vC=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n,l){this.za=-1,this.Sd=u,this.Vz=o,this.Es=s,this.nT=new h.l,this.nT.Pa(),this.ho=-1,this.Vb=l}return v.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(u,this.Es[this.ho]);return null},v.prototype.Ma=function(){return this.za},v.prototype.buffer=function(u,o){return h.CK.buffer(u,o,this.Vz,NaN,96,this.Vb)},v.prototype.re=function(){},v}();h.wC=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l).next()):new h.gL(o,s,n,l)},u.instance=null,u}(h.Ge);h.fL=k}(U||(U={})),function(h){var k=function(){function v(u,o,s){if(this.za=-1,u==null)throw h.i.O();this.aa=o,this.Ak=u,this.ra=h.ua.Xd(s,o,!1)}return v.prototype.next=function(){var u;return(u=this.Ak.next())!=null?(this.za=this.Ak.Ma(),h.Vd.clip(u,this.aa,this.ra,0)):null},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.gL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n){return o instanceof h.ba?h.yC.mE(o):new h.yC(s,o,n)},u.instance=null,u}(h.Ge);h.xC=k}(U||(U={})),function(h){var k=function(){function v(u,o,s){if(this.pA=new h.au,this.za=-1,o==null)throw h.i.O();this.YG=u,this.Jc=!1,this.Ak=o,this.Vb=s}return v.prototype.next=function(){if(this.YG){if(!this.Jc){var u=this.ZN(this.Ak);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.Ak.next())!=null)return this.za=this.Ak.Ma(),v.mE(u);this.Jc=!0}return null},v.prototype.Ma=function(){return this.za},v.prototype.ZN=function(u){for(var o;(o=u.next())!=null;)this.pA.Ib(o);return this.pA.YQ()},v.prototype.re=function(){if(!this.Jc){if(!this.YG)throw h.i.ga("Invalid call for non merging convex hull.");var u=this.Ak.next();if(u==null)throw h.i.ga("Expects a non-null geometry.");this.pA.Ib(u)}},v.mE=function(u){if(v.QS(u))return u;var o=u.K();if(h.Xk.zd(o))return(o=new h.Ua(u.description)).pc(u,!0),o;if(o==550&&u.I()==2){var s=new h.Ta;return o=new h.Ua(u.description),u.we(0,s),o.nf(s),u.we(1,s),o.lineTo(s),o}return h.au.MO(u)},v.QS=function(u){if(u.B())return!0;var o=u.K();return o==33||o==197||!h.Xk.zd(o)&&(o==550?u.I()==1:o==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||h.au.EG(u,0)))},v}();h.yC=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c){return new h.iL(o,s,n,l,c)},u.instance=null,u}(h.Ge);h.hL=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n,l){if(this.Vf=null,o==null||s==null)throw h.i.ga("invalid argument");this.kT=u,this.iA=o,this.gH=s,u=h.ua.ov(o,s),this.ra=h.ua.Xd(n,u,!0),this.fH=-1,this.od=l}return v.prototype.Ma=function(){return 0},v.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},v.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},v.prototype.OQ=function(){var u=new h.Ua,o=new h.Ua,s=new h.Ua;this.Vf.push(u),this.Vf.push(o);var n=[];h.GK.EK(this.kT,this.iA,this.gH,this.ra,n,this.od);for(var l=0;l<n.length;l++){var c=n[l];if(c.ct==0)u.add(c.Y,!1);else if(c.ct==1||c.ct==2)o.add(c.Y,!1);else if(c.ct==3)this.Vf.push(c.Y);else{if(c.ct!=4)throw h.i.ga("internal");s.add(c.Y,!1)}}s.B()||u.B()&&o.B()&&!(3<=this.Vf.length)||this.Vf.push(s),u.B()&&o.B()&&3>this.Vf.length&&(this.Vf.length=0)},v.prototype.NQ=function(){var u=new h.ja(0),o=new h.hd,s=o.WE(),n=o.Ib(this.iA),l=o.Ib(this.gH),c=new h.Hg;try{c.Gt(o,this.ra,this.od),c.fl(s,n,l,u);var p=o.Ke(n),f=new h.Ea,g=new h.Ea;for(this.Vf.length=0,this.Vf.push(f),this.Vf.push(g),n=0;n<u.size;n++){var w=new h.hd,x=w.Ib(p),T=w.Ib(o.Ke(u.get(n)));c.fr(w,this.od);var E=c.Cv(x,T),O=w.Ke(E);if(!O.B()){var C=o.FF(u.get(n),s);C==2?f.add(O,!1):C==1?g.add(O,!1):this.Vf.push(O);var N=new h.hd;x=N.Ib(p),T=N.Ib(o.Ke(u.get(n))),c.fr(N,this.od),p=N.Ke(c.km(x,T))}}!p.B()&&0<u.size&&this.Vf.push(p),f.B()&&g.B()&&(this.Vf.length=0)}finally{c.Wg()}},v.prototype.re=function(){},v}();h.iL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n){if(o instanceof h.ba)return o=new h.$c(o),this.W(o,s,n).next();if(0>=s)throw h.i.O();return new h.jL(o,s,n)},u.instance=null,u}(h.Ge);h.Zl=k}(U||(U={})),function(h){var k=function(){function v(u,o){this.za=-1,this.Sd=u,this.Rs=o}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(u)):null},v.prototype.IP=function(u){if(u.B()||1>u.Eb())return u;var o=u.K();if(o==1736||o==1607)return this.Iy(u);if(h.ba.zd(o))return this.KP(u);if(o==197)return this.JP(u);throw h.i.Ra()},v.prototype.KP=function(u){if(u.Rb()<=this.Rs)return u;var o=new h.Ua(u.description);return o.pc(u,!0),this.Iy(o)},v.prototype.JP=function(u){var o=new h.Ea(u.description);o.bd(u,!1);var s=new h.l;return u.A(s),u=s.da(),s.S()<=this.Rs&&u<=this.Rs?o:this.Iy(o)},v.prototype.Iy=function(u){for(var o=u.Ja(),s=u.Ha();s.ab();)for(var n=!0;s.Ia();){var l=s.ia();if(l.K()!=322)throw h.i.ga("not implemented");var c=s.Qn(),p=l.Rb();if(p>this.Rs){var f=Math.ceil(p/this.Rs);p=new h.Ta(u.description),n&&(l.Vo(p),o.nf(p));var g=n=1/f,w=0;for(--f;w<f;w++)l.Vw(g,p),o.lineTo(p),g+=n;c?o.Cp():(l.Ro(p),o.lineTo(p))}else c?o.Cp():o.pc(l,n);n=!1}return o},v.prototype.re=function(){},v}();h.jL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),s=new h.$c(s),this.W(o,s,n,l).next()):new h.kL(o,s,n,l)},u.km=function(o,s,n,l){if(o.B()||s.B())return o;var c=o.Eb(),p=s.Eb();if(c>p)return o;var f=o.K(),g=s.K(),w=new h.l,x=new h.l,T=new h.l;o.A(w),s.A(x),T.L(w),T.$b(x);var E=(T=h.ua.Xd(n,T,!0))*Math.sqrt(2)*1.00001,O=new h.l;if(O.L(w),O.X(E,E),!O.isIntersecting(x))return o;if(c==1&&p==2)return u.FV(o,s,g,n,l);if(f==33)switch(h.Xk.zd(g)?(n=new h.Ua(s.description),n.pc(s,!0)):n=s,g){case 1736:return u.SU(o,n,T);case 1607:return u.TU(o,n,T);case 550:return u.QU(o,n,T);case 197:return u.PU(o,n,T);case 33:return u.RU(o,n,T);default:throw h.i.O()}else if(f==550)switch(g){case 1736:return u.iU(o,s,T);case 197:return u.gU(o,s,T);case 33:return u.hU(o,s,T)}return h.Hg.km(o,s,n,l)},u.SU=function(o,s,n){return h.jd.FG(s,o,n)==0?o:o.Ja()},u.TU=function(o,s,n){var l=o.D();s=s.Ha();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,f=new h.l;s.ab();)for(;s.Ia();){var g=s.ia();if(g.A(f),f.X(c,c),f.contains(l)){if(g.ss(l,n))return o.Ja();var w=g.bc();if(h.h.zc(l,w)<=p||(w=g.xc(),h.h.zc(l,w)<=p))return o.Ja()}}return o},u.QU=function(o,s,n){var l=s.vb(0);s=s.I();var c=o.D(),p=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<s;f++)if(l.uc(2*f,p),h.h.zc(p,c)<=n)return o.Ja();return o},u.PU=function(o,s,n){var l=new h.l;return s.A(l),l.X(n,n),s=o.D(),l.contains(s)?o.Ja():o},u.RU=function(o,s,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D();return s=s.D(),h.h.zc(l,s)<=n?o.Ja():o},u.iU=function(o,s,n){var l=new h.l;s.A(l),l.X(n,n);for(var c=o.I(),p=!1,f=[],g=0;g<c;g++)f[g]=!1;var w=new h.h;for(g=0;g<c;g++)o.D(g,w),l.contains(w)&&h.jd.Zd(s,w,n)!=0&&(p=!0,f[g]=!0);if(!p)return o;for(s=o.Ja(),g=0;g<c;g++)f[g]||s.Gd(o,g,g+1);return s},u.gU=function(o,s,n){var l=new h.l;s.A(l),l.X(n,n),s=o.I();var c=!1;n=[];for(var p=0;p<s;p++)n[p]=!1;var f=new h.h;for(p=0;p<s;p++)o.D(p,f),l.contains(f)&&(c=!0,n[p]=!0);if(!c)return o;for(l=o.Ja(),p=0;p<s;p++)n[p]||l.Gd(o,p,p+1);return l},u.hU=function(o,s,n){var l=o.vb(0),c=o.I(),p=s.D(),f=new h.h,g=!1;s=[];for(var w=0;w<c;w++)s[w]=!1;for(n=(w=n*Math.sqrt(2)*1.00001)*w,w=0;w<c;w++)l.uc(2*w,f),h.h.zc(f,p)<=n&&(g=!0,s[w]=!0);if(!g)return o;for(l=o.Ja(),w=0;w<c;w++)s[w]||l.Gd(o,w,w+1);return l},u.FV=function(o,s,n,l,c){var p=new h.Hh;o.dn(p);var f=new h.l;return s.A(f),p.$b(f),p.X(.1*p.S(),.1*p.da()),(f=new h.Ea).bd(p,!1),n==1736?f.add(s,!0):f.bd(s,!0),h.Zj.local().W(o,f,l,c)},u.instance=null,u}(h.Ge);h.mp=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n){this.vs=o==null,this.za=-1,this.Sd=u,this.Vz=s,this.rT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.mp.km(u,this.rT,this.Vz,this.Vb)):null;var u},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.kL=k}(U||(U={})),function(h){var k=function(){function u(o){this.od=o,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return u.prototype.Pt=function(){var o=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=o,o=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=o,o=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=o,o=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=o},u.prototype.$P=function(o,s){if(this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");var n=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(o.K())&&h.ba.Ic(s.K())?o.I()>s.I()?this.bE(o,s,n):(this.Pt(),o=this.bE(s,o,n),this.Pt(),o):o.K()==550&&h.ba.Ic(s.K())?(o=this.cE(s,o,n),this.Pt(),o):s.K()==550&&h.ba.Ic(o.K())?this.cE(o,s,n):o.K()==550&&s.K()==550?o.I()>s.I()?this.dE(o,s):(this.Pt(),o=this.dE(s,o),this.Pt(),o):0},u.prototype.bE=function(o,s,n){var l=o.Ha(),c=s.Ha(),p=new h.l,f=new h.l,g=17976931348623157e292;if(!n&&this.lY(o,s,l,c))return 0;for(;l.ab();)for(;l.Ia();)if((o=l.ia()).A(p),!(p.px(this.qh)>g)){for(;c.ab();)for(;c.Ia();)if((s=c.ia()).A(f),p.px(f)<g&&(s=o.ub(s,n),(s*=s)<g)){if(s==0)return 0;g=s}c.aj()}return Math.sqrt(g)},u.prototype.cE=function(o,s,n){var l=o.Ha(),c=new h.l,p=17976931348623157e292,f=new h.h,g=s.I();for(n=!n&&o.K()==1736;l.ab();)for(;l.Ia();){var w=l.ia();if(w.A(c),!(1<g&&c.px(this.qh)>p)){for(var x=0;x<g;x++){if(s.D(x,f),n&&h.jd.Zd(o,f,0)!=0)return 0;var T=w.ge(f,!1);if(f.sub(w.ic(T)),(T=f.Uk())<p){if(T==0)return 0;p=T}}n=!1}}return Math.sqrt(p)},u.prototype.dE=function(o,s){for(var n,l=17976931348623157e292,c=new h.h,p=new h.h,f=o.I(),g=s.I(),w=0;w<f;w++)if(o.D(w,c),!(1<g&&this.qh.dK(c)>l)){for(var x=0;x<g;x++)if(s.D(x,p),(n=h.h.zc(c,p))<l){if(n==0)return 0;l=n}}return Math.sqrt(l)},u.prototype.lY=function(o,s,n,l){if(o.K()==1736){for(;l.ab();)if(l.Ia()){var c=l.ia();if(h.jd.Zd(o,c.xc(),0)!=0)return!0}l.aj()}if(s.K()==1736){for(;n.ab();)if(n.Ia()&&(o=n.ia(),h.jd.Zd(s,o.xc(),0)!=0))return!0;n.aj()}return!1},u.prototype.im=function(o,s){return o.B()||s.B()?NaN:(o.A(this.Dj),s.A(this.qh),this.$P(o,s))},u}(),v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return yt(o,u),o.prototype.W=function(s,n,l){if(s==null||n==null)throw h.i.O();if(s.B()||n.B())return NaN;var c=s.K(),p=n.K();if(c==33){if(p==33)return h.h.ub(s.D(),n.D());if(p==197)return l=new h.l,n.A(l),l.ub(s.D());(c=new h.ee).add(s),s=c}else if(c==197){if(p==197)return p=new h.l,s.A(p),l=new h.l,n.A(l),l.ub(p);(c=new h.Ea).bd(s,!1),s=c}return p==33?((p=new h.ee).add(n),n=p):p==197&&((p=new h.Ea).bd(n,!1),n=p),new k(l).im(s,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 14},o.instance=null,o}(h.Ge);h.lL=v}(U||(U={})),function(h){var k=function(){function v(u,o,s,n){this.uH=u,this.yH=o,this.od=n,this.VG=s}return v.prototype.next=function(){var u=this.uH.next();return u==null?null:this.uC(u)},v.prototype.Ma=function(){return this.uH.Ma()},v.prototype.uC=function(u){var o=u.K();if(h.ba.Tn(o))return u;if(o==197)return(o=new h.Ea(u.description)).bd(u,!1),this.uC(o);if(u.B())return u;if(u==null)throw h.i.Ra();o=u.Ja();for(var s=new h.zb,n=0,l=u.ea();n<l;n++)this.OK(u,n,o,s);return o},v.prototype.OK=function(u,o,s,n){if(!(2>u.Ka(o))){var l=u.Ca(o),c=u.Wc(o)-1,p=u.vb(0),f=u.ec(o),g=new h.ja(0);g.Jb(u.Ka(o)+1);var w=new h.ja(0);for(w.Jb(u.Ka(o)+1),g.add(f?l:c),g.add(l),l=new h.h;1<g.size;){var x=g.Gc();g.Jf();var T=g.Gc();u.D(x,l),n.Ec(l),u.D(T,l),n.Rc(l),0<=(T=this.NK(n,l,p,x,T,c))?(g.add(T),g.add(x)):w.add(x)}if(f||w.add(g.get(0)),w.size==g.size)s.addPath(u,o,!0);else if(2<=w.size&&(!this.VG||w.size!=2||!(f||h.h.ub(u.Oa(w.get(0)),u.Oa(w.get(1)))<=this.yH))){for(o=new h.Ta,n=0,c=w.size;n<c;n++)u.we(w.get(n),o),n==0?s.nf(o):s.lineTo(o);f&&(this.VG||w.size!=2||s.lineTo(o),s.Cp())}}},v.prototype.NK=function(u,o,s,n,l,c){var p=l-1;for(l<=n&&(p=c),c=l=-1,n+=1;n<=p;n++){s.uc(2*n,o);var f=o.x,g=o.y;u.ic(u.ge(o,!1),o),o.x-=f,o.y-=g,(f=o.length())>this.yH&&f>c&&(l=n,c=f)}return l},v.prototype.re=function(){},v}();h.mL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 29},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l).next()):new h.mL(o,s,n,l)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.zC=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c,p,f,g){return o instanceof h.ba?(g=new h.$c(o),this.W(g,s,n,[l],c,p,!1,f).next()):f===!0?(n=new h.BC(o,s,n,l,c,!1,!1,g),h.Ih.local().W(n,s,g)):new h.BC(o,s,n,l,c,!1,!1,g)},u.instance=null,u}(h.Ge);h.AC=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n,l,c,p,f){if(c)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.wg=o,this.Ae=s,this.Es=n,this.bo=l,this.ho=-1,this.Vb=f,this.oT=new h.l,this.oT.Pa()}return v.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(u,this.Es[this.ho]);return null},v.prototype.Ma=function(){return this.za},v.prototype.VQ=function(u,o){return h.QK.buffer(u,this.wg,this.Ae,o,this.bo,this.Vb)},v.prototype.re=function(){},v}();h.BC=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n){if(s==null)throw h.i.O();if(o.B()||1>o.Eb())return 0;if(n==4)throw h.i.Fe();var l=h.cb.tc(s),c=h.cb.xv(l),p=h.cb.gv(l);c*=2-c;var f=l.Id().ci,g=o.K();if(g==1736||g==197)var w=o.ng();else h.ba.zd(g)?(w=new h.Ua(o.description)).pc(o,!0):w=o;if(l.Nb(s)==0){if(h.cb.Xc(s)){w=h.Jh.nj(w,s),g==1607&&w==o&&(w=h.ba.kg(o)),o=new h.Oc,h.cb.ih(s).en(o),g=0;for(var x=w.I();g<x;g++){var T=w.Oa(g);T.x=h.Jh.an(T.x,o),w.Db(g,T)}}o=w.Ja(),w=h.Jh.RI(s,l,w,o)?o:h.cb.Bh(w,s,l)}return this.cQ(w,n,p,c,f)},u.prototype.cQ=function(o,s,n,l,c){var p=new h.ha(0),f=0;for(o=o.Ha();o.ab();)for(;o.Ia();){var g=o.ia(),w=g.bc();g=g.xc(),w.scale(c),g.scale(c),h.kb.xd(n,l,w.x,w.y,g.x,g.y,p,null,null,s),f+=p.u}return f},u.instance=null,u}(h.Ge);h.qL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l,c).next()):new h.oL(o,n,l,s,-1,-1,c)},u.instance=null,u}(h.Ge);h.nL=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n,l,c){if(0<c||s!=4&&0<l)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.wg=o,this.Ae=s,this.yT=n,this.xT=l}return v.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(u);return null},v.prototype.Ma=function(){return this.za},v.prototype.Uy=function(u){return h.ej.Sr(u,this.wg,this.Ae,this.yT,this.xT,this.Vb)},v.prototype.re=function(){},v}();h.oL=k}(U||(U={})),function(h){(function(k){k[k.Unknown=0]="Unknown",k[k.Contains=1]="Contains",k[k.Within=2]="Within",k[k.Equals=3]="Equals",k[k.Disjoint=4]="Disjoint",k[k.Touches=8]="Touches",k[k.Crosses=16]="Crosses",k[k.Overlaps=32]="Overlaps",k[k.NoThisRelation=64]="NoThisRelation",k[k.Intersects=1073741824]="Intersects",k[k.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.YK||(h.YK={})),h.rL=function(){function k(){}return k.iW=function(v,u){var o=v.K(),s=u.K();if(h.ba.zj(o)){var n=v.Cb;if(n!=null&&(n=n.Hk)!=null){if(s==33){var l=u.D();n=n.Uo(l.x,l.y)}else l=new h.l,u.A(l),n=n.To(l);if(n==1)return 1;if(n==0)return 4}}if(h.ba.zj(s)&&(n=u.Cb)!=null&&(n=n.Hk)!=null){if(o==33?(v=v.D(),n=n.Uo(v.x,v.y)):(u=new h.l,v.A(u),n=n.To(u)),n==1)return 2;if(n==0)return 4}return 0},k}()}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(o,s,n,l,c){return o instanceof h.ba?(o=new h.$c(o),s=new h.$c(s),this.W(o,s,n,l,c===void 0?-1:c).next()):c===void 0?new h.CC(o,s,n,l,-1):new h.CC(o,s,n,l,c)},u.prototype.yn=function(o,s,n){this.Ku(o)&&(s=h.ua.mj(s,o,!1),o.hj(n)||o.nu(s,n))},u.prototype.Ku=function(o){return h.Mx.uE(o)},u.instance=null,u}(h.Ge);h.Zj=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n,l){if(this.vs=o==null,this.za=-1,this.Sd=u,this.wg=s,this.Pe=o.next(),this.Fj=this.Pe.K(),this.Vb=n,this.Hi=l,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return v.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var u=this.Bw.next();if(u!=null)return u;this.Bw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?u=this.Fa(u):(this.Bw=this.KS(u),u=this.Bw.next()),u;return null},v.prototype.Ma=function(){return this.za},v.prototype.Fa=function(u){var o=this.uK(u);if(o!=null)return o;o=h.ua.ov(this.Pe,u);var s=h.ua.Xd(this.wg,o,!0);o=new h.l,this.Pe.A(o);var n=new h.l;return u.A(n),o.X(2*s,2*s),o.Fa(n),o.X(100*s,100*s),s=h.Vd.clip(this.Pe,o,0,0),u=h.Vd.clip(u,o,0,0),h.Hg.Cv(u,s,this.wg,this.Vb)},v.prototype.KI=function(u,o,s){var n=0;if(1&o)s[0]==null&&(s[0]=new h.ee(u)),n++;else for(var l=0;l<s.length-1;l++)s[l]=s[l+1];if(2&o)s[n]==null&&(s[n]=new h.Ua(u)),n++;else for(l=n;l<s.length-1;l++)s[l]=s[l+1];if(4&o)s[n]==null&&(s[n]=new h.Ea(u)),n++;else for(l=n;l<s.length-1;l++)s[l]=s[l+1];if(n!=3){for(u=[],l=0;l<n;l++)u[l]=s[l];return new h.$c(u)}return new h.$c(s)},v.prototype.KS=function(u){var o=this.uK(u);if(o!=null){var s=[null,null,null];return s[o.Eb()]=o,this.KI(u.description,this.Hi,s)}o=h.ua.ov(this.Pe,u),s=h.ua.Xd(this.wg,o,!0),o=new h.l,this.Pe.A(o),o.X(2*s,2*s);var n=new h.l;return u.A(n),o.Fa(n),o.X(100*s,100*s),s=h.Vd.clip(this.Pe,o,0,0),o=h.Vd.clip(u,o,0,0),s=h.Hg.Kz(o,s,this.wg,this.Vb),this.KI(u.description,this.Hi,s)},v.prototype.uK=function(u){var o=h.ua.ov(u,this.Pe),s=h.ua.Xd(this.wg,o,!0);o=u.K();var n=u.B(),l=this.Pe.B();if(!(l=n||l)){l=new h.l,u.A(l);var c=new h.l;this.Pe.A(c),c.X(2*s,2*s),l=!l.isIntersecting(c)}if(!l)if((c=h.rL.iW(this.Pe,u))==4)l=!0;else{if(2&c)return this.Pe;if(1&c)return u}if(l)return(s=h.ba.uf(o))<(l=h.ba.uf(this.Fj))?v.CB(u,n):s>l||s==0&&o==550&&this.Fj==33?this.iJ():v.CB(u,n);if((this.Hi==-1||this.Hi==4)&&o==197&&this.Fj==197)return s=this.Pe,o=new h.l,u.A(o),n=new h.l,s.A(n),o.Fa(n),s=new h.Hh,u.copyTo(s),s.Zo(o),s;if(o==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(o)==0)return n=o==197?u:this.Pe,u=o==197?this.Pe:u,o=new h.l,n.A(o),h.Vd.clip(u,o,s,0);if(h.ba.uf(o)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(o)&&h.ba.uf(this.Fj)==0){if(s=h.ua.mj(this.wg,u,!1),o==550||o==33)return h.Hg.uG(u,this.Pe,s);if(this.Fj==550||this.Fj==33)return h.Hg.uG(this.Pe,u,s);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||o!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||o!=1736||this.Fj!=1607?null:this.rK(this.Pe,u):this.rK(u,this.Pe)},v.prototype.rK=function(u,o){var s=u,n=o,l=h.ua.mj(this.wg,o,!1),c=new h.l;n.A(c);var p=new h.l;s.A(p),p.X(2*l,2*l),c.Fa(p),c.X(10*l,10*l),s=u=h.Vd.clip(u,c,0,0),p=new h.ja(0);var f=-1,g=n.Cb;if(g!=null){var w=g.Hk;if(w!=null){f=0,p.Jb(s.I()+s.ea());for(var x=new h.l,T=s.Ha();T.ab();)for(;T.Ia();){T.ia().A(x);var E=w.To(x);E==1?p.add(1):E==0?p.add(0):(p.add(-1),f++)}}}if(5<o.I()&&(g=(n=o=h.Vd.clip(o,c,0,0)).Cb),0>f&&(f=s.sz()),c=s.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ha(),g!=null&&g.Gb!=null&&(c=g.Gb),c==null&&20<n.I()&&(c=h.ua.iE(n)),u=u.Ja(),n=null,g=s.Ha(),w=[0,0,0,0,0,0,0,0,0],x=new h.ce(0),T=new h.jg,E=-1;for(var O=0,C=0,N=0<p.size,D=-1;g.ab();){D=g.gb;var z=0;for(E=-1,O=0;g.Ia();){var R=N?h.P.truncate(p.get(C)):-1;C++;var G=g.ia();if(0>R){if(c!=null)for(n==null?n=c.qR(G,l):n.Wo(G,l),R=n.next();R!=-1;R=n.next()){f.Wb(c.ka(R)),R=f.ia();var W=G.Fa(R,null,w,null,l);for(R=0;R<W;R++)x.add(w[R])}else for(f.aj();f.ab();)for(;f.Ia();)for(R=f.ia(),W=G.Fa(R,null,w,null,l),R=0;R<W;R++)x.add(w[R]);if(0<x.size){x.Wd(0,x.size,function(ce,ue){return ce-ue});var H=0;x.add(1),W=-1,R=0;for(var ee=x.size;R<ee;R++){var X=x.get(R);if(X!=H){var ne=!1;if(H!=0||X!=1?(G.dh(H,X,T),H=T.get()):(H=G,ne=!0),2<=z){if(u.Fr(s,D,E,O,z==3),this.LD(o,H.bc(),l)!=1&&this.MD(o,H,l)!=1)return null;u.pc(H,!1),z=1,O=0}else switch(W=this.MD(o,H,l),W){case 1:ne?2>z?(E=g.xb()-s.Ca(D),O=1,z=z==0?3:2):O++:(u.pc(H,z==0),z=1);break;case 0:z=0,E=-1,O=0;break;default:return null}H=X}}}else{if(0>(R=this.LD(o,G.bc(),l)))return null;R==1?(2>z&&(E=g.xb()-s.Ca(D),z=z==0?3:2),O++):(E=-1,O=0)}x.clear(!1)}else R!=0&&R==1&&(z==0?(z=3,E=g.xb()-s.Ca(D)):z==1?(z=2,E=g.xb()-s.Ca(D)):O++)}2<=z&&(u.Fr(s,D,E,O,z==3),E=-1)}return u},v.prototype.LD=function(u,o,s){return h.Fg.ym(u,o,s)},v.prototype.MD=function(u,o,s){var n=o.bc();o=o.xc();var l=h.Fg.ym(u,n,s),c=h.Fg.ym(u,o,s);return l==1&&c==0||l==0&&c==1?-1:l==0||c==0?0:l==1||c==1?1:((l=new h.h).add(n,o),l.scale(.5),(u=h.Fg.ym(u,l,s))==0?0:u==1?1:-1)},v.CB=function(u,o){return o?u:u.Ja()},v.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},v.prototype.re=function(){},v}();h.CC=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c,p,f){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l,c,p,f).next()):new h.sL(o,s,n,l,c,p,f)},u.instance=null,u}(h.Ge);h.DC=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n,l,c,p){this.za=-1,this.Sd=u,this.Oj=o,this.La=s,this.Mi=n,this.xA=l,this.pH=c,this.od=p}return v.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.eL(u)):null},v.prototype.Ma=function(){return this.za},v.prototype.eL=function(u){var o=0>=this.pH?h.ua.mj(this.Oj,u,!1):this.pH;return h.DK.W(u,this.La,this.Mi,this.xA,o,this.od)},v.prototype.re=function(){},v}();h.sL=k}(U||(U={})),function(h){var k;(k=h.IK||(h.IK={}))[k.clipToDomainOnly=1]="clipToDomainOnly",k[k.clipWithHorizon=2]="clipWithHorizon",k[k.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return yt(o,u),o.prototype.K=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.W=function(s,n,l){return s instanceof h.ba?(s=new h.$c(s),this.W(s,n,l).next()):new h.tL(s,n,l)},o.prototype.transform=function(s,n,l,c){return h.du.transform(s,n,l,c,!0)},o.prototype.St=function(s,n,l,c){return h.du.St(s,n,l,c)},o.instance=null,o}(h.Ge);h.Gx=v}(U||(U={})),function(h){var k=function(){function v(u,o,s){this.za=-1,this.Sd=u,this.HT=o,this.od=s}return v.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),h.du.Bh(u,this.HT,this.od)):null},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.tL=k}(U||(U={})),function(h){var k=function(){function u(){}return u.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},u.prototype.vQ=function(o,s,n){for(o.Wb(s,n);o.Ia();){var l=o.ia();if((l=l.Rb())!=0)return o.xb()}for(o.Wb(s,n);o.zz();)if((l=(l=o.ni()).Rb())!=0)return o.xb();return-1},u.prototype.wQ=function(o,s){for(o.Wb(s,-1);o.zz();)if(o.ni().Rb()!=0)return o.xb();return-1},u.prototype.uQ=function(o,s){for(o.Wb(s,-1),o.ia();o.Ia();)if(o.ia().Rb()!=0)return o.xb();return-1},u.prototype.tQ=function(o,s,n,l){if(this.zk=this.vQ(s,n,l),this.zk!=-1){s.Wb(this.zk,-1);var c=s.ia(),p=c.ic(c.ge(o,!1));if(n=h.h.zc(p,o),(l=new h.h).N(p),l.sub(c.bc()),(p=new h.h).N(o),p.sub(c.bc()),this.mq=0>l.yi(p),this.rh=this.uQ(s,this.zk),this.rh!=-1){s.Wb(this.rh,-1);var f=(c=s.ia()).ge(o,!1);f=c.ic(f);var g=h.h.zc(f,o);g>n?this.rh=-1:(l.N(f),l.sub(c.bc()),p.N(o),p.sub(c.bc()),this.ws=0>l.yi(p))}this.rh==-1&&(this.rh=this.wQ(s,this.zk),this.rh!=-1&&(s.Wb(this.rh,-1),f=(c=s.ia()).ge(o,!1),f=c.ic(f),(g=h.h.zc(f,o))>n?this.rh=-1:(l.N(f),l.sub(c.bc()),p.N(o),p.sub(c.bc()),this.ws=0>l.yi(p),o=this.zk,this.zk=this.rh,this.rh=o,o=this.mq,this.mq=this.ws,this.ws=o)))}},u.prototype.YN=function(o,s,n,l,c){return n=n.Ha(),this.tQ(o,n,l,c),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(n.Wb(this.zk,-1),o=n.ia().lg(),n.Wb(this.rh,-1),s=n.ia().lg(),0<=o.yi(s)):s},u}(),v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return yt(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 3},o.prototype.iz=function(s,n,l){var c;if(c===void 0&&(c=!1),s.B())return new h.bm;n=n.D();var p=s,f=s.K();switch(f==197&&((p=new h.Ea).bd(s,!1),f=1736),f){case 33:return this.sI(p,n);case 550:return this.eI(p,n);case 1607:case 1736:return this.XT(p,n,l,c);default:throw h.i.ga("not implemented")}},o.prototype.jz=function(s,n){if(s.B())return new h.bm;n=n.D();var l=s,c=s.K();switch(c==197&&((l=new h.Ea).bd(s,!1),c=1736),c){case 33:return this.sI(l,n);case 550:case 1607:case 1736:return this.eI(l,n);default:throw h.i.ga("not implemented")}},o.prototype.kz=function(s,n,l,c){if(0>c)throw h.i.O();if(s.B())return[];n=n.D();var p=s,f=s.K();switch(f==197&&((p=new h.Ea).bd(s,!1),f=1736),f){case 33:return this.OU(p,n,l,c);case 550:case 1607:case 1736:return this.oU(p,n,l,c);default:throw h.i.ga("not implemented")}},o.prototype.XT=function(s,n,l,c){if(s.K()==1736&&l&&(l=new h.l,s.A(l),l=h.ua.Xd(null,l,!1),(c?h.jd.Zd(s,n,0):h.jd.Zd(s,n,l))!=0)){var p=new h.bm(n,0,0);return c&&p.RJ(!0),p}var f=s.Ha();p=new h.h;for(var g=l=-1,w=17976931348623157e292,x=0;f.ab();)for(;f.Ia();){var T=f.ia();T=T.ic(T.ge(n,!1));var E=h.h.zc(T,n);E<w?(x=1,p=T,l=f.xb(),g=f.gb,w=E):E==w&&x++}return p=new h.bm(p,l,Math.sqrt(w)),c&&(f.Wb(l,g),T=f.ia(),c=0>h.h.Wq(n,T.bc(),T.xc()),1<x&&((x=new k).reset(),c=x.YN(n,c,s,l,g)),p.RJ(c)),p},o.prototype.sI=function(s,n){return s=s.D(),n=h.h.ub(s,n),new h.bm(s,0,n)},o.prototype.eI=function(s,n){for(var l=s.vb(0),c=s.I(),p=s=0,f=0,g=17976931348623157e292,w=0;w<c;w++){var x=new h.h;l.uc(2*w,x);var T=h.h.zc(x,n);T<g&&(p=x.x,f=x.y,s=w,g=T)}return(n=new h.bm).by(p,f,s,Math.sqrt(g)),n},o.prototype.OU=function(s,n,l,c){return c==0?[]:(l*=l,s=s.D(),(n=h.h.zc(s,n))<=l?(l=[],(c=new h.bm).by(s.x,s.y,0,Math.sqrt(n)),l[0]=c):l=[],l)},o.prototype.oU=function(s,n,l,c){if(c==0)return[];var p=s.vb(0),f=s.I();s=[],l*=l;for(var g=0;g<f;g++){var w=p.read(2*g),x=p.read(2*g+1),T=n.x-w,E=n.y-x;(T=T*T+E*E)<=l&&((E=new h.bm).by(w,x,g,Math.sqrt(T)),s.push(E))}return n=s.length,s.sort(function(O,C){return O.La<C.La?-1:O.La==C.La?0:1}),c>=n||(s.length=c),s.slice(0)},o.instance=null,o}(h.Ge);h.Hx=v}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 4},u.prototype.W=function(o,s,n,l,c){return h.cm.tB(o,s,n,l,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.yn=function(o,s,n){h.Xt.xD(o,s,n)},u.instance=null,u}(h.Ge);h.uL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 33},u.prototype.W=function(o,s,n,l,c){return o===1073741824?!h.vd.uB(s,n,l,4,c):h.vd.uB(s,n,l,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.yn=function(o,s,n){h.Xt.xD(o,s,n)},u.instance=null,u}(h.Ge);h.fj=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n){if(this.od=n,this.lT=s,this.za=-1,u==null)throw h.i.O();this.Ak=u,this.Oj=o}return v.prototype.next=function(){var u;if((u=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");return this.$B(u)}return null},v.prototype.Ma=function(){return this.za},v.prototype.$B=function(u){if(u==null)throw h.i.O();return h.Ix.YJ(u,this.Oj,this.lT,this.od)},v.prototype.re=function(){},v}();h.vL=k}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 26},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l).next()):new h.vL(o,s,n,l)},u.prototype.ts=function(o,s,n,l,c){return 0<(l!==void 0?h.Ix.ts(o,s,n,l,c):h.Ix.ts(o,s,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.$l=k}(U||(U={})),function(h){var k=function(){function c(){this.Aq=0}return c.prototype.iX=function(p){this.Aq&=-2,this.Aq|=p?1:0},c.prototype.Yp=function(){return(1&this.Aq)!=0},c.prototype.SF=function(){return this.Yp()?0:1},c}();h.tY=k;var v=function(){},u=function(c,p,f,g){this.x=c,this.y=p,this.Ci=f,this.zm=g},o=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,g){return p=p.ka(g),f=this.Ce.lf.read(2*f),0>(f-=p=this.Ce.lf.read(2*p))?-1:0<f?1:0},c}(),s=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,g){f=this.Ce.hb[f],p=this.Ce.hb[p.ka(g)];var w=f.Yp(),x=p.Yp();g=f.oe.Me(this.Ce.Oo,0);var T=p.oe.Me(this.Ce.Oo,0);return g==T&&((w=.5*((g=Math.min(w?f.oe.oa:f.oe.ma,x?p.oe.oa:p.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(w=g),g=f.oe.Me(w,0),T=p.oe.Me(w,0)),g<T?-1:g>T?1:0},c}(),n=function(){function c(p,f){this.TI=new h.h,this.parent=p,this.ZR=f}return c.prototype.qr=function(p,f,g){var w=this.parent,x=this.ZR;g.Wd(p,f,function(T,E){return w.Oh(T,E,x)})},c.prototype.bq=function(p){return p=this.parent.ii.get(p),this.parent.lf.uc(2*(p>>1),this.TI),this.TI.y+(1&p?this.parent.Qj:-this.parent.Qj)},c}(),l=function(){function c(p,f,g,w,x){this.iH=p.description,this.Y=p,this.Sg=f,this.Qj=h.ua.mj(this.Sg,p,!1),this.Do=h.ua.mj(this.Sg,p,!0),this.sA=g,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new h.lp,this.fb=new h.$j,this.le=new h.Nd,this.UG=this.sl=x}return c.prototype.$S=function(){return this.UG=!0,(!h.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?h.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},c.prototype.fC=function(p,f){var g=this.lf.read(2*p);p=this.lf.read(2*p+1);var w=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=!h.$t.Ev(g,p,w,f,this.Qj*this.Qj);return x||this.Y.Eb()!=0&&g==w&&p==f},c.prototype.BE=function(){for(var p=this.Y,f=p.yf?3:2,g=0,w=p.ea();g<w;g++)if(p.Ka(g)<f)return this.le=new h.Nd(1,g,0),!1;return!0},c.prototype.yE=function(p){var f=this.Y,g=f.Ha(),w=f.hasAttribute(1);for(f=w?h.ua.rE(this.Sg,f,!1):0;g.ab();)for(;g.Ia();){var x=g.ia();if(!(x.Rb()>this.Qj)){if(p&&w){var T=x.yv(1,0);if(x=x.yv(1,0),Math.abs(x-T)>f)continue}return this.le=new h.Nd(2,g.xb(),-1),!1}}return!0},c.prototype.hO=function(){var p=this.Y,f=null;h.ba.Ic(this.Y.K())&&(f=this.Y);var g=(this.UG||this.sl)&&f!=null,w=p.I();this.lf=p.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*w),this.hi=new h.ja(0),this.hi.Jb(2*w),g&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(w));for(var x=p=0;x<w;x++)if(this.ii.add(2*x),this.ii.add(2*x+1),this.hi.add(2*x),this.hi.add(2*x+1),g){for(;x>=f.Wc(p);)p++;this.Hl.add(p)}for(new h.Zt().sort(this.hi,0,2*w,new n(this,g)),this.fb.clear(),this.fb.Xo(new o(this)),this.fb.Ee(w),f=0,w*=2;f<w;f++)if(g=this.hi.get(f),g=(p=this.ii.get(g))>>1,(1&p)==0){if(p=this.fb.addElement(g,-1),(x=this.fb.xe(p))!=-1&&!this.fC(this.fb.ka(x),g))return this.le=new h.Nd(3,g,this.fb.ka(x)),!1;var T=this.fb.lb(p);if(T!=-1&&!this.fC(this.fb.ka(T),g))return this.le=new h.Nd(3,g,this.fb.ka(T)),!1}else if(p=this.fb.search(g,-1),x=this.fb.xe(p),T=this.fb.lb(p),this.fb.wd(p,-1),x!=-1&&T!=-1&&!this.fC(this.fb.ka(x),this.fb.ka(T)))return this.le=new h.Nd(3,this.fb.ka(x),this.fb.ka(T)),!1;return!0},c.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},c.prototype.jO=function(){var p=new h.hd;p.Ib(this.Y);var f=new h.Nd;return!h.bu.fI(!1,p,this.Qj,f,this.od)||(f.Lo=p.Va(f.Lo),f.Mo=p.Va(f.Mo),this.le.Yt(f),!1)},c.prototype.iO=function(){var p=this.Y,f=p.Ha();for(p=p.Ha();f.ab();)for(;f.Ia();){var g=f.ia();if(!f.Sn()||!f.VS()){p.wW(f);do for(;p.Ia();){var w=p.ia();if((w=g.Br(w,this.Qj,!0))!=0)return this.le=new h.Nd(w==2?5:4,f.xb(),p.xb()),!1}while(p.ab())}}return!0},c.prototype.nO=function(){var p=this.Y;this.hb.length=0,this.ro.length=0,this.ag=p.Ha(),this.ag.EB();var f=new h.ja(0);f.Jb(10);var g=NaN,w=0,x=0;for(p=2*p.I();x<p;x++){var T=this.hi.get(x);if(!(1&(T=this.ii.get(T)))){T>>=1;var E=this.lf.read(2*T),O=this.lf.read(2*T+1);if(f.size!=0&&(E!=g||O!=w)){if(!this.LI(f))return!1;f!=null&&f.clear(!1)}f.add(T),g=E,w=O}}return!!this.LI(f)},c.prototype.mO=function(){for(var p=this.Y,f=Array(p.ea()),g=0,w=p.ea();g<w;g++)f[g]=p.Pn(g);w=new v;var x=new h.h;g=this.hi.get(0);var T=(g=this.ii.get(g))>>1;this.lf.uc(2*T,x);var E=f[g=this.Hl.get(T)],O=p.Ca(g),C=p.Wc(g)-1;w.gl=T==O||T==C,w.jy=this.sl?!E&&w.gl:w.gl,w.Ci=g,w.x=x.x,w.y=x.y,w.zm=T;for(var N=new v,D=1,z=this.hi.size;D<z;D++)if(g=this.hi.get(D),(1&(g=this.ii.get(g)))==0){T=g>>1,this.lf.uc(2*T,x),(g=this.Hl.get(T))!=w.Ci&&(E=f[g],O=p.Ca(g),C=p.Wc(g)-1);var R=T==O||T==C,G=this.sl?!E&&w.gl:w.gl;if(N.x=x.x,N.y=x.y,N.Ci=g,N.zm=T,N.jy=G,N.gl=R,N.x==w.x&&N.y==w.y){if(this.sl){if(!(N.jy&&w.jy||N.Ci==w.Ci&&(N.gl||w.gl)))return this.le=new h.Nd(8,N.zm,w.zm),!1}else if(!N.gl||!w.gl)return this.le=new h.Nd(5,N.zm,w.zm),!1}g=w,w=N,N=g}return!0},c.prototype.EE=function(){for(var p=this.Y,f=[],g=-1,w=!1,x=0,T=p.ea();x<T;x++)p.Gv(x)&&(w=!1,g++,x<T-1&&(p.Gv(x+1)||(w=!0))),f[x]=w?g:-1;w=new h.h,x=this.hi.get(0);var E=(x=this.ii.get(x))>>1;this.lf.uc(2*E,w),x=this.Hl.get(E),g=new u(w.x,w.y,x,E,f[x]),p=[];var O=1;for(T=this.hi.size;O<T;O++)if(x=this.hi.get(O),(1&(x=this.ii.get(x)))==0){if(E=x>>1,this.lf.uc(2*E,w),x=this.Hl.get(E),(x=new u(w.x,w.y,x,E,f[x])).x==g.x&&x.y==g.y){if(x.Ci==g.Ci)return this.le=new h.Nd(9,x.zm,g.zm),!1;0<=f[x.Ci]&&f[x.Ci]==f[g.Ci]&&(p.length!=0&&p[p.length-1]==g||p.push(g),p.push(x))}g=x}if(p.length==0)return!0;for(x=new h.lp(!0),h.P.bv(f,-1),w=-1,(O=new h.h).Sc(),g=0,T=p.length;g<T;g++){(E=p[g]).x==O.x&&E.y==O.y||(w=x.Rh(0),O.x=E.x,O.y=E.y);var C=f[E.Ci];C==-1&&(C=x.Rh(2),f[E.Ci]=C),x.addElement(C,w),x.addElement(w,C)}for((T=new h.ja(0)).Jb(10),g=x.ke;g!=-1;g=x.lz(g))if(!(1&(p=x.KF(g)))&&2&p){for(p=-1,T.add(g),T.add(-1);0<T.size;){if(w=T.Gc(),T.Jf(),O=T.Gc(),T.Jf(),(1&(E=x.KF(O)))!=0){p=2&E?O:w;break}for(x.aX(O,1|E),E=x.sc(O);E!=-1;E=x.lb(E))(C=x.getData(E))!=w&&(T.add(C),T.add(O))}if(p!=-1){for(x=-1,g=0,T=f.length;g<T;g++)if(f[g]==p){x=g;break}return this.le=new h.Nd(10,x,-1),!1}}return!0},c.prototype.oO=function(){var p=this.Y;if(0>=p.He())return this.le=new h.Nd(6,p.ea()==1?1:-1,-1),0;if(p.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=h.ja.rf(p.ea(),0),this.EA=h.ja.rf(p.ea(),-1);for(var f=-1,g=0,w=0,x=p.ea();w<x;w++){var T=p.Kr(w);if(this.vo.write(w,0>T?0:256),0<T)f=w,g=T;else{if(T==0)return this.le=new h.Nd(6,w,-1),0;if((0>f||g<Math.abs(T))&&(this.le=new h.Nd(7,w,-1),this.sl))return 0;this.EA.write(w,f)}}for(this.et=p.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),x=p.I(),this.Oo=NaN,(p=new h.ja(0)).Jb(10),this.Sq=h.ja.rf(x,-1),this.Jw=h.ja.rf(x,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new s(this)),f=0,x*=2;0<this.et&&f<x;f++)if(g=this.hi.get(f),(1&(g=this.ii.get(g)))==0){if(g>>=1,(w=this.lf.read(2*g+1))!=this.Oo&&p.size!=0){if(!this.vt(p))return 0;p!=null&&p.clear(!1)}p.add(g),this.Oo=w}return 0<this.et&&!this.vt(p)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},c.prototype.LI=function(p){if(p.size==1)return!0;for(var f=0,g=p.size;f<g;f++){var w=p.get(f);this.ag.Wb(w);var x=this.ag.ni();this.hb.push(this.Uu(x,w,this.ag.gb,!0)),this.ag.ia(),x=this.ag.ia(),this.hb.push(this.Uu(x,w,this.ag.gb,!1))}var T=this;for(this.hb.sort(function(C,N){return T.SP(C,N)}),(w=this.oh.ke)==-1&&(w=this.oh.Rh(0)),this.oh.hn(this.hb.length),f=0,g=this.hb.length;f<g;f++)this.oh.addElement(w,f);f=!0;for(var E=g=-1;f&&(f=!1,(x=this.oh.sc(w))!=-1);)for(var O=this.oh.lb(x);O!=-1;)if(g=this.oh.getData(x),E=this.oh.getData(O),(g=this.hb[g].Ko)!=(E=this.hb[E].Ko))x=O,O=this.oh.lb(x);else if(f=!0,this.oh.kd(w,x),x=this.oh.xe(O),(O=this.oh.kd(w,O))==-1||x==-1)break;if(f=this.oh.ds(w),this.oh.GE(w),0<f)return this.le=new h.Nd(5,g,E),!1;for(f=0,g=p.size;f<g;f++)this.qB(this.hb[f]);return this.hb.length=0,!0},c.prototype.vt=function(p){for(var f=0,g=p.size;f<g;f++){var w=p.get(f),x=this.Sq.read(w);if(x!=-1){var T=this.fb.ka(x);this.Bj.add(T),this.fb.wd(x,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Sq.write(w,-1)}(x=this.Jw.read(w))!=-1&&(T=this.fb.ka(x),this.Bj.add(T),this.fb.wd(x,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Jw.write(w,-1))}for(f=0,g=p.size;f<g;f++){if(w=p.get(f),this.ag.Wb(w),(x=this.ag.ni()).oa>x.ma){var E=this.ag.xb(),O=this.Uu(x,w,this.ag.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),x=this.fb.addElement(T,-1),this.Sq.read(E)==-1?this.Sq.write(E,x):this.Jw.write(E,x),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(x)}this.ag.ia(),(x=this.ag.ia()).oa<x.ma&&(E=this.ag.kk(),O=this.Uu(x,w,this.ag.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),x=this.fb.addElement(T,-1),this.Sq.read(E)==-1?this.Sq.write(E,x):this.Jw.write(E,x),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(x))}for(f=0,g=this.Qm.size;f<g&&0<this.et;f++)if(x=this.Qm.get(f),(3&this.vo.read(this.hb[this.fb.ka(x)].DA))==0){p=-1,w=this.fb.xe(x);var C=x;O=null,T=-1;for(var N=0;w!=-1&&(T=this.fb.ka(w),T=(O=this.hb[T]).DA,(3&(N=this.vo.read(T)))==0);)C=w,w=this.fb.xe(w);w==-1?(E=1,w=C):(p=(3&N)==1?T:this.EA.read(T),E=O.SF()!=0?0:1,w=this.fb.lb(w));do{if(T=this.fb.ka(w),T=(O=this.hb[T]).DA,(3&(C=this.vo.read(T)))==0){if(E!=O.SF())return this.le=new h.Nd(6,T,-1),!1;if(C=252&C|(N=E==0||O.Yp()?2:1),this.vo.write(T,N),N==2&&this.le.Lj==0&&this.EA.read(T)!=p&&(this.le=new h.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&C)==1&&(p=T),C=w,w=this.fb.lb(w),E=E!=0?0:1}while(C!=x)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},c.prototype.Uu=function(p,f,g,w){if(p.K()!=322)throw h.i.Ra();return(p=this.nP(p)).Ko=f,p.DA=g,p.Aq=0,p.iX(w),p},c.prototype.nP=function(p){if(0<this.ro.length){var f=this.ro[this.ro.length-1];--this.ro.length,p.copyTo(f.oe)}else(f=new k).oe=h.NC.kg(p);return f},c.prototype.qB=function(p){p.oe.K()==322&&this.ro.push(p)},c.prototype.fU=function(){for(var p=this.Y.I(),f=new h.ja(0),g=0;g<p;g++)f.add(g);var w=this;for(f.Wd(0,p,function(x,T){return w.Qu(x,T)}),g=1;g<p;g++)if(this.Qu(f.get(g-1),f.get(g))==0)return this.le=new h.Nd(3,f.get(g-1),f.get(g)),0;return 2},c.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},c.prototype.jV=function(){return this.$S()},c.prototype.kU=function(){for(var p=this.Y.I(),f=new h.ja(0),g=0;g<p;g++)f.add(g);var w=this;f.Wd(0,p,function(C,N){return w.KO(C,N)});var x=Array(p);for(h.P.bv(x,!1),x[f.get(0)]=!0,g=1;g<p;g++){var T=f.get(g-1),E=f.get(g);this.Qu(T,E)==0?x[E]=!1:x[E]=!0}f=this.Y.Ja(),T=this.Y,E=0;var O=1;for(g=0;g<p;g++)x[g]?O=g+1:(E<O&&f.Gd(T,E,O),E=g+1);return E<O&&f.Gd(T,E,O),f.Eh(2,this.Do),f},c.prototype.IV=function(){var p=this.Y,f=p.Ha(),g=p.Ha(),w=this.Y.Ja(),x=this.Y,T=p.hasAttribute(1),E=T?h.ua.rE(this.Sg,p,!0):0,O=new h.ja(0),C=new h.ja(0);for(O.Jb(h.P.truncate(p.I()/2+1)),C.Jb(h.P.truncate(p.I()/2+1));f.ab();)if(g.ab(),!(2>p.Ka(f.gb))){g.yW();for(var N,D,z=!0;f.Ia();){var R=f.ia(),G=g.ni();if(f.xb()>g.xb())break;z&&(O.add(f.xb()),C.add(g.kk()),z=!1),D=O.Gc();var W=f.kk();if(1<W-D){var H=new h.h;H.vc(p.Oa(D),p.Oa(W)),N=H.length()}else N=R.Rb();D=C.Gc(),1<(W=g.xb())-D?((H=new h.h).vc(p.Oa(D),p.Oa(W)),D=H.length()):D=G.Rb(),N>this.Do?O.add(f.kk()):T&&(N=p.Vc(1,O.Gc(),0),R=R.jv(1,0),Math.abs(R-N)>E&&O.add(f.kk())),D>this.Do?C.add(g.xb()):T&&(N=p.Vc(1,C.Gc(),0),R=G.jv(1,0),Math.abs(R-N)>E&&C.add(g.xb()))}if(O.Gc()<C.Gc()?O.size>C.size?O.Jf():C.Jf():(O.Gc()!=C.Gc()&&C.Jf(),C.Jf()),2<=C.size+O.size){for(z=new h.Ta,G=0,R=O.size;G<R;G++)x.we(O.get(G),z),G==0?w.nf(z):w.lineTo(z);for(G=C.size-1;0<G;G--)x.we(C.get(G),z),w.lineTo(z);x.ec(f.gb)?w.Cp():0<C.size&&(x.we(C.get(0),z),w.lineTo(z))}O!=null&&O.clear(!1),C!=null&&C.clear(!1)}return w.Eh(2,this.Do),w},c.prototype.mV=function(){return this.zX()},c.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?h.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&h.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},c.ts=function(p,f,g,w,x){if(w!=null&&(w.Lj=0,w.Lo=-1,w.Mo=-1),p.B())return 1;var T=p.K();if(T==33)return 1;var E=h.ua.mj(f,p,!1);if(T==197)return f=new h.l,p.A(f),f.Di(E)?(w!=null&&(w.Lj=2,w.Lo=-1,w.Mo=-1),0):1;if(h.ba.zd(T))return(E=new h.Ua(p.description)).pc(p,!0),c.ts(E,f,g,w,x);var O=p.qm(E);if((g=g?-1:O)!=-1)return g;if(f=new c(p,f,g,x,!1),T==550)g=f.fU();else if(T==1607)g=f.EV();else{if(T!=1736)throw h.i.Ra();g=f.jV()}return p.Eh(g,E),w!=null&&g==0&&w.Yt(f.le),g},c.YJ=function(p,f,g,w){if(p.B())return p;var x=p.K();if(x==33)return p;var T=h.ua.mj(f,p,!1);if(x==197)return f=new h.l,p.A(f),f.Di(T)?p.Ja():p;if(h.ba.zd(x))return(x=new h.Ua(p.description)).pc(p,!0),c.YJ(x,f,g,w);if(T=p.qm(T),(g=g?-1:T)==2)return p;if(p=new c(p,f,g,w,!1),x==550)p=p.kU();else if(x==1607)p=p.IV();else{if(x!=1736)throw h.i.Ra();p=p.mV()}return p},c.prototype.Oh=function(p,f,g){if(p==f)return 0;p=this.ii.get(p);var w=this.ii.get(f);f=p>>1;var x=w>>1,T=new h.h,E=new h.h;return this.lf.uc(2*f,T),T.y+=1&p?this.Qj:-this.Qj,this.lf.uc(2*x,E),E.y+=1&w?this.Qj:-this.Qj,(p=T.compare(E))==0&&g?0>(g=this.Hl.get(f)-this.Hl.get(x))?-1:0<g?1:0:p},c.prototype.Qu=function(p,f){if(p==f)return 0;var g=this.Y,w=g.Oa(p),x=g.Oa(f);if(w.x<x.x)return-1;if(w.x>x.x)return 1;if(w.y<x.y)return-1;if(w.y>x.y)return 1;for(w=1;w<this.jT;w++){x=this.iH.ld(w);for(var T=h.sa.Wa(x),E=0;E<T;E++){var O=g.Vc(x,p,E),C=g.Vc(x,f,E);if(O<C)return-1;if(O>C)return 1}}return 0},c.prototype.KO=function(p,f){var g=this.Qu(p,f);return g==0?p<f?-1:1:g},c.prototype.SP=function(p,f){if(p===f)return 0;var g=p.oe.lg();p.Yp()&&g.Uq(),p=f.oe.lg(),f.Yp()&&p.Uq(),f=g.su();var w=p.su();return w==f?(f=g.yi(p),Math.abs(f)<=8881784197001252e-31*(Math.abs(p.x*g.y)+Math.abs(p.y*g.x))&&(f--,f++),0>f?1:0<f?-1:0):f<w?-1:1},c}();h.Ix=l}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),s=new h.$c(s),this.W(o,s,n,l).next()):new h.wL(o,s,n,l)},u.gp=function(o,s,n,l){var c=o.Eb(),p=s.Eb();if(o.B()&&s.B())return c>p?o:s;if(o.B())return s;if(s.B())return o;var f=new h.l,g=new h.l,w=new h.l;return o.A(f),s.A(g),w.L(f),w.$b(g),f=h.ua.Xd(n,w,!0),g=o.K(),w=s.K(),g==33&&w==33?u.WU(o,s,f):g!=w?0<c||0<p?c>p?o:s:g==550?u.dI(o,s,f):u.dI(s,o,f):h.Hg.gp(o,s,n,l)},u.WU=function(o,s,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D(),c=s.D(),p=new h.ee(o.description);return h.h.zc(l,c)>n&&(p.add(o),p.add(s)),p},u.dI=function(o,s,n){var l=o.vb(0),c=o.I(),p=s.D(),f=o.Ja();n=n*Math.sqrt(2)*1.00001;var g=new h.l;if(o.A(g),g.X(n,n),g.contains(p)){n*=n,g=!1;for(var w=[],x=0;x<c;x++)w[x]=!1;for(x=0;x<c;x++){var T=l.read(2*x),E=l.read(2*x+1);(T-=p.x)*T+(E-=p.y)*E<=n&&(g=!0,w[x]=!0)}if(g)for(x=0;x<c;x++)w[x]||f.Gd(o,x,x+1);else f.Gd(o,0,c),f.add(s)}else f.Gd(o,0,c),f.add(s);return f},u.instance=null,u}(h.Ge);h.Jx=k}(U||(U={})),function(h){var k=function(){function v(u,o,s,n){this.vs=o==null,this.za=-1,this.Sd=u,this.wg=s,this.IT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.gp(u,this.IT,this.wg,this.Vb)):null;var u},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.wL=k}(U||(U={})),function(h){var k=function(){function o(){}return o.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},o}(),v=function(){function o(){this.Ir=0,this.rj=[]}return o.prototype.kN=function(s){this.Ir+=s.zx,this.rj.push(s)},o.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},o.prototype.iy=function(){return this.rj[this.rj.length-1]},o.prototype.Nb=function(s){return s===this},o}(),u=function(){function o(s,n,l){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=s,this.wg=n,this.Vb=l}return o.ZD=function(s){var n=[],l=0;for(s=Object.keys(s);l<s.length;l++)n.push(Number(s[l]));return n.sort(function(c,p){return c-p}),n},o.prototype.aG=function(s){var n=this.Fo[s],l=o.ZD(n)[0],c=n[l],p=c.iy().Vy;return c=c.iy().vK,delete n[l],c&&(p=h.$l.local().W(p,this.wg,!1,this.Vb),s==0&&p.K()==33&&(s=new h.ee(p.description),p.B()||s.add(p),p=s)),p},o.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw h.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},o.prototype.Ma=function(){return this.za},o.prototype.lK=function(){if(this.Jc)return!0;var s=null;if(this.Sd!=null&&(s=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.op.Bp(this.Vb),s!=null){var n=s.Eb();this.vH[n]=!0,n>=this.Bk&&!this.eA&&(this.HD(n,!1,s),n>this.Bk&&!this.eA&&this.uW(n))}if(0<this.kq)for(n=0;n<=this.Bk;n++)for(;1<this.wq[n]&&(s=this.AO(n)).length!=0;)s=h.Hg.QP(s,this.wg,this.Vb),this.HD(n,!0,s);return this.Jc},o.prototype.AO=function(s){for(var n=[],l=[],c=this.Fo[s],p=o.ZD(c),f=0;f<p.length;f++){var g=p[f],w=c[g];if(this.Jc||1e4<w.Ir&&1<w.rj.length){for(this.wq[s]-=w.rj.length,this.kq-=w.rj.length;0<w.rj.length;)n.push(w.iy().Vy),w.OV();l.push(g)}}for(f=0;f<l.length;f++)delete c[l[f]];return n},o.prototype.uW=function(s){for(var n=0;n<s;n++)this.Fo[n]=[],this.kq-=this.wq[n],this.wq[n]=0},o.prototype.HD=function(s,n,l){var c=new k;if(c.Az(),c.Vy=l,l=o.$R(l),c.zx=l,l=o.YR(l),s+1>this.Fo.length)for(var p=0,f=Math.max(2,s+1);p<f;p++)this.Fo.push([]);(p=this.Fo[s][l])===void 0&&(p=new v,this.Fo[s][l]=p),c.vK=n,p.kN(c),this.wq[s]++,this.kq++,this.Bk=Math.max(this.Bk,s)},o.YR=function(s){return 0<s?h.P.truncate(Math.log(s)/Math.log(4)+.5):0},o.$R=function(s){var n=s.K();if(h.ba.zj(n))return s.I();if(n==33)return 1;if(n==197)return 4;if(h.ba.zd(n))return 2;throw h.i.Ra()},o.prototype.re=function(){this.lK()},o}();h.yL=u}(U||(U={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return yt(u,v),u.prototype.K=function(){return 1},u.prototype.W=function(o,s,n,l){return l===void 0?new h.yL(o,s,n):this.bQ(o,s,n,l)},u.prototype.bQ=function(o,s,n,l){return o=new h.$c([o,s]),this.W(o,n,l).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.Ih=k}(U||(U={})),function(h){var k,v;(v=k||(k={}))[v.nextPath=0]="nextPath",v[v.nextSegment=1]="nextSegment",v[v.iterate=2]="iterate",k=function(){function u(o,s,n,l){this.Vs=new h.l,this.BT=o,this.CT=s,this.oq=l,this.wo=-1,this.tl=!1;var c=o.Cb;c!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,l?this.wo=s.ea():this.td=s.Ha()),this.tl||(c=s.Cb)!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,l?this.wo=o.ea():this.td=o.Ha()),this.tl||(this.ei=l?h.ua.hR(o,s,n,1<=o.qm(0),1<=s.qm(0)):h.ua.gR(o,s,n))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var o=!0;o;)switch(this.Yb){case 0:o=this.sU();break;case 1:o=this.tU();break;case 2:o=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},u.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},u.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},u.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var o=this.td.ia();return this.zw.Wo(o,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),h.am=k}(U||(U={})),function(h){(h=h.JL||(h.JL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(U||(U={})),function(h){h.LC=function(){function k(){}return k.ub=function(v,u,o,s,n,l,c,p,f){var g=[0,0,0],w=[0,0,0],x=[0,0,0],T=[0,0,0,0],E=new h.ha(0),O=new h.ha(0),C=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(v,o,s,n,l,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var N=h.F.ca(n-o);if(h.s.$(s,l)&&(h.s.$(o,n)||h.s.$(h.s.R(s),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(s,-l)){if(h.s.$(h.s.R(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0<s?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<s?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(N),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(s),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897)||h.s.$(o,n)||h.s.$(h.s.R(N),3.141592653589793)||h.s.Dd(s))return void h.Yk.ub(v,u,o,s,n,l,c,p,f);var D=Math.sqrt(1-u);n=h.F.ca(n-o),o=0,h.F.el(1,u,s,o,0,E,O,C),g[0]=E.u,g[1]=O.u,g[2]=C.u,h.F.el(1,u,l,n,0,E,O,C),w[0]=E.u,w[1]=O.u,w[2]=C.u,x[0]=0,x[1]=0,x[2]=-1*u*h.F.n(1,u,s)*Math.sin(s),0>n?h.F.Yq(x,w,g,T,0):h.F.Yq(x,g,w,T,0),O=[0,0,0],C=[0,0,0];var z=[0,0,0];g=[0,0,0],E=[0,0,0];var R=Math.acos(T[2]/1),G=1-u,W=Math.tan(R),H=1+W*W/G,ee=2*x[2]*W/G;for(G=(-ee+(W=Math.sqrt(ee*ee-4*H*(x[2]*x[2]/G-1))))/(H*=2),ee=(-ee-W)/H,W=Math.tan(R),R=(G+ee)/2,x=((H=W*G+x[2])+(W*ee+x[2]))/2,W=h.F.ip(G-R,H-x),G=x/D*1.570796326794897,ee=0;100>ee&&(H=(H=h.F.w(u,G))*H/Math.cos(G)*(Math.sin(G)-x*H/(1-u)),!h.s.Dd(H));ee++)G-=H;x=h.F.n(1,u,G)*Math.cos(G),W=1-W/(x=Math.sqrt((x-R)*(x+R))),W*=2-W,H=h.F.qn(O),R=h.F.qn(C),G=h.F.qn(z);var X=h.F.Ut(z,O);ee=h.F.Ut(z,C),h.F.yx(z,O,g),h.F.yx(z,C,E),O=Math.acos(X/(G*H)),C=Math.acos(ee/(G*R)),C*=h.s.Mb(1,h.F.Ut(g,E)),(1.570796326794897<=h.s.R(O)&&1.570796326794897<=h.s.R(C)||3.141592653589793<h.s.R(O-C))&&(O=(3.141592653589793-h.s.R(O))*h.s.Mb(1,O),C=(3.141592653589793-h.s.R(C))*h.s.Mb(1,C)),g=h.F.Sj(W,C),E=h.F.q(x,W,h.F.Sj(W,O)),g=h.F.q(x,W,g),g=h.s.R(g-E)*v,O=new h.ha(0),C=new h.ha(0),z=T[1]/1,z*=-h.s.Mb(1,N),E=Math.acos(z)*h.s.Mb(1,N),k.sf(v,u,o,s,g,E,O,C),h.s.$(n,O.u)&&h.s.$(l,C.u)||(W=h.F.ip(h.F.ca(n-O.u),l-C.u),k.sf(v,u,o,s,g,h.F.ca(E+3.141592653589793),O,C),(H=h.F.ip(h.F.ca(n-O.u),l-C.u))<W&&(E=h.F.ca(E+3.141592653589793))),O=[0,0,0,0],C=[0,0,0,0],W=[0,0,0],v=[0,0,0],o=[0,0,0],s=[0,0,0],z=[0,0,0],(x=[0,0,0])[0]=0,x[1]=0,x[2]=D,W[0]=0,W[1]=0,W[2]=0,h.F.Yq(W,x,w,O,0),h.s.Dd(l)?(v[0]=w[0],v[1]=w[1],v[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,l)*Math.cos(l),v[0]=0,v[1]=0,w[2]+=Math.tan(1.570796326794897-h.s.R(l))*u*h.s.Mb(1,l),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=w[2],h.F.Yq(w,o,v,C,1),h.F.yx(C,O,s),h.F.yx(C,T,z),z=h.F.Ut(s,z)/(h.F.qn(s)*h.F.qn(z)),z*=h.s.Mb(1,N),n=Math.acos(z)*-h.s.Mb(1,N),(0<E&&0<n||0>E&&0>n)&&(n=h.F.ca(n+3.141592653589793)),c!=null&&(c.u=g),p!=null&&(p.u=E),f!=null&&(f.u=n)}}},k.sf=function(v,u,o,s,n,l,c,p){var f=[0,0,0],g=[0,0,0],w=[0,0,0],x=[0,0,0],T=[0,0,0],E=[0,0,0],O=[0,0,0],C=[0,0,0,0],N=new h.ha(0),D=new h.ha(0),z=new h.ha(0),R=new h.ha(0),G=new h.ha(0),W=new h.ha(0);if(c!=null&&p!=null)if(h.s.vi(u))h.$g.sf(v,o,s,n,l,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=s);else if(l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),o=h.F.ca(o),s=h.F.ca(s),1.570796326794897<h.s.R(s)&&(o=h.F.ca(o+3.141592653589793),s=h.s.Mb(3.141592653589793,s)-s),h.s.$(h.s.R(s),1.570796326794897)||h.s.Dd(s)||h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))h.Yk.sf(v,u,o,s,n,l,c,p);else{var H=Math.sqrt(1-u);for(v=n/v,h.F.el(1,u,s,0,0,R,G,W),f[0]=R.u,f[1]=G.u,f[2]=G.u,O[0]=0,O[1]=0,O[2]=-1*u*h.F.n(1,u,s)*Math.sin(s),R=h.F.n(1,u,s),G=h.F.ca(1.570796326794897-l),W=Math.sin(G),n=Math.cos(s),s=Math.sin(s),T[0]=R*n-s*W,T[1]=Math.cos(G),T[2]=(1-u)*R*s+n*W,0>l?h.F.Yq(O,T,f,C,0):h.F.Yq(O,f,T,C,0),f=Math.acos(C[2]/1),C=Math.atan2(-C[1],-C[0]),s=1-u,G=1+(T=Math.tan(f))*T/s,s=(-(R=2*O[2]*T/s)+(T=Math.sqrt(R*R-4*G*(O[2]*O[2]/s-1))))/(G*=2),R=(-R-T)/G,T=Math.tan(f),f=(s+R)/2,O=((G=T*s+O[2])+(T*R+O[2]))/2,T=h.F.ip(s-f,G-O),H=O/H*1.570796326794897,s=0;100>s&&(R=(R=h.F.w(u,H))*R/Math.cos(H)*(Math.sin(H)-O*R/(1-u)),!h.s.Dd(R));s++)H-=R;H=h.F.n(1,u,H)*Math.cos(H),O=1-T/(H=Math.sqrt((H-f)*(H+f))),O*=2-O,E=Math.acos(h.F.Ut(E,g)/(h.F.qn(E)*h.F.qn(g))),E*=h.s.Mb(1,g[0]),l=(h.F.q(H,O,h.F.Sj(O,E))+v*h.s.Mb(1,l))/h.F.Ch(H,O),l=h.F.ca(1.570796326794897*l),l=h.F.Tq(O,l),h.F.n(H,O,l),T=h.F.ca(C+o),o=Math.cos(T),l=Math.sin(T),w[0]=x[0]*o+x[1]*-l,w[1]=x[0]*l+x[1]*o,w[2]=x[2],h.F.eO(u,w[0],w[1],w[2],z,D,N),c!=null&&(c.u=D.u),p!=null&&(p.u=z.u)}},k}()}(U||(U={})),function(h){var k=function(){function n(l){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=l}return n.prototype.compare=function(l,c,p){return this.g.Hc(c,this.xt),this.g.Hc(l.ka(p),this.yt),this.xt.compare(this.yt)},n}(),v=function(){function n(l){this.Cf=new h.h,this.Fk=new h.h,this.g=l}return n.prototype.Fh=function(l){this.Cf.N(l)},n.prototype.compare=function(l,c){return this.g.Hc(l.ka(c),this.Fk),this.Cf.compare(this.Fk)},n}(),u=function(n){function l(c){var p=n.call(this,c.g,c.ra,!1)||this;return p.ib=c,p}return yt(l,n),l.prototype.compare=function(c,p,f){if(this.sg)return-1;var g=this.ib.Rd.Ln(this.ib.Th(p));c=c.ka(f);var w=this.ib.Rd.Ln(this.ib.Th(c));return this.Fm=f,this.ME(p,g,c,w)},l}(h.PC),o=function(n){function l(c){var p=n.call(this,c.g,c.ra)||this;return p.ib=c,p}return yt(l,n),l.prototype.compare=function(c,p){return this.sg?-1:(c=this.ib.Rd.Ln(this.ib.Th(c.ka(p))),this.Fm=p,this.NE(p,c))},l}(h.WL),s=function(){function n(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new h.$j,this.Nc=new h.$j,this.ph=new h.ja(0),this.Ik=new h.OC,this.Gf=new h.ja(0),this.Ck=new h.ja(0),this.lo=new h.Ta}return n.prototype.LX=function(l,c){var p=new h.Ed;return p.VB(),l.Pc(p),this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,c=this.eC(),l.Pc(p),c||(this.lQ(),c||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},n.prototype.PX=function(l,c){this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,this.Pg=!1,this.eC(),this.Pg||(this.Pg=l.Ip(c,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},n.prototype.qg=function(l,c){return this.hb.U(l,0+c)},n.prototype.GB=function(l,c,p){this.hb.T(l,0+c,p)},n.prototype.Th=function(l){return this.hb.U(l,2)},n.prototype.UW=function(l,c){this.hb.T(l,2,c)},n.prototype.MF=function(l,c){return this.hb.U(l,3+c)},n.prototype.Rp=function(l){return this.hb.U(l,7)},n.prototype.Rl=function(l,c){this.hb.T(l,7,c)},n.prototype.Tp=function(l,c){return this.hb.U(l,3+this.Qp(l,c))},n.prototype.hr=function(l,c,p){this.hb.T(l,3+this.Qp(l,c),p)},n.prototype.IR=function(l,c){return this.hb.U(l,5+this.Qp(l,c))},n.prototype.jr=function(l,c,p){this.hb.T(l,5+this.Qp(l,c),p)},n.prototype.Ur=function(l){return this.Ad.U(l,0)},n.prototype.PW=function(l,c){this.Ad.T(l,0,c)},n.prototype.$y=function(l){return this.Ad.U(l,4)},n.prototype.er=function(l,c){this.Ad.T(l,4,c)},n.prototype.kl=function(l){return this.Ad.U(l,1)},n.prototype.nn=function(l,c){this.Ad.T(l,1,c)},n.prototype.Zy=function(l){return this.Ad.U(l,3)},n.prototype.Ft=function(l,c){this.Ad.T(l,3,c)},n.prototype.$m=function(l){var c=this.Ad.De(),p=this.nh.Rh();return this.PW(c,p),l!=-1?(this.nh.addElement(p,l),this.g.Sa(l,this.zh,c),this.er(c,this.g.Va(l))):this.er(c,-1),c},n.prototype.CP=function(l){this.Ad.kd(l)},n.prototype.FD=function(l,c){this.nh.addElement(this.Ur(l),c),this.g.Sa(c,this.zh,l)},n.prototype.ot=function(l){var c=this.hb.De(),p=this.Rd.Rh();return this.UW(c,p),l!=-1&&this.Rd.addElement(p,l),c},n.prototype.GD=function(l,c){this.Rd.addElement(this.Th(l),c)},n.prototype.Wu=function(l){this.hb.kd(l),0<=(l=this.ph.gF(l))&&this.ph.NV(l)},n.prototype.jj=function(l,c){if(this.qg(l,0)==-1)this.GB(l,0,c);else{if(this.qg(l,1)!=-1)throw h.i.Ra();this.GB(l,1,c)}this.gy(l,c)},n.prototype.gy=function(l,c){var p=this.kl(c);if(p!=-1){var f=this.Tp(p,c);this.jr(f,c,l),this.hr(l,c,f),this.hr(p,c,l),this.jr(l,c,p)}else this.jr(l,c,l),this.hr(l,c,l),this.nn(c,l)},n.prototype.Qp=function(l,c){return this.qg(l,0)==c?0:1},n.prototype.Zm=function(l,c){var p,f=this.Zy(c);if(f!=-1&&(this.df.wd(f,-1),this.Ft(c,-1)),(f=this.kl(c))!=-1){var g=p=f;do{var w=!1,x=this.Qp(p,c),T=this.MF(p,x);if(this.qg(p,x+1&1)==l){if(this.Zu(p),this.Rd.eh(this.Th(p)),this.Wu(p),p==T){f=-1;break}f==p&&(f=this.kl(c),g=T,w=!0)}p=T}while(p!=g||w);if(f!=-1){do x=this.Qp(p,c),T=this.MF(p,x),this.GB(p,x,l),p=T;while(p!=g);(p=this.kl(l))!=-1?(g=this.Tp(p,l),w=this.Tp(f,l),g==p?(this.nn(l,f),this.gy(p,l),this.nn(l,p)):w==f&&this.gy(f,l),this.hr(f,l,g),this.jr(g,l,f),this.hr(p,l,w),this.jr(w,l,p)):this.nn(l,f)}}for(f=this.Ur(l),p=this.Ur(c),g=this.nh.sc(p);g!=-1;g=this.nh.lb(g))this.g.Sa(this.nh.ka(g),this.zh,l);this.nh.Cy(f,p),this.CP(c)},n.prototype.PT=function(l,c){var p=this.qg(l,0),f=this.qg(l,1),g=this.qg(c,0),w=this.qg(c,1);this.Rd.Cy(this.Th(l),this.Th(c)),c==this.kl(p)&&this.nn(p,l),c==this.kl(f)&&this.nn(f,l),this.Zu(c),this.Wu(c),p==g&&f==w||f==g&&p==w||(this.Jn(p,this.Ao),this.Jn(g,this.Ri),this.Ao.rb(this.Ri)?(p!=g&&this.Zm(p,g),f!=w&&this.Zm(f,w)):(f!=g&&this.Zm(f,g),p!=w&&this.Zm(p,w)))},n.prototype.Zu=function(l){var c=this.qg(l,1);this.ZE(l,this.qg(l,0)),this.ZE(l,c)},n.prototype.ZE=function(l,c){var p=this.Tp(l,c),f=this.IR(l,c),g=this.kl(c);p!=l?(this.hr(f,c,p),this.jr(p,c,f),g==l&&this.nn(c,p)):this.nn(c,-1)},n.prototype.RD=function(l,c,p){var f=this.Rd.sc(l),g=this.Rd.ka(f);l=this.Ie(g);var w=this.Ie(this.g.V(g));for(this.g.lr(g,c,p,!0),f=this.Rd.lb(f);f!=-1;f=this.Rd.lb(f)){g=this.Rd.ka(f);var x=this.Ie(g)==l;this.g.lr(g,c,p,x)}f=c.Xp(p,0).bc(),c=c.Xp(p,c.ql(p)-1).xc(),this.wK(l,f),this.wK(w,c)},n.prototype.UE=function(l,c,p){var f=this.Th(l),g=this.qg(l,0),w=this.qg(l,1),x=this.ot(-1);for(this.ph.add(x),this.Rl(x,-3),this.Gf.add(x),this.jj(x,g),l=1,c=c.ql(p);l<c;l++)p=this.$m(-1),this.Ck.add(p),this.Gf.add(p),this.jj(x,p),x=this.ot(-1),this.ph.add(x),this.Rl(x,-3),this.Gf.add(x),this.jj(x,p);for(this.jj(x,w),f=this.Rd.sc(f);f!=-1;f=this.Rd.lb(f))if(w=this.Rd.ka(f),this.Ie(w)==g){l=0;do 0<l&&(x=this.Gf.get(l-1),this.FD(x,w),this.$y(x)==-1&&this.er(x,this.g.Va(w))),x=this.Gf.get(l),l+=2,this.GD(x,w),w=this.g.V(w);while(l<this.Gf.size)}else{l=this.Gf.size-1;do l<this.Gf.size-2&&(x=this.Gf.get(l+1),this.FD(x,w),0>this.$y(x)&&this.er(x,this.g.Va(w))),x=this.Gf.get(l),l-=2,this.GD(x,w),w=this.g.V(w);while(0<=l)}this.Gf.clear(!1)},n.prototype.Ie=function(l){return this.g.Qa(l,this.zh)},n.prototype.NI=function(l,c,p){var f=this.qg(c,0),g=new h.h;this.Jn(f,g);var w=new h.h,x=this.qg(c,1);this.Jn(x,w);var T=p.ql(l),E=p.Xp(l,0),O=new h.h;if(E.$p(O),!g.rb(O)){if(!this.Pg){var C=g.compare(this.xh);0>C*(O=O.compare(this.xh))&&(this.Pg=!0)}this.qF(f,this.Gf),this.Ck.add(f)}for(!this.Pg&&1<T&&(C=g.compare(w),E=E.xc(),(g.compare(E)!=C||E.compare(w)!=C||0>E.compare(this.xh))&&(this.Pg=!0)),l=(E=p.Xp(l,T-1)).xc(),w.rb(l)||(this.Pg||0>(C=w.compare(this.xh))*(O=l.compare(this.xh))&&(this.Pg=!0),this.qF(x,this.Gf),this.Ck.add(x)),this.Gf.add(c),w=0,x=this.Gf.size;w<x;w++)l=this.Gf.get(w),p=this.Rp(l),h.ad.GG(p)&&(this.Nc.wd(p,-1),this.Rl(l,-1)),l!=c&&this.Rp(l)!=-3&&(this.ph.add(l),this.Rl(l,-3));this.Gf.clear(!1)},n.prototype.gO=function(l,c){this.ae.compare(this.Nc,this.Nc.ka(l),c),this.ae.sg&&(this.ae.Mr(),this.jF(l,c))},n.prototype.jF=function(l,c){this.Yn=!0,l=this.Nc.ka(l),c=this.Nc.ka(c);var p=this.Rd.Ln(this.Th(l)),f=this.Rd.Ln(this.Th(c)),g=this.g.cc(p);g==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(p,this.je),g=this.je),(p=this.g.cc(f))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(f,this.Pm),p=this.Pm),this.Ik.Qo(g),this.Ik.Qo(p),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(l,c,-1,this.Ik),this.Ik.clear()},n.prototype.BQ=function(l,c){this.Yn=!0,c=this.Nc.ka(c);var p=this.Rd.Ln(this.Th(c)),f=this.g.cc(p);f==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(p,this.je),f=this.je),p=this.wF(l),this.Ik.Qo(f),this.g.Xi(p,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(c,-1,l,this.Ik),this.Ik.clear()},n.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var l=this.ph.Gc();this.ph.Jf(),this.Rl(l,-1),this.RS(l)!=-1&&this.rS(l),this.Xn=!1}},n.prototype.rS=function(l){if(this.Xn){var c=this.Nc.Bu(this.HH,this.BH,l,!0);this.Xn=!1}else c=this.Nc.ED(l);c==-1?this.PT(this.Nc.ka(this.Nc.AF()),l):(this.Rl(l,c),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,c)))},n.prototype.RS=function(l){var c=this.qg(l,0);if(l=this.qg(l,1),this.Jn(c,this.Ao),this.Jn(l,this.Ri),h.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var p=this.Ao.compare(this.xh),f=this.Ri.compare(this.xh);return 0>=p&&0<f?l:0>=f&&0<p?c:-1},n.prototype.jQ=function(){var l=new h.ja(0);l.Jb(this.g.gd);for(var c=this.g.$q(),p=c.next();p!=-1;p=c.next())this.g.Qa(p,this.zh)!=-1&&l.add(p);this.g.nx(l,l.size),this.kQ(l)},n.prototype.kQ=function(l){this.df.clear(),this.df.Ee(l.size),this.df.Xo(new k(this.g));var c=new h.h;c.Sc();for(var p=-1,f=new h.h,g=0,w=l.size;g<w;g++){var x=l.get(g);this.g.Hc(x,f),f.rb(c)?(x=this.g.Qa(x,this.zh),this.Zm(p,x)):(p=this.Ie(x),this.g.Hc(x,c),x=this.df.zn(x),this.Ft(p,x))}},n.prototype.lQ=function(){var l=new h.ja(0);l.Jb(this.g.gd);for(var c=this.df.sc(-1);c!=-1;c=this.df.lb(c))l.add(this.df.ka(c));this.df.clear(),this.g.nx(l,l.size),c=0;for(var p=l.size;c<p;c++){var f=l.get(c),g=this.Ie(f);f=this.df.zn(f),this.Ft(g,f)}},n.prototype.qF=function(l,c){var p=this.kl(l);if(p!=-1){var f=p;do h.ad.GG(this.Rp(f))&&c.add(f),f=this.Tp(f,l);while(f!=p)}},n.prototype.wK=function(l,c){for(l=this.nh.sc(this.Ur(l));l!=-1;l=this.nh.lb(l))this.g.mf(this.nh.ka(l),c)},n.prototype.cK=function(l,c,p,f){this.Zu(l),c!=-1&&this.Zu(c),this.NI(0,l,f),c!=-1&&this.NI(1,c,f),p!=-1&&(f.Cf.D(this.Ao),this.Jn(p,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(p)),p=0;for(var g=this.Ck.size;p<g;p++){var w=this.Ck.get(p),x=this.Zy(w);x!=-1&&(this.df.wd(x,-1),this.Ft(w,-1))}for(p=this.Th(l),g=c!=-1?this.Th(c):-1,this.RD(p,f,0),c!=-1&&this.RD(g,f,1),this.UE(l,f,0),c!=-1&&this.UE(c,f,1),this.Rd.eh(p),this.Wu(l),c!=-1&&(this.Rd.eh(g),this.Wu(c)),p=0,g=this.Ck.size;p<g;p++)(w=this.Ck.get(p))==this.Lq&&(this.Zv=!0),(x=this.Zy(w))==-1&&((x=this.df.ED(this.wF(w)))==-1?(l=this.Ie(this.df.ka(this.df.AF())),this.Zm(l,w)):this.Ft(w,x));this.Ck.clear(!1)},n.prototype.Jn=function(l,c){this.g.ZF(this.$y(l),c)},n.prototype.wF=function(l){return this.nh.Ln(this.Ur(l))},n.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new u(this),this.Nc.ao=this.ae);var l=new h.ja(0),c=null,p=null;this.BH=this.HH=-1,this.Xn=!1;for(var f=this.df.sc(-1);f!=-1;){this.Xn=!1;var g=this.df.ka(f);this.Lq=this.Ie(g),this.g.Hc(g,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var w=this.kl(this.Lq),x=w==-1;if(!x){g=w;do{var T=this.Rp(g);T==-1?(this.ph.add(g),this.Rl(g,-3)):T!=-3&&l.add(T),g=this.Tp(g,this.Lq)}while(g!=w)}if(0<l.size){for(this.Xn=l.size==1&&this.ph.size==1,x=0,w=l.size;x<w;x++)g=this.Nc.ka(l.get(x)),this.Rl(g,-2);var E=-2,O=-2;for(x=0,w=l.size;x<w;x++){if(T=l.get(x),E==-2){var C=this.Nc.xe(T);C!=-1?(g=this.Nc.ka(C),(g=this.Rp(g))!=-2&&(E=C)):E=-1}if(O==-2&&((T=this.Nc.lb(T))!=-1?(g=this.Nc.ka(T),(g=this.Rp(g))!=-2&&(O=T)):O=-1),E!=-2&&O!=-2)break}for(x=0,w=l.size;x<w;x++)T=l.get(x),g=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(g,-1);l.clear(!1),this.HH=E!=-1?E:-1,this.BH=O!=-1?O:-1,E!=-1&&O!=-1?this.Xn||this.gO(E,O):E==-1&&O==-1&&(this.Xn=!1)}else x&&(c==null&&(c=new o(this)),c.Fh(this.xh),this.Nc.pJ(c),c.sg&&(c.Mr(),this.BQ(this.Lq,c.Fm)));this.sS(),this.Zv?(this.Zv=!1,p==null&&(p=new v(this.g)),p.Fh(this.xh),f=this.df.pJ(p)):f=this.df.lb(f)}return this.Yn},n.prototype.gr=function(l){for(this.g=l,this.zh=this.g.Hd(),this.hb.Ee(l.gd+32),this.Ad.Ee(l.gd),this.nh.Bt(l.gd),this.nh.hn(l.gd),this.Rd.Bt(l.gd+32),this.Rd.hn(l.gd+32),l=this.g.md;l!=-1;l=this.g.ve(l))if(h.ba.Ic(this.g.jc(l)))for(T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var c=this.g.Ka(T),p=this.g.Ya(T),f=this.$m(p),g=this.ot(p);for(this.jj(g,f),E=this.g.V(p),p=0,c-=2;p<c;p++){var w=this.g.V(E),x=this.$m(E);this.jj(g,x),g=this.ot(E),this.jj(g,x),E=w}this.g.ec(T)?(x=this.$m(E),this.jj(g,x),g=this.ot(E),this.jj(g,x),this.jj(g,f)):(x=this.$m(E),this.jj(g,x))}else for(var T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var E=this.g.Ya(T);for(f=0,c=this.g.Ka(T);f<c;f++)this.$m(E),E=this.g.V(E)}this.jQ()},n}();h.MC=s}(U||(U={})),function(h){var k=function(v){function u(o,s,n){var l=v.call(this)||this;if(o!==void 0)if(n!==void 0){l.description=h.fe.pg();var c=new h.Od;c.L(o,s,n),l.ZB(c)}else if(s!==void 0)l.description=h.fe.pg(),l.Db(o,s);else if(o instanceof h.sa)l.description=o;else if(o instanceof h.h)l.description=h.fe.pg(),l.Db(o);else{if(!(o instanceof u))throw h.i.O();l.description=o.description,l.Db(o.Ng(),o.kh()),o.la!==null&&(l.la=o.la.slice(0))}else l.description=h.fe.pg();return l}return yt(u,v),u.prototype.D=function(o){if(o===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(o=new h.h).na(this.la[0],this.la[1]),o}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");o.na(this.la[0],this.la[1])},u.prototype.Db=function(o,s){typeof o=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=o,this.la[1]=s):(this.wc(),this.Db(o.x,o.y))},u.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var o=new h.Od;return o.x=this.la[0],o.y=this.la[1],o.z=this.description.dG()?this.la[2]:h.sa.te(1),o},u.prototype.ZB=function(o){this.wc();var s=this.hasAttribute(1);s||h.sa.yG(1,o.z)||(this.se(1),s=!0),this.la==null&&this.wn(),this.la[0]=o.x,this.la[1]=o.y,s&&(this.la[2]=o.z)},u.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.YB=function(o){this.setAttribute(0,0,o)},u.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.WJ=function(o){this.setAttribute(0,1,o)},u.prototype.XR=function(){return this.Vc(1,0)},u.prototype.sX=function(o){this.setAttribute(1,0,o)},u.prototype.uR=function(){return this.Vc(2,0)},u.prototype.cX=function(o){this.setAttribute(2,0,o)},u.prototype.Fc=function(){return this.tF(3,0)},u.prototype.GJ=function(o){this.setAttribute(3,0,o)},u.prototype.Vc=function(o,s){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+s]:h.sa.te(o)},u.prototype.tF=function(o,s){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+s]:h.sa.te(o)},u.prototype.setAttribute=function(o,s,n){this.wc();var l=this.description.Rf(o);0>l&&(this.se(o),l=this.description.Rf(o)),this.la==null&&this.wn(),this.la[this.description.bk(l)+s]=n},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(o){if(this.la!=null){for(var s=h.fe.Kw(o,this.description),n=[],l=0,c=0,p=o.Ba;c<p;c++){var f=o.ld(c),g=h.sa.Wa(f);if(s[c]==-1){var w=h.sa.te(f);for(f=0;f<g;f++)n[l]=w,l++}else for(w=this.description.bk(s[c]),f=0;f<g;f++)n[l]=this.la[w],l++,w++}this.la=n}this.description=o},u.prototype.wn=function(){this.gJ(this.description.Be.length),u.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(!this.Bc()){var s=this.D();o.Gh(s,s),this.Db(s)}}else this.Bc()||(this.se(1),s=this.xz(),this.ZB(o.hp(s)))},u.prototype.copyTo=function(o){if(o.K()!=33)throw h.i.O();o.wc(),this.la==null?(o.Pa(),o.la=null,o.Pf(this.description)):(o.Pf(this.description),o.gJ(this.description.Be.length),u.YD(this.la,o.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(o){o.Pa(),this.description!=o.description&&o.Pf(this.description),o.$b(this)},u.prototype.A=function(o){this.Bc()?o.Pa():(o.v=this.la[0],o.G=this.la[1],o.C=this.la[0],o.H=this.la[1])},u.prototype.So=function(o){if(this.Bc())o.Pa();else{var s=this.xz();o.v=s.x,o.G=s.y,o.Xe=s.z,o.C=s.x,o.H=s.y,o.Dg=s.z}},u.prototype.Vg=function(o,s){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(o=this.Vc(o,s),n.pa=o,n.wa=o,n)},u.prototype.gJ=function(o){if(this.la==null)this.la=h.P.mg(o);else if(this.la.length<o){for(var s=this.la.slice(0),n=this.la.length;n<o;n++)s[n]=0;this.la=s}},u.YD=function(o,s,n){if(0<n)for(n=0;n<o.length;n++)s[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Bc())return!!o.Bc();for(var s=0,n=this.description.Be.length;s<n;s++)if(this.la[s]!=o.la[s])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(!this.Bc())for(var s=0,n=this.description.Be.length;s<n;s++){var l=this.la[s];l=h.P.truncate(l^l>>>32),o=h.P.Vh(l,o)}return o},u.prototype.ng=function(){return null},u}(h.ba);h.Ta=k}(U||(U={})),function(h){var k=function(){function v(u,o,s){u!==void 0&&(this.x=u,this.y=o,this.z=s)}return v.construct=function(u,o,s){var n=new v;return n.x=u,n.y=o,n.z=s,n},v.prototype.L=function(u,o,s){this.x=u,this.y=o,this.z=s},v.prototype.lx=function(){this.z=this.y=this.x=0},v.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},v.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},v.prototype.sub=function(u){return new v(this.x-u.x,this.y-u.y,this.z-u.z)},v.prototype.Bg=function(u){new v(this.x*u,this.y*u,this.z*u)},v.prototype.Sh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},v}();h.Od=k}(U||(U={})),function(h){var k=function(){function v(u,o,s){this.Iw=this.yA=null,this.Zf=o,this.AT=o.y-s,this.zT=o.y+s,this.Gw=0,this.Zz=u,this.ra=s,this.MT=s*s,this.$z=s!=0,this.Nv=!1}return v.prototype.result=function(){return this.Gw!=0?1:0},v.prototype.UM=function(u){return u=u.ic(u.ge(this.Zf,!1)),h.h.zc(u,this.Zf)<=this.MT},v.prototype.aF=function(u){if(!this.$z&&(this.Zz&&this.Zf.rb(u.bc())||this.Zf.rb(u.xc())))this.Nv=!0;else if(u.oa==this.Zf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var o=Math.max(u.ta,u.qa);this.Zf.x>Math.min(u.ta,u.qa)&&this.Zf.x<o&&(this.Nv=!0)}}else{var s=!1;if(o=Math.max(u.ta,u.qa),this.Zf.x>o?s=!0:this.Zf.x>=Math.min(u.ta,u.qa)&&(s=0<u.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),s){if(this.Zf.y==u.bc().y){if(this.Zf.y<u.xc().y)return}else if(this.Zf.y==u.xc().y&&this.Zf.y<u.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(u.bc().y>u.xc().y?1:-1)}}},v.prototype.MI=function(u){var o=u.Vg(0,1);if(o.pa>this.zT||o.wa<this.AT)return!1;if(this.$z&&this.UM(u))return!0;if(o.pa>this.Zf.y||o.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(o=u.$F()))for(u=0;u<o;u++){var s=this.yA[u].get();if(this.aF(s),this.Nv)return!0}else if(this.aF(u),this.Nv)return!0;return!1},v.KM=function(u,o,s){for(o=new v(u.Kn()==0,o,s),u=u.Ha();u.ab();)for(;u.Ia();)if(s=u.ia(),o.MI(s))return-1;return o.result()},v.LM=function(u,o,s,n){var l=new h.l;u.yc(l),l.X(n,n);var c=new v(u.Kn()==0,s,n);u=u.Ha();var p=new h.l;for(p.L(l),p.C=s.x+n,p.G=s.y-n,p.H=s.y+n,n=(s=o.HF(p,n)).next();n!=-1;n=s.next())if(u.Wb(o.ka(n)),u.Ia()&&(n=u.ia(),c.MI(n)))return-1;return c.result()},v.ym=function(u,o,s){if(u.B())return 0;var n=new h.l;if(u.yc(n),n.X(s,s),!n.contains(o))return 0;if((n=u.Cb)!=null){var l=n.Hk;if(l!=null){if((l=l.Uo(o.x,o.y))==1)return 1;if(l==0)return 0}if((n=n.Gb)!=null)return v.LM(u,n,o,s)}return v.KM(u,o,s)},v.XS=function(u,o,s){return o.B()?0:v.ym(u,o.D(),s)},v.Ol=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},v}();h.Fg=k}(U||(U={})),function(h){var k=function(v){function u(o){return v.call(this,!0,o)||this}return yt(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.sG=function(o,s,n){this.ES(o,s,n)},u.prototype.kR=function(){this.AR()},u}(h.Xk);h.Ea=k}(U||(U={})),function(h){(function(k){k[k.PiPOutside=0]="PiPOutside",k[k.PiPInside=1]="PiPInside",k[k.PiPBoundary=2]="PiPBoundary"})(h.ML||(h.ML={})),h.jd=function(){function k(){}return k.FG=function(v,u,o){return(v=h.Fg.XS(v,u,o))==0?0:v==1?1:2},k.Zd=function(v,u,o){return(v=h.Fg.ym(v,u,o))==0?0:v==1?1:2},k.SX=function(v,u,o,s,n){if(u.length<o||n.length<o)throw h.i.O();for(var l=0;l<o;l++)n[l]=k.Zd(v,u[l],s)},k.nK=function(v,u,o,s,n){if(v.K()==1736)k.SX(v,u,o,s,n);else{if(v.K()!=197)throw h.i.ga("invalid_call");var l=new h.l;v.A(l),k.VM(l,u,o,s,n)}},k.VM=function(v,u,o,s,n){if(u.length<o||n.length<o)throw h.i.O();if(v.B())for(s=0;s<o;s++)n[s]=0;else for(v.X(.5*-s,.5*-s),v.X(.5*s,.5*s),s=0;s<o;s++)v.contains(u[s])?n[s]=1:v.contains(u[s])?n[s]=2:n[s]=0},k.UX=function(v,u,o,s,n){for(var l=0;l<o;l++)n[l]=v.ss(u[l],s)?2:0},k.TX=function(v,u,o,s,n){var l=v.Cb,c=null;l!=null&&(c=l.Hk),l=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var f=u[p];c.Uo(f.x,f.y)==0&&(n[p]=0,l--)}if(l!=0)for(v=v.Ha();v.ab()&&l!=0;)for(;v.Ia()&&l!=0;)for(c=v.ia(),p=0;p<o&&l!=0;p++)n[p]==1&&c.ss(u[p],s)&&(n[p]=2,l--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},k.oK=function(v,u,o,s,n){var l=v.K();if(l==1607)k.TX(v,u,o,s,n);else{if(!h.ba.zd(l))throw h.i.ga("Invalid call.");k.UX(v,u,o,s,n)}},k}()}(U||(U={})),function(h){var k=function(v){function u(o,s){if(arguments.length==2){var n=v.call(this,!1,o.description)||this;n.nf(o),n.lineTo(s)}else n=v.call(this,!1,o)||this;return n}return yt(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.sG=function(o,s,n){this.FS(o,s,n)},u}(h.Xk);h.Ua=k}(U||(U={})),function(h){var k=function(){function v(){}return v.prototype.progress=function(){return!0},v.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.RC()},v}();h.op=k}(U||(U={})),function(h){var k;(k=h.KK||(h.KK={}))[k.clipWithInputHorizon=1]="clipWithInputHorizon",k[k.clipWithOutputHorizon=2]="clipWithOutputHorizon";var v=function(){function s(){this.Mg=3,this.Xu=this.Lr=NaN}return s.prototype.KW=function(n){this.LB(1,n)},s.prototype.LW=function(n){this.LB(2,n)},s.prototype.cS=function(){return this.ks(1)},s.prototype.dS=function(){return this.ks(2)},s.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},s.prototype.ks=function(n){return(this.Mg&n)!=0},s.prototype.Qf=function(){var n=new s;return n.Lr=this.Lr,n.Xu=this.Xu,n.Mg=this.Mg,n},s}();h.tC=v,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.LK||(h.LK={}));var u=function(){function s(){this.Mg=0}return s.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},s.prototype.ks=function(n){return(this.Mg&n)!=0},s.kg=function(n){var l=new s;return l.Mg=n.Mg,l},s.prototype.hM=function(n){this.Mg=n.Mg},s}();h.wY=u;var o=function(){function s(n,l,c){this.ef=n,this.$f=l,this.Wf=new h.l,this.Wf.L(c),this.vT=n.dc()+l.dc()+this.Wf.dc().toString()}return s.prototype.dc=function(){return this.vT},s.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.$f.Nb(n.$f)&&this.Wf.Nb(n.Wf)},s}();h.BY=o,o=function(){function s(){this.$f=this.ef=null,this.mH=new v,this.nH=new u,this.yw=this.Yf=null,this.ow=this.Vn=!0}return s.Pr=function(n,l,c,p){var f;p===void 0&&(p=null),f===void 0&&(f=null);var g=new s;return g.sp(n,l,c,p,f),g},s.prototype.sp=function(n,l,c,p,f){if(n==null||l==null)throw h.i.ga("invalidArgument");if(this.ef=n,this.$f=l,this.ow=this.Vn=!1,p!=null&&(this.mH=p.Qf()),f!=null&&this.nH.hM(f),f=!1,l.Tb()==1&&p!=null&&(p=p.Lr,isNaN(p)||p==0||(f=!0)),n==l)this.Vn=!f,this.ow=!0;else{p=n.Tb();var g=l.Tb();if(p==0||g==0){if(c!=null)throw h.i.O();n.Id()!=null&&l.Id()!=null&&(this.Vn=n.Id().Nb(l.Id()))}else p==3||g==3?this.Vn=n.Nb(l):this.ef.fS(this.$f)?this.Vn=!f:this.Vn=!1,this.Yf=c,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},s.prototype.isIdentity=function(){return this.Vn},s.prototype.iR=function(){return this.mH.Qf()},s.prototype.Nb=function(n){return n==this||!!(n instanceof s&&this.ef.Nb(n.ef)&&this.$f.Nb(n.$f))&&(this.Yf==n.Yf||!(this.Yf==null||n.Yf==null||!this.Yf.Nb(n.Yf)))},s.prototype.kY=function(){this.yw=new h.du(this)},s}(),h.xr=o}(U||(U={})),function(h){var k=function(){function v(){}return v.Ep=function(u){return u*v.jW},v.mx=function(u,o){return v.bP(o-u)},v.cP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.mc.MK(u))&&(u+=360),u)},v.bP=function(u){return 180<(u=v.cP(u))&&(u-=360),u},v.jW=57.29577951308232,v}();h.sr=k,h.Jh=function(){function v(){}return v.nj=function(u,o){var s=new h.l;u.A(s);var n=h.cb.ih(o),l=new h.l;return l.L(n),l.v=s.v,l.C=s.C,l.X(.01*l.da(),0),o=h.ua.Xd(o,s,!1),l.contains(s)?u:h.Vd.clip(u,l,o,0)},v.ms=function(u,o,s,n,l){if(!h.cb.Xc(o))throw h.i.O();var c=h.ua.mj(o,u,!1),p=h.cb.ih(o),f=h.cb.tc(o),g=f.Id().ci,w=h.cb.xv(f);f=h.cb.gv(f),w*=2-w;var x=new h.Oc;p.en(x);var T=[[0,0],[0,0]];if(h.Gg.Tb(o)==2?n?(T[0][0]=v.an(l,x),T[0][1]=p.Lp(),h.cb.wt(),p=T[0][0]*g):(T[0][0]=p.ik(),T[0][1]=l,h.cb.wt(),p=T[0][1]*g):p=l*g,!n&&p!=0)throw h.i.O();var E=new h.ha,O=new h.hd;u=O.Ib(u);for(var C=[0],N=new h.h,D=new h.h,z=new h.h,R=new h.h,G=new h.h,W=new h.h,H=O.Ob(u);H!=-1;H=O.Sb(H)){var ee=O.Ya(H);O.D(ee,z);for(var X=!1,ne=ee=O.V(ee);ne!=-1;ne=O.V(ne)){if(ne==ee){if(X)break;X=!0}if(O.D(ne,R),n&&c<l-z.x&&R.x-l>c||c<l-R.x&&z.x-l>c||!n&&c<-z.y&&R.y>c||c<-R.y&&z.y>c)do if(!(Math.abs(z.x-R.x)>=.5*x.S())){if(h.Gg.Tb(o)==2?(T[0][0]=v.an(z.x,x),T[0][1]=z.y,T[1][0]=v.an(R.x,x),T[1][1]=R.y,h.cb.ZV(),G.x=T[0][0]*g,G.y=T[0][1]*g,W.x=T[1][0]*g,W.y=T[1][1]*g):(G.x=z.x*g,G.y=z.y*g,W.x=R.x*g,W.y=R.y*g),W.x=6.283185307179586*(R.x-z.x)/x.S()+G.x,n){if(D.x=p,D.y=v.Iz(f,w,G,W,p,s),isNaN(D.y))break}else{if(D.x=v.Gz(f,w,G,W,s),isNaN(D.x))break;D.y=0}h.kb.xd(f,w,G.x,G.y,W.x,W.y,E,null,null,s);var ce=E.u;h.kb.xd(f,w,G.x,G.y,D.x,D.y,E,null,null,s);var ue=E.u;h.Gg.Tb(o)==2?(T[0][0]=D.x/g,T[0][1]=D.y/g,h.cb.XQ(),n?(N.y=T[0][1],N.x=l):(N.x=v.qs(T[0][0],z.x,R.x,x),N.y=l)):n?(N.x=l,N.y=D.y/g):(N.x=v.qs(D.x/g,z.x,R.x,x),N.y=l),C[0]=0<ce?h.P.Tk(ue/ce,0,1):.5,C[0]!=0&&C[0]!=1&&(ce=O.Na(ne),O.Wl(ce,C,1),O.Db(O.V(ce),N.x,N.y))}while(0);z.N(R)}}return O.Ke(u)},v.Hn=function(u,o,s,n,l){if(u.B())return u;var c=h.cb.bf(o);return v.Jp(u,s-180*c,360*c,o,n,l,!0)},v.Iz=function(u,o,s,n,l,c){if(3.141592653589793<=Math.abs(s.x-n.x)||!v.Un(s.x,n.x,l))return NaN;if(s.x>n.x)var p=n;else p=s,s=n;n=new h.ha(0);var f=new h.ha(0),g=new h.ha(0);h.kb.xd(u,o,p.x,p.y,s.x,s.y,f,n,null,c);var w=f.u,x=0,T=1,E=new h.h;for(E.N(p);w*(T-x)>1e-12*u;){var O=.5*(x+T);if(h.kb.qj(u,o,p.x,p.y,w*O,n.u,f,g,c),E.x=f.u,E.y=g.u,E.x==l)break;if(v.Un(p.x,E.x,l))T=O;else{if(!v.Un(s.x,E.x,l))return NaN;x=O}}return E.y},v.Un=function(u,o,s){return u=k.Ep(u),o=k.mx(u,k.Ep(o)),(s=k.mx(u,k.Ep(s)))==0||0<o&&0<s&&s<=o||0>o&&0>s&&s>=o},v.an=function(u,o){var s=o.wa-o.pa;return o.Kt(u-Math.floor((u-o.pa)/s)*s)},v.qs=function(u,o,s,n){var l=new h.Oc;for(l.L(o,s),s=n.S(),u=Math.floor((u-o)/s)*s+u,l=l.tf();Math.abs(u-l)>Math.abs(u+s-l);)u+=s;return u},v.Gz=function(u,o,s,n,l){if(s.y>n.y)var c=n;else c=s,s=n;if((n=new h.Oc).L(c.y,s.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-s.x))return NaN;if(c.x==s.x)return c.x;var p=new h.ha(0),f=new h.ha(0),g=new h.ha(0);h.kb.xd(u,o,c.x,c.y,s.x,s.y,f,p,null,l);var w=f.u,x=0,T=1,E=new h.h;for(E.N(c);w*(T-x)>1e-12*u;){var O=.5*(x+T);if(h.kb.qj(u,o,c.x,c.y,w*O,p.u,f,g,l),E.x=f.u,E.y=g.u,n.L(c.y,E.y),E.y==0)break;if(n.contains(0))T=O;else{if(n.L(s.y,E.y),!n.contains(0))return NaN;x=O}}return E.x},v.Jp=function(u,o,s,n,l,c,p){var f=new h.l;if(u.A(f),f.B())return u;var g=new h.Oc;f.en(g);var w=new h.Oc;if(w.L(o,o+s),w.contains(g)&&w.wa!=g.wa)return u;var x=new h.l;x.L(f);var T=u.K();if(T==33)return((f=(x=l?u:u.Qf()).Ng())<w.pa||f>=w.wa||p&&f==w.wa)&&(f+=Math.ceil((w.pa-f)/s)*s,f=w.Kt(f),x.YB(f)),x;if(T==550){for(n=(x=l?u:u.Qf()).vb(0),T=2*x.I(),u=!1,l=0;l<T;l+=2)((f=n.read(l))<w.pa||f>=w.wa||p&&f==w.wa)&&(u=!0,f+=Math.ceil((w.pa-f)/s)*s,f=w.Kt(f),n.write(l,f));return u&&x.Qc(1993),x}if(w.contains(g))return u;if(T==197)return s=l?u:u.Qf(),f.Fa(x),s.Zo(f),s;var E=.1*Math.max(f.da(),f.S());for(x.X(0,E),p=u,w=n.Yd(0),u=h.Ih.local(),l=new h.Ed;;){var O=Math.floor((g.pa-o)/s),C=Math.ceil((g.wa-o)/s);if(!(3<C-O))break;O=Math.floor(.5*(C+O)),x.v=f.v-E,x.C=o+s*O;var N=h.Vd.clip(p,x,w,c);x.v=x.C,x.C=f.C+E;var D=h.Vd.clip(p,x,w,c);l.ig((O-C)*s,0),D.Pc(l),T==1736?p=u.W(N,D,n,null):(p=N).add(D,!1),p.A(f),f.en(g)}for(x.v=o,x.C=o+s,(o=new h.l).L(x),o.X(w,0),(o=Math.floor((f.v-x.v)/s)*s)!=0?(x.move(o,0),l.ig(-o,0)):l.MB(),o=T==1607?new h.Ua(p.description):new h.Ea(p.description),c=new h.l,g=new h.l;f.C>x.v;)(E=h.Vd.clip(p,x,w,0)).A(g),(T==1607?!E.B()&&(g.S()>w||g.da()>w):!E.B()&&(T!=1736||g.S()>w))&&(E.Pc(l),E.A(g),o.A(c),c.X(w,w),c.isIntersecting(g)&&T==1736?o=u.W(o,E,n,null):o.add(E,!1)),x.move(s,0),l.shift(-s,0);return o},v.RI=function(u,o,s,n){var l=new h.ee(s.description);l.Gd(s,0,-1),l=h.cb.Bh(l,u,o);var c=s.I();if(n.Pa(),!h.cb.Xc(u)||c!=l.I())return!1;var p=new h.l;s.A(p);var f=new h.l;if(l.A(f),p=p.S(),f=f.S(),p!=0&&f!=0){if(f/=p,u=h.cb.ih(o).S()/h.cb.ih(u).S(),1e-10<Math.abs(f/u-1))return!1}else if(p!=0||f!=0)return!1;for(n.add(s,!1),s=0;s<c;s++)u=l.Oa(s),n.Db(s,u);return!0},v.Jz=function(){throw h.i.Fe()},v}()}(U||(U={})),function(h){var k,v,u;(v=k=h.ui||(h.ui={}))[v.Clip=0]="Clip",v[v.DontClip=1]="DontClip",v[v.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(u=h.RK||(h.RK={})),h.Ab=function(){function o(){}return o.zv=function(s,n,l){if(l||0<n){for(s=s.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),n=[],l=0;l<s.length;l++)n[l]="a"<=s[l]&&"z">=s[l]?n[l]=s[l].toUpperCase():s[l];return n.join()}return s.toString(h.Tc.PE_STR_AUTH_TOP)},o.wr=function(s,n,l,c){var p=c.length,f=l.I();if(f!=0){var g=l.vb(0),w=Math.min(f,p),x=0,T=s.gh();isNaN(n)&&(n=0);for(var E=s.Xc(),O=179*(s=E?s.tc().Le().S():0)/360;0<f;){if(g.pB(x<<1,w,c),h.gj.projToGeogCenter(T,w,c,n),E)for(var C=0;C<w;C++){var N=c[C][0]-n,D=h.mc.sign(N),z=g.read(2*(x+C));0>D*h.mc.sign(z)&&Math.abs(N)>O&&(c[C][0]+=-D*s)}g.pC(x<<1,w,c),x+=w,f-=w,w=Math.min(f,p)}l.Qc(1993)}},o.DL=function(s,n,l,c){var p=0,f=s.gh();isNaN(p)&&(p=0);var g=s.Xc(),w=s.bf();s=360*w,w*=179;for(var x=c.length,T=0;T<l;){for(var E=T;E<l&&n[E].isNaN();++E)T++;var O=Math.min(x,l-T);if(0<O){E=1;for(var C=T+1;E<O;++E,++C)if(n[C].isNaN()){O=E;break}if(h.ua.Ey(c,n,T,O),h.gj.projToGeogCenter(f,O,c,p),g)for(E=0,C=T;E<O;++E,++C){var N=n[C].x,D=c[E][0]-p,z=h.mc.sign(D);0>z*h.mc.sign(N)&&Math.abs(D)>w&&(c[E][0]-=z*s)}h.ua.Dy(n,T,c,O),T+=O}}},o.Kx=function(s,n,l){var c=l.length,p=n.I();if(!(1>p)){var f=n.vb(0),g=Math.min(p,c),w=0,x=s.gh(),T=s.Xc(),E=T?s.Le().S():0,O=179*E/360,C=0;for(T&&(C=s.Bi());0<p;){if(f.pB(w<<1,g,l),h.gj.geogToProj(x,g,l),T)for(s=0;s<g;s++){var N=l[s][0],D=h.mc.sign(N),z=f.read(2*(w+s))-C;0>D*h.mc.sign(z)&&Math.abs(N)>O&&(l[s][0]+=-D*E)}f.pC(w<<1,g,l),w+=g,p-=g,g=Math.min(p,c)}n.Qc(1993)}},o.CL=function(s,n,l,c){if(l!=0){var p=s.gh(),f=s.Xc(),g=f?s.Le().S():0,w=179*g/360,x=0;for(f&&(x=s.Bi()),s=0;s<l;){for(var T=s;T<l&&n[T].isNaN();++T)s++;var E=Math.min(c.length,l-s);if(0<E){T=1;for(var O=s+1;T<E;++T,++O)if(n[O].isNaN()){E=T;break}if(h.ua.Ey(c,n,s,E),h.gj.geogToProj(p,E,c),f)for(T=0,O=s;T<E;T++){var C=c[T][0],N=h.mc.sign(C);0>N*h.mc.sign(n[O].x-x)&&Math.abs(C)>w&&(c[T][0]-=N*g)}h.ua.Dy(n,s,c,E),s+=E}}}},o.vr=function(s,n,l,c){var p=n.I();if(p!=0){var f=n.vb(0),g=s.ef,w=s.$f,x=g.tc().Sp(),T=w.tc().Sp(),E=g.bf(),O=w.bf();if((s=s.Yf)==null||s.count()==0){for(l=x/T,c=(g.Wp()-w.Wp())*O,T=-90*E,s=90*E,x=!1,O=1,g=2*p;O<g;)E=f.get(O),(w=h.P.Tk(E,T,s))!=E&&(f.set(O,w),x=!0),O+=2;if(c!=0||l!=1)for(x=!0,T=new h.h,O=0;O<p;O++)f.uc(2*O,T),T.x*=l,T.x+=c,T.y*=l,f.Vt(2*O,T);x&&n.Qc(1993)}else{g=c.length,w=Math.min(p,g);var C=h.P.mg(w),N=null,D=0,z=NaN,R=NaN,G=360*O,W=O/E;l&&(R=90*O,z=89.9*E,N=h.P.mg(w));for(var H=!0,ee=0;p!=0;){for(E=!1,f.pB(D<<1,w,c),O=0;O<w;O++)C[O]=c[O][0];if(l)for(O=0;O<w;O++){var X=Math.abs(c[O][1])-z;0<X&&(E=c[O][1],c[O][1]=h.mc.En(z,E),N[O]=h.mc.En(X,E),E=!0)}for(O=c[0][0],s.transform(c,w,x,T),H&&(ee=c[0][0]-W*O,H=!1),O=0;O<w;O++)X=c[O][0]-C[O]*W-ee,200<Math.abs(X)&&(c[O][0]=0<X?c[O][0]-G:c[O][0]+G);if(E){for(O=0;O<w;O++)N[O]!=0&&(c[O][1]+=W*N[O],c[O][1]>R?c[O][1]=R:c[O][1]<-R&&(c[O][1]=-R));for(E=0;E<w;E++)N[E]=0}f.pC(D<<1,w,c),D+=w,p-=w,w=Math.min(p,g)}n.Qc(1993)}}},o.BL=function(s,n,l,c){if(s.ow)c=90*s.ef.bf(),h.ua.ZJ(n,l,-c,c);else{var p=s.Yf,f=s.ef,g=s.$f;s=f.Zr();var w=g.Zr(),x=f.bf(),T=90*x,E=g.bf();if(p==null||p.count()==0){if(c=s/w,p=(f.Wp()-g.Wp())*E,h.ua.ZJ(n,l,-T,T),p!=0||c!=1)for(E=0;E<l;E++)n[E].x*=c,n[E].x+=p,n[E].y*=c}else{f=Math.min(l,c.length),T=h.P.mg(f),g=360*E,x=E/x;for(var O=!0,C=0,N=0;l!=0;){for(E=0;E<f;E++)T[E]=n[E+N].x;for(E=n[0].x,h.ua.Ey(c,n,N,f),p.transform(c,f,s,w),h.ua.Dy(n,N,c,f),O&&(C=n[0].x-x*E,O=!1),E=0;E<f;E++){var D=n[N+E].x-T[E]*x-C;200<Math.abs(D)&&(n[N+E].x=0<D?n[N+E].x-g:n[N+E].x+g)}N+=f,l-=f,f=Math.min(l,c.length)}}}},o.fv=function(s,n){return s=s.ih(),isNaN(n)||s.Lu(n,0),s},o.PQ=function(s,n,l,c,p,f,g,w){for(var x=o.fv(c,p),T=x.S(),E=T/360,O=o.kE*E,C=s.vb(0),N=n.Xc(),D=N?T/n.Le().S():0,z=!1,R=new h.Ea(l.description),G=0,W=l.ea();G<W;++G){var H=N,ee=new h.Ua(l.description);if(ee.addPath(l,G,!0),g!=0){var X=o.KD(!0,ee,x.H-w,x.H,g);(z=z||X)&&(H=!1)}var ne=-1;H&&(ne=s.Ca(G));var ce=ee.vb(0),ue=ee.I(),Ee=0,ye=ce.read(0),Ue=0;X=3*c.Yd(0);var Fe=!1,xe=new h.h;xe.Sc();var Rt=new h.h;Rt.Sc();for(var vi=!1,Dt=1;Dt<ue;++Dt){var dt=h.h.construct(ce.gg(2*Dt),ce.gg(2*Dt+1)),ft=dt.x,it=ft+Ee,Ut=it-ye;if(dt.x=it,Math.abs(Ut)>O){if(H){var tt=ne+(Dt+1<ue?Dt:0),Yr=C.read(2*(ne+Dt-1));tt=(C.read(2*tt)-Yr)*D,Math.abs(Ut-tt)>1*E&&(H=!1)}H||(it=ft+(Ee-=h.mc.En(T,it-ye)),++Ue,vi=Ee!=0,dt.x=it)}else Fe||h.ua.vG(Rt,xe,dt,X)&&(Fe=!0);vi&&ce.write(2*Dt,it),ye=it,Rt.N(xe),xe.N(dt)}0<Ue&&ee.Qc(1993),H=ee.Oa(0),ue=ee.Oa(ue-1),ee=h.h.ub(H,ue)<X?o.pQ(ee,c,p,f,Fe):o.qQ(s,G,ee,c,p),R.add(ee,!1)}return p=c.Yd(0),l=x.S()/180,o.Lt(R,x,.1*p,!1),R=R!=(p=h.ti.clip(R,x,p,l,f)),s=s.He(),g=0,0<(w=p.He())&&0>s?g=1:0>=w&&0<s&&(w==0?(w=NaN,n.Tb()==2?w=n.ol().He():n.Tb()==1&&(w=n.Le().rF()),s>.99*w&&(g=-1)):g=-1),g!=0&&((n=new h.Ea(p.description)).vp(x),(n=h.Zl.local().W(n,l,f)).add(p,!1),R=!0,p=n),R&&(p=h.$l.local().W(p,c,!1,f)),p},o.qQ=function(s,n,l,c,p){var f=l.I(),g=l.Oa(0),w=l.Oa(f-1);p=(c=o.fv(c,p)).S(),g=h.mc.sign(w.x-g.x);var x=new h.l;l.yc(x);var T=c.ik();if(w=T-p,T+=p,0<=g){var E=Math.ceil((w-x.v)/p);for(E*=p;w>x.v+E;)E+=p;for(;w<x.C+E;)E-=p;var O=E;720<x.S()&&(T=w+360*Math.ceil(x.S()/360))}else{for(E=Math.ceil((T-x.C)/p),E*=p;T<x.C+E;)E-=p;for(;T>x.v+E;)E+=p;O=E,720<x.S()&&(w=T-360*Math.ceil(x.S()/360))}E=g*p;var C=h.l.construct(x.v,x.G,x.C,x.H);C.move(O,0);var N=new h.Ed;N.ig(O,0),l.Pc(N),(x=new h.Ua(l.description)).add(l,!1),O=l.Oa(f-1),p=0;for(var D=x.Oa(0).x,z=0;0<g?C.C<T:C.v>w;)1024<=z&&(z=0),C.move(E,0),N.Lb=E,l.Pc(N),D+=E,c.v<=D&&c.C>=D&&(p=x.I()-1),l.Db(0,O),O=l.Oa(f-1),x.Fr(l,0,0,f-1,!1);return l=new h.Ea(x.description),f=0<s.Kr(n),l.add(x,!1),s=x.Oa(0),w=x.Oa(x.I()-1),n=l.ea()-1,(0>g?f:!f)?(g=h.h.construct(w.x,c.H),l.Ei(g),g=h.h.construct(c.ik(),c.H),l.Ei(g),c=h.h.construct(s.x,c.H)):(g=h.h.construct(w.x,c.G),l.Ei(g),g=h.h.construct(c.ik(),c.G),l.Ei(g),c=h.h.construct(s.x,c.G)),l.Ei(c),l.sG(0,n,0),l.fO(p),l},o.pQ=function(s,n,l,c,p){var f=new h.Ea(s.description);f.add(s,!1),f.yB(0,f.I()-1);var g=new h.l;f.yc(g);var w=(l=o.fv(n,l)).S(),x=Math.ceil((l.v-g.v)/w);for(x*=w;l.v>g.v+x;)x+=w;for(;l.v<g.C+x;)x-=w;if((x+=w)!=0){g.move(x,0);var T=new h.Ed;T.ig(x,0),f.Pc(T)}if(l.v<=g.v&&l.C>g.C)return p&&(p=f.He(),n=(f=h.$l.local().W(f,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&f.jJ()),f;for((s=new h.Ea(s.description)).add(f,!1),p=p||g.S()>w-n.Yd(0);g.v<l.C;)g.move(w,0),(T=new h.Ed).ig(w,0),f.Pc(T),s.add(f,!1);return p&&(p=s.He(),s.$o(1),n=(s=h.$l.local().W(s,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&s.jJ()),s},o.KD=function(s,n,l,c,p){for(var f=n.vb(0),g=n.I(),w=!1,x=0;x<g;x++){var T=h.h.construct(f.gg(2*x),f.gg(2*x+1));if(1&p&&T.y>=l){w=!0;break}if(2&p&&T.y<=-l){w=!0;break}}if(!w)return!1;f=!1,s&&(f=n.Pn(0)),g=(s=new h.hd).Ib(n),w=s.Ob(g);var E=-1,O=!0,C=new h.h;C.Sc(),x=new h.Ta;for(var N=-1,D=s.Ya(w);D!=-1;D=s.V(D)){T=s.Oa(D);var z=1&p&&90<=T.y?1:0;if(z|=2&p&&T.y<=-l?2:0,0<E&&E!=z){if(C.x!=T.x){C.x=T.x,s.Xi(s.Na(D),x);var R=s.yj(w,D,x);s.mf(R,C)}if(f)for(N=N!=-1?s.V(N):s.Ya(w),R=s.Na(D);N!=R;)N=s.qd(N,!1);N=-1}0<z&&(T.y=h.mc.En(c,T.y),s.mf(D,T),O||E==z||(T.x!=C.x?(s.Xi(D,x),R=s.yj(w,D,x),s.Db(R,C.x,T.y),N=R):N=D)),E=z,C=T,O=!1}if(f){if(N!=-1)for(N=s.V(N);N!=-1;)N=s.qd(N,!1);l=s.Ya(w),s.hq(l,s.tj(w))||(s.Xi(l,x),s.yj(w,-1,x))}return s.Ke(g).copyTo(n),!0},o.Hz=function(s,n,l,c){var p=s;if(p.B()||l==k.DontClip)return p;var f=p.K();if(f==33)return p=[(c=p).D()],o.tG(p,1,n,l),p[0].isNaN()?c.Pa():c.Db(p[0]),s;var g=(s=n.tc()).bf(),w=90*g,x=180*g,T=360*g,E=n.Bi(),O=.5*g,C=new h.l;p.A(C);var N=n.Xr(),D=n.KQ(),z=N.K()==197;if(n=new h.l,N.A(n),l==k.PannableFold&&(l=s.Le().S(),n.v=E-.5*l,n.C=n.v+l),C.G<-w||C.H>w){if(new h.l().L(C.v-g,-w,C.C+g,w),(p=h.ti.Pu(p,n,s,NaN,0,c)).B())return p;p.A(C)}if(D&&(n.H<C.G||n.G>C.H))return p.Ja();if(C.S()>T&&(p=o.Jp(p,E-x,T,s,!0,0,!0,c)).A(C),(w=o.$N(C.v,C.C,n.v,n.C,T))!=0&&C.move(w,0),C.C>n.C||C.v<n.v){if(C.C>n.C)for(;C.v>=n.C;)C.move(-T,0),w-=T;for(;C.v<n.C-T;)C.move(T,0),w+=T}if(l=h.ua.Ju(s,N),w!=0&&((g=new h.Ed).ig(w,0),p.Pc(g)),D){if(z&&n.contains(C))return p;for(D=[null,null],w=0;2>w;w++){if(z?g=h.ba.Ic(f)?h.ti.clip(p,n,l,O,c):h.ti.clip(p,n,l,0,c):(g=h.Zj.local().W(p,N,s,c))==N&&(g=h.ba.kg(g)),n.v<=C.v&&n.C>=C.C||n.v>=C.v&&n.C<=C.C)return g;D[w]=g,w==0&&(C.move(-T,0),(g=new h.Ed).ig(-T,0),p.Pc(g))}if(f==550)D[0].Gd(D[1],0,-1);else if(h.ba.Ic(f))D[0].add(D[1],!1);else{if(f!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");D[0].B()&&(D[0]=D[1])}return D[0]}if(n.H<C.G||n.G>C.H)return p;for(f=0;!p.B()&&C.C>n.v;)f!=0&&((g=new h.Ed).ig(f,0),p.Pc(g)),h.fj.local().W(4,p,N,s,c)||N==(p=h.mp.local().W(p,N,s,c))&&(p=h.ba.kg(p)),f!=0&&((O=new h.Ed).ig(-f,0),p.Pc(O)),f-=T,C.move(-T,0);return p},o.tG=function(s,n,l,c){if(n!=0&&c!=k.DontClip)if(c==k.PannableFold){c=l.CR();for(var p=n,f=0;f<n;f++)(s[f].y>c.H||s[f].y<c.G)&&(s[f].Sc(),p--);p!=0&&o.cv(s,n,c.v,c.S())}else{var g=90*(c=l.bf()),w=180*c;for(c*=360,p=n,f=0;f<n;f++)(s[f].y>g||s[f].y<-g)&&(s[f].Sc(),p--);if(p!=0){(p=new h.l).bx(s,n),g=l.Xr();var x=l.kv();f=g.K()==197;var T=new h.l;if(g.A(T),!x||!(T.H<p.G||T.G>p.H))if(x)if(o.cv(s,n,T.ik()-w,c),p=n,f)for(f=0;f<n;f++)T.contains(s[f])||(s[f].Sc(),p--);else for(l=h.ua.Ju(l.tc(),g),f=0;f<n;f++)(w=h.jd.Zd(g,s[f],l)!=0)||(s[f].Sc(),p--);else for(o.cv(s,n,-w,c),p=n,l=h.ua.Ju(l.tc(),g),f=0;f<n;f++)(w=s[f]).isNaN()&&p--,x=o.oE(w.x,T.v,T.C,c),w.x+=x,(w=h.jd.Zd(g,w,l)!=0)&&(s[f].Sc(),p--)}}},o.Jp=function(s,n,l,c,p,f,g,w){var x=s.K(),T=n+l;if(x===33){var E=(c=p?s:s.Qf()).Ng();return(E<n||E>=T||g&&E==T)&&(E+=Math.ceil((n-E)/l)*l,E=h.P.Tk(E,n,T),c.YB(E)),c}if(s.B()||(E=new h.l,s.A(E),E.B()))return s;var O=new h.Oc;E.en(O);var C=new h.Oc;if(C.L(n,T),C.contains(O))return s;if((T=new h.l).L(E),x===550){for(w=(c=p?s:s.Qf()).vb(0),x=2*c.I(),T=!1,n=0;n<x;n+=2)((E=w.read(n))<C.pa||E>=C.wa||g&&E==C.wa)&&(T=!0,E+=Math.ceil((C.pa-E)/l)*l,E=C.Kt(E),w.write(n,E));return T&&c.Qc(1993),c}if(x==197)return l=p?s:s.Qf(),E.Fa(T),l.Zo(E),l;var N=.1*Math.max(E.da(),E.S());for(T.X(0,N),g=s,C=c.Yd(0),s=h.Ih.local(),p=new h.Ed;;){var D=Math.floor((O.pa-n)/l),z=Math.ceil((O.wa-n)/l);if(!(3<z-D))break;D=Math.floor(.5*(z+D)),T.v=E.v-N,T.C=n+l*D;var R=h.ti.clip(g,T,C,f,w);T.v=T.C,T.C=E.C+N;var G=h.ti.clip(g,T,C,f,w);p.ig((D-z)*l,0),G.Pc(p),x==1736?g=s.W(R,G,c,null):(g=R).add(G,!1),g.A(E),E.en(O)}for(T.v=n,T.C=n+l,(n=new h.l).L(T),n.X(C,0),(n=Math.floor((E.v-T.v)/l)*l)!=0?(T.move(n,0),p.ig(-n,0)):p.MB(),n=x==1607?new h.Ua(g.description):new h.Ea(g.description),f=new h.l,O=new h.l;E.C>T.v;)(N=h.ti.clip(g,T,C,0,w)).A(O),(x==1607?!N.B()&&(O.S()>C||O.da()>C):!N.B()&&(x!=1736||O.S()>C))&&(N.Pc(p),N.A(O),n.A(f),f.X(C,C),f.isIntersecting(O)&&x==1736?n=s.W(n,N,c,null):n.add(N,!1)),T.move(l,0),p.shift(-l,0);return n},o.cv=function(s,n,l,c){for(var p=l+c,f=0;f<n;f++){var g=s[f].x;l<=g&&g<p||!(g<l||g>p||g==p)||(g+=Math.ceil((l-g)/c)*c,g=h.P.Tk(g,l,p),s[f].x=g)}},o.Hn=function(s,n,l,c,p,f){if(!n.Xc())throw h.i.ga("fold_into_360_degree_range");if(s.B())return s;if(n.Tb()==2){l=n.rv();var g=n.qv()-l}else{var w=n.bf();g=360*w,l-=180*w}return o.Jp(s,l,g,n,c,p,!0,f)},o.lF=function(s,n,l,c){if(l.Tb()==2)c=l.rv(),l=l.qv()-c;else{var p=l.bf();l=360*p,c-=180*p}o.cv(s,n,c,l)},o.nj=function(s,n){var l=n.Le();if(s.K()==33){var c=s.kh();return l.G<=c&&c<=l.H?s:s.Ja()}c=new h.l,s.A(c);var p=new h.l;return p.L(l),p.v=c.v,p.C=c.C,p.X(.01*p.da(),0),l=h.ua.py(n,c),p.contains(c)?s:h.ti.clip(s,p,l,0,null)},o.kr=function(s,n,l){return s>n.C&&s-n.C<l?n.C:s<n.v&&n.v-s<l?n.v:s},o.BX=function(s,n,l,c){c.x=o.kr(s.x,n,l),c.y=s.y},o.AX=function(s,n,l,c){for(var p=0;p<n;p++)s[p].y<l.G||s[p].y>l.H?s[p].Sc():s[p].x=o.kr(s[p].x,l,c)},o.Lt=function(s,n,l,c){if(!s.B()){var p=s.K();if(!c||p!=1736)if(h.ba.zj(p)){c=s.vb(0),p=0;for(var f=s.I();p<f;p++){var g=c.read(2*p),w=o.kr(g,n,l);w!=g&&c.write(2*p,w)}s.Qc(1993)}else if(p==197)c=new h.l,s.A(c),c.v=o.kr(c.v,n,l),c.C=o.kr(c.C,n,l),s.Zo(c);else{if(p!=33)throw h.i.ga("internal error");s.YB(o.kr(s.Ng(),n,l))}}},o.pS=function(s,n,l,c){var p=new h.hd,f=p.Ib(s);return s=h.ua.Ju(n,s),o.ms(p,f,n,s,l,!0,c),p.Ke(f)},o.ms=function(s,n,l,c,p,f,g){if(!l.Xc())throw h.i.O("invalid call");var w=l.Le(),x=l.tc(),T=x.gh().getDatum().getSpheroid();x=x.Id().ci;var E=T.getFlattening();T=T.getAxis(),E*=2-E;var O=new h.Oc;w.en(O);var C=null,N=[[0,0],[0,0]];if(l.Tb()==2?(C=l.gh(),f?(N[0][0]=o.an(g,O),N[0][1]=w.Lp(),h.gj.projToGeog(C,1,N),w=N[0][0]*x):(N[0][0]=w.ik(),N[0][1]=g,h.gj.projToGeog(C,1,N),w=N[0][1]*x)):w=g*x,!f&&w!=0&&p!=u.GreatElliptic)throw h.i.ga("invalid argument");var D=new h.ha,z=[0],R=new h.h,G=new h.h,W=new h.h,H=[null,null],ee=new h.h,X=new h.h,ne=new h.h,ce=new h.h;for(n=s.Ob(n);n!=-1;n=s.Sb(n)){var ue=s.Ya(n);s.D(ue,ee);for(var Ee=!1,ye=ue=s.V(ue);ye!=-1;ye=s.V(ye)){if(ye==ue){if(Ee)break;Ee=!0}if(s.D(ye,X),f&&(c<g-ee.x&&X.x-g>c||c<g-X.x&&ee.x-g>c)||!f&&(g!=0||c<-ee.y&&X.y>c||c<-X.y&&ee.y>c))do if(!(Math.abs(ee.x-X.x)>=.5*O.S())){if(l.Tb()==2?(N[0][0]=o.an(ee.x,O),N[0][1]=ee.y,N[1][0]=o.an(X.x,O),N[1][1]=X.y,h.gj.projToGeogCenter(C,2,N,0),ne.x=N[0][0]*x,ne.y=N[0][1]*x,ce.y=N[1][1]*x):(ne.x=ee.x*x,ne.y=ee.y*x,ce.y=X.y*x),ce.x=2*(X.x-ee.x)*Math.PI/O.S()+ne.x,f){if(G.x=w,G.y=o.Iz(T,E,ne,ce,w,p),isNaN(G.y))break;H[0]=G;var Ue=1}else if(p==u.GreatElliptic){var Fe=[0,0];if((Ue=h.Nx.Jz(E,ne,ce,w,Fe))==0)break;G.x=Fe[0],G.y=w,H[0]=G,Ue==2&&(W.x=Fe[1],W.y=w,H[1]=W)}else{if(G.x=o.Gz(T,E,ne,ce,p),isNaN(G.x))break;G.y=0,H[0]=G,Ue=1}var xe=-1;for(Fe=0;Fe<Ue;Fe++){h.kb.xd(T,E,ne.x,ne.y,ce.x,ce.y,D,null,null,p);var Rt=D.u;h.kb.xd(T,E,ne.x,ne.y,H[Fe].x,H[Fe].y,D,null,null,p);var vi=D.u;if(l.Tb()==2?(N[0][0]=H[Fe].x/x,N[0][1]=H[Fe].y/x,h.gj.geogToProj(C,1,N),f?(R.y=N[0][1],R.x=g):(R.x=o.qs(N[0][0],ee.x,X.x,O),R.y=g)):f?(R.x=g,R.y=H[Fe].y/x):(R.x=o.qs(H[Fe].x/x,ee.x,X.x,O),R.y=g),z[0]=0<Rt?h.P.Tk(vi/Rt,0,1):.5,z[0]==0||z[0]==1)break;xe>z[0]||(xe=s.Na(ye),s.Wl(xe,z,1),s.Db(s.V(xe),R.x,R.y),xe=z[0])}}while(0);ee.N(X)}}},o.an=function(s,n){var l=n.wa-n.pa;return n.Kt(s-Math.floor((s-n.pa)/l)*l)},o.qs=function(s,n,l,c){var p=new h.Oc;for(p.L(n,l),l=c.S(),s=Math.floor((s-n)/l)*l+s,p=p.tf();Math.abs(s-p)>Math.abs(s+l-p);)s+=l;return s},o.Un=function(s,n,l){return s=h.sr.Ep(s),n=h.sr.mx(s,h.sr.Ep(n)),(l=h.sr.mx(s,h.sr.Ep(l)))==0||0<n&&0<l&&l<=n||0>n&&0>l&&l>=n},o.Iz=function(s,n,l,c,p,f){if(f==u.GreatElliptic)return h.Nx.NS(n,l,c,p);if(Math.abs(l.x-c.x)>=Math.PI||!o.Un(l.x,c.x,p))return NaN;if(l.x>c.x)var g=c;else g=l,l=c;c=new h.ha;var w=new h.ha,x=new h.ha;h.kb.xd(s,n,g.x,g.y,l.x,l.y,w,c,null,f);var T=w.u,E=0,O=1,C=new h.h;for(C.N(g);T*(O-E)>1e-12*s;){var N=.5*(E+O);if(h.kb.qj(s,n,g.x,g.y,T*N,c.u,w,x,f),C.x=w.u,C.y=x.u,C.x==p)break;if(o.Un(g.x,C.x,p))O=N;else{if(!o.Un(l.x,C.x,p))return NaN;E=N}}return C.y},o.Gz=function(s,n,l,c,p){if(p==u.GreatElliptic)return s=[0,0],h.Nx.Jz(n,l,c,0,s),s[0];if(l.y>c.y)var f=c;else f=l,l=c;if((c=new h.Oc).L(f.y,l.y),!c.contains(0)||Math.abs(f.x-l.x)>=Math.PI)return NaN;if(f.x==l.x)return f.x;var g=new h.ha,w=new h.ha,x=new h.ha;h.kb.xd(s,n,f.x,f.y,l.x,l.y,w,g,null,p);var T=w.u,E=0,O=1,C=new h.h;for(C.N(f);T*(O-E)>1e-12*s;){var N=.5*(E+O);if(h.kb.qj(s,n,f.x,f.y,T*N,g.u,w,x,p),C.x=w.u,C.y=x.u,c.L(f.y,C.y),C.y==0)break;if(c.contains(0))O=N;else{if(c.L(l.y,C.y),!c.contains(0))return NaN;E=N}}return C.x},o.RI=function(s,n,l,c){if(!s.ef.Xc())return!1;var p=new h.ee(n.description);if(p.Gd(n,0,-1),c=h.Gx.local().W(p,s,c),p=n.I(),l.Pa(),p!=c.I())return!1;var f=new h.l;n.A(f);var g=new h.l;if(c.A(g),f=f.S(),g=g.S(),f!=0&&g!=0){if(g/=f,s=s.$f.ih().S()/s.ef.ih().S(),1e-10<Math.abs(g/s-1))return!1}else if(f!=0||g!=0)return!1;for(l.add(n,!1),n=new h.h,s=0;s<p;s++)c.D(s,n),l.Db(s,n);return!0},o.lN=function(s,n){return(s%=360*n)>=180*n&&(s-=360*n),s},o.OI=function(s,n,l,c){if(l==k.Clip){var p=n.ol();p.K()==197?(l=new h.l,p.A(l),p=h.ua.py(n,l),s=h.ti.clip(s,l,p,5e4*n.rm(),c)):h.fj.local().W(1,p,s,n,c)||(s=h.Zj.local().W(s,p,n,c))==p&&(s=h.Xk.kg(s))}else n.Xc()&&(c=new h.l,s.yc(c),n.Le().contains(c)||(o.Lt(s,n.Le(),n.Yd(0),!0),l==k.PannableFold&&(s=o.nj(s,n)),s=o.Hn(s,n,0,!0,1e5*n.rm(),null)));return s},o.SD=function(s,n,l){var c=n.Yr();if(c==null)return s;var p=(n=n.tc()).Le().S(),f=new h.l;s.yc(f);var g=new h.Oc;f.en(g),f=c.Ha(),c=null;for(var w=new h.Ed;f.ab();)for(;f.Ia();){var x=f.ia(),T=x.Vg(0,0),E=new h.Oc;for(E.L(T.pa,T.wa),T=0;E.wa>g.pa;)E.move(-p),--T;for(;E.pa<=g.wa;){if(E.isIntersecting(g)){c==null&&(c=new h.Ua);var O=h.zb.YO(x.bc(),x.xc());T!=0&&(w.ig(T*p,0),O.Pc(w)),c.pc(O,!0)}E.move(p),++T}}return c!=null?(n=h.ua.bO(n,c),n=h.ua.Gr(n),h.bu.gP(s,c,n,l)):s},o.$N=function(s,n,l,c,p){return s>=l&&n<=c?0:o.oE(.5*(n+s),l,c,p)},o.oE=function(s,n,l,c){return h.mc.round((.5*(l+n)-s)/c)*c},o.QQ=function(s,n,l,c,p,f,g,w){var x=o.fv(c,p),T=x.S(),E=T/360,O=o.kE*E,C=s.vb(0),N=n.Xc(),D=N?T/n.Le().S():0;n=s.Ja();for(var z=0,R=l.ea();z<R;++z){var G=N,W=new h.Ua(l.description);W.addPath(l,z,!0);var H=l.ec(z);g!=0&&(H=o.KD(H,W,x.H-w,x.H,g))&&(G=!1);var ee=-1;H=W.I();var X=!1;G&&(ee=s.Ca(z),X=s.ec(z));var ne=W.vb(0),ce=0,ue=ne.read(0),Ee=0,ye=3*c.Yd(0),Ue=!1,Fe=new h.h;Fe.Sc();var xe=new h.h;xe.Sc();for(var Rt=!1,vi=1;vi<H;++vi){var Dt=h.h.construct(ne.gg(2*vi),ne.gg(2*vi+1)),dt=Dt.x,ft=dt+ce,it=ft-ue;if(Dt.x=ft,Math.abs(it)>O){if(G){var Ut=ee+vi-1,tt=ee;(!X||vi+1<H)&&(tt+=vi),Ut=C.read(2*Ut),tt=(C.read(2*tt)-Ut)*D,Math.abs(it-tt)>1*E&&(N=!1)}G||(ft=dt+(ce-=h.mc.En(T,ft-ue)),++Ee,Rt=ce!=0,Dt.x=ft)}else Ue||h.ua.vG(Fe,xe,Dt,ye)&&(Ue=!0);Rt&&ne.write(2*vi,ft),ue=ft,Fe.N(xe),xe.N(Dt)}Ee!=0&&W.Qc(1993),G=W.Oa(0),H=W.Oa(H-1),h.h.ub(G,H),W=o.rQ(W,c,isNaN(p)?0:p,f),n.add(W,!1)}return s=c.Yd(0),l=x.S()/180,o.Lt(n,x,.1*s,!1),h.ti.clip(n,x,s,l,f)},o.rQ=function(s,n,l,c){return o.Hn(s,n,l,!0,0,c)},o.JS=function(s,n,l,c){var p=s.K();if(p==1736)for(n=n!=null?n.Yd(0):0,p=0;p<c;p++)h.jd.Zd(s,l[p],n)!=1&&l[p].Sc();else{if(p!=197)throw h.i.O();for(p=0;p<c;p++)s.ZO(l[p])||l[p].Sc()}},o.bl=function(s,n,l,c){if(32>l)for(var p=new h.Ta,f=0;f<l;f++)p.Db(n[f]),s.bl(p,c).D(n[f]);else{var g=new h.ee;for(g.se(3),g.CD(n,l),p=g.vb(3),f=0;f<l;f++)p.write(f,f);for(f=s.bl(g,c),s=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),g=0;g<l;g++)n[g]=c;for(l=f.I(),f=0;f<l;f++)c=p.read(f),s.uc(2*f,n[c])}},o.al=function(s,n,l,c){if(32>l)for(var p=new h.Ta,f=0;f<l;f++)p.Db(n[f]),s.al(p,c).D(n[f]);else{var g=new h.ee;for(g.se(3),g.CD(n,l),p=g.vb(3),f=0;f<l;f++)p.write(f,f);for(f=s.al(g,c),s=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),g=0;g<l;g++)n[g]=c;for(l=f.I(),f=0;f<l;f++)c=p.read(f),s.uc(2*f,n[c])}},o.kE=210,o}()}(U||(U={})),function(h){var k;(k=h.PL||(h.PL={}))[k.rightSide=1]="rightSide";var v=function(){function u(o,s,n){this.Ds=new h.h,o===void 0?this.Ko=-1:(this.Ds.N(o),this.Ko=s,this.La=n,this.pw=0)}return u.prototype.RJ=function(o){this.pw=o?1|this.pw:-2&this.pw},u.prototype.B=function(){return 0>this.Ko},u.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},u.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Ko},u.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.pw)!=0},u.prototype.by=function(o,s,n,l){this.Ds.x=o,this.Ds.y=s,this.Ko=n,this.La=l},u}();h.bm=v}(U||(U={})),function(h){var k=function(){function u(){}return u.prototype.Wo=function(o,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,o.yc(this.Gk),this.Gk.X(s,s),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(o.K()))?(this.OH=o.bc(),this.NH=o.xc(),this.ra=s):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},u.prototype.Zi=function(o,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(o),this.Gk.X(s,s),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},u.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var o=null,s=null,n=null,l=null;this.xs&&(o=new h.h,s=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.vk!=-1;){var p=this.Gb.Xy(this.Gb.hv(this.vk));if(p.isIntersecting(this.Gk)){if(!this.xs){c=!0;break}if(o.N(this.OH),s.N(this.NH),n.L(p),n.X(this.ra,this.ra),0<n.uy(o,s)){c=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){p=this.vh.Gc();var f=this.Ki[this.Ki.length-1];for(l==null&&((l=[])[0]=new h.l,l[1]=new h.l,l[2]=new h.l,l[3]=new h.l),v.zJ(f,l),this.vh.Jf(),--this.Ki.length,f=0;4>f;f++){var g=this.Gb.Np(p,f);if(g!=-1&&0<this.Gb.RR(g)&&l[f].isIntersecting(this.Gk))if(this.xs){if(o.N(this.OH),s.N(this.NH),n.L(l[f]),n.X(this.ra,this.ra),0<n.uy(o,s)){var w=new h.l;w.L(l[f]),this.vh.add(g),this.Ki.push(w)}}else(w=new h.l).L(l[f]),this.vh.add(g),this.Ki.push(w)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},u.XO=function(o,s,n){var l=new u;return l.Gb=o,l.Gk=new h.l,l.vh=new h.ja(0),l.Ki=[],l.Wo(s,n),l},u.WO=function(o,s,n){var l=new u;return l.Gb=o,l.Gk=new h.l,l.vh=new h.ja(0),l.Ki=[],l.Zi(s,n),l},u.VO=function(o){var s=new u;return s.Gb=o,s.Gk=new h.l,s.vh=new h.ja(0),s.Ki=[],s},u}();h.CY=k;var v=function(){function u(o,s){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Pk(o,s)}return u.prototype.reset=function(o,s){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(o,s)},u.prototype.xj=function(o,s){return this.Bv(o,s,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(o,s,n){n=n==-1?this.kf:this.RF(n);var l=this.da(n),c=this.jR(n);return this.Bv(o,s,l,c,n,!1,-1)},u.prototype.ka=function(o){return this.eR(o)},u.prototype.BF=function(o){return this.Xy(this.hv(o))},u.prototype.da=function(o){return this.lv(o)},u.prototype.jR=function(o){var s=new h.l;s.L(this.Da);var n=this.lv(o);o=this.LF(o);for(var l=0;l<2*n;l+=2){var c=h.P.truncate(3&o>>l);c==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):c==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(c==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},u.prototype.RR=function(o){return this.vz(o)},u.prototype.qR=function(o,s){return k.XO(this,o,s)},u.prototype.HF=function(o,s){return k.WO(this,o,s)},u.prototype.getIterator=function(){return k.VO(this)},u.prototype.Pk=function(o,s){if(0>s||32<2*s)throw h.i.O("invalid height");this.wT=s,this.Da.L(o),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},u.prototype.Bv=function(o,s,n,l,c,p,f){if(!l.contains(s))return n==0?-1:this.Bv(o,s,0,this.Da,this.kf,p,f);if(!p)for(var g=c;g!=-1;g=this.DR(g))this.jx(g,this.vz(g)+1);(g=new h.l).L(l),l=c;var w=[];for(w[0]=new h.l,w[1]=new h.l,w[2]=new h.l,w[3]=new h.l;n<this.wT&&this.dO(l);n++){u.zJ(g,w);for(var x=!1,T=0;4>T;T++)if(w[T].contains(s)){x=!0;var E=this.Np(l,T);E==-1&&(E=this.mP(l,T)),this.jx(E,this.vz(E)+1),l=E,g.L(w[T]);break}if(!x)break}return this.nS(o,s,n,g,l,p,c,f)},u.prototype.nS=function(o,s,n,l,c,p,f,g){var w=this.IF(c);if(p){if(c==f)return g;this.NP(g),p=g}else p=this.oP(),this.IB(p,o),this.FW(this.hv(p),s);return this.hX(p,c),w!=-1?(this.hx(p,w),this.ex(w,p)):this.BJ(c,p),this.NB(c,p),this.dx(c,this.nv(c)+1),this.cO(c)&&this.HQ(n,l,c),p},u.prototype.NP=function(o){var s=this.RF(o),n=this.IF(s),l=this.JR(o),c=this.pv(o);this.Wr(s)==o?(c!=-1?this.hx(c,-1):this.NB(s,-1),this.BJ(s,c)):n==o?(this.ex(l,-1),this.NB(s,l)):(this.hx(c,l),this.ex(l,c)),this.hx(o,-1),this.ex(o,-1),this.dx(s,this.nv(s)-1)},u.zJ=function(o,s){var n=.5*(o.v+o.C),l=.5*(o.G+o.H);s[0].L(n,l,o.C,o.H),s[1].L(o.v,l,n,o.H),s[2].L(o.v,o.G,n,l),s[3].L(n,o.G,o.C,l)},u.prototype.cO=function(o){return this.nv(o)==8&&!this.bG(o)},u.prototype.HQ=function(o,s,n){var l=this.Wr(n);do{var c=this.hv(l),p=this.ai.U(l,0);c=this.Xy(c),this.Bv(p,c,o,s,n,!0,l),l=p=this.pv(l)}while(l!=-1)},u.prototype.dO=function(o){return 8<=this.nv(o)||this.bG(o)},u.prototype.bG=function(o){return this.Np(o,0)!=-1||this.Np(o,1)!=-1||this.Np(o,2)!=-1||this.Np(o,3)!=-1},u.prototype.mP=function(o,s){var n=this.jf.De();return this.JW(o,s,n),this.jx(n,0),this.dx(n,0),this.Rk(n,o),this.FJ(n,this.lv(o)+1),this.IJ(n,s<<2*this.lv(o)|this.LF(o)),n},u.prototype.oP=function(){var o=this.ai.De();if(0<this.iw.size){var s=this.iw.Gc();this.iw.Jf()}else s=this.ys.length,this.ys.push(new h.l);return this.GW(o,s),o},u.prototype.Np=function(o,s){return this.jf.U(o,s)},u.prototype.JW=function(o,s,n){this.jf.T(o,s,n)},u.prototype.Wr=function(o){return this.jf.U(o,4)},u.prototype.BJ=function(o,s){this.jf.T(o,4,s)},u.prototype.IF=function(o){return this.jf.U(o,5)},u.prototype.NB=function(o,s){this.jf.T(o,5,s)},u.prototype.LF=function(o){return this.jf.U(o,6)},u.prototype.IJ=function(o,s){this.jf.T(o,6,s)},u.prototype.nv=function(o){return this.jf.U(o,7)},u.prototype.vz=function(o){return this.jf.U(o,8)},u.prototype.dx=function(o,s){this.jf.T(o,7,s)},u.prototype.jx=function(o,s){this.jf.T(o,8,s)},u.prototype.DR=function(o){return this.jf.U(o,9)},u.prototype.Rk=function(o,s){this.jf.T(o,9,s)},u.prototype.lv=function(o){return this.jf.U(o,10)},u.prototype.FJ=function(o,s){this.jf.T(o,10,s)},u.prototype.eR=function(o){return this.ai.U(o,0)},u.prototype.IB=function(o,s){this.ai.T(o,0,s)},u.prototype.JR=function(o){return this.ai.U(o,1)},u.prototype.pv=function(o){return this.ai.U(o,2)},u.prototype.hx=function(o,s){this.ai.T(o,1,s)},u.prototype.ex=function(o,s){this.ai.T(o,2,s)},u.prototype.RF=function(o){return this.ai.U(o,3)},u.prototype.hX=function(o,s){this.ai.T(o,3,s)},u.prototype.hv=function(o){return this.ai.U(o,4)},u.prototype.GW=function(o,s){this.ai.T(o,4,s)},u.prototype.Xy=function(o){return this.ys[o]},u.prototype.FW=function(o,s){this.ys[o].L(s)},u}();h.fu=v}(U||(U={})),function(h){var k;(k=h.WK||(h.WK={}))[k.Outside=0]="Outside",k[k.Inside=1]="Inside",k[k.Border=2]="Border";var v=function(){function o(s,n){this.KT=n,this.Xh=s}return o.prototype.ax=function(s,n){this.dH!=n&&s.flush(),this.dH=n},o.prototype.bF=function(s,n){for(var l=0;l<n;)for(var c=s[l++],p=s[l++],f=s[l++]*this.KT;c<p;c++)this.Xh[f+(c>>4)]|=this.dH<<2*(15&c)},o}();h.DY=v;var u=function(){function o(s,n,l){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(s,n,l)}return o.create=function(s,n,l){if(!o.uE(s))throw h.i.O();return o.rP(s,n,l)},o.kW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw h.i.ga("Internal Error")}return s},o.uE=function(s){return!(s.B()||s.K()!=1607&&s.K()!=1736)},o.prototype.mQ=function(s,n){n=n.Ha();for(var l=new h.h,c=new h.h;n.ab();)for(;n.Ia();){var p=n.ia();if(p.K()!=322)throw h.i.ga("Internal Error");s.Gh(p.bc(),l),s.Gh(p.xc(),c),this.Ti.fy(l.x,l.y,c.x,c.y)}this.Ti.dJ(h.Ox.Bx)},o.prototype.nQ=function(){throw h.i.ga("Internal Error")},o.prototype.My=function(s,n){for(var l=1;4>l;l++)s.fy(n[l-1].x,n[l-1].y,n[l].x,n[l].y);s.fy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ti.dJ(h.Ox.Bx)},o.prototype.mK=function(s,n,l){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new h.h;n=n.Ha(),l=this.Lk.$X(l)+1.5,p=new h.h;for(var f=new h.h,g=new h.h,w=new h.h,x=new h.h,T=new h.l,E=new h.h;n.ab();){var O=!1,C=!0;for(E.na(0,0);n.Ia();){var N=n.ia();if(w.x=N.ta,w.y=N.oa,x.x=N.qa,x.y=N.ma,T.Pa(),T.$b(w.x,w.y),T.Nk(x.x,x.y),this.xl.CG(T)){this.Lk.Gh(x,x),C?(this.Lk.Gh(w,w),E.N(w),C=!1):w.N(E),p.vc(x,w);var D=.5>(N=p.length());N==0?p.na(1,0):(D||E.N(x),p.scale(l/N),f.na(-p.y,p.x),g.na(p.y,-p.x),w.sub(p),x.add(p),c[0].add(w,f),c[1].add(w,g),c[2].add(x,g),c[3].add(x,f),D?O=!0:this.My(s,c))}else O&&(this.My(s,c),O=!1),C=!0}O&&this.My(s,c)}},o.prototype.nC=function(s){return h.P.truncate(s*this.lH+this.WH)},o.prototype.oC=function(s){return h.P.truncate(s*this.Gs+this.YH)},o.rP=function(s,n,l){return new o(s,n,l)},o.prototype.Az=function(s,n,l){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(l)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Kk=n,l=0;for(var c=this.Hf,p=this.Wm;8<=c;)l+=c*p,c=h.P.truncate(c/2),p=h.P.truncate((2*c+31)/32);this.Xh=h.P.mg(l,0),this.Ti=new h.Ox,l=new v(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,l),s.A(this.xl),this.xl.X(n,n),c=new h.l;var f=n*(p=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(n*=p.da(),c.L(this.xl.tf(),Math.max(f,this.xl.S()),Math.max(n,this.xl.da())),this.NA=this.Kk,this.Lk=new h.Ed,this.Lk.kS(c,p),new h.Ed,s.K()){case 550:l.ax(this.Ti,2),this.nQ();break;case 1607:l.ax(this.Ti,2),this.mK(this.Ti,s,this.NA);break;case 1736:l.ax(this.Ti,1),this.mQ(this.Lk,s),l.ax(this.Ti,2),this.mK(this.Ti,s,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},o.prototype.SN=function(){this.Ti.flush();for(var s=0,n=this.Hf*this.Wm,l=this.Hf,c=h.P.truncate(this.Hf/2),p=this.Wm,f=h.P.truncate((2*c+31)/32);8<l;){for(l=0;l<c;l++)for(var g=2*l,w=2*l+1,x=0;x<c;x++){var T=2*x,E=2*x+1,O=T>>4;T=2*(15&T);var C=E>>4;E=2*(15&E);var N=this.Xh[s+p*g+O]>>T&3;N|=this.Xh[s+p*g+C]>>E&3,N|=this.Xh[s+p*w+O]>>T&3,N|=this.Xh[s+p*w+C]>>E&3,this.Xh[n+f*l+(x>>4)]|=N<<2*(15&x)}l=c,p=f,s=n,c=h.P.truncate(l/2),f=h.P.truncate((2*c+31)/32),n=s+p*l}},o.prototype.Uo=function(s,n){return this.xl.contains(s,n)?(s=this.nC(s),n=this.oC(n),0>s||s>=this.Hf||0>n||n>=this.Hf||(n=this.Xh[this.Wm*n+(s>>4)]>>2*(15&s)&3)==0?0:n==1?1:2):0},o.prototype.To=function(s){if(!s.Fa(this.xl))return 0;var n=this.nC(s.v),l=this.nC(s.C),c=this.oC(s.G);if(s=this.oC(s.H),0>n&&(n=0),0>c&&(c=0),l>=this.Hf&&(l=this.Hf-1),s>=this.Hf&&(s=this.Hf-1),n>l||c>s)return 0;for(var p=Math.max(l-n,1)*Math.max(s-c,1),f=0,g=this.Wm,w=this.Hf,x=0;;){if(32>p||16>w){for(p=c;p<=s;p++)for(var T=n;T<=l;T++)if(1<(x=this.Xh[f+g*p+(T>>4)]>>2*(15&T)&3))return 2;if(x==0)return 0;if(x==1)return 1}f+=g*w,w=h.P.truncate(w/2),g=h.P.truncate((2*w+31)/32),n=h.P.truncate(n/2),c=h.P.truncate(c/2),l=h.P.truncate(l/2),s=h.P.truncate(s/2),p=Math.max(l-n,1)*Math.max(s-c,1)}},o.prototype.MR=function(){return this.Hf*this.Wm},o}();h.Mx=u}(U||(U={})),function(h){var k;(k=h.QL||(h.QL={}))[k.contains=1]="contains",k[k.within=2]="within",k[k.equals=3]="equals",k[k.disjoint=4]="disjoint",k[k.touches=8]="touches",k[k.crosses=16]="crosses",k[k.overlaps=32]="overlaps",k[k.unknown=0]="unknown",k[k.intersects=1073741824]="intersects";var v=function(){function o(){}return o.construct=function(s,n,l,c,p,f,g,w){var x=new o;return x.rw=s,x.Om=n,x.Mj=l,x.Ui=c,x.wH=p,x.OY=f,x.PY=g,x.QY=w,x},o}();h.Xt=function(){function o(){}return o.xD=function(s,n,l){if(o.ry(s)){var c=h.ua.mj(n,s,!1);n=!1,h.Wk.xE(s)&&(n=n||s.nu(c,l)),(c=s.K())!=1736&&c!=1607||!h.Wk.vE(s)||l==0||(n=n||s.hj(l)),c!=1736&&c!=1607||!h.Wk.wE(s)||l==0||n||s.cM()}},o.ry=function(s){return h.Wk.xE(s)||h.Wk.vE(s)||h.Wk.wE(s)},o}();var u=function(){function o(){this.th=[]}return o.uB=function(s,n,l,c,p){var f=s.K(),g=n.K();if(f==197){if(g==197)return o.oW(s,n,l,c);if(g==33)return c==2?c=1:c==1&&(c=2),o.cJ(n,s,l,c)}else if(f==33){if(g==197)return o.cJ(s,n,l,c);if(g==33)return o.qW(s,n,l,c)}if(s.B()||n.B())return c==4;var w=new h.l;s.A(w);var x=new h.l;n.A(x);var T=new h.l;if(T.L(w),T.$b(x),l=h.ua.Xd(l,T,!1),o.fk(w,x,l))return c==4;switch(w=!1,h.Xk.zd(f)&&((f=new h.Ua(s.description)).pc(s,!0),s=f,f=1607),h.Xk.zd(g)&&((g=new h.Ua(n.description)).pc(n,!0),n=g,g=1607),f!=197&&g!=197?(s.Eb()<n.Eb()||f==33&&g==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&g!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(g){case 1736:w=o.st(s,n,l,c,p);break;case 1607:w=o.bn(s,n,l,c,p);break;case 33:w=o.rt(s,n,l,c);break;case 550:w=o.qt(s,n,l,c,p);break;case 197:w=o.BI(s,n,l,c,p)}break;case 1607:switch(g){case 1736:w=o.bn(n,s,l,c,p);break;case 1607:w=o.bB(s,n,l,c,p);break;case 33:w=o.ut(s,n,l,c,p);break;case 550:w=o.tt(s,n,l,c,p);break;case 197:w=o.HI(s,n,l,c)}break;case 33:switch(g){case 1736:w=o.rt(n,s,l,c);break;case 1607:w=o.ut(n,s,l,c,p);break;case 550:w=o.mt(n,s,l,c)}break;case 550:switch(g){case 1736:w=o.qt(n,s,l,c,p);break;case 1607:w=o.tt(n,s,l,c,p);break;case 550:w=o.UA(s,n,l,c,p);break;case 33:w=o.mt(s,n,l,c);break;case 197:w=o.cI(s,n,l,c)}break;case 197:switch(g){case 1736:w=o.BI(n,s,l,c,p);break;case 1607:w=o.HI(n,s,l,c);break;case 550:w=o.cI(n,s,l,c)}}return w},o.oW=function(s,n,l,c){if(s.B()||n.B())return c==4;var p=new h.l,f=new h.l,g=new h.l;switch(s.A(p),n.A(f),g.L(p),g.$b(f),s=h.ua.Xd(l,g,!1),c){case 4:return o.fk(p,f,s);case 2:return o.eF(f,p,s);case 1:return o.eF(p,f,s);case 3:return o.gk(p,f,s);case 8:return o.YP(p,f,s);case 32:return o.XP(p,f,s);case 16:return o.WP(p,f,s)}return!1},o.cJ=function(s,n,l,c){if(s.B()||n.B())return c==4;s=s.D();var p=new h.l,f=new h.l;switch(n.A(p),f.L(s),f.$b(p),n=h.ua.Xd(l,f,!1),c){case 4:return o.Tw(s,p,n);case 2:return o.$A(s,p,n);case 1:return o.MU(s,p,n);case 3:return o.qI(s,p,n);case 8:return o.ZA(s,p,n)}return!1},o.qW=function(s,n,l,c){if(s.B()||n.B())return c==4;s=s.D(),n=n.D();var p=new h.l;switch(p.L(s),p.$b(n),l=h.ua.Xd(l,p,!1),c){case 4:return o.NU(s,n,l);case 2:return o.pI(n,s,l);case 1:return o.pI(s,n,l);case 3:return o.rI(s,n,l)}return!1},o.st=function(s,n,l,c,p){switch(c){case 4:return o.fV(s,n,l);case 2:return o.Uw(n,s,l,p);case 1:return o.Uw(s,n,l,p);case 3:return o.iV(s,n,l);case 8:return o.qV(s,n,l);case 32:return o.lV(s,n,l,p)}return!1},o.bn=function(s,n,l,c,p){switch(c){case 4:return o.gV(s,n,l);case 1:return o.aB(s,n,l,p);case 8:return o.rV(s,n,l,p);case 16:return o.bV(s,n,l)}return!1},o.rt=function(s,n,l,c){switch(c){case 4:return o.eV(s,n,l);case 1:return o.ZU(s,n,l);case 8:return o.pV(s,n,l)}return!1},o.qt=function(s,n,l,c){switch(c){case 4:return o.dV(s,n,l);case 1:return o.YU(s,n,l);case 8:return o.oV(s,n,l);case 16:return o.aV(s,n,l)}return!1},o.BI=function(s,n,l,c,p){if(o.cV(s,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.sV(s,n,l);case 1:return o.XU(s,n,l);case 3:return o.hV(s,n,l);case 8:return o.nV(s,n,l,p);case 32:return o.kV(s,n,l,p);case 16:return o.$U(s,n,l,p)}return!1},o.bB=function(s,n,l,c){switch(c){case 4:return o.BV(s,n,l);case 2:return o.FI(n,s,l);case 1:return o.FI(s,n,l);case 3:return o.DV(s,n,l);case 8:return o.II(s,n,l);case 32:return o.HV(s,n,l);case 16:return o.GI(s,n,l)}return!1},o.ut=function(s,n,l,c){switch(c){case 4:return o.AV(s,n,l);case 1:return o.vV(s,n,l);case 8:return o.LV(s,n,l)}return!1},o.tt=function(s,n,l,c){switch(c){case 4:return o.zV(s,n,l);case 1:return o.uV(s,n,l);case 8:return o.KV(s,n,l);case 16:return o.xV(s,n,l)}return!1},o.HI=function(s,n,l,c){if(o.yV(s,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.MV(s,n,l);case 1:return o.tV(s,n,l);case 3:return o.CV(s,n,l);case 8:return o.JV(s,n,l);case 32:return o.GV(s,n,l);case 16:return o.wV(s,n,l)}return!1},o.UA=function(s,n,l,c){switch(c){case 4:return o.bU(s,n,l);case 2:return o.$H(n,s,l);case 1:return o.$H(s,n,l);case 3:return o.dU(s,n,l);case 32:return o.jU(s,n,l)}return!1},o.mt=function(s,n,l,c){switch(c){case 4:return o.aI(s,n,l);case 2:return o.nU(s,n,l);case 1:return o.ZT(s,n,l);case 3:return o.Pw(s,n,l)}return!1},o.cI=function(s,n,l,c){switch(c){case 4:return o.aU(s,n,l);case 2:return o.mU(s,n,l);case 1:return o.YT(s,n,l);case 3:return o.cU(s,n,l);case 8:return o.lU(s,n,l);case 16:return o.$T(s,n,l)}return!1},o.iV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!!o.gk(c,p,l)&&(c=o.rc(s,n,!1))!=4&&c!=1&&c!=2&&(!!o.ZH(s,n,l)||(c=s.Rb(),p=n.Rb(),!(Math.abs(c-p)>4*Math.max(s.I(),n.I())*l)&&o.Rz(s,n,l,!0)))},o.fV=function(s,n,l){var c=o.rc(s,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.zI(s,n,l)},o.qV=function(s,n,l){var c=o.rc(s,n,!1);return c!=4&&c!=1&&c!=2&&o.DI(s,n,l,null)},o.lV=function(s,n,l,c){var p=o.rc(s,n,!1);return p!=4&&p!=1&&p!=2&&o.AI(s,n,l,c)},o.Uw=function(s,n,l,c){var p=new h.l,f=new h.l;return s.A(p),n.A(f),!!o.Ac(p,f,l)&&(p=o.rc(s,n,!1))!=4&&p!=2&&(p==1||o.wI(s,n,l,c))},o.gV=function(s,n,l){var c=o.rc(s,n,!0);return c==4||c!=1&&c!=1073741824&&o.zI(s,n,l)},o.rV=function(s,n,l,c){var p=o.rc(s,n,!1);return p!=4&&p!=1&&o.EI(s,n,l,c)},o.bV=function(s,n,l){var c=o.rc(s,n,!1);return c!=4&&c!=1&&o.yI(s,n,l,null)},o.aB=function(s,n,l,c){var p=new h.l,f=new h.l;return s.A(p),n.A(f),!!o.Ac(p,f,l)&&(p=o.rc(s,n,!1))!=4&&(p==1||o.xI(s,n,l,c))},o.eV=function(s,n,l){return h.jd.FG(s,n,l)==0},o.pV=function(s,n,l){return n=n.D(),o.CI(s,n,l)},o.ZU=function(s,n,l){return n=n.D(),o.vI(s,n,l)},o.dV=function(s,n,l){var c=o.rc(s,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,s.A(c),c.X(l,l);for(var p=new h.h,f=0;f<n.I();f++)if(n.D(f,p),c.contains(p)){var g=h.jd.Zd(s,p,l);if(g==1||g==2)return!1}return!0},o.oV=function(s,n,l){var c=this.rc(s,n,!1);if(c==4||c==1)return!1;c=new h.l,s.A(c),c.X(l,l);for(var p=!1,f=s,g=!1,w=0;w<n.I();w++){var x=n.Oa(w);if(c.contains(x)){if((x=h.jd.Zd(f,x,l))==2)p=!0;else if(x==1)return!1}g||(!h.Fg.Ol(s,n.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?f=s:(f=new h.Ea,s.copyTo(f),f.hj(1)),g=!0)}return!!p},o.aV=function(s,n,l){var c=this.rc(s,n,!1);if(c==4||c==1)return!1;var p=new h.l;c=new h.l;var f=new h.l;s.A(p),n.A(f),c.L(p),c.X(l,l),f=p=!1;for(var g=s,w=!1,x=0;x<n.I();x++){var T=n.Oa(x);if(c.contains(T)?(T=h.jd.Zd(g,T,l))==0?f=!0:T==1&&(p=!0):f=!0,p&&f)return!0;w||(!h.Fg.Ol(s,n.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?g=s:(g=new h.Ea,s.copyTo(g),g.hj(1)),w=!0)}return!1},o.YU=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),!this.Ac(c,p,l)||(p=this.rc(s,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var f=s,g=!1,w=0;w<n.I();w++){var x=n.Oa(w);if(!c.contains(x))return!1;if((x=h.jd.Zd(f,x,l))==1)p=!0;else if(x==0)return!1;g||(!h.Fg.Ol(s,n.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?f=s:(f=new h.Ea,s.copyTo(f),f.hj(1)),g=!0)}return p},o.hV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!!o.gk(c,p,l)&&((c=new h.Ea).bd(n,!1),o.Rz(s,c,l,!0))},o.cV=function(s,n,l){var c=o.rc(s,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new h.l;if(c=new h.l,s.A(p),n.A(c),o.Ac(c,p,l)||(p=new h.h,c.fn(p),(n=h.jd.Zd(s,p,l))!=0)||(c.VI(p),(n=h.jd.Zd(s,p,l))!=0)||(c.gn(p),(n=h.jd.Zd(s,p,l))!=0)||(c.YI(p),(n=h.jd.Zd(s,p,l))!=0))return!1;n=s.vb(0),(p=new h.l).L(c),p.X(l,l);for(var f=0,g=s.I();f<g;f++){var w=n.read(2*f),x=n.read(2*f+1);if(p.contains(w,x))return!1}return!o.NG(s,c,l)},o.nV=function(s,n,l,c){var p=o.rc(s,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return s.A(p),n.A(f),!o.Ac(f,p,l)&&(f.S()<=l&&f.da()<=l?(n=n.Kp(),o.CI(s,n,l)):f.S()<=l||f.da()<=l?(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.EI(s,p,l,c)):((p=new h.Ea).bd(n,!1),o.DI(s,p,l,c)))},o.kV=function(s,n,l,c){var p=o.rc(s,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return s.A(p),n.A(f),!(o.Ac(f,p,l)||f.S()<=l||f.da()<=l)&&((p=new h.Ea).bd(n,!1),o.AI(s,p,l,c))},o.sV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),o.Ac(p,c,l)},o.XU=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!!o.Ac(c,p,l)&&(c=o.rc(s,n,!1))!=4&&c!=2&&(c==1||(p.S()<=l&&p.da()<=l?(n=n.Kp(),o.vI(s,n,l)):p.S()<=l||p.da()<=l?(p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.xI(s,p,l,null)):((p=new h.Ea).bd(n,!1),o.wI(s,p,l,null))))},o.$U=function(s,n,l,c){var p=new h.l,f=new h.l;return s.A(p),n.A(f),!(o.Ac(f,p,l)||f.da()>l&&f.S()>l||f.da()<=l&&f.S()<=l)&&(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.yI(s,p,l,c))},o.DV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(!o.gk(c,p,l)||o.rc(s,n,!1)==4)&&(!!o.ZH(s,n,l)||o.Rz(s,n,l,!1))},o.BV=function(s,n,l){return this.rc(s,n,!1)==4||!!new h.am(s,n,l,!0).next()&&!this.OG(s,n,l)},o.II=function(s,n,l){if(o.rc(s,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(s,n,l,c)!=0)return!1;for(var p=new h.ee,f=0;f<c.size;f+=2){var g=c.read(f),w=c.read(f+1);p.Du(g,w)}return s=s.ng(),n=n.ng(),s.Gd(n,0,n.I()),o.Ow(s,p,l)},o.GI=function(s,n,l){if(o.rc(s,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(s,n,l,c)!=0)return!1;for(var p=new h.ee,f=0;f<c.size;f+=2){var g=c.read(f),w=c.read(f+1);p.Du(g,w)}return s=s.ng(),n=n.ng(),s.Gd(n,0,n.I()),!o.Ow(s,p,l)},o.HV=function(s,n,l){return o.rc(s,n,!1)!=4&&o.QG(s,n,l)},o.FI=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(!o.Ac(c,p,l)||o.rc(s,n,!1)==4)&&o.Am(n,s,l,!1)},o.AV=function(s,n,l){return o.rc(s,n,!1)==4||(n=n.D(),!o.Tz(s,n,l))},o.LV=function(s,n,l){return o.rc(s,n,!1)!=4&&(n=n.D(),o.Uz(s,n,l))},o.vV=function(s,n,l){return o.rc(s,n,!1)!=4&&(n=n.D(),o.MG(s,n,l))},o.zV=function(s,n,l){return o.rc(s,n,!1)==4||!o.PG(s,n,l,!1)},o.KV=function(s,n,l){if(this.rc(s,n,!1)==4)return!1;var c=s.Ha(),p=new h.l,f=new h.l,g=new h.l;s.A(p),n.A(f),p.X(l,l),f.X(l,l),g.L(p),g.Fa(f),p=null;var w=s.Cb;if(w!=null){var x=w.Gb;p=w.Bo,x==null&&(x=w=h.ua.lj(s,g))}else x=w=h.ua.lj(s,g);var T=x.getIterator(),E=null;p!=null&&(E=p.getIterator());var O=new h.h,C=new h.h,N=!1,D=l*l;for(p=new h.rn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,O),g.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1))continue;T.Zi(f,l);for(var z=T.next();z!=-1;z=T.next())if(c.Wb(x.ka(z)),(z=c.ia()).ic(z.ge(O,!1),C),h.h.zc(O,C)<=D){p.write(w,1),N=!0;break}}if(!N)return!1;for(s=s.ng(),c=new h.ee,f=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,f),c.Du(f.x,f.y));return this.Ow(s,c,l)},o.xV=function(s,n,l){if(this.rc(s,n,!1)==4)return!1;var c=s.Ha(),p=new h.l,f=new h.l,g=new h.l;s.A(p),n.A(f),p.X(l,l),f.X(l,l),g.L(p),g.Fa(f),p=null;var w=s.Cb;if(w!=null){var x=w.Gb;p=w.Bo,x==null&&(x=w=h.ua.lj(s,g))}else x=w=h.ua.lj(s,g);var T=x.getIterator(),E=null;p!=null&&(E=p.getIterator());var O=new h.h,C=new h.h,N=!1,D=!1,z=l*l;for(p=new h.rn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,O),g.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1)){D=!0;continue}T.Zi(f,l);for(var R=!1,G=T.next();G!=-1;G=T.next())if(c.Wb(x.ka(G)),(G=c.ia()).ic(G.ge(O,!1),C),h.h.zc(O,C)<=z){p.write(w,1),R=N=!0;break}R||(D=!0)}else D=!0;if(!N||!D)return!1;for(s=s.ng(),c=new h.ee,f=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,f),c.Du(f.x,f.y));return!this.Ow(s,c,l)},o.uV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(!o.Ac(c,p,l)||o.rc(s,n,!1)==4||!o.PG(s,n,l,!0))&&(s=s.ng(),!o.bI(s,n,l))},o.CV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(p.da()>l&&p.S()>l)&&o.gk(c,p,l)},o.yV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!o.Ac(p,c,l)&&!o.NG(s,p,l)},o.JV=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),p.da()<=l&&p.S()<=l)return p=n.Kp(),o.Uz(s,p,l);if(p.da()<=l||p.S()<=l)return p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.II(s,p,l);s=s.Ha(),n=new h.l,c=new h.l,n.L(p),c.L(p),n.X(-l,-l),c.X(l,l),p=!1;for(var f=new h.l,g=new h.l;s.ab();)for(;s.Ia();){if(s.ia().A(f),g.L(n),g.Fa(f),!g.B()&&(g.da()>l||g.S()>l))return!1;g.L(c),g.Fa(f),g.B()||(p=!0)}return p},o.GV=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(o.Ac(c,p,l)||o.Ac(p,c,l)||o.Ac(p,c,l)||p.da()>l&&p.S()>l||p.da()<=l&&p.S()<=l)&&(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.QG(s,c,l))},o.MV=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),!o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l)return o.Ac(p,c,l);s=s.Ha(),(n=new h.l).L(p),n.X(-l,-l),p=!1,c=new h.l;for(var f=new h.l;s.ab();)for(;s.Ia();)s.ia().A(c),n.jm(c)?p=!0:(f.L(n),f.Fa(c),!f.B()&&(f.da()>l||f.S()>l)&&(p=!0));return p},o.tV=function(s,n,l){var c=new h.l,p=new h.l;return n.A(p),s.A(c),!(!o.Ac(c,p,l)||p.da()>l&&p.S()>l)&&(p.da()<=l&&p.S()<=l?(n=n.Kp(),o.MG(s,n,l)):(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.Am(c,s,l,!1)))},o.wV=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l)return c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.GI(s,c,l);s=s.Ha(),n=new h.l,(c=new h.l).L(p),n.L(p),c.X(-l,-l),n.X(l,l);for(var f=p=!1,g=new h.l,w=new h.l;s.ab();)for(;s.Ia();)if(s.ia().A(g),f||n.contains(g)||(f=!0),p||(w.L(c),w.Fa(g),!w.B()&&(w.da()>l||w.S()>l)&&(p=!0)),p&&f)return!0;return!1},o.dU=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!!o.gk(c,p,l)&&(!!o.eU(s,n,l)||o.TA(s,n,l,!1,!0,!1))},o.bU=function(s,n,l){return!o.bI(s,n,l)},o.jU=function(s,n,l){return o.TA(s,n,l,!1,!1,!0)},o.$H=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!!o.Ac(c,p,l)&&o.TA(n,s,l,!0,!1,!1)},o.Ow=function(s,n,l){l*=l;for(var c=new h.h,p=new h.h,f=0;f<n.I();f++){n.D(f,p);for(var g=!1,w=0;w<s.I();w++)if(s.D(w,c),h.h.zc(c,p)<=l){g=!0;break}if(!g)return!1}return!0},o.Pw=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),o.gk(c,p,l)},o.aI=function(s,n,l){return n=n.D(),o.lt(s,n,l)},o.nU=function(s,n,l){return o.Pw(s,n,l)},o.ZT=function(s,n,l){return!o.aI(s,n,l)},o.cU=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(p.da()>l||p.S()>l)&&o.gk(c,p,l)},o.aU=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),o.Ac(p,c,l))return!1;for((n=new h.l).L(p),n.X(l,l),l=new h.h,p=0;p<s.I();p++)if(s.D(p,l),n.contains(l))return!1;return!0},o.lU=function(s,n,l){var c=new h.l,p=new h.l,f=new h.l;if(n.A(c),c.da()<=l&&c.S()<=l)return!1;if(c.da()<=l||c.S()<=l){n=new h.h;var g=!1;p.L(c),f.L(c),p.X(l,l),c.da()>l?f.X(0,-l):f.X(-l,0);for(var w=0;w<s.I();w++)if(s.D(w,n),p.contains(n)){if(c.da()>l){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;g=!0}return g}for(p.L(c),f.L(c),p.X(l,l),f.X(-l,-l),n=new h.h,g=!1,w=0;w<s.I();w++)if(s.D(w,n),p.contains(n)){if(f.jm(n))return!1;g=!0}return g},o.mU=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),!o.Ac(p,c,l))return!1;if(p.da()<=l&&p.S()<=l)return o.gk(c,p,l);if(p.da()<=l||p.S()<=l){n=!1,c=new h.l;var f=new h.l;c.L(p),f.L(p),p.da()>l?c.X(0,-l):c.X(-l,0),f.X(l,l);for(var g=new h.h,w=0;w<s.I();w++){if(s.D(w,g),!f.contains(g))return!1;p.da()>l?g.y>c.G&&g.y<c.H&&(n=!0):g.x>c.v&&g.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.L(p),f.L(p),c.X(-l,-l),f.X(l,l),g=new h.h,w=0;w<s.I();w++){if(s.D(w,g),!f.contains(g))return!1;c.jm(g)&&(n=!0)}return n},o.YT=function(s,n,l){var c=new h.l,p=new h.l;return s.A(c),n.A(p),!(!o.Ac(c,p,l)||p.da()>l||p.S()>l)&&(n=n.Kp(),!o.lt(s,n,l))},o.$T=function(s,n,l){var c=new h.l,p=new h.l;if(s.A(c),n.A(p),o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l){n=new h.l,c=new h.l,n.L(p),p.da()>l?n.X(0,-l):n.X(-l,0),c.L(p),c.X(l,l);for(var f=new h.h,g=!1,w=!1,x=0;x<s.I();x++)if(s.D(x,f),g||(p.da()>l?f.y>n.G&&f.y<n.H&&(g=!0):f.x>n.v&&f.x<n.C&&(g=!0)),w||c.contains(f)||(w=!0),g&&w)return!0;return!1}for(n=new h.l,c=new h.l,n.L(p),n.X(-l,-l),c.L(p),c.X(l,l),f=new h.h,w=g=!1,x=0;x<s.I();x++)if(s.D(x,f),!g&&n.jm(f)&&(g=!0),w||c.contains(f)||(w=!0),g&&w)return!0;return!1},o.rI=function(s,n,l){return h.h.zc(s,n)<=l*l},o.NU=function(s,n,l){return h.h.zc(s,n)>l*l},o.pI=function(s,n,l){return o.rI(s,n,l)},o.qI=function(s,n,l){var c=new h.l;return c.L(s),o.gk(c,n,l)},o.Tw=function(s,n,l){var c=new h.l;return c.L(n),c.X(l,l),!c.contains(s)},o.ZA=function(s,n,l){if(n.da()<=l&&n.S()<=l)return!1;var c=new h.l,p=new h.l;if(c.L(n),c.X(l,l),!c.contains(s))return!1;if(n.da()<=l||n.S()<=l){if(p.L(n),n.da()>l?p.X(0,-l):p.X(-l,0),n.da()>l){if(s.y>p.G&&s.y<p.H)return!1}else if(s.x>p.v&&s.x<p.C)return!1;return!0}return p.L(n),p.X(-l,-l),!p.jm(s)},o.$A=function(s,n,l){if(n.da()<=l&&n.S()<=l)return!0;if(n.da()<=l||n.S()<=l){var c=new h.l;c.L(n),n.da()>l?c.X(0,-l):c.X(-l,0);var p=!1;return n.da()>l?s.y>c.G&&s.y<c.H&&(p=!0):s.x>c.v&&s.x<c.C&&(p=!0),p}return(c=new h.l).L(n),c.X(-l,-l),c.jm(s)},o.MU=function(s,n,l){return o.qI(s,n,l)},o.gk=function(s,n,l){return o.Ac(s,n,l)&&o.Ac(n,s,l)},o.fk=function(s,n,l){var c=new h.l;return c.L(n),c.X(l,l),!s.isIntersecting(c)},o.YP=function(s,n,l){if(s.da()<=l&&s.S()<=l){var c=s.tf();return o.ZA(c,n,l)}if(n.da()<=l&&n.S()<=l)return c=n.tf(),o.ZA(c,s,l);if(s.da()>l&&s.S()>l&&(n.da()<=l||n.S()<=l)?c=n:(c=s,s=n),c.da()<=l||c.S()<=l){if(s.da()<=l||s.S()<=l){n=new h.zb;var p=new h.zb,f=[0,0],g=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),s.fn(w),p.Ec(w),s.gn(w),p.Rc(w),n.Fa(p,null,f,g,l),n.Fa(p,null,null,null,l)==1&&(f[0]==0||f[1]==1||g[0]==0||g[1]==1)}return n=new h.l,p=new h.l,n.L(s),n.X(-l,-l),p.L(n),p.Fa(c),!(!p.B()&&(p.da()>l||p.S()>l))}return s.X(l,l),(p=new h.l).L(c),p.Fa(s),!(p.B()||!p.B()&&p.da()>l&&p.S()>l)},o.XP=function(s,n,l){if(o.Ac(s,n,l)||o.Ac(n,s,l)||s.da()<=l&&s.S()<=l||n.da()<=l&&n.S()<=l)return!1;if(s.da()<=l||s.S()<=l){if(n.da()>l&&n.S()>l)return!1;var c=new h.zb,p=new h.zb,f=[0,0],g=[0,0],w=new h.h;return s.fn(w),c.Ec(w),s.gn(w),c.Rc(w),n.fn(w),p.Ec(w),n.gn(w),p.Rc(w),c.Fa(p,null,f,g,l),c.Fa(p,null,null,null,l)==2&&(0<f[0]||1>f[1])&&(0<g[0]||1>g[1])}return!(n.da()<=l||n.S()<=l)&&((c=new h.l).L(s),c.Fa(n),!(c.B()||c.da()<=l||c.S()<=l))},o.eF=function(s,n,l){if(!o.Ac(s,n,l))return!1;if(s.da()<=l&&s.S()<=l)return s=s.tf(),o.$A(s,n,l);if(n.da()<=l&&n.S()<=l)return n=n.tf(),o.$A(n,s,l);if(s.da()<=l||s.S()<=l)return o.Ac(s,n,l);if(n.da()<=l||n.S()<=l){var c=new h.l;return c.L(s),c.X(-l,-l),c.jm(n)?!0:((s=new h.l).L(c),s.Fa(n),!(s.B()||s.da()<=l&&s.S()<=l))}return o.Ac(s,n,l)},o.WP=function(s,n,l){if(o.Ac(s,n,l)||o.Ac(n,s,l)||s.da()<=l&&s.S()<=l||n.da()<=l&&n.S()<=l||n.da()>l&&n.S()>l&&s.da()>l&&s.S()>l)return!1;if(s.da()>l&&s.S()>l)var c=n;else c=s,s=n;if(s.da()>l&&s.S()>l){n=new h.l;var p=new h.l;return p.L(s),p.X(-l,-l),n.L(p),n.Fa(c),!(n.B()||n.da()<=l&&n.S()<=l)}n=new h.zb,p=new h.zb;var f=[0,0],g=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),s.fn(w),p.Ec(w),s.gn(w),p.Rc(w),n.Fa(p,null,f,g,l),n.Fa(p,null,null,null,l)==1&&0<f[0]&&1>f[1]&&0<g[0]&&1>g[1]},o.zI=function(s,n,l){var c=new h.l,p=new h.l,f=new h.am(s,n,l,!0);if(!f.next())return!0;if(this.OG(s,n,l))return!1;var g=s,w=null;n.K()==1736&&(w=n);var x=!1,T=!1;do{var E=f.pl(),O=f.jl();if(O=n.Oa(n.Ca(O)),c.L(f.oz()),c.X(l,l),c.contains(O)&&(O=h.jd.Zd(g,O,0))!=0||n.K()==1736&&(E=s.Oa(s.Ca(E)),p.L(f.Wy()),p.X(l,l),p.contains(E)&&(O=h.jd.Zd(w,E,0))!=0))return!1;x||(!h.Fg.Ol(s,n.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?g=s:(g=new h.Ea,s.copyTo(g),g.hj(1)),x=!0),n.K()!=1736||T||(T=n,!h.Fg.Ol(T,s.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new h.Ea,T.copyTo(w),w.hj(1)),T=!0)}while(f.next());return!0},o.Ac=function(s,n,l){var c=new h.l;return c.L(s),c.X(l,l),c.contains(n)},o.ns=function(s,n,l){var c=new h.l;return c.L(n),c.X(l,l),n=new h.h,s.fn(n),!c.contains(n)||(s.VI(n),!c.contains(n)||(s.YI(n),!c.contains(n)||(s.gn(n),!c.contains(n))))},o.ZH=function(s,n,l){if(s.ea()!=n.ea()||s.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;l*=l;for(var g=0;g<s.ea();g++){if(s.Wc(g)!=n.Wc(g)){f=!1;break}for(var w=s.Ca(g);w<n.Wc(g);w++)if(s.D(w,c),n.D(w,p),h.h.zc(c,p)>l){f=!1;break}if(!f)break}return!!f},o.eU=function(s,n,l){if(s.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;l*=l;for(var g=0;g<s.I();g++)if(s.D(g,c),n.D(g,p),h.h.zc(c,p)>l){f=!1;break}return!!f},o.TA=function(s,n,l,c,p,f){var g=!1;if(s.I()>n.I()){c&&(c=!1,g=!0);var w=n}else w=s,s=n;if(n=null,p||f||g){n=new h.rn(s.I());for(var x=0;x<s.I();x++)n.write(x,0)}x=new h.l;var T=new h.l,E=new h.l;w.A(x),s.A(T),x.X(l,l),T.X(l,l),E.L(x),E.Fa(T),T=new h.h;for(var O=new h.h,C=!0,N=h.ua.jE(s,E),D=N.getIterator(),z=l*l,R=0;R<w.I();R++)if(w.D(R,T),E.contains(T)){var G=!1;x.L(T.x,T.y,T.x,T.y),D.Zi(x,l);for(var W=D.next();W!=-1&&(W=N.ka(W),s.D(W,O),!(h.h.zc(T,O)<=z&&((p||f||g)&&n.write(W,1),G=!0,c)));W=D.next());if(!G&&(C=!1,p||c))return!1}else{if(p||c)return!1;C=!1}if(f&&C)return!1;if(c)return!0;for(x=0;x<s.I();x++)if(n.read(x)==1){if(f)return!0}else if(p||g)return!1;return!f},o.bI=function(s,n,l){if(s.I()>n.I())var c=n;else c=s,s=n;n=new h.l;var p=new h.l,f=new h.l;c.A(n),s.A(p),n.X(l,l),p.X(l,l),f.L(n),f.Fa(p),p=new h.h;for(var g=new h.h,w=l*l,x=h.ua.jE(s,f),T=x.getIterator(),E=0;E<c.I();E++)if(c.D(E,p),f.contains(p)){n.L(p.x,p.y,p.x,p.y),T.Zi(n,l);for(var O=T.next();O!=-1;O=T.next())if(s.D(x.ka(O),g),h.h.zc(p,g)<=w)return!0}return!1},o.Rz=function(s,n,l,c){return o.Am(s,n,l,c)&&o.Am(n,s,l,c)},o.Am=function(s,n,l,c){function p(Ee,ye){return O.LE(Ee,ye)}var f,g=!0,w=[0,0],x=[0,0],T=0,E=new h.ja(0),O=new o,C=new h.l,N=new h.l,D=new h.l;s.A(C),n.A(N),C.X(l,l),N.X(l,l),D.L(C),D.Fa(N),s=s.Ha(),N=n.Ha();var z=null,R=z=null,G=n.Cb;for(G!=null?(z=G.Gb,R=G.Bo,z==null&&(z=h.ua.lj(n,D))):z=h.ua.lj(n,D),n=z.getIterator(),G=null,R!=null&&(G=R.getIterator());s.ab();)for(;s.Ia();){var W=!1,H=s.ia();if(H.A(C),!C.isIntersecting(D)||G!=null&&(G.Zi(C,l),G.next()==-1))return!1;for(R=H.Rb(),n.Wo(H,l),f=n.next();f!=-1;f=n.next()){N.Wb(z.ka(f)),f=N.ia();var ee=H.Fa(f,null,w,x,l);if(ee==2&&(!c||x[0]<=x[1])){ee=w[0];var X=w[1],ne=x[0],ce=x[1];if(ee*R<=l&&(1-X)*R<=l){W=!0,T=0,E.resize(0),O.th.length=0;var ue=s.xb();for(ne=!0;ne;){if(s.Ia()){if(R=(H=s.ia()).Rb(),(ee=H.Fa(f,null,w,x,l))==2&&(!c||x[0]<=x[1])&&(ee=w[0],X=w[1],ee*R<=l&&(1-X)*R<=l)){ue=s.xb();continue}if(N.Ia()&&(f=N.ia(),(ee=H.Fa(f,null,w,x,l))==2&&(!c||x[0]<=x[1])&&(ee=w[0],X=w[1],ee*R<=l&&(1-X)*R<=l))){ue=s.xb();continue}}ne=!1}ue!=s.xb()&&(s.Wb(ue),s.ia());break}ue=s.xb(),f=v.construct(ue,s.gb,ee,X,N.xb(),N.gb,ne,ce),O.th.push(f),E.add(E.size)}}if(!W){if(T==O.th.length)return!1;for(1<E.size-T&&E.Wd(T,E.size,p),W=0;T<O.th.length;T++)if(!((f=O.th[E.get(T)]).Mj<W&&f.Ui<W)){if(R*(f.Mj-W)>l)return!1;if(R*(1-(W=f.Ui))<=l||W==1)break}if(R*(1-W)>l)return!1;T=0,E.resize(0),O.th.length=0}}return g},o.QG=function(s,n,l){if(1>o.Sz(s,n,l,null))return!1;var c=new h.l,p=new h.l;s.A(c),n.A(p);var f=o.ns(c,p,l);return c=o.ns(p,c,l),!(!f||!c)||(f&&!c?!o.Am(n,s,l,!1):c&&!f?!o.Am(s,n,l,!1):!o.Am(s,n,l,!1)&&!o.Am(n,s,l,!1))},o.Sz=function(s,n,l,c){function p(xe,Rt){return C.LE(xe,Rt)}if(s.sz()>n.sz())var f=n,g=s;else f=s,g=n;s=f.Ha(),n=g.Ha();var w=[0,0],x=[0,0],T=-1,E=0,O=new h.ja(0),C=new o,N=new h.l,D=new h.l,z=new h.l;f.A(N),g.A(D),N.X(l,l),D.X(l,l),z.L(N),z.Fa(D),f=null,c!=null&&(f=new h.h);var R=D=D=null,G=g.Cb;for(G!=null?(D=G.Gb,R=G.Bo,D==null&&(D=h.ua.lj(g,z))):D=h.ua.lj(g,z),g=D.getIterator(),G=null,R!=null&&(G=R.getIterator());s.ab();)for(R=0;s.Ia();){var W=s.ia();if(W.A(N),N.isIntersecting(z)){if(G!=null&&(G.Zi(N,l),G.next()==-1))continue;var H=W.Rb();g.Wo(W,l);for(var ee=g.next();ee!=-1;ee=g.next()){var X=D.ka(ee);n.Wb(X);var ne=n.ia(),ce=ne.Rb(),ue=W.Fa(ne,null,w,x,l);if(0<ue){ee=w[0],T=x[0];var Ee=ue==2?w[1]:NaN,ye=ue==2?x[1]:NaN;if(ue==2){if(H*(Ee-ee)>l)return 1;var Ue=H*(Ee-ee);if(n.Ia()){if(ne=n.ia(),(ue=W.Fa(ne,null,w,null,l))==2){ue=w[0];var Fe=w[1];if(Ue+(ue=H*(Fe-ue))>l)return 1}n.Wb(X),n.ia()}if(!n.xm()){if(n.ni(),ne=n.ni(),(ue=W.Fa(ne,null,w,null,l))==2&&(ue=w[0],Ue+(ue=H*((Fe=w[1])-ue))>l))return 1;n.Wb(X),n.ia()}if(s.Ia()){if(X=s.xb(),(ue=(W=s.ia()).Fa(ne,null,w,null,l))==2&&(ue=w[0],Ue+(ue=H*((Fe=w[1])-ue))>l))return 1;s.Wb(X),s.ia()}if(!s.xm()){if(X=s.xb(),s.ni(),(ue=(W=s.ni()).Fa(ne,null,w,null,l))==2&&(ue=w[0],Ue+(ue=ce*((Fe=w[1])-ue))>l))return 1;s.Wb(X),s.ia()}ne=v.construct(s.xb(),s.gb,ee,Ee,n.xb(),n.gb,T,ye),C.th.push(ne),O.add(O.size)}T=0,c!=null&&(W.ic(ee,f),c.add(f.x),c.add(f.y))}}if(E<C.th.length){for(O.Wd(E,O.size,p),W=0,ee=C.th[O.get(E)].Om;E<C.th.length;E++)if(!((ne=C.th[O.get(E)]).Mj<W&&ne.Ui<W))if(H*(ne.Mj-W)>l)R=H*(ne.Ui-ne.Mj),W=ne.Ui,ee=ne.Om;else{if(ne.Om!=ee?(R=H*(ne.Ui-ne.Mj),ee=ne.Om):R+=H*(ne.Ui-ne.Mj),R>l)return 1;if((W=ne.Ui)==1)break}H*(1-W)>l&&(R=0),E=0,O.resize(0),C.th.length=0}}}return T},o.OG=function(s,n,l){var c=s.Ha(),p=n.Ha();for(s=new h.am(s,n,l,!1);s.next();){n=s.pl();var f=s.jl();if(c.Wb(n),p.Wb(f),n=c.ia(),0<p.ia().Fa(n,null,null,null,l))return!0}return!1},o.PG=function(s,n,l,c){var p=s.Ha(),f=new h.l,g=new h.l,w=new h.l;s.A(f),n.A(g),f.X(l,l),f.contains(g),g.X(l,l),w.L(f),w.Fa(g),(f=s.Cb)!=null?(f=f.Gb)==null&&(f=h.ua.lj(s,w)):f=h.ua.lj(s,w),s=f.getIterator();for(var x=new h.h,T=new h.h,E=l*l,O=0;O<n.I();O++)if(n.D(O,x),w.contains(x)){g.L(x.x,x.y,x.x,x.y),s.Zi(g,l);for(var C=!1,N=s.next();N!=-1;N=s.next())if(p.Wb(f.ka(N)),(N=p.ia()).ic(N.ge(x,!1),T),h.h.zc(T,x)<=E){C=!0;break}if(c){if(!C)return!1}else if(C)return!0}return!!c},o.Tz=function(s,n,l){var c=new h.h,p=l*l,f=s.Ha();if((s=s.Cb)!=null&&(s=s.Gb)!=null){var g=new h.l;for(g.L(n),g=(l=s.HF(g,l)).next();g!=-1;g=l.next())if(f.Wb(s.ka(g)),f.Ia()){var w=(g=f.ia()).ge(n,!1);if(g.ic(w,c),h.h.zc(n,c)<=p)return!0}return!1}for(s=new h.l;f.ab();)for(;f.Ia();)if((g=f.ia()).A(s),s.X(l,l),s.contains(n)&&(w=g.ge(n,!1),g.ic(w,c),h.h.zc(n,c)<=p))return!0;return!1},o.MG=function(s,n,l){return o.Tz(s,n,l)&&!o.Uz(s,n,l)},o.Uz=function(s,n,l){return s=s.ng(),!o.lt(s,n,l)},o.NG=function(s,n,l){if(s.vm()){var c=new h.zb(n.v,n.G,n.v,n.H),p=new h.zb(n.v,n.H,n.C,n.H),f=new h.zb(n.C,n.H,n.C,n.G);for(n=new h.zb(n.C,n.G,n.v,n.G),s=s.Ha();s.ab();)for(;s.Ia();){var g=s.ia();if(g.isIntersecting(c,l)||g.isIntersecting(p,l)||g.isIntersecting(f,l)||g.isIntersecting(n,l))return!0}}else{(c=new h.l).L(n),c.X(l,l),l=s.vb(0),p=new h.h,f=new h.h,n=new h.h,g=new h.h;for(var w=0,x=s.ea();w<x;w++)for(var T=!0,E=s.Ca(w),O=s.Wc(w);E<O;E++)if(T)l.uc(2*E,f),T=!1;else{if(l.uc(2*E,p),n.N(f),g.N(p),c.uy(n,g)!=0)return!0;f.N(p)}}return!1},o.rc=function(s,n,l){var c=s.K(),p=n.K();if(h.ba.zj(c)){var f=s.Cb;if(f!=null&&(f=f.Hk)!=null)if(p==33){var g=n.D();if((g=f.Uo(g.x,g.y))==1)return 1;if(g==0)return 4}else{if(g=new h.l,n.A(g),(g=f.To(g))==1)return 1;if(g==0)return 4;if(l&&h.ba.zj(p)&&o.CE(n,f))return 1073741824}}if(h.ba.zj(p)&&(f=n.Cb)!=null&&(f=f.Hk)!=null)if(c==33){if(s=s.D(),(g=f.Uo(s.x,s.y))==1)return 2;if(g==0)return 4}else{if(n=new h.l,s.A(n),(g=f.To(n))==1)return 2;if(g==0)return 4;if(l&&h.ba.zj(c)&&o.CE(s,f))return 1073741824}return 0},o.CE=function(s,n){for(var l=s.I(),c=new h.h,p=0;p<l;p++)if(s.D(p,c),n.Uo(c.x,c.y)==1)return!0;return!1},o.DI=function(s,n,l,c){for(var p=1<=s.qm(0)&&1<=n.qm(0),f=s.Ha(),g=n.Ha(),w=[0,0],x=[0,0],T=new h.am(s,n,l,!1),E=!1;T.next();){var O=T.pl(),C=T.jl();if(f.Wb(O),g.Wb(C),O=f.ia(),(C=g.ia().Fa(O,null,x,w,l))==2){if(E=w[0],C=w[1],O=O.Rb(),p&&(C-E)*O>l)return!1;E=!0}else if(C!=0){if(E=w[0],O=x[0],0<E&&1>E&&0<O&&1>O)return!1;E=!0}}return!!E&&(f=new h.l,g=new h.l,p=new h.l,s.A(f),n.A(g),f.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),p.L(f),p.Fa(g),!(10<s.I()&&(s=h.Vd.clip(s,p,l,0),s.B())||10<n.I()&&(n=h.Vd.clip(n,p,l,0),n.B()))&&h.cm.st(s,n,l,"F********",c))},o.AI=function(s,n,l,c){var p=1<=s.qm(0)&&1<=n.qm(0),f=new h.l,g=new h.l,w=new h.l;s.A(f),n.A(g);for(var x=!1,T=o.ns(f,g,l),E=o.ns(g,f,l),O=s.Ha(),C=n.Ha(),N=[0,0],D=[0,0],z=new h.am(s,n,l,!1);z.next();){var R=z.pl(),G=z.jl();if(O.Wb(R),C.Wb(G),G=O.ia(),(R=C.ia().Fa(G,null,D,N,l))==2){R=N[0];var W=N[1];if(G=G.Rb(),p&&(W-R)*G>l&&(x=!0,T&&E))return!0}else if(R!=0&&(R=N[0],G=D[0],0<R&&1>R&&0<G&&1>G))return!0}if(p=new h.l,O=new h.l,p.L(f),p.X(1e3*l,1e3*l),O.L(g),O.X(1e3*l,1e3*l),w.L(p),w.Fa(O),f="",f=x?f+"**":f+"T*",T){if(10<n.I()&&(n=h.Vd.clip(n,w,l,0)).B())return!1;f+="****"}else f+="T***";if(E){if(10<s.I()&&(s=h.Vd.clip(s,w,l,0)).B())return!1;f+="***"}else f+="T**";return h.cm.st(s,n,l,f.toString(),c)},o.wI=function(s,n,l,c){var p=[!1],f=o.uI(s,n,l,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*l,1e3*l),!(10<s.I()&&(s=h.Vd.clip(s,p,l,0),s.B()))&&h.cm.Uw(s,n,l,c))},o.uI=function(s,n,l,c){c[0]=!1;for(var p=s.Ha(),f=n.Ha(),g=[0,0],w=[0,0],x=new h.am(s,n,l,!1),T=!1;x.next();){var E=x.pl(),O=x.jl();if(p.Wb(E,-1),f.Wb(O,-1),E=p.ia(),(E=f.ia().Fa(E,null,w,g,l))!=0&&(T=!0,E==1&&(E=g[0],O=w[0],0<E&&1>E&&0<O&&1>O)))return c[0]=!0,!1}if(!T){for(c[0]=!0,g=new h.l,s.A(g),g.X(l,l),x=s,T=!1,w=new h.l,c=0,p=n.ea();c<p;c++)if(0<n.Ka(c)){if(n.Tj(c,w),!g.isIntersecting(w)||(f=n.Oa(n.Ca(c)),(f=h.Fg.ym(x,f,0))==0))return!1;T||(!h.Fg.Ol(s,n.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?x=s:(f=new h.Ea,s.copyTo(f),f.hj(1),x=f),T=!0)}if(s.ea()==1||n.K()==1607)return!0;for(g=new h.l,n.A(g),g.X(l,l),w=n,x=!1,l=new h.l,c=0,p=s.ea();c<p;c++)if(0<s.Ka(c)){if(s.Tj(c,l),g.isIntersecting(l)&&(f=s.Oa(s.Ca(c)),(f=h.Fg.ym(w,f,0))==1))return!1;x||(!h.Fg.Ol(n,s.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(f=new h.Ea,n.copyTo(f),f.hj(1),w=f),x=!0)}return!0}return!1},o.EI=function(s,n,l,c){for(var p=s.Ha(),f=n.Ha(),g=[0,0],w=[0,0],x=new h.am(s,n,l,!1),T=!1;x.next();){var E=x.pl(),O=x.jl();if(p.Wb(E),f.Wb(O),E=p.ia(),(E=f.ia().Fa(E,null,w,g,l))==2)T=!0;else if(E!=0){if(T=g[0],E=w[0],0<T&&1>T&&0<E&&1>E)return!1;T=!0}}return!!T&&(f=new h.l,g=new h.l,p=new h.l,s.A(f),n.A(g),f.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),p.L(f),p.Fa(g),!(10<s.I()&&(s=h.Vd.clip(s,p,l,0),s.B())||10<n.I()&&(n=h.Vd.clip(n,p,l,0),n.B()))&&h.cm.bn(s,n,l,"F********",c))},o.yI=function(s,n,l,c){for(var p=s.Ha(),f=n.Ha(),g=[0,0],w=[0,0],x=new h.am(s,n,l,!1),T=!1;x.next();){var E=x.pl(),O=x.jl();if(p.Wb(E),f.Wb(O),E=p.ia(),(E=f.ia().Fa(E,null,w,g,l))==2)T=!0;else if(E!=0){if(T=g[0],E=w[0],0<T&&1>T&&0<E&&1>E)return!0;T=!0}}return!!T&&(f=new h.l,g=new h.l,w=new h.l,x=new h.l,p=new h.l,s.A(f),n.A(g),o.ns(g,f,l)?(w.L(f),w.X(1e3*l,1e3*l),x.L(g),x.X(1e3*l,1e3*l),p.L(w),p.Fa(x),!(10<s.I()&&(s=h.Vd.clip(s,p,l,0),s.B())||10<n.I()&&(n=h.Vd.clip(n,p,l,0),n.B()))&&(l=h.cm.bn(s,n,l,"T********",c))):l=h.cm.bn(s,n,l,"T*****T**",c))},o.xI=function(s,n,l,c){var p=[!1],f=o.uI(s,n,l,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*l,1e3*l),!(10<s.I()&&(s=h.Vd.clip(s,p,l,0),s.B()))&&h.cm.aB(s,n,l,c))},o.vI=function(s,n,l){return h.jd.Zd(s,n,l)==1},o.CI=function(s,n,l){return h.jd.Zd(s,n,l)==2},o.lt=function(s,n,l){var c=new h.h;l*=l;for(var p=0;p<s.I();p++)if(s.D(p,c),h.h.zc(c,n)<=l)return!1;return!0},o.prototype.LE=function(s,n){return s=this.th[s],n=this.th[n],s.Om<n.Om||s.Om==n.Om&&(s.rw<n.rw||s.rw==n.rw&&(s.Mj<n.Mj||s.Mj==n.Mj&&(s.Ui<n.Ui||s.Ui==n.Ui&&s.wH<n.wH)))?-1:1},o}();h.vd=u}(U||(U={})),function(h){var k,v,u;(v=k||(k={}))[v.InteriorInterior=0]="InteriorInterior",v[v.InteriorBoundary=1]="InteriorBoundary",v[v.InteriorExterior=2]="InteriorExterior",v[v.BoundaryInterior=3]="BoundaryInterior",v[v.BoundaryBoundary=4]="BoundaryBoundary",v[v.BoundaryExterior=5]="BoundaryExterior",v[v.ExteriorInterior=6]="ExteriorInterior",v[v.ExteriorBoundary=7]="ExteriorBoundary",v[v.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),k=function(){function o(){this.me=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return o.tB=function(s,n,l,c,p){if(c.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var f=0;9>f;f++){var g=c.charAt(f);if(g!="*"&&g!="T"&&g!="F"&&g!="0"&&g!="1"&&g!="2")throw h.i.ga("relation string")}if((f=this.HR(c,s.Eb(),n.Eb()))!=0)return h.vd.uB(s,n,l,f,p);f=new h.l,s.A(f),g=new h.l,n.A(g);var w=new h.l;if(w.L(f),w.$b(g),l=h.ua.Xd(l,w,!1),s=this.RE(s,l),n=this.RE(n,l),s.B()||n.B())return this.pW(s,n,c);switch(f=n.K(),g=!1,s.K()){case 1736:switch(f){case 1736:g=this.st(s,n,l,c,p);break;case 1607:g=this.bn(s,n,l,c,p);break;case 33:g=this.rt(s,n,l,c);break;case 550:g=this.qt(s,n,l,c,p)}break;case 1607:switch(f){case 1736:g=this.bn(n,s,l,this.aq(c),p);break;case 1607:g=this.bB(s,n,l,c,p);break;case 33:g=this.ut(s,n,l,c,p);break;case 550:g=this.tt(s,n,l,c,p)}break;case 33:switch(f){case 1736:g=this.rt(n,s,l,this.aq(c));break;case 1607:g=this.ut(n,s,l,this.aq(c),p);break;case 33:g=this.VU(s,n,l,c);break;case 550:g=this.mt(n,s,l,this.aq(c))}break;case 550:switch(f){case 1736:g=this.qt(n,s,l,this.aq(c),p);break;case 1607:g=this.tt(n,s,l,this.aq(c),p);break;case 550:g=this.UA(s,n,l,c,p);break;case 33:g=this.mt(s,n,l,c)}break;default:g=!1}return g},o.st=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.sJ();var g=new h.l,w=new h.l;return s.A(g),n.A(w),c=!1,h.vd.fk(g,w,l)&&(f.Eu(s,n),c=!0),c||((g=h.vd.rc(s,n,!1))==4?(f.Eu(s,n),c=!0):g==1?(f.hy(n),c=!0):g==2&&(f.UD(s),c=!0)),c||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,p),f.Dp(s,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.Uw=function(s,n,l,c){var p=new o;p.$i(),p.dj("T*****F**"),p.sJ();var f=new h.l,g=new h.l;s.A(f),n.A(g);var w=!1;return h.vd.fk(f,g,l)&&(p.Eu(s,n),w=!0),w||((f=h.vd.rc(s,n,!1))==4?(p.Eu(s,n),w=!0):f==1?(p.hy(n),w=!0):f==2&&(p.UD(s),w=!0)),w?this.hg(p.J,p.Yc):(s=(w=new h.hd).Ib(s),f=w.Ib(n),h.Vk.W(w,l,c,!1),l=w.Ke(f).ng(),w.Ip(0,!0,!0),h.tn.W(w,s,-1,!1,c),w.I(s)!=0&&(h.tn.W(w,f,-1,!1,c),p.gr(w,c),(n=w.I(f)==0)||(p.Dp(s,f),p.j.Wg(),f=this.hg(p.J,p.Yc))?(s=w.Ke(s),s=(w=new h.hd).Ib(s),f=w.Ib(l),p.gr(w,c),p.me=0,p.$i(),p.dj(n?"T*****F**":"******F**"),p.DB(),p.Dp(s,f),p.j.Wg(),this.hg(p.J,p.Yc)):f))},o.bn=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.DB();var g=new h.l,w=new h.l;return s.A(g),n.A(w),c=!1,h.vd.fk(g,w,l)&&(f.Fu(s,n),c=!0),c||((g=h.vd.rc(s,n,!1))==4?(f.Fu(s,n),c=!0):g==1&&(f.VD(n),c=!0)),c||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,p),f.mh=f.j.Fp(),o.Lw(n,f.j,f.mh),f.Dp(s,n),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.aB=function(s,n,l,c){var p=new o;p.$i(),p.dj("T*****F**"),p.DB();var f=new h.l,g=new h.l;s.A(f),n.A(g);var w=!1;return h.vd.fk(f,g,l)&&(p.Fu(s,n),w=!0),w||((f=h.vd.rc(s,n,!1))==4?(p.Fu(s,n),w=!0):f==1&&(p.VD(n),w=!0)),w?this.hg(p.J,p.Yc):(s=(w=new h.hd).Ib(s),n=w.Ib(n),p.Yo(w,l,c),w.I(s)!=0&&(p.Dp(s,n),p.j.Wg(),this.hg(p.J,p.Yc)))},o.qt=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.tJ();var g=new h.l,w=new h.l;return s.A(g),n.A(w),c=!1,h.vd.fk(g,w,l)&&(f.Gu(s),c=!0),c||((g=h.vd.rc(s,n,!1))==4?(f.Gu(s),c=!0):g==1&&(f.uN(),c=!0)),c||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,p),f.By(s,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.bB=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.$W(),c=new h.l;var g=new h.l;s.A(c),n.A(g);var w=!1;return h.vd.fk(c,g,l)&&(f.KG(s,n),w=!0),w||h.vd.rc(s,n,!1)!=4||(f.KG(s,n),w=!0),w||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,p),f.$h=f.j.Fp(),f.mh=f.j.Fp(),o.Lw(s,f.j,f.$h),o.Lw(n,f.j,f.mh),f.Dp(s,n),f.j.Gp(f.$h),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.tt=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.HJ(),c=new h.l;var g=new h.l;s.A(c),n.A(g);var w=!1;return h.vd.fk(c,g,l)&&(f.Qz(s),w=!0),w||h.vd.rc(s,n,!1)!=4||(f.Qz(s),w=!0),w||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,p),f.$h=f.j.Fp(),o.Lw(s,f.j,f.$h),f.By(s,n),f.j.Gp(f.$h),f.j.Wg()),o.hg(f.J,f.Yc)},o.UA=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.MJ(),c=new h.l;var g=new h.l;s.A(c),n.A(g);var w=!1;return h.vd.fk(c,g,l)&&(f.tI(),w=!0),w||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,p),f.By(s,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.rt=function(s,n,l,c){var p=new o;p.$i(),p.dj(c),p.tJ();var f=new h.l;s.A(f),n=n.D();var g=!1;return h.vd.Tw(n,f,l)&&(p.Gu(s),g=!0),g||((l=h.jd.Zd(s,n,l))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):l==2?(p.J[6]=-1,s.He()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,l=new h.l,s.A(l),p.J[2]=l.da()==0&&l.S()==0?-1:1)):p.Gu(s)),this.hg(p.J,c)},o.ut=function(s,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.HJ();var g=new h.l;s.A(g),c=n.D();var w=!1;if(h.vd.Tw(c,g,l)&&(f.Qz(s),w=!0),!w){g=null;var x=w=!1;(f.fa[0]||f.fa[6])&&(h.vd.Tz(s,c,l)?(f.fa[0]&&(g=h.si.im(s,p),x=!h.vd.lt(g,c,l),w=!0,f.J[0]=x?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.fa[3]&&(g!=null&&g.B()?f.J[3]=-1:(w||(g==null&&(g=h.si.im(s,p)),x=!h.vd.lt(g,c,l),w=!0),f.J[3]=x?0:-1)),f.fa[5]&&(g!=null&&g.B()?f.J[5]=-1:w&&!x?f.J[5]=0:(g==null&&(g=h.si.im(s,p)),p=h.vd.Pw(g,n,l),f.J[5]=p?-1:0)),f.fa[2]&&(s.Rb()!=0?f.J[2]=1:((p=new h.ee(s.description)).Gd(s,0,s.I()),s=h.vd.Pw(p,n,l),f.J[2]=s?-1:0))}return this.hg(f.J,f.Yc)},o.mt=function(s,n,l,c){var p=new o;p.$i(),p.dj(c),p.MJ();var f=new h.l;s.A(f),n=n.D();var g=!1;if(h.vd.Tw(n,f,l)&&(p.tI(),g=!0),!g){f=!1,g=!0,l*=l;for(var w=0;w<s.I();w++){var x=s.Oa(w);if(h.h.zc(x,n)<=l?f=!0:g=!1,f&&!g)break}f?(p.J[0]=0,p.J[2]=g?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.hg(p.J,c)},o.VU=function(s,n,l,c){s=s.D(),n=n.D();for(var p=[],f=0;9>f;f++)p[f]=-1;return h.h.zc(s,n)<=l*l?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.hg(p,c)},o.hg=function(s,n){for(var l=0;9>l;l++)switch(n.charAt(l)){case"T":if(s[l]==-1)return!1;break;case"F":if(s[l]!=-1)return!1;break;case"0":if(s[l]!=0)return!1;break;case"1":if(s[l]!=1)return!1;break;case"2":if(s[l]!=2)return!1}return!0},o.pW=function(s,n,l){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.hg(c,l)}return p=!1,s.B()&&(s=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=s.K(),h.ba.Ic(n)?n==1736?s.He()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,s.A(n),c[2]=n.da()==0&&n.S()==0?0:1):(n=s.Rb()!=0,c[2]=n?1:0,c[5]=h.si.cq(s)?0:-1):(c[2]=0,c[5]=-1),p&&this.qK(c),this.hg(c,l)},o.HR=function(s,n,l){return o.ZP(s)?3:o.PP(s)?4:o.ZX(s,n,l)?8:o.xP(s,n,l)?16:o.$O(s)?1:o.zU(s,n,l)?32:0},o.ZP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},o.PP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},o.ZX=function(s,n,l){return(n!=0||l!=0)&&((n!=2||l!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||n==1&&l==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||l!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},o.xP=function(s,n,l){return n>l?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":n==1&&l==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},o.$O=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},o.zU=function(s,n,l){if(n==l){if(n!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},o.Lw=function(s,n,l){s=n.Ma(s);for(var c=n.Oe;c!=-1;c=n.Tf(c))if(n.yd(c)&s){var p=n.Je(c);if(p==-1)n.pn(c,l,0);else{var f=p,g=0;do n.fh(f)&s&&g++,f=n.kc(n.ya(f));while(f!=p);n.pn(c,l,g)}}},o.aq=function(s){var n=""+s.charAt(0);return n+=s.charAt(3),n+=s.charAt(6),n+=s.charAt(1),n+=s.charAt(4),n+=s.charAt(7),n+=s.charAt(2),(n+=s.charAt(5))+s.charAt(8)},o.prototype.$i=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.$a[s]=-2},o.qK=function(s){var n=s[1],l=s[2],c=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=n,s[6]=l,s[7]=c},o.prototype.dj=function(s){for(this.Yc=s,s=0;9>s;s++)this.Yc.charAt(s)!="*"?(this.fa[s]=!0,this.me++):this.fa[s]=!1},o.prototype.PJ=function(){for(var s=0;9>s;s++)this.fa[s]&&this.J[s]==-2&&(this.J[s]=-1,this.fa[s]=!1)},o.prototype.qc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.fa[s]=!1,this.me--,!0):this.Yc.charAt(s)!="T"&&this.Yc.charAt(s)!="F"?!(this.J[s]<this.$a[s])&&(this.fa[s]=!1,this.me--,!0):(this.fa[s]=!1,this.me--,!0))},o.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.sN=function(s,n,l){var c=!0;return this.fa[0]&&(this.xS(s,n,l),c=c&&this.qc(0)),this.fa[1]&&(this.nG(s,n,1),c=c&&this.qc(1)),this.fa[2]&&(this.oG(s,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.nG(s,l,3),c=c&&this.qc(3)),this.fa[4]&&(this.wN(s,n,l),c=c&&this.qc(4)),this.fa[5]&&(this.$D(s,l,5),c=c&&this.qc(5)),this.fa[6]&&(this.oG(s,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.$D(s,n,7),c=c&&this.qc(7)),c},o.prototype.Eu=function(s,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(n,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},o.prototype.Hr=function(s,n,l,c,p){n==-1&&c==-1||((l!="T"&&l!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&s.He()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(l=new h.l,s.A(l),this.J[n]=l.da()==0&&l.S()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.hy=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(s,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},o.prototype.UD=function(s){this.hy(s),o.qK(this.J)},o.prototype.Fu=function(s,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var l=this.Yc.charAt(6);l=l=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0}this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1),this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.VD=function(s){if(this.fa[0]){var n=this.Yc.charAt(0);n=n=="T"||n=="F"||s.Rb()!=0,this.J[0]=n?1:0}this.fa[1]&&(s=h.si.cq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Gu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.KG=function(s,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var l=this.Yc.charAt(2);l=l=="T"||l=="F"||s.Rb()!=0,this.J[2]=l?1:0}this.fa[5]&&(s=h.si.cq(s),this.J[5]=s?0:-1),this.fa[6]&&(l=(l=this.Yc.charAt(6))=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0),this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1)},o.prototype.Qz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var n=this.Yc.charAt(2);n=n=="T"||n=="F"||s.Rb()!=0,this.J[2]=n?1:0}this.fa[5]&&(s=h.si.cq(s),this.J[5]=s?0:-1),this.J[6]=0},o.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.tN=function(s,n,l){var c=!0;return this.fa[0]&&(this.yS(s,n),c=c&&this.qc(0)),this.fa[1]&&(this.uS(s,n,l,this.mh),c=c&&this.qc(1)),this.fa[2]&&(this.vS(s,n),c=c&&this.qc(2)),this.fa[3]&&(this.AN(s,n,l,this.mh),c=c&&this.qc(3)),this.fa[4]&&(this.xN(s,n,l,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.yN(s,n,l),c=c&&this.qc(5)),this.fa[6]&&(this.gQ(s,n),c=c&&this.qc(6)),this.fa[7]&&(this.fQ(s,n,l,this.mh),c=c&&this.qc(7)),c},o.prototype.hT=function(s,n,l){var c=!0;return this.fa[0]&&(this.BS(s,n,l,this.$h,this.mh),c=c&&this.qc(0)),this.fa[1]&&(this.pG(s,n,l,this.$h,this.mh,1),c=c&&this.qc(1)),this.fa[2]&&(this.qG(s,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.pG(s,l,n,this.mh,this.$h,3),c=c&&this.qc(3)),this.fa[4]&&(this.CN(s,n,l,this.$h,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.aE(s,l,this.$h,5),c=c&&this.qc(5)),this.fa[6]&&(this.qG(s,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.aE(s,n,this.mh,7),c=c&&this.qc(7)),c},o.prototype.WD=function(s,n,l){var c=!0;return this.fa[0]&&(this.zS(s,n),c=c&&this.qc(0)),this.fa[2]&&(this.wS(s,n),c=c&&this.qc(2)),this.fa[3]&&(this.BN(s,n,l),c=c&&this.qc(3)),this.fa[5]&&(this.zN(s,n),c=c&&this.qc(5)),this.fa[6]&&(this.hQ(s,n),c=c&&this.qc(6)),c},o.prototype.LG=function(s,n,l){var c=!0;return this.fa[0]&&(this.CS(s,n,l,this.$h),c=c&&this.qc(0)),this.fa[2]&&(this.AS(s,l),c=c&&this.qc(2)),this.fa[3]&&(this.EN(s,n,l,this.$h),c=c&&this.qc(3)),this.fa[5]&&(this.DN(s,n,l,this.$h),c=c&&this.qc(5)),this.fa[6]&&(this.iQ(s,n,l),c=c&&this.qc(6)),c},o.prototype.UU=function(s,n,l){var c=!0;return this.fa[0]&&(this.DS(s,n,l),c=c&&this.qc(0)),this.fa[2]&&(this.rG(s,n,l,2),c=c&&this.qc(2)),this.fa[6]&&(this.rG(s,l,n,6),c=c&&this.qc(6)),c},o.prototype.xS=function(s,n,l){this.J[0]!=2&&(s=this.j.af(s))&n&&s&l&&(this.J[0]=2)},o.prototype.nG=function(s,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(s));this.j.af(s)&n&&c&n&&(this.J[l]=1)}},o.prototype.oG=function(s,n,l,c){this.J[c]!=2&&(s=this.j.af(s))&n&&!(s&l)&&(this.J[c]=2)},o.prototype.wN=function(s,n,l){if(this.J[4]!=1){var c=this.j.fh(s);c&n&&c&l?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.yd(this.j.vf(s)))&n&&s&l&&(this.J[4]=0)}},o.prototype.$D=function(s,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(s));!(this.j.af(s)&n)&&!(c&n)&&(this.J[l]=1)}},o.prototype.yS=function(s,n){if(this.J[0]!=1){var l=this.j.af(this.j.ya(s));this.j.af(s)&n&&l&n&&(this.J[0]=1)}},o.prototype.uS=function(s,n,l,c){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var p=this.j.vf(s),f=this.j.yd(p);!(f&n)&&this.j.af(s)&n&&(s=this.j.og(p,c),f&l&&s%2!=0&&(this.J[1]=0))}},o.prototype.vS=function(s,n){this.J[2]!=2&&this.j.fh(s)&n&&(this.J[2]=2)},o.prototype.AN=function(s,n,l,c){if(this.J[3]!=1){var p=this.j.fh(s);p&n&&p&l?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(p=this.j.vf(s),(s=this.j.yd(p))&n&&(n=this.j.og(p,c),s&l&&n%2==0&&(this.J[3]=0)))}},o.prototype.xN=function(s,n,l,c){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var p=this.j.vf(s);(s=this.j.yd(p))&n&&(n=this.j.og(p,c),s&l&&n%2!=0&&(this.J[4]=0))}},o.prototype.yN=function(s,n,l){this.J[5]!=1&&(s=this.j.fh(s))&n&&!(s&l)&&(this.J[5]=1)},o.prototype.gQ=function(s,n){if(this.J[6]!=1){var l=this.j.af(this.j.ya(s));!(this.j.af(s)&n)&&!(l&n)&&(this.J[6]=1)}},o.prototype.fQ=function(s,n,l,c){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var p=this.j.vf(s),f=this.j.yd(p);!(f&n)&&!(this.j.af(s)&n)&&(s=this.j.og(p,c),f&l&&s%2!=0&&(this.J[7]=0))}},o.prototype.BS=function(s,n,l,c,p){if(this.J[0]!=1){var f=this.j.fh(s);f&n&&f&l?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),(f=this.j.yd(s))&n&&f&l&&(n=this.j.og(s,c),p=this.j.og(s,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.pG=function(s,n,l,c,p,f){if(this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var g=this.j.yd(s);g&n&&g&l&&(n=this.j.og(s,c),p=this.j.og(s,p),n%2==0&&p%2!=0&&(this.J[f]=0))}},o.prototype.qG=function(s,n,l,c){this.J[c]!=1&&(s=this.j.fh(s))&n&&!(s&l)&&(this.J[c]=1)},o.prototype.CN=function(s,n,l,c,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var f=this.j.yd(s);f&n&&f&l&&(n=this.j.og(s,c),p=this.j.og(s,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.aE=function(s,n,l,c){this.J[c]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),!(this.j.yd(s)&n)&&this.j.og(s,l)%2!=0&&(this.J[c]=0))},o.prototype.zS=function(s,n){this.J[0]!=0&&!(this.j.yd(s)&n)&&this.j.jk(this.j.Yy(s))&n&&(this.J[0]=0)},o.prototype.wS=function(s,n){this.J[2]!=2&&this.j.yd(s)&n&&(this.J[2]=2)},o.prototype.BN=function(s,n,l){this.J[3]!=0&&(s=this.j.yd(s))&n&&s&l&&(this.J[3]=0)},o.prototype.zN=function(s,n){this.J[5]!=1&&this.j.yd(s)&n&&(this.J[5]=1)},o.prototype.hQ=function(s,n){this.J[6]!=0&&!(this.j.yd(s)&n)&&!(this.j.jk(this.j.Yy(s))&n)&&(this.J[6]=0)},o.prototype.CS=function(s,n,l,c){if(this.J[0]!=0){var p=this.j.yd(s);p&n&&p&l&&this.j.og(s,c)%2==0&&(this.J[0]=0)}},o.prototype.AS=function(s,n){this.J[2]!=1&&(this.j.Je(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(s)&n)&&(this.J[2]=0))},o.prototype.EN=function(s,n,l,c){if(this.J[3]!=0){var p=this.j.yd(s);p&n&&p&l&&this.j.og(s,c)%2!=0&&(this.J[3]=0)}},o.prototype.DN=function(s,n,l,c){if(this.J[5]!=0){var p=this.j.yd(s);p&n&&!(p&l)&&this.j.og(s,c)%2!=0&&(this.J[5]=0)}},o.prototype.iQ=function(s,n,l){this.J[6]!=0&&!((s=this.j.yd(s))&n)&&s&l&&(this.J[6]=0)},o.prototype.DS=function(s,n,l){this.J[0]!=0&&(s=this.j.yd(s))&n&&s&l&&(this.J[0]=0)},o.prototype.rG=function(s,n,l,c){this.J[c]!=0&&(s=this.j.yd(s))&n&&!(s&l)&&(this.J[c]=0)},o.prototype.Dp=function(s,n){var l=!1;s=this.j.Ma(s),n=this.j.Ma(n),this.Wi=this.j.bh();for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){var p=this.j.Je(c);if(p==-1){if(this.Um!=-1)switch(this.Um){case 3:l=this.WD(c,s,n);break;case 4:l=this.LG(c,s,n);break;default:throw h.i.ga("internal error")}}else{var f=p;do{var g=f;if(this.j.Bb(g,this.Wi)!=1)do{switch(this.xw){case 0:l=this.sN(g,s,n);break;case 1:l=this.tN(g,s,n);break;case 2:l=this.hT(g,s,n);break;default:throw h.i.ga("internal error")}if(l)break;this.j.Kb(g,this.Wi,1),g=this.j.kc(g)}while(g!=f&&!l);if(l)break;f=this.j.kc(this.j.ya(g))}while(f!=p);if(l)break}}l||this.PJ(),this.j.Lg(this.Wi)},o.prototype.By=function(s,n){var l=!1;s=this.j.Ma(s),n=this.j.Ma(n);for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){switch(this.Um){case 3:l=this.WD(c,s,n);break;case 4:l=this.LG(c,s,n);break;case 5:l=this.UU(c,s,n);break;default:throw h.i.Ra()}if(l)break}l||this.PJ()},o.prototype.gr=function(s,n){this.j.fr(s,n)},o.prototype.Yo=function(s,n,l){this.TP(s,n,l),this.gr(s,l)},o.prototype.TP=function(s,n,l){for(h.Vk.W(s,n,l,!1),s.Ip(0,!0,!0),n=s.md;n!=-1;n=s.ve(n))s.jc(n)==1736&&h.tn.W(s,n,-1,!1,l)},o.RE=function(s,n){var l=s.K();return h.ba.zd(l)?((n=new h.Ua(s.description)).pc(s,!0),n):l==197?(l=new h.l,s.A(l),l.da()<=n&&l.S()<=n?(n=new h.Ta(s.description),s.tf(n),n):l.da()<=n||l.S()<=n?(n=new h.Ua(s.description),l=new h.Ta,s.If(0,l),n.nf(l),s.If(2,l),n.lineTo(l),n):((n=new h.Ea(s.description)).bd(s,!1),n)):s},o}(),h.cm=k}(U||(U={})),function(h){var k=function(){function o(s){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=s,this.Js=-1}return o.prototype.cc=function(s){return this.g.cc(this.uz(s))},o.prototype.Dv=function(s){var n=this.dz(s);if(s=this.CF(s),this.g.Na(n)==s){var l=n;n=s,s=l}return this.g.Hc(n,this.xt),this.g.Hc(s,this.yt),this.xt.y<this.yt.y},o.prototype.uz=function(s){var n=this.dz(s);return s=this.CF(s),this.g.V(n)==s?n:s},o.prototype.dz=function(s){return this.Gm.get(s)},o.prototype.CF=function(s){return this.fw.get(s)},o.prototype.mF=function(s){this.Gm.set(s,this.Js),this.Js=s},o.prototype.iI=function(s){if(this.Js!=-1){var n=this.Js;return this.Js=this.Gm.get(n),this.Gm.set(n,s),this.fw.set(n,this.g.V(s)),n}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),n=this.Gm.size,this.Gm.add(s),this.fw.add(this.g.V(s)),n},o.prototype.mz=function(s){return this.g.cd(this.dz(s))},o}();h.uY=k;var v=function(){function o(s){this.Ce=s,this.je=new h.zb,this.Pm=new h.zb,this.xH=0,this.Co=null,this.tA=-1}return o.prototype.compare=function(s,n,l){l=s.ka(l);var c=this.Ce.hb;if(this.tA==n)var p=this.xH;else this.Co=c.cc(n),this.Co==null?((s=c.g).fd(c.uz(n),this.je),this.Co=this.je,p=this.je.Me(this.Ce.Ah,0)):p=this.Co.Me(this.Ce.Ah,0),this.xH=p,this.tA=n;if((s=c.cc(l))==null){(s=c.g).fd(c.uz(l),this.Pm),s=this.Pm;var f=this.Pm.Me(this.Ce.Ah,0)}else f=s.Me(this.Ce.Ah,0);return p==f&&(n=c.Dv(n),l=c.Dv(l),(n=.5*((l=Math.min(n?this.Co.ma:this.Co.oa,l?s.ma:s.oa))+this.Ce.Ah))==this.Ce.Ah&&(n=l),p=this.Co.Me(n,0),f=s.Me(n,0)),p<f?-1:p>f?1:0},o.prototype.reset=function(){this.tA=-1},o}(),u=function(){function o(){this.Ym=this.Il=null,this.fb=new h.$j,this.fb.MP(),this.ae=new v(this),this.fb.Xo(this.ae)}return o.prototype.CQ=function(){var s=!1;if(this.hw&&(s=this.DQ()),this.g.ea(this.Y)==1){var n=this.g.Ob(this.Y);return s=this.g.qz(n),this.g.KB(n,!0),0>s&&(s=this.g.Ya(n),this.g.kJ(s),this.g.Yg(n,this.g.Na(s)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),n=this.g.Ob(this.Y);n!=-1;n=this.g.Sb(n))this.g.ir(n,this.Gl,0),this.g.ir(n,this.yo,-1);n=new h.ja(0),this.Ah=NaN;var l=new h.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var c=this.Il.sc(this.Il.ke);c!=-1;c=this.Il.lb(c)){var p=this.Il.getData(c);if(this.g.Hc(p,l),l.y!=this.Ah&&n.size!=0&&(s=this.vt(n)||s,this.ae.reset(),n.clear(!1)),n.add(p),this.Ah=l.y,this.ft==0)break}for(0<this.ft&&(s=this.vt(n)||s,n.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),n=this.g.Ob(this.Y);n!=-1;)if(this.g.uj(n,this.Gl)==3){for(this.g.KB(n,!0),l=n,n=this.g.uj(n,this.yo);n!=-1;)c=this.g.uj(n,this.yo),this.g.UT(this.Y,this.g.Sb(l),n),l=n,n=c;n=this.g.Sb(l)}else this.g.KB(n,!1),n=this.g.Sb(n);return this.g.xB(this.Gl),this.g.xB(this.yo),s},o.prototype.vt=function(s){return this.VV(s)},o.prototype.VV=function(s){var n=!1;this.hb==null&&(this.hb=new k(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(s);for(var l=0,c=s.size;l<c;l++){var p=s.get(l);p!=-1&&this.jG(p,-1)}for(l=0;l<this.Ym.size&&0<this.ft;l++)if(s=this.Ym.get(l),p=this.hb.mz(this.fb.ka(s)),c=-1,this.g.uj(p,this.Gl)==0){p=this.fb.xe(s);for(var f,g=s;p!=-1;){var w=this.fb.ka(p),x=this.hb.mz(w),T=this.g.uj(x,this.Gl);if(T!=0){c=x;break}g=p,p=this.fb.xe(p)}p==-1?(f=!0,p=g):(w=this.fb.ka(p),f=this.hb.Dv(w),p=this.fb.lb(p),f=!f);do{if(w=this.fb.ka(p),x=this.hb.mz(w),(T=this.g.uj(x,this.Gl))==0&&(f!=this.hb.Dv(w)&&(n=this.g.Ya(x),this.g.kJ(n),this.g.Yg(x,this.g.Na(n)),n=!0),this.g.ir(x,this.Gl,f?3:2),f||(g=this.g.uj(c,this.yo),this.g.ir(c,this.yo,x),this.g.ir(x,this.yo,g)),this.ft--,this.ft==0))return n;c=x,g=p,p=this.fb.lb(p),f=!f}while(g!=s)}return n},o.prototype.UV=function(s){for(var n=0,l=s.size;n<l;n++){var c=s.get(n),p=this.g.Qa(c,this.to),f=this.g.Qa(c,this.Ts);if(p!=-1){var g=this.fb.ka(p);this.hb.mF(g),this.g.Sa(c,this.to,-1)}f!=-1&&(g=this.fb.ka(f),this.hb.mF(g),this.g.Sa(c,this.Ts,-1)),g=-1,p!=-1&&f!=-1?(this.fb.wd(p,-1),this.fb.wd(f,-1),s.set(n,-1)):g=p!=-1?p:f,g!=-1&&(this.jG(c,g)||this.fb.wd(g,-1),s.set(n,-1))}},o.prototype.jG=function(s,n){var l=new h.h,c=new h.h;this.g.Hc(s,l);var p=this.g.V(s);this.g.Hc(p,c);var f=!1;if(l.y<c.y){f=!0;var g=this.hb.iI(s);if(n==-1)var w=this.fb.addElement(g,-1);else w=n,this.fb.Uj(w,g);(g=this.g.Qa(p,this.to))==-1?this.g.Sa(p,this.to,w):this.g.Sa(p,this.Ts,w),p=this.g.cd(s),this.g.uj(p,this.Gl)==0&&this.Ym.add(w)}return p=this.g.Na(s),this.g.Hc(p,c),l.y<c.y&&(f=!0,g=this.hb.iI(p),n==-1?w=this.fb.addElement(g,-1):(w=n,this.fb.Uj(w,g)),(g=this.g.Qa(p,this.to))==-1?this.g.Sa(p,this.to,w):this.g.Sa(p,this.Ts,w),p=this.g.cd(s),this.g.uj(p,this.Gl)==0&&this.Ym.add(w)),f},o.W=function(s,n,l,c){var p=new o;return p.g=s,p.Y=n,p.Il=l,p.hw=c,p.CQ()},o.prototype.DQ=function(){var s=new h.ja(0),n=new h.ja(0),l=-1,c=-1,p=new h.h;p.Sc();for(var f=-1,g=-1,w=-1,x=new h.h,T=this.Il.sc(this.Il.ke);T!=-1;T=this.Il.lb(T)){var E=this.Il.getData(T);this.g.Hc(E,x);var O=this.g.cd(E);p.rb(x)&&g==O?(c==-1&&(l=this.g.Fy(),c=this.g.Hd()),w==-1&&(w=n.size,this.g.Sa(f,c,w),n.add(1),this.g.uj(O,l)==-1&&(this.g.ir(O,l,f),s.add(O))),this.g.Sa(E,c,w),n.XW(n.Gc()+1)):(w=-1,p.N(x)),f=E,g=O}if(s.size==0)return!1;for(p=new h.ja(0),f=new h.ja(0),g=0,w=s.size;g<w;g++){O=s.get(g);var C=this.g.uj(O,l);for(E=this.g.Qa(C,c),p.clear(!1),f.clear(!1),p.add(C),f.add(E),E=this.g.V(C);E!=C;E=this.g.V(E)){var N=E;if((x=this.g.Qa(N,c))!=-1)if(f.size==0)f.add(x),p.add(N);else if(f.Gc()==x){T=p.Gc();var D=this.g.V(T);C=this.g.V(N),this.g.Cc(T,C),this.g.Dc(C,T),this.g.Cc(N,D),this.g.Dc(D,N),N=[!1],D=this.g.iG(this.Y,D,this.g.Ya(O),N),this.g.Sa(E,c,-1),N[0]&&this.g.Kf(O,C),E=this.g.Ka(O),E-=C=this.g.Ka(D),this.g.Xj(O,E),n.set(x,n.get(x)-1),n.get(x)==1&&(n.set(x,0),f.Jf(),p.Jf()),E=C=T}else p.add(E),f.add(x)}}return this.g.xB(l),this.g.Ud(c),!0},o}();h.RL=u}(U||(U={})),function(h){var k=function(){function v(){}return v.prototype.jg=function(){this.KA=this.tb=null},v.prototype.get=function(){return this.KA},v.prototype.set=function(u){if(this.KA=u,u!=null)throw u.K()==322&&(this.tb=u),h.i.Ra()},v.prototype.create=function(u){if(u!=322)throw h.i.ga("Not Implemented");this.Qr()},v.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.KA=this.tb},v}();h.jg=k}(U||(U={})),function(h){(h=h.SL||(h.SL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(U||(U={})),function(h){var k=function(u){this.bj=u,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},v=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return u.prototype.rB=function(o){if(o!=null){for(var s=0,n=o.length;s<n;s++)this.mW(o[s]);o.length=0}},u.prototype.mW=function(o){o.bj=null,this.Kq.push(o)},u.prototype.Qw=function(o){if(this.Kq.length===0)var s=new k(o);else(s=this.Kq[this.Kq.length-1]).bj=o,--this.Kq.length;return s},u.prototype.NR=function(o,s){return o==0?this.bt[s]:this.Aw[s]},u.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new h.jg);var o=this.HA[this.Ew];return this.Ew++,o},u.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},u.prototype.Qo=function(o){this.oo.push(this.Qw(o))},u.prototype.ql=function(o){return o==0?this.bt.length:this.Aw.length},u.prototype.Xp=function(o,s){return this.NR(o,s).bj},u.prototype.Fa=function(o,s){if(this.oo.length!=2)throw h.i.Ra();this.ra=o;var n=h.mc.ox(.01*o),l=!1,c=this.oo[0],p=this.oo[1];if(s||5&c.bj.Br(p.bj,o,!0)){if(c.bj.K()==322){var f=c.bj;if(p.bj.K()==322){s=p.bj;var g=h.zb.Yx(f,s,null,this.Hq,this.Dk,o);if(g==0)throw h.zb.Yx(f,s,null,this.Hq,this.Dk,o),h.i.Ra();o=Array(9),h.P.bv(o,null);for(var w=0;w<g;w++){var x=this.Hq[w],T=this.Dk[w],E=c.nB,O=1;x==0?(E=c.oB,O=c.mC):x==1&&(E=c.mB,O=c.lC);var C=p.nB,N=1;T==0?(C=p.oB,N=p.mC):T==1&&(C=p.mB,N=p.lC);var D=new h.h;E==C?(E=new h.h,f.ic(x,E),x=new h.h,s.ic(T,x),N/=T=O+N,h.mc.JG(E,x,N,D),h.h.zc(D,E)+h.h.zc(D,x)>n&&(l=!0)):E>C?(f.ic(x,D),x=new h.h,s.ic(T,x),h.h.zc(D,x)>n&&(l=!0)):(s.ic(T,D),E=new h.h,f.ic(x,E),h.h.zc(D,E)>n&&(l=!0)),o[w]=D}for(c=0,p=-1,w=0;w<=g;w++)(N=w<g?this.Hq[w]:1)!=c&&(n=this.WA(),f.dh(c,N,n),p!=-1&&n.get().Ec(o[p]),w!=g&&n.get().Rc(o[w]),c=N,this.bt.push(this.Qw(n.get()))),p=w;for(f=[0,0,0,0,0,0,0,0,0],w=0;w<g;w++)f[w]=w;for(1<g&&this.Dk[0]>this.Dk[1]&&(N=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=N,w=f[0],f[0]=f[1],f[1]=w),c=0,p=-1,w=0;w<=g;w++)(N=w<g?this.Dk[w]:1)!=c&&(n=this.WA(),s.dh(c,N,n),p!=-1&&(c=f[p],n.get().Ec(o[c])),w!=g&&(c=f[w],n.get().Rc(o[c])),c=N,this.Aw.push(this.Qw(n.get()))),p=w;return l}}throw h.i.Ra()}return!1},u.prototype.Fz=function(o,s,n){if(s.copyTo(this.Cf),this.oo.length!=1)throw h.i.Ra();this.ra=o;var l=this.oo[0];if(n||l.bj.tu(s.D(),o,!0)){if(l.bj.K()!=322)throw h.i.Ra();var c=(o=l.bj).ge(s.D(),!1);this.Hq[0]=c;var p=l.nB;for(n=1,c==0?(p=l.oB,n=l.mC):c==1&&(p=l.mB,n=l.lC),l=new h.h,p==0?(p=new h.h,o.ic(c,p),s=s.D(),h.mc.JG(p,s,1/(n+1),l)):0<p?(l=new h.h,o.ic(c,l)):l=s.D(),n=0,c=-1,p=0;1>=p;p++){if((s=1>p?this.Hq[p]:1)!=n){var f=this.WA();o.dh(n,s,f),c!=-1&&f.get().Ec(l),p!=1&&f.get().Rc(l),n=s,this.bt.push(this.Qw(f.get()))}c=p}this.Cf.Db(l)}},u}();h.OC=v}(U||(U={})),function(h){var k=function(){function v(u){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new h.h}return v.prototype.wW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.cg=u.cg,this.Bm=u.Bm,this.tk=null},v.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw h.i.de();this.Kd++}return this.tk},v.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw h.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},v.prototype.xW=function(){this.Af=-1,this.Kd=0},v.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},v.prototype.Wb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.ea()){var s=this.DM();if(u>=s&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-s)}o=0<=o&&o<this.ib.ea()&&u>=this.ib.Ca(o)&&u<this.ib.Wc(o)?o:this.ib.nz(u),this.El=o+1,this.gb=o,this.Af=-1,this.Kd=u-this.ib.Ca(o),this.cg=this.Vx(o),this.ib.Ca(this.gb),this.ib.ec(this.gb)},v.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},v.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},v.prototype.Vx=function(u){if(this.ib.Bc())return 0;var o=1;return this.ib.ec(u)&&(o=0),this.ib.Ka(u)-o},v.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},v.prototype.EB=function(){this.Bm=!0},v.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},v.prototype.DM=function(){return this.ib.Ca(this.gb)},v.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},v.prototype.xm=function(){return this.Af==0},v.prototype.Sn=function(){return this.Af==this.cg-1},v.prototype.Ia=function(){return this.Kd<this.cg},v.prototype.zz=function(){return 0<this.Kd},v.prototype.Qf=function(){var u=new v(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.cg=this.cg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},v.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw h.i.de();this.Af=this.Kd;var u=this.xb();this.ib.oc();var o=this.ib.Se,s=1;switch(o!=null&&(s=7&o.read(u)),o=this.ib.description,s){case 1:this.tb==null&&(this.tb=new h.zb),this.tk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.tk.Pf(o),s=this.kk(),this.ib.Hc(u,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(s,this.Fs),this.tk.Rc(this.Fs);for(var n=1,l=o.Ba;n<l;n++)for(var c=o.ld(n),p=h.sa.Wa(c),f=0;f<p;f++){var g=this.ib.Vc(c,u,f);this.tk.TB(c,f,g),g=this.ib.Vc(c,s,f),this.tk.JB(c,f,g)}},v.prototype.VS=function(){return this.gb==this.ib.ea()-1},v.prototype.Rn=function(){var u=this.ib.QR();return u!=null&&(7&u.read(this.Af))!=1},v}();h.TL=k}(U||(U={})),function(h){var k=function(){function v(u){u instanceof h.ba?(this.sH=u,this.za=-1,this.Gi=1):(this.qT=u.slice(0),this.za=-1,this.Gi=u.length)}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},v.prototype.re=function(){},v}();h.$c=k}(U||(U={})),function(h){var k=function(){this.next=null},v=function(){function u(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return u.prototype.wX=function(o,s,n){this.ri=o,this.rl=s,this.Lh=this.Yl=null,this.Vq=0,this.qy=n,this.jn==null&&(this.jn=h.P.mg(384,0)),this.iK()},u.prototype.S=function(){return this.ri},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},u.prototype.iK=function(){if(0<this.Vq){for(var o=0;o<this.rl;o++){for(var s=this.Yl[o];s!=null;){var n=s;s=s.next,n.next=null}this.Yl[o]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},u.prototype.dJ=function(o){for(this.fF=o==u.Bx,o=this.Nw;o<=this.Mw;o++)this.nN(),this.gN(o),this.UP();this.iK()},u.prototype.fy=function(o,s,n,l){if(s!=l){var c=1;if(s>l&&(c=o,o=n,n=c,c=s,s=l,l=c,c=-1),!(0>l||s>=this.rl)){0>o&&0>n?n=o=-1:o>=this.ri&&n>=this.ri&&(n=o=this.ri);var p=(n-o)/(l-s);l>this.rl&&(n=p*((l=this.rl)-s)+o),0>s&&(o=p*(0-s)+o,s=0);var f=Math.max(this.ri+1,8388607);-8388607>o?(s=(0-o)/p+s,o=0):o>f&&(s=(this.ri-o)/p+s,o=this.ri),-8388607>n?l=(0-o)/p+s:n>f&&(l=(this.ri-o)/p+s),(s=h.P.truncate(s))!=(l=h.P.truncate(l))&&((n=new k).x=h.P.truncate(4294967296*o),n.y=s,n.H=l,n.RP=h.P.truncate(4294967296*p),n.dir=c,this.Yl==null&&(this.Yl=h.P.mg(this.rl,null)),n.next=this.Yl[n.y],this.Yl[n.y]=n,n.y<this.Nw&&(this.Nw=n.y),n.H>this.Mw&&(this.Mw=n.H),this.Vq++)}}},u.prototype.nN=function(){if(this.Lh!=null){for(var o=!1,s=null,n=this.Lh;n!=null;)if(n.y++,n.y==n.H){var l=n;n=n.next,s!=null?s.next=n:this.Lh=n,l.next=null}else n.x+=n.RP,s!=null&&s.x>n.x&&(o=!0),s=n,n=n.next;o&&(this.Lh=this.aK(this.Lh))}},u.prototype.gN=function(o){if(!(o>=this.rl)){var s=this.Yl[o];if(s!=null){this.Yl[o]=null,s=this.aK(s),this.Vq-=this.bK,o=this.Lh;for(var n=!0,l=s,c=null;o!=null&&l!=null;)o.x>l.x?(n&&(this.Lh=l),n=l.next,l.next=o,c!=null&&(c.next=l),c=l,l=n):(n=o.next,o.next=l,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Lh==null&&(this.Lh=s)}}},u.$J=function(o,s){return 0>o?0:o>s?s:o},u.prototype.UP=function(){if(this.Lh!=null){for(var o=0,s=this.Lh,n=h.P.truncate(h.P.SG(s.x)),l=s.next;l!=null;l=l.next)if(o=this.fF?1^o:o+l.dir,l.x>s.x){var c=h.P.truncate(h.P.SG(l.x));o!=0&&(s=u.$J(n,this.ri),(n=u.$J(c,this.ri))>s&&s<this.ri&&(this.jn[this.Ql++]=s,this.jn[this.Ql++]=n,this.jn[this.Ql++]=l.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),s=l,n=c}}},u.prototype.aK=function(o){for(var s=0,n=o;n!=null;n=n.next)s++;if(this.bK=s,s==1)return o;this.Lf==null?this.Lf=h.P.mg(Math.max(s,16),null):this.Lf.length<s&&(this.Lf=h.P.mg(Math.max(s,2*this.Lf.length),null));var l=0;for(n=o;n!=null;n=n.next)this.Lf[l++]=n;for(s==2?this.Lf[0].x>this.Lf[1].x&&(o=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=o):u.vN(this.Lf,s,function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0}),o=this.Lf[0],this.Lf[0]=null,n=o,l=1;l<s;l++)n.next=this.Lf[l],n=this.Lf[l],this.Lf[l]=null;return n.next=null,o},u.vN=function(o,s,n){if(s==o.length)o.sort(n);else{var l=o.slice(0,0),c=o.slice(s);s=o.slice(0,s).sort(n),o.length=0,o.push.apply(o,l.concat(s).concat(c))}},u.Bx=0,u}();h.Ox=v}(U||(U={})),function(h){var k=function(){function v(){}return v.prototype.wi=function(u,o){var s=this.g.Qa(u,this.Rq);if(this.Fl==s&&(this.Fl=this.pe.lb(this.Fl)),this.jo==s&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,s),this.dk(u),o&&(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u){var n=this.g.V(u);if(n!=u){if((s=this.g.cd(n))==o)return void this.g.Kf(o,n);if((n=this.g.Na(u))!=u&&(s=this.g.cd(n))==o)return void this.g.Kf(o,n)}this.g.Kf(o,-1),this.g.Yg(o,-1)}},v.prototype.kD=function(){for(var u=!1,o=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var s=this.jo,n=0,l=!0;s!=this.Fl;){var c=this.pe.getData(s),p=new h.h;this.g.Hc(c,p),l&&(this.g.Hc(c,o),l=!1),p=this.g.Na(c);var f=this.g.V(c);this.g.Qa(p,this.Ag)!=-559038737&&(this.Yh.add(p),this.g.Sa(p,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),s=this.pe.lb(s)}if(2>this.Yh.size)break;var g=this;for(this.ye.Wd(0,this.ye.size,function(w,x){return g.kM(w,x)}),s=0,n=this.ye.size;s<n;s++)l=this.ye.get(s),l=this.Yh.get(l),this.g.Sa(l,this.Ag,s),p=new h.h,this.g.Hc(l,p);for(p=this.OM(o),s=0,n=this.ye.size;s<n;s++)(l=this.ye.get(s))!=-1&&(l=this.Yh.get(l),this.g.Sa(l,this.Ag,-1));if(!p)break;u=!0}return u},v.prototype.OM=function(u){for(var o=!1,s=!0;s;){s=!1;var n=0;this.ye.get(n)==-1&&(n=this.em(n));for(var l=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&l!=-1&&n!=l;c++){var f=this.ye.get(n);l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l);var g=this.g.V(f);this.g.Fv(g,u)||(g=this.g.Na(f));var w=this.g.V(l);this.g.Fv(w,u)||(w=this.g.Na(l));var x=this.ru(g,f),T=this.ru(w,l),E=x?this.g.Na(g):this.g.V(g),O=T?this.g.Na(w):this.g.V(w),C=!1;(this.up(g)||this.up(w)||this.up(f)||this.up(l)||this.up(E)||this.up(O))&&(C=!0),!C&&this.g.hq(f,l)&&(C=!0,this.oD(x,T,g,f,w,l)),!C&&this.g.hq(E,O)&&(C=!0,this.oD(!x,!T,g,E,w,O)),C&&(o=!0),s=s||C,n=this.em(n),l=this.em(n)}}if(!o)for(n=0,this.ye.get(n)==-1&&(n=this.em(n)),l=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&l!=-1&&n!=l;c++)f=this.ye.get(n),l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l),g=this.g.V(f),this.g.Fv(g,u)||(g=this.g.Na(f)),w=this.g.V(l),this.g.Fv(w,u)||(w=this.g.Na(l)),x=this.ru(g,f),T=this.ru(w,l),E=x?this.g.Na(g):this.g.V(g),O=T?this.g.Na(w):this.g.V(w),this.yM(x,T,f,g,E,l,w,O)&&(o=!0),n=this.em(n),l=this.em(n);return o},v.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new h.Hg().HU(this.hw,this.g,this.Y,this.od);var u=!1,o=!0;this.Ag=this.Rq=-1;var s=this.g.I(this.Y),n=new h.ja(0);n.Jb(s);for(var l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++)n.add(c),c=this.g.V(c);var g=this.g.ud.o,w=this.g.ud.Mf;this.g.wb.oc();var x=this.g.wb.Aa[0].o;for(n.Wd(0,s,function(E,O){var C=g[w*E],N=g[w*O],D=x[2*C];C=x[2*C+1];var z=x[2*N];return(D=C<(N=x[2*N+1])?-1:C>N?1:D<z?-1:D>z?1:0)==0&&(D=(E=g[w*E+3])<(O=g[w*O+3])?-1:E==O?0:1),D}),this.Rq=this.g.Hd(),this.pe=new h.lp,this.MA=this.pe.Rh(0),this.pe.hn(s),l=0;l<s;l++)c=n.get(l),p=this.pe.addElement(this.MA,c),this.g.Sa(c,this.Rq,p);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(u=!0);o;){o=!1,s=0,n=!1;do{n=!1,this.jo=-1,f=0,l=new h.h,p=new h.h;for(var T=this.pe.sc(this.MA);T!=-1;)c=this.pe.getData(T),this.jo!=-1?(this.g.Hc(c,p),l.rb(p)?f++:(l.N(p),this.Fl=T,0<f&&(c=this.kD())&&(n=!0,this.Fl!=-1&&(c=this.pe.getData(this.Fl),this.g.Hc(c,l))),this.jo=T=this.Fl,f=0)):(this.jo=T,this.g.Hc(this.pe.getData(T),l),f=0),T!=-1&&(T=this.pe.lb(T));if(this.Fl=-1,0<f&&(c=this.kD())&&(n=!0),10<s++)throw h.i.Ra();n&&this.BM(),this.YC()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),h.RL.W(this.g,this.Y,this.pe,this.hw)||u},v.prototype.ru=function(u,o){return this.g.V(o)!=u},v.prototype.yM=function(u,o,s,n,l,c,p,f){if(n==p)return this.dk(s),this.dk(c),!1;var g=this.g.Qa(s,this.Ag),w=this.g.Qa(l,this.Ag),x=this.g.Qa(c,this.Ag),T=this.g.Qa(f,this.Ag),E=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,E[0]=g,s[1]=0,E[1]=w,s[2]=1,E[2]=x,s[3]=1,E[3]=T,g=1;4>g;g++){for(w=E[g],x=s[g],T=g-1;0<=T&&E[T]>w;)E[T+1]=E[T],s[T+1]=s[T],T--;E[T+1]=w,s[T+1]=x}return E=0,s[0]!=0&&(E|=1),s[1]!=0&&(E|=2),s[2]!=0&&(E|=4),s[3]!=0&&(E|=8),(E==5||E==10)&&(u==o?u?(this.g.Cc(f,n),this.g.Dc(n,f),this.g.Cc(l,p),this.g.Dc(p,l)):(this.g.Dc(f,n),this.g.Cc(n,f),this.g.Dc(l,p),this.g.Cc(p,l)):u?(this.g.Dc(n,c),this.g.Cc(c,n),this.g.Dc(p,l),this.g.Cc(l,p)):(this.g.Cc(n,c),this.g.Dc(c,n),this.g.Cc(p,l),this.g.Dc(l,p)),!0)},v.prototype.oD=function(u,o,s,n,l,c){this.IY?this.QM():this.PM(u,o,s,n,l,c)},v.prototype.QM=function(){throw h.i.ga("not implemented.")},v.prototype.PM=function(u,o,s,n,l,c){if(u!=o)u?(this.g.Cc(s,l),this.g.Dc(l,s),this.g.Cc(c,n),this.g.Dc(n,c),this.xn(l,s),this.wi(l,!0),this.g.oi(l,!0),this.dk(s),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!1)):(this.g.Cc(l,s),this.g.Dc(s,l),this.g.Cc(n,c),this.g.Dc(c,n),this.xn(l,s),this.wi(l,!0),this.g.oi(l,!1),this.dk(s),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!0)),this.dk(n);else{var p=u?s:n,f=o?l:c;for(u=u?n:s,o=o?c:l,l=!1,this.g.Cc(p,f),this.g.Cc(f,p),this.g.Dc(u,o),this.g.Dc(o,u),c=o;c!=f;)s=this.g.Na(c),n=this.g.V(c),this.g.Dc(c,n),this.g.Cc(c,s),l=l||c==p,c=n;l||(s=this.g.Na(f),n=this.g.V(f),this.g.Dc(f,n),this.g.Cc(f,s)),this.xn(f,p),this.wi(f,!0),this.g.oi(f,!1),this.dk(p),this.xn(o,u),this.wi(o,!0),this.g.oi(o,!1),this.dk(u)}},v.prototype.YC=function(){for(var u=!1,o=this.g.Ob(this.Y);o!=-1;){for(var s=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l&&1<l;){var c=this.g.Na(s),p=this.g.V(s);this.g.hq(c,p)?(u=!0,this.wi(s,!1),this.g.qd(s,!0),this.wi(p,!1),this.g.qd(p,!0),s=c,n=0,l=this.g.Ka(o)):(s=p,n++)}if(2>this.g.Ka(o)){for(u=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++)this.wi(u,!1),u=this.g.V(u);o=this.g.ar(o),u=!0}else o=this.g.Sb(o)}return u},v.prototype.up=function(u){for(var o=!1;;){var s=this.g.V(u),n=this.g.Na(u);if(s==u)return this.wi(u,!0),this.g.oi(u,!1),!0;if(!this.g.hq(s,n)||(o=!0,this.dk(n),this.dk(s),this.wi(u,!0),this.g.oi(u,!1),this.xn(s,n),this.wi(s,!0),this.g.oi(s,!0),s==n))break;u=n}return o},v.prototype.BM=function(){for(var u=0,o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o)){var s=this.pe.getData(o);this.g.cj(s,-1)}for(var n=0,l=this.g.Ob(this.Y);l!=-1;)if((o=this.g.Ya(l))==-1||this.g.cd(o)!=-1)s=l,l=this.g.Sb(l),this.g.br(s);else{this.g.cj(o,l);var c=1;for(s=this.g.V(o);s!=o;s=this.g.V(s))this.g.cj(s,l),c++;this.g.fp(l,!1),this.g.Xj(l,c),this.g.Yg(l,this.g.Na(o)),n+=c,u++,l=this.g.Sb(l)}for(o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o))s=this.pe.getData(o),this.g.cd(s)==-1&&(l=this.g.iG(this.Y,s,s,null),n+=this.g.Ka(l),u++);for(this.g.Tl(this.Y,u),this.g.Vj(this.Y,n),u=0,n=this.g.md;n!=-1;n=this.g.ve(n))u+=this.g.I(n);this.g.XB(u)},v.prototype.em=function(u){for(var o=0,s=this.ye.size-1;o<s;o++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},v.prototype.xn=function(u,o){var s=this.g.Qa(o,this.Rq),n=this.g.Qa(o,this.Ag);this.g.gC(u,o),this.g.Sa(o,this.Rq,s),this.g.Sa(o,this.Ag,n)},v.prototype.dk=function(u){var o=this.g.Qa(u,this.Ag);o!=-1&&(this.ye.set(o,-1),this.g.Sa(u,this.Ag,-1))},v.W=function(u,o,s,n,l){var c=new v;return c.g=u,c.Y=o,c.sA=s,c.hw=n,c.od=l,c.SM()},v.prototype.kM=function(u,o){var s=this.Yh.get(u),n=new h.h;this.g.Hc(s,n),s=new h.h;var l=this.Yh.get(o);return this.g.Hc(l,s),n.rb(s)?0:(l=this.Bs.get(u),u=new h.h,this.g.Hc(l,u),l=this.Bs.get(o),o=new h.h,this.g.Hc(l,o),(l=new h.h).vc(n,u),(n=new h.h).vc(s,o),h.h.pu(l,n))},v}();h.tn=k}(U||(U={})),function(h){var k;(k=h.VL||(h.VL={}))[k.Local=0]="Local",k[k.Geographic=1]="Geographic",k[k.Projected=2]="Projected",k[k.Image=3]="Image",k[k.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(h.OL||(h.OL={}));var v=function(){function u(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return u.prototype.Fc=function(){return this.fg},u.prototype.QF=function(){return 1},u.prototype.QW=function(o){this.hA=o},u.prototype.Yd=function(){if(this.hA!==null)return this.hA;var o=.001;return this.fg!=0?o=h.yr.xQ(this.fg):this.yh!=null&&(o=h.SC.yQ(this.yh)),o},u.prototype.wz=function(){return this.yh},u.prototype.Id=function(){return this.fg!=0?h.Uc.ah(h.yr.Ny(this.fg)):this.yh!=null?h.SC.zQ(this.yh):void 0},u.Tb=function(o){if(o.fg!=0){if(h.yr.US(o.fg)===!0)return 1;if(h.yr.WS(o.fg)===!0)return 2}return 4},u.prototype.cs=function(){var o=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=h.yr.AK(o),this.Jo!=-1?this.Jo:o)},u.create=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var s=new u;return s.fg=o,s},u.lP=function(o){if(o==null||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var s=new u;return s.yh=o,s},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.fg==o.fg&&(this.fg!=0||this.yh===o.yh)},u.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.rp!=="")return this.rp;var o=this.toString();if(Array.prototype.reduce)return this.rp="S"+o.split("").reduce(function(l,c){return(l=(l<<5)-l+c.charCodeAt(0))&l},0);var s=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)s=(s<<5)-s+o.charCodeAt(n),s&=s;return this.rp="S"+s},u.prototype.Mn=function(){return this.Yd(0)},u.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.tP(this)},u.UN=2147483645,u.VN=9007199254740990,u}();h.Gg=v}(U||(U={})),function(h){var k=function(v){function u(){var o=v!==null&&v.apply(this,arguments)||this;return o.Li=null,o.NT=null,o.Jq=new h.UL,o.Go=null,o.lw=null,o}return yt(u,v),u.tP=function(o){var s=new u;if(s.fg=o.fg,s.Jo=o.Jo,s.UH=o.UH,s.yh=o.yh,s.yh!==""&&s.yh!==null){o=u.fM(s.yh);var n=u.dM(s.yh);s.Jq.Wx(o,n,h.ju.Integer64),s.ay(o),s.cy(n),s.fg=o.cs()}else o=u.eM(s.fg),s.ay(o),s.cy(null),s.Jq.Wx(o,null,h.ju.Integer64);return s},u.prototype.Yd=function(o){return this.Jq.Mn(o)},u.dM=function(o){if(0>=o.length)throw h.i.O();var s=null;try{s=h.IC.fromString(o)}catch{s=null}return s==null?null:u.XC(s,!0)},u.prototype.ay=function(o){this.Ld=o,this.Go=this.Ld.Id()},u.prototype.cy=function(o){this.FH=o,this.NT=this.FH!=null?this.FH.Go:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},u.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Yr=function(){return this.Ld.Yr()},u.prototype.mk=function(){return this.Ld.mk()},u.prototype.fS=function(o){return h.JC.Ky(this.Ld,o.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},u.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.ih(o),o},u.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.uo},u.prototype.CR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.BR(o),o},u.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},u.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},u.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},u.prototype.KQ=function(){return this.Ld.kv()},u.prototype.Sp=function(){return this.Go.getUnitFactor()},u.prototype.pz=function(o){return this.Jq.pz(o)},u.prototype.tc=function(){var o=this.Tb();if(o==1)return this;if(o==3)return this.Li.hk().tc();if(o==0||o===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((o=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=u.XE(o,this.Jq.QF())},u.XE=function(o,s){if(o==null)throw h.i.O("null pointer.");var n=new u;return o=u.ou(o,!0),n.Jq.Wx(o,null,s),n.ay(o),n.cy(null),n.fg=o.cs(),n},u.prototype.Tb=function(){var o=this.gh();if(o!=null)switch(o.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.kv=function(){return this.Ld.kv()},u.ou=function(o,s){var n=o.getCode();if(0>=n&&0<(n=h.qf.getCode(o))){if((o=h.qf.coordsys(n))==null)throw h.i.O("Text to wkid mapping had failed: "+n);return u.ou(o,s)}if(s&&0<n&&(s=u.qx[n]))return s;s=h.Ab.zv(o,n,!1);var l=u.gK[s];return l||(o=0>=n?o:h.qf.coordsys(n),o=new h.JC(o),u.gK[s]=o,0<n&&(u.qx[n]=o),o)},u.eM=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var s=u.qx[o];if(s!=null)return s;if((s=h.qf.coordsys(o))==null)throw h.i.O("Invalid or unsupported wkid: "+o);return(s=u.ou(s,!1)).cs()!=o&&(u.qx[o]=s),s},u.fM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var s=null;try{s=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.O("Cannot create SpatialReference from text. "+n.message)}if(s===null)throw h.i.O("Cannot create SpatialReference from text. ");return u.ou(s,!0)},u.XC=function(o,s){var n,l=o.getCode();if(0>=l&&0<(l=h.qf.getCode(o))){if((l=h.qf.vertcs(l))===null)throw h.i.O();return u.XC(l,s)}if(s&&0<l&&(s=u.fK[l])||(o=h.Ab.zv(o,l,!1),s=u.hK[o]))return s;if(0>=l||(n=h.qf.vertcs(l)),n===null)throw h.i.O();return n=new h.KL(n),u.hK[o]=n,0<l&&(u.fK[l]=n),n},u.nI=function(o,s){if(s===null||s.B())return null;var n=new h.l;if(s!==null&&o.Tb()!=1){var l=o.tc(),c=l.gh();o=h.xr.Pr(o,l,null,null),(s=h.Gx.local().W(s,o,null)).A(n)}else c=o.gh(),s.A(n);return s=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.GC(n.v,n.G,n.C,n.H,s,c)},u.gD=function(o){var s={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var l=o[n],c={HY:!1,VY:"",UY:-1,geogtran:null};l.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=l.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=l.getGeogtran().toString(),s.steps.push(c)}return s},u.SR=function(o,s,n,l){return n===void 0&&(n=null),n=u.nI(l,n),o=h.np.getGTlist(o.gh(),s.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,n,1),s=null,o&&0<o.length&&(s=this.gD(o[0]),h.Lx.destroy(o)),n!==null&&n.destroy(),s},u.TR=function(o,s,n,l){var c;if(n===void 0&&(n=null),l===void 0&&(l=null),c===void 0&&(c=30),n=u.nI(l,n),o=h.np.getGTlist(o.gh(),s.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,n,c),s=[],o&&0<o.length){for(c=0;c<o.length;c++)s.push(this.gD(o[c]));h.Lx.destroy(o)}return n!==null&&n.destroy(),s},u.qx={},u.gK={},u.fK={},u.hK={},u}(h.Gg);h.iu=k}(U||(U={})),function(h){var k,v;(v=k=h.ju||(h.ju={}))[v.Integer32=0]="Integer32",v[v.Integer64=1]="Integer64",v[v.FloatingPoint=2]="FloatingPoint";var u=function(){function o(){this.sp()}return o.prototype.assign=function(s){this.Hm=s.Hm,this.Im=s.Im,this.Rj=s.Rj,this.nA=s.nA,this.Ho=s.Ho,this.mA=s.mA,this.Kk=s.Kk,this.Oq=s.Oq,this.Nq=s.Nq,this.Tm=s.Tm},o.prototype.QF=function(){return this.Tm},o.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=k.FloatingPoint},o.prototype.Wx=function(s,n,l){if(this.sp(),this.Tm=l,l!=k.FloatingPoint){var c=new h.l;s.cR(c),this.Hm=c.v,this.Im=c.G}else this.Im=this.Hm=-17976931348623157e292;(c=s.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(c=(l==k.Integer64?1e-9:1/18e5)*s.bf(),this.Rj=1/c):c==h.Tc.PE_TYPE_PROJCS&&(c=(l==k.Integer64?1e-4:.001)*s.rm(),this.Rj=1/c),n!=null?(c=(l==k.Integer32?.001:1e-4)*n.DH,this.Ho=1/c):this.Ho=1e4,this.TM(),this.Kk=s.uw,this.Oq=n!=null?.001*n.DH:.001,this.Nq=2220446049250313e-29},o.prototype.TM=function(){if(this.Tm!=k.FloatingPoint){var s=this.Tm==k.Integer64?h.Gg.VN:h.Gg.UN,n=s/this.Rj,l=this.Hm+n,c=h.P.truncate((l-this.Hm)*this.Rj);c>s&&(this.Rj=s/(l-this.Hm)),n=this.Im+n,(c=h.P.truncate((n-this.Im)*this.Rj))>s&&(this.Rj=s/(n-this.Im))}},o.prototype.WB=function(s){switch(s){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},o.prototype.Mn=function(s){switch(s){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},o.prototype.pz=function(s){if(this.Tm==k.FloatingPoint)return 0;switch(s){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},o.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Kk.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},o}();h.UL=u}(U||(U={})),function(h){function k(l,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function v(l,c,p){return l=l/6378137*57.29577951308232,p?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(l,c,p){var f=l.Qf();if(l.K()===33)c=c(f.Ng(),f.kh()),f.Db(c[0],c[1]);else if(l.K()===197){var g=c(l.gs(),l.js(),p);c=c(l.fs(),l.hs(),p),f.L(g[0],g[1],c[0],c[1])}else for(g=new h.h,l=0;l<f.I();l++){f.D(l,g);var w=c(g.x,g.y,p);g.na(w[0],w[1]),f.Db(l,g)}return f}function o(l){return u(l,v,!0)}function s(l){return u(l,k,!0)}var n=Math.PI/180;h.PK=function(){function l(){}return l.xu=function(c){var p=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*p)*Math.log((1-p*f)/(1+p*f))))},l.Ux=function(c,p,f,g){var w=.0033528106647474805,x=Math.sin(f);f=Math.cos(f);var T=(1-w)*Math.tan(c),E=T*(c=1/Math.sqrt(1+T*T)),O=Math.atan2(T,f),C=(T=c*x)*T,N=1-C,D=27233160610754688e-5*N/4040829998466145e-2,z=1+D/16384*(4096+D*(D*(320-175*D)-768)),R=D/1024*(256+D*(D*(74-47*D)-128));D=g/(635675231424518e-8*z);for(var G,W,H,ee=2*Math.PI;1e-12<Math.abs(D-ee);)H=Math.cos(2*O+D),ee=D,D=g/(635675231424518e-8*z)+R*(G=Math.sin(D))*(H+R/4*((W=Math.cos(D))*(2*H*H-1)-R/6*H*(4*G*G-3)*(4*H*H-3)));return g=E*G-c*W*f,N=w/16*N*(4+w*(4-3*N)),h.h.construct((p+(Math.atan2(G*x,c*W-E*G*f)-(1-N)*w*T*(D+N*G*(H+N*W*(2*H*H-1)))))/n,Math.atan2(E*W+c*G*f,(1-w)*Math.sqrt(C+g*g))/n)},l.HM=function(c,p,f,g){var w=.0033528106647474805,x=g-p,T=Math.atan((1-w)*Math.tan(c)),E=Math.atan((1-w)*Math.tan(f)),O=Math.sin(T);T=Math.cos(T);var C=Math.sin(E);E=Math.cos(E);var N=x,D=1e3;do{var z=Math.sin(N),R=Math.cos(N),G=Math.sqrt(E*z*E*z+(T*C-O*E*R)*(T*C-O*E*R));if(G===0)return 0;R=O*C+T*E*R;var W=Math.atan2(G,R),H=T*E*z/G,ee=1-H*H;z=R-2*O*C/ee,isNaN(z)&&(z=0);var X=w/16*ee*(4+w*(4-3*ee)),ne=N;N=x+(1-X)*w*H*(W+X*G*(z+X*R*(2*z*z-1)))}while(1e-12<Math.abs(N-ne)&&0<--D);return D===0?(O=g-p,{azimuth:Math.atan2(Math.sin(O)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(g-p))}):(p=(c=27233160610754688e-5*ee/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(E*Math.sin(N),T*C-O*E*Math.cos(N)),TQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(W-p*G*(z+p/4*(R*(2*z*z-1)-p/6*z*(4*G*G-3)*(4*z*z-3)))),TY:Math.atan2(T*Math.sin(N),T*C*Math.cos(N)-O*E)})},l.eQ=function(c){var p=c.hasAttribute(1),f=c.hasAttribute(2),g=[],w=c.ea(),x=null,T=null;p&&(x=c.vb(1)),f&&(T=c.vb(2));for(var E=new h.h,O=0;O<w;O++){for(var C=c.Ca(O),N=c.Ka(O),D=0,z=0,R=NaN,G=NaN,W=NaN,H=NaN,ee=c.ec(O),X=[],ne=C;ne<C+N;ne++){c.D(ne,E),H=W=NaN;var ce=[E.x,E.y];p&&(W=x.get(ne),ce.push(W)),f&&(w=T.get(ne),ce.push(H)),ne==C&&ee&&(D=E.x,z=E.y,R=W,G=H),X.push(ce)}!ee||D==E.x&&z==E.y&&(!p||isNaN(R)&&isNaN(W)||R==W)&&(!f||isNaN(G)&&isNaN(H)||G==H)||X.push(X[0].slice(0)),g.push(X)}return g},l.Ry=function(c,p){c=l.eQ(c),637.100877141506>p&&(p=637.100877141506);for(var f,g=[],w=0;w<c.length;w++){var x,T,E=c[w];g.push(f=[]),f.push([E[0][0],E[0][1]]);var O=E[0][0]*n,C=E[0][1]*n;for(x=0;x<E.length-1;x++){var N=E[x+1][0]*n,D=E[x+1][1]*n;if(O!==N||C!==D){N=(D=l.HM(C,O,D,N)).azimuth;var z=(D=D.TQ)/p;if(1<z){for(T=1;T<=z-1;T++){var R=l.Ux(C,O,N,T*p);f.push([R.x,R.y])}T=l.Ux(C,O,N,(D+Math.floor(z-1)*p)/2),f.push([T.x,T.y])}C=l.Ux(C,O,N,D),f.push([C.x,C.y]),O=C.x*n,C=C.y*n}}}return{lJ:g}},l.SQ=function(c){for(var p=[],f=0;f<c.length;f++){var g=c[f];g=l.Ry(g,1e4),p.push(g)}c=[];for(var w=0;w<p.length;w++){g=p[w];var x=0;for(f=0;f<g.lJ.length;f++){var T,E=g.lJ[f],O=l.xu(h.h.construct(E[0][0],E[0][1])),C=l.xu(h.h.construct(E[E.length-1][0],E[E.length-1][1])),N=C.x*O.y-O.x*C.y;for(T=0;T<E.length-1;T++)O=l.xu(h.h.construct(E[T+1][0],E[T+1][1])),N+=(C=l.xu(h.h.construct(E[T][0],E[T][1]))).x*O.y-O.x*C.y;x+=N}x/=1,c.push(x/-2)}return c},l}(),h.cb=function(){function l(){}return l.sB=function(c,p,f,g,w,x,T){l.bD[c.dc()]=p,isNaN(f)==0&&(l.hD[c.dc()]=f),isNaN(g)==0&&(l.uD[c.dc()]=g),isNaN(w)==0&&(l.WC[c.dc()]=w),l.iD[c.dc()]=x,T!==null&&(l.jD[c.dc()]=T)},l.Yw=function(c,p,f){l.nD[c.dc()+"-"+p.dc()]=f},l.tc=function(c){if((c=l.bD[c.dc()])==null)throw h.i.Fe();return c},l.bf=function(c){if((c=l.hD[c.dc()])==null)throw h.i.Fe();return c},l.xv=function(c){if((c=l.uD[c.dc()])==null)throw h.i.Fe();return c},l.gv=function(c){if((c=l.WC[c.dc()])==null)throw h.i.Fe();return c},l.ih=function(c){if((c=l.jD[c.dc()])==null)throw h.i.Fe();return h.l.construct(c[0],c[1],c[2],c[3])},l.Xc=function(c){if((c=l.iD[c.dc()])==null)throw h.i.Fe();return c},l.Bh=function(c,p,f){if(p.Nb(f))return c;var g=l.nD[p.dc()+"-"+f.dc()];if(g!==void 0)return g(c,p,f);throw h.i.Fe()},l.wt=function(){throw h.i.Fe()},l.XQ=function(){throw h.i.Fe()},l.ZV=function(){throw h.i.Fe()},l.ol=function(){throw h.i.Fe()},l.nW=function(){var c=h.Gg.create(102100),p=h.Gg.create(3857),f=h.Gg.create(4326);h.cb.sB(c,f,NaN,NaN,NaN,!1,null),h.cb.sB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.sB(p,f,NaN,NaN,NaN,!1,null),h.cb.Yw(c,f,o),h.cb.Yw(f,c,s),h.cb.Yw(p,f,o),h.cb.Yw(f,p,s)},l.bD=[],l.hD=[],l.uD=[],l.WC=[],l.iD=[],l.jD=[],l.nD=[],l}()}(U||(U={})),U.cb.nW(),function(h){var k=function(){function v(u){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return v.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.ko,this.ko=u):this.Dl--,this.size--},v.prototype.U=function(u,o){return this.o[u*this.Mf+o]},v.prototype.T=function(u,o,s){this.o[u*this.Mf+o]=s},v.prototype.De=function(){var u=this.ko;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw h.i.de();this.yz(u)}u=this.Dl,this.Dl++}else this.ko=this.o[u*this.Mf];this.size++;for(var o=u*this.Mf;o<u*this.Mf+this.Mf;o++)this.o[o]=-1;return u},v.prototype.Nl=function(u){var o=this.ko;if(o==-1){if(this.Dl==this.Jg){if(2147483647<(o=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(o=2147483647),o==this.Jg)throw h.i.de();this.yz(o)}o=this.Dl,this.Dl++}else this.ko=this.o[o*this.Mf];this.size++;for(var s=o*this.Mf,n=0;n<u.length;n++)this.o[s+n]=u[n];return o},v.prototype.oj=function(u){this.ko=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},v.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},v.prototype.sx=function(u,o){u*=this.Mf,o*=this.Mf;for(var s=0;s<this.Mf;s++){var n=this.o[o+s];this.o[o+s]=this.o[u+s],this.o[u+s]=n}},v.prototype.bC=function(u,o,s){var n=this.o[this.Mf*o+s];this.o[this.Mf*o+s]=this.o[this.Mf*u+s],this.o[this.Mf*u+s]=n},v.GG=function(u){return 0<=u},v.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.Mf*u);o.set(this.o,0),this.o=o,this.Jg=u},v}();h.ad=k}(U||(U={})),function(h){var k,v;(v=k||(k={}))[v.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",v[v.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",v[v.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",v[v.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function s(n){this.Ce=n,this.Ah=NaN,this.$G=new h.jg,this.aH=new h.jg,this.os=new h.Oc,this.ps=new h.Oc}return s.prototype.compare=function(n,l,c){if(n=n.ka(c),this.Ce.kB(l,this.$G),this.Ce.kB(n,this.aH),l=this.$G.get(),n=this.aH.get(),this.os.L(l.ta,l.qa),this.ps.L(n.ta,n.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;c=l.oa==l.ma;var p=n.oa==n.ma;if(c||p){if(c&&p)return 0;if(l.oa==n.oa&&l.ta==n.ta)return c?1:-1;if(l.ma==n.ma&&l.qa==n.qa)return c?-1:1}return(c=l.Me(this.Ah,this.os.pa))==(p=n.Me(this.Ah,this.ps.pa))&&((p=.5*((c=Math.min(l.ma,n.ma))+this.Ah))==this.Ah&&(p=c),c=l.Me(p,this.os.pa),p=n.Me(p,this.ps.pa)),c<p?-1:c>p?1:0},s.prototype.WJ=function(n){this.Ah=n},s}(),o=function(){function s(n){this.ib=n,this.RH=new h.jg,this.Cf=new h.h,this.rA=new h.Oc}return s.prototype.fX=function(n){this.Cf.N(n)},s.prototype.compare=function(n,l){return this.ib.kB(n.ka(l),this.RH),n=this.RH.get(),this.rA.L(n.ta,n.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(n=n.Me(this.Cf.y,this.Cf.x),this.Cf.x<n?-1:this.Cf.x>n?1:0)},s}();k=function(){function s(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new h.Nd,this.XN=2147483647,this.WN=h.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return s.prototype.ty=function(n){this.gA=n},s.prototype.$m=function(){this.he==null&&(this.he=new h.ad(8));var n=this.he.De();return this.he.T(n,1,0),n},s.prototype.qU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var n=this.Lc.De();this.Lc.T(n,2,0),this.Lc.T(n,3,0);var l=this.Lc.De();return this.Lc.T(l,2,0),this.Lc.T(l,3,0),this.EJ(n,l),this.EJ(l,n),n},s.prototype.hI=function(){this.ze==null&&(this.ze=new h.ad(8));var n=this.ze.De();return this.ze.T(n,2,0),n},s.prototype.OW=function(n,l){this.he.T(n,7,l)},s.prototype.on=function(n,l){this.he.T(n,2,l)},s.prototype.NW=function(n,l){this.he.T(n,1,l)},s.prototype.gX=function(n,l){this.he.T(n,3,l)},s.prototype.dX=function(n,l){this.he.T(n,4,l)},s.prototype.er=function(n,l){this.he.T(n,5,l)},s.prototype.$Q=function(n){return this.he.U(n,5)},s.prototype.MW=function(n,l){this.he.T(n,6,l)},s.prototype.YM=function(n,l){this.MW(l,n)},s.prototype.DJ=function(n,l){this.Lc.T(n,1,l)},s.prototype.EJ=function(n,l){this.Lc.T(n,4,l)},s.prototype.Vl=function(n,l){this.Lc.T(n,5,l)},s.prototype.Ul=function(n,l){this.Lc.T(n,6,l)},s.prototype.VW=function(n,l){this.Lc.T(n,2,l)},s.prototype.cx=function(n,l){this.Lc.T(n,3,l)},s.prototype.GF=function(n){return this.Lc.U(n,3)},s.prototype.Ht=function(n,l){this.Lc.T(n,7,l)},s.prototype.zK=function(n,l){if(this.om(n)!=-1)for(l=l?-1:n,n=this.om(n);n!=-1;n=this.ls(n))this.g.Sa(this.vj(n),this.Eq,l)},s.prototype.xx=function(n,l){n!=-1&&(this.zK(n,l),this.zK(this.ya(n),l))},s.prototype.Et=function(n,l){this.ze.T(n,1,l)},s.prototype.Xg=function(n,l){this.ze.T(n,2,l)},s.prototype.ln=function(n,l){this.ze.T(n,3,l),this.IW(n,this.ZQ(l)),this.HW(l,n)},s.prototype.HW=function(n,l){this.ze.T(n,4,l)},s.prototype.IW=function(n,l){this.ze.T(n,5,l)},s.prototype.yJ=function(n,l){this.ze.T(n,6,l)},s.prototype.wJ=function(n,l){this.ze.T(n,7,l)},s.prototype.vJ=function(n,l){this.$n.write(n,l)},s.prototype.xJ=function(n,l){this.fA.write(n,l)},s.prototype.gY=function(n){var l=0,c=0,p=this.vF(n),f=new h.h,g=new h.h,w=new h.h;this.$r(p,f),g.N(f);var x=p;do this.nm(x,w),c+=h.h.ub(g,w),this.$e(this.ya(x))!=n&&(l+=(w.x-f.x-(g.x-f.x))*(w.y-f.y+(g.y-f.y))*.5),g.N(w),x=this.kc(x);while(x!=p);this.$n.write(n,l),this.fA.write(n,c)},s.prototype.KU=function(n,l){var c=new u(this),p=new h.$j;p.Ee(h.P.truncate(this.xa/2)),p.Xo(c);for(var f=new h.ja(0),g=this.bh(),w=null,x=0,T=new h.h,E=this.Oe;E!=-1;E=this.Tf(E)){if(!(255&++x)&&l!=null&&!l.progress(-1,-1))throw h.i.RC();var O=this.Je(E);if(O!=-1){if(f.Dh(0),!this.cY(p,g,f,O)){this.D(E,T),c.WJ(T.y);var C=O;do{var N=this.Bb(C,g);N!=-1&&(p.wd(N,-1),this.Kb(C,g,-2)),C=this.kc(this.ya(C))}while(O!=C);C=O;do(N=this.Bb(C,g))==-1&&(N=p.addElement(C,-1),f.add(N)),C=this.kc(this.ya(C));while(O!=C)}for(O=f.size-1;0<=O;O--)N=f.get(O),C=p.ka(N),this.Kb(this.ya(C),g,N),this.JU(p,N,n)}else this.Yy(E)==-1&&(w==null&&(w=new o(this)),this.D(E,T),w.fX(T),C=p.DW(w),O=this.Jl,C!=-1&&(N=p.ka(C),this.$e(N)==this.$e(this.ya(N))&&(N=this.JF(p,C)),N!=-1&&(O=this.$e(N))),this.YM(O,E))}this.Lg(g)},s.prototype.JU=function(n,l,c){var p=n.ka(l),f=this.$e(p);if(this.In(f)==-1){var g=this.JF(n,l),w=this.ya(p),x=this.$e(w);this.Mp(f),this.Mp(x);var T=this.In(f),E=this.In(x);if(g==-1&&T==-1&&(x==f?(this.ln(x,this.Jl),T=E=this.Jl):(E==-1&&(this.ln(x,this.Jl),E=this.Jl),this.ln(f,x),T=x)),g!=-1){var O=this.$e(g);E==-1&&(0>=this.Mp(O)?(E=this.In(O),this.ln(x,E)):(this.ln(x,O),E=O),x==f&&(T=E))}T==-1&&this.dY(f,x),c==0?this.eW(n,l,p,g,f,x):c==5?this.fW(n,l,p,w,f,x):c==4&&this.dW(p,g,f,x)}},s.prototype.eW=function(n,l,c,p,f,g){var w=this.jk(f);if(p!=-1){var x=this.jk(g),T=this.jk(this.$e(p));p=w&x&T,T^=T&this.fh(c),(T|=p)!=0&&(this.Xg(g,x|T),this.Xg(f,T|w),w=w||T)}for(l=n.lb(l);l!=-1&&(p=n.ka(l),c=this.$e(this.ya(p)),f=this.jk(c),g=this.fh(p),x=this.$e(p),p=f&(T=this.jk(x))&w,w^=w&g,(w|=p)!=0);l=n.lb(l))this.Xg(c,f|w),this.Xg(x,T|w)},s.prototype.fW=function(n,l,c,p,f,g){if(f!=g){c=this.Bb(c,this.eg),c+=this.Bb(p,this.eg),p=0;var w=new h.ja(0),x=new h.ja(0);x.add(0);for(var T=n.sc(-1);T!=l;T=n.lb(T)){var E=n.ka(T),O=this.ya(E),C=this.$e(E),N=this.$e(O);if(C!=N){if(E=this.Bb(E,this.eg),p+=E+=this.Bb(O,this.eg),O=!1,w.size!=0&&w.Gc()==N&&(x.Jf(),w.Jf(),O=!0),this.In(N)==-1)throw h.i.Ra();O&&this.In(N)==C||(x.add(p),w.add(C))}}p+=c,w.size!=0&&w.Gc()==g&&(x.Jf(),w.Jf()),p!=0?x.Gc()==0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n)):x.Gc()!=0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n))}},s.prototype.dW=function(n,l,c,p){var f=this.Ma(this.g.md);if(l==-1)this.Xg(p,this.Io),1&(n=this.Bb(n,this.yg))?this.Xg(c,f):this.Xg(c,this.Io);else{var g=this.jk(p);g==0?(g=this.jk(this.$e(l)),this.Xg(p,g),1&(n=this.Bb(n,this.yg))?this.Xg(c,g==f?this.Io:f):this.Xg(c,g)):1&(n=this.Bb(n,this.yg))?this.Xg(c,g==f?this.Io:f):this.Xg(c,g)}},s.prototype.cY=function(n,l,c,p){var f=p,g=-1,w=-1,x=0;do{if(x==2)return!1;var T=this.Bb(f,l);if(T!=-1){if(g!=-1)return!1;g=T}else{if(w!=-1)return!1;w=f}x++,f=this.kc(this.ya(f))}while(p!=f);return w!=-1&&g!=-1&&(this.Kb(n.ka(g),l,-2),n.Uj(g,w),c.add(g),!0)},s.prototype.dY=function(n,l){var c=this.Mp(n);if(c!=0){var p=this.Mp(l);0<c&&0>p||0>c&&0<p?this.ln(n,l):(l=this.In(l))!=-1&&this.ln(n,l)}},s.prototype.qP=function(n,l){this.Eq=this.g.Hd();for(var c=0,p=l.size;c<p;c++){var f=l.get(c),g=this.g.Qa(f,this.Em),w=this.g.Sf(this.g.cd(f)),x=this.g.jc(w);if(h.ba.Ic(x)){var T=this.g.V(f);if(T!=-1){var E=this.g.Qa(T,this.Em);if(g!=E){var O=this.qU(),C=this.ya(O),N=this.lh.De();this.lh.T(N,0,f),this.lh.T(N,1,-1),this.Ht(O,N),this.DJ(O,g),(N=this.Je(g))==-1?(this.on(g,O),this.Vl(O,C),this.Ul(C,O)):(g=this.ue(N),this.Vl(N,C),this.Ul(C,N),this.Ul(g,O),this.Vl(O,g)),this.DJ(C,E),(g=this.Je(E))==-1?(this.on(E,C),this.Ul(O,C),this.Vl(C,O)):(E=this.ue(g),this.Vl(g,O),this.Ul(O,g),this.Ul(E,C),this.Vl(C,E)),w=this.Ma(w),n==0?(this.Kb(C,this.be,0),this.Kb(O,this.be,x==1736?w:0)):n==5?(E=new h.h,this.g.D(f,E),f=new h.h,this.g.D(T,f),g=T=0,0>E.compare(f)?T=1:g=-1,this.Kb(C,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.eg,T),this.Kb(C,this.eg,g)):n==7?(this.Kb(C,this.be,this.Io),this.Kb(O,this.be,x==1736?w:0)):n==4&&(this.Kb(C,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.yg,1),this.Kb(C,this.yg,1)),x=x==1736?this.WN:0,this.cx(O,w|x),this.cx(C,w|x)}}}}},s.prototype.QT=function(n,l){var c=this.om(l);if(c!=-1){var p=this.om(n);this.lh.T(c,1,p),this.Ht(n,c),this.Ht(l,-1)}n=this.ya(n),l=this.ya(l),(c=this.om(l))!=-1&&(p=this.om(n),this.lh.T(c,1,p),this.Ht(n,c),this.Ht(l,-1))},s.prototype.EX=function(n){function l(W,H){return p.CO(W,H)}var c=new h.ja(0);c.Jb(10);for(var p=this,f=this.Oe;f!=-1;f=this.Tf(f)){c.clear(!1);var g=this.Je(f);if(g!=-1){var w=g;do c.add(w),w=this.kc(this.ya(w));while(w!=g);if(1<c.size){if(w=!0,2<c.size)c.Wd(0,c.size,l),c.add(c.get(0));else if(0<this.BO(c.get(0),c.get(1))){var x=c.get(0);c.set(0,c.get(1)),c.set(1,x)}else w=!1;for(var T=x=c.get(0),E=this.vf(T),O=this.ya(T),C=-1,N=1,D=c.size;N<D;N++){var z=c.get(N),R=this.ya(z),G=this.lk(R);if(G==E&&z!=T){if(n==0)C=this.GF(T)|this.GF(z),this.cx(T,C),this.cx(O,C),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(z,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(R,this.be));else if(this.eg!=-1)C=this.Bb(T,this.eg)+this.Bb(z,this.eg),R=this.Bb(O,this.eg)+this.Bb(R,this.eg),this.Kb(T,this.eg,C),this.Kb(O,this.eg,R);else{if(n==7)return void(this.Pi=new h.Nd(5,f,-1));this.yg!=-1&&(C=this.Bb(T,this.yg)+this.Bb(z,this.yg),R=this.Bb(O,this.yg)+this.Bb(R,this.yg),this.Kb(T,this.yg,C),this.Kb(O,this.yg,R))}this.QT(T,z),this.Gy(z),C=T,c.set(N,-1),z==x&&(c.set(0,-1),x=-1)}else this.xx(C,!1),C=-1,T=z,E=G,O=R}if(this.xx(C,!1),C=-1,w){for(x=-1,N=0,D=c.size;N<D;N++)if((z=c.get(N))!=-1){if(x==-1)T=x=z,E=this.vf(T),O=this.ya(T);else if(z!=T&&(R=this.ya(z),G=this.lk(R),this.Ul(O,z),this.Vl(z,O),T=z,E=G,O=R,n==7&&(this.Bb(z,this.be)|this.Bb(this.ue(z),this.be))==(1|this.Io)))return void(this.Pi=new h.Nd(5,f,-1))}this.on(f,x)}else{for(x=-1,N=0,D=c.size;N<D;N++)if((z=c.get(N))!=-1){x=z;break}g!=x&&this.on(f,x)}}}}},s.prototype.RN=function(){for(var n=-1,l=this.bh(),c=this.Oe;c!=-1;c=this.Tf(c)){var p=this.Je(c);if(p!=-1){var f=p;do{if(this.Bb(f,l)!=1){var g=this.hI();this.Et(g,f),this.wJ(g,n),n!=-1&&this.yJ(n,g),n=g;var w=0,x=f;do w|=this.Bb(x,this.be),this.VW(x,g),this.Kb(x,l,1),x=this.kc(x);while(x!=f);this.Xg(g,w)}f=this.kc(this.ya(f))}while(f!=p)}}g=this.hI(),this.Et(g,-1),this.wJ(g,n),n!=-1&&this.yJ(n,g),this.Jl=g,this.$n=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(l)},s.prototype.mR=function(n,l,c){if((l=l!=-1?l:this.Je(n))==-1)return-1;for(n=l;;){if(this.Bb(l,c)!=1)return l;if((l=this.kc(this.ya(l)))==n)return-1}},s.prototype.tW=function(){for(var n=this.bh(),l=this.Oe;l!=-1;l=this.Tf(l))for(var c=-1;;){var p=this.mR(l,c,n);if(p==-1)break;c=this.kc(this.ya(p));for(var f=p;;){var g=this.kc(f),w=this.ue(f),x=this.ya(f);if(w==x){if(this.DP(f),c!=f&&c!=x||(c=-1),f==p||w==p){if(f==(p=g)||w==p)break;f=g;continue}}else this.Kb(f,n,1);if((f=g)==p)break}}this.Lg(n)},s.prototype.HB=function(n,l,c,p,f){this.Wg(),this.bH=f,this.g=n,this.Dq=this.g.WE(),(n=new h.ja(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.gd);var g=0,w=1,x=c!=null?c.get(0):this.g.md;for(f=1;x!=-1;){this.g.CJ(x,this.Dq,w),w<<=1;for(var T=this.g.Ob(x);T!=-1;T=this.g.Sb(T))for(var E=this.g.Ya(T),O=0,C=this.g.Ka(T);O<C;O++)n.add(E),E=this.g.V(E);h.ba.Tn(this.g.jc(x))||(g+=this.g.ea(x)),c!=null?(x=f<c.size?c.get(f):-1,f++):x=this.g.ve(x)}for(this.Io=w,this.xa=n.size,this.g.nx(n,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.he=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.op.Bp(p),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,g)),this.Em=this.g.Hd(),c=new h.h,f=0,g=new h.h,c.Sc(),w=0;w<=this.xa;w++)if(w<this.xa?(E=n.get(w),this.g.D(E,g)):g.Sc(),!c.rb(g)){if(f<w){for(E=this.$m(),C=O=-1;f<w;f++)C=n.get(f),this.g.Sa(C,this.Em,E),x=this.lh.De(),this.lh.T(x,0,C),this.lh.T(x,1,O),O=x,T=this.g.cd(C),x=this.g.Sf(T),x=this.Ma(x),this.NW(E,this.yd(E)|x);this.OW(E,O),this.er(E,this.g.Va(C)),this.Qs!=-1&&this.dX(this.Qs,E),this.gX(E,this.Qs),this.Qs=E,this.Oe==-1&&(this.Oe=E)}f=w,c.N(g)}h.op.Bp(p),this.be=this.bh(),l==5&&(this.eg=this.bh()),l==4&&(this.yg=this.bh()),this.qP(l,n),this.Pi.Lj==0&&(this.EX(l),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(l,p))):this.kA=!0))},s.prototype.Gy=function(n){var l=this.kc(n),c=this.ue(n),p=this.ya(n),f=this.kc(p),g=this.ue(p);l!=p&&(this.Ul(g,l),this.Vl(l,g)),c!=p&&(this.Ul(c,f),this.Vl(f,c)),c=this.lk(n),this.Je(c)==n&&(f!=n?this.on(c,f):this.on(c,-1)),f=this.lk(p),this.Je(f)==p&&(l!=p?this.on(f,l):this.on(f,-1)),this.Lc.kd(n),this.Lc.kd(p)},s.prototype.JF=function(n,l){for(;;){if((l=n.xe(l))==-1)return-1;var c=n.ka(l);if(this.$e(c)!=this.$e(this.ya(c)))return c}},s.prototype.fr=function(n,l){var c;c===void 0&&(c=!0),this.HB(n,0,null,l,c)},s.prototype.qJ=function(n,l,c){var p=new h.ja(0);p.add(l),this.HB(n,4,p,c,n.jc(l)==1736)},s.prototype.rJ=function(n,l,c){var p=new h.ja(0);p.add(l),this.HB(n,5,p,c,!0)},s.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},s.prototype.Je=function(n){return this.he.U(n,2)},s.prototype.D=function(n,l){this.g.ZF(this.$Q(n),l)},s.prototype.yd=function(n){return this.he.U(n,1)},s.prototype.Tf=function(n){return this.he.U(n,4)},s.prototype.Yy=function(n){return this.he.U(n,6)},s.prototype.mm=function(n){return this.he.U(n,7)},s.prototype.ls=function(n){return this.lh.U(n,1)},s.prototype.vj=function(n){return this.lh.U(n,0)},s.prototype.og=function(n,l){return(l=this.Fi[l]).size<=n?-1:l.read(n)},s.prototype.pn=function(n,l,c){(l=this.Fi[l]).size<=n&&l.resize(this.he.size,-1),l.write(n,c)},s.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var n=h.ja.rf(this.he.Jg,-1),l=0,c=this.Fi.length;l<c;l++)if(this.Fi[l]==null)return this.Fi[l]=n,l;return this.Fi.push(n),this.Fi.length-1},s.prototype.Gp=function(n){this.Fi[n]=null},s.prototype.lk=function(n){return this.Lc.U(n,1)},s.prototype.vf=function(n){return this.lk(this.ya(n))},s.prototype.ya=function(n){return this.Lc.U(n,4)},s.prototype.ue=function(n){return this.Lc.U(n,5)},s.prototype.kc=function(n){return this.Lc.U(n,6)},s.prototype.$e=function(n){return this.Lc.U(n,2)},s.prototype.af=function(n){return this.jk(this.Lc.U(n,2))},s.prototype.om=function(n){return this.Lc.U(n,7)},s.prototype.$r=function(n,l){this.D(this.lk(n),l)},s.prototype.nm=function(n,l){this.D(this.vf(n),l)},s.prototype.fh=function(n){return this.Lc.U(n,3)&this.XN},s.prototype.Bb=function(n,l){return(l=this.Ii[l]).size<=n?-1:l.read(n)},s.prototype.Kb=function(n,l,c){(l=this.Ii[l]).size<=n&&l.resize(this.Lc.size,-1),l.write(n,c)},s.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var n=h.ja.rf(this.Lc.Jg,-1),l=0,c=this.Ii.length;l<c;l++)if(this.Ii[l]==null)return this.Ii[l]=n,l;return this.Ii.push(n),this.Ii.length-1},s.prototype.Lg=function(n){this.Ii[n]=null},s.prototype.DP=function(n){var l=this.$e(n),c=this.ya(n),p=this.kc(n);p==c&&(p=this.kc(p))==n&&(p=-1);var f=this.vF(l);f!==n&&f!=c||this.Et(l,p),c=this.$n.read(l),isNaN(c)||(this.vJ(l,NaN),this.xJ(l,NaN)),this.xx(n,!0),this.Gy(n)},s.prototype.EP=function(n){for(var l=0,c=n.size;l<c;l++){var p=n.get(l),f=this.$e(this.ya(p));this.Et(this.$e(p),-1),this.Et(f,-1),this.xx(p,!0),this.Gy(p)}},s.prototype.vF=function(n){return this.ze.U(n,1)},s.prototype.jk=function(n){return this.ze.U(n,2)},s.prototype.In=function(n){return this.ze.U(n,3)},s.prototype.ZQ=function(n){return this.ze.U(n,4)},s.prototype.Mp=function(n){var l=this.$n.read(n);return isNaN(l)&&(this.gY(n),l=this.$n.read(n)),l},s.prototype.Ma=function(n){return this.g.FF(n,this.Dq)},s.prototype.Ie=function(n){return this.g.Qa(n,this.Em)},s.prototype.oR=function(n){return this.g.Qa(n,this.Eq)},s.prototype.nR=function(n,l){var c=this.Je(n);if(c==-1)return-1;var p=c,f=-1,g=-1;do{if(this.vf(p)==l)return p;if(f==-1){if((f=this.Je(l))==-1)break;g=f}if(this.vf(g)==n)return this.ya(g);p=this.kc(this.ya(p)),g=this.kc(this.ya(g))}while(p!=c&&g!=f);return-1},s.prototype.kB=function(n,l){l.Qr(),l=l.get();var c=new h.h;this.$r(n,c),l.Ec(c),this.nm(n,c),l.Rc(c)},s.prototype.CO=function(n,l){if(n==l)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(l,p),c.rb(p)?0:(l=new h.h,this.$r(n,l),(n=new h.h).vc(c,l),(c=new h.h).vc(p,l),h.h.pu(n,c))},s.prototype.BO=function(n,l){if(n==l)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(l,p),c.rb(p)?0:(l=new h.h,this.$r(n,l),(n=new h.h).vc(c,l),(c=new h.h).vc(p,l),0<=c.y&&0<n.y?h.h.pu(n,c):0)},s.prototype.sO=function(){for(var n=h.mc.ox(this.gA),l=new h.h,c=new h.h,p=new h.h,f=new h.h,g=new h.h,w=this.Oe;w!=-1;w=this.Tf(w)){var x=this.Je(w);if(x!=-1){var T=x;this.$r(T,l),this.nm(T,c),g.vc(c,l);var E=g.Uk();do{var O=T;if((T=this.kc(this.ya(T)))!=O){this.nm(T,p),f.vc(p,l),O=f.Uk();var C=f.yi(g);if(C*C/(O*E)*Math.min(O,E)<=n)return!1;g.N(f),E=O,c.N(p)}}while(T!=x)}}return!0},s}(),h.ku=k}(U||(U={})),function(h){var k=function(){function v(){this.j=null,this.jH=new h.h,this.kH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return v.prototype.cf=function(u){return u<this.Ij.length&&this.Ij[u]},v.prototype.fl=function(u,o,s,n){var l=h.ba.uf(this.j.g.jc(s));if(h.ba.uf(this.j.g.jc(o))!=2||l!=1)throw h.i.Ra();this.AP(u,o,s,n)},v.prototype.fr=function(u,o){this.j==null&&(this.j=new h.ku),this.j.fr(u,o)},v.prototype.Gt=function(u,o,s){for(h.Vk.W(u,o,s,!0),o=u.md;o!=-1;o=u.ve(o))u.jc(o)==1736&&h.tn.W(u,o,-1,this.Ov,s);this.fr(u,s)},v.prototype.HE=function(u,o,s,n,l){var c=this.j.g;if(c.jc(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Sb(u)){var p=c.Ya(u);this.j.Ie(p),this.j.Ie(c.V(p));var f=this.j.oR(p);if(f!=-1){var g=this.j.Bb(f,s);if(g!=1&&g!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,s,1),g=c.wf(o,-1);var w=f,x=this.j.Ie(p),T=1;do{var E=this.um(p,l);c.kj(g,E),n!=-1&&this.j.pn(x,n,1),this.j.Kb(w,s,1),w=this.j.kc(w);do var O=(E=T==1?c.V(p):c.Na(p))!=-1?this.j.Ie(E):-1;while(O==x);var C=this.j.lk(w);if(C!=O){do O=(E=T==1?c.Na(p):c.V(p))!=-1?this.j.Ie(E):-1;while(O==x);C!=O?(O=C,E=this.j.vj(this.j.mm(O))):T=-T}x=O,p=E}while(w!=f);c.mn(g,!0)}else this.j.Kb(f,s,2)}}},v.prototype.$E=function(){for(var u=this.j.bh(),o=new h.ja(0),s=this.j.Oe;s!=-1;s=this.j.Tf(s)){var n=this.j.Je(s),l=n;if(n!=-1)do{if(this.j.Bb(l,u)!=1){var c=this.j.ya(l);this.j.Kb(c,u,1),this.j.Kb(l,u,1),this.cf(this.j.af(l))&&this.cf(this.j.af(c))&&o.add(l)}l=this.j.kc(this.j.ya(l))}while(l!=n)}this.j.Lg(u),this.j.EP(o)},v.prototype.um=function(u,o){return o==-1?u:this.WR(u,o)},v.prototype.WR=function(u,o){var s=this.j.g,n=this.j.mm(this.j.Ie(u));do{var l=this.j.vj(n);if(s.Sf(s.cd(l))==o)return l;n=this.j.ls(n)}while(n!=-1);return u},v.prototype.Qt=function(u,o,s){this.$E();var n=this.j.g,l=n.Kg(1736),c=this.j.bh();return this.pK(u,o,l,s,c,-1),this.j.Lg(c),h.tn.W(n,l,1,this.Ov,null),l},v.prototype.pK=function(u,o,s,n,l,c){for(this.HE(u,s,l,c,n),o!=-1&&this.HE(o,s,l,c,n),u=this.j.g,o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var p=this.j.Je(o);if(p!=-1){var f=p;do{var g=this.j.Bb(f,l);if(g!=1&&g!=2)if(this.cf(this.j.af(f))){g=u.wf(s,-1);var w=f;do{var x=this.j.om(w);x!=-1?x=this.j.vj(x):(x=this.j.vj(this.j.om(this.j.ya(w))),x=this.j.g.V(x)),x=this.um(x,n),u.kj(g,x),this.j.Kb(w,l,1),c!=-1&&(x=this.j.Ie(x),this.j.pn(x,c,1)),w=this.j.kc(w)}while(w!=f);u.mn(g,!0)}else this.j.Kb(f,l,2);f=this.j.kc(this.j.ya(f))}while(f!=p)}}},v.prototype.XX=function(u,o,s){var n=this.j.g,l=n.Kg(1736),c=n.Kg(1607),p=n.Kg(550);this.$E();var f=-1,g=this.j.bh(),w=this.j.Fp();for(this.pK(u,o,l,s,g,w),u=this.j.Oe;u!=-1;u=this.j.Tf(u))if((o=this.j.Je(u))!=-1){var x=o;do{var T=this.j.Bb(x,g),E=this.j.Bb(this.j.ya(x),g);if((T|=E)==2)if(T=this.j.fh(x),this.cf(T)){var O=n.wf(c,-1),C=x;T=this.$w(u,n),T=this.um(T,s),n.kj(O,T),this.j.pn(u,w,1);do{if(T=this.j.vf(C),E=this.$w(T,n),E=this.um(E,s),n.kj(O,E),this.j.Kb(C,g,1),this.j.Kb(this.j.ya(C),g,1),this.j.pn(T,w,1),C=this.j.kc(C),T=this.j.Bb(C,g),(T|=E=this.j.Bb(this.j.ya(C),g))!=2)break;if(T=this.j.fh(C),!this.cf(T)){this.j.Kb(C,g,1),this.j.Kb(this.j.ya(C),g,1);break}}while(C!=x)}else this.j.Kb(x,g,1),this.j.Kb(this.j.ya(x),g,1);x=this.j.kc(this.j.ya(x))}while(x!=o)}for(u=this.j.Oe;u!=-1;u=this.j.Tf(u))(T=this.j.og(u,w))!=1&&(T=this.j.yd(u),this.cf(T)&&(f==-1&&(f=n.wf(p,-1)),(o=this.j.mm(u))!=-1&&(o=this.j.vj(o),T=this.um(o,s),n.kj(f,T))));return this.j.Gp(w),this.j.Lg(g),h.tn.W(n,l,1,this.Ov,null),(s=[])[0]=p,s[1]=c,s[2]=l,s},v.prototype.$w=function(u,o){var s=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ls(u)){var n=this.j.vj(u);s==-1&&(s=n);var l=this.j.Ma(o.Sf(o.cd(n)));if(this.cf(l)){s=n;break}}return s},v.prototype.gB=function(u,o){for(var s=this.ll(o),n=this.j.lk(o),l=this.j.vf(o),c=0,p=0,f=this.j.mm(n);f!=-1;f=this.j.ls(f)){var g=this.j.vj(f),w=u.cd(g),x=this.j.Ma(u.Sf(w));w=u.Ya(w),(x=(x&s)!=0)&&w==g&&(this.vl=o);var T=u.V(g);T!=-1&&this.j.Ie(T)==l?(c++,x&&(this.vl===-1&&w==T&&(g=this.j.kc(o),this.cf(this.ll(g))&&(this.vl=g)),p++)):(g=u.Na(g))!=-1&&this.j.Ie(g)==l&&(c--,x&&(this.vl===-1&&w===g&&(g=this.j.kc(o),this.cf(this.ll(g))&&(this.vl=g)),p--))}return this.j.D(n,this.jH),this.j.D(l,this.kH),(p!=0?p:c)*(u=h.h.ub(this.jH,this.kH))},v.prototype.ll=function(u){return this.j.fh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},v.prototype.sK=function(u){for(var o=this.j.ya(this.j.ue(u)),s=-1;o!=u;){if(this.cf(this.ll(o))){if(s!=-1)return-1;s=o}o=this.j.ya(this.j.ue(o))}return s!=-1?this.j.ya(s):-1},v.prototype.tK=function(u){for(var o=this.j.ya(this.j.kc(u)),s=-1;o!=u;){if(this.cf(this.ll(o))){if(s!=-1)return-1;s=o}o=this.j.ya(this.j.kc(o))}return s!=-1?this.j.ya(s):-1},v.prototype.hJ=function(u,o,s,n,l){var c=this.j.g,p=u,f=this.j.ya(p);this.j.Kb(p,s,1),this.j.Kb(f,s,1),this.vl=-1;for(var g=this.gB(c,p),w=p,x=-1,T=!1,E=1;;){var O=this.j.ue(p);if(O==f)break;if(f=this.j.kc(f),this.j.ya(O)!=f){if((p=this.sK(p))==-1){T=!0;break}f=this.j.ya(p)}else p=O;if(p==u){x=u;break}if(O=this.ll(p),!this.cf(O))break;this.j.Kb(p,s,1),this.j.Kb(f,s,1),w=p,g+=this.gB(c,p),E++}if(x==-1)for(p=u,f=this.j.ya(p),x=p;(u=this.j.kc(p))!=f;){if(f=this.j.ue(f),this.j.ya(u)!=f){if((p=this.tK(p))==-1){T=!0;break}f=this.j.ya(p)}else p=u;if(O=this.ll(p),!this.cf(O))break;this.j.Kb(p,s,1),this.j.Kb(f,s,1),x=p,g+=this.gB(c,p),E++}else if(this.vl!=-1&&(w=this.vl,x=this.j.ue(this.vl),this.j.ya(x)!=this.j.kc(this.j.ya(w))&&(x=this.sK(w))==-1))throw h.i.Ra();for(0<=g||(p=x,x=this.j.ya(w),w=this.j.ya(p)),s=c.wf(o,-1),p=w,w=this.j.lk(w),T=this.j.vf(x)==w&&T,g=this.$w(w,c),g=this.um(g,l),c.kj(s,g),n!=-1&&this.j.pn(w,n,1),w=0,E=T?h.P.truncate((E+1)/2):-1;u=this.j.vf(p),g=this.$w(u,c),g=this.um(g,l),c.kj(s,g),w++,n!=-1&&this.j.pn(u,n,1),T&&w==E&&(s=c.wf(o,-1),c.kj(s,g)),p!=x;)if(u=this.j.kc(p),this.j.ue(this.j.ya(p))!=this.j.ya(u)){if((p=this.tK(p))==-1)throw h.i.Ra()}else p=u},v.prototype.Rt=function(u){for(var o=this.j.g.Kg(1607),s=this.j.bh(),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var l=this.j.Je(n),c=l;do this.j.Bb(c,s)!=1&&this.cf(this.ll(c))&&this.hJ(c,o,s,-1,u),c=this.j.kc(this.j.ya(c));while(c!=l)}return this.j.Lg(s),o},v.prototype.YX=function(u){for(var o=this.j.g,s=o.Kg(1607),n=o.Kg(550),l=this.j.bh(),c=this.j.Fp(),p=-1,f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var g=this.j.Je(f),w=g;do{var x=this.j.Bb(w,l);x!=1&&(x=this.ll(w),this.cf(x)&&this.hJ(w,s,l,c,u)),w=this.j.kc(this.j.ya(w))}while(w!=g)}for(f=this.j.Oe;f!=-1;f=this.j.Tf(f))(x=this.j.og(f,c))!=1&&(x=this.j.yd(f),this.cf(x)&&(p==-1&&(p=o.wf(n,-1)),(g=this.j.mm(f))!=-1&&(g=this.j.vj(g),g=this.um(g,u),o.kj(p,g))));return this.j.Lg(l),this.j.Gp(c),(u=[])[0]=n,u[1]=s,u},v.prototype.pr=function(){for(var u=this.j.g,o=u.Kg(550),s=u.wf(o,-1),n=this.j.Oe;n!=-1;n=this.j.Tf(n))if(this.cf(this.j.yd(n))){for(var l=-1,c=this.j.mm(n);c!=-1;c=this.j.ls(c)){var p=this.j.vj(c);l==-1&&(l=p);var f=this.j.Ma(u.Sf(u.cd(p)));if(this.cf(f)){l=p;break}}u.kj(s,l)}return o},v.prototype.eq=function(u){this.Ij=[];for(var o=0;o<u;o++)this.Ij[o]=!1},v.WV=function(u,o,s){var n=u.Ja(),l=Array(1e3);h.P.bv(l,null);var c=h.P.mg(1e3,0),p=u.I(),f=!0,g=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();for(var w=0;w<p;){var x=h.P.truncate(u.gW(l,w)-w);g?h.jd.nK(o,l,x,s,c):h.jd.oK(o,l,x,s,c);for(var T=0,E=0;E<x;E++)c[E]==0&&(f&&(f=!1,n.Gd(u,0,w)),T!=E&&n.Gd(u,w+T,w+E),T=E+1);f||T==x||n.Gd(u,w+T,w+x),w+=x}return f?u:n},v.uG=function(u,o,s){return u instanceof h.ee?v.WV(u,o,s):o instanceof h.Ta?u.B()||o.B()?u.Ja():h.Vk.uU(s,u,o)?h.Vk.xO(u,o):u.Ja():v.XV(u,o,s)},v.Cv=function(u,o,s,n){var l=new h.l;u.A(l);var c=new h.l;o.A(c);var p=new h.l;if(p.L(l),p.$b(c),s=h.ua.Xd(s,p,!0),(p=new h.l).L(c),c=h.ua.Gr(s),p.X(c,c),!l.isIntersecting(p)){if(u.Eb()<=o.Eb())return v.mi(v.Ue(u.Ja()),u,"&");if(u.Eb()>o.Eb())return v.mi(v.Ue(o.Ja()),u,"&")}return c=new v,p=(l=new h.hd).Ib(v.Ue(u)),o=l.Ib(v.Ue(o)),c.Gt(l,s,n),n=c.Cv(p,o),u=v.mi(l.Ke(n),u,"&"),h.ba.Ic(u.K())&&(u.Eh(2,s),u.K()==1736&&u.hm()),u},v.XV=function(u,o,s){if(u.B()||o.B())return u.Ja();var n=[null],l=[0],c=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();return n[0]=u.D(),c?h.jd.nK(o,n,1,s,l):h.jd.oK(o,n,1,s,l),l[0]==0?u.Ja():u},v.prototype.GU=function(u,o,s,n,l){if(u.B())return u;var c=new h.hd;return u=c.Ib(u),this.Ok(c,u,o,s,n,l)},v.prototype.IU=function(u,o,s,n,l,c){if(l&&u.jc(o)!=550){var p=new h.MC;p.PX(u,s),p.Pg?(h.Vk.W(u,s,c,!0),l=!1):this.j.ty(s)}else h.Vk.W(u,s,c,!0),l=!1;if(n&&u.jc(o)!=550?this.j.rJ(u,o,c):this.j.qJ(u,o,c),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(u,o,s,n,!1,c);if(this.j.ty(NaN),c=this.j.Ma(o),this.eq(c+1),this.Ij[c]=!0,u.jc(o)==1736||n&&u.jc(o)!=550)return u.$o(o,0),o=this.Qt(o,-1,-1),(u=u.Ke(o)).$o(0),l?u.Eh(1,0):(u.Eh(2,s),u.hm()),u;if(u.jc(o)==1607)return o=this.Rt(-1),u=u.Ke(o),l||u.Eh(2,s),u;if(u.jc(o)==550)return o=this.pr(),u=u.Ke(o),l||u.Eh(2,s),u;throw h.i.Ra()},v.prototype.Ok=function(u,o,s,n,l,c){this.j=new h.ku;try{return this.IU(u,o,s,n,l,c)}finally{this.j.Wg()}},v.Ok=function(u,o,s,n,l){return new v().GU(u,o,s,n,l)},v.prototype.HU=function(u,o,s,n){this.Ov=u,this.j=new h.ku,u=o.Kn(s);var l=o.jc(s);if(u!=1||l==550?this.j.qJ(o,s,n):this.j.rJ(o,s,n),!this.j.kA)if(this.j.ty(NaN),n=this.j.Ma(s),this.eq(n+1),this.Ij[n]=!0,o.jc(s)==1736||u==1&&o.jc(s)!=550)o.$o(s,0),n=this.Qt(s,-1,-1),o.cC(n,s),o.wB(n);else if(o.jc(s)==1607)n=this.Rt(-1),o.cC(n,s),o.wB(n);else{if(o.jc(s)!=550)throw h.i.ga("internal error");n=this.pr(),o.cC(n,s),o.wB(n)}},v.prototype.km=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o));if(s>n)return u;var l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)]=!0,s==2&&n==2)return this.Qt(u,o,-1);if(s==1&&n==2||s==1&&n==1)return this.Rt(-1);if(s==0)return this.pr();throw h.i.Ra()},v.prototype.Cv=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),s==2&&n==2)return this.Qt(u,o,l);if(s==1&&0<n||n==1&&0<s)return this.Rt(l);if(s==0||n==0)return this.pr();throw h.i.Ra()},v.prototype.Kz=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),s==2&&n==2)return this.XX(u,o,l);if(s==1&&0<n||n==1&&0<s)return this.YX(l);if(s==0||n==0)return(u=[])[0]=this.pr(),u;throw h.i.Ra()},v.prototype.gp=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)]=!0,this.Ij[this.j.Ma(o)]=!0,s==2&&n==2)return this.Qt(u,o,-1);if(s==1&&n==1)return this.Rt(-1);if(s==0&&n==0)return this.pr();throw h.i.Ra()},v.Ue=function(u){var o=u.K();return o==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):o==33?(o=new h.ee(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ua(u.description),u.B()||o.pc(u,!0),o):u},v.mi=function(u,o,s){var n=u.K();return n==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):n!=33||s!="|"&&s!="^"?n==322?(o=new h.Ua(u.description),u.B()||o.pc(u,!0),o):n==33&&s=="-"&&o.K()==33||n==550&&s=="&"&&o.K()==33?(o=new h.Ta(u.description),u.B()||u.we(0,o),o):u:(o=new h.ee(u.description),u.B()||o.add(u),o)},v.km=function(u,o,s,n){if(u.B()||o.B()||u.Eb()>o.Eb())return v.mi(v.Ue(u),u,"-");var l=new h.l;u.A(l);var c=new h.l;if(o.A(c),!l.isIntersecting(c))return v.mi(v.Ue(u),u,"-");var p=new h.l;return p.L(l),p.$b(c),s=h.ua.Xd(s,p,!0),c=new v,p=(l=new h.hd).Ib(v.Ue(u)),o=l.Ib(v.Ue(o)),c.Gt(l,s,n),n=c.km(p,o),n=l.Ke(n),u=v.mi(n,u,"-"),h.ba.Ic(u.K())&&(u.Eh(2,s),u.K()==1736&&u.hm()),u},v.QP=function(u,o,s){if(2>u.length)throw h.i.O("not enough geometries to dissolve");for(var n=0,l=0,c=u.length;l<c;l++)n=Math.max(u[l].Eb(),n);var p=new h.l;p.Pa();var f=new h.hd,g=-1,w=0,x=-1;for(l=0,c=u.length;l<c;l++)if(u[l].Eb()==n)if(u[l].B())x==-1&&(x=l);else{x=l,g==-1?g=f.Ib(v.Ue(u[l])):f.pN(g,v.Ue(u[l]));var T=new h.l;u[l].yc(T),p.$b(T),w++}return 2>w?v.Ue(u[x]):(u=n==2,o=h.ua.Xd(n==0?o:null,p,!0),new v().Ok(f,g,o,u,!0,s))},v.Kz=function(u,o,s,n){var l=[null,null,null],c=new h.l;u.A(c);var p=new h.l;o.A(p);var f=new h.l;if(f.L(c),f.$b(p),s=h.ua.Xd(s,f,!0),(f=new h.l).L(p),p=h.ua.Gr(s),f.X(p,p),!c.isIntersecting(f)){if(u.Eb()<=o.Eb())return l[(u=v.mi(v.Ue(u.Ja()),u,"&")).Eb()]=u,l;if(u.Eb()>o.Eb())return l[(u=v.mi(v.Ue(o.Ja()),u,"&")).Eb()]=u,l}for(p=new v,f=(c=new h.hd).Ib(v.Ue(u)),o=c.Ib(v.Ue(o)),p.Gt(c,s,n),n=p.Kz(f,o),o=0;o<n.length;o++)p=v.mi(c.Ke(n[o]),u,"&"),h.ba.Ic(p.K())&&(p.Eh(2,s),p.K()==1736&&p.hm()),l[p.Eb()]=p;return l},v.gp=function(u,o,s,n){if(u.Eb()>o.Eb())return v.mi(v.Ue(u),u,"^");if(u.Eb()<o.Eb()||u.B())return v.mi(v.Ue(o),u,"^");if(o.B())return v.mi(v.Ue(u),u,"^");var l=new h.l;u.A(l);var c=new h.l;o.A(c);var p=new h.l;return p.L(l),p.$b(c),s=h.ua.Xd(s,p,!0),c=new v,p=(l=new h.hd).Ib(v.Ue(u)),o=l.Ib(v.Ue(o)),c.Gt(l,s,n),n=c.gp(p,o),u=v.mi(l.Ke(n),u,"^"),h.ba.Ic(u.K())&&(u.Eh(2,s),u.K()==1736&&u.hm()),u},v.prototype.GQ=function(u,o){var s=this.j.g;u=s.wf(u,-1);for(var n=o.size,l=0;l<n;l++){var c=o.get(l);s.kj(u,c)}s.mn(u,!0)},v.prototype.WW=function(u,o){for(var s=this.j.g,n=s.md;n!=-1;n=s.ve(n))if(n==o)for(var l=s.Ob(n);l!=-1;l=s.Sb(l)){var c=s.Ya(l);if(c!=-1)for(var p=s.V(c);p!=-1;){c=this.j.Ie(c);var f=this.j.Ie(p);(c=this.j.nR(c,f))!=-1&&(f=this.j.ya(c),this.j.Kb(c,u,1),this.j.Kb(f,u,2)),c=p,p=s.V(c)}}},v.prototype.YV=function(u,o,s,n){s=this.j.Ma(s),n=this.j.Ma(n);var l=new h.ja(0);l.Jb(256);for(var c=this.j.g,p=this.j.bh(),f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var g=this.j.Je(f);if(g!=-1){var w=g;do{if(this.j.Bb(w,p)!=1){var x=w,T=w,E=!1,O=0;do{if(this.j.Kb(x,p,1),!E){var C=this.j.fh(x);C&n&&this.j.af(x)&s&&(T=x,E=!0)}E&&(l.add(this.j.vj(this.j.mm(this.j.lk(x)))),u!=-1&&(C=this.j.fh(x))&n&&(O|=C=this.j.Bb(x,u))),x=this.j.kc(x)}while(x!=T);E&&0<this.j.Mp(this.j.$e(T))&&(x=c.Kg(1736),this.GQ(x,l),o!=-1&&c.CJ(x,o,O)),l.clear(!1)}w=this.j.kc(this.j.ya(w))}while(w!=g)}}this.j.Lg(p)},v.prototype.AP=function(u,o,s,n){this.j.tW();var l=-1;u!=-1&&(l=this.j.bh(),this.WW(l,s)),this.YV(l,u,o,s),l!=-1&&(this.j.Lg(l),l=-1);var c=this.j.g;for(u=0,l=c.md;l!=-1;l=c.ve(l))l!=o&&l!=s&&(n.add(l),u++);n.Wd(0,u,function(p,f){return(p=c.qz(c.Ob(p)))<(f=c.qz(c.Ob(f)))?-1:p==f?0:1})},v.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},v}();h.Hg=k}(U||(U={})),function(h){var k=function(){function v(u){u!==void 0?this.Jt(u):this.MB()}return v.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},v.prototype.Nb=function(u){return this==u||u instanceof v&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},v.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},v.prototype.Gh=function(u,o){var s=this.qb*u.x+this.bb*u.y+this.Qb;o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=s},v.prototype.aY=function(u,o,s){for(var n=0;n<o;n++){var l=u[n].x,c=u[n].y,p=this.eb*l+this.jb*c+this.Lb;l=this.qb*l+this.bb*c+this.Qb,s[n]!=null?s[n].na(p,l):s[n]=h.h.construct(p,l)}},v.prototype.multiply=function(u){v.multiply(this,u,this)},v.multiply=function(u,o,s){var n=u.eb*o.eb+u.qb*o.jb,l=u.jb*o.eb+u.bb*o.jb,c=u.Lb*o.eb+u.Qb*o.jb+o.Lb,p=u.eb*o.qb+u.qb*o.bb,f=u.jb*o.qb+u.bb*o.bb;u=u.Lb*o.qb+u.Qb*o.bb+o.Qb,s.eb=n,s.jb=l,s.Lb=c,s.qb=p,s.bb=f,s.Qb=u},v.prototype.Qf=function(){var u=new v;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},v.prototype.hC=function(u){if(!u.B()){for(var o=[],s=0;4>s;s++)o[s]=new h.h;u.iB(o),this.bY(o,o),u.bx(o,4)}},v.prototype.bY=function(u,o){for(var s=0;s<u.length;s++){var n=new h.h,l=u[s];n.x=this.eb*l.x+this.jb*l.y+this.Lb,n.y=this.qb*l.x+this.bb*l.y+this.Qb,o[s]=n}},v.prototype.kS=function(u,o){u.B()||o.B()||u.S()==0||u.da()==0?this.lx():(this.jb=this.qb=0,this.eb=o.S()/u.S(),this.bb=o.da()/u.da(),this.Lb=o.v-u.v*this.eb,this.Qb=o.G-u.G*this.bb)},v.prototype.$X=function(u){var o=new h.h,s=new h.h;o.na(this.eb,this.qb),s.na(this.jb,this.bb),o.sub(o);var n=.5*o.Uk();return o.na(this.eb,this.qb),s.na(this.jb,this.bb),o.add(s),u*(n>(o=.5*o.Uk())?Math.sqrt(n):Math.sqrt(o))},v.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},v.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Gh(o,o),o.sub(h.h.construct(0,1)),o.Uk()>u*u?!1:(o.na(0,0),this.Gh(o,o),!(o.Uk()>u*u)&&(o.na(1,0),this.Gh(o,o),o.sub(h.h.construct(1,0)),o.Uk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},v.prototype.Di=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},v.prototype.ig=function(u,o){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=o},v.prototype.Jt=function(u,o){o!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=o,this.Qb=0):this.Jt(u,u)},v.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},v.prototype.kX=function(u){this.lX(Math.cos(u),Math.sin(u))},v.prototype.lX=function(u,o){this.eb=u,this.jb=-o,this.Lb=0,this.qb=o,this.bb=u,this.Qb=0},v.prototype.shift=function(u,o){this.Lb+=u,this.Qb+=o},v.prototype.scale=function(u,o){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=o,this.bb*=o,this.Qb*=o},v.prototype.flipX=function(u,o){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+o-this.Lb},v.prototype.flipY=function(u,o){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+o-this.Qb},v.prototype.rotate=function(u){var o=new v;o.kX(u),this.multiply(o)},v.prototype.inverse=function(u){if(u!==void 0){var o=this.eb*this.bb-this.jb*this.qb;o==0?u.lx():(o=1/o,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*o,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*o,u.eb=this.bb*o,u.jb=-this.jb*o,u.qb=-this.qb*o,u.bb=this.eb*o)}else this.inverse(this)},v}();h.Ed=k}(U||(U={})),function(h){var k=function(){function v(){}return v.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},v.prototype.Jt=function(u,o){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=o,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},v.prototype.translate=function(u,o,s){this.Lb+=u,this.Qb+=o,this.Cg+=s},v.prototype.hC=function(u){if(!u.B()){for(var o=new h.Od[8],s=0;8>s;s++)o[s]=new h.Od;u.iB(o),this.transform(o,8,o),u.bx(o)}},v.prototype.transform=function(u,o,s){for(var n=0;n<o;n++){var l=new h.Od,c=u[n];l.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,l.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,l.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,s[n]=l}},v.prototype.hp=function(u){var o=new h.Od;return o.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,o.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,o},v.prototype.Bg=function(u){v.multiply(this,u,this)},v.multiply=function(u,o,s){var n=u.eb*o.eb+u.qb*o.jb+u.pf*o.Ve,l=u.eb*o.qb+u.qb*o.bb+u.pf*o.We,c=u.eb*o.pf+u.qb*o.Ye+u.pf*o.Ze,p=u.jb*o.eb+u.bb*o.jb+u.Ye*o.Ve,f=u.jb*o.qb+u.bb*o.bb+u.Ye*o.We,g=u.jb*o.pf+u.bb*o.Ye+u.Ye*o.Ze,w=u.Ve*o.eb+u.We*o.jb+u.Ze*o.Ve,x=u.Ve*o.qb+u.We*o.bb+u.Ze*o.We,T=u.Ve*o.pf+u.We*o.Ye+u.Ze*o.Ze,E=u.Lb*o.eb+u.Qb*o.jb+u.Cg*o.Ve+o.Lb,O=u.Lb*o.qb+u.Qb*o.bb+u.Cg*o.We+o.Qb;u=u.Lb*o.pf+u.Qb*o.Ye+u.Cg*o.Ze+o.Cg,s.eb=n,s.qb=l,s.pf=c,s.jb=p,s.bb=f,s.Ye=g,s.Ve=w,s.We=x,s.Ze=T,s.Lb=E,s.Qb=O,s.Cg=u},v.inverse=function(u,o){var s=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(s==0)throw h.i.ga("math singularity");var n=1/s;s=(u.bb*u.Ze-u.Ye*u.We)*n;var l=-(u.jb*u.Ze-u.Ye*u.Ve)*n,c=(u.jb*u.We-u.bb*u.Ve)*n,p=-(u.qb*u.Ze-u.We*u.pf)*n,f=(u.eb*u.Ze-u.pf*u.Ve)*n,g=-(u.eb*u.We-u.qb*u.Ve)*n,w=(u.qb*u.Ye-u.pf*u.bb)*n,x=-(u.eb*u.Ye-u.pf*u.jb)*n;n*=u.eb*u.bb-u.qb*u.jb;var T=-(u.Lb*s+u.Qb*l+u.Cg*c),E=-(u.Lb*p+u.Qb*f+u.Cg*g);u=-(u.Lb*w+u.Qb*x+u.Cg*n),o.eb=s,o.qb=p,o.pf=w,o.jb=l,o.bb=f,o.Ye=x,o.Ve=c,o.We=g,o.Ze=n,o.Lb=T,o.Qb=E,o.Cg=u},v.prototype.Qf=function(){var u=new v;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},v}();h.FY=k}(U||(U={})),function(h){var k=function(u){function o(s){if(s!==void 0)s=u.call(this,s.dc(),s)||this;else{(s=u.call(this)||this).dg=[],s.dg[0]=0,s.Ba=1,s.wh=[];for(var n=0;10>n;n++)s.wh[n]=-1;s.wh[s.dg[0]]=0}return s.lq=!0,s}return yt(o,u),o.prototype.se=function(s){this.hasAttribute(s)||(this.wh[s]=0,this.eD())},o.prototype.removeAttribute=function(s){if(s==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(s)&&(this.wh[s]=-1,this.eD())},o.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var s=0;s<this.wh.length;s++)this.wh[s]=-1;this.wh[this.dg[0]]=0,this.lq=!0},o.prototype.zF=function(){return v.fz().add(this)},o.pg=function(){return v.fz().VR()},o.prototype.oM=function(){var s=this.dc();return new h.sa(s,this)},o.prototype.eD=function(){for(var s=this.Ba=0,n=0;10>s;s++)0<=this.wh[s]&&(this.dg[n]=s,this.wh[s]=n,n++,this.Ba++);this.lq=!0},o.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},o.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof o)||s.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=s.dg[n])return!1;return this.lq==s.lq},o.prototype.BG=function(s){if(s.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=s.dg[n])return!1;return!0},o.Kw=function(s,n){for(var l=[],c=0;c<s.Ba;c++)l[c]=-1;c=0;for(var p=s.Ba;c<p;c++)l[c]=n.Rf(s.ld(c));return l},o.wR=function(s,n){return(s=new o(s)).se(n),s.zF()},o.xR=function(s,n){for(var l=null,c=0;10>c;c++)!s.hasAttribute(c)&&n.hasAttribute(c)&&(l==null&&(l=new o(s)),l.se(c));return l!=null?l.zF():s},o}(h.sa);h.fe=k;var v=function(){function u(){this.map=[];var o=new k;this.add(o),(o=new k).se(1),this.add(o)}return u.fz=function(){return u.XK},u.prototype.VR=function(){return u.gt},u.prototype.add=function(o){var s=o.dc();if(u.gt!=null&&u.gt.dc()==s&&o.BG(u.gt))return u.gt;if(u.Fw!=null&&u.Fw.dc()==s&&o.BG(u.Fw))return u.Fw;var n=null;return this.map[s]!==void 0&&(n=this.map[s]),n==null&&((n=o.oM()).Ba==1?u.gt=n:n.Ba==2&&n.ld(1)==1?u.Fw=n:this.map[s]=n),n},u.XK=new u,u}()}(U||(U={}));var Ys={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},T1={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},ko=new(function(){function h(){this.MM=50,this.pp=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.pp.clear()},h.prototype.delete=function(k){return!!this.pp.delete(k)&&(this.ij.splice(this.ij.indexOf(k),1),!0)},h.prototype.get=function(k){var v=this.pp.get(k);if(v!==void 0)return this.ij[0]!==k&&(this.ij.splice(this.ij.indexOf(k),1),this.ij.unshift(k)),v},h.prototype.has=function(k){return this.pp.has(k)},h.prototype.set=function(k,v){return this.get(k)!==void 0&&this.delete(k),this.ij.unshift(k),this.pp.set(k,v),this.jM(),this},h.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var k=this.ij.pop();this.pp.delete(k)}},h}()),we=((Ii={}).convertJSONToGeometry=function(h){return U.ac.aP(h)},Ii.hasM=function(h){return h.hasAttribute(U.Kh.M)},Ii.hasZ=function(h){return h.hasAttribute(U.Kh.Z)},Ii.getPointX=function(h){return h.Ng()},Ii.getPointY=function(h){return h.kh()},Ii.getPointZ=function(h){return h.XR()},Ii.getPointM=function(h){return h.uR()},Ii.getXMin=function(h){return h.gs()},Ii.getYMin=function(h){return h.js()},Ii.getXMax=function(h){return h.fs()},Ii.getYMax=function(h){return h.hs()},Ii.getZExtent=function(h){return h.Vg(U.Kh.Z,0)},Ii.getMExtent=function(h){return h.Vg(U.Kh.M,0)},Ii.exportPaths=function(h){var k=[],v=h.ea(),u=null,o=null,s=h.hasAttribute(U.Kh.Z),n=h.hasAttribute(U.Kh.M);s&&(u=h.vb(U.Kh.Z)),n&&(o=h.vb(U.Kh.M));for(var l=new U.h,c=0;c<v;c++){for(var p=h.Ca(c),f=h.Ka(c),g=0,w=0,x=NaN,T=NaN,E=NaN,O=NaN,C=h.ec(c),N=[],D=p;D<p+f;D++){h.D(D,l),O=E=NaN;var z=[l.x,l.y];s&&(E=u.get(D),z.push(E)),n&&(O=o.get(D),z.push(O)),D==p&&C&&(g=l.x,w=l.y,x=E,T=O),N.push(z)}!C||g==l.x&&w==l.y&&(!s||isNaN(x)&&isNaN(E)||x==E)&&(!n||isNaN(T)&&isNaN(O)||T==O)||N.push(N[0].slice(0)),k.push(N)}return k},Ii.exportPathsFlat=function(){},Ii.exportPoints=function(h){var k=h.hasAttribute(U.Kh.Z),v=h.hasAttribute(U.Kh.M),u=null,o=null;k&&(u=h.vb(U.Kh.Z)),v&&(o=h.vb(U.Kh.M));for(var s=new U.h,n=h.I(),l=[],c=0;c<n;c++){h.D(c,s);var p=[s.x,s.y];k&&p.push(u.get(c)),v&&p.push(o.get(c)),l.push(p)}return l},Ii.exportPointsFlat=function(){},Ii),Pa=new Map;return function(){function h(){}return h.buffer=gi,h.clip=P,h.contains=L,h.convexHull=Oe,h.crosses=F,h.cut=j,h.densify=_1,h.difference=Ne,h.disjoint=oe,h.distance=V,h.equals=J,h.extendedSpatialReferenceInfo=A,h.generalize=h0,h.geodesicArea=S1,h.geodesicBuffer=qt,h.geodesicDensify=E2,h.geodesicLength=k2,h.intersect=We,h.intersects=Q,h.isSimple=ve,h.nearestCoordinate=xr,h.nearestVertex=w1,h.nearestVertices=fu,h.offset=Gt,h.overlaps=ae,h.planarArea=M2,h.planarLength=A2,h.relate=de,h.simplify=Ie,h.symmetricDifference=Re,h.touches=Y,h.union=Pe,h.within=te,h.rotate=U.Dx.rotate,h.flipHorizontal=U.Dx.EQ,h.flipVertical=U.Dx.FQ,h.intersectLinesToPoints=L2,h.ExtendedParams=U.tC,h.clearDefaultSpatialReferenceTolerance=R2,h.changeDefaultSpatialReferenceTolerance=j2,h._enableProjection=O2,h._project=N2,h._getTransformation=P2,h._getTransformationBySuitability=C2,h}()}var r=i();r!==void 0&&(e.exports=r)}($m,$m.exports);var AN=$m.exports;const at=wC(AN),one=nne({__proto__:null,default:at},[AN]),ane=Object.freeze(Object.defineProperty({__proto__:null,G:at,g:one},Symbol.toStringTag,{value:"Module"})),bt={convertToGEGeometry:lne,exportPoint:une,exportPolygon:hne,exportPolyline:cne,exportMultipoint:pne,exportExtent:dne};function lne(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function une(e,t,i){const r=e.hasZ(t),a=e.hasM(t),d=new Ze({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(d.z=e.getPointZ(t)),a&&(d.m=e.getPointM(t)),d.cache._geVersion=t,d}function hne(e,t,i){const r=new $o({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function cne(e,t,i){const r=new ls({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function pne(e,t,i){const r=new Hf({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function dne(e,t,i){const r=e.hasZ(t),a=e.hasM(t),d=new gt({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const y=e.getZExtent(t);d.zmin=y.vmin,d.zmax=y.vmax}if(a){const y=e.getMExtent(t);d.mmin=y.vmin,d.mmax=y.vmax}return d.cache._geVersion=t,d}const fne=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:bt},Symbol.toStringTag,{value:"Module"}));function It(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function yne(e){return at.extendedSpatialReferenceInfo(e)}function mne(e,t){return at.clip(bt,It(e),e,t)}function gne(e,t){return at.cut(bt,It(e),e,t)}function vne(e,t){return at.contains(bt,It(e),e,t)}function bne(e,t){return at.crosses(bt,It(e),e,t)}function wne(e,t,i){return at.distance(bt,It(e),e,t,i)}function _ne(e,t){return at.equals(bt,It(e),e,t)}function Sne(e,t){return at.intersects(bt,It(e),e,t)}function xne(e,t){return at.touches(bt,It(e),e,t)}function $ne(e,t){return at.within(bt,It(e),e,t)}function Tne(e,t){return at.disjoint(bt,It(e),e,t)}function Ine(e,t){return at.overlaps(bt,It(e),e,t)}function Ene(e,t,i){return at.relate(bt,It(e),e,t,i)}function Mne(e){return at.isSimple(bt,It(e),e)}function Ane(e){return at.simplify(bt,It(e),e)}function kne(e,t=!1){return at.convexHull(bt,It(e),e,t)}function One(e,t){return at.difference(bt,It(e),e,t)}function Pne(e,t){return at.symmetricDifference(bt,It(e),e,t)}function Cne(e,t){return at.intersect(bt,It(e),e,t)}function Nne(e,t=null){return at.union(bt,It(e),e,t)}function jne(e,t,i,r,a,d){return at.offset(bt,It(e),e,t,i,r,a,d)}function Rne(e,t,i,r=!1){return at.buffer(bt,It(e),e,t,i,r)}function Lne(e,t,i,r,a,d){return at.geodesicBuffer(bt,It(e),e,t,i,r,a,d)}function Dne(e,t,i=!0){return at.nearestCoordinate(bt,It(e),e,t,i)}function Fne(e,t){return at.nearestVertex(bt,It(e),e,t)}function zne(e,t,i,r){return at.nearestVertices(bt,It(e),e,t,i,r)}function iS(e){var t;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?((t=e.extent)==null?void 0:t.center)??null:null}function Vne(e,t,i){if(e==null)throw new Lp;const r=e.spatialReference;if((i=i??iS(e))==null)throw new Lp;const a=e.constructor.fromJSON(at.rotate(e,t,i));return a.spatialReference=r,a}function Gne(e,t){if(e==null)throw new Lp;const i=e.spatialReference;if((t=t??iS(e))==null)throw new Lp;const r=e.constructor.fromJSON(at.flipHorizontal(e,t));return r.spatialReference=i,r}function qne(e,t){if(e==null)throw new Lp;const i=e.spatialReference;if((t=t??iS(e))==null)throw new Lp;const r=e.constructor.fromJSON(at.flipVertical(e,t));return r.spatialReference=i,r}function Une(e,t,i,r){return at.generalize(bt,It(e),e,t,i,r)}function Bne(e,t,i){return at.densify(bt,It(e),e,t,i)}function kN(e,t,i,r=0){return at.geodesicDensify(bt,It(e),e,t,i,r)}function Hne(e,t){return at.planarArea(bt,It(e),e,t)}function Wne(e,t){return at.planarLength(bt,It(e),e,t)}function Jne(e,t,i){return at.geodesicArea(bt,It(e),e,t,i)}function Kne(e,t,i){return at.geodesicLength(bt,It(e),e,t,i)}function Yne(e,t){return at.intersectLinesToPoints(bt,It(e),e,t)}function Zne(e,t){at.changeDefaultSpatialReferenceTolerance(e,t)}function Xne(e){at.clearDefaultSpatialReferenceTolerance(e)}let Lp=class extends Error{constructor(){super("Illegal Argument Exception")}};const yge=Object.freeze(Object.defineProperty({__proto__:null,buffer:Rne,changeDefaultSpatialReferenceTolerance:Zne,clearDefaultSpatialReferenceTolerance:Xne,clip:mne,contains:vne,convexHull:kne,crosses:bne,cut:gne,densify:Bne,difference:One,disjoint:Tne,distance:wne,equals:_ne,extendedSpatialReferenceInfo:yne,flipHorizontal:Gne,flipVertical:qne,generalize:Une,geodesicArea:Jne,geodesicBuffer:Lne,geodesicDensify:kN,geodesicLength:Kne,intersect:Cne,intersectLinesToPoints:Yne,intersects:Sne,isSimple:Mne,nearestCoordinate:Dne,nearestVertex:Fne,nearestVertices:zne,offset:jne,overlaps:Ine,planarArea:Hne,planarLength:Wne,relate:Ene,rotate:Vne,simplify:Ane,symmetricDifference:Pne,touches:xne,union:Nne,within:$ne},Symbol.toStringTag,{value:"Module"}));var O5;let hi=O5=class extends pe{static from(e){return Ch(O5,e)}constructor(e){super(e),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};b([S({type:Number,json:{write:!0}})],hi.prototype,"dpi",void 0),b([S()],hi.prototype,"floors",void 0),b([S({type:String,json:{write:!0}})],hi.prototype,"gdbVersion",void 0),b([S({types:nu,json:{read:_a,write:!0}})],hi.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],hi.prototype,"geometryPrecision",void 0),b([S({type:Number,json:{write:!0}})],hi.prototype,"height",void 0),b([S({type:[Number],json:{write:!0}})],hi.prototype,"layerIds",void 0),b([S({type:["top","visible","all","popup"],json:{write:!0}})],hi.prototype,"layerOption",void 0),b([S({type:gt,json:{write:!0}})],hi.prototype,"mapExtent",void 0),b([S({type:Number,json:{write:!0}})],hi.prototype,"maxAllowableOffset",void 0),b([S({type:Boolean,json:{write:!0}})],hi.prototype,"returnFieldName",void 0),b([S({type:Boolean,json:{write:!0}})],hi.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{write:!0}})],hi.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:!0}})],hi.prototype,"returnUnformattedValues",void 0),b([S({type:Boolean,json:{write:!0}})],hi.prototype,"returnZ",void 0),b([S({type:Xe,json:{write:!0}})],hi.prototype,"spatialReference",void 0),b([S()],hi.prototype,"sublayers",void 0),b([S({type:Ws,json:{write:!0}})],hi.prototype,"timeExtent",void 0),b([S({type:Number,json:{write:!0}})],hi.prototype,"tolerance",void 0),b([S({type:Number,json:{write:!0}})],hi.prototype,"width",void 0),hi=O5=b([B("esri.rest.support.IdentifyParameters")],hi);const ON=hi,dy={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ls({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Xe.WebMercator}),minus180Line:new ls({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Xe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ls({paths:[[[180,-180],[180,180]]],spatialReference:Xe.WGS84}),minus180Line:new ls({paths:[[[-180,-180],[-180,180]]],spatialReference:Xe.WGS84})}};function _h(e,t){return Math.ceil((e-t)/(2*t))}function PN(e,t){const i=ef(e);for(const r of i)for(const a of r)a[0]+=t;return e}function ef(e){return Th(e)?e.rings:e.paths}function Qne(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function pu(e){return typeof e=="string"?Qi(e):re(e)}function CN(e,t,i){const r={};for(const a in e){if(a==="declaredClass")continue;const d=e[a];if(d!=null&&typeof d!="function")if(Array.isArray(d)){r[a]=[];for(let y=0;y<d.length;y++)r[a][y]=CN(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i&&i[a]);r[a]=t?y:JSON.stringify(y)}else r[a]=t?d:JSON.stringify(d);else r[a]=d}return r}async function eoe(e,t,i,r){const a=pu(e),d=t[0].spatialReference,y={...r,query:{...a.query,f:"json",sr:JSON.stringify(d),target:JSON.stringify({geometryType:Wf(t[0]),geometries:t}),cutter:JSON.stringify(i)}},m=await Vt(a.path+"/cut",y),{cutIndexes:_,geometries:$=[]}=m.data;return{cutIndexes:_,geometries:$.map(M=>{const A=_a(M);return A.spatialReference=d,A})}}function toe(e){return{geometryType:Wf(e[0]),geometries:e.map(t=>t.toJSON())}}function ioe(e,t,i){const r=AU(t);return e.map(a=>{const d=r.fromJSON(a);return d.spatialReference=i,d})}async function roe(e,t,i){const r=typeof e=="string"?Qi(e):e,a=t[0].spatialReference,d=Wf(t[0]),y={...i,query:{...r.query,f:"json",sr:a.wkid??JSON.stringify(a),geometries:JSON.stringify(toe(t))}},{data:m}=await Vt(r.path+"/simplify",y);return ioe(m.geometries,d,a)}const NN=fe.getLogger("esri.geometry.support.normalizeUtils");function soe(e){return e.type==="polygon"}function noe(e){return e[0].type==="polygon"}function ooe(e){return e[0].type==="polyline"}function aoe(e,t){if(!(e instanceof ls||e instanceof $o)){const a="straightLineDensify: the input geometry is neither polyline nor polygon";throw NN.error(a),new se(a)}const i=ef(e),r=[];for(const a of i){const d=[];r.push(d),d.push([a[0][0],a[0][1]]);for(let y=0;y<a.length-1;y++){const m=a[y][0],_=a[y][1],$=a[y+1][0],M=a[y+1][1],A=Math.sqrt(($-m)*($-m)+(M-_)*(M-_)),P=(M-_)/A,j=($-m)/A,L=A/t;if(L>1){for(let Q=1;Q<=L-1;Q++){const Y=Q*t,te=j*Y+m,oe=P*Y+_;d.push([te,oe])}const F=(A+Math.floor(L-1)*t)/2,V=j*F+m,J=P*F+_;d.push([V,J])}d.push([$,M])}}return soe(e)?new $o({rings:r,spatialReference:e.spatialReference}):new ls({paths:r,spatialReference:e.spatialReference})}function y$(e,t,i){if(t){const r=aoe(e,1e6);e=ip(r,!0)}return i&&(e=PN(e,i)),e}function m$(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const a=_h(r,t);e[0]=r+a*(-2*t)}else if(r<i){const a=_h(r,i);e[0]=r+a*(-2*i)}}else{const r=e.x;if(r>t){const a=_h(r,t);e=e.clone().offset(a*(-2*t),0)}else if(r<i){const a=_h(r,i);e=e.clone().offset(a*(-2*i),0)}}return e}function loe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const a=t.cutIndexes[r],d=t.geometries[r],y=ef(d);for(let m=0;m<y.length;m++){const _=y[m];_.some($=>{if($[0]<180)return!0;{let M=0;for(let P=0;P<_.length;P++){const j=_[P][0];M=j>M?j:M}M=Number(M.toFixed(9));const A=-360*_h(M,180);for(let P=0;P<_.length;P++){const j=d.getPoint(m,P);d.setPoint(m,P,j.clone().offset(A,0))}return!0}})}if(a===i){if(noe(e))for(const m of ef(d))e[a]=e[a].addRing(m);else if(ooe(e))for(const m of ef(d))e[a]=e[a].addPath(m)}else i=a,e[a]=d}return e}async function rS(e,t,i){if(!Array.isArray(e))return rS([e],t);t&&typeof t!="string"&&NN.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??$t.geometryServiceUrl;let a,d,y,m,_,$,M,A,P=0;const j=[],L=[];for(const te of e)if(te!=null)if(a||(a=te.spatialReference,d=On(a),y=a.isWebMercator,$=y?102100:4326,m=dy[$].maxX,_=dy[$].minX,M=dy[$].plus180Line,A=dy[$].minus180Line),d)if(te.type==="mesh")L.push(te);else if(te.type==="point")L.push(m$(te.clone(),m,_));else if(te.type==="multipoint"){const oe=te.clone();oe.points=oe.points.map(ae=>m$(ae,m,_)),L.push(oe)}else if(te.type==="extent"){const oe=te.clone()._normalize(!1,!1,d);L.push(oe.rings?new $o(oe):oe)}else if(te.extent){const oe=te.extent,ae=_h(oe.xmin,_)*(2*m);let de=ae===0?te.clone():PN(te.clone(),ae);oe.offset(ae,0),oe.intersects(M)&&oe.xmax!==m?(P=oe.xmax>P?oe.xmax:P,de=y$(de,y),j.push(de),L.push("cut")):oe.intersects(A)&&oe.xmin!==_?(P=oe.xmax*(2*m)>P?oe.xmax*(2*m):P,de=y$(de,y,360),j.push(de),L.push("cut")):L.push(de)}else L.push(te.clone());else L.push(te);else L.push(te);let F=_h(P,m),V=-90;const J=F,Q=new ls;for(;F>0;){const te=360*F-180;Q.addPath([[te,V],[te,-1*V]]),V*=-1,F--}if(j.length>0&&J>0){const te=loe(j,await eoe(r,j,Q,i)),oe=[],ae=[];for(let Ie=0;Ie<L.length;Ie++){const Oe=L[Ie];if(Oe!=="cut")ae.push(Oe);else{const Ne=te.shift(),Re=e[Ie];Re!=null&&Re.type==="polygon"&&Re.rings&&Re.rings.length>1&&Ne.rings.length>=Re.rings.length?(oe.push(Ne),ae.push("simplify")):ae.push(y?$h(Ne):Ne)}}if(!oe.length)return ae;const de=await roe(r,oe,i),ve=[];for(let Ie=0;Ie<ae.length;Ie++){const Oe=ae[Ie];Oe!=="simplify"?ve.push(Oe):ve.push(y?$h(de.shift()):de.shift())}return ve}const Y=[];for(let te=0;te<L.length;te++){const oe=L[te];if(oe!=="cut")Y.push(oe);else{const ae=j.shift();Y.push(y===!0?$h(ae):ae)}}return Y}function mge(e,t){const i=On(t);if(i){const[r,a]=i.valid,d=a-r;if(e<r)for(;e<r;)e+=d;if(e>a)for(;e>a;)e-=d}return e}async function uoe(e,t){const{WhereClause:i}=await be(()=>import("./WhereClause-05449cfc.js").then(r=>r.W),["assets/WhereClause-05449cfc.js","assets/executionError-c92d3b85.js"]);return i.create(e,t)}function f2(e,t){return e!=null?t!=null?`(${e}) AND (${t})`:e:t}const jN=96;function RN(e,t){const i=t||e.extent,r=e.width,a=Ma(i&&i.spatialReference);return i&&r?i.width/r*a*LE*jN:0}function gge(e,t){return e/(Ma(t)*LE*jN)}function vge(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)&&"floors"in e.view?LN(e.view.floors,t.floorInfo.floorField):null}function ov(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)?LN(e,t.floorInfo.floorField):null}function LN(e,t){if(!(e!=null&&e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function g$(e,t,i){return t.flatten(({sublayers:a})=>a).length!==e.length?!0:!!e.some(a=>a.originIdOf("minScale")>i||a.originIdOf("maxScale")>i||a.originIdOf("renderer")>i||a.originIdOf("labelingInfo")>i||a.originIdOf("opacity")>i||a.originIdOf("labelsVisible")>i||a.originIdOf("source")>i)||!FN(e,t)}function DN(e,t,i){return!!e.some(r=>{const a=r.source;return!(!a||a.type==="map-layer"&&a.mapLayerId===r.id&&(a.gdbVersion==null||a.gdbVersion===i))||r.originIdOf("renderer")>Te.SERVICE||r.originIdOf("labelingInfo")>Te.SERVICE||r.originIdOf("opacity")>Te.SERVICE||r.originIdOf("labelsVisible")>Te.SERVICE})||!FN(e,t)}function FN(e,t){if(!e||!e.length||t==null)return!0;const i=t.slice().reverse().flatten(({sublayers:d})=>d&&d.toArray().reverse()).map(d=>d.id).toArray();if(e.length>i.length)return!1;let r=0;const a=i.length;for(const{id:d}of e){for(;r<a&&i[r]!==d;)r++;if(r>=a)return!1}return!0}function hoe(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const v$=e=>e.spatialReference.wkid||JSON.stringify(e.spatialReference);function coe(e,t){const{dpi:i,gdbVersion:r,geometry:a,geometryPrecision:d,height:y,layerOption:m,mapExtent:_,maxAllowableOffset:$,returnFieldName:M,returnGeometry:A,returnUnformattedValues:P,returnZ:j,spatialReference:L,timeExtent:F,tolerance:V,width:J}=e.toJSON(),{dynamicLayers:Q,layerDefs:Y,layerIds:te}=poe(e),oe=t&&t.geometry!=null?t.geometry:null,ae={geometryPrecision:d,maxAllowableOffset:$,returnFieldName:M,returnGeometry:A,returnUnformattedValues:P,returnZ:j,tolerance:V},de=oe&&oe.toJSON()||a;if(ae.imageDisplay=`${J},${y},${i}`,r&&(ae.gdbVersion=r),de&&(delete de.spatialReference,ae.geometry=JSON.stringify(de),ae.geometryType=Wf(de)),L?ae.sr=L.wkid||JSON.stringify(L):de&&de.spatialReference?ae.sr=v$(de):_&&_.spatialReference&&(ae.sr=v$(_)),ae.time=F?[F.start,F.end].join(","):null,_){const{xmin:ve,ymin:Ie,xmax:Oe,ymax:Ne}=_;ae.mapExtent=`${ve},${Ie},${Oe},${Ne}`}return Y&&(ae.layerDefs=Y),Q&&!Y&&(ae.dynamicLayers=Q),ae.layers=m==="popup"?"visible":m,te&&!Q&&(ae.layers+=`:${te.join(",")}`),ae}function poe(e){var L,F;const{mapExtent:t,floors:i,width:r,sublayers:a,layerIds:d,layerOption:y,gdbVersion:m}=e,_=(F=(L=a==null?void 0:a.find(V=>V.layer!=null))==null?void 0:L.layer)==null?void 0:F.serviceSublayers,$=y==="popup",M={},A=RN({extent:t,width:r,spatialReference:t==null?void 0:t.spatialReference}),P=[],j=V=>{const J=A===0,Q=V.minScale===0||A<=V.minScale,Y=V.maxScale===0||A>=V.maxScale;if(V.visible&&(J||Q&&Y))if(V.sublayers)V.sublayers.forEach(j);else{if((d==null?void 0:d.includes(V.id))===!1||$&&(!V.popupTemplate||!V.popupEnabled))return;P.unshift(V)}};if(a==null||a.forEach(j),a&&!P.length)M.layerIds=[];else{const V=DN(P,_,m),J=P.map(Q=>{const Y=ov(i,Q);return Q.toExportImageJSON(Y)});if(V)M.dynamicLayers=JSON.stringify(J);else{if(a){let Y=P.map(({id:te})=>te);d&&(Y=Y.filter(te=>d.includes(te))),M.layerIds=Y}else d!=null&&d.length&&(M.layerIds=d);const Q=doe(i,P);if(Q!=null&&Q.length){const Y={};for(const te of Q)te.definitionExpression&&(Y[te.id]=te.definitionExpression);Object.keys(Y).length&&(M.layerDefs=JSON.stringify(Y))}}}return M}function doe(e,t){const i=!!(e!=null&&e.length),r=t.filter(a=>a.definitionExpression!=null||i&&a.floorInfo!=null);return r.length?r.map(a=>{const d=ov(e,a),y=f2(d,a.definitionExpression);return{id:a.id,definitionExpression:y??void 0}}):null}let Zo=class extends pe{constructor(t){super(t),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(t,i){return Us.fromJSON({attributes:{...i.attributes},geometry:{...i.geometry}})}writeFeature(t,i){if(!t)return;const{attributes:r,geometry:a}=t;r&&(i.attributes={...r}),a!=null&&(i.geometry=a.toJSON(),i.geometryType=u3.toJSON(a.type))}};b([S({type:String,json:{write:!0}})],Zo.prototype,"displayFieldName",void 0),b([S({type:Us})],Zo.prototype,"feature",void 0),b([me("feature",["attributes","geometry"])],Zo.prototype,"readFeature",null),b([Se("feature")],Zo.prototype,"writeFeature",null),b([S({type:Number,json:{write:!0}})],Zo.prototype,"layerId",void 0),b([S({type:String,json:{write:!0}})],Zo.prototype,"layerName",void 0),Zo=b([B("esri.rest.support.IdentifyResult")],Zo);const foe=Zo;async function yoe(e,t,i){const r=(t=goe(t)).geometry?[t.geometry]:[],a=pu(e);return a.path+="/identify",rS(r).then(d=>{const y=coe(t,{geometry:d&&d[0]}),m=CN({...a.query,f:"json",...y}),_=Qne(m,i);return Vt(a.path,_).then(moe).then($=>voe($,t.sublayers))})}function moe(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=Boolean(t.exceededTransferLimit),t.results=t.results.map(i=>foe.fromJSON(i)),t}function goe(e){return e=ON.from(e)}function voe(e,t){if(!(t!=null&&t.length))return e;const i=new Map;function r(a){i.set(a.id,a),a.sublayers&&a.sublayers.forEach(r)}t.forEach(r);for(const a of e.results)a.feature.sourceLayer=i.get(a.layerId);return e}let $r=class extends pe{constructor(t){super(t),this.contains=!0,this.dynamicLayerInfos=null,this.gdbVersion=null,this.geometryPrecision=null,this.layerDefinitions=null,this.layerIds=null,this.maxAllowableOffset=null,this.outSpatialReference=null,this.returnGeometry=!1,this.searchFields=null,this.searchText=null}};b([S({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],$r.prototype,"contains",void 0),b([S({type:[Object],json:{read:{source:"dynamicLayers"},write:{target:"dynamicLayers"}}})],$r.prototype,"dynamicLayerInfos",void 0),b([S({type:String,json:{write:!0}})],$r.prototype,"gdbVersion",void 0),b([S({type:Number,json:{write:!0}})],$r.prototype,"geometryPrecision",void 0),b([S({type:[Object],json:{write:!0}})],$r.prototype,"layerDefinitions",void 0),b([S({type:[Number],json:{write:!0}})],$r.prototype,"layerIds",void 0),b([S({type:Number,json:{write:!0}})],$r.prototype,"maxAllowableOffset",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],$r.prototype,"outSpatialReference",void 0),b([S({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],$r.prototype,"returnGeometry",void 0),b([S({type:[String],json:{write:!0}})],$r.prototype,"searchFields",void 0),b([S({type:String,json:{write:!0}})],$r.prototype,"searchText",void 0),$r=b([B("esri.rest.support.FindParameters")],$r),$r.from=yi($r);var P5;let fl=P5=class extends Xf{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new P5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};b([S()],fl.prototype,"displayValueEnabled",void 0),b([S()],fl.prototype,"max",void 0),b([S()],fl.prototype,"min",void 0),b([S()],fl.prototype,"step",void 0),b([S()],fl.prototype,"value",void 0),fl=P5=b([B("esri.support.Action.ActionSlider")],fl);const boe=fl,zN={hide:"hide",hideChildren:"hide-children"};function av(e){if(e)return e.listMode!=null?e.listMode:void 0}function woe(e){if(e)return e.minScale!=null?e.minScale:void 0}function _oe(e){if(e)return e.maxScale!=null?e.maxScale:void 0}function Soe(e){if(!e)return"inherited";const t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof t=="boolean")return t?"independent":"inherited";const i=e.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":e.visibilityMode!=null?e.visibilityMode:"independent"}function VN(e){if(e&&(!("type"in e)||e.type!=="wmts")&&e.listMode!==zN.hideChildren)return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function xoe(e){const t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;const i=t.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function $oe(e){return av(e)!==zN.hide}function Toe(e,t){if(!e||isNaN(t))return!1;const i=woe(e),r=_oe(e),a=i!=null&&!isNaN(i)&&i>0&&t>i,d=r!=null&&!isNaN(r)&&r>0&&t<r;return a||d}function GN(e,t){e&&e.sort((i,r)=>{const a=t.indexOf(i.uid),d=t.indexOf(r.uid);return a>d?-1:a<d?1:0})}function Ioe(e,t){const i=e==null?void 0:e.layer;if(!i)return;const r=VN(i);r&&GN(i.get(r),t)}function b$(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function Vb(e,t){var r;const i=(r=e.layer)==null?void 0:r.uid;return i!=null?t.find(a=>{var d;return((d=a.layer)==null?void 0:d.uid)===i}):null}function Eoe(e){const t=Moe(e)?e:null,i=e==null?void 0:e.parent,r=(i==null?void 0:i.type)==="map-image"?t==null?void 0:t.source:null,a="";return r&&i?{layer:i,title:a,sublayerIds:[r.mapLayerId]}:{layer:e,title:a}}function Moe(e){return!!(e!=null&&e.layer)}function Aoe(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:koe(e);i.push(...r)}}function koe(e){return e.split(",").map(t=>t.trim())}function w$(e){return e&&typeof e.render=="function"}function _ge(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const qN="esri-layer-list-panel",k0=`${qN}__content`,jo={base:qN,content:k0,contentLegend:`${k0}--legend`,contentString:`${k0}--string`,contentElement:`${k0}--html-element`,contentWidget:`${k0}--widget`},Ooe="legends";let Is=class extends Up(rc){constructor(t,i){super(t,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(ke(()=>this.content,t=>this._createLegend(t),kt))}destroy(){this._legend=Wt(this._legend)}get className(){const{image:t}=this,i=this._getFirstWidget();return this._get("className")||(!t&&i?i.iconClass??"":"")}set className(t){this._override("className",t)}get disabled(){var a;const{listItem:t,_legend:i,content:r}=this;return!t||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get title(){const t=this._getFirstWidget();return this._get("title")||((t==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return Ge("div",{class:jo.base},this._renderContents())}_renderContent(t){const{_legend:i,disabled:r}=this;return!t||r?null:t==="legend"&&i?Ge("div",{class:this.classes(jo.content,jo.contentLegend),key:i},i.render()):typeof t=="string"?Ge("div",{class:this.classes(jo.content,jo.contentString),key:t,innerHTML:t}):w$(t)?Ge("div",{class:this.classes(jo.content,jo.contentWidget),key:t},t.render()):t instanceof HTMLElement?Ge("div",{class:this.classes(jo.content,jo.contentElement),key:t,bind:t,afterCreate:this._attachToNode}):null}_renderContents(){const{content:t}=this;return Array.isArray(t)?t.map(i=>this._renderContent(i)):this._renderContent(t)}_getLegendOptions(){const{listItem:t}=this;if(!t)return{};const{layer:i,view:r}=t;return i&&r?{view:r,layerInfos:[Eoe(i)]}:{}}async _createLegend(t){if(!this._hasLegend(t)||this._legend)return;const{default:i}=await be(()=>import("./Legend-222bbfbc.js"),["assets/Legend-222bbfbc.js","assets/EffectView-d311bb0b.js","assets/pixelRangeUtils-cc28ceb4.js","assets/utils-7c7e7983.js","assets/utils-d75b7bae.js","assets/symbolUtils-3d06f842.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-71af9c5e.js","assets/devEnvironmentUtils-5002a058.js"]),{listItem:r}=this,a=new i(this._getLegendOptions());this._legend=a,this.notifyChange("className"),this.notifyChange("title");const d=ke(()=>{var y,m;return[r==null?void 0:r.view,r==null?void 0:r.layer,(y=r==null?void 0:r.layer)==null?void 0:y.source,(m=r==null?void 0:r.layer)==null?void 0:m.parent]},()=>this._updateLegend(a),kt);this.addHandles(d,Ooe),this.scheduleRender()}_hasLegend(t){const i="legend";return t===i||t!=null&&!!Array.isArray(t)&&t.includes(i)}_attachToNode(t){t.appendChild(this)}_updateLegend(t){t.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(t){return t==="legend"?this._legend:w$(t)?t:null}_getFirstWidget(){const{content:t}=this;if(Array.isArray(t)){let i=null;return t.some(r=>{const a=this._getWidget(r);return a&&(i=a),!!a}),i}return this._getWidget(t)}};b([S()],Is.prototype,"_legend",void 0),b([S()],Is.prototype,"className",null),b([S()],Is.prototype,"content",void 0),b([S()],Is.prototype,"disabled",null),b([S()],Is.prototype,"image",void 0),b([S()],Is.prototype,"listItem",void 0),b([S()],Is.prototype,"title",null),b([S()],Is.prototype,"open",void 0),b([S()],Is.prototype,"visible",void 0),Is=b([B("esri.widgets.LayerList.ListItemPanel")],Is);const UN=Is;var bd;const Poe=Le.ofType({key:"type",defaultKeyValue:"button",base:Xf,typeMap:{button:wk,toggle:_k,slider:boe}}),BN=Le.ofType(Poe),fy="layer",Gb="child-list-mode",Coe="hide",Noe="esri.widgets.LayerList.ListItem";let Bt=bd=class extends Up(cu(De)){constructor(e){super(e),this.actionsSections=new BN,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Le.ofType(bd)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([ke(()=>this.layer,e=>this._watchLayerProperties(e),kt),ke(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),kt),ke(()=>this.view,e=>this._updateChildrenView(e),kt),ke(()=>this.panel,e=>this._setListItemOnPanel(e),kt),ke(()=>[this.layer,this.view],()=>this._getLayerView(),kt)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}castPanel(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new UN(e):null}get title(){const e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return(e=this.layer)==null?void 0:e.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return!Toe(this.layer,this.get("view.scale"))}get visibilityMode(){return Soe(this.layer)}clone(){return new bd({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_addChildren(e){if(this.handles.remove(Gb),this.children.removeAll(),!e)return;e.forEach(i=>{this.handles.add(ke(()=>i.listMode,()=>this._addChildren(e)),Gb)});const t=e.filter(i=>av(i)!==Coe);this.children.addMany(this._makeChildren(t))}_watchSublayerChanges(e){e&&this.handles.add(e.on("change",()=>{this._addChildren(e)}),fy)}_initializeChildLayers(e){this._addChildren(e),this._watchSublayerChanges(e)}_makeChildren(e){return e.map(t=>$oe(t)?new bd({layer:t,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Oh).reverse()}_watchLayerProperties(e){if(!this.handles||(this.handles.remove(fy),this.handles.remove(Gb),!e))return;if(this.handles.add(ke(()=>e.listMode,()=>this._watchLayerProperties(e)),fy),av(e)==="hide-children")return void this.children.removeAll();const t=VN(e);t&&this.handles.add(ke(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},kt),fy)}async _getLayerView(){const{layer:e,view:t}=this;if(e&&t)try{const i=await t.whenLayerView(e);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};b([S({type:BN})],Bt.prototype,"actionsSections",void 0),b([S()],Bt.prototype,"actionsOpen",void 0),b([S()],Bt.prototype,"checkPublishStatusEnabled",void 0),b([S({type:Le})],Bt.prototype,"children",void 0),b([S()],Bt.prototype,"childrenSortable",void 0),b([S({readOnly:!0})],Bt.prototype,"connectionStatus",null),b([S({readOnly:!0})],Bt.prototype,"error",null),b([S()],Bt.prototype,"hidden",void 0),b([S({readOnly:!0})],Bt.prototype,"incompatible",null),b([S()],Bt.prototype,"layer",void 0),b([S({readOnly:!0})],Bt.prototype,"layerView",void 0),b([S()],Bt.prototype,"listItemCreatedFunction",void 0),b([S()],Bt.prototype,"open",void 0),b([S({type:UN})],Bt.prototype,"panel",void 0),b([Tt("panel")],Bt.prototype,"castPanel",null),b([S()],Bt.prototype,"parent",void 0),b([S()],Bt.prototype,"sortable",void 0),b([S()],Bt.prototype,"title",null),b([S({readOnly:!0})],Bt.prototype,"publishing",null),b([S({readOnly:!0})],Bt.prototype,"updating",null),b([S()],Bt.prototype,"view",void 0),b([S()],Bt.prototype,"visible",null),b([S({readOnly:!0})],Bt.prototype,"visibleAtCurrentScale",null),b([S({readOnly:!0})],Bt.prototype,"visibilityMode",null),Bt=bd=b([B(Noe)],Bt);const sS=Bt,nn={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},joe="hide",HN=Le.ofType(sS);let yl=class extends Ea.EventedAccessor{constructor(t){super(t),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new HN,this.view=null}initialize(){this.addHandles([ke(()=>{var t;return[this.view,(t=this.view)==null?void 0:t.ready]},()=>this._viewHandles(),kt),ke(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],nn.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const t=this.get("view");return this.get("view.ready")?"ready":t?"loading":"disabled"}triggerAction(t,i){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:i})}moveListItem(t,i,r,a){var j,L;const d=t==null?void 0:t.layer;if(!d)return;const y=(L=(j=this.view)==null?void 0:j.map)==null?void 0:L.layers,m=i?b$(i):y,_=r?b$(r):y;if(!m||!_)return;const{operationalItems:$}=this,M=(i==null?void 0:i.children)||$,A=(r==null?void 0:r.children)||$,P=_.length-a;t.parent=r||null,M.includes(t)&&M.remove(t),m.includes(d)&&m.remove(d),A.includes(t)||A.add(t,P),_.includes(d)||_.add(d,P)}_createLayerViewHandles(t){this.removeHandles(nn.layerViews),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),nn.layerViews)}_createMapLayerHandles(t){this.removeHandles(nn.mapLayers),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),nn.mapLayers)}_createListItem(t){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:a}=this;return new sS({checkPublishStatusEnabled:a,layer:t,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(t){if(t)return t.filter(i=>av(i)!==joe)}_watchLayersListMode(t){this.removeHandles(nn.layerListMode),t&&t.forEach(i=>{"listMode"in i&&this.addHandles(ke(()=>i.listMode,()=>this._compileList()),nn.layerListMode)})}_compileList(){const t=this.get("view.map.layers");this._watchLayersListMode(t);const i=this._getViewableLayers(t);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(t){const{operationalItems:i}=this;t.forEach(r=>{i.find(a=>a.layer===r)||i.add(this._createListItem(r))})}_removeItems(t){const{operationalItems:i}=this,r=[];i.forEach(a=>{a&&t&&t.includes(a.layer)||r.push(a)}),i.removeMany(r)}_sortItems(t){const{operationalItems:i}=this;i.sort((r,a)=>{const d=t.indexOf(r.layer),y=t.indexOf(a.layer);return d>y?-1:d<y?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:t}=this;this.removeHandles([nn.mapLayers,nn.layerViews,nn.viewLayers]),this._recompileList(),t&&t.ready&&this.addHandles([ke(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),kt),ke(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),kt)],nn.viewLayers)}};b([S()],yl.prototype,"checkPublishStatusEnabled",void 0),b([S()],yl.prototype,"listItemCreatedFunction",void 0),b([S({type:HN})],yl.prototype,"operationalItems",void 0),b([S({readOnly:!0})],yl.prototype,"state",null),b([S()],yl.prototype,"view",void 0),yl=b([B("esri.widgets.LayerList.LayerListViewModel")],yl);const WN=yl;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function _$(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function Eo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_$(Object(i),!0).forEach(function(r){Roe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_$(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function Tm(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tm=function(t){return typeof t}:Tm=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function Roe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ta(){return Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ta.apply(this,arguments)}function Loe(e,t){if(e==null)return{};var i={},r=Object.keys(e),a,d;for(d=0;d<r.length;d++)a=r[d],!(t.indexOf(a)>=0)&&(i[a]=e[a]);return i}function Doe(e,t){if(e==null)return{};var i=Loe(e,t),r,a;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)r=d[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Foe="1.15.0";function ya(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var ka=ya(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),c1=ya(/Edge/i),S$=ya(/firefox/i),tf=ya(/safari/i)&&!ya(/chrome/i)&&!ya(/android/i),JN=ya(/iP(ad|od|hone)/i),KN=ya(/chrome/i)&&ya(/android/i),YN={capture:!1,passive:!1};function Nt(e,t,i){e.addEventListener(t,i,!ka&&YN)}function St(e,t,i){e.removeEventListener(t,i,!ka&&YN)}function lv(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function zoe(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function fo(e,t,i,r){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&lv(e,t):lv(e,t))||r&&e===i)return e;if(e===i)break}while(e=zoe(e))}return null}var x$=/\s+/g;function es(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(x$," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(x$," ")}}function Ke(e,t,i){var r=e&&e.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=i+(typeof i=="string"?"":"px")}}function gp(e,t){var i="";if(typeof e=="string")i=e;else do{var r=Ke(e,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function ZN(e,t,i){if(e){var r=e.getElementsByTagName(t),a=0,d=r.length;if(i)for(;a<d;a++)i(r[a],a);return r}return[]}function wo(){var e=document.scrollingElement;return e||document.documentElement}function Vi(e,t,i,r,a){if(!(!e.getBoundingClientRect&&e!==window)){var d,y,m,_,$,M,A;if(e!==window&&e.parentNode&&e!==wo()?(d=e.getBoundingClientRect(),y=d.top,m=d.left,_=d.bottom,$=d.right,M=d.height,A=d.width):(y=0,m=0,_=window.innerHeight,$=window.innerWidth,M=window.innerHeight,A=window.innerWidth),(t||i)&&e!==window&&(a=a||e.parentNode,!ka))do if(a&&a.getBoundingClientRect&&(Ke(a,"transform")!=="none"||i&&Ke(a,"position")!=="static")){var P=a.getBoundingClientRect();y-=P.top+parseInt(Ke(a,"border-top-width")),m-=P.left+parseInt(Ke(a,"border-left-width")),_=y+d.height,$=m+d.width;break}while(a=a.parentNode);if(r&&e!==window){var j=gp(a||e),L=j&&j.a,F=j&&j.d;j&&(y/=F,m/=L,A/=L,M/=F,_=y+M,$=m+A)}return{top:y,left:m,bottom:_,right:$,width:A,height:M}}}function $$(e,t,i){for(var r=Gl(e,!0),a=Vi(e)[t];r;){var d=Vi(r)[i],y=void 0;if(i==="top"||i==="left"?y=a>=d:y=a<=d,!y)return r;if(r===wo())break;r=Gl(r,!1)}return!1}function Dp(e,t,i,r){for(var a=0,d=0,y=e.children;d<y.length;){if(y[d].style.display!=="none"&&y[d]!==Ye.ghost&&(r||y[d]!==Ye.dragged)&&fo(y[d],i.draggable,e,!1)){if(a===t)return y[d];a++}d++}return null}function nS(e,t){for(var i=e.lastElementChild;i&&(i===Ye.ghost||Ke(i,"display")==="none"||t&&!lv(i,t));)i=i.previousElementSibling;return i||null}function ks(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Ye.clone&&(!t||lv(e,t))&&i++;return i}function T$(e){var t=0,i=0,r=wo();if(e)do{var a=gp(e),d=a.a,y=a.d;t+=e.scrollLeft*d,i+=e.scrollTop*y}while(e!==r&&(e=e.parentNode));return[t,i]}function Voe(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i)}return-1}function Gl(e,t){if(!e||!e.getBoundingClientRect)return wo();var i=e,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=Ke(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return wo();if(r||t)return i;r=!0}}while(i=i.parentNode);return wo()}function Goe(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function qb(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var rf;function XN(e,t){return function(){if(!rf){var i=arguments,r=this;i.length===1?e.call(r,i[0]):e.apply(r,i),rf=setTimeout(function(){rf=void 0},t)}}}function qoe(){clearTimeout(rf),rf=void 0}function QN(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function ej(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var as="Sortable"+new Date().getTime();function Uoe(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(Ke(a,"display")==="none"||a===Ye.ghost)){e.push({target:a,rect:Vi(a)});var d=Eo({},e[e.length-1].rect);if(a.thisAnimationDuration){var y=gp(a,!0);y&&(d.top-=y.f,d.left-=y.e)}a.fromRect=d}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(Voe(e,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var d=!1,y=0;e.forEach(function(m){var _=0,$=m.target,M=$.fromRect,A=Vi($),P=$.prevFromRect,j=$.prevToRect,L=m.rect,F=gp($,!0);F&&(A.top-=F.f,A.left-=F.e),$.toRect=A,$.thisAnimationDuration&&qb(P,A)&&!qb(M,A)&&(L.top-A.top)/(L.left-A.left)===(M.top-A.top)/(M.left-A.left)&&(_=Hoe(L,P,j,a.options)),qb(A,M)||($.prevFromRect=M,$.prevToRect=A,_||(_=a.options.animation),a.animate($,L,A,_)),_&&(d=!0,y=Math.max(y,_),clearTimeout($.animationResetTimer),$.animationResetTimer=setTimeout(function(){$.animationTime=0,$.prevFromRect=null,$.fromRect=null,$.prevToRect=null,$.thisAnimationDuration=null},_),$.thisAnimationDuration=_)}),clearTimeout(t),d?t=setTimeout(function(){typeof r=="function"&&r()},y):typeof r=="function"&&r(),e=[]},animate:function(r,a,d,y){if(y){Ke(r,"transition",""),Ke(r,"transform","");var m=gp(this.el),_=m&&m.a,$=m&&m.d,M=(a.left-d.left)/(_||1),A=(a.top-d.top)/($||1);r.animatingX=!!M,r.animatingY=!!A,Ke(r,"transform","translate3d("+M+"px,"+A+"px,0)"),this.forRepaintDummy=Boe(r),Ke(r,"transition","transform "+y+"ms"+(this.options.easing?" "+this.options.easing:"")),Ke(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Ke(r,"transition",""),Ke(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},y)}}}}function Boe(e){return e.offsetWidth}function Hoe(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}var mc=[],Ub={initializeByDefault:!0},p1={mount:function(t){for(var i in Ub)Ub.hasOwnProperty(i)&&!(i in t)&&(t[i]=Ub[i]);mc.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),mc.push(t)},pluginEvent:function(t,i,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var d=t+"Global";mc.forEach(function(y){i[y.pluginName]&&(i[y.pluginName][d]&&i[y.pluginName][d](Eo({sortable:i},r)),i.options[y.pluginName]&&i[y.pluginName][t]&&i[y.pluginName][t](Eo({sortable:i},r)))})},initializePlugins:function(t,i,r,a){mc.forEach(function(m){var _=m.pluginName;if(!(!t.options[_]&&!m.initializeByDefault)){var $=new m(t,i,t.options);$.sortable=t,$.options=t.options,t[_]=$,Ta(r,$.defaults)}});for(var d in t.options)if(t.options.hasOwnProperty(d)){var y=this.modifyOption(t,d,t.options[d]);typeof y<"u"&&(t.options[d]=y)}},getEventProperties:function(t,i){var r={};return mc.forEach(function(a){typeof a.eventProperties=="function"&&Ta(r,a.eventProperties.call(i[a.pluginName],t))}),r},modifyOption:function(t,i,r){var a;return mc.forEach(function(d){t[d.pluginName]&&d.optionListeners&&typeof d.optionListeners[i]=="function"&&(a=d.optionListeners[i].call(t[d.pluginName],r))}),a}};function Woe(e){var t=e.sortable,i=e.rootEl,r=e.name,a=e.targetEl,d=e.cloneEl,y=e.toEl,m=e.fromEl,_=e.oldIndex,$=e.newIndex,M=e.oldDraggableIndex,A=e.newDraggableIndex,P=e.originalEvent,j=e.putSortable,L=e.extraEventProperties;if(t=t||i&&i[as],!!t){var F,V=t.options,J="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ka&&!c1?F=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(F=document.createEvent("Event"),F.initEvent(r,!0,!0)),F.to=y||i,F.from=m||i,F.item=a||i,F.clone=d,F.oldIndex=_,F.newIndex=$,F.oldDraggableIndex=M,F.newDraggableIndex=A,F.originalEvent=P,F.pullMode=j?j.lastPutMode:void 0;var Q=Eo(Eo({},L),p1.getEventProperties(r,t));for(var Y in Q)F[Y]=Q[Y];i&&i.dispatchEvent(F),V[J]&&V[J].call(t,F)}}var Joe=["evt"],Dr=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,d=Doe(r,Joe);p1.pluginEvent.bind(Ye)(t,i,Eo({dragEl:$e,parentEl:wi,ghostEl:rt,rootEl:oi,nextEl:Zu,lastDownEl:Im,cloneEl:fi,cloneHidden:Pl,dragStarted:wd,putSortable:rr,activeSortable:Ye.active,originalEvent:a,oldIndex:ap,oldDraggableIndex:sf,newIndex:ss,newDraggableIndex:Il,hideGhostForTarget:sj,unhideGhostForTarget:nj,cloneNowHidden:function(){Pl=!0},cloneNowShown:function(){Pl=!1},dispatchSortableEvent:function(m){Ar({sortable:i,name:m,originalEvent:a})}},d))};function Ar(e){Woe(Eo({putSortable:rr,cloneEl:fi,targetEl:$e,rootEl:oi,oldIndex:ap,oldDraggableIndex:sf,newIndex:ss,newDraggableIndex:Il},e))}var $e,wi,rt,oi,Zu,Im,fi,Pl,ap,ss,sf,Il,yy,rr,Gc=!1,uv=!1,hv=[],_u,on,Bb,Hb,I$,E$,wd,gc,nf,of=!1,my=!1,Em,lr,Wb=[],C5=!1,cv=[],y2=typeof document<"u",gy=JN,M$=c1||ka?"cssFloat":"float",Koe=y2&&!KN&&!JN&&"draggable"in document.createElement("div"),tj=function(){if(y2){if(ka)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),ij=function(t,i){var r=Ke(t),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),d=Dp(t,0,i),y=Dp(t,1,i),m=d&&Ke(d),_=y&&Ke(y),$=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Vi(d).width,M=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+Vi(y).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(d&&m.float&&m.float!=="none"){var A=m.float==="left"?"left":"right";return y&&(_.clear==="both"||_.clear===A)?"vertical":"horizontal"}return d&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||$>=a&&r[M$]==="none"||y&&r[M$]==="none"&&$+M>a)?"vertical":"horizontal"},Yoe=function(t,i,r){var a=r?t.left:t.top,d=r?t.right:t.bottom,y=r?t.width:t.height,m=r?i.left:i.top,_=r?i.right:i.bottom,$=r?i.width:i.height;return a===m||d===_||a+y/2===m+$/2},Zoe=function(t,i){var r;return hv.some(function(a){var d=a[as].options.emptyInsertThreshold;if(!(!d||nS(a))){var y=Vi(a),m=t>=y.left-d&&t<=y.right+d,_=i>=y.top-d&&i<=y.bottom+d;if(m&&_)return r=a}}),r},rj=function(t){function i(d,y){return function(m,_,$,M){var A=m.options.group.name&&_.options.group.name&&m.options.group.name===_.options.group.name;if(d==null&&(y||A))return!0;if(d==null||d===!1)return!1;if(y&&d==="clone")return d;if(typeof d=="function")return i(d(m,_,$,M),y)(m,_,$,M);var P=(y?m:_).options.group.name;return d===!0||typeof d=="string"&&d===P||d.join&&d.indexOf(P)>-1}}var r={},a=t.group;(!a||Tm(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=i(a.pull,!0),r.checkPut=i(a.put),r.revertClone=a.revertClone,t.group=r},sj=function(){!tj&&rt&&Ke(rt,"display","none")},nj=function(){!tj&&rt&&Ke(rt,"display","")};y2&&!KN&&document.addEventListener("click",function(e){if(uv)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),uv=!1,!1},!0);var Su=function(t){if($e){t=t.touches?t.touches[0]:t;var i=Zoe(t.clientX,t.clientY);if(i){var r={};for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[as]._onDragOver(r)}}},Xoe=function(t){$e&&$e.parentNode[as]._isOutsideThisEl(t.target)};function Ye(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ta({},t),e[as]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ij(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(y,m){y.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ye.supportPointer!==!1&&"PointerEvent"in window&&!tf,emptyInsertThreshold:5};p1.initializePlugins(this,e,i);for(var r in i)!(r in t)&&(t[r]=i[r]);rj(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:Koe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Nt(e,"pointerdown",this._onTapStart):(Nt(e,"mousedown",this._onTapStart),Nt(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Nt(e,"dragover",this),Nt(e,"dragenter",this)),hv.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ta(this,Uoe())}Ye.prototype={constructor:Ye,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(gc=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,$e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,r=this.el,a=this.options,d=a.preventOnFilter,y=t.type,m=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,_=(m||t).target,$=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||_,M=a.filter;if(oae(r),!$e&&!(/mousedown|pointerdown/.test(y)&&t.button!==0||a.disabled)&&!$.isContentEditable&&!(!this.nativeDraggable&&tf&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=fo(_,a.draggable,r,!1),!(_&&_.animated)&&Im!==_)){if(ap=ks(_),sf=ks(_,a.draggable),typeof M=="function"){if(M.call(this,t,_,this)){Ar({sortable:i,rootEl:$,name:"filter",targetEl:_,toEl:r,fromEl:r}),Dr("filter",i,{evt:t}),d&&t.cancelable&&t.preventDefault();return}}else if(M&&(M=M.split(",").some(function(A){if(A=fo($,A.trim(),r,!1),A)return Ar({sortable:i,rootEl:A,name:"filter",targetEl:_,fromEl:r,toEl:r}),Dr("filter",i,{evt:t}),!0}),M)){d&&t.cancelable&&t.preventDefault();return}a.handle&&!fo($,a.handle,r,!1)||this._prepareDragStart(t,m,_)}}},_prepareDragStart:function(t,i,r){var a=this,d=a.el,y=a.options,m=d.ownerDocument,_;if(r&&!$e&&r.parentNode===d){var $=Vi(r);if(oi=d,$e=r,wi=$e.parentNode,Zu=$e.nextSibling,Im=r,yy=y.group,Ye.dragged=$e,_u={target:$e,clientX:(i||t).clientX,clientY:(i||t).clientY},I$=_u.clientX-$.left,E$=_u.clientY-$.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,$e.style["will-change"]="all",_=function(){if(Dr("delayEnded",a,{evt:t}),Ye.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!S$&&a.nativeDraggable&&($e.draggable=!0),a._triggerDragStart(t,i),Ar({sortable:a,name:"choose",originalEvent:t}),es($e,y.chosenClass,!0)},y.ignore.split(",").forEach(function(M){ZN($e,M.trim(),Jb)}),Nt(m,"dragover",Su),Nt(m,"mousemove",Su),Nt(m,"touchmove",Su),Nt(m,"mouseup",a._onDrop),Nt(m,"touchend",a._onDrop),Nt(m,"touchcancel",a._onDrop),S$&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$e.draggable=!0),Dr("delayStart",this,{evt:t}),y.delay&&(!y.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(c1||ka))){if(Ye.eventCanceled){this._onDrop();return}Nt(m,"mouseup",a._disableDelayedDrag),Nt(m,"touchend",a._disableDelayedDrag),Nt(m,"touchcancel",a._disableDelayedDrag),Nt(m,"mousemove",a._delayedDragTouchMoveHandler),Nt(m,"touchmove",a._delayedDragTouchMoveHandler),y.supportPointer&&Nt(m,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(_,y.delay)}else _()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$e&&Jb($e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;St(t,"mouseup",this._disableDelayedDrag),St(t,"touchend",this._disableDelayedDrag),St(t,"touchcancel",this._disableDelayedDrag),St(t,"mousemove",this._delayedDragTouchMoveHandler),St(t,"touchmove",this._delayedDragTouchMoveHandler),St(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?Nt(document,"pointermove",this._onTouchMove):i?Nt(document,"touchmove",this._onTouchMove):Nt(document,"mousemove",this._onTouchMove):(Nt($e,"dragend",this),Nt(oi,"dragstart",this._onDragStart));try{document.selection?Mm(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(Gc=!1,oi&&$e){Dr("dragStarted",this,{evt:i}),this.nativeDraggable&&Nt(document,"dragover",Xoe);var r=this.options;!t&&es($e,r.dragClass,!1),es($e,r.ghostClass,!0),Ye.active=this,t&&this._appendGhost(),Ar({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(on){this._lastX=on.clientX,this._lastY=on.clientY,sj();for(var t=document.elementFromPoint(on.clientX,on.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(on.clientX,on.clientY),t!==i);)i=t;if($e.parentNode[as]._isOutsideThisEl(t),i)do{if(i[as]){var r=void 0;if(r=i[as]._onDragOver({clientX:on.clientX,clientY:on.clientY,target:t,rootEl:i}),r&&!this.options.dragoverBubble)break}t=i}while(i=i.parentNode);nj()}},_onTouchMove:function(t){if(_u){var i=this.options,r=i.fallbackTolerance,a=i.fallbackOffset,d=t.touches?t.touches[0]:t,y=rt&&gp(rt,!0),m=rt&&y&&y.a,_=rt&&y&&y.d,$=gy&&lr&&T$(lr),M=(d.clientX-_u.clientX+a.x)/(m||1)+($?$[0]-Wb[0]:0)/(m||1),A=(d.clientY-_u.clientY+a.y)/(_||1)+($?$[1]-Wb[1]:0)/(_||1);if(!Ye.active&&!Gc){if(r&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(rt){y?(y.e+=M-(Bb||0),y.f+=A-(Hb||0)):y={a:1,b:0,c:0,d:1,e:M,f:A};var P="matrix(".concat(y.a,",").concat(y.b,",").concat(y.c,",").concat(y.d,",").concat(y.e,",").concat(y.f,")");Ke(rt,"webkitTransform",P),Ke(rt,"mozTransform",P),Ke(rt,"msTransform",P),Ke(rt,"transform",P),Bb=M,Hb=A,on=d}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!rt){var t=this.options.fallbackOnBody?document.body:oi,i=Vi($e,!0,gy,!0,t),r=this.options;if(gy){for(lr=t;Ke(lr,"position")==="static"&&Ke(lr,"transform")==="none"&&lr!==document;)lr=lr.parentNode;lr!==document.body&&lr!==document.documentElement?(lr===document&&(lr=wo()),i.top+=lr.scrollTop,i.left+=lr.scrollLeft):lr=wo(),Wb=T$(lr)}rt=$e.cloneNode(!0),es(rt,r.ghostClass,!1),es(rt,r.fallbackClass,!0),es(rt,r.dragClass,!0),Ke(rt,"transition",""),Ke(rt,"transform",""),Ke(rt,"box-sizing","border-box"),Ke(rt,"margin",0),Ke(rt,"top",i.top),Ke(rt,"left",i.left),Ke(rt,"width",i.width),Ke(rt,"height",i.height),Ke(rt,"opacity","0.8"),Ke(rt,"position",gy?"absolute":"fixed"),Ke(rt,"zIndex","100000"),Ke(rt,"pointerEvents","none"),Ye.ghost=rt,t.appendChild(rt),Ke(rt,"transform-origin",I$/parseInt(rt.style.width)*100+"% "+E$/parseInt(rt.style.height)*100+"%")}},_onDragStart:function(t,i){var r=this,a=t.dataTransfer,d=r.options;if(Dr("dragStart",this,{evt:t}),Ye.eventCanceled){this._onDrop();return}Dr("setupClone",this),Ye.eventCanceled||(fi=ej($e),fi.removeAttribute("id"),fi.draggable=!1,fi.style["will-change"]="",this._hideClone(),es(fi,this.options.chosenClass,!1),Ye.clone=fi),r.cloneId=Mm(function(){Dr("clone",r),!Ye.eventCanceled&&(r.options.removeCloneOnHide||oi.insertBefore(fi,$e),r._hideClone(),Ar({sortable:r,name:"clone"}))}),!i&&es($e,d.dragClass,!0),i?(uv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(St(document,"mouseup",r._onDrop),St(document,"touchend",r._onDrop),St(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",d.setData&&d.setData.call(r,a,$e)),Nt(document,"drop",r),Ke($e,"transform","translateZ(0)")),Gc=!0,r._dragStartId=Mm(r._dragStarted.bind(r,i,t)),Nt(document,"selectstart",r),wd=!0,tf&&Ke(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,r=t.target,a,d,y,m=this.options,_=m.group,$=Ye.active,M=yy===_,A=m.sort,P=rr||$,j,L=this,F=!1;if(C5)return;function V(ht,xr){Dr(ht,L,Eo({evt:t,isOwner:M,axis:j?"vertical":"horizontal",revert:y,dragRect:a,targetRect:d,canSort:A,fromSortable:P,target:r,completed:Q,onMove:function(fu,h0){return vy(oi,i,$e,a,fu,Vi(fu),t,h0)},changed:Y},xr))}function J(){V("dragOverAnimationCapture"),L.captureAnimationState(),L!==P&&P.captureAnimationState()}function Q(ht){return V("dragOverCompleted",{insertion:ht}),ht&&(M?$._hideClone():$._showClone(L),L!==P&&(es($e,rr?rr.options.ghostClass:$.options.ghostClass,!1),es($e,m.ghostClass,!0)),rr!==L&&L!==Ye.active?rr=L:L===Ye.active&&rr&&(rr=null),P===L&&(L._ignoreWhileAnimating=r),L.animateAll(function(){V("dragOverAnimationComplete"),L._ignoreWhileAnimating=null}),L!==P&&(P.animateAll(),P._ignoreWhileAnimating=null)),(r===$e&&!$e.animated||r===i&&!r.animated)&&(gc=null),!m.dragoverBubble&&!t.rootEl&&r!==document&&($e.parentNode[as]._isOutsideThisEl(t.target),!ht&&Su(t)),!m.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),F=!0}function Y(){ss=ks($e),Il=ks($e,m.draggable),Ar({sortable:L,name:"change",toEl:i,newIndex:ss,newDraggableIndex:Il,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=fo(r,m.draggable,i,!0),V("dragOver"),Ye.eventCanceled)return F;if($e.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||L._ignoreWhileAnimating===r)return Q(!1);if(uv=!1,$&&!m.disabled&&(M?A||(y=wi!==oi):rr===this||(this.lastPutMode=yy.checkPull(this,$,$e,t))&&_.checkPut(this,$,$e,t))){if(j=this._getDirection(t,r)==="vertical",a=Vi($e),V("dragOverValid"),Ye.eventCanceled)return F;if(y)return wi=oi,J(),this._hideClone(),V("revert"),Ye.eventCanceled||(Zu?oi.insertBefore($e,Zu):oi.appendChild($e)),Q(!0);var te=nS(i,m.draggable);if(!te||iae(t,j,this)&&!te.animated){if(te===$e)return Q(!1);if(te&&i===t.target&&(r=te),r&&(d=Vi(r)),vy(oi,i,$e,a,r,d,t,!!r)!==!1)return J(),te&&te.nextSibling?i.insertBefore($e,te.nextSibling):i.appendChild($e),wi=i,Y(),Q(!0)}else if(te&&tae(t,j,this)){var oe=Dp(i,0,m,!0);if(oe===$e)return Q(!1);if(r=oe,d=Vi(r),vy(oi,i,$e,a,r,d,t,!1)!==!1)return J(),i.insertBefore($e,oe),wi=i,Y(),Q(!0)}else if(r.parentNode===i){d=Vi(r);var ae=0,de,ve=$e.parentNode!==i,Ie=!Yoe($e.animated&&$e.toRect||a,r.animated&&r.toRect||d,j),Oe=j?"top":"left",Ne=$$(r,"top","top")||$$($e,"top","top"),Re=Ne?Ne.scrollTop:void 0;gc!==r&&(de=d[Oe],of=!1,my=!Ie&&m.invertSwap||ve),ae=rae(t,r,d,j,Ie?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,my,gc===r);var We;if(ae!==0){var Pe=ks($e);do Pe-=ae,We=wi.children[Pe];while(We&&(Ke(We,"display")==="none"||We===rt))}if(ae===0||We===r)return Q(!1);gc=r,nf=ae;var Gt=r.nextElementSibling,gi=!1;gi=ae===1;var qt=vy(oi,i,$e,a,r,d,t,gi);if(qt!==!1)return(qt===1||qt===-1)&&(gi=qt===1),C5=!0,setTimeout(eae,30),J(),gi&&!Gt?i.appendChild($e):r.parentNode.insertBefore($e,gi?Gt:r),Ne&&QN(Ne,0,Re-Ne.scrollTop),wi=$e.parentNode,de!==void 0&&!my&&(Em=Math.abs(de-Vi(r)[Oe])),Y(),Q(!0)}if(i.contains($e))return Q(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){St(document,"mousemove",this._onTouchMove),St(document,"touchmove",this._onTouchMove),St(document,"pointermove",this._onTouchMove),St(document,"dragover",Su),St(document,"mousemove",Su),St(document,"touchmove",Su)},_offUpEvents:function(){var t=this.el.ownerDocument;St(t,"mouseup",this._onDrop),St(t,"touchend",this._onDrop),St(t,"pointerup",this._onDrop),St(t,"touchcancel",this._onDrop),St(document,"selectstart",this)},_onDrop:function(t){var i=this.el,r=this.options;if(ss=ks($e),Il=ks($e,r.draggable),Dr("drop",this,{evt:t}),wi=$e&&$e.parentNode,ss=ks($e),Il=ks($e,r.draggable),Ye.eventCanceled){this._nulling();return}Gc=!1,my=!1,of=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),N5(this.cloneId),N5(this._dragStartId),this.nativeDraggable&&(St(document,"drop",this),St(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),tf&&Ke(document.body,"user-select",""),Ke($e,"transform",""),t&&(wd&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),rt&&rt.parentNode&&rt.parentNode.removeChild(rt),(oi===wi||rr&&rr.lastPutMode!=="clone")&&fi&&fi.parentNode&&fi.parentNode.removeChild(fi),$e&&(this.nativeDraggable&&St($e,"dragend",this),Jb($e),$e.style["will-change"]="",wd&&!Gc&&es($e,rr?rr.options.ghostClass:this.options.ghostClass,!1),es($e,this.options.chosenClass,!1),Ar({sortable:this,name:"unchoose",toEl:wi,newIndex:null,newDraggableIndex:null,originalEvent:t}),oi!==wi?(ss>=0&&(Ar({rootEl:wi,name:"add",toEl:wi,fromEl:oi,originalEvent:t}),Ar({sortable:this,name:"remove",toEl:wi,originalEvent:t}),Ar({rootEl:wi,name:"sort",toEl:wi,fromEl:oi,originalEvent:t}),Ar({sortable:this,name:"sort",toEl:wi,originalEvent:t})),rr&&rr.save()):ss!==ap&&ss>=0&&(Ar({sortable:this,name:"update",toEl:wi,originalEvent:t}),Ar({sortable:this,name:"sort",toEl:wi,originalEvent:t})),Ye.active&&((ss==null||ss===-1)&&(ss=ap,Il=sf),Ar({sortable:this,name:"end",toEl:wi,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Dr("nulling",this),oi=$e=wi=rt=Zu=fi=Im=Pl=_u=on=wd=ss=Il=ap=sf=gc=nf=rr=yy=Ye.dragged=Ye.ghost=Ye.clone=Ye.active=null,cv.forEach(function(t){t.checked=!0}),cv.length=Bb=Hb=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":$e&&(this._onDragOver(t),Qoe(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,r=this.el.children,a=0,d=r.length,y=this.options;a<d;a++)i=r[a],fo(i,y.draggable,this.el,!1)&&t.push(i.getAttribute(y.dataIdAttr)||nae(i));return t},sort:function(t,i){var r={},a=this.el;this.toArray().forEach(function(d,y){var m=a.children[y];fo(m,this.options.draggable,a,!1)&&(r[d]=m)},this),i&&this.captureAnimationState(),t.forEach(function(d){r[d]&&(a.removeChild(r[d]),a.appendChild(r[d]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return fo(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var r=this.options;if(i===void 0)return r[t];var a=p1.modifyOption(this,t,i);typeof a<"u"?r[t]=a:r[t]=i,t==="group"&&rj(r)},destroy:function(){Dr("destroy",this);var t=this.el;t[as]=null,St(t,"mousedown",this._onTapStart),St(t,"touchstart",this._onTapStart),St(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(St(t,"dragover",this),St(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),hv.splice(hv.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Pl){if(Dr("hideClone",this),Ye.eventCanceled)return;Ke(fi,"display","none"),this.options.removeCloneOnHide&&fi.parentNode&&fi.parentNode.removeChild(fi),Pl=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Pl){if(Dr("showClone",this),Ye.eventCanceled)return;$e.parentNode==oi&&!this.options.group.revertClone?oi.insertBefore(fi,$e):Zu?oi.insertBefore(fi,Zu):oi.appendChild(fi),this.options.group.revertClone&&this.animate($e,fi),Ke(fi,"display",""),Pl=!1}}};function Qoe(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function vy(e,t,i,r,a,d,y,m){var _,$=e[as],M=$.options.onMove,A;return window.CustomEvent&&!ka&&!c1?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=t,_.from=e,_.dragged=i,_.draggedRect=r,_.related=a||t,_.relatedRect=d||Vi(t),_.willInsertAfter=m,_.originalEvent=y,e.dispatchEvent(_),M&&(A=M.call($,_,y)),A}function Jb(e){e.draggable=!1}function eae(){C5=!1}function tae(e,t,i){var r=Vi(Dp(i.el,0,i.options,!0)),a=10;return t?e.clientX<r.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-a||e.clientY<r.bottom&&e.clientX<r.left}function iae(e,t,i){var r=Vi(nS(i.el,i.options.draggable)),a=10;return t?e.clientX>r.right+a||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+a}function rae(e,t,i,r,a,d,y,m){var _=r?e.clientY:e.clientX,$=r?i.height:i.width,M=r?i.top:i.left,A=r?i.bottom:i.right,P=!1;if(!y){if(m&&Em<$*a){if(!of&&(nf===1?_>M+$*d/2:_<A-$*d/2)&&(of=!0),of)P=!0;else if(nf===1?_<M+Em:_>A-Em)return-nf}else if(_>M+$*(1-a)/2&&_<A-$*(1-a)/2)return sae(t)}return P=P||y,P&&(_<M+$*d/2||_>A-$*d/2)?_>M+$/2?1:-1:0}function sae(e){return ks($e)<ks(e)?1:-1}function nae(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function oae(e){cv.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var r=t[i];r.checked&&cv.push(r)}}function Mm(e){return setTimeout(e,0)}function N5(e){return clearTimeout(e)}y2&&Nt(document,"touchmove",function(e){(Ye.active||Gc)&&e.cancelable&&e.preventDefault()});Ye.utils={on:Nt,off:St,css:Ke,find:ZN,is:function(t,i){return!!fo(t,i,t,!1)},extend:Goe,throttle:XN,closest:fo,toggleClass:es,clone:ej,index:ks,nextTick:Mm,cancelNextTick:N5,detectDirection:ij,getChild:Dp};Ye.get=function(e){return e[as]};Ye.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ye.utils=Eo(Eo({},Ye.utils),r.utils)),p1.mount(r)})};Ye.create=function(e,t){return new Ye(e,t)};Ye.version=Foe;var Oi=[],_d,j5,R5=!1,Kb,Yb,pv,Sd;function aae(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?Nt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Nt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Nt(document,"touchmove",this._handleFallbackAutoScroll):Nt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?St(document,"dragover",this._handleAutoScroll):(St(document,"pointermove",this._handleFallbackAutoScroll),St(document,"touchmove",this._handleFallbackAutoScroll),St(document,"mousemove",this._handleFallbackAutoScroll)),A$(),Am(),qoe()},nulling:function(){pv=j5=_d=R5=Sd=Kb=Yb=null,Oi.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var a=this,d=(i.touches?i.touches[0]:i).clientX,y=(i.touches?i.touches[0]:i).clientY,m=document.elementFromPoint(d,y);if(pv=i,r||this.options.forceAutoScrollFallback||c1||ka||tf){Zb(i,this.options,m,r);var _=Gl(m,!0);R5&&(!Sd||d!==Kb||y!==Yb)&&(Sd&&A$(),Sd=setInterval(function(){var $=Gl(document.elementFromPoint(d,y),!0);$!==_&&(_=$,Am()),Zb(i,a.options,$,r)},10),Kb=d,Yb=y)}else{if(!this.options.bubbleScroll||Gl(m,!0)===wo()){Am();return}Zb(i,this.options,Gl(m,!1),!1)}}},Ta(e,{pluginName:"scroll",initializeByDefault:!0})}function Am(){Oi.forEach(function(e){clearInterval(e.pid)}),Oi=[]}function A$(){clearInterval(Sd)}var Zb=XN(function(e,t,i,r){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,d=(e.touches?e.touches[0]:e).clientY,y=t.scrollSensitivity,m=t.scrollSpeed,_=wo(),$=!1,M;j5!==i&&(j5=i,Am(),_d=t.scroll,M=t.scrollFn,_d===!0&&(_d=Gl(i,!0)));var A=0,P=_d;do{var j=P,L=Vi(j),F=L.top,V=L.bottom,J=L.left,Q=L.right,Y=L.width,te=L.height,oe=void 0,ae=void 0,de=j.scrollWidth,ve=j.scrollHeight,Ie=Ke(j),Oe=j.scrollLeft,Ne=j.scrollTop;j===_?(oe=Y<de&&(Ie.overflowX==="auto"||Ie.overflowX==="scroll"||Ie.overflowX==="visible"),ae=te<ve&&(Ie.overflowY==="auto"||Ie.overflowY==="scroll"||Ie.overflowY==="visible")):(oe=Y<de&&(Ie.overflowX==="auto"||Ie.overflowX==="scroll"),ae=te<ve&&(Ie.overflowY==="auto"||Ie.overflowY==="scroll"));var Re=oe&&(Math.abs(Q-a)<=y&&Oe+Y<de)-(Math.abs(J-a)<=y&&!!Oe),We=ae&&(Math.abs(V-d)<=y&&Ne+te<ve)-(Math.abs(F-d)<=y&&!!Ne);if(!Oi[A])for(var Pe=0;Pe<=A;Pe++)Oi[Pe]||(Oi[Pe]={});(Oi[A].vx!=Re||Oi[A].vy!=We||Oi[A].el!==j)&&(Oi[A].el=j,Oi[A].vx=Re,Oi[A].vy=We,clearInterval(Oi[A].pid),(Re!=0||We!=0)&&($=!0,Oi[A].pid=setInterval(function(){r&&this.layer===0&&Ye.active._onTouchMove(pv);var Gt=Oi[this.layer].vy?Oi[this.layer].vy*m:0,gi=Oi[this.layer].vx?Oi[this.layer].vx*m:0;typeof M=="function"&&M.call(Ye.dragged.parentNode[as],gi,Gt,e,pv,Oi[this.layer].el)!=="continue"||QN(Oi[this.layer].el,gi,Gt)}.bind({layer:A}),24))),A++}while(t.bubbleScroll&&P!==_&&(P=Gl(P,!1)));R5=$}},30),oj=function(t){var i=t.originalEvent,r=t.putSortable,a=t.dragEl,d=t.activeSortable,y=t.dispatchSortableEvent,m=t.hideGhostForTarget,_=t.unhideGhostForTarget;if(i){var $=r||d;m();var M=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,A=document.elementFromPoint(M.clientX,M.clientY);_(),$&&!$.el.contains(A)&&(y("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function oS(){}oS.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=Dp(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(i,a):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:oj};Ta(oS,{pluginName:"revertOnSpill"});function aS(){}aS.prototype={onSpill:function(t){var i=t.dragEl,r=t.putSortable,a=r||this.sortable;a.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),a.animateAll()},drop:oj};Ta(aS,{pluginName:"removeOnSpill"});Ye.mount(new aae);Ye.mount(aS,oS);function k$(e,t,i){e.splice(i,0,e.splice(t,1)[0])}const lae="esri-layerlist-new-ui",uae=Le.ofType(sS),O$="data-sort-filter",P$="data-layer-uid",hae="layerUid",_i="esri-layer-list",si=`${_i}__item`,Ae={base:`${_i} esri-widget esri-widget--panel`,newUI:`${_i}--new-ui`,noItems:`${_i}__no-items`,list:`${_i}__list`,listRoot:`${_i}__list--root`,listExclusive:`${_i}__list--exclusive`,listInherited:`${_i}__list--inherited`,listIndependent:`${_i}__list--independent`,item:si,itemContent:`${si}-content`,itemMessage:`${si}--has-message`,itemInvisible:`${si}--invisible`,itemInvisibleAtScale:`${si}--invisible-at-scale`,itemChildren:`${si}--has-children`,itemSelectable:`${si}--selectable`,itemContainer:`${si}-container`,actionsMenu:`${si}-actions-menu`,actionsMenuItem:`${si}-actions-menu-item`,actionsMenuItemActive:`${si}-actions-menu-item--active`,actions:`${si}-actions`,actionsList:`${si}-actions-list`,action:`${si}-action`,actionIcon:`${si}-action-icon`,actionImage:`${si}-action-image`,actionTitle:`${si}-action-title`,actionToggle:`${_i}__action-toggle`,actionToggleOn:`${_i}__action-toggle--on`,label:`${si}-label`,message:`${si}-message`,title:`${si}-title`,statusIndicator:`${_i}__status-indicator`,publishing:`${_i}__publishing`,updating:`${_i}__updating`,connectionStatus:`${_i}__connection-status`,connectionStatusConnected:`${_i}__connection-status--connected`,toggleVisible:`${si}-toggle`,toggleVisibleIcon:`${si}-toggle-icon`,toggleIcon:`${si}-toggle-icon`,radioIcon:`${si}-radio-icon`,childToggle:`${_i}__child-toggle`,childToggleOpen:`${_i}__child-toggle--open`,childOpened:`${_i}__child-toggle-icon--opened`,childClosed:`${_i}__child-toggle-icon--closed`,childClosed_RTL:`${_i}__child-toggle-icon--closed-rtl`,sortableChosen:`${_i}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},Wa={actions:"actions",actionSection:"action-section",items:"items"},O0={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function aj(e){const{actionsOpen:t,children:i}=e;t&&(e.actionsOpen=!1),i.forEach(r=>aj(r))}const Xb="root",C$={statusIndicators:!0,errors:!1};let Zt=class extends rc{constructor(t,i){super(t,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=le(lae),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=Ae.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new uae,this.viewModel=new WN,this.visibleElements={...C$},this._onSortableSort=({to:r,from:a,item:d,newIndex:y})=>{a&&r&&(a===r?this._sortLayers(this._sortableMap.get(a.dataset.group)):this._moveLayerFromChildList({to:r,from:a,item:d,newIndex:y}))},this._sortableCanSort=(r,a)=>!(!r.el.dataset.group||!a.el.dataset.group),this._sortableCanPull=(r,a,d)=>{const{listItemCanGiveFunction:y}=this,m={selected:Hi(d),from:Hi(a.el),to:Hi(r.el)};return!this._sortableCanSort(r,a)||typeof y!="function"||y.call(null,m)},this._sortableCanPut=(r,a,d)=>{const{listItemCanReceiveFunction:y}=this,m={selected:Hi(d),from:Hi(a.el),to:Hi(r.el)};return!this._sortableCanSort(r,a)||typeof y!="function"||y.call(null,m)},this._onSortableEnd=({oldIndex:r,from:a,to:d,item:y})=>{a!==d&&a.insertBefore(y,a.children[r])}}initialize(){const t=this.operationalItems;this._setVisibleItems(t),this.addHandles([Pp(()=>this.operationalItems,"change",()=>this._itemsChanged(t)),ke(()=>this.visibleElements,()=>this._itemsChanged(t)),ke(()=>this.selectionEnabled,()=>this._toggleAllSorting(),kt)])}loadDependencies(){return wse({icon:()=>be(()=>import("./calcite-icon-93ade6c9.js"),["assets/calcite-icon-93ade6c9.js","assets/icon-3cb4e8eb.js","assets/observers-279029a9.js"]),tooltip:()=>be(()=>import("./calcite-tooltip-4dc657aa.js"),["assets/calcite-tooltip-4dc657aa.js","assets/FloatingArrow-70738f47.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-28e918f7.js"])})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(t){this.viewModel.listItemCreatedFunction=t}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(t){this.viewModel.operationalItems=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...C$,...t}}triggerAction(t,i){return this.viewModel.triggerAction(t,i)}render(){var m;const{visibleItems:t,_newUI:i}=this,r=(m=this.viewModel)==null?void 0:m.state,a={[Ae.newUI]:i,[Ae.hidden]:r==="loading",[Ae.disabled]:r==="disabled"},d=this.renderItemTooltips(),y=this.renderItems();return Ge("div",{class:this.classes(Ae.base,a)},t.length?[d,y]:this.renderNoItems())}renderItemTooltip(t){const{_tooltipReferenceMap:i,messages:r}=this;return t?Ge("calcite-tooltip",{label:r.layerIncompatible,referenceElement:i.get(t.uid)},r.layerIncompatibleTooltip):null}renderItemTooltipNodes(t){const{incompatible:i,children:r}=t;return[i?this.renderItemTooltip(t):null,...!i&&r?r.toArray().map(a=>this.renderItemTooltipNodes(a)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(t=>this.renderItemTooltipNodes(t))??[]}renderNoItems(){return Ge("div",{class:Ae.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:t,selectionEnabled:i,messages:r}=this;return Ge("ul",{"aria-label":r.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Xb,bind:this,class:this.classes(Ae.list,Ae.listRoot,Ae.listIndependent)},t.map(a=>this.renderItem(a,null)).toArray())}renderActionsMenuIcon(t,i){const{messagesCommon:r}=this,a={[Ae.actionsMenuItemActive]:t.actionsOpen};return Ge("div",{key:"actions-menu-toggle","data-item":t,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Ae.actionsMenuItem,a),tabindex:"0",role:"button","aria-controls":i,"aria-label":r.options,title:r.options},Ge("span",{"aria-hidden":"true",class:Ae.iconEllipses}))}renderActionsMenu(t,i,r,a){const{panel:d}=t,y=d&&d.visible?this.renderPanelButton(d):null,m=r===1&&this._getSingleActionButton(i),_=m?this.renderAction({item:t,action:m,singleAction:!0}):null,$=!m&&r?this.renderActionsMenuIcon(t,a):null;return $||y||m?Ge("div",{key:"actions-menu",class:Ae.actionsMenu},y,_,$):null}renderChildList(t,i){var A;const{selectionEnabled:r}=this,{visibilityMode:a,children:d}=t,y=this._hasChildren(t),m=!y&&r&&((A=t.layer)==null?void 0:A.type)==="group",{exclusive:_,inherited:$}=O0,M={[Ae.listExclusive]:a===_,[Ae.listInherited]:a===$,[Ae.listIndependent]:a!==$&&a!==_};return y||m?Ge("ul",{bind:this,key:"list-items",id:i,"data-group":t.uid,"data-item":t,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(Ae.list,M),"aria-expanded":t.open?"true":"false",role:r?"listbox":a===_?"radiogroup":"group",hidden:!t.open&&!m||null},d==null?void 0:d.map(P=>this.renderItem(P,t)).toArray()):null}renderChildrenToggle(t,i){const{messagesCommon:r}=this,a=this._hasChildren(t),d={[Ae.childToggleOpen]:t.open},y=t.open?r.collapse:r.expand;return a?Ge("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":t,key:"toggle-children",class:this.classes(Ae.childToggle,d),tabindex:"0",role:"button","aria-controls":i,"aria-label":y,title:y},Ge("span",{"aria-hidden":"true",class:this.classes(Ae.childClosed,Ae.iconRightArrow)}),Ge("span",{"aria-hidden":"true",class:this.classes(Ae.childOpened,Ae.iconDownArrow)}),Ge("span",{"aria-hidden":"true",class:this.classes(Ae.childClosed_RTL,Ae.iconLeftArrow)})):null}renderItemMessage(t){return t.error?Ge("div",{key:"esri-layer-list__error",class:Ae.message,role:"alert"},Ge("span",{"aria-hidden":"true",class:Ae.iconNoticeTriangle}),this.messages.layerError):t.incompatible?Ge("div",{key:"esri-layer-list__incompatible",class:Ae.message,role:"alert"},Ge("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:Ae.iconNoticeTriangle,afterCreate:i=>this._setTooltipReference(i,t)}),this.messages.layerIncompatible):null}renderItemContent(t,i,r){const{id:a}=this,d=`${a}_${t.uid}`,y=`${d}_actions`,m=`${d}__list`,{panel:_}=t,$=this._filterActions(t.actionsSections),M=this._countActions($);return[Ge("div",{key:"list-item-container",class:Ae.itemContainer},this.renderChildrenToggle(t,m),this.renderLabel(t,i,r),this.renderActionsMenu(t,$,M,y)),this.renderItemMessage(t),M?this.renderActionsSections(t,$,y):null,_&&_.open&&!_.disabled?_.render():null,this.renderChildList(t,m)]}renderItem(t,i){var A;const{_newUI:r,id:a,selectionEnabled:d,selectedItems:y}=this,m=`${`${a}_${t.uid}`}__title`,_=this._hasMessage(t),$=this._hasChildren(t),M={[Ae.itemChildren]:$,[Ae.itemMessage]:!!_,[Ae.itemInvisible]:r&&!t.visible,[Ae.itemInvisibleAtScale]:!t.visibleAtCurrentScale,[Ae.itemSelectable]:d};if(d){const P={[P$]:(A=t.layer)==null?void 0:A.uid,[O$]:(!t.sortable).toString()};return Ge("li",{key:`item-with-selection-${t.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Ae.item,M),"aria-labelledby":m,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":t,"data-group":i?i.uid:Xb,tabIndex:0,"aria-selected":Vb(t,y)?"true":"false",role:"option",...P},this.renderItemContent(t,i,m))}return Ge("li",{key:`item-no-selection-${t.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Ae.item,M),"aria-labelledby":m},this.renderItemContent(t,i,m))}renderConnectionIcon(t){const{connectionStatus:i}=t;return i!=null?Ge("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(t,i){const{visibleElements:r}=this;if(!r.statusIndicators)return null;const{connectionStatus:a,publishing:d,updating:y}=t,m=y&&!i,_=!!a;return Ge("span",{class:this.classes({[Ae.statusIndicator]:!0,[Ae.publishing]:d,[Ae.updating]:m,[Ae.connectionStatus]:_,[Ae.connectionStatusConnected]:_&&a==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(t))}renderItemTitle(t,i){const{messages:r}=this;if(!t)return null;const a=t.title||r.untitledLayer,d=t.visibleAtCurrentScale?a:`${a} (${r.layerInvisibleAtScale})`;return Ge("span",{key:"layer-title-container",id:i,title:d,"aria-label":d,class:Ae.title},a)}renderItemToggleIcon(t,i){const{_newUI:r}=this,{exclusive:a}=O0,d=i==null?void 0:i.visibilityMode,y={[Ae.toggleVisibleIcon]:r,[Ae.toggleIcon]:r&&d!==a,[Ae.radioIcon]:r&&d===a,[Ae.iconRadioSelected]:d===a&&t.visible,[Ae.iconRadioUnselected]:d===a&&!t.visible,[Ae.iconVisible]:d!==a&&t.visible,[Ae.iconInvisible]:d!==a&&!t.visible};return Ge("span",{key:"item-toggle-icon",class:this.classes(y),"aria-hidden":"true"})}renderItemToggle(t,i,r){const{selectionEnabled:a,messages:d}=this,{exclusive:y}=O0,m=i==null?void 0:i.visibilityMode,_=m===y?"radio":"switch";return Ge("span",a?{key:"item-toggle-selection-enabled",class:Ae.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":t,"data-parent-visibility":m,tabIndex:0,title:d.layerVisibility,"aria-checked":t.visible?"true":"false",role:_,"aria-labelledby":r}:{key:"item-toggle",class:Ae.toggleVisible},this.renderItemToggleIcon(t,i))}renderLabel(t,i,r){const{selectionEnabled:a,_newUI:d,messages:y}=this,{inherited:m,exclusive:_}=O0,$=i==null?void 0:i.visibilityMode,M=$===_?"radio":"switch",A=d?[this.renderItemTitle(t,r),this.renderItemStatus(t,i),this.renderItemToggle(t,i,r)]:[this.renderItemToggle(t,i,r),this.renderItemTitle(t,r),this.renderItemStatus(t,i)],P=Ge("div",a?{key:`item-label-no-selection-${t.uid}`,class:Ae.label}:{key:`item-label-with-selection-${t.uid}`,class:Ae.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":t,"data-parent-visibility":$,tabIndex:0,"aria-checked":t.visible?"true":"false",title:y.layerVisibility,role:M,"aria-labelledby":r},A);return $===m||t.error?Ge("div",{key:`item-label-container-${t.uid}`,class:Ae.label},this.renderItemTitle(t,r),this.renderItemStatus(t,i)):P}renderPanelButton(t){const{className:i,open:r,title:a,image:d,disabled:y}=t,m=d||i?i:Ae.iconDefaultAction,_=this._getIconImageStyles(t),$={[Ae.actionsMenuItemActive]:r&&!y},M={[Ae.actionImage]:!!_["background-image"],[Ae.disabledElement]:t.disabled};return m&&(M[m]=!!m),Ge("div",{"aria-disabled":t.disabled.toString(),key:`panel-${t.uid}`,bind:this,"data-panel":t,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Ae.actionsMenuItem,$),role:"button",tabindex:t.disabled?null:0,title:a,"aria-label":a},Ge("span",{class:this.classes(M),styles:_}))}renderActionsSections(t,i,r){const a=i.toArray().map((d,y)=>Ge("ul",{key:`${t}-action-section-${y}`,class:Ae.actionsList},this.renderActionSection(t,d)));return Ge("div",{role:"group","aria-expanded":t.actionsOpen?"true":"false",key:"actions-section",id:r,class:Ae.actions,hidden:!t.actionsOpen||null},a)}renderActionSection(t,i){return(i&&i.toArray()).map(r=>this.renderAction({item:t,action:r}))}renderActionIcon(t){const{active:i,className:r}=t,a=this._getIconImageStyles(t),d=t.type!=="button"||t.image||r?r:Ae.iconDefaultAction,y={[Ae.actionImage]:!i&&!!a["background-image"],[Ae.iconLoading]:i,[Ae.rotating]:i};return d&&!i&&(y[d]=!0),Ge("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Ae.actionIcon,y),styles:a})}renderActionTitle(t,i){return i?null:Ge("span",{key:"action-title",class:Ae.actionTitle},t)}renderAction(t){const{item:i,action:r,singleAction:a}=t,{active:d,disabled:y,title:m}=r,_={[Ae.actionsMenuItem]:a&&r.type==="button",[Ae.action]:d||!a&&r.type!=="toggle",[Ae.actionToggle]:!d&&r.type==="toggle",[Ae.actionToggleOn]:!d&&r.type==="toggle"&&r.value,[Ae.disabledElement]:y},$=[this.renderActionIcon(r),this.renderActionTitle(m,a)];return a?Ge("div",{bind:this,"data-item":i,"data-action":r,role:"button",key:`single-action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",title:m??void 0,"aria-label":m??void 0},$):Ge("li",{bind:this,"data-item":i,"data-action":r,key:`action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",role:"button",title:m??void 0,"aria-label":m??void 0},$)}_setTooltipReference(t,i){this._tooltipReferenceMap.set(i.uid,t),this.scheduleRender()}_hasMessage(t){return!!t.error||t.incompatible}_hasChildren(t){return!!t.children.length&&!this._hasMessage(t)}_sortNodeRemoved(t){const{_sortableMap:i}=this,r=t.dataset.group,a=i.get(r);a&&a.destroy(),i.delete(r)}_destroySortables(){const{_sortableMap:t,_sortableNodes:i}=this;t.forEach(r=>r&&r.destroy()),t.clear(),i.clear()}_moveLayerFromChildList({to:t,from:i,item:r,newIndex:a}){const d=Hi(r),y=Hi(t),m=Hi(i);this.viewModel.moveListItem(d,m,y,a)}_sortLayers(t){var a,d;if(!t)return;const i=Hi(t.el),r=t.toArray();i?Ioe(i,r):GN((d=(a=this.view)==null?void 0:a.map)==null?void 0:d.layers,r)}_toggleSorting(t,i){const{_sortableMap:r,selectionEnabled:a}=this,d=r.get(i),y=Hi(t),m=(i===Xb||(y==null?void 0:y.childrenSortable)&&xoe(y))&&a;if(d)d.option("disabled",!m);else if(m){const _=Ye.create(t,{dataIdAttr:P$,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${O$}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!m,chosenClass:Ae.sortableChosen});r.set(i,_)}}_toggleAllSorting(){this._sortableNodes.forEach((t,i)=>this._toggleSorting(t,i))}_sortNodeCreated(t){const i=t.dataset.group;i&&(this._sortableNodes.set(i,t),this._toggleSorting(t,i))}_setVisibleItems(t){this.visibleItems=t.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(t){return t.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(t){var a;const{_focusSortUid:i}=this;if(!t||!i)return;const r=Hi(t);((a=r==null?void 0:r.layer)==null?void 0:a.uid)===i&&(t.focus(),this._focusSortUid=null)}_watchActionSectionChanges(t){this.addHandles(t.on("change",this.scheduleRender.bind(this)),Wa.actionSection),t.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(t){t.type!=="toggle"?t.type!=="slider"?this.addHandles(ke(()=>[t==null?void 0:t.className,t==null?void 0:t.image,t==null?void 0:t.id,t==null?void 0:t.title,t==null?void 0:t.visible],()=>this.scheduleRender(),kt),Wa.actions):this.addHandles(ke(()=>[t==null?void 0:t.className,t==null?void 0:t.id,t==null?void 0:t.title,t==null?void 0:t.visible,t==null?void 0:t.value,t==null?void 0:t.displayValueEnabled,t==null?void 0:t.max,t==null?void 0:t.min,t==null?void 0:t.step],()=>this.scheduleRender(),kt),Wa.actions):this.addHandles(ke(()=>[t==null?void 0:t.className,t==null?void 0:t.image,t==null?void 0:t.id,t==null?void 0:t.title,t==null?void 0:t.visible,t==null?void 0:t.value],()=>this.scheduleRender(),kt),Wa.actions)}_renderOnItemChanges(t){this.addHandles([ke(()=>{var i,r,a;return[t==null?void 0:t.actionsOpen,t==null?void 0:t.visible,t==null?void 0:t.open,t==null?void 0:t.updating,t==null?void 0:t.connectionStatus,t==null?void 0:t.publishing,t==null?void 0:t.title,t==null?void 0:t.visibleAtCurrentScale,t==null?void 0:t.error,t==null?void 0:t.visibilityMode,t==null?void 0:t.panel,(i=t==null?void 0:t.panel)==null?void 0:i.title,(r=t==null?void 0:t.panel)==null?void 0:r.content,(a=t==null?void 0:t.panel)==null?void 0:a.className,t==null?void 0:t.sortable,t==null?void 0:t.childrenSortable]},()=>this.scheduleRender(),aa),ke(()=>[t==null?void 0:t.hidden,t==null?void 0:t.error],()=>this._setVisibleItems(this.operationalItems)),t.actionsSections.on("change",()=>this.scheduleRender()),t.children.on("change",()=>this.scheduleRender())],Wa.items),t.children.forEach(i=>this._renderOnItemChanges(i)),t.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(t){this.removeHandles(Wa.items),this.removeHandles(Wa.actions),this.removeHandles(Wa.actionSection),t.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(t),this.scheduleRender()}_filterActions(t){return t.map(i=>i.filter(r=>r.visible))}_countActions(t){return t.reduce((i,r)=>i+r.length,0)}_getIconImageStyles(t){const i=t.declaredClass==="esri.widgets.LayerList.ListItemPanel"||t.declaredClass==="esri.support.Action.ActionButton"||t.declaredClass==="esri.support.Action.ActionToggle"?t.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(t){var L,F,V,J;const i=["ArrowDown","ArrowUp"],r=FI(t);if(!i.includes(r))return void this._toggleSelection(t);t.stopPropagation();const a=t.currentTarget,d=Hi(a),{_sortableMap:y,selectedItems:m}=this,_=a.dataset.group,$=y.get(_);if(!$||!d)return;const M=Vb(d,m),A=$.toArray(),P=t.target,j=A.indexOf(P.dataset[hae]);if(j!==-1){if(r==="ArrowDown"){const Q=j+1;if(Q>=A.length)return;M?(k$(A,j,Q),$.sort(A),this._sortLayers($),this._focusSortUid=(L=d.layer)==null?void 0:L.uid):(this._focusSortUid=(F=d.layer)==null?void 0:F.uid,this.scheduleRender())}if(r==="ArrowUp"){const Q=j-1;if(Q<=-1)return;M?(k$(A,j,Q),$.sort(A),this._sortLayers($),this._focusSortUid=(V=d.layer)==null?void 0:V.uid):(this._focusSortUid=(J=d.layer)==null?void 0:J.uid,this.scheduleRender())}}}_toggleActionsOpen(t){const i=Hi(t.currentTarget);if(!i)return;const{actionsOpen:r}=i,a=!r;a&&this.operationalItems.forEach(d=>aj(d)),i.actionsOpen=a,t.stopPropagation()}_triggerPanel(t){const i=cae(t.currentTarget);t.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(t){const i=t.currentTarget,r=pae(i),a=Hi(i);r&&a&&(r.type==="toggle"&&(r.value=!r.value),this.triggerAction(r,a),t.stopPropagation())}_toggleVisibility(t){const i=t.currentTarget,r=i.getAttribute("data-parent-visibility"),a=Hi(i);a&&(r===O0.exclusive&&a.visible||(a.visible=!a.visible),t.stopPropagation())}_toggleChildrenClick(t){const i=Hi(t.currentTarget);i&&(i.open=!i.open,t.stopPropagation())}_toggleSelection(t){var m,_;t.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:r}=this,a=Hi(t.currentTarget);if(!a)return;const d=Vb(a,r),{length:y}=r;if(!i)return y&&!(d&&y===1)?(r.removeAll(),void r.add(a)):void(d?(m=r.remove)==null?void 0:m.call(r,d):r.add(a));d?(_=r.remove)==null||_.call(r,d):r.add(a)}get test(){return{visibleItems:this.visibleItems}}};function Hi(e){return e==null?void 0:e["data-item"]}function cae(e){return e==null?void 0:e["data-panel"]}function pae(e){return e==null?void 0:e["data-action"]}b([S()],Zt.prototype,"visibleItems",void 0),b([S()],Zt.prototype,"iconClass",void 0),b([S()],Zt.prototype,"icon",void 0),b([S()],Zt.prototype,"label",null),b([S()],Zt.prototype,"listItemCanGiveFunction",void 0),b([S()],Zt.prototype,"listItemCanReceiveFunction",void 0),b([S()],Zt.prototype,"listItemCreatedFunction",null),b([S(),Rp("esri/widgets/LayerList/t9n/LayerList")],Zt.prototype,"messages",void 0),b([S(),Rp("esri/t9n/common")],Zt.prototype,"messagesCommon",void 0),b([S()],Zt.prototype,"multipleSelectionEnabled",void 0),b([S()],Zt.prototype,"operationalItems",null),b([S()],Zt.prototype,"selectionEnabled",void 0),b([S()],Zt.prototype,"selectedItems",void 0),b([S()],Zt.prototype,"view",null),b([Aoe("trigger-action"),S({type:WN})],Zt.prototype,"viewModel",void 0),b([S()],Zt.prototype,"visibleElements",void 0),b([Tt("visibleElements")],Zt.prototype,"castVisibleElements",null),b([mo()],Zt.prototype,"_toggleActionsOpen",null),b([mo()],Zt.prototype,"_triggerPanel",null),b([mo()],Zt.prototype,"_triggerAction",null),b([mo()],Zt.prototype,"_toggleVisibility",null),b([mo()],Zt.prototype,"_toggleChildrenClick",null),b([mo()],Zt.prototype,"_toggleSelection",null),Zt=b([B("esri.widgets.LayerList")],Zt);const dae=Zt;let fae=class lj{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Ew),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new lj,r=this._originStores[Te.DEFAULTS];r&&r.forEach((a,d)=>{i.set(d,re(a),Te.DEFAULTS)});for(let a=Te.SERVICE;a<Ew;a++){const d=this._originStores[a];d&&d.forEach((y,m)=>{t&&t.has(m)||i.set(m,re(y),a)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=Te.USER){let a=this._originStores[r];if(a||(a=new Map,this._originStores[r]=a),a.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const d=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),d!==i}return!1}delete(t,i=Te.USER){const r=this._originStores[i];if(!r)return;const a=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let d=i-1;d>=0;d--){const y=this._originStores[d];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,d);break}}}return a}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],a=r&&r.get(t),d=this._values.get(t);return this._values.set(t,a),this._propertyOriginMap.set(t,i),d!==a}originOf(t){return this._propertyOriginMap.get(t)||Te.DEFAULTS}forEach(t){this._values.forEach(t)}};const uj=e=>{let t=class extends e{constructor(...i){super(...i);const r=qi(this),a=r.store,d=new fae;r.store=d,gE(r,a,d)}read(i,r){bE(this,i,r)}getAtOrigin(i,r){const a=Qb(this),d=Nr(r);if(typeof i=="string")return a.get(i,d);const y={};return i.forEach(m=>{y[m]=a.get(m,d)}),y}originOf(i){return df(this.originIdOf(i))}originIdOf(i){return Qb(this).originOf(i)}revert(i,r){const a=Qb(this),d=Nr(r),y=qi(this);let m;m=typeof i=="string"?i==="*"?a.keys(d):[i]:i,m.forEach(_=>{y.invalidate(_),a.revert(_,d),y.commit(_)})}};return t=b([B("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function Qb(e){return qi(e).store}let N$=class extends uj(De){};N$=b([B("esri.core.ReadOnlyMultiOriginJSONSupport")],N$);const yae=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return ew(this).delete(i,Nr(r))}write(i,r){return _E(this,i=i||{},r),i}setAtOrigin(i,r,a){qi(this).setAtOrigin(i,r,Nr(a))}removeOrigin(i){const r=ew(this),a=Nr(i),d=r.keys(a);for(const y of d)r.originOf(y)===a&&r.set(y,r.get(y,a),Te.USER)}updateOrigin(i,r){const a=ew(this),d=Nr(r),y=this.get(i);for(let m=d+1;m<Ew;++m)a.delete(i,m);a.set(i,y,d)}toJSON(i){return this.write({},i)}};return t=b([B("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function ew(e){return qi(e).store}const m2=e=>{let t=class extends yae(uj(e)){constructor(...i){super(...i)}};return t=b([B("esri.core.MultiOriginJSONSupport")],t),t};let j$=class extends m2(De){};j$=b([B("esri.core.MultiOriginJSONSupport")],j$);function mae(e){return"portalItem"in e}const hj=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):mae(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return b([S({type:String})],t.prototype,"apiKey",null),t=b([B("esri.layers.mixins.APIKeyMixin")],t),t};let dv=class{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new se(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new dv(this.major,this.minor,this._context)}static parse(t,i=""){const[r,a]=t.split("."),d=/^\s*\d+\s*$/;if(!r||!r.match||!d.test(r))throw new se((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!a||!a.match||!d.test(a))throw new se((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const y=parseInt(r,10),m=parseInt(a,10);return new dv(y,m,i)}};function gae(e){if(!e)return e;const{start:t,end:i}=e;return new Ws({start:t!=null?Ah(t,-t.getTimezoneOffset(),"minutes"):t,end:i!=null?Ah(i,-i.getTimezoneOffset(),"minutes"):i})}function vae(e){if(!e)return e;const{start:t,end:i}=e;return new Ws({start:t!=null?Ah(t,t.getTimezoneOffset(),"minutes"):t,end:i!=null?Ah(i,i.getTimezoneOffset(),"minutes"):i})}var L5;let xd=L5=class extends pe{constructor(e){super(e)}async collectRequiredFields(e,t){return Rr(e,t,this.expression)}clone(){return new L5({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};b([S({type:String,json:{write:!0}})],xd.prototype,"expression",void 0),b([S({type:String,json:{write:!0}})],xd.prototype,"title",void 0),xd=L5=b([B("esri.layers.support.FeatureExpressionInfo")],xd);const R$=xd,lS={unknown:1,inches:gs(1,"meters","inches"),feet:gs(1,"meters","feet"),"us-feet":gs(1,"meters","us-feet"),yards:gs(1,"meters","yards"),miles:gs(1,"meters","miles"),"nautical-miles":gs(1,"meters","nautical-miles"),millimeters:gs(1,"meters","millimeters"),centimeters:gs(1,"meters","centimeters"),decimeters:gs(1,"meters","decimeters"),meters:gs(1,"meters","meters"),kilometers:gs(1,"meters","kilometers"),"decimal-degrees":1/Lz(1,"meters",Lt.radius)};function Mge(e){return 1/(lS[e]||1)}function bae(){const e=Object.keys(lS);return e.sort(),e}const wae=bae();var D5;const by=Sr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),L$=new ut({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Xo=D5=class extends pe{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new D5({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&NL(this.featureExpressionInfo,e.featureExpressionInfo)}};b([S({type:R$,json:{write:!0}})],Xo.prototype,"featureExpressionInfo",void 0),b([me("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Xo.prototype,"readFeatureExpressionInfo",null),b([Se("featureExpressionInfo",{featureExpressionInfo:{type:R$},"featureExpression.value":{type:[0]}})],Xo.prototype,"writeFeatureExpressionInfo",null),b([S({type:by.apiValues,nonNullable:!0,json:{type:by.jsonValues,read:by.read,write:{writer:by.write,isRequired:!0}}})],Xo.prototype,"mode",null),b([S({type:Number,json:{write:!0}})],Xo.prototype,"offset",void 0),b([S({type:wae,json:{type:String,read:L$.read,write:L$.write}})],Xo.prototype,"unit",null),Xo=D5=b([B("esri.layers.support.ElevationInfo")],Xo);const _ae=Xo,Sae={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},g2={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},uS={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},cj={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Kl}}},xae={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},$ae={value:null,type:_ae,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function Age(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const pj={write:!0,read:!0},F5={type:Number,json:{origins:{"web-document":pj,"portal-item":{write:!0}}}},Tae={...F5,json:{...F5.json,origins:{"web-document":{...pj,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?wf(t.layerDefinition.drawingInfo.transparency):void 0:wf(t.drawingInfo.transparency)}}},Iae={type:Ws,readOnly:!0,get(){var m,_;if(!((m=this.layer)!=null&&m.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(_=this.view)==null?void 0:_.timeExtent;let a=this.layer.timeExtent;e&&(a=vae(a));let d=i?r&&a?r.intersection(a):r||a:a;if(!d||d.isEmpty||d.isAllTime)return d;t&&(d=d.offset(-t.value,t.unit)),e&&(d=gae(d));const y=this._get("timeExtent");return d.equals(y)?y:d}},kge={type:gt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=gt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=Xe.fromJSON(t.spatialReference)),i}}}},read:!1}},dj={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Eae={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Mae={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},fj={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};async function Aae(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return ip(e);const i=Xe.WGS84;return await xO(t,i),hu(e,i)}function Oge(e,t){if(!yj(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function yj(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function D$(e){return yj(e,kae.HOSTED_SERVICE)}function Pge(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}async function Cge(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return Aae(i)}const kae={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function F$(e){var _;const{portal:t,isOrgItem:i,itemControl:r}=e,a=(_=t.user)==null?void 0:_.privileges;let d=!a||a.includes("features:user:edit"),y=!!i&&!!(a!=null&&a.includes("features:user:fullEdit"));const m=r==="update"||r==="admin";return m?y=d=!0:y&&(d=!0),{features:{edit:d,fullEdit:y},content:{updateItem:m}}}const Oae=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,r){const a=r.capabilities&&r.capabilities.split(",").map(Q=>Q.toLowerCase().trim());if(!a)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const d=this.type,y=d!=="tile"&&!!r.supportsDynamicLayers,m=a.includes("query"),_=a.includes("map"),$=!!r.exportTilesAllowed,M=a.includes("tilemap"),A=a.includes("data"),P=d!=="tile"&&(!r.tileInfo||y),j=d!=="tile"&&(!r.tileInfo||y),L=d!=="tile",F=r.cimVersion&&dv.parse(r.cimVersion),V=(F==null?void 0:F.since(1,4))??!1,J=(F==null?void 0:F.since(2,0))??!1;return{operations:{supportsExportMap:_,supportsExportTiles:$,supportsIdentify:m,supportsQuery:A,supportsTileMap:M},exportMap:_?{supportsArcadeExpressionForLabeling:V,supportsSublayersChanges:L,supportsDynamicLayers:y,supportsSublayerVisibility:P,supportsSublayerDefinitionExpression:j,supportsCIMSymbols:J}:null,exportTiles:$?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let a=r.currentVersion;return a||(a=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),a}async fetchRelatedService(i){const r=this.portalItem;if(!r||!D$(r))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(d=>d.find(y=>y.type==="Feature Service")??null,()=>null));const a=await this._relatedFeatureServicePromise;return Jt(i),a?{itemId:a.id,url:a.url}:null}async fetchSublayerInfo(i,r){const{source:a}=i;if(this!=null&&this.portalItem&&this.type==="tile"&&(a==null?void 0:a.type)==="map-layer"&&D$(this.portalItem)&&i.originIdOf("url")<Te.SERVICE){const m=await this.fetchRelatedService(r);m&&(i.url=wa(m.url,a.mapLayerId.toString()),i.layerItemId=m.itemId)}const{url:d}=i;let y;if(a.type==="data-layer")y=(await Vt(d,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...r})).data;else if(d&&i.originIdOf("url")>Te.SERVICE)try{y=(await this._fetchAllLayersAndTablesFromService(d)).get(a.mapLayerId)}catch{}else{let m=i.id;(a==null?void 0:a.type)==="map-layer"&&(m=a.mapLayerId);try{y=(await this.fetchAllLayersAndTables(r)).get(m)}catch{}}return y}async fetchAllLayersAndTables(i){var r;return this._fetchAllLayersAndTablesFromService((r=this.parsedUrl)==null?void 0:r.path,i)}async _fetchAllLayersAndTablesFromService(i,r){await this.load(r),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const a=ic(i),d=KI(this._allLayersAndTablesMap,a==null?void 0:a.url.path,()=>Vt(wa(a==null?void 0:a.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(m=>{const _=new Map;for(const $ of m.data.layers)_.set($.id,$);return{result:_}},m=>({error:m}))),y=await d;if(Jt(r),"result"in y)return y.result;throw y.error}};return b([S({readOnly:!0})],t.prototype,"capabilities",void 0),b([me("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),b([S({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),b([S({type:gt})],t.prototype,"fullExtent",void 0),b([S(dj)],t.prototype,"id",void 0),b([S({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),b([S(g2)],t.prototype,"popupEnabled",void 0),b([S({type:Xe})],t.prototype,"spatialReference",void 0),b([S({readOnly:!0})],t.prototype,"version",void 0),b([me("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=b([B("esri.layers.mixins.ArcGISMapService")],t),t},mj=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=ic(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",tQ(i,fe.getLogger(this)))}};return b([S()],t.prototype,"title",null),b([S({type:String})],t.prototype,"url",null),t=b([B("esri.layers.mixins.ArcGISService")],t),t};function v2(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Pae(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Cae(e,t,i,r,a,d,y,m,_,$,M,A,P,j,L,F){const V=new Float32Array(16);return V[0]=e,V[1]=t,V[2]=i,V[3]=r,V[4]=a,V[5]=d,V[6]=y,V[7]=m,V[8]=_,V[9]=$,V[10]=M,V[11]=A,V[12]=P,V[13]=j,V[14]=L,V[15]=F,V}function Nae(e,t){return new Float32Array(e,t,16)}const jae=v2();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:jae,clone:Pae,create:v2,createView:Nae,fromValues:Cae},Symbol.toStringTag,{value:"Module"}));const Rae=(e,t)=>{const i=uu(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Aa(i,i)},Lae=(e,t)=>{const i=uu(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Aa(i,i)},Dae=(e,t)=>{const i=1-t,r=uu(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Aa(r,r)},Fae=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),a=uu(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Aa(a,a)},zae=(e,t)=>{const i=1-2*t,r=uu(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Aa(r,r)},Vae=(e,t)=>{const i=uu(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Aa(i,i)},Gae=(e,t)=>{const i=1-t,r=uu(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Aa(r,r)};let gj=class vj{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Br(t.strength,i.strength,r),this.radius=Br(t.radius,i.radius,r),this.threshold=Br(t.threshold,i.threshold,r)}clone(){return new vj(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:af(this.radius),strength:this.strength,threshold:this.threshold}}},bj=class wj{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Br(t.radius,i.radius,r))}clone(){return new wj(this.radius)}toJSON(){return{type:"blur",radius:af(this.radius)}}},z5=class _j{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Br(t.amount,i.amount,r),this._updateMatrix()}clone(){return new _j(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||v2();switch(this.type){case"brightness":this._colorMatrix=Rae(t,this.amount);break;case"contrast":this._colorMatrix=Lae(t,this.amount);break;case"grayscale":this._colorMatrix=Dae(t,this.amount);break;case"invert":this._colorMatrix=zae(t,this.amount);break;case"saturate":this._colorMatrix=Vae(t,this.amount);break;case"sepia":this._colorMatrix=Gae(t,this.amount)}}},Sj=class xj{constructor(t,i,r,a){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=a,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Br(t.offsetX,i.offsetX,r),this.offsetY=Br(t.offsetY,i.offsetY,r),this.blurRadius=Br(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Br(t.color[0],i.color[0],r)),this.color[1]=Math.round(Br(t.color[1],i.color[1],r)),this.color[2]=Math.round(Br(t.color[2],i.color[2],r)),this.color[3]=Br(t.color[3],i.color[3],r)}clone(){return new xj(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:af(this.offsetX),yoffset:af(this.offsetY),blurRadius:af(this.blurRadius),color:t}}},$j=class Tj{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Br(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Tj(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||v2();this._colorMatrix=Fae(t,this.angle)}},Ij=class Ej{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Br(t.amount,i.amount,r)}clone(){return new Ej(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Br(e,t,i){return e+(t-e)*i}function af(e){return Math.round(1e3*xa(e))/1e3}function qae(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new z5(e.type,0);case"saturate":case"brightness":case"contrast":return new z5(e.type,1);case"opacity":return new Ij(1);case"hue-rotate":return new $j(0);case"blur":return new bj(0);case"drop-shadow":return new Sj(0,0,0,[...j4("transparent")]);case"bloom":return new gj(0,0,1)}}function Uae(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,a)=>r.type===i[a].type)}function Bae(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let a=r.length;a<i.length;a++)r.push(qae(i[a]))}function Hae(e){const t=e[0];return!!t&&"type"in t}var z$,V$,V5={exports:{}};V5.exports,V$=function(){function e(a,d){function y(){this.constructor=a}y.prototype=d.prototype,a.prototype=new y}function t(a,d,y,m){var _=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(_,t.prototype),_.expected=d,_.found=y,_.location=m,_.name="SyntaxError",_}function i(a,d,y){return y=y||" ",a.length>d?a:(d-=a.length,a+(y+=y.repeat(d)).slice(0,d))}function r(a,d){var y,m={},_=(d=d!==void 0?d:{}).grammarSource,$={start:vi},M=vi,A="none",P=")",j=",",L="(",F="%",V="px",J="cm",Q="mm",Y="in",te="pt",oe="pc",ae="deg",de="rad",ve="grad",Ie="turn",Oe="#",Ne=".",Re="e",We=/^[ \t\n\r]/,Pe=/^[a-z\-]/,Gt=/^[0-9a-fA-F]/,gi=/^[+\-]/,qt=/^[0-9]/,ht=ye("none"),xr=ce("none",!1),w1=ce(")",!1),fu=ce(",",!1),h0=ye("whitespace"),_1=ue([" ","	",`
`,"\r"],!1,!1),E2=ye("function"),M2=ce("(",!1),A2=ye("identifier"),S1=ue([["a","z"],"-"],!1,!1),k2=ye("percentage"),O2=ce("%",!1),P2=ye("length"),C2=ce("px",!1),N2=ce("cm",!1),x1=ce("mm",!1),j2=ce("in",!1),R2=ce("pt",!1),L2=ce("pc",!1),Ii=ye("angle"),U=ce("deg",!1),or=ce("rad",!1),$1=ce("grad",!1),yt=ce("turn",!1),ui=ye("number"),Js=ye("color"),qn=ce("#",!1),Ks=ue([["0","9"],["a","f"],["A","F"]],!1,!1),Un=ue(["+","-"],!1,!1),Ys=ue([["0","9"]],!1,!1),T1=ce(".",!1),ko=ce("e",!1),we=function(){return[]},Pa=function(K,he){return{type:"function",name:K,parameters:he||[]}},h=function(K,he){return he.length>0?EL(K,he,3):[K]},k=function(K){return{type:"quantity",value:K.value,unit:K.unit}},v=function(K){return{type:"color",colorType:K.type,value:K.value}},u=function(K){return K},o=function(){return ne()},s=function(K){return{value:K,unit:"%"}},n=function(K){return{value:K,unit:"px"}},l=function(K){return{value:K,unit:"cm"}},c=function(K){return{value:K,unit:"mm"}},p=function(K){return{value:K,unit:"in"}},f=function(K){return{value:K,unit:"pt"}},g=function(K){return{value:K,unit:"pc"}},w=function(K){return{value:K,unit:"deg"}},x=function(K){return{value:K,unit:"rad"}},T=function(K){return{value:K,unit:"grad"}},E=function(K){return{value:K,unit:"turn"}},O=function(K){return{value:K,unit:null}},C=function(){return{type:"hex",value:ne()}},N=function(K){return{type:"function",value:K}},D=function(){return{type:"named",value:ne()}},z=function(){return parseFloat(ne())},R=0,G=0,W=[{line:1,column:1}],H=0,ee=[],X=0;if("startRule"in d){if(!(d.startRule in $))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');M=$[d.startRule]}function ne(){return a.substring(G,R)}function ce(K,he){return{type:"literal",text:K,ignoreCase:he}}function ue(K,he,ge){return{type:"class",parts:K,inverted:he,ignoreCase:ge}}function Ee(){return{type:"end"}}function ye(K){return{type:"other",description:K}}function Ue(K){var he,ge=W[K];if(ge)return ge;for(he=K-1;!W[he];)he--;for(ge={line:(ge=W[he]).line,column:ge.column};he<K;)a.charCodeAt(he)===10?(ge.line++,ge.column=1):ge.column++,he++;return W[K]=ge,ge}function Fe(K,he,ge){var nt=Ue(K),Ei=Ue(he),Ft={source:_,start:{offset:K,line:nt.line,column:nt.column},end:{offset:he,line:Ei.line,column:Ei.column}};return ge&&_&&typeof _.offset=="function"&&(Ft.start=_.offset(Ft.start),Ft.end=_.offset(Ft.end)),Ft}function xe(K){R<H||(R>H&&(H=R,ee=[]),ee.push(K))}function Rt(K,he,ge){return new t(t.buildMessage(K,he),K,he,ge)}function vi(){var K;return(K=Dt())===m&&(K=dt()),K}function Dt(){var K,he;return X++,K=R,tt(),a.substr(R,4)===A?(he=A,R+=4):(he=m,X===0&&xe(xr)),he!==m?(tt(),G=K,K=we()):(R=K,K=m),X--,K===m&&X===0&&xe(ht),K}function dt(){var K,he;if(K=[],(he=ft())!==m)for(;he!==m;)K.push(he),he=ft();else K=m;return K}function ft(){var K,he,ge,nt;return K=R,tt(),(he=Yr())!==m?(tt(),(ge=it())===m&&(ge=null),tt(),a.charCodeAt(R)===41?(nt=P,R++):(nt=m,X===0&&xe(w1)),nt!==m?(tt(),G=K,K=Pa(he,ge)):(R=K,K=m)):(R=K,K=m),K}function it(){var K,he,ge,nt,Ei,Ft,ps,I1;if(K=R,(he=Ut())!==m){for(ge=[],nt=R,Ei=tt(),a.charCodeAt(R)===44?(Ft=j,R++):(Ft=m,X===0&&xe(fu)),Ft===m&&(Ft=null),ps=tt(),(I1=Ut())!==m?nt=Ei=[Ei,Ft,ps,I1]:(R=nt,nt=m);nt!==m;)ge.push(nt),nt=R,Ei=tt(),a.charCodeAt(R)===44?(Ft=j,R++):(Ft=m,X===0&&xe(fu)),Ft===m&&(Ft=null),ps=tt(),(I1=Ut())!==m?nt=Ei=[Ei,Ft,ps,I1]:(R=nt,nt=m);G=K,K=h(he,ge)}else R=K,K=m;return K}function Ut(){var K,he;return K=R,(he=er())===m&&(he=wt())===m&&(he=sc())===m&&(he=nc()),he!==m&&(G=K,he=k(he)),(K=he)===m&&(K=R,(he=oc())!==m&&(G=K,he=v(he)),K=he),K}function tt(){var K,he;for(X++,K=[],We.test(a.charAt(R))?(he=a.charAt(R),R++):(he=m,X===0&&xe(_1));he!==m;)K.push(he),We.test(a.charAt(R))?(he=a.charAt(R),R++):(he=m,X===0&&xe(_1));return X--,he=m,X===0&&xe(h0),K}function Yr(){var K,he,ge;return X++,K=R,(he=lt())!==m?(a.charCodeAt(R)===40?(ge=L,R++):(ge=m,X===0&&xe(M2)),ge!==m?(G=K,K=u(he)):(R=K,K=m)):(R=K,K=m),X--,K===m&&(he=m,X===0&&xe(E2)),K}function lt(){var K,he,ge;if(X++,K=R,he=[],Pe.test(a.charAt(R))?(ge=a.charAt(R),R++):(ge=m,X===0&&xe(S1)),ge!==m)for(;ge!==m;)he.push(ge),Pe.test(a.charAt(R))?(ge=a.charAt(R),R++):(ge=m,X===0&&xe(S1));else he=m;return he!==m&&(G=K,he=o()),X--,(K=he)===m&&(he=m,X===0&&xe(A2)),K}function er(){var K,he,ge;return X++,K=R,tt(),(he=ar())!==m?(a.charCodeAt(R)===37?(ge=F,R++):(ge=m,X===0&&xe(O2)),ge!==m?(G=K,K=s(he)):(R=K,K=m)):(R=K,K=m),X--,K===m&&X===0&&xe(k2),K}function wt(){var K,he,ge;return X++,K=R,tt(),(he=ar())!==m?(a.substr(R,2)===V?(ge=V,R+=2):(ge=m,X===0&&xe(C2)),ge!==m?(G=K,K=n(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,tt(),(he=ar())!==m?(a.substr(R,2)===J?(ge=J,R+=2):(ge=m,X===0&&xe(N2)),ge!==m?(G=K,K=l(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,tt(),(he=ar())!==m?(a.substr(R,2)===Q?(ge=Q,R+=2):(ge=m,X===0&&xe(x1)),ge!==m?(G=K,K=c(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,tt(),(he=ar())!==m?(a.substr(R,2)===Y?(ge=Y,R+=2):(ge=m,X===0&&xe(j2)),ge!==m?(G=K,K=p(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,tt(),(he=ar())!==m?(a.substr(R,2)===te?(ge=te,R+=2):(ge=m,X===0&&xe(R2)),ge!==m?(G=K,K=f(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,tt(),(he=ar())!==m?(a.substr(R,2)===oe?(ge=oe,R+=2):(ge=m,X===0&&xe(L2)),ge!==m?(G=K,K=g(he)):(R=K,K=m)):(R=K,K=m)))))),X--,K===m&&X===0&&xe(P2),K}function sc(){var K,he,ge;return X++,K=R,(he=ar())!==m?(a.substr(R,3)===ae?(ge=ae,R+=3):(ge=m,X===0&&xe(U)),ge!==m?(G=K,K=w(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,(he=ar())!==m?(a.substr(R,3)===de?(ge=de,R+=3):(ge=m,X===0&&xe(or)),ge!==m?(G=K,K=x(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,(he=ar())!==m?(a.substr(R,4)===ve?(ge=ve,R+=4):(ge=m,X===0&&xe($1)),ge!==m?(G=K,K=T(he)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,(he=ar())!==m?(a.substr(R,4)===Ie?(ge=Ie,R+=4):(ge=m,X===0&&xe(yt)),ge!==m?(G=K,K=E(he)):(R=K,K=m)):(R=K,K=m)))),X--,K===m&&(he=m,X===0&&xe(Ii)),K}function nc(){var K,he;return X++,K=R,tt(),(he=ar())!==m?(G=K,K=O(he)):(R=K,K=m),X--,K===m&&X===0&&xe(ui),K}function oc(){var K,he,ge,nt;if(X++,K=R,a.charCodeAt(R)===35?(he=Oe,R++):(he=m,X===0&&xe(qn)),he!==m){if(ge=[],Gt.test(a.charAt(R))?(nt=a.charAt(R),R++):(nt=m,X===0&&xe(Ks)),nt!==m)for(;nt!==m;)ge.push(nt),Gt.test(a.charAt(R))?(nt=a.charAt(R),R++):(nt=m,X===0&&xe(Ks));else ge=m;ge!==m?(G=K,K=C()):(R=K,K=m)}else R=K,K=m;return K===m&&(K=R,(he=ft())!==m&&(G=K,he=N(he)),(K=he)===m&&(K=R,(he=lt())!==m&&(G=K,he=D()),K=he)),X--,K===m&&(he=m,X===0&&xe(Js)),K}function ar(){var K,he,ge,nt,Ei,Ft,ps;for(K=R,gi.test(a.charAt(R))?(a.charAt(R),R++):X===0&&xe(Un),he=R,ge=[],qt.test(a.charAt(R))?(nt=a.charAt(R),R++):(nt=m,X===0&&xe(Ys));nt!==m;)ge.push(nt),qt.test(a.charAt(R))?(nt=a.charAt(R),R++):(nt=m,X===0&&xe(Ys));if(a.charCodeAt(R)===46?(nt=Ne,R++):(nt=m,X===0&&xe(T1)),nt!==m){if(Ei=[],qt.test(a.charAt(R))?(Ft=a.charAt(R),R++):(Ft=m,X===0&&xe(Ys)),Ft!==m)for(;Ft!==m;)Ei.push(Ft),qt.test(a.charAt(R))?(Ft=a.charAt(R),R++):(Ft=m,X===0&&xe(Ys));else Ei=m;Ei!==m?he=ge=[ge,nt,Ei]:(R=he,he=m)}else R=he,he=m;if(he===m)if(he=[],qt.test(a.charAt(R))?(ge=a.charAt(R),R++):(ge=m,X===0&&xe(Ys)),ge!==m)for(;ge!==m;)he.push(ge),qt.test(a.charAt(R))?(ge=a.charAt(R),R++):(ge=m,X===0&&xe(Ys));else he=m;if(he!==m){if(ge=R,a.charCodeAt(R)===101?(nt=Re,R++):(nt=m,X===0&&xe(ko)),nt!==m){if(gi.test(a.charAt(R))?(Ei=a.charAt(R),R++):(Ei=m,X===0&&xe(Un)),Ei===m&&(Ei=null),Ft=[],qt.test(a.charAt(R))?(ps=a.charAt(R),R++):(ps=m,X===0&&xe(Ys)),ps!==m)for(;ps!==m;)Ft.push(ps),qt.test(a.charAt(R))?(ps=a.charAt(R),R++):(ps=m,X===0&&xe(Ys));else Ft=m;Ft!==m?ge=nt=[nt,Ei,Ft]:(R=ge,ge=m)}else R=ge,ge=m;ge===m&&(ge=null),G=K,K=z()}else R=K,K=m;return K}function IL(K,he){return K.map(function(ge){return ge[he]})}function EL(K,he,ge){return[K].concat(IL(he,ge))}if((y=M())!==m&&R===a.length)return y;throw y!==m&&R<a.length&&xe(Ee()),Rt(ee,H<a.length?a.charAt(H):null,H<a.length?Fe(H,H+1):Fe(H,H))}return e(t,Error),t.prototype.format=function(a){var d="Error: "+this.message;if(this.location){var y,m=null;for(y=0;y<a.length;y++)if(a[y].source===this.location.source){m=a[y].text.split(/\r\n|\n|\r/g);break}var _=this.location.start,$=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(_):_,M=this.location.source+":"+$.line+":"+$.column;if(m){var A=this.location.end,P=i("",$.line.toString().length," "),j=m[_.line-1],L=(_.line===A.line?A.column:j.length+1)-_.column||1;d+=`
 --> `+M+`
`+P+` |
`+$.line+" | "+j+`
`+P+" | "+i("",_.column-1," ")+i("",L,"^")}else d+=`
 at `+M}return d},t.buildMessage=function(a,d){var y={literal:function(j){return'"'+_(j.text)+'"'},class:function(j){var L=j.parts.map(function(F){return Array.isArray(F)?$(F[0])+"-"+$(F[1]):$(F)});return"["+(j.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(j){return j.description}};function m(j){return j.charCodeAt(0).toString(16).toUpperCase()}function _(j){return j.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+m(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+m(L)})}function $(j){return j.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+m(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+m(L)})}function M(j){return y[j.type](j)}function A(j){var L,F,V=j.map(M);if(V.sort(),V.length>0){for(L=1,F=1;L<V.length;L++)V[L-1]!==V[L]&&(V[F]=V[L],F++);V.length=F}switch(V.length){case 1:return V[0];case 2:return V[0]+" or "+V[1];default:return V.slice(0,-1).join(", ")+", or "+V[V.length-1]}}function P(j){return j?'"'+_(j)+'"':"end of input"}return"Expected "+A(a)+" but "+P(d)+" found."},{SyntaxError:t,parse:r}},(z$=V5).exports&&(z$.exports=V$());var Wae=V5.exports;function Mj(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=G$(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new se("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:G$(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Uae(t[i].effects,t[i+1].effects))throw new se("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});Bae(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function G$(e){let t;if(!e)return[];try{t=Wae.parse(e)}catch(i){throw new se("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Jae(i))}function Jae(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Kae(e);case"opacity":return Yae(e);case"hue-rotate":return Zae(e);case"blur":return Xae(e);case"drop-shadow":return Qae(e);case"bloom":return ele(e)}}catch(t){throw t.details.filter=e,t}throw new se("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Kae(e){let t=1;return s0(e.parameters,1),e.parameters.length===1&&(t=Tn(e.parameters[0])),new z5(e.name,t)}function Yae(e){let t=1;return s0(e.parameters,1),e.parameters.length===1&&(t=Tn(e.parameters[0])),new Ij(t)}function Zae(e){let t=0;return s0(e.parameters,1),e.parameters.length===1&&(t=ole(e.parameters[0])),new $j(t)}function Xae(e){let t=0;return s0(e.parameters,1),e.parameters.length===1&&(t=pS(e.parameters[0]),d1(t,e.parameters[0])),new bj(t)}function Qae(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new se("effect:type-error","Accepts only one color",{});i=ale(r)}else{const a=pS(r);if(Object.isFrozen(t))throw new se("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(a),t.length===3&&d1(a,r)}if(t.length<2||t.length>3)throw new se("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Sj(t[0],t[1],t[2]||0,i||Aj("black"))}function ele(e){let t=1,i=0,r=0;return s0(e.parameters,3),e.parameters[0]&&(t=Tn(e.parameters[0])),e.parameters[1]&&(i=pS(e.parameters[1]),d1(i,e.parameters[1])),e.parameters[2]&&(r=Tn(e.parameters[2])),new gj(t,i,r)}function s0(e,t){if(e.length>t)throw new se("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function b2(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in cS)return"<length>";if(e.unit in hS)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function d1(e,t){if(e<0)throw new se("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function tle(e){if(e.type!=="quantity"||e.unit!==null)throw new se("effect:type-error",`Expected <double>, Actual: ${b2(e)}`,{term:e})}function ile(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new se("effect:type-error",`Expected <double> or <percentage>, Actual: ${b2(e)}`,{term:e})}const hS={deg:1,grad:.9,rad:180/Math.PI,turn:360};function rle(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&hS[e.unit]!=null))throw new se("effect:type-error",`Expected <angle>, Actual: ${b2(e)}`,{term:e})}const cS={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function sle(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&cS[e.unit]!=null))throw new se("effect:type-error",`Expected <length>, Actual: ${b2(e)}`,{term:e})}function Tn(e){ile(e);const t=e.value;return d1(t,e),e.unit==="%"?.01*t:t}function nle(e){return tle(e),d1(e.value,e),e.value}function ole(e){return rle(e),e.value*hS[e.unit]||0}function pS(e){return sle(e),e.value*cS[e.unit]||0}function ale(e){switch(e.colorType){case"hex":return yG(e.value);case"named":return Aj(e.value);case"function":return hle(e.value)}}function Aj(e){if(!lM(e))throw new se("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return fG(e)}const lle=/^rgba?/i,ule=/^hsla?/i;function hle(e){if(s0(e.parameters,4),lle.test(e.name))return[Tn(e.parameters[0]),Tn(e.parameters[1]),Tn(e.parameters[2]),e.parameters[3]?Tn(e.parameters[3]):1];if(ule.test(e.name))return uM(nle(e.parameters[0]),Tn(e.parameters[1]),Tn(e.parameters[2]),e.parameters[3]?Tn(e.parameters[3]):1);throw new se("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function dS(e,t,i){var r;try{return ple(e)}catch(a){(r=i==null?void 0:i.messages)==null||r.push(a)}return null}function fS(e,t,i,r){try{const a=cle(e);_r(i,a,t)}catch(a){r.messages&&r.messages.push(a)}}function cle(e){const t=Mj(e);return t?Hae(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(a=>a.toJSON())})):null}function ple(e){if(!e||e.length===0)return null;if(dle(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:q$(i.value)});return t}return q$(e)}function dle(e){const t=e[0];return!!t&&"scale"in t}function q$(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Ro(i,"amount")];break;case"blur":r=[Ro(i,"radius","pt")];break;case"hue-rotate":r=[Ro(i,"angle","deg")];break;case"drop-shadow":r=[Ro(i,"xoffset","pt"),Ro(i,"yoffset","pt"),Ro(i,"blurRadius","pt"),fle(i,"color")];break;case"bloom":r=[Ro(i,"strength"),Ro(i,"radius","pt"),Ro(i,"threshold")]}const a=`${i.type}(${r.filter(Boolean).join(" ")})`;Mj(a),t.push(a)}return t.join(" ")}function Ro(e,t,i){if(e[t]==null)throw new se("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function fle(e,t){if(e[t]==null)throw new se("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const U$={read:{reader:dS},write:{allowNull:!0,writer:fS}},kj=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return b([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),b([S({json:{read:!1,write:!1,origins:{"web-map":U$,"portal-item":U$}}})],t.prototype,"effect",void 0),t=b([B("esri.layers.mixins.BlendLayer")],t),t},Oj=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return b([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=b([B("esri.layers.mixins.CustomParametersMixin")],t),t},B$={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},H$={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},W$={ArcGISFeatureLayer:!0},yle={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":B$,"web-map/basemap":H$,"web-map/tables":W$,"link-chart/operational-layers":{...B$,LinkChartLayer:!0},"link-chart/basemap":H$,"link-chart/tables":W$,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},Pj=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,a,d){(d&&d.layerContainerType==="ground"||i&&OF(this,a,{},d))&&(r[a]=i)}writeOperationalLayerType(i,r,a,d){!i||d&&d.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),MF(this,i,a=>super.read(i,a),r)}write(i,r){var y,m;if(r!=null&&r.origin){const _=`${r.origin}/${r.layerContainerType||"operational-layers"}`,$=yle[_];let M=!!($!=null&&$[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(M=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&_==="web-map/operational-layers"&&(M=!1),!M)return(y=r.messages)==null||y.push(new se("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const a=super.write(i,{...r,layer:this}),d=!!r&&!!r.messages&&!!r.messages.filter(_=>_ instanceof se&&_.name==="web-document-write:property-required").length;return Rv(a==null?void 0:a.url)?((m=r==null?void 0:r.messages)==null||m.push(new se("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&d?null:a}beforeSave(){}};return b([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),b([S(fj)],t.prototype,"listMode",void 0),b([Se("listMode")],t.prototype,"writeListMode",null),b([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),b([Se("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),b([S(F5)],t.prototype,"opacity",void 0),b([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),b([Se("title"),Se(["web-scene"],"title")],t.prototype,"writeTitle",null),b([S({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=b([B("esri.layers.mixins.OperationalLayer")],t),t},Cj=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Wt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,a){if(r.itemId)return new Gd({id:r.itemId,portal:a&&a.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const{load:a}=await be(()=>import("./layersLoader-ef744e63.js"),["assets/layersLoader-ef744e63.js","assets/fetchService-50ce87f2.js","assets/jsonContext-4430ffa2.js"]);return Jt(r),await a({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(a){throw Jr(a)||fe.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${a}`),a}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Ps(r),!0)))}async _setUserPrivileges(i,r){if(!$t.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:a,fullEdit:d},content:{updateItem:y}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",a),this._set("userHasFullEditingPrivileges",d),this._set("userHasUpdateItemPrivileges",y)}catch(a){Ps(a)}}async _fetchUserPrivileges(i,r){let a=this.portalItem;if(!i||!a||!a.loaded||a.sourceUrl)return this._fetchFallbackUserPrivileges(r);const d=i===a.id;if(d&&a.portal.user)return F$(a);let y,m;if(d)y=a.portal.url;else try{y=await oM(this.url,r)}catch(A){Ps(A)}if(!y||!sz(y,a.portal.url))return this._fetchFallbackUserPrivileges(r);try{const A=r!=null?r.signal:null;m=await(pt==null?void 0:pt.getCredential(`${y}/sharing`,{prompt:!1,signal:A}))}catch(A){Ps(A)}const _=!0,$=!1,M=!1;if(!m)return{features:{edit:_,fullEdit:$},content:{updateItem:M}};try{if(d?await a.reload():(a=new Gd({id:i,portal:{url:y}}),await a.load(r)),a.portal.user)return F$(a)}catch(A){Ps(A)}return{features:{edit:_,fullEdit:$},content:{updateItem:M}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(a){Ps(a)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?pt==null?void 0:pt.findCredential(this.url):null;if(!r)return!0;const a=wy.credential===r?wy.user:await this._fetchEditingUser(i);return wy.credential=r,wy.user=a,a==null||a.privileges==null||a.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var M,A;const r=(A=(M=this.portalItem)==null?void 0:M.portal)==null?void 0:A.user;if(r)return r;const a=pt.findServerInfo(this.url??"");if(!(a!=null&&a.owningSystemUrl))return null;const d=`${a.owningSystemUrl}/sharing/rest`,y=Wr.getDefault();if(y&&y.loaded&&An(y.restUrl)===An(d))return y.user;const m=`${d}/community/self`,_=i!=null?i.signal:null,$=await Nv(Vt(m,{authMode:"no-prompt",query:{f:"json"},signal:_}));return $.ok?C4.fromJSON($.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const a=r&&r.portal,d=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Wr.getDefault());return a&&d&&!IE(d.restUrl,a.restUrl)?(r.messages&&r.messages.push(new se("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return b([S({type:Gd})],t.prototype,"portalItem",null),b([me("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),b([Se("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),b([S({clonable:!1})],t.prototype,"resourceReferences",void 0),b([S({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),b([S({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),b([S({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=b([B("esri.layers.mixins.PortalLayer")],t),t},wy={credential:null,user:null},Rf=new Le,lf=new WeakMap;function mle(e){Nj(e)&&Rf.push(e)}function gle(e){Nj(e)&&Rf.includes(e)&&Rf.remove(e)}function Nj(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function jj(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:jj(t,e%t):0}let tw=0,_y=0;function vle(){const e=Date.now();for(const t of Rf)t.refreshInterval&&e-(lf.get(t)??0)+5>=6e4*t.refreshInterval&&(lf.set(t,e),t.refresh(e))}HI(()=>{const e=Date.now();let t=0;for(const i of Rf)t=jj(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?lf.get(i)||lf.set(i,e):lf.delete(i);if(t!==_y){if(_y=t,clearInterval(tw),_y===0)return void(tw=0);tw=setInterval(vle,_y)}});const Rj=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=a4(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||mle(this)},()=>{})}destroy(){gle(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Aw(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{fe.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return b([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),b([S({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),b([S()],t.prototype,"refreshParameters",null),t=b([B("esri.layers.mixins.RefreshableLayer")],t),t},Lj=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&ble(i,r.effectiveScaleRange);const a=this._get("effectiveScaleRange");return a&&a.minScale===i.minScale&&a.maxScale===i.maxScale?a:i}};return b([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),b([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),b([S({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=b([B("esri.layers.mixins.ScaleRangeLayer")],t),t};function ble(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}var G5;let $d=G5=class extends pe{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new G5({minValue:this.minValue,maxValue:this.maxValue})}};b([S({type:Number,json:{write:!0}})],$d.prototype,"minValue",void 0),b([S({type:Number,json:{write:!0}})],$d.prototype,"maxValue",void 0),$d=G5=b([B("esri.renderer.support.AuthoringInfoClassBreakInfo")],$d);var q5;let El=q5=class extends pe{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new q5({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:re(this.classBreakInfos)})}};b([S({type:String,json:{write:!0}})],El.prototype,"field",void 0),b([S({type:String,json:{write:!0}})],El.prototype,"normalizationField",void 0),b([S({type:String,json:{write:!0}})],El.prototype,"label",void 0),b([S({type:[$d],json:{write:!0}})],El.prototype,"classBreakInfos",void 0),El=q5=b([B("esri.renderers.support.AuthoringInfoFieldInfo")],El);var U5;const Sy=new ut({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),xy=new ut({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),J$={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},K$=["high-to-low","above-and-below","centered-on","extremes"],Y$=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],Z$=["seconds","minutes","hours","days","months","years"];let Gr=U5=class extends pe{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new U5({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};b([S({types:J$,json:{write:!0}})],Gr.prototype,"endTime",void 0),b([Tt("endTime")],Gr.prototype,"castEndTime",null),b([S({type:String,json:{write:!0}})],Gr.prototype,"field",void 0),b([S({type:Number,json:{write:!0}})],Gr.prototype,"maxSliderValue",void 0),b([S({type:Number,json:{write:!0}})],Gr.prototype,"minSliderValue",void 0),b([S({types:J$,json:{write:!0}})],Gr.prototype,"startTime",void 0),b([Tt("startTime")],Gr.prototype,"castStartTime",null),b([S({type:Sy.apiValues,value:null,json:{type:Sy.jsonValues,read:Sy.read,write:Sy.write}})],Gr.prototype,"style",null),b([S({type:Y$,value:null,json:{type:Y$,origins:{"web-scene":{type:K$,write:{writer:(e,t)=>{K$.includes(e)&&(t.theme=e)}}}},write:!0}})],Gr.prototype,"theme",null),b([S({type:xy.apiValues,json:{type:xy.jsonValues,read:xy.read,write:xy.write}})],Gr.prototype,"type",void 0),b([S({type:Z$,json:{type:Z$,write:!0}})],Gr.prototype,"units",void 0),Gr=U5=b([B("esri.renderers.support.AuthoringInfoVisualVariable")],Gr);const wle=Gr;let km=class extends pe{constructor(t){super(t),this.type=null}};b([S({readOnly:!0,json:{read:!1,write:!0}})],km.prototype,"type",void 0),km=b([B("esri.rest.support.ColorRamp")],km);const yS=km;var B5;let Xu=B5=class extends yS{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new B5({fromColor:re(this.fromColor),toColor:re(this.toColor),algorithm:this.algorithm})}};b([je({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Xu.prototype,"algorithm",void 0),b([S({type:et,json:{type:[Ot],write:!0}})],Xu.prototype,"fromColor",void 0),b([S({type:et,json:{type:[Ot],write:!0}})],Xu.prototype,"toColor",void 0),b([S({type:["algorithmic"]})],Xu.prototype,"type",void 0),Xu=B5=b([B("esri.rest.support.AlgorithmicColorRamp")],Xu);const mS=Xu;var H5;let Td=H5=class extends yS{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new H5({colorRamps:re(this.colorRamps)})}};b([S({type:[mS],json:{write:!0}})],Td.prototype,"colorRamps",void 0),b([S({type:["multipart"]})],Td.prototype,"type",void 0),Td=H5=b([B("esri.rest.support.MultipartColorRamp")],Td);const Dj=Td,_le={key:"type",base:yS,typeMap:{algorithmic:mS,multipart:Dj}};function Sle(e){return e&&e.type?e.type==="algorithmic"?mS.fromJSON(e):e.type==="multipart"?Dj.fromJSON(e):null:null}var W5;const xu=new ut({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),$y=new ut({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),X$=new ut({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Q$=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],xle=["high-to-low","above-and-below","above","below","90-10"],$le=["flow-line","wave-front"],Tle=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ci=W5=class extends pe{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Sle(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new W5({classificationMethod:this.classificationMethod,colorRamp:re(this.colorRamp),fadeRatio:re(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:re(this.field1),field2:re(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};b([S({type:xu.apiValues,value:null,json:{type:xu.jsonValues,read:xu.read,write:xu.write,origins:{"web-document":{default:"manual",type:xu.jsonValues,read:xu.read,write:xu.write}}}})],ci.prototype,"classificationMethod",null),b([S({types:_le,json:{write:!0}})],ci.prototype,"colorRamp",void 0),b([me("colorRamp")],ci.prototype,"readColorRamp",null),b([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ci.prototype,"fadeRatio",void 0),b([S({type:[String],value:null,json:{write:!0}})],ci.prototype,"fields",null),b([S({type:El,value:null,json:{write:!0}})],ci.prototype,"field1",null),b([S({type:El,value:null,json:{write:!0}})],ci.prototype,"field2",null),b([S({type:$le,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ci.prototype,"flowTheme",null),b([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ci.prototype,"focus",null),b([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ci.prototype,"isAutoGenerated",void 0),b([S({type:Number,value:null,json:{type:Ot,write:!0}})],ci.prototype,"numClasses",null),b([S({type:Q$,json:{type:Q$,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ci.prototype,"lengthUnit",void 0),b([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ci.prototype,"maxSliderValue",void 0),b([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ci.prototype,"minSliderValue",void 0),b([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ci.prototype,"statistics",null),b([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ci.prototype,"standardDeviationInterval",null),b([S({type:$y.apiValues,value:null,json:{type:$y.jsonValues,read:$y.read,write:$y.write,origins:{"web-scene":{type:X$.jsonValues,write:{writer:X$.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],ci.prototype,"type",null),b([S({type:[wle],json:{write:!0}})],ci.prototype,"visualVariables",void 0),b([S({type:Tle,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ci.prototype,"univariateSymbolStyle",null),b([S({type:xle,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ci.prototype,"univariateTheme",null),ci=W5=b([B("esri.renderers.support.AuthoringInfo")],ci);const gS=ci,iw=new ut({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Id=class extends pe{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};b([S({type:gS,json:{write:!0}})],Id.prototype,"authoringInfo",void 0),b([S({type:iw.apiValues,readOnly:!0,json:{type:iw.jsonValues,read:!1,write:{writer:iw.write,ignoreOrigin:!0}}})],Id.prototype,"type",void 0),Id=b([B("esri.renderers.Renderer")],Id);const Oa=Id;function Ile(e){var t,i;return((i=(t=e.match(Ele))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Ele=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var J5;let vp=J5=class extends pe{constructor(){super(...arguments),this.title=null}clone(){return new J5({title:this.title})}};b([S({type:String,json:{write:!0}})],vp.prototype,"title",void 0),vp=J5=b([B("esri.renderers.support.LegendOptions")],vp);var K5;let Om=K5=class extends vp{constructor(){super(...arguments),this.showLegend=null}clone(){return new K5({title:this.title,showLegend:this.showLegend})}};b([S({type:Boolean,json:{write:!0}})],Om.prototype,"showLegend",void 0),Om=K5=b([B("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Om);const Fj=Om,rw=new ut({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let gn=class extends pe{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(fe.getLogger(this).error(".field: field must be a string value"),null):qf(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};b([S()],gn.prototype,"index",void 0),b([S({type:rw.apiValues,readOnly:!0,json:{read:rw.read,write:rw.write}})],gn.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],gn.prototype,"field",void 0),b([Tt("field")],gn.prototype,"castField",null),b([S({type:String,json:{write:!0}})],gn.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],gn.prototype,"valueExpressionTitle",void 0),b([S({readOnly:!0})],gn.prototype,"arcadeRequired",null),b([S({type:Fj,json:{write:!0}})],gn.prototype,"legendOptions",void 0),gn=b([B("esri.renderers.visualVariables.VisualVariable")],gn);const f1=gn;var Y5;let Qu=Y5=class extends pe{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new Y5({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};b([S({type:et,json:{type:[Ot],write:!0}})],Qu.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],Qu.prototype,"label",void 0),b([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Qu.prototype,"value",void 0),b([Se("value")],Qu.prototype,"writeValue",null),Qu=Y5=b([B("esri.renderers.visualVariables.support.ColorStop")],Qu);const Mle=Qu;var Z5;let eh=Z5=class extends f1{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new Z5({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};b([S({readOnly:!0})],eh.prototype,"cache",null),b([S({type:["color"],json:{type:["colorInfo"]}})],eh.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],eh.prototype,"normalizationField",void 0),b([S({type:[Mle],json:{write:!0}})],eh.prototype,"stops",null),eh=Z5=b([B("esri.renderers.visualVariables.ColorVariable")],eh);const zj=eh;var X5;let ml=X5=class extends pe{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return wf(t.transparency)}writeOpacity(e,t,i){t[i]=Gv(e)}clone(){return new X5({label:this.label,opacity:this.opacity,value:this.value})}};b([S({type:String,json:{write:!0}})],ml.prototype,"label",void 0),b([S({type:Number,json:{type:Ot,write:{target:"transparency"}}})],ml.prototype,"opacity",void 0),b([me("opacity",["transparency"])],ml.prototype,"readOpacity",null),b([Se("opacity")],ml.prototype,"writeOpacity",null),b([S({type:Number,json:{write:!0}})],ml.prototype,"value",void 0),ml=X5=b([B("esri.renderers.visualVariables.support.OpacityStop")],ml);const Ale=ml;var Q5;let th=Q5=class extends f1{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new Q5({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};b([S({readOnly:!0})],th.prototype,"cache",null),b([S({type:["opacity"],json:{type:["transparencyInfo"]}})],th.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],th.prototype,"normalizationField",void 0),b([S({type:[Ale],json:{write:!0}})],th.prototype,"stops",null),th=Q5=b([B("esri.renderers.visualVariables.OpacityVariable")],th);const Vj=th;var e_;let Qo=e_=class extends f1{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const a=`visualVariables[${this.index}]`;r.messages.push(new se("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpressionTitle",context:r}))}}clone(){return new e_({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};b([S({readOnly:!0})],Qo.prototype,"cache",null),b([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Qo.prototype,"axis",void 0),b([S({type:["rotation"],json:{type:["rotationInfo"]}})],Qo.prototype,"type",void 0),b([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Qo.prototype,"rotationType",void 0),b([S({type:String,json:{write:!0}})],Qo.prototype,"valueExpressionTitle",void 0),b([Se("web-scene","valueExpressionTitle")],Qo.prototype,"writeValueExpressionTitleWebScene",null),Qo=e_=b([B("esri.renderers.visualVariables.RotationVariable")],Qo);const Gj=Qo;var t_;let qc=t_=class extends pe{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new t_({label:this.label,size:this.size,value:this.value})}};b([S({type:String,json:{write:!0}})],qc.prototype,"label",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],qc.prototype,"size",void 0),b([S({type:Number,json:{write:!0}})],qc.prototype,"value",void 0),qc=t_=b([B("esri.renderers.visualVariables.support.SizeStop")],qc);const Uc=qc;var i_;let Pm=i_=class extends Fj{constructor(){super(...arguments),this.customValues=null}clone(){return new i_({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};b([S({type:[Number],json:{write:!0}})],Pm.prototype,"customValues",void 0),Pm=i_=b([B("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Pm);const kle=Pm;var ma,Gi;function ql(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Lf(e){return e!=null&&!isNaN(e)&&isFinite(e)}function qj(e){return e.valueExpression?ma.Expression:e.field&&typeof e.field=="string"?ma.Field:ma.Unknown}function Ole(e,t){const i=t||qj(e),r=e.valueUnit||"unknown";return i===ma.Unknown?Gi.Constant:e.stops?Gi.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Gi.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Gi.Proportional:Gi.Additive:Gi.Identity:Gi.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(ma||(ma={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Gi||(Gi={}));const tu=fe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),eT=new Us,Cm=Math.PI,Uj=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Bj(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void tu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const a=typeof t=="number",d=a?null:t,y=d&&d.attributes;let m=a?t:null;const _=r.field,{ipData:$,hasExpression:M}=r.cache;let A=r.cache.compiledFunc;if(!_&&!M){const L=r.stops;return L&&L[0]&&L[0].color}if(typeof m!="number")if(M){if(i==null||i.arcade==null)return void tu.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,V=F.getViewInfo(L),J=F.createExecContext(d,V);if(!A){const Q=F.createSyntaxTree(r.valueExpression);A=F.createFunction(Q),r.cache.compiledFunc=A}m=F.executeFunction(A,J)}else y&&(m=y[_]);const P=r.normalizationField,j=y!=null&&P!=null?parseFloat(y[P]):void 0;if(m!=null&&(!P||a||!isNaN(j)&&j!==0)){isNaN(j)||a||(m/=j);const L=vS(m,$);if(L){const F=L[0],V=L[1],J=F===V?r.stops[F].color:et.blendColors(r.stops[F].color,r.stops[V].color,L[2],i!=null?i.color:void 0);return new et(J)}}}function Hj(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void tu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a=typeof t=="number",d=a?null:t,y=d&&d.attributes;let m=a?t:null;const _=r.field,{ipData:$,hasExpression:M}=r.cache;let A=r.cache.compiledFunc;if(!_&&!M){const L=r.stops;return L&&L[0]&&L[0].opacity}if(typeof m!="number")if(M){if(i==null||i.arcade==null)return void tu.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,V=F.getViewInfo(L),J=F.createExecContext(d,V);if(!A){const Q=F.createSyntaxTree(r.valueExpression);A=F.createFunction(Q),r.cache.compiledFunc=A}m=F.executeFunction(A,J)}else y&&(m=y[_]);const P=r.normalizationField,j=y!=null&&P!=null?parseFloat(y[P]):void 0;if(m!=null&&(!P||a||!isNaN(j)&&j!==0)){isNaN(j)||a||(m/=j);const L=vS(m,$);if(L){const F=L[0],V=L[1];if(F===V)return r.stops[F].opacity;{const J=r.stops[F].opacity;return J+(r.stops[V].opacity-J)*L[2]}}}}function Wj(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(j=>j.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void tu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=r.axis||"heading",d=a==="heading"&&r.rotationType==="arithmetic"?90:0,y=a==="heading"&&r.rotationType==="arithmetic"?-1:1,m=typeof t=="number"?null:t,_=m&&m.attributes,$=r.field,{hasExpression:M}=r.cache;let A=r.cache.compiledFunc,P=0;if(!$&&!M)return P;if(M){if(i==null||i.arcade==null)return void tu.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,F=L.getViewInfo(j),V=L.createExecContext(m,F);if(!A){const J=L.createSyntaxTree(r.valueExpression);A=L.createFunction(J),r.cache.compiledFunc=A}P=L.executeFunction(A,V)}else _&&(P=_[$]||0);return P=typeof P!="number"||isNaN(P)?null:d+y*P,P}function Ple(e,t,i){const r=typeof t=="number",a=r?null:t,d=a&&a.attributes;let y=r?t:null;const{isScaleDriven:m}=e.cache;let _=e.cache.compiledFunc;if(m){const M=i!=null?i.scale:void 0,A=i!=null?i.view:void 0;y=M==null||A==="3d"?Cle(e):M}else if(!r)switch(e.inputValueType){case ma.Expression:{if(i==null||i.arcade==null)return void tu.error("Use of arcade expressions requires an arcade context");const M={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,P=A.getViewInfo(M),j=A.createExecContext(a,P);if(!_){const L=A.createSyntaxTree(e.valueExpression);_=A.createFunction(L),e.cache.compiledFunc=_}y=A.executeFunction(_,j);break}case ma.Field:d&&(y=d[e.field]);break;case ma.Unknown:y=null}if(!Lf(y))return null;if(r||!e.normalizationField)return y;const $=d?parseFloat(d[e.normalizationField]):null;return Lf($)&&$!==0?y/$:null}function Cle(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function w2(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(d=>d.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void tu.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=Kj(Ple(r,t,i),r,t,i,r.cache.ipData);return a==null||isNaN(a)?0:a}function Hr(e,t,i){return e==null?null:ql(e)?w2(e,t,i):Lf(e)?e:null}function Jj(e,t,i){return Lf(i)&&e>i?i:Lf(t)&&e<t?t:e}function Nle(e,t,i,r){return e+((Hr(t.minSize,i,r)||t.minDataValue)??0)}function jle(e,t,i){const r=e.stops;let a=r&&r.length&&r[0].size;return a==null&&(a=e.minSize),Hr(a,t,i)}function Rle(e,t,i,r){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),d=Hr(t.minSize,i,r),y=Hr(t.maxSize,i,r),m=r!=null?r.shape:void 0;if(e<=t.minDataValue)return d;if(e>=t.maxDataValue)return y;if(d==null||y==null)return null;if(t.scaleBy==="area"&&m){const _=m==="circle",$=_?Cm*(d/2)**2:d*d,M=$+a*((_?Cm*(y/2)**2:y*y)-$);return _?2*Math.sqrt(M/Cm):Math.sqrt(M)}return d+a*(y-d)}function Lle(e,t,i,r){const a=r!=null?r.shape:void 0,d=e/t.minDataValue,y=Hr(t.minSize,i,r),m=Hr(t.maxSize,i,r);let _=null;return _=a==="circle"?2*Math.sqrt(d*(y/2)**2):a==="square"||a==="diamond"||a==="image"?Math.sqrt(d*y**2):d*y,Jj(_,y,m)}function Dle(e,t,i,r,a){var _,$,M;const[d,y,m]=vS(e,a);if(d===y)return Hr((_=t.stops)==null?void 0:_[d].size,i,r);{const A=Hr(($=t.stops)==null?void 0:$[d].size,i,r);return A+(Hr((M=t.stops)==null?void 0:M[y].size,i,r)-A)*m}}function Fle(e,t,i,r){const a=(r!=null&&r.resolution?r.resolution:1)*lS[t.valueUnit],d=Hr(t.minSize,i,r),y=Hr(t.maxSize,i,r),{valueRepresentation:m}=t;let _=null;return _=m==="area"?2*Math.sqrt(e/Cm)/a:m==="radius"||m==="distance"?2*e/a:e/a,Jj(_,d,y)}function Kj(e,t,i,r,a){switch(t.transformationType){case Gi.Additive:return Nle(e,t,i,r);case Gi.Constant:return jle(t,i,r);case Gi.ClampedLinear:return Rle(e,t,i,r);case Gi.Proportional:return Lle(e,t,i,r);case Gi.Stops:return Dle(e,t,i,r,a);case Gi.RealWorldSize:return Fle(e,t,i,r);case Gi.Identity:return e;case Gi.Unknown:return null}}function zle(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const a={scale:t,view:i};let d=Hr(e.minSize,eT,a),y=Hr(e.maxSize,eT,a);if(d!=null||y!=null){if(d>y){const m=y;y=d,d=m}return{minSize:d,maxSize:y}}}function Vle(e,t,i){if(!e.visualVariables)return;const r=[],a=[],d=[],y=[],m=[];for(const _ of e.visualVariables)switch(_.type){case"color":a.push(_);break;case"opacity":d.push(_);break;case"rotation":m.push(_);break;case"size":y.push(_)}return a.forEach(_=>{const $=Bj(_,t,i);r.push({variable:_,value:$})}),d.forEach(_=>{const $=Hj(_,t,i);r.push({variable:_,value:$})}),m.forEach(_=>{const $=Wj(_,t,i);r.push({variable:_,value:$})}),y.forEach(_=>{const $=w2(_,t,i);r.push({variable:_,value:$})}),r.filter(_=>_.value!=null)}function vS(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((a,d)=>e<a?(r=d,!0):(i=d,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Gle(e,t,i){const r=["proportional","proportional","proportional"];for(const a of e){const d=a.useSymbolValue?"symbol-value":w2(a,t,i);switch(a.axis){case"width":r[0]=d;break;case"depth":r[1]=d;break;case"height":r[2]=d;break;case"width-and-depth":r[0]=d,r[1]=d;break;case"all":case void 0:case null:r[0]=d,r[1]=d,r[2]=d;break;default:a.axis}}return r}const Lge=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Gle,getColor:Bj,getOpacity:Hj,getRotationAngle:Wj,getSize:w2,getSizeForValue:Kj,getSizeFromNumberOrVariable:Hr,getSizeRangeAtScale:zle,getVisualVariableValues:Vle,viewScaleRE:Uj},Symbol.toStringTag,{value:"Module"}));var r_;const Ty=new ut({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),s_=new ut({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function tT(e){if(e!=null)return typeof e=="string"||typeof e=="number"?mt(e):e.type==="size"?ql(e)?e:(delete(e={...e}).type,new _t(e)):void 0}function iT(e,t,i){if(typeof e!="object")return e;const r=new _t;return r.read(e,i),r}let _t=r_=class extends f1{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Uj.test(this.valueExpression)}}set expression(e){fe.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){ql(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),ql(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return qj(this)}set maxDataValue(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return tT(e)}readMaxSize(e,t,i){return iT(e,t,i)}set minDataValue(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(fe.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return tT(e)}readMinSize(e,t,i){return iT(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(fe.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Ole(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const a=this.index,d=typeof a=="string"?a:`visualVariables[${a}]`;r.messages.push(new se("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:d+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?s_.read(e):null}clone(){return new r_({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ql(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ql(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Gi.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Gi.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};b([S({readOnly:!0})],_t.prototype,"cache",null),b([S({type:Ty.apiValues,json:{type:Ty.jsonValues,origins:{"web-map":{read:!1}},read:Ty.read,write:Ty.write}})],_t.prototype,"axis",void 0),b([S({type:String,value:null,json:{read:!1}})],_t.prototype,"expression",null),b([S()],_t.prototype,"index",null),b([S({type:String,readOnly:!0})],_t.prototype,"inputValueType",null),b([S({type:kle,json:{write:!0}})],_t.prototype,"legendOptions",void 0),b([S({type:Number,value:null,json:{write:!0}})],_t.prototype,"maxDataValue",null),b([S({type:Number,value:null,json:{write:!0}})],_t.prototype,"maxSize",null),b([Tt("maxSize")],_t.prototype,"castMaxSize",null),b([me("maxSize")],_t.prototype,"readMaxSize",null),b([S({type:Number,value:null,json:{write:!0}})],_t.prototype,"minDataValue",null),b([S({type:Number,value:null,json:{write:!0}})],_t.prototype,"minSize",null),b([Tt("minSize")],_t.prototype,"castMinSize",null),b([me("minSize")],_t.prototype,"readMinSize",null),b([S({type:String,json:{write:!0}})],_t.prototype,"normalizationField",void 0),b([S({readOnly:!0})],_t.prototype,"arcadeRequired",null),b([S({type:String})],_t.prototype,"scaleBy",void 0),b([S({type:[Uc],value:null,json:{write:!0}})],_t.prototype,"stops",null),b([S({type:["outline"],json:{write:!0}})],_t.prototype,"target",void 0),b([S({type:String,readOnly:!0})],_t.prototype,"transformationType",null),b([S({type:["size"],json:{type:["sizeInfo"]}})],_t.prototype,"type",void 0),b([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],_t.prototype,"useSymbolValue",void 0),b([S({type:String,json:{write:!0}})],_t.prototype,"valueExpression",void 0),b([me("valueExpression",["valueExpression","expression"])],_t.prototype,"readValueExpression",null),b([Se("web-scene","valueExpression")],_t.prototype,"writeValueExpressionWebScene",null),b([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],_t.prototype,"valueRepresentation",void 0),b([S({type:s_.apiValues,json:{write:s_.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],_t.prototype,"valueUnit",void 0),b([me("valueUnit")],_t.prototype,"readValueUnit",null),_t=r_=b([B("esri.renderers.visualVariables.SizeVariable")],_t);const _2=_t,qle={color:zj,size:_2,opacity:Vj,rotation:Gj},Ule=new ut({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ble=/^\[([^\]]+)\]$/i;let Nm=class extends De{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),(t=t&&t.filter(i=>!!i))&&t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let a=null;return a=i.target===r.target?0:i.target?1:-1,a});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:a,rotationType:d}=i,y=a&&a.match(Ble),m=y&&y[1];if(m&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:d,field:m})),t)return t.map(_=>{const $=Ule.read(_.type),M=qle[$];M||(fe.getLogger(this).warn(`Unknown variable type: ${$}`),r&&r.messages&&r.messages.push(new Gs("visual-variable:unsupported",`visualVariable of type '${$}' is not supported`,{definition:_,context:r})));const A=new M;return A.read(_,r),A})}writeVariables(t,i){const r=[];for(const a of t){const d=a.toJSON(i);d&&r.push(d)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};b([S()],Nm.prototype,"visualVariables",null),Nm=b([B("esri.renderers.visualVariables.VisualVariableFactory")],Nm);const Hle=Nm,Wle={base:f1,key:"type",typeMap:{opacity:Vj,color:zj,rotation:Gj,size:_2}},n0=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Hle}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,a){return this._vvFactory.readVariables(i,r,a)}writeVisualVariables(i,r,a,d){r[a]=this._vvFactory.writeVariables(i,d)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const a=this.visualVariables;return a?a.filter(d=>d.type===i&&(typeof r=="string"?d.target===r:r!==!1||!d.target)):[]}async collectVVRequiredFields(i,r){let a=[];this.visualVariables&&(a=a.concat(this.visualVariables));for(const d of a)d&&(d.field&&hs(i,r,d.field),d.normalizationField&&hs(i,r,d.normalizationField),d.valueExpression&&(Jle(d.valueExpression,i,r)||await Rr(i,r,d.valueExpression)))}};return b([S({types:[Wle],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),b([me("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),b([Se("visualVariables")],t.prototype,"writeVisualVariables",null),t=b([B("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Jle(e,t,i){const r=Ile(e);return r!=null&&(hs(t,i,r),!0)}const P0={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Kle(e,t=P0){var m,_;if(!e)return{symbol:null};const{retainId:i=P0.retainId,ignoreDrivers:r=P0.ignoreDrivers,hasLabelingContext:a=P0.hasLabelingContext,retainCIM:d=P0.retainCIM}=t;let y=null;if(T9(e)||e instanceof Qh)y=e.clone();else if(e.type==="cim"){const $=(_=(m=e.data)==null?void 0:m.symbol)==null?void 0:_.type;if($!=="CIMPointSymbol")return{error:new se("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${$||"unknown"}' is unsupported in 3D`,{symbol:e})};y=d?e.clone():vh.fromCIMSymbol(e)}else if(e instanceof Hs)y=Xv.fromSimpleLineSymbol(e);else if(e instanceof lu)y=vh.fromSimpleMarkerSymbol(e);else if(e instanceof e2)y=vh.fromPictureMarkerSymbol(e);else if(e instanceof Xh)y=t.geometryType&&t.geometryType==="mesh"?Qv.fromSimpleFillSymbol(e):r1.fromSimpleFillSymbol(e);else{if(!(e instanceof e0))return{error:new se("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=a?Zv.fromTextSymbol(e):vh.fromTextSymbol(e)}return i&&y&&y.type!=="cim"&&(y.id=e.id),r&&T9(y)&&y.symbolLayers.forEach($=>$.ignoreDrivers=!0),{symbol:y}}function fv(e,t,i,r){const a=Yj(e,{},{context:r,isLabelSymbol:!1});a!=null&&(t[i]=a)}function rT(e,t,i,r){const a=Yj(e,{},{context:r,isLabelSymbol:!0});a!=null&&(t[i]=a)}function sT(e){return e instanceof Qp||e instanceof Qh}function Yj(e,t,i){if(e==null)return null;const{context:r,isLabelSymbol:a}=i,d=r==null?void 0:r.origin,y=r==null?void 0:r.messages;if(d==="web-scene"&&!sT(e)){const m=Kle(e,{retainCIM:!0,hasLabelingContext:a});return m.symbol!=null?m.symbol.write(t,r):(y==null||y.push(new se("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:m.error})),null)}return(d==="web-map"||d==="portal-item"&&!nM(r==null?void 0:r.layer))&&sT(e)?(y==null||y.push(new se("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function Fge(e,t){return NJ(e,null,t)}const o0={types:iO,json:{write:{writer:fv},origins:{"web-scene":{types:S7,write:{writer:fv},read:{reader:Gp({types:S7})}}}}},Zj={types:{base:Kr,key:"type",typeMap:{"simple-fill":Eh.typeMap["simple-fill"],"picture-fill":Eh.typeMap["picture-fill"],"polygon-3d":Eh.typeMap["polygon-3d"]}},json:{write:{writer:fv},origins:{"web-scene":{type:r1,write:{writer:fv}}}}},jm={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var n_;let gl=n_=class extends pe{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new n_({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};b([S({type:String,json:{write:!0}})],gl.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],gl.prototype,"label",void 0),b([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],gl.prototype,"minValue",void 0),b([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],gl.prototype,"maxValue",void 0),b([S(o0)],gl.prototype,"symbol",void 0),gl=n_=b([B("esri.renderers.support.ClassBreakInfo")],gl);const yv=gl;var o_;const Xj="log",Rm="percent-of-total",Lm="field",Iy=new ut({esriNormalizeByLog:Xj,esriNormalizeByPercentOfTotal:Rm,esriNormalizeByField:Lm}),Yle=yi(yv);let Ai=o_=class extends n0(Oa){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(a=>{const d=new yv;return d.read(a,i),d.minValue==null&&(d.minValue=r),d.maxValue==null&&(d.maxValue=d.minValue),r=d.maxValue,d})}writeClassBreakInfos(e,t,i,r){const a=e.map(d=>d.write({},r));this._areClassBreaksConsecutive()&&a.forEach(d=>delete d.classMinValue),t[i]=a}castField(e){return e==null?e:typeof e=="function"?(fe.getLogger(this).error(".field: field must be a string value"),null):qf(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&Lm||i&&Rm||null,t&&i&&fe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==Lm&&e!==Rm||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new yv({minValue:e,maxValue:t,symbol:rO(i)}):Yle(re(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const a=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(a[0]===e&&a[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return!this.valueExpression||t!=null&&t.arcade!=null||fe.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;!this.valueExpression||t!=null&&t.arcade!=null||(i={...i,arcade:await Vh()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null||t.arcade==null))return void fe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null||t.arcade==null)){const a=await Vh(),{arcadeUtils:d}=a;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:a}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,a)=>r+a.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new o_({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:re(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:re(this.visualVariables),legendOptions:re(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Rr(e,t,this.valueExpression)];hs(e,t,this.field),hs(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:a,arcade:d}=t??{},{valueExpression:y}=this;let m=this._compiledValueExpression.valueExpression===y?this._compiledValueExpression.compiledFunction:null;const _=d.arcadeUtils;if(!m){const M=_.createSyntaxTree(y);m=_.createFunction(M),this._compiledValueExpression.compiledFunction=m}this._compiledValueExpression.valueExpression=y;const $=_.executeFunction(m,_.createExecContext(e,_.getViewInfo({viewingMode:i,scale:r,spatialReference:a})));return this._getBreakIndexfromInfos($)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let a=parseFloat(i[t]);if(r){const d=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Xj)a=Math.log(a)*Math.LOG10E;else if(r!==Rm||d==null||isNaN(d)){if(r===Lm&&!isNaN(y)){if(isNaN(a)||isNaN(y))return-1;a/=y}}else a=a/d*100}return this._getBreakIndexfromInfos(a)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};b([S(Zj)],Ai.prototype,"backgroundFillSymbol",void 0),b([S({type:[yv]})],Ai.prototype,"classBreakInfos",void 0),b([me("classBreakInfos")],Ai.prototype,"readClassBreakInfos",null),b([Se("classBreakInfos")],Ai.prototype,"writeClassBreakInfos",null),b([S({type:String,json:{write:!0}})],Ai.prototype,"defaultLabel",void 0),b([S(o0)],Ai.prototype,"defaultSymbol",void 0),b([S({type:String,json:{write:!0}})],Ai.prototype,"field",void 0),b([Tt("field")],Ai.prototype,"castField",null),b([S({type:Boolean})],Ai.prototype,"isMaxInclusive",void 0),b([S({type:vp,json:{write:!0}})],Ai.prototype,"legendOptions",void 0),b([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ai.prototype,"minValue",null),b([S({type:String,json:{write:!0}})],Ai.prototype,"normalizationField",void 0),b([S({type:Number,cast:e=>Cs(e),json:{write:!0}})],Ai.prototype,"normalizationTotal",void 0),b([S({type:Iy.apiValues,value:null,json:{type:Iy.jsonValues,read:Iy.read,write:Iy.write}})],Ai.prototype,"normalizationType",null),b([je({classBreaks:"class-breaks"})],Ai.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ai.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],Ai.prototype,"valueExpressionTitle",void 0),Ai=o_=b([B("esri.renderers.ClassBreaksRenderer")],Ai);const Qj=Ai,sw=-3;var Ml;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Ml||(Ml={}));let zge=class{constructor(t,i,r){this.name=t,this._storage=i,this.id=Xle+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(t,i,r,a=0){this._storage.put(this,t,i,r,a)}get(t){const i=this._storage.get(this,t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this,t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this,t,i,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Zle=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Sh,this._users=new Sh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimits()}put(t,i,r,a,d){i=t.id+i;const y=this._db.get(i);if(y&&(this._size-=y.size,t.size-=y.size,this._db.delete(i),y.entry!==r&&this._notifyRemove(i,y.entry,Ml.ALL)),a>this._maxSize)return void this._notifyRemove(i,r,Ml.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!a||a<0)return void console.warn("Refusing to cache entry with invalid size "+a);const m=1+Math.max(d,sw)-sw;this._db.set(i,{entry:r,size:a,lifetime:m,lives:m}),this._size+=a,t.size+=a,this._checkSizeLimits()}updateSize(t,i,r,a){i=t.id+i;const d=this._db.get(i);if(d&&d.entry===r){for(this._size-=d.size,t.size-=d.size;a>this._maxSize;){const y=this._notifyRemove(i,r,Ml.SOME);if(!(y!=null&&y>0))return void this._db.delete(i);a=y}d.size=a,this._size+=a,t.size+=a,this._checkSizeLimits()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((y,m)=>{const _=y.lifetime;r[_]=(r[_]||0)+y.size,this._users.forAll($=>{const{id:M,name:A}=$;if(m.startsWith(M)){const P=i[A]||0;i[A]=P+y.size}})});const a={};this._users.forAll(y=>{const m=y.name;if("hitRate"in y&&typeof y.hitRate=="number"&&!isNaN(y.hitRate)&&y.hitRate>0){const _=i[m]||0;i[m]=_,a[m]=Math.round(100*y.hitRate)+"%"}else a[m]="0%"});const d=Object.keys(i);d.sort((y,m)=>i[m]-i[y]),d.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+a[y]);for(let y=r.length-1;y>=0;--y){const m=r[y];m&&(t["Priority "+(y+sw-1)]=Math.round(m/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,a)=>{a.startsWith(i)&&(this._size-=r.size,this._db.delete(a),this._notifyRemove(a,r.entry,Ml.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,Ml.ALL)),this._users.forEach(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let a;return this._removeFuncs.some(d=>{if(t.startsWith(d[0])){const y=d[1](i,r);return typeof y=="number"&&(a=y),!0}return!1}),a}_checkSizeLimits(){if(this._size>this._maxSize){for(const[t,i]of this._db)if(this._purgeItem(t,i),this._size<=.9*this.maxSize)return}this._users.forEach(t=>{if(t.maxSize>0&&t.size>t.maxSize){for(const[i,r]of this._db)if(i.startsWith(t.id)&&(this._purgeItem(i,r,t),t.size<=.9*t.maxSize))return}})}_purgeItem(t,i,r=this._users.find(a=>t.startsWith(a.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const a=this._notifyRemove(t,i.entry,Ml.SOME);a!=null&&a>0&&(this._size+=a,r&&(r.size+=a),i.lives=i.lifetime,i.size=a,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},Xle=0,Qle=class{constructor(t,i){this._storage=new Zle,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function eue(e){return e.type==="date"||e.type==="esriFieldTypeDate"||e.type==="date-only"||e.type==="esriFieldTypeDateOnly"||e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset"}function nT(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function oT(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}let bS=class{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;const i=[];for(const r of t){const a=r==null?void 0:r.name,d=lT(r==null?void 0:r.name);if(a&&d){const y=aT(a);this._fieldsMap.set(a,r),this._fieldsMap.set(y,r),this._normalizedFieldsMap.set(d,r),i.push(y),eue(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):hA(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),nT(r)||oT(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)nT(t)||oT(t)||t.nullable||tB(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(aT(t))??this._normalizedFieldsMap.get(lT(t)),i&&this._fieldsMap.set(t,i),i)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name??void 0}};function aT(e){return e.trim().toLowerCase()}function lT(e){var t;return((t=FU(e))==null?void 0:t.toLowerCase())??""}const uT="esri.renderers.support.DictionaryLoader",tue={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let wS=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Qle(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(L){if(Jr(L))return this._dictionaryPromise=null,null}const a=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),d={};if(this.fieldMap)for(const L of this._symbolFields){const F=this._getFieldName(this.fieldMap[L]);d[L]=F?a?t.attributes[F]:""+t.attributes[F]:""}let y=null;try{y=r==null?void 0:r(d,i)}catch{return null}if(!y||typeof y!="string")return null;const m=s4(y).toString(),_=this._symbolCache.get(m);if(_)return _.catch(()=>{this._symbolCache.pop(m)}),_;const $=y.split(";"),M=[],A=[];for(const L of $)if(L)if(L.includes("po:")){const F=L.substr(3).split("|");if(F.length===3){const V=F[0],J=F[1];let Q=F[2];if(J==="DashTemplate")Q=Q.split(" ").map(Y=>Number(Y));else if(J==="Color"){const Y=new et(Q).toRgba();Q=[Y[0],Y[1],Y[2],255*Y[3]]}else Q=Number(Q);A.push({primitiveName:V,propertyName:J,value:Q})}}else if(L.includes("|")){for(const F of L.split("|"))if(this._itemNames.has(F)){M.push(F);break}}else this._itemNames.has(L)&&M.push(L);const P=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point",j=this._cimPartsToCIMSymbol(M,A,P,i);return this._symbolCache.put(m,j,1),j}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void fe.getLogger(uT).error("no valid URL!");const i=Vt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,Vh()]);if(!r)throw this._dictionaryPromise=null,new se("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:a,dictionary_version:d,expression:y,itemsNames:m}=r,_=y;let $=!1;d&&(this._dictionaryVersion=dv.parse(d),$=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(m),this._symbolFields=a.symbol;const M={};if(this.config){const j=this.config;for(const L in j)M[L]=j[L]}if(a.configuration)for(const j of a.configuration)M.hasOwnProperty(j.name)||(M[j.name]=j.value);const A=[];if(t!=null&&t.fields&&this.fieldMap)for(const j of this._symbolFields){const L=this.fieldMap[j],F=t.fields.filter(V=>V.name.toLowerCase()===(L==null?void 0:L.toLowerCase()));F.length>0&&A.push({...F[0],type:$?F[0].type:"esriFieldTypeString"})}A.length>0&&(this._fieldIndex=new bS(A));const P=RU(_,t!=null?t.spatialReference:null,A,M).then(j=>{const L={scale:0};return(F,V)=>{if(j==null)return null;const J=j.repurposeFeature({geometry:null,attributes:F});return L.scale=V!=null?V.scale??void 0:void 0,j.evaluate({$feature:J,$view:L},j.services)}}).catch(j=>(fe.getLogger(uT).error("Creating dictinoary expression failed:",j),null));return this._dictionaryPromise=P,P}async _cimPartsToCIMSymbol(t,i,r,a){const d=new Array(t.length);for(let _=0;_<t.length;_++)d[_]=this._getSymbolPart(t[_],a);const y=await Promise.all(d),m=this.fieldMap;if(m)for(const _ of y)eR(_,m);return new Qf({data:this._combineSymbolParts(y,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(d=>d.data);const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),a=Vt(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,a);try{return(await a).data}catch(d){throw this._ongoingRequests.delete(t),d}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const a={...t[0]};if(t.length>1){a.symbolLayers=[];for(const d of t){const y=d;a.symbolLayers.unshift(...y.symbolLayers)}}return r&&(a.callout=tue),{type:"CIMSymbolReference",symbol:a,primitiveOverrides:i}}_getFieldName(t){if(this._fieldIndex!==null){const i=this._fieldIndex.get(t);return i?i.name:t}return t}};function eR(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const a=i[r];a&&a.enable!==!1&&a.type==="CIMVectorMarker"&&iue(a,t)}}function iue(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const a=r.symbol;if(a)switch(a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":eR(a,t);break;case"CIMTextSymbol":a.fieldMap=t}}}const Hge=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:wS},Symbol.toStringTag,{value:"Module"}));var a_;let vn=a_=class extends n0(Oa){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new wS(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new a_({config:re(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:re(this.fieldMap),url:re(this.url),visualVariables:re(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Rr(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};b([S({type:wS})],vn.prototype,"_loader",null),b([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],vn.prototype,"config",void 0),b([S({type:Object,json:{write:!0}})],vn.prototype,"fieldMap",void 0),b([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],vn.prototype,"scaleExpression",void 0),b([Se("scaleExpression")],vn.prototype,"writeData",null),b([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],vn.prototype,"scaleExpressionTitle",void 0),b([S({type:String,json:{write:!0}})],vn.prototype,"url",void 0),b([Se("visualVariables")],vn.prototype,"writeVisualVariables",null),vn=a_=b([B("esri.renderers.DictionaryRenderer")],vn);const rue=vn;var l_;let ea=l_=class extends pe{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(fe.getLogger(this).error(".field: field must be a string value"),null):qf(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new l_({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};b([S({type:et,json:{type:[Number],write:!0}})],ea.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],ea.prototype,"field",void 0),b([Tt("field")],ea.prototype,"castField",null),b([S({type:String,json:{write:!0}})],ea.prototype,"label",void 0),b([S({type:String,json:{write:!0}})],ea.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],ea.prototype,"valueExpressionTitle",void 0),ea=l_=b([B("esri.renderers.support.AttributeColorInfo")],ea);const tR=ea;var u_;let Dm=u_=class extends pe{constructor(){super(...arguments),this.unit=null}clone(){return new u_({unit:this.unit})}};b([S({type:String,json:{write:!0}})],Dm.prototype,"unit",void 0),Dm=u_=b([B("esri.renderers.support.DotDensityLegendOptions")],Dm);const sue=Dm;var h_;let qr=h_=class extends n0(Oa){constructor(e){super(e),this.attributes=null,this.backgroundColor=new et([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Hs,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Xh({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new h_({attributes:re(this.attributes),backgroundColor:re(this.backgroundColor),dotBlendingEnabled:re(this.dotBlendingEnabled),dotShape:re(this.dotShape),dotSize:re(this.dotSize),dotValue:re(this.dotValue),legendOptions:re(this.legendOptions),outline:re(this.outline),referenceScale:re(this.referenceScale),visualVariables:re(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await Rr(e,t,i.valueExpression),i.field&&e.add(i.field)}};b([S({type:[tR],json:{write:!0}})],qr.prototype,"attributes",void 0),b([S({type:et,json:{write:!0}})],qr.prototype,"backgroundColor",void 0),b([S({type:Boolean,json:{write:!0}})],qr.prototype,"dotBlendingEnabled",void 0),b([S({type:String,json:{write:!1}})],qr.prototype,"dotShape",void 0),b([S({type:Number,json:{write:!0}})],qr.prototype,"dotSize",void 0),b([S({type:sue,json:{write:!0}})],qr.prototype,"legendOptions",void 0),b([S({type:Hs,json:{default:null,write:!0}})],qr.prototype,"outline",void 0),b([S({type:Number,json:{write:!0}})],qr.prototype,"dotValue",void 0),b([S({type:Number,json:{write:!0}})],qr.prototype,"referenceScale",void 0),b([S({type:Number,json:{write:!0}})],qr.prototype,"seed",void 0),b([je({dotDensity:"dot-density"})],qr.prototype,"type",void 0),qr=h_=b([B("esri.renderers.DotDensityRenderer")],qr);const nue=qr;var c_;let Ed=c_=class extends pe{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new c_({color:this.color,ratio:this.ratio})}};b([S({type:et,json:{type:[Ot],default:null,write:!0}})],Ed.prototype,"color",void 0),b([S({type:Number,json:{write:!0}})],Ed.prototype,"ratio",void 0),Ed=c_=b([B("esri.renderers.support.HeatmapColorStop")],Ed);const Fm=Ed;let Bc=class extends Kt(pe){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};b([S({type:String,json:{write:!0}})],Bc.prototype,"minLabel",void 0),b([S({type:String,json:{write:!0}})],Bc.prototype,"maxLabel",void 0),b([S({type:String,json:{write:!0}})],Bc.prototype,"title",void 0),Bc=b([B("esri.renderers.support.HeatmapLegendOptions")],Bc);function S2(){return[0,0,0,0]}function oue(e){return[e[0],e[1],e[2],e[3]]}function a0(e,t,i,r){return[e,t,i,r]}function aue(e){const t=S2(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function lue(e,t){return new Float64Array(e,t,4)}function iR(){return S2()}function rR(){return a0(1,1,1,1)}function sR(){return a0(1,0,0,0)}function nR(){return a0(0,1,0,0)}function oR(){return a0(0,0,1,0)}function aR(){return a0(0,0,0,1)}const uue=iR(),hue=rR(),cue=sR(),pue=nR(),due=oR(),fue=aR();Object.freeze(Object.defineProperty({__proto__:null,ONES:hue,UNIT_W:fue,UNIT_X:cue,UNIT_Y:pue,UNIT_Z:due,ZEROS:uue,clone:oue,create:S2,createView:lue,fromArray:aue,fromValues:a0,ones:rR,unitW:aR,unitX:sR,unitY:nR,unitZ:oR,zeros:iR},Symbol.toStringTag,{value:"Module"}));const _S=2.4;function yue(e){return xa(e*_S)}function mue(e){return xk(e)/_S}function gue(e,t,i,r){let{color:a,ratio:d}=t,{color:y,ratio:m}=i;m===d&&(m===1?d-=1e-6:m+=1e-6);const _=qs((r-d)/(m-d),0,1);kM(e,a.toArray(),y.toArray(),_)}function Jge(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:m})=>m>=0&&m<=1).sort((m,_)=>m.ratio-_.ratio).map(({color:m,ratio:_})=>({color:m,ratio:Math.max(_,.001)})),e.length<1)return i;let r=e[0],a=e[0],d=1;const y=S2();for(let m=0;m<512;m++){const _=(m+.5)/512;for(;_>a.ratio&&d<e.length;)r=a,a=e[d++];gue(y,r,a,_),i.set(y,4*m)}return i}function Kge(e,t,i,r){const{radius:a,fieldOffset:d,field:y}=t,m=Math.round(xk(a)),_=new Float64Array(i*r);let $,M=Number.NEGATIVE_INFINITY;const A=wue(y,d),P=new Set;for(const j of e){const L=j.getCursor();for(;L.next();){const F=L.getObjectId();if(P.has(F))continue;P.add(F);const V=L.readLegacyPointGeometry(),J=128;if(V.x<-J||V.x>=i+J||V.y<-J||V.y>r+J)continue;const Q=+A(L),Y=Math.max(0,Math.round(V.x)-m),te=Math.max(0,Math.round(V.y)-m),oe=Math.min(r,Math.round(V.y)+m),ae=Math.min(i,Math.round(V.x)+m);for(let de=te;de<oe;de++)for(let ve=Y;ve<ae;ve++){const Ie=de*i+ve,Oe=bue(V.x-ve,V.y-de,m);$=_[Ie]+=Oe*Q,$>M&&(M=$)}}}return{matrix:_.buffer,max:M}}function Yge(e,t,i,r,a,d){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const y=e.getImageData(0,0,t,t);i&&r&&y.data.set(new Uint8ClampedArray(vue(t,i,r,a,d))),e.putImageData(y,0,0)}function vue(e,t,i,r,a){const d=new Uint32Array(e*e),y="buffer"in t?t:new Float64Array(t),m="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),_=m.length/(a-r);for(let $=0;$<y.length;$++){const M=y[$],A=Math.floor((M-r)*_);d[$]=m[qs(A,0,m.length-1)]}return d.buffer}function bue(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Zge(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function wue(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var p_;const lR="esri.renderers.HeatmapRenderer",_ue=fe.getLogger(lR);function hT(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:a,maxPixelIntensity:d,minPixelIntensity:y,...m}=e;return m}}return e}let Fi=p_=class extends Oa{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Fm({ratio:0,color:new et("rgba(255, 140, 0, 0)")}),new Fm({ratio:.75,color:new et("rgba(255, 140, 0, 1)")}),new Fm({ratio:.9,color:new et("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return hT(e)}get blurRadius(){return mue(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",yue(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(_S**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||qi(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,Vp(()=>{qw(_ue,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=hT(e),super.read(e,t)}getSymbol(){return new lu}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await hs(e,t,i),r&&typeof r=="string"&&await Rr(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new p_({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:re(this.colorStops),field:this.field,legendOptions:re(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};b([S({type:gS,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Fi.prototype,"authoringInfo",void 0),b([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Fi.prototype,"blurRadius",null),b([S({type:[Fm],json:{write:!0}})],Fi.prototype,"colorStops",void 0),b([S({type:String,json:{write:!0}})],Fi.prototype,"field",void 0),b([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Fi.prototype,"fieldOffset",void 0),b([S({type:Bc,json:{write:!0}})],Fi.prototype,"legendOptions",void 0),b([S({type:Number,json:{write:!0}})],Fi.prototype,"maxDensity",void 0),b([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Fi.prototype,"maxPixelIntensity",null),b([S({type:Number,json:{write:!0}})],Fi.prototype,"minDensity",void 0),b([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Fi.prototype,"minPixelIntensity",null),b([S({type:Number,cast:mt,json:{write:!0}})],Fi.prototype,"radius",void 0),b([S({type:Number,range:{min:0},json:{default:0,write:!0}})],Fi.prototype,"referenceScale",void 0),b([je({heatmap:"heatmap"})],Fi.prototype,"type",void 0),b([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Fi.prototype,"valueExpression",void 0),b([S({type:String})],Fi.prototype,"valueExpressionTitle",void 0),b([S({readOnly:!0})],Fi.prototype,"_pixelIntensityToDensity",null),Fi=p_=b([B(lR)],Fi);const uR=Fi;let yh=class extends Kt(pe){constructor(){super(...arguments),this.color=new et([0,0,0,0]),this.label=null,this.threshold=0}};b([S({type:et,json:{write:!0}})],yh.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],yh.prototype,"label",void 0),b([S({type:Number,range:{min:0,max:1},json:{write:!0}})],yh.prototype,"threshold",void 0),yh=b([B("esri.renderers.support.OthersCategory")],yh);let zm=class extends Kt(pe){constructor(){super(...arguments),this.title=null}};b([S({type:String,json:{write:!0}})],zm.prototype,"title",void 0),zm=b([B("esri.renderers.support.PieChartLegendOptions")],zm);let ts=class extends n0(Kt(Oa)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new et([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new yh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var t;return new lu({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Oh)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,i)=>t+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await Rr(t,i,r.valueExpression),r.field&&t.add(r.field)}};b([S({type:[tR],json:{write:!0}})],ts.prototype,"attributes",void 0),b([S({type:Xh,json:{default:null,write:!0}})],ts.prototype,"backgroundFillSymbol",void 0),b([S({type:et,json:{write:!0}})],ts.prototype,"defaultColor",void 0),b([S({type:String,json:{write:!0}})],ts.prototype,"defaultLabel",void 0),b([S({type:Number,range:{min:0,max:1},json:{write:!0}})],ts.prototype,"holePercentage",void 0),b([S({type:yh,json:{write:!0}})],ts.prototype,"othersCategory",void 0),b([S({type:zm,json:{write:!0}})],ts.prototype,"legendOptions",void 0),b([S({type:Hs,json:{default:null,write:!0}})],ts.prototype,"outline",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],ts.prototype,"size",void 0),b([je({pieChart:"pie-chart"})],ts.prototype,"type",void 0),ts=b([B("esri.renderers.PieChartRenderer")],ts);const Sue=ts;var d_;let ih=d_=class extends n0(Oa){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new d_({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:re(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};b([S({type:String,json:{write:!0}})],ih.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],ih.prototype,"label",void 0),b([S(o0)],ih.prototype,"symbol",void 0),b([je({simple:"simple"})],ih.prototype,"type",void 0),ih=d_=b([B("esri.renderers.SimpleRenderer")],ih);const x2=ih,xue=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function f_(e){return e instanceof De}function cT(e){return e instanceof Le?Object.keys(e.items):f_(e)?qi(e).keys():e?Object.keys(e):[]}function Ey(e,t){return e instanceof Le?e.items[t]:e[t]}function $ue(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function uf(e){return e?e.declaredClass:null}function hR(e,t){var A;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=cT(e),a=cT(t);if(r.length===0&&a.length===0)return;if(!r.length||!a.length||$ue(e,t))return{type:"complete",oldValue:e,newValue:t};const d=a.filter(P=>!r.includes(P)),y=r.filter(P=>!a.includes(P)),m=r.filter(P=>a.includes(P)&&Ey(e,P)!==Ey(t,P)).concat(d,y).sort(),_=uf(e);if(_&&xue.includes(_)&&m.length)return{type:"complete",oldValue:e,newValue:t};let $;const M=f_(e)&&f_(t);for(const P of m){const j=Ey(e,P),L=Ey(t,P);let F;if((M||typeof j!="function"&&typeof L!="function")&&j!==L&&(j!=null||L!=null)){if(i&&i[P]&&typeof i[P]=="function")F=(A=i[P])==null?void 0:A.call(i,j,L);else if(j instanceof Date&&L instanceof Date){if(j.getTime()===L.getTime())continue;F={type:"complete",oldValue:j,newValue:L}}else F=typeof j=="object"&&typeof L=="object"&&uf(j)===uf(L)?hR(j,L):{type:"complete",oldValue:j,newValue:L};F!=null&&($!=null?$.diff[P]=F:$={type:"partial",diff:{[P]:F}})}}return $}function Tue(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const a of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const d=r.diff[a];if(!d)return!1;r=d}}return!0}function tve(e,t){for(const i of t)if(Tue(e,i))return!0;return!1}function Iue(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&uf(e)!==uf(t)?{type:"complete",oldValue:e,newValue:t}:hR(e,t)}let Hc=class extends Kt(pe){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};b([S(jm)],Hc.prototype,"value",void 0),b([S(jm)],Hc.prototype,"value2",void 0),b([S(jm)],Hc.prototype,"value3",void 0),Hc=b([B("esri.renderers.support.UniqueValue")],Hc);const bp=Hc;let vl=class extends Kt(pe){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new bp({value:r})):i==="object"?t[0]instanceof bp?t:t.map(r=>new bp(r)):null}};b([S({type:String,json:{write:!0}})],vl.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],vl.prototype,"label",void 0),b([S(o0)],vl.prototype,"symbol",void 0),b([S({type:[bp],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new bp({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const a=[r.value,r.value2,r.value3].filter(Oh).map(d=>d.toString());i.push(a)}t.values=i}}}})],vl.prototype,"values",void 0),b([Tt("values")],vl.prototype,"castValues",null),vl=b([B("esri.renderers.support.UniqueValueClass")],vl);const cR=vl;let Md=class extends Kt(pe){constructor(t){super(t),this.heading=null,this.classes=null}};b([S({type:String,json:{write:!0}})],Md.prototype,"heading",void 0),b([S({type:[cR],json:{write:!0}})],Md.prototype,"classes",void 0),Md=b([B("esri.renderers.support.UniqueValueGroup")],Md);const y_=Md;var m_;let rh=m_=class extends pe{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new m_({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};b([S({type:String,json:{write:!0}})],rh.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],rh.prototype,"label",void 0),b([S(o0)],rh.prototype,"symbol",void 0),b([S(jm)],rh.prototype,"value",void 0),rh=m_=b([B("esri.renderers.support.UniqueValueInfo")],rh);const hf=rh,Eue=()=>!!le("enable-feature:force-wosr"),Mue=()=>le.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),Aue=()=>le.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),kue=()=>le.add("enable-i3s-patching",!0,!0,!0),Oue=()=>le.add("enable-i3s-patching",!1,!0,!0),nve=()=>!!le("enable-feature:SceneLayer-editing"),Pue=(e="i3s-patching")=>{switch(Oue(),Aue(),le.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":Mue();break;case"i3s-patching":kue()}};Pue("i3s-patching");let nw={};async function Cue(e,t){try{return{data:(await Lue(e,t)).data,baseUrl:fz(e),styleUrl:e}}catch(i){return Ps(i),null}}function Nue(e,t,i){const r=t.portal!=null?t.portal:Wr.getDefault();let a;const d=`${r.url} - ${r.user&&r.user.username} - ${e}`;return nw[d]||(nw[d]=jue(e,r,i).then(y=>(a=y,y.fetchData())).then(y=>({data:y,baseUrl:a.itemUrl??"",styleName:e}))),nw[d]}function jue(e,t,i){return t.load(i).then(()=>{const r=new go({disableExtraQuery:!0,query:`owner:${pT} AND type:${dT} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var y;let a=null;const d=e.toLowerCase();if(r&&Array.isArray(r)){for(const m of r)if(((y=m.typeKeywords)==null?void 0:y.some($=>$.toLowerCase()===d))&&m.type===dT&&m.owner===pT){a=m;break}}if(!a)throw new se("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return a.load(i)})}function Rue(e,t,i){return e&&e.styleUrl!=null?Cue(e.styleUrl,i):e&&e.styleName!=null?Nue(e.styleName,t,i):Promise.reject(new se("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function ove(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function ave(e,t,i=["gltf"]){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Eue())for(const r of i){const a=e.formatInfos.find(d=>d.type===r);if(a)return a.href}return e.webRef}function Lue(e,t){const i={responseType:"json",query:{f:"json"},...t};return Vt(An(e),i)}const pT="esri_en",dT="Style",lve="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Ad;const pR="esri.renderers.UniqueValueRenderer",Ja=fe.getLogger(pR),fT="uvInfos-watcher",yT="uvGroups-watcher",Due=",",Fue=yi(hf);function zue(e){const{field1:t,field2:i,field3:r,fieldDelimiter:a,uniqueValueInfos:d,valueExpression:y}=e,m=!(!t||!i);return[{classes:(d??[]).map(_=>{var J;const{symbol:$,label:M,value:A,description:P}=_,[j,L,F]=m?((J=A==null?void 0:A.toString())==null?void 0:J.split(a||""))||[]:[A],V=[];return(t||y)&&V.push(j),i&&V.push(L),r&&V.push(F),{symbol:$,label:M,values:[V],description:P}})}]}let ti=Ad=class extends n0(Oa){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const a={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let d=0;d<i.length;d++){const y=t.find(m=>m.value===i[d].value);y?Iue(y,i[d])?(a.changed.push({type:"complete",oldValue:y,newValue:i[d]}),r=!0):a.unchanged.push({oldValue:y,newValue:i[d]}):(a.added.push(i[d]),r=!0)}for(let d=0;d<t.length;d++)i.find(y=>y.value===t[d].value)||(a.removed.push(t[d]),r=!0);return r?a:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:qf(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new se("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ja.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Wr.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=Zp(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=t1(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Ja.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ja.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Ja.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?Fue(e):new hf({value:e,symbol:rO(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ja.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t){for(let i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return!this.valueExpression||t!=null&&t.arcade!=null||(i={...i,arcade:await Vh()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null||t.arcade==null))return void Ja.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null||i.arcade==null)){const a=await Vh(),{arcadeUtils:d}=a;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:a}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((a,d)=>a+d.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Ad({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:re(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:re(this.visualVariables),legendOptions:re(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:re(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=re(this.uniqueValueInfos),i=re(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(re(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Rr(e,t,this.valueExpression)];hs(e,t,this.field),hs(e,t,this.field2),hs(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return Rue(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const a=new Qh({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=a,this._isDefaultSymbolDerived=!0);const d=new hf({value:r.name,symbol:a});t.push(d),this._valueInfoMap[r.name]=d}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Due)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(fT);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(ke(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,a)=>{r!==a&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,fT)}}_watchUniqueValueGroups(){this.removeHandles(yT);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(ke(()=>({classes:i.classes}),(r,a)=>{r!==a&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(ke(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(a,d)=>{a!==d&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,yT)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:a,uniqueValueGroups:d,valueExpression:y}=this;if(!t&&!y)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const m=!(!t||!i);for(const _ of d)for(const $ of _.classes??[]){const{symbol:M,label:A,values:P,description:j}=$;for(const L of P??[]){const{value:F,value2:V,value3:J}=L,Q=[F];i&&Q.push(V),r&&Q.push(J);const Y=m?Q.join(a||""):Q[0];e.push(new hf({symbol:M,label:A,value:Y,description:j}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:a,uniqueValueInfos:d}=this;if(!t&&!r||!d.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!t||!i),m=d.map($=>{var J;const{symbol:M,label:A,value:P,description:j}=$,[L,F,V]=y?((J=P==null?void 0:P.toString())==null?void 0:J.split(a||""))||[]:[P];return new cR({symbol:M,label:A,description:j,values:[new bp({value:L,value2:F,value3:V})]})}),_=[new y_({classes:m})];e&&Object.freeze(_),this._set("uniqueValueGroups",_),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:a,arcade:d}=t??{};let y=this._cache.compiledFunc;const m=d.arcadeUtils;if(!y){const $=m.createSyntaxTree(this.valueExpression);y=m.createFunction($),this._cache.compiledFunc=y}const _=m.executeFunction(y,m.createExecContext(e,m.getViewInfo({viewingMode:i,scale:r,spatialReference:a})));return this._valueInfoMap[_+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const a=this.field2,d=this.field3,y=[];t&&y.push(i[t]),a&&y.push(i[a]),d&&y.push(i[d]),r=y.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new Ad(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Wr.getDefault());const r=i.populateFromStyle();return r.catch(a=>{Ja.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",a)}),r}static fromStyleUrl(e,t){const i=new Ad(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(a=>{Ja.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",a)}),r}};b([S({readOnly:!0})],ti.prototype,"_cache",null),b([je({uniqueValue:"unique-value"})],ti.prototype,"type",void 0),b([S(Zj)],ti.prototype,"backgroundFillSymbol",void 0),b([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ti.prototype,"field",null),b([Tt("field")],ti.prototype,"castField",null),b([Se("field")],ti.prototype,"writeField",null),b([S({type:String,value:null,json:{write:!0}})],ti.prototype,"field2",null),b([S({type:String,value:null,json:{write:!0}})],ti.prototype,"field3",null),b([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ti.prototype,"orderByClassesEnabled",void 0),b([S({type:String,value:null,json:{write:!0}})],ti.prototype,"valueExpression",null),b([S({type:String,json:{write:!0}})],ti.prototype,"valueExpressionTitle",void 0),b([S({type:vp,json:{write:!0}})],ti.prototype,"legendOptions",void 0),b([S({type:String,json:{write:!0}})],ti.prototype,"defaultLabel",void 0),b([S(II({...o0},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ti.prototype,"defaultSymbol",null),b([S({type:String,value:null,json:{write:!0}})],ti.prototype,"fieldDelimiter",null),b([S({type:Wr,readOnly:!0})],ti.prototype,"portal",void 0),b([me("portal",["styleName"])],ti.prototype,"readPortal",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ti.prototype,"styleOrigin",void 0),b([me("styleOrigin",["styleName","styleUrl"])],ti.prototype,"readStyleOrigin",null),b([Se("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ti.prototype,"writeStyleOrigin",null),b([S({type:[y_],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||zue(t)).map(r=>y_.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ti.prototype,"uniqueValueGroups",null),b([S({type:[hf],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ti.prototype,"uniqueValueInfos",null),ti=Ad=b([B(pR)],ti);const SS=ti,y1={key:"type",base:Oa,typeMap:{heatmap:uR,simple:x2,"unique-value":SS,"class-breaks":Qj,"dot-density":nue,dictionary:rue,"pie-chart":Sue},errorContext:"renderer"},dR={key:"type",base:Oa,typeMap:{simple:x2,"unique-value":SS,"class-breaks":Qj,heatmap:uR},errorContext:"renderer"};function uve(e,t){return Df(e,null,t)}const Vue=Gp({types:y1});function Df(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Gs("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):Vue(e,t,i):null}function fR(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let a=0;a<r.length;a++)t[i][a]=fR(r[a])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var Al;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Al||(Al={}));const mT=4294967296,Gue=new TextDecoder("utf-8"),que=le("safari")||le("ios")?6:le("ff")?12:32;let g_=class Vm{constructor(t,i,r=0,a=t?t.byteLength:0){this._tag=0,this._dataType=Al.unknown,this._init(t,i,r,a)}_init(t,i,r,a){this._data=t,this._dataView=i,this._pos=r,this._end=a}asUnsafe(){return this}clone(){return new Vm(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(t!==void 0)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*mT;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*mT;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,a){const d=this.getMessage(),y=t(d,i,r,a);return d.release(),y}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=Vm.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){Vm.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Al.varint:this._decodeVarint();break;case Al.fixed64:this._skip(8);break;case Al.delimited:this._skip(this._getLength());break;case Al.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,a=0;if(this._end-i>=10)do{if(a=t[i++],r|=127&a,(128&a)==0||(a=t[i++],r|=(127&a)<<7,(128&a)==0)||(a=t[i++],r|=(127&a)<<14,(128&a)==0)||(a=t[i++],r|=(127&a)<<21,(128&a)==0)||(a=t[i++],r+=268435456*(127&a),(128&a)==0)||(a=t[i++],r+=34359738368*(127&a),(128&a)==0)||(a=t[i++],r+=4398046511104*(127&a),(128&a)==0)||(a=t[i++],r+=562949953421312*(127&a),(128&a)==0)||(a=t[i++],r+=72057594037927940*(127&a),(128&a)==0)||(a=t[i++],r+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;i!==this._end&&(a=t[i],(128&a)!=0);)++i,r+=(127&a)*d,d*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=a*d}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i=this._pos,r=0,a=0;const d=1&t[i];if(this._end-i>=10)do{if(a=t[i++],r|=127&a,(128&a)==0||(a=t[i++],r|=(127&a)<<7,(128&a)==0)||(a=t[i++],r|=(127&a)<<14,(128&a)==0)||(a=t[i++],r|=(127&a)<<21,(128&a)==0)||(a=t[i++],r+=268435456*(127&a),(128&a)==0)||(a=t[i++],r+=34359738368*(127&a),(128&a)==0)||(a=t[i++],r+=4398046511104*(127&a),(128&a)==0)||(a=t[i++],r+=562949953421312*(127&a),(128&a)==0)||(a=t[i++],r+=72057594037927940*(127&a),(128&a)==0)||(a=t[i++],r+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let y=1;for(;i!==this._end&&(a=t[i],(128&a)!=0);)++i,r+=(127&a)*y,y*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=a*y}return this._pos=i,d?-(r+1)/2:r/2}_getLength(){if(this._dataType!==Al.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>que){const y=t.subarray(i,r);return Gue.decode(y)}let a="",d="";for(let y=i;y<r;++y){const m=t[y];128&m?d+="%"+m.toString(16):(a+=decodeURIComponent(d)+String.fromCharCode(m),d="")}return d.length&&(a+=decodeURIComponent(d)),a}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}};g_.pool=new ru(g_,void 0,e=>{e._data=null,e._dataView=null});let Fn=class Gm{constructor(t=[],i=[],r=!1){this.lengths=t??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,a,d]=t,y=a-i,m=d-r;return new Gm([5],[i,r,y,0,0,m,-y,0,0,-m])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const a=this.lengths[r];for(let d=0;d<a;d++)t(this.coords[2*(d+i)],this.coords[2*(d+i)+1]);i+=a}}clone(t){return t?(t.set(this.coords),new Gm(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Gm(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},iu=class yR{constructor(t=null,i={},r,a){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=a,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new yR(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}};function Uue(e){return!(e.geometry==null||!e.geometry.coords||!e.geometry.coords.length)}let hve=class extends iu{},mR=class gR{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new gR;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const vR=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let pve=class{constructor(t){this._options=t,this.geometryTypes=vR,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new mR}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||Ti(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=Tp(this._options.sourceSpatialReference)/Tp(t.spatialReference);if(i!==1)for(const r of t.features){if(!Uue(r))continue;const a=r.geometry.coords;for(let d=2;d<a.length;d+=3)a[d]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new iu}createSpatialReference(){return{wkid:0}}createGeometry(){return new Fn}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Fn}};const gT=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],vT=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],bT=["upperLeft","lowerLeft"];function wT(e){return e>=gT.length?null:gT[e]}function Bue(e){return e>=vT.length?null:vT[e]}function _T(e){return e>=bT.length?null:bT[e]}function ST(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Hue(e,t,i){const a=e.asUnsafe(),d=t.createPointGeometry(i);for(;a.next();)switch(a.tag()){case 3:{const y=a.getUInt32(),m=a.pos()+y;let _=0;for(;a.pos()<m;)t.addCoordinatePoint(d,a.getSInt64(),_++);break}default:a.skip()}return d}function Wue(e,t,i){const d=e.asUnsafe(),y=t.createGeometry(i),m=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;d.next();)switch(d.tag()){case 2:{const _=d.getUInt32(),$=d.pos()+_;let M=0;for(;d.pos()<$;)t.addLength(y,d.getUInt32(),M++);break}case 3:{const _=d.getUInt32(),$=d.pos()+_;let M=0;for(t.allocateCoordinates(y);d.pos()<$;)t.addCoordinate(y,d.getSInt64(),M),M++,M===m&&(M=0);break}default:d.skip()}return y}function Jue(e){const a=e.asUnsafe(),d=new Fn;let y="esriGeometryPoint";for(;a.next();)switch(a.tag()){case 2:{const m=a.getUInt32(),_=a.pos()+m;for(;a.pos()<_;)d.lengths.push(a.getUInt32());break}case 3:{const m=a.getUInt32(),_=a.pos()+m;for(;a.pos()<_;)d.coords.push(a.getSInt64());break}case 1:y=vR[a.getEnum()];break;default:a.skip()}return{queryGeometry:d,queryGeometryType:y}}function Kue(e){const M=e.asUnsafe();for(;M.next();)switch(M.tag()){case 1:return M.getString();case 2:return M.getFloat();case 3:return M.getDouble();case 4:return M.getSInt32();case 5:return M.getUInt32();case 6:return M.getInt64();case 7:return M.getUInt64();case 8:return M.getSInt64();case 9:return M.getBool();default:return M.skip(),null}return null}function Yue(e){const m=e.asUnsafe(),_={type:wT(0)};for(;m.next();)switch(m.tag()){case 1:_.name=m.getString();break;case 2:_.type=wT(m.getEnum());break;case 3:_.alias=m.getString();break;case 4:_.sqlType=Bue(m.getEnum());break;case 5:m.skip();break;case 6:_.defaultValue=m.getString();break;default:m.skip()}return _}function Zue(e){const r={},a=e.asUnsafe();for(;a.next();)switch(a.tag()){case 1:r.name=a.getString();break;case 2:r.isSystemMaintained=a.getBool();break;default:a.skip()}return r}function Xue(e,t,i,r){const m=t.createFeature(i);let _=0;for(;e.next();)switch(e.tag()){case 1:{const $=r[_++].name;m.attributes[$]=e.processMessage(Kue);break}case 2:m.geometry=e.processMessageWithArgs(Wue,t,i);break;case 4:m.centroid=e.processMessageWithArgs(Hue,t,i);break;default:e.skip()}return m}function Que(e){const d=[1,1,1,1],y=e.asUnsafe();for(;y.next();)switch(y.tag()){case 1:d[0]=y.getDouble();break;case 2:d[1]=y.getDouble();break;case 4:d[2]=y.getDouble();break;case 3:d[3]=y.getDouble();break;default:y.skip()}return d}function ehe(e){const d=[0,0,0,0],y=e.asUnsafe();for(;y.next();)switch(y.tag()){case 1:d[0]=y.getDouble();break;case 2:d[1]=y.getDouble();break;case 4:d[2]=y.getDouble();break;case 3:d[3]=y.getDouble();break;default:y.skip()}return d}function the(e){const a={originPosition:_T(0)},d=e.asUnsafe();for(;d.next();)switch(d.tag()){case 1:a.originPosition=_T(d.getEnum());break;case 2:a.scale=d.processMessage(Que);break;case 3:a.translate=d.processMessage(ehe);break;default:d.skip()}return a}function ihe(e){const a={},d=e.asUnsafe();for(;d.next();)switch(d.tag()){case 1:a.shapeAreaFieldName=d.getString();break;case 2:a.shapeLengthFieldName=d.getString();break;case 3:a.units=d.getString();break;default:d.skip()}return a}function rhe(e,t){const m=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:m.wkid=e.getUInt32();break;case 5:m.wkt=e.getString();break;case 2:m.latestWkid=e.getUInt32();break;case 3:m.vcsWkid=e.getUInt32();break;case 4:m.latestVcsWkid=e.getUInt32();break;default:e.skip()}return m}function she(e,t){const F=t.createFeatureResult(),V=e.asUnsafe();F.geometryType=ST(t,0);let J=!1;for(;V.next();)switch(V.tag()){case 1:F.objectIdFieldName=V.getString();break;case 3:F.globalIdFieldName=V.getString();break;case 4:F.geohashFieldName=V.getString();break;case 5:F.geometryProperties=V.processMessage(ihe);break;case 7:F.geometryType=ST(t,V.getEnum());break;case 8:F.spatialReference=V.processMessageWithArgs(rhe,t);break;case 10:F.hasZ=V.getBool();break;case 11:F.hasM=V.getBool();break;case 12:F.transform=V.processMessage(the);break;case 9:{const Q=V.getBool();F.exceededTransferLimit=Q;break}case 13:t.addField(F,V.processMessage(Yue));break;case 15:J||(t.prepareFeatures(F),J=!0),t.addFeature(F,V.processMessageWithArgs(Xue,t,F,F.fields));break;case 2:F.uniqueIdField=V.processMessage(Zue);break;default:V.skip()}return t.finishFeatureResult(F),F}function nhe(e,t){const a={};let d=null;for(;e.next();)switch(e.tag()){case 4:d=e.processMessageWithArgs(Jue);break;case 1:a.featureResult=e.processMessageWithArgs(she,t);break;default:e.skip()}return d!=null&&a.featureResult&&t.addQueryGeometry(a,d),a}function ohe(e,t){try{const r=new g_(new Uint8Array(e),new DataView(e)),a={};for(;r.next();)r.tag()===2?a.queryResult=r.processMessageWithArgs(nhe,t):r.skip();return a}catch(i){throw new se("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function ahe(e,t){const i=ohe(e,t),r=i.queryResult.featureResult,a=i.queryResult.queryGeometry,d=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const y=r.objectIdFieldName;for(const m of r.features)m.attributes&&(m.objectId=m.attributes[y])}return r&&(r.queryGeometry=a,r.queryGeometryType=d),r}function v_(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=I6(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const a of i.features)r(a.geometry)}const xT="Layer does not support extent calculation.";function lhe(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function uhe(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const a=r;let d,y,m;if(i!=null&&(y=i.spatialReference,m=i.spatialReference.wkid||JSON.stringify(i.spatialReference),a.geometryType=Wf(i),a.geometry=lhe(i,e.compactGeometryEnabled),a.inSR=m),r.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(a.objectIds=r.objectIds.join(",")),r.orderByFields&&(a.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete a.outFields:r.outFields.includes("*")?a.outFields="*":a.outFields=r.outFields.join(","),r.outSR?(a.outSR=r.outSR.wkid||JSON.stringify(r.outSR),d=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(a.outSR=a.inSR,d=y),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(a.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(a.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(a.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&y!=null&&e.quantizationParameters!=null&&e.quantizationParameters.extent!=null&&y.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(a.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(a.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(a.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const _=r.timeExtent,{start:$,end:M}=_;$==null&&M==null||(a.time=$===M?$:`${$??"null"},${M??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&y!=null&&d!=null&&y.equals(d)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function hhe(e,t,i,r){const a=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await m1(e,t,"json",r);return v_(t,i,a.data),a}async function che(e,t,i,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const a=await phe(e,t,r),d=a;return d.data=ahe(a.data,i),d}function phe(e,t,i){return m1(e,t,"pbf",i)}function dhe(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):m1(e,t,"json",i,{returnIdsOnly:!0})}function fhe(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):m1(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function yhe(e,t,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await m1(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),a=r.data;if(a.hasOwnProperty("extent"))return r;if(a.features)throw new Error(xT);if(a.hasOwnProperty("count"))throw new Error(xT);return r}async function m1(e,t,i,r={},a={}){const d=typeof e=="string"?Qi(e):e,y=t.geometry?[t.geometry]:[];r.responseType=i==="pbf"?"array-buffer":"json";const m=await rS(y,null,r),_=m&&m[0];_!=null&&((t=t.clone()).geometry=_);const $=fR({...d.query,f:i,...a,...uhe(t,a)});return Vt(wa(d.path,mhe(t,a)?"query3d":"query"),{...r,query:{...$,...r.query}})}function mhe(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}async function ghe(e,t,i){const r=pu(e);return fhe(r,sr.from(t),{...i}).then(a=>a.data.count)}async function vhe(e,t,i){const r=pu(e);return yhe(r,sr.from(t),{...i}).then(a=>({count:a.data.count,extent:gt.fromJSON(a.data.extent)}))}async function bhe(e,t,i){const r=pu(e);return dhe(r,sr.from(t),{...i}).then(a=>a.data.objectIds)}var b_;const w_=new ut({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Wi=b_=class extends pe{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=Xe.fromJSON(t.spatialReference),r=[];for(let a=0;a<e.length;a++){const d=e[a],y=Us.fromJSON(d),m=d.geometry&&d.geometry.spatialReference;y.geometry==null||m||(y.geometry.spatialReference=i);const _=d.aggregateGeometries,$=y.aggregateGeometries;if(_&&$!=null)for(const M in $){const A=$[M],P=_[M],j=P==null?void 0:P.spatialReference;A==null||j||(A.spatialReference=i)}r.push(y)}return r}writeGeometryType(e,t,i,r){if(e)return void w_.write(e,t,i,r);const{features:a}=this;if(a){for(const d of a)if(d&&d.geometry!=null)return void w_.write(d.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=_a(e);return r&&!i&&t.spatialReference&&(r.spatialReference=Xe.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new b_(this.cloneProperties())}cloneProperties(){return re({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const a=e&&e[i];r.geometry=a&&a.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,a]}=e,d=$=>Math.round(($-r)/t),y=$=>Math.round((a-$)/i),m=this.features,_=this._getQuantizationFunction(this.geometryType,d,y);for(let $=0,M=m.length;$<M;$++)_!=null&&_(m[$].geometry)||(m.splice($,1),$--,M--);return this.transform=e,this}unquantize(){var P,j;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,a],scale:[d,y]}=i,m=L=>L*d+r,_=L=>a-L*y;let $=null,M=null;if(this.hasZ&&((P=i==null?void 0:i.scale)==null?void 0:P[2])!=null){const{translate:[,,L],scale:[,,F]}=i;$=V=>V*F+L}if(this.hasM&&((j=i==null?void 0:i.scale)==null?void 0:j[3])!=null){const{translate:[,,,L],scale:[,,,F]}=i;M=V=>V==null?V:V*F+L}const A=this._getHydrationFunction(e,m,_,$,M);for(const{geometry:L}of t)L!=null&&A&&A(L);return this.transform=null,this}_quantizePoints(e,t,i){let r,a;const d=[];for(let y=0,m=e.length;y<m;y++){const _=e[y];if(y>0){const $=t(_[0]),M=i(_[1]);$===r&&M===a||(d.push([$-r,M-a]),r=$,a=M)}else r=t(_[0]),a=i(_[1]),d.push([r,a])}return d.length>0?d:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const a=Th(r)?r.rings:r.paths,d=[];for(let y=0,m=a.length;y<m;y++){const _=a[y],$=this._quantizePoints(_,t,i);$&&d.push($)}return d.length>0?(Th(r)?r.rings=d:r.paths=d,r):null}:e==="multipoint"?r=>{const a=this._quantizePoints(r.points,t,i);return a&&a.length>0?(r.points=a,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,a){return e==="point"?d=>{d.x=t(d.x),d.y=i(d.y),r&&(d.z=r(d.z))}:e==="polyline"||e==="polygon"?d=>{const y=Th(d)?d.rings:d.paths;let m,_;for(let $=0,M=y.length;$<M;$++){const A=y[$];for(let P=0,j=A.length;P<j;P++){const L=A[P];P>0?(m+=L[0],_+=L[1]):(m=L[0],_=L[1]),L[0]=t(m),L[1]=i(_)}}if(r&&a)for(let $=0,M=y.length;$<M;$++){const A=y[$];for(let P=0,j=A.length;P<j;P++){const L=A[P];L[2]=r(L[2]),L[3]=a(L[3])}}else if(r)for(let $=0,M=y.length;$<M;$++){const A=y[$];for(let P=0,j=A.length;P<j;P++){const L=A[P];L[2]=r(L[2])}}else if(a)for(let $=0,M=y.length;$<M;$++){const A=y[$];for(let P=0,j=A.length;P<j;P++){const L=A[P];L[2]=a(L[2])}}}:e==="extent"?d=>{d.xmin=t(d.xmin),d.ymin=i(d.ymin),d.xmax=t(d.xmax),d.ymax=i(d.ymax),r&&d.zmax!=null&&d.zmin!=null&&(d.zmax=r(d.zmax),d.zmin=r(d.zmin)),a&&d.mmax!=null&&d.mmin!=null&&(d.mmax=a(d.mmax),d.mmin=a(d.mmin))}:e==="multipoint"?d=>{const y=d.points;let m,_;for(let $=0,M=y.length;$<M;$++){const A=y[$];$>0?(m+=A[0],_+=A[1]):(m=A[0],_=A[1]),A[0]=t(m),A[1]=i(_)}if(r&&a)for(let $=0,M=y.length;$<M;$++){const A=y[$];A[2]=r(A[2]),A[3]=a(A[3])}else if(r)for(let $=0,M=y.length;$<M;$++){const A=y[$];A[2]=r(A[2])}else if(a)for(let $=0,M=y.length;$<M;$++){const A=y[$];A[2]=a(A[2])}}:null}};b([S({type:String,json:{write:!0}})],Wi.prototype,"displayFieldName",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wi.prototype,"exceededTransferLimit",void 0),b([S({type:[Us],json:{write:!0}})],Wi.prototype,"features",void 0),b([me("features")],Wi.prototype,"readFeatures",null),b([S({type:[d2],json:{write:!0}})],Wi.prototype,"fields",void 0),b([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w_.read}}})],Wi.prototype,"geometryType",void 0),b([Se("geometryType")],Wi.prototype,"writeGeometryType",null),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wi.prototype,"hasM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wi.prototype,"hasZ",void 0),b([S({types:nu,json:{write:!0}})],Wi.prototype,"queryGeometry",void 0),b([me("queryGeometry")],Wi.prototype,"readQueryGeometry",null),b([S({type:Xe,json:{write:!0}})],Wi.prototype,"spatialReference",void 0),b([Se("spatialReference")],Wi.prototype,"writeSpatialReference",null),b([S({json:{write:!0}})],Wi.prototype,"transform",void 0),Wi=b_=b([B("esri.rest.support.FeatureSet")],Wi),Wi.prototype.toJSON.isDefaultToJSON=!0;const g1=Wi;async function fve(e,t,i){const r=await bR(e,t,i);return g1.fromJSON(r)}async function bR(e,t,i){const r=pu(e),a={...i},d=sr.from(t),{data:y}=await hhe(r,d,d.sourceSpatialReference,a);return y}function nr(e,t){return e?t?4:3:t?3:2}const l0=fe.getLogger("esri.layers.graphics.featureConversionUtils"),wR={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},whe=(e,t,i,r,a,d)=>{e[i]=a,e[i+1]=d},$T=(e,t,i,r,a,d)=>{e[i]=a,e[i+1]=d,e[i+2]=t[r+2]},_he=(e,t,i,r,a,d)=>{e[i]=a,e[i+1]=d,e[i+2]=t[r+3]},She=(e,t,i,r,a,d)=>{e[i]=a,e[i+1]=d,e[i+2]=t[r+2],e[i+3]=t[r+3]};function xS(e,t,i,r){if(e){if(i)return t&&r?She:$T;if(t&&r)return _he}else if(t&&r)return $T;return whe}function ow({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function aw({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function lw({scale:e,translate:t},i,r){return i*e[r]+t[r]}function yve(e,t,i){return e?t?i?IS(e):$S(e):i?TS(e):$2(e):null}function $2(e){const t=e.coords;return{x:t[0],y:t[1]}}function _R(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function $S(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function xhe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function TS(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function $he(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function IS(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function The(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Ihe(e,t,i,r){let a=$2;i&&r?a=IS:i?a=$S:r&&(a=TS);for(const d of t){const{geometry:y,attributes:m}=d,_=y!=null?a(y):null;e.push({attributes:m,geometry:_})}return e}function ES(e,t){return e&&t?The:e?xhe:t?$he:_R}function SR(e,t,i,r,a){const d=ES(i,r);for(const{geometry:y,attributes:m}of t){const _=y!=null?d(new Fn,y):null;e.push(new iu(_,m,null,a?m[a]:void 0))}return e}function mve(e,t,i=ES(t.z!=null,t.m!=null)){return i(e,t)}function Ehe(e,t,i,r){for(const{geometry:a,attributes:d}of t)e.push({attributes:d,geometry:a!=null?xR(a,i,r):null});return e}function xR(e,t,i){if(e==null)return null;const r=nr(t,i),a=[];for(let d=0;d<e.coords.length;d+=r){const y=[];for(let m=0;m<r;m++)y.push(e.coords[d+m]);a.push(y)}return t?i?{points:a,hasZ:t,hasM:i}:{points:a,hasZ:t}:i?{points:a,hasM:i}:{points:a}}function $R(e,t,i,r,a){const d=nr(i,r);for(const{geometry:y,attributes:m}of t){const _=y!=null?TR(new Fn,y,d):null;e.push(new iu(_,m,null,a?m[a]:void 0))}return e}function TR(e,t,i=nr(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let a=0;for(const d of t.points)for(let y=0;y<i;y++)r[a++]=d[y];return e}function Mhe(e,t,i,r){for(const{geometry:a,attributes:d}of t)e.push({attributes:d,geometry:a!=null?IR(a,i,r):null});return e}function IR(e,t,i){if(!e)return null;const r=nr(t,i),{coords:a,lengths:d}=e,y=[];let m=0;for(const _ of d){const $=[];for(let M=0;M<_;M++){const A=[];for(let P=0;P<r;P++)A.push(a[m++]);$.push(A)}y.push($)}return t?i?{paths:y,hasZ:t,hasM:i}:{paths:y,hasZ:t}:i?{paths:y,hasM:i}:{paths:y}}function ER(e,t,i,r,a){const d=nr(i,r);for(const{geometry:y,attributes:m}of t){const _=y!=null?MR(new Fn,y,d):null;e.push(new iu(_,m,null,a?m[a]:void 0))}return e}function MR(e,t,i=nr(t.hasZ,t.hasM)){const{lengths:r,coords:a}=e;let d=0;for(const y of t.paths){for(const m of y)for(let _=0;_<i;_++)a[d++]=m[_];r.push(y.length)}return e}function Ahe(e,t,i,r){for(const{geometry:a,attributes:d,centroid:y}of t){const m=a!=null?AR(a,i,r):null;if(y!=null){const _=$2(y);e.push({attributes:d,centroid:_,geometry:m})}else e.push({attributes:d,geometry:m})}return e}function AR(e,t,i){if(!e)return null;const r=nr(t,i),{coords:a,lengths:d}=e,y=[];let m=0;for(const _ of d){const $=[];for(let M=0;M<_;M++){const A=[];for(let P=0;P<r;P++)A.push(a[m++]);$.push(A)}y.push($)}return t?i?{rings:y,hasZ:t,hasM:i}:{rings:y,hasZ:t}:i?{rings:y,hasM:i}:{rings:y}}function kR(e,t,i,r,a){for(const{geometry:d,centroid:y,attributes:m}of t){const _=d!=null?OR(new Fn,d,i,r):null,$=a?m[a]:void 0;y!=null?e.push(new iu(_,m,_R(new Fn,y),$)):e.push(new iu(_,m,null,$))}return e}function OR(e,t,i=t.hasZ,r=t.hasM){return khe(e,t.rings,i,r)}function khe(e,t,i,r){const a=nr(i,r),{lengths:d,coords:y}=e;let m=0;ga(e);for(const _ of t){for(const $ of _)for(let M=0;M<a;M++)y[m++]=$[M];d.push(_.length)}return e}const wp=[],cf=[];function gve(e,t,i,r,a){wp[0]=e;const[d]=PR(cf,wp,t,i,r,a);return zn(wp),zn(cf),d}function PR(e,t,i,r,a,d){if(zn(e),!i){for(const y of t){const m=d?y.attributes[d]:void 0;e.push(new iu(null,y.attributes,null,m))}return e}switch(i){case"esriGeometryPoint":return SR(e,t,r,a,d);case"esriGeometryMultipoint":return $R(e,t,r,a,d);case"esriGeometryPolyline":return ER(e,t,r,a,d);case"esriGeometryPolygon":return kR(e,t,r,a,d);default:l0.error("convertToFeatureSet:unknown-geometry",new se(`Unable to parse unknown geometry type '${i}'`)),zn(e)}return e}function vve(e,t,i,r,a,d){const y=e.length;switch(i){case"esriGeometryPoint":SR(e,t,r,a,d);break;case"esriGeometryMultipoint":$R(e,t,r,a,d);break;case"esriGeometryPolyline":ER(e,t,r,a,d);break;case"esriGeometryPolygon":kR(e,t,r,a,d);break;default:l0.error("convertToFeatureSet:unknown-geometry",new se(`Unable to parse unknown geometry type '${i}'`))}for(let m=0;m<t.length;m++)e[m+y].geometryType=i,e[m+y].insertAfter=t[m].insertAfter,e[m+y].groupId=t[m].groupId;return e}function bve(e,t,i,r){cf[0]=e,NR(wp,cf,t,i,r);const a=wp[0];return zn(wp),zn(cf),a}function wve(e,t,i){if(e==null)return null;const r=new Fn;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),H4(e)?ES(t??e.z!=null,i??e.m!=null)(r,e):Th(e)?OR(r,e,t,i):W4(e)?MR(r,e,nr(t,i)):B4(e)?TR(r,e,nr(t,i)):void l0.error("convertFromGeometry:unknown-geometry",new se(`Unable to parse unknown geometry type '${e}'`))}function CR(e,t,i,r){const a=e&&("coords"in e?e:e.geometry);if(a==null)return null;switch(t){case"esriGeometryPoint":{let d=$2;return i&&r?d=IS:i?d=$S:r&&(d=TS),d(a)}case"esriGeometryMultipoint":return xR(a,i,r);case"esriGeometryPolyline":return IR(a,i,r);case"esriGeometryPolygon":return AR(a,i,r);default:return l0.error("convertToGeometry:unknown-geometry",new se(`Unable to parse unknown geometry type '${t}'`)),null}}function Ohe(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function NR(e,t,i,r,a){if(zn(e),i==null)return Ohe(e,t);switch(i){case"esriGeometryPoint":return Ihe(e,t,r,a);case"esriGeometryMultipoint":return Ehe(e,t,r,a);case"esriGeometryPolyline":return Mhe(e,t,r,a);case"esriGeometryPolygon":return Ahe(e,t,r,a);default:l0.error("convertToFeatureSet:unknown-geometry",new se(`Unable to parse unknown geometry type '${i}'`))}return e}function _ve(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:a,hasM:d,hasZ:y,features:m,geometryType:_,exceededTransferLimit:$,uniqueIdField:M,queryGeometry:A,queryGeometryType:P}=e,j={features:NR([],m,_,y,d),fields:a,geometryType:_,objectIdFieldName:t,spatialReference:i,uniqueIdField:M,queryGeometry:CR(A,P,!1,!1)};return r&&(j.transform=r),$&&(j.exceededTransferLimit=$),d&&(j.hasM=d),y&&(j.hasZ=y),j}function Sve(e,t){const i=new mR,{hasM:r,hasZ:a,features:d,objectIdFieldName:y,spatialReference:m,geometryType:_,exceededTransferLimit:$,transform:M,fields:A}=e;return A&&(i.fields=A),i.geometryType=_??null,i.objectIdFieldName=y??t??null,i.spatialReference=m??null,i.objectIdFieldName?(d&&PR(i.features,d,_,a,r,i.objectIdFieldName),$&&(i.exceededTransferLimit=$),r&&(i.hasM=r),a&&(i.hasZ=a),M&&(i.transform=M),i):(l0.error(new se("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function xve(e){const{transform:t,features:i,hasM:r,hasZ:a}=e;if(!t)return e;for(const d of i)d.geometry!=null&&S_(d.geometry,d.geometry,r,a,t),d.centroid!=null&&S_(d.centroid,d.centroid,r,a,t);return e.transform=null,e}function $ve(e,t){const{geometryType:i,features:r,hasM:a,hasZ:d}=t;if(!e)return t;for(let y=0;y<r.length;y++){const m=r[y],_=m.weakClone();_.geometry=new Fn,TT(_.geometry,m.geometry,a,d,i,e),m.centroid&&(_.centroid=new Fn,TT(_.centroid,m.centroid,a,d,"esriGeometryPoint",e)),r[y]=_}return t.transform=e,t}function TT(e,t,i,r,a,d,y=i,m=r){if(ga(e),t==null||!t.coords.length)return null;const _=wR[a],{coords:$,lengths:M}=t,A=nr(i,r),P=nr(i&&y,r&&m),j=xS(i,r,y,m);if(!M.length)return j(e.coords,$,0,0,ow(d,$[0]),aw(d,$[1])),ga(e,A,0),e;let L,F,V,J,Q=0,Y=0,te=Y;for(const oe of M){if(oe<_)continue;let ae=0;Y=te,V=L=ow(d,$[Q]),J=F=aw(d,$[Q+1]),j(e.coords,$,Y,Q,V,J),ae++,Q+=A,Y+=P;for(let de=1;de<oe;de++,Q+=A)V=ow(d,$[Q]),J=aw(d,$[Q+1]),V===L&&J===F||(j(e.coords,$,Y,Q,V-L,J-F),Y+=P,ae++,L=V,F=J);ae>=_&&(e.lengths.push(ae),te=Y)}return zn(e.coords,te),e.coords.length?e:null}function Tve(e,t,i,r,a,d,y=i,m=r){if(ga(e),!t||!t.coords.length)return null;const _=wR[a],{coords:$,lengths:M}=t,A=nr(i,r),P=nr(i&&y,r&&m),j=xS(i,r,y,m);if(!M.length)return j(e.coords,$,0,0,$[0],$[1]),ga(e,A,0),e;let L=0;const F=d*d;for(const V of M){if(V<_){L+=V*A;continue}const J=e.coords.length/P,Q=L,Y=L+(V-1)*A;j(e.coords,$,e.coords.length,Q,$[Q],$[Q+1]),__(e.coords,$,A,F,j,Q,Y),j(e.coords,$,e.coords.length,Y,$[Y],$[Y+1]);const te=e.coords.length/P-J;te>=_?e.lengths.push(te):zn(e.coords,J*P),L+=V*A}return e.coords.length?e:null}function Phe(e,t,i,r){const a=e[t],d=e[t+1],y=e[i],m=e[i+1],_=e[r],$=e[r+1];let M=y,A=m,P=_-M,j=$-A;if(P!==0||j!==0){const L=((a-M)*P+(d-A)*j)/(P*P+j*j);L>1?(M=_,A=$):L>0&&(M+=P*L,A+=j*L)}return P=a-M,j=d-A,P*P+j*j}function __(e,t,i,r,a,d,y){let m,_=r,$=0;for(let M=d+i;M<y;M+=i)m=Phe(t,M,d,y),m>_&&($=M,_=m);_>r&&($-d>i&&__(e,t,i,r,a,d,$),a(e,t,e.length,$,t[$],t[$+1]),y-$>i&&__(e,t,i,r,a,$,y))}function Ive(e,t,i,r){if(t==null||!t.coords||!t.coords.length)return null;const a=nr(i,r);let d=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY;if(t&&t.coords){const $=t.coords;for(let M=0;M<$.length;M+=a){const A=$[M],P=$[M+1];d=Math.min(d,A),m=Math.max(m,A),y=Math.min(y,P),_=Math.max(_,P)}}return X3(e)?lJ(e,d,y,m,_):fU(d,y,m,_,e),e}function S_(e,t,i,r,a){const{coords:d,lengths:y}=t,m=nr(i,r);if(!d.length)return e!==t&&ga(e),e;vv(a);const{originPosition:_,scale:$,translate:M}=a,A=Nhe;A.originPosition=_;const P=A.scale;P[0]=$[0]??1,P[1]=-($[1]??1),P[2]=$[2]??1,P[3]=$[3]??1;const j=A.translate;if(j[0]=M[0]??0,j[1]=M[1]??0,j[2]=M[2]??0,j[3]=M[3]??0,!y.length){for(let F=0;F<m;++F)e.coords[F]=lw(A,d[F],F);return e!==t&&ga(e,m,0),e}let L=0;for(let F=0;F<y.length;F++){const V=y[F];e.lengths[F]=V;for(let Y=0;Y<m;++Y)e.coords[L+Y]=lw(A,d[L+Y],Y);let J=e.coords[L],Q=e.coords[L+1];L+=m;for(let Y=1;Y<V;Y++,L+=m){J+=d[L]*P[0],Q+=d[L+1]*P[1],e.coords[L]=J,e.coords[L+1]=Q;for(let te=2;te<m;++te)e.coords[L+te]=lw(A,d[L+te],te)}}return e!==t&&ga(e,d.length,y.length),e}function Eve(e,t,i,r,a,d){if(ga(e),e.lengths.push(...t.lengths),i===a&&r===d)for(let y=0;y<t.coords.length;y++)e.coords.push(t.coords[y]);else{const y=nr(i,r),m=xS(i,r,a,d),_=t.coords;for(let $=0;$<_.length;$+=y)m(e.coords,_,e.coords.length,$,_[$],_[$+1])}return e}function Che(e,t,i,r){let a=0,d=e[r*t],y=e[r*(t+1)];for(let m=1;m<i;m++){const _=d+e[r*(t+m)],$=y+e[r*(t+m)+1],M=(_-d)*($+y);d=_,y=$,a+=M}return .5*a}function Mve(e,t){const{coords:i,lengths:r}=e;let a=0,d=0;for(let y=0;y<r.length;y++){const m=r[y];d+=Che(i,a,m,t),a+=m}return Math.abs(d)}function ga(e,t=0,i=0){zn(e.lengths,i),zn(e.coords,t)}function zn(e,t=0){e.length!==t&&(e.length=t)}const Nhe={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function jhe(e,t){return t}function MS(e,t,i,r){switch(i){case 0:return Ff(e,t+r,0);case 1:return e.originPosition==="lowerLeft"?Ff(e,t+r,1):Dhe(e,t+r,1)}}function jR(e,t,i,r){return i===2?Ff(e,t,2):MS(e,t,i,r)}function Rhe(e,t,i,r){return i===2?Ff(e,t,3):MS(e,t,i,r)}function Lhe(e,t,i,r){return i===3?Ff(e,t,3):jR(e,t,i,r)}function Ff({translate:e,scale:t},i,r){return e[r]+i*t[r]}function Dhe({translate:e,scale:t},i,r){return e[r]-i*t[r]}let Fhe=class{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=jhe,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const i=I6(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(i!=null)for(const r of t.features)i(r.geometry)}createSpatialReference(){return{}}addField(t,i){const r=t.fields;vv(r),r.push(i);const a=r.map(d=>d.name);this._attributesConstructor=function(){for(const d of a)this[d]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,a)=>this.addCoordinatePoint(i,r,a),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,a)=>this._addCoordinatePolygon(i,r,a),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,a)=>this._addCoordinatePolyline(i,r,a),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,a)=>this._addCoordinateMultipoint(i,r,a),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:r,queryGeometryType:a}=i,d=S_(r.clone(),r,!1,!1,this._transform),y=CR(d,a,!1,!1);t.queryGeometryType=a,t.queryGeometry={...y}}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,r){const a=Ur(this._transform,"transform");switch(i=this._applyTransform(a,i,r,0),r){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=t);const a=Ur(this._transform,"transform");return this._applyTransform(a,t,i,r)}_addCoordinatePolyline(t,i,r){this._dehydratedAddPointsCoordinate(t.paths,i,r)}_addCoordinatePolygon(t,i,r){this._dehydratedAddPointsCoordinate(t.rings,i,r)}_addCoordinateMultipoint(t,i,r){r===0&&t.points.push([]);const a=this._transformPathLikeValue(i,r);t.points[t.points.length-1].push(a)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,r){r===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const a=this._transformPathLikeValue(i,r),d=t[t.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),d.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=a}_deriveApplyTransform(t){const{hasZ:i,hasM:r}=t;return i&&r?Lhe:i?jR:r?Rhe:MS}};async function zhe(e,t,i){const r=pu(e),a={...i},d=sr.from(t),y=!d.quantizationParameters,{data:m}=await che(r,d,new Fhe({sourceSpatialReference:d.sourceSpatialReference,applyTransform:y}),a);return m}let Es=class extends De{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return Qi(this.url)}async execute(t,i){const r=await this.executeJSON(t,i);return this.featureSetFromJSON(t,r,i)}async executeJSON(t,i){var _;const r=this._normalizeQuery(t),a=((_=t.outStatistics)==null?void 0:_[0])!=null,d=le("featurelayer-pbf-statistics"),y=!a||d;let m;if(this.pbfSupported&&y)try{m=await zhe(this.url,r,i)}catch($){if($.name!=="query:parsing-pbf")throw $;this.pbfSupported=!1}return this.pbfSupported&&y||(m=await bR(this.url,r,i)),this._normalizeFields(m.fields),m}async featureSetFromJSON(t,i,r){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!i.features)return g1.fromJSON(i);const{meshFeatureSetFromJSON:a}=await Lo(be(()=>import("./meshFeatureSet-190ff8d0.js").then(d=>d.b),["assets/meshFeatureSet-190ff8d0.js","assets/georeference-d01362e5.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-d4474fd9.js","assets/MeshLocalVertexSpace-55bec386.js","assets/MeshGeoreferencedRelativeVertexSpace-2f6407fc.js","assets/quat-614e8411.js","assets/quatf64-3363c48e.js","assets/vec32-6396a3a3.js","assets/BufferView-799e911f.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-48db4b31.js","assets/Indices-00b9f4f6.js","assets/deduplicate-95aca537.js","assets/External-98227502.js"]),r);return a(t,this.infoFor3D,i)}executeForCount(t,i){return ghe(this.url,this._normalizeQuery(t),i)}executeForExtent(t,i){return vhe(this.url,this._normalizeQuery(t),i)}executeForIds(t,i){return bhe(this.url,this._normalizeQuery(t),i)}async executeRelationshipQuery(t,i){const[{default:r},{executeRelationshipQuery:a}]=await Lo(Promise.all([be(()=>Promise.resolve().then(()=>UT),void 0),be(()=>import("./executeRelationshipQuery-4b8776ec.js"),[])]),i);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),a(this.url,t,i)}async executeRelationshipQueryForCount(t,i){const[{default:r},{executeRelationshipQueryForCount:a}]=await Lo(Promise.all([be(()=>Promise.resolve().then(()=>UT),void 0),be(()=>import("./executeRelationshipQuery-4b8776ec.js"),[])]),i);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),a(this.url,t,i)}async executeAttachmentQuery(t,i){const{executeAttachmentQuery:r,fetchAttachments:a,processAttachmentQueryResult:d}=await Lo(be(()=>import("./queryAttachments-acb7f744.js"),["assets/queryAttachments-acb7f744.js","assets/AttachmentInfo-c77cb828.js"]),i),y=pu(this.url);return d(y,await(this.queryAttachmentsSupported?r(y,t,i):a(y,t,i)))}async executeTopFeaturesQuery(t,i){const{executeTopFeaturesQuery:r}=await Lo(be(()=>import("./executeTopFeaturesQuery-1d69472b.js"),["assets/executeTopFeaturesQuery-1d69472b.js","assets/queryTopFeatures-35fd898a.js"]),i);return r(this.parsedUrl,t,this.sourceSpatialReference,i)}async executeForTopIds(t,i){const{executeForTopIds:r}=await Lo(be(()=>import("./executeForTopIds-99976f1e.js"),["assets/executeForTopIds-99976f1e.js","assets/queryTopFeatures-35fd898a.js"]),i);return r(this.parsedUrl,t,i)}async executeForTopExtents(t,i){const{executeForTopExtents:r}=await Lo(be(()=>import("./executeForTopExtents-626aee90.js"),["assets/executeForTopExtents-626aee90.js","assets/queryTopFeatures-35fd898a.js"]),i);return r(this.parsedUrl,t,i)}async executeForTopCount(t,i){const{executeForTopCount:r}=await Lo(be(()=>import("./executeForTopCount-38c37f4a.js"),["assets/executeForTopCount-38c37f4a.js","assets/queryTopFeatures-35fd898a.js"]),i);return r(this.parsedUrl,t,i)}_normalizeQuery(t){let i=sr.from(t);i.sourceSpatialReference=i.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(i=i===t?i.clone():i,i.gdbVersion=t.gdbVersion||this.gdbVersion,i.dynamicDataSource=t.dynamicDataSource?Pr.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(r!=null&&this._queryIs3DObjectFormat(t)){i=i===t?i.clone():i,i.formatOf3DObjects=null;const{supportedFormats:a,queryFormats:d}=r,y=s3("model/gltf-binary",a)??n3("glb",a),m=s3("model/gltf+json",a)??n3("gtlf",a);for(const _ of d){if(_===y){i.formatOf3DObjects=_;break}_!==m||i.formatOf3DObjects||(i.formatOf3DObjects=_)}if(!i.formatOf3DObjects)throw new se("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(i.outFields==null||!i.outFields.includes("*")){i=i===t?i.clone():i,i.outFields==null&&(i.outFields=[]);const{originX:_,originY:$,originZ:M,translationX:A,translationY:P,translationZ:j,scaleX:L,scaleY:F,scaleZ:V,rotationX:J,rotationY:Q,rotationZ:Y,rotationDeg:te}=r.transformFieldRoles;i.outFields.push(_,$,M,A,P,j,L,F,V,J,Q,Y,te)}}return i}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const i of t){const r=this.fieldsIndex.get(i.name);r&&Object.assign(i,r.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};b([S({type:Pr})],Es.prototype,"dynamicDataSource",void 0),b([S()],Es.prototype,"fieldsIndex",void 0),b([S()],Es.prototype,"gdbVersion",void 0),b([S()],Es.prototype,"infoFor3D",void 0),b([S({readOnly:!0})],Es.prototype,"parsedUrl",null),b([S()],Es.prototype,"pbfSupported",void 0),b([S()],Es.prototype,"queryAttachmentsSupported",void 0),b([S()],Es.prototype,"sourceSpatialReference",void 0),b([S({type:String})],Es.prototype,"url",void 0),Es=b([B("esri.tasks.QueryTask")],Es);const Vhe=Es,IT=new ut({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let bl=class extends Kt(pe){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};b([S({json:{write:!0}})],bl.prototype,"name",void 0),b([S({json:{write:!0}})],bl.prototype,"description",void 0),b([S({json:{read:IT.read,write:IT.write}})],bl.prototype,"drawingTool",void 0),b([S({json:{write:!0}})],bl.prototype,"prototype",void 0),b([S({json:{write:!0}})],bl.prototype,"thumbnail",void 0),bl=b([B("esri.layers.support.FeatureTemplate")],bl);const AS=bl;let ta=class extends Kt(pe){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=tS(t[r]);return i}writeDomains(t,i){var a;const r={};for(const d of Object.keys(t))t[d]&&(r[d]=(a=t[d])==null?void 0:a.toJSON());i.domains=r}};b([S({json:{write:!0}})],ta.prototype,"id",void 0),b([S({json:{write:!0}})],ta.prototype,"name",void 0),b([S({json:{write:!0}})],ta.prototype,"domains",void 0),b([me("domains")],ta.prototype,"readDomains",null),b([Se("domains")],ta.prototype,"writeDomains",null),b([S({type:[AS],json:{write:!0}})],ta.prototype,"templates",void 0),ta=b([B("esri.layers.support.FeatureType")],ta);const kS=ta,OS="__begin__",PS="__end__",Ghe=new RegExp(OS,"ig"),qhe=new RegExp(PS,"ig"),ET=new RegExp("^"+OS,"i"),MT=new RegExp(PS+"$","i"),mv='"',Uhe=mv+" + ",Bhe=" + "+mv;function Hhe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Whe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function CS(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Hhe(e.labelExpression),t.type="conventional"),t}function Jhe(e){const t=CS(e);if(!t)return null;switch(t.type){case"conventional":return x_(t.expression);case"arcade":return t.expression}return null}function Khe(e){const t=CS(e);if(!t)return null;switch(t.type){case"conventional":return Zhe(t.expression);case"arcade":return RR(t.expression)}return null}function x_(e){let t;return e?(t=$v(e,i=>OS+'$feature["'+i+'"]'+PS),t=ET.test(t)?t.replace(ET,""):mv+t,t=MT.test(t)?t.replace(MT,""):t+mv,t=t.replaceAll(Ghe,Uhe).replaceAll(qhe,Bhe)):t='""',t}const Yhe=/^\s*\{([^}]+)\}\s*$/i;function Zhe(e){const t=e==null?void 0:e.match(Yhe);return t&&t[1].trim()||null}const Xhe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Qhe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,ece=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function RR(e){if(!e)return null;let t=Xhe.exec(e)||Qhe.exec(e);return t?t[1]||t[3]:(t=ece.exec(e),t?t[2]:null)}var $_;let wl=$_=class extends pe{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?x_(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=x_(this.value)),e!=null&&(t[i]=e)}clone(){return new $_({expression:this.expression,title:this.title,value:this.value})}};b([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],wl.prototype,"expression",void 0),b([me("expression",["expression","value"])],wl.prototype,"readExpression",null),b([Se("expression")],wl.prototype,"writeExpression",null),b([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],wl.prototype,"title",void 0),b([S({json:{read:!1,write:!1}})],wl.prototype,"value",void 0),wl=$_=b([B("esri.layers.support.LabelExpressionInfo")],wl);const LR=wl,DR=[252,146,31,255],FR={type:"esriSMS",style:"esriSMSCircle",size:6,color:DR,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},zR={type:"esriSLS",style:"esriSLSSolid",width:.75,color:DR},VR={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},tce={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},ice={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},rce={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},sce={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Cve=lu.fromJSON(FR),Nve=Hs.fromJSON(zR),jve=Xh.fromJSON(VR),nce=e0.fromJSON(tce),Rve=lu.fromJSON(ice),Lve=Hs.fromJSON(rce),Dve=Xh.fromJSON(sce);var T_;const My=new ut({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Ay(e,t,i){return{enabled:!nM(i==null?void 0:i.layer)}}function GR(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function oce(e){return(e==null?void 0:e.type)==="map-image"}function qR(e){var t,i;return!!oce(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function ace(e){return GR(e)||qR(e==null?void 0:e.layer)}let Si=T_=class extends pe{static evaluateWhere(e,t){const i=(r,a,d)=>{switch(a){case"=":return r==d;case"<>":return r!=d;case">":return r>d;case">=":return r>=d;case"<":return r<d;case"<=":return r<=d}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const a=i(t[r[0]],r[1],r[2]),d=r[3],y=i(t[r[4]],r[5],r[6]);switch(d){case"AND":return a&&y;case"OR":return a||y}}return!1}catch{console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=nce,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Whe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=RR(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&GR(r))e=new LR({expression:this.getLabelExpressionArcade()});else if(!e)return;const a=e.toJSON(r);a.expression&&(t[i]=a)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return CS(this)}getLabelExpressionArcade(){return Jhe(this)}getLabelExpressionSingleField(){return Khe(this)}hash(){return JSON.stringify(this)}clone(){return new T_({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:re(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:re(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};b([S({type:String,json:{write:!0}})],Si.prototype,"name",void 0),b([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Ay}}}}})],Si.prototype,"allowOverrun",void 0),b([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Ay}}}}})],Si.prototype,"deconflictionStrategy",void 0),b([S({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&qR(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Si.prototype,"labelExpression",void 0),b([me("labelExpression")],Si.prototype,"readLabelExpression",null),b([Se("labelExpression")],Si.prototype,"writeLabelExpression",null),b([S({type:LR,json:{write:{overridePolicy:(e,t,i)=>ace(i)?{allowNull:!0}:{enabled:!1}}}})],Si.prototype,"labelExpressionInfo",void 0),b([Se("labelExpressionInfo")],Si.prototype,"writeLabelExpressionInfo",null),b([S({type:My.apiValues,json:{type:My.jsonValues,read:My.read,write:My.write}})],Si.prototype,"labelPlacement",void 0),b([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Si.prototype,"labelPosition",void 0),b([S({type:Number})],Si.prototype,"maxScale",void 0),b([Se("maxScale")],Si.prototype,"writeMaxScale",null),b([S({type:Number})],Si.prototype,"minScale",void 0),b([Se("minScale")],Si.prototype,"writeMinScale",null),b([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Ay}}}}})],Si.prototype,"repeatLabel",void 0),b([S({type:Number,cast:mt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Ay}}}}})],Si.prototype,"repeatLabelDistance",void 0),b([S({types:jJ,json:{origins:{"web-scene":{types:RJ,write:rT,default:null}},write:rT,default:null}})],Si.prototype,"symbol",void 0),b([S({type:Boolean,json:{write:!0}})],Si.prototype,"useCodedValues",void 0),b([S({type:String,json:{write:!0}})],Si.prototype,"where",void 0),Si=T_=b([B("esri.layers.support.LabelClass")],Si);const v1=Si,uw=fe.getLogger("esri.layers.support.labelingInfo"),lce=/\[([^\[\]]+)\]/gi;function AT(e,t,i){return e?e.map(r=>{const a=new v1;if(a.read(r,i),a.labelExpression){const d=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;a.labelExpression=a.labelExpression.replaceAll(lce,(y,m)=>`[${uce(m,d)}]`)}return a}):null}function uce(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const a=t[r].name;if(a.toLowerCase()===i)return a}return e}const hce={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function cce(e,t){const i=re(e);return i.some(r=>pce(r,t))?[]:i}function pce(e,t){const i=e.labelPlacement,r=hce[t];if(!e.symbol)return uw.warn("No ILabelClass symbol specified."),!0;if(!r)return uw.error(new se("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!r.includes(i)){const a=r[0];i&&uw.warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${a}`),e.labelPlacement=a}return!1}var I_;let Wc=I_=class extends pe{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Le}clone(){return new I_({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};b([S({type:String,json:{write:!0}})],Wc.prototype,"floorField",void 0),b([S({json:{read:!1,write:!1}})],Wc.prototype,"viewAllMode",void 0),b([S({json:{read:!1,write:!1}})],Wc.prototype,"viewAllLevelIds",void 0),Wc=I_=b([B("esri.layers.support.LayerFloorInfo")],Wc);const UR=Wc,dce={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function qe(e,t,i){return!!BR(e,t,i)}function ky(e,t,i){return BR(e,t,i)}function BR(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function fce(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function b1(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(a=>a.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function NS(e,t){return{analytics:yce(e),attachment:mce(e),data:gce(e),metadata:vce(e),operations:bce(e.capabilities,e,t),query:wce(e,t),queryRelated:_ce(e),queryTopFeatures:Sce(e),editing:xce(e)}}function yce(e){return{supportsCacheHint:b1(e.advancedQueryCapabilities,"queryAnalytics")}}function mce(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:b1(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:qe(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const a=dce[r.name];a&&(i[a]=!!r.isEnabled)}),i}function gce(e){return{isVersioned:qe(e,"isDataVersioned",!1),supportsAttachment:qe(e,"hasAttachments",!1),supportsM:qe(e,"hasM",!1),supportsZ:qe(e,"hasZ",!1)}}function vce(e){return{supportsAdvancedFieldProperties:qe(e,"supportsFieldDescriptionProperty",!1)}}function bce(e,t,i){const r=e?e.toLowerCase().split(",").map(P=>P.trim()):[],a=i?ic(i):null,d=r.includes(a!=null&&a.serverType==="MapServer"?"data":"query"),y=r.includes("editing")&&!t.datesInUnknownTimezone;let m=y&&r.includes("create"),_=y&&r.includes("delete"),$=y&&r.includes("update");const M=r.includes("changetracking"),A=t.advancedQueryCapabilities;return y&&!(m||_||$)&&(m=_=$=!0),{supportsCalculate:qe(t,"supportsCalculate",!1),supportsTruncate:qe(t,"supportsTruncate",!1),supportsValidateSql:qe(t,"supportsValidateSql",!1),supportsAdd:m,supportsDelete:_,supportsEditing:y,supportsChangeTracking:M,supportsQuery:d,supportsQueryAnalytics:qe(A,"supportsQueryAnalytic",!1),supportsQueryAttachments:qe(A,"supportsQueryAttachments",!1),supportsQueryTopFeatures:qe(A,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:qe(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:$,supportsExceedsLimitStatistics:qe(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:qe(t,"supportsAsyncConvert3D",!1)}}function wce(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,a=e.archivingInfo,d=e.currentVersion,y=t==null?void 0:t.includes("MapServer"),m=!y||d>=le("mapserver-pbf-version-support"),_=IP(t),$=new Set((e.supportedQueryFormats??"").split(",").map(M=>M.toLowerCase().trim()));return{supportsStatistics:qe(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:qe(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:qe(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:fce(i),supportsCentroid:qe(i,"supportsReturningGeometryCentroid",!1),supportsDistance:qe(i,"supportsQueryWithDistance",!1),supportsDistinct:qe(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:qe(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:qe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:qe(i,"supportsHavingClause",!1),supportsOrderBy:qe(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:qe(i,"supportsPagination",!1),supportsQuantization:qe(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:qe(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:qe(e,"supportsReturningQueryGeometry",!1),supportsResultType:qe(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:qe(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:qe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:qe(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:qe(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:qe(r,"allowOthersToQuery",!0),supportsHistoricMoment:qe(a,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:m&&$.has("pbf"),supportsDisjointSpatialRelationship:qe(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:qe(i,"supportsQueryWithCacheHint",!1)||b1(i,"query"),supportsDefaultSpatialReference:qe(i,"supportsDefaultSR",!1),supportsCompactGeometry:_,supportsFullTextSearch:qe(i,"supportsFullTextSearch",!1),maxRecordCountFactor:ky(e,"maxRecordCountFactor",void 0),maxRecordCount:ky(e,"maxRecordCount",void 0),standardMaxRecordCount:ky(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:ky(e,"tileMaxRecordCount",void 0)}}function _ce(e){const t=e.advancedQueryCapabilities,i=qe(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:qe(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:b1(t,"queryRelated")}}function Sce(e){return{supportsCacheHint:b1(e.advancedQueryCapabilities,"queryTopFilter")}}function xce(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:qe(e,"allowGeometryUpdates",!0),supportsGlobalId:qe(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:qe(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:qe(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:qe(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:qe(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:qe(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:qe(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:qe(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:qe(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:qe(i,"supportsAsyncApplyEdits",!1)}}var E_;let Ji=E_=class extends pe{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new E_(re({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};b([S({type:[String],json:{write:!0}})],Ji.prototype,"attachmentTypes",void 0),b([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ji.prototype,"attachmentsWhere",void 0),b([S({type:Boolean,json:{write:!0}})],Ji.prototype,"cacheHint",void 0),b([S({type:[String],json:{write:!0}})],Ji.prototype,"keywords",void 0),b([S({type:[Number],json:{write:!0}})],Ji.prototype,"globalIds",void 0),b([S({json:{write:!0}})],Ji.prototype,"name",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ji.prototype,"num",void 0),b([S({type:[Number],json:{write:!0}})],Ji.prototype,"objectIds",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ji.prototype,"returnMetadata",void 0),b([S({type:[Number],json:{write:!0}})],Ji.prototype,"size",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Ji.prototype,"start",void 0),b([Se("start"),Se("num")],Ji.prototype,"writeStart",null),b([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ji.prototype,"where",void 0),Ji=E_=b([B("esri.rest.support.AttachmentQuery")],Ji),Ji.from=yi(Ji);const HR=Ji;function WR({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:a},d){if(!i)return null;const y=Ece({editFieldsInfo:t,fields:i,objectIdField:r},d);if(!y.length)return null;const m=kce({titleBase:a,fields:i,displayField:e}),_=Ace();return new Yp({title:m,content:_,fieldInfos:y})}const $ce=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):QU(e,t);function Tce(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(Ice),e}function Ice(e,t){return e.type==="oid"?-1:t.type==="oid"?1:kT(e)?-1:kT(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function Ece(e,t){const i=t==null?void 0:t.visibleFieldNames;return Tce(e.fields??[],(t==null?void 0:t.ignoreFieldTypes)||Oce).map(r=>new l6({fieldName:r.name,isEditable:XU(r,e),label:r.alias,format:Mce(r),visible:$ce(r,{...e,visibleFieldNames:i})}))}function Mce(e){switch(e.type){case"small-integer":case"integer":case"single":return new V0({digitSeparator:!0,places:0});case"double":return new V0({digitSeparator:!0,places:2});case"date":return new V0({dateFormat:"long-month-day-year"});default:return e.type==="string"&&gB(e.name)?new V0({digitSeparator:!0,places:0}):null}}function Ace(){return[new $f,new Sf]}function kce(e){const t=GU(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function kT(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const Oce=["geometry","blob","raster","guid","xml"];var qm;function hw(e){return e!=null&&e.type==="esriSMS"}function cw(e,t,i){var a;const r=this.originIdOf(t)>=Nr(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&((a=i.layer)==null?void 0:a.type)==="map-image"&&(i.writeSublayerStructure||r)}}function pw(e,t,i){var r;return{enabled:!!i&&((r=i.layer)==null?void 0:r.type)==="tile"&&(i.origin&&this.originIdOf(t)>=Nr(i.origin)||this._isOverridden(t))}}function ms(e,t,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function Oy(e,t,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(t)>=Nr(i.origin))}}let Pce=0;const sh=new Set;sh.add("layer"),sh.add("parent"),sh.add("loaded"),sh.add("loadStatus"),sh.add("loadError"),sh.add("loadWarnings");let He=qm=class extends cu(m2(Up(Rn))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:t,url:i}=this;if(!t&&!i)throw new se("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const r=t?await t.fetchSublayerInfo(this,e):(await Vt(i,{responseType:"json",query:{f:"json"},...e})).data;r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(e,t){t=t.layerDefinition||t;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:a},data:{supportsAttachment:d}}=NS(t,this.url);return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:d},query:{supportsFormatPBF:a}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get fieldsIndex(){return new bS(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??Pce++}set id(e){var t,i,r;this._get("id")!==e&&(((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.exportMap)==null?void 0:r.supportsDynamicLayers)!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,i,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(a=>a.write({},r))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){var r;const i=t.layerDefinition;return 1-.01*(((i==null?void 0:i.transparency)!=null?i.transparency:(r=i==null?void 0:i.drawingInfo)==null?void 0:r.transparency)??0)}writeOpacity(e,t,i,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=kv(this.parent.id):t.parentLayerId=-1}get queryTask(){var y;if(!this.layer)return null;const{spatialReference:e}=this.layer,t="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:r}=this,a=le("featurelayer-pbf")&&(i==null?void 0:i.query.supportsFormatPBF),d=((y=i==null?void 0:i.operations)==null?void 0:y.supportsQueryAttachments)??!1;return new Vhe({url:this.url,pbfSupported:a,fieldsIndex:r,gdbVersion:t,sourceSpatialReference:e,queryAttachmentsSupported:d})}set renderer(e){if(e){for(const t of e.getSymbols())if(T9(t)){fe.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new ca({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return yi(Le.ofType(qm),e)}writeSublayers(e,t,i){var r;(r=this.sublayers)!=null&&r.length&&(t[i]=this.sublayers.map(a=>a.id).toArray().reverse())}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(a=>a.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){var r;const e=((r=this.layer)==null?void 0:r.parsedUrl)??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,(t==null?void 0:t.type)==="map-layer")return`${e.path}/${t.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${xp(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,i,r){t[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=qi(this),t=new qm;return qi(t).store=e.clone(sh),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return WR(this,e)}createQuery(){return new sr({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var r;if(this.hasOwnProperty("sublayers"))return null;const{layer:e}=this,t=e==null?void 0:e.parsedUrl,i=new(await be(()=>Promise.resolve().then(()=>Xpe),void 0)).default({url:t==null?void 0:t.path});return t&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),(e==null?void 0:e.refreshInterval)!=null&&(i.refreshInterval=e.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=re(this.floorInfo)),this.originIdOf("labelingInfo")>Te.SERVICE&&(i.labelingInfo=re(this.labelingInfo)),this.originIdOf("labelsVisible")>Te.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>Te.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>Te.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>Te.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>Te.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>Te.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>Te.DEFAULTS&&(i.popupTemplate=re(this.popupTemplate)),this.originIdOf("renderer")>Te.SERVICE&&(i.renderer=re(this.renderer)),((r=this.source)==null?void 0:r.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>Te.DEFAULTS&&(i.title=this.title),(e==null?void 0:e.type)==="map-image"&&e.originIdOf("customParameters")>Te.DEFAULTS&&(i.customParameters=e.customParameters),(e==null?void 0:e.type)==="tile"&&e.originIdOf("customParameters")>Te.DEFAULTS&&(i.customParameters=e.customParameters),i}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let a=null;return i==null||i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===r.toString()&&(a=d),!!a)}),a}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const a=r.domains&&r.domains[e];if(a&&a.type!=="inherited")return a}return this._getLayerDomain(e)}async queryAttachments(e,t){var M,A;await this.load(),e=HR.from(e);const i=this.capabilities;if(!((M=i==null?void 0:i.data)!=null&&M.supportsAttachment))throw new se("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:a,globalIds:d,num:y,size:m,start:_,where:$}=e;if(!((A=i==null?void 0:i.operations)!=null&&A.supportsQueryAttachments)&&((r==null?void 0:r.length)>0||(d==null?void 0:d.length)>0||(m==null?void 0:m.length)>0||y||_||$))throw new se("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||d!=null&&d.length||$))throw new se("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return this.queryTask.executeAttachmentQuery(e,t)}async queryFeatures(e=this.createQuery(),t){var r,a;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new se("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new se("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(e,{...t,query:{...(r=this.layer)==null?void 0:r.customParameters,token:(a=this.layer)==null?void 0:a.apiKey}});if(i!=null&&i.features)for(const d of i.features)d.sourceLayer=this;return i}toExportImageJSON(e){var d;const t={id:this.id,source:((d=this.source)==null?void 0:d.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=f2(e,this.definitionExpression);i!=null&&(t.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((y,m)=>(y[m]=this.originIdOf(m),y),{});if(Object.keys(r).some(y=>r[y]>Te.SERVICE)){const y=t.drawingInfo={};if(r.renderer>Te.SERVICE&&(y.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>Te.SERVICE&&(y.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>Te.SERVICE){!this.loaded&&this.labelingInfo.some(_=>!_.labelPlacement)&&fe.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let m=this.labelingInfo;this.geometryType!=null&&(m=cce(this.labelingInfo,Tg.toJSON(this.geometryType))),y.labelingInfo=m.filter(_=>_.labelPlacement).map(_=>_.toJSON({origin:"service",layer:this.layer})),y.showLabels=!0}r.opacity>Te.SERVICE&&(y.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(y.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const i=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const r of i)hw(r.symbol)&&t(r.symbol);"symbol"in e&&hw(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&hw(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){var m,_,$,M;const i=this.layer,r=this._get(e);let a,d;switch(e){case"definitionExpression":case"floorInfo":a="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":a="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":a="supportsDynamicLayers",d="supportsModification"}const y=qi(this).getDefaultOrigin();if(y!=="service"){if(a&&(($=(_=(m=this.layer)==null?void 0:m.capabilities)==null?void 0:_.exportMap)==null?void 0:$[a])===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${a}'`);if(d&&((M=this.capabilities)==null?void 0:M.exportMap[d])===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${d}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),y!=="service"&&r!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{var a,d,y;const r=(y=(d=(a=this.layer)==null?void 0:a.capabilities)==null?void 0:d.exportMap)==null?void 0:y.supportsSublayersChanges;r==null||r||(fe.getLogger(this).error(new se("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,t){const{layer:i,declaredClass:r}=this;fe.getLogger(r).error(new se("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${i==null?void 0:i.id}'`,{reason:t,sublayer:this,layer:i}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};He.test={isMapImageLayerOverridePolicy:e=>e===ms||e===cw,isTileImageLayerOverridePolicy:e=>e===pw},b([S({readOnly:!0})],He.prototype,"capabilities",void 0),b([me("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],He.prototype,"readCapabilities",null),b([S()],He.prototype,"defaultPopupTemplate",null),b([S({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:cw}}})],He.prototype,"definitionExpression",null),b([S({readOnly:!0})],He.prototype,"effectiveScaleRange",null),b([S({type:[d2],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],He.prototype,"fields",void 0),b([S({readOnly:!0})],He.prototype,"fieldsIndex",null),b([S({type:UR,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:cw},origins:{"web-scene":{read:!1,write:!1}}}})],He.prototype,"floorInfo",null),b([S({type:gt,json:{read:{source:"layerDefinition.extent"}}})],He.prototype,"fullExtent",void 0),b([S({type:Tg.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:Tg.read}}}}})],He.prototype,"geometryType",void 0),b([S({type:String})],He.prototype,"globalIdField",void 0),b([me("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],He.prototype,"readGlobalIdFieldFromService",null),b([S({type:Ot,json:{write:{ignoreOrigin:!0}}})],He.prototype,"id",null),b([S({value:null,type:[v1],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ms}}})],He.prototype,"labelingInfo",null),b([Se("labelingInfo")],He.prototype,"writeLabelingInfo",null),b([S({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ms}}})],He.prototype,"labelsVisible",null),b([S({value:null})],He.prototype,"layer",null),b([S({type:String,json:{write:{overridePolicy:pw}}})],He.prototype,"layerItemId",void 0),b([S({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Oy}}})],He.prototype,"legendEnabled",void 0),b([S({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],He.prototype,"listMode",null),b([S({type:Number,value:0,json:{write:{overridePolicy:ms}}})],He.prototype,"minScale",null),b([me("minScale",["minScale","layerDefinition.minScale"])],He.prototype,"readMinScale",null),b([S({type:Number,value:0,json:{write:{overridePolicy:ms}}})],He.prototype,"maxScale",null),b([me("maxScale",["maxScale","layerDefinition.maxScale"])],He.prototype,"readMaxScale",null),b([S({type:String})],He.prototype,"objectIdField",void 0),b([me("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],He.prototype,"readObjectIdFieldFromService",null),b([S({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ms}}})],He.prototype,"opacity",null),b([me("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],He.prototype,"readOpacity",null),b([Se("opacity")],He.prototype,"writeOpacity",null),b([S({json:{type:Ot,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:ms}}})],He.prototype,"parent",void 0),b([Se("parent")],He.prototype,"writeParent",null),b([S({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:Oy,writer(e,t,i){t[i]=!e}}}})],He.prototype,"popupEnabled",void 0),b([S({type:Yp,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Oy}}})],He.prototype,"popupTemplate",void 0),b([S({readOnly:!0})],He.prototype,"queryTask",null),b([S({types:y1,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ms},origins:{"web-scene":{types:dR,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ms}}}}})],He.prototype,"renderer",null),b([S({types:{key:"type",base:null,typeMap:{"data-layer":Pr,"map-layer":ca}},cast(e){if(e){if("mapLayerId"in e)return Ch(ca,e);if("dataSource"in e)return Ch(Pr,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:ms}}})],He.prototype,"source",null),b([S()],He.prototype,"sourceJSON",void 0),b([S({value:null,json:{type:[Ot],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ms}}})],He.prototype,"sublayers",null),b([Tt("sublayers")],He.prototype,"castSublayers",null),b([Se("sublayers")],He.prototype,"writeSublayers",null),b([S({type:String,json:{name:"name",write:{overridePolicy:Oy}}})],He.prototype,"title",void 0),b([S({type:String})],He.prototype,"typeIdField",void 0),b([me("typeIdField",["layerDefinition.typeIdField"])],He.prototype,"readTypeIdField",null),b([S({type:[kS],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],He.prototype,"types",void 0),b([S({type:String,json:{name:"layerUrl",write:{overridePolicy:pw}}})],He.prototype,"url",null),b([S({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ms}}})],He.prototype,"visible",null),b([Se("visible")],He.prototype,"writeVisible",null),He=qm=b([B("esri.layers.support.Sublayer")],He);const T2=He,Cce=fe.getLogger("esri.layers.TileLayer");function Nce(e,t){const i=[],r={};return e&&e.forEach(a=>{const d=new T2;if(d.read(a,t),r[d.id]=d,a.parentLayerId!=null&&a.parentLayerId!==-1){const y=r[a.parentLayerId];y.sublayers||(y.sublayers=[]),y.sublayers.unshift(d)}else i.unshift(d)}),i}const dw=Le.ofType(T2);function JR(e,t){e&&e.forEach(i=>{t(i),i.sublayers&&i.sublayers.length&&JR(i.sublayers,t)})}const jce=e=>{let t=class extends e{constructor(...i){super(...i),this.allSublayers=new Ep({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[Te.SERVICE]:{},[Te.PORTAL_ITEM]:{},[Te.WEB_SCENE]:{},[Te.WEB_MAP]:{}},this.addHandles(ke(()=>this.sublayers,(r,a)=>this._handleSublayersChange(r,a),t0))}destroy(){this.allSublayers.destroy()}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:a}=this,d=Nr(r.origin);if(d<Te.SERVICE||(a[d]={context:r,visibleLayers:i.visibleLayers||a[d].visibleLayers,layers:i.layers||a[d].layers},d>Te.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:y,origin:m}=this.createSublayersForOrigin("web-document"),_=qi(this);_.setDefaultOrigin(m),this._set("sublayers",new dw(y)),_.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=Nr(i==="web-document"?"web-map":i);let a=Te.SERVICE,d=this.sublayersSourceJSON[Te.SERVICE].layers,y=this.sublayersSourceJSON[Te.SERVICE].context,m=null;const _=[Te.PORTAL_ITEM,Te.WEB_SCENE,Te.WEB_MAP].filter(L=>L<=r);for(const L of _){const F=this.sublayersSourceJSON[L];hoe(F.layers)&&(a=L,d=F.layers,y=F.context,F.visibleLayers&&(m={visibleLayers:F.visibleLayers,context:F.context}))}const $=[Te.PORTAL_ITEM,Te.WEB_SCENE,Te.WEB_MAP].filter(L=>L>a&&L<=r);let M=null;for(const L of $){const{layers:F,visibleLayers:V,context:J}=this.sublayersSourceJSON[L];F&&(M={layers:F,context:J}),V&&(m={visibleLayers:V,context:J})}const A=Nce(d,y),P=new Map,j=new Set;if(M)for(const L of M.layers)P.set(L.id,L);if(m!=null&&m.visibleLayers)for(const L of m.visibleLayers)j.add(L);return JR(A,L=>{M&&L.read(P.get(L.id),M.context),m&&L.read({defaultVisibility:j.has(L.id)},m.context)}),{origin:df(a),sublayers:new dw({items:A})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(a=>{a.parent=null,a.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(a=>{a.parent=this,a.layer=this}),this.addHandles([i.on("after-add",({item:a})=>{a.parent=this,a.layer=this}),i.on("after-remove",({item:a})=>{a.parent=null,a.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",a=>{Cce.error(new se("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),a.preventDefault()}),"sublayers-owner"))}};return b([S({readOnly:!0})],t.prototype,"allSublayers",void 0),b([S({readOnly:!0,type:Le.ofType(T2)})],t.prototype,"serviceSublayers",void 0),b([S({value:null,type:dw,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),b([S({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=b([B("esri.layers.mixins.SublayersOwner")],t),t},KR=Sr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let kd=class extends Kt(pe){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return TX(this.value,this.unit,"milliseconds")}};b([je(KR,{nonNullable:!0})],kd.prototype,"unit",void 0),b([S({type:Number,json:{write:!0},nonNullable:!0})],kd.prototype,"value",void 0),kd=b([B("esri.TimeInterval")],kd);const gv=kd;function OT(e,t){return gv.fromJSON({value:e,unit:t})}let gr=class extends Kt(pe){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),a=new Date(i.timeExtent[1]);return new Ws({start:r,end:a})}writeFullTimeExtent(t,i){t&&t.start!=null&&t.end!=null?i.timeExtent=[t.start.getTime(),t.end.getTime()]:i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?OT(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?OT(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=(t==null?void 0:t.toJSON().value)??null,i.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};b([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],gr.prototype,"cumulative",void 0),b([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],gr.prototype,"endField",void 0),b([S({type:Ws,json:{write:{enabled:!0,allowNull:!0}}})],gr.prototype,"fullTimeExtent",void 0),b([me("fullTimeExtent",["timeExtent"])],gr.prototype,"readFullTimeExtent",null),b([Se("fullTimeExtent")],gr.prototype,"writeFullTimeExtent",null),b([S({type:Boolean,json:{write:!0}})],gr.prototype,"hasLiveData",void 0),b([S({type:gv,json:{write:{enabled:!0,allowNull:!0}}})],gr.prototype,"interval",void 0),b([me("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],gr.prototype,"readInterval",null),b([Se("interval")],gr.prototype,"writeInterval",null),b([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],gr.prototype,"startField",void 0),b([S({type:eu,json:{write:{enabled:!0,allowNull:!0}}})],gr.prototype,"timeReference",void 0),b([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],gr.prototype,"trackIdField",void 0),b([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],gr.prototype,"useTime",void 0),gr=b([B("esri.layers.support.TimeInfo")],gr);const YR=gr,ZR=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const a=r.timeInfo.exportOptions;if(!a)return null;const d=a.timeOffset,y=KR.fromJSON(a.timeOffsetUnits);return d&&y?new gv({value:d,unit:y}):null}set timeInfo(i){rA(i,this.fieldsIndex),this._set("timeInfo",i)}};return b([S({type:Ws,json:{write:!1}})],t.prototype,"timeExtent",void 0),b([S({type:gv})],t.prototype,"timeOffset",void 0),b([me("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),b([S({value:null,type:YR,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),b([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=b([B("esri.layers.mixins.TemporalLayer")],t),t},Rce={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let is=class extends cu(De){constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(i=>{const r=ov(this.floors,i);return i.toExportImageJSON(r)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&DN(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.handles.remove("layer"),t&&this.handles.add([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",i=>this.notifyChange(Rce[i.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const t=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(a=>a.definitionExpression!=null||t&&a.floorInfo!=null);return i.length?JSON.stringify(i.reduce((a,d)=>{const y=ov(this.floors,d),m=f2(y,d.definitionExpression);return m!=null&&(a[d.id]=m),a},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const i=this.layer.sublayers,r=d=>{const y=this.scale,m=y===0,_=d.minScale===0||y<=d.minScale,$=d.maxScale===0||y>=d.maxScale;d.visible&&(m||_&&$)&&(d.sublayers?d.sublayers.forEach(r):t.unshift(d))};i&&i.forEach(r);const a=this._get("visibleSublayers");return!a||a.length!==t.length||a.some((d,y)=>t[y]!==d)?t:a}toJSON(){const t=this.layer;let i={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};b([S({readOnly:!0})],is.prototype,"dynamicLayers",null),b([S()],is.prototype,"floors",void 0),b([S({readOnly:!0})],is.prototype,"hasDynamicLayers",null),b([S()],is.prototype,"layer",null),b([S({readOnly:!0})],is.prototype,"layers",null),b([S({readOnly:!0})],is.prototype,"layerDefs",null),b([S({type:Number})],is.prototype,"scale",void 0),b([S(Iae)],is.prototype,"timeExtent",void 0),b([S({readOnly:!0})],is.prototype,"version",null),b([S({readOnly:!0})],is.prototype,"visibleSublayers",null),is=b([B("esri.layers.mixins.ExportImageParameters")],is);async function Lce(e,t,i){let r;try{r=await createImageBitmap(e)}catch(a){throw new se("request:server",`Unable to load ${t}`,{url:t,error:a})}return Jt(i),r}async function Gve(e,t,i,r,a){let d;try{d=await createImageBitmap(e)}catch(y){throw new se("request:server",`Unable to load tile ${t}/${i}/${r}`,{error:y,level:t,row:i,col:r})}return Jt(a),d}const bn=[];function XR(e,t){if(IP(e.url??""))return!0;const{wkid:i}=t;for(const r of bn){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}bn.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),bn.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),bn.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),bn.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),bn.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),bn.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),bn.push([10.61,()=>new Set([102497])]),bn.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),bn.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),bn.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);let pi=class extends kj(ZR(Lj(jce(Oae(mj(Pj(Cj(m2(Rj(hj(Oj(cu(K4))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(Ps).then(()=>this._fetchService(i))),Promise.resolve(this)}readImageFormat(t,i){const r=i.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(t,i,r,a){var M;if(!this.loaded||!t)return;const d=t.slice().reverse().flatten(({sublayers:A})=>A&&A.toArray().reverse()).toArray();let y=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((M=this.capabilities.exportMap)!=null&&M.supportsDynamicLayers)){const A=Nr(a.origin);if(A===Te.PORTAL_ITEM){const P=this.createSublayersForOrigin("service").sublayers;y=g$(d,P,Te.SERVICE)}else if(A>Te.PORTAL_ITEM){const P=this.createSublayersForOrigin("portal-item");y=g$(d,P.sublayers,Nr(P.origin))}}const m=[],_={writeSublayerStructure:y,...a};let $=y;d.forEach(A=>{const P=A.write({},_);m.push(P),$=$||A.originOf("visible")==="user"}),m.some(A=>Object.keys(A).length>1)&&(i.layers=m),$&&(i.visibleLayers=d.filter(A=>A.visible).map(A=>A.id))}createExportImageParameters(t,i,r,a){const d=a&&a.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const y=new is({layer:this,floors:a==null?void 0:a.floors,scale:RN({extent:t,width:i})*d}),m=y.toJSON();y.destroy();const _=!a||!a.rotation||this.version<10.3?{}:{rotation:-a.rotation},$=t&&t.spatialReference,M=$.wkid||JSON.stringify($.toJSON());m.dpi*=d;const A={};if(a!=null&&a.timeExtent){const{start:P,end:j}=a.timeExtent.toJSON();A.time=P&&j&&P===j?""+P:`${P??"null"},${j??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(A.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:M,imageSR:M,size:i+","+r,...m,..._,...A}}async fetchImage(t,i,r,a){const{data:d}=await this._fetchImage("image",t,i,r,a);return d}async fetchImageBitmap(t,i,r,a){const{data:d,url:y}=await this._fetchImage("blob",t,i,r,a);return Lce(d,y,a==null?void 0:a.signal)}async fetchRecomputedExtents(t={}){const i={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Vt(this.url,i),{extent:a,fullExtent:d,timeExtent:y}=r,m=a||d;return{fullExtent:m&&gt.fromJSON(m),timeExtent:y&&Ws.fromJSON({start:y[0],end:y[1]})}}loadAll(){return y4(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return XR(this,t)}async _fetchImage(t,i,r,a,d){var _,$,M;const y={responseType:t,signal:(d==null?void 0:d.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(i,r,a,d),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},m=this.parsedUrl.path+"/export";if(((_=y.query)==null?void 0:_.dynamicLayers)!=null&&!((M=($=this.capabilities)==null?void 0:$.exportMap)!=null&&M.supportsDynamicLayers))throw new se("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:y.query});try{const{data:A}=await Vt(m,y);return{data:A,url:m}}catch(A){throw Jr(A)?A:new se("mapimagelayer:image-fetch-error",`Unable to load image: ${m}`,{error:A})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:i,ssl:r}=await Vt(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})}};b([S({type:eu})],pi.prototype,"dateFieldsTimeReference",void 0),b([S({type:Boolean})],pi.prototype,"datesInUnknownTimezone",void 0),b([S()],pi.prototype,"dpi",void 0),b([S()],pi.prototype,"gdbVersion",void 0),b([S()],pi.prototype,"imageFormat",void 0),b([me("imageFormat",["supportedImageFormatTypes"])],pi.prototype,"readImageFormat",null),b([S({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],pi.prototype,"imageMaxHeight",void 0),b([S({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],pi.prototype,"imageMaxWidth",void 0),b([S()],pi.prototype,"imageTransparency",void 0),b([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],pi.prototype,"isReference",void 0),b([S({json:{read:!1,write:!1}})],pi.prototype,"labelsVisible",void 0),b([S({type:["ArcGISMapServiceLayer"]})],pi.prototype,"operationalLayerType",void 0),b([S({json:{read:!1,write:!1}})],pi.prototype,"popupEnabled",void 0),b([S({type:eu})],pi.prototype,"preferredTimeReference",void 0),b([S()],pi.prototype,"sourceJSON",void 0),b([S({json:{write:{ignoreOrigin:!0}}})],pi.prototype,"sublayers",void 0),b([Se("sublayers",{layers:{type:[T2]},visibleLayers:{type:[Ot]}})],pi.prototype,"writeSublayers",null),b([S({type:["show","hide","hide-children"]})],pi.prototype,"listMode",void 0),b([S({json:{read:!1},readOnly:!0,value:"map-image"})],pi.prototype,"type",void 0),b([S(cj)],pi.prototype,"url",void 0),pi=b([B("esri.layers.MapImageLayer")],pi);const QR=pi,Uve=Object.freeze(Object.defineProperty({__proto__:null,default:QR},Symbol.toStringTag,{value:"Module"}));var M_;let nh=M_=class extends pe{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new M_({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};b([S({type:String,json:{write:!0}})],nh.prototype,"expression",void 0),b([S({type:String,json:{write:!0}})],nh.prototype,"name",void 0),b([S({type:["boolean","date","number","string"],json:{write:!0}})],nh.prototype,"returnType",void 0),b([S({type:String,json:{write:!0}})],nh.prototype,"title",void 0),nh=M_=b([B("esri.form.ExpressionInfo")],nh);const Dce=nh;let oh=class extends pe{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};b([S({type:String,json:{write:!0}})],oh.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],oh.prototype,"label",void 0),b([S()],oh.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],oh.prototype,"visibilityExpression",void 0),oh=b([B("esri.form.elements.Element")],oh);const Fp=oh;var A_;let Um=A_=class extends pe{constructor(e){super(e),this.type=null}clone(){return new A_({type:this.type})}};b([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Um.prototype,"type",void 0),Um=A_=b([B("esri.form.elements.inputs.AttachmentInput")],Um);const Fce=Um;var k_;let ah=k_=class extends Fp{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new k_({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};b([S({type:String,json:{write:!0}})],ah.prototype,"attachmentKeyword",void 0),b([S({type:Boolean,json:{write:!0}})],ah.prototype,"editable",void 0),b([S({type:Fce,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ah.prototype,"input",void 0),b([S({type:["attachment"],json:{read:!1,write:!0}})],ah.prototype,"type",void 0),ah=k_=b([B("esri.form.elements.AttachmentElement")],ah);const PT=ah;let Bm=class extends pe{constructor(t){super(t),this.type=null}};b([S()],Bm.prototype,"type",void 0),Bm=b([B("esri.form.elements.inputs.Input")],Bm);const u0=Bm;let Od=class extends u0{constructor(t){super(t),this.maxLength=null,this.minLength=0}};b([S({type:Number,json:{write:!0}})],Od.prototype,"maxLength",void 0),b([S({type:Number,json:{write:!0}})],Od.prototype,"minLength",void 0),Od=b([B("esri.form.elements.inputs.TextInput")],Od);const jS=Od;var O_;let Hm=O_=class extends jS{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new O_({maxLength:this.maxLength,minLength:this.minLength})}};b([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],Hm.prototype,"type",void 0),Hm=O_=b([B("esri.form.elements.inputs.BarcodeScannerInput")],Hm);const zce=Hm;var P_;let Jc=P_=class extends u0{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new P_({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};b([S({type:String,json:{write:!0}})],Jc.prototype,"noValueOptionLabel",void 0),b([S({type:Boolean,json:{write:!0}})],Jc.prototype,"showNoValueOption",void 0),b([S({type:["combo-box"],json:{read:!1,write:!0}})],Jc.prototype,"type",void 0),Jc=P_=b([B("esri.form.elements.inputs.ComboBoxInput")],Jc);const Vce=Jc;var C_;function CT(e){return e!=null?new Date(e):null}function NT(e){return e?e.getTime():null}let wn=C_=class extends u0{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return CT(t.max)}writeMax(e,t){t.max=NT(e)}readMin(e,t){return CT(t.min)}writeMin(e,t){t.min=NT(e)}clone(){return new C_({includeTime:this.includeTime,max:this.max,min:this.min})}};b([S({type:Boolean,json:{write:!0}})],wn.prototype,"includeTime",void 0),b([S({type:Date,json:{type:Number,write:!0}})],wn.prototype,"max",void 0),b([me("max")],wn.prototype,"readMax",null),b([Se("max")],wn.prototype,"writeMax",null),b([S({type:Date,json:{type:Number,write:!0}})],wn.prototype,"min",void 0),b([me("min")],wn.prototype,"readMin",null),b([Se("min")],wn.prototype,"writeMin",null),b([S({type:["datetime-picker"],json:{read:!1,write:!0}})],wn.prototype,"type",void 0),wn=C_=b([B("esri.form.elements.inputs.DateTimePickerInput")],wn);const Gce=wn;var N_;let Kc=N_=class extends u0{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new N_({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};b([S({type:String,json:{write:!0}})],Kc.prototype,"noValueOptionLabel",void 0),b([S({type:Boolean,json:{write:!0}})],Kc.prototype,"showNoValueOption",void 0),b([S({type:["radio-buttons"],json:{read:!1,write:!0}})],Kc.prototype,"type",void 0),Kc=N_=b([B("esri.form.elements.inputs.RadioButtonsInput")],Kc);const qce=Kc;var j_;let Yc=j_=class extends u0{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new j_({offValue:this.offValue,onValue:this.onValue})}};b([S({type:[String,Number],json:{write:!0}})],Yc.prototype,"offValue",void 0),b([S({type:[String,Number],json:{write:!0}})],Yc.prototype,"onValue",void 0),b([S({type:["switch"],json:{read:!1,write:!0}})],Yc.prototype,"type",void 0),Yc=j_=b([B("esri.form.elements.inputs.SwitchInput")],Yc);const Uce=Yc;var R_;let Wm=R_=class extends jS{constructor(e){super(e),this.type="text-area"}clone(){return new R_({maxLength:this.maxLength,minLength:this.minLength})}};b([S({type:["text-area"],json:{read:!1,write:!0}})],Wm.prototype,"type",void 0),Wm=R_=b([B("esri.form.elements.inputs.TextAreaInput")],Wm);const Bce=Wm;var L_;let Jm=L_=class extends jS{constructor(e){super(e),this.type="text-box"}clone(){return new L_({maxLength:this.maxLength,minLength:this.minLength})}};b([S({type:["text-box"],json:{read:!1,write:!0}})],Jm.prototype,"type",void 0),Jm=L_=b([B("esri.form.elements.inputs.TextBoxInput")],Jm);const Hce=Jm,Wce={base:u0,key:"type",typeMap:{"barcode-scanner":zce,"combo-box":Vce,"datetime-picker":Gce,"radio-buttons":qce,switch:Uce,"text-area":Bce,"text-box":Hce}};var D_;const eL="esri.form.elements.FieldElement",jT=fe.getLogger(eL);let Ms=D_=class extends Fp{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return qw(jT,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(e){qw(jT,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",e)}clone(){return new D_({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};b([S({types:MN,json:{read:{reader:tS},write:!0}})],Ms.prototype,"domain",void 0),b([S({type:Boolean,json:{write:!0}})],Ms.prototype,"editable",null),b([S({type:String,json:{write:!0}})],Ms.prototype,"editableExpression",void 0),b([S({type:String,json:{write:!0}})],Ms.prototype,"fieldName",void 0),b([S({type:String,json:{write:!0}})],Ms.prototype,"hint",void 0),b([S({types:Wce,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ms.prototype,"input",void 0),b([S({type:String,json:{write:!0}})],Ms.prototype,"requiredExpression",void 0),b([S({type:String,json:{read:!1,write:!0}})],Ms.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ms.prototype,"valueExpression",void 0),Ms=D_=b([B(eL)],Ms);const RT=Ms;var F_;let ia=F_=class extends Fp{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new F_({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:re(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};b([S({type:Number,json:{write:!0}})],ia.prototype,"displayCount",void 0),b([S({type:["list"],json:{write:!0}})],ia.prototype,"displayType",void 0),b([S({type:String,json:{write:!0}})],ia.prototype,"editableExpression",void 0),b([S({type:[h6],json:{write:!0}})],ia.prototype,"orderByFields",void 0),b([S({type:Number,json:{write:!0}})],ia.prototype,"relationshipId",void 0),b([S({type:["relationship"],json:{read:!1,write:!0}})],ia.prototype,"type",void 0),ia=F_=b([B("esri.form.elements.RelationshipElement")],ia);const LT=ia;function tL(e){return{typesWithGroup:{base:Fp,key:"type",typeMap:{attachment:PT,field:RT,group:e,relationship:LT}},typesWithoutGroup:{base:Fp,key:"type",typeMap:{attachment:PT,field:RT,relationship:LT}}}}function iL(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(a=>r[a.type]).map(a=>r[a.type].fromJSON(a))}function rL(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(a=>r[a.type]).map(a=>a.toJSON())}function sL(e,t,i=!0){return e?e.map(r=>_o(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var z_;let uo=z_=class extends Fp{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return sL(e,fw,!1)}readElements(e,t){return iL(t.formElements,fw,!1)}writeElements(e,t){t.formElements=rL(e,fw,!1)}clone(){return new z_({description:this.description,elements:re(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};b([S({json:{write:!0}})],uo.prototype,"elements",void 0),b([Tt("elements")],uo.prototype,"castElements",null),b([me("elements",["formElements"])],uo.prototype,"readElements",null),b([Se("elements")],uo.prototype,"writeElements",null),b([S({type:["collapsed","expanded"],json:{write:!0}})],uo.prototype,"initialState",void 0),b([S({type:String,json:{read:!1,write:!0}})],uo.prototype,"type",void 0),uo=z_=b([B("esri.form.elements.GroupElement")],uo);const fw=tL(uo),Jce=uo;var V_;const yw=tL(Jce);let _n=V_=class extends pe{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return sL(e,yw)}readElements(e,t){return iL(t.formElements,yw)}writeElements(e,t){t.formElements=rL(e,yw)}clone(){return new V_({description:this.description,expressionInfos:re(this.expressionInfos),elements:re(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};b([S({type:String,json:{write:!0}})],_n.prototype,"description",void 0),b([S({json:{write:!0}})],_n.prototype,"elements",void 0),b([Tt("elements")],_n.prototype,"castElements",null),b([me("elements",["formElements"])],_n.prototype,"readElements",null),b([Se("elements")],_n.prototype,"writeElements",null),b([S({type:[Dce],json:{write:!0}})],_n.prototype,"expressionInfos",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],_n.prototype,"preserveFieldValuesWhenHidden",void 0),b([S({type:String,json:{write:!0}})],_n.prototype,"title",void 0),_n=V_=b([B("esri.form.FormTemplate")],_n);const Kce=_n;function DT(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const a of r)a.length>2&&(a[2]*=i)}function Yce(e,t,i){if(!e&&!t||!i)return;const r=Tp(i);FT(e,i,r),FT(t,i,r)}function FT(e,t,i){if(e)for(const r of e)Zce(r.geometry,t,i)}function Zce(e,t,i){if(e==null||!e.spatialReference||Ti(e.spatialReference,t))return;const r=Tp(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)DT(e,e.rings,r);else if("paths"in e)DT(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const a of e.points)a.length>2&&(a[2]*=r)}}let Xce=0;const nL="esri.layers.graphics.sources.MemorySource",mw=fe.getLogger(nL);let na=class extends Rn.LoadableMixin(Cv(cu(Le))){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);v_(t,this.layer.spatialReference,r);const a=g1.fromJSON(r);if(!this._requiresClientGraphicMapping())return a;const d=this.layer.objectIdField;for(const y of a.features){const m=y.attributes[d],_=this._idToClientGraphic.get(m);_&&(y.geometry=_.geometry)}return a.geometryType=this.layer.geometryType,a}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new se("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return v_(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:gt.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async _applyEdits(t){if(!this._connection)throw new se("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const a=[],d=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const y=M=>"objectId"in M&&M.objectId!=null?M.objectId:"attributes"in M&&M.attributes[i]!=null?M.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const M of t.deleteFeatures){const A=y(M);A!=null&&a.push(A)}const m=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const M of t.updateFeatures)if(d.push(this._serializeFeature(M)),m){const A=y(M);A!=null&&m.set(A,M)}}Yce(r?r.features:null,d,this.layer.spatialReference);const{fullExtent:_,featureEditResults:$}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:d,deletes:a});return this.fullExtent=_,r&&r.finish($.uidToObjectId),this._updateClientGraphicIds(m,$),this._createEditsResult($)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:a}of t)a==null||a.type!=="mesh"||a.hasExtent||a.loaded||r.push(a.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const a=t.get(r.objectId);a!=null&&this._addIdToClientGraphic(a)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new se("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let a=null;for(let y=0;y<t.length;y++){const m=t[y],_=this._serializeFeature(m);a||m.geometry==null||(a=m.geometry.type),r[y]=_,i.set(`${_.uid}`,m)}const d=this;return{features:r,inferredGeometryType:a,finish(y){const m=d.sourceJSON.objectIdField;for(const _ in y){const $=y[_],M=i.get(_);M&&(M.attributes||(M.attributes={}),$===-1?delete M.attributes[m]:M.attributes[m]=$,d._addIdToClientGraphic(M))}}}}_addIdToClientGraphic(t){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=t.attributes&&t.attributes[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),a=(Xce++).toString();return r?{uid:a,geometry:r.toJSON(),attributes:i}:{uid:a,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?$o.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await uO("MemorySourceWorker",{strategy:le("feature-layers-workers")?"dedicated":"local",signal:t});const{fields:i,spatialReference:r,objectIdField:a,hasM:d,hasZ:y,timeInfo:m}=this.layer,_=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const $=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",j=>{mw.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),j.preventDefault()}));const M={features:$.features,fields:i&&i.map(j=>j.toJSON()),geometryType:u3.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&d,hasZ:this._layerOrSourceGeometryType==="mesh"||y,objectIdField:a,spatialReference:_?null:r&&r.toJSON(),timeInfo:m?m.toJSON():null},A=await this._connection.invoke("load",M,{signal:t});for(const j of A.warnings)mw.warn(j.message,{layer:this.layer,warning:j});A.featureErrors.length&&mw.warn(`Encountered ${A.featureErrors.length} validation errors while loading features`,A.featureErrors);const P=A.layerDefinition;this._geometryTypeRequiresClientGraphicMapping($.inferredGeometryType)&&(P.geometryType=u3.toJSON($.inferredGeometryType)),this.sourceJSON=P,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),$.finish(A.assignedObjectIds)}};b([c4({Type:Us,ensureType:yi(Us)})],na.prototype,"itemType",void 0),b([S()],na.prototype,"type",void 0),b([S({constructOnly:!0})],na.prototype,"layer",void 0),b([S({readOnly:!0})],na.prototype,"_workerGeometryType",null),b([S()],na.prototype,"sourceJSON",void 0),na=b([B(nL)],na);const oL=new Ea.EventEmitter;function Kve(e,t,i=!1){const r=Vs();return i=t==null||i,oL.emit("apply-edits",{serviceUrl:e,layerId:t,mayReceiveServiceEdits:i,result:r.promise}),r}const aL="esri.layers.mixins.EditBusLayer",lL=Symbol(aL);function Yve(e){return e!=null&&typeof e=="object"&&lL in e}const Qce=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this.when().then(()=>{this.own([oL.on("apply-edits",a=>{const{serviceUrl:d,layerId:y,mayReceiveServiceEdits:m,result:_}=a,$=d===this.url,M=y!=null&&this.layerId!=null&&y===this.layerId;if(!$||!M&&!m)return;const A=_.then(P=>{var L;if(M&&(P.addedFeatures.length||P.updatedFeatures.length||P.deletedFeatures.length||P.addedAttachments.length||P.updatedAttachments.length||P.deletedAttachments.length))return this.emit("edits",re(P)),P;const j=(L=P.editedFeatures)==null?void 0:L.find(({layerId:F})=>F===this.layerId);if(j){const{adds:F,updates:V,deletes:J}=j.editedFeatures,Q={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:F?F.map(({attributes:Y})=>({objectId:this.objectIdField&&Y[this.objectIdField],globalId:this.globalIdField&&Y[this.globalIdField]})):[],deletedFeatures:J?J.map(({attributes:Y})=>({objectId:this.objectIdField&&Y[this.objectIdField],globalId:this.globalIdField&&Y[this.globalIdField]})):[],updatedFeatures:V?V.map(({current:{attributes:Y}})=>({objectId:this.objectIdField&&Y[this.objectIdField],globalId:this.globalIdField&&Y[this.globalIdField]})):[],editedFeatures:re(P.editedFeatures),exceededTransferLimit:!1};return this.emit("edits",Q),Q}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:re(P.editedFeatures),exceededTransferLimit:!1}});this.emit("apply-edits",{result:A})})])},()=>{})}};return t=lL,i=b([B(aL)],i),i};var G_;const gw=new ut({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),vw=new ut({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let lo=G_=class extends pe{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:a,objectIds:d,units:y,distance:m}=this;return new sr({geometry:re(i),objectIds:re(d),spatialRelationship:r,timeExtent:re(a),where:t,units:y,distance:m,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:a,units:d,distance:y}=this;return new G_({geometry:re(t),objectIds:re(a),spatialRelationship:i,timeExtent:re(r),where:e,units:d,distance:y})}};b([S({type:String,json:{write:!0}})],lo.prototype,"where",void 0),b([S({types:nu,json:{write:!0}})],lo.prototype,"geometry",void 0),b([S({type:gw.apiValues,json:{name:"spatialRel",read:{reader:gw.read},write:{allowNull:!1,writer:gw.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],lo.prototype,"spatialRelationship",void 0),b([S({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],lo.prototype,"distance",void 0),b([S({type:[Number],json:{write:!0}})],lo.prototype,"objectIds",void 0),b([S({type:vw.apiValues,json:{read:vw.read,write:{writer:vw.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],lo.prototype,"units",void 0),b([S({type:Ws,json:{write:!0}})],lo.prototype,"timeExtent",void 0),lo=G_=b([B("esri.layers.support.FeatureFilter")],lo);const epe=lo;var q_;const zT={read:{reader:dS},write:{writer:fS,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},VT={read:{reader:dS},write:{writer:fS,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},GT={name:"showExcludedLabels",default:!0};let lh=q_=class extends pe{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,a;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const d=Object.keys(i.filter);if(d.length>1||d[0]!=="where")return(r=t.messages)==null||r.push(new se("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(a=t.messages)==null||a.push(new se("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new q_({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};b([S({type:epe,json:{write:{allowNull:!0,writer(e,t,i,r){const a=e==null?void 0:e.write({},r);a&&Object.keys(a).length!==0?_r(i,a,t):_r(i,null,t)}}}})],lh.prototype,"filter",void 0),b([S({json:{write:!0,origins:{"web-map":zT,"portal-item":zT}}})],lh.prototype,"includedEffect",void 0),b([S({json:{write:!0,origins:{"web-map":VT,"portal-item":VT}}})],lh.prototype,"excludedEffect",void 0),b([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":GT,"portal-item":GT}}})],lh.prototype,"excludedLabelsVisible",void 0),lh=q_=b([B("esri.layers.support.FeatureEffect")],lh);const tpe=lh,qT={write:{allowNull:!0}},ipe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return b([S({type:tpe,json:{origins:{"web-map":qT,"portal-item":qT}}})],t.prototype,"featureEffect",void 0),t=b([B("esri.layers.mixins.FeatureEffectLayer")],t),t};let ra=class extends Kt(pe){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};b([S()],ra.prototype,"creatorField",void 0),b([S()],ra.prototype,"creationDateField",void 0),b([S()],ra.prototype,"editorField",void 0),b([S()],ra.prototype,"editDateField",void 0),b([S()],ra.prototype,"realm",void 0),b([S({type:eu})],ra.prototype,"dateFieldsTimeReference",void 0),ra=b([B("esri.layers.support.EditFieldsInfo")],ra);const rpe=ra;let ho=class extends Kt(pe){constructor(t){super(t)}};b([S({constructOnly:!0,json:{write:!0}})],ho.prototype,"name",void 0),b([S({constructOnly:!0,json:{write:!0}})],ho.prototype,"fields",void 0),b([S({constructOnly:!0,json:{write:!0}})],ho.prototype,"isAscending",void 0),b([S({constructOnly:!0,json:{write:!0}})],ho.prototype,"indexType",void 0),b([S({constructOnly:!0,json:{write:!0}})],ho.prototype,"isUnique",void 0),b([S({constructOnly:!0,json:{write:!0}})],ho.prototype,"description",void 0),ho=b([B("esri.layers.support.FeatureIndex")],ho);var U_;let ni=U_=class extends pe{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new U_(re({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};b([S({type:Boolean,json:{write:!0}})],ni.prototype,"cacheHint",void 0),b([S({type:Pr,json:{write:!0}})],ni.prototype,"dynamicDataSource",void 0),b([S({type:String,json:{write:!0}})],ni.prototype,"gdbVersion",void 0),b([S({type:Number,json:{write:!0}})],ni.prototype,"geometryPrecision",void 0),b([S({type:Date})],ni.prototype,"historicMoment",void 0),b([Se("historicMoment")],ni.prototype,"_writeHistoricMoment",null),b([S({type:Number,json:{write:!0}})],ni.prototype,"maxAllowableOffset",void 0),b([S({type:[Number],json:{write:!0}})],ni.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],ni.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],ni.prototype,"outFields",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ni.prototype,"outSpatialReference",void 0),b([S({json:{write:!0}})],ni.prototype,"relationshipId",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],ni.prototype,"start",void 0),b([Se("start"),Se("num")],ni.prototype,"writeStart",null),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],ni.prototype,"num",void 0),b([S({json:{write:!0}})],ni.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ni.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ni.prototype,"returnZ",void 0),b([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ni.prototype,"where",void 0),ni=U_=b([B("esri.rest.support.RelationshipQuery")],ni),ni.from=yi(ni);const RS=ni,UT=Object.freeze(Object.defineProperty({__proto__:null,default:RS},Symbol.toStringTag,{value:"Module"})),B_=new ut({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function spe(e,t,i,r){const a=await du(e);if(await LS(e,t,r),!a.addAttachment)throw new se(r,"Layer source does not support addAttachment capability");return a.addAttachment(t,i)}function LS(e,t,i){const{attributes:r}=t,{objectIdField:a}=e;return e.get("capabilities.data.supportsAttachment")?t?r?a&&r[a]?Promise.resolve():Promise.reject(new se(i,`feature is missing the identifying attribute ${a}`)):Promise.reject(new se(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new se(i,"A feature is required to add/delete/update attachments")):Promise.reject(new se(i,"this layer doesn't support attachments"))}async function npe(e,t,i,r,a){const d=await du(e);if(await LS(e,t,a),!d.updateAttachment)throw new se(a,"Layer source does not support updateAttachment capability");return d.updateAttachment(t,i,r)}async function ope(e,t,i){const{applyEdits:r}=await be(()=>import("./editingSupport-954fe146.js"),[]),a=await e.load();return r(a,a.source,t,i)}async function ape(e,t,i){const{uploadAssets:r}=await be(()=>import("./editingSupport-954fe146.js"),[]),a=await e.load();return r(a,a.source,t,i)}async function lpe(e,t,i,r){const a=await du(e);if(await LS(e,t,r),!a.deleteAttachments)throw new se(r,"Layer source does not support deleteAttachments capability");return a.deleteAttachments(t,i)}async function upe(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new se(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function hpe(e,t,i,r){var j,L;t=HR.from(t),await e.load();const a=e.source,d=e.capabilities;if(!((j=d==null?void 0:d.data)!=null&&j.supportsAttachment))throw new se(r,"this layer doesn't support attachments");const{attachmentTypes:y,objectIds:m,globalIds:_,num:$,size:M,start:A,where:P}=t;if(!((L=d==null?void 0:d.operations)!=null&&L.supportsQueryAttachments)&&((y==null?void 0:y.length)>0||(_==null?void 0:_.length)>0||(M==null?void 0:M.length)>0||$||A||P))throw new se(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(m!=null&&m.length||_!=null&&_.length||P))throw new se(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!a.queryAttachments)throw new se(r,"Layer source does not support queryAttachments capability",t);return a.queryAttachments(t)}async function cpe(e,t,i,r){const a=await du(e);if(!a.queryObjectIds)throw new se(r,"Layer source does not support queryObjectIds capability");return a.queryObjectIds(sr.from(t)??e.createQuery(),i)}async function ppe(e,t,i,r){const a=await du(e);if(!a.queryFeatureCount)throw new se(r,"Layer source does not support queryFeatureCount capability");return a.queryFeatureCount(sr.from(t)??e.createQuery(),i)}async function dpe(e,t,i,r){const a=await du(e);if(!a.queryExtent)throw new se(r,"Layer source does not support queryExtent capability");return a.queryExtent(sr.from(t)??e.createQuery(),i)}async function fpe(e,t,i,r){const a=await du(e);if(!a.queryRelatedFeatures)throw new se(r,"Layer source does not support queryRelatedFeatures capability");return a.queryRelatedFeatures(RS.from(t),i)}async function ype(e,t,i,r){const a=await du(e);if(!a.queryRelatedFeaturesCount)throw new se(r,"Layer source does not support queryRelatedFeaturesCount capability");return a.queryRelatedFeaturesCount(RS.from(t),i)}async function mpe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await uoe(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function gpe(e){const t=new sr,i=e.get("capabilities.data"),r=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:a,timeExtent:d}=e;return t.timeExtent=a!=null&&d!=null?d.offset(-a.value,a.unit):d||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function uL(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function hL(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function vpe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function du(e){return(await e.load()).source}async function bpe(e,t){if(!pt||pt.findCredential(e))return;let i;try{const r=await oM(e,t);r&&(i=await pt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await pt.getCredential(e,{signal:r})}catch{}}async function wpe(e,t){var r;const i=(r=e.parsedUrl)==null?void 0:r.path;i&&_pe(e)&&await bpe(i,t)}function _pe(e){const t=e.editFieldsInfo;return!(!(t!=null&&t.creatorField)&&!(t!=null&&t.editorField))||(e.userHasUpdateItemPrivileges?e.hasUpdateItemRestrictions:!!e.userHasFullEditingPrivileges&&e.hasFullEditingRestrictions)}function Spe(e){var t;return!((t=e.sourceJSON)!=null&&t.isMultiServicesView)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const bw=Gp({types:iO});function DS(e,t){if(e.defaultSymbol)return e.types&&e.types.length?new SS({defaultSymbol:bw(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:bw(i.symbol,i,t)}))}):new x2({symbol:bw(e.defaultSymbol,e,t)})}let Zc=class extends Kt(pe){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};b([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Zc.prototype,"shapeAreaField",void 0),b([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Zc.prototype,"shapeLengthField",void 0),b([S({type:String,json:{read:e=>Bz.read(e)||Hz.read(e)}})],Zc.prototype,"units",void 0),Zc=b([B("esri.layers.support.GeometryFieldsInfo")],Zc);const xpe=Zc,BT=new ut({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),HT=new ut({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let As=class extends Kt(pe){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};b([S({json:{read:BT.read,write:BT.write}})],As.prototype,"cardinality",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"composite",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"id",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"keyField",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"keyFieldInRelationshipTable",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"name",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"relatedTableId",void 0),b([S({json:{read:!0,write:!0}})],As.prototype,"relationshipTableId",void 0),b([S({json:{read:HT.read,write:HT.write}})],As.prototype,"role",void 0),As=b([B("esri.layers.support.Relationship")],As);const $pe=As,Tpe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=Xe.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(Le.ofType(ho)),this.version=void 0}readCapabilitiesFromService(i,r){return NS(r,this.url)}get effectiveCapabilities(){var y;const i=this.capabilities;if(!i)return null;const r=re(i),{operations:a,editing:d}=r;return(y=this.sourceJSON)!=null&&y.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(a.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(a.supportsAdd=a.supportsDelete=a.supportsEditing=a.supportsQuery=a.supportsUpdate=d.supportsDeleteByOthers=d.supportsGeometryUpdate=d.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&a.supportsEditing&&(a.supportsAdd=a.supportsDelete=a.supportsUpdate=d.supportsGeometryUpdate=!0),r)}get hasFullEditingRestrictions(){var d;const i=this.capabilities;if(!i||(d=this.sourceJSON)!=null&&d.isMultiServicesView)return!1;const{operations:r,editing:a}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&a.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var d;const i=this.capabilities;if(!i)return!1;const{operations:r,editing:a}=i;return(d=this.sourceJSON)!=null&&d.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&a.supportsDeleteByOthers&&a.supportsGeometryUpdate&&a.supportsUpdateByOthers)}readEditingInfo(i,r){const{editingInfo:a}=r;return a?{lastEditDate:a.lastEditDate!=null?new Date(a.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return uL(r)}readObjectIdFieldFromService(i,r){return hL(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=iQ({layer:this,url:i,nonStandardUrlAllowed:!0,logger:fe.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,a,d){rQ(this,i,null,r,d)}readVersion(i,r){return vpe(r)}};return b([S({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),b([me("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),b([S({readOnly:!0})],t.prototype,"effectiveCapabilities",null),b([S({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),b([S({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),b([S({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),b([S({type:eu})],t.prototype,"dateFieldsTimeReference",void 0),b([S({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),b([S({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),b([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),b([S({readOnly:!0,type:rpe})],t.prototype,"editFieldsInfo",void 0),b([S({readOnly:!0})],t.prototype,"editingInfo",void 0),b([me("editingInfo")],t.prototype,"readEditingInfo",null),b([S((()=>{const i=re($ae),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),b([S({type:UR,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],t.prototype,"floorInfo",void 0),b([S({type:gt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),b([S()],t.prototype,"gdbVersion",void 0),b([S({readOnly:!0,type:xpe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),b([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:B_.read}}}})],t.prototype,"geometryType",void 0),b([S({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),b([S({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),b([S({readOnly:!0,type:a2})],t.prototype,"heightModelInfo",void 0),b([S({type:Date})],t.prototype,"historicMoment",void 0),b([S({readOnly:!0})],t.prototype,"isTable",void 0),b([me("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),b([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),b([S(Eae)],t.prototype,"minScale",void 0),b([me("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),b([S(Mae)],t.prototype,"maxScale",void 0),b([me("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),b([S({type:String})],t.prototype,"globalIdField",void 0),b([me("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),b([S({type:String})],t.prototype,"objectIdField",void 0),b([me("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),b([S({type:eu})],t.prototype,"preferredTimeReference",void 0),b([S({type:[$pe],readOnly:!0})],t.prototype,"relationships",void 0),b([S()],t.prototype,"sourceJSON",void 0),b([S({type:Boolean})],t.prototype,"returnM",void 0),b([S({type:Boolean})],t.prototype,"returnZ",void 0),b([S({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),b([me("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),b([S({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),b([S({type:Xe,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),b([S({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),b([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),b([S({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),b([S({type:Le.ofType(ho),readOnly:!0})],t.prototype,"indexes",void 0),b([S(cj)],t.prototype,"url",null),b([Se("url")],t.prototype,"writeUrl",null),b([S({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),b([me("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=b([B("esri.layers.mixins.FeatureLayerBase")],t),t};let Xc=class extends Kt(pe){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};b([S({type:String,json:{write:!0}})],Xc.prototype,"expression",void 0),b([S({type:String,json:{write:!0}})],Xc.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],Xc.prototype,"returnType",void 0),Xc=b([B("esri.layers.support.ExpressionInfo")],Xc);const FS=Xc;var H_;let sa=H_=class extends pe{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new H_({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:re(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};b([S({type:Boolean,json:{write:!0}})],sa.prototype,"isAutoGenerated",void 0),b([S({type:String,json:{write:!0}})],sa.prototype,"name",void 0),b([S({type:String,json:{write:!0}})],sa.prototype,"alias",void 0),b([S({type:String,json:{write:!0}})],sa.prototype,"onStatisticField",void 0),b([S({type:FS,json:{write:!0}})],sa.prototype,"onStatisticExpression",void 0),b([S({type:String,json:{write:!0}})],sa.prototype,"statisticType",void 0),sa=H_=b([B("esri.layers.support.AggregateField")],sa);const Jh=sa;let Wl=class extends pe{constructor(){super(...arguments),this.type=null}};b([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Wl.prototype,"type",void 0),Wl=b([B("esri.layers.support.FeatureReduction")],Wl);var W_;const Ipe="esri.layers.support.FeatureReductionBinning";let kr=W_=class extends Wl{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());_r(i,r,t)}readRenderer(e,t,i){var a;const r=(a=t.drawingInfo)==null?void 0:a.renderer;return r?Df(r,t,i)??void 0:DS(t,i)}clone(){return new W_({fields:re(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:re(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:re(this.popupTemplate),renderer:re(this.renderer)})}};b([je({binning:"binning"})],kr.prototype,"type",void 0),b([je({geohash:"geohash"})],kr.prototype,"binType",void 0),b([S({type:Number,range:{min:1,max:9},json:{write:!0}})],kr.prototype,"fixedBinLevel",void 0),b([S({type:[v1],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],kr.prototype,"labelingInfo",void 0),b([S(uS)],kr.prototype,"labelsVisible",void 0),b([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],kr.prototype,"maxScale",void 0),b([S(g2)],kr.prototype,"popupEnabled",void 0),b([S({type:Yp,json:{name:"popupInfo",write:!0}})],kr.prototype,"popupTemplate",void 0),b([S({type:[Jh],json:{write:!0}})],kr.prototype,"fields",void 0),b([Se("fields")],kr.prototype,"writeFields",null),b([S({types:y1,json:{write:{target:"drawingInfo.renderer"}}})],kr.prototype,"renderer",void 0),b([me("renderer",["drawingInfo.renderer"])],kr.prototype,"readRenderer",null),kr=W_=b([B(Ipe)],kr);const cL=kr;var J_;const Epe="esri.layers.support.FeatureReductionCluster";function WT(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let ki=J_=class extends pe{constructor(e){super(e),this.type="cluster",this.clusterRadius=mt("80px"),this.clusterMinSize=mt("12px"),this.clusterMaxSize=mt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){var a,d;const r=(a=t.drawingInfo)==null?void 0:a.renderer;return(d=r==null?void 0:r.authoringInfo)!=null&&d.isAutoGenerated?null:r?WT(r)?null:Df(r,t,i)??void 0:DS(t,i)}readSymbol(e,t,i){var a,d;const r=(a=t.drawingInfo)==null?void 0:a.renderer;if((d=r==null?void 0:r.authoringInfo)!=null&&d.isAutoGenerated)return null;if(r&&WT(r)){const y=Df(r,t,i);return y==null?void 0:y.symbol}return null}writeSymbol(e,t,i,r){var d,y;const a=(y=(d=this.renderer)==null?void 0:d.authoringInfo)==null?void 0:y.isAutoGenerated;if(!this.renderer||a){const m=new x2({symbol:e});t.drawingInfo={renderer:m.write({},r)}}}writeFields(e,t,i){const r=e.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());_r(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>Jh.fromJSON(r))}clone(){return new J_({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:re(this.labelingInfo),labelsVisible:this.labelsVisible,fields:re(this.fields),maxScale:this.maxScale,renderer:re(this.renderer),symbol:re(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:re(this.popupTemplate)})}};b([S({type:["cluster"],readOnly:!0,json:{write:!0}})],ki.prototype,"type",void 0),b([S({type:Number,cast:e=>e==="auto"?e:mt(e),json:{write:!0}})],ki.prototype,"clusterRadius",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],ki.prototype,"clusterMinSize",void 0),b([S({type:Number,cast:mt,json:{write:!0}})],ki.prototype,"clusterMaxSize",void 0),b([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ki.prototype,"maxScale",void 0),b([S(g2)],ki.prototype,"popupEnabled",void 0),b([S({type:Yp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ki.prototype,"popupTemplate",void 0),b([S({types:y1,json:{write:{target:"drawingInfo.renderer"}}})],ki.prototype,"renderer",void 0),b([me("renderer",["drawingInfo.renderer"])],ki.prototype,"readRenderer",null),b([S({types:CJ})],ki.prototype,"symbol",void 0),b([me("symbol",["drawingInfo.renderer"])],ki.prototype,"readSymbol",null),b([Se("symbol")],ki.prototype,"writeSymbol",null),b([S({type:[v1],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ki.prototype,"labelingInfo",void 0),b([S(uS)],ki.prototype,"labelsVisible",void 0),b([S({type:[Jh],json:{write:!0}})],ki.prototype,"fields",void 0),b([Se("fields")],ki.prototype,"writeFields",null),b([me("fields")],ki.prototype,"readFields",null),ki=J_=b([B(Epe)],ki);const pL=ki;var K_;let Km=K_=class extends Wl{constructor(e){super(e),this.type="selection"}clone(){return new K_}};b([S({type:["selection"]})],Km.prototype,"type",void 0),Km=K_=b([B("esri.layers.support.FeatureReductionSelection")],Km);const JT=Km,KT={key:"type",base:Wl,typeMap:{cluster:pL,binning:cL}},Mpe={types:{key:"type",base:Wl,typeMap:{selection:JT,cluster:pL,binning:cL}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:KT},"portal-item":{types:KT},"web-scene":{types:{key:"type",base:Wl,typeMap:{selection:JT}}}}}},vc={Base64:0,Hex:1,String:2,Raw:3},_p=8,dL=(1<<_p)-1;function Ul(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function Ape(e){const t=[];for(let i=0,r=e.length*_p;i<r;i+=_p)t[i>>5]|=(e.charCodeAt(i/_p)&dL)<<i%32;return t}function kpe(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=_p)t.push(String.fromCharCode(e[i>>5]>>>i%32&dL));return t.join("")}function Ope(e){const t="0123456789abcdef",i=[];for(let r=0,a=4*e.length;r<a;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function Ppe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let a=0,d=4*e.length;a<d;a+=3){const y=(e[a>>2]>>a%4*8&255)<<16|(e[a+1>>2]>>(a+1)%4*8&255)<<8|e[a+2>>2]>>(a+2)%4*8&255;for(let m=0;m<4;m++)8*a+6*m>32*e.length?r.push(t):r.push(i.charAt(y>>6*(3-m)&63))}return r.join("")}function Cpe(e,t){return e<<t|e>>>32-t}function I2(e,t,i,r,a,d){return Ul(Cpe(Ul(Ul(t,e),Ul(r,d)),a),i)}function ur(e,t,i,r,a,d,y){return I2(t&i|~t&r,e,t,a,d,y)}function hr(e,t,i,r,a,d,y){return I2(t&r|i&~r,e,t,a,d,y)}function cr(e,t,i,r,a,d,y){return I2(t^i^r,e,t,a,d,y)}function pr(e,t,i,r,a,d,y){return I2(i^(t|~r),e,t,a,d,y)}function Npe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,a=-1732584194,d=271733878;for(let y=0;y<e.length;y+=16){const m=i,_=r,$=a,M=d;i=ur(i,r,a,d,e[y],7,-680876936),d=ur(d,i,r,a,e[y+1],12,-389564586),a=ur(a,d,i,r,e[y+2],17,606105819),r=ur(r,a,d,i,e[y+3],22,-1044525330),i=ur(i,r,a,d,e[y+4],7,-176418897),d=ur(d,i,r,a,e[y+5],12,1200080426),a=ur(a,d,i,r,e[y+6],17,-1473231341),r=ur(r,a,d,i,e[y+7],22,-45705983),i=ur(i,r,a,d,e[y+8],7,1770035416),d=ur(d,i,r,a,e[y+9],12,-1958414417),a=ur(a,d,i,r,e[y+10],17,-42063),r=ur(r,a,d,i,e[y+11],22,-1990404162),i=ur(i,r,a,d,e[y+12],7,1804603682),d=ur(d,i,r,a,e[y+13],12,-40341101),a=ur(a,d,i,r,e[y+14],17,-1502002290),r=ur(r,a,d,i,e[y+15],22,1236535329),i=hr(i,r,a,d,e[y+1],5,-165796510),d=hr(d,i,r,a,e[y+6],9,-1069501632),a=hr(a,d,i,r,e[y+11],14,643717713),r=hr(r,a,d,i,e[y],20,-373897302),i=hr(i,r,a,d,e[y+5],5,-701558691),d=hr(d,i,r,a,e[y+10],9,38016083),a=hr(a,d,i,r,e[y+15],14,-660478335),r=hr(r,a,d,i,e[y+4],20,-405537848),i=hr(i,r,a,d,e[y+9],5,568446438),d=hr(d,i,r,a,e[y+14],9,-1019803690),a=hr(a,d,i,r,e[y+3],14,-187363961),r=hr(r,a,d,i,e[y+8],20,1163531501),i=hr(i,r,a,d,e[y+13],5,-1444681467),d=hr(d,i,r,a,e[y+2],9,-51403784),a=hr(a,d,i,r,e[y+7],14,1735328473),r=hr(r,a,d,i,e[y+12],20,-1926607734),i=cr(i,r,a,d,e[y+5],4,-378558),d=cr(d,i,r,a,e[y+8],11,-2022574463),a=cr(a,d,i,r,e[y+11],16,1839030562),r=cr(r,a,d,i,e[y+14],23,-35309556),i=cr(i,r,a,d,e[y+1],4,-1530992060),d=cr(d,i,r,a,e[y+4],11,1272893353),a=cr(a,d,i,r,e[y+7],16,-155497632),r=cr(r,a,d,i,e[y+10],23,-1094730640),i=cr(i,r,a,d,e[y+13],4,681279174),d=cr(d,i,r,a,e[y],11,-358537222),a=cr(a,d,i,r,e[y+3],16,-722521979),r=cr(r,a,d,i,e[y+6],23,76029189),i=cr(i,r,a,d,e[y+9],4,-640364487),d=cr(d,i,r,a,e[y+12],11,-421815835),a=cr(a,d,i,r,e[y+15],16,530742520),r=cr(r,a,d,i,e[y+2],23,-995338651),i=pr(i,r,a,d,e[y],6,-198630844),d=pr(d,i,r,a,e[y+7],10,1126891415),a=pr(a,d,i,r,e[y+14],15,-1416354905),r=pr(r,a,d,i,e[y+5],21,-57434055),i=pr(i,r,a,d,e[y+12],6,1700485571),d=pr(d,i,r,a,e[y+3],10,-1894986606),a=pr(a,d,i,r,e[y+10],15,-1051523),r=pr(r,a,d,i,e[y+1],21,-2054922799),i=pr(i,r,a,d,e[y+8],6,1873313359),d=pr(d,i,r,a,e[y+15],10,-30611744),a=pr(a,d,i,r,e[y+6],15,-1560198380),r=pr(r,a,d,i,e[y+13],21,1309151649),i=pr(i,r,a,d,e[y+4],6,-145523070),d=pr(d,i,r,a,e[y+11],10,-1120210379),a=pr(a,d,i,r,e[y+2],15,718787259),r=pr(r,a,d,i,e[y+9],21,-343485551),i=Ul(i,m),r=Ul(r,_),a=Ul(a,$),d=Ul(d,M)}return[i,r,a,d]}function fL(e,t=vc.Hex){const i=t||vc.Base64,r=Npe(Ape(e),e.length*_p);switch(i){case vc.Raw:return r;case vc.Hex:return Ope(r);case vc.String:return kpe(r);case vc.Base64:return Ppe(r)}}var Y_;let Pd=Y_=class extends _2{writeLevels(e,t,i){for(const r in e){const a=this.levels[r];return void(t.stops=a)}}clone(){return new Y_({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ql(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ql(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:re(this.levels)})}};b([S()],Pd.prototype,"levels",void 0),b([Se("levels")],Pd.prototype,"writeLevels",null),Pd=Y_=b([B("esri.views.2d.engine.LevelDependentSizeVariable")],Pd);const jpe=fe.getLogger("esri.views.2d.layers.support.clusterUtils");le.add("esri-cluster-arcade-enabled",!0);const Rpe=le("esri-cluster-arcade-enabled"),Lpe=(e,t,i,r,a)=>{const d=t.clone();if(!Fpe(d))return d;if(d.authoringInfo||(d.authoringInfo=new gS),d.authoringInfo.isAutoGenerated=!0,"visualVariables"in d){const y=(d.visualVariables||[]).filter(_=>_.valueExpression!=="$view.scale"),m=yL(y);y.forEach(_=>{_.type==="rotation"?_.field?_.field=$u(e,_.field,"avg_angle","number"):_.valueExpression&&(_.field=C0(e,_.valueExpression,"avg_angle","number"),_.valueExpression=null):_.normalizationField?(_.field=$u(e,_.field,"avg_norm","number",_.normalizationField),_.normalizationField=null):_.field?_.field=$u(e,_.field,"avg","number"):_.valueExpression&&(_.field=C0(e,_.valueExpression,"avg","number"),_.valueExpression=null)}),m==null&&!Dpe(y)&&a&&(y.push(mL(i,r)),d.dynamicClusterSize=!0),d.visualVariables=y}switch(d.type){case"simple":break;case"pie-chart":for(const y of d.attributes)y.field?y.field=$u(e,y.field,"sum","number"):y.valueExpression&&(y.field=C0(e,y.valueExpression,"sum","number"),y.valueExpression=null);break;case"unique-value":d.field?d.field=$u(e,d.field,"mode","string"):d.valueExpression&&(d.field=C0(e,d.valueExpression,"mode","string"),d.valueExpression=null);break;case"class-breaks":d.normalizationField?(d.field=$u(e,d.field,"avg_norm","number",d.normalizationField),d.normalizationField=null):d.field?d.field=$u(e,d.field,"avg","number"):d.valueExpression&&(d.field=C0(e,d.valueExpression,"avg","number"),d.valueExpression=null)}return d},yL=e=>{for(const t of e)if(t.type==="size")return t;return null};function r2e(e,t,i){const r=e.clone();let a=!1;if("visualVariables"in r){const d=(r.visualVariables||[]).filter(y=>y.valueExpression!=="$view.scale");yL(d)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(mL(t,i)),r.dynamicClusterSize=!0,a=!0)}return{renderer:r,didInject:a}}const Dpe=e=>{for(const t of e)if(t.field==="cluster_count")return!0;return!1},mL=(e,t)=>{const i=[new Uc({value:0,size:0}),new Uc({value:1})];if(t==null)return new _2({field:"cluster_count",stops:[...i,new Uc({value:2,size:0})]});const r=Object.keys(t).reduce((a,d)=>({...a,[d]:[...i,new Uc({value:Math.max(2,t[d].minValue),size:e.clusterMinSize}),new Uc({value:Math.max(3,t[d].maxValue),size:e.clusterMaxSize})]}),{});return new Pd({field:"cluster_count",levels:r})},Fpe=e=>{const t=i=>jpe.error(new se("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!Rpe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function zpe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,a="field",d=t.toLowerCase()+",norm:"+a+","+r.toLowerCase();return"cluster_avg_"+fL(d)}}}function C0(e,t,i,r){const a=fL(t),d=i==="mode"?`cluster_type_${a}`:i==="sum"?`cluster_sum_${a}`:`cluster_avg_${a}`;return e.some(y=>y.name===d)||e.push(new Jh({name:d,isAutoGenerated:!0,onStatisticExpression:new FS({expression:t,returnType:r}),statisticType:i})),d}function $u(e,t,i,r,a){if(t==="cluster_count"||e.some(y=>y.name===t))return t;const d=zpe(i,t,a);return e.some(y=>y.name===d)||(i==="avg_norm"?e.push(new Jh({name:d,isAutoGenerated:!0,onStatisticExpression:new FS({expression:`$feature.${t} / $feature.${a}`,returnType:r}),statisticType:"avg"})):e.push(new Jh({name:d,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),d}const Vpe=e=>{let t=class extends e{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var m;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),a=[new Jh({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],d=(r.fields??[]).filter(_=>!_.isAutoGenerated);if(i.renderer&&!((m=i.renderer.authoringInfo)!=null&&m.isAutoGenerated))return r.fields=[...a,...d],r;if(i.symbol)return r.fields=[...a,...d],r.renderer=null,r;if(!this.renderer)return i;const y=Lpe(a,this.renderer,i,null,!1);return r.fields=[...a,...d],r.renderer=y,r}};return b([S(Mpe)],t.prototype,"featureReduction",null),t=b([B("esri.layers.mixins.FeatureReductionLayer")],t),t};var Z_;const ww=new ut({asc:"ascending",desc:"descending"});let Qc=Z_=class extends pe{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Z_({field:this.field,valueExpression:this.valueExpression,order:this.order})}};b([S({type:String,json:{write:!0}})],Qc.prototype,"field",void 0),b([S({type:String,json:{write:!0}})],Qc.prototype,"valueExpression",void 0),b([S({type:ww.apiValues,json:{read:ww.read,write:ww.write}})],Qc.prototype,"order",void 0),Qc=Z_=b([B("esri.layers.support.OrderByInfo")],Qc);const gL=Qc;function Gpe(e,t,i){if(!e)return null;const r=e.find(d=>!!d.field);if(!r)return null;const a=new gL;return a.read(r,i),[a]}function qpe(e,t,i,r){const a=e.find(d=>!!d.field);a&&_r(i,[a.toJSON()],t)}const Upe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return b([S({type:[gL],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Gpe},write:{target:"layerDefinition.orderBy",writer:qpe}}})],t.prototype,"orderBy",void 0),t=b([B("esri.layers.mixins.OrderedLayer")],t),t};let Cd=class extends De{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};b([S()],Cd.prototype,"updating",void 0),b([S()],Cd.prototype,"status",void 0),Cd=b([B("esri.layers.support.PublishingInfo")],Cd);const Bpe=Cd,vL="esri.layers.mixins.PublishableLayer",Hpe=Symbol(vL),Wpe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const a=new Bpe;return this._checkPublishingStatus(a),a}_checkPublishingStatus(r){let y=0;const m=async $=>{let M;r.updating=!0;try{M=await this.fetchPublishingStatus()}catch{M="unavailable"}M!=="published"&&M!=="unavailable"||(r.status==="publishing"&&this.refresh(),_.remove()),r.status=M,r.updating=!1,_.removed||(y=setTimeout(m,$,$+125))},_={removed:!1,remove(){this.removed=!0,clearTimeout(y)}};this.when().catch(()=>_.remove()),m(250),this.own(_)}};return t=Hpe,b([S({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=b([B(vL)],i),i};function Jpe(){return{fields:{type:[d2],value:null},fieldsIndex:{readOnly:!0,get(){return new bS(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||fe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return Z4(this.fieldsIndex,e)}}}}async function Kpe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const a=await Nv(r.populateFromStyle());if(Jt(i),a.ok===!1){const d=a.error;t&&t.messages&&t.messages.push(new Gs("renderer:style-reference",`Failed to create unique value renderer from style reference: ${d.message}`,{error:d,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}var X_;let ep=X_=class extends pe{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new X_({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};b([S({type:[String],json:{write:!0}})],ep.prototype,"groupByFields",void 0),b([S({type:Number,json:{write:!0}})],ep.prototype,"topCount",void 0),b([S({type:[String],json:{write:!0}})],ep.prototype,"orderByFields",void 0),ep=X_=b([B("esri.rest.support.TopFilter")],ep);const Ype=ep;var Q_;const YT=new ut({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),ZT=new ut({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Xt=Q_=class extends pe{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Q_(re({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};b([S({type:Boolean,json:{write:!0}})],Xt.prototype,"cacheHint",void 0),b([S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Xt.prototype,"distance",void 0),b([S({types:nu,json:{read:_a,write:!0}})],Xt.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],Xt.prototype,"geometryPrecision",void 0),b([S({type:Number,json:{write:!0}})],Xt.prototype,"maxAllowableOffset",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Xt.prototype,"num",void 0),b([S({json:{write:!0}})],Xt.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],Xt.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],Xt.prototype,"outFields",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Xt.prototype,"outSpatialReference",void 0),b([S({type:String,json:{write:!0}})],Xt.prototype,"resultType",void 0),b([S({json:{write:!0}})],Xt.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xt.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xt.prototype,"returnZ",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Xt.prototype,"start",void 0),b([Se("start"),Se("num")],Xt.prototype,"writeStart",null),b([S({type:String,json:{read:{source:"spatialRel",reader:YT.read},write:{target:"spatialRel",writer:YT.write}}})],Xt.prototype,"spatialRelationship",void 0),b([S({type:Ws,json:{write:!0}})],Xt.prototype,"timeExtent",void 0),b([S({type:Ype,json:{write:!0}})],Xt.prototype,"topFilter",void 0),b([S({type:String,json:{read:ZT.read,write:{writer:ZT.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],Xt.prototype,"units",void 0),b([S({type:String,json:{write:!0}})],Xt.prototype,"where",void 0),Xt=Q_=b([B("esri.rest.support.TopFeaturesQuery")],Xt),Xt.from=yi(Xt);const Py=Xt,Tr="FeatureLayer",bL="esri.layers.FeatureLayer",Zpe=fe.getLogger(bL);function Cy(e,t){return new se("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function XT(e){return e&&e instanceof Le}const _w=Jpe();function Sw(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ce=class extends Tpe(Vpe(ipe(Wpe(Qce(kj(Upe(ZR(Lj(Rj(mj(Pj(Cj(m2(Oj(hj(Kt(K4))))))))))))))))){constructor(...e){super(...e),this._handles=new Mo,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Xe.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Wt(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var r;const t=e!=null?e.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(a=>this.initLayerProperties(a))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Ps).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const a=await this._fetchFirstLayerId(t);a!=null&&(this.layerId=a)}if(!this.url&&!this._hasMemorySource())throw new se("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>wpe(this,e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,NS(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return Spe(this)}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&_r(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return uL(t.layerDefinition||t)}readObjectIdField(e,t){return hL(t.layerDefinition||t)}get parsedUrl(){const e=Qi(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=wa(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=wa(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Ux(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var a;t=t.layerDefinition||t;const r=(a=t.drawingInfo)==null?void 0:a.renderer;if(r){const d=Df(r,t,i)??void 0;return d||Zpe.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),d}return DS(t,i)}set source(e){const t=this._get("source");t!==e&&(XT(t)&&this._resetMemorySource(t),XT(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Le?new na({layer:this,items:e}):e:null}readSource(e,t){const i=g1.fromJSON(t.featureSet);return new na({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,a=i&&i.editorField;return e=e&&e.map(d=>AS.fromJSON(d)),this._fixTemplates(e,r),this._fixTemplates(e,a),e}readTitle(e,t){var a;const i=((a=t.layerDefinition)==null?void 0:a.name)??t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const d=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?eQ(this.url,i):i;let y=i;if(!y&&this.url){const m=ic(this.url);m!=null&&(y=m.title)}return y?(this.sublayerTitleMode==="item-title-and-service-name"&&d&&d!==y&&(y=d+" - "+y),L6(y)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(a=>a.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,a=i&&i.editorField;return e&&e.map(d=>(d=kS.fromJSON(d),this._fixTemplates(d.templates,r),this._fixTemplates(d.templates,a),d))}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return spe(this,e,t,Tr)}async updateAttachment(e,t,i){return npe(this,e,t,i,Tr)}async applyEdits(e,t){return ope(this,e,t)}async uploadAssets(e,t){return ape(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return WR(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await Lo(be(()=>import("./FeatureLayerSource-38637d4e.js"),["assets/FeatureLayerSource-38637d4e.js","assets/mat4f64-1413b4a7.js","assets/MeshGeoreferencedRelativeVertexSpace-2f6407fc.js","assets/vec32-6396a3a3.js","assets/External-98227502.js","assets/editingSupport-954fe146.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=gpe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=f2(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return lpe(this,e,t,Tr)}async fetchRecomputedExtents(e){return upe(this,e,Tr)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let a=null;return i==null||i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===r.toString()&&(a=d),!!a)}),a}getFieldDomain(e,t){const i=t==null?void 0:t.feature,r=this.getFeatureType(i);if(r){const a=r.domains&&r.domains[e];if(a&&a.type!=="inherited")return a}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return hpe(this,e,t,Tr)}async queryFeatures(e,t){const i=await this.load(),r=await i.source.queryFeatures(sr.from(e)??i.createQuery(),t);if(r!=null&&r.features)for(const a of r.features)a.layer=a.sourceLayer=i;return r}async queryObjectIds(e,t){return cpe(this,e,t,Tr)}async queryFeatureCount(e,t){return ppe(this,e,t,Tr)}async queryExtent(e,t){return dpe(this,e,t,Tr)}async queryRelatedFeatures(e,t){return fpe(this,e,t,Tr)}async queryRelatedFeaturesCount(e,t){return ype(this,e,t,Tr)}async queryTopFeatures(e,t){var d;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((d=r==null?void 0:r.query)!=null&&d.supportsTopFeaturesQuery))throw new se(Tr,"Layer source does not support queryTopFeatures capability");const a=await i.queryTopFeatures(Py.from(e),t);if(a!=null&&a.features)for(const y of a.features)y.layer=y.sourceLayer=this;return a}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new se(Tr,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(Py.from(e),t)}async queryTopFeaturesExtent(e,t){var a;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((a=r==null?void 0:r.query)!=null&&a.supportsTopFeaturesQuery))throw new se(Tr,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(Py.from(e),t)}async queryTopFeatureCount(e,t){var a;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((a=r==null?void 0:r.query)!=null&&a.supportsTopFeaturesQuery))throw new se(Tr,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(Py.from(e),t)}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:a}=t;if(this.dynamicDataSource)return a==null||a.push(Cy(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return a==null||a.push(Cy(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return a==null||a.push(Cy(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return a==null||a.push(Cy(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new se(Tr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||XR(this,e))}async save(e){const{save:t}=await be(()=>import("./featureLayerUtils-5df4b97e.js"),["assets/featureLayerUtils-5df4b97e.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-50ce87f2.js","assets/jsonContext-4430ffa2.js"]);return t(this,e)}async saveAs(e,t){const{saveAs:i}=await be(()=>import("./featureLayerUtils-5df4b97e.js"),["assets/featureLayerUtils-5df4b97e.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-50ce87f2.js","assets/jsonContext-4430ffa2.js"]);return i(this,e,t)}_readEditingEnabled(e,t,i){var a;let r=(a=e.layerDefinition)==null?void 0:a.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var a,d;if(!e){const y=(d=(a=this.capabilities)==null?void 0:a.operations)!=null&&d.supportsSync?"Query,Sync":"Query";_r("layerDefinition.capabilities",y,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=y)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Vt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Ux(this.renderer,this.fieldsIndex),rA(this.timeInfo,this.fieldsIndex),Kpe(this,{origin:"service"})}async hasDataChanged(){return mpe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new se("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new se("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};b([me("service","capabilities")],Ce.prototype,"readCapabilities",null),b([S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ce.prototype,"charts",void 0),b([S({readOnly:!0})],Ce.prototype,"createQueryVersion",null),b([S({json:{read:{source:"layerDefinition.copyrightText"}}})],Ce.prototype,"copyright",void 0),b([S({json:{read:{source:"layerDefinition.displayField"}}})],Ce.prototype,"displayField",void 0),b([S({types:Eh,readOnly:!0})],Ce.prototype,"defaultSymbol",void 0),b([S({type:Pr})],Ce.prototype,"dynamicDataSource",void 0),b([S({type:Boolean})],Ce.prototype,"editingEnabled",null),b([me(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ce.prototype,"readEditingEnabled",null),b([me("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ce.prototype,"readEditingEnabledFromWebMap",null),b([Se(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ce.prototype,"writeEditingEnabled",null),b([Se("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ce.prototype,"writeEditingEnabledToWebMap",null),b([S({readOnly:!0})],Ce.prototype,"effectiveEditingEnabled",null),b([S({..._w.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Sw}}}}})],Ce.prototype,"fields",void 0),b([S(_w.fieldsIndex)],Ce.prototype,"fieldsIndex",void 0),b([S({type:Kce,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ce.prototype,"formTemplate",void 0),b([S({json:{read:{source:"layerDefinition.extent"}}})],Ce.prototype,"fullExtent",void 0),b([S({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Sw,writer(e,t,i){const r=e?B_.toJSON(e):null;r&&_r(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:B_.read}}})],Ce.prototype,"geometryType",void 0),b([S({json:{read:{source:"layerDefinition.hasM"}}})],Ce.prototype,"hasM",void 0),b([S({json:{read:{source:"layerDefinition.hasZ"}}})],Ce.prototype,"hasZ",void 0),b([S(dj)],Ce.prototype,"id",void 0),b([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ce.prototype,"infoFor3D",void 0),b([S({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ce.prototype,"isTable",void 0),b([me("service","isTable",["type","geometryType"]),me("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ce.prototype,"readIsTable",null),b([Se("web-map","isTable")],Ce.prototype,"writeIsTable",null),b([S(uS)],Ce.prototype,"labelsVisible",void 0),b([S({type:[v1],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:AT},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:AT},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ce.prototype,"labelingInfo",void 0),b([S((()=>{const e=re(Tae);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){_r(r,Gv(t),i)}}},e})())],Ce.prototype,"opacity",void 0),b([S(xae)],Ce.prototype,"legendEnabled",void 0),b([S({type:["show","hide"],json:(()=>{const e=re(fj.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ce.prototype,"listMode",void 0),b([me("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ce.prototype,"readGlobalIdField",null),b([S({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Sw}}}}})],Ce.prototype,"objectIdField",void 0),b([me("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ce.prototype,"readObjectIdField",null),b([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ce.prototype,"operationalLayerType",void 0),b([S(_w.outFields)],Ce.prototype,"outFields",void 0),b([S({readOnly:!0})],Ce.prototype,"parsedUrl",null),b([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ce.prototype,"path",void 0),b([S(g2)],Ce.prototype,"popupEnabled",void 0),b([S({type:Yp,json:{name:"popupInfo",write:!0}})],Ce.prototype,"popupTemplate",void 0),b([S({readOnly:!0})],Ce.prototype,"defaultPopupTemplate",null),b([S({types:y1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:dR,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ce.prototype,"renderer",null),b([me("service","renderer",["drawingInfo.renderer","defaultSymbol"]),me("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ce.prototype,"readRenderer",null),b([S((()=>{const e=re(Sae);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ce.prototype,"screenSizePerspectiveEnabled",void 0),b([S({clonable:!1})],Ce.prototype,"source",null),b([Tt("source")],Ce.prototype,"castSource",null),b([me("portal-item","source",["featureSet"]),me("web-map","source",["featureSet"])],Ce.prototype,"readSource",null),b([S({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ce.prototype,"spatialReference",void 0),b([S({type:Number})],Ce.prototype,"subtypeCode",void 0),b([S({type:[AS]})],Ce.prototype,"templates",void 0),b([me("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ce.prototype,"readTemplates",null),b([S({type:YR})],Ce.prototype,"timeInfo",void 0),b([S()],Ce.prototype,"title",void 0),b([me("service","title",["name"]),me("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ce.prototype,"readTitle",null),b([me("web-map","title",["layerDefinition.name","title"])],Ce.prototype,"readTitleFromWebMap",null),b([S({type:String})],Ce.prototype,"sublayerTitleMode",void 0),b([S({json:{read:!1}})],Ce.prototype,"type",void 0),b([S({type:String})],Ce.prototype,"typeIdField",void 0),b([me("service","typeIdField"),me("typeIdField",["layerDefinition.typeIdField"])],Ce.prototype,"readTypeIdField",null),b([S({type:[kS]})],Ce.prototype,"types",void 0),b([me("service","types",["types"]),me("types",["layerDefinition.types"])],Ce.prototype,"readTypes",null),b([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ce.prototype,"visible",void 0),b([me("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ce.prototype,"readVisible",null),Ce=b([B(bL)],Ce);const wL=Ce,Xpe=Object.freeze(Object.defineProperty({__proto__:null,default:wL},Symbol.toStringTag,{value:"Module"}));let co=class extends Rn{constructor(t){super(t),this.type="csv",this.refresh=a4(async i=>{await this.load();const{extent:r,timeExtent:a}=await this._connection.invoke("refresh",i);return r&&(this.sourceJSON.extent=r),a&&(this.sourceJSON.timeInfo.timeExtent=[a.start,a.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return g1.fromJSON(r)}async queryFeaturesJSON(t,i={}){return await this.load(i),this._connection.invoke("queryFeatures",t?t.toJSON():null,i)}async queryFeatureCount(t,i={}){return await this.load(i),this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i)}async queryObjectIds(t,i={}){return await this.load(i),this._connection.invoke("queryObjectIds",t?t.toJSON():null,i)}async queryExtent(t,i={}){await this.load(i);const r=await this._connection.invoke("queryExtent",t?t.toJSON():null,i);return{count:r.count,extent:gt.fromJSON(r.extent)}}async querySnapping(t,i={}){return await this.load(i),this._connection.invoke("querySnapping",t,i)}async _startWorker(t){this._connection=await uO("CSVSourceWorker",{strategy:le("feature-layers-workers")?"dedicated":"local",signal:t});const{url:i,delimiter:r,fields:a,latitudeField:d,longitudeField:y,spatialReference:m,timeInfo:_}=this.loadOptions,$=await this._connection.invoke("load",{url:i,customParameters:this.customParameters,parsingOptions:{delimiter:r,fields:a==null?void 0:a.map(M=>M.toJSON()),latitudeField:d,longitudeField:y,spatialReference:m==null?void 0:m.toJSON(),timeInfo:_==null?void 0:_.toJSON()}},{signal:t});this.locationInfo=$.locationInfo,this.sourceJSON=$.layerDefinition,this.delimiter=$.delimiter}};b([S()],co.prototype,"type",void 0),b([S()],co.prototype,"loadOptions",void 0),b([S()],co.prototype,"customParameters",void 0),b([S()],co.prototype,"locationInfo",void 0),b([S()],co.prototype,"sourceJSON",void 0),b([S()],co.prototype,"delimiter",void 0),co=b([B("esri.layers.graphics.sources.CSVSource")],co);const Qpe={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function o2e(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?FR:e==="esriGeometryPolyline"?zR:VR}}}const e0e=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let t0e=1;function a2e(e,t){if(le("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const a in e)i+=`this${e0e.test(a)?`.${a}`:`["${a}"]`} = ${JSON.stringify(e[a])};`;const r=new Function(`
      return class AttributesClass$${t0e++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[t]:null,...e})}}function l2e(e={}){return[{name:"New Feature",description:"",prototype:{attributes:re(e)}}]}function i0e(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:Qpe,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}function QT(e,t){throw new se(t,`CSVLayer (title: ${e.title}, id: ${e.id}) cannot be saved to a portal item`)}let zi=class extends wL{constructor(...e){super(...e),this.geometryType="point",this.capabilities=i0e(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=Xe.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null,i=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},e).catch(Ps).then(async()=>this.initLayerProperties(await this.createGraphicsSource(t)));return this.addResolvingPromise(i),Promise.resolve(this)}get isTable(){return this.loaded&&this.geometryType==null}readWebMapLabelsVisible(e,t){return t.showLabels!=null?t.showLabels:!!(t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.labelingInfo)}set url(e){if(!e)return void this._set("url",e);const t=Qi(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async createGraphicsSource(e){const t=new co({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField??void 0,longitudeField:this.longitudeField??void 0,spatialReference:this.spatialReference??void 0,timeInfo:this.timeInfo??void 0,url:this.url},customParameters:this.customParameters??void 0});return this._set("source",t),await t.load({signal:e}),this.read({locationInfo:t.locationInfo,columnDelimiter:t.delimiter},{origin:"service",url:this.parsedUrl}),t}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(sr.from(e)||this.createQuery())).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(sr.from(e)||this.createQuery()))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(sr.from(e)||this.createQuery()))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(sr.from(e)||this.createQuery()))}read(e,t){super.read(e,t),t&&t.origin==="service"&&this.revert(["latitudeField","longitudeField"],"service")}write(e,t){return super.write(e,{...t,writeLayerSchema:!0})}clone(){throw new se("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}async save(e){return QT(this,"csv-layer:save")}async saveAs(e,t){return QT(this,"csv-layer:save-as")}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return t!=null&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};b([S({readOnly:!0,json:{read:!1,write:!1}})],zi.prototype,"capabilities",void 0),b([S({type:[","," ",";","|","	"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],zi.prototype,"delimiter",void 0),b([S({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],zi.prototype,"editingEnabled",void 0),b([S({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],zi.prototype,"fields",void 0),b([S({type:Boolean,readOnly:!0})],zi.prototype,"isTable",null),b([me("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],zi.prototype,"readWebMapLabelsVisible",null),b([S({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],zi.prototype,"latitudeField",void 0),b([S({type:["show","hide"]})],zi.prototype,"listMode",void 0),b([S({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],zi.prototype,"locationType",void 0),b([S({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],zi.prototype,"longitudeField",void 0),b([S({type:["CSV"]})],zi.prototype,"operationalLayerType",void 0),b([S()],zi.prototype,"outFields",void 0),b([S({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],zi.prototype,"path",void 0),b([S({json:{read:!1},cast:null,type:co,readOnly:!0})],zi.prototype,"source",void 0),b([S({json:{read:!1},value:"csv",readOnly:!0})],zi.prototype,"type",void 0),b([S({json:{read:Yv,write:{isRequired:!0,ignoreOrigin:!0,writer:Kl}}})],zi.prototype,"url",null),zi=b([B("esri.layers.CSVLayer")],zi);const r0e=zi,u2e=Object.freeze(Object.defineProperty({__proto__:null,default:r0e},Symbol.toStringTag,{value:"Module"})),_L="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps202310251652/MapServer",s0e={url:_L,title:"USA Supply Chain Network",sublayers:[{id:0,visible:!0,maxScale:10,minScale:1e9}]},zS=new QR(s0e),n0e=()=>[zS],o0e=1e3,a0e=e=>{ke(()=>e.updating,t=>{})};let ua;const l0e=e=>{const t=document.getElementById("feature-node");e.when(()=>{e.on("click",i=>h0e(i,e,t)),ua=new ON,ua.tolerance=3,ua.layerIds=[0],ua.layerOption="top",ua.width=e.width,ua.height=e.height})},u0e={1:"Supplier",2:"Consignee",3:"Supplier and Consignee"},h0e=(e,t,i)=>{ua.geometry=e.mapPoint,ua.mapExtent=t.extent,yoe(_L,ua).then(r=>{console.log("identify is called response.results",r.results.length);const a=r.results;if(a.length==0)return;const d=a[0],{Address:y,lat:m,long:_,type:$,Id:M,routes:A}=d.feature.attributes,P=d.layerName,j=u0e[$],L=`<b>ID:</b><br/>${M} <br/> <b>Layer Name:</b><br/>${P} <br/><br/> <b>Company Type :</b><br/> ${j} <br/><br/> <b>Address:</b><br/> ${y}<br/><b>Lat Lng</b>:<br/> ${m},${_}`;i.innerHTML=L,c0e(JSON.parse(A),t)})},c0e=(e,t)=>{console.log("Routes::",e.length);const i=new Set,r=e.map(d=>{const y=[],m=d.split(",");i.add(m[0]+";"+m[1]),i.add(m[2]+";"+m[3]);const _=m[0].split(";"),$=m[2].split(";");y.push([_,$]);var M=new ls({paths:y,spatialReference:{wkid:4326}}),A=kN(M,o0e);return new Us({geometry:A,symbol:y0e(m[1],m[4])})});t.graphics.removeAll();const a=zS.sublayers.at(0);a.visible=!1,b0e(t,Array.from(i)),t.graphics.addMany(r)},p0e=2,SL=1,xL={type:"simple-line",cap:"round",join:"round",marker:{color:"green",placement:"begin",style:"arrow"}},$L={...xL,color:[150,75,0],style:"short-dot",width:p0e},d0e={...xL,color:[4,90,141],width:SL},TL={...$L,marker:{color:"red",placement:"begin-end",style:"arrow"}},f0e={...TL,color:[4,90,141],width:SL},y0e=(e,t)=>{let i;return e==1&&t==1?i=$L:e==1&&t==2?i=d0e:e==2&&t==1?i=TL:i=f0e,i},m0e=e=>{e.ui.add(["clearBtn"],"top-left");var t=document.getElementById("clearBtn");t.addEventListener("click",i=>{e.graphics.length>0&&e.graphics.removeAll();const r=zS.sublayers.at(0);r.visible=!0})},g0e={1:[0,0,255],2:[255,0,0],3:[0,255,0]},v0e={1:[255,255,0],2:[255,0,250],3:[0,250,255]},b0e=(e,t)=>{const i=t.map(r=>{const a=r.split(";"),d={type:"point",longitude:a[0],latitude:a[1]},y={type:"simple-marker",color:g0e[a[2]],outline:{color:v0e[a[2]],width:1}};return new Us({geometry:d,symbol:y})});return e.graphics.addMany(i),i},w0e=e=>{const t=new dae({view:e,listItemCreatedFunction:i=>{const r=i.item;r.layer.type!="group"&&(r.panel={content:"legend",open:!1})}});e.ui.add(t,"top-right")},_0e=!0;console.warn=(e,t)=>{console.log("%c "+e+"  "+t,"color: red; font-weight:bold")};console.warn("The develop mode::",_0e);(async()=>await be(()=>Promise.resolve({}),["assets/mapfromonline-31fe072e.css"]))();const eI={zoom:6,baseMapID:"hybrid",center:[-80.22591218922629,25.76594796317374]};const S0e=new tA({basemap:"streets-vector",layers:n0e()}),Nd=new Jse({container:"viewDiv",map:S0e,zoom:eI.zoom,center:eI.center,popupEnabled:!0});Nd.when(()=>{w0e(Nd),m0e(Nd),l0e(Nd)});a0e(Nd);export{Nv as $,Sp as A,kt as B,Vs as C,qs as D,f4 as E,Pde as F,Vt as G,Kh as H,Kpe as I,Gd as J,fe as K,Ze as L,n5 as M,wfe as N,xo as O,Ma as P,$fe as Q,Lv as R,xO as S,hu as T,bfe as U,Le as V,vv as W,Lo as X,Ps as Y,zY as Z,be as _,Vn as a,Ea as a$,Hf as a0,ls as a1,gU as a2,xf as a3,$v as a4,Gh as a5,tG as a6,Zfe as a7,B1 as a8,IW as a9,l6 as aA,ine as aB,sr as aC,fve as aD,hA as aE,RS as aF,Oh as aG,kW as aH,x0e as aI,Pn as aJ,L1e as aK,zie as aL,FI as aM,wL as aN,Pg as aO,Ng as aP,$f as aQ,bB as aR,W0e as aS,Wfe as aT,Kt as aU,Up as aV,Aw as aW,a4 as aX,zI as aY,Jr as aZ,_ge as a_,TW as aa,$W as ab,Vh as ac,gB as ad,V0 as ae,Zde as af,AW as ag,b as ah,S as ai,Tt as aj,Us as ak,B as al,De as am,HR as an,At as ao,Rp as ap,rc as aq,Pp as ar,wse as as,Ge as at,H1e as au,B1e as av,qZ as aw,cu as ax,w$ as ay,NW as az,Vv as b,mge as b$,Yl as b0,mh as b1,wk as b2,_k as b3,XS as b4,Xf as b5,Dse as b6,Xh as b7,t0 as b8,$h as b9,ree as bA,bee as bB,Aie as bC,VY as bD,lC as bE,jq as bF,Ql as bG,Xe as bH,Wz as bI,v4 as bJ,pu as bK,xp as bL,Bf as bM,sde as bN,is as bO,va as bP,lu as bQ,KI as bR,yoe as bS,gge as bT,ON as bU,_f as bV,ov as bW,$i as bX,tfe as bY,Ki as bZ,jr as b_,K4 as ba,qw as bb,W1e as bc,S6 as bd,Aoe as be,mo as bf,Qd as bg,Dee as bh,Jye as bi,Yye as bj,Ti as bk,Bh as bl,g1 as bm,Yp as bn,uve as bo,x2 as bp,yE as bq,Nh as br,gt as bs,Ug as bt,aa as bu,Iae as bv,uC as bw,jp as bx,Xee as by,H6 as bz,hC as c,tpe as c$,On as c0,ZE as c1,AV as c2,g_ as c3,Fs as c4,li as c5,rC as c6,$t as c7,ife as c8,pC as c9,Fn as cA,Yg as cB,Ife as cC,vfe as cD,Afe as cE,yU as cF,mU as cG,W4 as cH,QM as cI,ffe as cJ,H4 as cK,B4 as cL,Lve as cM,Dve as cN,Rve as cO,epe as cP,bv as cQ,me as cR,Yge as cS,Jge as cT,Ur as cU,oC as cV,dg as cW,uO as cX,Gi as cY,lS as cZ,Cf as c_,Bl as ca,zv as cb,vM as cc,bo as cd,u2 as ce,o1e as cf,YP as cg,jP as ch,ZP as ci,hee as cj,jye as ck,_ee as cl,Of as cm,Rye as cn,Ep as co,O0e as cp,$o as cq,Wf as cr,vve as cs,Th as ct,oU as cu,Tfe as cv,MR as cw,Tve as cx,TT as cy,IR as cz,L4 as d,bU as d$,Z4 as d0,Ffe as d1,vge as d2,Bfe as d3,zfe as d4,Gfe as d5,Vfe as d6,qfe as d7,hs as d8,re as d9,C0e as dA,pe as dB,_a as dC,su as dD,xC as dE,Cv as dF,Pme as dG,Nme as dH,kme as dI,jC as dJ,Jme as dK,ore as dL,Gme as dM,Yme as dN,Vme as dO,fI as dP,yI as dQ,VL as dR,BF as dS,pfe as dT,eU as dU,kfe as dV,yfe as dW,G4 as dX,FM as dY,iU as dZ,Yw as d_,yL as da,mL as db,r2e as dc,Fpe as dd,Lpe as de,jg as df,mQ as dg,OP as dh,mt as di,Iue as dj,f2 as dk,cce as dl,M0e as dm,A0e as dn,ut as dp,H2 as dq,Qle as dr,z0e as ds,gte as dt,Tue as du,et as dv,F2 as dw,khe as dx,OR as dy,wC as dz,gm as e,f9 as e$,uU as e0,dfe as e1,gfe as e2,S1e as e3,PP as e4,Uee as e5,yo as e6,kf as e7,l2 as e8,fU as e9,ice as eA,rce as eB,sce as eC,jn as eD,CR as eE,PR as eF,Sve as eG,bS as eH,bve as eI,Uue as eJ,Mve as eK,S_ as eL,dp as eM,Mj as eN,Uae as eO,Bae as eP,Yh as eQ,gf as eR,Sa as eS,st as eT,Jf as eU,wr as eV,MX as eW,fz as eX,Fge as eY,T9 as eZ,Jd as e_,xa as ea,ru as eb,Kv as ec,_fe as ed,Dfe as ee,s4 as ef,Y4 as eg,Rh as eh,dy as ei,PN as ej,nU as ek,_h as el,tp as em,Fd as en,Zi as eo,Fy as ep,L9 as eq,yQ as er,Rue as es,lve as et,Lue as eu,ove as ev,Wr as ew,Qi as ex,Zp as ey,ave as ez,Zee as f,rG as f$,yj as f0,Xde as f1,kye as f2,GZ as f3,Hs as f4,Fm as f5,P0e as f6,F6 as f7,K7 as f8,pt as f9,Kee as fA,Sr as fB,Eh as fC,Se as fD,je as fE,dh as fF,zme as fG,ere as fH,jme as fI,dO as fJ,Rn as fK,Vhe as fL,Yce as fM,Ws as fN,IP as fO,wa as fP,o2e as fQ,_r as fR,Fde as fS,Nde as fT,Ame as fU,cfe as fV,wv as fW,n3 as fX,s3 as fY,Yve as fZ,Kve as f_,I1e as fa,$1e as fb,O1e as fc,Sde as fd,q$ as fe,wG as ff,zs as fg,Ot as fh,Ufe as fi,ec as fj,$a as fk,k9 as fl,ii as fm,A9 as fn,P9 as fo,Fg as fp,_O as fq,dde as fr,d6 as fs,b7 as ft,Ofe as fu,d1e as fv,w1e as fw,uY as fx,BG as fy,Wee as fz,le as g,yve as g$,rS as g0,N4 as g1,Oge as g2,N0e as g3,ic as g4,Cge as g5,Pge as g6,kae as g7,Qde as g8,FL as g9,$z as gA,Zge as gB,bue as gC,at as gD,FU as gE,tB as gF,a2e as gG,iu as gH,Tz as gI,b1e as gJ,Ive as gK,Hfe as gL,ZM as gM,Pfe as gN,mfe as gO,Zle as gP,Qpe as gQ,zge as gR,aJ as gS,mP as gT,Tw as gU,wve as gV,hI as gW,Efe as gX,Eve as gY,GE as gZ,NE as g_,mj as ga,Pj as gb,Cj as gc,m2 as gd,E0e as ge,a2 as gf,cj as gg,QS as gh,V0e as gi,R0e as gj,Sh as gk,lde as gl,Cde as gm,QX as gn,Ode as go,mI as gp,$p as gq,hp as gr,Mde as gs,UF as gt,An as gu,jv as gv,Gf as gw,js as gx,Vde as gy,B0e as gz,o4 as h,Tp as h$,AR as h0,xR as h1,IV as h2,CV as h3,Dv as h4,Bde as h5,k0e as h6,uie as h7,L0e as h8,bM as h9,I4 as hA,M4 as hB,nte as hC,fte as hD,bG as hE,YK as hF,XG as hG,pO as hH,wK as hI,gs as hJ,Mz as hK,jE as hL,RE as hM,Az as hN,Bs as hO,lq as hP,hq as hQ,mq as hR,_q as hS,kM as hT,MM as hU,AM as hV,wq as hW,Iq as hX,Eq as hY,oq as hZ,Fv as h_,_g as ha,SM as hb,sfe as hc,eq as hd,FG as he,D4 as hf,Sg as hg,yM as hh,efe as hi,uq as hj,zL as hk,OM as hl,_G as hm,SG as hn,xG as ho,gG as hp,mG as hq,jK as hr,cO as hs,UG as ht,KK as hu,Dn as hv,kY as hw,Bee as hx,Ude as hy,Lde as hz,jL as i,CL as i$,Mge as i0,xde as i1,yhe as i2,che as i3,pve as i4,xve as i5,hhe as i6,fhe as i7,xfe as i8,_ae as i9,fie as iA,lJ as iB,_ve as iC,mR as iD,F0e as iE,HG as iF,vp as iG,Mle as iH,zg as iI,_le as iJ,Sle as iK,jx as iL,wM as iM,zG as iN,RG as iO,_M as iP,ig as iQ,iee as iR,vG as iS,lue as iT,S2 as iU,a0 as iV,IK as iW,ofe as iX,T0e as iY,uz as iZ,x4 as i_,Zse as ia,l2e as ib,gve as ic,Kfe as id,Yfe as ie,Jfe as ig,nfe as ih,I6 as ii,d2 as ij,lfe as ik,Ld as il,ahe as im,Yue as io,the as ip,phe as iq,$ve as ir,KJ as is,tve as it,gD as iu,ow as iv,aw as iw,mve as ix,Lt as iy,hve as iz,j0e as j,rA as j$,Tg as j0,Cr as j1,yi as j2,Qne as j3,ioe as j4,_2 as j5,Te as j6,Gde as j7,kle as j8,rM as j9,Gs as jA,zF as jB,$k as jC,PC as jD,hj as jE,y4 as jF,kge as jG,xae as jH,$ae as jI,dj as jJ,eQ as jK,L6 as jL,iQ as jM,rQ as jN,t4 as jO,i4 as jP,Uf as jQ,FJ as jR,Cs as jS,wO as jT,i0e as jU,Upe as jV,Oj as jW,Vpe as jX,ipe as jY,ZR as jZ,Ux as j_,tM as ja,Kl as jb,t1 as jc,Ch as jd,LM as je,xY as jf,_4 as jg,qx as jh,hfe as ji,fR as jj,Ede as jk,Py as jl,v_ as jm,Ia as jn,IE as jo,kj as jp,Lj as jq,Rj as jr,Gve as js,xl as jt,Age as ju,j$ as jv,WR as jw,dR as jx,g2 as jy,Jpe as jz,$C as k,J4 as k$,uS as k0,v1 as k1,AT as k2,F5 as k3,y1 as k4,Sae as k5,AS as k6,kS as k7,vf as k8,Kr as k9,tQ as kA,bY as kB,tE as kC,xv as kD,Yv as kE,Tf as kF,Nr as kG,us as kH,wJ as kI,Rv as kJ,_J as kK,x1e as kL,H0e as kM,NL as kN,f6 as kO,f1e as kP,p1e as kQ,uoe as kR,Zl as kS,r8 as kT,e0 as kU,Sfe as kV,Mfe as kW,zx as kX,Jee as kY,GQ as kZ,LQ as k_,e2 as ka,CU as kb,PU as kc,Zq as kd,Cx as ke,qi as kf,Hz as kg,Bz as kh,zde as ki,CN as kj,nu as kk,Lce as kl,bhe as km,ghe as kn,YD as ko,XR as kp,n0 as kq,gS as kr,Gj as ks,Gle as kt,Wj as ku,Qj as kv,yv as kw,SS as kx,Dj as ky,hf as kz,Qee as l,Lme as l$,Ade as l0,u3 as l1,So as l2,AE as l3,Df as l4,Qce as l5,nve as l6,Wl as l7,JT as l8,UR as l9,mpe as lA,YR as lB,jce as lC,Oae as lD,T2 as lE,Vp as lF,dI as lG,Ide as lH,px as lI,Lk as lJ,EG as lK,rfe as lL,gM as lM,mM as lN,Tae as lO,RN as lP,Oye as lQ,OF as lR,q as lS,Dde as lT,Ome as lU,qme as lV,ase as lW,Ume as lX,ose as lY,Fme as lZ,sse as l_,wf as la,DS as lb,Mae as lc,Eae as ld,tS as le,Gp as lf,gpe as lg,Kce as lh,Oa as li,jve as lj,Nve as lk,Cve as ll,Tpe as lm,wpe as ln,Spe as lo,spe as lp,npe as lq,ope as lr,lpe as ls,upe as lt,hpe as lu,cpe as lv,ppe as lw,dpe as lx,fpe as ly,ype as lz,Iv as m,Dme as m0,tN as m1,Bme as m2,Cme as m3,yse as m4,mse as m5,Kme as m6,Wme as m7,Hme as m8,Zme as m9,xte as mA,vte as mB,sq as mC,Yz as mD,m1e as mE,g1e as mF,XK as mG,ZK as mH,Wg as mI,v1e as mJ,dV as mK,G1e as mL,yge as mM,Lge as mN,Hge as mO,Uve as mP,Xpe as mQ,u2e as mR,Rme as ma,rp as mb,y1e as mc,_1e as md,Kge as me,CS as mf,Lfe as mg,RR as mh,kde as mi,afe as mj,q0e as mk,U0e as ml,G0e as mm,oz as mn,EK as mo,bK as mp,_K as mq,dv as mr,pI as ms,fL as mt,vc as mu,zhe as mv,bR as mw,Pr as mx,vme as my,Ste as mz,Ni as n,xme as o,ai as p,se as q,a1 as r,Jt as s,I0e as t,xk as u,Mo as v,Sme as w,Wt as x,pf as y,ke as z};
