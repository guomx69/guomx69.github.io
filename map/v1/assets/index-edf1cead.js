(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function i(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(a){if(a.ep)return;a.ep=!0;const d=i(a);fetch(a.href,d)}})();function w(t,e,i,s){var a,d=arguments.length,y=d<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,e,i,s);else for(var m=t.length-1;m>=0;m--)(a=t[m])&&(y=(d<3?a(y):d>3?a(e,i,y):a(e,i))||y);return d>3&&y&&Object.defineProperty(e,i,y),y}function Pht(t,e,i,s){function a(d){return d instanceof i?d:new i(function(y){y(d)})}return new(i||(i=Promise))(function(d,y){function m(I){try{S(s.next(I))}catch(A){y(A)}}function _(I){try{S(s.throw(I))}catch(A){y(A)}}function S(I){I.done?d(I.value):a(I.value).then(m,_)}S((s=s.apply(t,e||[])).next())})}const RN="modulepreload",jN=function(t){return"/map/v1/"+t},R4={},bt=function(e,i,s){if(!i||i.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=jN(d),d in R4)return;R4[d]=!0;const y=d.endsWith(".css"),m=y?'[rel="stylesheet"]':"";if(!!s)for(let I=a.length-1;I>=0;I--){const A=a[I];if(A.href===d&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":RN,y||(S.as="script",S.crossOrigin=""),S.href=d,document.head.appendChild(S),y)return new Promise((I,A)=>{S.addEventListener("load",I),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>e())};function DN(t){return t&&t.release&&typeof t.release=="function"}function FN(t){return t&&t.acquire&&typeof t.acquire=="function"}let Al=class rb{constructor(e,i,s,a=1,d=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=a,this._pool=new Array(d),this._initialSize=d,this._ctor)for(let y=0;y<d;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(a,1)}destroy(){this.prune(0)}acquire(...e){let i;if(rb.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let a=0;a<s;a++)this._pool[a]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):FN(i)&&i.acquire(...e),i}release(e){e&&!rb.test.disabled&&(this._releaseFunction?this._releaseFunction(e):DN(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Al.test={disabled:!1};function zN(t){t.length=0}let _r=class{constructor(e=50,i=50){this._pool=new Al(Array,void 0,zN,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Ev.acquire()}static release(e){return Ev.release(e)}static prune(){Ev.prune()}};const Ev=new _r(100);function Nht(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function VN(t,e){for(const i of t)if(i!=null&&e(i))return i}function Wy(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function jh(t,e){return t!=null?e(t):null}function Pr(t,e){return vg(t,e),t}function vg(t,e){if(t==null)throw new Error(e??"value is None")}function Je(t){return t==null||t.destroy(),null}function Lht(t){return t==null||t.dispose(),null}function si(t){return t==null||t.remove(),null}function gd(t){return t==null||t.abort(),null}function Rht(t){return t==null||t.release(),null}function GN(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function UN(t){return null}function jht(t,e){const i=new Array;for(const s of t)i.push(s!=null?e(s):null);return i}function Dht(t,e){for(const i of t)jh(i,e)}function Fht(t){return t}let Qo=class sb{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Wy(e)){const s=this._getOrCreateGroup(i);for(const a of e)this._isHandle(a)&&s.push(a)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{const s=this._getGroup(e);s&&i&&s.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Wy(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof sb)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof sb?i.removeAll():i.remove()}};const R8=Symbol("Accessor-beforeDestroy");function bg(t){return Xn(()=>t.forEach(e=>e!=null&&e.remove()))}function Xn(t){return{remove:()=>{t&&(t(),t=void 0)}}}let Iv=class Kl{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Kl._m}getInt(){return this._seed=(Kl._a*this._seed+Kl._c)%Kl._m,this._seed}getFloat(){return this.getInt()/(Kl._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const s=i-e;return e+this.getInt()/Kl._m*s}};Iv._m=2147483647,Iv._a=48271,Iv._c=0;const zht=1.5;function Vht(t,e){return e?t.filter((i,s,a)=>a.findIndex(e.bind(null,i))===s):t.filter((i,s,a)=>a.indexOf(i)===s)}function wg(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}function Ght(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let s=0;s<e.length;++s)t[s]!==e[s]&&(t[s]=e[s],i=!0);return i}function Uht(t,e,i){let s,a;return i?(s=e.filter(d=>!t.some(y=>i(y,d))),a=t.filter(d=>!e.some(y=>i(y,d)))):(s=e.filter(d=>!t.includes(d)),a=t.filter(d=>!e.includes(d))),{added:s,removed:a}}function qht(t){return t&&typeof t.length=="number"}const qN=!!Array.prototype.fill;function BN(t,e){if(qN)return new Array(t).fill(e);const i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}function Bht(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let s=t;s<e;s++)i[s-t]=s;return i}let j8=class{constructor(){this.last=0}};const D8=new j8;function nb(t,e,i,s){s=s||D8;const a=Math.max(0,s.last-10);for(let y=a;y<i;++y)if(t[y]===e)return s.last=y,y;const d=Math.min(a,i);for(let y=0;y<d;++y)if(t[y]===e)return s.last=y,y;return-1}function HN(t,e,i,s){const a=i??t.length,d=nb(t,e,a,s);if(d!==-1)return t[d]=t[a-1],i==null&&t.pop(),e}const Cs=new Set;function WN(t,e,i=t.length,s=e.length,a,d){if(s===0||i===0)return i;Cs.clear();for(let m=0;m<s;++m)Cs.add(e[m]);a=a||D8;const y=Math.max(0,a.last-10);for(let m=y;m<i;++m)if(Cs.has(t[m])&&(d&&d.push(t[m]),Cs.delete(t[m]),t[m]=t[i-1],--i,--m,Cs.size===0||i===0))return Cs.clear(),i;for(let m=0;m<y;++m)if(Cs.has(t[m])&&(d&&d.push(t[m]),Cs.delete(t[m]),t[m]=t[i-1],--i,--m,Cs.size===0||i===0))return Cs.clear(),i;return Cs.clear(),i}function JN(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Yh(t,e){return t!=null}let al;function at(t){return typeof al[t]=="function"?al[t]=al[t](globalThis):al[t]}var I8,A8,k8,O8;al=(I8=globalThis.dojoConfig)!=null&&I8.has||(A8=globalThis.esriConfig)!=null&&A8.has?{...(k8=globalThis.dojoConfig)==null?void 0:k8.has,...(O8=globalThis.esriConfig)==null?void 0:O8.has}:{},at.add=(t,e,i,s)=>((s||al[t]===void 0)&&(al[t]=e),i&&at(t)),at.cache=al,at.add("esri-deprecation-warnings",!0),at.add("esri-force-fullscreen-debug",!1),(()=>{var e;at.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(at.add("host-browser",t),at.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),at.add("dom",t),at("host-browser")){const i=navigator,s=i.userAgent,a=i.appVersion,d=parseFloat(a);if(at.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),at.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),at.add("khtml",a.includes("Konqueror")?d:void 0),at.add("edge",parseFloat(s.split("Edge/")[1])||void 0),at.add("opr",parseFloat(s.split("OPR/")[1])||void 0),at.add("webkit",!at("wp")&&!at("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),at.add("chrome",!at("edge")&&!at("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),at.add("android",!at("wp")&&parseFloat(s.split("Android ")[1])||void 0),at.add("safari",!a.includes("Safari")||at("wp")||at("chrome")||at("android")||at("edge")||at("opr")?void 0:parseFloat(a.split("Version/")[1])),at.add("mac",a.includes("Macintosh")),!at("wp")&&/(iPhone|iPod|iPad)/.test(s)){const y=RegExp.$1.replace(/P/,"p"),m=/OS ([\d_]+)/.test(s)?RegExp.$1:"1",_=parseFloat(m.replace(/_/,".").replaceAll("_",""));at.add(y,_),at.add("ios",_)}at("webkit")||(!s.includes("Gecko")||at("wp")||at("khtml")||at("edge")||at.add("mozilla",d),at("mozilla")&&at.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&at.add("esri-mobile",e),i&&at.add("esri-iPhone",i),at.add("esri-geolocation",!!navigator.geolocation)}at.add("esri-wasm","WebAssembly"in globalThis),at.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),at.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),at.add("esri-atomics","Atomics"in globalThis),at.add("esri-workers","Worker"in globalThis),at.add("web-feat:cache","caches"in globalThis),at.add("esri-workers-arraybuffer-transfer",!at("safari")||Number(at("safari"))>=12),at.add("workers-pool-size",8),at.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),at.add("featurelayer-simplify-payload-size-factors",[1,1,4]),at.add("featurelayer-animation-enabled",!0),at.add("featurelayer-snapshot-enabled",!0),at.add("featurelayer-snapshot-point-min-threshold",8e4),at.add("featurelayer-snapshot-point-max-threshold",4e5),at.add("featurelayer-snapshot-point-coverage",.1),at.add("featurelayer-advanced-symbols",!1),at.add("featurelayer-pbf",!0),at.add("featurelayer-pbf-statistics",!1),at.add("feature-layers-workers",!0),at.add("feature-polyline-generalization-factor",1),at.add("mapview-transitions-duration",200),at.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),at.add("mapserver-pbf-version-support",10.81),at.add("mapservice-popup-identify-max-tolerance",20),at.add("heatmap-allow-raster-fallback",!1),at.add("heatmap-force-raster",!1),at("host-webworker")||at("host-browser")&&(at.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),at.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{at.add("esri-image-decode",!0,!0,!0)}).catch(()=>{at.add("esri-image-decode",!1,!0,!0)})}return!1}),at.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function Wht(t){return t instanceof ArrayBuffer}function l5(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function F8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function z8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function h5(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function V8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function u5(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function G8(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function _g(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function xg(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function KN(t){return!("buffer"in t)}function YN(t){return t!=null?KN(t)?8*t.length+12:t.byteLength+ZN:0}const ZN=145,XN=1024;function Jht(t){return xg(t)||_g(t)||u5(t)||h5(t)||l5(t)}function Kht(t){return xg(t)||_g(t)}function Yht(t){return xg(t)?179769e303:_g(t)?3402823e32:G8(t)?4294967295:V8(t)?65535:F8(t)||z8(t)?255:u5(t)?2147483647:h5(t)?32767:l5(t)?127:256}function U8(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&U8(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function ot(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=H8(t);if(e!=null)return e;if(Jy(t))return t.clone();if(q8(t))return t.map(ot);if(B8(t))return t.clone();const i={};for(const s of Object.getOwnPropertyNames(t))i[s]=ot(t[s]);return i}function ob(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=H8(t);if(e!=null)return e;if(q8(t)){let i=!0;const s=t.map(a=>{const d=ob(a);return a!=null&&d==null&&(i=!1),d});return i?s:null}if(Jy(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!B8(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const a=t[s],d=ob(a);if(a!=null&&d==null)return null;i[s]=d}return i}return null}function Jy(t){return typeof t.clone=="function"}function q8(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function B8(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function j4(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function H8(t){if(l5(t)||F8(t)||z8(t)||h5(t)||V8(t)||u5(t)||G8(t)||_g(t)||xg(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,s]of t)e.set(i,ot(s));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(ot(i));return e}return null}function c5(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function W8(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&wg(t,e):t instanceof Set?e instanceof Set&&tL(t,e):t instanceof Map?e instanceof Map&&eL(t,e):!!j4(t)&&j4(e)&&QN(t,e))}function QN(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const s of i)if(t[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1;return!0}function tL(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function eL(t,e){if(t.size!==e.size)return!1;for(const[i,s]of t){const a=e.get(i);if(a!==s||a===void 0&&!e.has(i))return!1}return!0}function Fi(t){return t.__accessor__??null}function iL(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function j1(t,e,i){return i?Ky(t,e,{policy:i,path:""}):Ky(t,e,null)}function Ky(t,e,i){return e?Object.keys(e).reduce((s,a)=>{const d=a;let y=null,m="merge";if(i&&(y=i.path?`${i.path}.${a}`:a,m=i.policy(y)),m==="replace"||m==="replace-arrays"&&Array.isArray(s[d]))return s[d]=e[d],s;if(s[d]===void 0)return s[d]=ot(e[d]),s;let _=s[d],S=e[d];if(_===S)return s;if(Array.isArray(S)||Array.isArray(s))_=_?Array.isArray(_)?s[d]=_.concat():s[d]=[_]:s[d]=[],S&&(Array.isArray(S)||(S=[S]),S.forEach(I=>{_.includes(I)||_.push(I)}));else if(S&&typeof S=="object")if(i){const I=i.path;i.path=y,s[d]=Ky(_,S,i),i.path=I}else s[d]=Ky(_,S,null);else s.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(s[d]=S);return s},t||{}):t}function J8(t){return Array.isArray(t)?t:t.split(".")}function D4(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function rL(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...D4(i));return e}return D4(t)}function K8(t,e,i,s){const a=rL(e);if(a.length!==1){const d=a.map(y=>s(t,y,i));return bg(d)}return s(t,a[0],i)}function Y8(t){let e=!1;return()=>{e||(e=!0,t())}}function Z8(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const a=parseInt(i,10);if(!isNaN(a))return Array.isArray(e)?e[a]:e.at(a)}const s=Fi(e);return iL(s,i)?s.get(i):e[i]}function X8(t,e,i){if(t==null)return t;const s=Z8(e[i],t);return!s&&i<e.length-1?void 0:i===e.length-1?s:X8(s,e,i+1)}function Hd(t,e,i=0){return typeof e!="string"||e.includes(".")?X8(t,J8(e),i):Z8(e,t)}function Yy(t,e){return Hd(t,e)}function F4(t,e){return Hd(e,t)!==void 0}function Wd(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const s in e)e[s]=ot(e[s]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Sg(t,e){const i=Wd(t);let s=i[e];return s||(s=i[e]={}),s}function sL(t,e){return j1(t,e,oL)}const nL=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function oL(t){return nL.test(t)?"replace":"merge"}function Q8(t,e,i=!1){return e$(t,e,i)}function Jd(t,e){if(e!=null)return e[t]||t$(t.split("."),!1,e)}function yu(t,e,i){const s=t.split("."),a=s.pop(),d=t$(s,!0,i);d&&a&&(d[a]=e)}function t$(t,e,i){let s=i;for(const a of t){if(s==null)return;if(!(a in s)){if(!e)return;s[a]={}}s=s[a]}return s}function e$(t,e,i){return e?Object.keys(e).reduce((s,a)=>{let d=s[a],y=e[a];return d===y?s:d===void 0?(s[a]=ot(y),s):(Array.isArray(y)||Array.isArray(s)?(d=d?Array.isArray(d)?s[a]=d.concat():s[a]=[d]:s[a]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(m=>{d.includes(m)||d.push(m)}):s[a]=y.concat())):y&&typeof y=="object"?s[a]=e$(d,y,i):s.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(s[a]=y),s)},t||{}):t}var P8;const _e={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(P8=globalThis.location)==null?void 0:P8.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Q8(_e,globalThis.esriConfig,!0),delete _e.has),!_e.assetsPath){{const t="4.27";_e.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}_e.defaultAssetsPath=_e.assetsPath}const aL=/\{([^\}]+)\}/g;function z4(t){return t??""}function $g(t,e){return t.replaceAll(aL,typeof e=="object"?(i,s)=>z4(Jd(s,e)):(i,s)=>z4(e(s)))}function Zht(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function p5(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function Xht(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function Qht(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const V4={info:0,warn:1,error:2,none:3};let mt=class nr{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,nr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=nr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=nr._loggers;return nr._loggers=e,i},set throttlingDisabled(e){nr._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,nr._loggers.get(e)||new nr({module:e})}_log(e,i,...s){if(this._matchLevel(e)){if(i!=="always"&&!nr._throttlingDisabled){const a=this._argsToKey(s),d=this._loggedMessages[e].get(a);if(i==="once"&&d!=null||i==="oncePerTick"&&d&&d>=nr._tickCounter)return;this._loggedMessages[e].set(a,nr._tickCounter),nr._scheduleTickCounterIncrement()}for(const a of _e.log.interceptors)if(a(e,this.module,...s))return;this._inheritedWriter()(e,this.module,...s)}}_parentWithMember(e,i){let s=this;for(;s!=null;){const a=s[e];if(a!=null)return a;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...s){console[e](`[${i}]`,...s)}_matchLevel(e){const i=_e.log.level||"warn";return V4[this._parentWithMember("level",i)]<=V4[e]}_argsToKey(...e){return p5(JSON.stringify(e,(s,a)=>typeof a!="object"||Array.isArray(a)?a:"[Object]"))}static _scheduleTickCounterIncrement(){nr._tickCounterScheduled||(nr._tickCounterScheduled=!0,Promise.resolve().then(()=>{nr._tickCounter++,nr._tickCounterScheduled=!1}))}};mt._loggers=new Map,mt._tickCounter=0,mt._tickCounterScheduled=!1,mt._throttlingDisabled=!1;var jo;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(jo||(jo={}));let lL=class{constructor(e,i){this._observers=e,this._observer=i}remove(){JN(this._observers,this._observer)}},i$=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return hL;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,a=!1;const d=i.length;for(let y=0;y<d;++y){const m=i[y];if(m.destroyed)a=!0;else if(m===e){s=!0;break}}return s||(i.push(e),a&&this._removeDestroyedObservers()),new lL(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let s=0;for(let a=0;a<i;++a){for(;a+s<i&&e[a+s].destroyed;)++s;if(s>0){if(!(a+s<i))break;e[a]=e[a+s]}}e.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const hL=Xn();var St;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(St||(St={}));const ab=St.USER+1;function xr(t){switch(t){case"defaults":return St.DEFAULTS;case"service":return St.SERVICE;case"portal-item":return St.PORTAL_ITEM;case"web-scene":return St.WEB_SCENE;case"web-map":return St.WEB_MAP;case"link-chart":return St.LINK_CHART;case"user":return St.USER;default:return null}}function vd(t){switch(t){case St.DEFAULTS:return"defaults";case St.SERVICE:return"service";case St.PORTAL_ITEM:return"portal-item";case St.WEB_SCENE:return"web-scene";case St.WEB_MAP:return"web-map";case St.LINK_CHART:return"link-chart";case St.USER:return"user"}return void 0}function uL(t){return vd(t)}var Ce;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ce||(Ce={}));const Zy={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},U0=[];let Vp=Zy;function Wt(t){Vp.onObservableAccessed(t)}let D1=!1,F1=!1;function Bo(t,e,i){if(D1)return d5(t,e,i);r$(t);const s=e.call(i);return s$(),s}function cL(t,e){return Bo(Zy,t,e)}function d5(t,e,i){const s=D1;D1=!0,r$(t);let a=null;try{a=e.call(i)}catch(d){F1&&mt.getLogger("esri.core.accessorSupport.tracking").error(d)}return s$(),D1=s,a}function r$(t){Vp=t,U0.push(t)}function s$(){const t=U0.length;if(t>1){const e=U0.pop();Vp=U0[t-2],e.onTrackingEnd()}else if(t===1){const e=U0.pop();Vp=Zy,e.onTrackingEnd()}else Vp=Zy}function n$(t,e){const i=e.observerObject;if(i.flags&Ce.DepTrackingInitialized)return;const s=F1;F1=!1,i.flags&Ce.AutoTracked?d5(e,e.metadata.get,t):o$(t,e),F1=s}const pL=[];function o$(t,e){const i=e.observerObject;i.flags&Ce.ExplicitlyTracking||(i.flags|=Ce.ExplicitlyTracking,d5(e,()=>{const s=e.metadata.dependsOn||pL;for(const a of s)if(typeof a!="string"||a.includes(".")){const d=J8(a);for(let y=0,m=t;y<d.length&&m!=null&&typeof m=="object";++y)m=G4(m,d[y],y!==d.length-1)}else G4(t,a,!1)}),i.flags&=~Ce.ExplicitlyTracking)}function G4(t,e,i){const s=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const d=parseInt(s,10);if(!isNaN(d))return Array.isArray(t)?t[d]:t.at(d)}const a=Fi(t);if(a){const d=a.propertiesByName.get(s);d&&(Wt(d.observerObject),n$(t,d))}return i?t[s]:void 0}let U4=class{constructor(e,i){this.propertyName=e,this.metadata=i,this.observerObject=new dL,this._accessed=null,this._handles=null,this.observerObject.flags=Ce.Dirty|(i.nonNullable?Ce.NonNullable:0)|(i.hasOwnProperty("value")?Ce.HasDefaultValue:0)|(i.get===void 0?Ce.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ce.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){const i=this.observerObject;Wt(i);const s=e.store,a=this.propertyName,d=i.flags,y=s.get(a);if(d&Ce.Computing||~d&Ce.Dirty&&s.has(a))return y;i.flags|=Ce.Computing;const m=e.host;let _;d&Ce.AutoTracked?_=Bo(this,this.metadata.get,m):(o$(m,this),_=this.metadata.get.call(m)),s.set(a,_,St.COMPUTED);const S=s.get(a);return S===y?i.flags&=~Ce.Dirty:cL(this.commit,this),i.flags&=~Ce.Computing,S}onObservableAccessed(e){if(e===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Ce.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let s=this._handles;s==null&&(s=[],this._handles=s);for(let a=0;a<i.length;++a)s.push(i[a].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Ce.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},dL=class extends i${constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Ce.Overriden&&(this.flags|=Ce.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onCommitted()}}destroy(){this.flags&Ce.Dirty&&this.onCommitted(),super.destroy()}},fL=class a${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new a$;return this._values.forEach((s,a)=>{e&&e.has(a)||i.set(a,ot(s))}),i}get(e){return this._values.get(e)}originOf(){return St.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function Pf(t,e,i){return t!==void 0}function q4(t,e,i,s){return t!==void 0&&(!(i==null&&t.observerObject.flags&Ce.NonNullable)||(s.lifecycle,jo.INITIALIZING,!1))}function yL(t){return t&&typeof t.destroy=="function"}mt.getLogger("esri.core.accessorSupport.Properties");let mL=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=jo.INITIALIZING,this.store=new fL,this._origin=St.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const a=new U4(s,i[s]);this.propertiesByName.set(s,a)}this.metadatas=i}initialize(){this.lifecycle=jo.CONSTRUCTING}constructed(){this.lifecycle=jo.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const s=this.internalGet(e);s&&yL(s)&&(s.destroy(),~i.observerObject.flags&Ce.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==jo.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);Wt(i.observerObject);const s=this.store;return s.has(e)?s.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const s=this.propertiesByName.get(e);if(s!==void 0&&s.observerObject.flags&Ce.HasDefaultValue)return"defaults"}return vd(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(Pf(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const s=this.propertiesByName.get(e);Pf(s)&&this._internalSet(s,i)}getDependsInfo(e,i,s){const a=this.propertiesByName.get(i);if(!Pf(a))return"";const d=new Set,y=Bo({onObservableAccessed:_=>d.add(_),onTrackingEnd:()=>{}},()=>{var _;return(_=a.metadata.get)==null?void 0:_.call(e)});let m=`${s}${e.declaredClass.split(".").pop()}.${i}: ${y}
`;if(d.size===0)return m;s+="  ";for(const _ of d)_ instanceof U4&&(m+=`${s}${_.propertyName}: undefined
`);return m}setAtOrigin(e,i,s){const a=this.propertiesByName.get(e);if(Pf(a))return this._setAtOrigin(a,i,s)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.observerObject.flags&Ce.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e),s=i==null?void 0:i.observerObject;s&&s.flags&Ce.Overriden&&(s.flags&=~Ce.Overriden,i.notifyChange())}override(e,i){const s=this.propertiesByName.get(e);if(!q4(s,e,i,this))return;const a=s.metadata.cast;if(a){const d=this._cast(a,i),{valid:y,value:m}=d;if(Av.release(d),!y)return;i=m}s.observerObject.flags|=Ce.Overriden,this._internalSet(s,i)}set(e,i){const s=this.propertiesByName.get(e);if(!q4(s,e,i,this))return;const a=s.metadata.cast;if(a){const y=this._cast(a,i),{valid:m,value:_}=y;if(Av.release(y),!m)return;i=_}const d=s.metadata.set;d?d.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(e){this._origin=xr(e)}getDefaultOrigin(){return vd(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const s=this.lifecycle!==jo.INITIALIZING?this._origin:St.DEFAULTS;this._setAtOrigin(e,i,s)}_setAtOrigin(e,i,s){const a=this.store,d=e.propertyName;a.has(d,s)&&c5(i,a.get(d))&&~e.observerObject.flags&Ce.Overriden&&s===a.originOf(d)||(e.invalidate(),a.set(d,i,s),e.commit(),n$(this.host,e))}_cast(e,i){const s=Av.acquire();return s.valid=!0,s.value=i,e&&(s.value=e.call(this.host,i,s)),s}},gL=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Av=new Al(gL);function vL(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,s)=>s===""?"$":(Jd(s,e)??"").toString())}let l$=class{constructor(e,i,s){this.name=e,this.details=s,this.message=(i&&vL(i,s))??""}toString(){return"["+this.name+"]: "+this.message}},lt=class h$ extends l${constructor(e,i,s){super(e,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ot(i)}catch{return"[object]"}}))}}catch(e){throw mt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new h$(e.name,e.message,e.details)}};lt.prototype.type="error";function Xy(t,e,i){if(t&&e)if(typeof e=="object")for(const s of Object.getOwnPropertyNames(e))Xy(t,s,e[s]);else{if(e.includes(".")){const a=e.split("."),d=a.splice(a.length-1,1)[0];return void Xy(Yy(t,a),d,i)}const s=t.__accessor__;s!=null&&bL(e,s),t[e]=i}}function bL(t,e){if(at("esri-unknown-property-errors")&&!wL(t,e))throw new lt("set:unknown-property",_L(t,e))}function wL(t,e){return e.metadatas[t]!=null}function _L(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let xL;function SL(){return xL}let u$=class extends Al{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=UN(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const Cf=[];function Qy(t){Cf.push(t),Cf.length===1&&queueMicrotask(()=>{const e=Cf.slice();Cf.length=0;for(const i of e)i()})}let Gp=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var lb;(function(t){const e=(d,y,m,_)=>{let S=y,I=y;const A=m>>>1,P=d[S-1];for(;I<=A;){I=S<<1,I<m&&_(d[I-1],d[I])<0&&++I;const L=d[I-1];if(_(L,P)<=0)break;d[S-1]=L,S=I}d[S-1]=P},i=(d,y)=>d<y?-1:d>y?1:0;function s(d,y,m,_){y===void 0&&(y=0),m===void 0&&(m=d.length),_===void 0&&(_=i);for(let I=m>>>1;I>y;I--)e(d,I,m,_);const S=y+1;for(let I=m-1;I>y;I--){const A=d[y];d[y]=d[I],d[I]=A,e(d,S,I,_)}}function*a(d,y,m,_){y===void 0&&(y=0),m===void 0&&(m=d.length),_===void 0&&(_=i);for(let I=m>>>1;I>y;I--)e(d,I,m,_),yield;const S=y+1;for(let I=m-1;I>y;I--){const A=d[y];d[y]=d[I],d[I]=A,e(d,S,I,_),yield}}t.sort=s,t.iterableSort=a})(lb||(lb={}));const B4=lb,$L=1.5,TL=1.1;let gl=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new j8,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>H4(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let s=0;s<this._length;s++){const a=this.data[s];e(a)&&i.push(a)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const s=this.data.indexOf(e,i);return s!==-1&&s<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let s=0;s<i;s++)this.data[this._length++]=e[s]}fill(e,i){for(let s=0;s<i;s++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,H4(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=nb(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(nb(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,s){this.length=WN(this.data,e,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const s=this.data[e];this.data[e]=this.data[i],this.data[i]=s}sort(e){B4.sort(this.data,0,this.length,e)}iterableSort(e){return B4.iterableSort(this.data,0,this.length,e)}some(e,i){for(let s=0;s<this.length;++s)if(e.call(i,this.data[s],s,this.data))return!0;return!1}find(e,i){for(let s=0;s<this.length;++s){const a=this.data[s];if(e.call(i,a,s))return a}}filterInPlace(e,i){let s=0;for(let a=0;a<this._length;++a){const d=this.data[a];e.call(i,d,a,this.data)&&(this.data[a]=this.data[s],this.data[s]=d,s++)}if(this._deallocator)for(let a=s;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=s,this._shrink(),this}forAll(e,i){const s=this.length,a=this.data;for(let d=0;d<s;++d)e.call(i,a[d],d,a)}forEach(e,i){for(let s=0;s<this.length;++s)e.call(i,this.data[s],s,this.data)}map(e,i){const s=new Array(this.length);for(let a=0;a<this.length;++a)s[a]=e.call(i,this.data[a],a,this.data);return s}reduce(e,i){let s=i;for(let a=0;a<this.length;++a)s=e(s,this.data[a],a,this.data);return s}has(e){const i=this.length,s=this.data;for(let a=0;a<i;++a)if(s[a]===e)return!0;return!1}};function H4(t){t.data.length>$L*t.length&&(t.data.length=Math.floor(t.length*TL))}function ML(t){return{setTimeout:(e,i)=>{const s=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(s)}}}}const Zc=ML(globalThis);function Tg(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function Mg(t,e,i){if(!Tg(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const s=e.slice();for(const a of s)t.addEventListener(a,i);return{remove(){for(const a of s)t.removeEventListener(a,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function c$(t,e,i){if(!Tg(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const s=Mg(t,e,a=>{s.remove(),i.call(t,a)});return{remove(){s.remove()}}}const EL={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function p$({key:t}){return EL[t]||t}function ei(t="Aborted"){return new lt("AbortError",t)}function Ke(t,e="Aborted"){if(Ms(t))throw ei(e)}function Eg(t){return t!=null?"aborted"in t?t:t.signal:t}function Ms(t){const e=Eg(t);return e!=null&&e.aborted}function on(t){if(Qi(t))throw t}function W4(t){if(!Qi(t))throw t}function Xr(t,e){const i=Eg(t);if(i!=null){if(!i.aborted)return c$(i,"abort",()=>e());e()}}function f5(t,e){const i=Eg(t);if(i!=null)return Ke(i),c$(i,"abort",()=>e(ei()))}function oa(t,e){return Eg(e)==null?t:new Promise((i,s)=>{let a=Xr(e,()=>s(ei()));const d=()=>a=si(a);t.then(d,d),t.then(i,s)})}function Qi(t){return(t==null?void 0:t.name)==="AbortError"}async function hb(t){try{return await t}catch(e){if(!Qi(e))throw e;return}}async function mu(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),s=i.map(y=>t[y]),a=await mu(s),d={};return i.map((y,m)=>d[y]=a[m]),d}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(s,a)=>{const d=i[a];return d.status==="fulfilled"?{promise:s,value:d.value}:{promise:s,error:d.reason}}))}async function IL(t){return(await mu(t)).filter(e=>!!e.value).map(e=>e.value)}function d$(t,e=void 0,i){const s=new AbortController;return Xr(i,()=>s.abort()),new Promise((a,d)=>{let y=setTimeout(()=>{y=0,a(e)},t);Xr(s,()=>{y&&(clearTimeout(y),d(ei()))})})}function ta(t){return t&&typeof t.then=="function"}function ub(t){return ta(t)?t:Promise.resolve(t)}function f$(t,e=-1){let i,s,a,d,y=null;const m=(..._)=>{if(i){s=_,d&&d.reject(ei()),d=mn();const P=d.promise;if(y){const L=y;y=null,L.abort()}return P}if(a=d||mn(),d=null,e>0){const P=new AbortController;i=ub(t(..._,P.signal));const L=i;d$(e).then(()=>{i===L&&(d?P.abort():y=P)})}else i=1,i=ub(t(..._));const S=()=>{const P=s;s=a=i=y=null,P!=null&&m(...P)},I=i,A=a;return I.then(S,S),I.then(A.resolve,A.reject),A.promise};return m}function mn(){let t,e;const i=new Promise((a,d)=>{t=a,e=d}),s=a=>{t(a)};return s.resolve=a=>t(a),s.reject=a=>e(a),s.timeout=(a,d)=>Zc.setTimeout(()=>s.reject(d),a),s.promise=i,s}async function tm(t){await Promise.resolve(),Ke(t)}function uut(t){return t}let AL=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},kL=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},cb=0;const _0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},pb=["prepare","preRender","render","postRender","update","finish"],db=[],Zh=new gl;let OL=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const em={frameTasks:Zh,willDispatch:!1,clearFrameTasks:PL,dispatch:g$,executeFrameTasks:CL};function Xc(t){const e=new kL(t);return db.push(e),em.willDispatch||(em.willDispatch=!0,Qy(g$)),e}function Rc(t){const e=new AL(t);return Zh.push(e),im==null&&(cb=performance.now(),im=requestAnimationFrame(y$)),new OL(e)}let im=null;function PL(t=!1){Zh.forAll(e=>{e.removed=!0}),t&&m$()}function y$(){const t=performance.now();im=null,im=Zh.length>0?requestAnimationFrame(y$):null,em.executeFrameTasks(t)}function CL(t){const e=t-cb;cb=t;const i=1e3/60,s=Math.max(0,e-i);_0.time=t,_0.frameDuration=i-s;for(let a=0;a<pb.length;a++){const d=performance.now(),y=pb[a];Zh.forAll(m=>{var _;m.paused||m.removed||(a===0&&m.ticks++,m.phases[y]&&(_0.elapsedFrameTime=performance.now()-t,_0.deltaTime=m.ticks===0?0:e,(_=m.phases[y])==null||_.call(m,_0)))}),LL[a].record(performance.now()-d)}m$(),RL.record(performance.now()-t)}const Nf=new gl;function m$(){Zh.forAll(t=>{t.removed&&Nf.push(t)}),Zh.removeUnorderedMany(Nf.data,Nf.length),Nf.clear()}function g$(){for(;db.length;){const t=db.shift();t.isActive&&t.callback()}em.willDispatch=!1}function NL(t=1,e){const i=mn(),s=()=>{Ms(e)?i.reject(ei()):t===0?i():(--t,Qy(()=>s()))};return s(),i.promise}const LL=pb.map(t=>new Gp(t)),RL=new Gp("total");function jL(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let DL=0;function Up(){return++DL}let Ig=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new FL(e),J4.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;J4.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,s=this._observerObject;for(let a=0;a<i.length;++a)e.push(i[a].observe(s));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},FL=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=zL}};const J4=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function zL(){}let xc=!1;const rm=[];function v$(t,e){let i=new Ig(d),s=null,a=!1;function d(){if(!i||a)return;if(xc)return void _$(d);const m=s;i.clear(),xc=!0,a=!0,s=Bo(i,t),a=!1,xc=!1,e(s,m),x$()}function y(){i&&(i.destroy(),i=null,s=null)}return a=!0,s=Bo(i,t),a=!1,{remove:y}}function b$(t,e){let i=new Ig(a),s=null;function a(){e(s,y)}function d(){i&&(i.destroy(),i=null),s=null}function y(){return i?(i.clear(),s=Bo(i,t),s):null}return y(),{remove:d}}function w$(t){let e=new Ig(s),i=!1;function s(){e&&!i&&(xc?_$(s):(e.clear(),xc=!0,i=!0,Bo(e,t),i=!1,xc=!1,x$()))}function a(){e&&(e.destroy(),e=null)}return i=!0,Bo(e,t),i=!1,{remove:a}}function _$(t){rm.includes(t)||rm.unshift(t)}function x$(){for(;rm.length;)rm.pop()()}var qp;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(qp||(qp={}));let bd=class{constructor(){this.uid=Up(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,s,a,d){return this.pool.acquire(qp.Untracked,e,i,s,a,d,c5)}static acquireTracked(e,i,s,a){return this.pool.acquire(qp.Tracked,e,i,s,null,null,a)}notify(e,i){this.type===qp.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,s,a,d,y,m){this.uid=Up(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=s,this.getValue=a,this.target=d,this.path=y,this.equals=m}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Up(),this.removed=!0}};bd.pool=new u$(bd);const z1=new _r,zo=new Set;let sm;function nm(t){zo.delete(t),zo.add(t),sm||(sm=Xc(UL))}function VL(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function GL(t){for(const e of zo.values())e.target===t&&(e.removed=!0)}function UL(){let t=10;for(;sm&&t--;){sm=null;const e=qL(),i=z1.acquire();for(const s of e){const a=s.uid;VL(s),a===s.uid&&s.removed&&i.push(s)}for(const s of zo)s.removed&&(i.push(s),zo.delete(s));for(const s of i)bd.pool.release(s);z1.release(i),z1.release(e),fb.forEach(s=>s())}}function qL(){const t=z1.acquire();t.length=zo.size;let e=0;for(const i of zo)t[e]=i,++e;return zo.clear(),t}const fb=new Set;function BL(t){return fb.add(t),{remove(){fb.delete(t)}}}function HL(t,e,i){let s=K8(t,e,i,(a,d,y)=>{let m,_,S=b$(()=>Hd(a,d),(I,A)=>{a.__accessor__.destroyed||m&&m.uid!==_?s.remove():(m||(m=bd.acquireUntracked(I,y,A,a,d),_=m.uid),nm(m))});return{remove:Y8(()=>{S.remove(),m&&(m.uid!==_||m.removed||(m.removed=!0,nm(m)),m=null),s=S=null})}});return s}function WL(t,e,i){const s=K8(t,e,i,(a,d,y)=>{let m=!1;return v$(()=>Hd(a,d),(_,S)=>{a.__accessor__.destroyed?s.remove():m||(m=!0,c5(S,_)||y.call(a,_,S,d,a),m=!1)})});return s}function JL(t,e,i,s=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:s?WL(t,e,i):HL(t,e,i)}function KL(t,e,i){let s,a,d=b$(t,(y,m)=>{s&&s.uid!==a?d.remove():(s||(s=bd.acquireTracked(y,e,m,i),a=s.uid),nm(s))});return{remove:Y8(()=>{d.remove(),s&&(s.uid!==a||s.removed||(s.removed=!0,nm(s)),s=null),d=null})}}function YL(t,e,i){let s=!1;return v$(t,(a,d)=>{s||(s=!0,i(d,a)||e(a,d),s=!1)})}function ZL(t,e,i=!1,s=W8){return i?YL(t,e,s):KL(t,e,s)}function K4(t){return jL(zo,e=>e.oldValue===t)}function Ag(t,e){for(const[i,s]of t)if(e(s,i))return!0;return!1}function S$(t,e,i){const s=t.get(e);if(s!==void 0)return s;const a=i();return t.set(e,a),a}const Sc=mt.getLogger("esri.core.accessorSupport.ensureTypes");function XL(t){return t==null?t:new Date(t)}function QL(t){return t==null?t:!!t}function Kd(t){return t==null?t:t.toString()}function ws(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function kg(t){return t==null?t:Math.round(parseFloat(t))}function $$(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function om(t,e){return e!=null&&t&&!(e instanceof t)}function T$(t){return t&&"isCollection"in t}function Y4(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function tR(t,e){if(!e||!e.constructor||!T$(e.constructor))return yb(t,e)?e:new t(e);const i=Y4(t.prototype.itemType),s=Y4(e.constructor.prototype.itemType);return i?s?i===s?e:i.prototype.isPrototypeOf(s.prototype)?new t(e):(yb(t,e),e):new t(e):e}function yb(t,e){return!!$$(e)&&(Sc.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+Og(t)+"'"),!0)}function Xh(t,e){return e==null?e:T$(t)?tR(t,e):om(t,e)?yb(t,e)?e:new t(e):e}function Og(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const eR=new WeakMap;function iR(t){switch(t){case Number:return ws;case Ee:return kg;case Boolean:return QL;case String:return Kd;case Date:return XL;default:return S$(eR,t,()=>Xh.bind(null,t))}}function ki(t,e){const i=iR(t);return arguments.length===1?i:i(e)}function wd(t,e,i){return arguments.length===1?wd.bind(null,t):e&&(Array.isArray(e)?e.map(s=>t(s,i)):[t(e,i)])}function rR(t,e){return arguments.length===1?wd(i=>ki(t,i)):wd(i=>ki(t,i),e)}function M$(t,e,i){return e!==0&&Array.isArray(i)?i.map(s=>M$(t,e-1,s)):t(i)}function am(t,e,i){if(arguments.length===2)return d=>am(t,e,d);if(!i)return i;i=M$(t,e,i);let s=e,a=i;for(;s>0&&Array.isArray(a);)s--,a=a[0];if(a!==void 0)for(let d=0;d<s;d++)i=[i];return i}function sR(t,e,i){return arguments.length===2?am(s=>ki(t,s),e):am(s=>ki(t,s),e,i)}function E$(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function mb(t,e){if(arguments.length===2)return mb(t).call(null,e);const i=new Set,s=t.filter(m=>typeof m!="function"),a=t.filter(m=>typeof m=="function");for(const m of t)typeof m!="string"&&typeof m!="number"||i.add(m);let d=null,y=null;return(m,_)=>{if(m==null)return m;const S=typeof m,I=S==="string"||S==="number";return I&&(i.has(m)||a.some(A=>S==="string"&&A===String||S==="number"&&A===Number))||S==="object"&&a.some(A=>!om(m,A))?m:(I&&s.length?(d||(d=s.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),Sc.error("Accessor#set",`'${m}' is not a valid value for this property, only the following values are valid: ${d}`)):typeof m=="object"&&a.length?(y||(y=a.map(A=>Og(A)).join(", ")),Sc.error("Accessor#set",`'${m}' is not a valid value for this property, value must be one of ${y}`)):Sc.error("Accessor#set",`'${m}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function Ho(t,e){if(arguments.length===2)return Ho(t).call(null,e);const i={},s=[],a=[];for(const _ in t.typeMap){const S=t.typeMap[_];i[_]=ki(S),s.push(Og(S)),a.push(_)}const d=()=>`'${s.join("', '")}'`,y=()=>`'${a.join("', '")}'`,m=typeof t.key=="string"?_=>_[t.key]:t.key;return _=>{if(t.base&&!om(t.base,_)||_==null)return _;const S=m(_)||t.defaultKeyValue,I=i[S];if(!I)return Sc.error("Accessor#set",`Invalid property value, value needs to be one of ${d()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!om(t.typeMap[S],_))return _;if(typeof t.key=="string"&&!$$(_)){const A={};for(const P in _)P!==t.key&&(A[P]=_[P]);return I(A)}return I(_)}}let Ee=class{};const vut={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function nR(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function I$(t){switch(t.type){case"native":return ki(t.value);case"array":return wd(I$(t.value));case"one-of":return oR(t);default:return null}}function oR(t){let e=null;return(i,s)=>vb(i,t)?i:(e==null&&(e=gb(t)),Sc.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),s&&(s.valid=!1),null)}function gb(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ee:return"integer";case Date:return"date";default:return Og(t.value)}case"array":return`array of ${gb(t.value)}`;case"one-of":{const e=t.values.map(i=>gb(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function vb(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ee:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!vb(i,e.value));case"one-of":return e.values.some(i=>vb(t,i))}}function T(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(e,i),a=Sg(e,i);s&&(s.get||s.set?(a.get=s.get||a.get,a.set=s.set||a.set):"value"in s&&("value"in t&&mt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),a.value=t.value=s.value)),t.readOnly!=null&&(a.readOnly=t.readOnly);const d=t.aliasOf;if(d){const _=typeof d=="string"?d:d.source,S=typeof d=="string"?null:d.overridable===!0;let I;a.dependsOn=[_],a.get=function(){let A=Yy(this,_);if(typeof A=="function"){I||(I=_.split(".").slice(0,-1).join("."));const P=Yy(this,I);P&&(A=A.bind(P))}return A},a.readOnly||(a.set=S?function(A){this._override(i,A)}:function(A){Xy(this,_,A)})}const y=t.type,m=t.types;a.cast||(y?a.cast=aR(y):m&&(Array.isArray(m)?a.cast=wd(Ho(m[0])):a.cast=Ho(m))),sL(a,t),t.range&&(a.cast=lR(a.cast,t.range))}}function A$(t,e,i){const s=Sg(t,i);s.json||(s.json={});let a=s.json;return e!==void 0&&(a.origins||(a.origins={}),a.origins[e]||(a.origins[e]={}),a=a.origins[e]),a}function aR(t){let e=0,i=t;if(nR(t))return I$(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const s=i;if(E$(s))return e===0?mb(s):am(mb(s),e);if(e===1)return rR(s);if(e>1)return sR(s,e);const a=t;return a.from?a.from:ki(a)}function lR(t,e){return i=>{let s=+t(i);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function hR(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(e[s]){const a=e[s];i[s].forEach(d=>{e[d]=a}),delete e[s]}}}let gn=class extends l${constructor(e,i,s){super(e,i,s)}};gn.prototype.type="warning";function k$(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const bb=mt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Z4(t,e,i){var s,a;t&&(!i&&!e.read||(s=e.read)!=null&&s.reader||((a=e.read)==null?void 0:a.enabled)===!1||pR(t)&&yu("read.reader",Yd(t),e))}function Yd(t){var i,s;const e=t.ndimArray??0;if(e>1)return cR(t);if(e===1)return X4(t);if("type"in t&&P$(t.type)){const a=(s=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:s.Type,d=X4(typeof a=="function"?{type:a}:{types:a});return(y,m,_)=>{const S=d(y,m,_);return S&&new t.type(S)}}return y5(t)}function y5(t){return"type"in t?uR(t.type):dR(t.types)}function uR(t){return t.prototype.read?(e,i,s)=>{if(e==null)return e;const a=typeof e;if(a!=="object")return void bb.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${a}'`);const d=new t;return d.read(e,s),d}:t.fromJSON}function O$(t,e,i,s){return s!==0&&Array.isArray(e)?e.map(a=>O$(t,a,i,s-1)):t(e,void 0,i)}function cR(t){const e=y5(t),i=O$.bind(null,e),s=t.ndimArray??0;return(a,d,y)=>{if(a==null)return a;a=i(a,y,s);let m=s,_=a;for(;m>0&&Array.isArray(_);)m--,_=_[0];if(_!==void 0)for(let S=0;S<m;S++)a=[a];return a}}function X4(t){const e=y5(t);return(i,s,a)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const m of i){const _=e(m,void 0,a);_!==void 0&&y.push(_)}return y}const d=e(i,void 0,a);return d!==void 0?[d]:void 0}}function P$(t){if(!k$(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?m5(e.Type):C$(e.Type))}function pR(t){return"types"in t?C$(t.types):m5(t.type)}function m5(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||P$(t))}function C$(t){for(const e in t.typeMap)if(!m5(t.typeMap[e]))return!1;return!0}function dR(t){let e=null;const i=t.errorContext??"type";return(s,a,d)=>{if(s==null)return s;const y=typeof s;if(y!=="object")return void bb.error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);e||(e=fR(t));const m=t.key;if(typeof m!="string")return;const _=s[m],S=_?e[_]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!S){const A=`Type '${_||"unknown"}' is not supported`;return d&&d.messages&&s&&d.messages.push(new gn(`${i}:unsupported`,A,{definition:s,context:d})),void bb.error(A)}const I=new S;return I.read(s,d),I}}function fR(t){var i,s;const e={};for(const a in t.typeMap){const d=t.typeMap[a],y=Wd(d.prototype);if(typeof t.key=="function")continue;const m=y[t.key];if(!m)continue;(i=m.json)!=null&&i.type&&Array.isArray(m.json.type)&&m.json.type.length===1&&typeof m.json.type[0]=="string"&&(e[m.json.type[0]]=d);const _=(s=m.json)==null?void 0:s.write;if(!_||!_.writer){e[a]=d;continue}const S=_.target,I=typeof S=="string"?S:t.key,A={};_.writer(a,A,I),A[I]&&(e[A[I]]=d)}return e}function yR(t){if(t.json||(t.json={}),t6(t.json),e6(t.json),Q4(t.json),t.json.origins)for(const e in t.json.origins)t6(t.json.origins[e]),e6(t.json.origins[e]),Q4(t.json.origins[e]);return!0}function Q4(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function t6(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function e6(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function i6(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&k$(t.type))?e.write.writer=vR:i>1?e.write.writer=bR(i):e.types?Array.isArray(e.types)?e.write.writer=gR(e.types[0]):e.write.writer=mR(e.types):e.write.writer=_d}function mR(t){return(e,i,s,a)=>e?N$(e,t,a)?_d(e,i,s,a):void 0:_d(e,i,s,a)}function N$(t,e,i){for(const s in e.typeMap)if(t instanceof e.typeMap[s])return!0;if(i!=null&&i.messages){const s=e.errorContext??"type",a=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new lt(`${s}:unsupported`,a,{definition:t,context:i})),mt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(a)}return!1}function gR(t){return(e,i,s,a)=>!e||!Array.isArray(e)?_d(e,i,s,a):_d(e.filter(d=>N$(d,t,a)),i,s,a)}function _d(t,e,i,s){yu(i,lm(t,s),e)}function lm(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?hm(t):t}function hm(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function vR(t,e,i,s){let a;t===null?a=null:t&&typeof t.map=="function"?(a=t.map(d=>lm(d,s)),typeof a.toArray=="function"&&(a=a.toArray())):a=[lm(t,s)],yu(i,a,e)}function L$(t,e,i){return i!==0&&Array.isArray(t)?t.map(s=>L$(s,e,i-1)):lm(t,e)}function bR(t){return(e,i,s,a)=>{let d;if(e===null)d=null;else{d=L$(e,a,t);let y=t,m=d;for(;y>0&&Array.isArray(m);)y--,m=m[0];if(m!==void 0)for(let _=0;_<y;_++)d=[d]}yu(s,d,i)}}function wR(t,e){return g5(t,"any",e==null?void 0:e.origin)}function wb(t,e){return g5(t,"read",e==null?void 0:e.origin)}function R$(t,e){return g5(t,"write",e==null?void 0:e.origin)}function g5(t,e,i){let s=t==null?void 0:t.json;if(s!=null&&s.origins&&i){let a;a=i==="link-chart"?s.origins[i]&&(e==="any"||e in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],a&&(e==="any"||e in a)&&(s=a)}return s}function _R(t){const e=xR(t);if(t.json.origins)for(const i in t.json.origins){const s=t.json.origins[i],a=s.types?SR(s):e;Z4(a,s,!1),s.types&&!s.write&&t.json.write&&t.json.write.enabled&&(s.write={...t.json.write}),i6(a,s)}Z4(e,t.json,!0),i6(e,t.json)}function xR(t){return t.json.types?_b(t.json):t.type?j$(t):_b(t)}function SR(t){return t.type?j$(t):_b(t)}function j$(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!E$(i);)i=i[0],e++;return{type:i,ndimArray:e}}function _b(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function $R(t){yR(t)&&(hR(t),_R(t))}const kv=new Set,Ov=new Set;function W(t){return e=>{e.prototype.declaredClass=t,MR(e);const i=[],s=[];let a=e.prototype;for(;a;)a.hasOwnProperty("initialize")&&!kv.has(a.initialize)&&(kv.add(a.initialize),i.push(a.initialize)),a.hasOwnProperty("destroy")&&!Ov.has(a.destroy)&&(Ov.add(a.destroy),s.push(a.destroy)),a=Object.getPrototypeOf(a);kv.clear(),Ov.clear();class d extends e{constructor(...m){if(super(...m),this.constructor===d&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),s.length){let _=!1;const S=this[R8];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0,S.call(this);for(let I=0;I<s.length;I++)s[I].call(this)}}})}this.postscript(...m)}}}return d.__accessorMetadata__=Wd(e.prototype),d.prototype.declaredClass=t,d}}function TR(t,e){return e.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s===void 0)return;Wt(s.observerObject);const a=i.store;return a.has(t)?a.get(t):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s!==void 0)return s.getComputed(i)}}function MR(t){const e=t.prototype,i=Wd(e),s={};for(const a of Object.getOwnPropertyNames(i)){const d=i[a];$R(d),s[a]={enumerable:!0,configurable:!0,get:TR(a,d),set(y){const m=this.__accessor__;if(m!==void 0){if(!Object.isFrozen(this)){if(m.initialized&&d.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${a}' of ${this.declaredClass}`);if(m.lifecycle===jo.CONSTRUCTED&&d.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${a}' of ${this.declaredClass}`);m.set(a,y)}}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(t.prototype,s)}var D$,F$;function ER(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Sa=Symbol("Accessor-Handles"),xb=Symbol("Accessor-Initialized");let Rt=class z${static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:a}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const d=this;class y extends d{constructor(..._){super(..._),this.inherited=null,a&&a.apply(this,_)}}Wd(y.prototype);for(const m in e){const _=e[m];y.prototype[m]=typeof _=="function"?function(...S){const I=this.inherited;let A;this.inherited=function(...P){if(d.prototype[m])return d.prototype[m].apply(this,P)};try{A=_.apply(this,S)}catch(P){throw this.inherited=I,P}return this.inherited=I,A}:e[m]}for(const m in i){const _=ER(i[m]);T(_)(y.prototype,m)}return W(s)(y)}constructor(...e){if(this[D$]=null,this[F$]=!1,this.constructor===z$)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new mL(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e)),r6.register(this,i.propertiesByName,this)}postscript(e){const i=this.__accessor__,s=i.ctorArgs||e;i.initialize(),s&&(this.set(s),i.ctorArgs=null),i.constructed(),this.initialize(),this[xb]=!0}initialize(){}[R8](){this[Sa]=Je(this[Sa])}destroy(){var e;this.destroyed||(r6.unregister(this),GL(this),this.__accessor__.destroy(),(e=SL())==null||e.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[xb]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Yy(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return Xy(this,e,i),this}watch(e,i,s){return JL(this,e,i,s)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const a=Array.isArray(e)?e:[e];for(const d of a)d.remove();return}let s=this[Sa];s==null&&(s=this[Sa]=new Qo),s.add(e,i)}removeHandles(e){const i=this[Sa];i!=null&&i.remove(e)}removeAllHandles(){const e=this[Sa];e!=null&&e.removeAll()}hasHandles(e){const i=this[Sa];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};D$=Sa,F$=xb;const r6=new FinalizationRegistry(t=>{for(const e of t.values())e.destroy()});let V1=class V${constructor(){this._emitter=new V$.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(a=null){this._target=a,this._listenersMap=null}clear(){var a;(a=this._listenersMap)==null||a.clear(),this._listenersMap=null}destroy(){this.clear()}emit(a,d){const y=this._listenersMap&&this._listenersMap.get(a);if(!y)return!1;const m=this._target||this;return[...y].forEach(_=>{_.call(m,d)}),y.length>0}on(a,d){if(Array.isArray(a)){const m=a.map(_=>this.on(_,d));return bg(m)}if(a.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(a)||[];return y.push(d),this._listenersMap.set(a,y),{remove:()=>{const m=this._listenersMap&&this._listenersMap.get(a)||[],_=m.indexOf(d);_>=0&&m.splice(_,1)}}}once(a,d){const y=this.on(a,m=>{y.remove(),d.call(null,m)});return y}hasEventListener(a){const d=this._listenersMap&&this._listenersMap.get(a);return d!=null&&d.length>0}}t.EventEmitter=e,t.EventedMixin=s=>{let a=class extends s{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(d,y){return this._emitter.emit(d,y)}on(d,y){return this._emitter.on(d,y)}once(d,y){return this._emitter.once(d,y)}hasEventListener(d){return this._emitter.hasEventListener(d)}};return a=w([W("esri.core.Evented")],a),a};let i=class extends Rt{constructor(){super(...arguments),this._emitter=new V1.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,a){return this._emitter.emit(s,a)}on(s,a){return this._emitter.on(s,a)}once(s,a){return this._emitter.once(s,a)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=w([W("esri.core.Evented")],i),t.EventedAccessor=i})(V1||(V1={}));const kl=V1;var Te;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Te||(Te={}));function G$(t){return(e,i)=>{e[i]=t}}let Pg=class extends i${notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}};var Co;let IR=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const rs=new Al(IR,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),AR=()=>{};function Pv(t){return t?t instanceof Ah?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Cv(t){if(t&&t.length)return t[0]}function kR(t,e,i,s){const a=Math.min(t.length-i,e.length-s);let d=0;for(;d<a&&t[i+d]===e[s+d];)d++;return d}function U$(t,e,i,s){e&&e.forEach((a,d,y)=>{t.push(a),U$(t,i.call(s,a,d,y),i,s)})}const aa=new Set,la=new Set,ha=new Set,Nv=new Map;let OR=0,Ah=Co=class extends kl.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Co}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new Pg,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:OR++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Co?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Wt(this._observable),this._items}set items(t){this._emitBeforeChanges(Te.ADD)||(this._splice(0,this.length,Pv(t)),this._emitAfterChanges(Te.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,s={removed:!1,callback:e};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=AR,s.removed=!0,i.splice(i.indexOf(s),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(Wt(this._observable),this._emitBeforeChanges(Te.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Te.ADD),this}addMany(t,e=this._items.length){if(Wt(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Te.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,Pv(t)),this._emitAfterChanges(Te.ADD),this}at(t){if(Wt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Wt(this._observable),!this.length||this._emitBeforeChanges(Te.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Te.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Wt(this._observable),this._createNewInstance({items:this._items.map(ot)})}concat(...t){Wt(this._observable);const e=t.map(Pv);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Wt(this._observable),!this.length||this._emitBeforeChanges(Te.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let a=0;a<s;a++)t.call(e,i[a],a,i);this._emitAfterChanges(Te.REMOVE)}every(t,e){return Wt(this._observable),this._items.every(t,e)}filter(t,e){let i;return Wt(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Wt(this._observable),this._items.find(t,e)}findIndex(t,e){return Wt(this._observable),this._items.findIndex(t,e)}flatten(t,e){Wt(this._observable);const i=[];return U$(i,this,t,e),new Co(i)}forEach(t,e){return Wt(this._observable),this._items.forEach(t,e)}getItemAt(t){return Wt(this._observable),this._items[t]}getNextIndex(t){Wt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Wt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Wt(this._observable),this._items.indexOf(t,e)}join(t=","){return Wt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Wt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Wt(this._observable);const i=this._items.map(t,e);return new Co({items:i})}reorder(t,e=this.length-1){Wt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Te.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Te.MOVE)}return t}}pop(){if(Wt(this._observable),!this.length||this._emitBeforeChanges(Te.REMOVE))return;const t=Cv(this._splice(this.length-1,1));return this._emitAfterChanges(Te.REMOVE),t}push(...t){return Wt(this._observable),this._emitBeforeChanges(Te.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Te.ADD)),this.length}reduce(t,e){Wt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Wt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Wt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Wt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Te.REMOVE))return;const e=Cv(this._splice(t,1));return this._emitAfterChanges(Te.REMOVE),e}removeMany(t){if(Wt(this._observable),!t||!t.length||this._emitBeforeChanges(Te.REMOVE))return[];const e=t instanceof Co?t.toArray():t,i=this._items,s=[],a=e.length;for(let d=0;d<a;d++){const y=e[d],m=i.indexOf(y);if(m>-1){const _=1+kR(e,i,d+1,m+1),S=this._splice(m,_);S&&S.length>0&&s.push.apply(s,S),d+=_-1}}return this._emitAfterChanges(Te.REMOVE),s}reverse(){if(Wt(this._observable),this._emitBeforeChanges(Te.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Te.MOVE),this}shift(){if(Wt(this._observable),!this.length||this._emitBeforeChanges(Te.REMOVE))return;const t=Cv(this._splice(0,1));return this._emitAfterChanges(Te.REMOVE),t}slice(t=0,e=this.length){return Wt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Wt(this._observable),this._items.some(t,e)}sort(t){if(Wt(this._observable),!this.length||this._emitBeforeChanges(Te.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Te.MOVE),this}splice(t,e,...i){Wt(this._observable);const s=(e?Te.REMOVE:0)|(i.length?Te.ADD:0);if(this._emitBeforeChanges(s))return[];const a=this._splice(t,e,i)||[];return this._emitAfterChanges(s),a}toArray(){return Wt(this._observable),this._items.slice()}toJSON(){return Wt(this._observable),this.toArray()}toLocaleString(){return Wt(this._observable),this._items.toLocaleString()}toString(){return Wt(this._observable),this._items.toString()}unshift(...t){return Wt(this._observable),!t.length||this._emitBeforeChanges(Te.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Te.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const s=this._items,a=this.itemType;let d,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Xc(()=>this._dispatchChange())),e){if(y=s.splice(t,e),this.hasEventListener("before-remove")){const m=rs.acquire();m.target=this,m.cancellable=!0;for(let _=0,S=y.length;_<S;_++)d=y[_],m.reset(d),this.emit("before-remove",m),m.defaultPrevented&&(y.splice(_,1),s.splice(t,0,d),t+=1,_-=1,S-=1);rs.release(m)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const m=rs.acquire();m.target=this,m.cancellable=!1;const _=y.length;for(let S=0;S<_;S++)m.reset(y[S]),this.emit("after-remove",m);rs.release(m)}}if(i&&i.length){if(a){const I=[];for(const A of i){const P=a.ensureType(A);P==null&&A!=null||I.push(P)}i=I}const m=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),S=t===this.length;if(m||_){const I=rs.acquire();I.target=this,I.cancellable=!0;const A=rs.acquire();A.target=this,A.cancellable=!1;for(const P of i)m?(I.reset(P),this.emit("before-add",I),I.defaultPrevented||(S?s.push(P):s.splice(t++,0,P),this._set("length",s.length),_&&(A.reset(P),this.emit("after-add",A)))):(S?s.push(P):s.splice(t++,0,P),this._set("length",s.length),A.reset(P),this.emit("after-add",A));rs.release(A),rs.release(I)}else{if(S)for(const I of i)s.push(I);else s.splice(t,0,...i);this._set("length",s.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=rs.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,rs.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=rs.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),rs.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;aa.clear(),la.clear(),ha.clear();for(const{added:_,removed:S}of i){if(_)if(ha.size===0&&la.size===0)for(const I of _)aa.add(I);else for(const I of _)la.has(I)?(ha.add(I),la.delete(I)):ha.has(I)||aa.add(I);if(S)if(ha.size===0&&aa.size===0)for(const I of S)la.add(I);else for(const I of S)aa.has(I)?aa.delete(I):(ha.delete(I),la.add(I))}const s=_r.acquire();aa.forEach(_=>{s.push(_)});const a=_r.acquire();la.forEach(_=>{a.push(_)});const d=this._items,y=e.items,m=_r.acquire();if(ha.forEach(_=>{y.indexOf(_)!==d.indexOf(_)&&m.push(_)}),e.listeners&&(s.length||a.length||m.length)){const _={target:this,added:s,removed:a,moved:m},S=e.listeners.length;for(let I=0;I<S;I++){const A=e.listeners[I];A.removed||A.callback.call(this,_)}}_r.release(s),_r.release(a),_r.release(m)}aa.clear(),la.clear(),ha.clear()}};Ah.ofType=t=>{if(!t)return Co;if(Nv.has(t))return Nv.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const s in t.typeMap){const a=t.typeMap[s].prototype.declaredClass;e?e+=` | ${a}`:e=a}let i=class extends Co{};return w([G$({Type:t,ensureType:typeof t=="function"?ki(t):Ho(t)})],i.prototype,"itemType",void 0),i=w([W(`esri.core.Collection<${e}>`)],i),Nv.set(t,i),i},w([T()],Ah.prototype,"length",void 0),w([T()],Ah.prototype,"items",null),Ah=Co=w([W("esri.core.Collection")],Ah);const Vt=Ah;function Qh(t,e,i=Vt){return e||(e=new i),e===t||(e.removeAll(),PR(t)?e.addMany(t):t&&e.add(t)),e}function q$(t){return t}function PR(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const s6=new Set;function CR(t,e,i=!1){i&&s6.has(e)||(i&&s6.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function NR(t,e,i={}){if(at("esri-deprecation-warnings")){const{moduleName:s}=i;um(t,`Property: ${(s?s+"::":"")+e}`,i)}}function um(t,e,i={}){if(at("esri-deprecation-warnings")){const{replacement:s,version:a,see:d,warnOnce:y}=i;let m=e;s&&(m+=`
	🛠️ Replacement: ${s}`),a&&(m+=`
	⚙️ Version: ${a}`),d&&(m+=`
	🔗 See ${d} for more details.`),CR(t,m,y)}}let LR=class B${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new B$;return this._values.forEach((s,a)=>{e&&e.has(a)||i.set(a,ot(s.value),s.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const s=this._values.get(e);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??St.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(s=>{var a;return((a=this._values.get(s))==null?void 0:a.origin)===e})}set(e,i,s){if((s=this._normalizeOrigin(s))===St.DEFAULTS){const a=this._values.get(e);if(a&&a.origin!=null&&a.origin>s)return}this._values.set(e,new RR(i,s))}delete(e,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(e))==null?void 0:s.origin)!==i||this._values.delete(e)}has(e,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(e))==null?void 0:s.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},s)=>e(i,s))}_normalizeOrigin(e){if(e!=null)return e===St.DEFAULTS?e:St.USER}},RR=class{constructor(e,i){this.value=e,this.origin=i}};function H$(t,e,i){e.keys().forEach(a=>{i.set(a,e.get(a),St.DEFAULTS)});const s=t.metadatas;Object.keys(s).forEach(a=>{t.internalGet(a)&&i.set(a,t.internalGet(a),St.DEFAULTS)})}function jR(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const s=t.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&F4(s,i))return!0}else for(const a of s)if(a===e||a.includes(".")&&a.indexOf(e)===0&&F4(a,i))return!0;return!1}function DR(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function FR(t,e,i,s,a){let d=wb(e[i],a);DR(d)&&(t[i]=!0);for(const y of Object.getOwnPropertyNames(e))d=wb(e[y],a),jR(d,i,s)&&(t[y]=!0)}function zR(t,e,i,s){const a=i.metadatas,d=wR(a[e],s),y=d==null?void 0:d.default;if(y===void 0)return;const m=typeof y=="function"?y.call(t,e,s):y;m!==void 0&&i.set(e,m)}const W$={origin:"service"};function J$(t,e,i=W$){if(!e||typeof e!="object")return;const s=Fi(t),a=s.metadatas,d={};for(const y of Object.getOwnPropertyNames(e))FR(d,a,y,e,i);s.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(d)){const m=wb(a[y],i).read,_=m&&m.source;let S;S=_&&typeof _=="string"?Hd(e,_):e[y],m&&m.reader&&(S=m.reader.call(t,S,e,i)),S!==void 0&&s.set(y,S)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(a))d[y]||zR(t,y,s,i)}s.setDefaultOrigin("user")}function VR(t,e,i,s=W$){var d;const a={...s,messages:[]};i(a),(d=a.messages)==null||d.forEach(y=>{y.type!=="warning"||t.loaded?s&&s.messages&&s.messages.push(y):t.loadWarnings.push(y)})}function GR(t,e,i,s,a){var y,m;const d={};return(m=(y=e.write)==null?void 0:y.writer)==null||m.call(t,s,d,i,a),d}function K$(t,e,i,s,a,d){if(!s||!s.write)return!1;const y=t.get(i);if(!a&&s.write.overridePolicy){const m=s.write.overridePolicy.call(t,y,i,d??void 0);m!==void 0&&(a=m)}if(a||(a=s.write),!a||a.enabled===!1)return!1;if((y===null&&!a.allowNull&&!a.writerEnsuresNonNull||y===void 0)&&a.isRequired){const m=new lt("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return m&&d&&d.messages?d.messages.push(m):m&&!d&&mt.getLogger("esri.core.accessorSupport.write").error(m.name,m.message),!1}return!(y===void 0||y===null&&!a.allowNull&&!a.writerEnsuresNonNull||!a.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===St.DEFAULTS)&&UR(t,i,d,s,y)||!a.ignoreOrigin&&d&&d.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<xr(d.origin))}function UR(t,e,i,s,a){const d=s.default;if(d===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(a);if(typeof d=="function"){if(Array.isArray(a)){const y=d.call(t,e,i??void 0);return wg(y,a)}return!1}return d===a}function qR(t,e,i,s){const a=Fi(t),d=a.metadatas,y=R$(d[e],s);return!!y&&K$(t,a,e,y,i,s)}function Y$(t,e,i){var d,y;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return j1(e,t.toJSON(i));const s=Fi(t),a=s.metadatas;for(const m in a){const _=R$(a[m],i);if(!K$(t,s,m,_,void 0,i))continue;const S=t.get(m),I=GR(t,_,_.write&&typeof _.write.target=="string"?_.write.target:m,S,i);Object.keys(I).length>0&&(e=j1(e,I),(y=(d=i==null?void 0:i.resources)==null?void 0:d.pendingOperations)!=null&&y.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>j1(e,I,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:m,oldOrigin:uL(s.store.originOf(m)),newOrigin:i.origin}))}return e}const Zd=t=>{let e=class extends t{constructor(...i){super(...i);const s=Fi(this),a=s.store,d=new LR;s.store=d,H$(s,a,d)}read(i,s){J$(this,i,s)}write(i,s){return Y$(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return BR.call(this,i,s)}};return e=w([W("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function BR(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let gt=class extends Zd(Rt){};gt=w([W("esri.core.JSONSupport")],gt);var Ka;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Ka||(Ka={}));let HR=class{constructor(){this._resolver=mn(),this._status=Ka.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Ka.RESOLVED,this._cleanUp()},()=>{this._status=Ka.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Ka.RESOLVED}isRejected(){return this._status===Ka.REJECTED}isFulfilled(){return this._status!==Ka.PENDING}abort(){this._resolver.reject(ei())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=mn(),i=[...this._resolvingPromises,e.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()},a=>{this.isFulfilled()||this._allPromise!==s||Qi(a)||this._resolver.reject(a)}),e.resolve()}};const v5=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new HR,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then(()=>this).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=w([W("esri.core.Promise")],e),e};let cm=class extends v5(Rt){};cm=w([W("esri.core.Promise")],cm);const WR="not-loaded",JR="loading",KR="failed",n6="loaded",Z$=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const a=this.load.bind(this);this.load=d=>{const y=new Promise((m,_)=>{const S=f5(d,_);this.destroyed&&_(new lt("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(m,_).finally(()=>{S&&S.remove()})});if(this.loadStatus===WR){this._set("loadStatus",JR);const m=this._loadController=new AbortController;a({signal:m.signal}),Xr(m.signal,()=>{this._promiseProps.abort()})}return s(),y}})),this.when(()=>{this._set("loadStatus",n6),this._loadController=null},s=>{this._set("loadStatus",KR),this._set("loadError",s),this._loadController=null})}destroy(){this._loadController=gd(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===n6}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new lt("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return w([T({readOnly:!0})],e.prototype,"loaded",null),w([T({readOnly:!0})],e.prototype,"loadError",void 0),w([T({clonable:!1})],e.prototype,"loadStatus",void 0),w([T({type:[gn],readOnly:!0})],e.prototype,"loadWarnings",null),e=w([W("esri.core.Loadable")],e),e};let q0=class extends Z$(cm){};q0=w([W("esri.core.Loadable")],q0),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=Z$,t.isLoadable=e}(q0||(q0={}));const Wo=q0;function Eut(t,e,i){return mu(t.map((s,a)=>e.apply(i,[s,a])))}async function YR(t,e,i){return(await mu(t.map((s,a)=>e.apply(i,[s,a])))).map(s=>s.value)}function b5(t){return{ok:!0,value:t}}function w5(t){return{ok:!1,error:t}}function ZR(t){return t!=null&&t.ok===!0?t.value:null}function XR(t){return t!=null&&t.ok===!1?t.error:null}async function _5(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return b5(await t)}catch(e){return w5(e)}}async function Iut(t){try{return b5(await t)}catch(e){return on(e),w5(e)}}function x5(t,e){return new $a(t,e)}let $a=class extends Rt{get value(){return ZR(this._result)}get error(){return XR(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=gd(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:s}=this._abortController;this.promise=e(s),this.promise.then(a=>{this._result=b5(a),this._cleanup()},a=>{this._result=w5(a),this._cleanup()}),this._abortHandle=Xr(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=si(this._abortHandle),this._abortController=null}};w([T()],$a.prototype,"value",null),w([T()],$a.prototype,"error",null),w([T()],$a.prototype,"finished",null),w([T()],$a.prototype,"promise",void 0),w([T()],$a.prototype,"_result",void 0),$a=w([W("esri.core.asyncUtils.ReactiveTask")],$a);async function Cg(t,e){return await t.load(),QR(t,e)}async function QR(t,e){const i=[],s=(...d)=>{for(const y of d)y!=null&&(Array.isArray(y)?s(...y):Vt.isCollection(y)?y.forEach(m=>s(m)):Wo.isLoadable(y)&&i.push(y))};e(s);let a=null;if(await YR(i,async d=>{const y=await _5(tj(d)?d.loadAll():d.load());y.ok!==!1||a||(a=y)}),a)throw a.error;return t}function tj(t){return"loadAll"in t&&typeof t.loadAll=="function"}const ej=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ij={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function o6(t){const e=t==null?void 0:t.match(ej);if(!e)return null;const[,i,s,a]=e;if(!i)return null;let d=null,y=null,m=null;const{devext:_,qaext:S,www:I}=ij;if(s)if(d=i,a)switch(a.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:m}=_);break;case"qa":({customBaseUrl:y,portalHostname:m}=S);break;default:return null}else({customBaseUrl:y,portalHostname:m}=I);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:m}=_);break;case"qaext":({customBaseUrl:y,portalHostname:m}=S);break;case"www":({customBaseUrl:y,portalHostname:m}=I);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:m,urlKey:d}}function rj(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function sj(t){const e=atob(t),i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i.buffer}const nj=mt.getLogger("esri.core.urlUtils"),Qc=_e.request,a6="esri/config: esriConfig.request.proxyUrl is not set.",X$=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Q$=/^\s*http:/i,oj=/^\s*https:/i,aj=/^\s*file:/i,lj=/:\d+$/,hj=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,uj=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),cj=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let $c=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(uj);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(cj),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const Lf={},pj=new $c(_e.applicationUrl);let ur=pj;const dj=fj();let S5=dj;const $5=()=>ur,Out=()=>S5;function fj(){const t=ur.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${ur.scheme}://${ur.host}${ur.port!=null?`:${ur.port}`:""}`}${e}`}function er(t){if(!t)return null;const e={path:null,query:null},i=new $c(t),s=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,s),e.query=T5(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function T5(t){const e=t.split("&"),i={};for(const s of e){if(!s)continue;const a=s.indexOf("=");let d,y;a<0?(d=decodeURIComponent(s),y=""):(d=decodeURIComponent(s.slice(0,a)),y=decodeURIComponent(s.slice(a+1)));let m=i[d];typeof m=="string"&&(m=i[d]=[m]),Array.isArray(m)?m.push(y):i[d]=y}return i}function l6(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function wl(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const s=t[i];if(s==null)return"";const a=encodeURIComponent(i)+"=",d=e&&e[i];return d?a+encodeURIComponent(d(s)):Array.isArray(s)?s.map(y=>l6(y)?a+encodeURIComponent(JSON.stringify(y)):a+encodeURIComponent(y)).join("&"):l6(s)?a+encodeURIComponent(JSON.stringify(s)):a+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function yj(t=!1){let e,i=Qc.proxyUrl;if(typeof t=="string"){e=xj(t);const s=Ng(t);s&&(i=s.proxyUrl)}else e=!!t;if(!i)throw nj.warn(a6),new lt("urlutils:proxy-not-set",a6);return e&&Sb()&&(i=k5(i)),er(i)}function Put(t){const e=Ng(t);let i,s;if(e){const a=M5(e.proxyUrl);i=a.path,s=a.query?T5(a.query):null}if(i){const a=er(t);t=i+"?"+a.path;const d=wl({...s,...a.query});d&&(t=`${t}?${d}`)}return t}const x0={path:"",query:""};function M5(t){const e=t.indexOf("?");return e!==-1?(x0.path=t.slice(0,e),x0.query=t.slice(e+1)):(x0.path=t,x0.query=null),x0}function tT(t){return t=(t=dm(t=Ij(t=M5(t).path),!0)).toLowerCase()}function mj(t){const e={proxyUrl:t.proxyUrl,urlPrefix:tT(t.urlPrefix)},i=Qc.proxyRules,s=e.urlPrefix;let a=i.length;for(let d=0;d<i.length;d++){const y=i[d].urlPrefix;if(s.indexOf(y)===0){if(s.length===y.length)return-1;a=d;break}y.indexOf(s)===0&&(a=d+1)}return i.splice(a,0,e),a}function Ng(t){const e=Qc.proxyRules,i=tT(t);for(let s=0;s<e.length;s++)if(i.indexOf(e[s].urlPrefix)===0)return e[s]}function gj(t,e){if(!t||!e)return!1;t=pm(t),e=pm(e);const i=o6(t),s=o6(e);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&jc(t,e,!0)}function eT(t,e){return t=pm(t),e=pm(e),dm(t)===dm(e)}function pm(t){const e=(t=un(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function iT(t){const e=s=>s==null||s instanceof RegExp&&s.test(t)||typeof s=="string"&&t.startsWith(s),i=Qc.interceptors;if(i){for(const s of i)if(Array.isArray(s.urls)){if(s.urls.some(e))return s}else if(e(s.urls))return s}return null}function jc(t,e,i=!1){if(!t||!e)return!1;const s=Tb(t),a=Tb(e);return!(!i&&s.scheme!==a.scheme)&&s.host!=null&&a.host!=null&&s.host.toLowerCase()===a.host.toLowerCase()&&s.port===a.port}function E5(t){if(typeof t=="string"){if(!Qr(t))return!0;t=Tb(t)}if(jc(t,ur))return!0;const e=Qc.trustedServers||[];for(let i=0;i<e.length;i++){const s=vj(e[i]);for(let a=0;a<s.length;a++)if(jc(t,s[a]))return!0}return!1}function vj(t){return Lf[t]||(A5(t)||Qn(t)?Lf[t]=[new $c(Kr(t))]:Lf[t]=[new $c(`http://${t}`),new $c(`https://${t}`)]),Lf[t]}function Kr(t,e=S5,i){return Qn(t)?i&&i.preserveProtocolRelative?t:ur.scheme==="http"&&ur.authority===cn(t).slice(2)?`http:${t}`:`https:${t}`:A5(t)?t:tu(t[0]==="/"?Mj(e):e,t)}function I5(t,e=S5,i){if(t==null||!Qr(t))return t;const s=un(t),a=s.toLowerCase(),d=un(e).toLowerCase().replace(/\/+$/,""),y=i?un(i).toLowerCase().replace(/\/+$/,""):null;if(y&&d.indexOf(y)!==0)return t;const m=(A,P,L)=>(L=A.indexOf(P,L))===-1?A.length:L;let _=m(a,"/",a.indexOf("//")+2),S=-1;for(;a.slice(0,_+1)===d.slice(0,_)+"/"&&(S=_+1,_!==a.length);)_=m(a,"/",_+1);if(S===-1||y&&S<y.length)return t;t=s.slice(S);const I=d.slice(S-1).replaceAll(/[^/]+/g,"").length;if(I>0)for(let A=0;A<I;A++)t=`../${t}`;else t=`./${t}`;return t}function un(t){return t=Oj(t=kj(t=Aj(t=Kr(t=t.trim()))))}function tu(...t){const e=t.filter(Yh);if(!e||!e.length)return;const i=[];if(Qr(e[0])){const a=e[0],d=a.indexOf("//");d!==-1&&(i.push(a.slice(0,d+1)),$j(e[0])&&(i[0]+="/"),e[0]=a.slice(d+2))}else e[0][0]==="/"&&i.push("");const s=e.reduce((a,d)=>d?a.concat(d.split("/")):a,[]);for(let a=0;a<s.length;a++){const d=s[a];d===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!d&&a===s.length-1||d&&(d!=="."||i.length===0))&&i.push(d)}return i.join("/")}function cn(t,e=!1){if(t==null||Lg(t)||gu(t))return null;let i=t.indexOf("://");if(i===-1&&Qn(t))i=2;else{if(i===-1)return null;i+=3}const s=t.indexOf("/",i);return s!==-1&&(t=t.slice(0,s)),e&&(t=dm(t,!0)),t}function Qr(t){return Qn(t)||A5(t)}function Lg(t){return t!=null&&t.slice(0,5)==="blob:"}function gu(t){return t!=null&&t.slice(0,5)==="data:"}function bj(t){const e=xd(t);return e&&e.isBase64?sj(e.data):null}function Cut(t){return btoa(String.fromCharCode.apply(null,t)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const wj=/^data:(.*?)(;base64)?,(.*)$/;function xd(t){const e=t.match(wj);if(!e)return null;const[,i,s,a]=e;return{mediaType:i,isBase64:!!s,data:a}}function rT(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function Nut(t){const e=bj(t);if(!e)return null;const i=xd(t);return new Blob([e],{type:i.mediaType})}function Lut(t,e){_j(t,e)}function _j(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const s=URL.createObjectURL(t);return i.download=e,i.href=s,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),!0}function Qn(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function A5(t){return t!=null&&X$.test(t)}function xj(t){return t!=null&&oj.test(t)||ur.scheme==="https"&&Qn(t)}function Sj(t){return t!=null&&Q$.test(t)||ur.scheme==="http"&&Qn(t)}function $j(t){return t!=null&&aj.test(t)}function k5(t){return Qn(t)?`https:${t}`:t.replace(Q$,"https:")}function Tj(){return ur.scheme==="http"}function Sb(){return ur.scheme==="https"}function dm(t,e=!1){return Qn(t)?t.slice(2):(t=t.replace(X$,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function Mj(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function Ej(t){let e=0;if(Qr(t)){const s=t.indexOf("//");s!==-1&&(e=s+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function Rut(t,e){if(!t)return"";const i=er(t).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return s;const a=new RegExp(`.(${e.join("|")})$`,"ig");return s.replace(a,"")}function Ij(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function sT(t){return t.replace(/\/+$/,"")}function Aj(t){if(/^https?:\/\//i.test(t)){const e=M5(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function kj(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Oj(t){const e=Qc.httpsDomains;if(!Sj(t))return t;const i=t.indexOf("/",7);let s;if(s=i===-1?t:t.slice(0,i),s=s.toLowerCase().slice(7),lj.test(s)){if(!s.endsWith(":80"))return t;s=s.slice(0,-3),t=t.replace(":80","")}return Tj()&&s===ur.authority&&!hj.test(t)||(Sb()&&s===ur.authority||e&&e.some(a=>s===a||s.endsWith(`.${a}`))||Sb()&&!Ng(t))&&(t=k5(t)),t}function $b(t,e,i){if(!(e&&i&&t&&Qr(t)))return t;const s=t.indexOf("//"),a=t.indexOf("/",s+2),d=t.indexOf(":",s+2),y=Math.min(a<0?t.length:a,d<0?t.length:d);return t.slice(s+2,y).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,s+2)}${i}${t.slice(y)}`}function Tb(t){return typeof t=="string"?new $c(Kr(t)):(t.scheme||(t.scheme=ur.scheme),t)}function jut(t){return Pj.test(t)}function nT(t,e){const i=er(t),s=Object.keys(i.query||{});return s.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function oT(t,e,i){const s=er(t),a=s.query||{};return a[e]=String(i),`${s.path}?${wl(a)}`}function Lv(t,e){const i=er(t),s=i.query||{};for(const d in e)s[d]=e[d];const a=wl(s);return a?`${i.path}?${a}`:i.path}function Dut(t){if(t==null)return null;const e=t.match(aT);return e?e[2]:null}function h6(t){if(t==null)return null;const e=t.match(aT);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function Fut(t){return typeof t=="string"?xd(t)??{data:t}:new Promise((e,i)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(xd(s.result)),s.onerror=a=>i(a)})}const aT=/([^.]*)\.([^\/]*)$/,Pj=/(^data:image\/svg|\.svg$)/i;function At(t,e,i){let s,a;return e===void 0?(a=t,s=[void 0]):typeof e!="string"?(a=t,s=[void 0],i=e):(a=e,s=Array.isArray(t)?t:[t]),(d,y)=>{const m=d.constructor.prototype;for(const _ of s){const S=A$(d,_,a);S.write&&typeof S.write=="object"||(S.write={}),i&&(S.write.target=i),S.write.writer=m[y]}}}let Ie=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,a,d)=>{const y=this.toJSON(s);y!==void 0&&yu(d,y,a)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const s in e)i[e[s]]=s;return i}_getKeysSorted(e){const i=[];for(const s in e)i.push(s);return i.sort(),i}};function dr(){return function(t,e){return new Ie(t,{ignoreUnknown:!0,...e})}}let O5=class{constructor(e,i,s,a){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=s;const d=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*d,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Re=new O5(6378137,1/298.257223563,3e5,.006694379990137799),Vo=new O5(3396190,1/169.8944472236118,23e4),_l=new O5(1737400,0,0);var eu;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(eu||(eu={}));let M;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(M=2e3;M<=2045;M++)U[M]=0;for(M=2056;M<=2065;M++)U[M]=0;for(M=2067;M<=2135;M++)U[M]=0;for(M=2137;M<=2154;M++)U[M]=0;for(M=2161;M<=2170;M++)U[M]=0;for(M=2172;M<=2193;M++)U[M]=0;for(M=2195;M<=2198;M++)U[M]=0;for(M=2200;M<=2203;M++)U[M]=0;for(M=2205;M<=2217;M++)U[M]=0;for(M=2222;M<=2224;M++)U[M]=1;for(M=2225;M<=2250;M++)U[M]=2;for(M=2251;M<=2253;M++)U[M]=1;for(M=2257;M<=2264;M++)U[M]=2;for(M=2274;M<=2279;M++)U[M]=2;for(M=2280;M<=2282;M++)U[M]=1;for(M=2283;M<=2289;M++)U[M]=2;for(M=2290;M<=2292;M++)U[M]=0;for(M=2308;M<=2313;M++)U[M]=0;for(M=2315;M<=2491;M++)U[M]=0;for(M=2494;M<=2866;M++)U[M]=0;for(M=2867;M<=2869;M++)U[M]=1;for(M=2870;M<=2888;M++)U[M]=2;for(M=2891;M<=2895;M++)U[M]=2;for(M=2896;M<=2898;M++)U[M]=1;for(M=2902;M<=2908;M++)U[M]=2;for(M=2915;M<=2920;M++)U[M]=2;for(M=2921;M<=2923;M++)U[M]=1;for(M=2924;M<=2930;M++)U[M]=2;for(M=2931;M<=2962;M++)U[M]=0;for(M=2964;M<=2968;M++)U[M]=2;for(M=2969;M<=2973;M++)U[M]=0;for(M=2975;M<=2991;M++)U[M]=0;for(M=2995;M<=3051;M++)U[M]=0;for(M=3054;M<=3079;M++)U[M]=0;for(M=3081;M<=3088;M++)U[M]=0;for(M=3092;M<=3101;M++)U[M]=0;for(M=3106;M<=3138;M++)U[M]=0;for(M=3146;M<=3151;M++)U[M]=0;for(M=3153;M<=3166;M++)U[M]=0;for(M=3168;M<=3172;M++)U[M]=0;for(M=3174;M<=3203;M++)U[M]=0;for(M=3294;M<=3358;M++)U[M]=0;for(M=3367;M<=3403;M++)U[M]=0;for(M=3408;M<=3416;M++)U[M]=0;for(M=3417;M<=3438;M++)U[M]=2;for(M=3441;M<=3446;M++)U[M]=2;for(M=3447;M<=3450;M++)U[M]=0;for(M=3451;M<=3459;M++)U[M]=2;for(M=3460;M<=3478;M++)U[M]=0;for(M=3554;M<=3559;M++)U[M]=0;for(M=3560;M<=3570;M++)U[M]=2;for(M=3571;M<=3581;M++)U[M]=0;for(M=3594;M<=3597;M++)U[M]=0;for(M=3601;M<=3604;M++)U[M]=0;for(M=3637;M<=3639;M++)U[M]=0;for(M=3665;M<=3667;M++)U[M]=0;for(M=3693;M<=3695;M++)U[M]=0;for(M=3701;M<=3727;M++)U[M]=0;for(M=3728;M<=3739;M++)U[M]=2;for(M=3740;M<=3751;M++)U[M]=0;for(M=3753;M<=3760;M++)U[M]=2;for(M=3761;M<=3773;M++)U[M]=0;for(M=3775;M<=3777;M++)U[M]=0;for(M=3779;M<=3781;M++)U[M]=0;for(M=3783;M<=3785;M++)U[M]=0;for(M=3788;M<=3791;M++)U[M]=0;for(M=3797;M<=3802;M++)U[M]=0;for(M=3814;M<=3816;M++)U[M]=0;for(M=3825;M<=3829;M++)U[M]=0;for(M=3832;M<=3841;M++)U[M]=0;for(M=3844;M<=3852;M++)U[M]=0;for(M=3873;M<=3885;M++)U[M]=0;for(M=3890;M<=3893;M++)U[M]=0;for(M=3907;M<=3912;M++)U[M]=0;for(M=3942;M<=3950;M++)U[M]=0;for(M=3968;M<=3970;M++)U[M]=0;for(M=3973;M<=3976;M++)U[M]=0;for(M=3986;M<=3989;M++)U[M]=0;for(M=3994;M<=3997;M++)U[M]=0;for(M=4048;M<=4051;M++)U[M]=0;for(M=4056;M<=4063;M++)U[M]=0;for(M=4093;M<=4096;M++)U[M]=0;for(M=4390;M<=4398;M++)U[M]=0;for(M=4399;M<=4413;M++)U[M]=2;for(M=4418;M<=4433;M++)U[M]=2;for(M=4455;M<=4457;M++)U[M]=2;for(M=4484;M<=4489;M++)U[M]=0;for(M=4491;M<=4554;M++)U[M]=0;for(M=4568;M<=4589;M++)U[M]=0;for(M=4652;M<=4656;M++)U[M]=0;for(M=4766;M<=4800;M++)U[M]=0;for(M=5014;M<=5016;M++)U[M]=0;for(M=5069;M<=5072;M++)U[M]=0;for(M=5105;M<=5130;M++)U[M]=0;for(M=5173;M<=5188;M++)U[M]=0;for(M=5253;M<=5259;M++)U[M]=0;for(M=5269;M<=5275;M++)U[M]=0;for(M=5292;M<=5311;M++)U[M]=0;for(M=5329;M<=5331;M++)U[M]=0;for(M=5343;M<=5349;M++)U[M]=0;for(M=5355;M<=5357;M++)U[M]=0;for(M=5387;M<=5389;M++)U[M]=0;for(M=5459;M<=5463;M++)U[M]=0;for(M=5479;M<=5482;M++)U[M]=0;for(M=5518;M<=5520;M++)U[M]=0;for(M=5530;M<=5539;M++)U[M]=0;for(M=5550;M<=5552;M++)U[M]=0;for(M=5562;M<=5583;M++)U[M]=0;for(M=5623;M<=5625;M++)U[M]=2;for(M=5631;M<=5639;M++)U[M]=0;for(M=5649;M<=5653;M++)U[M]=0;for(M=5663;M<=5680;M++)U[M]=0;for(M=5682;M<=5685;M++)U[M]=0;for(M=5875;M<=5877;M++)U[M]=0;for(M=5896;M<=5899;M++)U[M]=0;for(M=5921;M<=5940;M++)U[M]=0;for(M=6050;M<=6125;M++)U[M]=0;for(M=6244;M<=6275;M++)U[M]=0;for(M=6328;M<=6348;M++)U[M]=0;for(M=6350;M<=6356;M++)U[M]=0;for(M=6366;M<=6372;M++)U[M]=0;for(M=6381;M<=6387;M++)U[M]=0;for(M=6393;M<=6404;M++)U[M]=0;for(M=6480;M<=6483;M++)U[M]=0;for(M=6511;M<=6514;M++)U[M]=0;for(M=6579;M<=6581;M++)U[M]=0;for(M=6619;M<=6624;M++)U[M]=0;for(M=6625;M<=6627;M++)U[M]=2;for(M=6628;M<=6632;M++)U[M]=0;for(M=6634;M<=6637;M++)U[M]=0;for(M=6669;M<=6692;M++)U[M]=0;for(M=6707;M<=6709;M++)U[M]=0;for(M=6720;M<=6723;M++)U[M]=0;for(M=6732;M<=6738;M++)U[M]=0;for(M=6931;M<=6933;M++)U[M]=0;for(M=6956;M<=6959;M++)U[M]=0;for(M=7005;M<=7007;M++)U[M]=0;for(M=7057;M<=7070;M++)U[M]=2;for(M=7074;M<=7082;M++)U[M]=0;for(M=7109;M<=7118;M++)U[M]=0;for(M=7119;M<=7127;M++)U[M]=1;for(M=7374;M<=7376;M++)U[M]=0;for(M=7528;M<=7586;M++)U[M]=0;for(M=7587;M<=7645;M++)U[M]=2;for(M=7692;M<=7696;M++)U[M]=0;for(M=7755;M<=7787;M++)U[M]=0;for(M=7791;M<=7795;M++)U[M]=0;for(M=7799;M<=7801;M++)U[M]=0;for(M=7803;M<=7805;M++)U[M]=0;for(M=7825;M<=7831;M++)U[M]=0;for(M=7845;M<=7859;M++)U[M]=0;for(M=8013;M<=8032;M++)U[M]=0;for(M=8065;M<=8068;M++)U[M]=1;for(M=8518;M<=8529;M++)U[M]=2;for(M=8533;M<=8536;M++)U[M]=2;for(M=8538;M<=8540;M++)U[M]=2;for(M=8677;M<=8679;M++)U[M]=0;for(M=8836;M<=8840;M++)U[M]=0;for(M=8857;M<=8859;M++)U[M]=0;for(M=8908;M<=8910;M++)U[M]=0;for(M=9154;M<=9159;M++)U[M]=0;for(M=9205;M<=9218;M++)U[M]=0;for(M=9271;M<=9273;M++)U[M]=0;for(M=9295;M<=9297;M++)U[M]=0;for(M=9356;M<=9360;M++)U[M]=0;for(M=9404;M<=9407;M++)U[M]=0;for(M=9476;M<=9482;M++)U[M]=0;for(M=9487;M<=9494;M++)U[M]=0;for(M=9697;M<=9699;M++)U[M]=0;for(M=9821;M<=9865;M++)U[M]=0;for(M=20002;M<=20032;M++)U[M]=0;for(M=20047;M<=20049;M++)U[M]=0;for(M=20062;M<=20092;M++)U[M]=0;for(M=20135;M<=20138;M++)U[M]=0;for(M=20248;M<=20258;M++)U[M]=0;for(M=20348;M<=20358;M++)U[M]=0;for(M=20436;M<=20440;M++)U[M]=0;for(M=20822;M<=20824;M++)U[M]=0;for(M=20904;M<=20932;M++)U[M]=0;for(M=20934;M<=20936;M++)U[M]=0;for(M=21004;M<=21032;M++)U[M]=0;for(M=21035;M<=21037;M++)U[M]=0;for(M=21095;M<=21097;M++)U[M]=0;for(M=21148;M<=21150;M++)U[M]=0;for(M=21207;M<=21264;M++)U[M]=0;for(M=21307;M<=21364;M++)U[M]=0;for(M=21413;M<=21423;M++)U[M]=0;for(M=21453;M<=21463;M++)U[M]=0;for(M=21473;M<=21483;M++)U[M]=0;for(M=21780;M<=21782;M++)U[M]=0;for(M=21891;M<=21894;M++)U[M]=0;for(M=21896;M<=21899;M++)U[M]=0;for(M=22171;M<=22177;M++)U[M]=0;for(M=22181;M<=22187;M++)U[M]=0;for(M=22191;M<=22197;M++)U[M]=0;for(M=22207;M<=22222;M++)U[M]=0;for(M=22234;M<=22236;M++)U[M]=0;for(M=22243;M<=22250;M++)U[M]=0;for(M=22262;M<=22265;M++)U[M]=0;for(M=22307;M<=22322;M++)U[M]=0;for(M=22348;M<=22357;M++)U[M]=0;for(M=22407;M<=22422;M++)U[M]=0;for(M=22462;M<=22465;M++)U[M]=0;for(M=22521;M<=22525;M++)U[M]=0;for(M=22607;M<=22622;M++)U[M]=0;for(M=22641;M<=22646;M++)U[M]=0;for(M=22648;M<=22657;M++)U[M]=0;for(M=22707;M<=22722;M++)U[M]=0;for(M=22762;M<=22765;M++)U[M]=0;for(M=22991;M<=22994;M++)U[M]=0;for(M=23028;M<=23038;M++)U[M]=0;for(M=23830;M<=23853;M++)U[M]=0;for(M=23866;M<=23872;M++)U[M]=0;for(M=23877;M<=23884;M++)U[M]=0;for(M=23886;M<=23894;M++)U[M]=0;for(M=23946;M<=23948;M++)U[M]=0;for(M=24311;M<=24313;M++)U[M]=0;for(M=24342;M<=24347;M++)U[M]=0;for(M=24370;M<=24374;M++)U[M]=10;for(M=24375;M<=24381;M++)U[M]=0;for(M=24718;M<=24721;M++)U[M]=0;for(M=24817;M<=24821;M++)U[M]=0;for(M=24877;M<=24882;M++)U[M]=0;for(M=24891;M<=24893;M++)U[M]=0;for(M=25391;M<=25395;M++)U[M]=0;for(M=25828;M<=25838;M++)U[M]=0;for(M=26191;M<=26195;M++)U[M]=0;for(M=26391;M<=26393;M++)U[M]=0;for(M=26701;M<=26722;M++)U[M]=0;for(M=26729;M<=26799;M++)U[M]=2;for(M=26801;M<=26803;M++)U[M]=2;for(M=26811;M<=26813;M++)U[M]=2;for(M=26847;M<=26870;M++)U[M]=2;for(M=26891;M<=26899;M++)U[M]=0;for(M=26901;M<=26923;M++)U[M]=0;for(M=26929;M<=26946;M++)U[M]=0;for(M=26948;M<=26998;M++)U[M]=0;for(M=27037;M<=27040;M++)U[M]=0;for(M=27205;M<=27232;M++)U[M]=0;for(M=27258;M<=27260;M++)U[M]=0;for(M=27391;M<=27398;M++)U[M]=0;for(M=27561;M<=27564;M++)U[M]=0;for(M=27571;M<=27574;M++)U[M]=0;for(M=27581;M<=27584;M++)U[M]=0;for(M=27591;M<=27594;M++)U[M]=0;for(M=28191;M<=28193;M++)U[M]=0;for(M=28348;M<=28358;M++)U[M]=0;for(M=28402;M<=28432;M++)U[M]=0;for(M=28462;M<=28492;M++)U[M]=0;for(M=29118;M<=29122;M++)U[M]=0;for(M=29168;M<=29172;M++)U[M]=0;for(M=29177;M<=29185;M++)U[M]=0;for(M=29187;M<=29195;M++)U[M]=0;for(M=29900;M<=29903;M++)U[M]=0;for(M=30161;M<=30179;M++)U[M]=0;for(M=30491;M<=30494;M++)U[M]=0;for(M=30729;M<=30732;M++)U[M]=0;for(M=31251;M<=31259;M++)U[M]=0;for(M=31265;M<=31268;M++)U[M]=0;for(M=31275;M<=31279;M++)U[M]=0;for(M=31281;M<=31297;M++)U[M]=0;for(M=31461;M<=31469;M++)U[M]=0;for(M=31491;M<=31495;M++)U[M]=0;for(M=31917;M<=31922;M++)U[M]=0;for(M=31965;M<=32e3;M++)U[M]=0;for(M=32001;M<=32003;M++)U[M]=2;for(M=32005;M<=32031;M++)U[M]=2;for(M=32033;M<=32060;M++)U[M]=2;for(M=32064;M<=32067;M++)U[M]=2;for(M=32074;M<=32077;M++)U[M]=2;for(M=32081;M<=32086;M++)U[M]=0;for(M=32107;M<=32130;M++)U[M]=0;for(M=32133;M<=32159;M++)U[M]=0;for(M=32164;M<=32167;M++)U[M]=2;for(M=32180;M<=32199;M++)U[M]=0;for(M=32201;M<=32260;M++)U[M]=0;for(M=32301;M<=32360;M++)U[M]=0;for(M=32601;M<=32662;M++)U[M]=0;for(M=32664;M<=32667;M++)U[M]=2;for(M=32701;M<=32761;M++)U[M]=0;for(M=53001;M<=53004;M++)U[M]=0;for(M=53008;M<=53019;M++)U[M]=0;for(M=53021;M<=53032;M++)U[M]=0;for(M=53034;M<=53037;M++)U[M]=0;for(M=53042;M<=53046;M++)U[M]=0;for(M=53074;M<=53080;M++)U[M]=0;for(M=54001;M<=54004;M++)U[M]=0;for(M=54008;M<=54019;M++)U[M]=0;for(M=54021;M<=54032;M++)U[M]=0;for(M=54034;M<=54037;M++)U[M]=0;for(M=54042;M<=54046;M++)U[M]=0;for(M=54048;M<=54053;M++)U[M]=0;for(M=54074;M<=54080;M++)U[M]=0;for(M=54098;M<=54101;M++)U[M]=0;for(M=102001;M<=102040;M++)U[M]=0;for(M=102042;M<=102063;M++)U[M]=0;for(M=102065;M<=102067;M++)U[M]=0;for(M=102070;M<=102117;M++)U[M]=0;for(M=102122;M<=102216;M++)U[M]=0;for(M=102221;M<=102377;M++)U[M]=0;for(M=102382;M<=102388;M++)U[M]=0;for(M=102389;M<=102398;M++)U[M]=2;for(M=102399;M<=102444;M++)U[M]=0;for(M=102445;M<=102447;M++)U[M]=2;for(M=102448;M<=102458;M++)U[M]=0;for(M=102459;M<=102468;M++)U[M]=2;for(M=102469;M<=102499;M++)U[M]=0;for(M=102500;M<=102519;M++)U[M]=1;for(M=102520;M<=102524;M++)U[M]=0;for(M=102525;M<=102529;M++)U[M]=2;for(M=102530;M<=102588;M++)U[M]=0;for(M=102590;M<=102598;M++)U[M]=0;for(M=102601;M<=102603;M++)U[M]=0;for(M=102605;M<=102628;M++)U[M]=0;for(M=102629;M<=102646;M++)U[M]=2;for(M=102648;M<=102700;M++)U[M]=2;for(M=102701;M<=102703;M++)U[M]=0;for(M=102707;M<=102730;M++)U[M]=2;for(M=102733;M<=102758;M++)U[M]=2;for(M=102767;M<=102900;M++)U[M]=0;for(M=102901;M<=102933;M++)U[M]=2;for(M=102934;M<=102950;M++)U[M]=13;for(M=102951;M<=102955;M++)U[M]=0;for(M=102961;M<=102963;M++)U[M]=0;for(M=102965;M<=102969;M++)U[M]=0;for(M=102971;M<=102973;M++)U[M]=0;for(M=102975;M<=102989;M++)U[M]=0;for(M=102990;M<=102992;M++)U[M]=1;for(M=102997;M<=103002;M++)U[M]=0;for(M=103003;M<=103008;M++)U[M]=2;for(M=103009;M<=103011;M++)U[M]=0;for(M=103012;M<=103014;M++)U[M]=2;for(M=103019;M<=103021;M++)U[M]=0;for(M=103022;M<=103024;M++)U[M]=2;for(M=103029;M<=103031;M++)U[M]=0;for(M=103032;M<=103034;M++)U[M]=2;for(M=103065;M<=103068;M++)U[M]=0;for(M=103074;M<=103076;M++)U[M]=0;for(M=103077;M<=103079;M++)U[M]=1;for(M=103080;M<=103082;M++)U[M]=0;for(M=103083;M<=103085;M++)U[M]=2;for(M=103090;M<=103093;M++)U[M]=0;for(M=103097;M<=103099;M++)U[M]=0;for(M=103100;M<=103102;M++)U[M]=2;for(M=103107;M<=103109;M++)U[M]=0;for(M=103110;M<=103112;M++)U[M]=2;for(M=103113;M<=103116;M++)U[M]=0;for(M=103117;M<=103120;M++)U[M]=2;for(M=103153;M<=103157;M++)U[M]=0;for(M=103158;M<=103162;M++)U[M]=2;for(M=103163;M<=103165;M++)U[M]=0;for(M=103166;M<=103168;M++)U[M]=1;for(M=103169;M<=103171;M++)U[M]=2;for(M=103186;M<=103188;M++)U[M]=0;for(M=103189;M<=103191;M++)U[M]=2;for(M=103192;M<=103195;M++)U[M]=0;for(M=103196;M<=103199;M++)U[M]=2;for(M=103200;M<=103224;M++)U[M]=0;for(M=103225;M<=103227;M++)U[M]=1;for(M=103232;M<=103237;M++)U[M]=0;for(M=103238;M<=103243;M++)U[M]=2;for(M=103244;M<=103246;M++)U[M]=0;for(M=103247;M<=103249;M++)U[M]=2;for(M=103254;M<=103256;M++)U[M]=0;for(M=103257;M<=103259;M++)U[M]=2;for(M=103264;M<=103266;M++)U[M]=0;for(M=103267;M<=103269;M++)U[M]=2;for(M=103300;M<=103375;M++)U[M]=0;for(M=103381;M<=103383;M++)U[M]=0;for(M=103384;M<=103386;M++)U[M]=1;for(M=103387;M<=103389;M++)U[M]=0;for(M=103390;M<=103392;M++)U[M]=2;for(M=103397;M<=103399;M++)U[M]=0;for(M=103400;M<=103471;M++)U[M]=2;for(M=103476;M<=103478;M++)U[M]=0;for(M=103479;M<=103481;M++)U[M]=2;for(M=103486;M<=103488;M++)U[M]=0;for(M=103489;M<=103491;M++)U[M]=2;for(M=103492;M<=103495;M++)U[M]=0;for(M=103496;M<=103499;M++)U[M]=2;for(M=103528;M<=103543;M++)U[M]=0;for(M=103544;M<=103548;M++)U[M]=2;for(M=103549;M<=103551;M++)U[M]=0;for(M=103552;M<=103554;M++)U[M]=1;for(M=103555;M<=103557;M++)U[M]=2;for(M=103558;M<=103560;M++)U[M]=0;for(M=103571;M<=103573;M++)U[M]=0;for(M=103574;M<=103576;M++)U[M]=2;for(M=103577;M<=103580;M++)U[M]=0;for(M=103581;M<=103583;M++)U[M]=2;for(M=103595;M<=103694;M++)U[M]=0;for(M=103696;M<=103699;M++)U[M]=0;for(M=103700;M<=103793;M++)U[M]=2;for(M=103794;M<=103890;M++)U[M]=0;for(M=103891;M<=103896;M++)U[M]=2;for(M=103900;M<=103971;M++)U[M]=2;for(M=103972;M<=103977;M++)U[M]=0;for(M=112e3;M<=112101;M++)U[M]=0;const Cj={102113:!0,102100:!0,3857:!0,3785:!0},Nj={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},u6='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Rf=[-20037508342788905e-9,20037508342788905e-9],jf=[-20037508342787e-6,20037508342787e-6],lT={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Rf,origin:jf,dx:1e-5},102100:{wkTemplate:u6,valid:Rf,origin:jf,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Rf,origin:jf,dx:1e-5},3857:{wkTemplate:u6,valid:Rf,origin:jf,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Oi(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||iu(t)&&iu(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function pn(t){return Wi(t)&&t.wkid&&lT[t.wkid]||null}function hT(t){return!!Wi(t)&&(t.wkid?U[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function Lj(t){return!(C5(t)||L5(t))}function Sd(t){return Wi(t)&&t.wkid===4326}function Gut(t){return Wi(t)&&t.wkid===eu.CGCS2000}function iu(t){return Wi(t)&&t.wkid!=null&&Cj[t.wkid]===!0}function Rj(t){return Wi(t)&&t.wkid===32662}function P5(t){return t===eu.GCSMARS2000||t===eu.GCSMARS2000_SPHERE}function C5(t){return Wi(t)&&t.wkid!=null&&P5(t.wkid)}function N5(t){return t===eu.GCSMOON2000}function L5(t){return Wi(t)&&t.wkid!=null&&N5(t.wkid)}function jj(t){return Wi(t)&&t.wkid!=null&&Nj[t.wkid]===!0}function Wi(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const Dj={wkid:4326,wkt:$g(lT[4326].wkTemplate,{Central_Meridian:"0.0"})},Fj={wkid:102100,latestWkid:3857},zj={wkid:32662};function R5(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Vj=R5(Re),uT=R5(Vo),cT=R5(_l),Gj={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Re.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function Uj(t){return t!=null&&(C5(t)||Oi(t,uT))?Vo:t!=null&&(L5(t)||Oi(t,cT))?_l:Re}function Uut(t){return P5(t)?Vo:N5(t)?_l:Re}const pT=39.37,qj=Re.radius*Math.PI/200,dT=/UNIT\[([^\]]+)\]\]$/i,Uh=U,fT=/UNIT\[([^\]]+)\]/i,Bj=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Hj=dr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Mn=t=>t*t,ua=t=>t*t*t,$d={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Mn(.001)},"square-centimeters":{inBaseUnits:Mn(.01)},"square-decimeters":{inBaseUnits:Mn(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Mn(1e3)},"square-inches":{inBaseUnits:Mn(.0254)},"square-feet":{inBaseUnits:Mn(.3048)},"square-yards":{inBaseUnits:Mn(.9144)},"square-miles":{inBaseUnits:Mn(1609.344)},"square-us-feet":{inBaseUnits:Mn(1200/3937)},acres:{inBaseUnits:.0015625*Mn(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ua(.001)},"cubic-centimeters":{inBaseUnits:1e3*ua(.01)},"cubic-decimeters":{inBaseUnits:1e3*ua(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ua(1e3)},"cubic-inches":{inBaseUnits:1e3*ua(.0254)},"cubic-feet":{inBaseUnits:1e3*ua(.3048)},"cubic-yards":{inBaseUnits:1e3*ua(.9144)},"cubic-miles":{inBaseUnits:1e3*ua(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Wj=(()=>{const t={};for(const e in $d)for(const i in $d[e].units)t[i]=e;return t})();function Jj(t,e,i){return t*$d[i].units[e].inBaseUnits}function Kj(t,e,i){return t/$d[i].units[e].inBaseUnits}function Mb(t){const e=Wj[t];if(!e)throw new Error("unknown type");return e}function c6(t,e=null){return e=e||Mb(t),$d[e].baseUnit===t}function as(t,e,i){if(e===i)return t;const s=Mb(e);if(s!==Mb(i))throw new Error("incompatible units");const a=c6(e,s)?t:Jj(t,e,s);return c6(i,s)?a:Kj(a,i,s)}function Yj(t,e,i){return as(t,e,"meters")/(i*Math.PI/180)}function yT(t){return Hj.fromJSON(t.toLowerCase())||null}function fm(t){if(t!=null&&!Lj(t))return 1;const e=ea(t);return e>1e5?1:e}function Zj(t){return ea(t)>=Uj(t).metersPerDegree?"meters":gT(t)}function ea(t,e=Re.metersPerDegree){return Xj(t,!0)??e}function Xj(t,e=!1){const i=t!=null?t.wkid:null,s=t!=null?t.wkt:null;let a=null;if(i){if(P5(i))return Vo.metersPerDegree;if(N5(i))return _l.metersPerDegree;a=Uh.values[Uh[i]],!a&&e&&Bj.has(i)&&(a=qj)}else s&&(bT(s)?a=p6(dT.exec(s),a):vT(s)&&(a=p6(fT.exec(s),a)));return a}function qut(t){return t.isGeographic?1:ea(t)}function p6(t,e){return t&&t[1]?mT(t[1]):e}function mT(t){return parseFloat(t.split(",")[1])}function gT(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let s=null;if(e)s=Uh.units[Uh[e]];else if(i){const a=bT(i)?dT:vT(i)?fT:null;if(a){const d=a.exec(i);d&&d[1]&&(s=tD(d[1]))}}return s!=null?yT(s):null}function vT(t){return/^GEOCCS/i.test(t)}function bT(t){return/^PROJCS/i.test(t)}const Qj=1e-7;function tD(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!Uh.units.includes(i)){const s=mT(t);i=null;const a=Uh.values;for(let d=0;d<a.length;++d)if(Math.abs(s-a[d])<Qj){i=Uh.units[d];break}}return i}const eD={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},iD={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},rD={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},But=dr()(eD),Hut=dr()(iD),Wut=dr()(rD);var An;let $e=An=class extends gt{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return An.WebMercator;if(t.wkid===4326)return An.WGS84}const e=new An;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Sd(this)}get isWebMercator(){return iu(this)}get isGeographic(){return hT(this)}get isWrappable(){return jj(this)}get metersPerUnit(){return ea(this)}get unit(){return gT(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===An.WGS84)return An.WGS84;if(this===An.WebMercator)return An.WebMercator;const t=new An;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=ot(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,a=this.imageCoordinateSystem;return e==null||s?JSON.stringify(a)===JSON.stringify(t.imageCoordinateSystem):i?a.id===e&&a.referenceServiceName===i:a.id===e}return Oi(this,t)}toJSON(t){return this.write(void 0,t)}};$e.GCS_NAD_1927=null,$e.WGS84=null,$e.WebMercator=null,$e.PlateCarree=null,w([T({readOnly:!0})],$e.prototype,"isWGS84",null),w([T({readOnly:!0})],$e.prototype,"isWebMercator",null),w([T({readOnly:!0})],$e.prototype,"isGeographic",null),w([T({readOnly:!0})],$e.prototype,"isWrappable",null),w([T({type:Ee,json:{write:!0}})],$e.prototype,"latestWkid",void 0),w([T({readOnly:!0})],$e.prototype,"metersPerUnit",null),w([T({readOnly:!0})],$e.prototype,"unit",null),w([T({type:Ee,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],$e.prototype,"wkid",void 0),w([T({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],$e.prototype,"wkt",void 0),w([At("wkt"),At("web-scene","wkt")],$e.prototype,"writeWkt",null),w([T({type:Ee,json:{write:!0}})],$e.prototype,"vcsWkid",void 0),w([T({type:Ee,json:{write:!0}})],$e.prototype,"latestVcsWkid",void 0),w([T()],$e.prototype,"imageCoordinateSystem",void 0),$e=An=w([W("esri.geometry.SpatialReference")],$e),$e.prototype.toJSON.isDefaultToJSON=!0,$e.GCS_NAD_1927=new $e({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),$e.WGS84=new $e(Dj),$e.WebMercator=new $e(Fj),$e.PlateCarree=new $e(zj),Object.freeze&&(Object.freeze($e.GCS_NAD_1927),Object.freeze($e.WGS84),Object.freeze($e.WebMercator));const te=$e,wT="20230626",_T="b81703b48e0b92e492f4cc6b739af02a9af50038",sD="4.27";let j5=sD;j5="4.27.6";const nD={async request(t,e){var m,_;const{default:i}=await bt(()=>Promise.resolve().then(()=>$D),void 0),s=t.options,a=s.responseType;s.signal=e==null?void 0:e.signal,s.responseType=a==="native"||a==="native-request-init"?"native-request-init":a&&["blob","json","text"].includes(a)&&((m=iT(t.url))!=null&&m.after)?a:"array-buffer";const d=await i(t.url,s),y={data:d.data,httpStatus:d.httpStatus,ssl:d.ssl};switch((_=d.requestOptions)==null?void 0:_.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let fe;function Jut(t){fe=t}function Kut(t){const e=fe==null?void 0:fe.findCredential(t);return e!=null&&e.token?oT(t,"token",e.token):t}at("host-webworker");const oD=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function xT(t){const e=cn(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!oD.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function aD(t,e,i=!1,s){return new Promise((a,d)=>{if(Ms(s))return void d(d6());let y=()=>{S(),d(new Error(`Unable to load ${e}`))},m=()=>{const I=t;S(),a(I)},_=()=>{if(!t)return;const I=t;S(),I.src="",d(d6())};const S=()=>{at("esri-image-decode")||(t.removeEventListener("error",y),t.removeEventListener("load",m)),y=null,m=null,t=null,s!=null&&s.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(e)};s!=null&&s.addEventListener("abort",_),at("esri-image-decode")?t.decode().then(m,y):(t.addEventListener("error",y),t.addEventListener("load",m))})}function d6(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const lD="Timeout exceeded";function hD(){return new Error(lD)}function uD(t){_e.request.crossOriginNoCorsDomains||(_e.request.crossOriginNoCorsDomains={});const e=_e.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[cn(i)??""]=0:(e[cn("http://"+i)??""]=0,e[cn("https://"+i)??""]=0)}function cD(t){const e=_e.request.crossOriginNoCorsDomains;if(e){let i=cn(t);if(i)return i=i.toLowerCase(),!jc(i,$5())&&e[i]<Date.now()-36e5}return!1}async function pD(t){var a;const e=_e.request.crossOriginNoCorsDomains,i=cn(t);e&&i&&(e[i.toLowerCase()]=Date.now());const s=er(t);t=s.path,((a=s.query)==null?void 0:a.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function ye(t,e){var S;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=T5(e.query.toString().replaceAll("+"," ")));const i=gu(t),s=Lg(t);s||i||(t=un(t));const a={url:t,requestOptions:{...e}};let d=iT(t);if(d){const I=await wD(d,a);if(I!=null)return{data:I,getHeader:D5,httpStatus:200,requestOptions:a.requestOptions,url:a.url};d.after||d.error||(d=null)}if(t=a.url,(e=a.requestOptions).responseType==="image"&&(at("host-webworker")||at("host-node")))throw Kn("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),a);if(e.method==="head"){if(e.body)throw Kn("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),a);if(i||s)throw Kn("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),a)}if(await gD(),ym)return ym.execute(t,e);const y=new AbortController;Xr(e,()=>y.abort());const m={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:d,params:a,redoRequest:!1,useIdentity:sn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await xD(m);return(S=d==null?void 0:d.after)==null||S.call(d,_),_}let ym;const sn=_e.request,ST="FormData"in globalThis,dD=[499,498,403,401],fD=["COM_0056","COM_0057","SB_0008"],yD=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],D5=()=>null,mm=Symbol();function mD(t){const e=cn(t);e&&!ye._corsServers.includes(e)&&ye._corsServers.push(e)}function f6(t){const e=cn(t);return!e||e.endsWith(".arcgis.com")||ye._corsServers.includes(e)||E5(e)}function Kn(t,e,i,s){let a="Error";const d={url:i.url,requestOptions:i.requestOptions,getHeader:D5,ssl:!1};if(e instanceof lt)return e.details?(e.details=ot(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=d,e;if(e){const y=s&&(S=>s.headers.get(S)),m=s==null?void 0:s.status,_=e.message;_&&(a=_),y&&(d.getHeader=y),d.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||m||0,d.subCode=e.subcode,d.messageCode=e.messageCode,typeof e.details=="string"?d.messages=[e.details]:d.messages=e.details,d.raw=mm in e?e[mm]:e}return Qi(e)?ei():new lt(t,a,d)}async function gD(){at("host-webworker")?ym||(ym=await bt(()=>import("./request-d41cf066.js"),[])):ye._abortableFetch||(ye._abortableFetch=globalThis.fetch.bind(globalThis))}async function Eb(){fe||await bt(()=>import("./IdentityManager-97b63e84.js"),[])}async function vD(t){var m;const e=t.params.url,i=t.params.requestOptions,s=t.controller.signal,a=i.body;let d=null,y=null;if(ST&&"HTMLFormElement"in globalThis&&(a instanceof FormData?d=a:a instanceof HTMLFormElement&&(d=new FormData(a))),typeof a=="string"&&(y=a),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in ye._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:sn.priority,redirect:"follow",signal:s},(d||y)&&(t.fetchOptions.body=d||y),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(m=i.query)!=null&&m.token||d!=null&&d.get("token")),!t.hasToken&&_e.apiKey&&xT(e)&&(i.query||(i.query={}),i.query.token=_e.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!$T(e)&&!Ms(s)){let _;i.authMode==="immediate"?(await Eb(),_=await fe.getCredential(e,{signal:s}),t.credential=_):i.authMode==="no-prompt"?(await Eb(),_=await fe.getCredential(e,{prompt:!1,signal:s}).catch(()=>{}),t.credential=_):fe&&(_=fe.findCredential(e)),_&&(t.credentialToken=_.token,t.useSSL=!!_.ssl)}}function $T(t){return yD.some(e=>e.test(t))}async function bD(t){let e=t.params.url;const i=t.params.requestOptions,s=t.fetchOptions??{},a=Lg(e)||gu(e),d=i.responseType||"json",y=a?0:i.timeout!=null?i.timeout:sn.timeout;let m=!1;if(!a){t.useSSL&&(e=k5(e)),i.cacheBust&&s.cache==="default"&&(e=oT(e,"request.preventCache",Date.now()));let P={...i.query};t.credentialToken&&(P.token=t.credentialToken);let L=wl(P);at("esri-url-encodes-apostrophe")&&(L=L.replaceAll("'","%27"));const j=e.length+1+L.length;let F;m=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||j>sn.maxUrlLength;const V=i.useProxy||!!Ng(e);if(V){const J=yj(e);F=J.path,!m&&F.length+1+j>sn.maxUrlLength&&(m=!0),J.query&&(P={...J.query,...P})}if(s.method==="HEAD"&&(m||V)){if(m)throw j>sn.maxUrlLength?Kn("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Kn("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(V)throw Kn("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(m?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=Lv(e,P):(s.body=wl(P),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Lv(e,P),V&&(t.useProxy=!0,e=`${F}?${e}`),P.token&&ST&&s.body instanceof FormData&&!rj(e)&&s.body.set("token",P.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!jc(e,$5())){if(E5(e))t.withCredentials=!0;else if(fe){const J=fe.findServerInfo(e);J!=null&&J.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(s.credentials="include",cD(e)&&await pD(m?Lv(e,P):e))}let _,S,I=0,A=!1;y>0&&(I=setTimeout(()=>{A=!0,t.controller.abort()},y));try{if(i.responseType==="native-request-init")S=s,S.url=e;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||m||_D(i.headers)||!a&&!t.useProxy&&sn.proxyUrl&&!f6(e)){if(_=await ye._abortableFetch(e,s),t.useProxy||mD(e),i.responseType==="native")S=_;else if(s.method!=="HEAD")if(_.ok){switch(d){case"array-buffer":S=await _.arrayBuffer();break;case"blob":case"image":S=await _.blob();break;default:S=await _.text()}if(I&&(clearTimeout(I),I=0),d==="json"||d==="xml"||d==="document")if(S)switch(d){case"json":S=JSON.parse(S);break;case"xml":S=y6(S,"application/xml");break;case"document":S=y6(S,"text/html")}else S=null;if(S){if(d==="array-buffer"||d==="blob"){const P=_.headers.get("Content-Type");if(P&&/application\/json|text\/plain/i.test(P)&&S[d==="blob"?"size":"byteLength"]<=750)try{const L=await new Response(S).json();L.error&&(S=L)}catch{}}d==="image"&&S instanceof Blob&&(S=await m6(URL.createObjectURL(S),t,!0))}}else{S=await _.text();try{S=JSON.parse(S)}catch{}}}else S=await m6(e,t)}catch(P){if(P.name==="AbortError")throw A?hD():ei("Request canceled");if(!(!_&&P instanceof TypeError&&sn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||f6(e))throw P;t.redoRequest=!0,mj({proxyUrl:sn.proxyUrl,urlPrefix:cn(e)??""})}finally{I&&clearTimeout(I)}return[_,S]}async function wD(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,s;try{s=await t.before(e)}catch(a){i=Kn("request:interceptor",a,e)}if((s instanceof Error||s instanceof lt)&&(i=Kn("request:interceptor",s,e)),i)throw t.error&&t.error(i),i;return s}}function _D(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function y6(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function xD(t){var d,y;let e,i;await vD(t);try{do[e,i]=await bD(t);while(!await SD(t,e,i))}catch(m){const _=Kn("request:server",m,t.params,e);throw _.details.ssl=t.useSSL,(d=t.interceptor)!=null&&d.error&&t.interceptor.error(_),_}const s=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!t.hasToken&&!t.credentialToken&&((y=i.user)!=null&&y.username)&&!E5(s)){const m=cn(s,!0);m&&sn.trustedServers.push(m)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&uD(i.authorizedCrossOriginNoCorsDomains)}const a=t.credential;if(a&&fe){const m=fe.findServerInfo(a.server);let _=m==null?void 0:m.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const S=fe.findCredential(_,a.userId);S&&fe._getIdenticalSvcIdx(_,S)===-1&&S.resources.unshift(_)}}return{data:i,getHeader:e?m=>e==null?void 0:e.headers.get(m):D5,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function SD(t,e,i){var S;if(t.redoRequest)return t.redoRequest=!1,!1;const s=t.params.requestOptions;if(!e||s.responseType==="native"||s.responseType==="native-request-init")return!0;let a,d;if(i&&(i.error?a=i.error:i.status==="error"&&Array.isArray(i.messages)&&(a={...i},a[mm]=i,a.details=i.messages)),!a&&!e.ok)throw a=new Error(`Unable to load ${e.url} status: ${e.status}`),a[mm]=i,a;let y,m=null;a&&(d=Number(a.code),m=a.hasOwnProperty("subcode")?Number(a.subcode):null,y=a.messageCode,y=y==null?void 0:y.toUpperCase());const _=s.authMode;if(d===403&&(m===4||(S=a.message)!=null&&S.toLowerCase().includes("ssl")&&!a.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(_!=="no-prompt"||d===498)&&d!==void 0&&dD.includes(d)&&!$T(t.params.url)&&(d!==403||y&&!fD.includes(y)&&(m==null||m===2&&t.credentialToken))){await Eb();try{const I=await fe.getCredential(t.params.url,{error:Kn("request:server",a,t.params),prompt:_!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=I,t.credentialToken=I.token,t.useSSL=t.useSSL||I.ssl,!1}catch(I){if(_==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;a=I}}if(a)throw a;return!0}function m6(t,e,i=!1){const s=e.controller.signal,a=new Image;return e.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.fetchPriority=sn.priority,a.src=t,aD(a,t,i,s)}ye._abortableFetch=null,ye._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const $D=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));function kt(t,e,i){let s,a;return e===void 0||Array.isArray(e)?(a=t,i=e,s=[void 0]):(a=e,s=Array.isArray(t)?t:[t]),(d,y)=>{const m=d.constructor.prototype;s.forEach(_=>{const S=A$(d,_,a);S.read&&typeof S.read=="object"||(S.read={}),S.read.reader=m[y],i&&(S.read.source=(S.read.source||[]).concat(i))})}}let kn=class extends gt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=te.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof te)return e;if(e!=null){const s=new te;return s.read(e,i),s}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};w([T()],kn.prototype,"type",void 0),w([T({readOnly:!0})],kn.prototype,"cache",null),w([T({readOnly:!0})],kn.prototype,"extent",null),w([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],kn.prototype,"hasM",void 0),w([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],kn.prototype,"hasZ",void 0),w([T({type:te,json:{write:!0},value:te.WGS84})],kn.prototype,"spatialReference",void 0),w([kt("spatialReference")],kn.prototype,"readSpatialReference",null),kn=w([W("esri.geometry.Geometry")],kn);const Ol=kn,TD=Object.prototype.toString;function MD(t){const e="__accessorMetadata__"in t?ki(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return ED.apply(this,i)}}function ED(t,e,i,s){Sg(t,e).cast=s}function ID(t){return(e,i)=>{Sg(e,t).cast=e[i]}}function Ne(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&TD.call(t[0])==="[object Function]"?MD(t[0]):t.length===1&&typeof t[0]=="string"?ID(t[0]):void 0}function AD(t,e){const i=t.x-e.x,s=t.y-e.y,a=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+s*s+a*a)}const kD=57.29577951308232,OD=.017453292519943;function g6(t){return t*kD}function v6(t){return t*OD}function Zut(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Re.radius))}function Ib(t){return t.wkid!=null||t.wkt!=null}const Rv=[0,0];function gm(t,e,i,s,a){const d=t,y=a;if(y.spatialReference=i,"x"in d&&"x"in y)[y.x,y.y]=e(d.x,d.y,Rv,s);else if("xmin"in d&&"xmin"in y)[y.xmin,y.ymin]=e(d.xmin,d.ymin,Rv,s),[y.xmax,y.ymax]=e(d.xmax,d.ymax,Rv,s);else if("paths"in d&&"paths"in y||"rings"in d&&"rings"in y){const m="paths"in d?d.paths:d.rings,_=[];let S;for(let I=0;I<m.length;I++){const A=m[I];S=[],_.push(S);for(let P=0;P<A.length;P++)S.push(e(A[P][0],A[P][1],[0,0],s)),A[P].length>2&&S[P].push(A[P][2]),A[P].length>3&&S[P].push(A[P][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in d&&"points"in y){const m=d.points,_=[];for(let S=0;S<m.length;S++)_[S]=e(m[S][0],m[S][1],[0,0],s),m[S].length>2&&_[S].push(m[S][2]),m[S].length>3&&_[S].push(m[S][3]);y.points=_}return a}function G1(t,e){const i=t&&(Ib(t)?t:t.spatialReference),s=e&&(Ib(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!s)&&(!!Oi(s,i)||iu(s)&&Sd(i)||iu(i)&&Sd(s))}function Rg(t,e){if(t==null)return null;const i=t.spatialReference,s=e&&(Ib(e)?e:e.spatialReference);return G1(i,s)?Oi(i,s)?ot(t):iu(s)?gm(t,fc,te.WebMercator,!1,ot(t)):Sd(s)?gm(t,Bp,te.WGS84,!1,ot(t)):null:null}function fc(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const s=v6(e);return i[0]=v6(t)*Re.radius,i[1]=Re.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function Bp(t,e,i=[0,0],s=!1){const a=g6(t/Re.radius);return i[0]=s?a:a-360*Math.floor((a+180)/360),i[1]=g6(Math.PI/2-2*Math.atan(Math.exp(-e/Re.radius))),i}function qh(t,e=!1,i=ot(t)){return gm(t,fc,te.WebMercator,e,i)}function yc(t,e=!1,i=ot(t)){return gm(t,Bp,te.WGS84,e,i)}var U1;const S0=[0,0];function b6(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let mr=U1=class extends Ol{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,s,a){let d;if(Array.isArray(t))d=t,a=e,t=d[0],e=d[1],i=d[2],s=d[3];else if(t&&typeof t=="object"){if(d=t,t=d.x!=null?d.x:d.longitude,e=d.y!=null?d.y:d.latitude,i=d.z,s=d.m,(a=d.spatialReference)&&a.declaredClass!=="esri.geometry.SpatialReference"&&(a=new te(a)),d.longitude!=null||d.latitude!=null){if(d.longitude==null)mt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(d.latitude==null)mt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!d.declaredClass&&a&&a.isWebMercator){const m=fc(d.longitude,d.latitude,S0);t=m[0],e=m[1]}}}else b6(i)?(a=i,i=null):b6(s)&&(a=s,s=null);const y={x:t,y:e};return y.x==null&&y.y!=null?mt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&mt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),a!=null&&(y.spatialReference=a),i!=null&&(y.z=i),s!=null&&(y.m=s),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return Bp(e,i,S0)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",fc(i,t,S0)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return Bp(t,e,S0)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",fc(t,e,S0)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new U1;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return U1.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:s,m:a,spatialReference:d}=this,{z:y,m}=t;let{x:_,y:S,spatialReference:I}=t;if(!d.equals(I))if(d.isWebMercator&&I.isWGS84)[_,S]=fc(_,S),I=d;else{if(!d.isWGS84||!I.isWebMercator)return!1;[_,S]=Bp(_,S),I=d}return e===_&&i===S&&s===y&&a===m&&d.wkid===I.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=pn(this.spatialReference);if(!t)return this;let e=this.x;const[i,s]=t.valid,a=2*s;let d;return e>s?(d=Math.ceil(Math.abs(e-s)/a),e-=d*a):e<i&&(d=Math.ceil(Math.abs(e-i)/a),e+=d*a),this._set("x",e),this}distance(t){return AD(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};w([T({readOnly:!0})],mr.prototype,"cache",null),w([T({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],mr.prototype,"hasM",null),w([T({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],mr.prototype,"hasZ",null),w([T({type:Number})],mr.prototype,"latitude",null),w([T({type:Number})],mr.prototype,"longitude",null),w([T({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ne(t=>isNaN(t)?t:ws(t))],mr.prototype,"x",void 0),w([At("x")],mr.prototype,"writeX",null),w([kt("x")],mr.prototype,"readX",null),w([T({type:Number,json:{write:!0}})],mr.prototype,"y",void 0),w([T({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mr.prototype,"z",void 0),w([T({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],mr.prototype,"m",void 0),mr=U1=w([W("esri.geometry.Point")],mr),mr.prototype.toJSON.isDefaultToJSON=!0;const Yt=mr,jv=[0,0];function jg(t,e){return e!=null&&wr(t,e.x,e.y,e.z)}function Xut(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!Dc(t,i))return!1;return!0}function PD(t,e){const{xmin:i,ymin:s,zmin:a,xmax:d,ymax:y,zmax:m}=e;return t.hasZ&&e.hasZ?wr(t,i,s,a)&&wr(t,i,y,a)&&wr(t,d,y,a)&&wr(t,d,s,a)&&wr(t,i,s,m)&&wr(t,i,y,m)&&wr(t,d,y,m)&&wr(t,d,s,m):wr(t,i,s)&&wr(t,i,y)&&wr(t,d,y)&&wr(t,d,s)}function Dc(t,e){return wr(t,e[0],e[1])}function CD(t,e){return wr(t,e[0],e[1],e[2])}function wr(t,e,i,s){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function TT(t,e){return jv[1]=e.y,jv[0]=e.x,ND(t,jv)}function ND(t,e){return MT(t.rings,e)}function MT(t,e){if(!t)return!1;if(LD(t))return w6(!1,t,e);let i=!1;for(let s=0,a=t.length;s<a;s++)i=w6(i,t[s],e);return i}function LD(t){return!Array.isArray(t[0][0])}function w6(t,e,i){const[s,a]=i;let d=t,y=0;for(let m=0,_=e.length;m<_;m++){y++,y===_&&(y=0);const[S,I]=e[m],[A,P]=e[y];(I<a&&P>=a||P<a&&I>=a)&&S+(a-I)/(P-I)*(A-S)<s&&(d=!d)}return d}function RD(t,e){return jg(t,e)}function jD(t,e){const i=t.hasZ&&e.hasZ;let s,a,d;if(t.xmin<=e.xmin){if(s=e.xmin,t.xmax<s)return!1}else if(s=t.xmin,e.xmax<s)return!1;if(t.ymin<=e.ymin){if(a=e.ymin,t.ymax<a)return!1}else if(a=t.ymin,e.ymax<a)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(d=e.zmin,t.zmax<d)return!1}else if(d=t.zmin,e.zmax<d)return!1}return!0}function DD(t,e){const{points:i,hasZ:s}=e,a=s?CD:Dc;for(const d of i)if(a(t,d))return!0;return!1}const ru=[0,0],su=[0,0],nu=[0,0],ou=[0,0],FD=[ru,su,nu,ou],ET=[[nu,ru],[ru,su],[su,ou],[ou,nu]];function zD(t,e){return VD(t,e.rings)}function VD(t,e){ru[0]=t.xmin,ru[1]=t.ymax,su[0]=t.xmax,su[1]=t.ymax,nu[0]=t.xmin,nu[1]=t.ymin,ou[0]=t.xmax,ou[1]=t.ymin;for(const i of FD)if(MT(e,i))return!0;for(const i of e){if(!i.length)continue;let s=i[0];if(Dc(t,s))return!0;for(let a=1;a<i.length;a++){const d=i[a];if(Dc(t,d)||IT(s,d,ET))return!0;s=d}}return!1}function GD(t,e){ru[0]=t.xmin,ru[1]=t.ymax,su[0]=t.xmax,su[1]=t.ymax,nu[0]=t.xmin,nu[1]=t.ymin,ou[0]=t.xmax,ou[1]=t.ymin;const i=e.paths;for(const s of i){if(!i.length)continue;let a=s[0];if(Dc(t,a))return!0;for(let d=1;d<s.length;d++){const y=s[d];if(Dc(t,y)||IT(a,y,ET))return!0;a=y}}return!1}const Vi=[0,0];function UD(t){for(let e=0;e<t.length;e++){const i=t[e];for(let a=0;a<i.length-1;a++){const d=i[a],y=i[a+1];for(let m=e+1;m<t.length;m++)for(let _=0;_<t[m].length-1;_++){const S=t[m][_],I=t[m][_+1];if(Ab(d,y,S,I,Vi)&&!(Vi[0]===d[0]&&Vi[1]===d[1]||Vi[0]===S[0]&&Vi[1]===S[1]||Vi[0]===y[0]&&Vi[1]===y[1]||Vi[0]===I[0]&&Vi[1]===I[1]))return!0}}const s=i.length;if(!(s<=4))for(let a=0;a<s-3;a++){let d=s-1;a===0&&(d=s-2);const y=i[a],m=i[a+1];for(let _=a+2;_<d;_++){const S=i[_],I=i[_+1];if(Ab(y,m,S,I,Vi)&&!(Vi[0]===y[0]&&Vi[1]===y[1]||Vi[0]===S[0]&&Vi[1]===S[1]||Vi[0]===m[0]&&Vi[1]===m[1]||Vi[0]===I[0]&&Vi[1]===I[1]))return!0}}}return!1}function IT(t,e,i){for(let s=0;s<i.length;s++)if(Ab(t,e,i[s][0],i[s][1]))return!0;return!1}function Ab(t,e,i,s,a){const[d,y]=t,[m,_]=e,[S,I]=i,[A,P]=s,L=A-S,j=d-S,F=m-d,V=P-I,J=y-I,Q=_-y,Z=V*F-L*Q;if(Z===0)return!1;const et=(L*J-V*j)/Z,st=(F*J-Q*j)/Z;return et>=0&&et<=1&&st>=0&&st<=1&&(a&&(a[0]=d+et*(m-d),a[1]=y+et*(_-y)),!0)}function qD(t){switch(t){case"esriGeometryEnvelope":case"extent":return jD;case"esriGeometryMultipoint":case"multipoint":return DD;case"esriGeometryPoint":case"point":return RD;case"esriGeometryPolygon":case"polygon":return zD;case"esriGeometryPolyline":case"polyline":return GD}}var ls;function BD(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function ca(t,e,i){return e==null?i:i==null?e:t(e,i)}let Pi=ls=class extends Ol{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,s,a){return BD(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?te.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:s,spatialReference:a??te.WGS84}}static fromBounds(t,e){return new ls({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new ls({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Yt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new ls;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&G1(e,i)&&(t=e.isWebMercator?qh(t):yc(t,!0)),t.type==="point"?jg(this,t):t.type==="extent"&&PD(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&G1(e,i)&&(t=e.isWebMercator?qh(t):yc(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,s=this.height*e;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const a=(this.zmax-this.zmin)*e;this.zmin+=a,this.zmax-=a}if(this.hasM){const a=(this.mmax-this.mmin)*e;this.mmin+=a,this.mmax-=a}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Oi(e,i)&&G1(e,i)&&(t=e.isWebMercator?qh(t):yc(t,!0)),qD(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ca(Math.min,this.zmin,t.zmin),this.zmax=ca(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ca(Math.min,this.mmin,t.mmin),this.mmax=ca(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ca(Math.max,this.zmin,t.zmin),this.zmax=ca(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ca(Math.max,this.mmin,t.mmin),this.mmax=ca(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=pn(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const s=e.isWebMercator?yc(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(s.x=this._normalizeX(s.x,t).x),this.spatialReference=new te($g((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let e=null;const[i,s]=t.valid,a=this.xmin,d=this.xmax;return a>=i&&a<=s&&d>=i&&d<=s||(e=this.center),e}_normalize(t,e,i){const s=this.spatialReference;if(!s)return this;const a=i??pn(s);if(a==null)return this;const d=this._getParts(a).map(_=>_.extent);if(d.length<2)return d[0]||this;if(d.length>2)return t?this._shiftCM(a):this.set({xmin:a.valid[0],xmax:a.valid[1]});if(t)return this._shiftCM(a);if(e)return d;let y=!0,m=!0;return d.forEach(_=>{_.hasZ||(y=!1),_.hasM||(m=!1)}),{rings:d.map(_=>{const S=[[_.xmin,_.ymin],[_.xmin,_.ymax],[_.xmax,_.ymax],[_.xmax,_.ymin],[_.xmin,_.ymin]];if(y){const I=(_.zmax-_.zmin)/2;for(let A=0;A<S.length;A++)S[A].push(I)}if(m){const I=(_.mmax-_.mmin)/2;for(let A=0;A<S.length;A++)S[A].push(I)}return S}),hasZ:y,hasM:m,spatialReference:s}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:a,ymax:d,spatialReference:y}=this,m=this.width,_=this.xmin,S=this.xmax;let I;t=t||pn(y);const[A,P]=t.valid;I=this._normalizeX(this.xmin,t);const L=I.x,j=I.frameId;I=this._normalizeX(this.xmax,t);const F=I.x,V=I.frameId,J=L===F&&m>0;if(m>2*P){const Q=new ls(_<S?L:F,a,P,d,y),Z=new ls(A,a,_<S?F:L,d,y),et=new ls(0,a,P,d,y),st=new ls(A,a,0,d,y),nt=[],pt=[];Q.contains(et)&&nt.push(j),Q.contains(st)&&pt.push(j),Z.contains(et)&&nt.push(V),Z.contains(st)&&pt.push(V);for(let yt=j+1;yt<V;yt++)nt.push(yt),pt.push(yt);e.push({extent:Q,frameIds:[j]},{extent:Z,frameIds:[V]},{extent:et,frameIds:nt},{extent:st,frameIds:pt})}else L>F||J?e.push({extent:new ls(L,a,P,d,y),frameIds:[j]},{extent:new ls(A,a,F,d,y),frameIds:[V]}):e.push({extent:new ls(L,a,F,d,y),frameIds:[j]});this.cache._parts=e}const i=this.hasZ,s=this.hasM;if(i||s){const a={};i&&(a.zmin=this.zmin,a.zmax=this.zmax),s&&(a.mmin=this.mmin,a.mmax=this.mmax);for(let d=0;d<e.length;d++)e[d].extent.set(a)}return e}_normalizeX(t,e){const[i,s]=e.valid,a=2*s;let d,y=0;return t>s?(d=Math.ceil(Math.abs(t-s)/a),t-=d*a,y=d):t<i&&(d=Math.ceil(Math.abs(t-i)/a),t+=d*a,y=-d),{x:t,frameId:y}}};w([T({readOnly:!0})],Pi.prototype,"cache",null),w([T({readOnly:!0})],Pi.prototype,"center",null),w([T({readOnly:!0})],Pi.prototype,"extent",null),w([T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Pi.prototype,"hasM",null),w([T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Pi.prototype,"hasZ",null),w([T({readOnly:!0})],Pi.prototype,"height",null),w([T({readOnly:!0})],Pi.prototype,"width",null),w([T({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Pi.prototype,"xmin",void 0),w([T({type:Number,json:{write:!0}})],Pi.prototype,"ymin",void 0),w([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pi.prototype,"mmin",void 0),w([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pi.prototype,"zmin",void 0),w([T({type:Number,json:{write:!0}})],Pi.prototype,"xmax",void 0),w([T({type:Number,json:{write:!0}})],Pi.prototype,"ymax",void 0),w([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pi.prototype,"mmax",void 0),w([T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pi.prototype,"zmax",void 0),Pi=ls=w([W("esri.geometry.Extent")],Pi),Pi.prototype.toJSON.isDefaultToJSON=!0;const Ae=Pi;let Hp;var C8,N8;const HD=((C8=globalThis.esriConfig)==null?void 0:C8.locale)??((N8=globalThis.dojoConfig)==null?void 0:N8.locale);function AT(){var t;return HD??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function dn(){return Hp===void 0&&(Hp=AT()),Hp}const Wp=[];function kT(t){return Wp.push(t),{remove(){Wp.splice(Wp.indexOf(t),1)}}}const kb=[];function F5(t){return kb.push(t),{remove(){Wp.splice(kb.indexOf(t),1)}}}function WD(){const t=AT();Hp!==t&&(Hp=t,[...kb].forEach(e=>{e.call(null,t)}),[...Wp].forEach(e=>{e.call(null,t)}))}var L8;(L8=globalThis.addEventListener)==null||L8.call(globalThis,"languagechange",WD);let Df;function JD(t){return Df&&!Df.destroyed||(Df=t()),Df}var Ob;const KD=new Ie({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let hs=Ob=class extends Rt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Ob({categories:this.categories?ot(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y));let s="";if(this.extent){const y=Rg(this.extent,te.WGS84);y!=null&&(s=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let a=this.query;!this.disableExtraQuery&&t.extraQuery&&(a="("+a+")"+t.extraQuery);const d={categories:i,bbox:s,q:a,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(d.sortField=this.sortField.split(",").map(y=>KD.toJSON(y.trim())).join(","),d.sortOrder=this.sortOrder),{query:{...e,...d}}}};w([T()],hs.prototype,"categories",void 0),w([T()],hs.prototype,"disableExtraQuery",void 0),w([T({type:Ae})],hs.prototype,"extent",void 0),w([T()],hs.prototype,"filter",void 0),w([T()],hs.prototype,"num",void 0),w([T()],hs.prototype,"query",void 0),w([T()],hs.prototype,"sortField",void 0),w([T()],hs.prototype,"sortOrder",null),w([T()],hs.prototype,"start",void 0),hs=Ob=w([W("esri.portal.PortalQueryParams")],hs);const Jn=hs;let Yl=class extends Rt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};w([T()],Yl.prototype,"nextQueryParams",void 0),w([T()],Yl.prototype,"queryParams",void 0),w([T()],Yl.prototype,"results",void 0),w([T()],Yl.prototype,"total",void 0),Yl=w([W("esri.portal.PortalQueryResult")],Yl);const YD=Yl;let yo=class extends gt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new lt("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};w([T({type:Date})],yo.prototype,"created",void 0),w([T()],yo.prototype,"id",void 0),w([T()],yo.prototype,"portal",void 0),w([T()],yo.prototype,"title",void 0),w([T({readOnly:!0})],yo.prototype,"url",null),w([T()],yo.prototype,"username",void 0),yo=w([W("esri.portal.PortalFolder")],yo);const ZD=yo;let Ci=class extends gt{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var s;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(s=this.portal)==null?void 0:s.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return Pr(this.portal).request(this.url+"/categorySchema",e).then(i=>{const s=i.categorySchema||[];return s.some(a=>a.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):s})}fetchMembers(e){return Pr(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new lt("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let s=ki(Jn,e);const a=Pr(this.portal);return parseFloat(a.currentVersion)>5?(s=s||new Jn,a.queryPortal(`/content/groups/${this.id}/search`,s,"PortalItem",i)):(s=s?s.clone():new Jn,s.query="group:"+this.id+(s.query?" "+s.query:""),a.queryItems(s,i))}_fetchCategorySchemaSet(e,i){const s=Pr(this.portal);return s.fetchSelf(s.authMode,!0,i).then(a=>{const d=a.contentCategorySetsGroupQuery;if(d){const y=new Jn;return y.disableExtraQuery=!0,y.num=1,y.query=d,s.queryGroups(y,i)}throw new lt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(a=>{if(a.total){const d=a.results[0],y=new Jn;return y.num=1,y.query=`typekeywords:"${e}"`,d.queryItems(y,i)}throw new lt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(a=>a.total?a.results[0].fetchData("json",i).then(d=>{const y=d&&d.categorySchema;return y&&y.length?y:[]}):[])}};w([T()],Ci.prototype,"access",void 0),w([T({type:Date})],Ci.prototype,"created",void 0),w([T()],Ci.prototype,"description",void 0),w([T()],Ci.prototype,"id",void 0),w([T()],Ci.prototype,"isInvitationOnly",void 0),w([T({type:Date})],Ci.prototype,"modified",void 0),w([T()],Ci.prototype,"owner",void 0),w([T()],Ci.prototype,"portal",void 0),w([T()],Ci.prototype,"snippet",void 0),w([T()],Ci.prototype,"sortField",void 0),w([T()],Ci.prototype,"sortOrder",void 0),w([T()],Ci.prototype,"tags",void 0),w([T()],Ci.prototype,"thumbnail",void 0),w([T({readOnly:!0})],Ci.prototype,"thumbnailUrl",null),w([T()],Ci.prototype,"title",void 0),w([T({readOnly:!0})],Ci.prototype,"url",null),Ci=w([W("esri.portal.PortalGroup")],Ci);const Pb=Ci,XD=Object.freeze(Object.defineProperty({__proto__:null,default:Pb},Symbol.toStringTag,{value:"Module"}));var Cb;let He=Cb=class extends gt{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,s=t&&t.folder,a={method:"post"};e&&(a.query=e.createPostQuery(),i!=null&&(typeof i=="string"?a.query.text=i:typeof i=="object"&&(a.query.text=JSON.stringify(i))));let d=this.userContentUrl;return s&&(d+="/"+(typeof s=="string"?s:s.id)),this.portal.request(d+"/addItem",a).then(y=>(e.id=y.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(",")}};return this.portal.request(e,s).then(()=>{t.forEach(a=>{a.id=null,a.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(s=>{const a=ZD.fromJSON(s);return a.portal=this.portal,a}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const s=Pb.fromJSON(i);return s.portal=this.portal,s}):[],e})}fetchItems(t){const e=t??{};let i,s=this.userContentUrl??"";return e.folder&&(s+="/"+e.folder.id),bt(()=>Promise.resolve().then(()=>OT),void 0).then(({default:a})=>{i=a;const d={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(s,{query:d})}).then(a=>{let d;return a&&a.items?(d=a.items.map(y=>{const m=i.fromJSON(y);return m.portal=this.portal,m}),Promise.all(d.map(y=>y.load())).catch(y=>y).then(()=>({items:d,nextStart:a.nextStart,total:a.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Pb({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new lt("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new lt("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Cb;return e.sourceJSON=t,e.read(t),e}};w([T()],He.prototype,"access",void 0),w([T({type:Date})],He.prototype,"created",void 0),w([T()],He.prototype,"culture",void 0),w([T()],He.prototype,"description",void 0),w([T()],He.prototype,"email",void 0),w([T()],He.prototype,"favGroupId",void 0),w([T()],He.prototype,"fullName",void 0),w([T({type:Date})],He.prototype,"modified",void 0),w([T()],He.prototype,"orgId",void 0),w([T()],He.prototype,"portal",void 0),w([T()],He.prototype,"preferredView",void 0),w([T()],He.prototype,"privileges",void 0),w([T()],He.prototype,"region",void 0),w([T()],He.prototype,"role",void 0),w([T()],He.prototype,"roleId",void 0),w([T()],He.prototype,"sourceJSON",void 0),w([T()],He.prototype,"thumbnail",void 0),w([T({readOnly:!0})],He.prototype,"thumbnailUrl",null),w([T()],He.prototype,"units",void 0),w([T({readOnly:!0})],He.prototype,"userContentUrl",null),w([T({readOnly:!0})],He.prototype,"url",null),w([T()],He.prototype,"username",void 0),w([T()],He.prototype,"userType",void 0),He=Cb=w([W("esri.portal.PortalUser")],He);const z5=He,QD=Object.freeze(Object.defineProperty({__proto__:null,default:z5},Symbol.toStringTag,{value:"Module"}));var mo;let Ff;const _6={PortalGroup:()=>bt(()=>Promise.resolve().then(()=>XD),void 0),PortalItem:()=>bt(()=>Promise.resolve().then(()=>OT),void 0),PortalUser:()=>bt(()=>Promise.resolve().then(()=>QD),void 0)};let wt=mo=class extends Zd(Wo){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=_e.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){x6.unregister(this),this.defaultBasemap=Je(this.defaultBasemap),this.defaultDevBasemap=Je(this.defaultDevBasemap),this.defaultVectorBasemap=Je(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=si(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)_e.request.trustedServers.includes(e)||_e.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=z5.fromJSON(t),e.portal=this),e}load(t){const e=bt(()=>Promise.resolve().then(()=>TF),void 0).then(({default:i})=>{Ke(t),Ff=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var s;if(fe){const a=fe;this.credential=a.findCredential(this.restUrl),this.credential||this.authMode!==mo.AUTH_MODE_AUTO||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=a.on("credential-create",tF(new WeakRef(this))),x6.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await bt(()=>import("./ElevationLayer-9a360b91.js"),[])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(t,e);i.unshift(...s)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Ms(t)?Promise.reject(ei()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Jn;if(i.num=100,i.sortField="title",e&&e.length){const s=[];for(const a of e)s.push(`(title:"${a.title}" AND owner:${a.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then(a=>a.results)}return Ms(t)?Promise.reject(ei()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||dn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||dn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return JD(()=>new mo)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const s=this.restUrl+"/portals/self",a={authMode:t,query:{culture:dn().toLowerCase()},...i};return a.authMode==="auto"&&(a.authMode="no-prompt"),e&&(a.query.default=!0),this.request(s,a)}queryPortal(t,e,i,s){const a=ki(Jn,e),d=y=>this.request(this.restUrl+t,{...a.toRequestOptions(this),...s}).then(m=>{const _=a.clone();return _.start=m.nextStart,new YD({nextQueryParams:_,queryParams:a,total:m.total,results:mo._resultsToTypedArray(y,{portal:this},m,s)})}).then(m=>Promise.all(m.results.map(_=>typeof _.when=="function"?_.when():m)).then(()=>m,_=>(on(_),m)));return i&&_6[i]?_6[i]().then(({default:y})=>(Ke(s),d(y))):d()}signIn(){if(this.authMode===mo.AUTH_MODE_ANONYMOUS)return Promise.reject(new lt("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return fe?fe.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(s=>{const a=mo._resultsToTypedArray(i,{portal:this},s);return Promise.all(a.map(d=>typeof d.when=="function"?d.when():s)).then(()=>a,()=>a)})}request(t,e={}){const i={f:"json",...e.query},{authMode:s=this.authMode===mo.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:a=null,cacheBust:d=!1,method:y="auto",responseType:m="json",signal:_}=e,S={authMode:s,body:a,cacheBust:d,method:y,query:i,responseType:m,timeout:0,signal:_};return ye(this._normalizeSSL(t),S).then(I=>I.data)}toJSON(){throw new lt("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new mo({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new lt("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Jn;i.query=t||(_e.apiKey&&xT(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,e);if(!s.total)return[];const a=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=a.sortField||"name",i.sortOrder=a.sortOrder||"desc";const d=await a.queryItems(i,e);return d.total?d.results.filter(y=>y.type==="Web Map").map(y=>new Ff({portalItem:y})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const s=new Jn({query:i,disableExtraQuery:!0}),a=await this.queryGroups(s,e);if(!a.total)return[];const d=a.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=d.sortField||"name",s.sortOrder=d.sortOrder||"desc";const y=await d.queryItems(s,e);return y.total?y.results.filter(m=>m.type==="Web Scene").map(m=>new Ff({portalItem:m})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=Ff.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,s){let a=[];if(i){const d=s!=null?s.signal:null;a=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(a=a.map(y=>{const m=Object.assign(t?t.fromJSON(y):y,e);return typeof m.load=="function"&&m.load(d),m}))}else a=[];return a}};wt.AUTH_MODE_ANONYMOUS="anonymous",wt.AUTH_MODE_AUTO="auto",wt.AUTH_MODE_IMMEDIATE="immediate",w([T()],wt.prototype,"access",void 0),w([T()],wt.prototype,"allSSL",void 0),w([T()],wt.prototype,"authMode",void 0),w([T()],wt.prototype,"authorizedCrossOriginDomains",void 0),w([kt("authorizedCrossOriginDomains")],wt.prototype,"readAuthorizedCrossOriginDomains",null),w([T()],wt.prototype,"basemapGalleryGroupQuery",void 0),w([T({json:{name:"3DBasemapGalleryGroupQuery"}})],wt.prototype,"basemapGalleryGroupQuery3D",void 0),w([T()],wt.prototype,"bingKey",void 0),w([T()],wt.prototype,"canListApps",void 0),w([T()],wt.prototype,"canListData",void 0),w([T()],wt.prototype,"canListPreProvisionedItems",void 0),w([T()],wt.prototype,"canProvisionDirectPurchase",void 0),w([T()],wt.prototype,"canSearchPublic",void 0),w([T()],wt.prototype,"canShareBingPublic",void 0),w([T()],wt.prototype,"canSharePublic",void 0),w([T()],wt.prototype,"canSignInArcGIS",void 0),w([T()],wt.prototype,"canSignInIDP",void 0),w([T()],wt.prototype,"colorSetsGroupQuery",void 0),w([T()],wt.prototype,"commentsEnabled",void 0),w([T({type:Date})],wt.prototype,"created",void 0),w([T()],wt.prototype,"credential",void 0),w([T()],wt.prototype,"culture",void 0),w([T()],wt.prototype,"currentVersion",void 0),w([T()],wt.prototype,"customBaseUrl",void 0),w([T()],wt.prototype,"defaultBasemap",void 0),w([kt("defaultBasemap")],wt.prototype,"readDefaultBasemap",null),w([T()],wt.prototype,"defaultDevBasemap",void 0),w([kt("defaultDevBasemap")],wt.prototype,"readDefaultDevBasemap",null),w([T({type:Ae})],wt.prototype,"defaultExtent",void 0),w([T()],wt.prototype,"defaultVectorBasemap",void 0),w([kt("defaultVectorBasemap")],wt.prototype,"readDefaultVectorBasemap",null),w([T()],wt.prototype,"description",void 0),w([T()],wt.prototype,"devBasemapGalleryGroupQuery",void 0),w([T()],wt.prototype,"eueiEnabled",void 0),w([T({readOnly:!0})],wt.prototype,"extraQuery",null),w([T()],wt.prototype,"featuredGroups",void 0),w([T()],wt.prototype,"featuredItemsGroupQuery",void 0),w([T()],wt.prototype,"galleryTemplatesGroupQuery",void 0),w([T()],wt.prototype,"livingAtlasGroupQuery",void 0),w([T()],wt.prototype,"hasCategorySchema",void 0),w([T()],wt.prototype,"helpBase",void 0),w([T()],wt.prototype,"helperServices",void 0),w([T()],wt.prototype,"helpMap",void 0),w([T()],wt.prototype,"homePageFeaturedContent",void 0),w([T()],wt.prototype,"homePageFeaturedContentCount",void 0),w([T()],wt.prototype,"httpPort",void 0),w([T()],wt.prototype,"httpsPort",void 0),w([T()],wt.prototype,"id",void 0),w([T()],wt.prototype,"ipCntryCode",void 0),w([T({readOnly:!0})],wt.prototype,"isOrganization",null),w([T()],wt.prototype,"isPortal",void 0),w([T()],wt.prototype,"isReadOnly",void 0),w([T({readOnly:!0})],wt.prototype,"itemPageUrl",null),w([T()],wt.prototype,"layerTemplatesGroupQuery",void 0),w([T()],wt.prototype,"maxTokenExpirationMinutes",void 0),w([T({type:Date})],wt.prototype,"modified",void 0),w([T()],wt.prototype,"name",void 0),w([T()],wt.prototype,"portalHostname",void 0),w([T()],wt.prototype,"portalMode",void 0),w([T()],wt.prototype,"portalProperties",void 0),w([T()],wt.prototype,"region",void 0),w([T({readOnly:!0})],wt.prototype,"restUrl",null),w([T()],wt.prototype,"rotatorPanels",void 0),w([T()],wt.prototype,"showHomePageDescription",void 0),w([T()],wt.prototype,"sourceJSON",void 0),w([T()],wt.prototype,"staticImagesUrl",void 0),w([T({json:{name:"2DStylesGroupQuery"}})],wt.prototype,"stylesGroupQuery2d",void 0),w([T({json:{name:"stylesGroupQuery"}})],wt.prototype,"stylesGroupQuery3d",void 0),w([T()],wt.prototype,"supportsHostedServices",void 0),w([T()],wt.prototype,"symbolSetsGroupQuery",void 0),w([T()],wt.prototype,"templatesGroupQuery",void 0),w([T()],wt.prototype,"thumbnail",void 0),w([T({readOnly:!0})],wt.prototype,"thumbnailUrl",null),w([T()],wt.prototype,"units",void 0),w([T()],wt.prototype,"url",void 0),w([T()],wt.prototype,"urlKey",void 0),w([kt("urlKey")],wt.prototype,"readUrlKey",null),w([T()],wt.prototype,"user",void 0),w([kt("user")],wt.prototype,"readUser",null),w([T()],wt.prototype,"use3dBasemaps",void 0),w([T()],wt.prototype,"useStandardizedQuery",void 0),w([T()],wt.prototype,"useVectorBasemaps",void 0),w([T()],wt.prototype,"vectorBasemapGalleryGroupQuery",void 0),wt=mo=w([W("esri.portal.Portal")],wt);const Lr=wt,x6=new FinalizationRegistry(t=>{t.remove()});function tF(t){const e=fe;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const eF=mt.getLogger("esri.assets");function Me(t){if(!_e.assetsPath)throw eF.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new lt("assets:path-not-set","config.assetsPath is not set");return tu(_e.assetsPath,t)}let go=class extends Rt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&Qr(e)?mt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const s=this.cdnUrl;if(s==null)throw new lt("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:s}=await bt(()=>import("./resourceUtils-23093893.js"),[]);return s(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&Qr(e)&&(e=I5(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};w([T()],go.prototype,"portalItem",void 0),w([T({type:String,value:null})],go.prototype,"path",null),w([Ne("path")],go.prototype,"_castPath",null),w([T({type:String,readOnly:!0})],go.prototype,"url",null),w([T({type:String,readOnly:!0})],go.prototype,"cdnUrl",null),w([T({type:String,readOnly:!0})],go.prototype,"itemRelativeUrl",null),go=w([W("esri.portal.PortalItemResource")],go);const iF=go;let B0=class extends Rt{constructor(e){super(e),this.created=null,this.rating=null}};w([T()],B0.prototype,"created",void 0),w([T()],B0.prototype,"rating",void 0),B0=w([W("esri.portal.PortalRating")],B0);const Dv=B0;var Zl;const rF=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),sF=new Set(["KML","GeoJson","CSV"]);let Zt=Zl=class extends Zd(Wo){static from(t){return Xh(Zl,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new Ae(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",s="16";let a,d=!1,y=!1,m=!1,_=!1,S=!1,I=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(d=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(y=e.includes("Table"),m=e.includes("Route Layer"),_=e.includes("Markup"),S=e.includes("Spatiotemporal"),I=e.includes("UtilityNetwork"),a=S&&y?"spatiotemporaltable":y?"table":m?"routelayer":_?"markup":S?"spatiotemporal":d?"featureshosted":I?"utilitynetwork":"features"):a=t==="map service"||t==="wms"||t==="wmts"?d||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):a=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="360 vr experience"?"360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":t==="data pipeline"?"datapipelines":"maps",a?Me(i+a+s+".png"):null}get isLayer(){return this.type!=null&&rF.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&fe&&!fe.findCredential(t)&&(t=fe._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Lr.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof Dv&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Dv({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:ot(this.applicationProxies),avgRating:this.avgRating,categories:ot(this.categories),created:ot(this.created),culture:this.culture,description:this.description,extent:ot(this.extent),groupCategories:ot(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ot(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ot(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ot(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ot(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Zl({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const s of["tags","typeKeywords","categories"])t[s]=(i=t[s])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await Pr(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return Pr(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await Pr(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Dv(e)):null}fetchRelatedItems(t,e){return Pr(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Zl)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return Pr(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>Pr(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new lt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new lt("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await Pr(e).signIn();const{copyResources:s,folder:a,tags:d,title:y}=t||{},m={method:"post",query:{copyPrivateResources:s==="all",folder:typeof a=="string"?a:a==null?void 0:a.id,includeResources:!!s,tags:d==null?void 0:d.join(","),title:y}},{itemId:_}=await e.request(`${i}/copy`,m);return new Zl({id:_,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,s={method:"post"};if(typeof e=="string")gu(e)?s.query={data:e}:s.query={url:Kr(e)},i!=null&&(s.query.filename=i);else{const a=new FormData;i!=null?a.append("file",e,i):a.append("file",e),s.body=a}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new lt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await bt(()=>import("./resourceUtils-23093893.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:s}=await bt(()=>import("./resourceUtils-23093893.js"),[]);return t.portalItem=this,s(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await bt(()=>import("./resourceUtils-23093893.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new lt("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await bt(()=>import("./resourceUtils-23093893.js"),[]);return e(this,t)}resourceFromPath(t){return new iF({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:ot(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ot(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ot(this.typeKeywords),url:this.url};return U8(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Zl({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};w([T({type:["private","shared","org","public"]})],Zt.prototype,"access",void 0),w([T()],Zt.prototype,"accessInformation",void 0),w([T({type:String})],Zt.prototype,"apiKey",void 0),w([T({json:{read:{source:"appProxies"}}})],Zt.prototype,"applicationProxies",void 0),w([T()],Zt.prototype,"avgRating",void 0),w([T()],Zt.prototype,"categories",void 0),w([T({type:Date})],Zt.prototype,"created",void 0),w([T()],Zt.prototype,"culture",void 0),w([T()],Zt.prototype,"description",void 0),w([T({readOnly:!0})],Zt.prototype,"displayName",null),w([T({type:Ae})],Zt.prototype,"extent",void 0),w([kt("extent")],Zt.prototype,"readExtent",null),w([T()],Zt.prototype,"groupCategories",void 0),w([T({readOnly:!0})],Zt.prototype,"iconUrl",null),w([T()],Zt.prototype,"id",void 0),w([T({readOnly:!0})],Zt.prototype,"isLayer",null),w([T({type:Boolean,readOnly:!0})],Zt.prototype,"isOrgItem",void 0),w([T()],Zt.prototype,"itemControl",void 0),w([T({readOnly:!0})],Zt.prototype,"itemPageUrl",null),w([T({readOnly:!0})],Zt.prototype,"itemUrl",null),w([T()],Zt.prototype,"licenseInfo",void 0),w([T({type:Date})],Zt.prototype,"modified",void 0),w([T()],Zt.prototype,"name",void 0),w([T()],Zt.prototype,"numComments",void 0),w([T()],Zt.prototype,"numRatings",void 0),w([T()],Zt.prototype,"numViews",void 0),w([T()],Zt.prototype,"owner",void 0),w([T()],Zt.prototype,"ownerFolder",void 0),w([T({type:Lr})],Zt.prototype,"portal",void 0),w([T()],Zt.prototype,"screenshots",void 0),w([T()],Zt.prototype,"size",void 0),w([T()],Zt.prototype,"snippet",void 0),w([T()],Zt.prototype,"sourceJSON",void 0),w([T({type:String})],Zt.prototype,"sourceUrl",void 0),w([T({type:String})],Zt.prototype,"spatialReference",void 0),w([T()],Zt.prototype,"tags",void 0),w([T()],Zt.prototype,"thumbnail",void 0),w([T({readOnly:!0})],Zt.prototype,"thumbnailUrl",null),w([T()],Zt.prototype,"title",void 0),w([T()],Zt.prototype,"type",void 0),w([T()],Zt.prototype,"typeKeywords",void 0),w([T({type:String,json:{read(t,e){var i;if(sF.has(e.type)){const s=(i=this.portal)==null?void 0:i.restUrl;t||(t=s&&this.id?`${s}/content/items/${this.id}/data`:null)}return t}}})],Zt.prototype,"url",void 0),w([T({readOnly:!0})],Zt.prototype,"userItemUrl",null),Zt=Zl=w([W("esri.portal.PortalItem")],Zt);const Jp=Zt,OT=Object.freeze(Object.defineProperty({__proto__:null,default:Jp},Symbol.toStringTag,{value:"Module"})),S6=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,nF={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function $6(t){return t in nF}const H0=[],Tc=new Map;function T6(t){for(const e of Tc.keys())CT(t.pattern,e)&&Tc.delete(e)}function oF(t){return H0.includes(t)||(T6(t),H0.unshift(t)),{remove(){const e=H0.indexOf(t);e>-1&&(H0.splice(e,1),T6(t))}}}async function PT(t){const e=dn();Tc.has(t)||Tc.set(t,lF(t,e));const i=Tc.get(t);return i&&await hF.add(i),i}function aF(t){if(!S6.test(t))return null;const e=S6.exec(t);if(e===null)return null;const[,i,s]=e,a=i+(s?"-"+s.toUpperCase():"");return $6(a)?a:$6(i)?i:null}async function lF(t,e){const i=[];for(const s of H0)if(CT(s.pattern,t))try{return await s.fetchMessageBundle(t,e)}catch(a){i.push(a)}throw i.length?new lt("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new lt("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function CT(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}F5(()=>{Tc.clear()});const hF=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=mn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function uF(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await PT("esri/t9n/basemaps");return i[t]||i[e]}const Nb={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Me("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Me("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Me("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Me("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Me("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Me("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Me("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Me("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Me("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Me("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Me("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Me("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Me("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Me("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Me("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Me("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function sct(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}const nct={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function NT(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function V5(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function oct(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function cF(t,e){const i=fe==null?void 0:fe.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const s=t.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const a=`${t.substring(0,s)}/rest/info`,d=e!=null?e.signal:null,{data:y}=await ye(a,{query:{f:"json"},responseType:"json",signal:d});return(y==null?void 0:y.owningSystemUrl)||null}function pF(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function dF(t){return pF(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function fF(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function yF(t){return!!fF(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const mF=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),gF=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function vF(t){return t.layerContainerType==="basemap"?mF:t.layerContainerType==="operational-layers"?gF:null}function bF(t,e){if(e.restrictedWebMapWriting){const i=vF(e);return i==null||i.has(t.type)&&!V5(t)}return!0}function wF(t,e){if(e)if(V5(t)){const i=Jd("featureCollection.layers",e),s=i&&i[0]&&i[0].layerDefinition;s&&M6(t,s)}else t.type!=="group"&&M6(t,e)}function M6(t,e){"maxScale"in t&&(e.maxScale=hm(t.maxScale)??void 0),"minScale"in t&&(e.minScale=hm(t.minScale)??void 0)}function _F(t,e){if(wF(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=hm(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(V5(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function E6(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new lt("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(bF(t,i)){const s={};return t.write(s,i)?s:null}return e!=null&&_F(t,e=ot(e)),e}var q1;let xF=0;const LT="esri.Basemap";let us=q1=class extends Zd(Wo){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+xF++,this.baseLayers=new Vt,this.referenceLayers=new Vt;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&mt.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.addHandles([this.baseLayers.on("after-add",s=>e(s.item)),this.referenceLayers.on("after-add",s=>e(s.item)),this.baseLayers.on("after-remove",s=>i(s.item)),this.referenceLayers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(t=>{mt.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const s of t)s.destroy();const e=this.referenceLayers.removeAll();for(const s of e)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Qh(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const s=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(a=>{const d=E6(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);d!=null&&s.push(d)}),this.referenceLayers.forEach(a=>{const d=E6(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);d!=null&&(a.type!=="scene"&&(d.isReference=!0),s.push(d))})),e.baseMapLayers=s}set referenceLayers(t){this._set("referenceLayers",Qh(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Cg(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Jy(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Jy(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new q1({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=ot(i);return s.url&&Qn(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Qn(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;Ke(t);const s=[];if(e){const a=e.context?e.context.url:null;if(s.push(this._loadLayersFromJSON(e.data,a,t)),e.data.id&&!e.data.title){const d=e.data.id;s.push(uF(d).then(y=>{y&&this.read({title:y},e.context)}))}}else i&&s.push(this._loadFromItem(i,t));await Promise.all(s)}async _loadLayersFromJSON(t,e,i){const s=this.resourceInfo&&this.resourceInfo.context,a=this.portalItem&&this.portalItem.portal||s&&s.portal||null,d=$F[(s==null?void 0:s.origin)||""]??"web-map",{populateOperationalLayers:y}=await bt(()=>import("./layersCreator-0ca3f5b3.js"),["assets/layersCreator-0ca3f5b3.js","assets/lazyLayerLoader-d6b2dbfb.js","assets/portalLayers-ee302469.js","assets/layersLoader-7b62993d.js","assets/fetchService-667ec519.js","assets/jsonContext-185d068a.js","assets/styleUtils-60111c84.js"]),m=[];if(Ke(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const _={context:{origin:d,url:e,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},S=P=>d==="web-scene"&&P.layerType==="ArcGISSceneServiceLayer"||P.isReference,I=y(this.baseLayers,t.baseMapLayers.filter(P=>!S(P)),_);m.push(I);const A=y(this.referenceLayers,t.baseMapLayers.filter(S),_);m.push(A)}await mu(m)}async _loadFromItem(t,e){const i=await t.load(e),s=await i.fetchData("json",e),a=er(t.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:SF[t.type||""]??"web-map",portal:t.portal||Lr.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||Lr.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,e)}static fromId(t){const e=Nb[t];if(!e)return null;if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),um(mt.getLogger(LT),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return q1.fromJSON(e)}};w([T({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,s){this._writeBaseLayers(t,e,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Vt}},writer(t,e,i,s){this._writeBaseLayers(t,e,s)}}}}}})],us.prototype,"baseLayers",null),w([T({type:String,json:{origins:{"web-scene":{write:!0}}}})],us.prototype,"id",void 0),w([T({type:Jp})],us.prototype,"portalItem",void 0),w([T()],us.prototype,"referenceLayers",null),w([T({readOnly:!0})],us.prototype,"resourceInfo",void 0),w([T({type:te})],us.prototype,"spatialReference",void 0),w([T()],us.prototype,"thumbnailUrl",void 0),w([T({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],us.prototype,"title",void 0),w([At("title")],us.prototype,"writeTitle",null),us=q1=w([W(LT)],us);const SF={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},$F={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},vm=us,TF=Object.freeze(Object.defineProperty({__proto__:null,default:vm},Symbol.toStringTag,{value:"Module"})),bm={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function RT(t){return!!bm[t]||!!bm[t.toLowerCase()]}function G5(t){return bm[t]??bm[t.toLowerCase()]}function MF(t){return[...G5(t)]}function Fv(t,e,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?t+(e-t)*s:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function jT(t,e,i,s=1){const a=(t%360+360)%360/360,d=i<=.5?i*(e+1):i+e-i*e,y=2*i-d;return[Math.round(255*Fv(y,d,a+1/3)),Math.round(255*Fv(y,d,a)),Math.round(255*Fv(y,d,a-1/3)),s]}function EF(t){const e=t.length>5,i=e?8:4,s=(1<<i)-1,a=e?1:17,d=e?t.length===9:t.length===5;let y=Number("0x"+t.substr(1));if(isNaN(y))return null;const m=[0,0,0,1];let _;return d&&(_=y&s,y>>=i,m[3]=a*_/255),_=y&s,y>>=i,m[2]=a*_,_=y&s,y>>=i,m[1]=a*_,_=y&s,y>>=i,m[0]=a*_,m}function xn(){return[0,0,0]}function IF(t){return[t[0],t[1],t[2]]}function Xd(t,e,i){return[t,e,i]}function AF(t){const e=xn(),i=Math.min(3,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function kF(t,e){return new Float64Array(t,e,3)}function DT(){return xn()}function FT(){return Xd(1,1,1)}function zT(){return Xd(1,0,0)}function VT(){return Xd(0,1,0)}function GT(){return Xd(0,0,1)}const OF=DT(),PF=FT(),CF=zT(),NF=VT(),LF=GT();Object.freeze(Object.defineProperty({__proto__:null,ONES:PF,UNIT_X:CF,UNIT_Y:NF,UNIT_Z:LF,ZEROS:OF,clone:IF,create:xn,createView:kF,fromArray:AF,fromValues:Xd,ones:FT,unitX:zT,unitY:VT,unitZ:GT,zeros:DT},Symbol.toStringTag,{value:"Module"}));let U5=1e-6;function Is(){return U5}function RF(t){U5=t}const Dg=Math.random,jF=Math.PI/180,DF=180/Math.PI;function q5(t){return t*jF}function FF(t){return t*DF}function zF(t,e){return Math.abs(t-e)<=U5*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Dg,equals:zF,getEpsilon:Is,setEpsilon:RF,toDegree:FF,toRadian:q5},Symbol.toStringTag,{value:"Module"}));function Fg(t){const e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function wm(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function zg(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function UT(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function B5(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function qT(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function BT(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function VF(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function GF(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function UF(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function qF(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function BF(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function HF(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function WF(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function HT(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function JF(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function WT(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(i*i+s*s+a*a)}function JT(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2];return i*i+s*s+a*a}function KT(t){const e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function KF(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function YF(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _m(t,e){const i=e[0],s=e[1],a=e[2];let d=i*i+s*s+a*a;return d>0&&(d=1/Math.sqrt(d),t[0]=e[0]*d,t[1]=e[1]*d,t[2]=e[2]*d),t}function YT(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ZF(t,e,i){const s=e[0],a=e[1],d=e[2],y=i[0],m=i[1],_=i[2];return t[0]=a*_-d*m,t[1]=d*y-s*_,t[2]=s*m-a*y,t}function XF(t,e,i,s){const a=e[0],d=e[1],y=e[2];return t[0]=a+s*(i[0]-a),t[1]=d+s*(i[1]-d),t[2]=y+s*(i[2]-y),t}function QF(t,e,i,s,a,d){const y=d*d,m=y*(2*d-3)+1,_=y*(d-2)+d,S=y*(d-1),I=y*(3-2*d);return t[0]=e[0]*m+i[0]*_+s[0]*S+a[0]*I,t[1]=e[1]*m+i[1]*_+s[1]*S+a[1]*I,t[2]=e[2]*m+i[2]*_+s[2]*S+a[2]*I,t}function tz(t,e,i,s,a,d){const y=1-d,m=y*y,_=d*d,S=m*y,I=3*d*m,A=3*_*y,P=_*d;return t[0]=e[0]*S+i[0]*I+s[0]*A+a[0]*P,t[1]=e[1]*S+i[1]*I+s[1]*A+a[1]*P,t[2]=e[2]*S+i[2]*I+s[2]*A+a[2]*P,t}function ez(t,e){e=e||1;const i=Dg,s=2*i()*Math.PI,a=2*i()-1,d=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(s)*d,t[1]=Math.sin(s)*d,t[2]=a*e,t}function iz(t,e,i){const s=e[0],a=e[1],d=e[2];return t[0]=i[0]*s+i[4]*a+i[8]*d+i[12],t[1]=i[1]*s+i[5]*a+i[9]*d+i[13],t[2]=i[2]*s+i[6]*a+i[10]*d+i[14],t}function rz(t,e,i){const s=e[0],a=e[1],d=e[2];return t[0]=s*i[0]+a*i[3]+d*i[6],t[1]=s*i[1]+a*i[4]+d*i[7],t[2]=s*i[2]+a*i[5]+d*i[8],t}function sz(t,e,i){const s=i[0],a=i[1],d=i[2],y=i[3],m=e[0],_=e[1],S=e[2];let I=a*S-d*_,A=d*m-s*S,P=s*_-a*m,L=a*P-d*A,j=d*I-s*P,F=s*A-a*I;const V=2*y;return I*=V,A*=V,P*=V,L*=2,j*=2,F*=2,t[0]=m+I+L,t[1]=_+A+j,t[2]=S+P+F,t}function nz(t,e,i,s){const a=[],d=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],d[0]=a[0],d[1]=a[1]*Math.cos(s)-a[2]*Math.sin(s),d[2]=a[1]*Math.sin(s)+a[2]*Math.cos(s),t[0]=d[0]+i[0],t[1]=d[1]+i[1],t[2]=d[2]+i[2],t}function oz(t,e,i,s){const a=[],d=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],d[0]=a[2]*Math.sin(s)+a[0]*Math.cos(s),d[1]=a[1],d[2]=a[2]*Math.cos(s)-a[0]*Math.sin(s),t[0]=d[0]+i[0],t[1]=d[1]+i[1],t[2]=d[2]+i[2],t}function az(t,e,i,s){const a=[],d=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],d[0]=a[0]*Math.cos(s)-a[1]*Math.sin(s),d[1]=a[0]*Math.sin(s)+a[1]*Math.cos(s),d[2]=a[2],t[0]=d[0]+i[0],t[1]=d[1]+i[1],t[2]=d[2]+i[2],t}function lz(t,e){wm(zf,t),wm(Vf,e),_m(zf,zf),_m(Vf,Vf);const i=YT(zf,Vf);return i>1?0:i<-1?Math.PI:Math.acos(i)}const zf=xn(),Vf=xn();function hz(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function uz(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function cz(t,e){if(t===e)return!0;const i=t[0],s=t[1],a=t[2],d=e[0],y=e[1],m=e[2],_=Is();return Math.abs(i-d)<=_*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-y)<=_*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(a-m)<=_*Math.max(1,Math.abs(a),Math.abs(m))}function pz(t,e,i){const s=i[0]-e[0],a=i[1]-e[1],d=i[2]-e[2];let y=s*s+a*a+d*d;return y>0?(y=1/Math.sqrt(y),t[0]=s*y,t[1]=a*y,t[2]=d*y,t):(t[0]=0,t[1]=0,t[2]=0,t)}const dz=B5,fz=qT,yz=BT,mz=WT,gz=JT,vz=Fg,bz=KT;Object.freeze(Object.defineProperty({__proto__:null,abs:UF,add:UT,angle:lz,bezier:tz,ceil:VF,copy:wm,cross:ZF,direction:pz,dist:mz,distance:WT,div:yz,divide:BT,dot:YT,equals:cz,exactEquals:uz,floor:GF,hermite:QF,inverse:YF,len:vz,length:Fg,lerp:XF,max:HF,min:BF,mul:fz,multiply:qT,negate:KF,normalize:_m,random:ez,rotateX:nz,rotateY:oz,rotateZ:az,round:WF,scale:HT,scaleAndAdd:JF,set:zg,sign:qF,sqrDist:gz,sqrLen:bz,squaredDistance:JT,squaredLength:KT,str:hz,sub:dz,subtract:B5,transformMat3:rz,transformMat4:iz,transformQuat:sz},Symbol.toStringTag,{value:"Module"}));function wz(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function _z(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t}function xz(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function ZT(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function XT(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function QT(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Sz(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function $z(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Tz(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Mz(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function Ez(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Iz(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function Az(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t}function tM(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2],d=e[3]-t[3];return Math.sqrt(i*i+s*s+a*a+d*d)}function eM(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2],d=e[3]-t[3];return i*i+s*s+a*a+d*d}function iM(t){const e=t[0],i=t[1],s=t[2],a=t[3];return Math.sqrt(e*e+i*i+s*s+a*a)}function rM(t){const e=t[0],i=t[1],s=t[2],a=t[3];return e*e+i*i+s*s+a*a}function kz(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Oz(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Pz(t,e){const i=e[0],s=e[1],a=e[2],d=e[3];let y=i*i+s*s+a*a+d*d;return y>0&&(y=1/Math.sqrt(y),t[0]=i*y,t[1]=s*y,t[2]=a*y,t[3]=d*y),t}function Cz(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sM(t,e,i,s){const a=e[0],d=e[1],y=e[2],m=e[3];return t[0]=a+s*(i[0]-a),t[1]=d+s*(i[1]-d),t[2]=y+s*(i[2]-y),t[3]=m+s*(i[3]-m),t}function Nz(t,e){const i=Dg;let s,a,d,y,m,_;e=e||1;do s=2*i()-1,a=2*i()-1,m=s*s+a*a;while(m>=1);do d=2*i()-1,y=2*i()-1,_=d*d+y*y;while(_>=1);const S=Math.sqrt((1-m)/_);return t[0]=e*s,t[1]=e*a,t[2]=e*d*S,t[3]=e*y*S,t}function Lz(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3];return t[0]=i[0]*s+i[4]*a+i[8]*d+i[12]*y,t[1]=i[1]*s+i[5]*a+i[9]*d+i[13]*y,t[2]=i[2]*s+i[6]*a+i[10]*d+i[14]*y,t[3]=i[3]*s+i[7]*a+i[11]*d+i[15]*y,t}function Rz(t,e,i){const s=e[0],a=e[1],d=e[2],y=i[0],m=i[1],_=i[2],S=i[3],I=S*s+m*d-_*a,A=S*a+_*s-y*d,P=S*d+y*a-m*s,L=-y*s-m*a-_*d;return t[0]=I*S+L*-y+A*-_-P*-m,t[1]=A*S+L*-m+P*-y-I*-_,t[2]=P*S+L*-_+I*-m-A*-y,t[3]=e[3],t}function jz(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Dz(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Fz(t,e){const i=t[0],s=t[1],a=t[2],d=t[3],y=e[0],m=e[1],_=e[2],S=e[3],I=Is();return Math.abs(i-y)<=I*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-m)<=I*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-_)<=I*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(d-S)<=I*Math.max(1,Math.abs(d),Math.abs(S))}const zz=ZT,Vz=XT,Gz=QT,Uz=tM,qz=eM,Bz=iM,Hz=rM;Object.freeze(Object.defineProperty({__proto__:null,add:xz,ceil:Sz,copy:wz,dist:Uz,distance:tM,div:Gz,divide:QT,dot:Cz,equals:Fz,exactEquals:Dz,floor:$z,inverse:Oz,len:Bz,length:iM,lerp:sM,max:Mz,min:Tz,mul:Vz,multiply:XT,negate:kz,normalize:Pz,random:Nz,round:Ez,scale:Iz,scaleAndAdd:Az,set:_z,sqrDist:qz,sqrLen:Hz,squaredDistance:eM,squaredLength:rM,str:jz,sub:zz,subtract:ZT,transformMat4:Lz,transformQuat:Rz},Symbol.toStringTag,{value:"Module"}));const I6=new Float32Array(1);function act(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Es(t,e,i){return Math.min(Math.max(t,e),i)}function lct(t){return(t&t-1)==0}function hct(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function uct(t,e,i){return t+(e-t)*i}function Wz(t){return t*Math.PI/180}function nM(t){return 180*t/Math.PI}function cct(t){return Math.acos(Es(t,-1,1))}function oM(t){return Math.asin(Es(t,-1,1))}function zv(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const xm=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Jz(t){return xm.setFloat64(0,t),xm.getBigInt64(0)}function Kz(t){return xm.setBigInt64(0,t),xm.getFloat64(0)}const Vv=BigInt("1000000");Yz(1);function Yz(t){const e=Jz(t=Math.abs(t)),i=Kz(e<=Vv?Vv:e-Vv);return Math.abs(t-i)}function pct(t){return aM(Math.max(-A6,Math.min(t,A6)))}function aM(t){return I6[0]=t,I6[0]}function dct(t,e){const i=Fg(t),s=oM(t[2]/i),a=Math.atan2(t[1]/i,t[0]/i);return zg(e,i,s,a),e}function fct(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],s=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(zv(e,1)&&zv(i,1)&&zv(s,1))}const A6=aM(34028234663852886e22);function Gf(t){return Es(kg(t),0,255)}function Uf(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let B1=class Yi{static blendColors(e,i,s,a=new Yi){return a.r=Math.round(e.r+(i.r-e.r)*s),a.g=Math.round(e.g+(i.g-e.g)*s),a.b=Math.round(e.b+(i.b-e.b)*s),a.a=e.a+(i.a-e.a)*s,a._sanitize()}static fromRgb(e,i){const s=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const a=s[2].split(/\s*,\s*/),d=s[1];if(d==="rgb"&&a.length===3||d==="rgba"&&a.length===4){const y=a[0];if(y.charAt(y.length-1)==="%"){const m=a.map(_=>2.56*parseFloat(_));return a.length===4&&(m[3]=parseFloat(a[3])),Yi.fromArray(m,i)}return Yi.fromArray(a.map(m=>parseFloat(m)),i)}if(d==="hsl"&&a.length===3||d==="hsla"&&a.length===4)return Yi.fromArray(jT(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100,parseFloat(a[3])),i)}return null}static fromHex(e,i=new Yi){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const s=e.length===4?4:8,a=(1<<s)-1;let d=Number("0x"+e.substr(1));return isNaN(d)?null:(["b","g","r"].forEach(y=>{const m=d&a;d>>=s,i[y]=s===4?17*m:m}),i.a=1,i)}static fromArray(e,i=new Yi){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const s=RT(e)?G5(e):null;return s&&Yi.fromArray(s,i)||Yi.fromRgb(e,i)||Yi.fromHex(e,i)}static fromJSON(e){return e&&new Yi([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Yi.fromString(e,this):Array.isArray(e)?Yi.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Yi||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),s=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${s.length<2?"0"+s:s}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Yi.AlphaMode.ALWAYS){const i=Gf(this.r),s=Gf(this.g),a=Gf(this.b);return e===Yi.AlphaMode.ALWAYS||this.a!==1?[i,s,a,Gf(255*this.a)]:[i,s,a]}clone(){return new Yi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(Uf(this.r,0,255)),this.g=Math.round(Uf(this.g,0,255)),this.b=Math.round(Uf(this.b,0,255)),this.a=Uf(this.a,0,1),this}_set(e,i,s,a){this.r=e,this.g=i,this.b=s,this.a=a}};B1.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(B1||(B1={}));const Xt=B1;function yct(t){}function Zz(t){return()=>t}function Lt(t,e={}){const i=t instanceof Ie?t:new Ie(t,e),s={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(s.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(s.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(s.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(s.nonNullable=e.nonNullable),T(s)}var Lb;let H1=Lb=class extends gt{constructor(t){super(t),this.type="none"}clone(){return new Lb({type:this.type})}};w([Lt({none:"none",stayAbove:"stay-above"})],H1.prototype,"type",void 0),H1=Lb=w([W("esri.ground.NavigationConstraint")],H1);function H5(t){const e=kg(100*(1-t));return Math.max(0,Math.min(e,100))}function Td(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var Rb;let vo=Rb=class extends Zd(Wo){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Vt;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&mt.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.addHandles([this.layers.on("after-add",s=>e(s.item)),this.layers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(t=>{Qi(t)||mt.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Qh(t,this._get("layers")))}writeLayers(t,e,i,s){const a=[];t&&(s={...s,layerContainerType:"ground"},t.forEach(d=>{if("write"in d){const y={};Zz(d)().write(y,s)&&a.push(y)}else s&&s.messages&&s.messages.push(new lt("layer:unsupported",`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in the ground`,{layer:d}))})),e.layers=a}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Cg(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await bt(()=>import("./ElevationQuery-fd51571a.js"),[]);Ke(e);const s=new i,a=this.layers.filter(k6).toArray();return s.queryAll(a,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await bt(()=>import("./ElevationQuery-fd51571a.js"),[]);Ke(e);const s=new i,a=this.layers.filter(k6).toArray();return s.createSamplerAll(a,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:ot(this.surfaceColor),navigationConstraint:ot(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Rb({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const s=e&&e.origin||"web-scene",a=e&&e.portal||null,d=e&&e.url||null;return bt(()=>import("./layersCreator-0ca3f5b3.js"),["assets/layersCreator-0ca3f5b3.js","assets/lazyLayerLoader-d6b2dbfb.js","assets/portalLayers-ee302469.js","assets/layersLoader-7b62993d.js","assets/fetchService-667ec519.js","assets/jsonContext-185d068a.js","assets/styleUtils-60111c84.js"]).then(({populateOperationalLayers:y})=>{Ke(i);const m=[];if(t.layers&&Array.isArray(t.layers)){const _={context:{origin:s,url:d,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};m.push(y(this.layers,t.layers,_))}return mu(m)}).then(()=>{})}};function Xz(t){return t&&"createElevationSampler"in t}function k6(t){return t.type==="elevation"||Xz(t)}w([T({json:{read:!1}})],vo.prototype,"layers",null),w([At("layers")],vo.prototype,"writeLayers",null),w([T({readOnly:!0})],vo.prototype,"resourceInfo",void 0),w([T({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ee,read:{reader:Td,source:"transparency"},write:{writer:(t,e)=>{e.transparency=H5(t)},target:"transparency"}}})],vo.prototype,"opacity",void 0),w([T({type:Xt,json:{type:[Ee],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],vo.prototype,"surfaceColor",void 0),w([T({type:H1,json:{write:!0}})],vo.prototype,"navigationConstraint",void 0),vo=Rb=w([W("esri.Ground")],vo);const Sm=vo;let zu=class extends Vt{constructor(e){super(e),this.getCollections=null}initialize(){this.own(w$(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const s of e)s!=null&&(i=this._processCollection(i,s));this.splice(i,this.length)}_createNewInstance(e){return new Vt(e)}_processCollection(e,i){if(!i)return e;const s=this.itemFilterFunction??(a=>!!a);for(const a of i)if(a){if(s(a)){const d=this.indexOf(a,e);d>=0?d!==e&&this.reorder(a,e):this.add(a,e),++e}if(this.getChildrenFunction){const d=this.getChildrenFunction(a);if(Array.isArray(d))for(const y of d)e=this._processCollection(e,y);else e=this._processCollection(e,d)}}return e}};w([T()],zu.prototype,"getCollections",void 0),w([T()],zu.prototype,"getChildrenFunction",void 0),w([T()],zu.prototype,"itemFilterFunction",void 0),zu=w([W("esri.core.CollectionFlattener")],zu);const Fc=zu,Qz=[["binary","application/octet-stream","bin",""]];function jb(t,e){return J5(eV(t,e))}function Db(t,e){return J5(iV(t,e))}function gct(t,e){return lM(tV(t,e))}function W5(t){return[...Qz,...t]}function tV(t,e){return W5(e).find(i=>J5(i)===t)}function eV(t,e){return W5(e).find(i=>lM(i)===t)}function iV(t,e){const i=t.toLowerCase();return W5(e).find(s=>rV(s).some(a=>i.endsWith(a)))}function J5(t){return t==null?void 0:t[0]}function lM(t){return t==null?void 0:t[1]}function rV(t){return(t==null?void 0:t[2].split(","))??[]}function vct(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function sV(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=dF(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!yF(t)||t.type==="scene"&&!nV(t))}function nV(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:s}=e,a=jb("model/gltf-binary",i)??Db("glb",i);return a!=null&&s.includes(a)}const O6=mt.getLogger("esri.support.basemapUtils");function oV(){return{}}function aV(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function lV(t,e){let i;if(typeof t=="string"){if(!(t in Nb)){const s=Object.entries(Nb).filter(([a,d])=>_e.apiKey&&!d.classic||!_e.apiKey&&d.classic&&!d.deprecated).map(([a])=>`"${a}"`).join(", ");return O6.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`),null}e&&(i=e[t]),i||(i=vm.fromId(t),e&&(e[t]=i))}else i=ki(vm,t);return i!=null&&i.destroyed&&(O6.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function hV(t){return new Fc({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function Gv(t){for(const e of t.values())e==null||e.destroy();t.clear()}const P6={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function uV(t){let e=null;if(typeof t=="string")if(t in P6){const i=P6[t];e=new Sm({resourceInfo:{data:{layers:[i]}}})}else mt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ki(Sm,t);return e}function zc(t,e,i=!1){let{hasM:s,hasZ:a}=t;Array.isArray(e)?e.length!==4||s||a?e.length===3&&i&&!s?(a=!0,s=!1):e.length===3&&s&&a&&(s=!1,a=!1):(s=!0,a=!0):(a=!a&&e.hasZ&&(!s||e.hasM),s=!s&&e.hasM&&(!a||e.hasZ)),t.hasZ=a,t.hasM=s}var Fb;function C6(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function cV(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Ta=Fb=class extends Ol{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):cV(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const s=i.points&&i.points[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Ae,i=this.hasZ,s=this.hasM,a=i?3:2,d=t[0],y=C6(Math.min),m=C6(Math.max);let _,S,I,A,[P,L]=d,[j,F]=d;for(let V=0,J=t.length;V<J;V++){const Q=t[V],[Z,et]=Q;if(P=y(P,Z),L=y(L,et),j=m(j,Z),F=m(F,et),i&&Q.length>2){const st=Q[2];_=y(_,st),I=m(I,st)}if(s&&Q.length>a){const st=Q[a];S=y(S,st),A=m(A,st)}}return e.xmin=P,e.ymin=L,e.xmax=j,e.ymax=F,e.spatialReference=this.spatialReference,i?(e.zmin=_,e.zmax=I):(e.zmin=void 0,e.zmax=void 0),s?(e.mmin=S,e.mmax=A):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=ot(this.points)}addPoint(t){return zc(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:ot(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new Fb(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=e[2],s=3),this.hasM&&(i.m=e[s]),new Yt(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Yt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(zc(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};w([T({readOnly:!0})],Ta.prototype,"cache",null),w([T()],Ta.prototype,"extent",null),w([T({type:[[Number]],json:{write:{isRequired:!0}}})],Ta.prototype,"points",void 0),w([At("points")],Ta.prototype,"writePoints",null),Ta=Fb=w([W("esri.geometry.Multipoint")],Ta),Ta.prototype.toJSON.isDefaultToJSON=!0;const t0=Ta;function bct(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function pV(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function hM(t,e){const i=e[0]-t[0],s=e[1]-t[1];if(t.length>2&&e.length>2){const a=t[2]-e[2];return Math.sqrt(i*i+s*s+a*a)}return Math.sqrt(i*i+s*s)}function dV(t,e,i){const s=t[0]+i*(e[0]-t[0]),a=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[s,a,t[2]+i*(e[2]-t[2])]:[s,a]}function fV(t,e,i,s){const[a,d]=e,[y,m]=i[s],[_,S]=i[s+1],I=_-y,A=S-m,P=I*I+A*A,L=(a-y)*I+(d-m)*A,j=Math.min(1,Math.max(0,L/P));return t[0]=y+I*j,t[1]=m+A*j,t}function wct(t,e,i){let s,a,d,y,m=!1,_=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(s=i.x,a=i.y;i.nextPoint();)d=i.x,y=i.y,a>e!=y>e&&t<(d-s)*(e-a)/(y-a)+s&&(m=!m),_=Math.min(_,yV(t,e,s,a,d,y)),s=d,a=y;return _===0?0:(m?1:-1)*Math.sqrt(_)}function yV(t,e,i,s,a,d){let y=i,m=s,_=a-y,S=d-m;if(_!==0||S!==0){const I=((t-y)*_+(e-m)*S)/(_*_+S*S);I>1?(y=a,m=d):I>0&&(y+=_*I,m+=S*I)}return _=t-y,S=e-m,_*_+S*S}function uM(t,e){return dV(t,e,.5)}function cM(t,e,i){const s=t.length;let a=0,d=0,y=0;for(let m=0;m<s;m++){const _=t[m],S=t[(m+1)%s];let I=2;a+=_[0]*S[1]-S[0]*_[1],_.length>2&&S.length>2&&i&&(d+=_[0]*S[2]-S[0]*_[2],I=3),_.length>I&&S.length>I&&e&&(y+=_[0]*S[I]-S[0]*_[I])}return a<=0&&d<=0&&y<=0}function mV(t){const e=t.length;return e>2&&wg(t[0],t[e-1])}function _ct(t){if("rings"in t&&(gV(t),t.rings.length>0&&!cM(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function gV(t){if("rings"in t)for(const e of t.rings)mV(e)||e.push(e[0].slice())}function xct(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let s=0;s<i;s++)e+=(t[s][0]-t[s+1][0])*(t[s][1]+t[s+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function pM(t){if(!t||t.numPoints<3)return 0;let e,i,s=0;if(t.seekPathStart(),!t.nextPoint())return 0;e=t.x,i=t.y;const a=e,d=i;for(;t.nextPoint();)s+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return s+=(e-a)*(i+d),-.5*s}function Sct(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function vV(t){return t?bV(t.rings,t.hasZ??!1):null}function bV(t,e){if(!t||!t.length)return null;const i=[],s=[],a=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let d=0,y=t.length;d<y;d++){const m=dM(t[d],e,a);m&&s.push(m)}if(s.sort((d,y)=>{let m=d[2]-y[2];return m===0&&e&&(m=d[4]-y[4]),m}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||e&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)),!i.length){const d=t[0]&&t[0].length?wV(t[0],e):null;if(!d)return null;i[0]=d[0],i[1]=d[1],e&&d.length>2&&(i[2]=d[2])}return i}function dM(t,e,i){let s=0,a=0,d=0,y=0,m=0;const _=t.length?t[0][0]:0,S=t.length?t[0][1]:0,I=t.length&&e?t[0][2]:0;for(let P=0;P<t.length;P++){const L=t[P],j=t[(P+1)%t.length],[F,V,J]=L,Q=F-_,Z=V-S,[et,st,nt]=j,pt=et-_,yt=st-S,$t=Q*yt-pt*Z;if(y+=$t,s+=(Q+pt)*$t,a+=(Z+yt)*$t,e&&L.length>2&&j.length>2){const Ot=J-I,Ct=nt-I,Nt=Q*Ct-pt*Ot;d+=(Ot+Ct)*Nt,m+=Nt}F<i[0]&&(i[0]=F),F>i[1]&&(i[1]=F),V<i[2]&&(i[2]=V),V>i[3]&&(i[3]=V),e&&(J<i[4]&&(i[4]=J),J>i[5]&&(i[5]=J))}if(y>0&&(y*=-1),m>0&&(m*=-1),!y)return null;y*=.5,m*=.5;const A=[s/(6*y)+_,a/(6*y)+S,y];return e&&(i[4]===i[5]||m===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=d/(6*m)+I,A[4]=m)),A}function wV(t,e){const i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let a=0,d=0,y=0,m=0;for(let _=0,S=t.length;_<S-1;_++){const I=t[_],A=t[_+1];if(I&&A){i[0]=I[0],i[1]=I[1],s[0]=A[0],s[1]=A[1],e&&I.length>2&&A.length>2&&(i[2]=I[2],s[2]=A[2]);const P=hM(i,s);if(P){a+=P;const L=uM(I,A);d+=P*L[0],y+=P*L[1],e&&L.length>2&&(m+=P*L[2])}}}return a>0?e?[d/a,y/a,m/a]:[d/a,y/a]:t.length?t[0]:null}function _V(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const s=[],a=[],d=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const y=dM(pV(t),t.hasZ,d);y&&a.push(y)}if(a.sort((y,m)=>{let _=y[2]-m[2];return _===0&&e&&(_=y[4]-m[4]),_}),a.length&&(s[0]=a[0][0],s[1]=a[0][1],e&&(s[2]=a[0][3]),(s[0]<d[0]||s[0]>d[1]||s[1]<d[2]||s[1]>d[3]||e&&(s[2]<d[4]||s[2]>d[5]))&&(s.length=0)),!s.length){t.reset(),t.nextPath();const y=t.numPoints?xV(t):null;if(!y)return null;s[0]=y[0],s[1]=y[1],e&&y.length>2&&(s[2]=y[2])}return s}function xV(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let a=0,d=0,y=0,m=0;if(t.nextPoint()){let _=t.x,S=t.y,I=t.z;for(;t.nextPoint();){const A=t.x,P=t.y,L=t.z;i[0]=_,i[1]=S,s[0]=A,s[1]=P,e&&(i[2]=I,s[2]=L);const j=hM(i,s);if(j){a+=j;const F=uM(i,s);d+=j*F[0],y+=j*F[1],e&&F.length>2&&(m+=j*F[2])}_=A,S=P,I=L}}return a>0?e?[d/a,y/a,m/a]:[d/a,y/a]:t.numPoints?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const SV=1e-6;function $ct(t){let e=0;for(t.reset();t.nextPath();)e+=pM(t);if(e<SV){const a=_V(t);return a?[a[0],a[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const s=[t.x,t.y];for(t.reset();t.nextPath();)TV(i,s,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=s[0],i[1]+=s[1],i}const $V=1/3;function TV(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const s=i.x,a=i.y;i.nextPoint();let d,y=i.x-s,m=i.y-a,_=0,S=0;for(;i.nextPoint();)_=i.x-s,S=i.y-a,d=.5*$V*(_*m-S*y),t[0]+=d*(y+_),t[1]+=d*(m+S),y=_,m=S;const I=pM(i),A=[s,a];return A[0]-=e[0],A[1]-=e[1],A[0]*=I,A[1]*=I,t[0]+=A[0],t[1]+=A[1],t}function to(t=kV){return[t[0],t[1],t[2],t[3]]}function Tct(t){return[t[0],t[1],t[2],t[3]]}function K5(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function MV(t,e,i,s,a=to()){return a[0]=t,a[1]=e,a[2]=i,a[3]=s,a}function Mct(t,e=to()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Ect(t,e){return new Ae({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function Ict(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Act(t,e,i){if(e!=null)if("length"in e)zb(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else K5(i,t)}function EV(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function IV(t){return t[1]>=t[3]?0:t[3]-t[1]}function kct(t){return EV(t)*IV(t)}function Oct(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function Pct(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function Cct(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function AV(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Nct(t){return t?K5(t,N6):to(N6)}function zb(t){return t!=null&&t.length===4}function Lct(t,e){return zb(t)&&zb(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const N6=[1/0,1/0,-1/0,-1/0],kV=[0,0,0,0];function fM(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function yM(t){return t.points!==void 0}function mM(t){return t.x!==void 0&&t.y!==void 0}function gM(t){return t.paths!==void 0}function vM(t){return t.rings!==void 0}function bM(t){function e(i,s){return i==null?s:s==null?i:t(i,s)}return e}const ll=bM(Math.min),hl=bM(Math.max);function Rct(t,e){return gM(e)?Vc(t,e.paths,!1,!1):vM(e)?Vc(t,e.rings,!1,!1):yM(e)?Y5(t,e.points,!1,!1,!1,!1):fM(e)?wM(t,e):(mM(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function jct(t){let e,i,s,a;for(t.reset(),e=s=1/0,i=a=-1/0;t.nextPath();){const d=OV(t);e=Math.min(d[0],e),s=Math.min(d[1],s),i=Math.max(d[2],i),a=Math.max(d[3],a)}return to([e,s,i,a])}function OV(t){let e,i,s,a;for(e=s=1/0,i=a=-1/0;t.nextPoint();)e=Math.min(t.x,e),s=Math.min(t.y,s),i=Math.max(t.x,i),a=Math.max(t.y,a);return to([e,s,i,a])}function Dct(t,e){return gM(e)?Vc(t,e.paths,!0,!1):vM(e)?Vc(t,e.rings,!0,!1):yM(e)?Y5(t,e.points,!0,!1,!0,!1):fM(e)?wM(t,e,!0,!1,!0,!1):(mM(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Vc(t,e,i,s){const a=i?3:2;if(!e.length||!e[0].length)return null;let d,y,m,_,[S,I]=e[0][0],[A,P]=e[0][0];for(let L=0;L<e.length;L++){const j=e[L];for(let F=0;F<j.length;F++){const V=j[F],[J,Q]=V;if(S=ll(S,J),I=ll(I,Q),A=hl(A,J),P=hl(P,Q),i&&V.length>2){const Z=V[2];d=ll(d,Z),y=hl(y,Z)}if(s&&V.length>a){const Z=V[a];m=ll(d,Z),_=hl(y,Z)}}}return i?s?(t[0]=S,t[1]=I,t[2]=d,t[3]=m,t[4]=A,t[5]=P,t[6]=y,t[7]=_,t.length=8,t):(t[0]=S,t[1]=I,t[2]=d,t[3]=A,t[4]=P,t[5]=y,t.length=6,t):s?(t[0]=S,t[1]=I,t[2]=m,t[3]=A,t[4]=P,t[5]=_,t.length=6,t):(t[0]=S,t[1]=I,t[2]=A,t[3]=P,t.length=4,t)}function wM(t,e,i,s,a,d){const y=e.xmin,m=e.xmax,_=e.ymin,S=e.ymax;let I=e.zmin,A=e.zmax,P=e.mmin,L=e.mmax;return a?(I=I||0,A=A||0,d?(P=P||0,L=L||0,t[0]=y,t[1]=_,t[2]=I,t[3]=P,t[4]=m,t[5]=S,t[6]=A,t[7]=L,t):(t[0]=y,t[1]=_,t[2]=I,t[3]=m,t[4]=S,t[5]=A,t)):d?(P=P||0,L=L||0,t[0]=y,t[1]=_,t[2]=P,t[3]=m,t[4]=S,t[5]=L,t):(t[0]=y,t[1]=_,t[2]=m,t[3]=S,t)}function Y5(t,e,i,s,a,d){const y=i?3:2,m=s&&d,_=i&&a;if(!e.length||!e[0].length)return null;let S,I,A,P,[L,j]=e[0],[F,V]=e[0];for(let J=0;J<e.length;J++){const Q=e[J],[Z,et]=Q;if(L=ll(L,Z),j=ll(j,et),F=hl(F,Z),V=hl(V,et),_&&Q.length>2){const st=Q[2];S=ll(S,st),I=hl(I,st)}if(m&&Q.length>y){const st=Q[y];A=ll(S,st),P=hl(I,st)}}return a?(S=S||0,I=I||0,d?(A=A||0,P=P||0,t[0]=L,t[1]=j,t[2]=S,t[3]=A,t[4]=F,t[5]=V,t[6]=I,t[7]=P,t):(t[0]=L,t[1]=j,t[2]=S,t[3]=F,t[4]=V,t[5]=I,t)):d?(A=A||0,P=P||0,t[0]=L,t[1]=j,t[2]=A,t[3]=F,t[4]=V,t[5]=P,t):(t[0]=L,t[1]=j,t[2]=F,t[3]=V,t)}function PV(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function CV(t){return t.points!==void 0}function NV(t){return t.x!==void 0&&t.y!==void 0}function LV(t){return t.paths!==void 0}function RV(t){return t.rings!==void 0}const Z5=[];function _M(t,e,i,s){return{xmin:t,ymin:e,xmax:i,ymax:s}}function xM(t,e,i,s,a,d){return{xmin:t,ymin:e,zmin:i,xmax:s,ymax:a,zmax:d}}function SM(t,e,i,s,a,d){return{xmin:t,ymin:e,mmin:i,xmax:s,ymax:a,mmax:d}}function $M(t,e,i,s,a,d,y,m){return{xmin:t,ymin:e,zmin:i,mmin:s,xmax:a,ymax:d,zmax:y,mmax:m}}function X5(t,e=!1,i=!1){return e?i?$M(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):xM(t[0],t[1],t[2],t[3],t[4],t[5]):i?SM(t[0],t[1],t[2],t[3],t[4],t[5]):_M(t[0],t[1],t[2],t[3])}function Fct(t){return t?PV(t)?t:NV(t)?DV(t):RV(t)?TM(t):LV(t)?MM(t):CV(t)?jV(t):null:null}function jV(t){const{hasZ:e,hasM:i,points:s}=t;return X5(Y5(Z5,s,e??!1,i??!1),e,i)}function DV(t){const{x:e,y:i,z:s,m:a}=t,d=a!=null;return s!=null?d?$M(e,i,s,a,e,i,s,a):xM(e,i,s,e,i,s):d?SM(e,i,a,e,i,a):_M(e,i,e,i)}function TM(t){const{hasZ:e,hasM:i,rings:s}=t,a=Vc(Z5,s,e??!1,i??!1);return a?X5(a,e,i):null}function MM(t){const{hasZ:e,hasM:i,paths:s}=t,a=Vc(Z5,s,e??!1,i??!1);return a?X5(a,e,i):null}var W1;function L6(t){return!Array.isArray(t[0])}let On=W1=class extends Ol{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let s=!1,a=!1;for(const y of e)y.hasZ&&(s=!0),y.hasM&&(a=!0);const d={rings:e.map(y=>{const m=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let S=0;S<m.length;S++)m[S].push(_)}if(a&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let S=0;S<m.length;S++)m[S].push(_)}return m}),spatialReference:i};return s&&(d.hasZ=!0),a&&(d.hasM=!0),new W1(d)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,s,a=null,d=null;return t&&!Array.isArray(t)?(a=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,s=t.hasM):a=t,a=a||[],e=e||te.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),d=a[0]&&a[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=d.length>3):i===void 0?i=s?d.length>3:d.length>2:s===void 0&&(s=i?d.length>3:d.length>2)),{rings:a,spatialReference:e,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=vV(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Yt;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=TM(this);if(!e)return null;const i=new Ae(e);return i.spatialReference=t,i}get isSelfIntersecting(){return UD(this.rings)}writeRings(t,e){e.rings=ot(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(L6(t)){const s=[];for(let a=0,d=t.length;a<d;a++)s[a]=t[a].toArray();e[i]=s}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new W1;return t.spatialReference=this.spatialReference,t.rings=ot(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const s=([a,d,y,m],[_,S,I,A])=>a===_&&d===S&&(y==null&&I==null||y===I)&&(m==null&&A==null||m===A);for(let a=0;a<this.rings.length;a++){const d=this.rings[a],y=t.rings[a];if(!wg(d,y,s))return!1}return!0}contains(t){if(!t)return!1;const e=Rg(t,this.spatialReference);return TT(this,e??t)}isClockwise(t){let e;return e=L6(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,cM(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],s=this.hasZ,a=this.hasM;return s&&!a?new Yt(i[0],i[1],i[2],void 0,this.spatialReference):a&&!s?new Yt(i[0],i[1],void 0,i[2],this.spatialReference):s&&a?new Yt(i[0],i[1],i[2],i[3],this.spatialReference):new Yt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(zc(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Yt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,s=e.map(a=>new Yt(a,i));return this.notifyChange("rings"),s}setPoint(t,e,i){return this._validateInputs(t,e)?(zc(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const s=this.rings[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};w([T({readOnly:!0})],On.prototype,"cache",null),w([T({readOnly:!0})],On.prototype,"centroid",null),w([T({readOnly:!0})],On.prototype,"extent",null),w([T({readOnly:!0})],On.prototype,"isSelfIntersecting",null),w([T({type:[[[Number]]],json:{write:{isRequired:!0}}})],On.prototype,"rings",void 0),w([At("rings")],On.prototype,"writeRings",null),On=W1=w([W("esri.geometry.Polygon")],On),On.prototype.toJSON.isDefaultToJSON=!0;const Jo=On;var Vb;function FV(t){return!Array.isArray(t[0])}let Ma=Vb=class extends Ol{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,s,a=null,d=null;return t&&!Array.isArray(t)?(a=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,s=t.hasM):a=t,a=a||[],e=e||te.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),d=a[0]&&a[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=!1):i===void 0?i=!s&&d.length>3:s===void 0&&(s=!i&&d.length>3)),{paths:a,spatialReference:e,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=MM(this);if(!e)return null;const i=new Ae(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=ot(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(FV(t)){const s=[];for(let a=0,d=t.length;a<d;a++)s[a]=t[a].toArray();e[i]=s}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new Vb;return t.spatialReference=this.spatialReference,t.paths=ot(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],s=this.hasZ,a=this.hasM;return s&&!a?new Yt(i[0],i[1],i[2],void 0,this.spatialReference):a&&!s?new Yt(i[0],i[1],void 0,i[2],this.spatialReference):s&&a?new Yt(i[0],i[1],i[2],i[3],this.spatialReference):new Yt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(zc(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,s=e.map(a=>new Yt(a,i));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Yt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(zc(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const s=this.paths[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};w([T({readOnly:!0})],Ma.prototype,"cache",null),w([T({readOnly:!0})],Ma.prototype,"extent",null),w([T({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ma.prototype,"paths",void 0),w([At("paths")],Ma.prototype,"writePaths",null),Ma=Vb=w([W("esri.geometry.Polyline")],Ma),Ma.prototype.toJSON.isDefaultToJSON=!0;const Zr=Ma,$m=dr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),zV=dr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function EM(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Q5(t){return t.points!==void 0}function t_(t){return t.x!==void 0&&t.y!==void 0}function e_(t){return t.paths!==void 0}function Bh(t){return t.rings!==void 0}function xl(t){return t==null?null:t instanceof Ol?t:t_(t)?Yt.fromJSON(t):e_(t)?Zr.fromJSON(t):Bh(t)?Jo.fromJSON(t):Q5(t)?t0.fromJSON(t):EM(t)?Ae.fromJSON(t):null}function Qd(t){return t?t_(t)?"esriGeometryPoint":e_(t)?"esriGeometryPolyline":Bh(t)?"esriGeometryPolygon":EM(t)?"esriGeometryEnvelope":Q5(t)?"esriGeometryMultipoint":null:null}const VV={esriGeometryPoint:Yt,esriGeometryPolyline:Zr,esriGeometryPolygon:Jo,esriGeometryEnvelope:Ae,esriGeometryMultipoint:t0};function GV(t){return t&&VV[t]||null}const e0={base:Ol,key:"type",typeMap:{extent:Ae,multipoint:t0,point:Yt,polyline:Zr,polygon:Jo}};Ho(e0);let IM=0;const i0=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+IM++})}};return e=w([W("esri.core.Identifiable")],e),e},i_=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:IM++})}};return e=w([W("esri.core.NumericIdentifiable")],e),e};let R6=class extends i0(class{}){};R6=w([W("esri.core.Identifiable")],R6);async function UV(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await bt(()=>import("./portalLayers-ee302469.js"),["assets/portalLayers-ee302469.js","assets/lazyLayerLoader-d6b2dbfb.js","assets/layersLoader-7b62993d.js","assets/fetchService-667ec519.js","assets/jsonContext-185d068a.js","assets/styleUtils-60111c84.js"]);try{return await i(e)}catch(s){const a=e&&e.portalItem,d=a&&a.id||"unset",y=a&&a.portal&&a.portal.url||_e.portalUrl;throw mt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+d+"')",s),s}}let qV=0,Ni=class extends kl.EventedMixin(i0(Wo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ae(-180,-90,180,90,te.WGS84),this.id=Date.now().toString(16)+"-layer-"+qV++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=te.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await bt(()=>import("./arcgisLayers-e154af88.js"),["assets/arcgisLayers-e154af88.js","assets/fetchService-667ec519.js","assets/lazyLayerLoader-d6b2dbfb.js"])).fromUrl(i)}static fromPortalItem(e){return UV(e)}initialize(){this.when().catch(e=>{Qi(e)||mt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return er(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ye(e,{query:{f:"json"},responseType:"json"})).data;throw new lt("layer:no-attribution-data","Layer does not have attribution data")}};w([T({type:String})],Ni.prototype,"attributionDataUrl",void 0),w([T({type:Ae})],Ni.prototype,"fullExtent",void 0),w([T({readOnly:!0})],Ni.prototype,"hasAttributionData",null),w([T({type:String,clonable:!1})],Ni.prototype,"id",void 0),w([T({type:Boolean,nonNullable:!0})],Ni.prototype,"legendEnabled",void 0),w([T({type:["show","hide","hide-children"]})],Ni.prototype,"listMode",void 0),w([T({type:Number,range:{min:0,max:1},nonNullable:!0})],Ni.prototype,"opacity",void 0),w([T({clonable:!1})],Ni.prototype,"parent",void 0),w([T({readOnly:!0})],Ni.prototype,"parsedUrl",null),w([T({type:Boolean})],Ni.prototype,"popupEnabled",void 0),w([T({type:Boolean})],Ni.prototype,"attributionVisible",void 0),w([T({type:te})],Ni.prototype,"spatialReference",void 0),w([T({type:String})],Ni.prototype,"title",void 0),w([T({readOnly:!0,json:{read:!1}})],Ni.prototype,"type",void 0),w([T()],Ni.prototype,"url",void 0),w([T({type:Boolean,nonNullable:!0})],Ni.prototype,"visible",void 0),Ni=w([W("esri.layers.Layer")],Ni);const r_=Ni;function Gb(t,e,i){let s,a;if(t)for(let d=0,y=t.length;d<y;d++){if(s=t.at(d),(s==null?void 0:s[e])===i)return s;if((s==null?void 0:s.type)==="group"&&(a=Gb(s.layers,e,i),a))return a}}const BV=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Vt;const s=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},a=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||mt.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},d=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",y=>s(y.item)),this.layers.on("after-add",y=>a(y.item)),this.layers.on("after-remove",y=>d(y.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",Qh(i,this._get("layers")))}add(i,s){const a=this.layers;if(s=a.getNextIndex(s),i instanceof r_){const d=i;d.parent===this?this.reorder(d,s):a.add(d,s)}else ta(i)?i.then(d=>{this.destroyed||this.add(d,s)}):mt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const a=this.layers;let d=a.getNextIndex(s);i.slice().forEach(y=>{y.parent!==this?(a.add(y,d),d+=1):this.reorder(y,d)})}findLayerById(i){return Gb(this.layers,"id",i)}findLayerByUid(i){return Gb(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return w([T()],e.prototype,"layers",null),e=w([W("esri.support.LayersMixin")],e),e};function Ub(t,e,i){if(t)for(let s=0,a=t.length;s<a;s++){const d=t.at(s);if(d[e]===i)return d;if((d==null?void 0:d.type)==="group"){const y=Ub(d.tables,e,i);if(y)return y}}}const HV=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Vt,this.addHandles([this.tables.on("after-add",s=>{const a=s.item;a.parent&&a.parent!==this&&"tables"in a.parent&&a.parent.tables.remove(a),a.parent=this,a.type!=="feature"&&mt.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",Qh(i,this._get("tables")))}findTableById(i){return Ub(this.tables,"id",i)}findTableByUid(i){return Ub(this.tables,"uid",i)}};return w([T()],e.prototype,"tables",null),e=w([W("esri.support.TablesMixin")],e),e};let Pn=class extends HV(BV(kl.EventedMixin(Rt))){constructor(e){super(e),this.allLayers=new Fc({getCollections:()=>{var i,s,a;return[(i=this.basemap)==null?void 0:i.baseLayers,(s=this.ground)==null?void 0:s.layers,this.layers,(a=this.basemap)==null?void 0:a.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=hV(this),this.basemap=null,this.editableLayers=new Fc({getCollections:()=>[this.allLayers],itemFilterFunction:sV}),this.ground=new Sm,this._basemapCache=oV()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),aV(this._basemapCache),this._basemapCache=null}castBasemap(e){return lV(e,this._basemapCache)}castGround(e){return uV(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};w([T({readOnly:!0,dependsOn:[]})],Pn.prototype,"allLayers",void 0),w([T({readOnly:!0})],Pn.prototype,"allTables",void 0),w([T({type:vm})],Pn.prototype,"basemap",void 0),w([Ne("basemap")],Pn.prototype,"castBasemap",null),w([T({readOnly:!0})],Pn.prototype,"editableLayers",void 0),w([T({type:Sm,nonNullable:!0})],Pn.prototype,"ground",void 0),w([Ne("ground")],Pn.prototype,"castGround",null),Pn=w([W("esri.Map")],Pn);const AM=Pn,_i=t=>{let e=class extends t{clone(){var _;const i=Pr(Fi(this),"unable to clone instance of non-accessor class"),s=i.metadatas,a=i.store,d={},y=new Map;for(const S in s){const I=s[S],A=a==null?void 0:a.originOf(S),P=I.clonable;if(I.readOnly||P===!1||A!==St.USER&&A!==St.DEFAULTS&&A!==St.WEB_MAP&&A!==St.WEB_SCENE)continue;const L=this[S];let j=null;j=typeof P=="function"?P(L):P==="reference"?L:ob(L),L!=null&&j==null||(A===St.DEFAULTS?y.set(S,j):d[S]=j)}const m=new(Object.getPrototypeOf(this)).constructor(d);if(y.size){const S=(_=Fi(m))==null?void 0:_.store;if(S)for(const[I,A]of y)S.set(I,A,St.DEFAULTS)}return m}};return e=w([W("esri.core.Clonable")],e),e};let j6=class extends _i(Rt){};j6=w([W("esri.core.Clonable")],j6);var Gc;function WV(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,s="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||s!=null&&+e>s)return Gc.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return Gc.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Gc||(Gc={}));const JV=mt.getLogger("esri.support.arcadeOnDemand");let Uv;function au(){return Uv||(Uv=(async()=>{const t=await bt(()=>import("./arcadeUtils-79ddb22c.js").then(e=>e.az),["assets/arcadeUtils-79ddb22c.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/number-ff121b75.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),Uv}const qct=(t,e,i)=>s_.create(t,e,i,null,["$feature"],[]),Bct=(t,e,i)=>s_.create(t,e,i,null,["$feature","$view"],[]),KV=(t,e,i,s)=>s_.create(t,e,i,s,["$feature","$view"],[]);let s_=class kM{constructor(e,i,s,a,d,y,m){this.services=null,this.script=e,this.evaluate=a;const _=Array.isArray(y)?y:y.fields;this.fields=_,this._syntaxTree=s,this._arcade=i,this._arcadeFeature=d,this._spatialReference=m,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,s,a,d,y){const{arcade:m,Feature:_,Dictionary:S}=await au(),I=te.fromJSON(i);let A;try{A=m.parseScript(e,y)}catch(yt){return JV.error(new lt("arcade-bad-expression","Failed to parse arcade script",{script:e,error:yt})),null}const P=d.reduce((yt,$t)=>({...yt,[$t]:null}),{});let L=null;a!=null&&(L=new S(a),L.immutable=!0,P.$config=null);const j=m.scriptUsesGeometryEngine(A),F=j&&m.enableGeometrySupport(),V=m.scriptUsesFeatureSet(A)&&m.enableFeatureSetSupport(),J=m.scriptIsAsync(A),Q=J&&m.enableAsyncSupport(),Z={vars:P,spatialReference:I,useAsync:!!Q};await Promise.all([F,V,Q]);const et=new Set;await m.loadDependentModules(et,A,null,J,j);const st=new S;st.immutable=!1,st.setField("scale",0);const nt=m.compileScript(A,Z),pt=(yt,$t)=>("$view"in yt&&yt.$view&&(st.setField("scale",typeof yt.$view=="object"&&"scale"in yt.$view?yt.$view.scale:void 0),yt.$view=st),L&&(yt.$config=L),nt({vars:yt,spatialReference:I,services:$t}));return new kM(e,m,A,pt,new _,s,I)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const YV=/^([0-9_])/,ZV=/[^a-z0-9_\u0080-\uffff]+/gi;function XV(t){return t==null?null:t.trim().replaceAll(ZV,"_").replace(YV,"F$1")||null}const QV=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],tG=["field","normalizationField"];function Hct(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(D6(QV,i,e),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)D6(tG,s,e)}}function D6(t,e,i){if(t)for(const s of t){const a=Jd(s,e),d=a&&typeof a!="function"&&i.get(a);d&&yu(s,d.name,e)}}function eG(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const s=e.get(t.startField),a=e.get(t.endField);t.startField=(s==null?void 0:s.name)??null,t.endField=(a==null?void 0:a.name)??null}else{const s=e.get(t.startTimeField),a=e.get(t.endTimeField);t.startTimeField=(s==null?void 0:s.name)??null,t.endTimeField=(a==null?void 0:a.name)??null}}const qv=new Set;function OM(t,e){return t&&e?(qv.clear(),Md(qv,t,e),Array.from(qv).sort()):[]}function Md(t,e,i){var s;if(i)if((s=e==null?void 0:e.fields)!=null&&s.length)if(i.includes("*"))for(const{name:a}of e.fields)t.add(a);else for(const a of i)ts(t,e,a);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const a of i)a!=null&&t.add(a)}}function ts(t,e,i){if(typeof i=="string")if(e){const s=e.get(i);s&&t.add(s.name)}else t.add(i)}function Wct(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function $r(t,e,i){var d;if(!i)return;const{arcadeUtils:s}=await au(),a=s.extractFieldNames(i,(d=e==null?void 0:e.fields)==null?void 0:d.map(y=>y.name));for(const y of a)ts(t,e,y)}async function PM(t,e,i){if(i&&i!=="1=1"){const{WhereClause:s}=await bt(()=>import("./WhereClause-2187e7a0.js").then(d=>d.W),["assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js"]),a=s.create(i,e);if(!a.isStandardized)throw new lt("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Md(t,e,a.fieldNames)}}function iG({displayField:t,fields:e}){return t||(e&&e.length?Bv(e,"name-or-title")||Bv(e,"unique-identifier")||Bv(e,"type-or-category")||rG(e):null)}function rG(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function Bv(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function Jct(t,e){var s;if(!e)return;const i=(s=e.elevationInfo)==null?void 0:s.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function sG(t,e,i){i.onStatisticExpression?$r(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function Kct(t,e,i){if(!e||!i||!("fields"in i))return;const s=[],a=i.popupTemplate;s.push(nG(t,e,a)),i.fields&&s.push(...i.fields.map(async d=>sG(t,e.fieldsIndex,d))),await Promise.all(s)}async function nG(t,e,i){const s=[];i!=null&&i.expressionInfos&&s.push(...i.expressionInfos.map(d=>$r(t,e.fieldsIndex,d.expression)));const a=i==null?void 0:i.content;if(Array.isArray(a))for(const d of a)d.type==="expression"&&d.expressionInfo&&s.push($r(t,e.fieldsIndex,d.expressionInfo.expression));await Promise.all(s)}async function Yct(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&Md(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Md(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await PM(t,e.fieldsIndex,i.where))}async function Zct(t,e,i){e&&i&&await Promise.all(i.map(s=>oG(t,e,s)))}async function oG(t,e,i){e&&i&&(i.valueExpression?await $r(t,e.fieldsIndex,i.valueExpression):i.field&&ts(t,e.fieldsIndex,i.field))}function Xct(t){return t?OM(t.fieldsIndex,CM(t)):[]}function aG(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?OM(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const lG=["oid","global-id","guid"],hG=["oid","global-id"],uG=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function cG(t){const e=new Set;NM(t).forEach(s=>e.add(s)),aG(t).forEach(s=>e.add(s.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>e.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>e.add(s.toLowerCase()))),Array.from(e)}function CM(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:s,editDateField:a,editorField:d}=e;return[i,s,a,d].filter(Boolean)}function NM(t){return CM(t).map(e=>e.toLowerCase())}function pG(t,e){var i;return t.editable&&!lG.includes(t.type)&&!NM(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function dG(t,e){var s;const i=((s=t.name)==null?void 0:s.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||cG(e).includes(i)||hG.includes(t.type)||uG.some(a=>a.test(i)))}async function Qct(t,e){const{labelingInfo:i,fieldsIndex:s}=e;i&&i.length&&await Promise.all(i.map(a=>fG(t,s,a)))}async function fG(t,e,i){if(!i)return;const s=i.getLabelExpression(),a=i.where;if(s.type==="arcade")await $r(t,e,s.expression);else{const d=s.expression.match(/{[^}]*}/g);d&&d.forEach(y=>{ts(t,e,y.slice(1,-1))})}await PM(t,e,a)}function yG(t){const e=t.defaultValue;return e!==void 0&&jM(t,e)?e:t.nullable?null:void 0}function LM(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function mG(t){return t===null||LM(t)}const n_="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function gG(t){return t===null||n_(t)}function RM(t){return t!=null&&typeof t=="string"}function vG(t){return t===null||RM(t)}function bG(){return!0}function jM(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?gG:n_;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?mG:LM;break;case"string":case"esriFieldTypeString":i=t.nullable?vG:RM;break;default:i=bG}return arguments.length===1?i:i(e)}const wG=["integer","small-integer","single","double"],_G=new Set([...wG,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),xG=["date","date-only","time-only","timestamp-offset"],SG=new Set([...xG,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function DM(t){return t!=null&&_G.has(t.type)}function t0t(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function e0t(t){return t!=null&&SG.has(t.type)}var Tm,Mm;function i0t(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function r0t(t,e){return t==null||t.nullable&&e===null?null:DM(t)&&!$G(t.type,Number(e))?Tm.OUT_OF_RANGE:jM(t,e)?t.domain?WV(t.domain,e):null:Mm.INVALID_TYPE}function $G(t,e){const i=typeof t=="string"?FM(t):t;if(!i)return!1;const s=i.min,a=i.max;return i.isInteger?n_(e)&&e>=s&&e<=a:e>=s&&e<=a}function FM(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return TG;case"esriFieldTypeInteger":case"integer":return MG;case"esriFieldTypeBigInteger":case"big-integer":return EG;case"esriFieldTypeSingle":case"single":return IG;case"esriFieldTypeDouble":case"double":return AG}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Tm||(Tm={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(Mm||(Mm={}));const TG={min:-32768,max:32767,isInteger:!0},MG={min:-2147483648,max:2147483647,isInteger:!0},EG={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},IG={min:-34e37,max:12e37,isInteger:!1},AG={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function s0t(t,e,i){switch(t){case Gc.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Gc.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Mm.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case Tm.OUT_OF_RANGE:{const{min:s,max:a}=FM(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${s} to ${a}`}}}function n0t(t,e){return!kG(t,e,null)}function kG(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const d of t??[])i.add(d);return!0}const s=e.attributes;let a=!1;for(const d of t)if(!(d in s)){if(a=!0,i==null)break;i.add(d)}return a}function OG(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let J1=class extends gt{constructor(e){super(e),this.type=null}};w([T({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],J1.prototype,"type",void 0),J1=w([W("esri.popup.content.Content")],J1);const Pl=J1;var qb;let Xl=qb=class extends Pl{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new qb({description:this.description,displayType:this.displayType,title:this.title})}};w([T({type:String,json:{write:!0}})],Xl.prototype,"description",void 0),w([T({type:["auto","preview","list"],json:{write:!0}})],Xl.prototype,"displayType",void 0),w([T({type:String,json:{write:!0}})],Xl.prototype,"title",void 0),w([T({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Xl.prototype,"type",void 0),Xl=qb=w([W("esri.popup.content.AttachmentsContent")],Xl);const Ed=Xl;var Bb;let Ql=Bb=class extends Pl{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Bb({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ot(this.outFields):null})}};w([T()],Ql.prototype,"creator",void 0),w([T()],Ql.prototype,"destroyer",void 0),w([T()],Ql.prototype,"outFields",void 0),w([T({type:["custom"],readOnly:!0})],Ql.prototype,"type",void 0),Ql=Bb=w([W("esri.popup.content.CustomContent")],Ql);const PG=Ql;var Hb;let Vu=Hb=class extends gt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Hb({title:this.title,expression:this.expression})}};w([T({type:String,json:{write:!0}})],Vu.prototype,"title",void 0),w([T({type:String,json:{write:!0}})],Vu.prototype,"expression",void 0),w([T({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Vu.prototype,"returnType",void 0),Vu=Hb=w([W("esri.popup.ElementExpressionInfo")],Vu);const CG=Vu;var Wb;let W0=Wb=class extends Pl{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new Wb({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};w([T({type:CG,json:{write:!0}})],W0.prototype,"expressionInfo",void 0),w([T({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],W0.prototype,"type",void 0),W0=Wb=w([W("esri.popup.content.ExpressionContent")],W0);const o_=W0;class vu extends Error{}class NG extends vu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class LG extends vu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class RG extends vu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class J0 extends vu{}class zM extends vu{constructor(e){super(`Invalid unit ${e}`)}}class _s extends vu{}class pa extends vu{constructor(){super("Zone is an abstract class")}}const Mt="numeric",vn="short",es="long",Em={year:Mt,month:Mt,day:Mt},VM={year:Mt,month:vn,day:Mt},jG={year:Mt,month:vn,day:Mt,weekday:vn},GM={year:Mt,month:es,day:Mt},UM={year:Mt,month:es,day:Mt,weekday:es},qM={hour:Mt,minute:Mt},BM={hour:Mt,minute:Mt,second:Mt},HM={hour:Mt,minute:Mt,second:Mt,timeZoneName:vn},WM={hour:Mt,minute:Mt,second:Mt,timeZoneName:es},JM={hour:Mt,minute:Mt,hourCycle:"h23"},KM={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23"},YM={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23",timeZoneName:vn},ZM={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23",timeZoneName:es},XM={year:Mt,month:Mt,day:Mt,hour:Mt,minute:Mt},QM={year:Mt,month:Mt,day:Mt,hour:Mt,minute:Mt,second:Mt},tE={year:Mt,month:vn,day:Mt,hour:Mt,minute:Mt},eE={year:Mt,month:vn,day:Mt,hour:Mt,minute:Mt,second:Mt},DG={year:Mt,month:vn,day:Mt,weekday:vn,hour:Mt,minute:Mt},iE={year:Mt,month:es,day:Mt,hour:Mt,minute:Mt,timeZoneName:vn},rE={year:Mt,month:es,day:Mt,hour:Mt,minute:Mt,second:Mt,timeZoneName:vn},sE={year:Mt,month:es,day:Mt,weekday:es,hour:Mt,minute:Mt,timeZoneName:es},nE={year:Mt,month:es,day:Mt,weekday:es,hour:Mt,minute:Mt,second:Mt,timeZoneName:es};class tf{get type(){throw new pa}get name(){throw new pa}get ianaName(){return this.name}get isUniversal(){throw new pa}offsetName(e,i){throw new pa}formatOffset(e,i){throw new pa}offset(e){throw new pa}equals(e){throw new pa}get isValid(){throw new pa}}let Hv=null;class Vg extends tf{static get instance(){return Hv===null&&(Hv=new Vg),Hv}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return aE(e,i,s)}formatOffset(e,i){return Yp(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let K1={};function FG(t){return K1[t]||(K1[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),K1[t]}const zG={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function VG(t,e){const i=t.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,a,d,y,m,_,S,I]=s;return[y,a,d,m,_,S,I]}function GG(t,e){const i=t.formatToParts(e),s=[];for(let a=0;a<i.length;a++){const{type:d,value:y}=i[a],m=zG[d];d==="era"?s[m]=y:de(m)||(s[m]=parseInt(y,10))}return s}let qf={};class Ko extends tf{static create(e){return qf[e]||(qf[e]=new Ko(e)),qf[e]}static resetCache(){qf={},K1={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ko.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return aE(e,i,s,this.name)}formatOffset(e,i){return Yp(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const s=FG(this.name);let[a,d,y,m,_,S,I]=s.formatToParts?GG(s,i):VG(s,i);m==="BC"&&(a=-Math.abs(a)+1);const P=h_({year:a,month:d,day:y,hour:_===24?0:_,minute:S,second:I,millisecond:0});let L=+i;const j=L%1e3;return L-=j>=0?j:1e3+j,(P-L)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let F6={};function UG(t,e={}){const i=JSON.stringify([t,e]);let s=F6[i];return s||(s=new Intl.ListFormat(t,e),F6[i]=s),s}let Jb={};function Kb(t,e={}){const i=JSON.stringify([t,e]);let s=Jb[i];return s||(s=new Intl.DateTimeFormat(t,e),Jb[i]=s),s}let Yb={};function qG(t,e={}){const i=JSON.stringify([t,e]);let s=Yb[i];return s||(s=new Intl.NumberFormat(t,e),Yb[i]=s),s}let Zb={};function BG(t,e={}){const{base:i,...s}=e,a=JSON.stringify([t,s]);let d=Zb[a];return d||(d=new Intl.RelativeTimeFormat(t,e),Zb[a]=d),d}let K0=null;function HG(){return K0||(K0=new Intl.DateTimeFormat().resolvedOptions().locale,K0)}function WG(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let s,a;try{s=Kb(t).resolvedOptions(),a=t}catch{const _=t.substring(0,i);s=Kb(_).resolvedOptions(),a=_}const{numberingSystem:d,calendar:y}=s;return[a,d,y]}}function JG(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function KG(t){const e=[];for(let i=1;i<=12;i++){const s=re.utc(2016,i,1);e.push(t(s))}return e}function YG(t){const e=[];for(let i=1;i<=7;i++){const s=re.utc(2016,11,13+i);e.push(t(s))}return e}function Bf(t,e,i,s,a){const d=t.listingMode(i);return d==="error"?null:d==="en"?s(e):a(e)}function ZG(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class XG{constructor(e,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:a,floor:d,...y}=s;if(!i||Object.keys(y).length>0){const m={useGrouping:!1,...s};s.padTo>0&&(m.minimumIntegerDigits=s.padTo),this.inf=qG(e,m)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):l_(e,3);return Ii(i,this.padTo)}}}class QG{constructor(e,i,s){this.opts=s,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const y=-1*(e.offset/60),m=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;e.offset!==0&&Ko.create(m).valid?(a=m,this.dt=e):(a="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const d={...this.opts};d.timeZone=d.timeZone||a,this.dtf=Kb(i,d)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class tU{constructor(e,i,s){this.opts={style:"long",...s},!i&&oE()&&(this.rtf=BG(e,s))}format(e,i){return this.rtf?this.rtf.format(e,i):gU(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class ti{static fromOpts(e){return ti.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,s,a=!1){const d=e||Ei.defaultLocale,y=d||(a?"en-US":HG()),m=i||Ei.defaultNumberingSystem,_=s||Ei.defaultOutputCalendar;return new ti(y,m,_,d)}static resetCache(){K0=null,Jb={},Yb={},Zb={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:s}={}){return ti.create(e,i,s)}constructor(e,i,s,a){const[d,y,m]=WG(e);this.locale=d,this.numberingSystem=i||y||null,this.outputCalendar=s||m||null,this.intl=JG(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ZG(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:ti.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,s=!0){return Bf(this,e,s,uE,()=>{const a=i?{month:e,day:"numeric"}:{month:e},d=i?"format":"standalone";return this.monthsCache[d][e]||(this.monthsCache[d][e]=KG(y=>this.extract(y,a,"month"))),this.monthsCache[d][e]})}weekdays(e,i=!1,s=!0){return Bf(this,e,s,dE,()=>{const a=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},d=i?"format":"standalone";return this.weekdaysCache[d][e]||(this.weekdaysCache[d][e]=YG(y=>this.extract(y,a,"weekday"))),this.weekdaysCache[d][e]})}meridiems(e=!0){return Bf(this,void 0,e,()=>fE,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[re.utc(2016,11,13,9),re.utc(2016,11,13,19)].map(s=>this.extract(s,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return Bf(this,e,i,yE,()=>{const s={era:e};return this.eraCache[e]||(this.eraCache[e]=[re.utc(-40,1,1),re.utc(2017,1,1)].map(a=>this.extract(a,s,"era"))),this.eraCache[e]})}extract(e,i,s){const a=this.dtFormatter(e,i),d=a.formatToParts(),y=d.find(m=>m.type.toLowerCase()===s);return y?y.value:null}numberFormatter(e={}){return new XG(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new QG(e,this.intl,i)}relFormatter(e={}){return new tU(this.intl,this.isEnglish(),e)}listFormatter(e={}){return UG(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Wv=null;class pr extends tf{static get utcInstance(){return Wv===null&&(Wv=new pr(0)),Wv}static instance(e){return e===0?pr.utcInstance:new pr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new pr(Ug(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Yp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Yp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return Yp(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class eU extends tf{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function sl(t,e){if(de(t)||t===null)return e;if(t instanceof tf)return t;if(iU(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Vg.instance:i==="utc"||i==="gmt"?pr.utcInstance:pr.parseSpecifier(i)||Ko.create(t)}else return Hh(t)?pr.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new eU(t)}let z6=()=>Date.now(),V6="system",G6=null,U6=null,q6=null,B6=60,H6;class Ei{static get now(){return z6}static set now(e){z6=e}static set defaultZone(e){V6=e}static get defaultZone(){return sl(V6,Vg.instance)}static get defaultLocale(){return G6}static set defaultLocale(e){G6=e}static get defaultNumberingSystem(){return U6}static set defaultNumberingSystem(e){U6=e}static get defaultOutputCalendar(){return q6}static set defaultOutputCalendar(e){q6=e}static get twoDigitCutoffYear(){return B6}static set twoDigitCutoffYear(e){B6=e%100}static get throwOnInvalid(){return H6}static set throwOnInvalid(e){H6=e}static resetCaches(){ti.resetCache(),Ko.resetCache()}}function de(t){return typeof t>"u"}function Hh(t){return typeof t=="number"}function Gg(t){return typeof t=="number"&&t%1===0}function iU(t){return typeof t=="string"}function rU(t){return Object.prototype.toString.call(t)==="[object Date]"}function oE(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function sU(t){return Array.isArray(t)?t:[t]}function W6(t,e,i){if(t.length!==0)return t.reduce((s,a)=>{const d=[e(a),a];return s&&i(s[0],d[0])===s[0]?s:d},null)[1]}function nU(t,e){return e.reduce((i,s)=>(i[s]=t[s],i),{})}function Uc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fo(t,e,i){return Gg(t)&&t>=e&&t<=i}function oU(t,e){return t-e*Math.floor(t/e)}function Ii(t,e=2){const i=t<0;let s;return i?s="-"+(""+-t).padStart(e,"0"):s=(""+t).padStart(e,"0"),s}function Ya(t){if(!(de(t)||t===null||t===""))return parseInt(t,10)}function zl(t){if(!(de(t)||t===null||t===""))return parseFloat(t)}function a_(t){if(!(de(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function l_(t,e,i=!1){const s=10**e;return(i?Math.trunc:Math.round)(t*s)/s}function ef(t){return t%4===0&&(t%100!==0||t%400===0)}function Kp(t){return ef(t)?366:365}function Im(t,e){const i=oU(e-1,12)+1,s=t+(e-i)/12;return i===2?ef(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function h_(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Am(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,s=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||s===3?53:52}function Xb(t){return t>99?t:t>Ei.twoDigitCutoffYear?1900+t:2e3+t}function aE(t,e,i,s=null){const a=new Date(t),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(d.timeZone=s);const y={timeZoneName:e,...d},m=new Intl.DateTimeFormat(i,y).formatToParts(a).find(_=>_.type.toLowerCase()==="timezonename");return m?m.value:null}function Ug(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const s=parseInt(e,10)||0,a=i<0||Object.is(i,-0)?-s:s;return i*60+a}function lE(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new _s(`Invalid unit value ${t}`);return e}function km(t,e){const i={};for(const s in t)if(Uc(t,s)){const a=t[s];if(a==null)continue;i[e(s)]=lE(a)}return i}function Yp(t,e){const i=Math.trunc(Math.abs(t/60)),s=Math.trunc(Math.abs(t%60)),a=t>=0?"+":"-";switch(e){case"short":return`${a}${Ii(i,2)}:${Ii(s,2)}`;case"narrow":return`${a}${i}${s>0?`:${s}`:""}`;case"techie":return`${a}${Ii(i,2)}${Ii(s,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function qg(t){return nU(t,["hour","minute","second","millisecond"])}const aU=["January","February","March","April","May","June","July","August","September","October","November","December"],hE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],lU=["J","F","M","A","M","J","J","A","S","O","N","D"];function uE(t){switch(t){case"narrow":return[...lU];case"short":return[...hE];case"long":return[...aU];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const cE=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pE=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],hU=["M","T","W","T","F","S","S"];function dE(t){switch(t){case"narrow":return[...hU];case"short":return[...pE];case"long":return[...cE];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const fE=["AM","PM"],uU=["Before Christ","Anno Domini"],cU=["BC","AD"],pU=["B","A"];function yE(t){switch(t){case"narrow":return[...pU];case"short":return[...cU];case"long":return[...uU];default:return null}}function dU(t){return fE[t.hour<12?0:1]}function fU(t,e){return dE(e)[t.weekday-1]}function yU(t,e){return uE(e)[t.month-1]}function mU(t,e){return yE(e)[t.year<0?0:1]}function gU(t,e,i="always",s=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&d){const A=t==="days";switch(e){case 1:return A?"tomorrow":`next ${a[t][0]}`;case-1:return A?"yesterday":`last ${a[t][0]}`;case 0:return A?"today":`this ${a[t][0]}`}}const y=Object.is(e,-0)||e<0,m=Math.abs(e),_=m===1,S=a[t],I=s?_?S[1]:S[2]||S[1]:_?a[t][0]:t;return y?`${m} ${I} ago`:`in ${m} ${I}`}function J6(t,e){let i="";for(const s of t)s.literal?i+=s.val:i+=e(s.val);return i}const vU={D:Em,DD:VM,DDD:GM,DDDD:UM,t:qM,tt:BM,ttt:HM,tttt:WM,T:JM,TT:KM,TTT:YM,TTTT:ZM,f:XM,ff:tE,fff:iE,ffff:sE,F:QM,FF:eE,FFF:rE,FFFF:nE};class cr{static create(e,i={}){return new cr(e,i)}static parseFormat(e){let i=null,s="",a=!1;const d=[];for(let y=0;y<e.length;y++){const m=e.charAt(y);m==="'"?(s.length>0&&d.push({literal:a||/^\s+$/.test(s),val:s}),i=null,s="",a=!a):a||m===i?s+=m:(s.length>0&&d.push({literal:/^\s+$/.test(s),val:s}),s=m,i=m)}return s.length>0&&d.push({literal:a||/^\s+$/.test(s),val:s}),d}static macroTokenToFormatOpts(e){return vU[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Ii(e,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const s=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(L,j)=>this.loc.extract(e,L,j),y=L=>e.isOffsetFixed&&e.offset===0&&L.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,L.format):"",m=()=>s?dU(e):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(L,j)=>s?yU(e,L):d(j?{month:L}:{month:L,day:"numeric"},"month"),S=(L,j)=>s?fU(e,L):d(j?{weekday:L}:{weekday:L,month:"long",day:"numeric"},"weekday"),I=L=>{const j=cr.macroTokenToFormatOpts(L);return j?this.formatWithSystemDefault(e,j):L},A=L=>s?mU(e,L):d({era:L},"era"),P=L=>{switch(L){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return a?d({day:"numeric"},"day"):this.num(e.day);case"dd":return a?d({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return a?d({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?d({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return a?d({month:"numeric"},"month"):this.num(e.month);case"MM":return a?d({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return a?d({year:"numeric"},"year"):this.num(e.year);case"yy":return a?d({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?d({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?d({year:"numeric"},"year"):this.num(e.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return I(L)}};return J6(cr.parseFormat(i),P)}formatDurationFromString(e,i){const s=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=_=>S=>{const I=s(S);return I?this.num(_.get(I),S.length):S},d=cr.parseFormat(i),y=d.reduce((_,{literal:S,val:I})=>S?_:_.concat(I),[]),m=e.shiftTo(...y.map(s).filter(_=>_));return J6(d,a(m))}}class ln{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const mE=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function r0(...t){const e=t.reduce((i,s)=>i+s.source,"");return RegExp(`^${e}$`)}function s0(...t){return e=>t.reduce(([i,s,a],d)=>{const[y,m,_]=d(e,a);return[{...i,...y},m||s,_]},[{},null,1]).slice(0,2)}function n0(t,...e){if(t==null)return[null,null];for(const[i,s]of e){const a=i.exec(t);if(a)return s(a)}return[null,null]}function gE(...t){return(e,i)=>{const s={};let a;for(a=0;a<t.length;a++)s[t[a]]=Ya(e[i+a]);return[s,null,i+a]}}const vE=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,bU=`(?:${vE.source}?(?:\\[(${mE.source})\\])?)?`,u_=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,bE=RegExp(`${u_.source}${bU}`),c_=RegExp(`(?:T${bE.source})?`),wU=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,_U=/(\d{4})-?W(\d\d)(?:-?(\d))?/,xU=/(\d{4})-?(\d{3})/,SU=gE("weekYear","weekNumber","weekDay"),$U=gE("year","ordinal"),TU=/(\d{4})-(\d\d)-(\d\d)/,wE=RegExp(`${u_.source} ?(?:${vE.source}|(${mE.source}))?`),MU=RegExp(`(?: ${wE.source})?`);function Mc(t,e,i){const s=t[e];return de(s)?i:Ya(s)}function EU(t,e){return[{year:Mc(t,e),month:Mc(t,e+1,1),day:Mc(t,e+2,1)},null,e+3]}function o0(t,e){return[{hours:Mc(t,e,0),minutes:Mc(t,e+1,0),seconds:Mc(t,e+2,0),milliseconds:a_(t[e+3])},null,e+4]}function rf(t,e){const i=!t[e]&&!t[e+1],s=Ug(t[e+1],t[e+2]),a=i?null:pr.instance(s);return[{},a,e+3]}function sf(t,e){const i=t[e]?Ko.create(t[e]):null;return[{},i,e+1]}const IU=RegExp(`^T?${u_.source}$`),AU=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function kU(t){const[e,i,s,a,d,y,m,_,S]=t,I=e[0]==="-",A=_&&_[0]==="-",P=(L,j=!1)=>L!==void 0&&(j||L&&I)?-L:L;return[{years:P(zl(i)),months:P(zl(s)),weeks:P(zl(a)),days:P(zl(d)),hours:P(zl(y)),minutes:P(zl(m)),seconds:P(zl(_),_==="-0"),milliseconds:P(a_(S),A)}]}const OU={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function p_(t,e,i,s,a,d,y){const m={year:e.length===2?Xb(Ya(e)):Ya(e),month:hE.indexOf(i)+1,day:Ya(s),hour:Ya(a),minute:Ya(d)};return y&&(m.second=Ya(y)),t&&(m.weekday=t.length>3?cE.indexOf(t)+1:pE.indexOf(t)+1),m}const PU=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function CU(t){const[,e,i,s,a,d,y,m,_,S,I,A]=t,P=p_(e,a,s,i,d,y,m);let L;return _?L=OU[_]:S?L=0:L=Ug(I,A),[P,new pr(L)]}function NU(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const LU=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,RU=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,jU=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function K6(t){const[,e,i,s,a,d,y,m]=t;return[p_(e,a,s,i,d,y,m),pr.utcInstance]}function DU(t){const[,e,i,s,a,d,y,m]=t;return[p_(e,m,i,s,a,d,y),pr.utcInstance]}const FU=r0(wU,c_),zU=r0(_U,c_),VU=r0(xU,c_),GU=r0(bE),_E=s0(EU,o0,rf,sf),UU=s0(SU,o0,rf,sf),qU=s0($U,o0,rf,sf),BU=s0(o0,rf,sf);function HU(t){return n0(t,[FU,_E],[zU,UU],[VU,qU],[GU,BU])}function WU(t){return n0(NU(t),[PU,CU])}function JU(t){return n0(t,[LU,K6],[RU,K6],[jU,DU])}function KU(t){return n0(t,[AU,kU])}const YU=s0(o0);function ZU(t){return n0(t,[IU,YU])}const XU=r0(TU,MU),QU=r0(wE),tq=s0(o0,rf,sf);function eq(t){return n0(t,[XU,_E],[QU,tq])}const iq="Invalid Duration",xE={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},rq={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...xE},ss=146097/400,Au=146097/4800,sq={years:{quarters:4,months:12,weeks:ss/7,days:ss,hours:ss*24,minutes:ss*24*60,seconds:ss*24*60*60,milliseconds:ss*24*60*60*1e3},quarters:{months:3,weeks:ss/28,days:ss/4,hours:ss*24/4,minutes:ss*24*60/4,seconds:ss*24*60*60/4,milliseconds:ss*24*60*60*1e3/4},months:{weeks:Au/7,days:Au,hours:Au*24,minutes:Au*24*60,seconds:Au*24*60*60,milliseconds:Au*24*60*60*1e3},...xE},th=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],nq=th.slice(0).reverse();function da(t,e,i=!1){const s={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new we(s)}function oq(t){return t<0?Math.floor(t):Math.ceil(t)}function SE(t,e,i,s,a){const d=t[a][i],y=e[i]/d,m=Math.sign(y)===Math.sign(s[a]),_=!m&&s[a]!==0&&Math.abs(y)<=1?oq(y):Math.trunc(y);s[a]+=_,e[i]-=_*d}function aq(t,e){nq.reduce((i,s)=>de(e[s])?i:(i&&SE(t,e,i,e,s),s),null)}function lq(t){const e={};for(const[i,s]of Object.entries(t))s!==0&&(e[i]=s);return e}class we{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let s=i?sq:rq;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||ti.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,i){return we.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new _s(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new we({values:km(e,we.normalizeUnit),loc:ti.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Hh(e))return we.fromMillis(e);if(we.isDuration(e))return e;if(typeof e=="object")return we.fromObject(e);throw new _s(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[s]=KU(e);return s?we.fromObject(s,i):we.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[s]=ZU(e);return s?we.fromObject(s,i):we.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new _s("need to specify a reason the Duration is invalid");const s=e instanceof ln?e:new ln(e,i);if(Ei.throwOnInvalid)throw new RG(s);return new we({invalid:s})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new zM(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?cr.create(this.loc,s).formatDurationFromString(this,e):iq}toHuman(e={}){const i=th.map(s=>{const a=this.values[s];return de(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(a)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=l_(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const s=this.shiftTo("hours","minutes","seconds","milliseconds");let a=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||s.seconds!==0||s.milliseconds!==0)&&(a+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||s.milliseconds!==0)&&(a+=".SSS"));let d=s.toFormat(a);return e.includePrefix&&(d="T"+d),d}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e),s={};for(const a of th)(Uc(i.values,a)||Uc(this.values,a))&&(s[a]=i.get(a)+this.get(a));return da(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=lE(e(this.values[s],s));return da(this,{values:i},!0)}get(e){return this[we.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...km(e,we.normalizeUnit)};return da(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:s,matrix:a}={}){const y={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:a,conversionAccuracy:s};return da(this,y)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return aq(this.matrix,e),da(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=lq(this.normalize().shiftToAll().toObject());return da(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(y=>we.normalizeUnit(y));const i={},s={},a=this.toObject();let d;for(const y of th)if(e.indexOf(y)>=0){d=y;let m=0;for(const S in s)m+=this.matrix[S][y]*s[S],s[S]=0;Hh(a[y])&&(m+=a[y]);const _=Math.trunc(m);i[y]=_,s[y]=(m*1e3-_*1e3)/1e3;for(const S in a)th.indexOf(S)>th.indexOf(y)&&SE(this.matrix,a,S,i,y)}else Hh(a[y])&&(s[y]=a[y]);for(const y in s)s[y]!==0&&(i[d]+=y===d?s[y]:s[y]/this.matrix[d][y]);return da(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return da(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(s,a){return s===void 0||s===0?a===void 0||a===0:s===a}for(const s of th)if(!i(this.values[s],e.values[s]))return!1;return!0}}const ku="Invalid Interval";function hq(t,e){return!t||!t.isValid?vi.invalid("missing or invalid start"):!e||!e.isValid?vi.invalid("missing or invalid end"):e<t?vi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class vi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new _s("need to specify a reason the Interval is invalid");const s=e instanceof ln?e:new ln(e,i);if(Ei.throwOnInvalid)throw new LG(s);return new vi({invalid:s})}static fromDateTimes(e,i){const s=M0(e),a=M0(i),d=hq(s,a);return d??new vi({start:s,end:a})}static after(e,i){const s=we.fromDurationLike(i),a=M0(e);return vi.fromDateTimes(a,a.plus(s))}static before(e,i){const s=we.fromDurationLike(i),a=M0(e);return vi.fromDateTimes(a.minus(s),a)}static fromISO(e,i){const[s,a]=(e||"").split("/",2);if(s&&a){let d,y;try{d=re.fromISO(s,i),y=d.isValid}catch{y=!1}let m,_;try{m=re.fromISO(a,i),_=m.isValid}catch{_=!1}if(y&&_)return vi.fromDateTimes(d,m);if(y){const S=we.fromISO(a,i);if(S.isValid)return vi.after(d,S)}else if(_){const S=we.fromISO(s,i);if(S.isValid)return vi.before(m,S)}}return vi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),s=this.end.startOf(e);return Math.floor(s.diff(i,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?vi.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(M0).filter(y=>this.contains(y)).sort(),s=[];let{s:a}=this,d=0;for(;a<this.e;){const y=i[d]||this.e,m=+y>+this.e?this.e:y;s.push(vi.fromDateTimes(a,m)),a=m,d+=1}return s}splitBy(e){const i=we.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,a=1,d;const y=[];for(;s<this.e;){const m=this.start.plus(i.mapUnits(_=>_*a));d=+m>+this.e?this.e:m,y.push(vi.fromDateTimes(s,d)),s=d,a+=1}return y}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return i>=s?null:vi.fromDateTimes(i,s)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return vi.fromDateTimes(i,s)}static merge(e){const[i,s]=e.sort((a,d)=>a.s-d.s).reduce(([a,d],y)=>d?d.overlaps(y)||d.abutsStart(y)?[a,d.union(y)]:[a.concat([d]),y]:[a,y],[[],null]);return s&&i.push(s),i}static xor(e){let i=null,s=0;const a=[],d=e.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...d),m=y.sort((_,S)=>_.time-S.time);for(const _ of m)s+=_.type==="s"?1:-1,s===1?i=_.time:(i&&+i!=+_.time&&a.push(vi.fromDateTimes(i,_.time)),i=null);return vi.merge(a)}difference(...e){return vi.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ku}toLocaleString(e=Em,i={}){return this.isValid?cr.create(this.s.loc.clone(i),e).formatInterval(this):ku}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ku}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ku}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ku}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:ku}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):we.invalid(this.invalidReason)}mapEndpoints(e){return vi.fromDateTimes(e(this.s),e(this.e))}}class Hf{static hasDST(e=Ei.defaultZone){const i=re.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Ko.isValidZone(e)}static normalizeZone(e){return sl(e,Ei.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null,outputCalendar:d="gregory"}={}){return(a||ti.create(i,s,d)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null,outputCalendar:d="gregory"}={}){return(a||ti.create(i,s,d)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null}={}){return(a||ti.create(i,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null}={}){return(a||ti.create(i,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ti.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return ti.create(i,null,"gregory").eras(e)}static features(){return{relative:oE()}}}function Y6(t,e){const i=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(e)-i(t);return Math.floor(we.fromMillis(s).as("days"))}function uq(t,e,i){const s=[["years",(_,S)=>S.year-_.year],["quarters",(_,S)=>S.quarter-_.quarter+(S.year-_.year)*4],["months",(_,S)=>S.month-_.month+(S.year-_.year)*12],["weeks",(_,S)=>{const I=Y6(_,S);return(I-I%7)/7}],["days",Y6]],a={},d=t;let y,m;for(const[_,S]of s)i.indexOf(_)>=0&&(y=_,a[_]=S(t,e),m=d.plus(a),m>e?(a[_]--,t=d.plus(a)):t=m);return[t,a,m,y]}function cq(t,e,i,s){let[a,d,y,m]=uq(t,e,i);const _=e-a,S=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);S.length===0&&(y<e&&(y=a.plus({[m]:1})),y!==a&&(d[m]=(d[m]||0)+_/(y-a)));const I=we.fromObject(d,s);return S.length>0?we.fromMillis(_,s).shiftTo(...S).plus(I):I}const d_={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Z6={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pq=d_.hanidec.replace(/[\[|\]]/g,"").split("");function dq(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);if(t[i].search(d_.hanidec)!==-1)e+=pq.indexOf(t[i]);else for(const a in Z6){const[d,y]=Z6[a];s>=d&&s<=y&&(e+=s-d)}}return parseInt(e,10)}else return e}function Ns({numberingSystem:t},e=""){return new RegExp(`${d_[t||"latn"]}${e}`)}const fq="missing Intl.DateTimeFormat.formatToParts support";function ke(t,e=i=>i){return{regex:t,deser:([i])=>e(dq(i))}}const yq=String.fromCharCode(160),$E=`[ ${yq}]`,TE=new RegExp($E,"g");function mq(t){return t.replace(/\./g,"\\.?").replace(TE,$E)}function X6(t){return t.replace(/\./g,"").replace(TE," ").toLowerCase()}function Ls(t,e){return t===null?null:{regex:RegExp(t.map(mq).join("|")),deser:([i])=>t.findIndex(s=>X6(i)===X6(s))+e}}function Q6(t,e){return{regex:t,deser:([,i,s])=>Ug(i,s),groups:e}}function Wf(t){return{regex:t,deser:([e])=>e}}function gq(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function vq(t,e){const i=Ns(e),s=Ns(e,"{2}"),a=Ns(e,"{3}"),d=Ns(e,"{4}"),y=Ns(e,"{6}"),m=Ns(e,"{1,2}"),_=Ns(e,"{1,3}"),S=Ns(e,"{1,6}"),I=Ns(e,"{1,9}"),A=Ns(e,"{2,4}"),P=Ns(e,"{4,6}"),L=V=>({regex:RegExp(gq(V.val)),deser:([J])=>J,literal:!0}),F=(V=>{if(t.literal)return L(V);switch(V.val){case"G":return Ls(e.eras("short",!1),0);case"GG":return Ls(e.eras("long",!1),0);case"y":return ke(S);case"yy":return ke(A,Xb);case"yyyy":return ke(d);case"yyyyy":return ke(P);case"yyyyyy":return ke(y);case"M":return ke(m);case"MM":return ke(s);case"MMM":return Ls(e.months("short",!0,!1),1);case"MMMM":return Ls(e.months("long",!0,!1),1);case"L":return ke(m);case"LL":return ke(s);case"LLL":return Ls(e.months("short",!1,!1),1);case"LLLL":return Ls(e.months("long",!1,!1),1);case"d":return ke(m);case"dd":return ke(s);case"o":return ke(_);case"ooo":return ke(a);case"HH":return ke(s);case"H":return ke(m);case"hh":return ke(s);case"h":return ke(m);case"mm":return ke(s);case"m":return ke(m);case"q":return ke(m);case"qq":return ke(s);case"s":return ke(m);case"ss":return ke(s);case"S":return ke(_);case"SSS":return ke(a);case"u":return Wf(I);case"uu":return Wf(m);case"uuu":return ke(i);case"a":return Ls(e.meridiems(),0);case"kkkk":return ke(d);case"kk":return ke(A,Xb);case"W":return ke(m);case"WW":return ke(s);case"E":case"c":return ke(i);case"EEE":return Ls(e.weekdays("short",!1,!1),1);case"EEEE":return Ls(e.weekdays("long",!1,!1),1);case"ccc":return Ls(e.weekdays("short",!0,!1),1);case"cccc":return Ls(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Q6(new RegExp(`([+-]${m.source})(?::(${s.source}))?`),2);case"ZZZ":return Q6(new RegExp(`([+-]${m.source})(${s.source})?`),2);case"z":return Wf(/[a-z_+-/]{1,256}?/i);case" ":return Wf(/[^\S\n\r]/);default:return L(V)}})(t)||{invalidReason:fq};return F.token=t,F}const bq={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function wq(t,e){const{type:i,value:s}=t;if(i==="literal"){const y=/^\s+$/.test(s);return{literal:!y,val:y?" ":s}}const a=e[i];let d=bq[i];if(typeof d=="object"&&(d=d[a]),d)return{literal:!1,val:d}}function _q(t){return[`^${t.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,t]}function xq(t,e,i){const s=t.match(e);if(s){const a={};let d=1;for(const y in i)if(Uc(i,y)){const m=i[y],_=m.groups?m.groups+1:1;!m.literal&&m.token&&(a[m.token.val[0]]=m.deser(s.slice(d,d+_))),d+=_}return[s,a]}else return[s,{}]}function Sq(t){const e=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return de(t.z)||(i=Ko.create(t.z)),de(t.Z)||(i||(i=new pr(t.Z)),s=t.Z),de(t.q)||(t.M=(t.q-1)*3+1),de(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),de(t.u)||(t.S=a_(t.u)),[Object.keys(t).reduce((d,y)=>{const m=e(y);return m&&(d[m]=t[y]),d},{}),i,s]}let Jv=null;function $q(){return Jv||(Jv=re.fromMillis(1555555555555)),Jv}function Tq(t,e){if(t.literal)return t;const i=cr.macroTokenToFormatOpts(t.val),s=IE(i,e);return s==null||s.includes(void 0)?t:s}function ME(t,e){return Array.prototype.concat(...t.map(i=>Tq(i,e)))}function EE(t,e,i){const s=ME(cr.parseFormat(i),t),a=s.map(y=>vq(y,t)),d=a.find(y=>y.invalidReason);if(d)return{input:e,tokens:s,invalidReason:d.invalidReason};{const[y,m]=_q(a),_=RegExp(y,"i"),[S,I]=xq(e,_,m),[A,P,L]=I?Sq(I):[null,null,void 0];if(Uc(I,"a")&&Uc(I,"H"))throw new J0("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:s,regex:_,rawMatches:S,matches:I,result:A,zone:P,specificOffset:L}}}function Mq(t,e,i){const{result:s,zone:a,specificOffset:d,invalidReason:y}=EE(t,e,i);return[s,a,d,y]}function IE(t,e){return t?cr.create(e,t).formatDateTimeParts($q()).map(a=>wq(a,t)):null}const AE=[0,31,59,90,120,151,181,212,243,273,304,334],kE=[0,31,60,91,121,152,182,213,244,274,305,335];function xs(t,e){return new ln("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function OE(t,e,i){const s=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const a=s.getUTCDay();return a===0?7:a}function PE(t,e,i){return i+(ef(t)?kE:AE)[e-1]}function CE(t,e){const i=ef(t)?kE:AE,s=i.findIndex(d=>d<e),a=e-i[s];return{month:s+1,day:a}}function Qb(t){const{year:e,month:i,day:s}=t,a=PE(e,i,s),d=OE(e,i,s);let y=Math.floor((a-d+10)/7),m;return y<1?(m=e-1,y=Am(m)):y>Am(e)?(m=e+1,y=1):m=e,{weekYear:m,weekNumber:y,weekday:d,...qg(t)}}function t7(t){const{weekYear:e,weekNumber:i,weekday:s}=t,a=OE(e,1,4),d=Kp(e);let y=i*7+s-a-3,m;y<1?(m=e-1,y+=Kp(m)):y>d?(m=e+1,y-=Kp(e)):m=e;const{month:_,day:S}=CE(m,y);return{year:m,month:_,day:S,...qg(t)}}function Kv(t){const{year:e,month:i,day:s}=t,a=PE(e,i,s);return{year:e,ordinal:a,...qg(t)}}function e7(t){const{year:e,ordinal:i}=t,{month:s,day:a}=CE(e,i);return{year:e,month:s,day:a,...qg(t)}}function Eq(t){const e=Gg(t.weekYear),i=Fo(t.weekNumber,1,Am(t.weekYear)),s=Fo(t.weekday,1,7);return e?i?s?!1:xs("weekday",t.weekday):xs("week",t.week):xs("weekYear",t.weekYear)}function Iq(t){const e=Gg(t.year),i=Fo(t.ordinal,1,Kp(t.year));return e?i?!1:xs("ordinal",t.ordinal):xs("year",t.year)}function NE(t){const e=Gg(t.year),i=Fo(t.month,1,12),s=Fo(t.day,1,Im(t.year,t.month));return e?i?s?!1:xs("day",t.day):xs("month",t.month):xs("year",t.year)}function LE(t){const{hour:e,minute:i,second:s,millisecond:a}=t,d=Fo(e,0,23)||e===24&&i===0&&s===0&&a===0,y=Fo(i,0,59),m=Fo(s,0,59),_=Fo(a,0,999);return d?y?m?_?!1:xs("millisecond",a):xs("second",s):xs("minute",i):xs("hour",e)}const Yv="Invalid DateTime",i7=864e13;function Jf(t){return new ln("unsupported zone",`the zone "${t.name}" is not supported`)}function Zv(t){return t.weekData===null&&(t.weekData=Qb(t.c)),t.weekData}function $0(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new re({...i,...e,old:i})}function RE(t,e,i){let s=t-e*60*1e3;const a=i.offset(s);if(e===a)return[s,e];s-=(a-e)*60*1e3;const d=i.offset(s);return a===d?[s,a]:[t-Math.min(a,d)*60*1e3,Math.max(a,d)]}function r7(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Y1(t,e,i){return RE(h_(t),e,i)}function s7(t,e){const i=t.o,s=t.c.year+Math.trunc(e.years),a=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,d={...t.c,year:s,month:a,day:Math.min(t.c.day,Im(s,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},y=we.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=h_(d);let[_,S]=RE(m,i,t.zone);return y!==0&&(_+=y,S=t.zone.offset(_)),{ts:_,o:S}}function T0(t,e,i,s,a,d){const{setZone:y,zone:m}=i;if(t&&Object.keys(t).length!==0||e){const _=e||m,S=re.fromObject(t,{...i,zone:_,specificOffset:d});return y?S:S.setZone(m)}else return re.invalid(new ln("unparsable",`the input "${a}" can't be parsed as ${s}`))}function Kf(t,e,i=!0){return t.isValid?cr.create(ti.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Xv(t,e){const i=t.c.year>9999||t.c.year<0;let s="";return i&&t.c.year>=0&&(s+="+"),s+=Ii(t.c.year,i?6:4),e?(s+="-",s+=Ii(t.c.month),s+="-",s+=Ii(t.c.day)):(s+=Ii(t.c.month),s+=Ii(t.c.day)),s}function n7(t,e,i,s,a,d){let y=Ii(t.c.hour);return e?(y+=":",y+=Ii(t.c.minute),(t.c.second!==0||!i)&&(y+=":")):y+=Ii(t.c.minute),(t.c.second!==0||!i)&&(y+=Ii(t.c.second),(t.c.millisecond!==0||!s)&&(y+=".",y+=Ii(t.c.millisecond,3))),a&&(t.isOffsetFixed&&t.offset===0&&!d?y+="Z":t.o<0?(y+="-",y+=Ii(Math.trunc(-t.o/60)),y+=":",y+=Ii(Math.trunc(-t.o%60))):(y+="+",y+=Ii(Math.trunc(t.o/60)),y+=":",y+=Ii(Math.trunc(t.o%60)))),d&&(y+="["+t.zone.ianaName+"]"),y}const jE={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Aq={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},kq={ordinal:1,hour:0,minute:0,second:0,millisecond:0},DE=["year","month","day","hour","minute","second","millisecond"],Oq=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Pq=["year","ordinal","hour","minute","second","millisecond"];function o7(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new zM(t);return e}function a7(t,e){const i=sl(e.zone,Ei.defaultZone),s=ti.fromObject(e),a=Ei.now();let d,y;if(de(t.year))d=a;else{for(const S of DE)de(t[S])&&(t[S]=jE[S]);const m=NE(t)||LE(t);if(m)return re.invalid(m);const _=i.offset(a);[d,y]=Y1(t,_,i)}return new re({ts:d,zone:i,loc:s,o:y})}function l7(t,e,i){const s=de(i.round)?!0:i.round,a=(y,m)=>(y=l_(y,s||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(y,m)),d=y=>i.calendary?e.hasSame(t,y)?0:e.startOf(y).diff(t.startOf(y),y).get(y):e.diff(t,y).get(y);if(i.unit)return a(d(i.unit),i.unit);for(const y of i.units){const m=d(y);if(Math.abs(m)>=1)return a(m,y)}return a(t>e?-0:0,i.units[i.units.length-1])}function h7(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class re{constructor(e){const i=e.zone||Ei.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new ln("invalid input"):null)||(i.isValid?null:Jf(i));this.ts=de(e.ts)?Ei.now():e.ts;let a=null,d=null;if(!s)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[a,d]=[e.old.c,e.old.o];else{const m=i.offset(this.ts);a=r7(this.ts,m),s=Number.isNaN(a.year)?new ln("invalid input"):null,a=s?null:a,d=s?null:m}this._zone=i,this.loc=e.loc||ti.create(),this.invalid=s,this.weekData=null,this.c=a,this.o=d,this.isLuxonDateTime=!0}static now(){return new re({})}static local(){const[e,i]=h7(arguments),[s,a,d,y,m,_,S]=i;return a7({year:s,month:a,day:d,hour:y,minute:m,second:_,millisecond:S},e)}static utc(){const[e,i]=h7(arguments),[s,a,d,y,m,_,S]=i;return e.zone=pr.utcInstance,a7({year:s,month:a,day:d,hour:y,minute:m,second:_,millisecond:S},e)}static fromJSDate(e,i={}){const s=rU(e)?e.valueOf():NaN;if(Number.isNaN(s))return re.invalid("invalid input");const a=sl(i.zone,Ei.defaultZone);return a.isValid?new re({ts:s,zone:a,loc:ti.fromObject(i)}):re.invalid(Jf(a))}static fromMillis(e,i={}){if(Hh(e))return e<-i7||e>i7?re.invalid("Timestamp out of range"):new re({ts:e,zone:sl(i.zone,Ei.defaultZone),loc:ti.fromObject(i)});throw new _s(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Hh(e))return new re({ts:e*1e3,zone:sl(i.zone,Ei.defaultZone),loc:ti.fromObject(i)});throw new _s("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const s=sl(i.zone,Ei.defaultZone);if(!s.isValid)return re.invalid(Jf(s));const a=Ei.now(),d=de(i.specificOffset)?s.offset(a):i.specificOffset,y=km(e,o7),m=!de(y.ordinal),_=!de(y.year),S=!de(y.month)||!de(y.day),I=_||S,A=y.weekYear||y.weekNumber,P=ti.fromObject(i);if((I||m)&&A)throw new J0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&m)throw new J0("Can't mix ordinal dates with month/day");const L=A||y.weekday&&!I;let j,F,V=r7(a,d);L?(j=Oq,F=Aq,V=Qb(V)):m?(j=Pq,F=kq,V=Kv(V)):(j=DE,F=jE);let J=!1;for(const yt of j){const $t=y[yt];de($t)?J?y[yt]=F[yt]:y[yt]=V[yt]:J=!0}const Q=L?Eq(y):m?Iq(y):NE(y),Z=Q||LE(y);if(Z)return re.invalid(Z);const et=L?t7(y):m?e7(y):y,[st,nt]=Y1(et,d,s),pt=new re({ts:st,zone:s,o:nt,loc:P});return y.weekday&&I&&e.weekday!==pt.weekday?re.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${pt.toISO()}`):pt}static fromISO(e,i={}){const[s,a]=HU(e);return T0(s,a,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[s,a]=WU(e);return T0(s,a,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[s,a]=JU(e);return T0(s,a,i,"HTTP",i)}static fromFormat(e,i,s={}){if(de(e)||de(i))throw new _s("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:d=null}=s,y=ti.fromOpts({locale:a,numberingSystem:d,defaultToEN:!0}),[m,_,S,I]=Mq(y,e,i);return I?re.invalid(I):T0(m,_,s,`format ${i}`,e,S)}static fromString(e,i,s={}){return re.fromFormat(e,i,s)}static fromSQL(e,i={}){const[s,a]=eq(e);return T0(s,a,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new _s("need to specify a reason the DateTime is invalid");const s=e instanceof ln?e:new ln(e,i);if(Ei.throwOnInvalid)throw new NG(s);return new re({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const s=IE(e,ti.fromObject(i));return s?s.map(a=>a?a.val:null).join(""):null}static expandFormat(e,i={}){return ME(cr.parseFormat(e),ti.fromObject(i)).map(a=>a.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Zv(this).weekYear:NaN}get weekNumber(){return this.isValid?Zv(this).weekNumber:NaN}get weekday(){return this.isValid?Zv(this).weekday:NaN}get ordinal(){return this.isValid?Kv(this.c).ordinal:NaN}get monthShort(){return this.isValid?Hf.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Hf.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Hf.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Hf.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return ef(this.year)}get daysInMonth(){return Im(this.year,this.month)}get daysInYear(){return this.isValid?Kp(this.year):NaN}get weeksInWeekYear(){return this.isValid?Am(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:s,calendar:a}=cr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:a}}toUTC(e=0,i={}){return this.setZone(pr.instance(e),i)}toLocal(){return this.setZone(Ei.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(e=sl(e,Ei.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(i||s){const d=e.offset(this.ts),y=this.toObject();[a]=Y1(y,d,e)}return $0(this,{ts:a,zone:e})}else return re.invalid(Jf(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:s}={}){const a=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:s});return $0(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=km(e,o7),s=!de(i.weekYear)||!de(i.weekNumber)||!de(i.weekday),a=!de(i.ordinal),d=!de(i.year),y=!de(i.month)||!de(i.day),m=d||y,_=i.weekYear||i.weekNumber;if((m||a)&&_)throw new J0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&a)throw new J0("Can't mix ordinal dates with month/day");let S;s?S=t7({...Qb(this.c),...i}):de(i.ordinal)?(S={...this.toObject(),...i},de(i.day)&&(S.day=Math.min(Im(S.year,S.month),S.day))):S=e7({...Kv(this.c),...i});const[I,A]=Y1(S,this.o,this.zone);return $0(this,{ts:I,o:A})}plus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e);return $0(this,s7(this,i))}minus(e){if(!this.isValid)return this;const i=we.fromDurationLike(e).negate();return $0(this,s7(this,i))}startOf(e){if(!this.isValid)return this;const i={},s=we.normalizeUnit(e);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks"&&(i.weekday=1),s==="quarters"){const a=Math.ceil(this.month/3);i.month=(a-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?cr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):Yv}toLocaleString(e=Em,i={}){return this.isValid?cr.create(this.loc.clone(i),e).formatDateTime(this):Yv}toLocaleParts(e={}){return this.isValid?cr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:a=!0,extendedZone:d=!1}={}){if(!this.isValid)return null;const y=e==="extended";let m=Xv(this,y);return m+="T",m+=n7(this,y,i,s,a,d),m}toISODate({format:e="extended"}={}){return this.isValid?Xv(this,e==="extended"):null}toISOWeekDate(){return Kf(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:a=!1,extendedZone:d=!1,format:y="extended"}={}){return this.isValid?(a?"T":"")+n7(this,y==="extended",i,e,s,d):null}toRFC2822(){return Kf(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kf(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xv(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let a="HH:mm:ss.SSS";return(i||e)&&(s&&(a+=" "),i?a+="z":e&&(a+="ZZ")),Kf(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Yv}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",s={}){if(!this.isValid||!e.isValid)return we.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...s},d=sU(i).map(we.normalizeUnit),y=e.valueOf()>this.valueOf(),m=y?this:e,_=y?e:this,S=cq(m,_,d,a);return y?S.negate():S}diffNow(e="milliseconds",i={}){return this.diff(re.now(),e,i)}until(e){return this.isValid?vi.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const s=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(i)<=s&&s<=a.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||re.fromObject({},{zone:this.zone}),s=e.padding?this<i?-e.padding:e.padding:0;let a=["years","months","days","hours","minutes","seconds"],d=e.unit;return Array.isArray(e.unit)&&(a=e.unit,d=void 0),l7(i,this.plus(s),{...e,numeric:"always",units:a,unit:d})}toRelativeCalendar(e={}){return this.isValid?l7(e.base||re.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(re.isDateTime))throw new _s("min requires all arguments be DateTimes");return W6(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(re.isDateTime))throw new _s("max requires all arguments be DateTimes");return W6(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,s={}){const{locale:a=null,numberingSystem:d=null}=s,y=ti.fromOpts({locale:a,numberingSystem:d,defaultToEN:!0});return EE(y,e,i)}static fromStringExplain(e,i,s={}){return re.fromFormatExplain(e,i,s)}static get DATE_SHORT(){return Em}static get DATE_MED(){return VM}static get DATE_MED_WITH_WEEKDAY(){return jG}static get DATE_FULL(){return GM}static get DATE_HUGE(){return UM}static get TIME_SIMPLE(){return qM}static get TIME_WITH_SECONDS(){return BM}static get TIME_WITH_SHORT_OFFSET(){return HM}static get TIME_WITH_LONG_OFFSET(){return WM}static get TIME_24_SIMPLE(){return JM}static get TIME_24_WITH_SECONDS(){return KM}static get TIME_24_WITH_SHORT_OFFSET(){return YM}static get TIME_24_WITH_LONG_OFFSET(){return ZM}static get DATETIME_SHORT(){return XM}static get DATETIME_SHORT_WITH_SECONDS(){return QM}static get DATETIME_MED(){return tE}static get DATETIME_MED_WITH_SECONDS(){return eE}static get DATETIME_MED_WITH_WEEKDAY(){return DG}static get DATETIME_FULL(){return iE}static get DATETIME_FULL_WITH_SECONDS(){return rE}static get DATETIME_HUGE(){return sE}static get DATETIME_HUGE_WITH_SECONDS(){return nE}}function M0(t){if(re.isDateTime(t))return t;if(t&&t.valueOf&&Hh(t.valueOf()))return re.fromJSDate(t);if(t&&typeof t=="object")return re.fromObject(t);throw new _s(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Cq={year:void 0,month:void 0,day:void 0,weekday:void 0},Nq={hour:void 0,minute:void 0,second:void 0},Lq={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},f_={timeZone:"Etc/UTC"},En={year:"numeric",month:"numeric",day:"numeric"},E0={year:"numeric",month:"long",day:"numeric"},I0={year:"numeric",month:"short",day:"numeric"},A0={year:"numeric",month:"long",weekday:"long",day:"numeric"},cs={hour:"numeric",minute:"numeric"},Rs={...cs,second:"numeric"},a0={"short-date":En,"short-date-short-time":{...En,...cs},"short-date-short-time-24":{...En,...cs,hour12:!1},"short-date-long-time":{...En,...Rs},"short-date-long-time-24":{...En,...Rs,hour12:!1},"short-date-le":En,"short-date-le-short-time":{...En,...cs},"short-date-le-short-time-24":{...En,...cs,hour12:!1},"short-date-le-long-time":{...En,...Rs},"short-date-le-long-time-24":{...En,...Rs,hour12:!1},"long-month-day-year":E0,"long-month-day-year-short-time":{...E0,...cs},"long-month-day-year-short-time-24":{...E0,...cs,hour12:!1},"long-month-day-year-long-time":{...E0,...Rs},"long-month-day-year-long-time-24":{...E0,...Rs,hour12:!1},"day-short-month-year":I0,"day-short-month-year-short-time":{...I0,...cs},"day-short-month-year-short-time-24":{...I0,...cs,hour12:!1},"day-short-month-year-long-time":{...I0,...Rs},"day-short-month-year-long-time-24":{...I0,...Rs,hour12:!1},"long-date":A0,"long-date-short-time":{...A0,...cs},"long-date-short-time-24":{...A0,...cs,hour12:!1},"long-date-long-time":{...A0,...Rs},"long-date-long-time-24":{...A0,...Rs,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":cs,"long-time":Rs},Rq=dr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),FE={ar:"ar-u-nu-latn-ca-gregory"};let tw=new WeakMap,zE=a0["short-date-short-time"];function jq(t){const e=t||zE;let i=tw.get(e);if(!i){const s=dn(),a=FE[s]||s;i=new Intl.DateTimeFormat(a,e),tw.set(e,i)}return i}function Yf(t){return a0[t]}function lu(t,e){return jq(e).format(t)}function Dq(t,e=a0["short-date"]){return lu(new Date(t),{...e,...f_,...Nq})}function Fq(t,e=a0["short-time"]){return lu(new Date(`1970-01-01T${t}Z`),{...e,...f_,...Cq})}function zq(t,e=a0["short-date-short-time"]){const i=re.fromISO(t,{setZone:!0}),s=dn(),a=FE[s]??s;return i.toLocaleString({...Lq,...e},{locale:a})}F5(()=>{tw=new WeakMap,zE=a0["short-date-short-time"]});const Vq={ar:"ar-u-nu-latn"};let Z1=new WeakMap,VE={};function Gq(t){const e=t||VE;if(!Z1.has(e)){const i=dn(),s=Vq[dn()]||i;Z1.set(e,new Intl.NumberFormat(s,t))}return Z1.get(e)}function Uq(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Id(t,e){return Object.is(t,-0)&&(t=0),Gq(e).format(t)}F5(()=>{Z1=new WeakMap,VE={}});let Gu=class extends _i(gt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(e){return Id(e,Uq(this))}formatDate(e,i=!1){return this.dateFormat?lu(e,{...Yf(this.dateFormat),...i&&f_}):this.formatNumber(e)}formatDateOnly(e){const i=(this.dateFormat&&Yf(this.dateFormat))??void 0;return Dq(e,i)}formatTimeOnly(e){const i=(this.dateFormat&&Yf(this.dateFormat))??void 0;return Fq(e,i)}formatTimestamp(e){const i=(this.dateFormat&&Yf(this.dateFormat))??void 0;return zq(e,i)}formatRasterPixelValue(e){return e.includes("-")?e:e.trim().includes(",")?this._formatDelimitedString(e,",",", "):e.trim().includes(";")?this._formatDelimitedString(e,";","; "):e.trim().includes(" ")?this._formatDelimitedString(e," "," "):this.formatNumber(Number(e))}_formatDelimitedString(e,i,s){return e&&i&&s?e.trim().split(i).map(a=>this.formatNumber(Number(a))).join(s):e}};w([Lt(Rq)],Gu.prototype,"dateFormat",void 0),w([T({type:Boolean,json:{write:!0}})],Gu.prototype,"digitSeparator",void 0),w([T({type:Ee,json:{write:!0}})],Gu.prototype,"places",void 0),Gu=w([W("esri.popup.support.FieldInfoFormat")],Gu);const Y0=Gu;var ew;let Gs=ew=class extends gt{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new ew({fieldName:this.fieldName,format:this.format?ot(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};w([T({type:String,json:{write:!0}})],Gs.prototype,"fieldName",void 0),w([T({type:Y0,json:{write:!0}})],Gs.prototype,"format",void 0),w([T({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Gs.prototype,"isEditable",void 0),w([T({type:String,json:{write:!0}})],Gs.prototype,"label",void 0),w([Lt(new Ie({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Gs.prototype,"stringFieldOption",void 0),w([T({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Gs.prototype,"statisticType",void 0),w([T({type:String,json:{write:!0}})],Gs.prototype,"tooltip",void 0),w([T({type:Boolean,json:{write:!0}})],Gs.prototype,"visible",void 0),Gs=ew=w([W("esri.popup.FieldInfo")],Gs);const y_=Gs;var iw;let bo=iw=class extends Pl{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new iw(ot({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};w([T({type:Object,json:{write:!0}})],bo.prototype,"attributes",void 0),w([T({type:String,json:{write:!0}})],bo.prototype,"description",void 0),w([T({type:[y_]})],bo.prototype,"fieldInfos",void 0),w([At("fieldInfos")],bo.prototype,"writeFieldInfos",null),w([T({type:String,json:{write:!0}})],bo.prototype,"title",void 0),w([T({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],bo.prototype,"type",void 0),bo=iw=w([W("esri.popup.content.FieldsContent")],bo);const Ad=bo;let eh=class extends gt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};w([T({type:String,json:{write:!0}})],eh.prototype,"altText",void 0),w([T({type:String,json:{write:!0}})],eh.prototype,"caption",void 0),w([T({type:String,json:{write:!0}})],eh.prototype,"title",void 0),w([T({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],eh.prototype,"type",void 0),eh=w([W("esri.popup.content.mixins.MediaInfo")],eh);const m_=eh;var rw;let Uu=rw=class extends Rt{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new rw({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};w([T()],Uu.prototype,"fieldName",void 0),w([T()],Uu.prototype,"tooltip",void 0),w([T()],Uu.prototype,"value",void 0),Uu=rw=w([W("esri.popup.content.support.ChartMediaInfoValueSeries")],Uu);const qq=Uu;var sw;let ih=sw=class extends gt{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new sw({fields:ot(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};w([T({type:[String],json:{write:!0}})],ih.prototype,"fields",void 0),w([T({type:String,json:{write:!0}})],ih.prototype,"normalizeField",void 0),w([T({type:[qq],json:{read:!1}})],ih.prototype,"series",void 0),w([T({type:String,json:{write:!0}})],ih.prototype,"tooltipField",void 0),ih=sw=w([W("esri.popup.content.support.ChartMediaInfoValue")],ih);const Bq=ih;let Z0=class extends m_{constructor(e){super(e),this.type=null,this.value=null}};w([T({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Z0.prototype,"type",void 0),w([T({type:Bq,json:{write:!0}})],Z0.prototype,"value",void 0),Z0=w([W("esri.popup.content.mixins.ChartMediaInfo")],Z0);const Bg=Z0,Hg=dr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var nw;let X1=nw=class extends Bg{constructor(t){super(t),this.type="bar-chart"}clone(){return new nw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([T({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Hg.write}})],X1.prototype,"type",void 0),X1=nw=w([W("esri.popup.content.BarChartMediaInfo")],X1);const GE=X1;var ow;let Q1=ow=class extends Bg{constructor(t){super(t),this.type="column-chart"}clone(){return new ow({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([T({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Hg.write}})],Q1.prototype,"type",void 0),Q1=ow=w([W("esri.popup.content.ColumnChartMediaInfo")],Q1);const UE=Q1;var aw;let X0=aw=class extends gt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new aw({linkURL:this.linkURL,sourceURL:this.sourceURL})}};w([T({type:String,json:{write:!0}})],X0.prototype,"linkURL",void 0),w([T({type:String,json:{write:!0}})],X0.prototype,"sourceURL",void 0),X0=aw=w([W("esri.popup.content.support.ImageMediaInfoValue")],X0);const Hq=X0;var lw;let qu=lw=class extends m_{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new lw({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};w([T({type:Number,json:{write:!0}})],qu.prototype,"refreshInterval",void 0),w([T({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],qu.prototype,"type",void 0),w([T({type:Hq,json:{write:!0}})],qu.prototype,"value",void 0),qu=lw=w([W("esri.popup.content.ImageMediaInfo")],qu);const qE=qu;var hw;let ty=hw=class extends Bg{constructor(t){super(t),this.type="line-chart"}clone(){return new hw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([T({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Hg.write}})],ty.prototype,"type",void 0),ty=hw=w([W("esri.popup.content.LineChartMediaInfo")],ty);const BE=ty;var uw;let ey=uw=class extends Bg{constructor(t){super(t),this.type="pie-chart"}clone(){return new uw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};w([T({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Hg.write}})],ey.prototype,"type",void 0),ey=uw=w([W("esri.popup.content.PieChartMediaInfo")],ey);const HE=ey,WE={base:m_,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":GE,"column-chart":UE,"line-chart":BE,"pie-chart":HE,image:qE}};var cw;let Us=cw=class extends Pl{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?qE.fromJSON(e):e.type==="barchart"?GE.fromJSON(e):e.type==="columnchart"?UE.fromJSON(e):e.type==="linechart"?BE.fromJSON(e):e.type==="piechart"?HE.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new cw(ot({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};w([T()],Us.prototype,"activeMediaInfoIndex",void 0),w([T({type:Object,json:{write:!0}})],Us.prototype,"attributes",void 0),w([T({type:String,json:{write:!0}})],Us.prototype,"description",void 0),w([T({types:[WE]})],Us.prototype,"mediaInfos",void 0),w([kt("mediaInfos")],Us.prototype,"readMediaInfos",null),w([At("mediaInfos")],Us.prototype,"writeMediaInfos",null),w([T({type:String,json:{write:!0}})],Us.prototype,"title",void 0),w([T({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Us.prototype,"type",void 0),Us=cw=w([W("esri.popup.content.MediaContent")],Us);const Om=Us;var pw;let Q0=pw=class extends gt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new pw({field:this.field,order:this.order})}};w([T({type:String,json:{write:!0}})],Q0.prototype,"field",void 0),w([T({type:["asc","desc"],json:{write:!0}})],Q0.prototype,"order",void 0),Q0=pw=w([W("esri.popup.support.RelatedRecordsInfoFieldOrder")],Q0);const JE=Q0;let Cn=class extends _i(Pl){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};w([T({type:String,json:{write:!0}})],Cn.prototype,"description",void 0),w([T({type:Number,json:{type:Ee,write:!0}})],Cn.prototype,"displayCount",void 0),w([T({type:["list"],json:{write:!0}})],Cn.prototype,"displayType",void 0),w([T({type:[JE],json:{write:!0}})],Cn.prototype,"orderByFields",void 0),w([T({type:Number,json:{type:Ee,write:!0}})],Cn.prototype,"relationshipId",void 0),w([T({type:String,json:{write:!0}})],Cn.prototype,"title",void 0),w([T({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Cn.prototype,"type",void 0),Cn=w([W("esri.popup.content.RelationshipContent")],Cn);const Pm=Cn;var dw;let tp=dw=class extends Pl{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new dw({text:this.text})}};w([T({type:String,json:{write:!0}})],tp.prototype,"text",void 0),w([T({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],tp.prototype,"type",void 0),tp=dw=w([W("esri.popup.content.TextContent")],tp);const Cm=tp,Wq={base:null,key:"type",typeMap:{attachment:Ed,media:Om,text:Cm,expression:o_,field:Ad,relationship:Pm}};var fw;let rh=fw=class extends gt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new fw({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};w([T({type:String,json:{write:!0}})],rh.prototype,"name",void 0),w([T({type:String,json:{write:!0}})],rh.prototype,"title",void 0),w([T({type:String,json:{write:!0}})],rh.prototype,"expression",void 0),w([T({type:["string","number"],json:{write:!0}})],rh.prototype,"returnType",void 0),rh=fw=w([W("esri.popup.ExpressionInfo")],rh);const Jq=rh;var yw;let ep=yw=class extends gt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new yw({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};w([T({type:Boolean,json:{write:!0}})],ep.prototype,"returnTopmostRaster",void 0),w([T({type:Boolean,json:{write:!0}})],ep.prototype,"showNoDataRecords",void 0),ep=yw=w([W("esri.popup.LayerOptions")],ep);const Kq=ep;var mw;let ip=mw=class extends gt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new mw({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ot(this.orderByFields):null})}};w([T({type:Boolean,json:{write:!0}})],ip.prototype,"showRelatedRecords",void 0),w([T({type:[JE],json:{write:!0}})],ip.prototype,"orderByFields",void 0),ip=mw=w([W("esri.popup.RelatedRecordsInfo")],ip);const Yq=ip;var gw;let ps=gw=class extends i0(Rt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new gw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};w([T()],ps.prototype,"active",void 0),w([T()],ps.prototype,"className",void 0),w([T()],ps.prototype,"disabled",void 0),w([T()],ps.prototype,"icon",void 0),w([T()],ps.prototype,"id",void 0),w([T()],ps.prototype,"indicator",void 0),w([T()],ps.prototype,"title",void 0),w([T()],ps.prototype,"type",void 0),w([T()],ps.prototype,"visible",void 0),ps=gw=w([W("esri.support.actions.ActionBase")],ps);const nf=ps;var vw;let iy=vw=class extends nf{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new vw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};w([T()],iy.prototype,"image",void 0),iy=vw=w([W("esri.support.Action.ActionButton")],iy);const KE=iy;var bw;let rp=bw=class extends nf{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new bw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};w([T()],rp.prototype,"image",void 0),w([T()],rp.prototype,"value",void 0),rp=bw=w([W("esri.support.Action.ActionToggle")],rp);const YE=rp,Zq="esri.PopupTemplate",Xq=mt.getLogger(Zq),k0="relationships/",u7="expression/",Qq=Vt.ofType({key:"type",defaultKeyValue:"button",base:nf,typeMap:{button:KE,toggle:YE}}),tB={base:Pl,key:"type",typeMap:{media:Om,custom:PG,text:Cm,attachments:Ed,fields:Ad,expression:o_,relationship:Pm}},eB=["attachments","fields","media","text","expression","relationship"];let Li=class extends _i(gt){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ho(tB,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||ta(e)?e:(Xq.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:s}=i;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,s):this._readPopupInfo(i)}writeContent(e,i,s,a){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(d=>eB.includes(d.type)).map(d=>d&&d.toJSON(a)),i.popupElements.forEach(d=>{d.type==="attachments"?this._writeAttachmentContent(i):d.type==="media"?this._writeMediaContent(d,i):d.type==="text"?this._writeTextContent(d,i):d.type==="relationship"&&this._writeRelationshipContent(d,i)})):i.description=e}writeFieldInfos(e,i,s,a){const{content:d}=this,y=Array.isArray(d)?d:null;if(e){const m=y?y.filter(S=>S.type==="fields"):[],_=m.length&&m.every(S=>{var I;return(I=S.fieldInfos)==null?void 0:I.length});i.fieldInfos=e.filter(Boolean).map(S=>{const I=S.toJSON(a);return _&&(I.visible=!1),I})}if(y)for(const m of y)m.type==="fields"&&this._writeFieldsContent(m,i)}writeLayerOptions(e,i,s,a){i[s]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(a)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...s,...this._getContentExpressionInfos(this.content,s)]),Md(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const s=ot(e.fieldInfos);Array.isArray(i.fieldInfos)?s.forEach(a=>{const d=i.fieldInfos.find(y=>y.fieldName.toLowerCase()===a.fieldName.toLowerCase());d?d.visible=!0:i.fieldInfos.push(a)}):i.fieldInfos=s}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var d,y;const s=((d=e.orderByFields)==null?void 0:d.map(m=>this._toFieldOrderJSON(m,e.relationshipId)))||[],a=[...((y=i.relatedRecordsInfo)==null?void 0:y.orderByFields)||[],...s];i.relatedRecordsInfo={showRelatedRecords:!0,...(a==null?void 0:a.length)&&{orderByFields:a}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const s=ot(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...s]:i.mediaInfos=s}_readPopupInfoElements(e,i,s){const a={description:!1,mediaInfos:!1};return s.map(d=>d.type==="media"?(d.mediaInfos||!i||a.mediaInfos||(d.mediaInfos=i,a.mediaInfos=!0),Om.fromJSON(d)):d.type==="text"?(d.text||!e||a.description||(d.text=e,a.description=!0),Cm.fromJSON(d)):d.type==="attachments"?Ed.fromJSON(d):d.type==="fields"?Ad.fromJSON(d):d.type==="expression"?o_.fromJSON(d):d.type==="relationship"?Pm.fromJSON(d):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:s}=e;if(!(i!=null&&i.startsWith(k0)))return null;const a=i.replace(k0,"").split("/");if(a.length!==2)return null;const d=parseInt(a[0],10),y=a[1];return typeof d=="number"&&y?Pm.fromJSON({relationshipId:d,orderByFields:[{field:y,order:s}]}):null}_toFieldOrderJSON(e,i){const{order:s,field:a}=e;return{field:`${k0}${i}/${a}`,order:s}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:s,relatedRecordsInfo:a={showRelatedRecords:!1}}){const d=[];e?d.push(new Cm({text:e})):d.push(new Ad),Array.isArray(i)&&i.length&&d.push(Om.fromJSON({mediaInfos:i})),s&&d.push(Ed.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:m}=a;return y&&(m!=null&&m.length)&&m.forEach(_=>{const S=this._toRelationshipContent(_);S&&d.push(S)}),d.length?d:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const s=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...s.reduce((a,d)=>[...a,...this._getMediaInfoFields(d)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:s,value:a}=e,d=a||{},{fields:y,normalizeField:m,tooltipField:_,sourceURL:S,linkURL:I}=d,A=[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(S),...this._extractFieldNames(I),...y??[]];return m&&A.push(m),_&&A.push(_),A}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((s,a)=>[...s,...a.type==="expression"&&a.expressionInfo?[a.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,s)=>[...i,...this._getContentElementFields(s)],[]):[]}async _collectExpressionInfoFields(e,i,s){s&&await Promise.all(s.map(a=>$r(e,i,a.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(k0)&&!i.startsWith(u7)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,s)=>[...i,...this._getActionFields(s)],[]):[]}_getActionFields(e){const{className:i,title:s,type:a}=e,d=a==="button"||a==="toggle"?e.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(d)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,s=e.match(i);if(!s)return[];const a=/\{(\w+):.+\}/,d=s.filter(y=>!(y.indexOf(`{${k0}`)===0||y.indexOf(`{${u7}`)===0)).map(y=>y.replace(a,"{$1}"));return d?d.map(y=>y.slice(1,-1)):[]}};w([T({type:Qq})],Li.prototype,"actions",void 0),w([T()],Li.prototype,"content",void 0),w([Ne("content")],Li.prototype,"castContent",null),w([kt("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Li.prototype,"readContent",null),w([At("content",{popupElements:{type:Vt.ofType(Wq)},showAttachments:{type:Boolean},mediaInfos:{type:Vt.ofType(WE)},description:{type:String},relatedRecordsInfo:{type:Yq}})],Li.prototype,"writeContent",null),w([T({type:[Jq],json:{write:!0}})],Li.prototype,"expressionInfos",void 0),w([T({type:[y_]})],Li.prototype,"fieldInfos",void 0),w([At("fieldInfos")],Li.prototype,"writeFieldInfos",null),w([T({type:Kq})],Li.prototype,"layerOptions",void 0),w([At("layerOptions")],Li.prototype,"writeLayerOptions",null),w([T({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Li.prototype,"lastEditInfoEnabled",void 0),w([T()],Li.prototype,"outFields",void 0),w([T()],Li.prototype,"overwriteActions",void 0),w([T()],Li.prototype,"returnGeometry",void 0),w([T({json:{type:String}})],Li.prototype,"title",void 0),w([At("title")],Li.prototype,"writeTitle",null),Li=w([W("esri.PopupTemplate")],Li);const g_=Li,c7=new Ie({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let iB=0,Bu=class extends gt{constructor(e){super(e),this.id="sym"+iB++,this.type=null,this.color=new Xt([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};w([T({type:c7.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:c7.write}}})],Bu.prototype,"type",void 0),w([T({type:Xt,json:{write:{allowNull:!0}}})],Bu.prototype,"color",void 0),w([kt("color")],Bu.prototype,"readColor",null),Bu=w([W("esri.symbols.Symbol")],Bu);const Rr=Bu;var ww;let Ea=ww=class extends Rr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const s=this.data.primitiveOverrides;if(s){const a=s.map(d=>{const y=d.valueExpressionInfo;return $r(t,e,y.expression)});await Promise.all(a)}}}clone(){return new ww({data:ot(this.data)})}hash(){return p5(JSON.stringify(this.data)).toString()}};w([T({json:{write:!1}})],Ea.prototype,"color",void 0),w([T({json:{write:!0}})],Ea.prototype,"data",void 0),w([kt("data",["symbol"])],Ea.prototype,"readData",null),w([At("data",{})],Ea.prototype,"writeData",null),w([Lt({CIMSymbolReference:"cim"},{readOnly:!0})],Ea.prototype,"type",void 0),Ea=ww=w([W("esri.symbols.CIMSymbol")],Ea);const of=Ea;let Hu=class extends gt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,s){e||(i[s]=e)}};w([T({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Hu.prototype,"enabled",void 0),w([At("enabled")],Hu.prototype,"writeEnabled",null),w([T({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Hu.prototype,"type",void 0),Hu=w([W("esri.symbols.Symbol3DLayer")],Hu);const no=Hu,rB=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,sB="screenUtils.toPt: input not recognized!",ZE=96;function XE(t){return t?t/72*ZE:0}function Yo(t){return t?72*t/ZE:0}function ze(t){if(typeof t=="string"){const e=t.match(rB);if(e){const i=Number(e[1]),s=e[3]&&e[3].toLowerCase(),a=t.charAt(0)==="-",d=s==="px"?Yo(i):i;return a?-d:d}return console.warn(sB),null}return t}function Sr(t=0,e=0){return{x:t,y:e}}function f0t(t=0,e=0){return[t,e]}function nB(t,e){const i=e.transparency!=null?Td(e.transparency):1,s=e.color;return s&&Array.isArray(s)?new Xt([s[0]||0,s[1]||0,s[2]||0,i]):null}function oB(t,e){e.color=t.toJSON().slice(0,3);const i=H5(t.a);i!==0&&(e.transparency=i)}const Cl={type:Xt,json:{type:[Ee],default:null,read:{source:["color","transparency"],reader:nB},write:{target:{color:{type:[Ee]},transparency:{type:Ee}},writer:oB}}},eo={type:Number,cast:ze,json:{write:!0}};let sh=class extends gt{constructor(e){super(e),this.color=new Xt([0,0,0,1]),this.extensionLength=0,this.size=Yo(1)}clone(){}cloneProperties(){return{color:ot(this.color),size:this.size,extensionLength:this.extensionLength}}};w([T({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],sh.prototype,"type",void 0),w([T(Cl)],sh.prototype,"color",void 0),w([T({...eo,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],sh.prototype,"extensionLength",void 0),w([T(eo)],sh.prototype,"size",void 0),sh=w([W("esri.symbols.edges.Edges3D")],sh);const v_=sh;var _w;let ry=_w=class extends v_{constructor(t){super(t),this.type="sketch"}clone(){return new _w(this.cloneProperties())}};w([Lt({sketch:"sketch"},{readOnly:!0})],ry.prototype,"type",void 0),ry=_w=w([W("esri.symbols.edges.SketchEdges3D")],ry);const aB=ry;var xw;let sy=xw=class extends v_{constructor(t){super(t),this.type="solid"}clone(){return new xw(this.cloneProperties())}};w([Lt({solid:"solid"},{readOnly:!0})],sy.prototype,"type",void 0),sy=xw=w([W("esri.symbols.support.SolidEdges3D")],sy);const lB=sy,QE={types:{key:"type",base:v_,typeMap:{solid:lB,sketch:aB}},json:{write:!0}};var Sw;let Ts=Sw=class extends gt{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new Sw(t)}};w([T(Cl)],Ts.prototype,"color",void 0),Ts=Sw=w([W("esri.symbols.support.Symbol3DMaterial")],Ts);var $w;let Ia=$w=class extends no{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new $w({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};w([Lt({Extrude:"extrude"},{readOnly:!0})],Ia.prototype,"type",void 0),w([T({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ia.prototype,"size",void 0),w([T({type:Ts,json:{write:!0}})],Ia.prototype,"material",void 0),w([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ia.prototype,"castShadows",void 0),w([T(QE)],Ia.prototype,"edges",void 0),Ia=$w=w([W("esri.symbols.ExtrudeSymbol3DLayer")],Ia);const tI=Ia;let sp=class extends Rr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};w([Lt({esriSLS:"simple-line"},{readOnly:!0})],sp.prototype,"type",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],sp.prototype,"width",void 0),sp=w([W("esri.symbols.LineSymbol")],sp);const hB=sp,uB=["begin","end","begin-end"],eI=["arrow","circle","square","diamond","cross","x"];var Tw;let Nn=Tw=class extends gt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,s){e[i]=(s==null?void 0:s.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,s){(s==null?void 0:s.origin)==="web-map"||(e[i]=t)}clone(){return new Tw({color:ot(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};w([T({type:["begin","end","begin-end"],json:{write:!0}})],Nn.prototype,"placement",void 0),w([Lt({"line-marker":"line-marker"},{readOnly:!0}),T({json:{origins:{"web-map":{write:!1}}}})],Nn.prototype,"type",void 0),w([T({type:eI})],Nn.prototype,"style",void 0),w([At("style")],Nn.prototype,"writeStyle",null),w([T({type:Xt,value:null,json:{write:{allowNull:!0}}})],Nn.prototype,"color",null),w([kt("color")],Nn.prototype,"readColor",null),w([At("color")],Nn.prototype,"writeColor",null),Nn=Tw=w([W("esri.symbols.LineSymbolMarker")],Nn);const cB=Nn;var Mw;const Qv=new Ie({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let wo=Mw=class extends hB{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,s,a,d){if(t&&typeof t!="string")return t;const y={};return t!=null&&(y.style=t),e!=null&&(y.color=e),i!=null&&(y.width=ze(i)),s!=null&&(y.cap=s),a!=null&&(y.join=a),d!=null&&(y.miterLimit=ze(d)),y}clone(){var t;return new Mw({color:ot(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};w([Lt({esriSLS:"simple-line"},{readOnly:!0})],wo.prototype,"type",void 0),w([T({type:Qv.apiValues,json:{read:Qv.read,write:Qv.write}})],wo.prototype,"style",void 0),w([T({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],wo.prototype,"cap",void 0),w([T({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],wo.prototype,"join",void 0),w([T({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":cB}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],wo.prototype,"marker",void 0),w([T({type:Number,json:{read:!1,write:!1}})],wo.prototype,"miterLimit",void 0),wo=Mw=w([W("esri.symbols.SimpleLineSymbol")],wo);const As=wo;let np=class extends Rr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};w([T({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":As}},json:{default:null,write:!0}})],np.prototype,"outline",void 0),w([T({type:["simple-fill","picture-fill"],readOnly:!0})],np.prototype,"type",void 0),np=w([W("esri.symbols.FillSymbol")],np);const iI=np;let ny=class extends gt{constructor(e){super(e)}clone(){}};w([T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ny.prototype,"type",void 0),ny=w([W("esri.symbols.patterns.LinePattern3D")],ny);const rI=ny,pB=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Ew;const dB=dr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let op=Ew=class extends rI{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new Ew(t)}};w([T({type:["style"]})],op.prototype,"type",void 0),w([Lt(dB),T({type:pB})],op.prototype,"style",void 0),op=Ew=w([W("esri.symbols.patterns.LineStylePattern3D")],op);const b_=op;let oy=class extends gt{constructor(e){super(e)}clone(){}};w([T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],oy.prototype,"type",void 0),oy=w([W("esri.symbols.patterns.Pattern3D")],oy);const sI=oy,fB=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Iw;let ap=Iw=class extends sI{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new Iw(t)}};w([T({type:["style"]})],ap.prototype,"type",void 0),w([T({type:fB,json:{read:!0,write:!0}})],ap.prototype,"style",void 0),ap=Iw=w([W("esri.symbols.patterns.StylePattern3D")],ap);const nI=ap,yB={types:{key:"type",base:sI,typeMap:{style:nI}},json:{write:!0}},oI={types:{key:"type",base:rI,typeMap:{style:b_}},json:{write:!0}},Zp=new Xt("white");new Xt("black");const mB=new Xt([255,255,255,0]);function gB(t){return t.r===0&&t.g===0&&t.b===0}var Aw;let Xp=Aw=class extends Ts{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new Aw(t)}};w([Lt({multiply:"multiply",replace:"replace",tint:"tint"})],Xp.prototype,"colorMixMode",void 0),Xp=Aw=w([W("esri.symbols.support.Symbol3DFillMaterial")],Xp);function w_(t=SB){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function __(t,e,i,s,a,d,y=w_()){return y[0]=t,y[1]=e,y[2]=i,y[3]=s,y[4]=a,y[5]=d,y}function w0t(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Ae(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function _0t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function x0t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function vB(t){return t[0]>=t[3]?0:t[3]-t[0]}function bB(t){return t[1]>=t[4]?0:t[4]-t[1]}function wB(t){return t[2]>=t[5]?0:t[5]-t[2]}function S0t(t,e=[0,0,0]){return e[0]=vB(t),e[1]=bB(t),e[2]=wB(t),e}function $0t(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function T0t(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function _B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function M0t(t){return t?_B(t,p7):w_(p7)}function E0t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function xB(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=s,t[4]=a,t[5]=Number.POSITIVE_INFINITY,t}function kw(t){return t.length===6}function I0t(t,e,i){if(t==null||e==null)return t===e;if(!kw(t)||!kw(e))return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}const p7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],SB=[0,0,0,0,0,0];w_();const $B=__(-.5,-.5,-.5,.5,.5,.5),TB=__(-.5,-.5,0,.5,.5,1),MB=__(-.5,-.5,0,.5,.5,.5);function A0t(t){switch(t){case"sphere":case"cube":case"diamond":return $B;case"cylinder":case"cone":case"inverted-cone":return TB;case"tetrahedron":return MB;default:return}}const x_=["butt","square","round"],EB=[...x_,"none"],aI=["miter","bevel","round"];var Ow;let nh=Ow=class extends gt{constructor(t){super(t),this.color=new Xt([0,0,0,1]),this.size=Yo(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Ow(t)}};w([T(Cl)],nh.prototype,"color",void 0),w([T(eo)],nh.prototype,"size",void 0),w([T(oI)],nh.prototype,"pattern",void 0),w([T({type:x_,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],nh.prototype,"patternCap",void 0),nh=Ow=w([W("esri.symbols.support.Symbol3DOutline")],nh);var ay;let _o=ay=class extends no{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new ay(t)}static fromSimpleFillSymbol(t){var s,a,d;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new b_({style:t.outline.style}):null,i={size:((s=t.outline)==null?void 0:s.width)??0,color:(((a=t.outline)==null?void 0:a.color)??Zp).clone(),pattern:e};return e&&((d=t.outline)!=null&&d.cap)&&(i.patternCap=t.outline.cap),new ay({material:new Xp({color:(t.color??mB).clone()}),pattern:t.style&&t.style!=="solid"?new nI({style:t.style}):null,outline:i})}};w([Lt({Fill:"fill"},{readOnly:!0})],_o.prototype,"type",void 0),w([T({type:Xp,json:{write:!0}})],_o.prototype,"material",void 0),w([T(yB)],_o.prototype,"pattern",void 0),w([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_o.prototype,"castShadows",void 0),w([T({type:nh,json:{write:!0}})],_o.prototype,"outline",void 0),w([T(QE)],_o.prototype,"edges",void 0),_o=ay=w([W("esri.symbols.FillSymbol3DLayer")],_o);const af=_o,IB=["none","underline","line-through"],AB=["normal","italic","oblique"],kB=["normal","lighter","bold","bolder"],lI={type:Number,cast:t=>{const e=ws(t);return e===0?1:Es(e,.1,4)},nonNullable:!0},OB=["left","right","center"],PB=["baseline","top","middle","bottom"],hI={type:OB,nonNullable:!0},uI={type:PB,nonNullable:!0},k0t=8;var Pw;let xo=Pw=class extends gt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return ze(t)}clone(){return new Pw({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};w([T({type:IB,json:{default:"none",write:!0}})],xo.prototype,"decoration",void 0),w([T({type:String,json:{write:!0}})],xo.prototype,"family",void 0),w([T({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],xo.prototype,"size",void 0),w([Ne("size")],xo.prototype,"castSize",null),w([T({type:AB,json:{default:"normal",write:!0}})],xo.prototype,"style",void 0),w([T({type:kB,json:{default:"normal",write:!0}})],xo.prototype,"weight",void 0),xo=Pw=w([W("esri.symbols.Font")],xo);const Wg=xo;function l0(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=Kr(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=I5(t,e.portalItem.itemUrl);s!=null&&CB.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return Cw(t,e&&e.portal)}function lf(t,e,i=kd.YES){if(t==null)return t;!Qr(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let s=Kr(t);if(e){const a=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(a){const d=Cw(a,e.portal),y=Cw(s,e.portal);s=I5(y,d,d),s!=null&&s!==y&&s!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=pI(s,e==null?void 0:e.portal),Qr(s)&&(s=un(s)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Qr(s)&&!gu(s)&&i===kd.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(s),compress:!1}),s}function S_(t,e,i){return l0(t,i)}function hu(t,e,i,s){const a=lf(t,s);a!==void 0&&(e[i]=a)}const cI=/\/items\/([^\/]+)\/resources\/(.*)/,CB=/^\.\/resources\//;function NB(t){const e=(t==null?void 0:t.match(cI))??null;return(e==null?void 0:e[1])??null}function LB(t){const e=(t==null?void 0:t.match(cI))??null;if(e==null)return null;const i=e[2],s=i.lastIndexOf("/");if(s===-1){const{path:y,extension:m}=h6(i);return{prefix:null,filename:y,extension:m}}const{path:a,extension:d}=h6(i.slice(s+1));return{prefix:i.slice(0,s),filename:a,extension:d}}function pI(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?$b(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function Cw(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,s=$5();return jc(s,`${s.scheme}://${i}`)?$b(t,e.portalHostname,i):$b(t,i,e.portalHostname)}var kd;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(kd||(kd={}));const O0t=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return kd},ensureMainOnlineDomain:pI,fromJSON:l0,itemIdFromResourceUrl:NB,prefixAndFilenameFromResourceUrl:LB,read:S_,toJSON:lf,write:hu},Symbol.toStringTag,{value:"Module"}));var Nw;const RB=dr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let oh=Nw=class extends gt{constructor(t){super(t)}readHref(t,e,i){return t?l0(t,i):e.dataURI}writeHref(t,e,i,s){t&&(gu(t)?e.dataURI=t:(e.href=lf(t,s),Qr(e.href)&&(e.href=un(e.href))))}clone(){return new Nw({href:this.href,primitive:this.primitive})}};w([T({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],oh.prototype,"href",void 0),w([kt("href")],oh.prototype,"readHref",null),w([At("href",{href:{type:String},dataURI:{type:String}})],oh.prototype,"writeHref",null),w([Lt(RB)],oh.prototype,"primitive",void 0),oh=Nw=w([W("esri.symbols.support.IconSymbol3DLayerResource")],oh);const P0t="circle";var Lw;let mc=Lw=class extends Rt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Lw({x:this.x,y:this.y})}};w([T({type:Number})],mc.prototype,"x",void 0),w([T({type:Number})],mc.prototype,"y",void 0),mc=Lw=w([W("esri.symbols.support.Symbol3DAnchorPosition2D")],mc);var Rw;let lp=Rw=class extends gt{constructor(t){super(t),this.color=new Xt([0,0,0,1]),this.size=Yo(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new Rw(t)}};w([T(Cl)],lp.prototype,"color",void 0),w([T(eo)],lp.prototype,"size",void 0),lp=Rw=w([W("esri.symbols.support.Symbol3DIconOutline")],lp);var Wu;const dI="esri.symbols.IconSymbol3DLayer";let Ln=Wu=class extends no{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Wu({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Zp,i=d7(t),s=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Zp).clone()}:null;return new Wu({size:t.size,resource:{primitive:DB(t.style)},material:{color:e},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||gB(t.color)?Zp:t.color,i=d7(t);return new Wu({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Wu({resource:{href:rT({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function d7(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,s=f7(t.xoffset),a=f7(t.yoffset);return(s||a)&&e&&i?{x:-s/e,y:a/i}:null}function f7(t){return isFinite(t)?t:0}w([T({type:Ts,json:{write:!0}})],Ln.prototype,"material",void 0),w([T({type:oh,json:{write:!0}})],Ln.prototype,"resource",void 0),w([Lt({Icon:"icon"},{readOnly:!0})],Ln.prototype,"type",void 0),w([T(eo)],Ln.prototype,"size",void 0),w([Lt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),T({json:{default:"center"}})],Ln.prototype,"anchor",void 0),w([T({type:mc,json:{type:[Number],read:{reader:t=>new mc({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ln.prototype,"anchorPosition",void 0),w([T({type:lp,json:{write:!0}})],Ln.prototype,"outline",void 0),Ln=Wu=w([W(dI)],Ln);const jB={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function DB(t){return jB[t]||(mt.getLogger(dI).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Dh=Ln;let ah=class extends _i(gt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};w([T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ah.prototype,"type",void 0),w([T({type:uB,json:{default:"begin-end",write:!0}})],ah.prototype,"placement",void 0),w([T({type:eI,json:{default:"arrow",write:!0}})],ah.prototype,"style",void 0),w([T({type:Xt,json:{type:[Ee],default:null,write:!0}})],ah.prototype,"color",void 0),ah=w([W("esri.symbols.LineStyleMarker3D")],ah);const jw=ah;var ly;let Rn=ly=class extends no{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Yo(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new ly(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Yo(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new b_({style:t.style}):null,material:new Ts({color:(t.color||Zp).clone()}),marker:t.marker?new jw({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new ly(e)}};w([T({type:Ts,json:{write:!0}})],Rn.prototype,"material",void 0),w([Lt({Line:"line"},{readOnly:!0})],Rn.prototype,"type",void 0),w([T({type:aI,json:{write:!0,default:"miter"}})],Rn.prototype,"join",void 0),w([T({type:x_,json:{write:!0,default:"butt"}})],Rn.prototype,"cap",void 0),w([T(eo)],Rn.prototype,"size",void 0),w([T(oI)],Rn.prototype,"pattern",void 0),w([T({types:{key:"type",base:jw,typeMap:{style:jw}},json:{write:!0}})],Rn.prototype,"marker",void 0),Rn=ly=w([W("esri.symbols.LineSymbol3DLayer")],Rn);const hf=Rn;var Dw;const FB=dr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let hp=Dw=class extends gt{clone(){return new Dw({href:this.href,primitive:this.primitive})}};w([T({type:String,json:{read:S_,write:hu}})],hp.prototype,"href",void 0),w([Lt(FB)],hp.prototype,"primitive",void 0),hp=Dw=w([W("esri.symbols.support.ObjectSymbol3DLayerResource")],hp);const N0t="sphere";var Fw;let kh=Fw=class extends Rt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Fw({x:this.x,y:this.y,z:this.z})}};w([T({type:Number})],kh.prototype,"x",void 0),w([T({type:Number})],kh.prototype,"y",void 0),w([T({type:Number})],kh.prototype,"z",void 0),kh=Fw=w([W("esri.symbols.support.Symbol3DAnchorPosition3D")],kh);var zw;let or=zw=class extends no{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new zw({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};w([T({type:Ts,json:{write:!0}})],or.prototype,"material",void 0),w([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],or.prototype,"castShadows",void 0),w([T({type:hp,json:{write:!0}})],or.prototype,"resource",void 0),w([Lt({Object:"object"},{readOnly:!0})],or.prototype,"type",void 0),w([T({type:Number,json:{write:!0}})],or.prototype,"width",void 0),w([T({type:Number,json:{write:!0}})],or.prototype,"height",void 0),w([T({type:Number,json:{write:!0}})],or.prototype,"depth",void 0),w([Lt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),T({json:{default:"origin"}})],or.prototype,"anchor",void 0),w([T({type:kh,json:{type:[Number],read:{reader:t=>new kh({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],or.prototype,"anchorPosition",void 0),w([T({type:Number,json:{write:!0}})],or.prototype,"heading",void 0),w([T({type:Number,json:{write:!0}})],or.prototype,"tilt",void 0),w([T({type:Number,json:{write:!0}})],or.prototype,"roll",void 0),w([T({readOnly:!0})],or.prototype,"isPrimitive",null),or=zw=w([W("esri.symbols.ObjectSymbol3DLayer")],or);const $_=or;var Vw;let gr=Vw=class extends no{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new Vw({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};w([T({type:Ts,json:{write:!0}})],gr.prototype,"material",void 0),w([T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gr.prototype,"castShadows",void 0),w([Lt({Path:"path"},{readOnly:!0})],gr.prototype,"type",void 0),w([T({type:["circle","quad"],json:{write:!0,default:"circle"}})],gr.prototype,"profile",void 0),w([T({type:aI,json:{write:!0,default:"miter"}})],gr.prototype,"join",void 0),w([T({type:EB,json:{write:!0,default:"butt"}})],gr.prototype,"cap",void 0),w([T({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],gr.prototype,"width",void 0),w([kt("width",["width","size","height"])],gr.prototype,"readWidth",null),w([T({type:Number,json:{write:!0}})],gr.prototype,"height",void 0),w([kt("height",["height","size","width"])],gr.prototype,"readHeight",null),w([T({type:["center","bottom","top"],json:{write:!0,default:"center"}})],gr.prototype,"anchor",void 0),w([T({type:["heading","all"],json:{write:!0,default:"all"}})],gr.prototype,"profileRotation",void 0),gr=Vw=w([W("esri.symbols.PathSymbol3DLayer")],gr);const T_=gr;var Gw;let gc=Gw=class extends gt{constructor(){super(...arguments),this.color=new Xt([0,0,0,1]),this.size=0}clone(){const t={color:ot(this.color),size:this.size};return new Gw(t)}};w([T(Cl)],gc.prototype,"color",void 0),w([T(eo)],gc.prototype,"size",void 0),gc=Gw=w([W("esri.symbols.support.Symbol3DHalo")],gc);let Qp=class extends _i(gt){constructor(e){super(e),this.color=null}};w([T(Cl)],Qp.prototype,"color",void 0),Qp=w([W("esri.symbols.support.Symbol3DTextBackground")],Qp);var hy;let Er=hy=class extends no{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,s){const a={...s,textSymbol3D:!0};e.font=t.write({},a),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new hy({enabled:this.enabled,font:this.font&&ot(this.font),halo:this.halo&&ot(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ot(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new hy({font:t.font!=null?t.font.clone():new Wg,halo:zB(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Ts({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Qp({color:t.backgroundColor.clone()}):null})}};function zB(t,e){return t&&e!=null&&e>0?new gc({color:ot(t),size:e}):null}w([T({type:Wg,json:{write:!0}})],Er.prototype,"font",null),w([At("font")],Er.prototype,"writeFont",null),w([T({type:gc,json:{write:!0}})],Er.prototype,"halo",void 0),w([T({...hI,json:{default:"center",write:!0}})],Er.prototype,"horizontalAlignment",void 0),w([T({...lI,json:{default:1,write:!0}})],Er.prototype,"lineHeight",void 0),w([T({type:Ts,json:{write:!0}})],Er.prototype,"material",void 0),w([T({type:Qp,json:{write:!0}})],Er.prototype,"background",void 0),w([T(eo)],Er.prototype,"size",null),w([T({type:String,json:{write:!0}})],Er.prototype,"text",void 0),w([Lt({Text:"text"},{readOnly:!0})],Er.prototype,"type",void 0),w([T({...uI,json:{default:"baseline",write:!0}})],Er.prototype,"verticalAlignment",void 0),Er=hy=w([W("esri.symbols.TextSymbol3DLayer")],Er);const h0=Er;var Uw;let Aa=Uw=class extends no{constructor(t){super(t),this.color=qw.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Uw({color:ot(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};w([T({type:Xt,nonNullable:!0,json:{type:[Ee],write:(t,e,i)=>e[i]=t.toArray(Xt.AlphaMode.UNLESS_OPAQUE),default:()=>qw.clone(),defaultEquals:t=>t.toCss(!0)===qw.toCss(!0)}})],Aa.prototype,"color",void 0),w([Lt({Water:"water"},{readOnly:!0})],Aa.prototype,"type",void 0),w([T({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Aa.prototype,"waterbodySize",void 0),w([T({type:Number,json:{write:!0,default:null}})],Aa.prototype,"waveDirection",void 0),w([T({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Aa.prototype,"waveStrength",void 0),Aa=Uw=w([W("esri.symbols.WaterSymbol3DLayer")],Aa);const qw=new Xt([0,119,190]),fI=Aa;var Bw;let lh=Bw=class extends Rt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Bw({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};w([T({type:String})],lh.prototype,"name",void 0),w([T({type:String})],lh.prototype,"styleUrl",void 0),w([T({type:String})],lh.prototype,"styleName",void 0),w([T({type:Lr})],lh.prototype,"portal",void 0),lh=Bw=w([W("esri.symbols.support.StyleOrigin")],lh);const Hw=lh;var Ww;let td=Ww=class extends Rt{constructor(){super(...arguments),this.url=""}clone(){return new Ww({url:this.url})}};w([T({type:String})],td.prototype,"url",void 0),td=Ww=w([W("esri.symbols.support.Thumbnail")],td);const yI={icon:Dh,object:$_,line:hf,path:T_,fill:af,extrude:tI,text:h0,water:fI},VB=Vt.ofType({base:no,key:"type",typeMap:yI,errorContext:"symbol-layer"});let jn=class extends Rr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,s=i&&i.type||Vt;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&mt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Qh(e,this._get("symbolLayers"))}readStyleOrigin(e,i,s){if(e.styleUrl&&e.name){const a=l0(e.styleUrl,s);return new Hw({styleUrl:a,name:e.name})}if(e.styleName&&e.name)return new Hw({portal:s&&s.portal||Lr.getDefault(),styleName:e.styleName,name:e.name});s&&s.messages&&s.messages.push(new gn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:e}))}writeStyleOrigin(e,i,s,a){if(e.styleUrl&&e.name){let d=lf(e.styleUrl,a);Qr(d)&&(d=un(d)),i.styleOrigin={styleUrl:d,name:e.name}}else e.styleName&&e.name&&(e.portal&&a&&a.portal&&!eT(e.portal.restUrl,a.portal.restUrl)?a&&a.messages&&a.messages.push(new gn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof no||e&&yI[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};w([T({json:{read:!1,write:!1}})],jn.prototype,"color",null),w([T({type:VB,nonNullable:!0,json:{write:!0}}),Ne(q$)],jn.prototype,"symbolLayers",null),w([T({type:Hw})],jn.prototype,"styleOrigin",void 0),w([kt("styleOrigin")],jn.prototype,"readStyleOrigin",null),w([At("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],jn.prototype,"writeStyleOrigin",null),w([T({type:td,json:{read:!1}})],jn.prototype,"thumbnail",void 0),w([T({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],jn.prototype,"type",void 0),jn=w([W("esri.symbols.Symbol3D")],jn);const u0=jn;let up=class extends gt{constructor(e){super(e),this.visible=!0}clone(){}};w([T({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],up.prototype,"type",void 0),w([T({readOnly:!0})],up.prototype,"visible",void 0),up=w([W("esri.symbols.callouts.Callout3D")],up);const mI=up;var Jw;let uy=Jw=class extends gt{constructor(){super(...arguments),this.color=new Xt("white")}clone(){return new Jw({color:ot(this.color)})}};w([T(Cl)],uy.prototype,"color",void 0),uy=Jw=w([W("esri.symbols.callouts.LineCallout3DBorder")],uy);const gI=uy;Object.freeze(Object.defineProperty({__proto__:null,default:gI},Symbol.toStringTag,{value:"Module"}));var Kw;let ka=Kw=class extends mI{constructor(t){super(t),this.type="line",this.color=new Xt([0,0,0,1]),this.size=Yo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Kw({color:ot(this.color),size:this.size,border:ot(this.border)})}};w([Lt({line:"line"},{readOnly:!0})],ka.prototype,"type",void 0),w([T(Cl)],ka.prototype,"color",void 0),w([T(eo)],ka.prototype,"size",void 0),w([T({type:gI,json:{write:!0}})],ka.prototype,"border",void 0),w([T({readOnly:!0})],ka.prototype,"visible",null),ka=Kw=w([W("esri.symbols.callouts.LineCallout3D")],ka);const GB=ka;function M_(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function vI(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!M_(t)}const bI={types:{key:"type",base:mI,typeMap:{line:GB}},json:{write:!0}};var Yw;let Ju=Yw=class extends gt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Yw({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};w([T(eo)],Ju.prototype,"screenLength",void 0),w([T({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Ju.prototype,"minWorldLength",void 0),w([T({type:Number,json:{write:!0}})],Ju.prototype,"maxWorldLength",void 0),Ju=Yw=w([W("esri.symbols.support.Symbol3DVerticalOffset")],Ju);const wI=Ju;var cy;const _I=Vt.ofType({base:null,key:"type",typeMap:{text:h0}});let Oa=cy=class extends u0{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new _I,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return vI(this)}hasVisibleVerticalOffset(){return M_(this)}clone(){return new cy({styleOrigin:ot(this.styleOrigin),symbolLayers:ot(this.symbolLayers),thumbnail:ot(this.thumbnail),callout:ot(this.callout),verticalOffset:ot(this.verticalOffset)})}static fromTextSymbol(t){return new cy({symbolLayers:[h0.fromTextSymbol(t)]})}};w([T({type:wI,json:{write:!0}})],Oa.prototype,"verticalOffset",void 0),w([T(bI)],Oa.prototype,"callout",void 0),w([T({json:{read:!1,write:!1}})],Oa.prototype,"styleOrigin",void 0),w([T({type:_I})],Oa.prototype,"symbolLayers",void 0),w([Lt({LabelSymbol3D:"label-3d"},{readOnly:!0})],Oa.prototype,"type",void 0),Oa=cy=w([W("esri.symbols.LabelSymbol3D")],Oa);const Jg=Oa;var py;const xI=Vt.ofType({base:null,key:"type",typeMap:{line:hf,path:T_}}),UB=Vt.ofType({base:null,key:"type",typeMap:{line:hf,path:T_}});let cp=py=class extends u0{constructor(t){super(t),this.symbolLayers=new xI,this.type="line-3d"}clone(){return new py({styleOrigin:ot(this.styleOrigin),symbolLayers:ot(this.symbolLayers),thumbnail:ot(this.thumbnail)})}static fromSimpleLineSymbol(t){return new py({symbolLayers:[hf.fromSimpleLineSymbol(t)]})}};w([T({type:xI,json:{type:UB}})],cp.prototype,"symbolLayers",void 0),w([Lt({LineSymbol3D:"line-3d"},{readOnly:!0})],cp.prototype,"type",void 0),cp=py=w([W("esri.symbols.LineSymbol3D")],cp);const Kg=cp;let Pa=class extends Rr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};w([T({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Pa.prototype,"angle",void 0),w([T({type:["simple-marker","picture-marker"],readOnly:!0})],Pa.prototype,"type",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],Pa.prototype,"xoffset",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],Pa.prototype,"yoffset",void 0),w([T({type:Number,cast:t=>t==="auto"?t:ze(t),json:{write:!0}})],Pa.prototype,"size",void 0),Pa=w([W("esri.symbols.MarkerSymbol")],Pa);const SI=Pa;var dy;const $I=Vt.ofType({base:null,key:"type",typeMap:{fill:af}});let pp=dy=class extends u0{constructor(t){super(t),this.symbolLayers=new $I,this.type="mesh-3d"}clone(){return new dy({styleOrigin:ot(this.styleOrigin),symbolLayers:ot(this.symbolLayers),thumbnail:ot(this.thumbnail)})}static fromSimpleFillSymbol(t){return new dy({symbolLayers:[af.fromSimpleFillSymbol(t)]})}};w([T({type:$I})],pp.prototype,"symbolLayers",void 0),w([Lt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],pp.prototype,"type",void 0),pp=dy=w([W("esri.symbols.MeshSymbol3D")],pp);const Yg=pp;function qB(t,e,i){return e.imageData?rT({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):TI(e.url,i)}function TI(t,e){var i;return HB(e)&&!Qr(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?tu(e.layer.parsedUrl.path,"images",t):l0(t,e)}function BB(t,e,i,s){if(gu(t)){const a=xd(t);if(!a)return;e.contentType=a.mediaType,e.imageData=a.data,i&&i.imageData===e.imageData&&i.url&&hu(i.url,e,"url",s)}else hu(t,e,"url",s)}const MI={json:{read:{source:["imageData","url"],reader:qB},write:{writer(t,e,i,s){BB(t,e,this.source,s)}}}},EI={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const s={};return e.imageData&&(s.imageData=e.imageData),e.contentType&&(s.contentType=e.contentType),e.url&&(s.url=TI(e.url,i)),s}}}};function HB(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var Zw;let ds=Zw=class extends iI{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string"&&t.imageData==null)return t;const a={};return t&&(a.url=t),e&&(a.outline=e),i!=null&&(a.width=ze(i)),s!=null&&(a.height=ze(s)),a}clone(){const t=new Zw({color:ot(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",ot(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};w([Lt({esriPFS:"picture-fill"},{readOnly:!0})],ds.prototype,"type",void 0),w([T(MI)],ds.prototype,"url",void 0),w([T({type:Number,json:{write:!0}})],ds.prototype,"xscale",void 0),w([T({type:Number,json:{write:!0}})],ds.prototype,"yscale",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],ds.prototype,"width",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],ds.prototype,"height",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],ds.prototype,"xoffset",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],ds.prototype,"yoffset",void 0),w([T(EI)],ds.prototype,"source",void 0),ds=Zw=w([W("esri.symbols.PictureFillSymbol")],ds);const II=ds;var Xw;let qs=Xw=class extends SI{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e!=null&&(s.width=ze(e)),i!=null&&(s.height=ze(i)),s}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new Xw({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",ot(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};w([T({json:{write:!1}})],qs.prototype,"color",void 0),w([Lt({esriPMS:"picture-marker"},{readOnly:!0})],qs.prototype,"type",void 0),w([T(MI)],qs.prototype,"url",void 0),w([T(EI)],qs.prototype,"source",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],qs.prototype,"height",void 0),w([kt("height",["height","size"])],qs.prototype,"readHeight",null),w([T({type:Number,cast:ze,json:{write:!0}})],qs.prototype,"width",void 0),w([T({json:{write:!1}})],qs.prototype,"size",void 0),qs=Xw=w([W("esri.symbols.PictureMarkerSymbol")],qs);const Zg=qs;var hh;const AI=Vt.ofType({base:null,key:"type",typeMap:{icon:Dh,object:$_,text:h0}});let uh=hh=class extends u0{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new AI,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return vI(this)}hasVisibleVerticalOffset(){return M_(this)}clone(){return new hh({verticalOffset:ot(this.verticalOffset),callout:ot(this.callout),styleOrigin:ot(this.styleOrigin),symbolLayers:ot(this.symbolLayers),thumbnail:ot(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new hh({symbolLayers:[Dh.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new hh({symbolLayers:[Dh.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var s,a;if(((a=(s=t.data)==null?void 0:s.symbol)==null?void 0:a.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new hh(i!=null&&i.callout?{symbolLayers:[Dh.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Dh.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new hh({symbolLayers:[h0.fromTextSymbol(t)]})}};w([T({type:wI,json:{write:!0}})],uh.prototype,"verticalOffset",void 0),w([T(bI)],uh.prototype,"callout",void 0),w([T({type:AI,json:{origins:{"web-scene":{write:!0}}}})],uh.prototype,"symbolLayers",void 0),w([Lt({PointSymbol3D:"point-3d"},{readOnly:!0})],uh.prototype,"type",void 0),uh=hh=w([W("esri.symbols.PointSymbol3D")],uh);const Fh=uh;var dp;const kI=Vt.ofType({base:null,key:"type",typeMap:{extrude:tI,fill:af,icon:Dh,line:hf,object:$_,text:h0,water:fI}});let fp=dp=class extends u0{constructor(t){super(t),this.symbolLayers=new kI,this.type="polygon-3d"}clone(){return new dp({styleOrigin:ot(this.styleOrigin),symbolLayers:ot(this.symbolLayers),thumbnail:ot(this.thumbnail)})}static fromJSON(t){const e=new dp;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new dp({symbolLayers:[af.fromSimpleFillSymbol(t)]})}};w([T({type:kI,json:{write:!0}})],fp.prototype,"symbolLayers",void 0),w([Lt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],fp.prototype,"type",void 0),fp=dp=w([W("esri.symbols.PolygonSymbol3D")],fp);const uf=fp;var Qw;const t2=new Ie({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let ch=Qw=class extends iI{constructor(...t){super(...t),this.color=new Xt([0,0,0,.25]),this.outline=new As,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e&&(s.outline=e),i&&(s.color=i),s}clone(){return new Qw({color:ot(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};w([T()],ch.prototype,"color",void 0),w([T()],ch.prototype,"outline",void 0),w([Lt({esriSFS:"simple-fill"},{readOnly:!0})],ch.prototype,"type",void 0),w([T({type:t2.apiValues,json:{read:t2.read,write:t2.write}})],ch.prototype,"style",void 0),ch=Qw=w([W("esri.symbols.SimpleFillSymbol")],ch);const bu=ch;var t3;const e2=new Ie({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Dn=t3=class extends SI{constructor(...t){super(...t),this.color=new Xt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new As}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string")return t;const a={};return t&&(a.style=t),e!=null&&(a.size=ze(e)),i&&(a.outline=i),s&&(a.color=s),a}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new t3({angle:this.angle,color:ot(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};w([T()],Dn.prototype,"color",void 0),w([At("color")],Dn.prototype,"writeColor",null),w([Lt({esriSMS:"simple-marker"},{readOnly:!0})],Dn.prototype,"type",void 0),w([T()],Dn.prototype,"size",void 0),w([T({type:e2.apiValues,json:{read:e2.read,write:e2.write}})],Dn.prototype,"style",void 0),w([T({type:String,json:{write:!0}})],Dn.prototype,"path",null),w([T({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":As}},json:{default:null,write:!0}})],Dn.prototype,"outline",void 0),Dn=t3=w([W("esri.symbols.SimpleMarkerSymbol")],Dn);const Nl=Dn;var e3;let Ze=e3=class extends Rr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Wg,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.text=t),e&&(s.font=e),i&&(s.color=i),s}writeLineWidth(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}castLineWidth(t){return ze(t)}writeLineHeight(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}clone(){return new e3({angle:this.angle,backgroundColor:ot(this.backgroundColor),borderLineColor:ot(this.borderLineColor),borderLineSize:this.borderLineSize,color:ot(this.color),font:this.font&&this.font.clone(),haloColor:ot(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};w([T({type:Xt,json:{write:!0}})],Ze.prototype,"backgroundColor",void 0),w([T({type:Xt,json:{write:!0}})],Ze.prototype,"borderLineColor",void 0),w([T({type:Number,json:{write:!0},cast:ze})],Ze.prototype,"borderLineSize",void 0),w([T({type:Wg,json:{write:!0}})],Ze.prototype,"font",void 0),w([T({...hI,json:{write:!0}})],Ze.prototype,"horizontalAlignment",void 0),w([T({type:Boolean,json:{write:!0}})],Ze.prototype,"kerning",void 0),w([T({type:Xt,json:{write:!0}})],Ze.prototype,"haloColor",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],Ze.prototype,"haloSize",void 0),w([T({type:Boolean,json:{write:!0}})],Ze.prototype,"rightToLeft",void 0),w([T({type:Boolean,json:{write:!0}})],Ze.prototype,"rotated",void 0),w([T({type:String,json:{write:!0}})],Ze.prototype,"text",void 0),w([Lt({esriTS:"text"},{readOnly:!0})],Ze.prototype,"type",void 0),w([T({...uI,json:{write:!0}})],Ze.prototype,"verticalAlignment",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],Ze.prototype,"xoffset",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],Ze.prototype,"yoffset",void 0),w([T({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ze.prototype,"angle",void 0),w([T({type:Number,json:{write:!0}})],Ze.prototype,"width",void 0),w([T({type:Number})],Ze.prototype,"lineWidth",void 0),w([At("lineWidth")],Ze.prototype,"writeLineWidth",null),w([Ne("lineWidth")],Ze.prototype,"castLineWidth",null),w([T(lI)],Ze.prototype,"lineHeight",void 0),w([At("lineHeight")],Ze.prototype,"writeLineHeight",null),Ze=e3=w([W("esri.symbols.TextSymbol")],Ze);const c0=Ze;var i3;let Bs=i3=class extends Rr{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Lr.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new i3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,s=i?this._fetchCacheKey:null;if(i!=null){const m=s&&i.get(s);if(m)return m.clone()}const{resolveWebStyleSymbol:a}=await bt(()=>import("./webStyleSymbolUtils-7ce2d52a.js"),["assets/webStyleSymbolUtils-7ce2d52a.js","assets/devEnvironmentUtils-5002a058.js"]);Ke(e);const d=a(this,{portal:this.portal},t,e);d.catch(m=>{mt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",m)});const y=await d;return t==="webRef"&&y.type==="point-3d"||t==="cimRef"&&y.type==="cim"?(i!=null&&i.set(s,y.clone()),y):null}};w([T({json:{write:!1}})],Bs.prototype,"color",void 0),w([T({type:String,json:{write:!0}})],Bs.prototype,"styleName",void 0),w([T({type:Lr,json:{write:!1}})],Bs.prototype,"portal",void 0),w([T({type:String,json:{read:S_,write:hu}})],Bs.prototype,"styleUrl",void 0),w([T({type:td,json:{read:!1}})],Bs.prototype,"thumbnail",void 0),w([T({type:String,json:{write:!0}})],Bs.prototype,"name",void 0),w([Lt({styleSymbolReference:"web-style"},{readOnly:!0})],Bs.prototype,"type",void 0),w([T()],Bs.prototype,"_fetchCacheKey",null),Bs=i3=w([W("esri.symbols.WebStyleSymbol")],Bs);const wu=Bs;function F0t(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function r3(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ec={base:Rr,key:"type",typeMap:{"simple-fill":bu,"picture-fill":II,"picture-marker":Zg,"simple-line":As,"simple-marker":Nl,text:c0,"label-3d":Jg,"line-3d":Kg,"mesh-3d":Yg,"point-3d":Fh,"polygon-3d":uf,"web-style":wu,cim:of},errorContext:"symbol"},z0t={base:Rr,key:"type",typeMap:{"picture-marker":Zg,"simple-marker":Nl,text:c0,"web-style":wu,cim:of},errorContext:"symbol"},WB=Yd({types:Ec}),JB={base:Rr,key:"type",typeMap:{"simple-fill":bu,"picture-fill":II,"picture-marker":Zg,"simple-line":As,"simple-marker":Nl,text:c0,"line-3d":Kg,"mesh-3d":Yg,"point-3d":Fh,"polygon-3d":uf,"web-style":wu,cim:of},errorContext:"symbol"},KB={base:Rr,key:"type",typeMap:{text:c0,"label-3d":Jg},errorContext:"symbol"},y7={base:Rr,key:"type",typeMap:{"line-3d":Kg,"mesh-3d":Yg,"point-3d":Fh,"polygon-3d":uf,"web-style":wu,cim:of},errorContext:"symbol"},YB={base:Rr,key:"type",typeMap:{"label-3d":Jg},errorContext:"symbol"},OI=Ho(Ec);var s3;function ZB(t){if(!t)return null;const e={};for(const i in t){const s=xl(t[i]);s&&(e[i]=s)}return Object.keys(e).length!==0?e:null}function XB(t){if(t==null)return null;const e={};for(const i in t){const s=t[i];s&&(e[i]=s.toJSON())}return Object.keys(e).length!==0?e:null}let Ir=s3=class extends _i(gt){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Up(),configurable:!0})}normalizeCtorArgs(t,e,i,s){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:s}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new s3({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:XB(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const a={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(a.action=s),t==="attributes"&&(a.attributeName=s),this.layer.graphicChanged(a)}};w([T({value:null,json:{read:ZB}})],Ir.prototype,"aggregateGeometries",null),w([T({value:null})],Ir.prototype,"attributes",null),w([T({value:null,types:e0,json:{read:xl}})],Ir.prototype,"geometry",null),w([T({type:Boolean})],Ir.prototype,"isAggregate",void 0),w([T({clonable:"reference"})],Ir.prototype,"layer",void 0),w([T({type:g_})],Ir.prototype,"popupTemplate",void 0),w([T({clonable:"reference"})],Ir.prototype,"sourceLayer",void 0),w([T({value:null,types:Ec})],Ir.prototype,"symbol",null),w([T({type:Boolean,value:!0})],Ir.prototype,"visible",null),Ir=s3=w([W("esri.Graphic")],Ir),function(t){t.generateUID=Up}(Ir||(Ir={}));const io=Ir;let E_=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,s,a=0,d=!1){return(s-=a)<e?s+=this.ndiff(e-s):s>i&&(s-=this.ndiff(s-i)),d&&s===i&&(s=e),s+a}normalize(e,i=0,s=!1){return this._normalize(this.min,this.max,e,i,s)}clamp(e,i=0){return Es(e-i,this.min,this.max)+i}monotonic(e,i,s){return e<i?i:i+this.ndiff(e-i,s)}minimalMonotonic(e,i,s){return this._normalize(e,e+this.range,i,s)}center(e,i,s){return i=this.monotonic(e,i,s),this.normalize((e+i)/2,s)}diff(e,i,s){return this.monotonic(e,i,s)-e}shortestSignedDiff(e,i){e=this.normalize(e);const s=(i=this.normalize(i))-e,a=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(s)<Math.abs(a)?s:a}contains(e,i,s){return i=this.minimalMonotonic(e,i),(s=this.minimalMonotonic(e,s))>e&&s<i}};function I_(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}I_(new E_(0,2*Math.PI));I_(new E_(-Math.PI,Math.PI));const QB=I_(new E_(0,360));let So=class extends _i(gt){constructor(...e){super(...e),this.position=new Yt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,s,a){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const d={position:e};return i!=null&&(d.heading=i),s!=null&&(d.tilt=s),a!=null&&(d.fov=a),d}return e}writePosition(e,i,s,a){const d=e.clone();d.x=ws(e.x||0),d.y=ws(e.y||0),d.z=e.hasZ?ws(e.z||0):e.z,i[s]=d.write({},a)}readPosition(e,i){const s=new Yt;return s.read(e,i),s.x=ws(s.x||0),s.y=ws(s.y||0),s.z=s.hasZ?ws(s.z||0):s.z,s}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};w([T({type:Yt,json:{write:{isRequired:!0}}})],So.prototype,"position",void 0),w([At("position")],So.prototype,"writePosition",null),w([kt("position")],So.prototype,"readPosition",null),w([T({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ne(t=>QB.normalize(ws(t)))],So.prototype,"heading",void 0),w([T({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ne(t=>Es(ws(t),-180,180))],So.prototype,"tilt",void 0),w([T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],So.prototype,"fov",void 0),So=w([W("esri.Camera")],So);const tH=So;var n3;let Ca=n3=class extends gt{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new n3({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function i2(){return{enabled:!this.camera}}w([T({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:i2}}}}})],Ca.prototype,"rotation",void 0),w([Ne("rotation")],Ca.prototype,"castRotation",null),w([T({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:i2}}}}})],Ca.prototype,"scale",void 0),w([T({types:e0,json:{read:xl,write:!0,origins:{"web-scene":{read:xl,write:{overridePolicy:i2}}}}})],Ca.prototype,"targetGeometry",void 0),w([T({type:tH,json:{write:!0}})],Ca.prototype,"camera",void 0),Ca=n3=w([W("esri.Viewpoint")],Ca);const Yn=Ca;function It(t,e,i={}){return A_(t,e,i,PI)}function Sl(t,e,i={}){return A_(t,e,i,CI)}function A_(t,e,i={},s){let a=null;const d=i.once?(y,m)=>{s(y)&&(si(a),e(y,m))}:(y,m)=>{s(y)&&e(y,m)};if(a=ZL(t,d,i.sync,i.equals),i.initial){const y=t();d(y,y)}return a}function qc(t,e,i,s={}){let a=null,d=null,y=null;function m(){var I;a&&d&&(d.remove(),(I=s.onListenerRemove)==null||I.call(s,a),a=null,d=null)}function _(I){s.once&&s.once&&si(y),i(I)}const S=It(t,(I,A)=>{var P;m(),Tg(I)&&(a=I,d=Mg(I,e,_),(P=s.onListenerAdd)==null||P.call(s,I))},{sync:s.sync,initial:!0});return y=Xn(()=>{S.remove(),m()}),y}function k_(t,e){return eH(t,CI,e)}function eH(t,e,i){if(Ms(i))return Promise.reject(ei());const s=t();if(e!=null&&e(s))return Promise.resolve(s);let a=null;function d(){a=si(a)}return new Promise((y,m)=>{a=bg([Xr(i,()=>{d(),m(ei())}),A_(t,_=>{d(),y(_)},{sync:!1,once:!0},e??PI)])})}function PI(t){return!0}function CI(t){return!!t}const p0={sync:!0},xe={initial:!0},No={sync:!0,initial:!0};let Nm=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new Pg,this._items=new Set}get length(){return Wt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Wt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(s=>{e(s)||this._items.delete(s)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Wt(this._observable),yield*this._items}};const iH={statsWorker:()=>bt(()=>import("./statsWorker-83c300f5.js"),["assets/statsWorker-83c300f5.js","assets/quantizationUtils-fe80be7e.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js"]),geometryEngineWorker:()=>bt(()=>import("./geometryEngineWorker-f0e810e0.js"),["assets/geometryEngineWorker-f0e810e0.js","assets/geometryEngineJSON-035b791c.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>bt(()=>import("./CSVSourceWorker-c1d041f3.js"),["assets/CSVSourceWorker-c1d041f3.js","assets/json-48e3ea08.js","assets/FeatureStore-70522102.js","assets/BoundsStore-ac0cb838.js","assets/PooledRBush-3958a124.js","assets/projectionSupport-1a5588c8.js","assets/timeSupport-b1ef57b1.js","assets/QueryEngine-3dc2f630.js","assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-fe80be7e.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js","assets/number-ff121b75.js","assets/clientSideDefaults-e624a586.js"]),EdgeProcessingWorker:()=>bt(()=>import("./EdgeProcessingWorker-c0fbb961.js"),["assets/EdgeProcessingWorker-c0fbb961.js","assets/InterleavedLayout-53f454e4.js","assets/BufferView-879c742a.js","assets/types-1305598a.js","assets/edgeProcessing-b693cd26.js","assets/deduplicate-fa48e2b9.js","assets/Indices-75fde46c.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>bt(()=>import("./ElevationSamplerWorker-bf600edc.js"),["assets/ElevationSamplerWorker-bf600edc.js","assets/PooledRBush-3958a124.js","assets/georeference-6aa50844.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-7e7f13df.js","assets/MeshLocalVertexSpace-09e21c5a.js","assets/MeshGeoreferencedRelativeVertexSpace-79492feb.js","assets/quat-85c3d5c4.js","assets/quatf64-3363c48e.js","assets/vec32-83008d00.js","assets/BufferView-879c742a.js"]),FeatureServiceSnappingSourceWorker:()=>bt(()=>import("./FeatureServiceSnappingSourceWorker-b1619ede.js"),["assets/FeatureServiceSnappingSourceWorker-b1619ede.js","assets/FeatureStore-70522102.js","assets/BoundsStore-ac0cb838.js","assets/PooledRBush-3958a124.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/timeSupport-b1ef57b1.js","assets/QueryEngine-3dc2f630.js","assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-fe80be7e.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js","assets/byteSizeEstimations-7cf1c05d.js"]),GeoJSONSourceWorker:()=>bt(()=>import("./GeoJSONSourceWorker-158d89a5.js"),["assets/GeoJSONSourceWorker-158d89a5.js","assets/FeatureStore-70522102.js","assets/BoundsStore-ac0cb838.js","assets/PooledRBush-3958a124.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/timeSupport-b1ef57b1.js","assets/QueryEngine-3dc2f630.js","assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-fe80be7e.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js","assets/geojson-34636dff.js","assets/clientSideDefaults-e624a586.js","assets/sourceUtils-99f9c5f8.js"]),LercWorker:()=>bt(()=>import("./LercWorker-18447fc7.js"),[]),MemorySourceWorker:()=>bt(()=>import("./MemorySourceWorker-d4eaa386.js"),["assets/MemorySourceWorker-d4eaa386.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-70522102.js","assets/BoundsStore-ac0cb838.js","assets/PooledRBush-3958a124.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/timeSupport-b1ef57b1.js","assets/QueryEngine-3dc2f630.js","assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-fe80be7e.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js","assets/clientSideDefaults-e624a586.js","assets/sourceUtils-99f9c5f8.js"]),PBFDecoderWorker:()=>bt(()=>import("./PBFDecoderWorker-545dd173.js"),[]),Pipeline:()=>bt(()=>import("./Pipeline-c50a62ae.js"),["assets/Pipeline-c50a62ae.js","assets/QueryEngine-3dc2f630.js","assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-fe80be7e.js","assets/timeSupport-b1ef57b1.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js","assets/FeatureStore2D-9c3fb881.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/definitions-4e50b8bb.js","assets/visualVariablesUtils-44c6f339.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-dca24de4.js","assets/geojson-34636dff.js","assets/clientSideDefaults-e624a586.js","assets/createConnection-38681f53.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>bt(()=>import("./PointCloudWorker-2dab5b37.js"),["assets/PointCloudWorker-2dab5b37.js","assets/quat-85c3d5c4.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-ca159bf5.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-acd79e5d.js"]),RasterWorker:()=>bt(()=>import("./RasterWorker-b850c7b2.js"),["assets/RasterWorker-b850c7b2.js","assets/dataUtils-9de72ee9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-9b49fcdb.js","assets/colorUtils-c0f43caf.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-0495fb92.js","assets/rasterProjectionHelper-42435e0a.js"]),SceneLayerSnappingSourceWorker:()=>bt(()=>import("./SceneLayerSnappingSourceWorker-0c8d464e.js"),["assets/SceneLayerSnappingSourceWorker-0c8d464e.js","assets/lineSegment-aacbf5ca.js","assets/sphere-20a0c9fc.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-e3508ab5.js","assets/InterleavedLayout-53f454e4.js","assets/BufferView-879c742a.js","assets/types-1305598a.js","assets/edgeProcessing-b693cd26.js","assets/deduplicate-fa48e2b9.js","assets/Indices-75fde46c.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>bt(()=>import("./SceneLayerWorker-8dfb6bf6.js"),["assets/SceneLayerWorker-8dfb6bf6.js","assets/MeshLocalVertexSpace-09e21c5a.js","assets/MeshGeoreferencedRelativeVertexSpace-79492feb.js","assets/vec32-83008d00.js","assets/sphere-20a0c9fc.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>bt(()=>import("./WFSSourceWorker-189ac387.js"),["assets/WFSSourceWorker-189ac387.js","assets/FeatureStore-70522102.js","assets/BoundsStore-ac0cb838.js","assets/PooledRBush-3958a124.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/timeSupport-b1ef57b1.js","assets/QueryEngine-3dc2f630.js","assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-fe80be7e.js","assets/utils-d9881e77.js","assets/generateRendererUtils-4a540302.js","assets/geojson-34636dff.js","assets/sourceUtils-99f9c5f8.js","assets/wfsUtils-fd794bd8.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>bt(()=>import("./WorkerTileHandler-02fa1216.js"),["assets/WorkerTileHandler-02fa1216.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-3d6b2927.js","assets/definitions-4e50b8bb.js","assets/StyleRepository-d975bfda.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-c0f43caf.js","assets/earcut-c3520e2b.js","assets/BidiEngine-9a40f2f4.js"])};var Hi;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Hi||(Hi={}));let rH=0;function NI(){return rH++}function sH(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function Od(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function O_(t,e,i,s){if(e.type===Hi.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Hi.INVOKE&&e.type!==Hi.RESPONSE)return void t.postMessage(e);let a;if(sH(i)?(a=m7(i.transferList),e.data=i.result):(a=m7(s),e.data=i),a){if(at("ff")){for(const d of a)if("byteLength"in d&&d.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Hi.INVOKE:throw y;case Hi.RESPONSE:return void O_(t,{type:Hi.RESPONSE,jobId:e.jobId,error:Od(y)})}}}t.postMessage(e,a)}else t.postMessage(e)}function Pd(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function m7(t){if(!t||!t.length)return null;if(at("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!nH(i));return e.length?e:null}function nH(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:g7,ABORT:v7,INVOKE:b7,RESPONSE:O0,OPEN_PORT:w7,ON:oH}=Hi,aH=2;let lH=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Hi.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},$l=class Ku{static connect(e){const i=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const a=new Ku(i.port1,{channel:i,client:s},()=>null);return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=a),Ku.clients.set(a,s),i.port2}static loadWorker(e){const i=iH[e];return i?i():Promise.resolve(null)}constructor(e,i,s){this._port=e,this._getNextJob=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new lH(a=>this._onInvokeMessage(a)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:g7}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,s){const a=s==null?void 0:s.signal,d=s==null?void 0:s.transferList;if(!this._port)return Promise.reject(new lt("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const y=NI();return new Promise((m,_)=>{if(Ms(a))return this._processWork(),void _(ei());const S=Xr(a,()=>{const A=this._outJobs.get(y);A&&(this._outJobs.delete(y),this._processWork(),si(A.abortHandle),this._post({type:v7,jobId:y}),_(ei()))}),I={resolve:m,reject:_,abortHandle:S,debugInfo:e};this._outJobs.set(y,I),this._post({type:b7,jobId:y,methodName:e,abortable:a!=null},i,d)})}on(e,i){const s=new MessageChannel;function a(d){i(d.data)}return this._port.postMessage({type:Hi.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",a),s.port1.start(),{remove(){s.port1.postMessage({type:Hi.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",a)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:w7,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=aH)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:s,invokeOptions:a,resolver:d}=e;this.invoke(i,s,a).then(y=>d.resolve(y)).catch(y=>d.reject(y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{si(e.abortHandle),e.reject(ei(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=Pd(e);if(i)switch(i.type){case O0:this._onResponseMessage(i);break;case b7:this._invokeQueue.push(i);break;case v7:this._onAbortMessage(i);break;case g7:this._onCloseMessage();break;case w7:this._onOpenPortMessage(i);break;case oH:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,a=i.get(s);this._invokeQueue.push(e),a&&(a.controller&&a.controller.abort(),i.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Ku.clients.get(this)===e&&e.destroy(),Ku.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:s,data:a,abortable:d}=e,y=d?new AbortController:null,m=this._inJobs;let _,S=this._client,I=S[i];try{if(!I&&i&&i.includes(".")){const A=i.split(".");for(let P=0;P<A.length-1;P++)S=S[A[P]],I=S[A[P+1]]}if(typeof I!="function")throw new TypeError(`${i} is not a function`);_=I.call(S,a,{client:this,signal:y?y.signal:null})}catch(A){return void this._post({type:O0,jobId:s,error:Od(A)})}ta(_)?(m.set(s,{controller:y,promise:_}),_.then(A=>{m.has(s)&&(m.delete(s),this._post({type:O0,jobId:s},A))},A=>{m.has(s)&&(m.delete(s),Qi(A)||this._post({type:O0,jobId:s,error:Od(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:O0,jobId:s},_)}_onOpenPortMessage(e){new Ku(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,s=this._client.on(e.eventType,d=>{i.postMessage(d)}),a=Mg(e.port,"message",d=>{const y=Pd(d);(y==null?void 0:y.type)===Hi.CLOSE&&(a.remove(),s.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:s,data:a}=e,d=this._outJobs;if(!d.has(i))return;const y=d.get(i);d.delete(i),this._processWork(),si(y.abortHandle),s?y.reject(lt.fromJSON(JSON.parse(s))):y.resolve(a)}_post(e,i,s){return O_(this._port,e,i,s)}};$l.kernelInfo={buildDate:wT,fullVersion:j5,revision:_T},$l.clients=new Map;let hH=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Nm}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((s,a)=>{let d=!0;const y=m=>{Ke(i.signal),d&&(d=!1,m())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let m=0;m<e.length;++m){const _=e[m];ta(_)?this._clientPromises[m]=_.then(S=>(this._clients[m]=new $l(S,i,()=>this._ongoingJobsQueue.pop()??null),y(s),this._clients[m]),()=>(y(a),null)):(this._clients[m]=new $l(_,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[m]=Promise.resolve(this._clients[m]),y(s))}})}broadcast(e,i,s){const a=new Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d){const y=this._clientPromises[d];a[d]=y.then(m=>m==null?void 0:m.invoke(e,i,s))}return a}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(ei(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(s=>s==null?void 0:s.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,s){let a;Array.isArray(s)?(mt.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),a={transferList:s}):a=s;const d=mn();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:a,resolver:d});for(let y=0;y<this._clientPromises.length;y++){const m=this._clients[y];m?m.jobAdded():this._clientPromises[y].then(_=>_==null?void 0:_.jobAdded())}return d.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>bg(this._clients.map(s=>s.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let a=0;a<this._clientPromises.length;++a)this._clientPromises[a].then(d=>{d&&(i[a]=d.openPort()),--s==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const LI=mt.getLogger("esri.intl.substitute");function H0t(t,e,i={}){const{format:s={}}=i;return $g(t,a=>uH(a,e,s))}function uH(t,e,i){let s,a;const d=t.indexOf(":");if(d===-1?s=t.trim():(s=t.slice(0,d).trim(),a=t.slice(d+1).trim()),!s)return"";const y=Jd(s,e);if(y==null)return"";const m=(a?i==null?void 0:i[a]:null)??(i==null?void 0:i[s]);return m?cH(y,m):a?pH(y,a):P_(y)}function cH(t,e){switch(e.type){case"date":return lu(t,e.intlOptions);case"number":return Id(t,e.intlOptions);default:return LI.warn("missing format descriptor for key {key}"),P_(t)}}function pH(t,e){switch(e.toLowerCase()){case"dateformat":return lu(t);case"numberformat":return Id(t);default:return LI.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?lu(t):/^numberformat/i.test(e)?Id(t):P_(t)}}function P_(t){switch(typeof t){case"string":return t;case"number":return Id(t);case"boolean":return""+t;default:return t instanceof Date?lu(t):""}}async function dH(t,e,i,s){const a=e.exec(i);if(!a)throw new lt("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const d=a[1]?`${a[1]}/`:"",y=a[2],m=aF(s),_=`${d}${y}.json`,S=m?`${d}${y}_${m}.json`:_;let I;try{I=await _7(t(S))}catch(A){if(S===_)throw new lt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{I=await _7(t(_))}catch(P){throw new lt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P})}}return I}async function _7(t){if(x7.fetchBundleAsset!=null)return x7.fetchBundleAsset(t);const e=await ye(t,{responseType:"text"});return JSON.parse(e.data)}let fH=class{constructor({base:e="",pattern:i,location:s=new URL(window.location.href)}){let a;a=typeof s=="string"?d=>new URL(d,new URL(s,window.location.href)).href:s instanceof URL?d=>new URL(d,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=a,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return dH(this.getAssetUrl,this.matcher,e,i)}};function yH(t){return new fH(t)}const x7={};oF(yH({pattern:"esri/",location:Me}));const mH={};function gH(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=mH.baseUrl),e}let vH=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>e[i](...s)})}},fy=class{constructor(){this._dispatcher=new vH,this._workerPostMessage({type:Hi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Qy(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,s){this._dispatcher.addEventListener(e,i,s)}removeEventListener(e,i,s){this._dispatcher.removeEventListener(e,i,s)}_workerPostMessage(e){Qy(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=Pd(e);if(i&&i.type===Hi.OPEN){const{modulePath:s,jobId:a}=i;let d=await $l.loadWorker(s);d||(d=await bt(()=>import(s),[]));const y=$l.connect(d);this._workerPostMessage({type:Hi.OPENED,jobId:a,data:y})}}};const o3=mt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:bH}=Hi,wH='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Zf,Xf;const S7="Failed to create Worker. Fallback to execute module in main thread";async function _H(){if(!at("esri-workers")||(at("mozilla"),0))return $7(new fy);if(!Zf&&!Xf)try{const e=wH.split('"{CONFIGURATION}"').join(`'${xH()}'`);Zf=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){Xf=e||{}}let t;if(Zf)try{t=new Worker(Zf,{name:"esri-worker-"+SH++})}catch{o3.warn(S7,Xf),t=new fy}else o3.warn(S7,Xf),t=new fy;return $7(t)}async function $7(t){return new Promise(e=>{function i(a){const d=Pd(a);d&&d.type===bH&&(t.removeEventListener("message",i),t.removeEventListener("error",s),e(t))}function s(a){a.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",s),o3.warn("Failed to create Worker. Fallback to execute module in main thread",a),(t=new fy).addEventListener("message",i),t.addEventListener("error",s)}t.addEventListener("message",i),t.addEventListener("error",s)})}function xH(){let t;if(_e.default!=null){const a={..._e};delete a.default,t=JSON.parse(JSON.stringify(a))}else t=JSON.parse(JSON.stringify(_e));t.assetsPath=Kr(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Kr(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=dn(),t.has={"esri-csp-restrictions":at("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":at("esri-2d-update-debug"),"esri-2d-log-updating":at("esri-2d-log-updating"),"featurelayer-pbf":at("featurelayer-pbf"),"featurelayer-simplify-thresholds":at("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":at("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":at("featurelayer-simplify-mobile-factor"),"esri-atomics":at("esri-atomics"),"esri-shared-array-buffer":at("esri-shared-array-buffer"),"esri-tiles-debug":at("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":at("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":at("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":at("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=Kr(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Kr(t.workers.workerPath):t.workers.workerPath=Kr(Me("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=_e.workers.loaderConfig,i=gH({baseUrl:e==null?void 0:e.baseUrl,locale:dn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:wT,fullVersion:j5,revision:_T}})}let SH=0;const{ABORT:T7,INVOKE:$H,OPEN:TH,OPENED:MH,RESPONSE:P0}=Hi;let EH=class RI{static async create(e){const i=await _H();return new RI(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",s=>{s.preventDefault(),mt.getLogger("esri.core.workers.WorkerOwner").error(s)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:s}=i,a=NI();return new Promise((d,y)=>{const m={resolve:d,reject:y,abortHandle:f5(s,()=>{this._outJobs.delete(a),this._post({type:T7,jobId:a})})};this._outJobs.set(a,m),this._post({type:TH,jobId:a,modulePath:e})})}_onMessage(e){const i=Pd(e);if(i)switch(i.type){case MH:this._onOpenedMessage(i);break;case P0:this._onResponseMessage(i);break;case T7:this._onAbortMessage(i);break;case $H:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,a=i.get(s);a&&(a.controller&&a.controller.abort(),i.delete(s))}_onInvokeMessage(e){const{methodName:i,jobId:s,data:a,abortable:d}=e,y=d?new AbortController:null,m=this._inJobs,_=nD[i];let S;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);S=_.call(null,a,{signal:y?y.signal:null})}catch(I){return void this._post({type:P0,jobId:s,error:Od(I)})}ta(S)?(m.set(s,{controller:y,promise:S}),S.then(I=>{m.has(s)&&(m.delete(s),this._post({type:P0,jobId:s},I))},I=>{m.has(s)&&(m.delete(s),I||(I={message:"Error encountered at method"+i}),Qi(I)||this._post({type:P0,jobId:s,error:Od(I||{message:`Error encountered at method ${i}`})}))})):this._post({type:P0,jobId:s},S)}_onOpenedMessage(e){const{jobId:i,data:s}=e,a=this._outJobs.get(i);a&&(this._outJobs.delete(i),si(a.abortHandle),a.resolve(s))}_onResponseMessage(e){const{jobId:i,error:s,data:a}=e,d=this._outJobs.get(i);d&&(this._outJobs.delete(i),si(d.abortHandle),s?d.reject(lt.fromJSON(JSON.parse(s))):d.resolve(a))}_post(e,i,s){return O_(this.worker,e,i,s)}};const M7=at("host-browser")?Math.min(navigator.hardwareConcurrency-1,at("workers-pool-size")):0;let zh=at("esri-mobile")?Math.min(M7,3):M7;zh||(zh=at("safari")&&at("mac")?7:2);let E7=0;const yy=[];function IH(){jI()}async function Qf(t,e){const i=new hH;return await i.open(t,e),i}async function Y0t(t,e={}){if(typeof t!="string")throw new lt("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(at("host-webworker")&&!at("esri-workers")&&(i="local"),i==="local"){let s=await $l.loadWorker(t);s||(s=await bt(()=>import(t),[])),Ke(e.signal);const a=e.client||s;return Qf([$l.connect(s)],{...e,client:a})}if(await jI(),Ke(e.signal),i==="dedicated"){const s=E7++%zh;return Qf([await yy[s].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const s=Math.min(e.maxNumWorkers,zh);if(s<zh){const a=new Array(s);for(let d=0;d<s;++d){const y=E7++%zh;a[d]=yy[y].open(t,e)}return Qf(a,e)}}return Qf(yy.map(s=>s.open(t,e)),e)}let t1=null;async function jI(){if(t1)return t1;new AbortController;const t=[];for(let e=0;e<zh;e++){const i=EH.create(e).then(s=>(yy[e]=s,s));t.push(i)}return t1=Promise.all(t),t1}function AH(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ll(t,e,i,s,a,d,y,m,_,S,I,A,P,L,j,F,V){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=d,t[5]=y,t[6]=m,t[7]=_,t[8]=S,t[9]=I,t[10]=A,t[11]=P,t[12]=L,t[13]=j,t[14]=F,t[15]=V,t}function cf(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ia(t,e){if(t===e){const i=e[1],s=e[2],a=e[3],d=e[6],y=e[7],m=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=d,t[11]=e[14],t[12]=a,t[13]=y,t[14]=m}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function kH(t,e){return DI(t,e)||cf(t),t}function DI(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],S=e[7],I=e[8],A=e[9],P=e[10],L=e[11],j=e[12],F=e[13],V=e[14],J=e[15],Q=i*m-s*y,Z=i*_-a*y,et=i*S-d*y,st=s*_-a*m,nt=s*S-d*m,pt=a*S-d*_,yt=I*F-A*j,$t=I*V-P*j,Ot=I*J-L*j,Ct=A*V-P*F,Nt=A*J-L*F,Ht=P*J-L*V;let Pt=Q*Ht-Z*Nt+et*Ct+st*Ot-nt*$t+pt*yt;return Pt?(Pt=1/Pt,t[0]=(m*Ht-_*Nt+S*Ct)*Pt,t[1]=(a*Nt-s*Ht-d*Ct)*Pt,t[2]=(F*pt-V*nt+J*st)*Pt,t[3]=(P*nt-A*pt-L*st)*Pt,t[4]=(_*Ot-y*Ht-S*$t)*Pt,t[5]=(i*Ht-a*Ot+d*$t)*Pt,t[6]=(V*et-j*pt-J*Z)*Pt,t[7]=(I*pt-P*et+L*Z)*Pt,t[8]=(y*Nt-m*Ot+S*yt)*Pt,t[9]=(s*Ot-i*Nt-d*yt)*Pt,t[10]=(j*nt-F*et+J*Q)*Pt,t[11]=(A*et-I*nt-L*Q)*Pt,t[12]=(m*$t-y*Ct-_*yt)*Pt,t[13]=(i*Ct-s*$t+a*yt)*Pt,t[14]=(F*Z-j*st-V*Q)*Pt,t[15]=(I*st-A*Z+P*Q)*Pt,t):null}function OH(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],S=e[7],I=e[8],A=e[9],P=e[10],L=e[11],j=e[12],F=e[13],V=e[14],J=e[15];return t[0]=m*(P*J-L*V)-A*(_*J-S*V)+F*(_*L-S*P),t[1]=-(s*(P*J-L*V)-A*(a*J-d*V)+F*(a*L-d*P)),t[2]=s*(_*J-S*V)-m*(a*J-d*V)+F*(a*S-d*_),t[3]=-(s*(_*L-S*P)-m*(a*L-d*P)+A*(a*S-d*_)),t[4]=-(y*(P*J-L*V)-I*(_*J-S*V)+j*(_*L-S*P)),t[5]=i*(P*J-L*V)-I*(a*J-d*V)+j*(a*L-d*P),t[6]=-(i*(_*J-S*V)-y*(a*J-d*V)+j*(a*S-d*_)),t[7]=i*(_*L-S*P)-y*(a*L-d*P)+I*(a*S-d*_),t[8]=y*(A*J-L*F)-I*(m*J-S*F)+j*(m*L-S*A),t[9]=-(i*(A*J-L*F)-I*(s*J-d*F)+j*(s*L-d*A)),t[10]=i*(m*J-S*F)-y*(s*J-d*F)+j*(s*S-d*m),t[11]=-(i*(m*L-S*A)-y*(s*L-d*A)+I*(s*S-d*m)),t[12]=-(y*(A*V-P*F)-I*(m*V-_*F)+j*(m*P-_*A)),t[13]=i*(A*V-P*F)-I*(s*V-a*F)+j*(s*P-a*A),t[14]=-(i*(m*V-_*F)-y*(s*V-a*F)+j*(s*_-a*m)),t[15]=i*(m*P-_*A)-y*(s*P-a*A)+I*(s*_-a*m),t}function PH(t){const e=t[0],i=t[1],s=t[2],a=t[3],d=t[4],y=t[5],m=t[6],_=t[7],S=t[8],I=t[9],A=t[10],P=t[11],L=t[12],j=t[13],F=t[14],V=t[15];return(e*y-i*d)*(A*V-P*F)-(e*m-s*d)*(I*V-P*j)+(e*_-a*d)*(I*F-A*j)+(i*m-s*y)*(S*V-P*L)-(i*_-a*y)*(S*F-A*L)+(s*_-a*m)*(S*j-I*L)}function FI(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=e[6],I=e[7],A=e[8],P=e[9],L=e[10],j=e[11],F=e[12],V=e[13],J=e[14],Q=e[15];let Z=i[0],et=i[1],st=i[2],nt=i[3];return t[0]=Z*s+et*m+st*A+nt*F,t[1]=Z*a+et*_+st*P+nt*V,t[2]=Z*d+et*S+st*L+nt*J,t[3]=Z*y+et*I+st*j+nt*Q,Z=i[4],et=i[5],st=i[6],nt=i[7],t[4]=Z*s+et*m+st*A+nt*F,t[5]=Z*a+et*_+st*P+nt*V,t[6]=Z*d+et*S+st*L+nt*J,t[7]=Z*y+et*I+st*j+nt*Q,Z=i[8],et=i[9],st=i[10],nt=i[11],t[8]=Z*s+et*m+st*A+nt*F,t[9]=Z*a+et*_+st*P+nt*V,t[10]=Z*d+et*S+st*L+nt*J,t[11]=Z*y+et*I+st*j+nt*Q,Z=i[12],et=i[13],st=i[14],nt=i[15],t[12]=Z*s+et*m+st*A+nt*F,t[13]=Z*a+et*_+st*P+nt*V,t[14]=Z*d+et*S+st*L+nt*J,t[15]=Z*y+et*I+st*j+nt*Q,t}function CH(t,e,i){const s=i[0],a=i[1],d=i[2];if(e===t)t[12]=e[0]*s+e[4]*a+e[8]*d+e[12],t[13]=e[1]*s+e[5]*a+e[9]*d+e[13],t[14]=e[2]*s+e[6]*a+e[10]*d+e[14],t[15]=e[3]*s+e[7]*a+e[11]*d+e[15];else{const y=e[0],m=e[1],_=e[2],S=e[3],I=e[4],A=e[5],P=e[6],L=e[7],j=e[8],F=e[9],V=e[10],J=e[11];t[0]=y,t[1]=m,t[2]=_,t[3]=S,t[4]=I,t[5]=A,t[6]=P,t[7]=L,t[8]=j,t[9]=F,t[10]=V,t[11]=J,t[12]=y*s+I*a+j*d+e[12],t[13]=m*s+A*a+F*d+e[13],t[14]=_*s+P*a+V*d+e[14],t[15]=S*s+L*a+J*d+e[15]}return t}function NH(t,e,i){const s=i[0],a=i[1],d=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*d,t[9]=e[9]*d,t[10]=e[10]*d,t[11]=e[11]*d,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function LH(t,e,i,s){let a,d,y,m,_,S,I,A,P,L,j,F,V,J,Q,Z,et,st,nt,pt,yt,$t,Ot,Ct,Nt=s[0],Ht=s[1],Pt=s[2],Ve=Math.sqrt(Nt*Nt+Ht*Ht+Pt*Pt);return Ve<Is()?null:(Ve=1/Ve,Nt*=Ve,Ht*=Ve,Pt*=Ve,a=Math.sin(i),d=Math.cos(i),y=1-d,m=e[0],_=e[1],S=e[2],I=e[3],A=e[4],P=e[5],L=e[6],j=e[7],F=e[8],V=e[9],J=e[10],Q=e[11],Z=Nt*Nt*y+d,et=Ht*Nt*y+Pt*a,st=Pt*Nt*y-Ht*a,nt=Nt*Ht*y-Pt*a,pt=Ht*Ht*y+d,yt=Pt*Ht*y+Nt*a,$t=Nt*Pt*y+Ht*a,Ot=Ht*Pt*y-Nt*a,Ct=Pt*Pt*y+d,t[0]=m*Z+A*et+F*st,t[1]=_*Z+P*et+V*st,t[2]=S*Z+L*et+J*st,t[3]=I*Z+j*et+Q*st,t[4]=m*nt+A*pt+F*yt,t[5]=_*nt+P*pt+V*yt,t[6]=S*nt+L*pt+J*yt,t[7]=I*nt+j*pt+Q*yt,t[8]=m*$t+A*Ot+F*Ct,t[9]=_*$t+P*Ot+V*Ct,t[10]=S*$t+L*Ot+J*Ct,t[11]=I*$t+j*Ot+Q*Ct,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function RH(t,e,i){const s=Math.sin(i),a=Math.cos(i),d=e[4],y=e[5],m=e[6],_=e[7],S=e[8],I=e[9],A=e[10],P=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=d*a+S*s,t[5]=y*a+I*s,t[6]=m*a+A*s,t[7]=_*a+P*s,t[8]=S*a-d*s,t[9]=I*a-y*s,t[10]=A*a-m*s,t[11]=P*a-_*s,t}function jH(t,e,i){const s=Math.sin(i),a=Math.cos(i),d=e[0],y=e[1],m=e[2],_=e[3],S=e[8],I=e[9],A=e[10],P=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=d*a-S*s,t[1]=y*a-I*s,t[2]=m*a-A*s,t[3]=_*a-P*s,t[8]=d*s+S*a,t[9]=y*s+I*a,t[10]=m*s+A*a,t[11]=_*s+P*a,t}function DH(t,e,i){const s=Math.sin(i),a=Math.cos(i),d=e[0],y=e[1],m=e[2],_=e[3],S=e[4],I=e[5],A=e[6],P=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=d*a+S*s,t[1]=y*a+I*s,t[2]=m*a+A*s,t[3]=_*a+P*s,t[4]=S*a-d*s,t[5]=I*a-y*s,t[6]=A*a-m*s,t[7]=P*a-_*s,t}function zI(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function FH(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zH(t,e,i){if(e===0)return cf(t);let s,a,d,y=i[0],m=i[1],_=i[2],S=Math.sqrt(y*y+m*m+_*_);return S<Is()?null:(S=1/S,y*=S,m*=S,_*=S,s=Math.sin(e),a=Math.cos(e),d=1-a,t[0]=y*y*d+a,t[1]=m*y*d+_*s,t[2]=_*y*d-m*s,t[3]=0,t[4]=y*m*d-_*s,t[5]=m*m*d+a,t[6]=_*m*d+y*s,t[7]=0,t[8]=y*_*d+m*s,t[9]=m*_*d-y*s,t[10]=_*_*d+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function VH(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function GH(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function UH(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function VI(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=s+s,_=a+a,S=d+d,I=s*m,A=s*_,P=s*S,L=a*_,j=a*S,F=d*S,V=y*m,J=y*_,Q=y*S;return t[0]=1-(L+F),t[1]=A+Q,t[2]=P-J,t[3]=0,t[4]=A-Q,t[5]=1-(I+F),t[6]=j+V,t[7]=0,t[8]=P+J,t[9]=j-V,t[10]=1-(I+L),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function qH(t,e){const i=BH,s=-e[0],a=-e[1],d=-e[2],y=e[3],m=e[4],_=e[5],S=e[6],I=e[7],A=s*s+a*a+d*d+y*y;return A>0?(i[0]=2*(m*y+I*s+_*d-S*a)/A,i[1]=2*(_*y+I*a+S*s-m*d)/A,i[2]=2*(S*y+I*d+m*a-_*s)/A):(i[0]=2*(m*y+I*s+_*d-S*a),i[1]=2*(_*y+I*a+S*s-m*d),i[2]=2*(S*y+I*d+m*a-_*s)),VI(t,e,i),t}const BH=xn();function HH(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function WH(t,e){const i=e[0],s=e[1],a=e[2],d=e[4],y=e[5],m=e[6],_=e[8],S=e[9],I=e[10];return t[0]=Math.sqrt(i*i+s*s+a*a),t[1]=Math.sqrt(d*d+y*y+m*m),t[2]=Math.sqrt(_*_+S*S+I*I),t}function JH(t,e){const i=e[0]+e[5]+e[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t}function KH(t,e,i,s){const a=e[0],d=e[1],y=e[2],m=e[3],_=a+a,S=d+d,I=y+y,A=a*_,P=a*S,L=a*I,j=d*S,F=d*I,V=y*I,J=m*_,Q=m*S,Z=m*I,et=s[0],st=s[1],nt=s[2];return t[0]=(1-(j+V))*et,t[1]=(P+Z)*et,t[2]=(L-Q)*et,t[3]=0,t[4]=(P-Z)*st,t[5]=(1-(A+V))*st,t[6]=(F+J)*st,t[7]=0,t[8]=(L+Q)*nt,t[9]=(F-J)*nt,t[10]=(1-(A+j))*nt,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function YH(t,e,i,s,a){const d=e[0],y=e[1],m=e[2],_=e[3],S=d+d,I=y+y,A=m+m,P=d*S,L=d*I,j=d*A,F=y*I,V=y*A,J=m*A,Q=_*S,Z=_*I,et=_*A,st=s[0],nt=s[1],pt=s[2],yt=a[0],$t=a[1],Ot=a[2],Ct=(1-(F+J))*st,Nt=(L+et)*st,Ht=(j-Z)*st,Pt=(L-et)*nt,Ve=(1-(P+J))*nt,pi=(V+Q)*nt,Ge=(j+Z)*pt,le=(V-Q)*pt,fr=(1-(P+F))*pt;return t[0]=Ct,t[1]=Nt,t[2]=Ht,t[3]=0,t[4]=Pt,t[5]=Ve,t[6]=pi,t[7]=0,t[8]=Ge,t[9]=le,t[10]=fr,t[11]=0,t[12]=i[0]+yt-(Ct*yt+Pt*$t+Ge*Ot),t[13]=i[1]+$t-(Nt*yt+Ve*$t+le*Ot),t[14]=i[2]+Ot-(Ht*yt+pi*$t+fr*Ot),t[15]=1,t}function ZH(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=i+i,m=s+s,_=a+a,S=i*y,I=s*y,A=s*m,P=a*y,L=a*m,j=a*_,F=d*y,V=d*m,J=d*_;return t[0]=1-A-j,t[1]=I+J,t[2]=P-V,t[3]=0,t[4]=I-J,t[5]=1-S-j,t[6]=L+F,t[7]=0,t[8]=P+V,t[9]=L-F,t[10]=1-S-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XH(t,e,i,s,a,d,y){const m=1/(i-e),_=1/(a-s),S=1/(d-y);return t[0]=2*d*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*d*_,t[6]=0,t[7]=0,t[8]=(i+e)*m,t[9]=(a+s)*_,t[10]=(y+d)*S,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*d*2*S,t[15]=0,t}function QH(t,e,i,s,a){const d=1/Math.tan(e/2);let y;return t[0]=d/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(y=1/(s-a),t[10]=(a+s)*y,t[14]=2*a*s*y):(t[10]=-1,t[14]=-2*s),t}function tW(t,e,i,s){const a=Math.tan(e.upDegrees*Math.PI/180),d=Math.tan(e.downDegrees*Math.PI/180),y=Math.tan(e.leftDegrees*Math.PI/180),m=Math.tan(e.rightDegrees*Math.PI/180),_=2/(y+m),S=2/(a+d);return t[0]=_,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=S,t[6]=0,t[7]=0,t[8]=-(y-m)*_*.5,t[9]=(a-d)*S*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t}function eW(t,e,i,s,a,d,y){const m=1/(e-i),_=1/(s-a),S=1/(d-y);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*_,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*S,t[11]=0,t[12]=(e+i)*m,t[13]=(a+s)*_,t[14]=(y+d)*S,t[15]=1,t}function iW(t,e,i,s){const a=e[0],d=e[1],y=e[2];let m=a-i[0],_=d-i[1],S=y-i[2];const I=Is();if(Math.abs(m)<I&&Math.abs(_)<I&&Math.abs(S)<I)return void cf(t);let A=1/Math.sqrt(m*m+_*_+S*S);m*=A,_*=A,S*=A;const P=s[0],L=s[1],j=s[2];let F=L*S-j*_,V=j*m-P*S,J=P*_-L*m;A=Math.sqrt(F*F+V*V+J*J),A?(A=1/A,F*=A,V*=A,J*=A):(F=0,V=0,J=0);let Q=_*J-S*V,Z=S*F-m*J,et=m*V-_*F;A=Math.sqrt(Q*Q+Z*Z+et*et),A?(A=1/A,Q*=A,Z*=A,et*=A):(Q=0,Z=0,et=0),t[0]=F,t[1]=Q,t[2]=m,t[3]=0,t[4]=V,t[5]=Z,t[6]=_,t[7]=0,t[8]=J,t[9]=et,t[10]=S,t[11]=0,t[12]=-(F*a+V*d+J*y),t[13]=-(Q*a+Z*d+et*y),t[14]=-(m*a+_*d+S*y),t[15]=1}function rW(t,e,i,s){const a=e[0],d=e[1],y=e[2],m=s[0],_=s[1],S=s[2];let I=a-i[0],A=d-i[1],P=y-i[2],L=I*I+A*A+P*P;L>0&&(L=1/Math.sqrt(L),I*=L,A*=L,P*=L);let j=_*P-S*A,F=S*I-m*P,V=m*A-_*I;return L=j*j+F*F+V*V,L>0&&(L=1/Math.sqrt(L),j*=L,F*=L,V*=L),t[0]=j,t[1]=F,t[2]=V,t[3]=0,t[4]=A*V-P*F,t[5]=P*j-I*V,t[6]=I*F-A*j,t[7]=0,t[8]=I,t[9]=A,t[10]=P,t[11]=0,t[12]=a,t[13]=d,t[14]=y,t[15]=1,t}function sW(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function nW(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function oW(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function GI(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function aW(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function lW(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t}function hW(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function uW(t,e){if(t===e)return!0;const i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],S=t[7],I=t[8],A=t[9],P=t[10],L=t[11],j=t[12],F=t[13],V=t[14],J=t[15],Q=e[0],Z=e[1],et=e[2],st=e[3],nt=e[4],pt=e[5],yt=e[6],$t=e[7],Ot=e[8],Ct=e[9],Nt=e[10],Ht=e[11],Pt=e[12],Ve=e[13],pi=e[14],Ge=e[15],le=Is();return Math.abs(i-Q)<=le*Math.max(1,Math.abs(i),Math.abs(Q))&&Math.abs(s-Z)<=le*Math.max(1,Math.abs(s),Math.abs(Z))&&Math.abs(a-et)<=le*Math.max(1,Math.abs(a),Math.abs(et))&&Math.abs(d-st)<=le*Math.max(1,Math.abs(d),Math.abs(st))&&Math.abs(y-nt)<=le*Math.max(1,Math.abs(y),Math.abs(nt))&&Math.abs(m-pt)<=le*Math.max(1,Math.abs(m),Math.abs(pt))&&Math.abs(_-yt)<=le*Math.max(1,Math.abs(_),Math.abs(yt))&&Math.abs(S-$t)<=le*Math.max(1,Math.abs(S),Math.abs($t))&&Math.abs(I-Ot)<=le*Math.max(1,Math.abs(I),Math.abs(Ot))&&Math.abs(A-Ct)<=le*Math.max(1,Math.abs(A),Math.abs(Ct))&&Math.abs(P-Nt)<=le*Math.max(1,Math.abs(P),Math.abs(Nt))&&Math.abs(L-Ht)<=le*Math.max(1,Math.abs(L),Math.abs(Ht))&&Math.abs(j-Pt)<=le*Math.max(1,Math.abs(j),Math.abs(Pt))&&Math.abs(F-Ve)<=le*Math.max(1,Math.abs(F),Math.abs(Ve))&&Math.abs(V-pi)<=le*Math.max(1,Math.abs(V),Math.abs(pi))&&Math.abs(J-Ge)<=le*Math.max(1,Math.abs(J),Math.abs(Ge))}function cW(t){const e=Is(),i=t[0],s=t[1],a=t[2],d=t[4],y=t[5],m=t[6],_=t[8],S=t[9],I=t[10];return Math.abs(1-(i*i+d*d+_*_))<=e&&Math.abs(1-(s*s+y*y+S*S))<=e&&Math.abs(1-(a*a+m*m+I*I))<=e}function pW(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const dW=FI,fW=GI;Object.freeze(Object.defineProperty({__proto__:null,add:oW,adjoint:OH,copy:AH,determinant:PH,equals:uW,exactEquals:hW,frob:nW,fromQuat:ZH,fromQuat2:qH,fromRotation:zH,fromRotationTranslation:VI,fromRotationTranslationScale:KH,fromRotationTranslationScaleOrigin:YH,fromScaling:FH,fromTranslation:zI,fromXRotation:VH,fromYRotation:GH,fromZRotation:UH,frustum:XH,getRotation:JH,getScaling:WH,getTranslation:HH,hasIdentityRotation:pW,identity:cf,invert:DI,invertOrIdentity:kH,isOrthoNormal:cW,lookAt:iW,mul:dW,multiply:FI,multiplyScalar:aW,multiplyScalarAndAdd:lW,ortho:eW,perspective:QH,perspectiveFromFieldOfView:tW,rotate:LH,rotateX:RH,rotateY:jH,rotateZ:DH,scale:NH,set:Ll,str:sW,sub:fW,subtract:GI,targetTo:rW,translate:CH,transpose:ia},Symbol.toStringTag,{value:"Module"}));let r2,it=null;function C_(){return!!it}function yW(){return!!at("esri-wasm")}function UI(){return r2||(r2=bt(()=>import("./pe-wasm-04f9b380.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Me(`esri/geometry/support/${e}`)})).then(t=>{BI(t)}),r2)}var a3,Qe,l3;(function(t){function e(d,y,m){it.ensureCache.prepare();const _=Oh(m),S=m===_,I=it.ensureFloat64(_),A=it._pe_geog_to_proj(it.getPointer(d),y,I);return A&&nl(m,y,I,S),A}function i(d,y,m,_){switch(_){case Qe.PE_TRANSFORM_P_TO_G:return s(d,y,m);case Qe.PE_TRANSFORM_G_TO_P:return e(d,y,m)}return 0}function s(d,y,m){return a(d,y,m,0)}function a(d,y,m,_){it.ensureCache.prepare();const S=Oh(m),I=m===S,A=it.ensureFloat64(S),P=it._pe_proj_to_geog_center(it.getPointer(d),y,A,_);return P&&nl(m,y,A,I),P}t.geogToProj=e,t.projGeog=i,t.projToGeog=s,t.projToGeogCenter=a})(a3||(a3={})),function(t){function e(){t.PE_BUFFER_MAX=it.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=it.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=it.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=it.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=it.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=it.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=it.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=it.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=it.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=it.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=it.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=it.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=it.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=it.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=it.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=it.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=it.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=it.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=it.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=it.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=it.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=it.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=it.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=it.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=it.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=it.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=it.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=it.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=it.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=it.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(Qe||(Qe={})),function(t){const e={},i={},s=L=>{if(L){const j=L.getType();switch(j){case Qe.PE_TYPE_GEOGCS:L=it.castObject(L,it.PeGeogcs);break;case Qe.PE_TYPE_PROJCS:L=it.castObject(L,it.PeProjcs);break;case Qe.PE_TYPE_GEOGTRAN:L=it.castObject(L,it.PeGeogtran);break;default:j&Qe.PE_TYPE_UNIT&&(L=it.castObject(L,it.PeUnit))}}return L};function a(){it.PeFactory.prototype.initialize(null)}function d(L){return y(Qe.PE_TYPE_COORDSYS,L)}function y(L,j){let F=null,V=e[L];if(V||(V={},e[L]=V),V.hasOwnProperty(String(j)))F=V[j];else{const J=it.PeFactory.prototype.factoryByType(L,j);it.compare(J,it.NULL)||(F=J,V[j]=F)}return F=s(F),F}function m(L,j){let F=null,V=i[L];if(V||(V={},i[L]=V),V.hasOwnProperty(j))F=V[j];else{const J=it.PeFactory.prototype.fromString(L,j);it.compare(J,it.NULL)||(F=J,V[j]=F)}return F=s(F),F}function _(L){return y(Qe.PE_TYPE_GEOGCS,L)}function S(L){return y(Qe.PE_TYPE_GEOGTRAN,L)}function I(L){return it.PeFactory.prototype.getCode(L)}function A(L){return y(Qe.PE_TYPE_PROJCS,L)}function P(L){return y(Qe.PE_TYPE_UNIT,L)}t.initialize=a,t.coordsys=d,t.factoryByType=y,t.fromString=m,t.geogcs=_,t.geogtran=S,t.getCode=I,t.projcs=A,t.unit=P}(l3||(l3={}));let qI=null;var Lm,h3,u3,c3,Rm,p3,jm,Dm,d3;function BI(t){function e(d,y,m){d[y]=m(d[y])}it=t,Qe.init(),Lm.init(),Rm.init(),jm.init(),Dm.init(),qI=class extends it.PeGCSExtent{destroy(){it.destroy(this)}};const i=[it.PeDatum,it.PeGeogcs,it.PeGeogtran,it.PeObject,it.PeParameter,it.PePrimem,it.PeProjcs,it.PeSpheroid,it.PeUnit];for(const d of i)e(d.prototype,"getName",y=>function(){return y.call(this,new Array(Qe.PE_NAME_MAX))});for(const d of[it.PeGeogtran,it.PeProjcs])e(d.prototype,"getParameters",y=>function(){const m=new Array(Qe.PE_PARM_MAX);let _=y.call(this);for(let S=0;S<m.length;S++){const I=it.getValue(_,"*");m[S]=I?it.wrapPointer(I,it.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return m});e(it.PeHorizon.prototype,"getCoord",d=>function(){const y=this.getSize();if(!y)return null;const m=[];return nl(m,y,d.call(this)),m}),e(it.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const y=it._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;const _=d.call(this);if(!it.compare(_,it.NULL)){m=[_];const S=this.getSteps();if(S>1){const I=it.getPointer(_);for(let A=1;A<S;A++)m.push(it.wrapPointer(I+y*A,it.PeGTlistExtendedGTs))}}return m}});const s=it._pe_getPeHorizonSize(),a=d=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(d))return y.get(d);let m=null;const _=d.call(this);if(!it.compare(_,it.NULL)){m=[_];const S=_.getNump();if(S>1){const I=it.getPointer(_);for(let A=1;A<S;A++)m.push(it.wrapPointer(I+s*A,it.PeHorizon))}}return y.set(d,m),m};e(it.PeProjcs.prototype,"horizonGcsGenerate",a),e(it.PeProjcs.prototype,"horizonPcsGenerate",a),it.PeObject.prototype.toString=function(d=Qe.PE_STR_OPTS_NONE){it.ensureCache.prepare();const y=it.getPointer(this),m=it.ensureInt8(new Array(Qe.PE_BUFFER_MAX));return it.UTF8ToString(it._pe_object_to_string_ext(y,d,m))}}function lo(t){if(!t)return;const e=it.getClass(t);if(!e)return;const i=it.getCache(e);if(!i)return;const s=it.getPointer(t);s&&delete i[s]}function e1(t,e){const i=[],s=new Array(e);for(let a=0;a<t;a++)i.push(it.ensureInt8(s));return i}function Oh(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function nl(t,e,i,s=!1){if(s)for(let a=0;a<2*e;a++)t[a]=it.getValue(i+a*Float64Array.BYTES_PER_ELEMENT,"double");else{const a=t.length===0;for(let d=0;d<e;d++)a&&(t[d]=new Array(2)),t[d][0]=it.getValue(i,"double"),t[d][1]=it.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=it.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=it._pe_getPeGTlistExtendedEntrySize()}function s(a,d,y,m,_,S){let I=null;const A=new it.PeInteger(S);try{const P=it.PeGTlistExtended.prototype.getGTlist(a,d,y,m,_,A);if((S=A.val)&&(I=[P],S>1)){const L=it.getPointer(P);for(let j=1;j<S;j++)I.push(it.wrapPointer(L+e*j,it.PeGTlistExtendedEntry))}}finally{it.destroy(A)}return I}t.init=i,t.getGTlist=s})(Lm||(Lm={})),function(t){function e(i){if(i&&i.length){for(const s of i)lo(s),s.getEntries().forEach(a=>{lo(a);const d=a.getGeogtran();lo(d),d.getParameters().forEach(lo),[d.getGeogcs1(),d.getGeogcs2()].forEach(y=>{lo(y);const m=y.getDatum();lo(m),lo(m.getSpheroid()),lo(y.getPrimem()),lo(y.getUnit())})});it.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(h3||(h3={})),function(t){function e(i,s,a,d,y){it.ensureCache.prepare();const m=Oh(a),_=a===m,S=it.ensureFloat64(m);let I=0;d&&(I=it.ensureFloat64(d));const A=it._pe_geog_to_geog(it.getPointer(i),s,S,I,y);return A&&nl(a,s,S,_),A}t.geogToGeog=e}(u3||(u3={})),function(t){const e=(S,I,A,P,L,j)=>{let F,V;switch(it.ensureCache.prepare(),S){case"dd":F=it._pe_geog_to_dd,V=Qe.PE_DD_MAX;break;case"ddm":F=it._pe_geog_to_ddm,V=Qe.PE_DDM_MAX;break;case"dms":F=it._pe_geog_to_dms,V=Qe.PE_DMS_MAX}let J=0;I&&(J=it.getPointer(I));const Q=Oh(P),Z=it.ensureFloat64(Q),et=e1(A,V),st=F(J,A,Z,L,it.ensureInt32(et));if(st)for(let nt=0;nt<A;nt++)j[nt]=it.UTF8ToString(et[nt]);return st},i=(S,I,A,P,L)=>{let j;switch(it.ensureCache.prepare(),S){case"dd":j=it._pe_dd_to_geog;break;case"ddm":j=it._pe_ddm_to_geog;break;case"dms":j=it._pe_dms_to_geog}let F=0;I&&(F=it.getPointer(I));const V=P.map(et=>it.ensureString(et)),J=it.ensureInt32(V),Q=it.ensureFloat64(new Array(2*A)),Z=j(F,A,J,Q);return Z&&nl(L,A,Q),Z};function s(S,I,A,P,L){return e("dms",S,I,A,P,L)}function a(S,I,A,P){return i("dms",S,I,A,P)}function d(S,I,A,P,L){return e("ddm",S,I,A,P,L)}function y(S,I,A,P){return i("ddm",S,I,A,P)}function m(S,I,A,P,L){return e("dd",S,I,A,P,L)}function _(S,I,A,P){return i("dd",S,I,A,P)}t.geogToDms=s,t.dmsToGeog=a,t.geogToDdm=d,t.ddmToGeog=y,t.geogToDd=m,t.ddToGeog=_}(c3||(c3={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=it.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=it.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=it.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=it.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=it.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(a,d,y,m,_,S,I){it.ensureCache.prepare();let A=0;a&&(A=it.getPointer(a));const P=Oh(y),L=it.ensureFloat64(P),j=e1(d,Qe.PE_MGRS_MAX),F=it.ensureInt32(j),V=it._pe_geog_to_mgrs_extended(A,d,L,m,_,S,F);if(V)for(let J=0;J<d;J++)I[J]=it.UTF8ToString(j[J]);return V}function s(a,d,y,m,_){it.ensureCache.prepare();let S=0;a&&(S=it.getPointer(a));const I=y.map(j=>it.ensureString(j)),A=it.ensureInt32(I),P=it.ensureFloat64(new Array(2*d)),L=it._pe_mgrs_to_geog_extended(S,d,A,m,P);return L&&nl(_,d,P),L}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=s}(Rm||(Rm={})),function(t){function e(s,a,d,y,m,_,S){it.ensureCache.prepare();let I=0;s&&(I=it.getPointer(s));const A=Oh(d),P=it.ensureFloat64(A),L=e1(a,Qe.PE_MGRS_MAX),j=it.ensureInt32(L),F=it._pe_geog_to_usng(I,a,P,y,m,_,j);if(F)for(let V=0;V<a;V++)S[V]=it.UTF8ToString(L[V]);return F}function i(s,a,d,y){it.ensureCache.prepare();let m=0;s&&(m=it.getPointer(s));const _=d.map(P=>it.ensureString(P)),S=it.ensureInt32(_),I=it.ensureFloat64(new Array(2*a)),A=it._pe_usng_to_geog(m,a,S,I);return A&&nl(y,a,I),A}t.geogToUsng=e,t.usngToGeog=i}(p3||(p3={})),function(t){function e(){t.PE_UTM_OPTS_NONE=it.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=it.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=it.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(a,d,y,m,_){it.ensureCache.prepare();let S=0;a&&(S=it.getPointer(a));const I=Oh(y),A=it.ensureFloat64(I),P=e1(d,Qe.PE_UTM_MAX),L=it.ensureInt32(P),j=it._pe_geog_to_utm(S,d,A,m,L);if(j)for(let F=0;F<d;F++)_[F]=it.UTF8ToString(P[F]);return j}function s(a,d,y,m,_){it.ensureCache.prepare();let S=0;a&&(S=it.getPointer(a));const I=y.map(j=>it.ensureString(j)),A=it.ensureInt32(I),P=it.ensureFloat64(new Array(2*d)),L=it._pe_utm_to_geog(S,d,A,m,P);return L&&nl(_,d,P),L}t.init=e,t.geogToUtm=i,t.utmToGeog=s}(jm||(jm={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=it.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=it.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=it.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=it.PePCSInfo.prototype.PE_POLE_POINT}function s(a,d=t.PE_PCSINFO_OPTION_DOMAIN){let y=null,m=null;return e.has(a)&&(m=e.get(a),m[d]&&(y=m[d])),y||(y=it.PePCSInfo.prototype.generate(a,d),m||(m=[],e.set(a,m)),m[d]=y),y}t.init=i,t.generate=s}(Dm||(Dm={})),function(t){function e(){return it.PeVersion.prototype.version_string()}t.versionString=e}(d3||(d3={}));const mW=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return a3},get PeDefs(){return Qe},get PeFactory(){return l3},get PeGCSExtent(){return qI},get PeGTTransformations(){return u3},get PeGTlistExtended(){return Lm},get PeGTlistExtendedEntry(){return h3},get PeNotationDms(){return c3},get PeNotationMgrs(){return Rm},get PeNotationUsng(){return p3},get PeNotationUtm(){return jm},get PePCSInfo(){return Dm},get PeVersion(){return d3},_init:BI,get _pe(){return it},isLoaded:C_,isSupported:yW,load:UI},Symbol.toStringTag,{value:"Module"})),fa=Re.radius,js=Re.eccentricitySquared,gW={a1:fa*js,a2:fa*js*fa*js,a3:fa*js*js/2,a4:fa*js*fa*js*2.5,a5:fa*js+fa*js*js/2,a6:1-js};1/294.9786982,1/298.257222101,Re.radius,Re.flattening,_l.radius,_l.flattening,1/192.0430107526882,Vo.radius,Vo.flattening,1/10.2079945799458,1/43.61604095563141,Vo.radius;let i1=0,s2=class f3{static fromGE(e){const i=new f3;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=i1++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=i1++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=i1++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=i1++}getInverse(){const e=new f3;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Fm=class yp{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new yp;let s="";for(const a of e.steps){const d=s2.fromGE(a);i.steps.push(d),s+=d.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof s2?this.steps.push(i):this.steps.push(new s2({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new yp;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,s){this._cachedProjection[yp.cacheKey(e,i)]=s}getCachedGeTransformation(e,i){let s="";for(const d of this.steps)s+=d.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const a=this._cachedProjection[yp.cacheKey(e,i)];return a===void 0?null:a}};function N_(t,e,i){if(e==null||i==null||i.vcsWkid||Oi(e,i))return null;const s=fm(e)/fm(i);if(s===1)return null;switch(t){case"point":case"esriGeometryPoint":return a=>vW(a,s);case"polyline":case"esriGeometryPolyline":return a=>wW(a,s);case"polygon":case"esriGeometryPolygon":return a=>bW(a,s);case"multipoint":case"esriGeometryMultipoint":return a=>_W(a,s);case"extent":case"esriGeometryEnvelope":return a=>xW(a,s);default:return null}}function vW(t,e){t&&t.z!=null&&(t.z*=e)}function bW(t,e){if(t)for(const i of t.rings)for(const s of i)s.length>2&&(s[2]*=e)}function wW(t,e){if(t)for(const i of t.paths)for(const s of i)s.length>2&&(s[2]*=e)}function _W(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function xW(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let fn=null,Tl=null,ed=null,my={};const HI=new Pg;function _u(){return!!fn&&C_()}function Ml(t){return ed==null&&(ed=Promise.all([UI(),bt(()=>Promise.resolve().then(()=>uit),void 0).then(e=>e.g),bt(()=>Promise.resolve().then(()=>git),void 0)])),ed.then(([,e,{hydratedAdapter:i}])=>{Ke(t),Tl=i,fn=e.default,fn._enableProjection(mW),HI.notify()})}function Rl(t,e,i=null,s=null){return Array.isArray(t)?t.length===0?[]:y3(Tl,t,t[0].spatialReference,e,i,s):y3(Tl,[t],t.spatialReference,e,i,s)[0]}function y3(t,e,i,s,a=null,d=null){if(i==null||s==null)return e;if(Zo(i,s,a))return e.map(y=>ZI(y,i,s));if(a==null){const y=Fm.cacheKey(i,s);my[y]!==void 0?a=my[y]:((a=JI(i,s,void 0))==null&&(a=new Fm),my[y]=a)}if(fn==null||t==null)throw new Xg;return d!=null?fn._project(t,e,i,s,a,d):fn._project(t,e,i,s,a)}function SW(t,e){const i=WI([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function WI(t,e){if(!_u()){for(const i of t)if(i!=null&&!Oi(i.spatialReference,e)&&Wi(i.spatialReference)&&Wi(e)&&!Zo(i.spatialReference,e))return Wt(HI),{pending:Ml(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Oi(i.spatialReference,e)?i:Wi(i.spatialReference)&&Wi(e)?KI(i,e):null)}}function JI(t,e,i=null){if(t==null||e==null)return null;if(fn==null||Tl==null)throw new Xg;const s=fn._getTransformation(Tl,t,e,i,i==null?void 0:i.spatialReference);return s!==null?Fm.fromGE(s):null}function $W(t,e,i=null){if(fn==null||Tl==null)throw new Xg;const s=fn._getTransformationBySuitability(Tl,t,e,i,i==null?void 0:i.spatialReference);if(s!==null){const a=[];for(const d of s)a.push(Fm.fromGE(d));return a}return[]}let Xg=class extends lt{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var Y;function TW(){fn=null,Tl=null,ed=null,my={}}(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(Y||(Y={}));const MW={get loadPromise(){return ed}};function KI(t,e){try{const i=Rl(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const s=N_(i.type,t.spatialReference,e);return s!=null&&s(i),i}catch(i){if(!(i instanceof Xg))throw i;return null}}function Zo(t,e,i){return!i&&(!!Oi(t,e)||Wi(t)&&Wi(e)&&!!j_(t,e,F_))}async function YI(t,e,i,s){if(_u())return tm(s);if(Array.isArray(t)){for(const{source:a,dest:d,geographicTransformation:y}of t)if(!Zo(a,d,y))return Ml(s)}else if(!Zo(t,e,i))return Ml(s);return tm(s)}function EW(t,e){switch(j_(t,e,F_)){case Oe:return"copy3";case cl:return"wgs84ToSphericalECEF";case uu:return"wgs84ToWebMercator";case ul:return"wgs84ToPlateCarree";case dl:return"wgs84ToWGS84ECEF";case Wh:return"webMercatorToWGS84";case oA:return"webMercatorToSphericalECEF";case aA:return"webMercatorToWGS84ECEF";case hA:return"webMercatorToPlateCarree";case fl:return"wgs84ECEFToWGS84";case pA:return"wgs84ECEFToSphericalECEF";case dA:return"wgs84ECEFToWebMercator";case pl:return"sphericalECEFToWGS84";case uA:return"sphericalECEFToWebMercator";case _3:return"sphericalMarsPCPFToMars2000";case w3:return"sphericalMoonPCPFToMoon2000";case cA:return"sphericalECEFToWGS84ECEF";case b3:return"mars2000ToSphericalPCPF";case v3:return"moon2000ToSphericalPCPF";default:return null}}function ZI(t,e,i){return t?"x"in t?XI(t,e,new Yt,i,0):"xmin"in t?iA(t,e,new Ae,i,0):"rings"in t?eA(t,e,new Jo,i,0):"paths"in t?tA(t,e,new Zr,i,0):"points"in t?QI(t,e,new t0,i,0):null:null}function IW(t,e,i=e.spatialReference,s=0){return i!=null&&t.spatialReference!=null&&XI(t,t.spatialReference,e,i,s)!=null}function XI(t,e,i,s,a){he[0]=t.x,he[1]=t.y;const d=t.z;return he[2]=d!==void 0?d:a,bn(he,e,0,he,s,0,1)?(i.x=he[0],i.y=he[1],i.spatialReference=s,d===void 0?(i.z=void 0,i.hasZ=!1):(i.z=he[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function AW(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&QI(t,t.spatialReference,e,i,s)!=null}function QI(t,e,i,s,a){const{points:d,hasZ:y,hasM:m}=t,_=[],S=d.length,I=[];for(const A of d)I.push(A[0],A[1],y?A[2]:a);if(!bn(I,e,0,I,s,0,S))return null;for(let A=0;A<S;++A){const P=3*A,L=I[P],j=I[P+1];y&&m?_.push([L,j,I[P+2],d[A][3]]):y?_.push([L,j,I[P+2]]):m?_.push([L,j,d[A][2]]):_.push([L,j])}return i.points=_,i.spatialReference=s,i.hasZ=y,i.hasM=m,i}function kW(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&tA(t,t.spatialReference,e,i,s)!=null}function tA(t,e,i,s,a){const{paths:d,hasZ:y,hasM:m}=t,_=[];return sA(d,y??!1,m??!1,e,_,s,a)?(i.paths=_,i.spatialReference=s,i.hasZ=y,i.hasM=m,i):null}function OW({hasZ:t,spatialReference:e,paths:i},s,a=0){const d=ro(e,d0),y=Ss[d][Y.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const m=t?_=>_:_=>zg(he,_[0],_[1],a);for(const _ of i){const S=[];for(const I of _){const A=[0,0,a];y(m(I),0,A,0),S.push(A)}s.push(S)}return!0}function PW({hasZ:t,spatialReference:e,rings:i},s,a=0){const d=ro(e,d0),y=Ss[d][Y.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const m=t?_=>_:_=>zg(he,_[0],_[1],a);for(const _ of i){const S=[];for(const I of _){const A=[0,0,a];y(m(I),0,A,0),S.push(A)}s.push(S)}return!0}function CW(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&eA(t,t.spatialReference,e,i,s)!=null}function eA(t,e,i,s,a){const{rings:d,hasZ:y,hasM:m}=t,_=[];return sA(d,y??!1,m??!1,e,_,s,a)?(i.rings=_,i.spatialReference=s,i.hasZ=y,i.hasM=m,i):null}function NW(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&iA(t,t.spatialReference,e,i,s)!=null}function iA(t,e,i,s,a){const{xmin:d,ymin:y,xmax:m,ymax:_,hasZ:S,hasM:I}=t;return m3(d,y,S?t.zmin:a,e,he,s)?(i.xmin=he[0],i.ymin=he[1],S&&(i.zmin=he[2]),m3(m,_,S?t.zmax:a,e,he,s)?(i.xmax=he[0],i.ymax=he[1],S&&(i.zmax=he[2]),I&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=s,i):null):null}function LW(t,e,i){if(e==null||i==null)return null;const s=new Yt({spatialReference:i});return bn(t,e,0,he,i,0,1)?(s.x=he[0],s.y=he[1],s.z=he[2],s):null}function RW(t,e,i){return bn(t,e,0,he,i.spatialReference,0,1)?(i.x=he[0],i.y=he[1],i.z=he[2],i):null}function jW(t,e,i,s=0){he[0]=t.x,he[1]=t.y;const a=t.z;return he[2]=a!==void 0?a:s,bn(he,t.spatialReference,0,e,i,0,1)}function m3(t,e,i,s,a,d){return Be[0]=t,Be[1]=e,Be[2]=i,bn(Be,s,0,a,d,0,1)}function g3(t,e,i,s){return!(e==null||s==null||t.length<2)&&(t.length===2&&(Be[0]=t[0],Be[1]=t[1],Be[2]=0,t=Be),bn(t,e,0,i,s,0,1))}function DW(t,e){he[0]=t.x,he[1]=t.y;const i=t.z;return he[2]=i!==void 0?i:0,rA(he,t.spatialReference,e)}function rA(t,e,i){return FW(t,e,i)}function FW(t,e,i){if(e==null)return!1;const s=ro(e,d0),a=Ss[s][Y.WGS84_COMPARABLE_LON_LAT];return a!=null&&(a(t,0,Be,0),i!==Be&&(i[0]=Be[0],i[1]=Be[1],i.length>2&&(i[2]=Be[2])),!0)}function bn(t,e,i,s,a,d,y=1){const m=j_(e,a,F_);if(m==null)return!1;if(m===Oe){if(t===s&&i===d)return!0;const S=i+3*y;for(let I=i,A=d;I<S;I++,A++)s[A]=t[I];return!0}const _=i+3*y;for(let S=i,I=d;S<_;S+=3,I+=3)m(t,S,s,I);return!0}function zW(t,e,i,s,a){wm(he,t),UT(r1,t,e),g3(he,i,he,a),g3(r1,i,r1,a),B5(s,r1,he),_m(s,s)}function sA(t,e,i,s,a,d,y=0){const m=new Array;for(const S of t)for(const I of S)m.push(I[0],I[1],e?I[2]:y);if(!bn(m,s,0,m,d,0,m.length/3))return!1;let _=0;a.length=0;for(const S of t){const I=new Array;for(const A of S)e&&i?I.push([m[_++],m[_++],m[_++],A[3]]):e?I.push([m[_++],m[_++],m[_++]]):i?(I.push([m[_++],m[_++],A[2]]),_++):(I.push([m[_++],m[_++]]),_++);a.push(I)}return!0}function VW(t,e,i,s){if(e==null||s==null)return!1;const a=fA(e,s,QW);if(a.projector===Oe)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],!0;if(a.projector==null)return!1;const{source:d,dest:y}=a;if(y.spatialReferenceId===Y.WEB_MERCATOR){const m=Ss[d.spatialReferenceId][Y.WGS84];return m!=null&&(m(t,0,en,0),uu(en,0,i,0),i[3]=I7(en[1],t[2],t[3],Re.radius),!0)}if(d.spatialReferenceId!==Y.WGS84&&d.spatialReferenceId!==Y.CGCS2000||y.spatialReferenceId!==Y.PLATE_CARREE){a.projector(t,0,i,0);const m=d.metersPerUnit??1,_=y.metersPerUnit??1;i[3]=t[3]*m/_}else{const m=Ss[d.spatialReferenceId][Y.SPHERICAL_ECEF],_=Ss[Y.SPHERICAL_ECEF][Y.PLATE_CARREE];let S=t[3];m!=null&&_!=null&&(S=I7(t[1],t[2],t[3],Re.radius)),a.projector(t,0,i,0),i[3]=S}return!0}function I7(t,e,i,s){const a=s+e;if(a<s/2||i>a)return Number.MAX_VALUE;const d=Math.abs(hn*t)+Math.asin(i/a);return d>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(d)}function GW(t,e,i,s){return t!=null&&(Oi(e,s)?(K5(i,t),!0):(Be[0]=t[0],Be[1]=t[1],Be[2]=0,!!bn(Be,e,0,Be,s,0,1)&&(i[0]=Be[0],i[1]=Be[1],Be[0]=t[2],Be[1]=t[3],Be[2]=0,!!bn(Be,e,0,Be,s,0,1)&&(i[2]=Be[0],i[3]=Be[1],!0))))}function UW(t,e,i,s){if(e==null||s==null)return!1;const a=ro(e,d0),d=ro(s,yA);if(a===d&&a!==Y.UNKNOWN||Oi(e,s))return i[0]=1,i[1]=1,i[2]=1,!0;if(a===Y.SPHERICAL_ECEF){const y=Fg(t),m=y/Math.sqrt(t[0]*t[0]+t[1]*t[1]),_=y/Re.radius;if(d===Y.WEB_MERCATOR)return i[0]=m*_,i[1]=m*_,i[2]=1,!0;if(d===Y.WGS84||d===Y.CGCS2000){const S=id;return i[0]=S*m*_,i[1]=S*_,i[2]=1,!0}}else if(a===Y.PLATE_CARREE){if(d===Y.WGS84||d===Y.CGCS2000)return i[0]=id,i[1]=id,i[2]=1,!0;if(d===Y.WEB_MERCATOR){const y=t[1]/Re.radius;return i[0]=1,i[1]=1/Math.cos(y),i[2]=1,!0}}return!1}function qW(t,e,i,s){if(t==null||s==null)return!1;const a=ro(t,d0),d=ro(s,yA);if(a===d&&!A7(d)&&(a!==Y.UNKNOWN||Oi(t,s)))return zI(i,e),!0;if(A7(d)){const y=Ss[a][Y.LON_LAT],m=Ss[Y.LON_LAT][d];return y!=null&&m!=null&&(y(e,0,en,0),m(en,0,ya,0),L_(hn*en[0],hn*en[1],i),i[12]=ya[0],i[13]=ya[1],i[14]=ya[2],!0)}if((d===Y.WEB_MERCATOR||d===Y.PLATE_CARREE)&&(a===Y.WGS84||a===Y.CGCS2000&&d===Y.PLATE_CARREE||a===Y.SPHERICAL_ECEF||a===Y.WEB_MERCATOR)){const y=Ss[a][Y.LON_LAT],m=Ss[Y.LON_LAT][d];return y!=null&&m!=null&&(y(e,0,en,0),m(en,0,ya,0),a===Y.SPHERICAL_ECEF?nA(hn*en[0],hn*en[1],i):cf(i),i[12]=ya[0],i[13]=ya[1],i[14]=ya[2],!0)}return!1}function A7(t){return t===Y.SPHERICAL_ECEF||t===Y.SPHERICAL_MARS_PCPF||t===Y.SPHERICAL_MOON_PCPF}function L_(t,e,i){const s=Math.sin(t),a=Math.cos(t),d=Math.sin(e),y=Math.cos(e),m=i;return m[0]=-s,m[4]=-d*a,m[8]=y*a,m[12]=0,m[1]=a,m[5]=-d*s,m[9]=y*s,m[13]=0,m[2]=0,m[6]=y,m[10]=d,m[14]=0,m[3]=0,m[7]=0,m[11]=0,m[15]=1,m}function nA(t,e,i){return L_(t,e,i),ia(i,i),i}function ro(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=ea(t,1)),t.wkt===Vj.wkt?e.spatialReferenceId=Y.SPHERICAL_ECEF:Sd(t)?e.spatialReferenceId=Y.WGS84:iu(t)?e.spatialReferenceId=Y.WEB_MERCATOR:Rj(t)?e.spatialReferenceId=Y.PLATE_CARREE:t.wkt===Gj.wkt?e.spatialReferenceId=Y.WGS84_ECEF:t.wkid===eu.CGCS2000?e.spatialReferenceId=Y.CGCS2000:t.wkt===uT.wkt?e.spatialReferenceId=Y.SPHERICAL_MARS_PCPF:t.wkt===cT.wkt?e.spatialReferenceId=Y.SPHERICAL_MOON_PCPF:C5(t)?e.spatialReferenceId=Y.GCSMARS2000:L5(t)?e.spatialReferenceId=Y.GCSMOON2000:e.spatialReferenceId=Y.UNKNOWN):Y.UNKNOWN}function Oe(t,e,i,s){t!==i&&(i[s++]=t[e++],i[s++]=t[e++],i[s]=t[e])}function Wh(t,e,i,s){i[s++]=Bc*(t[e++]/Re.radius),i[s++]=Bc*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Re.radius))),i[s]=t[e]}function oA(t,e,i,s){Wh(t,e,i,s),cl(i,s,i,s)}function aA(t,e,i,s){Wh(t,e,i,s),dl(i,s,i,s)}function lA(t,e,i,s,a){const d=.4999999*Math.PI,y=Es(hn*t[e+1],-d,d),m=Math.sin(y);i[s++]=hn*t[e]*a.radius,i[s++]=a.halfSemiMajorAxis*Math.log((1+m)/(1-m)),i[s]=t[e+2]}function uu(t,e,i,s){lA(t,e,i,s,Re)}const k7=Re.radius*Math.PI/180,id=180/(Re.radius*Math.PI);function ul(t,e,i,s){i[s]=t[e]*k7,i[s+1]=t[e+1]*k7,i[s+2]=t[e+2]}function Vh(t,e,i,s){i[s]=t[e]*id,i[s+1]=t[e+1]*id,i[s+2]=t[e+2]}function hA(t,e,i,s){Wh(t,e,i,s),ul(i,s,i,s)}function BW(t,e,i,s){fl(t,e,i,s),ul(i,s,i,s)}function HW(t,e,i,s){pl(t,e,i,s),ul(i,s,i,s)}function WW(t,e,i,s){Vh(t,e,i,s),cl(i,s,i,s)}function JW(t,e,i,s){Vh(t,e,i,s),uu(i,s,i,s)}function KW(t,e,i,s){Vh(t,e,i,s),dl(i,s,i,s)}function YW(t){if(t==null)return!1;const e=ro(t,d0);return!!Ss[e][Y.WGS84_COMPARABLE_LON_LAT]}function ZW(t,e,i,s){const a=Math.cos(i);t[0]=Math.cos(e)*a*s,t[1]=Math.sin(e)*a*s,t[2]=Math.sin(i)*s}function R_(t,e,i,s,a){const d=a+t[e+2],y=hn*t[e+1],m=hn*t[e],_=Math.cos(y);i[s++]=Math.cos(m)*_*d,i[s++]=Math.sin(m)*_*d,i[s]=Math.sin(y)*d}function v3(t,e,i,s){R_(t,e,i,s,_l.radius)}function b3(t,e,i,s){R_(t,e,i,s,Vo.radius)}function cl(t,e,i,s){R_(t,e,i,s,Re.radius)}function Qg(t,e,i,s,a){const d=t[e],y=t[e+1],m=t[e+2],_=Math.sqrt(d*d+y*y+m*m),S=oM(m/(_===0?1:_)),I=Math.atan2(y,d);i[s++]=Bc*I,i[s++]=Bc*S,i[s]=_-a}function w3(t,e,i,s){Qg(t,e,i,s,_l.radius)}function _3(t,e,i,s){Qg(t,e,i,s,Vo.radius)}function pl(t,e,i,s){Qg(t,e,i,s,Re.radius)}function uA(t,e,i,s){pl(t,e,i,s),uu(i,s,i,s)}function cA(t,e,i,s){pl(t,e,i,s),dl(i,s,i,s)}function XW(t,e,i,s,a){const d=hn*t[e],y=hn*t[e+1],m=t[e+2],_=Math.sin(y),S=Math.cos(y),I=a.radius/Math.sqrt(1-a.eccentricitySquared*_*_);i[s++]=(I+m)*S*Math.cos(d),i[s++]=(I+m)*S*Math.sin(d),i[s++]=(I*(1-a.eccentricitySquared)+m)*_}function dl(t,e,i,s){XW(t,e,i,s,Re)}function fl(t,e,i,s){const a=gW,d=t[e],y=t[e+1],m=t[e+2];let _,S,I,A,P,L,j,F,V,J,Q,Z,et,st,nt,pt,yt,$t,Ot,Ct,Nt;_=Math.abs(m),S=d*d+y*y,I=Math.sqrt(S),A=S+m*m,P=Math.sqrt(A),Ct=Math.atan2(y,d),L=m*m/A,j=S/A,st=a.a2/P,nt=a.a3-a.a4/P,j>.3?(F=_/P*(1+j*(a.a1+st+L*nt)/P),Ot=Math.asin(F),J=F*F,V=Math.sqrt(1-J)):(V=I/P*(1-L*(a.a5-st-j*nt)/P),Ot=Math.acos(V),J=1-V*V,F=Math.sqrt(J)),Q=1-Re.eccentricitySquared*J,Z=Re.radius/Math.sqrt(Q),et=a.a6*Z,st=I-Z*V,nt=_-et*F,yt=V*st+F*nt,pt=V*nt-F*st,$t=pt/(et/Q+yt),Ot+=$t,Nt=yt+pt*$t/2,m<0&&(Ot=-Ot),i[s++]=Bc*Ct,i[s++]=Bc*Ot,i[s]=Nt}function pA(t,e,i,s){fl(t,e,i,s),cl(i,s,i,s)}function dA(t,e,i,s){fl(t,e,i,s),uu(i,s,i,s)}const Ss={[Y.WGS84]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:Oe,[Y.WGS84_COMPARABLE_LON_LAT]:Oe,[Y.SPHERICAL_ECEF]:cl,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:uu,[Y.PLATE_CARREE]:ul,[Y.WGS84]:Oe,[Y.WGS84_ECEF]:dl},[Y.CGCS2000]:{[Y.CGCS2000]:Oe,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:Oe,[Y.WGS84_COMPARABLE_LON_LAT]:Oe,[Y.SPHERICAL_ECEF]:cl,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:ul,[Y.WGS84]:null,[Y.WGS84_ECEF]:dl},[Y.GCSMARS2000]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:Oe,[Y.GCSMOON2000]:null,[Y.LON_LAT]:Oe,[Y.WGS84_COMPARABLE_LON_LAT]:null,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:b3,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.GCSMOON2000]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:Oe,[Y.LON_LAT]:Oe,[Y.WGS84_COMPARABLE_LON_LAT]:null,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:v3,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.WEB_MERCATOR]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:Wh,[Y.WGS84_COMPARABLE_LON_LAT]:Wh,[Y.SPHERICAL_ECEF]:oA,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:Oe,[Y.PLATE_CARREE]:hA,[Y.WGS84]:Wh,[Y.WGS84_ECEF]:aA},[Y.WGS84_ECEF]:{[Y.CGCS2000]:fl,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:fl,[Y.WGS84_COMPARABLE_LON_LAT]:fl,[Y.SPHERICAL_ECEF]:pA,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:dA,[Y.PLATE_CARREE]:BW,[Y.WGS84]:fl,[Y.WGS84_ECEF]:Oe},[Y.SPHERICAL_ECEF]:{[Y.CGCS2000]:pl,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:pl,[Y.WGS84_COMPARABLE_LON_LAT]:pl,[Y.SPHERICAL_ECEF]:Oe,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:uA,[Y.PLATE_CARREE]:HW,[Y.WGS84]:pl,[Y.WGS84_ECEF]:cA},[Y.SPHERICAL_MARS_PCPF]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:_3,[Y.GCSMOON2000]:null,[Y.LON_LAT]:_3,[Y.WGS84_COMPARABLE_LON_LAT]:null,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:Oe,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.SPHERICAL_MOON_PCPF]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:w3,[Y.LON_LAT]:w3,[Y.WGS84_COMPARABLE_LON_LAT]:null,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:Oe,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.UNKNOWN]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:null,[Y.WGS84_COMPARABLE_LON_LAT]:null,[Y.SPHERICAL_ECEF]:null,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:Oe,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:null,[Y.WGS84]:null,[Y.WGS84_ECEF]:null},[Y.LON_LAT]:{[Y.CGCS2000]:Oe,[Y.GCSMARS2000]:Oe,[Y.GCSMOON2000]:Oe,[Y.LON_LAT]:Oe,[Y.WGS84_COMPARABLE_LON_LAT]:Oe,[Y.SPHERICAL_ECEF]:cl,[Y.SPHERICAL_MARS_PCPF]:b3,[Y.SPHERICAL_MOON_PCPF]:v3,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:uu,[Y.PLATE_CARREE]:ul,[Y.WGS84]:Oe,[Y.WGS84_ECEF]:dl},[Y.WGS84_COMPARABLE_LON_LAT]:{[Y.CGCS2000]:null,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:Oe,[Y.WGS84_COMPARABLE_LON_LAT]:Oe,[Y.SPHERICAL_ECEF]:cl,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:null,[Y.PLATE_CARREE]:ul,[Y.WGS84]:Oe,[Y.WGS84_ECEF]:dl},[Y.PLATE_CARREE]:{[Y.CGCS2000]:Vh,[Y.GCSMARS2000]:null,[Y.GCSMOON2000]:null,[Y.LON_LAT]:Vh,[Y.WGS84_COMPARABLE_LON_LAT]:Vh,[Y.SPHERICAL_ECEF]:WW,[Y.SPHERICAL_MARS_PCPF]:null,[Y.SPHERICAL_MOON_PCPF]:null,[Y.UNKNOWN]:null,[Y.WEB_MERCATOR]:JW,[Y.PLATE_CARREE]:Oe,[Y.WGS84]:Vh,[Y.WGS84_ECEF]:KW}};function j_(t,e,i=D_()){return t==null||e==null?null:fA(t,e,i).projector}function fA(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const s=ro(t,i.source),a=ro(e,i.dest);return s===Y.UNKNOWN&&a===Y.UNKNOWN?Oi(t,e)?i.projector=Oe:i.projector=null:i.projector=Ss[s][a],i}function D_(){return{source:{spatialReference:null,spatialReferenceId:Y.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Y.UNKNOWN,metersPerUnit:1},projector:Oe}}const d0={spatialReference:null,spatialReferenceId:Y.UNKNOWN},yA={spatialReference:null,spatialReferenceId:Y.UNKNOWN},F_=D_(),QW=D_(),hn=Wz(1),Bc=nM(1),Be=xn(),en=xn(),ya=xn(),he=xn(),r1=xn(),X0t=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:YW,canProjectWithoutEngine:Zo,computeENUToSphericalPCPFLocalRotation:L_,computeSphericalPCPFToENULocalRotation:nA,computeTranslationToOriginAndRotation:qW,getProjectorName:EW,getTransformation:JI,getTransformations:$W,initializeProjection:YI,isLoaded:_u,load:Ml,localLinearScaleFactors:UW,lonLatToSphericalPCPF:ZW,lonLatToWebMercatorComparable:lA,project:Rl,projectBoundingRect:GW,projectBoundingSphere:VW,projectBuffer:bn,projectDirection:zW,projectExtent:NW,projectMany:y3,projectMultipoint:AW,projectOrLoad:SW,projectOrLoadMany:WI,projectPoint:IW,projectPointToVector:jW,projectPointToWGS84ComparableLonLat:DW,projectPolygon:CW,projectPolygonToWGS84ComparableLonLat:PW,projectPolyline:kW,projectPolylineToWGS84ComparableLonLat:OW,projectVectorToDehydratedPoint:RW,projectVectorToPoint:LW,projectVectorToVector:g3,projectVectorToWGS84ComparableLonLat:rA,projectWithoutEngine:ZI,projectXYZToVector:m3,sphericalPCPFtoLonLatElevation:Qg,test:MW,tryProjectWithZConversion:KI,unload:TW},Symbol.toStringTag,{value:"Module"}));var x3;let Fn=x3=class extends gt{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new x3({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};w([T({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fn.prototype,"cols",void 0),w([T({type:Ee,json:{write:!0}})],Fn.prototype,"level",void 0),w([T({type:String,json:{write:!0}})],Fn.prototype,"levelValue",void 0),w([T({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fn.prototype,"origin",void 0),w([T({type:Number,json:{write:!0}})],Fn.prototype,"resolution",void 0),w([T({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Fn.prototype,"rows",void 0),w([T({type:Number,json:{write:!0}})],Fn.prototype,"scale",void 0),Fn=x3=w([W("esri.layers.support.LOD")],Fn);const Za=Fn;let mA=class{constructor(e,i,s,a,d=void 0){this.id=e,this.level=i,this.row=s,this.col=a,this.extent=d}};var Na;const O7=new Ie({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Zi=Na=class extends gt{static create(t={}){const{resolutionFactor:e=1,scales:i,size:s=256,spatialReference:a=te.WebMercator,numLODs:d=24}=t;if(!Wi(a)){const A=[];if(i)for(let P=0;P<i.length;P++){const L=i[P];A.push(new Za({level:P,scale:L,resolution:L}))}else{let P=5e-4;for(let L=d-1;L>=0;L--)A.unshift(new Za({level:L,scale:P,resolution:P})),P*=2}return new Na({dpi:96,lods:A,origin:new Yt(0,0,a),size:[s,s],spatialReference:a})}const y=pn(a),m=t.origin?new Yt({x:t.origin.x,y:t.origin.y,spatialReference:a}):new Yt(y?{x:y.origin[0],y:y.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),_=96,S=1/(ea(a)*39.37*_),I=[];if(i)for(let A=0;A<i.length;A++){const P=i[A],L=P*S;I.push(new Za({level:A,scale:P,resolution:L}))}else{let A=hT(a)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const P=Math.ceil(d/e);I.push(new Za({level:0,scale:A,resolution:A*S}));for(let L=1;L<P;L++){const j=A/2**e,F=j*S;I.push(new Za({level:L,scale:j,resolution:F})),A=j}}return new Na({dpi:_,lods:I,origin:m,size:[s,s],spatialReference:a})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=pn(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Yt.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const s=[],a=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(d=>{s.push(d.scale),e=d.scale>e?d.scale:e,i=d.scale<i?d.scale:i,a[d.level]=d})),this._set("scales",s),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),s=i+1;return e[i]/(e[i]/e[s])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let s=0;for(;s<i;s++){const a=e[s],d=e[s+1];if(a<=t)return s;if(d===t)return s+1;if(a>t&&d<t)return s+Math.log(a/t)/Math.log(a/d)}return s}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,s){const a=this.lodAt(t);if(!a)return null;let d,y;if(typeof e=="number")d=e,y=i;else if(Oi(e.spatialReference,this.spatialReference))d=e.x,y=e.y,s=i;else{const S=Rg(e,this.spatialReference);if(S==null)return null;d=S.x,y=S.y,s=i}const m=a.resolution*this.size[0],_=a.resolution*this.size[1];return s||(s=new mA(null,0,0,0,to())),s.level=t,s.row=Math.floor((this.origin.y-y)/_+.001),s.col=Math.floor((d-this.origin.x)/m+.001),this.updateTileInfo(s),s}updateTileInfo(t,e=Na.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Na.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<t.level&&(i=y)}if(!i)return;const s=t.level-i.level,a=i.resolution*this.size[0]/2**s,d=i.resolution*this.size[1]/2**s;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=to()),t.extent[0]=this.origin.x+t.col*a,t.extent[1]=this.origin.y-(t.row+1)*d,t.extent[2]=t.extent[0]+a,t.extent[3]=t.extent[1]+d}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:s}=i,a=s*this.size[0],d=s*this.size[1];return t[0]=this.origin.x+e.col*a,t[1]=this.origin.y-(e.row+1)*d,t[2]=t[0]+a,t[3]=t[1]+d,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return Na.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],s=this.lods.length;for(let a=0;a<s;a++){const d=this.lods[a],y=d.resolution*e;i.push(new Za({level:d.level,scale:d.scale,resolution:y}))}return new Na({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const s=t[i];this._upsampleLevels[s.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/s.resolution:0},e=s}}};w([T({type:Number,json:{write:!0}})],Zi.prototype,"compressionQuality",void 0),w([T({type:Number,json:{write:!0}})],Zi.prototype,"dpi",void 0),w([T({type:String,json:{read:O7.read,write:O7.write,origins:{"web-scene":{read:!1,write:!1}}}})],Zi.prototype,"format",void 0),w([T({readOnly:!0})],Zi.prototype,"isWrappable",null),w([T({type:Yt,json:{write:!0}})],Zi.prototype,"origin",void 0),w([kt("origin")],Zi.prototype,"readOrigin",null),w([T({type:[Za],value:null,json:{write:!0}})],Zi.prototype,"lods",null),w([T({readOnly:!0})],Zi.prototype,"scales",void 0),w([T({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Zi.prototype,"size",void 0),w([kt("size",["rows","cols"])],Zi.prototype,"readSize",null),w([At("size",{cols:{type:Ee},rows:{type:Ee}})],Zi.prototype,"writeSize",null),w([T({type:te,json:{write:!0}})],Zi.prototype,"spatialReference",void 0),Zi=Na=w([W("esri.layers.support.TileInfo")],Zi),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Zi||(Zi={}));const S3=Zi,gy={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],s=e[1],a=this.values;return s>=i?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},n2={xsmall:544,small:768,medium:992,large:1200};function tJ(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function o2(t,e){return e?gy[t].valueToClassName[e].split(" "):[]}const eJ=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Qo,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=n2}initialize(){this._breakpointsHandles.add(It(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),xe))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Je(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const s=tJ(i);if(!s){const a=JSON.stringify(n2,null,2);console.warn("provided breakpoints are not valid, using defaults:"+a)}i=s?i:n2,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=_r.acquire(),s=_r.acquire();let a,d=!1;for(a in gy){const y=this[a],m=gy[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==m&&(d=!0,this[a]=m,o2(a,y).forEach(_=>s.push(_)),o2(a,m).forEach(_=>i.push(_)))}d&&(this._applyClassNameChanges(i,s),_r.release(i),_r.release(s))}_applyClassNameChanges(i,s){const a=this.container;a&&(s.forEach(d=>a.classList.remove(d)),i.forEach(d=>a.classList.add(d)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in gy)o2(s,this[s]).forEach(a=>i.classList.remove(a))}};return w([T()],e.prototype,"breakpoints",null),w([T()],e.prototype,"orientation",void 0),w([T()],e.prototype,"widthBreakpoint",void 0),w([T()],e.prototype,"heightBreakpoint",void 0),e=w([W("esri.views.BreakpointsOwner")],e),e};function z_(t){return typeof t=="string"?document.getElementById(t):t??null}function gA(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function P7(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function C7(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Ic=class extends Rt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Qo,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,s={}){return this._installWatch(e,i,s,It)}addWhen(e,i,s={}){return this._installWatch(e,i,s,Sl)}addOnCollectionChange(e,i,{initial:s=!1,final:a=!1}={}){const d=++this._handleId;return this._handles.add([qc(e,"after-changes",this._createSyncUpdatingCallback(),p0),qc(e,"change",i,{onListenerAdd:s?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:a?y=>i({added:[],removed:y.toArray()}):void 0})],d),Xn(()=>this._handles.remove(d))}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(s1)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const s=()=>this._handles.remove(i);return e.then(s,s),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,s={},a){const d=++this._handleId;s.sync||this._installSyncUpdatingWatch(e,d);const y=a(e,i,s);return this._handles.add(y,d),Xn(()=>this._handles.remove(d))}_installSyncUpdatingWatch(e,i){const s=this._createSyncUpdatingCallback(),a=It(e,s,{sync:!0,equals:()=>!1});return this._handles.add(a,i),a}_createSyncUpdatingCallback(){return()=>{this._handles.remove(s1),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Xc(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(s1))}),s1)}}};w([T({readOnly:!0})],Ic.prototype,"updating",void 0),Ic=w([W("esri.core.support.WatchUpdatingTracking")],Ic);const s1=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var iJ=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ph={exports:{}},ci={},Cd={exports:{}},xu={};function vA(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function rJ(t,e,i){}function sJ(t,e,i){}var nJ=/javascript\s*\:/img;function oJ(t,e){return nJ.test(e)?"":e}xu.whiteList=vA();xu.getDefaultWhiteList=vA;xu.onAttr=rJ;xu.onIgnoreAttr=sJ;xu.safeAttrValue=oJ;var aJ={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,a;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,a=t.length;s<a;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},C0=aJ;function lJ(t,e){t=C0.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,s=!1,a=0,d=0,y="";function m(){if(!s){var I=C0.trim(t.slice(a,d)),A=I.indexOf(":");if(A!==-1){var P=C0.trim(I.slice(0,A)),L=C0.trim(I.slice(A+1));if(P){var j=e(a,y.length,P,L,I);j&&(y+=j+"; ")}}}a=d+1}for(;d<i;d++){var _=t[d];if(_==="/"&&t[d+1]==="*"){var S=t.indexOf("*/",d+2);if(S===-1)break;d=S+1,a=d+1,s=!1}else _==="("?s=!0:_===")"?s=!1:_===";"?s||m():_===`
`&&m()}return C0.trim(y)}var hJ=lJ,n1=xu,uJ=hJ;function N7(t){return t==null}function cJ(t){var e={};for(var i in t)e[i]=t[i];return e}function bA(t){t=cJ(t||{}),t.whiteList=t.whiteList||n1.whiteList,t.onAttr=t.onAttr||n1.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||n1.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||n1.safeAttrValue,this.options=t}bA.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,a=i.onAttr,d=i.onIgnoreAttr,y=i.safeAttrValue,m=uJ(t,function(_,S,I,A,P){var L=s[I],j=!1;if(L===!0?j=L:typeof L=="function"?j=L(A):L instanceof RegExp&&(j=L.test(A)),j!==!0&&(j=!1),A=y(I,A),!!A){var F={position:S,sourcePosition:_,source:P,isWhite:j};if(j){var V=a(I,A,F);return N7(V)?I+":"+A:V}else{var V=d(I,A,F);if(!N7(V))return V}}});return m};var pJ=bA;(function(t,e){var i=xu,s=pJ;function a(y,m){var _=new s(m);return _.process(y)}e=t.exports=a,e.FilterCSS=s;for(var d in i)e[d]=i[d]})(Cd,Cd.exports);var V_={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,a;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,a=t.length;s<a;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},dJ=Cd.exports.FilterCSS,fJ=Cd.exports.getDefaultWhiteList,zm=V_;function wA(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var _A=new dJ;function yJ(t,e,i){}function mJ(t,e,i){}function gJ(t,e,i){}function vJ(t,e,i){}function xA(t){return t.replace(wJ,"&lt;").replace(_J,"&gt;")}function bJ(t,e,i,s){if(i=IA(i),e==="href"||e==="src"){if(i=zm.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(o1.lastIndex=0,o1.test(i))return""}else if(e==="style"){if(L7.lastIndex=0,L7.test(i)||(R7.lastIndex=0,R7.test(i)&&(o1.lastIndex=0,o1.test(i))))return"";s!==!1&&(s=s||_A,i=s.process(i))}return i=AA(i),i}var wJ=/</g,_J=/>/g,xJ=/"/g,SJ=/&quot;/g,$J=/&#([a-zA-Z0-9]*);?/gim,TJ=/&colon;?/gim,MJ=/&newline;?/gim,o1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,L7=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,R7=/u\s*r\s*l\s*\(.*/gi;function SA(t){return t.replace(xJ,"&quot;")}function $A(t){return t.replace(SJ,'"')}function TA(t){return t.replace($J,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function MA(t){return t.replace(TJ,":").replace(MJ," ")}function EA(t){for(var e="",i=0,s=t.length;i<s;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return zm.trim(e)}function IA(t){return t=$A(t),t=TA(t),t=MA(t),t=EA(t),t}function AA(t){return t=SA(t),t=xA(t),t}function EJ(){return""}function IJ(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function s(y){return i?!0:zm.indexOf(t,y)!==-1}var a=[],d=!1;return{onIgnoreTag:function(y,m,_){if(s(y))if(_.isClosing){var S="[/removed]",I=_.position+S.length;return a.push([d!==!1?d:_.position,I]),d=!1,S}else return d||(d=_.position),"[removed]";else return e(y,m,_)},remove:function(y){var m="",_=0;return zm.forEach(a,function(S){m+=y.slice(_,S[0]),_=S[1]}),m+=y.slice(_),m}}}function AJ(t){for(var e="",i=0;i<t.length;){var s=t.indexOf("<!--",i);if(s===-1){e+=t.slice(i);break}e+=t.slice(i,s);var a=t.indexOf("-->",s);if(a===-1)break;i=a+3}return e}function kJ(t){var e=t.split("");return e=e.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),e.join("")}ci.whiteList=wA();ci.getDefaultWhiteList=wA;ci.onTag=yJ;ci.onIgnoreTag=mJ;ci.onTagAttr=gJ;ci.onIgnoreTagAttr=vJ;ci.safeAttrValue=bJ;ci.escapeHtml=xA;ci.escapeQuote=SA;ci.unescapeQuote=$A;ci.escapeHtmlEntities=TA;ci.escapeDangerHtml5Entities=MA;ci.clearNonPrintableCharacter=EA;ci.friendlyAttrValue=IA;ci.escapeAttrValue=AA;ci.onIgnoreTagStripAll=EJ;ci.StripTagBody=IJ;ci.stripCommentTag=AJ;ci.stripBlankChar=kJ;ci.cssFilter=_A;ci.getDefaultCSSWhiteList=fJ;var tv={},Xa=V_;function OJ(t){var e=Xa.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Xa.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function PJ(t){return t.slice(0,2)==="</"}function CJ(t,e,i){var s="",a=0,d=!1,y=!1,m=0,_=t.length,S="",I="";t:for(m=0;m<_;m++){var A=t.charAt(m);if(d===!1){if(A==="<"){d=m;continue}}else if(y===!1){if(A==="<"){s+=i(t.slice(a,m)),d=m,a=m;continue}if(A===">"){s+=i(t.slice(a,d)),I=t.slice(d,m+1),S=OJ(I),s+=e(d,s.length,S,I,PJ(I)),a=m+1,d=!1;continue}if(A==='"'||A==="'")for(var P=1,L=t.charAt(m-P);L.trim()===""||L==="=";){if(L==="="){y=A;continue t}L=t.charAt(m-++P)}}else if(A===y){y=!1;continue}}return a<t.length&&(s+=i(t.substr(a))),s}var NJ=/[^a-zA-Z0-9\\_:.-]/gim;function LJ(t,e){var i=0,s=0,a=[],d=!1,y=t.length;function m(P,L){if(P=Xa.trim(P),P=P.replace(NJ,"").toLowerCase(),!(P.length<1)){var j=e(P,L||"");j&&a.push(j)}}for(var _=0;_<y;_++){var S=t.charAt(_),I,A;if(d===!1&&S==="="){d=t.slice(i,_),i=_+1,s=t.charAt(i)==='"'||t.charAt(i)==="'"?i:jJ(t,_+1);continue}if(d!==!1&&_===s){if(A=t.indexOf(S,_+1),A===-1)break;I=Xa.trim(t.slice(s+1,A)),m(d,I),d=!1,_=A,i=_+1;continue}if(/\s|\n|\t/.test(S))if(t=t.replace(/\s|\n|\t/g," "),d===!1)if(A=RJ(t,_),A===-1){I=Xa.trim(t.slice(i,_)),m(I),d=!1,i=_+1;continue}else{_=A-1;continue}else if(A=DJ(t,_-1),A===-1){I=Xa.trim(t.slice(i,_)),I=j7(I),m(d,I),d=!1,i=_+1;continue}else continue}return i<t.length&&(d===!1?m(t.slice(i)):m(d,j7(Xa.trim(t.slice(i))))),Xa.trim(a.join(" "))}function RJ(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function jJ(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function DJ(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function FJ(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function j7(t){return FJ(t)?t.substr(1,t.length-2):t}tv.parseTag=CJ;tv.parseAttr=LJ;var zJ=Cd.exports.FilterCSS,rn=ci,kA=tv,VJ=kA.parseTag,GJ=kA.parseAttr,vy=V_;function a1(t){return t==null}function UJ(t){var e=vy.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=vy.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=vy.trim(t.slice(0,-1))),{html:t,closing:i}}function qJ(t){var e={};for(var i in t)e[i]=t[i];return e}function BJ(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(s){return s.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function OA(t){t=qJ(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=rn.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=BJ(t.whiteList||t.allowList):t.whiteList=rn.whiteList,t.onTag=t.onTag||rn.onTag,t.onTagAttr=t.onTagAttr||rn.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||rn.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||rn.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||rn.safeAttrValue,t.escapeHtml=t.escapeHtml||rn.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new zJ(t.css))}OA.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,a=i.onTag,d=i.onIgnoreTag,y=i.onTagAttr,m=i.onIgnoreTagAttr,_=i.safeAttrValue,S=i.escapeHtml,I=e.cssFilter;i.stripBlankChar&&(t=rn.stripBlankChar(t)),i.allowCommentTag||(t=rn.stripCommentTag(t));var A=!1;i.stripIgnoreTagBody&&(A=rn.StripTagBody(i.stripIgnoreTagBody,d),d=A.onIgnoreTag);var P=VJ(t,function(L,j,F,V,J){var Q={sourcePosition:L,position:j,isClosing:J,isWhite:Object.prototype.hasOwnProperty.call(s,F)},Z=a(F,V,Q);if(!a1(Z))return Z;if(Q.isWhite){if(Q.isClosing)return"</"+F+">";var et=UJ(V),st=s[F],nt=GJ(et.html,function(pt,yt){var $t=vy.indexOf(st,pt)!==-1,Ot=y(F,pt,yt,$t);return a1(Ot)?$t?(yt=_(F,pt,yt,I),yt?pt+'="'+yt+'"':pt):(Ot=m(F,pt,yt,$t),a1(Ot)?void 0:Ot):Ot});return V="<"+F,nt&&(V+=" "+nt),et.closing&&(V+=" /"),V+=">",V}else return Z=d(F,V,Q),a1(Z)?S(V):Z},S);return A&&(P=A.remove(P)),P};var HJ=OA;(function(t,e){var i=ci,s=tv,a=HJ;function d(m,_){var S=new a(_);return S.process(m)}e=t.exports=d,e.filterXSS=d,e.FilterXSS=a,function(){for(var m in i)e[m]=i[m];for(var _ in s)e[_]=s[_]}();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=t.exports)})(Ph,Ph.exports);var WJ=function(){function t(e,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(d,y,m,_){return d==="a"&&y==="href"||(d==="img"||d==="source")&&y==="src"?s.sanitizeUrl(m):Ph.exports.safeAttrValue(d,y,m,_)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var a;e&&!i?a=e:e&&i?(a=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(d){d==="whiteList"?a.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,e.whiteList||{}]):a[d]=e[d]})):(a=Object.create(this.arcgisFilterOptions),a.whiteList=this.arcgisWhiteList),this.xssFilterOptions=a,this._xssFilter=new Ph.exports.FilterXSS(a)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var s=(i??{}).isProtocolRequired,a=s===void 0?!0:s,d=this._trim(e.substring(0,e.indexOf(":"))),y=e==="/",m=/^#/.test(e),_=d&&this.allowedProtocols.indexOf(d.toLowerCase())>-1;return y||m||_?Ph.exports.escapeAttrValue(e):!d&&!a?Ph.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,s,a){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,s,a):Ph.exports.safeAttrValue(e,i,s,a)},t.prototype.validate=function(e,i){i===void 0&&(i={});var s=this.sanitize(e,i);return{isValid:e===s,sanitized:s}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(s,a){return i.test(s)?s:"&#x".concat(Number(e.charCodeAt(a)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(s){Object.keys(s).forEach(function(a){Array.isArray(s[a])&&Array.isArray(i[a])?i[a]=i[a].concat(s[a]):i[a]=s[a]})}),i},t.prototype._iterateOverObject=function(e,i){var s=this;i===void 0&&(i={});try{var a=!1,d=void 0;if(Array.isArray(e))d=e.reduce(function(m,_){var S=s.validate(_,i);return S.isValid?m.concat([_]):(a=!0,m.concat([S.sanitized]))},[]);else if(iJ(e)){var y=Object.keys(e);d=y.reduce(function(m,_){var S=e[_],I=s.validate(S,i);return I.isValid?m[_]=S:(a=!0,m[_]=I.sanitized),m},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return a?d:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const ev=new Map;function PA(){ev.clear()}function JJ(t){return ev.get(t)}function KJ(t,e){ev.set(t,e)}function a2(t){ev.delete(t)}var cu,Hc,YJ=function(t){if("WebkitTransition"in t.style)cu="webkitTransitionEnd",Hc="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");cu="transitionend",Hc="animationend"}},CA=function(t){cu||YJ(t)},ZJ=function(t,e){return e===void 0&&(e=t+"-active"),function(i){CA(i);var s=!1,a=function(d){s||(s=!0,i.removeEventListener(cu,a),i.removeEventListener(Hc,a),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(cu,a),i.addEventListener(Hc,a),requestAnimationFrame(function(){i.classList.add(e)})}},XJ=function(t,e){return e===void 0&&(e=t+"-active"),function(i,s){CA(i);var a=!1,d=function(y){a||(a=!0,i.removeEventListener(cu,d),i.removeEventListener(Hc,d),s())};i.classList.add(t),i.addEventListener(cu,d),i.addEventListener(Hc,d),requestAnimationFrame(function(){i.classList.add(e)})}};const QJ=mt.getLogger("esri.widgets.support.widgetUtils");function tK(t){const e=_r.acquire();for(let s=0;s<arguments.length;s++){const a=arguments[s],d=typeof a;if(d==="string")e.push(a);else if(Array.isArray(a))e.push.apply(e,a);else if(d==="object")for(const y in a)a[y]&&e.push(y)}const i=e.join(" ");return _r.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(s=>{var a;PA();for(const d of s)(a=t.get(d.target))==null||a(d)}),i=(s,a,d)=>(t.has(s)&&QJ.error("Already observing element",s),t.set(s,a),e.observe(s,d),Xn(()=>{e.unobserve(s),t.delete(s)}));return(s,a,d)=>{let y=null;return It(()=>typeof s=="function"?s():s,m=>{y==null||y.remove(),m&&(y=i(m,a,d))},No)}})();function eK(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function ept(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function ipt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function rpt(t,e){return(t==="enter"?ZJ:XJ)(e)}const iK=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],rK=iK.reduce((t,e)=>(t[e]=[],t),{}),sK=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],NA=new WJ({whiteList:rK,onTagAttr:(t,e,i)=>{const s=`${e}="${i}"`;if(sK.includes(e))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function nK(t){return t==="Enter"||t===" "}const LA="http://www.w3.org/",iv=`${LA}2000/svg`,RA=`${LA}1999/xlink`;let D7=[],G_=(t,e)=>{let i={};return Object.keys(t).forEach(s=>{i[s]=t[s]}),e&&Object.keys(e).forEach(s=>{i[s]=e[s]}),i},U_=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),jA=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},oK=(t,e,i)=>{if(e.vnodeSelector!==""){for(let s=i;s<t.length;s++)if(U_(t[s],e))return s}return-1},l2=(t,e,i,s)=>{let a=t[e];if(a.vnodeSelector==="")return;let d=a.properties;if(!(d&&(d.key===void 0?d.bind:d.key))){for(let y=0;y<t.length;y++)if(y!==e){let m=t[y];if(U_(m,a))throw new Error(`${i.vnodeSelector} had a ${a.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},aK=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},$3=[],T3=!1,DA=t=>{(t.children||[]).forEach(DA),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},F7=()=>{T3=!1,$3.forEach(DA),$3.length=0},z7=t=>{$3.push(t),T3||(T3=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(F7,{timeout:16}):setTimeout(F7,16))},V7=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),z7(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),z7(t))},lK=(t,e,i)=>{if(!e)return;let s=i.eventHandlerInterceptor,a=Object.keys(e),d=a.length;for(let y=0;y<d;y++){let m=a[y],_=e[m];if(m==="className")throw new Error('Property "className" is not supported, use "class".');if(m==="class")M3(t,_,!0);else if(m==="classes"){let S=Object.keys(_),I=S.length;for(let A=0;A<I;A++){let P=S[A];_[P]&&t.classList.add(P)}}else if(m==="styles"){let S=Object.keys(_),I=S.length;for(let A=0;A<I;A++){let P=S[A],L=_[P];L&&(jA(L),i.styleApplyer(t,P,L))}}else if(m!=="key"&&_!=null){let S=typeof _;S==="function"?(m.lastIndexOf("on",0)===0&&(s&&(_=s(m,_,t,e)),m==="oninput"&&function(){let I=_;_=function(A){I.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),t[m]=_):i.namespace===iv?m==="href"?t.setAttributeNS(RA,m,_):t.setAttribute(m,_):S==="string"&&m!=="value"?m==="innerHTML"?t[m]=NA.sanitize(_):FA(t)&&m in t?t[m]=_:t.setAttribute(m,_):t[m]=_}}};function FA(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let Vm,hK=(t,e,i)=>{if(e)for(let s of e)vc(s,t,void 0,i)},zA=(t,e,i)=>{hK(t,e.children,i),e.text&&(t.textContent=e.text),lK(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},vc=(t,e,i,s)=>{let a,d=0,y=t.vnodeSelector,m=e.ownerDocument;if(y==="")a=t.domNode=m.createTextNode(t.text),i!==void 0?e.insertBefore(a,i):e.appendChild(a);else{for(let _=0;_<=y.length;++_){let S=y.charAt(_);if(_===y.length||S==="."||S==="#"){let I=y.charAt(d-1),A=y.slice(d,_);I==="."?a.classList.add(A):I==="#"?a.id=A:(A==="svg"&&(s=G_(s,{namespace:iv})),s.namespace!==void 0?a=t.domNode=m.createElementNS(s.namespace,A):(a=t.domNode=t.domNode||m.createElement(A),A==="input"&&t.properties&&t.properties.type!==void 0&&a.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(a,i):a.parentNode!==e&&e.appendChild(a)),d=_+1}}zA(a,t,s)}},M3=(t,e,i)=>{e&&e.split(" ").forEach(s=>{s&&t.classList.toggle(s,i)})},uK=(t,e,i,s)=>{if(!i)return;let a=!1,d=Object.keys(i),y=d.length;for(let m=0;m<y;m++){let _=d[m],S=i[_],I=e[_];if(_==="class")I!==S&&(M3(t,I,!1),M3(t,S,!0));else if(_==="classes"){let A=t.classList,P=Object.keys(S),L=P.length;for(let j=0;j<L;j++){let F=P[j],V=!!S[F];V!==!!I[F]&&(a=!0,V?A.add(F):A.remove(F))}}else if(_==="styles"){let A=Object.keys(S),P=A.length;for(let L=0;L<P;L++){let j=A[L],F=S[j];F!==I[j]&&(a=!0,F?(jA(F),s.styleApplyer(t,j,F)):s.styleApplyer(t,j,""))}}else if(S||typeof I!="string"||(S=""),_==="value"){let A=t[_];A!==S&&(t["oninput-value"]?A===t["oninput-value"]:S!==I)&&(t[_]=S,t["oninput-value"]=void 0),S!==I&&(a=!0)}else if(S!==I){let A=typeof S;A==="function"&&s.eventHandlerInterceptor||(s.namespace===iv?_==="href"?t.setAttributeNS(RA,_,S):t.setAttribute(_,S):A==="string"?_==="innerHTML"?t[_]=NA.sanitize(S):_==="role"&&S===""?t.removeAttribute(_):FA(t)&&_ in t?t[_]=S:t.setAttribute(_,S):t[_]!==S&&(t[_]=S),a=!0)}}return a},cK=(t,e,i,s,a)=>{if(i===s)return!1;s=s||D7;let d,y=(i=i||D7).length,m=s.length,_=0,S=0,I=!1;for(;S<m;){let A=_<y?i[_]:void 0,P=s[S];if(A!==void 0&&U_(A,P))I=Vm(A,P,a)||I,_++;else{let L=oK(i,P,_+1);if(L>=0){for(d=_;d<L;d++)V7(i[d]),l2(i,d,t,"removed");I=Vm(i[L],P,a)||I,_=L+1}else vc(P,e,_<y?i[_].domNode:void 0,a),aK(P),l2(s,S,t,"added")}S++}if(y>_)for(d=_;d<y;d++)V7(i[d]),l2(i,d,t,"removed");return I};Vm=(t,e,i)=>{let s=t.domNode,a=!1;if(t===e)return!1;let d=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let y=s.ownerDocument.createTextNode(e.text);return s.parentNode.replaceChild(y,s),e.domNode=y,a=!0,a}e.domNode=s}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=G_(i,{namespace:iv})),t.text!==e.text&&(d=!0,e.text===void 0?s.removeChild(s.firstChild):s.textContent=e.text),e.domNode=s,d=cK(e,s,t.children,e.children,i)||d,d=uK(s,t.properties,e.properties,i)||d,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[s,i,e.vnodeSelector,e.properties,e.children]);return d&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(s,e.properties,t.properties),a};let N0=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=t;t=i,Vm(s,i,e)},domNode:t.domNode});const pK={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Yu=t=>G_(pK,t),yl={create:(t,e)=>(e=Yu(e),vc(t,document.createElement("div"),void 0,e),N0(t,e)),append:(t,e,i)=>(i=Yu(i),vc(e,t,void 0,i),N0(e,i)),insertBefore:(t,e,i)=>(i=Yu(i),vc(e,t.parentNode,t,i),N0(e,i)),merge:(t,e,i)=>(i=Yu(i),e.domNode=t,zA(t,e,i),N0(e,i)),replace:(t,e,i)=>(i=Yu(i),vc(e,t.parentNode,t,i),t.parentNode.removeChild(t),N0(e,i))},VA,dK=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};VA=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let fK=(t,e)=>{let i=t;return e.forEach(s=>{i=i&&i.children?VA(i.children,a=>a.domNode===s):void 0}),i},yK=(t,e,i)=>{let s=function(a){i("domEvent",a);let d=e(),y=dK(a.currentTarget,d.domNode);y.reverse();let m,_=fK(d.getLastRender(),y);return t.scheduleRender(),_&&(m=_.properties[`on${a.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",a),m};return(a,d,y,m)=>s},G7=t=>{let e,i,s=Yu(t),a=s.performanceLogger,d=!0,y=!1,m=[],_=[],S=(A,P,L)=>{let j,F=()=>j;s.eventHandlerInterceptor=yK(e,F,a),j=A(P,L(),s),m.push(j),_.push(L)},I=()=>{if(i=void 0,d){d=!1,a("renderStart",void 0);for(let A=0;A<m.length;A++){let P=_[A]();a("rendered",void 0),m[A].update(P),a("patched",void 0)}a("renderDone",void 0),d=!0}};return e={renderNow:I,scheduleRender:()=>{i||y||(i=requestAnimationFrame(I))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,d=!0,e.scheduleRender()},append:(A,P)=>{S(yl.append,A,P)},insertBefore:(A,P)=>{S(yl.insertBefore,A,P)},merge:(A,P)=>{S(yl.merge,A,P)},replace:(A,P)=>{S(yl.replace,A,P)},detach:A=>{for(let P=0;P<_.length;P++)if(_[P]===A)return _.splice(P,1),m.splice(P,1)[0];throw new Error("renderFunction was not found")}},e},La=class extends Rt{constructor(){super(...arguments),this.items=new Vt,this._watchUpdatingTracking=new Ic,this._callbacks=new Map,this._projector=G7(),this._hiddenProjector=G7()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const s of i.added){const a=()=>s.render();this._callbacks.set(s,a),this._projector.append(this.surface,a)}for(const s of i.removed){const a=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(a.domNode),this._callbacks.delete(s)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,s=this._hiddenProjector;let a;const d=()=>(a=e.render(),a);s.append(i,d),s.renderNow();const y={left:0,top:0,right:0,bottom:0};if(a&&a.domNode){const m=a.domNode.getBoundingClientRect();y.left=m.left,y.top=m.top,y.right=m.right,y.bottom=m.bottom}for(s.detach(d);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(e,i){const s=this.computeBoundingRect(e),a=this.computeBoundingRect(i);return Math.max(s.left,a.left)<=Math.min(s.right,a.right)&&Math.max(s.top,a.top)<=Math.min(s.bottom,a.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(s=>s.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{i.save(),s.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};w([T({readOnly:!0})],La.prototype,"surface",void 0),w([T({readOnly:!0})],La.prototype,"items",void 0),w([T({readOnly:!0})],La.prototype,"needsRender",null),w([T({readOnly:!0})],La.prototype,"_watchUpdatingTracking",void 0),w([T({readOnly:!0})],La.prototype,"updating",null),La=w([W("esri.views.overlay.ViewOverlay")],La);const U7=La,h2=[0,0];function mK(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return h2[0]=i.left+((e==null?void 0:e.pageXOffset)??0),h2[1]=i.top+((e==null?void 0:e.pageYOffset)??0),h2}function q7(t){t&&(gA(t),t.parentNode&&t.parentNode.removeChild(t))}function gK(t){const e=document.createElement("div");return t.appendChild(e),e}const L0=16,l1=750,vK=512,bK=2,wK=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:L0,time:l1},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([It(()=>this.cursor,s=>{const{surface:a}=this;a&&a.setAttribute("data-cursor",s)}),It(()=>this.navigating,s=>{const{surface:a}=this;a&&a.setAttribute("data-navigating",s.toString())})])}initialize(){this.addHandles([It(()=>this.ui,(i,s)=>this._handleUIChange(i,s),xe),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Je(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),a=z_(i);if(a||typeof i!="string"||mt.getLogger(this).error("#container",`element with id '${i}' not found`),s===a)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(q7(this.root),this._set("root",null)),this.userContent&&(C7(this.userContent,s),q7(this.userContent),this._set("userContent",null))),!a)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);a.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",C7(a,d),a.appendChild(d),this._set("userContent",d);const y=document.createElement("div");y.className="esri-view-root",a.insertBefore(y,a.firstChild),this._set("root",y);const m=document.createElement("div");m.className="esri-view-surface",m.setAttribute("role","application"),m.tabIndex=0,y.appendChild(m),this._set("surface",m);const _=new U7;y.appendChild(_.surface),this._set("overlay",_),this.addHandles(It(()=>_.needsRender,S=>{S&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Rc({render:()=>{var I;return(I=this.overlay)==null?void 0:I.render()}}):this._overlayRenderTaskHandle=si(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",a),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,s,a){const d=this.position;return i-=d?d[0]:0,s-=d?d[1]:0,a?(a[0]=i,a[1]=s):a=[i,s],a}containerToPage(i,s,a){const d=this.position;return i+=d?d[0]:0,s+=d?d[1]:0,a?(a[0]=i,a[1]=s):a=[i,s],a}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(It(()=>this.root,a=>{i.container=a?gK(a):null},xe),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=L0,i.time=l1,this.addHandles([(()=>{const s=()=>{i.freq=L0,i.time=l1};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),Rc({prepare:s=>{const a=this._measure(),d=this._freqInfo;if(d.time+=s.deltaTime,a&&(d.freq=L0,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const y=this._position();d.freq=y||a?L0:Math.min(l1,d.freq*bK),!a&&d.freq>=vK&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,a=i?i.clientHeight:0;if(s===0||a===0)return this.suspended||this._set("suspended",!0),!1;const d=this.width,y=this.height;return s===d&&a===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",a),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:d,oldHeight:y,width:s,height:a}),!0)}_position(){const i=this.container,s=this.position,a=i&&mK(i);return!!a&&(!s||a[0]!==s[0]||a[1]!==s[1])&&(this._set("position",[a[0],a[1]]),!0)}forceDOMReadyCycle(){}};return w([T()],e.prototype,"container",null),w([T({readOnly:!0})],e.prototype,"focused",null),w([T({readOnly:!0})],e.prototype,"height",void 0),w([T({type:U7})],e.prototype,"overlay",void 0),w([T({readOnly:!0})],e.prototype,"position",void 0),w([T({readOnly:!0})],e.prototype,"resizing",void 0),w([T({readOnly:!0})],e.prototype,"root",void 0),w([T({value:null,readOnly:!0})],e.prototype,"size",null),w([T({readOnly:!0})],e.prototype,"surface",void 0),w([T({readOnly:!0})],e.prototype,"suspended",void 0),w([T()],e.prototype,"ui",void 0),w([T({readOnly:!0})],e.prototype,"userContent",void 0),w([T({readOnly:!0})],e.prototype,"width",void 0),w([T()],e.prototype,"widthBreakpoint",void 0),e=w([W("esri.views.DOMContainer")],e),e};let _K=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in e){const a=e[s],d=new u$(a,void 0,void 0,2,2);this._properties[s]={pool:d,acquired:[]}}this._afterDispatchHandle=BL(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const s of i.acquired)K4(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),s=this._properties[e];let a=s.pool.acquire();for(s.acquired.push(a);a===i;)s.acquired.push(a),a=s.pool.acquire();return a}_release(){for(const e in this._properties){const i=this._properties[e];let s=0;for(const a of i.acquired)K4(a)?i.acquired[s++]=a:i.pool.release(a);i.acquired.length=s}}};const xK=at("mac")?"Meta":"Ctrl",rv={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)rv[t]=String.fromCharCode(t);for(let t=1;t<25;t++)rv[111+t]=`F${t}`;for(let t=65;t<91;t++)rv[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function SK(t){if(t.key!==void 0)return p$(t);const e=rv[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function $K(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let TK=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}};const B7=mt.getLogger("esri.views.input.InputHandler");let zi=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?B7.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,s){let a;typeof i=="function"?(s=i,a=[]):a=i||[];const d=typeof e=="string"?new TK(e,a):e,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},m=I=>{const A=this._incoming[I.match.eventType];if(A){const P=A.indexOf(I);A.splice(P,1),y(),this._manager&&this._manager.updateDependencies()}},_=new MK(d,s,{onPause:m,onRemove:m,onResume:I=>{const A=this._incoming[I.match.eventType];A&&!A.includes(I)&&(A.push(I),y(),this._manager&&this._manager.updateDependencies())}});let S=this._incoming[d.eventType];return S||(S=[],this._incoming[d.eventType]=S),S.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new EK(e,{onEmit:(s,a,d,y)=>{var m;(m=this._manager)==null||m.emit(s.eventType,a,d,y)},onRemove:s=>{var a;delete this._outgoing[s.eventType],(a=this._manager)==null||a.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):B7.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var s;const i=this._incoming[e.type];if(i){for(const a of i)if(a.match.matches(e)&&((s=a.callback)==null||s.call(a,e),e.shouldStopPropagation()))break}}},MK=class{constructor(e,i,s){this.match=e,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},EK=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,s){this._removed||this._handler.onEmit(this,e,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},IK=class extends zi{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:a}=e;i===this._value&&this._x===s&&this._y===a||(this._value=i,this._x=s,this._y=a,this._onChange(i,s,a))}},AK=class{constructor(e,i){this._observable=new Pg,this._value=e,this._equalityFunction=i}get value(){return Wt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Gm(t,e=W8){return new AK(t,e)}let kK=class extends zi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Gm(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},fs=class extends Rt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=xK,this._latestPointerType="mouse",this._propertiesPool=new _K({latestPointerLocation:CK},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,s=vl.INTERNAL){if(this._nameToGroup[e])return void mt.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void mt.getLogger(this).error("Can't register a group of zero handlers");const a={name:e,handlers:i.map(d=>({handler:d,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=a;for(let d=a.handlers.length-1;d>=0;d--){const y=a.handlers[d];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(m,_,S,I,A)=>{this._emitInputEvent(y.priorityIndex+1,m,_,S,A,I)},setPointerCapture:(m,_)=>{this._setPointerCapture(a,y,m,_)},setEventCallback:m=>{y.eventCallback=m},setUninstallCallback:m=>{y.uninstallCallback=m},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(s=>{var a;s.removed=!0,(a=s.uninstallCallback)==null||a.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):mt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const a=this._handlers[s];a.priorityIndex=s,this._handlersPriority.push(a)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const a=this._handlersPriority[s];a.priorityIndex=s;let d=a.handler.hasSideEffects;if(!d){for(const y of a.handler.outgoingEventTypes)if(e.has(y)){d=!0;break}}if(d)for(const y of a.handler.incomingEventMatches){e.add(y.eventType);for(const m of y.keyModifiers)$K(m)||i.add(m)}a.active=d}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,s){this._latestPointerType=e;const a=this._get("latestPointerLocation");if(a==null||a.x!==i||a.y!==s){const d=this._propertiesPool.get("latestPointerLocation");d.x=i,d.y=s,this._set("latestPointerLocation",d)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const d=i;this._pointerCaptures.delete(d.native.pointerId)}this._updateKeyModifiers(e,i);const s=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,a=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,s,a)}_updateKeyModifiers(e,i){if(!i)return;let s=!1;const a=()=>{if(!s){const m=new Set;this._activeKeyModifiers.forEach(_=>{m.add(_)}),this._activeKeyModifiers=m,s=!0}},d=(m,_)=>{_&&!this._activeKeyModifiers.has(m)?(a(),this._activeKeyModifiers.add(m)):!_&&this._activeKeyModifiers.has(m)&&(a(),this._activeKeyModifiers.delete(m))};if(e==="key-down"||e==="key-up"){const m=i.key;this._keyModifiers.has(m)&&d(m,e==="key-down")}const y=i.native;d("Alt",!(!y||!y.altKey)),d("Ctrl",!(!y||!y.ctrlKey)),d("Shift",!(!y||!y.shiftKey)),d("Meta",!(!y||!y.metaKey)),d("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new IK((e,i,s)=>this._setLatestPointer(e,i,s)),this._multiTouchHandler=new kK,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],vl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,vl.INTERNAL)}_setPointerCapture(e,i,s,a){const d=e.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,y),a?(y.add(d),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):y.has(d)&&(y.delete(d),y.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,s,a){this._emitInputEvent(0,e,i,s,a)}_emitInputEvent(e,i,s,a,d,y){const m=a!==void 0?a:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_=d!==void 0&&d,S={event:new OK(i,s,m,y||this._activeKeyModifiers,_),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(S):this._doNewPropagation(S)}_doNewPropagation(e){this._currentPropagation={events:new Nm,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,s;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:a,priorityIndex:d}=e.events.pop(),y=a.data&&a.data.eventId;if(!(y!=null&&this._stoppedPropagationEventIds.has(y)))for(e.currentHandler=this._handlersPriority[d];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!a.shouldStopPropagation()&&((s=(i=e.currentHandler).eventCallback)==null||s.call(i,a)),a.shouldStopPropagation()){y!=null&&this._stoppedPropagationEventIds.add(y);break}if(a.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:a,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new Nm;i.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)i.push(s.events.pop());s.events=i,s.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const a of i.handler.incomingEventMatches){if(s.eventType!==a.eventType)continue;const d=s.keyModifiers.filter(y=>a.keyModifiers.includes(y));if(d.length===s.keyModifiers.length!=(d.length===a.keyModifiers.length))return s.keyModifiers.length>a.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const s of e){let a=0;for(;a<i.length&&this._compareHandlerPriority(s,i[a])>=0;)a++;i.splice(a,0,s)}return i}get debug(){const e=i=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=s};return{injectEvent:(i,s)=>{e(()=>{this._onEventReceived(i,s)})},disablePointerCapture:e}}};w([T({readOnly:!0})],fs.prototype,"hasPendingInputs",null),w([T({constructOnly:!0})],fs.prototype,"eventSource",void 0),w([T({constructOnly:!0})],fs.prototype,"recognizers",void 0),w([T()],fs.prototype,"_latestPointerType",void 0),w([T()],fs.prototype,"latestPointerType",null),w([T()],fs.prototype,"multiTouchActive",null),w([T({readOnly:!0})],fs.prototype,"latestPointerLocation",void 0),w([T()],fs.prototype,"_paused",void 0),w([T({readOnly:!0})],fs.prototype,"updating",null),fs=w([W("esri.views.input.InputManager")],fs);let OK=class{constructor(e,i,s,a,d){this.type=e,this.data=i,this.timestamp=s,this.modifiers=a,this.cancelable=d,this._propagationState=Qa.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Qa.STOPPED}shouldStopPropagation(){return(this._propagationState&Qa.STOPPED)!=0}async(e){this._propagationState|=Qa.PAUSED;const i=(s,a)=>{this._propagationState&=~Qa.PAUSED;const d=this._resumeCallback;if(this._resumeCallback=null,d&&d(),a)throw s;return s};return(typeof e=="function"?e():e).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&Qa.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Qa;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Qa||(Qa={}));const vl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let PK=class{};const CK=PK;function In(t){return t!=null&&"open"in t&&"declaredClass"in t}function H7(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const NK=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([It(()=>[this.ui,this.popup],([i,s],a)=>{const d="popup",y="manual";if(a){const[m,_]=a;m&&In(_)&&(_.view=null,H7(_)&&m.remove(_,d))}i&&In(s)&&(s.view=this,H7(s)&&i.add(s,{key:d,position:y,internal:!0}))},xe),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!In(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(In(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),In(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},vl.WIDGET)]),k_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{bt(()=>import("./Popup-d3b120e4.js").then(i=>i.a0),["assets/Popup-d3b120e4.js","assets/throttle-7bf02de9.js","assets/AttachmentInfo-6d63923d.js","assets/symbolUtils-6f4d9391.js","assets/utils-3f44cbf2.js","assets/utils-a941d33c.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/devEnvironmentUtils-5002a058.js","assets/RelationshipQuery-d43a5602.js","assets/TopFeaturesQuery-d9df3d33.js","assets/FeatureLayer-90942b2f.js","assets/FeatureLayerBase-88b29b5b.js","assets/featureLayerUtils-71d00558.js","assets/editsZScale-f46e6921.js","assets/EditBusLayer-244198d8.js","assets/FeatureEffectLayer-74d758a7.js","assets/FeatureEffect-92c7e9d5.js","assets/FeatureReductionLayer-745a30db.js","assets/clusterUtils-5ded844a.js","assets/OrderedLayer-e038abc4.js","assets/fieldProperties-1ad3ab72.js","assets/styleUtils-60111c84.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){In(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void mt.getLogger(this).error(new lt("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),In(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,s){await this.when();const{location:a,queryArea:d,layerViewsAndGraphics:y,clientOnlyGraphics:m}=await this._prepareFetchPopupFeatures(i,s),_=Promise.resolve(m),S=this._queryLayerPopupFeatures(d,y,s),I=S.map(A=>A.promise);return{location:a,clientOnlyGraphics:m,allGraphicsPromise:IL([_,...I]).then(A=>Array.from(new Set(A.flat()))),promisesPerLayerView:S}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!In(this.popup))return this._popupSetupTask=x5(async s=>{const{default:a}=await bt(()=>import("./Popup-d3b120e4.js").then(y=>y.a0),["assets/Popup-d3b120e4.js","assets/throttle-7bf02de9.js","assets/AttachmentInfo-6d63923d.js","assets/symbolUtils-6f4d9391.js","assets/utils-3f44cbf2.js","assets/utils-a941d33c.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/devEnvironmentUtils-5002a058.js","assets/RelationshipQuery-d43a5602.js","assets/TopFeaturesQuery-d9df3d33.js","assets/FeatureLayer-90942b2f.js","assets/FeatureLayerBase-88b29b5b.js","assets/featureLayerUtils-71d00558.js","assets/editsZScale-f46e6921.js","assets/EditBusLayer-244198d8.js","assets/FeatureEffectLayer-74d758a7.js","assets/FeatureEffect-92c7e9d5.js","assets/FeatureReductionLayer-745a30db.js","assets/clusterUtils-5ded844a.js","assets/OrderedLayer-e038abc4.js","assets/fieldProperties-1ad3ab72.js","assets/styleUtils-60111c84.js"]);if(Ke(s),!this.popup||In(this.popup))return;const d=this.popup;delete d.open,delete d.close,this.popup=new a(d)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,s,a){return s.map(({layerView:d,graphics:y})=>{const m={clientGraphics:y,event:a!=null?a.event:void 0,signal:a!=null?a.signal:void 0,defaultPopupTemplateEnabled:a!=null&&!!a.defaultPopupTemplateEnabled},_=d.fetchPopupFeatures(i,m);return{layerView:d,promise:_}})}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s!=null&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,s){const{clientGraphics:a,queryArea:d,location:y}=await this._popupHitTestGraphics(i,s),m=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:_,clientOnlyGraphics:S}=this._graphicsPerFetchPopupLayerView(a,m);return{clientOnlyGraphics:S,layerViewsAndGraphics:_,queryArea:d,location:y}}async _popupHitTestGraphics(i,s){const a=await this.popupHitTest(i),d=a.results,y=a.mapPoint,m=d.filter(S=>S.type==="graphic"&&this._isValidPopupGraphic(S.graphic,s)),_=m.length?m[0].mapPoint:null;return{clientGraphics:m.map(S=>S.graphic),queryArea:y,location:y||_}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&i.push(s)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,s){const a=[],d=new Map,y=s.map(m=>{const _=[];return"layer"in m?d.set(m.layer,_):d.set(m.graphics,_),{layerView:m,graphics:_}});for(const m of i){const _=d.get(m.layer)||d.get(m.sourceLayer)||null;_?_.push(m):a.push(m)}return{layerViewsAndGraphics:y,clientOnlyGraphics:a}}};return w([T({cast(i){return!i||In(i)||typeof i=="object"&&(i.open=s=>(um(mt.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(s)),i.close=()=>(um(mt.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),w([T()],e.prototype,"popupEnabled",void 0),e=w([W("esri.views.PopupView")],e),e},W7={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},LK={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function RK(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function Jh(t,e,i){const s=new Date(t.getTime());if(e&&i){const a=LK[i],{getter:d,setter:y,multiplier:m}=a;if(i==="months"){const _=RK(s.getFullYear(),s.getMonth()+e);s.getDate()>_&&s.setDate(_)}s[y](s[d]()+e*m)}return s}function J7(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function jK(t,e,i){return t===0?0:t*W7[e]/W7[i]}var Hs;let Hr=Hs=class extends gt{static get allTime(){return K7}static get empty(){return DK}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(Hs.allTime)}get isEmpty(){return this.equals(Hs.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new Hs({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,s=t.start!=null?t.start.getTime():t.start,a=t.end!=null?t.end.getTime():t.end;return e===s&&i===a}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=jh(this.start,s=>J7(s,t)),i=jh(this.end,s=>{const a=J7(s,t);return s.getTime()===a.getTime()?a:Jh(a,1,t)});return new Hs({start:e,end:i})}intersection(t){var m,_,S,I;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Hs.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((m=this.start)==null?void 0:m.getTime())??-1/0,i=((_=this.end)==null?void 0:_.getTime())??1/0,s=((S=t.start)==null?void 0:S.getTime())??-1/0,a=((I=t.end)==null?void 0:I.getTime())??1/0;let d,y;if(s>=e&&s<=i?d=s:e>=s&&e<=a&&(d=e),i>=s&&i<=a?y=i:a>=e&&a<=i&&(y=a),d!=null&&y!=null&&!isNaN(d)&&!isNaN(y)){const A=new Hs;return A.start=d===-1/0?null:new Date(d),A.end=y===1/0?null:new Date(y),A}return Hs.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Hs,{start:s,end:a}=this;return s!=null&&(i.start=Jh(s,t,e)),a!=null&&(i.end=Jh(a,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return K7.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Hs({start:e,end:i})}};w([T({type:Date,json:{write:{allowNull:!0}}})],Hr.prototype,"end",void 0),w([kt("end")],Hr.prototype,"readEnd",null),w([At("end")],Hr.prototype,"writeEnd",null),w([T({readOnly:!0,json:{read:!1}})],Hr.prototype,"isAllTime",null),w([T({readOnly:!0,json:{read:!1}})],Hr.prototype,"isEmpty",null),w([T({type:Date,json:{write:{allowNull:!0}}})],Hr.prototype,"start",void 0),w([kt("start")],Hr.prototype,"readStart",null),w([At("start")],Hr.prototype,"writeStart",null),Hr=Hs=w([W("esri.TimeExtent")],Hr);const K7=new Hr,DK=new Hr({start:void 0,end:void 0}),oo=Hr,jl=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Qo,this._updatingHandles=new Ic}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return w([T({readOnly:!0})],e.prototype,"handles",null),w([T({readOnly:!0})],e.prototype,"updatingHandles",null),e=w([W("esri.core.HandleOwner")],e),e};let Um=class extends jl(Rt){};Um=w([W("esri.core.HandleOwner")],Um);let rd=class extends jl(Vt){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Vt.ofType(this.itemType.Type))(e):new Vt(e)}};function Y7(t,e){return{type:t,cast:q$,set(i){const s=Qh(i,this._get(e),t);s.owner=this,this._set(e,s)}}}w([T()],rd.prototype,"owner",null),rd=w([W("esri.core.support.OwningCollection")],rd);var mp;const qm=dr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),GA=qm.jsonValues.slice();HN(GA,"orthometric");const sd=dr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ws=mp=class extends gt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return qm.write(t,e,i)}readHeightModel(t,e,i){return qm.read(t)||(i&&i.messages&&i.messages.push(FK(t,{context:i})),null)}readHeightUnit(t,e,i){return sd.read(t)||(i&&i.messages&&i.messages.push(Z7(t,{context:i})),null)}readHeightUnitService(t,e,i){return yT(t)||sd.read(t)||(i&&i.messages&&i.messages.push(Z7(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new mp({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Zj(e);return new mp({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new mp;return e.read(t,{origin:"web-scene"}),e}};function Z7(t,e){return new gn("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function FK(t,e){return new gn("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}w([T({type:qm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:GA,default:"ellipsoidal"}}}})],Ws.prototype,"heightModel",void 0),w([At("web-scene","heightModel")],Ws.prototype,"writeHeightModel",null),w([kt(["web-scene","service"],"heightModel")],Ws.prototype,"readHeightModel",null),w([T({type:sd.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:sd.jsonValues,write:sd.write}}}})],Ws.prototype,"heightUnit",void 0),w([kt("web-scene","heightUnit")],Ws.prototype,"readHeightUnit",null),w([kt("service","heightUnit")],Ws.prototype,"readHeightUnitService",null),w([T({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ws.prototype,"vertCRS",void 0),w([kt("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ws.prototype,"readVertCRS",null),Ws=mp=w([W("esri.geometry.HeightModelInfo")],Ws);const q_=Ws;let Bm=class extends rd{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(mt.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Bm=w([W("esri.support.AnalysesCollection")],Bm);let nd=class extends rd{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};w([G$({Type:io,ensureType:ki(io)})],nd.prototype,"itemType",void 0),nd=w([W("esri.support.GraphicsCollection")],nd);const X7=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function zK(t,e="system"){if(!t||!X7.has(t.timeZone))return e;const i=X7.get(t.timeZone);return GK(t.timeZone)||t.respectsDaylightSaving?i:VK(i)}function VK(t){const e=re.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${pr.instance(-i).formatOffset(0,"narrow")}`}function GK(t){return t.startsWith("UTC")}let Ra=class extends _i(gt){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:s,respectsDaylightSaving:a}=i;return{timeZone:s,respectsDaylightSaving:a}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:zK(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};w([T()],Ra.prototype,"legacy",void 0),w([kt("legacy",["timeZone"])],Ra.prototype,"readLegacy",null),w([T({type:String,nonNullable:!0})],Ra.prototype,"timeZone",void 0),w([kt("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Ra.prototype,"readTimeZone",null),w([At("timeZone")],Ra.prototype,"writeTimeZone",null),Ra=w([W("esri.time.TimeReference")],Ra);const Nd=Ra;let ja=class extends Rt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Vt,this.referenceLayerViews=new Vt,this._loadingHandle=It(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap},i=>{i&&i.load().catch(()=>{})},xe)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,s;if(this.view&&this.view.suspended)return!1;const e=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(a=>a.updating)||this.referenceLayerViews.some(a=>a.updating))}};w([T({constructOnly:!0})],ja.prototype,"view",void 0),w([T({readOnly:!0})],ja.prototype,"baseLayerViews",void 0),w([T({readOnly:!0})],ja.prototype,"referenceLayerViews",void 0),w([T({readOnly:!0})],ja.prototype,"suspended",null),w([T({type:Boolean,readOnly:!0})],ja.prototype,"updating",null),ja=w([W("esri.views.BasemapView")],ja);function UK(t){return"tryRecycleWith"in t}let qK=class{constructor(e,i,s){this.layer=e,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=mn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Xr(this._controller.signal,()=>{const a=new lt("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(a)})}tryRecycle(e){if(!this.done||!this.layerView||!UK(this.layerView))return null;const i=this.layer.type,s=this._controller.signal;for(let a=0;a<e.length;a++){const d=e[a];if(d.type!==i)continue;const y=this.layerView.tryRecycleWith(d,{signal:s});if(y){e.splice(a,1),this.layer=d;const m=this.layerView,_=m.view;return this.promise=Promise.race([y.then(()=>(Ke(this._controller.signal),d.emit("layerview-destroy",{view:_,layerView:m}),_.emit("layerview-destroy",{view:_,layerView:m}),d.emit("layerview-create",{view:_,layerView:m}),_.emit("layerview-create",{view:_,layerView:m}),m)),new Promise((S,I)=>Xr(this._controller.signal,()=>I(ei())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:e}),s.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var a,d,y;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:s}=this;this._map=s.map;try{let m,_;if(await i.load({signal:e}),"prefetchResources"in i&&await((a=i.prefetchResources)==null?void 0:a.call(i,{signal:e})),HK(i))m=await i.createLayerView(s,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new lt("layer:view-not-supported","No layerview implementation was found");const A=await this.layerViewImporter.importLayerView(i);Ke(e),m="default"in A?new A.default({layer:i,view:s}):new A({layer:i,view:s})}const S=()=>{_=si(_),m.destroyed||m.destroy(),m.layer=null,m.parent=null,m.view=null,this.done=!0};_=Xr(e,S),Ke(e);try{await m.when()}catch(A){throw S(),A}if(!((y=(d=this._map)==null?void 0:d.allLayers)==null?void 0:y.includes(i)))return S(),void this._deferred.reject(new lt("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=m,i.emit("layerview-create",{view:s,layerView:m}),s.emit("layerview-create",{layer:i,layerView:m}),this.done=!0,this._deferred.resolve(m)}catch(m){i.emit("layerview-create-error",{view:s,error:m}),s.emit("layerview-create-error",{layer:i,error:m}),this.done=!0,this._deferred.reject(new lt("layerview:create-error","layerview creation failed",{layer:i,error:m}))}}},ys=class extends Rt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Ic,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var s;const i=(s=this.view.map)==null?void 0:s.allLayers;if(i)for(const a of i)this.layerViewImporter.hasLayerViewModule(a)&&this.layerViewImporter.importLayerView(a)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=mn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Xc(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var _,S,I;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const s=new Set,a=[],d=this.view.ready,y=A=>{if(A!=null){for(const P of A)if(P){s.add(P);const L=this._layerLayerViewInfoMap.get(P);L&&d?L.start():L||this._recyclingInfoMap.has(P)||a.push(P),"layers"in P&&P.layers&&y(P.layers)}}};for(const A of this._rootCollectionNames)y(this.get(A));for(const[A,P]of this._layerLayerViewInfoMap)if(!s.has(A)){this._layerLayerViewInfoMap.delete(P.layer);const L=P.tryRecycle(a);L?(this.notifyChange("updating"),this._recyclingInfoMap.set(P.layer,P),L.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),this._layerLayerViewInfoMap.set(P.layer,P),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),P.destroy(),this._reschedule()})):P.destroy()}for(const[A,P]of this._recyclingInfoMap)s.has(A)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),P.destroy());for(const A of a)this._createLayerView(A);this._refreshCollections();const m=[(_=i==null?void 0:i.ground)==null?void 0:_.layers,(S=i==null?void 0:i.basemap)==null?void 0:S.baseLayers,(I=i==null?void 0:i.basemap)==null?void 0:I.referenceLayers,i==null?void 0:i.layers].filter(A=>!!A);s.forEach(A=>"layers"in A&&m.push(A.layers)),this.addHandles(m.map(A=>this._watchUpdatingTracking.addOnCollectionChange(()=>A,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([qc(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),It(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),No)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Gv(this._recyclingInfoMap),Gv(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(ei()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Ag(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(Gv(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new lt("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,s){if(!e||!i)return void(i&&i.removeAll());let a=0;for(const d of e){const y=this._layerLayerViewInfoMap.get(d);if(!y||!y.layerView)continue;const m=y.layerView;m.layer=d,m.parent=s,i.at(a)!==m&&i.splice(a,0,m),d.layers&&this._populateLayerViewsOwners(d.layers,m.layerViews,m),a+=1}a<i.length&&i.splice(a,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new qK(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),s=>{s&&(Qi(s)||s.name==="cancelled:layerview-create")||mt.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:s}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};w([T()],ys.prototype,"_workPromise",void 0),w([T({readOnly:!0})],ys.prototype,"_watchUpdatingTracking",void 0),w([T({readOnly:!0})],ys.prototype,"_layersToLayerViews",null),w([T({readOnly:!0})],ys.prototype,"_rootCollectionNames",null),w([T()],ys.prototype,"layerViewImporter",void 0),w([T()],ys.prototype,"supportsGround",void 0),w([T({readOnly:!0})],ys.prototype,"updating",null),w([T({readOnly:!0})],ys.prototype,"updatingRemaining",null),w([T({constructOnly:!0})],ys.prototype,"view",void 0),ys=w([W("esri.views.LayerViewManager")],ys);const BK=ys;function HK(t){return"createLayerView"in t&&t.createLayerView!=null}let Fr=class extends Rt{constructor(e){super(e),this.factor=1.5,this.offset=Sr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};w([T({type:Number})],Fr.prototype,"factor",void 0),w([T({nonNullable:!0})],Fr.prototype,"offset",void 0),w([T()],Fr.prototype,"position",void 0),w([T({type:Number,range:{min:0}})],Fr.prototype,"size",void 0),w([T()],Fr.prototype,"maskUrl",void 0),w([T()],Fr.prototype,"maskEnabled",void 0),w([T()],Fr.prototype,"overlayUrl",void 0),w([T()],Fr.prototype,"overlayEnabled",void 0),w([T({readOnly:!0})],Fr.prototype,"version",null),w([T({type:Boolean})],Fr.prototype,"visible",void 0),Fr=w([W("esri.views.Magnifier")],Fr);const UA=Fr;let WK=class{constructor(){this._tasks=new Array,this._running=Gm(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,s){return this._running.value=!0,new Promise((a,d)=>this._tasks.push(new Q7(a,d,e,i,s)))}unshift(e,i,s){return this._running.value=!0,new Promise((a,d)=>this._tasks.unshift(new Q7(a,d,e,i,s)))}_process(e){var s;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const a=Ms(i.signal);if(a&&!i.abortCallback)i.reject(ei());else{const d=a?(s=i.abortCallback)==null?void 0:s.call(i,ei()):i.callback(e);ta(d)?d.then(i.resolve,i.reject):i.resolve(d)}}catch(a){i.reject(a)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=ei();for(const i of this._tasks)if(i.abortCallback){const s=i.abortCallback(e);i.resolve(s)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},Q7=class{constructor(e,i,s,a=void 0,d=void 0){this.resolve=e,this.reject=i,this.callback=s,this.signal=a,this.abortCallback=d}},gp=class extends Rt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};w([T()],gp.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),w([T()],gp.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),gp=w([W("esri.views.support.DebugFlags")],gp);const JK=new gp;var qr;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(qr||(qr={}));var E3,ne;(function(t){t[t.YIELD=1]="YIELD"})(E3||(E3={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(ne||(ne={}));const qn=0,tx=new Map([[ne.RESOURCE_CONTROLLER_IMMEDIATE,qn],[ne.RESOURCE_CONTROLLER,4],[ne.SLIDE,qn],[ne.STREAM_DATA_LOADER,qn],[ne.ELEVATION_QUERY,qn],[ne.TERRAIN_SURFACE,1],[ne.SURFACE_GEOMETRY_UPDATES,1],[ne.LOD_RENDERER,2],[ne.GRAPHICS_CORE,2],[ne.I3S_CONTROLLER,2],[ne.POINT_CLOUD_LAYER,2],[ne.FEATURE_TILE_FETCHER,2],[ne.OVERLAY,4],[ne.STAGE,4],[ne.GRAPHICS_DECONFLICTOR,4],[ne.FILTER_VISIBILITY,4],[ne.SCALE_VISIBILITY,4],[ne.FRUSTUM_VISIBILITY,4],[ne.CLOUDS_GENERATOR,4],[ne.POINT_OF_INTEREST_FREQUENT,6],[ne.POINT_OF_INTEREST_INFREQUENT,30],[ne.LABELER,8],[ne.FEATURE_QUERY_ENGINE,8],[ne.FEATURE_TILE_TREE,16],[ne.FEATURE_TILE_TREE_ACTIVE,qn],[ne.ELEVATION_ALIGNMENT,12],[ne.TEXT_TEXTURE_ATLAS,12],[ne.TEXTURE_UNLOAD,12],[ne.LINE_OF_SIGHT_TOOL,16],[ne.LINE_OF_SIGHT_TOOL_INTERACTIVE,qn],[ne.SNAPPING,qn],[ne.SHADOW_ACCUMULATOR,30]]);function ex(t){return tx.has(t)?tx.get(t):typeof t=="number"?t:1}const ix=6.5,rx=1,KK=30,sx=1e3/30,nx=100,ox=.9;var I3,Vl;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(d=>d.needsUpdate)}constructor(){this._updating=Gm(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Gp("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new s,this._state=qr.INTERACTING,this._tasks=new gl,this._runQueue=new gl,this._load=0,this._idleStateCallbacks=new gl,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=It(()=>JK.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,xe);for(const y of Object.keys(ne))this.performanceInfo.tasks.set(ne[y],new Gp(ne[y]));const d=this;this._test={FRAME_SAFETY_BUDGET:ix,INTERACTING_BUDGET:sx,IDLE_BUDGET:nx,get availableBudget(){return d._budget.budget},usedBudget:0,getBudget:()=>d._budget,setBudget:y=>d._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(d=>d.remove()),this._tasks.clear(),si(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(d){this._updatingChanged(),d&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(d,y){const m=ex(d),_=new i(this,d,y,m);return this._tasks.push(_),this._updatingChanged(),this.performanceInfo.tasks.has(d)||this.performanceInfo.tasks.set(d,new Gp(d)),_}registerIdleStateCallbacks(d,y){const m={idleBegin:d,idleEnd:y};this._idleStateCallbacks.push(m),this.state===qr.IDLE&&this._idleUpdatesStartFired&&m.idleBegin();const _=this;return{remove:()=>this._removeIdleStateCallbacks(m),set idleBegin(S){_._idleUpdatesStartFired&&(m.idleEnd(),_._state===qr.IDLE&&S()),m.idleBegin=S},set idleEnd(S){m.idleEnd=S}}}get load(){return this._load}set state(d){this._state!==d&&(this._state=d,this.state!==qr.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}updateBudget(d){this._test.usedBudget=0,++this._frameNumber;let y=ix,m=d.frameDuration,_=rx;switch(this.state){case qr.IDLE:y=0,m=Math.max(nx,d.frameDuration),_=KK;break;case qr.INTERACTING:m=Math.max(sx,d.frameDuration);case qr.ANIMATING:}return m=m-d.elapsedFrameTime-y,this.state!==qr.IDLE&&m<rx&&!this._forceTask?(this._forceTask=!0,!1):(m=Math.max(m,_),this._budget.reset(m,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case qr.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(d=>d.idleBegin())),this._runIdle();break;case qr.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(d){this._idleUpdatesStartFired&&d.idleEnd(),this._idleStateCallbacks.removeUnordered(d)}removeTask(d){this._tasks.removeUnordered(d),this._runQueue.removeUnordered(d),this._updatingChanged()}_updateTask(d){this._tasks.forAll(y=>{y.name===d&&y.setPriority(d)})}_getState(d){if(this._runQueue.some(m=>m.name===d))return Vl.SCHEDULED;let y=Vl.IDLE;return this._tasks.forAll(m=>{m.name===d&&m.needsUpdate&&(m.schedulePriority<=1?y=Vl.READY:y!==Vl.READY&&(y=Vl.WAITING))}),y}_getRuntime(d){let y=0;return this._tasks.forAll(m=>{m.name===d&&(y+=m.runtime)}),y}_resetRuntimes(){this._tasks.forAll(d=>d.runtime=0)}_getRunning(){const d=new Map;if(this._tasks.forAll(m=>{m.needsUpdate&&d.set(m.name,(d.get(m.name)||0)+1)}),d.size===0)return null;let y="";return d.forEach((m,_)=>{y+=m>1?` ${m}x ${_}`:` ${_}`}),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const d=this._tasks.reduce((y,m)=>m.needsUpdate?++y:y,0);this._load=this._load*ox+d*(1-ox)}_schedule(){for(this._runQueue.filterInPlace(d=>!!d.needsUpdate||(d.schedulePriority=d.basePriority,!1)),this._tasks.forAll(d=>{d.basePriority===qn&&d.needsUpdate&&!this._runQueue.includes(d)&&d.blockFrame!==this._frameNumber&&this._runQueue.unshift(d)});this._runQueue.length===0;){let d=!1,y=0;if(this._tasks.forAll(m=>{m.needsUpdate&&m.schedulePriority!==0&&m.basePriority!==qn&&m.blockFrame!==this._frameNumber&&(d=!0,y=Math.max(y,m.basePriority),m.schedulePriority===1?(m.schedulePriority=0,this._runQueue.push(m)):--m.schedulePriority)}),!d)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const d=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const y=this._budget.now(),m=this._runQueue.pop();this._budget.resetProgress();try{m.task.runTask(this._budget)===E3.YIELD&&(m.blockFrame=this._frameNumber)}catch(S){mt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${m.name}"`,S)}!this._budget.hasProgressed&&m.blockFrame!==this._frameNumber&&m.needsUpdate&&(m.name,ne.I3S_CONTROLLER,m.blockFrame=this._frameNumber),m.schedulePriority=m.basePriority;const _=this._budget.now()-y;if(m.runtime+=_,this._frameTaskTimes.set(m.priority,this._frameTaskTimes.get(m.priority)+_),this._debug&&_>2*this._budget.budget&&console.log("Task",m.name,"used",_,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-d)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-d)}_startFrameTaskTimes(){for(const d of Object.keys(ne))this._frameTaskTimes.set(ne[d],0)}_recordFrameTaskTimes(d){this._frameTaskTimes.forEach((y,m)=>this.performanceInfo.tasks.get(m).record(y)),this.performanceInfo.total.record(d)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(d,y,m,_){this._scheduler=d,this.name=y,this._basePriority=_,this.blockFrame=0,this.runtime=0,this._queue=new WK,this._handles=new Qo,this.schedulePriority=this._basePriority,this._task=Gm(m??this._queue),this._handles.add(Sl(()=>this.task.running,S=>d.taskRunningChanged(S)))}remove(){this.processQueue(qA),this._scheduler.removeTask(this),this.schedule=A3.schedule,this.reschedule=A3.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(d){this.name=d;const y=ex(d);this._basePriority!==qn&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(d){this.setPriority(d)}get needsUpdate(){return this.updating||this.task.running}schedule(d,y,m){return this._queue.push(d,y,m)}reschedule(d,y,m){return this._queue.unshift(d,y,m)}processQueue(d){this._queue.runTask(d)}}class s{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=qr.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(d){return!this.done&&(d()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(d){this._enabled=d}reset(d,y){this._begin=this.now(),this._budget=d,this._state=y,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=s})(I3||(I3={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Vl||(Vl={}));const qA=(()=>{const t=new I3.Budget;return t.enabled=!1,t})();let YK=class{remove(){}processQueue(){}schedule(e,i,s){try{if(Ms(i)){const a=ei();return s?Promise.resolve(s(a)):Promise.reject(a)}return ub(e(qA))}catch(a){return Promise.reject(a)}}reschedule(e,i,s){return this.schedule(e,i,s)}};const A3=new YK;let vp=class extends Rt{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(ne.TEXTURE_UNLOAD))??A3}normalizeCtorArgs(){return{}}destroy(){var e,i,s;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(a=>this._releaseTextureRequest(a)),(s=this._textureRequests)==null||s.clear()}get updating(){return this._frameTask.updating}fromData(e,i,s){var y,m;const a=this.makeUid(e);let d=this._textureRequests.get(a);if(!d){const _=new ZK(s);_.texture=i(),(y=this._stage)==null||y.add(_.texture),(m=this._stage)==null||m.loadImmediate(_.texture),this._textureRequests.set(a,_),d=_}return d.referenceCount++,{uid:a,texture:d.texture,release:()=>this._release(a)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};w([T()],vp.prototype,"_frameTask",void 0),w([T()],vp.prototype,"updating",null),vp=w([W("esri.views.3d.support.TextureCollection")],vp);let ZK=class{constructor(e){this.onRemove=e,this.referenceCount=0}};var ax;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(ax||(ax={}));const BA=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],HA={};function WA(t){return!!HA[t]}function XK(t){for(const e of t)if(!WA(e))return!1;return!0}BA.forEach(t=>{HA[t]=!0});let QK=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:s},a)=>{var d;return(d=this.inputManager)==null?void 0:d.installHandlers(a,[i],s)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var s;return(s=this.inputManager)==null?void 0:s.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,s,a){const d=Array.isArray(e)?e:e.split(",");if(!XK(d))return d.some(WA)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,m;Array.isArray(i)?m=i:(y=i,m=[]),typeof s=="function"?y=s:a=s,a=a??vl.DEFAULT;const _=this._createUniqueGroupName(),S=new tY(this.view,d,m,y);this._handlers.set(_,{handler:S,priority:a});for(const I of d){const A=this._handlerCounts.get(I)||0;this._handlerCounts.set(I,A+1)}return this.inputManager&&this.inputManager.installHandlers(_,[S],a),{remove:()=>this._removeHandler(_,d)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const s of i){const a=this._handlerCounts.get(s);a===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):a===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,a-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},tY=class extends zi{constructor(e,i,s,a){super(!0),this._latestDragStart=void 0,this.view=e;for(const d of i)switch(d){case"click":this.registerIncoming("click",s,y=>a(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",s,y=>a(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",s,y=>a(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,y=>a(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",s,y=>a(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",s,y=>{const m=this._wrapDrag(y);m&&a(m)});break;case"key-down":this.registerIncoming("key-down",s,y=>a(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",s,y=>a(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",s,y=>a(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,y=>a(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,y=>a(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,y=>a(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,y=>a(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,y=>a(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,y=>a(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,y=>{a(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",s,y=>{a(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",s,y=>{a(this._wrapBlur(y))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:m,eventId:_}=e.data,{cancelable:S,timestamp:I}=e;return{type:"click",pointerType:i,button:s,buttons:a,x:d,y,native:m,timestamp:I,screenPoint:Sr(d,y),mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:S,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:m,eventId:_}=e.data,{cancelable:S,timestamp:I}=e;return{type:"double-click",pointerType:i,button:s,buttons:a,x:d,y,native:m,timestamp:I,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:S,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:m,eventId:_}=e.data,S=m.pointerId,{cancelable:I,timestamp:A}=e;return{type:"immediate-click",pointerId:S,pointerType:i,button:s,buttons:a,x:d,y,native:m,timestamp:A,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:m,eventId:_}=e.data,S=m.pointerId,{cancelable:I,timestamp:A}=e;return{type:"immediate-double-click",pointerId:S,pointerType:i,button:s,buttons:a,x:d,y,native:m,timestamp:A,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:m}=e.data,{cancelable:_,timestamp:S}=e;return{type:"hold",pointerType:i,button:s,buttons:a,x:d,y,native:m,timestamp:S,mapPoint:this._getMapPoint(d,y),cancelable:_,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(Sr(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:s,y:a}=i.center,{action:d,pointerType:y,button:m}=i;if(d==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const _=i.pointer.native,S=i.buttons,{cancelable:I,timestamp:A}=e,P={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return d==="end"&&(this._latestDragStart=void 0),{type:"drag",action:d,x:s,y:a,origin:P,pointerType:y,button:m,buttons:S,radius:i.radius,angle:nM(i.angle),native:_,timestamp:A,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:L=>e.async(L),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:s,native:a}=e.data,{cancelable:d,timestamp:y}=e;return{type:"key-down",key:i,repeat:s,native:a,timestamp:y,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:s}=e.data,{cancelable:a,timestamp:d}=e;return{type:"key-up",key:i,native:s,timestamp:d,cancelable:a,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:s,y:a,button:d,buttons:y,native:m,eventId:_}=e.data,S=m.pointerId,I=m.pointerType,{cancelable:A,timestamp:P}=e;return{type:i,x:s,y:a,pointerId:S,pointerType:I,button:d,buttons:y,native:m,timestamp:P,eventId:_,cancelable:A,stopPropagation:()=>e.stopPropagation(),async:L=>e.async(L),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:s,buttons:a,native:d,eventId:y}=e.data.currentEvent,{button:m}=e.data.startEvent,_=e.data.startEvent.native.pointerId,S=e.data.startEvent.native.pointerType,I=e.data.action,A={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:P,timestamp:L}=e;return{type:"pointer-drag",x:i,y:s,pointerId:_,pointerType:S,button:m,buttons:a,action:I,origin:A,native:d,timestamp:L,eventId:y,cancelable:P,stopPropagation:()=>e.stopPropagation(),async:j=>e.async(j),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:s,timestamp:a}=e,{x:d,y,deltaY:m,native:_}=s;return{type:"mouse-wheel",x:d,y,deltaY:m,native:_,timestamp:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:S=>e.async(S),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:s,device:a}=e.data,{cancelable:d,timestamp:y}=e,{buttons:m,axes:_}=s;return{type:"gamepad",device:a,timestamp:y,action:i,buttons:m,axes:_,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:S=>e.async(S),preventDefault:()=>e.preventDefault()}}};var Ld,lx,hx;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Ld||(Ld={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(lx||(lx={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(hx||(hx={}));function eY(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return mt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function k3(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(Ld.USER)&&t.getEditableFlag(Ld.MANAGER)}function zn(t){return Sr(t.x,t.y)}function JA(t,e){var s;const i=(s=t instanceof HTMLElement?t:t.surface)==null?void 0:s.getBoundingClientRect();return i?Sr(e.clientX-i.left,e.clientY-i.top):Sr(0,0)}function ux(t,e){return e instanceof Event?JA(t,e):zn(e)}function cx(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let iY=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const s=()=>e.stopPropagation();switch(e.type){case"pointer-move":px(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!dx(e))break;const a=zn(e),d=this._intersect(a,e.pointerType,i.forEachTool);if(d==null)break;const y=d.manipulator,m=d.tool;y==null||m==null||!y.interactive||y.grabbable&&y.grabbableForEvent(e)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,e,i),y!=null&&m!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(e)&&!y.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:y,tool:m,start:a,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(d.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:a}),s());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!dx(e))break;const a=this._grabbedManipulators.get(e.pointerId),d=jh(a,({manipulator:I})=>I),y=jh(a,({tool:I})=>I);if(d==null||y==null)break;const m=zn(e);m.x=Es(m.x,0,i.view.width),m.y=Es(m.y,0,i.view.height);const _=a.start,S=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(d.dragging=!0,S?d.events.emit("drag",{action:"update",start:_,screenPoint:m}):d.events.emit("drag",{action:"start",start:_,screenPoint:m,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:y,manipulator:d,start:_}));break;case"end":d.dragging=!1,S&&d.events.emit("drag",{action:"end",start:_,screenPoint:m}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}s();break}case"immediate-click":{const a=zn(e),d=this._intersect(a,e.pointerType,i.forEachTool);if(rY(e)||i.forEachTool(S=>{if((d==null||d.tool!==S||S.automaticManipulatorSelection)&&S.manipulators){let I=!1;S.manipulators.forEach(({manipulator:A})=>{A.selected&&(A.selected=!1,I=!0)}),I&&S.onManipulatorSelectionChanged&&S.onManipulatorSelectionChanged()}}),d==null)break;const{manipulator:y,tool:m}=d;if(!y.interactive)break;y.selectable&&m.automaticManipulatorSelection&&(y.selected=!y.selected,m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged());const _=e.native.shiftKey;y.events.emit("immediate-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:_,stopPropagation:s});break}case"click":{const a=zn(e),d=this._intersect(a,e.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const m=e.native.shiftKey;y.events.emit(e.type,{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:m}),s();break}case"double-click":{const a=zn(e),d=this._intersect(a,e.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const m=e.native.shiftKey;y.events.emit("double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:s});break}case"immediate-double-click":{const a=zn(e),d=this._intersect(a,e.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const m=e.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:s});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,s){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:zn(i)}),this._grabbedManipulators.forEach(({manipulator:a},d)=>{a===e&&this._grabbedManipulators.delete(d)}),this._afterManipulatorUngrab(s.setActiveTool)}_handlePointerEnd(e,i){const s=jh(this._grabbedManipulators.get(e.pointerId),({manipulator:a})=>a);s!=null&&s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:zn(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return Ag(e,({manipulator:s})=>!(s==null||!s.interactive)&&(s.grabbing&&s.grabCursor?(i=s.grabCursor,!0):!!s.cursor&&(i=s.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:a})=>{i.add(a)}),this._hoveredManipulators.forEach(({tool:a})=>{s.add(a)}),e(a=>{a.hasGrabbedManipulators=i.has(a),a.hasHoveredManipulators=s.has(a);const d=this._grabbedManipulators.values(),y=VN(d,({tool:m})=>m===a);a.firstGrabbedManipulator=y!=null?y.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:s},a=!0,d){const y=(m,_)=>m===e&&(d==null||d===_);this._grabbedManipulators.forEach(({tool:m,manipulator:_,pointerType:S},I)=>{y(m,_)&&(this._grabbedManipulators.delete(I),_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:S}))}),this._draggedManipulators.forEach(({tool:m,manipulator:_},S)=>{y(m,_)&&(this._draggedManipulators.delete(S),_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}),a&&this._hoveredManipulators.forEach(({tool:m,manipulator:_},S)=>{y(m,_)&&(this._hoveredManipulators.delete(S),_.hovering=!1)}),this._afterManipulatorUngrab(s),this._onFocusChange(i)}_intersect(e,i,s){let a=null;return s(d=>{if(d.manipulators==null||!k3(d))return!1;const y=d.manipulators.intersect(e,i);return y!=null&&(a={tool:d,manipulator:y},!0)}),a}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Sr(i.x,i.y),s,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!px(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(zn(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,s,a){let d=this._intersect(e,s,a);const y=jh(this._hoveredManipulators.get(i),({manipulator:m})=>m);d==null||d.manipulator.interactive||(d=null),d!=null&&y===d.manipulator||(y!=null&&(y.hovering=!1),d!=null?(d.manipulator.hovering=!0,this._hoveredManipulators.set(i,d)):this._hoveredManipulators.delete(i),this._onFocusChange(a))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function px(t){return t==="mouse"}function dx(t){return t.pointerType!=="mouse"||t.button===0}function rY(t){return!!t.native.shiftKey}const fx="attached",u2="tools",sY=1e3;let Js=class extends Um{constructor(e){super(e),this._clock=Zc,this._manipulatorState=new iY,this.tools=new Vt,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const s of this.tools.items)if(i(s))return}}initialize(){this.handles.add([this.view.on(BA,e=>{this._handleInputEvent(e)},vl.TOOL),...eY(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void mt.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const s of this.tools){this._updateToolEditableFlag(s);const a=k3(s);this.activeTool!=null&&a||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!a)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=si(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,sY)}attach(){var e;this.view.type==="3d"?(this._set("textures",new vp(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([It(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(s=>s.onElevationChange(i))),Xn(()=>this._set("textures",Je(this.textures)))],fx)):this.handles.add(It(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(fx),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:s})=>e(s,i))})}_handleInputEvent(e){let i=!1;const s={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool(a=>{!i&&a.visible&&a.handleInputEvent(s)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(u2),this._forEachTool(e=>{if(e instanceof Rt){const i=It(()=>[e.cursor,e.visible,e.editable],()=>{k3(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,u2)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],u2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,Ld.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:e=>this._clock=e}}};w([T({constructOnly:!0,nonNullable:!0})],Js.prototype,"view",void 0),w([T({readOnly:!0,nonNullable:!0})],Js.prototype,"textures",void 0),w([T({value:null})],Js.prototype,"activeTool",null),w([T({readOnly:!0,type:Vt})],Js.prototype,"tools",void 0),w([T({readOnly:!0})],Js.prototype,"cursor",void 0),w([T({readOnly:!0})],Js.prototype,"updating",null),w([T()],Js.prototype,"_interacting",void 0),w([T({readOnly:!0})],Js.prototype,"interacting",null),Js=w([W("esri.views.ToolViewManager")],Js);let Zu=class extends Rt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":nY.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return oY[this.deviceType]}};w([T({nonNullable:!0,readOnly:!0})],Zu.prototype,"nativeIndex",void 0),w([T({type:String,readOnly:!0})],Zu.prototype,"deviceType",null),w([T({type:Number,readOnly:!0})],Zu.prototype,"axisThreshold",null),Zu=w([W("esri.views.input.gamepad.GamepadInputDevice")],Zu);const nY=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),oY={standard:.15,spacemouse:.025,unknown:0},B_=Zu;let bp=class extends Rt{constructor(...e){super(...e),this.devices=new Vt,this.enabledFocusMode="document"}};w([T({type:Vt.ofType(B_),readOnly:!0})],bp.prototype,"devices",void 0),w([T({type:["document","view","none"]})],bp.prototype,"enabledFocusMode",void 0),bp=w([W("esri.views.input.gamepad.GamepadSettings")],bp);const aY=bp;let by=class extends Rt{constructor(){super(...arguments),this.gamepad=new aY}};w([T({readOnly:!0})],by.prototype,"gamepad",void 0),by=w([W("esri.views.input.Input")],by);const lY=by;let Da=class extends Rt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};w([T({type:Boolean,nonNullable:!0})],Da.prototype,"enabled",void 0),w([T({type:B_})],Da.prototype,"device",void 0),w([T({type:["pan","zoom"],nonNullable:!0})],Da.prototype,"mode",void 0),w([T({type:["forward-down","forward-up"],nonNullable:!0})],Da.prototype,"tiltDirection",void 0),w([T({type:Number,nonNullable:!0})],Da.prototype,"velocityFactor",void 0),Da=w([W("esri.views.navigation.gamepad.GamepadSettings")],Da);const KA=Da;let ph=class extends Rt{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new KA,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};w([T({type:Boolean})],ph.prototype,"browserTouchPanEnabled",void 0),w([T({type:KA,nonNullable:!0})],ph.prototype,"gamepad",void 0),w([T({type:Boolean})],ph.prototype,"momentumEnabled",void 0),w([T({type:Boolean})],ph.prototype,"mouseWheelZoomEnabled",void 0),ph=w([W("esri.views.navigation.Navigation")],ph);const YA=ph,ZA={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},XA=Object.values(ZA),QA=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${XA.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),hY=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${XA.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),uY=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function cY(t){return!!QA.test(t)}function Su(t){if(t==null)return null;const e=er(t),i=e.path.match(QA)||e.path.match(hY);if(!i)return null;const[,s,a,d,y]=i,m=a.indexOf("/");return{title:tk(m!==-1?a.slice(m+1):a),serverType:ZA[d.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:s}}}function pY(t){const e=er(t).path.match(uY);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function tk(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function zpt(t,e){const i=[];if(t){const s=Su(t);s!=null&&s.title&&i.push(s.title)}if(e){const s=tk(e);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function H_(t){if(!t)return!1;const e=".arcgis.com/",i="//services",s="//tiles",a="//features",d=(t=t.toLowerCase()).includes(e),y=t.includes(i)||t.includes(s)||t.includes(a);return d&&y}function dY(t,e){return t&&sT(nT(t,e))}function Vpt(t){let{url:e}=t;if(!e)return{url:e};e=nT(e,t.logger);const i=er(e),s=Su(i.path);let a;if(s!=null)s.sublayer!=null&&t.layer.layerId==null&&(a=s.sublayer),e=s.url.path;else if(t.nonStandardUrlAllowed){const d=pY(i.path);d!=null&&(e=d.serviceUrl,a=d.sublayerId)}return{url:sT(e),layerId:a}}function Gpt(t,e,i,s,a){hu(e,s,"url",a),s.url&&t.layerId!=null&&(s.url=tu(s.url,i,t.layerId.toString()))}function Upt(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),s=e.includes("/mapserver/wmsserver"),a=e.includes("/imageserver/wmsserver"),d=e.includes("/wmsserver");return i&&(s||a||d)}var yx;function fY(t){var s;const e=t.url?Su(t.url):void 0;return!(((s=t.spatialReference)==null?void 0:s.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&ek(t)&&t.heightModelInfo?t.heightModelInfo:yY(t)?q_.deriveUnitFromSR(gY,t.spatialReference):null}function ek(t){return"heightModelInfo"in t}function ik(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function yY(t){return ik(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):rk(t)}function mY(t){return t.layers!=null||rk(t)||ik(t)||ek(t)}function rk(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(yx||(yx={}));const gY=new q_({heightModel:"gravity-related-height"});var Hm;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Hm||(Hm={}));let O3,c2=null;async function vY(t){c2||(c2=bt(()=>import("./geometryServiceUtils-9b2b11b2.js"),[]).then(e=>O3=e)),await c2,Ke(t)}async function sk(t,e,i,s){if(!t)return null;const a=t.spatialReference;return _u()||Zo(a,e)?Rl(t,e):O3?O3.projectGeometry(t,e,i,s):(await Promise.race([vY(s),Ml(s)]),sk(t,e,i,s))}let Fe=class extends Rt{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=gd(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var s,a,d,y;const e=(s=this.map)==null?void 0:s.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(a=e==null?void 0:e.basemap)==null?void 0:a.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(d=e==null?void 0:e.ground)==null?void 0:d.layers},{parent:e==null?void 0:e.basemap,layers:(y=e==null?void 0:e.basemap)==null?void 0:y.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let s=null;for(const d of e){const y=this._getSupportedSpatialReferences(d);if(y.length>0){const m=this._narrowDownSpatialReferenceCandidates(s,y);m!=null&&(s=m)}if(s!=null&&s.length===1)break}if(i&&(s==null||s.length!==1))return{updating:!0};const a=this._pickSpatialReferenceCandidate(s);return{spatialReference:a!=null?a.spatialReference:null,viewingMode:a!=null?a.viewingMode:null,updating:!1}}get _tileInfoTask(){var s,a,d,y,m,_,S;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(a=(s=this.map)==null?void 0:s.call(this))==null?void 0:a.basemap,layers:(m=(y=(d=this.map)==null?void 0:d.call(this))==null?void 0:y.basemap)==null?void 0:m.baseLayers},{layers:(S=(_=this.map)==null?void 0:_.call(this))==null?void 0:S.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const I=e[0].tileInfo;return{tileInfo:I&&I.spatialReference.equals(this.spatialReference)?I:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var s,a,d;if(!this.required.heightModelInfo||this.suspended&&((s=this._get("_heightModelInfoTask"))!=null&&s.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const y of e)if(mY(y)){const m=fY(y);if(m)return{heightModelInfo:m,vcsWkid:(a=y.spatialReference)==null?void 0:a.vcsWkid,latestVcsWkid:(d=y.spatialReference)==null?void 0:d.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,s=[];for(const a of e.layers){const d="fullExtents"in a&&a.fullExtents||(a.fullExtent!=null?[a.fullExtent]:[]),y=this.requiresExtentInSpatialReference?null:d[0],m=d.find(_=>_.spatialReference.equals(this.spatialReference))??y;if(m)return{candidates:[{extent:m,layer:a}],updating:!1};if(this._getSupportedSpatialReferences(a).length>0)for(const _ of d)s.push({extent:_,layer:a})}return{candidates:s,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(e),a=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&a.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=gd(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:a.clone(),task:x5(async d=>{try{const y=await sk(s.extent,a,"portalItem"in s.layer?s.layer.portalItem:void 0,d);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(Ms(d))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const s=[],a=(d,y)=>d!=null?y!=null?d===y&&d:d:y;for(const d of e)for(const y of i){if(!d.spatialReference.equals(y.spatialReference))continue;const m=a(d.viewingMode,y.viewingMode);if(m!==!1){s.push({spatialReference:d.spatialReference,viewingMode:m});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:s})=>s.equals(i))&&(e=e.filter(({spatialReference:s})=>s.equals(i))),e.length>1&&e.some(({viewingMode:s})=>s!==Hm.Local)&&(e=e.filter(({viewingMode:s})=>s!==Hm.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const s=[];for(const a of i){const d=this.getSpatialReferenceSupport({spatialReference:a,layer:e});if(d!=null){const y=d.constraints!=null?d.constraints:[{spatialReference:a,viewingMode:null}];for(const{spatialReference:m,viewingMode:_}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!m.equals(this.userSpatialReference)||s.push({spatialReference:m,viewingMode:_})}}return s}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:s})=>i.equals(s.spatialReference))||e[0]}_collectLayers(e){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return{layers:[],updating:!0};const i=new bY;for(const a of e)if(this._collectCollection(a,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const s of e.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(s),"layers"in s&&this._collectCollection({layers:s.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Qi(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};w([T()],Fe.prototype,"required",void 0),w([T({constructOnly:!0})],Fe.prototype,"map",void 0),w([T({constructOnly:!0})],Fe.prototype,"getSpatialReferenceSupport",void 0),w([T()],Fe.prototype,"defaultSpatialReference",void 0),w([T()],Fe.prototype,"userSpatialReference",void 0),w([T()],Fe.prototype,"sourcePreloadCount",void 0),w([T()],Fe.prototype,"priorityCollection",void 0),w([T()],Fe.prototype,"requiresExtentInSpatialReference",void 0),w([T()],Fe.prototype,"suspended",void 0),w([T({readOnly:!0})],Fe.prototype,"ready",null),w([T({readOnly:!0})],Fe.prototype,"heightModelInfoReady",null),w([T({readOnly:!0})],Fe.prototype,"spatialReference",null),w([T({readOnly:!0})],Fe.prototype,"extent",null),w([T({readOnly:!0})],Fe.prototype,"heightModelInfo",null),w([T({readOnly:!0})],Fe.prototype,"vcsWkid",null),w([T({readOnly:!0})],Fe.prototype,"latestVcsWkid",null),w([T({readOnly:!0})],Fe.prototype,"viewingMode",null),w([T({readOnly:!0})],Fe.prototype,"tileInfo",null),w([T({readOnly:!0})],Fe.prototype,"mapCollections",null),w([T({readOnly:!0})],Fe.prototype,"_allLayers",null),w([T({readOnly:!0})],Fe.prototype,"_spatialReferenceTask",null),w([T({readOnly:!0})],Fe.prototype,"_tileInfoTask",null),w([T({readOnly:!0})],Fe.prototype,"_heightModelInfoTask",null),w([T({readOnly:!0})],Fe.prototype,"_extentCandidatesTask",null),w([T()],Fe.prototype,"_extentTask",null),w([T()],Fe.prototype,"_projectExtentTask",void 0),Fe=w([W("esri.views.support.DefaultsFromMap")],Fe);let bY=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var wp;let Dt=wp=class extends jl(kl.EventedMixin(v5(Rt))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Fc({getCollections:()=>{var e,i,s;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:_Y}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new nd,this.analyses=new Bm,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Vt,this.magnifier=new UA,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Nd,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new lY,this.navigation=new YA,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new QK(this),this.persistableViewModels=new Vt,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(It(()=>this.preconditionsReady,e=>{var i,s;e?(this._currentSpatialReference=this.spatialReference,wp.views.add(this)):(this._currentSpatialReference=null,wp.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},p0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,k_(()=>this.ready)))),this.basemapView=new ja({view:this}),this.layerViewManager=new BK({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new Js({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([It(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),It(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),It(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([It(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var s;const i=((s=this.map)==null?void 0:s.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const a=Xn(()=>t=gd(t));t=x5(async d=>{try{await d$(this.spatialReferenceWarningDelay,null,d)}catch{return}finally{t=null}mt.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(a,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(wp.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Je(this.graphics),this.analyses=Je(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Je(this.analysisViewManager),this.toolViewManager=Je(this.toolViewManager),this.layerViewManager=Je(this.layerViewManager),this.basemapView=Je(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Je(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return mt.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Fe({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Wo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(mt.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),Wo.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!Oi(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new lt("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&mt.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Sl(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Dt.views=new Vt,w([T()],Dt.prototype,"_userSpatialReference",void 0),w([T()],Dt.prototype,"activeTool",null),w([T({readOnly:!0})],Dt.prototype,"allLayerViews",void 0),w([T()],Dt.prototype,"groundView",void 0),w([T()],Dt.prototype,"animation",null),w([T()],Dt.prototype,"basemapView",void 0),w([T()],Dt.prototype,"center",null),w([T({readOnly:!0})],Dt.prototype,"_defaultsFromMapSettings",null),w([T()],Dt.prototype,"defaultsFromMap",null),w([T()],Dt.prototype,"fatalError",void 0),w([T({type:Ae})],Dt.prototype,"extent",null),w([T(Y7(nd,"graphics"))],Dt.prototype,"graphics",void 0),w([T(Y7(Bm,"analyses"))],Dt.prototype,"analyses",void 0),w([T({readOnly:!0,type:q_})],Dt.prototype,"heightModelInfo",null),w([T({readOnly:!0})],Dt.prototype,"interacting",null),w([T({readOnly:!0})],Dt.prototype,"navigating",null),w([T({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Dt.prototype,"preconditionsReady",null),w([T({readOnly:!0})],Dt.prototype,"typeSpecificPreconditionsReady",void 0),w([T({type:Vt,readOnly:!0})],Dt.prototype,"layerViews",void 0),w([T()],Dt.prototype,"resolution",null),w([T({type:UA})],Dt.prototype,"magnifier",void 0),w([T({value:null,type:AM})],Dt.prototype,"map",null),w([T()],Dt.prototype,"padding",void 0),w([T({readOnly:!0})],Dt.prototype,"ready",void 0),w([T({type:te})],Dt.prototype,"spatialReference",null),w([T()],Dt.prototype,"spatialReferenceWarningDelay",void 0),w([T()],Dt.prototype,"stationary",null),w([T({readOnly:!0})],Dt.prototype,"supportsGround",void 0),w([T({type:oo})],Dt.prototype,"timeExtent",void 0),w([T({type:Nd,nonNullable:!0})],Dt.prototype,"timeReference",void 0),w([T()],Dt.prototype,"tools",null),w([T()],Dt.prototype,"toolViewManager",void 0),w([T({readOnly:!0})],Dt.prototype,"type",void 0),w([T({type:Number})],Dt.prototype,"scale",void 0),w([T({readOnly:!0})],Dt.prototype,"updating",void 0),w([T({readOnly:!0})],Dt.prototype,"initialExtentRequired",void 0),w([T({readOnly:!0})],Dt.prototype,"initialExtent",null),w([T()],Dt.prototype,"cursor",null),w([T({readOnly:!0})],Dt.prototype,"input",void 0),w([T({type:YA,nonNullable:!0})],Dt.prototype,"navigation",void 0),w([T()],Dt.prototype,"layerViewManager",void 0),w([T()],Dt.prototype,"analysisViewManager",void 0),w([T()],Dt.prototype,"width",void 0),w([T()],Dt.prototype,"height",void 0),w([T({readOnly:!0})],Dt.prototype,"resizing",void 0),w([T({value:null,readOnly:!0})],Dt.prototype,"size",null),w([T({readOnly:!0})],Dt.prototype,"suspended",void 0),w([T({readOnly:!0})],Dt.prototype,"viewEvents",void 0),w([T({readOnly:!0})],Dt.prototype,"persistableViewModels",void 0),w([T()],Dt.prototype,"_isValid",void 0),w([T()],Dt.prototype,"_readyCycleForced",void 0),w([T()],Dt.prototype,"_currentSpatialReference",void 0),Dt=wp=w([W("esri.views.View")],Dt);const wY=Dt;function _Y(t){return t.layerViews}let Fa=class extends cm{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=mn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new lt("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=ta(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};w([T({readOnly:!0})],Fa.prototype,"done",null),w([T({readOnly:!0,type:String})],Fa.prototype,"state",void 0),w([T()],Fa.prototype,"target",void 0),Fa=w([W("esri.views.ViewAnimation")],Fa),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Fa||(Fa={}));const P3=Fa;function Ch(t,e,i,s){const a=3*t,d=3*(i-t)-a,y=1-a-d,m=3*e,_=3*(s-e)-m,S=1-m-_;function I(j){return((y*j+d)*j+a)*j}function A(j){return((S*j+_)*j+m)*j}function P(j){return(3*y*j+2*d)*j+a}function L(j,F){let V,J,Q,Z,et,st;for(Q=j,st=0;st<8;st++){if(Z=I(Q)-j,Math.abs(Z)<F)return Q;if(et=P(Q),Math.abs(et)<1e-6)break;Q-=Z/et}if(V=0,J=1,Q=j,Q<V)return V;if(Q>J)return J;for(;V<J;){if(Z=I(Q),Math.abs(Z-j)<F)return Q;j>Z?V=Q:J=Q,Q=.5*(J-V)+V}return Q}return function(j,F=1e-6){return A(L(j,F))}}const xY=/^cubic-bezier\((.*)\)/,bs={};function SY(t){let e=bs[t]||null;if(!e){const i=xY.exec(t);if(i){const s=i[1].split(",").map(a=>parseFloat(a.trim()));s.length!==4||s.some(a=>isNaN(a))||(e=Ch.apply(Ch,s))}}return e}bs.ease=Ch(.25,.1,.25,1),bs.linear=Ch(0,0,1,1),bs.easeIn=bs["ease-in"]=Ch(.42,0,1,1),bs.easeOut=bs["ease-out"]=Ch(0,0,.58,1),bs.easeInOut=bs["ease-in-out"]=Ch(.42,0,.58,1);function $Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function TY(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function MY(t,e,i,s,a,d,y){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=d,t[5]=y,t}function W_(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],m=e[5];let _=i*d-s*a;return _?(_=1/_,t[0]=d*_,t[1]=-s*_,t[2]=-a*_,t[3]=i*_,t[4]=(a*m-d*y)*_,t[5]=(s*y-i*m)*_,t):null}function EY(t){return t[0]*t[3]-t[1]*t[2]}function nk(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=i[0],I=i[1],A=i[2],P=i[3],L=i[4],j=i[5];return t[0]=s*S+d*I,t[1]=a*S+y*I,t[2]=s*A+d*P,t[3]=a*A+y*P,t[4]=s*L+d*j+m,t[5]=a*L+y*j+_,t}function sv(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=Math.sin(i),I=Math.cos(i);return t[0]=s*I+d*S,t[1]=a*I+y*S,t[2]=s*-S+d*I,t[3]=a*-S+y*I,t[4]=m,t[5]=_,t}function J_(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=i[0],I=i[1];return t[0]=s*S,t[1]=a*S,t[2]=d*I,t[3]=y*I,t[4]=m,t[5]=_,t}function Rd(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=i[0],I=i[1];return t[0]=s,t[1]=a,t[2]=d,t[3]=y,t[4]=s*S+d*I+m,t[5]=a*S+y*I+_,t}function ok(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t}function ak(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function K_(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function IY(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function AY(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function kY(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function lk(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function OY(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function PY(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t}function CY(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function NY(t,e){const i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=e[0],S=e[1],I=e[2],A=e[3],P=e[4],L=e[5],j=Is();return Math.abs(i-_)<=j*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-S)<=j*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(a-I)<=j*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(d-A)<=j*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-P)<=j*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(m-L)<=j*Math.max(1,Math.abs(m),Math.abs(L))}const LY=nk,RY=lk;Object.freeze(Object.defineProperty({__proto__:null,add:kY,copy:$Y,determinant:EY,equals:NY,exactEquals:CY,frob:AY,fromRotation:ok,fromScaling:ak,fromTranslation:K_,identity:TY,invert:W_,mul:LY,multiply:nk,multiplyScalar:OY,multiplyScalarAndAdd:PY,rotate:sv,scale:J_,set:MY,str:IY,sub:RY,subtract:lk,translate:Rd},Symbol.toStringTag,{value:"Module"}));function bl(){return[1,0,0,1,0,0]}function jY(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function DY(t,e,i,s,a,d){return[t,e,i,s,a,d]}function FY(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:jY,create:bl,createView:FY,fromValues:DY},Symbol.toStringTag,{value:"Module"}));function jd(t,e){return t[0]=e[0],t[1]=e[1],t}function Bi(t,e,i){return t[0]=e,t[1]=i,t}function hk(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function Dd(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function uk(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function ck(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function zY(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function VY(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function GY(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function UY(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function qY(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function pf(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function BY(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t}function df(t,e){const i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)}function Wm(t,e){const i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s}function Jm(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function pk(t){const e=t[0],i=t[1];return e*e+i*i}function dk(t,e){return t[0]=-e[0],t[1]=-e[1],t}function HY(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function C3(t,e){const i=e[0],s=e[1];let a=i*i+s*s;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t}function fk(t,e){return t[0]*e[0]+t[1]*e[1]}function yk(t,e,i){const s=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=s,t}function WY(t,e,i,s){const a=e[0],d=e[1];return t[0]=a+s*(i[0]-a),t[1]=d+s*(i[1]-d),t}function JY(t,e){e=e||1;const i=2*Dg()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function KY(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[2]*a,t[1]=i[1]*s+i[3]*a,t}function Hn(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[2]*a+i[4],t[1]=i[1]*s+i[3]*a+i[5],t}function YY(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[3]*a+i[6],t[1]=i[1]*s+i[4]*a+i[7],t}function ZY(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[4]*a+i[12],t[1]=i[1]*s+i[5]*a+i[13],t}function XY(t,e,i,s){const a=e[0]-i[0],d=e[1]-i[1],y=Math.sin(s),m=Math.cos(s);return t[0]=a*m-d*y+i[0],t[1]=a*y+d*m+i[1],t}function QY(t,e){const i=t[0],s=t[1],a=e[0],d=e[1];let y=i*i+s*s;y>0&&(y=1/Math.sqrt(y));let m=a*a+d*d;m>0&&(m=1/Math.sqrt(m));const _=(i*a+s*d)*y*m;return _>1?0:_<-1?Math.PI:Math.acos(_)}function tZ(t){return"vec2("+t[0]+", "+t[1]+")"}function eZ(t,e){return t[0]===e[0]&&t[1]===e[1]}function iZ(t,e){const i=t[0],s=t[1],a=e[0],d=e[1],y=Is();return Math.abs(i-a)<=y*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-d)<=y*Math.max(1,Math.abs(s),Math.abs(d))}function rZ(t,e,i,s,a){let d=e[0]-i[0],y=e[1]-i[1];const m=(s[0]*d+s[1]*y)*(a-1);return d=s[0]*m,y=s[1]*m,t[0]=e[0]+d,t[1]=e[1]+y,t}const sZ=Jm,Y_=Dd,nZ=uk,oZ=ck,aZ=df,lZ=Wm,hZ=pk;Object.freeze(Object.defineProperty({__proto__:null,add:hk,angle:QY,ceil:zY,copy:jd,cross:yk,dist:aZ,distance:df,div:oZ,divide:ck,dot:fk,equals:iZ,exactEquals:eZ,floor:VY,inverse:HY,len:sZ,length:Jm,lerp:WY,max:UY,min:GY,mul:nZ,multiply:uk,negate:dk,normalize:C3,projectAndScale:rZ,random:JY,rotate:XY,round:qY,scale:pf,scaleAndAdd:BY,set:Bi,sqrDist:lZ,sqrLen:hZ,squaredDistance:Wm,squaredLength:pk,str:tZ,sub:Y_,subtract:Dd,transformMat2:KY,transformMat2d:Hn,transformMat3:YY,transformMat4:ZY},Symbol.toStringTag,{value:"Module"}));function bi(){return[0,0]}function uZ(t){return[t[0],t[1]]}function ff(t,e){return[t,e]}function cZ(t){const e=bi(),i=Math.min(2,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function pZ(t,e){return new Float64Array(t,e,2)}function mk(){return bi()}function gk(){return ff(1,1)}function vk(){return ff(1,0)}function bk(){return ff(0,1)}const dZ=mk(),fZ=gk(),yZ=vk(),mZ=bk();Object.freeze(Object.defineProperty({__proto__:null,ONES:fZ,UNIT_X:yZ,UNIT_Y:mZ,ZEROS:dZ,clone:uZ,create:bi,createView:pZ,fromArray:cZ,fromValues:ff,ones:gk,unitX:vk,unitY:bk,zeros:mk},Symbol.toStringTag,{value:"Module"}));const wk=96,_k=39.37,gZ=180/Math.PI;function xk(t){return t.wkid?t:t.spatialReference||te.WGS84}function Z_(t,e){return e.type?Bi(t,e.x,e.y):jd(t,e)}function Sk(t){return ea(t)}function Ac(t,e){const i=Math.max(1,e[0]),s=Math.max(1,e[1]);return Math.max(t.width/i,t.height/s)*MZ(t.spatialReference)}async function _p(t,e,i,s){var m,_;let a,d;if(!t||Array.isArray(t)&&!t.length)return null;if(Vt.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const S=t.every(P=>"attributes"in P),I=t.some(P=>!P.geometry);let A=t;if(S&&I&&e&&e.allLayerViews){const P=new Map;for(const V of t){const J=V.layer,Q=P.get(J)||[],Z=V.attributes[J.objectIdField];Z!=null&&Q.push(Z),P.set(J,Q)}const L=[];P.forEach((V,J)=>{const Q=e.allLayerViews.find(Z=>Z.layer.id===J.id);if(Q&&"queryFeatures"in Q){const Z=J.createQuery();Z.objectIds=V,Z.returnGeometry=!0,L.push(Q.queryFeatures(Z))}});const j=await Promise.all(L),F=[];for(const V of j)if(V&&V.features&&V.features.length)for(const J of V.features)J.geometry!=null&&F.push(J.geometry);A=F}for(const P of A)s=await _p(P,e,i,s);return s}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")a=new Yt(t);else if(t instanceof Ol)a=t;else if("geometry"in t){if(t.geometry)a=t.geometry;else if(t.layer){const S=t.layer,I=e.allLayerViews.find(A=>A.layer.id===S.id);if(I&&"queryFeatures"in I){const A=S.createQuery();A.objectIds=[t.attributes[S.objectIdField]],A.returnGeometry=!0;const P=await I.queryFeatures(A);a=(_=(m=P==null?void 0:P.features)==null?void 0:m[0])==null?void 0:_.geometry}}}if(a==null||(d=a.type==="point"?new Ae({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference}):a.extent,!d))return null;_u()||Zo(d.spatialReference,i)||await Ml();const y=Rl(d,i);return y?s=s?s.union(y):y:null}function vZ(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const s of t){const a=s.layer;a&&a.minScale&&a.maxScale&&(e=a.minScale<e?a.minScale:e,i=a.maxScale>i?a.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function p2(t,e){return Oi(xk(t),e)?t:Rl(t,e)}async function bZ(t,e){if(!t||!e)return new Yn({targetGeometry:new Yt,scale:0,rotation:0});let i=e.spatialReference;const{constraints:s,padding:a,viewpoint:d,size:y}=e,m=[a?y[0]-a.left-a.right:y[0],a?y[1]-a.top-a.bottom:y[1]];let _=null;t instanceof Yn?_=t:t.viewpoint?_=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(_=t.target);let S=null;_&&_.targetGeometry?S=_.targetGeometry:t instanceof Ae?S=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(S=await _p(t.center,e,i)||await _p(t.extent,e,i)||await _p(t.target,e,i)||await _p(t,e,i)),!S&&d&&d.targetGeometry?S=d.targetGeometry:!S&&e.extent&&(S=e.extent),i||(i=xk(e.spatialReference||e.extent||S)),_u()||Oi(S.spatialReference,i)||Zo(S,i)||await Ml();const I=p2(S.center??S,i);let A=0;if(_&&_.targetGeometry!=null&&_.targetGeometry.type==="point")A=_.scale;else if("scale"in t&&t.scale)A=t.scale;else if("zoom"in t&&t.zoom!==-1&&s&&s.effectiveLODs)A=s.zoomToScale(t.zoom);else if(Array.isArray(S)||S.type==="point"||S.type==="extent"&&S.width===0&&S.height===0){const F=p2(e.extent,i);A=F!=null?Ac(F,m):e.extent?Ac(e.extent,m):d.scale}else A=Ac(p2(S.extent,i),m);const P=vZ(t);P&&(P.min&&P.min>A?A=P.min:P.max&&P.max<A&&(A=P.max));let L=0;_?L=_.rotation:t.hasOwnProperty("rotation")?L=t.rotation:d&&(L=d.rotation);let j=new Yn({targetGeometry:I,scale:A,rotation:L});return s&&(j=s.fit(j),s.constrainByGeometry(j),s.rotationEnabled||(j.rotation=L)),j}function Sn(t,e){const i=t.targetGeometry,s=e.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function wZ(t,e,i){return i?Bi(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):pf(t,e,.5)}const _Z=function(){const t=bi();return function(e,i,s){const a=i.targetGeometry;Z_(t,a);const d=.5*f0(i);return e.xmin=t[0]-d*s[0],e.ymin=t[1]-d*s[1],e.xmax=t[0]+d*s[0],e.ymax=t[1]+d*s[1],e.spatialReference=a.spatialReference,e}}();function xZ(t,e,i,s,a){var d;return N3(t,e,i.center),t.scale=Ac(i,s),(d=a==null?void 0:a.constraints)==null||d.constrain(t),t}function SZ(t,e,i,s){return t4(t,e,i,s),W_(t,t)}const $k=function(){const t=bi();return function(e,i,s){return Y_(e,EZ(e,i),wZ(t,i,s))}}(),$Z=function(){const t=bl(),e=bi();return function(i,s,a,d){const y=f0(s),m=X_(s);return Bi(e,y,y),ak(t,e),sv(t,t,m),Rd(t,t,$k(e,a,d)),Rd(t,t,[0,d.top-d.bottom]),Bi(i,t[4],t[5])}}();function f0(t){return t.scale*TZ(t.targetGeometry)}function TZ(t){return t!=null&&Wi(t.spatialReference)?1/(Sk(t.spatialReference)*_k*wk):1}function X_(t){return q5(t.rotation)||0}function MZ(t){return Wi(t)?Sk(t)*_k*wk:1}function EZ(t,e){return pf(t,e,.5)}const Q_=function(){const t=bi(),e=bi(),i=bi();return function(s,a,d,y,m,_){return dk(t,a),pf(e,d,.5*_),Bi(i,1/y*_,-1/y*_),K_(s,e),m&&sv(s,s,m),J_(s,s,i),Rd(s,s,t),s}}(),t4=function(){const t=bi();return function(e,i,s,a){const d=f0(i),y=X_(i);return Z_(t,i.targetGeometry),Q_(e,t,s,d,y,a)}}(),IZ=function(){const t=bi();return function(e,i,s,a){const d=f0(i);return Z_(t,i.targetGeometry),Q_(e,t,s,d,0,a)}}();function AZ(t){const e=pn(t);return e?e.valid[1]-e.valid[0]:0}function kZ(t,e){return Math.round(AZ(t)/e)}const OZ=function(){const t=bi(),e=bi(),i=[0,0,0];return function(s,a,d){Dd(t,s,a),C3(t,t),Dd(e,s,d),C3(e,e),yk(i,t,e);let y=Math.acos(fk(t,e)/(Jm(t)*Jm(e)))*gZ;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),PZ=function(){const t=bi();return function(e,i,s,a){const d=e.targetGeometry;return Sn(e,i),$Z(t,i,s,a),d.x+=t[0],d.y+=t[1],e}}(),N3=function(t,e,i){Sn(t,e);const s=t.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,t},CZ=function(){const t=bi();return function(e,i,s,a,d){d||(d="center"),Y_(t,s,a),pf(t,t,.5);const y=t[0],m=t[1];switch(d){case"center":Bi(t,0,0);break;case"left":Bi(t,-y,0);break;case"top":Bi(t,0,m);break;case"right":Bi(t,y,0);break;case"bottom":Bi(t,0,-m);break;case"top-left":Bi(t,-y,m);break;case"bottom-left":Bi(t,-y,-m);break;case"top-right":Bi(t,y,m);break;case"bottom-right":Bi(t,y,-m)}return nv(e,i,t),e}}();function Wpt(t,e,i){return Sn(t,e),t.rotation+=i,t}function NZ(t,e,i){return Sn(t,e),t.rotation=i,t}const LZ=function(){const t=bi();return function(e,i,s,a,d){return Sn(e,i),isNaN(s)||s===0||(Mk(t,a,i,d),e.scale=i.scale*s,Ek(t,t,e,d),nv(e,e,Bi(t,t[0]-a[0],a[1]-t[1]))),e}}();function mx(t,e,i){return Sn(t,e),t.scale=i,t}const Tk=function(){const t=bi();return function(e,i,s,a,d,y){return Sn(e,i),isNaN(s)||s===0||(Mk(t,d,i,y),e.scale=i.scale*s,e.rotation+=a,Ek(t,t,e,y),nv(e,e,Bi(t,t[0]-d[0],d[1]-t[1]))),e}}(),Jpt=function(){const t=bi(),e=bi();return function(i,s,a,d,y,m,_){return $k(e,m,_),hk(t,y,e),d?Tk(i,s,a,d,t,m):LZ(i,s,a,t,m)}}(),Mk=function(){const t=bl();return function(e,i,s,a){return Hn(e,i,SZ(t,s,a,1))}}(),Ek=function(){const t=bl();return function(e,i,s,a){return Hn(e,i,t4(t,s,a,1))}}(),nv=function(){const t=bi(),e=bl();return function(i,s,a){Sn(i,s);const d=f0(s),y=i.targetGeometry;return ok(e,X_(s)),J_(e,e,ff(d,d)),Hn(t,a,e),y.x+=t[0],y.y+=t[1],i}}();let RZ=class{constructor(e,i,s,a){const d=e.targetGeometry,y=i.targetGeometry;a?typeof a=="string"&&(a=SY(a)||bs.ease):a=bs.ease,this.easing=a,this.duration=s,this.sCenterX=d.x,this.sCenterY=d.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const s=this.easing(i);let a,d,y,m;i>=1?(a=this.tCenterX,d=this.tCenterY,y=this.tRotation,m=this.tScale):(a=this.sCenterX+s*this.dCenterX,d=this.sCenterY+s*this.dCenterY,y=this.sRotation+s*this.dRotation,m=this.sScale+s*this.dScale),e.targetGeometry.x=a,e.targetGeometry.y=d,e.scale=m,e.rotation=y}},$o=class extends Rt{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=bs.ease,this.view=null,this.viewpoint=new Yn({targetGeometry:new Yt,scale:0,rotation:0}),this._updateTask=Rc({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=si(this._updateTask)}animate(e,i,s){this.stop();const a=this.viewpoint;Sn(a,i),this.transition=new RZ(this.viewpoint,e.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const d=()=>{var y,m;this.animation===e&&this._updateTask&&(e.state==="finished"&&((y=this.transition)==null||y.applyRatio(this.viewpoint,1),(m=this.view)!=null&&m.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(d,d),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const s=new P3({target:e.clone()}),a=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var s,a;const i=this.animation;if(i&&i.state!==P3.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const d=this.transition,y=(performance.now()-this._startTime)/d.duration,m=y>=1;d.applyRatio(this.viewpoint,y),m&&((s=this.animation)==null||s.finish())}(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};w([T()],$o.prototype,"animation",void 0),w([T()],$o.prototype,"duration",void 0),w([T()],$o.prototype,"transition",void 0),w([T()],$o.prototype,"easing",void 0),w([T()],$o.prototype,"view",void 0),w([T()],$o.prototype,"viewpoint",void 0),$o=w([W("esri.views.2d.AnimationManager")],$o);const jZ=$o;let DZ=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var y,m;if(this._updateRequested=!1,(y=this.view)==null?void 0:y.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:a,state:{id:d}}=this.view;i.forEach(this._updateLayerView,this),a!=null&&(a.lastUpdateId!==d&&(a.viewChange(),a.lastUpdateId=d),a.updateRequested&&a.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==d&&(s.viewChange(),s.lastUpdateId=d),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((m=this._frameTaskHandle)==null||m.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=It(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Rc(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var a;if(!e.attached)return void this.requestUpdate();const i=this.view.state,s=e.lastUpdateId;s!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),s!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((a=e.layerViews)==null||a.forEach(this._updateLayerView,this))}};function hi(){return Promise.all([bt(()=>import("./webglDeps-13e805d9.js"),["assets/webglDeps-13e805d9.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/ProgramTemplate-b85ac4aa.js","assets/programUtils-fda6ef65.js","assets/NestedMap-1b5db22e.js"]),bt(()=>import("./mapViewDeps-60e193ee.js"),["assets/mapViewDeps-60e193ee.js","assets/CIMResourceManager-4ba2a84a.js","assets/fontUtils-5dd2e502.js","assets/Rasterizer-edba21d8.js","assets/cimAnalyzer-a3b0bb67.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-a941d33c.js","assets/alignmentUtils-ae955d28.js","assets/definitions-4e50b8bb.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/rasterizingUtils-2b30e95a.js","assets/imageutils-9ee1a468.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/BufferPool-a1cb4da5.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/enums-fb086c25.js","assets/programUtils-fda6ef65.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-9b3e6e9f.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-96192c60.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/RenderingContext-a785329f.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/GraphicContainer-d37adaa8.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-a163b1ab.js"])])}const R0=()=>hi().then(()=>bt(()=>import("./TileLayerView2D-c394bbb8.js"),["assets/TileLayerView2D-c394bbb8.js","assets/Rasterizer-edba21d8.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-a941d33c.js","assets/alignmentUtils-ae955d28.js","assets/definitions-4e50b8bb.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/rasterizingUtils-2b30e95a.js","assets/EffectView-caaae2d8.js","assets/Container-93bc143e.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/BufferPool-a1cb4da5.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-9b3e6e9f.js","assets/imageutils-9ee1a468.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-96192c60.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-7893e154.js","assets/BitmapTileContainer-ec7e6b9a.js","assets/Bitmap-047ca509.js","assets/TileContainer-d7453e14.js","assets/LayerView-3e008698.js","assets/HighlightGraphicContainer-7f39394a.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/RefreshableLayerView-d124819c.js","assets/drapedUtils-08f0ed56.js","assets/popupUtils-c39281df.js"])),Ou=()=>hi().then(()=>bt(()=>import("./FeatureLayerView2D-b159eeb1.js"),["assets/FeatureLayerView2D-b159eeb1.js","assets/EffectView-caaae2d8.js","assets/FeatureEffect-92c7e9d5.js","assets/definitions-4e50b8bb.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/BitmapTileContainer-ec7e6b9a.js","assets/Bitmap-047ca509.js","assets/TileContainer-d7453e14.js","assets/CircularArray-ef508845.js","assets/BufferPool-a1cb4da5.js","assets/FeatureContainer-fa087d0b.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),gx={"base-dynamic":()=>hi().then(()=>bt(()=>import("./BaseDynamicLayerView2D-912ce4c7.js"),["assets/BaseDynamicLayerView2D-912ce4c7.js","assets/BitmapContainer-e5650f4d.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/ExportStrategy-3065c756.js","assets/Bitmap-047ca509.js","assets/RefreshableLayerView-d124819c.js"])),"base-tile":R0,"bing-maps":R0,csv:Ou,"geo-rss":()=>hi().then(()=>bt(()=>import("./GeoRSSLayerView2D-2097ec95.js"),["assets/GeoRSSLayerView2D-2097ec95.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/GraphicContainer-d37adaa8.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js"])),feature:Ou,geojson:Ou,graphics:()=>hi().then(()=>bt(()=>import("./GraphicsLayerView2D-6231922b.js"),["assets/GraphicsLayerView2D-6231922b.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/GraphicContainer-d37adaa8.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js"])),group:()=>hi().then(()=>bt(()=>import("./GroupLayerView2D-144c84f2.js"),["assets/GroupLayerView2D-144c84f2.js","assets/GroupContainer-480a2ac7.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js"])),imagery:()=>hi().then(()=>bt(()=>import("./ImageryLayerView2D-deb828db.js"),["assets/ImageryLayerView2D-deb828db.js","assets/RasterVFDisplayObject-2c69a79d.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-9de72ee9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/GraphicsView2D-4936cf93.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/visualVariablesUtils-44c6f339.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-7f39394a.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-e5650f4d.js","assets/Bitmap-047ca509.js","assets/ExportStrategy-3065c756.js","assets/rasterProjectionHelper-42435e0a.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),"imagery-tile":()=>hi().then(()=>bt(()=>import("./ImageryTileLayerView2D-d94ba171.js"),["assets/ImageryTileLayerView2D-d94ba171.js","assets/multidimensionalUtils-b24331cc.js","assets/RasterVFDisplayObject-2c69a79d.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-9de72ee9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/rasterUtils-7b5545cf.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/TileContainer-d7453e14.js","assets/RawBlockCache-70935f81.js","assets/rasterProjectionHelper-42435e0a.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-421799ed.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),kml:()=>hi().then(()=>bt(()=>import("./KMLLayerView2D-40dcff3c.js"),["assets/KMLLayerView2D-40dcff3c.js","assets/kmlUtils-902abcb6.js","assets/Bitmap-047ca509.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/BitmapContainer-e5650f4d.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/GraphicContainer-d37adaa8.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-42435e0a.js","assets/RenderingContext-a785329f.js","assets/programUtils-fda6ef65.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-96192c60.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-7b5545cf.js"])),"knowledge-graph":()=>hi().then(()=>bt(()=>import("./KnowledgeGraphLayerView2D-f12640dd.js"),["assets/KnowledgeGraphLayerView2D-f12640dd.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js"])),"link-chart":()=>hi().then(()=>bt(()=>import("./KnowledgeGraphLayerView2D-f12640dd.js"),["assets/KnowledgeGraphLayerView2D-f12640dd.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js"])),"knowledge-graph-sublayer":Ou,"map-image":()=>hi().then(()=>bt(()=>import("./MapImageLayerView2D-5c1661e4.js"),["assets/MapImageLayerView2D-5c1661e4.js","assets/BitmapContainer-e5650f4d.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/GraphicsView2D-4936cf93.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/visualVariablesUtils-44c6f339.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-7f39394a.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-3065c756.js","assets/Bitmap-047ca509.js","assets/RefreshableLayerView-d124819c.js","assets/drapedUtils-08f0ed56.js","assets/popupUtils-c39281df.js"])),"map-notes":()=>hi().then(()=>bt(()=>import("./MapNotesLayerView2D-af7e4a74.js"),["assets/MapNotesLayerView2D-af7e4a74.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/GroupContainer-480a2ac7.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/GraphicContainer-d37adaa8.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js"])),media:()=>hi().then(()=>bt(()=>import("./MediaLayerView2D-b113341f.js"),["assets/MediaLayerView2D-b113341f.js","assets/perspectiveUtils-d1ec6b76.js","assets/normalizeUtilsSync-f11102c4.js","assets/mat3f64-221ce671.js","assets/Rasterizer-edba21d8.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-a941d33c.js","assets/alignmentUtils-ae955d28.js","assets/definitions-4e50b8bb.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/rasterizingUtils-2b30e95a.js","assets/EffectView-caaae2d8.js","assets/Container-93bc143e.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/BufferPool-a1cb4da5.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-9b3e6e9f.js","assets/imageutils-9ee1a468.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-96192c60.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-4936cf93.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-3e008698.js"])),"ogc-feature":()=>hi().then(()=>bt(()=>import("./OGCFeatureLayerView2D-1137d444.js"),["assets/OGCFeatureLayerView2D-1137d444.js","assets/FeatureLayerView2D-b159eeb1.js","assets/EffectView-caaae2d8.js","assets/FeatureEffect-92c7e9d5.js","assets/definitions-4e50b8bb.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/BitmapTileContainer-ec7e6b9a.js","assets/Bitmap-047ca509.js","assets/TileContainer-d7453e14.js","assets/CircularArray-ef508845.js","assets/BufferPool-a1cb4da5.js","assets/FeatureContainer-fa087d0b.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),"open-street-map":R0,"oriented-imagery":Ou,route:()=>hi().then(()=>bt(()=>import("./RouteLayerView2D-c2eeb0cb.js"),["assets/RouteLayerView2D-c2eeb0cb.js","assets/Stop-9cad7648.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/GraphicContainer-d37adaa8.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js"])),stream:()=>hi().then(()=>bt(()=>import("./StreamLayerView2D-d8da9777.js"),["assets/StreamLayerView2D-d8da9777.js","assets/FeatureLayerView2D-b159eeb1.js","assets/EffectView-caaae2d8.js","assets/FeatureEffect-92c7e9d5.js","assets/definitions-4e50b8bb.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/BitmapTileContainer-ec7e6b9a.js","assets/Bitmap-047ca509.js","assets/TileContainer-d7453e14.js","assets/CircularArray-ef508845.js","assets/BufferPool-a1cb4da5.js","assets/FeatureContainer-fa087d0b.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),"subtype-group":()=>hi().then(()=>bt(()=>import("./SubtypeGroupLayerView2D-dc0dd723.js"),["assets/SubtypeGroupLayerView2D-dc0dd723.js","assets/FeatureEffect-92c7e9d5.js","assets/FeatureLayerView2D-b159eeb1.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/cimAnalyzer-a3b0bb67.js","assets/fontUtils-5dd2e502.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-a941d33c.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/BitmapTileContainer-ec7e6b9a.js","assets/Bitmap-047ca509.js","assets/TileContainer-d7453e14.js","assets/CircularArray-ef508845.js","assets/BufferPool-a1cb4da5.js","assets/FeatureContainer-fa087d0b.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),tile:R0,"vector-tile":()=>hi().then(()=>bt(()=>import("./VectorTileLayerView2D-566b7f9f.js"),["assets/VectorTileLayerView2D-566b7f9f.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/rasterizingUtils-2b30e95a.js","assets/floatRGBA-2a9b8092.js","assets/VertexArrayObject-4993c7e2.js","assets/config-1337d16e.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-4180df3d.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-d7453e14.js","assets/WGLContainer-7b621762.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/earcut-c3520e2b.js","assets/StyleRepository-d975bfda.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/LayerView-3e008698.js"])),video:()=>hi().then(()=>bt(()=>import("./VideoLayerView2D-417a4503.js"),["assets/VideoLayerView2D-417a4503.js","assets/LayerView-3e008698.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js"])),wcs:()=>hi().then(()=>bt(()=>import("./ImageryTileLayerView2D-d94ba171.js"),["assets/ImageryTileLayerView2D-d94ba171.js","assets/multidimensionalUtils-b24331cc.js","assets/RasterVFDisplayObject-2c69a79d.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-9de72ee9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/rasterUtils-7b5545cf.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/TileContainer-d7453e14.js","assets/RawBlockCache-70935f81.js","assets/rasterProjectionHelper-42435e0a.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-421799ed.js","assets/popupUtils-c39281df.js","assets/RefreshableLayerView-d124819c.js"])),"web-tile":R0,wfs:Ou,wms:()=>hi().then(()=>bt(()=>import("./WMSLayerView2D-a9692714.js"),["assets/WMSLayerView2D-a9692714.js","assets/BitmapContainer-e5650f4d.js","assets/WGLContainer-7b621762.js","assets/definitions-4e50b8bb.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/earcut-c3520e2b.js","assets/LayerView-3e008698.js","assets/ExportStrategy-3065c756.js","assets/Bitmap-047ca509.js","assets/RefreshableLayerView-d124819c.js","assets/ExportWMSImageParameters-fbabd7ba.js"])),wmts:()=>hi().then(()=>bt(()=>import("./WMTSLayerView2D-41bc857a.js"),["assets/WMTSLayerView2D-41bc857a.js","assets/imageUtils-7893e154.js","assets/BitmapTileContainer-ec7e6b9a.js","assets/Bitmap-047ca509.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/definitions-4e50b8bb.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-4180df3d.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/TileContainer-d7453e14.js","assets/LayerView-3e008698.js","assets/RefreshableLayerView-d124819c.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function FZ(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new lt(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const vx={hasLayerViewModule:t=>gx[t.type]!=null,importLayerView:t=>{const e=gx[t.type];if(e==null)throw FZ(t);return e(t)}};function zZ(t,e){const{spatialReference:i}=e,s=[e.x,e.y];let a=Number.POSITIVE_INFINITY,d=0,y=0;const m=[0,0],_=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const S of _)for(let I=0;I<S.length-1;I++){fV(m,s,S,I);const A=df(s,m);A<a&&(a=A,d=m[0],y=m[1])}return{coordinate:new Yt({x:d,y,spatialReference:i}),distance:a}}var L3;let Nh=L3=class extends i_(Rt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Rl(this.geometry,this.spatialReference)}catch(t){return mt.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?jg(this.normalizedGeometry,i):TT(this.normalizedGeometry,i))return t;const{coordinate:s}=zZ(this.normalizedGeometry,i);return s&&(t.targetGeometry=s),t}clone(){var t,e;return new L3({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};w([T({constructOnly:!0})],Nh.prototype,"geometry",void 0),w([T({readOnly:!0})],Nh.prototype,"normalizedGeometry",null),w([T({constructOnly:!0})],Nh.prototype,"spatialReference",void 0),Nh=L3=w([W("esri.views.2d.constraints.GeometryConstraint")],Nh);var R3;let xp=R3=class extends i_(Rt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new R3({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};w([T()],xp.prototype,"enabled",void 0),w([T()],xp.prototype,"rotationEnabled",void 0),xp=R3=w([W("esri.views.2d.constraints.RotationConstraint")],xp);const Ik=xp;var j3;let Ar=j3=class extends i_(Rt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:s,minZoom:a,maxZoom:d}=this,y=-1,m=-1,_=!1,S=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);e=e.map(I=>I.clone()),e.sort((I,A)=>A.scale-I.scale),e.forEach((I,A)=>I.level=A);for(const I of e)!_&&i>0&&i>=I.scale&&(y=I.level,_=!0),!S&&s>0&&s>=I.scale&&(m=t?t.level:-1,S=!0),t=I;a===-1&&(a=i===0?0:y),d===-1&&(d=s===0?e.length-1:m),a=Math.max(a,0),a=Math.min(a,e.length-1),d=Math.max(d,0),d=Math.min(d,e.length-1),a>d&&([a,d]=[d,a]),i=e[a].scale,s=e[d].scale,e.splice(0,a),e.splice(d-a+1,e.length),e.forEach((I,A)=>{this._lodByScale[I.scale]=I,this._scales[A]=I.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",d),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,s=this.effectiveMaxScale,a=t.targetGeometry,d=e&&e.targetGeometry,y=s!==0&&t.scale<s,m=i!==0&&t.scale>i;if(y||m){const _=m?i:s;if(e&&d){const S=(_-e.scale)/(t.scale-e.scale);a.x=d.x+(a.x-d.x)*S,a.y=d.y+(a.y-d.y)*S}t.scale=_}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),s=Math.round(t);return e[s]+(s-t)*(e[i]-e[s])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,s;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let a=0;a<e.length-1;a++){if(i=e[a],s=e[a+1],s===t)return a+this.effectiveMinZoom+1;if(i>t&&s<t)return a+this.effectiveMinZoom+1-(t-s)/(i-s)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new j3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};w([T({readOnly:!0})],Ar.prototype,"effectiveLODs",void 0),w([T({readOnly:!0})],Ar.prototype,"effectiveMinZoom",void 0),w([T({readOnly:!0})],Ar.prototype,"effectiveMaxZoom",void 0),w([T({readOnly:!0})],Ar.prototype,"effectiveMinScale",void 0),w([T({readOnly:!0})],Ar.prototype,"effectiveMaxScale",void 0),w([T()],Ar.prototype,"lods",void 0),w([T()],Ar.prototype,"minZoom",void 0),w([T()],Ar.prototype,"maxZoom",void 0),w([T()],Ar.prototype,"minScale",void 0),w([T()],Ar.prototype,"maxScale",void 0),w([T()],Ar.prototype,"snapToZoom",void 0),Ar=j3=w([W("esri.views.2d.constraints.ZoomConstraint")],Ar);const Ak=Ar,VZ={base:null,key:"type",typeMap:{extent:Ae,polygon:Jo}};let fi=class extends Rt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Vt}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,s;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _geometry(){var i,s;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Nh({geometry:this.geometry,spatialReference:(s=this.view)==null?void 0:s.constraintsInfo.spatialReference})}get _rotation(){return new Ik({rotationEnabled:this.rotationEnabled})}get _zoom(){var _;const e=this._get("_zoom"),i=this.lods||((_=this.view)==null?void 0:_.constraintsInfo.lods),s=this.minZoom,a=this.maxZoom,d=this.minScale,y=this.maxScale,m=this.snapToZoom;return e&&e.lods===i&&e.minZoom===s&&e.maxZoom===a&&e.minScale===d&&e.maxScale===y&&e.snapToZoom===m?e:new Ak({lods:i,minZoom:s,maxZoom:a,minScale:d,maxScale:y,snapToZoom:m})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(s=>s.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};w([T({readOnly:!0})],fi.prototype,"effectiveLODs",null),w([T({readOnly:!0})],fi.prototype,"effectiveMinScale",null),w([T({readOnly:!0})],fi.prototype,"effectiveMaxScale",null),w([T({readOnly:!0})],fi.prototype,"effectiveMinZoom",null),w([T({readOnly:!0})],fi.prototype,"effectiveMaxZoom",null),w([T({types:VZ,value:null})],fi.prototype,"geometry",null),w([T({type:[Za]})],fi.prototype,"lods",void 0),w([T()],fi.prototype,"minScale",void 0),w([T()],fi.prototype,"maxScale",void 0),w([T()],fi.prototype,"minZoom",void 0),w([T()],fi.prototype,"maxZoom",void 0),w([T()],fi.prototype,"rotationEnabled",void 0),w([T()],fi.prototype,"snapToZoom",void 0),w([T({type:Vt})],fi.prototype,"customConstraints",void 0),w([T()],fi.prototype,"view",void 0),w([T({readOnly:!0})],fi.prototype,"version",null),w([T({type:Nh,readOnly:!0})],fi.prototype,"_geometry",null),w([T({type:Ik})],fi.prototype,"_rotation",null),w([T({readOnly:!0,type:Ak})],fi.prototype,"_zoom",null),fi=w([W("esri.views.2d.MapViewConstraints")],fi);const kk=fi;let GZ=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Ok=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Nm(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=si(this._schedule),this._task=si(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,s)=>e(s))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const s=this.get(e);if(s)return s;const a=new AbortController;let d=null;i&&(d=Xr(i,()=>a.abort()));const y=()=>{const I=this._processingItems.get(e);I&&I.controller.abort(),m(),S.reject(ei())},m=()=>{_.remove(),d!=null&&d.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},_=f5(a.signal,y),S=mn();return this._deferreds.set(e,S),this._controllers.set(e,a),S.promise.then(m,m),this._queue.push(e),this._scheduleNext(),S.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Xc(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const s=new AbortController,a=new GZ(e,s);this._processingItems.set(e,a);try{i=this.process(e,s.signal)}catch(d){this._processError(a,d)}ta(i)?(a.promise=i,i.then(d=>this._processResult(a,d),d=>this._processError(a,d))):this._processResult(a,i)}get test(){return{update:e=>this.runTask(e)}}};function UZ(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const d2=new Set,h1=[],Pu=new Map,bx=[0,0];let ma=class extends Rt{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new Ok({concurrency:e,process:(s,a)=>{const d=this._keyToItem.get(s);return i(d,{signal:a})},peeker:s=>s.values().next().value})}destroy(){this.clear(),this._queue=Je(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const s=e.key.id+"-"+i;if(this.has(s))return this.get(s);const a=this._queue.push(s),d=()=>{this._keyToItem.delete(s),this.notifyChange("updating")};return this._keyToItem.set(s,e),a.then(d,d),this.notifyChange("updating"),a}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach(I=>{const A=this._keyToItem.get(I),P=this.tileInfoView.getTileScale(A.key);Pu.has(P)||(Pu.set(P,[]),s=Math.max(P,s),a=Math.min(P,a)),Pu.get(P).push(A.key),d2.add(P)});let d=this.state.scale;Pu.has(d)||(UZ(h1,d2),h1.sort((I,A)=>I-A),d=h1.reduce((I,A)=>Math.abs(A-d)<Math.abs(I-d)?A:I,h1[0])),d=Math.min(d,s),d=Math.max(d,a);const y=Pu.get(d),m=i.getClosestInfoForScale(d),_=m.getColumnForX(this.state.center[0]),S=m.getRowForY(this.state.center[1]);return y.sort((I,A)=>{const P=m.denormalizeCol(I.col,I.world),L=m.denormalizeCol(A.col,A.world);return Math.sqrt((_-P)*(_-P)+(S-I.row)*(S-I.row))-Math.sqrt((_-L)*(_-L)+(S-A.row)*(S-A.row))}),d2.clear(),Pu.clear(),y[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,s=this.state.center;let a,d=Number.POSITIVE_INFINITY;return e.forEach(y=>{const m=this._keyToItem.get(y);i.getTileCoords(bx,m.key);const _=df(bx,s);_<d&&(d=_,a=m.key)}),a.id}};w([T({constructOnly:!0})],ma.prototype,"concurrency",void 0),w([T({constructOnly:!0})],ma.prototype,"process",void 0),w([T()],ma.prototype,"state",void 0),w([T({constructOnly:!0})],ma.prototype,"strategy",void 0),w([T({constructOnly:!0})],ma.prototype,"tileInfoView",void 0),w([T({readOnly:!0})],ma.prototype,"updating",null),ma=w([W("esri.views.2d.tiling.PagedTileQueue")],ma);let pu=class dh{static getId(e,i,s,a){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${s}/${a}`}constructor(e,i,s,a){this.set(e,i,s,a)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|e<<8|s}acquire(e,i,s,a){this.set(e,i,s,a)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new dh(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,s,a){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[d,y,m,_]=e.split("/");this.level=parseFloat(d),this.row=parseFloat(y),this.col=parseFloat(m),this.world=parseFloat(_)}else this.level=+e,this.row=+i,this.col=+s,this.world=+a||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new dh(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,s=this.col<<1,a=this.world;return[new dh(e,i,s,a),new dh(e,i,s+1,a),new dh(e,i+1,s,a),new dh(e,i+1,s+1,a)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};pu.pool=new Al(pu,null,null,25,50);function ga(t,e){return[t,e]}function Gl(t,e,i){return t[0]=e,t[1]=i,t}function qZ(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t}const Ds=new pu("0/0/0/0");let BZ=class Pk{static create(e,i,s=null){const a=pn(e.spatialReference),d=i.origin||ga(e.origin.x,e.origin.y),y=ga(e.size[0]*i.resolution,e.size[1]*i.resolution),m=ga(-1/0,-1/0),_=ga(1/0,1/0),S=ga(1/0,1/0);s!=null&&(Gl(m,Math.max(0,Math.floor((s.xmin-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymax)/y[1]))),Gl(_,Math.max(0,Math.floor((s.xmax-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymin)/y[1]))),Gl(S,_[0]-m[0]+1,_[1]-m[1]+1));const{cols:I,rows:A}=i;let P,L,j,F;return!s&&I&&A&&(Gl(m,I[0],A[0]),Gl(_,I[1],A[1]),Gl(S,I[1]-I[0]+1,A[1]-A[0]+1)),e.isWrappable?(P=ga(Math.ceil(Math.round((a.valid[1]-a.valid[0])/i.resolution)/e.size[0]),S[1]),L=ga(Math.floor((a.origin[0]-d[0])/y[0]),m[1]),j=ga(P[0]+L[0]-1,_[1]),F=!0):(L=m,j=_,P=S,F=!1),new Pk(i.level,i.resolution,i.scale,d,m,_,S,y,L,j,P,F)}constructor(e,i,s,a,d,y,m,_,S,I,A,P){this.level=e,this.resolution=i,this.scale=s,this.origin=a,this.first=d,this.last=y,this.size=m,this.norm=_,this.worldStart=S,this.worldEnd=I,this.worldSize=A,this.wrap=P}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,s=!1){Ds.set(i);const a=s?Ds.col:this.denormalizeCol(Ds.col,Ds.world),d=Ds.row;return qZ(e,this.getXForColumn(a),this.getYForRow(d+1),this.getXForColumn(a+1),this.getYForRow(d)),e}getTileCoords(e,i,s=!1){Ds.set(i);const a=s?Ds.col:this.denormalizeCol(Ds.col,Ds.world);return Array.isArray(e)?Gl(e,this.getXForColumn(a),this.getYForRow(Ds.row)):(e.x=this.getXForColumn(a),e.y=this.getYForRow(Ds.row)),e}},Fd=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:s,lodInfo:a}=this,{level:d}=a;if(s.length!==0)for(const{row:y,colFrom:m,colTo:_}of s)for(let S=m;S<=_;S++)e.call(i,d,y,a.normalizeCol(S),a.getWorldForColumn(S))}};Fd.pool=new Al(Fd);let f2=class{constructor(e,i,s){this.row=e,this.colFrom=i,this.colTo=s}};const Ye=new pu("0/0/0/0");let HZ=class Ck{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[s,a]=e,[d,y]=i,m=d-s,_=y-a,S=_!==0?m/_:0,I=(Math.ceil(a)-a)*S,A=(Math.floor(a)-a)*S;return new Ck(s,Math.floor(a),Math.ceil(y),S,m<0?I:A,m<0?A:I,m<0?d:s,m<0?s:d)}constructor(e,i,s,a,d,y,m,_){this.x=e,this.ymin=i,this.ymax=s,this.invM=a,this.leftAdjust=d,this.rightAdjust=y,this.leftBound=m,this.rightBound=_}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Dr=[[0,0],[0,0],[0,0],[0,0]],WZ=1e-6;let JZ=class{constructor(e,i=null,s=e.lods[0].level,a=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const d=e.lods.filter(m=>m.level>=s&&m.level<=a);this.minScale=d[0].scale,this.maxScale=d[d.length-1].scale;const y=this._lodInfos=d.map(m=>BZ.create(e,m,i));d.forEach((m,_)=>{this._infoByLevel[m.level]=y[_],this._infoByScale[m.scale]=y[_],this.scales[_]=m.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,s=!1){Ye.set(i);const a=this._infoByLevel[Ye.level];return a?a.getTileBounds(e,Ye,s):e}getTileCoords(e,i,s=!1){Ye.set(i);const a=this._infoByLevel[Ye.level];return a?a.getTileCoords(e,Ye,s):e}getTileCoverage(e,i=192,s=!0,a="closest"){if(!s&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const d=a==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),y=Fd.pool.acquire(d),m=this._wrap;let _,S,I,A=1/0,P=-1/0;const L=y.spans;Dr[0][0]=Dr[0][1]=Dr[1][1]=Dr[3][0]=-i,Dr[1][0]=Dr[2][0]=e.size[0]+i,Dr[2][1]=Dr[3][1]=e.size[1]+i;for(const J of Dr)e.toMap(J,J),J[0]=d.getColumnForX(J[0]),J[1]=d.getRowForY(J[1]);const j=[];let F=3;for(let J=0;J<4;J++){if(Dr[J][1]===Dr[F][1]){F=J;continue}const Q=HZ.create(Dr[J],Dr[F]);A=Math.min(Q.ymin,A),P=Math.max(Q.ymax,P),j[Q.ymin]===void 0&&(j[Q.ymin]=[]),j[Q.ymin].push(Q),F=J}if(A==null||P==null||P-A>100)return null;let V=[];for(_=A;_<P;){j[_]!=null&&(V=V.concat(j[_])),S=1/0,I=-1/0;for(let J=V.length-1;J>=0;J--){const Q=V[J];S=Math.min(S,Q.getLeftCol()),I=Math.max(I,Q.getRightCol())}if(S=Math.floor(S),I=Math.floor(I),_>=d.first[1]&&_<=d.last[1])if(m)if(d.size[0]<d.worldSize[0]){const J=Math.floor(I/d.worldSize[0]);for(let Q=Math.floor(S/d.worldSize[0]);Q<=J;Q++)L.push(new f2(_,Math.max(d.getFirstColumnForWorld(Q),S),Math.min(d.getLastColumnForWorld(Q),I)))}else L.push(new f2(_,S,I));else S>d.last[0]||I<d.first[0]||(S=Math.max(S,d.first[0]),I=Math.min(I,d.last[0]),L.push(new f2(_,S,I)));_+=1;for(let J=V.length-1;J>=0;J--){const Q=V[J];Q.ymax>=_?Q.incrRow():V.splice(J,1)}}return y}getTileParentId(e){Ye.set(e);const i=this._infoByLevel[Ye.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(Ye,this._lodInfos[s],Ye),Ye.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Ye.set(i);const s=this._infoByLevel[Ye.level],a=e.lodInfo;if(a.resolution>s.resolution){this._getTileIdAtLOD(Ye,a,Ye);const y=a.denormalizeCol(Ye.col,Ye.world);for(const m of e.spans)if(m.row===Ye.row&&m.colFrom<=y&&m.colTo>=y)return!0}if(a.resolution<s.resolution){const[y,m,_,S]=e.spans.reduce((F,V)=>(F[0]=Math.min(F[0],V.row),F[1]=Math.max(F[1],V.row),F[2]=Math.min(F[2],V.colFrom),F[3]=Math.max(F[3],V.colTo),F),[1/0,-1/0,1/0,-1/0]),I=s.denormalizeCol(Ye.col,Ye.world),A=a.getColumnForX(s.getXForColumn(I)),P=a.getRowForY(s.getYForRow(Ye.row)),L=a.getColumnForX(s.getXForColumn(I+1))-1,j=a.getRowForY(s.getYForRow(Ye.row+1))-1;return!(A>S||L<_||P>m||j<y)}const d=a.denormalizeCol(Ye.col,Ye.world);return e.spans.some(y=>y.row===Ye.row&&y.colFrom<=d&&y.colTo>=d)}normalizeBounds(e,i,s){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const a=pn(this.tileInfo.spatialReference),d=-s*(a.valid[1]-a.valid[0]);e[0]+=d,e[2]+=d}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(e>i[s]+WZ)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((s,a)=>Math.abs(a-e)<Math.abs(s-e)?a:s,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let s=i.length-1;s>=0;s--)if(e<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-e)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,s){const a=this._infoByLevel[s.level];return e.set(s),i.resolution<a.resolution?null:(i.resolution===a.resolution||(e.level=i.level,e.col=Math.floor(s.col*a.resolution/i.resolution+.01),e.row=Math.floor(s.row*a.resolution/i.resolution+.01)),e)}};function KZ(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const y2=new Set,u1=[],Cu=new Map,wx=[0,0];let To=class extends Rt{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:s}=this;this._queue=new Ok({concurrency:e,process:(a,d)=>{const y=this._keyToItem.get(a);return i(y,{signal:d})},peeker:s==="scale-first"?a=>this._peekByScaleFirst(a):a=>this._peekByCenterFirst(a)})}destroy(){this.clear(),this._queue=Je(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const s=this._queue.push(i),a=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(a,a),this.notifyChange("updating"),s}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach(I=>{const A=this._keyToItem.get(I),P=this.tileInfoView.getTileScale(A.key);Cu.has(P)||(Cu.set(P,[]),s=Math.max(P,s),a=Math.min(P,a)),Cu.get(P).push(A.key),y2.add(P)});let d=this.state.scale;Cu.has(d)||(KZ(u1,y2),u1.sort((I,A)=>I-A),d=u1.reduce((I,A)=>Math.abs(A-d)<Math.abs(I-d)?A:I,u1[0])),d=Math.min(d,s),d=Math.max(d,a);const y=Cu.get(d),m=i.getClosestInfoForScale(d),_=m.getColumnForX(this.state.center[0]),S=m.getRowForY(this.state.center[1]);return y.sort((I,A)=>{const P=m.denormalizeCol(I.col,I.world),L=m.denormalizeCol(A.col,A.world);return Math.sqrt((_-P)*(_-P)+(S-I.row)*(S-I.row))-Math.sqrt((_-L)*(_-L)+(S-A.row)*(S-A.row))}),y2.clear(),Cu.clear(),y[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,s=this.state.center;let a,d=Number.POSITIVE_INFINITY;return e.forEach(y=>{const m=this._keyToItem.get(y);i.getTileCoords(wx,m.key);const _=df(wx,s);_<d&&(d=_,a=m.key)}),a.id}};w([T({constructOnly:!0})],To.prototype,"concurrency",void 0),w([T({constructOnly:!0})],To.prototype,"process",void 0),w([T()],To.prototype,"state",void 0),w([T({constructOnly:!0})],To.prototype,"strategy",void 0),w([T({constructOnly:!0})],To.prototype,"tileInfoView",void 0),w([T({readOnly:!0})],To.prototype,"updating",null),To=w([W("esri.views.2d.tiling.TileQueue")],To);const odt=To;let YZ=class{constructor(e,i,s){this.maxSize=e,this._tileInfoView=i,this._removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const s=i.key.level,a=this._tileKeysPerLevel[s];_x(this._tilePerId,e);for(let d=0;d<a.length;d++)if(a[d].id===e){a.splice(d,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,e);const a=i.level;this._tileKeysPerLevel[a]||(this._tileKeysPerLevel[a]=[]),this._tileKeysPerLevel[a].push(i)}prune(e,i,s){let a=this._tilePerId.size;if(a<=this.maxSize)return;let d=this._tileKeysPerLevel.length-1;for(;a>this.maxSize&&d>=0;)d!==e&&(a=this._pruneAroundCenterTile(a,i,s,d)),d--;a>this.maxSize&&(a=this._pruneAroundCenterTile(a,i,s,e))}_pruneAroundCenterTile(e,i,s,a){const d=this._tileKeysPerLevel[a];if(!d||d.length===0)return e;const{size:y,origin:m}=this._tileInfoView.tileInfo,_=s*y[0],S=s*y[1],I=[0,0],A=[0,0];for(d.sort((P,L)=>(I[0]=m.x+_*(P.col+.5),I[1]=m.y-S*(P.row+.5),A[0]=m.x+_*(L.col+.5),A[1]=m.y-S*(L.row+.5),Wm(I,i)-Wm(A,i)));d.length>0;){const P=d.pop();if(this._removeTile(P.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),_x(this._tilePerId,e)}};function _x(t,e){t.delete(e)}const Ul=new pu(0,0,0,0),ho=new Map,ql=[],m2=[];let ldt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new YZ(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var J,Q;const{resampling:i,tileIndex:s}=this,{scale:a,center:d,resolution:y}=e.state,{minScale:m,maxScale:_}=this.tileInfoView,S=!e.stationary&&a>this._previousScale;if(this._previousScale=a,!i&&(a>m||a<_))return this.tiles.length=0,void this.clear();const I=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!I)return this.tiles.length=0,void this.clear();const{spans:A,lodInfo:P}=I,{level:L}=P;this.tiles.length=0,s.forEach(Z=>Z.visible=!0);let j=0,F=0;if(A.length>0)for(const{row:Z,colFrom:et,colTo:st}of A)for(let nt=et;nt<=st;nt++){j++;const pt=Ul.set(L,Z,P.normalizeCol(nt),P.getWorldForColumn(nt)).id;let yt=s.get(pt);if(yt)yt.isReady?(ho.set(pt,yt),F++):S||this._addParentTile(pt,ho);else{if((J=this._tileCache)!=null&&J.has(pt)){if(yt=this._tileCache.pop(pt),this.tileIndex.set(pt,yt),yt.isReady){ho.set(pt,yt),F++;continue}}else yt=this.acquireTile(Ul),this.tileIndex.set(pt,yt);S||this._addParentTile(pt,ho)}}const V=F===j;for(const[Z,et]of s){if(ho.has(Z))continue;Ul.set(Z);const st=this.tileInfoView.intersects(I,Ul),nt=this.cachePolicy==="purge"?Ul.level!==L:Ul.level>L;!st||!S&&V?!nt&&st||ql.push(et):et.isReady?nt&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Ul,L)?ql.push(et):m2.push(et):nt&&ql.push(et)}for(const Z of m2)Z.isReady&&ho.set(Z.key.id,Z);for(const Z of ql)this._tileCache?this._tileCache.add(Z):this.releaseTile(Z),s.delete(Z.key.id);for(const Z of ho.values())this.tiles.push(Z);for(const Z of s.values())ho.has(Z.key.id)||(Z.visible=!1);(Q=this._tileCache)==null||Q.prune(L,d,y),Fd.pool.release(I),m2.length=0,ql.length=0,ho.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const s of this.tileIndex.values())this.tiles.includes(s)?e(s):ql.push(s);for(const s of ql)this.releaseTile(s),this.tileIndex.delete(s.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var d;let s=e,a=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(a=this.tileIndex.get(s),a==null?void 0:a.isReady){i.has(a.key.id)||i.set(a.key.id,a);break}}else if((d=this._tileCache)!=null&&d.has(s)&&(a=this._tileCache.pop(s),this.tileIndex.set(s,a),a==null?void 0:a.isReady)){i.has(a.key.id)||i.set(a.key.id,a);break}}_hasReadyAncestor(e,i){const s=to();this.tileInfoView.getTileBounds(s,e,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=i&&a.key.level<e.level){const d=to();if(this.tileInfoView.getTileBounds(d,a.key,!0),AV(d,s))return!0}return!1}};function Nk(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function ZZ(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function XZ(t,e,i,s,a,d){const y=new Float32Array(6);return y[0]=t,y[1]=e,y[2]=i,y[3]=s,y[4]=a,y[5]=d,y}function QZ(t,e){return new Float32Array(t,e,6)}function Lk(t,e,i,s){const a=e[s],d=e[s+1];t[s]=i[0]*a+i[2]*d+i[4],t[s+1]=i[1]*a+i[3]*d+i[5]}function tX(t,e,i,s=0,a=0,d=2){const y=a||e.length/d;for(let m=s;m<y;m++)Lk(t,e,i,m*d)}Object.freeze(Object.defineProperty({__proto__:null,clone:ZZ,create:Nk,createView:QZ,fromValues:XZ,transform:Lk,transformMany:tX},Symbol.toStringTag,{value:"Module"}));function eX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function iX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rk(t,e,i,s,a,d,y,m,_,S){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=d,t[5]=y,t[6]=m,t[7]=_,t[8]=S,t}function jk(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function rX(t,e){if(t===e){const i=e[1],s=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function sX(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],S=e[7],I=e[8],A=I*y-m*S,P=-I*d+m*_,L=S*d-y*_;let j=i*A+s*P+a*L;return j?(j=1/j,t[0]=A*j,t[1]=(-I*s+a*S)*j,t[2]=(m*s-a*y)*j,t[3]=P*j,t[4]=(I*i-a*_)*j,t[5]=(-m*i+a*d)*j,t[6]=L*j,t[7]=(-S*i+s*_)*j,t[8]=(y*i-s*d)*j,t):null}function nX(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],S=e[7],I=e[8];return t[0]=y*I-m*S,t[1]=a*S-s*I,t[2]=s*m-a*y,t[3]=m*_-d*I,t[4]=i*I-a*_,t[5]=a*d-i*m,t[6]=d*S-y*_,t[7]=s*_-i*S,t[8]=i*y-s*d,t}function oX(t){const e=t[0],i=t[1],s=t[2],a=t[3],d=t[4],y=t[5],m=t[6],_=t[7],S=t[8];return e*(S*d-y*_)+i*(-S*a+y*m)+s*(_*a-d*m)}function e4(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=e[6],I=e[7],A=e[8],P=i[0],L=i[1],j=i[2],F=i[3],V=i[4],J=i[5],Q=i[6],Z=i[7],et=i[8];return t[0]=P*s+L*y+j*S,t[1]=P*a+L*m+j*I,t[2]=P*d+L*_+j*A,t[3]=F*s+V*y+J*S,t[4]=F*a+V*m+J*I,t[5]=F*d+V*_+J*A,t[6]=Q*s+Z*y+et*S,t[7]=Q*a+Z*m+et*I,t[8]=Q*d+Z*_+et*A,t}function D3(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=e[6],I=e[7],A=e[8],P=i[0],L=i[1];return t[0]=s,t[1]=a,t[2]=d,t[3]=y,t[4]=m,t[5]=_,t[6]=P*s+L*y+S,t[7]=P*a+L*m+I,t[8]=P*d+L*_+A,t}function Dk(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],m=e[4],_=e[5],S=e[6],I=e[7],A=e[8],P=Math.sin(i),L=Math.cos(i);return t[0]=L*s+P*y,t[1]=L*a+P*m,t[2]=L*d+P*_,t[3]=L*y-P*s,t[4]=L*m-P*a,t[5]=L*_-P*d,t[6]=S,t[7]=I,t[8]=A,t}function aX(t,e,i){const s=i[0],a=i[1],d=i[2];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=d*e[6],t[7]=d*e[7],t[8]=d*e[8],t}function lX(t,e,i){const s=i[0],a=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t}function hX(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function uX(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function cX(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function pX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function dX(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=i+i,m=s+s,_=a+a,S=i*y,I=s*y,A=s*m,P=a*y,L=a*m,j=a*_,F=d*y,V=d*m,J=d*_;return t[0]=1-A-j,t[3]=I-J,t[6]=P+V,t[1]=I+J,t[4]=1-S-j,t[7]=L-F,t[2]=P-V,t[5]=L+F,t[8]=1-S-A,t}function fX(t,e){const i=e[0],s=e[1],a=e[2],d=e[4],y=e[5],m=e[6],_=e[8],S=e[9],I=e[10],A=I*y-m*S,P=-I*d+m*_,L=S*d-y*_,j=i*A+s*P+a*L;if(!j)return null;const F=1/j;return t[0]=A*F,t[1]=(-I*s+a*S)*F,t[2]=(m*s-a*y)*F,t[3]=P*F,t[4]=(I*i-a*_)*F,t[5]=(-m*i+a*d)*F,t[6]=L*F,t[7]=(-S*i+s*_)*F,t[8]=(y*i-s*d)*F,t}function yX(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],m=e[5],_=e[6],S=e[7],I=e[8],A=e[9],P=e[10],L=e[11],j=e[12],F=e[13],V=e[14],J=e[15],Q=i*m-s*y,Z=i*_-a*y,et=i*S-d*y,st=s*_-a*m,nt=s*S-d*m,pt=a*S-d*_,yt=I*F-A*j,$t=I*V-P*j,Ot=I*J-L*j,Ct=A*V-P*F,Nt=A*J-L*F,Ht=P*J-L*V;let Pt=Q*Ht-Z*Nt+et*Ct+st*Ot-nt*$t+pt*yt;return Pt?(Pt=1/Pt,t[0]=(m*Ht-_*Nt+S*Ct)*Pt,t[1]=(_*Ot-y*Ht-S*$t)*Pt,t[2]=(y*Nt-m*Ot+S*yt)*Pt,t[3]=(a*Nt-s*Ht-d*Ct)*Pt,t[4]=(i*Ht-a*Ot+d*$t)*Pt,t[5]=(s*Ot-i*Nt-d*yt)*Pt,t[6]=(F*pt-V*nt+J*st)*Pt,t[7]=(V*et-j*pt-J*Z)*Pt,t[8]=(j*nt-F*et+J*Q)*Pt,t):null}function mX(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function gX(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function vX(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function bX(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Fk(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function wX(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function _X(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t}function xX(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function SX(t,e){const i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],S=t[7],I=t[8],A=e[0],P=e[1],L=e[2],j=e[3],F=e[4],V=e[5],J=e[6],Q=e[7],Z=e[8],et=Is();return Math.abs(i-A)<=et*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(s-P)<=et*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(a-L)<=et*Math.max(1,Math.abs(a),Math.abs(L))&&Math.abs(d-j)<=et*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(y-F)<=et*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(m-V)<=et*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(_-J)<=et*Math.max(1,Math.abs(_),Math.abs(J))&&Math.abs(S-Q)<=et*Math.max(1,Math.abs(S),Math.abs(Q))&&Math.abs(I-Z)<=et*Math.max(1,Math.abs(I),Math.abs(Z))}function $X(t){const e=Is(),i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],m=t[5],_=t[6],S=t[7],I=t[8];return Math.abs(1-(i*i+d*d+_*_))<=e&&Math.abs(1-(s*s+y*y+S*S))<=e&&Math.abs(1-(a*a+m*m+I*I))<=e}const TX=e4,MX=Fk;Object.freeze(Object.defineProperty({__proto__:null,add:bX,adjoint:nX,copy:iX,determinant:oX,equals:SX,exactEquals:xX,frob:vX,fromMat2d:pX,fromMat4:eX,fromQuat:dX,fromRotation:uX,fromScaling:cX,fromTranslation:hX,identity:jk,invert:sX,isOrthoNormal:$X,mul:TX,multiply:e4,multiplyScalar:wX,multiplyScalarAndAdd:_X,normalFromMat4:yX,normalFromMat4Legacy:fX,projection:mX,rotate:Dk,scale:aX,scaleByVec2:lX,set:Rk,str:gX,sub:MX,subtract:Fk,translate:D3,transpose:rX},Symbol.toStringTag,{value:"Module"}));function wy(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function EX(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function IX(t,e,i,s,a,d,y,m,_){const S=new Float32Array(9);return S[0]=t,S[1]=e,S[2]=i,S[3]=s,S[4]=a,S[5]=d,S[6]=y,S[7]=m,S[8]=_,S}function AX(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:EX,create:wy,createView:AX,fromValues:IX},Symbol.toStringTag,{value:"Module"}));function zk(){return new Float32Array(2)}function kX(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Wc(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function OX(t,e){return new Float32Array(t,e,2)}function Vk(){return zk()}function Gk(){return Wc(1,1)}function Uk(){return Wc(1,0)}function qk(){return Wc(0,1)}const PX=Vk(),CX=Gk(),NX=Uk(),LX=qk();Object.freeze(Object.defineProperty({__proto__:null,ONES:CX,UNIT_X:NX,UNIT_Y:LX,ZEROS:PX,clone:kX,create:zk,createView:OX,fromValues:Wc,ones:Gk,unitX:Uk,unitY:qk,zeros:Vk},Symbol.toStringTag,{value:"Module"}));function RX(t){return t instanceof Float32Array&&t.length>=2}function jX(t){return Array.isArray(t)&&t.length>=2}function g2(t){return RX(t)||jX(t)}var F3;const uo=[0,0];let za=F3=class extends gt{constructor(t){super(t),this._viewpoint2D={center:bi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ae,this.id=0,this.inverseTransform=bl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=bl(),this.transformNoRotation=bl(),this.displayMat3=wy(),this.displayViewMat3=wy(),this.viewMat3=wy(),this.viewMat2d=Nk(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Sn(i,t.viewpoint),this._set("size",jd(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new F3({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return g2(e)?Hn(t,e,this.inverseTransform):(uo[0]=e,uo[1]=i,Hn(t,uo,this.inverseTransform))}toScreen(t,e,i){return g2(e)?Hn(t,e,this.transform):(uo[0]=e,uo[1]=i,Hn(t,uo,this.transform))}toScreenNoRotation(t,e,i){return g2(e)?Hn(t,e,this.transformNoRotation):(uo[0]=e,uo[1]=i,Hn(t,uo,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,a=this._get("size");return Q_(t,i,a,e,0,s),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:s}=this._viewpoint2D,a=this._get("pixelRatio")||1,d=this._get("size"),y=new Yn({targetGeometry:new Yt(t[0],t[1],e),scale:i,rotation:s});if(this._set("viewpoint",y),!d||!e||!i)return;this.resolution=f0(y),this.rotation=s,this.scale=i,this.spatialReference=e,jd(this.center,t);const m=d[0]!==0?2/d[0]:0,_=d[1]!==0?-2/d[1]:0;Rk(this.displayMat3,m,0,0,0,_,0,-1,1,1);const S=jk(this.viewMat3),I=Wc(d[0]/2,d[1]/2),A=Wc(-d[0]/2,-d[1]/2),P=q5(s);D3(S,S,I),Dk(S,S,P),D3(S,S,A),e4(this.displayViewMat3,this.displayMat3,S);const L=K_(this.viewMat2d,I);return sv(L,L,P),Rd(L,L,A),_Z(this.extent,y,d),t4(this.transform,y,d,a),W_(this.inverseTransform,this.transform),IZ(this.transformNoRotation,y,d,a),this.worldScreenWidth=kZ(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};w([T({readOnly:!0})],za.prototype,"id",void 0),w([T({value:1,json:{write:!0}})],za.prototype,"pixelRatio",null),w([T({json:{write:!0}})],za.prototype,"size",null),w([T()],za.prototype,"spatialReference",void 0),w([T({type:Yn,json:{write:!0}})],za.prototype,"viewpoint",null),za=F3=w([W("esri.views.2d.ViewState")],za);const xx=za;var z3,V3;let Lo=z3=class extends Rt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new z3({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};w([T()],Lo.prototype,"left",void 0),w([T()],Lo.prototype,"top",void 0),w([T()],Lo.prototype,"right",void 0),w([T()],Lo.prototype,"bottom",void 0),Lo=z3=w([W("esri.views.2d.PaddedViewState.Padding")],Lo);let Xu=V3=class extends xx{constructor(...t){super(...t),this.paddedViewState=new xx,this._updateContent=(()=>{const e=bi();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const a=this.paddedViewState;Bi(e,s.left+s.right,s.top+s.bottom),Dd(e,i,e),jd(a.size,e);const d=a.viewpoint;d&&(this.viewpoint=d)}})(),this.addHandles(It(()=>[this.size,this.padding],()=>this._updateContent(),p0)),this.padding=new Lo,this.size=[0,0]}set padding(t){this._set("padding",t||new Lo)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,PZ(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=e.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new V3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};w([T()],Xu.prototype,"paddedViewState",void 0),w([T({type:Lo})],Xu.prototype,"padding",null),w([T()],Xu.prototype,"viewpoint",null),Xu=V3=w([W("esri.views.2d.PaddedViewState")],Xu);const DX=Xu;let vr=class extends Rt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([It(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},p0)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Yt({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(a){return void mt.getLogger(this).error(new lt("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:a}))}const s=this.viewpoint;N3(s,s,i),this.viewpoint=s}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void mt.getLogger(this).error(new lt("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(a){return void mt.getLogger(this).error(new lt("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:a}))}const s=this.viewpoint;xZ(s,s,i,this.state.size,{constraints:this.constraints}),this.viewpoint=s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;NZ(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.viewpoint;mx(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var d;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,s;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?s=new lt("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(s=new lt("mapview:invalid-viewpoint","geometry not defined"))}catch(y){s=new lt("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:y})}if(s)return void mt.getLogger(this).error(s);this._scaleBeforeChangingSpatialReference=null;const a=new Yn({targetGeometry:new Yt,scale:0,rotation:0});Sn(a,i),(d=this.constraints)==null||d.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this._set("viewpoint",a)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var a,d;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const y=this._get("extent");return void(y&&(this._set("extent",void 0),this._set("center",y.center)))}const i=((a=this.constraints)==null?void 0:a.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const s=this.viewpoint;mx(s,s,i),this.viewpoint=s,this._set("zoom",((d=this.constraints)==null?void 0:d.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:s}=this,a=this._get("center"),d=this._get("extent"),y=this._get("scale"),m=this._get("rotation"),_=this._get("viewpoint"),S=this._get("zoom"),I=S!=null&&s!=null&&s.zoomToScale(S)||void 0;let A,P,L;const j=_==null?void 0:_.rotation,F=_==null?void 0:_.targetGeometry;(F==null?void 0:F.type)==="extent"?A=F:(F==null?void 0:F.type)==="point"&&(P=F,L=_==null?void 0:_.scale);const V=d??A;return{center:a??P??(V==null?void 0:V.center),rotation:m??j,scale:(y??I??L??(V&&Ac(V,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,s,a){var y;const d=e.targetGeometry;try{this._project(e,s)}catch(m){mt.getLogger(this).warn(new gn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:d.toJSON(),spatialReference:s,error:m})),e.targetGeometry=a||new Yt({x:0,y:0,spatialReference:s})}(y=this.constraints)==null||y.fit(e),this._set("state",new DX({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:s,rotation:a,scale:d}=this.state.paddedViewState,y=new Yt({x:e,y:i,spatialReference:s});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",a),this._set("scale",d),this._set("state",null)}changeSpatialReference(e){var _;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const S=i.viewpoint.clone();S.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=S}const s=i.clone(),[a,d]=i.center;let y=null;try{y=this._project(new Yt({x:a,y:d,spatialReference:i.spatialReference}),e)}catch(S){C_()||mt.getLogger(this).warn(new gn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y==null?void 0:y.toJSON(),spatialReference:e,error:S}))}y||(y=new Yt({x:0,y:0,spatialReference:e}));const m=N3(new Yn({targetGeometry:new Yt,scale:0,rotation:0}),i.viewpoint,y);s.viewpoint=m;try{const I=[i.size[0]/2,i.size[1]/2],A=[I[0]+20,I[1]],P=i.toMap([0,0],A),{x:L,y:j}=this._project(new Yt({x:P[0],y:P[1],spatialReference:i.spatialReference}),e);P[0]=L,P[1]=j,s.toScreen(P,P);const F=OZ(I,P,A),V=Math.hypot(P[0]-I[0],P[1]-I[1])/20;!Number.isFinite(V)||Math.abs(V)>4?(m.rotation=0,m.targetGeometry=new Yt({x:0,y:0,spatialReference:e})):(m.scale*=V,m.scale>at("mapview-srswitch-adjust-rotation-scale-threshold")?m.rotation=0:m.rotation+=Number.isFinite(F)?F:0)}catch{}(_=this._get("constraints"))==null||_.constrain(m,void 0),this._get("state").viewpoint=m}resize(e,i){var y;if(!this.ready)return;const s=this.state;let a=this.state.paddedViewState.viewpoint;const d=this.state.paddedViewState.size.concat();s.size=[e,i],CZ(a,a,d,this.state.paddedViewState.size,this.resizeAlign),a=((y=this.constraints)==null?void 0:y.constrain(a,void 0))??a,this.state.viewpoint=a}toMap(e){if(!this.ready)return null;const i=[0,0],[s,a]=this.state.toMap(i,[e.x,e.y]),d=this.state.spatialReference;return new Yt({x:s,y:a,spatialReference:d})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),s=[i.x,i.y];return this.state.toScreen(s,s),Sr(s[0],s[1])}_project(e,i){var d;const s=e&&e.targetGeometry||e;if(!i)return e;if(!s)return null;if(i.imageCoordinateSystem||(d=s.spatialReference)!=null&&d.imageCoordinateSystem||Oi(i,s.spatialReference))return e;const a=Rl(s,i);if(!a)throw new lt("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:i});return FX(e)?(e.targetGeometry=a,e):a}};function FX(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}w([T({type:Yt})],vr.prototype,"center",null),w([T()],vr.prototype,"constraints",void 0),w([T({type:Ae})],vr.prototype,"extent",null),w([T({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],vr.prototype,"padding",null),w([T()],vr.prototype,"ready",void 0),w([T()],vr.prototype,"resizeAlign",void 0),w([T({readOnly:!0})],vr.prototype,"resolution",null),w([T({type:Number})],vr.prototype,"rotation",null),w([T({type:Number})],vr.prototype,"scale",null),w([T({readOnly:!0})],vr.prototype,"state",void 0),w([T({type:Yn})],vr.prototype,"viewpoint",null),w([T()],vr.prototype,"zoom",null),vr=w([W("esri.views.2d.ViewStateManager")],vr);function i4(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let Sx=class extends zi{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(e,i){i4(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},zX=class extends zi{constructor(e,i,s){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",s,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:s}=i;if(s!==this.pointerType)return;e.stopPropagation();const{action:a,delta:d}=i,{view:y}=this,{mapViewNavigation:m}=y;switch(a){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=d,m.begin();break}case"update":{if(this._previousDelta.y===d.y)return;this._previousDelta=d;const _=1.015**d.y,S=this._startScale*_,I=S/this._currentScale;m.setViewpointImmediate(I),this._currentScale=S;break}case"end":{const{constraints:_}=y,{effectiveLODs:S,snapToZoom:I}=_;if(!I||!S)return void m.end();const A=_.snapScale(this._currentScale),P=(d.y>0?Math.max(A,_.snapToPreviousScale(this._startScale)):Math.min(A,_.snapToNextScale(this._startScale)))/this._currentScale;m.zoom(P);break}}}},ov=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,s=i.pointers.size;switch(i.action){case"start":this._currentCount=s,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,s;this._startEvent=e,(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,s;(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,s;(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},VX=class extends zi{constructor(e,i,s){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",s,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new ov({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&i4(s.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},GX=class extends zi{constructor(e,i,s){super(!0),this._view=e,this.pointerAction=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new ov({start:(d,y)=>{a.rotate.begin(this._view,y.data),y.stopPropagation()},update:(d,y)=>{a.rotate.update(this._view,y.data),y.stopPropagation()},end:(d,y)=>{a.rotate.end(),y.stopPropagation()},condition:(d,y)=>d===1&&i4(y.data,this.pointerAction)}),this.registerIncoming("drag",s,d=>this._dragEventSeparator.handle(d))}};function Fs(t){let e=t*t;return t<0&&(e*=-1),e}function UX(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function qX(t,e,i){const s=i,a=t.state,d=t.device,y=e.tiltDirection==="forward-down"?1:-1,m=1;return d.deviceType==="standard"?(s.translation[0]=Fs(a.axes[0]),s.translation[1]=Fs(a.axes[1]),s.translation[2]=Fs(a.buttons[7])-Fs(a.buttons[6]),s.heading=Fs(a.axes[2]),s.tilt=Fs(a.axes[3])):d.deviceType==="spacemouse"&&(s.translation[0]=1.2*Fs(a.axes[0]),s.translation[1]=1.2*Fs(a.axes[1]),s.translation[2]=2*-Fs(a.axes[2]),s.heading=1.2*Fs(a.axes[5]),s.tilt=1.2*Fs(a.axes[3])),s.tilt*=y,HT(s.translation,s.translation,m),s}function BX(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let HX=class extends zi{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Qo,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([It(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Rc({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},xe)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,UX(this._transformation)):(this._currentDevice=e.data.device,qX(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(BX(i))return;const s=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,d=JX*a*e;nv(s,s,[i.translation[0]*d,-i.translation[1]*d]);const y=1+i.translation[2]*KX*e,m=this._view.constraints.rotationEnabled?-i.heading*WX*e:0,_=this._view.size,S=[_[0]/2,_[1]];Tk(s,s,y,m,S,_);const I=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=I}};const WX=.06,JX=.7,KX=6e-4;let YX=class extends zi{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const s=this._keyMap[e.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},ZX=class extends zi{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const s=e.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection[e.data.key];if(this._pressed=a!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var bc;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(bc||(bc={}));let XX=class extends zi{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=bc.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=bc.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=e.data;if(!(s in this._keysToZoomAction))return;const a=this._keysToZoomAction[s],{mapViewNavigation:d}=this.view;let y=null;switch(a){case bc.IN:y=d.zoomIn();break;case bc.OUT:y=d.zoomOut();break;default:return}d.begin(),y.then(()=>d.end()),e.stopPropagation()}};const QX=.6;let tQ=class extends zi{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:a,deltaY:d}=e.data,y=1/QX**(1/60*d),m=i.zoom(y,[s,a]);m&&(this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},eQ=class extends zi{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new ov({start:(s,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(s,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(s,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:s=>s>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function $x(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>sQ(i,t.axisThreshold))}:{buttons:[],axes:[]}}function iQ(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function rQ(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function sQ(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let nQ=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=d=>{this._connectGamepad(d.gamepad)},this._onDisconnectGamepad=d=>{const y=d.gamepad,m=y.index,_=this._inputDevices[m];_&&(this._emitGamepadEvent(y,$x(_),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(_),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=s&&a,this.supported&&(this._forEachGamepad(d=>this._connectGamepad(d)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new B_(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Rc({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(a=>{const d=this._inputDevices[a.index];if(!d)return;const y=this._latestUpdate[a.index],m=$x(d),_=s||rQ(m);y&&(y.timestamp===a.timestamp||!y.active&&_||iQ(y.state,m))||this._emitGamepadEvent(a,m,!_)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let s=0;s<i.length;s++){const a=i[s];this._validate(a)&&e(a)}}_emitGamepadEvent(e,i,s){const a=this._latestUpdate[e.index],d=a&&a.active;if(!d&&!s)return;const y=!d&&s?"start":d&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:y})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const Tx=at("edge"),oQ=at("chrome"),aQ=at("ff"),lQ=at("safari"),Mx="esri-view-surface",Nu={touchNone:`${Mx}--touch-none`,touchPan:`${Mx}--touch-pan`};let Bk=class Hk{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new nQ(e,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Je(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const s=this._active[i];this._element.removeEventListener(v2[i],s),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&v2[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(v2[i],s),this._active[i]=s}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Nu.touchNone:Nu.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Nu.touchPan:Nu.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Nu.touchNone),this._element.classList.remove(Nu.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const s=JA(this._element,e);return Hk.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(e,i){const s=SK(i);s&&e==="key-up"&&this._keyDownState.delete(s);const a={native:i,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&e==="key-down"&&this._keyDownState.add(a.key),this._callback(e,a)}_handlePointer(e,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,s)}_handlePointerPreventDefault(e,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,s)}_handleMouseWheel(e,i){let s=i.deltaY;switch(i.deltaMode){case 0:Tx&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}Tx?s*=.7:oQ||lQ?s*=.6:aQ&&(s*=1.375);const a=100,d=Math.abs(s);d>a&&(s=s/d*200/(1+Math.exp(-.02*(d-a))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(e,y)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const s={native:i};i.preventDefault(),this._callback(e,s)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};Bk.test={disableSubpixelCoordinates:!1};const v2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let hQ=class extends zi{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function r4(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function uQ(t,e){const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}function cQ(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Sr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[Z,et]=t,[st,nt]=[et.x-Z.x,et.y-Z.y];return e.radius=Math.sqrt(st*st+nt*nt)/2,e.center.x=(Z.x+et.x)/2,e.center.y=(Z.y+et.y)/2,e}let i=0,s=0;for(let Z=0;Z<t.length;Z++)i+=t[Z].x,s+=t[Z].y;i/=t.length,s/=t.length;const a=t.map(Z=>Z.x-i),d=t.map(Z=>Z.y-s);let y=0,m=0,_=0,S=0,I=0,A=0,P=0;for(let Z=0;Z<a.length;Z++){const et=a[Z],st=d[Z],nt=et*et,pt=st*st;y+=nt,m+=pt,_+=et*st,S+=nt*et,I+=pt*st,A+=et*pt,P+=st*nt}const L=.5*(S+A),j=.5*(I+P),F=y*m-_*_,V=(L*m-j*_)/F,J=(y*j-_*L)/F,Q=Sr(V+i,J+s);return{radius:Math.sqrt(V*V+J*J+(y+m)/t.length),center:Q}}function Kh(t){const{native:e}=t,{pointerId:i,button:s,pointerType:a}=e;return a==="mouse"?`${i}:${s}`:`${a}`}const $s={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let pQ=class extends zi{constructor(e=$s.maximumDoubleClickDelay,i=$s.maximumDoubleClickDistance,s=$s.maximumDoubleTouchDelay,a=$s.maximumDoubleTouchDistance,d=Zc){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=d,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=si(e.doubleClickTimer))}get hasPendingInputs(){return Ag(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const s=this._pointerState.get(e);s&&(s.doubleClickTimer=si(s.doubleClickTimer),i&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:s,button:a}=e.native;return s==="mouse"?`${i}:${a}`:`${s}`}_handleImmediateClick(e){const i=e.data,{pointerType:s}=i.native,a=this._getPointerId(i);if(!this._pointerState.has(a))return void this._startClick(e);const d=this._pointerState.get(a),{data:y,modifiers:m}=d.event,_=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r4(y,i)>_?(this._clearDoubleClickTimer(a,!0),this._startClick(e)):(this._clearDoubleClickTimer(a,!1),d.pointerDownCount===2&&this._doubleClick.emit(y,void 0,m))}_handlePointerDown(e){const i=Kh(e.data),s=this._pointerState.get(i);s&&(s.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:s}}=i,a=Kh(i),d=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),d),m=1;this._pointerState.set(a,{event:e,doubleClickTimer:y,pointerDownCount:m}),this.refreshHasPendingInputs()}},dQ=class extends zi{constructor(e=$s.maximumDoubleClickDelay,i=$s.maximumDoubleClickDistance,s=$s.maximumDoubleTouchDelay,a=$s.maximumDoubleTouchDistance,d=Zc){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=d,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Sr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new ov({start:(y,m)=>this._dragStart(y,m),update:(y,m)=>this._dragUpdate(m),end:(y,m)=>this._dragEnd(m)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=si(e.doubleTapTimeout)})}get hasPendingInputs(){return Ag(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=si(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,s){const{button:a,buttons:d,pointer:y,pointers:m,pointerType:_,timestamp:S}=s;return{action:e,delta:i,button:a,buttons:d,pointer:y,pointers:m,pointerType:_,timestamp:S}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:a}=i,{center:d}=s;this._dragStartCenter=d;const y=this._createDoubleTapDragData("begin",Sr(0,0),s);this._doubleTapDrag.emit(y,void 0,a),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=e,{center:a}=i,d=Sr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",d,i);this._doubleTapDrag.emit(y,void 0,s),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=e,{center:a}=i,d=Sr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",d,i);this._doubleTapDrag.emit(y,void 0,s),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,s=Kh(i),a=this._pointerState.get(s),{pointerType:d}=i.native;if(a){const y=d==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),r4(a.event.data,i)>y?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:s}=i.native,a=Kh(i),d=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(a),d);this._pointerState.set(a,{event:e,doubleTapTimeout:y}),this.refreshHasPendingInputs()}},fQ=class extends zi{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,s,a){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:a,pointers:yQ(this._activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(e){const i=e.native.pointerId,s=c1(this._activePointerMap).angle,a={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,a);const d=_y(a,Wk(this._activePointerMap));a.initialAngle=d,a.lastAngle=d,this._updatePointerAngles(s)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,s=this._activePointerMap.get(i);s?s.event=e:this._addPointer(e)}_removePointer(e){const i=c1(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=c1(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=_y(s,i)-e,s.lastAngle=_y(s,i)-e})}_emitEvent(e,i,s){const a=c1(this._activePointerMap);this._drag.emit(this._createPayload(e,i,a,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,s=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,s=i.currentEvent,a=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,a)):(this._addPointer(s),this._emitEvent("added",s,a),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,a))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Wk(t){const e=[];return t.forEach(i=>{e.push(Sr(i.event.x,i.event.y))}),cQ(e)}function c1(t){const e=Wk(t);let i=0;return t.forEach(s=>{let a=_y(s,e),d=a-s.lastAngle;for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;a=s.lastAngle+d,s.lastAngle=a;const y=a-s.initialAngle;i+=y}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function yQ(t){const e=new Map;return t.forEach((i,s)=>e.set(s,i.event)),e}function _y(t,e){const i=t.event,s=i.x-e.center.x,a=i.y-e.center.y;return Math.atan2(a,s)}var Ex;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(Ex||(Ex={}));let mQ=class extends zi{constructor(e=$s.maximumDoubleClickDelay,i=$s.maximumDoubleClickDistance,s=$s.maximumDoubleTouchDelay,a=$s.maximumDoubleTouchDistance,d=Zc){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=d,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,s=Kh(i);if(!this._pointerState.has(s)){const a={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(s,a),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,s=Kh(i),a=this._pointerState.get(s);if(a&&a.downButton===i.native.button){const d=a.immediateDoubleClick;if(d){d.timeoutHandle.remove();const y=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r4(d,e.data)>y?this._startImmediateDoubleClick(e,a):(this._immediateDoubleClick.emit(e.data,void 0,d.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,a)}}_startImmediateDoubleClick(e,i){const s=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),s)}}_removeState(e){const i=Kh(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const j0={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let gQ=class extends zi{constructor(e=j0.maximumClickDelay,i=j0.movementUntilMouseDrag,s=j0.movementUntilPenDrag,a=j0.movementUntilTouchDrag,d=j0.holdDelay,y=Zc){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=a,this._holdDelay=d,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",m=>{this._handlePointerLoss(m,"pointer-up")}),this.registerIncoming("pointer-capture-lost",m=>{this._handlePointerLoss(m,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",m=>{this._handlePointerLoss(m,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=si(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,s=i.native.pointerId;let a=null;this._pointerState.size===0&&(a=this._clock.setTimeout(()=>{const y=this._pointerState.get(s);if(y){if(!y.isDragging){const m=y.previousEvent;this._pointerHold.emit(m,void 0,e.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const d={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(s,d),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,s){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:s}}_handlePointerMove(e){const i=e.data,s=i.native.pointerId,a=this._pointerState.get(s);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,i),void 0,a.modifiers):uQ(i,a.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),a.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,s=i.native.pointerId;this._pointerState.forEach(a=>{a.holdTimeout!=null&&(a.holdTimeout.remove(),a.holdTimeout=null),a.isDragging||(a.modifiers=e.modifiers,a.isDragging=!0,s===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,i)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const s=e.data,a=s.native.pointerId,d=this._pointerState.get(a);d&&(d.holdTimeout!=null&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,i==="pointer-up"?s:d.previousEvent),void 0,d.modifiers):i==="pointer-up"&&d.downButton===s.native.button&&e.timestamp-d.startTimestamp<=this._maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(a),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}};const p1={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let fh=class extends Rt{constructor(){super(...arguments),this._handles=new Qo}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Sl(()=>!e(),()=>this._disconnect()),Sl(e,()=>this._connect())])}destroy(){this._handles=Je(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Je(this._inputManager)}_connect(){const e=this.view.surface,i=new Bk(e,this.view.input),s=[new mQ,new gQ,new pQ,new fQ(this.view.navigation),new dQ],a=new fs({eventSource:i,recognizers:s});a.installHandlers("prevent-context-menu",[new hQ],vl.INTERNAL),a.installHandlers("navigation",[new eQ(this.view),new HX(this.view),new tQ(this.view),new Sx(this.view),new Sx(this.view,[p1.counter]),new VX(this.view,"primary"),new YX(this.view,p1.pan),new XX(this.view,p1.zoom),new ZX(this.view,p1.rotate),new GX(this.view,"secondary"),new zX(this.view,"touch")],vl.INTERNAL),this.view.viewEvents.connect(a),this._source=i,this._inputManager=a,It(()=>{var d,y;return(y=(d=this.view)==null?void 0:d.navigation)==null?void 0:y.browserTouchPanEnabled},d=>{this._source&&(this._source.browserTouchPanningEnabled=!d)},xe)}get test(){return{inputManager:this._inputManager}}};w([T()],fh.prototype,"view",void 0),w([T()],fh.prototype,"latestPointerType",null),w([T()],fh.prototype,"latestPointerLocation",null),w([T()],fh.prototype,"multiTouchActive",null),fh=w([W("esri.views.2d.input.MapViewInputManager")],fh);const vQ=fh;var kdt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ix,Ax,kx,G3={exports:{}};G3.exports,Ix=G3,Ax=function(){function t(a,d,y,m,_){e(a,d,y||0,m||a.length-1,_||s)}function e(a,d,y,m,_){for(;m>y;){if(m-y>600){var S=m-y+1,I=d-y+1,A=Math.log(S),P=.5*Math.exp(2*A/3),L=.5*Math.sqrt(A*P*(S-P)/S)*(I-S/2<0?-1:1);e(a,d,Math.max(y,Math.floor(d-I*P/S+L)),Math.min(m,Math.floor(d+(S-I)*P/S+L)),_)}var j=a[d],F=y,V=m;for(i(a,y,d),_(a[m],j)>0&&i(a,y,m);F<V;){for(i(a,F,V),F++,V--;_(a[F],j)<0;)F++;for(;_(a[V],j)>0;)V--}_(a[y],j)===0?i(a,y,V):i(a,++V,m),V<=d&&(y=V+1),d<=V&&(m=V-1)}}function i(a,d,y){var m=a[d];a[d]=a[y],a[y]=m}function s(a,d){return a<d?-1:a>d?1:0}return t},(kx=Ax())!==void 0&&(Ix.exports=kx);const bQ=Jk(G3.exports);function Km(t,e){if(!(this instanceof Km))return new Km(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function wQ(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function Lu(t,e){Sp(t,0,t.children.length,e,t)}function Sp(t,e,i,s,a){a||(a=Qu(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var d,y=e;y<i;y++)d=t.children[y],$p(a,t.leaf?s(d):d);return a}function $p(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ox(t,e){return t.minX-e.minX}function Px(t,e){return t.minY-e.minY}function b2(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d1(t){return t.maxX-t.minX+(t.maxY-t.minY)}function _Q(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function xQ(t,e){var i=Math.max(t.minX,e.minX),s=Math.max(t.minY,e.minY),a=Math.min(t.maxX,e.maxX),d=Math.min(t.maxY,e.maxY);return Math.max(0,a-i)*Math.max(0,d-s)}function w2(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f1(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Qu(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Cx(t,e,i,s,a){for(var d,y=[e,i];y.length;)(i=y.pop())-(e=y.pop())<=s||(d=e+Math.ceil((i-e)/s/2)*s,bQ(t,d,e,i,a),y.push(e,d,d,i))}Km.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],s=this.toBBox;if(!f1(t,e))return i;for(var a,d,y,m,_=[];e;){for(a=0,d=e.children.length;a<d;a++)y=e.children[a],f1(t,m=e.leaf?s(y):y)&&(e.leaf?i.push(y):w2(t,m)?this._all(y,i):_.push(y));e=_.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f1(t,e))return!1;for(var s,a,d,y,m=[];e;){for(s=0,a=e.children.length;s<a;s++)if(d=e.children[s],f1(t,y=e.leaf?i(d):d)){if(e.leaf||w2(t,y))return!0;m.push(d)}e=m.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var s=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var a=this.data;this.data=s,s=a}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Qu([]),this},remove:function(t,e){if(!t)return this;for(var i,s,a,d,y=this.data,m=this.toBBox(t),_=[],S=[];y||_.length;){if(y||(y=_.pop(),s=_[_.length-1],i=S.pop(),d=!0),y.leaf&&(a=wQ(t,y.children,e))!==-1)return y.children.splice(a,1),_.push(y),this._condense(_),this;d||y.leaf||!w2(y,m)?s?(i++,y=s.children[i],d=!1):y=null:(_.push(y),S.push(i),i=0,s=y,y=y.children[0])}return this},toBBox:function(t){return t},compareMinX:Ox,compareMinY:Px,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,s){var a,d=i-e+1,y=this._maxEntries;if(d<=y)return Lu(a=Qu(t.slice(e,i+1)),this.toBBox),a;s||(s=Math.ceil(Math.log(d)/Math.log(y)),y=Math.ceil(d/Math.pow(y,s-1))),(a=Qu([])).leaf=!1,a.height=s;var m,_,S,I,A=Math.ceil(d/y),P=A*Math.ceil(Math.sqrt(y));for(Cx(t,e,i,P,this.compareMinX),m=e;m<=i;m+=P)for(Cx(t,m,S=Math.min(m+P-1,i),A,this.compareMinY),_=m;_<=S;_+=A)I=Math.min(_+A-1,S),a.children.push(this._build(t,_,I,s-1));return Lu(a,this.toBBox),a},_chooseSubtree:function(t,e,i,s){for(var a,d,y,m,_,S,I,A;s.push(e),!e.leaf&&s.length-1!==i;){for(I=A=1/0,a=0,d=e.children.length;a<d;a++)_=b2(y=e.children[a]),(S=_Q(t,y)-_)<A?(A=S,I=_<I?_:I,m=y):S===A&&_<I&&(I=_,m=y);e=m||e.children[0]}return e},_insert:function(t,e,i){var s=this.toBBox,a=i?t:s(t),d=[],y=this._chooseSubtree(a,this.data,e,d);for(y.children.push(t),$p(y,a);e>=0&&d[e].children.length>this._maxEntries;)this._split(d,e),e--;this._adjustParentBBoxes(a,d,e)},_split:function(t,e){var i=t[e],s=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,s);var d=this._chooseSplitIndex(i,a,s),y=Qu(i.children.splice(d,i.children.length-d));y.height=i.height,y.leaf=i.leaf,Lu(i,this.toBBox),Lu(y,this.toBBox),e?t[e-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(t,e){this.data=Qu([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Lu(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var s,a,d,y,m,_,S,I;for(_=S=1/0,s=e;s<=i-e;s++)y=xQ(a=Sp(t,0,s,this.toBBox),d=Sp(t,s,i,this.toBBox)),m=b2(a)+b2(d),y<_?(_=y,I=s,S=m<S?m:S):y===_&&m<S&&(S=m,I=s);return I},_chooseSplitAxis:function(t,e,i){var s=t.leaf?this.compareMinX:Ox,a=t.leaf?this.compareMinY:Px;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,a)&&t.children.sort(s)},_allDistMargin:function(t,e,i,s){t.children.sort(s);var a,d,y=this.toBBox,m=Sp(t,0,e,y),_=Sp(t,i-e,i,y),S=d1(m)+d1(_);for(a=e;a<i-e;a++)d=t.children[a],$p(m,t.leaf?y(d):d),S+=d1(m);for(a=i-e-1;a>=e;a--)d=t.children[a],$p(_,t.leaf?y(d):d),S+=d1(_);return S},_adjustParentBBoxes:function(t,e,i){for(var s=i;s>=0;s--)$p(e[s],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Lu(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var U3;const Nx=new Ie({upperLeft:"upper-left",lowerLeft:"lower-left"});let yh=U3=class extends gt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new U3(ot({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};w([T({type:Ae,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],yh.prototype,"extent",void 0),w([T({type:["view","edit"],json:{write:!0}})],yh.prototype,"mode",void 0),w([T({type:String,json:{read:Nx.read,write:Nx.write}})],yh.prototype,"originPosition",void 0),w([T({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],yh.prototype,"tolerance",void 0),yh=U3=w([W("esri.rest.support.QuantizationParameters")],yh);const Kk=yh;let Lx=class Yk{constructor(e,i){this.key=new pu(0,0,0,0),this.bounds=to(),this.objectIds=new Set,this.key.set(i);const s=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level}get id(){return this.key.id}get extent(){return Ae.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=_r.acquire();for(let s=0;s<e.length;s++)i[s]=new Yk(this.tileInfoView,e[s]);return i}getQuantizationParameters(){return Kk.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Bl={added:[],removed:[]},_2=new Set,SQ=new pu(0,0,0,0);let $Q=class extends kl{constructor(e){super(),this._tiles=new Map,this._index=Km(9,at("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const a=new Lx(this.tileScheme,s);this._tiles.set(s,a),this._index.insert(a),i.added.push(a)}for(const s of e.removed)if(this.has(s)){const a=this.get(s);this._tiles.delete(s),this._index.remove(a),i.removed.push(a)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:s,lodInfo:a}=i,{level:d}=a;if(s.length>0)for(const{row:y,colFrom:m,colTo:_}of s)for(let S=m;S<=_;S++){const I=SQ.set(d,y,a.normalizeCol(S),a.getWorldForColumn(S)).id;if(_2.add(I),!this.has(I)){const A=new Lx(this.tileScheme,I);this._tiles.set(I,A),this._index.insert(A),this.tiles.push(A),Bl.added.push(A)}}for(let y=this.tiles.length-1;y>=0;y--){const m=this.tiles[y];_2.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(y,1),this._index.remove(m),Bl.removed.push(m))}(Bl.added.length||Bl.removed.length)&&this.emit("update",Bl),Fd.pool.release(i),_2.clear(),Bl.added.length=0,Bl.removed.length=0}},mh=class extends Rt{constructor(){super(...arguments),this.color=new Xt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};w([T({type:Xt})],mh.prototype,"color",void 0),w([T({type:Xt})],mh.prototype,"haloColor",void 0),w([T()],mh.prototype,"haloOpacity",void 0),w([T()],mh.prototype,"fillOpacity",void 0),mh=w([W("esri.views.2d.support.HighlightOptions")],mh);const Zk=mh,TQ=t=>t.includes("Brush");let Xk=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),TQ(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function MQ(t,e,i,s,a,d,y,m){t.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let _=null;t.width!=null&&t.height!=null?_=[t.width,t.height]:t.width==null&&t.height!=null?_=[t.height,t.height]:t.width!=null&&t.height==null?_=[t.width,t.width]:t.width==null&&t.height==null&&(_=null);const S=i[0]-(s.left+s.right),I=i[1]-(s.top+s.bottom);let A,P,L=t.area||{x:0,y:0,width:S,height:I};if(_){const j=S/I,F=_[0]/_[1];if(F>j){const V=L.width/F;L={x:L.x,y:Math.round(L.y+(L.height-V)/2),width:L.width,height:Math.round(V)}}else{const V=L.height*F;L={x:Math.round(L.x+(L.width-V)/2),y:L.y,width:Math.round(V),height:L.height}}}else _=[L.width,L.height];return _[0]>L.width?(A=Math.min(_[0]/L.width,e),P=_[0]/L.width/A):(A=1,P=_[0]/L.width),{resolutionScale:A,cropArea:{x:Math.round((L.x+s.left)*A),y:Math.round((L.y+s.top)*A),width:Math.round(L.width*A),height:Math.round(L.height*A)},outputScale:P,format:a,quality:d,children:y,rotation:m}}function EQ(t,e,i){const{ctx:s,canvas:a}=Qk(t,i),d=s.getImageData(0,0,t.width,t.height),y=kQ(a,e);return tO(a),{dataUrl:y,data:d}}function IQ(t,e){const{ctx:i,canvas:s}=Qk(t,e),a=i.getImageData(0,0,t.width,t.height);return tO(s),a}function Qk(t,e){const i=AQ();e.premultipliedAlpha&&LQ(t),i.width=t.width,i.height=t.height;const s=i.getContext("2d",{willReadFrequently:!0});return s.putImageData(t,0,0),e.flipY&&NQ(s),{ctx:s,canvas:i}}function tO(t){t.width=0,t.height=0}function AQ(){return x2==null&&(x2=document.createElement("canvas")),x2}let x2=null;function kQ(t,e){const i=RQ[e.format],s=e.quality/100;return t.toDataURL(i,s)}function OQ(t,e){const i=CQ(t),s=DQ[i];return{format:i,quality:Es(e??s,0,100)}}function PQ(t,e){return e/Math.max(t[0],t[1])}function Ndt(t,e,i,s=0,a=0,d=t.width-s,y=t.height-a,m=!1){const{data:_}=t,{width:S,height:I,data:A}=e,P=d/S,L=y/I,j=Math.ceil(P/2),F=Math.ceil(L/2),V=t.width;for(let J=0;J<I;J++)for(let Q=0;Q<S;Q++){const Z=4*(Q+(m?I-J-1:J)*S);let et=0,st=0,nt=0,pt=0,yt=0,$t=0;const Ot=(J+.5)*L;for(let Ct=Math.floor(J*L);Ct<(J+1)*L;Ct++){const Nt=Math.abs(Ot-(Ct+.5))/F,Ht=(Q+.5)*P,Pt=Nt*Nt;for(let Ve=Math.floor(Q*P);Ve<(Q+1)*P;Ve++){const pi=Math.abs(Ht-(Ve+.5))/j,Ge=Math.sqrt(Pt+pi*pi);if(Ge>=1)continue;let le=2*Ge*Ge*Ge-3*Ge*Ge+1;const fr=4*(s+Ve+(a+Ct)*V);$t+=le*_[fr+3],st+=le,!i&&_[fr+3]<255&&(le=le*_[fr+3]/255),nt+=le*_[fr],pt+=le*_[fr+1],yt+=le*_[fr+2],et+=le}}A[Z]=nt/et,A[Z+1]=pt/et,A[Z+2]=yt/et,A[Z+3]=$t/st}return e}function CQ(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return jQ}}function NQ(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function LQ(t){const e=t.data,i=e.length;for(let s=0;s<i;s+=4){const a=e[s+3];if(a!==255&&a>0){const d=255/a;e[s]=e[s]*d,e[s+1]=e[s+1]*d,e[s+2]=e[s+2]*d}}}const RQ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Rx=98,jQ="png",DQ={png:100,jpg:Rx,jpeg:Rx};var Ai;function q3(t,e,i={}){const s=e===Ai.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const a of s){const d=t.getContext(a,i);if(d)return d}return null}function Ldt(t,e,i={}){const s=eO(t);for(const a of s){const d=q3(e,a,i);if(d)return d}return null}function eO(t){if(t==="3d")return[Ai.WEBGL2];const e=at("esri-force-webgl");return e===Ai.WEBGL1||e===Ai.WEBGL2?[e]:at("mac")&&at("chrome")?[Ai.WEBGL1,Ai.WEBGL2]:[Ai.WEBGL2,Ai.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Ai||(Ai={}));let S2,$2;function FQ(t){const e=eO(t);for(;e.length>1;){const i=jx(e.shift());if(i.available)return i}return jx(e.shift())}function jx(t){switch(t){case Ai.WEBGL1:return zQ();case Ai.WEBGL2:return VQ()}}function zQ(){return S2||(S2=qQ()),S2}function VQ(){return $2||($2=BQ()),$2}let iO=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},GQ=class extends iO{constructor(){super(...arguments),this.type=Ai.WEBGL1}},UQ=class extends iO{constructor(){super(...arguments),this.type=Ai.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function rO(t,e){if(t===Ai.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Ai.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let s=q3(i,t,{failIfMajorPerformanceCaveat:!0});if(s==null&&(s=q3(i,t),s!=null&&(e.majorPerformanceCaveat=!0)),s==null)return s;if(t===Ai.WEBGL1){const d=s.getParameter(s.VERSION),y=d==null?void 0:d.match(/^WebGL\s+([\d.]*)/);if(y){const m=parseFloat(y[1]);e.available=m>=.94}}else e.available=!0;e.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return a&&(e.supportsHighPrecisionFragment=a.precision>0),s}function qQ(){const t=new GQ,e=rO(Ai.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function BQ(){const t=new UQ,e=rO(Ai.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function HQ(t){const e=FQ(t);if(!e.available)return new lt("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new lt("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new lt("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new lt("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Ai.WEBGL1){if(!e.supportsElementIndexUint)return new lt("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new lt("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new lt("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function WQ(t){return t&&"nodeType"in t}function JQ(t){return t&&typeof t.render=="function"}const Dx={component:"esri-component"};let gh=class extends Rt{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(Dx.component),i&&i.classList.remove(Dx.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||WQ(e)?(this._set("widget",null),z_(e)):(JQ(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};w([T({dependsOn:[]})],gh.prototype,"id",null),w([T()],gh.prototype,"node",null),w([Ne("node")],gh.prototype,"castNode",null),w([T({readOnly:!0})],gh.prototype,"widget",void 0),gh=w([W("esri.views.ui.Component")],gh);const xy=gh,sO="calcite-mode-";function KQ(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function YQ(){return KQ().startsWith("dark")}function ZQ(){return`${sO}${YQ()?"dark":"light"}`}function XQ(t){QQ(t),t.classList.add(ZQ())}function QQ(t){Array.from(t.classList).forEach(e=>{e.startsWith(sO)&&t.classList.remove(e)})}const ttt={left:0,top:0,bottom:0,right:0},nO={bottom:30,top:15,right:15,left:15},co="esri-ui",Tr={ui:co,corner:`${co}-corner`,innerContainer:`${co}-inner-container`,manualContainer:`${co}-manual-container`,cornerContainer:`${co}-corner-container`,topLeft:`${co}-top-left`,topRight:`${co}-top-right`,bottomLeft:`${co}-bottom-left`,bottomRight:`${co}-bottom-right`};function ett(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function y1(t){return t===0?"0":`${t}px`}function T2(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function M2(t,{top:e,bottom:i,left:s,right:a}){t.style.top=e,t.style.bottom=i,t.style.left=s,t.style.right=a}let Vn=class extends kl.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=dn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&M2(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&M2(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([It(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,xe),It(()=>this.padding,this._applyUIPadding,xe),It(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},xe),kT(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Tr.ui),XQ(e),this._attachContainers(e)),i&&(i.classList.remove(Tr.ui),M2(i,{top:"",bottom:"",left:"",right:""}),gA(i)),this._set("container",e))}get height(){var d;const e=((d=this.view)==null?void 0:d.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:s,bottom:a}=i;return Math.max(e-s-a,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...nO,...e}}get width(){var d;const e=((d=this.view)==null?void 0:d.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:s,right:a}=i;return Math.max(e-s-a,0)}add(e,i){let s,a,d;if(Array.isArray(e))return void e.forEach(m=>this.add(m,i));const y=T2(e);y&&({index:s,position:i,component:e,key:a}=y),i&&typeof i=="object"&&({index:s,key:a,position:i,internal:d}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,s,a,d)}remove(e,i){var a;if(!e)return;if(Array.isArray(e))return e.map(d=>this.remove(d,i));const s=this._find(e);if(s){if(this._componentMap.has(e)&&((a=this._componentMap.get(e))==null?void 0:a.key)!==i)return;const d=this._components.indexOf(s),y=s.node.parentNode;return y==null||y.removeChild(s.node),this._componentMap.delete(e),this._components.splice(d,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const d of e)this.empty(d,i);return}const s=this._positionNameToContainerLookup[e??"manual"],a=Array.prototype.slice.call(s.children).map(d=>this._findByNode(d)).filter(d=>{var y;return d==null?!1:!(((y=this._componentMap.get(d))==null?void 0:y.internal)??!1)||i.removeInternal});for(const d of a)this.remove(d)}move(e,i){if(Array.isArray(e)&&e.forEach(y=>this.move(y,i)),!e)return;let s;const a=T2(e)||T2(i);if(a&&(s=a.index,i=a.position,e=a.component||e),i&&!this._isValidPosition(i))return;const d=this.remove(e);d&&this.add(d,{position:i,index:s})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.map(s=>this._getComponentsAtPosition(s,i)).flat():this._getComponentsAtPosition(e,i):this._components.filter(s=>{var a;return i.includeInternal||!((a=this._componentMap.get(s))!=null&&a.internal)}).map(({widget:s,node:a})=>s??a)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,s,a,d){e instanceof xy||(e=new xy({node:e})),this._place({component:e,position:i,index:s}),this._components.push(e),this._componentMap.set(e,{key:a,internal:d})}_find(e){return e?e instanceof xy?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??ttt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Tr.innerContainer,Tr.cornerContainer);const i=document.createElement("div");i.classList.add(Tr.innerContainer,Tr.manualContainer);const s=document.createElement("div");s.classList.add(Tr.topLeft,Tr.corner),e.appendChild(s);const a=document.createElement("div");a.classList.add(Tr.topRight,Tr.corner),e.appendChild(a);const d=document.createElement("div");d.classList.add(Tr.bottomLeft,Tr.corner),e.appendChild(d);const y=document.createElement("div");y.classList.add(Tr.bottomRight,Tr.corner),e.appendChild(y),this._innerContainer=e,this._manualContainer=i;const m=eK();this._cornerNameToContainerLookup={"top-left":s,"top-right":a,"bottom-left":d,"bottom-right":y,"top-leading":m?a:s,"top-trailing":m?s:a,"bottom-leading":m?y:d,"bottom-trailing":m?d:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:s,index:a}=e,d=this._positionNameToContainerLookup[i],y=a!=null&&a>-1;if(ett(s.widget)&&s.widget.startup(),!y)return void d.appendChild(s.node);const m=Array.from(d.children);if(a===0)return void(d.firstChild?P7(s.node,d.firstChild):d.appendChild(s.node));a>=m.length?d.appendChild(s.node):P7(s.node,m[a])}_toPixelPosition(e){return{top:y1(e.top),left:y1(e.left),right:y1(e.right),bottom:y1(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const s=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(s.children).map(a=>this._findByNode(a)).filter(Yh).filter(a=>{var d;return i.includeInternal||!((d=this._componentMap.get(a))!=null&&d.internal)}).map(({widget:a,node:d})=>a??d)}};w([T()],Vn.prototype,"_locale",void 0),w([T()],Vn.prototype,"container",null),w([T()],Vn.prototype,"height",null),w([T({value:nO})],Vn.prototype,"padding",null),w([Ne("padding")],Vn.prototype,"castPadding",null),w([T()],Vn.prototype,"view",void 0),w([T()],Vn.prototype,"width",null),Vn=w([W("esri.views.ui.UI")],Vn);const itt=Vn,rtt="randomUUID"in crypto;function oO(){if(rtt)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function Vdt(){return`{${oO()}}`}const stt={handleInterceptedEvent:(t,e,i,s)=>(t.scheduleRender(),e.properties[`on${s.type}`].apply(e.properties.bind||i,[s]))},ntt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},ott=t=>({...ntt,...t}),att=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},ltt=(t,e)=>t.find(e),Fx=(t,e,i=!1)=>{let s=t;return e.forEach((a,d)=>{const y=s!=null&&s.children?ltt(s.children,m=>m.domNode===a):void 0;i&&!y&&d!==e.length-1||(s=y)}),s},htt=t=>{let e;const i={...stt,...t},s=ott(i),a=s.performanceLogger;let d,y=!0,m=!1;const _=[],S=[],I=(P,L,j)=>{var J;let F;s.eventHandlerInterceptor=(Q,Z,et,st)=>function(nt){let pt;a("domEvent",nt);const yt=att(nt.currentTarget,F.domNode),$t=yt.some(Ct=>{var Nt;return customElements.get((Nt=Ct==null?void 0:Ct.tagName)==null?void 0:Nt.toLowerCase())});if(nt.eventPhase===Event.CAPTURING_PHASE||!$t)yt.reverse(),pt=Fx(F.getLastRender(),yt);else{const Ct=nt.composedPath(),Nt=Ct.slice(Ct.indexOf(nt.currentTarget),Ct.indexOf(F.domNode)).filter(Ht=>Ht.getRootNode()===Ht.ownerDocument).reverse();pt=Fx(F.getLastRender(),Nt,!0)}let Ot;return pt&&(Ot=i.handleInterceptedEvent(e,pt,this,nt)),a("domEventProcessed",nt),Ot},(J=i.postProcessProjectionOptions)==null||J.call(i,s);const V=j();F=P(L,V,s),_.push(F),S.push(j),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(F,V)};let A=()=>{if(d=void 0,y){y=!1,a("renderStart",void 0);for(let P=0;P<_.length;P++){const L=S[P]();a("rendered",void 0),_[P].update(L),a("patched",void 0)}a("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,_,S)),e={renderNow:A,scheduleRender:()=>{d||m||(d=requestAnimationFrame(A))},stop:()=>{d&&(cancelAnimationFrame(d),d=void 0),m=!0},resume:()=>{m=!1,y=!0,e.scheduleRender()},append:(P,L)=>{I(yl.append,P,L)},insertBefore:(P,L)=>{I(yl.insertBefore,P,L)},merge:(P,L)=>{I(yl.merge,P,L)},replace:(P,L)=>{I(yl.replace,P,L)},detach:P=>{for(let L=0;L<S.length;L++)if(S[L]===P)return S.splice(L,1),_.splice(L,1)[0];throw new Error("renderFunction was not found")}},e},tc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ec,aO,av,lO=!1,Ym=!1,s4=!1,Wr=!1,zx=null,B3=!1;const utt=t=>{const e=new URL(t,Ji.$resourcesUrl$);return e.origin!==gf.location.origin?e.href:e.pathname},ctt=t=>Ji.$resourcesUrl$=t,du=(t,e="")=>()=>{},Vx="http://www.w3.org/1999/xlink",Gx={},ptt="http://www.w3.org/2000/svg",dtt="http://www.w3.org/1999/xhtml",ftt=t=>t!=null,n4=t=>(t=typeof t,t==="object"||t==="function");function ytt(t){var e,i,s;return(s=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&s!==void 0?s:void 0}const hO=(t,e,...i)=>{let s=null,a=null,d=null,y=!1,m=!1;const _=[],S=A=>{for(let P=0;P<A.length;P++)s=A[P],Array.isArray(s)?S(s):s!=null&&typeof s!="boolean"&&((y=typeof t!="function"&&!n4(s))&&(s=String(s)),y&&m?_[_.length-1].$text$+=s:_.push(y?Zm(null,s):s),m=y)};if(S(i),e){e.key&&(a=e.key),e.name&&(d=e.name);{const A=e.className||e.class;A&&(e.class=typeof A!="object"?A:Object.keys(A).filter(P=>A[P]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,_,vtt);const I=Zm(t,null);return I.$attrs$=e,_.length>0&&(I.$children$=_),I.$key$=a,I.$name$=d,I},Zm=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},mtt={},gtt=t=>t&&t.$tag$===mtt,vtt={forEach:(t,e)=>t.map(Ux).forEach(e),map:(t,e)=>t.map(Ux).map(e).map(btt)},Ux=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),btt=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),hO(t.vtag,i,...t.vchildren||[])}const e=Zm(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},wtt=t=>Wtt.map(e=>e(t)).find(e=>!!e),_tt=(t,e)=>t!=null&&!n4(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,xtt=t=>t,Gdt=(t,e,i)=>{const s=xtt(t);return{emit:a=>Stt(s,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:a})}},Stt=(t,e,i)=>{const s=Ji.ce(e,i);return t.dispatchEvent(s),s},qx=new WeakMap,$tt=(t,e,i)=>{let s=Qm.get(t);Ytt&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,Qm.set(t,s)},Ttt=(t,e,i,s)=>{var a;let d=uO(e,i);const y=Qm.get(d);if(t=t.nodeType===11?t:yn,y)if(typeof y=="string"){t=t.head||t;let m=qx.get(t),_;if(m||qx.set(t,m=new Set),!m.has(d)){{_=yn.createElement("style"),_.innerHTML=y;const S=(a=Ji.$nonce$)!==null&&a!==void 0?a:ytt(yn);S!=null&&_.setAttribute("nonce",S),t.insertBefore(_,t.querySelector("link"))}m&&m.add(d)}}else t.adoptedStyleSheets.includes(y)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,y]);return d},Mtt=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,a=du("attachStyles",e.$tagName$),d=Ttt(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);s&10&&(i["s-sc"]=d,i.classList.add(d+"-h"),s&2&&i.classList.add(d+"-s")),a()},uO=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),Bx=(t,e,i,s,a,d)=>{if(i!==s){let y=Kx(t,e),m=e.toLowerCase();if(e==="class"){const _=t.classList,S=Hx(i),I=Hx(s);_.remove(...S.filter(A=>A&&!I.includes(A))),_.add(...I.filter(A=>A&&!S.includes(A)))}else if(e==="style"){for(const _ in i)(!s||s[_]==null)&&(_.includes("-")?t.style.removeProperty(_):t.style[_]="");for(const _ in s)(!i||s[_]!==i[_])&&(_.includes("-")?t.style.setProperty(_,s[_]):t.style[_]=s[_])}else if(e!=="key")if(e==="ref")s&&s(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):Kx(gf,m)?e=m.slice(2):e=m[2]+e.slice(3),i&&Ji.rel(t,e,i,!1),s&&Ji.ael(t,e,s,!1);else{const _=n4(s);if((y||_&&s!==null)&&!a)try{if(t.tagName.includes("-"))t[e]=s;else{const I=s??"";e==="list"?y=!1:(i==null||t[e]!=I)&&(t[e]=I)}}catch{}let S=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(e=m,S=!0),s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&(S?t.removeAttributeNS(Vx,e):t.removeAttribute(e)):(!y||d&4||a)&&!_&&(s=s===!0?"":s,S?t.setAttributeNS(Vx,e,s):t.setAttribute(e,s))}}},Ett=/\s/,Hx=t=>t?t.split(Ett):[],cO=(t,e,i,s)=>{const a=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,d=t&&t.$attrs$||Gx,y=e.$attrs$||Gx;for(s in d)s in y||Bx(a,s,d[s],void 0,i,e.$flags$);for(s in y)Bx(a,s,d[s],y[s],i,e.$flags$)},Xm=(t,e,i,s)=>{const a=e.$children$[i];let d=0,y,m,_;if(lO||(s4=!0,a.$tag$==="slot"&&(ec&&s.classList.add(ec+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)y=a.$elm$=yn.createTextNode(a.$text$);else if(a.$flags$&1)y=a.$elm$=yn.createTextNode("");else{if(Wr||(Wr=a.$tag$==="svg"),y=a.$elm$=yn.createElementNS(Wr?ptt:dtt,a.$flags$&2?"slot-fb":a.$tag$),Wr&&a.$tag$==="foreignObject"&&(Wr=!1),cO(null,a,Wr),ftt(ec)&&y["s-si"]!==ec&&y.classList.add(y["s-si"]=ec),a.$children$)for(d=0;d<a.$children$.length;++d)m=Xm(t,a,d,y),m&&y.appendChild(m);a.$tag$==="svg"?Wr=!1:y.tagName==="foreignObject"&&(Wr=!0)}return y["s-hn"]=av,a.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=aO,y["s-sn"]=a.$name$||"",_=t&&t.$children$&&t.$children$[i],_&&_.$tag$===a.$tag$&&t.$elm$&&zd(t.$elm$,!1)),y},zd=(t,e)=>{Ji.$flags$|=1;const i=t.childNodes;for(let s=i.length-1;s>=0;s--){const a=i[s];a["s-hn"]!==av&&a["s-ol"]&&(fO(a).insertBefore(a,o4(a)),a["s-ol"].remove(),a["s-ol"]=void 0,s4=!0),e&&zd(a,e)}Ji.$flags$&=-2},pO=(t,e,i,s,a,d)=>{let y=t["s-cr"]&&t["s-cr"].parentNode||t,m;for(y.shadowRoot&&y.tagName===av&&(y=y.shadowRoot);a<=d;++a)s[a]&&(m=Xm(null,i,a,t),m&&(s[a].$elm$=m,y.insertBefore(m,o4(e))))},dO=(t,e,i,s,a)=>{for(;e<=i;++e)(s=t[e])&&(a=s.$elm$,gO(s),Ym=!0,a["s-ol"]?a["s-ol"].remove():zd(a,!0),a.remove())},Itt=(t,e,i,s)=>{let a=0,d=0,y=0,m=0,_=e.length-1,S=e[0],I=e[_],A=s.length-1,P=s[0],L=s[A],j,F;for(;a<=_&&d<=A;)if(S==null)S=e[++a];else if(I==null)I=e[--_];else if(P==null)P=s[++d];else if(L==null)L=s[--A];else if(m1(S,P))ic(S,P),S=e[++a],P=s[++d];else if(m1(I,L))ic(I,L),I=e[--_],L=s[--A];else if(m1(S,L))(S.$tag$==="slot"||L.$tag$==="slot")&&zd(S.$elm$.parentNode,!1),ic(S,L),t.insertBefore(S.$elm$,I.$elm$.nextSibling),S=e[++a],L=s[--A];else if(m1(I,P))(S.$tag$==="slot"||L.$tag$==="slot")&&zd(I.$elm$.parentNode,!1),ic(I,P),t.insertBefore(I.$elm$,S.$elm$),I=e[--_],P=s[++d];else{for(y=-1,m=a;m<=_;++m)if(e[m]&&e[m].$key$!==null&&e[m].$key$===P.$key$){y=m;break}y>=0?(F=e[y],F.$tag$!==P.$tag$?j=Xm(e&&e[d],i,y,t):(ic(F,P),e[y]=void 0,j=F.$elm$),P=s[++d]):(j=Xm(e&&e[d],i,d,t),P=s[++d]),j&&fO(S.$elm$).insertBefore(j,o4(S.$elm$))}a>_?pO(t,s[A+1]==null?null:s[A+1].$elm$,i,s,d,A):d>A&&dO(e,a,_)},m1=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,o4=t=>t&&t["s-ol"]||t,fO=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,ic=(t,e)=>{const i=e.$elm$=t.$elm$,s=t.$children$,a=e.$children$,d=e.$tag$,y=e.$text$;let m;y===null?(Wr=d==="svg"?!0:d==="foreignObject"?!1:Wr,d==="slot"||cO(t,e,Wr),s!==null&&a!==null?Itt(i,s,e,a):a!==null?(t.$text$!==null&&(i.textContent=""),pO(i,null,e,a,0,a.length-1)):s!==null&&dO(s,0,s.length-1),Wr&&d==="svg"&&(Wr=!1)):(m=i["s-cr"])?m.parentNode.textContent=y:t.$text$!==y&&(i.data=y)},yO=t=>{const e=t.childNodes;let i,s,a,d,y,m;for(s=0,a=e.length;s<a;s++)if(i=e[s],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,d=0;d<a;d++)if(m=e[d].nodeType,e[d]["s-hn"]!==i["s-hn"]||y!==""){if(m===1&&y===e[d].getAttribute("slot")){i.hidden=!0;break}}else if(m===1||m===3&&e[d].textContent.trim()!==""){i.hidden=!0;break}}yO(i)}},an=[],mO=t=>{let e,i,s,a,d,y,m=0;const _=t.childNodes,S=_.length;for(;m<S;m++){if(e=_[m],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,a=e["s-sn"],y=s.length-1;y>=0;y--)i=s[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(Wx(i,a)?(d=an.find(I=>I.$nodeToRelocate$===i),Ym=!0,i["s-sn"]=i["s-sn"]||a,d?d.$slotRefNode$=e:an.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&an.map(I=>{Wx(I.$nodeToRelocate$,i["s-sn"])&&(d=an.find(A=>A.$nodeToRelocate$===i),d&&!I.$slotRefNode$&&(I.$slotRefNode$=d.$slotRefNode$))})):an.some(I=>I.$nodeToRelocate$===i)||an.push({$nodeToRelocate$:i}));e.nodeType===1&&mO(e)}},Wx=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",gO=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(gO)},Att=(t,e)=>{const i=t.$hostElement$,s=t.$cmpMeta$,a=t.$vnode$||Zm(null,null),d=gtt(e)?e:hO(null,null,e);av=i.tagName,s.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},s.$attrsToReflect$.map(([y,m])=>d.$attrs$[m]=i[y])),d.$tag$=null,d.$flags$|=4,t.$vnode$=d,d.$elm$=a.$elm$=i.shadowRoot||i,ec=i["s-sc"],aO=i["s-cr"],lO=(s.$flags$&1)!==0,Ym=!1,ic(a,d);{if(Ji.$flags$|=1,s4){mO(d.$elm$);let y,m,_,S,I,A,P=0;for(;P<an.length;P++)y=an[P],m=y.$nodeToRelocate$,m["s-ol"]||(_=yn.createTextNode(""),_["s-nr"]=m,m.parentNode.insertBefore(m["s-ol"]=_,m));for(P=0;P<an.length;P++)if(y=an[P],m=y.$nodeToRelocate$,y.$slotRefNode$){for(S=y.$slotRefNode$.parentNode,I=y.$slotRefNode$.nextSibling,_=m["s-ol"];_=_.previousSibling;)if(A=_["s-nr"],A&&A["s-sn"]===m["s-sn"]&&S===A.parentNode&&(A=A.nextSibling,!A||!A["s-nr"])){I=A;break}(!I&&S!==m.parentNode||m.nextSibling!==I)&&m!==I&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),S.insertBefore(m,I))}else m.nodeType===1&&(m.hidden=!0)}Ym&&yO(d.$elm$),Ji.$flags$&=-2,an.length=0}},ktt=(t,e)=>{},a4=(t,e)=>(t.$flags$|=16,ktt(t,t.$ancestorComponent$),Xtt(()=>Ott(t,e))),Ott=(t,e)=>{const i=t.$hostElement$,s=du("scheduleUpdate",t.$cmpMeta$.$tagName$),a=i;let d;return e?d=kc(a,"componentWillLoad"):d=kc(a,"componentWillUpdate"),d=Jx(d,()=>kc(a,"componentWillRender")),s(),Jx(d,()=>Ptt(t,a,e))},Ptt=async(t,e,i)=>{const s=t.$hostElement$,a=du("update",t.$cmpMeta$.$tagName$);s["s-rc"],i&&Mtt(t);const d=du("render",t.$cmpMeta$.$tagName$);Ctt(t,e,s),d(),a(),Ntt(t)},Ctt=(t,e,i)=>{try{zx=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(tc.hasRenderFn||tc.reflect)&&(tc.vdomRender||tc.reflect)&&(tc.hydrateServerSide||Att(t,e))}catch(m){mf(m,t.$hostElement$)}return zx=null,null},Ntt=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,s=du("postUpdate",e),a=i;t.$ancestorComponent$,kc(a,"componentDidRender"),t.$flags$&64?(kc(a,"componentDidUpdate"),s()):(t.$flags$|=64,kc(a,"componentDidLoad"),s())},Udt=t=>{{const e=yf(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&a4(e,!1),i}},kc=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){mf(s)}},Jx=(t,e)=>t&&t.then?t.then(e):e(),Ltt=(t,e)=>yf(t).$instanceValues$.get(e),Rtt=(t,e,i,s)=>{const a=yf(t),d=t,y=a.$instanceValues$.get(e),m=a.$flags$,_=d;i=_tt(i,s.$members$[e][0]);const S=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!S){a.$instanceValues$.set(e,i);{if(s.$watchers$&&m&128){const A=s.$watchers$[e];A&&A.map(P=>{try{_[P](i,y,e)}catch(L){mf(L,d)}})}if((m&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,y,e)===!1)return;a4(a,!1)}}}},jtt=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const s=Object.entries(e.$members$),a=t.prototype;s.map(([d,[y]])=>{(y&31||y&32)&&Object.defineProperty(a,d,{get(){return Ltt(this,d)},set(m){Rtt(this,d,m,e)},configurable:!0,enumerable:!0})});{const d=new Map;a.attributeChangedCallback=function(y,m,_){Ji.jmp(()=>{const S=d.get(y);if(this.hasOwnProperty(S))_=this[S],delete this[S];else if(a.hasOwnProperty(S)&&typeof this[S]=="number"&&this[S]==_)return;this[S]=_===null&&typeof this[S]=="boolean"?!1:_})},t.observedAttributes=s.filter(([y,m])=>m[0]&15).map(([y,m])=>{const _=m[1]||y;return d.set(_,y),m[0]&512&&e.$attrsToReflect$.push([y,_]),_})}}return t},Dtt=async(t,e,i,s,a)=>{if(!(e.$flags$&32)&&(a=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),a.style)){let y=a.style;typeof y!="string"&&(y=y[e.$modeName$=wtt(t)]);const m=uO(i,e.$modeName$);if(!Qm.has(m)){const _=du("registerStyles",i.$tagName$);$tt(m,y,!!(i.$flags$&1)),_()}}e.$ancestorComponent$,(()=>a4(e,!0))()},Ftt=t=>{},ztt=t=>{if(!(Ji.$flags$&1)){const e=yf(t),i=e.$cmpMeta$,s=du("connectedCallback",i.$tagName$);e.$flags$&1?(vO(t,e,i.$listeners$),Ftt(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&Vtt(t),i.$members$&&Object.entries(i.$members$).map(([a,[d]])=>{if(d&31&&t.hasOwnProperty(a)){const y=t[a];delete t[a],t[a]=y}}),Dtt(t,e,i)),s()}},Vtt=t=>{const e=t["s-cr"]=yn.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Gtt=t=>{if(!(Ji.$flags$&1)){const e=yf(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},qdt=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const s=t.prototype.connectedCallback,a=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Htt(this,i)},connectedCallback(){ztt(this),s&&s.call(this)},disconnectedCallback(){Gtt(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,jtt(t,i)},Bdt=(t,e)=>e,vO=(t,e,i,s)=>{i&&i.map(([a,d,y])=>{const m=qtt(t,a),_=Utt(e,y),S=Btt(a);Ji.ael(m,d,_,S),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Ji.rel(m,d,_,S))})},Utt=(t,e)=>i=>{try{tc.lazyLoad||t.$hostElement$[e](i)}catch(s){mf(s)}},qtt=(t,e)=>e&4?yn:e&8?gf:e&16?yn.body:t,Btt=t=>Jtt?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,bO=new WeakMap,yf=t=>bO.get(t),Htt=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return vO(t,i,e.$listeners$),bO.set(t,i)},Kx=(t,e)=>e in t,mf=(t,e)=>(0,console.error)(t,e),Qm=new Map,Wtt=[],gf=typeof window<"u"?window:{},yn=gf.document||{head:{}},Hdt=gf.HTMLElement||class{},Ji={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},Jtt=(()=>{let t=!1;try{yn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Ktt=t=>Promise.resolve(t),Ytt=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),H3=[],wO=[],_O=(t,e)=>i=>{t.push(i),B3||(B3=!0,e&&Ji.$flags$&4?Ztt(W3):Ji.raf(W3))},Yx=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){mf(i)}t.length=0},W3=()=>{Yx(H3),Yx(wO),(B3=H3.length>0)&&Ji.raf(W3)},Ztt=t=>Ktt().then(t),Wdt=_O(H3,!1),Xtt=_O(wO,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const xO="calcite-mode-auto",SO="calcite-mode-dark",Qtt="calcite-mode-light",Jdt={autoMode:xO,darkMode:SO,lightMode:Qtt,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var $O=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],tg=$O.join(","),TO=typeof Element>"u",fu=TO?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,eg=!TO&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},ig=function t(e,i){var s;i===void 0&&(i=!0);var a=e==null||(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"inert"),d=a===""||a==="true",y=d||i&&e&&t(e.parentNode);return y},tet=function(e){var i,s=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return s===""||s==="true"},MO=function(e,i,s){if(ig(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(tg));return i&&fu.call(e,tg)&&a.unshift(e),a=a.filter(s),a},EO=function t(e,i,s){for(var a=[],d=Array.from(e);d.length;){var y=d.shift();if(!ig(y,!1))if(y.tagName==="SLOT"){var m=y.assignedElements(),_=m.length?m:y.children,S=t(_,!0,s);s.flatten?a.push.apply(a,S):a.push({scopeParent:y,candidates:S})}else{var I=fu.call(y,tg);I&&s.filter(y)&&(i||!e.includes(y))&&a.push(y);var A=y.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(y),P=!ig(A,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(y));if(A&&P){var L=t(A===!0?y.children:A.children,!0,s);s.flatten?a.push.apply(a,L):a.push({scopeParent:y,candidates:L})}else d.unshift.apply(d,y.children)}}return a},IO=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},AO=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||tet(e))&&!IO(e)?0:e.tabIndex},eet=function(e,i){var s=AO(e);return s<0&&i&&!IO(e)?0:s},iet=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},kO=function(e){return e.tagName==="INPUT"},ret=function(e){return kO(e)&&e.type==="hidden"},set=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return i},net=function(e,i){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===i)return e[s]},oet=function(e){if(!e.name)return!0;var i=e.form||eg(e),s=function(m){return i.querySelectorAll('input[type="radio"][name="'+m+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=s(window.CSS.escape(e.name));else try{a=s(e.name)}catch(y){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",y.message),!1}var d=net(a,e.form);return!d||d===e},aet=function(e){return kO(e)&&e.type==="radio"},het=function(e){return aet(e)&&!oet(e)},uet=function(e){var i,s=e&&eg(e),a=(i=s)===null||i===void 0?void 0:i.host,d=!1;if(s&&s!==e){var y,m,_;for(d=!!((y=a)!==null&&y!==void 0&&(m=y.ownerDocument)!==null&&m!==void 0&&m.contains(a)||e!=null&&(_=e.ownerDocument)!==null&&_!==void 0&&_.contains(e));!d&&a;){var S,I,A;s=eg(a),a=(S=s)===null||S===void 0?void 0:S.host,d=!!((I=a)!==null&&I!==void 0&&(A=I.ownerDocument)!==null&&A!==void 0&&A.contains(a))}}return d},Zx=function(e){var i=e.getBoundingClientRect(),s=i.width,a=i.height;return s===0&&a===0},cet=function(e,i){var s=i.displayCheck,a=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var d=fu.call(e,"details>summary:first-of-type"),y=d?e.parentElement:e;if(fu.call(y,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof a=="function"){for(var m=e;e;){var _=e.parentElement,S=eg(e);if(_&&!_.shadowRoot&&a(_)===!0)return Zx(e);e.assignedSlot?e=e.assignedSlot:!_&&S!==e.ownerDocument?e=S.host:e=_}e=m}if(uet(e))return!e.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return Zx(e);return!1},pet=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var s=0;s<i.children.length;s++){var a=i.children.item(s);if(a.tagName==="LEGEND")return fu.call(i,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}i=i.parentElement}return!1},rg=function(e,i){return!(i.disabled||ig(i)||ret(i)||cet(i,e)||set(i)||pet(i))},J3=function(e,i){return!(het(i)||AO(i)<0||!rg(e,i))},det=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},fet=function t(e){var i=[],s=[];return e.forEach(function(a,d){var y=!!a.scopeParent,m=y?a.scopeParent:a,_=eet(m,y),S=y?t(a.candidates):m;_===0?y?i.push.apply(i,S):i.push(m):s.push({documentOrder:d,tabIndex:_,item:a,isScope:y,content:S})}),s.sort(iet).reduce(function(a,d){return d.isScope?a.push.apply(a,d.content):a.push(d.content),a},[]).concat(i)},yet=function(e,i){i=i||{};var s;return i.getShadowRoot?s=EO([e],i.includeContainer,{filter:J3.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:det}):s=MO(e,i.includeContainer,J3.bind(null,i)),fet(s)},Kdt=function(e,i){i=i||{};var s;return i.getShadowRoot?s=EO([e],i.includeContainer,{filter:rg.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):s=MO(e,i.includeContainer,rg.bind(null,i)),s},Ydt=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return fu.call(e,tg)===!1?!1:J3(i,e)},met=$O.concat("iframe").join(","),Zdt=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return fu.call(e,met)===!1?!1:rg(i,e)};const get={getShadowRoot:!0};function Xdt(t){const e="dir",i=`[${e}]`,s=vet(t,i);return s?s.getAttribute(e):"ltr"}function l4(t){return t.getRootNode()}function Qdt(t){const e=l4(t);return"host"in e?e:null}function OO(t){return t.host||null}function tft(t,{selector:e,id:i}){function s(a){if(!a)return null;a.assignedSlot&&(a=a.assignedSlot);const d=l4(a),y=i?"getElementById"in d?d.getElementById(i):null:e?d.querySelector(e):null,m=OO(d);return y||(m?s(m):null)}return s(t)}function vet(t,e){function i(s){return s?s.closest(e)||i(OO(l4(s))):null}return i(t)}function bet(t,e){return PO(t,e)}function PO(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:s}=t;return PO(s instanceof ShadowRoot?s.host:s,e)}function eft(t,e){return!!bet(e,i=>i===t?!0:void 0)}function wet(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function ift(t){if(t)return wet(t)?t.setFocus():t.focus()}function rft(t){t&&(yet(t,get)[0]||t).focus()}const Vd=":not([slot])";function sft(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const s=e?Array.isArray(e)?e.map(a=>`[slot="${a}"]`).join(","):`[slot="${e}"]`:Vd;return i!=null&&i.all?_et(t,s,i):xet(t,s,i)}function CO(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function _et(t,e,i){let s=e===Vd?CO(t,Vd):Array.from(t.querySelectorAll(e));s=i&&i.direct===!1?s:s.filter(d=>d.parentElement===t),s=i!=null&&i.matches?s.filter(d=>d==null?void 0:d.matches(i.matches)):s;const a=i==null?void 0:i.selector;return a?s.map(d=>Array.from(d.querySelectorAll(a))).reduce((d,y)=>[...d,...y],[]).filter(d=>!!d):s}function xet(t,e,i){let s=e===Vd?CO(t,Vd)[0]||null:t.querySelector(e);s=i&&i.direct===!1||(s==null?void 0:s.parentElement)===t?s:null,s=i!=null&&i.matches?s!=null&&s.matches(i.matches)?s:null:s;const a=i==null?void 0:i.selector;return a?s==null?void 0:s.querySelector(a):s}function nft(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function oft(t){return Boolean(t).toString()}function aft(t){return Eet(t)||Tet(t)}function $et(t){return Met(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function Tet(t){return!!$et(t)}function Met(t){return t.target.assignedNodes({flatten:!0})}function Eet(t){return!!Iet(t).length}function Iet(t){return t.target.assignedElements({flatten:!0})}function lft(t){return!!(t.isPrimary&&t.button===0)}function hft(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function Xx(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(SO)||t.contains(xO)&&e?"dark":"light",s=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),a=y=>{d!==y&&s(y),d=y};let d=i();s(d),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>a(y.matches?"dark":"light")),new MutationObserver(()=>a(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Aet(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?Xx():document.addEventListener("DOMContentLoaded",()=>Xx(),{once:!0}))}const ket=Aet;ket();let NO;function Oet(){try{utt(".")}catch{ctt(Kr(Me(NO)))}}function Pet(t){var i;const e=[];for(const s of Object.keys(t))customElements.get(`calcite-${s}`)||e.push((i=t[s])==null?void 0:i.call(t));return Promise.all(e)}NO="components/assets";const LO=Symbol("widget"),Cet=Symbol("widget-test-data"),Net=[],Let={},sg=new WeakMap;function RO(t,e){let i=e.children;if(i&&i.length)for(let a=0;a<i.length;++a)i[a]=RO(t,i[a]);else i=Net;const s=e.vnodeSelector;if(h4(s)){const a=e.properties||Let,d=a.key||s;return{vnodeSelector:"div",properties:{key:d,afterCreate:Ret,afterUpdate:jet,afterRemoved:jO,parentWidget:t,widgetConstructor:s,widgetProperties:{...a,key:d,children:i}},children:void 0,text:void 0,domNode:null}}return e}function Ret(t,e,i,{parentWidget:s,widgetConstructor:a,widgetProperties:d}){var m;const y=new a(d);y.container=t,sg.set(t,y),(m=y.afterCreate)==null||m.call(y,y,t),s._internalHandles.add(Xn(()=>jO(t)))}function jet(t,e,i,{widgetProperties:s}){var d;const a=sg.get(t);a&&(a.set(s),(d=a.afterUpdate)==null||d.call(a,a,t))}function jO(t){var i;const e=sg.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),sg.delete(t))}function h4(t){return typeof t=="function"&&t[LO]}const Qx=new Set;function Det(t){Qx.add(t),t.finally(()=>Qx.delete(t))}var DO;const Fet="esri.widgets.Widget";let zet=0;const Vet={widgetIcon:"esri-icon-checkbox-unchecked"};function FO(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?FO(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const Get=htt({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(s,a,d,y)=>{const m=e==null?void 0:e(s,a,d,y),_=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in d)||_){const S=s[2].toLowerCase()+s.slice(3),I=L=>m==null?void 0:m.call(d,L);d.addEventListener(S,I,_);const A=()=>d.removeEventListener(S,I,_),P=y.afterRemoved;y.afterRemoved=L=>{P==null||P(L),A()}}return m}},handleInterceptedEvent(t,e,i,s){const{eventPhase:a,type:d}=s,y=a===Event.CAPTURING_PHASE;let m=`on${d}${y?"capture":""}`;const _=e.properties;(_&&m in _||(m=`on${d[0].toUpperCase()}${d.slice(1)}${y?"Capture":""}`,_&&m in _))&&(PA(),t.scheduleRender(),_[m].call(_.bind||i,s))}});let E2=!1,$i=class extends v5(kl.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Qo,this._projector=Get,this._readyForTrueRender=!1,this.iconClass=Vet.widgetIcon,this.icon=null,this.key=this,this._loadLocale=f$(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const y=await mu(this._messageBundleProps.map(async({bundlePath:m,propertyName:_})=>{if(this.destroyed)return;let S=await PT(m);this.uiStrings&&Object.keys(this.uiStrings)&&(S=FO(ot(S),this.uiStrings)),this[_]=S}));if(this.destroyed)return;for(const m of y)m.error&&mt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,m.error)}await this.loadLocale()}),Oet();const s="esri-widget-uid-"+oO(),a=this.render.bind(this);this._trackingTarget=new Ig(()=>this.scheduleRender());const d=()=>{var I;if(!this._readyForTrueRender||this.destroyed)return null;const y=a();let{properties:m}=y;m||(y.properties=m={});const{key:_}=m;_||(m.key=s),this.visible?m.styles||(m.styles={}):(m.class="",m.styles={display:"none"}),m.styles.display||(m.styles.display="");let S=0;return(I=y.children)==null||I.forEach(A=>{if(h4(A.vnodeSelector))return;let{properties:P}=A;P||(A.properties=P={}),P.key||(P.key=`${this.id}--${S++}`)}),RO(this,y)};this.render=()=>{if(E2)return d();let y=JJ(this)??null;if(y)return y;this._trackingTarget.clear(),E2=!0;try{y=Bo(this._trackingTarget,d)}catch(m){throw console.error(m),m}finally{E2=!1}return y&&KJ(this,y),y},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Det(this._resourcesFetch)}normalizeCtorArgs(e,i){const s={...e};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(W4)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Je(this._trackingTarget),Je(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,a2(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return z_(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+zet++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(DO=LO,Cet)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(a2(this),this._projector.scheduleRender())}classes(...e){return tK.apply(this,e)}renderNow(){a2(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(It(()=>this.viewModel,(s,a)=>{a&&this._internalHandles.remove("delegated-events"),s&&Tg(s)&&this._internalHandles.add(this._delegatedEventNames.map(d=>Mg(s,d,y=>{this.emit(d,y)})),"delegated-events")},xe)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(W4),this.scheduleRender()};this._internalHandles.add([kT(e),It(()=>this.uiStrings,e),Sl(()=>this.container,s=>{this.destroyed||this._attach(s)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};$i[DO]=!0,w([T()],$i.prototype,"_readyForTrueRender",void 0),w([T({value:null})],$i.prototype,"container",null),w([Ne("container")],$i.prototype,"castContainer",null),w([T()],$i.prototype,"iconClass",void 0),w([T()],$i.prototype,"icon",void 0),w([T()],$i.prototype,"id",null),w([T()],$i.prototype,"label",null),w([T()],$i.prototype,"renderable",null),w([T()],$i.prototype,"uiStrings",void 0),w([T()],$i.prototype,"viewModel",void 0),w([T({value:!0})],$i.prototype,"visible",null),w([T()],$i.prototype,"key",void 0),w([T()],$i.prototype,"children",void 0),w([T()],$i.prototype,"afterCreate",void 0),w([T()],$i.prototype,"afterUpdate",void 0),w([T()],$i.prototype,"afterRemoved",void 0),$i=w([W(Fet)],$i);const $u=$i;function tS(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function Uet(t,e){return t.length!==e.length||t.some((i,s)=>i.text!==e[s].text)}function g1(t,e,i){!i||!e||t.find(s=>s.layerView===e&&s.text===i)||t.push({text:i,layerView:e})}function qet(t){return t.type==="bing-maps"}const va=[];let rc=class extends Um{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Vt,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const s=this.get("view.allLayerViews");s&&this.handles.add(s.map(a=>It(()=>{var d;return[a.suspended,(d=a.layer)==null?void 0:d.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(a=>{this._pendingAttributions.delete(a),this._fetchedAttributionData.delete(a)}),this._updateAttributionItems()},this.handles.add([qc(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Sl(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;va.length=0,e&&i?(i.forEach(s=>{var y;if(s.suspended||!((y=s.layer)!=null&&y.attributionVisible))return;const a=s.layer;if(tS(a,"user"))return void g1(va,s,a.copyright);if(a.hasAttributionData){if(this._fetchedAttributionData.has(s)){const m=this._fetchedAttributionData.get(s);return void(m?g1(va,s,this._getDynamicAttribution(m,e,a)):tS(a)&&g1(va,s,a.copyright))}return void this._fetchAttributionData(s)}const d=a.get("portalItem.accessInformation");g1(va,s,d||a.copyright)}),Uet(this.items,va)&&(this.items.removeAll(),this.items.addMany(va)),va.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await _5(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const s=i.ok?this._createContributionIndex(i.value,qet(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,s)}this._updateAttributionItems()}_createContributionIndex(e,i){const s=e.contributors,a={};if(!s)return a;for(let d=0;d<s.length;d++){const y=s[d],m=y.coverageAreas;if(!m)return;for(const _ of m){const S=_.bbox,I=_.zoomMin-(i&&_.zoomMin?1:0),A=_.zoomMax-(i&&_.zoomMax?1:0),P=new Ae({xmin:S[1],ymin:S[0],xmax:S[3],ymax:S[2],spatialReference:te.WGS84}),L={extent:qh(P),attribution:y.attribution||"",score:_.score!=null?_.score:100,id:d};for(let j=I;j<=A;j++)a[j]??(a[j]=[]),a[j].push(L)}}return a.maxKey=Math.max.apply(null,Object.keys(a)),a}_getDynamicAttribution(e,i,s){var I;const{extent:a,scale:d}=i;let y=((I=s.tileInfo)==null?void 0:I.scaleToZoom(d))??0;if(y=Math.min(e.maxKey??0,Math.round(y)),!a||y==null||y<=-1)return"";const m=e[y],_=Rg(a.center.clone().normalize(),i.spatialReference),S=new Set;return m?m.filter(A=>{const P=A.id,L=!S.has(P)&&_&&A.extent&&jg(A.extent,_);return L&&S.add(P),L}).sort((A,P)=>P.score-A.score||A.objectId-P.objectId).map(A=>A.attribution).join(", "):""}};w([T({readOnly:!0,type:Vt})],rc.prototype,"items",void 0),w([T({readOnly:!0})],rc.prototype,"state",null),w([T()],rc.prototype,"view",void 0),rc=w([W("esri.widgets.Attribution.AttributionViewModel")],rc);const zO=rc;function Wn(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Het(t[e])}}}function Bet(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Het(t){return function(e,...i){Bet(e)?nK(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Jc(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Wet=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},VO=function(t,e){for(var i=0,s=t.length;i<s;i++){var a=t[i];Array.isArray(a)?VO(a,e):a!=null&&a!==!1&&(a.hasOwnProperty("vnodeSelector")||(a=Wet(a)),e.push(a))}},Jet=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var a=[];return VO(i,a),{vnodeSelector:t,properties:e||void 0,children:a,text:void 0,domNode:null}};function zt(t,e,...i){return typeof t!="function"||h4(t)?Jet(t,e,...i):t(e,...i)}const Ru="esri-attribution",ba={base:`${Ru} esri-widget`,poweredBy:`${Ru}__powered-by`,sources:`${Ru}__sources`,open:`${Ru}--open`,sourcesOpen:`${Ru}__sources--open`,link:`${Ru}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ar=class extends $u{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(s=>s.forEach(({target:a})=>this._checkSourceTextOverflow(a))),this.iconClass=ba.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new zO}initialize(){this.addHandles(qc(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[ba.open]:this._isOpen};return zt("div",{bind:this,class:this.classes(ba.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return zt("div",{class:ba.poweredBy},"Powered by"," ",zt("a",{class:ba.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,s=i?"0":"",{attributionText:a}=this,d={[ba.sourcesOpen]:e,[ba.interactive]:i};return zt("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(ba.sources,d),innerHTML:a,tabindex:s})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:s,clientWidth:a,scrollWidth:d}=e,y=d>a,m=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,m&&(i=!0),this._isOpen){const _=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,_&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};w([T()],ar.prototype,"_isOpen",void 0),w([T()],ar.prototype,"_isInteractive",null),w([T()],ar.prototype,"_attributionTextOverflowed",void 0),w([T()],ar.prototype,"_prevSourceNodeHeight",void 0),w([T({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ar.prototype,"attributionText",null),w([T()],ar.prototype,"iconClass",void 0),w([T()],ar.prototype,"icon",void 0),w([T()],ar.prototype,"itemDelimiter",void 0),w([T()],ar.prototype,"label",null),w([T(),Jc("esri/widgets/Attribution/t9n/Attribution")],ar.prototype,"messages",void 0),w([T()],ar.prototype,"view",null),w([T({type:zO})],ar.prototype,"viewModel",void 0),w([Wn()],ar.prototype,"_toggleState",null),ar=w([W("esri.widgets.Attribution")],ar);const Ket=ar,Yet=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return vg(s),this.goToOverride?this.goToOverride(s,i):s.goTo(i.target,i.options)}};return w([T()],e.prototype,"goToOverride",void 0),w([T()],e.prototype,"view",void 0),e=w([W("esri.widgets.support.GoTo")],e),e},Zet="esri.widgets.CompassViewModel";let vh=class extends Yet(Rt){constructor(e){super(e),this._handles=new Qo,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(It(()=>this.view,this._updateRotationWatcher,xe))}destroy(){si(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?It(()=>e==null?void 0:e.rotation,this._updateForRotation,xe):It(()=>e==null?void 0:e.camera,this._updateForCamera,xe))}};w([T({readOnly:!0})],vh.prototype,"canShowNorth",null),w([T()],vh.prototype,"orientation",void 0),w([T({readOnly:!0})],vh.prototype,"state",null),w([T()],vh.prototype,"view",void 0),vh=w([W(Zet)],vh);const GO=vh,wa={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Ks=class extends $u{constructor(e,i){super(e,i),this.iconClass=wa.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new GO}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,s=i==="disabled",a=(i==="rotation"?"rotation":"compass")=="compass",d=s?-1:0,y={[wa.disabled]:s,[wa.interactive]:!s},m={[wa.northIcon]:a,[wa.rotationIcon]:!a},{messages:_}=this;return zt("div",{bind:this,class:this.classes(wa.base,y),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:d,"aria-label":_.reset,title:_.reset},zt("span",{"aria-hidden":"true",class:this.classes(wa.icon,m),styles:this._toRotationTransform(e)}),zt("span",{class:wa.text},_.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};w([T()],Ks.prototype,"goToOverride",null),w([T()],Ks.prototype,"iconClass",void 0),w([T()],Ks.prototype,"icon",void 0),w([T()],Ks.prototype,"label",null),w([T(),Jc("esri/widgets/Compass/t9n/Compass")],Ks.prototype,"messages",void 0),w([T()],Ks.prototype,"view",null),w([T({type:GO})],Ks.prototype,"viewModel",void 0),w([Wn()],Ks.prototype,"_reset",null),Ks=w([W("esri.widgets.Compass")],Ks);const Xet=Ks,ju="esri-navigation-toggle",ns={base:`${ju} esri-widget`,button:`${ju}__button esri-widget--button`,activeButton:`${ju}__button--active`,panButton:`${ju}__button--pan`,rotateButton:`${ju}__button--rotate`,isLayoutHorizontal:`${ju}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let sc=class extends Rt{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Sl(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};w([T({readOnly:!0})],sc.prototype,"state",null),w([T()],sc.prototype,"navigationMode",void 0),w([T()],sc.prototype,"view",void 0),sc=w([W("esri.widgets.NavigationToggleViewModel")],sc);const UO=sc;let Ys=class extends $u{constructor(e,i){super(e,i),this.iconClass=ns.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new UO}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",s={[ns.disabled]:e,[ns.isLayoutHorizontal]:this.layout==="horizontal"},a={[ns.activeButton]:i},d={[ns.activeButton]:!i},y=e?-1:0,m=this.messages.toggle;return zt("div",{bind:this,class:this.classes(ns.base,s),onclick:this._toggle,onkeydown:this._toggle,tabIndex:y,"aria-label":m,title:m},zt("div",{class:this.classes(ns.button,ns.panButton,a)},zt("span",{class:ns.panIcon})),zt("div",{class:this.classes(ns.button,ns.rotateButton,d)},zt("span",{class:ns.rotationIcon})))}_toggle(){this.toggle()}};w([T()],Ys.prototype,"iconClass",void 0),w([T()],Ys.prototype,"icon",void 0),w([T()],Ys.prototype,"label",null),w([T({value:"vertical"})],Ys.prototype,"layout",null),w([T(),Jc("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ys.prototype,"messages",void 0),w([T()],Ys.prototype,"view",null),w([T({type:UO})],Ys.prototype,"viewModel",void 0),w([Wn()],Ys.prototype,"_toggle",null),Ys=w([W("esri.widgets.NavigationToggle")],Ys);const Qet=Ys,D0={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Mo=class extends $u{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[D0.disabled]:!this.enabled,[D0.interactive]:this.enabled};return zt("div",{bind:this,class:this.classes(D0.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},zt("span",{"aria-hidden":"true",role:"presentation",class:this.classes(D0.icon,this.iconClass??"")}),zt("span",{class:D0.iconText},this.title))}_triggerAction(){this.action.call(this)}};w([T()],Mo.prototype,"action",void 0),w([T()],Mo.prototype,"enabled",void 0),w([T()],Mo.prototype,"iconClass",void 0),w([T()],Mo.prototype,"icon",void 0),w([T()],Mo.prototype,"title",void 0),w([Wn()],Mo.prototype,"_triggerAction",null),Mo=w([W("esri.widgets.IconButton")],Mo);const eS=Mo;let nc=class extends Rt{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};w([T({readOnly:!0})],nc.prototype,"canZoomIn",null),w([T({readOnly:!0})],nc.prototype,"canZoomOut",null),w([T()],nc.prototype,"view",void 0),nc=w([W("esri.widgets.Zoom.ZoomConditions2D")],nc);const tit=nc;let oc=class extends Rt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};w([T({readOnly:!0})],oc.prototype,"canZoomIn",null),w([T({readOnly:!0})],oc.prototype,"canZoomOut",null),w([T()],oc.prototype,"view",void 0),oc=w([W("esri.widgets.Zoom.ZoomConditions3D")],oc);const eit=oc;let Va=class extends Rt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new tit({view:e}):e.type==="3d"&&(this._zoomConditions=new eit({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():hb(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():hb(e.goTo({zoomFactor:.5}))}};w([T()],Va.prototype,"_zoomConditions",void 0),w([T()],Va.prototype,"canZoomIn",null),w([T()],Va.prototype,"canZoomOut",null),w([T({readOnly:!0})],Va.prototype,"state",null),w([T()],Va.prototype,"view",null),Va=w([W("esri.widgets.Zoom.ZoomViewModel")],Va);const qO=Va,F0={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Gn=class extends $u{constructor(e,i){super(e,i),this.iconClass=F0.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new qO}initialize(){this._zoomInButton=new eS({action:this.zoomIn.bind(this),iconClass:F0.zoomInIcon}),this._zoomOutButton=new eS({action:this.zoomOut.bind(this),iconClass:F0.zoomOutIcon})}destroy(){this._zoomInButton=Je(this._zoomInButton),this._zoomOutButton=Je(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[F0.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:s,canZoomOut:a}=e;this._zoomInButton.enabled=s,this._zoomOutButton.enabled=a;const{zoomIn:d,zoomOut:y}=this.messages;return this._zoomInButton.title=d,this._zoomOutButton.title=y,zt("div",{class:this.classes(F0.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};w([T()],Gn.prototype,"iconClass",void 0),w([T()],Gn.prototype,"icon",void 0),w([T()],Gn.prototype,"label",null),w([T({value:"vertical"})],Gn.prototype,"layout",null),w([T(),Jc("esri/widgets/Zoom/t9n/Zoom")],Gn.prototype,"messages",void 0),w([T()],Gn.prototype,"view",null),w([T({type:qO})],Gn.prototype,"viewModel",void 0),Gn=w([W("esri.widgets.Zoom")],Gn);const iit=Gn;function rit(t){return(t==null?void 0:t.view)!==void 0}let Sy=class extends itt{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(s=>{const a=this._find(s),d=a==null?void 0:a.widget;rit(d)&&(d.view=i)})},this._componentsWatcher=(i,s)=>{this._removeComponents(s),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([It(()=>this.components,this._componentsWatcher,xe),It(()=>this.view,this._updateViewAwareWidgets,xe)])}_add(e,i,s,a,d){let y=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;y=this._createComponent(e)}super._add(y,i,s,a,d)}_removeComponents(e){e.forEach(i=>{const s=this._find(i);s&&(this.remove(s),s.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new xy({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new Ket({view:i});case"compass":return new Xet({view:i});case"navigation-toggle":return new Qet({view:i});case"zoom":return new iit({view:i})}}};w([T()],Sy.prototype,"components",void 0),Sy=w([W("esri.views.ui.DefaultUI")],Sy);const BO=Sy;let $y=class extends BO{constructor(e){super(e),this.components=["attribution","zoom"]}};w([T()],$y.prototype,"components",void 0),$y=w([W("esri.views.ui.2d.DefaultUI2D")],$y);const HO=$y;var K3;let Ty=K3=class extends gt{constructor(t){super(t),this.color=new Xt([0,0,0,1])}clone(){return new K3(ot({color:this.color}))}};w([T({type:Xt,json:{write:!0}})],Ty.prototype,"color",void 0),Ty=K3=w([W("esri.webmap.background.ColorBackground")],Ty);const sit=Ty;let WO,JO,KO,YO,ZO,XO;async function nit(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:s,MagnifierView2D:a,Stage:d}]=await Promise.all([bt(()=>import("./webglDeps-13e805d9.js"),["assets/webglDeps-13e805d9.js","assets/VertexArrayObject-4993c7e2.js","assets/Texture-fa872f05.js","assets/enums-b14466b3.js","assets/ProgramTemplate-b85ac4aa.js","assets/programUtils-fda6ef65.js","assets/NestedMap-1b5db22e.js"]),bt(()=>import("./mapViewDeps-60e193ee.js"),["assets/mapViewDeps-60e193ee.js","assets/CIMResourceManager-4ba2a84a.js","assets/fontUtils-5dd2e502.js","assets/Rasterizer-edba21d8.js","assets/cimAnalyzer-a3b0bb67.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-a941d33c.js","assets/alignmentUtils-ae955d28.js","assets/definitions-4e50b8bb.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-fe80be7e.js","assets/floatRGBA-2a9b8092.js","assets/rasterizingUtils-2b30e95a.js","assets/imageutils-9ee1a468.js","assets/Container-93bc143e.js","assets/EffectView-caaae2d8.js","assets/enums-b14466b3.js","assets/Texture-fa872f05.js","assets/BufferPool-a1cb4da5.js","assets/AttributeStoreView-9715ba03.js","assets/TiledDisplayObject-c6bd6cb6.js","assets/color-4180df3d.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-7b621762.js","assets/VertexArrayObject-4993c7e2.js","assets/ProgramTemplate-b85ac4aa.js","assets/GeometryUtils-87d0ec45.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-c3520e2b.js","assets/visualVariablesUtils-44c6f339.js","assets/ExpandedCIM-2a39fa6f.js","assets/clusterUtils-5ded844a.js","assets/util-421799ed.js","assets/enums-fb086c25.js","assets/programUtils-fda6ef65.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-9b3e6e9f.js","assets/Matcher-867ec160.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-3d6b2927.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-96192c60.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-07dd2af1.js","assets/arcadeTimeUtils-c60ee006.js","assets/executionError-c92d3b85.js","assets/projectionSupport-1a5588c8.js","assets/json-48e3ea08.js","assets/RenderingContext-a785329f.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-4936cf93.js","assets/normalizeUtilsSync-f11102c4.js","assets/GraphicContainer-d37adaa8.js","assets/BaseGraphicContainer-fc34a333.js","assets/FeatureContainer-fa087d0b.js","assets/TileContainer-d7453e14.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-a163b1ab.js"])]);JO=t,KO=e,YO=i,ZO=s,XO=a,WO=d}const iS=160,rS={flipY:!0,premultipliedAlpha:!0};let qt=class extends eJ(NK(wK(wY))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Fc({getCollections:()=>{var e,i;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new vr({constraints:new kk({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new DZ(this),this._pePromise=null,this.floors=new Vt,this.highlightOptions=new Zk,this.inputManager=new vQ({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Xk,this.type="2d",this.ui=new HO,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([It(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(iS)},p0),this.on("resize",e=>this.stateManager.resize(e.width,e.height)),It(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),IH()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Je(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new $Q(this.featuresTilingScheme)}get constraintsInfo(){var i,s;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,e=this.spatialReference;return{lods:(s=t==null?void 0:t.spatialReference)!=null&&s.equals(e)?t.lods:null,spatialReference:e}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:t,constraints:e,center:i,viewpoint:s,extent:a}=this;let d=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!a&&(e!=null&&e.effectiveLODs||(d=-1),(!i||t===0&&d===-1)&&(!s||s.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!_u()||(this._pePromise||(this._pePromise=Ml().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const e=this.spatialReference,i=t.targetGeometry;return!!Zo(i.spatialReference,e)||this._projectionEngineLoaded}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{var s;t===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask.animationInProgress=!1};t.when(i,i)}get background(){return ait(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const e=this.stateManager.constraints;this.stateManager.constraints=t,e==null||e.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){this.stateManager.rotation=t}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,i,s;const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0));if(at("esri-2d-log-updating")){const a=this.allLayerViews.reduce((d,y)=>({...d,[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(a)}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),k_(()=>this.ready,e).then(()=>{var a;const i={animate:!0,...e},s=bZ(t,this);return(a=this.animation)==null||a.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});mt.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(t,e){const i=cx(t)?ux(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,a=!1,d=null,y=null;e!=null&&e.include?nS(e.include,sS(this,I=>s.add(I),I=>{d||(d=new Set),d.add(I)},I=>s.add(I),()=>a=!0)):(a=!0,s=new Set(this.allLayerViews)),e!=null&&e.exclude&&nS(e.exclude,sS(this,I=>s.delete(I),I=>{y||(y=new Set),y.add(I)}));const m=this.allLayerViews.filter(I=>!I.suspended&&s.has(I)).reverse(),_=this.toMap(i);let S=[...a?this.graphicsView.hitTest(_).map(I=>({type:"graphic",graphic:I,layer:null,mapPoint:_})):[],...await Promise.all(m.map(I=>I.hitTest(_,i)).toArray())].filter(Yh).flat().filter(Yh);return d&&(S=S.filter(I=>!("graphic"in I)||!I.graphic||(d==null?void 0:d.has(Y3(I.graphic))))),y&&(S=S.filter(I=>!("graphic"in I)||!I.graphic||!(y!=null&&y.has(Y3(I.graphic))))),{screenPoint:i,results:S}}async takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return EQ(i,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},rS)}async _takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return IQ(i,rS)}_createScreenshotPlan(t){t=t??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,PQ(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;t.layers?(i=[],t.layers.forEach(d=>{const y=this.allLayerViews.find(m=>m.layer.id===d.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:s,quality:a}=OQ(t.format,t.quality);return MQ(t,e,this.size,this.padding,s,a,i,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;const e=cx(t)?ux(this,t):t;return this.stateManager.toMap(e)}toScreen(t){return this.stateManager.toScreen(t)}on(t,e,i,s){return this.inputManager&&this.viewEvents.on(t,e,i,s)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,e,i;return this.map&&"initialViewProperties"in this.map&&((e=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:e.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(t){return vx.hasLayerViewModule(t)}importLayerView(t){return vx.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(mt.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(e=>({...e,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=HQ(this.type);return at("safari")&&at("safari")<9&&(t=new lt("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:at("safari")})),t!=null?(mt.getLogger(this).warn("#validate()",t.message),Promise.reject(t)):nit()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new P3),this.animation}_cancellableGoTo(t,e,i){const s=()=>t===this._gotoTask,a=i.then(()=>{s()&&(this.animation=null)}).catch(y=>{throw s()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),y}),d=new Promise(y=>y(a));return e.when().catch(()=>{s()&&d.cancel&&d.cancel()}),d}_gotoImmediate(t,e){const i=this._gotoTask,s=this.animation,a=t.then(d=>{if(Ke(e),i!==this._gotoTask)throw new lt("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=d,s.finish()});return this._cancellableGoTo(i,s,a)}_flipStationary(t){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<iS&&(this._stationaryTimer=this._flipStationary(e))},t)),this._stationaryTimer}_getDefaultViewpoint(){var F;const{constraints:t,initialExtent:e,map:i,padding:s,size:a}=this;if(!t)return null;const d=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),m=d==null?void 0:d.viewpoint,_=((F=m==null?void 0:m.targetGeometry)==null?void 0:F.extent)??e,S=_==null?void 0:_.center,I=(m==null?void 0:m.rotation)??0,A=(m==null?void 0:m.scale)||_&&Ac(_,[a[0]-s.left-s.right,a[1]-s.top-s.bottom]),P=y.center??S,L=y.rotation??I,j=y.scale??A;return P&&j?new Yn({targetGeometry:P,scale:j,rotation:L}):null}_gotoAnimated(t,e){const i=this._gotoTask,s=this.animation;if(!s)return Promise.resolve();const a=t.then(d=>{if(Ke(e),i!==this._gotoTask)throw new lt("view:goto-interrupted","Goto was interrupted");return s.update(d),this.animationManager.animate(s,this.viewpoint,e),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,a)}_startup(){var y;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const e=new WO(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=e,this._magnifierView=new XO,this._magnifierView.magnifier=this.magnifier;const i=new YO({view:this});this._set("labelManager",i);const s=new jZ({view:this});this._set("animationManager",s);const a=new ZO({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),e.on("post-render",()=>this._set("rendering",e.renderRequested)),e.on("will-render",()=>this._set("rendering",e.renderRequested)),e.on("webgl-error",m=>this.fatalError=m.error),It(()=>this.stationary,m=>e.stationary=m,No),It(()=>this.background,m=>{e.backgroundColor=m==null?void 0:m.color,this._magnifierView.backgroundColor=m==null?void 0:m.color},No),It(()=>this.magnifier,m=>this._magnifierView.magnifier=m,No),It(()=>this.renderingOptions,m=>e.renderingOptions=m,No),It(()=>this.highlightOptions,m=>e.highlightOptions=m,No),It(()=>this.state.id,()=>e.state=this.state,No)],"map-view"),this._updateStageChildren();const d=this._resolveWhenReady;this._resolveWhenReady=[],d.forEach(m=>m(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new JZ(S3.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const e=new JO({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new KO(t)});this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};qt.type="2d",w([T({readOnly:!0})],qt.prototype,"animationManager",void 0),w([T({constructOnly:!0})],qt.prototype,"deactivatedWebGLExtensions",void 0),w([T({constructOnly:!0})],qt.prototype,"debugWebGLExtensions",void 0),w([T({readOnly:!0})],qt.prototype,"featuresTilingScheme",void 0),w([T({readOnly:!0})],qt.prototype,"fullOpacity",void 0),w([T({readOnly:!0})],qt.prototype,"graphicsTileStore",null),w([T()],qt.prototype,"graphicsView",void 0),w([T()],qt.prototype,"stateManager",void 0),w([T()],qt.prototype,"constraintsInfo",null),w([T({readOnly:!0})],qt.prototype,"state",null),w([T()],qt.prototype,"initialExtentRequired",null),w([T()],qt.prototype,"labelManager",void 0),w([T({readOnly:!0})],qt.prototype,"resourceManager",null),w([T({readOnly:!0})],qt.prototype,"textureManager",null),w([T({readOnly:!0})],qt.prototype,"mapViewNavigation",void 0),w([T({constructOnly:!0})],qt.prototype,"renderCanvas",void 0),w([T()],qt.prototype,"renderingOptions",void 0),w([T({readOnly:!0})],qt.prototype,"rendering",void 0),w([T({constructOnly:!0})],qt.prototype,"supersampleScreenshotsEnabled",void 0),w([T({readOnly:!0})],qt.prototype,"supportsGround",void 0),w([T()],qt.prototype,"_stationaryTimer",void 0),w([T()],qt.prototype,"_defaultsFromMapSettings",null),w([T()],qt.prototype,"_pePromise",void 0),w([T({readOnly:!0})],qt.prototype,"typeSpecificPreconditionsReady",null),w([T()],qt.prototype,"animation",null),w([T({type:sit})],qt.prototype,"background",null),w([T()],qt.prototype,"center",null),w([T({type:kk})],qt.prototype,"constraints",null),w([T()],qt.prototype,"extent",null),w([T()],qt.prototype,"floors",void 0),w([T({type:Zk})],qt.prototype,"highlightOptions",void 0),w([T({readOnly:!0})],qt.prototype,"inputManager",void 0),w([T()],qt.prototype,"map",void 0),w([T()],qt.prototype,"padding",null),w([T()],qt.prototype,"resizeAlign",null),w([T({readOnly:!0})],qt.prototype,"resolution",null),w([T()],qt.prototype,"rotation",null),w([T()],qt.prototype,"scale",null),w([T({constructOnly:!0})],qt.prototype,"spatialReferenceLocked",void 0),w([T()],qt.prototype,"stationary",null),w([T({type:Xk,readOnly:!0})],qt.prototype,"timeline",void 0),w([T({readOnly:!0})],qt.prototype,"type",void 0),w([T({readOnly:!0})],qt.prototype,"updating",null),w([T()],qt.prototype,"viewpoint",null),w([T()],qt.prototype,"zoom",null),w([T({readOnly:!0})],qt.prototype,"navigating",null),w([T(),Ne(t=>t instanceof BO?t:Xh(HO,t))],qt.prototype,"ui",void 0),qt=w([W("esri.views.MapView")],qt);const oit=qt;function Y3(t){var i,s;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((s=t.sourceLayer)==null?void 0:s.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function sS(t,e,i,s,a){return d=>{if(d instanceof io){if(d.layer===t)a==null||a();else{const y=t.allLayerViews.find(m=>m.layer===d.layer);y&&(s==null||s(y))}i(Y3(d))}else{const y=t.allLayerViews.find(m=>m.layer===d);y&&e(y)}}}function nS(t,e){if(t)if(Wy(t))for(const i of t)if(Wy(i))for(const s of i)e(s);else e(i);else e(t)}function ait(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}function lit(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const d=Object.getOwnPropertyDescriptor(s,a);d&&Object.defineProperty(t,a,d.get?d:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var My={exports:{}};My.exports,function(t,e){function i(){function a(u){if(typeof u=="number")return q.Uc.ah(u);if(u==null)return null;if(Ps[u]!=null)return q.Uc.ah(Ps[u]);throw Error("Unrecognised Unit Type")}function d(u){if(typeof u=="number")return q.Uc.ah(u);if(u==null)return null;if(kf[u]!=null)return q.Uc.ah(kf[u]);throw Error("Unrecognised Unit Type")}function y(u){if(u)switch(u){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function m(u,k,v,h){if(v==null||v.B())return null;switch(v.K()){case q.sn.Point:return u.exportPoint(k,v,h);case q.sn.Polygon:return u.exportPolygon(k,v,h);case q.sn.Polyline:return u.exportPolyline(k,v,h);case q.sn.MultiPoint:return u.exportMultipoint(k,v,h);case q.sn.Envelope:return u.exportExtent(k,v,h)}return null}function _(u,k,v,h){if(v.K()!==q.sn.Point)throw Error("Geometry not Point");return u.exportPoint(k,v,h)}function S(u,k,v){return u.convertToGEGeometry(k,v)}function I(u){var k=u.wkid;u=u.wkt;var v=ao.get(k||u);return v==null&&(k!==-1&&k!=null?(v=q.Gg.create(k),ao.set(k,v)):u&&(v=q.Gg.lP(u),ao.set(u,v)),na.has(k||u)&&v.QW(na.get(k||u))),v}function A(u){var k;if(u==null)return null;var v=I(u);return u=v.Id(),v=v.Mn(),(k={}).tolerance=v,k.unitType=u==null?-1:u.pd,k.unitID=u==null?-1:u.Fc(),k.unitBaseFactor=u==null?0:u.ci,k.unitSquareDerivative=u==null?0:q.Uc.WF(u).Fc(),k}function P(u,k,v,h){return v==null?null:(v=q.ac.clip(S(u,vt,v),S(u,vt,h),I(k)),m(u,vt,v,k))}function L(u,k,v,h){v=q.ac.fl(S(u,vt,v),S(u,vt,h),I(k)),h=[];for(var o=0;o<v.length;o++)h.push(m(u,vt,v[o],k));return h}function j(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.contains(S(u,vt,v),S(u,vt,h),I(k))}function F(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.wP(S(u,vt,v),S(u,vt,h),I(k))}function V(u,k,v,h,o){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.ub(S(u,vt,v),S(u,vt,h),I(k),a(o))}function J(u,k,v,h){return!(v==null&&h!=null||h==null&&v!=null)&&q.ac.Nb(S(u,vt,v),S(u,vt,h),I(k))}function Q(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.OS(S(u,vt,v),S(u,vt,h),I(k))}function Z(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.touches(S(u,vt,v),S(u,vt,h),I(k))}function et(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.mY(S(u,vt,v),S(u,vt,h),I(k))}function st(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.OP(S(u,vt,v),S(u,vt,h),I(k))}function nt(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.yU(S(u,vt,v),S(u,vt,h),I(k))}function pt(u,k,v,h,o){if(v==null||h==null)throw Error("Illegal Argument Exception");return q.ac.tB(S(u,vt,v),S(u,vt,h),I(k),o)}function yt(u,k,v){if(v==null)throw Error("Illegal Argument Exception");return q.ac.ZS(S(u,vt,v),I(k))}function $t(u,k,v){if(v==null)throw Error("Illegal Argument Exception");return v=q.ac.$B(S(u,vt,v),I(k)),m(u,vt,v,k)}function Ot(u,k,v,h){if(h===void 0&&(h=!1),v==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){var o=h,r=[];for(h=0;h<v.length;h++)r.push(S(u,vt,v[h]));for(v=q.ac.eP(r,o),o=Array(v.length),h=0;h<v.length;h++)o[h]=m(u,vt,v[h],k);return o}return h=q.ac.dP(S(u,vt,v),I(k)),m(u,vt,h,k)}function Ct(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(S(u,vt,v[r]));for(v=q.ac.LP(o,S(u,vt,h),I(k)),h=Array(v.length),r=0;r<v.length;r++)h[r]=m(u,vt,v[r],k);return h}return r=q.ac.km(S(u,vt,v),S(u,vt,h),I(k)),m(u,vt,r,k)}function Nt(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(S(u,vt,v[r]));for(v=q.ac.RX(o,S(u,vt,h),I(k)),h=Array(v.length),r=0;r<v.length;r++)h[r]=m(u,vt,v[r],k);return h}return r=q.ac.gp(S(u,vt,v),S(u,vt,h),I(k)),m(u,vt,r,k)}function Ht(u,k,v,h){if(v==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(S(u,vt,v[r]));for(v=q.ac.MS(o,S(u,vt,h),I(k)),h=Array(v.length),r=0;r<v.length;r++)h[r]=m(u,vt,v[r],k);return h}return r=q.ac.Fa(S(u,vt,v),S(u,vt,h),I(k)),m(u,vt,r,k)}function Pt(u,k,v,h){if(v==null)return null;var o=[];if(Array.isArray(v)){if(v.length===0)return null;for(h=0;h<v.length;h++)o.push(S(u,vt,v[h]))}else o.push(S(u,vt,v)),h!=null&&o.push(S(u,vt,h));return m(u,vt,q.ac.fY(o,I(k)),k)}function Ve(u,k,v,h,o,r,n,l){var c=0;if(r!=null)switch(r){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(v)){if(v==null)u=null;else if(v.length===0)u=[];else{var p=[];for(r=0;r<v.length;r++)p.push(S(u,vt,v[r]));for(v=q.ac.wU(p,I(k),h,c,n,l,a(o)),h=Array(v.length),r=0;r<v.length;r++)h[r]=m(u,vt,v[r],k);u=h}return u}return v=q.ac.offset(S(u,vt,v),I(k),h,c,n,l,a(o)),m(u,vt,v,k)}function pi(u,k,v,h,o,r){if(r===void 0&&(r=!1),Array.isArray(v)){if(!Array.isArray(h)){for(var n=[],l=0;l<v.length;l++)n.push(h);h=n}if(h.length!=v.length){if(h.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(l=0;l<v.length;l++)h[l]===void 0?n.push(c):(n.push(h[l]),c=h[l]);h=n}return le(u,k,v,h,o,!1,r,"geodesic",NaN)}return v=q.ac.buffer(S(u,vt,v),I(k),h,a(o),!1,0,NaN),m(u,vt,v,k)}function Ge(u,k,v,h,o,r,n,l){if(Array.isArray(v)){if(!Array.isArray(h)){for(var c=[],p=0;p<v.length;p++)c.push(h);h=c}if(h.length!==v.length){if(h.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(p=0;p<v.length;p++)h[p]===void 0?c.push(f):(c.push(h[p]),f=h[p]);h=c}return le(u,k,v,h,o,!0,r,n,l)}return n===void 0&&(n=NaN),v=q.ac.buffer(S(u,vt,v),I(k),h,a(o),!0,y(r),n),m(u,vt,v,k)}function le(u,k,v,h,o,r,n,l,c){if(c===void 0&&(c=NaN),v==null)return null;if(v.length===0)return[];for(var p=[],f=0;f<v.length;f++)p.push(S(u,vt,v[f]));for(v=q.ac.HN(p,I(k),h,a(o),r,n,y(l),c),h=Array(v.length),f=0;f<v.length;f++)h[f]=m(u,vt,v[f],k);return h}function fr(u,k,v,h,o){var r;return o===void 0&&(o=!0),v=q.ac.iz(S(u,vt,v),S(u,vt,h),o),(r={}).coordinate=_(u,vt,v.az(),k),r.distance=v.cz(),r.isRightSide=v.Nz(),r.vertexIndex=v.Va(),r.isEmpty=v.B(),r}function Tf(u,k,v,h){var o;return v=q.ac.jz(S(u,vt,v),S(u,vt,h)),(o={}).coordinate=_(u,vt,v.az(),k),o.distance=v.cz(),o.isRightSide=v.Nz(),o.vertexIndex=v.Va(),o.isEmpty=v.B(),o}function Fl(u,k,v,h,o,r){var n;for(v=q.ac.kz(S(u,vt,v),S(u,vt,h),o,r),h=[],o=0;o<v.length;o++)v[o].B()===!1&&h.push(((n={}).coordinate=_(u,vt,v[o].az(),k),n.distance=v[o].cz(),n.isRightSide=v[o].Nz(),n.vertexIndex=v[o].Va(),n.isEmpty=v[o].B(),n));return h}function w0(u,k,v,h,o,r){return v=q.ac.LQ(S(u,vt,v),I(k),h,o,a(r)),m(u,vt,v,k)}function Mf(u,k,v,h,o){return v=q.ac.Sr(S(u,vt,v),I(k),h,a(o)),m(u,vt,v,k)}function mv(u,k,v,h,o,r){return r===void 0&&(r=0),v=q.ac.Ry(S(u,vt,v),I(k),h,a(o),r),m(u,vt,v,k)}function gv(u,k,v,h){if(v==null)throw Error("Illegal Argument Exception");return q.ac.EU(S(u,vt,v),I(k),d(h))}function vv(u,k,v,h){if(v==null)throw Error("Illegal Argument Exception");return q.ac.FU(S(u,vt,v),I(k),a(h))}function Ef(u,k,v,h,o){if(v==null)throw Error("Illegal Argument Exception");return q.ac.RQ(S(u,vt,v),I(k),d(h),y(o))}function bv(u,k,v,h,o){if(v==null)throw Error("Illegal Argument Exception");return q.ac.UQ(S(u,vt,v),I(k),a(h),y(o))}function wv(u){q.IL.bind(u)}function _v(u,k,v,h,o){var r=null,n=null;if(h){if(!o)throw q.i.O("AOI missing Spatial Reference");r=S(u,vt,h),n=I(o).hh()}return(u=q.iu.SR(I(k).hh(),I(v).hh(),r,n))!==null?u:null}function xv(u,k,v,h,o){var r=null,n=null;if(h){if(!o)throw q.i.O("AOI missing Spatial Reference");r=S(u,vt,h),n=I(o).hh()}return q.iu.TR(I(k).hh(),I(v).hh(),r,n)}function Sv(u,k,v,h,o,r){if(o===void 0&&(o=null),r===void 0&&(r=null),r){var n=new q.tC;n.Xu=r.densificationStep,n.Lr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&n.KW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&n.LW(r.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(k.length===0)return[];if(o){if(!(r=o.getCachedGeTransformation(v,h)))t:{if(r=o,o=null,r){var l=r.getGTListEntry();if(l!==null){o=new q.rC(null);for(var c=0,p=l.steps;c<p.length;c++){l=p[c];var f=new q.Cx(l.geogtran);l.isInverse&&f.Lz(),o.add(f)}n=q.xr.Pr(I(v).hh(),I(h).hh(),o,n),r.assignCachedGe(v,h,n),r=n;break t}}if(o===null&&r&&r.steps&&0<r.steps.length){for(o=new q.rC(null),c=0,p=r.steps;c<p.length;c++)(l=p[c]).wkid!=-1&&l.wkid!=null?o.add(q.Cx.create(l.wkid,l.isInverse)):o.add(q.Cx.pP(l.wkt,l.isInverse));n=q.xr.Pr(I(v).hh(),I(h).hh(),o,n),r.assignCachedGe(v,h,n),r=n}else r=q.xr.Pr(I(v).hh(),I(h).hh(),o,n)}for(v=[],o=0;o<k.length;o++)n=k[o],v.push(If(u,n,h,r))}else for(r=q.xr.Pr(I(v).hh(),I(h).hh(),null),v=[],o=0;o<k.length;o++)n=k[o],v.push(If(u,n,h,r));return v}function If(u,k,v,h){return k=q.ac.Bh(S(u,vt,k),h),m(u,vt,k,v)}function $v(u,k){u!=null&&(u=u.wkid||u.wkt,na.has(u),na.set(u,k),ao.has(u)&&ao.delete(u))}function Tv(u){u!=null&&(u=u.wkid||u.wkt,na.has(u)&&(na.delete(u),ao.has(u)&&ao.delete(u)))}function Mv(u,k,v,h){if(v==null||h==null)return[];var o=[],r=0;for(v=q.ac.LS(S(u,vt,v),S(u,vt,h),I(k))||[];r<v.length;r++)o.push(m(u,vt,v[r],k));return o}var xi,q,ir,Af,pe=this&&this.__extends||function(){function u(k,v){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,o){h.__proto__=o}||function(h,o){for(var r in o)o.hasOwnProperty(r)&&(h[r]=o[r])})(k,v)}return function(k,v){function h(){this.constructor=k}u(k,v),k.prototype=v===null?Object.create(v):(h.prototype=v.prototype,new h)}}();(function(u){var k;(k=u.sn||(u.sn={}))[k.Unknown=0]="Unknown",k[k.Point=33]="Point",k[k.Line=322]="Line",k[k.Envelope=197]="Envelope",k[k.MultiPoint=550]="MultiPoint",k[k.Polyline=1607]="Polyline",k[k.Polygon=1736]="Polygon",function(h){h[h.enumMild=0]="enumMild",h[h.enumMedium=1]="enumMedium",h[h.enumHot=2]="enumHot"}(u.TK||(u.TK={}));var v=function(){function h(){this.description=null,this.QA=0}return h.prototype.K=function(){return 0},h.prototype.Eb=function(){return-1},h.prototype.Pf=function(o){this.wc(),o!=this.description&&this.un(o)},h.prototype.un=function(){},h.prototype.Ll=function(o){this.wc(),o!=this.description&&(o=u.fe.xR(this.description,o))!=this.description&&this.un(o)},h.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},h.prototype.se=function(o){this.wc(),this.description.hasAttribute(o)||(o=u.fe.wR(this.description,o),this.un(o))},h.prototype.Vg=function(){return null},h.prototype.dn=function(){},h.prototype.A=function(){},h.prototype.So=function(){},h.prototype.yc=function(o){this.A(o)},h.prototype.B=function(){return!0},h.prototype.Pa=function(){},h.prototype.Pc=function(){},h.prototype.Ja=function(){return null},h.prototype.copyTo=function(){},h.prototype.He=function(){return 0},h.prototype.Rb=function(){return 0},h.prototype.dG=function(){return this.hasAttribute(1)},h.uf=function(o){return 1+((192&o)>>6)>>1},h.Tn=function(o){return(32&o)!=0},h.PS=function(o){return(128&o)!=0},h.zd=function(o){return(256&o)!=0},h.zj=function(o){return(512&o)!=0},h.Ic=function(o){return(1024&o)!=0},h.prototype.Qf=function(){var o=this.Ja();return this.copyTo(o),o},h.prototype.ng=function(){return null},h.kg=function(o){var r=o.Ja();return o.copyTo(r),r},h.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},h.zx=function(o){var r=o.K();if(h.zj(r))return o.I();if(o.B())return 0;if(r==197)return 4;if(r==33)return 1;if(h.zd(r))return 2;throw u.i.ga("missing type")},h}();u.ba=v})(q||(q={})),ir=q||(q={}),Af=function(){function u(){this.y=this.x=0}return u.construct=function(k,v){var h=new u;return h.x=k,h.y=v,h},u.cl=function(k){var v=new u;return v.x=k.x,v.y=k.y,v},u.prototype.na=function(k,v){this.x=k,this.y=v},u.prototype.N=function(k){this.x=k.x,this.y=k.y},u.prototype.hq=function(k,v){return this.x===k&&this.y===v},u.prototype.Mz=function(k){return 2220446049250313e-31>=Math.abs(this.x-k.x)&&2220446049250313e-31>=Math.abs(this.y-k.y)},u.prototype.rb=function(k){return this.x===k.x&&this.y===k.y},u.prototype.Nb=function(k){return k==this||k instanceof u&&this.x==k.x&&this.y==k.y},u.prototype.sub=function(k){this.x-=k.x,this.y-=k.y},u.prototype.vc=function(k,v){this.x=k.x-v.x,this.y=k.y-v.y},u.prototype.add=function(k,v){v!==void 0?(this.x=k.x+v.x,this.y=k.y+v.y):(this.x+=k.x,this.y+=k.y)},u.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},u.prototype.nt=function(k){this.x=-k.x,this.y=-k.y},u.prototype.IS=function(k,v,h){this.x=k.x*(1-h)+v.x*h,this.y=k.y*(1-h)+v.y*h},u.prototype.Dt=function(k,v){this.x=this.x*k+v.x,this.y=this.y*k+v.y},u.prototype.BW=function(k,v,h){this.x=v.x*k+h.x,this.y=v.y*k+h.y},u.prototype.scale=function(k){this.x*=k,this.y*=k},u.prototype.compare=function(k){return this.y<k.y?-1:this.y>k.y?1:this.x<k.x?-1:this.x>k.x?1:0},u.prototype.normalize=function(){var k=this.length();k==0&&(this.x=1,this.y=0),this.x/=k,this.y/=k},u.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},u.prototype.Uk=function(){return this.x*this.x+this.y*this.y},u.ub=function(k,v){return Math.sqrt(this.zc(k,v))},u.Jy=function(k,v,h,o){return k-=h,v-=o,Math.sqrt(k*k+v*v)},u.prototype.Sh=function(k){return this.x*k.x+this.y*k.y},u.prototype.aD=function(k){return Math.abs(this.x*k.x)+Math.abs(this.y*k.y)},u.prototype.yi=function(k){return this.x*k.y-this.y*k.x},u.prototype.Ct=function(k,v){var h=-this.x*v+this.y*k;this.x=this.x*k+this.y*v,this.y=h},u.prototype.Jv=function(){var k=this.x;this.x=-this.y,this.y=k},u.prototype.HG=function(k){this.x=-k.y,this.y=k.x},u.prototype.cr=function(){var k=this.x;this.x=this.y,this.y=-k},u.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},u.pu=function(k,v){var h=k.su(),o=v.su();return o==h?0>(k=k.yi(v))?1:0<k?-1:0:h<o?-1:1},u.zc=function(k,v){var h=k.x-v.x;return h*h+(k=k.y-v.y)*k},u.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},u.prototype.Sc=function(){this.y=this.x=NaN},u.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},u.prototype.offset=function(k,v){var h=u.ub(k,v),o=u.construct(this.x,this.y);if(h==0)return u.ub(o,k);var r=new u;return r.N(v),r.sub(k),o.sub(k),o.yi(r)/h},u.Wq=function(k,v,h){var o=new ir.Xb;o.set(v.x),o.sub(k.x);var r=new ir.Xb;r.set(h.y),r.sub(k.y);var n=new ir.Xb;n.set(v.y),n.sub(k.y);var l=new ir.Xb;return l.set(h.x),l.sub(k.x),o.Bg(r),n.Bg(l),o.sub(n),o.rs()?(o=new ir.jp(v.x),r=new ir.jp(k.x),n=new ir.jp(k.y),o=o.kt(r),k=(k=new ir.jp(h.y)).kt(n),v=(v=new ir.jp(v.y)).kt(n),h=(h=new ir.jp(h.x)).kt(r),o=o.nr(k),v=v.nr(h),(o=o.nr(v)).iT()?-1:o.aS()?1:0):0>(h=o.value())?-1:0<h?1:0},u.prototype.dc=function(){return ir.P.wj(ir.P.wj())},u}(),ir.h=Af,function(u){var k=function(){function v(h){this.Ay=this.Ot=0,this.KX=h}return v.prototype.reset=function(){this.Ay=this.Ot=0},v.prototype.add=function(h){h-=this.Ay;var o=this.Ot+h;this.Ay=o-this.Ot-h,this.Ot=o},v.prototype.sub=function(h){this.add(-h)},v.prototype.tm=function(){return this.KX+this.Ot},v}();u.Ex=k,u.mc=function(){function v(){}return v.En=function(h,o){return 0<=o?Math.abs(h):-Math.abs(h)},v.sign=function(h){return 0>h?-1:0<h?1:0},v.MK=function(h){return h-360*Math.floor(h/360)},v.round=function(h){return Math.floor(h+.5)},v.ox=function(h){return h*h},v.jq=function(h,o,r){return .5>=r?h+(o-h)*r:o-(o-h)*(1-r)},v.JG=function(h,o,r,n){.5>=r?(n.x=h.x+(o.x-h.x)*r,n.y=h.y+(o.y-h.y)*r):(n.x=o.x-(o.x-h.x)*(1-r),n.y=o.y-(o.y-h.y)*(1-r))},v.gT=function(h,o,r,n,l,c){.5>=l?(c.x=h+(r-h)*l,c.y=o+(n-o)*l):(c.x=r-(r-h)*(1-l),c.y=n-(n-o)*(1-l))},v}()}(q||(q={})),function(u){var k=function(v){function h(){var o=v.call(this)||this;return o.ta=0,o.oa=0,o.qa=0,o.ma=0,o.la=null,o}return pe(h,v),h.prototype.bc=function(){return u.h.construct(this.ta,this.oa)},h.prototype.$p=function(o){o.x=this.ta,o.y=this.oa},h.prototype.Ec=function(o){this.gm(0,o)},h.prototype.UB=function(o,r){this.gm(0,u.h.construct(o,r))},h.prototype.Vo=function(o){this.cD(0,o)},h.prototype.setStart=function(o){this.pD(0,o)},h.prototype.yv=function(o,r){return this.Pd(0,o,r)},h.prototype.TB=function(o,r,n){this.vn(0,o,r,n)},h.prototype.xc=function(){return u.h.construct(this.qa,this.ma)},h.prototype.Vr=function(o){o.x=this.qa,o.y=this.ma},h.prototype.Rc=function(o){this.gm(1,o)},h.prototype.Sl=function(o,r){this.gm(1,u.h.construct(o,r))},h.prototype.Ro=function(o){this.cD(1,o)},h.prototype.setEnd=function(o){this.pD(1,o)},h.prototype.jv=function(o,r){return this.Pd(1,o,r)},h.prototype.JB=function(o,r,n){this.vn(1,o,r,n)},h.prototype.Eb=function(){return 1},h.prototype.B=function(){return this.Bc()},h.prototype.Pa=function(){},h.prototype.He=function(){return 0},h.prototype.Fa=function(o,r,n,l,c){return this.FM(o,r,n,l,c)},h.prototype.isIntersecting=function(o,r){return this.Br(o,r,!1)!=0},h.prototype.ss=function(o,r){return this.tu(o,r,!1)},h.prototype.tu=function(){return null},h.prototype.Bc=function(){return!1},h.prototype.$x=function(o){if(this.wc(),this.la==null&&0<o)this.la=u.P.mg(2*o);else if(this.la!=null&&this.la.length<2*o){for(var r=this.la.slice(0),n=this.la.length;n<2*o;n++)r[n]=0;this.la=r}},h.bM=function(o,r,n){if(0<n)var l=0;for(var c=0;c<n;c++)r[0+l]=o[0],l++},h.prototype.gm=function(o,r){o!=0?(this.qa=r.x,this.ma=r.y):(this.ta=r.x,this.oa=r.y)},h.prototype.un=function(o){if(this.la!=null){for(var r=u.fe.Kw(o,this.description),n=[],l=h.Ig(this.description,0),c=h.Ig(this.description,1),p=h.Ig(o,0),f=h.Ig(o,1),g=0,b=1,x=o.Ba;b<x;b++){var $=o.ld(b),E=u.sa.Wa($);if(r[b]==-1){var O=u.sa.te($);for($=0;$<E;$++)n[p+g]=O,n[f+g]=O,g++}else for(O=this.description.bk(r[b])-2,$=0;$<E;$++)n[p+g]=this.la[l+O],n[f+g]=this.la[c+O],g++,O++}this.la=n}this.description=o},h.prototype.cD=function(o,r){if(this.Bc())throw u.i.ga("empty geometry");r.Pf(this.description),r.Bc()&&r.wn();for(var n=0;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=0,p=u.sa.Wa(l);c<p;c++){var f=this.Pd(o,l,c);r.setAttribute(l,c,f)}},h.prototype.pD=function(o,r){if(this.wc(),r.Bc())throw u.i.ga("empty geometry");for(var n=r.description,l=0,c=n.Ba;l<c;l++)for(var p=n.Fd(l),f=u.sa.Wa(p),g=0;g<f;g++){var b=r.Vc(p,g);this.vn(o,p,g,b)}},h.prototype.Pd=function(o,r,n){if(this.Bc())throw u.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.ma:this.qa:n!=0?this.oa:this.ta;if(n>=u.sa.Wa(r))throw u.i.de();var l=this.description.Rf(r);return 0<=l?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[h.Ig(this.description,o)+this.description.bk(l)-2+n]):u.sa.te(r)},h.prototype.vn=function(o,r,n,l){if(this.wc(),n>=u.sa.Wa(r))throw u.i.de();var c=this.description.Rf(r);0>c&&(this.se(r),c=this.description.Rf(r)),r==0?o!=0?n!=0?this.ma=l:this.qa=l:n!=0?this.oa=l:this.ta=l:(this.la==null&&this.$x(this.description.Be.length-2),this.la[h.Ig(this.description,o)+this.description.bk(c)-2+n]=l)},h.prototype.copyTo=function(o){if(o.K()!=this.K())throw u.i.O();o.description=this.description,o.$x(this.description.Be.length-2),h.bM(this.la,o.la,2*(this.description.Be.length-2)),o.ta=this.ta,o.oa=this.oa,o.qa=this.qa,o.ma=this.ma,o.wc(),this.qp(o)},h.prototype.Vg=function(o,r){var n=new u.Oc;return this.Bc()?(n.Pa(),n):(n.pa=this.Pd(0,o,r),n.wa=n.pa,n.Nk(this.Pd(1,o,r)),n)},h.prototype.UI=function(o){this.Bc()?o.Pa():(o.pa=this.Pd(0,0,0),o.wa=o.pa,o.Nk(this.Pd(1,0,0)))},h.prototype.Vw=function(o,r){r.Pf(this.description),r.Db(this.ic(o));for(var n=1,l=this.description.Ba;n<l;n++)for(var c=this.description.Fd(n),p=u.sa.Wa(c),f=0;f<p;f++){var g=this.Vc(o,c,f);r.setAttribute(c,f,g)}},h.prototype.AM=function(o){if(this.description!=o.description||this.ta!=o.ta||this.qa!=o.qa||this.oa!=o.oa||this.ma!=o.ma)return!1;for(var r=0;r<2*(this.description.Be.length-2);r++)if(this.la[r]!=o.la[r])return!1;return!0},h.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},h.prototype.reverse=function(){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=1;for(var r=this.description.Ba;o<r;o++)for(var n=this.description.ld(o),l=0,c=u.sa.Wa(n);l<c;l++){var p=this.Pd(0,n,l),f=this.Pd(1,n,l);this.vn(0,n,l,f),this.vn(1,n,l,p)}},h.prototype.Br=function(o,r,n){var l=o.K();if(this.K()===322){if(l==322)return u.zb.JM(this,o,r,n);throw u.i.Ra()}throw u.i.Ra()},h.prototype.FM=function(o,r,n,l,c){var p=o.K();if(this.K()===322){if(p==322)return u.zb.Yx(this,o,r,n,l,c);throw u.i.Ra()}throw u.i.Ra()},h.prototype.Sx=function(){return null},h.Ig=function(o,r){return r*(o.Be.length-2)},h.prototype.ic=function(o,r){if(r===void 0)return r=new u.h,this.ic(o,r),r;u.mc.gT(this.ta,this.oa,this.qa,this.ma,o,r)},h.prototype.ge=function(){return null},h.prototype.$F=function(){return null},h.prototype.fq=function(){return null},h.prototype.Di=function(){return null},h.prototype.Rn=function(){return null},h.prototype.lg=function(){return null},h.prototype.Tx=function(o,r){return r!==void 0?this.ux(r)-this.ux(o):this.ux(o)},h.prototype.qp=function(){},h.prototype.fl=function(){return null},h.prototype.dh=function(){},h.prototype.Vc=function(){return null},h.prototype.Me=function(){return null},h.prototype.ux=function(){return null},h.prototype.IG=function(){return null},h.prototype.ub=function(o,r){if(!r&&this.Br(o,0,!1)!=0)return 0;r=17976931348623157e292;var n=this.bc(),l=o.ge(n,!1);return n.sub(o.ic(l)),(n=n.length())<r&&(r=n),n=this.xc(),l=o.ge(n,!1),n.sub(o.ic(l)),(n=n.length())<r&&(r=n),n=o.bc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<r&&(r=n),n=o.xc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<r&&(r=n),r},h.prototype.ng=function(){return u.si.im(this,null)},h}(u.ba);u.NC=k}(q||(q={})),new q.h,function(u){var k;(k=u.VK||(u.VK={}))[k.Unknown=-1]="Unknown",k[k.Not=0]="Not",k[k.Weak=1]="Weak",k[k.Strong=2]="Strong",function(h){h[h.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",h[h.IsWeakSimple=2]="IsWeakSimple",h[h.IsStrongSimple=4]="IsStrongSimple",h[h.DirtyOGCFlags=8]="DirtyOGCFlags",h[h.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",h[h.DirtyExactIntervals=64]="DirtyExactIntervals",h[h.DirtyLooseIntervals=128]="DirtyLooseIntervals",h[h.DirtyIntervals=192]="DirtyIntervals",h[h.DirtyIsEnvelope=256]="DirtyIsEnvelope",h[h.DirtyLength2D=512]="DirtyLength2D",h[h.DirtyRingAreas2D=1024]="DirtyRingAreas2D",h[h.DirtyCoordinates=1993]="DirtyCoordinates",h[h.DirtyAllInternal=65535]="DirtyAllInternal",h[h.DirtyAll=16777215]="DirtyAll"}(u.HK||(u.HK={}));var v=function(h){function o(){var r=h.call(this)||this;return r.Jm=65535,r.xa=0,r.Rg=-1,r.Cb=null,r}return pe(o,h),o.prototype.qp=function(){},o.prototype.Zx=function(){},o.prototype.ey=function(){},o.prototype.I=function(){return this.xa},o.prototype.B=function(){return this.Bc()},o.prototype.Bc=function(){return this.xa==0},o.prototype.ck=function(r){return(this.Jm&r)!=0},o.prototype.Nf=function(r,n){this.Jm=n?this.Jm|r:this.Jm&~r},o.prototype.oc=function(){this.ck(32)&&this.XM()},o.prototype.vx=function(){if(this.Bc())throw u.i.ga("This operation was performed on an Empty Geometry.")},o.prototype.we=function(r,n){if(0>r||r>=this.xa)throw u.i.ga("index out of bounds");this.oc(),n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.Fd(l),p=0,f=u.sa.Wa(c);p<f;p++){var g=this.Aa[l].gg(f*r+p);n.setAttribute(c,p,g)}},o.prototype.It=function(r,n){this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var p=l.Fd(c),f=u.sa.Wa(p),g=0;g<f;g++){var b=n.Vc(p,g);this.setAttribute(p,r,g,b)}},o.prototype.D=function(r,n){if(0>r||r>=this.I())throw u.i.de();this.oc(),this.Aa[0].uc(2*r,n)},o.prototype.Oa=function(r){var n=new u.h;return this.D(r,n),n},o.prototype.Hc=function(r,n){this.Aa[0].uc(2*r,n)},o.prototype.Db=function(r,n,l){if(0>r||r>=this.xa)throw u.i.de();this.oc();var c=this.Aa[0];l!==void 0?(c.write(2*r,n),c.write(2*r+1,l)):c.Vt(2*r,n),this.Qc(1993)},o.prototype.xz=function(){if(void 0>=this.I())throw u.i.de();this.oc();var r=this.Aa[0],n=new u.Od;return n.x=r.read(NaN),n.y=r.read(NaN),n.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):u.sa.te(1),n},o.prototype.ZB=function(r){if(0>r||r>=this.I())throw u.i.de();this.se(1),this.oc(),this.Qc(1993);var n=this.Aa[0];n.write(2*r,(void 0).x),n.write(2*r+1,(void 0).y),this.Aa[1].rr(r,(void 0).z)},o.prototype.Vc=function(r,n,l){if(0>n||n>=this.xa)throw u.i.de();var c=u.sa.Wa(r);if(l>=c)throw u.i.de();this.oc();var p=this.description.Rf(r);return 0<=p?this.Aa[p].gg(n*c+l):u.sa.te(r)},o.prototype.tF=function(r,n){return this.Vc(r,n,void 0)},o.prototype.setAttribute=function(r,n,l,c){if(0>n||n>=this.xa)throw u.i.de();var p=u.sa.Wa(r);if(l>=p)throw u.i.de();this.se(r),this.oc(),r=this.description.Rf(r),this.Qc(1993),this.Aa[r].rr(n*p+l,c)},o.prototype.vb=function(r){return this.vx(),this.se(r),this.oc(),this.Aa[this.description.Rf(r)]},o.prototype.kn=function(r,n){if(n!=null&&u.sa.Vp(r)!=n.Vp())throw u.i.O();this.se(r),r=this.description.Rf(r),this.Aa==null&&(this.Aa=u.Zc.lI(this.description.Ba)),this.Aa[r]=n,this.Qc(16777215)},o.prototype.un=function(r){var n=null;if(this.Aa!=null){var l=u.fe.Kw(r,this.description);n=[];for(var c=0,p=r.Ba;c<p;c++)l[c]!=-1&&(n[c]=this.Aa[l[c]])}this.description=r,this.Aa=n,this.Rg=-1,this.Qc(16777215)},o.prototype.vD=function(r){this.yu(!0),r instanceof u.l?this.aa.A(r):this.aa.So(r)},o.prototype.WM=function(r){this.yu(!1),r instanceof u.l?this.aa.A(r):this.aa.So(r)},o.prototype.dn=function(r){this.yu(!0),this.aa.copyTo(r)},o.prototype.A=function(r){this.vD(r)},o.prototype.So=function(r){this.vD(r)},o.prototype.yc=function(r){this.WM(r)},o.prototype.Vg=function(r,n){var l=new u.Oc;return this.Bc()?(l.Pa(),l):(this.yu(!0),this.aa.Vg(r,n))},o.prototype.dc=function(){var r=this.description.dc();if(!this.Bc())for(var n=this.I(),l=0,c=this.description.Ba;l<c;l++)r=this.Aa[l].Cn(r,0,n*u.sa.Wa(this.description.Fd(l)));return r},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&this.description.Nb(r.description))||this.Bc()!=r.Bc())return!1;if(this.Bc())return!0;var n=this.I();if(n!=r.I())return!1;for(var l=0;l<this.description.Ba;l++){var c=this.description.ld(l),p=this.vb(c),f=r.vb(c);if(!p.Nb(f,0,n*u.sa.Wa(c)))return!1}return!0},o.prototype.copyTo=function(r){if(r.K()!=this.K())throw u.i.O();this.ZC(r)},o.prototype.ZC=function(r){this.oc(),r.description=this.description,r.Aa=null;var n=this.description.Ba,l=null;if(this.Aa!=null){l=[];for(var c=0;c<n;c++)this.Aa[c]!=null&&(l[c]=this.Aa[c].BB(this.I()*u.sa.Wa(this.description.Fd(c))))}this.aa!=null?(r.aa=this.aa.Ja(),this.aa.copyTo(r.aa)):r.aa=null,r.xa=this.xa,r.Jm=this.Jm,r.Aa=l;try{this.qp(r)}catch{throw r.Pa(),u.i.hu()}},o.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},o.prototype.Qc=function(r){r==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=r,this.gM(),this.wc()},o.prototype.yu=function(r){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new u.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(r);for(var n=1;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=u.sa.Wa(l),p=this.Aa[n],f=0;f<c;f++){var g=new u.Oc;g.Pa();for(var b=0;b<this.xa;b++){var x=p.gg(b*c+f);g.$b(x)}this.aa.setInterval(l,f,g)}r&&this.Nf(192,!1)}},o.prototype.dy=function(){this.aa.Pa();for(var r=this.Aa[0],n=new u.h,l=0;l<this.xa;l++)r.uc(2*l,n),this.aa.$b(n)},o.prototype.Ap=function(r){r.Pa();for(var n=this.Aa[0],l=new u.h,c=0;c<this.xa;c++)n.uc(2*c,l),r.$b(l)},o.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=u.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var r=0;r<this.description.Ba;r++){var n=this.description.Fd(r);if(this.Aa[r]!=null){var l=u.sa.Wa(n),c=u.P.truncate(this.Aa[r].size/l);c<this.xa&&(c=u.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[r].resize(c*l,u.sa.te(n))),c<this.Rg&&(this.Rg=c)}else this.Aa[r]=u.Zc.TE(n,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},o.prototype.fm=function(r){if(0>r)throw u.i.O();r!=this.xa&&(this.xa=r,this.Qc(65535))},o.prototype.qm=function(r){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=r)return this.ck(8)?1:2}return-1},o.prototype.Eh=function(r,n){if(this.LT=n,r==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),r==0)this.Nf(2,!1),this.Nf(4,!1);else if(r==1)this.Nf(2,!0),this.Nf(4,!1);else{if(r!=2)throw u.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},o.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},o.prototype.fD=function(r,n,l,c){if(0>r||r>=this.xa||0>n||n>=this.xa)throw u.i.ga("index out of bounds");this.oc(),c.Pf(this.description),c.B()&&c.wn();for(var p=0;p<this.description.Ba;p++)for(var f=this.description.Fd(p),g=0,b=u.sa.Wa(f);g<b;g++){var x=this.Aa[p].gg(b*r+g),$=this.Aa[p].gg(b*n+g);c.setAttribute(f,g,u.mc.jq(x,$,l))}},o.prototype.Ar=function(r,n){var l=this.Aa[0].o,c=l[2*r]-l[2*n];return r=l[2*r+1]-l[2*n+1],Math.sqrt(c*c+r*r)},o.prototype.FR=function(r){if(0>r||r>=this.xa)throw u.i.de();this.oc();var n=new u.Ta;n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.ld(l),p=0,f=u.sa.Wa(c);p<f;p++){var g=this.Aa[l].gg(f*r+p);n.setAttribute(c,p,g)}return n},o.prototype.Fh=function(r,n){if(0>r||r>=this.xa)throw u.i.de();if(n.B())throw u.i.O();this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var p=l.ld(c),f=u.sa.Wa(p),g=0;g<f;g++){var b=n.Vc(p,g);this.setAttribute(p,r,g,b)}},o.prototype.nu=function(){return null},o.prototype.hj=function(){return null},o}(u.ba);u.Fx=v}(q||(q={})),function(u){var k=function(){function v(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new u.ad(7),this.ao=null}return v.prototype.Xo=function(h){this.ao=h},v.prototype.MP=function(){this.Tv=!1},v.prototype.Ee=function(h){this.ob.Ee(h)},v.prototype.Rr=function(h){var o=this.ob.De();return this.nX(o),this.qX(h,o),o},v.prototype.HP=function(h){this.ob.kd(h)},v.prototype.addElement=function(h,o){return o==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),o=this.Ne),this.AD(h,0,o)},v.prototype.ED=function(h){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(h,1,this.Ne)},v.prototype.zn=function(h){this.Ne==-1&&(this.Ne=this.Rr(-1));var o=this.Ne,r=this.ob.o;if(o==-1||r[7*o]==-1)return h=this.ob.Nl([-1,-1,-1,h,this.il(),-1,-1]),(r=this.ob.o)[7*o]=h,this.xp(-1,h,o,r),h;var n=o==-1?-1:r[7*o+2];return h=this.ob.Nl([-1,-1,n,h,this.il(),-1,-1]),(r=this.ob.o)[7*n+1]=h,this.ky(h,r),r[7*h+2]===-1&&(r[7*o]=h),this.xp(-1,h,o,r),h},v.prototype.Bu=function(h,o,r,n){var l=-1;l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne);var c=this.ob.o;if(l==-1||c[7*l]==-1)return r=this.ob.Nl([-1,-1,-1,r,this.il(),-1,-1]),(c=this.ob.o)[7*l]=r,this.xp(-1,r,l,c),r;if(n){n=o!=-1?this.ao.compare(this,r,o):-1;var p=h!=-1?this.ao.compare(this,r,h):1}else n=-1,p=1;if(n==0||p==0)return c[7*l+3]=n==0?o:h,-1;for((o!=-1&&h!=-1?this.Vm>u.P.XA(this.Vm)>>1:o!=-1)?h=o:n=p,o=!0;;){if(0>n){if((p=c[7*h])==-1){n=h,r=this.ob.Nl([-1,-1,h,r,this.il(),-1,-1]),(c=this.ob.o)[7*h]=r;break}h=p}else{if((p=c[7*h+1])==-1){n=c[7*h+6],r=this.ob.Nl([-1,-1,h,r,this.il(),-1,-1]),(c=this.ob.o)[7*h+1]=r;break}h=p}o&&(n*=-1,o=!1)}return this.ky(r,c),c[7*r+2]===-1&&(c[7*l]=r),this.xp(n,r,l,c),r},v.prototype.AF=function(){return this.dR(this.Ne)},v.prototype.wd=function(h,o){o=o==-1?this.Ne:o,this.Tv?this.GP(h,o):this.eY(h,o)},v.prototype.search=function(h,o){for(o=this.uv(o);o!=-1;){var r=this.ao.compare(this,h,o);if(r==0)return o;o=0>r?this.nl(o):this.Zp(o)}return-1},v.prototype.DW=function(h){for(var o=this.uv(-1),r=-1;o!=-1;){var n=h.compare(this,o);if(n==0)return o;0>n?o=this.nl(o):(r=o,o=this.Zp(o))}return r},v.prototype.pJ=function(h){for(var o=this.uv(-1),r=-1;o!=-1;){var n=h.compare(this,o);if(n==0)return o;0>n?(r=o,o=this.nl(o)):o=this.Zp(o)}return r},v.prototype.ka=function(h){return this.ob.U(h,3)},v.prototype.nl=function(h){return this.ob.U(h,0)},v.prototype.Zp=function(h){return this.ob.U(h,1)},v.prototype.getParent=function(h){return this.ob.U(h,2)},v.prototype.lb=function(h){return this.ob.U(h,6)},v.prototype.xe=function(h){return this.ob.U(h,5)},v.prototype.sc=function(h){return h==-1?this.ml(this.Ne):this.ml(h)},v.prototype.Gc=function(h){return h==-1?this.bs(this.Ne):this.bs(h)},v.prototype.UR=function(h){return h==-1?this.XF(this.Ne):this.XF(h)},v.prototype.Uj=function(h,o){this.IB(h,o)},v.prototype.uv=function(h){return h==-1?this.TF(this.Ne):this.TF(h)},v.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},v.prototype.size=function(h){return h==-1?this.VF(this.Ne):this.VF(h)},v.prototype.FN=function(h,o){for(var r=o[7*h],n=o[7*h+1],l=o[7*h+4];r!=-1||n!=-1;){var c=r!=-1?o[7*r+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,l<=Math.min(c,n))break;c<=n?this.nJ(r,o):this.mJ(h,o),r=o[7*h],n=o[7*h+1]}},v.prototype.ky=function(h,o){if(this.Tv)for(var r=o[7*h+4],n=o[7*h+2];n!=-1&&o[7*n+4]>r;)o[7*n]==h?this.nJ(h,o):this.mJ(n,o),n=o[7*h+2]},v.prototype.mJ=function(h,o){var r=o[7*h+1];o[7*r+2]=o[7*h+2],o[7*h+2]=r;var n=o[7*r];o[7*h+1]=n,n!=-1&&(o[7*n+2]=h),o[7*r]=h,(n=o[7*r+2])!=-1&&(o[7*n]==h?o[7*n]=r:o[7*n+1]=r)},v.prototype.nJ=function(h,o){var r=o[7*h+2];o[7*h+2]=o[7*r+2],o[7*r+2]=h;var n=o[7*h+1];o[7*r]=n,n!=-1&&(o[7*n+2]=r),o[7*h+1]=r,(n=o[7*h+2])!=-1&&(o[7*n]===r?o[7*n]=h:o[7*n+1]=h)},v.prototype.Rk=function(h,o){this.ob.T(h,2,o)},v.prototype.OB=function(h,o){this.ob.T(h,0,o)},v.prototype.SB=function(h,o){this.ob.T(h,1,o)},v.prototype.RB=function(h,o){this.ob.T(h,5,o)},v.prototype.fx=function(h,o){this.ob.T(h,6,o)},v.prototype.SJ=function(h,o){this.ob.T(o,0,h)},v.prototype.nX=function(h){this.ob.T(h,4,0)},v.prototype.qX=function(h,o){this.ob.T(o,5,h)},v.prototype.TF=function(h){return h==-1?-1:this.ob.U(h,0)},v.prototype.ml=function(h){return h==-1?-1:this.ob.U(h,1)},v.prototype.bs=function(h){return h==-1?-1:this.ob.U(h,2)},v.prototype.dR=function(h){return h==-1?-1:this.ob.U(h,3)},v.prototype.VF=function(h){return h==-1?0:this.ob.U(h,4)},v.prototype.XF=function(h){return this.ob.U(h,5)},v.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},v.prototype.hl=function(h){h!=-1&&this.ob.kd(h)},v.prototype.il=function(){return this.Vm=u.P.XA(this.Vm),1073741823&this.Vm},v.prototype.AD=function(h,o,r){var n=this.ob.o;if(r==-1||n[7*r]==-1)return h=this.ob.Nl([-1,-1,-1,h,this.il(),-1,-1]),(n=this.ob.o)[7*r]=h,this.xp(-1,h,r,n),h;for(var l=r==-1?-1:n[7*r];;){var c=o==-1?1:this.ao.compare(this,h,l);if(0>c){if((c=this.nl(l))==-1){o=l,h=this.ob.Nl([-1,-1,l,h,this.il(),-1,-1]),(n=this.ob.o)[7*l]=h;break}l=c}else{if(o==1&&c==0)return n[7*r+3]=l,-1;if((c=n[7*l+1])==-1){o=n[7*l+6],h=this.ob.Nl([-1,-1,l,h,this.il(),-1,-1]),(n=this.ob.o)[7*l+1]=h;break}l=c}}return this.ky(h,n),n[7*h+2]===-1&&(n[7*r]=h),this.xp(o,h,r,n),h},v.prototype.xp=function(h,o,r,n){if(h!=-1){var l=n[7*h+5];n[7*h+5]=o}else l=r==-1?-1:n[7*r+2];n[7*o+5]=l,l!=-1&&(n[7*l+6]=o),n[7*o+6]=h,h==(r==-1?-1:n[7*r+1])&&(n[7*r+1]=o),h==-1&&(n[7*r+2]=o),n[7*r+4]=(r==-1?0:n[7*r+4])+1},v.prototype.vB=function(h,o){var r=this.ob.o,n=r[7*h+5];h=r[7*h+6],n!=-1?r[7*n+6]=h:r[7*o+1]=h,h!=-1?r[7*h+5]=n:r[7*o+2]=n,r[7*o+4]=o===-1?-1:r[7*o+4]-1},v.prototype.eY=function(h,o){this.vB(h,o);var r=this.nl(h),n=this.Zp(h),l=this.getParent(h),c=h;if(r!=-1&&n!=-1){this.Vm=u.P.XA(this.Vm);var p=1073741823<this.Vm?this.lb(h):this.xe(h),f=this.getParent(p)==h;this.ob.bC(h,p,0),this.ob.bC(h,p,1),this.ob.bC(h,p,2),l!=-1?this.nl(l)==h?this.OB(l,p):this.SB(l,p):this.SJ(p,o),f?(r==p?(this.OB(p,h),this.Rk(n,p)):n==p&&(this.SB(p,h),this.Rk(r,p)),this.Rk(h,p),l=p):(this.Rk(r,p),this.Rk(n,p),l=this.getParent(h),c=p),r=this.nl(h),n=this.Zp(h),r!=-1&&this.Rk(r,h),n!=-1&&this.Rk(n,h)}r=r!=-1?r:n,l==-1?this.SJ(r,o):this.nl(l)==c?this.OB(l,r):this.SB(l,r),r!=-1&&this.Rk(r,l),this.hl(h)},v.prototype.GP=function(h,o){var r=this.ob.o;r[7*h+4]=2147483647;var n=-1,l=-1,c=o===-1?-1:r[7*o],p=c==h;if(p&&(n=r[7*c],l=r[7*c+1],n==-1&&l==-1))return this.vB(c,o),this.hl(c),void(r[7*o]=-1);this.FN(h,r),(c=r[7*h+2])!=-1&&(r[7*c]==h?r[7*c]=-1:r[7*c+1]=-1),this.vB(h,o),this.hl(h),p&&(r[7*o]=n==-1||r[7*n+2]!=-1?l:n)},v.prototype.IB=function(h,o){this.ob.T(h,3,o)},v}();u.$j=k}(q||(q={})),function(u){var k=function(){function v(h,o){h!==void 0&&this.L(h,o)}return v.prototype.L=function(h,o){this.pa=h,this.wa=o,this.normalize()},v.prototype.isIntersecting=function(h){return this.pa<=h.pa?this.wa>=h.pa:h.wa>=this.pa},v.prototype.move=function(h){this.B()||(this.pa+=h,this.wa+=h)},v.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var h=this.pa;this.pa=this.wa,this.wa=h}isNaN(this.wa)&&this.Pa()}},v.prototype.Pa=function(){this.wa=this.pa=NaN},v.prototype.B=function(){return isNaN(this.pa)},v.prototype.$b=function(h){typeof h=="number"?this.B()?this.wa=this.pa=h:this.Nk(h):h.B()||(this.B()?(this.pa=h.pa,this.wa=h.wa):(this.pa>h.pa&&(this.pa=h.pa),this.wa<h.wa&&(this.wa=h.wa),this.pa>this.wa&&this.Pa()))},v.prototype.Nk=function(h){h<this.pa?this.pa=h:h>this.wa&&(this.wa=h)},v.prototype.contains=function(h){return typeof h=="number"?h>=this.pa&&h<=this.wa:h.pa>=this.pa&&h.wa<=this.wa},v.prototype.Fa=function(h){this.B()||h.B()?this.Pa():(this.pa<h.pa&&(this.pa=h.pa),this.wa>h.wa&&(this.wa=h.wa),this.pa>this.wa&&this.Pa())},v.prototype.X=function(h){this.B()||(this.pa-=h,this.wa+=h,this.wa<this.pa&&this.Pa())},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},v.prototype.FB=function(h,o){h>o?(this.pa=o,this.wa=h):(this.pa=h,this.wa=o)},v.prototype.Kt=function(h){return u.P.Tk(h,this.pa,this.wa)},v.prototype.S=function(){return this.wa-this.pa},v.prototype.tf=function(){return .5*(this.pa+this.wa)},v.prototype.Nb=function(h){return h==this||h instanceof v&&(!(!this.B()||!h.B())||this.pa==h.pa&&this.wa==h.wa)},v.prototype.dc=function(){return u.P.wj(u.P.wj())},v}();u.Oc=k}(q||(q={})),function(u){var k=new u.Oc,v=new u.Oc,h=function(){this.oe=null,this.pb=-1,this.tb=new u.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new u.Oc,this.Wf.FB(0,0)};u.EY=h;var o=function(){function r(n,l,c){this.g=n,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=l,this.Pq=10*l,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=c,this.OA=new h,this.TH=new h,u.P.truncate(3*n.gd/2)}return r.prototype.hG=function(n,l,c,p){n.oe=p===null?null:p[c[5*l]],n.Vv=n.oe!=null,n.Vv||((p=c[5*l+2])!==-1&&this.g.hW(c[5*l],c[5*p],n.tb),n.oe=n.tb,n.Wf.FB(n.tb.ta,n.tb.qa),n.Wf.wa+=this.ra,n.tb.mI(),n.Xv=n.tb.ma==n.tb.oa,n.Xv||(n.lA=(n.tb.qa-n.tb.ta)/(n.tb.ma-n.tb.oa)))},r.prototype.JO=function(n,l){var c=n.Br(l,this.ra,!0);return c!=0?c==2?this.Ly():this.zi():(n.$p(ks),n.Vr($n),l.$p(Os),l.Vr(Tn),ni.na(this.Mq,this.Jk),ks.rb(Os)&&this.Jk==ks.y?0>$n.compare(Tn)?ni.N($n):ni.N(Tn):ks.rb(Tn)&&this.Jk==ks.y?0>$n.compare(Os)?ni.N($n):ni.N(Os):Os.rb($n)&&this.Jk==Os.y?0>ks.compare(Tn)?ni.N(ks):ni.N(Tn):$n.rb(Tn)&&this.Jk==$n.y&&(0>ks.compare(Os)?ni.N(ks):ni.N(Os)),n.Me(ni.y,ni.x)<l.Me(ni.y,ni.x)?-1:1)},r.prototype.HO=function(n,l){if(n.tb.oa==l.tb.oa&&n.tb.ta==l.tb.ta)return n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa?this.bA?this.Ly():0:this.KE(n,l);if(n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa)return this.JE(n,l);var c=this.JE(n,l);return n=this.KE(n,l),0>c&&0>n?-1:0<c&&0<n?1:this.zi()},r.prototype.DO=function(n,l){if(n.qa>l.qa){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.qa-n.ta)<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 1},r.prototype.EO=function(n,l){if(n.ta<l.ta){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.ta-n.qa)<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi();return-1},r.prototype.FO=function(n,l){var c=new u.h;c.vc(l.xc(),l.bc()),c.cr(),c.normalize();var p=new u.h;p.vc(n.bc(),l.bc());var f=new u.h;f.vc(n.xc(),l.bc()),p=p.Sh(c),c=f.Sh(c),f=Math.abs(p);var g=Math.abs(c);if(f<g){if(f<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi()}else if(g<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 0>p&&0>c?-1:0<p&&0<c?1:this.zi()},r.prototype.IE=function(n,l){return n.oa==l.oa&&n.ta==l.ta?this.DO(n,l):n.ma==l.ma&&n.qa==l.qa?this.EO(n,l):this.FO(n,l)},r.prototype.GO=function(n,l){return n.ma==l.ma&&n.qa==l.qa&&n.oa==l.oa&&n.ta==l.ta?this.bA?this.Ly():0:this.zi()},r.prototype.JE=function(n,l){var c=1;if(n.tb.oa<l.tb.oa){c=-1;var p=n;n=l,l=p}n=n.tb,p=l.tb;var f=n.ta-p.ta;l=l.lA*(n.oa-p.oa);var g=this.Pq;return f<l-g?-c:f>l+g?c:p.xi(n.ta,n.oa,this.ra)?this.zi():f<l?-c:c},r.prototype.KE=function(n,l){var c=1;if(l.tb.ma<n.tb.ma){c=-1;var p=n;n=l,l=p}n=n.tb,p=l.tb;var f=n.qa-p.ta;l=l.lA*(n.ma-p.oa);var g=this.Pq;return f<l-g?-c:f>l+g?c:p.xi(n.qa,n.ma,this.ra)?this.zi():f<l?-c:c},r.prototype.Ly=function(){return this.sg=!0,this.Pi=new u.Nd(5,this.No,this.ht),-1},r.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new u.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},r.prototype.IO=function(n,l,c,p){if(this.sg)return-1;var f=this.JH==this.Jk&&this.IH==this.Mq;if(f&&n==this.Ys)var g=this.KH;else g=NaN,this.Ys=-1;return f&&l==this.Zs?f=this.LH:(f=NaN,this.Zs=-1),c.oe.UI(k),p.oe.UI(v),k.wa<v.pa?-1:v.wa<k.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(g)&&(this.Ys=n,this.KH=g=n=c.oe.Me(this.Jk,this.Mq)),isNaN(f)&&(this.Zs=l,this.LH=f=n=p.oe.Me(this.Jk,this.Mq)),Math.abs(g-f)<=this.ra?this.JO(c.oe,p.oe):g<f?-1:g>f?1:0)},r.prototype.Mr=function(){this.sg=!1},r.prototype.tm=function(){return this.Pi},r.prototype.VJ=function(n,l){this.Jk=n,this.Mq=l,this.ht=this.No=this.Zs=this.Ys=-1},r.prototype.compare=function(n,l,c){return this.sg?-1:(n=n.ka(c),this.Fm=c,this.ME(l,l,n,n))},r.prototype.ME=function(n,l,c,p){if(this.No==l)var f=this.OA;else this.No=l,f=this.OA,this.OA.pb=n,this.hG(f,l,this.g.ud.o,this.g.Te);if(g==null){this.ht=p;var g=this.TH;this.TH.pb=c,this.hG(g,p,this.g.ud.o,this.g.Te)}return f.Vv||g.Vv?this.IO(l,p,f,g):f.Wf.wa<g.Wf.pa?-1:g.Wf.wa<f.Wf.pa?1:(n=f.Xv?1:0,(n|=g.Xv?2:0)==0?this.HO(f,g):n==1?this.IE(f.tb,g.tb):n==2?-1*this.IE(g.tb,f.tb):this.GO(f.tb,g.tb))},r}();u.PC=o}(q||(q={})),function(u){var k=function(){function v(h,o){this.g=h,this.ra=o,this.sg=!1,this.No=-1,this.Wf=new u.Oc,this.Iq=new u.h,this.Iq.Sc(),this.je=new u.zb,this.Fm=-1,this.wA=17976931348623157e292}return v.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},v.prototype.Fh=function(h){this.Iq.N(h)},v.prototype.compare=function(h,o){return this.NE(o,h.ka(o))},v.prototype.NE=function(h,o){var r=this.g.cc(o)!=null;if(r||(this.g.fd(o,this.je),this.Wf.FB(this.je.ta,this.je.qa)),r)throw u.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=h,this.sg=!0,0;this.je.mI(),r=this.je.bc(),(o=new u.h).vc(this.je.xc(),r),o.cr();var n=new u.h;return n.vc(this.Iq,r),r=o.Sh(n),(r/=o.length())<10*-this.ra?-1:r>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((o=Math.abs(r))<this.wA&&(this.Fm=h,this.wA=o),this.sg=!0,o<.25*this.ra)?0:0>r?-1:1},v}();u.WL=k}(q||(q={})),function(u){function k(h,o,r,n){r=new Float64Array(h.subarray(r,n)),h.set(r,o)}var v=function(){function h(o){this.Pb=this.rk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Float64Array(r),this.size=o}return h.prototype.rotate=function(o,r,n){if(this.Pb)throw u.i.ga("invalid_call");if(r<o||r>n||o>n)throw u.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},h.rf=function(o,r){var n=new h(o),l=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)l[c]=r;return n},h.Dn=function(o){var r=new h(0);return r.o=new Float64Array(o.o),r.size=o.size,r},h.Nr=function(o,r){var n=new h(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Float64Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},h.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},h.prototype.read=function(o){return this.o[o]},h.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},h.prototype.get=function(o){return this.o[o]},h.prototype.write=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r},h.prototype.set=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r},h.prototype.Vt=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},h.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},h.prototype.BB=function(o){return h.Nr(this,o)},h.prototype.gg=function(o){return this.read(o)},h.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.rk)throw u.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=u.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=r}this.size=o},h.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw u.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},h.prototype.rr=function(o,r){this.write(o,r)},h.prototype.Cn=function(o,r,n){for(var l=this.size;r<l&&r<n;r++)o=u.P.wj(this.read(r));return o},h.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof h))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},h.prototype.addRange=function(o,r,n,l,c){if(this.Pb)throw u.i.Hb();if(!l&&(1>c||n%c!=0))throw u.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(r,r+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[p+f+g]=o.o[r+l+g]}}},h.prototype.On=function(o,r,n,l,c,p,f){if(this.Pb)throw u.i.Hb();if(!c&&(1>p||l%p!=0))throw u.i.O();var g=this.size-f;if(g<l&&this.resize(this.size+l-g),k(this.o,o+l,o,o+(f-o)),this.o==r.o&&o<n&&(n+=l),c)this.o.set(r.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p)for(c-=p,g=0;g<p;g++)this.o[o+f+g]=r.o[n+c+g]},h.prototype.Dz=function(o,r,n,l,c,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},h.prototype.Nn=function(o,r,n,l){if(this.Pb)throw u.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=r},h.prototype.xj=function(o,r,n){if(this.Pb)throw u.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},h.prototype.Wt=function(o,r,n,l,c,p){if(0>o||0>r||0>l||!c&&(0>=p||r%p!=0)||n.size<l+r)throw u.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,l,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,r=u.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},h.prototype.Gn=function(o,r,n){if(this.Pb||o+r>this.size)throw u.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},h.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw u.i.Hb();for(var l=r>>1,c=0;c<l;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},h.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw u.i.O();for(var l=r;l<r+n;l++)this.o[l]=o},h.prototype.Cr=function(o,r,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+r),o),l)))for(n=o,o=o+r-c,l=0,r=u.P.truncate(r/2);l<r;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},h.prototype.qC=function(o,r,n,l,c){if(0>o||0>r||0>l)throw u.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=l;l<r;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},h.prototype.pC=function(o,r,n){if(0>o||0>r)throw u.i.O();if(r!=0){this.size<(r<<1)+o&&this.resize((r<<1)+o),r+=0;for(var l=0;l<r;l++)this.o[o]=n[l][0],this.o[o+1]=n[l][1],o+=2}},h.prototype.Xw=function(o,r,n,l,c){if(0>o||0>r||0>l||this.size<r+o)throw u.i.O();if(c)for(c=0;c<r;c++)n[l+c]=this.o[o+c];else for(l=l+r-1;o<r;o++)n[l]=this.o[o],l--},h.prototype.pB=function(o,r,n){if(0>o||0>r||this.size<(r>>1)+o)throw u.i.O();if(r!=0){r=0+r;for(var l=0;l<r;l++)n[l][0]=this.o[o],n[l][1]=this.o[o+1],o+=2}},h.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(o,r,n){Array.prototype.sort.call(this.o.subarray(o,r),n)},h.prototype.Vp=function(){return 1},h}();u.ce=v}(q||(q={})),function(u){function k(h,o,r,n){r=new Int32Array(h.subarray(r,n)),h.set(r,o)}u.nY=function(){this.random=1973};var v=function(){function h(o){this.Pb=this.rk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Int32Array(r),this.size=o}return h.prototype.rotate=function(o,r,n){if(this.Pb)throw u.i.ga("invalid_call");if(r<o||r>n||o>n)throw u.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},h.rf=function(o,r){var n=new h(o),l=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)l[c]=r;return n},h.Dn=function(o){var r=new h(0);return r.o=new Int32Array(o.o),r.size=o.size,r},h.Nr=function(o,r){var n=new h(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int32Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},h.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},h.prototype.read=function(o){return this.o[o]},h.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},h.prototype.get=function(o){return this.o[o]},h.prototype.write=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r},h.prototype.set=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r},h.prototype.Vt=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},h.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},h.prototype.BB=function(o){return h.Nr(this,o)},h.prototype.gg=function(o){return this.read(o)},h.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.rk)throw u.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=u.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=r}this.size=o},h.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw u.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},h.prototype.rr=function(o,r){this.write(o,r)},h.prototype.Cn=function(o,r,n){for(var l=this.size;r<l&&r<n;r++)o=u.P.Vh(this.read(r),o);return o},h.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof h))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},h.prototype.addRange=function(o,r,n,l,c){if(this.Pb)throw u.i.Hb();if(!l&&(1>c||n%c!=0))throw u.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(r,r+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[p+f+g]=o.o[r+l+g]}}},h.prototype.On=function(o,r,n,l,c,p,f){if(this.Pb)throw u.i.Hb();if(!c&&(1>p||l%p!=0))throw u.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==r.o&&o<n&&(n+=l),c)this.o.set(r.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p){c-=p;for(var g=0;g<p;g++)this.o[o+f+g]=r.o[n+c+g]}},h.prototype.Dz=function(o,r,n,l,c,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},h.prototype.Nn=function(o,r,n,l){if(this.Pb)throw u.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=r},h.prototype.xj=function(o,r,n){if(this.Pb)throw u.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},h.prototype.Wt=function(o,r,n,l,c,p){if(0>o||0>r||0>l||!c&&(0>=p||r%p!=0)||n.size<l+r)throw u.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,l,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,r=u.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},h.prototype.Gn=function(o,r,n){if(this.Pb||o+r>this.size)throw u.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},h.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw u.i.Hb();for(var l=r>>1,c=0;c<l;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},h.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw u.i.O();for(var l=r;l<r+n;l++)this.o[l]=o},h.prototype.Cr=function(o,r,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+r),o),l)))for(n=o,o=o+r-c,l=0,r=u.P.truncate(r/2);l<r;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},h.prototype.qC=function(o,r,n,l,c){if(0>o||0>r||0>l)throw u.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=l;l<r;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},h.prototype.Xw=function(o,r,n,l,c){if(0>o||0>r||0>l||this.size<r+o)throw u.i.O();if(c)for(c=0;c<r;c++)n[l+c]=this.o[o+c];else for(l=l+r-1;o<r;o++)n[l]=this.o[o],l--},h.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(o,r,n){10>r-o?h.mG(this.o,o,r,n):h.lB(this.o,o,r-1,n)},h.prototype.Vp=function(){return 2},h.prototype.Gc=function(){return this.o[this.size-1]},h.prototype.Jf=function(){this.resize(this.size-1)},h.prototype.XW=function(o){this.o[this.size-1]=o},h.prototype.NV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},h.prototype.gF=function(o){for(var r=0,n=this.size;r<n;r++)if(this.o[r]==o)return r;return-1},h.prototype.cG=function(o){return 0<=this.gF(o)},h.mG=function(o,r,n,l){for(var c=r;c<n;c++){for(var p=o[c],f=c-1;f>=r&&0<l(o[f],p);)o[f+1]=o[f],f--;o[f+1]=p}},h.sx=function(o,r,n){var l=o[n];o[n]=o[r],o[r]=l},h.lB=function(o,r,n,l){if(!(r>=n))for(;;){if(9>n-r){h.mG(o,r,n+1,l);break}var c=o[r];h.sx(o,r,n);for(var p=r,f=r;f<n;f++)0>=l(o[f],c)&&(h.sx(o,p,f),p+=1);h.sx(o,p,n),p-r<n-p?(h.lB(o,r,p-1,l),r=p+1):(h.lB(o,p+1,n,l),n=p-1)}},h}();u.ja=v}(q||(q={})),function(u){function k(h,o,r,n){r=new Int8Array(h.subarray(r,n)),h.set(r,o)}var v=function(){function h(o){this.o=null;var r=o;2>r&&(r=2),this.o=new Int8Array(r),this.size=o}return h.prototype.rotate=function(o,r,n){if(this.Pb)throw u.i.ga("invalid_call");if(r<o||r>n||o>n)throw u.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},h.rf=function(o,r){var n=new h(o),l=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)l[c]=r;return n},h.Dn=function(o){var r=new h(0);return r.o=new Int8Array(o.o),r.size=o.size,r},h.Nr=function(o,r){var n=new h(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int8Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},h.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},h.prototype.read=function(o){return this.o[o]},h.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},h.prototype.get=function(o){return this.o[o]},h.prototype.write=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r},h.prototype.set=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r},h.prototype.Vt=function(o,r){if(this.Pb)throw u.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},h.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},h.prototype.BB=function(o){return h.Nr(this,o)},h.prototype.gg=function(o){return this.read(o)},h.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.rk)throw u.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=u.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=r}this.size=o},h.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw u.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},h.prototype.rr=function(o,r){this.write(o,r)},h.prototype.Cn=function(o,r,n){for(var l=this.size;r<l&&r<n;r++)o=u.P.Vh(this.read(r),o);return o},h.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof h))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},h.prototype.addRange=function(o,r,n,l,c){if(this.Pb)throw u.i.Hb();if(!l&&(1>c||n%c!=0))throw u.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(r,r+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[p+f+g]=o.o[r+l+g]}}},h.prototype.On=function(o,r,n,l,c,p,f){if(this.Pb)throw u.i.Hb();if(!c&&(1>p||l%p!=0))throw u.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==r.o&&o<n&&(n+=l),c)this.o.set(r.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p){c-=p;for(var g=0;g<p;g++)this.o[o+f+g]=r.o[n+c+g]}},h.prototype.Nn=function(o,r,n,l){if(this.Pb)throw u.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=r},h.prototype.Dz=function(o,r,n,l,c,p){if(this.Pb)throw u.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},h.prototype.xj=function(o,r,n){if(this.Pb)throw u.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},h.prototype.Wt=function(o,r,n,l,c,p){if(0>o||0>r||0>l||!c&&(0>=p||r%p!=0)||n.size<l+r)throw u.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,l,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,r=u.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},h.prototype.Gn=function(o,r,n){if(this.Pb||o+r>this.size)throw u.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},h.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw u.i.Hb();for(var l=r>>1,c=0;c<l;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},h.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw u.i.O();for(var l=r;l<r+n;l++)this.o[l]=o},h.prototype.Cr=function(o,r,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+r),o),l)))for(n=o,o=o+r-c,l=0,r=u.P.truncate(r/2);l<r;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},h.prototype.qC=function(o,r,n,l,c){if(0>o||0>r||0>l)throw u.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=l;l<r;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},h.prototype.Xw=function(o,r,n,l,c){if(0>o||0>r||0>l||this.size<r+o)throw u.i.O();if(c)for(c=0;c<r;c++)n[l+c]=this.o[o+c];else for(l=l+r-1;o<r;o++)n[l]=this.o[o],l--},h.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(o,r,n){r=this.o.subarray(o,r),Array.prototype.sort.call(r,n),this.o.set(r,o)},h.prototype.uJ=function(o,r){if(this.Pb)throw u.i.ga("invalid call. Attribute Stream is read only.");this.o[o]|=r},h.prototype.FE=function(o,r){if(this.Pb)throw u.i.ga("invalid call. Attribute Stream is read only.");this.o[o]&=~r},h.prototype.Vp=function(){return 1},h}();u.rn=v}(q||(q={})),function(u){u.Zc=function(){function k(){}return k.Or=function(v,h){return u.rn.rf(v,h)},k.Fn=function(v,h){return u.ce.rf(v,h)},k.kP=function(v,h,o){switch(v){case 1:v=u.ce.rf(h,o);break;case 2:v=u.ja.rf(h,o);break;case 4:v=u.rn.rf(h,o);break;default:throw u.i.Ra()}return v},k.TE=function(v,h){return k.kP(u.sa.Vp(v),h*u.sa.Wa(v),u.sa.te(v))},k.Qh=function(v,h){return u.ja.rf(v,h)},k.lI=function(v){var h,o=[];for(h=0;h<v;h++)o.push(null);return o},k}()}(q||(q={})),function(u){u.ha=function(k){k===void 0&&(k=0),this.u=k}}(q||(q={})),function(u){u.IL=function(){function k(){}return k.bind=function(v){u.Tc=v.PeDefs,u.qf=v.PeFactory,u.IC=v.PeVertcs,u.gj=v.PeCSTransformations,u.HC=v.PeGTTransformations,u.GL=v.PeGeogtran,u.FL=v.PeFactoryCodechange,u.GC=v.PeGCSExtent,u.Eg=v.PePCSInfo,u.HL=v.PeHorizon,u.EL=v.PeCoordsys,u.np=v.PeGTlistExtended,u.np.PE_GTLIST_OPTS_USE_DEFAULT=128,u.qf.initialize(null),u.Lx=v.PeGTlistExtendedEntry,u.qf.fromString(u.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},k}(),u.qf=null,u.IC=null,u.EL=null,u.HL=null,u.Eg=null,u.np=null,u.Lx=null,u.GC=null,u.FL=null,u.GL=null,u.Tc=null,u.HC=null,u.gj=null}(q||(q={})),function(u){var k=function(){function v(){}return v.Mb=function(h,o){return 0<=o?v.R(h):-v.R(h)},v.R=function(h){return 0>h?-h:h},v.vi=function(h){return 3552713678800501e-30>h},v.FC=function(h,o,r){return v.R(h-o)<=r*(1+(v.R(h)+v.R(o))/2)},v.$=function(h,o){return v.FC(h,o,3552713678800501e-30)},v.AL=function(h){return 3552713678800501e-30>=v.R(h)},v.Dd=function(h){return v.AL(h)},v}();u.s=k,u.F=function(){function v(){}return v.ip=function(h,o){var r=0;return(h=k.R(h))+(o=k.R(o))!=0&&(h>o?(r=o/h,r=h*Math.sqrt(1+r*r)):(r=h/o,r=o*Math.sqrt(1+r*r))),r},v.Yq=function(h,o,r,n,l){for(var c=[0,0,0],p=[0,0,0],f=0;2>=f;f++)o[f]-=h[f],r[f]-=o[f];r=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],h=-1*(r*h[0]+o*h[1]+c*h[2]),n[0]=r,n[1]=o,n[2]=c,n[3]=h,p=v.qn(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,l!=0&&(p=k.Dd(c)?k.Dd(h)?k.Mb(1,o):-k.Mb(1,h):k.Mb(1,c),p*=k.Mb(1,l),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},v.yx=function(h,o,r){r[0]=h[1]*o[2]-o[1]*h[2],r[1]=h[2]*o[0]-o[2]*h[0],r[2]=h[0]*o[1]-o[0]*h[1]},v.Ut=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]},v.qn=function(h){return v.ip(v.ip(h[0],h[1]),h[2])},v.el=function(h,o,r,n,l,c,p,f){h=v.n(h,o,r);var g=Math.cos(r);c.u=(h+l)*g*Math.cos(n),p.u=(h+l)*g*Math.sin(n),f.u=(h*(1-o)+l)*Math.sin(r)},v.eO=function(h,o,r,n,l,c,p){var f=v.ip(o,r),g=1*Math.sqrt(1-h),b=g/1;if(k.$(f,0))c.u=0,l.u=k.Mb(1.570796326794897,n),p.u=k.R(n)-g;else{c.u=Math.atan2(r,o),r=Math.atan2(1*n,g*f),c=Math.cos(r);var x=Math.sin(r);o=g*h/(1-h),h*=1,r=Math.atan2(n+o*x*x*x,f-h*c*c*c),3.141592653589793<k.R(r)&&(r=k.Mb(3.141592653589793,r)-r),r=Math.atan(b*Math.tan(r)),x=Math.sin(r),c=Math.cos(r),l.u=Math.atan2(n+o*x*x*x,f-h*c*c*c),1.570796326794897<k.R(l.u)&&(l.u=k.Mb(3.141592653589793,l.u)-l.u),r=Math.atan(b*Math.tan(l.u)),x=Math.sin(r),c=Math.cos(r),p.u=(n-g*x)*Math.sin(l.u)+(f-1*c)*Math.cos(l.u)}},v.n=function(h,o,r){return r=Math.sin(r),h/Math.sqrt(1-o*r*r)},v.pt=function(h,o){return Math.atan2(Math.sin(o)*(1-h),Math.cos(o))},v.Sj=function(h,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-h))},v.Tq=function(h,o){if(k.vi(h)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>h){var r=Math.sqrt(1-h),n=(1-r)/(1+r),l=n*n,c=n*l,p=n*c,f=n*p,g=n*f,b=n*g,x=1.572916666666667*c-3.2578125*f+4.295068359375*b;h=2.142578125*p-6.071484375*g,r=3.129296875*f-11.249837239583334*b;var $=4.775276692708333*g,E=7.958636765252976*b,O=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*b-x+r-E+O*(2*(1.3125*l-1.71875*p+1.650146484375*g)-4*h+6*$+O*(4*x-12*r+24*E+O*(8*h-32*$+O*(16*r-80*E+O*(32*$+64*O*E))))))}for(r=1-h,n=h/2,c=(l=k.R(o))*v.av(h)/(1.570796326794897*r),p=9999,g=l,l=0;1e-16<p&&50>l;l++)b=v.w(h,g),f=g-(x=(f=(v.fG(g,h)-n*Math.sin(2*g)/b)/r-c)/(b=1/(b*b*b))),p=k.R(x),g=f;return 0<=o?g:-g},v.lW=function(h,o){return k.vi(o)?h:h*v.av(o)/1.570796326794897},v.ca=function(h){return 0>(h=v.kF(h,6.283185307179586))?h+6.283185307179586:3.141592653589793>k.R(h)||k.$(k.R(h),3.141592653589793)?h:h-6.283185307179586},v.kF=function(h,o){return h-Math.floor(h/o)*o},v.Ch=function(h,o){if(.006884661117170036>o){var r=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=r*r;return h/(1+o)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return h*v.av(o)},v.Xq=function(h,o){var r=k.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=k.R(v.kF(o,3.141592653589793)))?o:3.141592653589793-o,(k.$(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-h)*Math.tan(o)))*r},v.q=function(h,o,r){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,l=o*n,c=o*l,p=o*c,f=o*p,g=o*f,b=-.7291666666666666*l+.2278645833333333*p+.03987630208333334*g,x=.615234375*c-.21533203125*f,$=-.54140625*p+.20302734375*g,E=.48876953125*f,O=-.4488699776785715*g,C=Math.cos(2*r);return h/(1+o)*((1+.25*n+.015625*c+.00390625*f)*r+Math.sin(2*r)*(-1.5*o+.1875*l+.0234375*p+.00732421875*g-b+$-O+C*(2*(.9375*n-.234375*c-.03662109375*f)-4*x+6*E+C*(4*b-12*$+24*O+C*(8*x-32*E+C*(16*$-80*O+C*(32*E+64*C*O)))))))}return h*(v.fG(r,o)-.5*o*Math.sin(2*r)/v.w(o,r))},v.w=function(h,o){return o=Math.sin(o),Math.sqrt(1-h*o*o)},v.av=function(h){return k.FC(h,1,2220446049250313e-31)?1:1>h?v.Zw(0,1-h)-h/3*v.Ww(0,1-h):NaN},v.fG=function(h,o){var r=k.Mb(1,h);h=k.R(h);var n=Math.floor(h/1.570796326794897);if(1<o)o=h==0?0:NaN;else if(k.Dd(n))o=(h=v.sin(h))*v.Zw(1-h*h,1-o*h*h)-o/3*h*h*h*v.Ww(1-h*h,1-o*h*h);else{var l=u.P.truncate(n%2),c=v.av(o);0<l?o=c*(n+1)-(o=(h=Math.sin(1.570796326794897*(n+1)-h))*v.Zw(1-h*h,1-o*h*h)-o/3*h*h*h*v.Ww(1-h*h,1-o*h*h)):o=c*n+(o=(h=Math.sin(h-1.570796326794897*n))*v.Zw(1-h*h,1-o*h*h)-o/3*h*h*h*v.Ww(1-h*h,1-o*h*h))}return o*r},v.sin=function(h){h=v.ca(h);var o=k.Mb(1,h);return h=k.R(h),k.$(h,3.141592653589793)?0:k.$(h,1.570796326794897)?1*o:Math.sin(h)*o},v.Ww=function(h,o){var r,n,l,c,p=h,f=o,g=1;for(o=0,h=1;n=((r=.2*(p+f+3*g))-p)/r,l=(r-f)/r,c=(r-g)/r,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));)c=Math.sqrt(f),o+=h/((r=Math.sqrt(g))*(g+(c=Math.sqrt(p)*(c+r)+c*r))),h*=.25,p=.25*(p+c),f=.25*(f+c),g=.25*(g+c);return f=(p=n*l)-(g=c*c),3*o+h*(1+(g=p-6*g)*(.10227272727272728*g-.2142857142857143-.1730769230769231*c*(n=g+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*p)))/(r*Math.sqrt(r))},v.Zw=function(h,o){for(var r,n,l,c,p=1;n=2-((r=(h+o+p)/3)+h)/r,l=2-(r+o)/r,c=2-(r+p)/r,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));p=.25*(p+r))r=Math.sqrt(o),n=Math.sqrt(p),h=.25*(h+(r=Math.sqrt(h)*(r+n)+r*n)),o=.25*(o+r);return(1+(.04166666666666666*(h=n*l-c*c)-.1-.06818181818181818*(o=n*l*c))*h+.07142857142857142*o)/Math.sqrt(r)},v.Sw=function(h,o){if(k.vi(h)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>h){var r=h*h,n=h*r,l=h*n,c=h*l,p=h*c,f=h*p,g=-(.02708333333333333*n+.03430059523809524*l+.03149181547619048*c+.02634359154541446*p+.02156896735835538*f),b=.007669890873015873*l+.01299603174603175*c+.0148051353064374*p+.01454454953803912*f,x=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*f),$=.0006957236677288761*p+.001775193002406544*f,E=-.000217324089394402*f,O=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*h+.2083333333333333*r+.09375*n+.04878472222222222*l+.02916666666666667*c+.01938905423280423*p+.01388255931712963*f)-g+x-E+O*(2*(.1041666666666667*r+.0875*n+.06050347222222222*l+.04151785714285714*c+.02958958540013228*p+.02203667534722222*f)-4*b+6*$+O*(4*g-12*x+24*E+O*(8*b-32*$+O*(16*x-80*E+O*(32*$+64*O*E))))))}return o==0||k.$(k.R(o),1.570796326794897)?r=o:(l=(n=Math.sqrt(h))*Math.sin(o),r=Math.tan(.7853981633974483+o/2)*Math.pow((1-l)/(1+l),n/2),r=2*Math.atan(r)-1.570796326794897),r},v.tO=function(h,o){if(k.vi(h)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>h){var r=h*($=h*(x=h*(O=h*h))),n=h*(E=h*r),l=.05833333333333333*x+.07232142857142858*$+.05634300595238095*r+.0355325796406526*E+.020235546186067*n,c=.02653149801587302*$+.04379960317460317*r+.0429211791776896*E+.03255384637546096*n,p=.01294022817460318*r+.02668104344536636*E+.03155651254609588*n,f=.00659454790965208*E+.0163075268674227*n,g=.003463473736911237*n,b=Math.cos(2*o);return o+Math.sin(2*o)*(.5*h+.2083333333333333*O+.08333333333333333*x+.03611111111111111*$+.01875*r+.01195601851851852*E+.008863673941798942*n-l+p-g+b*(2*(.1458333333333333*O+.1208333333333333*x+.07039930555555556*$+.03616071428571429*r+.01839451058201058*E+.01017113095238095*n)-4*c+6*f+b*(4*l-12*p+24*g+b*(8*c-32*f+b*(16*p-80*g+b*(32*f+64*b*g))))))}var x=Math.sqrt(h),$=x/2,E=Math.tan(.7853981633974483+o/2);h=0,l=1;for(var O=o;l!=0;O=n)r=x*Math.sin(O),n=E*Math.pow((1+r)/(1-r),$),n=2*Math.atan(n)-1.570796326794897,h++,(k.$(n,O)||3e4<h)&&(l=0);return O},v}()}(q||(q={})),function(u){var k=function(){function v(h){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new u.h,this.SH=new u.h,this.FA=!1,this.xq=new u.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=h,this.Cs=u.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var o=h.getCode();0<o?(this.Mk=o,u.qf.getCode(h)):this.Mk=u.qf.getCode(h),0>this.Mk&&(this.Mk=0);var r=this.Re.getType();if(this.eH=r==u.Tc.PE_TYPE_PROJCS?2:1,r==u.Tc.PE_TYPE_PROJCS&&!h.loadConstants())throw u.i.O("PeProjcs.loadConstants failed");o=r==u.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),r!=u.Tc.PE_TYPE_GEOGCS&&u.qf.getCode(o),this.Go=h.getUnit(),this.MH=o.getPrimem().getLongitude(),this.rH=h=o.getUnit().getUnitFactor(),h=Math.PI/(180*h),1e-10>Math.abs(h-1)&&(h=1),this.BA=h,r&u.Tc.PE_TYPE_PROJCS?(o=this.Re,this.CA=1/o.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=u.Eg.generate(o,u.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=u.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,r=1/o.getUnit().getUnitFactor(),this.uw=.001/o.getDatum().getSpheroid().getAxis()*r,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return v.prototype.cs=function(){return this.Mk},v.prototype.mk=function(){return this.vw},v.Ky=function(h,o){return h==o||h!=null&&o!=null&&h.Mk==0&&o.Mk==0&&h.Cs===o.Cs},v.prototype.Xc=function(){return this.Bl},v.prototype.ih=function(h){h.L(this.uo)},v.prototype.rv=function(){return this.uo.v},v.prototype.qv=function(){return this.uo.C},v.prototype.BR=function(h){h.L(this.ww)},v.prototype.hY=function(){var h=this.Re.getType();if(h==u.Tc.PE_TYPE_PROJCS){h=this.Re;var o=this.mk().getCentralMeridian(),r=h.getGeogcs();if(r==null)throw u.i.ga("internal error");o=[[o+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],u.gj.geogToProj(h,1,o),o=o[0][0],r=h.getParameters()[u.Tc.PE_PARM_X0].getValue();var n=this.ol();h=new u.l,n.A(h),o=(n=Math.abs(o-r))+r,r=-1*n+r,n=h.H,h=h.G;var l=new u.l;l.L(r,h,o,n),this.uo==null&&(this.uo=l)}else{if(h!=u.Tc.PE_TYPE_GEOGCS)throw u.i.ga("internal error");r=1/this.Re.getUnit().getUnitFactor()*Math.PI,(h=new u.l).L(-r,-r/2,r,r/2),this.uo==null&&(this.uo=h)}},v.prototype.iY=function(){var h=this.Re.getType();if(h==u.Tc.PE_TYPE_PROJCS){var o=this.Re;if(h=this.mk().getCentralMeridian(),(o=o.getGeogcs())==null)throw u.i.ga("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var r=this.Xr(),n=new u.l;r.A(n),(r=new u.l).L(h-o,n.G,h+o,n.H),this.ww==null&&(this.ww=r)}else{if(h!=u.Tc.PE_TYPE_GEOGCS)throw u.i.ga("internal error");o=1/this.Re.getUnit().getUnitFactor()*Math.PI,(h=new u.l).L(-o,-o/2,o,o/2),this.ww==null&&(this.ww=h)}},v.prototype.bf=function(){return this.BA},v.prototype.rm=function(){return this.CA},v.prototype.Xr=function(){if(this.Bl)return this.wl;var h=this.wl;return h??(this.wx(),this.wl)},v.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},v.prototype.wx=function(){if(this.Re.getType()==u.Tc.PE_TYPE_PROJCS){var h=this.Re,o=h.getGeogcs(),r=h.horizonGcsGenerate();if(r!=null){var n=r[0].getNump(),l=r[0].getKind();h=0<r[0].getInclusive();var c=this.bf(),p=90*c,f=360*c,g=370*c,b=180*c*u.Tc.PE_HORIZON_DELTA/Math.PI,x=new u.l,$=null;if(1<n){for(var E=1;E<n;E++)if(r[E].getKind()==u.Tc.PE_HORIZON_LINE){$==null&&($=new u.Ua);var O=r[E].getCoord();$.rx(O[0][0],O[0][1]),$.Aj(O[1][0],O[1][1])}}if(l==u.Tc.PE_HORIZON_RECT)r=r[0].getCoord(),x.L(r[0][0],r[0][1]),x.$b(r[1][0],r[1][1]),Math.abs(x.H-p)<1e-7*b&&(x.H=p),Math.abs(x.G+p)<1e-7*b&&(x.G=-p),x.S()>g&&(r=-400*c,x.L(r,x.G,r+5*f,x.H)),r=new u.Hh(x),this.wl==null&&(this.wl=r,this.Kv=h);else{if(g=new u.Ea,f=this.mk().isGcsHorizonMultiOverlap(),x=u.iu.XE(o,u.ju.Integer64),f){for(g=new u.bL,b=u.Ih.local().W(g,x,null),E=0;E<n;E++)if(r[E].getKind()==u.Tc.PE_HORIZON_POLY){for(o=r[E].getSize(),c=r[E].getCoord(),l=[],p=0;p<o;p++)l[p]=u.h.construct(c[p][0],c[p][1]);r[E].getInclusive(),f&&((c=new u.Ea).$k(l,o-1),g.VX(c),b.re())}g=b.next()}else for(E=0;E<n;E++)if(r[E].getKind()==u.Tc.PE_HORIZON_POLY){for(o=r[E].getSize(),c=r[E].getCoord(),f=[],p=0;p<o;p++)f[p]=u.h.construct(c[p][0],c[p][1]);r[E].getInclusive(),g.$k(f,o-1)}h?u.Zj.local().yn(g,x,1):u.mp.local().yn(g,x,1),u.fj.local().yn(g,x,1),this.wl==null&&(this.wl=g,this.Kv=h,this.TG=$)}}}},v.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},v.prototype.yK=function(){if(this.eH==2){var h=this.Re.horizonPcsGenerate();if(h!=null){var o=h[0].getKind();h[0].getInclusive();var r=h[0].getNump(),n=!1;if(o==u.Tc.PE_HORIZON_RECT)h=h[0].getCoord(),(r=new u.l).L(h[0][0],h[0][1]),r.$b(h[1][0],h[1][1]),h=new u.Hh(r);else{for(o=-1,n=0;n<r;n++)h[n].getKind()==u.Tc.PE_HORIZON_POLY&&(o=n);for(n=h[o].getSize()-1,h=h[o].getCoord(),r=[],o=0;o<n;o++)r[o]=u.h.construct(h[o][0],h[o][1]);h=o=new u.Ea,o.$k(r,n),n=!0}this.mk().isDensificationNeeded()&&(r=1e5*this.rm(),h=u.Zl.local().W(h,r,null)),n&&(n=new u.Hh,h.dn(n),h.He(),h.Rb(),h.kR(),u.Zj.local().yn(h,null,1)),this.Ws==null&&(this.Ws=h)}}},v.prototype.ol=function(){if(this.Bl)return this.Ws;var h=this.Ws;return h??(this.yK(),this.Ws)},v.prototype.jY=function(){if(this.Re.getType()==u.Tc.PE_TYPE_PROJCS){var h=90*this.bf();h=[[0,h],[0,-h]],u.gj.geogToProj(this.Re,2,h);var o=this.mk(),r=o.getNorthPoleLocation()!=u.Eg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=u.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(r&&this.CH.na(h[0][0],h[0][1]),o&&this.SH.na(h[1][0],h[1][1]))}this.FA=!0},v.prototype.xK=function(){if(this.eH==1){var h=400*this.bf();this.xq.L(-h,-h,h,h)}else h=u.Eg.generate(this.Re,u.Eg.PE_PCSINFO_OPTION_DOMAIN),h=u.l.construct(h.getDomainMinx(),h.getDomainMiny(),h.getDomainMaxx(),h.getDomainMaxy()),this.xq.B()&&this.xq.L(h)},v.prototype.cR=function(h){this.Bl&&h.L(this.xq),this.xq.B()&&this.xK(),h.L(this.xq)},v.prototype.Wp=function(){return this.MH},v.prototype.Bi=function(){return this.Xz},v.prototype.Id=function(){return this.Go},v.prototype.Zr=function(){return this.rH},v}();u.JC=k}(q||(q={})),function(u){var k=function(){function v(h){this.FT=h,this.Cs=u.Ab.zv(h,0,!0);var o=h.getCode();this.us=0<o?o:u.qf.getCode(h),0>this.us&&(this.us=0),this.Go=o=this.FT.getUnit(),this.DH=1/o.getUnitFactor(),u.qf.getCode(h)}return v.Ky=function(h,o){return h==o||h!=null&&o!=null&&h.us==0&&o.us==0&&h.Cs===o.Cs},v.prototype.cs=function(){return this.us},v}();u.KL=k}(q||(q={})),function(u){u.$g=function(){function k(){}return k.ub=function(v,h,o,r,n,l,c,p){if(l!=null||c!=null||p!=null){r=u.F.ca(r),h=u.F.ca(h),o=u.F.ca(o),n=u.F.ca(n),1.570796326794897<u.s.R(o)&&(o=u.s.Mb(3.141592653589793,o)-o,h=u.F.ca(h+3.141592653589793)),1.570796326794897<u.s.R(n)&&(n=u.s.Mb(3.141592653589793,n)-n,r=u.F.ca(r+3.141592653589793));var f=u.F.ca(r-h);if(u.s.$(o,n)&&(u.s.$(h,r)||u.s.$(u.s.R(o),1.570796326794897)))l!=null&&(l.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(u.s.$(o,-n)){if(u.s.$(u.s.R(o),1.570796326794897))return l!=null&&(l.u=3.141592653589793*v),c!=null&&(c.u=0<o?u.F.ca(3.141592653589793-u.F.ca(r)):u.F.ca(r)),void(p!=null&&(p.u=0<o?u.F.ca(r):u.F.ca(3.141592653589793-u.F.ca(r))));if(u.s.$(u.s.R(f),3.141592653589793))return l!=null&&(l.u=3.141592653589793*v),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var g=u.s.R(o)==1.570796326794897?0:Math.cos(o),b=Math.sin(o),x=u.s.R(n)==1.570796326794897?0:Math.cos(n),$=Math.sin(n),E=u.s.R(f)==1.570796326794897?0:Math.cos(f),O=u.s.R(f)==3.141592653589793?0:Math.sin(f);if(l!=null){var C=Math.sin((n-o)/2);f=Math.sin(f/2),l.u=2*Math.asin(Math.sqrt(C*C+g*x*f*f))*v}c!=null&&(c.u=u.s.$(u.s.R(o),1.570796326794897)?0>o?r:u.F.ca(3.141592653589793-r):Math.atan2(x*O,g*$-b*x*E)),p!=null&&(u.s.$(u.s.R(n),1.570796326794897)?p.u=0>n?h:u.F.ca(3.141592653589793-h):(p.u=Math.atan2(g*O,$*g*E-x*b),p.u=u.F.ca(p.u+3.141592653589793)))}}},k.sf=function(v,h,o,r,n,l,c){if(l!=null||c!=null){h=u.F.ca(h),o=u.F.ca(o),1.570796326794897<u.s.R(o)&&(o=u.s.Mb(3.141592653589793,o)-o,h=u.F.ca(h+3.141592653589793)),u.s.$(u.s.R(o),1.570796326794897)&&(h=0),n=u.F.ca(n);var p=u.s.$(u.s.R(n),1.570796326794897)?0:Math.cos(n),f=u.s.$(u.s.R(n),3.141592653589793)?0:Math.sin(n),g=u.s.$(u.s.R(o),1.570796326794897)?0:Math.cos(o),b=Math.sin(o);v=r/v,r=u.s.$(u.s.R(v),1.570796326794897)?0:Math.cos(v);var x=u.s.$(u.s.R(v),3.141592653589793)?0:Math.sin(v),$=Math.asin(b*r+g*x*p);c!=null&&(c.u=$),l!=null&&(l.u=u.s.$(u.s.R($),1.570796326794897)?u.s.$(o,-$)?0>$?n:u.F.ca(3.141592653589793-n):h:u.s.$(u.s.R(o),1.570796326794897)&&u.s.$(v,3.141592653589793)?0>o?n:u.F.ca(3.141592653589793-n):u.F.ca(h+Math.atan2(x*f,g*r-b*x*p)))}},k}()}(q||(q={})),function(u){u.Yk=function(){function k(){}return k.ub=function(v,h,o,r,n,l,c,p,f){var g=new u.ha(0),b=new u.ha(0),x=[0,0,0],$=[0,0,0],E=[0,0,0],O=new u.ha(0),C=new u.ha(0),N=new u.ha(0),D=new u.ha(0),z=new u.ha(0);if(c!=null||p!=null||f!=null)if(u.s.vi(h))u.$g.ub(v,o,r,n,l,c,p,f);else{n=u.F.ca(n),o=u.F.ca(o);var R=u.F.ca(n-o);if(u.s.$(r,l)&&(u.s.$(o,n)||u.s.$(u.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(u.s.$(r,-l)){if(u.s.$(u.s.R(r),1.570796326794897))return c!=null&&(c.u=2*u.F.Ch(v,h)),p!=null&&(p.u=0<r?u.F.ca(3.141592653589793-u.F.ca(n)):u.F.ca(n)),void(f!=null&&(f.u=0<r?u.F.ca(n):u.F.ca(3.141592653589793-u.F.ca(n))));u.s.$(u.s.R(R),3.141592653589793)&&(c!=null&&(c.u=2*u.F.Ch(v,h)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else(u.s.$(u.s.R(r),1.570796326794897)||u.s.$(u.s.R(l),1.570796326794897))&&(u.s.$(u.s.R(r),1.570796326794897)?o=n:n=o);var G=0;if(0>R){G=1;var H=o;o=n,n=H,H=r,r=l,l=H}R=u.F.pt(h,r);var B=u.F.pt(h,l);p==null&&f==null||(u.$g.ub(v,o,R,n,B,null,g,b),g=Math.atan2(Math.sin(g.u)*Math.cos(r-R),Math.cos(g.u)),b=Math.atan2(Math.sin(b.u)*Math.cos(l-B),Math.cos(b.u)),G!=0&&(H=g,g=b,b=H),p!=null&&(p.u=g),f!=null&&(f.u=b)),c!=null&&(u.F.el(1,h,r,o,0,N,D,z),x[0]=N.u,x[1]=D.u,x[2]=z.u,u.F.el(1,h,l,n,0,N,D,z),$[0]=N.u,$[1]=D.u,$[2]=z.u,E[0]=x[1]*$[2]-$[1]*x[2],E[1]=-(x[0]*$[2]-$[0]*x[2]),E[2]=x[0]*$[1]-$[0]*x[1],h=1-u.F.w(h,u.F.Xq(h,u.F.Sj(h,Math.acos(E[2]/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]))))),h*=2-h,p=Math.atan2(-E[1],-E[0]),E=u.F.ca(p-1.570796326794897),p=u.F.ca(p+1.570796326794897),E=u.s.R(u.F.ca(o-E))<=u.s.R(u.F.ca(o-p))?E:p,u.$g.ub(1,E,0,o,R,O,null,null),u.$g.ub(1,E,0,n,B,C,null,null),3.141592653589793<O.u+C.u&&(E=u.F.ca(E+3.141592653589793),u.$g.ub(1,E,0,o,R,O,null,null),u.$g.ub(1,E,0,n,B,C,null,null)),O.u*=u.s.Mb(1,r),C.u*=u.s.Mb(1,l),O.u=u.F.Sj(h,O.u),C.u=u.F.Sj(h,C.u),o=u.F.q(v,h,O.u),v=u.F.q(v,h,C.u),c.u=u.s.R(v-o))}}},k.sf=function(v,h,o,r,n,l,c,p){var f=0,g=new u.ha(0),b=new u.ha(0),x=[0,0,0],$=[0,0,0],E=new u.ha(0),O=new u.ha(0),C=new u.ha(0);if(c!=null||p!=null)if(u.s.vi(h))u.$g.sf(v,o,r,n,l,c,p);else if(u.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(l=u.F.ca(l),0>n&&(n=u.s.R(n),l=u.F.ca(l+3.141592653589793)),o=u.F.ca(o),r=u.F.ca(r),1.570796326794897<u.s.R(r)&&(o=u.F.ca(o+3.141592653589793),r=u.s.Mb(3.141592653589793,r)-r),u.s.$(u.s.R(r),1.570796326794897)&&(o=0),u.s.Dd(r)){var N=u.s.R(1.570796326794897-u.s.R(l));N=u.F.Sj(h,N),N=1-u.F.w(h,u.F.Xq(h,N)),N*=2-N,v=n/u.F.Ch(v,N)*1.570796326794897,v=u.F.Tq(N,v),v=u.F.pt(N,v),u.$g.sf(1,o,r,v,l,c,g),p!=null&&(f=g.u),p!=null&&(p.u=u.F.Sj(h,f))}else if(u.s.$(u.s.R(r),1.570796326794897))g=2*(f=u.F.Ch(v,h)),l=0<(v=u.s.Mb(1.570796326794897,r))?u.F.ca(3.141592653589793-l):l,r=f-n,u.s.R(r)<=f?c!=null&&(c.u=l):(r=Math.floor(n/g),u.P.truncate(r%2)==0?(c!=null&&(c.u=l),n-=r*g):(c!=null&&(c.u=u.F.ca(l+3.141592653589793)),n=(r+1)*g-n),r=f-n),p!=null&&(p.u=u.F.Tq(h,r/f*v));else{N=u.F.pt(h,r),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(r-N));var D=u.P.truncate(u.s.Mb(1,N))*(1.570796326794897>=u.s.R(l)?1:-1);l=u.F.ca(o+Math.atan(Math.tan(l)*-Math.sin(N))),u.$g.ub(v,l,0,o,N,null,b,null),N=u.s.R(1.570796326794897-u.s.R(b.u)),N=u.F.Sj(h,N),N=1-u.F.w(h,u.F.Xq(h,N)),N*=2-N,u.F.el(1,h,0,l,0,E,O,C),x[0]=E.u,x[1]=O.u,x[2]=C.u,u.F.el(1,h,r,o,0,E,O,C),$[0]=E.u,$[1]=O.u,$[2]=C.u,r=Math.acos((x[0]*$[0]+x[1]*$[1]+x[2]*$[2])/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2])),r=u.F.Sj(N,r),n=0<(r=u.F.q(v,N,r)+n*D)?b.u:u.F.ca(b.u+3.141592653589793),v=u.s.R(r)/u.F.Ch(v,N)*1.570796326794897,v=u.F.Tq(N,v),v=u.F.pt(N,v),u.$g.sf(1,l,0,v,n,c,g),p!=null&&(f=g.u),p!=null&&(p.u=u.F.Sj(h,f))}},k}()}(q||(q={})),function(u){u.eu=function(){function k(){}return k.ub=function(v,h,o,r,n,l,c,p,f){var g=0,b=0,x=0;if(c!=null||p!=null||f!=null)if(u.s.vi(h))u.$g.ub(v,o,r,n,l,c,p,f);else{var $=u.F.ca(n-o);if(u.s.$(r,l)&&(u.s.Dd($)||u.s.$(u.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(u.s.$(r,-l)){if(u.s.$(u.s.R(r),1.570796326794897))return c!=null&&(c.u=2*u.F.Ch(v,h)),p!=null&&(p.u=0<r?u.F.ca(3.141592653589793-u.F.ca(n)):u.F.ca(n)),void(f!=null&&(f.u=0<r?u.F.ca(n):u.F.ca(3.141592653589793-u.F.ca(n))));u.s.$(u.s.R($),3.141592653589793)&&(c!=null&&(c.u=2*u.F.Ch(v,h)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(u.s.$(u.s.R(r),1.570796326794897)||u.s.$(u.s.R(l),1.570796326794897)||u.s.Dd($)||u.s.$(u.s.R($),3.141592653589793))return void u.Yk.ub(v,h,o,r,n,l,c,p,f);var E=1-Math.sqrt(1-h),O=h/(1-h),C=v*(1-E);v=u.F.Xq(h,r);var N=u.F.Xq(h,l);h=u.s.R(v)==1.570796326794897?0:Math.cos(v);var D=Math.sin(v),z=u.s.R(N)==1.570796326794897?0:Math.cos(N),R=Math.sin(N),G=$,H=Math.cos(G),B=Math.sin(G),tt=1,X=0;do{var rt=G,ct=Math.sqrt(Math.pow(z*B,2)+Math.pow(h*R-D*z*H,2)),ht=D*R+h*z*H,Tt=Math.atan2(ct,ht);if(ct==0){tt=0;break}var dt=h*z*B/ct;if(g=Math.cos(Math.asin(dt)),b=ht-2*D*R/(g*=g),1<u.s.R(b)&&(b=u.s.Mb(1,b)),G=$+(1-(G=E/16*g*(4+E*(4-3*g))))*E*dt*(Tt+G*ct*(b+G*ht*(2*(x=b*b)-1))),H=Math.cos(G),B=Math.sin(G),X++,3.141592653589793<u.s.R(G)&&30<X){tt=0;break}}while(5e3>=X&&!u.s.$(rt,G));if(tt!=0)E=(O*=g)*(256+O*(O*(74-47*O)-128))/1024,c!=null&&(c.u=C*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Tt-E*ct*(b+E/4*(ht*(2*x-1)-E/6*b*(4*ct*ct-3)*(4*x-3))))),p!=null&&(p.u=u.s.$(u.s.R(r),1.570796326794897)?0>r?n:u.F.ca(3.141592653589793-n):Math.atan2(z*B,h*R-D*z*H)),f!=null&&(u.s.$(u.s.R(l),1.570796326794897)?f.u=0>l?o:u.F.ca(3.141592653589793-o):(f.u=Math.atan2(h*B,h*R*H-D*z),f.u=u.F.ca(f.u+3.141592653589793)));else{G=u.s.Mb(3.141592653589793,$),ht=D*R-h*z,Tt=Math.acos(ht),ct=Math.sin(Tt),g=1,X=dt=0;do x=dt,H=1-.25*(dt=E*(g*=g)*(1+E+E*E))+.1875*(b=E*E*(H=g*g)*(1+2.25*E))-.1953125*(tt=E*E*E*H*g),dt=.25*dt-.25*b+.29296875*tt,B=.03125*b-.05859375*tt,tt*=.00651041666666667,b=ht-2*D*R/g,1<u.s.R(b)&&(b=u.s.Mb(1,b)),g=Math.acos(b),ht=Math.cos(2*g),rt=Math.cos(3*g),B=(dt=u.s.$(r,-l)?u.F.ca(3.141592653589793-$)/(3.141592653589793*E*H):u.F.ca(G-$)/(E*(H*Tt+dt*ct*b+B*Math.sin(2*Tt)*ht+tt*Math.sin(3*Tt)*rt)))*ct/(h*z),G=1.570796326794897<u.s.R($)?u.s.Mb(3.141592653589793,B)-Math.asin(B):Math.asin(B),H=Math.cos(G),ct=Math.sqrt(Math.pow(z*B,2)+Math.pow(h*R-D*z*H,2)),Tt=3.141592653589793-Math.asin(u.s.R(ct)),ht=Math.cos(Tt),g=Math.cos(Math.asin(dt)),X++;while(70>=X&&!u.s.$(x,dt));c!=null&&(H=1+(O*=g*=g)*(4096+O*(O*(320-175*O)-768))/16384,u.s.$(r,-l)?c.u=3.141592653589793*C*H:(b=ht-2*D*R/g,g=Math.acos(b),ht=Math.cos(2*g),rt=Math.cos(3*g),c.u=C*(H*Tt+O*(O*(128+O*(35*O-60))-512)/2048*ct*b+O*(5*O-4)/6144*O*O*Math.sin(2*Tt)*ht+tt*Math.sin(3*Tt)*rt+-762939453125e-16*O*O*O*O*Math.sin(4*Tt)*Math.cos(4*g)))),p!=null&&(u.s.Dd(r)&&u.s.Dd(l)?(g=Math.sqrt(1-dt*dt),p.u=Math.acos(g),0>$&&(p.u*=-1)):u.s.$(u.s.R(r),1.570796326794897)?p.u=0>r?n:u.F.ca(3.141592653589793-n):(c=dt/h,C=Math.sqrt(1-c*c),0>h*R-D*z*Math.cos(G)&&(C*=-1),p.u=Math.atan2(c,C),u.s.$(r,-l)&&u.s.R(u.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(r))&&(0<r&&1.570796326794897>u.s.R(p.u)||0>r&&1.570796326794897<u.s.R(p.u))&&(p.u=u.s.Mb(3.141592653589793,p.u)-p.u))),f!=null&&(u.s.Dd(r)&&u.s.Dd(l)?(g=Math.sqrt(1-dt*dt),f.u=Math.acos(g),0<=$&&(f.u*=-1)):u.s.$(u.s.R(l),1.570796326794897)?f.u=0>l?o:u.F.ca(3.141592653589793-o):($=dt/z,c=Math.sqrt(1-$*$),C=Math.sin(G/2),0>Math.sin(N-v)-2*h*R*C*C&&(c*=-1),f.u=Math.atan2($,c),f.u=u.F.ca(f.u+3.141592653589793),u.s.$(r,-l)&&!u.s.Dd(r)&&!u.s.$(u.s.R(r),1.570796326794897)&&u.s.R(u.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(r))&&(p!=null?C=p.u:(c=dt/h,C=Math.sqrt(1-c*c),0>h*R-D*z*Math.cos(G)&&(C*=-1),C=Math.atan2(c,C),u.s.$(r,-l)&&u.s.R(u.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(r))&&(0<r&&1.570796326794897>u.s.R(C)||0>r&&1.570796326794897<u.s.R(C))&&(C=u.s.Mb(3.141592653589793,C)-C)),1.570796326794897>=u.s.R(C)&&1.570796326794897<u.s.R(f.u)||1.570796326794897<=u.s.R(C)&&1.570796326794897>u.s.R(f.u))&&(f.u=-1*u.F.ca(f.u+3.141592653589793))))}}}},k.sf=function(v,h,o,r,n,l,c,p){if(c!=null||p!=null)if(u.s.vi(h))u.$g.sf(v,o,r,n,l,c,p);else if(l=u.F.ca(l),u.s.$(u.s.R(r),1.570796326794897)||u.s.Dd(l)||u.s.$(u.s.R(l),3.141592653589793))u.Yk.sf(v,h,o,r,n,l,c,p);else{var f=u.s.R(l)==1.570796326794897?0:Math.cos(l),g=u.s.R(l)==3.141592653589793?0:Math.sin(l);u.s.$(u.s.R(r),1.570796326794897)&&(o=0),l=1-Math.sqrt(1-h);var b=u.F.Xq(h,r);r=u.s.R(b)==1.570796326794897?0:Math.cos(b);var x=Math.sin(b);b=Math.atan2(Math.tan(b),f);var $=r*g,E=$*$,O=1-E,C=h/(1-h)*O,N=(h=C*(256+C*(C*(74-47*C)-128))/1024)/4,D=h/6,z=n/(v*(1-l)*(1+C*(4096+C*(C*(320-175*C)-768))/16384)),R=z;do{var G=R;n=u.s.R(R)==1.570796326794897?0:Math.cos(R);var H=(C=u.s.R(R)==3.141592653589793?0:Math.sin(R))*C;R=h*C*((v=Math.cos(2*b+R))+N*(n*(2*(R=v*v)-1)-D*v*(4*H-3)*(4*R-3)))+z}while(!u.s.$(G,R));n=u.s.R(R)==1.570796326794897?0:Math.cos(R),C=u.s.R(R)==3.141592653589793?0:Math.sin(R),c!=null&&(g=Math.atan2(C*g,r*n-x*C*f),O=l/16*O*(4+l*(4-3*O)),v=Math.cos(2*b+R),c.u=u.F.ca(o+(g-(1-O)*l*$*(R+O*C*(v+O*n*(2*v*v-1)))))),p!=null&&(O=x*C-r*n*f,O=(1-l)*Math.sqrt(E+O*O),p.u=Math.atan2(x*n+r*C*f,O))}},k}()}(q||(q={})),function(u){u.KC=function(){function k(){}return k.ub=function(v,h,o,r,n,l,c,p,f){var g=u.F.ca(n-o),b=u.s.$(u.s.R(r),1.570796326794897),x=u.s.$(u.s.R(l),1.570796326794897);if(u.s.$(r,l)&&(u.s.Dd(g)||b))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(u.s.vi(h)){var $=Math.sin(r),E=Math.sin(l);$=Math.sqrt((1+$)/(1-$)),E=Math.sqrt((1+E)/(1-E)),$=Math.log(E)-Math.log($),$=Math.atan2(g,$),c!=null&&(c.u=u.s.$(r,l)?u.s.R(v*Math.cos(r)*g):u.s.R((v*l-v*r)/Math.cos($)))}else E=u.F.Sw(h,l),$=Math.sin(u.F.Sw(h,r)),E=Math.sin(E),$=Math.sqrt((1+$)/(1-$)),E=Math.sqrt((1+E)/(1-E)),$=Math.log(E)-Math.log($),$=Math.atan2(g,$),c!=null&&(u.s.$(r,l)?c.u=u.s.R(v*g*Math.cos(r)/u.F.w(h,r)):(g=u.F.q(v,h,r),v=u.F.q(v,h,l),c.u=u.s.R((v-g)/Math.cos($))));p==null&&f==null||(c=u.F.ca($+3.141592653589793),b&&x||!b&&!x||(b?$=0>r?n:u.F.ca(3.141592653589793-n):x&&(c=0>l?o:u.F.ca(3.141592653589793-o))),p!=null&&(p.u=$),f!=null&&(f.u=c))}},k.sf=function(v,h,o,r,n,l,c,p){l=u.F.ca(l),0>n&&(n=u.s.R(n),l=u.F.ca(l+3.141592653589793)),u.s.vi(h)?u.s.$(u.s.R(r),1.570796326794897)?(o=0>r?l:u.F.ca(3.141592653589793-l),3.141592653589793>=(l=n/v%6.283185307179586)?v=r-u.s.Mb(l,r):(o=u.F.ca(o+3.141592653589793),v=-r+u.s.Mb(l-3.141592653589793,r))):u.s.$(u.s.R(l),1.570796326794897)?(o=u.F.ca(o+u.s.Mb(n,l)/(v*Math.cos(r))),v=r):(v=r+n*Math.cos(l)/v,1.570796326794897<u.s.R(v)&&(v=1.570796326794897),u.s.$(u.s.R(v),1.570796326794897)&&(u.s.Dd(l)||u.s.$(u.s.R(l),3.141592653589793))||(1.570796316258184<u.s.R(v)&&(v=u.s.Mb(1.570796316258184,v)),h=Math.sin(r),r=Math.sin(v),h=Math.sqrt((1+h)/(1-h)),r=Math.sqrt((1+r)/(1-r)),h=Math.log(r)-Math.log(h),o=u.F.ca(o+Math.tan(l)*h))):u.s.$(u.s.R(r),1.570796326794897)?(o=0>r?l:u.F.ca(3.141592653589793-l),l=n/u.F.lW(v,h),3.141592653589793>=(l%=6.283185307179586)?v=r-u.s.Mb(l,r):(o=u.F.ca(o+3.141592653589793),v=-r+u.s.Mb(l-3.141592653589793,r)),v=u.F.Tq(h,v)):u.s.$(u.s.R(l),1.570796326794897)?(o=u.F.ca(o+u.s.Mb(n,l)*u.F.w(h,r)/(v*Math.cos(r))),v=r):(v=1.570796326794897*(n*Math.cos(l)+u.F.q(v,h,r))/u.F.Ch(v,h),1.570796326794897<u.s.R(v)&&(v=u.s.Mb(1.570796326794897,v)),v=u.F.Tq(h,v),u.s.$(u.s.R(v),1.570796326794897)&&(u.s.Dd(l)||u.s.$(u.s.R(l),3.141592653589793))||(n=u.F.Sw(h,r),r=u.F.Sw(h,v),1.570796316258184<u.s.R(r)&&(r=u.s.Mb(1.570796316258184,v),v=u.F.tO(h,r)),h=Math.sin(n),r=Math.sin(r),h=Math.sqrt((1+h)/(1-h)),r=Math.sqrt((1+r)/(1-r)),h=Math.log(r)-Math.log(h),o=u.F.ca(o+Math.tan(l)*h))),c!=null&&(c.u=o),p!=null&&(p.u=v)},k}()}(q||(q={})),function(u){u.kb=function(){function k(){}return k.Sy=function(v,h,o,r,n,l,c){u.eu.ub(v,h,o,r,n,l,null,c,null)},k.Ai=function(v,h,o,r,n,l,c,p){u.eu.sf(v,h,o,r,n,l,c,p)},k.xd=function(v,h,o,r,n,l,c,p,f,g){switch(g){case 2:u.Yk.ub(v,h,o,r,n,l,c,p,f);break;case 3:u.LC.ub(v,h,o,r,n,l,c,p,f);break;case 1:u.KC.ub(v,h,o,r,n,l,c,p,f);break;default:u.eu.ub(v,h,o,r,n,l,c,p,f)}},k.qj=function(v,h,o,r,n,l,c,p,f){switch(f){case 2:u.Yk.sf(v,h,o,r,n,l,c,p);break;case 3:u.LC.sf(v,h,o,r,n,l,c,p);break;case 1:u.KC.sf(v,h,o,r,n,l,c,p);break;default:u.eu.sf(v,h,o,r,n,l,c,p)}},k}()}(q||(q={})),function(u){var k=function(){function h(){this.y=this.x=null}return h.construct=function(o){var r=new h;return r.x=new u.Xb,r.x.set(o.x),r.y=new u.Xb,r.y.set(o.y),r},h.QE=function(o,r){var n=new h;return n.x=new u.Xb,n.x.set(o),n.y=new u.Xb,n.y.set(r),n},h.prototype.rg=function(){return this.x.rg()&&this.y.rg()},h.prototype.value=function(){return u.h.construct(this.x.value(),this.y.value())},h}();u.rY=k;var v=function(){function h(){this.z=this.y=this.x=null}return h.construct=function(o){var r=new h;return r.x=new u.Xb,r.x.set(o.x),r.y=new u.Xb,r.y.set(o.y),r.z=new u.Xb,r.z.set(o.z),r},h.QE=function(o,r,n){var l=new h;return l.x=new u.Xb,l.x.set(o),l.y=new u.Xb,l.y.set(r),l.z=new u.Xb,l.z.set(n),l},h.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},h.prototype.value=function(){return new u.Od(this.x.value(),this.y.value(),this.z.value())},h.prototype.Sh=function(o){var r=new u.Xb,n=new u.Xb,l=new u.Xb;return r.Ml(this.x,o.x),n.Ml(this.y,o.y),l.Ml(this.z,o.z),(o=new u.Xb).ZM(r,n),o.add(l),o},h.prototype.YE=function(o){var r=new h;r.x.Ml(this.y,o.z),r.y.Ml(this.z,o.x),r.z.Ml(this.x,o.y);var n=new u.Xb,l=new u.Xb,c=new u.Xb;return n.Ml(this.z,o.y),l.Ml(this.x,o.z),c.Ml(this.y,o.x),r.x.sub(n),r.y.sub(l),r.z.sub(c),r},h}();u.sY=v,u.Nx=function(){function h(){}return h.zP=function(o,r,n){var l=r.x;r=r.y,h.el(1,o,Math.cos(l),Math.sin(l),Math.cos(r),Math.sin(r),n)},h.yP=function(o,r){var n=new u.Od;return h.zP(o,r,n),n},h.el=function(o,r,n,l,c,p,f){o/=Math.sqrt(1-r*p*p),f.L(o*c*n,o*c*l,o*(1-r)*p)},h.$u=function(o,r){var n=new u.Xb,l=new u.Xb,c=new u.Xb,p=new u.Xb;n.cos(r.x),l.sin(r.x),c.cos(r.y),p.sin(r.y);var f=new u.Xb;return f.set(p),f.Bg(p),f.Po(o),f.Po(-1),f.fN(),f.sqrt(),(r=new u.Xb).set(1),r.lm(f),(f=new u.Xb).set(r),f.Bg(c),f.Bg(n),(n=new u.Xb).set(r),n.Bg(c),n.Bg(l),(l=new u.Xb).set(r),l.Po(1-o),l.Bg(p),v.QE(f,n,l)},h.NS=function(o,r,n,l){if(Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x)return NaN;if(l=h.YA(l,Math.min(r.x,n.x),Math.max(r.x,n.x)),!new u.Oc(r.x,n.x).contains(l))return NaN;var c=k.construct(r);if(n=k.construct(n),c=h.$u(o,c),n=h.$u(o,n),(n=c.YE(n)).z.rg())return r.y;var p=new u.Xb;p.set(n.x),p.lm(n.z),p.Po(-1);var f=new u.Xb;f.set(n.y),f.lm(n.z),f.Po(-1);var g=new u.Xb;return g.set(f),g.Bg(f),(c=new u.Xb).set(p),c.Bg(p),c.add(g),c.sqrt(),c.rg()||p.rg()&&f.rg()?r.y:(r=Math.atan2(f.value(),p.value()),r=Math.atan2(c.value()*Math.cos(r-l),1-o),l=h.yP(o,u.h.construct(l,r)),o=new u.Od(l.x,l.y,-l.z),l=n.value().Sh(l),o=n.value().Sh(o),Math.abs(o)<Math.abs(l)&&(r=-r),r)},h.Jz=function(o,r,n,l,c){if(c[0]=NaN,c[1]=NaN,Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x||Math.abs(l)>=.5*Math.PI||0<r.y&&0<n.y&&r.y>l&&n.y>l||0>r.y&&0>n.y&&r.y<l&&n.y<l)return 0;var p=k.construct(r),f=k.construct(n);p=h.$u(o,p),f=h.$u(o,f);var g=p.YE(f);if(g.z.rg())return new u.Oc(r.y,n.y).contains(l)?(c[0]=r.x,1):0;(f=new u.Xb).set(g.x),f.lm(g.z),f.Po(-1),(p=new u.Xb).set(g.y),p.lm(g.z),p.Po(-1),(g=new u.Xb).set(p),g.Bg(p);var b=new u.Xb;return b.set(f),b.Bg(f),b.add(g),b.sqrt(),b.rg()||f.rg()&&p.rg()?l==0?(c[0]=r.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(l)/b.value(),1<Math.abs(o)?0:(o=Math.acos(o),g=Math.atan2(p.value(),f.value()),f=Math.min(r.x,n.x),p=Math.max(r.x,n.x),n=h.YA(g-o,f,p),o=l!=0?h.YA(g+o,f,p):n,l=0,f<=n&&n<=p&&(c[l]=n,l++),o!=n&&f<=o&&o<=p&&(c[l]=o,++l==2&&Math.abs(c[0]-r.x)>Math.abs(c[1]-r.x)&&(r=c[0],c[0]=c[1],c[1]=r)),l))},h.YA=function(o,r,n){return o>n?o-=2*(r=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<r&&(o+=2*(r=Math.ceil((r-o)/(2*Math.PI)))*Math.PI),o},h}()}(q||(q={})),function(u){u.SK=function(){function k(){}return k.WX=function(v,h){var o=8,r=[0,0,0,0],n=new u.h;n.N(h),n.scale(u.cb.tc(v).Id().Fc()==9102?1:u.cb.tc(v).Id().ci/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var l=-180,c=180,p=(v=5*o)-1,f=(h=(v+31)/32)-1;0<=f;f--)for(var g=p-32*f,b=Math.min(32,v-32*f),x=1;x<b;x+=2){var $=.5*(c+l);n.x>=$?(r[f]|=1<<g,l=$):c=$,g-=2,p-=2}for(l=-90,c=90,p=v-2,f=h-1;0<=f;f--)for(g=p-32*f,b=Math.min(32,v-32*f),x=0;x<b;x+=2)$=.5*(c+l),n.y>=$?(r[f]|=1<<g,l=$):c=$,g-=2,p-=2;return k.VP(r,o,o)},k.VP=function(v,h,o){for(var r=[],n=0;n<h;n++)r[n]="";for(var l=n=0,c=0;c<h;c++){var p=v[n]>>l&31;if(31<(l+=5)){var f=37-l;p&=(1<<f)-1,l-=32,p|=(v[++n]&(1<<l)-1)<<f}r[h-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>h)for(c=0;c<o-h;c++)r.push("0");else o<h&&(r.length=o);return r.join("")},k}()}(q||(q={})),function(u){var k={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},v={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};u.yr=function(){function h(){}return h.Ny=function(o){h.zp===!1&&h.zt();var r=h.AQ(o);if(r==-1){var n=h.Ax(o);n!=o&&(r=h.Ny(n))}return r==-1&&(n=h.AK(o))!=o&&(r=h.Ny(n)),r},h.AQ=function(o){return h.Hw[o]!==void 0?h.Hw[o]:-1},h.xQ=function(o){h.zp===!1&&h.zt();var r=h.iF(o);if(r==1e38){var n=h.Ax(o);if(n!=o&&(r=h.iF(n)),r==1e38)return 1e-10}return r},h.US=function(o){if(h.Ks[o]!==void 0)return!0;var r=h.Ax(o);return r!=o&&h.Ks[r]!==void 0},h.WS=function(o){if(h.zo[o]!==void 0)return!0;var r=h.Ax(o);return r!=o&&h.zo[r]!==void 0},h.iF=function(o){return h.zp===!1&&h.zt(),h.Ks[o]!==void 0?h.Ks[o]:h.zo[o]!==void 0?h.zo[o]:1e38},h.AK=function(o){return h.zp===!1&&h.zt(),h.RA[o]!==void 0?h.RA[o]:o},h.Ax=function(o){return h.zp===!1&&h.zt(),h.SA[o]!==void 0?h.SA[o]:o},h.zt=function(){for(var o,r=k,n=0;n<r.pcsid.length;n+=2)h.zo[r.pcsid[n]]=r.pcstol[2*r.pcsid[n+1]+1];for(n=0;n<r.pcsidc.length;n+=1)for(var l=(o=r.pcsidc[n])[0];l<=o[1];l++)h.zo[l]=r.pcstol[2*o[2]+1];for(n=0;n<r.gcsid.length;n+=2)h.Ks[r.gcsid[n]]=r.gcstol[2*r.gcsid[n+1]+1];for(n=0;n<r.gcsidc.length;n+=1)for(l=(o=r.gcsidc[n])[0];l<=o[1];l++)h.zo[l]=r.gcstol[2*o[2]+1];for(n=0;n<v.c.length;n+=1)for(l=(o=v.c[n])[0];l<=o[1];l++)h.Hw[l]=o[2];for(n=0;n<v.nc.length;n+=2)h.Hw[v.nc[n]]=v.nc[n+1];for(v=null,n=0;n<r.newtoold.length;n+=2)h.RA[r.newtoold[n+1]]=r.newtoold[n],h.SA[r.newtoold[n]]=r.newtoold[n+1];k=null,h.zp=!0},h.zp=!1,h.Ks=[],h.zo=[],h.RA=[],h.SA=[],h.Hw=[],h}()}(q||(q={})),function(u){function k(h){return h.length===0?'""':h[0]=='"'||h[0]=="."||"0"<=h[0]&&"9">=h[0]?h:'"'+h.trim()+'"'}var v=[];u.SC=function(){function h(){}return h.zQ=function(o){try{for(var r=0;r<v.length;r++)if(v[r].wkttext===o)return v[r].unit;for(var n,l=r="",c=!1,p=0;p<o.length;p++){var f=o[p];c===!0?f=='"'?o[p+1]=='"'?r+=f:c=c=!1:r+=f:/[\s]/.test(f)||(f==","?(l=r!==""?l+(k(r)+","):l+",",r=""):f==")"||f=="]"?(l=r!==""?l+(k(r)+"]}"):l+"]}",r=""):f=="("||f=="["?(l+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):f=='"'?(c=!0,r=""):r+=f)}n=JSON.parse(l);var g=h.hF(n);if(g===null)return null;for(n=null,f=0;f<g.values.length;f++)if(typeof g.values[f]=="object"&&g.values[f].entity==="UNIT"){n=g.values[f];break}if(n===null)return null;var b=u.Uc.UO(g.entity==="GEOGCS"?1:0,n.values[1],n.values[2]);return v.push({wkttext:o,unit:b}),10<v.length&&v.shift(),b}catch{return null}},h.hF=function(o){if(o===null)return null;if(o.entity==="GEOGCS"||o.entity==="PROJCS")return o;for(var r=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0){if(o.values[n].entity==="GEOGCS"||o.values[n].entity=="PROJCS")return o.values[n];r.push(o.values[n])}for(o=0;o<r.length;o++)if((n=h.hF(r[o]))!==null)return n;return null},h.yQ=function(o){var r=-1;if(o!=null&&0<o.length){var n=o.indexOf("PROJCS");if(0<=n){var l=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<l&&(r=.001/l)}else if(0<=(n=o.indexOf("GEOGCS"))){var p=0;if(l=0,0<(n=o.indexOf("SPHEROID",n+6))&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&0<=(n=o.indexOf("UNIT",c+1))&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1))))try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<p&&0<l&&(r=.001/(p*l))}}return r},h}()}(q||(q={})),function(u){var k;(k=u.$K||(u.$K={}))[k.NONE=0]="NONE",k[k.LINEAR=1]="LINEAR",k[k.ANGULAR=2]="ANGULAR",function(h){h[h.enumFloat=0]="enumFloat",h[h.enumDouble=1]="enumDouble",h[h.enumInt32=2]="enumInt32",h[h.enumInt64=3]="enumInt64",h[h.enumInt8=4]="enumInt8",h[h.enumInt16=5]="enumInt16"}(u.LL||(u.LL={})),function(h){h[h.POSITION=0]="POSITION",h[h.Z=1]="Z",h[h.M=2]="M",h[h.ID=3]="ID",h[h.NORMAL=4]="NORMAL",h[h.TEXTURE1D=5]="TEXTURE1D",h[h.TEXTURE2D=6]="TEXTURE2D",h[h.TEXTURE3D=7]="TEXTURE3D",h[h.ID2=8]="ID2",h[h.MAXSEMANTICS=10]="MAXSEMANTICS"}(u.Kh||(u.Kh={}));var v=function(){function h(o,r){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,r!==void 0){for(this.Ba=r.Ba,this.Qq=r.Qq,this.dg=r.dg.slice(0),this.wh=r.wh.slice(0),this.yl=r.yl,this.Xs=[],o=r=0;o<this.Ba;o++)this.Xs[o]=r,r+=h.Wa(this.dg[o]);for(this.Qq=r,this.Be=[],o=0;o<this.Ba;o++){r=h.Wa(this.ld(o));for(var n=h.te(this.ld(o)),l=0;l<r;l++)this.Be[this.Xs[o]+l]=n}}else this.Qq=this.Ba=0}return h.prototype.ld=function(o){if(0>o||o>this.Ba)throw u.i.O();return this.dg[o]},h.prototype.Rf=function(o){return this.wh[o]},h.gz=function(o){return h.EM[o]},h.Vp=function(o){return h.NM[o]},h.Wa=function(o){return h.mM[o]},h.prototype.hasAttribute=function(o){return 0<=this.wh[o]},h.prototype.dG=function(){return this.hasAttribute(1)},h.te=function(o){return h.$C[o]},h.prototype.GR=function(o){return this.Xs[o]},h.yG=function(o,r){return h.$C[o]===r},h.prototype.Nb=function(o){return this===o},h.prototype.Cn=function(){for(var o=u.P.Vh(this.dg[0]),r=1;r<this.Ba;r++)o=u.P.Vh(this.dg[r],o);return o},h.prototype.bk=function(o){return this.Xs[o]},h.prototype.dc=function(){return this.yl},h.prototype.Fd=function(o){return this.dg[o]},h.$C=[0,0,NaN,0,0,0,0,0,0],h.EM=[1,1,1,0,2,1,1,1,0],h.NM=[1,1,1,2,0,0,0,0,2],h.mM=[2,1,1,1,3,1,2,3,2],h}();u.sa=v}(q||(q={})),function(u){function k(c,p,f){var g=p-(c=new l(c)).e,b=c.c;for(b.length>++p&&v(c,g,l.gu),b[0]?f?g=p:(b=c.c,g=c.e+g+1):++g;b.length<g;b.push(0));return g=c.e,f===1||f&&(p<=g||g<=o)?(0>c.Cd&&b[0]?"-":"")+(1<b.length?b[0]+"."+b.join("").slice(1):b[0])+(0>g?"e":"e+")+g:c.toString()}function v(c,p,f,g){var b=c.c,x=c.e+p+1;if(f===1?g=5<=b[x]:f===2?g=5<b[x]||b[x]==5&&(g||0>x||b[x+1]!==void 0||1&b[x-1]):f===3?g=g||b[x]!==void 0||0>x:(g=!1,f!==0&&h("!Big.RM!")),1>x||!b[0])g?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(b.length=x--,g)for(;9<++b[x];)b[x]=0,x--||(++c.e,b.unshift(1));for(x=b.length;!b[--x];b.pop());}return c}function h(c){throw(c=Error(c)).name="BigError",c}var o=-7,r=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function c(p){if(p instanceof c)this.Cd=p.Cd,this.e=p.e,this.c=p.c.slice();else{var f,g,b;for(p===0&&0>1/p?p="-0":n.test(p+="")||h(NaN),this.Cd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(f=p.indexOf("."))&&(p=p.replace(".","")),0<(g=p.search(/e/i))?(0>f&&(f=g),f+=+p.slice(g+1),p=p.substring(0,g)):0>f&&(f=p.length),g=0;p.charAt(g)=="0";g++);if(g==(b=p.length))this.c=[this.e=0];else{for(;p.charAt(--b)=="0";);for(this.e=f-g-1,this.c=[],f=0;g<=b;this.c[f++]=+p.charAt(g++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Cd=1,p},c.prototype.cmp=function(p){var f=this.c,g=(p=new c(p)).c,b=this.Cd,x=p.Cd,$=this.e,E=p.e;if(!f[0]||!g[0])return f[0]?b:g[0]?-x:0;if(b!=x)return b;if(p=0>b,$!=E)return $>(E^p)?1:-1;for(b=-1,x=($=f.length)<(E=g.length)?$:E;++b<x;)if(f[b]!=g[b])return f[b]>(g[b]^p)?1:-1;return $==E?0:$>(E^p)?1:-1},c.prototype.lm=function(p){var f=this.c,g=(p=new c(p)).c,b=this.Cd==p.Cd?1:-1,x=c.tr;if((x!==~~x||0>x||1e6<x)&&h("!Big.DP!"),!f[0]||!g[0])return f[0]==g[0]&&h(NaN),g[0]||h(b/0),new c(0*b);var $,E,O=g.slice(),C=$=g.length,N=f.length,D=f.slice(0,$),z=D.length,R=p,G=R.c=[],H=0,B=x+(R.e=this.e-p.e)+1;for(R.Cd=b,b=0>B?0:B,O.unshift(0);z++<$;D.push(0));do{for(E=0;10>E;E++){if($!=(z=D.length))var tt=$>z?1:-1;else{var X=-1;for(tt=0;++X<$;)if(g[X]!=D[X]){tt=g[X]>D[X]?1:-1;break}}if(!(0>tt))break;for(p=z==$?g:O;z;){if(D[--z]<p[z]){for(X=z;X&&!D[--X];D[X]=9);--D[X],D[z]+=10}D[z]-=p[z]}for(;!D[0];D.shift());}G[H++]=tt?E:++E,D[0]&&tt?D[z]=f[C]||0:D=[f[C]]}while((C++<N||D[0]!==void 0)&&b--);return G[0]||H==1||(G.shift(),R.e--),H>B&&v(R,x,c.gu,D[0]!==void 0),R},c.prototype.aS=function(){return 0<this.cmp(0)},c.prototype.iT=function(){return 0>this.cmp(0)},c.prototype.kt=function(p){var f,g=this.Cd,b=(p=new c(p)).Cd;if(g!=b)return p.Cd=-b,this.oI(p);var x=this.c.slice(),$=this.e,E=p.c,O=p.e;if(!x[0]||!E[0])return E[0]?(p.Cd=-b,p):new c(x[0]?this:0);if(g=$-O){for((f=0>g)?(g=-g,$=x):(O=$,$=E),$.reverse(),b=g;b--;$.push(0));$.reverse()}else for($=((f=x.length<E.length)?x:E).length,g=b=0;b<$;b++)if(x[b]!=E[b]){f=x[b]<E[b];break}if(f&&($=x,x=E,E=$,p.Cd=-p.Cd),0<(b=($=E.length)-(f=x.length)))for(;b--;x[f++]=0);for(b=f;$>g;){if(x[--$]<E[$]){for(f=$;f&&!x[--f];x[f]=9);--x[f],x[$]+=10}x[$]-=E[$]}for(;x[--b]==0;x.pop());for(;x[0]==0;)x.shift(),--O;return x[0]||(p.Cd=1,x=[O=0]),p.c=x,p.e=O,p},c.prototype.oI=function(p){var f=this.Cd,g=(p=new c(p)).Cd;if(f!=g)return p.Cd=-g,this.kt(p);g=this.e;var b=this.c,x=p.e,$=p.c;if(!b[0]||!$[0])return $[0]?p:new c(b[0]?this:0*f);if(b=b.slice(),f=g-x){for(0<f?(x=g,g=$):(f=-f,g=b),g.reverse();f--;g.push(0));g.reverse()}for(0>b.length-$.length&&(g=$,$=b,b=g),f=$.length,g=0;f;)g=(b[--f]=b[f]+$[f]+g)/10|0,b[f]%=10;for(g&&(b.unshift(g),++x),f=b.length;b[--f]==0;b.pop());return p.c=b,p.e=x,p},c.prototype.pow=function(p){var f=this,g=new c(1),b=g,x=0>p;for((p!==~~p||-1e6>p||1e6<p)&&h("!pow!"),p=x?-p:p;1&p&&(b=b.nr(f)),p>>=1;)f=f.nr(f);return x?g.lm(b):b},c.prototype.round=function(p,f){var g=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&h("!round!"),v(g=new c(g),p,f??c.gu),g},c.prototype.sqrt=function(){var p=this.c,f=this.Cd,g=this.e,b=new c("0.5");if(!p[0])return new c(this);0>f&&h(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=p.join("")).length+g&1||(f+="0"),(p=new c(Math.sqrt(f).toString())).e=((g+1)/2|0)-(0>g||1&g)):p=new c(f.toString()),f=p.e+(c.tr+=4);do g=p,p=b.nr(g.oI(this.lm(g)));while(g.c.slice(0,f).join("")!==p.c.slice(0,f).join(""));return v(p,c.tr-=4,c.gu),p},c.prototype.nr=function(p){var f=this.c,g=(p=new c(p)).c,b=f.length,x=g.length,$=this.e,E=p.e;if(p.Cd=this.Cd==p.Cd?1:-1,!f[0]||!g[0])return new c(0*p.Cd);if(p.e=$+E,b<x){var O=f;f=g,g=O,E=b,b=x,x=E}for(O=Array(E=b+x);E--;O[E]=0);for($=x;$--;){for(x=0,E=b+$;E>$;)x=O[E]+g[$]*f[E-$-1]+x,O[E--]=x%10,x=x/10|0;O[E]=(O[E]+x)%10}for(x&&++p.e,O[0]||O.shift(),$=O.length;!O[--$];O.pop());return p.c=O,p},c.prototype.toString=function(){var p=this.e,f=this.c.join(""),g=f.length;if(p<=o||p>=r)f=f.charAt(0)+(1<g?"."+f.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;f="0"+f);f="0."+f}else if(0<p)if(++p>g)for(p-=g;p--;f+="0");else p<g&&(f=f.slice(0,p)+"."+f.slice(p));else 1<g&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Cd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&h("!toExp!"),k(this,p,1)},c.prototype.toFixed=function(p){var f=o,g=r;if(o=-(r=1/0),p==null)var b=this.toString();else p===~~p&&0<=p&&1e6>=p&&(b=k(this,this.e+p),0>this.Cd&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));return o=f,r=g,b||h("!toFix!"),b},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&h("!toPre!"),k(this,p-1,2))},c.tr=20,c.gu=1,c}();u.jp=l}(q||(q={})),function(u){var k=function(){function v(h){this.lf=h}return v.prototype.qr=function(h,o,r){var n=new u.h,l=new u.h,c=this.lf;r.Wd(h,o,function(p,f){return c.uc(2*p,n),c.uc(2*f,l),n.compare(l)})},v.prototype.bq=function(h){return this.lf.read(2*h+1)},v}();u.si=function(){function v(){}return v.cq=function(h){if(h.B())return!1;var o=h.K();return o==1736?h.He()!=0:o==1607?(o=[!1],v.nE(h,!0,o),o[0]):!(o!=197&&(!u.ba.zd(o)||h.wG()))},v.im=function(h){var o=h.K();if(o==1736)return o=new u.Ua(h.description),h.B()||h.ZC(o),o;if(o==1607)return v.nE(h,!1,null);if(o==197)return o=new u.Ua(h.description),h.B()||o.bd(h,!1),o;if(u.ba.zd(o)){if(o=new u.ee(h.description),!h.B()&&!h.wG()){var r=new u.Ta;h.Vo(r),o.add(r),h.Ro(r),o.add(r)}return o}if(u.ba.Tn(o))return null;throw u.i.O()},v.nE=function(h,o,r){r!=null&&(r[0]=!1);var n=null;if(o||(n=new u.ee(h.description)),!h.B()){var l=new u.ja(0);l.Jb(2*h.ea());for(var c=0,p=h.ea();c<p;c++)if(0<h.Ka(c)&&!h.Pn(c)){var f=h.Ca(c);l.add(f),f=h.Wc(c)-1,l.add(f)}if(0<l.size){p=new u.Zt,c=h.vb(0),p.sort(l,0,l.size,new k(c)),p=new u.h,c.uc(2*l.get(0),p),f=0;for(var g=1,b=new u.Ta,x=new u.h,$=1,E=l.size;$<E;$++)if(c.uc(2*l.get($),x),x.rb(p))l.get(f)>l.get($)?(l.set(f,2147483647),f=$):l.set($,2147483647),g++;else{if(!(1&g))l.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;p.N(x),f=$,g=1}if(!(1&g))l.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;if(!o)for(l.Wd(0,l.size,function(O,C){return O-C}),$=0,E=l.size;$<E&&l.get($)!=2147483647;$++)h.we(l.get($),b),n.add(b)}}return o?null:n},v}()}(q||(q={})),function(u){var k=function(){function v(){this.zf=new u.ja(0),this.As=new u.ja(0),this.zH=1,this.Gs=NaN}return v.prototype.sort=function(h,o,r,n){if(32>r-o)n.qr(o,r,h);else{var l=!0;try{for(var c=1/0,p=-1/0,f=o;f<r;f++){var g=n.bq(h.get(f));g<c&&(c=g),g>p&&(p=g)}if(this.reset(r-o,c,p,r-o)){for(f=o;f<r;f++){var b=h.get(f);g=n.bq(b);var x=this.uF(g);this.zf.set(x,this.zf.get(x)+1),this.As.write(f-o,b)}var $=this.zf.get(0);this.zf.set(0,0),f=1;for(var E=this.zf.size;f<E;f++){var O=this.zf.get(f);this.zf.set(f,$),$+=O}for(f=o;f<r;f++){b=this.As.read(f-o),g=n.bq(b),x=this.uF(g);var C=this.zf.get(x);h.set(C+o,b),this.zf.set(x,C+1)}l=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(l)n.qr(o,r,h);else{for(f=r=0,E=this.zf.size;f<E;f++)l=r,(r=this.zf.get(f))>l&&n.qr(o+l,o+r,h);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},v.prototype.reset=function(h,o,r,n){return!(2>h||r==o)&&(h=Math.min(v.cL,h),this.zf.Jb(h),this.zf.resize(h),this.zf.Yj(0,0,this.zf.size),this.zH=o,this.As.resize(n),this.Gs=(r-o)/(h-1),!0)},v.prototype.uF=function(h){return u.P.truncate((h-this.zH)/this.Gs)},v.cL=65536,v}();u.Zt=k}(q||(q={})),function(u){var k,v;(v=k||(k={}))[v.enum_line=1]="enum_line",v[v.enum_arc=2]="enum_arc",v[v.enum_dummy=4]="enum_dummy",v[v.enum_concave_dip=8]="enum_concave_dip",v[v.enum_connection=3]="enum_connection";var h=function(){function c(){}return c.Su=function(p,f,g,b,x,$){var E=new c;return E.Km=new u.h,E.Xm=new u.h,E.cw=new u.h,E.Km.N(p),E.Xm.N(f),E.cw.N(g),E.Eo=b,E.sh=x,E.uh=$,E},c.construct=function(p,f,g,b){var x=new c;return x.Km=new u.h,x.Xm=new u.h,x.cw=new u.h,x.Km.N(p),x.Xm.N(f),x.cw.Sc(),x.Eo=4,x.sh=g,x.uh=b,x},c}(),o=function(){function c(p,f,g,b,x,$){this.$v=null,this.za=0,this.zA=p,this.XH=this.VH=0,this.La=f,this.Oj=g,this.xk=b,this.Fq=x,this.Vb=$}return c.prototype.next=function(){for(var p=new u.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,p),this.za++,!p.B())break}var f=!1;if(this.$v==null&&(this.VH=p.Ng(),this.XH=p.kh(),this.$v=l.buffer(p,this.La,this.Oj,this.xk,this.Fq,this.Vb),f=!0),this.za<this.zA.I()){var g=new u.Ea;this.$v.copyTo(g)}else g=this.$v;if(!f){f=new u.Ed;var b=p.Ng()-this.VH;p=p.kh()-this.XH,f.ig(b,p),g.Pc(f)}return g},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),r=function(){function c(p,f){this.Xa=p,this.za=0,this.qq=f}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;if(this.za++,!p.Pn(f))for(var g=p.Oa(p.Wc(f)-1);this.za<p.ea();){var b=p.Oa(p.Ca(this.za));if(p.Pn(this.za)||b!=g)break;g=p.Oa(p.Wc(this.za)-1),this.za++}if(this.za-f==1)return this.Xa.fE(this.Xa.Y,f,this.qq);for((g=new u.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,f,!0),f+=1;f<this.za;f++)g.Fr(this.Xa.Y,f,0,p.tv(f),!1);return this.Xa.fE(g,0,this.qq)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),n=function(){function c(p){this.Xa=p,this.za=0}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;for(p.Kr(this.za),this.za++;this.za<p.ea()&&!(0<p.Kr(this.za));)this.za++;return f==0&&this.za==p.ea()?this.Xa.ly(p,0,p.ea()):this.Xa.ly(p,f,this.za)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),l=function(){function c(p){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=p,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return c.buffer=function(p,f,g,b,x,$){if(p==null||0>b)throw u.i.O();if(p.B())return new u.Ea(p.description);var E=new u.l;return p.yc(E),0<f&&E.X(f,f),($=new c($)).Oj=g,$.Y=p,$.ra=u.ua.Xd(g,E,!0),$.dt=u.ua.Xd(null,E,!0),$.La=f,$.ET=p.K(),0>=x&&(x=96),$.sb=Math.abs($.La),$.Mv=$.sb!=0?1/$.sb:0,isNaN(b)||b==0?b=1e-5*$.sb:b>.5*$.sb&&(b=.5*$.sb),12>x&&(x=12),(p=Math.abs(f)*(1-Math.cos(Math.PI/x)))>b?b=p:(p=Math.PI/Math.acos(1-b/Math.abs(f)))<x-1&&12>(x=u.P.truncate(p))&&(x=12,b=Math.abs(f)*(1-Math.cos(Math.PI/x))),$.xk=b,$.Fq=x,$.oA=Math.min($.dt,.25*b),$.gE()},c.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var p=this.lE();p=u.P.truncate((p+3)/4);var f=.5*Math.PI/p;this.jA=f;for(var g=0;g<4*p;g++)this.Jd.push(null);var b=Math.cos(f);f=Math.sin(f);var x=u.h.construct(0,1);for(g=0;g<p;g++)this.Jd[g+0*p]=u.h.construct(x.y,-x.x),this.Jd[g+1*p]=u.h.construct(-x.x,-x.y),this.Jd[g+2*p]=u.h.construct(-x.y,x.x),this.Jd[g+3*p]=x,(x=u.h.construct(x.x,x.y)).Ct(b,f)},c.prototype.gE=function(){var p=this.Y.K();if(u.ba.zd(p))return(p=new u.Ua(this.Y.description)).pc(this.Y,!0),this.Y=p,this.gE();if(this.La<=this.ra){if(!u.ba.PS(p))return new u.Ea(this.Y.description);if(0>=this.La&&(p=new u.l,this.Y.A(p),p.S()<=2*-this.La||p.da()<=2*this.La))return new u.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw u.i.Ra()}},c.prototype.MN=function(){if(this.zG(this.Y)){var p=new u.Ta;this.Y.we(0,p);var f=new u.l;return this.Y.A(f),p.Db(f.tf()),this.Iu(p)}return this.Y=this.RV(this.Y),p=new r(this,this.qq),u.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.LN=function(){if(this.La==0)return this.Y;var p=u.$l.local();if(this.ev(),this.Y=p.W(this.Y,null,!1,this.Vb),0>this.La){var f=this.Y;return f=this.ly(f,0,f.ea()),p.W(f,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(p=new u.Ta,this.Y.we(0,p),f=new u.l,this.Y.A(f),p.Db(f.tf()),this.Iu(p)):(p=new n(this),u.Ih.local().W(p,this.Oj,this.Vb).next())},c.prototype.ly=function(p,f,g){for(var b=new u.Ea(p.description);f<g;f++)if(!(1>p.Ka(f))){var x=p.Kr(f),$=new u.l;if(p.Tj(f,$),0<this.La){if(0<x)if(this.AG(p,f))x=new u.Ta,p.we(p.Ca(f),x),x.Db($.tf()),this.Au(b,x);else{var E=x=new u.Ua(p.description);E=u.au.EG(this.Y,f)||this.Bn(this.Y,f,E,!0,1)==2?this.eE(p,f):this.An(x),b.add(E,!1)}else if(!($.S()+this.ra<=2*this.sb||$.da()+this.ra<=2*this.sb||(E=x=new u.Ua(p.description),this.Bn(this.Y,f,E,!0,1),x.B()))){var O=new u.l;for(O.L($),O.X(this.sb,this.sb),E.vp(O),$=1,x=(E=this.An(x)).ea();$<x;$++)b.addPath(E,$,!0)}}else if(0<x){if(!($.S()+this.ra<=2*this.sb||$.da()+this.ra<=2*this.sb||(E=x=new u.Ua(p.description),this.Bn(this.Y,f,E,!0,-1),x.B())))for(O=new u.l,E.yc(O),O.X(this.sb,this.sb),E.vp(O),$=1,x=(E=this.An(x)).ea();$<x;$++)b.addPath(E,$,!0)}else for(E=x=new u.Ua(p.description),this.Bn(this.Y,f,E,!0,-1),$=0,x=(E=this.An(x)).ea();$<x;$++)b.addPath(E,$,!0)}if(0<this.La)return 1<b.ea()?b=this.An(b):c.kx(b);if(p=new u.l,b.yc(p),b.B())return c.kx(b);for(p.X(this.sb,this.sb),b.vp(p),b=this.An(b),p=new u.Ea(b.description),$=1,x=b.ea();$<x;$++)p.addPath(b,$,!1);return c.kx(p)},c.prototype.KN=function(){return this.Iu(this.Y)},c.prototype.Iu=function(p){var f=new u.Ea(this.Y.description);return this.Au(f,p),this.oX(f)},c.prototype.JN=function(){var p=new o(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return u.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.GN=function(){var p=new u.Ea(this.Y.description);if(0>=this.La){if(this.La==0)p.bd(this.Y,!1);else{var f=new u.Hh;this.Y.dn(f),f.X(this.La,this.La),p.bd(f,!1)}return p}return p.bd(this.Y,!1),this.Y=p,this.eE(p,0)},c.prototype.eE=function(p,f){this.ev();var g=new u.Ea(p.description),b=new u.h,x=new u.h,$=new u.h,E=new u.h,O=new u.h,C=new u.h,N=new u.h,D=new u.h,z=p.Ka(f),R=p.Ca(f),G=0;for(f=p.Ka(f);G<f;G++){if(p.D(R+G,x),p.D(R+(G+1)%z,E),p.D(R+(G+2)%z,C),N.vc(E,x),N.length()==0||(N.Jv(),N.normalize(),N.scale(this.sb),b.add(N,x),$.add(N,E),G==0?g.Nt(b):g.Ei(b),g.Ei($),D.vc(C,E),D.length()==0))throw u.i.Ra();D.Jv(),D.normalize(),D.scale(this.sb),O.add(D,E),this.BD(g,E,$,O,!1)}return c.kx(g)},c.prototype.fE=function(p,f,g){if(this.ev(),1>p.Ka(f))return null;if(this.AG(p,f)&&0<this.La){g=new u.Ta,p.we(p.Ca(f),g);var b=new u.l;return p.Tj(f,b),g.Db(b.tf()),this.Iu(g)}if(b=new u.Ua(p.description),p.Pn(f))this.Bn(p,f,b,g,1),this.Bn(p,f,b,g,-1);else{var x=new u.Ua(p.description);x.addPath(p,f,!1),x.Fr(p,f,0,p.tv(f),!1),this.Bn(x,0,b,g,1)}return this.An(b)},c.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw u.i.hu("user_canceled")},c.prototype.An=function(p){return u.Hg.Ok(p,this.dt,!0,!0,this.Vb)},c.prototype.lE=function(){if(this.xk==0)return this.Fq;var p=1-this.xk*Math.abs(this.Mv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Fq&&(p=this.Fq),u.P.truncate(p)},c.prototype.BD=function(p,f,g,b,x){this.ev();var $=new u.h;$.vc(g,f),$.scale(this.Mv);var E=new u.h;E.vc(b,f),E.scale(this.Mv),0>($=Math.atan2($.y,$.x)/this.jA)&&($=this.Jd.length+$),$=this.Jd.length-$,0>(E=Math.atan2(E.y,E.x)/this.jA)&&(E=this.Jd.length+E),(E=this.Jd.length-E)<$&&(E+=this.Jd.length);var O=u.P.truncate(E);E=u.P.truncate(Math.ceil($)),($=new u.h).N(this.Jd[E%this.Jd.length]),$.Dt(this.sb,f);var C=10*this.ra;for($.sub(g),$.length()<C&&(E+=1),$.N(this.Jd[O%this.Jd.length]),$.Dt(this.sb,f),$.sub(b),$.length()<C&&--O,g=O-E,g++,O=0,E%=this.Jd.length;O<g;O++,E=(E+1)%this.Jd.length)$.N(this.Jd[E]),$.Dt(this.sb,f),p.Ei($),this.Zq();x&&p.Ei(b)},c.prototype.Bn=function(p,f,g,b,x){var $=new u.hd,E=$.hN(p,f);if($.Ip(this.oA,!1,!1),2>$.I(E))return 0>x||(x=p,$=new u.Ta,x.we(x.Ca(f),$),this.Au(g,$)),1;var O=$.Oa($.Ya($.Ob(E))),C=new u.Ed;if(C.ig(-O.x,-O.y),$.Pc(C),b&&(this.oQ($,E,x),2>$.I(E)))return 0>x||(x=p,$=new u.Ta,x.we(x.Ca(f),$),this.Au(g,$)),1;this.$d.length=0;var N=$.Ob(E);f=$.Ya(N);var D=x==1?$.Na(f):$.V(f);p=x==1?$.V(f):$.Na(f);var z=!0;b=new u.h,E=new u.h;var R=new u.h,G=new u.h,H=new u.h,B=new u.h,tt=new u.h,X=new u.h,rt=new u.h,ct=new u.h,ht=this.sb;N=$.Ka(N);for(var Tt=0;Tt<N;Tt++)$.D(p,E),z&&($.D(f,b),$.D(D,R),X.vc(b,R),X.normalize(),ct.HG(X),ct.scale(ht),G.add(ct,b)),tt.vc(E,b),tt.normalize(),rt.HG(tt),rt.scale(ht),H.add(b,rt),D=X.yi(tt),z=X.Sh(tt),0>D||0>z&&D==0?this.$d.push(h.Su(G,H,b,2,this.$d.length+1,this.$d.length-1)):G.rb(H)||(this.$d.push(h.construct(G,b,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(h.construct(b,H,this.$d.length+1,this.$d.length-1,"dummy"))),B.add(E,rt),this.$d.push(h.Su(H,B,b,1,this.$d.length+1,this.$d.length-1)),G.N(B),ct.N(rt),R.N(b),b.N(E),X.N(tt),D=f,f=p,z=!1,p=x==1?$.V(f):$.Na(f);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(g),C.ig(O.x,O.y),g.TD(C,g.ea()-1),1},c.prototype.TV=function(p){for(var f=this.uO(),g=!0,b=f+1,x=f;b!=f;x=b){var $=this.$d[x];b=$.sh!=-1?$.sh:(x+1)%this.$d.length,$.Eo!=0&&(g&&p.Nt($.Km),$.Eo==2?this.BD(p,$.cw,$.Km,$.Xm,!0):p.Ei($.Xm),g=!1)}},c.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var p=0,f=0,g=this.$d.length;f<g;){var b=this.$d[f];if(3&b.Eo){p=f;break}f=b.sh}for(g=p+1,f=p;g!=p;f=g){g=(b=this.$d[f]).sh;for(var x=1,$=null;g!=f&&!(3&($=this.$d[g]).Eo);)g=$.sh,x++;x!=1&&(b.Eo&$.Eo)==1&&(this.Ns==null&&(this.Ns=new u.zb,this.nw=new u.zb),this.Ns.Ec(b.Km),this.Ns.Rc(b.Xm),this.nw.Ec($.Km),this.nw.Rc($.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(b.Xm.N(this.Ms[0]),$.Km.N(this.Ms[0]),b.sh=g,$.uh=f))}return p},c.prototype.Hv=function(p,f,g){var b=new u.h;if(b.vc(g,p),g=b.length(),0<(g=this.sb*this.sb-g*g*.25)){g=Math.sqrt(g),b.normalize(),b.cr();var x=new u.h;if(x.vc(f,p),x.Sh(b)+g>=this.sb)return!0}return!1},c.prototype.oQ=function(p,f,g){for(var b=0;1>b;b++){var x=!1,$=p.Ob(f),E=p.Ka($);if(E==0)break;var O=E;if(3>E)break;!p.ec($)&&(O=E-1),$=p.Ya($),E=0<g?p.Na($):p.V($);for(var C=0<g?p.V($):p.Na($),N=E,D=!0,z=new u.h,R=new u.h,G=new u.h,H=new u.h,B=new u.h,tt=u.h.construct(0,0),X=new u.h,rt=new u.h,ct=new u.h,ht=new u.h,Tt=this.sb,dt=0,Ut=0;Ut<O&&(p.D(C,R),D&&(p.D($,z),p.D(E,G),N=E),rt.vc(z,G),rt.normalize(),X.vc(R,z),X.normalize(),N!=C);){var jt=rt.yi(X),_t=rt.Sh(X),Le=!0;if(0>jt||0>_t&&jt==0||!this.Hv(G,z,R)||(tt.N(R),Le=!1,++dt,x=!0),Le){if(0<dt)for(;(jt=0<g?p.Na(N):p.V(N))!=$;){if(p.D(jt,H),!this.Hv(H,G,tt)){jt!=C&&this.Hv(H,G,R)&&this.Hv(H,z,R)&&(G.N(H),N=jt,Le=!1,++dt);break}G.N(H),N=jt,Le=!1,++dt}if(!Le)continue;if(0<dt){for(N=0<g?p.Na(E):p.V(E),D=1;D<dt;D++)Le=0<g?p.Na(N):p.V(N),p.qd(N,!0),N=Le;ct.vc(z,G),dt=Tt*Tt-(dt=ct.length())*dt*.25,Tt-(dt=Math.sqrt(dt))>.5*this.xk?(B.add(G,z),B.scale(.5),ct.normalize(),ct.cr(),ht.N(ct),ht.scale(Tt-dt),B.add(ht),p.mf(E,B)):p.qd(E,!0),dt=0}G.N(z),N=$}z.N(R),E=$,$=C,C=0<g?p.V($):p.Na($),Ut++,D=!1}if(0<dt){for(N=0<g?p.Na(E):p.V(E),D=1;D<dt;D++)Le=0<g?p.Na(N):p.V(N),p.qd(N,!0),N=Le;B.add(G,z),B.scale(.5),ct.vc(z,G),dt=Tt*Tt-(dt=ct.length())*dt*.25,dt=Math.sqrt(dt),ct.normalize(),ct.cr(),ht.N(ct),ht.scale(Tt-dt),B.add(ht),p.mf(E,B)}if(p.Ip(this.oA,!1,!1),!x)break}},c.prototype.AG=function(p,f){if(p.Ka(f)==1)return!0;var g=new u.l;return p.Tj(f,g),Math.max(g.S(),g.da())<.5*this.xk},c.prototype.zG=function(p){var f=new u.l;return p.A(f),Math.max(f.S(),f.da())<.5*this.xk},c.prototype.RV=function(p){for(var f=0,g=0,b=(p=u.zC.local().W(p,.25*this.xk,!1,this.Vb)).ea();g<b;g++)f=Math.max(p.Ka(g),f);return 32>f?(this.qq=!1,p):(this.qq=!0,u.Hg.Ok(p,this.dt,!1,!0,this.Vb))},c.prototype.Au=function(p,f){if(f=f.D(),this.Jd!=null&&this.Jd.length!==0){var g=new u.h;g.N(this.Jd[0]),g.Dt(this.sb,f),p.Nt(g);for(var b=1,x=this.Jd.length;b<x;b++)g.N(this.Jd[b]),g.Dt(this.sb,f),p.Ei(g)}else{b=this.lE(),g=u.P.truncate((b+3)/4),b=.5*Math.PI/g,x=Math.cos(b);for(var $=Math.sin(b),E=new u.h,O=3;0<=O;O--){switch(E.na(0,this.sb),O){case 0:for(b=0;b<g;b++)p.Aj(E.x+f.x,E.y+f.y),E.Ct(x,$);break;case 1:for(b=0;b<g;b++)p.Aj(-E.y+f.x,E.x+f.y),E.Ct(x,$);break;case 2:for(b=0;b<g;b++)p.Aj(-E.x+f.x,-E.y+f.y),E.Ct(x,$);break;default:for(p.rx(E.y+f.x,-E.x+f.y),b=1;b<g;b++)E.Ct(x,$),p.Aj(E.y+f.x,-E.x+f.y)}this.Zq()}}},c.kx=function(p){return p.Eh(1,0),p},c.prototype.oX=function(p){return p.Eh(2,this.ra),p.hm(),p},c}();u.CK=l}(q||(q={})),function(u){var k=function(){function v(h){this.Da=h,this.g=new u.hd,this.ed=new u.ja(0)}return v.prototype.Nh=function(h,o,r){switch(o){case 0:if(h.v<r&&h.C<=r)break;return h.v>=r?1:-1;case 1:if(h.G<r&&h.H<=r)break;return h.G>=r?1:-1;case 2:if(h.v>=r&&h.C>r)break;return h.C<=r?1:-1;case 3:if(!(h.G>=r&&h.H>r))return h.H<=r?1:-1}return 0},v.prototype.vy=function(h,o){return h.K()==1736?this.xy(h,o):this.yy(h)},v.prototype.xy=function(h,o){if(this.Da.S()==0||this.Da.da()==0)return h.Ja();var r=new u.l;h.yc(r),this.Y=this.g.Ib(h);var n=new u.l,l=new u.l,c=new u.h,p=new u.h,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0];new u.jg;var b=new u.zb,x=new u.ja(0);x.Jb(Math.min(100,h.I()));for(var $=!1,E=0;!$&&4>E;E++){var O=!1,C=(1&E)!=0,N=0;switch(E){case 0:N=this.Da.v,O=r.v<=N&&r.C>=N;break;case 1:N=this.Da.G,O=r.G<=N&&r.H>=N;break;case 2:N=this.Da.C,O=r.v<=N&&r.C>=N;break;case 3:N=this.Da.H,O=r.G<=N&&r.H>=N}if(O)for($=!0,O=this.g.Ob(this.Y);O!=-1;){var D=-1,z=-1,R=this.g.Ya(O),G=R;do{var H=this.g.cc(G);H==null&&(H=b,this.g.D(G,c),H.Ec(c),this.g.D(this.g.V(G),p),H.Rc(p)),H.A(n);var B=this.Nh(n,E,N),tt=0,X=-1;if(B==-1){tt=0<(H=H.fq(C,N,f,g))?this.g.Wl(G,g,H):0,tt+=1;var rt=G,ct=this.g.V(rt);for(H=0;H<tt;H++){if(this.g.D(rt,c),this.g.D(ct,p),(X=this.g.cc(rt))==null&&((X=b).Ec(c),X.Rc(p)),X.A(l),(X=this.Nh(l,E,N))==-1){if(C)(X=Math.abs(c.y-N))<(ht=Math.abs(p.y-N))?(c.y=N,this.g.mf(rt,c)):(p.y=N,this.g.mf(ct,p));else{X=Math.abs(c.x-N);var ht=Math.abs(p.x-N);X<ht?(c.x=N,this.g.mf(rt,c)):(p.x=N,this.g.mf(ct,p))}(X=this.g.cc(rt))==null&&((X=b).Ec(c),X.Rc(p)),X.A(l),X=this.Nh(l,E,N)}ht=D,D=X,z==-1&&(z=D),ht==0&&D==1||ht==1&&D==0||ht!=0||D!=0||x.add(rt),D==1&&($=!1),X=rt=ct,ct=this.g.V(ct)}}tt==0&&(ht=D,D=B,z==-1&&(z=D),ht==0&&D==1||ht==1&&D==0||ht!=0||D!=0||x.add(G),D==1&&($=!1),X=this.g.V(G)),G=X}while(G!=R);for(z==0&&D==0&&x.add(R),H=0,D=x.size;H<D;H++)z=x.get(H),this.g.qd(z,!1);x.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return $?h.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.yy=function(h){var o=new u.l,r=new u.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new u.jg,p=h,f=new u.l;h.yc(f);for(var g=0;4>g;g++){var b=!1,x=(1&g)!=0,$=0;switch(g){case 0:$=this.Da.v,b=f.v<=$&&f.C>=$;break;case 1:$=this.Da.G,b=f.G<=$&&f.H>=$;break;case 2:$=this.Da.C,b=f.v<=$&&f.C>=$;break;case 3:$=this.Da.H,b=f.G<=$&&f.H>=$}if(b){b=p,p=h.Ja(),(b=b.Ha()).aj();for(var E,O=new u.h;b.ab();)for(var C,N=!0;b.Ia();){var D=b.ia();D.A(o);var z=this.Nh(o,g,$);if(z==-1){if(0<(z=D.fq(x,$,n,l))){var R=0;E=D.bc();for(var G=0;G<=z;G++)if(R!=(C=G<z?l[G]:1)){D.dh(R,C,c);var H=c.get();H.Ec(E),G<z&&(x?(O.x=n[G],O.y=$):(O.x=$,O.y=n[G]),H.Rc(O)),H.A(r);var B=this.Nh(r,g,$);if(B==-1){if(E=H.bc(),R=H.xc(),x)(B=Math.abs(E.y-$))<(tt=Math.abs(R.y-$))?(E.y=$,H.Ec(E)):(R.y=$,H.Rc(R));else{B=Math.abs(E.x-$);var tt=Math.abs(R.x-$);B<tt?(E.x=$,H.Ec(E)):(R.x=$,H.Rc(R))}H.A(r),B=this.Nh(r,g,$)}E=H.xc(),R=C,(C=B)==1?(p.pc(H,N),N=!1):N=!0}}}else(C=z)==1?(p.pc(D,N),N=!1):N=!0}}}return p},v.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var h=new u.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,r=this.g.V(r))this.g.D(r,h),(this.Da.v==h.x||this.Da.C==h.x||this.Da.G==h.y||this.Da.H==h.y)&&(this.g.Sa(r,this.li,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(h){for(var o=new u.h,r=new u.h,n=u.P.mg(2048,0),l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l)){var c=this.g.Ya(l),p=c;do{var f=this.g.V(p);this.g.D(p,o);var g=-1;if(o.x==this.Da.v?(this.g.D(f,r),r.x==this.Da.v&&(g=1)):o.x==this.Da.C&&(this.g.D(f,r),r.x==this.Da.C&&(g=1)),o.y==this.Da.G?(this.g.D(f,r),r.y==this.Da.G&&(g=0)):o.y==this.Da.H&&(this.g.D(f,r),r.y==this.Da.H&&(g=0)),g!=-1&&(g=u.h.ub(o,r),!(1>=(g=u.P.truncate(Math.min(Math.ceil(g/h),2048)))))){for(var b=1;b<g;b++)n[b-1]=1*b/g;this.g.Wl(p,n,g-1)}p=f}while(p!=c)}},v.prototype.Xl=function(h,o){var r=this.g.Hd(),n=new u.h,l=new u.ja(0);l.Jb(100);for(var c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,g=this.g.Ka(c);f<g;f++){var b=this.g.V(p);this.g.D(p,n),(h?n.y==o:n.x==o)&&(this.g.D(b,n),(h?n.y==o:n.x==o)&&(this.g.Qa(p,r)!=1&&(l.add(p),this.g.Sa(p,r,1)),this.g.Qa(b,r)!=1&&(l.add(b),this.g.Sa(b,r,1)))),p=b}if(this.g.Ud(r),!(3>l.size)){var x=this;l.Wd(0,l.size,function(B,tt){return x.Oh(B,tt)}),r=new u.h,c=new u.h,p=new u.h,c.Sc();var $=-1;f=new u.ja(0),g=new u.ja(0),b=this.g.Hd();for(var E=this.g.Hd(),O=0,C=l.size;O<C;O++){var N=l.get(O);if(this.g.D(N,n),!n.rb(c)){if($!=-1){for(var D=$;D<O;D++){$=l.get(D);var z=this.g.V($);N=this.g.Na($);var R=!1;0>this.Oh($,z)&&(this.g.D(z,r),h?r.y==o:r.x==o)&&(f.add($),R=!0,this.g.Sa($,E,1)),0>this.Oh($,N)&&(this.g.D(N,r),h?r.y==o:r.x==o)&&(R||f.add($),this.g.Sa($,b,1))}for(D=0,R=f.size;D<R;D++){if($=f.get(D),N=this.g.Qa($,b),z=this.g.Qa($,E),N==1){N=this.g.Na($),this.g.D(N,p);var G=[0];if(G[0]=0,!p.rb(n)){var H=u.h.ub(c,p);G[0]=u.h.ub(p,n)/H,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(N,G,1),N=this.g.Na($),this.g.mf(N,n),g.add(N),this.g.Sa(N,b,1),this.g.Sa(N,E,-1)}}z==1&&(z=this.g.V($),this.g.D(z,p),(G=[0])[0]=0,p.rb(n)||(H=u.h.ub(c,p),G[0]=u.h.ub(c,n)/H,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl($,G,1),N=this.g.V($),this.g.mf(N,n),g.add(N),this.g.Sa(N,b,-1),this.g.Sa(N,E,1)))}$=f,f=g,(g=$).clear(!1)}$=O,c.N(n)}}this.g.Ud(b),this.g.Ud(E)}},v.prototype.Pl=function(h,o){var r=new u.h,n=new u.ja(0);n.Jb(100);for(var l=this.g.Hd(),c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var g=this.g.V(f);this.g.D(f,r),(h?r.y==o:r.x==o)&&(this.g.D(g,r),(h?r.y==o:r.x==o)&&(this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(g,l)!=-2&&(n.add(g),this.g.Sa(g,l,-2))))}}if(n.size!=0){var b=this;for(n.Wd(0,n.size,function(tt,X){return b.Oh(tt,X)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Sa(x,l,c)}f=new u.h,(g=new u.h).Sc();var $=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.rb(g))){if($!=-1)for(;;){x=!1;for(var E=1<c-$?c-1:c,O=$;O<E;O++){var C=n.get(O);if(C!=-1){var N=-1,D=this.g.V(C);0>this.Oh(C,D)&&(this.g.D(D,f),h?f.y==o:f.x==o)&&(N=D),D=-1;var z=this.g.Na(C);if(0>this.Oh(C,z)&&(this.g.D(z,f),h?f.y==o:f.x==o)&&(D=z),N!=-1&&D!=-1)this.Mh(C,n,l),this.g.qd(C,!1),this.Mh(N,n,l),this.g.qd(N,!1),x=!0;else if(N!=-1||D!=-1){for(z=O+1;z<c;z++){var R=n.get(z);if(R!=-1){var G=this.g.V(R),H=-1;0>this.Oh(R,G)&&(this.g.D(G,f),h?f.y==o:f.x==o)&&(H=G),G=this.g.Na(R);var B=-1;if(0>this.Oh(R,G)&&(this.g.D(G,f),h?f.y==o:f.x==o)&&(B=G),H!=-1&&B!=-1){this.Mh(R,n,l),this.g.qd(R,!1),this.Mh(H,n,l),this.g.qd(H,!1),x=!0;break}if(N!=-1&&B!=-1){this.At(n,C,N,R,B,l),x=!0;break}if(D!=-1&&H!=-1){this.At(n,R,H,C,D,l),x=!0;break}}}if(x)break}}}if(!x)break}$=c,g.N(r)}}this.g.Ud(l)},v.prototype.Mh=function(h,o,r){r=this.g.Qa(h,r),o.set(r,-1),r=this.g.Qa(h,this.li),this.ed.set(r,-1),(o=this.g.cd(h))!=-1&&this.g.Ya(o)==h&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},v.prototype.At=function(h,o,r,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,l),this.g.Cc(l,r),this.Mh(n,h,c),this.g.oi(n,!1),this.Mh(l,h,c),this.g.oi(l,!0)},v.prototype.Oy=function(){for(var h=0,o=this.ed.size;h<o;h++){var r=this.ed.get(h);r!=-1&&this.g.cj(r,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.qd(p,!1),f==2&&(r=this.g.Qa(p,this.li),this.ed.set(r,-1),this.g.qd(p,!1)),f=c,c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)):(this.g.fp(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c))}}for(h=0,o=this.ed.size;h<o;h++)if((r=this.ed.get(h))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.qd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.li))&&this.ed.set(r,-1),this.g.qd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),h=0,o=this.g.md;o!=-1;o=this.g.ve(o))h+=this.g.I(o);this.g.XB(h)},v.wy=function(h,o,r){return new v(o).vy(h,r)},v.clip=function(h,o,r,n){if(h.B())return h;if(o.B())return h.Ja();if((r=h.K())==33)return n=h.D(),o.contains(n)?h:h.Ja();if(r==197)return n=new u.l,h.A(n),n.Fa(o)?(o=new u.Hh,h.copyTo(o),o.Zo(n),o):h.Ja();var l=new u.l;if(h.yc(l),o.contains(l))return h;if(!o.isIntersecting(l))return h.Ja();if((l=h.Cb)!=null&&(l=l.Hk)!=null){if((l=l.To(o))==1){if(r!=1736)throw u.i.Ra();return(h=new u.Ea(h.description)).vp(o),h}if(l==0)return h.Ja()}switch(r){case 550:r=null,l=h.I();for(var c=h.vb(0),p=0,f=0;f<l;f++)n=new u.h,c.uc(2*f,n),o.contains(n)||(p==0&&(r=h.Ja()),p<f&&r.Gd(h,p,f),p=f+1);return 0<p&&r.Gd(h,p,l),p==0?h:r;case 1736:case 1607:return v.wy(h,o,n);default:throw u.i.Ra()}},v.prototype.Oh=function(h,o){var r=new u.h;return this.g.D(h,r),h=new u.h,this.g.D(o,h),r.compare(h)},v}();u.Vd=k}(q||(q={})),function(u){var k=function(){function v(h,o){this.Da=h,this.g=new u.hd,this.ed=new u.ja(0),this.od=o}return v.prototype.Nh=function(h,o,r){switch(o){case 0:if(h.v<r&&h.C<=r)break;return h.v>=r?1:-1;case 1:if(h.G<r&&h.H<=r)break;return h.G>=r?1:-1;case 2:if(h.v>=r&&h.C>r)break;return h.C<=r?1:-1;case 3:if(!(h.G>=r&&h.H>r))return h.H<=r?1:-1}return 0},v.prototype.vy=function(h,o){return h.K()==1736?this.xy(h,o):this.yy(h)},v.prototype.xy=function(h,o){if(this.Da.S()==0||this.Da.da()==0)return h.Ja();var r=new u.l;h.yc(r),this.Y=this.g.Ib(h);var n=new u.l,l=new u.l,c=new u.h,p=new u.h,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0],b=new u.zb,x=new u.ja(0);x.Jb(256);for(var $=!1,E=0;!$&&4>E;E++){var O=!1,C=(1&E)!=0,N=0;switch(E){case 0:N=this.Da.v,O=r.v<=N&&r.C>=N;break;case 1:N=this.Da.G,O=r.G<=N&&r.H>=N;break;case 2:N=this.Da.C,O=r.v<=N&&r.C>=N;break;case 3:N=this.Da.H,O=r.G<=N&&r.H>=N}if(O)for($=!0,O=this.g.Ob(this.Y);O!=-1;){var D=!0,z=-1,R=-1,G=this.g.Ya(O),H=G;do{var B=this.g.cc(H);B==null&&(B=b,this.g.D(H,c),B.Ec(c),this.g.D(this.g.V(H),p),B.Rc(p)),B.A(n);var tt=this.Nh(n,E,N),X=0,rt=-1;if(tt==-1){X=0<(B=B.fq(C,N,f,g))?this.g.HX(H,g,B):0,X+=1;var ct=H,ht=this.g.V(ct);for(B=0;B<X;B++){if(this.g.D(ct,c),this.g.D(ht,p),(rt=this.g.cc(ct))==null&&((rt=b).Ec(c),rt.Rc(p)),rt.A(l),(rt=this.Nh(l,E,N))==-1){if(C)(rt=Math.abs(c.y-N))<(Tt=Math.abs(p.y-N))?(c.y=N,this.g.mf(ct,c)):(p.y=N,this.g.mf(ht,p));else{rt=Math.abs(c.x-N);var Tt=Math.abs(p.x-N);rt<Tt?(c.x=N,this.g.mf(ct,c)):(p.x=N,this.g.mf(ht,p))}(rt=this.g.cc(ct))==null&&((rt=b).Ec(c),rt.Rc(p)),rt.A(l),rt=this.Nh(l,E,N)}Tt=z,z=rt,R==-1&&(R=z),Tt==0&&z==1||Tt==1&&z==0||Tt!=0||z!=0||x.add(ct),z==1&&(D=$=!1),rt=ct=ht,ht=this.g.V(ht)}}if(X==0&&(Tt=z,z=tt,R==-1&&(R=z),Tt==0&&z==1||Tt==1&&z==0||Tt!=0||z!=0||x.add(H),z==1&&(D=$=!1),rt=this.g.V(H)),H=rt,256<=x.size){for(B=1,tt=x.size-1;B<tt;B++)X=x.get(B),this.g.qd(X,!1);x.set(1,x.Gc()),x.Dh(2)}}while(H!=G);if(!D)for(R==0&&z==0&&x.add(G),B=0,tt=x.size;B<tt;B++)X=x.get(B),this.g.qd(X,!1);x.clear(!1),O=D||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return $?h.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.yy=function(h){var o=new u.l,r=new u.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new u.jg,p=h,f=new u.l;h.yc(f);for(var g=new u.h,b=new u.h,x=null,$=null,E=0;4>E;E++){var O=!1,C=(1&E)!=0,N=0;switch(E){case 0:N=this.Da.v,O=f.v<=N&&f.C>=N;break;case 1:N=this.Da.G,O=f.G<=N&&f.H>=N;break;case 2:N=this.Da.C,O=f.v<=N&&f.C>=N;break;case 3:N=this.Da.H,O=f.G<=N&&f.H>=N}if(O)for(O=p,p=h.Ja(),(O=O.Ha()).aj();O.ab();)for(var D,z=!0;O.Ia();){var R=O.ia();R.A(o);var G=this.Nh(o,E,N);if(G==-1){if(0<(G=R.fq(C,N,n,l))){var H=0;R.$p(g);for(var B=0;B<=G;B++)if(H!=(D=B<G?l[B]:1)){R.dh(H,D,c);var tt=c.get();tt.Ec(g),B<G&&(C?(b.x=n[B],b.y=N):(b.x=N,b.y=n[B]),tt.Rc(b)),tt.A(r);var X=this.Nh(r,E,N);X==-1&&(x==null&&(x=new u.h),$==null&&($=new u.h),tt.$p(x),tt.Vr($),C?(H=Math.abs(x.y-N))<(X=Math.abs($.y-N))?(x.y=N,tt.Ec(x)):($.y=N,tt.Rc($)):(H=Math.abs(x.x-N))<(X=Math.abs($.x-N))?(x.x=N,tt.Ec(x)):($.x=N,tt.Rc($)),tt.A(r),X=this.Nh(r,E,N)),tt.Vr(g),H=D,(D=X)==1?(p.pc(tt,z),z=!1):z=!0}}}else(D=G)==1?(p.pc(R,z),z=!1):z=!0}}return p},v.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var h=new u.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,r=this.g.V(r))this.g.D(r,h),(this.Da.v==h.x||this.Da.C==h.x||this.Da.G==h.y||this.Da.H==h.y)&&(this.g.Sa(r,this.li,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(h){for(var o=new u.h,r=new u.h,n=null,l=null,c=u.P.mg(2048,0),p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p)){var f=this.g.Ya(p),g=f;do{var b=this.g.V(g);this.g.D(g,o);var x=-1;if(o.x==this.Da.v?(this.g.D(b,r),r.x==this.Da.v&&(x=1)):o.x==this.Da.C&&(this.g.D(b,r),r.x==this.Da.C&&(x=1)),o.y==this.Da.G?(this.g.D(b,r),r.y==this.Da.G&&(x=0)):o.y==this.Da.H&&(this.g.D(b,r),r.y==this.Da.H&&(x=0)),x!=-1){if(n==null&&(n=new u.h),l==null&&(l=new u.h),n.N(o),l.na(0,0),x==0){var $=o.x-this.Da.v;l.x=u.mc.sign(r.x-o.x),n.x=h*u.mc.En(Math.floor(Math.abs($/h)),$)+this.Da.v,0>n.x&&(n.x+=h)}else $=o.y-this.Da.G,l.y=u.mc.sign(r.y-o.y),n.y=h*u.mc.En(Math.floor(Math.abs($/h)),$)+this.Da.G,0>n.y&&(n.y+=h);$=x!=0?r.y-o.y:r.x-o.x;var E=Math.abs($);if(65536<E/h)throw u.i.ga("internal error");if(0<E){E=u.P.truncate(E/h)+2,c.length<E&&(c=u.P.mg(E));for(var O=E=0;;O++){var C=new u.h;if(C.x=n.x+l.x*O*h,C.y=n.y+l.y*O*h,1<=(C=(x!=0?C.y-o.y:C.x-o.x)/$))break;0>=C||(c[E]=C,E++)}E!=0&&this.g.Wl(g,c,E)}}g=b}while(g!=f)}},v.prototype.Xl=function(h,o){for(var r=-1,n=new u.h,l=null,c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,g=this.g.Ka(c);f<g;f++){var b=this.g.V(p);this.g.D(p,n),(h?n.y==o:n.x==o)&&(this.g.D(b,n),(h?n.y==o:n.x==o)&&(r==-1&&(r=this.g.Hd()),l==null&&(l=new u.ja(0)).Jb(100),this.g.Qa(p,r)!=1&&(l.add(p),this.g.Sa(p,r,1)),this.g.Qa(b,r)!=1&&(l.add(b),this.g.Sa(b,r,1)))),p=b}if(r!=-1&&this.g.Ud(r),!(l==null||3>l.size)){var x=this;l.Wd(0,l.size,function(B,tt){return x.Oh(B,tt)}),r=new u.h,c=new u.h,p=new u.h,c.Sc();var $=-1;f=new u.ja(0),g=new u.ja(0),b=null;for(var E=this.g.Hd(),O=this.g.Hd(),C=0,N=l.size;C<N;C++){var D=l.get(C);if(this.g.D(D,n),!n.rb(c)){if($!=-1){for(var z=$;z<C;z++){$=l.get(z);var R=this.g.V($);D=this.g.Na($);var G=!1;this.g.D(R,r),0>c.compare(r)&&(h?r.y==o:r.x==o)&&(f.add($),G=!0,this.g.Sa($,O,1)),this.g.D(D,r),0>c.compare(r)&&(h?r.y==o:r.x==o)&&(G||f.add($),this.g.Sa($,E,1))}for(z=0,G=f.size;z<G;z++){if($=f.get(z),D=this.g.Qa($,E),R=this.g.Qa($,O),D==1&&(D=this.g.Na($),this.g.D(D,p),!p.rb(n))){b==null&&(b=[]);var H=u.h.ub(c,p);b[0]=u.h.ub(p,n)/H,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Wl(D,b,1),D=this.g.Na($),this.g.mf(D,n),g.add(D),this.g.Sa(D,E,1),this.g.Sa(D,O,-1)}R==1&&(R=this.g.V($),this.g.D(R,p),p.rb(n)||(b==null&&(b=[]),H=u.h.ub(c,p),b[0]=u.h.ub(c,n)/H,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Wl($,b,1),D=this.g.V($),this.g.mf(D,n),g.add(D),this.g.Sa(D,E,-1),this.g.Sa(D,O,1)))}$=f,f=g,(g=$).clear(!1)}$=C,c.N(n)}}this.g.Ud(E),this.g.Ud(O)}},v.prototype.Pl=function(h,o){for(var r=new u.h,n=null,l=-1,c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var g=this.g.V(f);this.g.D(f,r),(h?r.y==o:r.x==o)&&(this.g.D(g,r),(h?r.y==o:r.x==o)&&(l==-1&&(l=this.g.Hd()),n==null&&(n=new u.ja(0)).Jb(100),this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(g,l)!=-2&&(n.add(g),this.g.Sa(g,l,-2))))}}if(n==null)l!=-1&&this.g.Ud(l);else{var b=this;for(n.Wd(0,n.size,function(tt,X){return b.Oh(tt,X)}),c=0,p=n.size;c<p;c++){var x=n.get(c);this.g.Sa(x,l,c)}f=new u.h,(g=new u.h).Sc();var $=-1;for(c=0,p=n.size;c<p;c++)if((x=n.get(c))!=-1&&(this.g.D(x,r),!r.rb(g))){if($!=-1)for(;;){x=!1;for(var E=1<c-$?c-1:c,O=$;O<E;O++){var C=n.get(O);if(C!=-1){var N=-1,D=this.g.V(C);this.g.D(D,f),0>g.compare(f)&&(h?f.y==o:f.x==o)&&(N=D),D=-1;var z=this.g.Na(C);if(this.g.D(z,f),0>g.compare(f)&&(h?f.y==o:f.x==o)&&(D=z),N!=-1&&D!=-1)this.Mh(C,n,l),this.g.qd(C,!1),this.Mh(N,n,l),this.g.qd(N,!1),x=!0;else if(N!=-1||D!=-1){for(z=O+1;z<c;z++){var R=n.get(z);if(R!=-1){var G=this.g.V(R),H=-1;this.g.D(G,f),0>g.compare(f)&&(h?f.y==o:f.x==o)&&(H=G),G=this.g.Na(R);var B=-1;if(this.g.D(G,f),0>g.compare(f)&&(h?f.y==o:f.x==o)&&(B=G),H!=-1&&B!=-1){this.Mh(R,n,l),this.g.qd(R,!1),this.Mh(H,n,l),this.g.qd(H,!1),x=!0;break}if(N!=-1&&B!=-1){this.At(n,C,N,R,B,l),x=!0;break}if(D!=-1&&H!=-1){this.At(n,R,H,C,D,l),x=!0;break}}}if(x)break}}}if(!x)break}$=c,g.N(r)}this.g.Ud(l)}},v.prototype.Mh=function(h,o,r){r=this.g.Qa(h,r),o.set(r,-1),r=this.g.Qa(h,this.li),this.ed.set(r,-1),(o=this.g.cd(h))!=-1&&this.g.Ya(o)==h&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},v.prototype.At=function(h,o,r,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,l),this.g.Cc(l,r),this.Mh(n,h,c),this.g.oi(n,!1),this.Mh(l,h,c),this.g.oi(l,!0)},v.prototype.Oy=function(){for(var h=0,o=this.ed.size;h<o;h++){var r=this.ed.get(h);r!=-1&&this.g.cj(r,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);this.g.fp(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c)}}for(h=0,o=this.ed.size;h<o;h++)if((r=this.ed.get(h))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.qd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.li))&&this.ed.set(r,-1),this.g.qd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),h=0,o=this.g.md;o!=-1;o=this.g.ve(o))h+=this.g.I(o);this.g.XB(h)},v.wy=function(h,o,r,n){return new v(o,n).vy(h,r)},v.clip=function(h,o,r,n,l){return v.Pu(h,o,null,r,n,l)},v.Pu=function(h,o,r,n,l,c){var p=h.K();if(p==33)return l=h.D(),o.contains(l)?h:h.Ja();if(p==197)return l=new u.l,h.A(l),l.Fa(o)?(o=new u.Hh,h.copyTo(o),o.Zo(l),o):h.Ja();if(h.B())return h;if(o.B())return h.Ja();var f=new u.l;if(h.yc(f),o.contains(f))return h;if(!o.isIntersecting(f))return h.Ja();if((r!=null||isNaN(n))&&u.ua.oy(r,o,!1),!u.ba.zj(p))throw u.i.O();if((r=h.Cb)!=null&&(r=r.Hk)!=null){if((r=r.To(o))==1){if(p!=1736)throw u.i.ga("internal error");return(h=new u.Ea(h.description)).vp(o),h}if(r==0)return h.Ja()}switch(p){case 550:for(c=null,p=h.I(),r=h.vb(0),n=0,l=new u.h,f=0;f<p;f++)r.uc(2*f,l),o.contains(l)||(n==0&&(c=h.Ja()),n<f&&c.Gd(h,n,f),n=f+1);return 0<n&&c.Gd(h,n,p),n==0?h:c;case 1736:case 1607:return v.wy(h,o,l,c);default:throw u.i.ga("internal error")}},v.prototype.Oh=function(h,o){var r=new u.h;return this.g.D(h,r),h=new u.h,this.g.D(o,h),r.compare(h)},v}();u.ti=k}(q||(q={})),function(u){var k=new u.h,v=function(){function o(r,n,l,c,p){this.Rm=new u.h,this.Fk=new u.h,this.Ri=new u.h,this.g=r,this.Cw=l,this.po=c,this.Rm=n,this.Al=p,this.Fk.Sc(),this.Ri.Sc()}return o.prototype.sE=function(r){this.g.D(r,this.Fk),r=u.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var n=u.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return h.eG(r,n)},o.prototype.ez=function(r){return this.g.Qa(r,this.Al)},o.prototype.Ky=function(r,n){return this.g.D(r,this.Fk),this.g.D(n,this.Ri),h.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},o}();u.oY=function(){};var h=function(){function o(){this.Rm=new u.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return o.dQ=function(r,n){var l=new o;return l.g=r,l.ra=n,l.Cw=n*n,l.bw=2*n,l.po=1/l.bw,l.wO()},o.Ev=function(r,n,l,c,p){return(r-=l)*r+(n-=c)*n<=p},o.eG=function(r,n){return u.P.Vh(n,u.P.Vh(r))},o.prototype.yO=function(r,n){this.g.Hc(r,k);for(var l=(k.y-this.Rm.y)*this.po,c=u.P.truncate((k.x-this.Rm.x)*this.po),p=u.P.truncate(l),f=l=0;1>=f;f+=1)for(var g=0;1>=g;g+=1){var b=o.eG(c+f,p+g),x=this.zl.lR(b);x!=-1&&(this.rq[l]=x,this.zs[l]=b,l++)}for(c=l-1;1<=c;c--)for(x=this.rq[c],p=c-1;0<=p;p--)if(x==this.rq[p]){this.zs[p]=-1,c!=--l&&(this.zs[c]=this.zs[l],this.rq[c]=this.rq[l]);break}for(p=0;p<l;p++)this.zO(r,this.zs[p],k,this.rq[p],n)},o.prototype.zO=function(r,n,l,c,p){for(var f=new u.h;c!=-1;c=this.zl.zR(c)){var g=this.zl.ka(c);r==g||n!=-1&&this.g.Qa(g,this.Al)!=n||(this.g.Hc(g,f),o.Ev(l.x,l.y,f.x,f.y,this.Cw)&&p.add(c))}},o.prototype.Zm=function(r,n,l){var c=this.g.Qa(r,this.so),p=this.g.Qa(n,this.so);return c==-1&&(c=this.Ad.Rh(),this.Ad.addElement(c,r),this.g.Sa(r,this.so,c)),p==-1?this.Ad.addElement(c,n):this.Ad.Cy(c,p),this.g.Sa(n,this.so,-2),n=this.TT(r,n),l&&(l=this.mw.sE(r),this.g.Sa(r,this.Al,l)),n},o.RT=function(r,n,l){r.Nb(n),l=r;var c=new u.h;o.ST(r.D(),n.D(),c),l.Db(c)},o.ST=function(r,n,l){var c=r.x;r.x!=n.x&&(c=(1*r.x+1*n.x)/2);var p=r.y;r.y!=n.y&&(p=(1*r.y+1*n.y)/2),l.na(c,p)},o.prototype.TT=function(r,n){var l=new u.h;this.g.D(r,l);var c=new u.h;this.g.D(n,c);var p=this.g.YF(r),f=p+(n=this.g.YF(n)),g=0,b=l.x;l.x!=c.x&&(b=(l.x*p+c.x*n)/f,g++);var x=l.y;return l.y!=c.y&&(x=(l.y*p+c.y*n)/f,g++),0<g&&this.g.Db(r,b,x),this.g.rX(r,f),g!=0},o.prototype.wO=function(){var r=this.g.gd,n=this.g.DF();for(this.Rm=n.hz(),n=Math.max(n.da(),n.S())/2147483646,this.bw<n&&(this.bw=n,this.po=1/this.bw),this.Ad=new u.cu,this.Ad.Bt(u.P.truncate(this.g.gd/3+1)),this.Ad.hn(u.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new v(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new u.ZK(u.P.truncate(4*r/3),this.mw),this.zl.vW(this.g.gd),r=!1,n=this.g.md;n!=-1;n=this.g.ve(n))for(var l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++){var g=this.mw.sE(c);this.g.Sa(c,this.Al,g),this.zl.addElement(c,g),c=this.g.V(c)}var b=new u.ja(0);for(b.Jb(10),n=this.g.md;n!=-1;n=this.g.ve(n))for(l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++){if(this.g.Qa(c,this.so)!=-2)for(g=this.g.Qa(c,this.Al),this.zl.kd(c,g);this.yO(c,b),b.size!=0;){g=!1;for(var x=0,$=b.size;x<$;x++){var E=b.get(x),O=this.zl.ka(E);this.zl.wd(E),g=this.Zm(c,O,x+1==$)||g}if(r=r||g,b.clear(!1),!g)break}c=this.g.V(c)}return r&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),r},o.prototype.qN=function(){for(var r=new u.h,n=this.Ad.ke;n!=-1;n=this.Ad.lz(n)){var l=this.Ad.sc(n);for(this.g.D(this.Ad.ka(l),r),l=this.Ad.lb(l);l!=-1;l=this.Ad.lb(l))this.g.mf(this.Ad.ka(l),r)}},o}();u.$t=h}(q||(q={})),function(u){var k=function(){function v(h){h===void 0&&(h=null),this.zg=null,this.Pb=!1,this.zg=h===null?[]:h}return v.prototype.copyTo=function(h){if(h.Pb)throw u.i.ga("CompositeGeographicTransformation is read-only");for(var o=0;o<this.zg.length;o++)h.zg.push(this.zg[o].Qf())},v.prototype.count=function(){return this.zg.length},v.prototype.add=function(h){if(this.Pb)throw u.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(h.Qf())},v.prototype.clear=function(){if(this.Pb)throw u.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},v.prototype.remove=function(h){if(this.Pb)throw u.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(h,1)},v.prototype.kg=function(){var h=new v;return this.copyTo(h),h},v.prototype.Qf=function(){return this.kg()},v.prototype.transform=function(h,o,r,n){if(h.length<o)throw u.i.ga("invalid Argument");var l=r;for(r=0;r<this.zg.length;r++){var c=this.zg[r];if(c.sm()!=null){var p=c.Wn,f=p?1:0,g=p?c.sm().getGeogcs2():c.sm().getGeogcs1();if(g=l/(g=g.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(g-1))for(l=0;l<o;l++)h[l][0]*=g,h[l][1]*=g;u.HC.geogToGeog(c.sm(),o,h,null,f),l=(p?c.sm().getGeogcs1():c.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(g=l/n,3552713678800501e-30<Math.abs(g-1))for(l=0;l<o;l++)h[l][0]*=g,h[l][1]*=g;return o},v.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof v)||this.zg.length!=h.zg.length)return!1;for(var o=0;o<this.zg.length;o++)if(!this.zg[o].Nb(h.zg[o]))return!1;return!0},v.prototype.ix=function(){this.Pb=!0},v.prototype.toString=function(){for(var h="CGT ("+this.count()+") ",o=0,r=this.count();o<r;++o)h+=this.zg[o].toString()+", ";return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},v.create=function(){return new v},v}();u.rC=k}(q||(q={})),function(u){var k,v=Math.PI,h=2*Math.PI,o=Math.PI/2,r=function(){function c(){}return c.OO=function(p,f){var g=new c;return g.x=p,g.y=f,g.type=0,g.Wh=0,g},c.cl=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=0,f.Wh=0,f},c.NO=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=p.type,f.Wh=p.Wh,f},c.Qd=function(p,f,g){var b=new c;return b.x=p.x+f*Math.cos(g),b.y=p.y+f*Math.sin(g),b.type=p.type,b.Wh=p.Wh,b},c.Ru=function(p,f){var g=new c;return g.x=.5*(p.x+f.x),g.y=.5*(p.y+f.y),g.type=p.type,g.Wh=p.Wh,g},c.OE=function(p,f){var g=new c;return g.x=p.x+.001*(f.x-p.x),g.y=p.y+.001*(f.y-p.y),g.type=p.type,g.Wh=p.Wh,g},c}(),n=function(){};(k=u.aL||(u.aL={}))[k.Round=0]="Round",k[k.Bevel=1]="Bevel",k[k.Miter=2]="Miter",k[k.Square=3]="Square";var l=function(){function c(p){this.IA=this.Zb=this.xg=null,this.od=p}return c.W=function(p,f,g,b,x,$){if(p==null||1>p.Eb())throw u.i.O();return f==0||p.B()?p:(($=new c($)).mo=p,$.La=f,$.ra=x,$.Mi=g,$.xA=b,$.Qx())},c.prototype.$L=function(){var p=this.mo,f=p.bc(),g=p.xc(),b=new u.h;return b.vc(g,f),b.normalize(),b.Jv(),b.scale(this.La),f.add(b),g.add(b),b=p.Ja(),p.Ec(f),p.Rc(g),b},c.prototype.ZL=function(){var p=this.mo;if(0<this.La&&this.Mi!=2){var f=new u.Ea;return f.bd(p,!1),this.mo=f,this.Qx()}return(p=new u.Hh(p.aa)).X(this.La,this.La),p},c.prototype.oJ=function(p,f,g,b){return(f.x-p.x)*(b.x-g.x)+(f.y-p.y)*(b.y-g.y)},c.prototype.hc=function(p,f){if(f===void 0)this.Zb.push(p),this.gf++;else if(this.gf==0)this.hc(p);else{var g=this.Dw,b=this.xg[f==0?g-1:f-1],x=this.xg[f],$=this.oJ(b,x,this.Zb[this.gf-1],p);0<$?this.hc(p):0>$&&(0<this.oJ(b,x,x,this.Zb[this.gf-1])?(x=this.xg[f==0?g-2:f==1?g-1:f-2],g=r.Qd(b,this.La,Math.atan2(b.y-x.y,b.x-x.x)-o),this.Zb[this.gf-1]=g,this.Mi==1||this.Mi==2?(g=r.Ru(g,b),this.hc(g),g=r.Qd(b,this.La,this.Lv+o),(b=r.Ru(g,b)).type|=256,this.hc(b)):(g=r.Qd(b,this.La,this.Lv+o)).type|=256,this.hc(g),this.hc(p,f)):(g=r.Qd(x,this.La,this.Lv+o),this.hc(g),this.Mi==1||this.Mi==2?(g=r.Ru(g,x),this.hc(g),g=r.Qd(x,this.La,this.Wz-o),(b=r.Ru(g,x)).type|=256,this.hc(b)):(g=r.Qd(x,this.La,this.Wz-o)).type|=256,this.hc(g)))}},c.prototype.hE=function(){var p,f=this.Dw;this.gf=0;var g=.5*this.ra,b=0,x=0;for(p=0;p<f;p++){var $=this.xg[p],E=p==0?this.xg[f-1]:this.xg[p-1],O=p==f-1?this.xg[0]:this.xg[p+1],C=E.x-$.x,N=E.y-$.y,D=O.x-$.x,z=O.y-$.y,R=Math.atan2(N,C),G=Math.atan2(z,D);if(this.Lv=R,this.Wz=G,p==0&&(b=R,x=G),C=C*z-D*N,N=G,G<R&&(G+=h),0<C*this.La)this.Mi==1||this.Mi==2?(R=r.Qd($,this.La,R+o),this.hc(R),R=r.OE($,R),this.hc(R),R=r.Qd($,this.La,G-o),($=r.OE($,R)).type|=256,this.hc($),this.hc(R)):(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),R=r.Qd($,C,.5*(R+G)),this.hc(R,p));else if(512&$.type){for(C=1-g/Math.abs(this.La),E=1,O=0>this.La?-v:v,-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(E=u.P.truncate(v/N+1.5))&&(O/=E)),N=R+o,R=r.Qd($,this.La,N),p==0&&(R.type|=1024),this.hc(R,p),C=this.La/Math.cos(O/2),N+=O/2,(R=r.Qd($,C,N)).type|=1024,this.hc(R);0<--E;)N+=O,(R=r.Qd($,C,N)).type|=1024,this.hc(R);(R=r.Qd($,this.La,G-o)).type|=1024,this.hc(R)}else if(this.Mi==1)R=r.Qd($,this.La,R+o),this.hc(R,p),R=r.Qd($,this.La,G-o),this.hc(R);else if(this.Mi==0)for(C=1-g/Math.abs(this.La),E=1,O=G-o-(R+o),-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(E=u.P.truncate(Math.abs(O)/N+1.5))&&(O/=E)),C=this.La/Math.cos(.5*O),N=R+o+.5*O,R=r.Qd($,C,N),this.hc(R,p);0<--E;)N+=O,R=r.Qd($,C,N),this.hc(R);else this.Mi==2?(C=E.x-$.x,N=E.y-$.y,.99999999<(E=(C*(D=O.x-$.x)+N*(z=O.y-$.y))/Math.sqrt(C*C+N*N)/Math.sqrt(D*D+z*z))?(R=r.Qd($,1.4142135623730951*this.La,G-.25*v),this.hc(R,p),R=r.Qd($,1.4142135623730951*this.La,G+.25*v),this.hc(R)):(E=Math.abs(this.La/Math.sin(.5*Math.acos(E))))>(O=Math.abs(this.xA*this.La))?(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),R=r.Qd($,C,.5*(R+G)),G=u.h.construct(R.x,R.y),R=u.h.construct($.x,$.y),($=new u.h).vc(G,R),(G=new u.h).BW(O/$.length(),$,R),R=(E-O)*Math.abs(this.La)/Math.sqrt(E*E-this.La*this.La),0<this.La?$.Jv():$.cr(),$.scale(R/$.length()),(R=new u.h).add(G,$),(E=new u.h).vc(G,$),R=r.cl(R),this.hc(R,p),R=r.cl(E),this.hc(R)):(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),R=r.Qd($,C,.5*(R+G)),this.hc(R,p))):(G=N,0<this.La?(G>R&&(G-=h),E=R-G<o):(G<R&&(G+=h),E=G-R<o),E?(N=0>(C=1.4142135623730951*this.La)?R+.25*v:R+.75*v,R=r.Qd($,C,N),this.hc(R,p),N=0>C?G-.25*v:G-.75*v,R=r.Qd($,C,N),this.hc(R)):(C=.5*(G-R),C=this.La/Math.abs(Math.sin(C)),G<R&&(G+=h),R=r.Qd($,C,(R+G)/2),this.hc(R,p)))}return this.Lv=b,this.Wz=x,this.hc(this.Zb[0],0),$=r.NO(this.Zb[this.gf-1]),this.Zb[0]=$,this.rW()},c.prototype.Cu=function(p,f){if(!(2>f))for(var g=0;g<f;g++){var b=this.Zb[p+g];g!=0?this.IA.Ei(u.h.construct(b.x,b.y)):this.IA.Nt(u.h.construct(b.x,b.y))}},c.prototype.aM=function(p,f,g){var b=p.Ca(f),x=p.Wc(f);if(this.Zb=[],this.IA=g,p.ec(f)){for(f=p.Oa(b);p.Oa(x-1).rb(f);)x--;if(2<=x-b){for(this.Dw=x-b,this.xg=[],f=b;f<x;f++)this.xg.push(r.cl(p.Oa(f)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(f=p.Oa(b);b<x&&p.Oa(b+1).rb(f);)b++;for(f=p.Oa(x-1);b<x&&p.Oa(x-2).rb(f);)x--;if(2<=x-b){for(this.Dw=2*(x-b)-2,this.xg=[],(g=r.cl(p.Oa(b))).type|=1536,this.xg.push(g),f=b+1;f<x-1;f++)g=r.cl(p.Oa(f)),this.xg.push(g);for((g=r.cl(p.Oa(x-1))).type|=512,this.xg.push(g),f=x-2;f>=b+1;f--)(g=r.cl(p.Oa(f))).type|=1024,this.xg.push(g);if(this.hE())if(2<=this.Zb.length){for(p=-1,(x=(1024&this.Zb[this.gf-1].type)!=0)||(p=0),f=1;f<this.gf;f++)(b=(1024&this.Zb[f].type)!=0)?x||1<(x=f-1)-p+1&&this.Cu(p,x-p+1):x&&(p=f-1),x=b;x||1<(x=this.gf-1)-p+1&&this.Cu(p,x-p+1)}else p=0,x=this.gf-1,0<=p&&1<=x-p&&this.Cu(p,x-p+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},c.prototype.rW=function(){for(var p=!1,f=0;f<this.gf;f++){var g=this.Zb[f];g.sh=f+1,g.uh=f-1,this.Zb[f]=g}for((g=this.Zb[0]).uh=this.gf-2,this.Zb[0]=g,(g=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=g,f=g=0;f<this.gf;f++)if(256&this.Zb[g].type){var b=this.BP(g);if(b==-1){p=!0;break}g=b}else g=this.Zb[g].sh;return!p&&(this.LO(g),!0)},c.prototype.BP=function(p){for(var f,g,b=this.gf-1,x=p,$=1;$<=b-2;$++){f=x=this.Zb[x].sh,g=p;for(var E=1;E<=$;E++){if(g=this.Zb[g].uh,(256&this.Zb[g].type)==0&&(256&this.Zb[f].type)==0){var O=this.bS(g,f);if(O!=-1)return O}f=this.Zb[f].uh}}return-1},c.prototype.bS=function(p,f){var g=this.Zb[this.Zb[p].uh],b=this.Zb[p],x=this.Zb[this.Zb[f].uh],$=this.Zb[f];if(!this.EW(g,b,x,$))return-1;var E=new n;return this.sQ(g,b,x,$,E)&&!E.XD&&u.P.XJ((b.x-g.x)*($.y-x.y)-(b.y-g.y)*($.x-x.x))!=u.P.XJ(this.La)?(g=this.Zb[p].uh,E.cn.type=b.type,E.cn.sh=f,E.cn.uh=g,this.Zb[p]=E.cn,E.cn=this.Zb[f],E.cn.uh=p,this.Zb[f]=E.cn,f):-1},c.prototype.EW=function(p,f,g,b){return Math.max(p.x,f.x)>=Math.min(g.x,b.x)&&Math.max(g.x,b.x)>=Math.min(p.x,f.x)&&Math.max(p.y,f.y)>=Math.min(g.y,b.y)&&Math.max(g.y,b.y)>=Math.min(p.y,f.y)},c.prototype.sQ=function(p,f,g,b,x){x.XD=!1;var $=(f.y-p.y)*(b.x-g.x)-(f.x-p.x)*(b.y-g.y),E=(g.y-p.y)*(f.x-p.x)-(g.x-p.x)*(f.y-p.y);if(0<=($=$==0?2:E/$)&&1>=$){var O=$;if($=(b.y-g.y)*(f.x-p.x)-(b.x-g.x)*(f.y-p.y),E=(p.y-g.y)*(b.x-g.x)-(p.x-g.x)*(b.y-g.y),0<=($=$==0?2:E/$)&&1>=$)return x.cn=r.OO(p.x+$*(f.x-p.x),p.y+$*(f.y-p.y)),x.cn.Wh=g.Wh+O*(b.Wh-g.Wh),O!=0&&O!=1||$!=0&&$!=1||(x.XD=!0),x.RY=$,x.SY=O,!((O==0||O==1)&&0<$&&1>$||($==0||$==1)&&0<O&&1>O)}return!1},c.prototype.LO=function(p){for(;this.Zb[p].uh<p;)p=this.Zb[p].uh;var f=0,g=p;do g=this.Zb[g],this.Zb[f]=g,g=g.sh,f++;while(g!=p);this.Zb[f]=this.Zb[0],this.gf=f+1},c.prototype.VC=function(p){var f=this.mo,g=f.Ha();if(g!=null){g.aj();for(var b=-1;g.ab();)b++,this.aM(f,b,p)}},c.prototype.Qx=function(){var p=this.mo.K();return p==322?this.$L():p==197?this.ZL():u.ba.zd(p)?((p=new u.Ua).pc(this.mo,!0),this.mo=p,this.Qx()):p==1607?(p=new u.Ua,this.VC(p),p):p==1736?(p=new u.Ea,this.VC(p),p):null},c}();u.DK=l}(q||(q={})),function(u){var k=function(){function r(n){this.sk=n}return r.prototype.D=function(n,l){this.sk.g.D(n,l)},r.prototype.wd=function(n){var l=this.sk.Ga.ka(n);this.sk.Ga.wd(n,-1),this.sk.g.qd(l,!1)},r}(),v=function(){function r(n){this.sk=n}return r.prototype.D=function(n,l){this.sk.DT.D(n,l)},r.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},r}(),h=function(){function r(n){this.sk=n}return r.prototype.D=function(n,l){l.N(this.sk.GT[n])},r.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},r}(),o=function(){function r(n){n===void 0?(this.Ga=new u.$j,this.Ga.Ee(20),this.g=new u.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new k(this)):n instanceof Array?(this.Ga=new u.$j,this.Ga.Ee(20),this.GT=n,this.Zh=new h(this)):(this.Ga=new u.$j,this.Ga.Ee(20),this.DT=n,this.Zh=new v(this))}return r.prototype.Ib=function(n){var l=n.K();if(u.Fx.zj(l))this.eN(n);else if(u.Xk.zd(l))this.jN(n);else if(l==197)this.bN(n);else{if(l!=33)throw u.i.O("invalid shape type");this.iN(n)}},r.prototype.YQ=function(){var n=new u.Ta,l=this.Ga.sc(-1),c=new u.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(l),n),c.nf(n),l=this.Ga.lb(l);l!=-1;l=this.Ga.lb(l))this.g.Xi(this.Ga.ka(l),n),c.lineTo(n);return c},r.MO=function(n){var l=new r(n),c=n.I(),p=1,f=new u.h,g=new u.h,b=new u.h;for(n.D(0,f);n.D(p,g),g.Mz(f)&&p<c-1;)p++;for(l.Ga.addElement(0,-1),l.Ga.zn(p),c=p+1;c<n.I();c++)n.D(c,b),(p=l.kC(b))!=-1&&l.Ga.Uj(p,c);for(b=new u.Ta,p=l.Ga.sc(-1),c=new u.Ea(n.description),n.we(l.Ga.ka(p),b),c.nf(b),p=l.Ga.lb(p);p!=-1;p=l.Ga.lb(p))n.we(l.Ga.ka(p),b),c.lineTo(b);return c},r.construct=function(n,l,c){for(var p=new r(n),f=1,g=n[0];n[f].Mz(g)&&f<l-1;)f++;for(p.Ga.addElement(0,-1),p.Ga.zn(f),f+=1;f<l;f++)(g=p.kC(n[f]))!=-1&&p.Ga.Uj(g,f);for(n=0,l=p.Ga.sc(-1);l!=-1;l=p.Ga.lb(l))c[n++]=p.Ga.ka(l);return n},r.EG=function(n,l){var c=n.Ca(l),p=n.Wc(l);if(l=!n.ec(l)&&n.Pn(l),n=n.vb(0),p*=2,l&&(p-=2),6>p-(c*=2))return!0;l=new u.h;var f=new u.h,g=new u.h;n.uc(c,l),n.uc(c+2,f),n.uc(c+4,g);var b=r.Yu(f,g,l);if(b.rs()||!r.wm(b.value()))return!1;var x=u.h.construct(f.x,f.y),$=new u.h;for(c+=6;c<p;c+=2)if($.N(f),f.N(g),n.uc(c,g),(b=r.Yu(f,g,l)).rs()||!r.wm(b.value())||(b=r.Yu(x,g,l)).rs()||!r.wm(b.value())||(b=r.Yu(f,g,$)).rs()||!r.wm(b.value()))return!1;return!0},r.prototype.eN=function(n){for(var l=new u.Ta,c=new u.h,p=0;p<n.I();p++){n.D(p,c);var f=this.Er(c);if(f!=-1){n.we(p,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(f,g)}}},r.prototype.bN=function(n){for(var l=new u.Ta,c=new u.h,p=0;4>p;p++){n.hB(p,c);var f=this.Er(c);if(f!=-1){n.If(p,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(f,g)}}},r.prototype.jN=function(n){var l=new u.Ta,c=n.bc();if((c=this.Er(c))!=-1){n.Vo(l);var p=this.g.hc(this.Us,l);this.Ga.Uj(c,p)}c=n.xc(),(c=this.Er(c))!=-1&&(n.Ro(l),n=this.g.hc(this.Us,l),this.Ga.Uj(c,n))},r.prototype.iN=function(n){var l=n.D();(l=this.Er(l))!=-1&&(n=this.g.hc(this.Us,n),this.Ga.Uj(l,n))},r.prototype.Er=function(n){var l=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var c=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return n.Mz(c)||(l=this.Ga.zn(-5)),l}return this.kC(n)},r.prototype.kC=function(n){var l=-1;do{var c=this.Ga.sc(-1),p=this.Ga.Gc(-1),f=this.Ga.ka(c),g=this.Ga.ka(p),b=new u.h,x=new u.h;if(this.Zh.D(f,b),this.Zh.D(g,x),f=u.h.Wq(x,n,b),r.wm(f))l=this.Ga.zn(-1),(b=this.iC(n,p,c))!=c&&this.jC(n,c,this.Ga.xe(b));else if(r.xG(f)){x=this.Ga.uv(-1);var $=this.Ga.sc(-1),E=this.Ga.Gc(-1);for(f=new u.h,g=new u.h;$!=this.Ga.xe(E);){var O=this.Ga.ka(x);this.Zh.D(O,f),O=u.h.Wq(f,n,b),r.xG(O)?(E=x,x=this.Ga.nl(x)):($=x,x=this.Ga.Zp(x))}if(x=E,b=$,O=this.Ga.ka(x),$=this.Ga.ka(b),this.Zh.D(O,f),this.Zh.D($,g),b!=c&&(f=u.h.Wq(g,n,f),!r.wm(f)))continue;l=this.Ga.Bu(b,x,-2,!1),this.jC(n,x,p),this.iC(n,b,c)}else this.tb==null&&(this.tb=new u.zb),this.tb.Ec(x),this.tb.Rc(b),0>(b=this.tb.ge(n,!0))?(b=this.Ga.xe(p),this.Ga.wd(p,-1),l=this.Ga.zn(-3),this.iC(n,b,c)):1<b&&(b=this.Ga.lb(c),this.Ga.wd(c,-1),l=this.Ga.Bu(-1,b,-3,!1),this.jC(n,b,p))}while(0);return l},r.prototype.jC=function(n,l,c){if(l!=c){var p=this.Ga.ka(l),f=this.Ga.lb(l),g=new u.h,b=new u.h;for(this.Zh.D(p,g);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),b),p=u.h.Wq(b,n,g),!r.wm(p));)p=l,l=f,g.N(b),f=this.Ga.lb(l),this.Zh.wd(p)}},r.prototype.iC=function(n,l,c){if(l==c)return c;var p=this.Ga.ka(l),f=this.Ga.xe(l),g=new u.h,b=new u.h;for(this.Zh.D(p,g);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),b),p=u.h.Wq(g,n,b),!r.wm(p));)p=l,l=f,g.N(b),f=this.Ga.xe(l),this.Zh.wd(p);return l},r.Yu=function(n,l,c){var p=new u.Xb;p.set(l.x),p.sub(n.x);var f=new u.Xb;f.set(c.y),f.sub(n.y);var g=new u.Xb;return g.set(l.y),g.sub(n.y),(l=new u.Xb).set(c.x),l.sub(n.x),p.Bg(f),g.Bg(l),p.sub(g),p},r.wm=function(n){return 0>n},r.xG=function(n){return 0<n},r}();u.au=o}(q||(q={})),function(u){var k=function(){function v(h){this.g=null,this.oH=!0,this.od=h}return v.uU=function(h,o,r){return h=u.ua.Gr(h),u.$t.Ev(o.Ng(),o.kh(),r.Ng(),r.kh(),u.mc.ox(h))},v.xO=function(h,o){var r=new u.Ta;return u.$t.RT(h,o,r),r},v.W=function(h,o,r,n){return(r=new v(r)).g=h,r.ra=o,r.oH=n,r.zM()},v.prototype.iM=function(h){return u.$t.dQ(this.g,h)},v.prototype.nM=function(h){return u.bu.W(this.g,h,this.od)},v.prototype.zM=function(){var h=this.ra,o=u.ua.Gr(h),r=1.00001*(h=u.ua.mN(h));h*=1.000001;for(var n=!1,l=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),c=0,p=this.g.eS();;c++){if(c>l)throw u.i.ga("Internal Error: max number of iterations exceeded");var f=this.iM(o);if(n=n||f,this.oH&&(f=this.g.Ip(o,!0,!1)!=0,n=n||f),f=!1,(c==0||p||u.bu.fI(!0,this.g,h,null,this.od))&&(f=this.nM(r),n=n||f),!f)break;u.op.Bp(this.od)}return n},v}();u.Vk=k}(q||(q={})),function(u){var k=function(){function h(o){this.ae=this.Nc=null,this.$s=0,this.Vb=o,this.Yz=!0}return h.prototype.wv=function(o,r){var n=this.g.cc(o);if(n==null){if(!this.g.fd(o,r))return null;n=r}return n},h.prototype.Zq=function(){var o;o===void 0&&(o=!1),this.$s++,(o||!(4095&this.$s))&&(this.$s=0,u.op.Bp(this.Vb))},h.prototype.iP=function(){var o=this.g.$q(!1),r=!1,n=new u.zb,l=new u.zb,c=new u.l;c.Pa();var p=new u.l;p.Pa();for(var f=new u.Ta,g=new u.OC,b=o.next();b!=-1;b=o.next()){u.op.Bp(this.Vb);var x=null,$=!1;if(!u.ba.Tn(this.g.jc(o.ek))){if((x=this.wv(b,n))==null)continue;if(x.A(c),c.X(this.ra,this.ra),x.Di(this.ra)){if(!x.Di(0))continue;$=!0,x=null}}var E=this.g.$q(o),O=E.next();for(O!=-1&&(O=E.next());O!=-1;O=E.next()){var C=null,N=!1;if(!u.ba.Tn(this.g.jc(E.ek))){if((C=this.wv(O,l))==null)continue;if(C.A(p),C.Di(this.ra)){if(!C.Di(0))continue;N=!0,C=null}}var D=0,z=0;if(x!=null&&C!=null)c.CG(p)&&(g.Qo(x),g.Qo(C),g.Fa(this.ra,!1),0<(D=g.ql(0))+(z=g.ql(1))&&(this.g.lr(b,g,0,!0),this.g.lr(O,g,1,!0)),g.clear());else if(x!=null){var R=new u.h;if(this.g.D(O,R),c.contains(R)){if(g.Qo(x),this.g.Xi(O,f),g.Fz(this.ra,f,!1),0<(D=g.ql(0)))if(this.g.lr(b,g,0,!0),N){for(N=-1,R=this.g.V(O);R!=-1&&R!=O&&(N=R,(C=this.wv(R,l))!=null&&C.Di(0));R=this.g.V(R));for(R=O;R!=-1&&(this.g.Fh(R,g.Cf),R!=N);R=this.g.V(R));}else this.g.Fh(O,g.Cf);g.clear()}}else{if(C==null)continue;if(R=new u.h,this.g.D(b,R),p.X(this.ra,this.ra),p.contains(R)){if(g.Qo(C),this.g.Xi(b,f),g.Fz(this.ra,f,!1),0<(z=g.ql(0)))if(this.g.lr(O,g,0,!0),$){for(N=-1,R=this.g.V(b);R!=-1&&R!=b&&(N=R,(C=this.wv(R,l))!=null&&C.Di(0));R=this.g.V(R));for(R=b;R!=-1&&(this.g.Fh(R,g.Cf),R!=N);R=this.g.V(R));}else this.g.Fh(b,g.Cf);g.clear()}}if(D+z!=0){if(D!=0){if((x=this.g.cc(b))==null){if(!this.g.fd(b,n))continue;x=n,n.A(c)}else x.A(c);if(x.Di(this.ra))break}r=!0}}}return r},h.prototype.jP=function(){return this.LU()},h.prototype.LU=function(){return new u.MC().LX(this.g,this.ra)},h.prototype.gI=function(){var o=!1;this.Nc==null&&(this.Nc=new u.$j);var r=new u.ja(0);r.Jb(this.g.gd+1);for(var n=this.g.$q(),l=n.next();l!=-1;l=n.next())r.add(l);this.g.nx(r,r.size),r.add(-1),n=this.g.Hd(),l=this.g.Hd(),this.ae=new u.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var c=new u.ja(0),p=new u.ja(0),f=0;new u.h;var g=this.g.ud;this.g.wb.oc();for(var b,x,$=this.g.wb.Aa[0].o,E=r.get(f++);E!=-1;){var O=b=$[2*(x=g.U(E,0))],C=x=$[2*x+1];do{var N=g.U(E,2),D=g.U(E,1);if(N!=-1){var z=g.U(N,0),R=$[2*z];0>(C<(z=$[2*z+1])?-1:C>z?1:O<R?-1:O>R?1:0)&&(p.add(E),p.add(N))}D!=-1&&(R=$[2*(z=g.U(D,0))],0>(C<(z=$[2*z+1])?-1:C>z?1:O<R?-1:O>R?1:0)&&(p.add(D),p.add(D))),(R=this.g.Qa(E,n))!=-1&&(c.add(R),this.g.Sa(E,n,-1)),(R=this.g.Qa(E,l))!=-1&&(c.add(R),this.g.Sa(E,l,-1)),(E=r.get(f++))!==-1&&(O=$[2*(C=g.U(E,0))],C=$[2*C+1])}while(E!=-1&&O===b&&C===x);for(O=c.size==1&&p.size==2,R=C=-1,N=0,D=c.size;N<D;N++){z=c.get(N);var G=this.Nc.xe(z);if(G==-1||c.cG(G)||(C=G),(z=this.Nc.lb(z))==-1||c.cG(z)||(R=z),C!=-1&&R!=-1)break}for(this.ae.VJ(x,b),N=0,D=c.size;N<D;N++)z=c.get(N),this.Nc.wd(z,-1);if(c.clear(!1),!O&&C!=-1&&R!=-1&&this.lO(C,R)){o=!0,this.Pi=this.ae.tm();break}for(N=0,D=p.size;N<D;N+=2){if(x=p.get(N),b=p.get(N+1),O?(x=this.Nc.Bu(C,R,x,!0),O=!1):x=this.Nc.addElement(x,-1),this.ae.sg){this.Pi=this.ae.tm(),o=!0;break}this.g.Qa(b,n)==-1?this.g.Sa(b,n,x):this.g.Sa(b,l,x)}if(o)break;p.Dh(0)}return this.g.Ud(n),this.g.Ud(l),o},h.prototype.lO=function(o,r){return this.ae.compare(this.Nc,this.Nc.ka(o),r),o=this.ae.sg,this.ae.Mr(),o},h.tE=function(o){for(var r=o.md;r!=-1;r=o.ve(r))if(u.ba.Ic(o.jc(r)))return!0;return!1},h.aQ=function(o,r,n,l){return!!h.tE(o)&&((r=new h(l)).g=o,r.ra=n,15>o.gd?o=r.iP():r.jP())},h.W=function(o,r,n){return h.aQ(o,o.DF(),r,n)},h.fI=function(o,r,n,l,c){if(!h.tE(r))return!1;var p=new h(c);if(p.g=r,p.ra=n,p.Yz=o,p.gI())return l!=null&&l.Yt(p.Pi),!0;var f=new u.Ed;return f.VB(),r.Pc(f),(p=new h(c)).g=r,p.ra=n,p.Yz=o,o=p.gI(),f.VB(),r.Pc(f),!!o&&(l!=null&&l.Yt(p.Pi),!0)},h.Ol=function(o,r){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*r<1*o*r},h.gP=function(o,r,n,l){if(u.ba.Ic(r.K()))return new h(l).hP(o,r,n);throw u.i.ga("crack_A_with_B")},h.prototype.hP=function(o,r,n){var l=new u.l;o.yc(l);var c=new u.l;if(r.yc(c),c.X(n,n),!c.isIntersecting(l))return o;var p=o.Cb,f=null;p!=null&&(f=p.Gb),h.Ol(o,o.I())&&(f=u.ua.lj(o,c));var g=f!=null?f.getIterator():null,b=r.Ha();r=o.Ha();var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];b.ab();)for(;b.Ia();){var $=b.ia();if(f!=null){for(g.Wo($,n),p=g.next();p!=-1;p=g.next())if(this.Zq(),r.Wb(f.ka(p),-1),r.Ia()){var E=(p=r.ia()).Fa($,null,x,null,n);for(p=0;p<E;++p){var O=x[p];if(O!=0&&O!=1){var C=r.xb(),N=new v;N.t=O,N.index=C,c.push(N)}}}}else{var D=new u.l;if($.yc(D),D.X(n,n),l.isIntersecting(D)){for(r.aj();r.ab();)for(;r.Ia();)if(this.Zq(),p=r.ia(),O=new u.l,p.yc(O),O.isIntersecting(D))for(E=p.Fa($,null,x,null,n),p=0;p<E;++p)(O=x[p])!=0&&O!=1&&(C=r.xb(),(N=new v).t=O,N.index=C,c.push(N))}}}if(c.length==0)return o;for(c=c.sort(v.zy),o=o.Ja(),r.aj();r.ab()&&!r.Ia(););for(n=r.ia(),l=new u.jg,f=-1,p=0,g=c.length;p<g;){for(x=c[p].index,b=p+1;b<g&&c[b].index==x;)++b;for(;r.xb()<x;){if(this.Zq(),$=r.Ia(),O=r.gb,(D=$||!r.Qn()||r.Rn())&&o.pc(n,f!=O),f=O,!$)for(;r.ab()&&!r.Ia(););n=r.ia()}for(x=0;p<b;p++)(O=c[p].t)!=x&&(n.dh(x,O,l),x=O,O=r.gb,o.pc(l.get(),f!=O),f=O);if((D=($=r.Ia())||!r.Qn()||r.Rn())&&(n.dh(x,1,l),o.pc(l.get(),!1)),$)n=r.ia();else{for(;r.ab()&&!r.Ia(););n=r.Ia()?r.ia():null}p=b}for(n!=null&&(O=r.gb,(D=($=r.Ia())||!r.Qn()||r.Rn())&&o.pc(n,f!=O),f=O),$=r.Ia();;){if(!$){for(;r.ab()&&!($=r.Ia()););if(!$)break}n=r.ia(),O=r.gb,(D=($=r.Ia())||!r.Qn()||r.Rn())&&o.pc(n,f!=O),f=O}return o},h}();u.bu=k;var v=function(){function h(){}return h.zy=function(o,r){return o.index==r.index?o.t>r.t?1:o.t<r.t?-1:0:o.index>r.index?1:-1},h}()}(q||(q={})),function(u){var k;(k=u.FK||(u.FK={}))[k.Left=0]="Left",k[k.Right=1]="Right",k[k.Coincident=2]="Coincident",k[k.Undefined=3]="Undefined",k[k.Uncut=4]="Uncut";var v=function(r,n,l,c,p,f,g,b,x,$,E){this.Y=r,this.ct=n,this.Ps=l,this.ug=c,this.Nm=$,this.Cl=E};u.qY=v;var h=function(){function r(n,l){this.EH=n,this.Ji=l}return r.prototype.lM=function(n,l){var c=new u.h;this.Ji.D(n,c);var p=new u.h;return this.Ji.D(l,p),(c=c.compare(p))!=0?c:(n=this.Ji.Qa(n,this.EH))<(l=this.Ji.Qa(l,this.EH))?-1:n==l?0:1},r}(),o=function(r,n,l,c,p,f,g,b,x){this.ug=r,this.Ps=n,this.JA=l,this.PH=c,this.Gi=p,this.Cl=f,this.Nm=g,this.QH=b,this.JT=x};u.pY=o,u.GK=function(){function r(){}return r.EK=function(n,l,c,p,f,g){if(l.B())n=new v(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new v(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var b=new u.hd;if(b.Ib(l),b.Ib(c),u.Vk.W(b,p,g,!0),b.gd==0)n=new v(l.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(l=0,c=b.Hd(),p=b.md;p!=-1;p=b.ve(p))for(g=b.Ob(p);g!=-1;g=b.Sb(g))for(var x=b.Ya(g),$=0,E=b.Ka(g);$<E;x=b.V(x),$++)b.Sa(x,c,l++);l=r.CM(c,b),r.YL(n,l,b,f)}}},r.CM=function(n,l){for(var c=l.gd,p=new u.ja(0),f=l.md;f!=-1;f=l.ve(f))for(var g=l.Ob(f);g!=-1;g=l.Sb(g))for(var b=l.Ya(g),x=0,$=l.Ka(g);x<$;b=l.V(b),x++)p.add(b);var E=new h(n,l);p.Wd(0,c,function(ct,ht){return E.lM(ct,ht)}),n=[];var O=[],C=l.Hd(),N=l.Hd();f=l.md,g=l.ve(f),$=new u.h;var D=new u.h,z=p.get(0),R=l.cd(z),G=l.Sf(R);l.D(z,$);var H=1;for(b=0;H<c-1;){var B=!1;for(x=H;x<c;x++)if(x!=b){var tt=p.get(x),X=l.cd(tt),rt=l.Sf(X);if(l.D(tt,D),!$.rb(D))break;G==f&&rt==g&&(B=r.pM(C,N,l,n,O,R,z,X,tt))}if(B||b==H-1){if(B&&b==H-1&&H--,++b==c)break;z=p.get(b),R=l.cd(z),G=l.Sf(R),l.D(z,$)}B||(H=b+1)}for(c=[],f=l.md;f!=-1;f=l.ve(f))for(g=l.Ob(f);g!=-1;g=l.Sb(g))for(p=l.Ya(g),x=0,$=l.Ka(g);x<$;p=l.V(p),x++){if(0<=(b=l.Qa(p,N)))for(;b<O.length&&O[b].ug==p;)c.push(O[b++]);if(0<=(b=l.Qa(p,C)))for(;b<n.length&&n[b].ug==p;)c.push(n[b++])}return l.Ud(C),l.Ud(N),c},r.pM=function(n,l,c,p,f,g,b,x,$){var E=c.tj(g),O=c.tj(x),C=c.Ya(g),N=c.Ya(x),D=c.Na(b),z=c.Na($),R=!1,G=!1,H=!1,B=!1;return b!=C&&($!=N&&(R=r.qM(n,c,p,g,D,x,z)),$!=O&&(G=r.rM(n,c,p,g,D,x,$))),b!=E&&($!=N&&(H=r.sM(l,c,f,g,b,x,z,C)),$!=O&&(B=r.tM(l,c,f,g,b,x,$,C))),R&&G&&H?(n=p.length-1,f[B?f.length-2:f.length-1].Gi==2&&(p[n-1]=p[n],--p.length)):R&&G&&B&&f[f.length-1].Gi==2&&(f=p[p.length-1],--p.length,c.Qa(f.ug,n)==p.length&&c.Sa(f.ug,n,-1)),R||G||H||B},r.qM=function(n,l,c,p,f,g,b){var x=new u.zb,$=new u.zb,E=[0,0],O=[0,0],C=l.cc(f);return C==null&&(l.fd(f,x),C=x),(x=l.cc(b))==null&&(l.fd(b,$),x=$),2>(C=C.Fa(x,null,E,O,0))&&(p=new o(f,p,E[0],NaN,C,b,g,O[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1)),!0},r.rM=function(n,l,c,p,f,g,b){var x=new u.zb,$=new u.zb,E=[0,0],O=[0,0],C=l.cc(f);return C==null&&(l.fd(f,x),C=x),(x=l.cc(b))==null&&(l.fd(b,$),x=$),2>(C=C.Fa(x,null,E,O,0))&&(p=new o(f,p,E[0],NaN,C,b,g,O[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0)},r.sM=function(n,l,c,p,f,g,b,x){var $=new u.zb,E=new u.zb,O=[0,0],C=[0,0],N=l.cc(f);return N==null&&(l.fd(f,$),N=$),($=l.cc(b))==null&&(l.fd(b,E),$=E),(N=N.Fa($,null,O,C,0))==2?(p=new o(f,p,O[0],O[1],N,b,g,C[0],C[1]),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==x&&(p=new o(f,p,O[0],NaN,N,b,g,C[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},r.tM=function(n,l,c,p,f,g,b,x){var $=new u.zb,E=new u.zb,O=[0,0],C=[0,0],N=l.cc(f);return N==null&&(l.fd(f,$),N=$),($=l.cc(b))==null&&(l.fd(b,E),$=E),(N=N.Fa($,null,O,C,0))==2?(p=new o(f,p,O[0],O[1],N,b,g,C[0],C[1]),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==x&&(p=new o(f,p,O[0],NaN,N,b,g,C[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},r.YL=function(n,l,c,p){var f=[];f[0]=new u.h,f[1]=new u.h,f[2]=new u.h,f[3]=new u.h;var g=new u.h,b=new u.h,x=new u.h,$=new u.h,E=null;p!=null&&(E=new u.jg).Qr();var O=0,C=null,N=new u.zb;new u.zb;for(var D=c.Ob(c.md);D!=-1;D=c.Sb(D)){for(var z=4,R=-1,G=-1,H=-1,B=-1,tt=NaN,X=!0,rt=!1,ct=!0,ht=!0,Tt=!0,dt=0,Ut=D,jt=0,_t=c.Ya(D),Le=c.Ka(D),di=0;di<Le;_t=c.V(_t),di++){var je=c.cc(_t);if(je==null){if(!c.fd(_t,N))continue;je=N}G==-1&&(G=_t);for(var ue=0;O<l.length&&_t==l[O].ug;){R=l[O].Ps;var ce=l[O].ug,ee=l[O].JA,Ue=l[O].Nm,Qt=l[O].Cl,jr=l[O].QH;if(l[O].Gi==2){if(rt||(Ut=R,G=ce,jt=ee,H=Ue,B=Qt,tt=jr,z=2,p!=null?C=new u.Ua:dt=0,Tt=!1,ht=!0),ee=l[O].PH,jr=l[O].JT,p!=null?(je.dh(ue,l[O].PH,E),C.pc(E.get(),ht)):dt++,ue=ee,rt=!0,ht=X=!1,O+1==l.length||l[O+1].Gi!=2||l[O+1].ug==ce&&l[O+1].JA!=ue){if(p!=null){var ae=new v(C,2,R,ce,ee,z,Ut,G,jt,Ue,Qt);p.push(ae)}else null.add(dt);Ut=R,G=ce,jt=ee,H=Ue,B=Qt,tt=jr,z=2,rt=X=!1,ht=Tt=!0}}else{var Ki=c.V(ce);if(O<l.length-1&&l[O+1].ug==Ki&&l[O+1].Cl==Qt&&l[O+1].Gi==2)ee!=ue&&(Tt&&(p!=null?C=new u.Ua:dt=0),X=0<O&&l[O-1].Ps==R?z==1?0:z==0?1:3:3,p!=null?(je.dh(ue,ee,E),C.pc(E.get(),ht),ae=new v(C,X,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):(dt++,null.add(dt)),ue=ee,Ut=R,G=ce,jt=ee,H=Ue,B=Qt,tt=jr,z=X,X=ct=!1,ht=Tt=!0);else if(!r.xM(n,c,l,O,g,b)){r.uM(c,l,O,D,_t,x,$);var ge=!1;if(Ki=!1,ae=!0,!(g.rb(x)||b.rb(x)||g.rb($)||b.rb($))){f[0].N(g),f[1].N(b),f[2].N(x),f[3].N($),f.sort(u.h.pu);var Mu=f[0],Eu=f[1],Iu=f[2],rr=f[3];Mu.rb(g)?Eu.rb(b)?n?(Ki=ge=!0,ae=!1):ge=!1:rr.rb(b)?n?ae=Ki=ge=!0:ge=!1:(ge=!0,ae=Eu.rb(x)):Eu.rb(g)?Iu.rb(b)?n?(Ki=ge=!0,ae=!1):ge=!1:Mu.rb(b)?n?ae=Ki=ge=!0:ge=!1:(ge=!0,ae=Iu.rb(x)):Iu.rb(g)?rr.rb(b)?n?(Ki=ge=!0,ae=!1):ge=!1:Eu.rb(b)?n?ae=Ki=ge=!0:ge=!1:(ge=!0,ae=rr.rb(x)):Mu.rb(b)?n?(Ki=ge=!0,ae=!1):ge=!1:Iu.rb(b)?n?ae=Ki=ge=!0:ge=!1:(ge=!0,ae=Mu.rb(x))}ge&&(ge=_t==ce,(ee!=ue||ge&&ue==0)&&(Tt&&(p!=null?C=new u.Ua:dt=0),p!=null?(je.dh(ue,ee,E),C.pc(E.get(),ht)):dt++),ae?z!=1?((ee!=ue||ge&&ue==0)&&(p!=null?(ae=new v(C,1,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):null.add(dt)),Ki?(O>=l.length-2||l[O+2].Ps!=R)&&(z=0):z=1):((ee!=ue||ge&&ue==0)&&(p!=null?(ae=new v(C,3,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):null.add(dt)),z=1):z!=0?((ee!=ue||ge&&ue==0)&&(p!=null?(ae=new v(C,0,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):null.add(dt)),Ki?(O>=l.length-2||l[O+2].Ps!=R)&&(z=1):z=0):((ee!=ue||ge&&ue==0)&&(p!=null?(ae=new v(C,3,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):null.add(dt)),z=0),(ee!=ue||ge&&ue==0)&&(ue=ee,Ut=R,G=ce,jt=ee,H=Ue,B=Qt,tt=jr,X=ct=!1,ht=Tt=!0))}}O++}ue!=1&&(Tt&&(p!=null?C=new u.Ua:dt=0),p!=null?(je.dh(ue,1,E),C.pc(E.get(),ht)):dt++,ht=Tt=!1,ct=!0)}ct&&(ee=1,ce=c.tj(D),ce=c.Na(ce),Qt=Ue=-1,jr=NaN,X?p!=null?(ae=new v(C,4,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):null.add(dt):(X=z==1?0:z==0?1:3,p!=null?(ae=new v(C,X,R,ce,ee,z,Ut,G,jt,Ue,Qt),p.push(ae)):null.add(dt)))}},r.xM=function(n,l,c,p,f,g){var b=c[p].QH;if(b==1)return r.vM(n,l,c,p,f,g);if(b==0)return r.wM(n,l,c,p,f,g);throw u.i.Ra()},r.vM=function(n,l,c,p,f,g){var b=new u.zb,x=c[p].ug,$=c[p].Nm,E=c[p].Cl,O=-1,C=-1,N=-1,D=-1;if(!n&&0<p){var z=c[p-1];O=z.ug,C=z.Nm,N=z.Cl,D=z.Gi}var R=-1,G=-1,H=-1,B=-1;p<c.length-1&&(R=(z=c[p+1]).ug,G=z.Nm,H=z.Cl,B=z.Gi);var tt=l.V(x);return z=l.V(E),n?p==c.length-1||R!=x||G!=$||H!=z||B==2?((n=l.cc(E))==null&&(l.fd(E,b),n=b),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):((n=l.cc(E))==null&&(l.fd(E,b),n=b),f.N(n.lg()),(n=l.cc(z))==null&&(l.fd(z,b),n=b),g.N(n.lg()),f.Uq(),g.normalize(),f.normalize(),!1):0<p&&O==x&&C==$&&N==z&&D==2||p<c.length-1&&R==tt&&G==$&&H==z&&B==2?((n=l.cc(E))==null&&(l.fd(E,b),n=b),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):!(p<c.length-1&&R==x&&G==$&&H==z)||((n=l.cc(E))==null&&(l.fd(E,b),n=b),f.N(n.lg()),(n=l.cc(z))==null&&(l.fd(z,b),n=b),g.N(n.lg()),f.Uq(),g.normalize(),f.normalize(),!1)},r.wM=function(n,l,c,p,f,g){var b=new u.zb,x=c[p].ug,$=c[p].Nm,E=c[p].Cl,O=-1,C=-1,N=-1,D=-1;if(!n&&p<c.length-1){var z=c[p+1];O=z.ug,C=z.Nm,N=z.Cl,D=z.Gi}var R=-1,G=-1,H=-1;z=-1,0<p&&(R=(z=c[p-1]).ug,G=z.Nm,H=z.Cl,z=z.Gi);var B=l.V(x),tt=l.Na(E);return n?p!=0&&R==x&&G==$&&H==tt&&z!=2||((n=l.cc(E))==null&&(l.fd(E,b),n=b),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):!(0<p&&R==x&&G==$&&H==tt&&z==2||p<c.length-1&&O==B&&C==$&&N==tt&&D==2)||((n=l.cc(E))==null&&(l.fd(E,b),n=b),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1)},r.uM=function(n,l,c,p,f,g,b){var x=new u.zb,$=n.cc(f);if($==null&&(n.fd(f,x),$=x),l=(c=l[c]).ug,c=c.JA,f=n.V(l),c==1)g.N($.lg()),f!=-1&&f!=n.tj(p)?(($=n.cc(f))==null&&(n.fd(f,x),$=x),b.N($.lg()),($=n.cc(l))==null&&n.fd(l,x)):b.N(g),g.Uq(),b.normalize(),g.normalize();else{if(c!=0)throw u.i.Ra();b.N($.lg()),g.nt(b),b.normalize(),g.normalize()}},r}()}(q||(q={})),function(u){var k;(k=u.XL||(u.XL={}))[k.Linear=0]="Linear",k[k.Angular=1]="Angular",k[k.Area=2]="Area";var v=function(){function p(f,g,b){this.pd=g,this.ci=b,this.qA=f}return p.prototype.Nb=function(f){return f instanceof p&&this.ci===f.ci},p.WF=function(f){return f.pd!==0?null:f.qA===-1?new p(-1,2,f.ci*f.ci):p.ah(l[f.qA])},p.ah=function(f){return(f=n[f])===void 0?null:f},p.UO=function(f,g,b){var x=null;if(b!=null)try{b.values[0]==="EPSG"&&(x=p.ah(parseInt(b.values[1])))}catch{}return x===null&&(x=new p(-1,f,g)),x},p.prototype.Fc=function(){return this.qA},p.prototype.xF=function(f){if(f.pd!=this.pd)throw u.i.Hb();return this.ci/f.ci},p.Ph=function(f,g,b){return g.xF(b)*f},p.SE=function(f,g,b,x,$){for(b=b.xF(x),x=0;x<g;x++)$[x]=f[x]*b},p}();u.Uc=v;for(var h=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],l=[],c=0;c<h.length;c+=2)n[h[c]]=new v(h[c],2,h[c+1]);for(h=null,c=0;c<o.length;c+=2)n[o[c]]=new v(o[c],1,o[c+1]);for(o=null,c=0;c<r.length;c+=3)n[r[c]]=new v(r[c],0,r[c+1]),l[r[c]]=r[c+2];r=null}(q||(q={})),function(u){var k=function(){function v(){this.yb=this.pb=0}return v.prototype.set=function(h,o){o!==void 0?(this.pb=h,this.yb=o):typeof h=="number"?(this.pb=h,this.yb=0):(this.pb=h.pb,this.yb=h.yb)},v.prototype.value=function(){return this.pb},v.prototype.add=function(h){var o=this.pb+h.pb;h=this.yb+h.yb+2220446049250313e-31*Math.abs(o),this.pb=o,this.yb=h},v.prototype.fN=function(){var h=this.pb+1,o=this.yb+2220446049250313e-31*Math.abs(h);this.pb=h,this.yb=o},v.prototype.ZM=function(h,o){this.pb=h.pb+o.pb,this.yb=h.yb+o.yb+2220446049250313e-31*Math.abs(this.pb)},v.prototype.sub=function(h){if(typeof h=="number"){var o=this.pb-h;h=this.yb+2220446049250313e-31*Math.abs(o)}else o=this.pb-h.pb,h=this.yb+h.yb+2220446049250313e-31*Math.abs(o);this.pb=o,this.yb=h},v.prototype.Bg=function(h){var o=this.pb*h.pb;this.yb=this.yb*Math.abs(h.pb)+h.yb*Math.abs(this.pb)+this.yb*h.yb+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Po=function(h){var o=this.pb*h;this.yb=this.yb*Math.abs(h)+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Ml=function(h,o){var r=Math.abs(h.pb)*Math.abs(o.pb);this.yb=h.yb*Math.abs(o.pb)+o.yb*Math.abs(h.pb)+h.yb*o.yb+2220446049250313e-31*Math.abs(r),this.pb=r},v.prototype.lm=function(h){var o=Math.abs(h.pb),r=this.pb/h.pb,n=(this.yb+Math.abs(r)*h.yb)/o;h.yb>.01*o&&(n*=1+(1+(h=h.yb/o))*h),this.pb=r,this.yb=n+2220446049250313e-31*Math.abs(r)},v.prototype.sqrt=function(){if(0<=this.pb){var h=Math.sqrt(this.pb),o=this.pb>10*this.yb?.5*this.yb/h:this.pb>this.yb?h-Math.sqrt(this.pb-this.yb):Math.max(h,Math.sqrt(this.pb+this.yb)-h);o+=2220446049250313e-31*Math.abs(h)}else this.pb<-1*this.yb?o=h=NaN:(h=0,o=Math.sqrt(this.yb));this.pb=h,this.yb=o},v.prototype.sin=function(h){var o=Math.sin(h.pb),r=Math.cos(h.pb);this.pb=o,o=Math.abs(o),this.yb=(Math.abs(r)+.5*o*h.yb)*h.yb+2220446049250313e-31*o},v.prototype.cos=function(h){var o=Math.sin(h.pb),r=Math.cos(h.pb);this.pb=r,r=Math.abs(r),this.yb=(Math.abs(o)+.5*r*h.yb)*h.yb+2220446049250313e-31*r},v.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},v.prototype.rs=function(){return this.rg()&&this.yb!=0},v}();u.Xb=k}(q||(q={}));var ni=new q.h,ks=new q.h,$n=new q.h,Os=new q.h,Tn=new q.h;(function(u){var k,v;(v=k||(k={}))[v.closedPath=1]="closedPath",v[v.exteriorPath=2]="exteriorPath",v[v.ringAreaValid=4]="ringAreaValid";var h=function(){function o(r,n,l,c,p,f,g){n!==void 0?(this.ib=r,this.ek=n,this.dl=l,this.ki=c,this.za=f,this.cA=g,this.gw=p):(this.ib=r.ib,this.ek=r.ek,this.dl=r.dl,this.ki=r.ki,this.za=r.za,this.cA=r.cA,this.gw=r.gw),this.XG=!0}return o.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},o.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!u.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},o.vP=function(r,n,l,c,p,f,g){return new o(r,n,l,c,p,f,g)},o}();u.vY=h,k=function(){function o(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return o.prototype.Uh=function(r){return this.Te!=null?this.Te[r]:null},o.prototype.Zg=function(r,n){if(this.Te==null){if(n==null)return;this.Te=[];for(var l=0,c=this.wb.I();l<c;l++)this.Te.push(null)}this.Te[r]=n},o.prototype.ep=function(r,n){this.nd.T(r,1,n)},o.prototype.cp=function(r,n){this.nd.T(r,2,n)},o.prototype.QB=function(r,n){this.nd.T(r,6,n)},o.prototype.Up=function(r){return this.nd.U(r,6)},o.prototype.gx=function(r,n){this.nd.T(r,7,n)},o.prototype.sv=function(r){return this.nd.U(r,0)},o.prototype.JJ=function(r,n){this.dd.T(r,1,n)},o.prototype.NJ=function(r,n){this.dd.T(r,0,n)},o.prototype.EF=function(r){return this.dd.U(r,7)},o.prototype.ap=function(r,n){this.dd.T(r,3,n)},o.prototype.bp=function(r,n){this.dd.T(r,4,n)},o.prototype.pU=function(r){this.dd==null&&(this.dd=new u.ad(8));var n=this.dd.De();return this.dd.T(n,2,r),this.dd.T(n,5,0),this.dd.T(n,6,0),this.dd.T(n,7,n),n},o.prototype.JQ=function(r){this.dd.kd(r)},o.prototype.rU=function(r){this.nd==null&&(this.nd=new u.ad(8),this.ud=new u.ad(5),this.Qi=new u.ce(0),this.xo=new u.ce(0));var n=this.nd.De();return this.nd.T(n,0,n),this.nd.T(n,3,0),this.nd.T(n,6,0),this.gx(n,r),n>=this.Qi.size&&(r=16>n?16:u.P.truncate(3*n/2),this.Qi.resize(r),this.xo.resize(r)),this.Qi.set(n,0),this.xo.set(n,0),n},o.prototype.nF=function(r){this.nd.kd(r)},o.prototype.Qy=function(r){this.ud.kd(r),this.gd--},o.prototype.jI=function(r){this.nd==null&&(this.nd=new u.ad(8),this.ud=new u.ad(5),this.Qi=new u.ce(0),this.xo=new u.ce(0));var n=this.ud.De(),l=0<=r?r:n;if(this.ud.T(n,0,l),0>r){if(l>=this.wb.I()){if(r=16>l?16:u.P.truncate(3*l/2),this.wb.resize(r),this.Te!=null)for(var c=0;c<r;c++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(r),this.jt=this.wb.vb(0)}this.wb.Db(l,-1e38,-1e38),this.Te!=null&&(this.Te[l]=null),this.Ug!=null&&this.Ug.write(l,1)}return this.ud.T(n,4,2*l),this.gd++,n},o.prototype.yj=function(r,n,l){var c=n!=-1?this.Na(n):this.tj(r),p=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),g=this.Va(f);return l!=null&&this.wb.It(g,l),this.cj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),l=this.ec(r),c=this.Ya(r),n==-1&&this.Yg(r,f),n==c&&this.Kf(r,f),l&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(r,this.Ka(r)+1),r=this.Sf(r),this.Vj(r,this.I(r)+1),f},o.prototype.pm=function(){return this.lo==null&&(this.lo=new u.Ta(this.wb.description)),this.lo},o.prototype.$o=function(r,n){this.dd.T(r,2,-134217729&this.dd.U(r,2)||(n==1?134217728:0))},o.prototype.Kn=function(r){return 134217728&this.dd.U(r,2)?1:0},o.prototype.cN=function(r){var n=this.Kg(r.K(),r.description);return r.K()==1736&&this.$o(n,r.Kn()),this.PD(n,r),n},o.prototype.dN=function(r){var n=this.Kg(r.K(),r.description);return this.QD(n,r),n},o.prototype.SV=function(r,n){this.nd==null&&(this.nd=new u.ad(8),this.ud=new u.ad(5),this.Qi=new u.ce(0),this.xo=new u.ce(0)),this.nd.Ee(this.nd.Jg+r),this.ud.Ee(this.ud.Jg+n),this.Qi.Jb(this.Qi.size+r),this.xo.Jb(this.xo.size+r)},o.prototype.PD=function(r,n){this.SV(n.ea(),n.I()),this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0);for(var l=this.Te!=null&&n.Se!=null,c=0,p=n.ea();c<p;c++)if(!(2>n.Ka(c))){var f=this.wf(r,-1);this.mn(f,n.ec(c));for(var g=n.Ca(c),b=n.Wc(c);g<b;g++){var x=this.yj(f,-1,null);if(l)if(x=this.Va(x),(1&n.UF(g))!=0)this.Zg(x,null);else{var $=new u.jg;n.cc(g,$,!0),this.Zg(x,$.get())}}}},o.prototype.QD=function(r,n){this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0),r=this.wf(r,-1);var l=0;for(n=n.I();l<n;l++)this.yj(r,-1,null)},o.prototype.JX=function(r,n,l){var c=this.V(r);if(c==-1)throw u.i.Ra();for(var p=this.pm(),f=this.cd(r),g=0,b=n.ql(l);g<b;g++){var x=this.Va(r),$=this.V(r),E=n.Xp(l,g);g==0&&(E.Vo(p),this.Fh(r,p)),E.K()==322?this.Zg(x,null):this.Zg(x,u.ba.kg(E)),E.Ro(p),g<b-1?r=this.yj(f,$,p):this.Fh(c,p)}},o.prototype.IX=function(r,n,l){var c=this.V(r);if(c==-1)throw u.i.Ra();for(var p=this.pm(),f=this.cd(r),g=0,b=n.ql(l);g<b;g++){var x=this.Va(r),$=this.V(r),E=n.Xp(l,b-g-1);g==0&&(E.Ro(p),this.Fh(r,p)),E.K()==322?this.Zg(x,null):this.Zg(x,u.ba.kg(E)),E.Vo(p),g<b-1?r=this.yj(f,$,p):this.Fh(c,p)}},o.prototype.DF=function(){var r=new u.l;r.Pa();for(var n=this.$q(),l=new u.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,l),c?r.$b(l.x,l.y):r.Nk(l.x,l.y),c=!1;return r},o.prototype.Ib=function(r){var n=r.K();if(u.ba.Ic(n))return this.cN(r);if(n==550)return this.dN(r);throw u.i.Ra()},o.prototype.pN=function(r,n){var l=n.K();if(u.ba.Ic(l))this.PD(r,n);else{if(l!=550)throw u.i.Ra();this.QD(r,n)}},o.prototype.hN=function(r,n){var l=this.Kg(1736,r.description);if(2>r.Ka(n))return l;this.Kl.Gd(r,r.Ca(n),r.Wc(n)),this.jt=this.wb.vb(0);var c=this.wf(l,-1);this.mn(c,r.ec(n)||!0);var p=this.Te!=null&&r.Se!=null,f=r.Ca(n);for(n=r.Wc(n);f<n;f++){var g=this.yj(c,-1,null);if(p)if(g=this.Va(g),(1&r.UF(f))!=0)this.Zg(g,null);else{var b=new u.jg;r.cc(f,b,!0),this.Zg(g,b.get())}}return l},o.prototype.Ke=function(r){var n=this.jc(r),l=u.UK.Kg(n,this.Kl.description),c=this.I(r);if(c==0)return l;if(u.ba.Ic(n)){n=this.ea(r);for(var p=u.Zc.Qh(n+1),f=u.Zc.Or(n+1,0),g=l.description,b=0,x=g.Ba;b<x;b++){for(var $=g.ld(b),E=u.sa.Wa($),O=u.Zc.TE($,c),C=this.wb.vb($),N=0,D=0,z=0,R=this.Ob(r);R!=-1;R=this.Sb(R)){var G=0;this.ec(R)&&(G|=1),this.TS(R)&&(G|=4),G!=0&&f.uJ(D,G);var H=this.Ka(R);if(p.write(D++,z),z+=H,$==0){H=C;var B=O,tt=new u.h;for(G=this.Ya(R);N<z;G=this.V(G),N++){var X=this.Va(G);H.uc(2*X,tt),B.Vt(2*N,tt)}}else for(G=this.Ya(R);N<z;G=this.V(G),N++)for(X=this.Va(G),B=0;B<E;B++)tt=C.gg(X*E+B),O.rr(N*E+B,tt)}l.kn($,O),p.write(n,c)}l.KJ(f),l.LJ(p),l.Qc(16777215)}else if(n==550){for(g=l.description,l.resize(c),b=0,x=g.Ba;b<x;b++){for($=g.ld(b),E=u.sa.Wa($),O=l.vb($),C=this.wb.vb($),N=0,R=this.Ob(r),H=this.Ka(R),G=this.Ya(R);N<H;G=this.V(G),N++)for(X=this.Va(G),B=0;B<E;B++)tt=C.gg(X*E+B),O.rr(N*E+B,tt);l.kn($,O)}l.Qc(16777215)}return l},o.prototype.wB=function(r){for(var n=this.Ob(r);n!=-1;n=this.ar(n));n=this.KR(r);var l=this.ve(r);n!=-1?this.JJ(n,l):this.md=l,l!=-1?this.NJ(l,n):this.sw=n,this.JQ(r)},o.prototype.Kg=function(r,n){return n===void 0?this.VE(r,u.fe.pg()):this.VE(r,n)},o.prototype.VE=function(r,n){return r=this.pU(r),this.wb==null?this.wb=this.Kl=new u.ee(n):this.Kl.Ll(n),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=r:(this.NJ(r,this.sw),this.JJ(this.sw,r)),this.sw=r},o.prototype.ve=function(r){return this.dd.U(r,1)},o.prototype.KR=function(r){return this.dd.U(r,0)},o.prototype.jc=function(r){return 2147483647&this.dd.U(r,2)},o.prototype.CJ=function(r,n,l){n=this.yk[n],(r=this.EF(r))>=n.size&&n.resize(Math.max(u.P.truncate(1.25*r),16),-1),n.write(r,l)},o.prototype.FF=function(r,n){return(r=this.EF(r))<(n=this.yk[n]).size?n.read(r):-1},o.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var r=0;r<this.yk.length;r++)if(this.yk[r]==null)return this.yk[r]=u.Zc.Qh(0),r;return this.yk.push(u.Zc.Qh(0)),this.yk.length-1},o.prototype.sW=function(r){this.yk[r]=null},o.prototype.Ob=function(r){return this.dd.U(r,3)},o.prototype.mv=function(r){return this.dd.U(r,4)},o.prototype.I=function(r){return this.dd.U(r,5)},o.prototype.ea=function(r){return this.dd.U(r,6)},o.prototype.Ip=function(r,n,l){for(var c=0,p=this.md;p!=-1;p=this.ve(p)){var f=this.jc(p);if(u.ba.Ic(f)&&(!l||f==1736)){f=this.jc(p)==1736;for(var g=this.Ob(p);g!=-1;){for(var b=0,x=this.Ya(g);b<u.P.truncate(this.Ka(g)/2);){var $=this.V(x);if($==-1)break;var E=this.Va(x),O=this.Uh(E);O!=null?E=O.Rb():(O=this.Va($),E=this.wb.Ar(E,O)),E<=r?(E==0?c==0&&(c=-1):c=1,$!=this.tj(g)&&(this.gC($,x),this.qd($,!0))):x=this.V(x),b++}for(b=this.Ya(g),x=this.ec(g)?b:this.tj(g);0<this.Ka(g);){if(($=this.Na(x))==-1){this.qd(x,!0),c==0&&(c=-1);break}var C=this.Va($);if((O=this.Uh(C))!=null?E=O.Rb():(E=this.Va(x),E=this.wb.Ar(E,C)),E<=r)E==0?c==0&&(c=-1):c=1,this.gC($,x),this.qd($,!1),b==$&&(b=this.Ya(g));else if((x=this.Na(x))==b)break}x=this.Ka(g),n&&(f?3>x:2>x)?(g=this.ar(g),c=0<x?1:c==0?-1:c):g=this.Sb(g)}}}return c},o.prototype.gC=function(r,n){var l=this.Va(r),c=this.Va(n);if(this.Ug!=null&&(l=this.Ug.read(l),this.Ug.write(c,l)),this.di!=null){for(c=0,l=this.di.length;c<l;c++)if(this.di[c]!=null){var p=this.Qa(r,c);p!=-1&&this.Sa(n,c,p)}}},o.prototype.Wl=function(r,n,l){var c=0,p=this.V(r);if(p==-1)throw u.i.Ra();for(var f=this.Va(r),g=this.Va(p),b=this.Uh(f),x=b==null?this.wb.Ar(f,g):b.Rb(),$=0;$<l;$++){var E=n[$];if(0<E&&1>E){var O=E;b!=null&&(O=0<x?b.Tx(E)/x:0),this.wb.fD(f,g,O,this.pm());var C=this.yj(this.cd(r),p,this.pm());if(c++,b!=null){var N=b.fl(0,E);O=this.Va(this.Na(C)),this.Zg(O,N),this.mf(C,N.xc()),$!=l-1&&n[$+1]!=1||(E=b.fl(E,1),this.Zg(O,E))}}}return c},o.prototype.HX=function(r,n,l){var c=0,p=this.V(r);if(p==-1)throw u.i.ga("internal error");var f=this.Va(r),g=this.Va(p),b=this.Uh(f),x=b==null?this.wb.Ar(f,g):b.Rb(),$=0;r=this.cd(r);for(var E=0;E<l;E++){var O=n[E];if($<O&&1>O){var C=O;if(b!=null&&(C=0<x?b.Tx(O)/x:0),this.wb.fD(f,g,C,this.pm()),C=this.tS(r,p,this.pm()),c++,b!=null){$=b.fl($,O);var N=this.Va(this.Na(C));this.Zg(N,$),this.Db(C,$.qa,$.ma),E!=l-1&&n[E+1]!=1||($=b.fl(O,1),C=this.Va(C),this.Zg(C,$))}}$=O}return c},o.prototype.tS=function(r,n,l){var c=n!=-1?this.Na(n):this.tj(r),p=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),g=this.Va(f);return l!=null&&this.wb.It(g,l),this.cj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),l=this.ec(r),c=this.Ya(r),n==-1&&this.Yg(r,f),n==c&&(l&&c!=-1||this.Kf(r,f)),l&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(r,this.Ka(r)+1),r=this.Sf(r),this.Vj(r,this.I(r)+1),f},o.prototype.pE=function(r,n,l){var c=this.Va(n),p=this.Va(l);if(0>c||p>this.gd-1)throw u.i.O("invalid call");if(c>p&&!this.ec(r))throw u.i.O("cannot iterate across an open path");for(r=0;n!=l;n=this.V(n))c=this.Va(n),(p=this.Uh(c))!=null?r+=p.Rb():(p=this.Va(this.V(n)),r+=this.wb.Ar(c,p));return r},o.prototype.Fh=function(r,n){var l=this.Va(r);this.wb.It(l,n),(l=this.Uh(l))!=null&&l.setStart(n),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Uh(r)!=null&&l.setEnd(n))},o.prototype.Xi=function(r,n){r=this.Va(r),this.wb.we(r,n)},o.prototype.mf=function(r,n){this.Db(r,n.x,n.y)},o.prototype.Db=function(r,n,l){var c=this.Va(r);this.wb.Db(c,n,l),(c=this.Uh(c))!=null&&c.UB(n,l),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Uh(r)!=null&&c.Sl(n,l))},o.prototype.D=function(r,n){this.wb.D(this.ud.U(r,0),n)},o.prototype.Hc=function(r,n){this.wb.Aa[0].uc(2*this.ud.U(r,0),n)},o.prototype.Oa=function(r){var n=new u.h;return this.wb.D(this.ud.U(r,0),n),n},o.prototype.ZF=function(r,n){this.jt.uc(2*r,n)},o.prototype.Vc=function(r,n,l){return this.wb.Vc(r,this.Va(n),l)},o.prototype.setAttribute=function(r,n,l,c){this.wb.setAttribute(r,this.Va(n),l,c)},o.prototype.Va=function(r){return this.ud.U(r,0)},o.prototype.kh=function(){var r=new u.h;return this.D(void 0,r),r.y},o.prototype.hq=function(r,n){r=this.Va(r),n=this.Va(n);var l=this.wb.Aa[0].o;return l[2*r]===l[2*n]&&l[2*r+1]===l[2*n+1]},o.prototype.Fv=function(r,n){r=this.Va(r);var l=this.wb.Aa[0].o;return l[2*r]===n.x&&l[2*r+1]===n.y},o.prototype.rX=function(r,n){if(1>n&&(n=1),this.Ug==null){if(n==1)return;this.Ug=u.Zc.Fn(this.wb.I(),1)}(r=this.Va(r))>=this.Ug.size&&this.Ug.resize(r+1,1),this.Ug.write(r,n)},o.prototype.YF=function(r){return r=this.Va(r),this.Ug==null||r>=this.Ug.size?1:this.Ug.read(r)},o.prototype.Sa=function(r,n,l){n=this.di[n],r=this.Va(r),n.size<this.wb.I()&&n.resize(this.wb.I(),-1),n.write(r,l)},o.prototype.Qa=function(r,n){return(r=this.Va(r))<(n=this.di[n]).size?n.read(r):-1},o.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var r=0;r<this.di.length;r++)if(this.di[r]==null)return this.di[r]=u.Zc.Qh(0,-1),r;return this.di.push(u.Zc.Qh(0,-1)),this.di.length-1},o.prototype.Ud=function(r){this.di[r]=null},o.prototype.cc=function(r){return this.Te!=null?(r=this.Va(r),this.Te[r]):null},o.prototype.fd=function(r,n){var l=this.ud.U(r,2);if(l==-1)return!1;if(this.aA){var c=new u.Ta;this.Xi(r,c),n.setStart(c),this.Xi(l,c),n.setEnd(c)}else this.wb.Hc(this.ud.U(r,0),ni),n.gm(0,ni),this.wb.Hc(this.ud.U(l,0),ni),n.gm(1,ni);return!0},o.prototype.hW=function(r,n,l){if(this.aA){var c=new u.Ta;this.Xi(r,c),l.setStart(c),this.Xi(n,c),l.setEnd(c)}else this.wb.Hc(r,ni),l.gm(0,ni),this.wb.Hc(n,ni),l.gm(1,ni)},o.prototype.wf=function(r,n){if(n!=-1){if(r!=this.Sf(n))throw u.i.Ra();var l=this.es(n)}else l=this.mv(r);var c=this.rU(r);return n!=-1&&this.ep(n,c),this.cp(c,n),this.ep(c,l),l!=-1?this.cp(l,c):this.ap(r,c),n==-1&&this.bp(r,c),this.Tl(r,this.ea(r)+1),c},o.prototype.iG=function(r,n,l,c){r=this.wf(r,-1);for(var p=0,f=n,g=!1;f==l&&(g=!0),this.cj(f,r),p++,(f=this.V(f))!=n;);return this.mn(r,!0),this.Xj(r,p),g&&(n=l),this.Kf(r,n),this.Yg(r,this.Na(n)),this.fp(r,!1),c!=null&&(c[0]=g),r},o.prototype.ar=function(r){var n=this.es(r),l=this.Sb(r),c=this.Sf(r);return n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.vO(r),this.Tl(c,this.ea(c)-1),this.nF(r),l},o.prototype.vO=function(r){var n=this.Ya(r);if(n!=-1){for(var l=0,c=this.Ka(r);l<c;l++){var p=n;n=this.V(n),this.Qy(p)}n=this.Sf(r),this.Vj(n,this.I(n)-this.Ka(r))}this.Xj(r,0)},o.prototype.Sb=function(r){return this.nd.U(r,2)},o.prototype.es=function(r){return this.nd.U(r,1)},o.prototype.Ka=function(r){return this.nd.U(r,3)},o.prototype.ec=function(r){return(1&this.Up(r))!=0},o.prototype.mn=function(r,n){if(this.ec(r)!=n){if(0<this.Ka(r)){var l=this.Ya(r),c=this.tj(r);n?(this.Cc(c,l),this.Dc(l,c),l=this.Va(c)):(this.Cc(c,-1),this.Dc(l,-1),l=this.Va(c)),this.Zg(l,null)}this.QB(r,(1|this.Up(r))-1|(n?1:0))}},o.prototype.Sf=function(r){return this.nd.U(r,7)},o.prototype.TS=function(r){return(2&this.Up(r))!=0},o.prototype.KB=function(r,n){this.QB(r,(2|this.Up(r))-2|(n?2:0))},o.prototype.qz=function(r){if(this.YS(r))return this.Qi.get(this.sv(r));var n=new u.zb,l=this.Ya(r);if(l==-1)return 0;var c=new u.h;this.D(l,c);for(var p=0,f=0,g=this.Ka(r);f<g;f++,l=this.V(l)){var b=this.cc(l);if(b==null){if(!this.fd(l,n))continue;b=n}p+=b.Sx(c.x,c.y)}return this.fp(r,!0),this.Qi.set(this.sv(r),p),p},o.prototype.ir=function(r,n,l){n=this.Ek[n],r=this.sv(r),n.size<this.Qi.size&&n.resize(this.Qi.size,-1),n.write(r,l)},o.prototype.uj=function(r,n){return(r=this.sv(r))<(n=this.Ek[n]).size?n.read(r):-1},o.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var r=0;r<this.Ek.length;r++)if(this.Ek[r]==null)return this.Ek[r]=u.Zc.Qh(0),r;return this.Ek.push(u.Zc.Qh(0)),this.Ek.length-1},o.prototype.xB=function(r){this.Ek[r]=null},o.prototype.UT=function(r,n,l){if(l==-1)throw u.i.O();if(n!=l){var c=this.Sb(l),p=this.es(l),f=this.Sf(l);p==-1?this.ap(f,c):this.cp(p,c),c==-1?this.bp(f,p):this.ep(c,p),this.Vj(f,this.I(f)-this.Ka(l)),this.Tl(f,this.ea(f)-1),p=n==-1?this.mv(r):this.es(n),this.ep(l,p),this.cp(l,n),n==-1?this.bp(r,l):this.ep(n,l),p==-1?this.ap(r,l):this.cp(p,l),this.Vj(r,this.I(r)+this.Ka(l)),this.Tl(r,this.ea(r)+1),this.gx(l,r)}},o.prototype.kj=function(r,n){this.wb.we(this.Va(n),this.pm()),this.yj(r,-1,this.pm())},o.prototype.qd=function(r,n){var l=this.cd(r),c=this.Na(r),p=this.V(r);c!=-1&&this.Cc(c,p);var f=this.Ka(l);if(r==this.Ya(l)&&this.Kf(l,1<f?p:-1),p!=-1&&this.Dc(p,c),r==this.tj(l)&&this.Yg(l,1<f?c:-1),c!=-1&&p!=-1){c=this.Va(c);var g=this.Va(p);n?(n=this.Uh(c))!=null&&(c=new u.h,this.wb.D(g,c),n.Rc(c)):(g=this.Va(r),n=this.Uh(g),this.Zg(c,n),n!=null&&(c=this.wb.Oa(c),n.Ec(c)))}return this.Xj(l,f-1),l=this.Sf(l),this.Vj(l,this.I(l)-1),this.Qy(r),p},o.prototype.Ya=function(r){return this.nd.U(r,4)},o.prototype.tj=function(r){return this.nd.U(r,5)},o.prototype.V=function(r){return this.ud.U(r,2)},o.prototype.Na=function(r){return this.ud.U(r,1)},o.prototype.cd=function(r){return this.ud.U(r,3)},o.prototype.hc=function(r,n){return this.yj(r,-1,n)},o.prototype.$q=function(r){if(r===void 0)return this.$q(!1);if(r instanceof h)return new h(r);var n,l=-1,c=-1,p=-1,f=0,g=!1;for(n=this.md;n!=-1;n=this.ve(n))if(!r||u.ba.Ic(this.jc(n))){for(l=this.Ob(n);l!=-1;l=this.Sb(l))if(p=c=this.Ya(l),f=0,c!=-1){g=!0;break}if(g)break}return h.vP(this,n,l,c,p,f,r)},o.prototype.Pc=function(r){if(this.Kl.Pc(r),this.Te!=null)for(var n=0,l=this.Te.length;n<l;n++)this.Te[n]!=null&&this.Te[n].Pc(r)},o.prototype.lr=function(r,n,l,c){c?this.JX(r,n,l):this.IX(r,n,l)},o.prototype.Dc=function(r,n){this.ud.T(r,1,n)},o.prototype.Cc=function(r,n){this.ud.T(r,2,n)},o.prototype.cj=function(r,n){this.ud.T(r,3,n)},o.prototype.Xj=function(r,n){this.nd.T(r,3,n)},o.prototype.Kf=function(r,n){this.nd.T(r,4,n)},o.prototype.Yg=function(r,n){this.nd.T(r,5,n)},o.prototype.Tl=function(r,n){this.dd.T(r,6,n)},o.prototype.Vj=function(r,n){this.dd.T(r,5,n)},o.prototype.kJ=function(r){var n=r;do{var l=this.V(n);this.Cc(n,this.Na(n)),this.Dc(n,l),n=l}while(n!=r)},o.prototype.XB=function(r){this.gd=r},o.prototype.br=function(r){var n=this.es(r),l=this.Sb(r),c=this.Sf(r);n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.Kf(r,-1),this.Yg(r,-1),this.nF(r)},o.prototype.oi=function(r,n){var l=this.Na(r),c=this.V(r);if(l!=-1&&this.Cc(l,c),c!=-1&&this.Dc(c,l),l!=-1&&c!=-1)if(l=this.Va(l),c=this.Va(c),n){if((n=this.Uh(l))!=null){var p=new u.h;this.wb.D(c,p),n.Rc(p)}}else n=this.Va(r),n=this.Uh(n),this.Zg(l,n),n!=null&&(p=new u.h,this.wb.D(l,p),n.Ec(p));this.Qy(r)},o.prototype.YS=function(r){return(4&this.Up(r))!=0},o.prototype.fp=function(r,n){this.QB(r,(4|this.Up(r))-4|(n?4:0))},o.prototype.nx=function(r,n){var l=this.ud.o;this.wb.oc();var c=this.wb.Aa[0].o;r.Wd(0,n,function(p,f){var g=l[5*p];p=l[5*f],f=c[2*g],g=c[2*g+1];var b=c[2*p];return g<(p=c[2*p+1])?-1:g>p?1:f<b?-1:f>b?1:0})},o.prototype.eS=function(){for(var r=this.md;r!=-1;r=this.ve(r))if(!u.ba.Ic(this.jc(r)))return!0;return!1},o.prototype.cC=function(r,n){for(var l=this.Ob(r),c=this.Ob(n),p=this.mv(r),f=this.mv(n),g=this.Ob(r);g!=-1;g=this.Sb(g))this.gx(g,n);for(g=this.Ob(n);g!=-1;g=this.Sb(g))this.gx(g,r);this.ap(r,c),this.ap(n,l),this.bp(r,f),this.bp(n,p),l=this.I(r),c=this.ea(r),p=this.ea(n),this.Vj(r,this.I(n)),this.Vj(n,l),this.Tl(r,p),this.Tl(n,c),l=this.dd.U(r,2),this.dd.T(r,2,this.dd.U(n,2)),this.dd.T(n,2,l)},o}(),u.hd=k})(q||(q={})),function(u){var k=function(v){function h(o,r,n,l){var c=v.call(this)||this;return c.aa=new u.l,o===void 0?c.PE():typeof o=="number"?c.QO(o,r,n,l):o instanceof u.Ta?r!==void 0?c.Su(o,r,n):c.RO(o):o instanceof u.sa?r!==void 0?c.TO(o,r):c.SO(o):o instanceof u.l?c.PO(o):c.PE(),c}return pe(h,v),h.prototype.Su=function(o,r,n){this.description=u.fe.pg(),this.aa.Pa(),o.B()||this.vu(o,r,n)},h.prototype.PO=function(o){this.description=u.fe.pg(),this.aa.L(o),this.aa.normalize()},h.prototype.SO=function(o){if(o==null)throw u.i.O();this.description=o,this.aa.Pa()},h.prototype.TO=function(o,r){if(o==null)throw u.i.O();this.description=o,this.aa.L(r),this.aa.normalize()},h.prototype.PE=function(){this.description=u.fe.pg(),this.aa.Pa()},h.prototype.RO=function(o){this.description=u.fe.pg(),this.aa.Pa(),o.B()||this.vu(o)},h.prototype.QO=function(o,r,n,l){this.description=u.fe.pg(),this.L(o,r,n,l)},h.prototype.L=function(o,r,n,l){if(this.wc(),typeof o=="number")this.aa.L(o,r,n,l);else for(this.Pa(),r=0,n=o.length;r<n;r++)this.$b(o[r])},h.prototype.Zo=function(o){if(this.wc(),!o.aT())throw u.i.O();this.aa.L(o)},h.prototype.Pa=function(){this.wc(),this.aa.Pa()},h.prototype.B=function(){return this.aa.B()},h.prototype.S=function(){return this.aa.S()},h.prototype.da=function(){return this.aa.da()},h.prototype.ik=function(){return this.aa.ik()},h.prototype.Lp=function(){return this.aa.Lp()},h.prototype.Kp=function(){return this.aa.tf()},h.prototype.$b=function(o){if(o instanceof u.h)this.wc(),this.aa.$b(o);else if(o instanceof u.l)this.wc(),this.aa.$b(o);else if(o instanceof u.Ta){if(this.wc(),!o.Bc()){var r=o.description;if(this.description!=r&&this.Ll(r),this.B())this.vu(o);else{this.aa.$b(o.D());for(var n=1,l=r.Ba;n<l;n++)for(var c=r.Fd(n),p=u.sa.Wa(c),f=0;f<p;f++){var g=o.Vc(c,f),b=this.Vg(c,f);b.$b(g),this.setInterval(c,f,b)}}}}else if(o instanceof h&&!o.B())for((r=o.description)!=this.description&&this.Ll(r),this.aa.$b(o.aa),n=1,l=r.Ba;n<l;n++)for(c=r.ld(n),p=u.sa.Wa(c),f=0;f<p;f++)g=o.Vg(c,f),(b=this.Vg(c,f)).$b(g),this.setInterval(c,f,b)},h.prototype.vu=function(o,r,n){if(r!==void 0){this.aa.L(o.D(),r,n),n=1;for(var l=(r=o.description).Ba;n<l;n++)for(var c=r.Fd(n),p=u.sa.Wa(c),f=0;f<p;f++){var g=o.Vc(c,f);this.setInterval(c,f,g,g)}}else for(this.aa.L(o.la[0],o.la[1]),n=1,l=(r=o.description).Ba;n<l;n++)for(c=r.Fd(n),p=u.sa.Wa(c),f=0;f<p;f++)g=o.Vc(c,f),this.setInterval(c,f,g,g)},h.prototype.setInterval=function(o,r,n,l){if(n=typeof n=="number"?new u.Oc(n,l):n,this.wc(),o==0)if(r==0)this.aa.v=n.pa,this.aa.C=n.wa;else{if(r!=1)throw u.i.de();this.aa.G=n.pa,this.aa.H=n.wa}else this.qD(0,o,r,n.pa),this.qD(1,o,r,n.wa)},h.prototype.X=function(o,r){this.wc(),this.aa.X(o,r)},h.prototype.Pc=function(o){if(o instanceof u.Ed)this.wc(),o.hC(this.aa);else if(this.wc(),!this.aa.B()){var r=new u.JK;this.So(r),r.SS()?r.Pa():o.hC(r)}},h.prototype.copyTo=function(o){if(o.K()!=this.K())throw u.i.O();if(o.wc(),o.description=this.description,o.aa.L(this.aa),o.la=null,this.la!=null){o.qu();for(var r=0;r<2*(this.description.Be.length-2);r++)o.la[r]=this.la[r]}},h.prototype.Ja=function(){return new h(this.description)},h.prototype.He=function(){return this.aa.rF()},h.prototype.Rb=function(){return this.aa.tR()},h.prototype.K=function(){return 197},h.prototype.Eb=function(){return 2},h.prototype.dn=function(o){this.copyTo(o)},h.prototype.A=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H},h.prototype.So=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H,o.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},h.prototype.Vg=function(o,r){var n=new u.Oc;return n.L(this.Pd(0,o,r),this.Pd(1,o,r)),n},h.prototype.If=function(o,r){r.Pf(this.description);var n=this.description.Ba-1;switch(o){case 0:for(o=0;o<n;o++)for(var l=this.description.ld(o),c=u.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(0,l,p));r.Db(this.aa.v,this.aa.G);break;case 1:for(o=0;o<n;o++)for(l=this.description.ld(o),c=u.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(1,l,p));r.Db(this.aa.v,this.aa.H);break;case 2:for(o=0;o<n;o++)for(l=this.description.ld(o),c=u.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(0,l,p));r.Db(this.aa.C,this.aa.H);break;case 3:for(o=0;o<n;o++)for(l=this.description.ld(o),c=u.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(1,l,p));r.Db(this.aa.C,this.aa.G);break;default:throw u.i.de()}},h.prototype.hB=function(o,r){o=this.aa.hB(o),r.na(o.x,o.y)},h.prototype.fR=function(o,r){return r*(o.Qq-2)},h.prototype.sF=function(o,r,n){if(this.aa.B())throw u.i.ga("empty geometry");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=u.sa.Wa(r))throw u.i.O();var l=this.description.Rf(r);return this.qu(),0<=l?this.la[this.fR(this.description,o)+this.description.GR(l)-2+n]:u.sa.te(r)},h.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var o=h.Ig(this.description,0),r=h.Ig(this.description,1),n=0,l=1,c=this.description.Ba;l<c;l++){var p=this.description.ld(l),f=u.sa.Wa(p);p=u.sa.te(p);for(var g=0;g<f;g++)this.la[o+n]=p,this.la[r+n]=p,n++}}},h.prototype.un=function(o){if(this.la!=null)if(2<o.Be.length){for(var r=u.fe.Kw(o,this.description),n=[],l=h.Ig(this.description,0),c=h.Ig(this.description,1),p=h.Ig(o,0),f=h.Ig(o,1),g=0,b=1,x=o.Ba;b<x;b++){var $=o.ld(b),E=u.sa.Wa($);if(r[b]==-1){var O=u.sa.te($);for($=0;$<E;$++)n[p+g]=O,n[f+g]=O,g++}else for(O=this.description.bk(r[b])-2,$=0;$<E;$++)n[p+g]=this.la[l+O],n[f+g]=this.la[c+O],g++,O++}this.la=n}else this.la=null;this.description=o},h.prototype.Pd=function(o,r,n){if(this.aa.B())throw u.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=u.sa.Wa(r))throw u.i.de();var l=this.description.Rf(r);return 0<=l?(this.qu(),this.la[h.Ig(this.description,o)+this.description.bk(l)-2+n]):u.sa.te(r)},h.prototype.qD=function(o,r,n,l){if(this.wc(),r==0)o!=0?n!=0?this.aa.H=l:this.aa.C=l:n!=0?this.aa.G=l:this.aa.v=l;else{if(n>=u.sa.Wa(r))throw u.i.de();if(!this.hasAttribute(r)){if(u.sa.yG(r,l))return;this.se(r)}r=this.description.Rf(r),this.qu(),this.la[h.Ig(this.description,o)+this.description.bk(r)-2+n]=l}},h.Ig=function(o,r){return r*(o.Be.length-2)},h.prototype.Fa=function(o){this.wc();var r=new u.l;return o.A(r),this.aa.Fa(r)},h.prototype.isIntersecting=function(o){return o instanceof u.l?this.aa.isIntersecting(o):this.aa.isIntersecting(o.aa)},h.prototype.Lu=function(o,r){this.wc(),o.B()?this.Pa():r!==void 0?this.vu(o,r,void 0):this.aa.Lu(o.Ng(),o.kh())},h.prototype.offset=function(o,r){this.wc(),this.aa.offset(o,r)},h.prototype.normalize=function(){this.wc(),this.aa.normalize()},h.prototype.tf=function(o){if(o===void 0){if(o=new u.Ta(this.description),this.B())return o;for(r=this.description.Ba,n=1;n<r;n++)for(l=this.description.Fd(n),c=u.sa.Wa(l),p=0;p<c;p++)f=.5*(this.Pd(0,l,p)+this.Pd(1,l,p)),o.setAttribute(l,p,f);return o.Db(this.aa.ik(),this.aa.Lp()),o}if(o.Pf(this.description),this.B())o.Pa();else{for(var r=this.description.Ba,n=1;n<r;n++)for(var l=this.description.ld(n),c=u.sa.Wa(l),p=0;p<c;p++){var f=.5*(this.sF(0,l,p)+this.sF(1,l,p));o.setAttribute(l,p,f)}o.Db(this.aa.tf())}},h.prototype.hz=function(){return new u.Ta(this.aa.hz())},h.prototype.contains=function(o){return o instanceof u.Ta?!o.B()&&this.aa.contains(o.Ng(),o.kh()):this.aa.contains(o.aa)},h.prototype.ZO=function(o){return this.aa.contains(o)},h.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof h)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.aa.Nb(o.aa))return!1;for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},h.prototype.dc=function(){var o=this.description.dc();if(o=u.P.Vh(o,this.aa.dc()),!this.B()&&this.la!=null)for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)o=u.P.Vh(o,this.la[r]);return o},h.prototype.gs=function(){return this.aa.v},h.prototype.js=function(){return this.aa.G},h.prototype.fs=function(){return this.aa.C},h.prototype.hs=function(){return this.aa.H},h.prototype.ng=function(){return u.si.im(this,null)},h.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},h}(u.ba);u.Hh=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n){h===void 0?this.Pa():(this.v=h,this.G=o,this.C=r,this.H=n)}return v.construct=function(h,o,r,n){var l=new v;return l.v=h,l.G=o,l.C=r,l.H=n,l},v.prototype.L=function(h,o,r,n){typeof h=="number"?r!==void 0?(this.v=h,this.G=o,this.C=r,this.H=n,this.normalize()):(this.v=h,this.G=o,this.C=h,this.H=o):h instanceof u.h?o!==void 0?(this.v=h.x-.5*o,this.C=this.v+o,this.G=h.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=h.x,this.G=h.y,this.C=h.x,this.H=h.y):h instanceof v?this.L(h.v,h.G,h.C,h.H):h instanceof u.Oc&&(h.B()||o.B()?this.Pa():(this.v=h.pa,this.C=h.wa,this.G=o.pa,this.H=o.wa))},v.prototype.bx=function(h,o){if(o!==void 0)if(o==0)this.Pa();else{this.v=h[0].x,this.G=h[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<o;r++){var n=h[r];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(h==null||h.length==0)this.Pa();else for(n=h[0],this.L(n.x,n.y),r=1;r<h.length;r++)o=h[r],this.Nk(o.x,o.y)},v.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.$b=function(h,o){typeof h=="number"?this.B()?(this.v=h,this.G=o,this.C=h,this.H=o):(this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>o?this.G=o:this.H<o&&(this.H=o)):h instanceof u.h||h instanceof u.Od?this.$b(h.x,h.y):h instanceof v&&!h.B()&&(this.$b(h.v,h.G),this.$b(h.C,h.H))},v.prototype.Nk=function(h,o){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>o?this.G=o:this.H<o&&(this.H=o)},v.prototype.X=function(h,o){this.B()||(this.v-=h,this.C+=h,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Pa())},v.prototype.scale=function(h){0>h&&this.Pa(),this.B()||(this.v*=h,this.C*=h,this.G*=h,this.H*=h)},v.prototype.zoom=function(h,o){this.B()||this.L(this.tf(),h*this.S(),o*this.da())},v.prototype.isIntersecting=function(h){return!this.B()&&!h.B()&&(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},v.prototype.CG=function(h){return(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},v.prototype.Fa=function(h){return!this.B()&&!h.B()&&(h.v>this.v&&(this.v=h.v),h.C<this.C&&(this.C=h.C),h.G>this.G&&(this.G=h.G),h.H<this.H&&(this.H=h.H),(h=this.v<=this.C&&this.G<=this.H)||this.Pa(),h)},v.prototype.hB=function(h){switch(h){case 0:return u.h.construct(this.v,this.G);case 1:return u.h.construct(this.v,this.H);case 2:return u.h.construct(this.C,this.H);case 3:return u.h.construct(this.C,this.G);default:throw u.i.de()}},v.prototype.iB=function(h){if(h==null||4>h.length)throw u.i.O();h[0]!=null?h[0].na(this.v,this.G):h[0]=u.h.construct(this.v,this.G),h[1]!=null?h[1].na(this.v,this.H):h[1]=u.h.construct(this.v,this.H),h[2]!=null?h[2].na(this.C,this.H):h[2]=u.h.construct(this.C,this.H),h[3]!=null?h[3].na(this.C,this.G):h[3]=u.h.construct(this.C,this.G)},v.prototype.rF=function(){return this.B()?0:this.S()*this.da()},v.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},v.prototype.ik=function(){return(this.C+this.v)/2},v.prototype.Lp=function(){return(this.H+this.G)/2},v.prototype.S=function(){return this.C-this.v},v.prototype.da=function(){return this.H-this.G},v.prototype.move=function(h,o){this.B()||(this.v+=h,this.G+=o,this.C+=h,this.H+=o)},v.prototype.Lu=function(h,o){if(o!==void 0)this.move(h-this.ik(),o-this.Lp());else if(h instanceof u.h)this.Lu(h.x,h.y);else{if(!(h instanceof u.Ta))throw u.i.O();o=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=h.Ng()-o,this.C=h.Ng()+o,this.G=h.kh()-r,this.H=h.kh()+r}},v.prototype.offset=function(h,o){this.v+=h,this.C+=h,this.G+=o,this.H+=o},v.prototype.normalize=function(){if(!this.B()){var h=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=h,this.C=o,h=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=h,this.H=o}},v.prototype.fn=function(h){h.na(this.v,this.G)},v.prototype.VI=function(h){h.na(this.C,this.G)},v.prototype.YI=function(h){h.na(this.v,this.H)},v.prototype.gn=function(h){h.na(this.C,this.H)},v.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},v.prototype.tf=function(){return u.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},v.prototype.hz=function(){return u.h.construct(this.v,this.G)},v.prototype.contains=function(h,o){if(o!==void 0)return h>=this.v&&h<=this.C&&o>=this.G&&o<=this.H;if(h instanceof u.Ta)return this.contains(h.Ng(),h.kh());if(h instanceof u.h)return this.contains(h.x,h.y);if(h instanceof v)return h.v>=this.v&&h.C<=this.C&&h.G>=this.G&&h.H<=this.H;throw u.i.O()},v.prototype.jm=function(h,o){if(o!==void 0)return h>this.v&&h<this.C&&o>this.G&&o<this.H;if(h instanceof u.h)return this.jm(h.x,h.y);if(h instanceof v)return h.v>this.v&&h.C<this.C&&h.G>this.G&&h.H<this.H;throw u.i.O()},v.prototype.Nb=function(h){return h==this||h instanceof v&&(!(!this.B()||!h.B())||this.v==h.v&&this.G==h.G&&this.C==h.C&&this.H==h.H)},v.prototype.dc=function(){var h=this.v;h=u.P.truncate(h^h>>>32);var o=u.P.Vh(h);return h=this.C,h=u.P.truncate(h^h>>>32),o=u.P.Vh(h,o),h=this.G,h=u.P.truncate(h^h>>>32),o=u.P.Vh(h,o),h=this.H,h=u.P.truncate(h^h>>>32),u.P.Vh(h,o)},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},v.prototype.uy=function(h,o){var r=this.ak(h),n=this.ak(o);if(r&n)return 0;if(!(r|n))return 4;var l=(r!=0?1:0)|(n!=0?2:0);do{var c=o.x-h.x,p=o.y-h.y;if(c>p?r&v.TC?(r&v.lu?(h.y+=p*(this.v-h.x)/c,h.x=this.v):(h.y+=p*(this.C-h.x)/c,h.x=this.C),r=this.ak(h)):n&v.TC?(n&v.lu?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)):r!=0?(r&v.mu?(h.x+=c*(this.G-h.y)/p,h.y=this.G):(h.x+=c*(this.H-h.y)/p,h.y=this.H),r=this.ak(h)):(n&v.mu?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.ak(o)):r&v.UC?(r&v.mu?(h.x+=c*(this.G-h.y)/p,h.y=this.G):(h.x+=c*(this.H-h.y)/p,h.y=this.H),r=this.ak(h)):n&v.UC?(n&v.mu?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.ak(o)):r!=0?(r&v.lu?(h.y+=p*(this.v-h.x)/c,h.x=this.v):(h.y+=p*(this.C-h.x)/c,h.x=this.C),r=this.ak(h)):(n&v.lu?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)),(r&n)!=0)return 0}while(r|n);return l},v.prototype.ak=function(h){return(h.x<this.v?1:0)|(h.x>this.C?1:0)<<1|(h.y<this.G?1:0)<<2|(h.y>this.H?1:0)<<3},v.prototype.Di=function(h){return!this.B()&&(this.S()<=h||this.da()<=h)},v.prototype.ub=function(h){return h instanceof u.h?Math.sqrt(this.dK(h)):Math.sqrt(this.px(h))},v.prototype.px=function(h){var o=0,r=0,n=this.v-h.C;return n>o&&(o=n),(n=this.G-h.H)>r&&(r=n),(n=h.v-this.C)>o&&(o=n),(n=h.G-this.H)>r&&(r=n),o*o+r*r},v.prototype.dK=function(h){var o=0,r=0,n=this.v-h.x;return n>o&&(o=n),(n=this.G-h.y)>r&&(r=n),(n=h.x-this.C)>o&&(o=n),(n=h.y-this.H)>r&&(r=n),o*o+r*r},v.prototype.en=function(h){this.B()?h.Pa():h.L(this.v,this.C)},v.lu=1,v.mu=4,v.TC=3,v.UC=12,v}();u.l=k}(q||(q={})),function(u){var k,v;(v=k||(k={}))[v.initialize=0]="initialize",v[v.initializeRed=1]="initializeRed",v[v.initializeBlue=2]="initializeBlue",v[v.initializeRedBlue=3]="initializeRedBlue",v[v.sweep=4]="sweep",v[v.sweepBruteForce=5]="sweepBruteForce",v[v.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",v[v.sweepRedBlue=7]="sweepRedBlue",v[v.sweepRed=8]="sweepRed",v[v.sweepBlue=9]="sweepBlue",v[v.iterate=10]="iterate",v[v.iterateRed=11]="iterateRed",v[v.iterateBlue=12]="iterateBlue",v[v.iterateBruteForce=13]="iterateBruteForce",v[v.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",v[v.resetRed=15]="resetRed",v[v.resetBlue=16]="resetBlue";var h=function(){function o(r,n){this.ei=r,this.ZG=n}return o.prototype.qr=function(r,n,l){this.ei.FX(l,r,n,this.ZG)},o.prototype.bq=function(r){return this.ei.Tr(r,this.ZG)},o}();k=function(){function o(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new u.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return o.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new u.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.bd=function(r,n){if(!this.Rv)throw u.i.Hb();var l=new u.l;l.L(n),this.io.add(r),this.Fb.push(l)},o.prototype.Hp=function(){if(!this.Rv)throw u.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},o.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new u.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.DD=function(r,n){if(!this.Qv)throw u.i.Hb();var l=new u.l;l.L(n),this.io.add(r),this.Fb.push(l)},o.prototype.dF=function(){if(!this.Qv)throw u.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},o.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new u.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},o.prototype.zD=function(r,n){if(!this.Pv)throw u.i.Hb();var l=new u.l;l.L(n),this.ew.add(r),this.rd.push(l)},o.prototype.cF=function(){if(!this.Pv)throw u.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},o.prototype.next=function(){if(this.Jc)return!1;for(var r=!0;r;)switch(this.Yb){case 0:r=this.Bz();break;case 1:r=this.mS();break;case 2:r=this.jS();break;case 3:r=this.lS();break;case 4:r=this.QX();break;case 5:r=this.MX();break;case 6:r=this.NX();break;case 7:r=this.OX();break;case 8:r=this.tx();break;case 9:r=this.dC();break;case 10:r=this.Pz();break;case 11:r=this.eT();break;case 12:r=this.bT();break;case 13:r=this.cT();break;case 14:r=this.dT();break;case 15:r=this.fJ();break;case 16:r=this.eJ();break;default:throw u.i.Ra()}return!this.Jc},o.prototype.WB=function(r){this.ra=r},o.prototype.oz=function(r){return this.Fb[r]},o.prototype.Wy=function(r){return this.rd[r]},o.prototype.pl=function(r){return this.io.read(r)},o.prototype.jl=function(r){return this.ew.read(r)},o.Oz=function(r){return(1&r)==1},o.gq=function(r){return(1&r)==0},o.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},o.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new u.ur(!0),this.qo=this.sd.getIterator(),this.Md=new u.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},o.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new u.ur(!0),this.qo=this.sd.getIterator(),this.Md=new u.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},o.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new u.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new u.ja(0)),this.ff.mr();for(var r=0;r<this.rd.length;r++){var n=this.rd[r];this.ff.Dr(n.v,n.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},o.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new u.ur(!0),this.qo=this.sd.getIterator(),this.Md=new u.ja(0)),this.ff==null&&(this.ff=new u.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new u.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.ff.mr(),r=0;r<this.rd.length;r++)n=this.rd[r],this.ff.Dr(n.v,n.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);for(r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},o.prototype.QX=function(){var r=this.Md.get(--this.qe),n=r>>1;return o.gq(r)?(this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=10,!0)},o.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},o.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},o.prototype.OX=function(){var r=this.Md.get(this.qe-1),n=this.Ff.get(this.Tg-1),l=this.Tr(r,!0),c=this.Tr(n,!1);return l>c?this.tx():l<c?this.dC():o.Oz(r)?this.tx():o.Oz(n)?this.dC():this.tx()},o.prototype.tx=function(){var r=this.Md.get(--this.qe),n=r>>1;if(o.gq(r))return this.Ef!=-1&&this.Kj.get(n)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(n)),this.Kj.set(n,-1)):this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(r=this.Bd.sc(this.Df);r!=-1;){var l=this.Bd.getData(r);this.ff.xj(l),this.Jj.set(l,-1),l=this.Bd.lb(r),this.Bd.kd(this.Df,r),r=l}return 0<this.ff.size()?(this.qw.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new u.lp),this.Kj=new u.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(n,this.Bd.addElement(this.Ef,n)),this.Yb=7),!0},o.prototype.dC=function(){var r=this.Ff.get(--this.Tg),n=r>>1;if(o.gq(r))return this.Df!=-1&&this.Jj.get(n)!=-1?(this.Bd.kd(this.Df,this.Jj.get(n)),this.Jj.set(n,-1)):this.ff.remove(n),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(r=this.Bd.sc(this.Ef);r!=-1;){var l=this.Bd.getData(r);this.sd.xj(l),this.Kj.set(l,-1),l=this.Bd.lb(r),this.Bd.kd(this.Ef,r),r=l}return 0<this.sd.size()?(this.qo.zB(this.rd[n].v,this.rd[n].C,this.ra),this.Bf=n,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new u.lp),this.Jj=new u.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(n,this.Bd.addElement(this.Df,n)),this.Yb=7),!0},o.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.qe)>>1;return this.sd.xj(r),this.Yb=4,!0},o.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var r=this.Ff.get(this.Tg)>>1;return this.ff.xj(r),this.Yb=7,!0},o.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.qe)>>1;return this.sd.xj(r),this.Yb=7,!0},o.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var r=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Tg,!1)},o.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var r=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Tg,!1)},o.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},o.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},o.prototype.Mt=function(r,n,l){this.Cm==null&&(this.Cm=new u.Zt),l=new h(this,l),this.Cm.sort(r,0,n,l)},o.prototype.FX=function(r,n,l,c){var p=this;r.Wd(n,l,function(f,g){var b=p.Tr(f,c),x=p.Tr(g,c);return b<x||b==x&&o.gq(f)&&o.Oz(g)?-1:1})},o.prototype.Tr=function(r,n){var l=.5*this.ra;return n?(n=this.Fb[r>>1],o.gq(r)?n.G-l:n.H+l):(n=this.rd[r>>1],o.gq(r)?n.G-l:n.H+l)},o}(),u.sC=k}(q||(q={})),function(u){var k=function(){function v(){}return v.construct=function(h,o,r,n,l,c){var p=new v;return p.v=h,p.G=o,p.Xe=r,p.C=n,p.H=l,p.Dg=c,p},v.prototype.Pa=function(){this.Xe=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.SS=function(){return isNaN(this.Xe)},v.prototype.L=function(h,o,r,n,l,c){n!==void 0?typeof h=="number"?(this.v=h,this.G=o,this.Xe=r,this.C=n,this.H=l,this.Dg=c):(this.v=h.x-.5*o,this.C=this.v+o,this.G=h.y-.5*r,this.H=this.G+r,this.Xe=h.z-.5*n,this.Dg=this.Xe+n):(this.v=h,this.G=o,this.Xe=r,this.C=h,this.H=o,this.Dg=r)},v.prototype.move=function(h){this.v+=h.x,this.G+=h.y,this.Xe+=h.z,this.C+=h.x,this.H+=h.y,this.Dg+=h.z},v.prototype.copyTo=function(h){h.v=this.v,h.G=this.G,h.C=this.C,h.H=this.H},v.prototype.Nk=function(h,o,r){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Xe)==0?this.Xe>r?this.Xe=r:this.Dg<r&&(this.Dg=r):this.Dg=this.Xe=r},v.prototype.$b=function(h,o,r){if(typeof h=="number")this.B()?(this.v=h,this.G=o,this.Xe=r,this.C=h,this.H=o,this.Dg=r):this.Nk(h,o,r);else if(h instanceof u.Od)this.$b(h.x,h.y,h.z);else{if(!(h instanceof v))throw u.i.O();h.B()||(this.$b(h.v,h.G,h.Xe),this.$b(h.C,h.H,h.Dg))}},v.prototype.construct=function(h,o,r){h.B()||o.B()?this.Pa():(this.v=h.pa,this.C=h.wa,this.G=o.pa,this.H=o.wa,this.Xe=r.pa,this.Dg=r.wa)},v.prototype.iB=function(h){if(h==null||8>h.length)throw u.i.O();h[0]=new u.Od(this.v,this.G,this.Xe),h[1]=new u.Od(this.v,this.H,this.Xe),h[2]=new u.Od(this.C,this.H,this.Xe),h[3]=new u.Od(this.C,this.G,this.Xe),h[4]=new u.Od(this.v,this.G,this.Dg),h[5]=new u.Od(this.v,this.H,this.Dg),h[6]=new u.Od(this.C,this.H,this.Dg),h[7]=new u.Od(this.C,this.G,this.Dg)},v.prototype.bx=function(h){if(h==null||h.length==0)this.Pa();else{var o=h[0];for(this.L(o.x,o.y,o.z),o=1;o<h.length;o++){var r=h[o];this.Nk(r.x,r.y,r.z)}}},v}();u.JK=k}(q||(q={})),function(u){(function(k){k.Ra=function(){var v=Error();return v.message="Internal Error",v},k.Fe=function(){var v=Error();return v.message="Not Implemented",v},k.Zk=function(){var v=Error();return v.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",v},k.Hb=function(){var v=Error();return v.message="Invalid Call",v},k.O=function(v){var h=Error();return h.message="Illegal Argument Exception",v!==void 0&&(h.message+=": "+v),h},k.hu=function(v){var h=Error();return h.message=v!==void 0?"Runtime Exception: "+v:"Runtime Exception.",h},k.ga=function(v){var h=Error();return h.message="Geometry Exception: "+v,h},k.BK=function(){var v=Error();return v.message="Assert Failed Exception",v},k.de=function(){var v=Error();return v.message="IndexOutOfBoundsException",v},k.RC=function(){var v=Error();return v.message="UserCancelException",v}})(u.i||(u.i={}))}(q||(q={})),function(u){(u=u.dm||(u.dm={}))[u.forward=0]="forward",u[u.reverse=1]="reverse"}(q||(q={})),function(u){var k=function(){function o(r,n){this.Xa=r,this.AH=n,this.GH=-1,this.ul=!1}return o.prototype.re=function(){},o.prototype.next=function(){if(++this.GH==this.AH.I())return null;var r=this.AH.Oa(this.GH);r.scale(this.Xa.fc);var n=new u.Ea;return this.Xa.ny(r,this.ul,n),n},o.prototype.Ma=function(){return 0},o}(),v=function(){function o(r,n,l){this.Xa=r,this.tw=n,this.Zn=!1,this.fo=l,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new u.Ea,this.wk=[]}return o.prototype.re=function(){},o.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var r=u.ba.kg(this.sq);return u.Hg.Ok(r,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}r=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var n=this.wk.length=0,l=new u.h,c=new u.h,p=[0];this.td.Ia()&&8>this.AA;){var f=this.td.ia();if(l.N(f.bc()),c.N(f.xc()),l.scale(this.Xa.fc),c.scale(this.Xa.fc),u.ej.Ou(l,c)?l.x=c.x:u.ej.Mu(l,c)&&(c.x=l.x),this.wk.length=0,u.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,l,c,this.Xa.LA,this.Xa.at,p,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(f=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,f,f.length-1)),u.ej.Nu(l,c)?(this.sq.Pa(),this.Xa.ny(l,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(p[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}r==null&&(r=new u.Ea).$k(null,0),this.JD(r),n++}if(this.dw[0]=0,0<n){for(p=this.td.xb();0<n;)this.td.ni(),l.N(this.tw.Oa(this.td.xb())),c.N(this.tw.Oa(this.td.kk())),l.scale(this.Xa.fc),c.scale(this.Xa.fc),this.ul&&(u.ej.Ou(l,c)?l.x=c.x:u.ej.Mu(l,c)&&(c.x=l.x)),this.wk.length=0,u.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,c,l,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(r),n--;return l.N(this.tw.Oa(this.td.xb())),l.scale(this.Xa.fc),h.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,l,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,r,NaN,NaN),this.td.Wb(p),this.td.ia(),n=u.ua.mj(null,r,!0),u.Hg.Ok(r,n,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),r=u.ba.kg(this.sq),u.Hg.Ok(r,this.Xa.Cq,!0,!0,this.Xa.Vb)},o.prototype.JD=function(r){var n=this.wk[0],l=this.Pj[0]-1.570796326794897,c=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var p=this.fi+1.570796326794897;l=p+3.141592653589793-(this.fi-this.Pj[0])}else l=(p=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var f=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),g=!1;if(Math.abs(l-p)<=.5*this.Xa.co)if(f){var b=r.Oa(r.I()-2);b.scale(this.Xa.fc);var x=new u.ha(0);for(u.kb.Sy(this.Xa.Ub,this.Xa.lc,n.x,n.y,b.x,b.y,x),b=x.u;b<=p;)b+=6.283185307179586;for(;b>p;)b-=6.283185307179586;b<l&&(g=!0)}else g=!0;g?(r.yB(0,r.I()-1),this.ul||((n=new u.h).N(r.Oa(r.I()-1)),n.scale(this.Xa.fc),-3.141592653589793>n.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<n.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),f||(l=.5*(l+p))):(f?((p=new u.h).N(n),p.scale(1/this.Xa.fc),r.xf(0,-1,p)):h.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],p,l,this.Xa.co,this.ul,this.uk,r,NaN,NaN),this.AA+=1)}h.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,l,c,this.ul,this.uk,r),this.fi=this.Is[0]},o.prototype.sy=function(r,n){return this.Xa.sy(this.wk,r,this.Pj[0],this.Is[0],this.ul,n)},o.prototype.Ma=function(){return 0},o}(),h=function(){function o(){}return o.buffer=function(r,n,l,c,p,f){if(r==null)throw u.i.O("Geometry::Geodesic_bufferer::buffer");if(r.B())return new u.Ea(r.description);var g=new o;g.Sg=n,g.Kc=u.cb.tc(n);var b=u.cb.xv(g.Kc);if(g.Vb=f,g.Ub=u.cb.gv(g.Kc),g.lc=b*(2-b),g.fc=g.Kc.Id().ci,g.ra=g.Sg.Mn(),g.Cq=g.Kc.Mn(),g.at=g.Cq*g.fc,g.Bq=1.570796326794897/g.fc,g.KY=3.141592653589793/g.fc,g.Ls=6.283185307179586/g.fc,g.LY=g.Ls/6,g.GA=0,g.JY=1.5707963267948966*g.Ub/g.GA,l==4?(g.Ae=2,g.Yv=!0):(g.Ae=l,g.Yv=!1),g.La=c,g.sb=Math.abs(c),isNaN(p)||.001>p?g.tX():g.bo=p,l=r.K(),u.ba.zd(l)?((l=new u.Ua(r.description)).pc(r,!0),r=l,l=1607):l==197&&(l=new u.l,r.A(l),l.S()<=g.ra||l.da()<=g.ra?((l=new u.Ua(r.description)).bd(r,!1),r=l,l=1607):((l=new u.Ea(r.description)).bd(r,!1),r=l,l=1736)),g.uX(),u.ba.Tn(l)||g.vX(),g.sb<=.5*g.bo)return l!=1736?new u.Ea(r.description):g.Yv?r:u.ej.Sr(r,g.Sg,g.Ae,g.LA,-1,f);if(0>g.La&&l!=1736)return new u.Ea(r.description);if(g.Yv&&u.ba.Ic(l)?(n=u.ej.Sr(r,n,4,NaN,g.bo,f),r=u.cb.Bh(n,g.Sg,g.Kc)):r=u.cb.Bh(r,g.Sg,g.Kc),(r=u.Jh.nj(r,g.Kc)).B())return new u.Ea(r.description);switch(!g.Yv&&u.ba.Ic(l)&&(r=u.ej.kI(g.fc,r)),r=o.GX(r,g.Kc),l){case 1736:n=g.PN(r);break;case 1607:n=g.QN(r);break;case 550:n=g.NN(r);break;case 33:n=g.ON(r);break;default:throw u.i.ga("corrupted_geometry")}return(g=u.cb.Bh(n,g.Kc,g.Sg)).Ll(r.description),g},o.prototype.PN=function(r){var n=new u.Ea;r=new v(this,r,n),r=u.Ih.local().W(r,this.Kc,this.Vb).next(),r=u.kp.pj(r,this.Kc,2);var l=new u.Ed;return l.scale(1/this.fc,1/this.fc),n.Pc(l),n=u.kp.pj(n,this.Kc,2),0<=this.La?u.Ih.local().W(n,r,this.Kc,this.Vb):u.mp.local().W(n,r,this.Kc,this.Vb)},o.prototype.QN=function(r){return r=new v(this,r,null),r=u.Ih.local().W(r,this.Kc,this.Vb).next(),u.kp.pj(r,this.Kc,2)},o.prototype.NN=function(r){return r=new k(this,r),r=u.Ih.local().W(r,this.Kc,this.Vb).next(),u.kp.pj(r,this.Kc,2)},o.prototype.ON=function(r){(r=r.D()).scale(this.fc);var n=new u.Ea;return this.ny(r,!1,n),u.kp.pj(n,this.Kc,2)},o.prototype.sy=function(r,n,l,c,p,f){var g=r[0],b=r[r.length-1],x=g.y>b.y?g.y:b.y,$=u.F.q(this.Ub,this.lc,g.y<b.y?g.y:b.y);if(x=u.F.q(this.Ub,this.lc,x),.001<this.GA-($+n+this.sb)&&.001<this.GA+(x-n-this.sb))return!1;$=(n=l-1.570796326794897)-3.141592653589793,x=n+3.141592653589793;var E=(l=c+1.570796326794897)+3.141592653589793,O=[NaN],C=[NaN],N=[NaN],D=[NaN];if(c=!1,o.ZI(this.Ub,this.lc,this.sb,g,n,$,b,l,O,C),o.ZI(this.Ub,this.lc,this.sb,b,E,l,g,$,N,D),(l<O[0]&&O[0]<E||l<C[0]&&C[0]<E)&&(c=!0),c||($<N[0]&&N[0]<n||$<D[0]&&D[0]<n)&&(c=!0),!c&&p)return!1;for(var z=[],R=r.length-1;0<=R;R--)z.push(r[R]);return f.Pa(),f.$k(null,0),R=[0],o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,r,n,l,p,R,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,b,l,E,this.co,p,R,f,O[0],C[0]),o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,z,E,x,p,R,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,g,$,n,this.co,p,R,f,N[0],D[0]),r=!1,p||(r=this.DE(this.fc,f)),c||r},o.prototype.ny=function(r,n,l){l.Pa(),l.$k(null,0),o.Jr(this.Ub,this.lc,this.fc,this.sb,r,-this.co,6.283185307179586,this.co,n,[0],l,NaN,NaN),n||this.DE(this.fc,l)},o.prototype.DE=function(r,n){var l=this.qO(r,n);return r=this.rO(r,n),l||r},o.prototype.qO=function(r,n){var l=n.I(),c=!1,p=new u.l;if(n.A(p),!u.s.$(p.H*r,1.570796326794897)&&!u.s.$(p.G*r,-1.570796326794897))return!1;var f=new u.h;for(--l;0<=l;l--)n.D(l,f),(f.y==p.H&&u.s.$(f.y*r,1.570796326794897)||f.y==p.G&&u.s.$(f.y*r,-1.570796326794897))&&(c=!0,this.JI(f,l,n));return c},o.prototype.rO=function(r,n){var l=n.Oa(0),c=n.Oa(n.I()-1);return 3.141592653589793<Math.abs(l.x-c.x)*r?(this.QV(n),!0):this.pO(n)},o.prototype.pO=function(r){return 0>r.He()&&(this.PV(r),!0)},o.prototype.JI=function(r,n,l){var c=l.I(),p=0<n?n-1:c-1;if(c=l.Oa(n<c-1?n+1:0),p=l.Oa(p),!u.s.$(c.y,r.y)&&!u.s.$(c.x,r.x)){var f=new u.h;f.na(c.x,r.y),l.Db(n,f)}u.s.$(p.y,r.y)||u.s.$(p.x,r.x)||((c=new u.h).na(p.x,r.y),l.xf(0,n,c))},o.prototype.QV=function(r){var n=new u.Ea,l=new u.Ea,c=new u.Ed,p=r.Oa(0),f=r.Oa(r.I()-1),g=new u.h;p.x>f.x?(f=this.Bq,c.ig(-this.Ls,0)):(f=-this.Bq,c.ig(this.Ls,0)),n.add(r,!1),r.Pa(),l.add(n,!1),l.Pc(c),p=new u.l,l.A(p),p.X((this.Ls-p.S())/2,0),p.G=-this.Bq,p.H=this.Bq;for(var b=0;b<l.I();b++)l.D(b,g),n.xf(0,-1,g);for(l.Pc(c),b=0;b<l.I();b++)l.D(b,g),n.xf(0,-1,g);l=n.Oa(0),c=n.Oa(n.I()-1),g.na(c.x,f),n.xf(0,-1,g),g.na(.5*(c.x+l.x),f),n.xf(0,-1,g),g.na(l.x,f),n.xf(0,-1,g),n=u.Jh.ms(n,this.Kc,2,!0,p.v),n=u.Jh.ms(n,this.Kc,2,!0,p.C),n=u.Vd.clip(n,p,this.Cq,NaN),r.add(n,!1)},o.prototype.PV=function(r){var n=new u.l;r.A(n),n.X((this.Ls-n.S())/2,0),n.G=-this.Bq,n.H=this.Bq,r.$k(null,0);var l=new u.h;l.na(n.v,n.G),r.xf(1,-1,l),l.na(n.v,n.H),r.xf(1,-1,l),l.na(.5*(n.v+n.C),n.H),r.xf(1,-1,l),l.na(n.C,n.H),r.xf(1,-1,l),l.na(n.C,n.G),r.xf(1,-1,l),l.na(.5*(n.v+n.C),n.G),r.xf(1,-1,l)},o.my=function(r,n,l,c,p,f,g,b,x,$,E){var O=null;x||((O=new u.h).Sc(),0<E.I()&&(O.N(E.Oa(E.I()-1)),O.scale(l)));var C=new u.ha(0),N=new u.ha(0),D=new u.ha(0),z=new u.h,R=new u.h,G=f[f.length-1];l=1/l;for(var H=0;H<f.length;H++){var B=f[H];if(H==0)var tt=g;else H==f.length-1?tt=b:(u.kb.xd(r,n,G.x,G.y,B.x,B.y,null,null,C,p),tt=C.u-1.570796326794897);u.kb.Ai(r,n,B.x,B.y,c,tt,N,D),x?R.na(N.u,D.u):(z.na(N.u,D.u),o.bJ(B.x,z.x,O.x,$),R.na($[0]+z.x,z.y),O.N(R)),R.scale(l),E.xf(0,-1,R)}},o.Jr=function(r,n,l,c,p,f,g,b,x,$,E,O,C){if(!(g-f<b)){var N=new u.ha(0),D=new u.ha(0),z=new u.h,R=new u.h,G=null;x||((G=new u.h).Sc(),0<E.I()&&(G.N(E.Oa(E.I()-1)),G.scale(l)));var H=u.P.truncate(Math.ceil(f/b)),B=H++*b;for(B==f&&(B=H++*b),l=1/l;B<g+b&&(f<O&&O<B?(B=O,H--):f<C&&C<B&&(B=C,H--),!(B>=g));)u.kb.Ai(r,n,p.x,p.y,c,B,N,D),x?R.na(N.u,D.u):(z.na(N.u,D.u),o.bJ(p.x,z.x,G.x,$),R.na($[0]+z.x,z.y),G.N(R)),R.scale(l),E.xf(0,-1,R),f=B,B=H++*b}},o.ZI=function(r,n,l,c,p,f,g,b,x,$){var E=new u.h,O=new u.h,C=new u.ha(0),N=new u.ha(0);for(u.kb.Ai(r,n,c.x,c.y,l,p,C,N),E.na(C.u,N.u),u.kb.Ai(r,n,c.x,c.y,l,f,C,N),O.na(C.u,N.u),l=new u.ha(0),u.kb.Sy(r,n,g.x,g.y,E.x,E.y,l),x[0]=l.u,u.kb.Sy(r,n,g.x,g.y,O.x,O.y,l),$[0]=l.u;x[0]<=$[0];)x[0]+=6.283185307179586;for(;x[0]>$[0];)x[0]-=6.283185307179586;for(;x[0]>=b;)x[0]-=6.283185307179586,$[0]-=6.283185307179586;for(;x[0]<b;)x[0]+=6.283185307179586,$[0]+=6.283185307179586},o.bJ=function(r,n,l,c){if(isNaN(l)){for(;3.141592653589793<c[0]+n-r;)c[0]-=6.283185307179586;for(;3.141592653589793<r-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-l?c[0]-=6.283185307179586:3.141592653589793<l-(c[0]+n)&&(c[0]+=6.283185307179586)},o.GX=function(r,n){var l=r.K(),c=u.ba.Ic(l)?r.ea():l==550?r.I():1;if(c==1)return r;var p=new u.ja(0);p.resize(c);for(var f=[],g=new u.l,b=0;b<c;b++){if(p.write(b,b),u.ba.Ic(l)){r.Tj(b,g);var x=g.tf()}else x=r.Oa(b);x=u.SK.WX(n,x),f[b]=x}for(p.Wd(0,p.size,function($,E){return f[$]<f[E]?-1:f[$]>f[E]?1:0}),n=r.Ja(),b=0;b<c;b++)g=p.read(b),u.ba.Ic(l)?n.addPath(r,g,!0):n.Gd(r,g,g+1);return n},o.prototype.uX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new u.h;n.na(0,10*this.fc);var l=45*this.fc,c=new u.ha(0),p=new u.ha(0),f=new u.ha(0),g=new u.ha(0),b=new u.ha(0),x=new u.ha(0),$=new u.ha(0),E=new u.ha(0),O=new u.h,C=new u.h,N=new u.h,D=new u.h;u.kb.Ai(this.Ub,this.lc,n.x,n.y,r,0,c,p),O.na(c.u,p.u),u.kb.Ai(this.Ub,this.lc,n.x,n.y,r,l,f,g),C.na(f.u,g.u),c=new u.ha(0),p=new u.ha(0);for(var z=new u.ha(0);u.kb.Ai(this.Ub,this.lc,n.x,n.y,r,.5*(0+l),b,x),N.na(b.u,x.u),u.kb.xd(this.Ub,this.lc,O.x,O.y,C.x,C.y,c,p,null,2),u.kb.qj(this.Ub,this.lc,O.x,O.y,.5*c.u,p.u,$,E,2),D.na($.u,E.u),u.kb.xd(this.Ub,this.lc,N.x,N.y,D.x,D.y,z,null,null,2),!(z.u<=this.bo);)l*=.9,u.kb.Ai(this.Ub,this.lc,n.x,n.y,r,l,f,g),C.na(f.u,g.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},o.prototype.vX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new u.h,l=new u.h;n.na(0,10*this.fc),l.na(10*this.fc,10*this.fc);var c=new u.ha(0),p=new u.ha(0),f=new u.ha(0);u.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,f,c,p,this.Ae);var g=new u.ha(0),b=new u.ha(0),x=new u.ha(0),$=new u.ha(0),E=new u.h,O=new u.ha(0),C=new u.ha(0),N=new u.ha(0),D=new u.ha(0),z=new u.ha(0),R=new u.ha(0),G=new u.ha(0),H=new u.ha(0),B=new u.ha(0),tt=new u.h,X=new u.h,rt=new u.h,ct=new u.h,ht=1;c=c.u,p=p.u+1.570796326794897,f=f.u,u.kb.Ai(this.Ub,this.lc,n.x,n.y,r,c-1.570796326794897,C,N),tt.na(C.u,N.u),u.kb.Ai(this.Ub,this.lc,l.x,l.y,r,p,D,z),X.na(D.u,z.u),C=new u.ha(0),N=new u.ha(0),p=new u.ha(0);for(var Tt=new u.ha(0);u.kb.qj(this.Ub,this.lc,n.x,n.y,.5*(0+ht)*f,c,g,b,this.Ae),E.na(g.u,b.u),u.kb.xd(this.Ub,this.lc,n.x,n.y,E.x,E.y,null,null,O,this.Ae),u.kb.Ai(this.Ub,this.lc,E.x,E.y,r,O.u+1.570796326794897,R,G),rt.na(R.u,G.u),u.kb.xd(this.Ub,this.lc,tt.x,tt.y,X.x,X.y,C,N,null,2),u.kb.qj(this.Ub,this.lc,tt.x,tt.y,.5*C.u,N.u,H,B,2),ct.na(H.u,B.u),u.kb.xd(this.Ub,this.lc,rt.x,rt.y,ct.x,ct.y,p,null,null,2),!(p.u<=this.bo);)ht*=.9,u.kb.qj(this.Ub,this.lc,n.x,n.y,ht*f,c,x,$,this.Ae),l.na(x.u,$.u),u.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,null,null,Tt,this.Ae),u.kb.Ai(this.Ub,this.lc,l.x,l.y,r,Tt.u+1.570796326794897,D,z),X.na(D.u,z.u);1e5<(r=ht*f)&&(r=1e5),this.LA=r},o.prototype.tX=function(){var r=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/r&&(r=this.sb/500),.01>r&&(r=.01),this.bo=r},o}();u.QK=h}(q||(q={})),function(u){var k=function(){function v(){}return v.Of=function(h,o){var r=new u.h;r.N(o),h.push(r)},v.wp=function(h,o){h.add(o.x),h.add(o.y)},v.cB=function(h){h.Dh(h.size-2)},v.jB=function(h,o){o.na(h.get(h.size-2),h.get(h.size-1))},v.Sr=function(h,o,r,n,l,c){if(h==null)throw u.i.O();var p=h.K();if(h.B()||u.ba.Tn(p))return h;var f=new v;f.Sg=o,f.Kc=u.cb.tc(o);var g=u.cb.xv(f.Kc);if(f.Vb=c,f.Ub=u.cb.gv(f.Kc),f.lc=g*(2-g),f.fc=f.Kc.Id().ci,f.Cq=f.Kc.Mn(),f.at=f.Cq*f.fc,f.vA=n,f.uA=l,f.Ae=r,p==197?(r=new u.Ea(h.description)).bd(h,!1):u.ba.zd(p)?(r=new u.Ua(h.description)).pc(h,!0):r=h,f.Ae!=4){if((o=f.Sg.Nb(f.Kc)==0?u.cb.Bh(r,f.Sg,f.Kc):u.Jh.nj(r,f.Kc)).B())return o;o=v.kI(f.fc,o),o=f.Uy(o),o=u.kp.pj(o,f.Kc,f.Ae),f=u.cb.Bh(o,f.Kc,f.Sg)}else{if(u.Gg.Tb(o)==2?(h=u.cb.ol(),(o=u.Zj.local().W(r,h,o,c))==h&&(o=new u.Ea,h.copyTo(o))):o=u.Jh.nj(r,f.Kc),o.B())return o;f=f.yX(o)}return f},v.kI=function(h,o){var r=new u.l;if(o.yc(r),3.141592653589793>r.S()*h)return o;var n=!1;r=o.Ha();for(var l=new u.h,c=new u.h;r.ab();)for(;r.Ia();){var p=r.ia();if(l.N(p.bc()),c.N(p.xc()),l.scale(h),c.scale(h),3.141592653589793<Math.abs(l.x-c.x)){var f=v.Nu(l,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(l.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ja();var g=1<o.description.Ba,b=new u.h,x=new u.h,$=new u.h,E=new u.h,O=new u.Ta;for(r.aj();r.ab();)for(var C=NaN,N=[0];r.Ia();){if(p=r.ia(),l.N(p.bc()),c.N(p.xc()),l.scale(h),c.scale(h),isNaN(C)?(v.Yi(l.x,NaN,N),x.N(l)):x.N($),C=x.x,f=v.Nu(l,c)){if(6.283185307179586<c.x-l.x)for(;6.283185307179586<c.x-l.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-l.x)for(;-6.283185307179586>c.x-l.x;)c.x+=6.283185307179586;v.Yi(c.x,NaN,N),$.N(c)}else b.N(c),v.vU(b),v.Yi(b.x,C,N),$.na(N[0]+b.x,b.y);.5>Math.abs($.x-c.x)&&$.N(c),g?(p.Vw(0,O),E.N(x),E.scale(1/h),O.Db(E),(f=r.xm())?n.nf(O):n.lineTo(O),r.Sn()&&!o.ec(r.gb)&&(p.Vw(1,O),E.N($),E.scale(1/h),O.Db(E),n.lineTo(O))):((f=r.xm())&&n.Cz(null,0),p=n.ea()-1,E.N(x),E.scale(1/h),n.xf(p,-1,E),r.Sn()&&!o.ec(r.gb)&&(E.N($),E.scale(1/h),n.xf(p,-1,E)))}return n},v.oF=function(h,o,r,n,l,c,p,f,g,b,x,$){var E=new u.h,O=new u.h,C=0<n.compare(l);v.aJ(C,n,l,E,O),v.pF(h,o,r,E,O,c,NaN,p,f,g,b,null,x,$),C&&v.aC(g,b,null,x)},v.prototype.Uy=function(h){var o=h.Ja(),r=h.Ha(),n=[],l=null,c=null,p=1<h.description.Ba;p&&(l=new u.ce(0),c=new u.jg);for(var f=[0],g=new u.h,b=new u.h,x=new u.h,$=new u.h;r.ab();)for(f[0]=0;r.Ia();){var E=r.ia();g.N(E.bc()),b.N(E.xc()),g.scale(this.fc),b.scale(this.fc);var O=0<g.compare(b);v.aJ(O,g,b,x,$),n.length=0,l!=null&&l.Dh(0),0<this.vA?v.pF(this.Ub,this.lc,this.Ae,x,$,this.vA,this.uA,this.at,null,null,null,p?l:null,n,f):v.WQ(this.Ub,this.lc,this.Ae,x,$,this.uA,this.at,p?l:null,n,f),O&&v.aC(null,null,p?l:null,n),n[0].N(E.bc()),n[n.length-1].N(E.xc());for(var C=1;C<n.length-1;C++)n[C].scale(1/this.fc);p?(O=v.$I(O,E,c),v.OD(r.xm(),r.Sn()&&!h.ec(r.gb),E,O,l,n,o)):v.ND(r.xm(),r.Sn()&&!h.ec(r.gb),n,o)}return o},v.prototype.yX=function(h){var o=h.Ja(),r=h.Ha(),n=[],l=null,c=new u.jg,p=1<h.description.Ba;for(p&&(l=new u.ce(0));r.ab();)for(;r.Ia();){var f=r.ia(),g=f.bc(),b=f.xc();g=0<g.compare(b),b=v.$I(g,f,c),n.length=0,l!=null&&l.Dh(0),v.xX(this.Ub,this.lc,this.fc,b,this.Sg,this.vA,this.uA,p?l:null,n),g&&v.aC(null,null,p?l:null,n),p?v.OD(r.xm(),r.Sn()&&!h.ec(r.gb),f,b,l,n,o):v.ND(r.xm(),r.Sn()&&!h.ec(r.gb),n,o)}return o},v.ND=function(h,o,r,n){h&&n.Cz(null,0),h=n.ea()-1;var l=r.slice(0);n.lG(h,l,l.length-1),o&&n.xf(h,-1,r[r.length-1])},v.OD=function(h,o,r,n,l,c,p){var f=new u.Ta;if(r.Vo(f),h?p.nf(f):p.lineTo(f),2<c.length){h=n.Rb();for(var g=1;g<c.length-1;g++){var b=n.IG(l.get(g)*h);n.Vw(b,f),f.Db(c[g]),p.lineTo(f)}}o&&(r.Ro(f),p.lineTo(f))},v.pF=function(h,o,r,n,l,c,p,f,g,b,x,$,E,O){var C=new u.ha(0),N=new u.ha(0),D=new u.ha(0);u.kb.xd(h,o,n.x,n.y,l.x,l.y,D,C,N,r),D=D.u;var z=C=C.u;0>z&&(z+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),g!=null&&(g[0]=D),b!=null&&(b[0]=z),x!=null&&(x[0]=N),b=g=NaN,$!=null&&(g=((b=u.F.Ch(h,o))-(x=u.F.q(h,o,n.y)))/D,b=(b+x)/D),x=v.Ou(n,l),N=v.Mu(n,l),z=x||N;var R=v.AE(n,l,f),G=new u.ha(0),H=new u.ha(0),B=new u.h,tt=new u.h,X=new u.h;v.Yi(n.x,NaN,O);var rt=[O[0]];if(D<=c)v.Of(E,n),v.Yi(l.x,NaN,O),$!=null&&$.add(0),z?(x&&v.fB(n,l,$,E),N&&v.dB(n,l,$,E)):R?v.eB(n,l,C,g,b,$,E):0<p&&(tt.na(n.x-rt[0],n.y),B.na(l.x-O[0],l.y),v.Ty(h,o,r,n,D,C,tt,B,0,1,p,$,E,rt)),v.Of(E,l);else{var ct=D/((c=1+u.P.truncate(Math.ceil(D/c)))-1),ht=new u.h,Tt=0;v.Of(E,n),ht.N(n),tt.na(n.x-O[0],n.y),$!=null&&$.add(0);for(var dt=1;dt<c;dt++){if(dt<c-1){u.kb.qj(h,o,n.x,n.y,dt*ct,C,G,H,r),B.na(G.u,H.u),v.Yi(B.x,ht.x,O),X.na(O[0]+B.x,B.y);var Ut=dt/(c-1)}else v.Yi(l.x,NaN,O),B.na(l.x-O[0],l.y),X.N(l),Ut=1;z?(dt==1&&x&&v.fB(n,X,$,E),dt==c-1&&N&&v.dB(ht,l,$,E)):R?v.zE(ht,X,f)&&(n.x<l.x?ht.x>X.x&&(O[0]+=6.283185307179586,X.na(O[0]+B.x,B.y)):ht.x<X.x&&(O[0]-=6.283185307179586,X.na(O[0]+B.x,B.y)),v.eB(ht,X,C,g,b,$,E)):0<p&&v.Ty(h,o,r,n,D,C,tt,B,Tt,Ut,p,$,E,rt),v.Of(E,X),$!=null&&$.add(Ut),ht.N(X),tt.N(B),rt[0]=O[0],Tt=Ut}}},v.WQ=function(h,o,r,n,l,c,p,f,g,b){var x=new u.ha(0),$=new u.ha(0),E=new u.ha(0);u.kb.xd(h,o,n.x,n.y,l.x,l.y,E,x,$,r),$=E.u,x=x.u;var O=E=NaN;if(f!=null){O=u.F.Ch(h,o);var C=u.F.q(h,o,n.y);E=(O-C)/$,O=(O+C)/$}C=v.Ou(n,l);var N=v.Mu(n,l),D=C||N;p=v.AE(n,l,p);var z=v.Nu(n,l);z=D||p||z,v.Yi(n.x,NaN,b);var R=new u.h;v.Of(g,n),R.N(n),f!=null&&f.add(0),z?(D?(C&&v.fB(n,l,f,g),N&&v.dB(n,l,f,g)):p&&v.eB(n,l,x,E,O,f,g),v.Yi(l.x,NaN,b),v.Of(g,l)):$<=c?(v.Yi(l.x,NaN,b),v.Of(g,l)):(E=new u.h,p=new u.h,E.N(n),p.N(l),E.x-=b[0],p.x-=b[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),v.Ty(h,o,r,n,$,x,E,p,0,1,c,f,g,b),v.Of(g,l),v.Yi(l.x,NaN,b)),f!=null&&f.add(1)},v.Ty=function(h,o,r,n,l,c,p,f,g,b,x,$,E,O){var C=new u.h,N=new u.h;C.na(p.x+O[0],p.y),new u.ha(0),new u.ha(0),new u.ha(0),new u.ha(0);var D=new u.ha(0),z=new u.ha(0),R=new u.ha(0),G=new u.h,H=new u.h,B=new u.h,tt=new u.h;G.N(p),H.N(f),p=new u.ce(0),f=new u.ce(0),v.wp(p,H),f.add(b);var X=new u.h,rt=new u.zb,ct=[];for(v.TJ(4,ct);0<p.size;){for(var ht,Tt=!1,dt=NaN,Ut=0;3>Ut;Ut++)if(ht=ct[Ut]*b+(1-ct[Ut])*g,u.kb.qj(h,o,n.x,n.y,ht*l,c,D,z,r),B.na(D.u,z.u),Ut==0&&(dt=ht,tt.N(B)),v.RW(G,B,H,rt),rt.ic(rt.ge(B,!0),X),u.kb.xd(h,o,B.x,B.y,X.x,X.y,R,null,null,2),R.u>x){Tt=!0;break}Tt?(H.N(tt),b=dt,v.wp(p,H),f.add(b)):(v.cB(p),f.Gn(f.size-1,1,f.size-1),0<p.size&&(v.Yi(H.x,C.x,O),N.na(O[0]+H.x,H.y),v.Of(E,N),C.N(N),$!=null&&$.add(b),G.N(H),g=b,v.jB(p,H),b=f.get(f.size-1)))}},v.xX=function(h,o,r,n,l,c,p,f,g){var b=new u.h,x=new u.h,$=new u.h,E=new u.h,O=new u.h,C=new u.h,N=new u.h,D=new u.h,z=new u.h,R=new u.h,G=new u.ha(0),H=new u.ha(0),B=new u.h,tt=[[],[]],X=u.Gg.Tb(l)==1;l=l.Yd(0);var rt=n.bc(),ct=n.xc();X?(C.na(rt.x*r,rt.y*r),N.na(ct.x*r,ct.y*r)):(tt[0][0]=rt.x,tt[0][1]=rt.y,tt[1][0]=ct.x,tt[1][1]=ct.y,u.cb.wt(),C.x=tt[0][0]*r,C.y=tt[0][1]*r,N.x=tt[1][0]*r,N.y=tt[1][1]*r);var ht=0,Tt=0,dt=1,Ut=n.Rn();b.N(rt),x.N(ct),ct=new u.ce(0);var jt=new u.ce(0),_t=new u.ce(0);v.wp(ct,x),v.wp(jt,N),_t.add(dt),v.Of(g,b),f!=null&&f.add(Tt);var Le=[],di=0<p?Ut?5:3:Ut?5:1;v.TJ(di,Le);for(var je=new u.ha(0),ue=new u.ha(0),ce=new u.ha(0),ee=new u.ha(0),Ue=new u.ha(0),Qt=new u.ha(0),jr=new u.ha(0);0<jt.size;){var ae=!1,Ki=NaN;for(u.kb.xd(h,o,C.x,C.y,N.x,N.y,je,ue,null,2),rt=0;rt<di&&!(rt==0&&(!Ut&&0>=p&&je.u<=c&&3.141592653589793>Math.abs(C.x-N.x)||n.Tx(Tt,dt)<=l));rt++){var ge=Le[rt]*dt+(1-Le[rt])*Tt;if(n.ic(ge,$),X?D.na($.x*r,$.y*r):(tt[0][0]=$.x,tt[0][1]=$.y,u.cb.wt(),D.x=tt[0][0]*r,D.y=tt[0][1]*r),rt==0&&(Ki=ge,O.N($),R.N(D),0<c&&(je.u>c||3.141592653589793<=Math.abs(C.x-N.x)))){ae=!0;break}if(Ut&&0<c){if(u.kb.xd(h,o,C.x,C.y,D.x,D.y,ce,null,null,2),ce.u>c||3.141592653589793<=Math.abs(C.x-D.x)){ae=!0;break}}else if(0<p){if(Ut?(E.IS(b,x,Le[rt]),X?z.na(E.x*r,E.y*r):(tt[0][0]=E.x,tt[0][1]=E.y,u.cb.wt(),z.x=tt[0][0]*r,z.y=tt[0][1]*r)):(E.N($),z.N(D)),u.kb.xd(h,o,C.x,C.y,z.x,z.y,ee,null,null,2),!(ee.u<=je.u)){ae=!0;break}if(u.kb.qj(h,o,C.x,C.y,ee.u,ue.u,G,H,2),B.na(G.u,H.u),u.kb.xd(h,o,B.x,B.y,D.x,D.y,Ue,null,null,2),Ue.u>p){ae=!0;break}if(Ut){if(u.kb.xd(h,o,B.x,B.y,z.x,z.y,Qt,null,null,2),Qt.u>p){ae=!0;break}if(u.kb.xd(h,o,z.x,z.y,D.x,D.y,jr,null,null,2),jr.u>p){ae=!0;break}}}}ae?(x.N(O),N.N(R),dt=Ki,v.wp(ct,x),v.wp(jt,N),_t.add(dt)):(v.cB(ct),v.cB(jt),_t.Gn(_t.size-1,1,_t.size-1),v.Of(g,x),ht+=je.u,f!=null&&f.add(ht),0<jt.size&&(b.N(x),C.N(N),Tt=dt,v.jB(ct,x),v.jB(jt,N),dt=_t.get(_t.size-1)))}if(f!=null)for(h=1/ht,rt=0;rt<f.size;rt++)f.write(rt,f.read(rt)*h)},v.aC=function(h,o,r,n){n.reverse(),r!=null&&r.pi(0,r.size,1),r=h!=null?h[0]:NaN,n=o!=null?o[0]:NaN,h!=null&&(h[0]=n),o!=null&&(o[0]=r)},v.aJ=function(h,o,r,n,l){h?(n.N(r),l.N(o)):(n.N(o),l.N(r))},v.$I=function(h,o,r){return h?(r.create(o.K()),o.copyTo(r.get()),r.get().reverse(),r.get()):o},v.Yi=function(h,o,r){if(isNaN(o)){for(;3.141592653589793<r[0]-h;)r[0]-=6.283185307179586;for(;3.141592653589793<h-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+h-o?r[0]-=6.283185307179586:3.141592653589793<o-(r[0]+h)&&(r[0]+=6.283185307179586)},v.RW=function(h,o,r,n){3.141592653589793>Math.abs(o.x-h.x)?(n.Ec(h),3.141592653589793<=r.x-h.x?n.Sl(r.x-6.283185307179586,r.y):3.141592653589793<=h.x-r.x?n.Sl(r.x+6.283185307179586,r.y):n.Sl(r.x,r.y)):(n.Ec(r),3.141592653589793<=h.x-r.x?n.Sl(h.x-6.283185307179586,h.y):3.141592653589793<=r.x-h.x?n.Sl(h.x+6.283185307179586,h.y):n.Sl(h.x,h.y))},v.TJ=function(h,o){for(var r=0;r<h;r++){var n=Math.ceil(r/2)/(h+1);r%2!=0&&(n=-n),o[r]=.5+n}},v.Ou=function(h,o){return!!(u.s.$(h.y,1.570796326794897)&&!u.s.$(o.y,1.570796326794897)||u.s.$(h.y,-1.570796326794897)&&!u.s.$(o.y,-1.570796326794897))},v.Mu=function(h,o){return!!(u.s.$(o.y,1.570796326794897)&&!u.s.$(h.y,1.570796326794897)||u.s.$(o.y,-1.570796326794897)&&!u.s.$(h.y,-1.570796326794897))},v.AE=function(h,o,r){return!(!v.zE(h,o,r)||u.s.$(h.y,1.570796326794897)||u.s.$(h.y,-1.570796326794897)||u.s.$(o.y,1.570796326794897)||u.s.$(o.y,-1.570796326794897))},v.zE=function(h,o,r){return Math.abs(Math.abs(h.x-o.x)-3.141592653589793)<=r},v.Nu=function(h,o){return!!(u.s.$(h.y,1.570796326794897)&&u.s.$(o.y,1.570796326794897)||u.s.$(h.y,-1.570796326794897)&&u.s.$(o.y,-1.570796326794897))},v.fB=function(h,o,r,n){if(0<h.y){var l=new u.h;l.na(o.x,1.570796326794897)}else(l=new u.h).na(o.x,-1.570796326794897);u.s.$(h.x,l.x)||u.s.$(o.y,l.y)||(v.Of(n,l),r!=null&&r.add(0))},v.dB=function(h,o,r,n){if(0<o.y){var l=new u.h;l.na(h.x,1.570796326794897)}else(l=new u.h).na(h.x,-1.570796326794897);u.s.$(o.x,l.x)||u.s.$(h.y,l.y)||(v.Of(n,l),r!=null&&r.add(1))},v.eB=function(h,o,r,n,l,c,p){u.s.Dd(r)?(0<1.570796326794897-h.y&&((r=new u.h).na(h.x,1.570796326794897),v.Of(p,r),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((r=new u.h).na(o.x,1.570796326794897),v.Of(p,r),c!=null&&c.add(n))):(0<1.570796326794897+h.y&&((r=new u.h).na(h.x,-1.570796326794897),v.Of(p,r),c!=null&&c.add(l)),0<1.570796326794897+o.y&&((r=new u.h).na(o.x,-1.570796326794897),v.Of(p,r),c!=null&&c.add(l)))},v.vU=function(h){if(-3.141592653589793>h.x)for(;-3.141592653589793>h.x;)h.x+=6.283185307179586;if(3.141592653589793<h.x)for(;3.141592653589793<h.x;)h.x-=6.283185307179586},v}();u.ej=k}(q||(q={})),function(u){u.kp=function(){function k(){}return k.pj=function(v,h,o){if(v==null||h==null||!u.cb.Xc(h))throw u.i.O();if(v.B())return v;var r=v,n=r.K();if(u.ba.Ic(n)){r=u.Jh.nj(v,h),v=new u.l,r.A(v),n=u.ua.Xd(h,v,!1);for(var l=u.cb.ih(h),c=Math.floor((v.v-l.v)/l.S())*l.S()+l.v;c<v.C;)c>v.v+n&&c<v.C-n&&(r=u.Jh.ms(r,h,o,!0,c)),c+=l.S()}else{if(n==197)return(v=new u.Ea(r.description)).bd(r,!1),k.pj(v,h,o);if(u.ba.zd(n))return(v=new u.Ua(r.description)).pc(r,!0),k.pj(v,h,o)}return k.Py(r,h)},k.Py=function(v,h){if(v==null||h==null||!u.cb.Xc(h))throw u.i.O();if(v.B())return v;var o=v.K();return o==197?(o=new u.Ea(v.description)).bd(v,!1):u.ba.zd(o)?(o=new u.Ua(v.description)).pc(v,!0):o=v,(o=u.Jh.nj(o,h)).B()?o:u.Gg.Tb(h)==1?u.Jh.Hn(o,h,0,o!=v,0):k.IQ(o,h,o!=v)},k.IQ=function(v,h,o){if(!u.cb.Xc(h))throw u.i.O();if(v.B())return v;var r=u.cb.bf(h),n=-180*r;return r*=360,u.Gg.Tb(h)==2&&(r=(n=u.cb.ih(h)).C,r-=n=n.v),u.Jh.Jp(v,n,r,h,o,0,!0)},k}()}(q||(q={})),function(u){u.xY=function(){function k(){}return k.R=function(v){return 0>v?-v:v},k.Mb=function(v,h){return 0<=h?k.R(v):-k.R(v)},k.$=function(v,h){return v==h||k.R(v-h)<=k.EC*(1+(k.R(v)+k.R(h))/2)},k.Dd=function(v){return v==0||k.R(v)<=k.EC},k.Ch=function(v,h){var o=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h;return v/(1+h)*(1+o*(.25+o*(.015625+1/256*o)))*k.zL},k.zL=1.5707963267948966,k.EC=3552713678800501e-30,k}()}(q||(q={})),function(u){var k=function(h){this.Yf=h,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};u.zY=k;var v=function(){function h(o){o===void 0&&(o=null),this.Ej=null,this.Wn=!1,o!==null&&(this.Ej=new k(o))}return h.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},h.prototype.Qf=function(){var o=new h;return this.copyTo(o),o},h.prototype.copyTo=function(o){o.Ej=this.Ej,o.Wn=this.Wn},h.prototype.Lz=function(){this.Wn=!this.Wn},h.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},h.prototype.GJ=function(o){if(0>=o)throw u.i.O();if(o!=this.Fc()){if((o=u.qf.geogtran(o))==null)throw u.i.O("Geogtran not found.");this.Ej=new k(o)}},h.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},h.prototype.pX=function(o){if(o==null)throw u.i.O();var r=null;try{r=u.qf.fromString(u.Tc.PE_TYPE_GEOGTRAN,o)}catch{throw u.i.O()}this.Ej=new k(r)},h.prototype.Nb=function(o){return o==this||!(!(o instanceof h)||(0>=this.Fc()||this.Fc()!=o.Fc())&&!this.sm().isEqual(o.sm()))&&this.Wn==o.Wn},h.prototype.toString=function(){var o="GeographicTransformation: "+this.wz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},h.create=function(o,r){var n=new h;return n.GJ(o),r&&n.Lz(),n},h.pP=function(o,r){var n=new h;return n.pX(o),r&&n.Lz(),n},h}();u.Cx=v}(q||(q={})),function(u){var k=function(){function h(){}return h.construct=function(o,r,n,l){var c=new h;return c.jw=o,c.kw=r,c.MY=n,c.NY=l,c},h.zy=function(o,r){return o.jw==r.jw?o.kw==r.kw?0:o.kw<r.kw?-1:1:o.jw<r.jw?-1:1},h}(),v=function(){function h(){this.tT=[],this.uT=[],this.sp()}return h.fz=function(){return h.eK==null&&(h.eK=new h),h.eK},h.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},h.prototype.dD=function(o){try{var r=[];r=r.sort(k.zy);for(var n=0;n<r.length;n++)o.push(r[n])}catch{}},h}();u.yY=v}(q||(q={})),function(u){var k=function(){function v(){}return v.prototype.tD=function(h){this.Hk=h},v.prototype.RM=function(h){this.Gb=h},v.prototype.sD=function(h){this.Bo=h},v.xE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736)},v.vE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736||20>h.I())},v.wE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736||20>h.I())},v}();u.Wk=k}(q||(q={})),function(u){u.ac=function(){function k(){}return k.OT=function(v){var h=new u.Ea;return h.rx(v.gs(),v.js()),h.Aj(v.gs(),v.hs()),h.Aj(v.fs(),v.hs()),h.Aj(v.fs(),v.js()),h},k.Bh=function(v,h){return v===null?null:u.Gx.local().W(v,h,null)},k.fY=function(v,h){var o=u.Ih.local();return v=new u.$c(v),o.W(v,h,null).next()},k.km=function(v,h,o){return u.mp.local().W(v,h,o,null)},k.gp=function(v,h,o){return u.Jx.local().W(v,h,o,null)},k.RX=function(v,h,o){var r=u.Jx.local();for(v=new u.$c(v),h=new u.$c(h),o=r.W(v,h,o,null),r=[];(h=o.next())!=null;)r.push(h);return r},k.Nb=function(v,h,o){return u.fj.local().W(3,v,h,o,null)},k.OP=function(v,h,o){return u.fj.local().W(4,v,h,o,null)},k.MS=function(v,h,o){var r=u.Zj.local();for(v=new u.$c(v),h=new u.$c(h),o=r.W(v,h,o,null),r=[];(h=o.next())!=null;)r.push(h);return r},k.LP=function(v,h,o){var r=u.mp.local();for(v=new u.$c(v),h=new u.$c(h),o=r.W(v,h,o,null),r=[];(h=o.next())!=null;)r.push(h);return r},k.Fa=function(v,h,o){return u.Zj.local().W(v,h,o,null)},k.LS=function(v,h,o){if((v=u.Zj.local().W(v,h,o,null,1))===null)return[];if(v.K()===550){for(h=[],o=0;o<v.xa;o++)h.push(v.FR(o));return h}return v.K()===33?[v]:[]},k.mY=function(v,h,o){return u.fj.local().W(2,v,h,o,null)},k.contains=function(v,h,o){return u.fj.local().W(1,v,h,o,null)},k.wP=function(v,h,o){return u.fj.local().W(16,v,h,o,null)},k.touches=function(v,h,o){return u.fj.local().W(8,v,h,o,null)},k.yU=function(v,h,o){return u.fj.local().W(32,v,h,o,null)},k.OS=function(v,h,o){return u.fj.local().W(1073741824,v,h,o,null)},k.tB=function(v,h,o,r){return u.uL.local().W(v,h,o,r,null)},k.ub=function(v,h,o,r){var n=null;if(o!=null){if(n=o.Id(),r!=null&&n.Fc()!=r.Fc()&&n.pd!=r.pd)throw u.i.Zk()}else if(r!=null)throw u.i.O();return v=u.lL.local().W(v,h,null),n!==null&&r!==null&&(v=u.Uc.Ph(v,n,r)),v},k.clip=function(v,h,o){return u.fL.local().W(v,u.l.construct(h.gs(),h.js(),h.fs(),h.hs()),o,null)},k.fl=function(v,h,o){if(v==null||h==null)return null;for(v=u.hL.local().W(!0,v,h,o,null),h=[];(o=v.next())!=null;)o.B()||h.push(o);return h.slice(0)},k.HN=function(v,h,o,r,n,l,c,p){if(n===!0)return k.IN(v,h,o,r,l,c,p);if(n=o,h!=null){if(c=h.Id(),r!=null&&c.Fc()!=r.Fc()){if(c.pd!=r.pd)throw u.i.Zk();n=[],u.Uc.SE(o,o.length,r,c,n)}}else if(r!=null)throw u.i.O();if(o=u.vC.local(),l){for(v=new u.$c(v),h=o.W(v,h,n,l,null),v=[];(l=h.next())!=null;)v.push(l);l=v.slice(0)}else for(l=[],r=0;r<v.length;r++)l[r]=o.W(v[r],h,n[r],null);return l},k.IN=function(v,h,o,r,n,l,c){if(h===null||(r==null&&(r=h.Fc()!==4326?h.Id():u.Uc.ah(9001)),r.pd!==0))throw u.i.O();if(u.Uc.SE(o,o.length,r,u.Uc.ah(9001),o),r=u.AC.local(),n){for(v=new u.$c(v),h=r.W(v,h,l,o,c,!1,n,null),o=[];(l=h.next())!=null;)o.push(l);n=o.slice(0)}else{n=[];for(var p=0;p<v.length;p++)n[p]=r.W(v[p],h,l,o[p],c,!1,null)}return n},k.buffer=function(v,h,o,r,n,l,c){var p=o;if(n===!1){if(h!=null){if(n=h.Id(),r!=null&&n.Fc()!=r.Fc()){if(n.pd!=r.pd)throw u.i.Zk();p=u.Uc.Ph(o,r,n)}}else if(r!=null)throw u.i.O();v=u.vC.local().W(v,h,p,null)}else{if(h===null||(r==null&&(r=h.Fc()!==4326?h.Id():u.Uc.ah(9001)),r.pd!==0))throw u.i.O();p=u.Uc.Ph(o,r,u.Uc.ah(9001)),v=u.AC.local().W(v,h,l,p,c,!1,null)}return v},k.wU=function(v,h,o,r,n,l,c){if(h!=null){var p=h.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.pd!=c.pd)throw u.i.Zk();o=u.Uc.Ph(o,c,p)}}else if(c!=null)throw u.i.O();for(v=new u.$c(v),h=u.DC.local().W(v,h,o,r,n,l,null),o=[];(r=h.next())!=null;)o.push(r);return o.slice(0)},k.offset=function(v,h,o,r,n,l,c){if(h!=null){var p=h.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.pd!=c.pd)throw u.i.Zk();o=u.Uc.Ph(o,c,p)}}else if(c!=null)throw u.i.O();return u.DC.local().W(v,h,o,r,n,l,null)},k.dP=function(v){return u.xC.local().W(v,null)},k.eP=function(v,h){var o=u.xC.local();for(v=new u.$c(v),h=o.W(v,h,null),o=[];(v=h.next())!=null;)o.push(v);return o},k.iz=function(v,h,o){return u.Hx.local().iz(v,h,o)},k.jz=function(v,h){return u.Hx.local().jz(v,h)},k.kz=function(v,h,o,r){return u.Hx.local().kz(v,h,o,r)},k.$B=function(v,h){return u.$l.local().W(v,h,!1,null)},k.ZS=function(v,h){return u.$l.local().ts(v,h,null)},k.LQ=function(v,h,o,r,n){var l=u.zC.local();if(h!=null){if(h=h.Id(),n!=null&&h.Fc()!=n.Fc()){if(h.pd!=n.pd)throw u.i.Zk();o=u.Uc.Ph(o,n,h)}}else if(n!=null)throw u.i.O();return l.W(v,o,r,null)},k.Sr=function(v,h,o,r){var n=u.Zl.local();if(h!=null){if(h=h.Id(),r!=null&&h.Fc()!=r.Fc()){if(h.pd!=r.pd)throw u.i.Zk();o=u.Uc.Ph(o,r,h)}}else if(r!=null)throw u.i.O();return n.W(v,o,null)},k.Ry=function(v,h,o,r,n){n===void 0&&(n=0);var l=u.nL.local();if(n==4||n!==0)throw u.i.Fe();if(r!==null){if(r.pd!==0)throw u.i.O("Unit must be a linear unit type");o=u.Uc.Ph(o,r,u.Uc.ah(9001))}return l.W(v,o,h,n,null)},k.RQ=function(v,h,o,r){if(v===null)return 0;if(r==4||r!==0)throw u.i.Fe();if(v.K()==197)v=k.OT(v);else if(v.K()!=1736)return 0;if(r=u.cb.tc(h),v=u.cb.Bh(v,h,r),v=u.PK.SQ([v])[0],o!==null){if(o.pd!==2)throw u.i.O("Unit must be a area unit type");v=u.Uc.Ph(v,u.Uc.ah(109404),o)}return v},k.UQ=function(v,h,o,r){if(v=u.qL.local().W(v,h,r,null),o!==null){if(o.pd!==0)throw u.i.O("Unit must be a linear unit type");v=u.Uc.Ph(v,u.Uc.ah(9001),o)}return v},k.EU=function(v,h,o){if(v===null)return 0;var r=null;if(h!=null){if((r=h.Id()).pd==0&&(r=u.Uc.WF(r))==null&&o!==null)throw u.i.O();if(o!=null&&r.Fc()!=o.Fc()&&r.pd!=o.pd)throw u.i.Zk()}else if(o!=null)throw u.i.O();return v.K()==1736||v.K()==197?(v=v.He(),o!==null?u.Uc.Ph(v,r,o):v):0},k.FU=function(v,h,o){if(v===null||v.B()||1>v.Eb())return 0;var r=null;if(h!=null){if(r=h.Id(),o!=null&&r.Fc()!=o.Fc()&&r.pd!=o.pd)throw u.i.Zk()}else if(o!=null)throw u.i.O();v.K()==1736||v.K()==197?h=v.ng():u.ba.zd(v.K())?(h=new u.Ua(v.description)).pc(v,!0):h=v,v=0,h=h.Ha();for(var n=new u.h,l=new u.h;h.ab();)for(;h.Ia();){var c=h.ia();c.$p(n),c.Vr(l),v+=u.h.ub(n,l)}return r!==null&&o!==null&&(v=u.Uc.Ph(v,r,o)),v},k.aP=function(v){return v.points!==void 0?k.hS(v,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM):v.rings!==void 0?k.gG(v.rings,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"P"):v.paths!==void 0?k.gG(v.paths,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"L"):v.x!==void 0?k.iS(v):v.xmin!==void 0?k.gS(v):null},k.iS=function(v){if(v.x==null||v.x=="NaN")return new u.Ta;var h=new u.Ta(v.x,v.y);return v.z!==void 0&&v.z!==null&&h.sX(v.z),v.m!==void 0&&v.m!==null&&h.cX(v.m),h},k.gS=function(v){if(v.xmin==null||v.xmin=="NaN")return new u.Hh;var h=new u.Hh(v.xmin,v.ymin,v.xmax,v.ymax);return v.zmin!==void 0&&v.zmin!==null&&h.setInterval(1,0,v.zmin,v.zmax),v.mmin!==void 0&&v.mmin!==null&&h.setInterval(2,0,v.mmin,v.mmax),h},k.hS=function(v,h,o){var r=0,n=new u.ee,l=3*v.points.length;l%2!=0&&l++,2>l&&(l=2);var c=u.P.truncate(3*v.points.length/2);4>c?c=4:16>c&&(c=16),l=u.Zc.Fn(l,0);var p=u.Zc.Fn(c);c=u.Zc.Fn(c);for(var f=0;f<v.points.length;f++)l.write(2*f,v.points[f][0]),l.write(2*f+1,v.points[f][1]),p.write(f,h||o?v.points[f][2]:NaN),c.write(f,o&&h?v.points[f][3]:NaN),r++;return r!=0&&(n.resize(r),n.kn(0,l)),h&&(n.se(1),n.kn(1,p)),o&&(n.se(2),n.kn(2,h==0?p:c)),n.Qc(16777215),n},k.gG=function(v,h,o,r){var n=0,l=2;if(r=="P"){var c=new u.Ea;n=1,l=3}else c=new u.Ua;for(var p=u.Zc.Qh(0),f=u.Zc.Or(0),g=0,b=0,x=[],$=[],E=0;E<v.length;E++){var O=v[E].length;if(x[E]=!1,r==="P"&&v[E][0][0]===v[E][v[E].length-1][0]&&v[E][0][1]===v[E][v[E].length-1][1]){var C=o==0||v[E][0][3]===v[E][v[E].length-1][3]||v[E][0][3]===void 0&&v[E][v[E].length-1][3]===void 0;(h==0||v[E][0][2]===v[E][v[E].length-1][2]||v[E][0][2]===void 0&&v[E][v[E].length-1][2]===void 0)&&C&&(x[E]=!0,--O)}O>=l?($[E]=!1,b+=1,p.add(g),f.add(n),g+=O):$[E]=!0}for((r=3*g)%2!=0&&r++,2>r&&(r=2),4>(E=u.P.truncate(3*g/2))?E=4:16>E&&(E=16),r=u.Zc.Fn(r,0),n=u.Zc.Fn(E),l=u.Zc.Fn(E),E=O=0;E<v.length;E++)if($[E]===!1)for(C=0;C<v[E].length;C++){var N=!1;C===v[E].length-1&&x[E]===!0&&(N=!0),N||(r.write(2*O,v[E][C][0]),r.write(2*O+1,v[E][C][1]),n.write(O,h||o?v[E][C][2]:NaN),l.write(O,o&&h?v[E][C][3]:NaN),O++)}return g!=0&&(v=c,p.resize(b),f.resize(b),0<g&&(p.add(g),f.add(0)),v.kn(0,r),v.KJ(f),v.LJ(p)),h&&(c.se(1),c.kn(1,n)),o&&(c.se(2),c.kn(2,h==0?n:l)),c.Qc(16777215),c},k}()}(q||(q={})),function(u){u.Dx=function(){function k(){}return k.dr=function(v){var h,o=0,r=v.length,n=v[0];for(h=0;h<r-1;h++){var l=v[h+1];o+=(l[0]-n[0])*(l[1]+n[1]),n=l}return 0<=o},k.rotate=function(v,h,o){h=h*Math.PI/180;var r=Math.cos(h),n=Math.sin(h);if(v.paths!==void 0){h={paths:[]};for(var l=0;l<v.paths.length;l++){for(var c=v.paths[l],p=[],f=0;f<c.length;f++){var g=c[f].slice(0);p.push(g);var b=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y;g[0]=b,g[1]=x}h.paths.push(p),v.hasZ!==void 0&&(h.hasZ=v.hasZ),v.hasM!==void 0&&(h.hasM=v.hasM)}return h}if(v.rings!==void 0){for(h={rings:[]},l=0;l<v.rings.length;l++){c=v.rings[l],p=[];var $=k.dr(c);for(f=0;f<c.length;f++)g=c[f].slice(0),p.push(g),b=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y,g[0]=b,g[1]=x;k.dr(p)!==$&&p.reverse(),h.rings.push(p),v.hasZ!==void 0&&(h.hasZ=v.hasZ),v.hasM!==void 0&&(h.hasM=v.hasM)}return h}if(v.x!==void 0)return h={x:r*(v.x-o.x)-n*(v.y-o.y)+o.x,y:n*(v.x-o.x)+r*(v.y-o.y)+o.y},v.z!==void 0&&(h.z=v.z),v.m!==void 0&&(h.m=v.m),v.hasZ!==void 0&&(h.hasZ=v.hasZ),v.hasM!==void 0&&(h.hasM=v.hasM),h;if(v.points!==void 0){for(h={points:[]},l=v.points,f=0;f<l.length;f++)(c=l[f].slice(0))[0]=r*(l[f][0]-o.x)-n*(l[f][1]-o.y)+o.x,c[1]=n*(l[f][0]-o.x)+r*(l[f][1]-o.y)+o.y,h.points.push(c);return v.hasZ!==void 0&&(h.hasZ=v.hasZ),v.hasM!==void 0&&(h.hasM=v.hasM),h}return null},k.EQ=function(v,h){if(v.paths!==void 0){for(var o={paths:[]},r=0;r<v.paths.length;r++){for(var n=v.paths[r],l=[],c=0;c<n.length;c++){var p=n[c].slice(0);l.push(p);var f=h.x-n[c][0];p[0]=n[c][0]+2*f}o.paths.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.rings!==void 0){for(o={rings:[]},r=0;r<v.rings.length;r++){n=v.rings[r];var g=k.dr(n);for(l=[],c=0;c<n.length;c++)p=n[c].slice(0),l.push(p),f=h.x-n[c][0],p[0]=n[c][0]+2*f;k.dr(l)!==g&&l.reverse(),o.rings.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.x!==void 0)return f=h.x-v.x,o={x:v.x+2*f,y:v.y},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o;if(v.points!==void 0){for(o={points:[]},r=v.points,c=0;c<r.length;c++)n=r[c].slice(0),f=h.x-n[0],n[0]+=2*f,o.points.push(n);return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=h.x-v.xmin,o.xmax=v.xmin+2*f,f=h.x-v.xmax,o.xmin=v.xmax+2*f,v.zmin!==void 0&&(o.zmin=v.zmin),v.zmax!==void 0&&(o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin),v.mmax!==void 0&&(o.mmax=v.mmax),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o):null},k.FQ=function(v,h){if(v.paths!==void 0){for(var o={paths:[]},r=0;r<v.paths.length;r++){for(var n=v.paths[r],l=[],c=0;c<n.length;c++){var p=n[c].slice(0);l.push(p);var f=h.y-n[c][1];p[1]=n[c][1]+2*f}o.paths.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.rings!==void 0){for(o={rings:[]},r=0;r<v.rings.length;r++){n=v.rings[r];var g=k.dr(n);for(l=[],c=0;c<n.length;c++)p=n[c].slice(0),l.push(p),f=h.y-n[c][1],p[1]=n[c][1]+2*f;k.dr(l)!==g&&l.reverse(),o.rings.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.x!==void 0)return f=h.y-v.y,o={y:v.y+2*f,x:v.x},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o;if(v.points!==void 0){for(o={points:[]},r=v.points,c=0;c<r.length;c++)n=r[c].slice(0),f=h.y-n[1],n[1]+=2*f,o.points.push(n);return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=h.y-v.ymin,o.ymax=v.ymin+2*f,f=h.y-v.ymax,o.ymin=v.ymax+2*f,v.zmin!==void 0&&(o.zmin=v.zmin),v.zmax!==void 0&&(o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin),v.mmax!==void 0&&(o.mmax=v.mmax),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o):null},k}()}(q||(q={})),function(u){u.UK=function(){function k(){}return k.Kg=function(v,h){switch(h==null&&(h=u.fe.pg()),v){case 33:return new u.Ta(h);case 322:return new u.zb(h);case 197:return new u.Hh(h);case 550:return new u.ee(h);case 1607:return new u.Ua(h);case 1736:return new u.Ea(h);default:throw u.i.ga("invalid argument.")}},k}()}(q||(q={})),function(u){var k=function(){function v(h,o){this.Qe=u.ja.rf(h,-1),this.va=new u.cu,this.yl=o}return v.prototype.vW=function(h){this.va.Bt(Math.min(this.Qe.size,h)),this.va.hn(h)},v.prototype.addElement=function(h,o){if(o===void 0)return this.$M(h);o=u.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Rh(),this.Qe.set(o,r)),this.va.addElement(r,h)},v.prototype.$M=function(h){var o=this.yl.ez(h);o=u.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Rh(),this.Qe.set(o,r)),this.va.addElement(r,h)},v.prototype.kd=function(h,o){if(o===void 0)this.FP(h);else{o=u.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw u.i.O();for(var n=this.va.sc(r),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==h?(this.va.kd(r,l,n),this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1))):l=n,n=c}}},v.prototype.FP=function(h){var o=this.yl.ez(h);o=u.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw u.i.O();for(var n=this.va.sc(r),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==h?(this.va.kd(r,l,n),this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1))):l=n,n=c}},v.prototype.lR=function(h){return h=u.P.truncate(h%this.Qe.size),(h=this.Qe.get(h))==-1?-1:this.va.sc(h)},v.prototype.zR=function(h){return this.va.lb(h)},v.prototype.wd=function(h){var o=this.yl.ez(this.ka(h));o=u.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw u.i.O();for(var n=this.va.sc(r),l=-1;n!=-1;){if(n==h)return this.va.kd(r,l,n),void(this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1)));l=n,n=this.va.lb(n)}throw u.i.O()},v.prototype.ka=function(h){return this.va.ka(h)},v.prototype.clear=function(){this.Qe=u.ja.rf(this.Qe.size,-1),this.va.clear()},v.prototype.size=function(){return this.va.OF()},v}();u.ZK=k}(q||(q={})),function(u){var k=function(){function v(){this.Ni=new u.ad(3),this.va=new u.ad(6),this.mT=!1,this.ke=-1}return v.prototype.hl=function(h){this.Ni.kd(h)},v.prototype.Rw=function(){return this.Ni.De()},v.prototype.dv=function(h){this.va.kd(h)},v.prototype.VA=function(){return this.va.De()},v.prototype.RB=function(h,o){this.Ni.T(h,1,o)},v.prototype.fx=function(h,o){this.Ni.T(h,2,o)},v.prototype.bX=function(h,o){this.Ni.T(h,3,o)},v.prototype.PB=function(h,o){this.va.T(h,4,o)},v.prototype.eX=function(h,o){this.va.T(h,3,o)},v.prototype.OJ=function(h,o){this.va.T(h,2,o)},v.prototype.Rh=function(h){var o=this.VA();return this.va.T(o,3,this.ke),this.va.T(o,4,0),this.va.T(o,5,h),this.ke!=-1&&this.OJ(this.ke,o),this.ke=o},v.prototype.eh=function(h){this.GE(h);var o=this.va.U(h,2),r=this.va.U(h,3);return o!=-1?this.eX(o,r):this.ke=r,r!=-1&&this.OJ(r,o),this.dv(h),r},v.prototype.Bt=function(h){this.va.Ee(h)},v.prototype.KF=function(h){return this.va.U(h,5)},v.prototype.aX=function(h,o){this.va.T(h,5,o)},v.prototype.addElement=function(h,o){return this.oS(h,o)},v.prototype.oS=function(h,o){var r=this.Rw();this.fx(r,-1),this.va.U(h,0)==-1&&this.va.T(h,0,r);var n=this.va.U(h,1);return this.RB(r,n),n!=-1&&this.fx(n,r),this.va.T(h,1,r),this.setData(r,o),this.PB(h,this.ds(h)+1),this.mT&&this.bX(r,h),r},v.prototype.kd=function(h,o){var r=this.xe(o),n=this.lb(o);return r!=-1?this.fx(r,n):this.va.T(h,0,n),n!=-1?this.RB(n,r):this.va.T(h,1,r),this.hl(o),this.PB(h,this.ds(h)-1),n},v.prototype.hn=function(h){this.Ni.Ee(h)},v.prototype.getData=function(h){return this.Ni.U(h,0)},v.prototype.setData=function(h,o){this.Ni.T(h,0,o)},v.prototype.lb=function(h){return this.Ni.U(h,2)},v.prototype.xe=function(h){return this.Ni.U(h,1)},v.prototype.sc=function(h){return this.va.U(h,0)},v.prototype.Gc=function(h){return this.va.U(h,1)},v.prototype.clear=function(){for(var h=this.ke;h!=-1;)h=this.eh(h)},v.prototype.GE=function(h){for(var o=this.Gc(h);o!=-1;){var r=o;o=this.xe(r),this.hl(r)}this.va.T(h,0,-1),this.va.T(h,1,-1),this.PB(h,0)},v.prototype.B=function(){return this.Ni.size==0},v.prototype.OF=function(){return this.Ni.size},v.prototype.ds=function(h){return this.va.U(h,4)},v.prototype.lz=function(h){return this.va.U(h,3)},v}();u.lp=k}(q||(q={})),function(u){var k=function(){function v(h){h===void 0?(this.vg=new u.ad(2),this.va=new u.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new u.ad(2),this.va=new u.ad(h?4:2),this.ke=-1,this.Sv=h)}return v.prototype.hl=function(h){this.vg.kd(h)},v.prototype.Rw=function(){return this.vg.De()},v.prototype.dv=function(h){this.va.kd(h)},v.prototype.VA=function(){return this.va.De()},v.prototype.Rh=function(){var h=this.VA();return this.Sv&&(this.va.T(h,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,h),this.ke=h),h},v.prototype.eh=function(h){for(var o=this.sc(h);o!=-1;){var r=o;o=this.lb(o),this.hl(r)}this.Sv&&(o=this.va.U(h,2),r=this.va.U(h,3),o!=-1?this.va.T(o,3,r):this.ke=r,r!=-1&&this.va.T(r,2,o)),this.dv(h)},v.prototype.Bt=function(h){this.va.Ee(h)},v.prototype.addElement=function(h,o){var r=this.va.U(h,1),n=this.Rw();return r!=-1?this.vg.T(r,1,n):this.va.T(h,0,n),this.va.T(h,1,n),this.vg.T(n,0,o),n},v.prototype.hn=function(h){this.vg.Ee(h)},v.prototype.kd=function(h,o,r){o!=-1?(this.vg.T(o,1,this.vg.U(r,1)),this.va.U(h,1)==r&&this.va.T(h,1,o)):(this.va.T(h,0,this.vg.U(r,1)),this.va.U(h,1)==r&&this.va.T(h,1,-1)),this.hl(r)},v.prototype.Cy=function(h,o){var r=this.va.U(h,1),n=this.va.U(o,0);n!=-1&&(r!=-1?this.vg.T(r,1,n):this.va.T(h,0,n),this.va.T(h,1,this.va.U(o,1))),this.Sv&&(h=this.va.U(o,2),r=this.va.U(o,3),h!=-1?this.va.T(h,3,r):this.ke=r,r!=-1&&this.va.T(r,2,h)),this.dv(o)},v.prototype.ka=function(h){return this.vg.U(h,0)},v.prototype.Uj=function(h,o){this.vg.T(h,0,o)},v.prototype.lb=function(h){return this.vg.U(h,1)},v.prototype.sc=function(h){return this.va.U(h,0)},v.prototype.Ln=function(h){return this.ka(this.sc(h))},v.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},v.prototype.B=function(){return this.vg.size==0},v.prototype.OF=function(){return this.vg.size},v.prototype.lz=function(h){return this.va.U(h,3)},v}();u.cu=k}(q||(q={})),function(u){u.ua=function(){function k(){}return k.Xd=function(v,h,o){return h=h.zr(),v=v!=null&&v.Yd!==void 0?v.Yd(0):0,o&&(h*=4,v*=1.1),Math.max(v,h)},k.Gr=function(v){return 2*Math.sqrt(2)*v},k.mN=function(v){return Math.sqrt(2)*v},k.mj=function(v,h,o){var r=new u.l;return h.A(r),k.Xd(v,r,o)},k.rE=function(v,h,o){return h=h.Vg(1,0).zr(),v=v!=null?v.Yd(1):0,o&&(h*=4,v*=1.1),Math.max(v,h)},k.ov=function(v,h){var o=new u.l;return v.yc(o),v=new u.l,h.yc(v),o.$b(v),o},k.TN=function(v){var h=new u.l;if(v.yc(h),h.B())return null;var o=new u.fu(h,8),r=-1,n=new u.l,l=!1;do for(var c=0,p=v.ea();c<p;c++){if(v.Tj(c,n),(r=o.Ez(c,n,r))==-1){if(l)throw u.i.ga("internal error");v.Ap(h,!1),l=!0,o.reset(h,8);break}l=!1}while(l);return o},k.iE=function(v){var h=new u.l;v.yc(h);for(var o=new u.fu(h,8),r=-1,n=v.Ha(),l=new u.l,c=!1;n.ab();)for(;n.Ia();){var p=n.ia(),f=n.xb();if(p.A(l),(r=o.Ez(f,l,r))==-1){if(c)throw u.i.Ra();v.Ap(h,!1),c=!0,o.reset(h,8),n.aj();break}}return o},k.lj=function(v,h){var o=new u.l;v.yc(o);for(var r=new u.fu(o,8),n=-1,l=new u.l,c=v.Ha(),p=!1;c.ab();)for(;c.Ia();){var f=c.ia(),g=c.xb();if(f.A(l),l.isIntersecting(h)&&(n=r.Ez(g,l,n))==-1){if(p)throw u.i.ga("internal error.");v.Ap(o,!1),p=!0,r.reset(o,8),c.aj();break}}return r},k.jE=function(v,h){for(var o=new u.fu(h,8),r=new u.h,n=!1,l=new u.l,c=0;c<v.I();c++)if(v.D(c,r),h.contains(r)&&(l.L(r),o.xj(c,l)==-1)){if(n)throw u.i.Ra();n=!0,c=new u.l,v.Ap(c,!1),o.reset(c,8),c=-1}return o},k.gR=function(v,h,o){var r=new u.l,n=new u.l;v.yc(r),h.yc(n),r.X(o,o),n.X(o,o);var l=new u.l;l.L(r),l.Fa(n),v=v.Ha(),h=h.Ha();var c=new u.sC;c.WB(o);var p=!1;for(c.kK();v.ab();)for(;v.Ia();)v.ia().A(r),r.isIntersecting(l)&&(p=!0,(o=new u.l).L(r),c.DD(v.xb(),o));if(c.dF(),!p)return null;for(r=!1,c.jK();h.ab();)for(;h.Ia();)h.ia().A(n),n.isIntersecting(l)&&(r=!0,(o=new u.l).L(n),c.zD(h.xb(),o));return c.cF(),r?c:null},k.hR=function(v,h,o,r,n){var l=v.K(),c=h.K(),p=new u.l,f=new u.l;v.yc(p),h.yc(f),p.X(o,o),f.X(o,o);var g=new u.l;g.L(p),g.Fa(f);var b=new u.sC;b.WB(o);var x=!1;b.kK();var $=0;for(o=v.ea();$<o;$++)r&&l==1736&&!v.Gv($)||(v.Tj($,p),p.isIntersecting(g)&&(x=!0,b.DD($,p)));if(b.dF(),!x)return null;for(v=!1,b.jK(),r=0,o=h.ea();r<o;r++)n&&c==1736&&!h.Gv(r)||(h.Tj(r,f),f.isIntersecting(g)&&(v=!0,b.zD(r,f)));return b.cF(),v?b:null},k.Tu=function(v,h,o){if(v!=h)for(var r=0;r<o;r++)v[r]==null?v[r]=u.h.cl(h[r]):v[r].N(h[r])},k.Ey=function(v,h,o,r){var n=0;for(r+=0;n<r;o++,n++)v[n]==null&&(v[n]=[0,0]),v[n][0]=h[o].x,v[n][1]=h[o].y},k.Dy=function(v,h,o,r){var n=h,l=0;for(h=r+h;n<h;l++,n++)v[n]==null?v[n]=u.h.construct(o[l][0],o[l][1]):v[n].na(o[l][0],o[l][1])},k.fP=function(v,h,o){if(v!=h)for(var r=0;r<o;r++)v[r]==null?v[r]=new u.Ta(h[r]):h[r].copyTo(v[r])},k.qE=function(v,h,o,r){var n=0;return v!=null&&(n=v.Yd(0),r&&!o||v==null||(n+=1.01*v.pz(0))),o&&(h*=4,n*=1.01),Math.max(n,h)},k.oy=function(v,h,o){return k.qE(v,h.zr(),o,!1)},k.bO=function(v,h){var o=new u.l;return h.A(o),k.oy(v,o,!0)},k.py=function(v,h){return k.qE(v,h.zr(),!1,!0)},k.Ju=function(v,h){var o=new u.l;return h.A(o),k.py(v,o)},k.vG=function(v,h,o,r){r*=r;var n=new u.h;if(n.vc(v,h),(v=new u.h).vc(o,h),h=n.Uk(),o=v.Uk(),h<=r&&o<=r)return!0;var l=u.mc.ox(n.yi(v));return(l<=r*h||l<=r*o)&&0<=n.Sh(v)},k.ZJ=function(v,h,o,r){for(var n=0;n<h;n++){var l=v[n].y,c=u.P.Tk(l,o,r);c!=l&&(v[n].y=c)}},k}()}(q||(q={})),function(u){var k,v,h=function(){function l(c){this.Za=c}return l.prototype.compare=function(c,p,f){c=c.ka(f),f=this.Za.qk(p);var g=this.Za.qk(c);return f<g?-1:f==g?n.iq(p)&&n.Iv(c)?-1:n.iq(c)&&n.Iv(p)?1:0:1},l}(),o=function(){function l(c){this.Za=c}return l.prototype.qr=function(c,p,f){this.Za.CX(f,c,p)},l.prototype.bq=function(c){return this.Za.qk(c)},l}();(v=k||(k={}))[v.initialize=0]="initialize",v[v.pIn=1]="pIn",v[v.pL=2]="pL",v[v.pR=3]="pR",v[v.pT=4]="pT",v[v.right=5]="right",v[v.left=6]="left",v[v.all=7]="all";var r=function(){function l(){this.Za=null,this.Si=new u.Oc,this.ji=new u.ja(0),this.tg=[0,0]}return l.prototype.Zi=function(c,p){this.Si.pa=c.pa-p,this.Si.wa=c.wa+p,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.zB=function(c,p,f){if(c>p)throw u.i.O();this.Si.pa=c-f,this.Si.wa=p+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.Wo=function(c,p){this.Si.pa=c-p,this.Si.wa=c+p,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.next=function(){if(!this.Za.nq)throw u.i.Hb();if(0>this.ie)return-1;for(var c=!0;c;)switch(this.tg[this.ie]){case 1:c=this.AU();break;case 2:c=this.BU();break;case 3:c=this.CU();break;case 4:c=this.DU();break;case 5:c=this.AW();break;case 6:c=this.fT();break;case 7:c=this.oN();break;case 0:c=this.Bz();break;default:throw u.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},l.construct=function(c){var p=new l;return p.Za=c,p.ji.Jb(20),p.ie=-1,p},l.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},l.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var c=this.Za.Pp(this.Mc);return this.Si.wa<c?(c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0):c<this.Si.pa?(c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),!0)},l.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.nk(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.sj(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var c=this.Za.pk(this.Mc);return c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},l.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&n.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},l.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},l.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},l.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},l}();u.AY=r;var n=function(){function l(c){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=c,this.nq=this.Uv=!1}return l.prototype.mr=function(){this.Pk(!0)},l.prototype.Dr=function(c,p){if(!this.Uv)throw u.i.Hb();this.Hj.push(new u.Oc(c,p))},l.prototype.Hp=function(){if(!this.Uv)throw u.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},l.prototype.xj=function(c){if(!this.Uf||!this.nq)throw u.i.O("invalid call");if(this.kf==-1){var p=this.Hj.length;if(this.dA){var f=new u.ja(0);f.Jb(2*p),this.XI(f),this.bi.Jb(2*p),this.bi.resize(0),this.WI(f),this.Mm.resize(p,-1),this.Mm.Yj(-1,0,p),this.dA=!1}else this.Mm.Yj(-1,0,p);this.kf=this.Vu()}p=this.kG(c<<1,this.kf),f=this.bg.addElement(1+(c<<1),this.rz(p)),this.QJ(p,f),this.Mm.set(c,p),this.aw++},l.prototype.remove=function(c){if(!this.Uf||!this.nq)throw u.i.ga("invalid call");var p=this.Mm.get(c);if(p==-1)throw u.i.O("the interval does not exist in the interval tree");this.Mm.set(c,-1),this.aw--;var f=this.rz(p),g=this.bg.UR(f);this.bg.wd(this.rR(p),f),this.bg.wd(this.OR(p),f),(c=this.bg.size(f))==0&&(this.bg.HP(f),this.UJ(g,-1)),this.Gj.kd(p),f=this.PF(g);var b=this.sj(g),x=this.nk(g);for(p=0;!(0<c||g==this.kf||b!=-1&&x!=-1);)g==this.sj(f)?b!=-1?(this.Qk(f,b),this.Wj(b,f),this.Qk(g,-1)):x!=-1?(this.Qk(f,x),this.Wj(x,f),this.Sk(g,-1)):this.Qk(f,-1):b!=-1?(this.Sk(f,b),this.Wj(b,f),this.Qk(g,-1)):x!=-1?(this.Sk(f,x),this.Wj(x,f),this.Sk(g,-1)):this.Sk(f,-1),this.Wj(g,-1),p++,g=f,c=(f=this.pk(g))!=-1?this.bg.size(f):0,b=this.sj(g),x=this.nk(g),f=this.PF(g)},l.prototype.reset=function(){if(!this.Uf||!this.nq)throw u.i.O("invalid call");this.Pk(!1)},l.prototype.size=function(){return this.aw},l.prototype.getIterator=function(){return r.construct(this)},l.prototype.XI=function(c){for(var p=this.Hj.length,f=0;f<2*p;f++)c.add(f);this.DX(c,2*p)},l.prototype.WI=function(c){for(var p=NaN,f=0;f<c.size;f++){var g=c.get(f),b=this.qk(g);b!=p&&(this.bi.add(g),p=b)}},l.prototype.qS=function(){var c=this.Hj.length,p=new u.ja(0);p.Jb(2*c),this.XI(p),this.bi.Jb(2*c),this.bi.resize(0),this.WI(p),this.Gj.Ee(c),this.Vi.hn(2*c);var f=u.Zc.Qh(c);for(f.Yj(-1,0,c),this.kf=this.Vu(),c=0;c<p.size;c++){var g=p.get(c),b=f.get(g>>1);b!=-1?this.QJ(b,this.Vi.addElement(this.rz(b),g)):(b=this.kG(g,this.kf),f.set(g>>1,b))}},l.prototype.kG=function(c,p){var f=p,g=p,b=-1,x=0,$=this.bi.size-1,E=0,O=c>>1,C=NaN,N=NaN,D=!0,z=this.yR(O);for(O=this.vR(O);D;){x<$?(E=x+u.P.truncate(($-x)/2),this.bz(f)==-1&&this.AJ(f,this.bi.get(E),this.bi.get(E+1))):this.bz(f)==-1&&this.AJ(f,this.bi.get(x),this.bi.get(x));var R=this.Pp(f);if(O<R)p!=-1&&(p==f?(g=f,C=R,N=(p=this.sj(f))!=-1?this.Pp(p):NaN):N>R&&(R<C?this.Qk(g,f):this.Sk(g,f),this.Sk(f,p),this.Uf&&(this.Wj(f,g),this.Wj(p,f)),g=f,C=R,p=-1,N=NaN)),($=this.sR(f))==-1&&($=this.Vu(),this.ZW(f,$)),f=$,$=E;else if(z>R)p!=-1&&(p==f?(g=f,C=R,N=(p=this.nk(f))!=-1?this.Pp(p):NaN):N<R&&(R<C?this.Qk(g,f):this.Sk(g,f),this.Qk(f,p),this.Uf&&(this.Wj(f,g),this.Wj(p,f)),g=f,C=R,p=-1,N=NaN)),(x=this.PR(f))==-1&&(x=this.Vu(),this.jX(f,x)),f=x,x=E+1;else{(D=this.pk(f))==-1&&(D=this.uP(f),this.UJ(f,D));var G=this.aN(D,c);b=this.sP(),this.mX(b,D),this.YW(b,G),f!=p&&(R<C?this.Qk(g,f):this.Sk(g,f),this.Uf&&this.Wj(f,g),p!=-1&&(N<R?this.Qk(f,p):this.Sk(f,p),this.Uf&&this.Wj(p,f))),D=!1}}return b},l.prototype.Vu=function(){return this.ne.De()},l.prototype.uP=function(c){return this.Uf?this.bg.Rr(c):this.Vi.Rh(c)},l.prototype.sP=function(){return this.Gj.De()},l.prototype.Pk=function(c){c?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=u.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=u.Zc.Qh(0),this.bg=new u.$j,this.bg.Xo(new h(this))):this.bg.clear():this.Vi==null?this.Vi=new u.lp:this.Vi.clear(),this.ne==null?(this.Gj=new u.ad(3),this.ne=new u.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},l.prototype.AJ=function(c,p,f){this.SW(c,p),this.TW(c,f)},l.prototype.Pp=function(c){var p=this.bz(c);return p==-1?NaN:(p=this.qk(p))==(c=this.qk(this.bR(c)))?p:.5*(p+c)},l.prototype.SW=function(c,p){this.ne.T(c,0,p)},l.prototype.TW=function(c,p){this.ne.T(c,1,p)},l.prototype.ZW=function(c,p){this.ne.T(c,3,p)},l.prototype.jX=function(c,p){this.ne.T(c,4,p)},l.prototype.UJ=function(c,p){this.ne.T(c,2,p)},l.prototype.Qk=function(c,p){this.ne.T(c,5,p)},l.prototype.Sk=function(c,p){this.ne.T(c,6,p)},l.prototype.Wj=function(c,p){this.ne.T(c,7,p)},l.prototype.mX=function(c,p){this.Gj.T(c,0,p)},l.prototype.aN=function(c,p){return this.Uf?this.bg.addElement(p,c):this.Vi.addElement(c,p)},l.prototype.YW=function(c,p){this.Gj.T(c,1,p)},l.prototype.QJ=function(c,p){this.Gj.T(c,2,p)},l.prototype.ml=function(c){return this.Uf?this.bg.sc(c):this.Vi.sc(c)},l.prototype.bs=function(c){return this.Uf?this.bg.Gc(c):this.Vi.Gc(c)},l.iq=function(c){return(1&c)==0},l.Iv=function(c){return(1&c)==1},l.prototype.bz=function(c){return this.ne.U(c,0)},l.prototype.bR=function(c){return this.ne.U(c,1)},l.prototype.pk=function(c){return this.ne.U(c,2)},l.prototype.sR=function(c){return this.ne.U(c,3)},l.prototype.PR=function(c){return this.ne.U(c,4)},l.prototype.sj=function(c){return this.ne.U(c,5)},l.prototype.nk=function(c){return this.ne.U(c,6)},l.prototype.PF=function(c){return this.ne.U(c,7)},l.prototype.rz=function(c){return this.Gj.U(c,0)},l.prototype.rR=function(c){return this.Gj.U(c,1)},l.prototype.OR=function(c){return this.Gj.U(c,2)},l.prototype.yR=function(c){return this.Hj[c].pa},l.prototype.vR=function(c){return this.Hj[c].wa},l.prototype.DX=function(c,p){this.Cm==null&&(this.Cm=new u.Zt);var f=new o(this);this.Cm.sort(c,0,p,f)},l.prototype.CX=function(c,p,f){var g=this;c.Wd(p,f,function(b,x){var $=g.qk(b),E=g.qk(x);return $<E||$==E&&l.iq(b)&&l.Iv(x)?-1:1})},l.prototype.qk=function(c){var p=this.Hj[c>>1];return l.iq(c)?p.pa:p.wa},l}();u.ur=n}(q||(q={})),function(u){var k=function(){function v(h){if(h==null)throw u.i.ga("Invalid arguement");this.hf=h;var o=h.iR();o.cS()?h.ef.DG()?this.no=u.ui.PannableFold:this.no=u.ui.Clip:this.no=u.ui.DontClip,o.dS()?h.$f.DG()?this.Sm=u.ui.PannableFold:this.Sm=u.ui.Clip:this.Sm=u.ui.DontClip,this.Dm=o.Lr,this.hH=o.Xu,h=this.hf.nH,this.WG=h.ks(2147483648),this.Wv=h.ks(1073741824)}return v.Bh=function(h,o,r){return o.yw.Bh(h,r)},v.Tt=function(h,o,r,n){return h.yw.Tt(o,r,n)},v.St=function(h,o,r,n){if(r=0>r?o.length:r,(h=h.yw.Tt(o,r,n))==r)return h;for(var l=o=0;l<r;l++){var c=n[l];c.isNaN()||(o<l&&n[o].N(c),o++)}for(;o<r;o++)n[o].Sc();return h},v.transform=function(h,o,r,n,l){if(h.isIdentity())return u.ua.fP(n,o,r),r;for(var c=[],p=0,f=0;f<r;){for(var g=Math.min(c.length,r-f),b=f,x=0;b<g;b++,x++)c[x]==null?c[x]=o[b].D():o[b].D(c[x]);var $=l?v.St(h,c,g,c):v.Tt(h,c,g,c);for(x=b=0;b<$;b++,x++)n[f]==null&&(n[f]=new u.Ta(o[f])),n[f].Db(c[x]);f+=g,p+=$}return p},v.prototype.Tt=function(h,o,r){if(this.hf.isIdentity())return h!=r&&u.ua.Tu(r,h,o),o;var n=this.hf.ef,l=this.hf.$f,c=n.Tb(),p=l.Tb();if(c==0&&c===p){var f=n.Sp();return l=f/(l=l.Sp()),(f=new u.Ed).Jt(l,l),f.aY(h,o,r),o}if(f=u.P.Hu(Math.min(o,64)),c==3){var g=n.Li;c=(n=g.hk()).Tb(),r!=h&&u.ua.Tu(r,h,o),u.Ab.bl(g,r,o,!0),g.St(u.dm.forward,r,o),u.Ab.al(g,r,o,!0)}if(c==3||p===3)throw u.i.ga("image: transform_in_place_");if(c==2)this.no==u.ui.Clip?(r!=h&&u.ua.Tu(r,h,o),h=n.ol(),u.Ab.JS(h,n,r,o)):(r!=h&&u.ua.Tu(r,h,o),n.Xc()&&(c=n.Yd(0),g=n.Le(),u.Ab.AX(r,o,g,c),u.Ab.lF(r,o,n,0))),u.Ab.DL(n,r,o,f);else for(c=n.Yd(0),g=n.Le(),n=0;n<o;n++)u.Ab.BX(h[n],g,c,r[n]);for(u.Ab.BL(this.hf,r,o,f),h=0,(p=p==2)?h=l.Bi():isNaN(this.Dm)||(h=this.Dm),p&&this.Sm!=u.ui.Clip||u.Ab.lF(r,o,l.tc(),h),p&&(u.Ab.tG(r,o,l,this.Sm),u.Ab.CL(l,r,o,f)),h=o,n=0;n<o;++n)r[n].isNaN()&&h--;return h},v.prototype.Bh=function(h,o){if(this.hf.isIdentity()||h.B())return h;if(h.K()==33)return this.SI(h);var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb();if(l==0&&l==c)return o=r.Sp(),o/=n=n.Sp(),(n=new u.Ed).Jt(o,o),(h=u.ba.kg(h)).Pc(n),h;switch(h.K()){case 1607:case 1736:h=this.QI(h,o);break;case 550:h=this.aW(h,o);break;case 197:h=this.$V(h,o);break;default:throw u.i.ga("")}return h},v.prototype.SI=function(h){var o=h.D(),r=[];return r[0]=o,this.Tt(r,1,r),(h=new u.Ta(h)).Db(r[0]),h},v.prototype.QI=function(h,o){if(h.vm())throw u.i.ga("curves not supported");var r=h.K();if(r==1736)return this.bW(h,o);if(r==1607)return this.cW(h,o);throw u.i.ga("projectMultiPath")},v.prototype.bW=function(h,o){var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb(),p=u.P.Hu(Math.min(h.I(),64)),f=u.Ea.kg(h);l==3&&(l=(r=(h=r.Li).hk()).Tb(),f=h.bl(f,!0),this.yp(h,u.dm.forward,f),f=h.al(f,!0)),h=null,c==3&&(c=(n=(h=n.Li).hk()).Tb());var g=l==2,b=c==2,x=b?n.tc():n,$=!b&&!this.Wv;c=!1;var E=f;if(g){if((E=u.Ab.OI(E,r,this.no,o)).B())return E}else{if(f=new u.l,E.yc(f),l=r.Le(),f.G<l.G||f.H>l.H){var O=u.l.construct(f.v-1,l.G,f.C+1,l.H);if((E=u.ti.Pu(E,O,r,NaN,0,o)).B())return E}f.S()>2*l.S()&&(E=u.Ab.Jp(E,-2*l.S(),2*l.S(),r,!0,0,!0,o))}f=this.hH,(l=!isNaN(f))&&(E=u.Zl.local().W(E,f,o)),O=b?n.mk():null;var C=NaN;g&&(C=r.Bi());var N=n.Yr()!=null;if(this.WG)g&&(u.Ab.wr(r,C,E,p),l&&(g=r.jh(),f*=(C=r.tc().jh())/g)),u.Ab.vr(this.hf,E,$,p),l&&(g=r.tc().jh(),f*=(C=n.tc().jh())/g),r=E;else{var D=new u.Ua(E.description);D.yD(E),g&&(u.Ab.wr(r,C,D,p),l&&(g=r.jh(),f*=(C=r.tc().jh())/g)),u.Ab.vr(this.hf,D,$,p),l&&(g=r.tc().rm(),f*=(C=n.tc().rm())/g),$=NaN,b?(O=n.mk(),$=n.Bi()):isNaN(this.Dm)||($=this.Dm),g=v.vv(r)|v.vv(n),C=10*x.Yd(0),this.Wv&&(g=3,C=0),r=u.Ab.PQ(E,r,D,x,$,o,g,C)}return N&&(r=u.Ab.SD(r,n,o)),b&&(c||(b=x.Le().S(),r.Vg(0,0).S()>=b-x.Yd(0)&&(x=O.getNorthPoleLocation(),b=O.getSouthPoleLocation(),E=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),$=0,E==u.Eg.PE_POLE_POINT&&x!=u.Eg.PE_POLE_OUTSIDE_BOUNDARY&&($=1),O==u.Eg.PE_POLE_POINT&&b!=u.Eg.PE_POLE_OUTSIDE_BOUNDARY&&($|=2),$!==0&&(c=!0))),r=u.Ab.Hz(r,n,this.Sm,o),l&&(r=u.Zl.local().W(r,f,o)),u.Ab.Kx(n,r,p)),r.B()||(c&&(r=u.$l.local().W(r,n,!1,o)),h!=null&&(r=h.al(r,!1),this.yp(h,u.dm.reverse,r),r=h.bl(r,!1))),r},v.vv=function(h){if(h.Tb()!=2)return 0;var o=0,r=h.mk();h=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),l=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),l==u.Eg.PE_POLE_POINT&&h!=u.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),r==u.Eg.PE_POLE_POINT&&n!=u.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},v.prototype.cW=function(h,o){var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb(),p=u.P.Hu(Math.min(h.I(),64)),f=u.Ua.kg(h);l==3&&(l=(r=(h=r.Li).hk()).Tb(),f=h.bl(f,!0),this.yp(h,u.dm.forward,f),f=h.al(f,!0)),h=null,c==3&&(c=(n=(h=n.Li).hk()).Tb());var g=l==2;l=(c=c==2)?n.tc():n;var b=!c&&!this.Wv;if(g){if((f=u.Ab.OI(f,r,this.no,o)).B())return f}else{var x=new u.l;f.yc(x);var $=r.Le();if((x.G<$.G||x.H>$.H)&&(x=u.l.construct(x.v-1,$.G,x.C+1,$.H),(f=u.ti.Pu(f,x,r,NaN,0,o)).B()))return f}var E=NaN;g&&(E=r.Bi()),x=n.Yr()!=null,$=this.hH;var O=!isNaN($);if(O&&(f=u.Zl.local().W(f,$,o)),this.WG)g&&u.Ab.wr(r,E,f,p),O&&(g=r.jh(),$*=(E=r.tc().jh())/g),u.Ab.vr(this.hf,f,b,p),O&&(g=r.tc().jh(),$*=(E=n.tc().jh())/g),r=f;else{var C=new u.Ua(f.description);C.yD(f),g&&(u.Ab.wr(r,E,C,p),O&&(g=r.jh(),$*=(E=r.tc().jh())/g)),u.Ab.vr(this.hf,C,b,p),O&&(g=r.tc().jh(),$*=(E=n.tc().jh())/g),b=NaN,c?b=n.Bi():isNaN(this.Dm)||(b=this.Dm),g=v.vv(r)|v.vv(n),E=10*l.Yd(0),this.Wv&&(g=3,E=0),r=u.Ab.QQ(f,r,C,l,b,o,g,E)}return x&&(r=u.Ab.SD(r,n,o)),c&&(r=u.Ab.Hz(r,n,this.Sm,o),O&&(r=u.Zl.local().W(r,$,o)),u.Ab.Kx(n,r,p)),r.B()||h!=null&&(r=h.al(r,!1),this.yp(h,u.dm.reverse,r),r=h.bl(r,!1)),r},v.prototype.$V=function(h,o){var r=(h.da()+h.S())/400;return r!=0?(r=u.Zl.local().W(h,r,o),r=this.QI(r,o),o=h.Ja(),r.dn(o)):(o=new u.Ta(h.Kp()),r=this.SI(o),o=h.Ja(),r.B()?o.Pa():(h.copyTo(o),h=r.D(),o.L(h.x,h.y,h.x,h.y))),o},v.prototype.aW=function(h,o){h=u.ba.kg(h);var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb(),p=u.P.Hu(Math.min(h.I(),64));if(l==3){var f=r.Li;l=(r=f.hk()).Tb(),h=f.al(h,!0),this.yp(f,u.dm.forward,h),h=f.bl(h,!0)}if(l==2){if(this.no==u.ui.Clip?h=u.Zj.local().W(h,r.ol(),r,o):r.Xc()&&(l=new u.l,h.yc(l),r.Le().contains(l)||(this.no==u.ui.PannableFold&&(h=u.Ab.nj(h,r)),u.Ab.Lt(h,r.Le(),r.Yd(0),!0),h=u.Ab.Hn(h,r,0,!0,0,o))),h.B())return h;u.Ab.wr(r,0,h,p)}else u.Ab.Lt(h,r.Le(),r.Yd(0),!0);return u.Ab.vr(this.hf,h,!1,p),r=0,l=!1,f=null,c==3&&(l=!0,c=(n=(f=n.Li).hk()).Tb()),(c=c==2)?r=n.Bi():isNaN(this.Dm)||(r=this.Dm),c&&this.Sm!=u.ui.Clip||(h=u.Ab.Hn(h,n.tc(),r,!1,0,o)),c&&(h=u.Ab.Hz(h,n,this.Sm,o),u.Ab.Kx(n,h,p),h.B())||l&&(h=f.al(h,!0),this.yp(f,u.dm.reverse,h),h=f.bl(h,!0)),h},v.prototype.yp=function(h,o,r){var n=r.I();if(n!=0){for(var l=r.vb(0),c=u.P.mg(200,0),p=[],f=0;f<n;){var g=Math.min(100,n-f);l.Xw(2*f,2*g,c,2,!0);for(var b=0;b<g;++b)p[b]=u.h.construct(c[2*f],c[2*f+1]);h.St(o,p,g),f+=g}r.Qc(1993)}},v.Py=function(h,o,r){if(h==null||o==null||!o.Xc())throw u.i.ga("Invalid Arguement");if(h.B())return h;var n=h.K();return n==197?(n=new u.Ea(h.description)).bd(h,!1):u.ba.zd(n)?(n=new u.Ua(h.description)).pc(h,!0):n=h,(n=u.Ab.nj(n,o)).B()?n:u.Ab.Hn(n,o,0,n!=h,0,r)},v.pj=function(h,o,r,n){if(h==null||o==null||!o.Xc())throw u.i.ga("Invalid Arguement");if(h.B())return h;var l=h.K();if(u.ba.Ic(l)){h=u.Ab.nj(h,o),l=new u.l,h.A(l);for(var c=u.ua.oy(o,l,!1),p=o.ih(),f=Math.floor((l.v-p.v)/p.S())*p.S()+p.v;f<l.C;)f>l.v+c&&f<l.C-c&&(h=u.Ab.pS(h,o,r,f)),f+=p.S()}else{if(l==197)return(l=new u.Ea(h.description)).bd(h,!1),v.pj(l,o,r,n);if(u.ba.zd(l))return(l=new u.Ua(h.description)).pc(h,!0),v.pj(l,o,r,n)}return v.Py(h,o,n)},v}();u.du=k}(q||(q={})),function(u){var k=function(v){function h(o,r,n,l){var c=v.call(this)||this;return o===void 0?c.description=u.fe.pg():n===void 0?c.description=o:(c.description=u.fe.pg(),c.UB(o,r),c.Sl(n,l)),c}return pe(h,v),h.prototype.K=function(){return 322},h.prototype.Rb=function(){var o=this.ta-this.qa,r=this.oa-this.ma;return Math.sqrt(o*o+r*r)},h.prototype.Di=function(o){var r=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(r*r+n*n)<=o},h.prototype.Rn=function(){return!1},h.prototype.lg=function(){var o=new u.h;return o.vc(this.xc(),this.bc()),o},h.YO=function(o,r){return new h(o.x,o.y,r.x,r.y)},h.prototype.dn=function(o){o.Pa(),o.Pf(this.description);var r=new u.l;this.A(r),o.Zo(r),r=1;for(var n=this.description.Ba;r<n;r++)for(var l=this.description.ld(r),c=u.sa.Wa(l);r<c;r++){var p=this.Vg(l,0);o.setInterval(l,0,p)}},h.prototype.A=function(o){o.L(this.ta,this.oa,this.qa,this.ma),o.normalize()},h.prototype.So=function(o){o.Pa(),o.$b(this.ta,this.oa,this.Pd(0,1,0)),o.$b(this.qa,this.ma,this.Pd(1,1,0))},h.prototype.Pc=function(o){if(o instanceof u.Ed){this.wc();var r=new u.h;r.x=this.ta,r.y=this.oa,o.Gh(r,r),this.ta=r.x,this.oa=r.y,r.x=this.qa,r.y=this.ma,o.Gh(r,r),this.qa=r.x,this.ma=r.y}else this.wc(),(r=new u.Od).x=this.ta,r.y=this.oa,r.z=this.Pd(0,1,0),r=o.hp(r),this.ta=r.x,this.oa=r.y,this.vn(0,1,0,r.z),r.x=this.qa,r.y=this.ma,r.z=this.Pd(1,1,0),r=o.hp(r),this.qa=r.x,this.ma=r.y,this.vn(1,1,0,r.z)},h.prototype.Ja=function(){return new h(this.description)},h.prototype.Sx=function(o,r){return(this.qa-o-(this.ta-o))*(this.ma-r+(this.oa-r))*.5},h.prototype.ux=function(o){return o*this.Rb()},h.prototype.IG=function(o){return o/this.Rb()},h.prototype.yF=function(o){return u.mc.jq(this.ta,this.qa,o)},h.prototype.aR=function(o){return u.mc.jq(this.oa,this.ma,o)},h.prototype.fl=function(o,r){var n=new u.jg;return this.dh(o,r,n),n.get()},h.prototype.dh=function(o,r,n){if(n==null)throw u.i.O();n.Qr(),(n=n.get()).Pf(this.description);var l=new u.h;this.ic(o,l),n.UB(l.x,l.y),this.ic(r,l),n.Sl(l.x,l.y),l=1;for(var c=this.description.Ba;l<c;l++)for(var p=this.description.Fd(l),f=u.sa.Wa(p),g=0;g<f;g++){var b=this.Vc(o,p,g);n.TB(p,g,b),b=this.Vc(r,p,g),n.JB(p,g,b)}},h.prototype.Vc=function(o,r,n){if(r==0)return n==0?this.ic(o).x:this.ic(o).y;switch(u.sa.gz(r)){case 0:return .5>o?this.yv(r,n):this.jv(r,n);case 1:var l=this.yv(r,n);return r=this.jv(r,n),u.mc.jq(l,r,o);case 2:throw u.i.ga("not implemented")}throw u.i.Ra()},h.prototype.ge=function(o,r){var n=this.qa-this.ta,l=this.ma-this.oa,c=n*n+l*l;return c==0?.5:(o=((o.x-this.ta)*n+(o.y-this.oa)*l)/c,r||(0>o?o=0:1<o&&(o=1)),o)},h.prototype.fq=function(o,r,n,l){if(o){if((o=this.ma-this.oa)==0)return r==this.ma?-1:0;if(0>(r=(r-this.oa)/o)||1<r)return 0;n!=null&&(n[0]=this.yF(r))}else{if((o=this.qa-this.ta)==0)return r==this.qa?-1:0;if(0>(r=(r-this.ta)/o)||1<r)return 0;n!=null&&(n[0]=this.aR(r))}return l!=null&&(l[0]=r),1},h.prototype.Me=function(o,r){var n=this.ma-this.oa;return n==0?o==this.ma?r:NaN:(o=(o-this.oa)/n,r=this.yF(o),o==1&&(r=this.qa),r)},h.prototype.tu=function(o,r,n){return 0<=this.tp(o.x,o.y,r,n)},h.prototype.xi=function(o,r,n){return 0<=this.tp(o,r,n,!0)},h.prototype.ss=function(o,r){return this.tu(o,r,!1)},h.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=0;for(var r=this.description.Qq-2;o<r;o++){var n=this.la[o];this.la[o]=this.la[o+r],this.la[o+r]=n}}},h.prototype.wu=function(o,r){(r=u.h.construct(o,r)).sub(this.bc());var n=new u.h;return n.vc(this.xc(),this.bc()),(o=n.yi(r))>(r=8881784197001252e-31*(Math.abs(n.x*r.y)+Math.abs(n.y*r.x)))?-1:o<-r?1:0},h.prototype.tp=function(o,r,n,l){var c=this.ta,p=this.oa,f=o-c,g=r-p;if((f=Math.sqrt(f*f+g*g))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:0;if(f=o-this.qa,g=r-this.ma,(f=Math.sqrt(f*f+g*g))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:1;if(f=this.qa-this.ta,g=this.ma-this.oa,0<(l=Math.sqrt(f*f+g*g))){var b=1/l,x=o-c,$=r-p,E=x*(f*=b)+$*(g*=b),O=17763568394002505e-31*(Math.abs(x*f)+Math.abs($*g)),C=f;if(f=-g,g=C,E<-(O=Math.max(n,O))||E>l+O)return NaN;if(Math.abs(x*f+$*g)<=Math.max(n,17763568394002505e-31*(Math.abs(x*f)+Math.abs($*g)))&&(.5>=(f=u.P.Tk(E*b,0,1))?(g=this.ta+(this.qa-this.ta)*f,l=this.oa+(this.ma-this.oa)*f):(g=this.qa-(this.qa-this.ta)*(1-f),l=this.ma-(this.ma-this.oa)*(1-f)),u.h.Jy(g,l,o,r)<=n)){if(.5>f){if(u.h.Jy(g,l,c,p)<=n)return 0}else if(u.h.Jy(g,l,this.qa,this.ma)<=n)return 1;return f}}return NaN},h.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.AM(o))},h.prototype.mD=function(o,r,n){var l=n?this.ta:this.qa;n=n?this.oa:this.ma;var c=new u.h;return c.x=o.qa-l,c.y=o.ma-n,!(r.Sh(c)>6661338147750939e-31*r.aD(c))||(c.x=o.ta-l,c.y=o.oa-n,r.Sh(c)<=6661338147750939e-31*r.aD(c))},h.prototype.lD=function(o){var r=new u.h;return r.x=this.qa-this.ta,r.y=this.ma-this.oa,!!this.mD(o,r,!1)&&(r.Uq(),!!this.mD(o,r,!0))},h.IM=function(o,r){var n=o.wu(r.ta,r.oa),l=o.wu(r.qa,r.ma);return!(0>n&&0>l||0<n&&0<l)&&(n=r.wu(o.ta,o.oa),l=r.wu(o.qa,o.ma),!(0>n&&0>l||0<n&&0<l)&&((n=o.Rb())>(l=r.Rb())?o.lD(r):r.lD(o)))},h.GM=function(o,r,n){var l=u.h.construct(NaN,NaN),c=o.qa-o.ta,p=o.ma-o.oa,f=r.qa-r.ta,g=r.ma-r.oa,b=f*p-c*g;if(b==0)return l;var x=8881784197001252e-31*(Math.abs(f*p)+Math.abs(c*g)),$=r.ta-o.ta,E=r.oa-o.oa,O=f*E-$*g,C=O/b,N=Math.abs(b);return C<-(f=(8881784197001252e-31*(Math.abs(f*E)+Math.abs($*g))*N+x*Math.abs(O))/(b*b)+2220446049250313e-31*Math.abs(C))||C>1+f||(f=(g=c*E-$*p)/b)<-(c=(8881784197001252e-31*(Math.abs(c*E)+Math.abs($*p))*N+x*Math.abs(g))/(b*b)+2220446049250313e-31*Math.abs(f))||f>1+c||(C=u.P.Tk(C,0,1),c=u.P.Tk(f,0,1),p=o.ic(C),b=r.ic(c),(x=new u.h).vc(p,b),x.length()>n&&(x.add(p,b),x.scale(.5),C=o.ge(x,!1),c=r.ge(x,!1),o=o.ic(C),r=r.ic(c),o.sub(r),o.length()>n)||l.na(C,c)),l},h.JM=function(o,r,n,l){var c=0;if((o.ta==r.ta&&o.oa==r.oa||o.ta==r.qa&&o.oa==r.ma)&&(c++,!l))return 1;if(o.qa==r.ta&&o.ma==r.oa||o.qa==r.qa&&o.ma==r.ma){if(++c==2)return 2;if(!l)return 1}return r.xi(o.ta,o.oa,n)||r.xi(o.qa,o.ma,n)||o.xi(r.ta,r.oa,n)||o.xi(r.qa,r.ma,n)?1:l&&c!=0||h.IM(o,r)==0?0:1},h.Yx=function(o,r,n,l,c,p){var f=0,g=o.tp(r.ta,r.oa,p,!1),b=o.tp(r.qa,r.ma,p,!1),x=r.tp(o.ta,o.oa,p,!1),$=r.tp(o.qa,o.ma,p,!1);return isNaN(g)||(l!=null&&(l[f]=g),c!=null&&(c[f]=0),n!=null&&(n[f]=u.h.construct(r.ta,r.oa)),f++),isNaN(b)||(l!=null&&(l[f]=b),c!=null&&(c[f]=1),n!=null&&(n[f]=u.h.construct(r.qa,r.ma)),f++),f==2||isNaN(x)||g==0&&x==0||b==0&&x==1||(l!=null&&(l[f]=0),c!=null&&(c[f]=x),n!=null&&(n[f]=u.h.construct(o.ta,o.oa)),f++),f==2||isNaN($)||g==1&&$==0||b==1&&$==1||(l!=null&&(l[f]=1),c!=null&&(c[f]=$),n!=null&&(n[f]=u.h.construct(r.qa,r.ma)),f++),0<f?(f==2&&l!=null&&l[0]>l[1]&&(o=l[0],l[0]=l[1],l[1]=o,c!=null&&(l=c[0],c[0]=c[1],c[1]=l),n!=null&&(c=u.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=h.GM(o,r,p),isNaN(f.x)?0:(n!=null&&(n[0]=o.ic(f.x)),l!=null&&(l[0]=f.x),c!=null&&(c[0]=f.y),1))},h.prototype.$F=function(){return 0},h.prototype.qp=function(){},h.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},h}(u.NC);u.zb=k}(q||(q={})),function(u){var k=function(){function v(){this.Lm=[],this.za=-1}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var h=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),h}return this.Lm=null},v.prototype.VX=function(h){this.Lm.push(h)},v.prototype.re=function(){},v}();u.bL=k}(q||(q={})),function(u){var k;(k=u.NL||(u.NL={}))[k.enumFillRuleOddEven=0]="enumFillRuleOddEven",k[k.enumFillRuleWinding=1]="enumFillRuleWinding";var v=function(h){function o(r,n){var l=h.call(this)||this;if(l.yf=!1,l.Gq=null,l.uq=0,l.tq=0,l.Cj=null,l.Og=!1,l.nb=null,l.mb=null,l.Se=null,l.Nj=null,l.Td=null,l.vq=0,l.gb=0,l.zq=0,n===void 0)l.yf=r,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=u.fe.pg();else{if(n==null)throw u.i.O();l.yf=r,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=n}return l.Cj=null,l.gb=0,l}return pe(o,h),o.prototype.vm=function(){return 0<this.vq},o.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new u.Ta(this.description):this.Gq.Pf(this.description)},o.prototype.rx=function(r,n){var l=new u.h;l.x=r,l.y=n,this.Nt(l)},o.prototype.Nt=function(r){this.Xx(),this.Gq.Db(r),this.Og=!0},o.prototype.nf=function(r){if(r.B())throw u.i.O();this.Ll(r.description),this.Xx(),r.copyTo(this.Gq),this.Og=!0},o.prototype.Rx=function(){var r=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=u.Zc.Qh(2),this.nb.write(0,0),this.mb=u.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),r++);var n=this.xa;this.nb.write(this.nb.size-1,this.xa+r),this.fm(n+r),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(n,this.Gq),this.Og=!1)},o.prototype.Aj=function(r,n){this.Rx(),this.Db(this.xa-1,r,n)},o.prototype.Ei=function(r){this.Rx(),this.Db(this.xa-1,r)},o.prototype.lineTo=function(r){this.Rx(),this.It(this.xa-1,r)},o.prototype.xU=function(r){if(this.wc(),this.yf)throw u.i.Ra();var n=this.ea();if(r>n)throw u.i.Ra();if(this.ec(r)){if(this.mb==null)throw u.i.Ra();var l=this.xa,c=this.Ca(r),p=this.Wc(r);this.fm(this.xa+1),this.oc();for(var f=0,g=this.description.Ba;f<g;f++)if(this.Aa[f]!=null){var b=u.sa.Wa(this.description.Fd(f));this.Aa[f].On(b*p,this.Aa[f],b*c,b,!0,1,b*l)}for(;n>r;n--)l=this.nb.read(n),this.nb.write(n,l+1);this.mb.FE(r,1)}},o.prototype.Cp=function(){if(this.vx(),r===void 0){this.Og=!1;var r=this.ea()-1}var n=this.mb.read(r);this.mb.write(r,1|n),this.Se!=null&&(r=this.Wc(r)-1,this.Se.write(r,1),this.Nj.write(r,-1))},o.prototype.ec=function(r){return(1&this.mb.read(r))!=0},o.prototype.Pn=function(r){if(this.ec(r))return!0;var n=this.Ca(r);return!(n>(r=this.Wc(r)-1))&&(n=this.Oa(n),r=this.Oa(r),n.rb(r))},o.prototype.Av=function(r){return(2&this.mb.read(r))!=0},o.prototype.pc=function(r,n){if(this.Ll(r.description),r.K()!=322)throw u.i.Ra();var l=new u.Ta;(n||this.B())&&(r.Vo(l),this.nf(l)),r.Ro(l),this.lineTo(l)},o.prototype.vp=function(r){var n=this.xa==0;this.rx(r.v,r.G),this.Aj(r.v,r.H),this.Aj(r.C,r.H),this.Aj(r.C,r.G),this.Cp(),this.Og=!1,n&&this.Nf(256,!1)},o.prototype.bd=function(r,n){if(!r.B()){for(var l=this.xa==0,c=new u.Ta(this.description),p=0;4>p;p++)r.If(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Cp(),this.Og=!1,l&&!n&&this.Nf(256,!1)}},o.prototype.add=function(r,n){for(var l=0;l<r.ea();l++)this.addPath(r,l,!n)},o.prototype.addPath=function(r,n,l){this.wf(-1,r,n,l)},o.prototype.$k=function(r,n){this.Cz(r,n)},o.prototype.Fr=function(r,n,l,c,p){if(p||this.ea()!=0||(p=!0),0>n&&(n=r.ea()-1),n>=r.ea()||0>l||0>c||c>r.tv(n))throw u.i.ga("index out of bounds");if(c!=0){var f=r.ec(n)&&l+c==r.tv(n);if(!f||c!=1){if(this.Og=!1,this.Ll(r.description),l=r.Ca(n)+l+1,p&&(c++,l--),f&&c--,f=this.xa,this.fm(this.xa+c),this.oc(),p){if(c==0)return;this.nb.add(this.xa),p=r.mb.read(n),p&=-5,this.yf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);p=0;for(var g=this.description.Ba;p<g;p++){var b=this.description.ld(p),x=u.sa.Wa(b),$=r.description.Rf(b);0>$||r.Aa[$]==null?this.Aa[p].Nn(x*f,u.sa.te(b),c*x,x*f):this.Aa[p].On(x*f,r.Aa[$],x*l,c*x,!0,x,x*f)}if(this.vm()||r.Av(n))throw u.i.Ra();this.Qc(1993)}}},o.prototype.jJ=function(){for(var r=0,n=this.ea();r<n;r++)this.zW(r)},o.prototype.zW=function(r){if(this.oc(),r>=this.ea())throw u.i.O();var n=this.Ca(r),l=this.Ka(r);r=this.ec(r)?1:0;for(var c=0,p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=u.sa.Wa(this.description.Fd(c));this.Aa[c].pi(f*(n+r),f*(l-r),f)}this.Qc(1993)},o.prototype.ar=function(r){this.oc();var n=this.ea();if(0>r&&(r=n-1),r>=n)throw u.i.O();for(var l=this.Ca(r),c=this.Ka(r),p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var g=u.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(g*l,g*c,g*this.xa)}for(l=r+1;l<=n;l++)p=this.nb.read(l),this.nb.write(l-1,p-c);if(this.mb==null)for(l=r+1;l<=n;l++)r=this.mb.read(l),this.mb.write(l-1,r);this.nb.resize(n),this.mb.resize(n),this.xa-=c,this.Rg-=c,this.Qc(1993)},o.prototype.wf=function(r,n,l,c){if(n==this||l>=n.ea())throw u.i.O();var p=this.ea();if(r>p)throw u.i.O();0>r&&(r=p),0>l&&(l=n.ea()-1),this.Og=!1,this.Ll(n.description),n.oc();var f=n.Ca(l),g=n.Ka(l),b=this.xa,x=n.ec(l)&&!c?1:0;this.fm(this.xa+g),this.oc();for(var $=r<p?this.Ca(r):b,E=0,O=this.description.Ba;E<O;E++){var C=this.description.Fd(E),N=n.description.Rf(C),D=u.sa.Wa(C);0<=N&&n.Aa[N]!=null?(x!=0&&this.Aa[E].On($*D,n.Aa[N],D*f,D,!0,D,D*b),this.Aa[E].On(($+x)*D,n.Aa[N],D*(f+x),D*(g-x),c,D,D*(b+x))):this.Aa[E].Nn($*D,u.sa.te(C),D*g,D*b)}for(this.nb.add(b+g),c=p;c>=r+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+g);for(n.Av(l),this.mb.add(0),c=p-1;c>=r+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.ER().read(l),p&=-5,this.yf&&(p|=1),this.mb.write(r,p)},o.prototype.Cz=function(r,n){var l=-1,c=this.ea();if(l>c)throw u.i.O();0>l&&(l=c),this.Og=!1;var p=this.xa;this.fm(this.xa+n),this.oc();var f=l<c?this.Ca(l):p;if(r!=null)this.Aa[0].Dz(2*f,r,0,n,!0,2*p);else{var g=u.sa.te(0);this.Aa[0].Nn(2*f,g,2*n,2*p)}r=1;for(var b=this.description.Ba;r<b;r++){g=this.description.ld(r);var x=u.sa.Wa(g);g=u.sa.te(g),this.Aa[r].Nn(f*x,g,x*n,x*p)}for(this.nb.add(this.xa),p=c;p>=l+1;p--)f=this.nb.read(p-1),this.nb.write(p,f+n);for(this.mb.add(0),p=c-1;p>=l+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.yf&&this.mb.write(l,1)},o.prototype.lG=function(r,n,l){var c=-1;if(0>r&&(r=this.ea()),r>this.ea()||c>this.Ka(r)||l>n.length)throw u.i.ga("index out of bounds");if(l!=0){r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ka(r)),this.oc();var p=this.xa;this.fm(this.xa+l),this.oc();for(var f=0,g=this.description.Ba;f<g;f++){var b=this.description.Fd(f),x=u.sa.Wa(b);this.Aa[f].Wt(x*(this.Ca(r)+c+l),(p-this.Ca(r)-c)*x,this.Aa[f],x*(this.Ca(r)+c),!0,x),f==0?this.Aa[f].qC(x*(this.Ca(r)+c),l,n,0,!0):this.Aa[f].Yj(u.sa.te(b),(this.Ca(r)+c)*x,l*x)}for(this.vm()&&(this.Se.Wt(this.Ca(r)+c+l,p-this.Ca(r)-c,this.Se,this.Ca(r)+c,!0,1),this.Nj.Wt(this.Ca(r)+c+l,p-this.Ca(r)-c,this.Nj,this.Ca(r)+c,!0,1),this.Se.Yj(1,this.Ca(r)+c,l),this.Nj.Yj(-1,this.Ca(r)+c,l)),r+=1,n=this.ea();r<=n;r++)this.nb.write(r,this.nb.read(r)+l)}},o.prototype.xf=function(r,n,l){var c=this.ea();if(0>r&&(r=this.ea()),r>=c||n>this.Ka(r))throw u.i.ga("index out of bounds");r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ka(r));var p=this.xa;this.fm(this.xa+1),this.oc();var f=this.Ca(r);this.Aa[0].xj(2*(f+n),l,2*p),l=1;for(var g=this.description.Ba;l<g;l++){var b=this.description.Fd(l),x=u.sa.Wa(b);this.Aa[l].Nn(x*(f+n),u.sa.te(b),x,x*p)}for(r+=1;r<=c;r++)this.nb.write(r,this.nb.read(r)+1)},o.prototype.yB=function(r,n){var l=this.ea();if(0>r&&(r=l-1),r>=l||n>=this.Ka(r))throw u.i.ga("index out of bounds");this.oc();var c=this.Ca(r);0>n&&(n=this.Ka(r)-1),n=c+n,c=0;for(var p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=u.sa.Wa(this.description.Fd(c));this.Aa[c].Gn(f*n,f,f*this.xa)}for(;l>=r+1;l--)n=this.nb.read(l),this.nb.write(l,n-1);this.xa--,this.Rg--,this.Qc(1993)},o.prototype.pE=function(r,n,l,c){if(r=this.Ca(r)+n,(l=this.Ca(l)+c)<r||0>r||l>this.I()-1)throw u.i.O();n=0,(c=this.Ha()).Wb(r);do{for(;c.Ia()&&(r=c.ia(),c.xb()!=l);)n+=r=r.Rb();if(c.xb()==l)break}while(c.ab());return n},o.prototype.aO=function(r,n,l){if(n=this.Ca(r)+n,l=this.Ca(r)+l,0>n||l>this.I()-1)throw u.i.O();var c=this.Ha();if(n>l){if(!this.ec(r))throw u.i.O("cannot iterate across an open path");c.EB()}var p=r=0;c.Wb(n);do p+=r,r=c.ia().Rb();while(c.xb()!=l);return p},o.prototype.ng=function(){return u.si.im(this,null)},o.prototype.FS=function(r,n,l){for(var c=r;c<l-1;c++)if(this.ec(c))throw u.i.O("cannot interpolate across closed paths");if((c=this.description.Ba)!=1){var p=this.pE(r,n,l,void 0);if(p!=0)for(var f=1;f<c;f++){var g=this.description.ld(f);if(u.sa.gz(g)!=2)for(var b=u.sa.Wa(g),x=0;x<b;x++)this.HS(g,r,n,l,p,x)}}},o.prototype.ES=function(r,n,l){var c=this.description.Ba;if(c!=1){var p=this.aO(r,n,l);if(p!=0)for(var f=1;f<c;f++){var g=this.description.ld(f);if(u.sa.gz(g)!=2)for(var b=u.sa.Wa(g),x=0;x<b;x++)this.GS(g,r,n,l,p,x)}}},o.prototype.HS=function(r,n,l,c,p,f){var g=this.Ha(),b=this.Ca(n)+l;c=this.Ca(c)+void 0,n=this.Vc(r,b,f),l=this.Vc(r,c,f);var x=n,$=0;g.Wb(b);do if(g.Ia()){if(g.ia(),g.xb()==c)break;this.setAttribute(r,g.xb(),f,x),g.ni();do{if(b=g.ia(),g.kk()==c)return;$+=b=b.Rb(),x=u.mc.jq(n,l,$/p),g.Qn()||this.setAttribute(r,g.kk(),f,x)}while(g.Ia())}while(g.ab())},o.prototype.GS=function(r,n,l,c,p,f){var g=this.Ha(),b=this.Ca(n)+l;if((n=this.Ca(n)+c)!=b){c=this.Vc(r,b,f),l=this.Vc(r,n,f);var x=0;g.Wb(b),g.EB(),b=c;do{var $=g.ia();this.setAttribute(r,g.xb(),f,b),x+=b=$.Rb(),b=u.mc.jq(c,l,x/p)}while(g.kk()!=n)}},o.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},o.prototype.Pc=function(r){r instanceof u.Ed?this.TD(r,-1):this.rN(r)},o.prototype.TD=function(r,n){if(!this.B()&&!r.isIdentity()){this.oc();var l=this.Aa[0],c=new u.h,p=new u.h;if(0>n){var f=this.vm(),g=0;n=this.xa}else f=this.Av(n),g=this.Ca(n),n=this.Wc(n);for(;g<n;g++){if(c.x=l.read(2*g),c.y=l.read(2*g+1),f){var b=this.Nj.read(g);if(0<=b)switch(7&this.Se.read(g)){case 2:p.x=this.Td.read(b),p.y=this.Td.read(b+1),r.Gh(p,p),this.Td.write(b,p.x),this.Td.write(b+1,p.y),p.x=this.Td.read(b+3),p.y=this.Td.read(b+4),r.Gh(p,p),this.Td.write(b+3,p.x),this.Td.write(b+4,p.y);break;case 4:throw u.i.Ra()}}r.Gh(c,c),l.write(2*g,c.x),l.write(2*g+1,c.y)}this.Qc(1993)}},o.prototype.rN=function(r){if(!this.B()){this.se(1),this.oc();for(var n=this.Aa[0],l=this.Aa[1],c=new u.Od,p=new u.Od,f=this.vm(),g=0;g<this.xa;g++){if(c.x=n.read(2*g),c.y=n.read(2*g+1),c.z=l.read(g),f){var b=this.Nj.read(g);if(0<=b)switch(7&this.Se.read(g)){case 2:p.x=this.Td.read(b),p.y=this.Td.read(b+1),p.z=this.Td.read(b+2),p=r.hp(p),this.Td.write(b,p.x),this.Td.write(b+1,p.y),this.Td.write(b+1,p.z),p.x=this.Td.read(b+3),p.y=this.Td.read(b+4),p.z=this.Td.read(b+5),p=r.hp(p),this.Td.write(b+3,p.x),this.Td.write(b+4,p.y),this.Td.write(b+5,p.z);break;case 4:throw u.i.Ra()}}c=r.hp(c),n.write(2*g,c.x),n.write(2*g+1,c.y),l.write(g,c.z)}this.Qc(1993)}},o.prototype.ey=function(){this.nb==null&&(this.nb=u.Zc.Qh(1,0),this.mb=u.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},o.prototype.qp=function(r){r.Og=!1,r.vq=this.vq,r.zq=this.zq,r.nb=this.nb!=null?u.ja.Dn(this.nb):null,r.mb=this.mb!=null?u.rn.Dn(this.mb):null,r.Nj=this.Nj!=null?u.ja.Dn(this.Nj):null,r.Se=this.Se!=null?u.rn.Dn(this.Se):null,r.Td=this.Td!=null?u.ce.Dn(this.Td):null,r.uq=this.uq,r.tq=this.tq,r.Cj=this.ck(1024)?null:this.Cj},o.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var r=this.Ha(),n=new u.Ex(0);r.ab();)for(;r.Ia();)n.add(r.ia().Rb());return this.uq=n.tm(),this.Nf(512,!1),n.tm()},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&h.prototype.Nb.call(this,r)))return!1;var n=this.ea();return!(n!=r.ea()||this.nb!=null&&!this.nb.Nb(r.nb,0,n+1)||this.zq!=r.zq||this.mb!=null&&!this.mb.Nb(r.mb,0,n))&&h.prototype.Nb.call(this,r)},o.prototype.Ha=function(){return new u.TL(this)},o.prototype.dy=function(r){if(h.prototype.dy.call(this,r),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Ap=function(r,n){if(h.prototype.Ap.call(this,r,n),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},o.prototype.Gv=function(r){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(r)):(4&this.mb.read(r))!=0)},o.prototype.Kr=function(r){return this.yf?(this.zu(),this.Cj.read(r)):0},o.prototype.zu=function(){if(this.ck(1024)){var r=this.ea();this.Cj==null?this.Cj=new u.ce(r):this.Cj.size!=r&&this.Cj.resize(r),r=new u.Ex(0);for(var n=new u.Ex(0),l=new u.h,c=0,p=this.Ha();p.ab();){for(n.reset(),this.D(this.Ca(p.gb),l);p.Ia();)n.add(p.ia().Sx(l.x,l.y));r.add(n.tm());var f=c++;this.Cj.write(f,n.tm())}this.tq=r.tm(),this.Nf(1024,!1)}},o.prototype.AR=function(){if(this.yf){this.hm();for(var r=this.ea(),n=0;n<r;n++)4&this.mb.read(n)}},o.prototype.hm=function(){if(this.ck(8)){this.zu();var r=this.ea();(this.mb==null||this.mb.size<r)&&(this.mb=u.Zc.Or(r+1));for(var n=1,l=0;l<r;l++){var c=this.Cj.read(l);l==0&&(n=0<c?1:-1),0<c*n?this.mb.uJ(l,4):this.mb.FE(l,4)}this.Nf(8,!1)}},o.prototype.nz=function(r){var n=this.gb,l=this.ea();if(0<=n&&n<l){if(r<this.Wc(n)){if(r>=this.Ca(n))return n;n--}else n++;if(0<=n&&n<l&&r>=this.Ca(n)&&r<this.Wc(n))return this.gb=n}if(5>l){for(n=0;n<l;n++)if(r<this.Wc(n))return this.gb=n;throw u.i.ga("corrupted geometry")}for(n=0,--l;l>n;){var c=n+(l-n>>1);if(r<this.Ca(c))l=c-1;else{if(!(r>=(n=this.Wc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.sz=function(){var r=this.I();if(!this.yf){r-=this.ea();for(var n=0,l=this.ea();n<l;n++)this.ec(n)&&r++}return r},o.prototype.tv=function(r){var n=this.Ka(r);return this.ec(r)||n--,n},o.prototype.Ja=function(){return new o(this.yf,this.description)},o.prototype.Eb=function(){return this.yf?2:1},o.prototype.K=function(){return this.yf?1736:1607},o.prototype.LJ=function(r){this.nb=r,this.Qc(16777215)},o.prototype.QR=function(){return this.vx(),this.Se},o.prototype.ER=function(){return this.vx(),this.mb},o.prototype.KJ=function(r){this.mb=r,this.Qc(16777215)},o.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Wc=function(r){return this.nb.read(r+1)},o.prototype.Ka=function(r){return this.nb.read(r+1)-this.nb.read(r)},o.prototype.Ca=function(r){return this.nb.read(r)},o.prototype.nu=function(r,n){this.Cb==null&&(this.Cb=new u.Wk),n=u.Mx.kW(n);var l=this.Cb.Hk;if(l!=null){if(!(l.Kk<r||n>l.MR()))return!0;this.Cb.tD(null)}return l=u.Mx.create(this,r,n),this.Cb.tD(l),!0},o.prototype.dc=function(){var r=h.prototype.dc.call(this);if(!this.Bc()){var n=this.ea();this.nb!=null&&this.nb.Cn(r,0,n+1),this.mb!=null&&this.mb.Cn(r,0,n)}return r},o.prototype.UF=function(r){return this.Se!=null?this.Se.read(r):1},o.prototype.cc=function(r,n,l){var c=this.nz(r);if(r==this.Wc(c)-1&&!this.ec(c))throw u.i.ga("index out of bounds");this.oc();var p=this.Se,f=1;if(p!=null&&(f=7&p.read(r)),f!==1)throw u.i.Ra();if(n.Qr(),n=n.get(),l?n.Pf(u.fe.pg()):n.Pf(this.description),c=r==this.Wc(c)-1&&this.ec(c)?this.Ca(c):r+1,p=new u.h,this.D(r,p),n.Ec(p),this.D(c,p),n.Rc(p),!l)for(l=1,p=this.description.Ba;l<p;l++){f=this.description.Fd(l);for(var g=u.sa.Wa(f),b=0;b<g;b++){var x=this.Vc(f,r,b);n.TB(f,b,x),x=this.Vc(f,c,b),n.JB(f,b,x)}}},o.prototype.Tj=function(r,n){if(r>=this.ea())throw u.i.O();if(this.B())n.Pa();else{if(this.Av(r))throw u.i.ga("not implemented");var l=this.vb(0),c=new u.h,p=new u.l;p.Pa();var f=this.Ca(r);for(r=this.Wc(r);f<r;f++)l.uc(2*f,c),p.$b(c);n.L(p)}},o.prototype.hj=function(r){return this.Cb==null&&(this.Cb=new u.Wk),!(r==0||16>this.I())&&(r=u.ua.iE(this),this.Cb.RM(r),!0)},o.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new u.Wk),this.Cb.Bo==null){this.Cb.sD(null);var r=u.ua.TN(this);this.Cb.sD(r)}},o.prototype.$o=function(r){this.zq=r},o.prototype.Kn=function(){return this.zq},o.prototype.yD=function(r){if(this==r)throw u.i.ga("MultiPathImpl.add");for(var n=this.ea(),l=0;l<r.ea();l++)this.addPath(r,l,!0),this.xU(n),n++},o.prototype.fO=function(r){var n=this.nz(r),l=this.Ca(n);if(l!=r){if(r>=(n=this.Wc(n))||r<l)throw u.i.ga("change_ring_start_point");for(var c=0,p=this.description.Ba;c<p;c++){var f=this.description.ld(c);f=u.sa.Wa(f),this.Aa[c].rotate(l*f,r*f,n*f)}}},o}(u.Fx);u.Xk=v}(q||(q={})),function(u){var k=function(v){function h(o){var r=v.call(this)||this;if(o!==void 0){if(o==null)throw u.i.O();r.description=o}else r.description=u.fe.pg();return r.xa=0,r}return pe(h,v),h.prototype.Ja=function(){return new h(this.description)},h.prototype.add=function(o){this.resize(this.xa+1),this.Fh(this.xa-1,o)},h.prototype.Du=function(o,r){this.resize(this.xa+1);var n=new u.h;n.na(o,r),this.Db(this.xa-1,n)},h.prototype.Gd=function(o,r,n){if(n=0>n?o.I():n,0>r||r>o.I()||n<r)throw u.i.O();if(r!=n){this.Ll(o.description),n-=r;var l=this.xa;this.resize(this.xa+n),this.oc();for(var c=0,p=o.description.Ba;c<p;c++){var f=o.description.Fd(c),g=u.sa.Wa(f),b=this.vb(f);f=o.vb(f),b.On(l*g,f,r*g,n*g,!0,1,l*g)}}},h.prototype.CD=function(o,r){var n=o.length;if(r=0>r?n:r,0>n||0>r)throw u.i.O();if(r!=0){n=r-0,r=this.xa,this.resize(this.xa+n);for(var l=0;l<n;l++)this.Db(r+l,o[0+l])}},h.prototype.yB=function(o){if(0>o||o>=this.I())throw u.i.ga("index out of bounds");this.oc();for(var r=0,n=this.description.Ba;r<n;r++)if(this.Aa[r]!=null){var l=u.sa.Wa(this.description.Fd(r));this.Aa[r].Gn(l*o,l,l*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},h.prototype.resize=function(o){this.fm(o)},h.prototype.qp=function(){},h.prototype.Pa=function(){v.prototype.rD.call(this)},h.prototype.Pc=function(o){if(o instanceof u.Ed){if(this.B())return;this.oc();for(var r=this.Aa[0],n=new u.h,l=0;l<this.xa;l++)n.x=r.read(2*l),n.y=r.read(2*l+1),o.Gh(n,n),r.write(2*l,n.x),r.write(2*l+1,n.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),r=this.Aa[0],n=this.Aa[1];var c=new u.Od;for(l=0;l<this.xa;l++){c.x=r.read(2*l),c.y=r.read(2*l+1),c.z=n.read(l);var p=o.hp(c);r.write(2*l,p.x),r.write(2*l+1,p.y),n.write(l,p.z)}}this.Qc(1993)},h.prototype.Eb=function(){return 0},h.prototype.K=function(){return 550},h.prototype.He=function(){return 0},h.prototype.Rb=function(){return 0},h.prototype.Nb=function(o){return o==this||o instanceof h&&v.prototype.Nb.call(this,o)},h.prototype.gW=function(o,r){var n=this.xa;if(n=Math.min(n,r+1e3),0>r||r>=this.xa||n<r||o.length!=1e3)throw u.i.O();var l=n-r,c=[];for(this.vb(0).Xw(2*r,2*l,c,0,!0),r=0;r<l;r++)o[r]=u.h.construct(c[2*r],c[2*r+1]);return n},h.prototype.Zx=function(){},h.prototype.ey=function(){},h.prototype.nu=function(){return!1},h.prototype.hj=function(){return!1},h.prototype.ng=function(){return null},h}(u.Fx);u.ee=k}(q||(q={})),function(u){var k;(k=u.dL||(u.dL={}))[k.NotDetermined=0]="NotDetermined",k[k.Structure=1]="Structure",k[k.DegenerateSegments=2]="DegenerateSegments",k[k.Clustering=3]="Clustering",k[k.Cracking=4]="Cracking",k[k.CrossOver=5]="CrossOver",k[k.RingOrientation=6]="RingOrientation",k[k.RingOrder=7]="RingOrder",k[k.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",k[k.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",k[k.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var v=function(){function h(o,r,n){o===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=o,this.Lo=r,this.Mo=n)}return h.prototype.Yt=function(o){this.Lj=o.Lj,this.Lo=o.Lo,this.Mo=o.Mo},h}();u.Nd=v}(q||(q={})),function(u){u.P=function(){function k(){}return k.assert=function(v){if(v===!1)throw u.i.BK()},k.XJ=function(v){return isNaN(v)?NaN:v===0?v:0<v?1:-1},k.Hu=function(v){var h;h===void 0&&(h=0);for(var o=[],r=0;r<v;r++)o[r]=k.mg(2,h);return o},k.mg=function(v,h){h===void 0&&(h=0);for(var o=[],r=0;r<v;r++)o[r]=h;return o},k.bv=function(v,h){var o,r;for(o===void 0&&(o=0),r===void 0&&(r=v.length-1);o<=r;o++)v[o]=h},k.Tk=function(v,h,o){return v<h?h:v>o?o:v},k.Vh=function(v,h){var o=5381;return((o=((o=((o=h!==void 0?(h<<5)+h+(255&v):(o<<5)+o+(255&v))<<5)+o+(v>>8&255))<<5)+o+(v>>16&255))<<5)+o+(v>>24&255)&2147483647},k.wj=function(){throw Error("Not Implemented")},k.XA=function(v){return k.WT(v)+12345&2147483647},k.SG=function(v){var h=32,o=v%k.Px|0,r=v/k.Px|0;return(h&=63)==0?v:(32>h?(v=o>>>h|r<<32-h,h=r>>h):(v=r>>h-32,h=0<=r?0:-1),h*k.Px+(v>>>0))},k.WT=function(v){var h=1103515245,o=65535&h;return((h-o)*(v|=0)|0)+(o*v|0)|0},k.truncate=function(v){return 0>v?-1*Math.floor(Math.abs(v)):Math.floor(v)},k.MAX_SAFE_INTEGER=Math.pow(2,53)-1,k.MIN_SAFE_INTEGER=-k.MAX_SAFE_INTEGER,k.QC=65536,k.Px=k.QC*k.QC,k}()}(q||(q={})),function(u){var k;(k=u.xL||(u.xL={}))[k.Project=0]="Project",k[k.Union=1]="Union",k[k.Difference=2]="Difference",k[k.Proximity2D=3]="Proximity2D",k[k.Relate=4]="Relate",k[k.Equals=5]="Equals",k[k.Disjoint=6]="Disjoint",k[k.Intersects=7]="Intersects",k[k.Within=8]="Within",k[k.Contains=9]="Contains",k[k.Crosses=10]="Crosses",k[k.Touches=11]="Touches",k[k.Overlaps=12]="Overlaps",k[k.Buffer=13]="Buffer",k[k.Distance=14]="Distance",k[k.Intersection=15]="Intersection",k[k.Clip=16]="Clip",k[k.Cut=17]="Cut",k[k.DensifyByLength=18]="DensifyByLength",k[k.DensifyByAngle=19]="DensifyByAngle",k[k.LabelPoint=20]="LabelPoint",k[k.GeodesicBuffer=21]="GeodesicBuffer",k[k.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",k[k.ShapePreservingDensify=23]="ShapePreservingDensify",k[k.GeodeticLength=24]="GeodeticLength",k[k.GeodeticArea=25]="GeodeticArea",k[k.Simplify=26]="Simplify",k[k.SimplifyOGC=27]="SimplifyOGC",k[k.Offset=28]="Offset",k[k.Generalize=29]="Generalize",k[k.SymmetricDifference=30]="SymmetricDifference",k[k.ConvexHull=31]="ConvexHull",k[k.Boundary=32]="Boundary",k[k.SimpleRelation=33]="SimpleRelation";var v=function(){function h(){}return h.prototype.K=function(){return null},h.prototype.yn=function(){},h.prototype.Ku=function(){return!1},h}();u.Ge=v}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 13},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l,c){return o instanceof u.ba?(c=new u.$c(o),this.W(c,r,[n],!1,l).next()):l===!0?(n=new u.wC(o,r,n,!1,c),u.Ih.local().W(n,r,c)):new u.wC(o,r,n,!1,c)},h.instance=null,h}(u.Ge);u.vC=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n,l){this.za=-1,this.Sd=h,this.Vz=o,this.Es=r,this.nT=new u.l,this.nT.Pa(),this.ho=-1,this.Vb=l}return v.prototype.next=function(){for(var h;(h=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(h,this.Es[this.ho]);return null},v.prototype.Ma=function(){return this.za},v.prototype.buffer=function(h,o){return u.CK.buffer(h,o,this.Vz,NaN,96,this.Vb)},v.prototype.re=function(){},v}();u.wC=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 16},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l){return o instanceof u.ba?(o=new u.$c(o),this.W(o,r,n,l).next()):new u.gL(o,r,n,l)},h.instance=null,h}(u.Ge);u.fL=k}(q||(q={})),function(u){var k=function(){function v(h,o,r){if(this.za=-1,h==null)throw u.i.O();this.aa=o,this.Ak=h,this.ra=u.ua.Xd(r,o,!1)}return v.prototype.next=function(){var h;return(h=this.Ak.next())!=null?(this.za=this.Ak.Ma(),u.Vd.clip(h,this.aa,this.ra,0)):null},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();u.gL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 31},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n){return o instanceof u.ba?u.yC.mE(o):new u.yC(r,o,n)},h.instance=null,h}(u.Ge);u.xC=k}(q||(q={})),function(u){var k=function(){function v(h,o,r){if(this.pA=new u.au,this.za=-1,o==null)throw u.i.O();this.YG=h,this.Jc=!1,this.Ak=o,this.Vb=r}return v.prototype.next=function(){if(this.YG){if(!this.Jc){var h=this.ZN(this.Ak);return this.Jc=!0,h}return null}if(!this.Jc){if((h=this.Ak.next())!=null)return this.za=this.Ak.Ma(),v.mE(h);this.Jc=!0}return null},v.prototype.Ma=function(){return this.za},v.prototype.ZN=function(h){for(var o;(o=h.next())!=null;)this.pA.Ib(o);return this.pA.YQ()},v.prototype.re=function(){if(!this.Jc){if(!this.YG)throw u.i.ga("Invalid call for non merging convex hull.");var h=this.Ak.next();if(h==null)throw u.i.ga("Expects a non-null geometry.");this.pA.Ib(h)}},v.mE=function(h){if(v.QS(h))return h;var o=h.K();if(u.Xk.zd(o))return(o=new u.Ua(h.description)).pc(h,!0),o;if(o==550&&h.I()==2){var r=new u.Ta;return o=new u.Ua(h.description),h.we(0,r),o.nf(r),h.we(1,r),o.lineTo(r),o}return u.au.MO(h)},v.QS=function(h){if(h.B())return!0;var o=h.K();return o==33||o==197||!u.Xk.zd(o)&&(o==550?h.I()==1:o==1607?h.ea()==1&&2>=h.I():h.ea()==1&&(2>=h.I()||u.au.EG(h,0)))},v}();u.yC=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 17},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l,c){return new u.iL(o,r,n,l,c)},h.instance=null,h}(u.Ge);u.hL=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n,l){if(this.Vf=null,o==null||r==null)throw u.i.ga("invalid argument");this.kT=h,this.iA=o,this.gH=r,h=u.ua.ov(o,r),this.ra=u.ua.Xd(n,h,!0),this.fH=-1,this.od=l}return v.prototype.Ma=function(){return 0},v.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},v.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},v.prototype.OQ=function(){var h=new u.Ua,o=new u.Ua,r=new u.Ua;this.Vf.push(h),this.Vf.push(o);var n=[];u.GK.EK(this.kT,this.iA,this.gH,this.ra,n,this.od);for(var l=0;l<n.length;l++){var c=n[l];if(c.ct==0)h.add(c.Y,!1);else if(c.ct==1||c.ct==2)o.add(c.Y,!1);else if(c.ct==3)this.Vf.push(c.Y);else{if(c.ct!=4)throw u.i.ga("internal");r.add(c.Y,!1)}}r.B()||h.B()&&o.B()&&!(3<=this.Vf.length)||this.Vf.push(r),h.B()&&o.B()&&3>this.Vf.length&&(this.Vf.length=0)},v.prototype.NQ=function(){var h=new u.ja(0),o=new u.hd,r=o.WE(),n=o.Ib(this.iA),l=o.Ib(this.gH),c=new u.Hg;try{c.Gt(o,this.ra,this.od),c.fl(r,n,l,h);var p=o.Ke(n),f=new u.Ea,g=new u.Ea;for(this.Vf.length=0,this.Vf.push(f),this.Vf.push(g),n=0;n<h.size;n++){var b=new u.hd,x=b.Ib(p),$=b.Ib(o.Ke(h.get(n)));c.fr(b,this.od);var E=c.Cv(x,$),O=b.Ke(E);if(!O.B()){var C=o.FF(h.get(n),r);C==2?f.add(O,!1):C==1?g.add(O,!1):this.Vf.push(O);var N=new u.hd;x=N.Ib(p),$=N.Ib(o.Ke(h.get(n))),c.fr(N,this.od),p=N.Ke(c.km(x,$))}}!p.B()&&0<h.size&&this.Vf.push(p),f.B()&&g.B()&&(this.Vf.length=0)}finally{c.Wg()}},v.prototype.re=function(){},v}();u.iL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n){if(o instanceof u.ba)return o=new u.$c(o),this.W(o,r,n).next();if(0>=r)throw u.i.O();return new u.jL(o,r,n)},h.instance=null,h}(u.Ge);u.Zl=k}(q||(q={})),function(u){var k=function(){function v(h,o){this.za=-1,this.Sd=h,this.Rs=o}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){var h;return(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(h)):null},v.prototype.IP=function(h){if(h.B()||1>h.Eb())return h;var o=h.K();if(o==1736||o==1607)return this.Iy(h);if(u.ba.zd(o))return this.KP(h);if(o==197)return this.JP(h);throw u.i.Ra()},v.prototype.KP=function(h){if(h.Rb()<=this.Rs)return h;var o=new u.Ua(h.description);return o.pc(h,!0),this.Iy(o)},v.prototype.JP=function(h){var o=new u.Ea(h.description);o.bd(h,!1);var r=new u.l;return h.A(r),h=r.da(),r.S()<=this.Rs&&h<=this.Rs?o:this.Iy(o)},v.prototype.Iy=function(h){for(var o=h.Ja(),r=h.Ha();r.ab();)for(var n=!0;r.Ia();){var l=r.ia();if(l.K()!=322)throw u.i.ga("not implemented");var c=r.Qn(),p=l.Rb();if(p>this.Rs){var f=Math.ceil(p/this.Rs);p=new u.Ta(h.description),n&&(l.Vo(p),o.nf(p));var g=n=1/f,b=0;for(--f;b<f;b++)l.Vw(g,p),o.lineTo(p),g+=n;c?o.Cp():(l.Ro(p),o.lineTo(p))}else c?o.Cp():o.pc(l,n);n=!1}return o},v.prototype.re=function(){},v}();u.jL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.K=function(){return 2},h.prototype.W=function(o,r,n,l){return o instanceof u.ba?(o=new u.$c(o),r=new u.$c(r),this.W(o,r,n,l).next()):new u.kL(o,r,n,l)},h.km=function(o,r,n,l){if(o.B()||r.B())return o;var c=o.Eb(),p=r.Eb();if(c>p)return o;var f=o.K(),g=r.K(),b=new u.l,x=new u.l,$=new u.l;o.A(b),r.A(x),$.L(b),$.$b(x);var E=($=u.ua.Xd(n,$,!0))*Math.sqrt(2)*1.00001,O=new u.l;if(O.L(b),O.X(E,E),!O.isIntersecting(x))return o;if(c==1&&p==2)return h.FV(o,r,g,n,l);if(f==33)switch(u.Xk.zd(g)?(n=new u.Ua(r.description),n.pc(r,!0)):n=r,g){case 1736:return h.SU(o,n,$);case 1607:return h.TU(o,n,$);case 550:return h.QU(o,n,$);case 197:return h.PU(o,n,$);case 33:return h.RU(o,n,$);default:throw u.i.O()}else if(f==550)switch(g){case 1736:return h.iU(o,r,$);case 197:return h.gU(o,r,$);case 33:return h.hU(o,r,$)}return u.Hg.km(o,r,n,l)},h.SU=function(o,r,n){return u.jd.FG(r,o,n)==0?o:o.Ja()},h.TU=function(o,r,n){var l=o.D();r=r.Ha();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,f=new u.l;r.ab();)for(;r.Ia();){var g=r.ia();if(g.A(f),f.X(c,c),f.contains(l)){if(g.ss(l,n))return o.Ja();var b=g.bc();if(u.h.zc(l,b)<=p||(b=g.xc(),u.h.zc(l,b)<=p))return o.Ja()}}return o},h.QU=function(o,r,n){var l=r.vb(0);r=r.I();var c=o.D(),p=new u.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<r;f++)if(l.uc(2*f,p),u.h.zc(p,c)<=n)return o.Ja();return o},h.PU=function(o,r,n){var l=new u.l;return r.A(l),l.X(n,n),r=o.D(),l.contains(r)?o.Ja():o},h.RU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D();return r=r.D(),u.h.zc(l,r)<=n?o.Ja():o},h.iU=function(o,r,n){var l=new u.l;r.A(l),l.X(n,n);for(var c=o.I(),p=!1,f=[],g=0;g<c;g++)f[g]=!1;var b=new u.h;for(g=0;g<c;g++)o.D(g,b),l.contains(b)&&u.jd.Zd(r,b,n)!=0&&(p=!0,f[g]=!0);if(!p)return o;for(r=o.Ja(),g=0;g<c;g++)f[g]||r.Gd(o,g,g+1);return r},h.gU=function(o,r,n){var l=new u.l;r.A(l),l.X(n,n),r=o.I();var c=!1;n=[];for(var p=0;p<r;p++)n[p]=!1;var f=new u.h;for(p=0;p<r;p++)o.D(p,f),l.contains(f)&&(c=!0,n[p]=!0);if(!c)return o;for(l=o.Ja(),p=0;p<r;p++)n[p]||l.Gd(o,p,p+1);return l},h.hU=function(o,r,n){var l=o.vb(0),c=o.I(),p=r.D(),f=new u.h,g=!1;r=[];for(var b=0;b<c;b++)r[b]=!1;for(n=(b=n*Math.sqrt(2)*1.00001)*b,b=0;b<c;b++)l.uc(2*b,f),u.h.zc(f,p)<=n&&(g=!0,r[b]=!0);if(!g)return o;for(l=o.Ja(),b=0;b<c;b++)r[b]||l.Gd(o,b,b+1);return l},h.FV=function(o,r,n,l,c){var p=new u.Hh;o.dn(p);var f=new u.l;return r.A(f),p.$b(f),p.X(.1*p.S(),.1*p.da()),(f=new u.Ea).bd(p,!1),n==1736?f.add(r,!0):f.bd(r,!0),u.Zj.local().W(o,f,l,c)},h.instance=null,h}(u.Ge);u.mp=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n){this.vs=o==null,this.za=-1,this.Sd=h,this.Vz=r,this.rT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.vs?null:(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),u.mp.km(h,this.rT,this.Vz,this.Vb)):null;var h},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();u.kL=k}(q||(q={})),function(u){var k=function(){function h(o){this.od=o,this.Dj=new u.l,this.Dj.Pa(),this.qh=new u.l,this.qh.Pa()}return h.prototype.Pt=function(){var o=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=o,o=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=o,o=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=o,o=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=o},h.prototype.$P=function(o,r){if(this.od!=null&&!this.od.progress(-1,-1))throw u.i.hu("user_canceled");var n=!this.Dj.isIntersecting(this.qh);return u.ba.Ic(o.K())&&u.ba.Ic(r.K())?o.I()>r.I()?this.bE(o,r,n):(this.Pt(),o=this.bE(r,o,n),this.Pt(),o):o.K()==550&&u.ba.Ic(r.K())?(o=this.cE(r,o,n),this.Pt(),o):r.K()==550&&u.ba.Ic(o.K())?this.cE(o,r,n):o.K()==550&&r.K()==550?o.I()>r.I()?this.dE(o,r):(this.Pt(),o=this.dE(r,o),this.Pt(),o):0},h.prototype.bE=function(o,r,n){var l=o.Ha(),c=r.Ha(),p=new u.l,f=new u.l,g=17976931348623157e292;if(!n&&this.lY(o,r,l,c))return 0;for(;l.ab();)for(;l.Ia();)if((o=l.ia()).A(p),!(p.px(this.qh)>g)){for(;c.ab();)for(;c.Ia();)if((r=c.ia()).A(f),p.px(f)<g&&(r=o.ub(r,n),(r*=r)<g)){if(r==0)return 0;g=r}c.aj()}return Math.sqrt(g)},h.prototype.cE=function(o,r,n){var l=o.Ha(),c=new u.l,p=17976931348623157e292,f=new u.h,g=r.I();for(n=!n&&o.K()==1736;l.ab();)for(;l.Ia();){var b=l.ia();if(b.A(c),!(1<g&&c.px(this.qh)>p)){for(var x=0;x<g;x++){if(r.D(x,f),n&&u.jd.Zd(o,f,0)!=0)return 0;var $=b.ge(f,!1);if(f.sub(b.ic($)),($=f.Uk())<p){if($==0)return 0;p=$}}n=!1}}return Math.sqrt(p)},h.prototype.dE=function(o,r){for(var n,l=17976931348623157e292,c=new u.h,p=new u.h,f=o.I(),g=r.I(),b=0;b<f;b++)if(o.D(b,c),!(1<g&&this.qh.dK(c)>l)){for(var x=0;x<g;x++)if(r.D(x,p),(n=u.h.zc(c,p))<l){if(n==0)return 0;l=n}}return Math.sqrt(l)},h.prototype.lY=function(o,r,n,l){if(o.K()==1736){for(;l.ab();)if(l.Ia()){var c=l.ia();if(u.jd.Zd(o,c.xc(),0)!=0)return!0}l.aj()}if(r.K()==1736){for(;n.ab();)if(n.Ia()&&(o=n.ia(),u.jd.Zd(r,o.xc(),0)!=0))return!0;n.aj()}return!1},h.prototype.im=function(o,r){return o.B()||r.B()?NaN:(o.A(this.Dj),r.A(this.qh),this.$P(o,r))},h}(),v=function(h){function o(){return h!==null&&h.apply(this,arguments)||this}return pe(o,h),o.prototype.W=function(r,n,l){if(r==null||n==null)throw u.i.O();if(r.B()||n.B())return NaN;var c=r.K(),p=n.K();if(c==33){if(p==33)return u.h.ub(r.D(),n.D());if(p==197)return l=new u.l,n.A(l),l.ub(r.D());(c=new u.ee).add(r),r=c}else if(c==197){if(p==197)return p=new u.l,r.A(p),l=new u.l,n.A(l),l.ub(p);(c=new u.Ea).bd(r,!1),r=c}return p==33?((p=new u.ee).add(n),n=p):p==197&&((p=new u.Ea).bd(n,!1),n=p),new k(l).im(r,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 14},o.instance=null,o}(u.Ge);u.lL=v}(q||(q={})),function(u){var k=function(){function v(h,o,r,n){this.uH=h,this.yH=o,this.od=n,this.VG=r}return v.prototype.next=function(){var h=this.uH.next();return h==null?null:this.uC(h)},v.prototype.Ma=function(){return this.uH.Ma()},v.prototype.uC=function(h){var o=h.K();if(u.ba.Tn(o))return h;if(o==197)return(o=new u.Ea(h.description)).bd(h,!1),this.uC(o);if(h.B())return h;if(h==null)throw u.i.Ra();o=h.Ja();for(var r=new u.zb,n=0,l=h.ea();n<l;n++)this.OK(h,n,o,r);return o},v.prototype.OK=function(h,o,r,n){if(!(2>h.Ka(o))){var l=h.Ca(o),c=h.Wc(o)-1,p=h.vb(0),f=h.ec(o),g=new u.ja(0);g.Jb(h.Ka(o)+1);var b=new u.ja(0);for(b.Jb(h.Ka(o)+1),g.add(f?l:c),g.add(l),l=new u.h;1<g.size;){var x=g.Gc();g.Jf();var $=g.Gc();h.D(x,l),n.Ec(l),h.D($,l),n.Rc(l),0<=($=this.NK(n,l,p,x,$,c))?(g.add($),g.add(x)):b.add(x)}if(f||b.add(g.get(0)),b.size==g.size)r.addPath(h,o,!0);else if(2<=b.size&&(!this.VG||b.size!=2||!(f||u.h.ub(h.Oa(b.get(0)),h.Oa(b.get(1)))<=this.yH))){for(o=new u.Ta,n=0,c=b.size;n<c;n++)h.we(b.get(n),o),n==0?r.nf(o):r.lineTo(o);f&&(this.VG||b.size!=2||r.lineTo(o),r.Cp())}}},v.prototype.NK=function(h,o,r,n,l,c){var p=l-1;for(l<=n&&(p=c),c=l=-1,n+=1;n<=p;n++){r.uc(2*n,o);var f=o.x,g=o.y;h.ic(h.ge(o,!1),o),o.x-=f,o.y-=g,(f=o.length())>this.yH&&f>c&&(l=n,c=f)}return l},v.prototype.re=function(){},v}();u.mL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 29},h.prototype.W=function(o,r,n,l){return o instanceof u.ba?(o=new u.$c(o),this.W(o,r,n,l).next()):new u.mL(o,r,n,l)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(u.Ge);u.zC=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 21},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l,c,p,f,g){return o instanceof u.ba?(g=new u.$c(o),this.W(g,r,n,[l],c,p,!1,f).next()):f===!0?(n=new u.BC(o,r,n,l,c,!1,!1,g),u.Ih.local().W(n,r,g)):new u.BC(o,r,n,l,c,!1,!1,g)},h.instance=null,h}(u.Ge);u.AC=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n,l,c,p,f){if(c)throw u.i.Fe();if(o==null)throw u.i.O();this.za=-1,this.Os=h,this.wg=o,this.Ae=r,this.Es=n,this.bo=l,this.ho=-1,this.Vb=f,this.oT=new u.l,this.oT.Pa()}return v.prototype.next=function(){for(var h;(h=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(h,this.Es[this.ho]);return null},v.prototype.Ma=function(){return this.za},v.prototype.VQ=function(h,o){return u.QK.buffer(h,this.wg,this.Ae,o,this.bo,this.Vb)},v.prototype.re=function(){},v}();u.BC=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 24},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n){if(r==null)throw u.i.O();if(o.B()||1>o.Eb())return 0;if(n==4)throw u.i.Fe();var l=u.cb.tc(r),c=u.cb.xv(l),p=u.cb.gv(l);c*=2-c;var f=l.Id().ci,g=o.K();if(g==1736||g==197)var b=o.ng();else u.ba.zd(g)?(b=new u.Ua(o.description)).pc(o,!0):b=o;if(l.Nb(r)==0){if(u.cb.Xc(r)){b=u.Jh.nj(b,r),g==1607&&b==o&&(b=u.ba.kg(o)),o=new u.Oc,u.cb.ih(r).en(o),g=0;for(var x=b.I();g<x;g++){var $=b.Oa(g);$.x=u.Jh.an($.x,o),b.Db(g,$)}}o=b.Ja(),b=u.Jh.RI(r,l,b,o)?o:u.cb.Bh(b,r,l)}return this.cQ(b,n,p,c,f)},h.prototype.cQ=function(o,r,n,l,c){var p=new u.ha(0),f=0;for(o=o.Ha();o.ab();)for(;o.Ia();){var g=o.ia(),b=g.bc();g=g.xc(),b.scale(c),g.scale(c),u.kb.xd(n,l,b.x,b.y,g.x,g.y,p,null,null,r),f+=p.u}return f},h.instance=null,h}(u.Ge);u.qL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l,c){return o instanceof u.ba?(o=new u.$c(o),this.W(o,r,n,l,c).next()):new u.oL(o,n,l,r,-1,-1,c)},h.instance=null,h}(u.Ge);u.nL=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n,l,c){if(0<c||r!=4&&0<l)throw u.i.Fe();if(o==null)throw u.i.O();this.za=-1,this.Os=h,this.wg=o,this.Ae=r,this.yT=n,this.xT=l}return v.prototype.next=function(){for(var h;(h=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(h);return null},v.prototype.Ma=function(){return this.za},v.prototype.Uy=function(h){return u.ej.Sr(h,this.wg,this.Ae,this.yT,this.xT,this.Vb)},v.prototype.re=function(){},v}();u.oL=k}(q||(q={})),function(u){(function(k){k[k.Unknown=0]="Unknown",k[k.Contains=1]="Contains",k[k.Within=2]="Within",k[k.Equals=3]="Equals",k[k.Disjoint=4]="Disjoint",k[k.Touches=8]="Touches",k[k.Crosses=16]="Crosses",k[k.Overlaps=32]="Overlaps",k[k.NoThisRelation=64]="NoThisRelation",k[k.Intersects=1073741824]="Intersects",k[k.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(u.YK||(u.YK={})),u.rL=function(){function k(){}return k.iW=function(v,h){var o=v.K(),r=h.K();if(u.ba.zj(o)){var n=v.Cb;if(n!=null&&(n=n.Hk)!=null){if(r==33){var l=h.D();n=n.Uo(l.x,l.y)}else l=new u.l,h.A(l),n=n.To(l);if(n==1)return 1;if(n==0)return 4}}if(u.ba.zj(r)&&(n=h.Cb)!=null&&(n=n.Hk)!=null){if(o==33?(v=v.D(),n=n.Uo(v.x,v.y)):(h=new u.l,v.A(h),n=n.To(h)),n==1)return 2;if(n==0)return 4}return 0},k}()}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.K=function(){return 15},h.prototype.W=function(o,r,n,l,c){return o instanceof u.ba?(o=new u.$c(o),r=new u.$c(r),this.W(o,r,n,l,c===void 0?-1:c).next()):c===void 0?new u.CC(o,r,n,l,-1):new u.CC(o,r,n,l,c)},h.prototype.yn=function(o,r,n){this.Ku(o)&&(r=u.ua.mj(r,o,!1),o.hj(n)||o.nu(r,n))},h.prototype.Ku=function(o){return u.Mx.uE(o)},h.instance=null,h}(u.Ge);u.Zj=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n,l){if(this.vs=o==null,this.za=-1,this.Sd=h,this.wg=r,this.Pe=o.next(),this.Fj=this.Pe.K(),this.Vb=n,this.Hi=l,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw u.i.O("bad dimension mask")}return v.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var h=this.Bw.next();if(h!=null)return h;this.Bw=null}for(;(h=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?h=this.Fa(h):(this.Bw=this.KS(h),h=this.Bw.next()),h;return null},v.prototype.Ma=function(){return this.za},v.prototype.Fa=function(h){var o=this.uK(h);if(o!=null)return o;o=u.ua.ov(this.Pe,h);var r=u.ua.Xd(this.wg,o,!0);o=new u.l,this.Pe.A(o);var n=new u.l;return h.A(n),o.X(2*r,2*r),o.Fa(n),o.X(100*r,100*r),r=u.Vd.clip(this.Pe,o,0,0),h=u.Vd.clip(h,o,0,0),u.Hg.Cv(h,r,this.wg,this.Vb)},v.prototype.KI=function(h,o,r){var n=0;if(1&o)r[0]==null&&(r[0]=new u.ee(h)),n++;else for(var l=0;l<r.length-1;l++)r[l]=r[l+1];if(2&o)r[n]==null&&(r[n]=new u.Ua(h)),n++;else for(l=n;l<r.length-1;l++)r[l]=r[l+1];if(4&o)r[n]==null&&(r[n]=new u.Ea(h)),n++;else for(l=n;l<r.length-1;l++)r[l]=r[l+1];if(n!=3){for(h=[],l=0;l<n;l++)h[l]=r[l];return new u.$c(h)}return new u.$c(r)},v.prototype.KS=function(h){var o=this.uK(h);if(o!=null){var r=[null,null,null];return r[o.Eb()]=o,this.KI(h.description,this.Hi,r)}o=u.ua.ov(this.Pe,h),r=u.ua.Xd(this.wg,o,!0),o=new u.l,this.Pe.A(o),o.X(2*r,2*r);var n=new u.l;return h.A(n),o.Fa(n),o.X(100*r,100*r),r=u.Vd.clip(this.Pe,o,0,0),o=u.Vd.clip(h,o,0,0),r=u.Hg.Kz(o,r,this.wg,this.Vb),this.KI(h.description,this.Hi,r)},v.prototype.uK=function(h){var o=u.ua.ov(h,this.Pe),r=u.ua.Xd(this.wg,o,!0);o=h.K();var n=h.B(),l=this.Pe.B();if(!(l=n||l)){l=new u.l,h.A(l);var c=new u.l;this.Pe.A(c),c.X(2*r,2*r),l=!l.isIntersecting(c)}if(!l)if((c=u.rL.iW(this.Pe,h))==4)l=!0;else{if(2&c)return this.Pe;if(1&c)return h}if(l)return(r=u.ba.uf(o))<(l=u.ba.uf(this.Fj))?v.CB(h,n):r>l||r==0&&o==550&&this.Fj==33?this.iJ():v.CB(h,n);if((this.Hi==-1||this.Hi==4)&&o==197&&this.Fj==197)return r=this.Pe,o=new u.l,h.A(o),n=new u.l,r.A(n),o.Fa(n),r=new u.Hh,h.copyTo(r),r.Zo(o),r;if(o==197&&u.ba.uf(this.Fj)==0||this.Fj==197&&u.ba.uf(o)==0)return n=o==197?h:this.Pe,h=o==197?this.Pe:h,o=new u.l,n.A(o),u.Vd.clip(h,o,r,0);if(u.ba.uf(o)==0&&0<u.ba.uf(this.Fj)||0<u.ba.uf(o)&&u.ba.uf(this.Fj)==0){if(r=u.ua.mj(this.wg,h,!1),o==550||o==33)return u.Hg.uG(h,this.Pe,r);if(this.Fj==550||this.Fj==33)return u.Hg.uG(this.Pe,h,r);throw u.i.Ra()}return this.Hi!=-1&&this.Hi!=2||o!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||o!=1736||this.Fj!=1607?null:this.rK(this.Pe,h):this.rK(h,this.Pe)},v.prototype.rK=function(h,o){var r=h,n=o,l=u.ua.mj(this.wg,o,!1),c=new u.l;n.A(c);var p=new u.l;r.A(p),p.X(2*l,2*l),c.Fa(p),c.X(10*l,10*l),r=h=u.Vd.clip(h,c,0,0),p=new u.ja(0);var f=-1,g=n.Cb;if(g!=null){var b=g.Hk;if(b!=null){f=0,p.Jb(r.I()+r.ea());for(var x=new u.l,$=r.Ha();$.ab();)for(;$.Ia();){$.ia().A(x);var E=b.To(x);E==1?p.add(1):E==0?p.add(0):(p.add(-1),f++)}}}if(5<o.I()&&(g=(n=o=u.Vd.clip(o,c,0,0)).Cb),0>f&&(f=r.sz()),c=r.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ha(),g!=null&&g.Gb!=null&&(c=g.Gb),c==null&&20<n.I()&&(c=u.ua.iE(n)),h=h.Ja(),n=null,g=r.Ha(),b=[0,0,0,0,0,0,0,0,0],x=new u.ce(0),$=new u.jg,E=-1;for(var O=0,C=0,N=0<p.size,D=-1;g.ab();){D=g.gb;var z=0;for(E=-1,O=0;g.Ia();){var R=N?u.P.truncate(p.get(C)):-1;C++;var G=g.ia();if(0>R){if(c!=null)for(n==null?n=c.qR(G,l):n.Wo(G,l),R=n.next();R!=-1;R=n.next()){f.Wb(c.ka(R)),R=f.ia();var H=G.Fa(R,null,b,null,l);for(R=0;R<H;R++)x.add(b[R])}else for(f.aj();f.ab();)for(;f.Ia();)for(R=f.ia(),H=G.Fa(R,null,b,null,l),R=0;R<H;R++)x.add(b[R]);if(0<x.size){x.Wd(0,x.size,function(ct,ht){return ct-ht});var B=0;x.add(1),H=-1,R=0;for(var tt=x.size;R<tt;R++){var X=x.get(R);if(X!=B){var rt=!1;if(B!=0||X!=1?(G.dh(B,X,$),B=$.get()):(B=G,rt=!0),2<=z){if(h.Fr(r,D,E,O,z==3),this.LD(o,B.bc(),l)!=1&&this.MD(o,B,l)!=1)return null;h.pc(B,!1),z=1,O=0}else switch(H=this.MD(o,B,l),H){case 1:rt?2>z?(E=g.xb()-r.Ca(D),O=1,z=z==0?3:2):O++:(h.pc(B,z==0),z=1);break;case 0:z=0,E=-1,O=0;break;default:return null}B=X}}}else{if(0>(R=this.LD(o,G.bc(),l)))return null;R==1?(2>z&&(E=g.xb()-r.Ca(D),z=z==0?3:2),O++):(E=-1,O=0)}x.clear(!1)}else R!=0&&R==1&&(z==0?(z=3,E=g.xb()-r.Ca(D)):z==1?(z=2,E=g.xb()-r.Ca(D)):O++)}2<=z&&(h.Fr(r,D,E,O,z==3),E=-1)}return h},v.prototype.LD=function(h,o,r){return u.Fg.ym(h,o,r)},v.prototype.MD=function(h,o,r){var n=o.bc();o=o.xc();var l=u.Fg.ym(h,n,r),c=u.Fg.ym(h,o,r);return l==1&&c==0||l==0&&c==1?-1:l==0||c==0?0:l==1||c==1?1:((l=new u.h).add(n,o),l.scale(.5),(h=u.Fg.ym(h,l,r))==0?0:h==1?1:-1)},v.CB=function(h,o){return o?h:h.Ja()},v.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},v.prototype.re=function(){},v}();u.CC=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 28},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l,c,p,f){return o instanceof u.ba?(o=new u.$c(o),this.W(o,r,n,l,c,p,f).next()):new u.sL(o,r,n,l,c,p,f)},h.instance=null,h}(u.Ge);u.DC=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n,l,c,p){this.za=-1,this.Sd=h,this.Oj=o,this.La=r,this.Mi=n,this.xA=l,this.pH=c,this.od=p}return v.prototype.next=function(){var h=this.Sd.next();return h!=null?(this.za=this.Sd.Ma(),this.eL(h)):null},v.prototype.Ma=function(){return this.za},v.prototype.eL=function(h){var o=0>=this.pH?u.ua.mj(this.Oj,h,!1):this.pH;return u.DK.W(h,this.La,this.Mi,this.xA,o,this.od)},v.prototype.re=function(){},v}();u.sL=k}(q||(q={})),function(u){var k;(k=u.IK||(u.IK={}))[k.clipToDomainOnly=1]="clipToDomainOnly",k[k.clipWithHorizon=2]="clipWithHorizon",k[k.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var v=function(h){function o(){return h!==null&&h.apply(this,arguments)||this}return pe(o,h),o.prototype.K=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.W=function(r,n,l){return r instanceof u.ba?(r=new u.$c(r),this.W(r,n,l).next()):new u.tL(r,n,l)},o.prototype.transform=function(r,n,l,c){return u.du.transform(r,n,l,c,!0)},o.prototype.St=function(r,n,l,c){return u.du.St(r,n,l,c)},o.instance=null,o}(u.Ge);u.Gx=v}(q||(q={})),function(u){var k=function(){function v(h,o,r){this.za=-1,this.Sd=h,this.HT=o,this.od=r}return v.prototype.next=function(){var h=this.Sd.next();return h!=null?(this.za=this.Sd.Ma(),u.du.Bh(h,this.HT,this.od)):null},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();u.tL=k}(q||(q={})),function(u){var k=function(){function h(){}return h.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},h.prototype.vQ=function(o,r,n){for(o.Wb(r,n);o.Ia();){var l=o.ia();if((l=l.Rb())!=0)return o.xb()}for(o.Wb(r,n);o.zz();)if((l=(l=o.ni()).Rb())!=0)return o.xb();return-1},h.prototype.wQ=function(o,r){for(o.Wb(r,-1);o.zz();)if(o.ni().Rb()!=0)return o.xb();return-1},h.prototype.uQ=function(o,r){for(o.Wb(r,-1),o.ia();o.Ia();)if(o.ia().Rb()!=0)return o.xb();return-1},h.prototype.tQ=function(o,r,n,l){if(this.zk=this.vQ(r,n,l),this.zk!=-1){r.Wb(this.zk,-1);var c=r.ia(),p=c.ic(c.ge(o,!1));if(n=u.h.zc(p,o),(l=new u.h).N(p),l.sub(c.bc()),(p=new u.h).N(o),p.sub(c.bc()),this.mq=0>l.yi(p),this.rh=this.uQ(r,this.zk),this.rh!=-1){r.Wb(this.rh,-1);var f=(c=r.ia()).ge(o,!1);f=c.ic(f);var g=u.h.zc(f,o);g>n?this.rh=-1:(l.N(f),l.sub(c.bc()),p.N(o),p.sub(c.bc()),this.ws=0>l.yi(p))}this.rh==-1&&(this.rh=this.wQ(r,this.zk),this.rh!=-1&&(r.Wb(this.rh,-1),f=(c=r.ia()).ge(o,!1),f=c.ic(f),(g=u.h.zc(f,o))>n?this.rh=-1:(l.N(f),l.sub(c.bc()),p.N(o),p.sub(c.bc()),this.ws=0>l.yi(p),o=this.zk,this.zk=this.rh,this.rh=o,o=this.mq,this.mq=this.ws,this.ws=o)))}},h.prototype.YN=function(o,r,n,l,c){return n=n.Ha(),this.tQ(o,n,l,c),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(n.Wb(this.zk,-1),o=n.ia().lg(),n.Wb(this.rh,-1),r=n.ia().lg(),0<=o.yi(r)):r},h}(),v=function(h){function o(){return h!==null&&h.apply(this,arguments)||this}return pe(o,h),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 3},o.prototype.iz=function(r,n,l){var c;if(c===void 0&&(c=!1),r.B())return new u.bm;n=n.D();var p=r,f=r.K();switch(f==197&&((p=new u.Ea).bd(r,!1),f=1736),f){case 33:return this.sI(p,n);case 550:return this.eI(p,n);case 1607:case 1736:return this.XT(p,n,l,c);default:throw u.i.ga("not implemented")}},o.prototype.jz=function(r,n){if(r.B())return new u.bm;n=n.D();var l=r,c=r.K();switch(c==197&&((l=new u.Ea).bd(r,!1),c=1736),c){case 33:return this.sI(l,n);case 550:case 1607:case 1736:return this.eI(l,n);default:throw u.i.ga("not implemented")}},o.prototype.kz=function(r,n,l,c){if(0>c)throw u.i.O();if(r.B())return[];n=n.D();var p=r,f=r.K();switch(f==197&&((p=new u.Ea).bd(r,!1),f=1736),f){case 33:return this.OU(p,n,l,c);case 550:case 1607:case 1736:return this.oU(p,n,l,c);default:throw u.i.ga("not implemented")}},o.prototype.XT=function(r,n,l,c){if(r.K()==1736&&l&&(l=new u.l,r.A(l),l=u.ua.Xd(null,l,!1),(c?u.jd.Zd(r,n,0):u.jd.Zd(r,n,l))!=0)){var p=new u.bm(n,0,0);return c&&p.RJ(!0),p}var f=r.Ha();p=new u.h;for(var g=l=-1,b=17976931348623157e292,x=0;f.ab();)for(;f.Ia();){var $=f.ia();$=$.ic($.ge(n,!1));var E=u.h.zc($,n);E<b?(x=1,p=$,l=f.xb(),g=f.gb,b=E):E==b&&x++}return p=new u.bm(p,l,Math.sqrt(b)),c&&(f.Wb(l,g),$=f.ia(),c=0>u.h.Wq(n,$.bc(),$.xc()),1<x&&((x=new k).reset(),c=x.YN(n,c,r,l,g)),p.RJ(c)),p},o.prototype.sI=function(r,n){return r=r.D(),n=u.h.ub(r,n),new u.bm(r,0,n)},o.prototype.eI=function(r,n){for(var l=r.vb(0),c=r.I(),p=r=0,f=0,g=17976931348623157e292,b=0;b<c;b++){var x=new u.h;l.uc(2*b,x);var $=u.h.zc(x,n);$<g&&(p=x.x,f=x.y,r=b,g=$)}return(n=new u.bm).by(p,f,r,Math.sqrt(g)),n},o.prototype.OU=function(r,n,l,c){return c==0?[]:(l*=l,r=r.D(),(n=u.h.zc(r,n))<=l?(l=[],(c=new u.bm).by(r.x,r.y,0,Math.sqrt(n)),l[0]=c):l=[],l)},o.prototype.oU=function(r,n,l,c){if(c==0)return[];var p=r.vb(0),f=r.I();r=[],l*=l;for(var g=0;g<f;g++){var b=p.read(2*g),x=p.read(2*g+1),$=n.x-b,E=n.y-x;($=$*$+E*E)<=l&&((E=new u.bm).by(b,x,g,Math.sqrt($)),r.push(E))}return n=r.length,r.sort(function(O,C){return O.La<C.La?-1:O.La==C.La?0:1}),c>=n||(r.length=c),r.slice(0)},o.instance=null,o}(u.Ge);u.Hx=v}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 4},h.prototype.W=function(o,r,n,l,c){return u.cm.tB(o,r,n,l,c)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Ku=function(o){return u.Xt.ry(o)},h.prototype.yn=function(o,r,n){u.Xt.xD(o,r,n)},h.instance=null,h}(u.Ge);u.uL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 33},h.prototype.W=function(o,r,n,l,c){return o===1073741824?!u.vd.uB(r,n,l,4,c):u.vd.uB(r,n,l,o,c)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Ku=function(o){return u.Xt.ry(o)},h.prototype.yn=function(o,r,n){u.Xt.xD(o,r,n)},h.instance=null,h}(u.Ge);u.fj=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n){if(this.od=n,this.lT=r,this.za=-1,h==null)throw u.i.O();this.Ak=h,this.Oj=o}return v.prototype.next=function(){var h;if((h=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw u.i.hu("user_canceled");return this.$B(h)}return null},v.prototype.Ma=function(){return this.za},v.prototype.$B=function(h){if(h==null)throw u.i.O();return u.Ix.YJ(h,this.Oj,this.lT,this.od)},v.prototype.re=function(){},v}();u.vL=k}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 26},h.prototype.W=function(o,r,n,l){return o instanceof u.ba?(o=new u.$c(o),this.W(o,r,n,l).next()):new u.vL(o,r,n,l)},h.prototype.ts=function(o,r,n,l,c){return 0<(l!==void 0?u.Ix.ts(o,r,n,l,c):u.Ix.ts(o,r,!1,null,n))},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(u.Ge);u.$l=k}(q||(q={})),function(u){var k=function(){function c(){this.Aq=0}return c.prototype.iX=function(p){this.Aq&=-2,this.Aq|=p?1:0},c.prototype.Yp=function(){return(1&this.Aq)!=0},c.prototype.SF=function(){return this.Yp()?0:1},c}();u.tY=k;var v=function(){},h=function(c,p,f,g){this.x=c,this.y=p,this.Ci=f,this.zm=g},o=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,g){return p=p.ka(g),f=this.Ce.lf.read(2*f),0>(f-=p=this.Ce.lf.read(2*p))?-1:0<f?1:0},c}(),r=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,g){f=this.Ce.hb[f],p=this.Ce.hb[p.ka(g)];var b=f.Yp(),x=p.Yp();g=f.oe.Me(this.Ce.Oo,0);var $=p.oe.Me(this.Ce.Oo,0);return g==$&&((b=.5*((g=Math.min(b?f.oe.oa:f.oe.ma,x?p.oe.oa:p.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(b=g),g=f.oe.Me(b,0),$=p.oe.Me(b,0)),g<$?-1:g>$?1:0},c}(),n=function(){function c(p,f){this.TI=new u.h,this.parent=p,this.ZR=f}return c.prototype.qr=function(p,f,g){var b=this.parent,x=this.ZR;g.Wd(p,f,function($,E){return b.Oh($,E,x)})},c.prototype.bq=function(p){return p=this.parent.ii.get(p),this.parent.lf.uc(2*(p>>1),this.TI),this.TI.y+(1&p?this.parent.Qj:-this.parent.Qj)},c}(),l=function(){function c(p,f,g,b,x){this.iH=p.description,this.Y=p,this.Sg=f,this.Qj=u.ua.mj(this.Sg,p,!1),this.Do=u.ua.mj(this.Sg,p,!0),this.sA=g,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new u.lp,this.fb=new u.$j,this.le=new u.Nd,this.UG=this.sl=x}return c.prototype.$S=function(){return this.UG=!0,(!u.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?u.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},c.prototype.fC=function(p,f){var g=this.lf.read(2*p);p=this.lf.read(2*p+1);var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=!u.$t.Ev(g,p,b,f,this.Qj*this.Qj);return x||this.Y.Eb()!=0&&g==b&&p==f},c.prototype.BE=function(){for(var p=this.Y,f=p.yf?3:2,g=0,b=p.ea();g<b;g++)if(p.Ka(g)<f)return this.le=new u.Nd(1,g,0),!1;return!0},c.prototype.yE=function(p){var f=this.Y,g=f.Ha(),b=f.hasAttribute(1);for(f=b?u.ua.rE(this.Sg,f,!1):0;g.ab();)for(;g.Ia();){var x=g.ia();if(!(x.Rb()>this.Qj)){if(p&&b){var $=x.yv(1,0);if(x=x.yv(1,0),Math.abs(x-$)>f)continue}return this.le=new u.Nd(2,g.xb(),-1),!1}}return!0},c.prototype.hO=function(){var p=this.Y,f=null;u.ba.Ic(this.Y.K())&&(f=this.Y);var g=(this.UG||this.sl)&&f!=null,b=p.I();this.lf=p.vb(0),this.ii=new u.ja(0),this.ii.Jb(2*b),this.hi=new u.ja(0),this.hi.Jb(2*b),g&&(this.Hl==null&&(this.Hl=new u.ja(0)),this.Hl.Jb(b));for(var x=p=0;x<b;x++)if(this.ii.add(2*x),this.ii.add(2*x+1),this.hi.add(2*x),this.hi.add(2*x+1),g){for(;x>=f.Wc(p);)p++;this.Hl.add(p)}for(new u.Zt().sort(this.hi,0,2*b,new n(this,g)),this.fb.clear(),this.fb.Xo(new o(this)),this.fb.Ee(b),f=0,b*=2;f<b;f++)if(g=this.hi.get(f),g=(p=this.ii.get(g))>>1,(1&p)==0){if(p=this.fb.addElement(g,-1),(x=this.fb.xe(p))!=-1&&!this.fC(this.fb.ka(x),g))return this.le=new u.Nd(3,g,this.fb.ka(x)),!1;var $=this.fb.lb(p);if($!=-1&&!this.fC(this.fb.ka($),g))return this.le=new u.Nd(3,g,this.fb.ka($)),!1}else if(p=this.fb.search(g,-1),x=this.fb.xe(p),$=this.fb.lb(p),this.fb.wd(p,-1),x!=-1&&$!=-1&&!this.fC(this.fb.ka(x),this.fb.ka($)))return this.le=new u.Nd(3,this.fb.ka(x),this.fb.ka($)),!1;return!0},c.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},c.prototype.jO=function(){var p=new u.hd;p.Ib(this.Y);var f=new u.Nd;return!u.bu.fI(!1,p,this.Qj,f,this.od)||(f.Lo=p.Va(f.Lo),f.Mo=p.Va(f.Mo),this.le.Yt(f),!1)},c.prototype.iO=function(){var p=this.Y,f=p.Ha();for(p=p.Ha();f.ab();)for(;f.Ia();){var g=f.ia();if(!f.Sn()||!f.VS()){p.wW(f);do for(;p.Ia();){var b=p.ia();if((b=g.Br(b,this.Qj,!0))!=0)return this.le=new u.Nd(b==2?5:4,f.xb(),p.xb()),!1}while(p.ab())}}return!0},c.prototype.nO=function(){var p=this.Y;this.hb.length=0,this.ro.length=0,this.ag=p.Ha(),this.ag.EB();var f=new u.ja(0);f.Jb(10);var g=NaN,b=0,x=0;for(p=2*p.I();x<p;x++){var $=this.hi.get(x);if(!(1&($=this.ii.get($)))){$>>=1;var E=this.lf.read(2*$),O=this.lf.read(2*$+1);if(f.size!=0&&(E!=g||O!=b)){if(!this.LI(f))return!1;f!=null&&f.clear(!1)}f.add($),g=E,b=O}}return!!this.LI(f)},c.prototype.mO=function(){for(var p=this.Y,f=Array(p.ea()),g=0,b=p.ea();g<b;g++)f[g]=p.Pn(g);b=new v;var x=new u.h;g=this.hi.get(0);var $=(g=this.ii.get(g))>>1;this.lf.uc(2*$,x);var E=f[g=this.Hl.get($)],O=p.Ca(g),C=p.Wc(g)-1;b.gl=$==O||$==C,b.jy=this.sl?!E&&b.gl:b.gl,b.Ci=g,b.x=x.x,b.y=x.y,b.zm=$;for(var N=new v,D=1,z=this.hi.size;D<z;D++)if(g=this.hi.get(D),(1&(g=this.ii.get(g)))==0){$=g>>1,this.lf.uc(2*$,x),(g=this.Hl.get($))!=b.Ci&&(E=f[g],O=p.Ca(g),C=p.Wc(g)-1);var R=$==O||$==C,G=this.sl?!E&&b.gl:b.gl;if(N.x=x.x,N.y=x.y,N.Ci=g,N.zm=$,N.jy=G,N.gl=R,N.x==b.x&&N.y==b.y){if(this.sl){if(!(N.jy&&b.jy||N.Ci==b.Ci&&(N.gl||b.gl)))return this.le=new u.Nd(8,N.zm,b.zm),!1}else if(!N.gl||!b.gl)return this.le=new u.Nd(5,N.zm,b.zm),!1}g=b,b=N,N=g}return!0},c.prototype.EE=function(){for(var p=this.Y,f=[],g=-1,b=!1,x=0,$=p.ea();x<$;x++)p.Gv(x)&&(b=!1,g++,x<$-1&&(p.Gv(x+1)||(b=!0))),f[x]=b?g:-1;b=new u.h,x=this.hi.get(0);var E=(x=this.ii.get(x))>>1;this.lf.uc(2*E,b),x=this.Hl.get(E),g=new h(b.x,b.y,x,E,f[x]),p=[];var O=1;for($=this.hi.size;O<$;O++)if(x=this.hi.get(O),(1&(x=this.ii.get(x)))==0){if(E=x>>1,this.lf.uc(2*E,b),x=this.Hl.get(E),(x=new h(b.x,b.y,x,E,f[x])).x==g.x&&x.y==g.y){if(x.Ci==g.Ci)return this.le=new u.Nd(9,x.zm,g.zm),!1;0<=f[x.Ci]&&f[x.Ci]==f[g.Ci]&&(p.length!=0&&p[p.length-1]==g||p.push(g),p.push(x))}g=x}if(p.length==0)return!0;for(x=new u.lp(!0),u.P.bv(f,-1),b=-1,(O=new u.h).Sc(),g=0,$=p.length;g<$;g++){(E=p[g]).x==O.x&&E.y==O.y||(b=x.Rh(0),O.x=E.x,O.y=E.y);var C=f[E.Ci];C==-1&&(C=x.Rh(2),f[E.Ci]=C),x.addElement(C,b),x.addElement(b,C)}for(($=new u.ja(0)).Jb(10),g=x.ke;g!=-1;g=x.lz(g))if(!(1&(p=x.KF(g)))&&2&p){for(p=-1,$.add(g),$.add(-1);0<$.size;){if(b=$.Gc(),$.Jf(),O=$.Gc(),$.Jf(),(1&(E=x.KF(O)))!=0){p=2&E?O:b;break}for(x.aX(O,1|E),E=x.sc(O);E!=-1;E=x.lb(E))(C=x.getData(E))!=b&&($.add(C),$.add(O))}if(p!=-1){for(x=-1,g=0,$=f.length;g<$;g++)if(f[g]==p){x=g;break}return this.le=new u.Nd(10,x,-1),!1}}return!0},c.prototype.oO=function(){var p=this.Y;if(0>=p.He())return this.le=new u.Nd(6,p.ea()==1?1:-1,-1),0;if(p.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=u.ja.rf(p.ea(),0),this.EA=u.ja.rf(p.ea(),-1);for(var f=-1,g=0,b=0,x=p.ea();b<x;b++){var $=p.Kr(b);if(this.vo.write(b,0>$?0:256),0<$)f=b,g=$;else{if($==0)return this.le=new u.Nd(6,b,-1),0;if((0>f||g<Math.abs($))&&(this.le=new u.Nd(7,b,-1),this.sl))return 0;this.EA.write(b,f)}}for(this.et=p.ea(),this.Qm=new u.ja(0),this.Qm.Jb(10),x=p.I(),this.Oo=NaN,(p=new u.ja(0)).Jb(10),this.Sq=u.ja.rf(x,-1),this.Jw=u.ja.rf(x,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new u.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new r(this)),f=0,x*=2;0<this.et&&f<x;f++)if(g=this.hi.get(f),(1&(g=this.ii.get(g)))==0){if(g>>=1,(b=this.lf.read(2*g+1))!=this.Oo&&p.size!=0){if(!this.vt(p))return 0;p!=null&&p.clear(!1)}p.add(g),this.Oo=b}return 0<this.et&&!this.vt(p)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},c.prototype.LI=function(p){if(p.size==1)return!0;for(var f=0,g=p.size;f<g;f++){var b=p.get(f);this.ag.Wb(b);var x=this.ag.ni();this.hb.push(this.Uu(x,b,this.ag.gb,!0)),this.ag.ia(),x=this.ag.ia(),this.hb.push(this.Uu(x,b,this.ag.gb,!1))}var $=this;for(this.hb.sort(function(C,N){return $.SP(C,N)}),(b=this.oh.ke)==-1&&(b=this.oh.Rh(0)),this.oh.hn(this.hb.length),f=0,g=this.hb.length;f<g;f++)this.oh.addElement(b,f);f=!0;for(var E=g=-1;f&&(f=!1,(x=this.oh.sc(b))!=-1);)for(var O=this.oh.lb(x);O!=-1;)if(g=this.oh.getData(x),E=this.oh.getData(O),(g=this.hb[g].Ko)!=(E=this.hb[E].Ko))x=O,O=this.oh.lb(x);else if(f=!0,this.oh.kd(b,x),x=this.oh.xe(O),(O=this.oh.kd(b,O))==-1||x==-1)break;if(f=this.oh.ds(b),this.oh.GE(b),0<f)return this.le=new u.Nd(5,g,E),!1;for(f=0,g=p.size;f<g;f++)this.qB(this.hb[f]);return this.hb.length=0,!0},c.prototype.vt=function(p){for(var f=0,g=p.size;f<g;f++){var b=p.get(f),x=this.Sq.read(b);if(x!=-1){var $=this.fb.ka(x);this.Bj.add($),this.fb.wd(x,-1),this.qB(this.hb[$]),this.hb[$]=null,this.Sq.write(b,-1)}(x=this.Jw.read(b))!=-1&&($=this.fb.ka(x),this.Bj.add($),this.fb.wd(x,-1),this.qB(this.hb[$]),this.hb[$]=null,this.Jw.write(b,-1))}for(f=0,g=p.size;f<g;f++){if(b=p.get(f),this.ag.Wb(b),(x=this.ag.ni()).oa>x.ma){var E=this.ag.xb(),O=this.Uu(x,b,this.ag.gb,!0);0<this.Bj.size?($=this.Bj.Gc(),this.Bj.Jf(),this.hb[$]=O):($=this.hb.length,this.hb.push(O)),x=this.fb.addElement($,-1),this.Sq.read(E)==-1?this.Sq.write(E,x):this.Jw.write(E,x),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(x)}this.ag.ia(),(x=this.ag.ia()).oa<x.ma&&(E=this.ag.kk(),O=this.Uu(x,b,this.ag.gb,!1),0<this.Bj.size?($=this.Bj.Gc(),this.Bj.Jf(),this.hb[$]=O):($=this.hb.length,this.hb.push(O)),x=this.fb.addElement($,-1),this.Sq.read(E)==-1?this.Sq.write(E,x):this.Jw.write(E,x),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(x))}for(f=0,g=this.Qm.size;f<g&&0<this.et;f++)if(x=this.Qm.get(f),(3&this.vo.read(this.hb[this.fb.ka(x)].DA))==0){p=-1,b=this.fb.xe(x);var C=x;O=null,$=-1;for(var N=0;b!=-1&&($=this.fb.ka(b),$=(O=this.hb[$]).DA,(3&(N=this.vo.read($)))==0);)C=b,b=this.fb.xe(b);b==-1?(E=1,b=C):(p=(3&N)==1?$:this.EA.read($),E=O.SF()!=0?0:1,b=this.fb.lb(b));do{if($=this.fb.ka(b),$=(O=this.hb[$]).DA,(3&(C=this.vo.read($)))==0){if(E!=O.SF())return this.le=new u.Nd(6,$,-1),!1;if(C=252&C|(N=E==0||O.Yp()?2:1),this.vo.write($,N),N==2&&this.le.Lj==0&&this.EA.read($)!=p&&(this.le=new u.Nd(7,$,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&C)==1&&(p=$),C=b,b=this.fb.lb(b),E=E!=0?0:1}while(C!=x)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new u.ja(0),!0},c.prototype.Uu=function(p,f,g,b){if(p.K()!=322)throw u.i.Ra();return(p=this.nP(p)).Ko=f,p.DA=g,p.Aq=0,p.iX(b),p},c.prototype.nP=function(p){if(0<this.ro.length){var f=this.ro[this.ro.length-1];--this.ro.length,p.copyTo(f.oe)}else(f=new k).oe=u.NC.kg(p);return f},c.prototype.qB=function(p){p.oe.K()==322&&this.ro.push(p)},c.prototype.fU=function(){for(var p=this.Y.I(),f=new u.ja(0),g=0;g<p;g++)f.add(g);var b=this;for(f.Wd(0,p,function(x,$){return b.Qu(x,$)}),g=1;g<p;g++)if(this.Qu(f.get(g-1),f.get(g))==0)return this.le=new u.Nd(3,f.get(g-1),f.get(g)),0;return 2},c.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},c.prototype.jV=function(){return this.$S()},c.prototype.kU=function(){for(var p=this.Y.I(),f=new u.ja(0),g=0;g<p;g++)f.add(g);var b=this;f.Wd(0,p,function(C,N){return b.KO(C,N)});var x=Array(p);for(u.P.bv(x,!1),x[f.get(0)]=!0,g=1;g<p;g++){var $=f.get(g-1),E=f.get(g);this.Qu($,E)==0?x[E]=!1:x[E]=!0}f=this.Y.Ja(),$=this.Y,E=0;var O=1;for(g=0;g<p;g++)x[g]?O=g+1:(E<O&&f.Gd($,E,O),E=g+1);return E<O&&f.Gd($,E,O),f.Eh(2,this.Do),f},c.prototype.IV=function(){var p=this.Y,f=p.Ha(),g=p.Ha(),b=this.Y.Ja(),x=this.Y,$=p.hasAttribute(1),E=$?u.ua.rE(this.Sg,p,!0):0,O=new u.ja(0),C=new u.ja(0);for(O.Jb(u.P.truncate(p.I()/2+1)),C.Jb(u.P.truncate(p.I()/2+1));f.ab();)if(g.ab(),!(2>p.Ka(f.gb))){g.yW();for(var N,D,z=!0;f.Ia();){var R=f.ia(),G=g.ni();if(f.xb()>g.xb())break;z&&(O.add(f.xb()),C.add(g.kk()),z=!1),D=O.Gc();var H=f.kk();if(1<H-D){var B=new u.h;B.vc(p.Oa(D),p.Oa(H)),N=B.length()}else N=R.Rb();D=C.Gc(),1<(H=g.xb())-D?((B=new u.h).vc(p.Oa(D),p.Oa(H)),D=B.length()):D=G.Rb(),N>this.Do?O.add(f.kk()):$&&(N=p.Vc(1,O.Gc(),0),R=R.jv(1,0),Math.abs(R-N)>E&&O.add(f.kk())),D>this.Do?C.add(g.xb()):$&&(N=p.Vc(1,C.Gc(),0),R=G.jv(1,0),Math.abs(R-N)>E&&C.add(g.xb()))}if(O.Gc()<C.Gc()?O.size>C.size?O.Jf():C.Jf():(O.Gc()!=C.Gc()&&C.Jf(),C.Jf()),2<=C.size+O.size){for(z=new u.Ta,G=0,R=O.size;G<R;G++)x.we(O.get(G),z),G==0?b.nf(z):b.lineTo(z);for(G=C.size-1;0<G;G--)x.we(C.get(G),z),b.lineTo(z);x.ec(f.gb)?b.Cp():0<C.size&&(x.we(C.get(0),z),b.lineTo(z))}O!=null&&O.clear(!1),C!=null&&C.clear(!1)}return b.Eh(2,this.Do),b},c.prototype.mV=function(){return this.zX()},c.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?u.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new u.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&u.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&u.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},c.ts=function(p,f,g,b,x){if(b!=null&&(b.Lj=0,b.Lo=-1,b.Mo=-1),p.B())return 1;var $=p.K();if($==33)return 1;var E=u.ua.mj(f,p,!1);if($==197)return f=new u.l,p.A(f),f.Di(E)?(b!=null&&(b.Lj=2,b.Lo=-1,b.Mo=-1),0):1;if(u.ba.zd($))return(E=new u.Ua(p.description)).pc(p,!0),c.ts(E,f,g,b,x);var O=p.qm(E);if((g=g?-1:O)!=-1)return g;if(f=new c(p,f,g,x,!1),$==550)g=f.fU();else if($==1607)g=f.EV();else{if($!=1736)throw u.i.Ra();g=f.jV()}return p.Eh(g,E),b!=null&&g==0&&b.Yt(f.le),g},c.YJ=function(p,f,g,b){if(p.B())return p;var x=p.K();if(x==33)return p;var $=u.ua.mj(f,p,!1);if(x==197)return f=new u.l,p.A(f),f.Di($)?p.Ja():p;if(u.ba.zd(x))return(x=new u.Ua(p.description)).pc(p,!0),c.YJ(x,f,g,b);if($=p.qm($),(g=g?-1:$)==2)return p;if(p=new c(p,f,g,b,!1),x==550)p=p.kU();else if(x==1607)p=p.IV();else{if(x!=1736)throw u.i.Ra();p=p.mV()}return p},c.prototype.Oh=function(p,f,g){if(p==f)return 0;p=this.ii.get(p);var b=this.ii.get(f);f=p>>1;var x=b>>1,$=new u.h,E=new u.h;return this.lf.uc(2*f,$),$.y+=1&p?this.Qj:-this.Qj,this.lf.uc(2*x,E),E.y+=1&b?this.Qj:-this.Qj,(p=$.compare(E))==0&&g?0>(g=this.Hl.get(f)-this.Hl.get(x))?-1:0<g?1:0:p},c.prototype.Qu=function(p,f){if(p==f)return 0;var g=this.Y,b=g.Oa(p),x=g.Oa(f);if(b.x<x.x)return-1;if(b.x>x.x)return 1;if(b.y<x.y)return-1;if(b.y>x.y)return 1;for(b=1;b<this.jT;b++){x=this.iH.ld(b);for(var $=u.sa.Wa(x),E=0;E<$;E++){var O=g.Vc(x,p,E),C=g.Vc(x,f,E);if(O<C)return-1;if(O>C)return 1}}return 0},c.prototype.KO=function(p,f){var g=this.Qu(p,f);return g==0?p<f?-1:1:g},c.prototype.SP=function(p,f){if(p===f)return 0;var g=p.oe.lg();p.Yp()&&g.Uq(),p=f.oe.lg(),f.Yp()&&p.Uq(),f=g.su();var b=p.su();return b==f?(f=g.yi(p),Math.abs(f)<=8881784197001252e-31*(Math.abs(p.x*g.y)+Math.abs(p.y*g.x))&&(f--,f++),0>f?1:0<f?-1:0):f<b?-1:1},c}();u.Ix=l}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 30},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(o,r,n,l){return o instanceof u.ba?(o=new u.$c(o),r=new u.$c(r),this.W(o,r,n,l).next()):new u.wL(o,r,n,l)},h.gp=function(o,r,n,l){var c=o.Eb(),p=r.Eb();if(o.B()&&r.B())return c>p?o:r;if(o.B())return r;if(r.B())return o;var f=new u.l,g=new u.l,b=new u.l;return o.A(f),r.A(g),b.L(f),b.$b(g),f=u.ua.Xd(n,b,!0),g=o.K(),b=r.K(),g==33&&b==33?h.WU(o,r,f):g!=b?0<c||0<p?c>p?o:r:g==550?h.dI(o,r,f):h.dI(r,o,f):u.Hg.gp(o,r,n,l)},h.WU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D(),c=r.D(),p=new u.ee(o.description);return u.h.zc(l,c)>n&&(p.add(o),p.add(r)),p},h.dI=function(o,r,n){var l=o.vb(0),c=o.I(),p=r.D(),f=o.Ja();n=n*Math.sqrt(2)*1.00001;var g=new u.l;if(o.A(g),g.X(n,n),g.contains(p)){n*=n,g=!1;for(var b=[],x=0;x<c;x++)b[x]=!1;for(x=0;x<c;x++){var $=l.read(2*x),E=l.read(2*x+1);($-=p.x)*$+(E-=p.y)*E<=n&&(g=!0,b[x]=!0)}if(g)for(x=0;x<c;x++)b[x]||f.Gd(o,x,x+1);else f.Gd(o,0,c),f.add(r)}else f.Gd(o,0,c),f.add(r);return f},h.instance=null,h}(u.Ge);u.Jx=k}(q||(q={})),function(u){var k=function(){function v(h,o,r,n){this.vs=o==null,this.za=-1,this.Sd=h,this.wg=r,this.IT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.vs?null:(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),u.Jx.gp(h,this.IT,this.wg,this.Vb)):null;var h},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();u.wL=k}(q||(q={})),function(u){var k=function(){function o(){}return o.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},o}(),v=function(){function o(){this.Ir=0,this.rj=[]}return o.prototype.kN=function(r){this.Ir+=r.zx,this.rj.push(r)},o.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},o.prototype.iy=function(){return this.rj[this.rj.length-1]},o.prototype.Nb=function(r){return r===this},o}(),h=function(){function o(r,n,l){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=r,this.wg=n,this.Vb=l}return o.ZD=function(r){var n=[],l=0;for(r=Object.keys(r);l<r.length;l++)n.push(Number(r[l]));return n.sort(function(c,p){return c-p}),n},o.prototype.aG=function(r){var n=this.Fo[r],l=o.ZD(n)[0],c=n[l],p=c.iy().Vy;return c=c.iy().vK,delete n[l],c&&(p=u.$l.local().W(p,this.wg,!1,this.Vb),r==0&&p.K()==33&&(r=new u.ee(p.description),p.B()||r.add(p),p=r)),p},o.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw u.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},o.prototype.Ma=function(){return this.za},o.prototype.lK=function(){if(this.Jc)return!0;var r=null;if(this.Sd!=null&&(r=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),u.op.Bp(this.Vb),r!=null){var n=r.Eb();this.vH[n]=!0,n>=this.Bk&&!this.eA&&(this.HD(n,!1,r),n>this.Bk&&!this.eA&&this.uW(n))}if(0<this.kq)for(n=0;n<=this.Bk;n++)for(;1<this.wq[n]&&(r=this.AO(n)).length!=0;)r=u.Hg.QP(r,this.wg,this.Vb),this.HD(n,!0,r);return this.Jc},o.prototype.AO=function(r){for(var n=[],l=[],c=this.Fo[r],p=o.ZD(c),f=0;f<p.length;f++){var g=p[f],b=c[g];if(this.Jc||1e4<b.Ir&&1<b.rj.length){for(this.wq[r]-=b.rj.length,this.kq-=b.rj.length;0<b.rj.length;)n.push(b.iy().Vy),b.OV();l.push(g)}}for(f=0;f<l.length;f++)delete c[l[f]];return n},o.prototype.uW=function(r){for(var n=0;n<r;n++)this.Fo[n]=[],this.kq-=this.wq[n],this.wq[n]=0},o.prototype.HD=function(r,n,l){var c=new k;if(c.Az(),c.Vy=l,l=o.$R(l),c.zx=l,l=o.YR(l),r+1>this.Fo.length)for(var p=0,f=Math.max(2,r+1);p<f;p++)this.Fo.push([]);(p=this.Fo[r][l])===void 0&&(p=new v,this.Fo[r][l]=p),c.vK=n,p.kN(c),this.wq[r]++,this.kq++,this.Bk=Math.max(this.Bk,r)},o.YR=function(r){return 0<r?u.P.truncate(Math.log(r)/Math.log(4)+.5):0},o.$R=function(r){var n=r.K();if(u.ba.zj(n))return r.I();if(n==33)return 1;if(n==197)return 4;if(u.ba.zd(n))return 2;throw u.i.Ra()},o.prototype.re=function(){this.lK()},o}();u.yL=h}(q||(q={})),function(u){var k=function(v){function h(){return v!==null&&v.apply(this,arguments)||this}return pe(h,v),h.prototype.K=function(){return 1},h.prototype.W=function(o,r,n,l){return l===void 0?new u.yL(o,r,n):this.bQ(o,r,n,l)},h.prototype.bQ=function(o,r,n,l){return o=new u.$c([o,r]),this.W(o,n,l).next()},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(u.Ge);u.Ih=k}(q||(q={})),function(u){var k,v;(v=k||(k={}))[v.nextPath=0]="nextPath",v[v.nextSegment=1]="nextSegment",v[v.iterate=2]="iterate",k=function(){function h(o,r,n,l){this.Vs=new u.l,this.BT=o,this.CT=r,this.oq=l,this.wo=-1,this.tl=!1;var c=o.Cb;c!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,l?this.wo=r.ea():this.td=r.Ha()),this.tl||(c=r.Cb)!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,l?this.wo=o.ea():this.td=o.Ha()),this.tl||(this.ei=l?u.ua.hR(o,r,n,1<=o.qm(0),1<=r.qm(0)):u.ua.gR(o,r,n))}return h.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var o=!0;o;)switch(this.Yb){case 0:o=this.sU();break;case 1:o=this.tU();break;case 2:o=this.Pz();break;default:throw u.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},h.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},h.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},h.prototype.oz=function(){if(!this.oq)throw u.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},h.prototype.Wy=function(){if(!this.oq)throw u.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},h.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},h.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var o=this.td.ia();return this.zw.Wo(o,this.ra),this.Yb=2,!0},h.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},h}(),u.am=k}(q||(q={})),function(u){(u=u.JL||(u.JL={}))[u.enumClosed=1]="enumClosed",u[u.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",u[u.enumOGCStartPolygon=4]="enumOGCStartPolygon",u[u.enumCalcMask=4]="enumCalcMask"}(q||(q={})),function(u){u.LC=function(){function k(){}return k.ub=function(v,h,o,r,n,l,c,p,f){var g=[0,0,0],b=[0,0,0],x=[0,0,0],$=[0,0,0,0],E=new u.ha(0),O=new u.ha(0),C=new u.ha(0);if(c!=null||p!=null||f!=null)if(u.s.vi(h))u.$g.ub(v,o,r,n,l,c,p,f);else{n=u.F.ca(n),o=u.F.ca(o);var N=u.F.ca(n-o);if(u.s.$(r,l)&&(u.s.$(o,n)||u.s.$(u.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(u.s.$(r,-l)){if(u.s.$(u.s.R(r),1.570796326794897))return c!=null&&(c.u=2*u.F.Ch(v,h)),p!=null&&(p.u=0<r?u.F.ca(3.141592653589793-u.F.ca(n)):u.F.ca(n)),void(f!=null&&(f.u=0<r?u.F.ca(n):u.F.ca(3.141592653589793-u.F.ca(n))));u.s.$(u.s.R(N),3.141592653589793)&&(c!=null&&(c.u=2*u.F.Ch(v,h)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(u.s.$(u.s.R(r),1.570796326794897)||u.s.$(u.s.R(l),1.570796326794897)||u.s.$(o,n)||u.s.$(u.s.R(N),3.141592653589793)||u.s.Dd(r))return void u.Yk.ub(v,h,o,r,n,l,c,p,f);var D=Math.sqrt(1-h);n=u.F.ca(n-o),o=0,u.F.el(1,h,r,o,0,E,O,C),g[0]=E.u,g[1]=O.u,g[2]=C.u,u.F.el(1,h,l,n,0,E,O,C),b[0]=E.u,b[1]=O.u,b[2]=C.u,x[0]=0,x[1]=0,x[2]=-1*h*u.F.n(1,h,r)*Math.sin(r),0>n?u.F.Yq(x,b,g,$,0):u.F.Yq(x,g,b,$,0),O=[0,0,0],C=[0,0,0];var z=[0,0,0];g=[0,0,0],E=[0,0,0];var R=Math.acos($[2]/1),G=1-h,H=Math.tan(R),B=1+H*H/G,tt=2*x[2]*H/G;for(G=(-tt+(H=Math.sqrt(tt*tt-4*B*(x[2]*x[2]/G-1))))/(B*=2),tt=(-tt-H)/B,H=Math.tan(R),R=(G+tt)/2,x=((B=H*G+x[2])+(H*tt+x[2]))/2,H=u.F.ip(G-R,B-x),G=x/D*1.570796326794897,tt=0;100>tt&&(B=(B=u.F.w(h,G))*B/Math.cos(G)*(Math.sin(G)-x*B/(1-h)),!u.s.Dd(B));tt++)G-=B;x=u.F.n(1,h,G)*Math.cos(G),H=1-H/(x=Math.sqrt((x-R)*(x+R))),H*=2-H,B=u.F.qn(O),R=u.F.qn(C),G=u.F.qn(z);var X=u.F.Ut(z,O);tt=u.F.Ut(z,C),u.F.yx(z,O,g),u.F.yx(z,C,E),O=Math.acos(X/(G*B)),C=Math.acos(tt/(G*R)),C*=u.s.Mb(1,u.F.Ut(g,E)),(1.570796326794897<=u.s.R(O)&&1.570796326794897<=u.s.R(C)||3.141592653589793<u.s.R(O-C))&&(O=(3.141592653589793-u.s.R(O))*u.s.Mb(1,O),C=(3.141592653589793-u.s.R(C))*u.s.Mb(1,C)),g=u.F.Sj(H,C),E=u.F.q(x,H,u.F.Sj(H,O)),g=u.F.q(x,H,g),g=u.s.R(g-E)*v,O=new u.ha(0),C=new u.ha(0),z=$[1]/1,z*=-u.s.Mb(1,N),E=Math.acos(z)*u.s.Mb(1,N),k.sf(v,h,o,r,g,E,O,C),u.s.$(n,O.u)&&u.s.$(l,C.u)||(H=u.F.ip(u.F.ca(n-O.u),l-C.u),k.sf(v,h,o,r,g,u.F.ca(E+3.141592653589793),O,C),(B=u.F.ip(u.F.ca(n-O.u),l-C.u))<H&&(E=u.F.ca(E+3.141592653589793))),O=[0,0,0,0],C=[0,0,0,0],H=[0,0,0],v=[0,0,0],o=[0,0,0],r=[0,0,0],z=[0,0,0],(x=[0,0,0])[0]=0,x[1]=0,x[2]=D,H[0]=0,H[1]=0,H[2]=0,u.F.Yq(H,x,b,O,0),u.s.Dd(l)?(v[0]=b[0],v[1]=b[1],v[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(h=u.F.n(1,h,l)*Math.cos(l),v[0]=0,v[1]=0,b[2]+=Math.tan(1.570796326794897-u.s.R(l))*h*u.s.Mb(1,l),o[0]=h*Math.cos(n)-h*Math.sin(n),o[1]=h*Math.sin(n)+h*Math.cos(n)),o[2]=b[2],u.F.Yq(b,o,v,C,1),u.F.yx(C,O,r),u.F.yx(C,$,z),z=u.F.Ut(r,z)/(u.F.qn(r)*u.F.qn(z)),z*=u.s.Mb(1,N),n=Math.acos(z)*-u.s.Mb(1,N),(0<E&&0<n||0>E&&0>n)&&(n=u.F.ca(n+3.141592653589793)),c!=null&&(c.u=g),p!=null&&(p.u=E),f!=null&&(f.u=n)}}},k.sf=function(v,h,o,r,n,l,c,p){var f=[0,0,0],g=[0,0,0],b=[0,0,0],x=[0,0,0],$=[0,0,0],E=[0,0,0],O=[0,0,0],C=[0,0,0,0],N=new u.ha(0),D=new u.ha(0),z=new u.ha(0),R=new u.ha(0),G=new u.ha(0),H=new u.ha(0);if(c!=null&&p!=null)if(u.s.vi(h))u.$g.sf(v,o,r,n,l,c,p);else if(u.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(l=u.F.ca(l),0>n&&(n=u.s.R(n),l=u.F.ca(l+3.141592653589793)),o=u.F.ca(o),r=u.F.ca(r),1.570796326794897<u.s.R(r)&&(o=u.F.ca(o+3.141592653589793),r=u.s.Mb(3.141592653589793,r)-r),u.s.$(u.s.R(r),1.570796326794897)||u.s.Dd(r)||u.s.Dd(l)||u.s.$(u.s.R(l),3.141592653589793))u.Yk.sf(v,h,o,r,n,l,c,p);else{var B=Math.sqrt(1-h);for(v=n/v,u.F.el(1,h,r,0,0,R,G,H),f[0]=R.u,f[1]=G.u,f[2]=G.u,O[0]=0,O[1]=0,O[2]=-1*h*u.F.n(1,h,r)*Math.sin(r),R=u.F.n(1,h,r),G=u.F.ca(1.570796326794897-l),H=Math.sin(G),n=Math.cos(r),r=Math.sin(r),$[0]=R*n-r*H,$[1]=Math.cos(G),$[2]=(1-h)*R*r+n*H,0>l?u.F.Yq(O,$,f,C,0):u.F.Yq(O,f,$,C,0),f=Math.acos(C[2]/1),C=Math.atan2(-C[1],-C[0]),r=1-h,G=1+($=Math.tan(f))*$/r,r=(-(R=2*O[2]*$/r)+($=Math.sqrt(R*R-4*G*(O[2]*O[2]/r-1))))/(G*=2),R=(-R-$)/G,$=Math.tan(f),f=(r+R)/2,O=((G=$*r+O[2])+($*R+O[2]))/2,$=u.F.ip(r-f,G-O),B=O/B*1.570796326794897,r=0;100>r&&(R=(R=u.F.w(h,B))*R/Math.cos(B)*(Math.sin(B)-O*R/(1-h)),!u.s.Dd(R));r++)B-=R;B=u.F.n(1,h,B)*Math.cos(B),O=1-$/(B=Math.sqrt((B-f)*(B+f))),O*=2-O,E=Math.acos(u.F.Ut(E,g)/(u.F.qn(E)*u.F.qn(g))),E*=u.s.Mb(1,g[0]),l=(u.F.q(B,O,u.F.Sj(O,E))+v*u.s.Mb(1,l))/u.F.Ch(B,O),l=u.F.ca(1.570796326794897*l),l=u.F.Tq(O,l),u.F.n(B,O,l),$=u.F.ca(C+o),o=Math.cos($),l=Math.sin($),b[0]=x[0]*o+x[1]*-l,b[1]=x[0]*l+x[1]*o,b[2]=x[2],u.F.eO(h,b[0],b[1],b[2],z,D,N),c!=null&&(c.u=D.u),p!=null&&(p.u=z.u)}},k}()}(q||(q={})),function(u){var k=function(){function n(l){this.Za=null,this.xt=new u.h,this.yt=new u.h,this.g=l}return n.prototype.compare=function(l,c,p){return this.g.Hc(c,this.xt),this.g.Hc(l.ka(p),this.yt),this.xt.compare(this.yt)},n}(),v=function(){function n(l){this.Cf=new u.h,this.Fk=new u.h,this.g=l}return n.prototype.Fh=function(l){this.Cf.N(l)},n.prototype.compare=function(l,c){return this.g.Hc(l.ka(c),this.Fk),this.Cf.compare(this.Fk)},n}(),h=function(n){function l(c){var p=n.call(this,c.g,c.ra,!1)||this;return p.ib=c,p}return pe(l,n),l.prototype.compare=function(c,p,f){if(this.sg)return-1;var g=this.ib.Rd.Ln(this.ib.Th(p));c=c.ka(f);var b=this.ib.Rd.Ln(this.ib.Th(c));return this.Fm=f,this.ME(p,g,c,b)},l}(u.PC),o=function(n){function l(c){var p=n.call(this,c.g,c.ra)||this;return p.ib=c,p}return pe(l,n),l.prototype.compare=function(c,p){return this.sg?-1:(c=this.ib.Rd.Ln(this.ib.Th(c.ka(p))),this.Fm=p,this.NE(p,c))},l}(u.WL),r=function(){function n(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new u.h,this.Ri=new u.h,this.hb=new u.ad(8),this.Ad=new u.ad(5),this.nh=new u.cu,this.Rd=new u.cu,this.Pg=!1,this.xh=new u.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new u.$j,this.Nc=new u.$j,this.ph=new u.ja(0),this.Ik=new u.OC,this.Gf=new u.ja(0),this.Ck=new u.ja(0),this.lo=new u.Ta}return n.prototype.LX=function(l,c){var p=new u.Ed;return p.VB(),l.Pc(p),this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,c=this.eC(),l.Pc(p),c||(this.lQ(),c||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},n.prototype.PX=function(l,c){this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,this.Pg=!1,this.eC(),this.Pg||(this.Pg=l.Ip(c,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},n.prototype.qg=function(l,c){return this.hb.U(l,0+c)},n.prototype.GB=function(l,c,p){this.hb.T(l,0+c,p)},n.prototype.Th=function(l){return this.hb.U(l,2)},n.prototype.UW=function(l,c){this.hb.T(l,2,c)},n.prototype.MF=function(l,c){return this.hb.U(l,3+c)},n.prototype.Rp=function(l){return this.hb.U(l,7)},n.prototype.Rl=function(l,c){this.hb.T(l,7,c)},n.prototype.Tp=function(l,c){return this.hb.U(l,3+this.Qp(l,c))},n.prototype.hr=function(l,c,p){this.hb.T(l,3+this.Qp(l,c),p)},n.prototype.IR=function(l,c){return this.hb.U(l,5+this.Qp(l,c))},n.prototype.jr=function(l,c,p){this.hb.T(l,5+this.Qp(l,c),p)},n.prototype.Ur=function(l){return this.Ad.U(l,0)},n.prototype.PW=function(l,c){this.Ad.T(l,0,c)},n.prototype.$y=function(l){return this.Ad.U(l,4)},n.prototype.er=function(l,c){this.Ad.T(l,4,c)},n.prototype.kl=function(l){return this.Ad.U(l,1)},n.prototype.nn=function(l,c){this.Ad.T(l,1,c)},n.prototype.Zy=function(l){return this.Ad.U(l,3)},n.prototype.Ft=function(l,c){this.Ad.T(l,3,c)},n.prototype.$m=function(l){var c=this.Ad.De(),p=this.nh.Rh();return this.PW(c,p),l!=-1?(this.nh.addElement(p,l),this.g.Sa(l,this.zh,c),this.er(c,this.g.Va(l))):this.er(c,-1),c},n.prototype.CP=function(l){this.Ad.kd(l)},n.prototype.FD=function(l,c){this.nh.addElement(this.Ur(l),c),this.g.Sa(c,this.zh,l)},n.prototype.ot=function(l){var c=this.hb.De(),p=this.Rd.Rh();return this.UW(c,p),l!=-1&&this.Rd.addElement(p,l),c},n.prototype.GD=function(l,c){this.Rd.addElement(this.Th(l),c)},n.prototype.Wu=function(l){this.hb.kd(l),0<=(l=this.ph.gF(l))&&this.ph.NV(l)},n.prototype.jj=function(l,c){if(this.qg(l,0)==-1)this.GB(l,0,c);else{if(this.qg(l,1)!=-1)throw u.i.Ra();this.GB(l,1,c)}this.gy(l,c)},n.prototype.gy=function(l,c){var p=this.kl(c);if(p!=-1){var f=this.Tp(p,c);this.jr(f,c,l),this.hr(l,c,f),this.hr(p,c,l),this.jr(l,c,p)}else this.jr(l,c,l),this.hr(l,c,l),this.nn(c,l)},n.prototype.Qp=function(l,c){return this.qg(l,0)==c?0:1},n.prototype.Zm=function(l,c){var p,f=this.Zy(c);if(f!=-1&&(this.df.wd(f,-1),this.Ft(c,-1)),(f=this.kl(c))!=-1){var g=p=f;do{var b=!1,x=this.Qp(p,c),$=this.MF(p,x);if(this.qg(p,x+1&1)==l){if(this.Zu(p),this.Rd.eh(this.Th(p)),this.Wu(p),p==$){f=-1;break}f==p&&(f=this.kl(c),g=$,b=!0)}p=$}while(p!=g||b);if(f!=-1){do x=this.Qp(p,c),$=this.MF(p,x),this.GB(p,x,l),p=$;while(p!=g);(p=this.kl(l))!=-1?(g=this.Tp(p,l),b=this.Tp(f,l),g==p?(this.nn(l,f),this.gy(p,l),this.nn(l,p)):b==f&&this.gy(f,l),this.hr(f,l,g),this.jr(g,l,f),this.hr(p,l,b),this.jr(b,l,p)):this.nn(l,f)}}for(f=this.Ur(l),p=this.Ur(c),g=this.nh.sc(p);g!=-1;g=this.nh.lb(g))this.g.Sa(this.nh.ka(g),this.zh,l);this.nh.Cy(f,p),this.CP(c)},n.prototype.PT=function(l,c){var p=this.qg(l,0),f=this.qg(l,1),g=this.qg(c,0),b=this.qg(c,1);this.Rd.Cy(this.Th(l),this.Th(c)),c==this.kl(p)&&this.nn(p,l),c==this.kl(f)&&this.nn(f,l),this.Zu(c),this.Wu(c),p==g&&f==b||f==g&&p==b||(this.Jn(p,this.Ao),this.Jn(g,this.Ri),this.Ao.rb(this.Ri)?(p!=g&&this.Zm(p,g),f!=b&&this.Zm(f,b)):(f!=g&&this.Zm(f,g),p!=b&&this.Zm(p,b)))},n.prototype.Zu=function(l){var c=this.qg(l,1);this.ZE(l,this.qg(l,0)),this.ZE(l,c)},n.prototype.ZE=function(l,c){var p=this.Tp(l,c),f=this.IR(l,c),g=this.kl(c);p!=l?(this.hr(f,c,p),this.jr(p,c,f),g==l&&this.nn(c,p)):this.nn(c,-1)},n.prototype.RD=function(l,c,p){var f=this.Rd.sc(l),g=this.Rd.ka(f);l=this.Ie(g);var b=this.Ie(this.g.V(g));for(this.g.lr(g,c,p,!0),f=this.Rd.lb(f);f!=-1;f=this.Rd.lb(f)){g=this.Rd.ka(f);var x=this.Ie(g)==l;this.g.lr(g,c,p,x)}f=c.Xp(p,0).bc(),c=c.Xp(p,c.ql(p)-1).xc(),this.wK(l,f),this.wK(b,c)},n.prototype.UE=function(l,c,p){var f=this.Th(l),g=this.qg(l,0),b=this.qg(l,1),x=this.ot(-1);for(this.ph.add(x),this.Rl(x,-3),this.Gf.add(x),this.jj(x,g),l=1,c=c.ql(p);l<c;l++)p=this.$m(-1),this.Ck.add(p),this.Gf.add(p),this.jj(x,p),x=this.ot(-1),this.ph.add(x),this.Rl(x,-3),this.Gf.add(x),this.jj(x,p);for(this.jj(x,b),f=this.Rd.sc(f);f!=-1;f=this.Rd.lb(f))if(b=this.Rd.ka(f),this.Ie(b)==g){l=0;do 0<l&&(x=this.Gf.get(l-1),this.FD(x,b),this.$y(x)==-1&&this.er(x,this.g.Va(b))),x=this.Gf.get(l),l+=2,this.GD(x,b),b=this.g.V(b);while(l<this.Gf.size)}else{l=this.Gf.size-1;do l<this.Gf.size-2&&(x=this.Gf.get(l+1),this.FD(x,b),0>this.$y(x)&&this.er(x,this.g.Va(b))),x=this.Gf.get(l),l-=2,this.GD(x,b),b=this.g.V(b);while(0<=l)}this.Gf.clear(!1)},n.prototype.Ie=function(l){return this.g.Qa(l,this.zh)},n.prototype.NI=function(l,c,p){var f=this.qg(c,0),g=new u.h;this.Jn(f,g);var b=new u.h,x=this.qg(c,1);this.Jn(x,b);var $=p.ql(l),E=p.Xp(l,0),O=new u.h;if(E.$p(O),!g.rb(O)){if(!this.Pg){var C=g.compare(this.xh);0>C*(O=O.compare(this.xh))&&(this.Pg=!0)}this.qF(f,this.Gf),this.Ck.add(f)}for(!this.Pg&&1<$&&(C=g.compare(b),E=E.xc(),(g.compare(E)!=C||E.compare(b)!=C||0>E.compare(this.xh))&&(this.Pg=!0)),l=(E=p.Xp(l,$-1)).xc(),b.rb(l)||(this.Pg||0>(C=b.compare(this.xh))*(O=l.compare(this.xh))&&(this.Pg=!0),this.qF(x,this.Gf),this.Ck.add(x)),this.Gf.add(c),b=0,x=this.Gf.size;b<x;b++)l=this.Gf.get(b),p=this.Rp(l),u.ad.GG(p)&&(this.Nc.wd(p,-1),this.Rl(l,-1)),l!=c&&this.Rp(l)!=-3&&(this.ph.add(l),this.Rl(l,-3));this.Gf.clear(!1)},n.prototype.gO=function(l,c){this.ae.compare(this.Nc,this.Nc.ka(l),c),this.ae.sg&&(this.ae.Mr(),this.jF(l,c))},n.prototype.jF=function(l,c){this.Yn=!0,l=this.Nc.ka(l),c=this.Nc.ka(c);var p=this.Rd.Ln(this.Th(l)),f=this.Rd.Ln(this.Th(c)),g=this.g.cc(p);g==null&&(this.je==null&&(this.je=new u.zb),this.g.fd(p,this.je),g=this.je),(p=this.g.cc(f))==null&&(this.Pm==null&&(this.Pm=new u.zb),this.g.fd(f,this.Pm),p=this.Pm),this.Ik.Qo(g),this.Ik.Qo(p),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(l,c,-1,this.Ik),this.Ik.clear()},n.prototype.BQ=function(l,c){this.Yn=!0,c=this.Nc.ka(c);var p=this.Rd.Ln(this.Th(c)),f=this.g.cc(p);f==null&&(this.je==null&&(this.je=new u.zb),this.g.fd(p,this.je),f=this.je),p=this.wF(l),this.Ik.Qo(f),this.g.Xi(p,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(c,-1,l,this.Ik),this.Ik.clear()},n.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var l=this.ph.Gc();this.ph.Jf(),this.Rl(l,-1),this.RS(l)!=-1&&this.rS(l),this.Xn=!1}},n.prototype.rS=function(l){if(this.Xn){var c=this.Nc.Bu(this.HH,this.BH,l,!0);this.Xn=!1}else c=this.Nc.ED(l);c==-1?this.PT(this.Nc.ka(this.Nc.AF()),l):(this.Rl(l,c),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,c)))},n.prototype.RS=function(l){var c=this.qg(l,0);if(l=this.qg(l,1),this.Jn(c,this.Ao),this.Jn(l,this.Ri),u.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var p=this.Ao.compare(this.xh),f=this.Ri.compare(this.xh);return 0>=p&&0<f?l:0>=f&&0<p?c:-1},n.prototype.jQ=function(){var l=new u.ja(0);l.Jb(this.g.gd);for(var c=this.g.$q(),p=c.next();p!=-1;p=c.next())this.g.Qa(p,this.zh)!=-1&&l.add(p);this.g.nx(l,l.size),this.kQ(l)},n.prototype.kQ=function(l){this.df.clear(),this.df.Ee(l.size),this.df.Xo(new k(this.g));var c=new u.h;c.Sc();for(var p=-1,f=new u.h,g=0,b=l.size;g<b;g++){var x=l.get(g);this.g.Hc(x,f),f.rb(c)?(x=this.g.Qa(x,this.zh),this.Zm(p,x)):(p=this.Ie(x),this.g.Hc(x,c),x=this.df.zn(x),this.Ft(p,x))}},n.prototype.lQ=function(){var l=new u.ja(0);l.Jb(this.g.gd);for(var c=this.df.sc(-1);c!=-1;c=this.df.lb(c))l.add(this.df.ka(c));this.df.clear(),this.g.nx(l,l.size),c=0;for(var p=l.size;c<p;c++){var f=l.get(c),g=this.Ie(f);f=this.df.zn(f),this.Ft(g,f)}},n.prototype.qF=function(l,c){var p=this.kl(l);if(p!=-1){var f=p;do u.ad.GG(this.Rp(f))&&c.add(f),f=this.Tp(f,l);while(f!=p)}},n.prototype.wK=function(l,c){for(l=this.nh.sc(this.Ur(l));l!=-1;l=this.nh.lb(l))this.g.mf(this.nh.ka(l),c)},n.prototype.cK=function(l,c,p,f){this.Zu(l),c!=-1&&this.Zu(c),this.NI(0,l,f),c!=-1&&this.NI(1,c,f),p!=-1&&(f.Cf.D(this.Ao),this.Jn(p,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(p)),p=0;for(var g=this.Ck.size;p<g;p++){var b=this.Ck.get(p),x=this.Zy(b);x!=-1&&(this.df.wd(x,-1),this.Ft(b,-1))}for(p=this.Th(l),g=c!=-1?this.Th(c):-1,this.RD(p,f,0),c!=-1&&this.RD(g,f,1),this.UE(l,f,0),c!=-1&&this.UE(c,f,1),this.Rd.eh(p),this.Wu(l),c!=-1&&(this.Rd.eh(g),this.Wu(c)),p=0,g=this.Ck.size;p<g;p++)(b=this.Ck.get(p))==this.Lq&&(this.Zv=!0),(x=this.Zy(b))==-1&&((x=this.df.ED(this.wF(b)))==-1?(l=this.Ie(this.df.ka(this.df.AF())),this.Zm(l,b)):this.Ft(b,x));this.Ck.clear(!1)},n.prototype.Jn=function(l,c){this.g.ZF(this.$y(l),c)},n.prototype.wF=function(l){return this.nh.Ln(this.Ur(l))},n.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new h(this),this.Nc.ao=this.ae);var l=new u.ja(0),c=null,p=null;this.BH=this.HH=-1,this.Xn=!1;for(var f=this.df.sc(-1);f!=-1;){this.Xn=!1;var g=this.df.ka(f);this.Lq=this.Ie(g),this.g.Hc(g,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var b=this.kl(this.Lq),x=b==-1;if(!x){g=b;do{var $=this.Rp(g);$==-1?(this.ph.add(g),this.Rl(g,-3)):$!=-3&&l.add($),g=this.Tp(g,this.Lq)}while(g!=b)}if(0<l.size){for(this.Xn=l.size==1&&this.ph.size==1,x=0,b=l.size;x<b;x++)g=this.Nc.ka(l.get(x)),this.Rl(g,-2);var E=-2,O=-2;for(x=0,b=l.size;x<b;x++){if($=l.get(x),E==-2){var C=this.Nc.xe($);C!=-1?(g=this.Nc.ka(C),(g=this.Rp(g))!=-2&&(E=C)):E=-1}if(O==-2&&(($=this.Nc.lb($))!=-1?(g=this.Nc.ka($),(g=this.Rp(g))!=-2&&(O=$)):O=-1),E!=-2&&O!=-2)break}for(x=0,b=l.size;x<b;x++)$=l.get(x),g=this.Nc.ka($),this.Nc.wd($,-1),this.Rl(g,-1);l.clear(!1),this.HH=E!=-1?E:-1,this.BH=O!=-1?O:-1,E!=-1&&O!=-1?this.Xn||this.gO(E,O):E==-1&&O==-1&&(this.Xn=!1)}else x&&(c==null&&(c=new o(this)),c.Fh(this.xh),this.Nc.pJ(c),c.sg&&(c.Mr(),this.BQ(this.Lq,c.Fm)));this.sS(),this.Zv?(this.Zv=!1,p==null&&(p=new v(this.g)),p.Fh(this.xh),f=this.df.pJ(p)):f=this.df.lb(f)}return this.Yn},n.prototype.gr=function(l){for(this.g=l,this.zh=this.g.Hd(),this.hb.Ee(l.gd+32),this.Ad.Ee(l.gd),this.nh.Bt(l.gd),this.nh.hn(l.gd),this.Rd.Bt(l.gd+32),this.Rd.hn(l.gd+32),l=this.g.md;l!=-1;l=this.g.ve(l))if(u.ba.Ic(this.g.jc(l)))for($=this.g.Ob(l);$!=-1;$=this.g.Sb($)){var c=this.g.Ka($),p=this.g.Ya($),f=this.$m(p),g=this.ot(p);for(this.jj(g,f),E=this.g.V(p),p=0,c-=2;p<c;p++){var b=this.g.V(E),x=this.$m(E);this.jj(g,x),g=this.ot(E),this.jj(g,x),E=b}this.g.ec($)?(x=this.$m(E),this.jj(g,x),g=this.ot(E),this.jj(g,x),this.jj(g,f)):(x=this.$m(E),this.jj(g,x))}else for(var $=this.g.Ob(l);$!=-1;$=this.g.Sb($)){var E=this.g.Ya($);for(f=0,c=this.g.Ka($);f<c;f++)this.$m(E),E=this.g.V(E)}this.jQ()},n}();u.MC=r}(q||(q={})),function(u){var k=function(v){function h(o,r,n){var l=v.call(this)||this;if(o!==void 0)if(n!==void 0){l.description=u.fe.pg();var c=new u.Od;c.L(o,r,n),l.ZB(c)}else if(r!==void 0)l.description=u.fe.pg(),l.Db(o,r);else if(o instanceof u.sa)l.description=o;else if(o instanceof u.h)l.description=u.fe.pg(),l.Db(o);else{if(!(o instanceof h))throw u.i.O();l.description=o.description,l.Db(o.Ng(),o.kh()),o.la!==null&&(l.la=o.la.slice(0))}else l.description=u.fe.pg();return l}return pe(h,v),h.prototype.D=function(o){if(o===void 0){if(this.Bc())throw u.i.ga("This operation should not be performed on an empty geometry.");return(o=new u.h).na(this.la[0],this.la[1]),o}if(this.Bc())throw u.i.ga("This operation should not be performed on an empty geometry.");o.na(this.la[0],this.la[1])},h.prototype.Db=function(o,r){typeof o=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=o,this.la[1]=r):(this.wc(),this.Db(o.x,o.y))},h.prototype.xz=function(){if(this.Bc())throw u.i.ga("This operation should not be performed on an empty geometry.");var o=new u.Od;return o.x=this.la[0],o.y=this.la[1],o.z=this.description.dG()?this.la[2]:u.sa.te(1),o},h.prototype.ZB=function(o){this.wc();var r=this.hasAttribute(1);r||u.sa.yG(1,o.z)||(this.se(1),r=!0),this.la==null&&this.wn(),this.la[0]=o.x,this.la[1]=o.y,r&&(this.la[2]=o.z)},h.prototype.Ng=function(){if(this.Bc())throw u.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},h.prototype.YB=function(o){this.setAttribute(0,0,o)},h.prototype.kh=function(){if(this.Bc())throw u.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},h.prototype.WJ=function(o){this.setAttribute(0,1,o)},h.prototype.XR=function(){return this.Vc(1,0)},h.prototype.sX=function(o){this.setAttribute(1,0,o)},h.prototype.uR=function(){return this.Vc(2,0)},h.prototype.cX=function(o){this.setAttribute(2,0,o)},h.prototype.Fc=function(){return this.tF(3,0)},h.prototype.GJ=function(o){this.setAttribute(3,0,o)},h.prototype.Vc=function(o,r){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+r]:u.sa.te(o)},h.prototype.tF=function(o,r){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+r]:u.sa.te(o)},h.prototype.setAttribute=function(o,r,n){this.wc();var l=this.description.Rf(o);0>l&&(this.se(o),l=this.description.Rf(o)),this.la==null&&this.wn(),this.la[this.description.bk(l)+r]=n},h.prototype.K=function(){return 33},h.prototype.Eb=function(){return 0},h.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},h.prototype.un=function(o){if(this.la!=null){for(var r=u.fe.Kw(o,this.description),n=[],l=0,c=0,p=o.Ba;c<p;c++){var f=o.ld(c),g=u.sa.Wa(f);if(r[c]==-1){var b=u.sa.te(f);for(f=0;f<g;f++)n[l]=b,l++}else for(b=this.description.bk(r[c]),f=0;f<g;f++)n[l]=this.la[b],l++,b++}this.la=n}this.description=o},h.prototype.wn=function(){this.gJ(this.description.Be.length),h.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},h.prototype.Pc=function(o){if(o instanceof u.Ed){if(!this.Bc()){var r=this.D();o.Gh(r,r),this.Db(r)}}else this.Bc()||(this.se(1),r=this.xz(),this.ZB(o.hp(r)))},h.prototype.copyTo=function(o){if(o.K()!=33)throw u.i.O();o.wc(),this.la==null?(o.Pa(),o.la=null,o.Pf(this.description)):(o.Pf(this.description),o.gJ(this.description.Be.length),h.YD(this.la,o.la,this.description.Be.length))},h.prototype.Ja=function(){return new h(this.description)},h.prototype.B=function(){return this.Bc()},h.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},h.prototype.dn=function(o){o.Pa(),this.description!=o.description&&o.Pf(this.description),o.$b(this)},h.prototype.A=function(o){this.Bc()?o.Pa():(o.v=this.la[0],o.G=this.la[1],o.C=this.la[0],o.H=this.la[1])},h.prototype.So=function(o){if(this.Bc())o.Pa();else{var r=this.xz();o.v=r.x,o.G=r.y,o.Xe=r.z,o.C=r.x,o.H=r.y,o.Dg=r.z}},h.prototype.Vg=function(o,r){var n=new u.Oc;return this.Bc()?(n.Pa(),n):(o=this.Vc(o,r),n.pa=o,n.wa=o,n)},h.prototype.gJ=function(o){if(this.la==null)this.la=u.P.mg(o);else if(this.la.length<o){for(var r=this.la.slice(0),n=this.la.length;n<o;n++)r[n]=0;this.la=r}},h.YD=function(o,r,n){if(0<n)for(n=0;n<o.length;n++)r[n]=o[n]},h.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof h)||this.description!=o.description)return!1;if(this.Bc())return!!o.Bc();for(var r=0,n=this.description.Be.length;r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},h.prototype.dc=function(){var o=this.description.dc();if(!this.Bc())for(var r=0,n=this.description.Be.length;r<n;r++){var l=this.la[r];l=u.P.truncate(l^l>>>32),o=u.P.Vh(l,o)}return o},h.prototype.ng=function(){return null},h}(u.ba);u.Ta=k}(q||(q={})),function(u){var k=function(){function v(h,o,r){h!==void 0&&(this.x=h,this.y=o,this.z=r)}return v.construct=function(h,o,r){var n=new v;return n.x=h,n.y=o,n.z=r,n},v.prototype.L=function(h,o,r){this.x=h,this.y=o,this.z=r},v.prototype.lx=function(){this.z=this.y=this.x=0},v.prototype.normalize=function(){var h=this.length();h==0&&(this.x/=h,this.y/=h,this.z/=h)},v.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},v.prototype.sub=function(h){return new v(this.x-h.x,this.y-h.y,this.z-h.z)},v.prototype.Bg=function(h){new v(this.x*h,this.y*h,this.z*h)},v.prototype.Sh=function(h){return this.x*h.x+this.y*h.y+this.z*h.z},v}();u.Od=k}(q||(q={})),function(u){var k=function(){function v(h,o,r){this.Iw=this.yA=null,this.Zf=o,this.AT=o.y-r,this.zT=o.y+r,this.Gw=0,this.Zz=h,this.ra=r,this.MT=r*r,this.$z=r!=0,this.Nv=!1}return v.prototype.result=function(){return this.Gw!=0?1:0},v.prototype.UM=function(h){return h=h.ic(h.ge(this.Zf,!1)),u.h.zc(h,this.Zf)<=this.MT},v.prototype.aF=function(h){if(!this.$z&&(this.Zz&&this.Zf.rb(h.bc())||this.Zf.rb(h.xc())))this.Nv=!0;else if(h.oa==this.Zf.y&&h.oa==h.ma){if(this.Zz&&!this.$z){var o=Math.max(h.ta,h.qa);this.Zf.x>Math.min(h.ta,h.qa)&&this.Zf.x<o&&(this.Nv=!0)}}else{var r=!1;if(o=Math.max(h.ta,h.qa),this.Zf.x>o?r=!0:this.Zf.x>=Math.min(h.ta,h.qa)&&(r=0<h.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),r){if(this.Zf.y==h.bc().y){if(this.Zf.y<h.xc().y)return}else if(this.Zf.y==h.xc().y&&this.Zf.y<h.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(h.bc().y>h.xc().y?1:-1)}}},v.prototype.MI=function(h){var o=h.Vg(0,1);if(o.pa>this.zT||o.wa<this.AT)return!1;if(this.$z&&this.UM(h))return!0;if(o.pa>this.Zf.y||o.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(o=h.$F()))for(h=0;h<o;h++){var r=this.yA[h].get();if(this.aF(r),this.Nv)return!0}else if(this.aF(h),this.Nv)return!0;return!1},v.KM=function(h,o,r){for(o=new v(h.Kn()==0,o,r),h=h.Ha();h.ab();)for(;h.Ia();)if(r=h.ia(),o.MI(r))return-1;return o.result()},v.LM=function(h,o,r,n){var l=new u.l;h.yc(l),l.X(n,n);var c=new v(h.Kn()==0,r,n);h=h.Ha();var p=new u.l;for(p.L(l),p.C=r.x+n,p.G=r.y-n,p.H=r.y+n,n=(r=o.HF(p,n)).next();n!=-1;n=r.next())if(h.Wb(o.ka(n)),h.Ia()&&(n=h.ia(),c.MI(n)))return-1;return c.result()},v.ym=function(h,o,r){if(h.B())return 0;var n=new u.l;if(h.yc(n),n.X(r,r),!n.contains(o))return 0;if((n=h.Cb)!=null){var l=n.Hk;if(l!=null){if((l=l.Uo(o.x,o.y))==1)return 1;if(l==0)return 0}if((n=n.Gb)!=null)return v.LM(h,n,o,r)}return v.KM(h,o,r)},v.XS=function(h,o,r){return o.B()?0:v.ym(h,o.D(),r)},v.Ol=function(h,o){return!(16>(h=h.I()))&&2*h+Math.log(h)/Math.log(2)*o<1*h*o},v}();u.Fg=k}(q||(q={})),function(u){var k=function(v){function h(o){return v.call(this,!0,o)||this}return pe(h,v),h.prototype.Ja=function(){return new h(this.description)},h.prototype.Eb=function(){return 2},h.prototype.K=function(){return 1736},h.prototype.sG=function(o,r,n){this.ES(o,r,n)},h.prototype.kR=function(){this.AR()},h}(u.Xk);u.Ea=k}(q||(q={})),function(u){(function(k){k[k.PiPOutside=0]="PiPOutside",k[k.PiPInside=1]="PiPInside",k[k.PiPBoundary=2]="PiPBoundary"})(u.ML||(u.ML={})),u.jd=function(){function k(){}return k.FG=function(v,h,o){return(v=u.Fg.XS(v,h,o))==0?0:v==1?1:2},k.Zd=function(v,h,o){return(v=u.Fg.ym(v,h,o))==0?0:v==1?1:2},k.SX=function(v,h,o,r,n){if(h.length<o||n.length<o)throw u.i.O();for(var l=0;l<o;l++)n[l]=k.Zd(v,h[l],r)},k.nK=function(v,h,o,r,n){if(v.K()==1736)k.SX(v,h,o,r,n);else{if(v.K()!=197)throw u.i.ga("invalid_call");var l=new u.l;v.A(l),k.VM(l,h,o,r,n)}},k.VM=function(v,h,o,r,n){if(h.length<o||n.length<o)throw u.i.O();if(v.B())for(r=0;r<o;r++)n[r]=0;else for(v.X(.5*-r,.5*-r),v.X(.5*r,.5*r),r=0;r<o;r++)v.contains(h[r])?n[r]=1:v.contains(h[r])?n[r]=2:n[r]=0},k.UX=function(v,h,o,r,n){for(var l=0;l<o;l++)n[l]=v.ss(h[l],r)?2:0},k.TX=function(v,h,o,r,n){var l=v.Cb,c=null;l!=null&&(c=l.Hk),l=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var f=h[p];c.Uo(f.x,f.y)==0&&(n[p]=0,l--)}if(l!=0)for(v=v.Ha();v.ab()&&l!=0;)for(;v.Ia()&&l!=0;)for(c=v.ia(),p=0;p<o&&l!=0;p++)n[p]==1&&c.ss(h[p],r)&&(n[p]=2,l--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},k.oK=function(v,h,o,r,n){var l=v.K();if(l==1607)k.TX(v,h,o,r,n);else{if(!u.ba.zd(l))throw u.i.ga("Invalid call.");k.UX(v,h,o,r,n)}},k}()}(q||(q={})),function(u){var k=function(v){function h(o,r){if(arguments.length==2){var n=v.call(this,!1,o.description)||this;n.nf(o),n.lineTo(r)}else n=v.call(this,!1,o)||this;return n}return pe(h,v),h.prototype.Ja=function(){return new h(this.description)},h.prototype.Eb=function(){return 1},h.prototype.K=function(){return 1607},h.prototype.sG=function(o,r,n){this.FS(o,r,n)},h}(u.Xk);u.Ua=k}(q||(q={})),function(u){var k=function(){function v(){}return v.prototype.progress=function(){return!0},v.Bp=function(h){if(h!=null&&!h.progress(-1,-1))throw u.i.RC()},v}();u.op=k}(q||(q={})),function(u){var k;(k=u.KK||(u.KK={}))[k.clipWithInputHorizon=1]="clipWithInputHorizon",k[k.clipWithOutputHorizon=2]="clipWithOutputHorizon";var v=function(){function r(){this.Mg=3,this.Xu=this.Lr=NaN}return r.prototype.KW=function(n){this.LB(1,n)},r.prototype.LW=function(n){this.LB(2,n)},r.prototype.cS=function(){return this.ks(1)},r.prototype.dS=function(){return this.ks(2)},r.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},r.prototype.ks=function(n){return(this.Mg&n)!=0},r.prototype.Qf=function(){var n=new r;return n.Lr=this.Lr,n.Xu=this.Xu,n.Mg=this.Mg,n},r}();u.tC=v,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(u.LK||(u.LK={}));var h=function(){function r(){this.Mg=0}return r.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},r.prototype.ks=function(n){return(this.Mg&n)!=0},r.kg=function(n){var l=new r;return l.Mg=n.Mg,l},r.prototype.hM=function(n){this.Mg=n.Mg},r}();u.wY=h;var o=function(){function r(n,l,c){this.ef=n,this.$f=l,this.Wf=new u.l,this.Wf.L(c),this.vT=n.dc()+l.dc()+this.Wf.dc().toString()}return r.prototype.dc=function(){return this.vT},r.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.$f.Nb(n.$f)&&this.Wf.Nb(n.Wf)},r}();u.BY=o,o=function(){function r(){this.$f=this.ef=null,this.mH=new v,this.nH=new h,this.yw=this.Yf=null,this.ow=this.Vn=!0}return r.Pr=function(n,l,c,p){var f;p===void 0&&(p=null),f===void 0&&(f=null);var g=new r;return g.sp(n,l,c,p,f),g},r.prototype.sp=function(n,l,c,p,f){if(n==null||l==null)throw u.i.ga("invalidArgument");if(this.ef=n,this.$f=l,this.ow=this.Vn=!1,p!=null&&(this.mH=p.Qf()),f!=null&&this.nH.hM(f),f=!1,l.Tb()==1&&p!=null&&(p=p.Lr,isNaN(p)||p==0||(f=!0)),n==l)this.Vn=!f,this.ow=!0;else{p=n.Tb();var g=l.Tb();if(p==0||g==0){if(c!=null)throw u.i.O();n.Id()!=null&&l.Id()!=null&&(this.Vn=n.Id().Nb(l.Id()))}else p==3||g==3?this.Vn=n.Nb(l):this.ef.fS(this.$f)?this.Vn=!f:this.Vn=!1,this.Yf=c,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},r.prototype.isIdentity=function(){return this.Vn},r.prototype.iR=function(){return this.mH.Qf()},r.prototype.Nb=function(n){return n==this||!!(n instanceof r&&this.ef.Nb(n.ef)&&this.$f.Nb(n.$f))&&(this.Yf==n.Yf||!(this.Yf==null||n.Yf==null||!this.Yf.Nb(n.Yf)))},r.prototype.kY=function(){this.yw=new u.du(this)},r}(),u.xr=o}(q||(q={})),function(u){var k=function(){function v(){}return v.Ep=function(h){return h*v.jW},v.mx=function(h,o){return v.bP(o-h)},v.cP=function(h){return-360<=h&&720>h?(0>h?h+=360:360<=h&&(h-=360),h):(0>(h=u.mc.MK(h))&&(h+=360),h)},v.bP=function(h){return 180<(h=v.cP(h))&&(h-=360),h},v.jW=57.29577951308232,v}();u.sr=k,u.Jh=function(){function v(){}return v.nj=function(h,o){var r=new u.l;h.A(r);var n=u.cb.ih(o),l=new u.l;return l.L(n),l.v=r.v,l.C=r.C,l.X(.01*l.da(),0),o=u.ua.Xd(o,r,!1),l.contains(r)?h:u.Vd.clip(h,l,o,0)},v.ms=function(h,o,r,n,l){if(!u.cb.Xc(o))throw u.i.O();var c=u.ua.mj(o,h,!1),p=u.cb.ih(o),f=u.cb.tc(o),g=f.Id().ci,b=u.cb.xv(f);f=u.cb.gv(f),b*=2-b;var x=new u.Oc;p.en(x);var $=[[0,0],[0,0]];if(u.Gg.Tb(o)==2?n?($[0][0]=v.an(l,x),$[0][1]=p.Lp(),u.cb.wt(),p=$[0][0]*g):($[0][0]=p.ik(),$[0][1]=l,u.cb.wt(),p=$[0][1]*g):p=l*g,!n&&p!=0)throw u.i.O();var E=new u.ha,O=new u.hd;h=O.Ib(h);for(var C=[0],N=new u.h,D=new u.h,z=new u.h,R=new u.h,G=new u.h,H=new u.h,B=O.Ob(h);B!=-1;B=O.Sb(B)){var tt=O.Ya(B);O.D(tt,z);for(var X=!1,rt=tt=O.V(tt);rt!=-1;rt=O.V(rt)){if(rt==tt){if(X)break;X=!0}if(O.D(rt,R),n&&c<l-z.x&&R.x-l>c||c<l-R.x&&z.x-l>c||!n&&c<-z.y&&R.y>c||c<-R.y&&z.y>c)do if(!(Math.abs(z.x-R.x)>=.5*x.S())){if(u.Gg.Tb(o)==2?($[0][0]=v.an(z.x,x),$[0][1]=z.y,$[1][0]=v.an(R.x,x),$[1][1]=R.y,u.cb.ZV(),G.x=$[0][0]*g,G.y=$[0][1]*g,H.x=$[1][0]*g,H.y=$[1][1]*g):(G.x=z.x*g,G.y=z.y*g,H.x=R.x*g,H.y=R.y*g),H.x=6.283185307179586*(R.x-z.x)/x.S()+G.x,n){if(D.x=p,D.y=v.Iz(f,b,G,H,p,r),isNaN(D.y))break}else{if(D.x=v.Gz(f,b,G,H,r),isNaN(D.x))break;D.y=0}u.kb.xd(f,b,G.x,G.y,H.x,H.y,E,null,null,r);var ct=E.u;u.kb.xd(f,b,G.x,G.y,D.x,D.y,E,null,null,r);var ht=E.u;u.Gg.Tb(o)==2?($[0][0]=D.x/g,$[0][1]=D.y/g,u.cb.XQ(),n?(N.y=$[0][1],N.x=l):(N.x=v.qs($[0][0],z.x,R.x,x),N.y=l)):n?(N.x=l,N.y=D.y/g):(N.x=v.qs(D.x/g,z.x,R.x,x),N.y=l),C[0]=0<ct?u.P.Tk(ht/ct,0,1):.5,C[0]!=0&&C[0]!=1&&(ct=O.Na(rt),O.Wl(ct,C,1),O.Db(O.V(ct),N.x,N.y))}while(0);z.N(R)}}return O.Ke(h)},v.Hn=function(h,o,r,n,l){if(h.B())return h;var c=u.cb.bf(o);return v.Jp(h,r-180*c,360*c,o,n,l,!0)},v.Iz=function(h,o,r,n,l,c){if(3.141592653589793<=Math.abs(r.x-n.x)||!v.Un(r.x,n.x,l))return NaN;if(r.x>n.x)var p=n;else p=r,r=n;n=new u.ha(0);var f=new u.ha(0),g=new u.ha(0);u.kb.xd(h,o,p.x,p.y,r.x,r.y,f,n,null,c);var b=f.u,x=0,$=1,E=new u.h;for(E.N(p);b*($-x)>1e-12*h;){var O=.5*(x+$);if(u.kb.qj(h,o,p.x,p.y,b*O,n.u,f,g,c),E.x=f.u,E.y=g.u,E.x==l)break;if(v.Un(p.x,E.x,l))$=O;else{if(!v.Un(r.x,E.x,l))return NaN;x=O}}return E.y},v.Un=function(h,o,r){return h=k.Ep(h),o=k.mx(h,k.Ep(o)),(r=k.mx(h,k.Ep(r)))==0||0<o&&0<r&&r<=o||0>o&&0>r&&r>=o},v.an=function(h,o){var r=o.wa-o.pa;return o.Kt(h-Math.floor((h-o.pa)/r)*r)},v.qs=function(h,o,r,n){var l=new u.Oc;for(l.L(o,r),r=n.S(),h=Math.floor((h-o)/r)*r+h,l=l.tf();Math.abs(h-l)>Math.abs(h+r-l);)h+=r;return h},v.Gz=function(h,o,r,n,l){if(r.y>n.y)var c=n;else c=r,r=n;if((n=new u.Oc).L(c.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-r.x))return NaN;if(c.x==r.x)return c.x;var p=new u.ha(0),f=new u.ha(0),g=new u.ha(0);u.kb.xd(h,o,c.x,c.y,r.x,r.y,f,p,null,l);var b=f.u,x=0,$=1,E=new u.h;for(E.N(c);b*($-x)>1e-12*h;){var O=.5*(x+$);if(u.kb.qj(h,o,c.x,c.y,b*O,p.u,f,g,l),E.x=f.u,E.y=g.u,n.L(c.y,E.y),E.y==0)break;if(n.contains(0))$=O;else{if(n.L(r.y,E.y),!n.contains(0))return NaN;x=O}}return E.x},v.Jp=function(h,o,r,n,l,c,p){var f=new u.l;if(h.A(f),f.B())return h;var g=new u.Oc;f.en(g);var b=new u.Oc;if(b.L(o,o+r),b.contains(g)&&b.wa!=g.wa)return h;var x=new u.l;x.L(f);var $=h.K();if($==33)return((f=(x=l?h:h.Qf()).Ng())<b.pa||f>=b.wa||p&&f==b.wa)&&(f+=Math.ceil((b.pa-f)/r)*r,f=b.Kt(f),x.YB(f)),x;if($==550){for(n=(x=l?h:h.Qf()).vb(0),$=2*x.I(),h=!1,l=0;l<$;l+=2)((f=n.read(l))<b.pa||f>=b.wa||p&&f==b.wa)&&(h=!0,f+=Math.ceil((b.pa-f)/r)*r,f=b.Kt(f),n.write(l,f));return h&&x.Qc(1993),x}if(b.contains(g))return h;if($==197)return r=l?h:h.Qf(),f.Fa(x),r.Zo(f),r;var E=.1*Math.max(f.da(),f.S());for(x.X(0,E),p=h,b=n.Yd(0),h=u.Ih.local(),l=new u.Ed;;){var O=Math.floor((g.pa-o)/r),C=Math.ceil((g.wa-o)/r);if(!(3<C-O))break;O=Math.floor(.5*(C+O)),x.v=f.v-E,x.C=o+r*O;var N=u.Vd.clip(p,x,b,c);x.v=x.C,x.C=f.C+E;var D=u.Vd.clip(p,x,b,c);l.ig((O-C)*r,0),D.Pc(l),$==1736?p=h.W(N,D,n,null):(p=N).add(D,!1),p.A(f),f.en(g)}for(x.v=o,x.C=o+r,(o=new u.l).L(x),o.X(b,0),(o=Math.floor((f.v-x.v)/r)*r)!=0?(x.move(o,0),l.ig(-o,0)):l.MB(),o=$==1607?new u.Ua(p.description):new u.Ea(p.description),c=new u.l,g=new u.l;f.C>x.v;)(E=u.Vd.clip(p,x,b,0)).A(g),($==1607?!E.B()&&(g.S()>b||g.da()>b):!E.B()&&($!=1736||g.S()>b))&&(E.Pc(l),E.A(g),o.A(c),c.X(b,b),c.isIntersecting(g)&&$==1736?o=h.W(o,E,n,null):o.add(E,!1)),x.move(r,0),l.shift(-r,0);return o},v.RI=function(h,o,r,n){var l=new u.ee(r.description);l.Gd(r,0,-1),l=u.cb.Bh(l,h,o);var c=r.I();if(n.Pa(),!u.cb.Xc(h)||c!=l.I())return!1;var p=new u.l;r.A(p);var f=new u.l;if(l.A(f),p=p.S(),f=f.S(),p!=0&&f!=0){if(f/=p,h=u.cb.ih(o).S()/u.cb.ih(h).S(),1e-10<Math.abs(f/h-1))return!1}else if(p!=0||f!=0)return!1;for(n.add(r,!1),r=0;r<c;r++)h=l.Oa(r),n.Db(r,h);return!0},v.Jz=function(){throw u.i.Fe()},v}()}(q||(q={})),function(u){var k,v,h;(v=k=u.ui||(u.ui={}))[v.Clip=0]="Clip",v[v.DontClip=1]="DontClip",v[v.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(h=u.RK||(u.RK={})),u.Ab=function(){function o(){}return o.zv=function(r,n,l){if(l||0<n){for(r=r.toString(u.Tc.PE_STR_NAME_CANON|u.Tc.PE_STR_AUTH_NONE),n=[],l=0;l<r.length;l++)n[l]="a"<=r[l]&&"z">=r[l]?n[l]=r[l].toUpperCase():r[l];return n.join()}return r.toString(u.Tc.PE_STR_AUTH_TOP)},o.wr=function(r,n,l,c){var p=c.length,f=l.I();if(f!=0){var g=l.vb(0),b=Math.min(f,p),x=0,$=r.gh();isNaN(n)&&(n=0);for(var E=r.Xc(),O=179*(r=E?r.tc().Le().S():0)/360;0<f;){if(g.pB(x<<1,b,c),u.gj.projToGeogCenter($,b,c,n),E)for(var C=0;C<b;C++){var N=c[C][0]-n,D=u.mc.sign(N),z=g.read(2*(x+C));0>D*u.mc.sign(z)&&Math.abs(N)>O&&(c[C][0]+=-D*r)}g.pC(x<<1,b,c),x+=b,f-=b,b=Math.min(f,p)}l.Qc(1993)}},o.DL=function(r,n,l,c){var p=0,f=r.gh();isNaN(p)&&(p=0);var g=r.Xc(),b=r.bf();r=360*b,b*=179;for(var x=c.length,$=0;$<l;){for(var E=$;E<l&&n[E].isNaN();++E)$++;var O=Math.min(x,l-$);if(0<O){E=1;for(var C=$+1;E<O;++E,++C)if(n[C].isNaN()){O=E;break}if(u.ua.Ey(c,n,$,O),u.gj.projToGeogCenter(f,O,c,p),g)for(E=0,C=$;E<O;++E,++C){var N=n[C].x,D=c[E][0]-p,z=u.mc.sign(D);0>z*u.mc.sign(N)&&Math.abs(D)>b&&(c[E][0]-=z*r)}u.ua.Dy(n,$,c,O),$+=O}}},o.Kx=function(r,n,l){var c=l.length,p=n.I();if(!(1>p)){var f=n.vb(0),g=Math.min(p,c),b=0,x=r.gh(),$=r.Xc(),E=$?r.Le().S():0,O=179*E/360,C=0;for($&&(C=r.Bi());0<p;){if(f.pB(b<<1,g,l),u.gj.geogToProj(x,g,l),$)for(r=0;r<g;r++){var N=l[r][0],D=u.mc.sign(N),z=f.read(2*(b+r))-C;0>D*u.mc.sign(z)&&Math.abs(N)>O&&(l[r][0]+=-D*E)}f.pC(b<<1,g,l),b+=g,p-=g,g=Math.min(p,c)}n.Qc(1993)}},o.CL=function(r,n,l,c){if(l!=0){var p=r.gh(),f=r.Xc(),g=f?r.Le().S():0,b=179*g/360,x=0;for(f&&(x=r.Bi()),r=0;r<l;){for(var $=r;$<l&&n[$].isNaN();++$)r++;var E=Math.min(c.length,l-r);if(0<E){$=1;for(var O=r+1;$<E;++$,++O)if(n[O].isNaN()){E=$;break}if(u.ua.Ey(c,n,r,E),u.gj.geogToProj(p,E,c),f)for($=0,O=r;$<E;$++){var C=c[$][0],N=u.mc.sign(C);0>N*u.mc.sign(n[O].x-x)&&Math.abs(C)>b&&(c[$][0]-=N*g)}u.ua.Dy(n,r,c,E),r+=E}}}},o.vr=function(r,n,l,c){var p=n.I();if(p!=0){var f=n.vb(0),g=r.ef,b=r.$f,x=g.tc().Sp(),$=b.tc().Sp(),E=g.bf(),O=b.bf();if((r=r.Yf)==null||r.count()==0){for(l=x/$,c=(g.Wp()-b.Wp())*O,$=-90*E,r=90*E,x=!1,O=1,g=2*p;O<g;)E=f.get(O),(b=u.P.Tk(E,$,r))!=E&&(f.set(O,b),x=!0),O+=2;if(c!=0||l!=1)for(x=!0,$=new u.h,O=0;O<p;O++)f.uc(2*O,$),$.x*=l,$.x+=c,$.y*=l,f.Vt(2*O,$);x&&n.Qc(1993)}else{g=c.length,b=Math.min(p,g);var C=u.P.mg(b),N=null,D=0,z=NaN,R=NaN,G=360*O,H=O/E;l&&(R=90*O,z=89.9*E,N=u.P.mg(b));for(var B=!0,tt=0;p!=0;){for(E=!1,f.pB(D<<1,b,c),O=0;O<b;O++)C[O]=c[O][0];if(l)for(O=0;O<b;O++){var X=Math.abs(c[O][1])-z;0<X&&(E=c[O][1],c[O][1]=u.mc.En(z,E),N[O]=u.mc.En(X,E),E=!0)}for(O=c[0][0],r.transform(c,b,x,$),B&&(tt=c[0][0]-H*O,B=!1),O=0;O<b;O++)X=c[O][0]-C[O]*H-tt,200<Math.abs(X)&&(c[O][0]=0<X?c[O][0]-G:c[O][0]+G);if(E){for(O=0;O<b;O++)N[O]!=0&&(c[O][1]+=H*N[O],c[O][1]>R?c[O][1]=R:c[O][1]<-R&&(c[O][1]=-R));for(E=0;E<b;E++)N[E]=0}f.pC(D<<1,b,c),D+=b,p-=b,b=Math.min(p,g)}n.Qc(1993)}}},o.BL=function(r,n,l,c){if(r.ow)c=90*r.ef.bf(),u.ua.ZJ(n,l,-c,c);else{var p=r.Yf,f=r.ef,g=r.$f;r=f.Zr();var b=g.Zr(),x=f.bf(),$=90*x,E=g.bf();if(p==null||p.count()==0){if(c=r/b,p=(f.Wp()-g.Wp())*E,u.ua.ZJ(n,l,-$,$),p!=0||c!=1)for(E=0;E<l;E++)n[E].x*=c,n[E].x+=p,n[E].y*=c}else{f=Math.min(l,c.length),$=u.P.mg(f),g=360*E,x=E/x;for(var O=!0,C=0,N=0;l!=0;){for(E=0;E<f;E++)$[E]=n[E+N].x;for(E=n[0].x,u.ua.Ey(c,n,N,f),p.transform(c,f,r,b),u.ua.Dy(n,N,c,f),O&&(C=n[0].x-x*E,O=!1),E=0;E<f;E++){var D=n[N+E].x-$[E]*x-C;200<Math.abs(D)&&(n[N+E].x=0<D?n[N+E].x-g:n[N+E].x+g)}N+=f,l-=f,f=Math.min(l,c.length)}}}},o.fv=function(r,n){return r=r.ih(),isNaN(n)||r.Lu(n,0),r},o.PQ=function(r,n,l,c,p,f,g,b){for(var x=o.fv(c,p),$=x.S(),E=$/360,O=o.kE*E,C=r.vb(0),N=n.Xc(),D=N?$/n.Le().S():0,z=!1,R=new u.Ea(l.description),G=0,H=l.ea();G<H;++G){var B=N,tt=new u.Ua(l.description);if(tt.addPath(l,G,!0),g!=0){var X=o.KD(!0,tt,x.H-b,x.H,g);(z=z||X)&&(B=!1)}var rt=-1;B&&(rt=r.Ca(G));var ct=tt.vb(0),ht=tt.I(),Tt=0,dt=ct.read(0),Ut=0;X=3*c.Yd(0);var jt=!1,_t=new u.h;_t.Sc();var Le=new u.h;Le.Sc();for(var di=!1,je=1;je<ht;++je){var ue=u.h.construct(ct.gg(2*je),ct.gg(2*je+1)),ce=ue.x,ee=ce+Tt,Ue=ee-dt;if(ue.x=ee,Math.abs(Ue)>O){if(B){var Qt=rt+(je+1<ht?je:0),jr=C.read(2*(rt+je-1));Qt=(C.read(2*Qt)-jr)*D,Math.abs(Ue-Qt)>1*E&&(B=!1)}B||(ee=ce+(Tt-=u.mc.En($,ee-dt)),++Ut,di=Tt!=0,ue.x=ee)}else jt||u.ua.vG(Le,_t,ue,X)&&(jt=!0);di&&ct.write(2*je,ee),dt=ee,Le.N(_t),_t.N(ue)}0<Ut&&tt.Qc(1993),B=tt.Oa(0),ht=tt.Oa(ht-1),tt=u.h.ub(B,ht)<X?o.pQ(tt,c,p,f,jt):o.qQ(r,G,tt,c,p),R.add(tt,!1)}return p=c.Yd(0),l=x.S()/180,o.Lt(R,x,.1*p,!1),R=R!=(p=u.ti.clip(R,x,p,l,f)),r=r.He(),g=0,0<(b=p.He())&&0>r?g=1:0>=b&&0<r&&(b==0?(b=NaN,n.Tb()==2?b=n.ol().He():n.Tb()==1&&(b=n.Le().rF()),r>.99*b&&(g=-1)):g=-1),g!=0&&((n=new u.Ea(p.description)).vp(x),(n=u.Zl.local().W(n,l,f)).add(p,!1),R=!0,p=n),R&&(p=u.$l.local().W(p,c,!1,f)),p},o.qQ=function(r,n,l,c,p){var f=l.I(),g=l.Oa(0),b=l.Oa(f-1);p=(c=o.fv(c,p)).S(),g=u.mc.sign(b.x-g.x);var x=new u.l;l.yc(x);var $=c.ik();if(b=$-p,$+=p,0<=g){var E=Math.ceil((b-x.v)/p);for(E*=p;b>x.v+E;)E+=p;for(;b<x.C+E;)E-=p;var O=E;720<x.S()&&($=b+360*Math.ceil(x.S()/360))}else{for(E=Math.ceil(($-x.C)/p),E*=p;$<x.C+E;)E-=p;for(;$>x.v+E;)E+=p;O=E,720<x.S()&&(b=$-360*Math.ceil(x.S()/360))}E=g*p;var C=u.l.construct(x.v,x.G,x.C,x.H);C.move(O,0);var N=new u.Ed;N.ig(O,0),l.Pc(N),(x=new u.Ua(l.description)).add(l,!1),O=l.Oa(f-1),p=0;for(var D=x.Oa(0).x,z=0;0<g?C.C<$:C.v>b;)1024<=z&&(z=0),C.move(E,0),N.Lb=E,l.Pc(N),D+=E,c.v<=D&&c.C>=D&&(p=x.I()-1),l.Db(0,O),O=l.Oa(f-1),x.Fr(l,0,0,f-1,!1);return l=new u.Ea(x.description),f=0<r.Kr(n),l.add(x,!1),r=x.Oa(0),b=x.Oa(x.I()-1),n=l.ea()-1,(0>g?f:!f)?(g=u.h.construct(b.x,c.H),l.Ei(g),g=u.h.construct(c.ik(),c.H),l.Ei(g),c=u.h.construct(r.x,c.H)):(g=u.h.construct(b.x,c.G),l.Ei(g),g=u.h.construct(c.ik(),c.G),l.Ei(g),c=u.h.construct(r.x,c.G)),l.Ei(c),l.sG(0,n,0),l.fO(p),l},o.pQ=function(r,n,l,c,p){var f=new u.Ea(r.description);f.add(r,!1),f.yB(0,f.I()-1);var g=new u.l;f.yc(g);var b=(l=o.fv(n,l)).S(),x=Math.ceil((l.v-g.v)/b);for(x*=b;l.v>g.v+x;)x+=b;for(;l.v<g.C+x;)x-=b;if((x+=b)!=0){g.move(x,0);var $=new u.Ed;$.ig(x,0),f.Pc($)}if(l.v<=g.v&&l.C>g.C)return p&&(p=f.He(),n=(f=u.$l.local().W(f,n,!0,c)).He(),(n=u.mc.sign(p)!=u.mc.sign(n))&&f.jJ()),f;for((r=new u.Ea(r.description)).add(f,!1),p=p||g.S()>b-n.Yd(0);g.v<l.C;)g.move(b,0),($=new u.Ed).ig(b,0),f.Pc($),r.add(f,!1);return p&&(p=r.He(),r.$o(1),n=(r=u.$l.local().W(r,n,!0,c)).He(),(n=u.mc.sign(p)!=u.mc.sign(n))&&r.jJ()),r},o.KD=function(r,n,l,c,p){for(var f=n.vb(0),g=n.I(),b=!1,x=0;x<g;x++){var $=u.h.construct(f.gg(2*x),f.gg(2*x+1));if(1&p&&$.y>=l){b=!0;break}if(2&p&&$.y<=-l){b=!0;break}}if(!b)return!1;f=!1,r&&(f=n.Pn(0)),g=(r=new u.hd).Ib(n),b=r.Ob(g);var E=-1,O=!0,C=new u.h;C.Sc(),x=new u.Ta;for(var N=-1,D=r.Ya(b);D!=-1;D=r.V(D)){$=r.Oa(D);var z=1&p&&90<=$.y?1:0;if(z|=2&p&&$.y<=-l?2:0,0<E&&E!=z){if(C.x!=$.x){C.x=$.x,r.Xi(r.Na(D),x);var R=r.yj(b,D,x);r.mf(R,C)}if(f)for(N=N!=-1?r.V(N):r.Ya(b),R=r.Na(D);N!=R;)N=r.qd(N,!1);N=-1}0<z&&($.y=u.mc.En(c,$.y),r.mf(D,$),O||E==z||($.x!=C.x?(r.Xi(D,x),R=r.yj(b,D,x),r.Db(R,C.x,$.y),N=R):N=D)),E=z,C=$,O=!1}if(f){if(N!=-1)for(N=r.V(N);N!=-1;)N=r.qd(N,!1);l=r.Ya(b),r.hq(l,r.tj(b))||(r.Xi(l,x),r.yj(b,-1,x))}return r.Ke(g).copyTo(n),!0},o.Hz=function(r,n,l,c){var p=r;if(p.B()||l==k.DontClip)return p;var f=p.K();if(f==33)return p=[(c=p).D()],o.tG(p,1,n,l),p[0].isNaN()?c.Pa():c.Db(p[0]),r;var g=(r=n.tc()).bf(),b=90*g,x=180*g,$=360*g,E=n.Bi(),O=.5*g,C=new u.l;p.A(C);var N=n.Xr(),D=n.KQ(),z=N.K()==197;if(n=new u.l,N.A(n),l==k.PannableFold&&(l=r.Le().S(),n.v=E-.5*l,n.C=n.v+l),C.G<-b||C.H>b){if(new u.l().L(C.v-g,-b,C.C+g,b),(p=u.ti.Pu(p,n,r,NaN,0,c)).B())return p;p.A(C)}if(D&&(n.H<C.G||n.G>C.H))return p.Ja();if(C.S()>$&&(p=o.Jp(p,E-x,$,r,!0,0,!0,c)).A(C),(b=o.$N(C.v,C.C,n.v,n.C,$))!=0&&C.move(b,0),C.C>n.C||C.v<n.v){if(C.C>n.C)for(;C.v>=n.C;)C.move(-$,0),b-=$;for(;C.v<n.C-$;)C.move($,0),b+=$}if(l=u.ua.Ju(r,N),b!=0&&((g=new u.Ed).ig(b,0),p.Pc(g)),D){if(z&&n.contains(C))return p;for(D=[null,null],b=0;2>b;b++){if(z?g=u.ba.Ic(f)?u.ti.clip(p,n,l,O,c):u.ti.clip(p,n,l,0,c):(g=u.Zj.local().W(p,N,r,c))==N&&(g=u.ba.kg(g)),n.v<=C.v&&n.C>=C.C||n.v>=C.v&&n.C<=C.C)return g;D[b]=g,b==0&&(C.move(-$,0),(g=new u.Ed).ig(-$,0),p.Pc(g))}if(f==550)D[0].Gd(D[1],0,-1);else if(u.ba.Ic(f))D[0].add(D[1],!1);else{if(f!=33)throw u.i.ga("intersect_with_GCS_horizon: unexpected geometry type");D[0].B()&&(D[0]=D[1])}return D[0]}if(n.H<C.G||n.G>C.H)return p;for(f=0;!p.B()&&C.C>n.v;)f!=0&&((g=new u.Ed).ig(f,0),p.Pc(g)),u.fj.local().W(4,p,N,r,c)||N==(p=u.mp.local().W(p,N,r,c))&&(p=u.ba.kg(p)),f!=0&&((O=new u.Ed).ig(-f,0),p.Pc(O)),f-=$,C.move(-$,0);return p},o.tG=function(r,n,l,c){if(n!=0&&c!=k.DontClip)if(c==k.PannableFold){c=l.CR();for(var p=n,f=0;f<n;f++)(r[f].y>c.H||r[f].y<c.G)&&(r[f].Sc(),p--);p!=0&&o.cv(r,n,c.v,c.S())}else{var g=90*(c=l.bf()),b=180*c;for(c*=360,p=n,f=0;f<n;f++)(r[f].y>g||r[f].y<-g)&&(r[f].Sc(),p--);if(p!=0){(p=new u.l).bx(r,n),g=l.Xr();var x=l.kv();f=g.K()==197;var $=new u.l;if(g.A($),!x||!($.H<p.G||$.G>p.H))if(x)if(o.cv(r,n,$.ik()-b,c),p=n,f)for(f=0;f<n;f++)$.contains(r[f])||(r[f].Sc(),p--);else for(l=u.ua.Ju(l.tc(),g),f=0;f<n;f++)(b=u.jd.Zd(g,r[f],l)!=0)||(r[f].Sc(),p--);else for(o.cv(r,n,-b,c),p=n,l=u.ua.Ju(l.tc(),g),f=0;f<n;f++)(b=r[f]).isNaN()&&p--,x=o.oE(b.x,$.v,$.C,c),b.x+=x,(b=u.jd.Zd(g,b,l)!=0)&&(r[f].Sc(),p--)}}},o.Jp=function(r,n,l,c,p,f,g,b){var x=r.K(),$=n+l;if(x===33){var E=(c=p?r:r.Qf()).Ng();return(E<n||E>=$||g&&E==$)&&(E+=Math.ceil((n-E)/l)*l,E=u.P.Tk(E,n,$),c.YB(E)),c}if(r.B()||(E=new u.l,r.A(E),E.B()))return r;var O=new u.Oc;E.en(O);var C=new u.Oc;if(C.L(n,$),C.contains(O))return r;if(($=new u.l).L(E),x===550){for(b=(c=p?r:r.Qf()).vb(0),x=2*c.I(),$=!1,n=0;n<x;n+=2)((E=b.read(n))<C.pa||E>=C.wa||g&&E==C.wa)&&($=!0,E+=Math.ceil((C.pa-E)/l)*l,E=C.Kt(E),b.write(n,E));return $&&c.Qc(1993),c}if(x==197)return l=p?r:r.Qf(),E.Fa($),l.Zo(E),l;var N=.1*Math.max(E.da(),E.S());for($.X(0,N),g=r,C=c.Yd(0),r=u.Ih.local(),p=new u.Ed;;){var D=Math.floor((O.pa-n)/l),z=Math.ceil((O.wa-n)/l);if(!(3<z-D))break;D=Math.floor(.5*(z+D)),$.v=E.v-N,$.C=n+l*D;var R=u.ti.clip(g,$,C,f,b);$.v=$.C,$.C=E.C+N;var G=u.ti.clip(g,$,C,f,b);p.ig((D-z)*l,0),G.Pc(p),x==1736?g=r.W(R,G,c,null):(g=R).add(G,!1),g.A(E),E.en(O)}for($.v=n,$.C=n+l,(n=new u.l).L($),n.X(C,0),(n=Math.floor((E.v-$.v)/l)*l)!=0?($.move(n,0),p.ig(-n,0)):p.MB(),n=x==1607?new u.Ua(g.description):new u.Ea(g.description),f=new u.l,O=new u.l;E.C>$.v;)(N=u.ti.clip(g,$,C,0,b)).A(O),(x==1607?!N.B()&&(O.S()>C||O.da()>C):!N.B()&&(x!=1736||O.S()>C))&&(N.Pc(p),N.A(O),n.A(f),f.X(C,C),f.isIntersecting(O)&&x==1736?n=r.W(n,N,c,null):n.add(N,!1)),$.move(l,0),p.shift(-l,0);return n},o.cv=function(r,n,l,c){for(var p=l+c,f=0;f<n;f++){var g=r[f].x;l<=g&&g<p||!(g<l||g>p||g==p)||(g+=Math.ceil((l-g)/c)*c,g=u.P.Tk(g,l,p),r[f].x=g)}},o.Hn=function(r,n,l,c,p,f){if(!n.Xc())throw u.i.ga("fold_into_360_degree_range");if(r.B())return r;if(n.Tb()==2){l=n.rv();var g=n.qv()-l}else{var b=n.bf();g=360*b,l-=180*b}return o.Jp(r,l,g,n,c,p,!0,f)},o.lF=function(r,n,l,c){if(l.Tb()==2)c=l.rv(),l=l.qv()-c;else{var p=l.bf();l=360*p,c-=180*p}o.cv(r,n,c,l)},o.nj=function(r,n){var l=n.Le();if(r.K()==33){var c=r.kh();return l.G<=c&&c<=l.H?r:r.Ja()}c=new u.l,r.A(c);var p=new u.l;return p.L(l),p.v=c.v,p.C=c.C,p.X(.01*p.da(),0),l=u.ua.py(n,c),p.contains(c)?r:u.ti.clip(r,p,l,0,null)},o.kr=function(r,n,l){return r>n.C&&r-n.C<l?n.C:r<n.v&&n.v-r<l?n.v:r},o.BX=function(r,n,l,c){c.x=o.kr(r.x,n,l),c.y=r.y},o.AX=function(r,n,l,c){for(var p=0;p<n;p++)r[p].y<l.G||r[p].y>l.H?r[p].Sc():r[p].x=o.kr(r[p].x,l,c)},o.Lt=function(r,n,l,c){if(!r.B()){var p=r.K();if(!c||p!=1736)if(u.ba.zj(p)){c=r.vb(0),p=0;for(var f=r.I();p<f;p++){var g=c.read(2*p),b=o.kr(g,n,l);b!=g&&c.write(2*p,b)}r.Qc(1993)}else if(p==197)c=new u.l,r.A(c),c.v=o.kr(c.v,n,l),c.C=o.kr(c.C,n,l),r.Zo(c);else{if(p!=33)throw u.i.ga("internal error");r.YB(o.kr(r.Ng(),n,l))}}},o.pS=function(r,n,l,c){var p=new u.hd,f=p.Ib(r);return r=u.ua.Ju(n,r),o.ms(p,f,n,r,l,!0,c),p.Ke(f)},o.ms=function(r,n,l,c,p,f,g){if(!l.Xc())throw u.i.O("invalid call");var b=l.Le(),x=l.tc(),$=x.gh().getDatum().getSpheroid();x=x.Id().ci;var E=$.getFlattening();$=$.getAxis(),E*=2-E;var O=new u.Oc;b.en(O);var C=null,N=[[0,0],[0,0]];if(l.Tb()==2?(C=l.gh(),f?(N[0][0]=o.an(g,O),N[0][1]=b.Lp(),u.gj.projToGeog(C,1,N),b=N[0][0]*x):(N[0][0]=b.ik(),N[0][1]=g,u.gj.projToGeog(C,1,N),b=N[0][1]*x)):b=g*x,!f&&b!=0&&p!=h.GreatElliptic)throw u.i.ga("invalid argument");var D=new u.ha,z=[0],R=new u.h,G=new u.h,H=new u.h,B=[null,null],tt=new u.h,X=new u.h,rt=new u.h,ct=new u.h;for(n=r.Ob(n);n!=-1;n=r.Sb(n)){var ht=r.Ya(n);r.D(ht,tt);for(var Tt=!1,dt=ht=r.V(ht);dt!=-1;dt=r.V(dt)){if(dt==ht){if(Tt)break;Tt=!0}if(r.D(dt,X),f&&(c<g-tt.x&&X.x-g>c||c<g-X.x&&tt.x-g>c)||!f&&(g!=0||c<-tt.y&&X.y>c||c<-X.y&&tt.y>c))do if(!(Math.abs(tt.x-X.x)>=.5*O.S())){if(l.Tb()==2?(N[0][0]=o.an(tt.x,O),N[0][1]=tt.y,N[1][0]=o.an(X.x,O),N[1][1]=X.y,u.gj.projToGeogCenter(C,2,N,0),rt.x=N[0][0]*x,rt.y=N[0][1]*x,ct.y=N[1][1]*x):(rt.x=tt.x*x,rt.y=tt.y*x,ct.y=X.y*x),ct.x=2*(X.x-tt.x)*Math.PI/O.S()+rt.x,f){if(G.x=b,G.y=o.Iz($,E,rt,ct,b,p),isNaN(G.y))break;B[0]=G;var Ut=1}else if(p==h.GreatElliptic){var jt=[0,0];if((Ut=u.Nx.Jz(E,rt,ct,b,jt))==0)break;G.x=jt[0],G.y=b,B[0]=G,Ut==2&&(H.x=jt[1],H.y=b,B[1]=H)}else{if(G.x=o.Gz($,E,rt,ct,p),isNaN(G.x))break;G.y=0,B[0]=G,Ut=1}var _t=-1;for(jt=0;jt<Ut;jt++){u.kb.xd($,E,rt.x,rt.y,ct.x,ct.y,D,null,null,p);var Le=D.u;u.kb.xd($,E,rt.x,rt.y,B[jt].x,B[jt].y,D,null,null,p);var di=D.u;if(l.Tb()==2?(N[0][0]=B[jt].x/x,N[0][1]=B[jt].y/x,u.gj.geogToProj(C,1,N),f?(R.y=N[0][1],R.x=g):(R.x=o.qs(N[0][0],tt.x,X.x,O),R.y=g)):f?(R.x=g,R.y=B[jt].y/x):(R.x=o.qs(B[jt].x/x,tt.x,X.x,O),R.y=g),z[0]=0<Le?u.P.Tk(di/Le,0,1):.5,z[0]==0||z[0]==1)break;_t>z[0]||(_t=r.Na(dt),r.Wl(_t,z,1),r.Db(r.V(_t),R.x,R.y),_t=z[0])}}while(0);tt.N(X)}}},o.an=function(r,n){var l=n.wa-n.pa;return n.Kt(r-Math.floor((r-n.pa)/l)*l)},o.qs=function(r,n,l,c){var p=new u.Oc;for(p.L(n,l),l=c.S(),r=Math.floor((r-n)/l)*l+r,p=p.tf();Math.abs(r-p)>Math.abs(r+l-p);)r+=l;return r},o.Un=function(r,n,l){return r=u.sr.Ep(r),n=u.sr.mx(r,u.sr.Ep(n)),(l=u.sr.mx(r,u.sr.Ep(l)))==0||0<n&&0<l&&l<=n||0>n&&0>l&&l>=n},o.Iz=function(r,n,l,c,p,f){if(f==h.GreatElliptic)return u.Nx.NS(n,l,c,p);if(Math.abs(l.x-c.x)>=Math.PI||!o.Un(l.x,c.x,p))return NaN;if(l.x>c.x)var g=c;else g=l,l=c;c=new u.ha;var b=new u.ha,x=new u.ha;u.kb.xd(r,n,g.x,g.y,l.x,l.y,b,c,null,f);var $=b.u,E=0,O=1,C=new u.h;for(C.N(g);$*(O-E)>1e-12*r;){var N=.5*(E+O);if(u.kb.qj(r,n,g.x,g.y,$*N,c.u,b,x,f),C.x=b.u,C.y=x.u,C.x==p)break;if(o.Un(g.x,C.x,p))O=N;else{if(!o.Un(l.x,C.x,p))return NaN;E=N}}return C.y},o.Gz=function(r,n,l,c,p){if(p==h.GreatElliptic)return r=[0,0],u.Nx.Jz(n,l,c,0,r),r[0];if(l.y>c.y)var f=c;else f=l,l=c;if((c=new u.Oc).L(f.y,l.y),!c.contains(0)||Math.abs(f.x-l.x)>=Math.PI)return NaN;if(f.x==l.x)return f.x;var g=new u.ha,b=new u.ha,x=new u.ha;u.kb.xd(r,n,f.x,f.y,l.x,l.y,b,g,null,p);var $=b.u,E=0,O=1,C=new u.h;for(C.N(f);$*(O-E)>1e-12*r;){var N=.5*(E+O);if(u.kb.qj(r,n,f.x,f.y,$*N,g.u,b,x,p),C.x=b.u,C.y=x.u,c.L(f.y,C.y),C.y==0)break;if(c.contains(0))O=N;else{if(c.L(l.y,C.y),!c.contains(0))return NaN;E=N}}return C.x},o.RI=function(r,n,l,c){if(!r.ef.Xc())return!1;var p=new u.ee(n.description);if(p.Gd(n,0,-1),c=u.Gx.local().W(p,r,c),p=n.I(),l.Pa(),p!=c.I())return!1;var f=new u.l;n.A(f);var g=new u.l;if(c.A(g),f=f.S(),g=g.S(),f!=0&&g!=0){if(g/=f,r=r.$f.ih().S()/r.ef.ih().S(),1e-10<Math.abs(g/r-1))return!1}else if(f!=0||g!=0)return!1;for(l.add(n,!1),n=new u.h,r=0;r<p;r++)c.D(r,n),l.Db(r,n);return!0},o.lN=function(r,n){return(r%=360*n)>=180*n&&(r-=360*n),r},o.OI=function(r,n,l,c){if(l==k.Clip){var p=n.ol();p.K()==197?(l=new u.l,p.A(l),p=u.ua.py(n,l),r=u.ti.clip(r,l,p,5e4*n.rm(),c)):u.fj.local().W(1,p,r,n,c)||(r=u.Zj.local().W(r,p,n,c))==p&&(r=u.Xk.kg(r))}else n.Xc()&&(c=new u.l,r.yc(c),n.Le().contains(c)||(o.Lt(r,n.Le(),n.Yd(0),!0),l==k.PannableFold&&(r=o.nj(r,n)),r=o.Hn(r,n,0,!0,1e5*n.rm(),null)));return r},o.SD=function(r,n,l){var c=n.Yr();if(c==null)return r;var p=(n=n.tc()).Le().S(),f=new u.l;r.yc(f);var g=new u.Oc;f.en(g),f=c.Ha(),c=null;for(var b=new u.Ed;f.ab();)for(;f.Ia();){var x=f.ia(),$=x.Vg(0,0),E=new u.Oc;for(E.L($.pa,$.wa),$=0;E.wa>g.pa;)E.move(-p),--$;for(;E.pa<=g.wa;){if(E.isIntersecting(g)){c==null&&(c=new u.Ua);var O=u.zb.YO(x.bc(),x.xc());$!=0&&(b.ig($*p,0),O.Pc(b)),c.pc(O,!0)}E.move(p),++$}}return c!=null?(n=u.ua.bO(n,c),n=u.ua.Gr(n),u.bu.gP(r,c,n,l)):r},o.$N=function(r,n,l,c,p){return r>=l&&n<=c?0:o.oE(.5*(n+r),l,c,p)},o.oE=function(r,n,l,c){return u.mc.round((.5*(l+n)-r)/c)*c},o.QQ=function(r,n,l,c,p,f,g,b){var x=o.fv(c,p),$=x.S(),E=$/360,O=o.kE*E,C=r.vb(0),N=n.Xc(),D=N?$/n.Le().S():0;n=r.Ja();for(var z=0,R=l.ea();z<R;++z){var G=N,H=new u.Ua(l.description);H.addPath(l,z,!0);var B=l.ec(z);g!=0&&(B=o.KD(B,H,x.H-b,x.H,g))&&(G=!1);var tt=-1;B=H.I();var X=!1;G&&(tt=r.Ca(z),X=r.ec(z));var rt=H.vb(0),ct=0,ht=rt.read(0),Tt=0,dt=3*c.Yd(0),Ut=!1,jt=new u.h;jt.Sc();var _t=new u.h;_t.Sc();for(var Le=!1,di=1;di<B;++di){var je=u.h.construct(rt.gg(2*di),rt.gg(2*di+1)),ue=je.x,ce=ue+ct,ee=ce-ht;if(je.x=ce,Math.abs(ee)>O){if(G){var Ue=tt+di-1,Qt=tt;(!X||di+1<B)&&(Qt+=di),Ue=C.read(2*Ue),Qt=(C.read(2*Qt)-Ue)*D,Math.abs(ee-Qt)>1*E&&(N=!1)}G||(ce=ue+(ct-=u.mc.En($,ce-ht)),++Tt,Le=ct!=0,je.x=ce)}else Ut||u.ua.vG(jt,_t,je,dt)&&(Ut=!0);Le&&rt.write(2*di,ce),ht=ce,jt.N(_t),_t.N(je)}Tt!=0&&H.Qc(1993),G=H.Oa(0),B=H.Oa(B-1),u.h.ub(G,B),H=o.rQ(H,c,isNaN(p)?0:p,f),n.add(H,!1)}return r=c.Yd(0),l=x.S()/180,o.Lt(n,x,.1*r,!1),u.ti.clip(n,x,r,l,f)},o.rQ=function(r,n,l,c){return o.Hn(r,n,l,!0,0,c)},o.JS=function(r,n,l,c){var p=r.K();if(p==1736)for(n=n!=null?n.Yd(0):0,p=0;p<c;p++)u.jd.Zd(r,l[p],n)!=1&&l[p].Sc();else{if(p!=197)throw u.i.O();for(p=0;p<c;p++)r.ZO(l[p])||l[p].Sc()}},o.bl=function(r,n,l,c){if(32>l)for(var p=new u.Ta,f=0;f<l;f++)p.Db(n[f]),r.bl(p,c).D(n[f]);else{var g=new u.ee;for(g.se(3),g.CD(n,l),p=g.vb(3),f=0;f<l;f++)p.write(f,f);for(f=r.bl(g,c),r=f.vb(0),p=f.vb(3),c=u.h.construct(NaN,NaN),g=0;g<l;g++)n[g]=c;for(l=f.I(),f=0;f<l;f++)c=p.read(f),r.uc(2*f,n[c])}},o.al=function(r,n,l,c){if(32>l)for(var p=new u.Ta,f=0;f<l;f++)p.Db(n[f]),r.al(p,c).D(n[f]);else{var g=new u.ee;for(g.se(3),g.CD(n,l),p=g.vb(3),f=0;f<l;f++)p.write(f,f);for(f=r.al(g,c),r=f.vb(0),p=f.vb(3),c=u.h.construct(NaN,NaN),g=0;g<l;g++)n[g]=c;for(l=f.I(),f=0;f<l;f++)c=p.read(f),r.uc(2*f,n[c])}},o.kE=210,o}()}(q||(q={})),function(u){var k;(k=u.PL||(u.PL={}))[k.rightSide=1]="rightSide";var v=function(){function h(o,r,n){this.Ds=new u.h,o===void 0?this.Ko=-1:(this.Ds.N(o),this.Ko=r,this.La=n,this.pw=0)}return h.prototype.RJ=function(o){this.pw=o?1|this.pw:-2&this.pw},h.prototype.B=function(){return 0>this.Ko},h.prototype.az=function(){if(this.B())throw u.i.ga("invalid call");return new u.Ta(this.Ds.x,this.Ds.y)},h.prototype.Va=function(){if(this.B())throw u.i.ga("invalid call");return this.Ko},h.prototype.cz=function(){if(this.B())throw u.i.ga("invalid call");return this.La},h.prototype.Nz=function(){return(1&this.pw)!=0},h.prototype.by=function(o,r,n,l){this.Ds.x=o,this.Ds.y=r,this.Ko=n,this.La=l},h}();u.bm=v}(q||(q={})),function(u){var k=function(){function h(){}return h.prototype.Wo=function(o,r){this.vh.resize(0),this.Ki.length=0,this.vk=-1,o.yc(this.Gk),this.Gk.X(r,r),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=u.ba.zd(o.K()))?(this.OH=o.bc(),this.NH=o.xc(),this.ra=r):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},h.prototype.Zi=function(o,r){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(o),this.Gk.X(r,r),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},h.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var o=null,r=null,n=null,l=null;this.xs&&(o=new u.h,r=new u.h,n=new u.l);for(var c=!1;!c;){for(;this.vk!=-1;){var p=this.Gb.Xy(this.Gb.hv(this.vk));if(p.isIntersecting(this.Gk)){if(!this.xs){c=!0;break}if(o.N(this.OH),r.N(this.NH),n.L(p),n.X(this.ra,this.ra),0<n.uy(o,r)){c=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){p=this.vh.Gc();var f=this.Ki[this.Ki.length-1];for(l==null&&((l=[])[0]=new u.l,l[1]=new u.l,l[2]=new u.l,l[3]=new u.l),v.zJ(f,l),this.vh.Jf(),--this.Ki.length,f=0;4>f;f++){var g=this.Gb.Np(p,f);if(g!=-1&&0<this.Gb.RR(g)&&l[f].isIntersecting(this.Gk))if(this.xs){if(o.N(this.OH),r.N(this.NH),n.L(l[f]),n.X(this.ra,this.ra),0<n.uy(o,r)){var b=new u.l;b.L(l[f]),this.vh.add(g),this.Ki.push(b)}}else(b=new u.l).L(l[f]),this.vh.add(g),this.Ki.push(b)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},h.XO=function(o,r,n){var l=new h;return l.Gb=o,l.Gk=new u.l,l.vh=new u.ja(0),l.Ki=[],l.Wo(r,n),l},h.WO=function(o,r,n){var l=new h;return l.Gb=o,l.Gk=new u.l,l.vh=new u.ja(0),l.Ki=[],l.Zi(r,n),l},h.VO=function(o){var r=new h;return r.Gb=o,r.Gk=new u.l,r.vh=new u.ja(0),r.Ki=[],r},h}();u.CY=k;var v=function(){function h(o,r){this.jf=new u.ad(11),this.ai=new u.ad(5),this.ys=[],this.iw=new u.ja(0),this.Da=new u.l,this.Pk(o,r)}return h.prototype.reset=function(o,r){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(o,r)},h.prototype.xj=function(o,r){return this.Bv(o,r,0,this.Da,this.kf,!1,-1)},h.prototype.Ez=function(o,r,n){n=n==-1?this.kf:this.RF(n);var l=this.da(n),c=this.jR(n);return this.Bv(o,r,l,c,n,!1,-1)},h.prototype.ka=function(o){return this.eR(o)},h.prototype.BF=function(o){return this.Xy(this.hv(o))},h.prototype.da=function(o){return this.lv(o)},h.prototype.jR=function(o){var r=new u.l;r.L(this.Da);var n=this.lv(o);o=this.LF(o);for(var l=0;l<2*n;l+=2){var c=u.P.truncate(3&o>>l);c==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):c==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(c==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},h.prototype.RR=function(o){return this.vz(o)},h.prototype.qR=function(o,r){return k.XO(this,o,r)},h.prototype.HF=function(o,r){return k.WO(this,o,r)},h.prototype.getIterator=function(){return k.VO(this)},h.prototype.Pk=function(o,r){if(0>r||32<2*r)throw u.i.O("invalid height");this.wT=r,this.Da.L(o),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},h.prototype.Bv=function(o,r,n,l,c,p,f){if(!l.contains(r))return n==0?-1:this.Bv(o,r,0,this.Da,this.kf,p,f);if(!p)for(var g=c;g!=-1;g=this.DR(g))this.jx(g,this.vz(g)+1);(g=new u.l).L(l),l=c;var b=[];for(b[0]=new u.l,b[1]=new u.l,b[2]=new u.l,b[3]=new u.l;n<this.wT&&this.dO(l);n++){h.zJ(g,b);for(var x=!1,$=0;4>$;$++)if(b[$].contains(r)){x=!0;var E=this.Np(l,$);E==-1&&(E=this.mP(l,$)),this.jx(E,this.vz(E)+1),l=E,g.L(b[$]);break}if(!x)break}return this.nS(o,r,n,g,l,p,c,f)},h.prototype.nS=function(o,r,n,l,c,p,f,g){var b=this.IF(c);if(p){if(c==f)return g;this.NP(g),p=g}else p=this.oP(),this.IB(p,o),this.FW(this.hv(p),r);return this.hX(p,c),b!=-1?(this.hx(p,b),this.ex(b,p)):this.BJ(c,p),this.NB(c,p),this.dx(c,this.nv(c)+1),this.cO(c)&&this.HQ(n,l,c),p},h.prototype.NP=function(o){var r=this.RF(o),n=this.IF(r),l=this.JR(o),c=this.pv(o);this.Wr(r)==o?(c!=-1?this.hx(c,-1):this.NB(r,-1),this.BJ(r,c)):n==o?(this.ex(l,-1),this.NB(r,l)):(this.hx(c,l),this.ex(l,c)),this.hx(o,-1),this.ex(o,-1),this.dx(r,this.nv(r)-1)},h.zJ=function(o,r){var n=.5*(o.v+o.C),l=.5*(o.G+o.H);r[0].L(n,l,o.C,o.H),r[1].L(o.v,l,n,o.H),r[2].L(o.v,o.G,n,l),r[3].L(n,o.G,o.C,l)},h.prototype.cO=function(o){return this.nv(o)==8&&!this.bG(o)},h.prototype.HQ=function(o,r,n){var l=this.Wr(n);do{var c=this.hv(l),p=this.ai.U(l,0);c=this.Xy(c),this.Bv(p,c,o,r,n,!0,l),l=p=this.pv(l)}while(l!=-1)},h.prototype.dO=function(o){return 8<=this.nv(o)||this.bG(o)},h.prototype.bG=function(o){return this.Np(o,0)!=-1||this.Np(o,1)!=-1||this.Np(o,2)!=-1||this.Np(o,3)!=-1},h.prototype.mP=function(o,r){var n=this.jf.De();return this.JW(o,r,n),this.jx(n,0),this.dx(n,0),this.Rk(n,o),this.FJ(n,this.lv(o)+1),this.IJ(n,r<<2*this.lv(o)|this.LF(o)),n},h.prototype.oP=function(){var o=this.ai.De();if(0<this.iw.size){var r=this.iw.Gc();this.iw.Jf()}else r=this.ys.length,this.ys.push(new u.l);return this.GW(o,r),o},h.prototype.Np=function(o,r){return this.jf.U(o,r)},h.prototype.JW=function(o,r,n){this.jf.T(o,r,n)},h.prototype.Wr=function(o){return this.jf.U(o,4)},h.prototype.BJ=function(o,r){this.jf.T(o,4,r)},h.prototype.IF=function(o){return this.jf.U(o,5)},h.prototype.NB=function(o,r){this.jf.T(o,5,r)},h.prototype.LF=function(o){return this.jf.U(o,6)},h.prototype.IJ=function(o,r){this.jf.T(o,6,r)},h.prototype.nv=function(o){return this.jf.U(o,7)},h.prototype.vz=function(o){return this.jf.U(o,8)},h.prototype.dx=function(o,r){this.jf.T(o,7,r)},h.prototype.jx=function(o,r){this.jf.T(o,8,r)},h.prototype.DR=function(o){return this.jf.U(o,9)},h.prototype.Rk=function(o,r){this.jf.T(o,9,r)},h.prototype.lv=function(o){return this.jf.U(o,10)},h.prototype.FJ=function(o,r){this.jf.T(o,10,r)},h.prototype.eR=function(o){return this.ai.U(o,0)},h.prototype.IB=function(o,r){this.ai.T(o,0,r)},h.prototype.JR=function(o){return this.ai.U(o,1)},h.prototype.pv=function(o){return this.ai.U(o,2)},h.prototype.hx=function(o,r){this.ai.T(o,1,r)},h.prototype.ex=function(o,r){this.ai.T(o,2,r)},h.prototype.RF=function(o){return this.ai.U(o,3)},h.prototype.hX=function(o,r){this.ai.T(o,3,r)},h.prototype.hv=function(o){return this.ai.U(o,4)},h.prototype.GW=function(o,r){this.ai.T(o,4,r)},h.prototype.Xy=function(o){return this.ys[o]},h.prototype.FW=function(o,r){this.ys[o].L(r)},h}();u.fu=v}(q||(q={})),function(u){var k;(k=u.WK||(u.WK={}))[k.Outside=0]="Outside",k[k.Inside=1]="Inside",k[k.Border=2]="Border";var v=function(){function o(r,n){this.KT=n,this.Xh=r}return o.prototype.ax=function(r,n){this.dH!=n&&r.flush(),this.dH=n},o.prototype.bF=function(r,n){for(var l=0;l<n;)for(var c=r[l++],p=r[l++],f=r[l++]*this.KT;c<p;c++)this.Xh[f+(c>>4)]|=this.dH<<2*(15&c)},o}();u.DY=v;var h=function(){function o(r,n,l){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(r,n,l)}return o.create=function(r,n,l){if(!o.uE(r))throw u.i.O();return o.rP(r,n,l)},o.kW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw u.i.ga("Internal Error")}return r},o.uE=function(r){return!(r.B()||r.K()!=1607&&r.K()!=1736)},o.prototype.mQ=function(r,n){n=n.Ha();for(var l=new u.h,c=new u.h;n.ab();)for(;n.Ia();){var p=n.ia();if(p.K()!=322)throw u.i.ga("Internal Error");r.Gh(p.bc(),l),r.Gh(p.xc(),c),this.Ti.fy(l.x,l.y,c.x,c.y)}this.Ti.dJ(u.Ox.Bx)},o.prototype.nQ=function(){throw u.i.ga("Internal Error")},o.prototype.My=function(r,n){for(var l=1;4>l;l++)r.fy(n[l-1].x,n[l-1].y,n[l].x,n[l].y);r.fy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ti.dJ(u.Ox.Bx)},o.prototype.mK=function(r,n,l){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new u.h;n=n.Ha(),l=this.Lk.$X(l)+1.5,p=new u.h;for(var f=new u.h,g=new u.h,b=new u.h,x=new u.h,$=new u.l,E=new u.h;n.ab();){var O=!1,C=!0;for(E.na(0,0);n.Ia();){var N=n.ia();if(b.x=N.ta,b.y=N.oa,x.x=N.qa,x.y=N.ma,$.Pa(),$.$b(b.x,b.y),$.Nk(x.x,x.y),this.xl.CG($)){this.Lk.Gh(x,x),C?(this.Lk.Gh(b,b),E.N(b),C=!1):b.N(E),p.vc(x,b);var D=.5>(N=p.length());N==0?p.na(1,0):(D||E.N(x),p.scale(l/N),f.na(-p.y,p.x),g.na(p.y,-p.x),b.sub(p),x.add(p),c[0].add(b,f),c[1].add(b,g),c[2].add(x,g),c[3].add(x,f),D?O=!0:this.My(r,c))}else O&&(this.My(r,c),O=!1),C=!0}O&&this.My(r,c)}},o.prototype.nC=function(r){return u.P.truncate(r*this.lH+this.WH)},o.prototype.oC=function(r){return u.P.truncate(r*this.Gs+this.YH)},o.rP=function(r,n,l){return new o(r,n,l)},o.prototype.Az=function(r,n,l){this.Hf=Math.max(u.P.truncate(2*Math.sqrt(l)+.5),64),this.Wm=u.P.truncate((2*this.Hf+31)/32),this.xl=new u.l,this.Kk=n,l=0;for(var c=this.Hf,p=this.Wm;8<=c;)l+=c*p,c=u.P.truncate(c/2),p=u.P.truncate((2*c+31)/32);this.Xh=u.P.mg(l,0),this.Ti=new u.Ox,l=new v(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,l),r.A(this.xl),this.xl.X(n,n),c=new u.l;var f=n*(p=u.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(n*=p.da(),c.L(this.xl.tf(),Math.max(f,this.xl.S()),Math.max(n,this.xl.da())),this.NA=this.Kk,this.Lk=new u.Ed,this.Lk.kS(c,p),new u.Ed,r.K()){case 550:l.ax(this.Ti,2),this.nQ();break;case 1607:l.ax(this.Ti,2),this.mK(this.Ti,r,this.NA);break;case 1736:l.ax(this.Ti,1),this.mQ(this.Lk,r),l.ax(this.Ti,2),this.mK(this.Ti,r,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},o.prototype.SN=function(){this.Ti.flush();for(var r=0,n=this.Hf*this.Wm,l=this.Hf,c=u.P.truncate(this.Hf/2),p=this.Wm,f=u.P.truncate((2*c+31)/32);8<l;){for(l=0;l<c;l++)for(var g=2*l,b=2*l+1,x=0;x<c;x++){var $=2*x,E=2*x+1,O=$>>4;$=2*(15&$);var C=E>>4;E=2*(15&E);var N=this.Xh[r+p*g+O]>>$&3;N|=this.Xh[r+p*g+C]>>E&3,N|=this.Xh[r+p*b+O]>>$&3,N|=this.Xh[r+p*b+C]>>E&3,this.Xh[n+f*l+(x>>4)]|=N<<2*(15&x)}l=c,p=f,r=n,c=u.P.truncate(l/2),f=u.P.truncate((2*c+31)/32),n=r+p*l}},o.prototype.Uo=function(r,n){return this.xl.contains(r,n)?(r=this.nC(r),n=this.oC(n),0>r||r>=this.Hf||0>n||n>=this.Hf||(n=this.Xh[this.Wm*n+(r>>4)]>>2*(15&r)&3)==0?0:n==1?1:2):0},o.prototype.To=function(r){if(!r.Fa(this.xl))return 0;var n=this.nC(r.v),l=this.nC(r.C),c=this.oC(r.G);if(r=this.oC(r.H),0>n&&(n=0),0>c&&(c=0),l>=this.Hf&&(l=this.Hf-1),r>=this.Hf&&(r=this.Hf-1),n>l||c>r)return 0;for(var p=Math.max(l-n,1)*Math.max(r-c,1),f=0,g=this.Wm,b=this.Hf,x=0;;){if(32>p||16>b){for(p=c;p<=r;p++)for(var $=n;$<=l;$++)if(1<(x=this.Xh[f+g*p+($>>4)]>>2*(15&$)&3))return 2;if(x==0)return 0;if(x==1)return 1}f+=g*b,b=u.P.truncate(b/2),g=u.P.truncate((2*b+31)/32),n=u.P.truncate(n/2),c=u.P.truncate(c/2),l=u.P.truncate(l/2),r=u.P.truncate(r/2),p=Math.max(l-n,1)*Math.max(r-c,1)}},o.prototype.MR=function(){return this.Hf*this.Wm},o}();u.Mx=h}(q||(q={})),function(u){var k;(k=u.QL||(u.QL={}))[k.contains=1]="contains",k[k.within=2]="within",k[k.equals=3]="equals",k[k.disjoint=4]="disjoint",k[k.touches=8]="touches",k[k.crosses=16]="crosses",k[k.overlaps=32]="overlaps",k[k.unknown=0]="unknown",k[k.intersects=1073741824]="intersects";var v=function(){function o(){}return o.construct=function(r,n,l,c,p,f,g,b){var x=new o;return x.rw=r,x.Om=n,x.Mj=l,x.Ui=c,x.wH=p,x.OY=f,x.PY=g,x.QY=b,x},o}();u.Xt=function(){function o(){}return o.xD=function(r,n,l){if(o.ry(r)){var c=u.ua.mj(n,r,!1);n=!1,u.Wk.xE(r)&&(n=n||r.nu(c,l)),(c=r.K())!=1736&&c!=1607||!u.Wk.vE(r)||l==0||(n=n||r.hj(l)),c!=1736&&c!=1607||!u.Wk.wE(r)||l==0||n||r.cM()}},o.ry=function(r){return u.Wk.xE(r)||u.Wk.vE(r)||u.Wk.wE(r)},o}();var h=function(){function o(){this.th=[]}return o.uB=function(r,n,l,c,p){var f=r.K(),g=n.K();if(f==197){if(g==197)return o.oW(r,n,l,c);if(g==33)return c==2?c=1:c==1&&(c=2),o.cJ(n,r,l,c)}else if(f==33){if(g==197)return o.cJ(r,n,l,c);if(g==33)return o.qW(r,n,l,c)}if(r.B()||n.B())return c==4;var b=new u.l;r.A(b);var x=new u.l;n.A(x);var $=new u.l;if($.L(b),$.$b(x),l=u.ua.Xd(l,$,!1),o.fk(b,x,l))return c==4;switch(b=!1,u.Xk.zd(f)&&((f=new u.Ua(r.description)).pc(r,!0),r=f,f=1607),u.Xk.zd(g)&&((g=new u.Ua(n.description)).pc(n,!0),n=g,g=1607),f!=197&&g!=197?(r.Eb()<n.Eb()||f==33&&g==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&g!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(g){case 1736:b=o.st(r,n,l,c,p);break;case 1607:b=o.bn(r,n,l,c,p);break;case 33:b=o.rt(r,n,l,c);break;case 550:b=o.qt(r,n,l,c,p);break;case 197:b=o.BI(r,n,l,c,p)}break;case 1607:switch(g){case 1736:b=o.bn(n,r,l,c,p);break;case 1607:b=o.bB(r,n,l,c,p);break;case 33:b=o.ut(r,n,l,c,p);break;case 550:b=o.tt(r,n,l,c,p);break;case 197:b=o.HI(r,n,l,c)}break;case 33:switch(g){case 1736:b=o.rt(n,r,l,c);break;case 1607:b=o.ut(n,r,l,c,p);break;case 550:b=o.mt(n,r,l,c)}break;case 550:switch(g){case 1736:b=o.qt(n,r,l,c,p);break;case 1607:b=o.tt(n,r,l,c,p);break;case 550:b=o.UA(r,n,l,c,p);break;case 33:b=o.mt(r,n,l,c);break;case 197:b=o.cI(r,n,l,c)}break;case 197:switch(g){case 1736:b=o.BI(n,r,l,c,p);break;case 1607:b=o.HI(n,r,l,c);break;case 550:b=o.cI(n,r,l,c)}}return b},o.oW=function(r,n,l,c){if(r.B()||n.B())return c==4;var p=new u.l,f=new u.l,g=new u.l;switch(r.A(p),n.A(f),g.L(p),g.$b(f),r=u.ua.Xd(l,g,!1),c){case 4:return o.fk(p,f,r);case 2:return o.eF(f,p,r);case 1:return o.eF(p,f,r);case 3:return o.gk(p,f,r);case 8:return o.YP(p,f,r);case 32:return o.XP(p,f,r);case 16:return o.WP(p,f,r)}return!1},o.cJ=function(r,n,l,c){if(r.B()||n.B())return c==4;r=r.D();var p=new u.l,f=new u.l;switch(n.A(p),f.L(r),f.$b(p),n=u.ua.Xd(l,f,!1),c){case 4:return o.Tw(r,p,n);case 2:return o.$A(r,p,n);case 1:return o.MU(r,p,n);case 3:return o.qI(r,p,n);case 8:return o.ZA(r,p,n)}return!1},o.qW=function(r,n,l,c){if(r.B()||n.B())return c==4;r=r.D(),n=n.D();var p=new u.l;switch(p.L(r),p.$b(n),l=u.ua.Xd(l,p,!1),c){case 4:return o.NU(r,n,l);case 2:return o.pI(n,r,l);case 1:return o.pI(r,n,l);case 3:return o.rI(r,n,l)}return!1},o.st=function(r,n,l,c,p){switch(c){case 4:return o.fV(r,n,l);case 2:return o.Uw(n,r,l,p);case 1:return o.Uw(r,n,l,p);case 3:return o.iV(r,n,l);case 8:return o.qV(r,n,l);case 32:return o.lV(r,n,l,p)}return!1},o.bn=function(r,n,l,c,p){switch(c){case 4:return o.gV(r,n,l);case 1:return o.aB(r,n,l,p);case 8:return o.rV(r,n,l,p);case 16:return o.bV(r,n,l)}return!1},o.rt=function(r,n,l,c){switch(c){case 4:return o.eV(r,n,l);case 1:return o.ZU(r,n,l);case 8:return o.pV(r,n,l)}return!1},o.qt=function(r,n,l,c){switch(c){case 4:return o.dV(r,n,l);case 1:return o.YU(r,n,l);case 8:return o.oV(r,n,l);case 16:return o.aV(r,n,l)}return!1},o.BI=function(r,n,l,c,p){if(o.cV(r,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.sV(r,n,l);case 1:return o.XU(r,n,l);case 3:return o.hV(r,n,l);case 8:return o.nV(r,n,l,p);case 32:return o.kV(r,n,l,p);case 16:return o.$U(r,n,l,p)}return!1},o.bB=function(r,n,l,c){switch(c){case 4:return o.BV(r,n,l);case 2:return o.FI(n,r,l);case 1:return o.FI(r,n,l);case 3:return o.DV(r,n,l);case 8:return o.II(r,n,l);case 32:return o.HV(r,n,l);case 16:return o.GI(r,n,l)}return!1},o.ut=function(r,n,l,c){switch(c){case 4:return o.AV(r,n,l);case 1:return o.vV(r,n,l);case 8:return o.LV(r,n,l)}return!1},o.tt=function(r,n,l,c){switch(c){case 4:return o.zV(r,n,l);case 1:return o.uV(r,n,l);case 8:return o.KV(r,n,l);case 16:return o.xV(r,n,l)}return!1},o.HI=function(r,n,l,c){if(o.yV(r,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.MV(r,n,l);case 1:return o.tV(r,n,l);case 3:return o.CV(r,n,l);case 8:return o.JV(r,n,l);case 32:return o.GV(r,n,l);case 16:return o.wV(r,n,l)}return!1},o.UA=function(r,n,l,c){switch(c){case 4:return o.bU(r,n,l);case 2:return o.$H(n,r,l);case 1:return o.$H(r,n,l);case 3:return o.dU(r,n,l);case 32:return o.jU(r,n,l)}return!1},o.mt=function(r,n,l,c){switch(c){case 4:return o.aI(r,n,l);case 2:return o.nU(r,n,l);case 1:return o.ZT(r,n,l);case 3:return o.Pw(r,n,l)}return!1},o.cI=function(r,n,l,c){switch(c){case 4:return o.aU(r,n,l);case 2:return o.mU(r,n,l);case 1:return o.YT(r,n,l);case 3:return o.cU(r,n,l);case 8:return o.lU(r,n,l);case 16:return o.$T(r,n,l)}return!1},o.iV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!!o.gk(c,p,l)&&(c=o.rc(r,n,!1))!=4&&c!=1&&c!=2&&(!!o.ZH(r,n,l)||(c=r.Rb(),p=n.Rb(),!(Math.abs(c-p)>4*Math.max(r.I(),n.I())*l)&&o.Rz(r,n,l,!0)))},o.fV=function(r,n,l){var c=o.rc(r,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.zI(r,n,l)},o.qV=function(r,n,l){var c=o.rc(r,n,!1);return c!=4&&c!=1&&c!=2&&o.DI(r,n,l,null)},o.lV=function(r,n,l,c){var p=o.rc(r,n,!1);return p!=4&&p!=1&&p!=2&&o.AI(r,n,l,c)},o.Uw=function(r,n,l,c){var p=new u.l,f=new u.l;return r.A(p),n.A(f),!!o.Ac(p,f,l)&&(p=o.rc(r,n,!1))!=4&&p!=2&&(p==1||o.wI(r,n,l,c))},o.gV=function(r,n,l){var c=o.rc(r,n,!0);return c==4||c!=1&&c!=1073741824&&o.zI(r,n,l)},o.rV=function(r,n,l,c){var p=o.rc(r,n,!1);return p!=4&&p!=1&&o.EI(r,n,l,c)},o.bV=function(r,n,l){var c=o.rc(r,n,!1);return c!=4&&c!=1&&o.yI(r,n,l,null)},o.aB=function(r,n,l,c){var p=new u.l,f=new u.l;return r.A(p),n.A(f),!!o.Ac(p,f,l)&&(p=o.rc(r,n,!1))!=4&&(p==1||o.xI(r,n,l,c))},o.eV=function(r,n,l){return u.jd.FG(r,n,l)==0},o.pV=function(r,n,l){return n=n.D(),o.CI(r,n,l)},o.ZU=function(r,n,l){return n=n.D(),o.vI(r,n,l)},o.dV=function(r,n,l){var c=o.rc(r,n,!1);if(c==4)return!0;if(c==1)return!1;c=new u.l,r.A(c),c.X(l,l);for(var p=new u.h,f=0;f<n.I();f++)if(n.D(f,p),c.contains(p)){var g=u.jd.Zd(r,p,l);if(g==1||g==2)return!1}return!0},o.oV=function(r,n,l){var c=this.rc(r,n,!1);if(c==4||c==1)return!1;c=new u.l,r.A(c),c.X(l,l);for(var p=!1,f=r,g=!1,b=0;b<n.I();b++){var x=n.Oa(b);if(c.contains(x)){if((x=u.jd.Zd(f,x,l))==2)p=!0;else if(x==1)return!1}g||(!u.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new u.Ea,r.copyTo(f),f.hj(1)),g=!0)}return!!p},o.aV=function(r,n,l){var c=this.rc(r,n,!1);if(c==4||c==1)return!1;var p=new u.l;c=new u.l;var f=new u.l;r.A(p),n.A(f),c.L(p),c.X(l,l),f=p=!1;for(var g=r,b=!1,x=0;x<n.I();x++){var $=n.Oa(x);if(c.contains($)?($=u.jd.Zd(g,$,l))==0?f=!0:$==1&&(p=!0):f=!0,p&&f)return!0;b||(!u.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?g=r:(g=new u.Ea,r.copyTo(g),g.hj(1)),b=!0)}return!1},o.YU=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),!this.Ac(c,p,l)||(p=this.rc(r,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var f=r,g=!1,b=0;b<n.I();b++){var x=n.Oa(b);if(!c.contains(x))return!1;if((x=u.jd.Zd(f,x,l))==1)p=!0;else if(x==0)return!1;g||(!u.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new u.Ea,r.copyTo(f),f.hj(1)),g=!0)}return p},o.hV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!!o.gk(c,p,l)&&((c=new u.Ea).bd(n,!1),o.Rz(r,c,l,!0))},o.cV=function(r,n,l){var c=o.rc(r,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new u.l;if(c=new u.l,r.A(p),n.A(c),o.Ac(c,p,l)||(p=new u.h,c.fn(p),(n=u.jd.Zd(r,p,l))!=0)||(c.VI(p),(n=u.jd.Zd(r,p,l))!=0)||(c.gn(p),(n=u.jd.Zd(r,p,l))!=0)||(c.YI(p),(n=u.jd.Zd(r,p,l))!=0))return!1;n=r.vb(0),(p=new u.l).L(c),p.X(l,l);for(var f=0,g=r.I();f<g;f++){var b=n.read(2*f),x=n.read(2*f+1);if(p.contains(b,x))return!1}return!o.NG(r,c,l)},o.nV=function(r,n,l,c){var p=o.rc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new u.l;var f=new u.l;return r.A(p),n.A(f),!o.Ac(f,p,l)&&(f.S()<=l&&f.da()<=l?(n=n.Kp(),o.CI(r,n,l)):f.S()<=l||f.da()<=l?(p=new u.Ua,f=new u.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.EI(r,p,l,c)):((p=new u.Ea).bd(n,!1),o.DI(r,p,l,c)))},o.kV=function(r,n,l,c){var p=o.rc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new u.l;var f=new u.l;return r.A(p),n.A(f),!(o.Ac(f,p,l)||f.S()<=l||f.da()<=l)&&((p=new u.Ea).bd(n,!1),o.AI(r,p,l,c))},o.sV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),o.Ac(p,c,l)},o.XU=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!!o.Ac(c,p,l)&&(c=o.rc(r,n,!1))!=4&&c!=2&&(c==1||(p.S()<=l&&p.da()<=l?(n=n.Kp(),o.vI(r,n,l)):p.S()<=l||p.da()<=l?(p=new u.Ua,c=new u.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.xI(r,p,l,null)):((p=new u.Ea).bd(n,!1),o.wI(r,p,l,null))))},o.$U=function(r,n,l,c){var p=new u.l,f=new u.l;return r.A(p),n.A(f),!(o.Ac(f,p,l)||f.da()>l&&f.S()>l||f.da()<=l&&f.S()<=l)&&(p=new u.Ua,f=new u.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.yI(r,p,l,c))},o.DV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(!o.gk(c,p,l)||o.rc(r,n,!1)==4)&&(!!o.ZH(r,n,l)||o.Rz(r,n,l,!1))},o.BV=function(r,n,l){return this.rc(r,n,!1)==4||!!new u.am(r,n,l,!0).next()&&!this.OG(r,n,l)},o.II=function(r,n,l){if(o.rc(r,n,!1)==4)return!1;var c=new u.ce(0);if(o.Sz(r,n,l,c)!=0)return!1;for(var p=new u.ee,f=0;f<c.size;f+=2){var g=c.read(f),b=c.read(f+1);p.Du(g,b)}return r=r.ng(),n=n.ng(),r.Gd(n,0,n.I()),o.Ow(r,p,l)},o.GI=function(r,n,l){if(o.rc(r,n,!1)==4)return!1;var c=new u.ce(0);if(o.Sz(r,n,l,c)!=0)return!1;for(var p=new u.ee,f=0;f<c.size;f+=2){var g=c.read(f),b=c.read(f+1);p.Du(g,b)}return r=r.ng(),n=n.ng(),r.Gd(n,0,n.I()),!o.Ow(r,p,l)},o.HV=function(r,n,l){return o.rc(r,n,!1)!=4&&o.QG(r,n,l)},o.FI=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(!o.Ac(c,p,l)||o.rc(r,n,!1)==4)&&o.Am(n,r,l,!1)},o.AV=function(r,n,l){return o.rc(r,n,!1)==4||(n=n.D(),!o.Tz(r,n,l))},o.LV=function(r,n,l){return o.rc(r,n,!1)!=4&&(n=n.D(),o.Uz(r,n,l))},o.vV=function(r,n,l){return o.rc(r,n,!1)!=4&&(n=n.D(),o.MG(r,n,l))},o.zV=function(r,n,l){return o.rc(r,n,!1)==4||!o.PG(r,n,l,!1)},o.KV=function(r,n,l){if(this.rc(r,n,!1)==4)return!1;var c=r.Ha(),p=new u.l,f=new u.l,g=new u.l;r.A(p),n.A(f),p.X(l,l),f.X(l,l),g.L(p),g.Fa(f),p=null;var b=r.Cb;if(b!=null){var x=b.Gb;p=b.Bo,x==null&&(x=b=u.ua.lj(r,g))}else x=b=u.ua.lj(r,g);var $=x.getIterator(),E=null;p!=null&&(E=p.getIterator());var O=new u.h,C=new u.h,N=!1,D=l*l;for(p=new u.rn(n.I()),b=0;b<n.I();b++)p.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,O),g.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1))continue;$.Zi(f,l);for(var z=$.next();z!=-1;z=$.next())if(c.Wb(x.ka(z)),(z=c.ia()).ic(z.ge(O,!1),C),u.h.zc(O,C)<=D){p.write(b,1),N=!0;break}}if(!N)return!1;for(r=r.ng(),c=new u.ee,f=new u.h,b=0;b<n.I();b++)p.read(b)!=0&&(n.D(b,f),c.Du(f.x,f.y));return this.Ow(r,c,l)},o.xV=function(r,n,l){if(this.rc(r,n,!1)==4)return!1;var c=r.Ha(),p=new u.l,f=new u.l,g=new u.l;r.A(p),n.A(f),p.X(l,l),f.X(l,l),g.L(p),g.Fa(f),p=null;var b=r.Cb;if(b!=null){var x=b.Gb;p=b.Bo,x==null&&(x=b=u.ua.lj(r,g))}else x=b=u.ua.lj(r,g);var $=x.getIterator(),E=null;p!=null&&(E=p.getIterator());var O=new u.h,C=new u.h,N=!1,D=!1,z=l*l;for(p=new u.rn(n.I()),b=0;b<n.I();b++)p.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,O),g.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1)){D=!0;continue}$.Zi(f,l);for(var R=!1,G=$.next();G!=-1;G=$.next())if(c.Wb(x.ka(G)),(G=c.ia()).ic(G.ge(O,!1),C),u.h.zc(O,C)<=z){p.write(b,1),R=N=!0;break}R||(D=!0)}else D=!0;if(!N||!D)return!1;for(r=r.ng(),c=new u.ee,f=new u.h,b=0;b<n.I();b++)p.read(b)!=0&&(n.D(b,f),c.Du(f.x,f.y));return!this.Ow(r,c,l)},o.uV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(!o.Ac(c,p,l)||o.rc(r,n,!1)==4||!o.PG(r,n,l,!0))&&(r=r.ng(),!o.bI(r,n,l))},o.CV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(p.da()>l&&p.S()>l)&&o.gk(c,p,l)},o.yV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!o.Ac(p,c,l)&&!o.NG(r,p,l)},o.JV=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),p.da()<=l&&p.S()<=l)return p=n.Kp(),o.Uz(r,p,l);if(p.da()<=l||p.S()<=l)return p=new u.Ua,c=new u.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.II(r,p,l);r=r.Ha(),n=new u.l,c=new u.l,n.L(p),c.L(p),n.X(-l,-l),c.X(l,l),p=!1;for(var f=new u.l,g=new u.l;r.ab();)for(;r.Ia();){if(r.ia().A(f),g.L(n),g.Fa(f),!g.B()&&(g.da()>l||g.S()>l))return!1;g.L(c),g.Fa(f),g.B()||(p=!0)}return p},o.GV=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(o.Ac(c,p,l)||o.Ac(p,c,l)||o.Ac(p,c,l)||p.da()>l&&p.S()>l||p.da()<=l&&p.S()<=l)&&(c=new u.Ua,p=new u.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.QG(r,c,l))},o.MV=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),!o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l)return o.Ac(p,c,l);r=r.Ha(),(n=new u.l).L(p),n.X(-l,-l),p=!1,c=new u.l;for(var f=new u.l;r.ab();)for(;r.Ia();)r.ia().A(c),n.jm(c)?p=!0:(f.L(n),f.Fa(c),!f.B()&&(f.da()>l||f.S()>l)&&(p=!0));return p},o.tV=function(r,n,l){var c=new u.l,p=new u.l;return n.A(p),r.A(c),!(!o.Ac(c,p,l)||p.da()>l&&p.S()>l)&&(p.da()<=l&&p.S()<=l?(n=n.Kp(),o.MG(r,n,l)):(c=new u.Ua,p=new u.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.Am(c,r,l,!1)))},o.wV=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l)return c=new u.Ua,p=new u.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.GI(r,c,l);r=r.Ha(),n=new u.l,(c=new u.l).L(p),n.L(p),c.X(-l,-l),n.X(l,l);for(var f=p=!1,g=new u.l,b=new u.l;r.ab();)for(;r.Ia();)if(r.ia().A(g),f||n.contains(g)||(f=!0),p||(b.L(c),b.Fa(g),!b.B()&&(b.da()>l||b.S()>l)&&(p=!0)),p&&f)return!0;return!1},o.dU=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!!o.gk(c,p,l)&&(!!o.eU(r,n,l)||o.TA(r,n,l,!1,!0,!1))},o.bU=function(r,n,l){return!o.bI(r,n,l)},o.jU=function(r,n,l){return o.TA(r,n,l,!1,!1,!0)},o.$H=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!!o.Ac(c,p,l)&&o.TA(n,r,l,!0,!1,!1)},o.Ow=function(r,n,l){l*=l;for(var c=new u.h,p=new u.h,f=0;f<n.I();f++){n.D(f,p);for(var g=!1,b=0;b<r.I();b++)if(r.D(b,c),u.h.zc(c,p)<=l){g=!0;break}if(!g)return!1}return!0},o.Pw=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),o.gk(c,p,l)},o.aI=function(r,n,l){return n=n.D(),o.lt(r,n,l)},o.nU=function(r,n,l){return o.Pw(r,n,l)},o.ZT=function(r,n,l){return!o.aI(r,n,l)},o.cU=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(p.da()>l||p.S()>l)&&o.gk(c,p,l)},o.aU=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),o.Ac(p,c,l))return!1;for((n=new u.l).L(p),n.X(l,l),l=new u.h,p=0;p<r.I();p++)if(r.D(p,l),n.contains(l))return!1;return!0},o.lU=function(r,n,l){var c=new u.l,p=new u.l,f=new u.l;if(n.A(c),c.da()<=l&&c.S()<=l)return!1;if(c.da()<=l||c.S()<=l){n=new u.h;var g=!1;p.L(c),f.L(c),p.X(l,l),c.da()>l?f.X(0,-l):f.X(-l,0);for(var b=0;b<r.I();b++)if(r.D(b,n),p.contains(n)){if(c.da()>l){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;g=!0}return g}for(p.L(c),f.L(c),p.X(l,l),f.X(-l,-l),n=new u.h,g=!1,b=0;b<r.I();b++)if(r.D(b,n),p.contains(n)){if(f.jm(n))return!1;g=!0}return g},o.mU=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),!o.Ac(p,c,l))return!1;if(p.da()<=l&&p.S()<=l)return o.gk(c,p,l);if(p.da()<=l||p.S()<=l){n=!1,c=new u.l;var f=new u.l;c.L(p),f.L(p),p.da()>l?c.X(0,-l):c.X(-l,0),f.X(l,l);for(var g=new u.h,b=0;b<r.I();b++){if(r.D(b,g),!f.contains(g))return!1;p.da()>l?g.y>c.G&&g.y<c.H&&(n=!0):g.x>c.v&&g.x<c.C&&(n=!0)}return n}for(n=!1,c=new u.l,f=new u.l,c.L(p),f.L(p),c.X(-l,-l),f.X(l,l),g=new u.h,b=0;b<r.I();b++){if(r.D(b,g),!f.contains(g))return!1;c.jm(g)&&(n=!0)}return n},o.YT=function(r,n,l){var c=new u.l,p=new u.l;return r.A(c),n.A(p),!(!o.Ac(c,p,l)||p.da()>l||p.S()>l)&&(n=n.Kp(),!o.lt(r,n,l))},o.$T=function(r,n,l){var c=new u.l,p=new u.l;if(r.A(c),n.A(p),o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l){n=new u.l,c=new u.l,n.L(p),p.da()>l?n.X(0,-l):n.X(-l,0),c.L(p),c.X(l,l);for(var f=new u.h,g=!1,b=!1,x=0;x<r.I();x++)if(r.D(x,f),g||(p.da()>l?f.y>n.G&&f.y<n.H&&(g=!0):f.x>n.v&&f.x<n.C&&(g=!0)),b||c.contains(f)||(b=!0),g&&b)return!0;return!1}for(n=new u.l,c=new u.l,n.L(p),n.X(-l,-l),c.L(p),c.X(l,l),f=new u.h,b=g=!1,x=0;x<r.I();x++)if(r.D(x,f),!g&&n.jm(f)&&(g=!0),b||c.contains(f)||(b=!0),g&&b)return!0;return!1},o.rI=function(r,n,l){return u.h.zc(r,n)<=l*l},o.NU=function(r,n,l){return u.h.zc(r,n)>l*l},o.pI=function(r,n,l){return o.rI(r,n,l)},o.qI=function(r,n,l){var c=new u.l;return c.L(r),o.gk(c,n,l)},o.Tw=function(r,n,l){var c=new u.l;return c.L(n),c.X(l,l),!c.contains(r)},o.ZA=function(r,n,l){if(n.da()<=l&&n.S()<=l)return!1;var c=new u.l,p=new u.l;if(c.L(n),c.X(l,l),!c.contains(r))return!1;if(n.da()<=l||n.S()<=l){if(p.L(n),n.da()>l?p.X(0,-l):p.X(-l,0),n.da()>l){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.L(n),p.X(-l,-l),!p.jm(r)},o.$A=function(r,n,l){if(n.da()<=l&&n.S()<=l)return!0;if(n.da()<=l||n.S()<=l){var c=new u.l;c.L(n),n.da()>l?c.X(0,-l):c.X(-l,0);var p=!1;return n.da()>l?r.y>c.G&&r.y<c.H&&(p=!0):r.x>c.v&&r.x<c.C&&(p=!0),p}return(c=new u.l).L(n),c.X(-l,-l),c.jm(r)},o.MU=function(r,n,l){return o.qI(r,n,l)},o.gk=function(r,n,l){return o.Ac(r,n,l)&&o.Ac(n,r,l)},o.fk=function(r,n,l){var c=new u.l;return c.L(n),c.X(l,l),!r.isIntersecting(c)},o.YP=function(r,n,l){if(r.da()<=l&&r.S()<=l){var c=r.tf();return o.ZA(c,n,l)}if(n.da()<=l&&n.S()<=l)return c=n.tf(),o.ZA(c,r,l);if(r.da()>l&&r.S()>l&&(n.da()<=l||n.S()<=l)?c=n:(c=r,r=n),c.da()<=l||c.S()<=l){if(r.da()<=l||r.S()<=l){n=new u.zb;var p=new u.zb,f=[0,0],g=[0,0],b=new u.h;return c.fn(b),n.Ec(b),c.gn(b),n.Rc(b),r.fn(b),p.Ec(b),r.gn(b),p.Rc(b),n.Fa(p,null,f,g,l),n.Fa(p,null,null,null,l)==1&&(f[0]==0||f[1]==1||g[0]==0||g[1]==1)}return n=new u.l,p=new u.l,n.L(r),n.X(-l,-l),p.L(n),p.Fa(c),!(!p.B()&&(p.da()>l||p.S()>l))}return r.X(l,l),(p=new u.l).L(c),p.Fa(r),!(p.B()||!p.B()&&p.da()>l&&p.S()>l)},o.XP=function(r,n,l){if(o.Ac(r,n,l)||o.Ac(n,r,l)||r.da()<=l&&r.S()<=l||n.da()<=l&&n.S()<=l)return!1;if(r.da()<=l||r.S()<=l){if(n.da()>l&&n.S()>l)return!1;var c=new u.zb,p=new u.zb,f=[0,0],g=[0,0],b=new u.h;return r.fn(b),c.Ec(b),r.gn(b),c.Rc(b),n.fn(b),p.Ec(b),n.gn(b),p.Rc(b),c.Fa(p,null,f,g,l),c.Fa(p,null,null,null,l)==2&&(0<f[0]||1>f[1])&&(0<g[0]||1>g[1])}return!(n.da()<=l||n.S()<=l)&&((c=new u.l).L(r),c.Fa(n),!(c.B()||c.da()<=l||c.S()<=l))},o.eF=function(r,n,l){if(!o.Ac(r,n,l))return!1;if(r.da()<=l&&r.S()<=l)return r=r.tf(),o.$A(r,n,l);if(n.da()<=l&&n.S()<=l)return n=n.tf(),o.$A(n,r,l);if(r.da()<=l||r.S()<=l)return o.Ac(r,n,l);if(n.da()<=l||n.S()<=l){var c=new u.l;return c.L(r),c.X(-l,-l),c.jm(n)?!0:((r=new u.l).L(c),r.Fa(n),!(r.B()||r.da()<=l&&r.S()<=l))}return o.Ac(r,n,l)},o.WP=function(r,n,l){if(o.Ac(r,n,l)||o.Ac(n,r,l)||r.da()<=l&&r.S()<=l||n.da()<=l&&n.S()<=l||n.da()>l&&n.S()>l&&r.da()>l&&r.S()>l)return!1;if(r.da()>l&&r.S()>l)var c=n;else c=r,r=n;if(r.da()>l&&r.S()>l){n=new u.l;var p=new u.l;return p.L(r),p.X(-l,-l),n.L(p),n.Fa(c),!(n.B()||n.da()<=l&&n.S()<=l)}n=new u.zb,p=new u.zb;var f=[0,0],g=[0,0],b=new u.h;return c.fn(b),n.Ec(b),c.gn(b),n.Rc(b),r.fn(b),p.Ec(b),r.gn(b),p.Rc(b),n.Fa(p,null,f,g,l),n.Fa(p,null,null,null,l)==1&&0<f[0]&&1>f[1]&&0<g[0]&&1>g[1]},o.zI=function(r,n,l){var c=new u.l,p=new u.l,f=new u.am(r,n,l,!0);if(!f.next())return!0;if(this.OG(r,n,l))return!1;var g=r,b=null;n.K()==1736&&(b=n);var x=!1,$=!1;do{var E=f.pl(),O=f.jl();if(O=n.Oa(n.Ca(O)),c.L(f.oz()),c.X(l,l),c.contains(O)&&(O=u.jd.Zd(g,O,0))!=0||n.K()==1736&&(E=r.Oa(r.Ca(E)),p.L(f.Wy()),p.X(l,l),p.contains(E)&&(O=u.jd.Zd(b,E,0))!=0))return!1;x||(!u.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?g=r:(g=new u.Ea,r.copyTo(g),g.hj(1)),x=!0),n.K()!=1736||$||($=n,!u.Fg.Ol($,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(b=new u.Ea,$.copyTo(b),b.hj(1)),$=!0)}while(f.next());return!0},o.Ac=function(r,n,l){var c=new u.l;return c.L(r),c.X(l,l),c.contains(n)},o.ns=function(r,n,l){var c=new u.l;return c.L(n),c.X(l,l),n=new u.h,r.fn(n),!c.contains(n)||(r.VI(n),!c.contains(n)||(r.YI(n),!c.contains(n)||(r.gn(n),!c.contains(n))))},o.ZH=function(r,n,l){if(r.ea()!=n.ea()||r.I()!=n.I())return!1;var c=new u.h,p=new u.h,f=!0;l*=l;for(var g=0;g<r.ea();g++){if(r.Wc(g)!=n.Wc(g)){f=!1;break}for(var b=r.Ca(g);b<n.Wc(g);b++)if(r.D(b,c),n.D(b,p),u.h.zc(c,p)>l){f=!1;break}if(!f)break}return!!f},o.eU=function(r,n,l){if(r.I()!=n.I())return!1;var c=new u.h,p=new u.h,f=!0;l*=l;for(var g=0;g<r.I();g++)if(r.D(g,c),n.D(g,p),u.h.zc(c,p)>l){f=!1;break}return!!f},o.TA=function(r,n,l,c,p,f){var g=!1;if(r.I()>n.I()){c&&(c=!1,g=!0);var b=n}else b=r,r=n;if(n=null,p||f||g){n=new u.rn(r.I());for(var x=0;x<r.I();x++)n.write(x,0)}x=new u.l;var $=new u.l,E=new u.l;b.A(x),r.A($),x.X(l,l),$.X(l,l),E.L(x),E.Fa($),$=new u.h;for(var O=new u.h,C=!0,N=u.ua.jE(r,E),D=N.getIterator(),z=l*l,R=0;R<b.I();R++)if(b.D(R,$),E.contains($)){var G=!1;x.L($.x,$.y,$.x,$.y),D.Zi(x,l);for(var H=D.next();H!=-1&&(H=N.ka(H),r.D(H,O),!(u.h.zc($,O)<=z&&((p||f||g)&&n.write(H,1),G=!0,c)));H=D.next());if(!G&&(C=!1,p||c))return!1}else{if(p||c)return!1;C=!1}if(f&&C)return!1;if(c)return!0;for(x=0;x<r.I();x++)if(n.read(x)==1){if(f)return!0}else if(p||g)return!1;return!f},o.bI=function(r,n,l){if(r.I()>n.I())var c=n;else c=r,r=n;n=new u.l;var p=new u.l,f=new u.l;c.A(n),r.A(p),n.X(l,l),p.X(l,l),f.L(n),f.Fa(p),p=new u.h;for(var g=new u.h,b=l*l,x=u.ua.jE(r,f),$=x.getIterator(),E=0;E<c.I();E++)if(c.D(E,p),f.contains(p)){n.L(p.x,p.y,p.x,p.y),$.Zi(n,l);for(var O=$.next();O!=-1;O=$.next())if(r.D(x.ka(O),g),u.h.zc(p,g)<=b)return!0}return!1},o.Rz=function(r,n,l,c){return o.Am(r,n,l,c)&&o.Am(n,r,l,c)},o.Am=function(r,n,l,c){function p(Tt,dt){return O.LE(Tt,dt)}var f,g=!0,b=[0,0],x=[0,0],$=0,E=new u.ja(0),O=new o,C=new u.l,N=new u.l,D=new u.l;r.A(C),n.A(N),C.X(l,l),N.X(l,l),D.L(C),D.Fa(N),r=r.Ha(),N=n.Ha();var z=null,R=z=null,G=n.Cb;for(G!=null?(z=G.Gb,R=G.Bo,z==null&&(z=u.ua.lj(n,D))):z=u.ua.lj(n,D),n=z.getIterator(),G=null,R!=null&&(G=R.getIterator());r.ab();)for(;r.Ia();){var H=!1,B=r.ia();if(B.A(C),!C.isIntersecting(D)||G!=null&&(G.Zi(C,l),G.next()==-1))return!1;for(R=B.Rb(),n.Wo(B,l),f=n.next();f!=-1;f=n.next()){N.Wb(z.ka(f)),f=N.ia();var tt=B.Fa(f,null,b,x,l);if(tt==2&&(!c||x[0]<=x[1])){tt=b[0];var X=b[1],rt=x[0],ct=x[1];if(tt*R<=l&&(1-X)*R<=l){H=!0,$=0,E.resize(0),O.th.length=0;var ht=r.xb();for(rt=!0;rt;){if(r.Ia()){if(R=(B=r.ia()).Rb(),(tt=B.Fa(f,null,b,x,l))==2&&(!c||x[0]<=x[1])&&(tt=b[0],X=b[1],tt*R<=l&&(1-X)*R<=l)){ht=r.xb();continue}if(N.Ia()&&(f=N.ia(),(tt=B.Fa(f,null,b,x,l))==2&&(!c||x[0]<=x[1])&&(tt=b[0],X=b[1],tt*R<=l&&(1-X)*R<=l))){ht=r.xb();continue}}rt=!1}ht!=r.xb()&&(r.Wb(ht),r.ia());break}ht=r.xb(),f=v.construct(ht,r.gb,tt,X,N.xb(),N.gb,rt,ct),O.th.push(f),E.add(E.size)}}if(!H){if($==O.th.length)return!1;for(1<E.size-$&&E.Wd($,E.size,p),H=0;$<O.th.length;$++)if(!((f=O.th[E.get($)]).Mj<H&&f.Ui<H)){if(R*(f.Mj-H)>l)return!1;if(R*(1-(H=f.Ui))<=l||H==1)break}if(R*(1-H)>l)return!1;$=0,E.resize(0),O.th.length=0}}return g},o.QG=function(r,n,l){if(1>o.Sz(r,n,l,null))return!1;var c=new u.l,p=new u.l;r.A(c),n.A(p);var f=o.ns(c,p,l);return c=o.ns(p,c,l),!(!f||!c)||(f&&!c?!o.Am(n,r,l,!1):c&&!f?!o.Am(r,n,l,!1):!o.Am(r,n,l,!1)&&!o.Am(n,r,l,!1))},o.Sz=function(r,n,l,c){function p(_t,Le){return C.LE(_t,Le)}if(r.sz()>n.sz())var f=n,g=r;else f=r,g=n;r=f.Ha(),n=g.Ha();var b=[0,0],x=[0,0],$=-1,E=0,O=new u.ja(0),C=new o,N=new u.l,D=new u.l,z=new u.l;f.A(N),g.A(D),N.X(l,l),D.X(l,l),z.L(N),z.Fa(D),f=null,c!=null&&(f=new u.h);var R=D=D=null,G=g.Cb;for(G!=null?(D=G.Gb,R=G.Bo,D==null&&(D=u.ua.lj(g,z))):D=u.ua.lj(g,z),g=D.getIterator(),G=null,R!=null&&(G=R.getIterator());r.ab();)for(R=0;r.Ia();){var H=r.ia();if(H.A(N),N.isIntersecting(z)){if(G!=null&&(G.Zi(N,l),G.next()==-1))continue;var B=H.Rb();g.Wo(H,l);for(var tt=g.next();tt!=-1;tt=g.next()){var X=D.ka(tt);n.Wb(X);var rt=n.ia(),ct=rt.Rb(),ht=H.Fa(rt,null,b,x,l);if(0<ht){tt=b[0],$=x[0];var Tt=ht==2?b[1]:NaN,dt=ht==2?x[1]:NaN;if(ht==2){if(B*(Tt-tt)>l)return 1;var Ut=B*(Tt-tt);if(n.Ia()){if(rt=n.ia(),(ht=H.Fa(rt,null,b,null,l))==2){ht=b[0];var jt=b[1];if(Ut+(ht=B*(jt-ht))>l)return 1}n.Wb(X),n.ia()}if(!n.xm()){if(n.ni(),rt=n.ni(),(ht=H.Fa(rt,null,b,null,l))==2&&(ht=b[0],Ut+(ht=B*((jt=b[1])-ht))>l))return 1;n.Wb(X),n.ia()}if(r.Ia()){if(X=r.xb(),(ht=(H=r.ia()).Fa(rt,null,b,null,l))==2&&(ht=b[0],Ut+(ht=B*((jt=b[1])-ht))>l))return 1;r.Wb(X),r.ia()}if(!r.xm()){if(X=r.xb(),r.ni(),(ht=(H=r.ni()).Fa(rt,null,b,null,l))==2&&(ht=b[0],Ut+(ht=ct*((jt=b[1])-ht))>l))return 1;r.Wb(X),r.ia()}rt=v.construct(r.xb(),r.gb,tt,Tt,n.xb(),n.gb,$,dt),C.th.push(rt),O.add(O.size)}$=0,c!=null&&(H.ic(tt,f),c.add(f.x),c.add(f.y))}}if(E<C.th.length){for(O.Wd(E,O.size,p),H=0,tt=C.th[O.get(E)].Om;E<C.th.length;E++)if(!((rt=C.th[O.get(E)]).Mj<H&&rt.Ui<H))if(B*(rt.Mj-H)>l)R=B*(rt.Ui-rt.Mj),H=rt.Ui,tt=rt.Om;else{if(rt.Om!=tt?(R=B*(rt.Ui-rt.Mj),tt=rt.Om):R+=B*(rt.Ui-rt.Mj),R>l)return 1;if((H=rt.Ui)==1)break}B*(1-H)>l&&(R=0),E=0,O.resize(0),C.th.length=0}}}return $},o.OG=function(r,n,l){var c=r.Ha(),p=n.Ha();for(r=new u.am(r,n,l,!1);r.next();){n=r.pl();var f=r.jl();if(c.Wb(n),p.Wb(f),n=c.ia(),0<p.ia().Fa(n,null,null,null,l))return!0}return!1},o.PG=function(r,n,l,c){var p=r.Ha(),f=new u.l,g=new u.l,b=new u.l;r.A(f),n.A(g),f.X(l,l),f.contains(g),g.X(l,l),b.L(f),b.Fa(g),(f=r.Cb)!=null?(f=f.Gb)==null&&(f=u.ua.lj(r,b)):f=u.ua.lj(r,b),r=f.getIterator();for(var x=new u.h,$=new u.h,E=l*l,O=0;O<n.I();O++)if(n.D(O,x),b.contains(x)){g.L(x.x,x.y,x.x,x.y),r.Zi(g,l);for(var C=!1,N=r.next();N!=-1;N=r.next())if(p.Wb(f.ka(N)),(N=p.ia()).ic(N.ge(x,!1),$),u.h.zc($,x)<=E){C=!0;break}if(c){if(!C)return!1}else if(C)return!0}return!!c},o.Tz=function(r,n,l){var c=new u.h,p=l*l,f=r.Ha();if((r=r.Cb)!=null&&(r=r.Gb)!=null){var g=new u.l;for(g.L(n),g=(l=r.HF(g,l)).next();g!=-1;g=l.next())if(f.Wb(r.ka(g)),f.Ia()){var b=(g=f.ia()).ge(n,!1);if(g.ic(b,c),u.h.zc(n,c)<=p)return!0}return!1}for(r=new u.l;f.ab();)for(;f.Ia();)if((g=f.ia()).A(r),r.X(l,l),r.contains(n)&&(b=g.ge(n,!1),g.ic(b,c),u.h.zc(n,c)<=p))return!0;return!1},o.MG=function(r,n,l){return o.Tz(r,n,l)&&!o.Uz(r,n,l)},o.Uz=function(r,n,l){return r=r.ng(),!o.lt(r,n,l)},o.NG=function(r,n,l){if(r.vm()){var c=new u.zb(n.v,n.G,n.v,n.H),p=new u.zb(n.v,n.H,n.C,n.H),f=new u.zb(n.C,n.H,n.C,n.G);for(n=new u.zb(n.C,n.G,n.v,n.G),r=r.Ha();r.ab();)for(;r.Ia();){var g=r.ia();if(g.isIntersecting(c,l)||g.isIntersecting(p,l)||g.isIntersecting(f,l)||g.isIntersecting(n,l))return!0}}else{(c=new u.l).L(n),c.X(l,l),l=r.vb(0),p=new u.h,f=new u.h,n=new u.h,g=new u.h;for(var b=0,x=r.ea();b<x;b++)for(var $=!0,E=r.Ca(b),O=r.Wc(b);E<O;E++)if($)l.uc(2*E,f),$=!1;else{if(l.uc(2*E,p),n.N(f),g.N(p),c.uy(n,g)!=0)return!0;f.N(p)}}return!1},o.rc=function(r,n,l){var c=r.K(),p=n.K();if(u.ba.zj(c)){var f=r.Cb;if(f!=null&&(f=f.Hk)!=null)if(p==33){var g=n.D();if((g=f.Uo(g.x,g.y))==1)return 1;if(g==0)return 4}else{if(g=new u.l,n.A(g),(g=f.To(g))==1)return 1;if(g==0)return 4;if(l&&u.ba.zj(p)&&o.CE(n,f))return 1073741824}}if(u.ba.zj(p)&&(f=n.Cb)!=null&&(f=f.Hk)!=null)if(c==33){if(r=r.D(),(g=f.Uo(r.x,r.y))==1)return 2;if(g==0)return 4}else{if(n=new u.l,r.A(n),(g=f.To(n))==1)return 2;if(g==0)return 4;if(l&&u.ba.zj(c)&&o.CE(r,f))return 1073741824}return 0},o.CE=function(r,n){for(var l=r.I(),c=new u.h,p=0;p<l;p++)if(r.D(p,c),n.Uo(c.x,c.y)==1)return!0;return!1},o.DI=function(r,n,l,c){for(var p=1<=r.qm(0)&&1<=n.qm(0),f=r.Ha(),g=n.Ha(),b=[0,0],x=[0,0],$=new u.am(r,n,l,!1),E=!1;$.next();){var O=$.pl(),C=$.jl();if(f.Wb(O),g.Wb(C),O=f.ia(),(C=g.ia().Fa(O,null,x,b,l))==2){if(E=b[0],C=b[1],O=O.Rb(),p&&(C-E)*O>l)return!1;E=!0}else if(C!=0){if(E=b[0],O=x[0],0<E&&1>E&&0<O&&1>O)return!1;E=!0}}return!!E&&(f=new u.l,g=new u.l,p=new u.l,r.A(f),n.A(g),f.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),p.L(f),p.Fa(g),!(10<r.I()&&(r=u.Vd.clip(r,p,l,0),r.B())||10<n.I()&&(n=u.Vd.clip(n,p,l,0),n.B()))&&u.cm.st(r,n,l,"F********",c))},o.AI=function(r,n,l,c){var p=1<=r.qm(0)&&1<=n.qm(0),f=new u.l,g=new u.l,b=new u.l;r.A(f),n.A(g);for(var x=!1,$=o.ns(f,g,l),E=o.ns(g,f,l),O=r.Ha(),C=n.Ha(),N=[0,0],D=[0,0],z=new u.am(r,n,l,!1);z.next();){var R=z.pl(),G=z.jl();if(O.Wb(R),C.Wb(G),G=O.ia(),(R=C.ia().Fa(G,null,D,N,l))==2){R=N[0];var H=N[1];if(G=G.Rb(),p&&(H-R)*G>l&&(x=!0,$&&E))return!0}else if(R!=0&&(R=N[0],G=D[0],0<R&&1>R&&0<G&&1>G))return!0}if(p=new u.l,O=new u.l,p.L(f),p.X(1e3*l,1e3*l),O.L(g),O.X(1e3*l,1e3*l),b.L(p),b.Fa(O),f="",f=x?f+"**":f+"T*",$){if(10<n.I()&&(n=u.Vd.clip(n,b,l,0)).B())return!1;f+="****"}else f+="T***";if(E){if(10<r.I()&&(r=u.Vd.clip(r,b,l,0)).B())return!1;f+="***"}else f+="T**";return u.cm.st(r,n,l,f.toString(),c)},o.wI=function(r,n,l,c){var p=[!1],f=o.uI(r,n,l,p);return p[0]?f:(p=new u.l,n.A(p),p.X(1e3*l,1e3*l),!(10<r.I()&&(r=u.Vd.clip(r,p,l,0),r.B()))&&u.cm.Uw(r,n,l,c))},o.uI=function(r,n,l,c){c[0]=!1;for(var p=r.Ha(),f=n.Ha(),g=[0,0],b=[0,0],x=new u.am(r,n,l,!1),$=!1;x.next();){var E=x.pl(),O=x.jl();if(p.Wb(E,-1),f.Wb(O,-1),E=p.ia(),(E=f.ia().Fa(E,null,b,g,l))!=0&&($=!0,E==1&&(E=g[0],O=b[0],0<E&&1>E&&0<O&&1>O)))return c[0]=!0,!1}if(!$){for(c[0]=!0,g=new u.l,r.A(g),g.X(l,l),x=r,$=!1,b=new u.l,c=0,p=n.ea();c<p;c++)if(0<n.Ka(c)){if(n.Tj(c,b),!g.isIntersecting(b)||(f=n.Oa(n.Ca(c)),(f=u.Fg.ym(x,f,0))==0))return!1;$||(!u.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?x=r:(f=new u.Ea,r.copyTo(f),f.hj(1),x=f),$=!0)}if(r.ea()==1||n.K()==1607)return!0;for(g=new u.l,n.A(g),g.X(l,l),b=n,x=!1,l=new u.l,c=0,p=r.ea();c<p;c++)if(0<r.Ka(c)){if(r.Tj(c,l),g.isIntersecting(l)&&(f=r.Oa(r.Ca(c)),(f=u.Fg.ym(b,f,0))==1))return!1;x||(!u.Fg.Ol(n,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(f=new u.Ea,n.copyTo(f),f.hj(1),b=f),x=!0)}return!0}return!1},o.EI=function(r,n,l,c){for(var p=r.Ha(),f=n.Ha(),g=[0,0],b=[0,0],x=new u.am(r,n,l,!1),$=!1;x.next();){var E=x.pl(),O=x.jl();if(p.Wb(E),f.Wb(O),E=p.ia(),(E=f.ia().Fa(E,null,b,g,l))==2)$=!0;else if(E!=0){if($=g[0],E=b[0],0<$&&1>$&&0<E&&1>E)return!1;$=!0}}return!!$&&(f=new u.l,g=new u.l,p=new u.l,r.A(f),n.A(g),f.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),p.L(f),p.Fa(g),!(10<r.I()&&(r=u.Vd.clip(r,p,l,0),r.B())||10<n.I()&&(n=u.Vd.clip(n,p,l,0),n.B()))&&u.cm.bn(r,n,l,"F********",c))},o.yI=function(r,n,l,c){for(var p=r.Ha(),f=n.Ha(),g=[0,0],b=[0,0],x=new u.am(r,n,l,!1),$=!1;x.next();){var E=x.pl(),O=x.jl();if(p.Wb(E),f.Wb(O),E=p.ia(),(E=f.ia().Fa(E,null,b,g,l))==2)$=!0;else if(E!=0){if($=g[0],E=b[0],0<$&&1>$&&0<E&&1>E)return!0;$=!0}}return!!$&&(f=new u.l,g=new u.l,b=new u.l,x=new u.l,p=new u.l,r.A(f),n.A(g),o.ns(g,f,l)?(b.L(f),b.X(1e3*l,1e3*l),x.L(g),x.X(1e3*l,1e3*l),p.L(b),p.Fa(x),!(10<r.I()&&(r=u.Vd.clip(r,p,l,0),r.B())||10<n.I()&&(n=u.Vd.clip(n,p,l,0),n.B()))&&(l=u.cm.bn(r,n,l,"T********",c))):l=u.cm.bn(r,n,l,"T*****T**",c))},o.xI=function(r,n,l,c){var p=[!1],f=o.uI(r,n,l,p);return p[0]?f:(p=new u.l,n.A(p),p.X(1e3*l,1e3*l),!(10<r.I()&&(r=u.Vd.clip(r,p,l,0),r.B()))&&u.cm.aB(r,n,l,c))},o.vI=function(r,n,l){return u.jd.Zd(r,n,l)==1},o.CI=function(r,n,l){return u.jd.Zd(r,n,l)==2},o.lt=function(r,n,l){var c=new u.h;l*=l;for(var p=0;p<r.I();p++)if(r.D(p,c),u.h.zc(c,n)<=l)return!1;return!0},o.prototype.LE=function(r,n){return r=this.th[r],n=this.th[n],r.Om<n.Om||r.Om==n.Om&&(r.rw<n.rw||r.rw==n.rw&&(r.Mj<n.Mj||r.Mj==n.Mj&&(r.Ui<n.Ui||r.Ui==n.Ui&&r.wH<n.wH)))?-1:1},o}();u.vd=h}(q||(q={})),function(u){var k,v,h;(v=k||(k={}))[v.InteriorInterior=0]="InteriorInterior",v[v.InteriorBoundary=1]="InteriorBoundary",v[v.InteriorExterior=2]="InteriorExterior",v[v.BoundaryInterior=3]="BoundaryInterior",v[v.BoundaryBoundary=4]="BoundaryBoundary",v[v.BoundaryExterior=5]="BoundaryExterior",v[v.ExteriorInterior=6]="ExteriorInterior",v[v.ExteriorBoundary=7]="ExteriorBoundary",v[v.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(h||(h={})),k=function(){function o(){this.me=0,this.j=new u.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return o.tB=function(r,n,l,c,p){if(c.length!=9)throw u.i.ga("relation string length has to be 9 characters");for(var f=0;9>f;f++){var g=c.charAt(f);if(g!="*"&&g!="T"&&g!="F"&&g!="0"&&g!="1"&&g!="2")throw u.i.ga("relation string")}if((f=this.HR(c,r.Eb(),n.Eb()))!=0)return u.vd.uB(r,n,l,f,p);f=new u.l,r.A(f),g=new u.l,n.A(g);var b=new u.l;if(b.L(f),b.$b(g),l=u.ua.Xd(l,b,!1),r=this.RE(r,l),n=this.RE(n,l),r.B()||n.B())return this.pW(r,n,c);switch(f=n.K(),g=!1,r.K()){case 1736:switch(f){case 1736:g=this.st(r,n,l,c,p);break;case 1607:g=this.bn(r,n,l,c,p);break;case 33:g=this.rt(r,n,l,c);break;case 550:g=this.qt(r,n,l,c,p)}break;case 1607:switch(f){case 1736:g=this.bn(n,r,l,this.aq(c),p);break;case 1607:g=this.bB(r,n,l,c,p);break;case 33:g=this.ut(r,n,l,c,p);break;case 550:g=this.tt(r,n,l,c,p)}break;case 33:switch(f){case 1736:g=this.rt(n,r,l,this.aq(c));break;case 1607:g=this.ut(n,r,l,this.aq(c),p);break;case 33:g=this.VU(r,n,l,c);break;case 550:g=this.mt(n,r,l,this.aq(c))}break;case 550:switch(f){case 1736:g=this.qt(n,r,l,this.aq(c),p);break;case 1607:g=this.tt(n,r,l,this.aq(c),p);break;case 550:g=this.UA(r,n,l,c,p);break;case 33:g=this.mt(r,n,l,c)}break;default:g=!1}return g},o.st=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.sJ();var g=new u.l,b=new u.l;return r.A(g),n.A(b),c=!1,u.vd.fk(g,b,l)&&(f.Eu(r,n),c=!0),c||((g=u.vd.rc(r,n,!1))==4?(f.Eu(r,n),c=!0):g==1?(f.hy(n),c=!0):g==2&&(f.UD(r),c=!0)),c||(r=(c=new u.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.Dp(r,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.Uw=function(r,n,l,c){var p=new o;p.$i(),p.dj("T*****F**"),p.sJ();var f=new u.l,g=new u.l;r.A(f),n.A(g);var b=!1;return u.vd.fk(f,g,l)&&(p.Eu(r,n),b=!0),b||((f=u.vd.rc(r,n,!1))==4?(p.Eu(r,n),b=!0):f==1?(p.hy(n),b=!0):f==2&&(p.UD(r),b=!0)),b?this.hg(p.J,p.Yc):(r=(b=new u.hd).Ib(r),f=b.Ib(n),u.Vk.W(b,l,c,!1),l=b.Ke(f).ng(),b.Ip(0,!0,!0),u.tn.W(b,r,-1,!1,c),b.I(r)!=0&&(u.tn.W(b,f,-1,!1,c),p.gr(b,c),(n=b.I(f)==0)||(p.Dp(r,f),p.j.Wg(),f=this.hg(p.J,p.Yc))?(r=b.Ke(r),r=(b=new u.hd).Ib(r),f=b.Ib(l),p.gr(b,c),p.me=0,p.$i(),p.dj(n?"T*****F**":"******F**"),p.DB(),p.Dp(r,f),p.j.Wg(),this.hg(p.J,p.Yc)):f))},o.bn=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.DB();var g=new u.l,b=new u.l;return r.A(g),n.A(b),c=!1,u.vd.fk(g,b,l)&&(f.Fu(r,n),c=!0),c||((g=u.vd.rc(r,n,!1))==4?(f.Fu(r,n),c=!0):g==1&&(f.VD(n),c=!0)),c||(r=(c=new u.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.mh=f.j.Fp(),o.Lw(n,f.j,f.mh),f.Dp(r,n),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.aB=function(r,n,l,c){var p=new o;p.$i(),p.dj("T*****F**"),p.DB();var f=new u.l,g=new u.l;r.A(f),n.A(g);var b=!1;return u.vd.fk(f,g,l)&&(p.Fu(r,n),b=!0),b||((f=u.vd.rc(r,n,!1))==4?(p.Fu(r,n),b=!0):f==1&&(p.VD(n),b=!0)),b?this.hg(p.J,p.Yc):(r=(b=new u.hd).Ib(r),n=b.Ib(n),p.Yo(b,l,c),b.I(r)!=0&&(p.Dp(r,n),p.j.Wg(),this.hg(p.J,p.Yc)))},o.qt=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.tJ();var g=new u.l,b=new u.l;return r.A(g),n.A(b),c=!1,u.vd.fk(g,b,l)&&(f.Gu(r),c=!0),c||((g=u.vd.rc(r,n,!1))==4?(f.Gu(r),c=!0):g==1&&(f.uN(),c=!0)),c||(r=(c=new u.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.By(r,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.bB=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.$W(),c=new u.l;var g=new u.l;r.A(c),n.A(g);var b=!1;return u.vd.fk(c,g,l)&&(f.KG(r,n),b=!0),b||u.vd.rc(r,n,!1)!=4||(f.KG(r,n),b=!0),b||(r=(c=new u.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.$h=f.j.Fp(),f.mh=f.j.Fp(),o.Lw(r,f.j,f.$h),o.Lw(n,f.j,f.mh),f.Dp(r,n),f.j.Gp(f.$h),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.tt=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.HJ(),c=new u.l;var g=new u.l;r.A(c),n.A(g);var b=!1;return u.vd.fk(c,g,l)&&(f.Qz(r),b=!0),b||u.vd.rc(r,n,!1)!=4||(f.Qz(r),b=!0),b||(r=(c=new u.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.$h=f.j.Fp(),o.Lw(r,f.j,f.$h),f.By(r,n),f.j.Gp(f.$h),f.j.Wg()),o.hg(f.J,f.Yc)},o.UA=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.MJ(),c=new u.l;var g=new u.l;r.A(c),n.A(g);var b=!1;return u.vd.fk(c,g,l)&&(f.tI(),b=!0),b||(r=(c=new u.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.By(r,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.rt=function(r,n,l,c){var p=new o;p.$i(),p.dj(c),p.tJ();var f=new u.l;r.A(f),n=n.D();var g=!1;return u.vd.Tw(n,f,l)&&(p.Gu(r),g=!0),g||((l=u.jd.Zd(r,n,l))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):l==2?(p.J[6]=-1,r.He()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,l=new u.l,r.A(l),p.J[2]=l.da()==0&&l.S()==0?-1:1)):p.Gu(r)),this.hg(p.J,c)},o.ut=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.HJ();var g=new u.l;r.A(g),c=n.D();var b=!1;if(u.vd.Tw(c,g,l)&&(f.Qz(r),b=!0),!b){g=null;var x=b=!1;(f.fa[0]||f.fa[6])&&(u.vd.Tz(r,c,l)?(f.fa[0]&&(g=u.si.im(r,p),x=!u.vd.lt(g,c,l),b=!0,f.J[0]=x?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.fa[3]&&(g!=null&&g.B()?f.J[3]=-1:(b||(g==null&&(g=u.si.im(r,p)),x=!u.vd.lt(g,c,l),b=!0),f.J[3]=x?0:-1)),f.fa[5]&&(g!=null&&g.B()?f.J[5]=-1:b&&!x?f.J[5]=0:(g==null&&(g=u.si.im(r,p)),p=u.vd.Pw(g,n,l),f.J[5]=p?-1:0)),f.fa[2]&&(r.Rb()!=0?f.J[2]=1:((p=new u.ee(r.description)).Gd(r,0,r.I()),r=u.vd.Pw(p,n,l),f.J[2]=r?-1:0))}return this.hg(f.J,f.Yc)},o.mt=function(r,n,l,c){var p=new o;p.$i(),p.dj(c),p.MJ();var f=new u.l;r.A(f),n=n.D();var g=!1;if(u.vd.Tw(n,f,l)&&(p.tI(),g=!0),!g){f=!1,g=!0,l*=l;for(var b=0;b<r.I();b++){var x=r.Oa(b);if(u.h.zc(x,n)<=l?f=!0:g=!1,f&&!g)break}f?(p.J[0]=0,p.J[2]=g?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.hg(p.J,c)},o.VU=function(r,n,l,c){r=r.D(),n=n.D();for(var p=[],f=0;9>f;f++)p[f]=-1;return u.h.zc(r,n)<=l*l?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.hg(p,c)},o.hg=function(r,n){for(var l=0;9>l;l++)switch(n.charAt(l)){case"T":if(r[l]==-1)return!1;break;case"F":if(r[l]!=-1)return!1;break;case"0":if(r[l]!=0)return!1;break;case"1":if(r[l]!=1)return!1;break;case"2":if(r[l]!=2)return!1}return!0},o.pW=function(r,n,l){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.hg(c,l)}return p=!1,r.B()&&(r=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=r.K(),u.ba.Ic(n)?n==1736?r.He()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new u.l,r.A(n),c[2]=n.da()==0&&n.S()==0?0:1):(n=r.Rb()!=0,c[2]=n?1:0,c[5]=u.si.cq(r)?0:-1):(c[2]=0,c[5]=-1),p&&this.qK(c),this.hg(c,l)},o.HR=function(r,n,l){return o.ZP(r)?3:o.PP(r)?4:o.ZX(r,n,l)?8:o.xP(r,n,l)?16:o.$O(r)?1:o.zU(r,n,l)?32:0},o.ZP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.PP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.ZX=function(r,n,l){return(n!=0||l!=0)&&((n!=2||l!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||n==1&&l==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||l!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},o.xP=function(r,n,l){return n>l?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":n==1&&l==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.$O=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.zU=function(r,n,l){if(n==l){if(n!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},o.Lw=function(r,n,l){r=n.Ma(r);for(var c=n.Oe;c!=-1;c=n.Tf(c))if(n.yd(c)&r){var p=n.Je(c);if(p==-1)n.pn(c,l,0);else{var f=p,g=0;do n.fh(f)&r&&g++,f=n.kc(n.ya(f));while(f!=p);n.pn(c,l,g)}}},o.aq=function(r){var n=""+r.charAt(0);return n+=r.charAt(3),n+=r.charAt(6),n+=r.charAt(1),n+=r.charAt(4),n+=r.charAt(7),n+=r.charAt(2),(n+=r.charAt(5))+r.charAt(8)},o.prototype.$i=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.$a[r]=-2},o.qK=function(r){var n=r[1],l=r[2],c=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=n,r[6]=l,r[7]=c},o.prototype.dj=function(r){for(this.Yc=r,r=0;9>r;r++)this.Yc.charAt(r)!="*"?(this.fa[r]=!0,this.me++):this.fa[r]=!1},o.prototype.PJ=function(){for(var r=0;9>r;r++)this.fa[r]&&this.J[r]==-2&&(this.J[r]=-1,this.fa[r]=!1)},o.prototype.qc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.fa[r]=!1,this.me--,!0):this.Yc.charAt(r)!="T"&&this.Yc.charAt(r)!="F"?!(this.J[r]<this.$a[r])&&(this.fa[r]=!1,this.me--,!0):(this.fa[r]=!1,this.me--,!0))},o.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.sN=function(r,n,l){var c=!0;return this.fa[0]&&(this.xS(r,n,l),c=c&&this.qc(0)),this.fa[1]&&(this.nG(r,n,1),c=c&&this.qc(1)),this.fa[2]&&(this.oG(r,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.nG(r,l,3),c=c&&this.qc(3)),this.fa[4]&&(this.wN(r,n,l),c=c&&this.qc(4)),this.fa[5]&&(this.$D(r,l,5),c=c&&this.qc(5)),this.fa[6]&&(this.oG(r,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.$D(r,n,7),c=c&&this.qc(7)),c},o.prototype.Eu=function(r,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(n,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},o.prototype.Hr=function(r,n,l,c,p){n==-1&&c==-1||((l!="T"&&l!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&r.He()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(l=new u.l,r.A(l),this.J[n]=l.da()==0&&l.S()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.hy=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(r,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},o.prototype.UD=function(r){this.hy(r),o.qK(this.J)},o.prototype.Fu=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var l=this.Yc.charAt(6);l=l=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0}this.fa[7]&&(n=u.si.cq(n),this.J[7]=n?0:-1),this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.VD=function(r){if(this.fa[0]){var n=this.Yc.charAt(0);n=n=="T"||n=="F"||r.Rb()!=0,this.J[0]=n?1:0}this.fa[1]&&(r=u.si.cq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Gu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.KG=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var l=this.Yc.charAt(2);l=l=="T"||l=="F"||r.Rb()!=0,this.J[2]=l?1:0}this.fa[5]&&(r=u.si.cq(r),this.J[5]=r?0:-1),this.fa[6]&&(l=(l=this.Yc.charAt(6))=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0),this.fa[7]&&(n=u.si.cq(n),this.J[7]=n?0:-1)},o.prototype.Qz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var n=this.Yc.charAt(2);n=n=="T"||n=="F"||r.Rb()!=0,this.J[2]=n?1:0}this.fa[5]&&(r=u.si.cq(r),this.J[5]=r?0:-1),this.J[6]=0},o.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.tN=function(r,n,l){var c=!0;return this.fa[0]&&(this.yS(r,n),c=c&&this.qc(0)),this.fa[1]&&(this.uS(r,n,l,this.mh),c=c&&this.qc(1)),this.fa[2]&&(this.vS(r,n),c=c&&this.qc(2)),this.fa[3]&&(this.AN(r,n,l,this.mh),c=c&&this.qc(3)),this.fa[4]&&(this.xN(r,n,l,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.yN(r,n,l),c=c&&this.qc(5)),this.fa[6]&&(this.gQ(r,n),c=c&&this.qc(6)),this.fa[7]&&(this.fQ(r,n,l,this.mh),c=c&&this.qc(7)),c},o.prototype.hT=function(r,n,l){var c=!0;return this.fa[0]&&(this.BS(r,n,l,this.$h,this.mh),c=c&&this.qc(0)),this.fa[1]&&(this.pG(r,n,l,this.$h,this.mh,1),c=c&&this.qc(1)),this.fa[2]&&(this.qG(r,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.pG(r,l,n,this.mh,this.$h,3),c=c&&this.qc(3)),this.fa[4]&&(this.CN(r,n,l,this.$h,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.aE(r,l,this.$h,5),c=c&&this.qc(5)),this.fa[6]&&(this.qG(r,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.aE(r,n,this.mh,7),c=c&&this.qc(7)),c},o.prototype.WD=function(r,n,l){var c=!0;return this.fa[0]&&(this.zS(r,n),c=c&&this.qc(0)),this.fa[2]&&(this.wS(r,n),c=c&&this.qc(2)),this.fa[3]&&(this.BN(r,n,l),c=c&&this.qc(3)),this.fa[5]&&(this.zN(r,n),c=c&&this.qc(5)),this.fa[6]&&(this.hQ(r,n),c=c&&this.qc(6)),c},o.prototype.LG=function(r,n,l){var c=!0;return this.fa[0]&&(this.CS(r,n,l,this.$h),c=c&&this.qc(0)),this.fa[2]&&(this.AS(r,l),c=c&&this.qc(2)),this.fa[3]&&(this.EN(r,n,l,this.$h),c=c&&this.qc(3)),this.fa[5]&&(this.DN(r,n,l,this.$h),c=c&&this.qc(5)),this.fa[6]&&(this.iQ(r,n,l),c=c&&this.qc(6)),c},o.prototype.UU=function(r,n,l){var c=!0;return this.fa[0]&&(this.DS(r,n,l),c=c&&this.qc(0)),this.fa[2]&&(this.rG(r,n,l,2),c=c&&this.qc(2)),this.fa[6]&&(this.rG(r,l,n,6),c=c&&this.qc(6)),c},o.prototype.xS=function(r,n,l){this.J[0]!=2&&(r=this.j.af(r))&n&&r&l&&(this.J[0]=2)},o.prototype.nG=function(r,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(r));this.j.af(r)&n&&c&n&&(this.J[l]=1)}},o.prototype.oG=function(r,n,l,c){this.J[c]!=2&&(r=this.j.af(r))&n&&!(r&l)&&(this.J[c]=2)},o.prototype.wN=function(r,n,l){if(this.J[4]!=1){var c=this.j.fh(r);c&n&&c&l?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.yd(this.j.vf(r)))&n&&r&l&&(this.J[4]=0)}},o.prototype.$D=function(r,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(r));!(this.j.af(r)&n)&&!(c&n)&&(this.J[l]=1)}},o.prototype.yS=function(r,n){if(this.J[0]!=1){var l=this.j.af(this.j.ya(r));this.j.af(r)&n&&l&n&&(this.J[0]=1)}},o.prototype.uS=function(r,n,l,c){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r),f=this.j.yd(p);!(f&n)&&this.j.af(r)&n&&(r=this.j.og(p,c),f&l&&r%2!=0&&(this.J[1]=0))}},o.prototype.vS=function(r,n){this.J[2]!=2&&this.j.fh(r)&n&&(this.J[2]=2)},o.prototype.AN=function(r,n,l,c){if(this.J[3]!=1){var p=this.j.fh(r);p&n&&p&l?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(p=this.j.vf(r),(r=this.j.yd(p))&n&&(n=this.j.og(p,c),r&l&&n%2==0&&(this.J[3]=0)))}},o.prototype.xN=function(r,n,l,c){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r);(r=this.j.yd(p))&n&&(n=this.j.og(p,c),r&l&&n%2!=0&&(this.J[4]=0))}},o.prototype.yN=function(r,n,l){this.J[5]!=1&&(r=this.j.fh(r))&n&&!(r&l)&&(this.J[5]=1)},o.prototype.gQ=function(r,n){if(this.J[6]!=1){var l=this.j.af(this.j.ya(r));!(this.j.af(r)&n)&&!(l&n)&&(this.J[6]=1)}},o.prototype.fQ=function(r,n,l,c){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r),f=this.j.yd(p);!(f&n)&&!(this.j.af(r)&n)&&(r=this.j.og(p,c),f&l&&r%2!=0&&(this.J[7]=0))}},o.prototype.BS=function(r,n,l,c,p){if(this.J[0]!=1){var f=this.j.fh(r);f&n&&f&l?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.vf(r),(f=this.j.yd(r))&n&&f&l&&(n=this.j.og(r,c),p=this.j.og(r,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.pG=function(r,n,l,c,p,f){if(this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){r=this.j.vf(r);var g=this.j.yd(r);g&n&&g&l&&(n=this.j.og(r,c),p=this.j.og(r,p),n%2==0&&p%2!=0&&(this.J[f]=0))}},o.prototype.qG=function(r,n,l,c){this.J[c]!=1&&(r=this.j.fh(r))&n&&!(r&l)&&(this.J[c]=1)},o.prototype.CN=function(r,n,l,c,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){r=this.j.vf(r);var f=this.j.yd(r);f&n&&f&l&&(n=this.j.og(r,c),p=this.j.og(r,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.aE=function(r,n,l,c){this.J[c]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.vf(r),!(this.j.yd(r)&n)&&this.j.og(r,l)%2!=0&&(this.J[c]=0))},o.prototype.zS=function(r,n){this.J[0]!=0&&!(this.j.yd(r)&n)&&this.j.jk(this.j.Yy(r))&n&&(this.J[0]=0)},o.prototype.wS=function(r,n){this.J[2]!=2&&this.j.yd(r)&n&&(this.J[2]=2)},o.prototype.BN=function(r,n,l){this.J[3]!=0&&(r=this.j.yd(r))&n&&r&l&&(this.J[3]=0)},o.prototype.zN=function(r,n){this.J[5]!=1&&this.j.yd(r)&n&&(this.J[5]=1)},o.prototype.hQ=function(r,n){this.J[6]!=0&&!(this.j.yd(r)&n)&&!(this.j.jk(this.j.Yy(r))&n)&&(this.J[6]=0)},o.prototype.CS=function(r,n,l,c){if(this.J[0]!=0){var p=this.j.yd(r);p&n&&p&l&&this.j.og(r,c)%2==0&&(this.J[0]=0)}},o.prototype.AS=function(r,n){this.J[2]!=1&&(this.j.Je(r)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(r)&n)&&(this.J[2]=0))},o.prototype.EN=function(r,n,l,c){if(this.J[3]!=0){var p=this.j.yd(r);p&n&&p&l&&this.j.og(r,c)%2!=0&&(this.J[3]=0)}},o.prototype.DN=function(r,n,l,c){if(this.J[5]!=0){var p=this.j.yd(r);p&n&&!(p&l)&&this.j.og(r,c)%2!=0&&(this.J[5]=0)}},o.prototype.iQ=function(r,n,l){this.J[6]!=0&&!((r=this.j.yd(r))&n)&&r&l&&(this.J[6]=0)},o.prototype.DS=function(r,n,l){this.J[0]!=0&&(r=this.j.yd(r))&n&&r&l&&(this.J[0]=0)},o.prototype.rG=function(r,n,l,c){this.J[c]!=0&&(r=this.j.yd(r))&n&&!(r&l)&&(this.J[c]=0)},o.prototype.Dp=function(r,n){var l=!1;r=this.j.Ma(r),n=this.j.Ma(n),this.Wi=this.j.bh();for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){var p=this.j.Je(c);if(p==-1){if(this.Um!=-1)switch(this.Um){case 3:l=this.WD(c,r,n);break;case 4:l=this.LG(c,r,n);break;default:throw u.i.ga("internal error")}}else{var f=p;do{var g=f;if(this.j.Bb(g,this.Wi)!=1)do{switch(this.xw){case 0:l=this.sN(g,r,n);break;case 1:l=this.tN(g,r,n);break;case 2:l=this.hT(g,r,n);break;default:throw u.i.ga("internal error")}if(l)break;this.j.Kb(g,this.Wi,1),g=this.j.kc(g)}while(g!=f&&!l);if(l)break;f=this.j.kc(this.j.ya(g))}while(f!=p);if(l)break}}l||this.PJ(),this.j.Lg(this.Wi)},o.prototype.By=function(r,n){var l=!1;r=this.j.Ma(r),n=this.j.Ma(n);for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){switch(this.Um){case 3:l=this.WD(c,r,n);break;case 4:l=this.LG(c,r,n);break;case 5:l=this.UU(c,r,n);break;default:throw u.i.Ra()}if(l)break}l||this.PJ()},o.prototype.gr=function(r,n){this.j.fr(r,n)},o.prototype.Yo=function(r,n,l){this.TP(r,n,l),this.gr(r,l)},o.prototype.TP=function(r,n,l){for(u.Vk.W(r,n,l,!1),r.Ip(0,!0,!0),n=r.md;n!=-1;n=r.ve(n))r.jc(n)==1736&&u.tn.W(r,n,-1,!1,l)},o.RE=function(r,n){var l=r.K();return u.ba.zd(l)?((n=new u.Ua(r.description)).pc(r,!0),n):l==197?(l=new u.l,r.A(l),l.da()<=n&&l.S()<=n?(n=new u.Ta(r.description),r.tf(n),n):l.da()<=n||l.S()<=n?(n=new u.Ua(r.description),l=new u.Ta,r.If(0,l),n.nf(l),r.If(2,l),n.lineTo(l),n):((n=new u.Ea(r.description)).bd(r,!1),n)):r},o}(),u.cm=k}(q||(q={})),function(u){var k=function(){function o(r){this.Gm=new u.ja(0),this.fw=new u.ja(0),this.xt=new u.h,this.yt=new u.h,this.g=r,this.Js=-1}return o.prototype.cc=function(r){return this.g.cc(this.uz(r))},o.prototype.Dv=function(r){var n=this.dz(r);if(r=this.CF(r),this.g.Na(n)==r){var l=n;n=r,r=l}return this.g.Hc(n,this.xt),this.g.Hc(r,this.yt),this.xt.y<this.yt.y},o.prototype.uz=function(r){var n=this.dz(r);return r=this.CF(r),this.g.V(n)==r?n:r},o.prototype.dz=function(r){return this.Gm.get(r)},o.prototype.CF=function(r){return this.fw.get(r)},o.prototype.mF=function(r){this.Gm.set(r,this.Js),this.Js=r},o.prototype.iI=function(r){if(this.Js!=-1){var n=this.Js;return this.Js=this.Gm.get(n),this.Gm.set(n,r),this.fw.set(n,this.g.V(r)),n}return this.Gm==null&&(this.Gm=new u.ja(0),this.fw=new u.ja(0)),n=this.Gm.size,this.Gm.add(r),this.fw.add(this.g.V(r)),n},o.prototype.mz=function(r){return this.g.cd(this.dz(r))},o}();u.uY=k;var v=function(){function o(r){this.Ce=r,this.je=new u.zb,this.Pm=new u.zb,this.xH=0,this.Co=null,this.tA=-1}return o.prototype.compare=function(r,n,l){l=r.ka(l);var c=this.Ce.hb;if(this.tA==n)var p=this.xH;else this.Co=c.cc(n),this.Co==null?((r=c.g).fd(c.uz(n),this.je),this.Co=this.je,p=this.je.Me(this.Ce.Ah,0)):p=this.Co.Me(this.Ce.Ah,0),this.xH=p,this.tA=n;if((r=c.cc(l))==null){(r=c.g).fd(c.uz(l),this.Pm),r=this.Pm;var f=this.Pm.Me(this.Ce.Ah,0)}else f=r.Me(this.Ce.Ah,0);return p==f&&(n=c.Dv(n),l=c.Dv(l),(n=.5*((l=Math.min(n?this.Co.ma:this.Co.oa,l?r.ma:r.oa))+this.Ce.Ah))==this.Ce.Ah&&(n=l),p=this.Co.Me(n,0),f=r.Me(n,0)),p<f?-1:p>f?1:0},o.prototype.reset=function(){this.tA=-1},o}(),h=function(){function o(){this.Ym=this.Il=null,this.fb=new u.$j,this.fb.MP(),this.ae=new v(this),this.fb.Xo(this.ae)}return o.prototype.CQ=function(){var r=!1;if(this.hw&&(r=this.DQ()),this.g.ea(this.Y)==1){var n=this.g.Ob(this.Y);return r=this.g.qz(n),this.g.KB(n,!0),0>r&&(r=this.g.Ya(n),this.g.kJ(r),this.g.Yg(n,this.g.Na(r)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),n=this.g.Ob(this.Y);n!=-1;n=this.g.Sb(n))this.g.ir(n,this.Gl,0),this.g.ir(n,this.yo,-1);n=new u.ja(0),this.Ah=NaN;var l=new u.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var c=this.Il.sc(this.Il.ke);c!=-1;c=this.Il.lb(c)){var p=this.Il.getData(c);if(this.g.Hc(p,l),l.y!=this.Ah&&n.size!=0&&(r=this.vt(n)||r,this.ae.reset(),n.clear(!1)),n.add(p),this.Ah=l.y,this.ft==0)break}for(0<this.ft&&(r=this.vt(n)||r,n.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),n=this.g.Ob(this.Y);n!=-1;)if(this.g.uj(n,this.Gl)==3){for(this.g.KB(n,!0),l=n,n=this.g.uj(n,this.yo);n!=-1;)c=this.g.uj(n,this.yo),this.g.UT(this.Y,this.g.Sb(l),n),l=n,n=c;n=this.g.Sb(l)}else this.g.KB(n,!1),n=this.g.Sb(n);return this.g.xB(this.Gl),this.g.xB(this.yo),r},o.prototype.vt=function(r){return this.VV(r)},o.prototype.VV=function(r){var n=!1;this.hb==null&&(this.hb=new k(this.g)),this.Ym==null?(this.Ym=new u.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(r);for(var l=0,c=r.size;l<c;l++){var p=r.get(l);p!=-1&&this.jG(p,-1)}for(l=0;l<this.Ym.size&&0<this.ft;l++)if(r=this.Ym.get(l),p=this.hb.mz(this.fb.ka(r)),c=-1,this.g.uj(p,this.Gl)==0){p=this.fb.xe(r);for(var f,g=r;p!=-1;){var b=this.fb.ka(p),x=this.hb.mz(b),$=this.g.uj(x,this.Gl);if($!=0){c=x;break}g=p,p=this.fb.xe(p)}p==-1?(f=!0,p=g):(b=this.fb.ka(p),f=this.hb.Dv(b),p=this.fb.lb(p),f=!f);do{if(b=this.fb.ka(p),x=this.hb.mz(b),($=this.g.uj(x,this.Gl))==0&&(f!=this.hb.Dv(b)&&(n=this.g.Ya(x),this.g.kJ(n),this.g.Yg(x,this.g.Na(n)),n=!0),this.g.ir(x,this.Gl,f?3:2),f||(g=this.g.uj(c,this.yo),this.g.ir(c,this.yo,x),this.g.ir(x,this.yo,g)),this.ft--,this.ft==0))return n;c=x,g=p,p=this.fb.lb(p),f=!f}while(g!=r)}return n},o.prototype.UV=function(r){for(var n=0,l=r.size;n<l;n++){var c=r.get(n),p=this.g.Qa(c,this.to),f=this.g.Qa(c,this.Ts);if(p!=-1){var g=this.fb.ka(p);this.hb.mF(g),this.g.Sa(c,this.to,-1)}f!=-1&&(g=this.fb.ka(f),this.hb.mF(g),this.g.Sa(c,this.Ts,-1)),g=-1,p!=-1&&f!=-1?(this.fb.wd(p,-1),this.fb.wd(f,-1),r.set(n,-1)):g=p!=-1?p:f,g!=-1&&(this.jG(c,g)||this.fb.wd(g,-1),r.set(n,-1))}},o.prototype.jG=function(r,n){var l=new u.h,c=new u.h;this.g.Hc(r,l);var p=this.g.V(r);this.g.Hc(p,c);var f=!1;if(l.y<c.y){f=!0;var g=this.hb.iI(r);if(n==-1)var b=this.fb.addElement(g,-1);else b=n,this.fb.Uj(b,g);(g=this.g.Qa(p,this.to))==-1?this.g.Sa(p,this.to,b):this.g.Sa(p,this.Ts,b),p=this.g.cd(r),this.g.uj(p,this.Gl)==0&&this.Ym.add(b)}return p=this.g.Na(r),this.g.Hc(p,c),l.y<c.y&&(f=!0,g=this.hb.iI(p),n==-1?b=this.fb.addElement(g,-1):(b=n,this.fb.Uj(b,g)),(g=this.g.Qa(p,this.to))==-1?this.g.Sa(p,this.to,b):this.g.Sa(p,this.Ts,b),p=this.g.cd(r),this.g.uj(p,this.Gl)==0&&this.Ym.add(b)),f},o.W=function(r,n,l,c){var p=new o;return p.g=r,p.Y=n,p.Il=l,p.hw=c,p.CQ()},o.prototype.DQ=function(){var r=new u.ja(0),n=new u.ja(0),l=-1,c=-1,p=new u.h;p.Sc();for(var f=-1,g=-1,b=-1,x=new u.h,$=this.Il.sc(this.Il.ke);$!=-1;$=this.Il.lb($)){var E=this.Il.getData($);this.g.Hc(E,x);var O=this.g.cd(E);p.rb(x)&&g==O?(c==-1&&(l=this.g.Fy(),c=this.g.Hd()),b==-1&&(b=n.size,this.g.Sa(f,c,b),n.add(1),this.g.uj(O,l)==-1&&(this.g.ir(O,l,f),r.add(O))),this.g.Sa(E,c,b),n.XW(n.Gc()+1)):(b=-1,p.N(x)),f=E,g=O}if(r.size==0)return!1;for(p=new u.ja(0),f=new u.ja(0),g=0,b=r.size;g<b;g++){O=r.get(g);var C=this.g.uj(O,l);for(E=this.g.Qa(C,c),p.clear(!1),f.clear(!1),p.add(C),f.add(E),E=this.g.V(C);E!=C;E=this.g.V(E)){var N=E;if((x=this.g.Qa(N,c))!=-1)if(f.size==0)f.add(x),p.add(N);else if(f.Gc()==x){$=p.Gc();var D=this.g.V($);C=this.g.V(N),this.g.Cc($,C),this.g.Dc(C,$),this.g.Cc(N,D),this.g.Dc(D,N),N=[!1],D=this.g.iG(this.Y,D,this.g.Ya(O),N),this.g.Sa(E,c,-1),N[0]&&this.g.Kf(O,C),E=this.g.Ka(O),E-=C=this.g.Ka(D),this.g.Xj(O,E),n.set(x,n.get(x)-1),n.get(x)==1&&(n.set(x,0),f.Jf(),p.Jf()),E=C=$}else p.add(E),f.add(x)}}return this.g.xB(l),this.g.Ud(c),!0},o}();u.RL=h}(q||(q={})),function(u){var k=function(){function v(){}return v.prototype.jg=function(){this.KA=this.tb=null},v.prototype.get=function(){return this.KA},v.prototype.set=function(h){if(this.KA=h,h!=null)throw h.K()==322&&(this.tb=h),u.i.Ra()},v.prototype.create=function(h){if(h!=322)throw u.i.ga("Not Implemented");this.Qr()},v.prototype.Qr=function(){this.tb==null&&(this.tb=new u.zb),this.KA=this.tb},v}();u.jg=k}(q||(q={})),function(u){(u=u.SL||(u.SL={}))[u.enumLineSeg=1]="enumLineSeg",u[u.enumBezierSeg=2]="enumBezierSeg",u[u.enumArcSeg=4]="enumArcSeg",u[u.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",u[u.enumSegmentMask=7]="enumSegmentMask",u[u.enumDensified=8]="enumDensified"}(q||(q={})),function(u){var k=function(h){this.bj=h,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},v=function(){function h(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new u.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return h.prototype.rB=function(o){if(o!=null){for(var r=0,n=o.length;r<n;r++)this.mW(o[r]);o.length=0}},h.prototype.mW=function(o){o.bj=null,this.Kq.push(o)},h.prototype.Qw=function(o){if(this.Kq.length===0)var r=new k(o);else(r=this.Kq[this.Kq.length-1]).bj=o,--this.Kq.length;return r},h.prototype.NR=function(o,r){return o==0?this.bt[r]:this.Aw[r]},h.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new u.jg);var o=this.HA[this.Ew];return this.Ew++,o},h.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},h.prototype.Qo=function(o){this.oo.push(this.Qw(o))},h.prototype.ql=function(o){return o==0?this.bt.length:this.Aw.length},h.prototype.Xp=function(o,r){return this.NR(o,r).bj},h.prototype.Fa=function(o,r){if(this.oo.length!=2)throw u.i.Ra();this.ra=o;var n=u.mc.ox(.01*o),l=!1,c=this.oo[0],p=this.oo[1];if(r||5&c.bj.Br(p.bj,o,!0)){if(c.bj.K()==322){var f=c.bj;if(p.bj.K()==322){r=p.bj;var g=u.zb.Yx(f,r,null,this.Hq,this.Dk,o);if(g==0)throw u.zb.Yx(f,r,null,this.Hq,this.Dk,o),u.i.Ra();o=Array(9),u.P.bv(o,null);for(var b=0;b<g;b++){var x=this.Hq[b],$=this.Dk[b],E=c.nB,O=1;x==0?(E=c.oB,O=c.mC):x==1&&(E=c.mB,O=c.lC);var C=p.nB,N=1;$==0?(C=p.oB,N=p.mC):$==1&&(C=p.mB,N=p.lC);var D=new u.h;E==C?(E=new u.h,f.ic(x,E),x=new u.h,r.ic($,x),N/=$=O+N,u.mc.JG(E,x,N,D),u.h.zc(D,E)+u.h.zc(D,x)>n&&(l=!0)):E>C?(f.ic(x,D),x=new u.h,r.ic($,x),u.h.zc(D,x)>n&&(l=!0)):(r.ic($,D),E=new u.h,f.ic(x,E),u.h.zc(D,E)>n&&(l=!0)),o[b]=D}for(c=0,p=-1,b=0;b<=g;b++)(N=b<g?this.Hq[b]:1)!=c&&(n=this.WA(),f.dh(c,N,n),p!=-1&&n.get().Ec(o[p]),b!=g&&n.get().Rc(o[b]),c=N,this.bt.push(this.Qw(n.get()))),p=b;for(f=[0,0,0,0,0,0,0,0,0],b=0;b<g;b++)f[b]=b;for(1<g&&this.Dk[0]>this.Dk[1]&&(N=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=N,b=f[0],f[0]=f[1],f[1]=b),c=0,p=-1,b=0;b<=g;b++)(N=b<g?this.Dk[b]:1)!=c&&(n=this.WA(),r.dh(c,N,n),p!=-1&&(c=f[p],n.get().Ec(o[c])),b!=g&&(c=f[b],n.get().Rc(o[c])),c=N,this.Aw.push(this.Qw(n.get()))),p=b;return l}}throw u.i.Ra()}return!1},h.prototype.Fz=function(o,r,n){if(r.copyTo(this.Cf),this.oo.length!=1)throw u.i.Ra();this.ra=o;var l=this.oo[0];if(n||l.bj.tu(r.D(),o,!0)){if(l.bj.K()!=322)throw u.i.Ra();var c=(o=l.bj).ge(r.D(),!1);this.Hq[0]=c;var p=l.nB;for(n=1,c==0?(p=l.oB,n=l.mC):c==1&&(p=l.mB,n=l.lC),l=new u.h,p==0?(p=new u.h,o.ic(c,p),r=r.D(),u.mc.JG(p,r,1/(n+1),l)):0<p?(l=new u.h,o.ic(c,l)):l=r.D(),n=0,c=-1,p=0;1>=p;p++){if((r=1>p?this.Hq[p]:1)!=n){var f=this.WA();o.dh(n,r,f),c!=-1&&f.get().Ec(l),p!=1&&f.get().Rc(l),n=r,this.bt.push(this.Qw(f.get()))}c=p}this.Cf.Db(l)}},h}();u.OC=v}(q||(q={})),function(u){var k=function(){function v(h){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=h,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new u.h}return v.prototype.wW=function(h){if(this.ib!=h.ib)throw u.i.Hb();this.Af=h.Af,this.Kd=h.Kd,this.gb=h.gb,this.El=h.El,this.cg=h.cg,this.Bm=h.Bm,this.tk=null},v.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw u.i.de();this.Kd++}return this.tk},v.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw u.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},v.prototype.xW=function(){this.Af=-1,this.Kd=0},v.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},v.prototype.Wb=function(h,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.ea()){var r=this.DM();if(h>=r&&h<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=h-r)}o=0<=o&&o<this.ib.ea()&&h>=this.ib.Ca(o)&&h<this.ib.Wc(o)?o:this.ib.nz(h),this.El=o+1,this.gb=o,this.Af=-1,this.Kd=h-this.ib.Ca(o),this.cg=this.Vx(o),this.ib.Ca(this.gb),this.ib.ec(this.gb)},v.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},v.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},v.prototype.Vx=function(h){if(this.ib.Bc())return 0;var o=1;return this.ib.ec(h)&&(o=0),this.ib.Ka(h)-o},v.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},v.prototype.EB=function(){this.Bm=!0},v.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},v.prototype.DM=function(){return this.ib.Ca(this.gb)},v.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},v.prototype.xm=function(){return this.Af==0},v.prototype.Sn=function(){return this.Af==this.cg-1},v.prototype.Ia=function(){return this.Kd<this.cg},v.prototype.zz=function(){return 0<this.Kd},v.prototype.Qf=function(){var h=new v(this.ib);return h.Af=this.Af,h.Kd=this.Kd,h.cg=this.cg,h.gb=this.gb,h.El=this.El,h.ib=this.ib,h.Bm=this.Bm,h},v.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw u.i.de();this.Af=this.Kd;var h=this.xb();this.ib.oc();var o=this.ib.Se,r=1;switch(o!=null&&(r=7&o.read(h)),o=this.ib.description,r){case 1:this.tb==null&&(this.tb=new u.zb),this.tk=this.tb;break;case 2:throw u.i.ga("internal error");default:throw u.i.Ra()}this.tk.Pf(o),r=this.kk(),this.ib.Hc(h,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(r,this.Fs),this.tk.Rc(this.Fs);for(var n=1,l=o.Ba;n<l;n++)for(var c=o.ld(n),p=u.sa.Wa(c),f=0;f<p;f++){var g=this.ib.Vc(c,h,f);this.tk.TB(c,f,g),g=this.ib.Vc(c,r,f),this.tk.JB(c,f,g)}},v.prototype.VS=function(){return this.gb==this.ib.ea()-1},v.prototype.Rn=function(){var h=this.ib.QR();return h!=null&&(7&h.read(this.Af))!=1},v}();u.TL=k}(q||(q={})),function(u){var k=function(){function v(h){h instanceof u.ba?(this.sH=h,this.za=-1,this.Gi=1):(this.qT=h.slice(0),this.za=-1,this.Gi=h.length)}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},v.prototype.re=function(){},v}();u.$c=k}(q||(q={})),function(u){var k=function(){this.next=null},v=function(){function h(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return h.prototype.wX=function(o,r,n){this.ri=o,this.rl=r,this.Lh=this.Yl=null,this.Vq=0,this.qy=n,this.jn==null&&(this.jn=u.P.mg(384,0)),this.iK()},h.prototype.S=function(){return this.ri},h.prototype.da=function(){return this.rl},h.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},h.prototype.iK=function(){if(0<this.Vq){for(var o=0;o<this.rl;o++){for(var r=this.Yl[o];r!=null;){var n=r;r=r.next,n.next=null}this.Yl[o]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},h.prototype.dJ=function(o){for(this.fF=o==h.Bx,o=this.Nw;o<=this.Mw;o++)this.nN(),this.gN(o),this.UP();this.iK()},h.prototype.fy=function(o,r,n,l){if(r!=l){var c=1;if(r>l&&(c=o,o=n,n=c,c=r,r=l,l=c,c=-1),!(0>l||r>=this.rl)){0>o&&0>n?n=o=-1:o>=this.ri&&n>=this.ri&&(n=o=this.ri);var p=(n-o)/(l-r);l>this.rl&&(n=p*((l=this.rl)-r)+o),0>r&&(o=p*(0-r)+o,r=0);var f=Math.max(this.ri+1,8388607);-8388607>o?(r=(0-o)/p+r,o=0):o>f&&(r=(this.ri-o)/p+r,o=this.ri),-8388607>n?l=(0-o)/p+r:n>f&&(l=(this.ri-o)/p+r),(r=u.P.truncate(r))!=(l=u.P.truncate(l))&&((n=new k).x=u.P.truncate(4294967296*o),n.y=r,n.H=l,n.RP=u.P.truncate(4294967296*p),n.dir=c,this.Yl==null&&(this.Yl=u.P.mg(this.rl,null)),n.next=this.Yl[n.y],this.Yl[n.y]=n,n.y<this.Nw&&(this.Nw=n.y),n.H>this.Mw&&(this.Mw=n.H),this.Vq++)}}},h.prototype.nN=function(){if(this.Lh!=null){for(var o=!1,r=null,n=this.Lh;n!=null;)if(n.y++,n.y==n.H){var l=n;n=n.next,r!=null?r.next=n:this.Lh=n,l.next=null}else n.x+=n.RP,r!=null&&r.x>n.x&&(o=!0),r=n,n=n.next;o&&(this.Lh=this.aK(this.Lh))}},h.prototype.gN=function(o){if(!(o>=this.rl)){var r=this.Yl[o];if(r!=null){this.Yl[o]=null,r=this.aK(r),this.Vq-=this.bK,o=this.Lh;for(var n=!0,l=r,c=null;o!=null&&l!=null;)o.x>l.x?(n&&(this.Lh=l),n=l.next,l.next=o,c!=null&&(c.next=l),c=l,l=n):(n=o.next,o.next=l,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Lh==null&&(this.Lh=r)}}},h.$J=function(o,r){return 0>o?0:o>r?r:o},h.prototype.UP=function(){if(this.Lh!=null){for(var o=0,r=this.Lh,n=u.P.truncate(u.P.SG(r.x)),l=r.next;l!=null;l=l.next)if(o=this.fF?1^o:o+l.dir,l.x>r.x){var c=u.P.truncate(u.P.SG(l.x));o!=0&&(r=h.$J(n,this.ri),(n=h.$J(c,this.ri))>r&&r<this.ri&&(this.jn[this.Ql++]=r,this.jn[this.Ql++]=n,this.jn[this.Ql++]=l.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),r=l,n=c}}},h.prototype.aK=function(o){for(var r=0,n=o;n!=null;n=n.next)r++;if(this.bK=r,r==1)return o;this.Lf==null?this.Lf=u.P.mg(Math.max(r,16),null):this.Lf.length<r&&(this.Lf=u.P.mg(Math.max(r,2*this.Lf.length),null));var l=0;for(n=o;n!=null;n=n.next)this.Lf[l++]=n;for(r==2?this.Lf[0].x>this.Lf[1].x&&(o=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=o):h.vN(this.Lf,r,function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0}),o=this.Lf[0],this.Lf[0]=null,n=o,l=1;l<r;l++)n.next=this.Lf[l],n=this.Lf[l],this.Lf[l]=null;return n.next=null,o},h.vN=function(o,r,n){if(r==o.length)o.sort(n);else{var l=o.slice(0,0),c=o.slice(r);r=o.slice(0,r).sort(n),o.length=0,o.push.apply(o,l.concat(r).concat(c))}},h.Bx=0,h}();u.Ox=v}(q||(q={})),function(u){var k=function(){function v(){}return v.prototype.wi=function(h,o){var r=this.g.Qa(h,this.Rq);if(this.Fl==r&&(this.Fl=this.pe.lb(this.Fl)),this.jo==r&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,r),this.dk(h),o&&(o=this.g.cd(h))!=-1&&this.g.Ya(o)==h){var n=this.g.V(h);if(n!=h){if((r=this.g.cd(n))==o)return void this.g.Kf(o,n);if((n=this.g.Na(h))!=h&&(r=this.g.cd(n))==o)return void this.g.Kf(o,n)}this.g.Kf(o,-1),this.g.Yg(o,-1)}},v.prototype.kD=function(){for(var h=!1,o=new u.h;;){this.Yh==null?(this.Yh=new u.ja(0),this.Bs=new u.ja(0),this.ye=new u.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var r=this.jo,n=0,l=!0;r!=this.Fl;){var c=this.pe.getData(r),p=new u.h;this.g.Hc(c,p),l&&(this.g.Hc(c,o),l=!1),p=this.g.Na(c);var f=this.g.V(c);this.g.Qa(p,this.Ag)!=-559038737&&(this.Yh.add(p),this.g.Sa(p,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),r=this.pe.lb(r)}if(2>this.Yh.size)break;var g=this;for(this.ye.Wd(0,this.ye.size,function(b,x){return g.kM(b,x)}),r=0,n=this.ye.size;r<n;r++)l=this.ye.get(r),l=this.Yh.get(l),this.g.Sa(l,this.Ag,r),p=new u.h,this.g.Hc(l,p);for(p=this.OM(o),r=0,n=this.ye.size;r<n;r++)(l=this.ye.get(r))!=-1&&(l=this.Yh.get(l),this.g.Sa(l,this.Ag,-1));if(!p)break;h=!0}return h},v.prototype.OM=function(h){for(var o=!1,r=!0;r;){r=!1;var n=0;this.ye.get(n)==-1&&(n=this.em(n));for(var l=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&l!=-1&&n!=l;c++){var f=this.ye.get(n);l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l);var g=this.g.V(f);this.g.Fv(g,h)||(g=this.g.Na(f));var b=this.g.V(l);this.g.Fv(b,h)||(b=this.g.Na(l));var x=this.ru(g,f),$=this.ru(b,l),E=x?this.g.Na(g):this.g.V(g),O=$?this.g.Na(b):this.g.V(b),C=!1;(this.up(g)||this.up(b)||this.up(f)||this.up(l)||this.up(E)||this.up(O))&&(C=!0),!C&&this.g.hq(f,l)&&(C=!0,this.oD(x,$,g,f,b,l)),!C&&this.g.hq(E,O)&&(C=!0,this.oD(!x,!$,g,E,b,O)),C&&(o=!0),r=r||C,n=this.em(n),l=this.em(n)}}if(!o)for(n=0,this.ye.get(n)==-1&&(n=this.em(n)),l=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&l!=-1&&n!=l;c++)f=this.ye.get(n),l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l),g=this.g.V(f),this.g.Fv(g,h)||(g=this.g.Na(f)),b=this.g.V(l),this.g.Fv(b,h)||(b=this.g.Na(l)),x=this.ru(g,f),$=this.ru(b,l),E=x?this.g.Na(g):this.g.V(g),O=$?this.g.Na(b):this.g.V(b),this.yM(x,$,f,g,E,l,b,O)&&(o=!0),n=this.em(n),l=this.em(n);return o},v.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new u.Hg().HU(this.hw,this.g,this.Y,this.od);var h=!1,o=!0;this.Ag=this.Rq=-1;var r=this.g.I(this.Y),n=new u.ja(0);n.Jb(r);for(var l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++)n.add(c),c=this.g.V(c);var g=this.g.ud.o,b=this.g.ud.Mf;this.g.wb.oc();var x=this.g.wb.Aa[0].o;for(n.Wd(0,r,function(E,O){var C=g[b*E],N=g[b*O],D=x[2*C];C=x[2*C+1];var z=x[2*N];return(D=C<(N=x[2*N+1])?-1:C>N?1:D<z?-1:D>z?1:0)==0&&(D=(E=g[b*E+3])<(O=g[b*O+3])?-1:E==O?0:1),D}),this.Rq=this.g.Hd(),this.pe=new u.lp,this.MA=this.pe.Rh(0),this.pe.hn(r),l=0;l<r;l++)c=n.get(l),p=this.pe.addElement(this.MA,c),this.g.Sa(c,this.Rq,p);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(h=!0);o;){o=!1,r=0,n=!1;do{n=!1,this.jo=-1,f=0,l=new u.h,p=new u.h;for(var $=this.pe.sc(this.MA);$!=-1;)c=this.pe.getData($),this.jo!=-1?(this.g.Hc(c,p),l.rb(p)?f++:(l.N(p),this.Fl=$,0<f&&(c=this.kD())&&(n=!0,this.Fl!=-1&&(c=this.pe.getData(this.Fl),this.g.Hc(c,l))),this.jo=$=this.Fl,f=0)):(this.jo=$,this.g.Hc(this.pe.getData($),l),f=0),$!=-1&&($=this.pe.lb($));if(this.Fl=-1,0<f&&(c=this.kD())&&(n=!0),10<r++)throw u.i.Ra();n&&this.BM(),this.YC()&&(n=!0),o=o||n&&!1,h=h||n}while(n)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),u.RL.W(this.g,this.Y,this.pe,this.hw)||h},v.prototype.ru=function(h,o){return this.g.V(o)!=h},v.prototype.yM=function(h,o,r,n,l,c,p,f){if(n==p)return this.dk(r),this.dk(c),!1;var g=this.g.Qa(r,this.Ag),b=this.g.Qa(l,this.Ag),x=this.g.Qa(c,this.Ag),$=this.g.Qa(f,this.Ag),E=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,E[0]=g,r[1]=0,E[1]=b,r[2]=1,E[2]=x,r[3]=1,E[3]=$,g=1;4>g;g++){for(b=E[g],x=r[g],$=g-1;0<=$&&E[$]>b;)E[$+1]=E[$],r[$+1]=r[$],$--;E[$+1]=b,r[$+1]=x}return E=0,r[0]!=0&&(E|=1),r[1]!=0&&(E|=2),r[2]!=0&&(E|=4),r[3]!=0&&(E|=8),(E==5||E==10)&&(h==o?h?(this.g.Cc(f,n),this.g.Dc(n,f),this.g.Cc(l,p),this.g.Dc(p,l)):(this.g.Dc(f,n),this.g.Cc(n,f),this.g.Dc(l,p),this.g.Cc(p,l)):h?(this.g.Dc(n,c),this.g.Cc(c,n),this.g.Dc(p,l),this.g.Cc(l,p)):(this.g.Cc(n,c),this.g.Dc(c,n),this.g.Cc(p,l),this.g.Dc(l,p)),!0)},v.prototype.oD=function(h,o,r,n,l,c){this.IY?this.QM():this.PM(h,o,r,n,l,c)},v.prototype.QM=function(){throw u.i.ga("not implemented.")},v.prototype.PM=function(h,o,r,n,l,c){if(h!=o)h?(this.g.Cc(r,l),this.g.Dc(l,r),this.g.Cc(c,n),this.g.Dc(n,c),this.xn(l,r),this.wi(l,!0),this.g.oi(l,!0),this.dk(r),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!1)):(this.g.Cc(l,r),this.g.Dc(r,l),this.g.Cc(n,c),this.g.Dc(c,n),this.xn(l,r),this.wi(l,!0),this.g.oi(l,!1),this.dk(r),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!0)),this.dk(n);else{var p=h?r:n,f=o?l:c;for(h=h?n:r,o=o?c:l,l=!1,this.g.Cc(p,f),this.g.Cc(f,p),this.g.Dc(h,o),this.g.Dc(o,h),c=o;c!=f;)r=this.g.Na(c),n=this.g.V(c),this.g.Dc(c,n),this.g.Cc(c,r),l=l||c==p,c=n;l||(r=this.g.Na(f),n=this.g.V(f),this.g.Dc(f,n),this.g.Cc(f,r)),this.xn(f,p),this.wi(f,!0),this.g.oi(f,!1),this.dk(p),this.xn(o,h),this.wi(o,!0),this.g.oi(o,!1),this.dk(h)}},v.prototype.YC=function(){for(var h=!1,o=this.g.Ob(this.Y);o!=-1;){for(var r=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l&&1<l;){var c=this.g.Na(r),p=this.g.V(r);this.g.hq(c,p)?(h=!0,this.wi(r,!1),this.g.qd(r,!0),this.wi(p,!1),this.g.qd(p,!0),r=c,n=0,l=this.g.Ka(o)):(r=p,n++)}if(2>this.g.Ka(o)){for(h=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++)this.wi(h,!1),h=this.g.V(h);o=this.g.ar(o),h=!0}else o=this.g.Sb(o)}return h},v.prototype.up=function(h){for(var o=!1;;){var r=this.g.V(h),n=this.g.Na(h);if(r==h)return this.wi(h,!0),this.g.oi(h,!1),!0;if(!this.g.hq(r,n)||(o=!0,this.dk(n),this.dk(r),this.wi(h,!0),this.g.oi(h,!1),this.xn(r,n),this.wi(r,!0),this.g.oi(r,!0),r==n))break;h=n}return o},v.prototype.BM=function(){for(var h=0,o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o)){var r=this.pe.getData(o);this.g.cj(r,-1)}for(var n=0,l=this.g.Ob(this.Y);l!=-1;)if((o=this.g.Ya(l))==-1||this.g.cd(o)!=-1)r=l,l=this.g.Sb(l),this.g.br(r);else{this.g.cj(o,l);var c=1;for(r=this.g.V(o);r!=o;r=this.g.V(r))this.g.cj(r,l),c++;this.g.fp(l,!1),this.g.Xj(l,c),this.g.Yg(l,this.g.Na(o)),n+=c,h++,l=this.g.Sb(l)}for(o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o))r=this.pe.getData(o),this.g.cd(r)==-1&&(l=this.g.iG(this.Y,r,r,null),n+=this.g.Ka(l),h++);for(this.g.Tl(this.Y,h),this.g.Vj(this.Y,n),h=0,n=this.g.md;n!=-1;n=this.g.ve(n))h+=this.g.I(n);this.g.XB(h)},v.prototype.em=function(h){for(var o=0,r=this.ye.size-1;o<r;o++)if(h=(h+1)%this.ye.size,this.ye.get(h)!=-1)return h;return-1},v.prototype.xn=function(h,o){var r=this.g.Qa(o,this.Rq),n=this.g.Qa(o,this.Ag);this.g.gC(h,o),this.g.Sa(o,this.Rq,r),this.g.Sa(o,this.Ag,n)},v.prototype.dk=function(h){var o=this.g.Qa(h,this.Ag);o!=-1&&(this.ye.set(o,-1),this.g.Sa(h,this.Ag,-1))},v.W=function(h,o,r,n,l){var c=new v;return c.g=h,c.Y=o,c.sA=r,c.hw=n,c.od=l,c.SM()},v.prototype.kM=function(h,o){var r=this.Yh.get(h),n=new u.h;this.g.Hc(r,n),r=new u.h;var l=this.Yh.get(o);return this.g.Hc(l,r),n.rb(r)?0:(l=this.Bs.get(h),h=new u.h,this.g.Hc(l,h),l=this.Bs.get(o),o=new u.h,this.g.Hc(l,o),(l=new u.h).vc(n,h),(n=new u.h).vc(r,o),u.h.pu(l,n))},v}();u.tn=k}(q||(q={})),function(u){var k;(k=u.VL||(u.VL={}))[k.Local=0]="Local",k[k.Geographic=1]="Geographic",k[k.Projected=2]="Projected",k[k.Image=3]="Image",k[k.Unknown=4]="Unknown",function(h){h[h.Integer32=0]="Integer32",h[h.Integer64=1]="Integer64",h[h.FloatingPoint=2]="FloatingPoint"}(u.OL||(u.OL={}));var v=function(){function h(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return h.prototype.Fc=function(){return this.fg},h.prototype.QF=function(){return 1},h.prototype.QW=function(o){this.hA=o},h.prototype.Yd=function(){if(this.hA!==null)return this.hA;var o=.001;return this.fg!=0?o=u.yr.xQ(this.fg):this.yh!=null&&(o=u.SC.yQ(this.yh)),o},h.prototype.wz=function(){return this.yh},h.prototype.Id=function(){return this.fg!=0?u.Uc.ah(u.yr.Ny(this.fg)):this.yh!=null?u.SC.zQ(this.yh):void 0},h.Tb=function(o){if(o.fg!=0){if(u.yr.US(o.fg)===!0)return 1;if(u.yr.WS(o.fg)===!0)return 2}return 4},h.prototype.cs=function(){var o=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=u.yr.AK(o),this.Jo!=-1?this.Jo:o)},h.create=function(o){if(0>=o)throw u.i.O("Invalid or unsupported wkid: "+o);var r=new h;return r.fg=o,r},h.lP=function(o){if(o==null||o.length==0)throw u.i.O("Cannot create SpatialReference from null or empty text.");var r=new h;return r.yh=o,r},h.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.fg==o.fg&&(this.fg!=0||this.yh===o.yh)},h.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},h.prototype.dc=function(){if(this.rp!=="")return this.rp;var o=this.toString();if(Array.prototype.reduce)return this.rp="S"+o.split("").reduce(function(l,c){return(l=(l<<5)-l+c.charCodeAt(0))&l},0);var r=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)r=(r<<5)-r+o.charCodeAt(n),r&=r;return this.rp="S"+r},h.prototype.Mn=function(){return this.Yd(0)},h.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=u.iu.tP(this)},h.UN=2147483645,h.VN=9007199254740990,h}();u.Gg=v}(q||(q={})),function(u){var k=function(v){function h(){var o=v!==null&&v.apply(this,arguments)||this;return o.Li=null,o.NT=null,o.Jq=new u.UL,o.Go=null,o.lw=null,o}return pe(h,v),h.tP=function(o){var r=new h;if(r.fg=o.fg,r.Jo=o.Jo,r.UH=o.UH,r.yh=o.yh,r.yh!==""&&r.yh!==null){o=h.fM(r.yh);var n=h.dM(r.yh);r.Jq.Wx(o,n,u.ju.Integer64),r.ay(o),r.cy(n),r.fg=o.cs()}else o=h.eM(r.fg),r.ay(o),r.cy(null),r.Jq.Wx(o,null,u.ju.Integer64);return r},h.prototype.Yd=function(o){return this.Jq.Mn(o)},h.dM=function(o){if(0>=o.length)throw u.i.O();var r=null;try{r=u.IC.fromString(o)}catch{r=null}return r==null?null:h.XC(r,!0)},h.prototype.ay=function(o){this.Ld=o,this.Go=this.Ld.Id()},h.prototype.cy=function(o){this.FH=o,this.NT=this.FH!=null?this.FH.Go:null},h.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},h.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},h.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},h.prototype.rm=function(){return this.Ld.rm()},h.prototype.bf=function(){return this.Ld.bf()},h.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},h.prototype.Wp=function(){return this.Ld.Wp()},h.prototype.Yr=function(){return this.Ld.Yr()},h.prototype.mk=function(){return this.Ld.mk()},h.prototype.fS=function(o){return u.JC.Ky(this.Ld,o.Ld)},h.prototype.ol=function(){return this.Ld.ol()},h.prototype.Xr=function(){return this.Ld.Xr()},h.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},h.prototype.ih=function(){if(!this.Xc())throw u.i.O("!isPannable()");var o=new u.l;return this.Ld.ih(o),o},h.prototype.Le=function(){if(!this.Xc())throw u.i.O("!isPannable()");return this.Ld.uo},h.prototype.CR=function(){if(!this.Xc())throw u.i.O("!isPannable()");var o=new u.l;return this.Ld.BR(o),o},h.prototype.rv=function(){if(!this.Xc())throw u.i.O("!isPannable()");return this.Ld.rv()},h.prototype.qv=function(){if(!this.Xc())throw u.i.O("!isPannable()");return this.Ld.qv()},h.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},h.prototype.KQ=function(){return this.Ld.kv()},h.prototype.Sp=function(){return this.Go.getUnitFactor()},h.prototype.pz=function(o){return this.Jq.pz(o)},h.prototype.tc=function(){var o=this.Tb();if(o==1)return this;if(o==3)return this.Li.hk().tc();if(o==0||o===4)throw u.i.ga("invalid call");if(this.lw!==null)return this.lw;if((o=this.gh().getGeogcs())==null)throw u.i.Ra();return this.lw=h.XE(o,this.Jq.QF())},h.XE=function(o,r){if(o==null)throw u.i.O("null pointer.");var n=new h;return o=h.ou(o,!0),n.Jq.Wx(o,null,r),n.ay(o),n.cy(null),n.fg=o.cs(),n},h.prototype.Tb=function(){var o=this.gh();if(o!=null)switch(o.getType()){case u.Tc.PE_TYPE_GEOGCS:return 1;case u.Tc.PE_TYPE_PROJCS:return 2}return 4},h.prototype.kv=function(){return this.Ld.kv()},h.ou=function(o,r){var n=o.getCode();if(0>=n&&0<(n=u.qf.getCode(o))){if((o=u.qf.coordsys(n))==null)throw u.i.O("Text to wkid mapping had failed: "+n);return h.ou(o,r)}if(r&&0<n&&(r=h.qx[n]))return r;r=u.Ab.zv(o,n,!1);var l=h.gK[r];return l||(o=0>=n?o:u.qf.coordsys(n),o=new u.JC(o),h.gK[r]=o,0<n&&(h.qx[n]=o),o)},h.eM=function(o){if(0>=o)throw u.i.O("Invalid or unsupported wkid: "+o);var r=h.qx[o];if(r!=null)return r;if((r=u.qf.coordsys(o))==null)throw u.i.O("Invalid or unsupported wkid: "+o);return(r=h.ou(r,!1)).cs()!=o&&(h.qx[o]=r),r},h.fM=function(o){if(o==null||o===void 0||o.length==0)throw u.i.O("Cannot create SpatialReference from null or empty text.");var r=null;try{r=u.qf.fromString(u.Tc.PE_TYPE_COORDSYS,o)}catch(n){throw u.i.O("Cannot create SpatialReference from text. "+n.message)}if(r===null)throw u.i.O("Cannot create SpatialReference from text. ");return h.ou(r,!0)},h.XC=function(o,r){var n,l=o.getCode();if(0>=l&&0<(l=u.qf.getCode(o))){if((l=u.qf.vertcs(l))===null)throw u.i.O();return h.XC(l,r)}if(r&&0<l&&(r=h.fK[l])||(o=u.Ab.zv(o,l,!1),r=h.hK[o]))return r;if(0>=l||(n=u.qf.vertcs(l)),n===null)throw u.i.O();return n=new u.KL(n),h.hK[o]=n,0<l&&(h.fK[l]=n),n},h.nI=function(o,r){if(r===null||r.B())return null;var n=new u.l;if(r!==null&&o.Tb()!=1){var l=o.tc(),c=l.gh();o=u.xr.Pr(o,l,null,null),(r=u.Gx.local().W(r,o,null)).A(n)}else c=o.gh(),r.A(n);return r=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new u.GC(n.v,n.G,n.C,n.H,r,c)},h.gD=function(o){var r={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var l=o[n],c={HY:!1,VY:"",UY:-1,geogtran:null};l.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=l.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=l.getGeogtran().toString(),r.steps.push(c)}return r},h.SR=function(o,r,n,l){return n===void 0&&(n=null),n=h.nI(l,n),o=u.np.getGTlist(o.gh(),r.gh(),2,u.np.PE_GTLIST_OPTS_COMMON,n,1),r=null,o&&0<o.length&&(r=this.gD(o[0]),u.Lx.destroy(o)),n!==null&&n.destroy(),r},h.TR=function(o,r,n,l){var c;if(n===void 0&&(n=null),l===void 0&&(l=null),c===void 0&&(c=30),n=h.nI(l,n),o=u.np.getGTlist(o.gh(),r.gh(),2,u.np.PE_GTLIST_OPTS_COMMON,n,c),r=[],o&&0<o.length){for(c=0;c<o.length;c++)r.push(this.gD(o[c]));u.Lx.destroy(o)}return n!==null&&n.destroy(),r},h.qx={},h.gK={},h.fK={},h.hK={},h}(u.Gg);u.iu=k}(q||(q={})),function(u){var k,v;(v=k=u.ju||(u.ju={}))[v.Integer32=0]="Integer32",v[v.Integer64=1]="Integer64",v[v.FloatingPoint=2]="FloatingPoint";var h=function(){function o(){this.sp()}return o.prototype.assign=function(r){this.Hm=r.Hm,this.Im=r.Im,this.Rj=r.Rj,this.nA=r.nA,this.Ho=r.Ho,this.mA=r.mA,this.Kk=r.Kk,this.Oq=r.Oq,this.Nq=r.Nq,this.Tm=r.Tm},o.prototype.QF=function(){return this.Tm},o.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=k.FloatingPoint},o.prototype.Wx=function(r,n,l){if(this.sp(),this.Tm=l,l!=k.FloatingPoint){var c=new u.l;r.cR(c),this.Hm=c.v,this.Im=c.G}else this.Im=this.Hm=-17976931348623157e292;(c=r.Re.getType())==u.Tc.PE_TYPE_GEOGCS?(c=(l==k.Integer64?1e-9:1/18e5)*r.bf(),this.Rj=1/c):c==u.Tc.PE_TYPE_PROJCS&&(c=(l==k.Integer64?1e-4:.001)*r.rm(),this.Rj=1/c),n!=null?(c=(l==k.Integer32?.001:1e-4)*n.DH,this.Ho=1/c):this.Ho=1e4,this.TM(),this.Kk=r.uw,this.Oq=n!=null?.001*n.DH:.001,this.Nq=2220446049250313e-29},o.prototype.TM=function(){if(this.Tm!=k.FloatingPoint){var r=this.Tm==k.Integer64?u.Gg.VN:u.Gg.UN,n=r/this.Rj,l=this.Hm+n,c=u.P.truncate((l-this.Hm)*this.Rj);c>r&&(this.Rj=r/(l-this.Hm)),n=this.Im+n,(c=u.P.truncate((n-this.Im)*this.Rj))>r&&(this.Rj=r/(n-this.Im))}},o.prototype.WB=function(r){switch(r){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},o.prototype.Mn=function(r){switch(r){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},o.prototype.pz=function(r){if(this.Tm==k.FloatingPoint)return 0;switch(r){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},o.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Kk.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},o}();u.UL=h}(q||(q={})),function(u){function k(l,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function v(l,c,p){return l=l/6378137*57.29577951308232,p?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function h(l,c,p){var f=l.Qf();if(l.K()===33)c=c(f.Ng(),f.kh()),f.Db(c[0],c[1]);else if(l.K()===197){var g=c(l.gs(),l.js(),p);c=c(l.fs(),l.hs(),p),f.L(g[0],g[1],c[0],c[1])}else for(g=new u.h,l=0;l<f.I();l++){f.D(l,g);var b=c(g.x,g.y,p);g.na(b[0],b[1]),f.Db(l,g)}return f}function o(l){return h(l,v,!0)}function r(l){return h(l,k,!0)}var n=Math.PI/180;u.PK=function(){function l(){}return l.xu=function(c){var p=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return u.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*p)*Math.log((1-p*f)/(1+p*f))))},l.Ux=function(c,p,f,g){var b=.0033528106647474805,x=Math.sin(f);f=Math.cos(f);var $=(1-b)*Math.tan(c),E=$*(c=1/Math.sqrt(1+$*$)),O=Math.atan2($,f),C=($=c*x)*$,N=1-C,D=27233160610754688e-5*N/4040829998466145e-2,z=1+D/16384*(4096+D*(D*(320-175*D)-768)),R=D/1024*(256+D*(D*(74-47*D)-128));D=g/(635675231424518e-8*z);for(var G,H,B,tt=2*Math.PI;1e-12<Math.abs(D-tt);)B=Math.cos(2*O+D),tt=D,D=g/(635675231424518e-8*z)+R*(G=Math.sin(D))*(B+R/4*((H=Math.cos(D))*(2*B*B-1)-R/6*B*(4*G*G-3)*(4*B*B-3)));return g=E*G-c*H*f,N=b/16*N*(4+b*(4-3*N)),u.h.construct((p+(Math.atan2(G*x,c*H-E*G*f)-(1-N)*b*$*(D+N*G*(B+N*H*(2*B*B-1)))))/n,Math.atan2(E*H+c*G*f,(1-b)*Math.sqrt(C+g*g))/n)},l.HM=function(c,p,f,g){var b=.0033528106647474805,x=g-p,$=Math.atan((1-b)*Math.tan(c)),E=Math.atan((1-b)*Math.tan(f)),O=Math.sin($);$=Math.cos($);var C=Math.sin(E);E=Math.cos(E);var N=x,D=1e3;do{var z=Math.sin(N),R=Math.cos(N),G=Math.sqrt(E*z*E*z+($*C-O*E*R)*($*C-O*E*R));if(G===0)return 0;R=O*C+$*E*R;var H=Math.atan2(G,R),B=$*E*z/G,tt=1-B*B;z=R-2*O*C/tt,isNaN(z)&&(z=0);var X=b/16*tt*(4+b*(4-3*tt)),rt=N;N=x+(1-X)*b*B*(H+X*G*(z+X*R*(2*z*z-1)))}while(1e-12<Math.abs(N-rt)&&0<--D);return D===0?(O=g-p,{azimuth:Math.atan2(Math.sin(O)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(g-p))}):(p=(c=27233160610754688e-5*tt/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(E*Math.sin(N),$*C-O*E*Math.cos(N)),TQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(H-p*G*(z+p/4*(R*(2*z*z-1)-p/6*z*(4*G*G-3)*(4*z*z-3)))),TY:Math.atan2($*Math.sin(N),$*C*Math.cos(N)-O*E)})},l.eQ=function(c){var p=c.hasAttribute(1),f=c.hasAttribute(2),g=[],b=c.ea(),x=null,$=null;p&&(x=c.vb(1)),f&&($=c.vb(2));for(var E=new u.h,O=0;O<b;O++){for(var C=c.Ca(O),N=c.Ka(O),D=0,z=0,R=NaN,G=NaN,H=NaN,B=NaN,tt=c.ec(O),X=[],rt=C;rt<C+N;rt++){c.D(rt,E),B=H=NaN;var ct=[E.x,E.y];p&&(H=x.get(rt),ct.push(H)),f&&(b=$.get(rt),ct.push(B)),rt==C&&tt&&(D=E.x,z=E.y,R=H,G=B),X.push(ct)}!tt||D==E.x&&z==E.y&&(!p||isNaN(R)&&isNaN(H)||R==H)&&(!f||isNaN(G)&&isNaN(B)||G==B)||X.push(X[0].slice(0)),g.push(X)}return g},l.Ry=function(c,p){c=l.eQ(c),637.100877141506>p&&(p=637.100877141506);for(var f,g=[],b=0;b<c.length;b++){var x,$,E=c[b];g.push(f=[]),f.push([E[0][0],E[0][1]]);var O=E[0][0]*n,C=E[0][1]*n;for(x=0;x<E.length-1;x++){var N=E[x+1][0]*n,D=E[x+1][1]*n;if(O!==N||C!==D){N=(D=l.HM(C,O,D,N)).azimuth;var z=(D=D.TQ)/p;if(1<z){for($=1;$<=z-1;$++){var R=l.Ux(C,O,N,$*p);f.push([R.x,R.y])}$=l.Ux(C,O,N,(D+Math.floor(z-1)*p)/2),f.push([$.x,$.y])}C=l.Ux(C,O,N,D),f.push([C.x,C.y]),O=C.x*n,C=C.y*n}}}return{lJ:g}},l.SQ=function(c){for(var p=[],f=0;f<c.length;f++){var g=c[f];g=l.Ry(g,1e4),p.push(g)}c=[];for(var b=0;b<p.length;b++){g=p[b];var x=0;for(f=0;f<g.lJ.length;f++){var $,E=g.lJ[f],O=l.xu(u.h.construct(E[0][0],E[0][1])),C=l.xu(u.h.construct(E[E.length-1][0],E[E.length-1][1])),N=C.x*O.y-O.x*C.y;for($=0;$<E.length-1;$++)O=l.xu(u.h.construct(E[$+1][0],E[$+1][1])),N+=(C=l.xu(u.h.construct(E[$][0],E[$][1]))).x*O.y-O.x*C.y;x+=N}x/=1,c.push(x/-2)}return c},l}(),u.cb=function(){function l(){}return l.sB=function(c,p,f,g,b,x,$){l.bD[c.dc()]=p,isNaN(f)==0&&(l.hD[c.dc()]=f),isNaN(g)==0&&(l.uD[c.dc()]=g),isNaN(b)==0&&(l.WC[c.dc()]=b),l.iD[c.dc()]=x,$!==null&&(l.jD[c.dc()]=$)},l.Yw=function(c,p,f){l.nD[c.dc()+"-"+p.dc()]=f},l.tc=function(c){if((c=l.bD[c.dc()])==null)throw u.i.Fe();return c},l.bf=function(c){if((c=l.hD[c.dc()])==null)throw u.i.Fe();return c},l.xv=function(c){if((c=l.uD[c.dc()])==null)throw u.i.Fe();return c},l.gv=function(c){if((c=l.WC[c.dc()])==null)throw u.i.Fe();return c},l.ih=function(c){if((c=l.jD[c.dc()])==null)throw u.i.Fe();return u.l.construct(c[0],c[1],c[2],c[3])},l.Xc=function(c){if((c=l.iD[c.dc()])==null)throw u.i.Fe();return c},l.Bh=function(c,p,f){if(p.Nb(f))return c;var g=l.nD[p.dc()+"-"+f.dc()];if(g!==void 0)return g(c,p,f);throw u.i.Fe()},l.wt=function(){throw u.i.Fe()},l.XQ=function(){throw u.i.Fe()},l.ZV=function(){throw u.i.Fe()},l.ol=function(){throw u.i.Fe()},l.nW=function(){var c=u.Gg.create(102100),p=u.Gg.create(3857),f=u.Gg.create(4326);u.cb.sB(c,f,NaN,NaN,NaN,!1,null),u.cb.sB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),u.cb.sB(p,f,NaN,NaN,NaN,!1,null),u.cb.Yw(c,f,o),u.cb.Yw(f,c,r),u.cb.Yw(p,f,o),u.cb.Yw(f,p,r)},l.bD=[],l.hD=[],l.uD=[],l.WC=[],l.iD=[],l.jD=[],l.nD=[],l}()}(q||(q={})),q.cb.nW(),function(u){var k=function(){function v(h){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=h}return v.prototype.kd=function(h){h<this.Dl?(this.o[h*this.Mf]=this.ko,this.ko=h):this.Dl--,this.size--},v.prototype.U=function(h,o){return this.o[h*this.Mf+o]},v.prototype.T=function(h,o,r){this.o[h*this.Mf+o]=r},v.prototype.De=function(){var h=this.ko;if(h==-1){if(this.Dl==this.Jg){if(2147483647<(h=this.Jg!=0?u.P.truncate(3*(this.Jg+1)/2):1)&&(h=2147483647),h==this.Jg)throw u.i.de();this.yz(h)}h=this.Dl,this.Dl++}else this.ko=this.o[h*this.Mf];this.size++;for(var o=h*this.Mf;o<h*this.Mf+this.Mf;o++)this.o[o]=-1;return h},v.prototype.Nl=function(h){var o=this.ko;if(o==-1){if(this.Dl==this.Jg){if(2147483647<(o=this.Jg!=0?u.P.truncate(3*(this.Jg+1)/2):1)&&(o=2147483647),o==this.Jg)throw u.i.de();this.yz(o)}o=this.Dl,this.Dl++}else this.ko=this.o[o*this.Mf];this.size++;for(var r=o*this.Mf,n=0;n<h.length;n++)this.o[r+n]=h[n];return o},v.prototype.oj=function(h){this.ko=-1,this.size=this.Dl=0,h&&(this.o=null,this.Jg=0)},v.prototype.Ee=function(h){h>this.Jg&&this.yz(h)},v.prototype.sx=function(h,o){h*=this.Mf,o*=this.Mf;for(var r=0;r<this.Mf;r++){var n=this.o[o+r];this.o[o+r]=this.o[h+r],this.o[h+r]=n}},v.prototype.bC=function(h,o,r){var n=this.o[this.Mf*o+r];this.o[this.Mf*o+r]=this.o[this.Mf*h+r],this.o[this.Mf*h+r]=n},v.GG=function(h){return 0<=h},v.prototype.yz=function(h){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.Mf*h);o.set(this.o,0),this.o=o,this.Jg=h},v}();u.ad=k}(q||(q={})),function(u){var k,v;(v=k||(k={}))[v.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",v[v.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",v[v.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",v[v.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var h=function(){function r(n){this.Ce=n,this.Ah=NaN,this.$G=new u.jg,this.aH=new u.jg,this.os=new u.Oc,this.ps=new u.Oc}return r.prototype.compare=function(n,l,c){if(n=n.ka(c),this.Ce.kB(l,this.$G),this.Ce.kB(n,this.aH),l=this.$G.get(),n=this.aH.get(),this.os.L(l.ta,l.qa),this.ps.L(n.ta,n.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;c=l.oa==l.ma;var p=n.oa==n.ma;if(c||p){if(c&&p)return 0;if(l.oa==n.oa&&l.ta==n.ta)return c?1:-1;if(l.ma==n.ma&&l.qa==n.qa)return c?-1:1}return(c=l.Me(this.Ah,this.os.pa))==(p=n.Me(this.Ah,this.ps.pa))&&((p=.5*((c=Math.min(l.ma,n.ma))+this.Ah))==this.Ah&&(p=c),c=l.Me(p,this.os.pa),p=n.Me(p,this.ps.pa)),c<p?-1:c>p?1:0},r.prototype.WJ=function(n){this.Ah=n},r}(),o=function(){function r(n){this.ib=n,this.RH=new u.jg,this.Cf=new u.h,this.rA=new u.Oc}return r.prototype.fX=function(n){this.Cf.N(n)},r.prototype.compare=function(n,l){return this.ib.kB(n.ka(l),this.RH),n=this.RH.get(),this.rA.L(n.ta,n.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(n=n.Me(this.Cf.y,this.Cf.x),this.Cf.x<n?-1:this.Cf.x>n?1:0)},r}();k=function(){function r(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new u.Nd,this.XN=2147483647,this.WN=u.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return r.prototype.ty=function(n){this.gA=n},r.prototype.$m=function(){this.he==null&&(this.he=new u.ad(8));var n=this.he.De();return this.he.T(n,1,0),n},r.prototype.qU=function(){this.Lc==null&&(this.Lc=new u.ad(8));var n=this.Lc.De();this.Lc.T(n,2,0),this.Lc.T(n,3,0);var l=this.Lc.De();return this.Lc.T(l,2,0),this.Lc.T(l,3,0),this.EJ(n,l),this.EJ(l,n),n},r.prototype.hI=function(){this.ze==null&&(this.ze=new u.ad(8));var n=this.ze.De();return this.ze.T(n,2,0),n},r.prototype.OW=function(n,l){this.he.T(n,7,l)},r.prototype.on=function(n,l){this.he.T(n,2,l)},r.prototype.NW=function(n,l){this.he.T(n,1,l)},r.prototype.gX=function(n,l){this.he.T(n,3,l)},r.prototype.dX=function(n,l){this.he.T(n,4,l)},r.prototype.er=function(n,l){this.he.T(n,5,l)},r.prototype.$Q=function(n){return this.he.U(n,5)},r.prototype.MW=function(n,l){this.he.T(n,6,l)},r.prototype.YM=function(n,l){this.MW(l,n)},r.prototype.DJ=function(n,l){this.Lc.T(n,1,l)},r.prototype.EJ=function(n,l){this.Lc.T(n,4,l)},r.prototype.Vl=function(n,l){this.Lc.T(n,5,l)},r.prototype.Ul=function(n,l){this.Lc.T(n,6,l)},r.prototype.VW=function(n,l){this.Lc.T(n,2,l)},r.prototype.cx=function(n,l){this.Lc.T(n,3,l)},r.prototype.GF=function(n){return this.Lc.U(n,3)},r.prototype.Ht=function(n,l){this.Lc.T(n,7,l)},r.prototype.zK=function(n,l){if(this.om(n)!=-1)for(l=l?-1:n,n=this.om(n);n!=-1;n=this.ls(n))this.g.Sa(this.vj(n),this.Eq,l)},r.prototype.xx=function(n,l){n!=-1&&(this.zK(n,l),this.zK(this.ya(n),l))},r.prototype.Et=function(n,l){this.ze.T(n,1,l)},r.prototype.Xg=function(n,l){this.ze.T(n,2,l)},r.prototype.ln=function(n,l){this.ze.T(n,3,l),this.IW(n,this.ZQ(l)),this.HW(l,n)},r.prototype.HW=function(n,l){this.ze.T(n,4,l)},r.prototype.IW=function(n,l){this.ze.T(n,5,l)},r.prototype.yJ=function(n,l){this.ze.T(n,6,l)},r.prototype.wJ=function(n,l){this.ze.T(n,7,l)},r.prototype.vJ=function(n,l){this.$n.write(n,l)},r.prototype.xJ=function(n,l){this.fA.write(n,l)},r.prototype.gY=function(n){var l=0,c=0,p=this.vF(n),f=new u.h,g=new u.h,b=new u.h;this.$r(p,f),g.N(f);var x=p;do this.nm(x,b),c+=u.h.ub(g,b),this.$e(this.ya(x))!=n&&(l+=(b.x-f.x-(g.x-f.x))*(b.y-f.y+(g.y-f.y))*.5),g.N(b),x=this.kc(x);while(x!=p);this.$n.write(n,l),this.fA.write(n,c)},r.prototype.KU=function(n,l){var c=new h(this),p=new u.$j;p.Ee(u.P.truncate(this.xa/2)),p.Xo(c);for(var f=new u.ja(0),g=this.bh(),b=null,x=0,$=new u.h,E=this.Oe;E!=-1;E=this.Tf(E)){if(!(255&++x)&&l!=null&&!l.progress(-1,-1))throw u.i.RC();var O=this.Je(E);if(O!=-1){if(f.Dh(0),!this.cY(p,g,f,O)){this.D(E,$),c.WJ($.y);var C=O;do{var N=this.Bb(C,g);N!=-1&&(p.wd(N,-1),this.Kb(C,g,-2)),C=this.kc(this.ya(C))}while(O!=C);C=O;do(N=this.Bb(C,g))==-1&&(N=p.addElement(C,-1),f.add(N)),C=this.kc(this.ya(C));while(O!=C)}for(O=f.size-1;0<=O;O--)N=f.get(O),C=p.ka(N),this.Kb(this.ya(C),g,N),this.JU(p,N,n)}else this.Yy(E)==-1&&(b==null&&(b=new o(this)),this.D(E,$),b.fX($),C=p.DW(b),O=this.Jl,C!=-1&&(N=p.ka(C),this.$e(N)==this.$e(this.ya(N))&&(N=this.JF(p,C)),N!=-1&&(O=this.$e(N))),this.YM(O,E))}this.Lg(g)},r.prototype.JU=function(n,l,c){var p=n.ka(l),f=this.$e(p);if(this.In(f)==-1){var g=this.JF(n,l),b=this.ya(p),x=this.$e(b);this.Mp(f),this.Mp(x);var $=this.In(f),E=this.In(x);if(g==-1&&$==-1&&(x==f?(this.ln(x,this.Jl),$=E=this.Jl):(E==-1&&(this.ln(x,this.Jl),E=this.Jl),this.ln(f,x),$=x)),g!=-1){var O=this.$e(g);E==-1&&(0>=this.Mp(O)?(E=this.In(O),this.ln(x,E)):(this.ln(x,O),E=O),x==f&&($=E))}$==-1&&this.dY(f,x),c==0?this.eW(n,l,p,g,f,x):c==5?this.fW(n,l,p,b,f,x):c==4&&this.dW(p,g,f,x)}},r.prototype.eW=function(n,l,c,p,f,g){var b=this.jk(f);if(p!=-1){var x=this.jk(g),$=this.jk(this.$e(p));p=b&x&$,$^=$&this.fh(c),($|=p)!=0&&(this.Xg(g,x|$),this.Xg(f,$|b),b=b||$)}for(l=n.lb(l);l!=-1&&(p=n.ka(l),c=this.$e(this.ya(p)),f=this.jk(c),g=this.fh(p),x=this.$e(p),p=f&($=this.jk(x))&b,b^=b&g,(b|=p)!=0);l=n.lb(l))this.Xg(c,f|b),this.Xg(x,$|b)},r.prototype.fW=function(n,l,c,p,f,g){if(f!=g){c=this.Bb(c,this.eg),c+=this.Bb(p,this.eg),p=0;var b=new u.ja(0),x=new u.ja(0);x.add(0);for(var $=n.sc(-1);$!=l;$=n.lb($)){var E=n.ka($),O=this.ya(E),C=this.$e(E),N=this.$e(O);if(C!=N){if(E=this.Bb(E,this.eg),p+=E+=this.Bb(O,this.eg),O=!1,b.size!=0&&b.Gc()==N&&(x.Jf(),b.Jf(),O=!0),this.In(N)==-1)throw u.i.Ra();O&&this.In(N)==C||(x.add(p),b.add(C))}}p+=c,b.size!=0&&b.Gc()==g&&(x.Jf(),b.Jf()),p!=0?x.Gc()==0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n)):x.Gc()!=0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n))}},r.prototype.dW=function(n,l,c,p){var f=this.Ma(this.g.md);if(l==-1)this.Xg(p,this.Io),1&(n=this.Bb(n,this.yg))?this.Xg(c,f):this.Xg(c,this.Io);else{var g=this.jk(p);g==0?(g=this.jk(this.$e(l)),this.Xg(p,g),1&(n=this.Bb(n,this.yg))?this.Xg(c,g==f?this.Io:f):this.Xg(c,g)):1&(n=this.Bb(n,this.yg))?this.Xg(c,g==f?this.Io:f):this.Xg(c,g)}},r.prototype.cY=function(n,l,c,p){var f=p,g=-1,b=-1,x=0;do{if(x==2)return!1;var $=this.Bb(f,l);if($!=-1){if(g!=-1)return!1;g=$}else{if(b!=-1)return!1;b=f}x++,f=this.kc(this.ya(f))}while(p!=f);return b!=-1&&g!=-1&&(this.Kb(n.ka(g),l,-2),n.Uj(g,b),c.add(g),!0)},r.prototype.dY=function(n,l){var c=this.Mp(n);if(c!=0){var p=this.Mp(l);0<c&&0>p||0>c&&0<p?this.ln(n,l):(l=this.In(l))!=-1&&this.ln(n,l)}},r.prototype.qP=function(n,l){this.Eq=this.g.Hd();for(var c=0,p=l.size;c<p;c++){var f=l.get(c),g=this.g.Qa(f,this.Em),b=this.g.Sf(this.g.cd(f)),x=this.g.jc(b);if(u.ba.Ic(x)){var $=this.g.V(f);if($!=-1){var E=this.g.Qa($,this.Em);if(g!=E){var O=this.qU(),C=this.ya(O),N=this.lh.De();this.lh.T(N,0,f),this.lh.T(N,1,-1),this.Ht(O,N),this.DJ(O,g),(N=this.Je(g))==-1?(this.on(g,O),this.Vl(O,C),this.Ul(C,O)):(g=this.ue(N),this.Vl(N,C),this.Ul(C,N),this.Ul(g,O),this.Vl(O,g)),this.DJ(C,E),(g=this.Je(E))==-1?(this.on(E,C),this.Ul(O,C),this.Vl(C,O)):(E=this.ue(g),this.Vl(g,O),this.Ul(O,g),this.Ul(E,C),this.Vl(C,E)),b=this.Ma(b),n==0?(this.Kb(C,this.be,0),this.Kb(O,this.be,x==1736?b:0)):n==5?(E=new u.h,this.g.D(f,E),f=new u.h,this.g.D($,f),g=$=0,0>E.compare(f)?$=1:g=-1,this.Kb(C,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.eg,$),this.Kb(C,this.eg,g)):n==7?(this.Kb(C,this.be,this.Io),this.Kb(O,this.be,x==1736?b:0)):n==4&&(this.Kb(C,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.yg,1),this.Kb(C,this.yg,1)),x=x==1736?this.WN:0,this.cx(O,b|x),this.cx(C,b|x)}}}}},r.prototype.QT=function(n,l){var c=this.om(l);if(c!=-1){var p=this.om(n);this.lh.T(c,1,p),this.Ht(n,c),this.Ht(l,-1)}n=this.ya(n),l=this.ya(l),(c=this.om(l))!=-1&&(p=this.om(n),this.lh.T(c,1,p),this.Ht(n,c),this.Ht(l,-1))},r.prototype.EX=function(n){function l(H,B){return p.CO(H,B)}var c=new u.ja(0);c.Jb(10);for(var p=this,f=this.Oe;f!=-1;f=this.Tf(f)){c.clear(!1);var g=this.Je(f);if(g!=-1){var b=g;do c.add(b),b=this.kc(this.ya(b));while(b!=g);if(1<c.size){if(b=!0,2<c.size)c.Wd(0,c.size,l),c.add(c.get(0));else if(0<this.BO(c.get(0),c.get(1))){var x=c.get(0);c.set(0,c.get(1)),c.set(1,x)}else b=!1;for(var $=x=c.get(0),E=this.vf($),O=this.ya($),C=-1,N=1,D=c.size;N<D;N++){var z=c.get(N),R=this.ya(z),G=this.lk(R);if(G==E&&z!=$){if(n==0)C=this.GF($)|this.GF(z),this.cx($,C),this.cx(O,C),this.Kb($,this.be,this.Bb($,this.be)|this.Bb(z,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(R,this.be));else if(this.eg!=-1)C=this.Bb($,this.eg)+this.Bb(z,this.eg),R=this.Bb(O,this.eg)+this.Bb(R,this.eg),this.Kb($,this.eg,C),this.Kb(O,this.eg,R);else{if(n==7)return void(this.Pi=new u.Nd(5,f,-1));this.yg!=-1&&(C=this.Bb($,this.yg)+this.Bb(z,this.yg),R=this.Bb(O,this.yg)+this.Bb(R,this.yg),this.Kb($,this.yg,C),this.Kb(O,this.yg,R))}this.QT($,z),this.Gy(z),C=$,c.set(N,-1),z==x&&(c.set(0,-1),x=-1)}else this.xx(C,!1),C=-1,$=z,E=G,O=R}if(this.xx(C,!1),C=-1,b){for(x=-1,N=0,D=c.size;N<D;N++)if((z=c.get(N))!=-1){if(x==-1)$=x=z,E=this.vf($),O=this.ya($);else if(z!=$&&(R=this.ya(z),G=this.lk(R),this.Ul(O,z),this.Vl(z,O),$=z,E=G,O=R,n==7&&(this.Bb(z,this.be)|this.Bb(this.ue(z),this.be))==(1|this.Io)))return void(this.Pi=new u.Nd(5,f,-1))}this.on(f,x)}else{for(x=-1,N=0,D=c.size;N<D;N++)if((z=c.get(N))!=-1){x=z;break}g!=x&&this.on(f,x)}}}}},r.prototype.RN=function(){for(var n=-1,l=this.bh(),c=this.Oe;c!=-1;c=this.Tf(c)){var p=this.Je(c);if(p!=-1){var f=p;do{if(this.Bb(f,l)!=1){var g=this.hI();this.Et(g,f),this.wJ(g,n),n!=-1&&this.yJ(n,g),n=g;var b=0,x=f;do b|=this.Bb(x,this.be),this.VW(x,g),this.Kb(x,l,1),x=this.kc(x);while(x!=f);this.Xg(g,b)}f=this.kc(this.ya(f))}while(f!=p)}}g=this.hI(),this.Et(g,-1),this.wJ(g,n),n!=-1&&this.yJ(n,g),this.Jl=g,this.$n=u.ce.rf(this.ze.size,NaN),this.fA=u.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(l)},r.prototype.mR=function(n,l,c){if((l=l!=-1?l:this.Je(n))==-1)return-1;for(n=l;;){if(this.Bb(l,c)!=1)return l;if((l=this.kc(this.ya(l)))==n)return-1}},r.prototype.tW=function(){for(var n=this.bh(),l=this.Oe;l!=-1;l=this.Tf(l))for(var c=-1;;){var p=this.mR(l,c,n);if(p==-1)break;c=this.kc(this.ya(p));for(var f=p;;){var g=this.kc(f),b=this.ue(f),x=this.ya(f);if(b==x){if(this.DP(f),c!=f&&c!=x||(c=-1),f==p||b==p){if(f==(p=g)||b==p)break;f=g;continue}}else this.Kb(f,n,1);if((f=g)==p)break}}this.Lg(n)},r.prototype.HB=function(n,l,c,p,f){this.Wg(),this.bH=f,this.g=n,this.Dq=this.g.WE(),(n=new u.ja(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.gd);var g=0,b=1,x=c!=null?c.get(0):this.g.md;for(f=1;x!=-1;){this.g.CJ(x,this.Dq,b),b<<=1;for(var $=this.g.Ob(x);$!=-1;$=this.g.Sb($))for(var E=this.g.Ya($),O=0,C=this.g.Ka($);O<C;O++)n.add(E),E=this.g.V(E);u.ba.Tn(this.g.jc(x))||(g+=this.g.ea(x)),c!=null?(x=f<c.size?c.get(f):-1,f++):x=this.g.ve(x)}for(this.Io=b,this.xa=n.size,this.g.nx(n,this.xa),this.lh==null&&(this.lh=new u.ad(2),this.he=new u.ad(8),this.Lc=new u.ad(8),this.ze=new u.ad(8)),this.lh.Ee(this.xa),u.op.Bp(p),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,g)),this.Em=this.g.Hd(),c=new u.h,f=0,g=new u.h,c.Sc(),b=0;b<=this.xa;b++)if(b<this.xa?(E=n.get(b),this.g.D(E,g)):g.Sc(),!c.rb(g)){if(f<b){for(E=this.$m(),C=O=-1;f<b;f++)C=n.get(f),this.g.Sa(C,this.Em,E),x=this.lh.De(),this.lh.T(x,0,C),this.lh.T(x,1,O),O=x,$=this.g.cd(C),x=this.g.Sf($),x=this.Ma(x),this.NW(E,this.yd(E)|x);this.OW(E,O),this.er(E,this.g.Va(C)),this.Qs!=-1&&this.dX(this.Qs,E),this.gX(E,this.Qs),this.Qs=E,this.Oe==-1&&(this.Oe=E)}f=b,c.N(g)}u.op.Bp(p),this.be=this.bh(),l==5&&(this.eg=this.bh()),l==4&&(this.yg=this.bh()),this.qP(l,n),this.Pi.Lj==0&&(this.EX(l),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(l,p))):this.kA=!0))},r.prototype.Gy=function(n){var l=this.kc(n),c=this.ue(n),p=this.ya(n),f=this.kc(p),g=this.ue(p);l!=p&&(this.Ul(g,l),this.Vl(l,g)),c!=p&&(this.Ul(c,f),this.Vl(f,c)),c=this.lk(n),this.Je(c)==n&&(f!=n?this.on(c,f):this.on(c,-1)),f=this.lk(p),this.Je(f)==p&&(l!=p?this.on(f,l):this.on(f,-1)),this.Lc.kd(n),this.Lc.kd(p)},r.prototype.JF=function(n,l){for(;;){if((l=n.xe(l))==-1)return-1;var c=n.ka(l);if(this.$e(c)!=this.$e(this.ya(c)))return c}},r.prototype.fr=function(n,l){var c;c===void 0&&(c=!0),this.HB(n,0,null,l,c)},r.prototype.qJ=function(n,l,c){var p=new u.ja(0);p.add(l),this.HB(n,4,p,c,n.jc(l)==1736)},r.prototype.rJ=function(n,l,c){var p=new u.ja(0);p.add(l),this.HB(n,5,p,c,!0)},r.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},r.prototype.Je=function(n){return this.he.U(n,2)},r.prototype.D=function(n,l){this.g.ZF(this.$Q(n),l)},r.prototype.yd=function(n){return this.he.U(n,1)},r.prototype.Tf=function(n){return this.he.U(n,4)},r.prototype.Yy=function(n){return this.he.U(n,6)},r.prototype.mm=function(n){return this.he.U(n,7)},r.prototype.ls=function(n){return this.lh.U(n,1)},r.prototype.vj=function(n){return this.lh.U(n,0)},r.prototype.og=function(n,l){return(l=this.Fi[l]).size<=n?-1:l.read(n)},r.prototype.pn=function(n,l,c){(l=this.Fi[l]).size<=n&&l.resize(this.he.size,-1),l.write(n,c)},r.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var n=u.ja.rf(this.he.Jg,-1),l=0,c=this.Fi.length;l<c;l++)if(this.Fi[l]==null)return this.Fi[l]=n,l;return this.Fi.push(n),this.Fi.length-1},r.prototype.Gp=function(n){this.Fi[n]=null},r.prototype.lk=function(n){return this.Lc.U(n,1)},r.prototype.vf=function(n){return this.lk(this.ya(n))},r.prototype.ya=function(n){return this.Lc.U(n,4)},r.prototype.ue=function(n){return this.Lc.U(n,5)},r.prototype.kc=function(n){return this.Lc.U(n,6)},r.prototype.$e=function(n){return this.Lc.U(n,2)},r.prototype.af=function(n){return this.jk(this.Lc.U(n,2))},r.prototype.om=function(n){return this.Lc.U(n,7)},r.prototype.$r=function(n,l){this.D(this.lk(n),l)},r.prototype.nm=function(n,l){this.D(this.vf(n),l)},r.prototype.fh=function(n){return this.Lc.U(n,3)&this.XN},r.prototype.Bb=function(n,l){return(l=this.Ii[l]).size<=n?-1:l.read(n)},r.prototype.Kb=function(n,l,c){(l=this.Ii[l]).size<=n&&l.resize(this.Lc.size,-1),l.write(n,c)},r.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var n=u.ja.rf(this.Lc.Jg,-1),l=0,c=this.Ii.length;l<c;l++)if(this.Ii[l]==null)return this.Ii[l]=n,l;return this.Ii.push(n),this.Ii.length-1},r.prototype.Lg=function(n){this.Ii[n]=null},r.prototype.DP=function(n){var l=this.$e(n),c=this.ya(n),p=this.kc(n);p==c&&(p=this.kc(p))==n&&(p=-1);var f=this.vF(l);f!==n&&f!=c||this.Et(l,p),c=this.$n.read(l),isNaN(c)||(this.vJ(l,NaN),this.xJ(l,NaN)),this.xx(n,!0),this.Gy(n)},r.prototype.EP=function(n){for(var l=0,c=n.size;l<c;l++){var p=n.get(l),f=this.$e(this.ya(p));this.Et(this.$e(p),-1),this.Et(f,-1),this.xx(p,!0),this.Gy(p)}},r.prototype.vF=function(n){return this.ze.U(n,1)},r.prototype.jk=function(n){return this.ze.U(n,2)},r.prototype.In=function(n){return this.ze.U(n,3)},r.prototype.ZQ=function(n){return this.ze.U(n,4)},r.prototype.Mp=function(n){var l=this.$n.read(n);return isNaN(l)&&(this.gY(n),l=this.$n.read(n)),l},r.prototype.Ma=function(n){return this.g.FF(n,this.Dq)},r.prototype.Ie=function(n){return this.g.Qa(n,this.Em)},r.prototype.oR=function(n){return this.g.Qa(n,this.Eq)},r.prototype.nR=function(n,l){var c=this.Je(n);if(c==-1)return-1;var p=c,f=-1,g=-1;do{if(this.vf(p)==l)return p;if(f==-1){if((f=this.Je(l))==-1)break;g=f}if(this.vf(g)==n)return this.ya(g);p=this.kc(this.ya(p)),g=this.kc(this.ya(g))}while(p!=c&&g!=f);return-1},r.prototype.kB=function(n,l){l.Qr(),l=l.get();var c=new u.h;this.$r(n,c),l.Ec(c),this.nm(n,c),l.Rc(c)},r.prototype.CO=function(n,l){if(n==l)return 0;var c=new u.h;this.nm(n,c);var p=new u.h;return this.nm(l,p),c.rb(p)?0:(l=new u.h,this.$r(n,l),(n=new u.h).vc(c,l),(c=new u.h).vc(p,l),u.h.pu(n,c))},r.prototype.BO=function(n,l){if(n==l)return 0;var c=new u.h;this.nm(n,c);var p=new u.h;return this.nm(l,p),c.rb(p)?0:(l=new u.h,this.$r(n,l),(n=new u.h).vc(c,l),(c=new u.h).vc(p,l),0<=c.y&&0<n.y?u.h.pu(n,c):0)},r.prototype.sO=function(){for(var n=u.mc.ox(this.gA),l=new u.h,c=new u.h,p=new u.h,f=new u.h,g=new u.h,b=this.Oe;b!=-1;b=this.Tf(b)){var x=this.Je(b);if(x!=-1){var $=x;this.$r($,l),this.nm($,c),g.vc(c,l);var E=g.Uk();do{var O=$;if(($=this.kc(this.ya($)))!=O){this.nm($,p),f.vc(p,l),O=f.Uk();var C=f.yi(g);if(C*C/(O*E)*Math.min(O,E)<=n)return!1;g.N(f),E=O,c.N(p)}}while($!=x)}}return!0},r}(),u.ku=k}(q||(q={})),function(u){var k=function(){function v(){this.j=null,this.jH=new u.h,this.kH=new u.h,this.Ij=null,this.Ov=!1,this.vl=-1}return v.prototype.cf=function(h){return h<this.Ij.length&&this.Ij[h]},v.prototype.fl=function(h,o,r,n){var l=u.ba.uf(this.j.g.jc(r));if(u.ba.uf(this.j.g.jc(o))!=2||l!=1)throw u.i.Ra();this.AP(h,o,r,n)},v.prototype.fr=function(h,o){this.j==null&&(this.j=new u.ku),this.j.fr(h,o)},v.prototype.Gt=function(h,o,r){for(u.Vk.W(h,o,r,!0),o=h.md;o!=-1;o=h.ve(o))h.jc(o)==1736&&u.tn.W(h,o,-1,this.Ov,r);this.fr(h,r)},v.prototype.HE=function(h,o,r,n,l){var c=this.j.g;if(c.jc(h)==1736)for(h=c.Ob(h);h!=-1;h=c.Sb(h)){var p=c.Ya(h);this.j.Ie(p),this.j.Ie(c.V(p));var f=this.j.oR(p);if(f!=-1){var g=this.j.Bb(f,r);if(g!=1&&g!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,r,1),g=c.wf(o,-1);var b=f,x=this.j.Ie(p),$=1;do{var E=this.um(p,l);c.kj(g,E),n!=-1&&this.j.pn(x,n,1),this.j.Kb(b,r,1),b=this.j.kc(b);do var O=(E=$==1?c.V(p):c.Na(p))!=-1?this.j.Ie(E):-1;while(O==x);var C=this.j.lk(b);if(C!=O){do O=(E=$==1?c.Na(p):c.V(p))!=-1?this.j.Ie(E):-1;while(O==x);C!=O?(O=C,E=this.j.vj(this.j.mm(O))):$=-$}x=O,p=E}while(b!=f);c.mn(g,!0)}else this.j.Kb(f,r,2)}}},v.prototype.$E=function(){for(var h=this.j.bh(),o=new u.ja(0),r=this.j.Oe;r!=-1;r=this.j.Tf(r)){var n=this.j.Je(r),l=n;if(n!=-1)do{if(this.j.Bb(l,h)!=1){var c=this.j.ya(l);this.j.Kb(c,h,1),this.j.Kb(l,h,1),this.cf(this.j.af(l))&&this.cf(this.j.af(c))&&o.add(l)}l=this.j.kc(this.j.ya(l))}while(l!=n)}this.j.Lg(h),this.j.EP(o)},v.prototype.um=function(h,o){return o==-1?h:this.WR(h,o)},v.prototype.WR=function(h,o){var r=this.j.g,n=this.j.mm(this.j.Ie(h));do{var l=this.j.vj(n);if(r.Sf(r.cd(l))==o)return l;n=this.j.ls(n)}while(n!=-1);return h},v.prototype.Qt=function(h,o,r){this.$E();var n=this.j.g,l=n.Kg(1736),c=this.j.bh();return this.pK(h,o,l,r,c,-1),this.j.Lg(c),u.tn.W(n,l,1,this.Ov,null),l},v.prototype.pK=function(h,o,r,n,l,c){for(this.HE(h,r,l,c,n),o!=-1&&this.HE(o,r,l,c,n),h=this.j.g,o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var p=this.j.Je(o);if(p!=-1){var f=p;do{var g=this.j.Bb(f,l);if(g!=1&&g!=2)if(this.cf(this.j.af(f))){g=h.wf(r,-1);var b=f;do{var x=this.j.om(b);x!=-1?x=this.j.vj(x):(x=this.j.vj(this.j.om(this.j.ya(b))),x=this.j.g.V(x)),x=this.um(x,n),h.kj(g,x),this.j.Kb(b,l,1),c!=-1&&(x=this.j.Ie(x),this.j.pn(x,c,1)),b=this.j.kc(b)}while(b!=f);h.mn(g,!0)}else this.j.Kb(f,l,2);f=this.j.kc(this.j.ya(f))}while(f!=p)}}},v.prototype.XX=function(h,o,r){var n=this.j.g,l=n.Kg(1736),c=n.Kg(1607),p=n.Kg(550);this.$E();var f=-1,g=this.j.bh(),b=this.j.Fp();for(this.pK(h,o,l,r,g,b),h=this.j.Oe;h!=-1;h=this.j.Tf(h))if((o=this.j.Je(h))!=-1){var x=o;do{var $=this.j.Bb(x,g),E=this.j.Bb(this.j.ya(x),g);if(($|=E)==2)if($=this.j.fh(x),this.cf($)){var O=n.wf(c,-1),C=x;$=this.$w(h,n),$=this.um($,r),n.kj(O,$),this.j.pn(h,b,1);do{if($=this.j.vf(C),E=this.$w($,n),E=this.um(E,r),n.kj(O,E),this.j.Kb(C,g,1),this.j.Kb(this.j.ya(C),g,1),this.j.pn($,b,1),C=this.j.kc(C),$=this.j.Bb(C,g),($|=E=this.j.Bb(this.j.ya(C),g))!=2)break;if($=this.j.fh(C),!this.cf($)){this.j.Kb(C,g,1),this.j.Kb(this.j.ya(C),g,1);break}}while(C!=x)}else this.j.Kb(x,g,1),this.j.Kb(this.j.ya(x),g,1);x=this.j.kc(this.j.ya(x))}while(x!=o)}for(h=this.j.Oe;h!=-1;h=this.j.Tf(h))($=this.j.og(h,b))!=1&&($=this.j.yd(h),this.cf($)&&(f==-1&&(f=n.wf(p,-1)),(o=this.j.mm(h))!=-1&&(o=this.j.vj(o),$=this.um(o,r),n.kj(f,$))));return this.j.Gp(b),this.j.Lg(g),u.tn.W(n,l,1,this.Ov,null),(r=[])[0]=p,r[1]=c,r[2]=l,r},v.prototype.$w=function(h,o){var r=-1;for(h=this.j.mm(h);h!=-1;h=this.j.ls(h)){var n=this.j.vj(h);r==-1&&(r=n);var l=this.j.Ma(o.Sf(o.cd(n)));if(this.cf(l)){r=n;break}}return r},v.prototype.gB=function(h,o){for(var r=this.ll(o),n=this.j.lk(o),l=this.j.vf(o),c=0,p=0,f=this.j.mm(n);f!=-1;f=this.j.ls(f)){var g=this.j.vj(f),b=h.cd(g),x=this.j.Ma(h.Sf(b));b=h.Ya(b),(x=(x&r)!=0)&&b==g&&(this.vl=o);var $=h.V(g);$!=-1&&this.j.Ie($)==l?(c++,x&&(this.vl===-1&&b==$&&(g=this.j.kc(o),this.cf(this.ll(g))&&(this.vl=g)),p++)):(g=h.Na(g))!=-1&&this.j.Ie(g)==l&&(c--,x&&(this.vl===-1&&b===g&&(g=this.j.kc(o),this.cf(this.ll(g))&&(this.vl=g)),p--))}return this.j.D(n,this.jH),this.j.D(l,this.kH),(p!=0?p:c)*(h=u.h.ub(this.jH,this.kH))},v.prototype.ll=function(h){return this.j.fh(h)|this.j.af(h)|this.j.af(this.j.ya(h))},v.prototype.sK=function(h){for(var o=this.j.ya(this.j.ue(h)),r=-1;o!=h;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.ue(o))}return r!=-1?this.j.ya(r):-1},v.prototype.tK=function(h){for(var o=this.j.ya(this.j.kc(h)),r=-1;o!=h;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.kc(o))}return r!=-1?this.j.ya(r):-1},v.prototype.hJ=function(h,o,r,n,l){var c=this.j.g,p=h,f=this.j.ya(p);this.j.Kb(p,r,1),this.j.Kb(f,r,1),this.vl=-1;for(var g=this.gB(c,p),b=p,x=-1,$=!1,E=1;;){var O=this.j.ue(p);if(O==f)break;if(f=this.j.kc(f),this.j.ya(O)!=f){if((p=this.sK(p))==-1){$=!0;break}f=this.j.ya(p)}else p=O;if(p==h){x=h;break}if(O=this.ll(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),b=p,g+=this.gB(c,p),E++}if(x==-1)for(p=h,f=this.j.ya(p),x=p;(h=this.j.kc(p))!=f;){if(f=this.j.ue(f),this.j.ya(h)!=f){if((p=this.tK(p))==-1){$=!0;break}f=this.j.ya(p)}else p=h;if(O=this.ll(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),x=p,g+=this.gB(c,p),E++}else if(this.vl!=-1&&(b=this.vl,x=this.j.ue(this.vl),this.j.ya(x)!=this.j.kc(this.j.ya(b))&&(x=this.sK(b))==-1))throw u.i.Ra();for(0<=g||(p=x,x=this.j.ya(b),b=this.j.ya(p)),r=c.wf(o,-1),p=b,b=this.j.lk(b),$=this.j.vf(x)==b&&$,g=this.$w(b,c),g=this.um(g,l),c.kj(r,g),n!=-1&&this.j.pn(b,n,1),b=0,E=$?u.P.truncate((E+1)/2):-1;h=this.j.vf(p),g=this.$w(h,c),g=this.um(g,l),c.kj(r,g),b++,n!=-1&&this.j.pn(h,n,1),$&&b==E&&(r=c.wf(o,-1),c.kj(r,g)),p!=x;)if(h=this.j.kc(p),this.j.ue(this.j.ya(p))!=this.j.ya(h)){if((p=this.tK(p))==-1)throw u.i.Ra()}else p=h},v.prototype.Rt=function(h){for(var o=this.j.g.Kg(1607),r=this.j.bh(),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var l=this.j.Je(n),c=l;do this.j.Bb(c,r)!=1&&this.cf(this.ll(c))&&this.hJ(c,o,r,-1,h),c=this.j.kc(this.j.ya(c));while(c!=l)}return this.j.Lg(r),o},v.prototype.YX=function(h){for(var o=this.j.g,r=o.Kg(1607),n=o.Kg(550),l=this.j.bh(),c=this.j.Fp(),p=-1,f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var g=this.j.Je(f),b=g;do{var x=this.j.Bb(b,l);x!=1&&(x=this.ll(b),this.cf(x)&&this.hJ(b,r,l,c,h)),b=this.j.kc(this.j.ya(b))}while(b!=g)}for(f=this.j.Oe;f!=-1;f=this.j.Tf(f))(x=this.j.og(f,c))!=1&&(x=this.j.yd(f),this.cf(x)&&(p==-1&&(p=o.wf(n,-1)),(g=this.j.mm(f))!=-1&&(g=this.j.vj(g),g=this.um(g,h),o.kj(p,g))));return this.j.Lg(l),this.j.Gp(c),(h=[])[0]=n,h[1]=r,h},v.prototype.pr=function(){for(var h=this.j.g,o=h.Kg(550),r=h.wf(o,-1),n=this.j.Oe;n!=-1;n=this.j.Tf(n))if(this.cf(this.j.yd(n))){for(var l=-1,c=this.j.mm(n);c!=-1;c=this.j.ls(c)){var p=this.j.vj(c);l==-1&&(l=p);var f=this.j.Ma(h.Sf(h.cd(p)));if(this.cf(f)){l=p;break}}h.kj(r,l)}return o},v.prototype.eq=function(h){this.Ij=[];for(var o=0;o<h;o++)this.Ij[o]=!1},v.WV=function(h,o,r){var n=h.Ja(),l=Array(1e3);u.P.bv(l,null);var c=u.P.mg(1e3,0),p=h.I(),f=!0,g=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw u.i.Ra();for(var b=0;b<p;){var x=u.P.truncate(h.gW(l,b)-b);g?u.jd.nK(o,l,x,r,c):u.jd.oK(o,l,x,r,c);for(var $=0,E=0;E<x;E++)c[E]==0&&(f&&(f=!1,n.Gd(h,0,b)),$!=E&&n.Gd(h,b+$,b+E),$=E+1);f||$==x||n.Gd(h,b+$,b+x),b+=x}return f?h:n},v.uG=function(h,o,r){return h instanceof u.ee?v.WV(h,o,r):o instanceof u.Ta?h.B()||o.B()?h.Ja():u.Vk.uU(r,h,o)?u.Vk.xO(h,o):h.Ja():v.XV(h,o,r)},v.Cv=function(h,o,r,n){var l=new u.l;h.A(l);var c=new u.l;o.A(c);var p=new u.l;if(p.L(l),p.$b(c),r=u.ua.Xd(r,p,!0),(p=new u.l).L(c),c=u.ua.Gr(r),p.X(c,c),!l.isIntersecting(p)){if(h.Eb()<=o.Eb())return v.mi(v.Ue(h.Ja()),h,"&");if(h.Eb()>o.Eb())return v.mi(v.Ue(o.Ja()),h,"&")}return c=new v,p=(l=new u.hd).Ib(v.Ue(h)),o=l.Ib(v.Ue(o)),c.Gt(l,r,n),n=c.Cv(p,o),h=v.mi(l.Ke(n),h,"&"),u.ba.Ic(h.K())&&(h.Eh(2,r),h.K()==1736&&h.hm()),h},v.XV=function(h,o,r){if(h.B()||o.B())return h.Ja();var n=[null],l=[0],c=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw u.i.Ra();return n[0]=h.D(),c?u.jd.nK(o,n,1,r,l):u.jd.oK(o,n,1,r,l),l[0]==0?h.Ja():h},v.prototype.GU=function(h,o,r,n,l){if(h.B())return h;var c=new u.hd;return h=c.Ib(h),this.Ok(c,h,o,r,n,l)},v.prototype.IU=function(h,o,r,n,l,c){if(l&&h.jc(o)!=550){var p=new u.MC;p.PX(h,r),p.Pg?(u.Vk.W(h,r,c,!0),l=!1):this.j.ty(r)}else u.Vk.W(h,r,c,!0),l=!1;if(n&&h.jc(o)!=550?this.j.rJ(h,o,c):this.j.qJ(h,o,c),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(h,o,r,n,!1,c);if(this.j.ty(NaN),c=this.j.Ma(o),this.eq(c+1),this.Ij[c]=!0,h.jc(o)==1736||n&&h.jc(o)!=550)return h.$o(o,0),o=this.Qt(o,-1,-1),(h=h.Ke(o)).$o(0),l?h.Eh(1,0):(h.Eh(2,r),h.hm()),h;if(h.jc(o)==1607)return o=this.Rt(-1),h=h.Ke(o),l||h.Eh(2,r),h;if(h.jc(o)==550)return o=this.pr(),h=h.Ke(o),l||h.Eh(2,r),h;throw u.i.Ra()},v.prototype.Ok=function(h,o,r,n,l,c){this.j=new u.ku;try{return this.IU(h,o,r,n,l,c)}finally{this.j.Wg()}},v.Ok=function(h,o,r,n,l){return new v().GU(h,o,r,n,l)},v.prototype.HU=function(h,o,r,n){this.Ov=h,this.j=new u.ku,h=o.Kn(r);var l=o.jc(r);if(h!=1||l==550?this.j.qJ(o,r,n):this.j.rJ(o,r,n),!this.j.kA)if(this.j.ty(NaN),n=this.j.Ma(r),this.eq(n+1),this.Ij[n]=!0,o.jc(r)==1736||h==1&&o.jc(r)!=550)o.$o(r,0),n=this.Qt(r,-1,-1),o.cC(n,r),o.wB(n);else if(o.jc(r)==1607)n=this.Rt(-1),o.cC(n,r),o.wB(n);else{if(o.jc(r)!=550)throw u.i.ga("internal error");n=this.pr(),o.cC(n,r),o.wB(n)}},v.prototype.km=function(h,o){var r=u.ba.uf(this.j.g.jc(h)),n=u.ba.uf(this.j.g.jc(o));if(r>n)return h;var l=this.j.Ma(h),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(h)]=!0,r==2&&n==2)return this.Qt(h,o,-1);if(r==1&&n==2||r==1&&n==1)return this.Rt(-1);if(r==0)return this.pr();throw u.i.Ra()},v.prototype.Cv=function(h,o){var r=u.ba.uf(this.j.g.jc(h)),n=u.ba.uf(this.j.g.jc(o)),l=this.j.Ma(h),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(h)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=h),r==2&&n==2)return this.Qt(h,o,l);if(r==1&&0<n||n==1&&0<r)return this.Rt(l);if(r==0||n==0)return this.pr();throw u.i.Ra()},v.prototype.Kz=function(h,o){var r=u.ba.uf(this.j.g.jc(h)),n=u.ba.uf(this.j.g.jc(o)),l=this.j.Ma(h),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(h)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=h),r==2&&n==2)return this.XX(h,o,l);if(r==1&&0<n||n==1&&0<r)return this.YX(l);if(r==0||n==0)return(h=[])[0]=this.pr(),h;throw u.i.Ra()},v.prototype.gp=function(h,o){var r=u.ba.uf(this.j.g.jc(h)),n=u.ba.uf(this.j.g.jc(o)),l=this.j.Ma(h),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(h)]=!0,this.Ij[this.j.Ma(o)]=!0,r==2&&n==2)return this.Qt(h,o,-1);if(r==1&&n==1)return this.Rt(-1);if(r==0&&n==0)return this.pr();throw u.i.Ra()},v.Ue=function(h){var o=h.K();return o==197?(o=new u.Ea(h.description),h.B()||o.bd(h,!1),o):o==33?(o=new u.ee(h.description),h.B()||o.add(h),o):o==322?(o=new u.Ua(h.description),h.B()||o.pc(h,!0),o):h},v.mi=function(h,o,r){var n=h.K();return n==197?(o=new u.Ea(h.description),h.B()||o.bd(h,!1),o):n!=33||r!="|"&&r!="^"?n==322?(o=new u.Ua(h.description),h.B()||o.pc(h,!0),o):n==33&&r=="-"&&o.K()==33||n==550&&r=="&"&&o.K()==33?(o=new u.Ta(h.description),h.B()||h.we(0,o),o):h:(o=new u.ee(h.description),h.B()||o.add(h),o)},v.km=function(h,o,r,n){if(h.B()||o.B()||h.Eb()>o.Eb())return v.mi(v.Ue(h),h,"-");var l=new u.l;h.A(l);var c=new u.l;if(o.A(c),!l.isIntersecting(c))return v.mi(v.Ue(h),h,"-");var p=new u.l;return p.L(l),p.$b(c),r=u.ua.Xd(r,p,!0),c=new v,p=(l=new u.hd).Ib(v.Ue(h)),o=l.Ib(v.Ue(o)),c.Gt(l,r,n),n=c.km(p,o),n=l.Ke(n),h=v.mi(n,h,"-"),u.ba.Ic(h.K())&&(h.Eh(2,r),h.K()==1736&&h.hm()),h},v.QP=function(h,o,r){if(2>h.length)throw u.i.O("not enough geometries to dissolve");for(var n=0,l=0,c=h.length;l<c;l++)n=Math.max(h[l].Eb(),n);var p=new u.l;p.Pa();var f=new u.hd,g=-1,b=0,x=-1;for(l=0,c=h.length;l<c;l++)if(h[l].Eb()==n)if(h[l].B())x==-1&&(x=l);else{x=l,g==-1?g=f.Ib(v.Ue(h[l])):f.pN(g,v.Ue(h[l]));var $=new u.l;h[l].yc($),p.$b($),b++}return 2>b?v.Ue(h[x]):(h=n==2,o=u.ua.Xd(n==0?o:null,p,!0),new v().Ok(f,g,o,h,!0,r))},v.Kz=function(h,o,r,n){var l=[null,null,null],c=new u.l;h.A(c);var p=new u.l;o.A(p);var f=new u.l;if(f.L(c),f.$b(p),r=u.ua.Xd(r,f,!0),(f=new u.l).L(p),p=u.ua.Gr(r),f.X(p,p),!c.isIntersecting(f)){if(h.Eb()<=o.Eb())return l[(h=v.mi(v.Ue(h.Ja()),h,"&")).Eb()]=h,l;if(h.Eb()>o.Eb())return l[(h=v.mi(v.Ue(o.Ja()),h,"&")).Eb()]=h,l}for(p=new v,f=(c=new u.hd).Ib(v.Ue(h)),o=c.Ib(v.Ue(o)),p.Gt(c,r,n),n=p.Kz(f,o),o=0;o<n.length;o++)p=v.mi(c.Ke(n[o]),h,"&"),u.ba.Ic(p.K())&&(p.Eh(2,r),p.K()==1736&&p.hm()),l[p.Eb()]=p;return l},v.gp=function(h,o,r,n){if(h.Eb()>o.Eb())return v.mi(v.Ue(h),h,"^");if(h.Eb()<o.Eb()||h.B())return v.mi(v.Ue(o),h,"^");if(o.B())return v.mi(v.Ue(h),h,"^");var l=new u.l;h.A(l);var c=new u.l;o.A(c);var p=new u.l;return p.L(l),p.$b(c),r=u.ua.Xd(r,p,!0),c=new v,p=(l=new u.hd).Ib(v.Ue(h)),o=l.Ib(v.Ue(o)),c.Gt(l,r,n),n=c.gp(p,o),h=v.mi(l.Ke(n),h,"^"),u.ba.Ic(h.K())&&(h.Eh(2,r),h.K()==1736&&h.hm()),h},v.prototype.GQ=function(h,o){var r=this.j.g;h=r.wf(h,-1);for(var n=o.size,l=0;l<n;l++){var c=o.get(l);r.kj(h,c)}r.mn(h,!0)},v.prototype.WW=function(h,o){for(var r=this.j.g,n=r.md;n!=-1;n=r.ve(n))if(n==o)for(var l=r.Ob(n);l!=-1;l=r.Sb(l)){var c=r.Ya(l);if(c!=-1)for(var p=r.V(c);p!=-1;){c=this.j.Ie(c);var f=this.j.Ie(p);(c=this.j.nR(c,f))!=-1&&(f=this.j.ya(c),this.j.Kb(c,h,1),this.j.Kb(f,h,2)),c=p,p=r.V(c)}}},v.prototype.YV=function(h,o,r,n){r=this.j.Ma(r),n=this.j.Ma(n);var l=new u.ja(0);l.Jb(256);for(var c=this.j.g,p=this.j.bh(),f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var g=this.j.Je(f);if(g!=-1){var b=g;do{if(this.j.Bb(b,p)!=1){var x=b,$=b,E=!1,O=0;do{if(this.j.Kb(x,p,1),!E){var C=this.j.fh(x);C&n&&this.j.af(x)&r&&($=x,E=!0)}E&&(l.add(this.j.vj(this.j.mm(this.j.lk(x)))),h!=-1&&(C=this.j.fh(x))&n&&(O|=C=this.j.Bb(x,h))),x=this.j.kc(x)}while(x!=$);E&&0<this.j.Mp(this.j.$e($))&&(x=c.Kg(1736),this.GQ(x,l),o!=-1&&c.CJ(x,o,O)),l.clear(!1)}b=this.j.kc(this.j.ya(b))}while(b!=g)}}this.j.Lg(p)},v.prototype.AP=function(h,o,r,n){this.j.tW();var l=-1;h!=-1&&(l=this.j.bh(),this.WW(l,r)),this.YV(l,h,o,r),l!=-1&&(this.j.Lg(l),l=-1);var c=this.j.g;for(h=0,l=c.md;l!=-1;l=c.ve(l))l!=o&&l!=r&&(n.add(l),h++);n.Wd(0,h,function(p,f){return(p=c.qz(c.Ob(p)))<(f=c.qz(c.Ob(f)))?-1:p==f?0:1})},v.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},v}();u.Hg=k}(q||(q={})),function(u){var k=function(){function v(h){h!==void 0?this.Jt(h):this.MB()}return v.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},v.prototype.Nb=function(h){return this==h||h instanceof v&&this.eb==h.eb&&this.jb==h.jb&&this.Lb==h.Lb&&this.qb==h.qb&&this.bb==h.bb&&this.Qb==h.Qb},v.prototype.dc=function(){return u.P.wj(),u.P.wj(),u.P.wj(),u.P.wj(),u.P.wj(),u.P.wj()},v.prototype.Gh=function(h,o){var r=this.qb*h.x+this.bb*h.y+this.Qb;o.x=this.eb*h.x+this.jb*h.y+this.Lb,o.y=r},v.prototype.aY=function(h,o,r){for(var n=0;n<o;n++){var l=h[n].x,c=h[n].y,p=this.eb*l+this.jb*c+this.Lb;l=this.qb*l+this.bb*c+this.Qb,r[n]!=null?r[n].na(p,l):r[n]=u.h.construct(p,l)}},v.prototype.multiply=function(h){v.multiply(this,h,this)},v.multiply=function(h,o,r){var n=h.eb*o.eb+h.qb*o.jb,l=h.jb*o.eb+h.bb*o.jb,c=h.Lb*o.eb+h.Qb*o.jb+o.Lb,p=h.eb*o.qb+h.qb*o.bb,f=h.jb*o.qb+h.bb*o.bb;h=h.Lb*o.qb+h.Qb*o.bb+o.Qb,r.eb=n,r.jb=l,r.Lb=c,r.qb=p,r.bb=f,r.Qb=h},v.prototype.Qf=function(){var h=new v;return h.eb=this.eb,h.jb=this.jb,h.Lb=this.Lb,h.qb=this.qb,h.bb=this.bb,h.Qb=this.Qb,h},v.prototype.hC=function(h){if(!h.B()){for(var o=[],r=0;4>r;r++)o[r]=new u.h;h.iB(o),this.bY(o,o),h.bx(o,4)}},v.prototype.bY=function(h,o){for(var r=0;r<h.length;r++){var n=new u.h,l=h[r];n.x=this.eb*l.x+this.jb*l.y+this.Lb,n.y=this.qb*l.x+this.bb*l.y+this.Qb,o[r]=n}},v.prototype.kS=function(h,o){h.B()||o.B()||h.S()==0||h.da()==0?this.lx():(this.jb=this.qb=0,this.eb=o.S()/h.S(),this.bb=o.da()/h.da(),this.Lb=o.v-h.v*this.eb,this.Qb=o.G-h.G*this.bb)},v.prototype.$X=function(h){var o=new u.h,r=new u.h;o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.sub(o);var n=.5*o.Uk();return o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.add(r),h*(n>(o=.5*o.Uk())?Math.sqrt(n):Math.sqrt(o))},v.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},v.prototype.isIdentity=function(h){if(h!==void 0){var o=u.h.construct(0,1);return this.Gh(o,o),o.sub(u.h.construct(0,1)),o.Uk()>h*h?!1:(o.na(0,0),this.Gh(o,o),!(o.Uk()>h*h)&&(o.na(1,0),this.Gh(o,o),o.sub(u.h.construct(1,0)),o.Uk()<=h*h))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},v.prototype.Di=function(h){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*h*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},v.prototype.ig=function(h,o){this.eb=1,this.jb=0,this.Lb=h,this.qb=0,this.bb=1,this.Qb=o},v.prototype.Jt=function(h,o){o!==void 0?(this.eb=h,this.qb=this.Lb=this.jb=0,this.bb=o,this.Qb=0):this.Jt(h,h)},v.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},v.prototype.kX=function(h){this.lX(Math.cos(h),Math.sin(h))},v.prototype.lX=function(h,o){this.eb=h,this.jb=-o,this.Lb=0,this.qb=o,this.bb=h,this.Qb=0},v.prototype.shift=function(h,o){this.Lb+=h,this.Qb+=o},v.prototype.scale=function(h,o){this.eb*=h,this.jb*=h,this.Lb*=h,this.qb*=o,this.bb*=o,this.Qb*=o},v.prototype.flipX=function(h,o){this.eb=-this.eb,this.jb=-this.jb,this.Lb=h+o-this.Lb},v.prototype.flipY=function(h,o){this.qb=-this.qb,this.bb=-this.bb,this.Qb=h+o-this.Qb},v.prototype.rotate=function(h){var o=new v;o.kX(h),this.multiply(o)},v.prototype.inverse=function(h){if(h!==void 0){var o=this.eb*this.bb-this.jb*this.qb;o==0?h.lx():(o=1/o,h.Lb=(this.jb*this.Qb-this.Lb*this.bb)*o,h.Qb=(this.Lb*this.qb-this.eb*this.Qb)*o,h.eb=this.bb*o,h.jb=-this.jb*o,h.qb=-this.qb*o,h.bb=this.eb*o)}else this.inverse(this)},v}();u.Ed=k}(q||(q={})),function(u){var k=function(){function v(){}return v.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},v.prototype.Jt=function(h,o){this.eb=h,this.jb=this.pf=this.qb=0,this.bb=o,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},v.prototype.translate=function(h,o,r){this.Lb+=h,this.Qb+=o,this.Cg+=r},v.prototype.hC=function(h){if(!h.B()){for(var o=new u.Od[8],r=0;8>r;r++)o[r]=new u.Od;h.iB(o),this.transform(o,8,o),h.bx(o)}},v.prototype.transform=function(h,o,r){for(var n=0;n<o;n++){var l=new u.Od,c=h[n];l.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,l.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,l.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,r[n]=l}},v.prototype.hp=function(h){var o=new u.Od;return o.x=this.eb*h.x+this.jb*h.y+this.Ve*h.z+this.Lb,o.y=this.qb*h.x+this.bb*h.y+this.We*h.z+this.Qb,o.z=this.pf*h.x+this.Ye*h.y+this.Ze*h.z+this.Cg,o},v.prototype.Bg=function(h){v.multiply(this,h,this)},v.multiply=function(h,o,r){var n=h.eb*o.eb+h.qb*o.jb+h.pf*o.Ve,l=h.eb*o.qb+h.qb*o.bb+h.pf*o.We,c=h.eb*o.pf+h.qb*o.Ye+h.pf*o.Ze,p=h.jb*o.eb+h.bb*o.jb+h.Ye*o.Ve,f=h.jb*o.qb+h.bb*o.bb+h.Ye*o.We,g=h.jb*o.pf+h.bb*o.Ye+h.Ye*o.Ze,b=h.Ve*o.eb+h.We*o.jb+h.Ze*o.Ve,x=h.Ve*o.qb+h.We*o.bb+h.Ze*o.We,$=h.Ve*o.pf+h.We*o.Ye+h.Ze*o.Ze,E=h.Lb*o.eb+h.Qb*o.jb+h.Cg*o.Ve+o.Lb,O=h.Lb*o.qb+h.Qb*o.bb+h.Cg*o.We+o.Qb;h=h.Lb*o.pf+h.Qb*o.Ye+h.Cg*o.Ze+o.Cg,r.eb=n,r.qb=l,r.pf=c,r.jb=p,r.bb=f,r.Ye=g,r.Ve=b,r.We=x,r.Ze=$,r.Lb=E,r.Qb=O,r.Cg=h},v.inverse=function(h,o){var r=h.eb*(h.bb*h.Ze-h.Ye*h.We)-h.qb*(h.jb*h.Ze-h.Ye*h.Ve)+h.pf*(h.jb*h.We-h.bb*h.Ve);if(r==0)throw u.i.ga("math singularity");var n=1/r;r=(h.bb*h.Ze-h.Ye*h.We)*n;var l=-(h.jb*h.Ze-h.Ye*h.Ve)*n,c=(h.jb*h.We-h.bb*h.Ve)*n,p=-(h.qb*h.Ze-h.We*h.pf)*n,f=(h.eb*h.Ze-h.pf*h.Ve)*n,g=-(h.eb*h.We-h.qb*h.Ve)*n,b=(h.qb*h.Ye-h.pf*h.bb)*n,x=-(h.eb*h.Ye-h.pf*h.jb)*n;n*=h.eb*h.bb-h.qb*h.jb;var $=-(h.Lb*r+h.Qb*l+h.Cg*c),E=-(h.Lb*p+h.Qb*f+h.Cg*g);h=-(h.Lb*b+h.Qb*x+h.Cg*n),o.eb=r,o.qb=p,o.pf=b,o.jb=l,o.bb=f,o.Ye=x,o.Ve=c,o.We=g,o.Ze=n,o.Lb=$,o.Qb=E,o.Cg=h},v.prototype.Qf=function(){var h=new v;return h.eb=this.eb,h.qb=this.qb,h.pf=this.pf,h.jb=this.jb,h.bb=this.bb,h.Ye=this.Ye,h.Ve=this.Ve,h.We=this.We,h.Ze=this.Ze,h.Lb=this.Lb,h.Qb=this.Qb,h.Cg=this.Cg,h},v}();u.FY=k}(q||(q={})),function(u){var k=function(h){function o(r){if(r!==void 0)r=h.call(this,r.dc(),r)||this;else{(r=h.call(this)||this).dg=[],r.dg[0]=0,r.Ba=1,r.wh=[];for(var n=0;10>n;n++)r.wh[n]=-1;r.wh[r.dg[0]]=0}return r.lq=!0,r}return pe(o,h),o.prototype.se=function(r){this.hasAttribute(r)||(this.wh[r]=0,this.eD())},o.prototype.removeAttribute=function(r){if(r==0)throw u.i.O("Position attribue cannot be removed");this.hasAttribute(r)&&(this.wh[r]=-1,this.eD())},o.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var r=0;r<this.wh.length;r++)this.wh[r]=-1;this.wh[this.dg[0]]=0,this.lq=!0},o.prototype.zF=function(){return v.fz().add(this)},o.pg=function(){return v.fz().VR()},o.prototype.oM=function(){var r=this.dc();return new u.sa(r,this)},o.prototype.eD=function(){for(var r=this.Ba=0,n=0;10>r;r++)0<=this.wh[r]&&(this.dg[n]=r,this.wh[r]=n,n++,this.Ba++);this.lq=!0},o.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},o.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof o)||r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=r.dg[n])return!1;return this.lq==r.lq},o.prototype.BG=function(r){if(r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=r.dg[n])return!1;return!0},o.Kw=function(r,n){for(var l=[],c=0;c<r.Ba;c++)l[c]=-1;c=0;for(var p=r.Ba;c<p;c++)l[c]=n.Rf(r.ld(c));return l},o.wR=function(r,n){return(r=new o(r)).se(n),r.zF()},o.xR=function(r,n){for(var l=null,c=0;10>c;c++)!r.hasAttribute(c)&&n.hasAttribute(c)&&(l==null&&(l=new o(r)),l.se(c));return l!=null?l.zF():r},o}(u.sa);u.fe=k;var v=function(){function h(){this.map=[];var o=new k;this.add(o),(o=new k).se(1),this.add(o)}return h.fz=function(){return h.XK},h.prototype.VR=function(){return h.gt},h.prototype.add=function(o){var r=o.dc();if(h.gt!=null&&h.gt.dc()==r&&o.BG(h.gt))return h.gt;if(h.Fw!=null&&h.Fw.dc()==r&&o.BG(h.Fw))return h.Fw;var n=null;return this.map[r]!==void 0&&(n=this.map[r]),n==null&&((n=o.oM()).Ba==1?h.gt=n:n.Ba==2&&n.ld(1)==1?h.Fw=n:this.map[r]=n),n},h.XK=new h,h}()}(q||(q={}));var Ps={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},kf={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},ao=new(function(){function u(){this.MM=50,this.pp=new Map,this.ij=[]}return u.prototype.clear=function(){this.ij.length=0,this.pp.clear()},u.prototype.delete=function(k){return!!this.pp.delete(k)&&(this.ij.splice(this.ij.indexOf(k),1),!0)},u.prototype.get=function(k){var v=this.pp.get(k);if(v!==void 0)return this.ij[0]!==k&&(this.ij.splice(this.ij.indexOf(k),1),this.ij.unshift(k)),v},u.prototype.has=function(k){return this.pp.has(k)},u.prototype.set=function(k,v){return this.get(k)!==void 0&&this.delete(k),this.ij.unshift(k),this.pp.set(k,v),this.jM(),this},u.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var k=this.ij.pop();this.pp.delete(k)}},u}()),vt=((xi={}).convertJSONToGeometry=function(u){return q.ac.aP(u)},xi.hasM=function(u){return u.hasAttribute(q.Kh.M)},xi.hasZ=function(u){return u.hasAttribute(q.Kh.Z)},xi.getPointX=function(u){return u.Ng()},xi.getPointY=function(u){return u.kh()},xi.getPointZ=function(u){return u.XR()},xi.getPointM=function(u){return u.uR()},xi.getXMin=function(u){return u.gs()},xi.getYMin=function(u){return u.js()},xi.getXMax=function(u){return u.fs()},xi.getYMax=function(u){return u.hs()},xi.getZExtent=function(u){return u.Vg(q.Kh.Z,0)},xi.getMExtent=function(u){return u.Vg(q.Kh.M,0)},xi.exportPaths=function(u){var k=[],v=u.ea(),h=null,o=null,r=u.hasAttribute(q.Kh.Z),n=u.hasAttribute(q.Kh.M);r&&(h=u.vb(q.Kh.Z)),n&&(o=u.vb(q.Kh.M));for(var l=new q.h,c=0;c<v;c++){for(var p=u.Ca(c),f=u.Ka(c),g=0,b=0,x=NaN,$=NaN,E=NaN,O=NaN,C=u.ec(c),N=[],D=p;D<p+f;D++){u.D(D,l),O=E=NaN;var z=[l.x,l.y];r&&(E=h.get(D),z.push(E)),n&&(O=o.get(D),z.push(O)),D==p&&C&&(g=l.x,b=l.y,x=E,$=O),N.push(z)}!C||g==l.x&&b==l.y&&(!r||isNaN(x)&&isNaN(E)||x==E)&&(!n||isNaN($)&&isNaN(O)||$==O)||N.push(N[0].slice(0)),k.push(N)}return k},xi.exportPathsFlat=function(){},xi.exportPoints=function(u){var k=u.hasAttribute(q.Kh.Z),v=u.hasAttribute(q.Kh.M),h=null,o=null;k&&(h=u.vb(q.Kh.Z)),v&&(o=u.vb(q.Kh.M));for(var r=new q.h,n=u.I(),l=[],c=0;c<n;c++){u.D(c,r);var p=[r.x,r.y];k&&p.push(h.get(c)),v&&p.push(o.get(c)),l.push(p)}return l},xi.exportPointsFlat=function(){},xi),na=new Map;return function(){function u(){}return u.buffer=pi,u.clip=P,u.contains=j,u.convexHull=Ot,u.crosses=F,u.cut=L,u.densify=Mf,u.difference=Ct,u.disjoint=st,u.distance=V,u.equals=J,u.extendedSpatialReferenceInfo=A,u.generalize=w0,u.geodesicArea=Ef,u.geodesicBuffer=Ge,u.geodesicDensify=mv,u.geodesicLength=bv,u.intersect=Ht,u.intersects=Q,u.isSimple=yt,u.nearestCoordinate=fr,u.nearestVertex=Tf,u.nearestVertices=Fl,u.offset=Ve,u.overlaps=nt,u.planarArea=gv,u.planarLength=vv,u.relate=pt,u.simplify=$t,u.symmetricDifference=Nt,u.touches=Z,u.union=Pt,u.within=et,u.rotate=q.Dx.rotate,u.flipHorizontal=q.Dx.EQ,u.flipVertical=q.Dx.FQ,u.intersectLinesToPoints=Mv,u.ExtendedParams=q.tC,u.clearDefaultSpatialReferenceTolerance=Tv,u.changeDefaultSpatialReferenceTolerance=$v,u._enableProjection=wv,u._project=Sv,u._getTransformation=_v,u._getTransformationBySuitability=xv,u}()}var s=i();s!==void 0&&(t.exports=s)}(My,My.exports);var QO=My.exports;const oe=Jk(QO),hit=lit({__proto__:null,default:oe},[QO]),uit=Object.freeze(Object.defineProperty({__proto__:null,G:oe,g:hit},Symbol.toStringTag,{value:"Module"})),me={convertToGEGeometry:cit,exportPoint:pit,exportPolygon:dit,exportPolyline:fit,exportMultipoint:yit,exportExtent:mit};function cit(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function pit(t,e,i){const s=t.hasZ(e),a=t.hasM(e),d=new Yt({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return s&&(d.z=t.getPointZ(e)),a&&(d.m=t.getPointM(e)),d.cache._geVersion=e,d}function dit(t,e,i){const s=new Jo({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function fit(t,e,i){const s=new Zr({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function yit(t,e,i){const s=new t0({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return s.cache._geVersion=e,s}function mit(t,e,i){const s=t.hasZ(e),a=t.hasM(e),d=new Ae({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(s){const y=t.getZExtent(e);d.zmin=y.vmin,d.zmax=y.vmax}if(a){const y=t.getMExtent(e);d.mmin=y.vmin,d.mmax=y.vmax}return d.cache._geVersion=e,d}const git=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:me},Symbol.toStringTag,{value:"Module"}));function Se(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function vit(t){return oe.extendedSpatialReferenceInfo(t)}function bit(t,e){return oe.clip(me,Se(t),t,e)}function wit(t,e){return oe.cut(me,Se(t),t,e)}function _it(t,e){return oe.contains(me,Se(t),t,e)}function xit(t,e){return oe.crosses(me,Se(t),t,e)}function Sit(t,e,i){return oe.distance(me,Se(t),t,e,i)}function $it(t,e){return oe.equals(me,Se(t),t,e)}function Tit(t,e){return oe.intersects(me,Se(t),t,e)}function Mit(t,e){return oe.touches(me,Se(t),t,e)}function Eit(t,e){return oe.within(me,Se(t),t,e)}function Iit(t,e){return oe.disjoint(me,Se(t),t,e)}function Ait(t,e){return oe.overlaps(me,Se(t),t,e)}function kit(t,e,i){return oe.relate(me,Se(t),t,e,i)}function Oit(t){return oe.isSimple(me,Se(t),t)}function Pit(t){return oe.simplify(me,Se(t),t)}function Cit(t,e=!1){return oe.convexHull(me,Se(t),t,e)}function Nit(t,e){return oe.difference(me,Se(t),t,e)}function Lit(t,e){return oe.symmetricDifference(me,Se(t),t,e)}function Rit(t,e){return oe.intersect(me,Se(t),t,e)}function jit(t,e=null){return oe.union(me,Se(t),t,e)}function Dit(t,e,i,s,a,d){return oe.offset(me,Se(t),t,e,i,s,a,d)}function Fit(t,e,i,s=!1){return oe.buffer(me,Se(t),t,e,i,s)}function zit(t,e,i,s,a,d){return oe.geodesicBuffer(me,Se(t),t,e,i,s,a,d)}function Vit(t,e,i=!0){return oe.nearestCoordinate(me,Se(t),t,e,i)}function Git(t,e){return oe.nearestVertex(me,Se(t),t,e)}function Uit(t,e,i,s){return oe.nearestVertices(me,Se(t),t,e,i,s)}function u4(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function qit(t,e,i){if(t==null)throw new Kc;const s=t.spatialReference;if((i=i??u4(t))==null)throw new Kc;const a=t.constructor.fromJSON(oe.rotate(t,e,i));return a.spatialReference=s,a}function Bit(t,e){if(t==null)throw new Kc;const i=t.spatialReference;if((e=e??u4(t))==null)throw new Kc;const s=t.constructor.fromJSON(oe.flipHorizontal(t,e));return s.spatialReference=i,s}function Hit(t,e){if(t==null)throw new Kc;const i=t.spatialReference;if((e=e??u4(t))==null)throw new Kc;const s=t.constructor.fromJSON(oe.flipVertical(t,e));return s.spatialReference=i,s}function Wit(t,e,i,s){return oe.generalize(me,Se(t),t,e,i,s)}function Jit(t,e,i){return oe.densify(me,Se(t),t,e,i)}function tP(t,e,i,s=0){return oe.geodesicDensify(me,Se(t),t,e,i,s)}function Kit(t,e){return oe.planarArea(me,Se(t),t,e)}function Yit(t,e){return oe.planarLength(me,Se(t),t,e)}function Zit(t,e,i){return oe.geodesicArea(me,Se(t),t,e,i)}function Xit(t,e,i){return oe.geodesicLength(me,Se(t),t,e,i)}function Qit(t,e){return oe.intersectLinesToPoints(me,Se(t),t,e)}function trt(t,e){oe.changeDefaultSpatialReferenceTolerance(t,e)}function ert(t){oe.clearDefaultSpatialReferenceTolerance(t)}let Kc=class extends Error{constructor(){super("Illegal Argument Exception")}};const Tft=Object.freeze(Object.defineProperty({__proto__:null,buffer:Fit,changeDefaultSpatialReferenceTolerance:trt,clearDefaultSpatialReferenceTolerance:ert,clip:bit,contains:_it,convexHull:Cit,crosses:xit,cut:wit,densify:Jit,difference:Nit,disjoint:Iit,distance:Sit,equals:$it,extendedSpatialReferenceInfo:vit,flipHorizontal:Bit,flipVertical:Hit,generalize:Wit,geodesicArea:Zit,geodesicBuffer:zit,geodesicDensify:tP,geodesicLength:Xit,intersect:Rit,intersectLinesToPoints:Qit,intersects:Tit,isSimple:Oit,nearestCoordinate:Vit,nearestVertex:Git,nearestVertices:Uit,offset:Dit,overlaps:Ait,planarArea:Kit,planarLength:Yit,relate:kit,rotate:qit,simplify:Pit,symmetricDifference:Lit,touches:Mit,union:jit,within:Eit},Symbol.toStringTag,{value:"Module"}));var Z3;let oi=Z3=class extends gt{static from(t){return Xh(Z3,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};w([T({type:Number,json:{write:!0}})],oi.prototype,"dpi",void 0),w([T()],oi.prototype,"floors",void 0),w([T({type:String,json:{write:!0}})],oi.prototype,"gdbVersion",void 0),w([T({types:e0,json:{read:xl,write:!0}})],oi.prototype,"geometry",void 0),w([T({type:Number,json:{write:!0}})],oi.prototype,"geometryPrecision",void 0),w([T({type:Number,json:{write:!0}})],oi.prototype,"height",void 0),w([T({type:[Number],json:{write:!0}})],oi.prototype,"layerIds",void 0),w([T({type:["top","visible","all","popup"],json:{write:!0}})],oi.prototype,"layerOption",void 0),w([T({type:Ae,json:{write:!0}})],oi.prototype,"mapExtent",void 0),w([T({type:Number,json:{write:!0}})],oi.prototype,"maxAllowableOffset",void 0),w([T({type:Boolean,json:{write:!0}})],oi.prototype,"returnFieldName",void 0),w([T({type:Boolean,json:{write:!0}})],oi.prototype,"returnGeometry",void 0),w([T({type:Boolean,json:{write:!0}})],oi.prototype,"returnM",void 0),w([T({type:Boolean,json:{write:!0}})],oi.prototype,"returnUnformattedValues",void 0),w([T({type:Boolean,json:{write:!0}})],oi.prototype,"returnZ",void 0),w([T({type:te,json:{write:!0}})],oi.prototype,"spatialReference",void 0),w([T()],oi.prototype,"sublayers",void 0),w([T({type:oo,json:{write:!0}})],oi.prototype,"timeExtent",void 0),w([T({type:Number,json:{write:!0}})],oi.prototype,"tolerance",void 0),w([T({type:Number,json:{write:!0}})],oi.prototype,"width",void 0),oi=Z3=w([W("esri.rest.support.IdentifyParameters")],oi);const eP=oi,v1={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Zr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:te.WebMercator}),minus180Line:new Zr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:te.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Zr({paths:[[[180,-180],[180,180]]],spatialReference:te.WGS84}),minus180Line:new Zr({paths:[[[-180,-180],[-180,180]]],spatialReference:te.WGS84})}};function Gh(t,e){return Math.ceil((t-e)/(2*e))}function iP(t,e){const i=od(t);for(const s of i)for(const a of s)a[0]+=e;return t}function od(t){return Bh(t)?t.rings:t.paths}function irt(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Dl(t){return typeof t=="string"?er(t):ot(t)}function rP(t,e,i){const s={};for(const a in t){if(a==="declaredClass")continue;const d=t[a];if(d!=null&&typeof d!="function")if(Array.isArray(d)){s[a]=[];for(let y=0;y<d.length;y++)s[a][y]=rP(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i&&i[a]);s[a]=e?y:JSON.stringify(y)}else s[a]=e?d:JSON.stringify(d);else s[a]=d}return s}async function rrt(t,e,i,s){const a=Dl(t),d=e[0].spatialReference,y={...s,query:{...a.query,f:"json",sr:JSON.stringify(d),target:JSON.stringify({geometryType:Qd(e[0]),geometries:e}),cutter:JSON.stringify(i)}},m=await ye(a.path+"/cut",y),{cutIndexes:_,geometries:S=[]}=m.data;return{cutIndexes:_,geometries:S.map(I=>{const A=xl(I);return A.spatialReference=d,A})}}function srt(t){return{geometryType:Qd(t[0]),geometries:t.map(e=>e.toJSON())}}function nrt(t,e,i){const s=GV(e);return t.map(a=>{const d=s.fromJSON(a);return d.spatialReference=i,d})}async function ort(t,e,i){const s=typeof t=="string"?er(t):t,a=e[0].spatialReference,d=Qd(e[0]),y={...i,query:{...s.query,f:"json",sr:a.wkid??JSON.stringify(a),geometries:JSON.stringify(srt(e))}},{data:m}=await ye(s.path+"/simplify",y);return nrt(m.geometries,d,a)}const sP=mt.getLogger("esri.geometry.support.normalizeUtils");function art(t){return t.type==="polygon"}function lrt(t){return t[0].type==="polygon"}function hrt(t){return t[0].type==="polyline"}function urt(t,e){if(!(t instanceof Zr||t instanceof Jo)){const a="straightLineDensify: the input geometry is neither polyline nor polygon";throw sP.error(a),new lt(a)}const i=od(t),s=[];for(const a of i){const d=[];s.push(d),d.push([a[0][0],a[0][1]]);for(let y=0;y<a.length-1;y++){const m=a[y][0],_=a[y][1],S=a[y+1][0],I=a[y+1][1],A=Math.sqrt((S-m)*(S-m)+(I-_)*(I-_)),P=(I-_)/A,L=(S-m)/A,j=A/e;if(j>1){for(let Q=1;Q<=j-1;Q++){const Z=Q*e,et=L*Z+m,st=P*Z+_;d.push([et,st])}const F=(A+Math.floor(j-1)*e)/2,V=L*F+m,J=P*F+_;d.push([V,J])}d.push([S,I])}}return art(t)?new Jo({rings:s,spatialReference:t.spatialReference}):new Zr({paths:s,spatialReference:t.spatialReference})}function oS(t,e,i){if(e){const s=urt(t,1e6);t=yc(s,!0)}return i&&(t=iP(t,i)),t}function aS(t,e,i){if(Array.isArray(t)){const s=t[0];if(s>e){const a=Gh(s,e);t[0]=s+a*(-2*e)}else if(s<i){const a=Gh(s,i);t[0]=s+a*(-2*i)}}else{const s=t.x;if(s>e){const a=Gh(s,e);t=t.clone().offset(a*(-2*e),0)}else if(s<i){const a=Gh(s,i);t=t.clone().offset(a*(-2*i),0)}}return t}function crt(t,e){let i=-1;for(let s=0;s<e.cutIndexes.length;s++){const a=e.cutIndexes[s],d=e.geometries[s],y=od(d);for(let m=0;m<y.length;m++){const _=y[m];_.some(S=>{if(S[0]<180)return!0;{let I=0;for(let P=0;P<_.length;P++){const L=_[P][0];I=L>I?L:I}I=Number(I.toFixed(9));const A=-360*Gh(I,180);for(let P=0;P<_.length;P++){const L=d.getPoint(m,P);d.setPoint(m,P,L.clone().offset(A,0))}return!0}})}if(a===i){if(lrt(t))for(const m of od(d))t[a]=t[a].addRing(m);else if(hrt(t))for(const m of od(d))t[a]=t[a].addPath(m)}else i=a,t[a]=d}return t}async function c4(t,e,i){if(!Array.isArray(t))return c4([t],e);e&&typeof e!="string"&&sP.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s=typeof e=="string"?e:(e==null?void 0:e.url)??_e.geometryServiceUrl;let a,d,y,m,_,S,I,A,P=0;const L=[],j=[];for(const et of t)if(et!=null)if(a||(a=et.spatialReference,d=pn(a),y=a.isWebMercator,S=y?102100:4326,m=v1[S].maxX,_=v1[S].minX,I=v1[S].plus180Line,A=v1[S].minus180Line),d)if(et.type==="mesh")j.push(et);else if(et.type==="point")j.push(aS(et.clone(),m,_));else if(et.type==="multipoint"){const st=et.clone();st.points=st.points.map(nt=>aS(nt,m,_)),j.push(st)}else if(et.type==="extent"){const st=et.clone()._normalize(!1,!1,d);j.push(st.rings?new Jo(st):st)}else if(et.extent){const st=et.extent,nt=Gh(st.xmin,_)*(2*m);let pt=nt===0?et.clone():iP(et.clone(),nt);st.offset(nt,0),st.intersects(I)&&st.xmax!==m?(P=st.xmax>P?st.xmax:P,pt=oS(pt,y),L.push(pt),j.push("cut")):st.intersects(A)&&st.xmin!==_?(P=st.xmax*(2*m)>P?st.xmax*(2*m):P,pt=oS(pt,y,360),L.push(pt),j.push("cut")):j.push(pt)}else j.push(et.clone());else j.push(et);else j.push(et);let F=Gh(P,m),V=-90;const J=F,Q=new Zr;for(;F>0;){const et=360*F-180;Q.addPath([[et,V],[et,-1*V]]),V*=-1,F--}if(L.length>0&&J>0){const et=crt(L,await rrt(s,L,Q,i)),st=[],nt=[];for(let $t=0;$t<j.length;$t++){const Ot=j[$t];if(Ot!=="cut")nt.push(Ot);else{const Ct=et.shift(),Nt=t[$t];Nt!=null&&Nt.type==="polygon"&&Nt.rings&&Nt.rings.length>1&&Ct.rings.length>=Nt.rings.length?(st.push(Ct),nt.push("simplify")):nt.push(y?qh(Ct):Ct)}}if(!st.length)return nt;const pt=await ort(s,st,i),yt=[];for(let $t=0;$t<nt.length;$t++){const Ot=nt[$t];Ot!=="simplify"?yt.push(Ot):yt.push(y?qh(pt.shift()):pt.shift())}return yt}const Z=[];for(let et=0;et<j.length;et++){const st=j[et];if(st!=="cut")Z.push(st);else{const nt=L.shift();Z.push(y===!0?qh(nt):nt)}}return Z}function Mft(t,e){const i=pn(e);if(i){const[s,a]=i.valid,d=a-s;if(t<s)for(;t<s;)t+=d;if(t>a)for(;t>a;)t-=d}return t}async function Eft(t,e){const{WhereClause:i}=await bt(()=>import("./WhereClause-2187e7a0.js").then(s=>s.W),["assets/WhereClause-2187e7a0.js","assets/executionError-c92d3b85.js"]);return i.create(t,e)}function p4(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}const nP=96;function oP(t,e){const i=e||t.extent,s=t.width,a=ea(i&&i.spatialReference);return i&&s?i.width/s*a*pT*nP:0}function Ift(t,e){return t/(ea(e)*pT*nP)}function Aft(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?aP(t.view.floors,e.floorInfo.floorField):null}function ng(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?aP(t,e.floorInfo.floorField):null}function aP(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(s=>s!=="").map(s=>`'${s}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function lS(t,e,i){return e.flatten(({sublayers:a})=>a).length!==t.length?!0:!!t.some(a=>a.originIdOf("minScale")>i||a.originIdOf("maxScale")>i||a.originIdOf("renderer")>i||a.originIdOf("labelingInfo")>i||a.originIdOf("opacity")>i||a.originIdOf("labelsVisible")>i||a.originIdOf("source")>i)||!hP(t,e)}function lP(t,e,i){return!!t.some(s=>{const a=s.source;return!(!a||a.type==="map-layer"&&a.mapLayerId===s.id&&(a.gdbVersion==null||a.gdbVersion===i))||s.originIdOf("renderer")>St.SERVICE||s.originIdOf("labelingInfo")>St.SERVICE||s.originIdOf("opacity")>St.SERVICE||s.originIdOf("labelsVisible")>St.SERVICE})||!hP(t,e)}function hP(t,e){if(!t||!t.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:d})=>d&&d.toArray().reverse()).map(d=>d.id).toArray();if(t.length>i.length)return!1;let s=0;const a=i.length;for(const{id:d}of t){for(;s<a&&i[s]!==d;)s++;if(s>=a)return!1}return!0}function prt(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition&&e.layerDefinition.minScale!=null)}const hS=t=>t.spatialReference.wkid||JSON.stringify(t.spatialReference);function drt(t,e){const{dpi:i,gdbVersion:s,geometry:a,geometryPrecision:d,height:y,layerOption:m,mapExtent:_,maxAllowableOffset:S,returnFieldName:I,returnGeometry:A,returnUnformattedValues:P,returnZ:L,spatialReference:j,timeExtent:F,tolerance:V,width:J}=t.toJSON(),{dynamicLayers:Q,layerDefs:Z,layerIds:et}=frt(t),st=e&&e.geometry!=null?e.geometry:null,nt={geometryPrecision:d,maxAllowableOffset:S,returnFieldName:I,returnGeometry:A,returnUnformattedValues:P,returnZ:L,tolerance:V},pt=st&&st.toJSON()||a;if(nt.imageDisplay=`${J},${y},${i}`,s&&(nt.gdbVersion=s),pt&&(delete pt.spatialReference,nt.geometry=JSON.stringify(pt),nt.geometryType=Qd(pt)),j?nt.sr=j.wkid||JSON.stringify(j):pt&&pt.spatialReference?nt.sr=hS(pt):_&&_.spatialReference&&(nt.sr=hS(_)),nt.time=F?[F.start,F.end].join(","):null,_){const{xmin:yt,ymin:$t,xmax:Ot,ymax:Ct}=_;nt.mapExtent=`${yt},${$t},${Ot},${Ct}`}return Z&&(nt.layerDefs=Z),Q&&!Z&&(nt.dynamicLayers=Q),nt.layers=m==="popup"?"visible":m,et&&!Q&&(nt.layers+=`:${et.join(",")}`),nt}function frt(t){var j,F;const{mapExtent:e,floors:i,width:s,sublayers:a,layerIds:d,layerOption:y,gdbVersion:m}=t,_=(F=(j=a==null?void 0:a.find(V=>V.layer!=null))==null?void 0:j.layer)==null?void 0:F.serviceSublayers,S=y==="popup",I={},A=oP({extent:e,width:s,spatialReference:e==null?void 0:e.spatialReference}),P=[],L=V=>{const J=A===0,Q=V.minScale===0||A<=V.minScale,Z=V.maxScale===0||A>=V.maxScale;if(V.visible&&(J||Q&&Z))if(V.sublayers)V.sublayers.forEach(L);else{if((d==null?void 0:d.includes(V.id))===!1||S&&(!V.popupTemplate||!V.popupEnabled))return;P.unshift(V)}};if(a==null||a.forEach(L),a&&!P.length)I.layerIds=[];else{const V=lP(P,_,m),J=P.map(Q=>{const Z=ng(i,Q);return Q.toExportImageJSON(Z)});if(V)I.dynamicLayers=JSON.stringify(J);else{if(a){let Z=P.map(({id:et})=>et);d&&(Z=Z.filter(et=>d.includes(et))),I.layerIds=Z}else d!=null&&d.length&&(I.layerIds=d);const Q=yrt(i,P);if(Q!=null&&Q.length){const Z={};for(const et of Q)et.definitionExpression&&(Z[et.id]=et.definitionExpression);Object.keys(Z).length&&(I.layerDefs=JSON.stringify(Z))}}}return I}function yrt(t,e){const i=!!(t!=null&&t.length),s=e.filter(a=>a.definitionExpression!=null||i&&a.floorInfo!=null);return s.length?s.map(a=>{const d=ng(t,a),y=p4(d,a.definitionExpression);return{id:a.id,definitionExpression:y??void 0}}):null}let Eo=class extends gt{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,i){return io.fromJSON({attributes:{...i.attributes},geometry:{...i.geometry}})}writeFeature(e,i){if(!e)return;const{attributes:s,geometry:a}=e;s&&(i.attributes={...s}),a!=null&&(i.geometry=a.toJSON(),i.geometryType=zV.toJSON(a.type))}};w([T({type:String,json:{write:!0}})],Eo.prototype,"displayFieldName",void 0),w([T({type:io})],Eo.prototype,"feature",void 0),w([kt("feature",["attributes","geometry"])],Eo.prototype,"readFeature",null),w([At("feature")],Eo.prototype,"writeFeature",null),w([T({type:Number,json:{write:!0}})],Eo.prototype,"layerId",void 0),w([T({type:String,json:{write:!0}})],Eo.prototype,"layerName",void 0),Eo=w([W("esri.rest.support.IdentifyResult")],Eo);const mrt=Eo;async function grt(t,e,i){const s=(e=brt(e)).geometry?[e.geometry]:[],a=Dl(t);return a.path+="/identify",c4(s).then(d=>{const y=drt(e,{geometry:d&&d[0]}),m=rP({...a.query,f:"json",...y}),_=irt(m,i);return ye(a.path,_).then(vrt).then(S=>wrt(S,e.sublayers))})}function vrt(t){const e=t.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map(i=>mrt.fromJSON(i)),e}function brt(t){return t=eP.from(t)}function wrt(t,e){if(!(e!=null&&e.length))return t;const i=new Map;function s(a){i.set(a.id,a),a.sublayers&&a.sublayers.forEach(s)}e.forEach(s);for(const a of t.results)a.feature.sourceLayer=i.get(a.layerId);return t}let yr=class extends gt{constructor(e){super(e),this.contains=!0,this.dynamicLayerInfos=null,this.gdbVersion=null,this.geometryPrecision=null,this.layerDefinitions=null,this.layerIds=null,this.maxAllowableOffset=null,this.outSpatialReference=null,this.returnGeometry=!1,this.searchFields=null,this.searchText=null}};w([T({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],yr.prototype,"contains",void 0),w([T({type:[Object],json:{read:{source:"dynamicLayers"},write:{target:"dynamicLayers"}}})],yr.prototype,"dynamicLayerInfos",void 0),w([T({type:String,json:{write:!0}})],yr.prototype,"gdbVersion",void 0),w([T({type:Number,json:{write:!0}})],yr.prototype,"geometryPrecision",void 0),w([T({type:[Object],json:{write:!0}})],yr.prototype,"layerDefinitions",void 0),w([T({type:[Number],json:{write:!0}})],yr.prototype,"layerIds",void 0),w([T({type:Number,json:{write:!0}})],yr.prototype,"maxAllowableOffset",void 0),w([T({type:te,json:{read:{source:"outSR"},write:{target:"outSR"}}})],yr.prototype,"outSpatialReference",void 0),w([T({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],yr.prototype,"returnGeometry",void 0),w([T({type:[String],json:{write:!0}})],yr.prototype,"searchFields",void 0),w([T({type:String,json:{write:!0}})],yr.prototype,"searchText",void 0),yr=w([W("esri.rest.support.FindParameters")],yr),yr.from=ki(yr);var X3;let Ga=X3=class extends nf{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new X3({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};w([T()],Ga.prototype,"displayValueEnabled",void 0),w([T()],Ga.prototype,"max",void 0),w([T()],Ga.prototype,"min",void 0),w([T()],Ga.prototype,"step",void 0),w([T()],Ga.prototype,"value",void 0),Ga=X3=w([W("esri.support.Action.ActionSlider")],Ga);const _rt=Ga,uP={hide:"hide",hideChildren:"hide-children"};function og(t){if(t)return t.listMode!=null?t.listMode:void 0}function xrt(t){if(t)return t.minScale!=null?t.minScale:void 0}function Srt(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function $rt(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const i=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function cP(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==uP.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Trt(t){const e=t&&(t.get("layer.layer")||t.layer);if(!e)return!1;const i=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function Mrt(t){return og(t)!==uP.hide}function Ert(t,e){if(!t||isNaN(e))return!1;const i=xrt(t),s=Srt(t),a=i!=null&&!isNaN(i)&&i>0&&e>i,d=s!=null&&!isNaN(s)&&s>0&&e<s;return a||d}function pP(t,e){t&&t.sort((i,s)=>{const a=e.indexOf(i.uid),d=e.indexOf(s.uid);return a>d?-1:a<d?1:0})}function Irt(t,e){const i=t==null?void 0:t.layer;if(!i)return;const s=cP(i);s&&pP(i.get(s),e)}function uS(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function I2(t,e){var s;const i=(s=t.layer)==null?void 0:s.uid;return i!=null?e.find(a=>{var d;return((d=a.layer)==null?void 0:d.uid)===i}):null}function Art(t){const e=krt(t)?t:null,i=t==null?void 0:t.parent,s=(i==null?void 0:i.type)==="map-image"?e==null?void 0:e.source:null,a="";return s&&i?{layer:i,title:a,sublayerIds:[s.mapLayerId]}:{layer:t,title:a}}function krt(t){return!!(t!=null&&t.layer)}function Ort(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,s=Array.isArray(t)?t:Prt(t);i.push(...s)}}function Prt(t){return t.split(",").map(e=>e.trim())}function cS(t){return t&&typeof t.render=="function"}function Pft(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const dP="esri-layer-list-panel",z0=`${dP}__content`,po={base:dP,content:z0,contentLegend:`${z0}--legend`,contentString:`${z0}--string`,contentElement:`${z0}--html-element`,contentWidget:`${z0}--widget`},Crt="legends";let ms=class extends i0($u){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(It(()=>this.content,e=>this._createLegend(e),xe))}destroy(){this._legend=Je(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var a;const{listItem:e,_legend:i,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return zt("div",{class:po.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:s}=this;return!e||s?null:e==="legend"&&i?zt("div",{class:this.classes(po.content,po.contentLegend),key:i},i.render()):typeof e=="string"?zt("div",{class:this.classes(po.content,po.contentString),key:e,innerHTML:e}):cS(e)?zt("div",{class:this.classes(po.content,po.contentWidget),key:e},e.render()):e instanceof HTMLElement?zt("div",{class:this.classes(po.content,po.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:s}=e;return i&&s?{view:s,layerInfos:[Art(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await bt(()=>import("./Legend-e9faba93.js"),["assets/Legend-e9faba93.js","assets/EffectView-caaae2d8.js","assets/pixelRangeUtils-cc28ceb4.js","assets/utils-3f44cbf2.js","assets/utils-a941d33c.js","assets/symbolUtils-6f4d9391.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-7ce2d52a.js","assets/devEnvironmentUtils-5002a058.js"]),{listItem:s}=this,a=new i(this._getLegendOptions());this._legend=a,this.notifyChange("className"),this.notifyChange("title");const d=It(()=>{var y,m;return[s==null?void 0:s.view,s==null?void 0:s.layer,(y=s==null?void 0:s.layer)==null?void 0:y.source,(m=s==null?void 0:s.layer)==null?void 0:m.parent]},()=>this._updateLegend(a),xe);this.addHandles(d,Crt),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:cS(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(s=>{const a=this._getWidget(s);return a&&(i=a),!!a}),i}return this._getWidget(e)}};w([T()],ms.prototype,"_legend",void 0),w([T()],ms.prototype,"className",null),w([T()],ms.prototype,"content",void 0),w([T()],ms.prototype,"disabled",null),w([T()],ms.prototype,"image",void 0),w([T()],ms.prototype,"listItem",void 0),w([T()],ms.prototype,"title",null),w([T()],ms.prototype,"open",void 0),w([T()],ms.prototype,"visible",void 0),ms=w([W("esri.widgets.LayerList.ListItemPanel")],ms);const fP=ms;var Tp;const Nrt=Vt.ofType({key:"type",defaultKeyValue:"button",base:nf,typeMap:{button:KE,toggle:YE,slider:_rt}}),yP=Vt.ofType(Nrt),b1="layer",A2="child-list-mode",Lrt="hide",Rrt="esri.widgets.LayerList.ListItem";let qe=Tp=class extends i0(jl(Rt)){constructor(t){super(t),this.actionsSections=new yP,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Vt.ofType(Tp)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([It(()=>this.layer,t=>this._watchLayerProperties(t),xe),It(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),xe),It(()=>this.view,t=>this._updateChildrenView(t),xe),It(()=>this.panel,t=>this._setListItemOnPanel(t),xe),It(()=>[this.layer,this.view],()=>this._getLayerView(),xe)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new fP(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:s}=this;return!s&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!Ert(this.layer,this.get("view.scale"))}get visibilityMode(){return $rt(this.layer)}clone(){return new Tp({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.handles.remove(A2),this.children.removeAll(),!t)return;t.forEach(i=>{this.handles.add(It(()=>i.listMode,()=>this._addChildren(t)),A2)});const e=t.filter(i=>og(i)!==Lrt);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),b1)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>Mrt(e)?new Tp({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Yh).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(b1),this.handles.remove(A2),!t))return;if(this.handles.add(It(()=>t.listMode,()=>this._watchLayerProperties(t)),b1),og(t)==="hide-children")return void this.children.removeAll();const e=cP(t);e&&this.handles.add(It(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},xe),b1)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};w([T({type:yP})],qe.prototype,"actionsSections",void 0),w([T()],qe.prototype,"actionsOpen",void 0),w([T()],qe.prototype,"checkPublishStatusEnabled",void 0),w([T({type:Vt})],qe.prototype,"children",void 0),w([T()],qe.prototype,"childrenSortable",void 0),w([T({readOnly:!0})],qe.prototype,"connectionStatus",null),w([T({readOnly:!0})],qe.prototype,"error",null),w([T()],qe.prototype,"hidden",void 0),w([T({readOnly:!0})],qe.prototype,"incompatible",null),w([T()],qe.prototype,"layer",void 0),w([T({readOnly:!0})],qe.prototype,"layerView",void 0),w([T()],qe.prototype,"listItemCreatedFunction",void 0),w([T()],qe.prototype,"open",void 0),w([T({type:fP})],qe.prototype,"panel",void 0),w([Ne("panel")],qe.prototype,"castPanel",null),w([T()],qe.prototype,"parent",void 0),w([T()],qe.prototype,"sortable",void 0),w([T()],qe.prototype,"title",null),w([T({readOnly:!0})],qe.prototype,"publishing",null),w([T({readOnly:!0})],qe.prototype,"updating",null),w([T()],qe.prototype,"view",void 0),w([T()],qe.prototype,"visible",null),w([T({readOnly:!0})],qe.prototype,"visibleAtCurrentScale",null),w([T({readOnly:!0})],qe.prototype,"visibilityMode",null),qe=Tp=w([W(Rrt)],qe);const d4=qe,zs={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},jrt="hide",mP=Vt.ofType(d4);let Ua=class extends kl.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new mP,this.view=null}initialize(){this.addHandles([It(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),xe),It(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],zs.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,s,a){var L,j;const d=e==null?void 0:e.layer;if(!d)return;const y=(j=(L=this.view)==null?void 0:L.map)==null?void 0:j.layers,m=i?uS(i):y,_=s?uS(s):y;if(!m||!_)return;const{operationalItems:S}=this,I=(i==null?void 0:i.children)||S,A=(s==null?void 0:s.children)||S,P=_.length-a;e.parent=s||null,I.includes(e)&&I.remove(e),m.includes(d)&&m.remove(d),A.includes(e)||A.add(e,P),_.includes(d)||_.add(d,P)}_createLayerViewHandles(e){this.removeHandles(zs.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),zs.layerViews)}_createMapLayerHandles(e){this.removeHandles(zs.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),zs.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:s,checkPublishStatusEnabled:a}=this;return new d4({checkPublishStatusEnabled:a,layer:e,listItemCreatedFunction:s,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>og(i)!==jrt)}_watchLayersListMode(e){this.removeHandles(zs.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(It(()=>i.listMode,()=>this._compileList()),zs.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const i=this._getViewableLayers(e);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(s=>{i.find(a=>a.layer===s)||i.add(this._createListItem(s))})}_removeItems(e){const{operationalItems:i}=this,s=[];i.forEach(a=>{a&&e&&e.includes(a.layer)||s.push(a)}),i.removeMany(s)}_sortItems(e){const{operationalItems:i}=this;i.sort((s,a)=>{const d=e.indexOf(s.layer),y=e.indexOf(a.layer);return d>y?-1:d<y?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([zs.mapLayers,zs.layerViews,zs.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([It(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.allLayers},i=>this._createMapLayerHandles(i),xe),It(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),xe)],zs.viewLayers)}};w([T()],Ua.prototype,"checkPublishStatusEnabled",void 0),w([T()],Ua.prototype,"listItemCreatedFunction",void 0),w([T({type:mP})],Ua.prototype,"operationalItems",void 0),w([T({readOnly:!0})],Ua.prototype,"state",null),w([T()],Ua.prototype,"view",void 0),Ua=w([W("esri.widgets.LayerList.LayerListViewModel")],Ua);const gP=Ua;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function pS(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function so(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?pS(Object(i),!0).forEach(function(s){Drt(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pS(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}function Ey(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ey=function(e){return typeof e}:Ey=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function Drt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xo(){return Xo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Xo.apply(this,arguments)}function Frt(t,e){if(t==null)return{};var i={},s=Object.keys(t),a,d;for(d=0;d<s.length;d++)a=s[d],!(e.indexOf(a)>=0)&&(i[a]=t[a]);return i}function zrt(t,e){if(t==null)return{};var i=Frt(t,e),s,a;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(a=0;a<d.length;a++)s=d[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(i[s]=t[s])}return i}var Vrt="1.15.0";function Go(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ra=Go(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vf=Go(/Edge/i),dS=Go(/firefox/i),ad=Go(/safari/i)&&!Go(/chrome/i)&&!Go(/android/i),vP=Go(/iP(ad|od|hone)/i),bP=Go(/chrome/i)&&Go(/android/i),wP={capture:!1,passive:!1};function Pe(t,e,i){t.addEventListener(e,i,!ra&&wP)}function be(t,e,i){t.removeEventListener(e,i,!ra&&wP)}function ag(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Grt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Bn(t,e,i,s){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&ag(t,e):ag(t,e))||s&&t===i)return t;if(t===i)break}while(t=Grt(t))}return null}var fS=/\s+/g;function zr(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(fS," ").replace(" "+e+" "," ");t.className=(s+(i?" "+e:"")).replace(fS," ")}}function Jt(t,e,i){var s=t&&t.style;if(s){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=i+(typeof i=="string"?"":"px")}}function Oc(t,e){var i="";if(typeof t=="string")i=t;else do{var s=Jt(t,"transform");s&&s!=="none"&&(i=s+" "+i)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function _P(t,e,i){if(t){var s=t.getElementsByTagName(e),a=0,d=s.length;if(i)for(;a<d;a++)i(s[a],a);return s}return[]}function Zn(){var t=document.scrollingElement;return t||document.documentElement}function ji(t,e,i,s,a){if(!(!t.getBoundingClientRect&&t!==window)){var d,y,m,_,S,I,A;if(t!==window&&t.parentNode&&t!==Zn()?(d=t.getBoundingClientRect(),y=d.top,m=d.left,_=d.bottom,S=d.right,I=d.height,A=d.width):(y=0,m=0,_=window.innerHeight,S=window.innerWidth,I=window.innerHeight,A=window.innerWidth),(e||i)&&t!==window&&(a=a||t.parentNode,!ra))do if(a&&a.getBoundingClientRect&&(Jt(a,"transform")!=="none"||i&&Jt(a,"position")!=="static")){var P=a.getBoundingClientRect();y-=P.top+parseInt(Jt(a,"border-top-width")),m-=P.left+parseInt(Jt(a,"border-left-width")),_=y+d.height,S=m+d.width;break}while(a=a.parentNode);if(s&&t!==window){var L=Oc(a||t),j=L&&L.a,F=L&&L.d;L&&(y/=F,m/=j,A/=j,I/=F,_=y+I,S=m+A)}return{top:y,left:m,bottom:_,right:S,width:A,height:I}}}function yS(t,e,i){for(var s=ml(t,!0),a=ji(t)[e];s;){var d=ji(s)[i],y=void 0;if(i==="top"||i==="left"?y=a>=d:y=a<=d,!y)return s;if(s===Zn())break;s=ml(s,!1)}return!1}function Yc(t,e,i,s){for(var a=0,d=0,y=t.children;d<y.length;){if(y[d].style.display!=="none"&&y[d]!==Kt.ghost&&(s||y[d]!==Kt.dragged)&&Bn(y[d],i.draggable,t,!1)){if(a===e)return y[d];a++}d++}return null}function f4(t,e){for(var i=t.lastElementChild;i&&(i===Kt.ghost||Jt(i,"display")==="none"||e&&!ag(i,e));)i=i.previousElementSibling;return i||null}function vs(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Kt.clone&&(!e||ag(t,e))&&i++;return i}function mS(t){var e=0,i=0,s=Zn();if(t)do{var a=Oc(t),d=a.a,y=a.d;e+=t.scrollLeft*d,i+=t.scrollTop*y}while(t!==s&&(t=t.parentNode));return[e,i]}function Urt(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[i][s])return Number(i)}return-1}function ml(t,e){if(!t||!t.getBoundingClientRect)return Zn();var i=t,s=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=Jt(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Zn();if(s||e)return i;s=!0}}while(i=i.parentNode);return Zn()}function qrt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function k2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ld;function xP(t,e){return function(){if(!ld){var i=arguments,s=this;i.length===1?t.call(s,i[0]):t.apply(s,i),ld=setTimeout(function(){ld=void 0},e)}}}function Brt(){clearTimeout(ld),ld=void 0}function SP(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function $P(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var Yr="Sortable"+new Date().getTime();function Hrt(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(a){if(!(Jt(a,"display")==="none"||a===Kt.ghost)){t.push({target:a,rect:ji(a)});var d=so({},t[t.length-1].rect);if(a.thisAnimationDuration){var y=Oc(a,!0);y&&(d.top-=y.f,d.left-=y.e)}a.fromRect=d}})}},addAnimationState:function(s){t.push(s)},removeAnimationState:function(s){t.splice(Urt(t,{target:s}),1)},animateAll:function(s){var a=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var d=!1,y=0;t.forEach(function(m){var _=0,S=m.target,I=S.fromRect,A=ji(S),P=S.prevFromRect,L=S.prevToRect,j=m.rect,F=Oc(S,!0);F&&(A.top-=F.f,A.left-=F.e),S.toRect=A,S.thisAnimationDuration&&k2(P,A)&&!k2(I,A)&&(j.top-A.top)/(j.left-A.left)===(I.top-A.top)/(I.left-A.left)&&(_=Jrt(j,P,L,a.options)),k2(A,I)||(S.prevFromRect=I,S.prevToRect=A,_||(_=a.options.animation),a.animate(S,j,A,_)),_&&(d=!0,y=Math.max(y,_),clearTimeout(S.animationResetTimer),S.animationResetTimer=setTimeout(function(){S.animationTime=0,S.prevFromRect=null,S.fromRect=null,S.prevToRect=null,S.thisAnimationDuration=null},_),S.thisAnimationDuration=_)}),clearTimeout(e),d?e=setTimeout(function(){typeof s=="function"&&s()},y):typeof s=="function"&&s(),t=[]},animate:function(s,a,d,y){if(y){Jt(s,"transition",""),Jt(s,"transform","");var m=Oc(this.el),_=m&&m.a,S=m&&m.d,I=(a.left-d.left)/(_||1),A=(a.top-d.top)/(S||1);s.animatingX=!!I,s.animatingY=!!A,Jt(s,"transform","translate3d("+I+"px,"+A+"px,0)"),this.forRepaintDummy=Wrt(s),Jt(s,"transition","transform "+y+"ms"+(this.options.easing?" "+this.options.easing:"")),Jt(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Jt(s,"transition",""),Jt(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},y)}}}}function Wrt(t){return t.offsetWidth}function Jrt(t,e,i,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*s.animation}var Du=[],O2={initializeByDefault:!0},bf={mount:function(e){for(var i in O2)O2.hasOwnProperty(i)&&!(i in e)&&(e[i]=O2[i]);Du.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Du.push(e)},pluginEvent:function(e,i,s){var a=this;this.eventCanceled=!1,s.cancel=function(){a.eventCanceled=!0};var d=e+"Global";Du.forEach(function(y){i[y.pluginName]&&(i[y.pluginName][d]&&i[y.pluginName][d](so({sortable:i},s)),i.options[y.pluginName]&&i[y.pluginName][e]&&i[y.pluginName][e](so({sortable:i},s)))})},initializePlugins:function(e,i,s,a){Du.forEach(function(m){var _=m.pluginName;if(!(!e.options[_]&&!m.initializeByDefault)){var S=new m(e,i,e.options);S.sortable=e,S.options=e.options,e[_]=S,Xo(s,S.defaults)}});for(var d in e.options)if(e.options.hasOwnProperty(d)){var y=this.modifyOption(e,d,e.options[d]);typeof y<"u"&&(e.options[d]=y)}},getEventProperties:function(e,i){var s={};return Du.forEach(function(a){typeof a.eventProperties=="function"&&Xo(s,a.eventProperties.call(i[a.pluginName],e))}),s},modifyOption:function(e,i,s){var a;return Du.forEach(function(d){e[d.pluginName]&&d.optionListeners&&typeof d.optionListeners[i]=="function"&&(a=d.optionListeners[i].call(e[d.pluginName],s))}),a}};function Krt(t){var e=t.sortable,i=t.rootEl,s=t.name,a=t.targetEl,d=t.cloneEl,y=t.toEl,m=t.fromEl,_=t.oldIndex,S=t.newIndex,I=t.oldDraggableIndex,A=t.newDraggableIndex,P=t.originalEvent,L=t.putSortable,j=t.extraEventProperties;if(e=e||i&&i[Yr],!!e){var F,V=e.options,J="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!ra&&!vf?F=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(F=document.createEvent("Event"),F.initEvent(s,!0,!0)),F.to=y||i,F.from=m||i,F.item=a||i,F.clone=d,F.oldIndex=_,F.newIndex=S,F.oldDraggableIndex=I,F.newDraggableIndex=A,F.originalEvent=P,F.pullMode=L?L.lastPutMode:void 0;var Q=so(so({},j),bf.getEventProperties(s,e));for(var Z in Q)F[Z]=Q[Z];i&&i.dispatchEvent(F),V[J]&&V[J].call(e,F)}}var Yrt=["evt"],Mr=function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.evt,d=zrt(s,Yrt);bf.pluginEvent.bind(Kt)(e,i,so({dragEl:xt,parentEl:yi,ghostEl:ie,rootEl:ri,nextEl:bh,lastDownEl:Iy,cloneEl:ui,cloneHidden:ol,dragStarted:Mp,putSortable:Xi,activeSortable:Kt.active,originalEvent:a,oldIndex:wc,oldDraggableIndex:hd,newIndex:Br,newDraggableIndex:tl,hideGhostForTarget:IP,unhideGhostForTarget:AP,cloneNowHidden:function(){ol=!0},cloneNowShown:function(){ol=!1},dispatchSortableEvent:function(m){br({sortable:i,name:m,originalEvent:a})}},d))};function br(t){Krt(so({putSortable:Xi,cloneEl:ui,targetEl:xt,rootEl:ri,oldIndex:wc,oldDraggableIndex:hd,newIndex:Br,newDraggableIndex:tl},t))}var xt,yi,ie,ri,bh,Iy,ui,ol,wc,Br,hd,tl,w1,Xi,ac=!1,lg=!1,hg=[],Hl,Vs,P2,C2,gS,vS,Mp,Fu,ud,cd=!1,_1=!1,Ay,sr,N2=[],Q3=!1,ug=[],lv=typeof document<"u",x1=vP,bS=vf||ra?"cssFloat":"float",Zrt=lv&&!bP&&!vP&&"draggable"in document.createElement("div"),TP=function(){if(lv){if(ra)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),MP=function(e,i){var s=Jt(e),a=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),d=Yc(e,0,i),y=Yc(e,1,i),m=d&&Jt(d),_=y&&Jt(y),S=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+ji(d).width,I=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+ji(y).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(d&&m.float&&m.float!=="none"){var A=m.float==="left"?"left":"right";return y&&(_.clear==="both"||_.clear===A)?"vertical":"horizontal"}return d&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||S>=a&&s[bS]==="none"||y&&s[bS]==="none"&&S+I>a)?"vertical":"horizontal"},Xrt=function(e,i,s){var a=s?e.left:e.top,d=s?e.right:e.bottom,y=s?e.width:e.height,m=s?i.left:i.top,_=s?i.right:i.bottom,S=s?i.width:i.height;return a===m||d===_||a+y/2===m+S/2},Qrt=function(e,i){var s;return hg.some(function(a){var d=a[Yr].options.emptyInsertThreshold;if(!(!d||f4(a))){var y=ji(a),m=e>=y.left-d&&e<=y.right+d,_=i>=y.top-d&&i<=y.bottom+d;if(m&&_)return s=a}}),s},EP=function(e){function i(d,y){return function(m,_,S,I){var A=m.options.group.name&&_.options.group.name&&m.options.group.name===_.options.group.name;if(d==null&&(y||A))return!0;if(d==null||d===!1)return!1;if(y&&d==="clone")return d;if(typeof d=="function")return i(d(m,_,S,I),y)(m,_,S,I);var P=(y?m:_).options.group.name;return d===!0||typeof d=="string"&&d===P||d.join&&d.indexOf(P)>-1}}var s={},a=e.group;(!a||Ey(a)!="object")&&(a={name:a}),s.name=a.name,s.checkPull=i(a.pull,!0),s.checkPut=i(a.put),s.revertClone=a.revertClone,e.group=s},IP=function(){!TP&&ie&&Jt(ie,"display","none")},AP=function(){!TP&&ie&&Jt(ie,"display","")};lv&&!bP&&document.addEventListener("click",function(t){if(lg)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),lg=!1,!1},!0);var Wl=function(e){if(xt){e=e.touches?e.touches[0]:e;var i=Qrt(e.clientX,e.clientY);if(i){var s={};for(var a in e)e.hasOwnProperty(a)&&(s[a]=e[a]);s.target=s.rootEl=i,s.preventDefault=void 0,s.stopPropagation=void 0,i[Yr]._onDragOver(s)}}},tst=function(e){xt&&xt.parentNode[Yr]._isOutsideThisEl(e.target)};function Kt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xo({},e),t[Yr]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return MP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(y,m){y.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Kt.supportPointer!==!1&&"PointerEvent"in window&&!ad,emptyInsertThreshold:5};bf.initializePlugins(this,t,i);for(var s in i)!(s in e)&&(e[s]=i[s]);EP(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Zrt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Pe(t,"pointerdown",this._onTapStart):(Pe(t,"mousedown",this._onTapStart),Pe(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pe(t,"dragover",this),Pe(t,"dragenter",this)),hg.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xo(this,Hrt())}Kt.prototype={constructor:Kt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Fu=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,xt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,s=this.el,a=this.options,d=a.preventOnFilter,y=e.type,m=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,_=(m||e).target,S=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||_,I=a.filter;if(lst(s),!xt&&!(/mousedown|pointerdown/.test(y)&&e.button!==0||a.disabled)&&!S.isContentEditable&&!(!this.nativeDraggable&&ad&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=Bn(_,a.draggable,s,!1),!(_&&_.animated)&&Iy!==_)){if(wc=vs(_),hd=vs(_,a.draggable),typeof I=="function"){if(I.call(this,e,_,this)){br({sortable:i,rootEl:S,name:"filter",targetEl:_,toEl:s,fromEl:s}),Mr("filter",i,{evt:e}),d&&e.cancelable&&e.preventDefault();return}}else if(I&&(I=I.split(",").some(function(A){if(A=Bn(S,A.trim(),s,!1),A)return br({sortable:i,rootEl:A,name:"filter",targetEl:_,fromEl:s,toEl:s}),Mr("filter",i,{evt:e}),!0}),I)){d&&e.cancelable&&e.preventDefault();return}a.handle&&!Bn(S,a.handle,s,!1)||this._prepareDragStart(e,m,_)}}},_prepareDragStart:function(e,i,s){var a=this,d=a.el,y=a.options,m=d.ownerDocument,_;if(s&&!xt&&s.parentNode===d){var S=ji(s);if(ri=d,xt=s,yi=xt.parentNode,bh=xt.nextSibling,Iy=s,w1=y.group,Kt.dragged=xt,Hl={target:xt,clientX:(i||e).clientX,clientY:(i||e).clientY},gS=Hl.clientX-S.left,vS=Hl.clientY-S.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,xt.style["will-change"]="all",_=function(){if(Mr("delayEnded",a,{evt:e}),Kt.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!dS&&a.nativeDraggable&&(xt.draggable=!0),a._triggerDragStart(e,i),br({sortable:a,name:"choose",originalEvent:e}),zr(xt,y.chosenClass,!0)},y.ignore.split(",").forEach(function(I){_P(xt,I.trim(),L2)}),Pe(m,"dragover",Wl),Pe(m,"mousemove",Wl),Pe(m,"touchmove",Wl),Pe(m,"mouseup",a._onDrop),Pe(m,"touchend",a._onDrop),Pe(m,"touchcancel",a._onDrop),dS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,xt.draggable=!0),Mr("delayStart",this,{evt:e}),y.delay&&(!y.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(vf||ra))){if(Kt.eventCanceled){this._onDrop();return}Pe(m,"mouseup",a._disableDelayedDrag),Pe(m,"touchend",a._disableDelayedDrag),Pe(m,"touchcancel",a._disableDelayedDrag),Pe(m,"mousemove",a._delayedDragTouchMoveHandler),Pe(m,"touchmove",a._delayedDragTouchMoveHandler),y.supportPointer&&Pe(m,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(_,y.delay)}else _()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){xt&&L2(xt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;be(e,"mouseup",this._disableDelayedDrag),be(e,"touchend",this._disableDelayedDrag),be(e,"touchcancel",this._disableDelayedDrag),be(e,"mousemove",this._delayedDragTouchMoveHandler),be(e,"touchmove",this._delayedDragTouchMoveHandler),be(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Pe(document,"pointermove",this._onTouchMove):i?Pe(document,"touchmove",this._onTouchMove):Pe(document,"mousemove",this._onTouchMove):(Pe(xt,"dragend",this),Pe(ri,"dragstart",this._onDragStart));try{document.selection?ky(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(ac=!1,ri&&xt){Mr("dragStarted",this,{evt:i}),this.nativeDraggable&&Pe(document,"dragover",tst);var s=this.options;!e&&zr(xt,s.dragClass,!1),zr(xt,s.ghostClass,!0),Kt.active=this,e&&this._appendGhost(),br({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Vs){this._lastX=Vs.clientX,this._lastY=Vs.clientY,IP();for(var e=document.elementFromPoint(Vs.clientX,Vs.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Vs.clientX,Vs.clientY),e!==i);)i=e;if(xt.parentNode[Yr]._isOutsideThisEl(e),i)do{if(i[Yr]){var s=void 0;if(s=i[Yr]._onDragOver({clientX:Vs.clientX,clientY:Vs.clientY,target:e,rootEl:i}),s&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);AP()}},_onTouchMove:function(e){if(Hl){var i=this.options,s=i.fallbackTolerance,a=i.fallbackOffset,d=e.touches?e.touches[0]:e,y=ie&&Oc(ie,!0),m=ie&&y&&y.a,_=ie&&y&&y.d,S=x1&&sr&&mS(sr),I=(d.clientX-Hl.clientX+a.x)/(m||1)+(S?S[0]-N2[0]:0)/(m||1),A=(d.clientY-Hl.clientY+a.y)/(_||1)+(S?S[1]-N2[1]:0)/(_||1);if(!Kt.active&&!ac){if(s&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(ie){y?(y.e+=I-(P2||0),y.f+=A-(C2||0)):y={a:1,b:0,c:0,d:1,e:I,f:A};var P="matrix(".concat(y.a,",").concat(y.b,",").concat(y.c,",").concat(y.d,",").concat(y.e,",").concat(y.f,")");Jt(ie,"webkitTransform",P),Jt(ie,"mozTransform",P),Jt(ie,"msTransform",P),Jt(ie,"transform",P),P2=I,C2=A,Vs=d}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ie){var e=this.options.fallbackOnBody?document.body:ri,i=ji(xt,!0,x1,!0,e),s=this.options;if(x1){for(sr=e;Jt(sr,"position")==="static"&&Jt(sr,"transform")==="none"&&sr!==document;)sr=sr.parentNode;sr!==document.body&&sr!==document.documentElement?(sr===document&&(sr=Zn()),i.top+=sr.scrollTop,i.left+=sr.scrollLeft):sr=Zn(),N2=mS(sr)}ie=xt.cloneNode(!0),zr(ie,s.ghostClass,!1),zr(ie,s.fallbackClass,!0),zr(ie,s.dragClass,!0),Jt(ie,"transition",""),Jt(ie,"transform",""),Jt(ie,"box-sizing","border-box"),Jt(ie,"margin",0),Jt(ie,"top",i.top),Jt(ie,"left",i.left),Jt(ie,"width",i.width),Jt(ie,"height",i.height),Jt(ie,"opacity","0.8"),Jt(ie,"position",x1?"absolute":"fixed"),Jt(ie,"zIndex","100000"),Jt(ie,"pointerEvents","none"),Kt.ghost=ie,e.appendChild(ie),Jt(ie,"transform-origin",gS/parseInt(ie.style.width)*100+"% "+vS/parseInt(ie.style.height)*100+"%")}},_onDragStart:function(e,i){var s=this,a=e.dataTransfer,d=s.options;if(Mr("dragStart",this,{evt:e}),Kt.eventCanceled){this._onDrop();return}Mr("setupClone",this),Kt.eventCanceled||(ui=$P(xt),ui.removeAttribute("id"),ui.draggable=!1,ui.style["will-change"]="",this._hideClone(),zr(ui,this.options.chosenClass,!1),Kt.clone=ui),s.cloneId=ky(function(){Mr("clone",s),!Kt.eventCanceled&&(s.options.removeCloneOnHide||ri.insertBefore(ui,xt),s._hideClone(),br({sortable:s,name:"clone"}))}),!i&&zr(xt,d.dragClass,!0),i?(lg=!0,s._loopId=setInterval(s._emulateDragOver,50)):(be(document,"mouseup",s._onDrop),be(document,"touchend",s._onDrop),be(document,"touchcancel",s._onDrop),a&&(a.effectAllowed="move",d.setData&&d.setData.call(s,a,xt)),Pe(document,"drop",s),Jt(xt,"transform","translateZ(0)")),ac=!0,s._dragStartId=ky(s._dragStarted.bind(s,i,e)),Pe(document,"selectstart",s),Mp=!0,ad&&Jt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,s=e.target,a,d,y,m=this.options,_=m.group,S=Kt.active,I=w1===_,A=m.sort,P=Xi||S,L,j=this,F=!1;if(Q3)return;function V(le,fr){Mr(le,j,so({evt:e,isOwner:I,axis:L?"vertical":"horizontal",revert:y,dragRect:a,targetRect:d,canSort:A,fromSortable:P,target:s,completed:Q,onMove:function(Fl,w0){return S1(ri,i,xt,a,Fl,ji(Fl),e,w0)},changed:Z},fr))}function J(){V("dragOverAnimationCapture"),j.captureAnimationState(),j!==P&&P.captureAnimationState()}function Q(le){return V("dragOverCompleted",{insertion:le}),le&&(I?S._hideClone():S._showClone(j),j!==P&&(zr(xt,Xi?Xi.options.ghostClass:S.options.ghostClass,!1),zr(xt,m.ghostClass,!0)),Xi!==j&&j!==Kt.active?Xi=j:j===Kt.active&&Xi&&(Xi=null),P===j&&(j._ignoreWhileAnimating=s),j.animateAll(function(){V("dragOverAnimationComplete"),j._ignoreWhileAnimating=null}),j!==P&&(P.animateAll(),P._ignoreWhileAnimating=null)),(s===xt&&!xt.animated||s===i&&!s.animated)&&(Fu=null),!m.dragoverBubble&&!e.rootEl&&s!==document&&(xt.parentNode[Yr]._isOutsideThisEl(e.target),!le&&Wl(e)),!m.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),F=!0}function Z(){Br=vs(xt),tl=vs(xt,m.draggable),br({sortable:j,name:"change",toEl:i,newIndex:Br,newDraggableIndex:tl,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=Bn(s,m.draggable,i,!0),V("dragOver"),Kt.eventCanceled)return F;if(xt.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||j._ignoreWhileAnimating===s)return Q(!1);if(lg=!1,S&&!m.disabled&&(I?A||(y=yi!==ri):Xi===this||(this.lastPutMode=w1.checkPull(this,S,xt,e))&&_.checkPut(this,S,xt,e))){if(L=this._getDirection(e,s)==="vertical",a=ji(xt),V("dragOverValid"),Kt.eventCanceled)return F;if(y)return yi=ri,J(),this._hideClone(),V("revert"),Kt.eventCanceled||(bh?ri.insertBefore(xt,bh):ri.appendChild(xt)),Q(!0);var et=f4(i,m.draggable);if(!et||sst(e,L,this)&&!et.animated){if(et===xt)return Q(!1);if(et&&i===e.target&&(s=et),s&&(d=ji(s)),S1(ri,i,xt,a,s,d,e,!!s)!==!1)return J(),et&&et.nextSibling?i.insertBefore(xt,et.nextSibling):i.appendChild(xt),yi=i,Z(),Q(!0)}else if(et&&rst(e,L,this)){var st=Yc(i,0,m,!0);if(st===xt)return Q(!1);if(s=st,d=ji(s),S1(ri,i,xt,a,s,d,e,!1)!==!1)return J(),i.insertBefore(xt,st),yi=i,Z(),Q(!0)}else if(s.parentNode===i){d=ji(s);var nt=0,pt,yt=xt.parentNode!==i,$t=!Xrt(xt.animated&&xt.toRect||a,s.animated&&s.toRect||d,L),Ot=L?"top":"left",Ct=yS(s,"top","top")||yS(xt,"top","top"),Nt=Ct?Ct.scrollTop:void 0;Fu!==s&&(pt=d[Ot],cd=!1,_1=!$t&&m.invertSwap||yt),nt=nst(e,s,d,L,$t?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,_1,Fu===s);var Ht;if(nt!==0){var Pt=vs(xt);do Pt-=nt,Ht=yi.children[Pt];while(Ht&&(Jt(Ht,"display")==="none"||Ht===ie))}if(nt===0||Ht===s)return Q(!1);Fu=s,ud=nt;var Ve=s.nextElementSibling,pi=!1;pi=nt===1;var Ge=S1(ri,i,xt,a,s,d,e,pi);if(Ge!==!1)return(Ge===1||Ge===-1)&&(pi=Ge===1),Q3=!0,setTimeout(ist,30),J(),pi&&!Ve?i.appendChild(xt):s.parentNode.insertBefore(xt,pi?Ve:s),Ct&&SP(Ct,0,Nt-Ct.scrollTop),yi=xt.parentNode,pt!==void 0&&!_1&&(Ay=Math.abs(pt-ji(s)[Ot])),Z(),Q(!0)}if(i.contains(xt))return Q(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){be(document,"mousemove",this._onTouchMove),be(document,"touchmove",this._onTouchMove),be(document,"pointermove",this._onTouchMove),be(document,"dragover",Wl),be(document,"mousemove",Wl),be(document,"touchmove",Wl)},_offUpEvents:function(){var e=this.el.ownerDocument;be(e,"mouseup",this._onDrop),be(e,"touchend",this._onDrop),be(e,"pointerup",this._onDrop),be(e,"touchcancel",this._onDrop),be(document,"selectstart",this)},_onDrop:function(e){var i=this.el,s=this.options;if(Br=vs(xt),tl=vs(xt,s.draggable),Mr("drop",this,{evt:e}),yi=xt&&xt.parentNode,Br=vs(xt),tl=vs(xt,s.draggable),Kt.eventCanceled){this._nulling();return}ac=!1,_1=!1,cd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),t9(this.cloneId),t9(this._dragStartId),this.nativeDraggable&&(be(document,"drop",this),be(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ad&&Jt(document.body,"user-select",""),Jt(xt,"transform",""),e&&(Mp&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),ie&&ie.parentNode&&ie.parentNode.removeChild(ie),(ri===yi||Xi&&Xi.lastPutMode!=="clone")&&ui&&ui.parentNode&&ui.parentNode.removeChild(ui),xt&&(this.nativeDraggable&&be(xt,"dragend",this),L2(xt),xt.style["will-change"]="",Mp&&!ac&&zr(xt,Xi?Xi.options.ghostClass:this.options.ghostClass,!1),zr(xt,this.options.chosenClass,!1),br({sortable:this,name:"unchoose",toEl:yi,newIndex:null,newDraggableIndex:null,originalEvent:e}),ri!==yi?(Br>=0&&(br({rootEl:yi,name:"add",toEl:yi,fromEl:ri,originalEvent:e}),br({sortable:this,name:"remove",toEl:yi,originalEvent:e}),br({rootEl:yi,name:"sort",toEl:yi,fromEl:ri,originalEvent:e}),br({sortable:this,name:"sort",toEl:yi,originalEvent:e})),Xi&&Xi.save()):Br!==wc&&Br>=0&&(br({sortable:this,name:"update",toEl:yi,originalEvent:e}),br({sortable:this,name:"sort",toEl:yi,originalEvent:e})),Kt.active&&((Br==null||Br===-1)&&(Br=wc,tl=hd),br({sortable:this,name:"end",toEl:yi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Mr("nulling",this),ri=xt=yi=ie=bh=ui=Iy=ol=Hl=Vs=Mp=Br=tl=wc=hd=Fu=ud=Xi=w1=Kt.dragged=Kt.ghost=Kt.clone=Kt.active=null,ug.forEach(function(e){e.checked=!0}),ug.length=P2=C2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":xt&&(this._onDragOver(e),est(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,s=this.el.children,a=0,d=s.length,y=this.options;a<d;a++)i=s[a],Bn(i,y.draggable,this.el,!1)&&e.push(i.getAttribute(y.dataIdAttr)||ast(i));return e},sort:function(e,i){var s={},a=this.el;this.toArray().forEach(function(d,y){var m=a.children[y];Bn(m,this.options.draggable,a,!1)&&(s[d]=m)},this),i&&this.captureAnimationState(),e.forEach(function(d){s[d]&&(a.removeChild(s[d]),a.appendChild(s[d]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Bn(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var s=this.options;if(i===void 0)return s[e];var a=bf.modifyOption(this,e,i);typeof a<"u"?s[e]=a:s[e]=i,e==="group"&&EP(s)},destroy:function(){Mr("destroy",this);var e=this.el;e[Yr]=null,be(e,"mousedown",this._onTapStart),be(e,"touchstart",this._onTapStart),be(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(be(e,"dragover",this),be(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),hg.splice(hg.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ol){if(Mr("hideClone",this),Kt.eventCanceled)return;Jt(ui,"display","none"),this.options.removeCloneOnHide&&ui.parentNode&&ui.parentNode.removeChild(ui),ol=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ol){if(Mr("showClone",this),Kt.eventCanceled)return;xt.parentNode==ri&&!this.options.group.revertClone?ri.insertBefore(ui,xt):bh?ri.insertBefore(ui,bh):ri.appendChild(ui),this.options.group.revertClone&&this.animate(xt,ui),Jt(ui,"display",""),ol=!1}}};function est(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function S1(t,e,i,s,a,d,y,m){var _,S=t[Yr],I=S.options.onMove,A;return window.CustomEvent&&!ra&&!vf?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=e,_.from=t,_.dragged=i,_.draggedRect=s,_.related=a||e,_.relatedRect=d||ji(e),_.willInsertAfter=m,_.originalEvent=y,t.dispatchEvent(_),I&&(A=I.call(S,_,y)),A}function L2(t){t.draggable=!1}function ist(){Q3=!1}function rst(t,e,i){var s=ji(Yc(i.el,0,i.options,!0)),a=10;return e?t.clientX<s.left-a||t.clientY<s.top&&t.clientX<s.right:t.clientY<s.top-a||t.clientY<s.bottom&&t.clientX<s.left}function sst(t,e,i){var s=ji(f4(i.el,i.options.draggable)),a=10;return e?t.clientX>s.right+a||t.clientX<=s.right&&t.clientY>s.bottom&&t.clientX>=s.left:t.clientX>s.right&&t.clientY>s.top||t.clientX<=s.right&&t.clientY>s.bottom+a}function nst(t,e,i,s,a,d,y,m){var _=s?t.clientY:t.clientX,S=s?i.height:i.width,I=s?i.top:i.left,A=s?i.bottom:i.right,P=!1;if(!y){if(m&&Ay<S*a){if(!cd&&(ud===1?_>I+S*d/2:_<A-S*d/2)&&(cd=!0),cd)P=!0;else if(ud===1?_<I+Ay:_>A-Ay)return-ud}else if(_>I+S*(1-a)/2&&_<A-S*(1-a)/2)return ost(e)}return P=P||y,P&&(_<I+S*d/2||_>A-S*d/2)?_>I+S/2?1:-1:0}function ost(t){return vs(xt)<vs(t)?1:-1}function ast(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,s=0;i--;)s+=e.charCodeAt(i);return s.toString(36)}function lst(t){ug.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var s=e[i];s.checked&&ug.push(s)}}function ky(t){return setTimeout(t,0)}function t9(t){return clearTimeout(t)}lv&&Pe(document,"touchmove",function(t){(Kt.active||ac)&&t.cancelable&&t.preventDefault()});Kt.utils={on:Pe,off:be,css:Jt,find:_P,is:function(e,i){return!!Bn(e,i,e,!1)},extend:qrt,throttle:xP,closest:Bn,toggleClass:zr,clone:$P,index:vs,nextTick:ky,cancelNextTick:t9,detectDirection:MP,getChild:Yc};Kt.get=function(t){return t[Yr]};Kt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Kt.utils=so(so({},Kt.utils),s.utils)),bf.mount(s)})};Kt.create=function(t,e){return new Kt(t,e)};Kt.version=Vrt;var Mi=[],Ep,e9,i9=!1,R2,j2,cg,Ip;function hst(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var s=i.originalEvent;this.sortable.nativeDraggable?Pe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pe(document,"pointermove",this._handleFallbackAutoScroll):s.touches?Pe(document,"touchmove",this._handleFallbackAutoScroll):Pe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var s=i.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?be(document,"dragover",this._handleAutoScroll):(be(document,"pointermove",this._handleFallbackAutoScroll),be(document,"touchmove",this._handleFallbackAutoScroll),be(document,"mousemove",this._handleFallbackAutoScroll)),wS(),Oy(),Brt()},nulling:function(){cg=e9=Ep=i9=Ip=R2=j2=null,Mi.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,s){var a=this,d=(i.touches?i.touches[0]:i).clientX,y=(i.touches?i.touches[0]:i).clientY,m=document.elementFromPoint(d,y);if(cg=i,s||this.options.forceAutoScrollFallback||vf||ra||ad){D2(i,this.options,m,s);var _=ml(m,!0);i9&&(!Ip||d!==R2||y!==j2)&&(Ip&&wS(),Ip=setInterval(function(){var S=ml(document.elementFromPoint(d,y),!0);S!==_&&(_=S,Oy()),D2(i,a.options,S,s)},10),R2=d,j2=y)}else{if(!this.options.bubbleScroll||ml(m,!0)===Zn()){Oy();return}D2(i,this.options,ml(m,!1),!1)}}},Xo(t,{pluginName:"scroll",initializeByDefault:!0})}function Oy(){Mi.forEach(function(t){clearInterval(t.pid)}),Mi=[]}function wS(){clearInterval(Ip)}var D2=xP(function(t,e,i,s){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,d=(t.touches?t.touches[0]:t).clientY,y=e.scrollSensitivity,m=e.scrollSpeed,_=Zn(),S=!1,I;e9!==i&&(e9=i,Oy(),Ep=e.scroll,I=e.scrollFn,Ep===!0&&(Ep=ml(i,!0)));var A=0,P=Ep;do{var L=P,j=ji(L),F=j.top,V=j.bottom,J=j.left,Q=j.right,Z=j.width,et=j.height,st=void 0,nt=void 0,pt=L.scrollWidth,yt=L.scrollHeight,$t=Jt(L),Ot=L.scrollLeft,Ct=L.scrollTop;L===_?(st=Z<pt&&($t.overflowX==="auto"||$t.overflowX==="scroll"||$t.overflowX==="visible"),nt=et<yt&&($t.overflowY==="auto"||$t.overflowY==="scroll"||$t.overflowY==="visible")):(st=Z<pt&&($t.overflowX==="auto"||$t.overflowX==="scroll"),nt=et<yt&&($t.overflowY==="auto"||$t.overflowY==="scroll"));var Nt=st&&(Math.abs(Q-a)<=y&&Ot+Z<pt)-(Math.abs(J-a)<=y&&!!Ot),Ht=nt&&(Math.abs(V-d)<=y&&Ct+et<yt)-(Math.abs(F-d)<=y&&!!Ct);if(!Mi[A])for(var Pt=0;Pt<=A;Pt++)Mi[Pt]||(Mi[Pt]={});(Mi[A].vx!=Nt||Mi[A].vy!=Ht||Mi[A].el!==L)&&(Mi[A].el=L,Mi[A].vx=Nt,Mi[A].vy=Ht,clearInterval(Mi[A].pid),(Nt!=0||Ht!=0)&&(S=!0,Mi[A].pid=setInterval(function(){s&&this.layer===0&&Kt.active._onTouchMove(cg);var Ve=Mi[this.layer].vy?Mi[this.layer].vy*m:0,pi=Mi[this.layer].vx?Mi[this.layer].vx*m:0;typeof I=="function"&&I.call(Kt.dragged.parentNode[Yr],pi,Ve,t,cg,Mi[this.layer].el)!=="continue"||SP(Mi[this.layer].el,pi,Ve)}.bind({layer:A}),24))),A++}while(e.bubbleScroll&&P!==_&&(P=ml(P,!1)));i9=S}},30),kP=function(e){var i=e.originalEvent,s=e.putSortable,a=e.dragEl,d=e.activeSortable,y=e.dispatchSortableEvent,m=e.hideGhostForTarget,_=e.unhideGhostForTarget;if(i){var S=s||d;m();var I=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,A=document.elementFromPoint(I.clientX,I.clientY);_(),S&&!S.el.contains(A)&&(y("spill"),this.onSpill({dragEl:a,putSortable:s}))}};function y4(){}y4.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var a=Yc(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(i,a):this.sortable.el.appendChild(i),this.sortable.animateAll(),s&&s.animateAll()},drop:kP};Xo(y4,{pluginName:"revertOnSpill"});function m4(){}m4.prototype={onSpill:function(e){var i=e.dragEl,s=e.putSortable,a=s||this.sortable;a.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),a.animateAll()},drop:kP};Xo(m4,{pluginName:"removeOnSpill"});Kt.mount(new hst);Kt.mount(m4,y4);function _S(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const ust="esri-layerlist-new-ui",cst=Vt.ofType(d4),xS="data-sort-filter",SS="data-layer-uid",pst="layerUid",mi="esri-layer-list",ii=`${mi}__item`,Et={base:`${mi} esri-widget esri-widget--panel`,newUI:`${mi}--new-ui`,noItems:`${mi}__no-items`,list:`${mi}__list`,listRoot:`${mi}__list--root`,listExclusive:`${mi}__list--exclusive`,listInherited:`${mi}__list--inherited`,listIndependent:`${mi}__list--independent`,item:ii,itemContent:`${ii}-content`,itemMessage:`${ii}--has-message`,itemInvisible:`${ii}--invisible`,itemInvisibleAtScale:`${ii}--invisible-at-scale`,itemChildren:`${ii}--has-children`,itemSelectable:`${ii}--selectable`,itemContainer:`${ii}-container`,actionsMenu:`${ii}-actions-menu`,actionsMenuItem:`${ii}-actions-menu-item`,actionsMenuItemActive:`${ii}-actions-menu-item--active`,actions:`${ii}-actions`,actionsList:`${ii}-actions-list`,action:`${ii}-action`,actionIcon:`${ii}-action-icon`,actionImage:`${ii}-action-image`,actionTitle:`${ii}-action-title`,actionToggle:`${mi}__action-toggle`,actionToggleOn:`${mi}__action-toggle--on`,label:`${ii}-label`,message:`${ii}-message`,title:`${ii}-title`,statusIndicator:`${mi}__status-indicator`,publishing:`${mi}__publishing`,updating:`${mi}__updating`,connectionStatus:`${mi}__connection-status`,connectionStatusConnected:`${mi}__connection-status--connected`,toggleVisible:`${ii}-toggle`,toggleVisibleIcon:`${ii}-toggle-icon`,toggleIcon:`${ii}-toggle-icon`,radioIcon:`${ii}-radio-icon`,childToggle:`${mi}__child-toggle`,childToggleOpen:`${mi}__child-toggle--open`,childOpened:`${mi}__child-toggle-icon--opened`,childClosed:`${mi}__child-toggle-icon--closed`,childClosed_RTL:`${mi}__child-toggle-icon--closed-rtl`,sortableChosen:`${mi}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},_a={actions:"actions",actionSection:"action-section",items:"items"},V0={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function OP(t){const{actionsOpen:e,children:i}=t;e&&(t.actionsOpen=!1),i.forEach(s=>OP(s))}const F2="root",$S={statusIndicators:!0,errors:!1};let We=class extends $u{constructor(e,i){super(e,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=at(ust),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=Et.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new cst,this.viewModel=new gP,this.visibleElements={...$S},this._onSortableSort=({to:s,from:a,item:d,newIndex:y})=>{a&&s&&(a===s?this._sortLayers(this._sortableMap.get(a.dataset.group)):this._moveLayerFromChildList({to:s,from:a,item:d,newIndex:y}))},this._sortableCanSort=(s,a)=>!(!s.el.dataset.group||!a.el.dataset.group),this._sortableCanPull=(s,a,d)=>{const{listItemCanGiveFunction:y}=this,m={selected:Gi(d),from:Gi(a.el),to:Gi(s.el)};return!this._sortableCanSort(s,a)||typeof y!="function"||y.call(null,m)},this._sortableCanPut=(s,a,d)=>{const{listItemCanReceiveFunction:y}=this,m={selected:Gi(d),from:Gi(a.el),to:Gi(s.el)};return!this._sortableCanSort(s,a)||typeof y!="function"||y.call(null,m)},this._onSortableEnd=({oldIndex:s,from:a,to:d,item:y})=>{a!==d&&a.insertBefore(y,a.children[s])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([qc(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),It(()=>this.visibleElements,()=>this._itemsChanged(e)),It(()=>this.selectionEnabled,()=>this._toggleAllSorting(),xe)])}loadDependencies(){return Pet({icon:()=>bt(()=>import("./calcite-icon-1a9109ad.js"),["assets/calcite-icon-1a9109ad.js","assets/icon-f4ebd142.js","assets/observers-279029a9.js"]),tooltip:()=>bt(()=>import("./calcite-tooltip-c925192f.js"),["assets/calcite-tooltip-c925192f.js","assets/FloatingArrow-0e6c6b63.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-92d36699.js"])})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...$S,...e}}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var m;const{visibleItems:e,_newUI:i}=this,s=(m=this.viewModel)==null?void 0:m.state,a={[Et.newUI]:i,[Et.hidden]:s==="loading",[Et.disabled]:s==="disabled"},d=this.renderItemTooltips(),y=this.renderItems();return zt("div",{class:this.classes(Et.base,a)},e.length?[d,y]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:s}=this;return e?zt("calcite-tooltip",{label:s.layerIncompatible,referenceElement:i.get(e.uid)},s.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:i,children:s}=e;return[i?this.renderItemTooltip(e):null,...!i&&s?s.toArray().map(a=>this.renderItemTooltipNodes(a)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))??[]}renderNoItems(){return zt("div",{class:Et.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:i,messages:s}=this;return zt("ul",{"aria-label":s.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":F2,bind:this,class:this.classes(Et.list,Et.listRoot,Et.listIndependent)},e.map(a=>this.renderItem(a,null)).toArray())}renderActionsMenuIcon(e,i){const{messagesCommon:s}=this,a={[Et.actionsMenuItemActive]:e.actionsOpen};return zt("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Et.actionsMenuItem,a),tabindex:"0",role:"button","aria-controls":i,"aria-label":s.options,title:s.options},zt("span",{"aria-hidden":"true",class:Et.iconEllipses}))}renderActionsMenu(e,i,s,a){const{panel:d}=e,y=d&&d.visible?this.renderPanelButton(d):null,m=s===1&&this._getSingleActionButton(i),_=m?this.renderAction({item:e,action:m,singleAction:!0}):null,S=!m&&s?this.renderActionsMenuIcon(e,a):null;return S||y||m?zt("div",{key:"actions-menu",class:Et.actionsMenu},y,_,S):null}renderChildList(e,i){var A;const{selectionEnabled:s}=this,{visibilityMode:a,children:d}=e,y=this._hasChildren(e),m=!y&&s&&((A=e.layer)==null?void 0:A.type)==="group",{exclusive:_,inherited:S}=V0,I={[Et.listExclusive]:a===_,[Et.listInherited]:a===S,[Et.listIndependent]:a!==S&&a!==_};return y||m?zt("ul",{bind:this,key:"list-items",id:i,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(Et.list,I),"aria-expanded":e.open?"true":"false",role:s?"listbox":a===_?"radiogroup":"group",hidden:!e.open&&!m||null},d==null?void 0:d.map(P=>this.renderItem(P,e)).toArray()):null}renderChildrenToggle(e,i){const{messagesCommon:s}=this,a=this._hasChildren(e),d={[Et.childToggleOpen]:e.open},y=e.open?s.collapse:s.expand;return a?zt("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(Et.childToggle,d),tabindex:"0",role:"button","aria-controls":i,"aria-label":y,title:y},zt("span",{"aria-hidden":"true",class:this.classes(Et.childClosed,Et.iconRightArrow)}),zt("span",{"aria-hidden":"true",class:this.classes(Et.childOpened,Et.iconDownArrow)}),zt("span",{"aria-hidden":"true",class:this.classes(Et.childClosed_RTL,Et.iconLeftArrow)})):null}renderItemMessage(e){return e.error?zt("div",{key:"esri-layer-list__error",class:Et.message,role:"alert"},zt("span",{"aria-hidden":"true",class:Et.iconNoticeTriangle}),this.messages.layerError):e.incompatible?zt("div",{key:"esri-layer-list__incompatible",class:Et.message,role:"alert"},zt("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:Et.iconNoticeTriangle,afterCreate:i=>this._setTooltipReference(i,e)}),this.messages.layerIncompatible):null}renderItemContent(e,i,s){const{id:a}=this,d=`${a}_${e.uid}`,y=`${d}_actions`,m=`${d}__list`,{panel:_}=e,S=this._filterActions(e.actionsSections),I=this._countActions(S);return[zt("div",{key:"list-item-container",class:Et.itemContainer},this.renderChildrenToggle(e,m),this.renderLabel(e,i,s),this.renderActionsMenu(e,S,I,y)),this.renderItemMessage(e),I?this.renderActionsSections(e,S,y):null,_&&_.open&&!_.disabled?_.render():null,this.renderChildList(e,m)]}renderItem(e,i){var A;const{_newUI:s,id:a,selectionEnabled:d,selectedItems:y}=this,m=`${`${a}_${e.uid}`}__title`,_=this._hasMessage(e),S=this._hasChildren(e),I={[Et.itemChildren]:S,[Et.itemMessage]:!!_,[Et.itemInvisible]:s&&!e.visible,[Et.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[Et.itemSelectable]:d};if(d){const P={[SS]:(A=e.layer)==null?void 0:A.uid,[xS]:(!e.sortable).toString()};return zt("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Et.item,I),"aria-labelledby":m,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":i?i.uid:F2,tabIndex:0,"aria-selected":I2(e,y)?"true":"false",role:"option",...P},this.renderItemContent(e,i,m))}return zt("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Et.item,I),"aria-labelledby":m},this.renderItemContent(e,i,m))}renderConnectionIcon(e){const{connectionStatus:i}=e;return i!=null?zt("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(e,i){const{visibleElements:s}=this;if(!s.statusIndicators)return null;const{connectionStatus:a,publishing:d,updating:y}=e,m=y&&!i,_=!!a;return zt("span",{class:this.classes({[Et.statusIndicator]:!0,[Et.publishing]:d,[Et.updating]:m,[Et.connectionStatus]:_,[Et.connectionStatusConnected]:_&&a==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,i){const{messages:s}=this;if(!e)return null;const a=e.title||s.untitledLayer,d=e.visibleAtCurrentScale?a:`${a} (${s.layerInvisibleAtScale})`;return zt("span",{key:"layer-title-container",id:i,title:d,"aria-label":d,class:Et.title},a)}renderItemToggleIcon(e,i){const{_newUI:s}=this,{exclusive:a}=V0,d=i==null?void 0:i.visibilityMode,y={[Et.toggleVisibleIcon]:s,[Et.toggleIcon]:s&&d!==a,[Et.radioIcon]:s&&d===a,[Et.iconRadioSelected]:d===a&&e.visible,[Et.iconRadioUnselected]:d===a&&!e.visible,[Et.iconVisible]:d!==a&&e.visible,[Et.iconInvisible]:d!==a&&!e.visible};return zt("span",{key:"item-toggle-icon",class:this.classes(y),"aria-hidden":"true"})}renderItemToggle(e,i,s){const{selectionEnabled:a,messages:d}=this,{exclusive:y}=V0,m=i==null?void 0:i.visibilityMode,_=m===y?"radio":"switch";return zt("span",a?{key:"item-toggle-selection-enabled",class:Et.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":m,tabIndex:0,title:d.layerVisibility,"aria-checked":e.visible?"true":"false",role:_,"aria-labelledby":s}:{key:"item-toggle",class:Et.toggleVisible},this.renderItemToggleIcon(e,i))}renderLabel(e,i,s){const{selectionEnabled:a,_newUI:d,messages:y}=this,{inherited:m,exclusive:_}=V0,S=i==null?void 0:i.visibilityMode,I=S===_?"radio":"switch",A=d?[this.renderItemTitle(e,s),this.renderItemStatus(e,i),this.renderItemToggle(e,i,s)]:[this.renderItemToggle(e,i,s),this.renderItemTitle(e,s),this.renderItemStatus(e,i)],P=zt("div",a?{key:`item-label-no-selection-${e.uid}`,class:Et.label}:{key:`item-label-with-selection-${e.uid}`,class:Et.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":S,tabIndex:0,"aria-checked":e.visible?"true":"false",title:y.layerVisibility,role:I,"aria-labelledby":s},A);return S===m||e.error?zt("div",{key:`item-label-container-${e.uid}`,class:Et.label},this.renderItemTitle(e,s),this.renderItemStatus(e,i)):P}renderPanelButton(e){const{className:i,open:s,title:a,image:d,disabled:y}=e,m=d||i?i:Et.iconDefaultAction,_=this._getIconImageStyles(e),S={[Et.actionsMenuItemActive]:s&&!y},I={[Et.actionImage]:!!_["background-image"],[Et.disabledElement]:e.disabled};return m&&(I[m]=!!m),zt("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Et.actionsMenuItem,S),role:"button",tabindex:e.disabled?null:0,title:a,"aria-label":a},zt("span",{class:this.classes(I),styles:_}))}renderActionsSections(e,i,s){const a=i.toArray().map((d,y)=>zt("ul",{key:`${e}-action-section-${y}`,class:Et.actionsList},this.renderActionSection(e,d)));return zt("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:s,class:Et.actions,hidden:!e.actionsOpen||null},a)}renderActionSection(e,i){return(i&&i.toArray()).map(s=>this.renderAction({item:e,action:s}))}renderActionIcon(e){const{active:i,className:s}=e,a=this._getIconImageStyles(e),d=e.type!=="button"||e.image||s?s:Et.iconDefaultAction,y={[Et.actionImage]:!i&&!!a["background-image"],[Et.iconLoading]:i,[Et.rotating]:i};return d&&!i&&(y[d]=!0),zt("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Et.actionIcon,y),styles:a})}renderActionTitle(e,i){return i?null:zt("span",{key:"action-title",class:Et.actionTitle},e)}renderAction(e){const{item:i,action:s,singleAction:a}=e,{active:d,disabled:y,title:m}=s,_={[Et.actionsMenuItem]:a&&s.type==="button",[Et.action]:d||!a&&s.type!=="toggle",[Et.actionToggle]:!d&&s.type==="toggle",[Et.actionToggleOn]:!d&&s.type==="toggle"&&s.value,[Et.disabledElement]:y},S=[this.renderActionIcon(s),this.renderActionTitle(m,a)];return a?zt("div",{bind:this,"data-item":i,"data-action":s,role:"button",key:`single-action-${s.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",title:m??void 0,"aria-label":m??void 0},S):zt("li",{bind:this,"data-item":i,"data-action":s,key:`action-${s.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",role:"button",title:m??void 0,"aria-label":m??void 0},S)}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:i}=this,s=e.dataset.group,a=i.get(s);a&&a.destroy(),i.delete(s)}_destroySortables(){const{_sortableMap:e,_sortableNodes:i}=this;e.forEach(s=>s&&s.destroy()),e.clear(),i.clear()}_moveLayerFromChildList({to:e,from:i,item:s,newIndex:a}){const d=Gi(s),y=Gi(e),m=Gi(i);this.viewModel.moveListItem(d,m,y,a)}_sortLayers(e){var a,d;if(!e)return;const i=Gi(e.el),s=e.toArray();i?Irt(i,s):pP((d=(a=this.view)==null?void 0:a.map)==null?void 0:d.layers,s)}_toggleSorting(e,i){const{_sortableMap:s,selectionEnabled:a}=this,d=s.get(i),y=Gi(e),m=(i===F2||(y==null?void 0:y.childrenSortable)&&Trt(y))&&a;if(d)d.option("disabled",!m);else if(m){const _=Kt.create(e,{dataIdAttr:SS,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${xS}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!m,chosenClass:Et.sortableChosen});s.set(i,_)}}_toggleAllSorting(){this._sortableNodes.forEach((e,i)=>this._toggleSorting(e,i))}_sortNodeCreated(e){const i=e.dataset.group;i&&(this._sortableNodes.set(i,e),this._toggleSorting(e,i))}_setVisibleItems(e){this.visibleItems=e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(e){return e.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(e){var a;const{_focusSortUid:i}=this;if(!e||!i)return;const s=Gi(e);((a=s==null?void 0:s.layer)==null?void 0:a.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e){this.addHandles(e.on("change",this.scheduleRender.bind(this)),_a.actionSection),e.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(e){e.type!=="toggle"?e.type!=="slider"?this.addHandles(It(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),xe),_a.actions):this.addHandles(It(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),xe),_a.actions):this.addHandles(It(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),xe),_a.actions)}_renderOnItemChanges(e){this.addHandles([It(()=>{var i,s,a;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(i=e==null?void 0:e.panel)==null?void 0:i.title,(s=e==null?void 0:e.panel)==null?void 0:s.content,(a=e==null?void 0:e.panel)==null?void 0:a.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),No),It(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],_a.items),e.children.forEach(i=>this._renderOnItemChanges(i)),e.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(e){this.removeHandles(_a.items),this.removeHandles(_a.actions),this.removeHandles(_a.actionSection),e.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(i=>i.filter(s=>s.visible))}_countActions(e){return e.reduce((i,s)=>i+s.length,0)}_getIconImageStyles(e){const i=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(e){var j,F,V,J;const i=["ArrowDown","ArrowUp"],s=p$(e);if(!i.includes(s))return void this._toggleSelection(e);e.stopPropagation();const a=e.currentTarget,d=Gi(a),{_sortableMap:y,selectedItems:m}=this,_=a.dataset.group,S=y.get(_);if(!S||!d)return;const I=I2(d,m),A=S.toArray(),P=e.target,L=A.indexOf(P.dataset[pst]);if(L!==-1){if(s==="ArrowDown"){const Q=L+1;if(Q>=A.length)return;I?(_S(A,L,Q),S.sort(A),this._sortLayers(S),this._focusSortUid=(j=d.layer)==null?void 0:j.uid):(this._focusSortUid=(F=d.layer)==null?void 0:F.uid,this.scheduleRender())}if(s==="ArrowUp"){const Q=L-1;if(Q<=-1)return;I?(_S(A,L,Q),S.sort(A),this._sortLayers(S),this._focusSortUid=(V=d.layer)==null?void 0:V.uid):(this._focusSortUid=(J=d.layer)==null?void 0:J.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const i=Gi(e.currentTarget);if(!i)return;const{actionsOpen:s}=i,a=!s;a&&this.operationalItems.forEach(d=>OP(d)),i.actionsOpen=a,e.stopPropagation()}_triggerPanel(e){const i=dst(e.currentTarget);e.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(e){const i=e.currentTarget,s=fst(i),a=Gi(i);s&&a&&(s.type==="toggle"&&(s.value=!s.value),this.triggerAction(s,a),e.stopPropagation())}_toggleVisibility(e){const i=e.currentTarget,s=i.getAttribute("data-parent-visibility"),a=Gi(i);a&&(s===V0.exclusive&&a.visible||(a.visible=!a.visible),e.stopPropagation())}_toggleChildrenClick(e){const i=Gi(e.currentTarget);i&&(i.open=!i.open,e.stopPropagation())}_toggleSelection(e){var m,_;e.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:s}=this,a=Gi(e.currentTarget);if(!a)return;const d=I2(a,s),{length:y}=s;if(!i)return y&&!(d&&y===1)?(s.removeAll(),void s.add(a)):void(d?(m=s.remove)==null?void 0:m.call(s,d):s.add(a));d?(_=s.remove)==null||_.call(s,d):s.add(a)}get test(){return{visibleItems:this.visibleItems}}};function Gi(t){return t==null?void 0:t["data-item"]}function dst(t){return t==null?void 0:t["data-panel"]}function fst(t){return t==null?void 0:t["data-action"]}w([T()],We.prototype,"visibleItems",void 0),w([T()],We.prototype,"iconClass",void 0),w([T()],We.prototype,"icon",void 0),w([T()],We.prototype,"label",null),w([T()],We.prototype,"listItemCanGiveFunction",void 0),w([T()],We.prototype,"listItemCanReceiveFunction",void 0),w([T()],We.prototype,"listItemCreatedFunction",null),w([T(),Jc("esri/widgets/LayerList/t9n/LayerList")],We.prototype,"messages",void 0),w([T(),Jc("esri/t9n/common")],We.prototype,"messagesCommon",void 0),w([T()],We.prototype,"multipleSelectionEnabled",void 0),w([T()],We.prototype,"operationalItems",null),w([T()],We.prototype,"selectionEnabled",void 0),w([T()],We.prototype,"selectedItems",void 0),w([T()],We.prototype,"view",null),w([Ort("trigger-action"),T({type:gP})],We.prototype,"viewModel",void 0),w([T()],We.prototype,"visibleElements",void 0),w([Ne("visibleElements")],We.prototype,"castVisibleElements",null),w([Wn()],We.prototype,"_toggleActionsOpen",null),w([Wn()],We.prototype,"_triggerPanel",null),w([Wn()],We.prototype,"_triggerAction",null),w([Wn()],We.prototype,"_toggleVisibility",null),w([Wn()],We.prototype,"_toggleChildrenClick",null),w([Wn()],We.prototype,"_toggleSelection",null),We=w([W("esri.widgets.LayerList")],We);const yst=We;let mst=class PP{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(ab),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new PP,s=this._originStores[St.DEFAULTS];s&&s.forEach((a,d)=>{i.set(d,ot(a),St.DEFAULTS)});for(let a=St.SERVICE;a<ab;a++){const d=this._originStores[a];d&&d.forEach((y,m)=>{e&&e.has(m)||i.set(m,ot(y),a)})}return i}get(e,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,s=St.USER){let a=this._originStores[s];if(a||(a=new Map,this._originStores[s]=a),a.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=s){const d=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,s),d!==i}return!1}delete(e,i=St.USER){const s=this._originStores[i];if(!s)return;const a=s.get(e);if(s.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let d=i-1;d>=0;d--){const y=this._originStores[d];if(y&&y.has(e)){this._values.set(e,y.get(e)),this._propertyOriginMap.set(e,d);break}}}return a}has(e,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const s=this._originStores[i],a=s&&s.get(e),d=this._values.get(e);return this._values.set(e,a),this._propertyOriginMap.set(e,i),d!==a}originOf(e){return this._propertyOriginMap.get(e)||St.DEFAULTS}forEach(e){this._values.forEach(e)}};const CP=t=>{let e=class extends t{constructor(...i){super(...i);const s=Fi(this),a=s.store,d=new mst;s.store=d,H$(s,a,d)}read(i,s){J$(this,i,s)}getAtOrigin(i,s){const a=z2(this),d=xr(s);if(typeof i=="string")return a.get(i,d);const y={};return i.forEach(m=>{y[m]=a.get(m,d)}),y}originOf(i){return vd(this.originIdOf(i))}originIdOf(i){return z2(this).originOf(i)}revert(i,s){const a=z2(this),d=xr(s),y=Fi(this);let m;m=typeof i=="string"?i==="*"?a.keys(d):[i]:i,m.forEach(_=>{y.invalidate(_),a.revert(_,d),y.commit(_)})}};return e=w([W("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function z2(t){return Fi(t).store}let TS=class extends CP(Rt){};TS=w([W("esri.core.ReadOnlyMultiOriginJSONSupport")],TS);const gst=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,s="user"){return V2(this).delete(i,xr(s))}write(i,s){return Y$(this,i=i||{},s),i}setAtOrigin(i,s,a){Fi(this).setAtOrigin(i,s,xr(a))}removeOrigin(i){const s=V2(this),a=xr(i),d=s.keys(a);for(const y of d)s.originOf(y)===a&&s.set(y,s.get(y,a),St.USER)}updateOrigin(i,s){const a=V2(this),d=xr(s),y=this.get(i);for(let m=d+1;m<ab;++m)a.delete(i,m);a.set(i,y,d)}toJSON(i){return this.write({},i)}};return e=w([W("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function V2(t){return Fi(t).store}const hv=t=>{let e=class extends gst(CP(t)){constructor(...i){super(...i)}};return e=w([W("esri.core.MultiOriginJSONSupport")],e),e};let MS=class extends hv(Rt){};MS=w([W("esri.core.MultiOriginJSONSupport")],MS);function vst(t){return"portalItem"in t}const NP=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):vst(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return w([T({type:String})],e.prototype,"apiKey",null),e=w([W("esri.layers.mixins.APIKeyMixin")],e),e};let pg=class{constructor(e,i,s=""){this.major=e,this.minor=i,this._context=s}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new lt(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new pg(this.major,this.minor,this._context)}static parse(e,i=""){const[s,a]=e.split("."),d=/^\s*\d+\s*$/;if(!s||!s.match||!d.test(s))throw new lt((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!a||!a.match||!d.test(a))throw new lt((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const y=parseInt(s,10),m=parseInt(a,10);return new pg(y,m,i)}};function bst(t){if(!t)return t;const{start:e,end:i}=t;return new oo({start:e!=null?Jh(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?Jh(i,-i.getTimezoneOffset(),"minutes"):i})}function wst(t){if(!t)return t;const{start:e,end:i}=t;return new oo({start:e!=null?Jh(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?Jh(i,i.getTimezoneOffset(),"minutes"):i})}var r9;let Ap=r9=class extends gt{constructor(t){super(t)}async collectRequiredFields(t,e){return $r(t,e,this.expression)}clone(){return new r9({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};w([T({type:String,json:{write:!0}})],Ap.prototype,"expression",void 0),w([T({type:String,json:{write:!0}})],Ap.prototype,"title",void 0),Ap=r9=w([W("esri.layers.support.FeatureExpressionInfo")],Ap);const ES=Ap,g4={unknown:1,inches:as(1,"meters","inches"),feet:as(1,"meters","feet"),"us-feet":as(1,"meters","us-feet"),yards:as(1,"meters","yards"),miles:as(1,"meters","miles"),"nautical-miles":as(1,"meters","nautical-miles"),millimeters:as(1,"meters","millimeters"),centimeters:as(1,"meters","centimeters"),decimeters:as(1,"meters","decimeters"),meters:as(1,"meters","meters"),kilometers:as(1,"meters","kilometers"),"decimal-degrees":1/Yj(1,"meters",Re.radius)};function Fft(t){return 1/(g4[t]||1)}function _st(){const t=Object.keys(g4);return t.sort(),t}const xst=_st();var s9;const $1=dr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),IS=new Ie({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Io=s9=class extends gt{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,s){e[i]=t.write({},s),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new s9({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&GN(this.featureExpressionInfo,t.featureExpressionInfo)}};w([T({type:ES,json:{write:!0}})],Io.prototype,"featureExpressionInfo",void 0),w([kt("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Io.prototype,"readFeatureExpressionInfo",null),w([At("featureExpressionInfo",{featureExpressionInfo:{type:ES},"featureExpression.value":{type:[0]}})],Io.prototype,"writeFeatureExpressionInfo",null),w([T({type:$1.apiValues,nonNullable:!0,json:{type:$1.jsonValues,read:$1.read,write:{writer:$1.write,isRequired:!0}}})],Io.prototype,"mode",null),w([T({type:Number,json:{write:!0}})],Io.prototype,"offset",void 0),w([T({type:xst,json:{type:String,read:IS.read,write:IS.write}})],Io.prototype,"unit",null),Io=s9=w([W("esri.layers.support.ElevationInfo")],Io);const Sst=Io,zft={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},$st={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},Vft={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},LP={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:hu}}},Gft={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Uft={value:null,type:Sst,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function qft(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const RP={write:!0,read:!0},n9={type:Number,json:{origins:{"web-document":RP,"portal-item":{write:!0}}}},Bft={...n9,json:{...n9.json,origins:{"web-document":{...RP,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Td(e.layerDefinition.drawingInfo.transparency):void 0:Td(e.drawingInfo.transparency)}}},Tst={type:oo,readOnly:!0,get(){var m,_;if(!((m=this.layer)!=null&&m.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,s=(_=this.view)==null?void 0:_.timeExtent;let a=this.layer.timeExtent;t&&(a=wst(a));let d=i?s&&a?s.intersection(a):s||a:a;if(!d||d.isEmpty||d.isAllTime)return d;e&&(d=d.offset(-e.value,e.unit)),t&&(d=bst(d));const y=this._get("timeExtent");return d.equals(y)?y:d}},Hft={type:Ae,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Ae.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=te.fromJSON(e.spatialReference)),i}}}},read:!1}},Mst={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Wft={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Jft={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Est={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};async function Ist(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return yc(t);const i=te.WGS84;return await YI(e,i),Rl(t,i)}function Kft(t,e){if(!jP(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function jP(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function AS(t){return jP(t,Ast.HOSTED_SERVICE)}function Yft(t,e){const i=t.typeKeywords;if(i){const s=i.indexOf(e);s>-1&&i.splice(s,1)}}async function Zft(t){const e=t.clone().normalize();let i;if(e.length>1)for(const s of e)i?s.width>i.width&&(i=s):i=s;else i=e[0];return Ist(i)}const Ast={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function kS(t){var _;const{portal:e,isOrgItem:i,itemControl:s}=t,a=(_=e.user)==null?void 0:_.privileges;let d=!a||a.includes("features:user:edit"),y=!!i&&!!(a!=null&&a.includes("features:user:fullEdit"));const m=s==="update"||s==="admin";return m?y=d=!0:y&&(d=!0),{features:{edit:d,fullEdit:y},content:{updateItem:m}}}const DP=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,s){const a=s.capabilities&&s.capabilities.split(",").map(Q=>Q.toLowerCase().trim());if(!a)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const d=this.type,y=d!=="tile"&&!!s.supportsDynamicLayers,m=a.includes("query"),_=a.includes("map"),S=!!s.exportTilesAllowed,I=a.includes("tilemap"),A=a.includes("data"),P=d!=="tile"&&(!s.tileInfo||y),L=d!=="tile"&&(!s.tileInfo||y),j=d!=="tile",F=s.cimVersion&&pg.parse(s.cimVersion),V=(F==null?void 0:F.since(1,4))??!1,J=(F==null?void 0:F.since(2,0))??!1;return{operations:{supportsExportMap:_,supportsExportTiles:S,supportsIdentify:m,supportsQuery:A,supportsTileMap:I},exportMap:_?{supportsArcadeExpressionForLabeling:V,supportsSublayersChanges:j,supportsDynamicLayers:y,supportsSublayerVisibility:P,supportsSublayerDefinitionExpression:L,supportsCIMSymbols:J}:null,exportTiles:S?{maxExportTilesCount:+s.maxExportTilesCount}:null}}readVersion(i,s){let a=s.currentVersion;return a||(a=s.hasOwnProperty("capabilities")||s.hasOwnProperty("tables")?10:s.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),a}async fetchRelatedService(i){const s=this.portalItem;if(!s||!AS(s))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=s.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(d=>d.find(y=>y.type==="Feature Service")??null,()=>null));const a=await this._relatedFeatureServicePromise;return Ke(i),a?{itemId:a.id,url:a.url}:null}async fetchSublayerInfo(i,s){const{source:a}=i;if(this!=null&&this.portalItem&&this.type==="tile"&&(a==null?void 0:a.type)==="map-layer"&&AS(this.portalItem)&&i.originIdOf("url")<St.SERVICE){const m=await this.fetchRelatedService(s);m&&(i.url=tu(m.url,a.mapLayerId.toString()),i.layerItemId=m.itemId)}const{url:d}=i;let y;if(a.type==="data-layer")y=(await ye(d,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...s})).data;else if(d&&i.originIdOf("url")>St.SERVICE)try{y=(await this._fetchAllLayersAndTablesFromService(d)).get(a.mapLayerId)}catch{}else{let m=i.id;(a==null?void 0:a.type)==="map-layer"&&(m=a.mapLayerId);try{y=(await this.fetchAllLayersAndTables(s)).get(m)}catch{}}return y}async fetchAllLayersAndTables(i){var s;return this._fetchAllLayersAndTablesFromService((s=this.parsedUrl)==null?void 0:s.path,i)}async _fetchAllLayersAndTablesFromService(i,s){await this.load(s),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const a=Su(i),d=S$(this._allLayersAndTablesMap,a==null?void 0:a.url.path,()=>ye(tu(a==null?void 0:a.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(m=>{const _=new Map;for(const S of m.data.layers)_.set(S.id,S);return{result:_}},m=>({error:m}))),y=await d;if(Ke(s),"result"in y)return y.result;throw y.error}};return w([T({readOnly:!0})],e.prototype,"capabilities",void 0),w([kt("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],e.prototype,"readCapabilities",null),w([T({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),w([T({type:Ae})],e.prototype,"fullExtent",void 0),w([T(Mst)],e.prototype,"id",void 0),w([T({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),w([T($st)],e.prototype,"popupEnabled",void 0),w([T({type:te})],e.prototype,"spatialReference",void 0),w([T({readOnly:!0})],e.prototype,"version",void 0),w([kt("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=w([W("esri.layers.mixins.ArcGISMapService")],e),e},FP=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Su(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",dY(i,mt.getLogger(this)))}};return w([T()],e.prototype,"title",null),w([T({type:String})],e.prototype,"url",null),e=w([W("esri.layers.mixins.ArcGISService")],e),e};function uv(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function kst(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ost(t,e,i,s,a,d,y,m,_,S,I,A,P,L,j,F){const V=new Float32Array(16);return V[0]=t,V[1]=e,V[2]=i,V[3]=s,V[4]=a,V[5]=d,V[6]=y,V[7]=m,V[8]=_,V[9]=S,V[10]=I,V[11]=A,V[12]=P,V[13]=L,V[14]=j,V[15]=F,V}function Pst(t,e){return new Float32Array(t,e,16)}const Cst=uv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Cst,clone:kst,create:uv,createView:Pst,fromValues:Ost},Symbol.toStringTag,{value:"Module"}));const Nst=(t,e)=>{const i=Ll(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return ia(i,i)},Lst=(t,e)=>{const i=Ll(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return ia(i,i)},Rst=(t,e)=>{const i=1-e,s=Ll(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return ia(s,s)},jst=(t,e)=>{const i=Math.sin(e*Math.PI/180),s=Math.cos(e*Math.PI/180),a=Ll(t,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return ia(a,a)},Dst=(t,e)=>{const i=1-2*e,s=Ll(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return ia(s,s)},Fst=(t,e)=>{const i=Ll(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return ia(i,i)},zst=(t,e)=>{const i=1-e,s=Ll(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return ia(s,s)};let zP=class VP{constructor(e,i,s){this.strength=e,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(e,i,s){this.strength=Cr(e.strength,i.strength,s),this.radius=Cr(e.radius,i.radius,s),this.threshold=Cr(e.threshold,i.threshold,s)}clone(){return new VP(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:pd(this.radius),strength:this.strength,threshold:this.threshold}}},GP=class UP{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,s){this.radius=Math.round(Cr(e.radius,i.radius,s))}clone(){return new UP(this.radius)}toJSON(){return{type:"blur",radius:pd(this.radius)}}},o9=class qP{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.amount=Cr(e.amount,i.amount,s),this._updateMatrix()}clone(){return new qP(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||uv();switch(this.type){case"brightness":this._colorMatrix=Nst(e,this.amount);break;case"contrast":this._colorMatrix=Lst(e,this.amount);break;case"grayscale":this._colorMatrix=Rst(e,this.amount);break;case"invert":this._colorMatrix=Dst(e,this.amount);break;case"saturate":this._colorMatrix=Fst(e,this.amount);break;case"sepia":this._colorMatrix=zst(e,this.amount)}}},BP=class HP{constructor(e,i,s,a){this.offsetX=e,this.offsetY=i,this.blurRadius=s,this.color=a,this.type="drop-shadow"}interpolate(e,i,s){this.offsetX=Cr(e.offsetX,i.offsetX,s),this.offsetY=Cr(e.offsetY,i.offsetY,s),this.blurRadius=Cr(e.blurRadius,i.blurRadius,s),this.color[0]=Math.round(Cr(e.color[0],i.color[0],s)),this.color[1]=Math.round(Cr(e.color[1],i.color[1],s)),this.color[2]=Math.round(Cr(e.color[2],i.color[2],s)),this.color[3]=Cr(e.color[3],i.color[3],s)}clone(){return new HP(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:pd(this.offsetX),yoffset:pd(this.offsetY),blurRadius:pd(this.blurRadius),color:e}}},WP=class JP{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.angle=Cr(e.angle,i.angle,s),this._updateMatrix()}clone(){return new JP(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||uv();this._colorMatrix=jst(e,this.angle)}},KP=class YP{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,s){this.amount=Cr(e.amount,i.amount,s)}clone(){return new YP(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Cr(t,e,i){return t+(e-t)*i}function pd(t){return Math.round(1e3*Yo(t))/1e3}function Vst(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new o9(t.type,0);case"saturate":case"brightness":case"contrast":return new o9(t.type,1);case"opacity":return new KP(1);case"hue-rotate":return new WP(0);case"blur":return new GP(0);case"drop-shadow":return new BP(0,0,0,[...G5("transparent")]);case"bloom":return new zP(0,0,1)}}function Gst(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((s,a)=>s.type===i[a].type)}function Ust(t,e){const i=t.length>e.length?t:e,s=t.length>e.length?e:t;for(let a=s.length;a<i.length;a++)s.push(Vst(i[a]))}function qst(t){const e=t[0];return!!e&&"type"in e}var OS,PS,a9={exports:{}};a9.exports,PS=function(){function t(a,d){function y(){this.constructor=a}y.prototype=d.prototype,a.prototype=new y}function e(a,d,y,m){var _=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(_,e.prototype),_.expected=d,_.found=y,_.location=m,_.name="SyntaxError",_}function i(a,d,y){return y=y||" ",a.length>d?a:(d-=a.length,a+(y+=y.repeat(d)).slice(0,d))}function s(a,d){var y,m={},_=(d=d!==void 0?d:{}).grammarSource,S={start:di},I=di,A="none",P=")",L=",",j="(",F="%",V="px",J="cm",Q="mm",Z="in",et="pt",st="pc",nt="deg",pt="rad",yt="grad",$t="turn",Ot="#",Ct=".",Nt="e",Ht=/^[ \t\n\r]/,Pt=/^[a-z\-]/,Ve=/^[0-9a-fA-F]/,pi=/^[+\-]/,Ge=/^[0-9]/,le=dt("none"),fr=ct("none",!1),Tf=ct(")",!1),Fl=ct(",",!1),w0=dt("whitespace"),Mf=ht([" ","	",`
`,"\r"],!1,!1),mv=dt("function"),gv=ct("(",!1),vv=dt("identifier"),Ef=ht([["a","z"],"-"],!1,!1),bv=dt("percentage"),wv=ct("%",!1),_v=dt("length"),xv=ct("px",!1),Sv=ct("cm",!1),If=ct("mm",!1),$v=ct("in",!1),Tv=ct("pt",!1),Mv=ct("pc",!1),xi=dt("angle"),q=ct("deg",!1),ir=ct("rad",!1),Af=ct("grad",!1),pe=ct("turn",!1),ni=dt("number"),ks=dt("color"),$n=ct("#",!1),Os=ht([["0","9"],["a","f"],["A","F"]],!1,!1),Tn=ht(["+","-"],!1,!1),Ps=ht([["0","9"]],!1,!1),kf=ct(".",!1),ao=ct("e",!1),vt=function(){return[]},na=function(K,ut){return{type:"function",name:K,parameters:ut||[]}},u=function(K,ut){return ut.length>0?LN(K,ut,3):[K]},k=function(K){return{type:"quantity",value:K.value,unit:K.unit}},v=function(K){return{type:"color",colorType:K.type,value:K.value}},h=function(K){return K},o=function(){return rt()},r=function(K){return{value:K,unit:"%"}},n=function(K){return{value:K,unit:"px"}},l=function(K){return{value:K,unit:"cm"}},c=function(K){return{value:K,unit:"mm"}},p=function(K){return{value:K,unit:"in"}},f=function(K){return{value:K,unit:"pt"}},g=function(K){return{value:K,unit:"pc"}},b=function(K){return{value:K,unit:"deg"}},x=function(K){return{value:K,unit:"rad"}},$=function(K){return{value:K,unit:"grad"}},E=function(K){return{value:K,unit:"turn"}},O=function(K){return{value:K,unit:null}},C=function(){return{type:"hex",value:rt()}},N=function(K){return{type:"function",value:K}},D=function(){return{type:"named",value:rt()}},z=function(){return parseFloat(rt())},R=0,G=0,H=[{line:1,column:1}],B=0,tt=[],X=0;if("startRule"in d){if(!(d.startRule in S))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');I=S[d.startRule]}function rt(){return a.substring(G,R)}function ct(K,ut){return{type:"literal",text:K,ignoreCase:ut}}function ht(K,ut,ft){return{type:"class",parts:K,inverted:ut,ignoreCase:ft}}function Tt(){return{type:"end"}}function dt(K){return{type:"other",description:K}}function Ut(K){var ut,ft=H[K];if(ft)return ft;for(ut=K-1;!H[ut];)ut--;for(ft={line:(ft=H[ut]).line,column:ft.column};ut<K;)a.charCodeAt(ut)===10?(ft.line++,ft.column=1):ft.column++,ut++;return H[K]=ft,ft}function jt(K,ut,ft){var se=Ut(K),Si=Ut(ut),De={source:_,start:{offset:K,line:se.line,column:se.column},end:{offset:ut,line:Si.line,column:Si.column}};return ft&&_&&typeof _.offset=="function"&&(De.start=_.offset(De.start),De.end=_.offset(De.end)),De}function _t(K){R<B||(R>B&&(B=R,tt=[]),tt.push(K))}function Le(K,ut,ft){return new e(e.buildMessage(K,ut),K,ut,ft)}function di(){var K;return(K=je())===m&&(K=ue()),K}function je(){var K,ut;return X++,K=R,Qt(),a.substr(R,4)===A?(ut=A,R+=4):(ut=m,X===0&&_t(fr)),ut!==m?(Qt(),G=K,K=vt()):(R=K,K=m),X--,K===m&&X===0&&_t(le),K}function ue(){var K,ut;if(K=[],(ut=ce())!==m)for(;ut!==m;)K.push(ut),ut=ce();else K=m;return K}function ce(){var K,ut,ft,se;return K=R,Qt(),(ut=jr())!==m?(Qt(),(ft=ee())===m&&(ft=null),Qt(),a.charCodeAt(R)===41?(se=P,R++):(se=m,X===0&&_t(Tf)),se!==m?(Qt(),G=K,K=na(ut,ft)):(R=K,K=m)):(R=K,K=m),K}function ee(){var K,ut,ft,se,Si,De,is,Of;if(K=R,(ut=Ue())!==m){for(ft=[],se=R,Si=Qt(),a.charCodeAt(R)===44?(De=L,R++):(De=m,X===0&&_t(Fl)),De===m&&(De=null),is=Qt(),(Of=Ue())!==m?se=Si=[Si,De,is,Of]:(R=se,se=m);se!==m;)ft.push(se),se=R,Si=Qt(),a.charCodeAt(R)===44?(De=L,R++):(De=m,X===0&&_t(Fl)),De===m&&(De=null),is=Qt(),(Of=Ue())!==m?se=Si=[Si,De,is,Of]:(R=se,se=m);G=K,K=u(ut,ft)}else R=K,K=m;return K}function Ue(){var K,ut;return K=R,(ut=Ki())===m&&(ut=ge())===m&&(ut=Mu())===m&&(ut=Eu()),ut!==m&&(G=K,ut=k(ut)),(K=ut)===m&&(K=R,(ut=Iu())!==m&&(G=K,ut=v(ut)),K=ut),K}function Qt(){var K,ut;for(X++,K=[],Ht.test(a.charAt(R))?(ut=a.charAt(R),R++):(ut=m,X===0&&_t(Mf));ut!==m;)K.push(ut),Ht.test(a.charAt(R))?(ut=a.charAt(R),R++):(ut=m,X===0&&_t(Mf));return X--,ut=m,X===0&&_t(w0),K}function jr(){var K,ut,ft;return X++,K=R,(ut=ae())!==m?(a.charCodeAt(R)===40?(ft=j,R++):(ft=m,X===0&&_t(gv)),ft!==m?(G=K,K=h(ut)):(R=K,K=m)):(R=K,K=m),X--,K===m&&(ut=m,X===0&&_t(mv)),K}function ae(){var K,ut,ft;if(X++,K=R,ut=[],Pt.test(a.charAt(R))?(ft=a.charAt(R),R++):(ft=m,X===0&&_t(Ef)),ft!==m)for(;ft!==m;)ut.push(ft),Pt.test(a.charAt(R))?(ft=a.charAt(R),R++):(ft=m,X===0&&_t(Ef));else ut=m;return ut!==m&&(G=K,ut=o()),X--,(K=ut)===m&&(ut=m,X===0&&_t(vv)),K}function Ki(){var K,ut,ft;return X++,K=R,Qt(),(ut=rr())!==m?(a.charCodeAt(R)===37?(ft=F,R++):(ft=m,X===0&&_t(wv)),ft!==m?(G=K,K=r(ut)):(R=K,K=m)):(R=K,K=m),X--,K===m&&X===0&&_t(bv),K}function ge(){var K,ut,ft;return X++,K=R,Qt(),(ut=rr())!==m?(a.substr(R,2)===V?(ft=V,R+=2):(ft=m,X===0&&_t(xv)),ft!==m?(G=K,K=n(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,Qt(),(ut=rr())!==m?(a.substr(R,2)===J?(ft=J,R+=2):(ft=m,X===0&&_t(Sv)),ft!==m?(G=K,K=l(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,Qt(),(ut=rr())!==m?(a.substr(R,2)===Q?(ft=Q,R+=2):(ft=m,X===0&&_t(If)),ft!==m?(G=K,K=c(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,Qt(),(ut=rr())!==m?(a.substr(R,2)===Z?(ft=Z,R+=2):(ft=m,X===0&&_t($v)),ft!==m?(G=K,K=p(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,Qt(),(ut=rr())!==m?(a.substr(R,2)===et?(ft=et,R+=2):(ft=m,X===0&&_t(Tv)),ft!==m?(G=K,K=f(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,Qt(),(ut=rr())!==m?(a.substr(R,2)===st?(ft=st,R+=2):(ft=m,X===0&&_t(Mv)),ft!==m?(G=K,K=g(ut)):(R=K,K=m)):(R=K,K=m)))))),X--,K===m&&X===0&&_t(_v),K}function Mu(){var K,ut,ft;return X++,K=R,(ut=rr())!==m?(a.substr(R,3)===nt?(ft=nt,R+=3):(ft=m,X===0&&_t(q)),ft!==m?(G=K,K=b(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,(ut=rr())!==m?(a.substr(R,3)===pt?(ft=pt,R+=3):(ft=m,X===0&&_t(ir)),ft!==m?(G=K,K=x(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,(ut=rr())!==m?(a.substr(R,4)===yt?(ft=yt,R+=4):(ft=m,X===0&&_t(Af)),ft!==m?(G=K,K=$(ut)):(R=K,K=m)):(R=K,K=m),K===m&&(K=R,(ut=rr())!==m?(a.substr(R,4)===$t?(ft=$t,R+=4):(ft=m,X===0&&_t(pe)),ft!==m?(G=K,K=E(ut)):(R=K,K=m)):(R=K,K=m)))),X--,K===m&&(ut=m,X===0&&_t(xi)),K}function Eu(){var K,ut;return X++,K=R,Qt(),(ut=rr())!==m?(G=K,K=O(ut)):(R=K,K=m),X--,K===m&&X===0&&_t(ni),K}function Iu(){var K,ut,ft,se;if(X++,K=R,a.charCodeAt(R)===35?(ut=Ot,R++):(ut=m,X===0&&_t($n)),ut!==m){if(ft=[],Ve.test(a.charAt(R))?(se=a.charAt(R),R++):(se=m,X===0&&_t(Os)),se!==m)for(;se!==m;)ft.push(se),Ve.test(a.charAt(R))?(se=a.charAt(R),R++):(se=m,X===0&&_t(Os));else ft=m;ft!==m?(G=K,K=C()):(R=K,K=m)}else R=K,K=m;return K===m&&(K=R,(ut=ce())!==m&&(G=K,ut=N(ut)),(K=ut)===m&&(K=R,(ut=ae())!==m&&(G=K,ut=D()),K=ut)),X--,K===m&&(ut=m,X===0&&_t(ks)),K}function rr(){var K,ut,ft,se,Si,De,is;for(K=R,pi.test(a.charAt(R))?(a.charAt(R),R++):X===0&&_t(Tn),ut=R,ft=[],Ge.test(a.charAt(R))?(se=a.charAt(R),R++):(se=m,X===0&&_t(Ps));se!==m;)ft.push(se),Ge.test(a.charAt(R))?(se=a.charAt(R),R++):(se=m,X===0&&_t(Ps));if(a.charCodeAt(R)===46?(se=Ct,R++):(se=m,X===0&&_t(kf)),se!==m){if(Si=[],Ge.test(a.charAt(R))?(De=a.charAt(R),R++):(De=m,X===0&&_t(Ps)),De!==m)for(;De!==m;)Si.push(De),Ge.test(a.charAt(R))?(De=a.charAt(R),R++):(De=m,X===0&&_t(Ps));else Si=m;Si!==m?ut=ft=[ft,se,Si]:(R=ut,ut=m)}else R=ut,ut=m;if(ut===m)if(ut=[],Ge.test(a.charAt(R))?(ft=a.charAt(R),R++):(ft=m,X===0&&_t(Ps)),ft!==m)for(;ft!==m;)ut.push(ft),Ge.test(a.charAt(R))?(ft=a.charAt(R),R++):(ft=m,X===0&&_t(Ps));else ut=m;if(ut!==m){if(ft=R,a.charCodeAt(R)===101?(se=Nt,R++):(se=m,X===0&&_t(ao)),se!==m){if(pi.test(a.charAt(R))?(Si=a.charAt(R),R++):(Si=m,X===0&&_t(Tn)),Si===m&&(Si=null),De=[],Ge.test(a.charAt(R))?(is=a.charAt(R),R++):(is=m,X===0&&_t(Ps)),is!==m)for(;is!==m;)De.push(is),Ge.test(a.charAt(R))?(is=a.charAt(R),R++):(is=m,X===0&&_t(Ps));else De=m;De!==m?ft=se=[se,Si,De]:(R=ft,ft=m)}else R=ft,ft=m;ft===m&&(ft=null),G=K,K=z()}else R=K,K=m;return K}function NN(K,ut){return K.map(function(ft){return ft[ut]})}function LN(K,ut,ft){return[K].concat(NN(ut,ft))}if((y=I())!==m&&R===a.length)return y;throw y!==m&&R<a.length&&_t(Tt()),Le(tt,B<a.length?a.charAt(B):null,B<a.length?jt(B,B+1):jt(B,B))}return t(e,Error),e.prototype.format=function(a){var d="Error: "+this.message;if(this.location){var y,m=null;for(y=0;y<a.length;y++)if(a[y].source===this.location.source){m=a[y].text.split(/\r\n|\n|\r/g);break}var _=this.location.start,S=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(_):_,I=this.location.source+":"+S.line+":"+S.column;if(m){var A=this.location.end,P=i("",S.line.toString().length," "),L=m[_.line-1],j=(_.line===A.line?A.column:L.length+1)-_.column||1;d+=`
 --> `+I+`
`+P+` |
`+S.line+" | "+L+`
`+P+" | "+i("",_.column-1," ")+i("",j,"^")}else d+=`
 at `+I}return d},e.buildMessage=function(a,d){var y={literal:function(L){return'"'+_(L.text)+'"'},class:function(L){var j=L.parts.map(function(F){return Array.isArray(F)?S(F[0])+"-"+S(F[1]):S(F)});return"["+(L.inverted?"^":"")+j.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(L){return L.description}};function m(L){return L.charCodeAt(0).toString(16).toUpperCase()}function _(L){return L.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(j){return"\\x0"+m(j)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(j){return"\\x"+m(j)})}function S(L){return L.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(j){return"\\x0"+m(j)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(j){return"\\x"+m(j)})}function I(L){return y[L.type](L)}function A(L){var j,F,V=L.map(I);if(V.sort(),V.length>0){for(j=1,F=1;j<V.length;j++)V[j-1]!==V[j]&&(V[F]=V[j],F++);V.length=F}switch(V.length){case 1:return V[0];case 2:return V[0]+" or "+V[1];default:return V.slice(0,-1).join(", ")+", or "+V[V.length-1]}}function P(L){return L?'"'+_(L)+'"':"end of input"}return"Expected "+A(a)+" but "+P(d)+" found."},{SyntaxError:e,parse:s}},(OS=a9).exports&&(OS.exports=PS());var Bst=a9.exports;function ZP(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=CS(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new lt("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:CS(i.value)}});e.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!Gst(e[i].effects,e[i+1].effects))throw new lt("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Ust(e[i].effects,e[i+1].effects)}return e.sort((i,s)=>s.scale-i.scale),e}function CS(t){let e;if(!t)return[];try{e=Bst.parse(t)}catch(i){throw new lt("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Hst(i))}function Hst(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Wst(t);case"opacity":return Jst(t);case"hue-rotate":return Kst(t);case"blur":return Yst(t);case"drop-shadow":return Zst(t);case"bloom":return Xst(t)}}catch(e){throw e.details.filter=t,e}throw new lt("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Wst(t){let e=1;return y0(t.parameters,1),t.parameters.length===1&&(e=nn(t.parameters[0])),new o9(t.name,e)}function Jst(t){let e=1;return y0(t.parameters,1),t.parameters.length===1&&(e=nn(t.parameters[0])),new KP(e)}function Kst(t){let e=0;return y0(t.parameters,1),t.parameters.length===1&&(e=snt(t.parameters[0])),new WP(e)}function Yst(t){let e=0;return y0(t.parameters,1),t.parameters.length===1&&(e=w4(t.parameters[0]),wf(e,t.parameters[0])),new GP(e)}function Zst(t){const e=[];let i=null;for(const s of t.parameters)if(s.type==="color"){if(e.length&&Object.freeze(e),i)throw new lt("effect:type-error","Accepts only one color",{});i=nnt(s)}else{const a=w4(s);if(Object.isFrozen(e))throw new lt("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(a),e.length===3&&wf(a,s)}if(e.length<2||e.length>3)throw new lt("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new BP(e[0],e[1],e[2]||0,i||XP("black"))}function Xst(t){let e=1,i=0,s=0;return y0(t.parameters,3),t.parameters[0]&&(e=nn(t.parameters[0])),t.parameters[1]&&(i=w4(t.parameters[1]),wf(i,t.parameters[1])),t.parameters[2]&&(s=nn(t.parameters[2])),new zP(e,i,s)}function y0(t,e){if(t.length>e)throw new lt("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function cv(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in b4)return"<length>";if(t.unit in v4)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function wf(t,e){if(t<0)throw new lt("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function Qst(t){if(t.type!=="quantity"||t.unit!==null)throw new lt("effect:type-error",`Expected <double>, Actual: ${cv(t)}`,{term:t})}function tnt(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new lt("effect:type-error",`Expected <double> or <percentage>, Actual: ${cv(t)}`,{term:t})}const v4={deg:1,grad:.9,rad:180/Math.PI,turn:360};function ent(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&v4[t.unit]!=null))throw new lt("effect:type-error",`Expected <angle>, Actual: ${cv(t)}`,{term:t})}const b4={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function int(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&b4[t.unit]!=null))throw new lt("effect:type-error",`Expected <length>, Actual: ${cv(t)}`,{term:t})}function nn(t){tnt(t);const e=t.value;return wf(e,t),t.unit==="%"?.01*e:e}function rnt(t){return Qst(t),wf(t.value,t),t.value}function snt(t){return ent(t),t.value*v4[t.unit]||0}function w4(t){return int(t),t.value*b4[t.unit]||0}function nnt(t){switch(t.colorType){case"hex":return EF(t.value);case"named":return XP(t.value);case"function":return lnt(t.value)}}function XP(t){if(!RT(t))throw new lt("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return MF(t)}const ont=/^rgba?/i,ant=/^hsla?/i;function lnt(t){if(y0(t.parameters,4),ont.test(t.name))return[nn(t.parameters[0]),nn(t.parameters[1]),nn(t.parameters[2]),t.parameters[3]?nn(t.parameters[3]):1];if(ant.test(t.name))return jT(rnt(t.parameters[0]),nn(t.parameters[1]),nn(t.parameters[2]),t.parameters[3]?nn(t.parameters[3]):1);throw new lt("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function hnt(t,e,i){var s;try{return pnt(t)}catch(a){(s=i==null?void 0:i.messages)==null||s.push(a)}return null}function unt(t,e,i,s){try{const a=cnt(t);yu(i,a,e)}catch(a){s.messages&&s.messages.push(a)}}function cnt(t){const e=ZP(t);return e?qst(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:s})=>({scale:i,value:s.map(a=>a.toJSON())})):null}function pnt(t){if(!t||t.length===0)return null;if(dnt(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:NS(i.value)});return e}return NS(t)}function dnt(t){const e=t[0];return!!e&&"scale"in e}function NS(t){if(!t||!t.length)return"";const e=[];for(const i of t){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[fo(i,"amount")];break;case"blur":s=[fo(i,"radius","pt")];break;case"hue-rotate":s=[fo(i,"angle","deg")];break;case"drop-shadow":s=[fo(i,"xoffset","pt"),fo(i,"yoffset","pt"),fo(i,"blurRadius","pt"),fnt(i,"color")];break;case"bloom":s=[fo(i,"strength"),fo(i,"radius","pt"),fo(i,"threshold")]}const a=`${i.type}(${s.filter(Boolean).join(" ")})`;ZP(a),e.push(a)}return e.join(" ")}function fo(t,e,i){if(t[e]==null)throw new lt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function fnt(t,e){if(t[e]==null)throw new lt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const LS={read:{reader:hnt},write:{allowNull:!0,writer:unt}},QP=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return w([T({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),w([T({json:{read:!1,write:!1,origins:{"web-map":LS,"portal-item":LS}}})],e.prototype,"effect",void 0),e=w([W("esri.layers.mixins.BlendLayer")],e),e},tC=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return w([T({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=w([W("esri.layers.mixins.CustomParametersMixin")],e),e},RS={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},jS={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},DS={ArcGISFeatureLayer:!0},ynt={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":RS,"web-map/basemap":jS,"web-map/tables":DS,"link-chart/operational-layers":{...RS,LinkChartLayer:!0},"link-chart/basemap":jS,"link-chart/tables":DS,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},eC=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,s,a,d){(d&&d.layerContainerType==="ground"||i&&qR(this,a,{},d))&&(s[a]=i)}writeOperationalLayerType(i,s,a,d){!i||d&&d.layerContainerType==="tables"||(s.layerType=i)}writeTitle(i,s){s.title=i??"Layer"}read(i,s){s&&(s.layer=this),VR(this,i,a=>super.read(i,a),s)}write(i,s){var y,m;if(s!=null&&s.origin){const _=`${s.origin}/${s.layerContainerType||"operational-layers"}`,S=ynt[_];let I=!!(S!=null&&S[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(I=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&_==="web-map/operational-layers"&&(I=!1),!I)return(y=s.messages)==null||y.push(new lt("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const a=super.write(i,{...s,layer:this}),d=!!s&&!!s.messages&&!!s.messages.filter(_=>_ instanceof lt&&_.name==="web-document-write:property-required").length;return Lg(a==null?void 0:a.url)?((m=s==null?void 0:s.messages)==null||m.push(new lt("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&d?null:a}beforeSave(){}};return w([T({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),w([T(Est)],e.prototype,"listMode",void 0),w([At("listMode")],e.prototype,"writeListMode",null),w([T({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),w([At("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),w([T(n9)],e.prototype,"opacity",void 0),w([T({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),w([At("title"),At(["web-scene"],"title")],e.prototype,"writeTitle",null),w([T({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=w([W("esri.layers.mixins.OperationalLayer")],e),e},iC=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Je(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,a){if(s.itemId)return new Jp({id:s.itemId,portal:a&&a.portal})}writePortalItem(i,s){i&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem&&this.portalItem.id)try{const{load:a}=await bt(()=>import("./layersLoader-7b62993d.js"),["assets/layersLoader-7b62993d.js","assets/fetchService-667ec519.js","assets/jsonContext-185d068a.js","assets/styleUtils-60111c84.js"]);return Ke(s),await a({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},s)}catch(a){throw Qi(a)||mt.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${a}`),a}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(on(s),!0)))}async _setUserPrivileges(i,s){if(!_e.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:a,fullEdit:d},content:{updateItem:y}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",a),this._set("userHasFullEditingPrivileges",d),this._set("userHasUpdateItemPrivileges",y)}catch(a){on(a)}}async _fetchUserPrivileges(i,s){let a=this.portalItem;if(!i||!a||!a.loaded||a.sourceUrl)return this._fetchFallbackUserPrivileges(s);const d=i===a.id;if(d&&a.portal.user)return kS(a);let y,m;if(d)y=a.portal.url;else try{y=await cF(this.url,s)}catch(A){on(A)}if(!y||!gj(y,a.portal.url))return this._fetchFallbackUserPrivileges(s);try{const A=s!=null?s.signal:null;m=await(fe==null?void 0:fe.getCredential(`${y}/sharing`,{prompt:!1,signal:A}))}catch(A){on(A)}const _=!0,S=!1,I=!1;if(!m)return{features:{edit:_,fullEdit:S},content:{updateItem:I}};try{if(d?await a.reload():(a=new Jp({id:i,portal:{url:y}}),await a.load(s)),a.portal.user)return kS(a)}catch(A){on(A)}return{features:{edit:_,fullEdit:S},content:{updateItem:I}}}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(a){on(a)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?fe==null?void 0:fe.findCredential(this.url):null;if(!s)return!0;const a=T1.credential===s?T1.user:await this._fetchEditingUser(i);return T1.credential=s,T1.user=a,a==null||a.privileges==null||a.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var I,A;const s=(A=(I=this.portalItem)==null?void 0:I.portal)==null?void 0:A.user;if(s)return s;const a=fe.findServerInfo(this.url??"");if(!(a!=null&&a.owningSystemUrl))return null;const d=`${a.owningSystemUrl}/sharing/rest`,y=Lr.getDefault();if(y&&y.loaded&&un(y.restUrl)===un(d))return y.user;const m=`${d}/community/self`,_=i!=null?i.signal:null,S=await _5(ye(m,{authMode:"no-prompt",query:{f:"json"},signal:_}));return S.ok?z5.fromJSON(S.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const a=s&&s.portal,d=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Lr.getDefault());return a&&d&&!eT(d.restUrl,a.restUrl)?(s.messages&&s.messages.push(new lt("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return w([T({type:Jp})],e.prototype,"portalItem",null),w([kt("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),w([At("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),w([T({clonable:!1})],e.prototype,"resourceReferences",void 0),w([T({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),w([T({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),w([T({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=w([W("esri.layers.mixins.PortalLayer")],e),e},T1={credential:null,user:null},Gd=new Vt,dd=new WeakMap;function mnt(t){rC(t)&&Gd.push(t)}function gnt(t){rC(t)&&Gd.includes(t)&&Gd.remove(t)}function rC(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function sC(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:sC(e,t%e):0}let G2=0,M1=0;function vnt(){const t=Date.now();for(const e of Gd)e.refreshInterval&&t-(dd.get(e)??0)+5>=6e4*e.refreshInterval&&(dd.set(e,t),e.refresh(t))}w$(()=>{const t=Date.now();let e=0;for(const i of Gd)e=sC(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?dd.get(i)||dd.set(i,t):dd.delete(i);if(e!==M1){if(M1=e,clearInterval(G2),M1===0)return void(G2=0);G2=setInterval(vnt,M1)}});const nC=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=f$(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||mnt(this)},()=>{})}destroy(){gnt(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){hb(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{mt.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}};return w([T({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),w([T({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),w([T()],e.prototype,"refreshParameters",null),e=w([W("esri.layers.mixins.RefreshableLayer")],e),e},oC=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&bnt(i,s.effectiveScaleRange);const a=this._get("effectiveScaleRange");return a&&a.minScale===i.minScale&&a.maxScale===i.maxScale?a:i}};return w([T({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),w([T({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),w([T({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=w([W("esri.layers.mixins.ScaleRangeLayer")],e),e};function bnt(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}var l9;let kp=l9=class extends gt{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new l9({minValue:this.minValue,maxValue:this.maxValue})}};w([T({type:Number,json:{write:!0}})],kp.prototype,"minValue",void 0),w([T({type:Number,json:{write:!0}})],kp.prototype,"maxValue",void 0),kp=l9=w([W("esri.renderer.support.AuthoringInfoClassBreakInfo")],kp);var h9;let el=h9=class extends gt{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new h9({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ot(this.classBreakInfos)})}};w([T({type:String,json:{write:!0}})],el.prototype,"field",void 0),w([T({type:String,json:{write:!0}})],el.prototype,"normalizationField",void 0),w([T({type:String,json:{write:!0}})],el.prototype,"label",void 0),w([T({type:[kp],json:{write:!0}})],el.prototype,"classBreakInfos",void 0),el=h9=w([W("esri.renderers.support.AuthoringInfoFieldInfo")],el);var u9;const E1=new Ie({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),I1=new Ie({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),FS={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},zS=["high-to-low","above-and-below","centered-on","extremes"],VS=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],GS=["seconds","minutes","hours","days","months","years"];let kr=u9=class extends gt{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new u9({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};w([T({types:FS,json:{write:!0}})],kr.prototype,"endTime",void 0),w([Ne("endTime")],kr.prototype,"castEndTime",null),w([T({type:String,json:{write:!0}})],kr.prototype,"field",void 0),w([T({type:Number,json:{write:!0}})],kr.prototype,"maxSliderValue",void 0),w([T({type:Number,json:{write:!0}})],kr.prototype,"minSliderValue",void 0),w([T({types:FS,json:{write:!0}})],kr.prototype,"startTime",void 0),w([Ne("startTime")],kr.prototype,"castStartTime",null),w([T({type:E1.apiValues,value:null,json:{type:E1.jsonValues,read:E1.read,write:E1.write}})],kr.prototype,"style",null),w([T({type:VS,value:null,json:{type:VS,origins:{"web-scene":{type:zS,write:{writer:(t,e)=>{zS.includes(t)&&(e.theme=t)}}}},write:!0}})],kr.prototype,"theme",null),w([T({type:I1.apiValues,json:{type:I1.jsonValues,read:I1.read,write:I1.write}})],kr.prototype,"type",void 0),w([T({type:GS,json:{type:GS,write:!0}})],kr.prototype,"units",void 0),kr=u9=w([W("esri.renderers.support.AuthoringInfoVisualVariable")],kr);const wnt=kr;let Py=class extends gt{constructor(e){super(e),this.type=null}};w([T({readOnly:!0,json:{read:!1,write:!0}})],Py.prototype,"type",void 0),Py=w([W("esri.rest.support.ColorRamp")],Py);const _4=Py;var c9;let wh=c9=class extends _4{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new c9({fromColor:ot(this.fromColor),toColor:ot(this.toColor),algorithm:this.algorithm})}};w([Lt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],wh.prototype,"algorithm",void 0),w([T({type:Xt,json:{type:[Ee],write:!0}})],wh.prototype,"fromColor",void 0),w([T({type:Xt,json:{type:[Ee],write:!0}})],wh.prototype,"toColor",void 0),w([T({type:["algorithmic"]})],wh.prototype,"type",void 0),wh=c9=w([W("esri.rest.support.AlgorithmicColorRamp")],wh);const x4=wh;var p9;let Op=p9=class extends _4{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new p9({colorRamps:ot(this.colorRamps)})}};w([T({type:[x4],json:{write:!0}})],Op.prototype,"colorRamps",void 0),w([T({type:["multipart"]})],Op.prototype,"type",void 0),Op=p9=w([W("esri.rest.support.MultipartColorRamp")],Op);const aC=Op,_nt={key:"type",base:_4,typeMap:{algorithmic:x4,multipart:aC}};function xnt(t){return t&&t.type?t.type==="algorithmic"?x4.fromJSON(t):t.type==="multipart"?aC.fromJSON(t):null:null}var d9;const Jl=new Ie({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),A1=new Ie({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),US=new Ie({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),qS=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Snt=["high-to-low","above-and-below","above","below","90-10"],$nt=["flow-line","wave-front"],Tnt=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ai=d9=class extends gt{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?xnt(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new d9({classificationMethod:this.classificationMethod,colorRamp:ot(this.colorRamp),fadeRatio:ot(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:ot(this.field1),field2:ot(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};w([T({type:Jl.apiValues,value:null,json:{type:Jl.jsonValues,read:Jl.read,write:Jl.write,origins:{"web-document":{default:"manual",type:Jl.jsonValues,read:Jl.read,write:Jl.write}}}})],ai.prototype,"classificationMethod",null),w([T({types:_nt,json:{write:!0}})],ai.prototype,"colorRamp",void 0),w([kt("colorRamp")],ai.prototype,"readColorRamp",null),w([T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ai.prototype,"fadeRatio",void 0),w([T({type:[String],value:null,json:{write:!0}})],ai.prototype,"fields",null),w([T({type:el,value:null,json:{write:!0}})],ai.prototype,"field1",null),w([T({type:el,value:null,json:{write:!0}})],ai.prototype,"field2",null),w([T({type:$nt,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ai.prototype,"flowTheme",null),w([T({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ai.prototype,"focus",null),w([T({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ai.prototype,"isAutoGenerated",void 0),w([T({type:Number,value:null,json:{type:Ee,write:!0}})],ai.prototype,"numClasses",null),w([T({type:qS,json:{type:qS,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ai.prototype,"lengthUnit",void 0),w([T({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ai.prototype,"maxSliderValue",void 0),w([T({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ai.prototype,"minSliderValue",void 0),w([T({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ai.prototype,"statistics",null),w([T({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ai.prototype,"standardDeviationInterval",null),w([T({type:A1.apiValues,value:null,json:{type:A1.jsonValues,read:A1.read,write:A1.write,origins:{"web-scene":{type:US.jsonValues,write:{writer:US.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],ai.prototype,"type",null),w([T({type:[wnt],json:{write:!0}})],ai.prototype,"visualVariables",void 0),w([T({type:Tnt,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ai.prototype,"univariateSymbolStyle",null),w([T({type:Snt,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ai.prototype,"univariateTheme",null),ai=d9=w([W("esri.renderers.support.AuthoringInfo")],ai);const lC=ai,U2=new Ie({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Pp=class extends gt{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};w([T({type:lC,json:{write:!0}})],Pp.prototype,"authoringInfo",void 0),w([T({type:U2.apiValues,readOnly:!0,json:{type:U2.jsonValues,read:!1,write:{writer:U2.write,ignoreOrigin:!0}}})],Pp.prototype,"type",void 0),Pp=w([W("esri.renderers.Renderer")],Pp);const sa=Pp;function Mnt(t){var e,i;return((i=(e=t.match(Ent))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Ent=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var f9;let Pc=f9=class extends gt{constructor(){super(...arguments),this.title=null}clone(){return new f9({title:this.title})}};w([T({type:String,json:{write:!0}})],Pc.prototype,"title",void 0),Pc=f9=w([W("esri.renderers.support.LegendOptions")],Pc);var y9;let Cy=y9=class extends Pc{constructor(){super(...arguments),this.showLegend=null}clone(){return new y9({title:this.title,showLegend:this.showLegend})}};w([T({type:Boolean,json:{write:!0}})],Cy.prototype,"showLegend",void 0),Cy=y9=w([W("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Cy);const hC=Cy,q2=new Ie({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Zs=class extends gt{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(mt.getLogger(this).error(".field: field must be a string value"),null):Kd(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};w([T()],Zs.prototype,"index",void 0),w([T({type:q2.apiValues,readOnly:!0,json:{read:q2.read,write:q2.write}})],Zs.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],Zs.prototype,"field",void 0),w([Ne("field")],Zs.prototype,"castField",null),w([T({type:String,json:{write:!0}})],Zs.prototype,"valueExpression",void 0),w([T({type:String,json:{write:!0}})],Zs.prototype,"valueExpressionTitle",void 0),w([T({readOnly:!0})],Zs.prototype,"arcadeRequired",null),w([T({type:hC,json:{write:!0}})],Zs.prototype,"legendOptions",void 0),Zs=w([W("esri.renderers.visualVariables.VisualVariable")],Zs);const _f=Zs;var m9;let _h=m9=class extends gt{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new m9({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};w([T({type:Xt,json:{type:[Ee],write:!0}})],_h.prototype,"color",void 0),w([T({type:String,json:{write:!0}})],_h.prototype,"label",void 0),w([T({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],_h.prototype,"value",void 0),w([At("value")],_h.prototype,"writeValue",null),_h=m9=w([W("esri.renderers.visualVariables.support.ColorStop")],_h);const Int=_h;var g9;let xh=g9=class extends _f{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new g9({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};w([T({readOnly:!0})],xh.prototype,"cache",null),w([T({type:["color"],json:{type:["colorInfo"]}})],xh.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],xh.prototype,"normalizationField",void 0),w([T({type:[Int],json:{write:!0}})],xh.prototype,"stops",null),xh=g9=w([W("esri.renderers.visualVariables.ColorVariable")],xh);const uC=xh;var v9;let qa=v9=class extends gt{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Td(e.transparency)}writeOpacity(t,e,i){e[i]=H5(t)}clone(){return new v9({label:this.label,opacity:this.opacity,value:this.value})}};w([T({type:String,json:{write:!0}})],qa.prototype,"label",void 0),w([T({type:Number,json:{type:Ee,write:{target:"transparency"}}})],qa.prototype,"opacity",void 0),w([kt("opacity",["transparency"])],qa.prototype,"readOpacity",null),w([At("opacity")],qa.prototype,"writeOpacity",null),w([T({type:Number,json:{write:!0}})],qa.prototype,"value",void 0),qa=v9=w([W("esri.renderers.visualVariables.support.OpacityStop")],qa);const Ant=qa;var b9;let Sh=b9=class extends _f{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new b9({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};w([T({readOnly:!0})],Sh.prototype,"cache",null),w([T({type:["opacity"],json:{type:["transparencyInfo"]}})],Sh.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],Sh.prototype,"normalizationField",void 0),w([T({type:[Ant],json:{write:!0}})],Sh.prototype,"stops",null),Sh=b9=w([W("esri.renderers.visualVariables.OpacityVariable")],Sh);const cC=Sh;var w9;let Ao=w9=class extends _f{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,s){if(s&&s.messages){const a=`visualVariables[${this.index}]`;s.messages.push(new lt("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpressionTitle",context:s}))}}clone(){return new w9({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};w([T({readOnly:!0})],Ao.prototype,"cache",null),w([T({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ao.prototype,"axis",void 0),w([T({type:["rotation"],json:{type:["rotationInfo"]}})],Ao.prototype,"type",void 0),w([T({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ao.prototype,"rotationType",void 0),w([T({type:String,json:{write:!0}})],Ao.prototype,"valueExpressionTitle",void 0),w([At("web-scene","valueExpressionTitle")],Ao.prototype,"writeValueExpressionTitleWebScene",null),Ao=w9=w([W("esri.renderers.visualVariables.RotationVariable")],Ao);const pC=Ao;var _9;let lc=_9=class extends gt{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new _9({label:this.label,size:this.size,value:this.value})}};w([T({type:String,json:{write:!0}})],lc.prototype,"label",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],lc.prototype,"size",void 0),w([T({type:Number,json:{write:!0}})],lc.prototype,"value",void 0),lc=_9=w([W("esri.renderers.visualVariables.support.SizeStop")],lc);const knt=lc;var x9;let Ny=x9=class extends hC{constructor(){super(...arguments),this.customValues=null}clone(){return new x9({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};w([T({type:[Number],json:{write:!0}})],Ny.prototype,"customValues",void 0),Ny=x9=w([W("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Ny);const Ont=Ny;var Uo,Di;function _c(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Ud(t){return t!=null&&!isNaN(t)&&isFinite(t)}function dC(t){return t.valueExpression?Uo.Expression:t.field&&typeof t.field=="string"?Uo.Field:Uo.Unknown}function Pnt(t,e){const i=e||dC(t),s=t.valueUnit||"unknown";return i===Uo.Unknown?Di.Constant:t.stops?Di.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?Di.ClampedLinear:s==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?Di.Proportional:Di.Additive:Di.Identity:Di.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Uo||(Uo={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(Di||(Di={}));const El=mt.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),BS=new io,Ly=Math.PI,fC=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function yC(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(j=>j.type==="color"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void El.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const a=typeof e=="number",d=a?null:e,y=d&&d.attributes;let m=a?e:null;const _=s.field,{ipData:S,hasExpression:I}=s.cache;let A=s.cache.compiledFunc;if(!_&&!I){const j=s.stops;return j&&j[0]&&j[0].color}if(typeof m!="number")if(I){if(i==null||i.arcade==null)return void El.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,V=F.getViewInfo(j),J=F.createExecContext(d,V);if(!A){const Q=F.createSyntaxTree(s.valueExpression);A=F.createFunction(Q),s.cache.compiledFunc=A}m=F.executeFunction(A,J)}else y&&(m=y[_]);const P=s.normalizationField,L=y!=null&&P!=null?parseFloat(y[P]):void 0;if(m!=null&&(!P||a||!isNaN(L)&&L!==0)){isNaN(L)||a||(m/=L);const j=S4(m,S);if(j){const F=j[0],V=j[1],J=F===V?s.stops[F].color:Xt.blendColors(s.stops[F].color,s.stops[V].color,j[2],i!=null?i.color:void 0);return new Xt(J)}}}function mC(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(j=>j.type==="opacity"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void El.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a=typeof e=="number",d=a?null:e,y=d&&d.attributes;let m=a?e:null;const _=s.field,{ipData:S,hasExpression:I}=s.cache;let A=s.cache.compiledFunc;if(!_&&!I){const j=s.stops;return j&&j[0]&&j[0].opacity}if(typeof m!="number")if(I){if(i==null||i.arcade==null)return void El.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,V=F.getViewInfo(j),J=F.createExecContext(d,V);if(!A){const Q=F.createSyntaxTree(s.valueExpression);A=F.createFunction(Q),s.cache.compiledFunc=A}m=F.executeFunction(A,J)}else y&&(m=y[_]);const P=s.normalizationField,L=y!=null&&P!=null?parseFloat(y[P]):void 0;if(m!=null&&(!P||a||!isNaN(L)&&L!==0)){isNaN(L)||a||(m/=L);const j=S4(m,S);if(j){const F=j[0],V=j[1];if(F===V)return s.stops[F].opacity;{const J=s.stops[F].opacity;return J+(s.stops[V].opacity-J)*j[2]}}}}function gC(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(L=>L.type==="rotation"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void El.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=s.axis||"heading",d=a==="heading"&&s.rotationType==="arithmetic"?90:0,y=a==="heading"&&s.rotationType==="arithmetic"?-1:1,m=typeof e=="number"?null:e,_=m&&m.attributes,S=s.field,{hasExpression:I}=s.cache;let A=s.cache.compiledFunc,P=0;if(!S&&!I)return P;if(I){if(i==null||i.arcade==null)return void El.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},j=i.arcade.arcadeUtils,F=j.getViewInfo(L),V=j.createExecContext(m,F);if(!A){const J=j.createSyntaxTree(s.valueExpression);A=j.createFunction(J),s.cache.compiledFunc=A}P=j.executeFunction(A,V)}else _&&(P=_[S]||0);return P=typeof P!="number"||isNaN(P)?null:d+y*P,P}function Cnt(t,e,i){const s=typeof e=="number",a=s?null:e,d=a&&a.attributes;let y=s?e:null;const{isScaleDriven:m}=t.cache;let _=t.cache.compiledFunc;if(m){const I=i!=null?i.scale:void 0,A=i!=null?i.view:void 0;y=I==null||A==="3d"?Nnt(t):I}else if(!s)switch(t.inputValueType){case Uo.Expression:{if(i==null||i.arcade==null)return void El.error("Use of arcade expressions requires an arcade context");const I={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,P=A.getViewInfo(I),L=A.createExecContext(a,P);if(!_){const j=A.createSyntaxTree(t.valueExpression);_=A.createFunction(j),t.cache.compiledFunc=_}y=A.executeFunction(_,L);break}case Uo.Field:d&&(y=d[t.field]);break;case Uo.Unknown:y=null}if(!Ud(y))return null;if(s||!t.normalizationField)return y;const S=d?parseFloat(d[t.normalizationField]):null;return Ud(S)&&S!==0?y/S:null}function Nnt(t){let e=null,i=null;const s=t.stops;return s?(e=s[0].value,i=s[s.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function pv(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(d=>d.type==="size"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void El.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=bC(Cnt(s,e,i),s,e,i,s.cache.ipData);return a==null||isNaN(a)?0:a}function Nr(t,e,i){return t==null?null:_c(t)?pv(t,e,i):Ud(t)?t:null}function vC(t,e,i){return Ud(i)&&t>i?i:Ud(e)&&t<e?e:t}function Lnt(t,e,i,s){return t+((Nr(e.minSize,i,s)||e.minDataValue)??0)}function Rnt(t,e,i){const s=t.stops;let a=s&&s.length&&s[0].size;return a==null&&(a=t.minSize),Nr(a,e,i)}function jnt(t,e,i,s){const a=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),d=Nr(e.minSize,i,s),y=Nr(e.maxSize,i,s),m=s!=null?s.shape:void 0;if(t<=e.minDataValue)return d;if(t>=e.maxDataValue)return y;if(d==null||y==null)return null;if(e.scaleBy==="area"&&m){const _=m==="circle",S=_?Ly*(d/2)**2:d*d,I=S+a*((_?Ly*(y/2)**2:y*y)-S);return _?2*Math.sqrt(I/Ly):Math.sqrt(I)}return d+a*(y-d)}function Dnt(t,e,i,s){const a=s!=null?s.shape:void 0,d=t/e.minDataValue,y=Nr(e.minSize,i,s),m=Nr(e.maxSize,i,s);let _=null;return _=a==="circle"?2*Math.sqrt(d*(y/2)**2):a==="square"||a==="diamond"||a==="image"?Math.sqrt(d*y**2):d*y,vC(_,y,m)}function Fnt(t,e,i,s,a){var _,S,I;const[d,y,m]=S4(t,a);if(d===y)return Nr((_=e.stops)==null?void 0:_[d].size,i,s);{const A=Nr((S=e.stops)==null?void 0:S[d].size,i,s);return A+(Nr((I=e.stops)==null?void 0:I[y].size,i,s)-A)*m}}function znt(t,e,i,s){const a=(s!=null&&s.resolution?s.resolution:1)*g4[e.valueUnit],d=Nr(e.minSize,i,s),y=Nr(e.maxSize,i,s),{valueRepresentation:m}=e;let _=null;return _=m==="area"?2*Math.sqrt(t/Ly)/a:m==="radius"||m==="distance"?2*t/a:t/a,vC(_,d,y)}function bC(t,e,i,s,a){switch(e.transformationType){case Di.Additive:return Lnt(t,e,i,s);case Di.Constant:return Rnt(e,i,s);case Di.ClampedLinear:return jnt(t,e,i,s);case Di.Proportional:return Dnt(t,e,i,s);case Di.Stops:return Fnt(t,e,i,s,a);case Di.RealWorldSize:return znt(t,e,i,s);case Di.Identity:return t;case Di.Unknown:return null}}function Vnt(t,e,i){const{isScaleDriven:s}=t.cache;if(!(s&&i==="3d"||e))return null;const a={scale:e,view:i};let d=Nr(t.minSize,BS,a),y=Nr(t.maxSize,BS,a);if(d!=null||y!=null){if(d>y){const m=y;y=d,d=m}return{minSize:d,maxSize:y}}}function Gnt(t,e,i){if(!t.visualVariables)return;const s=[],a=[],d=[],y=[],m=[];for(const _ of t.visualVariables)switch(_.type){case"color":a.push(_);break;case"opacity":d.push(_);break;case"rotation":m.push(_);break;case"size":y.push(_)}return a.forEach(_=>{const S=yC(_,e,i);s.push({variable:_,value:S})}),d.forEach(_=>{const S=mC(_,e,i);s.push({variable:_,value:S})}),m.forEach(_=>{const S=gC(_,e,i);s.push({variable:_,value:S})}),y.forEach(_=>{const S=pv(_,e,i);s.push({variable:_,value:S})}),s.filter(_=>_.value!=null)}function S4(t,e){if(!e)return;let i=0,s=e.length-1;return e.some((a,d)=>t<a?(s=d,!0):(i=d,!1)),[i,s,(t-e[i])/(e[s]-e[i])]}function Unt(t,e,i){const s=["proportional","proportional","proportional"];for(const a of t){const d=a.useSymbolValue?"symbol-value":pv(a,e,i);switch(a.axis){case"width":s[0]=d;break;case"depth":s[1]=d;break;case"height":s[2]=d;break;case"width-and-depth":s[0]=d,s[1]=d;break;case"all":case void 0:case null:s[0]=d,s[1]=d,s[2]=d;break;default:a.axis}}return s}const e1t=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Unt,getColor:yC,getOpacity:mC,getRotationAngle:gC,getSize:pv,getSizeForValue:bC,getSizeFromNumberOrVariable:Nr,getSizeRangeAtScale:Vnt,getVisualVariableValues:Gnt,viewScaleRE:fC},Symbol.toStringTag,{value:"Module"}));var S9;const k1=new Ie({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),$9=new Ie({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function HS(t){if(t!=null)return typeof t=="string"||typeof t=="number"?ze(t):t.type==="size"?_c(t)?t:(delete(t={...t}).type,new ve(t)):void 0}function WS(t,e,i){if(typeof t!="object")return t;const s=new ve;return s.read(t,i),s}let ve=S9=class extends _f{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&fC.test(this.valueExpression)}}set expression(t){mt.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){_c(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),_c(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return dC(this)}set maxDataValue(t){t&&this.stops&&(mt.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(mt.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return HS(t)}readMaxSize(t,e,i){return WS(t,e,i)}set minDataValue(t){t&&this.stops&&(mt.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(mt.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return HS(t)}readMinSize(t,e,i){return WS(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(mt.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return Pnt(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,s){if(t==="$view.scale"){if(s&&s.messages){const a=this.index,d=typeof a=="string"?a:`visualVariables[${a}]`;s.messages.push(new lt("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:d+".valueExpression",context:s}))}}else e[i]=t}readValueUnit(t){return t?$9.read(t):null}clone(){return new S9({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:_c(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:_c(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Di.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===Di.Stops){const t=this.stops;if(!t)return this;const e=t.map(s=>s.size).reverse(),i=t.length;for(let s=0;s<i;s++)t[s].size=e[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};w([T({readOnly:!0})],ve.prototype,"cache",null),w([T({type:k1.apiValues,json:{type:k1.jsonValues,origins:{"web-map":{read:!1}},read:k1.read,write:k1.write}})],ve.prototype,"axis",void 0),w([T({type:String,value:null,json:{read:!1}})],ve.prototype,"expression",null),w([T()],ve.prototype,"index",null),w([T({type:String,readOnly:!0})],ve.prototype,"inputValueType",null),w([T({type:Ont,json:{write:!0}})],ve.prototype,"legendOptions",void 0),w([T({type:Number,value:null,json:{write:!0}})],ve.prototype,"maxDataValue",null),w([T({type:Number,value:null,json:{write:!0}})],ve.prototype,"maxSize",null),w([Ne("maxSize")],ve.prototype,"castMaxSize",null),w([kt("maxSize")],ve.prototype,"readMaxSize",null),w([T({type:Number,value:null,json:{write:!0}})],ve.prototype,"minDataValue",null),w([T({type:Number,value:null,json:{write:!0}})],ve.prototype,"minSize",null),w([Ne("minSize")],ve.prototype,"castMinSize",null),w([kt("minSize")],ve.prototype,"readMinSize",null),w([T({type:String,json:{write:!0}})],ve.prototype,"normalizationField",void 0),w([T({readOnly:!0})],ve.prototype,"arcadeRequired",null),w([T({type:String})],ve.prototype,"scaleBy",void 0),w([T({type:[knt],value:null,json:{write:!0}})],ve.prototype,"stops",null),w([T({type:["outline"],json:{write:!0}})],ve.prototype,"target",void 0),w([T({type:String,readOnly:!0})],ve.prototype,"transformationType",null),w([T({type:["size"],json:{type:["sizeInfo"]}})],ve.prototype,"type",void 0),w([T({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ve.prototype,"useSymbolValue",void 0),w([T({type:String,json:{write:!0}})],ve.prototype,"valueExpression",void 0),w([kt("valueExpression",["valueExpression","expression"])],ve.prototype,"readValueExpression",null),w([At("web-scene","valueExpression")],ve.prototype,"writeValueExpressionWebScene",null),w([T({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ve.prototype,"valueRepresentation",void 0),w([T({type:$9.apiValues,json:{write:$9.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ve.prototype,"valueUnit",void 0),w([kt("valueUnit")],ve.prototype,"readValueUnit",null),ve=S9=w([W("esri.renderers.visualVariables.SizeVariable")],ve);const wC=ve,qnt={color:uC,size:wC,opacity:cC,rotation:pC},Bnt=new Ie({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Hnt=/^\[([^\]]+)\]$/i;let Ry=class extends Rt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,s)=>{let a=null;return a=i.target===s.target?0:i.target?1:-1,a});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,s){const{rotationExpression:a,rotationType:d}=i,y=a&&a.match(Hnt),m=y&&y[1];if(m&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:d,field:m})),e)return e.map(_=>{const S=Bnt.read(_.type),I=qnt[S];I||(mt.getLogger(this).warn(`Unknown variable type: ${S}`),s&&s.messages&&s.messages.push(new gn("visual-variable:unsupported",`visualVariable of type '${S}' is not supported`,{definition:_,context:s})));const A=new I;return A.read(_,s),A})}writeVariables(e,i){const s=[];for(const a of e){const d=a.toJSON(i);d&&s.push(d)}return s}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};w([T()],Ry.prototype,"visualVariables",null),Ry=w([W("esri.renderers.visualVariables.VisualVariableFactory")],Ry);const Wnt=Ry,Jnt={base:_f,key:"type",typeMap:{opacity:cC,color:uC,rotation:pC,size:wC}},m0=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new Wnt}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,a){return this._vvFactory.readVariables(i,s,a)}writeVisualVariables(i,s,a,d){s[a]=this._vvFactory.writeVariables(i,d)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const a=this.visualVariables;return a?a.filter(d=>d.type===i&&(typeof s=="string"?d.target===s:s!==!1||!d.target)):[]}async collectVVRequiredFields(i,s){let a=[];this.visualVariables&&(a=a.concat(this.visualVariables));for(const d of a)d&&(d.field&&ts(i,s,d.field),d.normalizationField&&ts(i,s,d.normalizationField),d.valueExpression&&(Knt(d.valueExpression,i,s)||await $r(i,s,d.valueExpression)))}};return w([T({types:[Jnt],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),w([kt("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),w([At("visualVariables")],e.prototype,"writeVisualVariables",null),e=w([W("esri.renderers.mixins.VisualVariablesMixin")],e),e};function Knt(t,e,i){const s=Mnt(t);return s!=null&&(ts(e,i,s),!0)}const G0={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Ynt(t,e=G0){var m,_;if(!t)return{symbol:null};const{retainId:i=G0.retainId,ignoreDrivers:s=G0.ignoreDrivers,hasLabelingContext:a=G0.hasLabelingContext,retainCIM:d=G0.retainCIM}=e;let y=null;if(r3(t)||t instanceof wu)y=t.clone();else if(t.type==="cim"){const S=(_=(m=t.data)==null?void 0:m.symbol)==null?void 0:_.type;if(S!=="CIMPointSymbol")return{error:new lt("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${S||"unknown"}' is unsupported in 3D`,{symbol:t})};y=d?t.clone():Fh.fromCIMSymbol(t)}else if(t instanceof As)y=Kg.fromSimpleLineSymbol(t);else if(t instanceof Nl)y=Fh.fromSimpleMarkerSymbol(t);else if(t instanceof Zg)y=Fh.fromPictureMarkerSymbol(t);else if(t instanceof bu)y=e.geometryType&&e.geometryType==="mesh"?Yg.fromSimpleFillSymbol(t):uf.fromSimpleFillSymbol(t);else{if(!(t instanceof c0))return{error:new lt("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};y=a?Jg.fromTextSymbol(t):Fh.fromTextSymbol(t)}return i&&y&&y.type!=="cim"&&(y.id=t.id),s&&r3(y)&&y.symbolLayers.forEach(S=>S.ignoreDrivers=!0),{symbol:y}}function dg(t,e,i,s){const a=_C(t,{},{context:s,isLabelSymbol:!1});a!=null&&(e[i]=a)}function JS(t,e,i,s){const a=_C(t,{},{context:s,isLabelSymbol:!0});a!=null&&(e[i]=a)}function KS(t){return t instanceof u0||t instanceof wu}function _C(t,e,i){if(t==null)return null;const{context:s,isLabelSymbol:a}=i,d=s==null?void 0:s.origin,y=s==null?void 0:s.messages;if(d==="web-scene"&&!KS(t)){const m=Ynt(t,{retainCIM:!0,hasLabelingContext:a});return m.symbol!=null?m.symbol.write(e,s):(y==null||y.push(new lt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:s,error:m.error})),null)}return(d==="web-map"||d==="portal-item"&&!NT(s==null?void 0:s.layer))&&KS(t)?(y==null||y.push(new lt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:s})),null):t.write(e,s)}function r1t(t,e){return WB(t,null,e)}const g0={types:JB,json:{write:{writer:dg},origins:{"web-scene":{types:y7,write:{writer:dg},read:{reader:Yd({types:y7})}}}}},xC={types:{base:Rr,key:"type",typeMap:{"simple-fill":Ec.typeMap["simple-fill"],"picture-fill":Ec.typeMap["picture-fill"],"polygon-3d":Ec.typeMap["polygon-3d"]}},json:{write:{writer:dg},origins:{"web-scene":{type:uf,write:{writer:dg}}}}},jy={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var T9;let Ba=T9=class extends gt{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new T9({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};w([T({type:String,json:{write:!0}})],Ba.prototype,"description",void 0),w([T({type:String,json:{write:!0}})],Ba.prototype,"label",void 0),w([T({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ba.prototype,"minValue",void 0),w([T({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ba.prototype,"maxValue",void 0),w([T(g0)],Ba.prototype,"symbol",void 0),Ba=T9=w([W("esri.renderers.support.ClassBreakInfo")],Ba);const fg=Ba;var M9;const SC="log",Dy="percent-of-total",Fy="field",O1=new Ie({esriNormalizeByLog:SC,esriNormalizeByPercentOfTotal:Dy,esriNormalizeByField:Fy}),Znt=ki(fg);let Ti=M9=class extends m0(sa){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let s=e.minValue;return t.map(a=>{const d=new fg;return d.read(a,i),d.minValue==null&&(d.minValue=s),d.maxValue==null&&(d.maxValue=d.minValue),s=d.maxValue,d})}writeClassBreakInfos(t,e,i,s){const a=t.map(d=>d.write({},s));this._areClassBreaksConsecutive()&&a.forEach(d=>delete d.classMinValue),e[i]=a}castField(t){return t==null?t:typeof t=="function"?(mt.getLogger(this).error(".field: field must be a string value"),null):Kd(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&Fy||i&&Dy||null,e&&i&&mt.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==Fy&&t!==Dy||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let s=null;s=typeof t=="number"?new fg({minValue:t,maxValue:e,symbol:OI(i)}):Znt(ot(t)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const a=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(a[0]===t&&a[1]===e){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||mt.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await au()});const s=this.getBreakIndex(t,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void mt.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const a=await au(),{arcadeUtils:d}=a;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:a}}const s=this.getBreakIndex(t,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((s,a)=>s+a.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new M9({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ot(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ot(this.visualVariables),legendOptions:ot(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),$r(t,e,this.valueExpression)];ts(t,e,this.field),ts(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:a,arcade:d}=e??{},{valueExpression:y}=this;let m=this._compiledValueExpression.valueExpression===y?this._compiledValueExpression.compiledFunction:null;const _=d.arcadeUtils;if(!m){const I=_.createSyntaxTree(y);m=_.createFunction(I),this._compiledValueExpression.compiledFunction=m}this._compiledValueExpression.valueExpression=y;const S=_.executeFunction(m,_.createExecContext(t,_.getViewInfo({viewingMode:i,scale:s,spatialReference:a})));return this._getBreakIndexfromInfos(S)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,s=this.normalizationType;let a=parseFloat(i[e]);if(s){const d=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(s===SC)a=Math.log(a)*Math.LOG10E;else if(s!==Dy||d==null||isNaN(d)){if(s===Fy&&!isNaN(y)){if(isNaN(a)||isNaN(y))return-1;a/=y}}else a=a/d*100}return this._getBreakIndexfromInfos(a)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=t&&(e?t<=s[1]:t<s[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};w([T(xC)],Ti.prototype,"backgroundFillSymbol",void 0),w([T({type:[fg]})],Ti.prototype,"classBreakInfos",void 0),w([kt("classBreakInfos")],Ti.prototype,"readClassBreakInfos",null),w([At("classBreakInfos")],Ti.prototype,"writeClassBreakInfos",null),w([T({type:String,json:{write:!0}})],Ti.prototype,"defaultLabel",void 0),w([T(g0)],Ti.prototype,"defaultSymbol",void 0),w([T({type:String,json:{write:!0}})],Ti.prototype,"field",void 0),w([Ne("field")],Ti.prototype,"castField",null),w([T({type:Boolean})],Ti.prototype,"isMaxInclusive",void 0),w([T({type:Pc,json:{write:!0}})],Ti.prototype,"legendOptions",void 0),w([T({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ti.prototype,"minValue",null),w([T({type:String,json:{write:!0}})],Ti.prototype,"normalizationField",void 0),w([T({type:Number,cast:t=>ws(t),json:{write:!0}})],Ti.prototype,"normalizationTotal",void 0),w([T({type:O1.apiValues,value:null,json:{type:O1.jsonValues,read:O1.read,write:O1.write}})],Ti.prototype,"normalizationType",null),w([Lt({classBreaks:"class-breaks"})],Ti.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],Ti.prototype,"valueExpression",void 0),w([T({type:String,json:{write:!0}})],Ti.prototype,"valueExpressionTitle",void 0),Ti=M9=w([W("esri.renderers.ClassBreaksRenderer")],Ti);const $C=Ti,B2=-3;var il;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(il||(il={}));let s1t=class{constructor(e,i,s){this.name=e,this._storage=i,this.id=Qnt+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),s&&(this._storage.registerRemoveFunc(this.id,s),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,s,a=0){this._storage.put(this,e,i,s,a)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,s){this._storage.updateSize(this,e,i,s)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Xnt=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new gl,this._users=new gl}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,s,a,d){i=e.id+i;const y=this._db.get(i);if(y&&(this._size-=y.size,e.size-=y.size,this._db.delete(i),y.entry!==s&&this._notifyRemove(i,y.entry,il.ALL)),a>this._maxSize)return void this._notifyRemove(i,s,il.ALL);if(s===void 0)return void console.warn("Refusing to cache undefined entry ");if(!a||a<0)return void console.warn("Refusing to cache entry with invalid size "+a);const m=1+Math.max(d,B2)-B2;this._db.set(i,{entry:s,size:a,lifetime:m,lives:m}),this._size+=a,e.size+=a,this._checkSizeLimits()}updateSize(e,i,s,a){i=e.id+i;const d=this._db.get(i);if(d&&d.entry===s){for(this._size-=d.size,e.size-=d.size;a>this._maxSize;){const y=this._notifyRemove(i,s,il.SOME);if(!(y!=null&&y>0))return void this._db.delete(i);a=y}d.size=a,this._size+=a,e.size+=a,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const s=this._db.get(i);if(s)return this._size-=s.size,e.size-=s.size,this._db.delete(i),++this._hit,s.entry;++this._miss}get(e,i){i=e.id+i;const s=this._db.get(i);if(s!==void 0)return this._db.delete(i),s.lives=s.lifetime,this._db.set(i,s),++this._hit,s.entry;++this._miss}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((y,m)=>{const _=y.lifetime;s[_]=(s[_]||0)+y.size,this._users.forAll(S=>{const{id:I,name:A}=S;if(m.startsWith(I)){const P=i[A]||0;i[A]=P+y.size}})});const a={};this._users.forAll(y=>{const m=y.name;if("hitRate"in y&&typeof y.hitRate=="number"&&!isNaN(y.hitRate)&&y.hitRate>0){const _=i[m]||0;i[m]=_,a[m]=Math.round(100*y.hitRate)+"%"}else a[m]="0%"});const d=Object.keys(i);d.sort((y,m)=>i[m]-i[y]),d.forEach(y=>e[y]=Math.round(i[y]/2**20)+"MB / "+a[y]);for(let y=s.length-1;y>=0;--y){const m=s[y];m&&(e["Priority "+(y+B2-1)]=Math.round(m/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((s,a)=>{a.startsWith(i)&&(this._size-=s.size,this._db.delete(a),this._notifyRemove(a,s.entry,il.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,il.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,s){let a;return this._removeFuncs.some(d=>{if(e.startsWith(d[0])){const y=d[1](i,s);return typeof y=="number"&&(a=y),!0}return!1}),a}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,s]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,s,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,s=this._users.find(a=>e.startsWith(a.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,s&&(s.size-=i.size);const a=this._notifyRemove(e,i.entry,il.SOME);a!=null&&a>0&&(this._size+=a,s&&(s.size+=a),i.lives=i.lifetime,i.size=a,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},Qnt=0,TC=class{constructor(e,i){this._storage=new Xnt,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,s=1){this._storage.put(this,e,i,s,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}};function tot(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function YS(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function ZS(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let MC=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const s of e){const a=s==null?void 0:s.name,d=QS(s==null?void 0:s.name);if(a&&d){const y=XS(a);this._fieldsMap.set(a,s),this._fieldsMap.set(y,s),this._normalizedFieldsMap.set(d,s),i.push(y),tot(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):DM(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),YS(s)||ZS(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)YS(e)||ZS(e)||e.nullable||yG(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(XS(e))??this._normalizedFieldsMap.get(QS(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function XS(t){return t.trim().toLowerCase()}function QS(t){var e;return((e=XV(t))==null?void 0:e.toLowerCase())??""}const t8="esri.renderers.support.DictionaryLoader",eot={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let $4=class{constructor(e,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new TC(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(j){if(Qi(j))return this._dictionaryPromise=null,null}const a=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),d={};if(this.fieldMap)for(const j of this._symbolFields){const F=this._getFieldName(this.fieldMap[j]);d[j]=F?a?e.attributes[F]:""+e.attributes[F]:""}let y=null;try{y=s==null?void 0:s(d,i)}catch{return null}if(!y||typeof y!="string")return null;const m=p5(y).toString(),_=this._symbolCache.get(m);if(_)return _.catch(()=>{this._symbolCache.pop(m)}),_;const S=y.split(";"),I=[],A=[];for(const j of S)if(j)if(j.includes("po:")){const F=j.substr(3).split("|");if(F.length===3){const V=F[0],J=F[1];let Q=F[2];if(J==="DashTemplate")Q=Q.split(" ").map(Z=>Number(Z));else if(J==="Color"){const Z=new Xt(Q).toRgba();Q=[Z[0],Z[1],Z[2],255*Z[3]]}else Q=Number(Q);A.push({primitiveName:V,propertyName:J,value:Q})}}else if(j.includes("|")){for(const F of j.split("|"))if(this._itemNames.has(F)){I.push(F);break}}else this._itemNames.has(j)&&I.push(j);const P=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",L=this._cimPartsToCIMSymbol(I,A,P,i);return this._symbolCache.put(m,L,1),L}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void mt.getLogger(t8).error("no valid URL!");const i=ye(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:s}]=await Promise.all([i,au()]);if(!s)throw this._dictionaryPromise=null,new lt("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:a,dictionary_version:d,expression:y,itemsNames:m}=s,_=y;let S=!1;d&&(this._dictionaryVersion=pg.parse(d),S=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(m),this._symbolFields=a.symbol;const I={};if(this.config){const L=this.config;for(const j in L)I[j]=L[j]}if(a.configuration)for(const L of a.configuration)I.hasOwnProperty(L.name)||(I[L.name]=L.value);const A=[];if(e!=null&&e.fields&&this.fieldMap)for(const L of this._symbolFields){const j=this.fieldMap[L],F=e.fields.filter(V=>V.name.toLowerCase()===(j==null?void 0:j.toLowerCase()));F.length>0&&A.push({...F[0],type:S?F[0].type:"esriFieldTypeString"})}A.length>0&&(this._fieldIndex=new MC(A));const P=KV(_,e!=null?e.spatialReference:null,A,I).then(L=>{const j={scale:0};return(F,V)=>{if(L==null)return null;const J=L.repurposeFeature({geometry:null,attributes:F});return j.scale=V!=null?V.scale??void 0:void 0,L.evaluate({$feature:J,$view:j},L.services)}}).catch(L=>(mt.getLogger(t8).error("Creating dictinoary expression failed:",L),null));return this._dictionaryPromise=P,P}async _cimPartsToCIMSymbol(e,i,s,a){const d=new Array(e.length);for(let _=0;_<e.length;_++)d[_]=this._getSymbolPart(e[_],a);const y=await Promise.all(d),m=this.fieldMap;if(m)for(const _ of y)EC(_,m);return new of({data:this._combineSymbolParts(y,i,s)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(d=>d.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),a=ye(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,a);try{return(await a).data}catch(d){throw this._ongoingRequests.delete(e),d}}_combineSymbolParts(e,i,s){if(!e||e.length===0)return null;const a={...e[0]};if(e.length>1){a.symbolLayers=[];for(const d of e){const y=d;a.symbolLayers.unshift(...y.symbolLayers)}}return s&&(a.callout=eot),{type:"CIMSymbolReference",symbol:a,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function EC(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let s=i.length;for(;s--;){const a=i[s];a&&a.enable!==!1&&a.type==="CIMVectorMarker"&&iot(a,e)}}function iot(t,e){const i=t.markerGraphics;if(i)for(const s of i){if(!s)continue;const a=s.symbol;if(a)switch(a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":EC(a,e);break;case"CIMTextSymbol":a.fieldMap=e}}}const u1t=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:$4},Symbol.toStringTag,{value:"Module"}));var E9;let Xs=E9=class extends m0(sa){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new $4(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,s){s!=null&&s.origin||super.writeVisualVariables(t,e,i,s)}clone(){return new E9({config:ot(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ot(this.fieldMap),url:ot(this.url),visualVariables:ot(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await $r(t,e,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];e.has(s)&&t.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};w([T({type:$4})],Xs.prototype,"_loader",null),w([T({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Xs.prototype,"config",void 0),w([T({type:Object,json:{write:!0}})],Xs.prototype,"fieldMap",void 0),w([T({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Xs.prototype,"scaleExpression",void 0),w([At("scaleExpression")],Xs.prototype,"writeData",null),w([T({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Xs.prototype,"scaleExpressionTitle",void 0),w([T({type:String,json:{write:!0}})],Xs.prototype,"url",void 0),w([At("visualVariables")],Xs.prototype,"writeVisualVariables",null),Xs=E9=w([W("esri.renderers.DictionaryRenderer")],Xs);const rot=Xs;var I9;let ko=I9=class extends gt{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(mt.getLogger(this).error(".field: field must be a string value"),null):Kd(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new I9({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};w([T({type:Xt,json:{type:[Number],write:!0}})],ko.prototype,"color",void 0),w([T({type:String,json:{write:!0}})],ko.prototype,"field",void 0),w([Ne("field")],ko.prototype,"castField",null),w([T({type:String,json:{write:!0}})],ko.prototype,"label",void 0),w([T({type:String,json:{write:!0}})],ko.prototype,"valueExpression",void 0),w([T({type:String,json:{write:!0}})],ko.prototype,"valueExpressionTitle",void 0),ko=I9=w([W("esri.renderers.support.AttributeColorInfo")],ko);const IC=ko;var A9;let zy=A9=class extends gt{constructor(){super(...arguments),this.unit=null}clone(){return new A9({unit:this.unit})}};w([T({type:String,json:{write:!0}})],zy.prototype,"unit",void 0),zy=A9=w([W("esri.renderers.support.DotDensityLegendOptions")],zy);const sot=zy;var k9;let Or=k9=class extends m0(sa){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Xt([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new As,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new bu({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new k9({attributes:ot(this.attributes),backgroundColor:ot(this.backgroundColor),dotBlendingEnabled:ot(this.dotBlendingEnabled),dotShape:ot(this.dotShape),dotSize:ot(this.dotSize),dotValue:ot(this.dotValue),legendOptions:ot(this.legendOptions),outline:ot(this.outline),referenceScale:ot(this.referenceScale),visualVariables:ot(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await $r(t,e,i.valueExpression),i.field&&t.add(i.field)}};w([T({type:[IC],json:{write:!0}})],Or.prototype,"attributes",void 0),w([T({type:Xt,json:{write:!0}})],Or.prototype,"backgroundColor",void 0),w([T({type:Boolean,json:{write:!0}})],Or.prototype,"dotBlendingEnabled",void 0),w([T({type:String,json:{write:!1}})],Or.prototype,"dotShape",void 0),w([T({type:Number,json:{write:!0}})],Or.prototype,"dotSize",void 0),w([T({type:sot,json:{write:!0}})],Or.prototype,"legendOptions",void 0),w([T({type:As,json:{default:null,write:!0}})],Or.prototype,"outline",void 0),w([T({type:Number,json:{write:!0}})],Or.prototype,"dotValue",void 0),w([T({type:Number,json:{write:!0}})],Or.prototype,"referenceScale",void 0),w([T({type:Number,json:{write:!0}})],Or.prototype,"seed",void 0),w([Lt({dotDensity:"dot-density"})],Or.prototype,"type",void 0),Or=k9=w([W("esri.renderers.DotDensityRenderer")],Or);const not=Or;var O9;let Cp=O9=class extends gt{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new O9({color:this.color,ratio:this.ratio})}};w([T({type:Xt,json:{type:[Ee],default:null,write:!0}})],Cp.prototype,"color",void 0),w([T({type:Number,json:{write:!0}})],Cp.prototype,"ratio",void 0),Cp=O9=w([W("esri.renderers.support.HeatmapColorStop")],Cp);const Vy=Cp;let hc=class extends _i(gt){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};w([T({type:String,json:{write:!0}})],hc.prototype,"minLabel",void 0),w([T({type:String,json:{write:!0}})],hc.prototype,"maxLabel",void 0),w([T({type:String,json:{write:!0}})],hc.prototype,"title",void 0),hc=w([W("esri.renderers.support.HeatmapLegendOptions")],hc);function dv(){return[0,0,0,0]}function oot(t){return[t[0],t[1],t[2],t[3]]}function v0(t,e,i,s){return[t,e,i,s]}function aot(t){const e=dv(),i=Math.min(4,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function lot(t,e){return new Float64Array(t,e,4)}function AC(){return dv()}function kC(){return v0(1,1,1,1)}function OC(){return v0(1,0,0,0)}function PC(){return v0(0,1,0,0)}function CC(){return v0(0,0,1,0)}function NC(){return v0(0,0,0,1)}const hot=AC(),uot=kC(),cot=OC(),pot=PC(),dot=CC(),fot=NC();Object.freeze(Object.defineProperty({__proto__:null,ONES:uot,UNIT_W:fot,UNIT_X:cot,UNIT_Y:pot,UNIT_Z:dot,ZEROS:hot,clone:oot,create:dv,createView:lot,fromArray:aot,fromValues:v0,ones:kC,unitW:NC,unitX:OC,unitY:PC,unitZ:CC,zeros:AC},Symbol.toStringTag,{value:"Module"}));const T4=2.4;function yot(t){return Yo(t*T4)}function mot(t){return XE(t)/T4}function got(t,e,i,s){let{color:a,ratio:d}=e,{color:y,ratio:m}=i;m===d&&(m===1?d-=1e-6:m+=1e-6);const _=Es((s-d)/(m-d),0,1);sM(t,a.toArray(),y.toArray(),_)}function p1t(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:m})=>m>=0&&m<=1).sort((m,_)=>m.ratio-_.ratio).map(({color:m,ratio:_})=>({color:m,ratio:Math.max(_,.001)})),t.length<1)return i;let s=t[0],a=t[0],d=1;const y=dv();for(let m=0;m<512;m++){const _=(m+.5)/512;for(;_>a.ratio&&d<t.length;)s=a,a=t[d++];got(y,s,a,_),i.set(y,4*m)}return i}function d1t(t,e,i,s){const{radius:a,fieldOffset:d,field:y}=e,m=Math.round(XE(a)),_=new Float64Array(i*s);let S,I=Number.NEGATIVE_INFINITY;const A=wot(y,d),P=new Set;for(const L of t){const j=L.getCursor();for(;j.next();){const F=j.getObjectId();if(P.has(F))continue;P.add(F);const V=j.readLegacyPointGeometry(),J=128;if(V.x<-J||V.x>=i+J||V.y<-J||V.y>s+J)continue;const Q=+A(j),Z=Math.max(0,Math.round(V.x)-m),et=Math.max(0,Math.round(V.y)-m),st=Math.min(s,Math.round(V.y)+m),nt=Math.min(i,Math.round(V.x)+m);for(let pt=et;pt<st;pt++)for(let yt=Z;yt<nt;yt++){const $t=pt*i+yt,Ot=bot(V.x-yt,V.y-pt,m);S=_[$t]+=Ot*Q,S>I&&(I=S)}}}return{matrix:_.buffer,max:I}}function f1t(t,e,i,s,a,d){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const y=t.getImageData(0,0,e,e);i&&s&&y.data.set(new Uint8ClampedArray(vot(e,i,s,a,d))),t.putImageData(y,0,0)}function vot(t,e,i,s,a){const d=new Uint32Array(t*t),y="buffer"in e?e:new Float64Array(e),m="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),_=m.length/(a-s);for(let S=0;S<y.length;S++){const I=y[S],A=Math.floor((I-s)*_);d[S]=m[Es(A,0,m.length-1)]}return d.buffer}function bot(t,e,i){const s=Math.sqrt(t**2+e**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function y1t(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function wot(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var P9;const LC="esri.renderers.HeatmapRenderer",_ot=mt.getLogger(LC);function e8(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:s}=t;if(e!=null||i!=null||s!=null){const{blurRadius:a,maxPixelIntensity:d,minPixelIntensity:y,...m}=t;return m}}return t}let Ri=P9=class extends sa{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Vy({ratio:0,color:new Xt("rgba(255, 140, 0, 0)")}),new Vy({ratio:.75,color:new Xt("rgba(255, 140, 0, 1)")}),new Vy({ratio:.9,color:new Xt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return e8(t)}get blurRadius(){return mot(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",yot(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(T4**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||Fi(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,Xc(()=>{NR(_ot,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=e8(t),super.read(t,e)}getSymbol(){return new Nl}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,s=this.valueExpression;i&&typeof i=="string"&&await ts(t,e,i),s&&typeof s=="string"&&await $r(t,e,s)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new P9({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ot(this.colorStops),field:this.field,legendOptions:ot(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};w([T({type:lC,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ri.prototype,"authoringInfo",void 0),w([T({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ri.prototype,"blurRadius",null),w([T({type:[Vy],json:{write:!0}})],Ri.prototype,"colorStops",void 0),w([T({type:String,json:{write:!0}})],Ri.prototype,"field",void 0),w([T({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Ri.prototype,"fieldOffset",void 0),w([T({type:hc,json:{write:!0}})],Ri.prototype,"legendOptions",void 0),w([T({type:Number,json:{write:!0}})],Ri.prototype,"maxDensity",void 0),w([T({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ri.prototype,"maxPixelIntensity",null),w([T({type:Number,json:{write:!0}})],Ri.prototype,"minDensity",void 0),w([T({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ri.prototype,"minPixelIntensity",null),w([T({type:Number,cast:ze,json:{write:!0}})],Ri.prototype,"radius",void 0),w([T({type:Number,range:{min:0},json:{default:0,write:!0}})],Ri.prototype,"referenceScale",void 0),w([Lt({heatmap:"heatmap"})],Ri.prototype,"type",void 0),w([T({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Ri.prototype,"valueExpression",void 0),w([T({type:String})],Ri.prototype,"valueExpressionTitle",void 0),w([T({readOnly:!0})],Ri.prototype,"_pixelIntensityToDensity",null),Ri=P9=w([W(LC)],Ri);const RC=Ri;let Lh=class extends _i(gt){constructor(){super(...arguments),this.color=new Xt([0,0,0,0]),this.label=null,this.threshold=0}};w([T({type:Xt,json:{write:!0}})],Lh.prototype,"color",void 0),w([T({type:String,json:{write:!0}})],Lh.prototype,"label",void 0),w([T({type:Number,range:{min:0,max:1},json:{write:!0}})],Lh.prototype,"threshold",void 0),Lh=w([W("esri.renderers.support.OthersCategory")],Lh);let Gy=class extends _i(gt){constructor(){super(...arguments),this.title=null}};w([T({type:String,json:{write:!0}})],Gy.prototype,"title",void 0),Gy=w([W("esri.renderers.support.PieChartLegendOptions")],Gy);let Vr=class extends m0(_i(sa)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Xt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Lh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new Nl({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Yh)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const s of this.attributes)s.valueExpression&&await $r(e,i,s.valueExpression),s.field&&e.add(s.field)}};w([T({type:[IC],json:{write:!0}})],Vr.prototype,"attributes",void 0),w([T({type:bu,json:{default:null,write:!0}})],Vr.prototype,"backgroundFillSymbol",void 0),w([T({type:Xt,json:{write:!0}})],Vr.prototype,"defaultColor",void 0),w([T({type:String,json:{write:!0}})],Vr.prototype,"defaultLabel",void 0),w([T({type:Number,range:{min:0,max:1},json:{write:!0}})],Vr.prototype,"holePercentage",void 0),w([T({type:Lh,json:{write:!0}})],Vr.prototype,"othersCategory",void 0),w([T({type:Gy,json:{write:!0}})],Vr.prototype,"legendOptions",void 0),w([T({type:As,json:{default:null,write:!0}})],Vr.prototype,"outline",void 0),w([T({type:Number,cast:ze,json:{write:!0}})],Vr.prototype,"size",void 0),w([Lt({pieChart:"pie-chart"})],Vr.prototype,"type",void 0),Vr=w([W("esri.renderers.PieChartRenderer")],Vr);const xot=Vr;var C9;let $h=C9=class extends m0(sa){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new C9({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ot(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};w([T({type:String,json:{write:!0}})],$h.prototype,"description",void 0),w([T({type:String,json:{write:!0}})],$h.prototype,"label",void 0),w([T(g0)],$h.prototype,"symbol",void 0),w([Lt({simple:"simple"})],$h.prototype,"type",void 0),$h=C9=w([W("esri.renderers.SimpleRenderer")],$h);const jC=$h,Sot=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function N9(t){return t instanceof Rt}function i8(t){return t instanceof Vt?Object.keys(t.items):N9(t)?Fi(t).keys():t?Object.keys(t):[]}function P1(t,e){return t instanceof Vt?t.items[e]:t[e]}function $ot(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function fd(t){return t?t.declaredClass:null}function DC(t,e){var A;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const s=i8(t),a=i8(e);if(s.length===0&&a.length===0)return;if(!s.length||!a.length||$ot(t,e))return{type:"complete",oldValue:t,newValue:e};const d=a.filter(P=>!s.includes(P)),y=s.filter(P=>!a.includes(P)),m=s.filter(P=>a.includes(P)&&P1(t,P)!==P1(e,P)).concat(d,y).sort(),_=fd(t);if(_&&Sot.includes(_)&&m.length)return{type:"complete",oldValue:t,newValue:e};let S;const I=N9(t)&&N9(e);for(const P of m){const L=P1(t,P),j=P1(e,P);let F;if((I||typeof L!="function"&&typeof j!="function")&&L!==j&&(L!=null||j!=null)){if(i&&i[P]&&typeof i[P]=="function")F=(A=i[P])==null?void 0:A.call(i,L,j);else if(L instanceof Date&&j instanceof Date){if(L.getTime()===j.getTime())continue;F={type:"complete",oldValue:L,newValue:j}}else F=typeof L=="object"&&typeof j=="object"&&fd(L)===fd(j)?DC(L,j):{type:"complete",oldValue:L,newValue:j};F!=null&&(S!=null?S.diff[P]=F:S={type:"partial",diff:{[P]:F}})}}return S}function Tot(t,e){if(t==null)return!1;const i=e.split(".");let s=t;for(const a of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const d=s.diff[a];if(!d)return!1;s=d}}return!0}function b1t(t,e){for(const i of e)if(Tot(t,i))return!0;return!1}function Mot(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&fd(t)!==fd(e)?{type:"complete",oldValue:t,newValue:e}:DC(t,e)}let uc=class extends _i(gt){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};w([T(jy)],uc.prototype,"value",void 0),w([T(jy)],uc.prototype,"value2",void 0),w([T(jy)],uc.prototype,"value3",void 0),uc=w([W("esri.renderers.support.UniqueValue")],uc);const Cc=uc;let Ha=class extends _i(gt){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(s=>new Cc({value:s})):i==="object"?e[0]instanceof Cc?e:e.map(s=>new Cc(s)):null}};w([T({type:String,json:{write:!0}})],Ha.prototype,"description",void 0),w([T({type:String,json:{write:!0}})],Ha.prototype,"label",void 0),w([T(g0)],Ha.prototype,"symbol",void 0),w([T({type:[Cc],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Cc({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const s of t){const a=[s.value,s.value2,s.value3].filter(Yh).map(d=>d.toString());i.push(a)}e.values=i}}}})],Ha.prototype,"values",void 0),w([Ne("values")],Ha.prototype,"castValues",null),Ha=w([W("esri.renderers.support.UniqueValueClass")],Ha);const FC=Ha;let Np=class extends _i(gt){constructor(e){super(e),this.heading=null,this.classes=null}};w([T({type:String,json:{write:!0}})],Np.prototype,"heading",void 0),w([T({type:[FC],json:{write:!0}})],Np.prototype,"classes",void 0),Np=w([W("esri.renderers.support.UniqueValueGroup")],Np);const L9=Np;var R9;let Th=R9=class extends gt{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new R9({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};w([T({type:String,json:{write:!0}})],Th.prototype,"description",void 0),w([T({type:String,json:{write:!0}})],Th.prototype,"label",void 0),w([T(g0)],Th.prototype,"symbol",void 0),w([T(jy)],Th.prototype,"value",void 0),Th=R9=w([W("esri.renderers.support.UniqueValueInfo")],Th);const yd=Th,Eot=()=>!!at("enable-feature:force-wosr"),Iot=()=>at.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),Aot=()=>at.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),kot=()=>at.add("enable-i3s-patching",!0,!0,!0),Oot=()=>at.add("enable-i3s-patching",!1,!0,!0),S1t=()=>!!at("enable-feature:SceneLayer-editing"),Pot=(t="i3s-patching")=>{switch(Oot(),Aot(),at.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":Iot();break;case"i3s-patching":kot()}};Pot("i3s-patching");let H2={};async function Cot(t,e){try{return{data:(await jot(t,e)).data,baseUrl:Ej(t),styleUrl:t}}catch(i){return on(i),null}}function Not(t,e,i){const s=e.portal!=null?e.portal:Lr.getDefault();let a;const d=`${s.url} - ${s.user&&s.user.username} - ${t}`;return H2[d]||(H2[d]=Lot(t,s,i).then(y=>(a=y,y.fetchData())).then(y=>({data:y,baseUrl:a.itemUrl??"",styleName:t}))),H2[d]}function Lot(t,e,i){return e.load(i).then(()=>{const s=new Jn({disableExtraQuery:!0,query:`owner:${r8} AND type:${s8} AND typekeywords:"${t}"`});return e.queryItems(s,i)}).then(({results:s})=>{var y;let a=null;const d=t.toLowerCase();if(s&&Array.isArray(s)){for(const m of s)if(((y=m.typeKeywords)==null?void 0:y.some(S=>S.toLowerCase()===d))&&m.type===s8&&m.owner===r8){a=m;break}}if(!a)throw new lt("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return a.load(i)})}function Rot(t,e,i){return t&&t.styleUrl!=null?Cot(t.styleUrl,i):t&&t.styleName!=null?Not(t.styleName,e,i):Promise.reject(new lt("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function $1t(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function T1t(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!Eot())for(const s of i){const a=t.formatInfos.find(d=>d.type===s);if(a)return a.href}return t.webRef}function jot(t,e){const i={responseType:"json",query:{f:"json"},...e};return ye(un(t),i)}const r8="esri_en",s8="Style",M1t="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Lp;const zC="esri.renderers.UniqueValueRenderer",xa=mt.getLogger(zC),n8="uvInfos-watcher",o8="uvGroups-watcher",Dot=",",Fot=ki(yd);function zot(t){const{field1:e,field2:i,field3:s,fieldDelimiter:a,uniqueValueInfos:d,valueExpression:y}=t,m=!(!e||!i);return[{classes:(d??[]).map(_=>{var J;const{symbol:S,label:I,value:A,description:P}=_,[L,j,F]=m?((J=A==null?void 0:A.toString())==null?void 0:J.split(a||""))||[]:[A],V=[];return(e||y)&&V.push(L),i&&V.push(j),s&&V.push(F),{symbol:S,label:I,values:[V],description:P}})}]}let Xe=Lp=class extends m0(sa){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let s=!1;const a={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let d=0;d<i.length;d++){const y=e.find(m=>m.value===i[d].value);y?Mot(y,i[d])?(a.changed.push({type:"complete",oldValue:y,newValue:i[d]}),s=!0):a.unchanged.push({oldValue:y,newValue:i[d]}):(a.added.push(i[d]),s=!0)}for(let d=0;d<e.length;d++)i.find(y=>y.value===e[d].value)||(a.removed.push(e[d]),s=!0);return s?a:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Kd(t)}writeField(t,e,i,s){typeof t=="string"?e[i]=t:s&&s.messages?s.messages.push(new lt("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):xa.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Lr.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const s=l0(e.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(t,e,i,s){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=lf(t.styleUrl,s))}set uniqueValueGroups(t){this.styleOrigin?xa.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?xa.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var s;if(this.styleOrigin)return void xa.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?Fot(t):new yd({value:t,symbol:OI(e)}),(s=this.uniqueValueInfos)==null||s.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void xa.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await au()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void xa.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const a=await au(),{arcadeUtils:d}=a;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:a}}const s=this._getUniqueValueInfo(t,i);return s&&s.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var s;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(s=this.uniqueValueInfos)==null?void 0:s.reduce((a,d)=>a+d.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new Lp({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ot(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ot(this.visualVariables),legendOptions:ot(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ot(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=ot(this.uniqueValueInfos),i=ot(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(ot(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),$r(t,e,this.valueExpression)];ts(t,e,this.field),ts(t,e,this.field2),ts(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Rot(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(s=>{const a=new wu({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:s.name});this.defaultSymbol||s.name!==t.data.defaultItem||(this.defaultSymbol=a,this._isDefaultSymbolDerived=!0);const d=new yd({value:s.name,symbol:a});e.push(d),this._valueInfoMap[s.name]=d}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Dot)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(n8);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(It(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(s,a)=>{s!==a&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,n8)}}_watchUniqueValueGroups(){this.removeHandles(o8);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(It(()=>({classes:i.classes}),(s,a)=>{s!==a&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const s of i.classes??[])e.push(It(()=>({symbol:s.symbol,values:s.values,label:s.label,description:s.description}),(a,d)=>{a!==d&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,o8)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:s,fieldDelimiter:a,uniqueValueGroups:d,valueExpression:y}=this;if(!e&&!y)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const m=!(!e||!i);for(const _ of d)for(const S of _.classes??[]){const{symbol:I,label:A,values:P,description:L}=S;for(const j of P??[]){const{value:F,value2:V,value3:J}=j,Q=[F];i&&Q.push(V),s&&Q.push(J);const Z=m?Q.join(a||""):Q[0];t.push(new yd({symbol:I,label:A,value:Z,description:L}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:s,fieldDelimiter:a,uniqueValueInfos:d}=this;if(!e&&!s||!d.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!e||!i),m=d.map(S=>{var J;const{symbol:I,label:A,value:P,description:L}=S,[j,F,V]=y?((J=P==null?void 0:P.toString())==null?void 0:J.split(a||""))||[]:[P];return new FC({symbol:I,label:A,description:L,values:[new Cc({value:j,value2:F,value3:V})]})}),_=[new L9({classes:m})];t&&Object.freeze(_),this._set("uniqueValueGroups",_),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:a,arcade:d}=e??{};let y=this._cache.compiledFunc;const m=d.arcadeUtils;if(!y){const S=m.createSyntaxTree(this.valueExpression);y=m.createFunction(S),this._cache.compiledFunc=y}const _=m.executeFunction(y,m.createExecContext(t,m.getViewInfo({viewingMode:i,scale:s,spatialReference:a})));return this._valueInfoMap[_+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let s;if(typeof e!="function"&&this.field2){const a=this.field2,d=this.field3,y=[];e&&y.push(i[e]),a&&y.push(i[a]),d&&y.push(i[d]),s=y.join(this.fieldDelimiter||"")}else typeof e=="function"?s=e(t):e&&(s=i[e]);return this._valueInfoMap[s+""]}static fromPortalStyle(t,e){const i=new Lp(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||Lr.getDefault());const s=i.populateFromStyle();return s.catch(a=>{xa.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",a)}),s}static fromStyleUrl(t,e){const i=new Lp(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const s=i.populateFromStyle();return s.catch(a=>{xa.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",a)}),s}};w([T({readOnly:!0})],Xe.prototype,"_cache",null),w([Lt({uniqueValue:"unique-value"})],Xe.prototype,"type",void 0),w([T(xC)],Xe.prototype,"backgroundFillSymbol",void 0),w([T({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Xe.prototype,"field",null),w([Ne("field")],Xe.prototype,"castField",null),w([At("field")],Xe.prototype,"writeField",null),w([T({type:String,value:null,json:{write:!0}})],Xe.prototype,"field2",null),w([T({type:String,value:null,json:{write:!0}})],Xe.prototype,"field3",null),w([T({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Xe.prototype,"orderByClassesEnabled",void 0),w([T({type:String,value:null,json:{write:!0}})],Xe.prototype,"valueExpression",null),w([T({type:String,json:{write:!0}})],Xe.prototype,"valueExpressionTitle",void 0),w([T({type:Pc,json:{write:!0}})],Xe.prototype,"legendOptions",void 0),w([T({type:String,json:{write:!0}})],Xe.prototype,"defaultLabel",void 0),w([T(Q8({...g0},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Xe.prototype,"defaultSymbol",null),w([T({type:String,value:null,json:{write:!0}})],Xe.prototype,"fieldDelimiter",null),w([T({type:Lr,readOnly:!0})],Xe.prototype,"portal",void 0),w([kt("portal",["styleName"])],Xe.prototype,"readPortal",null),w([T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Xe.prototype,"styleOrigin",void 0),w([kt("styleOrigin",["styleName","styleUrl"])],Xe.prototype,"readStyleOrigin",null),w([At("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Xe.prototype,"writeStyleOrigin",null),w([T({type:[L9],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||zot(e)).map(s=>L9.fromJSON(s,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Xe.prototype,"uniqueValueGroups",null),w([T({type:[yd],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Xe.prototype,"uniqueValueInfos",null),Xe=Lp=w([W(zC)],Xe);const VC=Xe,GC={key:"type",base:sa,typeMap:{heatmap:RC,simple:jC,"unique-value":VC,"class-breaks":$C,"dot-density":not,dictionary:rot,"pie-chart":xot},errorContext:"renderer"},Vot={key:"type",base:sa,typeMap:{simple:jC,"unique-value":VC,"class-breaks":$C,heatmap:RC},errorContext:"renderer"};function E1t(t,e){return Uot(t,null,e)}const Got=Yd({types:GC});function Uot(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new gn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Got(t,e,i):null}var j9;let Rp=j9=class extends gt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new j9({name:this.name,code:this.code})}};w([T({type:String,json:{write:!0}})],Rp.prototype,"name",void 0),w([T({type:[String,Number],json:{write:!0}})],Rp.prototype,"code",void 0),Rp=j9=w([W("esri.layers.support.CodedValue")],Rp);const qot=new Ie({inherited:"inherited",codedValue:"coded-value",range:"range"});let jp=class extends gt{constructor(e){super(e),this.name=null,this.type=null}};w([T({type:String,json:{write:!0}})],jp.prototype,"name",void 0),w([Lt(qot)],jp.prototype,"type",void 0),jp=w([W("esri.layers.support.Domain")],jp);const fv=jp;var D9;let Dp=D9=class extends fv{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(s=>(String(s.code)===i&&(e=s.name),!!e))}return e}clone(){return new D9({codedValues:ot(this.codedValues),name:this.name})}};w([T({type:[Rp],json:{write:!0}})],Dp.prototype,"codedValues",void 0),w([Lt({codedValue:"coded-value"})],Dp.prototype,"type",void 0),Dp=D9=w([W("esri.layers.support.CodedValueDomain")],Dp);const UC=Dp;var F9;let Uy=F9=class extends fv{constructor(t){super(t),this.type="inherited"}clone(){return new F9}};w([Lt({inherited:"inherited"})],Uy.prototype,"type",void 0),Uy=F9=w([W("esri.layers.support.InheritedDomain")],Uy);const qC=Uy;var z9;let cc=z9=class extends fv{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new z9({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};w([T({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],cc.prototype,"maxValue",void 0),w([T({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],cc.prototype,"minValue",void 0),w([Lt({range:"range"})],cc.prototype,"type",void 0),cc=z9=w([W("esri.layers.support.RangeDomain")],cc);const BC=cc,Bot={key:"type",base:fv,typeMap:{range:BC,"coded-value":UC,inherited:qC}};function HC(t){if(!t||!t.type)return null;switch(t.type){case"range":return BC.fromJSON(t);case"codedValue":return UC.fromJSON(t);case"inherited":return qC.fromJSON(t)}return null}const Hot=new Ie({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var V9;const Wot=new Ie({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let lr=V9=class extends gt{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?Wot.fromJSON(i.fieldValueType):null}clone(){return new V9({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};w([T({type:String,json:{write:!0}})],lr.prototype,"alias",void 0),w([T({type:[String,Number],json:{write:{allowNull:!0}}})],lr.prototype,"defaultValue",void 0),w([T()],lr.prototype,"description",void 0),w([kt("description")],lr.prototype,"readDescription",null),w([T({types:Bot,json:{read:{reader:HC},write:!0}})],lr.prototype,"domain",void 0),w([T({type:Boolean,json:{write:!0}})],lr.prototype,"editable",void 0),w([T({type:Ee,json:{write:!0}})],lr.prototype,"length",void 0),w([T({type:String,json:{write:!0}})],lr.prototype,"name",void 0),w([T({type:Boolean,json:{write:!0}})],lr.prototype,"nullable",void 0),w([Lt(Hot)],lr.prototype,"type",void 0),w([T()],lr.prototype,"valueType",void 0),w([kt("valueType",["description"])],lr.prototype,"readValueType",null),w([T({type:Boolean,json:{read:!1}})],lr.prototype,"visible",void 0),lr=V9=w([W("esri.layers.support.Field")],lr);const M4=lr;var G9;let Do=G9=class extends gt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new G9({mapLayerId:t,gdbVersion:e})}};w([Lt({mapLayer:"map-layer"})],Do.prototype,"type",void 0),w([T({type:Ee,json:{write:!0}})],Do.prototype,"mapLayerId",void 0),w([T({type:String,json:{write:!0}})],Do.prototype,"gdbVersion",void 0),Do=G9=w([W("esri.layers.support.source.MapLayerSource")],Do);var U9;let Oo=U9=class extends gt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:s,geometryType:a}=this,d={workspaceId:t,query:e,oidFields:i,spatialReference:(s==null?void 0:s.clone())??void 0,geometryType:a};return new U9(d)}};w([Lt({queryTable:"query-table"})],Oo.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],Oo.prototype,"workspaceId",void 0),w([T({type:String,json:{write:!0}})],Oo.prototype,"query",void 0),w([T({type:String,json:{write:!0}})],Oo.prototype,"oidFields",void 0),w([T({type:te,json:{write:!0}})],Oo.prototype,"spatialReference",void 0),w([Lt($m)],Oo.prototype,"geometryType",void 0),Oo=U9=w([W("esri.layers.support.source.QueryTableDataSource")],Oo);var q9;let pc=q9=class extends gt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new q9({workspaceId:t,dataSourceName:e})}};w([Lt({raster:"raster"})],pc.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],pc.prototype,"dataSourceName",void 0),w([T({type:String,json:{write:!0}})],pc.prototype,"workspaceId",void 0),pc=q9=w([W("esri.layers.support.source.RasterDataSource")],pc);var B9;let Mh=B9=class extends gt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new B9({workspaceId:t,gdbVersion:e,dataSourceName:i})}};w([Lt({table:"table"})],Mh.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],Mh.prototype,"workspaceId",void 0),w([T({type:String,json:{write:!0}})],Mh.prototype,"gdbVersion",void 0),w([T({type:String,json:{write:!0}})],Mh.prototype,"dataSourceName",void 0),Mh=B9=w([W("esri.layers.support.source.TableDataSource")],Mh);var H9,W9;const Jot=dr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Gr=H9=class extends gt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return a8()(t,e,i)}castLeftTableSource(t){return Ho(J9(),t)}readRightTableSource(t,e,i){return a8()(t,e,i)}castRightTableSource(t){return Ho(J9(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:s,joinType:a}=this,d={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(s==null?void 0:s.clone())??void 0,joinType:a};return new H9(d)}};w([Lt({joinTable:"join-table"})],Gr.prototype,"type",void 0),w([T({type:String,json:{write:!0}})],Gr.prototype,"leftTableKey",void 0),w([T({type:String,json:{write:!0}})],Gr.prototype,"rightTableKey",void 0),w([T({json:{write:!0}})],Gr.prototype,"leftTableSource",void 0),w([kt("leftTableSource")],Gr.prototype,"readLeftTableSource",null),w([Ne("leftTableSource")],Gr.prototype,"castLeftTableSource",null),w([T({json:{write:!0}})],Gr.prototype,"rightTableSource",void 0),w([kt("rightTableSource")],Gr.prototype,"readRightTableSource",null),w([Ne("rightTableSource")],Gr.prototype,"castRightTableSource",null),w([Lt(Jot)],Gr.prototype,"joinType",void 0),Gr=H9=w([W("esri.layers.support.source.JoinTableDataSource")],Gr);let W2=null;function a8(){return W2||(W2=Yd({types:J9()})),W2}let J2=null;function J9(){return J2||(J2={key:"type",base:null,typeMap:{"data-layer":Jr,"map-layer":Do}}),J2}const Kot={key:"type",base:null,typeMap:{"join-table":Gr,"query-table":Oo,raster:pc,table:Mh}};let Jr=W9=class extends gt{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new W9({fields:t,dataSource:e})}};w([Lt({dataLayer:"data-layer"})],Jr.prototype,"type",void 0),w([T({type:[M4],json:{write:!0}})],Jr.prototype,"fields",void 0),w([T({types:Kot,json:{write:!0}})],Jr.prototype,"dataSource",void 0),Jr=W9=w([W("esri.layers.support.source.DataLayerSource")],Jr),Jr.from=ki(Jr);function WC(t){const e={};for(const i in t){if(i==="declaredClass")continue;const s=t[i];if(s!=null&&typeof s!="function")if(Array.isArray(s)){e[i]=[];for(let a=0;a<s.length;a++)e[i][a]=WC(s[a])}else typeof s=="object"?s.toJSON&&(e[i]=JSON.stringify(s)):e[i]=s}return e}var rl;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(rl||(rl={}));const l8=4294967296,Yot=new TextDecoder("utf-8"),Zot=at("safari")||at("ios")?6:at("ff")?12:32;let K9=class qy{constructor(e,i,s=0,a=e?e.byteLength:0){this._tag=0,this._dataType=rl.unknown,this._init(e,i,s,a)}_init(e,i,s,a){this._data=e,this._dataView=i,this._pos=s,this._end=a}asUnsafe(){return this}clone(){return new qy(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,s=e.getUint32(i,!0)+e.getUint32(i+4,!0)*l8;return this._skip(8),s}getSFixed64(){const e=this._dataView,i=this._pos,s=e.getUint32(i,!0)+e.getInt32(i+4,!0)*l8;return this._skip(8),s}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,s=this._toString(this._data,i,i+e);return this._skip(e),s}getBytes(){const e=this._getLength(),i=this._pos,s=this._toBytes(this._data,i,i+e);return this._skip(e),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,s,a){const d=this.getMessage(),y=e(d,i,s,a);return d.release(),y}processMessage(e){const i=this.getMessage(),s=e(i);return i.release(),s}getMessage(){const e=this._getLength(),i=qy.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){qy.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case rl.varint:this._decodeVarint();break;case rl.fixed64:this._skip(8);break;case rl.delimited:this._skip(this._getLength());break;case rl.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,s=0,a=0;if(this._end-i>=10)do{if(a=e[i++],s|=127&a,(128&a)==0||(a=e[i++],s|=(127&a)<<7,(128&a)==0)||(a=e[i++],s|=(127&a)<<14,(128&a)==0)||(a=e[i++],s|=(127&a)<<21,(128&a)==0)||(a=e[i++],s+=268435456*(127&a),(128&a)==0)||(a=e[i++],s+=34359738368*(127&a),(128&a)==0)||(a=e[i++],s+=4398046511104*(127&a),(128&a)==0)||(a=e[i++],s+=562949953421312*(127&a),(128&a)==0)||(a=e[i++],s+=72057594037927940*(127&a),(128&a)==0)||(a=e[i++],s+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;i!==this._end&&(a=e[i],(128&a)!=0);)++i,s+=(127&a)*d,d*=128;if(i===this._end)throw new Error("Varint overrun!");++i,s+=a*d}return this._pos=i,s}_decodeSVarint(){const e=this._data;let i=this._pos,s=0,a=0;const d=1&e[i];if(this._end-i>=10)do{if(a=e[i++],s|=127&a,(128&a)==0||(a=e[i++],s|=(127&a)<<7,(128&a)==0)||(a=e[i++],s|=(127&a)<<14,(128&a)==0)||(a=e[i++],s|=(127&a)<<21,(128&a)==0)||(a=e[i++],s+=268435456*(127&a),(128&a)==0)||(a=e[i++],s+=34359738368*(127&a),(128&a)==0)||(a=e[i++],s+=4398046511104*(127&a),(128&a)==0)||(a=e[i++],s+=562949953421312*(127&a),(128&a)==0)||(a=e[i++],s+=72057594037927940*(127&a),(128&a)==0)||(a=e[i++],s+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let y=1;for(;i!==this._end&&(a=e[i],(128&a)!=0);)++i,s+=(127&a)*y,y*=128;if(i===this._end)throw new Error("Varint overrun!");++i,s+=a*y}return this._pos=i,d?-(s+1)/2:s/2}_getLength(){if(this._dataType!==rl.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,s){if((s=Math.min(this._end,s))-i>Zot){const y=e.subarray(i,s);return Yot.decode(y)}let a="",d="";for(let y=i;y<s;++y){const m=e[y];128&m?d+="%"+m.toString(16):(a+=decodeURIComponent(d)+String.fromCharCode(m),d="")}return d.length&&(a+=decodeURIComponent(d)),a}_toBytes(e,i,s){return s=Math.min(this._end,s),new Uint8Array(e.buffer,i,s-i)}};K9.pool=new Al(K9,void 0,t=>{t._data=null,t._dataView=null});let wn=class By{constructor(e=[],i=[],s=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=s}static fromRect(e){const[i,s,a,d]=e,y=a-i,m=d-s;return new By([5],[i,s,y,0,0,m,-y,0,0,-m])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const a=this.lengths[s];for(let d=0;d<a;d++)e(this.coords[2*(d+i)],this.coords[2*(d+i)+1]);i+=a}}clone(e){return e?(e.set(this.coords),new By(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new By(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Il=class JC{constructor(e=null,i={},s,a){this.geometry=e,this.attributes=i,this.centroid=s,this.objectId=a,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new JC(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function Xot(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let A1t=class extends Il{},KC=class YC{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new YC;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const ZC=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let O1t=class{constructor(e){this._options=e,this.geometryTypes=ZC,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new KC}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Oi(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=fm(this._options.sourceSpatialReference)/fm(e.spatialReference);if(i!==1)for(const s of e.features){if(!Xot(s))continue;const a=s.geometry.coords;for(let d=2;d<a.length;d+=3)a[d]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Il}createSpatialReference(){return{wkid:0}}createGeometry(){return new wn}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,s)=>i+s,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new wn}};const h8=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],u8=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],c8=["upperLeft","lowerLeft"];function p8(t){return t>=h8.length?null:h8[t]}function Qot(t){return t>=u8.length?null:u8[t]}function d8(t){return t>=c8.length?null:c8[t]}function f8(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function tat(t,e,i){const a=t.asUnsafe(),d=e.createPointGeometry(i);for(;a.next();)switch(a.tag()){case 3:{const y=a.getUInt32(),m=a.pos()+y;let _=0;for(;a.pos()<m;)e.addCoordinatePoint(d,a.getSInt64(),_++);break}default:a.skip()}return d}function eat(t,e,i){const d=t.asUnsafe(),y=e.createGeometry(i),m=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;d.next();)switch(d.tag()){case 2:{const _=d.getUInt32(),S=d.pos()+_;let I=0;for(;d.pos()<S;)e.addLength(y,d.getUInt32(),I++);break}case 3:{const _=d.getUInt32(),S=d.pos()+_;let I=0;for(e.allocateCoordinates(y);d.pos()<S;)e.addCoordinate(y,d.getSInt64(),I),I++,I===m&&(I=0);break}default:d.skip()}return y}function iat(t){const a=t.asUnsafe(),d=new wn;let y="esriGeometryPoint";for(;a.next();)switch(a.tag()){case 2:{const m=a.getUInt32(),_=a.pos()+m;for(;a.pos()<_;)d.lengths.push(a.getUInt32());break}case 3:{const m=a.getUInt32(),_=a.pos()+m;for(;a.pos()<_;)d.coords.push(a.getSInt64());break}case 1:y=ZC[a.getEnum()];break;default:a.skip()}return{queryGeometry:d,queryGeometryType:y}}function rat(t){const I=t.asUnsafe();for(;I.next();)switch(I.tag()){case 1:return I.getString();case 2:return I.getFloat();case 3:return I.getDouble();case 4:return I.getSInt32();case 5:return I.getUInt32();case 6:return I.getInt64();case 7:return I.getUInt64();case 8:return I.getSInt64();case 9:return I.getBool();default:return I.skip(),null}return null}function sat(t){const m=t.asUnsafe(),_={type:p8(0)};for(;m.next();)switch(m.tag()){case 1:_.name=m.getString();break;case 2:_.type=p8(m.getEnum());break;case 3:_.alias=m.getString();break;case 4:_.sqlType=Qot(m.getEnum());break;case 5:m.skip();break;case 6:_.defaultValue=m.getString();break;default:m.skip()}return _}function nat(t){const s={},a=t.asUnsafe();for(;a.next();)switch(a.tag()){case 1:s.name=a.getString();break;case 2:s.isSystemMaintained=a.getBool();break;default:a.skip()}return s}function oat(t,e,i,s){const m=e.createFeature(i);let _=0;for(;t.next();)switch(t.tag()){case 1:{const S=s[_++].name;m.attributes[S]=t.processMessage(rat);break}case 2:m.geometry=t.processMessageWithArgs(eat,e,i);break;case 4:m.centroid=t.processMessageWithArgs(tat,e,i);break;default:t.skip()}return m}function aat(t){const d=[1,1,1,1],y=t.asUnsafe();for(;y.next();)switch(y.tag()){case 1:d[0]=y.getDouble();break;case 2:d[1]=y.getDouble();break;case 4:d[2]=y.getDouble();break;case 3:d[3]=y.getDouble();break;default:y.skip()}return d}function lat(t){const d=[0,0,0,0],y=t.asUnsafe();for(;y.next();)switch(y.tag()){case 1:d[0]=y.getDouble();break;case 2:d[1]=y.getDouble();break;case 4:d[2]=y.getDouble();break;case 3:d[3]=y.getDouble();break;default:y.skip()}return d}function hat(t){const a={originPosition:d8(0)},d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:a.originPosition=d8(d.getEnum());break;case 2:a.scale=d.processMessage(aat);break;case 3:a.translate=d.processMessage(lat);break;default:d.skip()}return a}function uat(t){const a={},d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:a.shapeAreaFieldName=d.getString();break;case 2:a.shapeLengthFieldName=d.getString();break;case 3:a.units=d.getString();break;default:d.skip()}return a}function cat(t,e){const m=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:m.wkid=t.getUInt32();break;case 5:m.wkt=t.getString();break;case 2:m.latestWkid=t.getUInt32();break;case 3:m.vcsWkid=t.getUInt32();break;case 4:m.latestVcsWkid=t.getUInt32();break;default:t.skip()}return m}function pat(t,e){const F=e.createFeatureResult(),V=t.asUnsafe();F.geometryType=f8(e,0);let J=!1;for(;V.next();)switch(V.tag()){case 1:F.objectIdFieldName=V.getString();break;case 3:F.globalIdFieldName=V.getString();break;case 4:F.geohashFieldName=V.getString();break;case 5:F.geometryProperties=V.processMessage(uat);break;case 7:F.geometryType=f8(e,V.getEnum());break;case 8:F.spatialReference=V.processMessageWithArgs(cat,e);break;case 10:F.hasZ=V.getBool();break;case 11:F.hasM=V.getBool();break;case 12:F.transform=V.processMessage(hat);break;case 9:{const Q=V.getBool();F.exceededTransferLimit=Q;break}case 13:e.addField(F,V.processMessage(sat));break;case 15:J||(e.prepareFeatures(F),J=!0),e.addFeature(F,V.processMessageWithArgs(oat,e,F,F.fields));break;case 2:F.uniqueIdField=V.processMessage(nat);break;default:V.skip()}return e.finishFeatureResult(F),F}function dat(t,e){const a={};let d=null;for(;t.next();)switch(t.tag()){case 4:d=t.processMessageWithArgs(iat);break;case 1:a.featureResult=t.processMessageWithArgs(pat,e);break;default:t.skip()}return d!=null&&a.featureResult&&e.addQueryGeometry(a,d),a}function fat(t,e){try{const s=new K9(new Uint8Array(t),new DataView(t)),a={};for(;s.next();)s.tag()===2?a.queryResult=s.processMessageWithArgs(dat,e):s.skip();return a}catch(i){throw new lt("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function yat(t,e){const i=fat(t,e),s=i.queryResult.featureResult,a=i.queryResult.queryGeometry,d=i.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const y=s.objectIdFieldName;for(const m of s.features)m.attributes&&(m.objectId=m.attributes[y])}return s&&(s.queryGeometry=a,s.queryGeometryType=d),s}function mat(t,e,i){if(!i||!i.features||!i.hasZ)return;const s=N_(i.geometryType,e,t.outSpatialReference);if(s!=null)for(const a of i.features)s(a.geometry)}const y8="Layer does not support extent calculation.";function gat(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function vat(t,e){const i=t.geometry,s=t.toJSON();delete s.compactGeometryEnabled,delete s.defaultSpatialReferenceEnabled;const a=s;let d,y,m;if(i!=null&&(y=i.spatialReference,m=i.spatialReference.wkid||JSON.stringify(i.spatialReference),a.geometryType=Qd(i),a.geometry=gat(i,t.compactGeometryEnabled),a.inSR=m),s.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=s.groupByFieldsForStatistics.join(",")),s.objectIds&&(a.objectIds=s.objectIds.join(",")),s.orderByFields&&(a.orderByFields=s.orderByFields.join(",")),!s.outFields||!s.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete a.outFields:s.outFields.includes("*")?a.outFields="*":a.outFields=s.outFields.join(","),s.outSR?(a.outSR=s.outSR.wkid||JSON.stringify(s.outSR),d=t.outSpatialReference):i&&(s.returnGeometry||s.returnCentroid)&&(a.outSR=a.inSR,d=y),s.returnGeometry&&delete s.returnGeometry,s.outStatistics&&(a.outStatistics=JSON.stringify(s.outStatistics)),s.fullText&&(a.fullText=JSON.stringify(s.fullText)),s.pixelSize&&(a.pixelSize=JSON.stringify(s.pixelSize)),s.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&y!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&y.equals(t.quantizationParameters.extent.spatialReference)&&delete s.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(s.quantizationParameters)),s.parameterValues&&(a.parameterValues=JSON.stringify(s.parameterValues)),s.rangeValues&&(a.rangeValues=JSON.stringify(s.rangeValues)),s.dynamicDataSource&&(a.layer=JSON.stringify({source:s.dynamicDataSource}),delete s.dynamicDataSource),s.timeExtent){const _=s.timeExtent,{start:S,end:I}=_;S==null&&I==null||(a.time=S===I?S:`${S??"null"},${I??"null"}`),delete s.timeExtent}return t.defaultSpatialReferenceEnabled&&y!=null&&d!=null&&y.equals(d)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function bat(t,e,i,s){const a=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await xf(t,e,"json",s);return mat(e,i,a.data),a}async function wat(t,e,i,s){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const a=await _at(t,e,s),d=a;return d.data=yat(a.data,i),d}function _at(t,e,i){return xf(t,e,"pbf",i)}function xat(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):xf(t,e,"json",i,{returnIdsOnly:!0})}function Sat(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):xf(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function $at(t,e,i){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const s=await xf(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),a=s.data;if(a.hasOwnProperty("extent"))return s;if(a.features)throw new Error(y8);if(a.hasOwnProperty("count"))throw new Error(y8);return s}async function xf(t,e,i,s={},a={}){const d=typeof t=="string"?er(t):t,y=e.geometry?[e.geometry]:[];s.responseType=i==="pbf"?"array-buffer":"json";const m=await c4(y,null,s),_=m&&m[0];_!=null&&((e=e.clone()).geometry=_);const S=WC({...d.query,f:i,...a,...vat(e,a)});return ye(tu(d.path,Tat(e,a)?"query3d":"query"),{...s,query:{...S,...s.query}})}function Tat(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}let Eh=class extends _i(gt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};w([T({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Eh.prototype,"onFields",void 0),w([T({type:String,json:{write:!0}})],Eh.prototype,"operator",void 0),w([T({type:String,json:{write:!0}})],Eh.prototype,"searchTerm",void 0),w([T({type:String,json:{write:!0}})],Eh.prototype,"searchType",void 0),Eh=w([W("esri.rest.support.FullTextSearch")],Eh);const Mat=Eh;var Y9;const m8=new Ie({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Qs=Y9=class extends gt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=ot(t))}clone(){return new Y9({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ot(this.statisticParameters)})}};w([T({type:Number,json:{write:!0}})],Qs.prototype,"maxPointCount",void 0),w([T({type:Number,json:{write:!0}})],Qs.prototype,"maxRecordCount",void 0),w([T({type:Number,json:{write:!0}})],Qs.prototype,"maxVertexCount",void 0),w([T({type:String,json:{write:!0}})],Qs.prototype,"onStatisticField",void 0),w([T({type:String,json:{write:!0}})],Qs.prototype,"outStatisticFieldName",void 0),w([T({type:String,json:{read:{source:"statisticType",reader:m8.read},write:{target:"statisticType",writer:m8.write}}})],Qs.prototype,"statisticType",void 0),w([T({type:Object})],Qs.prototype,"statisticParameters",void 0),w([At("statisticParameters")],Qs.prototype,"writeStatisticParameters",null),Qs=Y9=w([W("esri.rest.support.StatisticDefinition")],Qs);const Eat=Qs;var Nc;const Iat=new Ie({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Aat=new Ie({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ft=Nc=class extends gt{static from(t){return Xh(Nc,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const s in t){const a=t[s];Array.isArray(a)?i[s]=a.map(d=>d instanceof Date?d.getTime():d):a instanceof Date?i[s]=a.getTime():i[s]=a}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new Nc(ot({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ft.MAX_MAX_RECORD_COUNT_FACTOR=5,w([T({json:{write:!0}})],Ft.prototype,"aggregateIds",void 0),w([T({type:Boolean,json:{write:!0}})],Ft.prototype,"cacheHint",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"compactGeometryEnabled",void 0),w([T({json:{write:!0}})],Ft.prototype,"datumTransformation",void 0),w([Ne("datumTransformation")],Ft.prototype,"castDatumTransformation",null),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"defaultSpatialReferenceEnabled",void 0),w([T({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ft.prototype,"distance",void 0),w([T({type:Jr,json:{write:!0}})],Ft.prototype,"dynamicDataSource",void 0),w([T({type:String,json:{write:!0}})],Ft.prototype,"formatOf3DObjects",void 0),w([T({type:[Mat],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ft.prototype,"fullText",void 0),w([T({type:String,json:{write:!0}})],Ft.prototype,"gdbVersion",void 0),w([T({types:e0,json:{read:xl,write:!0}})],Ft.prototype,"geometry",void 0),w([T({type:Number,json:{write:!0}})],Ft.prototype,"geometryPrecision",void 0),w([T({type:[String],json:{write:!0}})],Ft.prototype,"groupByFieldsForStatistics",void 0),w([T({type:String,json:{write:!0}})],Ft.prototype,"having",void 0),w([T({type:Date})],Ft.prototype,"historicMoment",void 0),w([At("historicMoment")],Ft.prototype,"writeHistoricMoment",null),w([T({type:Number,json:{write:!0}})],Ft.prototype,"maxAllowableOffset",void 0),w([T({type:Number,cast:t=>t<1?1:t>Nc.MAX_MAX_RECORD_COUNT_FACTOR?Nc.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ft.prototype,"maxRecordCountFactor",void 0),w([T({type:["xyFootprint"],json:{write:!0}})],Ft.prototype,"multipatchOption",void 0),w([T({type:Number,json:{read:{source:"resultRecordCount"}}})],Ft.prototype,"num",void 0),w([T({json:{write:!0}})],Ft.prototype,"objectIds",void 0),w([T({type:[String],json:{write:!0}})],Ft.prototype,"orderByFields",void 0),w([T({type:[String],json:{write:!0}})],Ft.prototype,"outFields",void 0),w([T({type:te,json:{name:"outSR",write:!0}})],Ft.prototype,"outSpatialReference",void 0),w([T({type:[Eat],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ft.prototype,"outStatistics",void 0),w([T({json:{write:!0}})],Ft.prototype,"parameterValues",void 0),w([At("parameterValues")],Ft.prototype,"writeParameterValues",null),w([T({type:Yt,json:{write:!0}})],Ft.prototype,"pixelSize",void 0),w([T({type:Kk,json:{write:!0}})],Ft.prototype,"quantizationParameters",void 0),w([T({type:[Object],json:{write:!0}})],Ft.prototype,"rangeValues",void 0),w([T({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ft.prototype,"relationParameter",void 0),w([T({type:String,json:{write:!0}})],Ft.prototype,"resultType",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"returnCentroid",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"returnDistinctValues",void 0),w([T({type:Boolean,json:{default:!0,write:!0}})],Ft.prototype,"returnExceededLimitFeatures",void 0),w([T({type:Boolean,json:{write:!0}})],Ft.prototype,"returnGeometry",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"returnQueryGeometry",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"returnM",void 0),w([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ft.prototype,"returnZ",void 0),w([T({type:te,json:{write:!0}})],Ft.prototype,"sourceSpatialReference",void 0),w([Lt(Iat,{ignoreUnknown:!1,name:"spatialRel"})],Ft.prototype,"spatialRelationship",void 0),w([T({type:Number,json:{read:{source:"resultOffset"}}})],Ft.prototype,"start",void 0),w([At("start"),At("num")],Ft.prototype,"writeStart",null),w([T({type:String,json:{write:!0}})],Ft.prototype,"sqlFormat",void 0),w([T({type:String,json:{write:!0}})],Ft.prototype,"text",void 0),w([T({type:oo,json:{write:!0}})],Ft.prototype,"timeExtent",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],Ft.prototype,"timeReferenceUnknownClient",void 0),w([Lt(Aat,{ignoreUnknown:!1}),T({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ft.prototype,"units",void 0),w([T({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ft.prototype,"where",void 0),w([At("where")],Ft.prototype,"writeWhere",null),Ft=Nc=w([W("esri.rest.support.Query")],Ft);const Tu=Ft;async function kat(t,e,i){const s=Dl(t);return Sat(s,Tu.from(e),{...i}).then(a=>a.data.count)}async function Oat(t,e,i){const s=Dl(t);return $at(s,Tu.from(e),{...i}).then(a=>({count:a.data.count,extent:Ae.fromJSON(a.data.extent)}))}async function Pat(t,e,i){const s=Dl(t);return xat(s,Tu.from(e),{...i}).then(a=>a.data.objectIds)}var Z9;const X9=new Ie({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ui=Z9=class extends gt{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=te.fromJSON(e.spatialReference),s=[];for(let a=0;a<t.length;a++){const d=t[a],y=io.fromJSON(d),m=d.geometry&&d.geometry.spatialReference;y.geometry==null||m||(y.geometry.spatialReference=i);const _=d.aggregateGeometries,S=y.aggregateGeometries;if(_&&S!=null)for(const I in S){const A=S[I],P=_[I],L=P==null?void 0:P.spatialReference;A==null||L||(A.spatialReference=i)}s.push(y)}return s}writeGeometryType(t,e,i,s){if(t)return void X9.write(t,e,i,s);const{features:a}=this;if(a){for(const d of a)if(d&&d.geometry!=null)return void X9.write(d.geometry.type,e,i,s)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,s=xl(t);return s&&!i&&e.spatialReference&&(s.spatialReference=te.fromJSON(e.spatialReference)),s}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&s.geometry!=null&&s.geometry.spatialReference)return void(e.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new Z9(this.cloneProperties())}cloneProperties(){return ot({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const s=e.features[i];if(s.geometry){const a=t&&t[i];s.geometry=a&&a.toJSON()||s.geometry}}return e}quantize(t){const{scale:[e,i],translate:[s,a]}=t,d=S=>Math.round((S-s)/e),y=S=>Math.round((a-S)/i),m=this.features,_=this._getQuantizationFunction(this.geometryType,d,y);for(let S=0,I=m.length;S<I;S++)_!=null&&_(m[S].geometry)||(m.splice(S,1),S--,I--);return this.transform=t,this}unquantize(){var P,L;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[s,a],scale:[d,y]}=i,m=j=>j*d+s,_=j=>a-j*y;let S=null,I=null;if(this.hasZ&&((P=i==null?void 0:i.scale)==null?void 0:P[2])!=null){const{translate:[,,j],scale:[,,F]}=i;S=V=>V*F+j}if(this.hasM&&((L=i==null?void 0:i.scale)==null?void 0:L[3])!=null){const{translate:[,,,j],scale:[,,,F]}=i;I=V=>V==null?V:V*F+j}const A=this._getHydrationFunction(t,m,_,S,I);for(const{geometry:j}of e)j!=null&&A&&A(j);return this.transform=null,this}_quantizePoints(t,e,i){let s,a;const d=[];for(let y=0,m=t.length;y<m;y++){const _=t[y];if(y>0){const S=e(_[0]),I=i(_[1]);S===s&&I===a||(d.push([S-s,I-a]),s=S,a=I)}else s=e(_[0]),a=i(_[1]),d.push([s,a])}return d.length>0?d:null}_getQuantizationFunction(t,e,i){return t==="point"?s=>(s.x=e(s.x),s.y=i(s.y),s):t==="polyline"||t==="polygon"?s=>{const a=Bh(s)?s.rings:s.paths,d=[];for(let y=0,m=a.length;y<m;y++){const _=a[y],S=this._quantizePoints(_,e,i);S&&d.push(S)}return d.length>0?(Bh(s)?s.rings=d:s.paths=d,s):null}:t==="multipoint"?s=>{const a=this._quantizePoints(s.points,e,i);return a&&a.length>0?(s.points=a,s):null}:t==="extent"?s=>s:null}_getHydrationFunction(t,e,i,s,a){return t==="point"?d=>{d.x=e(d.x),d.y=i(d.y),s&&(d.z=s(d.z))}:t==="polyline"||t==="polygon"?d=>{const y=Bh(d)?d.rings:d.paths;let m,_;for(let S=0,I=y.length;S<I;S++){const A=y[S];for(let P=0,L=A.length;P<L;P++){const j=A[P];P>0?(m+=j[0],_+=j[1]):(m=j[0],_=j[1]),j[0]=e(m),j[1]=i(_)}}if(s&&a)for(let S=0,I=y.length;S<I;S++){const A=y[S];for(let P=0,L=A.length;P<L;P++){const j=A[P];j[2]=s(j[2]),j[3]=a(j[3])}}else if(s)for(let S=0,I=y.length;S<I;S++){const A=y[S];for(let P=0,L=A.length;P<L;P++){const j=A[P];j[2]=s(j[2])}}else if(a)for(let S=0,I=y.length;S<I;S++){const A=y[S];for(let P=0,L=A.length;P<L;P++){const j=A[P];j[2]=a(j[2])}}}:t==="extent"?d=>{d.xmin=e(d.xmin),d.ymin=i(d.ymin),d.xmax=e(d.xmax),d.ymax=i(d.ymax),s&&d.zmax!=null&&d.zmin!=null&&(d.zmax=s(d.zmax),d.zmin=s(d.zmin)),a&&d.mmax!=null&&d.mmin!=null&&(d.mmax=a(d.mmax),d.mmin=a(d.mmin))}:t==="multipoint"?d=>{const y=d.points;let m,_;for(let S=0,I=y.length;S<I;S++){const A=y[S];S>0?(m+=A[0],_+=A[1]):(m=A[0],_=A[1]),A[0]=e(m),A[1]=i(_)}if(s&&a)for(let S=0,I=y.length;S<I;S++){const A=y[S];A[2]=s(A[2]),A[3]=a(A[3])}else if(s)for(let S=0,I=y.length;S<I;S++){const A=y[S];A[2]=s(A[2])}else if(a)for(let S=0,I=y.length;S<I;S++){const A=y[S];A[2]=a(A[2])}}:null}};w([T({type:String,json:{write:!0}})],Ui.prototype,"displayFieldName",void 0),w([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ui.prototype,"exceededTransferLimit",void 0),w([T({type:[io],json:{write:!0}})],Ui.prototype,"features",void 0),w([kt("features")],Ui.prototype,"readFeatures",null),w([T({type:[M4],json:{write:!0}})],Ui.prototype,"fields",void 0),w([T({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:X9.read}}})],Ui.prototype,"geometryType",void 0),w([At("geometryType")],Ui.prototype,"writeGeometryType",null),w([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ui.prototype,"hasM",void 0),w([T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ui.prototype,"hasZ",void 0),w([T({types:e0,json:{write:!0}})],Ui.prototype,"queryGeometry",void 0),w([kt("queryGeometry")],Ui.prototype,"readQueryGeometry",null),w([T({type:te,json:{write:!0}})],Ui.prototype,"spatialReference",void 0),w([At("spatialReference")],Ui.prototype,"writeSpatialReference",null),w([T({json:{write:!0}})],Ui.prototype,"transform",void 0),Ui=Z9=w([W("esri.rest.support.FeatureSet")],Ui),Ui.prototype.toJSON.isDefaultToJSON=!0;const XC=Ui;async function N1t(t,e,i){const s=await QC(t,e,i);return XC.fromJSON(s)}async function QC(t,e,i){const s=Dl(t),a={...i},d=Tu.from(e),{data:y}=await bat(s,d,d.sourceSpatialReference,a);return y}function tr(t,e){return t?e?4:3:e?3:2}const b0=mt.getLogger("esri.layers.graphics.featureConversionUtils"),tN={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Cat=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d},g8=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d,t[i+2]=e[s+2]},Nat=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d,t[i+2]=e[s+3]},Lat=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d,t[i+2]=e[s+2],t[i+3]=e[s+3]};function E4(t,e,i,s){if(t){if(i)return e&&s?Lat:g8;if(e&&s)return Nat}else if(e&&s)return g8;return Cat}function K2({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Y2({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function Z2({scale:t,translate:e},i,s){return i*t[s]+e[s]}function L1t(t,e,i){return t?e?i?k4(t):I4(t):i?A4(t):yv(t):null}function yv(t){const e=t.coords;return{x:e[0],y:e[1]}}function eN(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function I4(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function Rat(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function A4(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function jat(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function k4(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function Dat(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Fat(t,e,i,s){let a=yv;i&&s?a=k4:i?a=I4:s&&(a=A4);for(const d of e){const{geometry:y,attributes:m}=d,_=y!=null?a(y):null;t.push({attributes:m,geometry:_})}return t}function O4(t,e){return t&&e?Dat:t?Rat:e?jat:eN}function iN(t,e,i,s,a){const d=O4(i,s);for(const{geometry:y,attributes:m}of e){const _=y!=null?d(new wn,y):null;t.push(new Il(_,m,null,a?m[a]:void 0))}return t}function R1t(t,e,i=O4(e.z!=null,e.m!=null)){return i(t,e)}function zat(t,e,i,s){for(const{geometry:a,attributes:d}of e)t.push({attributes:d,geometry:a!=null?rN(a,i,s):null});return t}function rN(t,e,i){if(t==null)return null;const s=tr(e,i),a=[];for(let d=0;d<t.coords.length;d+=s){const y=[];for(let m=0;m<s;m++)y.push(t.coords[d+m]);a.push(y)}return e?i?{points:a,hasZ:e,hasM:i}:{points:a,hasZ:e}:i?{points:a,hasM:i}:{points:a}}function sN(t,e,i,s,a){const d=tr(i,s);for(const{geometry:y,attributes:m}of e){const _=y!=null?nN(new wn,y,d):null;t.push(new Il(_,m,null,a?m[a]:void 0))}return t}function nN(t,e,i=tr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const s=t.coords;let a=0;for(const d of e.points)for(let y=0;y<i;y++)s[a++]=d[y];return t}function Vat(t,e,i,s){for(const{geometry:a,attributes:d}of e)t.push({attributes:d,geometry:a!=null?oN(a,i,s):null});return t}function oN(t,e,i){if(!t)return null;const s=tr(e,i),{coords:a,lengths:d}=t,y=[];let m=0;for(const _ of d){const S=[];for(let I=0;I<_;I++){const A=[];for(let P=0;P<s;P++)A.push(a[m++]);S.push(A)}y.push(S)}return e?i?{paths:y,hasZ:e,hasM:i}:{paths:y,hasZ:e}:i?{paths:y,hasM:i}:{paths:y}}function aN(t,e,i,s,a){const d=tr(i,s);for(const{geometry:y,attributes:m}of e){const _=y!=null?lN(new wn,y,d):null;t.push(new Il(_,m,null,a?m[a]:void 0))}return t}function lN(t,e,i=tr(e.hasZ,e.hasM)){const{lengths:s,coords:a}=t;let d=0;for(const y of e.paths){for(const m of y)for(let _=0;_<i;_++)a[d++]=m[_];s.push(y.length)}return t}function Gat(t,e,i,s){for(const{geometry:a,attributes:d,centroid:y}of e){const m=a!=null?hN(a,i,s):null;if(y!=null){const _=yv(y);t.push({attributes:d,centroid:_,geometry:m})}else t.push({attributes:d,geometry:m})}return t}function hN(t,e,i){if(!t)return null;const s=tr(e,i),{coords:a,lengths:d}=t,y=[];let m=0;for(const _ of d){const S=[];for(let I=0;I<_;I++){const A=[];for(let P=0;P<s;P++)A.push(a[m++]);S.push(A)}y.push(S)}return e?i?{rings:y,hasZ:e,hasM:i}:{rings:y,hasZ:e}:i?{rings:y,hasM:i}:{rings:y}}function uN(t,e,i,s,a){for(const{geometry:d,centroid:y,attributes:m}of e){const _=d!=null?cN(new wn,d,i,s):null,S=a?m[a]:void 0;y!=null?t.push(new Il(_,m,eN(new wn,y),S)):t.push(new Il(_,m,null,S))}return t}function cN(t,e,i=e.hasZ,s=e.hasM){return Uat(t,e.rings,i,s)}function Uat(t,e,i,s){const a=tr(i,s),{lengths:d,coords:y}=t;let m=0;qo(t);for(const _ of e){for(const S of _)for(let I=0;I<a;I++)y[m++]=S[I];d.push(_.length)}return t}const Lc=[],md=[];function j1t(t,e,i,s,a){Lc[0]=t;const[d]=pN(md,Lc,e,i,s,a);return _n(Lc),_n(md),d}function pN(t,e,i,s,a,d){if(_n(t),!i){for(const y of e){const m=d?y.attributes[d]:void 0;t.push(new Il(null,y.attributes,null,m))}return t}switch(i){case"esriGeometryPoint":return iN(t,e,s,a,d);case"esriGeometryMultipoint":return sN(t,e,s,a,d);case"esriGeometryPolyline":return aN(t,e,s,a,d);case"esriGeometryPolygon":return uN(t,e,s,a,d);default:b0.error("convertToFeatureSet:unknown-geometry",new lt(`Unable to parse unknown geometry type '${i}'`)),_n(t)}return t}function D1t(t,e,i,s,a,d){const y=t.length;switch(i){case"esriGeometryPoint":iN(t,e,s,a,d);break;case"esriGeometryMultipoint":sN(t,e,s,a,d);break;case"esriGeometryPolyline":aN(t,e,s,a,d);break;case"esriGeometryPolygon":uN(t,e,s,a,d);break;default:b0.error("convertToFeatureSet:unknown-geometry",new lt(`Unable to parse unknown geometry type '${i}'`))}for(let m=0;m<e.length;m++)t[m+y].geometryType=i,t[m+y].insertAfter=e[m].insertAfter,t[m+y].groupId=e[m].groupId;return t}function F1t(t,e,i,s){md[0]=t,fN(Lc,md,e,i,s);const a=Lc[0];return _n(Lc),_n(md),a}function z1t(t,e,i){if(t==null)return null;const s=new wn;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),t_(t)?O4(e??t.z!=null,i??t.m!=null)(s,t):Bh(t)?cN(s,t,e,i):e_(t)?lN(s,t,tr(e,i)):Q5(t)?nN(s,t,tr(e,i)):void b0.error("convertFromGeometry:unknown-geometry",new lt(`Unable to parse unknown geometry type '${t}'`))}function dN(t,e,i,s){const a=t&&("coords"in t?t:t.geometry);if(a==null)return null;switch(e){case"esriGeometryPoint":{let d=yv;return i&&s?d=k4:i?d=I4:s&&(d=A4),d(a)}case"esriGeometryMultipoint":return rN(a,i,s);case"esriGeometryPolyline":return oN(a,i,s);case"esriGeometryPolygon":return hN(a,i,s);default:return b0.error("convertToGeometry:unknown-geometry",new lt(`Unable to parse unknown geometry type '${e}'`)),null}}function qat(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function fN(t,e,i,s,a){if(_n(t),i==null)return qat(t,e);switch(i){case"esriGeometryPoint":return Fat(t,e,s,a);case"esriGeometryMultipoint":return zat(t,e,s,a);case"esriGeometryPolyline":return Vat(t,e,s,a);case"esriGeometryPolygon":return Gat(t,e,s,a);default:b0.error("convertToFeatureSet:unknown-geometry",new lt(`Unable to parse unknown geometry type '${i}'`))}return t}function V1t(t){const{objectIdFieldName:e,spatialReference:i,transform:s,fields:a,hasM:d,hasZ:y,features:m,geometryType:_,exceededTransferLimit:S,uniqueIdField:I,queryGeometry:A,queryGeometryType:P}=t,L={features:fN([],m,_,y,d),fields:a,geometryType:_,objectIdFieldName:e,spatialReference:i,uniqueIdField:I,queryGeometry:dN(A,P,!1,!1)};return s&&(L.transform=s),S&&(L.exceededTransferLimit=S),d&&(L.hasM=d),y&&(L.hasZ=y),L}function G1t(t,e){const i=new KC,{hasM:s,hasZ:a,features:d,objectIdFieldName:y,spatialReference:m,geometryType:_,exceededTransferLimit:S,transform:I,fields:A}=t;return A&&(i.fields=A),i.geometryType=_??null,i.objectIdFieldName=y??e??null,i.spatialReference=m??null,i.objectIdFieldName?(d&&pN(i.features,d,_,a,s,i.objectIdFieldName),S&&(i.exceededTransferLimit=S),s&&(i.hasM=s),a&&(i.hasZ=a),I&&(i.transform=I),i):(b0.error(new lt("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function U1t(t){const{transform:e,features:i,hasM:s,hasZ:a}=t;if(!e)return t;for(const d of i)d.geometry!=null&&t5(d.geometry,d.geometry,s,a,e),d.centroid!=null&&t5(d.centroid,d.centroid,s,a,e);return t.transform=null,t}function q1t(t,e){const{geometryType:i,features:s,hasM:a,hasZ:d}=e;if(!t)return e;for(let y=0;y<s.length;y++){const m=s[y],_=m.weakClone();_.geometry=new wn,v8(_.geometry,m.geometry,a,d,i,t),m.centroid&&(_.centroid=new wn,v8(_.centroid,m.centroid,a,d,"esriGeometryPoint",t)),s[y]=_}return e.transform=t,e}function v8(t,e,i,s,a,d,y=i,m=s){if(qo(t),e==null||!e.coords.length)return null;const _=tN[a],{coords:S,lengths:I}=e,A=tr(i,s),P=tr(i&&y,s&&m),L=E4(i,s,y,m);if(!I.length)return L(t.coords,S,0,0,K2(d,S[0]),Y2(d,S[1])),qo(t,A,0),t;let j,F,V,J,Q=0,Z=0,et=Z;for(const st of I){if(st<_)continue;let nt=0;Z=et,V=j=K2(d,S[Q]),J=F=Y2(d,S[Q+1]),L(t.coords,S,Z,Q,V,J),nt++,Q+=A,Z+=P;for(let pt=1;pt<st;pt++,Q+=A)V=K2(d,S[Q]),J=Y2(d,S[Q+1]),V===j&&J===F||(L(t.coords,S,Z,Q,V-j,J-F),Z+=P,nt++,j=V,F=J);nt>=_&&(t.lengths.push(nt),et=Z)}return _n(t.coords,et),t.coords.length?t:null}function B1t(t,e,i,s,a,d,y=i,m=s){if(qo(t),!e||!e.coords.length)return null;const _=tN[a],{coords:S,lengths:I}=e,A=tr(i,s),P=tr(i&&y,s&&m),L=E4(i,s,y,m);if(!I.length)return L(t.coords,S,0,0,S[0],S[1]),qo(t,A,0),t;let j=0;const F=d*d;for(const V of I){if(V<_){j+=V*A;continue}const J=t.coords.length/P,Q=j,Z=j+(V-1)*A;L(t.coords,S,t.coords.length,Q,S[Q],S[Q+1]),Q9(t.coords,S,A,F,L,Q,Z),L(t.coords,S,t.coords.length,Z,S[Z],S[Z+1]);const et=t.coords.length/P-J;et>=_?t.lengths.push(et):_n(t.coords,J*P),j+=V*A}return t.coords.length?t:null}function Bat(t,e,i,s){const a=t[e],d=t[e+1],y=t[i],m=t[i+1],_=t[s],S=t[s+1];let I=y,A=m,P=_-I,L=S-A;if(P!==0||L!==0){const j=((a-I)*P+(d-A)*L)/(P*P+L*L);j>1?(I=_,A=S):j>0&&(I+=P*j,A+=L*j)}return P=a-I,L=d-A,P*P+L*L}function Q9(t,e,i,s,a,d,y){let m,_=s,S=0;for(let I=d+i;I<y;I+=i)m=Bat(e,I,d,y),m>_&&(S=I,_=m);_>s&&(S-d>i&&Q9(t,e,i,s,a,d,S),a(t,e,t.length,S,e[S],e[S+1]),y-S>i&&Q9(t,e,i,s,a,S,y))}function H1t(t,e,i,s){if(e==null||!e.coords||!e.coords.length)return null;const a=tr(i,s);let d=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY;if(e&&e.coords){const S=e.coords;for(let I=0;I<S.length;I+=a){const A=S[I],P=S[I+1];d=Math.min(d,A),m=Math.max(m,A),y=Math.min(y,P),_=Math.max(_,P)}}return kw(t)?xB(t,d,y,m,_):MV(d,y,m,_,t),t}function t5(t,e,i,s,a){const{coords:d,lengths:y}=e,m=tr(i,s);if(!d.length)return t!==e&&qo(t),t;vg(a);const{originPosition:_,scale:S,translate:I}=a,A=Wat;A.originPosition=_;const P=A.scale;P[0]=S[0]??1,P[1]=-(S[1]??1),P[2]=S[2]??1,P[3]=S[3]??1;const L=A.translate;if(L[0]=I[0]??0,L[1]=I[1]??0,L[2]=I[2]??0,L[3]=I[3]??0,!y.length){for(let F=0;F<m;++F)t.coords[F]=Z2(A,d[F],F);return t!==e&&qo(t,m,0),t}let j=0;for(let F=0;F<y.length;F++){const V=y[F];t.lengths[F]=V;for(let Z=0;Z<m;++Z)t.coords[j+Z]=Z2(A,d[j+Z],Z);let J=t.coords[j],Q=t.coords[j+1];j+=m;for(let Z=1;Z<V;Z++,j+=m){J+=d[j]*P[0],Q+=d[j+1]*P[1],t.coords[j]=J,t.coords[j+1]=Q;for(let et=2;et<m;++et)t.coords[j+et]=Z2(A,d[j+et],et)}}return t!==e&&qo(t,d.length,y.length),t}function W1t(t,e,i,s,a,d){if(qo(t),t.lengths.push(...e.lengths),i===a&&s===d)for(let y=0;y<e.coords.length;y++)t.coords.push(e.coords[y]);else{const y=tr(i,s),m=E4(i,s,a,d),_=e.coords;for(let S=0;S<_.length;S+=y)m(t.coords,_,t.coords.length,S,_[S],_[S+1])}return t}function Hat(t,e,i,s){let a=0,d=t[s*e],y=t[s*(e+1)];for(let m=1;m<i;m++){const _=d+t[s*(e+m)],S=y+t[s*(e+m)+1],I=(_-d)*(S+y);d=_,y=S,a+=I}return .5*a}function J1t(t,e){const{coords:i,lengths:s}=t;let a=0,d=0;for(let y=0;y<s.length;y++){const m=s[y];d+=Hat(i,a,m,e),a+=m}return Math.abs(d)}function qo(t,e=0,i=0){_n(t.lengths,i),_n(t.coords,e)}function _n(t,e=0){t.length!==e&&(t.length=e)}const Wat={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function Jat(t,e){return e}function P4(t,e,i,s){switch(i){case 0:return qd(t,e+s,0);case 1:return t.originPosition==="lowerLeft"?qd(t,e+s,1):Zat(t,e+s,1)}}function yN(t,e,i,s){return i===2?qd(t,e,2):P4(t,e,i,s)}function Kat(t,e,i,s){return i===2?qd(t,e,3):P4(t,e,i,s)}function Yat(t,e,i,s){return i===3?qd(t,e,3):yN(t,e,i,s)}function qd({translate:t,scale:e},i,s){return t[s]+i*e[s]}function Zat({translate:t,scale:e},i,s){return t[s]-i*e[s]}let Xat=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=Jat,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=N_(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(i!=null)for(const s of e.features)i(s.geometry)}createSpatialReference(){return{}}addField(e,i){const s=e.fields;vg(s),s.push(i);const a=s.map(d=>d.name);this._attributesConstructor=function(){for(const d of a)this[d]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,s,a)=>this.addCoordinatePoint(i,s,a),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,s,a)=>this._addCoordinatePolygon(i,s,a),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,s,a)=>this._addCoordinatePolyline(i,s,a),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,s,a)=>this._addCoordinateMultipoint(i,s,a),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,s){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:s,queryGeometryType:a}=i,d=t5(s.clone(),s,!1,!1,this._transform),y=dN(d,a,!1,!1);e.queryGeometryType=a,e.queryGeometry={...y}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,s){const a=Pr(this._transform,"transform");switch(i=this._applyTransform(a,i,s,0),s){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let s=0;i<=1&&(s=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const a=Pr(this._transform,"transform");return this._applyTransform(a,e,i,s)}_addCoordinatePolyline(e,i,s){this._dehydratedAddPointsCoordinate(e.paths,i,s)}_addCoordinatePolygon(e,i,s){this._dehydratedAddPointsCoordinate(e.rings,i,s)}_addCoordinateMultipoint(e,i,s){s===0&&e.points.push([]);const a=this._transformPathLikeValue(i,s);e.points[e.points.length-1].push(a)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,s){s===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const a=this._transformPathLikeValue(i,s),d=e[e.length-1];s===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),d.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=a}_deriveApplyTransform(e){const{hasZ:i,hasM:s}=e;return i&&s?Yat:i?yN:s?Kat:P4}};async function Qat(t,e,i){const s=Dl(t),a={...i},d=Tu.from(e),y=!d.quantizationParameters,{data:m}=await wat(s,d,new Xat({sourceSpatialReference:d.sourceSpatialReference,applyTransform:y}),a);return m}let gs=class extends Rt{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return er(this.url)}async execute(t,e){const i=await this.executeJSON(t,e);return this.featureSetFromJSON(t,i,e)}async executeJSON(t,e){var m;const i=this._normalizeQuery(t),s=((m=t.outStatistics)==null?void 0:m[0])!=null,a=at("featurelayer-pbf-statistics"),d=!s||a;let y;if(this.pbfSupported&&d)try{y=await Qat(this.url,i,e)}catch(_){if(_.name!=="query:parsing-pbf")throw _;this.pbfSupported=!1}return this.pbfSupported&&d||(y=await QC(this.url,i,e)),this._normalizeFields(y.fields),y}async featureSetFromJSON(t,e,i){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!e.features)return XC.fromJSON(e);const{meshFeatureSetFromJSON:s}=await oa(bt(()=>import("./meshFeatureSet-b9e2b977.js").then(a=>a.b),["assets/meshFeatureSet-b9e2b977.js","assets/georeference-6aa50844.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-7e7f13df.js","assets/MeshLocalVertexSpace-09e21c5a.js","assets/MeshGeoreferencedRelativeVertexSpace-79492feb.js","assets/quat-85c3d5c4.js","assets/quatf64-3363c48e.js","assets/vec32-83008d00.js","assets/BufferView-879c742a.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-c3520e2b.js","assets/Indices-75fde46c.js","assets/deduplicate-fa48e2b9.js","assets/External-3a925a81.js"]),i);return s(t,this.infoFor3D,e)}executeForCount(t,e){return kat(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return Oat(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return Pat(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:i},{executeRelationshipQuery:s}]=await oa(Promise.all([bt(()=>import("./RelationshipQuery-d43a5602.js"),[]),bt(()=>import("./executeRelationshipQuery-5efc23aa.js"),["assets/executeRelationshipQuery-5efc23aa.js","assets/RelationshipQuery-d43a5602.js"])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:i},{executeRelationshipQueryForCount:s}]=await oa(Promise.all([bt(()=>import("./RelationshipQuery-d43a5602.js"),[]),bt(()=>import("./executeRelationshipQuery-5efc23aa.js"),["assets/executeRelationshipQuery-5efc23aa.js","assets/RelationshipQuery-d43a5602.js"])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:i,fetchAttachments:s,processAttachmentQueryResult:a}=await oa(bt(()=>import("./queryAttachments-a75e67de.js"),["assets/queryAttachments-a75e67de.js","assets/AttachmentInfo-6d63923d.js"]),e),d=Dl(this.url);return a(d,await(this.queryAttachmentsSupported?i(d,t,e):s(d,t,e)))}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:i}=await oa(bt(()=>import("./executeTopFeaturesQuery-17f1d17f.js"),["assets/executeTopFeaturesQuery-17f1d17f.js","assets/queryTopFeatures-881296dd.js","assets/TopFeaturesQuery-d9df3d33.js"]),e);return i(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:i}=await oa(bt(()=>import("./executeForTopIds-154598a6.js"),["assets/executeForTopIds-154598a6.js","assets/queryTopFeatures-881296dd.js","assets/TopFeaturesQuery-d9df3d33.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:i}=await oa(bt(()=>import("./executeForTopExtents-8246d747.js"),["assets/executeForTopExtents-8246d747.js","assets/queryTopFeatures-881296dd.js","assets/TopFeaturesQuery-d9df3d33.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:i}=await oa(bt(()=>import("./executeForTopCount-eb15a20e.js"),["assets/executeForTopCount-eb15a20e.js","assets/queryTopFeatures-881296dd.js","assets/TopFeaturesQuery-d9df3d33.js"]),e);return i(this.parsedUrl,t,e)}_normalizeQuery(t){let e=Tu.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?Jr.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:s,queryFormats:a}=i,d=jb("model/gltf-binary",s)??Db("glb",s),y=jb("model/gltf+json",s)??Db("gtlf",s);for(const m of a){if(m===d){e.formatOf3DObjects=m;break}m!==y||e.formatOf3DObjects||(e.formatOf3DObjects=m)}if(!e.formatOf3DObjects)throw new lt("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(e.outFields==null||!e.outFields.includes("*")){e=e===t?e.clone():e,e.outFields==null&&(e.outFields=[]);const{originX:m,originY:_,originZ:S,translationX:I,translationY:A,translationZ:P,scaleX:L,scaleY:j,scaleZ:F,rotationX:V,rotationY:J,rotationZ:Q,rotationDeg:Z}=i.transformFieldRoles;e.outFields.push(m,_,S,I,A,P,L,j,F,V,J,Q,Z)}}return e}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const e of t){const i=this.fieldsIndex.get(e.name);i&&Object.assign(e,i.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};w([T({type:Jr})],gs.prototype,"dynamicDataSource",void 0),w([T()],gs.prototype,"fieldsIndex",void 0),w([T()],gs.prototype,"gdbVersion",void 0),w([T()],gs.prototype,"infoFor3D",void 0),w([T({readOnly:!0})],gs.prototype,"parsedUrl",null),w([T()],gs.prototype,"pbfSupported",void 0),w([T()],gs.prototype,"queryAttachmentsSupported",void 0),w([T()],gs.prototype,"sourceSpatialReference",void 0),w([T({type:String})],gs.prototype,"url",void 0),gs=w([W("esri.tasks.QueryTask")],gs);const tlt=gs,b8=new Ie({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Wa=class extends _i(gt){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};w([T({json:{write:!0}})],Wa.prototype,"name",void 0),w([T({json:{write:!0}})],Wa.prototype,"description",void 0),w([T({json:{read:b8.read,write:b8.write}})],Wa.prototype,"drawingTool",void 0),w([T({json:{write:!0}})],Wa.prototype,"prototype",void 0),w([T({json:{write:!0}})],Wa.prototype,"thumbnail",void 0),Wa=w([W("esri.layers.support.FeatureTemplate")],Wa);const elt=Wa;let Po=class extends _i(gt){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const s of Object.keys(e))i[s]=HC(e[s]);return i}writeDomains(e,i){var a;const s={};for(const d of Object.keys(e))e[d]&&(s[d]=(a=e[d])==null?void 0:a.toJSON());i.domains=s}};w([T({json:{write:!0}})],Po.prototype,"id",void 0),w([T({json:{write:!0}})],Po.prototype,"name",void 0),w([T({json:{write:!0}})],Po.prototype,"domains",void 0),w([kt("domains")],Po.prototype,"readDomains",null),w([At("domains")],Po.prototype,"writeDomains",null),w([T({type:[elt],json:{write:!0}})],Po.prototype,"templates",void 0),Po=w([W("esri.layers.support.FeatureType")],Po);const ilt=Po,C4="__begin__",N4="__end__",rlt=new RegExp(C4,"ig"),slt=new RegExp(N4,"ig"),w8=new RegExp("^"+C4,"i"),_8=new RegExp(N4+"$","i"),yg='"',nlt=yg+" + ",olt=" + "+yg;function alt(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function llt(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function L4(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=alt(t.labelExpression),e.type="conventional"),e}function hlt(t){const e=L4(t);if(!e)return null;switch(e.type){case"conventional":return e5(e.expression);case"arcade":return e.expression}return null}function ult(t){const e=L4(t);if(!e)return null;switch(e.type){case"conventional":return plt(e.expression);case"arcade":return mN(e.expression)}return null}function e5(t){let e;return t?(e=$g(t,i=>C4+'$feature["'+i+'"]'+N4),e=w8.test(e)?e.replace(w8,""):yg+e,e=_8.test(e)?e.replace(_8,""):e+yg,e=e.replaceAll(rlt,nlt).replaceAll(slt,olt)):e='""',e}const clt=/^\s*\{([^}]+)\}\s*$/i;function plt(t){const e=t==null?void 0:t.match(clt);return e&&e[1].trim()||null}const dlt=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,flt=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,ylt=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function mN(t){if(!t)return null;let e=dlt.exec(t)||flt.exec(t);return e?e[1]||e[3]:(e=ylt.exec(t),e?e[2]:null)}var i5;let Ja=i5=class extends gt{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?e5(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=e5(this.value)),t!=null&&(e[i]=t)}clone(){return new i5({expression:this.expression,title:this.title,value:this.value})}};w([T({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ja.prototype,"expression",void 0),w([kt("expression",["expression","value"])],Ja.prototype,"readExpression",null),w([At("expression")],Ja.prototype,"writeExpression",null),w([T({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ja.prototype,"title",void 0),w([T({json:{read:!1,write:!1}})],Ja.prototype,"value",void 0),Ja=i5=w([W("esri.layers.support.LabelExpressionInfo")],Ja);const gN=Ja,vN=[252,146,31,255],mlt={type:"esriSMS",style:"esriSMSCircle",size:6,color:vN,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},glt={type:"esriSLS",style:"esriSLSSolid",width:.75,color:vN},vlt={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},blt={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},wlt={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},_lt={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},xlt={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},X1t=Nl.fromJSON(mlt),Q1t=As.fromJSON(glt),tyt=bu.fromJSON(vlt),Slt=c0.fromJSON(blt),eyt=Nl.fromJSON(wlt),iyt=As.fromJSON(_lt),ryt=bu.fromJSON(xlt);var r5;const C1=new Ie({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function N1(t,e,i){return{enabled:!NT(i==null?void 0:i.layer)}}function bN(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function $lt(t){return(t==null?void 0:t.type)==="map-image"}function wN(t){var e,i;return!!$lt(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Tlt(t){return bN(t)||wN(t==null?void 0:t.layer)}let gi=r5=class extends gt{static evaluateWhere(t,e){const i=(s,a,d)=>{switch(a){case"=":return s==d;case"<>":return s!=d;case">":return s>d;case">=":return s>=d;case"<":return s<d;case"<=":return s<=d}return!1};try{if(t==null)return!0;const s=t.split(" ");if(s.length===3)return i(e[s[0]],s[1],s[2]);if(s.length===7){const a=i(e[s[0]],s[1],s[2]),d=s[3],y=i(e[s[4]],s[5],s[6]);switch(d){case"AND":return a&&y;case"OR":return a||y}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Slt,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=llt(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=mN(this.labelExpressionInfo.expression);s&&(t="["+s+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,s){if(t==null&&this.labelExpression!=null&&bN(s))t=new gN({expression:this.getLabelExpressionArcade()});else if(!t)return;const a=t.toJSON(s);a.expression&&(e[i]=a)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return L4(this)}getLabelExpressionArcade(){return hlt(this)}getLabelExpressionSingleField(){return ult(this)}hash(){return JSON.stringify(this)}clone(){return new r5({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ot(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ot(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};w([T({type:String,json:{write:!0}})],gi.prototype,"name",void 0),w([T({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:N1}}}}})],gi.prototype,"allowOverrun",void 0),w([T({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:N1}}}}})],gi.prototype,"deconflictionStrategy",void 0),w([T({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&wN(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],gi.prototype,"labelExpression",void 0),w([kt("labelExpression")],gi.prototype,"readLabelExpression",null),w([At("labelExpression")],gi.prototype,"writeLabelExpression",null),w([T({type:gN,json:{write:{overridePolicy:(t,e,i)=>Tlt(i)?{allowNull:!0}:{enabled:!1}}}})],gi.prototype,"labelExpressionInfo",void 0),w([At("labelExpressionInfo")],gi.prototype,"writeLabelExpressionInfo",null),w([T({type:C1.apiValues,json:{type:C1.jsonValues,read:C1.read,write:C1.write}})],gi.prototype,"labelPlacement",void 0),w([T({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],gi.prototype,"labelPosition",void 0),w([T({type:Number})],gi.prototype,"maxScale",void 0),w([At("maxScale")],gi.prototype,"writeMaxScale",null),w([T({type:Number})],gi.prototype,"minScale",void 0),w([At("minScale")],gi.prototype,"writeMinScale",null),w([T({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:N1}}}}})],gi.prototype,"repeatLabel",void 0),w([T({type:Number,cast:ze,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:N1}}}}})],gi.prototype,"repeatLabelDistance",void 0),w([T({types:KB,json:{origins:{"web-scene":{types:YB,write:JS,default:null}},write:JS,default:null}})],gi.prototype,"symbol",void 0),w([T({type:Boolean,json:{write:!0}})],gi.prototype,"useCodedValues",void 0),w([T({type:String,json:{write:!0}})],gi.prototype,"where",void 0),gi=r5=w([W("esri.layers.support.LabelClass")],gi);const _N=gi,X2=mt.getLogger("esri.layers.support.labelingInfo"),Mlt=/\[([^\[\]]+)\]/gi;function syt(t,e,i){return t?t.map(s=>{const a=new _N;if(a.read(s,i),a.labelExpression){const d=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;a.labelExpression=a.labelExpression.replaceAll(Mlt,(y,m)=>`[${Elt(m,d)}]`)}return a}):null}function Elt(t,e){if(!e)return t;const i=t.toLowerCase();for(let s=0;s<e.length;s++){const a=e[s].name;if(a.toLowerCase()===i)return a}return t}const Ilt={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function Alt(t,e){const i=ot(t);return i.some(s=>klt(s,e))?[]:i}function klt(t,e){const i=t.labelPlacement,s=Ilt[e];if(!t.symbol)return X2.warn("No ILabelClass symbol specified."),!0;if(!s)return X2.error(new lt("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!s.includes(i)){const a=s[0];i&&X2.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${a}`),t.labelPlacement=a}return!1}var s5;let dc=s5=class extends gt{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Vt}clone(){return new s5({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};w([T({type:String,json:{write:!0}})],dc.prototype,"floorField",void 0),w([T({json:{read:!1,write:!1}})],dc.prototype,"viewAllMode",void 0),w([T({json:{read:!1,write:!1}})],dc.prototype,"viewAllLevelIds",void 0),dc=s5=w([W("esri.layers.support.LayerFloorInfo")],dc);const Olt=dc,Plt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Gt(t,e,i){return!!xN(t,e,i)}function L1(t,e,i){return xN(t,e,i)}function xN(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function Clt(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(s=>s.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Sf(t,e){var s;const i=(s=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:s.map(a=>a.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function Nlt(t,e){return{analytics:Llt(t),attachment:Rlt(t),data:jlt(t),metadata:Dlt(t),operations:Flt(t.capabilities,t,e),query:zlt(t,e),queryRelated:Vlt(t),queryTopFeatures:Glt(t),editing:Ult(t)}}function Llt(t){return{supportsCacheHint:Sf(t.advancedQueryCapabilities,"queryAnalytics")}}function Rlt(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Sf(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Gt(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(s=>{const a=Plt[s.name];a&&(i[a]=!!s.isEnabled)}),i}function jlt(t){return{isVersioned:Gt(t,"isDataVersioned",!1),supportsAttachment:Gt(t,"hasAttachments",!1),supportsM:Gt(t,"hasM",!1),supportsZ:Gt(t,"hasZ",!1)}}function Dlt(t){return{supportsAdvancedFieldProperties:Gt(t,"supportsFieldDescriptionProperty",!1)}}function Flt(t,e,i){const s=t?t.toLowerCase().split(",").map(P=>P.trim()):[],a=i?Su(i):null,d=s.includes(a!=null&&a.serverType==="MapServer"?"data":"query"),y=s.includes("editing")&&!e.datesInUnknownTimezone;let m=y&&s.includes("create"),_=y&&s.includes("delete"),S=y&&s.includes("update");const I=s.includes("changetracking"),A=e.advancedQueryCapabilities;return y&&!(m||_||S)&&(m=_=S=!0),{supportsCalculate:Gt(e,"supportsCalculate",!1),supportsTruncate:Gt(e,"supportsTruncate",!1),supportsValidateSql:Gt(e,"supportsValidateSql",!1),supportsAdd:m,supportsDelete:_,supportsEditing:y,supportsChangeTracking:I,supportsQuery:d,supportsQueryAnalytics:Gt(A,"supportsQueryAnalytic",!1),supportsQueryAttachments:Gt(A,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Gt(A,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Gt(e,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:S,supportsExceedsLimitStatistics:Gt(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Gt(e,"supportsAsyncConvert3D",!1)}}function zlt(t,e){const i=t.advancedQueryCapabilities,s=t.ownershipBasedAccessControlForFeatures,a=t.archivingInfo,d=t.currentVersion,y=e==null?void 0:e.includes("MapServer"),m=!y||d>=at("mapserver-pbf-version-support"),_=H_(e),S=new Set((t.supportedQueryFormats??"").split(",").map(I=>I.toLowerCase().trim()));return{supportsStatistics:Gt(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Gt(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Gt(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Clt(i),supportsCentroid:Gt(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Gt(i,"supportsQueryWithDistance",!1),supportsDistinct:Gt(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Gt(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Gt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Gt(i,"supportsHavingClause",!1),supportsOrderBy:Gt(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Gt(i,"supportsPagination",!1),supportsQuantization:Gt(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Gt(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Gt(t,"supportsReturningQueryGeometry",!1),supportsResultType:Gt(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Gt(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Gt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Gt(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Gt(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Gt(s,"allowOthersToQuery",!0),supportsHistoricMoment:Gt(a,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:m&&S.has("pbf"),supportsDisjointSpatialRelationship:Gt(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Gt(i,"supportsQueryWithCacheHint",!1)||Sf(i,"query"),supportsDefaultSpatialReference:Gt(i,"supportsDefaultSR",!1),supportsCompactGeometry:_,supportsFullTextSearch:Gt(i,"supportsFullTextSearch",!1),maxRecordCountFactor:L1(t,"maxRecordCountFactor",void 0),maxRecordCount:L1(t,"maxRecordCount",void 0),standardMaxRecordCount:L1(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:L1(t,"tileMaxRecordCount",void 0)}}function Vlt(t){const e=t.advancedQueryCapabilities,i=Gt(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Gt(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Sf(e,"queryRelated")}}function Glt(t){return{supportsCacheHint:Sf(t.advancedQueryCapabilities,"queryTopFilter")}}function Ult(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Gt(t,"allowGeometryUpdates",!0),supportsGlobalId:Gt(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Gt(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Gt(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Gt(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Gt(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Gt(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Gt(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Gt(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Gt(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Gt(i,"supportsAsyncApplyEdits",!1)}}var n5;let qi=n5=class extends gt{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new n5(ot({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};w([T({type:[String],json:{write:!0}})],qi.prototype,"attachmentTypes",void 0),w([T({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],qi.prototype,"attachmentsWhere",void 0),w([T({type:Boolean,json:{write:!0}})],qi.prototype,"cacheHint",void 0),w([T({type:[String],json:{write:!0}})],qi.prototype,"keywords",void 0),w([T({type:[Number],json:{write:!0}})],qi.prototype,"globalIds",void 0),w([T({json:{write:!0}})],qi.prototype,"name",void 0),w([T({type:Number,json:{read:{source:"resultRecordCount"}}})],qi.prototype,"num",void 0),w([T({type:[Number],json:{write:!0}})],qi.prototype,"objectIds",void 0),w([T({type:Boolean,json:{default:!1,write:!0}})],qi.prototype,"returnMetadata",void 0),w([T({type:[Number],json:{write:!0}})],qi.prototype,"size",void 0),w([T({type:Number,json:{read:{source:"resultOffset"}}})],qi.prototype,"start",void 0),w([At("start"),At("num")],qi.prototype,"writeStart",null),w([T({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],qi.prototype,"where",void 0),qi=n5=w([W("esri.rest.support.AttachmentQuery")],qi),qi.from=ki(qi);const qlt=qi;function Blt({displayField:t,editFieldsInfo:e,fields:i,objectIdField:s,title:a},d){if(!i)return null;const y=Klt({editFieldsInfo:e,fields:i,objectIdField:s},d);if(!y.length)return null;const m=Xlt({titleBase:a,fields:i,displayField:t}),_=Zlt();return new g_({title:m,content:_,fieldInfos:y})}const Hlt=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):dG(t,e);function Wlt(t,e){const i=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===i&&(t=t.slice()),t.sort(Jlt),t}function Jlt(t,e){return t.type==="oid"?-1:e.type==="oid"?1:x8(t)?-1:x8(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Klt(t,e){const i=e==null?void 0:e.visibleFieldNames;return Wlt(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||Qlt).map(s=>new y_({fieldName:s.name,isEditable:pG(s,t),label:s.alias,format:Ylt(s),visible:Hlt(s,{...t,visibleFieldNames:i})}))}function Ylt(t){switch(t.type){case"small-integer":case"integer":case"single":return new Y0({digitSeparator:!0,places:0});case"double":return new Y0({digitSeparator:!0,places:2});case"date":return new Y0({dateFormat:"long-month-day-year"});default:return t.type==="string"&&OG(t.name)?new Y0({digitSeparator:!0,places:0}):null}}function Zlt(){return[new Ad,new Ed]}function Xlt(t){const e=iG(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function x8(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const Qlt=["geometry","blob","raster","guid","xml"];var Hy;function Q2(t){return t!=null&&t.type==="esriSMS"}function tb(t,e,i){var a;const s=this.originIdOf(e)>=xr(i.origin);return{ignoreOrigin:!0,allowNull:s,enabled:!!i&&((a=i.layer)==null?void 0:a.type)==="map-image"&&(i.writeSublayerStructure||s)}}function eb(t,e,i){var s;return{enabled:!!i&&((s=i.layer)==null?void 0:s.type)==="tile"&&(i.origin&&this.originIdOf(e)>=xr(i.origin)||this._isOverridden(e))}}function os(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function R1(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(e)>=xr(i.origin))}}let tht=0;const Ih=new Set;Ih.add("layer"),Ih.add("parent"),Ih.add("loaded"),Ih.add("loadStatus"),Ih.add("loadError"),Ih.add("loadWarnings");let Bt=Hy=class extends jl(hv(i0(Wo))){constructor(t){super(t),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(t){return this.addResolvingPromise((async()=>{const{layer:e,url:i}=this;if(!e&&!i)throw new lt("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const s=e?await e.fetchSublayerInfo(this,t):(await ye(i,{responseType:"json",query:{f:"json"},...t})).data;s&&(this.sourceJSON=s,this.read({layerDefinition:s},{origin:"service"}))})()),this}readCapabilities(t,e){e=e.layerDefinition||e;const{operations:{supportsQuery:i,supportsQueryAttachments:s},query:{supportsFormatPBF:a},data:{supportsAttachment:d}}=Nlt(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:s},data:{supportsAttachment:d},query:{supportsFormatPBF:a}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get fieldsIndex(){return new MC(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,e){if((e=e.layerDefinition||e).globalIdField)return e.globalIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??tht++}set id(t){var e,i,s;this._get("id")!==t&&(((s=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.exportMap)==null?void 0:s.supportsDynamicLayers)!==!1?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,e,i,s){t&&t.length&&(e.layerDefinition={drawingInfo:{labelingInfo:t.map(a=>a.write({},s))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(e=>e.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,e){return e.minScale||e.layerDefinition&&e.layerDefinition.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,e){return e.maxScale||e.layerDefinition&&e.layerDefinition.maxScale||0}readObjectIdFieldFromService(t,e){if((e=e.layerDefinition||e).objectIdField)return e.objectIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,e){var s;const i=e.layerDefinition;return 1-.01*(((i==null?void 0:i.transparency)!=null?i.transparency:(s=i==null?void 0:i.drawingInfo)==null?void 0:s.transparency)??0)}writeOpacity(t,e,i,s){e.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,e){this.parent&&this.parent!==this.layer?e.parentLayerId=kg(this.parent.id):e.parentLayerId=-1}get queryTask(){var y;if(!this.layer)return null;const{spatialReference:t}=this.layer,e="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:s}=this,a=at("featurelayer-pbf")&&(i==null?void 0:i.query.supportsFormatPBF),d=((y=i==null?void 0:i.operations)==null?void 0:y.supportsQueryAttachments)??!1;return new tlt({url:this.url,pbfSupported:a,fieldsIndex:s,gdbVersion:e,sourceSpatialReference:t,queryAttachmentsSupported:d})}set renderer(t){if(t){for(const e of t.getSymbols())if(r3(e)){mt.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new Do({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return ki(Vt.ofType(Hy),t)}writeSublayers(t,e,i){var s;(s=this.sublayers)!=null&&s.length&&(e[i]=this.sublayers.map(a=>a.id).toArray().reverse())}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const s=e.fields.find(a=>a.name.toLowerCase()===i);s&&(i=s.name)}return i}get url(){var s;const t=((s=this.layer)==null?void 0:s.parsedUrl)??this._lastParsedUrl,e=this.source;if(!t)return null;if(this._lastParsedUrl=t,(e==null?void 0:e.type)==="map-layer")return`${t.path}/${e.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${wl(i)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,e,i,s){e[i]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=Fi(this),e=new Hy;return Fi(e).store=t.clone(Ih),this.commitProperty("url"),e._lastParsedUrl=this._lastParsedUrl,e}createPopupTemplate(t){return Blt(this,t)}createQuery(){return new Tu({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var s;if(this.hasOwnProperty("sublayers"))return null;const{layer:t}=this,e=t==null?void 0:t.parsedUrl,i=new(await bt(()=>import("./FeatureLayer-90942b2f.js"),["assets/FeatureLayer-90942b2f.js","assets/FeatureLayerBase-88b29b5b.js","assets/featureLayerUtils-71d00558.js","assets/RelationshipQuery-d43a5602.js","assets/editsZScale-f46e6921.js","assets/EditBusLayer-244198d8.js","assets/FeatureEffectLayer-74d758a7.js","assets/FeatureEffect-92c7e9d5.js","assets/FeatureReductionLayer-745a30db.js","assets/clusterUtils-5ded844a.js","assets/OrderedLayer-e038abc4.js","assets/fieldProperties-1ad3ab72.js","assets/styleUtils-60111c84.js","assets/TopFeaturesQuery-d9df3d33.js"])).default({url:e==null?void 0:e.path});return e&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),(t==null?void 0:t.refreshInterval)!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=ot(this.floorInfo)),this.originIdOf("labelingInfo")>St.SERVICE&&(i.labelingInfo=ot(this.labelingInfo)),this.originIdOf("labelsVisible")>St.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>St.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>St.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>St.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>St.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>St.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>St.DEFAULTS&&(i.popupTemplate=ot(this.popupTemplate)),this.originIdOf("renderer")>St.SERVICE&&(i.renderer=ot(this.renderer)),((s=this.source)==null?void 0:s.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>St.DEFAULTS&&(i.title=this.title),(t==null?void 0:t.type)==="map-image"&&t.originIdOf("customParameters")>St.DEFAULTS&&(i.customParameters=t.customParameters),(t==null?void 0:t.type)==="tile"&&t.originIdOf("customParameters")>St.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const s=t.attributes?t.attributes[e]:void 0;if(s==null)return null;let a=null;return i==null||i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===s.toString()&&(a=d),!!a)}),a}getFieldDomain(t,e){const i=e&&e.feature,s=this.getFeatureType(i);if(s){const a=s.domains&&s.domains[t];if(a&&a.type!=="inherited")return a}return this._getLayerDomain(t)}async queryAttachments(t,e){var I,A;await this.load(),t=qlt.from(t);const i=this.capabilities;if(!((I=i==null?void 0:i.data)!=null&&I.supportsAttachment))throw new lt("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:s,objectIds:a,globalIds:d,num:y,size:m,start:_,where:S}=t;if(!((A=i==null?void 0:i.operations)!=null&&A.supportsQueryAttachments)&&((s==null?void 0:s.length)>0||(d==null?void 0:d.length)>0||(m==null?void 0:m.length)>0||y||_||S))throw new lt("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||d!=null&&d.length||S))throw new lt("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return this.queryTask.executeAttachmentQuery(t,e)}async queryFeatures(t=this.createQuery(),e){var s,a;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new lt("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new lt("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(t,{...e,query:{...(s=this.layer)==null?void 0:s.customParameters,token:(a=this.layer)==null?void 0:a.apiKey}});if(i!=null&&i.features)for(const d of i.features)d.sourceLayer=this;return i}toExportImageJSON(t){var d;const e={id:this.id,source:((d=this.source)==null?void 0:d.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=p4(t,this.definitionExpression);i!=null&&(e.definitionExpression=i);const s=["renderer","labelingInfo","opacity","labelsVisible"].reduce((y,m)=>(y[m]=this.originIdOf(m),y),{});if(Object.keys(s).some(y=>s[y]>St.SERVICE)){const y=e.drawingInfo={};if(s.renderer>St.SERVICE&&(y.renderer=this.renderer?this.renderer.toJSON():null),s.labelsVisible>St.SERVICE&&(y.showLabels=this.labelsVisible),this.labelsVisible&&s.labelingInfo>St.SERVICE){!this.loaded&&this.labelingInfo.some(_=>!_.labelPlacement)&&mt.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let m=this.labelingInfo;this.geometryType!=null&&(m=Alt(this.labelingInfo,$m.toJSON(this.geometryType))),y.labelingInfo=m.filter(_=>_.labelPlacement).map(_=>_.toJSON({origin:"service",layer:this.layer})),y.showLabels=!0}s.opacity>St.SERVICE&&(y.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(y.renderer)}return e}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,e=>{e.color||e.style!=="esriSMSX"&&e.style!=="esriSMSCross"||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,e){if(t){const i=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const s of i)Q2(s.symbol)&&e(s.symbol);"symbol"in t&&Q2(t.symbol)&&e(t.symbol),"defaultSymbol"in t&&Q2(t.defaultSymbol)&&e(t.defaultSymbol)}}_setAndNotifyLayer(t,e){var m,_,S,I;const i=this.layer,s=this._get(t);let a,d;switch(t){case"definitionExpression":case"floorInfo":a="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":a="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":a="supportsDynamicLayers",d="supportsModification"}const y=Fi(this).getDefaultOrigin();if(y!=="service"){if(a&&((S=(_=(m=this.layer)==null?void 0:m.capabilities)==null?void 0:_.exportMap)==null?void 0:S[a])===!1)return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${a}'`);if(d&&((I=this.capabilities)==null?void 0:I.exportMap[d])===!1)return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${d}'`)}t!=="source"||this.loadStatus==="not-loaded"?(this._set(t,e),y!=="service"&&s!==e&&i&&i.emit&&i.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,e){e&&(e.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),t&&(t.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),t.on("before-changes",i=>{var a,d,y;const s=(y=(d=(a=this.layer)==null?void 0:a.capabilities)==null?void 0:d.exportMap)==null?void 0:y.supportsSublayersChanges;s==null||s||(mt.getLogger(this).error(new lt("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(t,e){const{layer:i,declaredClass:s}=this;mt.getLogger(s).error(new lt("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${i==null?void 0:i.id}'`,{reason:e,sublayer:this,layer:i}))}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}};Bt.test={isMapImageLayerOverridePolicy:t=>t===os||t===tb,isTileImageLayerOverridePolicy:t=>t===eb},w([T({readOnly:!0})],Bt.prototype,"capabilities",void 0),w([kt("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Bt.prototype,"readCapabilities",null),w([T()],Bt.prototype,"defaultPopupTemplate",null),w([T({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:tb}}})],Bt.prototype,"definitionExpression",null),w([T({readOnly:!0})],Bt.prototype,"effectiveScaleRange",null),w([T({type:[M4],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Bt.prototype,"fields",void 0),w([T({readOnly:!0})],Bt.prototype,"fieldsIndex",null),w([T({type:Olt,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:tb},origins:{"web-scene":{read:!1,write:!1}}}})],Bt.prototype,"floorInfo",null),w([T({type:Ae,json:{read:{source:"layerDefinition.extent"}}})],Bt.prototype,"fullExtent",void 0),w([T({type:$m.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:$m.read}}}}})],Bt.prototype,"geometryType",void 0),w([T({type:String})],Bt.prototype,"globalIdField",void 0),w([kt("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Bt.prototype,"readGlobalIdFieldFromService",null),w([T({type:Ee,json:{write:{ignoreOrigin:!0}}})],Bt.prototype,"id",null),w([T({value:null,type:[_N],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:os}}})],Bt.prototype,"labelingInfo",null),w([At("labelingInfo")],Bt.prototype,"writeLabelingInfo",null),w([T({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:os}}})],Bt.prototype,"labelsVisible",null),w([T({value:null})],Bt.prototype,"layer",null),w([T({type:String,json:{write:{overridePolicy:eb}}})],Bt.prototype,"layerItemId",void 0),w([T({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:R1}}})],Bt.prototype,"legendEnabled",void 0),w([T({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Bt.prototype,"listMode",null),w([T({type:Number,value:0,json:{write:{overridePolicy:os}}})],Bt.prototype,"minScale",null),w([kt("minScale",["minScale","layerDefinition.minScale"])],Bt.prototype,"readMinScale",null),w([T({type:Number,value:0,json:{write:{overridePolicy:os}}})],Bt.prototype,"maxScale",null),w([kt("maxScale",["maxScale","layerDefinition.maxScale"])],Bt.prototype,"readMaxScale",null),w([T({type:String})],Bt.prototype,"objectIdField",void 0),w([kt("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Bt.prototype,"readObjectIdFieldFromService",null),w([T({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:os}}})],Bt.prototype,"opacity",null),w([kt("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Bt.prototype,"readOpacity",null),w([At("opacity")],Bt.prototype,"writeOpacity",null),w([T({json:{type:Ee,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:os}}})],Bt.prototype,"parent",void 0),w([At("parent")],Bt.prototype,"writeParent",null),w([T({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:R1,writer(t,e,i){e[i]=!t}}}})],Bt.prototype,"popupEnabled",void 0),w([T({type:g_,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:R1}}})],Bt.prototype,"popupTemplate",void 0),w([T({readOnly:!0})],Bt.prototype,"queryTask",null),w([T({types:GC,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:os},origins:{"web-scene":{types:Vot,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:os}}}}})],Bt.prototype,"renderer",null),w([T({types:{key:"type",base:null,typeMap:{"data-layer":Jr,"map-layer":Do}},cast(t){if(t){if("mapLayerId"in t)return Xh(Do,t);if("dataSource"in t)return Xh(Jr,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:os}}})],Bt.prototype,"source",null),w([T()],Bt.prototype,"sourceJSON",void 0),w([T({value:null,json:{type:[Ee],write:{target:"subLayerIds",allowNull:!0,overridePolicy:os}}})],Bt.prototype,"sublayers",null),w([Ne("sublayers")],Bt.prototype,"castSublayers",null),w([At("sublayers")],Bt.prototype,"writeSublayers",null),w([T({type:String,json:{name:"name",write:{overridePolicy:R1}}})],Bt.prototype,"title",void 0),w([T({type:String})],Bt.prototype,"typeIdField",void 0),w([kt("typeIdField",["layerDefinition.typeIdField"])],Bt.prototype,"readTypeIdField",null),w([T({type:[ilt],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Bt.prototype,"types",void 0),w([T({type:String,json:{name:"layerUrl",write:{overridePolicy:eb}}})],Bt.prototype,"url",null),w([T({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:os}}})],Bt.prototype,"visible",null),w([At("visible")],Bt.prototype,"writeVisible",null),Bt=Hy=w([W("esri.layers.support.Sublayer")],Bt);const $f=Bt,eht=mt.getLogger("esri.layers.TileLayer");function iht(t,e){const i=[],s={};return t&&t.forEach(a=>{const d=new $f;if(d.read(a,e),s[d.id]=d,a.parentLayerId!=null&&a.parentLayerId!==-1){const y=s[a.parentLayerId];y.sublayers||(y.sublayers=[]),y.sublayers.unshift(d)}else i.unshift(d)}),i}const ib=Vt.ofType($f);function SN(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&SN(i.sublayers,e)})}const $N=t=>{let e=class extends t{constructor(...i){super(...i),this.allSublayers=new Fc({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.sublayersSourceJSON={[St.SERVICE]:{},[St.PORTAL_ITEM]:{},[St.WEB_SCENE]:{},[St.WEB_MAP]:{}},this.addHandles(It(()=>this.sublayers,(s,a)=>this._handleSublayersChange(s,a),p0))}destroy(){this.allSublayers.destroy()}readSublayers(i,s){if(!s||!i)return;const{sublayersSourceJSON:a}=this,d=xr(s.origin);if(d<St.SERVICE||(a[d]={context:s,visibleLayers:i.visibleLayers||a[d].visibleLayers,layers:i.layers||a[d].layers},d>St.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:y,origin:m}=this.createSublayersForOrigin("web-document"),_=Fi(this);_.setDefaultOrigin(m),this._set("sublayers",new ib(y)),_.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(s=>s.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const s=xr(i==="web-document"?"web-map":i);let a=St.SERVICE,d=this.sublayersSourceJSON[St.SERVICE].layers,y=this.sublayersSourceJSON[St.SERVICE].context,m=null;const _=[St.PORTAL_ITEM,St.WEB_SCENE,St.WEB_MAP].filter(j=>j<=s);for(const j of _){const F=this.sublayersSourceJSON[j];prt(F.layers)&&(a=j,d=F.layers,y=F.context,F.visibleLayers&&(m={visibleLayers:F.visibleLayers,context:F.context}))}const S=[St.PORTAL_ITEM,St.WEB_SCENE,St.WEB_MAP].filter(j=>j>a&&j<=s);let I=null;for(const j of S){const{layers:F,visibleLayers:V,context:J}=this.sublayersSourceJSON[j];F&&(I={layers:F,context:J}),V&&(m={visibleLayers:V,context:J})}const A=iht(d,y),P=new Map,L=new Set;if(I)for(const j of I.layers)P.set(j.id,j);if(m!=null&&m.visibleLayers)for(const j of m.visibleLayers)L.add(j);return SN(A,j=>{I&&j.read(P.get(j.id),I.context),m&&j.read({defaultVisibility:L.has(j.id)},m.context)}),{origin:vd(a),sublayers:new ib({items:A})}}read(i,s){super.read(i,s),this.readSublayers(i,s)}_handleSublayersChange(i,s){s&&(s.forEach(a=>{a.parent=null,a.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(a=>{a.parent=this,a.layer=this}),this.addHandles([i.on("after-add",({item:a})=>{a.parent=this,a.layer=this}),i.on("after-remove",({item:a})=>{a.parent=null,a.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",a=>{eht.error(new lt("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),a.preventDefault()}),"sublayers-owner"))}};return w([T({readOnly:!0})],e.prototype,"allSublayers",void 0),w([T({readOnly:!0,type:Vt.ofType($f)})],e.prototype,"serviceSublayers",void 0),w([T({value:null,type:ib,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0),w([T({readOnly:!0})],e.prototype,"sublayersSourceJSON",void 0),e=w([W("esri.layers.mixins.SublayersOwner")],e),e},TN=dr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Fp=class extends _i(gt){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return jK(this.value,this.unit,"milliseconds")}};w([Lt(TN,{nonNullable:!0})],Fp.prototype,"unit",void 0),w([T({type:Number,json:{write:!0},nonNullable:!0})],Fp.prototype,"value",void 0),Fp=w([W("esri.TimeInterval")],Fp);const mg=Fp;function S8(t,e){return mg.fromJSON({value:t,unit:e})}let hr=class extends _i(gt){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,e){if(!e.timeExtent||!Array.isArray(e.timeExtent)||e.timeExtent.length!==2)return null;const i=new Date(e.timeExtent[0]),s=new Date(e.timeExtent[1]);return new oo({start:i,end:s})}writeFullTimeExtent(t,e){t&&t.start!=null&&t.end!=null?e.timeExtent=[t.start.getTime(),t.end.getTime()]:e.timeExtent=null}readInterval(t,e){return e.timeInterval&&e.timeIntervalUnits?S8(e.timeInterval,e.timeIntervalUnits):e.defaultTimeInterval&&e.defaultTimeIntervalUnits?S8(e.defaultTimeInterval,e.defaultTimeIntervalUnits):null}writeInterval(t,e){e.timeInterval=(t==null?void 0:t.toJSON().value)??null,e.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};w([T({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],hr.prototype,"cumulative",void 0),w([T({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],hr.prototype,"endField",void 0),w([T({type:oo,json:{write:{enabled:!0,allowNull:!0}}})],hr.prototype,"fullTimeExtent",void 0),w([kt("fullTimeExtent",["timeExtent"])],hr.prototype,"readFullTimeExtent",null),w([At("fullTimeExtent")],hr.prototype,"writeFullTimeExtent",null),w([T({type:Boolean,json:{write:!0}})],hr.prototype,"hasLiveData",void 0),w([T({type:mg,json:{write:{enabled:!0,allowNull:!0}}})],hr.prototype,"interval",void 0),w([kt("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],hr.prototype,"readInterval",null),w([At("interval")],hr.prototype,"writeInterval",null),w([T({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],hr.prototype,"startField",void 0),w([T({type:Nd,json:{write:{enabled:!0,allowNull:!0}}})],hr.prototype,"timeReference",void 0),w([T({type:String,json:{write:{enabled:!0,allowNull:!0}}})],hr.prototype,"trackIdField",void 0),w([T({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],hr.prototype,"useTime",void 0),hr=w([W("esri.layers.support.TimeInfo")],hr);const rht=hr,sht=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const a=s.timeInfo.exportOptions;if(!a)return null;const d=a.timeOffset,y=TN.fromJSON(a.timeOffsetUnits);return d&&y?new mg({value:d,unit:y}):null}set timeInfo(i){eG(i,this.fieldsIndex),this._set("timeInfo",i)}};return w([T({type:oo,json:{write:!1}})],e.prototype,"timeExtent",void 0),w([T({type:mg})],e.prototype,"timeOffset",void 0),w([kt("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),w([T({value:null,type:rht,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),w([T({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=w([W("esri.layers.mixins.TemporalLayer")],e),e},nht={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Ur=class extends jl(Rt){constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(e=>{const i=ng(this.floors,e);return e.toExportImageJSON(i)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&lP(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.handles.remove("layer"),t&&this.handles.add([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",e=>this.notifyChange(nht[e.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){var i;const t=!!((i=this.floors)!=null&&i.length),e=this.visibleSublayers.filter(s=>s.definitionExpression!=null||t&&s.floorInfo!=null);return e.length?JSON.stringify(e.reduce((s,a)=>{const d=ng(this.floors,a),y=p4(d,a.definitionExpression);return y!=null&&(s[a.id]=y),s},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const e=this.layer.sublayers,i=a=>{const d=this.scale,y=d===0,m=a.minScale===0||d<=a.minScale,_=a.maxScale===0||d>=a.maxScale;a.visible&&(y||m&&_)&&(a.sublayers?a.sublayers.forEach(i):t.unshift(a))};e&&e.forEach(i);const s=this._get("visibleSublayers");return!s||s.length!==t.length||s.some((a,d)=>t[d]!==a)?t:s}toJSON(){const t=this.layer;let e={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?e.dynamicLayers=this.dynamicLayers:e={...e,layers:this.layers,layerDefs:this.layerDefs},e}};w([T({readOnly:!0})],Ur.prototype,"dynamicLayers",null),w([T()],Ur.prototype,"floors",void 0),w([T({readOnly:!0})],Ur.prototype,"hasDynamicLayers",null),w([T()],Ur.prototype,"layer",null),w([T({readOnly:!0})],Ur.prototype,"layers",null),w([T({readOnly:!0})],Ur.prototype,"layerDefs",null),w([T({type:Number})],Ur.prototype,"scale",void 0),w([T(Tst)],Ur.prototype,"timeExtent",void 0),w([T({readOnly:!0})],Ur.prototype,"version",null),w([T({readOnly:!0})],Ur.prototype,"visibleSublayers",null),Ur=w([W("esri.layers.mixins.ExportImageParameters")],Ur);async function oht(t,e,i){let s;try{s=await createImageBitmap(t)}catch(a){throw new lt("request:server",`Unable to load ${e}`,{url:e,error:a})}return Ke(i),s}async function $8(t,e,i,s,a){let d;try{d=await createImageBitmap(t)}catch(y){throw new lt("request:server",`Unable to load tile ${e}/${i}/${s}`,{error:y,level:e,row:i,col:s})}return Ke(a),d}const tn=[];function aht(t,e){if(H_(t.url??""))return!0;const{wkid:i}=e;for(const s of tn){if((t.version??0)>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}tn.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),tn.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),tn.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),tn.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),tn.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),tn.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),tn.push([10.61,()=>new Set([102497])]),tn.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),tn.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),tn.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);let li=class extends QP(sht(oC($N(DP(FP(eC(iC(hv(nC(NP(tC(jl(r_))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(on).then(()=>this._fetchService(e))),Promise.resolve(this)}readImageFormat(t,e){const i=e.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(t,e,i,s){var S;if(!this.loaded||!t)return;const a=t.slice().reverse().flatten(({sublayers:I})=>I&&I.toArray().reverse()).toArray();let d=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((S=this.capabilities.exportMap)!=null&&S.supportsDynamicLayers)){const I=xr(s.origin);if(I===St.PORTAL_ITEM){const A=this.createSublayersForOrigin("service").sublayers;d=lS(a,A,St.SERVICE)}else if(I>St.PORTAL_ITEM){const A=this.createSublayersForOrigin("portal-item");d=lS(a,A.sublayers,xr(A.origin))}}const y=[],m={writeSublayerStructure:d,...s};let _=d;a.forEach(I=>{const A=I.write({},m);y.push(A),_=_||I.originOf("visible")==="user"}),y.some(I=>Object.keys(I).length>1)&&(e.layers=y),_&&(e.visibleLayers=a.filter(I=>I.visible).map(I=>I.id))}createExportImageParameters(t,e,i,s){const a=s&&s.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const d=new Ur({layer:this,floors:s==null?void 0:s.floors,scale:oP({extent:t,width:e})*a}),y=d.toJSON();d.destroy();const m=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},_=t&&t.spatialReference,S=_.wkid||JSON.stringify(_.toJSON());y.dpi*=a;const I={};if(s!=null&&s.timeExtent){const{start:A,end:P}=s.timeExtent.toJSON();I.time=A&&P&&A===P?""+A:`${A??"null"},${P??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(I.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:S,imageSR:S,size:e+","+i,...y,...m,...I}}async fetchImage(t,e,i,s){const{data:a}=await this._fetchImage("image",t,e,i,s);return a}async fetchImageBitmap(t,e,i,s){const{data:a,url:d}=await this._fetchImage("blob",t,e,i,s);return oht(a,d,s==null?void 0:s.signal)}async fetchRecomputedExtents(t={}){const e={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await ye(this.url,e),{extent:s,fullExtent:a,timeExtent:d}=i,y=s||a;return{fullExtent:y&&Ae.fromJSON(y),timeExtent:d&&oo.fromJSON({start:d[0],end:d[1]})}}loadAll(){return Cg(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return aht(this,t)}async _fetchImage(t,e,i,s,a){var m,_,S;const d={responseType:t,signal:(a==null?void 0:a.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,i,s,a),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},y=this.parsedUrl.path+"/export";if(((m=d.query)==null?void 0:m.dynamicLayers)!=null&&!((S=(_=this.capabilities)==null?void 0:_.exportMap)!=null&&S.supportsDynamicLayers))throw new lt("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:d.query});try{const{data:I}=await ye(y,d);return{data:I,url:y}}catch(I){throw Qi(I)?I:new lt("mapimagelayer:image-fetch-error",`Unable to load image: ${y}`,{error:I})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:e,ssl:i}=await ye(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=e,this.read(e,{origin:"service",url:this.parsedUrl})}};w([T({type:Nd})],li.prototype,"dateFieldsTimeReference",void 0),w([T({type:Boolean})],li.prototype,"datesInUnknownTimezone",void 0),w([T()],li.prototype,"dpi",void 0),w([T()],li.prototype,"gdbVersion",void 0),w([T()],li.prototype,"imageFormat",void 0),w([kt("imageFormat",["supportedImageFormatTypes"])],li.prototype,"readImageFormat",null),w([T({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],li.prototype,"imageMaxHeight",void 0),w([T({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],li.prototype,"imageMaxWidth",void 0),w([T()],li.prototype,"imageTransparency",void 0),w([T({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],li.prototype,"isReference",void 0),w([T({json:{read:!1,write:!1}})],li.prototype,"labelsVisible",void 0),w([T({type:["ArcGISMapServiceLayer"]})],li.prototype,"operationalLayerType",void 0),w([T({json:{read:!1,write:!1}})],li.prototype,"popupEnabled",void 0),w([T({type:Nd})],li.prototype,"preferredTimeReference",void 0),w([T()],li.prototype,"sourceJSON",void 0),w([T({json:{write:{ignoreOrigin:!0}}})],li.prototype,"sublayers",void 0),w([At("sublayers",{layers:{type:[$f]},visibleLayers:{type:[Ee]}})],li.prototype,"writeSublayers",null),w([T({type:["show","hide","hide-children"]})],li.prototype,"listMode",void 0),w([T({json:{read:!1},readOnly:!0,value:"map-image"})],li.prototype,"type",void 0),w([T(LP)],li.prototype,"url",void 0),li=w([W("esri.layers.MapImageLayer")],li);const lht=li,oyt=Object.freeze(Object.defineProperty({__proto__:null,default:lht},Symbol.toStringTag,{value:"Module"}));class hht{constructor(e,i=0,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.minLOD=i,this.maxLOD=s,e.lodAt(i)||(this.minLOD=e.lods[0].level),e.lodAt(s)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,i,s){var d;const a=(d=this.tileInfo)==null?void 0:d.lodAt(e);return!a||e<this.minLOD||e>this.maxLOD?"unavailable":a.cols&&a.rows?s>=a.cols[0]&&s<=a.cols[1]&&i>=a.rows[0]&&i<=a.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,i,s,a){await tm(a);const d=this.getAvailability(e,i,s);if(d==="unavailable")throw new lt("tile-map:tile-unavailable","Tile is not available",{level:e,row:i,col:s});return d}async fetchAvailabilityUpsample(e,i,s,a,d){await tm(d),a.level=e,a.row=i,a.col=s;const y=this.tileInfo;return y.updateTileInfo(a),this.fetchAvailability(e,i,s,d).catch(m=>{if(Qi(m))throw m;if(y.upsampleTile(a))return this.fetchAvailabilityUpsample(a.level,a.row,a.col,a,d);throw m})}}var o5;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(o5||(o5={}));function uht(t,e=!1){return t<=XN?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}class Bd{constructor(e){this._validateJSON(e);const{location:i,data:s}=e;this.location=Object.freeze(ot(i));const a=this.location.width,d=this.location.height;let y=!0,m=!0;const _=Math.ceil(a*d/32),S=uht(_);let I=0;for(let A=0;A<s.length;A++){const P=A%32;s[A]?(m=!1,S[I]|=1<<P):y=!1,P===31&&++I}m?(this._availability="unavailable",this.byteSize=40):y?(this._availability="available",this.byteSize=40):(this._availability=S,this.byteSize=40+YN(S))}getAvailability(e,i){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const s=(e-this.location.top)*this.location.width+(i-this.location.left),a=s%32,d=s>>5,y=this._availability;return d<0||d>y.length?"unknown":y[d]&1<<a?"available":"unavailable"}static fromDefinition(e,i){const s=e.service.request||ye,{row:a,col:d,width:y,height:m}=e,_={query:{f:"json"}};return i=i?{..._,...i}:_,s(cht(e),i).then(S=>S.data).catch(S=>{if(S&&S.details&&S.details.httpStatus===422)return{location:{top:a,left:d,width:y,height:m},valid:!0,data:BN(y*m,0)};throw S}).then(S=>{if(S.location&&(S.location.top!==a||S.location.left!==d||S.location.width!==y||S.location.height!==m))throw new lt("tilemap:location-mismatch","Tilemap response for different location than requested",{response:S,definition:{top:a,left:d,width:y,height:m}});return Bd.fromJSON(S)})}static fromJSON(e){return Object.freeze(new Bd(e))}_validateJSON(e){if(!e||!e.location)throw new lt("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new lt("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new lt("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new lt("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new lt("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function T8(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function cht(t){var s;let e;if((s=t.service.tileServers)!=null&&s.length){const a=t.service.tileServers;e=`${a&&a.length?a[t.row%a.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const i=t.service.query;return i&&(e=`${e}?${i}`),e}var Rh;let Un=Rh=class extends Rt{constructor(t){super(t),this._pendingTilemapRequests={},this.request=ye,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new TC(2*o5.MEGABYTES),this.addHandles([It(()=>{const{layer:t}=this;return[t==null?void 0:t.parsedUrl,t==null?void 0:t.tileServers,t==null?void 0:t.apiKey,t==null?void 0:t.customParameters]},()=>this._initializeTilemapDefinition(),xe)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(t,e,i,s){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return Promise.reject(new lt("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`));const a=this._tmpTilemapDefinition,d=this._tilemapFromCache(t,e,i,a);if(d)return Promise.resolve(d);const y=s&&s.signal;return s={...s,signal:null},new Promise((m,_)=>{Xr(y,()=>_(ei()));const S=T8(a);let I=this._pendingTilemapRequests[S];if(!I){I=Bd.fromDefinition(a,s).then(P=>(this._tilemapCache.put(S,P,P.byteSize),P));const A=()=>delete this._pendingTilemapRequests[S];this._pendingTilemapRequests[S]=I,I.then(A,A)}I.then(m,_)})}getAvailability(t,e,i){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return"unavailable";const s=this._tilemapFromCache(t,e,i,this._tmpTilemapDefinition);return s?s.getAvailability(e,i):"unknown"}fetchAvailability(t,e,i,s){return!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD?Promise.reject(new lt("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i})):this.fetchTilemap(t,e,i,s).catch(a=>a).then(a=>{if(a instanceof Bd){const d=a.getAvailability(e,i);if(d==="unavailable")throw new lt("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return d}if(Qi(a))throw a;return"unknown"})}fetchAvailabilityUpsample(t,e,i,s,a){s.level=t,s.row=e,s.col=i;const d=this.layer.tileInfo;d.updateTileInfo(s);const y=this.fetchAvailability(t,e,i,a).catch(m=>{if(Qi(m))throw m;if(d.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,a);throw m});return this._fetchAvailabilityUpsamplePrefetch(s.id,t,e,i,a,y),y}async _fetchAvailabilityUpsamplePrefetch(t,e,i,s,a,d){if(!this._prefetchingEnabled||t==null)return;const y=`prefetch-${t}`;if(this.hasHandles(y))return;const m=new AbortController;d.then(()=>m.abort(),()=>m.abort());let _=!1;const S=Xn(()=>{_||(_=!0,m.abort())});if(this.addHandles(S,y),await NL(10,m.signal).catch(()=>{}),_||(_=!0,this.removeHandles(y)),Ms(m))return;const I=new mA(t,e,i,s),A={...a,signal:m.signal},P=this.layer.tileInfo;for(let L=0;Rh._prefetches.length<Rh._maxPrefetch&&P.upsampleTile(I);++L){const j=this.fetchAvailability(I.level,I.row,I.col,A);Rh._prefetches.push(j);const F=()=>{Rh._prefetches.removeUnordered(j)};j.then(F,F)}}_initializeTilemapDefinition(){var s;if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:e,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:wl({...t.query,...i,token:e??((s=t.query)==null?void 0:s.token)}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,i,s){s.level=t,s.row=e-e%this.size,s.col=i-i%this.size;const a=T8(s);return this._tilemapCache.get(a)}get test(){const t=this;return{get prefetchingEnabled(){return t._prefetchingEnabled},set prefetchingEnabled(e){t._prefetchingEnabled=e},hasTilemap:(e,i,s)=>!!t._tilemapFromCache(e,i,s,t._tmpTilemapDefinition)}}};Un._maxPrefetch=4,Un._prefetches=new gl({initialSize:Rh._maxPrefetch}),w([T({constructOnly:!0})],Un.prototype,"layer",void 0),w([T({constructOnly:!0})],Un.prototype,"minLOD",void 0),w([T({constructOnly:!0})],Un.prototype,"maxLOD",void 0),w([T({constructOnly:!0})],Un.prototype,"request",void 0),w([T({constructOnly:!0})],Un.prototype,"size",void 0),Un=Rh=w([W("esri.layers.support.TilemapCache")],Un);const pht=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var i,s;(s=(i=this.tilemapCache)==null?void 0:i.destroy)==null||s.call(i)}readMinScale(i,s){return s.minLOD!=null&&s.maxLOD!=null?i:0}readMaxScale(i,s){return s.minLOD!=null&&s.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,s,a){var I;const d=(I=s.capabilities)==null?void 0:I.includes("Tilemap");let{minLOD:y,maxLOD:m,minScale:_,maxScale:S}=s;if(y==null&&m==null&&_!==0&&S!==0){const A=P=>Math.round(1e4*P)/1e4;_=A(_||s.tileInfo.lods[0].scale),S=A(S||s.tileInfo.lods[s.tileInfo.lods.length-1].scale);for(const P of s.tileInfo.lods){const L=A(P.scale);y=L>=_?P.level:y,m=L>=S?P.level:m}}if(d)return new Un({layer:this,minLOD:y,maxLOD:m});if(s.tileInfo){const A=new S3;return A.read(s.tileInfo,a),new hht(A,y,m)}return null}};return w([T({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),w([T()],e.prototype,"minScale",void 0),w([kt("service","minScale")],e.prototype,"readMinScale",null),w([T()],e.prototype,"maxScale",void 0),w([kt("service","maxScale")],e.prototype,"readMaxScale",null),w([T({type:te})],e.prototype,"spatialReference",void 0),w([T({readOnly:!0})],e.prototype,"supportsBlankTile",null),w([T({type:S3})],e.prototype,"tileInfo",void 0),w([T()],e.prototype,"tilemapCache",void 0),w([kt("service","tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null),w([T()],e.prototype,"version",void 0),e=w([W("esri.layers.mixins.ArcGISCachedService")],e),e};var a5;const M8=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let wi=a5=class extends QP(oC($N(pht(DP(eC(iC(FP(hv(jl(nC(NP(tC(r_))))))))))))){constructor(...t){super(...t),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(on).then(()=>this._fetchService(e))),Promise.resolve(this)}get attributionDataUrl(){var e;const t=(e=this.parsedUrl)==null?void 0:e.path.toLowerCase();return t?this._getDefaultAttribution(this._getMapName(t)):null}readSpatialReference(t,e){return(t=t||e.tileInfo&&e.tileInfo.spatialReference)&&te.fromJSON(t)}writeSublayers(t,e,i,s){if(!this.loaded||!t)return;const a=t.slice().reverse().flatten(({sublayers:m})=>m&&m.toArray().reverse()).toArray(),d=[],y={writeSublayerStructure:!1,...s};a.forEach(m=>{const _=m.write({},y);d.push(_)}),d.some(m=>Object.keys(m).length>1)&&(e.layers=d)}get tileServers(){var t;return this._getDefaultTileServers((t=this.parsedUrl)==null?void 0:t.path)}castTileServers(t){return Array.isArray(t)?t.map(e=>er(e).path):null}fetchTile(t,e,i,s={}){const{signal:a}=s,d=this.getTileUrl(t,e,i),y={responseType:"image",signal:a,query:{...this.refreshParameters}};return ye(d,y).then(m=>m.data)}async fetchImageBitmapTile(t,e,i,s={}){const{signal:a}=s;if(this.fetchTile!==a5.prototype.fetchTile){const _=await this.fetchTile(t,e,i,s);return $8(_,t,e,i,a)}const d=this.getTileUrl(t,e,i),y={responseType:"blob",signal:a,query:{...this.refreshParameters}},{data:m}=await ye(d,y);return $8(m,t,e,i,a)}getTileUrl(t,e,i){var y,m;const s=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,a=wl({...(y=this.parsedUrl)==null?void 0:y.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),d=this.tileServers;return`${d&&d.length?d[e%d.length]:(m=this.parsedUrl)==null?void 0:m.path}/tile/${t}/${e}/${i}${a?"?"+a:""}`}loadAll(){return Cg(this,t=>{t(this.allSublayers)})}_fetchService(t){return new Promise((e,i)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new lt("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void e({data:this.sourceJSON})}if(!this.parsedUrl)throw new lt("tile-layer:undefined-url","layer's url is not defined");const s=Su(this.parsedUrl.path);if(s!=null&&s.serverType==="ImageServer")throw new lt("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");ye(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e,i)}).then(e=>{let i=this.url;if(e.ssl&&(i=this.url=i.replace(/^http:/i,"https:")),this.sourceJSON=e.data,this.read(e.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!H_(i))return this._fetchServerVersion(i,t).then(s=>{this.read({currentVersion:s})}).catch(()=>{})})}_fetchServerVersion(t,e){if(!cY(t))return Promise.reject();const i=t.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return ye(i,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(s=>{if(s.data&&s.data.currentVersion)return s.data.currentVersion;throw new lt("tile-layer:version-not-available")})}_getMapName(t){const e=t.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return e?e[2]:void 0}_getDefaultAttribution(t){if(t==null)return null;let e;t=t.toLowerCase();for(let i=0,s=M8.length;i<s;i++)if(e=M8[i],e.toLowerCase().includes(t))return Kr("//static.arcgis.com/attribution/"+e);return null}_getDefaultTileServers(t){if(t==null)return[];const e=t.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,i=t.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return e||i?[t,t.replace(e?/server\.arcgisonline/i:/services\.arcgisonline/i,e?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[MN]}};w([T({readOnly:!0})],wi.prototype,"attributionDataUrl",null),w([T({type:["show","hide","hide-children"]})],wi.prototype,"listMode",void 0),w([T({json:{read:!0,write:!0}})],wi.prototype,"blendMode",void 0),w([T({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],wi.prototype,"isReference",void 0),w([T({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],wi.prototype,"operationalLayerType",void 0),w([T({type:Boolean})],wi.prototype,"resampling",void 0),w([T()],wi.prototype,"sourceJSON",void 0),w([T({type:te})],wi.prototype,"spatialReference",void 0),w([kt("spatialReference",["spatialReference","tileInfo"])],wi.prototype,"readSpatialReference",null),w([T({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],wi.prototype,"path",void 0),w([T({readOnly:!0})],wi.prototype,"sublayers",void 0),w([At("sublayers",{layers:{type:[$f]}})],wi.prototype,"writeSublayers",null),w([T({json:{read:!1,write:!1}})],wi.prototype,"popupEnabled",void 0),w([T()],wi.prototype,"tileServers",null),w([Ne("tileServers")],wi.prototype,"castTileServers",null),w([T({readOnly:!0,json:{read:!1}})],wi.prototype,"type",void 0),w([T(LP)],wi.prototype,"url",void 0),wi=a5=w([W("esri.layers.TileLayer")],wi);const MN=Symbol("default-fetch-tile");wi.prototype.fetchTile[MN]=!0;const EN=wi,ayt=Object.freeze(Object.defineProperty({__proto__:null,default:EN},Symbol.toStringTag,{value:"Module"})),IN="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps202310251652_new/MapServer",dht={url:IN,title:"USA Supply Chain Network",visible:!0},gg=new EN(dht),fht=()=>[gg],yht=1e3,mht=t=>{It(()=>t.updating,e=>{})};let Ro;const AN=document.getElementById("feature-node"),ght=t=>{t.when(()=>{t.on("click",e=>bht(e,t,AN)),Ro=new eP,Ro.tolerance=3,Ro.layerIds=[0],Ro.layerOption="top",Ro.width=t.width,Ro.height=t.height})},vht={1:"Supplier",2:"Consignee",3:"Supplier and Consignee"},bht=(t,e,i)=>{Ro.geometry=t.mapPoint,Ro.mapExtent=e.extent,grt(IN,Ro).then(s=>{console.log("identify is called response.results",s.results.length);const a=s.results;if(a.length==0)return;const d=a[0],{Address:y,lat:m,long:_,type:S,Id:I,routes:A}=d.feature.attributes;d.layerName;const L=`<b>Company Type :</b><br/> ${vht[S]} <br/><br/> <b>Address:</b><br/> ${y}<br/><b>Lat Lng</b>:<br/> ${m},${_}`;i.innerHTML=L,wht(JSON.parse(A),e)})},wht=(t,e)=>{console.log("Routes::",t.length);const i=new Set,s=t.map(m=>{const _=[],S=m.split(",");i.add(S[0]+";"+S[1]),i.add(S[2]+";"+S[3]);const I=S[0].split(";"),A=S[2].split(";");_.push([I,A]);var P=new Zr({paths:_,spatialReference:{wkid:4326}}),L=tP(P,yht);return new io({geometry:L,symbol:$ht(S[1],S[4])})});e.graphics.removeAll(),gg.sublayers.at(0),gg.visible=!1;const a=Iht(e,Array.from(i)),y=new t0({points:a}).extent;e.goTo(y).then(()=>{e.graphics.addMany(s)})},_ht=2,kN=1,ON={type:"simple-line",cap:"round",join:"round",marker:{color:"green",placement:"begin",style:"arrow"}},PN={...ON,color:[150,75,0],style:"short-dot",width:_ht},xht={...ON,color:[4,90,141],width:kN},CN={...PN,marker:{color:"red",placement:"begin-end",style:"arrow"}},Sht={...CN,color:[4,90,141],width:kN},$ht=(t,e)=>{let i;return t==1&&e==1?i=PN:t==1&&e==2?i=xht:t==2&&e==1?i=CN:i=Sht,i},Tht=t=>{t.ui.add(["clearBtn"],"top-left");var e=document.getElementById("clearBtn");e.addEventListener("click",i=>{t.graphics.length>0&&t.graphics.removeAll(),gg.visible=!0,AN.innerHTML=""})},Mht={1:[0,0,255],2:[255,0,0],3:[0,255,0]},Eht={1:[255,255,0],2:[255,0,250],3:[0,250,255]},Iht=(t,e)=>{const i=[],s=e.map(a=>{const d=a.split(";"),y={type:"point",longitude:d[0],latitude:d[1],spatialReference:{wkid:4326}};i.push([d[0],d[1]]);const m={type:"simple-marker",color:Mht[d[2]],outline:{color:Eht[d[2]],width:1}};return new io({geometry:y,symbol:m})});return t.graphics.addMany(s),i},Aht=t=>{const e=new yst({view:t,listItemCreatedFunction:i=>{const s=i.item;s.layer.type!="group"&&(s.panel={content:"legend",open:!1})}});t.ui.add(e,"top-right")},kht=!0;console.warn=(t,e)=>{console.log("%c "+t+"  "+e,"color: red; font-weight:bold")};console.warn("The develop mode::",kht);(async()=>await bt(()=>Promise.resolve({}),["assets/mapfromonline-31fe072e.css"]))();const E8={zoom:2,baseMapID:"hybrid",center:[-80.22591218922629,25.76594796317374]};const Oht=new AM({basemap:"streets-vector",layers:fht()}),zp=new oit({container:"viewDiv",map:Oht,zoom:E8.zoom,center:E8.center,popupEnabled:!0});zp.when(()=>{Aht(zp),Tht(zp),ght(zp)});mht(zp);export{t0 as $,Rc as A,xe as B,mn as C,Es as D,x5 as E,jut as F,ye as G,mu as H,Jp as I,mt as J,Yt as K,Ect as L,D3 as M,to as N,ea as O,Oct as P,Rg as Q,YI as R,Rl as S,Mct as T,vg as U,Vt as V,oa as W,on as X,mA as Y,_5 as Z,bt as _,xn as a,jh as a$,Zr as a0,AV as a1,o5 as a2,Id as a3,$g as a4,lu as a5,dF as a6,n0t as a7,Yf as a8,zq as a9,y_ as aA,Eat as aB,Tu as aC,N1t as aD,DM as aE,Yh as aF,qq as aG,Pht as aH,dn as aI,H0t as aJ,YQ as aK,p$ as aL,Om as aM,Cm as aN,Ad as aO,CG as aP,Qht as aQ,e0t as aR,_i as aS,i0 as aT,hb as aU,f$ as aV,d$ as aW,Qi as aX,Pft as aY,kl as aZ,Sl as a_,Fq as aa,Dq as ab,au as ac,OG as ad,Y0 as ae,sct as af,Uq as ag,w as ah,T as ai,Ne as aj,io as ak,W as al,Rt as am,qlt as an,Me as ao,Jc as ap,$u as aq,qc as ar,Pet as as,zt as at,ipt as au,ept as av,eK as aw,jl as ax,cS as ay,Jq as az,zg as b,MT as b$,KE as b0,YE as b1,W4 as b2,nf as b3,Yet as b4,bu as b5,p0 as b6,qh as b7,r_ as b8,NR as b9,FQ as bA,S3 as bB,Rk as bC,Wz as bD,Ml as bE,te as bF,sD as bG,T5 as bH,Dl as bI,wl as bJ,Xd as bK,uut as bL,Ur as bM,Xn as bN,Nl as bO,S$ as bP,grt as bQ,Ift as bR,eP as bS,Md as bT,ng as bU,bi as bV,lct as bW,Bi as bX,Sr as bY,Mft as bZ,pn as b_,rpt as ba,k_ as bb,Ort as bc,Wn as bd,nd as be,JZ as bf,odt as bg,ldt as bh,Oi as bi,pu as bj,XC as bk,g_ as bl,E1t as bm,jC as bn,q$ as bo,Qh as bp,Ae as bq,Um as br,No as bs,Tst as bt,jk as bu,Wc as bv,lX as bw,e4 as bx,dZ as by,AZ as bz,Dk as c,Qct as c$,zD as c0,K9 as c1,Xr as c2,ei as c3,Ok as c4,_e as c5,hct as c6,zk as c7,vl as c8,Fg as c9,Cct as cA,Tct as cB,Rct as cC,EV as cD,IV as cE,e_ as cF,EM as cG,_ct as cH,t_ as cI,Q5 as cJ,iyt as cK,ryt as cL,eyt as cM,bg as cN,kt as cO,f1t as cP,p1t as cQ,Pr as cR,Nk as cS,cm as cT,Y0t as cU,Di as cV,g4 as cW,Fd as cX,OM as cY,Wct as cZ,Aft as c_,HT as ca,Yn as cb,nv as cc,f0t as cd,$k as ce,hk as cf,Tk as cg,wZ as ch,Wpt as ci,OZ as cj,jd as ck,Jpt as cl,Fc as cm,zht as cn,Jo as co,Qd as cp,D1t as cq,Bh as cr,vV as cs,Pct as ct,lN as cu,B1t as cv,v8 as cw,oN as cx,wn as cy,Km as cz,q5 as d,sv as d$,Jct as d0,Yct as d1,Kct as d2,Zct as d3,ts as d4,ot as d5,Nm as d6,MY as d7,nk as d8,ze as d9,hO as dA,oft as dB,mtt as dC,tft as dD,lft as dE,Qdt as dF,V8 as dG,G8 as dH,ZN as dI,sj as dJ,bct as dK,pV as dL,jct as dM,xct as dN,Y5 as dO,dM as dP,fV as dQ,Ab as dR,OV as dS,_V as dT,wct as dU,$ct as dV,k0t as dW,ok as dX,tX as dY,Hn as dZ,Rd as d_,Mot as da,p4 as db,Alt as dc,jht as dd,Dht as de,Ie as df,Lv as dg,TC as dh,YN as di,EX as dj,Tot as dk,Xt as dl,Iv as dm,Uat as dn,cN as dp,Jk as dq,Ght as dr,gt as ds,xl as dt,Ol as du,Zk as dv,v5 as dw,qdt as dx,Hdt as dy,Gdt as dz,wy as e,cY as e$,MV as e0,Yo as e1,Al as e2,Wg as e3,Ict as e4,Bct as e5,p5 as e6,s_ as e7,iu as e8,v1 as e9,Xot as eA,J1t as eB,t5 as eC,Ic as eD,ZP as eE,Gst as eF,Ust as eG,At as eH,wC as eI,_c as eJ,lC as eK,knt as eL,gu as eM,xd as eN,Ko as eO,re as eP,tf as eQ,pr as eR,zK as eS,Ej as eT,r1t as eU,r3 as eV,td as eW,Hw as eX,jP as eY,nct as eZ,gn as e_,iP as ea,gV as eb,Gh as ec,fc as ed,Bp as ee,Wi as ef,G1 as eg,y3 as eh,TY as ei,Rot as ej,M1t as ek,jot as el,$1t as em,Lr as en,er as eo,l0 as ep,T1t as eq,wlt as er,_lt as es,xlt as et,Ms as eu,dN as ev,pN as ew,G1t as ex,MC as ey,F1t as ez,aX as f,Ho as f$,tK as f0,As as f1,Vy as f2,Vht as f3,J_ as f4,G7 as f5,fe as f6,N0t as f7,P0t as f8,F0t as f9,zpt as fA,Su as fB,tk as fC,ilt as fD,Blt as fE,aht as fF,eG as fG,Ec as fH,Mst as fI,Vft as fJ,_N as fK,syt as fL,Bft as fM,H5 as fN,Gft as fO,Est as fP,$st as fQ,GC as fR,Vot as fS,zft as fT,rht as fU,Ee as fV,e0 as fW,oo as fX,Bot as fY,HC as fZ,JE as f_,Eut as fa,NS as fb,PF as fc,Ts as fd,ki as fe,Jr as ff,Wo as fg,mat as fh,zV as fi,G$ as fj,QP as fk,sht as fl,oC as fm,nC as fn,FP as fo,eC as fp,iC as fq,hv as fr,tC as fs,NP as ft,Nlt as fu,yu as fv,tu as fw,Hct as fx,Uot as fy,elt as fz,at as g,jj as g$,Nd as g0,But as g1,Hut as g2,Uft as g3,Olt as g4,q_ as g5,Wft as g6,Jft as g7,LP as g8,Vpt as g9,I0t as gA,SW as gB,rz as gC,rX as gD,nX as gE,dr as gF,Ch as gG,Xdt as gH,utt as gI,Wdt as gJ,JN as gK,pht as gL,Rht as gM,Dut as gN,pY as gO,Rut as gP,U8 as gQ,jc as gR,$c as gS,Cut as gT,rj as gU,un as gV,Ng as gW,Jd as gX,Kr as gY,Jut as gZ,Zht as g_,Gpt as ga,Lt as gb,z0t as gc,Yd as gd,Eft as ge,JB as gf,VC as gg,cF as gh,M4 as gi,fm as gj,hnt as gk,unt as gl,Xct as gm,_u as gn,Zo as go,l3 as gp,Qe as gq,a3 as gr,u3 as gs,Dm as gt,JI as gu,vut as gv,w_ as gw,p7 as gx,Dct as gy,_0t as gz,f5 as h,qW as h$,y1t as h0,bot as h1,oe as h2,XV as h3,yG as h4,Il as h5,Dj as h6,E0t as h7,H1t as h8,t0t as h9,Fht as hA,bQ as hB,Bht as hC,WT as hD,wm as hE,YT as hF,cct as hG,pz as hH,ZF as hI,B5 as hJ,_m as hK,UT as hL,act as hM,_z as hN,KN as hO,XN as hP,nM as hQ,CF as hR,NF as hS,LF as hT,AF as hU,IF as hV,KH as hW,DI as hX,iz as hY,hW as hZ,bn as h_,TM as ha,Fct as hb,Sct as hc,Xnt as hd,s1t as he,c4 as hf,_B as hg,qA as hh,nb as hi,z1t as hj,j8 as hk,mlt as hl,glt as hm,vlt as hn,Nct as ho,W1t as hp,gT as hq,hT as hr,L1t as hs,hN as ht,rN as hu,jD as hv,qD as hw,jg as hx,Xut as hy,gl as hz,UN as i,Y2 as i$,eX as i0,Zut as i1,Gut as i2,C5 as i3,L5 as i4,yX as i5,$X as i6,OF as i7,uW as i8,uz as i9,H_ as iA,$at as iB,wat as iC,O1t as iD,U1t as iE,bat as iF,Sat as iG,kct as iH,Sst as iI,Hot as iJ,j1t as iK,r0t as iL,s0t as iM,i0t as iN,pct as iO,N_ as iP,yct as iQ,Up as iR,yat as iS,sat as iT,hat as iU,_at as iV,q1t as iW,hH as iX,b1t as iY,IL as iZ,K2 as i_,FI as ia,NH as ib,qut as ic,as as id,Vj as ie,uT as ig,cT as ih,Gj as ii,Is as ij,wz as ik,xz as il,Iz as im,Cz as io,sM as ip,iM as iq,rM as ir,Pz as is,Dz as it,Fz as iu,vz as iv,Dg as iw,Fft as ix,Iut as iy,wg as iz,qht as j,h5 as j$,R1t as j0,Re as j1,A1t as j2,$Q as j3,xB as j4,V1t as j5,KC as j6,Wht as j7,sz as j8,Pc as j9,Kut as jA,Ont as jB,PT as jC,kT as jD,hu as jE,lf as jF,Xh as jG,cM as jH,jW as jI,I5 as jJ,j6 as jK,gct as jL,Db as jM,jb as jN,WC as jO,Put as jP,ta as jQ,eT as jR,$8 as jS,Za as jT,qft as jU,MS as jV,QR as jW,QE as jX,oO as jY,Cg as jZ,Hft as j_,Int as ja,Fm as jb,_nt as jc,xnt as jd,A6 as je,JT as jf,XF as jg,JF as jh,KT as ji,Qy as jj,pZ as jk,kF as jl,lot as jm,dv as jn,v0 as jo,zH as jp,dct as jq,Nht as jr,xj as js,k5 as jt,VN as ju,$m as jv,_r as jw,irt as jx,nrt as jy,St as jz,Xk as k,tyt as k$,u5 as k0,S_ as k1,Zd as k2,QB as k3,ws as k4,WI as k5,n9 as k6,Sd as k7,Rr as k8,Zg as k9,Qr as kA,NB as kB,Lg as kC,LB as kD,O0t as kE,Xht as kF,GN as kG,__ as kH,x0t as kI,w0t as kJ,$l as kK,Y7 as kL,c0 as kM,Act as kN,Lct as kO,N6 as kP,sX as kQ,XY as kR,WY as kS,i_ as kT,Nut as kU,Qn as kV,sT as kW,Ast as kX,S1t as kY,Td as kZ,sa as k_,HV as ka,BV as kb,hV as kc,E6 as kd,Fi as ke,Wut as kf,rP as kg,oht as kh,Pat as ki,kat as kj,lR as kk,m0 as kl,pC as km,Unt as kn,gC as ko,$C as kp,fg as kq,aC as kr,yd as ks,dY as kt,Un as ku,CW as kv,A$ as kw,Sg as kx,kd as ky,xr as kz,hX as l,LH as l$,Q1t as l0,X1t as l1,Xc as l2,z8 as l3,Out as l4,o6 as l5,pI as l6,FF as l7,uct as l8,BT as l9,mc as lA,S0t as lB,A0t as lC,zI as lD,tlt as lE,Fut as lF,Vdt as lG,vct as lH,yF as lI,V5 as lJ,Kft as lK,Uht as lL,Zft as lM,Yft as lN,oct as lO,d1t as lP,L4 as lQ,qct as lR,mN as lS,Lut as lT,fct as lU,Kht as lV,Yht as lW,Jht as lX,bj as lY,VH as lZ,CH as l_,qT as la,oP as lb,Upt as lc,qR as ld,U as le,Uut as lf,hht as lg,Udt as lh,eft as li,vet as lj,ift as lk,get as ll,Zdt as lm,yet as ln,Kdt as lo,Ydt as lp,AO as lq,rft as lr,Bdt as ls,Eet as lt,Iet as lu,aft as lv,nft as lw,sft as lx,hft as ly,Jdt as lz,Mg as m,pg as m0,F8 as m1,Qat as m2,QC as m3,kdt as m4,PX as m5,CX as m6,IX as m7,mz as m8,aD as m9,$0t as ma,T0t as mb,pW as mc,cW as md,Hm as me,M0t as mf,$D as mg,X0t as mh,Tft as mi,e1t as mj,u1t as mk,oyt as ml,ayt as mm,Ai as n,Ldt as o,si as p,lt as q,ff as r,Ke as s,Lht as t,XE as u,Qo as v,Ndt as w,Je as x,gd as y,It as z};
