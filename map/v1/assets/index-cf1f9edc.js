(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();function g(t,e,i,r){var n,l=arguments.length,d=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,e,i,r);else for(var y=t.length-1;y>=0;y--)(n=t[y])&&(d=(l<3?n(d):l>3?n(e,i,d):n(e,i))||d);return l>3&&d&&Object.defineProperty(e,i,d),d}function gv(t,e,i,r){function n(l){return l instanceof i?l:new i(function(d){d(l)})}return new(i||(i=Promise))(function(l,d){function y($){try{x(r.next($))}catch(E){d(E)}}function b($){try{x(r.throw($))}catch(E){d(E)}}function x($){$.done?l($.value):n($.value).then(y,b)}x((r=r.apply(t,e||[])).next())})}const $U="modulepreload",TU=function(t){return"/map/v1/"+t},cT={},le=function(e,i,r){if(!i||i.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(i.map(l=>{if(l=TU(l),l in cT)return;cT[l]=!0;const d=l.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(!!r)for(let $=n.length-1;$>=0;$--){const E=n[$];if(E.href===l&&(!d||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${y}`))return;const x=document.createElement("link");if(x.rel=d?"stylesheet":$U,d||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),d)return new Promise(($,E)=>{x.addEventListener("load",$),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e())};function IU(t){return t&&t.release&&typeof t.release=="function"}function EU(t){return t&&t.acquire&&typeof t.acquire=="function"}let Ph=class hx{constructor(e,i,r,n=1,l=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(l),this._initialSize=l,this._ctor)for(let d=0;d<l;d++)this._pool[d]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(hx.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):EU(i)&&i.acquire(...e),i}release(e){e&&!hx.test.disabled&&(this._releaseFunction?this._releaseFunction(e):IU(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Ph.test={disabled:!1};function AU(t){t.length=0}let ms=class{constructor(e=50,i=50){this._pool=new Ph(Array,void 0,AU,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return t3.acquire()}static release(e){return t3.release(e)}static prune(){t3.prune()}};const t3=new ms(100);function Y_e(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function kU(t,e){for(const i of t)if(i!=null&&e(i))return i}function Gb(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function eh(t,e){return t!=null?e(t):null}function fr(t,e){return Pd(t,e),t}function Pd(t,e){if(t==null)throw new Error(e??"value is None")}function ei(t){return t==null||t.destroy(),null}function K_e(t){return t==null||t.dispose(),null}function Mi(t){return t==null||t.remove(),null}function Fy(t){return t==null||t.abort(),null}function Z_e(t){return t==null||t.release(),null}function PU(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function CU(t){return null}function X_e(t,e){const i=new Array;for(const r of t)i.push(r!=null?e(r):null);return i}function Q_e(t,e){for(const i of t)eh(i,e)}function e3e(t){return t}let Fs=class cx{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Gb(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Gb(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof cx)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof cx?i.removeAll():i.remove()}};const NP=Symbol("Accessor-beforeDestroy");function S2(t){return Cl(()=>t.forEach(e=>e!=null&&e.remove()))}function Cl(t){return{remove:()=>{t&&(t(),t=void 0)}}}let i3=class Qh{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Qh._m}getInt(){return this._seed=(Qh._a*this._seed+Qh._c)%Qh._m,this._seed}getFloat(){return this.getInt()/(Qh._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Qh._m*r}};i3._m=2147483647,i3._a=48271,i3._c=0;const t3e=1.5;function OU(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):t.filter((i,r,n)=>n.indexOf(i)===r)}function M2(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function i3e(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function r3e(t,e,i){let r,n;return i?(r=e.filter(l=>!t.some(d=>i(d,l))),n=t.filter(l=>!e.some(d=>i(d,l)))):(r=e.filter(l=>!t.includes(l)),n=t.filter(l=>!e.includes(l))),{added:r,removed:n}}function s3e(t){return t&&typeof t.length=="number"}const LU=!!Array.prototype.fill;function n3e(t,e){if(LU)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function o3e(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let zP=class{constructor(){this.last=0}};const VP=new zP;function dx(t,e,i,r){r=r||VP;const n=Math.max(0,r.last-10);for(let d=n;d<i;++d)if(t[d]===e)return r.last=d,d;const l=Math.min(n,i);for(let d=0;d<l;++d)if(t[d]===e)return r.last=d,d;return-1}function DU(t,e,i,r){const n=i??t.length,l=dx(t,e,n,r);if(l!==-1)return t[l]=t[n-1],i==null&&t.pop(),e}const Qn=new Set;function RU(t,e,i=t.length,r=e.length,n,l){if(r===0||i===0)return i;Qn.clear();for(let y=0;y<r;++y)Qn.add(e[y]);n=n||VP;const d=Math.max(0,n.last-10);for(let y=d;y<i;++y)if(Qn.has(t[y])&&(l&&l.push(t[y]),Qn.delete(t[y]),t[y]=t[i-1],--i,--y,Qn.size===0||i===0))return Qn.clear(),i;for(let y=0;y<d;++y)if(Qn.has(t[y])&&(l&&l.push(t[y]),Qn.delete(t[y]),t[y]=t[i-1],--i,--y,Qn.size===0||i===0))return Qn.clear(),i;return Qn.clear(),i}function jU(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Go(t,e){return t!=null}let th;function ce(t){return typeof th[t]=="function"?th[t]=th[t](globalThis):th[t]}var PP,CP,OP,LP;th=(PP=globalThis.dojoConfig)!=null&&PP.has||(CP=globalThis.esriConfig)!=null&&CP.has?{...(OP=globalThis.dojoConfig)==null?void 0:OP.has,...(LP=globalThis.esriConfig)==null?void 0:LP.has}:{},ce.add=(t,e,i,r)=>((r||th[t]===void 0)&&(th[t]=e),i&&ce(t)),ce.cache=th,ce.add("esri-deprecation-warnings",!0),ce.add("esri-force-fullscreen-debug",!1),(()=>{var e;ce.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ce.add("host-browser",t),ce.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ce.add("dom",t),ce("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,l=parseFloat(n);if(ce.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ce.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ce.add("khtml",n.includes("Konqueror")?l:void 0),ce.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ce.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ce.add("webkit",!ce("wp")&&!ce("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ce.add("chrome",!ce("edge")&&!ce("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ce.add("android",!ce("wp")&&parseFloat(r.split("Android ")[1])||void 0),ce.add("safari",!n.includes("Safari")||ce("wp")||ce("chrome")||ce("android")||ce("edge")||ce("opr")?void 0:parseFloat(n.split("Version/")[1])),ce.add("mac",n.includes("Macintosh")),!ce("wp")&&/(iPhone|iPod|iPad)/.test(r)){const d=RegExp.$1.replace(/P/,"p"),y=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",b=parseFloat(y.replace(/_/,".").replaceAll("_",""));ce.add(d,b),ce.add("ios",b)}ce("webkit")||(!r.includes("Gecko")||ce("wp")||ce("khtml")||ce("edge")||ce.add("mozilla",l),ce("mozilla")&&ce.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ce.add("esri-mobile",e),i&&ce.add("esri-iPhone",i),ce.add("esri-geolocation",!!navigator.geolocation)}ce.add("esri-wasm","WebAssembly"in globalThis),ce.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ce.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ce.add("esri-atomics","Atomics"in globalThis),ce.add("esri-workers","Worker"in globalThis),ce.add("web-feat:cache","caches"in globalThis),ce.add("esri-workers-arraybuffer-transfer",!ce("safari")||Number(ce("safari"))>=12),ce.add("workers-pool-size",8),ce.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ce.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ce.add("featurelayer-animation-enabled",!0),ce.add("featurelayer-snapshot-enabled",!0),ce.add("featurelayer-snapshot-point-min-threshold",8e4),ce.add("featurelayer-snapshot-point-max-threshold",4e5),ce.add("featurelayer-snapshot-point-coverage",.1),ce.add("featurelayer-advanced-symbols",!1),ce.add("featurelayer-pbf",!0),ce.add("featurelayer-pbf-statistics",!1),ce.add("feature-layers-workers",!0),ce.add("feature-polyline-generalization-factor",1),ce.add("mapview-transitions-duration",200),ce.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ce.add("mapserver-pbf-version-support",10.81),ce.add("mapservice-popup-identify-max-tolerance",20),ce.add("heatmap-allow-raster-fallback",!1),ce.add("heatmap-force-raster",!1),ce("host-webworker")||ce("host-browser")&&(ce.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ce.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ce.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ce.add("esri-image-decode",!1,!0,!0)})}return!1}),ce.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function l3e(t){return t instanceof ArrayBuffer}function sM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function BP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function GP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function nM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function UP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function oM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function qP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function $2(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function T2(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function FU(t){return!("buffer"in t)}function u3e(t){return t!=null?FU(t)?8*t.length+12:t.byteLength+NU:0}const NU=145,h3e=1024;function c3e(t){return T2(t)||$2(t)||oM(t)||nM(t)||sM(t)}function d3e(t){return T2(t)||$2(t)}function p3e(t){return T2(t)?179769e303:$2(t)?3402823e32:qP(t)?4294967295:UP(t)?65535:BP(t)||GP(t)?255:oM(t)?2147483647:nM(t)?32767:sM(t)?127:256}function HP(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&HP(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function ae(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=YP(t);if(e!=null)return e;if(Ub(t))return t.clone();if(WP(t))return t.map(ae);if(JP(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=ae(t[r]);return i}function px(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=YP(t);if(e!=null)return e;if(WP(t)){let i=!0;const r=t.map(n=>{const l=px(n);return n!=null&&l==null&&(i=!1),l});return i?r:null}if(Ub(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!JP(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],l=px(n);if(n!=null&&l==null)return null;i[r]=l}return i}return null}function Ub(t){return typeof t.clone=="function"}function WP(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function JP(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function dT(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function YP(t){if(sM(t)||BP(t)||GP(t)||nM(t)||UP(t)||oM(t)||qP(t)||$2(t)||T2(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,ae(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(ae(i));return e}return null}function aM(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function KP(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&M2(t,e):t instanceof Set?e instanceof Set&&VU(t,e):t instanceof Map?e instanceof Map&&BU(t,e):!!dT(t)&&dT(e)&&zU(t,e))}function zU(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function VU(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function BU(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function mr(t){return t.__accessor__??null}function GU(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function vv(t,e,i){return i?qb(t,e,{policy:i,path:""}):qb(t,e,null)}function qb(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const l=n;let d=null,y="merge";if(i&&(d=i.path?`${i.path}.${n}`:n,y=i.policy(d)),y==="replace"||y==="replace-arrays"&&Array.isArray(r[l]))return r[l]=e[l],r;if(r[l]===void 0)return r[l]=ae(e[l]),r;let b=r[l],x=e[l];if(b===x)return r;if(Array.isArray(x)||Array.isArray(r))b=b?Array.isArray(b)?r[l]=b.concat():r[l]=[b]:r[l]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach($=>{b.includes($)||b.push($)}));else if(x&&typeof x=="object")if(i){const $=i.path;i.path=d,r[l]=qb(b,x,i),i.path=$}else r[l]=qb(b,x,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[l]=x);return r},t||{}):t}function ZP(t){return Array.isArray(t)?t:t.split(".")}function pT(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function UU(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...pT(i));return e}return pT(t)}function XP(t,e,i,r){const n=UU(e);if(n.length!==1){const l=n.map(d=>r(t,d,i));return S2(l)}return r(t,n[0],i)}function QP(t){let e=!1;return()=>{e||(e=!0,t())}}function eC(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=mr(e);return GU(r,i)?r.get(i):e[i]}function tC(t,e,i){if(t==null)return t;const r=eC(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:tC(r,e,i+1)}function mm(t,e,i=0){return typeof e!="string"||e.includes(".")?tC(t,ZP(e),i):eC(e,t)}function Hb(t,e){return mm(t,e)}function fT(t,e){return mm(e,t)!==void 0}function gm(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=ae(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function I2(t,e){const i=gm(t);let r=i[e];return r||(r=i[e]={}),r}function qU(t,e){return vv(t,e,WU)}const HU=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function WU(t){return HU.test(t)?"replace":"merge"}function iC(t,e,i=!1){return sC(t,e,i)}function vm(t,e){if(e!=null)return e[t]||rC(t.split("."),!1,e)}function es(t,e,i){const r=t.split("."),n=r.pop(),l=rC(r,!0,i);l&&n&&(l[n]=e)}function rC(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function sC(t,e,i){return e?Object.keys(e).reduce((r,n)=>{let l=r[n],d=e[n];return l===d?r:l===void 0?(r[n]=ae(d),r):(Array.isArray(d)||Array.isArray(r)?(l=l?Array.isArray(l)?r[n]=l.concat():r[n]=[l]:r[n]=[],d&&(Array.isArray(d)||(d=[d]),i?d.forEach(y=>{l.includes(y)||l.push(y)}):r[n]=d.concat())):d&&typeof d=="object"?r[n]=sC(l,d,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=d),r)},t||{}):t}var DP;const Ft={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(DP=globalThis.location)==null?void 0:DP.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(iC(Ft,globalThis.esriConfig,!0),delete Ft.has),!Ft.assetsPath){{const t="4.27";Ft.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ft.defaultAssetsPath=Ft.assetsPath}const JU=/\{([^\}]+)\}/g;function yT(t){return t??""}function Bn(t,e){return t.replaceAll(JU,typeof e=="object"?(i,r)=>yT(vm(r,e)):(i,r)=>yT(e(r)))}function f3e(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function lM(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function y3e(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function fx(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const mT={info:0,warn:1,error:2,none:3};let ge=class qr{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,qr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=qr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=qr._loggers;return qr._loggers=e,i},set throttlingDisabled(e){qr._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,qr._loggers.get(e)||new qr({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!qr._throttlingDisabled){const n=this._argsToKey(r),l=this._loggedMessages[e].get(n);if(i==="once"&&l!=null||i==="oncePerTick"&&l&&l>=qr._tickCounter)return;this._loggedMessages[e].set(n,qr._tickCounter),qr._scheduleTickCounterIncrement()}for(const n of Ft.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=Ft.log.level||"warn";return mT[this._parentWithMember("level",i)]<=mT[e]}_argsToKey(...e){return lM(JSON.stringify(e,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}static _scheduleTickCounterIncrement(){qr._tickCounterScheduled||(qr._tickCounterScheduled=!0,Promise.resolve().then(()=>{qr._tickCounter++,qr._tickCounterScheduled=!1}))}};ge._loggers=new Map,ge._tickCounter=0,ge._tickCounterScheduled=!1,ge._throttlingDisabled=!1;var wl;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(wl||(wl={}));let YU=class{constructor(e,i){this._observers=e,this._observer=i}remove(){jU(this._observers,this._observer)}},nC=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return KU;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const l=i.length;for(let d=0;d<l;++d){const y=i[d];if(y.destroyed)n=!0;else if(y===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new YU(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const KU=Cl();var Le;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Le||(Le={}));const yx=Le.USER+1;function vs(t){switch(t){case"defaults":return Le.DEFAULTS;case"service":return Le.SERVICE;case"portal-item":return Le.PORTAL_ITEM;case"web-scene":return Le.WEB_SCENE;case"web-map":return Le.WEB_MAP;case"link-chart":return Le.LINK_CHART;case"user":return Le.USER;default:return null}}function Ny(t){switch(t){case Le.DEFAULTS:return"defaults";case Le.SERVICE:return"service";case Le.PORTAL_ITEM:return"portal-item";case Le.WEB_SCENE:return"web-scene";case Le.WEB_MAP:return"web-map";case Le.LINK_CHART:return"link-chart";case Le.USER:return"user"}return void 0}function ZU(t){return Ny(t)}var Ht;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ht||(Ht={}));const Wb={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Wf=[];let Q1=Wb;function nt(t){Q1.onObservableAccessed(t)}let bv=!1,wv=!1;function Ol(t,e,i){if(bv)return uM(t,e,i);oC(t);const r=e.call(i);return aC(),r}function XU(t,e){return Ol(Wb,t,e)}function uM(t,e,i){const r=bv;bv=!0,oC(t);let n=null;try{n=e.call(i)}catch(l){wv&&ge.getLogger("esri.core.accessorSupport.tracking").error(l)}return aC(),bv=r,n}function oC(t){Q1=t,Wf.push(t)}function aC(){const t=Wf.length;if(t>1){const e=Wf.pop();Q1=Wf[t-2],e.onTrackingEnd()}else if(t===1){const e=Wf.pop();Q1=Wb,e.onTrackingEnd()}else Q1=Wb}function lC(t,e){const i=e.observerObject;if(i.flags&Ht.DepTrackingInitialized)return;const r=wv;wv=!1,i.flags&Ht.AutoTracked?uM(e,e.metadata.get,t):uC(t,e),wv=r}const QU=[];function uC(t,e){const i=e.observerObject;i.flags&Ht.ExplicitlyTracking||(i.flags|=Ht.ExplicitlyTracking,uM(e,()=>{const r=e.metadata.dependsOn||QU;for(const n of r)if(typeof n!="string"||n.includes(".")){const l=ZP(n);for(let d=0,y=t;d<l.length&&y!=null&&typeof y=="object";++d)y=gT(y,l[d],d!==l.length-1)}else gT(t,n,!1)}),i.flags&=~Ht.ExplicitlyTracking)}function gT(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const l=parseInt(r,10);if(!isNaN(l))return Array.isArray(t)?t[l]:t.at(l)}const n=mr(t);if(n){const l=n.propertiesByName.get(r);l&&(nt(l.observerObject),lC(t,l))}return i?t[r]:void 0}let vT=class{constructor(e,i){this.propertyName=e,this.metadata=i,this.observerObject=new eq,this._accessed=null,this._handles=null,this.observerObject.flags=Ht.Dirty|(i.nonNullable?Ht.NonNullable:0)|(i.hasOwnProperty("value")?Ht.HasDefaultValue:0)|(i.get===void 0?Ht.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ht.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){const i=this.observerObject;nt(i);const r=e.store,n=this.propertyName,l=i.flags,d=r.get(n);if(l&Ht.Computing||~l&Ht.Dirty&&r.has(n))return d;i.flags|=Ht.Computing;const y=e.host;let b;l&Ht.AutoTracked?b=Ol(this,this.metadata.get,y):(uC(y,this),b=this.metadata.get.call(y)),r.set(n,b,Le.COMPUTED);const x=r.get(n);return x===d?i.flags&=~Ht.Dirty:XU(this.commit,this),i.flags&=~Ht.Computing,x}onObservableAccessed(e){if(e===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Ht.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let r=this._handles;r==null&&(r=[],this._handles=r);for(let n=0;n<i.length;++n)r.push(i[n].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Ht.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},eq=class extends nC{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Ht.Overriden&&(this.flags|=Ht.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&Ht.Dirty&&this.onCommitted(),super.destroy()}},tq=class hC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new hC;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,ae(r))}),i}get(e){return this._values.get(e)}originOf(){return Le.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function rg(t,e,i){return t!==void 0}function bT(t,e,i,r){return t!==void 0&&(!(i==null&&t.observerObject.flags&Ht.NonNullable)||(r.lifecycle,wl.INITIALIZING,!1))}function iq(t){return t&&typeof t.destroy=="function"}ge.getLogger("esri.core.accessorSupport.Properties");let rq=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=wl.INITIALIZING,this.store=new tq,this._origin=Le.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new vT(r,i[r]);this.propertiesByName.set(r,n)}this.metadatas=i}initialize(){this.lifecycle=wl.CONSTRUCTING}constructed(){this.lifecycle=wl.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&iq(r)&&(r.destroy(),~i.observerObject.flags&Ht.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==wl.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);nt(i.observerObject);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.observerObject.flags&Ht.HasDefaultValue)return"defaults"}return Ny(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(rg(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);rg(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!rg(n))return"";const l=new Set,d=Ol({onObservableAccessed:b=>l.add(b),onTrackingEnd:()=>{}},()=>{var b;return(b=n.metadata.get)==null?void 0:b.call(e)});let y=`${r}${e.declaredClass.split(".").pop()}.${i}: ${d}
`;if(l.size===0)return y;r+="  ";for(const b of l)b instanceof vT&&(y+=`${r}${b.propertyName}: undefined
`);return y}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(rg(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.observerObject.flags&Ht.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e),r=i==null?void 0:i.observerObject;r&&r.flags&Ht.Overriden&&(r.flags&=~Ht.Overriden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!bT(r,e,i,this))return;const n=r.metadata.cast;if(n){const l=this._cast(n,i),{valid:d,value:y}=l;if(r3.release(l),!d)return;i=y}r.observerObject.flags|=Ht.Overriden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!bT(r,e,i,this))return;const n=r.metadata.cast;if(n){const d=this._cast(n,i),{valid:y,value:b}=d;if(r3.release(d),!y)return;i=b}const l=r.metadata.set;l?l.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=vs(e)}getDefaultOrigin(){return Ny(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==wl.INITIALIZING?this._origin:Le.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,l=e.propertyName;n.has(l,r)&&aM(i,n.get(l))&&~e.observerObject.flags&Ht.Overriden&&r===n.originOf(l)||(e.invalidate(),n.set(l,i,r),e.commit(),lC(this.host,e))}_cast(e,i){const r=r3.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},sq=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const r3=new Ph(sq);function nq(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>r===""?"$":(vm(r,e)??"").toString())}let cC=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&nq(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},se=class dC extends cC{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ae(i)}catch{return"[object]"}}))}}catch(e){throw ge.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new dC(e.name,e.message,e.details)}};se.prototype.type="error";function Jb(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))Jb(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),l=n.splice(n.length-1,1)[0];return void Jb(Hb(t,n),l,i)}const r=t.__accessor__;r!=null&&oq(e,r),t[e]=i}}function oq(t,e){if(ce("esri-unknown-property-errors")&&!aq(t,e))throw new se("set:unknown-property",lq(t,e))}function aq(t,e){return e.metadatas[t]!=null}function lq(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let uq;function hq(){return uq}let pC=class extends Ph{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=CU(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const sg=[];function Yb(t){sg.push(t),sg.length===1&&queueMicrotask(()=>{const e=sg.slice();sg.length=0;for(const i of e)i()})}let ey=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var mx;(function(t){const e=(l,d,y,b)=>{let x=d,$=d;const E=y>>>1,k=l[x-1];for(;$<=E;){$=x<<1,$<y&&b(l[$-1],l[$])<0&&++$;const P=l[$-1];if(b(P,k)<=0)break;l[x-1]=P,x=$}l[x-1]=k},i=(l,d)=>l<d?-1:l>d?1:0;function r(l,d,y,b){d===void 0&&(d=0),y===void 0&&(y=l.length),b===void 0&&(b=i);for(let $=y>>>1;$>d;$--)e(l,$,y,b);const x=d+1;for(let $=y-1;$>d;$--){const E=l[d];l[d]=l[$],l[$]=E,e(l,x,$,b)}}function*n(l,d,y,b){d===void 0&&(d=0),y===void 0&&(y=l.length),b===void 0&&(b=i);for(let $=y>>>1;$>d;$--)e(l,$,y,b),yield;const x=d+1;for(let $=y-1;$>d;$--){const E=l[d];l[d]=l[$],l[$]=E,e(l,x,$,b),yield}}t.sort=r,t.iterableSort=n})(mx||(mx={}));const wT=mx,cq=1.5,dq=1.1;let sd=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new zP,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>_T(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,_T(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=dx(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(dx(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=RU(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){wT.sort(this.data,0,this.length,e)}iterableSort(e){return wT.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const n=this.data[r];if(e.call(i,n,r))return n}}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const l=this.data[n];e.call(i,l,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=l,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,n=this.data;for(let l=0;l<r;++l)e.call(i,n[l],l,n)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}};function _T(t){t.data.length>cq*t.length&&(t.data.length=Math.floor(t.length*dq))}function pq(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(r)}}}}const q0=pq(globalThis);function E2(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function A2(t,e,i){if(!E2(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const n of r)t.addEventListener(n,i);return{remove(){for(const n of r)t.removeEventListener(n,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function fC(t,e,i){if(!E2(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=A2(t,e,n=>{r.remove(),i.call(t,n)});return{remove(){r.remove()}}}const fq={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Ju({key:t}){return fq[t]||t}function $i(t="Aborted"){return new se("AbortError",t)}function ai(t,e="Aborted"){if(Uo(t))throw $i(e)}function k2(t){return t!=null?"aborted"in t?t:t.signal:t}function Uo(t){const e=k2(t);return e!=null&&e.aborted}function On(t){if(is(t))throw t}function gx(t){if(!is(t))throw t}function zn(t,e){const i=k2(t);if(i!=null){if(!i.aborted)return fC(i,"abort",()=>e());e()}}function hM(t,e){const i=k2(t);if(i!=null)return ai(i),fC(i,"abort",()=>e($i()))}function _a(t,e){return k2(e)==null?t:new Promise((i,r)=>{let n=zn(e,()=>r($i()));const l=()=>n=Mi(n);t.then(l,l),t.then(i,r)})}function is(t){return(t==null?void 0:t.name)==="AbortError"}async function n0(t){try{return await t}catch(e){if(!is(e))throw e;return}}async function ws(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(d=>t[d]),n=await ws(r),l={};return i.map((d,y)=>l[d]=n[y]),l}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const l=i[n];return l.status==="fulfilled"?{promise:r,value:l.value}:{promise:r,error:l.reason}}))}async function yq(t){return(await ws(t)).filter(e=>!!e.value).map(e=>e.value)}function P2(t,e=void 0,i){const r=new AbortController;return zn(i,()=>r.abort()),new Promise((n,l)=>{let d=setTimeout(()=>{d=0,n(e)},t);zn(r,()=>{d&&(clearTimeout(d),l($i()))})})}function Vl(t){return t&&typeof t.then=="function"}function vx(t){return Vl(t)?t:Promise.resolve(t)}function nd(t,e=-1){let i,r,n,l,d=null;const y=(...b)=>{if(i){r=b,l&&l.reject($i()),l=Gn();const k=l.promise;if(d){const P=d;d=null,P.abort()}return k}if(n=l||Gn(),l=null,e>0){const k=new AbortController;i=vx(t(...b,k.signal));const P=i;P2(e).then(()=>{i===P&&(l?k.abort():d=k)})}else i=1,i=vx(t(...b));const x=()=>{const k=r;r=n=i=d=null,k!=null&&y(...k)},$=i,E=n;return $.then(x,x),$.then(E.resolve,E.reject),E.promise};return y}function Gn(){let t,e;const i=new Promise((n,l)=>{t=n,e=l}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,l)=>q0.setTimeout(()=>r.reject(l),n),r.promise=i,r}async function xT(t){await Promise.resolve(),ai(t)}function T3e(t){return t}let mq=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},gq=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},bx=0;const bf={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},wx=["prepare","preRender","render","postRender","update","finish"],_x=[],gd=new sd;let vq=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const Kb={frameTasks:gd,willDispatch:!1,clearFrameTasks:bq,dispatch:gC,executeFrameTasks:wq};function H0(t){const e=new gq(t);return _x.push(e),Kb.willDispatch||(Kb.willDispatch=!0,Yb(gC)),e}function M0(t){const e=new mq(t);return gd.push(e),Zb==null&&(bx=performance.now(),Zb=requestAnimationFrame(yC)),new vq(e)}let Zb=null;function bq(t=!1){gd.forAll(e=>{e.removed=!0}),t&&mC()}function yC(){const t=performance.now();Zb=null,Zb=gd.length>0?requestAnimationFrame(yC):null,Kb.executeFrameTasks(t)}function wq(t){const e=t-bx;bx=t;const i=1e3/60,r=Math.max(0,e-i);bf.time=t,bf.frameDuration=i-r;for(let n=0;n<wx.length;n++){const l=performance.now(),d=wx[n];gd.forAll(y=>{var b;y.paused||y.removed||(n===0&&y.ticks++,y.phases[d]&&(bf.elapsedFrameTime=performance.now()-t,bf.deltaTime=y.ticks===0?0:e,(b=y.phases[d])==null||b.call(y,bf)))}),_q[n].record(performance.now()-l)}mC(),xq.record(performance.now()-t)}const ng=new sd;function mC(){gd.forAll(t=>{t.removed&&ng.push(t)}),gd.removeUnorderedMany(ng.data,ng.length),ng.clear()}function gC(){for(;_x.length;){const t=_x.shift();t.isActive&&t.callback()}Kb.willDispatch=!1}function k3e(t=1,e){const i=Gn(),r=()=>{Uo(e)?i.reject($i()):t===0?i():(--t,Yb(()=>r()))};return r(),i.promise}const _q=wx.map(t=>new ey(t)),xq=new ey("total");function Sq(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let Mq=0;function ty(){return++Mq}let C2=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new $q(e),ST.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;ST.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let n=0;n<i.length;++n)e.push(i[n].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},$q=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Tq}};const ST=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Tq(){}let o0=!1;const Xb=[];function vC(t,e){let i=new C2(l),r=null,n=!1;function l(){if(!i||n)return;if(o0)return void _C(l);const y=r;i.clear(),o0=!0,n=!0,r=Ol(i,t),n=!1,o0=!1,e(r,y),xC()}function d(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Ol(i,t),n=!1,{remove:d}}function bC(t,e){let i=new C2(n),r=null;function n(){e(r,d)}function l(){i&&(i.destroy(),i=null),r=null}function d(){return i?(i.clear(),r=Ol(i,t),r):null}return d(),{remove:l}}function wC(t){let e=new C2(r),i=!1;function r(){e&&!i&&(o0?_C(r):(e.clear(),o0=!0,i=!0,Ol(e,t),i=!1,o0=!1,xC()))}function n(){e&&(e.destroy(),e=null)}return i=!0,Ol(e,t),i=!1,{remove:n}}function _C(t){Xb.includes(t)||Xb.unshift(t)}function xC(){for(;Xb.length;)Xb.pop()()}var iy;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(iy||(iy={}));let zy=class{constructor(){this.uid=ty(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,l){return this.pool.acquire(iy.Untracked,e,i,r,n,l,aM)}static acquireTracked(e,i,r,n){return this.pool.acquire(iy.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===iy.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,l,d,y){this.uid=ty(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=l,this.path=d,this.equals=y}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=ty(),this.removed=!0}};zy.pool=new pC(zy);const _v=new ms,Ml=new Set;let Qb;function ew(t){Ml.delete(t),Ml.add(t),Qb||(Qb=H0(Aq))}function Iq(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Eq(t){for(const e of Ml.values())e.target===t&&(e.removed=!0)}function Aq(){let t=10;for(;Qb&&t--;){Qb=null;const e=kq(),i=_v.acquire();for(const r of e){const n=r.uid;Iq(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Ml)r.removed&&(i.push(r),Ml.delete(r));for(const r of i)zy.pool.release(r);_v.release(i),_v.release(e),xx.forEach(r=>r())}}function kq(){const t=_v.acquire();t.length=Ml.size;let e=0;for(const i of Ml)t[e]=i,++e;return Ml.clear(),t}const xx=new Set;function Pq(t){return xx.add(t),{remove(){xx.delete(t)}}}function Cq(t,e,i){let r=XP(t,e,i,(n,l,d)=>{let y,b,x=bC(()=>mm(n,l),($,E)=>{n.__accessor__.destroyed||y&&y.uid!==b?r.remove():(y||(y=zy.acquireUntracked($,d,E,n,l),b=y.uid),ew(y))});return{remove:QP(()=>{x.remove(),y&&(y.uid!==b||y.removed||(y.removed=!0,ew(y)),y=null),r=x=null})}});return r}function Oq(t,e,i){const r=XP(t,e,i,(n,l,d)=>{let y=!1;return vC(()=>mm(n,l),(b,x)=>{n.__accessor__.destroyed?r.remove():y||(y=!0,aM(x,b)||d.call(n,b,x,l,n),y=!1)})});return r}function Lq(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:r?Oq(t,e,i):Cq(t,e,i)}function Dq(t,e,i){let r,n,l=bC(t,(d,y)=>{r&&r.uid!==n?l.remove():(r||(r=zy.acquireTracked(d,e,y,i),n=r.uid),ew(r))});return{remove:QP(()=>{l.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,ew(r)),r=null),l=null})}}function Rq(t,e,i){let r=!1;return vC(t,(n,l)=>{r||(r=!0,i(l,n)||e(n,l),r=!1)})}function jq(t,e,i=!1,r=KP){return i?Rq(t,e,r):Dq(t,e,r)}function MT(t){return Sq(Ml,e=>e.oldValue===t)}function O2(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function cM(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}const a0=ge.getLogger("esri.core.accessorSupport.ensureTypes");function Fq(t){return t==null?t:new Date(t)}function Nq(t){return t==null?t:!!t}function bm(t){return t==null?t:t.toString()}function Ln(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function L2(t){return t==null?t:Math.round(parseFloat(t))}function SC(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function tw(t,e){return e!=null&&t&&!(e instanceof t)}function MC(t){return t&&"isCollection"in t}function $T(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function zq(t,e){if(!e||!e.constructor||!MC(e.constructor))return Sx(t,e)?e:new t(e);const i=$T(t.prototype.itemType),r=$T(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(Sx(t,e),e):new t(e):e}function Sx(t,e){return!!SC(e)&&(a0.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+D2(t)+"'"),!0)}function $0(t,e){return e==null?e:MC(t)?zq(t,e):tw(t,e)?Sx(t,e)?e:new t(e):e}function D2(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const Vq=new WeakMap;function Bq(t){switch(t){case Number:return Ln;case Ct:return L2;case Boolean:return Nq;case String:return bm;case Date:return Fq;default:return cM(Vq,t,()=>$0.bind(null,t))}}function zi(t,e){const i=Bq(t);return arguments.length===1?i:i(e)}function Vy(t,e,i){return arguments.length===1?Vy.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Gq(t,e){return arguments.length===1?Vy(i=>zi(t,i)):Vy(i=>zi(t,i),e)}function $C(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>$C(t,e-1,r)):t(i)}function iw(t,e,i){if(arguments.length===2)return l=>iw(t,e,l);if(!i)return i;i=$C(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let l=0;l<r;l++)i=[i];return i}function Uq(t,e,i){return arguments.length===2?iw(r=>zi(t,r),e):iw(r=>zi(t,r),e,i)}function TC(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function Mx(t,e){if(arguments.length===2)return Mx(t).call(null,e);const i=new Set,r=t.filter(y=>typeof y!="function"),n=t.filter(y=>typeof y=="function");for(const y of t)typeof y!="string"&&typeof y!="number"||i.add(y);let l=null,d=null;return(y,b)=>{if(y==null)return y;const x=typeof y,$=x==="string"||x==="number";return $&&(i.has(y)||n.some(E=>x==="string"&&E===String||x==="number"&&E===Number))||x==="object"&&n.some(E=>!tw(y,E))?y:($&&r.length?(l||(l=r.map(E=>typeof E=="string"?`'${E}'`:`${E}`).join(", ")),a0.error("Accessor#set",`'${y}' is not a valid value for this property, only the following values are valid: ${l}`)):typeof y=="object"&&n.length?(d||(d=n.map(E=>D2(E)).join(", ")),a0.error("Accessor#set",`'${y}' is not a valid value for this property, value must be one of ${d}`)):a0.error("Accessor#set",`'${y}' is not a valid value for this property`),b&&(b.valid=!1),null)}}function Ca(t,e){if(arguments.length===2)return Ca(t).call(null,e);const i={},r=[],n=[];for(const b in t.typeMap){const x=t.typeMap[b];i[b]=zi(x),r.push(D2(x)),n.push(b)}const l=()=>`'${r.join("', '")}'`,d=()=>`'${n.join("', '")}'`,y=typeof t.key=="string"?b=>b[t.key]:t.key;return b=>{if(t.base&&!tw(t.base,b)||b==null)return b;const x=y(b)||t.defaultKeyValue,$=i[x];if(!$)return a0.error("Accessor#set",`Invalid property value, value needs to be one of ${l()}, or a plain object that can autocast (having .type = ${d()})`),null;if(!tw(t.typeMap[x],b))return b;if(typeof t.key=="string"&&!SC(b)){const E={};for(const k in b)k!==t.key&&(E[k]=b[k]);return $(E)}return $(b)}}let Ct=class{};const D3e={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function qq(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function IC(t){switch(t.type){case"native":return zi(t.value);case"array":return Vy(IC(t.value));case"one-of":return Hq(t);default:return null}}function Hq(t){let e=null;return(i,r)=>Tx(i,t)?i:(e==null&&(e=$x(t)),a0.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function $x(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ct:return"integer";case Date:return"date";default:return D2(t.value)}case"array":return`array of ${$x(t.value)}`;case"one-of":{const e=t.values.map(i=>$x(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function Tx(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ct:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!Tx(i,e.value));case"one-of":return e.values.some(i=>Tx(t,i))}}function S(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=I2(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&ge.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const l=t.aliasOf;if(l){const b=typeof l=="string"?l:l.source,x=typeof l=="string"?null:l.overridable===!0;let $;n.dependsOn=[b],n.get=function(){let E=Hb(this,b);if(typeof E=="function"){$||($=b.split(".").slice(0,-1).join("."));const k=Hb(this,$);k&&(E=E.bind(k))}return E},n.readOnly||(n.set=x?function(E){this._override(i,E)}:function(E){Jb(this,b,E)})}const d=t.type,y=t.types;n.cast||(d?n.cast=Wq(d):y&&(Array.isArray(y)?n.cast=Vy(Ca(y[0])):n.cast=Ca(y))),qU(n,t),t.range&&(n.cast=Jq(n.cast,t.range))}}function EC(t,e,i){const r=I2(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function Wq(t){let e=0,i=t;if(qq(t))return IC(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(TC(r))return e===0?Mx(r):iw(Mx(r),e);if(e===1)return Gq(r);if(e>1)return Uq(r,e);const n=t;return n.from?n.from:zi(n)}function Jq(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Yq(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(l=>{e[l]=n}),delete e[r]}}}let Un=class extends cC{constructor(e,i,r){super(e,i,r)}};Un.prototype.type="warning";function AC(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Ix=ge.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function TT(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||Xq(t)&&es("read.reader",W0(t),e))}function W0(t){var i,r;const e=t.ndimArray??0;if(e>1)return Zq(t);if(e===1)return IT(t);if("type"in t&&PC(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,l=IT(typeof n=="function"?{type:n}:{types:n});return(d,y,b)=>{const x=l(d,y,b);return x&&new t.type(x)}}return dM(t)}function dM(t){return"type"in t?Kq(t.type):Qq(t.types)}function Kq(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void Ix.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const l=new t;return l.read(e,r),l}:t.fromJSON}function kC(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>kC(t,n,i,r-1)):t(e,void 0,i)}function Zq(t){const e=dM(t),i=kC.bind(null,e),r=t.ndimArray??0;return(n,l,d)=>{if(n==null)return n;n=i(n,d,r);let y=r,b=n;for(;y>0&&Array.isArray(b);)y--,b=b[0];if(b!==void 0)for(let x=0;x<y;x++)n=[n];return n}}function IT(t){const e=dM(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const d=[];for(const y of i){const b=e(y,void 0,n);b!==void 0&&d.push(b)}return d}const l=e(i,void 0,n);return l!==void 0?[l]:void 0}}function PC(t){if(!AC(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?pM(e.Type):CC(e.Type))}function Xq(t){return"types"in t?CC(t.types):pM(t.type)}function pM(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||PC(t))}function CC(t){for(const e in t.typeMap)if(!pM(t.typeMap[e]))return!1;return!0}function Qq(t){let e=null;const i=t.errorContext??"type";return(r,n,l)=>{if(r==null)return r;const d=typeof r;if(d!=="object")return void Ix.error(`Expected JSON value of type 'object' to deserialize, but got '${d}'`);e||(e=eH(t));const y=t.key;if(typeof y!="string")return;const b=r[y],x=b?e[b]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!x){const E=`Type '${b||"unknown"}' is not supported`;return l&&l.messages&&r&&l.messages.push(new Un(`${i}:unsupported`,E,{definition:r,context:l})),void Ix.error(E)}const $=new x;return $.read(r,l),$}}function eH(t){var i,r;const e={};for(const n in t.typeMap){const l=t.typeMap[n],d=gm(l.prototype);if(typeof t.key=="function")continue;const y=d[t.key];if(!y)continue;(i=y.json)!=null&&i.type&&Array.isArray(y.json.type)&&y.json.type.length===1&&typeof y.json.type[0]=="string"&&(e[y.json.type[0]]=l);const b=(r=y.json)==null?void 0:r.write;if(!b||!b.writer){e[n]=l;continue}const x=b.target,$=typeof x=="string"?x:t.key,E={};b.writer(n,E,$),E[$]&&(e[E[$]]=l)}return e}function tH(t){if(t.json||(t.json={}),AT(t.json),kT(t.json),ET(t.json),t.json.origins)for(const e in t.json.origins)AT(t.json.origins[e]),kT(t.json.origins[e]),ET(t.json.origins[e]);return!0}function ET(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function AT(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function kT(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function PT(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&AC(t.type))?e.write.writer=sH:i>1?e.write.writer=nH(i):e.types?Array.isArray(e.types)?e.write.writer=rH(e.types[0]):e.write.writer=iH(e.types):e.write.writer=By}function iH(t){return(e,i,r,n)=>e?OC(e,t,n)?By(e,i,r,n):void 0:By(e,i,r,n)}function OC(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new se(`${r}:unsupported`,n,{definition:t,context:i})),ge.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function rH(t){return(e,i,r,n)=>!e||!Array.isArray(e)?By(e,i,r,n):By(e.filter(l=>OC(l,t,n)),i,r,n)}function By(t,e,i,r){es(i,rw(t,r),e)}function rw(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?sw(t):t}function sw(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function sH(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(l=>rw(l,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[rw(t,r)],es(i,n,e)}function LC(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>LC(r,e,i-1)):rw(t,e)}function nH(t){return(e,i,r,n)=>{let l;if(e===null)l=null;else{l=LC(e,n,t);let d=t,y=l;for(;d>0&&Array.isArray(y);)d--,y=y[0];if(y!==void 0)for(let b=0;b<d;b++)l=[l]}es(r,l,i)}}function oH(t,e){return fM(t,"any",e==null?void 0:e.origin)}function Ex(t,e){return fM(t,"read",e==null?void 0:e.origin)}function DC(t,e){return fM(t,"write",e==null?void 0:e.origin)}function fM(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function aH(t){const e=lH(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],n=r.types?uH(r):e;TT(n,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),PT(n,r)}TT(e,t.json,!0),PT(e,t.json)}function lH(t){return t.json.types?Ax(t.json):t.type?RC(t):Ax(t)}function uH(t){return t.type?RC(t):Ax(t)}function RC(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!TC(i);)i=i[0],e++;return{type:i,ndimArray:e}}function Ax(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function hH(t){tH(t)&&(Yq(t),aH(t))}const s3=new Set,n3=new Set;function J(t){return e=>{e.prototype.declaredClass=t,dH(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!s3.has(n.initialize)&&(s3.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!n3.has(n.destroy)&&(n3.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);s3.clear(),n3.clear();class l extends e{constructor(...y){if(super(...y),this.constructor===l&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let b=i.length-1;b>=0;b--)i[b].call(this)}}),r.length){let b=!1;const x=this[NP];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!b){b=!0,x.call(this);for(let $=0;$<r.length;$++)r[$].call(this)}}})}this.postscript(...y)}}}return l.__accessorMetadata__=gm(e.prototype),l.prototype.declaredClass=t,l}}function cH(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;nt(r.observerObject);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function dH(t){const e=t.prototype,i=gm(e),r={};for(const n of Object.getOwnPropertyNames(i)){const l=i[n];hH(l),r[n]={enumerable:!0,configurable:!0,get:cH(n,l),set(d){const y=this.__accessor__;if(y!==void 0){if(!Object.isFrozen(this)){if(y.initialized&&l.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(y.lifecycle===wl.CONSTRUCTED&&l.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);y.set(n,d)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:d})}}}Object.defineProperties(t.prototype,r)}var jC,FC;function pH(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const cu=Symbol("Accessor-Handles"),kx=Symbol("Accessor-Initialized");let Be=class NC{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const l=this;class d extends l{constructor(...b){super(...b),this.inherited=null,n&&n.apply(this,b)}}gm(d.prototype);for(const y in e){const b=e[y];d.prototype[y]=typeof b=="function"?function(...x){const $=this.inherited;let E;this.inherited=function(...k){if(l.prototype[y])return l.prototype[y].apply(this,k)};try{E=b.apply(this,x)}catch(k){throw this.inherited=$,k}return this.inherited=$,E}:e[y]}for(const y in i){const b=pH(i[y]);S(b)(d.prototype,y)}return J(r)(d)}constructor(...e){if(this[jC]=null,this[FC]=!1,this.constructor===NC)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new rq(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e)),CT.register(this,i.propertiesByName,this)}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[kx]=!0}initialize(){}[NP](){this[cu]=ei(this[cu])}destroy(){var e;this.destroyed||(CT.unregister(this),Eq(this),this.__accessor__.destroy(),(e=hq())==null||e.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[kx]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Hb(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return Jb(this,e,i),this}watch(e,i,r){return Lq(this,e,i,r)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const l of n)l.remove();return}let r=this[cu];r==null&&(r=this[cu]=new Fs),r.add(e,i)}removeHandles(e){const i=this[cu];i!=null&&i.remove(e)}removeAllHandles(){const e=this[cu];e!=null&&e.removeAll()}hasHandles(e){const i=this[cu];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};jC=cu,FC=kx;const CT=new FinalizationRegistry(t=>{for(const e of t.values())e.destroy()});let xv=class zC{constructor(){this._emitter=new zC.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,l){const d=this._listenersMap&&this._listenersMap.get(n);if(!d)return!1;const y=this._target||this;return[...d].forEach(b=>{b.call(y,l)}),d.length>0}on(n,l){if(Array.isArray(n)){const y=n.map(b=>this.on(b,l));return S2(y)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const d=this._listenersMap.get(n)||[];return d.push(l),this._listenersMap.set(n,d),{remove:()=>{const y=this._listenersMap&&this._listenersMap.get(n)||[],b=y.indexOf(l);b>=0&&y.splice(b,1)}}}once(n,l){const d=this.on(n,y=>{d.remove(),l.call(null,y)});return d}hasEventListener(n){const l=this._listenersMap&&this._listenersMap.get(n);return l!=null&&l.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(l,d){return this._emitter.emit(l,d)}on(l,d){return this._emitter.on(l,d)}once(l,d){return this._emitter.once(l,d)}hasEventListener(l){return this._emitter.hasEventListener(l)}};return n=g([J("esri.core.Evented")],n),n};let i=class extends Be{constructor(){super(...arguments),this._emitter=new xv.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=g([J("esri.core.Evented")],i),t.EventedAccessor=i})(xv||(xv={}));const Na=xv;var Bt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Bt||(Bt={}));function yM(t){return(e,i)=>{e[i]=t}}let R2=class extends nC{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var gl;let fH=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const fn=new Ph(fH,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),yH=()=>{};function o3(t){return t?t instanceof zc?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function a3(t){if(t&&t.length)return t[0]}function mH(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let l=0;for(;l<n&&t[i+l]===e[r+l];)l++;return l}function VC(t,e,i,r){e&&e.forEach((n,l,d)=>{t.push(n),VC(t,i.call(r,n,l,d),i,r)})}const Wl=new Set,Jl=new Set,Yl=new Set,l3=new Map;let gH=0,zc=gl=class extends Na.EventedAccessor{static isCollection(t){return t!=null&&t instanceof gl}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new R2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:gH++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof gl?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return nt(this._observable),this._items}set items(t){this._emitBeforeChanges(Bt.ADD)||(this._splice(0,this.length,o3(t)),this._emitAfterChanges(Bt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=yH,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(nt(this._observable),this._emitBeforeChanges(Bt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Bt.ADD),this}addMany(t,e=this._items.length){if(nt(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Bt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,o3(t)),this._emitAfterChanges(Bt.ADD),this}at(t){if(nt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(nt(this._observable),!this.length||this._emitBeforeChanges(Bt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Bt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return nt(this._observable),this._createNewInstance({items:this._items.map(ae)})}concat(...t){nt(this._observable);const e=t.map(o3);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(nt(this._observable),!this.length||this._emitBeforeChanges(Bt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(Bt.REMOVE)}every(t,e){return nt(this._observable),this._items.every(t,e)}filter(t,e){let i;return nt(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return nt(this._observable),this._items.find(t,e)}findIndex(t,e){return nt(this._observable),this._items.findIndex(t,e)}flatten(t,e){nt(this._observable);const i=[];return VC(i,this,t,e),new gl(i)}forEach(t,e){return nt(this._observable),this._items.forEach(t,e)}getItemAt(t){return nt(this._observable),this._items[t]}getNextIndex(t){nt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return nt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return nt(this._observable),this._items.indexOf(t,e)}join(t=","){return nt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return nt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){nt(this._observable);const i=this._items.map(t,e);return new gl({items:i})}reorder(t,e=this.length-1){nt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Bt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Bt.MOVE)}return t}}pop(){if(nt(this._observable),!this.length||this._emitBeforeChanges(Bt.REMOVE))return;const t=a3(this._splice(this.length-1,1));return this._emitAfterChanges(Bt.REMOVE),t}push(...t){return nt(this._observable),this._emitBeforeChanges(Bt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Bt.ADD)),this.length}reduce(t,e){nt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){nt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return nt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(nt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Bt.REMOVE))return;const e=a3(this._splice(t,1));return this._emitAfterChanges(Bt.REMOVE),e}removeMany(t){if(nt(this._observable),!t||!t.length||this._emitBeforeChanges(Bt.REMOVE))return[];const e=t instanceof gl?t.toArray():t,i=this._items,r=[],n=e.length;for(let l=0;l<n;l++){const d=e[l],y=i.indexOf(d);if(y>-1){const b=1+mH(e,i,l+1,y+1),x=this._splice(y,b);x&&x.length>0&&r.push.apply(r,x),l+=b-1}}return this._emitAfterChanges(Bt.REMOVE),r}reverse(){if(nt(this._observable),this._emitBeforeChanges(Bt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Bt.MOVE),this}shift(){if(nt(this._observable),!this.length||this._emitBeforeChanges(Bt.REMOVE))return;const t=a3(this._splice(0,1));return this._emitAfterChanges(Bt.REMOVE),t}slice(t=0,e=this.length){return nt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return nt(this._observable),this._items.some(t,e)}sort(t){if(nt(this._observable),!this.length||this._emitBeforeChanges(Bt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Bt.MOVE),this}splice(t,e,...i){nt(this._observable);const r=(e?Bt.REMOVE:0)|(i.length?Bt.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return nt(this._observable),this._items.slice()}toJSON(){return nt(this._observable),this.toArray()}toLocaleString(){return nt(this._observable),this._items.toLocaleString()}toString(){return nt(this._observable),this._items.toString()}unshift(...t){return nt(this._observable),!t.length||this._emitBeforeChanges(Bt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Bt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let l,d;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=H0(()=>this._dispatchChange())),e){if(d=r.splice(t,e),this.hasEventListener("before-remove")){const y=fn.acquire();y.target=this,y.cancellable=!0;for(let b=0,x=d.length;b<x;b++)l=d[b],y.reset(l),this.emit("before-remove",y),y.defaultPrevented&&(d.splice(b,1),r.splice(t,0,l),t+=1,b-=1,x-=1);fn.release(y)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const y=fn.acquire();y.target=this,y.cancellable=!1;const b=d.length;for(let x=0;x<b;x++)y.reset(d[x]),this.emit("after-remove",y);fn.release(y)}}if(i&&i.length){if(n){const $=[];for(const E of i){const k=n.ensureType(E);k==null&&E!=null||$.push(k)}i=$}const y=this.hasEventListener("before-add"),b=this.hasEventListener("after-add"),x=t===this.length;if(y||b){const $=fn.acquire();$.target=this,$.cancellable=!0;const E=fn.acquire();E.target=this,E.cancellable=!1;for(const k of i)y?($.reset(k),this.emit("before-add",$),$.defaultPrevented||(x?r.push(k):r.splice(t++,0,k),this._set("length",r.length),b&&(E.reset(k),this.emit("after-add",E)))):(x?r.push(k):r.splice(t++,0,k),this._set("length",r.length),E.reset(k),this.emit("after-add",E));fn.release(E),fn.release($)}else{if(x)for(const $ of i)r.push($);else r.splice(t,0,...i);this._set("length",r.length)}}return(i&&i.length||d&&d.length)&&this._notifyChangeEvent(i,d),d}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=fn.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,fn.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=fn.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),fn.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Wl.clear(),Jl.clear(),Yl.clear();for(const{added:b,removed:x}of i){if(b)if(Yl.size===0&&Jl.size===0)for(const $ of b)Wl.add($);else for(const $ of b)Jl.has($)?(Yl.add($),Jl.delete($)):Yl.has($)||Wl.add($);if(x)if(Yl.size===0&&Wl.size===0)for(const $ of x)Jl.add($);else for(const $ of x)Wl.has($)?Wl.delete($):(Yl.delete($),Jl.add($))}const r=ms.acquire();Wl.forEach(b=>{r.push(b)});const n=ms.acquire();Jl.forEach(b=>{n.push(b)});const l=this._items,d=e.items,y=ms.acquire();if(Yl.forEach(b=>{d.indexOf(b)!==l.indexOf(b)&&y.push(b)}),e.listeners&&(r.length||n.length||y.length)){const b={target:this,added:r,removed:n,moved:y},x=e.listeners.length;for(let $=0;$<x;$++){const E=e.listeners[$];E.removed||E.callback.call(this,b)}}ms.release(r),ms.release(n),ms.release(y)}Wl.clear(),Jl.clear(),Yl.clear()}};zc.ofType=t=>{if(!t)return gl;if(l3.has(t))return l3.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends gl{};return g([yM({Type:t,ensureType:typeof t=="function"?zi(t):Ca(t)})],i.prototype,"itemType",void 0),i=g([J(`esri.core.Collection<${e}>`)],i),l3.set(t,i),i},g([S()],zc.prototype,"length",void 0),g([S()],zc.prototype,"items",null),zc=gl=g([J("esri.core.Collection")],zc);const ze=zc;function vd(t,e,i=ze){return e||(e=new i),e===t||(e.removeAll(),vH(t)?e.addMany(t):t&&e.add(t)),e}function BC(t){return t}function vH(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const OT=new Set;function bH(t,e,i=!1){i&&OT.has(e)||(i&&OT.add(e),t.warn(` DEPRECATED - ${e}`))}function Gy(t,e,i={}){if(ce("esri-deprecation-warnings")){const{moduleName:r}=i;nw(t,`Property: ${(r?r+"::":"")+e}`,i)}}function nw(t,e,i={}){if(ce("esri-deprecation-warnings")){const{replacement:r,version:n,see:l,warnOnce:d}=i;let y=e;r&&(y+=`
	 Replacement: ${r}`),n&&(y+=`
	 Version: ${n}`),l&&(y+=`
	 See ${l} for more details.`),bH(t,y,d)}}let wH=class GC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new GC;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,ae(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Le.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===Le.DEFAULTS){const n=this._values.get(e);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(e,new _H(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===Le.DEFAULTS?e:Le.USER}},_H=class{constructor(e,i){this.value=e,this.origin=i}};function UC(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Le.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Le.DEFAULTS)})}function xH(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&fT(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&fT(n,i))return!0;return!1}function SH(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function MH(t,e,i,r,n){let l=Ex(e[i],n);SH(l)&&(t[i]=!0);for(const d of Object.getOwnPropertyNames(e))l=Ex(e[d],n),xH(l,i,r)&&(t[d]=!0)}function $H(t,e,i,r){const n=i.metadatas,l=oH(n[e],r),d=l==null?void 0:l.default;if(d===void 0)return;const y=typeof d=="function"?d.call(t,e,r):d;y!==void 0&&i.set(e,y)}const qC={origin:"service"};function HC(t,e,i=qC){if(!e||typeof e!="object")return;const r=mr(t),n=r.metadatas,l={};for(const d of Object.getOwnPropertyNames(e))MH(l,n,d,e,i);r.setDefaultOrigin(i.origin);for(const d of Object.getOwnPropertyNames(l)){const y=Ex(n[d],i).read,b=y&&y.source;let x;x=b&&typeof b=="string"?mm(e,b):e[d],y&&y.reader&&(x=y.reader.call(t,x,e,i)),x!==void 0&&r.set(d,x)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const d of Object.getOwnPropertyNames(n))l[d]||$H(t,d,r,i)}r.setDefaultOrigin("user")}function TH(t,e,i,r=qC){var l;const n={...r,messages:[]};i(n),(l=n.messages)==null||l.forEach(d=>{d.type!=="warning"||t.loaded?r&&r.messages&&r.messages.push(d):t.loadWarnings.push(d)})}function IH(t,e,i,r,n){var d,y;const l={};return(y=(d=e.write)==null?void 0:d.writer)==null||y.call(t,r,l,i,n),l}function WC(t,e,i,r,n,l){if(!r||!r.write)return!1;const d=t.get(i);if(!n&&r.write.overridePolicy){const y=r.write.overridePolicy.call(t,d,i,l??void 0);y!==void 0&&(n=y)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((d===null&&!n.allowNull&&!n.writerEnsuresNonNull||d===void 0)&&n.isRequired){const y=new se("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return y&&l&&l.messages?l.messages.push(y):y&&!l&&ge.getLogger("esri.core.accessorSupport.write").error(y.name,y.message),!1}return!(d===void 0||d===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Le.DEFAULTS)&&EH(t,i,l,r,d)||!n.ignoreOrigin&&l&&l.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<vs(l.origin))}function EH(t,e,i,r,n){const l=r.default;if(l===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof l=="function"){if(Array.isArray(n)){const d=l.call(t,e,i??void 0);return M2(d,n)}return!1}return l===n}function AH(t,e,i,r){const n=mr(t),l=n.metadatas,d=DC(l[e],r);return!!d&&WC(t,n,e,d,i,r)}function JC(t,e,i){var l,d;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return vv(e,t.toJSON(i));const r=mr(t),n=r.metadatas;for(const y in n){const b=DC(n[y],i);if(!WC(t,r,y,b,void 0,i))continue;const x=t.get(y),$=IH(t,b,b.write&&typeof b.write.target=="string"?b.write.target:y,x,i);Object.keys($).length>0&&(e=vv(e,$),(d=(l=i==null?void 0:i.resources)==null?void 0:l.pendingOperations)!=null&&d.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>vv(e,$,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:y,oldOrigin:ZU(r.store.originOf(y)),newOrigin:i.origin}))}return e}const wm=t=>{let e=class extends t{constructor(...i){super(...i);const r=mr(this),n=r.store,l=new wH;r.store=l,UC(r,n,l)}read(i,r){HC(this,i,r)}write(i,r){return JC(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return kH.call(this,i,r)}};return e=g([J("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function kH(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let ve=class extends wm(Be){};ve=g([J("esri.core.JSONSupport")],ve);var Fu;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Fu||(Fu={}));let PH=class{constructor(){this._resolver=Gn(),this._status=Fu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Fu.RESOLVED,this._cleanUp()},()=>{this._status=Fu.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Fu.RESOLVED}isRejected(){return this._status===Fu.REJECTED}isFulfilled(){return this._status!==Fu.PENDING}abort(){this._resolver.reject($i())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Gn(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||is(n)||this._resolver.reject(n)}),e.resolve()}};const j2=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new PH,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=g([J("esri.core.Promise")],e),e};let ow=class extends j2(Be){};ow=g([J("esri.core.Promise")],ow);const CH="not-loaded",OH="loading",LH="failed",LT="loaded",YC=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=l=>{const d=new Promise((y,b)=>{const x=hM(l,b);this.destroyed&&b(new se("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(y,b).finally(()=>{x&&x.remove()})});if(this.loadStatus===CH){this._set("loadStatus",OH);const y=this._loadController=new AbortController;n({signal:y.signal}),zn(y.signal,()=>{this._promiseProps.abort()})}return r(),d}})),this.when(()=>{this._set("loadStatus",LT),this._loadController=null},r=>{this._set("loadStatus",LH),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController=Fy(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===LT}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new se("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return g([S({readOnly:!0})],e.prototype,"loaded",null),g([S({readOnly:!0})],e.prototype,"loadError",void 0),g([S({clonable:!1})],e.prototype,"loadStatus",void 0),g([S({type:[Un],readOnly:!0})],e.prototype,"loadWarnings",null),e=g([J("esri.core.Loadable")],e),e};let Jf=class extends YC(ow){};Jf=g([J("esri.core.Loadable")],Jf),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=YC,t.isLoadable=e}(Jf||(Jf={}));const qo=Jf;function DH(t,e,i){return ws(t.map((r,n)=>e.apply(i,[r,n])))}async function RH(t,e,i){return(await ws(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function mM(t){return{ok:!0,value:t}}function gM(t){return{ok:!1,error:t}}function jH(t){return t!=null&&t.ok===!0?t.value:null}function FH(t){return t!=null&&t.ok===!1?t.error:null}async function F2(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return mM(await t)}catch(e){return gM(e)}}async function U3e(t){try{return mM(await t)}catch(e){return On(e),gM(e)}}function vM(t,e){return new du(t,e)}let du=class extends Be{get value(){return jH(this._result)}get error(){return FH(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Fy(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=mM(n),this._cleanup()},n=>{this._result=gM(n),this._cleanup()}),this._abortHandle=zn(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Mi(this._abortHandle),this._abortController=null}};g([S()],du.prototype,"value",null),g([S()],du.prototype,"error",null),g([S()],du.prototype,"finished",null),g([S()],du.prototype,"promise",void 0),g([S()],du.prototype,"_result",void 0),du=g([J("esri.core.asyncUtils.ReactiveTask")],du);async function bM(t,e){return await t.load(),NH(t,e)}async function NH(t,e){const i=[],r=(...l)=>{for(const d of l)d!=null&&(Array.isArray(d)?r(...d):ze.isCollection(d)?d.forEach(y=>r(y)):qo.isLoadable(d)&&i.push(d))};e(r);let n=null;if(await RH(i,async l=>{const d=await F2(zH(l)?l.loadAll():l.load());d.ok!==!1||n||(n=d)}),n)throw n.error;return t}function zH(t){return"loadAll"in t&&typeof t.loadAll=="function"}const VH=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,BH={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function DT(t){const e=t==null?void 0:t.match(VH);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let l=null,d=null,y=null;const{devext:b,qaext:x,www:$}=BH;if(r)if(l=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:d,portalHostname:y}=b);break;case"qa":({customBaseUrl:d,portalHostname:y}=x);break;default:return null}else({customBaseUrl:d,portalHostname:y}=$);else switch(i.toLowerCase()){case"devext":({customBaseUrl:d,portalHostname:y}=b);break;case"qaext":({customBaseUrl:d,portalHostname:y}=x);break;case"www":({customBaseUrl:d,portalHostname:y}=$);break;default:return null}return{customBaseUrl:d,isPortal:!1,portalHostname:y,urlKey:l}}function GH(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function UH(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}const qH=ge.getLogger("esri.core.urlUtils"),J0=Ft.request,RT="esri/config: esriConfig.request.proxyUrl is not set.",KC=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ZC=/^\s*http:/i,HH=/^\s*https:/i,WH=/^\s*file:/i,JH=/:\d+$/,YH=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,KH=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ZH=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let l0=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(KH);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(ZH),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const og={},XH=new l0(Ft.applicationUrl);let Zr=XH;const QH=eW();let wM=QH;const _M=()=>Zr,W3e=()=>wM;function eW(){const t=Zr.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${Zr.scheme}://${Zr.host}${Zr.port!=null?`:${Zr.port}`:""}`}${e}`}function Ui(t){if(!t)return null;const e={path:null,query:null},i=new l0(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=xM(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function xM(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let l,d;n<0?(l=decodeURIComponent(r),d=""):(l=decodeURIComponent(r.slice(0,n)),d=decodeURIComponent(r.slice(n+1)));let y=i[l];typeof y=="string"&&(y=i[l]=[y]),Array.isArray(y)?y.push(d):i[l]=d}return i}function jT(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function T0(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",l=e&&e[i];return l?n+encodeURIComponent(l(r)):Array.isArray(r)?r.map(d=>jT(d)?n+encodeURIComponent(JSON.stringify(d)):n+encodeURIComponent(d)).join("&"):jT(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function tW(t=!1){let e,i=J0.proxyUrl;if(typeof t=="string"){e=lW(t);const r=N2(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw qH.warn(RT),new se("urlutils:proxy-not-set",RT);return e&&Px()&&(i=IM(i)),Ui(i)}function J3e(t){const e=N2(t);let i,r;if(e){const n=SM(e.proxyUrl);i=n.path,r=n.query?xM(n.query):null}if(i){const n=Ui(t);t=i+"?"+n.path;const l=T0({...r,...n.query});l&&(t=`${t}?${l}`)}return t}const wf={path:"",query:""};function SM(t){const e=t.indexOf("?");return e!==-1?(wf.path=t.slice(0,e),wf.query=t.slice(e+1)):(wf.path=t,wf.query=null),wf}function XC(t){return t=(t=lw(t=pW(t=SM(t).path),!0)).toLowerCase()}function iW(t){const e={proxyUrl:t.proxyUrl,urlPrefix:XC(t.urlPrefix)},i=J0.proxyRules,r=e.urlPrefix;let n=i.length;for(let l=0;l<i.length;l++){const d=i[l].urlPrefix;if(r.indexOf(d)===0){if(r.length===d.length)return-1;n=l;break}d.indexOf(r)===0&&(n=l+1)}return i.splice(n,0,e),n}function N2(t){const e=J0.proxyRules,i=XC(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function rW(t,e){if(!t||!e)return!1;t=aw(t),e=aw(e);const i=DT(t),r=DT(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&I0(t,e,!0)}function QC(t,e){return t=aw(t),e=aw(e),lw(t)===lw(e)}function aw(t){const e=(t=Ro(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function eO(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=J0.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function I0(t,e,i=!1){if(!t||!e)return!1;const r=Ox(t),n=Ox(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function MM(t){if(typeof t=="string"){if(!an(t))return!0;t=Ox(t)}if(I0(t,Zr))return!0;const e=J0.trustedServers||[];for(let i=0;i<e.length;i++){const r=sW(e[i]);for(let n=0;n<r.length;n++)if(I0(t,r[n]))return!0}return!1}function sW(t){return og[t]||(TM(t)||Oa(t)?og[t]=[new l0(Rn(t))]:og[t]=[new l0(`http://${t}`),new l0(`https://${t}`)]),og[t]}function Rn(t,e=wM,i){return Oa(t)?i&&i.preserveProtocolRelative?t:Zr.scheme==="http"&&Zr.authority===jo(t).slice(2)?`http:${t}`:`https:${t}`:TM(t)?t:Ll(t[0]==="/"?dW(e):e,t)}function $M(t,e=wM,i){if(t==null||!an(t))return t;const r=Ro(t),n=r.toLowerCase(),l=Ro(e).toLowerCase().replace(/\/+$/,""),d=i?Ro(i).toLowerCase().replace(/\/+$/,""):null;if(d&&l.indexOf(d)!==0)return t;const y=(E,k,P)=>(P=E.indexOf(k,P))===-1?E.length:P;let b=y(n,"/",n.indexOf("//")+2),x=-1;for(;n.slice(0,b+1)===l.slice(0,b)+"/"&&(x=b+1,b!==n.length);)b=y(n,"/",b+1);if(x===-1||d&&x<d.length)return t;t=r.slice(x);const $=l.slice(x-1).replaceAll(/[^/]+/g,"").length;if($>0)for(let E=0;E<$;E++)t=`../${t}`;else t=`./${t}`;return t}function Ro(t){return t=mW(t=yW(t=fW(t=Rn(t=t.trim()))))}function Ll(...t){const e=t.filter(Go);if(!e||!e.length)return;const i=[];if(an(e[0])){const n=e[0],l=n.indexOf("//");l!==-1&&(i.push(n.slice(0,l+1)),hW(e[0])&&(i[0]+="/"),e[0]=n.slice(l+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((n,l)=>l?n.concat(l.split("/")):n,[]);for(let n=0;n<r.length;n++){const l=r[n];l===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!l&&n===r.length-1||l&&(l!=="."||i.length===0))&&i.push(l)}return i.join("/")}function jo(t,e=!1){if(t==null||z2(t)||Cd(t))return null;let i=t.indexOf("://");if(i===-1&&Oa(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=lw(t,!0)),t}function an(t){return Oa(t)||TM(t)}function z2(t){return t!=null&&t.slice(0,5)==="blob:"}function Cd(t){return t!=null&&t.slice(0,5)==="data:"}function nW(t){const e=Uy(t);return e&&e.isBase64?UH(e.data):null}function Y3e(t){return btoa(String.fromCharCode.apply(null,t)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const oW=/^data:(.*?)(;base64)?,(.*)$/;function Uy(t){const e=t.match(oW);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function tO(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function K3e(t){const e=nW(t);if(!e)return null;const i=Uy(t);return new Blob([e],{type:i.mediaType})}function Z3e(t,e){aW(t,e)}function aW(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function Oa(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function TM(t){return t!=null&&KC.test(t)}function lW(t){return t!=null&&HH.test(t)||Zr.scheme==="https"&&Oa(t)}function uW(t){return t!=null&&ZC.test(t)||Zr.scheme==="http"&&Oa(t)}function hW(t){return t!=null&&WH.test(t)}function IM(t){return Oa(t)?`https:${t}`:t.replace(ZC,"https:")}function cW(){return Zr.scheme==="http"}function Px(){return Zr.scheme==="https"}function lw(t,e=!1){return Oa(t)?t.slice(2):(t=t.replace(KC,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function dW(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function EM(t){let e=0;if(an(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function X3e(t,e){if(!t)return"";const i=Ui(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(n,"")}function pW(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function iO(t){return t.replace(/\/+$/,"")}function fW(t){if(/^https?:\/\//i.test(t)){const e=SM(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function yW(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function mW(t){const e=J0.httpsDomains;if(!uW(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),JH.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return cW()&&r===Zr.authority&&!YH.test(t)||(Px()&&r===Zr.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||Px()&&!N2(t))&&(t=IM(t)),t}function Cx(t,e,i){if(!(e&&i&&t&&an(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),l=t.indexOf(":",r+2),d=Math.min(n<0?t.length:n,l<0?t.length:l);return t.slice(r+2,d).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(d)}`}function Ox(t){return typeof t=="string"?new l0(Rn(t)):(t.scheme||(t.scheme=Zr.scheme),t)}function Q3e(t){return gW.test(t)}function rO(t,e){const i=Ui(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function sO(t,e,i){const r=Ui(t),n=r.query||{};return n[e]=String(i),`${r.path}?${T0(n)}`}function u3(t,e){const i=Ui(t),r=i.query||{};for(const l in e)r[l]=e[l];const n=T0(r);return n?`${i.path}?${n}`:i.path}function e5e(t){if(t==null)return null;const e=t.match(nO);return e?e[2]:null}function FT(t){if(t==null)return null;const e=t.match(nO);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function t5e(t){return typeof t=="string"?Uy(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Uy(r.result)),r.onerror=n=>i(n)})}const nO=/([^.]*)\.([^\/]*)$/,gW=/(^data:image\/svg|\.svg$)/i;function Ae(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(l,d)=>{const y=l.constructor.prototype;for(const b of r){const x=EC(l,b,n);x.write&&typeof x.write=="object"||(x.write={}),i&&(x.write.target=i),x.write.writer=y[d]}}}let _t=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,l)=>{const d=this.toJSON(r);d!==void 0&&es(l,d,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function rs(){return function(t,e){return new _t(t,{ignoreUnknown:!0,...e})}}let AM=class{constructor(e,i,r,n){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Yt=new AM(6378137,1/298.257223563,3e5,.006694379990137799),$l=new AM(3396190,1/169.8944472236118,23e4),vh=new AM(1737400,0,0);var bd;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(bd||(bd={}));let I;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)U[I]=0;for(I=2056;I<=2065;I++)U[I]=0;for(I=2067;I<=2135;I++)U[I]=0;for(I=2137;I<=2154;I++)U[I]=0;for(I=2161;I<=2170;I++)U[I]=0;for(I=2172;I<=2193;I++)U[I]=0;for(I=2195;I<=2198;I++)U[I]=0;for(I=2200;I<=2203;I++)U[I]=0;for(I=2205;I<=2217;I++)U[I]=0;for(I=2222;I<=2224;I++)U[I]=1;for(I=2225;I<=2250;I++)U[I]=2;for(I=2251;I<=2253;I++)U[I]=1;for(I=2257;I<=2264;I++)U[I]=2;for(I=2274;I<=2279;I++)U[I]=2;for(I=2280;I<=2282;I++)U[I]=1;for(I=2283;I<=2289;I++)U[I]=2;for(I=2290;I<=2292;I++)U[I]=0;for(I=2308;I<=2313;I++)U[I]=0;for(I=2315;I<=2491;I++)U[I]=0;for(I=2494;I<=2866;I++)U[I]=0;for(I=2867;I<=2869;I++)U[I]=1;for(I=2870;I<=2888;I++)U[I]=2;for(I=2891;I<=2895;I++)U[I]=2;for(I=2896;I<=2898;I++)U[I]=1;for(I=2902;I<=2908;I++)U[I]=2;for(I=2915;I<=2920;I++)U[I]=2;for(I=2921;I<=2923;I++)U[I]=1;for(I=2924;I<=2930;I++)U[I]=2;for(I=2931;I<=2962;I++)U[I]=0;for(I=2964;I<=2968;I++)U[I]=2;for(I=2969;I<=2973;I++)U[I]=0;for(I=2975;I<=2991;I++)U[I]=0;for(I=2995;I<=3051;I++)U[I]=0;for(I=3054;I<=3079;I++)U[I]=0;for(I=3081;I<=3088;I++)U[I]=0;for(I=3092;I<=3101;I++)U[I]=0;for(I=3106;I<=3138;I++)U[I]=0;for(I=3146;I<=3151;I++)U[I]=0;for(I=3153;I<=3166;I++)U[I]=0;for(I=3168;I<=3172;I++)U[I]=0;for(I=3174;I<=3203;I++)U[I]=0;for(I=3294;I<=3358;I++)U[I]=0;for(I=3367;I<=3403;I++)U[I]=0;for(I=3408;I<=3416;I++)U[I]=0;for(I=3417;I<=3438;I++)U[I]=2;for(I=3441;I<=3446;I++)U[I]=2;for(I=3447;I<=3450;I++)U[I]=0;for(I=3451;I<=3459;I++)U[I]=2;for(I=3460;I<=3478;I++)U[I]=0;for(I=3554;I<=3559;I++)U[I]=0;for(I=3560;I<=3570;I++)U[I]=2;for(I=3571;I<=3581;I++)U[I]=0;for(I=3594;I<=3597;I++)U[I]=0;for(I=3601;I<=3604;I++)U[I]=0;for(I=3637;I<=3639;I++)U[I]=0;for(I=3665;I<=3667;I++)U[I]=0;for(I=3693;I<=3695;I++)U[I]=0;for(I=3701;I<=3727;I++)U[I]=0;for(I=3728;I<=3739;I++)U[I]=2;for(I=3740;I<=3751;I++)U[I]=0;for(I=3753;I<=3760;I++)U[I]=2;for(I=3761;I<=3773;I++)U[I]=0;for(I=3775;I<=3777;I++)U[I]=0;for(I=3779;I<=3781;I++)U[I]=0;for(I=3783;I<=3785;I++)U[I]=0;for(I=3788;I<=3791;I++)U[I]=0;for(I=3797;I<=3802;I++)U[I]=0;for(I=3814;I<=3816;I++)U[I]=0;for(I=3825;I<=3829;I++)U[I]=0;for(I=3832;I<=3841;I++)U[I]=0;for(I=3844;I<=3852;I++)U[I]=0;for(I=3873;I<=3885;I++)U[I]=0;for(I=3890;I<=3893;I++)U[I]=0;for(I=3907;I<=3912;I++)U[I]=0;for(I=3942;I<=3950;I++)U[I]=0;for(I=3968;I<=3970;I++)U[I]=0;for(I=3973;I<=3976;I++)U[I]=0;for(I=3986;I<=3989;I++)U[I]=0;for(I=3994;I<=3997;I++)U[I]=0;for(I=4048;I<=4051;I++)U[I]=0;for(I=4056;I<=4063;I++)U[I]=0;for(I=4093;I<=4096;I++)U[I]=0;for(I=4390;I<=4398;I++)U[I]=0;for(I=4399;I<=4413;I++)U[I]=2;for(I=4418;I<=4433;I++)U[I]=2;for(I=4455;I<=4457;I++)U[I]=2;for(I=4484;I<=4489;I++)U[I]=0;for(I=4491;I<=4554;I++)U[I]=0;for(I=4568;I<=4589;I++)U[I]=0;for(I=4652;I<=4656;I++)U[I]=0;for(I=4766;I<=4800;I++)U[I]=0;for(I=5014;I<=5016;I++)U[I]=0;for(I=5069;I<=5072;I++)U[I]=0;for(I=5105;I<=5130;I++)U[I]=0;for(I=5173;I<=5188;I++)U[I]=0;for(I=5253;I<=5259;I++)U[I]=0;for(I=5269;I<=5275;I++)U[I]=0;for(I=5292;I<=5311;I++)U[I]=0;for(I=5329;I<=5331;I++)U[I]=0;for(I=5343;I<=5349;I++)U[I]=0;for(I=5355;I<=5357;I++)U[I]=0;for(I=5387;I<=5389;I++)U[I]=0;for(I=5459;I<=5463;I++)U[I]=0;for(I=5479;I<=5482;I++)U[I]=0;for(I=5518;I<=5520;I++)U[I]=0;for(I=5530;I<=5539;I++)U[I]=0;for(I=5550;I<=5552;I++)U[I]=0;for(I=5562;I<=5583;I++)U[I]=0;for(I=5623;I<=5625;I++)U[I]=2;for(I=5631;I<=5639;I++)U[I]=0;for(I=5649;I<=5653;I++)U[I]=0;for(I=5663;I<=5680;I++)U[I]=0;for(I=5682;I<=5685;I++)U[I]=0;for(I=5875;I<=5877;I++)U[I]=0;for(I=5896;I<=5899;I++)U[I]=0;for(I=5921;I<=5940;I++)U[I]=0;for(I=6050;I<=6125;I++)U[I]=0;for(I=6244;I<=6275;I++)U[I]=0;for(I=6328;I<=6348;I++)U[I]=0;for(I=6350;I<=6356;I++)U[I]=0;for(I=6366;I<=6372;I++)U[I]=0;for(I=6381;I<=6387;I++)U[I]=0;for(I=6393;I<=6404;I++)U[I]=0;for(I=6480;I<=6483;I++)U[I]=0;for(I=6511;I<=6514;I++)U[I]=0;for(I=6579;I<=6581;I++)U[I]=0;for(I=6619;I<=6624;I++)U[I]=0;for(I=6625;I<=6627;I++)U[I]=2;for(I=6628;I<=6632;I++)U[I]=0;for(I=6634;I<=6637;I++)U[I]=0;for(I=6669;I<=6692;I++)U[I]=0;for(I=6707;I<=6709;I++)U[I]=0;for(I=6720;I<=6723;I++)U[I]=0;for(I=6732;I<=6738;I++)U[I]=0;for(I=6931;I<=6933;I++)U[I]=0;for(I=6956;I<=6959;I++)U[I]=0;for(I=7005;I<=7007;I++)U[I]=0;for(I=7057;I<=7070;I++)U[I]=2;for(I=7074;I<=7082;I++)U[I]=0;for(I=7109;I<=7118;I++)U[I]=0;for(I=7119;I<=7127;I++)U[I]=1;for(I=7374;I<=7376;I++)U[I]=0;for(I=7528;I<=7586;I++)U[I]=0;for(I=7587;I<=7645;I++)U[I]=2;for(I=7692;I<=7696;I++)U[I]=0;for(I=7755;I<=7787;I++)U[I]=0;for(I=7791;I<=7795;I++)U[I]=0;for(I=7799;I<=7801;I++)U[I]=0;for(I=7803;I<=7805;I++)U[I]=0;for(I=7825;I<=7831;I++)U[I]=0;for(I=7845;I<=7859;I++)U[I]=0;for(I=8013;I<=8032;I++)U[I]=0;for(I=8065;I<=8068;I++)U[I]=1;for(I=8518;I<=8529;I++)U[I]=2;for(I=8533;I<=8536;I++)U[I]=2;for(I=8538;I<=8540;I++)U[I]=2;for(I=8677;I<=8679;I++)U[I]=0;for(I=8836;I<=8840;I++)U[I]=0;for(I=8857;I<=8859;I++)U[I]=0;for(I=8908;I<=8910;I++)U[I]=0;for(I=9154;I<=9159;I++)U[I]=0;for(I=9205;I<=9218;I++)U[I]=0;for(I=9271;I<=9273;I++)U[I]=0;for(I=9295;I<=9297;I++)U[I]=0;for(I=9356;I<=9360;I++)U[I]=0;for(I=9404;I<=9407;I++)U[I]=0;for(I=9476;I<=9482;I++)U[I]=0;for(I=9487;I<=9494;I++)U[I]=0;for(I=9697;I<=9699;I++)U[I]=0;for(I=9821;I<=9865;I++)U[I]=0;for(I=20002;I<=20032;I++)U[I]=0;for(I=20047;I<=20049;I++)U[I]=0;for(I=20062;I<=20092;I++)U[I]=0;for(I=20135;I<=20138;I++)U[I]=0;for(I=20248;I<=20258;I++)U[I]=0;for(I=20348;I<=20358;I++)U[I]=0;for(I=20436;I<=20440;I++)U[I]=0;for(I=20822;I<=20824;I++)U[I]=0;for(I=20904;I<=20932;I++)U[I]=0;for(I=20934;I<=20936;I++)U[I]=0;for(I=21004;I<=21032;I++)U[I]=0;for(I=21035;I<=21037;I++)U[I]=0;for(I=21095;I<=21097;I++)U[I]=0;for(I=21148;I<=21150;I++)U[I]=0;for(I=21207;I<=21264;I++)U[I]=0;for(I=21307;I<=21364;I++)U[I]=0;for(I=21413;I<=21423;I++)U[I]=0;for(I=21453;I<=21463;I++)U[I]=0;for(I=21473;I<=21483;I++)U[I]=0;for(I=21780;I<=21782;I++)U[I]=0;for(I=21891;I<=21894;I++)U[I]=0;for(I=21896;I<=21899;I++)U[I]=0;for(I=22171;I<=22177;I++)U[I]=0;for(I=22181;I<=22187;I++)U[I]=0;for(I=22191;I<=22197;I++)U[I]=0;for(I=22207;I<=22222;I++)U[I]=0;for(I=22234;I<=22236;I++)U[I]=0;for(I=22243;I<=22250;I++)U[I]=0;for(I=22262;I<=22265;I++)U[I]=0;for(I=22307;I<=22322;I++)U[I]=0;for(I=22348;I<=22357;I++)U[I]=0;for(I=22407;I<=22422;I++)U[I]=0;for(I=22462;I<=22465;I++)U[I]=0;for(I=22521;I<=22525;I++)U[I]=0;for(I=22607;I<=22622;I++)U[I]=0;for(I=22641;I<=22646;I++)U[I]=0;for(I=22648;I<=22657;I++)U[I]=0;for(I=22707;I<=22722;I++)U[I]=0;for(I=22762;I<=22765;I++)U[I]=0;for(I=22991;I<=22994;I++)U[I]=0;for(I=23028;I<=23038;I++)U[I]=0;for(I=23830;I<=23853;I++)U[I]=0;for(I=23866;I<=23872;I++)U[I]=0;for(I=23877;I<=23884;I++)U[I]=0;for(I=23886;I<=23894;I++)U[I]=0;for(I=23946;I<=23948;I++)U[I]=0;for(I=24311;I<=24313;I++)U[I]=0;for(I=24342;I<=24347;I++)U[I]=0;for(I=24370;I<=24374;I++)U[I]=10;for(I=24375;I<=24381;I++)U[I]=0;for(I=24718;I<=24721;I++)U[I]=0;for(I=24817;I<=24821;I++)U[I]=0;for(I=24877;I<=24882;I++)U[I]=0;for(I=24891;I<=24893;I++)U[I]=0;for(I=25391;I<=25395;I++)U[I]=0;for(I=25828;I<=25838;I++)U[I]=0;for(I=26191;I<=26195;I++)U[I]=0;for(I=26391;I<=26393;I++)U[I]=0;for(I=26701;I<=26722;I++)U[I]=0;for(I=26729;I<=26799;I++)U[I]=2;for(I=26801;I<=26803;I++)U[I]=2;for(I=26811;I<=26813;I++)U[I]=2;for(I=26847;I<=26870;I++)U[I]=2;for(I=26891;I<=26899;I++)U[I]=0;for(I=26901;I<=26923;I++)U[I]=0;for(I=26929;I<=26946;I++)U[I]=0;for(I=26948;I<=26998;I++)U[I]=0;for(I=27037;I<=27040;I++)U[I]=0;for(I=27205;I<=27232;I++)U[I]=0;for(I=27258;I<=27260;I++)U[I]=0;for(I=27391;I<=27398;I++)U[I]=0;for(I=27561;I<=27564;I++)U[I]=0;for(I=27571;I<=27574;I++)U[I]=0;for(I=27581;I<=27584;I++)U[I]=0;for(I=27591;I<=27594;I++)U[I]=0;for(I=28191;I<=28193;I++)U[I]=0;for(I=28348;I<=28358;I++)U[I]=0;for(I=28402;I<=28432;I++)U[I]=0;for(I=28462;I<=28492;I++)U[I]=0;for(I=29118;I<=29122;I++)U[I]=0;for(I=29168;I<=29172;I++)U[I]=0;for(I=29177;I<=29185;I++)U[I]=0;for(I=29187;I<=29195;I++)U[I]=0;for(I=29900;I<=29903;I++)U[I]=0;for(I=30161;I<=30179;I++)U[I]=0;for(I=30491;I<=30494;I++)U[I]=0;for(I=30729;I<=30732;I++)U[I]=0;for(I=31251;I<=31259;I++)U[I]=0;for(I=31265;I<=31268;I++)U[I]=0;for(I=31275;I<=31279;I++)U[I]=0;for(I=31281;I<=31297;I++)U[I]=0;for(I=31461;I<=31469;I++)U[I]=0;for(I=31491;I<=31495;I++)U[I]=0;for(I=31917;I<=31922;I++)U[I]=0;for(I=31965;I<=32e3;I++)U[I]=0;for(I=32001;I<=32003;I++)U[I]=2;for(I=32005;I<=32031;I++)U[I]=2;for(I=32033;I<=32060;I++)U[I]=2;for(I=32064;I<=32067;I++)U[I]=2;for(I=32074;I<=32077;I++)U[I]=2;for(I=32081;I<=32086;I++)U[I]=0;for(I=32107;I<=32130;I++)U[I]=0;for(I=32133;I<=32159;I++)U[I]=0;for(I=32164;I<=32167;I++)U[I]=2;for(I=32180;I<=32199;I++)U[I]=0;for(I=32201;I<=32260;I++)U[I]=0;for(I=32301;I<=32360;I++)U[I]=0;for(I=32601;I<=32662;I++)U[I]=0;for(I=32664;I<=32667;I++)U[I]=2;for(I=32701;I<=32761;I++)U[I]=0;for(I=53001;I<=53004;I++)U[I]=0;for(I=53008;I<=53019;I++)U[I]=0;for(I=53021;I<=53032;I++)U[I]=0;for(I=53034;I<=53037;I++)U[I]=0;for(I=53042;I<=53046;I++)U[I]=0;for(I=53074;I<=53080;I++)U[I]=0;for(I=54001;I<=54004;I++)U[I]=0;for(I=54008;I<=54019;I++)U[I]=0;for(I=54021;I<=54032;I++)U[I]=0;for(I=54034;I<=54037;I++)U[I]=0;for(I=54042;I<=54046;I++)U[I]=0;for(I=54048;I<=54053;I++)U[I]=0;for(I=54074;I<=54080;I++)U[I]=0;for(I=54098;I<=54101;I++)U[I]=0;for(I=102001;I<=102040;I++)U[I]=0;for(I=102042;I<=102063;I++)U[I]=0;for(I=102065;I<=102067;I++)U[I]=0;for(I=102070;I<=102117;I++)U[I]=0;for(I=102122;I<=102216;I++)U[I]=0;for(I=102221;I<=102377;I++)U[I]=0;for(I=102382;I<=102388;I++)U[I]=0;for(I=102389;I<=102398;I++)U[I]=2;for(I=102399;I<=102444;I++)U[I]=0;for(I=102445;I<=102447;I++)U[I]=2;for(I=102448;I<=102458;I++)U[I]=0;for(I=102459;I<=102468;I++)U[I]=2;for(I=102469;I<=102499;I++)U[I]=0;for(I=102500;I<=102519;I++)U[I]=1;for(I=102520;I<=102524;I++)U[I]=0;for(I=102525;I<=102529;I++)U[I]=2;for(I=102530;I<=102588;I++)U[I]=0;for(I=102590;I<=102598;I++)U[I]=0;for(I=102601;I<=102603;I++)U[I]=0;for(I=102605;I<=102628;I++)U[I]=0;for(I=102629;I<=102646;I++)U[I]=2;for(I=102648;I<=102700;I++)U[I]=2;for(I=102701;I<=102703;I++)U[I]=0;for(I=102707;I<=102730;I++)U[I]=2;for(I=102733;I<=102758;I++)U[I]=2;for(I=102767;I<=102900;I++)U[I]=0;for(I=102901;I<=102933;I++)U[I]=2;for(I=102934;I<=102950;I++)U[I]=13;for(I=102951;I<=102955;I++)U[I]=0;for(I=102961;I<=102963;I++)U[I]=0;for(I=102965;I<=102969;I++)U[I]=0;for(I=102971;I<=102973;I++)U[I]=0;for(I=102975;I<=102989;I++)U[I]=0;for(I=102990;I<=102992;I++)U[I]=1;for(I=102997;I<=103002;I++)U[I]=0;for(I=103003;I<=103008;I++)U[I]=2;for(I=103009;I<=103011;I++)U[I]=0;for(I=103012;I<=103014;I++)U[I]=2;for(I=103019;I<=103021;I++)U[I]=0;for(I=103022;I<=103024;I++)U[I]=2;for(I=103029;I<=103031;I++)U[I]=0;for(I=103032;I<=103034;I++)U[I]=2;for(I=103065;I<=103068;I++)U[I]=0;for(I=103074;I<=103076;I++)U[I]=0;for(I=103077;I<=103079;I++)U[I]=1;for(I=103080;I<=103082;I++)U[I]=0;for(I=103083;I<=103085;I++)U[I]=2;for(I=103090;I<=103093;I++)U[I]=0;for(I=103097;I<=103099;I++)U[I]=0;for(I=103100;I<=103102;I++)U[I]=2;for(I=103107;I<=103109;I++)U[I]=0;for(I=103110;I<=103112;I++)U[I]=2;for(I=103113;I<=103116;I++)U[I]=0;for(I=103117;I<=103120;I++)U[I]=2;for(I=103153;I<=103157;I++)U[I]=0;for(I=103158;I<=103162;I++)U[I]=2;for(I=103163;I<=103165;I++)U[I]=0;for(I=103166;I<=103168;I++)U[I]=1;for(I=103169;I<=103171;I++)U[I]=2;for(I=103186;I<=103188;I++)U[I]=0;for(I=103189;I<=103191;I++)U[I]=2;for(I=103192;I<=103195;I++)U[I]=0;for(I=103196;I<=103199;I++)U[I]=2;for(I=103200;I<=103224;I++)U[I]=0;for(I=103225;I<=103227;I++)U[I]=1;for(I=103232;I<=103237;I++)U[I]=0;for(I=103238;I<=103243;I++)U[I]=2;for(I=103244;I<=103246;I++)U[I]=0;for(I=103247;I<=103249;I++)U[I]=2;for(I=103254;I<=103256;I++)U[I]=0;for(I=103257;I<=103259;I++)U[I]=2;for(I=103264;I<=103266;I++)U[I]=0;for(I=103267;I<=103269;I++)U[I]=2;for(I=103300;I<=103375;I++)U[I]=0;for(I=103381;I<=103383;I++)U[I]=0;for(I=103384;I<=103386;I++)U[I]=1;for(I=103387;I<=103389;I++)U[I]=0;for(I=103390;I<=103392;I++)U[I]=2;for(I=103397;I<=103399;I++)U[I]=0;for(I=103400;I<=103471;I++)U[I]=2;for(I=103476;I<=103478;I++)U[I]=0;for(I=103479;I<=103481;I++)U[I]=2;for(I=103486;I<=103488;I++)U[I]=0;for(I=103489;I<=103491;I++)U[I]=2;for(I=103492;I<=103495;I++)U[I]=0;for(I=103496;I<=103499;I++)U[I]=2;for(I=103528;I<=103543;I++)U[I]=0;for(I=103544;I<=103548;I++)U[I]=2;for(I=103549;I<=103551;I++)U[I]=0;for(I=103552;I<=103554;I++)U[I]=1;for(I=103555;I<=103557;I++)U[I]=2;for(I=103558;I<=103560;I++)U[I]=0;for(I=103571;I<=103573;I++)U[I]=0;for(I=103574;I<=103576;I++)U[I]=2;for(I=103577;I<=103580;I++)U[I]=0;for(I=103581;I<=103583;I++)U[I]=2;for(I=103595;I<=103694;I++)U[I]=0;for(I=103696;I<=103699;I++)U[I]=0;for(I=103700;I<=103793;I++)U[I]=2;for(I=103794;I<=103890;I++)U[I]=0;for(I=103891;I<=103896;I++)U[I]=2;for(I=103900;I<=103971;I++)U[I]=2;for(I=103972;I<=103977;I++)U[I]=0;for(I=112e3;I<=112101;I++)U[I]=0;const vW={102113:!0,102100:!0,3857:!0,3785:!0},bW={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},NT='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',ag=[-20037508342788905e-9,20037508342788905e-9],lg=[-20037508342787e-6,20037508342787e-6],oO={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ag,origin:lg,dx:1e-5},102100:{wkTemplate:NT,valid:ag,origin:lg,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ag,origin:lg,dx:1e-5},3857:{wkTemplate:NT,valid:ag,origin:lg,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function qi(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||wd(t)&&wd(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function Fo(t){return Ir(t)&&t.wkid&&oO[t.wkid]||null}function aO(t){return!!Ir(t)&&(t.wkid?U[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function wW(t){return!(PM(t)||OM(t))}function qy(t){return Ir(t)&&t.wkid===4326}function s5e(t){return Ir(t)&&t.wkid===bd.CGCS2000}function wd(t){return Ir(t)&&t.wkid!=null&&vW[t.wkid]===!0}function _W(t){return Ir(t)&&t.wkid===32662}function kM(t){return t===bd.GCSMARS2000||t===bd.GCSMARS2000_SPHERE}function PM(t){return Ir(t)&&t.wkid!=null&&kM(t.wkid)}function CM(t){return t===bd.GCSMOON2000}function OM(t){return Ir(t)&&t.wkid!=null&&CM(t.wkid)}function xW(t){return Ir(t)&&t.wkid!=null&&bW[t.wkid]===!0}function Ir(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const SW={wkid:4326,wkt:Bn(oO[4326].wkTemplate,{Central_Meridian:"0.0"})},MW={wkid:102100,latestWkid:3857},$W={wkid:32662};function LM(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const TW=LM(Yt),lO=LM($l),uO=LM(vh),IW={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Yt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function EW(t){return t!=null&&(PM(t)||qi(t,lO))?$l:t!=null&&(OM(t)||qi(t,uO))?vh:Yt}function n5e(t){return kM(t)?$l:CM(t)?vh:Yt}const hO=39.37,AW=Yt.radius*Math.PI/200,cO=/UNIT\[([^\]]+)\]\]$/i,od=U,dO=/UNIT\[([^\]]+)\]/i,kW=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),PW=rs()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),ia=t=>t*t,Kl=t=>t*t*t,Hy={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ia(.001)},"square-centimeters":{inBaseUnits:ia(.01)},"square-decimeters":{inBaseUnits:ia(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ia(1e3)},"square-inches":{inBaseUnits:ia(.0254)},"square-feet":{inBaseUnits:ia(.3048)},"square-yards":{inBaseUnits:ia(.9144)},"square-miles":{inBaseUnits:ia(1609.344)},"square-us-feet":{inBaseUnits:ia(1200/3937)},acres:{inBaseUnits:.0015625*ia(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Kl(.001)},"cubic-centimeters":{inBaseUnits:1e3*Kl(.01)},"cubic-decimeters":{inBaseUnits:1e3*Kl(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Kl(1e3)},"cubic-inches":{inBaseUnits:1e3*Kl(.0254)},"cubic-feet":{inBaseUnits:1e3*Kl(.3048)},"cubic-yards":{inBaseUnits:1e3*Kl(.9144)},"cubic-miles":{inBaseUnits:1e3*Kl(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},CW=(()=>{const t={};for(const e in Hy)for(const i in Hy[e].units)t[i]=e;return t})();function OW(t,e,i){return t*Hy[i].units[e].inBaseUnits}function LW(t,e,i){return t/Hy[i].units[e].inBaseUnits}function Lx(t){const e=CW[t];if(!e)throw new Error("unknown type");return e}function zT(t,e=null){return e=e||Lx(t),Hy[e].baseUnit===t}function vn(t,e,i){if(e===i)return t;const r=Lx(e);if(r!==Lx(i))throw new Error("incompatible units");const n=zT(e,r)?t:OW(t,e,r);return zT(i,r)?n:LW(n,i,r)}function DW(t,e,i){return vn(t,e,"meters")/(i*Math.PI/180)}function pO(t){return PW.fromJSON(t.toLowerCase())||null}function E0(t){if(t!=null&&!wW(t))return 1;const e=Bl(t);return e>1e5?1:e}function RW(t){return Bl(t)>=EW(t).metersPerDegree?"meters":yO(t)}function Bl(t,e=Yt.metersPerDegree){return jW(t,!0)??e}function jW(t,e=!1){const i=t!=null?t.wkid:null,r=t!=null?t.wkt:null;let n=null;if(i){if(kM(i))return $l.metersPerDegree;if(CM(i))return vh.metersPerDegree;n=od.values[od[i]],!n&&e&&kW.has(i)&&(n=AW)}else r&&(gO(r)?n=VT(cO.exec(r),n):mO(r)&&(n=VT(dO.exec(r),n)));return n}function o5e(t){return t.isGeographic?1:Bl(t)}function VT(t,e){return t&&t[1]?fO(t[1]):e}function fO(t){return parseFloat(t.split(",")[1])}function yO(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let r=null;if(e)r=od.units[od[e]];else if(i){const n=gO(i)?cO:mO(i)?dO:null;if(n){const l=n.exec(i);l&&l[1]&&(r=NW(l[1]))}}return r!=null?pO(r):null}function mO(t){return/^GEOCCS/i.test(t)}function gO(t){return/^PROJCS/i.test(t)}const FW=1e-7;function NW(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!od.units.includes(i)){const r=fO(t);i=null;const n=od.values;for(let l=0;l<n.length;++l)if(Math.abs(r-n[l])<FW){i=od.units[l];break}}return i}const zW={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},VW={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},BW={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},GW=rs()(zW),UW=rs()(VW),a5e=rs()(BW);var na;let zt=na=class extends ve{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return na.WebMercator;if(t.wkid===4326)return na.WGS84}const e=new na;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return qy(this)}get isWebMercator(){return wd(this)}get isGeographic(){return aO(this)}get isWrappable(){return xW(this)}get metersPerUnit(){return Bl(this)}get unit(){return yO(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===na.WGS84)return na.WGS84;if(this===na.WebMercator)return na.WebMercator;const t=new na;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=ae(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||r?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return qi(this,t)}toJSON(t){return this.write(void 0,t)}};zt.GCS_NAD_1927=null,zt.WGS84=null,zt.WebMercator=null,zt.PlateCarree=null,g([S({readOnly:!0})],zt.prototype,"isWGS84",null),g([S({readOnly:!0})],zt.prototype,"isWebMercator",null),g([S({readOnly:!0})],zt.prototype,"isGeographic",null),g([S({readOnly:!0})],zt.prototype,"isWrappable",null),g([S({type:Ct,json:{write:!0}})],zt.prototype,"latestWkid",void 0),g([S({readOnly:!0})],zt.prototype,"metersPerUnit",null),g([S({readOnly:!0})],zt.prototype,"unit",null),g([S({type:Ct,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],zt.prototype,"wkid",void 0),g([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],zt.prototype,"wkt",void 0),g([Ae("wkt"),Ae("web-scene","wkt")],zt.prototype,"writeWkt",null),g([S({type:Ct,json:{write:!0}})],zt.prototype,"vcsWkid",void 0),g([S({type:Ct,json:{write:!0}})],zt.prototype,"latestVcsWkid",void 0),g([S()],zt.prototype,"imageCoordinateSystem",void 0),zt=na=g([J("esri.geometry.SpatialReference")],zt),zt.prototype.toJSON.isDefaultToJSON=!0,zt.GCS_NAD_1927=new zt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),zt.WGS84=new zt(SW),zt.WebMercator=new zt(MW),zt.PlateCarree=new zt($W),Object.freeze&&(Object.freeze(zt.GCS_NAD_1927),Object.freeze(zt.WGS84),Object.freeze(zt.WebMercator));const dt=zt,vO="20230626",bO="b81703b48e0b92e492f4cc6b739af02a9af50038",qW="4.27";let DM=qW;DM="4.27.6";const HW={async request(t,e){var y,b;const{default:i}=await le(()=>Promise.resolve().then(()=>cJ),void 0),r=t.options,n=r.responseType;r.signal=e==null?void 0:e.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((y=eO(t.url))!=null&&y.after)?n:"array-buffer";const l=await i(t.url,r),d={data:l.data,httpStatus:l.httpStatus,ssl:l.ssl};switch((b=l.requestOptions)==null?void 0:b.responseType){case"native-request-init":return delete d.data.signal,d;case"blob":d.data=await d.data.arrayBuffer();break;case"json":d.data=new TextEncoder().encode(JSON.stringify(d.data)).buffer;break;case"text":d.data=new TextEncoder().encode(d.data).buffer}return{result:d,transferList:[d.data]}}};let wt;function l5e(t){wt=t}function u5e(t){const e=wt==null?void 0:wt.findCredential(t);return e!=null&&e.token?sO(t,"token",e.token):t}ce("host-webworker");const WW=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function wO(t){const e=jo(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!WW.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function JW(t,e,i=!1,r){return new Promise((n,l)=>{if(Uo(r))return void l(BT());let d=()=>{x(),l(new Error(`Unable to load ${e}`))},y=()=>{const $=t;x(),n($)},b=()=>{if(!t)return;const $=t;x(),$.src="",l(BT())};const x=()=>{ce("esri-image-decode")||(t.removeEventListener("error",d),t.removeEventListener("load",y)),d=null,y=null,t=null,r!=null&&r.removeEventListener("abort",b),b=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",b),ce("esri-image-decode")?t.decode().then(y,d):(t.addEventListener("error",d),t.addEventListener("load",y))})}function BT(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const YW="Timeout exceeded";function KW(){return new Error(YW)}function ZW(t){Ft.request.crossOriginNoCorsDomains||(Ft.request.crossOriginNoCorsDomains={});const e=Ft.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[jo(i)??""]=0:(e[jo("http://"+i)??""]=0,e[jo("https://"+i)??""]=0)}function XW(t){const e=Ft.request.crossOriginNoCorsDomains;if(e){let i=jo(t);if(i)return i=i.toLowerCase(),!I0(i,_M())&&e[i]<Date.now()-36e5}return!1}async function QW(t){var n;const e=Ft.request.crossOriginNoCorsDomains,i=jo(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=Ui(t);t=r.path,((n=r.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function Wt(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=xM(e.query.toString().replaceAll("+"," ")));const i=Cd(t),r=z2(t);r||i||(t=Ro(t));const n={url:t,requestOptions:{...e}};let l=eO(t);if(l){const $=await aJ(l,n);if($!=null)return{data:$,getHeader:RM,httpStatus:200,requestOptions:n.requestOptions,url:n.url};l.after||l.error||(l=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ce("host-webworker")||ce("host-node")))throw Aa("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Aa("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Aa("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await sJ(),uw)return uw.execute(t,e);const d=new AbortController;zn(e,()=>d.abort());const y={controller:d,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:n,redoRequest:!1,useIdentity:Ao.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},b=await uJ(y);return(x=l==null?void 0:l.after)==null||x.call(l,b),b}let uw;const Ao=Ft.request,_O="FormData"in globalThis,eJ=[499,498,403,401],tJ=["COM_0056","COM_0057","SB_0008"],iJ=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],RM=()=>null,hw=Symbol();function rJ(t){const e=jo(t);e&&!Wt._corsServers.includes(e)&&Wt._corsServers.push(e)}function GT(t){const e=jo(t);return!e||e.endsWith(".arcgis.com")||Wt._corsServers.includes(e)||MM(e)}function Aa(t,e,i,r){let n="Error";const l={url:i.url,requestOptions:i.requestOptions,getHeader:RM,ssl:!1};if(e instanceof se)return e.details?(e.details=ae(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=l,e;if(e){const d=r&&(x=>r.headers.get(x)),y=r==null?void 0:r.status,b=e.message;b&&(n=b),d&&(l.getHeader=d),l.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||y||0,l.subCode=e.subcode,l.messageCode=e.messageCode,typeof e.details=="string"?l.messages=[e.details]:l.messages=e.details,l.raw=hw in e?e[hw]:e}return is(e)?$i():new se(t,n,l)}async function sJ(){ce("host-webworker")?uw||(uw=await le(()=>import("./request-cadce226.js"),[])):Wt._abortableFetch||(Wt._abortableFetch=globalThis.fetch.bind(globalThis))}async function Dx(){wt||await le(()=>import("./IdentityManager-2a1f6273.js"),[])}async function nJ(t){var y;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let l=null,d=null;if(_O&&"HTMLFormElement"in globalThis&&(n instanceof FormData?l=n:n instanceof HTMLFormElement&&(l=new FormData(n))),typeof n=="string"&&(d=n),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in Wt._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ao.priority,redirect:"follow",signal:r},(l||d)&&(t.fetchOptions.body=l||d),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(y=i.query)!=null&&y.token||l!=null&&l.get("token")),!t.hasToken&&Ft.apiKey&&wO(e)&&(i.query||(i.query={}),i.query.token=Ft.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!xO(e)&&!Uo(r)){let b;i.authMode==="immediate"?(await Dx(),b=await wt.getCredential(e,{signal:r}),t.credential=b):i.authMode==="no-prompt"?(await Dx(),b=await wt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=b):wt&&(b=wt.findCredential(e)),b&&(t.credentialToken=b.token,t.useSSL=!!b.ssl)}}function xO(t){return iJ.some(e=>e.test(t))}async function oJ(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},n=z2(e)||Cd(e),l=i.responseType||"json",d=n?0:i.timeout!=null?i.timeout:Ao.timeout;let y=!1;if(!n){t.useSSL&&(e=IM(e)),i.cacheBust&&r.cache==="default"&&(e=sO(e,"request.preventCache",Date.now()));let k={...i.query};t.credentialToken&&(k.token=t.credentialToken);let P=T0(k);ce("esri-url-encodes-apostrophe")&&(P=P.replaceAll("'","%27"));const D=e.length+1+P.length;let L;y=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||D>Ao.maxUrlLength;const N=i.useProxy||!!N2(e);if(N){const B=tW(e);L=B.path,!y&&L.length+1+D>Ao.maxUrlLength&&(y=!0),B.query&&(k={...B.query,...k})}if(r.method==="HEAD"&&(y||N)){if(y)throw D>Ao.maxUrlLength?Aa("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Aa("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(N)throw Aa("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(y?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=u3(e,k):(r.body=T0(k),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=u3(e,k),N&&(t.useProxy=!0,e=`${L}?${e}`),k.token&&_O&&r.body instanceof FormData&&!GH(e)&&r.body.set("token",k.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!I0(e,_M())){if(MM(e))t.withCredentials=!0;else if(wt){const B=wt.findServerInfo(e);B!=null&&B.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",XW(e)&&await QW(y?u3(e,k):e))}let b,x,$=0,E=!1;d>0&&($=setTimeout(()=>{E=!0,t.controller.abort()},d));try{if(i.responseType==="native-request-init")x=r,x.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||y||lJ(i.headers)||!n&&!t.useProxy&&Ao.proxyUrl&&!GT(e)){if(b=await Wt._abortableFetch(e,r),t.useProxy||rJ(e),i.responseType==="native")x=b;else if(r.method!=="HEAD")if(b.ok){switch(l){case"array-buffer":x=await b.arrayBuffer();break;case"blob":case"image":x=await b.blob();break;default:x=await b.text()}if($&&(clearTimeout($),$=0),l==="json"||l==="xml"||l==="document")if(x)switch(l){case"json":x=JSON.parse(x);break;case"xml":x=UT(x,"application/xml");break;case"document":x=UT(x,"text/html")}else x=null;if(x){if(l==="array-buffer"||l==="blob"){const k=b.headers.get("Content-Type");if(k&&/application\/json|text\/plain/i.test(k)&&x[l==="blob"?"size":"byteLength"]<=750)try{const P=await new Response(x).json();P.error&&(x=P)}catch{}}l==="image"&&x instanceof Blob&&(x=await qT(URL.createObjectURL(x),t,!0))}}else{x=await b.text();try{x=JSON.parse(x)}catch{}}}else x=await qT(e,t)}catch(k){if(k.name==="AbortError")throw E?KW():$i("Request canceled");if(!(!b&&k instanceof TypeError&&Ao.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||GT(e))throw k;t.redoRequest=!0,iW({proxyUrl:Ao.proxyUrl,urlPrefix:jo(e)??""})}finally{$&&clearTimeout($)}return[b,x]}async function aJ(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Aa("request:interceptor",n,e)}if((r instanceof Error||r instanceof se)&&(i=Aa("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function lJ(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function UT(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function uJ(t){var l,d;let e,i;await nJ(t);try{do[e,i]=await oJ(t);while(!await hJ(t,e,i))}catch(y){const b=Aa("request:server",y,t.params,e);throw b.details.ssl=t.useSSL,(l=t.interceptor)!=null&&l.error&&t.interceptor.error(b),b}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((d=i.user)!=null&&d.username)&&!MM(r)){const y=jo(r,!0);y&&Ao.trustedServers.push(y)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&ZW(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&wt){const y=wt.findServerInfo(n.server);let b=y==null?void 0:y.owningSystemUrl;if(b){b=b.replace(/\/?$/,"/sharing");const x=wt.findCredential(b,n.userId);x&&wt._getIdenticalSvcIdx(b,x)===-1&&x.resources.unshift(b)}}return{data:i,getHeader:e?y=>e==null?void 0:e.headers.get(y):RM,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function hJ(t,e,i){var x;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,l;if(i&&(i.error?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[hw]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[hw]=i,n;let d,y=null;n&&(l=Number(n.code),y=n.hasOwnProperty("subcode")?Number(n.subcode):null,d=n.messageCode,d=d==null?void 0:d.toUpperCase());const b=r.authMode;if(l===403&&(y===4||(x=n.message)!=null&&x.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(b!=="no-prompt"||l===498)&&l!==void 0&&eJ.includes(l)&&!xO(t.params.url)&&(l!==403||d&&!tJ.includes(d)&&(y==null||y===2&&t.credentialToken))){await Dx();try{const $=await wt.getCredential(t.params.url,{error:Aa("request:server",n,t.params),prompt:b!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=$,t.credentialToken=$.token,t.useSSL=t.useSSL||$.ssl,!1}catch($){if(b==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=$}}if(n)throw n;return!0}function qT(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Ao.priority,n.src=t,JW(n,t,i,r)}Wt._abortableFetch=null,Wt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const cJ=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"}));function Se(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(l,d)=>{const y=l.constructor.prototype;r.forEach(b=>{const x=EC(l,b,n);x.read&&typeof x.read=="object"||(x.read={}),x.read.reader=y[d],i&&(x.read.source=(x.read.source||[]).concat(i))})}}let oa=class extends ve{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=dt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof dt)return e;if(e!=null){const r=new dt;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};g([S()],oa.prototype,"type",void 0),g([S({readOnly:!0})],oa.prototype,"cache",null),g([S({readOnly:!0})],oa.prototype,"extent",null),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],oa.prototype,"hasM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],oa.prototype,"hasZ",void 0),g([S({type:dt,json:{write:!0},value:dt.WGS84})],oa.prototype,"spatialReference",void 0),g([Se("spatialReference")],oa.prototype,"readSpatialReference",null),oa=g([J("esri.geometry.Geometry")],oa);const Ch=oa,dJ=Object.prototype.toString;function pJ(t){const e="__accessorMetadata__"in t?zi(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return fJ.apply(this,i)}}function fJ(t,e,i,r){I2(t,e).cast=r}function yJ(t){return(e,i)=>{I2(e,t).cast=e[i]}}function xt(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&dJ.call(t[0])==="[object Function]"?pJ(t[0]):t.length===1&&typeof t[0]=="string"?yJ(t[0]):void 0}function mJ(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}const gJ=57.29577951308232,vJ=.017453292519943;function HT(t){return t*gJ}function WT(t){return t*vJ}function c5e(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Yt.radius))}function Rx(t){return t.wkid!=null||t.wkt!=null}const h3=[0,0];function cw(t,e,i,r,n){const l=t,d=n;if(d.spatialReference=i,"x"in l&&"x"in d)[d.x,d.y]=e(l.x,l.y,h3,r);else if("xmin"in l&&"xmin"in d)[d.xmin,d.ymin]=e(l.xmin,l.ymin,h3,r),[d.xmax,d.ymax]=e(l.xmax,l.ymax,h3,r);else if("paths"in l&&"paths"in d||"rings"in l&&"rings"in d){const y="paths"in l?l.paths:l.rings,b=[];let x;for(let $=0;$<y.length;$++){const E=y[$];x=[],b.push(x);for(let k=0;k<E.length;k++)x.push(e(E[k][0],E[k][1],[0,0],r)),E[k].length>2&&x[k].push(E[k][2]),E[k].length>3&&x[k].push(E[k][3])}"paths"in d?d.paths=b:d.rings=b}else if("points"in l&&"points"in d){const y=l.points,b=[];for(let x=0;x<y.length;x++)b[x]=e(y[x][0],y[x][1],[0,0],r),y[x].length>2&&b[x].push(y[x][2]),y[x].length>3&&b[x].push(y[x][3]);d.points=b}return n}function Sv(t,e){const i=t&&(Rx(t)?t:t.spatialReference),r=e&&(Rx(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!qi(r,i)||wd(r)&&qy(i)||wd(i)&&qy(r))}function V2(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(Rx(e)?e:e.spatialReference);return Sv(i,r)?qi(i,r)?ae(t):wd(r)?cw(t,Hp,dt.WebMercator,!1,ae(t)):qy(r)?cw(t,ry,dt.WGS84,!1,ae(t)):null:null}function Hp(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=WT(e);return i[0]=WT(t)*Yt.radius,i[1]=Yt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function ry(t,e,i=[0,0],r=!1){const n=HT(t/Yt.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=HT(Math.PI/2-2*Math.atan(Math.exp(-e/Yt.radius))),i}function ph(t,e=!1,i=ae(t)){return cw(t,Hp,dt.WebMercator,e,i)}function Wp(t,e=!1,i=ae(t)){return cw(t,ry,dt.WGS84,e,i)}var Mv;const _f=[0,0];function JT(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let as=Mv=class extends Ch{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let l;if(Array.isArray(t))l=t,n=e,t=l[0],e=l[1],i=l[2],r=l[3];else if(t&&typeof t=="object"){if(l=t,t=l.x!=null?l.x:l.longitude,e=l.y!=null?l.y:l.latitude,i=l.z,r=l.m,(n=l.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new dt(n)),l.longitude!=null||l.latitude!=null){if(l.longitude==null)ge.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(l.latitude==null)ge.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!l.declaredClass&&n&&n.isWebMercator){const y=Hp(l.longitude,l.latitude,_f);t=y[0],e=y[1]}}}else JT(i)?(n=i,i=null):JT(r)&&(n=r,r=null);const d={x:t,y:e};return d.x==null&&d.y!=null?ge.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):d.y==null&&d.x!=null&&ge.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(d.spatialReference=n),i!=null&&(d.z=i),r!=null&&(d.m=r),d}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return ry(e,i,_f)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Hp(i,t,_f)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return ry(t,e,_f)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Hp(t,e,_f)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new Mv;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return Mv.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:l}=this,{z:d,m:y}=t;let{x:b,y:x,spatialReference:$}=t;if(!l.equals($))if(l.isWebMercator&&$.isWGS84)[b,x]=Hp(b,x),$=l;else{if(!l.isWGS84||!$.isWebMercator)return!1;[b,x]=ry(b,x),$=l}return e===b&&i===x&&r===d&&n===y&&l.wkid===$.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Fo(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let l;return e>r?(l=Math.ceil(Math.abs(e-r)/n),e-=l*n):e<i&&(l=Math.ceil(Math.abs(e-i)/n),e+=l*n),this._set("x",e),this}distance(t){return mJ(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};g([S({readOnly:!0})],as.prototype,"cache",null),g([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],as.prototype,"hasM",null),g([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],as.prototype,"hasZ",null),g([S({type:Number})],as.prototype,"latitude",null),g([S({type:Number})],as.prototype,"longitude",null),g([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),xt(t=>isNaN(t)?t:Ln(t))],as.prototype,"x",void 0),g([Ae("x")],as.prototype,"writeX",null),g([Se("x")],as.prototype,"readX",null),g([S({type:Number,json:{write:!0}})],as.prototype,"y",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],as.prototype,"z",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],as.prototype,"m",void 0),as=Mv=g([J("esri.geometry.Point")],as),as.prototype.toJSON.isDefaultToJSON=!0;const lt=as,c3=[0,0];function B2(t,e){return e!=null&&fs(t,e.x,e.y,e.z)}function d5e(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!A0(t,i))return!1;return!0}function bJ(t,e){const{xmin:i,ymin:r,zmin:n,xmax:l,ymax:d,zmax:y}=e;return t.hasZ&&e.hasZ?fs(t,i,r,n)&&fs(t,i,d,n)&&fs(t,l,d,n)&&fs(t,l,r,n)&&fs(t,i,r,y)&&fs(t,i,d,y)&&fs(t,l,d,y)&&fs(t,l,r,y):fs(t,i,r)&&fs(t,i,d)&&fs(t,l,d)&&fs(t,l,r)}function A0(t,e){return fs(t,e[0],e[1])}function wJ(t,e){return fs(t,e[0],e[1],e[2])}function fs(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function SO(t,e){return c3[1]=e.y,c3[0]=e.x,_J(t,c3)}function _J(t,e){return MO(t.rings,e)}function MO(t,e){if(!t)return!1;if(xJ(t))return YT(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=YT(i,t[r],e);return i}function xJ(t){return!Array.isArray(t[0][0])}function YT(t,e,i){const[r,n]=i;let l=t,d=0;for(let y=0,b=e.length;y<b;y++){d++,d===b&&(d=0);const[x,$]=e[y],[E,k]=e[d];($<n&&k>=n||k<n&&$>=n)&&x+(n-$)/(k-$)*(E-x)<r&&(l=!l)}return l}function SJ(t,e){return B2(t,e)}function MJ(t,e){const i=t.hasZ&&e.hasZ;let r,n,l;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(l=e.zmin,t.zmax<l)return!1}else if(l=t.zmin,e.zmax<l)return!1}return!0}function $J(t,e){const{points:i,hasZ:r}=e,n=r?wJ:A0;for(const l of i)if(n(t,l))return!0;return!1}const _d=[0,0],xd=[0,0],Sd=[0,0],Md=[0,0],TJ=[_d,xd,Sd,Md],$O=[[Sd,_d],[_d,xd],[xd,Md],[Md,Sd]];function IJ(t,e){return EJ(t,e.rings)}function EJ(t,e){_d[0]=t.xmin,_d[1]=t.ymax,xd[0]=t.xmax,xd[1]=t.ymax,Sd[0]=t.xmin,Sd[1]=t.ymin,Md[0]=t.xmax,Md[1]=t.ymin;for(const i of TJ)if(MO(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(A0(t,r))return!0;for(let n=1;n<i.length;n++){const l=i[n];if(A0(t,l)||TO(r,l,$O))return!0;r=l}}return!1}function AJ(t,e){_d[0]=t.xmin,_d[1]=t.ymax,xd[0]=t.xmax,xd[1]=t.ymax,Sd[0]=t.xmin,Sd[1]=t.ymin,Md[0]=t.xmax,Md[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(A0(t,n))return!0;for(let l=1;l<r.length;l++){const d=r[l];if(A0(t,d)||TO(n,d,$O))return!0;n=d}}return!1}const wr=[0,0];function kJ(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const l=i[n],d=i[n+1];for(let y=e+1;y<t.length;y++)for(let b=0;b<t[y].length-1;b++){const x=t[y][b],$=t[y][b+1];if(jx(l,d,x,$,wr)&&!(wr[0]===l[0]&&wr[1]===l[1]||wr[0]===x[0]&&wr[1]===x[1]||wr[0]===d[0]&&wr[1]===d[1]||wr[0]===$[0]&&wr[1]===$[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let l=r-1;n===0&&(l=r-2);const d=i[n],y=i[n+1];for(let b=n+2;b<l;b++){const x=i[b],$=i[b+1];if(jx(d,y,x,$,wr)&&!(wr[0]===d[0]&&wr[1]===d[1]||wr[0]===x[0]&&wr[1]===x[1]||wr[0]===y[0]&&wr[1]===y[1]||wr[0]===$[0]&&wr[1]===$[1]))return!0}}}return!1}function TO(t,e,i){for(let r=0;r<i.length;r++)if(jx(t,e,i[r][0],i[r][1]))return!0;return!1}function jx(t,e,i,r,n){const[l,d]=t,[y,b]=e,[x,$]=i,[E,k]=r,P=E-x,D=l-x,L=y-l,N=k-$,B=d-$,W=b-d,H=N*L-P*W;if(H===0)return!1;const Y=(P*B-N*D)/H,ie=(L*B-W*D)/H;return Y>=0&&Y<=1&&ie>=0&&ie<=1&&(n&&(n[0]=l+Y*(y-l),n[1]=d+Y*(b-d)),!0)}function PJ(t){switch(t){case"esriGeometryEnvelope":case"extent":return MJ;case"esriGeometryMultipoint":case"multipoint":return $J;case"esriGeometryPoint":case"point":return SJ;case"esriGeometryPolygon":case"polygon":return IJ;case"esriGeometryPolyline":case"polyline":return AJ}}var bn;function CJ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Zl(t,e,i){return e==null?i:i==null?e:t(e,i)}let nr=bn=class extends Ch{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return CJ(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?dt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??dt.WGS84}}static fromBounds(t,e){return new bn({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new bn({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new lt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new bn;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Sv(e,i)&&(t=e.isWebMercator?ph(t):Wp(t,!0)),t.type==="point"?B2(this,t):t.type==="extent"&&bJ(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Sv(e,i)&&(t=e.isWebMercator?ph(t):Wp(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!qi(e,i)&&Sv(e,i)&&(t=e.isWebMercator?ph(t):Wp(t,!0)),PJ(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Zl(Math.min,this.zmin,t.zmin),this.zmax=Zl(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Zl(Math.min,this.mmin,t.mmin),this.mmax=Zl(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Zl(Math.max,this.zmin,t.zmin),this.zmax=Zl(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Zl(Math.max,this.mmin,t.mmin),this.mmax=Zl(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Fo(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Wp(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new dt(Bn((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,l=this.xmax;return n>=i&&n<=r&&l>=i&&l<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??Fo(r);if(n==null)return this;const l=this._getParts(n).map(b=>b.extent);if(l.length<2)return l[0]||this;if(l.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return l;let d=!0,y=!0;return l.forEach(b=>{b.hasZ||(d=!1),b.hasM||(y=!1)}),{rings:l.map(b=>{const x=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(d){const $=(b.zmax-b.zmin)/2;for(let E=0;E<x.length;E++)x[E].push($)}if(y){const $=(b.mmax-b.mmin)/2;for(let E=0;E<x.length;E++)x[E].push($)}return x}),hasZ:d,hasM:y,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:l,spatialReference:d}=this,y=this.width,b=this.xmin,x=this.xmax;let $;t=t||Fo(d);const[E,k]=t.valid;$=this._normalizeX(this.xmin,t);const P=$.x,D=$.frameId;$=this._normalizeX(this.xmax,t);const L=$.x,N=$.frameId,B=P===L&&y>0;if(y>2*k){const W=new bn(b<x?P:L,n,k,l,d),H=new bn(E,n,b<x?L:P,l,d),Y=new bn(0,n,k,l,d),ie=new bn(E,n,0,l,d),ne=[],he=[];W.contains(Y)&&ne.push(D),W.contains(ie)&&he.push(D),H.contains(Y)&&ne.push(N),H.contains(ie)&&he.push(N);for(let de=D+1;de<N;de++)ne.push(de),he.push(de);e.push({extent:W,frameIds:[D]},{extent:H,frameIds:[N]},{extent:Y,frameIds:ne},{extent:ie,frameIds:he})}else P>L||B?e.push({extent:new bn(P,n,k,l,d),frameIds:[D]},{extent:new bn(E,n,L,l,d),frameIds:[N]}):e.push({extent:new bn(P,n,L,l,d),frameIds:[D]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let l=0;l<e.length;l++)e[l].extent.set(n)}return e}_normalizeX(t,e){const[i,r]=e.valid,n=2*r;let l,d=0;return t>r?(l=Math.ceil(Math.abs(t-r)/n),t-=l*n,d=l):t<i&&(l=Math.ceil(Math.abs(t-i)/n),t+=l*n,d=-l),{x:t,frameId:d}}};g([S({readOnly:!0})],nr.prototype,"cache",null),g([S({readOnly:!0})],nr.prototype,"center",null),g([S({readOnly:!0})],nr.prototype,"extent",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],nr.prototype,"hasM",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],nr.prototype,"hasZ",null),g([S({readOnly:!0})],nr.prototype,"height",null),g([S({readOnly:!0})],nr.prototype,"width",null),g([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],nr.prototype,"xmin",void 0),g([S({type:Number,json:{write:!0}})],nr.prototype,"ymin",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],nr.prototype,"mmin",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],nr.prototype,"zmin",void 0),g([S({type:Number,json:{write:!0}})],nr.prototype,"xmax",void 0),g([S({type:Number,json:{write:!0}})],nr.prototype,"ymax",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],nr.prototype,"mmax",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],nr.prototype,"zmax",void 0),nr=bn=g([J("esri.geometry.Extent")],nr),nr.prototype.toJSON.isDefaultToJSON=!0;const Nt=nr;let sy;var RP,jP;const OJ=((RP=globalThis.esriConfig)==null?void 0:RP.locale)??((jP=globalThis.dojoConfig)==null?void 0:jP.locale);function IO(){var t;return OJ??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Vn(){return sy===void 0&&(sy=IO()),sy}const ny=[];function EO(t){return ny.push(t),{remove(){ny.splice(ny.indexOf(t),1)}}}const Fx=[];function jM(t){return Fx.push(t),{remove(){ny.splice(Fx.indexOf(t),1)}}}function LJ(){const t=IO();sy!==t&&(sy=t,[...Fx].forEach(e=>{e.call(null,t)}),[...ny].forEach(e=>{e.call(null,t)}))}var FP;(FP=globalThis.addEventListener)==null||FP.call(globalThis,"languagechange",LJ);let ug;function DJ(t){return ug&&!ug.destroyed||(ug=t()),ug}var Nx;const RJ=new _t({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let wn=Nx=class extends Be{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Nx({categories:this.categories?ae(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(d=>Array.isArray(d)?JSON.stringify(d):d));let r="";if(this.extent){const d=V2(this.extent,dt.WGS84);d!=null&&(r=`${d.xmin},${d.ymin},${d.xmax},${d.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const l={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(l.sortField=this.sortField.split(",").map(d=>RJ.toJSON(d.trim())).join(","),l.sortOrder=this.sortOrder),{query:{...e,...l}}}};g([S()],wn.prototype,"categories",void 0),g([S()],wn.prototype,"disableExtraQuery",void 0),g([S({type:Nt})],wn.prototype,"extent",void 0),g([S()],wn.prototype,"filter",void 0),g([S()],wn.prototype,"num",void 0),g([S()],wn.prototype,"query",void 0),g([S()],wn.prototype,"sortField",void 0),g([S()],wn.prototype,"sortOrder",null),g([S()],wn.prototype,"start",void 0),wn=Nx=g([J("esri.portal.PortalQueryParams")],wn);const Ea=wn;let ec=class extends Be{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};g([S()],ec.prototype,"nextQueryParams",void 0),g([S()],ec.prototype,"queryParams",void 0),g([S()],ec.prototype,"results",void 0),g([S()],ec.prototype,"total",void 0),ec=g([J("esri.portal.PortalQueryResult")],ec);const jJ=ec;let Ya=class extends ve{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new se("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};g([S({type:Date})],Ya.prototype,"created",void 0),g([S()],Ya.prototype,"id",void 0),g([S()],Ya.prototype,"portal",void 0),g([S()],Ya.prototype,"title",void 0),g([S({readOnly:!0})],Ya.prototype,"url",null),g([S()],Ya.prototype,"username",void 0),Ya=g([J("esri.portal.PortalFolder")],Ya);const FJ=Ya;let or=class extends ve{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return fr(this.portal).request(this.url+"/categorySchema",e).then(i=>{const r=i.categorySchema||[];return r.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return fr(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new se("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let r=zi(Ea,e);const n=fr(this.portal);return parseFloat(n.currentVersion)>5?(r=r||new Ea,n.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new Ea,r.query="group:"+this.id+(r.query?" "+r.query:""),n.queryItems(r,i))}_fetchCategorySchemaSet(e,i){const r=fr(this.portal);return r.fetchSelf(r.authMode,!0,i).then(n=>{const l=n.contentCategorySetsGroupQuery;if(l){const d=new Ea;return d.disableExtraQuery=!0,d.num=1,d.query=l,r.queryGroups(d,i)}throw new se("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const l=n.results[0],d=new Ea;return d.num=1,d.query=`typekeywords:"${e}"`,l.queryItems(d,i)}throw new se("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",i).then(l=>{const d=l&&l.categorySchema;return d&&d.length?d:[]}):[])}};g([S()],or.prototype,"access",void 0),g([S({type:Date})],or.prototype,"created",void 0),g([S()],or.prototype,"description",void 0),g([S()],or.prototype,"id",void 0),g([S()],or.prototype,"isInvitationOnly",void 0),g([S({type:Date})],or.prototype,"modified",void 0),g([S()],or.prototype,"owner",void 0),g([S()],or.prototype,"portal",void 0),g([S()],or.prototype,"snippet",void 0),g([S()],or.prototype,"sortField",void 0),g([S()],or.prototype,"sortOrder",void 0),g([S()],or.prototype,"tags",void 0),g([S()],or.prototype,"thumbnail",void 0),g([S({readOnly:!0})],or.prototype,"thumbnailUrl",null),g([S()],or.prototype,"title",void 0),g([S({readOnly:!0})],or.prototype,"url",null),or=g([J("esri.portal.PortalGroup")],or);const zx=or,NJ=Object.freeze(Object.defineProperty({__proto__:null,default:zx},Symbol.toStringTag,{value:"Module"}));var Vx;let li=Vx=class extends ve{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,r=t&&t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let l=this.userContentUrl;return r&&(l+="/"+(typeof r=="string"?r:r.id)),this.portal.request(l+"/addItem",n).then(d=>(e.id=d.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=FJ.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=zx.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),le(()=>Promise.resolve().then(()=>AO),void 0).then(({default:n})=>{i=n;const l={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:l})}).then(n=>{let l;return n&&n.items?(l=n.items.map(d=>{const y=i.fromJSON(d);return y.portal=this.portal,y}),Promise.all(l.map(d=>d.load())).catch(d=>d).then(()=>({items:l,nextStart:n.nextStart,total:n.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new zx({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new se("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new se("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Vx;return e.sourceJSON=t,e.read(t),e}};g([S()],li.prototype,"access",void 0),g([S({type:Date})],li.prototype,"created",void 0),g([S()],li.prototype,"culture",void 0),g([S()],li.prototype,"description",void 0),g([S()],li.prototype,"email",void 0),g([S()],li.prototype,"favGroupId",void 0),g([S()],li.prototype,"fullName",void 0),g([S({type:Date})],li.prototype,"modified",void 0),g([S()],li.prototype,"orgId",void 0),g([S()],li.prototype,"portal",void 0),g([S()],li.prototype,"preferredView",void 0),g([S()],li.prototype,"privileges",void 0),g([S()],li.prototype,"region",void 0),g([S()],li.prototype,"role",void 0),g([S()],li.prototype,"roleId",void 0),g([S()],li.prototype,"sourceJSON",void 0),g([S()],li.prototype,"thumbnail",void 0),g([S({readOnly:!0})],li.prototype,"thumbnailUrl",null),g([S()],li.prototype,"units",void 0),g([S({readOnly:!0})],li.prototype,"userContentUrl",null),g([S({readOnly:!0})],li.prototype,"url",null),g([S()],li.prototype,"username",void 0),g([S()],li.prototype,"userType",void 0),li=Vx=g([J("esri.portal.PortalUser")],li);const FM=li,zJ=Object.freeze(Object.defineProperty({__proto__:null,default:FM},Symbol.toStringTag,{value:"Module"}));var Ka;let hg;const KT={PortalGroup:()=>le(()=>Promise.resolve().then(()=>NJ),void 0),PortalItem:()=>le(()=>Promise.resolve().then(()=>AO),void 0),PortalUser:()=>le(()=>Promise.resolve().then(()=>zJ),void 0)};let Ee=Ka=class extends wm(qo){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ft.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){ZT.unregister(this),this.defaultBasemap=ei(this.defaultBasemap),this.defaultDevBasemap=ei(this.defaultDevBasemap),this.defaultVectorBasemap=ei(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Mi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Ft.request.trustedServers.includes(e)||Ft.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=FM.fromJSON(t),e.portal=this),e}load(t){const e=le(()=>Promise.resolve().then(()=>cY),void 0).then(({default:i})=>{ai(t),hg=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if(wt){const n=wt;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Ka.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",VJ(new WeakRef(this))),ZT.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await le(()=>import("./ElevationLayer-34dd59d4.js"),["assets/ElevationLayer-34dd59d4.js","assets/ArcGISCachedService-65ae81b6.js","assets/TileInfoTilemapCache-b9da4919.js","assets/TilemapCache-8f0dd770.js"])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(t,e);i.unshift(...r)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Uo(t)?Promise.reject($i()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Ea;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const n of e)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return Uo(t)?Promise.reject($i()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Vn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Vn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return DJ(()=>new Ka)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",n={authMode:t,query:{culture:Vn().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(r,n)}queryPortal(t,e,i,r){const n=zi(Ea,e),l=d=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...r}).then(y=>{const b=n.clone();return b.start=y.nextStart,new jJ({nextQueryParams:b,queryParams:n,total:y.total,results:Ka._resultsToTypedArray(d,{portal:this},y,r)})}).then(y=>Promise.all(y.results.map(b=>typeof b.when=="function"?b.when():y)).then(()=>y,b=>(On(b),y)));return i&&KT[i]?KT[i]().then(({default:d})=>(ai(r),l(d))):l()}signIn(){if(this.authMode===Ka.AUTH_MODE_ANONYMOUS)return Promise.reject(new se("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return wt?wt.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const n=Ka._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(l=>typeof l.when=="function"?l.when():r)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===Ka.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:l=!1,method:d="auto",responseType:y="json",signal:b}=e,x={authMode:r,body:n,cacheBust:l,method:d,query:i,responseType:y,timeout:0,signal:b};return Wt(this._normalizeSSL(t),x).then($=>$.data)}toJSON(){throw new se("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Ka({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new se("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Ea;i.query=t||(Ft.apiKey&&wO(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,e);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const l=await n.queryItems(i,e);return l.total?l.results.filter(d=>d.type==="Web Map").map(d=>new hg({portalItem:d})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new Ea({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,e);if(!n.total)return[];const l=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=l.sortField||"name",r.sortOrder=l.sortOrder||"desc";const d=await l.queryItems(r,e);return d.total?d.results.filter(y=>y.type==="Web Scene").map(y=>new hg({portalItem:y})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=hg.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let n=[];if(i){const l=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(d=>{const y=Object.assign(t?t.fromJSON(d):d,e);return typeof y.load=="function"&&y.load(l),y}))}else n=[];return n}};Ee.AUTH_MODE_ANONYMOUS="anonymous",Ee.AUTH_MODE_AUTO="auto",Ee.AUTH_MODE_IMMEDIATE="immediate",g([S()],Ee.prototype,"access",void 0),g([S()],Ee.prototype,"allSSL",void 0),g([S()],Ee.prototype,"authMode",void 0),g([S()],Ee.prototype,"authorizedCrossOriginDomains",void 0),g([Se("authorizedCrossOriginDomains")],Ee.prototype,"readAuthorizedCrossOriginDomains",null),g([S()],Ee.prototype,"basemapGalleryGroupQuery",void 0),g([S({json:{name:"3DBasemapGalleryGroupQuery"}})],Ee.prototype,"basemapGalleryGroupQuery3D",void 0),g([S()],Ee.prototype,"bingKey",void 0),g([S()],Ee.prototype,"canListApps",void 0),g([S()],Ee.prototype,"canListData",void 0),g([S()],Ee.prototype,"canListPreProvisionedItems",void 0),g([S()],Ee.prototype,"canProvisionDirectPurchase",void 0),g([S()],Ee.prototype,"canSearchPublic",void 0),g([S()],Ee.prototype,"canShareBingPublic",void 0),g([S()],Ee.prototype,"canSharePublic",void 0),g([S()],Ee.prototype,"canSignInArcGIS",void 0),g([S()],Ee.prototype,"canSignInIDP",void 0),g([S()],Ee.prototype,"colorSetsGroupQuery",void 0),g([S()],Ee.prototype,"commentsEnabled",void 0),g([S({type:Date})],Ee.prototype,"created",void 0),g([S()],Ee.prototype,"credential",void 0),g([S()],Ee.prototype,"culture",void 0),g([S()],Ee.prototype,"currentVersion",void 0),g([S()],Ee.prototype,"customBaseUrl",void 0),g([S()],Ee.prototype,"defaultBasemap",void 0),g([Se("defaultBasemap")],Ee.prototype,"readDefaultBasemap",null),g([S()],Ee.prototype,"defaultDevBasemap",void 0),g([Se("defaultDevBasemap")],Ee.prototype,"readDefaultDevBasemap",null),g([S({type:Nt})],Ee.prototype,"defaultExtent",void 0),g([S()],Ee.prototype,"defaultVectorBasemap",void 0),g([Se("defaultVectorBasemap")],Ee.prototype,"readDefaultVectorBasemap",null),g([S()],Ee.prototype,"description",void 0),g([S()],Ee.prototype,"devBasemapGalleryGroupQuery",void 0),g([S()],Ee.prototype,"eueiEnabled",void 0),g([S({readOnly:!0})],Ee.prototype,"extraQuery",null),g([S()],Ee.prototype,"featuredGroups",void 0),g([S()],Ee.prototype,"featuredItemsGroupQuery",void 0),g([S()],Ee.prototype,"galleryTemplatesGroupQuery",void 0),g([S()],Ee.prototype,"livingAtlasGroupQuery",void 0),g([S()],Ee.prototype,"hasCategorySchema",void 0),g([S()],Ee.prototype,"helpBase",void 0),g([S()],Ee.prototype,"helperServices",void 0),g([S()],Ee.prototype,"helpMap",void 0),g([S()],Ee.prototype,"homePageFeaturedContent",void 0),g([S()],Ee.prototype,"homePageFeaturedContentCount",void 0),g([S()],Ee.prototype,"httpPort",void 0),g([S()],Ee.prototype,"httpsPort",void 0),g([S()],Ee.prototype,"id",void 0),g([S()],Ee.prototype,"ipCntryCode",void 0),g([S({readOnly:!0})],Ee.prototype,"isOrganization",null),g([S()],Ee.prototype,"isPortal",void 0),g([S()],Ee.prototype,"isReadOnly",void 0),g([S({readOnly:!0})],Ee.prototype,"itemPageUrl",null),g([S()],Ee.prototype,"layerTemplatesGroupQuery",void 0),g([S()],Ee.prototype,"maxTokenExpirationMinutes",void 0),g([S({type:Date})],Ee.prototype,"modified",void 0),g([S()],Ee.prototype,"name",void 0),g([S()],Ee.prototype,"portalHostname",void 0),g([S()],Ee.prototype,"portalMode",void 0),g([S()],Ee.prototype,"portalProperties",void 0),g([S()],Ee.prototype,"region",void 0),g([S({readOnly:!0})],Ee.prototype,"restUrl",null),g([S()],Ee.prototype,"rotatorPanels",void 0),g([S()],Ee.prototype,"showHomePageDescription",void 0),g([S()],Ee.prototype,"sourceJSON",void 0),g([S()],Ee.prototype,"staticImagesUrl",void 0),g([S({json:{name:"2DStylesGroupQuery"}})],Ee.prototype,"stylesGroupQuery2d",void 0),g([S({json:{name:"stylesGroupQuery"}})],Ee.prototype,"stylesGroupQuery3d",void 0),g([S()],Ee.prototype,"supportsHostedServices",void 0),g([S()],Ee.prototype,"symbolSetsGroupQuery",void 0),g([S()],Ee.prototype,"templatesGroupQuery",void 0),g([S()],Ee.prototype,"thumbnail",void 0),g([S({readOnly:!0})],Ee.prototype,"thumbnailUrl",null),g([S()],Ee.prototype,"units",void 0),g([S()],Ee.prototype,"url",void 0),g([S()],Ee.prototype,"urlKey",void 0),g([Se("urlKey")],Ee.prototype,"readUrlKey",null),g([S()],Ee.prototype,"user",void 0),g([Se("user")],Ee.prototype,"readUser",null),g([S()],Ee.prototype,"use3dBasemaps",void 0),g([S()],Ee.prototype,"useStandardizedQuery",void 0),g([S()],Ee.prototype,"useVectorBasemaps",void 0),g([S()],Ee.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ee=Ka=g([J("esri.portal.Portal")],Ee);const ts=Ee,ZT=new FinalizationRegistry(t=>{t.remove()});function VJ(t){const e=wt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const BJ=ge.getLogger("esri.assets");function It(t){if(!Ft.assetsPath)throw BJ.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new se("assets:path-not-set","config.assetsPath is not set");return Ll(Ft.assetsPath,t)}let Za=class extends Be{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&an(e)?ge.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new se("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:r}=await le(()=>import("./resourceUtils-72b23525.js"),[]);return r(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&an(e)&&(e=$M(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};g([S()],Za.prototype,"portalItem",void 0),g([S({type:String,value:null})],Za.prototype,"path",null),g([xt("path")],Za.prototype,"_castPath",null),g([S({type:String,readOnly:!0})],Za.prototype,"url",null),g([S({type:String,readOnly:!0})],Za.prototype,"cdnUrl",null),g([S({type:String,readOnly:!0})],Za.prototype,"itemRelativeUrl",null),Za=g([J("esri.portal.PortalItemResource")],Za);const GJ=Za;let Yf=class extends Be{constructor(e){super(e),this.created=null,this.rating=null}};g([S()],Yf.prototype,"created",void 0),g([S()],Yf.prototype,"rating",void 0),Yf=g([J("esri.portal.PortalRating")],Yf);const d3=Yf;var tc;const UJ=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),qJ=new Set(["KML","GeoJson","CSV"]);let ht=tc=class extends wm(qo){static from(t){return $0(tc,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new Nt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,l=!1,d=!1,y=!1,b=!1,x=!1,$=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(l=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(d=e.includes("Table"),y=e.includes("Route Layer"),b=e.includes("Markup"),x=e.includes("Spatiotemporal"),$=e.includes("UtilityNetwork"),n=x&&d?"spatiotemporaltable":d?"table":y?"routelayer":b?"markup":x?"spatiotemporal":l?"featureshosted":$?"utilitynetwork":"features"):n=t==="map service"||t==="wms"||t==="wmts"?l||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):n=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="360 vr experience"?"360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":t==="data pipeline"?"datapipelines":"maps",n?It(i+n+r+".png"):null}get isLayer(){return this.type!=null&&UJ.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&wt&&!wt.findCredential(t)&&(t=wt._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ts.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof d3&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new d3({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:ae(this.applicationProxies),avgRating:this.avgRating,categories:ae(this.categories),created:ae(this.created),culture:this.culture,description:this.description,extent:ae(this.extent),groupCategories:ae(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ae(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ae(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ae(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ae(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new tc({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const r of["tags","typeKeywords","categories"])t[r]=(i=t[r])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await fr(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return fr(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await fr(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new d3(e)):null}fetchRelatedItems(t,e){return fr(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},tc)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return fr(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>fr(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new se("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new se("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await fr(e).signIn();const{copyResources:r,folder:n,tags:l,title:d}=t||{},y={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:l==null?void 0:l.join(","),title:d}},{itemId:b}=await e.request(`${i}/copy`,y);return new tc({id:b,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Cd(e)?r.query={data:e}:r.query={url:Rn(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new se("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await le(()=>import("./resourceUtils-72b23525.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:r}=await le(()=>import("./resourceUtils-72b23525.js"),[]);return t.portalItem=this,r(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await le(()=>import("./resourceUtils-72b23525.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new se("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await le(()=>import("./resourceUtils-72b23525.js"),[]);return e(this,t)}resourceFromPath(t){return new GJ({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:ae(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ae(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ae(this.typeKeywords),url:this.url};return HP(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new tc({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};g([S({type:["private","shared","org","public"]})],ht.prototype,"access",void 0),g([S()],ht.prototype,"accessInformation",void 0),g([S({type:String})],ht.prototype,"apiKey",void 0),g([S({json:{read:{source:"appProxies"}}})],ht.prototype,"applicationProxies",void 0),g([S()],ht.prototype,"avgRating",void 0),g([S()],ht.prototype,"categories",void 0),g([S({type:Date})],ht.prototype,"created",void 0),g([S()],ht.prototype,"culture",void 0),g([S()],ht.prototype,"description",void 0),g([S({readOnly:!0})],ht.prototype,"displayName",null),g([S({type:Nt})],ht.prototype,"extent",void 0),g([Se("extent")],ht.prototype,"readExtent",null),g([S()],ht.prototype,"groupCategories",void 0),g([S({readOnly:!0})],ht.prototype,"iconUrl",null),g([S()],ht.prototype,"id",void 0),g([S({readOnly:!0})],ht.prototype,"isLayer",null),g([S({type:Boolean,readOnly:!0})],ht.prototype,"isOrgItem",void 0),g([S()],ht.prototype,"itemControl",void 0),g([S({readOnly:!0})],ht.prototype,"itemPageUrl",null),g([S({readOnly:!0})],ht.prototype,"itemUrl",null),g([S()],ht.prototype,"licenseInfo",void 0),g([S({type:Date})],ht.prototype,"modified",void 0),g([S()],ht.prototype,"name",void 0),g([S()],ht.prototype,"numComments",void 0),g([S()],ht.prototype,"numRatings",void 0),g([S()],ht.prototype,"numViews",void 0),g([S()],ht.prototype,"owner",void 0),g([S()],ht.prototype,"ownerFolder",void 0),g([S({type:ts})],ht.prototype,"portal",void 0),g([S()],ht.prototype,"screenshots",void 0),g([S()],ht.prototype,"size",void 0),g([S()],ht.prototype,"snippet",void 0),g([S()],ht.prototype,"sourceJSON",void 0),g([S({type:String})],ht.prototype,"sourceUrl",void 0),g([S({type:String})],ht.prototype,"spatialReference",void 0),g([S()],ht.prototype,"tags",void 0),g([S()],ht.prototype,"thumbnail",void 0),g([S({readOnly:!0})],ht.prototype,"thumbnailUrl",null),g([S()],ht.prototype,"title",void 0),g([S()],ht.prototype,"type",void 0),g([S()],ht.prototype,"typeKeywords",void 0),g([S({type:String,json:{read(t,e){var i;if(qJ.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],ht.prototype,"url",void 0),g([S({readOnly:!0})],ht.prototype,"userItemUrl",null),ht=tc=g([J("esri.portal.PortalItem")],ht);const oy=ht,AO=Object.freeze(Object.defineProperty({__proto__:null,default:oy},Symbol.toStringTag,{value:"Module"})),XT=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,HJ={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function QT(t){return t in HJ}const Kf=[],u0=new Map;function eI(t){for(const e of u0.keys())PO(t.pattern,e)&&u0.delete(e)}function WJ(t){return Kf.includes(t)||(eI(t),Kf.unshift(t)),{remove(){const e=Kf.indexOf(t);e>-1&&(Kf.splice(e,1),eI(t))}}}async function kO(t){const e=Vn();u0.has(t)||u0.set(t,YJ(t,e));const i=u0.get(t);return i&&await KJ.add(i),i}function JJ(t){if(!XT.test(t))return null;const e=XT.exec(t);if(e===null)return null;const[,i,r]=e,n=i+(r?"-"+r.toUpperCase():"");return QT(n)?n:QT(i)?i:null}async function YJ(t,e){const i=[];for(const r of Kf)if(PO(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new se("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new se("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function PO(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}jM(()=>{u0.clear()});const KJ=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Gn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function ZJ(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await kO("esri/t9n/basemaps");return i[t]||i[e]}const Bx={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return It("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return It("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return It("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return It("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return It("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return It("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return It("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return It("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return It("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return It("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function XJ(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}const v5e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function CO(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function NM(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function b5e(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function OO(t,e){const i=wt==null?void 0:wt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.substring(0,r)}/rest/info`,l=e!=null?e.signal:null,{data:d}=await Wt(n,{query:{f:"json"},responseType:"json",signal:l});return(d==null?void 0:d.owningSystemUrl)||null}function QJ(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function LO(t){return QJ(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function eY(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function tY(t){return!!eY(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const iY=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),rY=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function sY(t){return t.layerContainerType==="basemap"?iY:t.layerContainerType==="operational-layers"?rY:null}function nY(t,e){if(e.restrictedWebMapWriting){const i=sY(e);return i==null||i.has(t.type)&&!NM(t)}return!0}function oY(t,e){if(e)if(NM(t)){const i=vm("featureCollection.layers",e),r=i&&i[0]&&i[0].layerDefinition;r&&tI(t,r)}else t.type!=="group"&&tI(t,e)}function tI(t,e){"maxScale"in t&&(e.maxScale=sw(t.maxScale)??void 0),"minScale"in t&&(e.minScale=sw(t.minScale)??void 0)}function aY(t,e){if(oY(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=sw(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(NM(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function iI(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new se("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(nY(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&aY(t,e=ae(e)),e}var $v;let lY=0;const DO="esri.Basemap";let _n=$v=class extends wm(qo){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+lY++,this.baseLayers=new ze,this.referenceLayers=new ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&ge.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{ge.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const r of t)r.destroy();const e=this.referenceLayers.removeAll();for(const r of e)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",vd(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const l=iI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);l!=null&&r.push(l)}),this.referenceLayers.forEach(n=>{const l=iI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);l!=null&&(n.type!=="scene"&&(l.isReference=!0),r.push(l))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",vd(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return bM(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Ub(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Ub(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new $v({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=ae(i);return r.url&&Oa(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&Oa(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;ai(t);const r=[];if(e){const n=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,n,t)),e.data.id&&!e.data.title){const l=e.data.id;r.push(ZJ(l).then(d=>{d&&this.read({title:d},e.context)}))}}else i&&r.push(this._loadFromItem(i,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,l=hY[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:d}=await le(()=>import("./layersCreator-18391385.js"),["assets/layersCreator-18391385.js","assets/lazyLayerLoader-42482be4.js","assets/portalLayers-11ecdd8f.js","assets/layersLoader-2039c3aa.js","assets/fetchService-509c5174.js","assets/jsonContext-e51bc28f.js"]),y=[];if(ai(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const b={context:{origin:l,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},x=k=>l==="web-scene"&&k.layerType==="ArcGISSceneServiceLayer"||k.isReference,$=d(this.baseLayers,t.baseMapLayers.filter(k=>!x(k)),b);y.push($);const E=d(this.referenceLayers,t.baseMapLayers.filter(x),b);y.push(E)}await ws(y)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=Ui(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:uY[t.type||""]??"web-map",portal:t.portal||ts.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||ts.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}static fromId(t){const e=Bx[t];if(!e)return null;if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),nw(ge.getLogger(DO),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return $v.fromJSON(e)}};g([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ze}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],_n.prototype,"baseLayers",null),g([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],_n.prototype,"id",void 0),g([S({type:oy})],_n.prototype,"portalItem",void 0),g([S()],_n.prototype,"referenceLayers",null),g([S({readOnly:!0})],_n.prototype,"resourceInfo",void 0),g([S({type:dt})],_n.prototype,"spatialReference",void 0),g([S()],_n.prototype,"thumbnailUrl",void 0),g([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],_n.prototype,"title",void 0),g([Ae("title")],_n.prototype,"writeTitle",null),_n=$v=g([J(DO)],_n);const uY={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},hY={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},dw=_n,cY=Object.freeze(Object.defineProperty({__proto__:null,default:dw},Symbol.toStringTag,{value:"Module"})),pw={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function RO(t){return!!pw[t]||!!pw[t.toLowerCase()]}function zM(t){return pw[t]??pw[t.toLowerCase()]}function dY(t){return[...zM(t)]}function p3(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function jO(t,e,i,r=1){const n=(t%360+360)%360/360,l=i<=.5?i*(e+1):i+e-i*e,d=2*i-l;return[Math.round(255*p3(d,l,n+1/3)),Math.round(255*p3(d,l,n)),Math.round(255*p3(d,l,n-1/3)),r]}function pY(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,l=e?t.length===9:t.length===5;let d=Number("0x"+t.substr(1));if(isNaN(d))return null;const y=[0,0,0,1];let b;return l&&(b=d&r,d>>=i,y[3]=n*b/255),b=d&r,d>>=i,y[2]=n*b,b=d&r,d>>=i,y[1]=n*b,b=d&r,d>>=i,y[0]=n*b,y}function Ko(){return[0,0,0]}function fY(t){return[t[0],t[1],t[2]]}function _m(t,e,i){return[t,e,i]}function yY(t){const e=Ko(),i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function mY(t,e){return new Float64Array(t,e,3)}function FO(){return Ko()}function NO(){return _m(1,1,1)}function zO(){return _m(1,0,0)}function VO(){return _m(0,1,0)}function BO(){return _m(0,0,1)}const gY=FO(),GO=NO(),vY=zO(),bY=VO(),wY=BO();Object.freeze(Object.defineProperty({__proto__:null,ONES:GO,UNIT_X:vY,UNIT_Y:bY,UNIT_Z:wY,ZEROS:gY,clone:fY,create:Ko,createView:mY,fromArray:yY,fromValues:_m,ones:NO,unitX:zO,unitY:VO,unitZ:BO,zeros:FO},Symbol.toStringTag,{value:"Module"}));let VM=1e-6;function Wn(){return VM}function _Y(t){VM=t}const G2=Math.random,xY=Math.PI/180,SY=180/Math.PI;function BM(t){return t*xY}function MY(t){return t*SY}function $Y(t,e){return Math.abs(t-e)<=VM*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:G2,equals:$Y,getEpsilon:Wn,setEpsilon:_Y,toDegree:MY,toRadian:BM},Symbol.toStringTag,{value:"Module"}));function U2(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function fw(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function q2(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function UO(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function GM(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function qO(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function HO(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function TY(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function IY(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function EY(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function AY(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function kY(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function PY(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function CY(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function WO(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function OY(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function JO(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function YO(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function KO(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function LY(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function DY(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function yw(t,e){const i=e[0],r=e[1],n=e[2];let l=i*i+r*r+n*n;return l>0&&(l=1/Math.sqrt(l),t[0]=e[0]*l,t[1]=e[1]*l,t[2]=e[2]*l),t}function ZO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function RY(t,e,i){const r=e[0],n=e[1],l=e[2],d=i[0],y=i[1],b=i[2];return t[0]=n*b-l*y,t[1]=l*d-r*b,t[2]=r*y-n*d,t}function jY(t,e,i,r){const n=e[0],l=e[1],d=e[2];return t[0]=n+r*(i[0]-n),t[1]=l+r*(i[1]-l),t[2]=d+r*(i[2]-d),t}function FY(t,e,i,r,n,l){const d=l*l,y=d*(2*l-3)+1,b=d*(l-2)+l,x=d*(l-1),$=d*(3-2*l);return t[0]=e[0]*y+i[0]*b+r[0]*x+n[0]*$,t[1]=e[1]*y+i[1]*b+r[1]*x+n[1]*$,t[2]=e[2]*y+i[2]*b+r[2]*x+n[2]*$,t}function NY(t,e,i,r,n,l){const d=1-l,y=d*d,b=l*l,x=y*d,$=3*l*y,E=3*b*d,k=b*l;return t[0]=e[0]*x+i[0]*$+r[0]*E+n[0]*k,t[1]=e[1]*x+i[1]*$+r[1]*E+n[1]*k,t[2]=e[2]*x+i[2]*$+r[2]*E+n[2]*k,t}function zY(t,e){e=e||1;const i=G2,r=2*i()*Math.PI,n=2*i()-1,l=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*l,t[1]=Math.sin(r)*l,t[2]=n*e,t}function VY(t,e,i){const r=e[0],n=e[1],l=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*l+i[12],t[1]=i[1]*r+i[5]*n+i[9]*l+i[13],t[2]=i[2]*r+i[6]*n+i[10]*l+i[14],t}function BY(t,e,i){const r=e[0],n=e[1],l=e[2];return t[0]=r*i[0]+n*i[3]+l*i[6],t[1]=r*i[1]+n*i[4]+l*i[7],t[2]=r*i[2]+n*i[5]+l*i[8],t}function GY(t,e,i){const r=i[0],n=i[1],l=i[2],d=i[3],y=e[0],b=e[1],x=e[2];let $=n*x-l*b,E=l*y-r*x,k=r*b-n*y,P=n*k-l*E,D=l*$-r*k,L=r*E-n*$;const N=2*d;return $*=N,E*=N,k*=N,P*=2,D*=2,L*=2,t[0]=y+$+P,t[1]=b+E+D,t[2]=x+k+L,t}function UY(t,e,i,r){const n=[],l=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],l[0]=n[0],l[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),l[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=l[0]+i[0],t[1]=l[1]+i[1],t[2]=l[2]+i[2],t}function qY(t,e,i,r){const n=[],l=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],l[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),l[1]=n[1],l[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=l[0]+i[0],t[1]=l[1]+i[1],t[2]=l[2]+i[2],t}function HY(t,e,i,r){const n=[],l=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],l[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),l[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),l[2]=n[2],t[0]=l[0]+i[0],t[1]=l[1]+i[1],t[2]=l[2]+i[2],t}function WY(t,e){fw(cg,t),fw(dg,e),yw(cg,cg),yw(dg,dg);const i=ZO(cg,dg);return i>1?0:i<-1?Math.PI:Math.acos(i)}const cg=Ko(),dg=Ko();function JY(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function YY(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function KY(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],l=e[0],d=e[1],y=e[2],b=Wn();return Math.abs(i-l)<=b*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-d)<=b*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-y)<=b*Math.max(1,Math.abs(n),Math.abs(y))}function ZY(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],l=i[2]-e[2];let d=r*r+n*n+l*l;return d>0?(d=1/Math.sqrt(d),t[0]=r*d,t[1]=n*d,t[2]=l*d,t):(t[0]=0,t[1]=0,t[2]=0,t)}const XY=GM,QY=qO,eK=HO,tK=JO,iK=YO,rK=U2,sK=KO;Object.freeze(Object.defineProperty({__proto__:null,abs:EY,add:UO,angle:WY,bezier:NY,ceil:TY,copy:fw,cross:RY,direction:ZY,dist:tK,distance:JO,div:eK,divide:HO,dot:ZO,equals:KY,exactEquals:YY,floor:IY,hermite:FY,inverse:DY,len:rK,length:U2,lerp:jY,max:PY,min:kY,mul:QY,multiply:qO,negate:LY,normalize:yw,random:zY,rotateX:UY,rotateY:qY,rotateZ:HY,round:CY,scale:WO,scaleAndAdd:OY,set:q2,sign:AY,sqrDist:iK,sqrLen:sK,squaredDistance:YO,squaredLength:KO,str:JY,sub:XY,subtract:GM,transformMat3:BY,transformMat4:VY,transformQuat:GY},Symbol.toStringTag,{value:"Module"}));function nK(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function oK(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function aK(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function XO(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function QO(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function eL(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function lK(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function uK(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function hK(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function cK(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function dK(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function pK(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function fK(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function tL(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],l=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+l*l)}function iL(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],l=e[3]-t[3];return i*i+r*r+n*n+l*l}function rL(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function sL(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function yK(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function mK(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function gK(t,e){const i=e[0],r=e[1],n=e[2],l=e[3];let d=i*i+r*r+n*n+l*l;return d>0&&(d=1/Math.sqrt(d),t[0]=i*d,t[1]=r*d,t[2]=n*d,t[3]=l*d),t}function vK(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function nL(t,e,i,r){const n=e[0],l=e[1],d=e[2],y=e[3];return t[0]=n+r*(i[0]-n),t[1]=l+r*(i[1]-l),t[2]=d+r*(i[2]-d),t[3]=y+r*(i[3]-y),t}function bK(t,e){const i=G2;let r,n,l,d,y,b;e=e||1;do r=2*i()-1,n=2*i()-1,y=r*r+n*n;while(y>=1);do l=2*i()-1,d=2*i()-1,b=l*l+d*d;while(b>=1);const x=Math.sqrt((1-y)/b);return t[0]=e*r,t[1]=e*n,t[2]=e*l*x,t[3]=e*d*x,t}function wK(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*l+i[12]*d,t[1]=i[1]*r+i[5]*n+i[9]*l+i[13]*d,t[2]=i[2]*r+i[6]*n+i[10]*l+i[14]*d,t[3]=i[3]*r+i[7]*n+i[11]*l+i[15]*d,t}function _K(t,e,i){const r=e[0],n=e[1],l=e[2],d=i[0],y=i[1],b=i[2],x=i[3],$=x*r+y*l-b*n,E=x*n+b*r-d*l,k=x*l+d*n-y*r,P=-d*r-y*n-b*l;return t[0]=$*x+P*-d+E*-b-k*-y,t[1]=E*x+P*-y+k*-d-$*-b,t[2]=k*x+P*-b+$*-y-E*-d,t[3]=e[3],t}function xK(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function SK(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function MK(t,e){const i=t[0],r=t[1],n=t[2],l=t[3],d=e[0],y=e[1],b=e[2],x=e[3],$=Wn();return Math.abs(i-d)<=$*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-y)<=$*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-b)<=$*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(l-x)<=$*Math.max(1,Math.abs(l),Math.abs(x))}const $K=XO,TK=QO,IK=eL,EK=tL,AK=iL,kK=rL,PK=sL;Object.freeze(Object.defineProperty({__proto__:null,add:aK,ceil:lK,copy:nK,dist:EK,distance:tL,div:IK,divide:eL,dot:vK,equals:MK,exactEquals:SK,floor:uK,inverse:mK,len:kK,length:rL,lerp:nL,max:cK,min:hK,mul:TK,multiply:QO,negate:yK,normalize:gK,random:bK,round:dK,scale:pK,scaleAndAdd:fK,set:oK,sqrDist:AK,sqrLen:PK,squaredDistance:iL,squaredLength:sL,str:xK,sub:$K,subtract:XO,transformMat4:wK,transformQuat:_K},Symbol.toStringTag,{value:"Module"}));const rI=new Float32Array(1);function w5e(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Ds(t,e,i){return Math.min(Math.max(t,e),i)}function _5e(t){return(t&t-1)==0}function x5e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function S5e(t,e,i){return t+(e-t)*i}function CK(t){return t*Math.PI/180}function oL(t){return 180*t/Math.PI}function M5e(t){return Math.acos(Ds(t,-1,1))}function aL(t){return Math.asin(Ds(t,-1,1))}function f3(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const mw=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function OK(t){return mw.setFloat64(0,t),mw.getBigInt64(0)}function LK(t){return mw.setBigInt64(0,t),mw.getFloat64(0)}const y3=BigInt("1000000");DK(1);function DK(t){const e=OK(t=Math.abs(t)),i=LK(e<=y3?y3:e-y3);return Math.abs(t-i)}function $5e(t){return lL(Math.max(-sI,Math.min(t,sI)))}function lL(t){return rI[0]=t,rI[0]}function T5e(t,e){const i=U2(t),r=aL(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return q2(e,i,r,n),e}function I5e(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(f3(e,1)&&f3(i,1)&&f3(r,1))}const sI=lL(34028234663852886e22);function pg(t){return Ds(L2(t),0,255)}function fg(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let Tv=class Or{static blendColors(e,i,r,n=new Or){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),l=r[1];if(l==="rgb"&&n.length===3||l==="rgba"&&n.length===4){const d=n[0];if(d.charAt(d.length-1)==="%"){const y=n.map(b=>2.56*parseFloat(b));return n.length===4&&(y[3]=parseFloat(n[3])),Or.fromArray(y,i)}return Or.fromArray(n.map(y=>parseFloat(y)),i)}if(l==="hsl"&&n.length===3||l==="hsla"&&n.length===4)return Or.fromArray(jO(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new Or){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const r=e.length===4?4:8,n=(1<<r)-1;let l=Number("0x"+e.substr(1));return isNaN(l)?null:(["b","g","r"].forEach(d=>{const y=l&n;l>>=r,i[d]=r===4?17*y:y}),i.a=1,i)}static fromArray(e,i=new Or){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=RO(e)?zM(e):null;return r&&Or.fromArray(r,i)||Or.fromRgb(e,i)||Or.fromHex(e,i)}static fromJSON(e){return e&&new Or([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Or.fromString(e,this):Array.isArray(e)?Or.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Or||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Or.AlphaMode.ALWAYS){const i=pg(this.r),r=pg(this.g),n=pg(this.b);return e===Or.AlphaMode.ALWAYS||this.a!==1?[i,r,n,pg(255*this.a)]:[i,r,n]}clone(){return new Or(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(fg(this.r,0,255)),this.g=Math.round(fg(this.g,0,255)),this.b=Math.round(fg(this.b,0,255)),this.a=fg(this.a,0,1),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};Tv.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Tv||(Tv={}));const Ne=Tv;function E5e(t){}function RK(t){return()=>t}function Ue(t,e={}){const i=t instanceof _t?t:new _t(t,e),r={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(r.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(r.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(r.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(r.nonNullable=e.nonNullable),S(r)}var Gx;let Iv=Gx=class extends ve{constructor(t){super(t),this.type="none"}clone(){return new Gx({type:this.type})}};g([Ue({none:"none",stayAbove:"stay-above"})],Iv.prototype,"type",void 0),Iv=Gx=g([J("esri.ground.NavigationConstraint")],Iv);function H2(t){const e=L2(100*(1-t));return Math.max(0,Math.min(e,100))}function Wy(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var Ux;let Xa=Ux=class extends wm(qo){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&ge.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{is(t)||ge.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",vd(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(l=>{if("write"in l){const d={};RK(l)().write(d,r)&&n.push(d)}else r&&r.messages&&r.messages.push(new se("layer:unsupported",`Layers (${l.title}, ${l.id}) of type '${l.declaredClass}' cannot be persisted in the ground`,{layer:l}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return bM(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await le(()=>import("./ElevationQuery-fd2dc285.js"),[]);ai(e);const r=new i,n=this.layers.filter(nI).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await le(()=>import("./ElevationQuery-fd2dc285.js"),[]);ai(e);const r=new i,n=this.layers.filter(nI).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:ae(this.surfaceColor),navigationConstraint:ae(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Ux({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const r=e&&e.origin||"web-scene",n=e&&e.portal||null,l=e&&e.url||null;return le(()=>import("./layersCreator-18391385.js"),["assets/layersCreator-18391385.js","assets/lazyLayerLoader-42482be4.js","assets/portalLayers-11ecdd8f.js","assets/layersLoader-2039c3aa.js","assets/fetchService-509c5174.js","assets/jsonContext-e51bc28f.js"]).then(({populateOperationalLayers:d})=>{ai(i);const y=[];if(t.layers&&Array.isArray(t.layers)){const b={context:{origin:r,url:l,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};y.push(d(this.layers,t.layers,b))}return ws(y)}).then(()=>{})}};function jK(t){return t&&"createElevationSampler"in t}function nI(t){return t.type==="elevation"||jK(t)}g([S({json:{read:!1}})],Xa.prototype,"layers",null),g([Ae("layers")],Xa.prototype,"writeLayers",null),g([S({readOnly:!0})],Xa.prototype,"resourceInfo",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ct,read:{reader:Wy,source:"transparency"},write:{writer:(t,e)=>{e.transparency=H2(t)},target:"transparency"}}})],Xa.prototype,"opacity",void 0),g([S({type:Ne,json:{type:[Ct],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Xa.prototype,"surfaceColor",void 0),g([S({type:Iv,json:{write:!0}})],Xa.prototype,"navigationConstraint",void 0),Xa=Ux=g([J("esri.Ground")],Xa);const gw=Xa;let np=class extends ze{constructor(e){super(e),this.getCollections=null}initialize(){this.own(wC(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new ze(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const l=this.indexOf(n,e);l>=0?l!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const l=this.getChildrenFunction(n);if(Array.isArray(l))for(const d of l)e=this._processCollection(e,d);else e=this._processCollection(e,l)}}return e}};g([S()],np.prototype,"getCollections",void 0),g([S()],np.prototype,"getChildrenFunction",void 0),g([S()],np.prototype,"itemFilterFunction",void 0),np=g([J("esri.core.CollectionFlattener")],np);const k0=np,FK=[["binary","application/octet-stream","bin",""]];function qx(t,e){return qM(zK(t,e))}function Hx(t,e){return qM(VK(t,e))}function k5e(t,e){return uL(NK(t,e))}function UM(t){return[...FK,...t]}function NK(t,e){return UM(e).find(i=>qM(i)===t)}function zK(t,e){return UM(e).find(i=>uL(i)===t)}function VK(t,e){const i=t.toLowerCase();return UM(e).find(r=>BK(r).some(n=>i.endsWith(n)))}function qM(t){return t==null?void 0:t[0]}function uL(t){return t==null?void 0:t[1]}function BK(t){return(t==null?void 0:t[2].split(","))??[]}function P5e(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function GK(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=LO(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!tY(t)||t.type==="scene"&&!UK(t))}function UK(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:r}=e,n=qx("model/gltf-binary",i)??Hx("glb",i);return n!=null&&r.includes(n)}const oI=ge.getLogger("esri.support.basemapUtils");function qK(){return{}}function HK(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function WK(t,e){let i;if(typeof t=="string"){if(!(t in Bx)){const r=Object.entries(Bx).filter(([n,l])=>Ft.apiKey&&!l.classic||!Ft.apiKey&&l.classic&&!l.deprecated).map(([n])=>`"${n}"`).join(", ");return oI.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}e&&(i=e[t]),i||(i=dw.fromId(t),e&&(e[t]=i))}else i=zi(dw,t);return i!=null&&i.destroyed&&(oI.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function JK(t){return new k0({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function m3(t){for(const e of t.values())e==null||e.destroy();t.clear()}const aI={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function YK(t){let e=null;if(typeof t=="string")if(t in aI){const i=aI[t];e=new gw({resourceInfo:{data:{layers:[i]}}})}else ge.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=zi(gw,t);return e}function P0(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var Wx;function lI(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function KK(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let pu=Wx=class extends Ch{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):KK(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Nt,i=this.hasZ,r=this.hasM,n=i?3:2,l=t[0],d=lI(Math.min),y=lI(Math.max);let b,x,$,E,[k,P]=l,[D,L]=l;for(let N=0,B=t.length;N<B;N++){const W=t[N],[H,Y]=W;if(k=d(k,H),P=d(P,Y),D=y(D,H),L=y(L,Y),i&&W.length>2){const ie=W[2];b=d(b,ie),$=y($,ie)}if(r&&W.length>n){const ie=W[n];x=d(x,ie),E=y(E,ie)}}return e.xmin=k,e.ymin=P,e.xmax=D,e.ymax=L,e.spatialReference=this.spatialReference,i?(e.zmin=b,e.zmax=$):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=x,e.mmax=E):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=ae(this.points)}addPoint(t){return P0(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:ae(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new Wx(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new lt(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new lt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(P0(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};g([S({readOnly:!0})],pu.prototype,"cache",null),g([S()],pu.prototype,"extent",null),g([S({type:[[Number]],json:{write:{isRequired:!0}}})],pu.prototype,"points",void 0),g([Ae("points")],pu.prototype,"writePoints",null),pu=Wx=g([J("esri.geometry.Multipoint")],pu),pu.prototype.toJSON.isDefaultToJSON=!0;const W2=pu;function C5e(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function ZK(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function hL(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function XK(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function QK(t,e,i,r){const[n,l]=e,[d,y]=i[r],[b,x]=i[r+1],$=b-d,E=x-y,k=$*$+E*E,P=(n-d)*$+(l-y)*E,D=Math.min(1,Math.max(0,P/k));return t[0]=d+$*D,t[1]=y+E*D,t}function O5e(t,e,i){let r,n,l,d,y=!1,b=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();)l=i.x,d=i.y,n>e!=d>e&&t<(l-r)*(e-n)/(d-n)+r&&(y=!y),b=Math.min(b,eZ(t,e,r,n,l,d)),r=l,n=d;return b===0?0:(y?1:-1)*Math.sqrt(b)}function eZ(t,e,i,r,n,l){let d=i,y=r,b=n-d,x=l-y;if(b!==0||x!==0){const $=((t-d)*b+(e-y)*x)/(b*b+x*x);$>1?(d=n,y=l):$>0&&(d+=b*$,y+=x*$)}return b=t-d,x=e-y,b*b+x*x}function cL(t,e){return XK(t,e,.5)}function dL(t,e,i){const r=t.length;let n=0,l=0,d=0;for(let y=0;y<r;y++){const b=t[y],x=t[(y+1)%r];let $=2;n+=b[0]*x[1]-x[0]*b[1],b.length>2&&x.length>2&&i&&(l+=b[0]*x[2]-x[0]*b[2],$=3),b.length>$&&x.length>$&&e&&(d+=b[0]*x[$]-x[0]*b[$])}return n<=0&&l<=0&&d<=0}function tZ(t){const e=t.length;return e>2&&M2(t[0],t[e-1])}function L5e(t){if("rings"in t&&(iZ(t),t.rings.length>0&&!dL(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function iZ(t){if("rings"in t)for(const e of t.rings)tZ(e)||e.push(e[0].slice())}function D5e(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let r=0;r<i;r++)e+=(t[r][0]-t[r+1][0])*(t[r][1]+t[r+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function pL(t){if(!t||t.numPoints<3)return 0;let e,i,r=0;if(t.seekPathStart(),!t.nextPoint())return 0;e=t.x,i=t.y;const n=e,l=i;for(;t.nextPoint();)r+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return r+=(e-n)*(i+l),-.5*r}function R5e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function rZ(t){return t?sZ(t.rings,t.hasZ??!1):null}function sZ(t,e){if(!t||!t.length)return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let l=0,d=t.length;l<d;l++){const y=fL(t[l],e,n);y&&r.push(y)}if(r.sort((l,d)=>{let y=l[2]-d[2];return y===0&&e&&(y=l[4]-d[4]),y}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const l=t[0]&&t[0].length?nZ(t[0],e):null;if(!l)return null;i[0]=l[0],i[1]=l[1],e&&l.length>2&&(i[2]=l[2])}return i}function fL(t,e,i){let r=0,n=0,l=0,d=0,y=0;const b=t.length?t[0][0]:0,x=t.length?t[0][1]:0,$=t.length&&e?t[0][2]:0;for(let k=0;k<t.length;k++){const P=t[k],D=t[(k+1)%t.length],[L,N,B]=P,W=L-b,H=N-x,[Y,ie,ne]=D,he=Y-b,de=ie-x,be=W*de-he*H;if(d+=be,r+=(W+he)*be,n+=(H+de)*be,e&&P.length>2&&D.length>2){const we=B-$,$e=ne-$,ke=W*$e-he*we;l+=(we+$e)*ke,y+=ke}L<i[0]&&(i[0]=L),L>i[1]&&(i[1]=L),N<i[2]&&(i[2]=N),N>i[3]&&(i[3]=N),e&&(B<i[4]&&(i[4]=B),B>i[5]&&(i[5]=B))}if(d>0&&(d*=-1),y>0&&(y*=-1),!d)return null;d*=.5,y*=.5;const E=[r/(6*d)+b,n/(6*d)+x,d];return e&&(i[4]===i[5]||y===0?(E[3]=(i[4]+i[5])/2,E[4]=0):(E[3]=l/(6*y)+$,E[4]=y)),E}function nZ(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,l=0,d=0,y=0;for(let b=0,x=t.length;b<x-1;b++){const $=t[b],E=t[b+1];if($&&E){i[0]=$[0],i[1]=$[1],r[0]=E[0],r[1]=E[1],e&&$.length>2&&E.length>2&&(i[2]=$[2],r[2]=E[2]);const k=hL(i,r);if(k){n+=k;const P=cL($,E);l+=k*P[0],d+=k*P[1],e&&P.length>2&&(y+=k*P[2])}}}return n>0?e?[l/n,d/n,y/n]:[l/n,d/n]:t.length?t[0]:null}function oZ(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const r=[],n=[],l=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const d=fL(ZK(t),t.hasZ,l);d&&n.push(d)}if(n.sort((d,y)=>{let b=d[2]-y[2];return b===0&&e&&(b=d[4]-y[4]),b}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<l[0]||r[0]>l[1]||r[1]<l[2]||r[1]>l[3]||e&&(r[2]<l[4]||r[2]>l[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const d=t.numPoints?aZ(t):null;if(!d)return null;r[0]=d[0],r[1]=d[1],e&&d.length>2&&(r[2]=d[2])}return r}function aZ(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,l=0,d=0,y=0;if(t.nextPoint()){let b=t.x,x=t.y,$=t.z;for(;t.nextPoint();){const E=t.x,k=t.y,P=t.z;i[0]=b,i[1]=x,r[0]=E,r[1]=k,e&&(i[2]=$,r[2]=P);const D=hL(i,r);if(D){n+=D;const L=cL(i,r);l+=D*L[0],d+=D*L[1],e&&L.length>2&&(y+=D*L[2])}b=E,x=k,$=P}}return n>0?e?[l/n,d/n,y/n]:[l/n,d/n]:t.numPoints?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const lZ=1e-6;function j5e(t){let e=0;for(t.reset();t.nextPath();)e+=pL(t);if(e<lZ){const n=oZ(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)hZ(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const uZ=1/3;function hZ(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let l,d=i.x-r,y=i.y-n,b=0,x=0;for(;i.nextPoint();)b=i.x-r,x=i.y-n,l=.5*uZ*(b*y-x*d),t[0]+=l*(d+b),t[1]+=l*(y+x),d=b,y=x;const $=pL(i),E=[r,n];return E[0]-=e[0],E[1]-=e[1],E[0]*=$,E[1]*=$,t[0]+=E[0],t[1]+=E[1],t}function La(t=yZ){return[t[0],t[1],t[2],t[3]]}function F5e(t){return[t[0],t[1],t[2],t[3]]}function HM(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function cZ(t,e,i,r,n=La()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function N5e(t,e=La()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function z5e(t,e){return new Nt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function V5e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function B5e(t,e,i){if(e!=null)if("length"in e)Jx(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else HM(i,t)}function dZ(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function pZ(t){return t[1]>=t[3]?0:t[3]-t[1]}function G5e(t){return dZ(t)*pZ(t)}function U5e(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function q5e(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function H5e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function fZ(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function W5e(t){return t?HM(t,uI):La(uI)}function Jx(t){return t!=null&&t.length===4}function J5e(t,e){return Jx(t)&&Jx(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const uI=[1/0,1/0,-1/0,-1/0],yZ=[0,0,0,0];function yL(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function mL(t){return t.points!==void 0}function gL(t){return t.x!==void 0&&t.y!==void 0}function vL(t){return t.paths!==void 0}function bL(t){return t.rings!==void 0}function wL(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const ih=wL(Math.min),rh=wL(Math.max);function Y5e(t,e){return vL(e)?C0(t,e.paths,!1,!1):bL(e)?C0(t,e.rings,!1,!1):mL(e)?WM(t,e.points,!1,!1,!1,!1):yL(e)?_L(t,e):(gL(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function K5e(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const l=mZ(t);e=Math.min(l[0],e),r=Math.min(l[1],r),i=Math.max(l[2],i),n=Math.max(l[3],n)}return La([e,r,i,n])}function mZ(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return La([e,r,i,n])}function Z5e(t,e){return vL(e)?C0(t,e.paths,!0,!1):bL(e)?C0(t,e.rings,!0,!1):mL(e)?WM(t,e.points,!0,!1,!0,!1):yL(e)?_L(t,e,!0,!1,!0,!1):(gL(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function C0(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let l,d,y,b,[x,$]=e[0][0],[E,k]=e[0][0];for(let P=0;P<e.length;P++){const D=e[P];for(let L=0;L<D.length;L++){const N=D[L],[B,W]=N;if(x=ih(x,B),$=ih($,W),E=rh(E,B),k=rh(k,W),i&&N.length>2){const H=N[2];l=ih(l,H),d=rh(d,H)}if(r&&N.length>n){const H=N[n];y=ih(l,H),b=rh(d,H)}}}return i?r?(t[0]=x,t[1]=$,t[2]=l,t[3]=y,t[4]=E,t[5]=k,t[6]=d,t[7]=b,t.length=8,t):(t[0]=x,t[1]=$,t[2]=l,t[3]=E,t[4]=k,t[5]=d,t.length=6,t):r?(t[0]=x,t[1]=$,t[2]=y,t[3]=E,t[4]=k,t[5]=b,t.length=6,t):(t[0]=x,t[1]=$,t[2]=E,t[3]=k,t.length=4,t)}function _L(t,e,i,r,n,l){const d=e.xmin,y=e.xmax,b=e.ymin,x=e.ymax;let $=e.zmin,E=e.zmax,k=e.mmin,P=e.mmax;return n?($=$||0,E=E||0,l?(k=k||0,P=P||0,t[0]=d,t[1]=b,t[2]=$,t[3]=k,t[4]=y,t[5]=x,t[6]=E,t[7]=P,t):(t[0]=d,t[1]=b,t[2]=$,t[3]=y,t[4]=x,t[5]=E,t)):l?(k=k||0,P=P||0,t[0]=d,t[1]=b,t[2]=k,t[3]=y,t[4]=x,t[5]=P,t):(t[0]=d,t[1]=b,t[2]=y,t[3]=x,t)}function WM(t,e,i,r,n,l){const d=i?3:2,y=r&&l,b=i&&n;if(!e.length||!e[0].length)return null;let x,$,E,k,[P,D]=e[0],[L,N]=e[0];for(let B=0;B<e.length;B++){const W=e[B],[H,Y]=W;if(P=ih(P,H),D=ih(D,Y),L=rh(L,H),N=rh(N,Y),b&&W.length>2){const ie=W[2];x=ih(x,ie),$=rh($,ie)}if(y&&W.length>d){const ie=W[d];E=ih(x,ie),k=rh($,ie)}}return n?(x=x||0,$=$||0,l?(E=E||0,k=k||0,t[0]=P,t[1]=D,t[2]=x,t[3]=E,t[4]=L,t[5]=N,t[6]=$,t[7]=k,t):(t[0]=P,t[1]=D,t[2]=x,t[3]=L,t[4]=N,t[5]=$,t)):l?(E=E||0,k=k||0,t[0]=P,t[1]=D,t[2]=E,t[3]=L,t[4]=N,t[5]=k,t):(t[0]=P,t[1]=D,t[2]=L,t[3]=N,t)}function gZ(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function vZ(t){return t.points!==void 0}function bZ(t){return t.x!==void 0&&t.y!==void 0}function wZ(t){return t.paths!==void 0}function _Z(t){return t.rings!==void 0}const JM=[];function xL(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function SL(t,e,i,r,n,l){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:l}}function ML(t,e,i,r,n,l){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:l}}function $L(t,e,i,r,n,l,d,y){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:l,zmax:d,mmax:y}}function YM(t,e=!1,i=!1){return e?i?$L(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):SL(t[0],t[1],t[2],t[3],t[4],t[5]):i?ML(t[0],t[1],t[2],t[3],t[4],t[5]):xL(t[0],t[1],t[2],t[3])}function X5e(t){return t?gZ(t)?t:bZ(t)?SZ(t):_Z(t)?TL(t):wZ(t)?IL(t):vZ(t)?xZ(t):null:null}function xZ(t){const{hasZ:e,hasM:i,points:r}=t;return YM(WM(JM,r,e??!1,i??!1),e,i)}function SZ(t){const{x:e,y:i,z:r,m:n}=t,l=n!=null;return r!=null?l?$L(e,i,r,n,e,i,r,n):SL(e,i,r,e,i,r):l?ML(e,i,n,e,i,n):xL(e,i,e,i)}function TL(t){const{hasZ:e,hasM:i,rings:r}=t,n=C0(JM,r,e??!1,i??!1);return n?YM(n,e,i):null}function IL(t){const{hasZ:e,hasM:i,paths:r}=t,n=C0(JM,r,e??!1,i??!1);return n?YM(n,e,i):null}var Ev;function hI(t){return!Array.isArray(t[0])}let aa=Ev=class extends Ch{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,n=!1;for(const d of e)d.hasZ&&(r=!0),d.hasM&&(n=!0);const l={rings:e.map(d=>{const y=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(r&&d.hasZ){const b=d.zmin+.5*(d.zmax-d.zmin);for(let x=0;x<y.length;x++)y[x].push(b)}if(n&&d.hasM){const b=d.mmin+.5*(d.mmax-d.mmin);for(let x=0;x<y.length;x++)y[x].push(b)}return y}),spatialReference:i};return r&&(l.hasZ=!0),n&&(l.hasM=!0),new Ev(l)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,r,n=null,l=null;return t&&!Array.isArray(t)?(n=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||dt.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),l=n[0]&&n[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=l.length>3):i===void 0?i=r?l.length>3:l.length>2:r===void 0&&(r=i?l.length>3:l.length>2)),{rings:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=rZ(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new lt;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=TL(this);if(!e)return null;const i=new Nt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return kJ(this.rings)}writeRings(t,e){e.rings=ae(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(hI(t)){const r=[];for(let n=0,l=t.length;n<l;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new Ev;return t.spatialReference=this.spatialReference,t.rings=ae(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,l,d,y],[b,x,$,E])=>n===b&&l===x&&(d==null&&$==null||d===$)&&(y==null&&E==null||y===E);for(let n=0;n<this.rings.length;n++){const l=this.rings[n],d=t.rings[n];if(!M2(l,d,r))return!1}return!0}contains(t){if(!t)return!1;const e=V2(t,this.spatialReference);return SO(this,e??t)}isClockwise(t){let e;return e=hI(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,dL(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new lt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new lt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new lt(i[0],i[1],i[2],i[3],this.spatialReference):new lt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(P0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new lt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new lt(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(P0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};g([S({readOnly:!0})],aa.prototype,"cache",null),g([S({readOnly:!0})],aa.prototype,"centroid",null),g([S({readOnly:!0})],aa.prototype,"extent",null),g([S({readOnly:!0})],aa.prototype,"isSelfIntersecting",null),g([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],aa.prototype,"rings",void 0),g([Ae("rings")],aa.prototype,"writeRings",null),aa=Ev=g([J("esri.geometry.Polygon")],aa),aa.prototype.toJSON.isDefaultToJSON=!0;const Dl=aa;var Yx;function MZ(t){return!Array.isArray(t[0])}let fu=Yx=class extends Ch{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,r,n=null,l=null;return t&&!Array.isArray(t)?(n=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||dt.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),l=n[0]&&n[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=!1):i===void 0?i=!r&&l.length>3:r===void 0&&(r=!i&&l.length>3)),{paths:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=IL(this);if(!e)return null;const i=new Nt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=ae(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(MZ(t)){const r=[];for(let n=0,l=t.length;n<l;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new Yx;return t.spatialReference=this.spatialReference,t.paths=ae(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new lt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new lt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new lt(i[0],i[1],i[2],i[3],this.spatialReference):new lt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(P0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new lt(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new lt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(P0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};g([S({readOnly:!0})],fu.prototype,"cache",null),g([S({readOnly:!0})],fu.prototype,"extent",null),g([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],fu.prototype,"paths",void 0),g([Ae("paths")],fu.prototype,"writePaths",null),fu=Yx=g([J("esri.geometry.Polyline")],fu),fu.prototype.toJSON.isDefaultToJSON=!0;const Oo=fu,vw=rs()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),cI=rs()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function EL(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function KM(t){return t.points!==void 0}function ZM(t){return t.x!==void 0&&t.y!==void 0}function XM(t){return t.paths!==void 0}function ad(t){return t.rings!==void 0}function bh(t){return t==null?null:t instanceof Ch?t:ZM(t)?lt.fromJSON(t):XM(t)?Oo.fromJSON(t):ad(t)?Dl.fromJSON(t):KM(t)?W2.fromJSON(t):EL(t)?Nt.fromJSON(t):null}function J2(t){return t?ZM(t)?"esriGeometryPoint":XM(t)?"esriGeometryPolyline":ad(t)?"esriGeometryPolygon":EL(t)?"esriGeometryEnvelope":KM(t)?"esriGeometryMultipoint":null:null}const $Z={esriGeometryPoint:lt,esriGeometryPolyline:Oo,esriGeometryPolygon:Dl,esriGeometryEnvelope:Nt,esriGeometryMultipoint:W2};function TZ(t){return t&&$Z[t]||null}const Od={base:Ch,key:"type",typeMap:{extent:Nt,multipoint:W2,point:lt,polyline:Oo,polygon:Dl}};Ca(Od);let AL=0;const Oh=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+AL++})}};return e=g([J("esri.core.Identifiable")],e),e},QM=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:AL++})}};return e=g([J("esri.core.NumericIdentifiable")],e),e};let dI=class extends Oh(class{}){};dI=g([J("esri.core.Identifiable")],dI);async function IZ(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await le(()=>import("./portalLayers-11ecdd8f.js"),["assets/portalLayers-11ecdd8f.js","assets/lazyLayerLoader-42482be4.js","assets/layersLoader-2039c3aa.js","assets/fetchService-509c5174.js","assets/jsonContext-e51bc28f.js"]);try{return await i(e)}catch(r){const n=e&&e.portalItem,l=n&&n.id||"unset",d=n&&n.portal&&n.portal.url||Ft.portalUrl;throw ge.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+d+"', id: '"+l+"')",r),r}}let EZ=0,ar=class extends Na.EventedMixin(Oh(qo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Nt(-180,-90,180,90,dt.WGS84),this.id=Date.now().toString(16)+"-layer-"+EZ++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=dt.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await le(()=>import("./arcgisLayers-ae6850b0.js"),["assets/arcgisLayers-ae6850b0.js","assets/fetchService-509c5174.js","assets/lazyLayerLoader-42482be4.js"])).fromUrl(i)}static fromPortalItem(e){return IZ(e)}initialize(){this.when().catch(e=>{is(e)||ge.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Ui(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Wt(e,{query:{f:"json"},responseType:"json"})).data;throw new se("layer:no-attribution-data","Layer does not have attribution data")}};g([S({type:String})],ar.prototype,"attributionDataUrl",void 0),g([S({type:Nt})],ar.prototype,"fullExtent",void 0),g([S({readOnly:!0})],ar.prototype,"hasAttributionData",null),g([S({type:String,clonable:!1})],ar.prototype,"id",void 0),g([S({type:Boolean,nonNullable:!0})],ar.prototype,"legendEnabled",void 0),g([S({type:["show","hide","hide-children"]})],ar.prototype,"listMode",void 0),g([S({type:Number,range:{min:0,max:1},nonNullable:!0})],ar.prototype,"opacity",void 0),g([S({clonable:!1})],ar.prototype,"parent",void 0),g([S({readOnly:!0})],ar.prototype,"parsedUrl",null),g([S({type:Boolean})],ar.prototype,"popupEnabled",void 0),g([S({type:Boolean})],ar.prototype,"attributionVisible",void 0),g([S({type:dt})],ar.prototype,"spatialReference",void 0),g([S({type:String})],ar.prototype,"title",void 0),g([S({readOnly:!0,json:{read:!1}})],ar.prototype,"type",void 0),g([S()],ar.prototype,"url",void 0),g([S({type:Boolean,nonNullable:!0})],ar.prototype,"visible",void 0),ar=g([J("esri.layers.Layer")],ar);const Jy=ar;function Kx(t,e,i){let r,n;if(t)for(let l=0,d=t.length;l<d;l++){if(r=t.at(l),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=Kx(r.layers,e,i),n))return n}}const AZ=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ze;const r=d=>{d.parent&&"remove"in d.parent&&d.parent.remove(d)},n=d=>{d.parent=this,this.layerAdded(d),d.type!=="elevation"&&d.type!=="base-elevation"||ge.getLogger(this).error(`Layer 'title:${d.title}, id:${d.id}' of type '${d.type}' is not supported as an operational layer and will therefore be ignored.`)},l=d=>{d.parent=null,this.layerRemoved(d)};this.addHandles([this.layers.on("before-add",d=>r(d.item)),this.layers.on("after-add",d=>n(d.item)),this.layers.on("after-remove",d=>l(d.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",vd(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof Jy){const l=i;l.parent===this?this.reorder(l,r):n.add(l,r)}else Vl(i)?i.then(l=>{this.destroyed||this.add(l,r)}):ge.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let l=n.getNextIndex(r);i.slice().forEach(d=>{d.parent!==this?(n.add(d,l),l+=1):this.reorder(d,l)})}findLayerById(i){return Kx(this.layers,"id",i)}findLayerByUid(i){return Kx(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return g([S()],e.prototype,"layers",null),e=g([J("esri.support.LayersMixin")],e),e};function Zx(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const l=t.at(r);if(l[e]===i)return l;if((l==null?void 0:l.type)==="group"){const d=Zx(l.tables,e,i);if(d)return d}}}const kZ=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ze,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&ge.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",vd(i,this._get("tables")))}findTableById(i){return Zx(this.tables,"id",i)}findTableByUid(i){return Zx(this.tables,"uid",i)}};return g([S()],e.prototype,"tables",null),e=g([J("esri.support.TablesMixin")],e),e};let la=class extends kZ(AZ(Na.EventedMixin(Be))){constructor(e){super(e),this.allLayers=new k0({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=JK(this),this.basemap=null,this.editableLayers=new k0({getCollections:()=>[this.allLayers],itemFilterFunction:GK}),this.ground=new gw,this._basemapCache=qK()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),HK(this._basemapCache),this._basemapCache=null}castBasemap(e){return WK(e,this._basemapCache)}castGround(e){return YK(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};g([S({readOnly:!0,dependsOn:[]})],la.prototype,"allLayers",void 0),g([S({readOnly:!0})],la.prototype,"allTables",void 0),g([S({type:dw})],la.prototype,"basemap",void 0),g([xt("basemap")],la.prototype,"castBasemap",null),g([S({readOnly:!0})],la.prototype,"editableLayers",void 0),g([S({type:gw,nonNullable:!0})],la.prototype,"ground",void 0),g([xt("ground")],la.prototype,"castGround",null),la=g([J("esri.Map")],la);const kL=la,ti=t=>{let e=class extends t{clone(){var b;const i=fr(mr(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,l={},d=new Map;for(const x in r){const $=r[x],E=n==null?void 0:n.originOf(x),k=$.clonable;if($.readOnly||k===!1||E!==Le.USER&&E!==Le.DEFAULTS&&E!==Le.WEB_MAP&&E!==Le.WEB_SCENE)continue;const P=this[x];let D=null;D=typeof k=="function"?k(P):k==="reference"?P:px(P),P!=null&&D==null||(E===Le.DEFAULTS?d.set(x,D):l[x]=D)}const y=new(Object.getPrototypeOf(this)).constructor(l);if(d.size){const x=(b=mr(y))==null?void 0:b.store;if(x)for(const[$,E]of d)x.set($,E,Le.DEFAULTS)}return y}};return e=g([J("esri.core.Clonable")],e),e};let pI=class extends ti(Be){};pI=g([J("esri.core.Clonable")],pI);var O0;function PZ(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||r!=null&&+e>r)return O0.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return O0.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(O0||(O0={}));const CZ=ge.getLogger("esri.support.arcadeOnDemand");let g3;function Rl(){return g3||(g3=(async()=>{const t=await le(()=>import("./arcadeUtils-52d9c897.js").then(e=>e.az),["assets/arcadeUtils-52d9c897.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/number-be8268ad.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),g3}const rxe=(t,e,i)=>e7.create(t,e,i,null,["$feature"],[]),sxe=(t,e,i)=>e7.create(t,e,i,null,["$feature","$view"],[]),OZ=(t,e,i,r)=>e7.create(t,e,i,r,["$feature","$view"],[]);let e7=class PL{constructor(e,i,r,n,l,d,y){this.services=null,this.script=e,this.evaluate=n;const b=Array.isArray(d)?d:d.fields;this.fields=b,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=l,this._spatialReference=y,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,n,l,d){const{arcade:y,Feature:b,Dictionary:x}=await Rl(),$=dt.fromJSON(i);let E;try{E=y.parseScript(e,d)}catch(de){return CZ.error(new se("arcade-bad-expression","Failed to parse arcade script",{script:e,error:de})),null}const k=l.reduce((de,be)=>({...de,[be]:null}),{});let P=null;n!=null&&(P=new x(n),P.immutable=!0,k.$config=null);const D=y.scriptUsesGeometryEngine(E),L=D&&y.enableGeometrySupport(),N=y.scriptUsesFeatureSet(E)&&y.enableFeatureSetSupport(),B=y.scriptIsAsync(E),W=B&&y.enableAsyncSupport(),H={vars:k,spatialReference:$,useAsync:!!W};await Promise.all([L,N,W]);const Y=new Set;await y.loadDependentModules(Y,E,null,B,D);const ie=new x;ie.immutable=!1,ie.setField("scale",0);const ne=y.compileScript(E,H),he=(de,be)=>("$view"in de&&de.$view&&(ie.setField("scale",typeof de.$view=="object"&&"scale"in de.$view?de.$view.scale:void 0),de.$view=ie),P&&(de.$config=P),ne({vars:de,spatialReference:$,services:be}));return new PL(e,y,E,he,new b,r,$)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const LZ=/^([0-9_])/,DZ=/[^a-z0-9_\u0080-\uffff]+/gi;function RZ(t){return t==null?null:t.trim().replaceAll(DZ,"_").replace(LZ,"F$1")||null}const jZ=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],FZ=["field","normalizationField"];function fI(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(yI(jZ,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)yI(FZ,r,e)}}function yI(t,e,i){if(t)for(const r of t){const n=vm(r,e),l=n&&typeof n!="function"&&i.get(n);l&&es(r,l.name,e)}}function CL(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const v3=new Set;function t7(t,e){return t&&e?(v3.clear(),Yy(v3,t,e),Array.from(v3).sort()):[]}function Yy(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)ln(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function ln(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function nxe(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function _s(t,e,i){var l;if(!i)return;const{arcadeUtils:r}=await Rl(),n=r.extractFieldNames(i,(l=e==null?void 0:e.fields)==null?void 0:l.map(d=>d.name));for(const d of n)ln(t,e,d)}async function OL(t,e,i){if(i&&i!=="1=1"){const{WhereClause:r}=await le(()=>import("./WhereClause-e24c22dd.js").then(l=>l.W),["assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js"]),n=r.create(i,e);if(!n.isStandardized)throw new se("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Yy(t,e,n.fieldNames)}}function NZ({displayField:t,fields:e}){return t||(e&&e.length?b3(e,"name-or-title")||b3(e,"unique-identifier")||b3(e,"type-or-category")||zZ(e):null)}function zZ(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function b3(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function oxe(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function VZ(t,e,i){i.onStatisticExpression?_s(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function axe(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(BZ(t,e,n)),i.fields&&r.push(...i.fields.map(async l=>VZ(t,e.fieldsIndex,l))),await Promise.all(r)}async function BZ(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(l=>_s(t,e.fieldsIndex,l.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const l of n)l.type==="expression"&&l.expressionInfo&&r.push(_s(t,e.fieldsIndex,l.expressionInfo.expression));await Promise.all(r)}async function lxe(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&Yy(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Yy(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await OL(t,e.fieldsIndex,i.where))}async function uxe(t,e,i){e&&i&&await Promise.all(i.map(r=>GZ(t,e,r)))}async function GZ(t,e,i){e&&i&&(i.valueExpression?await _s(t,e.fieldsIndex,i.valueExpression):i.field&&ln(t,e.fieldsIndex,i.field))}function hxe(t){return t?t7(t.fieldsIndex,LL(t)):[]}function UZ(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?t7(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const qZ=["oid","global-id","guid"],HZ=["oid","global-id"],WZ=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function JZ(t){const e=new Set;DL(t).forEach(r=>e.add(r)),UZ(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function LL(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:l}=e;return[i,r,n,l].filter(Boolean)}function DL(t){return LL(t).map(e=>e.toLowerCase())}function YZ(t,e){var i;return t.editable&&!qZ.includes(t.type)&&!DL(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function KZ(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||JZ(e).includes(i)||HZ.includes(t.type)||WZ.some(n=>n.test(i)))}async function cxe(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i&&i.length&&await Promise.all(i.map(n=>ZZ(t,r,n)))}async function ZZ(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await _s(t,e,r.expression);else{const l=r.expression.match(/{[^}]*}/g);l&&l.forEach(d=>{ln(t,e,d.slice(1,-1))})}await OL(t,e,n)}function XZ(t){const e=t.defaultValue;return e!==void 0&&FL(t,e)?e:t.nullable?null:void 0}function RL(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function QZ(t){return t===null||RL(t)}const i7="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function eX(t){return t===null||i7(t)}function jL(t){return t!=null&&typeof t=="string"}function tX(t){return t===null||jL(t)}function iX(){return!0}function FL(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?eX:i7;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?QZ:RL;break;case"string":case"esriFieldTypeString":i=t.nullable?tX:jL;break;default:i=iX}return arguments.length===1?i:i(e)}const rX=["integer","small-integer","single","double"],sX=new Set([...rX,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),nX=["date","date-only","time-only","timestamp-offset"],oX=new Set([...nX,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function r7(t){return t!=null&&sX.has(t.type)}function dxe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function aX(t){return t!=null&&oX.has(t.type)}var bw,ww;function pxe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function fxe(t,e){return t==null||t.nullable&&e===null?null:r7(t)&&!lX(t.type,Number(e))?bw.OUT_OF_RANGE:FL(t,e)?t.domain?PZ(t.domain,e):null:ww.INVALID_TYPE}function lX(t,e){const i=typeof t=="string"?NL(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?i7(e)&&e>=r&&e<=n:e>=r&&e<=n}function NL(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return uX;case"esriFieldTypeInteger":case"integer":return hX;case"esriFieldTypeBigInteger":case"big-integer":return cX;case"esriFieldTypeSingle":case"single":return dX;case"esriFieldTypeDouble":case"double":return pX}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(bw||(bw={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(ww||(ww={}));const uX={min:-32768,max:32767,isInteger:!0},hX={min:-2147483648,max:2147483647,isInteger:!0},cX={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},dX={min:-34e37,max:12e37,isInteger:!1},pX={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function yxe(t,e,i){switch(t){case O0.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case O0.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case ww.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case bw.OUT_OF_RANGE:{const{min:r,max:n}=NL(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function fX(t,e){return!yX(t,e,null)}function yX(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const l of t??[])i.add(l);return!0}const r=e.attributes;let n=!1;for(const l of t)if(!(l in r)){if(n=!0,i==null)break;i.add(l)}return n}function Xx(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let Av=class extends ve{constructor(e){super(e),this.type=null}};g([S({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Av.prototype,"type",void 0),Av=g([J("esri.popup.content.Content")],Av);const Lh=Av;var Qx;let ic=Qx=class extends Lh{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new Qx({description:this.description,displayType:this.displayType,title:this.title})}};g([S({type:String,json:{write:!0}})],ic.prototype,"description",void 0),g([S({type:["auto","preview","list"],json:{write:!0}})],ic.prototype,"displayType",void 0),g([S({type:String,json:{write:!0}})],ic.prototype,"title",void 0),g([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ic.prototype,"type",void 0),ic=Qx=g([J("esri.popup.content.AttachmentsContent")],ic);const Ky=ic;var e9;let rc=e9=class extends Lh{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new e9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ae(this.outFields):null})}};g([S()],rc.prototype,"creator",void 0),g([S()],rc.prototype,"destroyer",void 0),g([S()],rc.prototype,"outFields",void 0),g([S({type:["custom"],readOnly:!0})],rc.prototype,"type",void 0),rc=e9=g([J("esri.popup.content.CustomContent")],rc);const mX=rc;var t9;let op=t9=class extends ve{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new t9({title:this.title,expression:this.expression})}};g([S({type:String,json:{write:!0}})],op.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],op.prototype,"expression",void 0),g([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],op.prototype,"returnType",void 0),op=t9=g([J("esri.popup.ElementExpressionInfo")],op);const zL=op;var i9;let Zf=i9=class extends Lh{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new i9({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};g([S({type:zL,json:{write:!0}})],Zf.prototype,"expressionInfo",void 0),g([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Zf.prototype,"type",void 0),Zf=i9=g([J("esri.popup.content.ExpressionContent")],Zf);const s7=Zf;class Ld extends Error{}class gX extends Ld{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class vX extends Ld{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class bX extends Ld{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Xf extends Ld{}class VL extends Ld{constructor(e){super(`Invalid unit ${e}`)}}class Dn extends Ld{}class Xl extends Ld{constructor(){super("Zone is an abstract class")}}const Re="numeric",Ho="short",un="long",_w={year:Re,month:Re,day:Re},BL={year:Re,month:Ho,day:Re},wX={year:Re,month:Ho,day:Re,weekday:Ho},GL={year:Re,month:un,day:Re},UL={year:Re,month:un,day:Re,weekday:un},qL={hour:Re,minute:Re},HL={hour:Re,minute:Re,second:Re},WL={hour:Re,minute:Re,second:Re,timeZoneName:Ho},JL={hour:Re,minute:Re,second:Re,timeZoneName:un},YL={hour:Re,minute:Re,hourCycle:"h23"},KL={hour:Re,minute:Re,second:Re,hourCycle:"h23"},ZL={hour:Re,minute:Re,second:Re,hourCycle:"h23",timeZoneName:Ho},XL={hour:Re,minute:Re,second:Re,hourCycle:"h23",timeZoneName:un},QL={year:Re,month:Re,day:Re,hour:Re,minute:Re},eD={year:Re,month:Re,day:Re,hour:Re,minute:Re,second:Re},tD={year:Re,month:Ho,day:Re,hour:Re,minute:Re},iD={year:Re,month:Ho,day:Re,hour:Re,minute:Re,second:Re},_X={year:Re,month:Ho,day:Re,weekday:Ho,hour:Re,minute:Re},rD={year:Re,month:un,day:Re,hour:Re,minute:Re,timeZoneName:Ho},sD={year:Re,month:un,day:Re,hour:Re,minute:Re,second:Re,timeZoneName:Ho},nD={year:Re,month:un,day:Re,weekday:un,hour:Re,minute:Re,timeZoneName:un},oD={year:Re,month:un,day:Re,weekday:un,hour:Re,minute:Re,second:Re,timeZoneName:un};class xm{get type(){throw new Xl}get name(){throw new Xl}get ianaName(){return this.name}get isUniversal(){throw new Xl}offsetName(e,i){throw new Xl}formatOffset(e,i){throw new Xl}offset(e){throw new Xl}equals(e){throw new Xl}get isValid(){throw new Xl}}let w3=null;class Y2 extends xm{static get instance(){return w3===null&&(w3=new Y2),w3}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return lD(e,i,r)}formatOffset(e,i){return ly(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let kv={};function xX(t){return kv[t]||(kv[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),kv[t]}const SX={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function MX(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,l,d,y,b,x,$]=r;return[d,n,l,y,b,x,$]}function $X(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:l,value:d}=i[n],y=SX[l];l==="era"?r[y]=d:Pt(y)||(r[y]=parseInt(d,10))}return r}let yg={};class jl extends xm{static create(e){return yg[e]||(yg[e]=new jl(e)),yg[e]}static resetCache(){yg={},kv={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=jl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return lD(e,i,r,this.name)}formatOffset(e,i){return ly(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=xX(this.name);let[n,l,d,y,b,x,$]=r.formatToParts?$X(r,i):MX(r,i);y==="BC"&&(n=-Math.abs(n)+1);const k=a7({year:n,month:l,day:d,hour:b===24?0:b,minute:x,second:$,millisecond:0});let P=+i;const D=P%1e3;return P-=D>=0?D:1e3+D,(k-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let mI={};function TX(t,e={}){const i=JSON.stringify([t,e]);let r=mI[i];return r||(r=new Intl.ListFormat(t,e),mI[i]=r),r}let r9={};function s9(t,e={}){const i=JSON.stringify([t,e]);let r=r9[i];return r||(r=new Intl.DateTimeFormat(t,e),r9[i]=r),r}let n9={};function IX(t,e={}){const i=JSON.stringify([t,e]);let r=n9[i];return r||(r=new Intl.NumberFormat(t,e),n9[i]=r),r}let o9={};function EX(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let l=o9[n];return l||(l=new Intl.RelativeTimeFormat(t,e),o9[n]=l),l}let Qf=null;function AX(){return Qf||(Qf=new Intl.DateTimeFormat().resolvedOptions().locale,Qf)}function kX(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=s9(t).resolvedOptions(),n=t}catch{const b=t.substring(0,i);r=s9(b).resolvedOptions(),n=b}const{numberingSystem:l,calendar:d}=r;return[n,l,d]}}function PX(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function CX(t){const e=[];for(let i=1;i<=12;i++){const r=yt.utc(2016,i,1);e.push(t(r))}return e}function OX(t){const e=[];for(let i=1;i<=7;i++){const r=yt.utc(2016,11,13+i);e.push(t(r))}return e}function mg(t,e,i,r,n){const l=t.listingMode(i);return l==="error"?null:l==="en"?r(e):n(e)}function LX(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class DX{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:l,...d}=r;if(!i||Object.keys(d).length>0){const y={useGrouping:!1,...r};r.padTo>0&&(y.minimumIntegerDigits=r.padTo),this.inf=IX(e,y)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):o7(e,3);return ir(i,this.padTo)}}}class RX{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const d=-1*(e.offset/60),y=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;e.offset!==0&&jl.create(y).valid?(n=y,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const l={...this.opts};l.timeZone=l.timeZone||n,this.dtf=s9(i,l)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class jX{constructor(e,i,r){this.opts={style:"long",...r},!i&&aD()&&(this.rtf=EX(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):eQ(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class gi{static fromOpts(e){return gi.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,r,n=!1){const l=e||tr.defaultLocale,d=l||(n?"en-US":AX()),y=i||tr.defaultNumberingSystem,b=r||tr.defaultOutputCalendar;return new gi(d,y,b,l)}static resetCache(){Qf=null,r9={},n9={},o9={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r}={}){return gi.create(e,i,r)}constructor(e,i,r,n){const[l,d,y]=kX(e);this.locale=l,this.numberingSystem=i||d||null,this.outputCalendar=r||y||null,this.intl=PX(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=LX(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:gi.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,r=!0){return mg(this,e,r,cD,()=>{const n=i?{month:e,day:"numeric"}:{month:e},l=i?"format":"standalone";return this.monthsCache[l][e]||(this.monthsCache[l][e]=CX(d=>this.extract(d,n,"month"))),this.monthsCache[l][e]})}weekdays(e,i=!1,r=!0){return mg(this,e,r,fD,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},l=i?"format":"standalone";return this.weekdaysCache[l][e]||(this.weekdaysCache[l][e]=OX(d=>this.extract(d,n,"weekday"))),this.weekdaysCache[l][e]})}meridiems(e=!0){return mg(this,void 0,e,()=>yD,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[yt.utc(2016,11,13,9),yt.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return mg(this,e,i,mD,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[yt.utc(-40,1,1),yt.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),l=n.formatToParts(),d=l.find(y=>y.type.toLowerCase()===r);return d?d.value:null}numberFormatter(e={}){return new DX(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new RX(e,this.intl,i)}relFormatter(e={}){return new jX(this.intl,this.isEnglish(),e)}listFormatter(e={}){return TX(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let _3=null;class Qr extends xm{static get utcInstance(){return _3===null&&(_3=new Qr(0)),_3}static instance(e){return e===0?Qr.utcInstance:new Qr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Qr(Z2(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ly(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ly(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return ly(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class FX extends xm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Yu(t,e){if(Pt(t)||t===null)return e;if(t instanceof xm)return t;if(NX(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Y2.instance:i==="utc"||i==="gmt"?Qr.utcInstance:Qr.parseSpecifier(i)||jl.create(t)}else return ld(t)?Qr.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new FX(t)}let gI=()=>Date.now(),vI="system",bI=null,wI=null,_I=null,xI=60,SI;class tr{static get now(){return gI}static set now(e){gI=e}static set defaultZone(e){vI=e}static get defaultZone(){return Yu(vI,Y2.instance)}static get defaultLocale(){return bI}static set defaultLocale(e){bI=e}static get defaultNumberingSystem(){return wI}static set defaultNumberingSystem(e){wI=e}static get defaultOutputCalendar(){return _I}static set defaultOutputCalendar(e){_I=e}static get twoDigitCutoffYear(){return xI}static set twoDigitCutoffYear(e){xI=e%100}static get throwOnInvalid(){return SI}static set throwOnInvalid(e){SI=e}static resetCaches(){gi.resetCache(),jl.resetCache()}}function Pt(t){return typeof t>"u"}function ld(t){return typeof t=="number"}function K2(t){return typeof t=="number"&&t%1===0}function NX(t){return typeof t=="string"}function zX(t){return Object.prototype.toString.call(t)==="[object Date]"}function aD(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function VX(t){return Array.isArray(t)?t:[t]}function MI(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const l=[e(n),n];return r&&i(r[0],l[0])===r[0]?r:l},null)[1]}function BX(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function L0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xl(t,e,i){return K2(t)&&t>=e&&t<=i}function GX(t,e){return t-e*Math.floor(t/e)}function ir(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Nu(t){if(!(Pt(t)||t===null||t===""))return parseInt(t,10)}function Vh(t){if(!(Pt(t)||t===null||t===""))return parseFloat(t)}function n7(t){if(!(Pt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function o7(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function Sm(t){return t%4===0&&(t%100!==0||t%400===0)}function ay(t){return Sm(t)?366:365}function xw(t,e){const i=GX(e-1,12)+1,r=t+(e-i)/12;return i===2?Sm(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function a7(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Sw(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||r===3?53:52}function a9(t){return t>99?t:t>tr.twoDigitCutoffYear?1900+t:2e3+t}function lD(t,e,i,r=null){const n=new Date(t),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(l.timeZone=r);const d={timeZoneName:e,...l},y=new Intl.DateTimeFormat(i,d).formatToParts(n).find(b=>b.type.toLowerCase()==="timezonename");return y?y.value:null}function Z2(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function uD(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Dn(`Invalid unit value ${t}`);return e}function Mw(t,e){const i={};for(const r in t)if(L0(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=uD(n)}return i}function ly(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${ir(i,2)}:${ir(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${ir(i,2)}${ir(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function X2(t){return BX(t,["hour","minute","second","millisecond"])}const UX=["January","February","March","April","May","June","July","August","September","October","November","December"],hD=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qX=["J","F","M","A","M","J","J","A","S","O","N","D"];function cD(t){switch(t){case"narrow":return[...qX];case"short":return[...hD];case"long":return[...UX];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dD=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pD=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],HX=["M","T","W","T","F","S","S"];function fD(t){switch(t){case"narrow":return[...HX];case"short":return[...pD];case"long":return[...dD];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const yD=["AM","PM"],WX=["Before Christ","Anno Domini"],JX=["BC","AD"],YX=["B","A"];function mD(t){switch(t){case"narrow":return[...YX];case"short":return[...JX];case"long":return[...WX];default:return null}}function KX(t){return yD[t.hour<12?0:1]}function ZX(t,e){return fD(e)[t.weekday-1]}function XX(t,e){return cD(e)[t.month-1]}function QX(t,e){return mD(e)[t.year<0?0:1]}function eQ(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&l){const E=t==="days";switch(e){case 1:return E?"tomorrow":`next ${n[t][0]}`;case-1:return E?"yesterday":`last ${n[t][0]}`;case 0:return E?"today":`this ${n[t][0]}`}}const d=Object.is(e,-0)||e<0,y=Math.abs(e),b=y===1,x=n[t],$=r?b?x[1]:x[2]||x[1]:b?n[t][0]:t;return d?`${y} ${$} ago`:`in ${y} ${$}`}function $I(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const tQ={D:_w,DD:BL,DDD:GL,DDDD:UL,t:qL,tt:HL,ttt:WL,tttt:JL,T:YL,TT:KL,TTT:ZL,TTTT:XL,f:QL,ff:tD,fff:rD,ffff:nD,F:eD,FF:iD,FFF:sD,FFFF:oD};class Xr{static create(e,i={}){return new Xr(e,i)}static parseFormat(e){let i=null,r="",n=!1;const l=[];for(let d=0;d<e.length;d++){const y=e.charAt(d);y==="'"?(r.length>0&&l.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||y===i?r+=y:(r.length>0&&l.push({literal:/^\s+$/.test(r),val:r}),r=y,i=y)}return r.length>0&&l.push({literal:n||/^\s+$/.test(r),val:r}),l}static macroTokenToFormatOpts(e){return tQ[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return ir(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",l=(P,D)=>this.loc.extract(e,P,D),d=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",y=()=>r?KX(e):l({hour:"numeric",hourCycle:"h12"},"dayperiod"),b=(P,D)=>r?XX(e,P):l(D?{month:P}:{month:P,day:"numeric"},"month"),x=(P,D)=>r?ZX(e,P):l(D?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),$=P=>{const D=Xr.macroTokenToFormatOpts(P);return D?this.formatWithSystemDefault(e,D):P},E=P=>r?QX(e,P):l({era:P},"era"),k=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return y();case"d":return n?l({day:"numeric"},"day"):this.num(e.day);case"dd":return n?l({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return x("short",!0);case"cccc":return x("long",!0);case"ccccc":return x("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return x("short",!1);case"EEEE":return x("long",!1);case"EEEEE":return x("narrow",!1);case"L":return n?l({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?l({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return b("short",!0);case"LLLL":return b("long",!0);case"LLLLL":return b("narrow",!0);case"M":return n?l({month:"numeric"},"month"):this.num(e.month);case"MM":return n?l({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return b("short",!1);case"MMMM":return b("long",!1);case"MMMMM":return b("narrow",!1);case"y":return n?l({year:"numeric"},"year"):this.num(e.year);case"yy":return n?l({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?l({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?l({year:"numeric"},"year"):this.num(e.year,6);case"G":return E("short");case"GG":return E("long");case"GGGGG":return E("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return $(P)}};return $I(Xr.parseFormat(i),k)}formatDurationFromString(e,i){const r=b=>{switch(b[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=b=>x=>{const $=r(x);return $?this.num(b.get($),x.length):x},l=Xr.parseFormat(i),d=l.reduce((b,{literal:x,val:$})=>x?b:b.concat($),[]),y=e.shiftTo(...d.map(r).filter(b=>b));return $I(l,n(y))}}class Lo{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const gD=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Y0(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function K0(...t){return e=>t.reduce(([i,r,n],l)=>{const[d,y,b]=l(e,n);return[{...i,...d},y||r,b]},[{},null,1]).slice(0,2)}function Z0(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function vD(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Nu(e[i+n]);return[r,null,i+n]}}const bD=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,iQ=`(?:${bD.source}?(?:\\[(${gD.source})\\])?)?`,l7=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,wD=RegExp(`${l7.source}${iQ}`),u7=RegExp(`(?:T${wD.source})?`),rQ=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,sQ=/(\d{4})-?W(\d\d)(?:-?(\d))?/,nQ=/(\d{4})-?(\d{3})/,oQ=vD("weekYear","weekNumber","weekDay"),aQ=vD("year","ordinal"),lQ=/(\d{4})-(\d\d)-(\d\d)/,_D=RegExp(`${l7.source} ?(?:${bD.source}|(${gD.source}))?`),uQ=RegExp(`(?: ${_D.source})?`);function h0(t,e,i){const r=t[e];return Pt(r)?i:Nu(r)}function hQ(t,e){return[{year:h0(t,e),month:h0(t,e+1,1),day:h0(t,e+2,1)},null,e+3]}function X0(t,e){return[{hours:h0(t,e,0),minutes:h0(t,e+1,0),seconds:h0(t,e+2,0),milliseconds:n7(t[e+3])},null,e+4]}function Mm(t,e){const i=!t[e]&&!t[e+1],r=Z2(t[e+1],t[e+2]),n=i?null:Qr.instance(r);return[{},n,e+3]}function $m(t,e){const i=t[e]?jl.create(t[e]):null;return[{},i,e+1]}const cQ=RegExp(`^T?${l7.source}$`),dQ=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function pQ(t){const[e,i,r,n,l,d,y,b,x]=t,$=e[0]==="-",E=b&&b[0]==="-",k=(P,D=!1)=>P!==void 0&&(D||P&&$)?-P:P;return[{years:k(Vh(i)),months:k(Vh(r)),weeks:k(Vh(n)),days:k(Vh(l)),hours:k(Vh(d)),minutes:k(Vh(y)),seconds:k(Vh(b),b==="-0"),milliseconds:k(n7(x),E)}]}const fQ={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function h7(t,e,i,r,n,l,d){const y={year:e.length===2?a9(Nu(e)):Nu(e),month:hD.indexOf(i)+1,day:Nu(r),hour:Nu(n),minute:Nu(l)};return d&&(y.second=Nu(d)),t&&(y.weekday=t.length>3?dD.indexOf(t)+1:pD.indexOf(t)+1),y}const yQ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function mQ(t){const[,e,i,r,n,l,d,y,b,x,$,E]=t,k=h7(e,n,r,i,l,d,y);let P;return b?P=fQ[b]:x?P=0:P=Z2($,E),[k,new Qr(P)]}function gQ(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const vQ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,bQ=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wQ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function TI(t){const[,e,i,r,n,l,d,y]=t;return[h7(e,n,r,i,l,d,y),Qr.utcInstance]}function _Q(t){const[,e,i,r,n,l,d,y]=t;return[h7(e,y,i,r,n,l,d),Qr.utcInstance]}const xQ=Y0(rQ,u7),SQ=Y0(sQ,u7),MQ=Y0(nQ,u7),$Q=Y0(wD),xD=K0(hQ,X0,Mm,$m),TQ=K0(oQ,X0,Mm,$m),IQ=K0(aQ,X0,Mm,$m),EQ=K0(X0,Mm,$m);function AQ(t){return Z0(t,[xQ,xD],[SQ,TQ],[MQ,IQ],[$Q,EQ])}function kQ(t){return Z0(gQ(t),[yQ,mQ])}function PQ(t){return Z0(t,[vQ,TI],[bQ,TI],[wQ,_Q])}function CQ(t){return Z0(t,[dQ,pQ])}const OQ=K0(X0);function LQ(t){return Z0(t,[cQ,OQ])}const DQ=Y0(lQ,uQ),RQ=Y0(_D),jQ=K0(X0,Mm,$m);function FQ(t){return Z0(t,[DQ,xD],[RQ,jQ])}const NQ="Invalid Duration",SD={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},zQ={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...SD},yn=146097/400,qd=146097/4800,VQ={years:{quarters:4,months:12,weeks:yn/7,days:yn,hours:yn*24,minutes:yn*24*60,seconds:yn*24*60*60,milliseconds:yn*24*60*60*1e3},quarters:{months:3,weeks:yn/28,days:yn/4,hours:yn*24/4,minutes:yn*24*60/4,seconds:yn*24*60*60/4,milliseconds:yn*24*60*60*1e3/4},months:{weeks:qd/7,days:qd,hours:qd*24,minutes:qd*24*60,seconds:qd*24*60*60,milliseconds:qd*24*60*60*1e3},...SD},sc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],BQ=sc.slice(0).reverse();function Ql(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new jt(r)}function GQ(t){return t<0?Math.floor(t):Math.ceil(t)}function MD(t,e,i,r,n){const l=t[n][i],d=e[i]/l,y=Math.sign(d)===Math.sign(r[n]),b=!y&&r[n]!==0&&Math.abs(d)<=1?GQ(d):Math.trunc(d);r[n]+=b,e[i]-=b*l}function UQ(t,e){BQ.reduce((i,r)=>Pt(e[r])?i:(i&&MD(t,e,i,e,r),r),null)}function qQ(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class jt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?VQ:zQ;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||gi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return jt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Dn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new jt({values:Mw(e,jt.normalizeUnit),loc:gi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(ld(e))return jt.fromMillis(e);if(jt.isDuration(e))return e;if(typeof e=="object")return jt.fromObject(e);throw new Dn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=CQ(e);return r?jt.fromObject(r,i):jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=LQ(e);return r?jt.fromObject(r,i):jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Dn("need to specify a reason the Duration is invalid");const r=e instanceof Lo?e:new Lo(e,i);if(tr.throwOnInvalid)throw new bX(r);return new jt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new VL(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Xr.create(this.loc,r).formatDurationFromString(this,e):NQ}toHuman(e={}){const i=sc.map(r=>{const n=this.values[r];return Pt(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=o7(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let n=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(n+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(n+=".SSS"));let l=r.toFormat(n);return e.includePrefix&&(l="T"+l),l}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=jt.fromDurationLike(e),r={};for(const n of sc)(L0(i.values,n)||L0(this.values,n))&&(r[n]=i.get(n)+this.get(n));return Ql(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=jt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=uD(e(this.values[r],r));return Ql(this,{values:i},!0)}get(e){return this[jt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...Mw(e,jt.normalizeUnit)};return Ql(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const d={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return Ql(this,d)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return UQ(this.matrix,e),Ql(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=qQ(this.normalize().shiftToAll().toObject());return Ql(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(d=>jt.normalizeUnit(d));const i={},r={},n=this.toObject();let l;for(const d of sc)if(e.indexOf(d)>=0){l=d;let y=0;for(const x in r)y+=this.matrix[x][d]*r[x],r[x]=0;ld(n[d])&&(y+=n[d]);const b=Math.trunc(y);i[d]=b,r[d]=(y*1e3-b*1e3)/1e3;for(const x in n)sc.indexOf(x)>sc.indexOf(d)&&MD(this.matrix,n,x,i,d)}else ld(n[d])&&(r[d]=n[d]);for(const d in r)r[d]!==0&&(i[l]+=d===l?r[d]:r[d]/this.matrix[l][d]);return Ql(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Ql(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of sc)if(!i(this.values[r],e.values[r]))return!1;return!0}}const Hd="Invalid Interval";function HQ(t,e){return!t||!t.isValid?ji.invalid("missing or invalid start"):!e||!e.isValid?ji.invalid("missing or invalid end"):e<t?ji.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class ji{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Dn("need to specify a reason the Interval is invalid");const r=e instanceof Lo?e:new Lo(e,i);if(tr.throwOnInvalid)throw new vX(r);return new ji({invalid:r})}static fromDateTimes(e,i){const r=Mf(e),n=Mf(i),l=HQ(r,n);return l??new ji({start:r,end:n})}static after(e,i){const r=jt.fromDurationLike(i),n=Mf(e);return ji.fromDateTimes(n,n.plus(r))}static before(e,i){const r=jt.fromDurationLike(i),n=Mf(e);return ji.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let l,d;try{l=yt.fromISO(r,i),d=l.isValid}catch{d=!1}let y,b;try{y=yt.fromISO(n,i),b=y.isValid}catch{b=!1}if(d&&b)return ji.fromDateTimes(l,y);if(d){const x=jt.fromISO(n,i);if(x.isValid)return ji.after(l,x)}else if(b){const x=jt.fromISO(r,i);if(x.isValid)return ji.before(y,x)}}return ji.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?ji.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Mf).filter(d=>this.contains(d)).sort(),r=[];let{s:n}=this,l=0;for(;n<this.e;){const d=i[l]||this.e,y=+d>+this.e?this.e:d;r.push(ji.fromDateTimes(n,y)),n=y,l+=1}return r}splitBy(e){const i=jt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,l;const d=[];for(;r<this.e;){const y=this.start.plus(i.mapUnits(b=>b*n));l=+y>+this.e?this.e:y,d.push(ji.fromDateTimes(r,l)),r=l,n+=1}return d}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:ji.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return ji.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,l)=>n.s-l.s).reduce(([n,l],d)=>l?l.overlaps(d)||l.abutsStart(d)?[n,l.union(d)]:[n.concat([l]),d]:[n,d],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],l=e.map(b=>[{time:b.s,type:"s"},{time:b.e,type:"e"}]),d=Array.prototype.concat(...l),y=d.sort((b,x)=>b.time-x.time);for(const b of y)r+=b.type==="s"?1:-1,r===1?i=b.time:(i&&+i!=+b.time&&n.push(ji.fromDateTimes(i,b.time)),i=null);return ji.merge(n)}difference(...e){return ji.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Hd}toLocaleString(e=_w,i={}){return this.isValid?Xr.create(this.s.loc.clone(i),e).formatInterval(this):Hd}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Hd}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Hd}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Hd}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Hd}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):jt.invalid(this.invalidReason)}mapEndpoints(e){return ji.fromDateTimes(e(this.s),e(this.e))}}class gg{static hasDST(e=tr.defaultZone){const i=yt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return jl.isValidZone(e)}static normalizeZone(e){return Yu(e,tr.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:l="gregory"}={}){return(n||gi.create(i,r,l)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:l="gregory"}={}){return(n||gi.create(i,r,l)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||gi.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||gi.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return gi.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return gi.create(i,null,"gregory").eras(e)}static features(){return{relative:aD()}}}function II(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(jt.fromMillis(r).as("days"))}function WQ(t,e,i){const r=[["years",(b,x)=>x.year-b.year],["quarters",(b,x)=>x.quarter-b.quarter+(x.year-b.year)*4],["months",(b,x)=>x.month-b.month+(x.year-b.year)*12],["weeks",(b,x)=>{const $=II(b,x);return($-$%7)/7}],["days",II]],n={},l=t;let d,y;for(const[b,x]of r)i.indexOf(b)>=0&&(d=b,n[b]=x(t,e),y=l.plus(n),y>e?(n[b]--,t=l.plus(n)):t=y);return[t,n,y,d]}function JQ(t,e,i,r){let[n,l,d,y]=WQ(t,e,i);const b=e-n,x=i.filter(E=>["hours","minutes","seconds","milliseconds"].indexOf(E)>=0);x.length===0&&(d<e&&(d=n.plus({[y]:1})),d!==n&&(l[y]=(l[y]||0)+b/(d-n)));const $=jt.fromObject(l,r);return x.length>0?jt.fromMillis(b,r).shiftTo(...x).plus($):$}const c7={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},EI={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},YQ=c7.hanidec.replace(/[\[|\]]/g,"").split("");function KQ(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(c7.hanidec)!==-1)e+=YQ.indexOf(t[i]);else for(const n in EI){const[l,d]=EI[n];r>=l&&r<=d&&(e+=r-l)}}return parseInt(e,10)}else return e}function eo({numberingSystem:t},e=""){return new RegExp(`${c7[t||"latn"]}${e}`)}const ZQ="missing Intl.DateTimeFormat.formatToParts support";function Gt(t,e=i=>i){return{regex:t,deser:([i])=>e(KQ(i))}}const XQ=String.fromCharCode(160),$D=`[ ${XQ}]`,TD=new RegExp($D,"g");function QQ(t){return t.replace(/\./g,"\\.?").replace(TD,$D)}function AI(t){return t.replace(/\./g,"").replace(TD," ").toLowerCase()}function to(t,e){return t===null?null:{regex:RegExp(t.map(QQ).join("|")),deser:([i])=>t.findIndex(r=>AI(i)===AI(r))+e}}function kI(t,e){return{regex:t,deser:([,i,r])=>Z2(i,r),groups:e}}function vg(t){return{regex:t,deser:([e])=>e}}function eee(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tee(t,e){const i=eo(e),r=eo(e,"{2}"),n=eo(e,"{3}"),l=eo(e,"{4}"),d=eo(e,"{6}"),y=eo(e,"{1,2}"),b=eo(e,"{1,3}"),x=eo(e,"{1,6}"),$=eo(e,"{1,9}"),E=eo(e,"{2,4}"),k=eo(e,"{4,6}"),P=N=>({regex:RegExp(eee(N.val)),deser:([B])=>B,literal:!0}),L=(N=>{if(t.literal)return P(N);switch(N.val){case"G":return to(e.eras("short",!1),0);case"GG":return to(e.eras("long",!1),0);case"y":return Gt(x);case"yy":return Gt(E,a9);case"yyyy":return Gt(l);case"yyyyy":return Gt(k);case"yyyyyy":return Gt(d);case"M":return Gt(y);case"MM":return Gt(r);case"MMM":return to(e.months("short",!0,!1),1);case"MMMM":return to(e.months("long",!0,!1),1);case"L":return Gt(y);case"LL":return Gt(r);case"LLL":return to(e.months("short",!1,!1),1);case"LLLL":return to(e.months("long",!1,!1),1);case"d":return Gt(y);case"dd":return Gt(r);case"o":return Gt(b);case"ooo":return Gt(n);case"HH":return Gt(r);case"H":return Gt(y);case"hh":return Gt(r);case"h":return Gt(y);case"mm":return Gt(r);case"m":return Gt(y);case"q":return Gt(y);case"qq":return Gt(r);case"s":return Gt(y);case"ss":return Gt(r);case"S":return Gt(b);case"SSS":return Gt(n);case"u":return vg($);case"uu":return vg(y);case"uuu":return Gt(i);case"a":return to(e.meridiems(),0);case"kkkk":return Gt(l);case"kk":return Gt(E,a9);case"W":return Gt(y);case"WW":return Gt(r);case"E":case"c":return Gt(i);case"EEE":return to(e.weekdays("short",!1,!1),1);case"EEEE":return to(e.weekdays("long",!1,!1),1);case"ccc":return to(e.weekdays("short",!0,!1),1);case"cccc":return to(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return kI(new RegExp(`([+-]${y.source})(?::(${r.source}))?`),2);case"ZZZ":return kI(new RegExp(`([+-]${y.source})(${r.source})?`),2);case"z":return vg(/[a-z_+-/]{1,256}?/i);case" ":return vg(/[^\S\n\r]/);default:return P(N)}})(t)||{invalidReason:ZQ};return L.token=t,L}const iee={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ree(t,e){const{type:i,value:r}=t;if(i==="literal"){const d=/^\s+$/.test(r);return{literal:!d,val:d?" ":r}}const n=e[i];let l=iee[i];if(typeof l=="object"&&(l=l[n]),l)return{literal:!1,val:l}}function see(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function nee(t,e,i){const r=t.match(e);if(r){const n={};let l=1;for(const d in i)if(L0(i,d)){const y=i[d],b=y.groups?y.groups+1:1;!y.literal&&y.token&&(n[y.token.val[0]]=y.deser(r.slice(l,l+b))),l+=b}return[r,n]}else return[r,{}]}function oee(t){const e=l=>{switch(l){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Pt(t.z)||(i=jl.create(t.z)),Pt(t.Z)||(i||(i=new Qr(t.Z)),r=t.Z),Pt(t.q)||(t.M=(t.q-1)*3+1),Pt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Pt(t.u)||(t.S=n7(t.u)),[Object.keys(t).reduce((l,d)=>{const y=e(d);return y&&(l[y]=t[d]),l},{}),i,r]}let x3=null;function aee(){return x3||(x3=yt.fromMillis(1555555555555)),x3}function lee(t,e){if(t.literal)return t;const i=Xr.macroTokenToFormatOpts(t.val),r=AD(i,e);return r==null||r.includes(void 0)?t:r}function ID(t,e){return Array.prototype.concat(...t.map(i=>lee(i,e)))}function ED(t,e,i){const r=ID(Xr.parseFormat(i),t),n=r.map(d=>tee(d,t)),l=n.find(d=>d.invalidReason);if(l)return{input:e,tokens:r,invalidReason:l.invalidReason};{const[d,y]=see(n),b=RegExp(d,"i"),[x,$]=nee(e,b,y),[E,k,P]=$?oee($):[null,null,void 0];if(L0($,"a")&&L0($,"H"))throw new Xf("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:b,rawMatches:x,matches:$,result:E,zone:k,specificOffset:P}}}function uee(t,e,i){const{result:r,zone:n,specificOffset:l,invalidReason:d}=ED(t,e,i);return[r,n,l,d]}function AD(t,e){return t?Xr.create(e,t).formatDateTimeParts(aee()).map(n=>ree(n,t)):null}const kD=[0,31,59,90,120,151,181,212,243,273,304,334],PD=[0,31,60,91,121,152,182,213,244,274,305,335];function jn(t,e){return new Lo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function CD(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function OD(t,e,i){return i+(Sm(t)?PD:kD)[e-1]}function LD(t,e){const i=Sm(t)?PD:kD,r=i.findIndex(l=>l<e),n=e-i[r];return{month:r+1,day:n}}function l9(t){const{year:e,month:i,day:r}=t,n=OD(e,i,r),l=CD(e,i,r);let d=Math.floor((n-l+10)/7),y;return d<1?(y=e-1,d=Sw(y)):d>Sw(e)?(y=e+1,d=1):y=e,{weekYear:y,weekNumber:d,weekday:l,...X2(t)}}function PI(t){const{weekYear:e,weekNumber:i,weekday:r}=t,n=CD(e,1,4),l=ay(e);let d=i*7+r-n-3,y;d<1?(y=e-1,d+=ay(y)):d>l?(y=e+1,d-=ay(e)):y=e;const{month:b,day:x}=LD(y,d);return{year:y,month:b,day:x,...X2(t)}}function S3(t){const{year:e,month:i,day:r}=t,n=OD(e,i,r);return{year:e,ordinal:n,...X2(t)}}function CI(t){const{year:e,ordinal:i}=t,{month:r,day:n}=LD(e,i);return{year:e,month:r,day:n,...X2(t)}}function hee(t){const e=K2(t.weekYear),i=xl(t.weekNumber,1,Sw(t.weekYear)),r=xl(t.weekday,1,7);return e?i?r?!1:jn("weekday",t.weekday):jn("week",t.week):jn("weekYear",t.weekYear)}function cee(t){const e=K2(t.year),i=xl(t.ordinal,1,ay(t.year));return e?i?!1:jn("ordinal",t.ordinal):jn("year",t.year)}function DD(t){const e=K2(t.year),i=xl(t.month,1,12),r=xl(t.day,1,xw(t.year,t.month));return e?i?r?!1:jn("day",t.day):jn("month",t.month):jn("year",t.year)}function RD(t){const{hour:e,minute:i,second:r,millisecond:n}=t,l=xl(e,0,23)||e===24&&i===0&&r===0&&n===0,d=xl(i,0,59),y=xl(r,0,59),b=xl(n,0,999);return l?d?y?b?!1:jn("millisecond",n):jn("second",r):jn("minute",i):jn("hour",e)}const M3="Invalid DateTime",OI=864e13;function bg(t){return new Lo("unsupported zone",`the zone "${t.name}" is not supported`)}function $3(t){return t.weekData===null&&(t.weekData=l9(t.c)),t.weekData}function xf(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new yt({...i,...e,old:i})}function jD(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const l=i.offset(r);return n===l?[r,n]:[t-Math.min(n,l)*60*1e3,Math.max(n,l)]}function LI(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Pv(t,e,i){return jD(a7(t),e,i)}function DI(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,l={...t.c,year:r,month:n,day:Math.min(t.c.day,xw(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},d=jt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),y=a7(l);let[b,x]=jD(y,i,t.zone);return d!==0&&(b+=d,x=t.zone.offset(b)),{ts:b,o:x}}function Sf(t,e,i,r,n,l){const{setZone:d,zone:y}=i;if(t&&Object.keys(t).length!==0||e){const b=e||y,x=yt.fromObject(t,{...i,zone:b,specificOffset:l});return d?x:x.setZone(y)}else return yt.invalid(new Lo("unparsable",`the input "${n}" can't be parsed as ${r}`))}function wg(t,e,i=!0){return t.isValid?Xr.create(gi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function T3(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=ir(t.c.year,i?6:4),e?(r+="-",r+=ir(t.c.month),r+="-",r+=ir(t.c.day)):(r+=ir(t.c.month),r+=ir(t.c.day)),r}function RI(t,e,i,r,n,l){let d=ir(t.c.hour);return e?(d+=":",d+=ir(t.c.minute),(t.c.second!==0||!i)&&(d+=":")):d+=ir(t.c.minute),(t.c.second!==0||!i)&&(d+=ir(t.c.second),(t.c.millisecond!==0||!r)&&(d+=".",d+=ir(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!l?d+="Z":t.o<0?(d+="-",d+=ir(Math.trunc(-t.o/60)),d+=":",d+=ir(Math.trunc(-t.o%60))):(d+="+",d+=ir(Math.trunc(t.o/60)),d+=":",d+=ir(Math.trunc(t.o%60)))),l&&(d+="["+t.zone.ianaName+"]"),d}const FD={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dee={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},pee={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ND=["year","month","day","hour","minute","second","millisecond"],fee=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],yee=["year","ordinal","hour","minute","second","millisecond"];function jI(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new VL(t);return e}function FI(t,e){const i=Yu(e.zone,tr.defaultZone),r=gi.fromObject(e),n=tr.now();let l,d;if(Pt(t.year))l=n;else{for(const x of ND)Pt(t[x])&&(t[x]=FD[x]);const y=DD(t)||RD(t);if(y)return yt.invalid(y);const b=i.offset(n);[l,d]=Pv(t,b,i)}return new yt({ts:l,zone:i,loc:r,o:d})}function NI(t,e,i){const r=Pt(i.round)?!0:i.round,n=(d,y)=>(d=o7(d,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(d,y)),l=d=>i.calendary?e.hasSame(t,d)?0:e.startOf(d).diff(t.startOf(d),d).get(d):e.diff(t,d).get(d);if(i.unit)return n(l(i.unit),i.unit);for(const d of i.units){const y=l(d);if(Math.abs(y)>=1)return n(y,d)}return n(t>e?-0:0,i.units[i.units.length-1])}function zI(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class yt{constructor(e){const i=e.zone||tr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Lo("invalid input"):null)||(i.isValid?null:bg(i));this.ts=Pt(e.ts)?tr.now():e.ts;let n=null,l=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,l]=[e.old.c,e.old.o];else{const y=i.offset(this.ts);n=LI(this.ts,y),r=Number.isNaN(n.year)?new Lo("invalid input"):null,n=r?null:n,l=r?null:y}this._zone=i,this.loc=e.loc||gi.create(),this.invalid=r,this.weekData=null,this.c=n,this.o=l,this.isLuxonDateTime=!0}static now(){return new yt({})}static local(){const[e,i]=zI(arguments),[r,n,l,d,y,b,x]=i;return FI({year:r,month:n,day:l,hour:d,minute:y,second:b,millisecond:x},e)}static utc(){const[e,i]=zI(arguments),[r,n,l,d,y,b,x]=i;return e.zone=Qr.utcInstance,FI({year:r,month:n,day:l,hour:d,minute:y,second:b,millisecond:x},e)}static fromJSDate(e,i={}){const r=zX(e)?e.valueOf():NaN;if(Number.isNaN(r))return yt.invalid("invalid input");const n=Yu(i.zone,tr.defaultZone);return n.isValid?new yt({ts:r,zone:n,loc:gi.fromObject(i)}):yt.invalid(bg(n))}static fromMillis(e,i={}){if(ld(e))return e<-OI||e>OI?yt.invalid("Timestamp out of range"):new yt({ts:e,zone:Yu(i.zone,tr.defaultZone),loc:gi.fromObject(i)});throw new Dn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(ld(e))return new yt({ts:e*1e3,zone:Yu(i.zone,tr.defaultZone),loc:gi.fromObject(i)});throw new Dn("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Yu(i.zone,tr.defaultZone);if(!r.isValid)return yt.invalid(bg(r));const n=tr.now(),l=Pt(i.specificOffset)?r.offset(n):i.specificOffset,d=Mw(e,jI),y=!Pt(d.ordinal),b=!Pt(d.year),x=!Pt(d.month)||!Pt(d.day),$=b||x,E=d.weekYear||d.weekNumber,k=gi.fromObject(i);if(($||y)&&E)throw new Xf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&y)throw new Xf("Can't mix ordinal dates with month/day");const P=E||d.weekday&&!$;let D,L,N=LI(n,l);P?(D=fee,L=dee,N=l9(N)):y?(D=yee,L=pee,N=S3(N)):(D=ND,L=FD);let B=!1;for(const de of D){const be=d[de];Pt(be)?B?d[de]=L[de]:d[de]=N[de]:B=!0}const W=P?hee(d):y?cee(d):DD(d),H=W||RD(d);if(H)return yt.invalid(H);const Y=P?PI(d):y?CI(d):d,[ie,ne]=Pv(Y,l,r),he=new yt({ts:ie,zone:r,o:ne,loc:k});return d.weekday&&$&&e.weekday!==he.weekday?yt.invalid("mismatched weekday",`you can't specify both a weekday of ${d.weekday} and a date of ${he.toISO()}`):he}static fromISO(e,i={}){const[r,n]=AQ(e);return Sf(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=kQ(e);return Sf(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=PQ(e);return Sf(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Pt(e)||Pt(i))throw new Dn("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:l=null}=r,d=gi.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0}),[y,b,x,$]=uee(d,e,i);return $?yt.invalid($):Sf(y,b,r,`format ${i}`,e,x)}static fromString(e,i,r={}){return yt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=FQ(e);return Sf(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Dn("need to specify a reason the DateTime is invalid");const r=e instanceof Lo?e:new Lo(e,i);if(tr.throwOnInvalid)throw new gX(r);return new yt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=AD(e,gi.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return ID(Xr.parseFormat(e),gi.fromObject(i)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?$3(this).weekYear:NaN}get weekNumber(){return this.isValid?$3(this).weekNumber:NaN}get weekday(){return this.isValid?$3(this).weekday:NaN}get ordinal(){return this.isValid?S3(this.c).ordinal:NaN}get monthShort(){return this.isValid?gg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?gg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?gg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?gg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Sm(this.year)}get daysInMonth(){return xw(this.year,this.month)}get daysInYear(){return this.isValid?ay(this.year):NaN}get weeksInWeekYear(){return this.isValid?Sw(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=Xr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Qr.instance(e),i)}toLocal(){return this.setZone(tr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Yu(e,tr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const l=e.offset(this.ts),d=this.toObject();[n]=Pv(d,l,e)}return xf(this,{ts:n,zone:e})}else return yt.invalid(bg(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return xf(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=Mw(e,jI),r=!Pt(i.weekYear)||!Pt(i.weekNumber)||!Pt(i.weekday),n=!Pt(i.ordinal),l=!Pt(i.year),d=!Pt(i.month)||!Pt(i.day),y=l||d,b=i.weekYear||i.weekNumber;if((y||n)&&b)throw new Xf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&n)throw new Xf("Can't mix ordinal dates with month/day");let x;r?x=PI({...l9(this.c),...i}):Pt(i.ordinal)?(x={...this.toObject(),...i},Pt(i.day)&&(x.day=Math.min(xw(x.year,x.month),x.day))):x=CI({...S3(this.c),...i});const[$,E]=Pv(x,this.o,this.zone);return xf(this,{ts:$,o:E})}plus(e){if(!this.isValid)return this;const i=jt.fromDurationLike(e);return xf(this,DI(this,i))}minus(e){if(!this.isValid)return this;const i=jt.fromDurationLike(e).negate();return xf(this,DI(this,i))}startOf(e){if(!this.isValid)return this;const i={},r=jt.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?Xr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):M3}toLocaleString(e=_w,i={}){return this.isValid?Xr.create(this.loc.clone(i),e).formatDateTime(this):M3}toLocaleParts(e={}){return this.isValid?Xr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:l=!1}={}){if(!this.isValid)return null;const d=e==="extended";let y=T3(this,d);return y+="T",y+=RI(this,d,i,r,n,l),y}toISODate({format:e="extended"}={}){return this.isValid?T3(this,e==="extended"):null}toISOWeekDate(){return wg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:l=!1,format:d="extended"}={}){return this.isValid?(n?"T":"")+RI(this,d==="extended",i,e,r,l):null}toRFC2822(){return wg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return wg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?T3(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),wg(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():M3}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return jt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},l=VX(i).map(jt.normalizeUnit),d=e.valueOf()>this.valueOf(),y=d?this:e,b=d?e:this,x=JQ(y,b,l,n);return d?x.negate():x}diffNow(e="milliseconds",i={}){return this.diff(yt.now(),e,i)}until(e){return this.isValid?ji.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const r=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i)<=r&&r<=n.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||yt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],l=e.unit;return Array.isArray(e.unit)&&(n=e.unit,l=void 0),NI(i,this.plus(r),{...e,numeric:"always",units:n,unit:l})}toRelativeCalendar(e={}){return this.isValid?NI(e.base||yt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(yt.isDateTime))throw new Dn("min requires all arguments be DateTimes");return MI(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(yt.isDateTime))throw new Dn("max requires all arguments be DateTimes");return MI(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:l=null}=r,d=gi.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0});return ED(d,e,i)}static fromStringExplain(e,i,r={}){return yt.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return _w}static get DATE_MED(){return BL}static get DATE_MED_WITH_WEEKDAY(){return wX}static get DATE_FULL(){return GL}static get DATE_HUGE(){return UL}static get TIME_SIMPLE(){return qL}static get TIME_WITH_SECONDS(){return HL}static get TIME_WITH_SHORT_OFFSET(){return WL}static get TIME_WITH_LONG_OFFSET(){return JL}static get TIME_24_SIMPLE(){return YL}static get TIME_24_WITH_SECONDS(){return KL}static get TIME_24_WITH_SHORT_OFFSET(){return ZL}static get TIME_24_WITH_LONG_OFFSET(){return XL}static get DATETIME_SHORT(){return QL}static get DATETIME_SHORT_WITH_SECONDS(){return eD}static get DATETIME_MED(){return tD}static get DATETIME_MED_WITH_SECONDS(){return iD}static get DATETIME_MED_WITH_WEEKDAY(){return _X}static get DATETIME_FULL(){return rD}static get DATETIME_FULL_WITH_SECONDS(){return sD}static get DATETIME_HUGE(){return nD}static get DATETIME_HUGE_WITH_SECONDS(){return oD}}function Mf(t){if(yt.isDateTime(t))return t;if(t&&t.valueOf&&ld(t.valueOf()))return yt.fromJSDate(t);if(t&&typeof t=="object")return yt.fromObject(t);throw new Dn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const mee={year:void 0,month:void 0,day:void 0,weekday:void 0},gee={hour:void 0,minute:void 0,second:void 0},vee={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},d7={timeZone:"Etc/UTC"},ra={year:"numeric",month:"numeric",day:"numeric"},$f={year:"numeric",month:"long",day:"numeric"},Tf={year:"numeric",month:"short",day:"numeric"},If={year:"numeric",month:"long",weekday:"long",day:"numeric"},xn={hour:"numeric",minute:"numeric"},io={...xn,second:"numeric"},Q0={"short-date":ra,"short-date-short-time":{...ra,...xn},"short-date-short-time-24":{...ra,...xn,hour12:!1},"short-date-long-time":{...ra,...io},"short-date-long-time-24":{...ra,...io,hour12:!1},"short-date-le":ra,"short-date-le-short-time":{...ra,...xn},"short-date-le-short-time-24":{...ra,...xn,hour12:!1},"short-date-le-long-time":{...ra,...io},"short-date-le-long-time-24":{...ra,...io,hour12:!1},"long-month-day-year":$f,"long-month-day-year-short-time":{...$f,...xn},"long-month-day-year-short-time-24":{...$f,...xn,hour12:!1},"long-month-day-year-long-time":{...$f,...io},"long-month-day-year-long-time-24":{...$f,...io,hour12:!1},"day-short-month-year":Tf,"day-short-month-year-short-time":{...Tf,...xn},"day-short-month-year-short-time-24":{...Tf,...xn,hour12:!1},"day-short-month-year-long-time":{...Tf,...io},"day-short-month-year-long-time-24":{...Tf,...io,hour12:!1},"long-date":If,"long-date-short-time":{...If,...xn},"long-date-short-time-24":{...If,...xn,hour12:!1},"long-date-long-time":{...If,...io},"long-date-long-time-24":{...If,...io,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":xn,"long-time":io},bee=rs()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),zD={ar:"ar-u-nu-latn-ca-gregory"};let u9=new WeakMap,VD=Q0["short-date-short-time"];function wee(t){const e=t||VD;let i=u9.get(e);if(!i){const r=Vn(),n=zD[r]||r;i=new Intl.DateTimeFormat(n,e),u9.set(e,i)}return i}function Jp(t){return Q0[t]}function qn(t,e){return wee(e).format(t)}function p7(t,e=Q0["short-date"]){return qn(new Date(t),{...e,...d7,...gee})}function f7(t,e=Q0["short-time"]){return qn(new Date(`1970-01-01T${t}Z`),{...e,...d7,...mee})}function y7(t,e=Q0["short-date-short-time"]){const i=yt.fromISO(t,{setZone:!0}),r=Vn(),n=zD[r]??r;return i.toLocaleString({...vee,...e},{locale:n})}jM(()=>{u9=new WeakMap,VD=Q0["short-date-short-time"]});const _ee={ar:"ar-u-nu-latn"};let Cv=new WeakMap,BD={};function xee(t){const e=t||BD;if(!Cv.has(e)){const i=Vn(),r=_ee[Vn()]||i;Cv.set(e,new Intl.NumberFormat(r,t))}return Cv.get(e)}function GD(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function wh(t,e){return Object.is(t,-0)&&(t=0),xee(e).format(t)}jM(()=>{Cv=new WeakMap,BD={}});let ap=class extends ti(ve){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(e){return wh(e,GD(this))}formatDate(e,i=!1){return this.dateFormat?qn(e,{...Jp(this.dateFormat),...i&&d7}):this.formatNumber(e)}formatDateOnly(e){const i=(this.dateFormat&&Jp(this.dateFormat))??void 0;return p7(e,i)}formatTimeOnly(e){const i=(this.dateFormat&&Jp(this.dateFormat))??void 0;return f7(e,i)}formatTimestamp(e){const i=(this.dateFormat&&Jp(this.dateFormat))??void 0;return y7(e,i)}formatRasterPixelValue(e){return e.includes("-")?e:e.trim().includes(",")?this._formatDelimitedString(e,",",", "):e.trim().includes(";")?this._formatDelimitedString(e,";","; "):e.trim().includes(" ")?this._formatDelimitedString(e," "," "):this.formatNumber(Number(e))}_formatDelimitedString(e,i,r){return e&&i&&r?e.trim().split(i).map(n=>this.formatNumber(Number(n))).join(r):e}};g([Ue(bee)],ap.prototype,"dateFormat",void 0),g([S({type:Boolean,json:{write:!0}})],ap.prototype,"digitSeparator",void 0),g([S({type:Ct,json:{write:!0}})],ap.prototype,"places",void 0),ap=g([J("esri.popup.support.FieldInfoFormat")],ap);const Yp=ap;var h9;let uo=h9=class extends ve{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new h9({fieldName:this.fieldName,format:this.format?ae(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};g([S({type:String,json:{write:!0}})],uo.prototype,"fieldName",void 0),g([S({type:Yp,json:{write:!0}})],uo.prototype,"format",void 0),g([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],uo.prototype,"isEditable",void 0),g([S({type:String,json:{write:!0}})],uo.prototype,"label",void 0),g([Ue(new _t({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],uo.prototype,"stringFieldOption",void 0),g([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],uo.prototype,"statisticType",void 0),g([S({type:String,json:{write:!0}})],uo.prototype,"tooltip",void 0),g([S({type:Boolean,json:{write:!0}})],uo.prototype,"visible",void 0),uo=h9=g([J("esri.popup.FieldInfo")],uo);const Tm=uo;var c9;let Qa=c9=class extends Lh{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new c9(ae({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};g([S({type:Object,json:{write:!0}})],Qa.prototype,"attributes",void 0),g([S({type:String,json:{write:!0}})],Qa.prototype,"description",void 0),g([S({type:[Tm]})],Qa.prototype,"fieldInfos",void 0),g([Ae("fieldInfos")],Qa.prototype,"writeFieldInfos",null),g([S({type:String,json:{write:!0}})],Qa.prototype,"title",void 0),g([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Qa.prototype,"type",void 0),Qa=c9=g([J("esri.popup.content.FieldsContent")],Qa);const D0=Qa;let nc=class extends ve{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};g([S({type:String,json:{write:!0}})],nc.prototype,"altText",void 0),g([S({type:String,json:{write:!0}})],nc.prototype,"caption",void 0),g([S({type:String,json:{write:!0}})],nc.prototype,"title",void 0),g([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],nc.prototype,"type",void 0),nc=g([J("esri.popup.content.mixins.MediaInfo")],nc);const m7=nc;var d9;let lp=d9=class extends Be{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new d9({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};g([S()],lp.prototype,"fieldName",void 0),g([S()],lp.prototype,"tooltip",void 0),g([S()],lp.prototype,"value",void 0),lp=d9=g([J("esri.popup.content.support.ChartMediaInfoValueSeries")],lp);const UD=lp;var p9;let oc=p9=class extends ve{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new p9({fields:ae(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};g([S({type:[String],json:{write:!0}})],oc.prototype,"fields",void 0),g([S({type:String,json:{write:!0}})],oc.prototype,"normalizeField",void 0),g([S({type:[UD],json:{read:!1}})],oc.prototype,"series",void 0),g([S({type:String,json:{write:!0}})],oc.prototype,"tooltipField",void 0),oc=p9=g([J("esri.popup.content.support.ChartMediaInfoValue")],oc);const See=oc;let e1=class extends m7{constructor(e){super(e),this.type=null,this.value=null}};g([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],e1.prototype,"type",void 0),g([S({type:See,json:{write:!0}})],e1.prototype,"value",void 0),e1=g([J("esri.popup.content.mixins.ChartMediaInfo")],e1);const Q2=e1,e_=rs()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var f9;let Ov=f9=class extends Q2{constructor(t){super(t),this.type="bar-chart"}clone(){return new f9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:e_.write}})],Ov.prototype,"type",void 0),Ov=f9=g([J("esri.popup.content.BarChartMediaInfo")],Ov);const qD=Ov;var y9;let Lv=y9=class extends Q2{constructor(t){super(t),this.type="column-chart"}clone(){return new y9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:e_.write}})],Lv.prototype,"type",void 0),Lv=y9=g([J("esri.popup.content.ColumnChartMediaInfo")],Lv);const HD=Lv;var m9;let t1=m9=class extends ve{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new m9({linkURL:this.linkURL,sourceURL:this.sourceURL})}};g([S({type:String,json:{write:!0}})],t1.prototype,"linkURL",void 0),g([S({type:String,json:{write:!0}})],t1.prototype,"sourceURL",void 0),t1=m9=g([J("esri.popup.content.support.ImageMediaInfoValue")],t1);const Mee=t1;var g9;let up=g9=class extends m7{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new g9({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};g([S({type:Number,json:{write:!0}})],up.prototype,"refreshInterval",void 0),g([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],up.prototype,"type",void 0),g([S({type:Mee,json:{write:!0}})],up.prototype,"value",void 0),up=g9=g([J("esri.popup.content.ImageMediaInfo")],up);const WD=up;var v9;let Dv=v9=class extends Q2{constructor(t){super(t),this.type="line-chart"}clone(){return new v9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:e_.write}})],Dv.prototype,"type",void 0),Dv=v9=g([J("esri.popup.content.LineChartMediaInfo")],Dv);const JD=Dv;var b9;let Rv=b9=class extends Q2{constructor(t){super(t),this.type="pie-chart"}clone(){return new b9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:e_.write}})],Rv.prototype,"type",void 0),Rv=b9=g([J("esri.popup.content.PieChartMediaInfo")],Rv);const YD=Rv,KD={base:m7,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":qD,"column-chart":HD,"line-chart":JD,"pie-chart":YD,image:WD}};var w9;let ho=w9=class extends Lh{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?WD.fromJSON(e):e.type==="barchart"?qD.fromJSON(e):e.type==="columnchart"?HD.fromJSON(e):e.type==="linechart"?JD.fromJSON(e):e.type==="piechart"?YD.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new w9(ae({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};g([S()],ho.prototype,"activeMediaInfoIndex",void 0),g([S({type:Object,json:{write:!0}})],ho.prototype,"attributes",void 0),g([S({type:String,json:{write:!0}})],ho.prototype,"description",void 0),g([S({types:[KD]})],ho.prototype,"mediaInfos",void 0),g([Se("mediaInfos")],ho.prototype,"readMediaInfos",null),g([Ae("mediaInfos")],ho.prototype,"writeMediaInfos",null),g([S({type:String,json:{write:!0}})],ho.prototype,"title",void 0),g([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ho.prototype,"type",void 0),ho=w9=g([J("esri.popup.content.MediaContent")],ho);const Zy=ho;var _9;let i1=_9=class extends ve{constructor(t){super(t),this.field=null,this.order=null}clone(){return new _9({field:this.field,order:this.order})}};g([S({type:String,json:{write:!0}})],i1.prototype,"field",void 0),g([S({type:["asc","desc"],json:{write:!0}})],i1.prototype,"order",void 0),i1=_9=g([J("esri.popup.support.RelatedRecordsInfoFieldOrder")],i1);const g7=i1;let ua=class extends ti(Lh){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};g([S({type:String,json:{write:!0}})],ua.prototype,"description",void 0),g([S({type:Number,json:{type:Ct,write:!0}})],ua.prototype,"displayCount",void 0),g([S({type:["list"],json:{write:!0}})],ua.prototype,"displayType",void 0),g([S({type:[g7],json:{write:!0}})],ua.prototype,"orderByFields",void 0),g([S({type:Number,json:{type:Ct,write:!0}})],ua.prototype,"relationshipId",void 0),g([S({type:String,json:{write:!0}})],ua.prototype,"title",void 0),g([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],ua.prototype,"type",void 0),ua=g([J("esri.popup.content.RelationshipContent")],ua);const $w=ua;var x9;let r1=x9=class extends Lh{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new x9({text:this.text})}};g([S({type:String,json:{write:!0}})],r1.prototype,"text",void 0),g([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],r1.prototype,"type",void 0),r1=x9=g([J("esri.popup.content.TextContent")],r1);const R0=r1,$ee={base:null,key:"type",typeMap:{attachment:Ky,media:Zy,text:R0,expression:s7,field:D0,relationship:$w}};var S9;let ac=S9=class extends ve{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new S9({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([S({type:String,json:{write:!0}})],ac.prototype,"name",void 0),g([S({type:String,json:{write:!0}})],ac.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],ac.prototype,"expression",void 0),g([S({type:["string","number"],json:{write:!0}})],ac.prototype,"returnType",void 0),ac=S9=g([J("esri.popup.ExpressionInfo")],ac);const ZD=ac;var M9;let s1=M9=class extends ve{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new M9({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};g([S({type:Boolean,json:{write:!0}})],s1.prototype,"returnTopmostRaster",void 0),g([S({type:Boolean,json:{write:!0}})],s1.prototype,"showNoDataRecords",void 0),s1=M9=g([J("esri.popup.LayerOptions")],s1);const Tee=s1;var $9;let n1=$9=class extends ve{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new $9({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ae(this.orderByFields):null})}};g([S({type:Boolean,json:{write:!0}})],n1.prototype,"showRelatedRecords",void 0),g([S({type:[g7],json:{write:!0}})],n1.prototype,"orderByFields",void 0),n1=$9=g([J("esri.popup.RelatedRecordsInfo")],n1);const Iee=n1;var T9;let Sn=T9=class extends Oh(Be){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new T9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};g([S()],Sn.prototype,"active",void 0),g([S()],Sn.prototype,"className",void 0),g([S()],Sn.prototype,"disabled",void 0),g([S()],Sn.prototype,"icon",void 0),g([S()],Sn.prototype,"id",void 0),g([S()],Sn.prototype,"indicator",void 0),g([S()],Sn.prototype,"title",void 0),g([S()],Sn.prototype,"type",void 0),g([S()],Sn.prototype,"visible",void 0),Sn=T9=g([J("esri.support.actions.ActionBase")],Sn);const ef=Sn;var I9;let jv=I9=class extends ef{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new I9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};g([S()],jv.prototype,"image",void 0),jv=I9=g([J("esri.support.Action.ActionButton")],jv);const tf=jv;var E9;let o1=E9=class extends ef{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new E9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};g([S()],o1.prototype,"image",void 0),g([S()],o1.prototype,"value",void 0),o1=E9=g([J("esri.support.Action.ActionToggle")],o1);const t_=o1,Eee="esri.PopupTemplate",Aee=ge.getLogger(Eee),Ef="relationships/",VI="expression/",kee=ze.ofType({key:"type",defaultKeyValue:"button",base:ef,typeMap:{button:tf,toggle:t_}}),Pee={base:Lh,key:"type",typeMap:{media:Zy,custom:mX,text:R0,attachments:Ky,fields:D0,expression:s7,relationship:$w}},Cee=["attachments","fields","media","text","expression","relationship"];let lr=class extends ti(ve){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ca(Pee,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Vl(e)?e:(Aee.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,n){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(l=>Cee.includes(l.type)).map(l=>l&&l.toJSON(n)),i.popupElements.forEach(l=>{l.type==="attachments"?this._writeAttachmentContent(i):l.type==="media"?this._writeMediaContent(l,i):l.type==="text"?this._writeTextContent(l,i):l.type==="relationship"&&this._writeRelationshipContent(l,i)})):i.description=e}writeFieldInfos(e,i,r,n){const{content:l}=this,d=Array.isArray(l)?l:null;if(e){const y=d?d.filter(x=>x.type==="fields"):[],b=y.length&&y.every(x=>{var $;return($=x.fieldInfos)==null?void 0:$.length});i.fieldInfos=e.filter(Boolean).map(x=>{const $=x.toJSON(n);return b&&($.visible=!1),$})}if(d)for(const y of d)y.type==="fields"&&this._writeFieldsContent(y,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Yy(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=ae(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const l=i.fieldInfos.find(d=>d.fieldName.toLowerCase()===n.fieldName.toLowerCase());l?l.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var l,d;const r=((l=e.orderByFields)==null?void 0:l.map(y=>this._toFieldOrderJSON(y,e.relationshipId)))||[],n=[...((d=i.relatedRecordsInfo)==null?void 0:d.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=ae(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(l=>l.type==="media"?(l.mediaInfos||!i||n.mediaInfos||(l.mediaInfos=i,n.mediaInfos=!0),Zy.fromJSON(l)):l.type==="text"?(l.text||!e||n.description||(l.text=e,n.description=!0),R0.fromJSON(l)):l.type==="attachments"?Ky.fromJSON(l):l.type==="fields"?D0.fromJSON(l):l.type==="expression"?s7.fromJSON(l):l.type==="relationship"?$w.fromJSON(l):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(Ef)))return null;const n=i.replace(Ef,"").split("/");if(n.length!==2)return null;const l=parseInt(n[0],10),d=n[1];return typeof l=="number"&&d?$w.fromJSON({relationshipId:l,orderByFields:[{field:d,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${Ef}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const l=[];e?l.push(new R0({text:e})):l.push(new D0),Array.isArray(i)&&i.length&&l.push(Zy.fromJSON({mediaInfos:i})),r&&l.push(Ky.fromJSON({displayType:"auto"}));const{showRelatedRecords:d,orderByFields:y}=n;return d&&(y!=null&&y.length)&&y.forEach(b=>{const x=this._toRelationshipContent(b);x&&l.push(x)}),l.length?l:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,l)=>[...n,...this._getMediaInfoFields(l)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,l=n||{},{fields:d,normalizeField:y,tooltipField:b,sourceURL:x,linkURL:$}=l,E=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(x),...this._extractFieldNames($),...d??[]];return y&&E.push(y),b&&E.push(b),E}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(n=>_s(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(Ef)&&!i.startsWith(VI)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,l=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(l)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const n=/\{(\w+):.+\}/,l=r.filter(d=>!(d.indexOf(`{${Ef}`)===0||d.indexOf(`{${VI}`)===0)).map(d=>d.replace(n,"{$1}"));return l?l.map(d=>d.slice(1,-1)):[]}};g([S({type:kee})],lr.prototype,"actions",void 0),g([S()],lr.prototype,"content",void 0),g([xt("content")],lr.prototype,"castContent",null),g([Se("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],lr.prototype,"readContent",null),g([Ae("content",{popupElements:{type:ze.ofType($ee)},showAttachments:{type:Boolean},mediaInfos:{type:ze.ofType(KD)},description:{type:String},relatedRecordsInfo:{type:Iee}})],lr.prototype,"writeContent",null),g([S({type:[ZD],json:{write:!0}})],lr.prototype,"expressionInfos",void 0),g([S({type:[Tm]})],lr.prototype,"fieldInfos",void 0),g([Ae("fieldInfos")],lr.prototype,"writeFieldInfos",null),g([S({type:Tee})],lr.prototype,"layerOptions",void 0),g([Ae("layerOptions")],lr.prototype,"writeLayerOptions",null),g([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],lr.prototype,"lastEditInfoEnabled",void 0),g([S()],lr.prototype,"outFields",void 0),g([S()],lr.prototype,"overwriteActions",void 0),g([S()],lr.prototype,"returnGeometry",void 0),g([S({json:{type:String}})],lr.prototype,"title",void 0),g([Ae("title")],lr.prototype,"writeTitle",null),lr=g([J("esri.PopupTemplate")],lr);const rf=lr,BI=new _t({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Oee=0,hp=class extends ve{constructor(e){super(e),this.id="sym"+Oee++,this.type=null,this.color=new Ne([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};g([S({type:BI.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:BI.write}}})],hp.prototype,"type",void 0),g([S({type:Ne,json:{write:{allowNull:!0}}})],hp.prototype,"color",void 0),g([Se("color")],hp.prototype,"readColor",null),hp=g([J("esri.symbols.Symbol")],hp);const Ns=hp;var A9;let yu=A9=class extends Ns{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(l=>{const d=l.valueExpressionInfo;return _s(t,e,d.expression)});await Promise.all(n)}}}clone(){return new A9({data:ae(this.data)})}hash(){return lM(JSON.stringify(this.data)).toString()}};g([S({json:{write:!1}})],yu.prototype,"color",void 0),g([S({json:{write:!0}})],yu.prototype,"data",void 0),g([Se("data",["symbol"])],yu.prototype,"readData",null),g([Ae("data",{})],yu.prototype,"writeData",null),g([Ue({CIMSymbolReference:"cim"},{readOnly:!0})],yu.prototype,"type",void 0),yu=A9=g([J("esri.symbols.CIMSymbol")],yu);const Im=yu;let cp=class extends ve{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};g([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],cp.prototype,"enabled",void 0),g([Ae("enabled")],cp.prototype,"writeEnabled",null),g([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],cp.prototype,"type",void 0),cp=g([J("esri.symbols.Symbol3DLayer")],cp);const za=cp,Lee=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Dee="screenUtils.toPt: input not recognized!",XD=96;function Rr(t){return t?t/72*XD:0}function Da(t){return t?72*t/XD:0}function kt(t){if(typeof t=="string"){const e=t.match(Lee);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",l=r==="px"?Da(i):i;return n?-l:l}return console.warn(Dee),null}return t}function bs(t=0,e=0){return{x:t,y:e}}function Mxe(t=0,e=0){return[t,e]}function Ree(t,e){const i=e.transparency!=null?Wy(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ne([r[0]||0,r[1]||0,r[2]||0,i]):null}function jee(t,e){e.color=t.toJSON().slice(0,3);const i=H2(t.a);i!==0&&(e.transparency=i)}const Dh={type:Ne,json:{type:[Ct],default:null,read:{source:["color","transparency"],reader:Ree},write:{target:{color:{type:[Ct]},transparency:{type:Ct}},writer:jee}}},Ra={type:Number,cast:kt,json:{write:!0}};let lc=class extends ve{constructor(e){super(e),this.color=new Ne([0,0,0,1]),this.extensionLength=0,this.size=Da(1)}clone(){}cloneProperties(){return{color:ae(this.color),size:this.size,extensionLength:this.extensionLength}}};g([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lc.prototype,"type",void 0),g([S(Dh)],lc.prototype,"color",void 0),g([S({...Ra,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],lc.prototype,"extensionLength",void 0),g([S(Ra)],lc.prototype,"size",void 0),lc=g([J("esri.symbols.edges.Edges3D")],lc);const v7=lc;var k9;let Fv=k9=class extends v7{constructor(t){super(t),this.type="sketch"}clone(){return new k9(this.cloneProperties())}};g([Ue({sketch:"sketch"},{readOnly:!0})],Fv.prototype,"type",void 0),Fv=k9=g([J("esri.symbols.edges.SketchEdges3D")],Fv);const Fee=Fv;var P9;let Nv=P9=class extends v7{constructor(t){super(t),this.type="solid"}clone(){return new P9(this.cloneProperties())}};g([Ue({solid:"solid"},{readOnly:!0})],Nv.prototype,"type",void 0),Nv=P9=g([J("esri.symbols.support.SolidEdges3D")],Nv);const Nee=Nv,QD={types:{key:"type",base:v7,typeMap:{solid:Nee,sketch:Fee}},json:{write:!0}};var C9;let hn=C9=class extends ve{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new C9(t)}};g([S(Dh)],hn.prototype,"color",void 0),hn=C9=g([J("esri.symbols.support.Symbol3DMaterial")],hn);var O9;let mu=O9=class extends za{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new O9({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};g([Ue({Extrude:"extrude"},{readOnly:!0})],mu.prototype,"type",void 0),g([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],mu.prototype,"size",void 0),g([S({type:hn,json:{write:!0}})],mu.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mu.prototype,"castShadows",void 0),g([S(QD)],mu.prototype,"edges",void 0),mu=O9=g([J("esri.symbols.ExtrudeSymbol3DLayer")],mu);const eR=mu;let a1=class extends Ns{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};g([Ue({esriSLS:"simple-line"},{readOnly:!0})],a1.prototype,"type",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],a1.prototype,"width",void 0),a1=g([J("esri.symbols.LineSymbol")],a1);const zee=a1,Vee=["begin","end","begin-end"],tR=["arrow","circle","square","diamond","cross","x"];var L9;let ha=L9=class extends ve{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new L9({color:ae(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};g([S({type:["begin","end","begin-end"],json:{write:!0}})],ha.prototype,"placement",void 0),g([Ue({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],ha.prototype,"type",void 0),g([S({type:tR})],ha.prototype,"style",void 0),g([Ae("style")],ha.prototype,"writeStyle",null),g([S({type:Ne,value:null,json:{write:{allowNull:!0}}})],ha.prototype,"color",null),g([Se("color")],ha.prototype,"readColor",null),g([Ae("color")],ha.prototype,"writeColor",null),ha=L9=g([J("esri.symbols.LineSymbolMarker")],ha);const Bee=ha;var D9;const I3=new _t({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let el=D9=class extends zee{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,l){if(t&&typeof t!="string")return t;const d={};return t!=null&&(d.style=t),e!=null&&(d.color=e),i!=null&&(d.width=kt(i)),r!=null&&(d.cap=r),n!=null&&(d.join=n),l!=null&&(d.miterLimit=kt(l)),d}clone(){var t;return new D9({color:ae(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};g([Ue({esriSLS:"simple-line"},{readOnly:!0})],el.prototype,"type",void 0),g([S({type:I3.apiValues,json:{read:I3.read,write:I3.write}})],el.prototype,"style",void 0),g([S({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],el.prototype,"cap",void 0),g([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],el.prototype,"join",void 0),g([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Bee}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],el.prototype,"marker",void 0),g([S({type:Number,json:{read:!1,write:!1}})],el.prototype,"miterLimit",void 0),el=D9=g([J("esri.symbols.SimpleLineSymbol")],el);const cn=el;let l1=class extends Ns{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};g([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":cn}},json:{default:null,write:!0}})],l1.prototype,"outline",void 0),g([S({type:["simple-fill","picture-fill"],readOnly:!0})],l1.prototype,"type",void 0),l1=g([J("esri.symbols.FillSymbol")],l1);const iR=l1;let zv=class extends ve{constructor(e){super(e)}clone(){}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],zv.prototype,"type",void 0),zv=g([J("esri.symbols.patterns.LinePattern3D")],zv);const rR=zv,Gee=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var R9;const Uee=rs()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let u1=R9=class extends rR{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new R9(t)}};g([S({type:["style"]})],u1.prototype,"type",void 0),g([Ue(Uee),S({type:Gee})],u1.prototype,"style",void 0),u1=R9=g([J("esri.symbols.patterns.LineStylePattern3D")],u1);const b7=u1;let Vv=class extends ve{constructor(e){super(e)}clone(){}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Vv.prototype,"type",void 0),Vv=g([J("esri.symbols.patterns.Pattern3D")],Vv);const sR=Vv,qee=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var j9;let h1=j9=class extends sR{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new j9(t)}};g([S({type:["style"]})],h1.prototype,"type",void 0),g([S({type:qee,json:{read:!0,write:!0}})],h1.prototype,"style",void 0),h1=j9=g([J("esri.symbols.patterns.StylePattern3D")],h1);const nR=h1,Hee={types:{key:"type",base:sR,typeMap:{style:nR}},json:{write:!0}},oR={types:{key:"type",base:rR,typeMap:{style:b7}},json:{write:!0}},uy=new Ne("white");new Ne("black");const Wee=new Ne([255,255,255,0]);function Jee(t){return t.r===0&&t.g===0&&t.b===0}var F9;let hy=F9=class extends hn{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new F9(t)}};g([Ue({multiply:"multiply",replace:"replace",tint:"tint"})],hy.prototype,"colorMixMode",void 0),hy=F9=g([J("esri.symbols.support.Symbol3DFillMaterial")],hy);function w7(t=ete){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function _7(t,e,i,r,n,l,d=w7()){return d[0]=t,d[1]=e,d[2]=i,d[3]=r,d[4]=n,d[5]=l,d}function kxe(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Nt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Pxe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Cxe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function Yee(t){return t[0]>=t[3]?0:t[3]-t[0]}function Kee(t){return t[1]>=t[4]?0:t[4]-t[1]}function Zee(t){return t[2]>=t[5]?0:t[5]-t[2]}function Oxe(t,e=[0,0,0]){return e[0]=Yee(t),e[1]=Kee(t),e[2]=Zee(t),e}function Lxe(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function Dxe(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Xee(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Rxe(t){return t?Xee(t,GI):w7(GI)}function jxe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function Qee(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function N9(t){return t.length===6}function Fxe(t,e,i){if(t==null||e==null)return t===e;if(!N9(t)||!N9(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const GI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],ete=[0,0,0,0,0,0];w7();const tte=_7(-.5,-.5,-.5,.5,.5,.5),ite=_7(-.5,-.5,0,.5,.5,1),rte=_7(-.5,-.5,0,.5,.5,.5);function Nxe(t){switch(t){case"sphere":case"cube":case"diamond":return tte;case"cylinder":case"cone":case"inverted-cone":return ite;case"tetrahedron":return rte;default:return}}const x7=["butt","square","round"],ste=[...x7,"none"],aR=["miter","bevel","round"];var z9;let uc=z9=class extends ve{constructor(t){super(t),this.color=new Ne([0,0,0,1]),this.size=Da(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new z9(t)}};g([S(Dh)],uc.prototype,"color",void 0),g([S(Ra)],uc.prototype,"size",void 0),g([S(oR)],uc.prototype,"pattern",void 0),g([S({type:x7,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],uc.prototype,"patternCap",void 0),uc=z9=g([J("esri.symbols.support.Symbol3DOutline")],uc);var Bv;let tl=Bv=class extends za{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Bv(t)}static fromSimpleFillSymbol(t){var r,n,l;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new b7({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((n=t.outline)==null?void 0:n.color)??uy).clone(),pattern:e};return e&&((l=t.outline)!=null&&l.cap)&&(i.patternCap=t.outline.cap),new Bv({material:new hy({color:(t.color??Wee).clone()}),pattern:t.style&&t.style!=="solid"?new nR({style:t.style}):null,outline:i})}};g([Ue({Fill:"fill"},{readOnly:!0})],tl.prototype,"type",void 0),g([S({type:hy,json:{write:!0}})],tl.prototype,"material",void 0),g([S(Hee)],tl.prototype,"pattern",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],tl.prototype,"castShadows",void 0),g([S({type:uc,json:{write:!0}})],tl.prototype,"outline",void 0),g([S(QD)],tl.prototype,"edges",void 0),tl=Bv=g([J("esri.symbols.FillSymbol3DLayer")],tl);const Em=tl,nte=["none","underline","line-through"],ote=["normal","italic","oblique"],ate=["normal","lighter","bold","bolder"],lR={type:Number,cast:t=>{const e=Ln(t);return e===0?1:Ds(e,.1,4)},nonNullable:!0},lte=["left","right","center"],ute=["baseline","top","middle","bottom"],uR={type:lte,nonNullable:!0},hR={type:ute,nonNullable:!0},zxe=8;var V9;let il=V9=class extends ve{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return kt(t)}clone(){return new V9({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};g([S({type:nte,json:{default:"none",write:!0}})],il.prototype,"decoration",void 0),g([S({type:String,json:{write:!0}})],il.prototype,"family",void 0),g([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],il.prototype,"size",void 0),g([xt("size")],il.prototype,"castSize",null),g([S({type:ote,json:{default:"normal",write:!0}})],il.prototype,"style",void 0),g([S({type:ate,json:{default:"normal",write:!0}})],il.prototype,"weight",void 0),il=V9=g([J("esri.symbols.Font")],il);const i_=il;function _h(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=Rn(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=$M(t,e.portalItem.itemUrl);r!=null&&hte.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return B9(t,e&&e.portal)}function Am(t,e,i=Xy.YES){if(t==null)return t;!an(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Rn(t);if(e){const n=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(n){const l=B9(n,e.portal),d=B9(r,e.portal);r=$M(d,l,l),r!=null&&r!==d&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=dR(r,e==null?void 0:e.portal),an(r)&&(r=Ro(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!an(r)&&!Cd(r)&&i===Xy.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function r_(t,e,i){return _h(t,i)}function xh(t,e,i,r){const n=Am(t,r);n!==void 0&&(e[i]=n)}const cR=/\/items\/([^\/]+)\/resources\/(.*)/,hte=/^\.\/resources\//;function cte(t){const e=(t==null?void 0:t.match(cR))??null;return(e==null?void 0:e[1])??null}function dte(t){const e=(t==null?void 0:t.match(cR))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:d,extension:y}=FT(i);return{prefix:null,filename:d,extension:y}}const{path:n,extension:l}=FT(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:l}}function dR(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Cx(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function B9(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=_M();return I0(r,`${r.scheme}://${i}`)?Cx(t,e.portalHostname,i):Cx(t,i,e.portalHostname)}var Xy;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(Xy||(Xy={}));const Vxe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Xy},ensureMainOnlineDomain:dR,fromJSON:_h,itemIdFromResourceUrl:cte,prefixAndFilenameFromResourceUrl:dte,read:r_,toJSON:Am,write:xh},Symbol.toStringTag,{value:"Module"}));var G9;const pte=rs()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let hc=G9=class extends ve{constructor(t){super(t)}readHref(t,e,i){return t?_h(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Cd(t)?e.dataURI=t:(e.href=Am(t,r),an(e.href)&&(e.href=Ro(e.href))))}clone(){return new G9({href:this.href,primitive:this.primitive})}};g([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],hc.prototype,"href",void 0),g([Se("href")],hc.prototype,"readHref",null),g([Ae("href",{href:{type:String},dataURI:{type:String}})],hc.prototype,"writeHref",null),g([Ue(pte)],hc.prototype,"primitive",void 0),hc=G9=g([J("esri.symbols.support.IconSymbol3DLayerResource")],hc);const fte="circle";var U9;let Kp=U9=class extends Be{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new U9({x:this.x,y:this.y})}};g([S({type:Number})],Kp.prototype,"x",void 0),g([S({type:Number})],Kp.prototype,"y",void 0),Kp=U9=g([J("esri.symbols.support.Symbol3DAnchorPosition2D")],Kp);var q9;let c1=q9=class extends ve{constructor(t){super(t),this.color=new Ne([0,0,0,1]),this.size=Da(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new q9(t)}};g([S(Dh)],c1.prototype,"color",void 0),g([S(Ra)],c1.prototype,"size",void 0),c1=q9=g([J("esri.symbols.support.Symbol3DIconOutline")],c1);var dp;const pR="esri.symbols.IconSymbol3DLayer";let ca=dp=class extends za{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new dp({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||uy,i=UI(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||uy).clone()}:null;return new dp({size:t.size,resource:{primitive:mte(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||Jee(t.color)?uy:t.color,i=UI(t);return new dp({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new dp({resource:{href:tO({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function UI(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=qI(t.xoffset),n=qI(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function qI(t){return isFinite(t)?t:0}g([S({type:hn,json:{write:!0}})],ca.prototype,"material",void 0),g([S({type:hc,json:{write:!0}})],ca.prototype,"resource",void 0),g([Ue({Icon:"icon"},{readOnly:!0})],ca.prototype,"type",void 0),g([S(Ra)],ca.prototype,"size",void 0),g([Ue({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],ca.prototype,"anchor",void 0),g([S({type:Kp,json:{type:[Number],read:{reader:t=>new Kp({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ca.prototype,"anchorPosition",void 0),g([S({type:c1,json:{write:!0}})],ca.prototype,"outline",void 0),ca=dp=g([J(pR)],ca);const yte={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function mte(t){return yte[t]||(ge.getLogger(pR).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Kc=ca;let cc=class extends ti(ve){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],cc.prototype,"type",void 0),g([S({type:Vee,json:{default:"begin-end",write:!0}})],cc.prototype,"placement",void 0),g([S({type:tR,json:{default:"arrow",write:!0}})],cc.prototype,"style",void 0),g([S({type:Ne,json:{type:[Ct],default:null,write:!0}})],cc.prototype,"color",void 0),cc=g([J("esri.symbols.LineStyleMarker3D")],cc);const H9=cc;var Gv;let da=Gv=class extends za{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Da(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Gv(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Da(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new b7({style:t.style}):null,material:new hn({color:(t.color||uy).clone()}),marker:t.marker?new H9({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new Gv(e)}};g([S({type:hn,json:{write:!0}})],da.prototype,"material",void 0),g([Ue({Line:"line"},{readOnly:!0})],da.prototype,"type",void 0),g([S({type:aR,json:{write:!0,default:"miter"}})],da.prototype,"join",void 0),g([S({type:x7,json:{write:!0,default:"butt"}})],da.prototype,"cap",void 0),g([S(Ra)],da.prototype,"size",void 0),g([S(oR)],da.prototype,"pattern",void 0),g([S({types:{key:"type",base:H9,typeMap:{style:H9}},json:{write:!0}})],da.prototype,"marker",void 0),da=Gv=g([J("esri.symbols.LineSymbol3DLayer")],da);const km=da;var W9;const gte=rs()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let d1=W9=class extends ve{clone(){return new W9({href:this.href,primitive:this.primitive})}};g([S({type:String,json:{read:r_,write:xh}})],d1.prototype,"href",void 0),g([Ue(gte)],d1.prototype,"primitive",void 0),d1=W9=g([J("esri.symbols.support.ObjectSymbol3DLayerResource")],d1);const vte="sphere";var J9;let Vc=J9=class extends Be{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new J9({x:this.x,y:this.y,z:this.z})}};g([S({type:Number})],Vc.prototype,"x",void 0),g([S({type:Number})],Vc.prototype,"y",void 0),g([S({type:Number})],Vc.prototype,"z",void 0),Vc=J9=g([J("esri.symbols.support.Symbol3DAnchorPosition3D")],Vc);var Y9;let Hr=Y9=class extends za{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Y9({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};g([S({type:hn,json:{write:!0}})],Hr.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hr.prototype,"castShadows",void 0),g([S({type:d1,json:{write:!0}})],Hr.prototype,"resource",void 0),g([Ue({Object:"object"},{readOnly:!0})],Hr.prototype,"type",void 0),g([S({type:Number,json:{write:!0}})],Hr.prototype,"width",void 0),g([S({type:Number,json:{write:!0}})],Hr.prototype,"height",void 0),g([S({type:Number,json:{write:!0}})],Hr.prototype,"depth",void 0),g([Ue({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],Hr.prototype,"anchor",void 0),g([S({type:Vc,json:{type:[Number],read:{reader:t=>new Vc({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Hr.prototype,"anchorPosition",void 0),g([S({type:Number,json:{write:!0}})],Hr.prototype,"heading",void 0),g([S({type:Number,json:{write:!0}})],Hr.prototype,"tilt",void 0),g([S({type:Number,json:{write:!0}})],Hr.prototype,"roll",void 0),g([S({readOnly:!0})],Hr.prototype,"isPrimitive",null),Hr=Y9=g([J("esri.symbols.ObjectSymbol3DLayer")],Hr);const S7=Hr;var K9;let ls=K9=class extends za{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new K9({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};g([S({type:hn,json:{write:!0}})],ls.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ls.prototype,"castShadows",void 0),g([Ue({Path:"path"},{readOnly:!0})],ls.prototype,"type",void 0),g([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],ls.prototype,"profile",void 0),g([S({type:aR,json:{write:!0,default:"miter"}})],ls.prototype,"join",void 0),g([S({type:ste,json:{write:!0,default:"butt"}})],ls.prototype,"cap",void 0),g([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ls.prototype,"width",void 0),g([Se("width",["width","size","height"])],ls.prototype,"readWidth",null),g([S({type:Number,json:{write:!0}})],ls.prototype,"height",void 0),g([Se("height",["height","size","width"])],ls.prototype,"readHeight",null),g([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ls.prototype,"anchor",void 0),g([S({type:["heading","all"],json:{write:!0,default:"all"}})],ls.prototype,"profileRotation",void 0),ls=K9=g([J("esri.symbols.PathSymbol3DLayer")],ls);const M7=ls;var Z9;let Zp=Z9=class extends ve{constructor(){super(...arguments),this.color=new Ne([0,0,0,1]),this.size=0}clone(){const t={color:ae(this.color),size:this.size};return new Z9(t)}};g([S(Dh)],Zp.prototype,"color",void 0),g([S(Ra)],Zp.prototype,"size",void 0),Zp=Z9=g([J("esri.symbols.support.Symbol3DHalo")],Zp);let cy=class extends ti(ve){constructor(e){super(e),this.color=null}};g([S(Dh)],cy.prototype,"color",void 0),cy=g([J("esri.symbols.support.Symbol3DTextBackground")],cy);var Uv;let Ts=Uv=class extends za{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const n={...r,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new Uv({enabled:this.enabled,font:this.font&&ae(this.font),halo:this.halo&&ae(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ae(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new Uv({font:t.font!=null?t.font.clone():new i_,halo:bte(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new hn({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new cy({color:t.backgroundColor.clone()}):null})}};function bte(t,e){return t&&e!=null&&e>0?new Zp({color:ae(t),size:e}):null}g([S({type:i_,json:{write:!0}})],Ts.prototype,"font",null),g([Ae("font")],Ts.prototype,"writeFont",null),g([S({type:Zp,json:{write:!0}})],Ts.prototype,"halo",void 0),g([S({...uR,json:{default:"center",write:!0}})],Ts.prototype,"horizontalAlignment",void 0),g([S({...lR,json:{default:1,write:!0}})],Ts.prototype,"lineHeight",void 0),g([S({type:hn,json:{write:!0}})],Ts.prototype,"material",void 0),g([S({type:cy,json:{write:!0}})],Ts.prototype,"background",void 0),g([S(Ra)],Ts.prototype,"size",null),g([S({type:String,json:{write:!0}})],Ts.prototype,"text",void 0),g([Ue({Text:"text"},{readOnly:!0})],Ts.prototype,"type",void 0),g([S({...hR,json:{default:"baseline",write:!0}})],Ts.prototype,"verticalAlignment",void 0),Ts=Uv=g([J("esri.symbols.TextSymbol3DLayer")],Ts);const sf=Ts;var X9;let gu=X9=class extends za{constructor(t){super(t),this.color=Q9.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new X9({color:ae(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};g([S({type:Ne,nonNullable:!0,json:{type:[Ct],write:(t,e,i)=>e[i]=t.toArray(Ne.AlphaMode.UNLESS_OPAQUE),default:()=>Q9.clone(),defaultEquals:t=>t.toCss(!0)===Q9.toCss(!0)}})],gu.prototype,"color",void 0),g([Ue({Water:"water"},{readOnly:!0})],gu.prototype,"type",void 0),g([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],gu.prototype,"waterbodySize",void 0),g([S({type:Number,json:{write:!0,default:null}})],gu.prototype,"waveDirection",void 0),g([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],gu.prototype,"waveStrength",void 0),gu=X9=g([J("esri.symbols.WaterSymbol3DLayer")],gu);const Q9=new Ne([0,119,190]),fR=gu;var e4;let dc=e4=class extends Be{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new e4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};g([S({type:String})],dc.prototype,"name",void 0),g([S({type:String})],dc.prototype,"styleUrl",void 0),g([S({type:String})],dc.prototype,"styleName",void 0),g([S({type:ts})],dc.prototype,"portal",void 0),dc=e4=g([J("esri.symbols.support.StyleOrigin")],dc);const Qy=dc;var t4;let ud=t4=class extends Be{constructor(){super(...arguments),this.url=""}clone(){return new t4({url:this.url})}};g([S({type:String})],ud.prototype,"url",void 0),ud=t4=g([J("esri.symbols.support.Thumbnail")],ud);const yR={icon:Kc,object:S7,line:km,path:M7,fill:Em,extrude:eR,text:sf,water:fR},wte=ze.ofType({base:za,key:"type",typeMap:yR,errorContext:"symbol-layer"});let pa=class extends Ns{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||ze;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&ge.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){vd(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=_h(e.styleUrl,r);return new Qy({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new Qy({portal:r&&r.portal||ts.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new Un("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let l=Am(e.styleUrl,n);an(l)&&(l=Ro(l)),i.styleOrigin={styleUrl:l,name:e.name}}else e.styleName&&e.name&&(e.portal&&n&&n.portal&&!QC(e.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new Un("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof za||e&&yR[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};g([S({json:{read:!1,write:!1}})],pa.prototype,"color",null),g([S({type:wte,nonNullable:!0,json:{write:!0}}),xt(BC)],pa.prototype,"symbolLayers",null),g([S({type:Qy})],pa.prototype,"styleOrigin",void 0),g([Se("styleOrigin")],pa.prototype,"readStyleOrigin",null),g([Ae("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],pa.prototype,"writeStyleOrigin",null),g([S({type:ud,json:{read:!1}})],pa.prototype,"thumbnail",void 0),g([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],pa.prototype,"type",void 0),pa=g([J("esri.symbols.Symbol3D")],pa);const nf=pa;let p1=class extends ve{constructor(e){super(e),this.visible=!0}clone(){}};g([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],p1.prototype,"type",void 0),g([S({readOnly:!0})],p1.prototype,"visible",void 0),p1=g([J("esri.symbols.callouts.Callout3D")],p1);const mR=p1;var i4;let qv=i4=class extends ve{constructor(){super(...arguments),this.color=new Ne("white")}clone(){return new i4({color:ae(this.color)})}};g([S(Dh)],qv.prototype,"color",void 0),qv=i4=g([J("esri.symbols.callouts.LineCallout3DBorder")],qv);const gR=qv;Object.freeze(Object.defineProperty({__proto__:null,default:gR},Symbol.toStringTag,{value:"Module"}));var r4;let vu=r4=class extends mR{constructor(t){super(t),this.type="line",this.color=new Ne([0,0,0,1]),this.size=Da(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new r4({color:ae(this.color),size:this.size,border:ae(this.border)})}};g([Ue({line:"line"},{readOnly:!0})],vu.prototype,"type",void 0),g([S(Dh)],vu.prototype,"color",void 0),g([S(Ra)],vu.prototype,"size",void 0),g([S({type:gR,json:{write:!0}})],vu.prototype,"border",void 0),g([S({readOnly:!0})],vu.prototype,"visible",null),vu=r4=g([J("esri.symbols.callouts.LineCallout3D")],vu);const _te=vu;function $7(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function vR(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!$7(t)}const bR={types:{key:"type",base:mR,typeMap:{line:_te}},json:{write:!0}};var s4;let pp=s4=class extends ve{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new s4({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};g([S(Ra)],pp.prototype,"screenLength",void 0),g([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],pp.prototype,"minWorldLength",void 0),g([S({type:Number,json:{write:!0}})],pp.prototype,"maxWorldLength",void 0),pp=s4=g([J("esri.symbols.support.Symbol3DVerticalOffset")],pp);const wR=pp;var Hv;const _R=ze.ofType({base:null,key:"type",typeMap:{text:sf}});let bu=Hv=class extends nf{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new _R,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return vR(this)}hasVisibleVerticalOffset(){return $7(this)}clone(){return new Hv({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail),callout:ae(this.callout),verticalOffset:ae(this.verticalOffset)})}static fromTextSymbol(t){return new Hv({symbolLayers:[sf.fromTextSymbol(t)]})}};g([S({type:wR,json:{write:!0}})],bu.prototype,"verticalOffset",void 0),g([S(bR)],bu.prototype,"callout",void 0),g([S({json:{read:!1,write:!1}})],bu.prototype,"styleOrigin",void 0),g([S({type:_R})],bu.prototype,"symbolLayers",void 0),g([Ue({LabelSymbol3D:"label-3d"},{readOnly:!0})],bu.prototype,"type",void 0),bu=Hv=g([J("esri.symbols.LabelSymbol3D")],bu);const s_=bu;var Wv;const xR=ze.ofType({base:null,key:"type",typeMap:{line:km,path:M7}}),xte=ze.ofType({base:null,key:"type",typeMap:{line:km,path:M7}});let f1=Wv=class extends nf{constructor(t){super(t),this.symbolLayers=new xR,this.type="line-3d"}clone(){return new Wv({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Wv({symbolLayers:[km.fromSimpleLineSymbol(t)]})}};g([S({type:xR,json:{type:xte}})],f1.prototype,"symbolLayers",void 0),g([Ue({LineSymbol3D:"line-3d"},{readOnly:!0})],f1.prototype,"type",void 0),f1=Wv=g([J("esri.symbols.LineSymbol3D")],f1);const n_=f1;let wu=class extends Ns{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};g([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],wu.prototype,"angle",void 0),g([S({type:["simple-marker","picture-marker"],readOnly:!0})],wu.prototype,"type",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],wu.prototype,"xoffset",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],wu.prototype,"yoffset",void 0),g([S({type:Number,cast:t=>t==="auto"?t:kt(t),json:{write:!0}})],wu.prototype,"size",void 0),wu=g([J("esri.symbols.MarkerSymbol")],wu);const SR=wu;var Jv;const MR=ze.ofType({base:null,key:"type",typeMap:{fill:Em}});let y1=Jv=class extends nf{constructor(t){super(t),this.symbolLayers=new MR,this.type="mesh-3d"}clone(){return new Jv({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleFillSymbol(t){return new Jv({symbolLayers:[Em.fromSimpleFillSymbol(t)]})}};g([S({type:MR})],y1.prototype,"symbolLayers",void 0),g([Ue({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],y1.prototype,"type",void 0),y1=Jv=g([J("esri.symbols.MeshSymbol3D")],y1);const o_=y1;function Ste(t,e,i){return e.imageData?tO({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):$R(e.url,i)}function $R(t,e){var i;return $te(e)&&!an(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Ll(e.layer.parsedUrl.path,"images",t):_h(t,e)}function Mte(t,e,i,r){if(Cd(t)){const n=Uy(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&xh(i.url,e,"url",r)}else xh(t,e,"url",r)}const TR={json:{read:{source:["imageData","url"],reader:Ste},write:{writer(t,e,i,r){Mte(t,e,this.source,r)}}}},IR={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=$R(e.url,i)),r}}}};function $te(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var n4;let Mn=n4=class extends iR{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=kt(i)),r!=null&&(n.height=kt(r)),n}clone(){const t=new n4({color:ae(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",ae(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};g([Ue({esriPFS:"picture-fill"},{readOnly:!0})],Mn.prototype,"type",void 0),g([S(TR)],Mn.prototype,"url",void 0),g([S({type:Number,json:{write:!0}})],Mn.prototype,"xscale",void 0),g([S({type:Number,json:{write:!0}})],Mn.prototype,"yscale",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Mn.prototype,"width",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Mn.prototype,"height",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Mn.prototype,"xoffset",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Mn.prototype,"yoffset",void 0),g([S(IR)],Mn.prototype,"source",void 0),Mn=n4=g([J("esri.symbols.PictureFillSymbol")],Mn);const ER=Mn;var o4;let co=o4=class extends SR{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=kt(e)),i!=null&&(r.height=kt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new o4({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",ae(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};g([S({json:{write:!1}})],co.prototype,"color",void 0),g([Ue({esriPMS:"picture-marker"},{readOnly:!0})],co.prototype,"type",void 0),g([S(TR)],co.prototype,"url",void 0),g([S(IR)],co.prototype,"source",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],co.prototype,"height",void 0),g([Se("height",["height","size"])],co.prototype,"readHeight",null),g([S({type:Number,cast:kt,json:{write:!0}})],co.prototype,"width",void 0),g([S({json:{write:!1}})],co.prototype,"size",void 0),co=o4=g([J("esri.symbols.PictureMarkerSymbol")],co);const a_=co;var pc;const AR=ze.ofType({base:null,key:"type",typeMap:{icon:Kc,object:S7,text:sf}});let fc=pc=class extends nf{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new AR,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return vR(this)}hasVisibleVerticalOffset(){return $7(this)}clone(){return new pc({verticalOffset:ae(this.verticalOffset),callout:ae(this.callout),styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new pc({symbolLayers:[Kc.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new pc({symbolLayers:[Kc.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new pc(i!=null&&i.callout?{symbolLayers:[Kc.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Kc.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new pc({symbolLayers:[sf.fromTextSymbol(t)]})}};g([S({type:wR,json:{write:!0}})],fc.prototype,"verticalOffset",void 0),g([S(bR)],fc.prototype,"callout",void 0),g([S({type:AR,json:{origins:{"web-scene":{write:!0}}}})],fc.prototype,"symbolLayers",void 0),g([Ue({PointSymbol3D:"point-3d"},{readOnly:!0})],fc.prototype,"type",void 0),fc=pc=g([J("esri.symbols.PointSymbol3D")],fc);const Zc=fc;var m1;const kR=ze.ofType({base:null,key:"type",typeMap:{extrude:eR,fill:Em,icon:Kc,line:km,object:S7,text:sf,water:fR}});let g1=m1=class extends nf{constructor(t){super(t),this.symbolLayers=new kR,this.type="polygon-3d"}clone(){return new m1({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromJSON(t){const e=new m1;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new m1({symbolLayers:[Em.fromSimpleFillSymbol(t)]})}};g([S({type:kR,json:{write:!0}})],g1.prototype,"symbolLayers",void 0),g([Ue({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],g1.prototype,"type",void 0),g1=m1=g([J("esri.symbols.PolygonSymbol3D")],g1);const Pm=g1;var a4;const E3=new _t({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let yc=a4=class extends iR{constructor(...t){super(...t),this.color=new Ne([0,0,0,.25]),this.outline=new cn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new a4({color:ae(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};g([S()],yc.prototype,"color",void 0),g([S()],yc.prototype,"outline",void 0),g([Ue({esriSFS:"simple-fill"},{readOnly:!0})],yc.prototype,"type",void 0),g([S({type:E3.apiValues,json:{read:E3.read,write:E3.write}})],yc.prototype,"style",void 0),yc=a4=g([J("esri.symbols.SimpleFillSymbol")],yc);const Rh=yc;var l4;const A3=new _t({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let fa=l4=class extends SR{constructor(...t){super(...t),this.color=new Ne([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new cn}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=kt(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new l4({angle:this.angle,color:ae(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};g([S()],fa.prototype,"color",void 0),g([Ae("color")],fa.prototype,"writeColor",null),g([Ue({esriSMS:"simple-marker"},{readOnly:!0})],fa.prototype,"type",void 0),g([S()],fa.prototype,"size",void 0),g([S({type:A3.apiValues,json:{read:A3.read,write:A3.write}})],fa.prototype,"style",void 0),g([S({type:String,json:{write:!0}})],fa.prototype,"path",null),g([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":cn}},json:{default:null,write:!0}})],fa.prototype,"outline",void 0),fa=l4=g([J("esri.symbols.SimpleMarkerSymbol")],fa);const jh=fa;var u4;let fi=u4=class extends Ns{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new i_,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return kt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new u4({angle:this.angle,backgroundColor:ae(this.backgroundColor),borderLineColor:ae(this.borderLineColor),borderLineSize:this.borderLineSize,color:ae(this.color),font:this.font&&this.font.clone(),haloColor:ae(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};g([S({type:Ne,json:{write:!0}})],fi.prototype,"backgroundColor",void 0),g([S({type:Ne,json:{write:!0}})],fi.prototype,"borderLineColor",void 0),g([S({type:Number,json:{write:!0},cast:kt})],fi.prototype,"borderLineSize",void 0),g([S({type:i_,json:{write:!0}})],fi.prototype,"font",void 0),g([S({...uR,json:{write:!0}})],fi.prototype,"horizontalAlignment",void 0),g([S({type:Boolean,json:{write:!0}})],fi.prototype,"kerning",void 0),g([S({type:Ne,json:{write:!0}})],fi.prototype,"haloColor",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],fi.prototype,"haloSize",void 0),g([S({type:Boolean,json:{write:!0}})],fi.prototype,"rightToLeft",void 0),g([S({type:Boolean,json:{write:!0}})],fi.prototype,"rotated",void 0),g([S({type:String,json:{write:!0}})],fi.prototype,"text",void 0),g([Ue({esriTS:"text"},{readOnly:!0})],fi.prototype,"type",void 0),g([S({...hR,json:{write:!0}})],fi.prototype,"verticalAlignment",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],fi.prototype,"xoffset",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],fi.prototype,"yoffset",void 0),g([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],fi.prototype,"angle",void 0),g([S({type:Number,json:{write:!0}})],fi.prototype,"width",void 0),g([S({type:Number})],fi.prototype,"lineWidth",void 0),g([Ae("lineWidth")],fi.prototype,"writeLineWidth",null),g([xt("lineWidth")],fi.prototype,"castLineWidth",null),g([S(lR)],fi.prototype,"lineHeight",void 0),g([Ae("lineHeight")],fi.prototype,"writeLineHeight",null),fi=u4=g([J("esri.symbols.TextSymbol")],fi);const of=fi;var h4;let po=h4=class extends Ns{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ts.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new h4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const y=r&&i.get(r);if(y)return y.clone()}const{resolveWebStyleSymbol:n}=await le(()=>Promise.resolve().then(()=>q2e),void 0);ai(e);const l=n(this,{portal:this.portal},t,e);l.catch(y=>{ge.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",y)});const d=await l;return t==="webRef"&&d.type==="point-3d"||t==="cimRef"&&d.type==="cim"?(i!=null&&i.set(r,d.clone()),d):null}};g([S({json:{write:!1}})],po.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],po.prototype,"styleName",void 0),g([S({type:ts,json:{write:!1}})],po.prototype,"portal",void 0),g([S({type:String,json:{read:r_,write:xh}})],po.prototype,"styleUrl",void 0),g([S({type:ud,json:{read:!1}})],po.prototype,"thumbnail",void 0),g([S({type:String,json:{write:!0}})],po.prototype,"name",void 0),g([Ue({styleSymbolReference:"web-style"},{readOnly:!0})],po.prototype,"type",void 0),g([S()],po.prototype,"_fetchCacheKey",null),po=h4=g([J("esri.symbols.WebStyleSymbol")],po);const Dd=po;function l_(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Fl(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const hd={base:Ns,key:"type",typeMap:{"simple-fill":Rh,"picture-fill":ER,"picture-marker":a_,"simple-line":cn,"simple-marker":jh,text:of,"label-3d":s_,"line-3d":n_,"mesh-3d":o_,"point-3d":Zc,"polygon-3d":Pm,"web-style":Dd,cim:Im},errorContext:"symbol"},Tte={base:Ns,key:"type",typeMap:{"picture-marker":a_,"simple-marker":jh,text:of,"web-style":Dd,cim:Im},errorContext:"symbol"},Ite=W0({types:hd}),PR={base:Ns,key:"type",typeMap:{"simple-fill":Rh,"picture-fill":ER,"picture-marker":a_,"simple-line":cn,"simple-marker":jh,text:of,"line-3d":n_,"mesh-3d":o_,"point-3d":Zc,"polygon-3d":Pm,"web-style":Dd,cim:Im},errorContext:"symbol"},Ete={base:Ns,key:"type",typeMap:{text:of,"label-3d":s_},errorContext:"symbol"},HI={base:Ns,key:"type",typeMap:{"line-3d":n_,"mesh-3d":o_,"point-3d":Zc,"polygon-3d":Pm,"web-style":Dd,cim:Im},errorContext:"symbol"},Ate={base:Ns,key:"type",typeMap:{"label-3d":s_},errorContext:"symbol"},CR=Ca(hd);var c4;function kte(t){if(!t)return null;const e={};for(const i in t){const r=bh(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function Pte(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let Is=c4=class extends ti(ve){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:ty(),configurable:!0})}normalizeCtorArgs(t,e,i,r){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:r}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new c4({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Pte(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=r),t==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};g([S({value:null,json:{read:kte}})],Is.prototype,"aggregateGeometries",null),g([S({value:null})],Is.prototype,"attributes",null),g([S({value:null,types:Od,json:{read:bh}})],Is.prototype,"geometry",null),g([S({type:Boolean})],Is.prototype,"isAggregate",void 0),g([S({clonable:"reference"})],Is.prototype,"layer",void 0),g([S({type:rf})],Is.prototype,"popupTemplate",void 0),g([S({clonable:"reference"})],Is.prototype,"sourceLayer",void 0),g([S({value:null,types:hd})],Is.prototype,"symbol",null),g([S({type:Boolean,value:!0})],Is.prototype,"visible",null),Is=c4=g([J("esri.Graphic")],Is),function(t){t.generateUID=ty}(Is||(Is={}));const xs=Is;let T7=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,n=0,l=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),l&&r===i&&(r=e),r+n}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return Ds(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function I7(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}I7(new T7(0,2*Math.PI));I7(new T7(-Math.PI,Math.PI));const Cte=I7(new T7(0,360));let rl=class extends ti(ve){constructor(...e){super(...e),this.position=new lt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const l={position:e};return i!=null&&(l.heading=i),r!=null&&(l.tilt=r),n!=null&&(l.fov=n),l}return e}writePosition(e,i,r,n){const l=e.clone();l.x=Ln(e.x||0),l.y=Ln(e.y||0),l.z=e.hasZ?Ln(e.z||0):e.z,i[r]=l.write({},n)}readPosition(e,i){const r=new lt;return r.read(e,i),r.x=Ln(r.x||0),r.y=Ln(r.y||0),r.z=r.hasZ?Ln(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};g([S({type:lt,json:{write:{isRequired:!0}}})],rl.prototype,"position",void 0),g([Ae("position")],rl.prototype,"writePosition",null),g([Se("position")],rl.prototype,"readPosition",null),g([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),xt(t=>Cte.normalize(Ln(t)))],rl.prototype,"heading",void 0),g([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),xt(t=>Ds(Ln(t),-180,180))],rl.prototype,"tilt",void 0),g([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],rl.prototype,"fov",void 0),rl=g([J("esri.Camera")],rl);const Ote=rl;var d4;let _u=d4=class extends ve{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new d4({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function k3(){return{enabled:!this.camera}}g([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:k3}}}}})],_u.prototype,"rotation",void 0),g([xt("rotation")],_u.prototype,"castRotation",null),g([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:k3}}}}})],_u.prototype,"scale",void 0),g([S({types:Od,json:{read:bh,write:!0,origins:{"web-scene":{read:bh,write:{overridePolicy:k3}}}}})],_u.prototype,"targetGeometry",void 0),g([S({type:Ote,json:{write:!0}})],_u.prototype,"camera",void 0),_u=d4=g([J("esri.Viewpoint")],_u);const ka=_u;function me(t,e,i={}){return E7(t,e,i,OR)}function Hn(t,e,i={}){return E7(t,e,i,LR)}function E7(t,e,i={},r){let n=null;const l=i.once?(d,y)=>{r(d)&&(Mi(n),e(d,y))}:(d,y)=>{r(d)&&e(d,y)};if(n=jq(t,l,i.sync,i.equals),i.initial){const d=t();l(d,d)}return n}function Rs(t,e,i,r={}){let n=null,l=null,d=null;function y(){var $;n&&l&&(l.remove(),($=r.onListenerRemove)==null||$.call(r,n),n=null,l=null)}function b($){r.once&&r.once&&Mi(d),i($)}const x=me(t,($,E)=>{var k;y(),E2($)&&(n=$,l=A2($,e,b),(k=r.onListenerAdd)==null||k.call(r,$))},{sync:r.sync,initial:!0});return d=Cl(()=>{x.remove(),y()}),d}function u_(t,e){return Lte(t,LR,e)}function Lte(t,e,i){if(Uo(i))return Promise.reject($i());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function l(){n=Mi(n)}return new Promise((d,y)=>{n=S2([zn(i,()=>{l(),y($i())}),E7(t,b=>{l(),d(b)},{sync:!1,once:!0},e??OR)])})}function OR(t){return!0}function LR(t){return!!t}const Rd={sync:!0},st={initial:!0},vl={sync:!0,initial:!0};let Tw=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new R2,this._items=new Set}get length(){return nt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return nt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){nt(this._observable),yield*this._items}};const Dte={statsWorker:()=>le(()=>import("./statsWorker-9b9f1752.js"),["assets/statsWorker-9b9f1752.js","assets/quantizationUtils-98deeb3c.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js"]),geometryEngineWorker:()=>le(()=>import("./geometryEngineWorker-ee679faa.js"),["assets/geometryEngineWorker-ee679faa.js","assets/geometryEngineJSON-434198e4.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>le(()=>import("./CSVSourceWorker-17472580.js"),["assets/CSVSourceWorker-17472580.js","assets/json-48e3ea08.js","assets/FeatureStore-c4ee01ca.js","assets/BoundsStore-c6f1d46a.js","assets/PooledRBush-39e682e0.js","assets/projectionSupport-aa664e25.js","assets/timeSupport-fa4d3fa1.js","assets/QueryEngine-44383df7.js","assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-98deeb3c.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js","assets/number-be8268ad.js"]),EdgeProcessingWorker:()=>le(()=>import("./EdgeProcessingWorker-256d78f7.js"),["assets/EdgeProcessingWorker-256d78f7.js","assets/InterleavedLayout-5600e4a7.js","assets/BufferView-fcc17949.js","assets/types-1305598a.js","assets/edgeProcessing-93a2d76d.js","assets/deduplicate-b69c0974.js","assets/Indices-cca0929a.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>le(()=>import("./ElevationSamplerWorker-2473cfac.js"),["assets/ElevationSamplerWorker-2473cfac.js","assets/PooledRBush-39e682e0.js","assets/georeference-78bb382a.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-9b71f651.js","assets/MeshLocalVertexSpace-2ae36bea.js","assets/MeshGeoreferencedRelativeVertexSpace-627d89e1.js","assets/quat-b7a99513.js","assets/quatf64-3363c48e.js","assets/vec32-c6c88e0a.js","assets/BufferView-fcc17949.js"]),FeatureServiceSnappingSourceWorker:()=>le(()=>import("./FeatureServiceSnappingSourceWorker-3186c6a6.js"),["assets/FeatureServiceSnappingSourceWorker-3186c6a6.js","assets/FeatureStore-c4ee01ca.js","assets/BoundsStore-c6f1d46a.js","assets/PooledRBush-39e682e0.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/timeSupport-fa4d3fa1.js","assets/QueryEngine-44383df7.js","assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-98deeb3c.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js","assets/byteSizeEstimations-7cf1c05d.js"]),GeoJSONSourceWorker:()=>le(()=>import("./GeoJSONSourceWorker-ef486aa9.js"),["assets/GeoJSONSourceWorker-ef486aa9.js","assets/FeatureStore-c4ee01ca.js","assets/BoundsStore-c6f1d46a.js","assets/PooledRBush-39e682e0.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/timeSupport-fa4d3fa1.js","assets/QueryEngine-44383df7.js","assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-98deeb3c.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js","assets/geojson-bb076e7b.js","assets/sourceUtils-f7092f46.js"]),LercWorker:()=>le(()=>import("./LercWorker-cd590020.js"),[]),MemorySourceWorker:()=>le(()=>import("./MemorySourceWorker-fb18f0bd.js"),["assets/MemorySourceWorker-fb18f0bd.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-c4ee01ca.js","assets/BoundsStore-c6f1d46a.js","assets/PooledRBush-39e682e0.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/timeSupport-fa4d3fa1.js","assets/QueryEngine-44383df7.js","assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-98deeb3c.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js","assets/sourceUtils-f7092f46.js"]),PBFDecoderWorker:()=>le(()=>import("./PBFDecoderWorker-92740db0.js"),[]),Pipeline:()=>le(()=>import("./Pipeline-e5984030.js"),["assets/Pipeline-e5984030.js","assets/QueryEngine-44383df7.js","assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/quantizationUtils-98deeb3c.js","assets/timeSupport-fa4d3fa1.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js","assets/FeatureStore2D-f2b72dfe.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/definitions-9bd633e4.js","assets/visualVariablesUtils-084bce9d.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-2d6c7893.js","assets/geojson-bb076e7b.js","assets/createConnection-65275f46.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>le(()=>import("./PointCloudWorker-ddbc349d.js"),["assets/PointCloudWorker-ddbc349d.js","assets/quat-b7a99513.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-1feaa3f8.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-941cd51d.js"]),RasterWorker:()=>le(()=>import("./RasterWorker-6ee2e9a2.js"),["assets/RasterWorker-6ee2e9a2.js","assets/dataUtils-1c3d1393.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-5150eda0.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-938e1f53.js","assets/rasterProjectionHelper-85190f39.js"]),SceneLayerSnappingSourceWorker:()=>le(()=>import("./SceneLayerSnappingSourceWorker-10742564.js"),["assets/SceneLayerSnappingSourceWorker-10742564.js","assets/lineSegment-44b30d84.js","assets/sphere-561e8618.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-f34c3f22.js","assets/InterleavedLayout-5600e4a7.js","assets/BufferView-fcc17949.js","assets/types-1305598a.js","assets/edgeProcessing-93a2d76d.js","assets/deduplicate-b69c0974.js","assets/Indices-cca0929a.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>le(()=>import("./SceneLayerWorker-3dca0733.js"),["assets/SceneLayerWorker-3dca0733.js","assets/MeshLocalVertexSpace-2ae36bea.js","assets/MeshGeoreferencedRelativeVertexSpace-627d89e1.js","assets/vec32-c6c88e0a.js","assets/sphere-561e8618.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>le(()=>import("./WFSSourceWorker-abfd085a.js"),["assets/WFSSourceWorker-abfd085a.js","assets/FeatureStore-c4ee01ca.js","assets/BoundsStore-c6f1d46a.js","assets/PooledRBush-39e682e0.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/timeSupport-fa4d3fa1.js","assets/QueryEngine-44383df7.js","assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-98deeb3c.js","assets/utils-92fe5c50.js","assets/generateRendererUtils-6923f3d8.js","assets/geojson-bb076e7b.js","assets/sourceUtils-f7092f46.js","assets/wfsUtils-2a5f703c.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>le(()=>import("./WorkerTileHandler-fdf191cc.js"),["assets/WorkerTileHandler-fdf191cc.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-92dd31af.js","assets/definitions-9bd633e4.js","assets/StyleRepository-7e18bafb.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/earcut-19a5cba4.js","assets/BidiEngine-9a40f2f4.js"])};var Tr;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Tr||(Tr={}));let Rte=0;function DR(){return Rte++}function jte(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function em(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function A7(t,e,i,r){if(e.type===Tr.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Tr.INVOKE&&e.type!==Tr.RESPONSE)return void t.postMessage(e);let n;if(jte(i)?(n=WI(i.transferList),e.data=i.result):(n=WI(r),e.data=i),n){if(ce("ff")){for(const l of n)if("byteLength"in l&&l.byteLength>267386880){const d="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Tr.INVOKE:throw d;case Tr.RESPONSE:return void A7(t,{type:Tr.RESPONSE,jobId:e.jobId,error:em(d)})}}}t.postMessage(e,n)}else t.postMessage(e)}function tm(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function WI(t){if(!t||!t.length)return null;if(ce("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!Fte(i));return e.length?e:null}function Fte(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:JI,ABORT:YI,INVOKE:KI,RESPONSE:Af,OPEN_PORT:ZI,ON:Nte}=Tr,zte=2;let Vte=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Tr.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Sh=class fp{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new fp(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),fp.clients.set(n,r),i.port2}static loadWorker(e){const i=Dte[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Vte(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:JI}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const n=r==null?void 0:r.signal,l=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new se("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const d=DR();return new Promise((y,b)=>{if(Uo(n))return this._processWork(),void b($i());const x=zn(n,()=>{const E=this._outJobs.get(d);E&&(this._outJobs.delete(d),this._processWork(),Mi(E.abortHandle),this._post({type:YI,jobId:d}),b($i()))}),$={resolve:y,reject:b,abortHandle:x,debugInfo:e};this._outJobs.set(d,$),this._post({type:KI,jobId:d,methodName:e,abortable:n!=null},i,l)})}on(e,i){const r=new MessageChannel;function n(l){i(l.data)}return this._port.postMessage({type:Tr.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:Tr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:ZI,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=zte)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:l}=e;this.invoke(i,r,n).then(d=>l.resolve(d)).catch(d=>l.reject(d))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Mi(e.abortHandle),e.reject($i(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=tm(e);if(i)switch(i.type){case Af:this._onResponseMessage(i);break;case KI:this._invokeQueue.push(i);break;case YI:this._onAbortMessage(i);break;case JI:this._onCloseMessage();break;case ZI:this._onOpenPortMessage(i);break;case Nte:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&fp.clients.get(this)===e&&e.destroy(),fp.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:l}=e,d=l?new AbortController:null,y=this._inJobs;let b,x=this._client,$=x[i];try{if(!$&&i&&i.includes(".")){const E=i.split(".");for(let k=0;k<E.length-1;k++)x=x[E[k]],$=x[E[k+1]]}if(typeof $!="function")throw new TypeError(`${i} is not a function`);b=$.call(x,n,{client:this,signal:d?d.signal:null})}catch(E){return void this._post({type:Af,jobId:r,error:em(E)})}Vl(b)?(y.set(r,{controller:d,promise:b}),b.then(E=>{y.has(r)&&(y.delete(r),this._post({type:Af,jobId:r},E))},E=>{y.has(r)&&(y.delete(r),is(E)||this._post({type:Af,jobId:r,error:em(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:Af,jobId:r},b)}_onOpenPortMessage(e){new fp(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,l=>{i.postMessage(l)}),n=A2(e.port,"message",l=>{const d=tm(l);(d==null?void 0:d.type)===Tr.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,l=this._outJobs;if(!l.has(i))return;const d=l.get(i);l.delete(i),this._processWork(),Mi(d.abortHandle),r?d.reject(se.fromJSON(JSON.parse(r))):d.resolve(n)}_post(e,i,r){return A7(this._port,e,i,r)}};Sh.kernelInfo={buildDate:vO,fullVersion:DM,revision:bO},Sh.clients=new Map;let Bte=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Tw}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((r,n)=>{let l=!0;const d=y=>{ai(i.signal),l&&(l=!1,y())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let y=0;y<e.length;++y){const b=e[y];Vl(b)?this._clientPromises[y]=b.then(x=>(this._clients[y]=new Sh(x,i,()=>this._ongoingJobsQueue.pop()??null),d(r),this._clients[y]),()=>(d(n),null)):(this._clients[y]=new Sh(b,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[y]=Promise.resolve(this._clients[y]),d(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let l=0;l<this._clientPromises.length;++l){const d=this._clientPromises[l];n[l]=d.then(y=>y==null?void 0:y.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject($i(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,r){let n;Array.isArray(r)?(ge.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const l=Gn();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:l});for(let d=0;d<this._clientPromises.length;d++){const y=this._clients[d];y?y.jobAdded():this._clientPromises[d].then(b=>b==null?void 0:b.jobAdded())}return l.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>S2(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(l=>{l&&(i[n]=l.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const RR=ge.getLogger("esri.intl.substitute");function To(t,e,i={}){const{format:r={}}=i;return Bn(t,n=>Gte(n,e,r))}function Gte(t,e,i){let r,n;const l=t.indexOf(":");if(l===-1?r=t.trim():(r=t.slice(0,l).trim(),n=t.slice(l+1).trim()),!r)return"";const d=vm(r,e);if(d==null)return"";const y=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return y?Ute(d,y):n?qte(d,n):k7(d)}function Ute(t,e){switch(e.type){case"date":return qn(t,e.intlOptions);case"number":return wh(t,e.intlOptions);default:return RR.warn("missing format descriptor for key {key}"),k7(t)}}function qte(t,e){switch(e.toLowerCase()){case"dateformat":return qn(t);case"numberformat":return wh(t);default:return RR.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?qn(t):/^numberformat/i.test(e)?wh(t):k7(t)}}function k7(t){switch(typeof t){case"string":return t;case"number":return wh(t);case"boolean":return""+t;default:return t instanceof Date?qn(t):""}}async function Hte(t,e,i,r){const n=e.exec(i);if(!n)throw new se("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const l=n[1]?`${n[1]}/`:"",d=n[2],y=JJ(r),b=`${l}${d}.json`,x=y?`${l}${d}_${y}.json`:b;let $;try{$=await XI(t(x))}catch(E){if(x===b)throw new se("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:E});try{$=await XI(t(b))}catch(k){throw new se("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:k})}}return $}async function XI(t){if(QI.fetchBundleAsset!=null)return QI.fetchBundleAsset(t);const e=await Wt(t,{responseType:"text"});return JSON.parse(e.data)}let Wte=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?l=>new URL(l,new URL(r,window.location.href)).href:r instanceof URL?l=>new URL(l,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return Hte(this.getAssetUrl,this.matcher,e,i)}};function Jte(t){return new Wte(t)}const QI={};WJ(Jte({pattern:"esri/",location:It}));const Yte={};function Kte(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Yte.baseUrl),e}let Zte=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},Yv=class{constructor(){this._dispatcher=new Zte,this._workerPostMessage({type:Tr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Yb(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){Yb(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=tm(e);if(i&&i.type===Tr.OPEN){const{modulePath:r,jobId:n}=i;let l=await Sh.loadWorker(r);l||(l=await le(()=>import(r),[]));const d=Sh.connect(l);this._workerPostMessage({type:Tr.OPENED,jobId:n,data:d})}}};const p4=ge.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Xte}=Tr,Qte='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let _g,xg;const e8="Failed to create Worker. Fallback to execute module in main thread";async function eie(){if(!ce("esri-workers")||(ce("mozilla"),0))return t8(new Yv);if(!_g&&!xg)try{const e=Qte.split('"{CONFIGURATION}"').join(`'${tie()}'`);_g=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){xg=e||{}}let t;if(_g)try{t=new Worker(_g,{name:"esri-worker-"+iie++})}catch{p4.warn(e8,xg),t=new Yv}else p4.warn(e8,xg),t=new Yv;return t8(t)}async function t8(t){return new Promise(e=>{function i(n){const l=tm(n);l&&l.type===Xte&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),p4.warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new Yv).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function tie(){let t;if(Ft.default!=null){const n={...Ft};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Ft));t.assetsPath=Rn(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Rn(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Vn(),t.has={"esri-csp-restrictions":ce("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ce("esri-2d-update-debug"),"esri-2d-log-updating":ce("esri-2d-log-updating"),"featurelayer-pbf":ce("featurelayer-pbf"),"featurelayer-simplify-thresholds":ce("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ce("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ce("featurelayer-simplify-mobile-factor"),"esri-atomics":ce("esri-atomics"),"esri-shared-array-buffer":ce("esri-shared-array-buffer"),"esri-tiles-debug":ce("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ce("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ce("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":ce("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=Rn(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Rn(t.workers.workerPath):t.workers.workerPath=Rn(It("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ft.workers.loaderConfig,i=Kte({baseUrl:e==null?void 0:e.baseUrl,locale:Vn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:vO,fullVersion:DM,revision:bO}})}let iie=0;const{ABORT:i8,INVOKE:rie,OPEN:sie,OPENED:nie,RESPONSE:kf}=Tr;let oie=class jR{static async create(e){const i=await eie();return new jR(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),ge.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=DR();return new Promise((l,d)=>{const y={resolve:l,reject:d,abortHandle:hM(r,()=>{this._outJobs.delete(n),this._post({type:i8,jobId:n})})};this._outJobs.set(n,y),this._post({type:sie,jobId:n,modulePath:e})})}_onMessage(e){const i=tm(e);if(i)switch(i.type){case nie:this._onOpenedMessage(i);break;case kf:this._onResponseMessage(i);break;case i8:this._onAbortMessage(i);break;case rie:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:l}=e,d=l?new AbortController:null,y=this._inJobs,b=HW[i];let x;try{if(typeof b!="function")throw new TypeError(`${i} is not a function`);x=b.call(null,n,{signal:d?d.signal:null})}catch($){return void this._post({type:kf,jobId:r,error:em($)})}Vl(x)?(y.set(r,{controller:d,promise:x}),x.then($=>{y.has(r)&&(y.delete(r),this._post({type:kf,jobId:r},$))},$=>{y.has(r)&&(y.delete(r),$||($={message:"Error encountered at method"+i}),is($)||this._post({type:kf,jobId:r,error:em($||{message:`Error encountered at method ${i}`})}))})):this._post({type:kf,jobId:r},x)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Mi(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),Mi(l.abortHandle),r?l.reject(se.fromJSON(JSON.parse(r))):l.resolve(n))}_post(e,i,r){return A7(this.worker,e,i,r)}};const r8=ce("host-browser")?Math.min(navigator.hardwareConcurrency-1,ce("workers-pool-size")):0;let Xc=ce("esri-mobile")?Math.min(r8,3):r8;Xc||(Xc=ce("safari")&&ce("mac")?7:2);let s8=0;const Kv=[];function aie(){NR()}async function Sg(t,e){const i=new Bte;return await i.open(t,e),i}async function FR(t,e={}){if(typeof t!="string")throw new se("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ce("host-webworker")&&!ce("esri-workers")&&(i="local"),i==="local"){let r=await Sh.loadWorker(t);r||(r=await le(()=>import(t),[])),ai(e.signal);const n=e.client||r;return Sg([Sh.connect(r)],{...e,client:n})}if(await NR(),ai(e.signal),i==="dedicated"){const r=s8++%Xc;return Sg([await Kv[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Xc);if(r<Xc){const n=new Array(r);for(let l=0;l<r;++l){const d=s8++%Xc;n[l]=Kv[d].open(t,e)}return Sg(n,e)}}return Sg(Kv.map(r=>r.open(t,e)),e)}let Mg=null;async function NR(){if(Mg)return Mg;new AbortController;const t=[];for(let e=0;e<Xc;e++){const i=oie.create(e).then(r=>(Kv[e]=r,r));t.push(i)}return Mg=Promise.all(t),Mg}function lie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Fh(t,e,i,r,n,l,d,y,b,x,$,E,k,P,D,L,N){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=l,t[5]=d,t[6]=y,t[7]=b,t[8]=x,t[9]=$,t[10]=E,t[11]=k,t[12]=P,t[13]=D,t[14]=L,t[15]=N,t}function Cm(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Gl(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],l=e[6],d=e[7],y=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=l,t[11]=e[14],t[12]=n,t[13]=d,t[14]=y}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function uie(t,e){return zR(t,e)||Cm(t),t}function zR(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],b=e[6],x=e[7],$=e[8],E=e[9],k=e[10],P=e[11],D=e[12],L=e[13],N=e[14],B=e[15],W=i*y-r*d,H=i*b-n*d,Y=i*x-l*d,ie=r*b-n*y,ne=r*x-l*y,he=n*x-l*b,de=$*L-E*D,be=$*N-k*D,we=$*B-P*D,$e=E*N-k*L,ke=E*B-P*L,Ge=k*B-P*N;let Fe=W*Ge-H*ke+Y*$e+ie*we-ne*be+he*de;return Fe?(Fe=1/Fe,t[0]=(y*Ge-b*ke+x*$e)*Fe,t[1]=(n*ke-r*Ge-l*$e)*Fe,t[2]=(L*he-N*ne+B*ie)*Fe,t[3]=(k*ne-E*he-P*ie)*Fe,t[4]=(b*we-d*Ge-x*be)*Fe,t[5]=(i*Ge-n*we+l*be)*Fe,t[6]=(N*Y-D*he-B*H)*Fe,t[7]=($*he-k*Y+P*H)*Fe,t[8]=(d*ke-y*we+x*de)*Fe,t[9]=(r*we-i*ke-l*de)*Fe,t[10]=(D*ne-L*Y+B*W)*Fe,t[11]=(E*Y-$*ne-P*W)*Fe,t[12]=(y*be-d*$e-b*de)*Fe,t[13]=(i*$e-r*be+n*de)*Fe,t[14]=(L*H-D*ie-N*W)*Fe,t[15]=($*ie-E*H+k*W)*Fe,t):null}function hie(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],b=e[6],x=e[7],$=e[8],E=e[9],k=e[10],P=e[11],D=e[12],L=e[13],N=e[14],B=e[15];return t[0]=y*(k*B-P*N)-E*(b*B-x*N)+L*(b*P-x*k),t[1]=-(r*(k*B-P*N)-E*(n*B-l*N)+L*(n*P-l*k)),t[2]=r*(b*B-x*N)-y*(n*B-l*N)+L*(n*x-l*b),t[3]=-(r*(b*P-x*k)-y*(n*P-l*k)+E*(n*x-l*b)),t[4]=-(d*(k*B-P*N)-$*(b*B-x*N)+D*(b*P-x*k)),t[5]=i*(k*B-P*N)-$*(n*B-l*N)+D*(n*P-l*k),t[6]=-(i*(b*B-x*N)-d*(n*B-l*N)+D*(n*x-l*b)),t[7]=i*(b*P-x*k)-d*(n*P-l*k)+$*(n*x-l*b),t[8]=d*(E*B-P*L)-$*(y*B-x*L)+D*(y*P-x*E),t[9]=-(i*(E*B-P*L)-$*(r*B-l*L)+D*(r*P-l*E)),t[10]=i*(y*B-x*L)-d*(r*B-l*L)+D*(r*x-l*y),t[11]=-(i*(y*P-x*E)-d*(r*P-l*E)+$*(r*x-l*y)),t[12]=-(d*(E*N-k*L)-$*(y*N-b*L)+D*(y*k-b*E)),t[13]=i*(E*N-k*L)-$*(r*N-n*L)+D*(r*k-n*E),t[14]=-(i*(y*N-b*L)-d*(r*N-n*L)+D*(r*b-n*y)),t[15]=i*(y*k-b*E)-d*(r*k-n*E)+$*(r*b-n*y),t}function cie(t){const e=t[0],i=t[1],r=t[2],n=t[3],l=t[4],d=t[5],y=t[6],b=t[7],x=t[8],$=t[9],E=t[10],k=t[11],P=t[12],D=t[13],L=t[14],N=t[15];return(e*d-i*l)*(E*N-k*L)-(e*y-r*l)*($*N-k*D)+(e*b-n*l)*($*L-E*D)+(i*y-r*d)*(x*N-k*P)-(i*b-n*d)*(x*L-E*P)+(r*b-n*y)*(x*D-$*P)}function VR(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=e[6],$=e[7],E=e[8],k=e[9],P=e[10],D=e[11],L=e[12],N=e[13],B=e[14],W=e[15];let H=i[0],Y=i[1],ie=i[2],ne=i[3];return t[0]=H*r+Y*y+ie*E+ne*L,t[1]=H*n+Y*b+ie*k+ne*N,t[2]=H*l+Y*x+ie*P+ne*B,t[3]=H*d+Y*$+ie*D+ne*W,H=i[4],Y=i[5],ie=i[6],ne=i[7],t[4]=H*r+Y*y+ie*E+ne*L,t[5]=H*n+Y*b+ie*k+ne*N,t[6]=H*l+Y*x+ie*P+ne*B,t[7]=H*d+Y*$+ie*D+ne*W,H=i[8],Y=i[9],ie=i[10],ne=i[11],t[8]=H*r+Y*y+ie*E+ne*L,t[9]=H*n+Y*b+ie*k+ne*N,t[10]=H*l+Y*x+ie*P+ne*B,t[11]=H*d+Y*$+ie*D+ne*W,H=i[12],Y=i[13],ie=i[14],ne=i[15],t[12]=H*r+Y*y+ie*E+ne*L,t[13]=H*n+Y*b+ie*k+ne*N,t[14]=H*l+Y*x+ie*P+ne*B,t[15]=H*d+Y*$+ie*D+ne*W,t}function die(t,e,i){const r=i[0],n=i[1],l=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*l+e[12],t[13]=e[1]*r+e[5]*n+e[9]*l+e[13],t[14]=e[2]*r+e[6]*n+e[10]*l+e[14],t[15]=e[3]*r+e[7]*n+e[11]*l+e[15];else{const d=e[0],y=e[1],b=e[2],x=e[3],$=e[4],E=e[5],k=e[6],P=e[7],D=e[8],L=e[9],N=e[10],B=e[11];t[0]=d,t[1]=y,t[2]=b,t[3]=x,t[4]=$,t[5]=E,t[6]=k,t[7]=P,t[8]=D,t[9]=L,t[10]=N,t[11]=B,t[12]=d*r+$*n+D*l+e[12],t[13]=y*r+E*n+L*l+e[13],t[14]=b*r+k*n+N*l+e[14],t[15]=x*r+P*n+B*l+e[15]}return t}function pie(t,e,i){const r=i[0],n=i[1],l=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fie(t,e,i,r){let n,l,d,y,b,x,$,E,k,P,D,L,N,B,W,H,Y,ie,ne,he,de,be,we,$e,ke=r[0],Ge=r[1],Fe=r[2],ut=Math.sqrt(ke*ke+Ge*Ge+Fe*Fe);return ut<Wn()?null:(ut=1/ut,ke*=ut,Ge*=ut,Fe*=ut,n=Math.sin(i),l=Math.cos(i),d=1-l,y=e[0],b=e[1],x=e[2],$=e[3],E=e[4],k=e[5],P=e[6],D=e[7],L=e[8],N=e[9],B=e[10],W=e[11],H=ke*ke*d+l,Y=Ge*ke*d+Fe*n,ie=Fe*ke*d-Ge*n,ne=ke*Ge*d-Fe*n,he=Ge*Ge*d+l,de=Fe*Ge*d+ke*n,be=ke*Fe*d+Ge*n,we=Ge*Fe*d-ke*n,$e=Fe*Fe*d+l,t[0]=y*H+E*Y+L*ie,t[1]=b*H+k*Y+N*ie,t[2]=x*H+P*Y+B*ie,t[3]=$*H+D*Y+W*ie,t[4]=y*ne+E*he+L*de,t[5]=b*ne+k*he+N*de,t[6]=x*ne+P*he+B*de,t[7]=$*ne+D*he+W*de,t[8]=y*be+E*we+L*$e,t[9]=b*be+k*we+N*$e,t[10]=x*be+P*we+B*$e,t[11]=$*be+D*we+W*$e,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function yie(t,e,i){const r=Math.sin(i),n=Math.cos(i),l=e[4],d=e[5],y=e[6],b=e[7],x=e[8],$=e[9],E=e[10],k=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=l*n+x*r,t[5]=d*n+$*r,t[6]=y*n+E*r,t[7]=b*n+k*r,t[8]=x*n-l*r,t[9]=$*n-d*r,t[10]=E*n-y*r,t[11]=k*n-b*r,t}function mie(t,e,i){const r=Math.sin(i),n=Math.cos(i),l=e[0],d=e[1],y=e[2],b=e[3],x=e[8],$=e[9],E=e[10],k=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*n-x*r,t[1]=d*n-$*r,t[2]=y*n-E*r,t[3]=b*n-k*r,t[8]=l*r+x*n,t[9]=d*r+$*n,t[10]=y*r+E*n,t[11]=b*r+k*n,t}function gie(t,e,i){const r=Math.sin(i),n=Math.cos(i),l=e[0],d=e[1],y=e[2],b=e[3],x=e[4],$=e[5],E=e[6],k=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*n+x*r,t[1]=d*n+$*r,t[2]=y*n+E*r,t[3]=b*n+k*r,t[4]=x*n-l*r,t[5]=$*n-d*r,t[6]=E*n-y*r,t[7]=k*n-b*r,t}function BR(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function vie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bie(t,e,i){if(e===0)return Cm(t);let r,n,l,d=i[0],y=i[1],b=i[2],x=Math.sqrt(d*d+y*y+b*b);return x<Wn()?null:(x=1/x,d*=x,y*=x,b*=x,r=Math.sin(e),n=Math.cos(e),l=1-n,t[0]=d*d*l+n,t[1]=y*d*l+b*r,t[2]=b*d*l-y*r,t[3]=0,t[4]=d*y*l-b*r,t[5]=y*y*l+n,t[6]=b*y*l+d*r,t[7]=0,t[8]=d*b*l+y*r,t[9]=y*b*l-d*r,t[10]=b*b*l+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function wie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _ie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function GR(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=r+r,b=n+n,x=l+l,$=r*y,E=r*b,k=r*x,P=n*b,D=n*x,L=l*x,N=d*y,B=d*b,W=d*x;return t[0]=1-(P+L),t[1]=E+W,t[2]=k-B,t[3]=0,t[4]=E-W,t[5]=1-($+L),t[6]=D+N,t[7]=0,t[8]=k+B,t[9]=D-N,t[10]=1-($+P),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Sie(t,e){const i=Mie,r=-e[0],n=-e[1],l=-e[2],d=e[3],y=e[4],b=e[5],x=e[6],$=e[7],E=r*r+n*n+l*l+d*d;return E>0?(i[0]=2*(y*d+$*r+b*l-x*n)/E,i[1]=2*(b*d+$*n+x*r-y*l)/E,i[2]=2*(x*d+$*l+y*n-b*r)/E):(i[0]=2*(y*d+$*r+b*l-x*n),i[1]=2*(b*d+$*n+x*r-y*l),i[2]=2*(x*d+$*l+y*n-b*r)),GR(t,e,i),t}const Mie=Ko();function $ie(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Tie(t,e){const i=e[0],r=e[1],n=e[2],l=e[4],d=e[5],y=e[6],b=e[8],x=e[9],$=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(l*l+d*d+y*y),t[2]=Math.sqrt(b*b+x*x+$*$),t}function Iie(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function Eie(t,e,i,r){const n=e[0],l=e[1],d=e[2],y=e[3],b=n+n,x=l+l,$=d+d,E=n*b,k=n*x,P=n*$,D=l*x,L=l*$,N=d*$,B=y*b,W=y*x,H=y*$,Y=r[0],ie=r[1],ne=r[2];return t[0]=(1-(D+N))*Y,t[1]=(k+H)*Y,t[2]=(P-W)*Y,t[3]=0,t[4]=(k-H)*ie,t[5]=(1-(E+N))*ie,t[6]=(L+B)*ie,t[7]=0,t[8]=(P+W)*ne,t[9]=(L-B)*ne,t[10]=(1-(E+D))*ne,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Aie(t,e,i,r,n){const l=e[0],d=e[1],y=e[2],b=e[3],x=l+l,$=d+d,E=y+y,k=l*x,P=l*$,D=l*E,L=d*$,N=d*E,B=y*E,W=b*x,H=b*$,Y=b*E,ie=r[0],ne=r[1],he=r[2],de=n[0],be=n[1],we=n[2],$e=(1-(L+B))*ie,ke=(P+Y)*ie,Ge=(D-H)*ie,Fe=(P-Y)*ne,ut=(1-(k+B))*ne,ii=(N+W)*ne,Ze=(D+H)*he,Xe=(N-W)*he,ri=(1-(k+L))*he;return t[0]=$e,t[1]=ke,t[2]=Ge,t[3]=0,t[4]=Fe,t[5]=ut,t[6]=ii,t[7]=0,t[8]=Ze,t[9]=Xe,t[10]=ri,t[11]=0,t[12]=i[0]+de-($e*de+Fe*be+Ze*we),t[13]=i[1]+be-(ke*de+ut*be+Xe*we),t[14]=i[2]+we-(Ge*de+ii*be+ri*we),t[15]=1,t}function kie(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=i+i,y=r+r,b=n+n,x=i*d,$=r*d,E=r*y,k=n*d,P=n*y,D=n*b,L=l*d,N=l*y,B=l*b;return t[0]=1-E-D,t[1]=$+B,t[2]=k-N,t[3]=0,t[4]=$-B,t[5]=1-x-D,t[6]=P+L,t[7]=0,t[8]=k+N,t[9]=P-L,t[10]=1-x-E,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pie(t,e,i,r,n,l,d){const y=1/(i-e),b=1/(n-r),x=1/(l-d);return t[0]=2*l*y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*l*b,t[6]=0,t[7]=0,t[8]=(i+e)*y,t[9]=(n+r)*b,t[10]=(d+l)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=d*l*2*x,t[15]=0,t}function Cie(t,e,i,r,n){const l=1/Math.tan(e/2);let d;return t[0]=l/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(d=1/(r-n),t[10]=(n+r)*d,t[14]=2*n*r*d):(t[10]=-1,t[14]=-2*r),t}function Oie(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),l=Math.tan(e.downDegrees*Math.PI/180),d=Math.tan(e.leftDegrees*Math.PI/180),y=Math.tan(e.rightDegrees*Math.PI/180),b=2/(d+y),x=2/(n+l);return t[0]=b,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-(d-y)*b*.5,t[9]=(n-l)*x*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function Lie(t,e,i,r,n,l,d){const y=1/(e-i),b=1/(r-n),x=1/(l-d);return t[0]=-2*y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*b,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+i)*y,t[13]=(n+r)*b,t[14]=(d+l)*x,t[15]=1,t}function Die(t,e,i,r){const n=e[0],l=e[1],d=e[2];let y=n-i[0],b=l-i[1],x=d-i[2];const $=Wn();if(Math.abs(y)<$&&Math.abs(b)<$&&Math.abs(x)<$)return void Cm(t);let E=1/Math.sqrt(y*y+b*b+x*x);y*=E,b*=E,x*=E;const k=r[0],P=r[1],D=r[2];let L=P*x-D*b,N=D*y-k*x,B=k*b-P*y;E=Math.sqrt(L*L+N*N+B*B),E?(E=1/E,L*=E,N*=E,B*=E):(L=0,N=0,B=0);let W=b*B-x*N,H=x*L-y*B,Y=y*N-b*L;E=Math.sqrt(W*W+H*H+Y*Y),E?(E=1/E,W*=E,H*=E,Y*=E):(W=0,H=0,Y=0),t[0]=L,t[1]=W,t[2]=y,t[3]=0,t[4]=N,t[5]=H,t[6]=b,t[7]=0,t[8]=B,t[9]=Y,t[10]=x,t[11]=0,t[12]=-(L*n+N*l+B*d),t[13]=-(W*n+H*l+Y*d),t[14]=-(y*n+b*l+x*d),t[15]=1}function Rie(t,e,i,r){const n=e[0],l=e[1],d=e[2],y=r[0],b=r[1],x=r[2];let $=n-i[0],E=l-i[1],k=d-i[2],P=$*$+E*E+k*k;P>0&&(P=1/Math.sqrt(P),$*=P,E*=P,k*=P);let D=b*k-x*E,L=x*$-y*k,N=y*E-b*$;return P=D*D+L*L+N*N,P>0&&(P=1/Math.sqrt(P),D*=P,L*=P,N*=P),t[0]=D,t[1]=L,t[2]=N,t[3]=0,t[4]=E*N-k*L,t[5]=k*D-$*N,t[6]=$*L-E*D,t[7]=0,t[8]=$,t[9]=E,t[10]=k,t[11]=0,t[12]=n,t[13]=l,t[14]=d,t[15]=1,t}function jie(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Fie(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function Nie(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function UR(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function zie(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function Vie(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function Bie(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Gie(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],b=t[6],x=t[7],$=t[8],E=t[9],k=t[10],P=t[11],D=t[12],L=t[13],N=t[14],B=t[15],W=e[0],H=e[1],Y=e[2],ie=e[3],ne=e[4],he=e[5],de=e[6],be=e[7],we=e[8],$e=e[9],ke=e[10],Ge=e[11],Fe=e[12],ut=e[13],ii=e[14],Ze=e[15],Xe=Wn();return Math.abs(i-W)<=Xe*Math.max(1,Math.abs(i),Math.abs(W))&&Math.abs(r-H)<=Xe*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(n-Y)<=Xe*Math.max(1,Math.abs(n),Math.abs(Y))&&Math.abs(l-ie)<=Xe*Math.max(1,Math.abs(l),Math.abs(ie))&&Math.abs(d-ne)<=Xe*Math.max(1,Math.abs(d),Math.abs(ne))&&Math.abs(y-he)<=Xe*Math.max(1,Math.abs(y),Math.abs(he))&&Math.abs(b-de)<=Xe*Math.max(1,Math.abs(b),Math.abs(de))&&Math.abs(x-be)<=Xe*Math.max(1,Math.abs(x),Math.abs(be))&&Math.abs($-we)<=Xe*Math.max(1,Math.abs($),Math.abs(we))&&Math.abs(E-$e)<=Xe*Math.max(1,Math.abs(E),Math.abs($e))&&Math.abs(k-ke)<=Xe*Math.max(1,Math.abs(k),Math.abs(ke))&&Math.abs(P-Ge)<=Xe*Math.max(1,Math.abs(P),Math.abs(Ge))&&Math.abs(D-Fe)<=Xe*Math.max(1,Math.abs(D),Math.abs(Fe))&&Math.abs(L-ut)<=Xe*Math.max(1,Math.abs(L),Math.abs(ut))&&Math.abs(N-ii)<=Xe*Math.max(1,Math.abs(N),Math.abs(ii))&&Math.abs(B-Ze)<=Xe*Math.max(1,Math.abs(B),Math.abs(Ze))}function Uie(t){const e=Wn(),i=t[0],r=t[1],n=t[2],l=t[4],d=t[5],y=t[6],b=t[8],x=t[9],$=t[10];return Math.abs(1-(i*i+l*l+b*b))<=e&&Math.abs(1-(r*r+d*d+x*x))<=e&&Math.abs(1-(n*n+y*y+$*$))<=e}function qie(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const Hie=VR,Wie=UR;Object.freeze(Object.defineProperty({__proto__:null,add:Nie,adjoint:hie,copy:lie,determinant:cie,equals:Gie,exactEquals:Bie,frob:Fie,fromQuat:kie,fromQuat2:Sie,fromRotation:bie,fromRotationTranslation:GR,fromRotationTranslationScale:Eie,fromRotationTranslationScaleOrigin:Aie,fromScaling:vie,fromTranslation:BR,fromXRotation:wie,fromYRotation:_ie,fromZRotation:xie,frustum:Pie,getRotation:Iie,getScaling:Tie,getTranslation:$ie,hasIdentityRotation:qie,identity:Cm,invert:zR,invertOrIdentity:uie,isOrthoNormal:Uie,lookAt:Die,mul:Hie,multiply:VR,multiplyScalar:zie,multiplyScalarAndAdd:Vie,ortho:Lie,perspective:Cie,perspectiveFromFieldOfView:Oie,rotate:fie,rotateX:yie,rotateY:mie,rotateZ:gie,scale:pie,set:Fh,str:jie,sub:Wie,subtract:UR,targetTo:Rie,translate:die,transpose:Gl},Symbol.toStringTag,{value:"Module"}));let P3,oe=null;function P7(){return!!oe}function Jie(){return!!ce("esri-wasm")}function qR(){return P3||(P3=le(()=>import("./pe-wasm-3f4b7769.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>It(`esri/geometry/support/${e}`)})).then(t=>{WR(t)}),P3)}var f4,mi,y4;(function(t){function e(l,d,y){oe.ensureCache.prepare();const b=Bc(y),x=y===b,$=oe.ensureFloat64(b),E=oe._pe_geog_to_proj(oe.getPointer(l),d,$);return E&&Ku(y,d,$,x),E}function i(l,d,y,b){switch(b){case mi.PE_TRANSFORM_P_TO_G:return r(l,d,y);case mi.PE_TRANSFORM_G_TO_P:return e(l,d,y)}return 0}function r(l,d,y){return n(l,d,y,0)}function n(l,d,y,b){oe.ensureCache.prepare();const x=Bc(y),$=y===x,E=oe.ensureFloat64(x),k=oe._pe_proj_to_geog_center(oe.getPointer(l),d,E,b);return k&&Ku(y,d,E,$),k}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(f4||(f4={})),function(t){function e(){t.PE_BUFFER_MAX=oe.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=oe.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=oe.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=oe.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=oe.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=oe.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=oe.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=oe.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=oe.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=oe.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=oe.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=oe.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=oe.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=oe.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=oe.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=oe.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=oe.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=oe.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=oe.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=oe.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=oe.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=oe.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=oe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=oe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=oe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=oe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=oe.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=oe.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=oe.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=oe.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(mi||(mi={})),function(t){const e={},i={},r=P=>{if(P){const D=P.getType();switch(D){case mi.PE_TYPE_GEOGCS:P=oe.castObject(P,oe.PeGeogcs);break;case mi.PE_TYPE_PROJCS:P=oe.castObject(P,oe.PeProjcs);break;case mi.PE_TYPE_GEOGTRAN:P=oe.castObject(P,oe.PeGeogtran);break;default:D&mi.PE_TYPE_UNIT&&(P=oe.castObject(P,oe.PeUnit))}}return P};function n(){oe.PeFactory.prototype.initialize(null)}function l(P){return d(mi.PE_TYPE_COORDSYS,P)}function d(P,D){let L=null,N=e[P];if(N||(N={},e[P]=N),N.hasOwnProperty(String(D)))L=N[D];else{const B=oe.PeFactory.prototype.factoryByType(P,D);oe.compare(B,oe.NULL)||(L=B,N[D]=L)}return L=r(L),L}function y(P,D){let L=null,N=i[P];if(N||(N={},i[P]=N),N.hasOwnProperty(D))L=N[D];else{const B=oe.PeFactory.prototype.fromString(P,D);oe.compare(B,oe.NULL)||(L=B,N[D]=L)}return L=r(L),L}function b(P){return d(mi.PE_TYPE_GEOGCS,P)}function x(P){return d(mi.PE_TYPE_GEOGTRAN,P)}function $(P){return oe.PeFactory.prototype.getCode(P)}function E(P){return d(mi.PE_TYPE_PROJCS,P)}function k(P){return d(mi.PE_TYPE_UNIT,P)}t.initialize=n,t.coordsys=l,t.factoryByType=d,t.fromString=y,t.geogcs=b,t.geogtran=x,t.getCode=$,t.projcs=E,t.unit=k}(y4||(y4={}));let HR=null;var Iw,m4,g4,v4,Ew,b4,Aw,kw,w4;function WR(t){function e(l,d,y){l[d]=y(l[d])}oe=t,mi.init(),Iw.init(),Ew.init(),Aw.init(),kw.init(),HR=class extends oe.PeGCSExtent{destroy(){oe.destroy(this)}};const i=[oe.PeDatum,oe.PeGeogcs,oe.PeGeogtran,oe.PeObject,oe.PeParameter,oe.PePrimem,oe.PeProjcs,oe.PeSpheroid,oe.PeUnit];for(const l of i)e(l.prototype,"getName",d=>function(){return d.call(this,new Array(mi.PE_NAME_MAX))});for(const l of[oe.PeGeogtran,oe.PeProjcs])e(l.prototype,"getParameters",d=>function(){const y=new Array(mi.PE_PARM_MAX);let b=d.call(this);for(let x=0;x<y.length;x++){const $=oe.getValue(b,"*");y[x]=$?oe.wrapPointer($,oe.PeParameter):null,b+=Int32Array.BYTES_PER_ELEMENT}return y});e(oe.PeHorizon.prototype,"getCoord",l=>function(){const d=this.getSize();if(!d)return null;const y=[];return Ku(y,d,l.call(this)),y}),e(oe.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const d=oe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;const b=l.call(this);if(!oe.compare(b,oe.NULL)){y=[b];const x=this.getSteps();if(x>1){const $=oe.getPointer(b);for(let E=1;E<x;E++)y.push(oe.wrapPointer($+d*E,oe.PeGTlistExtendedGTs))}}return y}});const r=oe._pe_getPeHorizonSize(),n=l=>function(){let d=this._cache;if(d||(d=new Map,this._cache=d),d.has(l))return d.get(l);let y=null;const b=l.call(this);if(!oe.compare(b,oe.NULL)){y=[b];const x=b.getNump();if(x>1){const $=oe.getPointer(b);for(let E=1;E<x;E++)y.push(oe.wrapPointer($+r*E,oe.PeHorizon))}}return d.set(l,y),y};e(oe.PeProjcs.prototype,"horizonGcsGenerate",n),e(oe.PeProjcs.prototype,"horizonPcsGenerate",n),oe.PeObject.prototype.toString=function(l=mi.PE_STR_OPTS_NONE){oe.ensureCache.prepare();const d=oe.getPointer(this),y=oe.ensureInt8(new Array(mi.PE_BUFFER_MAX));return oe.UTF8ToString(oe._pe_object_to_string_ext(d,l,y))}}function Ba(t){if(!t)return;const e=oe.getClass(t);if(!e)return;const i=oe.getCache(e);if(!i)return;const r=oe.getPointer(t);r&&delete i[r]}function $g(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(oe.ensureInt8(r));return i}function Bc(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function Ku(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=oe.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let l=0;l<e;l++)n&&(t[l]=new Array(2)),t[l][0]=oe.getValue(i,"double"),t[l][1]=oe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=oe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=oe._pe_getPeGTlistExtendedEntrySize()}function r(n,l,d,y,b,x){let $=null;const E=new oe.PeInteger(x);try{const k=oe.PeGTlistExtended.prototype.getGTlist(n,l,d,y,b,E);if((x=E.val)&&($=[k],x>1)){const P=oe.getPointer(k);for(let D=1;D<x;D++)$.push(oe.wrapPointer(P+e*D,oe.PeGTlistExtendedEntry))}}finally{oe.destroy(E)}return $}t.init=i,t.getGTlist=r})(Iw||(Iw={})),function(t){function e(i){if(i&&i.length){for(const r of i)Ba(r),r.getEntries().forEach(n=>{Ba(n);const l=n.getGeogtran();Ba(l),l.getParameters().forEach(Ba),[l.getGeogcs1(),l.getGeogcs2()].forEach(d=>{Ba(d);const y=d.getDatum();Ba(y),Ba(y.getSpheroid()),Ba(d.getPrimem()),Ba(d.getUnit())})});oe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(m4||(m4={})),function(t){function e(i,r,n,l,d){oe.ensureCache.prepare();const y=Bc(n),b=n===y,x=oe.ensureFloat64(y);let $=0;l&&($=oe.ensureFloat64(l));const E=oe._pe_geog_to_geog(oe.getPointer(i),r,x,$,d);return E&&Ku(n,r,x,b),E}t.geogToGeog=e}(g4||(g4={})),function(t){const e=(x,$,E,k,P,D)=>{let L,N;switch(oe.ensureCache.prepare(),x){case"dd":L=oe._pe_geog_to_dd,N=mi.PE_DD_MAX;break;case"ddm":L=oe._pe_geog_to_ddm,N=mi.PE_DDM_MAX;break;case"dms":L=oe._pe_geog_to_dms,N=mi.PE_DMS_MAX}let B=0;$&&(B=oe.getPointer($));const W=Bc(k),H=oe.ensureFloat64(W),Y=$g(E,N),ie=L(B,E,H,P,oe.ensureInt32(Y));if(ie)for(let ne=0;ne<E;ne++)D[ne]=oe.UTF8ToString(Y[ne]);return ie},i=(x,$,E,k,P)=>{let D;switch(oe.ensureCache.prepare(),x){case"dd":D=oe._pe_dd_to_geog;break;case"ddm":D=oe._pe_ddm_to_geog;break;case"dms":D=oe._pe_dms_to_geog}let L=0;$&&(L=oe.getPointer($));const N=k.map(Y=>oe.ensureString(Y)),B=oe.ensureInt32(N),W=oe.ensureFloat64(new Array(2*E)),H=D(L,E,B,W);return H&&Ku(P,E,W),H};function r(x,$,E,k,P){return e("dms",x,$,E,k,P)}function n(x,$,E,k){return i("dms",x,$,E,k)}function l(x,$,E,k,P){return e("ddm",x,$,E,k,P)}function d(x,$,E,k){return i("ddm",x,$,E,k)}function y(x,$,E,k,P){return e("dd",x,$,E,k,P)}function b(x,$,E,k){return i("dd",x,$,E,k)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=l,t.ddmToGeog=d,t.geogToDd=y,t.ddToGeog=b}(v4||(v4={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=oe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=oe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=oe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=oe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=oe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,l,d,y,b,x,$){oe.ensureCache.prepare();let E=0;n&&(E=oe.getPointer(n));const k=Bc(d),P=oe.ensureFloat64(k),D=$g(l,mi.PE_MGRS_MAX),L=oe.ensureInt32(D),N=oe._pe_geog_to_mgrs_extended(E,l,P,y,b,x,L);if(N)for(let B=0;B<l;B++)$[B]=oe.UTF8ToString(D[B]);return N}function r(n,l,d,y,b){oe.ensureCache.prepare();let x=0;n&&(x=oe.getPointer(n));const $=d.map(D=>oe.ensureString(D)),E=oe.ensureInt32($),k=oe.ensureFloat64(new Array(2*l)),P=oe._pe_mgrs_to_geog_extended(x,l,E,y,k);return P&&Ku(b,l,k),P}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(Ew||(Ew={})),function(t){function e(r,n,l,d,y,b,x){oe.ensureCache.prepare();let $=0;r&&($=oe.getPointer(r));const E=Bc(l),k=oe.ensureFloat64(E),P=$g(n,mi.PE_MGRS_MAX),D=oe.ensureInt32(P),L=oe._pe_geog_to_usng($,n,k,d,y,b,D);if(L)for(let N=0;N<n;N++)x[N]=oe.UTF8ToString(P[N]);return L}function i(r,n,l,d){oe.ensureCache.prepare();let y=0;r&&(y=oe.getPointer(r));const b=l.map(k=>oe.ensureString(k)),x=oe.ensureInt32(b),$=oe.ensureFloat64(new Array(2*n)),E=oe._pe_usng_to_geog(y,n,x,$);return E&&Ku(d,n,$),E}t.geogToUsng=e,t.usngToGeog=i}(b4||(b4={})),function(t){function e(){t.PE_UTM_OPTS_NONE=oe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=oe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=oe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,l,d,y,b){oe.ensureCache.prepare();let x=0;n&&(x=oe.getPointer(n));const $=Bc(d),E=oe.ensureFloat64($),k=$g(l,mi.PE_UTM_MAX),P=oe.ensureInt32(k),D=oe._pe_geog_to_utm(x,l,E,y,P);if(D)for(let L=0;L<l;L++)b[L]=oe.UTF8ToString(k[L]);return D}function r(n,l,d,y,b){oe.ensureCache.prepare();let x=0;n&&(x=oe.getPointer(n));const $=d.map(D=>oe.ensureString(D)),E=oe.ensureInt32($),k=oe.ensureFloat64(new Array(2*l)),P=oe._pe_utm_to_geog(x,l,E,y,k);return P&&Ku(b,l,k),P}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(Aw||(Aw={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=oe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=oe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=oe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=oe.PePCSInfo.prototype.PE_POLE_POINT}function r(n,l=t.PE_PCSINFO_OPTION_DOMAIN){let d=null,y=null;return e.has(n)&&(y=e.get(n),y[l]&&(d=y[l])),d||(d=oe.PePCSInfo.prototype.generate(n,l),y||(y=[],e.set(n,y)),y[l]=d),d}t.init=i,t.generate=r}(kw||(kw={})),function(t){function e(){return oe.PeVersion.prototype.version_string()}t.versionString=e}(w4||(w4={}));const Yie=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f4},get PeDefs(){return mi},get PeFactory(){return y4},get PeGCSExtent(){return HR},get PeGTTransformations(){return g4},get PeGTlistExtended(){return Iw},get PeGTlistExtendedEntry(){return m4},get PeNotationDms(){return v4},get PeNotationMgrs(){return Ew},get PeNotationUsng(){return b4},get PeNotationUtm(){return Aw},get PePCSInfo(){return kw},get PeVersion(){return w4},_init:WR,get _pe(){return oe},isLoaded:P7,isSupported:Jie,load:qR},Symbol.toStringTag,{value:"Module"})),eu=Yt.radius,ro=Yt.eccentricitySquared,Kie={a1:eu*ro,a2:eu*ro*eu*ro,a3:eu*ro*ro/2,a4:eu*ro*eu*ro*2.5,a5:eu*ro+eu*ro*ro/2,a6:1-ro};1/294.9786982,1/298.257222101,Yt.radius,Yt.flattening,vh.radius,vh.flattening,1/192.0430107526882,$l.radius,$l.flattening,1/10.2079945799458,1/43.61604095563141,$l.radius;let Tg=0,C3=class _4{static fromGE(e){const i=new _4;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Tg++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Tg++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Tg++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Tg++}getInverse(){const e=new _4;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Pw=class v1{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new v1;let r="";for(const n of e.steps){const l=C3.fromGE(n);i.steps.push(l),r+=l.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof C3?this.steps.push(i):this.steps.push(new C3({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new v1;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[v1.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const l of this.steps)r+=l.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[v1.cacheKey(e,i)];return n===void 0?null:n}};function C7(t,e,i){if(e==null||i==null||i.vcsWkid||qi(e,i))return null;const r=E0(e)/E0(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>Zie(n,r);case"polyline":case"esriGeometryPolyline":return n=>Qie(n,r);case"polygon":case"esriGeometryPolygon":return n=>Xie(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>ere(n,r);case"extent":case"esriGeometryEnvelope":return n=>tre(n,r);default:return null}}function Zie(t,e){t&&t.z!=null&&(t.z*=e)}function Xie(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function Qie(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function ere(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function tre(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let No=null,Mh=null,dy=null,Zv={};const JR=new R2;function jd(){return!!No&&P7()}function $h(t){return dy==null&&(dy=Promise.all([qR(),le(()=>Promise.resolve().then(()=>h_e),void 0).then(e=>e.g),le(()=>import("./hydrated-d21edcc9.js"),[])])),dy.then(([,e,{hydratedAdapter:i}])=>{ai(t),Mh=i,No=e.default,No._enableProjection(Yie),JR.notify()})}function Nh(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:x4(Mh,t,t[0].spatialReference,e,i,r):x4(Mh,[t],t.spatialReference,e,i,r)[0]}function x4(t,e,i,r,n=null,l=null){if(i==null||r==null)return e;if(Nl(i,r,n))return e.map(d=>QR(d,i,r));if(n==null){const d=Pw.cacheKey(i,r);Zv[d]!==void 0?n=Zv[d]:((n=KR(i,r,void 0))==null&&(n=new Pw),Zv[d]=n)}if(No==null||t==null)throw new h_;return l!=null?No._project(t,e,i,r,n,l):No._project(t,e,i,r,n)}function ire(t,e){const i=YR([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function YR(t,e){if(!jd()){for(const i of t)if(i!=null&&!qi(i.spatialReference,e)&&Ir(i.spatialReference)&&Ir(e)&&!Nl(i.spatialReference,e))return nt(JR),{pending:$h(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:qi(i.spatialReference,e)?i:Ir(i.spatialReference)&&Ir(e)?ZR(i,e):null)}}function KR(t,e,i=null){if(t==null||e==null)return null;if(No==null||Mh==null)throw new h_;const r=No._getTransformation(Mh,t,e,i,i==null?void 0:i.spatialReference);return r!==null?Pw.fromGE(r):null}function rre(t,e,i=null){if(No==null||Mh==null)throw new h_;const r=No._getTransformationBySuitability(Mh,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const l of r)n.push(Pw.fromGE(l));return n}return[]}let h_=class extends se{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var ee;function sre(){No=null,Mh=null,dy=null,Zv={}}(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(ee||(ee={}));const nre={get loadPromise(){return dy}};function ZR(t,e){try{const i=Nh(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=C7(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof h_))throw i;return null}}function Nl(t,e,i){return!i&&(!!qi(t,e)||Ir(t)&&Ir(e)&&!!D7(t,e,j7))}async function XR(t,e,i,r){if(jd())return xT(r);if(Array.isArray(t)){for(const{source:n,dest:l,geographicTransformation:d}of t)if(!Nl(n,l,d))return $h(r)}else if(!Nl(t,e,i))return $h(r);return xT(r)}function ore(t,e){switch(D7(t,e,j7)){case Ut:return"copy3";case nh:return"wgs84ToSphericalECEF";case $d:return"wgs84ToWebMercator";case sh:return"wgs84ToPlateCarree";case ah:return"wgs84ToWGS84ECEF";case cd:return"webMercatorToWGS84";case lj:return"webMercatorToSphericalECEF";case uj:return"webMercatorToWGS84ECEF";case cj:return"webMercatorToPlateCarree";case lh:return"wgs84ECEFToWGS84";case fj:return"wgs84ECEFToSphericalECEF";case yj:return"wgs84ECEFToWebMercator";case oh:return"sphericalECEFToWGS84";case dj:return"sphericalECEFToWebMercator";case E4:return"sphericalMarsPCPFToMars2000";case I4:return"sphericalMoonPCPFToMoon2000";case pj:return"sphericalECEFToWGS84ECEF";case T4:return"mars2000ToSphericalPCPF";case $4:return"moon2000ToSphericalPCPF";default:return null}}function QR(t,e,i){return t?"x"in t?ej(t,e,new lt,i,0):"xmin"in t?sj(t,e,new Nt,i,0):"rings"in t?rj(t,e,new Dl,i,0):"paths"in t?ij(t,e,new Oo,i,0):"points"in t?tj(t,e,new W2,i,0):null:null}function are(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&ej(t,t.spatialReference,e,i,r)!=null}function ej(t,e,i,r,n){St[0]=t.x,St[1]=t.y;const l=t.z;return St[2]=l!==void 0?l:n,Wo(St,e,0,St,r,0,1)?(i.x=St[0],i.y=St[1],i.spatialReference=r,l===void 0?(i.z=void 0,i.hasZ=!1):(i.z=St[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function lre(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&tj(t,t.spatialReference,e,i,r)!=null}function tj(t,e,i,r,n){const{points:l,hasZ:d,hasM:y}=t,b=[],x=l.length,$=[];for(const E of l)$.push(E[0],E[1],d?E[2]:n);if(!Wo($,e,0,$,r,0,x))return null;for(let E=0;E<x;++E){const k=3*E,P=$[k],D=$[k+1];d&&y?b.push([P,D,$[k+2],l[E][3]]):d?b.push([P,D,$[k+2]]):y?b.push([P,D,l[E][2]]):b.push([P,D])}return i.points=b,i.spatialReference=r,i.hasZ=d,i.hasM=y,i}function ure(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&ij(t,t.spatialReference,e,i,r)!=null}function ij(t,e,i,r,n){const{paths:l,hasZ:d,hasM:y}=t,b=[];return oj(l,d??!1,y??!1,e,b,r,n)?(i.paths=b,i.spatialReference=r,i.hasZ=d,i.hasM=y,i):null}function hre({hasZ:t,spatialReference:e,paths:i},r,n=0){const l=ja(e,af),d=Fn[l][ee.WGS84_COMPARABLE_LON_LAT];if(d==null)return!1;const y=t?b=>b:b=>q2(St,b[0],b[1],n);for(const b of i){const x=[];for(const $ of b){const E=[0,0,n];d(y($),0,E,0),x.push(E)}r.push(x)}return!0}function cre({hasZ:t,spatialReference:e,rings:i},r,n=0){const l=ja(e,af),d=Fn[l][ee.WGS84_COMPARABLE_LON_LAT];if(d==null)return!1;const y=t?b=>b:b=>q2(St,b[0],b[1],n);for(const b of i){const x=[];for(const $ of b){const E=[0,0,n];d(y($),0,E,0),x.push(E)}r.push(x)}return!0}function dre(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&rj(t,t.spatialReference,e,i,r)!=null}function rj(t,e,i,r,n){const{rings:l,hasZ:d,hasM:y}=t,b=[];return oj(l,d??!1,y??!1,e,b,r,n)?(i.rings=b,i.spatialReference=r,i.hasZ=d,i.hasM=y,i):null}function pre(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&sj(t,t.spatialReference,e,i,r)!=null}function sj(t,e,i,r,n){const{xmin:l,ymin:d,xmax:y,ymax:b,hasZ:x,hasM:$}=t;return S4(l,d,x?t.zmin:n,e,St,r)?(i.xmin=St[0],i.ymin=St[1],x&&(i.zmin=St[2]),S4(y,b,x?t.zmax:n,e,St,r)?(i.xmax=St[0],i.ymax=St[1],x&&(i.zmax=St[2]),$&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null):null}function fre(t,e,i){if(e==null||i==null)return null;const r=new lt({spatialReference:i});return Wo(t,e,0,St,i,0,1)?(r.x=St[0],r.y=St[1],r.z=St[2],r):null}function yre(t,e,i){return Wo(t,e,0,St,i.spatialReference,0,1)?(i.x=St[0],i.y=St[1],i.z=St[2],i):null}function mre(t,e,i,r=0){St[0]=t.x,St[1]=t.y;const n=t.z;return St[2]=n!==void 0?n:r,Wo(St,t.spatialReference,0,e,i,0,1)}function S4(t,e,i,r,n,l){return oi[0]=t,oi[1]=e,oi[2]=i,Wo(oi,r,0,n,l,0,1)}function M4(t,e,i,r){return!(e==null||r==null||t.length<2)&&(t.length===2&&(oi[0]=t[0],oi[1]=t[1],oi[2]=0,t=oi),Wo(t,e,0,i,r,0,1))}function gre(t,e){St[0]=t.x,St[1]=t.y;const i=t.z;return St[2]=i!==void 0?i:0,nj(St,t.spatialReference,e)}function nj(t,e,i){return vre(t,e,i)}function vre(t,e,i){if(e==null)return!1;const r=ja(e,af),n=Fn[r][ee.WGS84_COMPARABLE_LON_LAT];return n!=null&&(n(t,0,oi,0),i!==oi&&(i[0]=oi[0],i[1]=oi[1],i.length>2&&(i[2]=oi[2])),!0)}function Wo(t,e,i,r,n,l,d=1){const y=D7(e,n,j7);if(y==null)return!1;if(y===Ut){if(t===r&&i===l)return!0;const x=i+3*d;for(let $=i,E=l;$<x;$++,E++)r[E]=t[$];return!0}const b=i+3*d;for(let x=i,$=l;x<b;x+=3,$+=3)y(t,x,r,$);return!0}function bre(t,e,i,r,n){fw(St,t),UO(Ig,t,e),M4(St,i,St,n),M4(Ig,i,Ig,n),GM(r,Ig,St),yw(r,r)}function oj(t,e,i,r,n,l,d=0){const y=new Array;for(const x of t)for(const $ of x)y.push($[0],$[1],e?$[2]:d);if(!Wo(y,r,0,y,l,0,y.length/3))return!1;let b=0;n.length=0;for(const x of t){const $=new Array;for(const E of x)e&&i?$.push([y[b++],y[b++],y[b++],E[3]]):e?$.push([y[b++],y[b++],y[b++]]):i?($.push([y[b++],y[b++],E[2]]),b++):($.push([y[b++],y[b++]]),b++);n.push($)}return!0}function wre(t,e,i,r){if(e==null||r==null)return!1;const n=mj(e,r,Cre);if(n.projector===Ut)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],!0;if(n.projector==null)return!1;const{source:l,dest:d}=n;if(d.spatialReferenceId===ee.WEB_MERCATOR){const y=Fn[l.spatialReferenceId][ee.WGS84];return y!=null&&(y(t,0,Io,0),$d(Io,0,i,0),i[3]=n8(Io[1],t[2],t[3],Yt.radius),!0)}if(l.spatialReferenceId!==ee.WGS84&&l.spatialReferenceId!==ee.CGCS2000||d.spatialReferenceId!==ee.PLATE_CARREE){n.projector(t,0,i,0);const y=l.metersPerUnit??1,b=d.metersPerUnit??1;i[3]=t[3]*y/b}else{const y=Fn[l.spatialReferenceId][ee.SPHERICAL_ECEF],b=Fn[ee.SPHERICAL_ECEF][ee.PLATE_CARREE];let x=t[3];y!=null&&b!=null&&(x=n8(t[1],t[2],t[3],Yt.radius)),n.projector(t,0,i,0),i[3]=x}return!0}function n8(t,e,i,r){const n=r+e;if(n<r/2||i>n)return Number.MAX_VALUE;const l=Math.abs(Do*t)+Math.asin(i/n);return l>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(l)}function _re(t,e,i,r){return t!=null&&(qi(e,r)?(HM(i,t),!0):(oi[0]=t[0],oi[1]=t[1],oi[2]=0,!!Wo(oi,e,0,oi,r,0,1)&&(i[0]=oi[0],i[1]=oi[1],oi[0]=t[2],oi[1]=t[3],oi[2]=0,!!Wo(oi,e,0,oi,r,0,1)&&(i[2]=oi[0],i[3]=oi[1],!0))))}function xre(t,e,i,r){if(e==null||r==null)return!1;const n=ja(e,af),l=ja(r,gj);if(n===l&&n!==ee.UNKNOWN||qi(e,r))return i[0]=1,i[1]=1,i[2]=1,!0;if(n===ee.SPHERICAL_ECEF){const d=U2(t),y=d/Math.sqrt(t[0]*t[0]+t[1]*t[1]),b=d/Yt.radius;if(l===ee.WEB_MERCATOR)return i[0]=y*b,i[1]=y*b,i[2]=1,!0;if(l===ee.WGS84||l===ee.CGCS2000){const x=py;return i[0]=x*y*b,i[1]=x*b,i[2]=1,!0}}else if(n===ee.PLATE_CARREE){if(l===ee.WGS84||l===ee.CGCS2000)return i[0]=py,i[1]=py,i[2]=1,!0;if(l===ee.WEB_MERCATOR){const d=t[1]/Yt.radius;return i[0]=1,i[1]=1/Math.cos(d),i[2]=1,!0}}return!1}function Sre(t,e,i,r){if(t==null||r==null)return!1;const n=ja(t,af),l=ja(r,gj);if(n===l&&!o8(l)&&(n!==ee.UNKNOWN||qi(t,r)))return BR(i,e),!0;if(o8(l)){const d=Fn[n][ee.LON_LAT],y=Fn[ee.LON_LAT][l];return d!=null&&y!=null&&(d(e,0,Io,0),y(Io,0,tu,0),O7(Do*Io[0],Do*Io[1],i),i[12]=tu[0],i[13]=tu[1],i[14]=tu[2],!0)}if((l===ee.WEB_MERCATOR||l===ee.PLATE_CARREE)&&(n===ee.WGS84||n===ee.CGCS2000&&l===ee.PLATE_CARREE||n===ee.SPHERICAL_ECEF||n===ee.WEB_MERCATOR)){const d=Fn[n][ee.LON_LAT],y=Fn[ee.LON_LAT][l];return d!=null&&y!=null&&(d(e,0,Io,0),y(Io,0,tu,0),n===ee.SPHERICAL_ECEF?aj(Do*Io[0],Do*Io[1],i):Cm(i),i[12]=tu[0],i[13]=tu[1],i[14]=tu[2],!0)}return!1}function o8(t){return t===ee.SPHERICAL_ECEF||t===ee.SPHERICAL_MARS_PCPF||t===ee.SPHERICAL_MOON_PCPF}function O7(t,e,i){const r=Math.sin(t),n=Math.cos(t),l=Math.sin(e),d=Math.cos(e),y=i;return y[0]=-r,y[4]=-l*n,y[8]=d*n,y[12]=0,y[1]=n,y[5]=-l*r,y[9]=d*r,y[13]=0,y[2]=0,y[6]=d,y[10]=l,y[14]=0,y[3]=0,y[7]=0,y[11]=0,y[15]=1,y}function aj(t,e,i){return O7(t,e,i),Gl(i,i),i}function ja(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Bl(t,1)),t.wkt===TW.wkt?e.spatialReferenceId=ee.SPHERICAL_ECEF:qy(t)?e.spatialReferenceId=ee.WGS84:wd(t)?e.spatialReferenceId=ee.WEB_MERCATOR:_W(t)?e.spatialReferenceId=ee.PLATE_CARREE:t.wkt===IW.wkt?e.spatialReferenceId=ee.WGS84_ECEF:t.wkid===bd.CGCS2000?e.spatialReferenceId=ee.CGCS2000:t.wkt===lO.wkt?e.spatialReferenceId=ee.SPHERICAL_MARS_PCPF:t.wkt===uO.wkt?e.spatialReferenceId=ee.SPHERICAL_MOON_PCPF:PM(t)?e.spatialReferenceId=ee.GCSMARS2000:OM(t)?e.spatialReferenceId=ee.GCSMOON2000:e.spatialReferenceId=ee.UNKNOWN):ee.UNKNOWN}function Ut(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function cd(t,e,i,r){i[r++]=j0*(t[e++]/Yt.radius),i[r++]=j0*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Yt.radius))),i[r]=t[e]}function lj(t,e,i,r){cd(t,e,i,r),nh(i,r,i,r)}function uj(t,e,i,r){cd(t,e,i,r),ah(i,r,i,r)}function hj(t,e,i,r,n){const l=.4999999*Math.PI,d=Ds(Do*t[e+1],-l,l),y=Math.sin(d);i[r++]=Do*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+y)/(1-y)),i[r]=t[e+2]}function $d(t,e,i,r){hj(t,e,i,r,Yt)}const a8=Yt.radius*Math.PI/180,py=180/(Yt.radius*Math.PI);function sh(t,e,i,r){i[r]=t[e]*a8,i[r+1]=t[e+1]*a8,i[r+2]=t[e+2]}function Qc(t,e,i,r){i[r]=t[e]*py,i[r+1]=t[e+1]*py,i[r+2]=t[e+2]}function cj(t,e,i,r){cd(t,e,i,r),sh(i,r,i,r)}function Mre(t,e,i,r){lh(t,e,i,r),sh(i,r,i,r)}function $re(t,e,i,r){oh(t,e,i,r),sh(i,r,i,r)}function Tre(t,e,i,r){Qc(t,e,i,r),nh(i,r,i,r)}function Ire(t,e,i,r){Qc(t,e,i,r),$d(i,r,i,r)}function Ere(t,e,i,r){Qc(t,e,i,r),ah(i,r,i,r)}function Are(t){if(t==null)return!1;const e=ja(t,af);return!!Fn[e][ee.WGS84_COMPARABLE_LON_LAT]}function kre(t,e,i,r){const n=Math.cos(i);t[0]=Math.cos(e)*n*r,t[1]=Math.sin(e)*n*r,t[2]=Math.sin(i)*r}function L7(t,e,i,r,n){const l=n+t[e+2],d=Do*t[e+1],y=Do*t[e],b=Math.cos(d);i[r++]=Math.cos(y)*b*l,i[r++]=Math.sin(y)*b*l,i[r]=Math.sin(d)*l}function $4(t,e,i,r){L7(t,e,i,r,vh.radius)}function T4(t,e,i,r){L7(t,e,i,r,$l.radius)}function nh(t,e,i,r){L7(t,e,i,r,Yt.radius)}function c_(t,e,i,r,n){const l=t[e],d=t[e+1],y=t[e+2],b=Math.sqrt(l*l+d*d+y*y),x=aL(y/(b===0?1:b)),$=Math.atan2(d,l);i[r++]=j0*$,i[r++]=j0*x,i[r]=b-n}function I4(t,e,i,r){c_(t,e,i,r,vh.radius)}function E4(t,e,i,r){c_(t,e,i,r,$l.radius)}function oh(t,e,i,r){c_(t,e,i,r,Yt.radius)}function dj(t,e,i,r){oh(t,e,i,r),$d(i,r,i,r)}function pj(t,e,i,r){oh(t,e,i,r),ah(i,r,i,r)}function Pre(t,e,i,r,n){const l=Do*t[e],d=Do*t[e+1],y=t[e+2],b=Math.sin(d),x=Math.cos(d),$=n.radius/Math.sqrt(1-n.eccentricitySquared*b*b);i[r++]=($+y)*x*Math.cos(l),i[r++]=($+y)*x*Math.sin(l),i[r++]=($*(1-n.eccentricitySquared)+y)*b}function ah(t,e,i,r){Pre(t,e,i,r,Yt)}function lh(t,e,i,r){const n=Kie,l=t[e],d=t[e+1],y=t[e+2];let b,x,$,E,k,P,D,L,N,B,W,H,Y,ie,ne,he,de,be,we,$e,ke;b=Math.abs(y),x=l*l+d*d,$=Math.sqrt(x),E=x+y*y,k=Math.sqrt(E),$e=Math.atan2(d,l),P=y*y/E,D=x/E,ie=n.a2/k,ne=n.a3-n.a4/k,D>.3?(L=b/k*(1+D*(n.a1+ie+P*ne)/k),we=Math.asin(L),B=L*L,N=Math.sqrt(1-B)):(N=$/k*(1-P*(n.a5-ie-D*ne)/k),we=Math.acos(N),B=1-N*N,L=Math.sqrt(B)),W=1-Yt.eccentricitySquared*B,H=Yt.radius/Math.sqrt(W),Y=n.a6*H,ie=$-H*N,ne=b-Y*L,de=N*ie+L*ne,he=N*ne-L*ie,be=he/(Y/W+de),we+=be,ke=de+he*be/2,y<0&&(we=-we),i[r++]=j0*$e,i[r++]=j0*we,i[r]=ke}function fj(t,e,i,r){lh(t,e,i,r),nh(i,r,i,r)}function yj(t,e,i,r){lh(t,e,i,r),$d(i,r,i,r)}const Fn={[ee.WGS84]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Ut,[ee.WGS84_COMPARABLE_LON_LAT]:Ut,[ee.SPHERICAL_ECEF]:nh,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:$d,[ee.PLATE_CARREE]:sh,[ee.WGS84]:Ut,[ee.WGS84_ECEF]:ah},[ee.CGCS2000]:{[ee.CGCS2000]:Ut,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Ut,[ee.WGS84_COMPARABLE_LON_LAT]:Ut,[ee.SPHERICAL_ECEF]:nh,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:sh,[ee.WGS84]:null,[ee.WGS84_ECEF]:ah},[ee.GCSMARS2000]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:Ut,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Ut,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:T4,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.GCSMOON2000]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:Ut,[ee.LON_LAT]:Ut,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:$4,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.WEB_MERCATOR]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:cd,[ee.WGS84_COMPARABLE_LON_LAT]:cd,[ee.SPHERICAL_ECEF]:lj,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Ut,[ee.PLATE_CARREE]:cj,[ee.WGS84]:cd,[ee.WGS84_ECEF]:uj},[ee.WGS84_ECEF]:{[ee.CGCS2000]:lh,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:lh,[ee.WGS84_COMPARABLE_LON_LAT]:lh,[ee.SPHERICAL_ECEF]:fj,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:yj,[ee.PLATE_CARREE]:Mre,[ee.WGS84]:lh,[ee.WGS84_ECEF]:Ut},[ee.SPHERICAL_ECEF]:{[ee.CGCS2000]:oh,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:oh,[ee.WGS84_COMPARABLE_LON_LAT]:oh,[ee.SPHERICAL_ECEF]:Ut,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:dj,[ee.PLATE_CARREE]:$re,[ee.WGS84]:oh,[ee.WGS84_ECEF]:pj},[ee.SPHERICAL_MARS_PCPF]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:E4,[ee.GCSMOON2000]:null,[ee.LON_LAT]:E4,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:Ut,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.SPHERICAL_MOON_PCPF]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:I4,[ee.LON_LAT]:I4,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:Ut,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.UNKNOWN]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:null,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:Ut,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.LON_LAT]:{[ee.CGCS2000]:Ut,[ee.GCSMARS2000]:Ut,[ee.GCSMOON2000]:Ut,[ee.LON_LAT]:Ut,[ee.WGS84_COMPARABLE_LON_LAT]:Ut,[ee.SPHERICAL_ECEF]:nh,[ee.SPHERICAL_MARS_PCPF]:T4,[ee.SPHERICAL_MOON_PCPF]:$4,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:$d,[ee.PLATE_CARREE]:sh,[ee.WGS84]:Ut,[ee.WGS84_ECEF]:ah},[ee.WGS84_COMPARABLE_LON_LAT]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Ut,[ee.WGS84_COMPARABLE_LON_LAT]:Ut,[ee.SPHERICAL_ECEF]:nh,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:sh,[ee.WGS84]:Ut,[ee.WGS84_ECEF]:ah},[ee.PLATE_CARREE]:{[ee.CGCS2000]:Qc,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Qc,[ee.WGS84_COMPARABLE_LON_LAT]:Qc,[ee.SPHERICAL_ECEF]:Tre,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Ire,[ee.PLATE_CARREE]:Ut,[ee.WGS84]:Qc,[ee.WGS84_ECEF]:Ere}};function D7(t,e,i=R7()){return t==null||e==null?null:mj(t,e,i).projector}function mj(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=ja(t,i.source),n=ja(e,i.dest);return r===ee.UNKNOWN&&n===ee.UNKNOWN?qi(t,e)?i.projector=Ut:i.projector=null:i.projector=Fn[r][n],i}function R7(){return{source:{spatialReference:null,spatialReferenceId:ee.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ee.UNKNOWN,metersPerUnit:1},projector:Ut}}const af={spatialReference:null,spatialReferenceId:ee.UNKNOWN},gj={spatialReference:null,spatialReferenceId:ee.UNKNOWN},j7=R7(),Cre=R7(),Do=CK(1),j0=oL(1),oi=Ko(),Io=Ko(),tu=Ko(),St=Ko(),Ig=Ko(),i9e=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:Are,canProjectWithoutEngine:Nl,computeENUToSphericalPCPFLocalRotation:O7,computeSphericalPCPFToENULocalRotation:aj,computeTranslationToOriginAndRotation:Sre,getProjectorName:ore,getTransformation:KR,getTransformations:rre,initializeProjection:XR,isLoaded:jd,load:$h,localLinearScaleFactors:xre,lonLatToSphericalPCPF:kre,lonLatToWebMercatorComparable:hj,project:Nh,projectBoundingRect:_re,projectBoundingSphere:wre,projectBuffer:Wo,projectDirection:bre,projectExtent:pre,projectMany:x4,projectMultipoint:lre,projectOrLoad:ire,projectOrLoadMany:YR,projectPoint:are,projectPointToVector:mre,projectPointToWGS84ComparableLonLat:gre,projectPolygon:dre,projectPolygonToWGS84ComparableLonLat:cre,projectPolyline:ure,projectPolylineToWGS84ComparableLonLat:hre,projectVectorToDehydratedPoint:yre,projectVectorToPoint:fre,projectVectorToVector:M4,projectVectorToWGS84ComparableLonLat:nj,projectWithoutEngine:QR,projectXYZToVector:S4,sphericalPCPFtoLonLatElevation:c_,test:nre,tryProjectWithZConversion:ZR,unload:sre},Symbol.toStringTag,{value:"Module"}));var A4;let ya=A4=class extends ve{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new A4({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ya.prototype,"cols",void 0),g([S({type:Ct,json:{write:!0}})],ya.prototype,"level",void 0),g([S({type:String,json:{write:!0}})],ya.prototype,"levelValue",void 0),g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ya.prototype,"origin",void 0),g([S({type:Number,json:{write:!0}})],ya.prototype,"resolution",void 0),g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ya.prototype,"rows",void 0),g([S({type:Number,json:{write:!0}})],ya.prototype,"scale",void 0),ya=A4=g([J("esri.layers.support.LOD")],ya);const zu=ya;let Ore=class{constructor(e,i,r,n,l=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=l}};var xu;const l8=new _t({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Lr=xu=class extends ve{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:n=dt.WebMercator,numLODs:l=24}=t;if(!Ir(n)){const E=[];if(i)for(let k=0;k<i.length;k++){const P=i[k];E.push(new zu({level:k,scale:P,resolution:P}))}else{let k=5e-4;for(let P=l-1;P>=0;P--)E.unshift(new zu({level:P,scale:k,resolution:k})),k*=2}return new xu({dpi:96,lods:E,origin:new lt(0,0,n),size:[r,r],spatialReference:n})}const d=Fo(n),y=t.origin?new lt({x:t.origin.x,y:t.origin.y,spatialReference:n}):new lt(d?{x:d.origin[0],y:d.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),b=96,x=1/(Bl(n)*39.37*b),$=[];if(i)for(let E=0;E<i.length;E++){const k=i[E],P=k*x;$.push(new zu({level:E,scale:k,resolution:P}))}else{let E=aO(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const k=Math.ceil(l/e);$.push(new zu({level:0,scale:E,resolution:E*x}));for(let P=1;P<k;P++){const D=E/2**e,L=D*x;$.push(new zu({level:P,scale:D,resolution:L})),E=D}}return new xu({dpi:b,lods:$,origin:y,size:[r,r],spatialReference:n})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=Fo(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return lt.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],n=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(l=>{r.push(l.scale),e=l.scale>e?l.scale:e,i=l.scale<i?l.scale:i,n[l.level]=l})),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const n=e[r],l=e[r+1];if(n<=t)return r;if(l===t)return r+1;if(n>t&&l<t)return r+Math.log(n/t)/Math.log(n/l)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const n=this.lodAt(t);if(!n)return null;let l,d;if(typeof e=="number")l=e,d=i;else if(qi(e.spatialReference,this.spatialReference))l=e.x,d=e.y,r=i;else{const x=V2(e,this.spatialReference);if(x==null)return null;l=x.x,d=x.y,r=i}const y=n.resolution*this.size[0],b=n.resolution*this.size[1];return r||(r=new Ore(null,0,0,0,La())),r.level=t,r.row=Math.floor((this.origin.y-d)/b+.001),r.col=Math.floor((l-this.origin.x)/y+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=xu.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===xu.ExtrapolateOptions.POWER_OF_TWO){const d=this.lods[this.lods.length-1];d.level<t.level&&(i=d)}if(!i)return;const r=t.level-i.level,n=i.resolution*this.size[0]/2**r,l=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=La()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*l,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+l}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],l=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*l,t[2]=t[0]+n,t[3]=t[1]+l,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return xu.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const l=this.lods[n],d=l.resolution*e;i.push(new zu({level:l.level,scale:l.scale,resolution:d}))}return new xu({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};g([S({type:Number,json:{write:!0}})],Lr.prototype,"compressionQuality",void 0),g([S({type:Number,json:{write:!0}})],Lr.prototype,"dpi",void 0),g([S({type:String,json:{read:l8.read,write:l8.write,origins:{"web-scene":{read:!1,write:!1}}}})],Lr.prototype,"format",void 0),g([S({readOnly:!0})],Lr.prototype,"isWrappable",null),g([S({type:lt,json:{write:!0}})],Lr.prototype,"origin",void 0),g([Se("origin")],Lr.prototype,"readOrigin",null),g([S({type:[zu],value:null,json:{write:!0}})],Lr.prototype,"lods",null),g([S({readOnly:!0})],Lr.prototype,"scales",void 0),g([S({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Lr.prototype,"size",void 0),g([Se("size",["rows","cols"])],Lr.prototype,"readSize",null),g([Ae("size",{cols:{type:Ct},rows:{type:Ct}})],Lr.prototype,"writeSize",null),g([S({type:dt,json:{write:!0}})],Lr.prototype,"spatialReference",void 0),Lr=xu=g([J("esri.layers.support.TileInfo")],Lr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Lr||(Lr={}));const Lre=Lr,Xv={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},O3={xsmall:544,small:768,medium:992,large:1200};function Dre(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function L3(t,e){return e?Xv[t].valueToClassName[e].split(" "):[]}const Rre=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Fs,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=O3}initialize(){this._breakpointsHandles.add(me(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),st))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=ei(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=Dre(i);if(!r){const n=JSON.stringify(O3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:O3,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=ms.acquire(),r=ms.acquire();let n,l=!1;for(n in Xv){const d=this[n],y=Xv[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});d!==y&&(l=!0,this[n]=y,L3(n,d).forEach(b=>r.push(b)),L3(n,y).forEach(b=>i.push(b)))}l&&(this._applyClassNameChanges(i,r),ms.release(i),ms.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(l=>n.classList.remove(l)),i.forEach(l=>n.classList.add(l)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in Xv)L3(r,this[r]).forEach(n=>i.classList.remove(n))}};return g([S()],e.prototype,"breakpoints",null),g([S()],e.prototype,"orientation",void 0),g([S()],e.prototype,"widthBreakpoint",void 0),g([S()],e.prototype,"heightBreakpoint",void 0),e=g([J("esri.views.BreakpointsOwner")],e),e};function F7(t){return typeof t=="string"?document.getElementById(t):t??null}function vj(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function u8(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function h8(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let c0=class extends Be{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Fs,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,r={}){return this._installWatch(e,i,r,me)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Hn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const l=++this._handleId;return this._handles.add([Rs(e,"after-changes",this._createSyncUpdatingCallback(),Rd),Rs(e,"change",i,{onListenerAdd:r?d=>i({added:d.toArray(),removed:[]}):void 0,onListenerRemove:n?d=>i({added:[],removed:d.toArray()}):void 0})],l),Cl(()=>this._handles.remove(l))}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(Eg)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this._handles.remove(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,r={},n){const l=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,l);const d=n(e,i,r);return this._handles.add(d,l),Cl(()=>this._handles.remove(l))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=me(e,r,{sync:!0,equals:()=>!1});return this._handles.add(n,i),n}_createSyncUpdatingCallback(){return()=>{this._handles.remove(Eg),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(H0(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(Eg))}),Eg)}}};g([S({readOnly:!0})],c0.prototype,"updating",void 0),c0=g([J("esri.core.support.WatchUpdatingTracking")],c0);const Eg=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var jre=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Gc={exports:{}},Pi={},im={exports:{}},Fd={};function bj(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function Fre(t,e,i){}function Nre(t,e,i){}var zre=/javascript\s*\:/img;function Vre(t,e){return zre.test(e)?"":e}Fd.whiteList=bj();Fd.getDefaultWhiteList=bj;Fd.onAttr=Fre;Fd.onIgnoreAttr=Nre;Fd.safeAttrValue=Vre;var Bre={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Pf=Bre;function Gre(t,e){t=Pf.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,l=0,d="";function y(){if(!r){var $=Pf.trim(t.slice(n,l)),E=$.indexOf(":");if(E!==-1){var k=Pf.trim($.slice(0,E)),P=Pf.trim($.slice(E+1));if(k){var D=e(n,d.length,k,P,$);D&&(d+=D+"; ")}}}n=l+1}for(;l<i;l++){var b=t[l];if(b==="/"&&t[l+1]==="*"){var x=t.indexOf("*/",l+2);if(x===-1)break;l=x+1,n=l+1,r=!1}else b==="("?r=!0:b===")"?r=!1:b===";"?r||y():b===`
`&&y()}return Pf.trim(d)}var Ure=Gre,Ag=Fd,qre=Ure;function c8(t){return t==null}function Hre(t){var e={};for(var i in t)e[i]=t[i];return e}function wj(t){t=Hre(t||{}),t.whiteList=t.whiteList||Ag.whiteList,t.onAttr=t.onAttr||Ag.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Ag.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Ag.safeAttrValue,this.options=t}wj.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,l=i.onIgnoreAttr,d=i.safeAttrValue,y=qre(t,function(b,x,$,E,k){var P=r[$],D=!1;if(P===!0?D=P:typeof P=="function"?D=P(E):P instanceof RegExp&&(D=P.test(E)),D!==!0&&(D=!1),E=d($,E),!!E){var L={position:x,sourcePosition:b,source:k,isWhite:D};if(D){var N=n($,E,L);return c8(N)?$+":"+E:N}else{var N=l($,E,L);if(!c8(N))return N}}});return y};var Wre=wj;(function(t,e){var i=Fd,r=Wre;function n(d,y){var b=new r(y);return b.process(d)}e=t.exports=n,e.FilterCSS=r;for(var l in i)e[l]=i[l]})(im,im.exports);var N7={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},Jre=im.exports.FilterCSS,Yre=im.exports.getDefaultWhiteList,Cw=N7;function _j(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var xj=new Jre;function Kre(t,e,i){}function Zre(t,e,i){}function Xre(t,e,i){}function Qre(t,e,i){}function Sj(t){return t.replace(tse,"&lt;").replace(ise,"&gt;")}function ese(t,e,i,r){if(i=Aj(i),e==="href"||e==="src"){if(i=Cw.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(kg.lastIndex=0,kg.test(i))return""}else if(e==="style"){if(d8.lastIndex=0,d8.test(i)||(p8.lastIndex=0,p8.test(i)&&(kg.lastIndex=0,kg.test(i))))return"";r!==!1&&(r=r||xj,i=r.process(i))}return i=kj(i),i}var tse=/</g,ise=/>/g,rse=/"/g,sse=/&quot;/g,nse=/&#([a-zA-Z0-9]*);?/gim,ose=/&colon;?/gim,ase=/&newline;?/gim,kg=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,d8=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,p8=/u\s*r\s*l\s*\(.*/gi;function Mj(t){return t.replace(rse,"&quot;")}function $j(t){return t.replace(sse,'"')}function Tj(t){return t.replace(nse,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Ij(t){return t.replace(ose,":").replace(ase," ")}function Ej(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return Cw.trim(e)}function Aj(t){return t=$j(t),t=Tj(t),t=Ij(t),t=Ej(t),t}function kj(t){return t=Mj(t),t=Sj(t),t}function lse(){return""}function use(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(d){return i?!0:Cw.indexOf(t,d)!==-1}var n=[],l=!1;return{onIgnoreTag:function(d,y,b){if(r(d))if(b.isClosing){var x="[/removed]",$=b.position+x.length;return n.push([l!==!1?l:b.position,$]),l=!1,x}else return l||(l=b.position),"[removed]";else return e(d,y,b)},remove:function(d){var y="",b=0;return Cw.forEach(n,function(x){y+=d.slice(b,x[0]),b=x[1]}),y+=d.slice(b),y}}}function hse(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function cse(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Pi.whiteList=_j();Pi.getDefaultWhiteList=_j;Pi.onTag=Kre;Pi.onIgnoreTag=Zre;Pi.onTagAttr=Xre;Pi.onIgnoreTagAttr=Qre;Pi.safeAttrValue=ese;Pi.escapeHtml=Sj;Pi.escapeQuote=Mj;Pi.unescapeQuote=$j;Pi.escapeHtmlEntities=Tj;Pi.escapeDangerHtml5Entities=Ij;Pi.clearNonPrintableCharacter=Ej;Pi.friendlyAttrValue=Aj;Pi.escapeAttrValue=kj;Pi.onIgnoreTagStripAll=lse;Pi.StripTagBody=use;Pi.stripCommentTag=hse;Pi.stripBlankChar=cse;Pi.cssFilter=xj;Pi.getDefaultCSSWhiteList=Yre;var d_={},Vu=N7;function dse(t){var e=Vu.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Vu.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function pse(t){return t.slice(0,2)==="</"}function fse(t,e,i){var r="",n=0,l=!1,d=!1,y=0,b=t.length,x="",$="";e:for(y=0;y<b;y++){var E=t.charAt(y);if(l===!1){if(E==="<"){l=y;continue}}else if(d===!1){if(E==="<"){r+=i(t.slice(n,y)),l=y,n=y;continue}if(E===">"){r+=i(t.slice(n,l)),$=t.slice(l,y+1),x=dse($),r+=e(l,r.length,x,$,pse($)),n=y+1,l=!1;continue}if(E==='"'||E==="'")for(var k=1,P=t.charAt(y-k);P.trim()===""||P==="=";){if(P==="="){d=E;continue e}P=t.charAt(y-++k)}}else if(E===d){d=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var yse=/[^a-zA-Z0-9\\_:.-]/gim;function mse(t,e){var i=0,r=0,n=[],l=!1,d=t.length;function y(k,P){if(k=Vu.trim(k),k=k.replace(yse,"").toLowerCase(),!(k.length<1)){var D=e(k,P||"");D&&n.push(D)}}for(var b=0;b<d;b++){var x=t.charAt(b),$,E;if(l===!1&&x==="="){l=t.slice(i,b),i=b+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:vse(t,b+1);continue}if(l!==!1&&b===r){if(E=t.indexOf(x,b+1),E===-1)break;$=Vu.trim(t.slice(r+1,E)),y(l,$),l=!1,b=E,i=b+1;continue}if(/\s|\n|\t/.test(x))if(t=t.replace(/\s|\n|\t/g," "),l===!1)if(E=gse(t,b),E===-1){$=Vu.trim(t.slice(i,b)),y($),l=!1,i=b+1;continue}else{b=E-1;continue}else if(E=bse(t,b-1),E===-1){$=Vu.trim(t.slice(i,b)),$=f8($),y(l,$),l=!1,i=b+1;continue}else continue}return i<t.length&&(l===!1?y(t.slice(i)):y(l,f8(Vu.trim(t.slice(i))))),Vu.trim(n.join(" "))}function gse(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function vse(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function bse(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function wse(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function f8(t){return wse(t)?t.substr(1,t.length-2):t}d_.parseTag=fse;d_.parseAttr=mse;var _se=im.exports.FilterCSS,Eo=Pi,Pj=d_,xse=Pj.parseTag,Sse=Pj.parseAttr,Qv=N7;function Pg(t){return t==null}function Mse(t){var e=Qv.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Qv.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Qv.trim(t.slice(0,-1))),{html:t,closing:i}}function $se(t){var e={};for(var i in t)e[i]=t[i];return e}function Tse(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Cj(t){t=$se(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Eo.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Tse(t.whiteList||t.allowList):t.whiteList=Eo.whiteList,t.onTag=t.onTag||Eo.onTag,t.onTagAttr=t.onTagAttr||Eo.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Eo.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Eo.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Eo.safeAttrValue,t.escapeHtml=t.escapeHtml||Eo.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new _se(t.css))}Cj.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,l=i.onIgnoreTag,d=i.onTagAttr,y=i.onIgnoreTagAttr,b=i.safeAttrValue,x=i.escapeHtml,$=e.cssFilter;i.stripBlankChar&&(t=Eo.stripBlankChar(t)),i.allowCommentTag||(t=Eo.stripCommentTag(t));var E=!1;i.stripIgnoreTagBody&&(E=Eo.StripTagBody(i.stripIgnoreTagBody,l),l=E.onIgnoreTag);var k=xse(t,function(P,D,L,N,B){var W={sourcePosition:P,position:D,isClosing:B,isWhite:Object.prototype.hasOwnProperty.call(r,L)},H=n(L,N,W);if(!Pg(H))return H;if(W.isWhite){if(W.isClosing)return"</"+L+">";var Y=Mse(N),ie=r[L],ne=Sse(Y.html,function(he,de){var be=Qv.indexOf(ie,he)!==-1,we=d(L,he,de,be);return Pg(we)?be?(de=b(L,he,de,$),de?he+'="'+de+'"':he):(we=y(L,he,de,be),Pg(we)?void 0:we):we});return N="<"+L,ne&&(N+=" "+ne),Y.closing&&(N+=" /"),N+=">",N}else return H=l(L,N,W),Pg(H)?x(N):H},x);return E&&(k=E.remove(k)),k};var Ise=Cj;(function(t,e){var i=Pi,r=d_,n=Ise;function l(y,b){var x=new n(b);return x.process(y)}e=t.exports=l,e.filterXSS=l,e.FilterXSS=n,function(){for(var y in i)e[y]=i[y];for(var b in r)e[b]=r[b]}();function d(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}d()&&(self.filterXSS=t.exports)})(Gc,Gc.exports);var Ese=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(l,d,y,b){return l==="a"&&d==="href"||(l==="img"||l==="source")&&d==="src"?r.sanitizeUrl(y):Gc.exports.safeAttrValue(l,d,y,b)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(l){l==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[l]=e[l]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new Gc.exports.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,l=this._trim(e.substring(0,e.indexOf(":"))),d=e==="/",y=/^#/.test(e),b=l&&this.allowedProtocols.indexOf(l.toLowerCase())>-1;return d||y||b?Gc.exports.escapeAttrValue(e):!l&&!n?Gc.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):Gc.exports.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,l=void 0;if(Array.isArray(e))l=e.reduce(function(y,b){var x=r.validate(b,i);return x.isValid?y.concat([b]):(n=!0,y.concat([x.sanitized]))},[]);else if(jre(e)){var d=Object.keys(e);l=d.reduce(function(y,b){var x=e[b],$=r.validate(x,i);return $.isValid?y[b]=x:(n=!0,y[b]=$.sanitized),y},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?l:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const p_=new Map;function Oj(){p_.clear()}function Ase(t){return p_.get(t)}function kse(t,e){p_.set(t,e)}function D3(t){p_.delete(t)}var Td,F0,Pse=function(t){if("WebkitTransition"in t.style)Td="webkitTransitionEnd",F0="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");Td="transitionend",F0="animationend"}},Lj=function(t){Td||Pse(t)},Cse=function(t,e){return e===void 0&&(e=t+"-active"),function(i){Lj(i);var r=!1,n=function(l){r||(r=!0,i.removeEventListener(Td,n),i.removeEventListener(F0,n),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(Td,n),i.addEventListener(F0,n),requestAnimationFrame(function(){i.classList.add(e)})}},Ose=function(t,e){return e===void 0&&(e=t+"-active"),function(i,r){Lj(i);var n=!1,l=function(d){n||(n=!0,i.removeEventListener(Td,l),i.removeEventListener(F0,l),r())};i.classList.add(t),i.addEventListener(Td,l),i.addEventListener(F0,l),requestAnimationFrame(function(){i.classList.add(e)})}};const Lse=ge.getLogger("esri.widgets.support.widgetUtils");function Dj(t){const e=ms.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],l=typeof n;if(l==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(l==="object")for(const d in n)n[d]&&e.push(d)}const i=e.join(" ");return ms.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;Oj();for(const l of r)(n=t.get(l.target))==null||n(l)}),i=(r,n,l)=>(t.has(r)&&Lse.error("Already observing element",r),t.set(r,n),e.observe(r,l),Cl(()=>{e.unobserve(r),t.delete(r)}));return(r,n,l)=>{let d=null;return me(()=>typeof r=="function"?r():r,y=>{d==null||d.remove(),y&&(d=i(y,n,l))},vl)}})();function Th(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function y8(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Ow(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Dse(t,e){return(t==="enter"?Cse:Ose)(e)}const Rse=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],jse=Rse.reduce((t,e)=>(t[e]=[],t),{}),Fse=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Rj=new Ese({whiteList:jse,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(Fse.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Nse(t){return t==="Enter"||t===" "}const jj="http://www.w3.org/",f_=`${jj}2000/svg`,Fj=`${jj}1999/xlink`;let m8=[],z7=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},V7=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Nj=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},zse=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(V7(t[r],e))return r}return-1},R3=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let l=n.properties;if(!(l&&(l.key===void 0?l.bind:l.key))){for(let d=0;d<t.length;d++)if(d!==e){let y=t[d];if(V7(y,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Vse=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},k4=[],P4=!1,zj=t=>{(t.children||[]).forEach(zj),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},g8=()=>{P4=!1,k4.forEach(zj),k4.length=0},v8=t=>{k4.push(t),P4||(P4=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(g8,{timeout:16}):setTimeout(g8,16))},b8=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),v8(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),v8(t))},Bse=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),l=n.length;for(let d=0;d<l;d++){let y=n[d],b=e[y];if(y==="className")throw new Error('Property "className" is not supported, use "class".');if(y==="class")C4(t,b,!0);else if(y==="classes"){let x=Object.keys(b),$=x.length;for(let E=0;E<$;E++){let k=x[E];b[k]&&t.classList.add(k)}}else if(y==="styles"){let x=Object.keys(b),$=x.length;for(let E=0;E<$;E++){let k=x[E],P=b[k];P&&(Nj(P),i.styleApplyer(t,k,P))}}else if(y!=="key"&&b!=null){let x=typeof b;x==="function"?(y.lastIndexOf("on",0)===0&&(r&&(b=r(y,b,t,e)),y==="oninput"&&function(){let $=b;b=function(E){$.apply(this,[E]),E.target["oninput-value"]=E.target.value}}()),t[y]=b):i.namespace===f_?y==="href"?t.setAttributeNS(Fj,y,b):t.setAttribute(y,b):x==="string"&&y!=="value"?y==="innerHTML"?t[y]=Rj.sanitize(b):Vj(t)&&y in t?t[y]=b:t.setAttribute(y,b):t[y]=b}}};function Vj(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let Lw,Gse=(t,e,i)=>{if(e)for(let r of e)Xp(r,t,void 0,i)},Bj=(t,e,i)=>{Gse(t,e.children,i),e.text&&(t.textContent=e.text),Bse(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Xp=(t,e,i,r)=>{let n,l=0,d=t.vnodeSelector,y=e.ownerDocument;if(d==="")n=t.domNode=y.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let b=0;b<=d.length;++b){let x=d.charAt(b);if(b===d.length||x==="."||x==="#"){let $=d.charAt(l-1),E=d.slice(l,b);$==="."?n.classList.add(E):$==="#"?n.id=E:(E==="svg"&&(r=z7(r,{namespace:f_})),r.namespace!==void 0?n=t.domNode=y.createElementNS(r.namespace,E):(n=t.domNode=t.domNode||y.createElement(E),E==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),l=b+1}}Bj(n,t,r)}},C4=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},Use=(t,e,i,r)=>{if(!i)return;let n=!1,l=Object.keys(i),d=l.length;for(let y=0;y<d;y++){let b=l[y],x=i[b],$=e[b];if(b==="class")$!==x&&(C4(t,$,!1),C4(t,x,!0));else if(b==="classes"){let E=t.classList,k=Object.keys(x),P=k.length;for(let D=0;D<P;D++){let L=k[D],N=!!x[L];N!==!!$[L]&&(n=!0,N?E.add(L):E.remove(L))}}else if(b==="styles"){let E=Object.keys(x),k=E.length;for(let P=0;P<k;P++){let D=E[P],L=x[D];L!==$[D]&&(n=!0,L?(Nj(L),r.styleApplyer(t,D,L)):r.styleApplyer(t,D,""))}}else if(x||typeof $!="string"||(x=""),b==="value"){let E=t[b];E!==x&&(t["oninput-value"]?E===t["oninput-value"]:x!==$)&&(t[b]=x,t["oninput-value"]=void 0),x!==$&&(n=!0)}else if(x!==$){let E=typeof x;E==="function"&&r.eventHandlerInterceptor||(r.namespace===f_?b==="href"?t.setAttributeNS(Fj,b,x):t.setAttribute(b,x):E==="string"?b==="innerHTML"?t[b]=Rj.sanitize(x):b==="role"&&x===""?t.removeAttribute(b):Vj(t)&&b in t?t[b]=x:t.setAttribute(b,x):t[b]!==x&&(t[b]=x),n=!0)}}return n},qse=(t,e,i,r,n)=>{if(i===r)return!1;r=r||m8;let l,d=(i=i||m8).length,y=r.length,b=0,x=0,$=!1;for(;x<y;){let E=b<d?i[b]:void 0,k=r[x];if(E!==void 0&&V7(E,k))$=Lw(E,k,n)||$,b++;else{let P=zse(i,k,b+1);if(P>=0){for(l=b;l<P;l++)b8(i[l]),R3(i,l,t,"removed");$=Lw(i[P],k,n)||$,b=P+1}else Xp(k,e,b<d?i[b].domNode:void 0,n),Vse(k),R3(r,x,t,"added")}x++}if(d>b)for(l=b;l<d;l++)b8(i[l]),R3(i,l,t,"removed");return $};Lw=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let l=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let d=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(d,r),e.domNode=d,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=z7(i,{namespace:f_})),t.text!==e.text&&(l=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,l=qse(e,r,t.children,e.children,i)||l,l=Use(r,t.properties,e.properties,i)||l,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return l&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let Cf=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,Lw(r,i,e)},domNode:t.domNode});const Hse={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let yp=t=>z7(Hse,t),uh={create:(t,e)=>(e=yp(e),Xp(t,document.createElement("div"),void 0,e),Cf(t,e)),append:(t,e,i)=>(i=yp(i),Xp(e,t,void 0,i),Cf(e,i)),insertBefore:(t,e,i)=>(i=yp(i),Xp(e,t.parentNode,t,i),Cf(e,i)),merge:(t,e,i)=>(i=yp(i),e.domNode=t,Bj(t,e,i),Cf(e,i)),replace:(t,e,i)=>(i=yp(i),Xp(e,t.parentNode,t,i),t.parentNode.removeChild(t),Cf(e,i))},Gj,Wse=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Gj=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Jse=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?Gj(i.children,n=>n.domNode===r):void 0}),i},Yse=(t,e,i)=>{let r=function(n){i("domEvent",n);let l=e(),d=Wse(n.currentTarget,l.domNode);d.reverse();let y,b=Jse(l.getLastRender(),d);return t.scheduleRender(),b&&(y=b.properties[`on${n.type}`].apply(b.properties.bind||this,arguments)),i("domEventProcessed",n),y};return(n,l,d,y)=>r},O4=t=>{let e,i,r=yp(t),n=r.performanceLogger,l=!0,d=!1,y=[],b=[],x=(E,k,P)=>{let D,L=()=>D;r.eventHandlerInterceptor=Yse(e,L,n),D=E(k,P(),r),y.push(D),b.push(P)},$=()=>{if(i=void 0,l){l=!1,n("renderStart",void 0);for(let E=0;E<y.length;E++){let k=b[E]();n("rendered",void 0),y[E].update(k),n("patched",void 0)}n("renderDone",void 0),l=!0}};return e={renderNow:$,scheduleRender:()=>{i||d||(i=requestAnimationFrame($))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),d=!0},resume:()=>{d=!1,l=!0,e.scheduleRender()},append:(E,k)=>{x(uh.append,E,k)},insertBefore:(E,k)=>{x(uh.insertBefore,E,k)},merge:(E,k)=>{x(uh.merge,E,k)},replace:(E,k)=>{x(uh.replace,E,k)},detach:E=>{for(let k=0;k<b.length;k++)if(b[k]===E)return b.splice(k,1),y.splice(k,1)[0];throw new Error("renderFunction was not found")}},e},Su=class extends Be{constructor(){super(...arguments),this.items=new ze,this._watchUpdatingTracking=new c0,this._callbacks=new Map,this._projector=O4(),this._hiddenProjector=O4()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const l=()=>(n=e.render(),n);r.append(i,l),r.renderNow();const d={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const y=n.domNode.getBoundingClientRect();d.left=y.left,d.top=y.top,d.right=y.right,d.bottom=y.bottom}for(r.detach(l);i.firstChild;)i.removeChild(i.firstChild);return d}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};g([S({readOnly:!0})],Su.prototype,"surface",void 0),g([S({readOnly:!0})],Su.prototype,"items",void 0),g([S({readOnly:!0})],Su.prototype,"needsRender",null),g([S({readOnly:!0})],Su.prototype,"_watchUpdatingTracking",void 0),g([S({readOnly:!0})],Su.prototype,"updating",null),Su=g([J("esri.views.overlay.ViewOverlay")],Su);const w8=Su,j3=[0,0];function Kse(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return j3[0]=i.left+((e==null?void 0:e.pageXOffset)??0),j3[1]=i.top+((e==null?void 0:e.pageYOffset)??0),j3}function _8(t){t&&(vj(t),t.parentNode&&t.parentNode.removeChild(t))}function Zse(t){const e=document.createElement("div");return t.appendChild(e),e}const Of=16,Cg=750,Xse=512,Qse=2,ene=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:Of,time:Cg},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([me(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),me(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([me(()=>this.ui,(i,r)=>this._handleUIChange(i,r),st),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=ei(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=F7(i);if(n||typeof i!="string"||ge.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(_8(this.root),this._set("root",null)),this.userContent&&(h8(this.userContent,r),_8(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const l=document.createElement("div");l.className="esri-view-user-storage",h8(n,l),n.appendChild(l),this._set("userContent",l);const d=document.createElement("div");d.className="esri-view-root",n.insertBefore(d,n.firstChild),this._set("root",d);const y=document.createElement("div");y.className="esri-view-surface",y.setAttribute("role","application"),y.tabIndex=0,d.appendChild(y),this._set("surface",y);const b=new w8;d.appendChild(b.surface),this._set("overlay",b),this.addHandles(me(()=>b.needsRender,x=>{x&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=M0({render:()=>{var $;return($=this.overlay)==null?void 0:$.render()}}):this._overlayRenderTaskHandle=Mi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const l=this.position;return i-=l?l[0]:0,r-=l?l[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const l=this.position;return i+=l?l[0]:0,r+=l?l[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(me(()=>this.root,n=>{i.container=n?Zse(n):null},st),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Of,i.time=Cg,this.addHandles([(()=>{const r=()=>{i.freq=Of,i.time=Cg};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),M0({prepare:r=>{const n=this._measure(),l=this._freqInfo;if(l.time+=r.deltaTime,n&&(l.freq=Of,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const d=this._position();l.freq=d||n?Of:Math.min(Cg,l.freq*Qse),!n&&l.freq>=Xse&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const l=this.width,d=this.height;return r===l&&n===d?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:l,oldHeight:d,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&Kse(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return g([S()],e.prototype,"container",null),g([S({readOnly:!0})],e.prototype,"focused",null),g([S({readOnly:!0})],e.prototype,"height",void 0),g([S({type:w8})],e.prototype,"overlay",void 0),g([S({readOnly:!0})],e.prototype,"position",void 0),g([S({readOnly:!0})],e.prototype,"resizing",void 0),g([S({readOnly:!0})],e.prototype,"root",void 0),g([S({value:null,readOnly:!0})],e.prototype,"size",null),g([S({readOnly:!0})],e.prototype,"surface",void 0),g([S({readOnly:!0})],e.prototype,"suspended",void 0),g([S()],e.prototype,"ui",void 0),g([S({readOnly:!0})],e.prototype,"userContent",void 0),g([S({readOnly:!0})],e.prototype,"width",void 0),g([S()],e.prototype,"widthBreakpoint",void 0),e=g([J("esri.views.DOMContainer")],e),e};let tne=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],l=new pC(n,void 0,void 0,2,2);this._properties[r]={pool:l,acquired:[]}}this._afterDispatchHandle=Pq(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)MT(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)MT(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}};const ine=ce("mac")?"Meta":"Ctrl",y_={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)y_[t]=String.fromCharCode(t);for(let t=1;t<25;t++)y_[111+t]=`F${t}`;for(let t=65;t<91;t++)y_[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function rne(t){if(t.key!==void 0)return Ju(t);const e=y_[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function sne(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let nne=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const x8=ge.getLogger("esri.views.input.InputHandler");let vr=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?x8.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const l=typeof e=="string"?new nne(e,n):e,d=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},y=$=>{const E=this._incoming[$.match.eventType];if(E){const k=E.indexOf($);E.splice(k,1),d(),this._manager&&this._manager.updateDependencies()}},b=new one(l,r,{onPause:y,onRemove:y,onResume:$=>{const E=this._incoming[$.match.eventType];E&&!E.includes($)&&(E.push($),d(),this._manager&&this._manager.updateDependencies())}});let x=this._incoming[l.eventType];return x||(x=[],this._incoming[l.eventType]=x),x.push(b),d(),this._manager&&this._manager.updateDependencies(),b}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new ane(e,{onEmit:(r,n,l,d)=>{var y;(y=this._manager)==null||y.emit(r.eventType,n,l,d)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):x8.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},one=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},ane=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},lne=class extends vr{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},une=class{constructor(e,i){this._observable=new R2,this._value=e,this._equalityFunction=i}get value(){return nt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Dw(t,e=KP){return new une(t,e)}let hne=class extends vr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Dw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},$n=class extends Be{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=ine,this._latestPointerType="mouse",this._propertiesPool=new tne({latestPointerLocation:pne},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=fh.INTERNAL){if(this._nameToGroup[e])return void ge.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void ge.getLogger(this).error("Can't register a group of zero handlers");const n={name:e,handlers:i.map(l=>({handler:l,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let l=n.handlers.length-1;l>=0;l--){const d=n.handlers[l];this._handlers.push(d),d.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,b,x,$,E)=>{this._emitInputEvent(d.priorityIndex+1,y,b,x,E,$)},setPointerCapture:(y,b)=>{this._setPointerCapture(n,d,y,b)},setEventCallback:y=>{d.eventCallback=y},setUninstallCallback:y=>{d.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ge.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let l=n.handler.hasSideEffects;if(!l){for(const d of n.handler.outgoingEventTypes)if(e.has(d)){l=!0;break}}if(l)for(const d of n.handler.incomingEventMatches){e.add(d.eventType);for(const y of d.keyModifiers)sne(y)||i.add(y)}n.active=l}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const l=this._propertiesPool.get("latestPointerLocation");l.x=i,l.y=r,this._set("latestPointerLocation",l)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const l=i;this._pointerCaptures.delete(l.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{if(!r){const y=new Set;this._activeKeyModifiers.forEach(b=>{y.add(b)}),this._activeKeyModifiers=y,r=!0}},l=(y,b)=>{b&&!this._activeKeyModifiers.has(y)?(n(),this._activeKeyModifiers.add(y)):!b&&this._activeKeyModifiers.has(y)&&(n(),this._activeKeyModifiers.delete(y))};if(e==="key-down"||e==="key-up"){const y=i.key;this._keyModifiers.has(y)&&l(y,e==="key-down")}const d=i.native;l("Alt",!(!d||!d.altKey)),l("Ctrl",!(!d||!d.ctrlKey)),l("Shift",!(!d||!d.shiftKey)),l("Meta",!(!d||!d.metaKey)),l("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new lne((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new hne,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],fh.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,fh.INTERNAL)}_setPointerCapture(e,i,r,n){const l=e.name+"-"+i.priorityIndex,d=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,d),n?(d.add(l),d.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):d.has(l)&&(d.delete(l),d.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,l,d){const y=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),b=l!==void 0&&l,x={event:new cne(i,r,y,d||this._activeKeyModifiers,b),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new Tw,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:l}=e.events.pop(),d=n.data&&n.data.eventId;if(!(d!=null&&this._stoppedPropagationEventIds.has(d)))for(e.currentHandler=this._handlersPriority[l];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((r=(i=e.currentHandler).eventCallback)==null||r.call(i,n)),n.shouldStopPropagation()){d!=null&&this._stoppedPropagationEventIds.add(d);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new Tw;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const l=r.keyModifiers.filter(d=>n.keyModifiers.includes(d));if(l.length===r.keyModifiers.length!=(l.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};g([S({readOnly:!0})],$n.prototype,"hasPendingInputs",null),g([S({constructOnly:!0})],$n.prototype,"eventSource",void 0),g([S({constructOnly:!0})],$n.prototype,"recognizers",void 0),g([S()],$n.prototype,"_latestPointerType",void 0),g([S()],$n.prototype,"latestPointerType",null),g([S()],$n.prototype,"multiTouchActive",null),g([S({readOnly:!0})],$n.prototype,"latestPointerLocation",void 0),g([S()],$n.prototype,"_paused",void 0),g([S({readOnly:!0})],$n.prototype,"updating",null),$n=g([J("esri.views.input.InputManager")],$n);let cne=class{constructor(e,i,r,n,l){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=l,this._propagationState=Bu.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Bu.STOPPED}shouldStopPropagation(){return(this._propagationState&Bu.STOPPED)!=0}async(e){this._propagationState|=Bu.PAUSED;const i=(r,n)=>{this._propagationState&=~Bu.PAUSED;const l=this._resumeCallback;if(this._resumeCallback=null,l&&l(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&Bu.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Bu;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Bu||(Bu={}));const fh={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let dne=class{};const pne=dne;function sa(t){return t!=null&&"open"in t&&"declaredClass"in t}function S8(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const fne=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([me(()=>[this.ui,this.popup],([i,r],n)=>{const l="popup",d="manual";if(n){const[y,b]=n;y&&sa(b)&&(b.view=null,S8(b)&&y.remove(b,l))}i&&sa(r)&&(r.view=this,S8(r)&&i.add(r,{key:l,position:d,internal:!0}))},st),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!sa(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(sa(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),sa(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},fh.WIDGET)]),u_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{le(()=>Promise.resolve().then(()=>TP),void 0)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){sa(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void ge.getLogger(this).error(new se("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),sa(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:l,layerViewsAndGraphics:d,clientOnlyGraphics:y}=await this._prepareFetchPopupFeatures(i,r),b=Promise.resolve(y),x=this._queryLayerPopupFeatures(l,d,r),$=x.map(E=>E.promise);return{location:n,clientOnlyGraphics:y,allGraphicsPromise:yq([b,...$]).then(E=>Array.from(new Set(E.flat()))),promisesPerLayerView:x}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!sa(this.popup))return this._popupSetupTask=vM(async r=>{const{default:n}=await le(()=>Promise.resolve().then(()=>TP),void 0);if(ai(r),!this.popup||sa(this.popup))return;const l=this.popup;delete l.open,delete l.close,this.popup=new n(l)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:l,graphics:d})=>{const y={clientGraphics:d,event:n!=null?n.event:void 0,signal:n!=null?n.signal:void 0,defaultPopupTemplateEnabled:n!=null&&!!n.defaultPopupTemplateEnabled},b=l.fetchPopupFeatures(i,y);return{layerView:l,promise:b}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:l,location:d}=await this._popupHitTestGraphics(i,r),y=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:b,clientOnlyGraphics:x}=this._graphicsPerFetchPopupLayerView(n,y);return{clientOnlyGraphics:x,layerViewsAndGraphics:b,queryArea:l,location:d}}async _popupHitTestGraphics(i,r){const n=await this.popupHitTest(i),l=n.results,d=n.mapPoint,y=l.filter(x=>x.type==="graphic"&&this._isValidPopupGraphic(x.graphic,r)),b=y.length?y[0].mapPoint:null;return{clientGraphics:y.map(x=>x.graphic),queryArea:d,location:d||b}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],l=new Map,d=r.map(y=>{const b=[];return"layer"in y?l.set(y.layer,b):l.set(y.graphics,b),{layerView:y,graphics:b}});for(const y of i){const b=l.get(y.layer)||l.get(y.sourceLayer)||null;b?b.push(y):n.push(y)}return{layerViewsAndGraphics:d,clientOnlyGraphics:n}}};return g([S({cast(i){return!i||sa(i)||typeof i=="object"&&(i.open=r=>(nw(ge.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),i.close=()=>(nw(ge.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),g([S()],e.prototype,"popupEnabled",void 0),e=g([J("esri.views.PopupView")],e),e},M8={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},yne={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function mne(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function dd(t,e,i){const r=new Date(t.getTime());if(e&&i){const n=yne[i],{getter:l,setter:d,multiplier:y}=n;if(i==="months"){const b=mne(r.getFullYear(),r.getMonth()+e);r.getDate()>b&&r.setDate(b)}r[d](r[l]()+e*y)}return r}function $8(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function gne(t,e,i){return t===0?0:t*M8[e]/M8[i]}var fo;let Xs=fo=class extends ve{static get allTime(){return T8}static get empty(){return vne}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(fo.allTime)}get isEmpty(){return this.equals(fo.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new fo({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,r=t.start!=null?t.start.getTime():t.start,n=t.end!=null?t.end.getTime():t.end;return e===r&&i===n}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=eh(this.start,r=>$8(r,t)),i=eh(this.end,r=>{const n=$8(r,t);return r.getTime()===n.getTime()?n:dd(n,1,t)});return new fo({start:e,end:i})}intersection(t){var y,b,x,$;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return fo.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((y=this.start)==null?void 0:y.getTime())??-1/0,i=((b=this.end)==null?void 0:b.getTime())??1/0,r=((x=t.start)==null?void 0:x.getTime())??-1/0,n=(($=t.end)==null?void 0:$.getTime())??1/0;let l,d;if(r>=e&&r<=i?l=r:e>=r&&e<=n&&(l=e),i>=r&&i<=n?d=i:n>=e&&n<=i&&(d=n),l!=null&&d!=null&&!isNaN(l)&&!isNaN(d)){const E=new fo;return E.start=l===-1/0?null:new Date(l),E.end=d===1/0?null:new Date(d),E}return fo.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new fo,{start:r,end:n}=this;return r!=null&&(i.start=dd(r,t,e)),n!=null&&(i.end=dd(n,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return T8.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new fo({start:e,end:i})}};g([S({type:Date,json:{write:{allowNull:!0}}})],Xs.prototype,"end",void 0),g([Se("end")],Xs.prototype,"readEnd",null),g([Ae("end")],Xs.prototype,"writeEnd",null),g([S({readOnly:!0,json:{read:!1}})],Xs.prototype,"isAllTime",null),g([S({readOnly:!0,json:{read:!1}})],Xs.prototype,"isEmpty",null),g([S({type:Date,json:{write:{allowNull:!0}}})],Xs.prototype,"start",void 0),g([Se("start")],Xs.prototype,"readStart",null),g([Ae("start")],Xs.prototype,"writeStart",null),Xs=fo=g([J("esri.TimeExtent")],Xs);const T8=new Xs,vne=new Xs({start:void 0,end:void 0}),Zo=Xs,Xo=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Fs,this._updatingHandles=new c0}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return g([S({readOnly:!0})],e.prototype,"handles",null),g([S({readOnly:!0})],e.prototype,"updatingHandles",null),e=g([J("esri.core.HandleOwner")],e),e};let Rw=class extends Xo(Be){};Rw=g([J("esri.core.HandleOwner")],Rw);let fy=class extends Xo(ze){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ze.ofType(this.itemType.Type))(e):new ze(e)}};function I8(t,e){return{type:t,cast:BC,set(i){const r=vd(i,this._get(e),t);r.owner=this,this._set(e,r)}}}g([S()],fy.prototype,"owner",null),fy=g([J("esri.core.support.OwningCollection")],fy);var b1;const jw=rs()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Uj=jw.jsonValues.slice();DU(Uj,"orthometric");const yy=rs()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let yo=b1=class extends ve{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return jw.write(t,e,i)}readHeightModel(t,e,i){return jw.read(t)||(i&&i.messages&&i.messages.push(bne(t,{context:i})),null)}readHeightUnit(t,e,i){return yy.read(t)||(i&&i.messages&&i.messages.push(E8(t,{context:i})),null)}readHeightUnitService(t,e,i){return pO(t)||yy.read(t)||(i&&i.messages&&i.messages.push(E8(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new b1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=RW(e);return new b1({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new b1;return e.read(t,{origin:"web-scene"}),e}};function E8(t,e){return new Un("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function bne(t,e){return new Un("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}g([S({type:jw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Uj,default:"ellipsoidal"}}}})],yo.prototype,"heightModel",void 0),g([Ae("web-scene","heightModel")],yo.prototype,"writeHeightModel",null),g([Se(["web-scene","service"],"heightModel")],yo.prototype,"readHeightModel",null),g([S({type:yy.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:yy.jsonValues,write:yy.write}}}})],yo.prototype,"heightUnit",void 0),g([Se("web-scene","heightUnit")],yo.prototype,"readHeightUnit",null),g([Se("service","heightUnit")],yo.prototype,"readHeightUnitService",null),g([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],yo.prototype,"vertCRS",void 0),g([Se("service","vertCRS",["vertCRS","ellipsoid","geoid"])],yo.prototype,"readVertCRS",null),yo=b1=g([J("esri.geometry.HeightModelInfo")],yo);const m_=yo;let Fw=class extends fy{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(ge.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Fw=g([J("esri.support.AnalysesCollection")],Fw);let my=class extends fy{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};g([yM({Type:xs,ensureType:zi(xs)})],my.prototype,"itemType",void 0),my=g([J("esri.support.GraphicsCollection")],my);const A8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function wne(t,e="system"){if(!t||!A8.has(t.timeZone))return e;const i=A8.get(t.timeZone);return xne(t.timeZone)||t.respectsDaylightSaving?i:_ne(i)}function _ne(t){const e=yt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Qr.instance(-i).formatOffset(0,"narrow")}`}function xne(t){return t.startsWith("UTC")}let Mu=class extends ti(ve){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:r,respectsDaylightSaving:n}=i;return{timeZone:r,respectsDaylightSaving:n}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:wne(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};g([S()],Mu.prototype,"legacy",void 0),g([Se("legacy",["timeZone"])],Mu.prototype,"readLegacy",null),g([S({type:String,nonNullable:!0})],Mu.prototype,"timeZone",void 0),g([Se("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Mu.prototype,"readTimeZone",null),g([Ae("timeZone")],Mu.prototype,"writeTimeZone",null),Mu=g([J("esri.time.TimeReference")],Mu);const Ih=Mu;let $u=class extends Be{constructor(e){super(e),this.view=null,this.baseLayerViews=new ze,this.referenceLayerViews=new ze,this._loadingHandle=me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},st)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const e=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};g([S({constructOnly:!0})],$u.prototype,"view",void 0),g([S({readOnly:!0})],$u.prototype,"baseLayerViews",void 0),g([S({readOnly:!0})],$u.prototype,"referenceLayerViews",void 0),g([S({readOnly:!0})],$u.prototype,"suspended",null),g([S({type:Boolean,readOnly:!0})],$u.prototype,"updating",null),$u=g([J("esri.views.BasemapView")],$u);function Sne(t){return"tryRecycleWith"in t}let Mne=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Gn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,zn(this._controller.signal,()=>{const n=new se("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!Sne(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<e.length;n++){const l=e[n];if(l.type!==i)continue;const d=this.layerView.tryRecycleWith(l,{signal:r});if(d){e.splice(n,1),this.layer=l;const y=this.layerView,b=y.view;return this.promise=Promise.race([d.then(()=>(ai(this._controller.signal),l.emit("layerview-destroy",{view:b,layerView:y}),b.emit("layerview-destroy",{view:b,layerView:y}),l.emit("layerview-create",{view:b,layerView:y}),b.emit("layerview-create",{view:b,layerView:y}),y)),new Promise((x,$)=>zn(this._controller.signal,()=>$($i())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,l,d;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let y,b;if(await i.load({signal:e}),"prefetchResources"in i&&await((n=i.prefetchResources)==null?void 0:n.call(i,{signal:e})),Tne(i))y=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new se("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);ai(e),y="default"in E?new E.default({layer:i,view:r}):new E({layer:i,view:r})}const x=()=>{b=Mi(b),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};b=zn(e,x),ai(e);try{await y.when()}catch(E){throw x(),E}if(!((d=(l=this._map)==null?void 0:l.allLayers)==null?void 0:d.includes(i)))return x(),void this._deferred.reject(new se("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:r,layerView:y}),r.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:r,error:y}),r.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new se("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}},Tn=class extends Be{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new c0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Gn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(H0(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var b,x,$;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],l=this.view.ready,d=E=>{if(E!=null){for(const k of E)if(k){r.add(k);const P=this._layerLayerViewInfoMap.get(k);P&&l?P.start():P||this._recyclingInfoMap.has(k)||n.push(k),"layers"in k&&k.layers&&d(k.layers)}}};for(const E of this._rootCollectionNames)d(this.get(E));for(const[E,k]of this._layerLayerViewInfoMap)if(!r.has(E)){this._layerLayerViewInfoMap.delete(k.layer);const P=k.tryRecycle(n);P?(this.notifyChange("updating"),this._recyclingInfoMap.set(k.layer,k),P.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(k.layer),this._layerLayerViewInfoMap.set(k.layer,k),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(k.layer),k.destroy(),this._reschedule()})):k.destroy()}for(const[E,k]of this._recyclingInfoMap)r.has(E)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(k.layer),k.destroy());for(const E of n)this._createLayerView(E);this._refreshCollections();const y=[(b=i==null?void 0:i.ground)==null?void 0:b.layers,(x=i==null?void 0:i.basemap)==null?void 0:x.baseLayers,($=i==null?void 0:i.basemap)==null?void 0:$.referenceLayers,i==null?void 0:i.layers].filter(E=>!!E);r.forEach(E=>"layers"in E&&y.push(E.layers)),this.addHandles(y.map(E=>this._watchUpdatingTracking.addOnCollectionChange(()=>E,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Rs(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),me(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),vl)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),m3(this._recyclingInfoMap),m3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject($i()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||O2(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(m3(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new se("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let n=0;for(const l of e){const d=this._layerLayerViewInfoMap.get(l);if(!d||!d.layerView)continue;const y=d.layerView;y.layer=l,y.parent=r,i.at(n)!==y&&i.splice(n,0,y),l.layers&&this._populateLayerViewsOwners(l.layers,y.layerViews,y),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new Mne(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(is(r)||r.name==="cancelled:layerview-create")||ge.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};g([S()],Tn.prototype,"_workPromise",void 0),g([S({readOnly:!0})],Tn.prototype,"_watchUpdatingTracking",void 0),g([S({readOnly:!0})],Tn.prototype,"_layersToLayerViews",null),g([S({readOnly:!0})],Tn.prototype,"_rootCollectionNames",null),g([S()],Tn.prototype,"layerViewImporter",void 0),g([S()],Tn.prototype,"supportsGround",void 0),g([S({readOnly:!0})],Tn.prototype,"updating",null),g([S({readOnly:!0})],Tn.prototype,"updatingRemaining",null),g([S({constructOnly:!0})],Tn.prototype,"view",void 0),Tn=g([J("esri.views.LayerViewManager")],Tn);const $ne=Tn;function Tne(t){return"createLayerView"in t&&t.createLayerView!=null}let Us=class extends Be{constructor(e){super(e),this.factor=1.5,this.offset=bs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};g([S({type:Number})],Us.prototype,"factor",void 0),g([S({nonNullable:!0})],Us.prototype,"offset",void 0),g([S()],Us.prototype,"position",void 0),g([S({type:Number,range:{min:0}})],Us.prototype,"size",void 0),g([S()],Us.prototype,"maskUrl",void 0),g([S()],Us.prototype,"maskEnabled",void 0),g([S()],Us.prototype,"overlayUrl",void 0),g([S()],Us.prototype,"overlayEnabled",void 0),g([S({readOnly:!0})],Us.prototype,"version",null),g([S({type:Boolean})],Us.prototype,"visible",void 0),Us=g([J("esri.views.Magnifier")],Us);const qj=Us;let Ine=class{constructor(){this._tasks=new Array,this._running=Dw(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.value=!0,new Promise((n,l)=>this._tasks.push(new k8(n,l,e,i,r)))}unshift(e,i,r){return this._running.value=!0,new Promise((n,l)=>this._tasks.unshift(new k8(n,l,e,i,r)))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=Uo(i.signal);if(n&&!i.abortCallback)i.reject($i());else{const l=n?(r=i.abortCallback)==null?void 0:r.call(i,$i()):i.callback(e);Vl(l)?l.then(i.resolve,i.reject):i.resolve(l)}}catch(n){i.reject(n)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=$i();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},k8=class{constructor(e,i,r,n=void 0,l=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=l}},w1=class extends Be{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};g([S()],w1.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),g([S()],w1.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),w1=g([J("esri.views.support.DebugFlags")],w1);const Ene=new w1;var Ks;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Ks||(Ks={}));var L4,gt;(function(t){t[t.YIELD=1]="YIELD"})(L4||(L4={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(gt||(gt={}));const $a=0,P8=new Map([[gt.RESOURCE_CONTROLLER_IMMEDIATE,$a],[gt.RESOURCE_CONTROLLER,4],[gt.SLIDE,$a],[gt.STREAM_DATA_LOADER,$a],[gt.ELEVATION_QUERY,$a],[gt.TERRAIN_SURFACE,1],[gt.SURFACE_GEOMETRY_UPDATES,1],[gt.LOD_RENDERER,2],[gt.GRAPHICS_CORE,2],[gt.I3S_CONTROLLER,2],[gt.POINT_CLOUD_LAYER,2],[gt.FEATURE_TILE_FETCHER,2],[gt.OVERLAY,4],[gt.STAGE,4],[gt.GRAPHICS_DECONFLICTOR,4],[gt.FILTER_VISIBILITY,4],[gt.SCALE_VISIBILITY,4],[gt.FRUSTUM_VISIBILITY,4],[gt.CLOUDS_GENERATOR,4],[gt.POINT_OF_INTEREST_FREQUENT,6],[gt.POINT_OF_INTEREST_INFREQUENT,30],[gt.LABELER,8],[gt.FEATURE_QUERY_ENGINE,8],[gt.FEATURE_TILE_TREE,16],[gt.FEATURE_TILE_TREE_ACTIVE,$a],[gt.ELEVATION_ALIGNMENT,12],[gt.TEXT_TEXTURE_ATLAS,12],[gt.TEXTURE_UNLOAD,12],[gt.LINE_OF_SIGHT_TOOL,16],[gt.LINE_OF_SIGHT_TOOL_INTERACTIVE,$a],[gt.SNAPPING,$a],[gt.SHADOW_ACCUMULATOR,30]]);function C8(t){return P8.has(t)?P8.get(t):typeof t=="number"?t:1}const O8=6.5,L8=1,Ane=30,D8=1e3/30,R8=100,j8=.9;var D4,Bh;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(l=>l.needsUpdate)}constructor(){this._updating=Dw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ey("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Ks.INTERACTING,this._tasks=new sd,this._runQueue=new sd,this._load=0,this._idleStateCallbacks=new sd,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=me(()=>Ene.SCHEDULER_LOG_SLOW_TASKS,d=>this._debug=d,st);for(const d of Object.keys(gt))this.performanceInfo.tasks.set(gt[d],new ey(gt[d]));const l=this;this._test={FRAME_SAFETY_BUDGET:O8,INTERACTING_BUDGET:D8,IDLE_BUDGET:R8,get availableBudget(){return l._budget.budget},usedBudget:0,getBudget:()=>l._budget,setBudget:d=>l._budget=d,updateTask:d=>this._updateTask(d),getState:d=>this._getState(d),getRuntime:d=>this._getRuntime(d),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(l=>l.remove()),this._tasks.clear(),Mi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(l){this._updatingChanged(),l&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(l,d){const y=C8(l),b=new i(this,l,d,y);return this._tasks.push(b),this._updatingChanged(),this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new ey(l)),b}registerIdleStateCallbacks(l,d){const y={idleBegin:l,idleEnd:d};this._idleStateCallbacks.push(y),this.state===Ks.IDLE&&this._idleUpdatesStartFired&&y.idleBegin();const b=this;return{remove:()=>this._removeIdleStateCallbacks(y),set idleBegin(x){b._idleUpdatesStartFired&&(y.idleEnd(),b._state===Ks.IDLE&&x()),y.idleBegin=x},set idleEnd(x){y.idleEnd=x}}}get load(){return this._load}set state(l){this._state!==l&&(this._state=l,this.state!==Ks.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(d=>d.idleEnd())))}get state(){return this._state}updateBudget(l){this._test.usedBudget=0,++this._frameNumber;let d=O8,y=l.frameDuration,b=L8;switch(this.state){case Ks.IDLE:d=0,y=Math.max(R8,l.frameDuration),b=Ane;break;case Ks.INTERACTING:y=Math.max(D8,l.frameDuration);case Ks.ANIMATING:}return y=y-l.elapsedFrameTime-d,this.state!==Ks.IDLE&&y<L8&&!this._forceTask?(this._forceTask=!0,!1):(y=Math.max(y,b),this._budget.reset(y,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Ks.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin())),this._runIdle();break;case Ks.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd(),this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l),this._runQueue.removeUnordered(l),this._updatingChanged()}_updateTask(l){this._tasks.forAll(d=>{d.name===l&&d.setPriority(l)})}_getState(l){if(this._runQueue.some(y=>y.name===l))return Bh.SCHEDULED;let d=Bh.IDLE;return this._tasks.forAll(y=>{y.name===l&&y.needsUpdate&&(y.schedulePriority<=1?d=Bh.READY:d!==Bh.READY&&(d=Bh.WAITING))}),d}_getRuntime(l){let d=0;return this._tasks.forAll(y=>{y.name===l&&(d+=y.runtime)}),d}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;if(this._tasks.forAll(y=>{y.needsUpdate&&l.set(y.name,(l.get(y.name)||0)+1)}),l.size===0)return null;let d="";return l.forEach((y,b)=>{d+=y>1?` ${y}x ${b}`:` ${b}`}),d}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=this._tasks.reduce((d,y)=>y.needsUpdate?++d:d,0);this._load=this._load*j8+l*(1-j8)}_schedule(){for(this._runQueue.filterInPlace(l=>!!l.needsUpdate||(l.schedulePriority=l.basePriority,!1)),this._tasks.forAll(l=>{l.basePriority===$a&&l.needsUpdate&&!this._runQueue.includes(l)&&l.blockFrame!==this._frameNumber&&this._runQueue.unshift(l)});this._runQueue.length===0;){let l=!1,d=0;if(this._tasks.forAll(y=>{y.needsUpdate&&y.schedulePriority!==0&&y.basePriority!==$a&&y.blockFrame!==this._frameNumber&&(l=!0,d=Math.max(d,y.basePriority),y.schedulePriority===1?(y.schedulePriority=0,this._runQueue.push(y)):--y.schedulePriority)}),!l)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const d=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)===L4.YIELD&&(y.blockFrame=this._frameNumber)}catch(x){ge.getLogger("esri.views.support.Scheduler").error(`Exception in task "${y.name}"`,x)}!this._budget.hasProgressed&&y.blockFrame!==this._frameNumber&&y.needsUpdate&&(y.name,gt.I3S_CONTROLLER,y.blockFrame=this._frameNumber),y.schedulePriority=y.basePriority;const b=this._budget.now()-d;if(y.runtime+=b,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+b),this._debug&&b>2*this._budget.budget&&console.log("Task",y.name,"used",b,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-l)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(gt))this._frameTaskTimes.set(gt[l],0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((d,y)=>this.performanceInfo.tasks.get(y).record(d)),this.performanceInfo.total.record(l)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(l,d,y,b){this._scheduler=l,this.name=d,this._basePriority=b,this.blockFrame=0,this.runtime=0,this._queue=new Ine,this._handles=new Fs,this.schedulePriority=this._basePriority,this._task=Dw(y??this._queue),this._handles.add(Hn(()=>this.task.running,x=>l.taskRunningChanged(x)))}remove(){this.processQueue(Hj),this._scheduler.removeTask(this),this.schedule=R4.schedule,this.reschedule=R4.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){this.name=l;const d=C8(l);this._basePriority!==$a&&this.schedulePriority===0||(this.schedulePriority=d),this._basePriority=d}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,d,y){return this._queue.push(l,d,y)}reschedule(l,d,y){return this._queue.unshift(l,d,y)}processQueue(l){this._queue.runTask(l)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Ks.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(l){return!this.done&&(l()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(l){this._enabled=l}reset(l,d){this._begin=this.now(),this._budget=l,this._state=d,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(D4||(D4={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Bh||(Bh={}));const Hj=(()=>{const t=new D4.Budget;return t.enabled=!1,t})();let kne=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Uo(i)){const n=$i();return r?Promise.resolve(r(n)):Promise.reject(n)}return vx(e(Hj))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const R4=new kne;let _1=class extends Be{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(gt.TEXTURE_UNLOAD))??R4}normalizeCtorArgs(){return{}}destroy(){var e,i,r;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(n=>this._releaseTextureRequest(n)),(r=this._textureRequests)==null||r.clear()}get updating(){return this._frameTask.updating}fromData(e,i,r){var d,y;const n=this.makeUid(e);let l=this._textureRequests.get(n);if(!l){const b=new Pne(r);b.texture=i(),(d=this._stage)==null||d.add(b.texture),(y=this._stage)==null||y.loadImmediate(b.texture),this._textureRequests.set(n,b),l=b}return l.referenceCount++,{uid:n,texture:l.texture,release:()=>this._release(n)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};g([S()],_1.prototype,"_frameTask",void 0),g([S()],_1.prototype,"updating",null),_1=g([J("esri.views.3d.support.TextureCollection")],_1);let Pne=class{constructor(e){this.onRemove=e,this.referenceCount=0}};var F8;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(F8||(F8={}));const Wj=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Jj={};function Yj(t){return!!Jj[t]}function Cne(t){for(const e of t)if(!Yj(e))return!1;return!0}Wj.forEach(t=>{Jj[t]=!0});let One=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var l;return(l=this.inputManager)==null?void 0:l.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const l=Array.isArray(e)?e:e.split(",");if(!Cne(l))return l.some(Yj)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let d,y;Array.isArray(i)?y=i:(d=i,y=[]),typeof r=="function"?d=r:n=r,n=n??fh.DEFAULT;const b=this._createUniqueGroupName(),x=new Lne(this.view,l,y,d);this._handlers.set(b,{handler:x,priority:n});for(const $ of l){const E=this._handlerCounts.get($)||0;this._handlerCounts.set($,E+1)}return this.inputManager&&this.inputManager.installHandlers(b,[x],n),{remove:()=>this._removeHandler(b,l)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Lne=class extends vr{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const l of i)switch(l){case"click":this.registerIncoming("click",r,d=>n(this._wrapClick(d)));break;case"double-click":this.registerIncoming("double-click",r,d=>n(this._wrapDoubleClick(d)));break;case"immediate-click":this.registerIncoming("immediate-click",r,d=>n(this._wrapImmediateClick(d)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,d=>n(this._wrapImmediateDoubleClick(d)));break;case"hold":this.registerIncoming("hold",r,d=>n(this._wrapHold(d)));break;case"drag":this.registerIncoming("drag",r,d=>{const y=this._wrapDrag(d);y&&n(y)});break;case"key-down":this.registerIncoming("key-down",r,d=>n(this._wrapKeyDown(d)));break;case"key-up":this.registerIncoming("key-up",r,d=>n(this._wrapKeyUp(d)));break;case"pointer-down":this.registerIncoming("pointer-down",r,d=>n(this._wrapPointer(d,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,d=>n(this._wrapPointer(d,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,d=>n(this._wrapPointer(d,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,d=>n(this._wrapPointerDrag(d)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,d=>n(this._wrapMouseWheel(d)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,d=>n(this._wrapPointer(d,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,d=>n(this._wrapPointer(d,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,d=>{n(this._wrapGamepad(d))});break;case"focus":this.registerIncoming("focus",r,d=>{n(this._wrapFocus(d))});break;case"blur":this.registerIncoming("blur",r,d=>{n(this._wrapBlur(d))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:b}=e.data,{cancelable:x,timestamp:$}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:$,screenPoint:bs(l,d),mapPoint:this._getMapPoint(l,d),eventId:b,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:E=>e.async(E),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:b}=e.data,{cancelable:x,timestamp:$}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:$,mapPoint:this._getMapPoint(l,d),eventId:b,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:E=>e.async(E),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:b}=e.data,x=y.pointerId,{cancelable:$,timestamp:E}=e;return{type:"immediate-click",pointerId:x,pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:E,mapPoint:this._getMapPoint(l,d),eventId:b,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:b}=e.data,x=y.pointerId,{cancelable:$,timestamp:E}=e;return{type:"immediate-double-click",pointerId:x,pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:E,mapPoint:this._getMapPoint(l,d),eventId:b,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y}=e.data,{cancelable:b,timestamp:x}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:x,mapPoint:this._getMapPoint(l,d),cancelable:b,stopPropagation:()=>e.stopPropagation(),async:$=>e.async($),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(bs(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:l,pointerType:d,button:y}=i;if(l==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const b=i.pointer.native,x=i.buttons,{cancelable:$,timestamp:E}=e,k={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return l==="end"&&(this._latestDragStart=void 0),{type:"drag",action:l,x:r,y:n,origin:k,pointerType:d,button:y,buttons:x,radius:i.radius,angle:oL(i.angle),native:b,timestamp:E,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:n}=e.data,{cancelable:l,timestamp:d}=e;return{type:"key-down",key:i,repeat:r,native:n,timestamp:d,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:n,timestamp:l}=e;return{type:"key-up",key:i,native:r,timestamp:l,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:n,button:l,buttons:d,native:y,eventId:b}=e.data,x=y.pointerId,$=y.pointerType,{cancelable:E,timestamp:k}=e;return{type:i,x:r,y:n,pointerId:x,pointerType:$,button:l,buttons:d,native:y,timestamp:k,eventId:b,cancelable:E,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:n,native:l,eventId:d}=e.data.currentEvent,{button:y}=e.data.startEvent,b=e.data.startEvent.native.pointerId,x=e.data.startEvent.native.pointerType,$=e.data.action,E={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:k,timestamp:P}=e;return{type:"pointer-drag",x:i,y:r,pointerId:b,pointerType:x,button:y,buttons:n,action:$,origin:E,native:l,timestamp:P,eventId:d,cancelable:k,stopPropagation:()=>e.stopPropagation(),async:D=>e.async(D),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:n}=e,{x:l,y:d,deltaY:y,native:b}=r;return{type:"mouse-wheel",x:l,y:d,deltaY:y,native:b,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:n}=e.data,{cancelable:l,timestamp:d}=e,{buttons:y,axes:b}=r;return{type:"gamepad",device:n,timestamp:d,action:i,buttons:y,axes:b,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}};var rm,N8,z8;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(rm||(rm={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(N8||(N8={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(z8||(z8={}));function Dne(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return ge.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function j4(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(rm.USER)&&t.getEditableFlag(rm.MANAGER)}function ma(t){return bs(t.x,t.y)}function Kj(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?bs(e.clientX-i.left,e.clientY-i.top):bs(0,0)}function V8(t,e){return e instanceof Event?Kj(t,e):ma(e)}function B8(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Rne=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":G8(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!U8(e))break;const n=ma(e),l=this._intersect(n,e.pointerType,i.forEachTool);if(l==null)break;const d=l.manipulator,y=l.tool;d==null||y==null||!d.interactive||d.grabbable&&d.grabbableForEvent(e)||!d.grabbing||d.dragging||this._ungrabManipulatorBeforeDragging(d,e,i),d!=null&&y!=null&&d.interactive&&d.grabbable&&d.grabbableForEvent(e)&&!d.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:d,tool:y,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(l.tool)),d.grabbing=!0,d.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!U8(e))break;const n=this._grabbedManipulators.get(e.pointerId),l=eh(n,({manipulator:$})=>$),d=eh(n,({tool:$})=>$);if(l==null||d==null)break;const y=ma(e);y.x=Ds(y.x,0,i.view.width),y.y=Ds(y.y,0,i.view.height);const b=n.start,x=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(l.dragging=!0,x?l.events.emit("drag",{action:"update",start:b,screenPoint:y}):l.events.emit("drag",{action:"start",start:b,screenPoint:y,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:d,manipulator:l,start:b}));break;case"end":l.dragging=!1,x&&l.events.emit("drag",{action:"end",start:b,screenPoint:y}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=ma(e),l=this._intersect(n,e.pointerType,i.forEachTool);if(jne(e)||i.forEachTool(x=>{if((l==null||l.tool!==x||x.automaticManipulatorSelection)&&x.manipulators){let $=!1;x.manipulators.forEach(({manipulator:E})=>{E.selected&&(E.selected=!1,$=!0)}),$&&x.onManipulatorSelectionChanged&&x.onManipulatorSelectionChanged()}}),l==null)break;const{manipulator:d,tool:y}=l;if(!d.interactive)break;d.selectable&&y.automaticManipulatorSelection&&(d.selected=!d.selected,y.onManipulatorSelectionChanged&&y.onManipulatorSelectionChanged());const b=e.native.shiftKey;d.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:b,stopPropagation:r});break}case"click":{const n=ma(e),l=this._intersect(n,e.pointerType,i.forEachTool),d=l!=null?l.manipulator:null;if(d==null||!d.interactive)break;const y=e.native.shiftKey;d.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:y}),r();break}case"double-click":{const n=ma(e),l=this._intersect(n,e.pointerType,i.forEachTool),d=l!=null?l.manipulator:null;if(d==null||!d.interactive)break;const y=e.native.shiftKey;d.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:y,stopPropagation:r});break}case"immediate-double-click":{const n=ma(e),l=this._intersect(n,e.pointerType,i.forEachTool),d=l!=null?l.manipulator:null;if(d==null||!d.interactive)break;const y=e.native.shiftKey;d.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:y,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:ma(i)}),this._grabbedManipulators.forEach(({manipulator:n},l)=>{n===e&&this._grabbedManipulators.delete(l)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){const r=eh(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:ma(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return O2(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const l=this._grabbedManipulators.values(),d=kU(l,({tool:y})=>y===n);n.firstGrabbedManipulator=d!=null?d.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,l){const d=(y,b)=>y===e&&(l==null||l===b);this._grabbedManipulators.forEach(({tool:y,manipulator:b,pointerType:x},$)=>{d(y,b)&&(this._grabbedManipulators.delete($),b.grabbing=!1,b.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:x}))}),this._draggedManipulators.forEach(({tool:y,manipulator:b},x)=>{d(y,b)&&(this._draggedManipulators.delete(x),b.dragging=!1,b.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:y,manipulator:b},x)=>{d(y,b)&&(this._hoveredManipulators.delete(x),b.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let n=null;return r(l=>{if(l.manipulators==null||!j4(l))return!1;const d=l.manipulators.intersect(e,i);return d!=null&&(n={tool:l,manipulator:d},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(bs(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!G8(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(ma(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){let l=this._intersect(e,r,n);const d=eh(this._hoveredManipulators.get(i),({manipulator:y})=>y);l==null||l.manipulator.interactive||(l=null),l!=null&&d===l.manipulator||(d!=null&&(d.hovering=!1),l!=null?(l.manipulator.hovering=!0,this._hoveredManipulators.set(i,l)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function G8(t){return t==="mouse"}function U8(t){return t.pointerType!=="mouse"||t.button===0}function jne(t){return!!t.native.shiftKey}const q8="attached",F3="tools",Fne=1e3;let mo=class extends Rw{constructor(e){super(e),this._clock=q0,this._manipulatorState=new Rne,this.tools=new ze,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(Wj,e=>{this._handleInputEvent(e)},fh.TOOL),...Dne(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void ge.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=j4(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=Mi(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,Fne)}attach(){var e;this.view.type==="3d"?(this._set("textures",new _1(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([me(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i))),Cl(()=>this._set("textures",ei(this.textures)))],q8)):this.handles.add(me(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(q8),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(F3),this._forEachTool(e=>{if(e instanceof Be){const i=me(()=>[e.cursor,e.visible,e.editable],()=>{j4(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,F3)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],F3)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,rm.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:e=>this._clock=e}}};g([S({constructOnly:!0,nonNullable:!0})],mo.prototype,"view",void 0),g([S({readOnly:!0,nonNullable:!0})],mo.prototype,"textures",void 0),g([S({value:null})],mo.prototype,"activeTool",null),g([S({readOnly:!0,type:ze})],mo.prototype,"tools",void 0),g([S({readOnly:!0})],mo.prototype,"cursor",void 0),g([S({readOnly:!0})],mo.prototype,"updating",null),g([S()],mo.prototype,"_interacting",void 0),g([S({readOnly:!0})],mo.prototype,"interacting",null),mo=g([J("esri.views.ToolViewManager")],mo);let mp=class extends Be{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Nne.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return zne[this.deviceType]}};g([S({nonNullable:!0,readOnly:!0})],mp.prototype,"nativeIndex",void 0),g([S({type:String,readOnly:!0})],mp.prototype,"deviceType",null),g([S({type:Number,readOnly:!0})],mp.prototype,"axisThreshold",null),mp=g([J("esri.views.input.gamepad.GamepadInputDevice")],mp);const Nne=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),zne={standard:.15,spacemouse:.025,unknown:0},B7=mp;let x1=class extends Be{constructor(...e){super(...e),this.devices=new ze,this.enabledFocusMode="document"}};g([S({type:ze.ofType(B7),readOnly:!0})],x1.prototype,"devices",void 0),g([S({type:["document","view","none"]})],x1.prototype,"enabledFocusMode",void 0),x1=g([J("esri.views.input.gamepad.GamepadSettings")],x1);const Vne=x1;let eb=class extends Be{constructor(){super(...arguments),this.gamepad=new Vne}};g([S({readOnly:!0})],eb.prototype,"gamepad",void 0),eb=g([J("esri.views.input.Input")],eb);const Bne=eb;let Tu=class extends Be{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};g([S({type:Boolean,nonNullable:!0})],Tu.prototype,"enabled",void 0),g([S({type:B7})],Tu.prototype,"device",void 0),g([S({type:["pan","zoom"],nonNullable:!0})],Tu.prototype,"mode",void 0),g([S({type:["forward-down","forward-up"],nonNullable:!0})],Tu.prototype,"tiltDirection",void 0),g([S({type:Number,nonNullable:!0})],Tu.prototype,"velocityFactor",void 0),Tu=g([J("esri.views.navigation.gamepad.GamepadSettings")],Tu);const Zj=Tu;let mc=class extends Be{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Zj,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};g([S({type:Boolean})],mc.prototype,"browserTouchPanEnabled",void 0),g([S({type:Zj,nonNullable:!0})],mc.prototype,"gamepad",void 0),g([S({type:Boolean})],mc.prototype,"momentumEnabled",void 0),g([S({type:Boolean})],mc.prototype,"mouseWheelZoomEnabled",void 0),mc=g([J("esri.views.navigation.Navigation")],mc);const Xj=mc,Qj={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},eF=Object.values(Qj),tF=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${eF.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Gne=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${eF.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Une=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function V9e(t){return!!tF.test(t)}function Nd(t){if(t==null)return null;const e=Ui(t),i=e.path.match(tF)||e.path.match(Gne);if(!i)return null;const[,r,n,l,d]=i,y=n.indexOf("/");return{title:G7(y!==-1?n.slice(y+1):n),serverType:Qj[l.toLowerCase()],sublayer:d!=null&&d!==""?parseInt(d,10):null,url:{path:r}}}function qne(t){const e=Ui(t).path.match(Une);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function G7(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Hne(t,e){const i=[];if(t){const r=Nd(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=G7(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function iF(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",n="//features",l=(t=t.toLowerCase()).includes(e),d=t.includes(i)||t.includes(r)||t.includes(n);return l&&d}function Wne(t,e){return t&&iO(rO(t,e))}function Jne(t){let{url:e}=t;if(!e)return{url:e};e=rO(e,t.logger);const i=Ui(e),r=Nd(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const l=qne(i.path);l!=null&&(e=l.serviceUrl,n=l.sublayerId)}return{url:iO(e),layerId:n}}function Yne(t,e,i,r,n){xh(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Ll(r.url,i,t.layerId.toString()))}function B9e(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),l=e.includes("/wmsserver");return i&&(r||n||l)}var H8;function Kne(t){var r;const e=t.url?Nd(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&rF(t)&&t.heightModelInfo?t.heightModelInfo:Zne(t)?m_.deriveUnitFromSR(Qne,t.spatialReference):null}function rF(t){return"heightModelInfo"in t}function sF(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Zne(t){return sF(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):nF(t)}function Xne(t){return t.layers!=null||nF(t)||sF(t)||rF(t)}function nF(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(H8||(H8={}));const Qne=new m_({heightModel:"gravity-related-height"});var Nw;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Nw||(Nw={}));let F4,N3=null;async function eoe(t){N3||(N3=le(()=>import("./geometryServiceUtils-7d36b78a.js"),[]).then(e=>F4=e)),await N3,ai(t)}async function oF(t,e,i,r){if(!t)return null;const n=t.spatialReference;return jd()||Nl(n,e)?Nh(t,e):F4?F4.projectGeometry(t,e,i,r):(await Promise.race([eoe(r),$h(r)]),oF(t,e,i,r))}let Xt=class extends Be{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Fy(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,l,d;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(l=e==null?void 0:e.ground)==null?void 0:l.layers},{parent:e==null?void 0:e.basemap,layers:(d=e==null?void 0:e.basemap)==null?void 0:d.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const l of e){const d=this._getSupportedSpatialReferences(l);if(d.length>0){const y=this._narrowDownSpatialReferenceCandidates(r,d);y!=null&&(r=y)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(r);return{spatialReference:n!=null?n.spatialReference:null,viewingMode:n!=null?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,n,l,d,y,b,x;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(y=(d=(l=this.map)==null?void 0:l.call(this))==null?void 0:d.basemap)==null?void 0:y.baseLayers},{layers:(x=(b=this.map)==null?void 0:b.call(this))==null?void 0:x.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const $=e[0].tileInfo;return{tileInfo:$&&$.spatialReference.equals(this.spatialReference)?$:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,n,l;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const d of e)if(Xne(d)){const y=Kne(d);if(y)return{heightModelInfo:y,vcsWkid:(n=d.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(l=d.spatialReference)==null?void 0:l.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const n of e.layers){const l="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),d=this.requiresExtentInSpatialReference?null:l[0],y=l.find(b=>b.spatialReference.equals(this.spatialReference))??d;if(y)return{candidates:[{extent:y,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const b of l)r.push({extent:b,layer:n})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Fy(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:vM(async l=>{try{const d=await oF(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,l);this._projectExtentTask={...this._projectExtentTask,task:null,output:d}}catch{if(Uo(l))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=[],n=(l,d)=>l!=null?d!=null?l===d&&l:l:d;for(const l of e)for(const d of i){if(!l.spatialReference.equals(d.spatialReference))continue;const y=n(l.viewingMode,d.viewingMode);if(y!==!1){r.push({spatialReference:l.spatialReference,viewingMode:y});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==Nw.Local)&&(e=e.filter(({viewingMode:r})=>r!==Nw.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const l=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(l!=null){const d=l.constraints!=null?l.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:y,viewingMode:b}of d)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!y.equals(this.userSpatialReference)||r.push({spatialReference:y,viewingMode:b})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new toe;for(const n of e)if(this._collectCollection(n,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{is(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};g([S()],Xt.prototype,"required",void 0),g([S({constructOnly:!0})],Xt.prototype,"map",void 0),g([S({constructOnly:!0})],Xt.prototype,"getSpatialReferenceSupport",void 0),g([S()],Xt.prototype,"defaultSpatialReference",void 0),g([S()],Xt.prototype,"userSpatialReference",void 0),g([S()],Xt.prototype,"sourcePreloadCount",void 0),g([S()],Xt.prototype,"priorityCollection",void 0),g([S()],Xt.prototype,"requiresExtentInSpatialReference",void 0),g([S()],Xt.prototype,"suspended",void 0),g([S({readOnly:!0})],Xt.prototype,"ready",null),g([S({readOnly:!0})],Xt.prototype,"heightModelInfoReady",null),g([S({readOnly:!0})],Xt.prototype,"spatialReference",null),g([S({readOnly:!0})],Xt.prototype,"extent",null),g([S({readOnly:!0})],Xt.prototype,"heightModelInfo",null),g([S({readOnly:!0})],Xt.prototype,"vcsWkid",null),g([S({readOnly:!0})],Xt.prototype,"latestVcsWkid",null),g([S({readOnly:!0})],Xt.prototype,"viewingMode",null),g([S({readOnly:!0})],Xt.prototype,"tileInfo",null),g([S({readOnly:!0})],Xt.prototype,"mapCollections",null),g([S({readOnly:!0})],Xt.prototype,"_allLayers",null),g([S({readOnly:!0})],Xt.prototype,"_spatialReferenceTask",null),g([S({readOnly:!0})],Xt.prototype,"_tileInfoTask",null),g([S({readOnly:!0})],Xt.prototype,"_heightModelInfoTask",null),g([S({readOnly:!0})],Xt.prototype,"_extentCandidatesTask",null),g([S()],Xt.prototype,"_extentTask",null),g([S()],Xt.prototype,"_projectExtentTask",void 0),Xt=g([J("esri.views.support.DefaultsFromMap")],Xt);let toe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var S1;let Je=S1=class extends Xo(Na.EventedMixin(j2(Be))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new k0({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:roe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new my,this.analyses=new Fw,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ze,this.magnifier=new qj,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Ih,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Bne,this.navigation=new Xj,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new One(this),this.persistableViewModels=new ze,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(me(()=>this.preconditionsReady,e=>{var i,r;e?(this._currentSpatialReference=this.spatialReference,S1.views.add(this)):(this._currentSpatialReference=null,S1.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Rd))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,u_(()=>this.ready)))),this.basemapView=new $u({view:this}),this.layerViewManager=new $ne({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new mo({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([me(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),me(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),me(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([me(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const n=Cl(()=>t=Fy(t));t=vM(async l=>{try{await P2(this.spatialReferenceWarningDelay,null,l)}catch{return}finally{t=null}ge.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(S1.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ei(this.graphics),this.analyses=ei(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ei(this.analysisViewManager),this.toolViewManager=ei(this.toolViewManager),this.layerViewManager=ei(this.layerViewManager),this.basemapView=ei(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=ei(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ge.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Xt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||qo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(ge.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),qo.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!qi(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new se("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&ge.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Hn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Je.views=new ze,g([S()],Je.prototype,"_userSpatialReference",void 0),g([S()],Je.prototype,"activeTool",null),g([S({readOnly:!0})],Je.prototype,"allLayerViews",void 0),g([S()],Je.prototype,"groundView",void 0),g([S()],Je.prototype,"animation",null),g([S()],Je.prototype,"basemapView",void 0),g([S()],Je.prototype,"center",null),g([S({readOnly:!0})],Je.prototype,"_defaultsFromMapSettings",null),g([S()],Je.prototype,"defaultsFromMap",null),g([S()],Je.prototype,"fatalError",void 0),g([S({type:Nt})],Je.prototype,"extent",null),g([S(I8(my,"graphics"))],Je.prototype,"graphics",void 0),g([S(I8(Fw,"analyses"))],Je.prototype,"analyses",void 0),g([S({readOnly:!0,type:m_})],Je.prototype,"heightModelInfo",null),g([S({readOnly:!0})],Je.prototype,"interacting",null),g([S({readOnly:!0})],Je.prototype,"navigating",null),g([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Je.prototype,"preconditionsReady",null),g([S({readOnly:!0})],Je.prototype,"typeSpecificPreconditionsReady",void 0),g([S({type:ze,readOnly:!0})],Je.prototype,"layerViews",void 0),g([S()],Je.prototype,"resolution",null),g([S({type:qj})],Je.prototype,"magnifier",void 0),g([S({value:null,type:kL})],Je.prototype,"map",null),g([S()],Je.prototype,"padding",void 0),g([S({readOnly:!0})],Je.prototype,"ready",void 0),g([S({type:dt})],Je.prototype,"spatialReference",null),g([S()],Je.prototype,"spatialReferenceWarningDelay",void 0),g([S()],Je.prototype,"stationary",null),g([S({readOnly:!0})],Je.prototype,"supportsGround",void 0),g([S({type:Zo})],Je.prototype,"timeExtent",void 0),g([S({type:Ih,nonNullable:!0})],Je.prototype,"timeReference",void 0),g([S()],Je.prototype,"tools",null),g([S()],Je.prototype,"toolViewManager",void 0),g([S({readOnly:!0})],Je.prototype,"type",void 0),g([S({type:Number})],Je.prototype,"scale",void 0),g([S({readOnly:!0})],Je.prototype,"updating",void 0),g([S({readOnly:!0})],Je.prototype,"initialExtentRequired",void 0),g([S({readOnly:!0})],Je.prototype,"initialExtent",null),g([S()],Je.prototype,"cursor",null),g([S({readOnly:!0})],Je.prototype,"input",void 0),g([S({type:Xj,nonNullable:!0})],Je.prototype,"navigation",void 0),g([S()],Je.prototype,"layerViewManager",void 0),g([S()],Je.prototype,"analysisViewManager",void 0),g([S()],Je.prototype,"width",void 0),g([S()],Je.prototype,"height",void 0),g([S({readOnly:!0})],Je.prototype,"resizing",void 0),g([S({value:null,readOnly:!0})],Je.prototype,"size",null),g([S({readOnly:!0})],Je.prototype,"suspended",void 0),g([S({readOnly:!0})],Je.prototype,"viewEvents",void 0),g([S({readOnly:!0})],Je.prototype,"persistableViewModels",void 0),g([S()],Je.prototype,"_isValid",void 0),g([S()],Je.prototype,"_readyCycleForced",void 0),g([S()],Je.prototype,"_currentSpatialReference",void 0),Je=S1=g([J("esri.views.View")],Je);const ioe=Je;function roe(t){return t.layerViews}let Iu=class extends ow{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Gn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new se("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Vl(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};g([S({readOnly:!0})],Iu.prototype,"done",null),g([S({readOnly:!0,type:String})],Iu.prototype,"state",void 0),g([S()],Iu.prototype,"target",void 0),Iu=g([J("esri.views.ViewAnimation")],Iu),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Iu||(Iu={}));const N4=Iu;function Uc(t,e,i,r){const n=3*t,l=3*(i-t)-n,d=1-n-l,y=3*e,b=3*(r-e)-y,x=1-y-b;function $(D){return((d*D+l)*D+n)*D}function E(D){return((x*D+b)*D+y)*D}function k(D){return(3*d*D+2*l)*D+n}function P(D,L){let N,B,W,H,Y,ie;for(W=D,ie=0;ie<8;ie++){if(H=$(W)-D,Math.abs(H)<L)return W;if(Y=k(W),Math.abs(Y)<1e-6)break;W-=H/Y}if(N=0,B=1,W=D,W<N)return N;if(W>B)return B;for(;N<B;){if(H=$(W),Math.abs(H-D)<L)return W;D>H?N=W:B=W,W=.5*(B-N)+N}return W}return function(D,L=1e-6){return E(P(D,L))}}const soe=/^cubic-bezier\((.*)\)/,Cn={};function noe(t){let e=Cn[t]||null;if(!e){const i=soe.exec(t);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(e=Uc.apply(Uc,r))}}return e}Cn.ease=Uc(.25,.1,.25,1),Cn.linear=Uc(0,0,1,1),Cn.easeIn=Cn["ease-in"]=Uc(.42,0,1,1),Cn.easeOut=Cn["ease-out"]=Uc(0,0,.58,1),Cn.easeInOut=Cn["ease-in-out"]=Uc(.42,0,.58,1);function ooe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function g_(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function aoe(t,e,i,r,n,l,d){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=l,t[5]=d,t}function U7(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5];let b=i*l-r*n;return b?(b=1/b,t[0]=l*b,t[1]=-r*b,t[2]=-n*b,t[3]=i*b,t[4]=(n*y-l*d)*b,t[5]=(r*d-i*y)*b,t):null}function loe(t){return t[0]*t[3]-t[1]*t[2]}function qc(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=i[0],$=i[1],E=i[2],k=i[3],P=i[4],D=i[5];return t[0]=r*x+l*$,t[1]=n*x+d*$,t[2]=r*E+l*k,t[3]=n*E+d*k,t[4]=r*P+l*D+y,t[5]=n*P+d*D+b,t}function Om(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=Math.sin(i),$=Math.cos(i);return t[0]=r*$+l*x,t[1]=n*$+d*x,t[2]=r*-x+l*$,t[3]=n*-x+d*$,t[4]=y,t[5]=b,t}function v_(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=i[0],$=i[1];return t[0]=r*x,t[1]=n*x,t[2]=l*$,t[3]=d*$,t[4]=y,t[5]=b,t}function N0(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=i[0],$=i[1];return t[0]=r,t[1]=n,t[2]=l,t[3]=d,t[4]=r*x+l*$+y,t[5]=n*x+d*$+b,t}function aF(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function lF(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function q7(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function uoe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function hoe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function coe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function uF(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function doe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function poe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function foe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function yoe(t,e){const i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],b=e[0],x=e[1],$=e[2],E=e[3],k=e[4],P=e[5],D=Wn();return Math.abs(i-b)<=D*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(r-x)<=D*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-$)<=D*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(l-E)<=D*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(d-k)<=D*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(y-P)<=D*Math.max(1,Math.abs(y),Math.abs(P))}const moe=qc,goe=uF;Object.freeze(Object.defineProperty({__proto__:null,add:coe,copy:ooe,determinant:loe,equals:yoe,exactEquals:foe,frob:hoe,fromRotation:aF,fromScaling:lF,fromTranslation:q7,identity:g_,invert:U7,mul:moe,multiply:qc,multiplyScalar:doe,multiplyScalarAndAdd:poe,rotate:Om,scale:v_,set:aoe,str:uoe,sub:goe,subtract:uF,translate:N0},Symbol.toStringTag,{value:"Module"}));function yh(){return[1,0,0,1,0,0]}function voe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function boe(t,e,i,r,n,l){return[t,e,i,r,n,l]}function woe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:voe,create:yh,createView:woe,fromValues:boe},Symbol.toStringTag,{value:"Module"}));function sm(t,e){return t[0]=e[0],t[1]=e[1],t}function Mr(t,e,i){return t[0]=e,t[1]=i,t}function hF(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function nm(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function cF(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function dF(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function _oe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function xoe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Soe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Moe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function $oe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Lm(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Toe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function Dm(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function zw(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function Vw(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function pF(t){const e=t[0],i=t[1];return e*e+i*i}function fF(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ioe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function z4(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function yF(t,e){return t[0]*e[0]+t[1]*e[1]}function mF(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Eoe(t,e,i,r){const n=e[0],l=e[1];return t[0]=n+r*(i[0]-n),t[1]=l+r*(i[1]-l),t}function Aoe(t,e){e=e||1;const i=2*G2()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function koe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Ia(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function Poe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Coe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Ooe(t,e,i,r){const n=e[0]-i[0],l=e[1]-i[1],d=Math.sin(r),y=Math.cos(r);return t[0]=n*y-l*d+i[0],t[1]=n*d+l*y+i[1],t}function Loe(t,e){const i=t[0],r=t[1],n=e[0],l=e[1];let d=i*i+r*r;d>0&&(d=1/Math.sqrt(d));let y=n*n+l*l;y>0&&(y=1/Math.sqrt(y));const b=(i*n+r*l)*d*y;return b>1?0:b<-1?Math.PI:Math.acos(b)}function Doe(t){return"vec2("+t[0]+", "+t[1]+")"}function Roe(t,e){return t[0]===e[0]&&t[1]===e[1]}function joe(t,e){const i=t[0],r=t[1],n=e[0],l=e[1],d=Wn();return Math.abs(i-n)<=d*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))}function Foe(t,e,i,r,n){let l=e[0]-i[0],d=e[1]-i[1];const y=(r[0]*l+r[1]*d)*(n-1);return l=r[0]*y,d=r[1]*y,t[0]=e[0]+l,t[1]=e[1]+d,t}const Noe=Vw,H7=nm,zoe=cF,Voe=dF,Boe=Dm,Goe=zw,Uoe=pF;Object.freeze(Object.defineProperty({__proto__:null,add:hF,angle:Loe,ceil:_oe,copy:sm,cross:mF,dist:Boe,distance:Dm,div:Voe,divide:dF,dot:yF,equals:joe,exactEquals:Roe,floor:xoe,inverse:Ioe,len:Noe,length:Vw,lerp:Eoe,max:Moe,min:Soe,mul:zoe,multiply:cF,negate:fF,normalize:z4,projectAndScale:Foe,random:Aoe,rotate:Ooe,round:$oe,scale:Lm,scaleAndAdd:Toe,set:Mr,sqrDist:Goe,sqrLen:Uoe,squaredDistance:zw,squaredLength:pF,str:Doe,sub:H7,subtract:nm,transformMat2:koe,transformMat2d:Ia,transformMat3:Poe,transformMat4:Coe},Symbol.toStringTag,{value:"Module"}));function Ni(){return[0,0]}function qoe(t){return[t[0],t[1]]}function Rm(t,e){return[t,e]}function Hoe(t){const e=Ni(),i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Woe(t,e){return new Float64Array(t,e,2)}function gF(){return Ni()}function vF(){return Rm(1,1)}function bF(){return Rm(1,0)}function wF(){return Rm(0,1)}const Joe=gF(),Yoe=vF(),Koe=bF(),Zoe=wF();Object.freeze(Object.defineProperty({__proto__:null,ONES:Yoe,UNIT_X:Koe,UNIT_Y:Zoe,ZEROS:Joe,clone:qoe,create:Ni,createView:Woe,fromArray:Hoe,fromValues:Rm,ones:vF,unitX:bF,unitY:wF,zeros:gF},Symbol.toStringTag,{value:"Module"}));const _F=96,xF=39.37,Xoe=180/Math.PI;function SF(t){return t.wkid?t:t.spatialReference||dt.WGS84}function W7(t,e){return e.type?Mr(t,e.x,e.y):sm(t,e)}function MF(t){return Bl(t)}function d0(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*aae(t.spatialReference)}async function M1(t,e,i,r){var y,b;let n,l;if(!t||Array.isArray(t)&&!t.length)return null;if(ze.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const x=t.every(k=>"attributes"in k),$=t.some(k=>!k.geometry);let E=t;if(x&&$&&e&&e.allLayerViews){const k=new Map;for(const N of t){const B=N.layer,W=k.get(B)||[],H=N.attributes[B.objectIdField];H!=null&&W.push(H),k.set(B,W)}const P=[];k.forEach((N,B)=>{const W=e.allLayerViews.find(H=>H.layer.id===B.id);if(W&&"queryFeatures"in W){const H=B.createQuery();H.objectIds=N,H.returnGeometry=!0,P.push(W.queryFeatures(H))}});const D=await Promise.all(P),L=[];for(const N of D)if(N&&N.features&&N.features.length)for(const B of N.features)B.geometry!=null&&L.push(B.geometry);E=L}for(const k of E)r=await M1(k,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new lt(t);else if(t instanceof Ch)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const x=t.layer,$=e.allLayerViews.find(E=>E.layer.id===x.id);if($&&"queryFeatures"in $){const E=x.createQuery();E.objectIds=[t.attributes[x.objectIdField]],E.returnGeometry=!0;const k=await $.queryFeatures(E);n=(b=(y=k==null?void 0:k.features)==null?void 0:y[0])==null?void 0:b.geometry}}}if(n==null||(l=n.type==="point"?new Nt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!l))return null;jd()||Nl(l.spatialReference,i)||await $h();const d=Nh(l,i);return d?r=r?r.union(d):d:null}function Qoe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const n=r.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,i=n.maxScale>i?n.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function z3(t,e){return qi(SF(t),e)?t:Nh(t,e)}async function eae(t,e){if(!t||!e)return new ka({targetGeometry:new lt,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:l,size:d}=e,y=[n?d[0]-n.left-n.right:d[0],n?d[1]-n.top-n.bottom:d[1]];let b=null;t instanceof ka?b=t:t.viewpoint?b=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(b=t.target);let x=null;b&&b.targetGeometry?x=b.targetGeometry:t instanceof Nt?x=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(x=await M1(t.center,e,i)||await M1(t.extent,e,i)||await M1(t.target,e,i)||await M1(t,e,i)),!x&&l&&l.targetGeometry?x=l.targetGeometry:!x&&e.extent&&(x=e.extent),i||(i=SF(e.spatialReference||e.extent||x)),jd()||qi(x.spatialReference,i)||Nl(x,i)||await $h();const $=z3(x.center??x,i);let E=0;if(b&&b.targetGeometry!=null&&b.targetGeometry.type==="point")E=b.scale;else if("scale"in t&&t.scale)E=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)E=r.zoomToScale(t.zoom);else if(Array.isArray(x)||x.type==="point"||x.type==="extent"&&x.width===0&&x.height===0){const L=z3(e.extent,i);E=L!=null?d0(L,y):e.extent?d0(e.extent,y):l.scale}else E=d0(z3(x.extent,i),y);const k=Qoe(t);k&&(k.min&&k.min>E?E=k.min:k.max&&k.max<E&&(E=k.max));let P=0;b?P=b.rotation:t.hasOwnProperty("rotation")?P=t.rotation:l&&(P=l.rotation);let D=new ka({targetGeometry:$,scale:E,rotation:P});return r&&(D=r.fit(D),r.constrainByGeometry(D),r.rotationEnabled||(D.rotation=P)),D}function Qo(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function tae(t,e,i){return i?Mr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Lm(t,e,.5)}const iae=function(){const t=Ni();return function(e,i,r){const n=i.targetGeometry;W7(t,n);const l=.5*lf(i);return e.xmin=t[0]-l*r[0],e.ymin=t[1]-l*r[1],e.xmax=t[0]+l*r[0],e.ymax=t[1]+l*r[1],e.spatialReference=n.spatialReference,e}}();function rae(t,e,i,r,n){var l;return V4(t,e,i.center),t.scale=d0(i,r),(l=n==null?void 0:n.constraints)==null||l.constrain(t),t}function sae(t,e,i,r){return K7(t,e,i,r),U7(t,t)}const $F=function(){const t=Ni();return function(e,i,r){return H7(e,lae(e,i),tae(t,i,r))}}(),nae=function(){const t=yh(),e=Ni();return function(i,r,n,l){const d=lf(r),y=J7(r);return Mr(e,d,d),lF(t,e),Om(t,t,y),N0(t,t,$F(e,n,l)),N0(t,t,[0,l.top-l.bottom]),Mr(i,t[4],t[5])}}();function lf(t){return t.scale*oae(t.targetGeometry)}function oae(t){return t!=null&&Ir(t.spatialReference)?1/(MF(t.spatialReference)*xF*_F):1}function J7(t){return BM(t.rotation)||0}function aae(t){return Ir(t)?MF(t)*xF*_F:1}function lae(t,e){return Lm(t,e,.5)}const Y7=function(){const t=Ni(),e=Ni(),i=Ni();return function(r,n,l,d,y,b){return fF(t,n),Lm(e,l,.5*b),Mr(i,1/d*b,-1/d*b),q7(r,e),y&&Om(r,r,y),v_(r,r,i),N0(r,r,t),r}}(),K7=function(){const t=Ni();return function(e,i,r,n){const l=lf(i),d=J7(i);return W7(t,i.targetGeometry),Y7(e,t,r,l,d,n)}}(),uae=function(){const t=Ni();return function(e,i,r,n){const l=lf(i);return W7(t,i.targetGeometry),Y7(e,t,r,l,0,n)}}();function hae(t){const e=Fo(t);return e?e.valid[1]-e.valid[0]:0}function cae(t,e){return Math.round(hae(t)/e)}const dae=function(){const t=Ni(),e=Ni(),i=[0,0,0];return function(r,n,l){nm(t,r,n),z4(t,t),nm(e,r,l),z4(e,e),mF(i,t,e);let d=Math.acos(yF(t,e)/(Vw(t)*Vw(e)))*Xoe;return i[2]<0&&(d=-d),isNaN(d)&&(d=0),d}}(),pae=function(){const t=Ni();return function(e,i,r,n){const l=e.targetGeometry;return Qo(e,i),nae(t,i,r,n),l.x+=t[0],l.y+=t[1],e}}(),V4=function(t,e,i){Qo(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},fae=function(){const t=Ni();return function(e,i,r,n,l){l||(l="center"),H7(t,r,n),Lm(t,t,.5);const d=t[0],y=t[1];switch(l){case"center":Mr(t,0,0);break;case"left":Mr(t,-d,0);break;case"top":Mr(t,0,y);break;case"right":Mr(t,d,0);break;case"bottom":Mr(t,0,-y);break;case"top-left":Mr(t,-d,y);break;case"bottom-left":Mr(t,-d,-y);break;case"top-right":Mr(t,d,y);break;case"bottom-right":Mr(t,d,-y)}return b_(e,i,t),e}}();function H9e(t,e,i){return Qo(t,e),t.rotation+=i,t}function yae(t,e,i){return Qo(t,e),t.rotation=i,t}const mae=function(){const t=Ni();return function(e,i,r,n,l){return Qo(e,i),isNaN(r)||r===0||(IF(t,n,i,l),e.scale=i.scale*r,EF(t,t,e,l),b_(e,e,Mr(t,t[0]-n[0],n[1]-t[1]))),e}}();function W8(t,e,i){return Qo(t,e),t.scale=i,t}const TF=function(){const t=Ni();return function(e,i,r,n,l,d){return Qo(e,i),isNaN(r)||r===0||(IF(t,l,i,d),e.scale=i.scale*r,e.rotation+=n,EF(t,t,e,d),b_(e,e,Mr(t,t[0]-l[0],l[1]-t[1]))),e}}(),W9e=function(){const t=Ni(),e=Ni();return function(i,r,n,l,d,y,b){return $F(e,y,b),hF(t,d,e),l?TF(i,r,n,l,t,y):mae(i,r,n,t,y)}}(),IF=function(){const t=yh();return function(e,i,r,n){return Ia(e,i,sae(t,r,n,1))}}(),EF=function(){const t=yh();return function(e,i,r,n){return Ia(e,i,K7(t,r,n,1))}}(),b_=function(){const t=Ni(),e=yh();return function(i,r,n){Qo(i,r);const l=lf(r),d=i.targetGeometry;return aF(e,J7(r)),v_(e,e,Rm(l,l)),Ia(t,n,e),d.x+=t[0],d.y+=t[1],i}}();let gae=class{constructor(e,i,r,n){const l=e.targetGeometry,d=i.targetGeometry;n?typeof n=="string"&&(n=noe(n)||Cn.ease):n=Cn.ease,this.easing=n,this.duration=r,this.sCenterX=l.x,this.sCenterY=l.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=d.x,this.tCenterY=d.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let n,l,d,y;i>=1?(n=this.tCenterX,l=this.tCenterY,d=this.tRotation,y=this.tScale):(n=this.sCenterX+r*this.dCenterX,l=this.sCenterY+r*this.dCenterY,d=this.sRotation+r*this.dRotation,y=this.sScale+r*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=l,e.scale=y,e.rotation=d}},sl=class extends Be{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Cn.ease,this.view=null,this.viewpoint=new ka({targetGeometry:new lt,scale:0,rotation:0}),this._updateTask=M0({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Mi(this._updateTask)}animate(e,i,r){this.stop();const n=this.viewpoint;Qo(n,i),this.transition=new gae(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const l=()=>{var d,y;this.animation===e&&this._updateTask&&(e.state==="finished"&&((d=this.transition)==null||d.applyRatio(this.viewpoint,1),(y=this.view)!=null&&y.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(l,l),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new N4({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==N4.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const l=this.transition,d=(performance.now()-this._startTime)/l.duration,y=d>=1;l.applyRatio(this.viewpoint,d),y&&((r=this.animation)==null||r.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};g([S()],sl.prototype,"animation",void 0),g([S()],sl.prototype,"duration",void 0),g([S()],sl.prototype,"transition",void 0),g([S()],sl.prototype,"easing",void 0),g([S()],sl.prototype,"view",void 0),g([S()],sl.prototype,"viewpoint",void 0),sl=g([J("esri.views.2d.AnimationManager")],sl);const vae=sl;let bae=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var d,y;if(this._updateRequested=!1,(d=this.view)==null?void 0:d.destroyed)return;const{allLayerViews:i,graphicsView:r,labelManager:n,state:{id:l}}=this.view;i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==l&&(n.viewChange(),n.lastUpdateId=l),n.updateRequested&&n.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==l&&(r.viewChange(),r.lastUpdateId=l),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((y=this._frameTaskHandle)==null||y.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=me(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=M0(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function Ai(){return Promise.all([le(()=>import("./webglDeps-4d0faf48.js"),["assets/webglDeps-4d0faf48.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/ProgramTemplate-7bbdf1d1.js","assets/programUtils-d9cfeb9e.js","assets/NestedMap-1b5db22e.js"]),le(()=>import("./mapViewDeps-184895bd.js"),["assets/mapViewDeps-184895bd.js","assets/CIMResourceManager-00eb191d.js","assets/fontUtils-e5a6d9a4.js","assets/Rasterizer-e647197f.js","assets/cimAnalyzer-6c67340f.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-9bd633e4.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/rasterizingUtils-09460abf.js","assets/imageutils-42b20626.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/BufferPool-4e7a4bb4.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/enums-fb086c25.js","assets/programUtils-d9cfeb9e.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-8fdcc51b.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-158819a5.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/RenderingContext-dec677ea.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/GraphicContainer-7d425371.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-f29702cb.js"])])}const Lf=()=>Ai().then(()=>le(()=>import("./TileLayerView2D-03f6669a.js"),["assets/TileLayerView2D-03f6669a.js","assets/Rasterizer-e647197f.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-9bd633e4.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/rasterizingUtils-09460abf.js","assets/EffectView-1f253006.js","assets/Container-6d7657d3.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/BufferPool-4e7a4bb4.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-8fdcc51b.js","assets/imageutils-42b20626.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-158819a5.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-5f19b81e.js","assets/BitmapTileContainer-e283f7dd.js","assets/Bitmap-f1b2cf0b.js","assets/TileContainer-932ca96d.js","assets/LayerView-de5fc9b1.js","assets/HighlightGraphicContainer-a9414406.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/RefreshableLayerView-5611363e.js","assets/drapedUtils-7347472f.js","assets/popupUtils-09881f6b.js"])),Wd=()=>Ai().then(()=>le(()=>import("./FeatureLayerView2D-ad00d5f8.js"),["assets/FeatureLayerView2D-ad00d5f8.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/BitmapTileContainer-e283f7dd.js","assets/Bitmap-f1b2cf0b.js","assets/TileContainer-932ca96d.js","assets/CircularArray-ef508845.js","assets/BufferPool-4e7a4bb4.js","assets/FeatureContainer-20504031.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),J8={"base-dynamic":()=>Ai().then(()=>le(()=>import("./BaseDynamicLayerView2D-36774cb7.js"),["assets/BaseDynamicLayerView2D-36774cb7.js","assets/BitmapContainer-18c4dd8d.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/ExportStrategy-e0839890.js","assets/Bitmap-f1b2cf0b.js","assets/RefreshableLayerView-5611363e.js"])),"base-tile":Lf,"bing-maps":Lf,csv:Wd,"geo-rss":()=>Ai().then(()=>le(()=>import("./GeoRSSLayerView2D-c19cf44c.js"),["assets/GeoRSSLayerView2D-c19cf44c.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/GraphicContainer-7d425371.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js"])),feature:Wd,geojson:Wd,graphics:()=>Ai().then(()=>le(()=>import("./GraphicsLayerView2D-04c74684.js"),["assets/GraphicsLayerView2D-04c74684.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/GraphicContainer-7d425371.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js"])),group:()=>Ai().then(()=>le(()=>import("./GroupLayerView2D-5380be59.js"),["assets/GroupLayerView2D-5380be59.js","assets/GroupContainer-7ce61d77.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js"])),imagery:()=>Ai().then(()=>le(()=>import("./ImageryLayerView2D-64c5f766.js"),["assets/ImageryLayerView2D-64c5f766.js","assets/RasterVFDisplayObject-63b1c96f.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-1c3d1393.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/GraphicsView2D-98f990c3.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/visualVariablesUtils-084bce9d.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-a9414406.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-18c4dd8d.js","assets/Bitmap-f1b2cf0b.js","assets/ExportStrategy-e0839890.js","assets/rasterProjectionHelper-85190f39.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),"imagery-tile":()=>Ai().then(()=>le(()=>import("./ImageryTileLayerView2D-b48569a6.js"),["assets/ImageryTileLayerView2D-b48569a6.js","assets/multidimensionalUtils-ab740bf1.js","assets/RasterVFDisplayObject-63b1c96f.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-1c3d1393.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/rasterUtils-3bd481b3.js","assets/TiledDisplayObject-ce000c2d.js","assets/TileContainer-932ca96d.js","assets/RawBlockCache-74489721.js","assets/rasterProjectionHelper-85190f39.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-6fd73f41.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),kml:()=>Ai().then(()=>le(()=>import("./KMLLayerView2D-9fc9f24b.js"),["assets/KMLLayerView2D-9fc9f24b.js","assets/kmlUtils-2b553327.js","assets/Bitmap-f1b2cf0b.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/BitmapContainer-18c4dd8d.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/GraphicContainer-7d425371.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-85190f39.js","assets/RenderingContext-dec677ea.js","assets/programUtils-d9cfeb9e.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-158819a5.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-3bd481b3.js"])),"knowledge-graph":()=>Ai().then(()=>le(()=>import("./KnowledgeGraphLayerView2D-80362e7e.js"),["assets/KnowledgeGraphLayerView2D-80362e7e.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js"])),"link-chart":()=>Ai().then(()=>le(()=>import("./KnowledgeGraphLayerView2D-80362e7e.js"),["assets/KnowledgeGraphLayerView2D-80362e7e.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js"])),"knowledge-graph-sublayer":Wd,"map-image":()=>Ai().then(()=>le(()=>import("./MapImageLayerView2D-a1777628.js"),["assets/MapImageLayerView2D-a1777628.js","assets/BitmapContainer-18c4dd8d.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/GraphicsView2D-98f990c3.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/visualVariablesUtils-084bce9d.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-a9414406.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-e0839890.js","assets/Bitmap-f1b2cf0b.js","assets/RefreshableLayerView-5611363e.js","assets/drapedUtils-7347472f.js","assets/popupUtils-09881f6b.js"])),"map-notes":()=>Ai().then(()=>le(()=>import("./MapNotesLayerView2D-f30184d2.js"),["assets/MapNotesLayerView2D-f30184d2.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/GroupContainer-7ce61d77.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/GraphicContainer-7d425371.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js"])),media:()=>Ai().then(()=>le(()=>import("./MediaLayerView2D-107a893d.js"),["assets/MediaLayerView2D-107a893d.js","assets/perspectiveUtils-0d70e909.js","assets/normalizeUtilsSync-dc350495.js","assets/mat3f64-221ce671.js","assets/Rasterizer-e647197f.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-9bd633e4.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/rasterizingUtils-09460abf.js","assets/EffectView-1f253006.js","assets/Container-6d7657d3.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/BufferPool-4e7a4bb4.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-8fdcc51b.js","assets/imageutils-42b20626.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-158819a5.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-98f990c3.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-de5fc9b1.js"])),"ogc-feature":()=>Ai().then(()=>le(()=>import("./OGCFeatureLayerView2D-ed94635b.js"),["assets/OGCFeatureLayerView2D-ed94635b.js","assets/FeatureLayerView2D-ad00d5f8.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/BitmapTileContainer-e283f7dd.js","assets/Bitmap-f1b2cf0b.js","assets/TileContainer-932ca96d.js","assets/CircularArray-ef508845.js","assets/BufferPool-4e7a4bb4.js","assets/FeatureContainer-20504031.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),"open-street-map":Lf,"oriented-imagery":Wd,route:()=>Ai().then(()=>le(()=>import("./RouteLayerView2D-fd1dc0da.js"),["assets/RouteLayerView2D-fd1dc0da.js","assets/Stop-48c631b9.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/GraphicContainer-7d425371.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js"])),stream:()=>Ai().then(()=>le(()=>import("./StreamLayerView2D-223e01c3.js"),["assets/StreamLayerView2D-223e01c3.js","assets/FeatureLayerView2D-ad00d5f8.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/BitmapTileContainer-e283f7dd.js","assets/Bitmap-f1b2cf0b.js","assets/TileContainer-932ca96d.js","assets/CircularArray-ef508845.js","assets/BufferPool-4e7a4bb4.js","assets/FeatureContainer-20504031.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),"subtype-group":()=>Ai().then(()=>le(()=>import("./SubtypeGroupLayerView2D-48b147e2.js"),["assets/SubtypeGroupLayerView2D-48b147e2.js","assets/FeatureLayerView2D-ad00d5f8.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/BitmapTileContainer-e283f7dd.js","assets/Bitmap-f1b2cf0b.js","assets/TileContainer-932ca96d.js","assets/CircularArray-ef508845.js","assets/BufferPool-4e7a4bb4.js","assets/FeatureContainer-20504031.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),tile:Lf,"vector-tile":()=>Ai().then(()=>le(()=>import("./VectorTileLayerView2D-d5dd8658.js"),["assets/VectorTileLayerView2D-d5dd8658.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/rasterizingUtils-09460abf.js","assets/floatRGBA-6de551b1.js","assets/VertexArrayObject-e167aff4.js","assets/config-1337d16e.js","assets/TiledDisplayObject-ce000c2d.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-6250d5ce.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-932ca96d.js","assets/WGLContainer-cb5f2066.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/earcut-19a5cba4.js","assets/StyleRepository-7e18bafb.js","assets/GeometryUtils-53652037.js","assets/LayerView-de5fc9b1.js"])),video:()=>Ai().then(()=>le(()=>import("./VideoLayerView2D-e91ee56c.js"),["assets/VideoLayerView2D-e91ee56c.js","assets/LayerView-de5fc9b1.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js"])),wcs:()=>Ai().then(()=>le(()=>import("./ImageryTileLayerView2D-b48569a6.js"),["assets/ImageryTileLayerView2D-b48569a6.js","assets/multidimensionalUtils-ab740bf1.js","assets/RasterVFDisplayObject-63b1c96f.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-1c3d1393.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/rasterUtils-3bd481b3.js","assets/TiledDisplayObject-ce000c2d.js","assets/TileContainer-932ca96d.js","assets/RawBlockCache-74489721.js","assets/rasterProjectionHelper-85190f39.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-6fd73f41.js","assets/popupUtils-09881f6b.js","assets/RefreshableLayerView-5611363e.js"])),"web-tile":Lf,wfs:Wd,wms:()=>Ai().then(()=>le(()=>import("./WMSLayerView2D-626a39ce.js"),["assets/WMSLayerView2D-626a39ce.js","assets/BitmapContainer-18c4dd8d.js","assets/WGLContainer-cb5f2066.js","assets/definitions-9bd633e4.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/earcut-19a5cba4.js","assets/LayerView-de5fc9b1.js","assets/ExportStrategy-e0839890.js","assets/Bitmap-f1b2cf0b.js","assets/RefreshableLayerView-5611363e.js","assets/ExportWMSImageParameters-d0da8634.js"])),wmts:()=>Ai().then(()=>le(()=>import("./WMTSLayerView2D-cd7034c5.js"),["assets/WMTSLayerView2D-cd7034c5.js","assets/imageUtils-5f19b81e.js","assets/BitmapTileContainer-e283f7dd.js","assets/Bitmap-f1b2cf0b.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/definitions-9bd633e4.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/TiledDisplayObject-ce000c2d.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-6250d5ce.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/TileContainer-932ca96d.js","assets/LayerView-de5fc9b1.js","assets/RefreshableLayerView-5611363e.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function wae(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new se(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const Y8={hasLayerViewModule:t=>J8[t.type]!=null,importLayerView:t=>{const e=J8[t.type];if(e==null)throw wae(t);return e(t)}};function _ae(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n=Number.POSITIVE_INFINITY,l=0,d=0;const y=[0,0],b=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const x of b)for(let $=0;$<x.length-1;$++){QK(y,r,x,$);const E=Dm(r,y);E<n&&(n=E,l=y[0],d=y[1])}return{coordinate:new lt({x:l,y:d,spatialReference:i}),distance:n}}var B4;let Hc=B4=class extends QM(Be){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Nh(this.geometry,this.spatialReference)}catch(t){return ge.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?B2(this.normalizedGeometry,i):SO(this.normalizedGeometry,i))return t;const{coordinate:r}=_ae(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new B4({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};g([S({constructOnly:!0})],Hc.prototype,"geometry",void 0),g([S({readOnly:!0})],Hc.prototype,"normalizedGeometry",null),g([S({constructOnly:!0})],Hc.prototype,"spatialReference",void 0),Hc=B4=g([J("esri.views.2d.constraints.GeometryConstraint")],Hc);var G4;let $1=G4=class extends QM(Be){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new G4({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};g([S()],$1.prototype,"enabled",void 0),g([S()],$1.prototype,"rotationEnabled",void 0),$1=G4=g([J("esri.views.2d.constraints.RotationConstraint")],$1);const AF=$1;var U4;let Es=U4=class extends QM(Be){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:l}=this,d=-1,y=-1,b=!1,x=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map($=>$.clone()),e.sort(($,E)=>E.scale-$.scale),e.forEach(($,E)=>$.level=E);for(const $ of e)!b&&i>0&&i>=$.scale&&(d=$.level,b=!0),!x&&r>0&&r>=$.scale&&(y=t?t.level:-1,x=!0),t=$;n===-1&&(n=i===0?0:d),l===-1&&(l=r===0?e.length-1:y),n=Math.max(n,0),n=Math.min(n,e.length-1),l=Math.max(l,0),l=Math.min(l,e.length-1),n>l&&([n,l]=[l,n]),i=e[n].scale,r=e[l].scale,e.splice(0,n),e.splice(l-n+1,e.length),e.forEach(($,E)=>{this._lodByScale[$.scale]=$,this._scales[E]=$.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",l),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,l=e&&e.targetGeometry,d=r!==0&&t.scale<r,y=i!==0&&t.scale>i;if(d||y){const b=y?i:r;if(e&&l){const x=(b-e.scale)/(t.scale-e.scale);n.x=l.x+(n.x-l.x)*x,n.y=l.y+(n.y-l.y)*x}t.scale=b}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new U4({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};g([S({readOnly:!0})],Es.prototype,"effectiveLODs",void 0),g([S({readOnly:!0})],Es.prototype,"effectiveMinZoom",void 0),g([S({readOnly:!0})],Es.prototype,"effectiveMaxZoom",void 0),g([S({readOnly:!0})],Es.prototype,"effectiveMinScale",void 0),g([S({readOnly:!0})],Es.prototype,"effectiveMaxScale",void 0),g([S()],Es.prototype,"lods",void 0),g([S()],Es.prototype,"minZoom",void 0),g([S()],Es.prototype,"maxZoom",void 0),g([S()],Es.prototype,"minScale",void 0),g([S()],Es.prototype,"maxScale",void 0),g([S()],Es.prototype,"snapToZoom",void 0),Es=U4=g([J("esri.views.2d.constraints.ZoomConstraint")],Es);const kF=Es,xae={base:null,key:"type",typeMap:{extent:Nt,polygon:Dl}};let Oi=class extends Be{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ze}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Hc({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new AF({rotationEnabled:this.rotationEnabled})}get _zoom(){var b;const e=this._get("_zoom"),i=this.lods||((b=this.view)==null?void 0:b.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,l=this.minScale,d=this.maxScale,y=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===l&&e.maxScale===d&&e.snapToZoom===y?e:new kF({lods:i,minZoom:r,maxZoom:n,minScale:l,maxScale:d,snapToZoom:y})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};g([S({readOnly:!0})],Oi.prototype,"effectiveLODs",null),g([S({readOnly:!0})],Oi.prototype,"effectiveMinScale",null),g([S({readOnly:!0})],Oi.prototype,"effectiveMaxScale",null),g([S({readOnly:!0})],Oi.prototype,"effectiveMinZoom",null),g([S({readOnly:!0})],Oi.prototype,"effectiveMaxZoom",null),g([S({types:xae,value:null})],Oi.prototype,"geometry",null),g([S({type:[zu]})],Oi.prototype,"lods",void 0),g([S()],Oi.prototype,"minScale",void 0),g([S()],Oi.prototype,"maxScale",void 0),g([S()],Oi.prototype,"minZoom",void 0),g([S()],Oi.prototype,"maxZoom",void 0),g([S()],Oi.prototype,"rotationEnabled",void 0),g([S()],Oi.prototype,"snapToZoom",void 0),g([S({type:ze})],Oi.prototype,"customConstraints",void 0),g([S()],Oi.prototype,"view",void 0),g([S({readOnly:!0})],Oi.prototype,"version",null),g([S({type:Hc,readOnly:!0})],Oi.prototype,"_geometry",null),g([S({type:AF})],Oi.prototype,"_rotation",null),g([S({readOnly:!0,type:kF})],Oi.prototype,"_zoom",null),Oi=g([J("esri.views.2d.MapViewConstraints")],Oi);const PF=Oi;let Sae=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},CF=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Tw(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Mi(this._schedule),this._task=Mi(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let l=null;i&&(l=zn(i,()=>n.abort()));const d=()=>{const $=this._processingItems.get(e);$&&$.controller.abort(),y(),x.reject($i())},y=()=>{b.remove(),l!=null&&l.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},b=hM(n.signal,d),x=Gn();return this._deferreds.set(e,x),this._controllers.set(e,n),x.promise.then(y,y),this._queue.push(e),this._scheduleNext(),x.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=H0(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new Sae(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(l){this._processError(n,l)}Vl(i)?(n.promise=i,i.then(l=>this._processResult(n,l),l=>this._processError(n,l))):this._processResult(n,i)}get test(){return{update:e=>this.runTask(e)}}};function Mae(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const V3=new Set,Og=[],Jd=new Map,K8=[0,0];let iu=class extends Be{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new CF({concurrency:e,process:(r,n)=>{const l=this._keyToItem.get(r);return i(l,{signal:n})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=ei(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const r=e.key.id+"-"+i;if(this.has(r))return this.get(r);const n=this._queue.push(r),l=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),n.then(l,l),this.notifyChange("updating"),n}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach($=>{const E=this._keyToItem.get($),k=this.tileInfoView.getTileScale(E.key);Jd.has(k)||(Jd.set(k,[]),r=Math.max(k,r),n=Math.min(k,n)),Jd.get(k).push(E.key),V3.add(k)});let l=this.state.scale;Jd.has(l)||(Mae(Og,V3),Og.sort(($,E)=>$-E),l=Og.reduce(($,E)=>Math.abs(E-l)<Math.abs($-l)?E:$,Og[0])),l=Math.min(l,r),l=Math.max(l,n);const d=Jd.get(l),y=i.getClosestInfoForScale(l),b=y.getColumnForX(this.state.center[0]),x=y.getRowForY(this.state.center[1]);return d.sort(($,E)=>{const k=y.denormalizeCol($.col,$.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((b-k)*(b-k)+(x-$.row)*(x-$.row))-Math.sqrt((b-P)*(b-P)+(x-E.row)*(x-E.row))}),V3.clear(),Jd.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,l=Number.POSITIVE_INFINITY;return e.forEach(d=>{const y=this._keyToItem.get(d);i.getTileCoords(K8,y.key);const b=Dm(K8,r);b<l&&(l=b,n=y.key)}),n.id}};g([S({constructOnly:!0})],iu.prototype,"concurrency",void 0),g([S({constructOnly:!0})],iu.prototype,"process",void 0),g([S()],iu.prototype,"state",void 0),g([S({constructOnly:!0})],iu.prototype,"strategy",void 0),g([S({constructOnly:!0})],iu.prototype,"tileInfoView",void 0),g([S({readOnly:!0})],iu.prototype,"updating",null),iu=g([J("esri.views.2d.tiling.PagedTileQueue")],iu);let Id=class gc{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new gc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[l,d,y,b]=e.split("/");this.level=parseFloat(l),this.row=parseFloat(d),this.col=parseFloat(y),this.world=parseFloat(b)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new gc(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new gc(e,i,r,n),new gc(e,i,r+1,n),new gc(e,i+1,r,n),new gc(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};Id.pool=new Ph(Id,null,null,25,50);function ru(t,e){return[t,e]}function Gh(t,e,i){return t[0]=e,t[1]=i,t}function $ae(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const so=new Id("0/0/0/0");let Tae=class OF{static create(e,i,r=null){const n=Fo(e.spatialReference),l=i.origin||ru(e.origin.x,e.origin.y),d=ru(e.size[0]*i.resolution,e.size[1]*i.resolution),y=ru(-1/0,-1/0),b=ru(1/0,1/0),x=ru(1/0,1/0);r!=null&&(Gh(y,Math.max(0,Math.floor((r.xmin-l[0])/d[0])),Math.max(0,Math.floor((l[1]-r.ymax)/d[1]))),Gh(b,Math.max(0,Math.floor((r.xmax-l[0])/d[0])),Math.max(0,Math.floor((l[1]-r.ymin)/d[1]))),Gh(x,b[0]-y[0]+1,b[1]-y[1]+1));const{cols:$,rows:E}=i;let k,P,D,L;return!r&&$&&E&&(Gh(y,$[0],E[0]),Gh(b,$[1],E[1]),Gh(x,$[1]-$[0]+1,E[1]-E[0]+1)),e.isWrappable?(k=ru(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),x[1]),P=ru(Math.floor((n.origin[0]-l[0])/d[0]),y[1]),D=ru(k[0]+P[0]-1,b[1]),L=!0):(P=y,D=b,k=x,L=!1),new OF(i.level,i.resolution,i.scale,l,y,b,x,d,P,D,k,L)}constructor(e,i,r,n,l,d,y,b,x,$,E,k){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=l,this.last=d,this.size=y,this.norm=b,this.worldStart=x,this.worldEnd=$,this.worldSize=E,this.wrap=k}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){so.set(i);const n=r?so.col:this.denormalizeCol(so.col,so.world),l=so.row;return $ae(e,this.getXForColumn(n),this.getYForRow(l+1),this.getXForColumn(n+1),this.getYForRow(l)),e}getTileCoords(e,i,r=!1){so.set(i);const n=r?so.col:this.denormalizeCol(so.col,so.world);return Array.isArray(e)?Gh(e,this.getXForColumn(n),this.getYForRow(so.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(so.row)),e}},om=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:l}=n;if(r.length!==0)for(const{row:d,colFrom:y,colTo:b}of r)for(let x=y;x<=b;x++)e.call(i,l,d,n.normalizeCol(x),n.getWorldForColumn(x))}};om.pool=new Ph(om);let B3=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const pi=new Id("0/0/0/0");let Iae=class LF{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[l,d]=i,y=l-r,b=d-n,x=b!==0?y/b:0,$=(Math.ceil(n)-n)*x,E=(Math.floor(n)-n)*x;return new LF(r,Math.floor(n),Math.ceil(d),x,y<0?$:E,y<0?E:$,y<0?l:r,y<0?r:l)}constructor(e,i,r,n,l,d,y,b){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=l,this.rightAdjust=d,this.leftBound=y,this.rightBound=b}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Vs=[[0,0],[0,0],[0,0],[0,0]],Eae=1e-6;let Aae=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const l=e.lods.filter(y=>y.level>=r&&y.level<=n);this.minScale=l[0].scale,this.maxScale=l[l.length-1].scale;const d=this._lodInfos=l.map(y=>Tae.create(e,y,i));l.forEach((y,b)=>{this._infoByLevel[y.level]=d[b],this._infoByScale[y.scale]=d[b],this.scales[b]=y.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){pi.set(i);const n=this._infoByLevel[pi.level];return n?n.getTileBounds(e,pi,r):e}getTileCoords(e,i,r=!1){pi.set(i);const n=this._infoByLevel[pi.level];return n?n.getTileCoords(e,pi,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const l=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),d=om.pool.acquire(l),y=this._wrap;let b,x,$,E=1/0,k=-1/0;const P=d.spans;Vs[0][0]=Vs[0][1]=Vs[1][1]=Vs[3][0]=-i,Vs[1][0]=Vs[2][0]=e.size[0]+i,Vs[2][1]=Vs[3][1]=e.size[1]+i;for(const B of Vs)e.toMap(B,B),B[0]=l.getColumnForX(B[0]),B[1]=l.getRowForY(B[1]);const D=[];let L=3;for(let B=0;B<4;B++){if(Vs[B][1]===Vs[L][1]){L=B;continue}const W=Iae.create(Vs[B],Vs[L]);E=Math.min(W.ymin,E),k=Math.max(W.ymax,k),D[W.ymin]===void 0&&(D[W.ymin]=[]),D[W.ymin].push(W),L=B}if(E==null||k==null||k-E>100)return null;let N=[];for(b=E;b<k;){D[b]!=null&&(N=N.concat(D[b])),x=1/0,$=-1/0;for(let B=N.length-1;B>=0;B--){const W=N[B];x=Math.min(x,W.getLeftCol()),$=Math.max($,W.getRightCol())}if(x=Math.floor(x),$=Math.floor($),b>=l.first[1]&&b<=l.last[1])if(y)if(l.size[0]<l.worldSize[0]){const B=Math.floor($/l.worldSize[0]);for(let W=Math.floor(x/l.worldSize[0]);W<=B;W++)P.push(new B3(b,Math.max(l.getFirstColumnForWorld(W),x),Math.min(l.getLastColumnForWorld(W),$)))}else P.push(new B3(b,x,$));else x>l.last[0]||$<l.first[0]||(x=Math.max(x,l.first[0]),$=Math.min($,l.last[0]),P.push(new B3(b,x,$)));b+=1;for(let B=N.length-1;B>=0;B--){const W=N[B];W.ymax>=b?W.incrRow():N.splice(B,1)}}return d}getTileParentId(e){pi.set(e);const i=this._infoByLevel[pi.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(pi,this._lodInfos[r],pi),pi.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){pi.set(i);const r=this._infoByLevel[pi.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(pi,n,pi);const d=n.denormalizeCol(pi.col,pi.world);for(const y of e.spans)if(y.row===pi.row&&y.colFrom<=d&&y.colTo>=d)return!0}if(n.resolution<r.resolution){const[d,y,b,x]=e.spans.reduce((L,N)=>(L[0]=Math.min(L[0],N.row),L[1]=Math.max(L[1],N.row),L[2]=Math.min(L[2],N.colFrom),L[3]=Math.max(L[3],N.colTo),L),[1/0,-1/0,1/0,-1/0]),$=r.denormalizeCol(pi.col,pi.world),E=n.getColumnForX(r.getXForColumn($)),k=n.getRowForY(r.getYForRow(pi.row)),P=n.getColumnForX(r.getXForColumn($+1))-1,D=n.getRowForY(r.getYForRow(pi.row+1))-1;return!(E>x||P<b||k>y||D<d)}const l=n.denormalizeCol(pi.col,pi.world);return e.spans.some(d=>d.row===pi.row&&d.colFrom<=l&&d.colTo>=l)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=Fo(this.tileInfo.spatialReference),l=-r*(n.valid[1]-n.valid[0]);e[0]+=l,e[2]+=l}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+Eae)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}};function kae(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const G3=new Set,Lg=[],Yd=new Map,Z8=[0,0];let nl=class extends Be{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new CF({concurrency:e,process:(n,l)=>{const d=this._keyToItem.get(n);return i(d,{signal:l})},peeker:r==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=ei(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach($=>{const E=this._keyToItem.get($),k=this.tileInfoView.getTileScale(E.key);Yd.has(k)||(Yd.set(k,[]),r=Math.max(k,r),n=Math.min(k,n)),Yd.get(k).push(E.key),G3.add(k)});let l=this.state.scale;Yd.has(l)||(kae(Lg,G3),Lg.sort(($,E)=>$-E),l=Lg.reduce(($,E)=>Math.abs(E-l)<Math.abs($-l)?E:$,Lg[0])),l=Math.min(l,r),l=Math.max(l,n);const d=Yd.get(l),y=i.getClosestInfoForScale(l),b=y.getColumnForX(this.state.center[0]),x=y.getRowForY(this.state.center[1]);return d.sort(($,E)=>{const k=y.denormalizeCol($.col,$.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((b-k)*(b-k)+(x-$.row)*(x-$.row))-Math.sqrt((b-P)*(b-P)+(x-E.row)*(x-E.row))}),G3.clear(),Yd.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,l=Number.POSITIVE_INFINITY;return e.forEach(d=>{const y=this._keyToItem.get(d);i.getTileCoords(Z8,y.key);const b=Dm(Z8,r);b<l&&(l=b,n=y.key)}),n.id}};g([S({constructOnly:!0})],nl.prototype,"concurrency",void 0),g([S({constructOnly:!0})],nl.prototype,"process",void 0),g([S()],nl.prototype,"state",void 0),g([S({constructOnly:!0})],nl.prototype,"strategy",void 0),g([S({constructOnly:!0})],nl.prototype,"tileInfoView",void 0),g([S({readOnly:!0})],nl.prototype,"updating",null),nl=g([J("esri.views.2d.tiling.TileQueue")],nl);const n4e=nl;let Pae=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];X8(this._tilePerId,e);for(let l=0;l<n.length;l++)if(n[l].id===e){n.splice(l,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let l=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&l>=0;)l!==e&&(n=this._pruneAroundCenterTile(n,i,r,l)),l--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const l=this._tileKeysPerLevel[n];if(!l||l.length===0)return e;const{size:d,origin:y}=this._tileInfoView.tileInfo,b=r*d[0],x=r*d[1],$=[0,0],E=[0,0];for(l.sort((k,P)=>($[0]=y.x+b*(k.col+.5),$[1]=y.y-x*(k.row+.5),E[0]=y.x+b*(P.col+.5),E[1]=y.y-x*(P.row+.5),zw($,i)-zw(E,i)));l.length>0;){const k=l.pop();if(this._removeTile(k.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),X8(this._tilePerId,e)}};function X8(t,e){t.delete(e)}const Uh=new Id(0,0,0,0),Ga=new Map,qh=[],U3=[];let a4e=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Pae(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var B,W;const{resampling:i,tileIndex:r}=this,{scale:n,center:l,resolution:d}=e.state,{minScale:y,maxScale:b}=this.tileInfoView,x=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>y||n<b))return this.tiles.length=0,void this.clear();const $=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!$)return this.tiles.length=0,void this.clear();const{spans:E,lodInfo:k}=$,{level:P}=k;this.tiles.length=0,r.forEach(H=>H.visible=!0);let D=0,L=0;if(E.length>0)for(const{row:H,colFrom:Y,colTo:ie}of E)for(let ne=Y;ne<=ie;ne++){D++;const he=Uh.set(P,H,k.normalizeCol(ne),k.getWorldForColumn(ne)).id;let de=r.get(he);if(de)de.isReady?(Ga.set(he,de),L++):x||this._addParentTile(he,Ga);else{if((B=this._tileCache)!=null&&B.has(he)){if(de=this._tileCache.pop(he),this.tileIndex.set(he,de),de.isReady){Ga.set(he,de),L++;continue}}else de=this.acquireTile(Uh),this.tileIndex.set(he,de);x||this._addParentTile(he,Ga)}}const N=L===D;for(const[H,Y]of r){if(Ga.has(H))continue;Uh.set(H);const ie=this.tileInfoView.intersects($,Uh),ne=this.cachePolicy==="purge"?Uh.level!==P:Uh.level>P;!ie||!x&&N?!ne&&ie||qh.push(Y):Y.isReady?ne&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Uh,P)?qh.push(Y):U3.push(Y):ne&&qh.push(Y)}for(const H of U3)H.isReady&&Ga.set(H.key.id,H);for(const H of qh)this._tileCache?this._tileCache.add(H):this.releaseTile(H),r.delete(H.key.id);for(const H of Ga.values())this.tiles.push(H);for(const H of r.values())Ga.has(H.key.id)||(H.visible=!1);(W=this._tileCache)==null||W.prune(P,l,d),om.pool.release($),U3.length=0,qh.length=0,Ga.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())this.tiles.includes(r)?e(r):qh.push(r);for(const r of qh)this.releaseTile(r),this.tileIndex.delete(r.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var l;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((l=this._tileCache)!=null&&l.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=La();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const l=La();if(this.tileInfoView.getTileBounds(l,n.key,!0),fZ(l,r))return!0}return!1}};function Bw(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Cae(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Oae(t,e,i,r,n,l){const d=new Float32Array(6);return d[0]=t,d[1]=e,d[2]=i,d[3]=r,d[4]=n,d[5]=l,d}function Lae(t,e){return new Float32Array(t,e,6)}function DF(t,e,i,r){const n=e[r],l=e[r+1];t[r]=i[0]*n+i[2]*l+i[4],t[r+1]=i[1]*n+i[3]*l+i[5]}function Dae(t,e,i,r=0,n=0,l=2){const d=n||e.length/l;for(let y=r;y<d;y++)DF(t,e,i,y*l)}Object.freeze(Object.defineProperty({__proto__:null,clone:Cae,create:Bw,createView:Lae,fromValues:Oae,transform:DF,transformMany:Dae},Symbol.toStringTag,{value:"Module"}));function Rae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function jae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function RF(t,e,i,r,n,l,d,y,b,x){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=l,t[5]=d,t[6]=y,t[7]=b,t[8]=x,t}function jF(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Fae(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Nae(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],b=e[6],x=e[7],$=e[8],E=$*d-y*x,k=-$*l+y*b,P=x*l-d*b;let D=i*E+r*k+n*P;return D?(D=1/D,t[0]=E*D,t[1]=(-$*r+n*x)*D,t[2]=(y*r-n*d)*D,t[3]=k*D,t[4]=($*i-n*b)*D,t[5]=(-y*i+n*l)*D,t[6]=P*D,t[7]=(-x*i+r*b)*D,t[8]=(d*i-r*l)*D,t):null}function zae(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],b=e[6],x=e[7],$=e[8];return t[0]=d*$-y*x,t[1]=n*x-r*$,t[2]=r*y-n*d,t[3]=y*b-l*$,t[4]=i*$-n*b,t[5]=n*l-i*y,t[6]=l*x-d*b,t[7]=r*b-i*x,t[8]=i*d-r*l,t}function Vae(t){const e=t[0],i=t[1],r=t[2],n=t[3],l=t[4],d=t[5],y=t[6],b=t[7],x=t[8];return e*(x*l-d*b)+i*(-x*n+d*y)+r*(b*n-l*y)}function Z7(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=e[6],$=e[7],E=e[8],k=i[0],P=i[1],D=i[2],L=i[3],N=i[4],B=i[5],W=i[6],H=i[7],Y=i[8];return t[0]=k*r+P*d+D*x,t[1]=k*n+P*y+D*$,t[2]=k*l+P*b+D*E,t[3]=L*r+N*d+B*x,t[4]=L*n+N*y+B*$,t[5]=L*l+N*b+B*E,t[6]=W*r+H*d+Y*x,t[7]=W*n+H*y+Y*$,t[8]=W*l+H*b+Y*E,t}function q4(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=e[6],$=e[7],E=e[8],k=i[0],P=i[1];return t[0]=r,t[1]=n,t[2]=l,t[3]=d,t[4]=y,t[5]=b,t[6]=k*r+P*d+x,t[7]=k*n+P*y+$,t[8]=k*l+P*b+E,t}function FF(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],b=e[5],x=e[6],$=e[7],E=e[8],k=Math.sin(i),P=Math.cos(i);return t[0]=P*r+k*d,t[1]=P*n+k*y,t[2]=P*l+k*b,t[3]=P*d-k*r,t[4]=P*y-k*n,t[5]=P*b-k*l,t[6]=x,t[7]=$,t[8]=E,t}function Bae(t,e,i){const r=i[0],n=i[1],l=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=l*e[6],t[7]=l*e[7],t[8]=l*e[8],t}function Gae(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function Uae(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function qae(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Hae(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Wae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Jae(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=i+i,y=r+r,b=n+n,x=i*d,$=r*d,E=r*y,k=n*d,P=n*y,D=n*b,L=l*d,N=l*y,B=l*b;return t[0]=1-E-D,t[3]=$-B,t[6]=k+N,t[1]=$+B,t[4]=1-x-D,t[7]=P-L,t[2]=k-N,t[5]=P+L,t[8]=1-x-E,t}function Yae(t,e){const i=e[0],r=e[1],n=e[2],l=e[4],d=e[5],y=e[6],b=e[8],x=e[9],$=e[10],E=$*d-y*x,k=-$*l+y*b,P=x*l-d*b,D=i*E+r*k+n*P;if(!D)return null;const L=1/D;return t[0]=E*L,t[1]=(-$*r+n*x)*L,t[2]=(y*r-n*d)*L,t[3]=k*L,t[4]=($*i-n*b)*L,t[5]=(-y*i+n*l)*L,t[6]=P*L,t[7]=(-x*i+r*b)*L,t[8]=(d*i-r*l)*L,t}function Kae(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],b=e[6],x=e[7],$=e[8],E=e[9],k=e[10],P=e[11],D=e[12],L=e[13],N=e[14],B=e[15],W=i*y-r*d,H=i*b-n*d,Y=i*x-l*d,ie=r*b-n*y,ne=r*x-l*y,he=n*x-l*b,de=$*L-E*D,be=$*N-k*D,we=$*B-P*D,$e=E*N-k*L,ke=E*B-P*L,Ge=k*B-P*N;let Fe=W*Ge-H*ke+Y*$e+ie*we-ne*be+he*de;return Fe?(Fe=1/Fe,t[0]=(y*Ge-b*ke+x*$e)*Fe,t[1]=(b*we-d*Ge-x*be)*Fe,t[2]=(d*ke-y*we+x*de)*Fe,t[3]=(n*ke-r*Ge-l*$e)*Fe,t[4]=(i*Ge-n*we+l*be)*Fe,t[5]=(r*we-i*ke-l*de)*Fe,t[6]=(L*he-N*ne+B*ie)*Fe,t[7]=(N*Y-D*he-B*H)*Fe,t[8]=(D*ne-L*Y+B*W)*Fe,t):null}function Zae(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Xae(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Qae(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function ele(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function NF(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function tle(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function ile(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function rle(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function sle(t,e){const i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],b=t[6],x=t[7],$=t[8],E=e[0],k=e[1],P=e[2],D=e[3],L=e[4],N=e[5],B=e[6],W=e[7],H=e[8],Y=Wn();return Math.abs(i-E)<=Y*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(r-k)<=Y*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(n-P)<=Y*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(l-D)<=Y*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(d-L)<=Y*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(y-N)<=Y*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(b-B)<=Y*Math.max(1,Math.abs(b),Math.abs(B))&&Math.abs(x-W)<=Y*Math.max(1,Math.abs(x),Math.abs(W))&&Math.abs($-H)<=Y*Math.max(1,Math.abs($),Math.abs(H))}function nle(t){const e=Wn(),i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],b=t[6],x=t[7],$=t[8];return Math.abs(1-(i*i+l*l+b*b))<=e&&Math.abs(1-(r*r+d*d+x*x))<=e&&Math.abs(1-(n*n+y*y+$*$))<=e}const ole=Z7,ale=NF;Object.freeze(Object.defineProperty({__proto__:null,add:ele,adjoint:zae,copy:jae,determinant:Vae,equals:sle,exactEquals:rle,frob:Qae,fromMat2d:Wae,fromMat4:Rae,fromQuat:Jae,fromRotation:qae,fromScaling:Hae,fromTranslation:Uae,identity:jF,invert:Nae,isOrthoNormal:nle,mul:ole,multiply:Z7,multiplyScalar:tle,multiplyScalarAndAdd:ile,normalFromMat4:Kae,normalFromMat4Legacy:Yae,projection:Zae,rotate:FF,scale:Bae,scaleByVec2:Gae,set:RF,str:Xae,sub:ale,subtract:NF,translate:q4,transpose:Fae},Symbol.toStringTag,{value:"Module"}));function tb(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function lle(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ule(t,e,i,r,n,l,d,y,b){const x=new Float32Array(9);return x[0]=t,x[1]=e,x[2]=i,x[3]=r,x[4]=n,x[5]=l,x[6]=d,x[7]=y,x[8]=b,x}function hle(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:lle,create:tb,createView:hle,fromValues:ule},Symbol.toStringTag,{value:"Module"}));function zF(){return new Float32Array(2)}function cle(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function z0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function dle(t,e){return new Float32Array(t,e,2)}function VF(){return zF()}function BF(){return z0(1,1)}function GF(){return z0(1,0)}function UF(){return z0(0,1)}const ple=VF(),fle=BF(),yle=GF(),mle=UF();Object.freeze(Object.defineProperty({__proto__:null,ONES:fle,UNIT_X:yle,UNIT_Y:mle,ZEROS:ple,clone:cle,create:zF,createView:dle,fromValues:z0,ones:BF,unitX:GF,unitY:UF,zeros:VF},Symbol.toStringTag,{value:"Module"}));function gle(t){return t instanceof Float32Array&&t.length>=2}function vle(t){return Array.isArray(t)&&t.length>=2}function q3(t){return gle(t)||vle(t)}var H4;const Ua=[0,0];let Eu=H4=class extends ve{constructor(t){super(t),this._viewpoint2D={center:Ni(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Nt,this.id=0,this.inverseTransform=yh(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=yh(),this.transformNoRotation=yh(),this.displayMat3=tb(),this.displayViewMat3=tb(),this.viewMat3=tb(),this.viewMat2d=Bw(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Qo(i,t.viewpoint),this._set("size",sm(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new H4({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return q3(e)?Ia(t,e,this.inverseTransform):(Ua[0]=e,Ua[1]=i,Ia(t,Ua,this.inverseTransform))}toScreen(t,e,i){return q3(e)?Ia(t,e,this.transform):(Ua[0]=e,Ua[1]=i,Ia(t,Ua,this.transform))}toScreenNoRotation(t,e,i){return q3(e)?Ia(t,e,this.transformNoRotation):(Ua[0]=e,Ua[1]=i,Ia(t,Ua,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return Y7(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,l=this._get("size"),d=new ka({targetGeometry:new lt(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",d),!l||!e||!i)return;this.resolution=lf(d),this.rotation=r,this.scale=i,this.spatialReference=e,sm(this.center,t);const y=l[0]!==0?2/l[0]:0,b=l[1]!==0?-2/l[1]:0;RF(this.displayMat3,y,0,0,0,b,0,-1,1,1);const x=jF(this.viewMat3),$=z0(l[0]/2,l[1]/2),E=z0(-l[0]/2,-l[1]/2),k=BM(r);q4(x,x,$),FF(x,x,k),q4(x,x,E),Z7(this.displayViewMat3,this.displayMat3,x);const P=q7(this.viewMat2d,$);return Om(P,P,k),N0(P,P,E),iae(this.extent,d,l),K7(this.transform,d,l,n),U7(this.inverseTransform,this.transform),uae(this.transformNoRotation,d,l,n),this.worldScreenWidth=cae(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};g([S({readOnly:!0})],Eu.prototype,"id",void 0),g([S({value:1,json:{write:!0}})],Eu.prototype,"pixelRatio",null),g([S({json:{write:!0}})],Eu.prototype,"size",null),g([S()],Eu.prototype,"spatialReference",void 0),g([S({type:ka,json:{write:!0}})],Eu.prototype,"viewpoint",null),Eu=H4=g([J("esri.views.2d.ViewState")],Eu);const Q8=Eu;var W4,J4;let bl=W4=class extends Be{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new W4({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};g([S()],bl.prototype,"left",void 0),g([S()],bl.prototype,"top",void 0),g([S()],bl.prototype,"right",void 0),g([S()],bl.prototype,"bottom",void 0),bl=W4=g([J("esri.views.2d.PaddedViewState.Padding")],bl);let gp=J4=class extends Q8{constructor(...t){super(...t),this.paddedViewState=new Q8,this._updateContent=(()=>{const e=Ni();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Mr(e,r.left+r.right,r.top+r.bottom),nm(e,i,e),sm(n.size,e);const l=n.viewpoint;l&&(this.viewpoint=l)}})(),this.addHandles(me(()=>[this.size,this.padding],()=>this._updateContent(),Rd)),this.padding=new bl,this.size=[0,0]}set padding(t){this._set("padding",t||new bl)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,pae(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new J4({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};g([S()],gp.prototype,"paddedViewState",void 0),g([S({type:bl})],gp.prototype,"padding",null),g([S()],gp.prototype,"viewpoint",null),gp=J4=g([J("esri.views.2d.PaddedViewState")],gp);const ble=gp;let us=class extends Be{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([me(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Rd)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new lt({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ge.getLogger(this).error(new se("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;V4(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void ge.getLogger(this).error(new se("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ge.getLogger(this).error(new se("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;rae(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;yae(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;W8(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var l;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new se("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new se("mapview:invalid-viewpoint","geometry not defined"))}catch(d){r=new se("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:d})}if(r)return void ge.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new ka({targetGeometry:new lt,scale:0,rotation:0});Qo(n,i),(l=this.constraints)==null||l.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,l;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const d=this._get("extent");return void(d&&(this._set("extent",void 0),this._set("center",d.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;W8(r,r,i),this.viewpoint=r,this._set("zoom",((l=this.constraints)==null?void 0:l.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),l=this._get("extent"),d=this._get("scale"),y=this._get("rotation"),b=this._get("viewpoint"),x=this._get("zoom"),$=x!=null&&r!=null&&r.zoomToScale(x)||void 0;let E,k,P;const D=b==null?void 0:b.rotation,L=b==null?void 0:b.targetGeometry;(L==null?void 0:L.type)==="extent"?E=L:(L==null?void 0:L.type)==="point"&&(k=L,P=b==null?void 0:b.scale);const N=l??E;return{center:n??k??(N==null?void 0:N.center),rotation:y??D,scale:(d??$??P??(N&&d0(N,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var d;const l=e.targetGeometry;try{this._project(e,r)}catch(y){ge.getLogger(this).warn(new Un("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:l.toJSON(),spatialReference:r,error:y})),e.targetGeometry=n||new lt({x:0,y:0,spatialReference:r})}(d=this.constraints)==null||d.fit(e),this._set("state",new ble({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:l}=this.state.paddedViewState,d=new lt({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",d),this._set("zoom",-1),this._set("rotation",n),this._set("scale",l),this._set("state",null)}changeSpatialReference(e){var b;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const x=i.viewpoint.clone();x.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=x}const r=i.clone(),[n,l]=i.center;let d=null;try{d=this._project(new lt({x:n,y:l,spatialReference:i.spatialReference}),e)}catch(x){P7()||ge.getLogger(this).warn(new Un("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:d==null?void 0:d.toJSON(),spatialReference:e,error:x}))}d||(d=new lt({x:0,y:0,spatialReference:e}));const y=V4(new ka({targetGeometry:new lt,scale:0,rotation:0}),i.viewpoint,d);r.viewpoint=y;try{const $=[i.size[0]/2,i.size[1]/2],E=[$[0]+20,$[1]],k=i.toMap([0,0],E),{x:P,y:D}=this._project(new lt({x:k[0],y:k[1],spatialReference:i.spatialReference}),e);k[0]=P,k[1]=D,r.toScreen(k,k);const L=dae($,k,E),N=Math.hypot(k[0]-$[0],k[1]-$[1])/20;!Number.isFinite(N)||Math.abs(N)>4?(y.rotation=0,y.targetGeometry=new lt({x:0,y:0,spatialReference:e})):(y.scale*=N,y.scale>ce("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(L)?L:0)}catch{}(b=this._get("constraints"))==null||b.constrain(y,void 0),this._get("state").viewpoint=y}resize(e,i){var d;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const l=this.state.paddedViewState.size.concat();r.size=[e,i],fae(n,n,l,this.state.paddedViewState.size,this.resizeAlign),n=((d=this.constraints)==null?void 0:d.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),l=this.state.spatialReference;return new lt({x:r,y:n,spatialReference:l})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),r=[i.x,i.y];return this.state.toScreen(r,r),bs(r[0],r[1])}_project(e,i){var l;const r=e&&e.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(l=r.spatialReference)!=null&&l.imageCoordinateSystem||qi(i,r.spatialReference))return e;const n=Nh(r,i);if(!n)throw new se("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return wle(e)?(e.targetGeometry=n,e):n}};function wle(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}g([S({type:lt})],us.prototype,"center",null),g([S()],us.prototype,"constraints",void 0),g([S({type:Nt})],us.prototype,"extent",null),g([S({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],us.prototype,"padding",null),g([S()],us.prototype,"ready",void 0),g([S()],us.prototype,"resizeAlign",void 0),g([S({readOnly:!0})],us.prototype,"resolution",null),g([S({type:Number})],us.prototype,"rotation",null),g([S({type:Number})],us.prototype,"scale",null),g([S({readOnly:!0})],us.prototype,"state",void 0),g([S({type:ka})],us.prototype,"viewpoint",null),g([S()],us.prototype,"zoom",null),us=g([J("esri.views.2d.ViewStateManager")],us);function X7(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let eE=class extends vr{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){X7(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},_le=class extends vr{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:l}=i,{view:d}=this,{mapViewNavigation:y}=d;switch(n){case"begin":{const{scale:b}=d;this._startScale=b,this._currentScale=b,this._previousDelta=l,y.begin();break}case"update":{if(this._previousDelta.y===l.y)return;this._previousDelta=l;const b=1.015**l.y,x=this._startScale*b,$=x/this._currentScale;y.setViewpointImmediate($),this._currentScale=x;break}case"end":{const{constraints:b}=d,{effectiveLODs:x,snapToZoom:$}=b;if(!$||!x)return void y.end();const E=b.snapScale(this._currentScale),k=(l.y>0?Math.max(E,b.snapToPreviousScale(this._startScale)):Math.min(E,b.snapToNextScale(this._startScale)))/this._currentScale;y.zoom(k);break}}}},w_=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},xle=class extends vr{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new w_({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&X7(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Sle=class extends vr{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new w_({start:(l,d)=>{n.rotate.begin(this._view,d.data),d.stopPropagation()},update:(l,d)=>{n.rotate.update(this._view,d.data),d.stopPropagation()},end:(l,d)=>{n.rotate.end(),d.stopPropagation()},condition:(l,d)=>l===1&&X7(d.data,this.pointerAction)}),this.registerIncoming("drag",r,l=>this._dragEventSeparator.handle(l))}};function no(t){let e=t*t;return t<0&&(e*=-1),e}function Mle(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function $le(t,e,i){const r=i,n=t.state,l=t.device,d=e.tiltDirection==="forward-down"?1:-1,y=1;return l.deviceType==="standard"?(r.translation[0]=no(n.axes[0]),r.translation[1]=no(n.axes[1]),r.translation[2]=no(n.buttons[7])-no(n.buttons[6]),r.heading=no(n.axes[2]),r.tilt=no(n.axes[3])):l.deviceType==="spacemouse"&&(r.translation[0]=1.2*no(n.axes[0]),r.translation[1]=1.2*no(n.axes[1]),r.translation[2]=2*-no(n.axes[2]),r.heading=1.2*no(n.axes[5]),r.tilt=1.2*no(n.axes[3])),r.tilt*=d,WO(r.translation,r.translation,y),r}function Tle(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Ile=class extends vr{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Fs,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([me(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=M0({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},st)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Mle(this._transformation)):(this._currentDevice=e.data.device,$le(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Tle(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,l=Ale*n*e;b_(r,r,[i.translation[0]*l,-i.translation[1]*l]);const d=1+i.translation[2]*kle*e,y=this._view.constraints.rotationEnabled?-i.heading*Ele*e:0,b=this._view.size,x=[b[0]/2,b[1]];TF(r,r,d,y,x,b);const $=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=$}};const Ele=.06,Ale=.7,kle=6e-4;let Ple=class extends vr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=this._keyMap[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},Cle=class extends vr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Qp;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Qp||(Qp={}));let Ole=class extends vr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Qp.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Qp.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:l}=this.view;let d=null;switch(n){case Qp.IN:d=l.zoomIn();break;case Qp.OUT:d=l.zoomOut();break;default:return}l.begin(),d.then(()=>l.end()),e.stopPropagation()}};const Lle=.6;let Dle=class extends vr{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:l}=e.data,d=1/Lle**(1/60*l),y=i.zoom(d,[r,n]);y&&(this._canZoom=!1,y.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Rle=class extends vr{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new w_({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function tE(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>Nle(i,t.axisThreshold))}:{buttons:[],axes:[]}}function jle(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Fle(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Nle(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let zle=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=l=>{this._connectGamepad(l.gamepad)},this._onDisconnectGamepad=l=>{const d=l.gamepad,y=d.index,b=this._inputDevices[y];b&&(this._emitGamepadEvent(d,tE(b),!1),this._inputDevices.splice(y,1),this._latestUpdate.splice(y,1),this._input.gamepad.devices.remove(b),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(l=>this._connectGamepad(l)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new B7(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=M0({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const l=this._inputDevices[n.index];if(!l)return;const d=this._latestUpdate[n.index],y=tE(l),b=r||Fle(y);d&&(d.timestamp===n.timestamp||!d.active&&b||jle(d.state,y))||this._emitGamepadEvent(n,y,!b)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&e(n)}}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],l=n&&n.active;if(!l&&!r)return;const d=!l&&r?"start":l&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:d})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const iE=ce("edge"),Vle=ce("chrome"),Ble=ce("ff"),Gle=ce("safari"),rE="esri-view-surface",Kd={touchNone:`${rE}--touch-none`,touchPan:`${rE}--touch-pan`};let qF=class HF{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new zle(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=ei(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(H3[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&H3[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(H3[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Kd.touchNone:Kd.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Kd.touchPan:Kd.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Kd.touchNone),this._element.classList.remove(Kd.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=Kj(this._element,e);return HF.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=rne(i);r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:iE&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}iE?r*=.7:Vle||Gle?r*=.6:Ble&&(r*=1.375);const n=100,l=Math.abs(r);l>n&&(r=r/l*200/(1+Math.exp(-.02*(l-n))));const d=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,d)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};qF.test={disableSubpixelCoordinates:!1};const H3={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Ule=class extends vr{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function Q7(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function qle(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function Hle(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:bs()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[H,Y]=t,[ie,ne]=[Y.x-H.x,Y.y-H.y];return e.radius=Math.sqrt(ie*ie+ne*ne)/2,e.center.x=(H.x+Y.x)/2,e.center.y=(H.y+Y.y)/2,e}let i=0,r=0;for(let H=0;H<t.length;H++)i+=t[H].x,r+=t[H].y;i/=t.length,r/=t.length;const n=t.map(H=>H.x-i),l=t.map(H=>H.y-r);let d=0,y=0,b=0,x=0,$=0,E=0,k=0;for(let H=0;H<n.length;H++){const Y=n[H],ie=l[H],ne=Y*Y,he=ie*ie;d+=ne,y+=he,b+=Y*ie,x+=ne*Y,$+=he*ie,E+=Y*he,k+=ie*ne}const P=.5*(x+E),D=.5*($+k),L=d*y-b*b,N=(P*y-D*b)/L,B=(d*D-b*P)/L,W=bs(N+i,B+r);return{radius:Math.sqrt(N*N+B*B+(d+y)/t.length),center:W}}function pd(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}const Nn={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let Wle=class extends vr{constructor(e=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,r=Nn.maximumDoubleTouchDelay,n=Nn.maximumDoubleTouchDistance,l=q0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=l,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Mi(e.doubleClickTimer))}get hasPendingInputs(){return O2(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Mi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:n}=e.native;return r==="mouse"?`${i}:${n}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=this._getPointerId(i);if(!this._pointerState.has(n))return void this._startClick(e);const l=this._pointerState.get(n),{data:d,modifiers:y}=l.event,b=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Q7(d,i)>b?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),l.pointerDownCount===2&&this._doubleClick.emit(d,void 0,y))}_handlePointerDown(e){const i=pd(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=pd(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,d=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),l),y=1;this._pointerState.set(n,{event:e,doubleClickTimer:d,pointerDownCount:y}),this.refreshHasPendingInputs()}},Jle=class extends vr{constructor(e=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,r=Nn.maximumDoubleTouchDelay,n=Nn.maximumDoubleTouchDistance,l=q0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=l,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=bs(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new w_({start:(d,y)=>this._dragStart(d,y),update:(d,y)=>this._dragUpdate(y),end:(d,y)=>this._dragEnd(y)}),this.registerIncoming("drag",d=>this._dragEventSeparator.handle(d)),this.registerIncoming("pointer-down",d=>this._handlePointerDown(d)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Mi(e.doubleTapTimeout)})}get hasPendingInputs(){return O2(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Mi(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:n,buttons:l,pointer:d,pointers:y,pointerType:b,timestamp:x}=r;return{action:e,delta:i,button:n,buttons:l,pointer:d,pointers:y,pointerType:b,timestamp:x}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:l}=r;this._dragStartCenter=l;const d=this._createDoubleTapDragData("begin",bs(0,0),r);this._doubleTapDrag.emit(d,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,l=bs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),d=this._createDoubleTapDragData("update",l,i);this._doubleTapDrag.emit(d,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,l=bs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),d=this._createDoubleTapDragData("end",l,i);this._doubleTapDrag.emit(d,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=pd(i),n=this._pointerState.get(r),{pointerType:l}=i.native;if(n){const d=l==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),Q7(n.event.data,i)>d?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=pd(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,d=this._clock.setTimeout(()=>this._clearPointerDown(n),l);this._pointerState.set(n,{event:e,doubleTapTimeout:d}),this.refreshHasPendingInputs()}},Yle=class extends vr{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:Kle(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=Dg(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const l=ib(n,WF(this._activePointerMap));n.initialAngle=l,n.lastAngle=l,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=Dg(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=Dg(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=ib(r,i)-e,r.lastAngle=ib(r,i)-e})}_emitEvent(e,i,r){const n=Dg(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function WF(t){const e=[];return t.forEach(i=>{e.push(bs(i.event.x,i.event.y))}),Hle(e)}function Dg(t){const e=WF(t);let i=0;return t.forEach(r=>{let n=ib(r,e),l=n-r.lastAngle;for(;l>Math.PI;)l-=2*Math.PI;for(;l<-Math.PI;)l+=2*Math.PI;n=r.lastAngle+l,r.lastAngle=n;const d=n-r.initialAngle;i+=d}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Kle(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function ib(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var sE;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(sE||(sE={}));let Zle=class extends vr{constructor(e=Nn.maximumDoubleClickDelay,i=Nn.maximumDoubleClickDistance,r=Nn.maximumDoubleTouchDelay,n=Nn.maximumDoubleTouchDistance,l=q0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=l,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=pd(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=pd(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const l=n.immediateDoubleClick;if(l){l.timeoutHandle.remove();const d=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Q7(l,e.data)>d?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,l.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=pd(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const Df={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let Xle=class extends vr{constructor(e=Df.maximumClickDelay,i=Df.movementUntilMouseDrag,r=Df.movementUntilPenDrag,n=Df.movementUntilTouchDrag,l=Df.holdDelay,d=q0){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=l,this._clock=d,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",y=>{this._handlePointerLoss(y,"pointer-up")}),this.registerIncoming("pointer-capture-lost",y=>{this._handlePointerLoss(y,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",y=>{this._handlePointerLoss(y,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Mi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const d=this._pointerState.get(r);if(d){if(!d.isDragging){const y=d.previousEvent;this._pointerHold.emit(y,void 0,e.modifiers),d.holdEmitted=!0}d.holdTimeout=null}},this._holdDelay));const l={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,l),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):qle(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,l=this._pointerState.get(n);l&&(l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",l,i==="pointer-up"?r:l.previousEvent),void 0,l.modifiers):i==="pointer-up"&&l.downButton===r.native.button&&e.timestamp-l.startTimestamp<=this._maximumClickDelay&&!l.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Rg={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let vc=class extends Be{constructor(){super(...arguments),this._handles=new Fs}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Hn(()=>!e(),()=>this._disconnect()),Hn(e,()=>this._connect())])}destroy(){this._handles=ei(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=ei(this._inputManager)}_connect(){const e=this.view.surface,i=new qF(e,this.view.input),r=[new Zle,new Xle,new Wle,new Yle(this.view.navigation),new Jle],n=new $n({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new Ule],fh.INTERNAL),n.installHandlers("navigation",[new Rle(this.view),new Ile(this.view),new Dle(this.view),new eE(this.view),new eE(this.view,[Rg.counter]),new xle(this.view,"primary"),new Ple(this.view,Rg.pan),new Ole(this.view,Rg.zoom),new Cle(this.view,Rg.rotate),new Sle(this.view,"secondary"),new _le(this.view,"touch")],fh.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,me(()=>{var l,d;return(d=(l=this.view)==null?void 0:l.navigation)==null?void 0:d.browserTouchPanEnabled},l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},st)}get test(){return{inputManager:this._inputManager}}};g([S()],vc.prototype,"view",void 0),g([S()],vc.prototype,"latestPointerType",null),g([S()],vc.prototype,"latestPointerLocation",null),g([S()],vc.prototype,"multiTouchActive",null),vc=g([J("esri.views.2d.input.MapViewInputManager")],vc);const Qle=vc;var A4e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nE,oE,aE,Y4={exports:{}};Y4.exports,nE=Y4,oE=function(){function t(n,l,d,y,b){e(n,l,d||0,y||n.length-1,b||r)}function e(n,l,d,y,b){for(;y>d;){if(y-d>600){var x=y-d+1,$=l-d+1,E=Math.log(x),k=.5*Math.exp(2*E/3),P=.5*Math.sqrt(E*k*(x-k)/x)*($-x/2<0?-1:1);e(n,l,Math.max(d,Math.floor(l-$*k/x+P)),Math.min(y,Math.floor(l+(x-$)*k/x+P)),b)}var D=n[l],L=d,N=y;for(i(n,d,l),b(n[y],D)>0&&i(n,d,y);L<N;){for(i(n,L,N),L++,N--;b(n[L],D)<0;)L++;for(;b(n[N],D)>0;)N--}b(n[d],D)===0?i(n,d,N):i(n,++N,y),N<=l&&(d=N+1),l<=N&&(y=N-1)}}function i(n,l,d){var y=n[l];n[l]=n[d],n[d]=y}function r(n,l){return n<l?-1:n>l?1:0}return t},(aE=oE())!==void 0&&(nE.exports=aE);const eue=JF(Y4.exports);function Gw(t,e){if(!(this instanceof Gw))return new Gw(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function tue(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function Zd(t,e){T1(t,0,t.children.length,e,t)}function T1(t,e,i,r,n){n||(n=vp(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var l,d=e;d<i;d++)l=t.children[d],I1(n,t.leaf?r(l):l);return n}function I1(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function lE(t,e){return t.minX-e.minX}function uE(t,e){return t.minY-e.minY}function W3(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function jg(t){return t.maxX-t.minX+(t.maxY-t.minY)}function iue(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function rue(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),l=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,l-r)}function J3(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Fg(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function vp(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hE(t,e,i,r,n){for(var l,d=[e,i];d.length;)(i=d.pop())-(e=d.pop())<=r||(l=e+Math.ceil((i-e)/r/2)*r,eue(t,l,e,i,n),d.push(e,l,l,i))}Gw.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!Fg(t,e))return i;for(var n,l,d,y,b=[];e;){for(n=0,l=e.children.length;n<l;n++)d=e.children[n],Fg(t,y=e.leaf?r(d):d)&&(e.leaf?i.push(d):J3(t,y)?this._all(d,i):b.push(d));e=b.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Fg(t,e))return!1;for(var r,n,l,d,y=[];e;){for(r=0,n=e.children.length;r<n;r++)if(l=e.children[r],Fg(t,d=e.leaf?i(l):l)){if(e.leaf||J3(t,d))return!0;y.push(l)}e=y.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=vp([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,l,d=this.data,y=this.toBBox(t),b=[],x=[];d||b.length;){if(d||(d=b.pop(),r=b[b.length-1],i=x.pop(),l=!0),d.leaf&&(n=tue(t,d.children,e))!==-1)return d.children.splice(n,1),b.push(d),this._condense(b),this;l||d.leaf||!J3(d,y)?r?(i++,d=r.children[i],l=!1):d=null:(b.push(d),x.push(i),i=0,r=d,d=d.children[0])}return this},toBBox:function(t){return t},compareMinX:lE,compareMinY:uE,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,l=i-e+1,d=this._maxEntries;if(l<=d)return Zd(n=vp(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(l)/Math.log(d)),d=Math.ceil(l/Math.pow(d,r-1))),(n=vp([])).leaf=!1,n.height=r;var y,b,x,$,E=Math.ceil(l/d),k=E*Math.ceil(Math.sqrt(d));for(hE(t,e,i,k,this.compareMinX),y=e;y<=i;y+=k)for(hE(t,y,x=Math.min(y+k-1,i),E,this.compareMinY),b=y;b<=x;b+=E)$=Math.min(b+E-1,x),n.children.push(this._build(t,b,$,r-1));return Zd(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,l,d,y,b,x,$,E;r.push(e),!e.leaf&&r.length-1!==i;){for($=E=1/0,n=0,l=e.children.length;n<l;n++)b=W3(d=e.children[n]),(x=iue(t,d)-b)<E?(E=x,$=b<$?b:$,y=d):x===E&&b<$&&($=b,y=d);e=y||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),l=[],d=this._chooseSubtree(n,this.data,e,l);for(d.children.push(t),I1(d,n);e>=0&&l[e].children.length>this._maxEntries;)this._split(l,e),e--;this._adjustParentBBoxes(n,l,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var l=this._chooseSplitIndex(i,n,r),d=vp(i.children.splice(l,i.children.length-l));d.height=i.height,d.leaf=i.leaf,Zd(i,this.toBBox),Zd(d,this.toBBox),e?t[e-1].children.push(d):this._splitRoot(i,d)},_splitRoot:function(t,e){this.data=vp([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Zd(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,l,d,y,b,x,$;for(b=x=1/0,r=e;r<=i-e;r++)d=rue(n=T1(t,0,r,this.toBBox),l=T1(t,r,i,this.toBBox)),y=W3(n)+W3(l),d<b?(b=d,$=r,x=y<x?y:x):d===b&&y<x&&(x=y,$=r);return $},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:lE,n=t.leaf?this.compareMinY:uE;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,l,d=this.toBBox,y=T1(t,0,e,d),b=T1(t,i-e,i,d),x=jg(y)+jg(b);for(n=e;n<i-e;n++)l=t.children[n],I1(y,t.leaf?d(l):l),x+=jg(y);for(n=i-e-1;n>=e;n--)l=t.children[n],I1(b,t.leaf?d(l):l),x+=jg(b);return x},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)I1(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Zd(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var K4;const cE=new _t({upperLeft:"upper-left",lowerLeft:"lower-left"});let bc=K4=class extends ve{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new K4(ae({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};g([S({type:Nt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],bc.prototype,"extent",void 0),g([S({type:["view","edit"],json:{write:!0}})],bc.prototype,"mode",void 0),g([S({type:String,json:{read:cE.read,write:cE.write}})],bc.prototype,"originPosition",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],bc.prototype,"tolerance",void 0),bc=K4=g([J("esri.rest.support.QuantizationParameters")],bc);const YF=bc;let dE=class KF{constructor(e,i){this.key=new Id(0,0,0,0),this.bounds=La(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Nt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=ms.acquire();for(let r=0;r<e.length;r++)i[r]=new KF(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return YF.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Hh={added:[],removed:[]},Y3=new Set,sue=new Id(0,0,0,0);let nue=class extends Na{constructor(e){super(),this._tiles=new Map,this._index=Gw(9,ce("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new dE(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:l}=n;if(r.length>0)for(const{row:d,colFrom:y,colTo:b}of r)for(let x=y;x<=b;x++){const $=sue.set(l,d,n.normalizeCol(x),n.getWorldForColumn(x)).id;if(Y3.add($),!this.has($)){const E=new dE(this.tileScheme,$);this._tiles.set($,E),this._index.insert(E),this.tiles.push(E),Hh.added.push(E)}}for(let d=this.tiles.length-1;d>=0;d--){const y=this.tiles[d];Y3.has(y.id)||(this._tiles.delete(y.id),this.tiles.splice(d,1),this._index.remove(y),Hh.removed.push(y))}(Hh.added.length||Hh.removed.length)&&this.emit("update",Hh),om.pool.release(i),Y3.clear(),Hh.added.length=0,Hh.removed.length=0}},wc=class extends Be{constructor(){super(...arguments),this.color=new Ne([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};g([S({type:Ne})],wc.prototype,"color",void 0),g([S({type:Ne})],wc.prototype,"haloColor",void 0),g([S()],wc.prototype,"haloOpacity",void 0),g([S()],wc.prototype,"fillOpacity",void 0),wc=g([J("esri.views.2d.support.HighlightOptions")],wc);const ZF=wc,oue=t=>t.includes("Brush");let XF=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),oue(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function aue(t,e,i,r,n,l,d,y){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let b=null;t.width!=null&&t.height!=null?b=[t.width,t.height]:t.width==null&&t.height!=null?b=[t.height,t.height]:t.width!=null&&t.height==null?b=[t.width,t.width]:t.width==null&&t.height==null&&(b=null);const x=i[0]-(r.left+r.right),$=i[1]-(r.top+r.bottom);let E,k,P=t.area||{x:0,y:0,width:x,height:$};if(b){const D=x/$,L=b[0]/b[1];if(L>D){const N=P.width/L;P={x:P.x,y:Math.round(P.y+(P.height-N)/2),width:P.width,height:Math.round(N)}}else{const N=P.height*L;P={x:Math.round(P.x+(P.width-N)/2),y:P.y,width:Math.round(N),height:P.height}}}else b=[P.width,P.height];return b[0]>P.width?(E=Math.min(b[0]/P.width,e),k=b[0]/P.width/E):(E=1,k=b[0]/P.width),{resolutionScale:E,cropArea:{x:Math.round((P.x+r.left)*E),y:Math.round((P.y+r.top)*E),width:Math.round(P.width*E),height:Math.round(P.height*E)},outputScale:k,format:n,quality:l,children:d,rotation:y}}function lue(t,e,i){const{ctx:r,canvas:n}=QF(t,i),l=r.getImageData(0,0,t.width,t.height),d=cue(n,e);return eN(n),{dataUrl:d,data:l}}function uue(t,e){const{ctx:i,canvas:r}=QF(t,e),n=i.getImageData(0,0,t.width,t.height);return eN(r),n}function QF(t,e){const i=hue();e.premultipliedAlpha&&mue(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&yue(r),{ctx:r,canvas:i}}function eN(t){t.width=0,t.height=0}function hue(){return K3==null&&(K3=document.createElement("canvas")),K3}let K3=null;function cue(t,e){const i=gue[e.format],r=e.quality/100;return t.toDataURL(i,r)}function due(t,e){const i=fue(t),r=bue[i];return{format:i,quality:Ds(e??r,0,100)}}function pue(t,e){return e/Math.max(t[0],t[1])}function O4e(t,e,i,r=0,n=0,l=t.width-r,d=t.height-n,y=!1){const{data:b}=t,{width:x,height:$,data:E}=e,k=l/x,P=d/$,D=Math.ceil(k/2),L=Math.ceil(P/2),N=t.width;for(let B=0;B<$;B++)for(let W=0;W<x;W++){const H=4*(W+(y?$-B-1:B)*x);let Y=0,ie=0,ne=0,he=0,de=0,be=0;const we=(B+.5)*P;for(let $e=Math.floor(B*P);$e<(B+1)*P;$e++){const ke=Math.abs(we-($e+.5))/L,Ge=(W+.5)*k,Fe=ke*ke;for(let ut=Math.floor(W*k);ut<(W+1)*k;ut++){const ii=Math.abs(Ge-(ut+.5))/D,Ze=Math.sqrt(Fe+ii*ii);if(Ze>=1)continue;let Xe=2*Ze*Ze*Ze-3*Ze*Ze+1;const ri=4*(r+ut+(n+$e)*N);be+=Xe*b[ri+3],ie+=Xe,!i&&b[ri+3]<255&&(Xe=Xe*b[ri+3]/255),ne+=Xe*b[ri],he+=Xe*b[ri+1],de+=Xe*b[ri+2],Y+=Xe}}E[H]=ne/Y,E[H+1]=he/Y,E[H+2]=de/Y,E[H+3]=be/ie}return e}function fue(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return vue}}function yue(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function mue(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const l=255/n;e[r]=e[r]*l,e[r+1]=e[r+1]*l,e[r+2]=e[r+2]*l}}}const gue={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},pE=98,vue="png",bue={png:100,jpg:pE,jpeg:pE};var sr;function Z4(t,e,i={}){const r=e===sr.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const n of r){const l=t.getContext(n,i);if(l)return l}return null}function L4e(t,e,i={}){const r=tN(t);for(const n of r){const l=Z4(e,n,i);if(l)return l}return null}function tN(t){if(t==="3d")return[sr.WEBGL2];const e=ce("esri-force-webgl");return e===sr.WEBGL1||e===sr.WEBGL2?[e]:ce("mac")&&ce("chrome")?[sr.WEBGL1,sr.WEBGL2]:[sr.WEBGL2,sr.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(sr||(sr={}));let Z3,X3;function wue(t){const e=tN(t);for(;e.length>1;){const i=fE(e.shift());if(i.available)return i}return fE(e.shift())}function fE(t){switch(t){case sr.WEBGL1:return _ue();case sr.WEBGL2:return xue()}}function _ue(){return Z3||(Z3=$ue()),Z3}function xue(){return X3||(X3=Tue()),X3}let iN=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},Sue=class extends iN{constructor(){super(...arguments),this.type=sr.WEBGL1}},Mue=class extends iN{constructor(){super(...arguments),this.type=sr.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function rN(t,e){if(t===sr.WEBGL1&&typeof WebGLRenderingContext>"u"||t===sr.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=Z4(i,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=Z4(i,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===sr.WEBGL1){const l=r.getParameter(r.VERSION),d=l==null?void 0:l.match(/^WebGL\s+([\d.]*)/);if(d){const y=parseFloat(d[1]);e.available=y>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),r}function $ue(){const t=new Sue,e=rN(sr.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function Tue(){const t=new Mue,e=rN(sr.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Iue(t){const e=wue(t);if(!e.available)return new se("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new se("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new se("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new se("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===sr.WEBGL1){if(!e.supportsElementIndexUint)return new se("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new se("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new se("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Eue(t){return t&&"nodeType"in t}function Aue(t){return t&&typeof t.render=="function"}const yE={component:"esri-component"};let _c=class extends Be{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(yE.component),i&&i.classList.remove(yE.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||Eue(e)?(this._set("widget",null),F7(e)):(Aue(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};g([S({dependsOn:[]})],_c.prototype,"id",null),g([S()],_c.prototype,"node",null),g([xt("node")],_c.prototype,"castNode",null),g([S({readOnly:!0})],_c.prototype,"widget",void 0),_c=g([J("esri.views.ui.Component")],_c);const rb=_c,sN="calcite-mode-";function kue(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function Uw(){return kue().startsWith("dark")}function Pue(){return`${sN}${Uw()?"dark":"light"}`}function Cue(t){Oue(t),t.classList.add(Pue())}function Oue(t){Array.from(t.classList).forEach(e=>{e.startsWith(sN)&&t.classList.remove(e)})}const Lue={left:0,top:0,bottom:0,right:0},nN={bottom:30,top:15,right:15,left:15},qa="esri-ui",Ms={ui:qa,corner:`${qa}-corner`,innerContainer:`${qa}-inner-container`,manualContainer:`${qa}-manual-container`,cornerContainer:`${qa}-corner-container`,topLeft:`${qa}-top-left`,topRight:`${qa}-top-right`,bottomLeft:`${qa}-bottom-left`,bottomRight:`${qa}-bottom-right`};function Due(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function Ng(t){return t===0?"0":`${t}px`}function Q3(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function e5(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let ga=class extends Na.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Vn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&e5(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&e5(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([me(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,st),me(()=>this.padding,this._applyUIPadding,st),me(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},st),EO(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Ms.ui),Cue(e),this._attachContainers(e)),i&&(i.classList.remove(Ms.ui),e5(i,{top:"",bottom:"",left:"",right:""}),vj(i)),this._set("container",e))}get height(){var l;const e=((l=this.view)==null?void 0:l.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...nN,...e}}get width(){var l;const e=((l=this.view)==null?void 0:l.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,l;if(Array.isArray(e))return void e.forEach(y=>this.add(y,i));const d=Q3(e);d&&({index:r,position:i,component:e,key:n}=d),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:l}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,n,l)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(l=>this.remove(l,i));const r=this._find(e);if(r){if(this._componentMap.has(e)&&((n=this._componentMap.get(e))==null?void 0:n.key)!==i)return;const l=this._components.indexOf(r),d=r.node.parentNode;return d==null||d.removeChild(r.node),this._componentMap.delete(e),this._components.splice(l,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const l of e)this.empty(l,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(l=>this._findByNode(l)).filter(l=>{var d;return l==null?!1:!(((d=this._componentMap.get(l))==null?void 0:d.internal)??!1)||i.removeInternal});for(const l of n)this.remove(l)}move(e,i){if(Array.isArray(e)&&e.forEach(d=>this.move(d,i)),!e)return;let r;const n=Q3(e)||Q3(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const l=this.remove(e);l&&this.add(l,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.map(r=>this._getComponentsAtPosition(r,i)).flat():this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,l){e instanceof rb||(e=new rb({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,internal:l})}_find(e){return e?e instanceof rb?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??Lue}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ms.innerContainer,Ms.cornerContainer);const i=document.createElement("div");i.classList.add(Ms.innerContainer,Ms.manualContainer);const r=document.createElement("div");r.classList.add(Ms.topLeft,Ms.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Ms.topRight,Ms.corner),e.appendChild(n);const l=document.createElement("div");l.classList.add(Ms.bottomLeft,Ms.corner),e.appendChild(l);const d=document.createElement("div");d.classList.add(Ms.bottomRight,Ms.corner),e.appendChild(d),this._innerContainer=e,this._manualContainer=i;const y=Th();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":l,"bottom-right":d,"top-leading":y?n:r,"top-trailing":y?r:n,"bottom-leading":y?d:l,"bottom-trailing":y?l:d},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:n}=e,l=this._positionNameToContainerLookup[i],d=n!=null&&n>-1;if(Due(r.widget)&&r.widget.startup(),!d)return void l.appendChild(r.node);const y=Array.from(l.children);if(n===0)return void(l.firstChild?u8(r.node,l.firstChild):l.appendChild(r.node));n>=y.length?l.appendChild(r.node):u8(r.node,y[n])}_toPixelPosition(e){return{top:Ng(e.top),left:Ng(e.left),right:Ng(e.right),bottom:Ng(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(Go).filter(n=>{var l;return i.includeInternal||!((l=this._componentMap.get(n))!=null&&l.internal)}).map(({widget:n,node:l})=>n??l)}};g([S()],ga.prototype,"_locale",void 0),g([S()],ga.prototype,"container",null),g([S()],ga.prototype,"height",null),g([S({value:nN})],ga.prototype,"padding",null),g([xt("padding")],ga.prototype,"castPadding",null),g([S()],ga.prototype,"view",void 0),g([S()],ga.prototype,"width",null),ga=g([J("esri.views.ui.UI")],ga);const Rue=ga,jue="randomUUID"in crypto;function oN(){if(jue)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function z4e(){return`{${oN()}}`}const Fue={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},Nue={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},zue=t=>({...Nue,...t}),Vue=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},Bue=(t,e)=>t.find(e),mE=(t,e,i=!1)=>{let r=t;return e.forEach((n,l)=>{const d=r!=null&&r.children?Bue(r.children,y=>y.domNode===n):void 0;i&&!d&&l!==e.length-1||(r=d)}),r},Gue=t=>{let e;const i={...Fue,...t},r=zue(i),n=r.performanceLogger;let l,d=!0,y=!1;const b=[],x=[],$=(k,P,D)=>{var B;let L;r.eventHandlerInterceptor=(W,H,Y,ie)=>function(ne){let he;n("domEvent",ne);const de=Vue(ne.currentTarget,L.domNode),be=de.some($e=>{var ke;return customElements.get((ke=$e==null?void 0:$e.tagName)==null?void 0:ke.toLowerCase())});if(ne.eventPhase===Event.CAPTURING_PHASE||!be)de.reverse(),he=mE(L.getLastRender(),de);else{const $e=ne.composedPath(),ke=$e.slice($e.indexOf(ne.currentTarget),$e.indexOf(L.domNode)).filter(Ge=>Ge.getRootNode()===Ge.ownerDocument).reverse();he=mE(L.getLastRender(),ke,!0)}let we;return he&&(we=i.handleInterceptedEvent(e,he,this,ne)),n("domEventProcessed",ne),we},(B=i.postProcessProjectionOptions)==null||B.call(i,r);const N=D();L=k(P,N,r),b.push(L),x.push(D),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(L,N)};let E=()=>{if(l=void 0,d){d=!1,n("renderStart",void 0);for(let k=0;k<b.length;k++){const P=x[k]();n("rendered",void 0),b[k].update(P),n("patched",void 0)}n("renderDone",void 0),d=!0}};return i.modifyDoRenderImplementation&&(E=i.modifyDoRenderImplementation(E,b,x)),e={renderNow:E,scheduleRender:()=>{l||y||(l=requestAnimationFrame(E))},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),y=!0},resume:()=>{y=!1,d=!0,e.scheduleRender()},append:(k,P)=>{$(uh.append,k,P)},insertBefore:(k,P)=>{$(uh.insertBefore,k,P)},merge:(k,P)=>{$(uh.merge,k,P)},replace:(k,P)=>{$(uh.replace,k,P)},detach:k=>{for(let P=0;P<x.length;P++)if(x[P]===k)return x.splice(P,1),b.splice(P,1)[0];throw new Error("renderFunction was not found")}},e},bp={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let wp,aN,__,lN=!1,qw=!1,e$=!1,en=!1,gE=null,X4=!1;const Uue=t=>{const e=new URL(t,Ar.$resourcesUrl$);return e.origin!==Nm.location.origin?e.href:e.pathname},que=t=>Ar.$resourcesUrl$=t,Ed=(t,e="")=>()=>{},vE="http://www.w3.org/1999/xlink",bE={},Hue="http://www.w3.org/2000/svg",Wue="http://www.w3.org/1999/xhtml",Jue=t=>t!=null,t$=t=>(t=typeof t,t==="object"||t==="function");function Yue(t){var e,i,r;return(r=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const uN=(t,e,...i)=>{let r=null,n=null,l=null,d=!1,y=!1;const b=[],x=E=>{for(let k=0;k<E.length;k++)r=E[k],Array.isArray(r)?x(r):r!=null&&typeof r!="boolean"&&((d=typeof t!="function"&&!t$(r))&&(r=String(r)),d&&y?b[b.length-1].$text$+=r:b.push(d?Hw(null,r):r),y=d)};if(x(i),e){e.key&&(n=e.key),e.name&&(l=e.name);{const E=e.className||e.class;E&&(e.class=typeof E!="object"?E:Object.keys(E).filter(k=>E[k]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,b,Xue);const $=Hw(t,null);return $.$attrs$=e,b.length>0&&($.$children$=b),$.$key$=n,$.$name$=l,$},Hw=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Kue={},Zue=t=>t&&t.$tag$===Kue,Xue={forEach:(t,e)=>t.map(wE).forEach(e),map:(t,e)=>t.map(wE).map(e).map(Que)},wE=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Que=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),uN(t.vtag,i,...t.vchildren||[])}const e=Hw(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},ehe=t=>Ihe.map(e=>e(t)).find(e=>!!e),the=(t,e)=>t!=null&&!t$(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,ihe=t=>t,V4e=(t,e,i)=>{const r=ihe(t);return{emit:n=>rhe(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},rhe=(t,e,i)=>{const r=Ar.ce(e,i);return t.dispatchEvent(r),r},_E=new WeakMap,she=(t,e,i)=>{let r=Jw.get(t);khe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,Jw.set(t,r)},nhe=(t,e,i,r)=>{var n;let l=hN(e,i);const d=Jw.get(l);if(t=t.nodeType===11?t:zo,d)if(typeof d=="string"){t=t.head||t;let y=_E.get(t),b;if(y||_E.set(t,y=new Set),!y.has(l)){{b=zo.createElement("style"),b.innerHTML=d;const x=(n=Ar.$nonce$)!==null&&n!==void 0?n:Yue(zo);x!=null&&b.setAttribute("nonce",x),t.insertBefore(b,t.querySelector("link"))}y&&y.add(l)}}else t.adoptedStyleSheets.includes(d)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,d]);return l},ohe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,n=Ed("attachStyles",e.$tagName$),l=nhe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=l,i.classList.add(l+"-h"),r&2&&i.classList.add(l+"-s")),n()},hN=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),xE=(t,e,i,r,n,l)=>{if(i!==r){let d=TE(t,e),y=e.toLowerCase();if(e==="class"){const b=t.classList,x=SE(i),$=SE(r);b.remove(...x.filter(E=>E&&!$.includes(E))),b.add(...$.filter(E=>E&&!x.includes(E)))}else if(e==="style"){for(const b in i)(!r||r[b]==null)&&(b.includes("-")?t.style.removeProperty(b):t.style[b]="");for(const b in r)(!i||r[b]!==i[b])&&(b.includes("-")?t.style.setProperty(b,r[b]):t.style[b]=r[b])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):TE(Nm,y)?e=y.slice(2):e=y[2]+e.slice(3),i&&Ar.rel(t,e,i,!1),r&&Ar.ael(t,e,r,!1);else{const b=t$(r);if((d||b&&r!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=r;else{const $=r??"";e==="list"?d=!1:(i==null||t[e]!=$)&&(t[e]=$)}}catch{}let x=!1;y!==(y=y.replace(/^xlink\:?/,""))&&(e=y,x=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(x?t.removeAttributeNS(vE,e):t.removeAttribute(e)):(!d||l&4||n)&&!b&&(r=r===!0?"":r,x?t.setAttributeNS(vE,e,r):t.setAttribute(e,r))}}},ahe=/\s/,SE=t=>t?t.split(ahe):[],cN=(t,e,i,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,l=t&&t.$attrs$||bE,d=e.$attrs$||bE;for(r in l)r in d||xE(n,r,l[r],void 0,i,e.$flags$);for(r in d)xE(n,r,l[r],d[r],i,e.$flags$)},Ww=(t,e,i,r)=>{const n=e.$children$[i];let l=0,d,y,b;if(lN||(e$=!0,n.$tag$==="slot"&&(wp&&r.classList.add(wp+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)d=n.$elm$=zo.createTextNode(n.$text$);else if(n.$flags$&1)d=n.$elm$=zo.createTextNode("");else{if(en||(en=n.$tag$==="svg"),d=n.$elm$=zo.createElementNS(en?Hue:Wue,n.$flags$&2?"slot-fb":n.$tag$),en&&n.$tag$==="foreignObject"&&(en=!1),cN(null,n,en),Jue(wp)&&d["s-si"]!==wp&&d.classList.add(d["s-si"]=wp),n.$children$)for(l=0;l<n.$children$.length;++l)y=Ww(t,n,l,d),y&&d.appendChild(y);n.$tag$==="svg"?en=!1:d.tagName==="foreignObject"&&(en=!0)}return d["s-hn"]=__,n.$flags$&3&&(d["s-sr"]=!0,d["s-cr"]=aN,d["s-sn"]=n.$name$||"",b=t&&t.$children$&&t.$children$[i],b&&b.$tag$===n.$tag$&&t.$elm$&&am(t.$elm$,!1)),d},am=(t,e)=>{Ar.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==__&&n["s-ol"]&&(fN(n).insertBefore(n,i$(n)),n["s-ol"].remove(),n["s-ol"]=void 0,e$=!0),e&&am(n,e)}Ar.$flags$&=-2},dN=(t,e,i,r,n,l)=>{let d=t["s-cr"]&&t["s-cr"].parentNode||t,y;for(d.shadowRoot&&d.tagName===__&&(d=d.shadowRoot);n<=l;++n)r[n]&&(y=Ww(null,i,n,t),y&&(r[n].$elm$=y,d.insertBefore(y,i$(e))))},pN=(t,e,i,r,n)=>{for(;e<=i;++e)(r=t[e])&&(n=r.$elm$,gN(r),qw=!0,n["s-ol"]?n["s-ol"].remove():am(n,!0),n.remove())},lhe=(t,e,i,r)=>{let n=0,l=0,d=0,y=0,b=e.length-1,x=e[0],$=e[b],E=r.length-1,k=r[0],P=r[E],D,L;for(;n<=b&&l<=E;)if(x==null)x=e[++n];else if($==null)$=e[--b];else if(k==null)k=r[++l];else if(P==null)P=r[--E];else if(zg(x,k))_p(x,k),x=e[++n],k=r[++l];else if(zg($,P))_p($,P),$=e[--b],P=r[--E];else if(zg(x,P))(x.$tag$==="slot"||P.$tag$==="slot")&&am(x.$elm$.parentNode,!1),_p(x,P),t.insertBefore(x.$elm$,$.$elm$.nextSibling),x=e[++n],P=r[--E];else if(zg($,k))(x.$tag$==="slot"||P.$tag$==="slot")&&am($.$elm$.parentNode,!1),_p($,k),t.insertBefore($.$elm$,x.$elm$),$=e[--b],k=r[++l];else{for(d=-1,y=n;y<=b;++y)if(e[y]&&e[y].$key$!==null&&e[y].$key$===k.$key$){d=y;break}d>=0?(L=e[d],L.$tag$!==k.$tag$?D=Ww(e&&e[l],i,d,t):(_p(L,k),e[d]=void 0,D=L.$elm$),k=r[++l]):(D=Ww(e&&e[l],i,l,t),k=r[++l]),D&&fN(x.$elm$).insertBefore(D,i$(x.$elm$))}n>b?dN(t,r[E+1]==null?null:r[E+1].$elm$,i,r,l,E):l>E&&pN(e,n,b)},zg=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,i$=t=>t&&t["s-ol"]||t,fN=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,_p=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,n=e.$children$,l=e.$tag$,d=e.$text$;let y;d===null?(en=l==="svg"?!0:l==="foreignObject"?!1:en,l==="slot"||cN(t,e,en),r!==null&&n!==null?lhe(i,r,e,n):n!==null?(t.$text$!==null&&(i.textContent=""),dN(i,null,e,n,0,n.length-1)):r!==null&&pN(r,0,r.length-1),en&&l==="svg"&&(en=!1)):(y=i["s-cr"])?y.parentNode.textContent=d:t.$text$!==d&&(i.data=d)},yN=t=>{const e=t.childNodes;let i,r,n,l,d,y;for(r=0,n=e.length;r<n;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(d=i["s-sn"],i.hidden=!1,l=0;l<n;l++)if(y=e[l].nodeType,e[l]["s-hn"]!==i["s-hn"]||d!==""){if(y===1&&d===e[l].getAttribute("slot")){i.hidden=!0;break}}else if(y===1||y===3&&e[l].textContent.trim()!==""){i.hidden=!0;break}}yN(i)}},Po=[],mN=t=>{let e,i,r,n,l,d,y=0;const b=t.childNodes,x=b.length;for(;y<x;y++){if(e=b[y],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=e["s-sn"],d=r.length-1;d>=0;d--)i=r[d],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(ME(i,n)?(l=Po.find($=>$.$nodeToRelocate$===i),qw=!0,i["s-sn"]=i["s-sn"]||n,l?l.$slotRefNode$=e:Po.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&Po.map($=>{ME($.$nodeToRelocate$,i["s-sn"])&&(l=Po.find(E=>E.$nodeToRelocate$===i),l&&!$.$slotRefNode$&&($.$slotRefNode$=l.$slotRefNode$))})):Po.some($=>$.$nodeToRelocate$===i)||Po.push({$nodeToRelocate$:i}));e.nodeType===1&&mN(e)}},ME=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",gN=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(gN)},uhe=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,n=t.$vnode$||Hw(null,null),l=Zue(e)?e:uN(null,null,e);__=i.tagName,r.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},r.$attrsToReflect$.map(([d,y])=>l.$attrs$[y]=i[d])),l.$tag$=null,l.$flags$|=4,t.$vnode$=l,l.$elm$=n.$elm$=i.shadowRoot||i,wp=i["s-sc"],aN=i["s-cr"],lN=(r.$flags$&1)!==0,qw=!1,_p(n,l);{if(Ar.$flags$|=1,e$){mN(l.$elm$);let d,y,b,x,$,E,k=0;for(;k<Po.length;k++)d=Po[k],y=d.$nodeToRelocate$,y["s-ol"]||(b=zo.createTextNode(""),b["s-nr"]=y,y.parentNode.insertBefore(y["s-ol"]=b,y));for(k=0;k<Po.length;k++)if(d=Po[k],y=d.$nodeToRelocate$,d.$slotRefNode$){for(x=d.$slotRefNode$.parentNode,$=d.$slotRefNode$.nextSibling,b=y["s-ol"];b=b.previousSibling;)if(E=b["s-nr"],E&&E["s-sn"]===y["s-sn"]&&x===E.parentNode&&(E=E.nextSibling,!E||!E["s-nr"])){$=E;break}(!$&&x!==y.parentNode||y.nextSibling!==$)&&y!==$&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),x.insertBefore(y,$))}else y.nodeType===1&&(y.hidden=!0)}qw&&yN(l.$elm$),Ar.$flags$&=-2,Po.length=0}},hhe=(t,e)=>{},r$=(t,e)=>(t.$flags$|=16,hhe(t,t.$ancestorComponent$),Che(()=>che(t,e))),che=(t,e)=>{const i=t.$hostElement$,r=Ed("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;let l;return e?l=p0(n,"componentWillLoad"):l=p0(n,"componentWillUpdate"),l=$E(l,()=>p0(n,"componentWillRender")),r(),$E(l,()=>dhe(t,n,e))},dhe=async(t,e,i)=>{const r=t.$hostElement$,n=Ed("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&ohe(t);const l=Ed("render",t.$cmpMeta$.$tagName$);phe(t,e,r),l(),n(),fhe(t)},phe=(t,e,i)=>{try{gE=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(bp.hasRenderFn||bp.reflect)&&(bp.vdomRender||bp.reflect)&&(bp.hydrateServerSide||uhe(t,e))}catch(y){Fm(y,t.$hostElement$)}return gE=null,null},fhe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=Ed("postUpdate",e),n=i;t.$ancestorComponent$,p0(n,"componentDidRender"),t.$flags$&64?(p0(n,"componentDidUpdate"),r()):(t.$flags$|=64,p0(n,"componentDidLoad"),r())},B4e=t=>{{const e=jm(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&r$(e,!1),i}},p0=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){Fm(r)}},$E=(t,e)=>t&&t.then?t.then(e):e(),yhe=(t,e)=>jm(t).$instanceValues$.get(e),mhe=(t,e,i,r)=>{const n=jm(t),l=t,d=n.$instanceValues$.get(e),y=n.$flags$,b=l;i=the(i,r.$members$[e][0]);const x=Number.isNaN(d)&&Number.isNaN(i);if(i!==d&&!x){n.$instanceValues$.set(e,i);{if(r.$watchers$&&y&128){const E=r.$watchers$[e];E&&E.map(k=>{try{b[k](i,d,e)}catch(P){Fm(P,l)}})}if((y&18)===2){if(b.componentShouldUpdate&&b.componentShouldUpdate(i,d,e)===!1)return;r$(n,!1)}}}},ghe=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),n=t.prototype;r.map(([l,[d]])=>{(d&31||d&32)&&Object.defineProperty(n,l,{get(){return yhe(this,l)},set(y){mhe(this,l,y,e)},configurable:!0,enumerable:!0})});{const l=new Map;n.attributeChangedCallback=function(d,y,b){Ar.jmp(()=>{const x=l.get(d);if(this.hasOwnProperty(x))b=this[x],delete this[x];else if(n.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==b)return;this[x]=b===null&&typeof this[x]=="boolean"?!1:b})},t.observedAttributes=r.filter(([d,y])=>y[0]&15).map(([d,y])=>{const b=y[1]||d;return l.set(b,d),y[0]&512&&e.$attrsToReflect$.push([d,b]),b})}}return t},vhe=async(t,e,i,r,n)=>{if(!(e.$flags$&32)&&(n=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),n.style)){let d=n.style;typeof d!="string"&&(d=d[e.$modeName$=ehe(t)]);const y=hN(i,e.$modeName$);if(!Jw.has(y)){const b=Ed("registerStyles",i.$tagName$);she(y,d,!!(i.$flags$&1)),b()}}e.$ancestorComponent$,(()=>r$(e,!0))()},bhe=t=>{},whe=t=>{if(!(Ar.$flags$&1)){const e=jm(t),i=e.$cmpMeta$,r=Ed("connectedCallback",i.$tagName$);e.$flags$&1?(vN(t,e,i.$listeners$),bhe(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&_he(t),i.$members$&&Object.entries(i.$members$).map(([n,[l]])=>{if(l&31&&t.hasOwnProperty(n)){const d=t[n];delete t[n],t[n]=d}}),vhe(t,e,i)),r()}},_he=t=>{const e=t["s-cr"]=zo.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},xhe=t=>{if(!(Ar.$flags$&1)){const e=jm(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},G4e=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){The(this,i)},connectedCallback(){whe(this),r&&r.call(this)},disconnectedCallback(){xhe(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,ghe(t,i)},U4e=(t,e)=>e,vN=(t,e,i,r)=>{i&&i.map(([n,l,d])=>{const y=Mhe(t,n),b=She(e,d),x=$he(n);Ar.ael(y,l,b,x),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Ar.rel(y,l,b,x))})},She=(t,e)=>i=>{try{bp.lazyLoad||t.$hostElement$[e](i)}catch(r){Fm(r)}},Mhe=(t,e)=>e&4?zo:e&8?Nm:e&16?zo.body:t,$he=t=>Ehe?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,bN=new WeakMap,jm=t=>bN.get(t),The=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return vN(t,i,e.$listeners$),bN.set(t,i)},TE=(t,e)=>e in t,Fm=(t,e)=>(0,console.error)(t,e),Jw=new Map,Ihe=[],Nm=typeof window<"u"?window:{},zo=Nm.document||{head:{}},q4e=Nm.HTMLElement||class{},Ar={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},Ehe=(()=>{let t=!1;try{zo.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Ahe=t=>Promise.resolve(t),khe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Q4=[],wN=[],_N=(t,e)=>i=>{t.push(i),X4||(X4=!0,e&&Ar.$flags$&4?Phe(eS):Ar.raf(eS))},IE=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Fm(i)}t.length=0},eS=()=>{IE(Q4),IE(wN),(X4=Q4.length>0)&&Ar.raf(eS)},Phe=t=>Ahe().then(t),H4e=_N(Q4,!1),Che=_N(wN,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const xN="calcite-mode-auto",SN="calcite-mode-dark",Ohe="calcite-mode-light",W4e={autoMode:xN,darkMode:SN,lightMode:Ohe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var MN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Yw=MN.join(","),$N=typeof Element>"u",Ad=$N?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Kw=!$N&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Zw=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),l=n===""||n==="true",d=l||i&&e&&t(e.parentNode);return d},Lhe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},TN=function(e,i,r){if(Zw(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Yw));return i&&Ad.call(e,Yw)&&n.unshift(e),n=n.filter(r),n},IN=function t(e,i,r){for(var n=[],l=Array.from(e);l.length;){var d=l.shift();if(!Zw(d,!1))if(d.tagName==="SLOT"){var y=d.assignedElements(),b=y.length?y:d.children,x=t(b,!0,r);r.flatten?n.push.apply(n,x):n.push({scopeParent:d,candidates:x})}else{var $=Ad.call(d,Yw);$&&r.filter(d)&&(i||!e.includes(d))&&n.push(d);var E=d.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(d),k=!Zw(E,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(d));if(E&&k){var P=t(E===!0?d.children:E.children,!0,r);r.flatten?n.push.apply(n,P):n.push({scopeParent:d,candidates:P})}else l.unshift.apply(l,d.children)}}return n},EN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},AN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Lhe(e))&&!EN(e)?0:e.tabIndex},Dhe=function(e,i){var r=AN(e);return r<0&&i&&!EN(e)?0:r},Rhe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},kN=function(e){return e.tagName==="INPUT"},jhe=function(e){return kN(e)&&e.type==="hidden"},Fhe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},Nhe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},zhe=function(e){if(!e.name)return!0;var i=e.form||Kw(e),r=function(y){return i.querySelectorAll('input[type="radio"][name="'+y+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var l=Nhe(n,e.form);return!l||l===e},Vhe=function(e){return kN(e)&&e.type==="radio"},Bhe=function(e){return Vhe(e)&&!zhe(e)},Ghe=function(e){var i,r=e&&Kw(e),n=(i=r)===null||i===void 0?void 0:i.host,l=!1;if(r&&r!==e){var d,y,b;for(l=!!((d=n)!==null&&d!==void 0&&(y=d.ownerDocument)!==null&&y!==void 0&&y.contains(n)||e!=null&&(b=e.ownerDocument)!==null&&b!==void 0&&b.contains(e));!l&&n;){var x,$,E;r=Kw(n),n=(x=r)===null||x===void 0?void 0:x.host,l=!!(($=n)!==null&&$!==void 0&&(E=$.ownerDocument)!==null&&E!==void 0&&E.contains(n))}}return l},EE=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},Uhe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var l=Ad.call(e,"details>summary:first-of-type"),d=l?e.parentElement:e;if(Ad.call(d,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var y=e;e;){var b=e.parentElement,x=Kw(e);if(b&&!b.shadowRoot&&n(b)===!0)return EE(e);e.assignedSlot?e=e.assignedSlot:!b&&x!==e.ownerDocument?e=x.host:e=b}e=y}if(Ghe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return EE(e);return!1},qhe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Ad.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},Xw=function(e,i){return!(i.disabled||Zw(i)||jhe(i)||Uhe(i,e)||Fhe(i)||qhe(i))},tS=function(e,i){return!(Bhe(i)||AN(i)<0||!Xw(e,i))},Hhe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Whe=function t(e){var i=[],r=[];return e.forEach(function(n,l){var d=!!n.scopeParent,y=d?n.scopeParent:n,b=Dhe(y,d),x=d?t(n.candidates):y;b===0?d?i.push.apply(i,x):i.push(y):r.push({documentOrder:l,tabIndex:b,item:n,isScope:d,content:x})}),r.sort(Rhe).reduce(function(n,l){return l.isScope?n.push.apply(n,l.content):n.push(l.content),n},[]).concat(i)},Jhe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=IN([e],i.includeContainer,{filter:tS.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Hhe}):r=TN(e,i.includeContainer,tS.bind(null,i)),Whe(r)},J4e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=IN([e],i.includeContainer,{filter:Xw.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=TN(e,i.includeContainer,Xw.bind(null,i)),r},Y4e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Ad.call(e,Yw)===!1?!1:tS(i,e)},Yhe=MN.concat("iframe").join(","),K4e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Ad.call(e,Yhe)===!1?!1:Xw(i,e)};const Khe={getShadowRoot:!0};function Z4e(t){const e="dir",i=`[${e}]`,r=Zhe(t,i);return r?r.getAttribute(e):"ltr"}function s$(t){return t.getRootNode()}function X4e(t){const e=s$(t);return"host"in e?e:null}function PN(t){return t.host||null}function Q4e(t,{selector:e,id:i}){function r(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const l=s$(n),d=i?"getElementById"in l?l.getElementById(i):null:e?l.querySelector(e):null,y=PN(l);return d||(y?r(y):null)}return r(t)}function Zhe(t,e){function i(r){return r?r.closest(e)||i(PN(s$(r))):null}return i(t)}function Xhe(t,e){return CN(t,e)}function CN(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return CN(r instanceof ShadowRoot?r.host:r,e)}function eSe(t,e){return!!Xhe(e,i=>i===t?!0:void 0)}function Qhe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function tSe(t){if(t)return Qhe(t)?t.setFocus():t.focus()}function iSe(t){t&&(Jhe(t,Khe)[0]||t).focus()}const lm=":not([slot])";function rSe(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:lm;return i!=null&&i.all?ece(t,r,i):tce(t,r,i)}function ON(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function ece(t,e,i){let r=e===lm?ON(t,lm):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(l=>l.parentElement===t),r=i!=null&&i.matches?r.filter(l=>l==null?void 0:l.matches(i.matches)):r;const n=i==null?void 0:i.selector;return n?r.map(l=>Array.from(l.querySelectorAll(n))).reduce((l,d)=>[...l,...d],[]).filter(l=>!!l):r}function tce(t,e,i){let r=e===lm?ON(t,lm)[0]||null:t.querySelector(e);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===t?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const n=i==null?void 0:i.selector;return n?r==null?void 0:r.querySelector(n):r}function sSe(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function nSe(t){return Boolean(t).toString()}function oSe(t){return nce(t)||rce(t)}function ice(t){return sce(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function rce(t){return!!ice(t)}function sce(t){return t.target.assignedNodes({flatten:!0})}function nce(t){return!!oce(t).length}function oce(t){return t.target.assignedElements({flatten:!0})}function aSe(t){return!!(t.isPrimary&&t.button===0)}function lSe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function AE(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(SN)||t.contains(xN)&&e?"dark":"light",r=d=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:d}})),n=d=>{l!==d&&r(d),l=d};let l=i();r(l),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>n(d.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function ace(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?AE():document.addEventListener("DOMContentLoaded",()=>AE(),{once:!0}))}const lce=ace;lce();let LN;function uce(){try{Uue(".")}catch{que(Rn(It(LN)))}}function uf(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return Promise.all(e)}LN="components/assets";const DN=Symbol("widget"),hce=Symbol("widget-test-data"),cce=[],dce={},Qw=new WeakMap;function RN(t,e){let i=e.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=RN(t,i[n]);else i=cce;const r=e.vnodeSelector;if(n$(r)){const n=e.properties||dce,l=n.key||r;return{vnodeSelector:"div",properties:{key:l,afterCreate:pce,afterUpdate:fce,afterRemoved:jN,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:l,children:i}},children:void 0,text:void 0,domNode:null}}return e}function pce(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:l}){var y;const d=new n(l);d.container=t,Qw.set(t,d),(y=d.afterCreate)==null||y.call(d,d,t),r._internalHandles.add(Cl(()=>jN(t)))}function fce(t,e,i,{widgetProperties:r}){var l;const n=Qw.get(t);n&&(n.set(r),(l=n.afterUpdate)==null||l.call(n,n,t))}function jN(t){var i;const e=Qw.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),Qw.delete(t))}function n$(t){return typeof t=="function"&&t[DN]}const kE=new Set;function yce(t){kE.add(t),t.finally(()=>kE.delete(t))}var FN;const mce="esri.widgets.Widget";let gce=0;const vce={widgetIcon:"esri-icon-checkbox-unchecked"};function NN(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?NN(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const bce=Gue({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,l,d)=>{const y=e==null?void 0:e(r,n,l,d),b=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in l)||b){const x=r[2].toLowerCase()+r.slice(3),$=P=>y==null?void 0:y.call(l,P);l.addEventListener(x,$,b);const E=()=>l.removeEventListener(x,$,b),k=d.afterRemoved;d.afterRemoved=P=>{k==null||k(P),E()}}return y}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:l}=r,d=n===Event.CAPTURING_PHASE;let y=`on${l}${d?"capture":""}`;const b=e.properties;(b&&y in b||(y=`on${l[0].toUpperCase()}${l.slice(1)}${d?"Capture":""}`,b&&y in b))&&(Oj(),t.scheduleRender(),b[y].call(b.bind||i,r))}});let t5=!1,Yi=class extends j2(Na.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Fs,this._projector=bce,this._readyForTrueRender=!1,this.iconClass=vce.widgetIcon,this.icon=null,this.key=this,this._loadLocale=nd(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const d=await ws(this._messageBundleProps.map(async({bundlePath:y,propertyName:b})=>{if(this.destroyed)return;let x=await kO(y);this.uiStrings&&Object.keys(this.uiStrings)&&(x=NN(ae(x),this.uiStrings)),this[b]=x}));if(this.destroyed)return;for(const y of d)y.error&&ge.getLogger(this).error("widget-intl:locale-error",this.declaredClass,y.error)}await this.loadLocale()}),uce();const r="esri-widget-uid-"+oN(),n=this.render.bind(this);this._trackingTarget=new C2(()=>this.scheduleRender());const l=()=>{var $;if(!this._readyForTrueRender||this.destroyed)return null;const d=n();let{properties:y}=d;y||(d.properties=y={});const{key:b}=y;b||(y.key=r),this.visible?y.styles||(y.styles={}):(y.class="",y.styles={display:"none"}),y.styles.display||(y.styles.display="");let x=0;return($=d.children)==null||$.forEach(E=>{if(n$(E.vnodeSelector))return;let{properties:k}=E;k||(E.properties=k={}),k.key||(k.key=`${this.id}--${x++}`)}),RN(this,d)};this.render=()=>{if(t5)return l();let d=Ase(this)??null;if(d)return d;this._trackingTarget.clear(),t5=!0;try{d=Ol(this._trackingTarget,l)}catch(y){throw console.error(y),y}finally{t5=!1}return d&&kse(this,d),d},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),yce(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(gx)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(ei(this._trackingTarget),ei(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,D3(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return F7(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+gce++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(FN=DN,hce)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(D3(this),this._projector.scheduleRender())}classes(...e){return Dj.apply(this,e)}renderNow(){D3(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(me(()=>this.viewModel,(r,n)=>{n&&this._internalHandles.remove("delegated-events"),r&&E2(r)&&this._internalHandles.add(this._delegatedEventNames.map(l=>A2(r,l,d=>{this.emit(l,d)})),"delegated-events")},st)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(gx),this.scheduleRender()};this._internalHandles.add([EO(e),me(()=>this.uiStrings,e),Hn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Yi[FN]=!0,g([S()],Yi.prototype,"_readyForTrueRender",void 0),g([S({value:null})],Yi.prototype,"container",null),g([xt("container")],Yi.prototype,"castContainer",null),g([S()],Yi.prototype,"iconClass",void 0),g([S()],Yi.prototype,"icon",void 0),g([S()],Yi.prototype,"id",null),g([S()],Yi.prototype,"label",null),g([S()],Yi.prototype,"renderable",null),g([S()],Yi.prototype,"uiStrings",void 0),g([S()],Yi.prototype,"viewModel",void 0),g([S({value:!0})],Yi.prototype,"visible",null),g([S()],Yi.prototype,"key",void 0),g([S()],Yi.prototype,"children",void 0),g([S()],Yi.prototype,"afterCreate",void 0),g([S()],Yi.prototype,"afterUpdate",void 0),g([S()],Yi.prototype,"afterRemoved",void 0),Yi=g([J(mce)],Yi);const kr=Yi;function PE(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function wce(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function Vg(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function _ce(t){return t.type==="bing-maps"}const su=[];let xp=class extends Rw{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ze,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(n=>me(()=>{var l;return[n.suspended,(l=n.layer)==null?void 0:l.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([Rs(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Hn(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;su.length=0,e&&i?(i.forEach(r=>{var d;if(r.suspended||!((d=r.layer)!=null&&d.attributionVisible))return;const n=r.layer;if(PE(n,"user"))return void Vg(su,r,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(r)){const y=this._fetchedAttributionData.get(r);return void(y?Vg(su,r,this._getDynamicAttribution(y,e,n)):PE(n)&&Vg(su,r,n.copyright))}return void this._fetchAttributionData(r)}const l=n.get("portalItem.accessInformation");Vg(su,r,l||n.copyright)}),wce(this.items,su)&&(this.items.removeAll(),this.items.addMany(su)),su.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await F2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,_ce(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let l=0;l<r.length;l++){const d=r[l],y=d.coverageAreas;if(!y)return;for(const b of y){const x=b.bbox,$=b.zoomMin-(i&&b.zoomMin?1:0),E=b.zoomMax-(i&&b.zoomMax?1:0),k=new Nt({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:dt.WGS84}),P={extent:ph(k),attribution:d.attribution||"",score:b.score!=null?b.score:100,id:l};for(let D=$;D<=E;D++)n[D]??(n[D]=[]),n[D].push(P)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var $;const{extent:n,scale:l}=i;let d=(($=r.tileInfo)==null?void 0:$.scaleToZoom(l))??0;if(d=Math.min(e.maxKey??0,Math.round(d)),!n||d==null||d<=-1)return"";const y=e[d],b=V2(n.center.clone().normalize(),i.spatialReference),x=new Set;return y?y.filter(E=>{const k=E.id,P=!x.has(k)&&b&&E.extent&&B2(E.extent,b);return P&&x.add(k),P}).sort((E,k)=>k.score-E.score||E.objectId-k.objectId).map(E=>E.attribution).join(", "):""}};g([S({readOnly:!0,type:ze})],xp.prototype,"items",void 0),g([S({readOnly:!0})],xp.prototype,"state",null),g([S()],xp.prototype,"view",void 0),xp=g([J("esri.widgets.Attribution.AttributionViewModel")],xp);const zN=xp;function $r(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Sce(t[e])}}}function xce(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Sce(t){return function(e,...i){xce(e)?Nse(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Er(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Mce=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},VN=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?VN(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Mce(n)),e.push(n))}},$ce=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return VN(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function X(t,e,...i){return typeof t!="function"||n$(t)?$ce(t,e,...i):t(e,...i)}const Xd="esri-attribution",nu={base:`${Xd} esri-widget`,poweredBy:`${Xd}__powered-by`,sources:`${Xd}__sources`,open:`${Xd}--open`,sourcesOpen:`${Xd}__sources--open`,link:`${Xd}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Wr=class extends kr{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=nu.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new zN}initialize(){this.addHandles(Rs(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[nu.open]:this._isOpen};return X("div",{bind:this,class:this.classes(nu.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return X("div",{class:nu.poweredBy},"Powered by"," ",X("a",{class:nu.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:n}=this,l={[nu.sourcesOpen]:e,[nu.interactive]:i};return X("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(nu.sources,l),innerHTML:n,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:l}=e,d=l>n,y=this._attributionTextOverflowed!==d;if(this._attributionTextOverflowed=d,y&&(i=!0),this._isOpen){const b=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,b&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};g([S()],Wr.prototype,"_isOpen",void 0),g([S()],Wr.prototype,"_isInteractive",null),g([S()],Wr.prototype,"_attributionTextOverflowed",void 0),g([S()],Wr.prototype,"_prevSourceNodeHeight",void 0),g([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Wr.prototype,"attributionText",null),g([S()],Wr.prototype,"iconClass",void 0),g([S()],Wr.prototype,"icon",void 0),g([S()],Wr.prototype,"itemDelimiter",void 0),g([S()],Wr.prototype,"label",null),g([S(),Er("esri/widgets/Attribution/t9n/Attribution")],Wr.prototype,"messages",void 0),g([S()],Wr.prototype,"view",null),g([S({type:zN})],Wr.prototype,"viewModel",void 0),g([$r()],Wr.prototype,"_toggleState",null),Wr=g([J("esri.widgets.Attribution")],Wr);const Tce=Wr,BN=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return Pd(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return g([S()],e.prototype,"goToOverride",void 0),g([S()],e.prototype,"view",void 0),e=g([J("esri.widgets.support.GoTo")],e),e},Ice="esri.widgets.CompassViewModel";let xc=class extends BN(Be){constructor(e){super(e),this._handles=new Fs,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(me(()=>this.view,this._updateRotationWatcher,st))}destroy(){Mi(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?me(()=>e==null?void 0:e.rotation,this._updateForRotation,st):me(()=>e==null?void 0:e.camera,this._updateForCamera,st))}};g([S({readOnly:!0})],xc.prototype,"canShowNorth",null),g([S()],xc.prototype,"orientation",void 0),g([S({readOnly:!0})],xc.prototype,"state",null),g([S()],xc.prototype,"view",void 0),xc=g([J(Ice)],xc);const GN=xc,ou={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let go=class extends kr{constructor(e,i){super(e,i),this.iconClass=ou.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new GN}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="disabled",n=(i==="rotation"?"rotation":"compass")=="compass",l=r?-1:0,d={[ou.disabled]:r,[ou.interactive]:!r},y={[ou.northIcon]:n,[ou.rotationIcon]:!n},{messages:b}=this;return X("div",{bind:this,class:this.classes(ou.base,d),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:l,"aria-label":b.reset,title:b.reset},X("span",{"aria-hidden":"true",class:this.classes(ou.icon,y),styles:this._toRotationTransform(e)}),X("span",{class:ou.text},b.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};g([S()],go.prototype,"goToOverride",null),g([S()],go.prototype,"iconClass",void 0),g([S()],go.prototype,"icon",void 0),g([S()],go.prototype,"label",null),g([S(),Er("esri/widgets/Compass/t9n/Compass")],go.prototype,"messages",void 0),g([S()],go.prototype,"view",null),g([S({type:GN})],go.prototype,"viewModel",void 0),g([$r()],go.prototype,"_reset",null),go=g([J("esri.widgets.Compass")],go);const Ece=go,Qd="esri-navigation-toggle",mn={base:`${Qd} esri-widget`,button:`${Qd}__button esri-widget--button`,activeButton:`${Qd}__button--active`,panButton:`${Qd}__button--pan`,rotateButton:`${Qd}__button--rotate`,isLayoutHorizontal:`${Qd}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Sp=class extends Be{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Hn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};g([S({readOnly:!0})],Sp.prototype,"state",null),g([S()],Sp.prototype,"navigationMode",void 0),g([S()],Sp.prototype,"view",void 0),Sp=g([J("esri.widgets.NavigationToggleViewModel")],Sp);const UN=Sp;let vo=class extends kr{constructor(e,i){super(e,i),this.iconClass=mn.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new UN}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[mn.disabled]:e,[mn.isLayoutHorizontal]:this.layout==="horizontal"},n={[mn.activeButton]:i},l={[mn.activeButton]:!i},d=e?-1:0,y=this.messages.toggle;return X("div",{bind:this,class:this.classes(mn.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:d,"aria-label":y,title:y},X("div",{class:this.classes(mn.button,mn.panButton,n)},X("span",{class:mn.panIcon})),X("div",{class:this.classes(mn.button,mn.rotateButton,l)},X("span",{class:mn.rotationIcon})))}_toggle(){this.toggle()}};g([S()],vo.prototype,"iconClass",void 0),g([S()],vo.prototype,"icon",void 0),g([S()],vo.prototype,"label",null),g([S({value:"vertical"})],vo.prototype,"layout",null),g([S(),Er("esri/widgets/NavigationToggle/t9n/NavigationToggle")],vo.prototype,"messages",void 0),g([S()],vo.prototype,"view",null),g([S({type:UN})],vo.prototype,"viewModel",void 0),g([$r()],vo.prototype,"_toggle",null),vo=g([J("esri.widgets.NavigationToggle")],vo);const Ace=vo,Rf={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let ol=class extends kr{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[Rf.disabled]:!this.enabled,[Rf.interactive]:this.enabled};return X("div",{bind:this,class:this.classes(Rf.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},X("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Rf.icon,this.iconClass??"")}),X("span",{class:Rf.iconText},this.title))}_triggerAction(){this.action.call(this)}};g([S()],ol.prototype,"action",void 0),g([S()],ol.prototype,"enabled",void 0),g([S()],ol.prototype,"iconClass",void 0),g([S()],ol.prototype,"icon",void 0),g([S()],ol.prototype,"title",void 0),g([$r()],ol.prototype,"_triggerAction",null),ol=g([J("esri.widgets.IconButton")],ol);const CE=ol;let Mp=class extends Be{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};g([S({readOnly:!0})],Mp.prototype,"canZoomIn",null),g([S({readOnly:!0})],Mp.prototype,"canZoomOut",null),g([S()],Mp.prototype,"view",void 0),Mp=g([J("esri.widgets.Zoom.ZoomConditions2D")],Mp);const kce=Mp;let $p=class extends Be{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};g([S({readOnly:!0})],$p.prototype,"canZoomIn",null),g([S({readOnly:!0})],$p.prototype,"canZoomOut",null),g([S()],$p.prototype,"view",void 0),$p=g([J("esri.widgets.Zoom.ZoomConditions3D")],$p);const Pce=$p;let Au=class extends Be{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new kce({view:e}):e.type==="3d"&&(this._zoomConditions=new Pce({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():n0(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():n0(e.goTo({zoomFactor:.5}))}};g([S()],Au.prototype,"_zoomConditions",void 0),g([S()],Au.prototype,"canZoomIn",null),g([S()],Au.prototype,"canZoomOut",null),g([S({readOnly:!0})],Au.prototype,"state",null),g([S()],Au.prototype,"view",null),Au=g([J("esri.widgets.Zoom.ZoomViewModel")],Au);const qN=Au,jf={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let va=class extends kr{constructor(e,i){super(e,i),this.iconClass=jf.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new qN}initialize(){this._zoomInButton=new CE({action:this.zoomIn.bind(this),iconClass:jf.zoomInIcon}),this._zoomOutButton=new CE({action:this.zoomOut.bind(this),iconClass:jf.zoomOutIcon})}destroy(){this._zoomInButton=ei(this._zoomInButton),this._zoomOutButton=ei(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[jf.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:n}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=n;const{zoomIn:l,zoomOut:d}=this.messages;return this._zoomInButton.title=l,this._zoomOutButton.title=d,X("div",{class:this.classes(jf.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};g([S()],va.prototype,"iconClass",void 0),g([S()],va.prototype,"icon",void 0),g([S()],va.prototype,"label",null),g([S({value:"vertical"})],va.prototype,"layout",null),g([S(),Er("esri/widgets/Zoom/t9n/Zoom")],va.prototype,"messages",void 0),g([S()],va.prototype,"view",null),g([S({type:qN})],va.prototype,"viewModel",void 0),va=g([J("esri.widgets.Zoom")],va);const Cce=va;function Oce(t){return(t==null?void 0:t.view)!==void 0}let sb=class extends Rue{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),l=n==null?void 0:n.widget;Oce(l)&&(l.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([me(()=>this.components,this._componentsWatcher,st),me(()=>this.view,this._updateViewAwareWidgets,st)])}_add(e,i,r,n,l){let d=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;d=this._createComponent(e)}super._add(d,i,r,n,l)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new rb({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new Tce({view:i});case"compass":return new Ece({view:i});case"navigation-toggle":return new Ace({view:i});case"zoom":return new Cce({view:i})}}};g([S()],sb.prototype,"components",void 0),sb=g([J("esri.views.ui.DefaultUI")],sb);const HN=sb;let nb=class extends HN{constructor(e){super(e),this.components=["attribution","zoom"]}};g([S()],nb.prototype,"components",void 0),nb=g([J("esri.views.ui.2d.DefaultUI2D")],nb);const WN=nb;var iS;let ob=iS=class extends ve{constructor(t){super(t),this.color=new Ne([0,0,0,1])}clone(){return new iS(ae({color:this.color}))}};g([S({type:Ne,json:{write:!0}})],ob.prototype,"color",void 0),ob=iS=g([J("esri.webmap.background.ColorBackground")],ob);const Lce=ob;let JN,YN,KN,ZN,XN,QN;async function Dce(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:l}]=await Promise.all([le(()=>import("./webglDeps-4d0faf48.js"),["assets/webglDeps-4d0faf48.js","assets/VertexArrayObject-e167aff4.js","assets/Texture-98b2958f.js","assets/enums-b14466b3.js","assets/ProgramTemplate-7bbdf1d1.js","assets/programUtils-d9cfeb9e.js","assets/NestedMap-1b5db22e.js"]),le(()=>import("./mapViewDeps-184895bd.js"),["assets/mapViewDeps-184895bd.js","assets/CIMResourceManager-00eb191d.js","assets/fontUtils-e5a6d9a4.js","assets/Rasterizer-e647197f.js","assets/cimAnalyzer-6c67340f.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-9bd633e4.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/rasterizingUtils-09460abf.js","assets/imageutils-42b20626.js","assets/Container-6d7657d3.js","assets/EffectView-1f253006.js","assets/enums-b14466b3.js","assets/Texture-98b2958f.js","assets/BufferPool-4e7a4bb4.js","assets/AttributeStoreView-7368932e.js","assets/TiledDisplayObject-ce000c2d.js","assets/color-6250d5ce.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-cb5f2066.js","assets/VertexArrayObject-e167aff4.js","assets/ProgramTemplate-7bbdf1d1.js","assets/GeometryUtils-74a0ae91.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-19a5cba4.js","assets/visualVariablesUtils-084bce9d.js","assets/ExpandedCIM-8988ffb4.js","assets/util-6fd73f41.js","assets/enums-fb086c25.js","assets/programUtils-d9cfeb9e.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-8fdcc51b.js","assets/Matcher-f059fb7b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-92dd31af.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-158819a5.js","assets/ComputedAttributeStorage-21f70a1d.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/projectionSupport-aa664e25.js","assets/json-48e3ea08.js","assets/RenderingContext-dec677ea.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-98f990c3.js","assets/normalizeUtilsSync-dc350495.js","assets/GraphicContainer-7d425371.js","assets/BaseGraphicContainer-4c3ffe77.js","assets/FeatureContainer-20504031.js","assets/TileContainer-932ca96d.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-f29702cb.js"])]);YN=t,KN=e,ZN=i,XN=r,QN=n,JN=l}const OE=160,LE={flipY:!0,premultipliedAlpha:!0};let tt=class extends Rre(fne(ene(ioe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new k0({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new us({constraints:new PF({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new bae(this),this._pePromise=null,this.floors=new ze,this.highlightOptions=new ZF,this.inputManager=new Qle({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new XF,this.type="2d",this.ui=new WN,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([me(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(OE)},Rd),this.on("resize",i=>this.stateManager.resize(i.width,i.height)),me(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),aie()}destroy(){this._set("preconditionsReady",!1),this.frameTask=ei(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new nue(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:l}=this;let d=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!l&&(i!=null&&i.effectiveLODs||(d=-1),(!r||e===0&&d===-1)&&(!n||n.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!jd()||(this._pePromise||(this._pePromise=$h().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=this.spatialReference,r=e.targetGeometry;return!!Nl(r.spatialReference,i)||this._projectionEngineLoaded}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return jce(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){this.stateManager.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var i,r,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(l=>!l.destroyed&&!("layerViews"in l)&&l.updating===!0));if(ce("esri-2d-log-updating")){const l=this.allLayerViews.reduce((d,y)=>({...d,[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(r=this.labelManager)==null?void 0:r.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(l)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,i){if(e)return this.animation&&(this.animation=null),this._createAnimation(),u_(()=>this.ready,i).then(()=>{var l;const r={animate:!0,...i},n=eae(e,this);return(l=this.animation)==null||l.update(n),this._gotoTask={},r.animate?this._gotoAnimated(n,r):this._gotoImmediate(n,r)});ge.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(e,i){const r=B8(e)?V8(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set,l=!1,d=null,y=null;i!=null&&i.include?RE(i.include,DE(this,E=>n.add(E),E=>{d||(d=new Set),d.add(E)},E=>n.add(E),()=>l=!0)):(l=!0,n=new Set(this.allLayerViews)),i!=null&&i.exclude&&RE(i.exclude,DE(this,E=>n.delete(E),E=>{y||(y=new Set),y.add(E)}));const b=this.allLayerViews.filter(E=>!E.suspended&&n.has(E)).reverse(),x=this.toMap(r);let $=[...l?this.graphicsView.hitTest(x).map(E=>({type:"graphic",graphic:E,layer:null,mapPoint:x})):[],...await Promise.all(b.map(E=>E.hitTest(x,r)).toArray())].filter(Go).flat().filter(Go);return d&&($=$.filter(E=>!("graphic"in E)||!E.graphic||(d==null?void 0:d.has(rS(E.graphic))))),y&&($=$.filter(E=>!("graphic"in E)||!E.graphic||!(y!=null&&y.has(rS(E.graphic))))),{screenPoint:r,results:$}}async takeScreenshot(e){const i=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(i);return lue(r,{format:i.format,quality:i.quality,rotation:0,disableDecorations:!1},LE)}async _takeScreenshot(e){const i=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(i);return uue(r,LE)}_createScreenshotPlan(e){e=e??{};const i=this.supersampleScreenshotsEnabled?Math.min(4,pue(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(d=>{const y=this.allLayerViews.find(b=>b.layer.id===d.id);y&&"container"in y&&y.container&&r.push(y.container)})):r=this._stage.children;const{format:n,quality:l}=due(e.format,e.quality);return aue(e,i,this.size,this.padding,n,l,r,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const i=B8(e)?V8(this,e):e;return this.stateManager.toMap(i)}toScreen(e){return this.stateManager.toScreen(e)}on(e,i,r,n){return this.inputManager&&this.viewEvents.on(e,i,r,n)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,r;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}hasLayerViewModule(e){return Y8.hasLayerViewModule(e)}importLayerView(e){return Y8.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(ge.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(i=>({...i,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=Iue(this.type);return ce("safari")&&ce("safari")<9&&(e=new se("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ce("safari")})),e!=null?(ge.getLogger(this).warn("#validate()",e.message),Promise.reject(e)):Dce()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new N4),this.animation}_cancellableGoTo(e,i,r){const n=()=>e===this._gotoTask,l=r.then(()=>{n()&&(this.animation=null)}).catch(y=>{throw n()&&(i&&!i.done&&(i.stop(),this.frameTask.animationInProgress=!1),this.animation=null),y}),d=new Promise(y=>y(l));return i.when().catch(()=>{n()&&d.cancel&&d.cancel()}),d}_gotoImmediate(e,i){const r=this._gotoTask,n=this.animation,l=e.then(d=>{if(ai(i),r!==this._gotoTask)throw new se("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=d,n.finish()});return this._cancellableGoTo(r,n,l)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const i=performance.now()-this._lastStationaryEventTimestamp;i<OE&&(this._stationaryTimer=this._flipStationary(i))},e)),this._stationaryTimer}_getDefaultViewpoint(){var N;const{constraints:e,initialExtent:i,map:r,padding:n,size:l}=this;if(!e)return null;const d=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),b=d==null?void 0:d.viewpoint,x=((N=b==null?void 0:b.targetGeometry)==null?void 0:N.extent)??i,$=x==null?void 0:x.center,E=(b==null?void 0:b.rotation)??0,k=(b==null?void 0:b.scale)||x&&d0(x,[l[0]-n.left-n.right,l[1]-n.top-n.bottom]),P=y.center??$,D=y.rotation??E,L=y.scale??k;return P&&L?new ka({targetGeometry:P,scale:L,rotation:D}):null}_gotoAnimated(e,i){const r=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const l=e.then(d=>{if(ai(i),r!==this._gotoTask)throw new se("view:goto-interrupted","Goto was interrupted");return n.update(d),this.animationManager.animate(n,this.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,l)}_startup(){var y;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const i=new JN(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new QN,this._magnifierView.magnifier=this.magnifier;const r=new ZN({view:this});this._set("labelManager",r);const n=new vae({view:this});this._set("animationManager",n);const l=new XN({view:this,animationManager:n});this._set("mapViewNavigation",l),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",b=>this.fatalError=b.error),me(()=>this.stationary,b=>i.stationary=b,vl),me(()=>this.background,b=>{i.backgroundColor=b==null?void 0:b.color,this._magnifierView.backgroundColor=b==null?void 0:b.color},vl),me(()=>this.magnifier,b=>this._magnifierView.magnifier=b,vl),me(()=>this.renderingOptions,b=>i.renderingOptions=b,vl),me(()=>this.highlightOptions,b=>i.highlightOptions=b,vl),me(()=>this.state.id,()=>i.state=this.state,vl)],"map-view"),this._updateStageChildren();const d=this._resolveWhenReady;this._resolveWhenReady=[],d.forEach(b=>b(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this._stage.addChild(i.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Aae(Lre.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new YN({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new KN(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};tt.type="2d",g([S({readOnly:!0})],tt.prototype,"animationManager",void 0),g([S({constructOnly:!0})],tt.prototype,"deactivatedWebGLExtensions",void 0),g([S({constructOnly:!0})],tt.prototype,"debugWebGLExtensions",void 0),g([S({readOnly:!0})],tt.prototype,"featuresTilingScheme",void 0),g([S({readOnly:!0})],tt.prototype,"fullOpacity",void 0),g([S({readOnly:!0})],tt.prototype,"graphicsTileStore",null),g([S()],tt.prototype,"graphicsView",void 0),g([S()],tt.prototype,"stateManager",void 0),g([S()],tt.prototype,"constraintsInfo",null),g([S({readOnly:!0})],tt.prototype,"state",null),g([S()],tt.prototype,"initialExtentRequired",null),g([S()],tt.prototype,"labelManager",void 0),g([S({readOnly:!0})],tt.prototype,"resourceManager",null),g([S({readOnly:!0})],tt.prototype,"textureManager",null),g([S({readOnly:!0})],tt.prototype,"mapViewNavigation",void 0),g([S({constructOnly:!0})],tt.prototype,"renderCanvas",void 0),g([S()],tt.prototype,"renderingOptions",void 0),g([S({readOnly:!0})],tt.prototype,"rendering",void 0),g([S({constructOnly:!0})],tt.prototype,"supersampleScreenshotsEnabled",void 0),g([S({readOnly:!0})],tt.prototype,"supportsGround",void 0),g([S()],tt.prototype,"_stationaryTimer",void 0),g([S()],tt.prototype,"_defaultsFromMapSettings",null),g([S()],tt.prototype,"_pePromise",void 0),g([S({readOnly:!0})],tt.prototype,"typeSpecificPreconditionsReady",null),g([S()],tt.prototype,"animation",null),g([S({type:Lce})],tt.prototype,"background",null),g([S()],tt.prototype,"center",null),g([S({type:PF})],tt.prototype,"constraints",null),g([S()],tt.prototype,"extent",null),g([S()],tt.prototype,"floors",void 0),g([S({type:ZF})],tt.prototype,"highlightOptions",void 0),g([S({readOnly:!0})],tt.prototype,"inputManager",void 0),g([S()],tt.prototype,"map",void 0),g([S()],tt.prototype,"padding",null),g([S()],tt.prototype,"resizeAlign",null),g([S({readOnly:!0})],tt.prototype,"resolution",null),g([S()],tt.prototype,"rotation",null),g([S()],tt.prototype,"scale",null),g([S({constructOnly:!0})],tt.prototype,"spatialReferenceLocked",void 0),g([S()],tt.prototype,"stationary",null),g([S({type:XF,readOnly:!0})],tt.prototype,"timeline",void 0),g([S({readOnly:!0})],tt.prototype,"type",void 0),g([S({readOnly:!0})],tt.prototype,"updating",null),g([S()],tt.prototype,"viewpoint",null),g([S()],tt.prototype,"zoom",null),g([S({readOnly:!0})],tt.prototype,"navigating",null),g([S(),xt(t=>t instanceof HN?t:$0(WN,t))],tt.prototype,"ui",void 0),tt=g([J("esri.views.MapView")],tt);const Rce=tt;function rS(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function DE(t,e,i,r,n){return l=>{if(l instanceof xs){if(l.layer===t)n==null||n();else{const d=t.allLayerViews.find(y=>y.layer===l.layer);d&&(r==null||r(d))}i(rS(l))}else{const d=t.allLayerViews.find(y=>y.layer===l);d&&e(d)}}}function RE(t,e){if(t)if(Gb(t))for(const i of t)if(Gb(i))for(const r of i)e(r);else e(i);else e(t)}function jce(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}var sS;let ku=sS=class extends ef{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new sS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};g([S()],ku.prototype,"displayValueEnabled",void 0),g([S()],ku.prototype,"max",void 0),g([S()],ku.prototype,"min",void 0),g([S()],ku.prototype,"step",void 0),g([S()],ku.prototype,"value",void 0),ku=sS=g([J("esri.support.Action.ActionSlider")],ku);const Fce=ku,ez={hide:"hide",hideChildren:"hide-children"};function e2(t){if(t)return t.listMode!=null?t.listMode:void 0}function Nce(t){if(t)return t.minScale!=null?t.minScale:void 0}function zce(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function Vce(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const i=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function tz(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==ez.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Bce(t){const e=t&&(t.get("layer.layer")||t.layer);if(!e)return!1;const i=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function Gce(t){return e2(t)!==ez.hide}function Uce(t,e){if(!t||isNaN(e))return!1;const i=Nce(t),r=zce(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,l=r!=null&&!isNaN(r)&&r>0&&e<r;return n||l}function iz(t,e){t&&t.sort((i,r)=>{const n=e.indexOf(i.uid),l=e.indexOf(r.uid);return n>l?-1:n<l?1:0})}function qce(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=tz(i);r&&iz(i.get(r),e)}function jE(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function i5(t,e){var r;const i=(r=t.layer)==null?void 0:r.uid;return i!=null?e.find(n=>{var l;return((l=n.layer)==null?void 0:l.uid)===i}):null}function Hce(t){const e=Wce(t)?t:null,i=t==null?void 0:t.parent,r=(i==null?void 0:i.type)==="map-image"?e==null?void 0:e.source:null,n="";return r&&i?{layer:i,title:n,sublayerIds:[r.mapLayerId]}:{layer:t,title:n}}function Wce(t){return!!(t!=null&&t.layer)}function rz(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:Jce(t);i.push(...r)}}function Jce(t){return t.split(",").map(e=>e.trim())}function t2(t){return t&&typeof t.render=="function"}function Yce(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const sz="esri-layer-list-panel",Ff=`${sz}__content`,Ha={base:sz,content:Ff,contentLegend:`${Ff}--legend`,contentString:`${Ff}--string`,contentElement:`${Ff}--html-element`,contentWidget:`${Ff}--widget`},Kce="legends";let In=class extends Oh(kr){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(me(()=>this.content,e=>this._createLegend(e),st))}destroy(){this._legend=ei(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return X("div",{class:Ha.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r}=this;return!e||r?null:e==="legend"&&i?X("div",{class:this.classes(Ha.content,Ha.contentLegend),key:i},i.render()):typeof e=="string"?X("div",{class:this.classes(Ha.content,Ha.contentString),key:e,innerHTML:e}):t2(e)?X("div",{class:this.classes(Ha.content,Ha.contentWidget),key:e},e.render()):e instanceof HTMLElement?X("div",{class:this.classes(Ha.content,Ha.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:r}=e;return i&&r?{view:r,layerInfos:[Hce(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await le(()=>import("./Legend-28e19d2d.js"),["assets/Legend-28e19d2d.js","assets/EffectView-1f253006.js","assets/pixelRangeUtils-cc28ceb4.js"]),{listItem:r}=this,n=new i(this._getLegendOptions());this._legend=n,this.notifyChange("className"),this.notifyChange("title");const l=me(()=>{var d,y;return[r==null?void 0:r.view,r==null?void 0:r.layer,(d=r==null?void 0:r.layer)==null?void 0:d.source,(y=r==null?void 0:r.layer)==null?void 0:y.parent]},()=>this._updateLegend(n),st);this.addHandles(l,Kce),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:t2(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(r=>{const n=this._getWidget(r);return n&&(i=n),!!n}),i}return this._getWidget(e)}};g([S()],In.prototype,"_legend",void 0),g([S()],In.prototype,"className",null),g([S()],In.prototype,"content",void 0),g([S()],In.prototype,"disabled",null),g([S()],In.prototype,"image",void 0),g([S()],In.prototype,"listItem",void 0),g([S()],In.prototype,"title",null),g([S()],In.prototype,"open",void 0),g([S()],In.prototype,"visible",void 0),In=g([J("esri.widgets.LayerList.ListItemPanel")],In);const nz=In;var E1;const Zce=ze.ofType({key:"type",defaultKeyValue:"button",base:ef,typeMap:{button:tf,toggle:t_,slider:Fce}}),oz=ze.ofType(Zce),Bg="layer",r5="child-list-mode",Xce="hide",Qce="esri.widgets.LayerList.ListItem";let ni=E1=class extends Oh(Xo(Be)){constructor(t){super(t),this.actionsSections=new oz,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ze.ofType(E1)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([me(()=>this.layer,t=>this._watchLayerProperties(t),st),me(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),st),me(()=>this.view,t=>this._updateChildrenView(t),st),me(()=>this.panel,t=>this._setListItemOnPanel(t),st),me(()=>[this.layer,this.view],()=>this._getLayerView(),st)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new nz(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!Uce(this.layer,this.get("view.scale"))}get visibilityMode(){return Vce(this.layer)}clone(){return new E1({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.handles.remove(r5),this.children.removeAll(),!t)return;t.forEach(i=>{this.handles.add(me(()=>i.listMode,()=>this._addChildren(t)),r5)});const e=t.filter(i=>e2(i)!==Xce);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),Bg)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>Gce(e)?new E1({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Go).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(Bg),this.handles.remove(r5),!t))return;if(this.handles.add(me(()=>t.listMode,()=>this._watchLayerProperties(t)),Bg),e2(t)==="hide-children")return void this.children.removeAll();const e=tz(t);e&&this.handles.add(me(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},st),Bg)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};g([S({type:oz})],ni.prototype,"actionsSections",void 0),g([S()],ni.prototype,"actionsOpen",void 0),g([S()],ni.prototype,"checkPublishStatusEnabled",void 0),g([S({type:ze})],ni.prototype,"children",void 0),g([S()],ni.prototype,"childrenSortable",void 0),g([S({readOnly:!0})],ni.prototype,"connectionStatus",null),g([S({readOnly:!0})],ni.prototype,"error",null),g([S()],ni.prototype,"hidden",void 0),g([S({readOnly:!0})],ni.prototype,"incompatible",null),g([S()],ni.prototype,"layer",void 0),g([S({readOnly:!0})],ni.prototype,"layerView",void 0),g([S()],ni.prototype,"listItemCreatedFunction",void 0),g([S()],ni.prototype,"open",void 0),g([S({type:nz})],ni.prototype,"panel",void 0),g([xt("panel")],ni.prototype,"castPanel",null),g([S()],ni.prototype,"parent",void 0),g([S()],ni.prototype,"sortable",void 0),g([S()],ni.prototype,"title",null),g([S({readOnly:!0})],ni.prototype,"publishing",null),g([S({readOnly:!0})],ni.prototype,"updating",null),g([S()],ni.prototype,"view",void 0),g([S()],ni.prototype,"visible",null),g([S({readOnly:!0})],ni.prototype,"visibleAtCurrentScale",null),g([S({readOnly:!0})],ni.prototype,"visibilityMode",null),ni=E1=g([J(Qce)],ni);const o$=ni,oo={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},ede="hide",az=ze.ofType(o$);let Pu=class extends Na.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new az,this.view=null}initialize(){this.addHandles([me(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),st),me(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],oo.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){var P,D;const l=e==null?void 0:e.layer;if(!l)return;const d=(D=(P=this.view)==null?void 0:P.map)==null?void 0:D.layers,y=i?jE(i):d,b=r?jE(r):d;if(!y||!b)return;const{operationalItems:x}=this,$=(i==null?void 0:i.children)||x,E=(r==null?void 0:r.children)||x,k=b.length-n;e.parent=r||null,$.includes(e)&&$.remove(e),y.includes(l)&&y.remove(l),E.includes(e)||E.add(e,k),b.includes(l)||b.add(l,k)}_createLayerViewHandles(e){this.removeHandles(oo.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),oo.layerViews)}_createMapLayerHandles(e){this.removeHandles(oo.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),oo.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n}=this;return new o$({checkPublishStatusEnabled:n,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>e2(i)!==ede)}_watchLayersListMode(e){this.removeHandles(oo.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(me(()=>i.listMode,()=>this._compileList()),oo.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const i=this._getViewableLayers(e);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.find(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.removeMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const l=e.indexOf(r.layer),d=e.indexOf(n.layer);return l>d?-1:l<d?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([oo.mapLayers,oo.layerViews,oo.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),st),me(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),st)],oo.viewLayers)}};g([S()],Pu.prototype,"checkPublishStatusEnabled",void 0),g([S()],Pu.prototype,"listItemCreatedFunction",void 0),g([S({type:az})],Pu.prototype,"operationalItems",void 0),g([S({readOnly:!0})],Pu.prototype,"state",null),g([S()],Pu.prototype,"view",void 0),Pu=g([J("esri.widgets.LayerList.LayerListViewModel")],Pu);const lz=Pu;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function FE(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Fa(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?FE(Object(i),!0).forEach(function(r){tde(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):FE(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function ab(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ab=function(e){return typeof e}:ab=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function tde(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zl(){return zl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},zl.apply(this,arguments)}function ide(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,l;for(l=0;l<r.length;l++)n=r[l],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function rde(t,e){if(t==null)return{};var i=ide(t,e),r,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var sde="1.15.0";function Tl(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ul=Tl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zm=Tl(/Edge/i),NE=Tl(/firefox/i),gy=Tl(/safari/i)&&!Tl(/chrome/i)&&!Tl(/android/i),uz=Tl(/iP(ad|od|hone)/i),hz=Tl(/chrome/i)&&Tl(/android/i),cz={capture:!1,passive:!1};function qt(t,e,i){t.addEventListener(e,i,!Ul&&cz)}function Rt(t,e,i){t.removeEventListener(e,i,!Ul&&cz)}function i2(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function nde(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ta(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&i2(t,e):i2(t,e))||r&&t===i)return t;if(t===i)break}while(t=nde(t))}return null}var zE=/\s+/g;function qs(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(zE," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(zE," ")}}function ot(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function f0(t,e){var i="";if(typeof t=="string")i=t;else do{var r=ot(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function dz(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,l=r.length;if(i)for(;n<l;n++)i(r[n],n);return r}return[]}function Pa(){var t=document.scrollingElement;return t||document.documentElement}function dr(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var l,d,y,b,x,$,E;if(t!==window&&t.parentNode&&t!==Pa()?(l=t.getBoundingClientRect(),d=l.top,y=l.left,b=l.bottom,x=l.right,$=l.height,E=l.width):(d=0,y=0,b=window.innerHeight,x=window.innerWidth,$=window.innerHeight,E=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!Ul))do if(n&&n.getBoundingClientRect&&(ot(n,"transform")!=="none"||i&&ot(n,"position")!=="static")){var k=n.getBoundingClientRect();d-=k.top+parseInt(ot(n,"border-top-width")),y-=k.left+parseInt(ot(n,"border-left-width")),b=d+l.height,x=y+l.width;break}while(n=n.parentNode);if(r&&t!==window){var P=f0(n||t),D=P&&P.a,L=P&&P.d;P&&(d/=L,y/=D,E/=D,$/=L,b=d+$,x=y+E)}return{top:d,left:y,bottom:b,right:x,width:E,height:$}}}function VE(t,e,i){for(var r=hh(t,!0),n=dr(t)[e];r;){var l=dr(r)[i],d=void 0;if(i==="top"||i==="left"?d=n>=l:d=n<=l,!d)return r;if(r===Pa())break;r=hh(r,!1)}return!1}function V0(t,e,i,r){for(var n=0,l=0,d=t.children;l<d.length;){if(d[l].style.display!=="none"&&d[l]!==at.ghost&&(r||d[l]!==at.dragged)&&Ta(d[l],i.draggable,t,!1)){if(n===e)return d[l];n++}l++}return null}function a$(t,e){for(var i=t.lastElementChild;i&&(i===at.ghost||ot(i,"display")==="none"||e&&!i2(i,e));)i=i.previousElementSibling;return i||null}function Pn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==at.clone&&(!e||i2(t,e))&&i++;return i}function BE(t){var e=0,i=0,r=Pa();if(t)do{var n=f0(t),l=n.a,d=n.d;e+=t.scrollLeft*l,i+=t.scrollTop*d}while(t!==r&&(t=t.parentNode));return[e,i]}function ode(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function hh(t,e){if(!t||!t.getBoundingClientRect)return Pa();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=ot(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Pa();if(r||e)return i;r=!0}}while(i=i.parentNode);return Pa()}function ade(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function s5(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var vy;function pz(t,e){return function(){if(!vy){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),vy=setTimeout(function(){vy=void 0},e)}}}function lde(){clearTimeout(vy),vy=void 0}function fz(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function yz(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var nn="Sortable"+new Date().getTime();function ude(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(ot(n,"display")==="none"||n===at.ghost)){t.push({target:n,rect:dr(n)});var l=Fa({},t[t.length-1].rect);if(n.thisAnimationDuration){var d=f0(n,!0);d&&(l.top-=d.f,l.left-=d.e)}n.fromRect=l}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(ode(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var l=!1,d=0;t.forEach(function(y){var b=0,x=y.target,$=x.fromRect,E=dr(x),k=x.prevFromRect,P=x.prevToRect,D=y.rect,L=f0(x,!0);L&&(E.top-=L.f,E.left-=L.e),x.toRect=E,x.thisAnimationDuration&&s5(k,E)&&!s5($,E)&&(D.top-E.top)/(D.left-E.left)===($.top-E.top)/($.left-E.left)&&(b=cde(D,k,P,n.options)),s5(E,$)||(x.prevFromRect=$,x.prevToRect=E,b||(b=n.options.animation),n.animate(x,D,E,b)),b&&(l=!0,d=Math.max(d,b),clearTimeout(x.animationResetTimer),x.animationResetTimer=setTimeout(function(){x.animationTime=0,x.prevFromRect=null,x.fromRect=null,x.prevToRect=null,x.thisAnimationDuration=null},b),x.thisAnimationDuration=b)}),clearTimeout(e),l?e=setTimeout(function(){typeof r=="function"&&r()},d):typeof r=="function"&&r(),t=[]},animate:function(r,n,l,d){if(d){ot(r,"transition",""),ot(r,"transform","");var y=f0(this.el),b=y&&y.a,x=y&&y.d,$=(n.left-l.left)/(b||1),E=(n.top-l.top)/(x||1);r.animatingX=!!$,r.animatingY=!!E,ot(r,"transform","translate3d("+$+"px,"+E+"px,0)"),this.forRepaintDummy=hde(r),ot(r,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),ot(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ot(r,"transition",""),ot(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},d)}}}}function hde(t){return t.offsetWidth}function cde(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var ep=[],n5={initializeByDefault:!0},Vm={mount:function(e){for(var i in n5)n5.hasOwnProperty(i)&&!(i in e)&&(e[i]=n5[i]);ep.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ep.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var l=e+"Global";ep.forEach(function(d){i[d.pluginName]&&(i[d.pluginName][l]&&i[d.pluginName][l](Fa({sortable:i},r)),i.options[d.pluginName]&&i[d.pluginName][e]&&i[d.pluginName][e](Fa({sortable:i},r)))})},initializePlugins:function(e,i,r,n){ep.forEach(function(y){var b=y.pluginName;if(!(!e.options[b]&&!y.initializeByDefault)){var x=new y(e,i,e.options);x.sortable=e,x.options=e.options,e[b]=x,zl(r,x.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var d=this.modifyOption(e,l,e.options[l]);typeof d<"u"&&(e.options[l]=d)}},getEventProperties:function(e,i){var r={};return ep.forEach(function(n){typeof n.eventProperties=="function"&&zl(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return ep.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[i]=="function"&&(n=l.optionListeners[i].call(e[l.pluginName],r))}),n}};function dde(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,l=t.cloneEl,d=t.toEl,y=t.fromEl,b=t.oldIndex,x=t.newIndex,$=t.oldDraggableIndex,E=t.newDraggableIndex,k=t.originalEvent,P=t.putSortable,D=t.extraEventProperties;if(e=e||i&&i[nn],!!e){var L,N=e.options,B="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ul&&!zm?L=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(r,!0,!0)),L.to=d||i,L.from=y||i,L.item=n||i,L.clone=l,L.oldIndex=b,L.newIndex=x,L.oldDraggableIndex=$,L.newDraggableIndex=E,L.originalEvent=k,L.pullMode=P?P.lastPutMode:void 0;var W=Fa(Fa({},D),Vm.getEventProperties(r,e));for(var H in W)L[H]=W[H];i&&i.dispatchEvent(L),N[B]&&N[B].call(e,L)}}var pde=["evt"],$s=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,l=rde(r,pde);Vm.pluginEvent.bind(at)(e,i,Fa({dragEl:Oe,parentEl:Li,ghostEl:ft,rootEl:wi,nextEl:Sc,lastDownEl:lb,cloneEl:ki,cloneHidden:Zu,dragStarted:A1,putSortable:Dr,activeSortable:at.active,originalEvent:n,oldIndex:e0,oldDraggableIndex:by,newIndex:Zs,newDraggableIndex:Gu,hideGhostForTarget:bz,unhideGhostForTarget:wz,cloneNowHidden:function(){Zu=!0},cloneNowShown:function(){Zu=!1},dispatchSortableEvent:function(y){hs({sortable:i,name:y,originalEvent:n})}},l))};function hs(t){dde(Fa({putSortable:Dr,cloneEl:ki,targetEl:Oe,rootEl:wi,oldIndex:e0,oldDraggableIndex:by,newIndex:Zs,newDraggableIndex:Gu},t))}var Oe,Li,ft,wi,Sc,lb,ki,Zu,e0,Zs,by,Gu,Gg,Dr,Tp=!1,r2=!1,s2=[],Wh,ao,o5,a5,GE,UE,A1,tp,wy,_y=!1,Ug=!1,ub,zr,l5=[],nS=!1,n2=[],x_=typeof document<"u",qg=uz,qE=zm||Ul?"cssFloat":"float",fde=x_&&!hz&&!uz&&"draggable"in document.createElement("div"),mz=function(){if(x_){if(Ul)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),gz=function(e,i){var r=ot(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),l=V0(e,0,i),d=V0(e,1,i),y=l&&ot(l),b=d&&ot(d),x=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+dr(l).width,$=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+dr(d).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&y.float&&y.float!=="none"){var E=y.float==="left"?"left":"right";return d&&(b.clear==="both"||b.clear===E)?"vertical":"horizontal"}return l&&(y.display==="block"||y.display==="flex"||y.display==="table"||y.display==="grid"||x>=n&&r[qE]==="none"||d&&r[qE]==="none"&&x+$>n)?"vertical":"horizontal"},yde=function(e,i,r){var n=r?e.left:e.top,l=r?e.right:e.bottom,d=r?e.width:e.height,y=r?i.left:i.top,b=r?i.right:i.bottom,x=r?i.width:i.height;return n===y||l===b||n+d/2===y+x/2},mde=function(e,i){var r;return s2.some(function(n){var l=n[nn].options.emptyInsertThreshold;if(!(!l||a$(n))){var d=dr(n),y=e>=d.left-l&&e<=d.right+l,b=i>=d.top-l&&i<=d.bottom+l;if(y&&b)return r=n}}),r},vz=function(e){function i(l,d){return function(y,b,x,$){var E=y.options.group.name&&b.options.group.name&&y.options.group.name===b.options.group.name;if(l==null&&(d||E))return!0;if(l==null||l===!1)return!1;if(d&&l==="clone")return l;if(typeof l=="function")return i(l(y,b,x,$),d)(y,b,x,$);var k=(d?y:b).options.group.name;return l===!0||typeof l=="string"&&l===k||l.join&&l.indexOf(k)>-1}}var r={},n=e.group;(!n||ab(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},bz=function(){!mz&&ft&&ot(ft,"display","none")},wz=function(){!mz&&ft&&ot(ft,"display","")};x_&&!hz&&document.addEventListener("click",function(t){if(r2)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),r2=!1,!1},!0);var Jh=function(e){if(Oe){e=e.touches?e.touches[0]:e;var i=mde(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[nn]._onDragOver(r)}}},gde=function(e){Oe&&Oe.parentNode[nn]._isOutsideThisEl(e.target)};function at(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=zl({},e),t[nn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gz(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,y){d.setData("Text",y.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:at.supportPointer!==!1&&"PointerEvent"in window&&!gy,emptyInsertThreshold:5};Vm.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);vz(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:fde,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?qt(t,"pointerdown",this._onTapStart):(qt(t,"mousedown",this._onTapStart),qt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(qt(t,"dragover",this),qt(t,"dragenter",this)),s2.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),zl(this,ude())}at.prototype={constructor:at,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(tp=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,Oe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,l=n.preventOnFilter,d=e.type,y=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,b=(y||e).target,x=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||b,$=n.filter;if($de(r),!Oe&&!(/mousedown|pointerdown/.test(d)&&e.button!==0||n.disabled)&&!x.isContentEditable&&!(!this.nativeDraggable&&gy&&b&&b.tagName.toUpperCase()==="SELECT")&&(b=Ta(b,n.draggable,r,!1),!(b&&b.animated)&&lb!==b)){if(e0=Pn(b),by=Pn(b,n.draggable),typeof $=="function"){if($.call(this,e,b,this)){hs({sortable:i,rootEl:x,name:"filter",targetEl:b,toEl:r,fromEl:r}),$s("filter",i,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if($&&($=$.split(",").some(function(E){if(E=Ta(x,E.trim(),r,!1),E)return hs({sortable:i,rootEl:E,name:"filter",targetEl:b,fromEl:r,toEl:r}),$s("filter",i,{evt:e}),!0}),$)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!Ta(x,n.handle,r,!1)||this._prepareDragStart(e,y,b)}}},_prepareDragStart:function(e,i,r){var n=this,l=n.el,d=n.options,y=l.ownerDocument,b;if(r&&!Oe&&r.parentNode===l){var x=dr(r);if(wi=l,Oe=r,Li=Oe.parentNode,Sc=Oe.nextSibling,lb=r,Gg=d.group,at.dragged=Oe,Wh={target:Oe,clientX:(i||e).clientX,clientY:(i||e).clientY},GE=Wh.clientX-x.left,UE=Wh.clientY-x.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,Oe.style["will-change"]="all",b=function(){if($s("delayEnded",n,{evt:e}),at.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!NE&&n.nativeDraggable&&(Oe.draggable=!0),n._triggerDragStart(e,i),hs({sortable:n,name:"choose",originalEvent:e}),qs(Oe,d.chosenClass,!0)},d.ignore.split(",").forEach(function($){dz(Oe,$.trim(),u5)}),qt(y,"dragover",Jh),qt(y,"mousemove",Jh),qt(y,"touchmove",Jh),qt(y,"mouseup",n._onDrop),qt(y,"touchend",n._onDrop),qt(y,"touchcancel",n._onDrop),NE&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Oe.draggable=!0),$s("delayStart",this,{evt:e}),d.delay&&(!d.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(zm||Ul))){if(at.eventCanceled){this._onDrop();return}qt(y,"mouseup",n._disableDelayedDrag),qt(y,"touchend",n._disableDelayedDrag),qt(y,"touchcancel",n._disableDelayedDrag),qt(y,"mousemove",n._delayedDragTouchMoveHandler),qt(y,"touchmove",n._delayedDragTouchMoveHandler),d.supportPointer&&qt(y,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(b,d.delay)}else b()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Oe&&u5(Oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Rt(e,"mouseup",this._disableDelayedDrag),Rt(e,"touchend",this._disableDelayedDrag),Rt(e,"touchcancel",this._disableDelayedDrag),Rt(e,"mousemove",this._delayedDragTouchMoveHandler),Rt(e,"touchmove",this._delayedDragTouchMoveHandler),Rt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?qt(document,"pointermove",this._onTouchMove):i?qt(document,"touchmove",this._onTouchMove):qt(document,"mousemove",this._onTouchMove):(qt(Oe,"dragend",this),qt(wi,"dragstart",this._onDragStart));try{document.selection?hb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Tp=!1,wi&&Oe){$s("dragStarted",this,{evt:i}),this.nativeDraggable&&qt(document,"dragover",gde);var r=this.options;!e&&qs(Oe,r.dragClass,!1),qs(Oe,r.ghostClass,!0),at.active=this,e&&this._appendGhost(),hs({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(ao){this._lastX=ao.clientX,this._lastY=ao.clientY,bz();for(var e=document.elementFromPoint(ao.clientX,ao.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ao.clientX,ao.clientY),e!==i);)i=e;if(Oe.parentNode[nn]._isOutsideThisEl(e),i)do{if(i[nn]){var r=void 0;if(r=i[nn]._onDragOver({clientX:ao.clientX,clientY:ao.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);wz()}},_onTouchMove:function(e){if(Wh){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,l=e.touches?e.touches[0]:e,d=ft&&f0(ft,!0),y=ft&&d&&d.a,b=ft&&d&&d.d,x=qg&&zr&&BE(zr),$=(l.clientX-Wh.clientX+n.x)/(y||1)+(x?x[0]-l5[0]:0)/(y||1),E=(l.clientY-Wh.clientY+n.y)/(b||1)+(x?x[1]-l5[1]:0)/(b||1);if(!at.active&&!Tp){if(r&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ft){d?(d.e+=$-(o5||0),d.f+=E-(a5||0)):d={a:1,b:0,c:0,d:1,e:$,f:E};var k="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");ot(ft,"webkitTransform",k),ot(ft,"mozTransform",k),ot(ft,"msTransform",k),ot(ft,"transform",k),o5=$,a5=E,ao=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ft){var e=this.options.fallbackOnBody?document.body:wi,i=dr(Oe,!0,qg,!0,e),r=this.options;if(qg){for(zr=e;ot(zr,"position")==="static"&&ot(zr,"transform")==="none"&&zr!==document;)zr=zr.parentNode;zr!==document.body&&zr!==document.documentElement?(zr===document&&(zr=Pa()),i.top+=zr.scrollTop,i.left+=zr.scrollLeft):zr=Pa(),l5=BE(zr)}ft=Oe.cloneNode(!0),qs(ft,r.ghostClass,!1),qs(ft,r.fallbackClass,!0),qs(ft,r.dragClass,!0),ot(ft,"transition",""),ot(ft,"transform",""),ot(ft,"box-sizing","border-box"),ot(ft,"margin",0),ot(ft,"top",i.top),ot(ft,"left",i.left),ot(ft,"width",i.width),ot(ft,"height",i.height),ot(ft,"opacity","0.8"),ot(ft,"position",qg?"absolute":"fixed"),ot(ft,"zIndex","100000"),ot(ft,"pointerEvents","none"),at.ghost=ft,e.appendChild(ft),ot(ft,"transform-origin",GE/parseInt(ft.style.width)*100+"% "+UE/parseInt(ft.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,l=r.options;if($s("dragStart",this,{evt:e}),at.eventCanceled){this._onDrop();return}$s("setupClone",this),at.eventCanceled||(ki=yz(Oe),ki.removeAttribute("id"),ki.draggable=!1,ki.style["will-change"]="",this._hideClone(),qs(ki,this.options.chosenClass,!1),at.clone=ki),r.cloneId=hb(function(){$s("clone",r),!at.eventCanceled&&(r.options.removeCloneOnHide||wi.insertBefore(ki,Oe),r._hideClone(),hs({sortable:r,name:"clone"}))}),!i&&qs(Oe,l.dragClass,!0),i?(r2=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Rt(document,"mouseup",r._onDrop),Rt(document,"touchend",r._onDrop),Rt(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(r,n,Oe)),qt(document,"drop",r),ot(Oe,"transform","translateZ(0)")),Tp=!0,r._dragStartId=hb(r._dragStarted.bind(r,i,e)),qt(document,"selectstart",r),A1=!0,gy&&ot(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,l,d,y=this.options,b=y.group,x=at.active,$=Gg===b,E=y.sort,k=Dr||x,P,D=this,L=!1;if(nS)return;function N(Xe,ri){$s(Xe,D,Fa({evt:e,isOwner:$,axis:P?"vertical":"horizontal",revert:d,dragRect:n,targetRect:l,canSort:E,fromSortable:k,target:r,completed:W,onMove:function(Yn,Ss){return Hg(wi,i,Oe,n,Yn,dr(Yn),e,Ss)},changed:H},ri))}function B(){N("dragOverAnimationCapture"),D.captureAnimationState(),D!==k&&k.captureAnimationState()}function W(Xe){return N("dragOverCompleted",{insertion:Xe}),Xe&&($?x._hideClone():x._showClone(D),D!==k&&(qs(Oe,Dr?Dr.options.ghostClass:x.options.ghostClass,!1),qs(Oe,y.ghostClass,!0)),Dr!==D&&D!==at.active?Dr=D:D===at.active&&Dr&&(Dr=null),k===D&&(D._ignoreWhileAnimating=r),D.animateAll(function(){N("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==k&&(k.animateAll(),k._ignoreWhileAnimating=null)),(r===Oe&&!Oe.animated||r===i&&!r.animated)&&(tp=null),!y.dragoverBubble&&!e.rootEl&&r!==document&&(Oe.parentNode[nn]._isOutsideThisEl(e.target),!Xe&&Jh(e)),!y.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),L=!0}function H(){Zs=Pn(Oe),Gu=Pn(Oe,y.draggable),hs({sortable:D,name:"change",toEl:i,newIndex:Zs,newDraggableIndex:Gu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Ta(r,y.draggable,i,!0),N("dragOver"),at.eventCanceled)return L;if(Oe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||D._ignoreWhileAnimating===r)return W(!1);if(r2=!1,x&&!y.disabled&&($?E||(d=Li!==wi):Dr===this||(this.lastPutMode=Gg.checkPull(this,x,Oe,e))&&b.checkPut(this,x,Oe,e))){if(P=this._getDirection(e,r)==="vertical",n=dr(Oe),N("dragOverValid"),at.eventCanceled)return L;if(d)return Li=wi,B(),this._hideClone(),N("revert"),at.eventCanceled||(Sc?wi.insertBefore(Oe,Sc):wi.appendChild(Oe)),W(!0);var Y=a$(i,y.draggable);if(!Y||_de(e,P,this)&&!Y.animated){if(Y===Oe)return W(!1);if(Y&&i===e.target&&(r=Y),r&&(l=dr(r)),Hg(wi,i,Oe,n,r,l,e,!!r)!==!1)return B(),Y&&Y.nextSibling?i.insertBefore(Oe,Y.nextSibling):i.appendChild(Oe),Li=i,H(),W(!0)}else if(Y&&wde(e,P,this)){var ie=V0(i,0,y,!0);if(ie===Oe)return W(!1);if(r=ie,l=dr(r),Hg(wi,i,Oe,n,r,l,e,!1)!==!1)return B(),i.insertBefore(Oe,ie),Li=i,H(),W(!0)}else if(r.parentNode===i){l=dr(r);var ne=0,he,de=Oe.parentNode!==i,be=!yde(Oe.animated&&Oe.toRect||n,r.animated&&r.toRect||l,P),we=P?"top":"left",$e=VE(r,"top","top")||VE(Oe,"top","top"),ke=$e?$e.scrollTop:void 0;tp!==r&&(he=l[we],_y=!1,Ug=!be&&y.invertSwap||de),ne=xde(e,r,l,P,be?1:y.swapThreshold,y.invertedSwapThreshold==null?y.swapThreshold:y.invertedSwapThreshold,Ug,tp===r);var Ge;if(ne!==0){var Fe=Pn(Oe);do Fe-=ne,Ge=Li.children[Fe];while(Ge&&(ot(Ge,"display")==="none"||Ge===ft))}if(ne===0||Ge===r)return W(!1);tp=r,wy=ne;var ut=r.nextElementSibling,ii=!1;ii=ne===1;var Ze=Hg(wi,i,Oe,n,r,l,e,ii);if(Ze!==!1)return(Ze===1||Ze===-1)&&(ii=Ze===1),nS=!0,setTimeout(bde,30),B(),ii&&!ut?i.appendChild(Oe):r.parentNode.insertBefore(Oe,ii?ut:r),$e&&fz($e,0,ke-$e.scrollTop),Li=Oe.parentNode,he!==void 0&&!Ug&&(ub=Math.abs(he-dr(r)[we])),H(),W(!0)}if(i.contains(Oe))return W(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Rt(document,"mousemove",this._onTouchMove),Rt(document,"touchmove",this._onTouchMove),Rt(document,"pointermove",this._onTouchMove),Rt(document,"dragover",Jh),Rt(document,"mousemove",Jh),Rt(document,"touchmove",Jh)},_offUpEvents:function(){var e=this.el.ownerDocument;Rt(e,"mouseup",this._onDrop),Rt(e,"touchend",this._onDrop),Rt(e,"pointerup",this._onDrop),Rt(e,"touchcancel",this._onDrop),Rt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(Zs=Pn(Oe),Gu=Pn(Oe,r.draggable),$s("drop",this,{evt:e}),Li=Oe&&Oe.parentNode,Zs=Pn(Oe),Gu=Pn(Oe,r.draggable),at.eventCanceled){this._nulling();return}Tp=!1,Ug=!1,_y=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),oS(this.cloneId),oS(this._dragStartId),this.nativeDraggable&&(Rt(document,"drop",this),Rt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gy&&ot(document.body,"user-select",""),ot(Oe,"transform",""),e&&(A1&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ft&&ft.parentNode&&ft.parentNode.removeChild(ft),(wi===Li||Dr&&Dr.lastPutMode!=="clone")&&ki&&ki.parentNode&&ki.parentNode.removeChild(ki),Oe&&(this.nativeDraggable&&Rt(Oe,"dragend",this),u5(Oe),Oe.style["will-change"]="",A1&&!Tp&&qs(Oe,Dr?Dr.options.ghostClass:this.options.ghostClass,!1),qs(Oe,this.options.chosenClass,!1),hs({sortable:this,name:"unchoose",toEl:Li,newIndex:null,newDraggableIndex:null,originalEvent:e}),wi!==Li?(Zs>=0&&(hs({rootEl:Li,name:"add",toEl:Li,fromEl:wi,originalEvent:e}),hs({sortable:this,name:"remove",toEl:Li,originalEvent:e}),hs({rootEl:Li,name:"sort",toEl:Li,fromEl:wi,originalEvent:e}),hs({sortable:this,name:"sort",toEl:Li,originalEvent:e})),Dr&&Dr.save()):Zs!==e0&&Zs>=0&&(hs({sortable:this,name:"update",toEl:Li,originalEvent:e}),hs({sortable:this,name:"sort",toEl:Li,originalEvent:e})),at.active&&((Zs==null||Zs===-1)&&(Zs=e0,Gu=by),hs({sortable:this,name:"end",toEl:Li,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){$s("nulling",this),wi=Oe=Li=ft=Sc=ki=lb=Zu=Wh=ao=A1=Zs=Gu=e0=by=tp=wy=Dr=Gg=at.dragged=at.ghost=at.clone=at.active=null,n2.forEach(function(e){e.checked=!0}),n2.length=o5=a5=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Oe&&(this._onDragOver(e),vde(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,l=r.length,d=this.options;n<l;n++)i=r[n],Ta(i,d.draggable,this.el,!1)&&e.push(i.getAttribute(d.dataIdAttr)||Mde(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(l,d){var y=n.children[d];Ta(y,this.options.draggable,n,!1)&&(r[l]=y)},this),i&&this.captureAnimationState(),e.forEach(function(l){r[l]&&(n.removeChild(r[l]),n.appendChild(r[l]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Ta(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=Vm.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&vz(r)},destroy:function(){$s("destroy",this);var e=this.el;e[nn]=null,Rt(e,"mousedown",this._onTapStart),Rt(e,"touchstart",this._onTapStart),Rt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Rt(e,"dragover",this),Rt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),s2.splice(s2.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Zu){if($s("hideClone",this),at.eventCanceled)return;ot(ki,"display","none"),this.options.removeCloneOnHide&&ki.parentNode&&ki.parentNode.removeChild(ki),Zu=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Zu){if($s("showClone",this),at.eventCanceled)return;Oe.parentNode==wi&&!this.options.group.revertClone?wi.insertBefore(ki,Oe):Sc?wi.insertBefore(ki,Sc):wi.appendChild(ki),this.options.group.revertClone&&this.animate(Oe,ki),ot(ki,"display",""),Zu=!1}}};function vde(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Hg(t,e,i,r,n,l,d,y){var b,x=t[nn],$=x.options.onMove,E;return window.CustomEvent&&!Ul&&!zm?b=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent("move",!0,!0)),b.to=e,b.from=t,b.dragged=i,b.draggedRect=r,b.related=n||e,b.relatedRect=l||dr(e),b.willInsertAfter=y,b.originalEvent=d,t.dispatchEvent(b),$&&(E=$.call(x,b,d)),E}function u5(t){t.draggable=!1}function bde(){nS=!1}function wde(t,e,i){var r=dr(V0(i.el,0,i.options,!0)),n=10;return e?t.clientX<r.left-n||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-n||t.clientY<r.bottom&&t.clientX<r.left}function _de(t,e,i){var r=dr(a$(i.el,i.options.draggable)),n=10;return e?t.clientX>r.right+n||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+n}function xde(t,e,i,r,n,l,d,y){var b=r?t.clientY:t.clientX,x=r?i.height:i.width,$=r?i.top:i.left,E=r?i.bottom:i.right,k=!1;if(!d){if(y&&ub<x*n){if(!_y&&(wy===1?b>$+x*l/2:b<E-x*l/2)&&(_y=!0),_y)k=!0;else if(wy===1?b<$+ub:b>E-ub)return-wy}else if(b>$+x*(1-n)/2&&b<E-x*(1-n)/2)return Sde(e)}return k=k||d,k&&(b<$+x*l/2||b>E-x*l/2)?b>$+x/2?1:-1:0}function Sde(t){return Pn(Oe)<Pn(t)?1:-1}function Mde(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function $de(t){n2.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&n2.push(r)}}function hb(t){return setTimeout(t,0)}function oS(t){return clearTimeout(t)}x_&&qt(document,"touchmove",function(t){(at.active||Tp)&&t.cancelable&&t.preventDefault()});at.utils={on:qt,off:Rt,css:ot,find:dz,is:function(e,i){return!!Ta(e,i,e,!1)},extend:ade,throttle:pz,closest:Ta,toggleClass:qs,clone:yz,index:Pn,nextTick:hb,cancelNextTick:oS,detectDirection:gz,getChild:V0};at.get=function(t){return t[nn]};at.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(at.utils=Fa(Fa({},at.utils),r.utils)),Vm.mount(r)})};at.create=function(t,e){return new at(t,e)};at.version=sde;var er=[],k1,aS,lS=!1,h5,c5,o2,P1;function Tde(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?qt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?qt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?qt(document,"touchmove",this._handleFallbackAutoScroll):qt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Rt(document,"dragover",this._handleAutoScroll):(Rt(document,"pointermove",this._handleFallbackAutoScroll),Rt(document,"touchmove",this._handleFallbackAutoScroll),Rt(document,"mousemove",this._handleFallbackAutoScroll)),HE(),cb(),lde()},nulling:function(){o2=aS=k1=lS=P1=h5=c5=null,er.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,l=(i.touches?i.touches[0]:i).clientX,d=(i.touches?i.touches[0]:i).clientY,y=document.elementFromPoint(l,d);if(o2=i,r||this.options.forceAutoScrollFallback||zm||Ul||gy){d5(i,this.options,y,r);var b=hh(y,!0);lS&&(!P1||l!==h5||d!==c5)&&(P1&&HE(),P1=setInterval(function(){var x=hh(document.elementFromPoint(l,d),!0);x!==b&&(b=x,cb()),d5(i,n.options,x,r)},10),h5=l,c5=d)}else{if(!this.options.bubbleScroll||hh(y,!0)===Pa()){cb();return}d5(i,this.options,hh(y,!1),!1)}}},zl(t,{pluginName:"scroll",initializeByDefault:!0})}function cb(){er.forEach(function(t){clearInterval(t.pid)}),er=[]}function HE(){clearInterval(P1)}var d5=pz(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,d=e.scrollSensitivity,y=e.scrollSpeed,b=Pa(),x=!1,$;aS!==i&&(aS=i,cb(),k1=e.scroll,$=e.scrollFn,k1===!0&&(k1=hh(i,!0)));var E=0,k=k1;do{var P=k,D=dr(P),L=D.top,N=D.bottom,B=D.left,W=D.right,H=D.width,Y=D.height,ie=void 0,ne=void 0,he=P.scrollWidth,de=P.scrollHeight,be=ot(P),we=P.scrollLeft,$e=P.scrollTop;P===b?(ie=H<he&&(be.overflowX==="auto"||be.overflowX==="scroll"||be.overflowX==="visible"),ne=Y<de&&(be.overflowY==="auto"||be.overflowY==="scroll"||be.overflowY==="visible")):(ie=H<he&&(be.overflowX==="auto"||be.overflowX==="scroll"),ne=Y<de&&(be.overflowY==="auto"||be.overflowY==="scroll"));var ke=ie&&(Math.abs(W-n)<=d&&we+H<he)-(Math.abs(B-n)<=d&&!!we),Ge=ne&&(Math.abs(N-l)<=d&&$e+Y<de)-(Math.abs(L-l)<=d&&!!$e);if(!er[E])for(var Fe=0;Fe<=E;Fe++)er[Fe]||(er[Fe]={});(er[E].vx!=ke||er[E].vy!=Ge||er[E].el!==P)&&(er[E].el=P,er[E].vx=ke,er[E].vy=Ge,clearInterval(er[E].pid),(ke!=0||Ge!=0)&&(x=!0,er[E].pid=setInterval(function(){r&&this.layer===0&&at.active._onTouchMove(o2);var ut=er[this.layer].vy?er[this.layer].vy*y:0,ii=er[this.layer].vx?er[this.layer].vx*y:0;typeof $=="function"&&$.call(at.dragged.parentNode[nn],ii,ut,t,o2,er[this.layer].el)!=="continue"||fz(er[this.layer].el,ii,ut)}.bind({layer:E}),24))),E++}while(e.bubbleScroll&&k!==b&&(k=hh(k,!1)));lS=x}},30),_z=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,l=e.activeSortable,d=e.dispatchSortableEvent,y=e.hideGhostForTarget,b=e.unhideGhostForTarget;if(i){var x=r||l;y();var $=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,E=document.elementFromPoint($.clientX,$.clientY);b(),x&&!x.el.contains(E)&&(d("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function l$(){}l$.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=V0(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:_z};zl(l$,{pluginName:"revertOnSpill"});function u$(){}u$.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:_z};zl(u$,{pluginName:"removeOnSpill"});at.mount(new Tde);at.mount(u$,l$);function WE(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const Ide="esri-layerlist-new-ui",Ede=ze.ofType(o$),JE="data-sort-filter",YE="data-layer-uid",Ade="layerUid",Di="esri-layer-list",vi=`${Di}__item`,je={base:`${Di} esri-widget esri-widget--panel`,newUI:`${Di}--new-ui`,noItems:`${Di}__no-items`,list:`${Di}__list`,listRoot:`${Di}__list--root`,listExclusive:`${Di}__list--exclusive`,listInherited:`${Di}__list--inherited`,listIndependent:`${Di}__list--independent`,item:vi,itemContent:`${vi}-content`,itemMessage:`${vi}--has-message`,itemInvisible:`${vi}--invisible`,itemInvisibleAtScale:`${vi}--invisible-at-scale`,itemChildren:`${vi}--has-children`,itemSelectable:`${vi}--selectable`,itemContainer:`${vi}-container`,actionsMenu:`${vi}-actions-menu`,actionsMenuItem:`${vi}-actions-menu-item`,actionsMenuItemActive:`${vi}-actions-menu-item--active`,actions:`${vi}-actions`,actionsList:`${vi}-actions-list`,action:`${vi}-action`,actionIcon:`${vi}-action-icon`,actionImage:`${vi}-action-image`,actionTitle:`${vi}-action-title`,actionToggle:`${Di}__action-toggle`,actionToggleOn:`${Di}__action-toggle--on`,label:`${vi}-label`,message:`${vi}-message`,title:`${vi}-title`,statusIndicator:`${Di}__status-indicator`,publishing:`${Di}__publishing`,updating:`${Di}__updating`,connectionStatus:`${Di}__connection-status`,connectionStatusConnected:`${Di}__connection-status--connected`,toggleVisible:`${vi}-toggle`,toggleVisibleIcon:`${vi}-toggle-icon`,toggleIcon:`${vi}-toggle-icon`,radioIcon:`${vi}-radio-icon`,childToggle:`${Di}__child-toggle`,childToggleOpen:`${Di}__child-toggle--open`,childOpened:`${Di}__child-toggle-icon--opened`,childClosed:`${Di}__child-toggle-icon--closed`,childClosed_RTL:`${Di}__child-toggle-icon--closed-rtl`,sortableChosen:`${Di}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},au={actions:"actions",actionSection:"action-section",items:"items"},Nf={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function xz(t){const{actionsOpen:e,children:i}=t;e&&(t.actionsOpen=!1),i.forEach(r=>xz(r))}const p5="root",KE={statusIndicators:!0,errors:!1};let ui=class extends kr{constructor(e,i){super(e,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=ce(Ide),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=je.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new Ede,this.viewModel=new lz,this.visibleElements={...KE},this._onSortableSort=({to:r,from:n,item:l,newIndex:d})=>{n&&r&&(n===r?this._sortLayers(this._sortableMap.get(n.dataset.group)):this._moveLayerFromChildList({to:r,from:n,item:l,newIndex:d}))},this._sortableCanSort=(r,n)=>!(!r.el.dataset.group||!n.el.dataset.group),this._sortableCanPull=(r,n,l)=>{const{listItemCanGiveFunction:d}=this,y={selected:_r(l),from:_r(n.el),to:_r(r.el)};return!this._sortableCanSort(r,n)||typeof d!="function"||d.call(null,y)},this._sortableCanPut=(r,n,l)=>{const{listItemCanReceiveFunction:d}=this,y={selected:_r(l),from:_r(n.el),to:_r(r.el)};return!this._sortableCanSort(r,n)||typeof d!="function"||d.call(null,y)},this._onSortableEnd=({oldIndex:r,from:n,to:l,item:d})=>{n!==l&&n.insertBefore(d,n.children[r])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([Rs(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),me(()=>this.visibleElements,()=>this._itemsChanged(e)),me(()=>this.selectionEnabled,()=>this._toggleAllSorting(),st)])}loadDependencies(){return uf({icon:()=>le(()=>import("./calcite-icon-0ebdbba9.js"),["assets/calcite-icon-0ebdbba9.js","assets/icon-0e13ae13.js","assets/observers-279029a9.js"]),tooltip:()=>le(()=>import("./calcite-tooltip-62ad0877.js"),["assets/calcite-tooltip-62ad0877.js","assets/FloatingArrow-43fbb875.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-4a028ddf.js"])})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...KE,...e}}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var y;const{visibleItems:e,_newUI:i}=this,r=(y=this.viewModel)==null?void 0:y.state,n={[je.newUI]:i,[je.hidden]:r==="loading",[je.disabled]:r==="disabled"},l=this.renderItemTooltips(),d=this.renderItems();return X("div",{class:this.classes(je.base,n)},e.length?[l,d]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:r}=this;return e?X("calcite-tooltip",{label:r.layerIncompatible,referenceElement:i.get(e.uid)},r.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:i,children:r}=e;return[i?this.renderItemTooltip(e):null,...!i&&r?r.toArray().map(n=>this.renderItemTooltipNodes(n)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))??[]}renderNoItems(){return X("div",{class:je.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:i,messages:r}=this;return X("ul",{"aria-label":r.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":p5,bind:this,class:this.classes(je.list,je.listRoot,je.listIndependent)},e.map(n=>this.renderItem(n,null)).toArray())}renderActionsMenuIcon(e,i){const{messagesCommon:r}=this,n={[je.actionsMenuItemActive]:e.actionsOpen};return X("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(je.actionsMenuItem,n),tabindex:"0",role:"button","aria-controls":i,"aria-label":r.options,title:r.options},X("span",{"aria-hidden":"true",class:je.iconEllipses}))}renderActionsMenu(e,i,r,n){const{panel:l}=e,d=l&&l.visible?this.renderPanelButton(l):null,y=r===1&&this._getSingleActionButton(i),b=y?this.renderAction({item:e,action:y,singleAction:!0}):null,x=!y&&r?this.renderActionsMenuIcon(e,n):null;return x||d||y?X("div",{key:"actions-menu",class:je.actionsMenu},d,b,x):null}renderChildList(e,i){var E;const{selectionEnabled:r}=this,{visibilityMode:n,children:l}=e,d=this._hasChildren(e),y=!d&&r&&((E=e.layer)==null?void 0:E.type)==="group",{exclusive:b,inherited:x}=Nf,$={[je.listExclusive]:n===b,[je.listInherited]:n===x,[je.listIndependent]:n!==x&&n!==b};return d||y?X("ul",{bind:this,key:"list-items",id:i,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(je.list,$),"aria-expanded":e.open?"true":"false",role:r?"listbox":n===b?"radiogroup":"group",hidden:!e.open&&!y||null},l==null?void 0:l.map(k=>this.renderItem(k,e)).toArray()):null}renderChildrenToggle(e,i){const{messagesCommon:r}=this,n=this._hasChildren(e),l={[je.childToggleOpen]:e.open},d=e.open?r.collapse:r.expand;return n?X("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(je.childToggle,l),tabindex:"0",role:"button","aria-controls":i,"aria-label":d,title:d},X("span",{"aria-hidden":"true",class:this.classes(je.childClosed,je.iconRightArrow)}),X("span",{"aria-hidden":"true",class:this.classes(je.childOpened,je.iconDownArrow)}),X("span",{"aria-hidden":"true",class:this.classes(je.childClosed_RTL,je.iconLeftArrow)})):null}renderItemMessage(e){return e.error?X("div",{key:"esri-layer-list__error",class:je.message,role:"alert"},X("span",{"aria-hidden":"true",class:je.iconNoticeTriangle}),this.messages.layerError):e.incompatible?X("div",{key:"esri-layer-list__incompatible",class:je.message,role:"alert"},X("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:je.iconNoticeTriangle,afterCreate:i=>this._setTooltipReference(i,e)}),this.messages.layerIncompatible):null}renderItemContent(e,i,r){const{id:n}=this,l=`${n}_${e.uid}`,d=`${l}_actions`,y=`${l}__list`,{panel:b}=e,x=this._filterActions(e.actionsSections),$=this._countActions(x);return[X("div",{key:"list-item-container",class:je.itemContainer},this.renderChildrenToggle(e,y),this.renderLabel(e,i,r),this.renderActionsMenu(e,x,$,d)),this.renderItemMessage(e),$?this.renderActionsSections(e,x,d):null,b&&b.open&&!b.disabled?b.render():null,this.renderChildList(e,y)]}renderItem(e,i){var E;const{_newUI:r,id:n,selectionEnabled:l,selectedItems:d}=this,y=`${`${n}_${e.uid}`}__title`,b=this._hasMessage(e),x=this._hasChildren(e),$={[je.itemChildren]:x,[je.itemMessage]:!!b,[je.itemInvisible]:r&&!e.visible,[je.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[je.itemSelectable]:l};if(l){const k={[YE]:(E=e.layer)==null?void 0:E.uid,[JE]:(!e.sortable).toString()};return X("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(je.item,$),"aria-labelledby":y,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":i?i.uid:p5,tabIndex:0,"aria-selected":i5(e,d)?"true":"false",role:"option",...k},this.renderItemContent(e,i,y))}return X("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(je.item,$),"aria-labelledby":y},this.renderItemContent(e,i,y))}renderConnectionIcon(e){const{connectionStatus:i}=e;return i!=null?X("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(e,i){const{visibleElements:r}=this;if(!r.statusIndicators)return null;const{connectionStatus:n,publishing:l,updating:d}=e,y=d&&!i,b=!!n;return X("span",{class:this.classes({[je.statusIndicator]:!0,[je.publishing]:l,[je.updating]:y,[je.connectionStatus]:b,[je.connectionStatusConnected]:b&&n==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,i){const{messages:r}=this;if(!e)return null;const n=e.title||r.untitledLayer,l=e.visibleAtCurrentScale?n:`${n} (${r.layerInvisibleAtScale})`;return X("span",{key:"layer-title-container",id:i,title:l,"aria-label":l,class:je.title},n)}renderItemToggleIcon(e,i){const{_newUI:r}=this,{exclusive:n}=Nf,l=i==null?void 0:i.visibilityMode,d={[je.toggleVisibleIcon]:r,[je.toggleIcon]:r&&l!==n,[je.radioIcon]:r&&l===n,[je.iconRadioSelected]:l===n&&e.visible,[je.iconRadioUnselected]:l===n&&!e.visible,[je.iconVisible]:l!==n&&e.visible,[je.iconInvisible]:l!==n&&!e.visible};return X("span",{key:"item-toggle-icon",class:this.classes(d),"aria-hidden":"true"})}renderItemToggle(e,i,r){const{selectionEnabled:n,messages:l}=this,{exclusive:d}=Nf,y=i==null?void 0:i.visibilityMode,b=y===d?"radio":"switch";return X("span",n?{key:"item-toggle-selection-enabled",class:je.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":y,tabIndex:0,title:l.layerVisibility,"aria-checked":e.visible?"true":"false",role:b,"aria-labelledby":r}:{key:"item-toggle",class:je.toggleVisible},this.renderItemToggleIcon(e,i))}renderLabel(e,i,r){const{selectionEnabled:n,_newUI:l,messages:d}=this,{inherited:y,exclusive:b}=Nf,x=i==null?void 0:i.visibilityMode,$=x===b?"radio":"switch",E=l?[this.renderItemTitle(e,r),this.renderItemStatus(e,i),this.renderItemToggle(e,i,r)]:[this.renderItemToggle(e,i,r),this.renderItemTitle(e,r),this.renderItemStatus(e,i)],k=X("div",n?{key:`item-label-no-selection-${e.uid}`,class:je.label}:{key:`item-label-with-selection-${e.uid}`,class:je.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":x,tabIndex:0,"aria-checked":e.visible?"true":"false",title:d.layerVisibility,role:$,"aria-labelledby":r},E);return x===y||e.error?X("div",{key:`item-label-container-${e.uid}`,class:je.label},this.renderItemTitle(e,r),this.renderItemStatus(e,i)):k}renderPanelButton(e){const{className:i,open:r,title:n,image:l,disabled:d}=e,y=l||i?i:je.iconDefaultAction,b=this._getIconImageStyles(e),x={[je.actionsMenuItemActive]:r&&!d},$={[je.actionImage]:!!b["background-image"],[je.disabledElement]:e.disabled};return y&&($[y]=!!y),X("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(je.actionsMenuItem,x),role:"button",tabindex:e.disabled?null:0,title:n,"aria-label":n},X("span",{class:this.classes($),styles:b}))}renderActionsSections(e,i,r){const n=i.toArray().map((l,d)=>X("ul",{key:`${e}-action-section-${d}`,class:je.actionsList},this.renderActionSection(e,l)));return X("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:r,class:je.actions,hidden:!e.actionsOpen||null},n)}renderActionSection(e,i){return(i&&i.toArray()).map(r=>this.renderAction({item:e,action:r}))}renderActionIcon(e){const{active:i,className:r}=e,n=this._getIconImageStyles(e),l=e.type!=="button"||e.image||r?r:je.iconDefaultAction,d={[je.actionImage]:!i&&!!n["background-image"],[je.iconLoading]:i,[je.rotating]:i};return l&&!i&&(d[l]=!0),X("span",{key:"action-icon","aria-hidden":"true",class:this.classes(je.actionIcon,d),styles:n})}renderActionTitle(e,i){return i?null:X("span",{key:"action-title",class:je.actionTitle},e)}renderAction(e){const{item:i,action:r,singleAction:n}=e,{active:l,disabled:d,title:y}=r,b={[je.actionsMenuItem]:n&&r.type==="button",[je.action]:l||!n&&r.type!=="toggle",[je.actionToggle]:!l&&r.type==="toggle",[je.actionToggleOn]:!l&&r.type==="toggle"&&r.value,[je.disabledElement]:d},x=[this.renderActionIcon(r),this.renderActionTitle(y,n)];return n?X("div",{bind:this,"data-item":i,"data-action":r,role:"button",key:`single-action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:b,tabindex:"0",title:y??void 0,"aria-label":y??void 0},x):X("li",{bind:this,"data-item":i,"data-action":r,key:`action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:b,tabindex:"0",role:"button",title:y??void 0,"aria-label":y??void 0},x)}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:i}=this,r=e.dataset.group,n=i.get(r);n&&n.destroy(),i.delete(r)}_destroySortables(){const{_sortableMap:e,_sortableNodes:i}=this;e.forEach(r=>r&&r.destroy()),e.clear(),i.clear()}_moveLayerFromChildList({to:e,from:i,item:r,newIndex:n}){const l=_r(r),d=_r(e),y=_r(i);this.viewModel.moveListItem(l,y,d,n)}_sortLayers(e){var n,l;if(!e)return;const i=_r(e.el),r=e.toArray();i?qce(i,r):iz((l=(n=this.view)==null?void 0:n.map)==null?void 0:l.layers,r)}_toggleSorting(e,i){const{_sortableMap:r,selectionEnabled:n}=this,l=r.get(i),d=_r(e),y=(i===p5||(d==null?void 0:d.childrenSortable)&&Bce(d))&&n;if(l)l.option("disabled",!y);else if(y){const b=at.create(e,{dataIdAttr:YE,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${JE}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!y,chosenClass:je.sortableChosen});r.set(i,b)}}_toggleAllSorting(){this._sortableNodes.forEach((e,i)=>this._toggleSorting(e,i))}_sortNodeCreated(e){const i=e.dataset.group;i&&(this._sortableNodes.set(i,e),this._toggleSorting(e,i))}_setVisibleItems(e){this.visibleItems=e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(e){return e.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(e){var n;const{_focusSortUid:i}=this;if(!e||!i)return;const r=_r(e);((n=r==null?void 0:r.layer)==null?void 0:n.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e){this.addHandles(e.on("change",this.scheduleRender.bind(this)),au.actionSection),e.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(e){e.type!=="toggle"?e.type!=="slider"?this.addHandles(me(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),st),au.actions):this.addHandles(me(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),st),au.actions):this.addHandles(me(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),st),au.actions)}_renderOnItemChanges(e){this.addHandles([me(()=>{var i,r,n;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(i=e==null?void 0:e.panel)==null?void 0:i.title,(r=e==null?void 0:e.panel)==null?void 0:r.content,(n=e==null?void 0:e.panel)==null?void 0:n.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),vl),me(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],au.items),e.children.forEach(i=>this._renderOnItemChanges(i)),e.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(e){this.removeHandles(au.items),this.removeHandles(au.actions),this.removeHandles(au.actionSection),e.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(i=>i.filter(r=>r.visible))}_countActions(e){return e.reduce((i,r)=>i+r.length,0)}_getIconImageStyles(e){const i=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(e){var D,L,N,B;const i=["ArrowDown","ArrowUp"],r=Ju(e);if(!i.includes(r))return void this._toggleSelection(e);e.stopPropagation();const n=e.currentTarget,l=_r(n),{_sortableMap:d,selectedItems:y}=this,b=n.dataset.group,x=d.get(b);if(!x||!l)return;const $=i5(l,y),E=x.toArray(),k=e.target,P=E.indexOf(k.dataset[Ade]);if(P!==-1){if(r==="ArrowDown"){const W=P+1;if(W>=E.length)return;$?(WE(E,P,W),x.sort(E),this._sortLayers(x),this._focusSortUid=(D=l.layer)==null?void 0:D.uid):(this._focusSortUid=(L=l.layer)==null?void 0:L.uid,this.scheduleRender())}if(r==="ArrowUp"){const W=P-1;if(W<=-1)return;$?(WE(E,P,W),x.sort(E),this._sortLayers(x),this._focusSortUid=(N=l.layer)==null?void 0:N.uid):(this._focusSortUid=(B=l.layer)==null?void 0:B.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const i=_r(e.currentTarget);if(!i)return;const{actionsOpen:r}=i,n=!r;n&&this.operationalItems.forEach(l=>xz(l)),i.actionsOpen=n,e.stopPropagation()}_triggerPanel(e){const i=kde(e.currentTarget);e.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(e){const i=e.currentTarget,r=Pde(i),n=_r(i);r&&n&&(r.type==="toggle"&&(r.value=!r.value),this.triggerAction(r,n),e.stopPropagation())}_toggleVisibility(e){const i=e.currentTarget,r=i.getAttribute("data-parent-visibility"),n=_r(i);n&&(r===Nf.exclusive&&n.visible||(n.visible=!n.visible),e.stopPropagation())}_toggleChildrenClick(e){const i=_r(e.currentTarget);i&&(i.open=!i.open,e.stopPropagation())}_toggleSelection(e){var y,b;e.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:r}=this,n=_r(e.currentTarget);if(!n)return;const l=i5(n,r),{length:d}=r;if(!i)return d&&!(l&&d===1)?(r.removeAll(),void r.add(n)):void(l?(y=r.remove)==null?void 0:y.call(r,l):r.add(n));l?(b=r.remove)==null||b.call(r,l):r.add(n)}get test(){return{visibleItems:this.visibleItems}}};function _r(t){return t==null?void 0:t["data-item"]}function kde(t){return t==null?void 0:t["data-panel"]}function Pde(t){return t==null?void 0:t["data-action"]}g([S()],ui.prototype,"visibleItems",void 0),g([S()],ui.prototype,"iconClass",void 0),g([S()],ui.prototype,"icon",void 0),g([S()],ui.prototype,"label",null),g([S()],ui.prototype,"listItemCanGiveFunction",void 0),g([S()],ui.prototype,"listItemCanReceiveFunction",void 0),g([S()],ui.prototype,"listItemCreatedFunction",null),g([S(),Er("esri/widgets/LayerList/t9n/LayerList")],ui.prototype,"messages",void 0),g([S(),Er("esri/t9n/common")],ui.prototype,"messagesCommon",void 0),g([S()],ui.prototype,"multipleSelectionEnabled",void 0),g([S()],ui.prototype,"operationalItems",null),g([S()],ui.prototype,"selectionEnabled",void 0),g([S()],ui.prototype,"selectedItems",void 0),g([S()],ui.prototype,"view",null),g([rz("trigger-action"),S({type:lz})],ui.prototype,"viewModel",void 0),g([S()],ui.prototype,"visibleElements",void 0),g([xt("visibleElements")],ui.prototype,"castVisibleElements",null),g([$r()],ui.prototype,"_toggleActionsOpen",null),g([$r()],ui.prototype,"_triggerPanel",null),g([$r()],ui.prototype,"_triggerAction",null),g([$r()],ui.prototype,"_toggleVisibility",null),g([$r()],ui.prototype,"_toggleChildrenClick",null),g([$r()],ui.prototype,"_toggleSelection",null),ui=g([J("esri.widgets.LayerList")],ui);const Cde=ui;function h$(t,e,i,r){let n=null,l=1e3;typeof e=="number"?(l=e,r=i):(n=e??null,l=i);let d,y=0;const b=()=>{y=0,t.apply(r,d)},x=(...$)=>{n&&n.apply(r,$),d=$,l?y||(y=setTimeout(b,l)):b()};return x.remove=()=>{y&&(clearTimeout(y),y=0)},x.forceUpdate=()=>{y&&(clearTimeout(y),b())},x.hasPendingUpdates=()=>!!y,x}var a2;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(a2||(a2={}));const ZE=["B","kB","MB","GB","TB"];function Ode(t,e){let i=e===0?0:Math.floor(Math.log(e)/Math.log(a2.KILOBYTES));i=Ds(i,0,ZE.length-1);const r=wh(e/a2.KILOBYTES**i,{maximumFractionDigits:2});return Bn(t.units.bytes[ZE[i]],{fileSize:r})}function Lde(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const n=e.find(l=>l.name===i);return n?Dde({tagName:r,tags:n.tags}):null}function Dde(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find(n=>n.name===e);return r&&r.value||null}var uS;const Rde={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let As=uS=class extends ve{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=Lde({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return Rde[e]||null}clone(){return new uS({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};g([S({type:String})],As.prototype,"contentType",void 0),g([S()],As.prototype,"exifInfo",void 0),g([S({readOnly:!0})],As.prototype,"orientationInfo",null),g([S({type:Ct})],As.prototype,"id",void 0),g([S({type:String})],As.prototype,"globalId",void 0),g([S({type:String})],As.prototype,"keywords",void 0),g([S({type:String})],As.prototype,"name",void 0),g([S({json:{read:!1}})],As.prototype,"parentGlobalId",void 0),g([S({json:{read:!1}})],As.prototype,"parentObjectId",void 0),g([S({type:Ct})],As.prototype,"size",void 0),g([S({json:{read:!1}})],As.prototype,"url",void 0),As=uS=g([J("esri.layers.support.AttachmentInfo")],As);const jde=As;var hS;let xr=hS=class extends ve{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new hS(ae({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};g([S({type:[String],json:{write:!0}})],xr.prototype,"attachmentTypes",void 0),g([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],xr.prototype,"attachmentsWhere",void 0),g([S({type:Boolean,json:{write:!0}})],xr.prototype,"cacheHint",void 0),g([S({type:[String],json:{write:!0}})],xr.prototype,"keywords",void 0),g([S({type:[Number],json:{write:!0}})],xr.prototype,"globalIds",void 0),g([S({json:{write:!0}})],xr.prototype,"name",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],xr.prototype,"num",void 0),g([S({type:[Number],json:{write:!0}})],xr.prototype,"objectIds",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],xr.prototype,"returnMetadata",void 0),g([S({type:[Number],json:{write:!0}})],xr.prototype,"size",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],xr.prototype,"start",void 0),g([Ae("start"),Ae("num")],xr.prototype,"writeStart",null),g([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],xr.prototype,"where",void 0),xr=hS=g([J("esri.rest.support.AttachmentQuery")],xr),xr.from=zi(xr);const l2=xr,Fde="esri.widgets.Feature.support.featureUtils",XE=ge.getLogger(Fde),Nde=/href=(""|'')/gi,zde=/(\{([^\{\r\n]+)\})/g,Vde=/\'/g,Sz=/^\s*expression\//i,Bde=/(\n)/gi,Gde=/[\u00A0-\u9999<>\&]/gim,Ude=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,qde=/^(?:mailto:|tel:)/,Mz="relationships/",QE=Jp("short-date-short-time");function $z(t){if(t!=null)return t.get("sourceLayer")||t.get("layer")}async function u2(t,e){return typeof t=="function"?t(e):t}function Tz(t=""){if(t)return!qde.test(t.trim().toLowerCase())}function c$(t){return!!t&&Sz.test(t)}function Hde(t,e){if(!c$(e)||!t)return null;const i=e.replace(Sz,"").toLowerCase();let r=null;return t.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function Iz(t,e){const i=Hde(e,t==null?void 0:t.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function Wde(t,e){const i=e.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`}function Jde(t){return t.replaceAll(Nde,"")}function um(t,e){const i=d$(e,t);return i?i.name:t}function Yde(t,e){return t&&t.map(i=>um(i,e))}function d$(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function Ez(t){return`${t}`.trim()}function ed({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:n,fieldInfoMap:l}){return r?cS({formattedAttributes:e,template:Qde(r,{...e,...n,...t},i),fieldInfoMap:l}):""}function cS({formattedAttributes:t,template:e,fieldInfoMap:i}){return Ez(Jde(Bn(Bn(e,r=>Wde(r,i)),t)))}function Kde(t,e,i=!1){const r=e[t];if(typeof r=="string"){const n="%27",l=(i?encodeURIComponent(r):r).replaceAll(Vde,n);e[t]=l}}function Zde(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>Kde(r,i,e)),i}function Xde(t,e,i){const r=(e=Ez(e))&&e[0]!=="{";return Bn(t,Zde(i,r||!1))}function dS(t,e){return t.replaceAll(zde,(i,r,n)=>{const l=d$(e,n);return l?`{${l.name}}`:r})}function Qde(t,e,i){const r=dS(t,i);return r&&r.replaceAll(Ude,(n,l,d)=>Xde(n,l||d,e))}function epe(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function eA(t){return t!=null&&typeof t=="object"&&"layer"in t&&!!t.layer}function tpe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function ipe(t){return t!=null&&typeof t=="object"&&"fieldsIndex"in t&&"geometryType"in t&&"getField"in t&&"load"in t&&"loaded"in t&&"objectIdField"in t&&"spatialReference"in t&&"type"in t&&t.type==="feature"&&"when"in t}function rpe(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatureCount"in t&&"queryObjectIds"in t&&"queryRelatedFeatures"in t&&"queryRelatedFeaturesCount"in t&&"relationships"in t}function Az(t){return ipe(t)&&rpe(t)}function spe(t,e){var $;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:n,layer:l}=e,d=kz(i,r),y=d==null?void 0:d.clone(),b=d$(l,r);if(y&&!Xx(r)){const E=b==null?void 0:b.type;if(E==="date"||E==="date-only"||E==="time-only"||E==="timestamp-offset"||($=y.format)!=null&&$.dateFormat){const k=y.format??new Yp;if(k.dateFormat??(k.dateFormat=E==="date-only"?"short-date":"short-date-short-time"),typeof t=="number"){const P=!eA(l)&&XJ(l)&&l.datesInUnknownTimezone||eA(l)&&tpe(l.layer)&&l.layer.datesInUnknownTimezone;return k.formatDate(t,P)}switch(E){case"date-only":return k.formatDateOnly(t);case"time-only":return k.formatTimeOnly(t);case"timestamp-offset":return k.formatTimestamp(t)}}}const x=y==null?void 0:y.format;return typeof t=="string"&&Xx(r)&&x?x.formatRasterPixelValue(t):typeof(t=epe(t,x))=="string"||t==null||x==null?Bm(t):n?wh(t,{...GD(x),minimumFractionDigits:0,maximumFractionDigits:20}):x.formatNumber(t)}function kz(t,e){if(t&&t.length&&e)return t.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===e.toLowerCase()})}function npe({fieldName:t,graphic:e,layer:i}){if(Sl(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const n=i.getFeatureType(e);return n?n.name:null}function ope({fieldName:t,value:e,graphic:i,layer:r}){if(Sl(t)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(t,{feature:i});return n&&n.type==="coded-value"?n.getName(e):null}function ape(t,e){const{creatorField:i,creationDateField:r,editorField:n,editDateField:l}=t;if(!e)return;const d=e[l];if(typeof d=="number"){const b=e[n];return{type:"edit",date:qn(d,QE),user:b}}const y=e[r];if(typeof y=="number"){const b=e[i];return{type:"create",date:qn(y,QE),user:b}}return null}function lpe(t,e){const i=new Map;return t&&t.forEach(r=>{const n=um(r.fieldName,e);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function tA(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const l=n&&n.fieldInfos;l&&e.push(...l)}}),e}function p$(t){return t.replaceAll(Gde,e=>`&#${e.charCodeAt(0)};`)}function Bm(t){return typeof t=="string"?t.replaceAll(Bde,'<br class="esri-text-new-line" />'):t}function Pz(t){var x,$;const{value:e,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:l,graphic:d}=t;if(e==null)return"";const y=ope({fieldName:i,value:e,graphic:d,layer:l});if(y)return y;const b=npe({fieldName:i,graphic:d,layer:l});if(b)return b;if(n.get(i.toLowerCase()))return spe(e,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:l});switch(($=(x=l==null?void 0:l.fieldsIndex)==null?void 0:x.get(i))==null?void 0:$.type){case"date":return qn(e);case"date-only":return p7(e);case"time-only":return f7(e);case"timestamp-offset":return y7(e)}return Bm(e)}function f5({fieldInfos:t,attributes:e,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:l}){const d={};return l==null||l.forEach(y=>dpe({attributes:d,relatedInfo:y,fieldInfoMap:n,fieldInfos:t,layer:i})),e&&Object.keys(e).forEach(y=>{const b=e[y];d[y]=Pz({fieldName:y,fieldInfos:t,fieldInfoMap:n,layer:i,value:b,graphic:r})}),d}async function Cz(t,e){var $,E;const{layer:i,graphic:r,outFields:n,objectIds:l,returnGeometry:d,spatialReference:y}=t,b=l[0];if(typeof b!="number"&&typeof b!="string"){const k="Could not query required fields for the specified feature. The feature's ID is invalid.",P={layer:i,graphic:r,objectId:b,requiredFields:n};return XE.warn(k,P),null}if(!((E=($=LO(i))==null?void 0:$.operations)!=null&&E.supportsQuery)){const k="The specified layer cannot be queried. The following fields will not be available.",P={layer:i,graphic:r,requiredFields:n,returnGeometry:d};return XE.warn(k,P),null}const x=i.createQuery();return x.objectIds=l,x.outFields=n!=null&&n.length?n:[i.objectIdField],x.returnGeometry=!!d,x.returnZ=!!d,x.returnM=!!d,x.outSpatialReference=y,(await i.queryFeatures(x,e)).features[0]}async function upe(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await Rl(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function hpe({graphic:t,popupTemplate:e,layer:i,spatialReference:r},n){if(!i||!e||(typeof i.load=="function"&&await i.load(n),!t.attributes))return;const l=t.attributes[i.objectIdField];if(l==null)return;const d=[l],y=await e.getRequiredFields(i.fieldsIndex),b=fX(y,t),x=b?[]:y,$=e.returnGeometry||await upe(e);if(b&&!$)return;const E=await Cz({layer:i,graphic:t,outFields:x,objectIds:d,returnGeometry:$,spatialReference:r},n);E&&(E.geometry&&(t.geometry=E.geometry),E.attributes&&(t.attributes={...t.attributes,...E.attributes}))}function Sl(t=""){return!!t&&t.includes(Mz)}function cpe(t){return t?`${Mz}${t.layerId}/${t.fieldName}`:""}function iA({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:l}){t&&e&&i&&Object.keys(e.attributes).forEach(d=>{const y=cpe({layerId:i.relation.id.toString(),fieldName:d}),b=e.attributes[d];t[y]=Pz({fieldName:y,fieldInfos:r,fieldInfoMap:n,layer:l,value:b,graphic:e})})}function dpe({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(l=>iA({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(l=>iA({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n})))}const rA=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Oz=({layer:t,method:e,query:i,definitionExpression:r})=>{var d,y;if(!((y=(d=t.capabilities)==null?void 0:d.query)!=null&&y.supportsCacheHint)||e==="attachments")return;const n=i.where!=null?i.where:null,l=i.geometry!=null?i.geometry:null;rA(r)||rA(n)||(l==null?void 0:l.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},ppe=({query:t,layer:e,method:i})=>{Oz({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},fpe=({queryPayload:t,layer:e,method:i})=>{Oz({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function ype(t,e,i){return t&&e&&i?sA(t.allLayers,e,i)||sA(t.allTables,e,i):null}function sA(t,e,i){return t.filter(Az).find(r=>r!==e&&r.url===e.url&&r.layerId===i.relatedTableId)}const nA={editing:!1,operations:{add:!0,update:!0,delete:!0}},Lz=ze.ofType(jde);let ks=class extends Be{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...nA},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Lz,this.fileInfos=new ze,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(me(()=>this.graphic,()=>this._graphicChanged(),st))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(e){return{...nA,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i}=this;if(!e||typeof e.queryAttachments!="function")throw new se("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId(),n=new l2({objectIds:[r],returnMetadata:!0}),l=[],d=e.queryAttachments(n).then(b=>b[r]||l).catch(()=>l);this._getAttachmentsPromise=d,this.notifyChange("state");const y=await d;return i.removeAll(),y.length&&i.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(e,i=this.graphic){var b;const{_attachmentLayer:r,attachmentInfos:n,capabilities:l}=this;if(!i)throw new se("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new se("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((b=l.operations)!=null&&b.add))throw new se("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new se("invalid-layer","addAttachment(): A valid layer is required.");const d=r.addAttachment(i,e).then(x=>this._queryAttachment(x.objectId,i)),y=await d;return n.add(y),y}async deleteAttachment(e){var b;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:l}=this;if(!e)throw new se("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((b=l.operations)!=null&&b.delete))throw new se("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new se("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new se("invalid-graphic","deleteAttachment(): A graphic is required.");const d=i.deleteAttachments(n,[e.id]).then(()=>e),y=await d;return r.remove(y),y}async updateAttachment(e,i=this.activeAttachmentInfo){var $;const{_attachmentLayer:r,attachmentInfos:n,graphic:l,capabilities:d}=this;if(!e)throw new se("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new se("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!(($=d.operations)!=null&&$.update))throw new se("invalid-capabilities","updateAttachment(): Update capabilities are required.");const y=n.findIndex(E=>E===i);if(!r||typeof r.updateAttachment!="function")throw new se("invalid-layer","updateAttachment(): A valid layer is required.");if(!l)throw new se("invalid-graphic","updateAttachment(): A graphic is required.");const b=r.updateAttachment(l,i.id,e).then(E=>this._queryAttachment(E.objectId)),x=await b;return n.splice(y,1,x),x}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const n=this.fileInfos.findIndex(l=>r===l);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:i}),this.fileInfos.items[n]}deleteFile(e){const i=this.fileInfos.find(r=>r.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!(r!=null&&r.queryAttachments))throw new se("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i),l=new l2({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(l).then(d=>d[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,i=$z(e);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};g([S()],ks.prototype,"capabilities",void 0),g([xt("capabilities")],ks.prototype,"castCapabilities",null),g([S()],ks.prototype,"activeAttachmentInfo",void 0),g([S()],ks.prototype,"activeFileInfo",void 0),g([S({readOnly:!0,type:Lz})],ks.prototype,"attachmentInfos",void 0),g([S()],ks.prototype,"fileInfos",void 0),g([S({type:xs})],ks.prototype,"graphic",void 0),g([S()],ks.prototype,"mode",void 0),g([S({readOnly:!0})],ks.prototype,"state",null),g([S()],ks.prototype,"filesEnabled",void 0),g([S({readOnly:!0})],ks.prototype,"supportsResizeAttachments",null),ks=g([J("esri.widgets.Attachments.AttachmentsViewModel")],ks);const f$=ks;function oA(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function mpe(t){const e=It("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const aA={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},At="esri-attachments",Yh="esri-button",Pe={base:At,loaderContainer:`${At}__loader-container`,loader:`${At}__loader`,fadeIn:`${At}--fade-in`,container:`${At}__container`,containerList:`${At}__container--list`,containerPreview:`${At}__container--preview`,actions:`${At}__actions`,deleteButton:`${At}__delete-button`,addAttachmentButton:`${At}__add-attachment-button`,errorMessage:`${At}__error-message`,items:`${At}__items`,item:`${At}__item`,itemButton:`${At}__item-button`,itemMask:`${At}__item-mask`,itemMaskIcon:`${At}__item-mask--icon`,itemImage:`${At}__image`,itemImageResizable:`${At}__image--resizable`,itemLabel:`${At}__label`,itemFilename:`${At}__filename`,itemChevronIcon:`${At}__item-chevron-icon`,itemLink:`${At}__item-link`,itemLinkOverlay:`${At}__item-link-overlay`,itemLinkOverlayIcon:`${At}__item-link-overlay-icon`,itemEditIcon:`${At}__item-edit-icon`,itemAddIcon:`${At}__item-add-icon`,itemAddButton:`${At}__item-add-button`,formNode:`${At}__form-node`,fileFieldset:`${At}__file-fieldset`,fileLabel:`${At}__file-label`,fileName:`${At}__file-name`,fileInput:`${At}__file-input`,metadata:`${At}__metadata`,metadataFieldset:`${At}__metadata-fieldset`,progressBar:`${At}__progress-bar`,esriWidget:"esri-widget",esriButton:Yh,buttonDisabled:`${Yh}--disabled`,esriButtonSecondary:`${Yh}--secondary`,esriButtonTertiary:`${Yh}--tertiary`,esriButtonThird:`${Yh}--third`,esriButtonSmall:`${Yh}--small`,esriButtonHalf:`${Yh}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},y5=window.CSS;let Jr=class extends kr{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...aA},this._supportsImageOrientation=y5&&y5.supports&&y5.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new f$),this.addHandles([Rs(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Rs(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),me(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),st)])}loadDependencies(){return uf({icon:()=>le(()=>import("./calcite-icon-0ebdbba9.js"),["assets/calcite-icon-0ebdbba9.js","assets/icon-0e13ae13.js","assets/observers-279029a9.js"])})}get capabilities(){return this.viewModel.capabilities}set capabilities(e){this.viewModel.capabilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...aA,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new se("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new se("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new se("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var r;const i=this.viewModel.deleteFile(e||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return X("div",{class:this.classes(Pe.base,Pe.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?X("div",{key:"error-message",class:Pe.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(r||e):this.renderAttachmentContainer()}renderLoading(){return X("div",{class:Pe.loaderContainer,key:"loader"},X("div",{class:Pe.loader}))}renderProgressBar(){return this.visibleElements.progressBar?X("div",{class:Pe.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,n=this.visibleElements.cancelAddButton?X("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Pe.esriButton,Pe.esriButtonTertiary,Pe.esriButtonSmall,Pe.esriButtonHalf,e&&Pe.buttonDisabled)},this.messages.cancel):null,l=this.visibleElements.addSubmitButton?X("button",{type:"submit",disabled:r,class:this.classes(Pe.esriButton,Pe.esriButtonSecondary,Pe.esriButtonSmall,Pe.esriButtonHalf,{[Pe.buttonDisabled]:r})},this.messages.add):null,d=i?X("span",{key:"file-name",class:Pe.fileName},i.name):null,y=X("form",{bind:this,afterCreate:Ow,afterRemoved:y8,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},X("fieldset",{class:Pe.fileFieldset},d,X("label",{class:this.classes(Pe.fileLabel,Pe.esriButton,Pe.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,X("input",{class:Pe.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),l,n);return X("div",{key:"add-form-container",class:Pe.formNode},y)}renderDetailsForm(e){var Y,ie,ne;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:l}=this,{capabilities:d}=r,y=l||!n;let b,x,$,E;n?(b=n.type,x=n.name,$=n.size):e&&"file"in e?(b=e.file.type,x=e.file.name,$=e.file.size):e&&"contentType"in e&&(b=e.contentType,x=e.name,$=e.size,E=e.url);const k=d.editing&&((Y=d.operations)!=null&&Y.delete)&&i.deleteButton?X("button",{key:"delete-button",type:"button",disabled:l,bind:this,onclick:he=>this._submitDeleteAttachment(he,e),class:this.classes(Pe.esriButton,Pe.esriButtonSmall,Pe.esriButtonTertiary,Pe.deleteButton,{[Pe.buttonDisabled]:l})},this.messages.delete):void 0,P=d.editing&&((ie=d.operations)!=null&&ie.update)&&i.updateButton?X("button",{disabled:y,key:"update-button",type:"submit",class:this.classes(Pe.esriButton,Pe.esriButtonSmall,Pe.esriButtonThird,{[Pe.buttonDisabled]:y})},this.messages.update):void 0,D=this.visibleElements.cancelUpdateButton?X("button",{disabled:l,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Pe.esriButton,Pe.esriButtonSmall,Pe.esriButtonTertiary,Pe.esriButtonThird,{[Pe.buttonDisabled]:l})},this.messages.cancel):void 0,L=d.editing&&((ne=d.operations)!=null&&ne.update)?X("fieldset",{key:"file",class:Pe.fileFieldset},X("span",{key:"file-name",class:Pe.fileName},x),X("label",{class:this.classes(Pe.fileLabel,Pe.esriButton,Pe.esriButtonSecondary)},this.messages.changeFile,X("input",{class:Pe.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,N=X("fieldset",{key:"size",class:Pe.metadataFieldset},X("label",null,Ode(this.messagesUnits,$??0))),B=X("fieldset",{key:"content-type",class:Pe.metadataFieldset},X("label",null,b)),W=E!=null?X("a",{class:Pe.itemLink,href:E,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),X("div",{class:Pe.itemLinkOverlay},X("span",{class:Pe.itemLinkOverlayIcon},X("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),H=X("form",{bind:this,afterCreate:Ow,afterRemoved:y8,"data-node-ref":"_updateAttachmentForm",onsubmit:he=>this._submitUpdateAttachment(he,e)},X("div",{class:Pe.metadata},N,B),L,X("div",{class:Pe.actions},k,D,P));return X("div",{key:"edit-form-container",class:Pe.formNode},W,H)}renderImageMask(e,i){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,i):null}renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,n=mpe(i),l={[Pe.itemImageResizable]:r};return X("div",{key:n,class:this.classes(Pe.itemMaskIcon,Pe.itemMask)},X("img",{title:e,alt:e,src:n,class:this.classes(l,Pe.itemImage)}))}renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:n,name:l,url:d}=e;if(!r||!oA(n))return this.renderGenericImageMask(l,n);const y=this._getCSSTransform(e),b=y?{transform:y,"image-orientation":"none"}:{},x=`${d}${d!=null&&d.includes("?")?"&":"?"}w=${i}`,$={[Pe.itemImageResizable]:r};return X("div",{key:x,class:this.classes(Pe.itemMask)},X("img",{styles:b,alt:l,title:l,src:x,class:this.classes($,Pe.itemImage)}))}renderFile(e){const{file:i}=e;return X("li",{class:Pe.item,key:i},X("button",{key:"details-button",bind:this,class:Pe.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),X("label",{class:Pe.itemLabel},X("span",{class:Pe.itemFilename},i.name||this.messages.noTitle),X("span",{"aria-hidden":"true",class:this.classes(Pe.itemChevronIcon,Th(this.container)?Pe.iconLeft:Pe.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:l,supportsResizeAttachments:d}=r,{contentType:y,name:b,url:x}=e,$=this.renderImageMask(e,i==="list"?48:400),E=l.editing?X("span",{"aria-hidden":"true",class:this.classes(Pe.itemChevronIcon,Th(this.container)?Pe.iconLeft:Pe.iconRight)}):null,k=[$,n==="preview"&&d&&oA(y)?null:X("label",{class:Pe.itemLabel},X("span",{class:Pe.itemFilename},b||this.messages.noTitle),E)],P=l.editing?X("button",{key:"details-button",bind:this,class:Pe.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},k):X("a",{key:"details-link",class:Pe.itemButton,href:x??void 0,target:"_blank"},k);return X("li",{class:Pe.item,key:e},P)}renderAttachmentContainer(){var D;const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:l,fileInfos:d}=i,y=!!(n!=null&&n.length),b=!!(d!=null&&d.length),x={[Pe.containerList]:e!=="preview",[Pe.containerPreview]:e==="preview"},$=l.editing&&((D=l.operations)!=null&&D.add)&&r.addButton?X("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Pe.esriButton,Pe.esriButtonTertiary,Pe.addAttachmentButton),type:"button"},X("span",{"aria-hidden":"true",class:this.classes(Pe.itemAddIcon,Pe.iconPlus)}),this.messages.add):void 0,E=y?X("ul",{key:"attachments-list",class:Pe.items},n.toArray().map(L=>this.renderAttachmentInfo({attachmentInfo:L,displayType:e}))):void 0,k=b?X("ul",{key:"file-list",class:Pe.items},d.toArray().map(L=>this.renderFile(L))):void 0,P=b||y?void 0:X("div",{class:Pe.empty},this.messages.noAttachments);return X("div",{key:"attachments-container",class:this.classes(Pe.container,x)},E,k,P,$)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const i=e.target,r=i&&i.files&&i.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};g([S()],Jr.prototype,"capabilities",null),g([S()],Jr.prototype,"displayType",void 0),g([S({readOnly:!0})],Jr.prototype,"effectiveDisplayType",null),g([S()],Jr.prototype,"graphic",null),g([S()],Jr.prototype,"label",null),g([S(),Er("esri/widgets/Attachments/t9n/Attachments")],Jr.prototype,"messages",void 0),g([S(),Er("esri/core/t9n/Units")],Jr.prototype,"messagesUnits",void 0),g([S({readOnly:!0})],Jr.prototype,"selectedFile",void 0),g([S({readOnly:!0})],Jr.prototype,"submitting",void 0),g([S({readOnly:!0})],Jr.prototype,"error",void 0),g([S({type:f$})],Jr.prototype,"viewModel",void 0),g([S()],Jr.prototype,"visibleElements",void 0),g([xt("visibleElements")],Jr.prototype,"castVisibleElements",null),Jr=g([J("esri.widgets.Attachments")],Jr);const gpe=Jr;let C1=class extends f${constructor(e){super(e),this.description=null,this.title=null}};g([S()],C1.prototype,"description",void 0),g([S()],C1.prototype,"title",void 0),C1=g([J("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],C1);const y$=C1,vpe={heading:"esri-widget__heading"};function m$({level:t,class:e,...i},r){const n=Dz(t);return X(`h${n}`,{...i,class:Dj(vpe.heading,e),role:"heading","aria-level":String(n)},r)}function Dz(t){return Ds(Math.ceil(t),1,6)}function kSe(t,e=1){return Dz(t+e)}const m5="esri-feature-element-info",g5={base:m5,title:`${m5}__title`,description:`${m5}__description`};let Ip=class extends kr{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return X("div",{class:g5.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?X(m$,{level:this.headingLevel,class:g5.title},e):null}renderDescription(){const{description:e}=this;return e?X("div",{key:"description",class:g5.description},e):null}};g([S()],Ip.prototype,"description",void 0),g([S()],Ip.prototype,"headingLevel",void 0),g([S()],Ip.prototype,"title",void 0),Ip=g([J("esri.widgets.Feature.support.FeatureElementInfo")],Ip);const S_=Ip,bpe={base:"esri-feature-attachments"};let ba=class extends kr{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new gpe,this.headingLevel=2,this.viewModel=new y$}initialize(){this._featureElementInfo=new S_,this.addHandles([me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),st),me(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,st)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return X("div",{class:bpe.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i,headingLevel:r})}};g([S({readOnly:!0})],ba.prototype,"attachmentsWidget",void 0),g([S()],ba.prototype,"description",null),g([S()],ba.prototype,"displayType",null),g([S()],ba.prototype,"graphic",null),g([S()],ba.prototype,"headingLevel",void 0),g([S()],ba.prototype,"title",null),g([S({type:y$})],ba.prototype,"viewModel",void 0),ba=g([J("esri.widgets.Feature.FeatureAttachments")],ba);const wpe=ba;let Cu=class extends Xo(Be){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(me(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},st))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(u2(r,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=u2(e,{graphic:i}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};g([S({readOnly:!0})],Cu.prototype,"created",void 0),g([S()],Cu.prototype,"creator",void 0),g([S()],Cu.prototype,"destroyer",void 0),g([S({type:xs})],Cu.prototype,"graphic",void 0),g([S({readOnly:!0})],Cu.prototype,"state",null),Cu=g([J("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Cu);const h2=Cu,v5="esri-feature-content",b5={base:v5,loaderContainer:`${v5}__loader-container`,loader:`${v5}__loader`};let Ep=class extends kr{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{Tz(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return X("div",{class:b5.loaderContainer,key:"loader"},X("div",{class:b5.loader}))}renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?X("div",{key:e,bind:e,afterCreate:this._attachToNode}):t2(e)?X("div",{key:e},!e.destroyed&&e.render()):X("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return X("div",{class:b5.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const i=this;e.appendChild(i)}};g([S()],Ep.prototype,"creator",null),g([S()],Ep.prototype,"graphic",null),g([S({type:h2})],Ep.prototype,"viewModel",void 0),Ep=g([J("esri.widgets.Feature.FeatureContent")],Ep);const db=Ep;let al=class extends Be{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i==null||i.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const l=n.clone();l.label=Iz(l,e),r.push(l)}),r}};g([S()],al.prototype,"attributes",void 0),g([S({type:[ZD]})],al.prototype,"expressionInfos",void 0),g([S()],al.prototype,"description",void 0),g([S({type:[Tm]})],al.prototype,"fieldInfos",void 0),g([S({readOnly:!0})],al.prototype,"formattedFieldInfos",null),g([S()],al.prototype,"title",void 0),al=g([J("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],al);const M_=al,_pe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function xpe(t){let e=null;return _pe.some(i=>(i.pattern.test(t)&&(e=i),!!e)),e}function Spe(t,e){if(typeof e!="string"||!e)return e;const i=xpe(e);if(!i)return e;const r=e.match(i.pattern),n=r&&r[2],l=Bn(Bn(i.label,{messages:t,hierPart:n}),{appName:i.appName}),d=i.target?` target="${i.target}"`:"",y=i.target==="_blank"?' rel="noreferrer"':"";return e.replace(i.pattern,`<a${d} href="$1"${y}>${l}</a>`)}const Wg="esri-feature-fields",zf={base:Wg,fieldHeader:`${Wg}__field-header`,fieldData:`${Wg}__field-data`,fieldDataDate:`${Wg}__field-data--date`,esriTable:"esri-widget__table"};let bo=class extends kr{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new M_,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new S_,this.addHandles(me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),st))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,i){const{attributes:r}=this.viewModel,n=e.fieldName,l=e.label||n,d=r?r[n]==null?"":r[n]:"",y=!(!e.format||!e.format.dateFormat),b=typeof d=="number"&&!y?this._forceLTR(d):Spe(this.messagesURIUtils,d),x={[zf.fieldDataDate]:y};return X("tr",{key:`fields-element-info-row-${n}-${i}`},X("th",{key:`fields-element-info-row-header-${n}-${i}`,class:zf.fieldHeader,innerHTML:l}),X("td",{key:`fields-element-info-row-data-${n}-${i}`,class:this.classes(zf.fieldData,x),innerHTML:b}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?X("table",{class:zf.esriTable,summary:this.messages.fieldsSummary},X("tbody",null,e.map((i,r)=>this.renderFieldInfo(i,r)))):null}render(){var e;return X("div",{class:zf.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};g([S()],bo.prototype,"attributes",null),g([S()],bo.prototype,"description",null),g([S()],bo.prototype,"expressionInfos",null),g([S()],bo.prototype,"fieldInfos",null),g([S()],bo.prototype,"title",null),g([S({type:M_,nonNullable:!0})],bo.prototype,"viewModel",void 0),g([S(),Er("esri/widgets/Feature/t9n/Feature")],bo.prototype,"messages",void 0),g([S(),Er("esri/widgets/support/t9n/uriUtils")],bo.prototype,"messagesURIUtils",void 0),bo=g([J("esri.widgets.Feature.FeatureFields")],bo);const Rz=bo,Mpe=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,$pe=/^-?(\d+)(\.(\d+))?$/i;function Tpe(t,e){return t-e}function Ipe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function Epe(t,e,i,r,n){const l=Ape(t,e,i,r),d=l.previous==null||l.previous<=n,y=l.next==null||l.next<=n;return d&&y||l.previous+l.next<=2*n}function jz(t){const e=String(t),i=e.match($pe);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],l=r[1];if(n&&l){const d=Number(n);let y=Number(l);const b=y>0;b||(y=Math.abs(y));const x=jz(d);return b?(x.integer+=y,y>x.fractional?x.fractional=0:x.fractional-=y):(x.fractional+=y,y>x.integer?x.integer=1:x.integer-=y),x}}return{integer:0,fractional:0}}function Ape(t,e,i,r){const n={previous:null,next:null};if(i!=null){const l=t-i,d=e-i-l;n.previous=Math.floor(Math.abs(100*d/l))}if(r!=null){const l=r-t,d=r-e-l;n.next=Math.floor(Math.abs(100*d/l))}return n}function jSe(t,e={}){const i=t.slice(0),{tolerance:r=2,strictBounds:n=!1,indexes:l=i.map((d,y)=>y)}=e;l.sort(Tpe);for(let d=0;d<l.length;d++){const y=l[d],b=i[y],x=y===0?null:i[y-1],$=y===i.length-1?null:i[y+1],E=jz(b).fractional;if(E){let k,P=0,D=!1;for(;P<=E&&!D;){const L=Ipe(b,P);k=n&&d===0?L[1]:L[0],D=Epe(b,k,x,$,r),P++}D&&(i[y]=k)}}return i}const kpe={maximumFractionDigits:20};function Ppe(t){return wh(t,kpe)}var pS;let Mc=pS=class extends ve{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new pS({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};g([S({type:Ne,json:{type:[Ct],write:!0}})],Mc.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],Mc.prototype,"label",void 0),g([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Mc.prototype,"value",void 0),g([Ae("value")],Mc.prototype,"writeValue",null),Mc=pS=g([J("esri.renderers.visualVariables.support.ColorStop")],Mc);const Cpe=Mc;function $_(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ope(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Lpe(t,e,i,r,n,l,d,y,b,x,$,E,k,P,D,L){const N=new Float32Array(16);return N[0]=t,N[1]=e,N[2]=i,N[3]=r,N[4]=n,N[5]=l,N[6]=d,N[7]=y,N[8]=b,N[9]=x,N[10]=$,N[11]=E,N[12]=k,N[13]=P,N[14]=D,N[15]=L,N}function Dpe(t,e){return new Float32Array(t,e,16)}const Rpe=$_();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Rpe,clone:Ope,create:$_,createView:Dpe,fromValues:Lpe},Symbol.toStringTag,{value:"Module"}));const jpe=(t,e)=>{const i=Fh(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Gl(i,i)},Fpe=(t,e)=>{const i=Fh(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Gl(i,i)},Npe=(t,e)=>{const i=1-e,r=Fh(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Gl(r,r)},zpe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=Fh(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Gl(n,n)},Vpe=(t,e)=>{const i=1-2*e,r=Fh(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Gl(r,r)},Bpe=(t,e)=>{const i=Fh(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Gl(i,i)},Gpe=(t,e)=>{const i=1-e,r=Fh(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Gl(r,r)};let Fz=class Nz{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Os(e.strength,i.strength,r),this.radius=Os(e.radius,i.radius,r),this.threshold=Os(e.threshold,i.threshold,r)}clone(){return new Nz(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:xy(this.radius),strength:this.strength,threshold:this.threshold}}},zz=class Vz{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Os(e.radius,i.radius,r))}clone(){return new Vz(this.radius)}toJSON(){return{type:"blur",radius:xy(this.radius)}}},fS=class Bz{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Os(e.amount,i.amount,r),this._updateMatrix()}clone(){return new Bz(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||$_();switch(this.type){case"brightness":this._colorMatrix=jpe(e,this.amount);break;case"contrast":this._colorMatrix=Fpe(e,this.amount);break;case"grayscale":this._colorMatrix=Npe(e,this.amount);break;case"invert":this._colorMatrix=Vpe(e,this.amount);break;case"saturate":this._colorMatrix=Bpe(e,this.amount);break;case"sepia":this._colorMatrix=Gpe(e,this.amount)}}},Gz=class Uz{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Os(e.offsetX,i.offsetX,r),this.offsetY=Os(e.offsetY,i.offsetY,r),this.blurRadius=Os(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Os(e.color[0],i.color[0],r)),this.color[1]=Math.round(Os(e.color[1],i.color[1],r)),this.color[2]=Math.round(Os(e.color[2],i.color[2],r)),this.color[3]=Os(e.color[3],i.color[3],r)}clone(){return new Uz(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:xy(this.offsetX),yoffset:xy(this.offsetY),blurRadius:xy(this.blurRadius),color:e}}},qz=class Hz{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Os(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Hz(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||$_();this._colorMatrix=zpe(e,this.angle)}},Wz=class Jz{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Os(e.amount,i.amount,r)}clone(){return new Jz(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Os(t,e,i){return t+(e-t)*i}function xy(t){return Math.round(1e3*Da(t))/1e3}function Upe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new fS(t.type,0);case"saturate":case"brightness":case"contrast":return new fS(t.type,1);case"opacity":return new Wz(1);case"hue-rotate":return new qz(0);case"blur":return new zz(0);case"drop-shadow":return new Gz(0,0,0,[...zM("transparent")]);case"bloom":return new Fz(0,0,1)}}function qpe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function Hpe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(Upe(i[n]))}function Wpe(t){const e=t[0];return!!e&&"type"in e}var lA,uA,yS={exports:{}};yS.exports,uA=function(){function t(n,l){function d(){this.constructor=n}d.prototype=l.prototype,n.prototype=new d}function e(n,l,d,y){var b=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(b,e.prototype),b.expected=l,b.found=d,b.location=y,b.name="SyntaxError",b}function i(n,l,d){return d=d||" ",n.length>l?n:(l-=n.length,n+(d+=d.repeat(l)).slice(0,l))}function r(n,l){var d,y={},b=(l=l!==void 0?l:{}).grammarSource,x={start:Ci},$=Ci,E="none",k=")",P=",",D="(",L="%",N="px",B="cm",W="mm",H="in",Y="pt",ie="pc",ne="deg",he="rad",de="grad",be="turn",we="#",$e=".",ke="e",Ge=/^[ \t\n\r]/,Fe=/^[a-z\-]/,ut=/^[0-9a-fA-F]/,ii=/^[+\-]/,Ze=/^[0-9]/,Xe=xe("none"),ri=ye("none",!1),Jn=ye(")",!1),Yn=ye(",",!1),Ss=xe("whitespace"),dn=pe([" ","	",`
`,"\r"],!1,!1),Vd=xe("function"),gf=ye("(",!1),vf=xe("identifier"),Xm=pe([["a","z"],"-"],!1,!1),W_=xe("percentage"),J_=ye("%",!1),Y_=xe("length"),K_=ye("px",!1),Z_=ye("cm",!1),Qm=ye("mm",!1),X_=ye("in",!1),Q_=ye("pt",!1),e3=ye("pc",!1),Hi=xe("angle"),q=ye("deg",!1),Fr=ye("rad",!1),eg=ye("grad",!1),Et=ye("turn",!1),Ti=xe("number"),Kn=xe("color"),ea=ye("#",!1),Zn=pe([["0","9"],["a","f"],["A","F"]],!1,!1),ta=pe(["+","-"],!1,!1),Xn=pe([["0","9"]],!1,!1),tg=ye(".",!1),Va=ye("e",!1),Ie=function(){return[]},Hl=function(Q,fe){return{type:"function",name:Q,parameters:fe||[]}},c=function(Q,fe){return fe.length>0?MU(Q,fe,3):[Q]},C=function(Q){return{type:"quantity",value:Q.value,unit:Q.unit}},w=function(Q){return{type:"color",colorType:Q.type,value:Q.value}},h=function(Q){return Q},a=function(){return ue()},s=function(Q){return{value:Q,unit:"%"}},o=function(Q){return{value:Q,unit:"px"}},u=function(Q){return{value:Q,unit:"cm"}},p=function(Q){return{value:Q,unit:"mm"}},f=function(Q){return{value:Q,unit:"in"}},m=function(Q){return{value:Q,unit:"pt"}},v=function(Q){return{value:Q,unit:"pc"}},_=function(Q){return{value:Q,unit:"deg"}},M=function(Q){return{value:Q,unit:"rad"}},T=function(Q){return{value:Q,unit:"grad"}},A=function(Q){return{value:Q,unit:"turn"}},O=function(Q){return{value:Q,unit:null}},R=function(){return{type:"hex",value:ue()}},j=function(Q){return{type:"function",value:Q}},z=function(){return{type:"named",value:ue()}},V=function(){return parseFloat(ue())},F=0,G=0,Z=[{line:1,column:1}],K=0,re=[],te=0;if("startRule"in l){if(!(l.startRule in x))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');$=x[l.startRule]}function ue(){return n.substring(G,F)}function ye(Q,fe){return{type:"literal",text:Q,ignoreCase:fe}}function pe(Q,fe,Me){return{type:"class",parts:Q,inverted:fe,ignoreCase:Me}}function De(){return{type:"end"}}function xe(Q){return{type:"other",description:Q}}function Qe(Q){var fe,Me=Z[Q];if(Me)return Me;for(fe=Q-1;!Z[fe];)fe--;for(Me={line:(Me=Z[fe]).line,column:Me.column};fe<Q;)n.charCodeAt(fe)===10?(Me.line++,Me.column=1):Me.column++,fe++;return Z[Q]=Me,Me}function We(Q,fe,Me){var mt=Qe(Q),Wi=Qe(fe),Zt={source:b,start:{offset:Q,line:mt.line,column:mt.column},end:{offset:fe,line:Wi.line,column:Wi.column}};return Me&&b&&typeof b.offset=="function"&&(Zt.start=b.offset(Zt.start),Zt.end=b.offset(Zt.end)),Zt}function Ce(Q){F<K||(F>K&&(K=F,re=[]),re.push(Q))}function Jt(Q,fe,Me){return new e(e.buildMessage(Q,fe),Q,fe,Me)}function Ci(){var Q;return(Q=Kt())===y&&(Q=$t()),Q}function Kt(){var Q,fe;return te++,Q=F,ct(),n.substr(F,4)===E?(fe=E,F+=4):(fe=y,te===0&&Ce(ri)),fe!==y?(ct(),G=Q,Q=Ie()):(F=Q,Q=y),te--,Q===y&&te===0&&Ce(Xe),Q}function $t(){var Q,fe;if(Q=[],(fe=Tt())!==y)for(;fe!==y;)Q.push(fe),fe=Tt();else Q=y;return Q}function Tt(){var Q,fe,Me,mt;return Q=F,ct(),(fe=zs())!==y?(ct(),(Me=pt())===y&&(Me=null),ct(),n.charCodeAt(F)===41?(mt=k,F++):(mt=y,te===0&&Ce(Jn)),mt!==y?(ct(),G=Q,Q=Hl(fe,Me)):(F=Q,Q=y)):(F=Q,Q=y),Q}function pt(){var Q,fe,Me,mt,Wi,Zt,pn,ig;if(Q=F,(fe=si())!==y){for(Me=[],mt=F,Wi=ct(),n.charCodeAt(F)===44?(Zt=P,F++):(Zt=y,te===0&&Ce(Yn)),Zt===y&&(Zt=null),pn=ct(),(ig=si())!==y?mt=Wi=[Wi,Zt,pn,ig]:(F=mt,mt=y);mt!==y;)Me.push(mt),mt=F,Wi=ct(),n.charCodeAt(F)===44?(Zt=P,F++):(Zt=y,te===0&&Ce(Yn)),Zt===y&&(Zt=null),pn=ct(),(ig=si())!==y?mt=Wi=[Wi,Zt,pn,ig]:(F=mt,mt=y);G=Q,Q=c(fe,Me)}else F=Q,Q=y;return Q}function si(){var Q,fe;return Q=F,(fe=Pr())===y&&(fe=Ot())===y&&(fe=Bd())===y&&(fe=Gd()),fe!==y&&(G=Q,fe=C(fe)),(Q=fe)===y&&(Q=F,(fe=Ud())!==y&&(G=Q,fe=w(fe)),Q=fe),Q}function ct(){var Q,fe;for(te++,Q=[],Ge.test(n.charAt(F))?(fe=n.charAt(F),F++):(fe=y,te===0&&Ce(dn));fe!==y;)Q.push(fe),Ge.test(n.charAt(F))?(fe=n.charAt(F),F++):(fe=y,te===0&&Ce(dn));return te--,fe=y,te===0&&Ce(Ss),Q}function zs(){var Q,fe,Me;return te++,Q=F,(fe=vt())!==y?(n.charCodeAt(F)===40?(Me=D,F++):(Me=y,te===0&&Ce(gf)),Me!==y?(G=Q,Q=h(fe)):(F=Q,Q=y)):(F=Q,Q=y),te--,Q===y&&(fe=y,te===0&&Ce(Vd)),Q}function vt(){var Q,fe,Me;if(te++,Q=F,fe=[],Fe.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(Xm)),Me!==y)for(;Me!==y;)fe.push(Me),Fe.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(Xm));else fe=y;return fe!==y&&(G=Q,fe=a()),te--,(Q=fe)===y&&(fe=y,te===0&&Ce(vf)),Q}function Pr(){var Q,fe,Me;return te++,Q=F,ct(),(fe=Nr())!==y?(n.charCodeAt(F)===37?(Me=L,F++):(Me=y,te===0&&Ce(J_)),Me!==y?(G=Q,Q=s(fe)):(F=Q,Q=y)):(F=Q,Q=y),te--,Q===y&&te===0&&Ce(W_),Q}function Ot(){var Q,fe,Me;return te++,Q=F,ct(),(fe=Nr())!==y?(n.substr(F,2)===N?(Me=N,F+=2):(Me=y,te===0&&Ce(K_)),Me!==y?(G=Q,Q=o(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,ct(),(fe=Nr())!==y?(n.substr(F,2)===B?(Me=B,F+=2):(Me=y,te===0&&Ce(Z_)),Me!==y?(G=Q,Q=u(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,ct(),(fe=Nr())!==y?(n.substr(F,2)===W?(Me=W,F+=2):(Me=y,te===0&&Ce(Qm)),Me!==y?(G=Q,Q=p(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,ct(),(fe=Nr())!==y?(n.substr(F,2)===H?(Me=H,F+=2):(Me=y,te===0&&Ce(X_)),Me!==y?(G=Q,Q=f(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,ct(),(fe=Nr())!==y?(n.substr(F,2)===Y?(Me=Y,F+=2):(Me=y,te===0&&Ce(Q_)),Me!==y?(G=Q,Q=m(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,ct(),(fe=Nr())!==y?(n.substr(F,2)===ie?(Me=ie,F+=2):(Me=y,te===0&&Ce(e3)),Me!==y?(G=Q,Q=v(fe)):(F=Q,Q=y)):(F=Q,Q=y)))))),te--,Q===y&&te===0&&Ce(Y_),Q}function Bd(){var Q,fe,Me;return te++,Q=F,(fe=Nr())!==y?(n.substr(F,3)===ne?(Me=ne,F+=3):(Me=y,te===0&&Ce(q)),Me!==y?(G=Q,Q=_(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,(fe=Nr())!==y?(n.substr(F,3)===he?(Me=he,F+=3):(Me=y,te===0&&Ce(Fr)),Me!==y?(G=Q,Q=M(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,(fe=Nr())!==y?(n.substr(F,4)===de?(Me=de,F+=4):(Me=y,te===0&&Ce(eg)),Me!==y?(G=Q,Q=T(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,(fe=Nr())!==y?(n.substr(F,4)===be?(Me=be,F+=4):(Me=y,te===0&&Ce(Et)),Me!==y?(G=Q,Q=A(fe)):(F=Q,Q=y)):(F=Q,Q=y)))),te--,Q===y&&(fe=y,te===0&&Ce(Hi)),Q}function Gd(){var Q,fe;return te++,Q=F,ct(),(fe=Nr())!==y?(G=Q,Q=O(fe)):(F=Q,Q=y),te--,Q===y&&te===0&&Ce(Ti),Q}function Ud(){var Q,fe,Me,mt;if(te++,Q=F,n.charCodeAt(F)===35?(fe=we,F++):(fe=y,te===0&&Ce(ea)),fe!==y){if(Me=[],ut.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(Zn)),mt!==y)for(;mt!==y;)Me.push(mt),ut.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(Zn));else Me=y;Me!==y?(G=Q,Q=R()):(F=Q,Q=y)}else F=Q,Q=y;return Q===y&&(Q=F,(fe=Tt())!==y&&(G=Q,fe=j(fe)),(Q=fe)===y&&(Q=F,(fe=vt())!==y&&(G=Q,fe=z()),Q=fe)),te--,Q===y&&(fe=y,te===0&&Ce(Kn)),Q}function Nr(){var Q,fe,Me,mt,Wi,Zt,pn;for(Q=F,ii.test(n.charAt(F))?(n.charAt(F),F++):te===0&&Ce(ta),fe=F,Me=[],Ze.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(Xn));mt!==y;)Me.push(mt),Ze.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(Xn));if(n.charCodeAt(F)===46?(mt=$e,F++):(mt=y,te===0&&Ce(tg)),mt!==y){if(Wi=[],Ze.test(n.charAt(F))?(Zt=n.charAt(F),F++):(Zt=y,te===0&&Ce(Xn)),Zt!==y)for(;Zt!==y;)Wi.push(Zt),Ze.test(n.charAt(F))?(Zt=n.charAt(F),F++):(Zt=y,te===0&&Ce(Xn));else Wi=y;Wi!==y?fe=Me=[Me,mt,Wi]:(F=fe,fe=y)}else F=fe,fe=y;if(fe===y)if(fe=[],Ze.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(Xn)),Me!==y)for(;Me!==y;)fe.push(Me),Ze.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(Xn));else fe=y;if(fe!==y){if(Me=F,n.charCodeAt(F)===101?(mt=ke,F++):(mt=y,te===0&&Ce(Va)),mt!==y){if(ii.test(n.charAt(F))?(Wi=n.charAt(F),F++):(Wi=y,te===0&&Ce(ta)),Wi===y&&(Wi=null),Zt=[],Ze.test(n.charAt(F))?(pn=n.charAt(F),F++):(pn=y,te===0&&Ce(Xn)),pn!==y)for(;pn!==y;)Zt.push(pn),Ze.test(n.charAt(F))?(pn=n.charAt(F),F++):(pn=y,te===0&&Ce(Xn));else Zt=y;Zt!==y?Me=mt=[mt,Wi,Zt]:(F=Me,Me=y)}else F=Me,Me=y;Me===y&&(Me=null),G=Q,Q=V()}else F=Q,Q=y;return Q}function SU(Q,fe){return Q.map(function(Me){return Me[fe]})}function MU(Q,fe,Me){return[Q].concat(SU(fe,Me))}if((d=$())!==y&&F===n.length)return d;throw d!==y&&F<n.length&&Ce(De()),Jt(re,K<n.length?n.charAt(K):null,K<n.length?We(K,K+1):We(K,K))}return t(e,Error),e.prototype.format=function(n){var l="Error: "+this.message;if(this.location){var d,y=null;for(d=0;d<n.length;d++)if(n[d].source===this.location.source){y=n[d].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,x=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,$=this.location.source+":"+x.line+":"+x.column;if(y){var E=this.location.end,k=i("",x.line.toString().length," "),P=y[b.line-1],D=(b.line===E.line?E.column:P.length+1)-b.column||1;l+=`
 --> `+$+`
`+k+` |
`+x.line+" | "+P+`
`+k+" | "+i("",b.column-1," ")+i("",D,"^")}else l+=`
 at `+$}return l},e.buildMessage=function(n,l){var d={literal:function(P){return'"'+b(P.text)+'"'},class:function(P){var D=P.parts.map(function(L){return Array.isArray(L)?x(L[0])+"-"+x(L[1]):x(L)});return"["+(P.inverted?"^":"")+D.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(P){return P.description}};function y(P){return P.charCodeAt(0).toString(16).toUpperCase()}function b(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(D){return"\\x0"+y(D)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(D){return"\\x"+y(D)})}function x(P){return P.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(D){return"\\x0"+y(D)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(D){return"\\x"+y(D)})}function $(P){return d[P.type](P)}function E(P){var D,L,N=P.map($);if(N.sort(),N.length>0){for(D=1,L=1;D<N.length;D++)N[D-1]!==N[D]&&(N[L]=N[D],L++);N.length=L}switch(N.length){case 1:return N[0];case 2:return N[0]+" or "+N[1];default:return N.slice(0,-1).join(", ")+", or "+N[N.length-1]}}function k(P){return P?'"'+b(P)+'"':"end of input"}return"Expected "+E(n)+" but "+k(l)+" found."},{SyntaxError:e,parse:r}},(lA=yS).exports&&(lA.exports=uA());var Jpe=yS.exports;function Yz(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=hA(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new se("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:hA(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!qpe(e[i].effects,e[i+1].effects))throw new se("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Hpe(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function hA(t){let e;if(!t)return[];try{e=Jpe.parse(t)}catch(i){throw new se("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Ype(i))}function Ype(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Kpe(t);case"opacity":return Zpe(t);case"hue-rotate":return Xpe(t);case"blur":return Qpe(t);case"drop-shadow":return e0e(t);case"bloom":return t0e(t)}}catch(e){throw e.details.filter=t,e}throw new se("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Kpe(t){let e=1;return hf(t.parameters,1),t.parameters.length===1&&(e=ko(t.parameters[0])),new fS(t.name,e)}function Zpe(t){let e=1;return hf(t.parameters,1),t.parameters.length===1&&(e=ko(t.parameters[0])),new Wz(e)}function Xpe(t){let e=0;return hf(t.parameters,1),t.parameters.length===1&&(e=a0e(t.parameters[0])),new qz(e)}function Qpe(t){let e=0;return hf(t.parameters,1),t.parameters.length===1&&(e=b$(t.parameters[0]),Gm(e,t.parameters[0])),new zz(e)}function e0e(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new se("effect:type-error","Accepts only one color",{});i=l0e(r)}else{const n=b$(r);if(Object.isFrozen(e))throw new se("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&Gm(n,r)}if(e.length<2||e.length>3)throw new se("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Gz(e[0],e[1],e[2]||0,i||Kz("black"))}function t0e(t){let e=1,i=0,r=0;return hf(t.parameters,3),t.parameters[0]&&(e=ko(t.parameters[0])),t.parameters[1]&&(i=b$(t.parameters[1]),Gm(i,t.parameters[1])),t.parameters[2]&&(r=ko(t.parameters[2])),new Fz(e,i,r)}function hf(t,e){if(t.length>e)throw new se("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function T_(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in v$)return"<length>";if(t.unit in g$)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Gm(t,e){if(t<0)throw new se("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function i0e(t){if(t.type!=="quantity"||t.unit!==null)throw new se("effect:type-error",`Expected <double>, Actual: ${T_(t)}`,{term:t})}function r0e(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new se("effect:type-error",`Expected <double> or <percentage>, Actual: ${T_(t)}`,{term:t})}const g$={deg:1,grad:.9,rad:180/Math.PI,turn:360};function s0e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&g$[t.unit]!=null))throw new se("effect:type-error",`Expected <angle>, Actual: ${T_(t)}`,{term:t})}const v$={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function n0e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&v$[t.unit]!=null))throw new se("effect:type-error",`Expected <length>, Actual: ${T_(t)}`,{term:t})}function ko(t){r0e(t);const e=t.value;return Gm(e,t),t.unit==="%"?.01*e:e}function o0e(t){return i0e(t),Gm(t.value,t),t.value}function a0e(t){return s0e(t),t.value*g$[t.unit]||0}function b$(t){return n0e(t),t.value*v$[t.unit]||0}function l0e(t){switch(t.colorType){case"hex":return pY(t.value);case"named":return Kz(t.value);case"function":return c0e(t.value)}}function Kz(t){if(!RO(t))throw new se("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return dY(t)}const u0e=/^rgba?/i,h0e=/^hsla?/i;function c0e(t){if(hf(t.parameters,4),u0e.test(t.name))return[ko(t.parameters[0]),ko(t.parameters[1]),ko(t.parameters[2]),t.parameters[3]?ko(t.parameters[3]):1];if(h0e.test(t.name))return jO(o0e(t.parameters[0]),ko(t.parameters[1]),ko(t.parameters[2]),t.parameters[3]?ko(t.parameters[3]):1);throw new se("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function w$(t,e,i){var r;try{return p0e(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function _$(t,e,i,r){try{const n=d0e(t);es(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function d0e(t){const e=Yz(t);return e?Wpe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function p0e(t){if(!t||t.length===0)return null;if(f0e(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:mS(i.value)});return e}return mS(t)}function f0e(t){const e=t[0];return!!e&&"scale"in e}function mS(t){if(!t||!t.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Wa(i,"amount")];break;case"blur":r=[Wa(i,"radius","pt")];break;case"hue-rotate":r=[Wa(i,"angle","deg")];break;case"drop-shadow":r=[Wa(i,"xoffset","pt"),Wa(i,"yoffset","pt"),Wa(i,"blurRadius","pt"),y0e(i,"color")];break;case"bloom":r=[Wa(i,"strength"),Wa(i,"radius","pt"),Wa(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;Yz(n),e.push(n)}return e.join(" ")}function Wa(t,e,i){if(t[e]==null)throw new se("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function y0e(t,e){if(t[e]==null)throw new se("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}function m0e(t){return typeof t=="function"}function FSe(t,e,i,r){return m0e(t)?t(e,i,r):t}function NSe(t){return[t.r,t.g,t.b,t.a]}const g0e=` /-,
`;function cA(t){let e=t.length;for(;e--;)if(!g0e.includes(t.charAt(e)))return!1;return!0}function v0e(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const l=t.substr(r,n-r);i.push([l,null,cA(l)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const l=e[t.substr(r,n-r)];l&&i.push([null,l,!1])}r=n+1}}while(n!==-1);if(r<t.length-1){const l=t.substr(r);i.push([l,null,cA(l)])}return i}function b0e(t,e,i){let r="",n=null;for(const l of e){const[d,y,b]=l;if(d)b?n=d:(n&&(r+=n,n=null),r+=d);else{const x=t.attributes[y];x&&(n&&(r+=n,n=null),r+=x)}}return w0e(r,i)}function zSe(t,e,i){const r=v0e(e,t);return n=>b0e(n,r,i)}function w0e(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function VSe(t,e,i,r,n,l,d=!0){const y=e/n,b=i/l,x=Math.ceil(y/2),$=Math.ceil(b/2);for(let E=0;E<l;E++)for(let k=0;k<n;k++){const P=4*(k+(d?l-E-1:E)*n);let D=0,L=0,N=0,B=0,W=0,H=0,Y=0;const ie=(E+.5)*b;for(let ne=Math.floor(E*b);ne<(E+1)*b;ne++){const he=Math.abs(ie-(ne+.5))/$,de=(k+.5)*y,be=he*he;for(let we=Math.floor(k*y);we<(k+1)*y;we++){let $e=Math.abs(de-(we+.5))/x;const ke=Math.sqrt(be+$e*$e);ke>=-1&&ke<=1&&(D=2*ke*ke*ke-3*ke*ke+1,D>0&&($e=4*(we+ne*e),Y+=D*t[$e+3],N+=D,t[$e+3]<255&&(D=D*t[$e+3]/250),B+=D*t[$e],W+=D*t[$e+1],H+=D*t[$e+2],L+=D))}}r[P]=B/L,r[P+1]=W/L,r[P+2]=H/L,r[P+3]=Y/N}}function Zz(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function Xz(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function gS(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function vS(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function _0e(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function c2(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const BSe=(t,e=0)=>t==null||isNaN(t)?e:t,GSe=t=>t.tintColor?Zz(t.tintColor):{r:255,g:255,b:255,a:1},USe=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function qSe(){return le(()=>import("./geometryEngineJSON-5cdd0d4b.js"),["assets/geometryEngineJSON-5cdd0d4b.js","assets/geometryEngineJSON-434198e4.js","assets/json-48e3ea08.js"])}function HSe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function WSe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function JSe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function YSe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function dA(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=dA(e);if(i!=null)return i}break;case"CIMTextSymbol":return dA(t.symbol);case"CIMSolidFill":return t.color}}function pA(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=pA(i);if(r!=null)return r}break}case"CIMTextSymbol":return pA(t.symbol);case"CIMSolidStroke":return t.color}}function fA(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=fA(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return fA(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function KSe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function ZSe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function XSe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const QSe=t=>t.includes("data:image/svg+xml");function e6e(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Qz(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(i&&t.effects)for(const n of t.effects)M0e(n,e);if(t.symbolLayers)for(const n of t.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":x0e(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":Qz(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}}else t.height!=null&&(t.height*=e)}function x0e(t,e,i){if(t&&(t.markerPlacement&&S0e(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||Qz(r.symbol,e,!0,i)}function S0e(t,e){switch(c2(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function M0e(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function eV(t){const e=[];return bS(Xz(t),e),e.length?new Ne(Zz(e[0])):null}function bS(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const l of i.symbolLayers)if(!(l.colorLocked||r&&(vS(l)||gS(l)&&l.markerPlacement&&c2(l.markerPlacement))))switch(l.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":l.tintColor&&yA(e,l.tintColor);break;case"CIMVectorMarker":(n=l.markerGraphics)==null||n.forEach(d=>{bS(d.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":yA(e,l.color);break;case"CIMHatchFill":bS(l.lineSymbol,e)}}}function yA(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function t6e(t,e,i){e instanceof Ne||(e=new Ne(e));const r=Xz(t);r&&wS(r,e,i)}function wS(t,e,i){var l;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const d of r.symbolLayers){if(d.colorLocked)continue;if(n){if(i){const{layersToColor:b}=i;if((vS(d)||gS(d)&&d.markerPlacement&&c2(d.markerPlacement))&&b==="fill"||_0e(d)&&b==="outline")continue}else if(vS(d)||gS(d)&&d.markerPlacement&&c2(d.markerPlacement))continue}const y=e.toArray();switch(d.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":d.tintColor=y;break;case"CIMVectorMarker":(l=d.markerGraphics)==null||l.forEach(b=>{wS(b.symbol,e,i)});break;case"CIMSolidStroke":case"CIMSolidFill":d.color=y;break;case"CIMHatchFill":wS(d.lineSymbol,e,i)}}}const w5=-3;var Uu;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Uu||(Uu={}));let i6e=class{constructor(e,i,r){this.name=e,this._storage=i,this.id=T0e+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,r,n=0){this._storage.put(this,e,i,r,n)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this,e,i,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},$0e=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new sd,this._users=new sd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,r,n,l){i=e.id+i;const d=this._db.get(i);if(d&&(this._size-=d.size,e.size-=d.size,this._db.delete(i),d.entry!==r&&this._notifyRemove(i,d.entry,Uu.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,Uu.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const y=1+Math.max(l,w5)-w5;this._db.set(i,{entry:r,size:n,lifetime:y,lives:y}),this._size+=n,e.size+=n,this._checkSizeLimits()}updateSize(e,i,r,n){i=e.id+i;const l=this._db.get(i);if(l&&l.entry===r){for(this._size-=l.size,e.size-=l.size;n>this._maxSize;){const d=this._notifyRemove(i,r,Uu.SOME);if(!(d!=null&&d>0))return void this._db.delete(i);n=d}l.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((d,y)=>{const b=d.lifetime;r[b]=(r[b]||0)+d.size,this._users.forAll(x=>{const{id:$,name:E}=x;if(y.startsWith($)){const k=i[E]||0;i[E]=k+d.size}})});const n={};this._users.forAll(d=>{const y=d.name;if("hitRate"in d&&typeof d.hitRate=="number"&&!isNaN(d.hitRate)&&d.hitRate>0){const b=i[y]||0;i[y]=b,n[y]=Math.round(100*d.hitRate)+"%"}else n[y]="0%"});const l=Object.keys(i);l.sort((d,y)=>i[y]-i[d]),l.forEach(d=>e[d]=Math.round(i[d]/2**20)+"MB / "+n[d]);for(let d=r.length-1;d>=0;--d){const y=r[d];y&&(e["Priority "+(d+w5-1)]=Math.round(y/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,Uu.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,Uu.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let n;return this._removeFuncs.some(l=>{if(e.startsWith(l[0])){const d=l[1](i,r);return typeof d=="number"&&(n=d),!0}return!1}),n}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,r]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,r,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,r=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,Uu.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},T0e=0,tV=class{constructor(e,i){this._storage=new $0e,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}};const iV="picture-fill",rV="simple-fill",I0e="simple-line",sV="simple-marker",E0e="text",A0e="cim",_5=new tV(1e3);function o6e(t){const e=t.style;let i=null;if(t)switch(t.type){case sV:e!=="cross"&&e!=="x"&&(i=t.color);break;case rV:e==="solid"?i=t.color:e!=="none"&&(i={type:"pattern",x:0,y:0,src:It(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case iV:i={type:"pattern",src:t.url,width:Rr(t.width)*t.xscale,height:Rr(t.height)*t.yscale,x:Rr(t.xoffset),y:Rr(t.yoffset)};break;case E0e:i=t.color;break;case A0e:i=eV(t)}return i}function k0e(t,e){const i=t+"-"+e;return _5.get(i)!==void 0?Promise.resolve(_5.get(i)):Wt(t,{responseType:"image"}).then(r=>{const n=r.data,l=n.naturalWidth,d=n.naturalHeight,y=document.createElement("canvas");y.width=l,y.height=d;const b=y.getContext("2d");b.fillStyle=e,b.fillRect(0,0,l,d),b.globalCompositeOperation="destination-in",b.drawImage(n,0,0);const x=y.toDataURL();return _5.put(i,x),x})}function x$(t){if(!t)return null;let e=null;switch(t.type){case rV:case iV:case sV:e=x$(t.outline);break;case I0e:{const i=Rr(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:S$(t.style),width:i,cap:t.cap,join:t.join==="miter"?Rr(t.miterLimit):t.join});break}default:e=null}return e}const S$=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),P0e=new Ne([128,128,128]),C0e=new Ne("white");function O0e(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function a6e(t){var e;if(!t)return 0;if(Fl(t)){const i=O0e(t);return i??0}return Da((e=x$(t))==null?void 0:e.width)}function L0e(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function D0e(t){return fr(t.resource).href}function ip(t,e){if(!t)return null;let i=null;return Fl(t)?i=R0e(t):l_(t)&&(i=t.type==="cim"?eV(t):t.color?new Ne(t.color):null),i?hm(i,e):null}function R0e(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Ne(i):null}function hm(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Ne(i)}function j0e(t,e,i){const r=t.symbolLayers;if(!r)return;const n=l=>hm(e=e??l??(i!=null?C0e:null),i);r.forEach(l=>{var d;if(l.type!=="object"||!((d=l.resource)!=null&&d.href)||e)if(l.type==="water")l.color=n(l.color);else{const y=l.material!=null?l.material.color:null,b=n(y);l.material==null?l.material=new hn({color:b}):l.material.color=b,i!=null&&"outline"in l&&l.outline!=null&&l.outline.color!=null&&(l.outline.color=hm(l.outline.color,i))}})}function F0e(t,e,i){(e=e??t.color)&&(t.color=hm(e,i)),i!=null&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=hm(t.outline.color,i))}function x5(t,e,i){t&&(e||i!=null)&&(e&&(e=new Ne(e)),Fl(t)?j0e(t,e,i):l_(t)&&F0e(t,e,i))}async function N0e(t,e){const i=t.symbolLayers;i&&await DH(i,async r=>z0e(r,e))}async function z0e(t,e){switch(t.type){case"extrude":B0e(t,e);break;case"icon":case"line":case"text":V0e(t,e);break;case"path":U0e(t,e);break;case"object":await G0e(t,e)}}function V0e(t,e){const i=nV(e);i!=null&&(t.size=i)}function nV(t){for(const e of t)if(typeof e=="number")return e;return null}function B0e(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function G0e(t,e){const{resourceSize:i,symbolSize:r}=await q0e(t),n=oV(e,i,r);t.width=Sy(e[0],r[0],i[0],n),t.depth=Sy(e[1],r[1],i[1],n),t.height=Sy(e[2],r[2],i[2],n)}function U0e(t,e){const i=oV(e,GO,[t.width,void 0,t.height]);t.width=Sy(e[0],t.width,1,i),t.height=Sy(e[2],t.height,1,i)}function oV(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const l=i[r];return l!=null?l/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return 1}async function q0e(t){const{computeObjectLayerResourceSize:e}=await le(()=>import("./symbolLayerUtils-0a591fb0.js"),[]),i=await e(t,10),{width:r,height:n,depth:l}=t,d=[r,l,n];let y=1;for(let b=0;b<3;b++){const x=d[b];if(x!=null){y=x/i[b];break}}for(let b=0;b<3;b++)d[b]==null&&(d[b]=i[b]*y);return{resourceSize:i,symbolSize:d}}function Sy(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function H0e(t,e){const i=nV(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function W0e(t,e){if(t&&e)return Fl(t)?N0e(t,e):void(l_(t)&&H0e(t,e))}function J0e(t,e,i){if(t&&e!=null)if(Fl(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=e;break;case"roll":n.roll=e;break;default:n.heading=e}})}else l_(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}function aV(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return mS(e)}async function Y0e(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}const K0e="<",Z0e=">",X0e=Jp("short-date");function Q0e(t,e,i,r){let n="";e===0?n=`${K0e} `:e===i&&(n=`${Z0e} `);let l=null;return l=r?qn(t,X0e):Ppe(t),n+l}const l6e=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function efe(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(d=>d.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:l}=await le(()=>Promise.resolve().then(()=>D_),void 0);return l(e,n)??null}async function u6e(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await efe(t)||t.color;return new cn({cap:i,color:n,width:r})}function h6e(t){return t!=null&&typeof t=="object"&&"min"in t&&"max"in t}const tfe=new Ne([64,64,64]);function lV(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,l)=>i.includes(l)?Q0e(n,l,r,e):null)}async function ife(t,e,i){let r=!1,n=[],l=[];if(t.stops){const x=t.stops;n=x.map($=>$.value),r=x.some($=>!!$.label),r&&(l=x.map($=>$.label))}const d=n[0],y=n[n.length-1];if(d==null&&y==null)return null;const b=r?null:lV(n,i??!1);return(await Promise.all(n.map(async(x,$)=>({value:x,color:t.type==="opacity"?await rfe(x,t,e):(await le(()=>Promise.resolve().then(()=>D_),void 0)).getColor(t,x),label:r?l[$]:(b==null?void 0:b[$])??""})))).reverse()}async function rfe(t,e,i){const r=new Ne(i??tfe),n=(await le(()=>Promise.resolve().then(()=>D_),void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function c6e(t){let e=!1,i=[],r=[];i=t.map(y=>y.value),e=t.some(y=>!!y.label),e&&(r=t.map(y=>y.label??""));const n=i[0],l=i[i.length-1];if(n==null&&l==null)return null;const d=e?null:lV(i,!1);return i.map((y,b)=>({value:y,color:sfe(y,t),label:e?r[b]:(d==null?void 0:d[b])??""})).reverse()}function sfe(t,e){const{startIndex:i,endIndex:r,weight:n}=nfe(t,e);if(i===r)return e[i].color;const l=Ne.blendColors(e[i].color,e[r].color,n);return new Ne(l)}function nfe(t,e){let i=0,r=e.length-1;return e.some((n,l)=>t<n.value?(r=l,!0):(i=l,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function d6e(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new Ne(r.toColor),label:"high"}):i.push({value:null,color:new Ne(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new Ne(r.fromColor),label:"low"}):i.push({value:null,color:new Ne(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new Ne(n),label:"high"},{value:e.min,color:new Ne(r),label:"low"}]}return i}var _S;let O1=_S=class extends ve{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new _S({color:this.color,ratio:this.ratio})}};g([S({type:Ne,json:{type:[Ct],default:null,write:!0}})],O1.prototype,"color",void 0),g([S({type:Number,json:{write:!0}})],O1.prototype,"ratio",void 0),O1=_S=g([J("esri.renderers.support.HeatmapColorStop")],O1);const My=O1;function ofe(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new My({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var d,y;let l="";return n===0?l=((d=t.legendOptions)==null?void 0:d.minLabel)||"low":n===i&&(l=((y=t.legendOptions)==null?void 0:y.maxLabel)||"high"),{color:r.color,label:l,ratio:r.ratio}}).reverse()}ge.getLogger("esri.renderers.support.utils");async function Bs(t,e,i){cM(t,e,()=>[]).push(...i)}async function afe(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const n=t.visualVariables.filter(l=>l.type==="color");for(const l of n){const d=(await ife(l)??[]).map(y=>y.color);await Bs(e,l.field||l.valueExpression,d)}}if(t.type==="heatmap"){const n=ofe(t).map(l=>l.color);await Bs(e,t.field||t.valueExpression,n)}else if(t.type==="pie-chart"){for(const n of t.attributes)await Bs(e,n.field||n.valueExpression,[n.color]);await Bs(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,ip(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const n of t.attributes)await Bs(e,n.field||n.valueExpression,[n.color]);await Bs(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of t.uniqueValueInfos??[])await Bs(e,n.value.toString(),[ip(n.symbol,null)]);else{const n=(t.uniqueValueInfos??[]).map(x=>ip(x.symbol,null)),{field:l,field2:d,field3:y,valueExpression:b}=t;(l||b)&&await Bs(e,l||b,n),d&&await Bs(e,d,n),y&&await Bs(e,y,n)}else if(t.type==="class-breaks"){const n=t.classBreakInfos.map(y=>ip(y.symbol,null)),{field:l,valueExpression:d}=t;await Bs(e,l??d,n)}else t.type==="simple"&&await Bs(e,"default",[ip(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Bs(e,"default",[ip(t.defaultSymbol,null)]),e.forEach((n,l)=>{const d=OU(n.filter(Boolean),(y,b)=>JSON.stringify(y)===JSON.stringify(b));e.set(l,d)}),e}var xS;let L1=xS=class extends ve{constructor(t){super(t),this.name=null,this.code=null}clone(){return new xS({name:this.name,code:this.code})}};g([S({type:String,json:{write:!0}})],L1.prototype,"name",void 0),g([S({type:[String,Number],json:{write:!0}})],L1.prototype,"code",void 0),L1=xS=g([J("esri.layers.support.CodedValue")],L1);const lfe=new _t({inherited:"inherited",codedValue:"coded-value",range:"range"});let D1=class extends ve{constructor(e){super(e),this.name=null,this.type=null}};g([S({type:String,json:{write:!0}})],D1.prototype,"name",void 0),g([Ue(lfe)],D1.prototype,"type",void 0),D1=g([J("esri.layers.support.Domain")],D1);const I_=D1;var SS;let R1=SS=class extends I_{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new SS({codedValues:ae(this.codedValues),name:this.name})}};g([S({type:[L1],json:{write:!0}})],R1.prototype,"codedValues",void 0),g([Ue({codedValue:"coded-value"})],R1.prototype,"type",void 0),R1=SS=g([J("esri.layers.support.CodedValueDomain")],R1);const uV=R1;var MS;let pb=MS=class extends I_{constructor(t){super(t),this.type="inherited"}clone(){return new MS}};g([Ue({inherited:"inherited"})],pb.prototype,"type",void 0),pb=MS=g([J("esri.layers.support.InheritedDomain")],pb);const hV=pb;var $S;let Ap=$S=class extends I_{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new $S({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};g([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],Ap.prototype,"maxValue",void 0),g([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],Ap.prototype,"minValue",void 0),g([Ue({range:"range"})],Ap.prototype,"type",void 0),Ap=$S=g([J("esri.layers.support.RangeDomain")],Ap);const cV=Ap,dV={key:"type",base:I_,typeMap:{range:cV,"coded-value":uV,inherited:hV}};function M$(t){if(!t||!t.type)return null;switch(t.type){case"range":return cV.fromJSON(t);case"codedValue":return uV.fromJSON(t);case"inherited":return hV.fromJSON(t)}return null}const ufe=new _t({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var TS;const hfe=new _t({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Yr=TS=class extends ve{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?hfe.fromJSON(i.fieldValueType):null}clone(){return new TS({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};g([S({type:String,json:{write:!0}})],Yr.prototype,"alias",void 0),g([S({type:[String,Number],json:{write:{allowNull:!0}}})],Yr.prototype,"defaultValue",void 0),g([S()],Yr.prototype,"description",void 0),g([Se("description")],Yr.prototype,"readDescription",null),g([S({types:dV,json:{read:{reader:M$},write:!0}})],Yr.prototype,"domain",void 0),g([S({type:Boolean,json:{write:!0}})],Yr.prototype,"editable",void 0),g([S({type:Ct,json:{write:!0}})],Yr.prototype,"length",void 0),g([S({type:String,json:{write:!0}})],Yr.prototype,"name",void 0),g([S({type:Boolean,json:{write:!0}})],Yr.prototype,"nullable",void 0),g([Ue(ufe)],Yr.prototype,"type",void 0),g([S()],Yr.prototype,"valueType",void 0),g([Se("valueType",["description"])],Yr.prototype,"readValueType",null),g([S({type:Boolean,json:{read:!1}})],Yr.prototype,"visible",void 0),Yr=TS=g([J("esri.layers.support.Field")],Yr);const E_=Yr;var IS;let _l=IS=class extends ve{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new IS({mapLayerId:t,gdbVersion:e})}};g([Ue({mapLayer:"map-layer"})],_l.prototype,"type",void 0),g([S({type:Ct,json:{write:!0}})],_l.prototype,"mapLayerId",void 0),g([S({type:String,json:{write:!0}})],_l.prototype,"gdbVersion",void 0),_l=IS=g([J("esri.layers.support.source.MapLayerSource")],_l);var ES;let ll=ES=class extends ve{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,l={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new ES(l)}};g([Ue({queryTable:"query-table"})],ll.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],ll.prototype,"workspaceId",void 0),g([S({type:String,json:{write:!0}})],ll.prototype,"query",void 0),g([S({type:String,json:{write:!0}})],ll.prototype,"oidFields",void 0),g([S({type:dt,json:{write:!0}})],ll.prototype,"spatialReference",void 0),g([Ue(vw)],ll.prototype,"geometryType",void 0),ll=ES=g([J("esri.layers.support.source.QueryTableDataSource")],ll);var AS;let kp=AS=class extends ve{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new AS({workspaceId:t,dataSourceName:e})}};g([Ue({raster:"raster"})],kp.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],kp.prototype,"dataSourceName",void 0),g([S({type:String,json:{write:!0}})],kp.prototype,"workspaceId",void 0),kp=AS=g([J("esri.layers.support.source.RasterDataSource")],kp);var kS;let $c=kS=class extends ve{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new kS({workspaceId:t,gdbVersion:e,dataSourceName:i})}};g([Ue({table:"table"})],$c.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],$c.prototype,"workspaceId",void 0),g([S({type:String,json:{write:!0}})],$c.prototype,"gdbVersion",void 0),g([S({type:String,json:{write:!0}})],$c.prototype,"dataSourceName",void 0),$c=kS=g([J("esri.layers.support.source.TableDataSource")],$c);var PS,CS;const cfe=rs()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Hs=PS=class extends ve{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return mA()(t,e,i)}castLeftTableSource(t){return Ca(OS(),t)}readRightTableSource(t,e,i){return mA()(t,e,i)}castRightTableSource(t){return Ca(OS(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,l={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new PS(l)}};g([Ue({joinTable:"join-table"})],Hs.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Hs.prototype,"leftTableKey",void 0),g([S({type:String,json:{write:!0}})],Hs.prototype,"rightTableKey",void 0),g([S({json:{write:!0}})],Hs.prototype,"leftTableSource",void 0),g([Se("leftTableSource")],Hs.prototype,"readLeftTableSource",null),g([xt("leftTableSource")],Hs.prototype,"castLeftTableSource",null),g([S({json:{write:!0}})],Hs.prototype,"rightTableSource",void 0),g([Se("rightTableSource")],Hs.prototype,"readRightTableSource",null),g([xt("rightTableSource")],Hs.prototype,"castRightTableSource",null),g([Ue(cfe)],Hs.prototype,"joinType",void 0),Hs=PS=g([J("esri.layers.support.source.JoinTableDataSource")],Hs);let S5=null;function mA(){return S5||(S5=W0({types:OS()})),S5}let M5=null;function OS(){return M5||(M5={key:"type",base:null,typeMap:{"data-layer":ys,"map-layer":_l}}),M5}const dfe={key:"type",base:null,typeMap:{"join-table":Hs,"query-table":ll,raster:kp,table:$c}};let ys=CS=class extends ve{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new CS({fields:t,dataSource:e})}};g([Ue({dataLayer:"data-layer"})],ys.prototype,"type",void 0),g([S({type:[E_],json:{write:!0}})],ys.prototype,"fields",void 0),g([S({types:dfe,json:{write:!0}})],ys.prototype,"dataSource",void 0),ys=CS=g([J("esri.layers.support.source.DataLayerSource")],ys),ys.from=zi(ys);function f6e(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function zd(t){return typeof t=="string"?Ui(t):ae(t)}function pfe(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const l=t[n];if(l!=null&&typeof l!="function")if(Array.isArray(l)){r[n]=[];for(let d=0;d<l.length;d++)r[n][d]=pfe(l[d])}else if(typeof l=="object")if(l.toJSON){const d=l.toJSON(i&&i[n]);r[n]=e?d:JSON.stringify(d)}else r[n]=e?l:JSON.stringify(l);else r[n]=l}return r}const Jg={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Oo({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:dt.WebMercator}),minus180Line:new Oo({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:dt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Oo({paths:[[[180,-180],[180,180]]],spatialReference:dt.WGS84}),minus180Line:new Oo({paths:[[[-180,-180],[-180,180]]],spatialReference:dt.WGS84})}};function td(t,e){return Math.ceil((t-e)/(2*e))}function pV(t,e){const i=$y(t);for(const r of i)for(const n of r)n[0]+=e;return t}function $y(t){return ad(t)?t.rings:t.paths}async function ffe(t,e,i,r){const n=zd(t),l=e[0].spatialReference,d={...r,query:{...n.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:J2(e[0]),geometries:e}),cutter:JSON.stringify(i)}},y=await Wt(n.path+"/cut",d),{cutIndexes:b,geometries:x=[]}=y.data;return{cutIndexes:b,geometries:x.map($=>{const E=bh($);return E.spatialReference=l,E})}}function yfe(t){return{geometryType:J2(t[0]),geometries:t.map(e=>e.toJSON())}}function mfe(t,e,i){const r=TZ(e);return t.map(n=>{const l=r.fromJSON(n);return l.spatialReference=i,l})}async function gfe(t,e,i){const r=typeof t=="string"?Ui(t):t,n=e[0].spatialReference,l=J2(e[0]),d={...i,query:{...r.query,f:"json",sr:n.wkid??JSON.stringify(n),geometries:JSON.stringify(yfe(e))}},{data:y}=await Wt(r.path+"/simplify",d);return mfe(y.geometries,l,n)}const fV=ge.getLogger("esri.geometry.support.normalizeUtils");function vfe(t){return t.type==="polygon"}function bfe(t){return t[0].type==="polygon"}function wfe(t){return t[0].type==="polyline"}function _fe(t,e){if(!(t instanceof Oo||t instanceof Dl)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw fV.error(n),new se(n)}const i=$y(t),r=[];for(const n of i){const l=[];r.push(l),l.push([n[0][0],n[0][1]]);for(let d=0;d<n.length-1;d++){const y=n[d][0],b=n[d][1],x=n[d+1][0],$=n[d+1][1],E=Math.sqrt((x-y)*(x-y)+($-b)*($-b)),k=($-b)/E,P=(x-y)/E,D=E/e;if(D>1){for(let W=1;W<=D-1;W++){const H=W*e,Y=P*H+y,ie=k*H+b;l.push([Y,ie])}const L=(E+Math.floor(D-1)*e)/2,N=P*L+y,B=k*L+b;l.push([N,B])}l.push([x,$])}}return vfe(t)?new Dl({rings:r,spatialReference:t.spatialReference}):new Oo({paths:r,spatialReference:t.spatialReference})}function gA(t,e,i){if(e){const r=_fe(t,1e6);t=Wp(r,!0)}return i&&(t=pV(t,i)),t}function vA(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=td(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=td(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=td(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=td(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function xfe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],l=e.geometries[r],d=$y(l);for(let y=0;y<d.length;y++){const b=d[y];b.some(x=>{if(x[0]<180)return!0;{let $=0;for(let k=0;k<b.length;k++){const P=b[k][0];$=P>$?P:$}$=Number($.toFixed(9));const E=-360*td($,180);for(let k=0;k<b.length;k++){const P=l.getPoint(y,k);l.setPoint(y,k,P.clone().offset(E,0))}return!0}})}if(n===i){if(bfe(t))for(const y of $y(l))t[n]=t[n].addRing(y);else if(wfe(t))for(const y of $y(l))t[n]=t[n].addPath(y)}else i=n,t[n]=l}return t}async function yV(t,e,i){if(!Array.isArray(t))return yV([t],e);e&&typeof e!="string"&&fV.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Ft.geometryServiceUrl;let n,l,d,y,b,x,$,E,k=0;const P=[],D=[];for(const Y of t)if(Y!=null)if(n||(n=Y.spatialReference,l=Fo(n),d=n.isWebMercator,x=d?102100:4326,y=Jg[x].maxX,b=Jg[x].minX,$=Jg[x].plus180Line,E=Jg[x].minus180Line),l)if(Y.type==="mesh")D.push(Y);else if(Y.type==="point")D.push(vA(Y.clone(),y,b));else if(Y.type==="multipoint"){const ie=Y.clone();ie.points=ie.points.map(ne=>vA(ne,y,b)),D.push(ie)}else if(Y.type==="extent"){const ie=Y.clone()._normalize(!1,!1,l);D.push(ie.rings?new Dl(ie):ie)}else if(Y.extent){const ie=Y.extent,ne=td(ie.xmin,b)*(2*y);let he=ne===0?Y.clone():pV(Y.clone(),ne);ie.offset(ne,0),ie.intersects($)&&ie.xmax!==y?(k=ie.xmax>k?ie.xmax:k,he=gA(he,d),P.push(he),D.push("cut")):ie.intersects(E)&&ie.xmin!==b?(k=ie.xmax*(2*y)>k?ie.xmax*(2*y):k,he=gA(he,d,360),P.push(he),D.push("cut")):D.push(he)}else D.push(Y.clone());else D.push(Y);else D.push(Y);let L=td(k,y),N=-90;const B=L,W=new Oo;for(;L>0;){const Y=360*L-180;W.addPath([[Y,N],[Y,-1*N]]),N*=-1,L--}if(P.length>0&&B>0){const Y=xfe(P,await ffe(r,P,W,i)),ie=[],ne=[];for(let be=0;be<D.length;be++){const we=D[be];if(we!=="cut")ne.push(we);else{const $e=Y.shift(),ke=t[be];ke!=null&&ke.type==="polygon"&&ke.rings&&ke.rings.length>1&&$e.rings.length>=ke.rings.length?(ie.push($e),ne.push("simplify")):ne.push(d?ph($e):$e)}}if(!ie.length)return ne;const he=await gfe(r,ie,i),de=[];for(let be=0;be<ne.length;be++){const we=ne[be];we!=="simplify"?de.push(we):de.push(d?ph(he.shift()):he.shift())}return de}const H=[];for(let Y=0;Y<D.length;Y++){const ie=D[Y];if(ie!=="cut")H.push(ie);else{const ne=P.shift();H.push(d===!0?ph(ne):ne)}}return H}function y6e(t,e){const i=Fo(e);if(i){const[r,n]=i.valid,l=n-r;if(t<r)for(;t<r;)t+=l;if(t>n)for(;t>n;)t-=l}return t}function mV(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let n=0;n<r.length;n++)e[i][n]=mV(r[n])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}var qu;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(qu||(qu={}));const bA=4294967296,Sfe=new TextDecoder("utf-8"),Mfe=ce("safari")||ce("ios")?6:ce("ff")?12:32;let LS=class fb{constructor(e,i,r=0,n=e?e.byteLength:0){this._tag=0,this._dataType=qu.unknown,this._init(e,i,r,n)}_init(e,i,r,n){this._data=e,this._dataView=i,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new fb(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*bA;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*bA;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,n){const l=this.getMessage(),d=e(l,i,r,n);return l.release(),d}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=fb.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){fb.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case qu.varint:this._decodeVarint();break;case qu.fixed64:this._skip(8);break;case qu.delimited:this._skip(this._getLength());break;case qu.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=e[i++],r|=127&n,(128&n)==0||(n=e[i++],r|=(127&n)<<7,(128&n)==0)||(n=e[i++],r|=(127&n)<<14,(128&n)==0)||(n=e[i++],r|=(127&n)<<21,(128&n)==0)||(n=e[i++],r+=268435456*(127&n),(128&n)==0)||(n=e[i++],r+=34359738368*(127&n),(128&n)==0)||(n=e[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=e[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=e[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=e[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let l=1;for(;i!==this._end&&(n=e[i],(128&n)!=0);)++i,r+=(127&n)*l,l*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*l}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i=this._pos,r=0,n=0;const l=1&e[i];if(this._end-i>=10)do{if(n=e[i++],r|=127&n,(128&n)==0||(n=e[i++],r|=(127&n)<<7,(128&n)==0)||(n=e[i++],r|=(127&n)<<14,(128&n)==0)||(n=e[i++],r|=(127&n)<<21,(128&n)==0)||(n=e[i++],r+=268435456*(127&n),(128&n)==0)||(n=e[i++],r+=34359738368*(127&n),(128&n)==0)||(n=e[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=e[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=e[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=e[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;i!==this._end&&(n=e[i],(128&n)!=0);)++i,r+=(127&n)*d,d*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*d}return this._pos=i,l?-(r+1)/2:r/2}_getLength(){if(this._dataType!==qu.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>Mfe){const d=e.subarray(i,r);return Sfe.decode(d)}let n="",l="";for(let d=i;d<r;++d){const y=e[d];128&y?l+="%"+y.toString(16):(n+=decodeURIComponent(l)+String.fromCharCode(y),l="")}return l.length&&(n+=decodeURIComponent(l)),n}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}};LS.pool=new Ph(LS,void 0,t=>{t._data=null,t._dataView=null});let Jo=class yb{constructor(e=[],i=[],r=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[i,r,n,l]=e,d=n-i,y=l-r;return new yb([5],[i,r,d,0,0,y,-d,0,0,-y])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let l=0;l<n;l++)e(this.coords[2*(l+i)],this.coords[2*(l+i)+1]);i+=n}}clone(e){return e?(e.set(this.coords),new yb(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new yb(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Eh=class gV{constructor(e=null,i={},r,n){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new gV(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function $fe(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let m6e=class extends Eh{},vV=class bV{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new bV;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const wV=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let v6e=class{constructor(e){this._options=e,this.geometryTypes=wV,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new vV}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||qi(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=E0(this._options.sourceSpatialReference)/E0(e.spatialReference);if(i!==1)for(const r of e.features){if(!$fe(r))continue;const n=r.geometry.coords;for(let l=2;l<n.length;l+=3)n[l]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Eh}createSpatialReference(){return{wkid:0}}createGeometry(){return new Jo}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Jo}};const wA=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],_A=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],xA=["upperLeft","lowerLeft"];function SA(t){return t>=wA.length?null:wA[t]}function Tfe(t){return t>=_A.length?null:_A[t]}function MA(t){return t>=xA.length?null:xA[t]}function $A(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Ife(t,e,i){const n=t.asUnsafe(),l=e.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const d=n.getUInt32(),y=n.pos()+d;let b=0;for(;n.pos()<y;)e.addCoordinatePoint(l,n.getSInt64(),b++);break}default:n.skip()}return l}function Efe(t,e,i){const l=t.asUnsafe(),d=e.createGeometry(i),y=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;l.next();)switch(l.tag()){case 2:{const b=l.getUInt32(),x=l.pos()+b;let $=0;for(;l.pos()<x;)e.addLength(d,l.getUInt32(),$++);break}case 3:{const b=l.getUInt32(),x=l.pos()+b;let $=0;for(e.allocateCoordinates(d);l.pos()<x;)e.addCoordinate(d,l.getSInt64(),$),$++,$===y&&($=0);break}default:l.skip()}return d}function Afe(t){const n=t.asUnsafe(),l=new Jo;let d="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const y=n.getUInt32(),b=n.pos()+y;for(;n.pos()<b;)l.lengths.push(n.getUInt32());break}case 3:{const y=n.getUInt32(),b=n.pos()+y;for(;n.pos()<b;)l.coords.push(n.getSInt64());break}case 1:d=wV[n.getEnum()];break;default:n.skip()}return{queryGeometry:l,queryGeometryType:d}}function kfe(t){const $=t.asUnsafe();for(;$.next();)switch($.tag()){case 1:return $.getString();case 2:return $.getFloat();case 3:return $.getDouble();case 4:return $.getSInt32();case 5:return $.getUInt32();case 6:return $.getInt64();case 7:return $.getUInt64();case 8:return $.getSInt64();case 9:return $.getBool();default:return $.skip(),null}return null}function Pfe(t){const y=t.asUnsafe(),b={type:SA(0)};for(;y.next();)switch(y.tag()){case 1:b.name=y.getString();break;case 2:b.type=SA(y.getEnum());break;case 3:b.alias=y.getString();break;case 4:b.sqlType=Tfe(y.getEnum());break;case 5:y.skip();break;case 6:b.defaultValue=y.getString();break;default:y.skip()}return b}function Cfe(t){const r={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function Ofe(t,e,i,r){const y=e.createFeature(i);let b=0;for(;t.next();)switch(t.tag()){case 1:{const x=r[b++].name;y.attributes[x]=t.processMessage(kfe);break}case 2:y.geometry=t.processMessageWithArgs(Efe,e,i);break;case 4:y.centroid=t.processMessageWithArgs(Ife,e,i);break;default:t.skip()}return y}function Lfe(t){const l=[1,1,1,1],d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:l[0]=d.getDouble();break;case 2:l[1]=d.getDouble();break;case 4:l[2]=d.getDouble();break;case 3:l[3]=d.getDouble();break;default:d.skip()}return l}function Dfe(t){const l=[0,0,0,0],d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:l[0]=d.getDouble();break;case 2:l[1]=d.getDouble();break;case 4:l[2]=d.getDouble();break;case 3:l[3]=d.getDouble();break;default:d.skip()}return l}function Rfe(t){const n={originPosition:MA(0)},l=t.asUnsafe();for(;l.next();)switch(l.tag()){case 1:n.originPosition=MA(l.getEnum());break;case 2:n.scale=l.processMessage(Lfe);break;case 3:n.translate=l.processMessage(Dfe);break;default:l.skip()}return n}function jfe(t){const n={},l=t.asUnsafe();for(;l.next();)switch(l.tag()){case 1:n.shapeAreaFieldName=l.getString();break;case 2:n.shapeLengthFieldName=l.getString();break;case 3:n.units=l.getString();break;default:l.skip()}return n}function Ffe(t,e){const y=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:y.wkid=t.getUInt32();break;case 5:y.wkt=t.getString();break;case 2:y.latestWkid=t.getUInt32();break;case 3:y.vcsWkid=t.getUInt32();break;case 4:y.latestVcsWkid=t.getUInt32();break;default:t.skip()}return y}function Nfe(t,e){const L=e.createFeatureResult(),N=t.asUnsafe();L.geometryType=$A(e,0);let B=!1;for(;N.next();)switch(N.tag()){case 1:L.objectIdFieldName=N.getString();break;case 3:L.globalIdFieldName=N.getString();break;case 4:L.geohashFieldName=N.getString();break;case 5:L.geometryProperties=N.processMessage(jfe);break;case 7:L.geometryType=$A(e,N.getEnum());break;case 8:L.spatialReference=N.processMessageWithArgs(Ffe,e);break;case 10:L.hasZ=N.getBool();break;case 11:L.hasM=N.getBool();break;case 12:L.transform=N.processMessage(Rfe);break;case 9:{const W=N.getBool();L.exceededTransferLimit=W;break}case 13:e.addField(L,N.processMessage(Pfe));break;case 15:B||(e.prepareFeatures(L),B=!0),e.addFeature(L,N.processMessageWithArgs(Ofe,e,L,L.fields));break;case 2:L.uniqueIdField=N.processMessage(Cfe);break;default:N.skip()}return e.finishFeatureResult(L),L}function zfe(t,e){const n={};let l=null;for(;t.next();)switch(t.tag()){case 4:l=t.processMessageWithArgs(Afe);break;case 1:n.featureResult=t.processMessageWithArgs(Nfe,e);break;default:t.skip()}return l!=null&&n.featureResult&&e.addQueryGeometry(n,l),n}function Vfe(t,e){try{const r=new LS(new Uint8Array(t),new DataView(t)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(zfe,e):r.skip();return n}catch(i){throw new se("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Bfe(t,e){const i=Vfe(t,e),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,l=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const d=r.objectIdFieldName;for(const y of r.features)y.attributes&&(y.objectId=y.attributes[d])}return r&&(r.queryGeometry=n,r.queryGeometryType=l),r}function DS(t,e,i){if(!i||!i.features||!i.hasZ)return;const r=C7(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}const TA="Layer does not support extent calculation.";function Gfe(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Ufe(t,e){const i=t.geometry,r=t.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let l,d,y;if(i!=null&&(d=i.spatialReference,y=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=J2(i),n.geometry=Gfe(i,t.compactGeometryEnabled),n.inSR=y),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),l=t.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,l=d),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(n.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&d!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&d.equals(t.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const b=r.timeExtent,{start:x,end:$}=b;x==null&&$==null||(n.time=x===$?x:`${x??"null"},${$??"null"}`),delete r.timeExtent}return t.defaultSpatialReferenceEnabled&&d!=null&&l!=null&&d.equals(l)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function qfe(t,e,i,r){const n=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await Um(t,e,"json",r);return DS(e,i,n.data),n}async function Hfe(t,e,i,r){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await Wfe(t,e,r),l=n;return l.data=Bfe(n.data,i),l}function Wfe(t,e,i){return Um(t,e,"pbf",i)}function Jfe(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Um(t,e,"json",i,{returnIdsOnly:!0})}function Yfe(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Um(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function Kfe(t,e,i){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await Um(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(TA);if(n.hasOwnProperty("count"))throw new Error(TA);return r}async function Um(t,e,i,r={},n={}){const l=typeof t=="string"?Ui(t):t,d=e.geometry?[e.geometry]:[];r.responseType=i==="pbf"?"array-buffer":"json";const y=await yV(d,null,r),b=y&&y[0];b!=null&&((e=e.clone()).geometry=b);const x=mV({...l.query,f:i,...n,...Ufe(e,n)});return Wt(Ll(l.path,Zfe(e,n)?"query3d":"query"),{...r,query:{...x,...r.query}})}function Zfe(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}var RS;const jS=new _t({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Sr=RS=class extends ve{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=dt.fromJSON(e.spatialReference),r=[];for(let n=0;n<t.length;n++){const l=t[n],d=xs.fromJSON(l),y=l.geometry&&l.geometry.spatialReference;d.geometry==null||y||(d.geometry.spatialReference=i);const b=l.aggregateGeometries,x=d.aggregateGeometries;if(b&&x!=null)for(const $ in x){const E=x[$],k=b[$],P=k==null?void 0:k.spatialReference;E==null||P||(E.spatialReference=i)}r.push(d)}return r}writeGeometryType(t,e,i,r){if(t)return void jS.write(t,e,i,r);const{features:n}=this;if(n){for(const l of n)if(l&&l.geometry!=null)return void jS.write(l.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=bh(t);return r&&!i&&e.spatialReference&&(r.spatialReference=dt.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new RS(this.cloneProperties())}cloneProperties(){return ae({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t&&t[i];r.geometry=n&&n.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,l=x=>Math.round((x-r)/e),d=x=>Math.round((n-x)/i),y=this.features,b=this._getQuantizationFunction(this.geometryType,l,d);for(let x=0,$=y.length;x<$;x++)b!=null&&b(y[x].geometry)||(y.splice(x,1),x--,$--);return this.transform=t,this}unquantize(){var k,P;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[l,d]}=i,y=D=>D*l+r,b=D=>n-D*d;let x=null,$=null;if(this.hasZ&&((k=i==null?void 0:i.scale)==null?void 0:k[2])!=null){const{translate:[,,D],scale:[,,L]}=i;x=N=>N*L+D}if(this.hasM&&((P=i==null?void 0:i.scale)==null?void 0:P[3])!=null){const{translate:[,,,D],scale:[,,,L]}=i;$=N=>N==null?N:N*L+D}const E=this._getHydrationFunction(t,y,b,x,$);for(const{geometry:D}of e)D!=null&&E&&E(D);return this.transform=null,this}_quantizePoints(t,e,i){let r,n;const l=[];for(let d=0,y=t.length;d<y;d++){const b=t[d];if(d>0){const x=e(b[0]),$=i(b[1]);x===r&&$===n||(l.push([x-r,$-n]),r=x,n=$)}else r=e(b[0]),n=i(b[1]),l.push([r,n])}return l.length>0?l:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=ad(r)?r.rings:r.paths,l=[];for(let d=0,y=n.length;d<y;d++){const b=n[d],x=this._quantizePoints(b,e,i);x&&l.push(x)}return l.length>0?(ad(r)?r.rings=l:r.paths=l,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?l=>{l.x=e(l.x),l.y=i(l.y),r&&(l.z=r(l.z))}:t==="polyline"||t==="polygon"?l=>{const d=ad(l)?l.rings:l.paths;let y,b;for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];k>0?(y+=D[0],b+=D[1]):(y=D[0],b=D[1]),D[0]=e(y),D[1]=i(b)}}if(r&&n)for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];D[2]=r(D[2]),D[3]=n(D[3])}}else if(r)for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];D[2]=r(D[2])}}else if(n)for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];D[2]=n(D[2])}}}:t==="extent"?l=>{l.xmin=e(l.xmin),l.ymin=i(l.ymin),l.xmax=e(l.xmax),l.ymax=i(l.ymax),r&&l.zmax!=null&&l.zmin!=null&&(l.zmax=r(l.zmax),l.zmin=r(l.zmin)),n&&l.mmax!=null&&l.mmin!=null&&(l.mmax=n(l.mmax),l.mmin=n(l.mmin))}:t==="multipoint"?l=>{const d=l.points;let y,b;for(let x=0,$=d.length;x<$;x++){const E=d[x];x>0?(y+=E[0],b+=E[1]):(y=E[0],b=E[1]),E[0]=e(y),E[1]=i(b)}if(r&&n)for(let x=0,$=d.length;x<$;x++){const E=d[x];E[2]=r(E[2]),E[3]=n(E[3])}else if(r)for(let x=0,$=d.length;x<$;x++){const E=d[x];E[2]=r(E[2])}else if(n)for(let x=0,$=d.length;x<$;x++){const E=d[x];E[2]=n(E[2])}}:null}};g([S({type:String,json:{write:!0}})],Sr.prototype,"displayFieldName",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Sr.prototype,"exceededTransferLimit",void 0),g([S({type:[xs],json:{write:!0}})],Sr.prototype,"features",void 0),g([Se("features")],Sr.prototype,"readFeatures",null),g([S({type:[E_],json:{write:!0}})],Sr.prototype,"fields",void 0),g([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:jS.read}}})],Sr.prototype,"geometryType",void 0),g([Ae("geometryType")],Sr.prototype,"writeGeometryType",null),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Sr.prototype,"hasM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Sr.prototype,"hasZ",void 0),g([S({types:Od,json:{write:!0}})],Sr.prototype,"queryGeometry",void 0),g([Se("queryGeometry")],Sr.prototype,"readQueryGeometry",null),g([S({type:dt,json:{write:!0}})],Sr.prototype,"spatialReference",void 0),g([Ae("spatialReference")],Sr.prototype,"writeSpatialReference",null),g([S({json:{write:!0}})],Sr.prototype,"transform",void 0),Sr=RS=g([J("esri.rest.support.FeatureSet")],Sr),Sr.prototype.toJSON.isDefaultToJSON=!0;const qm=Sr;let Tc=class extends ti(ve){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};g([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Tc.prototype,"onFields",void 0),g([S({type:String,json:{write:!0}})],Tc.prototype,"operator",void 0),g([S({type:String,json:{write:!0}})],Tc.prototype,"searchTerm",void 0),g([S({type:String,json:{write:!0}})],Tc.prototype,"searchType",void 0),Tc=g([J("esri.rest.support.FullTextSearch")],Tc);const Xfe=Tc;var FS;const IA=new _t({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let wo=FS=class extends ve{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=ae(t))}clone(){return new FS({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ae(this.statisticParameters)})}};g([S({type:Number,json:{write:!0}})],wo.prototype,"maxPointCount",void 0),g([S({type:Number,json:{write:!0}})],wo.prototype,"maxRecordCount",void 0),g([S({type:Number,json:{write:!0}})],wo.prototype,"maxVertexCount",void 0),g([S({type:String,json:{write:!0}})],wo.prototype,"onStatisticField",void 0),g([S({type:String,json:{write:!0}})],wo.prototype,"outStatisticFieldName",void 0),g([S({type:String,json:{read:{source:"statisticType",reader:IA.read},write:{target:"statisticType",writer:IA.write}}})],wo.prototype,"statisticType",void 0),g([S({type:Object})],wo.prototype,"statisticParameters",void 0),g([Ae("statisticParameters")],wo.prototype,"writeStatisticParameters",null),wo=FS=g([J("esri.rest.support.StatisticDefinition")],wo);const _V=wo;var y0;const Qfe=new _t({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),e1e=new _t({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ye=y0=class extends ve{static from(t){return $0(y0,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const n=t[r];Array.isArray(n)?i[r]=n.map(l=>l instanceof Date?l.getTime():l):n instanceof Date?i[r]=n.getTime():i[r]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new y0(ae({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ye.MAX_MAX_RECORD_COUNT_FACTOR=5,g([S({json:{write:!0}})],Ye.prototype,"aggregateIds",void 0),g([S({type:Boolean,json:{write:!0}})],Ye.prototype,"cacheHint",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"compactGeometryEnabled",void 0),g([S({json:{write:!0}})],Ye.prototype,"datumTransformation",void 0),g([xt("datumTransformation")],Ye.prototype,"castDatumTransformation",null),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"defaultSpatialReferenceEnabled",void 0),g([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ye.prototype,"distance",void 0),g([S({type:ys,json:{write:!0}})],Ye.prototype,"dynamicDataSource",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"formatOf3DObjects",void 0),g([S({type:[Xfe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ye.prototype,"fullText",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"gdbVersion",void 0),g([S({types:Od,json:{read:bh,write:!0}})],Ye.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],Ye.prototype,"geometryPrecision",void 0),g([S({type:[String],json:{write:!0}})],Ye.prototype,"groupByFieldsForStatistics",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"having",void 0),g([S({type:Date})],Ye.prototype,"historicMoment",void 0),g([Ae("historicMoment")],Ye.prototype,"writeHistoricMoment",null),g([S({type:Number,json:{write:!0}})],Ye.prototype,"maxAllowableOffset",void 0),g([S({type:Number,cast:t=>t<1?1:t>y0.MAX_MAX_RECORD_COUNT_FACTOR?y0.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ye.prototype,"maxRecordCountFactor",void 0),g([S({type:["xyFootprint"],json:{write:!0}})],Ye.prototype,"multipatchOption",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ye.prototype,"num",void 0),g([S({json:{write:!0}})],Ye.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],Ye.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],Ye.prototype,"outFields",void 0),g([S({type:dt,json:{name:"outSR",write:!0}})],Ye.prototype,"outSpatialReference",void 0),g([S({type:[_V],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ye.prototype,"outStatistics",void 0),g([S({json:{write:!0}})],Ye.prototype,"parameterValues",void 0),g([Ae("parameterValues")],Ye.prototype,"writeParameterValues",null),g([S({type:lt,json:{write:!0}})],Ye.prototype,"pixelSize",void 0),g([S({type:YF,json:{write:!0}})],Ye.prototype,"quantizationParameters",void 0),g([S({type:[Object],json:{write:!0}})],Ye.prototype,"rangeValues",void 0),g([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ye.prototype,"relationParameter",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"resultType",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnCentroid",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnDistinctValues",void 0),g([S({type:Boolean,json:{default:!0,write:!0}})],Ye.prototype,"returnExceededLimitFeatures",void 0),g([S({type:Boolean,json:{write:!0}})],Ye.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnQueryGeometry",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ye.prototype,"returnZ",void 0),g([S({type:dt,json:{write:!0}})],Ye.prototype,"sourceSpatialReference",void 0),g([Ue(Qfe,{ignoreUnknown:!1,name:"spatialRel"})],Ye.prototype,"spatialRelationship",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],Ye.prototype,"start",void 0),g([Ae("start"),Ae("num")],Ye.prototype,"writeStart",null),g([S({type:String,json:{write:!0}})],Ye.prototype,"sqlFormat",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"text",void 0),g([S({type:Zo,json:{write:!0}})],Ye.prototype,"timeExtent",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"timeReferenceUnknownClient",void 0),g([Ue(e1e,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ye.prototype,"units",void 0),g([S({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ye.prototype,"where",void 0),g([Ae("where")],Ye.prototype,"writeWhere",null),Ye=y0=g([J("esri.rest.support.Query")],Ye);const Bi=Ye;async function $5(t,e,i){const r=await xV(t,e,i);return qm.fromJSON(r)}async function xV(t,e,i){const r=zd(t),n={...i},l=Bi.from(e),{data:d}=await qfe(r,l,l.sourceSpatialReference,n);return d}function jr(t,e){return t?e?4:3:e?3:2}const cf=ge.getLogger("esri.layers.graphics.featureConversionUtils"),SV={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},t1e=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l},EA=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l,t[i+2]=e[r+2]},i1e=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l,t[i+2]=e[r+3]},r1e=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l,t[i+2]=e[r+2],t[i+3]=e[r+3]};function $$(t,e,i,r){if(t){if(i)return e&&r?r1e:EA;if(e&&r)return i1e}else if(e&&r)return EA;return t1e}function T5({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function I5({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function E5({scale:t,translate:e},i,r){return i*t[r]+e[r]}function _6e(t,e,i){return t?e?i?E$(t):T$(t):i?I$(t):A_(t):null}function A_(t){const e=t.coords;return{x:e[0],y:e[1]}}function MV(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function T$(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function s1e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function I$(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function n1e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function E$(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function o1e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function a1e(t,e,i,r){let n=A_;i&&r?n=E$:i?n=T$:r&&(n=I$);for(const l of e){const{geometry:d,attributes:y}=l,b=d!=null?n(d):null;t.push({attributes:y,geometry:b})}return t}function A$(t,e){return t&&e?o1e:t?s1e:e?n1e:MV}function $V(t,e,i,r,n){const l=A$(i,r);for(const{geometry:d,attributes:y}of e){const b=d!=null?l(new Jo,d):null;t.push(new Eh(b,y,null,n?y[n]:void 0))}return t}function x6e(t,e,i=A$(e.z!=null,e.m!=null)){return i(t,e)}function l1e(t,e,i,r){for(const{geometry:n,attributes:l}of e)t.push({attributes:l,geometry:n!=null?TV(n,i,r):null});return t}function TV(t,e,i){if(t==null)return null;const r=jr(e,i),n=[];for(let l=0;l<t.coords.length;l+=r){const d=[];for(let y=0;y<r;y++)d.push(t.coords[l+y]);n.push(d)}return e?i?{points:n,hasZ:e,hasM:i}:{points:n,hasZ:e}:i?{points:n,hasM:i}:{points:n}}function IV(t,e,i,r,n){const l=jr(i,r);for(const{geometry:d,attributes:y}of e){const b=d!=null?EV(new Jo,d,l):null;t.push(new Eh(b,y,null,n?y[n]:void 0))}return t}function EV(t,e,i=jr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let n=0;for(const l of e.points)for(let d=0;d<i;d++)r[n++]=l[d];return t}function u1e(t,e,i,r){for(const{geometry:n,attributes:l}of e)t.push({attributes:l,geometry:n!=null?AV(n,i,r):null});return t}function AV(t,e,i){if(!t)return null;const r=jr(e,i),{coords:n,lengths:l}=t,d=[];let y=0;for(const b of l){const x=[];for(let $=0;$<b;$++){const E=[];for(let k=0;k<r;k++)E.push(n[y++]);x.push(E)}d.push(x)}return e?i?{paths:d,hasZ:e,hasM:i}:{paths:d,hasZ:e}:i?{paths:d,hasM:i}:{paths:d}}function kV(t,e,i,r,n){const l=jr(i,r);for(const{geometry:d,attributes:y}of e){const b=d!=null?PV(new Jo,d,l):null;t.push(new Eh(b,y,null,n?y[n]:void 0))}return t}function PV(t,e,i=jr(e.hasZ,e.hasM)){const{lengths:r,coords:n}=t;let l=0;for(const d of e.paths){for(const y of d)for(let b=0;b<i;b++)n[l++]=y[b];r.push(d.length)}return t}function h1e(t,e,i,r){for(const{geometry:n,attributes:l,centroid:d}of e){const y=n!=null?CV(n,i,r):null;if(d!=null){const b=A_(d);t.push({attributes:l,centroid:b,geometry:y})}else t.push({attributes:l,geometry:y})}return t}function CV(t,e,i){if(!t)return null;const r=jr(e,i),{coords:n,lengths:l}=t,d=[];let y=0;for(const b of l){const x=[];for(let $=0;$<b;$++){const E=[];for(let k=0;k<r;k++)E.push(n[y++]);x.push(E)}d.push(x)}return e?i?{rings:d,hasZ:e,hasM:i}:{rings:d,hasZ:e}:i?{rings:d,hasM:i}:{rings:d}}function OV(t,e,i,r,n){for(const{geometry:l,centroid:d,attributes:y}of e){const b=l!=null?LV(new Jo,l,i,r):null,x=n?y[n]:void 0;d!=null?t.push(new Eh(b,y,MV(new Jo,d),x)):t.push(new Eh(b,y,null,x))}return t}function LV(t,e,i=e.hasZ,r=e.hasM){return c1e(t,e.rings,i,r)}function c1e(t,e,i,r){const n=jr(i,r),{lengths:l,coords:d}=t;let y=0;Il(t);for(const b of e){for(const x of b)for(let $=0;$<n;$++)d[y++]=x[$];l.push(b.length)}return t}const m0=[],Ty=[];function S6e(t,e,i,r,n){m0[0]=t;const[l]=DV(Ty,m0,e,i,r,n);return Yo(m0),Yo(Ty),l}function DV(t,e,i,r,n,l){if(Yo(t),!i){for(const d of e){const y=l?d.attributes[l]:void 0;t.push(new Eh(null,d.attributes,null,y))}return t}switch(i){case"esriGeometryPoint":return $V(t,e,r,n,l);case"esriGeometryMultipoint":return IV(t,e,r,n,l);case"esriGeometryPolyline":return kV(t,e,r,n,l);case"esriGeometryPolygon":return OV(t,e,r,n,l);default:cf.error("convertToFeatureSet:unknown-geometry",new se(`Unable to parse unknown geometry type '${i}'`)),Yo(t)}return t}function M6e(t,e,i,r,n,l){const d=t.length;switch(i){case"esriGeometryPoint":$V(t,e,r,n,l);break;case"esriGeometryMultipoint":IV(t,e,r,n,l);break;case"esriGeometryPolyline":kV(t,e,r,n,l);break;case"esriGeometryPolygon":OV(t,e,r,n,l);break;default:cf.error("convertToFeatureSet:unknown-geometry",new se(`Unable to parse unknown geometry type '${i}'`))}for(let y=0;y<e.length;y++)t[y+d].geometryType=i,t[y+d].insertAfter=e[y].insertAfter,t[y+d].groupId=e[y].groupId;return t}function $6e(t,e,i,r){Ty[0]=t,jV(m0,Ty,e,i,r);const n=m0[0];return Yo(m0),Yo(Ty),n}function T6e(t,e,i){if(t==null)return null;const r=new Jo;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),ZM(t)?A$(e??t.z!=null,i??t.m!=null)(r,t):ad(t)?LV(r,t,e,i):XM(t)?PV(r,t,jr(e,i)):KM(t)?EV(r,t,jr(e,i)):void cf.error("convertFromGeometry:unknown-geometry",new se(`Unable to parse unknown geometry type '${t}'`))}function RV(t,e,i,r){const n=t&&("coords"in t?t:t.geometry);if(n==null)return null;switch(e){case"esriGeometryPoint":{let l=A_;return i&&r?l=E$:i?l=T$:r&&(l=I$),l(n)}case"esriGeometryMultipoint":return TV(n,i,r);case"esriGeometryPolyline":return AV(n,i,r);case"esriGeometryPolygon":return CV(n,i,r);default:return cf.error("convertToGeometry:unknown-geometry",new se(`Unable to parse unknown geometry type '${e}'`)),null}}function d1e(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function jV(t,e,i,r,n){if(Yo(t),i==null)return d1e(t,e);switch(i){case"esriGeometryPoint":return a1e(t,e,r,n);case"esriGeometryMultipoint":return l1e(t,e,r,n);case"esriGeometryPolyline":return u1e(t,e,r,n);case"esriGeometryPolygon":return h1e(t,e,r,n);default:cf.error("convertToFeatureSet:unknown-geometry",new se(`Unable to parse unknown geometry type '${i}'`))}return t}function I6e(t){const{objectIdFieldName:e,spatialReference:i,transform:r,fields:n,hasM:l,hasZ:d,features:y,geometryType:b,exceededTransferLimit:x,uniqueIdField:$,queryGeometry:E,queryGeometryType:k}=t,P={features:jV([],y,b,d,l),fields:n,geometryType:b,objectIdFieldName:e,spatialReference:i,uniqueIdField:$,queryGeometry:RV(E,k,!1,!1)};return r&&(P.transform=r),x&&(P.exceededTransferLimit=x),l&&(P.hasM=l),d&&(P.hasZ=d),P}function E6e(t,e){const i=new vV,{hasM:r,hasZ:n,features:l,objectIdFieldName:d,spatialReference:y,geometryType:b,exceededTransferLimit:x,transform:$,fields:E}=t;return E&&(i.fields=E),i.geometryType=b??null,i.objectIdFieldName=d??e??null,i.spatialReference=y??null,i.objectIdFieldName?(l&&DV(i.features,l,b,n,r,i.objectIdFieldName),x&&(i.exceededTransferLimit=x),r&&(i.hasM=r),n&&(i.hasZ=n),$&&(i.transform=$),i):(cf.error(new se("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function A6e(t){const{transform:e,features:i,hasM:r,hasZ:n}=t;if(!e)return t;for(const l of i)l.geometry!=null&&zS(l.geometry,l.geometry,r,n,e),l.centroid!=null&&zS(l.centroid,l.centroid,r,n,e);return t.transform=null,t}function k6e(t,e){const{geometryType:i,features:r,hasM:n,hasZ:l}=e;if(!t)return e;for(let d=0;d<r.length;d++){const y=r[d],b=y.weakClone();b.geometry=new Jo,AA(b.geometry,y.geometry,n,l,i,t),y.centroid&&(b.centroid=new Jo,AA(b.centroid,y.centroid,n,l,"esriGeometryPoint",t)),r[d]=b}return e.transform=t,e}function AA(t,e,i,r,n,l,d=i,y=r){if(Il(t),e==null||!e.coords.length)return null;const b=SV[n],{coords:x,lengths:$}=e,E=jr(i,r),k=jr(i&&d,r&&y),P=$$(i,r,d,y);if(!$.length)return P(t.coords,x,0,0,T5(l,x[0]),I5(l,x[1])),Il(t,E,0),t;let D,L,N,B,W=0,H=0,Y=H;for(const ie of $){if(ie<b)continue;let ne=0;H=Y,N=D=T5(l,x[W]),B=L=I5(l,x[W+1]),P(t.coords,x,H,W,N,B),ne++,W+=E,H+=k;for(let he=1;he<ie;he++,W+=E)N=T5(l,x[W]),B=I5(l,x[W+1]),N===D&&B===L||(P(t.coords,x,H,W,N-D,B-L),H+=k,ne++,D=N,L=B);ne>=b&&(t.lengths.push(ne),Y=H)}return Yo(t.coords,Y),t.coords.length?t:null}function P6e(t,e,i,r,n,l,d=i,y=r){if(Il(t),!e||!e.coords.length)return null;const b=SV[n],{coords:x,lengths:$}=e,E=jr(i,r),k=jr(i&&d,r&&y),P=$$(i,r,d,y);if(!$.length)return P(t.coords,x,0,0,x[0],x[1]),Il(t,E,0),t;let D=0;const L=l*l;for(const N of $){if(N<b){D+=N*E;continue}const B=t.coords.length/k,W=D,H=D+(N-1)*E;P(t.coords,x,t.coords.length,W,x[W],x[W+1]),NS(t.coords,x,E,L,P,W,H),P(t.coords,x,t.coords.length,H,x[H],x[H+1]);const Y=t.coords.length/k-B;Y>=b?t.lengths.push(Y):Yo(t.coords,B*k),D+=N*E}return t.coords.length?t:null}function p1e(t,e,i,r){const n=t[e],l=t[e+1],d=t[i],y=t[i+1],b=t[r],x=t[r+1];let $=d,E=y,k=b-$,P=x-E;if(k!==0||P!==0){const D=((n-$)*k+(l-E)*P)/(k*k+P*P);D>1?($=b,E=x):D>0&&($+=k*D,E+=P*D)}return k=n-$,P=l-E,k*k+P*P}function NS(t,e,i,r,n,l,d){let y,b=r,x=0;for(let $=l+i;$<d;$+=i)y=p1e(e,$,l,d),y>b&&(x=$,b=y);b>r&&(x-l>i&&NS(t,e,i,r,n,l,x),n(t,e,t.length,x,e[x],e[x+1]),d-x>i&&NS(t,e,i,r,n,x,d))}function C6e(t,e,i,r){if(e==null||!e.coords||!e.coords.length)return null;const n=jr(i,r);let l=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,b=Number.NEGATIVE_INFINITY;if(e&&e.coords){const x=e.coords;for(let $=0;$<x.length;$+=n){const E=x[$],k=x[$+1];l=Math.min(l,E),y=Math.max(y,E),d=Math.min(d,k),b=Math.max(b,k)}}return N9(t)?Qee(t,l,d,y,b):cZ(l,d,y,b,t),t}function zS(t,e,i,r,n){const{coords:l,lengths:d}=e,y=jr(i,r);if(!l.length)return t!==e&&Il(t),t;Pd(n);const{originPosition:b,scale:x,translate:$}=n,E=y1e;E.originPosition=b;const k=E.scale;k[0]=x[0]??1,k[1]=-(x[1]??1),k[2]=x[2]??1,k[3]=x[3]??1;const P=E.translate;if(P[0]=$[0]??0,P[1]=$[1]??0,P[2]=$[2]??0,P[3]=$[3]??0,!d.length){for(let L=0;L<y;++L)t.coords[L]=E5(E,l[L],L);return t!==e&&Il(t,y,0),t}let D=0;for(let L=0;L<d.length;L++){const N=d[L];t.lengths[L]=N;for(let H=0;H<y;++H)t.coords[D+H]=E5(E,l[D+H],H);let B=t.coords[D],W=t.coords[D+1];D+=y;for(let H=1;H<N;H++,D+=y){B+=l[D]*k[0],W+=l[D+1]*k[1],t.coords[D]=B,t.coords[D+1]=W;for(let Y=2;Y<y;++Y)t.coords[D+Y]=E5(E,l[D+Y],Y)}}return t!==e&&Il(t,l.length,d.length),t}function O6e(t,e,i,r,n,l){if(Il(t),t.lengths.push(...e.lengths),i===n&&r===l)for(let d=0;d<e.coords.length;d++)t.coords.push(e.coords[d]);else{const d=jr(i,r),y=$$(i,r,n,l),b=e.coords;for(let x=0;x<b.length;x+=d)y(t.coords,b,t.coords.length,x,b[x],b[x+1])}return t}function f1e(t,e,i,r){let n=0,l=t[r*e],d=t[r*(e+1)];for(let y=1;y<i;y++){const b=l+t[r*(e+y)],x=d+t[r*(e+y)+1],$=(b-l)*(x+d);l=b,d=x,n+=$}return .5*n}function L6e(t,e){const{coords:i,lengths:r}=t;let n=0,l=0;for(let d=0;d<r.length;d++){const y=r[d];l+=f1e(i,n,y,e),n+=y}return Math.abs(l)}function Il(t,e=0,i=0){Yo(t.lengths,i),Yo(t.coords,e)}function Yo(t,e=0){t.length!==e&&(t.length=e)}const y1e={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var VS;let bi=VS=class extends ve{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new VS(ae({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};g([S({type:Boolean,json:{write:!0}})],bi.prototype,"cacheHint",void 0),g([S({type:ys,json:{write:!0}})],bi.prototype,"dynamicDataSource",void 0),g([S({type:String,json:{write:!0}})],bi.prototype,"gdbVersion",void 0),g([S({type:Number,json:{write:!0}})],bi.prototype,"geometryPrecision",void 0),g([S({type:Date})],bi.prototype,"historicMoment",void 0),g([Ae("historicMoment")],bi.prototype,"_writeHistoricMoment",null),g([S({type:Number,json:{write:!0}})],bi.prototype,"maxAllowableOffset",void 0),g([S({type:[Number],json:{write:!0}})],bi.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],bi.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],bi.prototype,"outFields",void 0),g([S({type:dt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],bi.prototype,"outSpatialReference",void 0),g([S({json:{write:!0}})],bi.prototype,"relationshipId",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],bi.prototype,"start",void 0),g([Ae("start"),Ae("num")],bi.prototype,"writeStart",null),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],bi.prototype,"num",void 0),g([S({json:{write:!0}})],bi.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],bi.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],bi.prototype,"returnZ",void 0),g([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],bi.prototype,"where",void 0),bi=VS=g([J("esri.rest.support.RelationshipQuery")],bi),bi.from=zi(bi);const B0=bi,kA=Object.freeze(Object.defineProperty({__proto__:null,default:B0},Symbol.toStringTag,{value:"Module"}));var BS;let Pp=BS=class extends ve{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new BS({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};g([S({type:[String],json:{write:!0}})],Pp.prototype,"groupByFields",void 0),g([S({type:Number,json:{write:!0}})],Pp.prototype,"topCount",void 0),g([S({type:[String],json:{write:!0}})],Pp.prototype,"orderByFields",void 0),Pp=BS=g([J("esri.rest.support.TopFilter")],Pp);const m1e=Pp;var GS;const PA=new _t({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),CA=new _t({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let hi=GS=class extends ve{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new GS(ae({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};g([S({type:Boolean,json:{write:!0}})],hi.prototype,"cacheHint",void 0),g([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],hi.prototype,"distance",void 0),g([S({types:Od,json:{read:bh,write:!0}})],hi.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],hi.prototype,"geometryPrecision",void 0),g([S({type:Number,json:{write:!0}})],hi.prototype,"maxAllowableOffset",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],hi.prototype,"num",void 0),g([S({json:{write:!0}})],hi.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],hi.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],hi.prototype,"outFields",void 0),g([S({type:dt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],hi.prototype,"outSpatialReference",void 0),g([S({type:String,json:{write:!0}})],hi.prototype,"resultType",void 0),g([S({json:{write:!0}})],hi.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],hi.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],hi.prototype,"returnZ",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],hi.prototype,"start",void 0),g([Ae("start"),Ae("num")],hi.prototype,"writeStart",null),g([S({type:String,json:{read:{source:"spatialRel",reader:PA.read},write:{target:"spatialRel",writer:PA.write}}})],hi.prototype,"spatialRelationship",void 0),g([S({type:Zo,json:{write:!0}})],hi.prototype,"timeExtent",void 0),g([S({type:m1e,json:{write:!0}})],hi.prototype,"topFilter",void 0),g([S({type:String,json:{read:CA.read,write:{writer:CA.write,overridePolicy(t){return{enabled:t!=null&&this.distance!=null&&this.distance>0}}}}})],hi.prototype,"units",void 0),g([S({type:String,json:{write:!0}})],hi.prototype,"where",void 0),hi=GS=g([J("esri.rest.support.TopFeaturesQuery")],hi),hi.from=zi(hi);const Yg=hi,g1e="esri.widgets.Feature.support.relatedFeatureUtils",OA=ge.getLogger(g1e),LA=new Map;function mb(t){if(!Sl(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function v1e(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(n=>n.id===parseInt(t,10)&&(i=n,!0)),i}function b1e({originRelationship:t,relationships:e,layerId:i}){let r=null;return e&&e.some(n=>(`${n.relatedTableId}`===i&&n.id===(t==null?void 0:t.id)&&(r=n),!!r)),r}function w1e(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function _1e(t,e){const i=v1e(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function x1e(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,n=i&&i.value;e.relatedFeatures=n?n.features:[];const l=r&&r.value;e.relatedStatsFeatures=l?l.features:[]}function S1e(t,e,i,r){var l;const n=new B0;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[t.attributes[i.objectIdField]],((l=i.queryRelatedFeatures)==null?void 0:l.call(i,n,r))??Promise.resolve({})}function M1e(t,e,i){let r=0;const n=[];for(;r<e.length;)n.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function $1e(t,e,i,r){const n=i.layerId.toString(),{layerInfo:l,relation:d,relatedFields:y,outStatistics:b,url:x,sourceSpatialReference:$}=e;if(!l||!d)return null;const E=b1e({originRelationship:d,relationships:l.relationships,layerId:n});if(E!=null&&E.relationshipTableId&&E.keyFieldInRelationshipTable){const P=(await S1e(t,E,i,r))[t.attributes[i.objectIdField]];if(!P)return null;const D=P.features.map(L=>L.attributes[l.objectIdField]);if(b!=null&&b.length&&l.supportsStatistics){const L=new Bi;L.where=M1e(l.objectIdField,D,1e3),L.outFields=y,L.outStatistics=b,L.sourceSpatialReference=$;const N={features:Promise.resolve(P),statsFeatures:$5(x,L)};return ws(N)}}const k=E==null?void 0:E.keyField;if(k){const P=r7(k1e(l.fields,k)),D=w1e(t.attributes,d.keyField),L=P?`${k}=${D}`:`${k}='${D}'`,N=$5(x,new Bi({where:L,outFields:e.relatedFields,sourceSpatialReference:$}),r),B=e.outStatistics&&e.outStatistics.length>0&&l.supportsStatistics?$5(x,new Bi({where:L,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:$}),r):null,W={features:N};return B&&(W.statsFeatures=B),ws(W)}return null}function T1e(t,e){return Wt(t,{query:{f:"json"},signal:e&&e.signal})}function I1e({relatedInfos:t,layer:e},i){const r={};return t.forEach((n,l)=>{const{relation:d}=n;if(!d){const E=new se("relation-required","A relation is required on a layer to retrieve related records.");throw OA.error(E),E}const{relatedTableId:y}=d;if(typeof y!="number"){const E=new se("A related table ID is required on a layer to retrieve related records.");throw OA.error(E),E}const b=`${e.url}/${y}`,x=LA.get(b),$=x??T1e(b);x||LA.set(b,$),r[l]=$}),_a(ws(r),i)}function E1e({graphic:t,relatedInfos:e,layer:i},r){const n={};return e.forEach((l,d)=>{l.layerInfo&&(n[d]=$1e(t,l,i,r))}),ws(n)}function A1e({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,n;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const l=new _V({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=t.outStatistics)==null||n.push(l)}}function k1e(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const DA={chartAnimation:!0};let Ki=class extends Be{constructor(e){super(e),this.abilities={...DA},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...DA,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},l=this.expressionAttributes??{},d=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(y=>{const b=y==null?void 0:y.clone();if(!b)return null;if(b.title=ed({attributes:r,fieldInfoMap:d,globalAttributes:n,expressionAttributes:l,layer:i,text:b.title}),b.caption=ed({attributes:r,fieldInfoMap:d,globalAttributes:n,expressionAttributes:l,layer:i,text:b.caption}),b.altText=ed({attributes:r,fieldInfoMap:d,globalAttributes:n,expressionAttributes:l,layer:i,text:b.altText}),b.type==="image"){const{value:x}=b;return this._setImageValue({value:x,formattedAttributes:n,layer:i}),b.value.sourceURL?b:void 0}if(b.type==="pie-chart"||b.type==="line-chart"||b.type==="column-chart"||b.type==="bar-chart"){const{value:x}=b;return this._setChartValue({value:x,chartType:b.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:l}),b}return null}).filter(Go))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:l}=e,{linkURL:d,sourceURL:y}=r;if(y){const b=dS(y,l);r.sourceURL=cS({formattedAttributes:n,template:b,fieldInfoMap:i})}if(d){const b=dS(d,l);r.linkURL=cS({formattedAttributes:n,template:b,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:n,chartType:l,layer:d,expressionAttributes:y}=e,{popupTemplate:b,relatedInfos:x}=this,{fields:$,normalizeField:E}=i,k=d;if(i.fields=Yde($,k),E&&(i.normalizeField=um(E,k)),!$.some(D=>!!(n[D]!=null||Sl(D)&&(x!=null&&x.size))))return;const P=(b==null?void 0:b.fieldInfos)??[];$.forEach(D=>{if(Sl(D))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:P,fieldName:D,formattedAttributes:n,chartType:l,value:i})]);const L=this._getChartOption({value:i,attributes:r,chartType:l,formattedAttributes:n,expressionAttributes:y,fieldName:D,fieldInfos:P});i.series.push(L)})}_getRelatedChartInfos(e){var P;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:l,value:d}=e,y=[],b=mb(r),x=b&&((P=this.relatedInfos)==null?void 0:P.get(b.layerId.toString()));if(!x)return y;const{relatedFeatures:$,relation:E}=x;if(!E||!$)return y;const{cardinality:k}=E;return $.forEach(D=>{const{attributes:L}=D;L&&Object.keys(L).forEach(N=>{N===b.fieldName&&y.push(this._getChartOption({value:d,attributes:L,formattedAttributes:n,fieldName:r,chartType:l,relatedFieldName:N,hasMultipleRelatedFeatures:($==null?void 0:$.length)>1,fieldInfos:i}))})}),k==="one-to-many"||k==="many-to-many"?y:[y[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var ne;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:l,fieldName:d,relatedFieldName:y,fieldInfos:b,chartType:x,hasMultipleRelatedFeatures:$}=e,E=this.layer,k=this.fieldInfoMap??new Map,{normalizeField:P,tooltipField:D}=i,L=P?Sl(P)?r[mb(P).fieldName]:r[P]:null,N=c$(d)&&l&&l[d]!==void 0?l[d]:y&&r[y]!==void 0?r[y]:r[d]!==void 0?r[d]:n[d],B=new UD({fieldName:d,value:N===void 0?null:N&&L?N/L:N});if(Sl(d)){const he=k.get(d.toLowerCase()),de=D&&k.get(D.toLowerCase()),be=(he==null?void 0:he.fieldName)??d,we=$&&D?mb(D).fieldName:(de==null?void 0:de.fieldName)??D,$e=$&&we?r[we]:n[we]??(he==null?void 0:he.label)??(he==null?void 0:he.fieldName)??y,ke=$&&y?r[y]:n[be];return B.tooltip=this._getTooltip({label:$e,value:ke,chartType:x}),B}const W=kz(b,d),H=um(d,E),Y=D&&n[D]!==void 0?n[D]:Iz(W||new Tm({fieldName:H}),(ne=this.popupTemplate)==null?void 0:ne.expressionInfos),ie=n[H];return B.tooltip=this._getTooltip({label:Y,value:ie,chartType:x}),B}};g([S()],Ki.prototype,"abilities",void 0),g([xt("abilities")],Ki.prototype,"castAbilities",null),g([S()],Ki.prototype,"activeMediaInfoIndex",void 0),g([S({readOnly:!0})],Ki.prototype,"activeMediaInfo",null),g([S()],Ki.prototype,"attributes",void 0),g([S()],Ki.prototype,"description",void 0),g([S()],Ki.prototype,"fieldInfoMap",void 0),g([S()],Ki.prototype,"formattedAttributes",void 0),g([S()],Ki.prototype,"expressionAttributes",void 0),g([S({readOnly:!0})],Ki.prototype,"formattedMediaInfos",null),g([S()],Ki.prototype,"isAggregate",void 0),g([S()],Ki.prototype,"layer",void 0),g([S({readOnly:!0})],Ki.prototype,"formattedMediaInfoCount",null),g([S()],Ki.prototype,"mediaInfos",void 0),g([S()],Ki.prototype,"popupTemplate",void 0),g([S()],Ki.prototype,"relatedInfos",void 0),g([S()],Ki.prototype,"title",void 0),Ki=g([J("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Ki);const id=Ki;function k$(t){return Number(t)!==t}function P1e(t){return{}.toString.call(t)}function tn(t){if(t!=null&&!rt(t)){let e=Number(t);return k$(e)&&G0(t)&&t!=""?tn(t.replace(/[^0-9.\-]+/g,"")):e}return t}function C1e(t){if(US(t))return new Date(t);if(rt(t))return new Date(t);{let e=Number(t);return rt(e)?new Date(e):new Date(t)}}function O1e(t){if(k$(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(t===0&&1/t==-1/0)return"-0";let e=t<0;t=Math.abs(t);let i,r=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t),n=r[1],l=r[2]||"";if(r[3]===void 0)i=l===""?n:n+"."+l;else{let d=+r[3];if(t<1)i="0."+RA("0",d-1)+n+l;else{let y=d-l.length;i=y===0?n+l:y<0?n+l.slice(0,y)+"."+l.slice(y):n+l+RA("0",y)}}return e?"-"+i:i}function RA(t,e){return new Array(e+1).join(t)}function US(t){return P1e(t)==="[object Date]"}function G0(t){return typeof t=="string"}function rt(t){return typeof t=="number"&&Number(t)==t}function k_(t){return typeof t=="object"&&t!==null}const Ah="____",t0="____";function d2(t,e){const i=t.length;for(let r=0;r<i;++r)if(t[r]===e)return r;return-1}function L1e(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r]))return!0;return!1}function D1e(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=e(t[n],n);return r}function Te(t,e){const i=t.length;for(let r=0;r<i;++r)e(t[r],r)}function Iy(t,e){let i=t.length;for(;i>0;)--i,e(t[i],i)}function FV(t,e){const i=t.length;for(let r=0;r<i&&e(t[r],r);++r);}function Xu(t,e){let i=!1,r=0;for(;;){if(r=t.indexOf(e,r),r===-1)return i;i=!0,t.splice(r,1)}}function on(t,e){let i=t.indexOf(e);return i!==-1&&(t.splice(i,1),!0)}function cm(t,e){t.indexOf(e)===-1&&t.push(e)}function R1e(t){const e=t.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=t[r];return i}function A5(t,e,i){t.splice(e,0,i)}function jA(t,e){t.splice(e,1)}function NV(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r],r))return r;return-1}function j1e(t,e){let i=t.length;for(;i>0;)if(--i,e(t[i],i))return i;return-1}function F1e(t,e){const i=NV(t,e);if(i!==-1)return t[i]}function N1e(t,e){const i=j1e(t,e);if(i!==-1)return t[i]}function z1e(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const l=i+r>>1,d=e(t[l]);d<0?i=l+1:d===0?(n=!0,i=l+1):r=l}return{found:n,index:n?i-1:i}}function V1e(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const l=i+r>>1,d=e(t[l]);d<0?i=l+1:(d===0&&(n=!0),r=l)}return{found:n,index:i}}function P_(t,e){let i=t.length;for(;i>0;)--i,e(t[i])||t.splice(i,1)}let P$=class{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},yr=class{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},B1e=class extends P${constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){Te(this._disposers,e=>{e.dispose()})}},rn=class extends P${constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){Te(this._disposers,e=>{e.dispose()})}},zV=class extends yr{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new yr(()=>{--this._counter,this._counter===0&&this.dispose()})}},df=class{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Te(e,i=>{i.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(e){return L1e(this._listeners,i=>(i.type===null||i.type===e)&&!i.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,i=1/0){this._disabled[e]=i}_removeListener(e){if(this._iterating===0){const i=this._listeners.indexOf(e);if(i===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(i,1)}else this._killed.push(e)}_removeExistingListener(e,i,r,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(l=>{l.once!==e||l.type!==i||r!==void 0&&l.callback!==r||l.context!==n||l.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&this._disabled[e]===void 0}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(i=>{i.type===e&&i.disposer.dispose()})}has(e,i,r){return NV(this._listeners,n=>n.once!==!0&&n.type===e&&(i===void 0||n.callback===i)&&n.context===r)!==-1}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const i=this._disabled[e];return rt(i)?(i<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{Te(this._listeners,e)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(Te(this._killed,i=>{this._removeListener(i)}),this._killed.length=0)}}dispatch(e,i){this._shouldDispatch(e)&&this._eachListener(r=>{r.killed||r.type!==null&&r.type!==e||r.dispatch(e,i)})}_on(e,i,r,n,l,d){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,i,r,n);const y={type:i,callback:r,context:n,shouldClone:l,dispatch:d,killed:!1,once:e,disposer:new yr(()=>{y.killed=!0,this._removeListener(y)})};return this._listeners.push(y),y}onAll(e,i,r=!0){return this._on(!1,null,e,i,r,(n,l)=>e.call(i,l)).disposer}on(e,i,r,n=!0){return this._on(!1,e,i,r,n,(l,d)=>i.call(r,d)).disposer}once(e,i,r,n=!0){const l=this._on(!0,e,i,r,n,(d,y)=>{l.disposer.dispose(),i.call(r,y)});return l.disposer}off(e,i,r){this._removeExistingListener(!1,e,i,r)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const i=[];return Te(e._listeners,r=>{!r.killed&&r.shouldClone&&(r.type===null?i.push(this.onAll(r.callback,r.context)):r.once?i.push(this.once(r.type,r.callback,r.context)):i.push(this.on(r.type,r.callback,r.context)))}),new rn(i)}};function Vf(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}let VV=class{constructor(e=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new df}),this._values=e}get values(){return this._values}contains(e){return this._values.indexOf(e)!==-1}removeValue(e){let i=0,r=this._values.length;for(;i<r;)this._values[i]===e?(this.removeIndex(i),--r):++i}indexOf(e){return d2(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,i){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:i})}_onSetIndex(e,i,r){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:i,newValue:r})}_onRemoveIndex(e,i){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:i})}_onMoveIndex(e,i,r){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:i,value:r})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,i){Vf(e,this._values.length);const r=this._values[e];return r!==i&&(this._values[e]=i,this._onSetIndex(e,r,i)),r}insertIndex(e,i){return Vf(e,this._values.length+1),A5(this._values,e,i),this._onInsertIndex(e,i),i}swap(e,i){const r=this._values.length;if(Vf(e,r),Vf(i,r),e!==i){const n=this._values[e],l=this._values[i];this._values[e]=l,this._onSetIndex(e,n,l),this._values[i]=n,this._onSetIndex(i,l,n)}}removeIndex(e){Vf(e,this._values.length);const i=this._values[e];return jA(this._values,e),this._onRemoveIndex(e,i),i}moveValue(e,i){let r=this.indexOf(e);if(r!==-1)if(jA(this._values,r),i==null){const n=this._values.length;this._values.push(e),this._onMoveIndex(r,n,e)}else A5(this._values,i,e),this._onMoveIndex(r,i,e);else i==null?(this._values.push(e),this._onPush(e)):(A5(this._values,i,e),this._onInsertIndex(i,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){Te(e,i=>{this.push(i)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const i=this._values;this._values=[],this._onClear(i),Te(e,r=>{this._values.push(r),this._onPush(r)})}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let i=0;i<e;++i)yield this._values[i]}each(e){Te(this._values,e)}eachReverse(e){Iy(this._values,e)}},G1e=class extends VV{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(e,i,r){this.autoDispose&&i.dispose(),super._onSetIndex(e,i,r)}_onRemoveIndex(e,i){this.autoDispose&&i.dispose(),super._onRemoveIndex(e,i)}_onClear(e){this.autoDispose&&Te(e,i=>{i.dispose()}),super._onClear(e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&Te(this._values,e=>{e.dispose()}))}},U6e=class extends G1e{constructor(e,i){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=i}},U1e=class extends VV{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(i=>{if(i.type==="clear")Te(i.oldValues,r=>{this._onRemoved(r)});else if(i.type==="push")this._onInserted(i.newValue);else if(i.type==="setIndex")this._onRemoved(i.oldValue),this._onInserted(i.newValue,i.index);else if(i.type==="insertIndex")this._onInserted(i.newValue,i.index);else if(i.type==="removeIndex")this._onRemoved(i.oldValue);else{if(i.type!=="moveIndex")throw new Error("Unknown IListEvent type");this._onRemoved(i.value),this._onInserted(i.value,i.newIndex)}})}_onInserted(e,i){e._setParent(this._container,!0);const r=this._container._childrenDisplay;i===void 0?r.addChild(e._display):r.addChildAt(e._display,i)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),Te(this.values,e=>{e.dispose()}))}},di=class qS{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(e,i){return e+this.value*(i-e)}static normalize(e,i,r){return e instanceof qS?e:new qS(i===r?0:100*Math.min(Math.max(1/(r-i)*(e-i),0),1))}};function Hm(t){return new di(t)}Hm(0);const Fi=Hm(100),Zi=Hm(50);function gs(t){return Object.keys(t)}function q1e(t,e){return gs(t).sort(e)}function H1e(t){return Object.assign({},t)}function Si(t,e){gs(t).forEach(i=>{e(i,t[i])})}function W1e(t,e){for(let i in t)if(J1e(t,i)&&!e(i,t[i]))break}function J1e(t,e){return{}.hasOwnProperty.call(t,e)}function Y1e(t){t.parentNode&&t.parentNode.removeChild(t)}function rr(t,e,i,r){return t.addEventListener(e,i,r||!1),new yr(()=>{t.removeEventListener(e,i,r||!1)})}function BV(t){return rr(window,"resize",e=>{t()})}function fd(t){switch(t){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function k5(t){return t.pointerId||0}function K1e(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function Z1e(t){t&&t.focus()}function HS(t){if(fd("pointerevents"))return t;if(fd("touchevents"))switch(t){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(fd("mouseevents"))switch(t){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return t}function FA(t){if(typeof Touch<"u"&&t instanceof Touch)return!0;if(typeof PointerEvent<"u"&&t instanceof PointerEvent&&t.pointerType!=null)switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(t.type!=null&&t.type.match(/^mouse/))return!1;return!0}function P5(t,e,i){t.style[e]=i}function X1e(t,e){return t.style[e]}function GV(t){if(t.composedPath){const e=t.composedPath();return e.length===0?null:e[0]}return t.target}function Q1e(t,e){let i=e;for(;;){if(t===i)return!0;if(i.parentNode===null){if(i.host==null)return!1;i=i.host}else i=i.parentNode}}function eye(t,e){return t.target&&Q1e(e.root.dom,t.target)}function Cp(t,e){t.style.pointerEvents=e?"auto":"none"}function tye(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}function iye(){return tye()?1:void 0}function lu(t,e){return rt(t)?t:t!=null&&rt(t.value)&&rt(e)?e*t.value:0}function W6e(t){let e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function Vi(t,e=0,i="0"){return typeof t!="string"&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function rye(t){return t.replace(/^[\s]*/,"")}function sye(t){return t.replace(/[\s]*$/,"")}function gb(t){return rye(sye(t))}function nye(t){if(t===void 0)return"string";let e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:t==="number"?"number":t==="date"?"date":t==="duration"?"duration":t.match(/[#0]/)?"number":t.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}function C$(t){return t.replace(/\/(date|number|duration)$/i,"")}function NA(t){return t&&t.replace(/<[^>]*>/g,"")}function zA(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function VA(t,e=!1){const i=new Date(t.getFullYear(),0,0),r=t.getTime()-i.getTime()+60*(i.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function p2(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-r);const n=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-n.getTime())/864e5+1)/7)}function oye(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;return i.setUTCDate(i.getUTCDate()+4-r),new Date(Date.UTC(i.getUTCFullYear(),0,1)).getFullYear()}function aye(t,e=!1){const i=p2(new Date(t.getFullYear(),t.getMonth(),1),e);let r=p2(t,e);return r==1&&(r=53),r-i+1}function lye(t,e,i=1,r=!1){let n=new Date(e,0,4,0,0,0,0);return r&&n.setUTCFullYear(e),7*t+i-((n.getDay()||7)+3)}function Kg(t,e){return t>12?t-=12:t===0&&(t=12),e!=null?t+(e-1):t}function Zg(t,e=!1,i=!1,r=!1){if(r)return e?"Coordinated Universal Time":"UTC";let n=t.toLocaleString("UTC"),l=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(n.length);return i===!1&&(l=l.replace(/ (standard|daylight|summer|winter) /i," ")),l}function uye(t){const e=new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:t})).getTime()-i.getTime())/6e4*-1}function J6e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function UV(t){let e,i,r,n=t.h,l=t.s,d=t.l;if(l==0)e=i=r=d;else{let y=function($,E,k){return k<0&&(k+=1),k>1&&(k-=1),k<.16666666666666666?$+6*(E-$)*k:k<.5?E:k<.6666666666666666?$+(E-$)*(.6666666666666666-k)*6:$},b=d<.5?d*(1+l):d+l-d*l,x=2*d-b;e=y(x,b,n+1/3),i=y(x,b,n),r=y(x,b,n-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*r)}}function qV(t){let e=t.r/255,i=t.g/255,r=t.b/255,n=Math.max(e,i,r),l=Math.min(e,i,r),d=0,y=0,b=(n+l)/2;if(n===l)d=y=0;else{let x=n-l;switch(y=b>.5?x/(2-n-l):x/(n+l),n){case e:d=(i-r)/x+(i<r?6:0);break;case i:d=(r-e)/x+2;break;case r:d=(e-i)/x+4}d/=6}return{h:d,s:y,l:b}}function hye(t,e){return t&&{r:Math.max(0,Math.min(255,t.r+vb(t.r,e))),g:Math.max(0,Math.min(255,t.g+vb(t.g,e))),b:Math.max(0,Math.min(255,t.b+vb(t.b,e))),a:t.a}}function vb(t,e){let i=e>0?255-t:t;return Math.round(i*e)}function cye(t,e){if(t){let i=vb(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}function BA(t){return(299*t.r+587*t.g+114*t.b)/1e3>=128}function dye(t,e){if(t===void 0||e==1)return t;let i=qV(t);return i.s=e,UV(i)}function pye(t,e={r:255,g:255,b:255},i={r:255,g:255,b:255}){let r=e,n=i;return BA(i)&&(r=i,n=e),BA(t)?n:r}function fye(t,e){return t||(t=[]),[...t,...e].filter((i,r,n)=>n.indexOf(i)===r)}function Y6e(t,e){return!!e&&t.left==e.left&&t.right==e.right&&t.top==e.top&&t.bottom==e.bottom}function HV(t){return t[0]==="#"&&(t=t.substr(1)),t.length==3&&(t=t[0].repeat(2)+t[1].repeat(2)+t[2].repeat(2)),parseInt(t,16)}function yye(t){let e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let i="";for(let r=1;r<=3;r++){let n=parseInt(e[r]).toString(16);n.length==1&&(n="0"+n),i+=n}return HV(i)}function Op(t){return et.fromAny(t)}class et{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(e=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+Vi(this.r.toString(16),2)+Vi(this.g.toString(16),2)+Vi(this.b.toString(16),2)}toHSL(e=1){return qV({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,i,r){const n=UV({h:e,s:i,l:r});return this.fromRGB(n.r,n.g,n.b)}toString(){return this.toCSSHex()}static fromHex(e){return new et(e)}static fromRGB(e,i,r){return new et((0|r)+(i<<8)+(e<<16))}static fromString(e){return new et(HV(e))}static fromCSS(e){return new et(yye(e))}static fromAny(e){if(G0(e)){if(e[0]=="#")return et.fromString(e);if(e.substr(0,3)=="rgb")return et.fromCSS(e)}else{if(rt(e))return et.fromHex(e);if(e instanceof et)return et.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,i,r){const n=pye({r:e.r,g:e.g,b:e.b},i?{r:i.r,g:i.g,b:i.b}:void 0,r?{r:r.r,g:r.g,b:r.b}:void 0);return this.fromRGB(n.r,n.g,n.b)}static interpolate(e,i,r,n="rgb"){if(n=="hsl"){const l=i.toHSL(),d=r.toHSL();return et.fromHSL(Hu(e,l.h,d.h),Hu(e,l.s,d.s),Hu(e,l.l,d.l))}return et.fromRGB(Hu(e,i.r,r.r),Hu(e,i.g,r.g),Hu(e,i.b,r.b))}static lighten(e,i){const r=hye({r:e.r,g:e.g,b:e.b},i);return et.fromRGB(r.r,r.g,r.b)}static brighten(e,i){const r=cye({r:e.r,g:e.g,b:e.b},i);return et.fromRGB(r.r,r.g,r.b)}static saturate(e,i){const r=dye({r:e.r,g:e.g,b:e.b},i);return et.fromRGB(r.r,r.g,r.b)}}function GA(t){return gv(this,void 0,void 0,function*(){if(t!==void 0){const e=[];Si(t,(i,r)=>{e.push(r.waitForStop())}),yield Promise.all(e)}})}function Hu(t,e,i){return e+t*(i-e)}function mye(t,e,i){return t>=1?i:e}function gye(t,e,i){return new di(Hu(t,e.percent,i.percent))}function vye(t,e,i){return et.interpolate(t,e,i)}function bye(t,e){return typeof t=="number"&&typeof e=="number"?Hu:t instanceof di&&e instanceof di?gye:t instanceof et&&e instanceof et?vye:mye}const WV=Math.PI,JV=WV/180,Ey=180/WV;function K6e(t,e,i){if(!rt(e)||e<=0){let r=Math.round(t);return i&&r-t==.5&&r--,r}{let r=Math.pow(10,e);return Math.round(t*r)/r}}function Z6e(t,e){if(!rt(e)||e<=0)return Math.ceil(t);{let i=Math.pow(10,e);return Math.ceil(t*i)/i}}function Qs(t,e,i){return Math.min(Math.max(t,e),i)}function WS(t){return Math.sin(JV*t)}function JS(t){return Math.cos(JV*t)}function wye(t){return(t%=360)<0&&(t+=360),t}function _ye(t,e,i,r,n){let l=Number.MAX_VALUE,d=Number.MAX_VALUE,y=-Number.MAX_VALUE,b=-Number.MAX_VALUE,x=[];x.push(C5(n,i)),x.push(C5(n,r));let $=Math.min(90*Math.floor(i/90),90*Math.floor(r/90)),E=Math.max(90*Math.ceil(i/90),90*Math.ceil(r/90));for(let k=$;k<=E;k+=90)k>=i&&k<=r&&x.push(C5(n,k));for(let k=0;k<x.length;k++){let P=x[k];P.x<l&&(l=P.x),P.y<d&&(d=P.y),P.x>y&&(y=P.x),P.y>b&&(b=P.y)}return{left:t+l,top:e+d,right:t+y,bottom:e+b}}function C5(t,e){return{x:t*JS(e),y:t*WS(e)}}function X6e(t){const e=t.length;if(e>0){let i=t[0],r=i.left,n=i.top,l=i.right,d=i.bottom;if(e>1)for(let y=1;y<e;y++)i=t[y],r=Math.min(i.left,r),l=Math.max(i.right,l),n=Math.min(i.top,n),d=Math.max(i.bottom,d);return{left:r,right:l,top:n,bottom:d}}return{left:0,right:0,top:0,bottom:0}}function UA(t){return t}function j1(t){return t*t*t}function Xg(t){return function(e){return 1-t(1-e)}}class xye{constructor(e,i){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=i,Si(i,r=>{this._userSettings[r]=!0})}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._userSettings[e]=!0,this.setRaw(e,i)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){gs(e).forEach(i=>{this.set(i,e[i])})}_eachSetting(e){Si(this._settings,e)}apply(){const e={stateAnimationEasing:!0,stateAnimationDuration:!0},i=this._entity.states.lookup("default");this._eachSetting((r,n)=>{e[r]||(e[r]=!0,this!==i&&(r in i._settings||(i._settings[r]=this._entity.get(r))),this._entity.set(r,n))})}applyAnimate(e){e==null&&(e=this._settings.stateAnimationDuration),e==null&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let i=this._settings.stateAnimationEasing;i==null&&(i=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",j1)));const r=this._entity.states.lookup("default"),n={stateAnimationEasing:!0,stateAnimationDuration:!0},l={};return this._eachSetting((d,y)=>{if(!n[d]){n[d]=!0,this!=r&&(d in r._settings||(r._settings[d]=this._entity.get(d)));const b=this._entity.animate({key:d,to:y,duration:e,easing:i});b&&(l[d]=b)}}),l}}class Sye{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new xye(this._entity,i);return this._states[e]=n,n}}remove(e){delete this._states[e]}apply(e){const i=this._states[e];i&&i.apply(),this._entity._applyState(e)}applyAnimate(e,i){let r;const n=this._states[e];return n&&(r=n.applyAnimate(i)),this._entity._applyStateAnimated(e,i),r}}class Mye{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.3.12"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}const Co=new Mye;function $ye(t){Co.licenses.push(t)}function yd(t,e){return t===e?0:t<e?-1:1}function YV(t,e,i){const r=t.length,n=e.length,l=Math.min(r,n);for(let d=0;d<l;++d){const y=i(t[d],e[d]);if(y!==0)return y}return yd(r,n)}function Q6e(t,e){return t===e?0:t<e?-1:1}let Tye=class{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),this._entity._markDirtyKey(e),new yr(()=>{on(r,i)&&this._entity._markDirtyKey(e)})}remove(e){const i=this._callbacks[e];i!==void 0&&(delete this._callbacks[e],i.length!==0&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,i){if(!this._disabled[e]){const r=this._callbacks[e];if(r!==void 0)for(let n=0,l=r.length;n<l;++n)i=r[n](i,this._entity,e)}return i}},Qg=class{constructor(e,i,r,n,l,d,y){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new df}),this._animation=e,this._from=i,this._to=r,this._duration=n,this._easing=l,this._loops=d,this._interpolate=bye(i,r),this._oldTime=y}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,i)=>{if(this._stopped)e();else{const r=()=>{n.dispose(),e()},n=this.events.on("stopped",r)}})}_checkEnded(){return!(this._loops>1)||(--this._loops,!1)}_run(e){this._oldTime!==null&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}},Iye=0,Eye=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++Iye}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}_checkDirty(){gs(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){if(this.isDisposed())return!1;{let i=!1;return Si(this._animatingSettings,(r,n)=>{if(n._stopped)this._stopAnimation(r);else if(n._playing){n._run(e);const l=n.percentage;l>=1?n._checkEnded()?this.set(r,n._value(1)):(i=!0,n._reset(e),this._set(r,n._value(1))):(i=!0,this._set(r,n._value(l)))}}),Si(this._animatingPrivateSettings,(r,n)=>{if(n._stopped)this._stopAnimationPrivate(r);else if(n._playing){n._run(e);const l=n.percentage;l>=1?n._checkEnded()?this.setPrivate(r,n._value(1)):(i=!0,n._reset(e),this._setPrivate(r,n._value(1))):(i=!0,this._setPrivate(r,n._value(l)))}}),i}}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new yr(()=>{on(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new yr(()=>{on(r,i),r.length===0&&delete this._privateSettingEvents[e]})}getRaw(e,i){const r=this._settings[e];return r!==void 0?r:i}get(e,i){return this.getRaw(e,i)}_sendKeyEvent(e,i){const r=this._settingEvents[e];r!==void 0&&Te(r,n=>{n(i,this,e)})}_sendPrivateKeyEvent(e,i){const r=this._privateSettingEvents[e];r!==void 0&&Te(r,n=>{n(i,this,e)})}_setRaw(e,i,r){this._prevSettings[e]=i,this._sendKeyEvent(e,r)}setRaw(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&this._setRaw(e,r,i)}_set(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&(this._setRaw(e,r,i),this._markDirtyKey(e))}_stopAnimation(e){const i=this._animatingSettings[e];i&&(delete this._animatingSettings[e],i.stop())}set(e,i){return this._set(e,i),this._stopAnimation(e),i}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){Te(gs(this._settings),e=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}_setPrivateRaw(e,i,r){this._prevPrivateSettings[e]=i,this._sendPrivateKeyEvent(e,r)}setPrivateRaw(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&this._setPrivateRaw(e,r,i)}_setPrivate(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&(this._setPrivateRaw(e,r,i),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const i=this._animatingPrivateSettings[e];i&&(i.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,i){return this._setPrivate(e,i),this._stopAnimationPrivate(e),i}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){Si(e,(i,r)=>{this.set(i,r)})}animate(e){const i=e.key,r=e.to,n=e.duration||0,l=e.loops||1,d=e.from===void 0?this.get(i):e.from,y=e.easing===void 0?UA:e.easing;if(n===0)this.set(i,r);else{if(d!==void 0&&d!==r){this.set(i,d);const x=this._animatingSettings[i]=new Qg(this,d,r,n,y,l,this._animationTime());return this._startAnimation(),x}this.set(i,r)}const b=new Qg(this,d,r,n,y,l,null);return b.stop(),b}animatePrivate(e){const i=e.key,r=e.to,n=e.duration||0,l=e.loops||1,d=e.from===void 0?this.getPrivate(i):e.from,y=e.easing===void 0?UA:e.easing;if(n===0)this.setPrivate(i,r);else{if(d!==void 0&&d!==r){this.setPrivate(i,d);const x=this._animatingPrivateSettings[i]=new Qg(this,d,r,n,y,l,this._animationTime());return this._startAnimation(),x}this.setPrivate(i,r)}const b=new Qg(this,d,r,n,y,l,null);return b.stop(),b}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},js=class extends Eye{constructor(e,i,r,n=[]){if(super(i),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Sye(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Tye(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=n,i.id&&this._registerId(i.id)}static new(e,i,r){const n=new this(e,i,!0);return n._template=r,n._afterNew(),n}static _new(e,i,r=[]){const n=new this(e,i,!0,r);return n._afterNew(),n}_afterNew(){this._checkDirty();let e=!1;const i=this._template;i&&(e=!0,i._setObjectTemplate(this)),Te(this._internalTemplates,r=>{e=!0,r._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),Te(this._internalTemplates,i=>{i._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new df}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(e,i){e in this._settings||super.set(e,i)}_setRawDefault(e,i){e in this._settings||super.setRaw(e,i)}_clearDirty(){gs(this._dirty).forEach(e=>{this._dirty[e]=!1}),gs(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return this.classNames.indexOf(e)!==-1}_pushPropertyDisposer(e,i){let r=this._disposerProperties[e];return r===void 0&&(r=this._disposerProperties[e]=[]),r.push(i),i}_disposeProperty(e){const i=this._disposerProperties[e];i!==void 0&&(Te(i,r=>{r.dispose()}),delete this._disposerProperties[e])}set template(e){const i=this._template;i!==e&&(this._template=e,i&&i._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,i){}get(e,i){const r=this.adapters.fold(e,this._settings[e]);return r!==void 0?r:i}isUserSetting(e){return this._userProperties[e]||!1}set(e,i){return this._userProperties[e]=!0,super.set(e,i)}setRaw(e,i){this._userProperties[e]=!0,super.setRaw(e,i)}_setSoft(e,i){return this._userProperties[e]?i:super.set(e,i)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,i){return this._userPrivateProperties[e]=!0,super.setPrivate(e,i)}setPrivateRaw(e,i){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,i)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,i,r){this._userProperties[i]||e===this._findTemplateByKey(i)&&super.set(i,r)}_setTemplatePrivateProperty(e,i,r){this._userPrivateProperties[i]||e===this._findTemplateByPrivateKey(i)&&super.setPrivate(i,r)}_removeTemplateProperty(e){if(!this._userProperties[e]){const i=this._findTemplateByKey(e);i?super.set(e,i._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const i=this._findTemplateByPrivateKey(e);i?super.setPrivate(e,i._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const i=this.states.create(e,{}),r={};this._eachTemplate(n=>{const l=n.states.lookup(e);l&&l._apply(i,r)}),Si(i._settings,n=>{r[n]||i._userSettings[n]||i.remove(n)})}_applyTemplate(e,i){this._templateDisposers.push(e._apply(this,i)),Si(e._settings,(r,n)=>{i.settings[r]||this._userProperties[r]||(i.settings[r]=!0,super.set(r,n))}),Si(e._privateSettings,(r,n)=>{i.privateSettings[r]||this._userPrivateProperties[r]||(i.privateSettings[r]=!0,super.setPrivate(r,n))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(i=>(e(i),!1)),Iy(this._internalTemplates,e),Te(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();const i={settings:{},privateSettings:{},states:{}};this._eachTemplate(r=>{this._applyTemplate(r,i)}),e&&(Si(this._settings,r=>{this._userProperties[r]||i.settings[r]||super.remove(r)}),Si(this._privateSettings,r=>{this._userPrivateProperties[r]||i.privateSettings[r]||super.removePrivate(r)}))}_findTemplate(e){const i=this._findStaticTemplate(e);if(i===void 0){const r=N1e(this._internalTemplates,e);return r===void 0?F1e(this._templates,e):r}return i}_findTemplateByKey(e){return this._findTemplate(i=>e in i._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(i=>e in i._privateSettings)}_disposeTemplates(){Te(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){Te(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(){let e=!1;const i=[];let r=[];const n=new Set,l=this.get("themeTagsSelf");return l&&Te(l,d=>{n.add(d)}),this._walkParents(d=>{d===this._root._rootContainer&&(e=!0),d._defaultThemes.length>0&&i.push(d._defaultThemes);const y=d.get("themes");y&&r.push(y);const b=d.get("themeTags");b&&Te(b,x=>{n.add(x)})}),r=i.concat(r),this._removeTemplates(),e&&Iy(this.classNames,d=>{const y=[];Te(r,b=>{Te(b,x=>{const $=x._lookupRules(d);$&&Iy($,E=>{if(E.tags.every(k=>n.has(k))){const k=V1e(y,P=>{const D=yd(E.tags.length,P.tags.length);return D===0?YV(E.tags,P.tags,yd):D});y.splice(k.index,0,E)}})})}),Te(y,b=>{this._templates.push(b.template),b.template._setObjectTemplate(this)})}),this._applyTemplates(),e&&(this._runSetup=!1),e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const i=this._prevSettings.id;i&&delete Co.entitiesById[i]}}_registerId(e){if(Co.entitiesById[e]&&Co.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');Co.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),Te(this._internalTemplates,r=>{r._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(r=>{r.dispose()}),Si(this._disposerProperties,(r,n)=>{Te(n,l=>{l.dispose()})});const i=this.get("id");i&&delete Co.entitiesById[i]}setTimeout(e,i){const r=setTimeout(()=>{this.removeDispose(n),e()},i),n=new yr(()=>{clearTimeout(r)});return this._disposers.push(n),n}removeDispose(e){if(!this.isDisposed()){let i=d2(this._disposers,e);i>-1&&this._disposers.splice(i,1)}e.dispose()}hasTag(e){return d2(this.get("themeTags",[]),e)!==-1}addTag(e){if(!this.hasTag(e)){const i=this.get("themeTags",[]);i.push(e),this.set("themeTags",i)}}removeTag(e){if(this.hasTag(e)){const i=this.get("themeTags",[]);Xu(i,e),this.set("themeTags",i)}}_t(e,i,...r){return this._root.language.translate(e,i,...r)}get root(){return this._root}};Object.defineProperty(js,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(js,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});let Aye=class{constructor(e,i,r){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=i,this._settings=r}get(e,i){const r=this._settings[e];return r!==void 0?r:i}set(e,i){this._settings[e]=i,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){gs(e).forEach(i=>{this._settings[i]=e[i]}),this._template._stateChanged(this._name)}_apply(e,i){Si(this._settings,(r,n)=>{i[r]||e._userSettings[r]||(i[r]=!0,e.setRaw(r,n))})}},kye=class{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new Aye(e,this._template,i);return this._states[e]=n,this._template._stateChanged(e),n}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,i){Si(this._states,(r,n)=>{let l=i.states[r];l==null&&(l=i.states[r]={});const d=e.states.create(r,{});n._apply(d,l)})}},Pye=class{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),new yr(()=>{on(r,i),r.length===0&&delete this._callbacks[e]})}remove(e){this._callbacks[e]!==void 0&&delete this._callbacks[e]}_apply(e){const i=[];return Si(this._callbacks,(r,n)=>{Te(n,l=>{i.push(e.adapters.add(r,l))})}),new rn(i)}},YS=class KV{constructor(e,i){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new kye(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Pye}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new df}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new KV(e,!0)}get entities(){return this._entities}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._settings[e]!==i&&(this.setRaw(e,i),this._entities.forEach(r=>{r._setTemplateProperty(this,e,i)}))}remove(e){e in this._settings&&(delete this._settings[e],this._entities.forEach(i=>{i._removeTemplateProperty(e)}))}removeAll(){Si(this._settings,(e,i)=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}setPrivateRaw(e,i){return this._privateSettings[e]=i,i}setPrivate(e,i){return this._privateSettings[e]!==i&&(this.setPrivateRaw(e,i),this._entities.forEach(r=>{r._setTemplatePrivateProperty(this,e,i)})),i}removePrivate(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(i=>{i._removeTemplatePrivateProperty(e)}))}setAll(e){Si(e,(i,r)=>{this.set(i,r)})}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new yr(()=>{on(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new yr(()=>{on(r,i),r.length===0&&delete this._privateSettingEvents[e]})}_apply(e,i){const r=[];return Si(this._settingEvents,(n,l)=>{Te(l,d=>{r.push(e.on(n,d))})}),Si(this._privateSettingEvents,(n,l)=>{Te(l,d=>{r.push(e.onPrivate(n,d))})}),this.states._apply(e,i),r.push(this.adapters._apply(e)),r.push(e.events.copyFrom(this.events)),new rn(r)}_setObjectTemplate(e){this._entities.push(e)}_removeObjectTemplate(e){Xu(this._entities,e)}_stateChanged(e){this._entities.forEach(i=>{i._applyStateByKey(e)})}},ZV=class XV extends df{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,i){return{type:e,originalEvent:i.event,point:i.point,simulated:i.simulated,native:i.native,target:this._sprite}}_onRenderer(e,i){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let r=this._rendererDisposers[e];if(r===void 0){const n=this._sprite._display.on(e,l=>{i.call(this,l)});r=this._rendererDisposers[e]=new zV(()=>{delete this._rendererDisposers[e],n.dispose()})}return r.increment()}_on(e,i,r,n,l,d){const y=super._on(e,i,r,n,l,d),b=XV.RENDERER_EVENTS[i];return b!==void 0&&(y.disposer=new rn([y.disposer,this._onRenderer(i,b)])),y}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,i){const r=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,i),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,i)}finally{this._dispatchParents=r}}};Object.defineProperty(ZV,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(t){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",t))&&this.dispatch("click",this._makePointerEvent("click",t))},rightclick:function(t){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",t))},middleclick:function(t){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",t))},dblclick:function(t){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",t))},pointerover:function(t){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",t))},pointerout:function(t){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",t))},pointerdown:function(t){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",t))},pointerup:function(t){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",t))},globalpointerup:function(t){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",t))},globalpointermove:function(t){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",t))},wheel:function(t){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:t.event,point:t.point})}}});let Vo=class extends js{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}_markDirtyKey(e){super._markDirtyKey(e),e!="x"&&e!="y"&&e!="dx"&&e!="dy"||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),e!="x"&&e!="y"||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new ZV(this)}_processTemplateField(){let e;const i=this.get("templateField");if(i){const r=this.dataItem;if(r){const n=r.dataContext;n&&(e=n[i],e instanceof YS||!e||(e=YS.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const i=this._dataItem;this._dataItem=e,this._processTemplateField();const r="dataitemchanged";e!=i&&this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this,oldDataItem:i,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof di||this.get("height")instanceof di?cm(e._percentageSizeChildren,this):on(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof di||this.get("y")instanceof di?cm(e._percentagePositionChildren,this):on(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const i=this.get("centerX");i!=null&&(this._display.pivot.x=e.left+lu(i,e.right-e.left));const r=this.get("centerY");r!=null&&(this._display.pivot.y=e.top+lu(r,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const i=this._tooltipPointerDp;i&&(i.dispose(),this._tooltipPointerDp=void 0),this.get("tooltipPosition")=="pointer"&&(this._tooltipPointerDp=new rn([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})}),this.events.on("pointerout",()=>{const r=this._tooltipMoveDp;r&&(r.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const e=this._display,i=this.events;if(this.isDirty("draggable")){const r=this.get("draggable");r?(this.set("interactive",!0),this._dragDp=new rn([i.on("pointerdown",n=>{this.dragStart(n)}),i.on("globalpointermove",n=>{this.dragMove(n)}),i.on("globalpointerup",n=>{this.dragStop(n)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!r}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const r=this.get("tooltipText"),n=this.get("tooltipHTML"),l=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(r||n)&&(l=="click"?this._tooltipDp=new rn([i.on("click",()=>{this.setTimeout(()=>this.showTooltip(),10)}),rr(document,"click",d=>{this.hideTooltip()})]):l=="always"||(this._tooltipDp=new rn([i.on("pointerover",()=>{this.showTooltip()}),i.on("pointerout",()=>{this.hideTooltip()})])))}if(this.isDirty("toggleKey")){let r=this.get("toggleKey");r&&r!="none"?this._toggleDp=i.on("click",()=>{this._isDragging||this.set(r,!this.get(r))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1))),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const r=this.parent;r&&(this.isDirty("width")&&this.get("width")instanceof di||this.isDirty("height")&&this.get("height")instanceof di)&&(r.markDirty(),r._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const r=this.get("wheelable");r&&this.set("interactive",!0),e.wheelable=!!r}if((this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter")),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new rn([i.on("focus",()=>{this.showTooltip()}),i.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const r=this.events;this.get("interactive")?this._hoverDp=new rn([r.on("click",n=>{FA(n.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})},10))}),r.on("globalpointerup",n=>{FA(n.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})),this._isDown&&this._handleUp(n)}),r.on("pointerover",()=>{this._handleOver()}),r.on("pointerout",()=>{this._handleOut()}),r.on("pointerdown",n=>{this._handleDown(n)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",!1)),this.get("showTooltipOn")=="always"&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const i="dragstop";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const i=k5(e.originalEvent);delete this._downPoints[i],gs(this._downPoints).length==0&&(this._isDown=!1)}}_hasMoved(e){const i=k5(e.originalEvent),r=this._downPoints[i];if(r){const n=Math.abs(r.x-e.point.x),l=Math.abs(r.y-e.point.y);return n>5||l>5}return!1}_hasDown(){return gs(this._downPoints).length>0}_handleDown(e){const i=this.parent;if(i&&!this.get("draggable")&&i._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const r=k5(e.originalEvent);this._downPoints[r]={x:e.point.x,y:e.point.y}}}dragMove(e){let i=this._dragEvent;if(i){if(i.simulated&&!e.simulated)return!0;let r=0,n=this.parent;for(;n!=null;)r+=n.get("rotation",0),n=n.parent;let l=e.point.x-i.point.x,d=e.point.y-i.point.y;const y=this.events;if(i.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const b="dragstart";y.isEnabled(b)&&y.dispatch(b,{type:b,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let b=this._dragPoint;this.set("x",b.x+l*JS(r)+d*WS(r)),this.set("y",b.y+d*JS(r)-l*WS(r));const x="dragged";y.isEnabled(x)&&y.dispatch(x,{type:x,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(l,d)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const b="dragstart";y.isEnabled(b)&&y.dispatch(b,{type:b,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,i=0;for(;;){if(!e)return i;++i,e=e.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){if(this.get("isMeasured")){const e=this._display;this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const i=this.parent;i&&this.get("position")!="absolute"&&(i.get("width")==null||i.get("height")==null||i.get("layout"))&&i.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let i;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),i=this._adjustedLocalBounds):(i={left:0,right:0,top:0,bottom:0},this._localBounds=i,this._adjustedLocalBounds=i),!e||e.left!==i.left||e.top!==i.top||e.right!==i.right||e.bottom!==i.bottom){const r="boundschanged";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}_fixMinBounds(e){let i=this.get("minWidth",this.getPrivate("minWidth")),r=this.get("minHeight",this.getPrivate("minHeight"));rt(i)&&e.right-e.left<i&&(e.right=e.left+i),rt(r)&&e.bottom-e.top<r&&(e.bottom=e.top+r);let n=this.getPrivate("width"),l=this.getPrivate("height");rt(n)&&(n>0?e.right=e.left+n:e.left=e.right+n),rt(l)&&(l>0?e.bottom=e.top+l:e.top=e.bottom+l)}_removeParent(e){e&&(e.children.removeValue(this),on(e._percentageSizeChildren,this),on(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.showTooltip(),this._handleOver()}unhover(){this.hideTooltip(),this._handleOut()}showTooltip(e){const i=this.getTooltip(),r=this.get("tooltipText"),n=this.get("tooltipHTML");if((r||n)&&i){const l=this.get("tooltipPosition"),d=this.getPrivate("tooltipTarget",this);l!="fixed"&&e||(this._display._setMatrix(),e=this.toGlobal(d._getTooltipPoint())),i.set("pointTo",e),i.set("tooltipTarget",d),i.get("x")||i.set("x",e.x),i.get("y")||i.set("y",e.y),r&&i.label.set("text",r),n&&i.label.set("html",n);const y=this.dataItem;if(y&&i.label._setDataItem(y),this.get("showTooltipOn")=="always"&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();i.label.text.markDirtyText();const b=i.show();return this.setPrivateRaw("showingTooltip",!0),b}}hideTooltip(){const e=this.getTooltip();if(e&&e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)){let i=e.get("keepTargetHover")&&e.get("stateAnimationDuration",0)==0?400:void 0;const r=e.hide(i);return this.setPrivateRaw("showingTooltip",!1),r}}_getTooltipPoint(){const e=this._localBounds;if(e){let i=0,r=0;return this.get("isMeasured")?(i=e.left+lu(this.get("tooltipX",0),e.right-e.left),r=e.top+lu(this.get("tooltipY",0),e.bottom-e.top)):(i=lu(this.get("tooltipX",0),this.width()),r=lu(this.get("tooltipY",0),this.height())),{x:i,y:r}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let i=this.parent;if(i)return i.getTooltip()}}_updatePosition(){const e=this.parent;let i=this.get("dx",0),r=this.get("dy",0),n=this.get("x"),l=this.getPrivate("x"),d=0,y=0;const b=this.get("position");n instanceof di&&(n=e?e.innerWidth()*n.value+e.get("paddingLeft",0):0),rt(n)?d=n+i:l!=null?d=l:e&&b=="relative"&&(d=e.get("paddingLeft",0)+i);let x=this.get("y"),$=this.getPrivate("y");x instanceof di&&(x=e?e.innerHeight()*x.value+e.get("paddingTop",0):0),rt(x)?y=x+r:$!=null?y=$:e&&b=="relative"&&(y=e.get("paddingTop",0)+r);const E=this._display;if(E.x!=d||E.y!=y){E.invalidateBounds(),E.x=d,E.y=y;const k="positionchanged";this.events.isEnabled(k)&&this.events.dispatch(k,{type:k,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),i=this.getPrivate("x");const r=this.parent;return r?e instanceof di?lu(e,r.innerWidth())+r.get("paddingLeft",0):rt(e)?e:i??r.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(e!=null)return e;let i=this.get("y");const r=this.parent;return r?i instanceof di?lu(i,r.innerHeight())+r.get("paddingTop",0):rt(i)?i:e??r.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,i=this.x(),r=this.y();return{left:e.left+i,right:e.right+i,top:e.top+r,bottom:e.bottom+r}}globalBounds(){const e=this.localBounds(),i=this.toGlobal({x:e.left,y:e.top}),r=this.toGlobal({x:e.right,y:e.top}),n=this.toGlobal({x:e.right,y:e.bottom}),l=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,n.x,l.x),top:Math.min(i.y,r.y,n.y,l.y),right:Math.max(i.x,r.x,n.x,l.x),bottom:Math.max(i.y,r.y,n.y,l.y)}}_onShow(e){}_onHide(e){}appear(e,i){return gv(this,void 0,void 0,function*(){return yield this.hide(0),i?new Promise((r,n)=>{this.setTimeout(()=>{r(this.show(e))},i)}):this.show(e)})}show(e){return gv(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const i=this.states.applyAnimate("default",e);yield GA(i),this._isShowing=!1}})}hide(e){return gv(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let i=this.states.lookup("hidden");i||(i=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const r=this.states.applyAnimate("hidden",e);yield GA(r),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}width(){let e=this.get("width"),i=this.get("maxWidth",this.getPrivate("maxWidth")),r=this.get("minWidth",this.getPrivate("minWidth")),n=this.getPrivate("width"),l=0;if(rt(n))l=n;else if(e==null)this._adjustedLocalBounds&&(l=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof di){const d=this.parent;l=d?d.innerWidth()*e.value:this._root.width()*e.value}else rt(e)&&(l=e);return rt(r)&&(l=Math.max(r,l)),rt(i)&&(l=Math.min(i,l)),l}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(rt(e))return e;{let r=this.get("width");if(rt(r))return r}const i=this.parent;return i?i.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(rt(e))return e;{let r=this.get("height");if(rt(r))return r}const i=this.parent;return i?i.innerHeight():this._root.height()}height(){let e=this.get("height"),i=this.get("maxHeight",this.getPrivate("maxHeight")),r=this.get("minHeight",this.getPrivate("minHeight")),n=this.getPrivate("height"),l=0;if(rt(n))l=n;else if(e==null)this._adjustedLocalBounds&&(l=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof di){const d=this.parent;l=d?d.innerHeight()*e.value:this._root.height()*e.value}else rt(e)&&(l=e);return rt(r)&&(l=Math.max(r,l)),rt(i)&&(l=Math.min(i,l)),l}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){this._parent&&this._walkParent(e)}_walkParent(e){this._parent&&this._parent._walkParent(e),e(this)}get parent(){return this._parent}_setParent(e,i=!1){const r=this._parent;e!==r&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,i&&(this._removeParent(r),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return q1e(this._downPoints,(e,i)=>e>i?1:e<i?-1:0)[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}};Object.defineProperty(Vo,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(Vo,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:js.classNames.concat([Vo.className])});let Ay=class extends js{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("color")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fill")||this.isDirty("fillOpacity"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),i=this.get("width",100),r=this.get("height",100),n=this.get("fill"),l=this.get("fillOpacity",1);this._display.clear(),this._backgroundDisplay.clear(),n&&l>0&&(this._backgroundDisplay.beginFill(n,l),this._backgroundDisplay.drawRect(0,0,i,r),this._backgroundDisplay.endFill()),this._display.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(this._display,this._backgroundDisplay,e,i,r)}}};Object.defineProperty(Ay,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(Ay,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:js.classNames.concat([Ay.className])});let ky=class extends Ay{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load()}_draw(){super._draw();const e=this._image;if(e){const i=this.get("width",100),r=this.get("height",100),n=this.get("fit","image");let l=0,d=0;n=="pattern"?(l=i,d=r):(l=e.width,d=e.height,n=="image"&&(this.set("width",l),this.set("height",d)));let y=0,b=0;this.get("centered",!0)&&(y=i/2-l/2,b=r/2-d/2),this._display.image(e,l,d,y,b)}}_load(){const e=this.get("src");if(e){const i=new Image;i.src=e,i.decode().then(()=>{this._image=i,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(r=>{})}}};var f2;Object.defineProperty(ky,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(ky,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ay.classNames.concat([ky.className])}),function(t){t.ADD="lighter",t.COLOR="color",t.COLOR_BURN="color-burn",t.COLOR_DODGE="color-dodge",t.DARKEN="darken",t.DIFFERENCE="difference",t.DST_OVER="destination-over",t.EXCLUSION="exclusion",t.HARD_LIGHT="hard-light",t.HUE="hue",t.LIGHTEN="lighten",t.LUMINOSITY="luminosity",t.MULTIPLY="multiply",t.NORMAL="source-over",t.OVERLAY="overlay",t.SATURATION="saturation",t.SCREEN="screen",t.SOFT_LIGHT="soft-light",t.SRC_ATOP="source-atop",t.XOR="xor"}(f2||(f2={}));const hMe=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset"];let El=class extends Vo{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");rt(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);const i=this.get("strokeDashoffset");i&&this._display.setLineDashOffset(i);const r=this.get("blendMode",f2.NORMAL);this._display.blendMode=r;const n=this.get("draw");n&&n(this._display,this);const l=this.get("svgPath");l!=null&&this._display.svgPath(l)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),i=this.get("fillGradient"),r=this.get("fillPattern"),n=this.get("fillOpacity"),l=this.get("stroke"),d=this.get("strokeGradient"),y=this.get("strokePattern"),b=this.get("shadowColor"),x=this.get("shadowBlur"),$=this.get("shadowOffsetX"),E=this.get("shadowOffsetY"),k=this.get("shadowOpacity");if(b&&(x||$||E)&&this._display.shadow(b,x,$,E,k),r){let P=!1;!e||r.get("fill")&&!r.get("fillInherited")||(r.set("fill",e),r.set("fillInherited",!0),P=!0),!l||r.get("color")&&!r.get("colorInherited")||(r.set("color",l),r.set("colorInherited",!0),P=!0),P&&r._changed();const D=r.pattern;D&&(this._display.beginFill(D,n),this._display.endFill(),r instanceof ky&&r.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}else if(i){if(e){const D=i.get("stops",[]);D.length&&Te(D,L=>{L.color&&!L.colorInherited||!e||(L.color=e,L.colorInherited=!0),(L.opacity==null||L.opacityInherited)&&(L.opacity=n,L.opacityInherited=!0)})}const P=i.getFill(this);P&&(this._display.beginFill(P,n),this._display.endFill())}else e&&(this._display.beginFill(e,n),this._display.endFill());if(l||d||y){const P=this.get("strokeOpacity");let D=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(D/=this.get("scale",1)),this.get("crisp")&&(D/=this._root._renderer.resolution);const L=this.get("lineJoin");if(y){let N=!1;!l||y.get("color")&&!y.get("colorInherited")||(y.set("color",l),y.set("colorInherited",!0),N=!0),N&&y._changed();const B=y.pattern;B&&(this._display.lineStyle(D,B,P,L),this._display.endStroke(),y instanceof ky&&y.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}else if(d){const N=d.get("stops",[]);N.length&&Te(N,W=>{W.color&&!W.colorInherited||!l||(W.color=l,W.colorInherited=!0),(W.opacity==null||W.opacityInherited)&&(W.opacity=P,W.opacityInherited=!0)});const B=d.getFill(this);B&&(this._display.lineStyle(D,B,P,L),this._display.endStroke())}else l&&(this._display.lineStyle(D,l,P,L),this._display.endStroke())}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}};Object.defineProperty(El,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(El,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Vo.classNames.concat([El.className])});let g0=class extends El{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}};function Al(t,e){t.get("reverseChildren",!1)?t.children.eachReverse(e):t.children.each(e)}Object.defineProperty(g0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(g0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:El.classNames.concat([g0.className])});let kl=class extends js{};Object.defineProperty(kl,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(kl,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:js.classNames.concat([kl.className])});let v0=class extends kl{updateContainer(e){let i=e.get("paddingLeft",0),r=e.innerWidth(),n=0;Al(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("width");if(y instanceof di){n+=y.value;let b=r*y.value,x=d.get("minWidth",d.getPrivate("minWidth",-1/0));x>b&&(r-=x,n-=y.value);let $=d.get("maxWidth",d.getPrivate("maxWidth",1/0));b>$&&(r-=$,n-=y.value)}else rt(y)||(y=d.width()),r-=y+d.get("marginLeft",0)+d.get("marginRight",0)}}),(r<=0||r==1/0)&&(r=.1),Al(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("width");if(y instanceof di){let b=r*y.value/n-d.get("marginLeft",0)-d.get("marginRight",0),x=d.get("minWidth",d.getPrivate("minWidth",-1/0)),$=d.get("maxWidth",d.getPrivate("maxWidth",1/0));b=Math.min(Math.max(x,b),$),d.setPrivate("width",b)}}});let l=i;Al(e,d=>{if(d.get("position")=="relative")if(d.isVisible()){let y=d.adjustedLocalBounds(),b=d.get("marginLeft",0),x=d.get("marginRight",0),$=d.get("maxWidth"),E=y.left,k=y.right;$&&k-E>$&&(k=E+$);let P=l+b-E;d.setPrivate("x",P),l=P+k+x}else d.setPrivate("x",void 0)})}};Object.defineProperty(v0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(v0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([v0.className])});let b0=class extends kl{updateContainer(e){let i=e.get("paddingTop",0),r=e.innerHeight(),n=0;Al(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("height");if(y instanceof di){n+=y.value;let b=r*y.value,x=d.get("minHeight",d.getPrivate("minHeight",-1/0));x>b&&(r-=x,n-=y.value);let $=d.get("maxHeight",d.getPrivate("maxHeight",1/0));b>$&&(r-=$,n-=y.value)}else rt(y)||(y=d.height()),r-=y+d.get("marginTop",0)+d.get("marginBottom",0)}}),(r<=0||r==1/0)&&(r=.1),Al(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("height");if(y instanceof di){let b=r*y.value/n-d.get("marginTop",0)-d.get("marginBottom",0),x=d.get("minHeight",d.getPrivate("minHeight",-1/0)),$=d.get("maxHeight",d.getPrivate("maxHeight",1/0));b=Math.min(Math.max(x,b),$),d.setPrivate("height",b)}}});let l=i;Al(e,d=>{if(d.get("position")=="relative")if(d.isVisible()){let y=d.adjustedLocalBounds(),b=d.get("marginTop",0),x=y.top,$=y.bottom,E=d.get("maxHeight");E&&$-x>E&&($=x+E);let k=d.get("marginBottom",0),P=l+b-x;d.setPrivate("y",P),l=P+$+k}else d.setPrivate("y",void 0)})}};Object.defineProperty(b0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(b0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([b0.className])});let md=class extends kl{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let i=e.get("paddingLeft",0),r=e.get("paddingRight",0),n=e.get("paddingTop",0),l=e.maxWidth()-i-r,d=l,y=1;Al(e,D=>{if(D.get("visible")&&D.getPrivate("visible")&&!D.get("forceHidden")&&D.get("position")!="absolute"){let L=D.width();L<d&&(d=L),L>y&&(y=L)}}),d=Qs(d,1,l),y=Qs(y,1,l);let b=1;b=this.get("fixedWidthGrid")?l/y:l/d,b=Math.max(1,Math.floor(b)),b=Math.min(this.get("maxColumns",Number.MAX_VALUE),b);let x=this.getColumnWidths(e,b,y,l),$=n,E=0,k=0;b=x.length;let P=i;Al(e,D=>{if(D.get("position")=="relative"&&D.isVisible()){const L=D.get("marginTop",0),N=D.get("marginBottom",0);let B=D.adjustedLocalBounds(),W=D.get("marginLeft",0),H=D.get("marginRight",0),Y=P+W-B.left,ie=$+L-B.top;D.setPrivate("x",Y),D.setPrivate("y",ie),P+=x[E]+H,k=Math.max(k,D.height()+L+N),E++,E>=b&&(E=0,P=i,$+=k)}})}getColumnWidths(e,i,r,n){let l=0,d=[],y=0;return Al(e,b=>{let x=b.adjustedLocalBounds();b.get("position")!="absolute"&&b.isVisible()&&(this.get("fixedWidthGrid")?d[y]=r:d[y]=Math.max(0|d[y],x.right-x.left+b.get("marginLeft",0)+b.get("marginRight",0)),y<e.children.length-1&&(y++,y==i&&(y=0)))}),Te(d,b=>{l+=b}),l>n?i>2?(i-=1,this.getColumnWidths(e,i,r,n)):[n]:d}};Object.defineProperty(md,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(md,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([md.className])});let Bo=class{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e,i=!1,r=!1){let n=[];e=this.escape(e);let l=i?e.split("'"):[e];for(let d=0;d<l.length;d++){let y=l[d];if(y!=="")if(d%2==0){y=y.replace(/\]\[/g,"]"+Ah+"["),y=y.replace(/\[\]/g,"[ ]");let b=y.split(/[\[\]]+/);for(let x=0;x<b.length;x++){let $=this.cleanUp(this.unescape(b[x]));$!==Ah&&$!==""&&(x%2==0?n.push({type:"value",text:$}):n.push({type:r?"value":"format",text:"["+$+"]"}))}}else{let b=y.split(/[\[\]]+/);for(let x=0;x<b.length;x++){let $=this.cleanUp(this.unescape(b[x]));$!==""&&(x%2==0?n.push({type:"text",text:$}):this.isImage($)?n.push({type:"image",text:"["+$+"]"}):n.push({type:"format",text:"["+$+"]"}))}}}return n}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let i={};if(e==""||e=="[ ]")return{};const r=e.match(/('[^']*')|("[^"]*")/gi);if(r)for(let l=0;l<r.length;l++)e=e.replace(r[l],r[l].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let n=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!n)return{};for(let l=0;l<n.length;l++)if(n[l].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))i.fontWeight=n[l];else if(n[l].match(/^(underline|line-through)$/i))i.textDecoration=n[l];else if(n[l]!="/")if(n[l].match(/:/)){const d=n[l].replace("+"," ").split(/:[ ]*/);i[d[0]]=d[1]}else i.fill=et.fromString(n[l]);return i}};function y2(t,e){if(e!=null){e=""+e;let i,r=(e=Bo.escape(e)).match(/\{([^}]+)\}/g);if(r)for(i=0;i<r.length;i++){let n=KS(t,r[i].replace(/\{([^}]+)\}/,"$1"));n==null&&(n=""),e=e.split(r[i]).join(n)}e=Bo.unescape(e)}else e="";return e}function KS(t,e,i){let r;const n=t.dataItem;let l,d=[],y=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;l=y.exec(e),l!==null;)if(l[3]){d.push({prop:l[3]});const b=t.getDateFormatter().get("dateFields",[]),x=t.getNumberFormatter().get("numericFields",[]),$=t.getDurationFormatter().get("durationFields",[]);b.indexOf(l[3])!==-1?d.push({method:"formatDate",params:[]}):x.indexOf(l[3])!==-1?d.push({method:"formatNumber",params:[]}):$.indexOf(l[3])!==-1&&d.push({method:"formatDuration",params:[]})}else{let b=[];if(gb(l[2])!=""){let x,$=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;x=$.exec(l[2]),x!==null;)b.push(x[1]||x[2]||x[3])}d.push({method:l[1],params:b})}if(n){r=Ic(t,d,n._settings),(r==null||k_(r))&&(r=Ic(t,d,n));let b=n.dataContext;r==null&&b&&(r=Ic(t,d,b),r==null&&(r=Ic(t,[{prop:e}],b)),r==null&&b.dataContext&&(r=Ic(t,d,b.dataContext))),r==null&&n.component&&n.component.dataItem!==n&&(r=KS(n.component,e))}return r==null&&(r=Ic(t,d,t)),r==null&&t.parent&&(r=KS(t.parent,e)),r}function Cye(t,e){const i=t.getPrivate("customData");if(k_(i))return i[e]}function Ic(t,e,i,r){let n=i,l=!1;for(let d=0,y=e.length;d<y;d++){let b=e[d];if(b.prop){if(n instanceof Vo){let x=n.get(b.prop);x==null&&(x=n.getPrivate(b.prop)),x==null&&(x=Cye(n,b.prop)),x==null&&(x=n[b.prop]),n=x}else if(n.get){let x=n.get(b.prop);x==null&&(x=n[b.prop]),n=x}else n=n[b.prop];if(n==null)return}else switch(b.method){case"formatNumber":let x=tn(n);x!=null&&(n=t.getNumberFormatter().format(x,r||b.params[0]||void 0),l=!0);break;case"formatDate":let $=C1e(n);if(!US($)||k$($.getTime()))return;$!=null&&(n=t.getDateFormatter().format($,r||b.params[0]||void 0),l=!0);break;case"formatDuration":let E=tn(n);E!=null&&(n=t.getDurationFormatter().format(E,r||b.params[0]||void 0,b.params[1]||void 0),l=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[b.method]&&n[b.method].apply(i,b.params)}}if(!l){let d=[{method:"",params:r}];if(r==null)rt(n)?(d[0].method="formatNumber",d[0].params=""):US(n)&&(d[0].method="formatDate",d[0].params="");else{let y=nye(r);y==="number"?d[0].method="formatNumber":y==="date"?d[0].method="formatDate":y==="duration"&&(d[0].method="formatDuration")}d[0].method&&(n=Ic(t,d,n))}return n}Object.defineProperty(Bo,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});let sn=class QV extends Vo{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new U1e(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){Iy(this.allChildren(),e=>{e.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate("x"),e.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty("maskContent")){const e=this._childrenDisplay;let i=this._contentMask;this.get("maskContent")?i||(i=g0.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=i,e.addChildAt(i._display,0),e.mask=i._display):i&&(e.removeChild(i._display),e.mask=null,i.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),Te(this._percentageSizeChildren,e=>{e._updateSize()}),Te(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){const e=this.get("background");let i=this._localBounds;if(i&&!this.isHidden()){let r=i.left,n=i.top,l=i.right-r,d=i.bottom-n,y=this.get("maxWidth"),b=this.get("maxHeight");b&&d>b&&(d=b),y&&l>y&&(l=y);let x=this.width(),$=this.height();e&&(e.setAll({width:l,height:d,x:r,y:n}),this._display.interactive&&(e._display.interactive=!0));const E=this._contentMask;E&&E.setAll({width:x+1,height:$+1});const k=this.get("verticalScrollbar");if(k){k.set("height",$),k.set("x",x-k.width()-k.get("marginRight",0)),k.set("end",k.get("start",0)+$/this._contentHeight);const P=k.get("background");P&&P.setAll({width:k.width(),height:$});let D=!0;this._contentHeight<=$&&(D=!1),k.setPrivate("visible",D)}}}_applyThemes(){return!!super._applyThemes()&&(this.eachChildren(e=>{e._applyThemes()}),!0)}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren(i=>{i.states.apply(e)})}_applyStateAnimated(e,i){super._applyStateAnimated(e,i),this.get("setStateOnChildren")&&this.eachChildren(r=>{r.states.applyAnimate(e,i)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let e=this.get("width"),i=this.get("height"),r=this.getPrivate("width"),n=this.getPrivate("height"),l={left:0,top:0,right:this.width(),bottom:this.height()},d=this.get("layout"),y=!1,b=!1;if((d instanceof v0||d instanceof md)&&(y=!0),d instanceof b0&&(b=!0),e==null&&r==null||i==null&&n==null||this.get("verticalScrollbar")){let x=Number.MAX_VALUE,$=x,E=-x,k=x,P=-x;const D=this.get("paddingLeft",0),L=this.get("paddingTop",0),N=this.get("paddingRight",0),B=this.get("paddingBottom",0);this.children.each(W=>{if(W.get("position")!="absolute"&&W.get("isMeasured")){let H=W.adjustedLocalBounds(),Y=W.x(),ie=W.y(),ne=Y+H.left,he=Y+H.right,de=ie+H.top,be=ie+H.bottom;y&&(ne-=W.get("marginLeft",0),he+=W.get("marginRight",0)),b&&(de-=W.get("marginTop",0),be+=W.get("marginBottom",0)),ne<$&&($=ne),he>E&&(E=he),de<k&&(k=de),be>P&&(P=be)}}),$==x&&($=0),E==-x&&(E=0),k==x&&(k=0),P==-x&&(P=0),l.left=$-D,l.top=k-L,l.right=E+N,l.bottom=P+B}this._contentWidth=l.right-l.left,this._contentHeight=l.bottom-l.top,rt(e)&&(l.left=0,l.right=e),rt(r)&&(l.left=0,l.right=r),rt(i)&&(l.top=0,l.bottom=i),rt(n)&&(l.top=0,l.bottom=n),this._localBounds=l}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const e=this.innerWidth(),i=this.innerHeight();if(e!=this._prevWidth||i!=this._prevHeight){let r=this.get("layout"),n=!1,l=!1;r&&((r instanceof v0||r instanceof md)&&(n=!0),r instanceof b0&&(l=!0)),Te(this._percentageSizeChildren,d=>{if(!n){let y=d.get("width");y instanceof di&&d.setPrivate("width",y.value*e)}if(!l){let y=d.get("height");y instanceof di&&d.setPrivate("height",y.value*i)}}),Te(this._percentagePositionChildren,d=>{d.markDirtyPosition(),d.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=i,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){const e=this.get("html");e&&e!==""?this._root._setHTMLContent(this,y2(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.children.removeValue(e.startGrip),e.children.removeValue(e.endGrip),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let i=this.get("background");i||(i=this.set("background",g0.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",r=>{const n=r.originalEvent;if(!eye(n,this))return;n.preventDefault();let l=n.deltaY/5e3;const d=e.get("start",0),y=e.get("end",1);d+l<=0&&(l=-d),y+l>=1&&(l=1-y),d+l>=0&&y+l<=1&&(e.set("start",d+l),e.set("end",y+l))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",()=>{let r=this._contentHeight;const n=this._childrenDisplay,l=this._contentMask;n.y=-e.get("start")*r,n.markDirtyLayer(),l&&(l._display.y=-n.y,n.mask=l._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const i=this._prevSettings.verticalScrollbar;i&&(this._display.removeChild(i._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const i=this.get("background");i instanceof Vo&&(i.set("isMeasured",!1),i._setParent(this),this._display.addChildAt(i._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),i=this._prevSettings.mask;if(i&&(this._display.removeChild(i._display),i!=e&&i.dispose()),e){const r=e.parent;r&&r.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(e){this.children.each(i=>{i instanceof QV&&i.walkChildren(e),e(i)})}eachChildren(e){const i=this.get("background");i&&e(i);const r=this.get("verticalScrollbar");r&&e(r);const n=this.get("mask");n&&e(n),this.children.values.forEach(l=>{e(l)})}allChildren(){const e=[];return this.eachChildren(i=>{e.push(i)}),e}_setDataItem(e){const i=e!==this._dataItem;super._setDataItem(e);const r=this.get("html","");r&&r!==""&&i&&this._root._setHTMLContent(this,y2(this,r))}};Object.defineProperty(sn,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(sn,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Vo.classNames.concat([sn.className])});let Py=class extends Vo{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(this.get("text"))super._updateBounds();else{let e={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=e}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let i=this.get("opacity",1);this._display.alpha=i}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),this.get("role")=="tooltip"&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new yr(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){let i=this.get("fill");i&&(e.fill=i)}if(this.isDirty("fillOpacity")){let i=this.get("fillOpacity",1);i&&(e.fillOpacity=i)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),Te(this._textStyles,i=>{this._dirty[i]&&(e[i]=this.get(i),this.markDirtyBounds())}),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&this.get("role")=="tooltip"&&this._root.updateTooltip(this)}_getText(){const e=this.get("text","");return this.get("populateText")?y2(this,e):e}markDirtyText(){this._display.text=this._getText(),this.get("role")=="tooltip"&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}};Object.defineProperty(Py,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(Py,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Vo.classNames.concat([Py.className])});let bb=class extends sn{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),Te(this._textKeys,e=>{const i=this.get(e);i!=null&&this._text.set(e,i)}),this.get("html","")!==""&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(Py.new(this._root,{}))}_updateChildren(){if(super._updateChildren(),Te(this._textKeys,e=>{this._text.set(e,this.get(e))}),this.isDirty("maxWidth")&&this._setMaxDimentions(),this.isDirty("maxHeight")&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),this.get("html","")!==""?this._text.set("text",""):this._text.set("text",this.get("text")),this.isDirty("textAlign")||this.isDirty("width")){const e=this.get("textAlign");let i;this.get("width")!=null?i=e=="right"?Fi:e=="center"?Zi:0:e=="left"||e=="start"?i=this.get("paddingLeft"):e!="right"&&e!="end"||(i=-this.get("paddingRight")),this.text.set("x",i)}}_setMaxDimentions(){const e=this.get("rotation"),i=e==90||e==270||e==-90,r=this.get("maxWidth",this.getPrivate("maxWidth",1/0));rt(r)?this.text.set(i?"maxHeight":"maxWidth",r-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(i?"maxHeight":"maxWidth",void 0);const n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));rt(n)?this.text.set(i?"maxWidth":"maxHeight",n-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(i?"maxWidth":"maxHeight",void 0)}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}getText(){return this._text._getText()}};Object.defineProperty(bb,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(bb,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:sn.classNames.concat([bb.className])});class Oye{constructor(e,i){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const i=new this(e,!0);return i.setupDefaultRules(),i}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,i=[]){let r=this._rules[e];r||(r=this._rules[e]=[]),i.sort(yd);const{index:n,found:l}=z1e(r,d=>{const y=yd(d.tags.length,i.length);return y===0?YV(d.tags,i,yd):y});if(l)return r[n].template;{const d=YS.new({});return r.splice(n,0,{tags:i,template:d}),d}}rule(e,i=[]){return this.ruleRaw(e,i)}}let w0=class extends El{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),i=this.height();if(e>0&&i>0){let r=this.get("cornerRadius",8);r=Qs(r,0,Math.min(e/2,i/2));let n=this.get("pointerX",0),l=this.get("pointerY",0),d=this.get("pointerBaseWidth",15)/2,y=0,b=0,x=0,$=(n-y)*(i-b)-(l-b)*(e-y),E=(n-x)*(0-i)-(l-i)*(e-x);const k=this._display;if(k.moveTo(r,0),$>0&&E>0){let P=Math.round(Qs(n,r+d,e-d-r));l=Qs(l,-1/0,0),k.lineTo(P-d,0),k.lineTo(n,l),k.lineTo(P+d,0)}if(k.lineTo(e-r,0),k.arcTo(e,0,e,r,r),$>0&&E<0){let P=Math.round(Qs(l,r+d,i-d-r));n=Qs(n,e,1/0),k.lineTo(e,r),k.lineTo(e,Math.max(P-d,r)),k.lineTo(n,l),k.lineTo(e,P+d)}if(k.lineTo(e,i-r),k.arcTo(e,i,e-r,i,r),$<0&&E<0){let P=Math.round(Qs(n,r+d,e-d-r));l=Qs(l,i,1/0),k.lineTo(e-r,i),k.lineTo(P+d,i),k.lineTo(n,l),k.lineTo(P-d,i)}if(k.lineTo(r,i),k.arcTo(0,i,0,i-r,r),$<0&&E>0){let P=Math.round(Qs(l,r+d,i-r-d));n=Qs(n,-1/0,0),k.lineTo(0,i-r),k.lineTo(0,P+d),k.lineTo(n,l),k.lineTo(0,Math.max(P-d,r))}k.lineTo(0,r),k.arcTo(0,0,r,0,r),k.closePath()}}}};Object.defineProperty(w0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(w0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:El.classNames.concat([w0.className])});let Cy=class extends sn{constructor(e,i,r,n=[]){super(e,i,r,n),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=fye(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",w0.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(bb.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",e=>{e&&(rr(e,"pointerover",i=>{this._htmlContentHovered=!0}),rr(e,"pointerout",i=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),Xu(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),this.get("labelText")!=null&&this.label.set("text",this.get("labelText")),this.get("labelHTML")!=null&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const e=this.get("background");this._keepHoverDp=new rn([e.events.on("pointerover",i=>{let r=this.get("tooltipTarget");r&&(r.parent&&r.parent.getPrivate("tooltipTarget")==r&&(r=r.parent),r.hover())}),e.events.on("pointerout",i=>{let r=this.get("tooltipTarget");r&&(r.parent&&r.parent.getPrivate("tooltipTarget")==r&&(r=r.parent),this._htmlContentHovered||r.unhover())})])}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const i=this.get("background");let r,n;e&&i&&(r=e.get("fill"),n=e.get("stroke"),r==null&&(r=n),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),r!=null&&i.set("fill",r),this._fillDp=e.on("fill",l=>{l!=null&&(i.set("fill",l),this._updateTextColor(l))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),r!=null&&i.set("stroke",r),this._strokeDp=e.on("fill",l=>{l!=null&&i.set("stroke",l)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),r!=null&&this.label.set("fill",r),this._labelDp=e.on("fill",l=>{l!=null&&this.label.set("fill",l)}),this._disposers.push(this._labelDp))),this._updateTextColor(r)}_updateTextColor(e){this.get("autoTextColor")&&(e==null&&(e=this.get("background").get("fill")),e==null&&(e=this._root.interfaceColors.get("background")),e instanceof et&&this.label.set("fill",et.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let i=.5,r=.5,n=this.get("centerX");n instanceof di&&(i=n.value);let l=this.get("centerY");l instanceof di&&(r=l.value);let d=e.width(),y=e.height(),b=this.parent,x=0,$=0;if(b){x=b.x(),$=b.y();const $e=b.get("layerMargin");$e&&(x+=$e.left||0,$+=$e.top||0,d+=($e.left||0)+($e.right||0),y+=($e.top||0)+($e.bottom||0))}const E=this.get("bounds",{left:-x,top:-$,right:d-x,bottom:y-$});this._updateBounds();let k=this.width(),P=this.height();k===0&&(k=this._w),P===0&&(P=this._h);let D=this.get("pointTo",{x:d/2,y:y/2}),L=D.x,N=D.y,B=this.get("pointerOrientation"),W=this.get("background"),H=0,Y=0,ie=0;W instanceof w0&&(H=W.get("pointerLength",0),Y=W.get("strokeWidth",0)/2,ie=Y,W.set("width",k),W.set("height",P));let ne=0,he=0,de=E.right-E.left,be=E.bottom-E.top;B=="horizontal"||B=="left"||B=="right"?(Y=0,B=="horizontal"?L>E.left+de/2?(L-=k*(1-i)+H,ie*=-1):L+=k*i+H:B=="left"?L+=k*(1-i)+H:(L-=k*i+H,ie*=-1)):(ie=0,B=="vertical"?N>E.top+P/2+H?N-=P*(1-r)+H:(N+=P*r+H,Y*=-1):B=="down"?N-=P*(1-r)+H:(N+=P*r+H,Y*=-1)),L=Qs(L,E.left+k*i,E.left+de-k*(1-i))+ie,N=Qs(N,E.top+P*r,E.top+be-P*(1-r))-Y,ne=D.x-L+k*i+ie,he=D.y-N+P*r-Y,this._fx=L,this._fy=N;const we=this.get("animationDuration",0);if(we>0&&this.get("visible")&&this.get("opacity")>.1){const $e=this.get("animationEasing");this.animate({key:"x",to:L,duration:we,easing:$e}),this.animate({key:"y",to:N,duration:we,easing:$e})}else this.set("x",L),this.set("y",N);W instanceof w0&&(W.set("pointerX",ne),W.set("pointerY",he)),k>0&&(this._w=k),P>0&&(this._h=P)}}};Object.defineProperty(Cy,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(Cy,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:sn.classNames.concat([Cy.className])});function Mt(t,e,i,r){t.set(e,i.get(r)),i.on(r,n=>{t.set(e,n)})}let Lye=class extends Oye{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,i=this._root.interfaceColors,r=this._root.horizontalLayout,n=this._root.verticalLayout,l=this.rule.bind(this);l("InterfaceColors").setAll({stroke:et.fromHex(15066597),fill:et.fromHex(15987699),primaryButton:et.fromHex(6788316),primaryButtonHover:et.fromHex(6779356),primaryButtonDown:et.fromHex(6872182),primaryButtonActive:et.fromHex(6872182),primaryButtonText:et.fromHex(16777215),primaryButtonStroke:et.fromHex(16777215),secondaryButton:et.fromHex(14277081),secondaryButtonHover:et.fromHex(10724259),secondaryButtonDown:et.fromHex(9276813),secondaryButtonActive:et.fromHex(15132390),secondaryButtonText:et.fromHex(0),secondaryButtonStroke:et.fromHex(16777215),grid:et.fromHex(0),background:et.fromHex(16777215),alternativeBackground:et.fromHex(0),text:et.fromHex(0),alternativeText:et.fromHex(16777215),disabled:et.fromHex(11382189),positive:et.fromHex(5288704),negative:et.fromHex(11730944)});{const d=l("ColorSet");d.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[et.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),d.setPrivate("currentStep",0),d.setPrivate("currentPass",0)}l("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:Xg(j1)}),l("Component").setAll({interpolationDuration:0,interpolationEasing:Xg(j1)}),l("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:Zi,tooltipY:Zi,tooltipPosition:"fixed",isMeasured:!0}),l("Sprite").states.create("default",{visible:!0,opacity:1}),l("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),l("Graphics").setAll({strokeWidth:1}),l("Chart").setAll({width:Fi,height:Fi,interactiveChildren:!1}),l("Sprite",["horizontal","center"]).setAll({centerX:Zi,x:Zi}),l("Sprite",["vertical","center"]).setAll({centerY:Zi,y:Zi}),l("Container",["horizontal","layout"]).setAll({layout:r}),l("Container",["vertical","layout"]).setAll({layout:n}),l("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),l("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),l("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),l("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),l("LinearGradient").setAll({rotation:90}),l("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:md.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),l("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:r,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const d=l("Rectangle",["legend","item","background"]);d.setAll({fillOpacity:0}),Mt(d,"fill",i,"background")}l("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:Zi,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),l("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:Fi,height:Fi,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const d=l("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});Mt(d,"fill",i,"disabled"),Mt(d,"stroke",i,"disabled")}l("Label",["legend","label"]).setAll({centerY:Zi,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),Mt(l("Label",["legend","label"]).states.create("disabled",{}),"fill",i,"disabled"),l("Label",["legend","value","label"]).setAll({centerY:Zi,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:Fi,populateText:!0}),Mt(l("Label",["legend","value","label"]).states.create("disabled",{}),"fill",i,"disabled"),l("HeatLegend").setAll({stepCount:1}),l("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),l("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:Fi,width:15}),l("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:Fi,height:15}),l("HeatLegend",["vertical"]).setAll({height:Fi}),l("HeatLegend",["horizontal"]).setAll({width:Fi}),l("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),l("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const d=l("Label");d.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),Mt(d,"fill",i,"text")}l("RadialLabel").setAll({textType:"regular",centerY:Zi,centerX:Zi,inside:!1,radius:0,baseRadius:Fi,orientation:"auto",textAlign:"center"}),l("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),l("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),l("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const d=l("Tick");d.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),Mt(d,"stroke",i,"grid")}l("Bullet").setAll({locationX:.5,locationY:.5}),l("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:Zi,centerY:Zi,animationEasing:Xg(j1),exportable:!1}),l("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:et.fromHex(16777215)});{const d=l("Label",["tooltip"]);d.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),Mt(d,"fill",i,"alternativeText")}l("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:r,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),l("Button").states.create("hover",{}),l("Button").states.create("down",{stateAnimationDuration:0}),l("Button").states.create("active",{});{const d=l("RoundedRectangle",["button","background"]);Mt(d,"fill",i,"primaryButton"),Mt(d,"stroke",i,"primaryButtonStroke")}Mt(l("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),Mt(l("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown"),Mt(l("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",i,"primaryButtonActive"),Mt(l("Graphics",["button","icon"]),"stroke",i,"primaryButtonText"),Mt(l("Label",["button"]),"fill",i,"primaryButtonText"),l("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:Fi,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const d=l("RoundedRectangle",["background","button","zoom"]);d.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Mt(d,"fill",i,"primaryButton")}Mt(l("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),Mt(l("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown");{const d=l("Graphics",["icon","button","zoom"]);d.setAll({crisp:!0,strokeOpacity:.7,draw:y=>{y.moveTo(0,0),y.lineTo(12,0)}}),Mt(d,"stroke",i,"primaryButtonText")}l("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:Zi,centerY:Zi,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const d=l("RoundedRectangle",["background","resize","button"]);d.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Mt(d,"fill",i,"secondaryButton"),Mt(d,"stroke",i,"secondaryButtonStroke")}Mt(l("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),Mt(l("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown");{const d=l("Graphics",["resize","button","icon"]);d.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:y=>{y.moveTo(0,.5),y.lineTo(0,12.5),y.moveTo(4,.5),y.lineTo(4,12.5)}}),Mt(d,"stroke",i,"secondaryButtonText")}l("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),l("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),l("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const d=l("RoundedRectangle",["play","background"]);d.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Mt(d,"fill",i,"primaryButton")}{const d=l("Graphics",["play","icon"]);d.setAll({stateAnimationDuration:0,dx:1,draw:y=>{y.moveTo(0,-5),y.lineTo(8,0),y.lineTo(0,5),y.lineTo(0,-5)}}),Mt(d,"fill",i,"primaryButtonText")}l("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),l("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:d=>{d.moveTo(-4,-5),d.lineTo(-1,-5),d.lineTo(-1,5),d.lineTo(-4,5),d.lineTo(-4,-5),d.moveTo(4,-5),d.lineTo(1,-5),d.lineTo(1,5),d.lineTo(4,5),d.lineTo(4,-5)}}),l("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const d=l("RoundedRectangle",["switch","background"]);d.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Mt(d,"fill",i,"primaryButton")}{const d=l("Circle",["switch","icon"]);d.setAll({radius:8,centerY:0,centerX:0,dx:0}),Mt(d,"fill",i,"primaryButtonText")}l("Graphics",["switch","icon"]).states.create("active",{dx:16}),l("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:Xg(j1)}),l("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:Fi}),l("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:Fi}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const d=l("RoundedRectangle",["scrollbar","main","background"]);d.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),Mt(d,"fill",i,"fill")}{const d=l("RoundedRectangle",["scrollbar","thumb"]);d.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),Mt(d,"fill",i,"secondaryButton")}Mt(l("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),Mt(l("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown"),l("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:Zi,width:Fi,centerX:Zi,ariaLabel:e.translate("Use up and down arrows to move selection")}),l("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:Zi,centerY:Zi,height:Fi,ariaLabel:e.translate("Use left and right arrows to move selection")});{const d=l("PointedRectangle",["axis","tooltip","background"]);d.setAll({cornerRadius:0}),Mt(d,"fill",i,"alternativeBackground")}l("Label",["axis","tooltip"]).setAll({role:void 0}),l("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),l("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),l("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),l("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),l("Star").setAll({spikes:5,innerRadius:5,radius:10}),l("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),l("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),l("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),l("SpriteResizer").setAll({rotationStep:10}),l("Container",["resizer","grip"]).states.create("hover",{});{const d=l("RoundedRectangle",["resizer","grip"]);d.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),Mt(d,"fill",i,"background"),Mt(d,"stroke",i,"alternativeBackground")}{const d=l("RoundedRectangle",["resizer","grip","outline"]);d.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),d.states.create("hover",{fillOpacity:.3}),Mt(d,"fill",i,"alternativeBackground")}l("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),l("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const d=l("Rectangle",["resizer","rectangle"]);d.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),Mt(d,"stroke",i,"alternativeBackground")}}};class Dye{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(e=>{Te(e,i=>{Te(this._targets,r=>{r.target===i.target&&r.callback()})})})}addTarget(e,i){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:i})}removeTarget(e){this._observer.unobserve(e),P_(this._targets,i=>i.target!==e)}}class C_{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,i){if(this._timer===null){let n=null;const l=()=>{const d=Date.now();(n===null||d>n+C_.delay)&&(n=d,Te(this._targets,y=>{let b=y.target.getBoundingClientRect();b.width===y.size.width&&b.height===y.size.height||(y.size=b,y.callback())})),this._targets.length===0?this._timer=null:this._timer=requestAnimationFrame(l)};this._timer=requestAnimationFrame(l)}let r={width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0};this._targets.push({target:e,callback:i,size:r})}removeTarget(e){P_(this._targets,i=>i.target!==e),this._targets.length===0&&this._timer!==null&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(C_,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let O5=null;function Rye(){return O5===null&&(O5=typeof ResizeObserver<"u"?new Dye:new C_),O5}class jye{constructor(e,i){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=Rye(),this._element=e,this._listener=BV(i),this._sensor.addTarget(e,i)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class wb extends js{}Object.defineProperty(wb,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(wb,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:js.classNames.concat([wb.className])});class Fye extends js{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",i="_small_number_suffix_",r="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(i+"24")},{number:1e-21,suffix:this._t(i+"21")},{number:1e-18,suffix:this._t(i+"18")},{number:1e-15,suffix:this._t(i+"15")},{number:1e-12,suffix:this._t(i+"12")},{number:1e-9,suffix:this._t(i+"9")},{number:1e-6,suffix:this._t(i+"6")},{number:.001,suffix:this._t(i+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(r+"B")},{number:1024,suffix:this._t(r+"KB")},{number:1048576,suffix:this._t(r+"MB")},{number:1073741824,suffix:this._t(r+"GB")},{number:1099511627776,suffix:this._t(r+"TB")},{number:0x4000000000000,suffix:this._t(r+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n;(i==null||G0(i)&&i.toLowerCase()==="number")&&(i=this.get("numberFormat",""));let l=Number(e);if(k_(i))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),i).format(l):new Intl.NumberFormat(void 0,i).format(l)}catch{return"Invalid"}else{i=C$(i);let d,y=this.parseFormat(i,this._root.language);d=l>this.get("negativeBase")?y.positive:l<this.get("negativeBase")?y.negative:y.zero,r==null||d.mod||(d=H1e(d),d.decimals.active=l==0?0:r),n=d.template.split(Ah).join(this.applyFormat(l,d))}return n}parseFormat(e,i){const r=i.translateEmpty("_thousandSeparator"),n=i.translateEmpty("_decimalSeparator");let l={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1}},d=(e=e.replace("||",t0)).split("|");return l.positive.source=d[0],d[2]===void 0?l.zero=l.positive:l.zero.source=d[2],d[1]===void 0?l.negative=l.positive:l.negative.source=d[1],Si(l,(y,b)=>{if(b.parsed)return;let x=b.source;x.toLowerCase()==="number"&&(x=this.get("numberFormat","#,###.#####"));let $=Bo.chunk(x,!0);for(let E=0;E<$.length;E++){let k=$[E];if(k.text=k.text.replace(t0,"|"),k.type==="value"){let P=k.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/);if(P)if(P===null||P[0]==="")b.template+=k.text;else{let D=P[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/);D&&(b.mod=D[0].toLowerCase(),b.modSpacing=!!P[0].match(/[ ]{1}[abespABESP%!]{1}$/));let L=P[0].split(".");if(L[0]!==""){b.thousands.active=(L[0].match(/0/g)||[]).length,b.thousands.passive=(L[0].match(/\#/g)||[]).length+b.thousands.active;let N=L[0].split(",");N.length===1||(b.thousands.interval=(N.pop()||"").length,b.thousands.interval===0&&(b.thousands.interval=-1))}L[1]===void 0||(b.decimals.active=(L[1].match(/0/g)||[]).length,b.decimals.passive=(L[1].match(/\#/g)||[]).length+b.decimals.active),b.template+=k.text.split(P[0]).join(Ah)}}else b.template+=k.text}b.parsed=!0}),l}applyFormat(e,i){let r=e<0;e=Math.abs(e);let n="",l="",d=i.mod?i.mod.split(""):[];if(d.indexOf("b")!==-1){let E=this.applyPrefix(e,this.get("bytePrefixes"),d.indexOf("!")!==-1);e=E[0],n=E[1],l=E[2],i.modSpacing&&(l=" "+l)}else if(d.indexOf("a")!==-1){let E=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),d.indexOf("!")!==-1);e=E[0],n=E[1],l=E[2],i.modSpacing&&(l=" "+l)}else if(d.indexOf("p")!==-1){let E=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(E)),n=this._root.language.translate("_percentPrefix"),l=this._root.language.translate("_percentSuffix"),n==""&&l==""&&(l="%")}else if(d.indexOf("%")!==-1){let E=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(E)),l="%"}else if(d.indexOf("")!==-1){let E=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(E)),l=""}if(d.indexOf("e")!==-1){let E;E=i.decimals.passive>=0?e.toExponential(i.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(E[0]),l="e"+E[1],i.modSpacing&&(l=" "+l)}else if(i.decimals.passive===0)e=Math.round(e);else if(i.decimals.passive>0){let E=Math.pow(10,i.decimals.passive);e=Math.round(e*E)/E}let y="",b=O1e(e).split("."),x=b[0];if(x.length<i.thousands.active&&(x=Array(i.thousands.active-x.length+1).join("0")+x),i.thousands.interval>0){let E=[],k=x.split("").reverse().join("");for(let P=0,D=x.length;P<=D;P+=i.thousands.interval){let L=k.substr(P,i.thousands.interval).split("").reverse().join("");L!==""&&E.unshift(L)}x=E.join(i.thousands.separator)}y+=x,b.length===1&&b.push("");let $=b[1];return $.length<i.decimals.active&&($+=Array(i.decimals.active-$.length+1).join("0")),$!==""&&(y+=i.decimals.separator+$),y===""&&(y="0"),e!==0&&r&&d.indexOf("s")===-1&&(y="-"+y),n&&(y=n+y),l&&(y+=l),y}applyPrefix(e,i,r=!1){let n=e,l="",d="",y=!1,b=1;for(let x=0,$=i.length;x<$;x++)i[x].number<=e&&(i[x].number===0?n=0:(n=e/i[x].number,b=i[x].number),l=i[x].prefix,d=i[x].suffix,y=!0);return!y&&r&&i.length&&e!=0&&(n=e/i[0].number,l=i[0].prefix,d=i[0].suffix,y=!0),y&&(n=parseFloat(n.toPrecision(Math.min(b.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,l,d]}escape(e){return e.replace("||",t0)}unescape(e){return e.replace(t0,"|")}}function eB(t,e){let i=0,r=0,n=1,l=0,d=0,y=0,b=0,x=0;return t.formatToParts(e).forEach($=>{switch($.type){case"year":i=+$.value;break;case"month":r=+$.value-1;break;case"day":n=+$.value;break;case"hour":l=+$.value;break;case"minute":d=+$.value;break;case"second":y=+$.value;break;case"fractionalSecond":b=+$.value;break;case"weekday":switch($.value){case"Sun":x=0;break;case"Mon":x=1;break;case"Tue":x=2;break;case"Wed":x=3;break;case"Thu":x=4;break;case"Fri":x=5;break;case"Sat":x=6}}}),l===24&&(l=0),{year:i,month:r,day:n,hour:l,minute:d,second:y,millisecond:b,weekday:x}}function qA(t,e){const{year:i,month:r,day:n,hour:l,minute:d,second:y,millisecond:b}=eB(t,e);return Date.UTC(i,r,n,l,d,y,b)}let Nye=class{constructor(e,i){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const i=this.offsetUTC(e),r=e.getTimezoneOffset(),n=new Date(e);n.setUTCMinutes(n.getUTCMinutes()-(i-r));const l=n.getTimezoneOffset();return r!=l&&n.setUTCMinutes(n.getUTCMinutes()+l-r),n}offsetUTC(e){return(qA(this._utc,e)-qA(this._dtf,e))/6e4}parseDate(e){return eB(this._dtf,e)}};class zye extends js{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i){let r;i!==void 0&&i!==""||(i=this.get("dateFormat","yyyy-MM-dd"));let n=e;if(k_(i))try{const y=this.get("intlLocales");return y?new Intl.DateTimeFormat(y,i).format(n):new Intl.DateTimeFormat(void 0,i).format(n)}catch{return"Invalid"}let l=this.parseFormat(i);const d=this._root.timezone;return d&&!this._root.utc&&(n=d.convertLocal(n)),rt(n.getTime())?(r=this.applyFormat(n,l),this.get("capitalize")&&(r=r.replace(/^.{1}/,r.substr(0,1).toUpperCase())),r):"Invalid date"}applyFormat(e,i){let r,n,l,d,y,b,x,$,E=i.template,k=e.getTime();this._root.utc?(r=e.getUTCFullYear(),n=e.getUTCMonth(),l=e.getUTCDay(),d=e.getUTCDate(),y=e.getUTCHours(),b=e.getUTCMinutes(),x=e.getUTCSeconds(),$=e.getUTCMilliseconds()):(r=e.getFullYear(),n=e.getMonth(),l=e.getDay(),d=e.getDate(),y=e.getHours(),b=e.getMinutes(),x=e.getSeconds(),$=e.getMilliseconds());for(let P=0,D=i.parts.length;P<D;P++){let L="";switch(i.parts[P]){case"G":L=this._t(r<0?"_era_bc":"_era_ad");break;case"yyyy":L=Math.abs(r).toString(),r<0&&(L+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":L=Math.abs(r).toString().substr(-i.parts[P].length),r<0&&(L+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let N=oye(e,this._root.utc);L=i.parts[P]=="YYYY"?Math.abs(N).toString():Math.abs(N).toString().substr(-i.parts[P].length),N<0&&(L+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":L=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":L=this._t(this._getMonth(n)).substr(0,1);break;case"MMMM":L=this._t(this._getMonth(n));break;case"MMM":L=this._t(this._getShortMonth(n));break;case"MM":L=Vi(n+1,2,"0");break;case"M":L=(n+1).toString();break;case"ww":L=Vi(p2(e,this._root.utc),2,"0");break;case"w":L=p2(e,this._root.utc).toString();break;case"W":L=aye(e,this._root.utc).toString();break;case"dd":L=Vi(d,2,"0");break;case"d":L=d.toString();break;case"DD":case"DDD":L=Vi(VA(e,this._root.utc).toString(),i.parts[P].length,"0");break;case"D":L=VA(e,this._root.utc).toString();break;case"t":L=this._root.language.translateFunc("_dateOrd").call(this,d);break;case"E":L=(l||7).toString();break;case"EE":L=Vi((l||7).toString(),2,"0");break;case"EEE":case"eee":L=this._t(this._getShortWeekday(l));break;case"EEEE":case"eeee":L=this._t(this._getWeekday(l));break;case"EEEEE":case"eeeee":L=this._t(this._getShortWeekday(l)).substr(0,1);break;case"e":case"ee":L=(l-(this._root.locale.firstDayOfWeek||1)+1).toString(),i.parts[P]=="ee"&&(L=Vi(L,2,"0"));break;case"a":L=y>=12?this._t("PM"):this._t("AM");break;case"aa":L=y>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":L=y>=12?this._t("P"):this._t("A");break;case"h":L=Kg(y).toString();break;case"hh":L=Vi(Kg(y),2,"0");break;case"H":L=y.toString();break;case"HH":L=Vi(y,2,"0");break;case"K":L=Kg(y,0).toString();break;case"KK":L=Vi(Kg(y,0),2,"0");break;case"k":L=(y+1).toString();break;case"kk":L=Vi(y+1,2,"0");break;case"m":L=b.toString();break;case"mm":L=Vi(b,2,"0");break;case"s":L=x.toString();break;case"ss":L=Vi(x,2,"0");break;case"S":case"SS":case"SSS":L=Math.round($/1e3*Math.pow(10,i.parts[P].length)).toString();break;case"x":L=k.toString();break;case"n":case"nn":case"nnn":L=Vi($,i.parts[P].length,"0");break;case"z":L=Zg(e,!1,!1,this._root.utc);break;case"zz":L=Zg(e,!0,!1,this._root.utc);break;case"zzz":L=Zg(e,!1,!0,this._root.utc);break;case"zzzz":L=Zg(e,!0,!0,this._root.utc);break;case"Z":case"ZZ":let B=this._root.utc?"UTC":this._root.timezone;B instanceof Nye&&(B=B.name);const W=B?uye(B):e.getTimezoneOffset();let H=Math.abs(W)/60,Y=Math.floor(H),ie=60*H-60*Y;this._root.utc&&(Y=0,ie=0),i.parts[P]=="Z"?(L="GMT",L+=W>0?"-":"+",L+=Vi(Y,2)+":"+Vi(ie,2)):(L=W>0?"-":"+",L+=Vi(Y,2)+Vi(ie,2));break;case"i":L=e.toISOString();break;case"I":L=e.toUTCString()}E=E.replace(Ah,L)}return E}parseFormat(e){let i={template:"",parts:[]},r=Bo.chunk(e,!0);for(let n=0;n<r.length;n++){let l=r[n];if(l.type==="value"){if(l.text.match(/^date$/i)){let y=this.get("dateFormat","yyyy-MM-dd");G0(y)||(y="yyyy-MM-dd"),l.text=y}let d=l.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(d)for(let y=0;y<d.length;y++)i.parts.push(d[y]),l.text=l.text.replace(d[y],Ah)}i.template+=l.text}return i}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,i){if(e instanceof Date)return e;if(rt(e))return new Date(e);let r;G0(e)||(e=e.toString());let n="";i=(i=C$(i)).substr(0,e.length);let l=this.parseFormat(i),d={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},y={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},b=0,x=0;for(let k=0;k<l.parts.length;k++){switch(x=k+b+1,l.parts[k]){case"yyyy":case"YYYY":n+="([0-9]{4})",d.year=x;break;case"yyy":case"YYY":n+="([0-9]{3})",d.year3=x;break;case"yy":case"YY":n+="([0-9]{2})",d.year2=x;break;case"y":case"Y":n+="([0-9]{1})",d.year1=x;break;case"MMMM":n+="("+this.getStringList(this._months()).join("|")+")",d.monthLong=x;break;case"MMM":n+="("+this.getStringList(this._shortMonths()).join("|")+")",d.monthShort=x;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",d.month=x;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",d.week=x;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",d.day=x;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",d.yearDay=x;break;case"dddd":n+="("+this.getStringList(this._weekdays()).join("|")+")",d.weekdayLong=x;break;case"ddd":n+="("+this.getStringList(this._shortWeekdays()).join("|")+")",d.weekdayShort=x;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",d.am=x;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",d.hour12Base1=x;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",d.hourBase0=x;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",d.hour12Base0=x;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",d.hourBase1=x;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",d.minute=x;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",d.second=x;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",d.millisecond=x,d.millisecondDigits=l.parts[k].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",d.millisecond=x;break;case"x":n+="([0-9]{1,})",d.timestamp=x;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",d.zone=x;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",d.zone=x;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",d.iso=x,b+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":b--}n+="[^0-9]*"}let $=new RegExp(n),E=e.match($);if(E){if(d.year>-1&&(y.year=parseInt(E[d.year])),d.year3>-1){let k=parseInt(E[d.year3]);k+=1e3,y.year=k}if(d.year2>-1){let k=parseInt(E[d.year2]);k+=k>50?1e3:2e3,y.year=k}if(d.year1>-1){let k=parseInt(E[d.year1]);k=10*Math.floor(new Date().getFullYear()/10)+k,y.year=k}if(d.monthLong>-1&&(y.month=this.resolveMonth(E[d.monthLong])),d.monthShort>-1&&(y.month=this.resolveShortMonth(E[d.monthShort])),d.month>-1&&(y.month=parseInt(E[d.month])-1),d.week>-1&&d.day===-1&&(y.month=0,y.day=lye(parseInt(E[d.week]),y.year,1,this._root.utc)),d.day>-1&&(y.day=parseInt(E[d.day])),d.yearDay>-1&&(y.month=0,y.day=parseInt(E[d.yearDay])),d.hourBase0>-1&&(y.hour=parseInt(E[d.hourBase0])),d.hourBase1>-1&&(y.hour=parseInt(E[d.hourBase1])-1),d.hour12Base0>-1){let k=parseInt(E[d.hour12Base0]);k==11&&(k=0),d.am>-1&&!this.isAm(E[d.am])&&(k+=12),y.hour=k}if(d.hour12Base1>-1){let k=parseInt(E[d.hour12Base1]);k==12&&(k=0),d.am>-1&&!this.isAm(E[d.am])&&(k+=12),y.hour=k}if(d.minute>-1&&(y.minute=parseInt(E[d.minute])),d.second>-1&&(y.second=parseInt(E[d.second])),d.millisecond>-1){let k=parseInt(E[d.millisecond]);d.millisecondDigits==2?k*=10:d.millisecondDigits==1&&(k*=100),y.millisecond=k}if(d.timestamp>-1){y.timestamp=parseInt(E[d.timestamp]);const k=new Date(y.timestamp);y.year=k.getUTCFullYear(),y.month=k.getUTCMonth(),y.day=k.getUTCDate(),y.hour=k.getUTCHours(),y.minute=k.getUTCMinutes(),y.second=k.getUTCSeconds(),y.millisecond=k.getUTCMilliseconds()}d.zone>-1&&(y.offset=this.resolveTimezoneOffset(new Date(y.year,y.month,y.day),E[d.zone])),d.iso>-1&&(y.year=tn(E[d.iso+0]),y.month=tn(E[d.iso+1])-1,y.day=tn(E[d.iso+2]),y.hour=tn(E[d.iso+3]),y.minute=tn(E[d.iso+4]),y.second=tn(E[d.iso+5]),y.millisecond=tn(E[d.iso+6]),E[d.iso+7]=="Z"||E[d.iso+7]=="z"?y.utc=!0:E[d.iso+7]!=""&&(y.offset=this.resolveTimezoneOffset(new Date(y.year,y.month,y.day),E[d.iso+7]))),r=y.utc?new Date(Date.UTC(y.year,y.month,y.day,y.hour,y.minute,y.second,y.millisecond)):new Date(y.year,y.month,y.day,y.hour,y.minute+y.offset,y.second,y.millisecond)}else r=new Date(e);return r}resolveTimezoneOffset(e,i){if(i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let r=i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),n=r[1],l=r[2],d=r[3],y=60*parseInt(l)+parseInt(d);return n=="+"&&(y*=-1),y-(e||new Date).getTimezoneOffset()}return 0}resolveMonth(e){let i=this._months().indexOf(e);return i>-1||!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._months()).indexOf(e),i>-1)?i:0}resolveShortMonth(e){let i=this._shortMonths().indexOf(e);return i>-1?i:(i=this._months().indexOf(e),i>-1||this._root.language&&!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._shortMonths()).indexOf(e),i>-1)?i:0)}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let i=[];for(let r=0;r<e.length;r++)this._root.language?i.push(zA(this._t(e[r]))):i.push(zA(e[r]));return i}}class Vye extends js{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",i="_duration_second",r="_duration_minute",n="_duration_hour",l="_duration_day",d="_duration_week",y="_duration_month",b="_duration_year",x="_second",$="_minute",E="_hour",k="_day",P="_week",D="_week",L="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+x),minute:this._t(e+$),hour:this._t(e+E),day:this._t(e+k),week:this._t(e+P),month:this._t(e+D),year:this._t(e+L)},second:{second:this._t(i),minute:this._t(i+$),hour:this._t(i+E),day:this._t(i+k),week:this._t(i+P),month:this._t(i+D),year:this._t(i+L)},minute:{minute:this._t(r),hour:this._t(r+E),day:this._t(r+k),week:this._t(r+P),month:this._t(r+D),year:this._t(r+L)},hour:{hour:this._t(n),day:this._t(n+k),week:this._t(n+P),month:this._t(n+D),year:this._t(n+L)},day:{day:this._t(l),week:this._t(l+P),month:this._t(l+D),year:this._t(l+L)},week:{week:this._t(d),month:this._t(d+D),year:this._t(d+L)},month:{month:this._t(y),year:this._t(y+L)},year:{year:this._t(b)}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n=r||this.get("baseUnit");i!==void 0&&i!==""||(i=this.get("durationFormat")!=null?this.get("durationFormat"):this.getFormat(tn(e),void 0,n)),i=C$(i);let l,d=this.parseFormat(i,n),y=Number(e);l=y>this.get("negativeBase")?d.positive:y<this.get("negativeBase")?d.negative:d.zero;let b=this.applyFormat(y,l);return l.color!==""&&(b="["+l.color+"]"+b+"[/]"),b}parseFormat(e,i){let r=i||this.get("baseUnit"),n={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},l=(e=e.replace("||",t0)).split("|");return n.positive.source=l[0],l[2]===void 0?n.zero=n.positive:n.zero.source=l[2],l[1]===void 0?n.negative=n.positive:n.negative.source=l[1],Si(n,(d,y)=>{if(y.parsed)return;let b=y.source,x=[];x=y.source.match(/^\[([^\]]*)\]/),x&&x.length&&x[0]!==""&&(b=y.source.substr(x[0].length),y.color=x[1]);let $=Bo.chunk(b,!0);for(let E=0;E<$.length;E++){let k=$[E];if(k.text=k.text.replace(t0,"|"),k.type==="value"){k.text.match(/[yYMdDwhHKkmsSn]+a/)&&(y.absolute=!0,k.text=k.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let P=k.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(P)for(let D=0;D<P.length;D++)P[D]==null&&(P[D]=this._unitAliases[P[D]]),y.parts.push(P[D]),k.text=k.text.replace(P[D],Ah)}y.template+=k.text}y.parsed=!0}),n}applyFormat(e,i){let r=!i.absolute&&e<this.get("negativeBase");e=Math.abs(e);let n=this.toTimeStamp(e,i.baseUnit),l=i.template;for(let d=0,y=i.parts.length;d<y;d++){let b=i.parts[d],x=this._toTimeUnit(b.substr(0,1)),$=b.length,E=Math.floor(n/this._getUnitValue(x));l=l.replace(Ah,Vi(E,$,"0")),n-=E*this._getUnitValue(x)}return r&&(l="-"+l),l}toTimeStamp(e,i){return e*this._getUnitValue(i)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,i,r){if(this.get("durationFormat")!=null)return this.get("durationFormat");if(r||(r=this.get("baseUnit")),i!=null&&e!=i){e=Math.abs(e),i=Math.abs(i);let n=this.getValueUnit(Math.max(e,i),r);return this.get("durationFormats")[r][n]}{let n=this.getValueUnit(e,r);return this.get("durationFormats")[r][n]}}getValueUnit(e,i){let r;i||(i=this.get("baseUnit"));let n=this.getMilliseconds(e,i);return W1e(this._getUnitValues(),(l,d)=>{if(l==i||r){if(n/d<=1)return r||(r=l),!1;r=l}return!0}),r}getMilliseconds(e,i){return i||(i=this.get("baseUnit")),e*this._getUnitValue(i)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const tB={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){let e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class Bye extends js{_setDefaults(){this.setPrivate("defaultLocale",tB),super._setDefaults()}translate(e,i,...r){i||(i=this._root.locale||this.getPrivate("defaultLocale"));let n=e,l=i[e];if(l===null)n="";else if(l!=null)l&&(n=l);else if(i!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...r);if(r.length)for(let d=r.length,y=0;y<d;++y)n=n.split("%"+(y+1)).join(r[y]);return n}translateAny(e,i,...r){return this.translate(e,i,...r)}setTranslationAny(e,i,r){(r||this._root.locale)[e]=i}setTranslationsAny(e,i){Si(e,(r,n)=>{this.setTranslationAny(r,n,i)})}translateEmpty(e,i,...r){let n=this.translate(e,i,...r);return n==e?"":n}translateFunc(e,i){return this._root.locale[e]?this._root.locale[e]:i!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,i){return this.isDefault()?e:D1e(e,r=>this.translate(r,i))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class L5{constructor(e=1,i=0,r=0,n=1,l=0,d=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=l,this.ty=d}setTransform(e,i,r,n,l,d=1){this.a=Math.cos(l)*d,this.b=Math.sin(l)*d,this.c=-Math.sin(l)*d,this.d=Math.cos(l)*d,this.tx=e-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const i=1/(this.a*this.d+this.c*-this.b);return{x:this.d*i*e.x+-this.c*i*e.y+(this.ty*this.c-this.tx*this.d)*i,y:this.a*i*e.y+-this.b*i*e.x+(-this.ty*this.a+this.tx*this.b)*i}}append(e){const i=this.a,r=this.b,n=this.c,l=this.d;this.a=e.a*i+e.b*n,this.b=e.a*r+e.b*l,this.c=e.c*i+e.d*n,this.d=e.c*r+e.d*l,this.tx=e.tx*i+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*l+this.ty}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var Gye=function(){function t(e,i){var r=[],n=!0,l=!1,d=void 0;try{for(var y,b=e[Symbol.iterator]();!(n=(y=b.next()).done)&&(r.push(y.value),!i||r.length!==i);n=!0);}catch(x){l=!0,d=x}finally{try{!n&&b.return&&b.return()}finally{if(l)throw d}}return r}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Oy=2*Math.PI,D5=function(t,e,i,r,n,l,d){var y=t.x,b=t.y;return{x:r*(y*=e)-n*(b*=i)+l,y:n*y+r*b+d}},Uye=function(t,e){var i=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(t),n=Math.sin(t),l=Math.cos(t+e),d=Math.sin(t+e);return[{x:r-n*i,y:n+r*i},{x:l+d*i,y:d-l*i},{x:l,y:d}]},HA=function(t,e,i,r){var n=t*i+e*r;return n>1&&(n=1),n<-1&&(n=-1),(t*r-e*i<0?-1:1)*Math.acos(n)},qye=function(t,e,i,r,n,l,d,y,b,x,$,E){var k=Math.pow(n,2),P=Math.pow(l,2),D=Math.pow($,2),L=Math.pow(E,2),N=k*P-k*L-P*D;N<0&&(N=0),N/=k*L+P*D;var B=(N=Math.sqrt(N)*(d===y?-1:1))*n/l*E,W=N*-l/n*$,H=x*B-b*W+(t+i)/2,Y=b*B+x*W+(e+r)/2,ie=($-B)/n,ne=(E-W)/l,he=(-$-B)/n,de=(-E-W)/l,be=HA(1,0,ie,ne),we=HA(ie,ne,he,de);return y===0&&we>0&&(we-=Oy),y===1&&we<0&&(we+=Oy),[H,Y,be,we]},Hye=function(t){var e=t.px,i=t.py,r=t.cx,n=t.cy,l=t.rx,d=t.ry,y=t.xAxisRotation,b=y===void 0?0:y,x=t.largeArcFlag,$=x===void 0?0:x,E=t.sweepFlag,k=E===void 0?0:E,P=[];if(l===0||d===0)return[];var D=Math.sin(b*Oy/360),L=Math.cos(b*Oy/360),N=L*(e-r)/2+D*(i-n)/2,B=-D*(e-r)/2+L*(i-n)/2;if(N===0&&B===0)return[];l=Math.abs(l),d=Math.abs(d);var W=Math.pow(N,2)/Math.pow(l,2)+Math.pow(B,2)/Math.pow(d,2);W>1&&(l*=Math.sqrt(W),d*=Math.sqrt(W));var H=qye(e,i,r,n,l,d,$,k,D,L,N,B),Y=Gye(H,4),ie=Y[0],ne=Y[1],he=Y[2],de=Y[3],be=Math.abs(de)/(Oy/4);Math.abs(1-be)<1e-7&&(be=1);var we=Math.max(Math.ceil(be),1);de/=we;for(var $e=0;$e<we;$e++)P.push(Uye(he,de)),he+=de;return P.map(function(ke){var Ge=D5(ke[0],l,d,L,D,ie,ne),Fe=Ge.x,ut=Ge.y,ii=D5(ke[1],l,d,L,D,ie,ne),Ze=ii.x,Xe=ii.y,ri=D5(ke[2],l,d,L,D,ie,ne);return{x1:Fe,y1:ut,x2:Ze,y2:Xe,x:ri.x,y:ri.y}})};function Wye(t,e,i){if(e!==i)throw new Error("Required "+i+" arguments for "+t+" but got "+e)}function F1(t,e,i){if(e<i)throw new Error("Required at least "+i+" arguments for "+t+" but got "+e)}function Gs(t,e,i){if(F1(t,e,i),e%i!=0)throw new Error("Arguments for "+t+" must be in pairs of "+i)}function Jye(t){for(let e=0;e<t.length;e+=7){let i=e+3,r=t[i];if(r.length>1){const n=/^([01])([01])(.*)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t.splice(i,0,n[2]),++i,n[3].length>0?t[i]=n[3]:t.splice(i,1))}if(++i,r=t[i],r.length>1){const n=/^([01])(.+)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t[i]=n[2])}}}function WA(t){if(t===0||t===1)return t;throw new Error("Flag must be 0 or 1")}function Yye(t){const e=[0,0,0];for(let i=0;i<24;i++)e[i%3]<<=1,e[i%3]|=1&t,t>>=1;return(0|e[2])+(e[1]<<8)+(e[0]<<16)}function ev(t,e){for(;(!t.interactive||e(t))&&t._parent;)t=t._parent}function Kye(t,e,i){return rr(t,HS(e),r=>{const n=GV(r);let l=r.touches;l?(l.length==0&&(l=r.changedTouches),i(R1e(l),n)):i([r],n)})}function JA(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i.drawImage(t,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+t.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function N1(t){t.width=0,t.height=0,t.style.width="0px",t.style.height="0px"}class Zye{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class O_ extends P${constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new Zye}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new L5}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new L5}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new L5}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,i){e==null?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=i,i&&Cp(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return this._colorId===void 0&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(){return this.inactive==0&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(){return this._isInteractive()}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();const i=this.getLocalMatrix(),r=i.apply({x:e.left,y:e.top}),n=i.apply({x:e.right,y:e.top}),l=i.apply({x:e.right,y:e.bottom}),d=i.apply({x:e.left,y:e.bottom});return{left:Math.min(r.x,n.x,l.x,d.x),top:Math.min(r.y,n.y,l.y,d.y),right:Math.max(r.x,n.x,l.x,d.x),bottom:Math.max(r.y,n.y,l.y,d.y)}}on(e,i,r){return this.interactive?this._renderer._addEvent(this,e,i,r):new yr(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,i){const r=this._matrix;let n=r.tx*i,l=r.ty*i;this.crisp&&(n=Math.floor(n)+.5,l=Math.floor(l)+.5),e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,n,l)}_transformMargin(e,i,r){const n=this._matrix;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,(n.tx+r.left)*i,(n.ty+r.top)*i)}_transformLayer(e,i,r){r.margin?this._transformMargin(e,r.scale||i,r.margin):this._transform(e,r.scale||i)}render(e){if(this.visible&&(this.exportable!==!1||!this._renderer._omitTainted)){this._setMatrix();const i=this._renderer.resolution,r=this._renderer.layers,n=this._renderer._ghostLayer,l=n.context,d=this.mask;d&&d._setMatrix(),Te(r,y=>{if(y){const b=y.context;b.save(),d&&(d._transformLayer(b,i,y),d._runPath(b),b.clip()),b.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(b,i,y),this.filter&&(b.filter=this.filter)}}),l.save(),d&&this._isInteractiveMask()&&(d._transformMargin(l,i,n.margin),d._runPath(l),l.clip()),this._transformMargin(l,i,n.margin),this._render(e),l.restore(),Te(r,y=>{y&&y.context.restore()})}}_render(e){this.exportable===!1&&((this._layer||e).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){const e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class Xye extends O_{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,i){e._parent=this,this._children.splice(i,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,on(this._children,e)}_render(e){super._render(e);const i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive;const r=this._layer||e;Te(this._children,n=>{n.compoundAlpha=this.compoundAlpha*this.alpha,n.render(r)}),this.interactive&&this.interactiveChildren&&--i._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),cm(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&Te(this._childLayers,i=>i.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&Te(this._childLayers,e=>{e.dirty=!0})}}function Gi(t,e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.right=Math.max(t.right,e.x),t.bottom=Math.max(t.bottom,e.y)}class br{colorize(e,i){}path(e){}addBounds(e){}}class Qye extends br{colorize(e,i){e.beginPath()}}class R5 extends br{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fillStyle=i!==void 0?i:this.color}}class eme extends br{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class tme extends br{colorize(e,i){e.stroke()}}class j5 extends br{constructor(e,i,r){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:r})}colorize(e,i){e.strokeStyle=i!==void 0?i:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}class ime extends br{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.setLineDash(this.dash)}}class rme extends br{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.lineDashOffset=this.dashOffset}}class sme extends br{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const i=this.x,r=this.y,n=i+this.width,l=r+this.height;Gi(e,{x:i,y:r}),Gi(e,{x:n,y:r}),Gi(e,{x:i,y:l}),Gi(e,{x:n,y:l})}}class nme extends br{constructor(e,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){Gi(e,{x:this.x-this.radius,y:this.y-this.radius}),Gi(e,{x:this.x+this.radius,y:this.y+this.radius})}}class ome extends br{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){Gi(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),Gi(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class ame extends br{constructor(e,i,r,n,l,d){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:d})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let i=_ye(this.cx,this.cy,this.startAngle*Ey,this.endAngle*Ey,this.radius);Gi(e,{x:i.left,y:i.top}),Gi(e,{x:i.right,y:i.bottom})}}class lme extends br{constructor(e,i,r,n,l){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class ume extends br{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.lineTo(this.x,this.y)}addBounds(e){Gi(e,{x:this.x,y:this.y})}}class hme extends br{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x,this.y)}addBounds(e){Gi(e,{x:this.x,y:this.y})}}class cme extends br{path(e){e.closePath()}}class dme extends br{constructor(e,i,r,n,l,d){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:d})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){Gi(e,{x:this.cpX,y:this.cpY}),Gi(e,{x:this.cpX2,y:this.cpY2}),Gi(e,{x:this.toX,y:this.toY})}}class pme extends br{constructor(e,i,r,n){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){Gi(e,{x:this.cpX,y:this.cpY}),Gi(e,{x:this.toX,y:this.toY})}}class fme extends br{constructor(e,i,r,n,l){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:l})}colorize(e,i){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}class yme extends br{constructor(e,i,r,n,l){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){Gi(e,{x:this.x,y:this.y}),Gi(e,{x:this.width,y:this.height})}}class mme extends O_{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:f2.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,i=1){this._fillAlpha=i,e?e instanceof et?this._pushOp(new R5(e.toCSS(i))):(this.isMeasured=!0,this._pushOp(new R5(e))):this._pushOp(new R5("rgba(0, 0, 0, "+i+")"))}endFill(){this._pushOp(new eme(this._hasShadows))}endStroke(){this._pushOp(new tme)}beginPath(){this._pushOp(new Qye)}lineStyle(e=0,i,r=1,n){this._strokeAlpha=r,i?i instanceof et?this._pushOp(new j5(e,i.toCSS(r),n)):this._pushOp(new j5(e,i,n)):this._pushOp(new j5(e,"rgba(0, 0, 0, "+r+")",n))}setLineDash(e){this._pushOp(new ime(e||[]))}setLineDashOffset(e=0){this._pushOp(new rme(e))}drawRect(e,i,r,n){this._pushOp(new sme(e,i,r,n))}drawCircle(e,i,r){this._pushOp(new nme(e,i,r))}drawEllipse(e,i,r,n){this._pushOp(new ome(e,i,r,n))}arc(e,i,r,n,l,d=!1){this._pushOp(new ame(e,i,r,n,l,d))}arcTo(e,i,r,n,l){this._pushOp(new lme(e,i,r,n,l))}lineTo(e,i){this._pushOp(new ume(e,i))}moveTo(e,i){this._pushOp(new hme(e,i))}bezierCurveTo(e,i,r,n,l,d){this._pushOp(new dme(e,i,r,n,l,d))}quadraticCurveTo(e,i,r,n){this._pushOp(new pme(e,i,r,n))}closePath(){this._pushOp(new cme)}shadow(e,i=0,r=0,n=0,l){this._hasShadows=!0,this._pushOp(new fme(l?e.toCSS(l):e.toCSS(this._fillAlpha||this._strokeAlpha),i,r,n))}image(e,i,r,n,l){this._pushOp(new yme(e,i,r,n,l))}svgPath(e){let i=0,r=0,n=null,l=null,d=null,y=null;const b=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,x=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let $;for(;($=b.exec(e))!==null;){const E=$[1],k=$[2],P=[];for(;($=x.exec(k))!==null;)P.push($[1]);switch(E!=="S"&&E!=="s"&&E!=="C"&&E!=="c"&&(n=null,l=null),E!=="Q"&&E!=="q"&&E!=="T"&&E!=="t"&&(d=null,y=null),E){case"M":Gs(E,P.length,2),i=+P[0],r=+P[1],this.moveTo(i,r);for(let L=2;L<P.length;L+=2)i=+P[L],r=+P[L+1],this.lineTo(i,r);break;case"m":Gs(E,P.length,2),i+=+P[0],r+=+P[1],this.moveTo(i,r);for(let L=2;L<P.length;L+=2)i+=+P[L],r+=+P[L+1],this.lineTo(i,r);break;case"L":Gs(E,P.length,2);for(let L=0;L<P.length;L+=2)i=+P[L],r=+P[L+1],this.lineTo(i,r);break;case"l":Gs(E,P.length,2);for(let L=0;L<P.length;L+=2)i+=+P[L],r+=+P[L+1],this.lineTo(i,r);break;case"H":F1(E,P.length,1);for(let L=0;L<P.length;++L)i=+P[L],this.lineTo(i,r);break;case"h":F1(E,P.length,1);for(let L=0;L<P.length;++L)i+=+P[L],this.lineTo(i,r);break;case"V":F1(E,P.length,1);for(let L=0;L<P.length;++L)r=+P[L],this.lineTo(i,r);break;case"v":F1(E,P.length,1);for(let L=0;L<P.length;++L)r+=+P[L],this.lineTo(i,r);break;case"C":Gs(E,P.length,6);for(let L=0;L<P.length;L+=6){const N=+P[L],B=+P[L+1];n=+P[L+2],l=+P[L+3],i=+P[L+4],r=+P[L+5],this.bezierCurveTo(N,B,n,l,i,r)}break;case"c":Gs(E,P.length,6);for(let L=0;L<P.length;L+=6){const N=+P[L]+i,B=+P[L+1]+r;n=+P[L+2]+i,l=+P[L+3]+r,i+=+P[L+4],r+=+P[L+5],this.bezierCurveTo(N,B,n,l,i,r)}break;case"S":Gs(E,P.length,4),n!==null&&l!==null||(n=i,l=r);for(let L=0;L<P.length;L+=4){const N=2*i-n,B=2*r-l;n=+P[L],l=+P[L+1],i=+P[L+2],r=+P[L+3],this.bezierCurveTo(N,B,n,l,i,r)}break;case"s":Gs(E,P.length,4),n!==null&&l!==null||(n=i,l=r);for(let L=0;L<P.length;L+=4){const N=2*i-n,B=2*r-l;n=+P[L]+i,l=+P[L+1]+r,i+=+P[L+2],r+=+P[L+3],this.bezierCurveTo(N,B,n,l,i,r)}break;case"Q":Gs(E,P.length,4);for(let L=0;L<P.length;L+=4)d=+P[L],y=+P[L+1],i=+P[L+2],r=+P[L+3],this.quadraticCurveTo(d,y,i,r);break;case"q":Gs(E,P.length,4);for(let L=0;L<P.length;L+=4)d=+P[L]+i,y=+P[L+1]+r,i+=+P[L+2],r+=+P[L+3],this.quadraticCurveTo(d,y,i,r);break;case"T":Gs(E,P.length,2),d!==null&&y!==null||(d=i,y=r);for(let L=0;L<P.length;L+=2)d=2*i-d,y=2*r-y,i=+P[L],r=+P[L+1],this.quadraticCurveTo(d,y,i,r);break;case"t":Gs(E,P.length,2),d!==null&&y!==null||(d=i,y=r);for(let L=0;L<P.length;L+=2)d=2*i-d,y=2*r-y,i+=+P[L],r+=+P[L+1],this.quadraticCurveTo(d,y,i,r);break;case"A":case"a":const D=E==="a";Jye(P),Gs(E,P.length,7);for(let L=0;L<P.length;L+=7){let N=+P[L+5],B=+P[L+6];D&&(N+=i,B+=r);const W=Hye({px:i,py:r,rx:+P[L],ry:+P[L+1],xAxisRotation:+P[L+2],largeArcFlag:WA(+P[L+3]),sweepFlag:WA(+P[L+4]),cx:N,cy:B});Te(W,H=>{this.bezierCurveTo(H.x1,H.y1,H.x2,H.y2,H.x,H.y),i=H.x,r=H.y})}break;case"Z":case"z":Wye(E,P.length,0),this.closePath()}}}_runPath(e){e.beginPath(),Te(this._operations,i=>{i.path(e)})}_render(e){super._render(e);const i=this._layer||e,r=i.dirty,n=this._isInteractive();if(r||n){const l=i.context,d=this._renderer._ghostLayer.context;let y;r&&(l.globalCompositeOperation=this.blendMode,l.beginPath()),n&&(d.beginPath(),y=this._getColorId()),Te(this._operations,b=>{r&&(b.path(l),b.colorize(l,void 0)),n&&(b.path(d),b.colorize(d,y))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const i=this.mask;i&&(i._setMatrix(),i._transform(e,1),i._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),Te(this._operations,r=>{r.path(e),r.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&Te(this._operations,i=>{i.addBounds(e)})}}class iB extends O_{constructor(e,i,r){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=i,this.style=r}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,i=!1,r=!1){super._render(e);const n=e.context,l=this._renderer._ghostLayer.context,d=this.style;let y=this._getFontStyle(void 0,r);n.font=y,this._isInteractive()&&!i&&(l.font=y),d.fill&&(d.fill instanceof et?n.fillStyle=d.fill.toCSS(d.fillOpacity!=null?d.fillOpacity:1):n.fillStyle=d.fill),d.shadowColor&&(e.context.shadowColor=d.shadowColor.toCSS(d.shadowOpacity||1)),d.shadowBlur&&(e.context.shadowBlur=d.shadowBlur),d.shadowOffsetX&&(e.context.shadowOffsetX=d.shadowOffsetX),d.shadowOffsetY&&(e.context.shadowOffsetY=d.shadowOffsetY),this._shared(n),this._isInteractive()&&!i&&(l.fillStyle=this._getColorId(),this._shared(l))}_getFontStyle(e,i=!1){const r=this.style;let n=[];return e&&e.fontVariant?n.push(e.fontVariant):r.fontVariant&&n.push(r.fontVariant),i||(e&&e.fontWeight?n.push(e.fontWeight):r.fontWeight&&n.push(r.fontWeight)),e&&e.fontStyle?n.push(e.fontStyle):r.fontStyle&&n.push(r.fontStyle),e&&e.fontSize?(rt(e.fontSize)&&(e.fontSize=e.fontSize+"px"),n.push(e.fontSize)):r.fontSize&&(rt(r.fontSize)&&(r.fontSize=r.fontSize+"px"),n.push(r.fontSize)),e&&e.fontFamily?n.push(e.fontFamily):r.fontFamily?n.push(r.fontFamily):n.length&&n.push("Arial"),n.join(" ")}_render(e){const i=this._layer||e;if(this._textInfo||this._measure(i),this.textVisible){const r=this._isInteractive(),n=i.context,l=i.dirty,d=this._renderer._ghostLayer.context;n.save(),d.save(),this._prerender(i),Te(this._textInfo,(y,b)=>{Te(y.textChunks,(x,$)=>{if(x.style&&(n.save(),d.save(),n.font=x.style,this._isInteractive()&&(d.font=x.style)),x.fill&&(n.save(),n.fillStyle=x.fill.toCSS()),l&&n.fillText(x.text,x.offsetX,y.offsetY+x.offsetY),x.textDecoration=="underline"||x.textDecoration=="line-through"){let E,k=1,P=1,D=x.height,L=x.offsetX;switch(this.style.textAlign){case"right":case"end":L-=x.width;break;case"center":L-=x.width/2}if(x.style)switch(Bo.getTextStyle(x.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":k=2}D&&(P=D/20),E=x.textDecoration=="line-through"?k+y.offsetY+x.offsetY-x.height/2:k+1.5*P+y.offsetY+x.offsetY,n.save(),n.beginPath(),x.fill?n.strokeStyle=x.fill.toCSS():this.style.fill&&this.style.fill instanceof et&&(n.strokeStyle=this.style.fill.toCSS()),n.lineWidth=k*P,n.moveTo(L,E),n.lineTo(L+x.width,E),n.stroke(),n.restore()}r&&this.interactive&&d.fillText(x.text,x.offsetX,y.offsetY+x.offsetY),x.fill&&n.restore(),x.style&&(n.restore(),d.restore())})}),n.restore(),d.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const i=this._measure(this.getLayer());Gi(e,{x:i.left,y:i.top}),Gi(e,{x:i.right,y:i.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const i=e.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl";this._textInfo=[];const l=this.style.oversizedBehavior,d=this.style.maxWidth,y=rt(d)&&l=="truncate",b=rt(d)&&(l=="wrap"||l=="wrap-no-break");i.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());const x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",$=this.text.toString().replace(/\r/g,"").split(/\n/);let E,k=!0,P=0,D=0,L=0;Te($,(B,W)=>{let H;for(H=B==""?[{type:"value",text:""}]:Bo.chunk(B,!1,this.style.ignoreFormatting);H.length>0;){let Y={offsetY:L,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const ie=this._measureText(x,i),ne=ie.actualBoundingBoxAscent+ie.actualBoundingBoxDescent;let he;Y.height=ne,Y.ascent=ie.actualBoundingBoxAscent;let de,be,we,$e=this.style.textDecoration,ke=!1,Ge=!0,Fe=[];FV(H,(ut,ii)=>{if(ut.type=="format")if(ut.text=="[/]")k||(i.restore(),r.restore(),k=!0),de=void 0,E=void 0,be=void 0,$e=this.style.textDecoration,we=void 0,he=ut.text;else{k||(i.restore(),r.restore());let Ze=Bo.getTextStyle(ut.text);const Xe=this._getFontStyle(Ze);i.save(),r.save(),i.font=Xe,E=Xe,he=ut.text,Ze.textDecoration&&($e=Ze.textDecoration),Ze.fill&&(de=Ze.fill),Ze.width&&(be=tn(Ze.width)),Ze.verticalAlign&&(we=Ze.verticalAlign),k=!1;const ri=this._measureText(x,i),Jn=ri.actualBoundingBoxAscent+ri.actualBoundingBoxDescent;Jn>Y.height&&(Y.height=Jn),ri.actualBoundingBoxAscent>Y.ascent&&(Y.ascent=ri.actualBoundingBoxAscent)}else if(ut.type=="value"&&!ke){const Ze=this._measureText(ut.text,i);let Xe=Ze.actualBoundingBoxLeft+Ze.actualBoundingBoxRight;if(y){let Ss=Ge||this.style.breakWords||!1;const dn=this.style.ellipsis||"",Vd=this._measureText(dn,i),gf=Vd.actualBoundingBoxLeft+Vd.actualBoundingBoxRight;if(Y.width+Xe>d){const vf=d-Y.width-gf;ut.text=this._truncateText(i,ut.text,vf,Ss),ut.text+=dn,ke=!0}}else if(b&&Y.width+Xe>d){const Ss=d-Y.width,dn=this._truncateText(i,ut.text,Ss,!1,Ge&&this.style.oversizedBehavior!="wrap-no-break");if(dn=="")return this.textVisible=!0,!1;Fe=H.slice(ii+1),gb(dn)!=gb(ut.text)&&(Fe.unshift({type:"value",text:ut.text.substr(dn.length)}),he&&Fe.unshift({type:"format",text:he})),ut.text=gb(dn),H=[],ke=!0}let ri=1,Jn=1;if(E&&be&&be>Xe){const Ss=Xe/be;switch(this.style.textAlign){case"right":case"end":ri=Ss;break;case"center":ri=Ss,Jn=Ss;break;default:Jn=Ss}Xe=be}const Yn=Ze.actualBoundingBoxAscent+Ze.actualBoundingBoxDescent;Yn>Y.height&&(Y.height=Yn),Ze.actualBoundingBoxAscent>Y.ascent&&(Y.ascent=Ze.actualBoundingBoxAscent),Y.width+=Xe,Y.left+=Ze.actualBoundingBoxLeft/ri,Y.right+=Ze.actualBoundingBoxRight/Jn,Y.textChunks.push({style:E,fill:de,text:ut.text,width:Xe,height:Yn,left:Ze.actualBoundingBoxLeft,right:Ze.actualBoundingBoxRight,ascent:Ze.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:$e,verticalAlign:we}),Ge=!1}return!0}),this.style.lineHeight instanceof di?(Y.height*=this.style.lineHeight.value,Y.ascent*=this.style.lineHeight.value):(Y.height*=this.style.lineHeight||1.2,Y.ascent*=this.style.lineHeight||1.2),P<Y.left&&(P=Y.left),D<Y.right&&(D=Y.right),this._textInfo.push(Y),L+=Y.height,H=Fe||[]}}),k||(i.restore(),r.restore()),Te(this._textInfo,(B,W)=>{let H=0;Te(B.textChunks,Y=>{if(Y.offsetX=H+Y.left-B.left,Y.offsetY+=B.height-B.height*(this.style.baselineRatio||.19),H+=Y.width,Y.verticalAlign)switch(Y.verticalAlign){case"super":Y.offsetY-=B.height/2-Y.height/2;break;case"sub":Y.offsetY+=Y.height/2}})});const N={left:n?-D:-P,top:0,right:n?P:D,bottom:L};if(l!=="none"){const B=this._fitRatio(N);if(B<1)if(l=="fit")rt(this.style.minScale)&&B<this.style.minScale?(this.textVisible=!1,N.left=0,N.top=0,N.right=0,N.bottom=0):(this._originalScale&&this._originalScale!=1||(this._originalScale=this.scale),this.scale=B,this.textVisible=!0);else if(l=="hide")this.textVisible=!1,N.left=0,N.top=0,N.right=0,N.bottom=0;else{switch(this.style.textAlign){case"right":case"end":N.left=-d,N.right=0;break;case"center":N.left=-d/2,N.right=d/2;break;default:N.left=0,N.right=d}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),r.restore(),N}_fitRatio(e){const i=this.style.maxWidth,r=this.style.maxHeight;if(!rt(i)&&!rt(r))return 1;const n=e.right-e.left,l=e.bottom-e.top;return Math.min(i/n||1,r/l||1)}_truncateText(e,i,r,n=!1,l=!0){let d;do{if(n)i=i.slice(0,-1);else{let b=i.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if(b==""&&l)n=!0;else{if(b=="")return i;i=b}}const y=this._measureText(i,e);d=y.actualBoundingBoxLeft+y.actualBoundingBoxRight}while(d>r&&i!="");return i}_measureText(e,i){let r=i.measureText(e),n={};if(r.actualBoundingBoxAscent==null){const d=document.createElement("div");d.innerText=e,d.style.visibility="hidden",d.style.position="absolute",d.style.top="-1000000px;",d.style.fontFamily=this.style.fontFamily||"",d.style.fontSize=this.style.fontSize+"",document.body.appendChild(d);const y=d.getBoundingClientRect();document.body.removeChild(d);const b=y.height,x=r.width;n={actualBoundingBoxAscent:b,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:x,fontBoundingBoxAscent:b,fontBoundingBoxDescent:0,width:x}}else n={actualBoundingBoxAscent:r.actualBoundingBoxAscent,actualBoundingBoxDescent:r.actualBoundingBoxDescent,actualBoundingBoxLeft:r.actualBoundingBoxLeft,actualBoundingBoxRight:r.actualBoundingBoxRight,fontBoundingBoxAscent:r.actualBoundingBoxAscent,fontBoundingBoxDescent:r.actualBoundingBoxDescent,width:r.width};const l=r.width;switch(this.style.textAlign){case"right":case"end":n.actualBoundingBoxLeft=l,n.actualBoundingBoxRight=0;break;case"center":n.actualBoundingBoxLeft=l/2,n.actualBoundingBoxRight=l/2;break;default:n.actualBoundingBoxLeft=0,n.actualBoundingBoxRight=l}return n}}class gme{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:Hm(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class vme extends iB{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){this.textType==="circular"?this._renderCircular(e):super._render(e)}_renderCircular(e){if(this.textVisible){const i=this._layer||e;this._prerender(i);const r=this._isInteractive(),n=i.context,l=i.dirty,d=this._renderer._ghostLayer.context;n.save(),r&&d.save(),this._textInfo||this._measure(i);let y=this.radius||0,b=this.startAngle||0,x=0,$=this.orientation,E=$=="auto"?"auto":$=="inward";const k=this.inside,P=this.style.textAlign||"left",D=this.kerning||0;let L=P=="left"?1:-1;const N=!this._textReversed;if(E=="auto"){let B=0,W=0;Te(this._textInfo,(H,Y)=>{const ie=b+H.width/(y-H.height)/2*-L;ie>B&&(B=ie)}),W=P=="left"?(B+x/2)*Ey:P=="right"?(B-x/2)*Ey:b*Ey,W=wye(W),E=W>=270||W<=90}E==1&&N&&(this._textInfo.reverse(),this._textReversed=!0),Te(this._textInfo,(B,W)=>{const H=B.height;k||(y+=H),(L==-1&&E||L==1&&!E)&&N&&B.textChunks.reverse();let Y=b;x=0,P=="center"&&(Y+=B.width/(y-H)/2*-L,x=Y-b),Y+=Math.PI*(E?0:1),n.save(),r&&d.save(),n.rotate(Y),r&&d.rotate(Y);let ie=0;Te(B.textChunks,(ne,he)=>{const de=ne.text,be=ne.width;ie=be/2/(y-H)*L,n.rotate(ie),r&&d.rotate(ie),ne.style&&(n.save(),d.save(),n.font=ne.style,r&&(d.font=ne.style)),ne.fill&&(n.save(),n.fillStyle=ne.fill.toCSS()),n.textBaseline="middle",n.textAlign="center",r&&(d.textBaseline="middle",d.textAlign="center"),l&&n.fillText(de,0,(E?1:-1)*(0-y+H/2)),r&&d.fillText(de,0,(E?1:-1)*(0-y+H/2)),ne.fill&&n.restore(),ne.style&&(n.restore(),d.restore()),ie=(be/2+D)/(y-H)*L,n.rotate(ie),r&&d.rotate(ie)}),n.restore(),r&&d.restore(),k&&(y-=H)}),n.restore(),r&&d.restore()}}_measure(e){return this.textType==="circular"?this._measureCircular(e):super._measure(e)}_measureCircular(e){const i=e.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl",l=this.style.oversizedBehavior,d=this.style.maxWidth,y=rt(d)&&l=="truncate",b=this.style.ellipsis||"";let x;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,i.save(),r.save(),this._prerender(e,!0);const $=this.text.toString().replace(/\r/g,"").split(/\n/);let E=!0,k=0,P=0;return Te($,(D,L)=>{let N,B,W,H=Bo.chunk(D,!1,this.style.ignoreFormatting),Y={offsetY:P,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};Te(H,(ie,ne)=>{if(ie.type=="format"){if(ie.text=="[/]")E||(i.restore(),r.restore(),E=!0),B=void 0,N=void 0,W=void 0;else{let he=Bo.getTextStyle(ie.text);const de=this._getFontStyle(he);i.save(),r.save(),i.font=de,N=de,he.fill&&(B=he.fill),he.width&&(W=tn(he.width)),E=!1}y&&(x=this._measureText(b,i))}else if(ie.type=="value"){const he=ie.text.match(/./gu)||[];n&&he.reverse();for(let de=0;de<he.length;de++){const be=he[de],we=this._measureText(be,i);let $e=we.width;N&&W&&W>$e&&($e=W);const ke=we.actualBoundingBoxAscent+we.actualBoundingBoxDescent;if(ke>Y.height&&(Y.height=ke),we.actualBoundingBoxAscent>Y.ascent&&(Y.ascent=we.actualBoundingBoxAscent),Y.width+=$e,Y.left+=we.actualBoundingBoxLeft,Y.right+=we.actualBoundingBoxRight,Y.textChunks.push({style:N,fill:B,text:be,width:$e,height:ke+we.actualBoundingBoxDescent,left:we.actualBoundingBoxLeft,right:we.actualBoundingBoxRight,ascent:we.actualBoundingBoxAscent,offsetX:0,offsetY:ke,textDecoration:void 0}),k+=$e,y){x||(x=this._measureText(b,i));const Ge=x.actualBoundingBoxLeft+x.actualBoundingBoxRight;if(k+=Ge,k+Ge>d){Y.textChunks.length==1?this.textVisible=!1:(Y.width+=Ge,Y.left+=x.actualBoundingBoxLeft,Y.right+=x.actualBoundingBoxRight,Y.textChunks.push({style:N,fill:B,text:b,width:Ge,height:ke+x.actualBoundingBoxDescent,left:x.actualBoundingBoxLeft,right:x.actualBoundingBoxRight,ascent:x.actualBoundingBoxAscent,offsetX:0,offsetY:ke,textDecoration:void 0}));break}}if(n)break}}}),this.style.lineHeight instanceof di?Y.height*=this.style.lineHeight.value:Y.height*=this.style.lineHeight||1.2,this._textInfo.push(Y),P+=Y.height}),E||(i.restore(),r.restore()),l=="hide"&&k>d&&(this.textVisible=!1),Te(this._textInfo,D=>{Te(D.textChunks,L=>{L.offsetY+=Math.round((D.height-L.height+(D.ascent-L.ascent))/2)})}),i.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class bme extends O_{constructor(e,i){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=i}_dispose(){super._dispose(),this._imageMask&&N1(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,i=0;this.width&&(e=this.width),this.height&&(i=this.height),this._localBounds={left:0,top:0,right:e,bottom:i},this._addBounds(this._localBounds)}return this._localBounds}_render(e){if(super._render(e),this.image){const i=this._layer||e;if(this.tainted===void 0&&(this.tainted=JA(this.image),i.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(i.dirty){this.shadowColor&&(i.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(i.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(i.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(i.context.shadowOffsetY=this.shadowOffsetY);const r=this.width||this.image.naturalWidth,n=this.height||this.image.naturalHeight;i.context.drawImage(this.image,0,0,r,n)}if(this.interactive&&this._isInteractive()){const r=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(r,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(this._imageMask===void 0){const i=this.width||e.naturalWidth,r=this.height||e.naturalHeight,n=document.createElement("canvas");n.width=i,n.height=r;const l=n.getContext("2d");l.imageSmoothingEnabled=!1,l.fillStyle=this._getColorId(),l.fillRect(0,0,i,r),JA(e)||(l.globalCompositeOperation="destination-in",l.drawImage(e,0,0,i,r)),this._imageMask=n}return this._imageMask}}class wme{constructor(e,i,r,n){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),fd("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class _me extends B1e{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new xme}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_domWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=e??window.devicePixelRatio,this.view.style.position="absolute",this.view.appendChild(this._layerDom),this._disposers.push(new yr(()=>{Si(this._events,(i,r)=>{r.disposer.dispose()}),Te(this.layers,i=>{N1(i.view),i.exportableView&&N1(i.exportableView)}),N1(this._ghostLayer.view),N1(this._patternCanvas)})),this._disposers.push(BV(()=>{e==null&&(this.resolution=window.devicePixelRatio)})),fd("touchevents")){const i=r=>{this._dragging.length!==0&&FV(this._dragging,n=>!n.value.shouldCancelTouch()||(r.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(rr(window,"touchstart",i,{passive:!1})),this._disposers.push(rr(this.view,"touchstart",i,{passive:!1})),this._disposers.push(rr(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(rr(window,"click",r=>{this._touchActive=!1},{passive:!0})),this._disposers.push(rr(this.view,"click",r=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}fd("wheelevents")&&this._disposers.push(rr(this.view,"wheel",i=>{let r=!1;this._hovering.forEach(n=>{if(n.wheelable)return r=!0,!1}),r&&i.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,i,r,n){return this.defaultLayer.context.createLinearGradient(e,i,r,n)}createRadialGradient(e,i,r,n,l,d){return this.defaultLayer.context.createRadialGradient(e,i,r,n,l,d)}createPattern(e,i,r,n,l){return this._patternCanvas.width=n,this._patternCanvas.height=l,this._patternContext.clearRect(0,0,n,l),i.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,r)}makeContainer(){return new Xye(this)}makeGraphics(){return new mme(this)}makeText(e,i){return new iB(this,e,i)}makeTextStyle(){return new gme}makeRadialText(e,i){return new vme(this,e,i)}makePicture(e){return new bme(this,e)}resizeLayer(e){e.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resize(e,i,r,n){this._canvasWidth=e,this._canvasHeight=i,this._domWidth=r,this._domHeight=n,Te(this.layers,l=>{l&&(l.dirty=!0,this.resizeLayer(l))}),this.resizeGhost(),this.view.style.width=r+"px",this.view.style.height=n+"px"}createDetachedLayer(e=!1){const i=document.createElement("canvas"),r=i.getContext("2d",{willReadFrequently:e}),n=new Sme(i,r);return i.style.position="absolute",i.style.top="0px",i.style.left="0px",n}getLayerByOrder(e){const i=this.layers,r=i.length;for(let n=0;n<r;n++){const l=i[n];if(l.order==e)return l}}getLayer(e,i=!0){let r=this.getLayerByOrder(e);if(r)return r;const n=this.createDetachedLayer(e==99);n.order=e,n.visible=i,n.visible&&this.resizeLayer(n);const l=this.layers;l.push(n),l.sort((b,x)=>b.order>x.order?1:b.order<x.order?-1:0);const d=l.length;let y;for(let b=d2(l,n)+1;b<d;b++)if(l[b].visible){y=l[b];break}return n.visible&&(y===void 0?this._layerDom.appendChild(n.view):this._layerDom.insertBefore(n.view,y.view)),n}render(e){if(this._dirtyLayers.length=0,Te(this.layers,i=>{i&&i.dirty&&i.visible&&(this._dirtyLayers.push(i),i.clear())}),this._ghostLayer.clear(),e.render(this.defaultLayer),this._ghostLayer.context.restore(),Te(this.layers,i=>{if(i){const r=i.context;r.beginPath(),r.moveTo(0,0),r.stroke()}}),Te(this._dirtyLayers,i=>{i.context.restore(),i.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:i,target:r,native:n}=this._lastPointerMoveEvent;Te(i,l=>{this._dispatchGlobalMousemove(l,r,n)})}}paintId(e){const i=Yye(++this._colorId),r=et.fromHex(i).toCSS();return this._colorMap[r]=e,r}_removeObject(e){e._colorId!==void 0&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const i=this._ghostLayer.margin;return new DOMRect(e.left-i.left,e.top-i.top,e.width+i.left+i.right,e.height+i.top+i.bottom)}getEvent(e,i=!0){const r=this.view.getBoundingClientRect(),n={x:e.clientX||0,y:e.clientY||0},l={x:n.x-(i?r.left:0),y:n.y-(i?r.top:0)};return new wme(e,n,l,this._adjustBoundingBox(r))}_getHitTarget(e,i,r){if(i.width===0||i.height===0||e.x<i.left||e.x>i.right||e.y<i.top||e.y>i.bottom||!r||!this._layerDom.contains(r))return;const n=this._ghostLayer.getImageData(e,i);if(n.data[0]===0&&n.data[1]===0&&n.data[2]===0)return!1;const l=et.fromRGB(n.data[0],n.data[1],n.data[2]).toCSS();return this._colorMap[l]}_withEvents(e,i){const r=this._events[e];if(r!==void 0){r.dispatching=!0;try{i(r)}finally{r.dispatching=!1,r.cleanup&&(r.cleanup=!1,P_(r.callbacks,n=>!n.disposed),r.callbacks.length===0&&(r.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,i){this.interactionsEnabled&&this._withEvents(e,r=>{Te(r.callbacks,n=>{n.disposed||n.callback.call(n.context,i)})})}_dispatchEvent(e,i,r){if(!this.interactionsEnabled)return!1;let n=!1;return this._withEvents(e,l=>{Te(l.callbacks,d=>{d.disposed||d.object!==i||(d.callback.call(d.context,r),n=!0)})}),n}_dispatchMousedown(e,i){const r=e.button;if(r!=0&&r!=2&&r!=1&&r!==void 0)return;const n=this.getEvent(e),l=this._getHitTarget(n.originalPoint,n.bbox,i);if(l){const d=n.id;let y=!1;ev(l,b=>{const x={id:d,value:b};return this._mousedown.push(x),!y&&this._dispatchEvent("pointerdown",b,n)&&(y=!0,this._dragging.some($=>$.value===b&&$.id===d)||this._dragging.push(x)),!0})}}_dispatchGlobalMousemove(e,i,r){const n=this.getEvent(e),l=this._getHitTarget(n.originalPoint,n.bbox,i);n.native=r,l?(this._hovering.forEach(d=>{d.contains(l)||(this._hovering.delete(d),d.cursorOverStyle&&P5(document.body,"cursor",d._replacedCursorStyle),this._dispatchEvent("pointerout",d,n))}),n.native&&ev(l,d=>(this._hovering.has(d)||(this._hovering.add(d),d.cursorOverStyle&&(d._replacedCursorStyle=X1e(document.body,"cursor"),P5(document.body,"cursor",d.cursorOverStyle)),this._dispatchEvent("pointerover",d,n)),!0))):(this._hovering.forEach(d=>{d.cursorOverStyle&&P5(document.body,"cursor",d._replacedCursorStyle),this._dispatchEvent("pointerout",d,n)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",n)}_dispatchGlobalMouseup(e,i){const r=this.getEvent(e);r.native=i,this._dispatchEventAll("globalpointerup",r)}_dispatchDragMove(e){if(this._dragging.length!==0){const i=this.getEvent(e),r=i.id;this._dragging.forEach(n=>{n.id===r&&this._dispatchEvent("pointermove",n.value,i)})}}_dispatchDragEnd(e,i){const r=e.button;let n;if(r==0||r===void 0)n="click";else if(r==2)n="rightclick";else{if(r!=1)return;n="middleclick"}const l=this.getEvent(e),d=l.id;if(this._mousedown.length!==0){const y=this._getHitTarget(l.originalPoint,l.bbox,i);y&&this._mousedown.forEach(b=>{b.id===d&&b.value.contains(y)&&this._dispatchEvent(n,b.value,l)}),this._mousedown.length=0}this._dragging.length!==0&&(this._dragging.forEach(y=>{y.id===d&&this._dispatchEvent("pointerup",y.value,l)}),this._dragging.length=0)}_dispatchDoubleClick(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&ev(n,l=>!this._dispatchEvent("dblclick",l,r))}_dispatchWheel(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&ev(n,l=>!this._dispatchEvent("wheel",l,r))}_makeSharedEvent(e,i){if(this._listeners[e]===void 0){const r=i();this._listeners[e]=new zV(()=>{delete this._listeners[e],r.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,i){let r=!1,n=null;function l(){n=null,r=!1}return new rn([new yr(()=>{n!==null&&clearTimeout(n),l()}),rr(this.view,HS(e),d=>{r=!0,n!==null&&clearTimeout(n),n=window.setTimeout(l,0)}),Kye(window,e,(d,y)=>{n!==null&&(clearTimeout(n),n=null),i(d,y,r),r=!1})])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const i=(r,n,l)=>{this._lastPointerMoveEvent={events:r,target:n,native:l},Te(r,d=>{this._dispatchGlobalMousemove(d,n,l)})};return new rn([this._onPointerEvent("pointerdown",i),this._onPointerEvent("pointermove",i)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const i=this._onPointerEvent("pointerup",(n,l,d)=>{Te(n,y=>{this._dispatchGlobalMouseup(y,d)}),this._lastPointerMoveEvent={events:n,target:l,native:d}}),r=this._onPointerEvent("pointercancel",(n,l,d)=>{Te(n,y=>{this._dispatchGlobalMouseup(y,d)}),this._lastPointerMoveEvent={events:n,target:l,native:d}});return new yr(()=>{i.dispose(),r.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const i=this._onPointerEvent("pointerdown",(d,y)=>{Te(d,b=>{this._dispatchMousedown(b,y)})}),r=this._onPointerEvent("pointermove",d=>{Te(d,y=>{this._dispatchDragMove(y)})}),n=this._onPointerEvent("pointerup",(d,y)=>{Te(d,b=>{this._dispatchDragEnd(b,y)})}),l=this._onPointerEvent("pointercancel",(d,y)=>{Te(d,b=>{this._dispatchDragEnd(b,y)})});return new yr(()=>{i.dispose(),r.dispose(),n.dispose(),l.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(i,r)=>{Te(i,n=>{this._dispatchDoubleClick(n,r)})}));case"wheel":return this._makeSharedEvent("wheel",()=>rr(window,HS("wheel"),i=>{this._dispatchWheel(i,GV(i))},{passive:!1}))}}_addEvent(e,i,r,n){let l=this._events[i];l===void 0&&(l=this._events[i]={disposer:this._initEvent(i),callbacks:[],dispatching:!1,cleanup:!1});const d={object:e,context:n,callback:r,disposed:!1};return l.callbacks.push(d),new yr(()=>{d.disposed=!0,l.dispatching?l.cleanup=!0:(on(l.callbacks,d),l.callbacks.length===0&&(l.disposer.dispose(),delete this._events[i]))})}getCanvas(e,i){this.render(e),i||(i={});let r=this.resolution,n=Math.floor(this._canvasWidth*this.resolution),l=Math.floor(this._canvasHeight*this.resolution);if(i.minWidth&&i.minWidth>n){let P=i.minWidth/n;P>r&&(r=P*this.resolution)}if(i.minHeight&&i.minHeight>l){let P=i.minHeight/l;P>r&&(r=P*this.resolution)}if(i.maxWidth&&i.maxWidth<n){let P=i.maxWidth/n;P<r&&(r=P*this.resolution)}if(i.maxHeight&&i.maxHeight>l){let P=i.maxHeight/l;P<r&&(r=P*this.resolution)}i.maintainPixelRatio&&(r/=this.resolution);const d=[];let y=!1;const b=document.createElement("canvas");r!=this.resolution&&(y=!0,n=n*r/this.resolution,l=l*r/this.resolution),b.width=n,b.height=l,b.style.position="fixed",b.style.top="-10000px",this.view.appendChild(b),d.push(b);const x=b.getContext("2d");let $=0,E=0,k=!1;return Te(this.layers,P=>{if(P&&P.visible&&(P.tainted||y)){k=!0,P.exportableView=P.view,P.exportableContext=P.context,P.view=document.createElement("canvas"),P.view.style.position="fixed",P.view.style.top="-10000px",this.view.appendChild(P.view),d.push(P.view);let D=0,L=0;P.margin&&(D+=P.margin.left||0+P.margin.right||0,L+=P.margin.top||0+P.margin.bottom||0),P.view.width=n+D,P.view.height=l+L,P.context=P.view.getContext("2d"),P.dirty=!0,P.scale=r}}),k&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),Te(this.layers,P=>{if(P&&P.visible){let D=0,L=0;P.margin&&(D=-(P.margin.left||0)*this.resolution,L=-(P.margin.top||0)*this.resolution),x.drawImage(P.view,D,L),P.exportableView&&(P.view=P.exportableView,P.exportableView=void 0),P.exportableContext&&(P.context=P.exportableContext,P.exportableContext=void 0),$<P.view.clientWidth&&($=P.view.clientWidth),E<P.view.clientHeight&&(E=P.view.clientHeight),P.scale=void 0}}),b.style.width=$+"px",b.style.height=E+"px",Te(d,P=>{P.style.position="",P.style.top="",this.view.removeChild(P)}),b}}class xme{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,i,r,n,l){e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*l),this._height=Math.floor(i*l),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}getImageData(e,i){return this.context.getImageData(Math.round((e.x-i.left)/i.width*this._width),Math.round((e.y-i.top)/i.height*this._height),1,1)}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,Te(e,i=>{i.margin&&(this.margin.left=Math.max(this.margin.left,i.margin.left),this.margin.right=Math.max(this.margin.right,i.margin.right),this.margin.top=Math.max(this.margin.top,i.margin.top),this.margin.bottom=Math.max(this.margin.bottom,i.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class Sme{constructor(e,i){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=i}resize(e,i,r,n,l){this.width!=null&&(e=this.width,r=this.width),this.height!=null&&(i=this.height,n=this.height),this.margin?(e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*l),this._height=Math.floor(i*l),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function YA(t,e){t==null?requestAnimationFrame(e):setTimeout(()=>{requestAnimationFrame(e)},1e3/t)}class O${constructor(e,i={},r){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new df}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:Bye.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:tB}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Fye.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:zye.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Vye.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:b0.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:v0.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:md.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");let n,l;if(this._settings=i,i.accessible==0&&(this._a11yD=!0),i.useSafeResolution==null&&(i.useSafeResolution=!0),i.useSafeResolution&&(n=iye()),this._renderer=new _me(n),l=e instanceof HTMLElement?e:document.getElementById(e),Te(Co.rootElements,b=>{if(b.dom===l)throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=wb.new(this,{}),l===null)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=l;let d=document.createElement("div");d.style.position="relative",d.style.height="100%",l.appendChild(d);const y=i.tooltipContainerBounds;y&&(this._tooltipContainerSettings=y),this._inner=d,this._updateComputedStyles(),Co.rootElements.push(this)}static new(e,i){const r=new O$(e,i,!0);return r._init(),r}moveDOM(e){let i;if(i=e instanceof HTMLElement?e:document.getElementById(e),i){for(;this.dom.childNodes.length>0;)i.appendChild(this.dom.childNodes[0]);this.dom=i,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const e=this.dom.offsetWidth,i=this.dom.offsetHeight;e<=150||i<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(sn.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:Hm(100),centerY:Fi,tooltipText:"Created using amCharts 5",tooltipX:Fi,cursorOverStyle:"pointer",background:g0.new(this,{fill:Op(4671320),fillOpacity:0,tooltipY:5})})),i=Cy.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});i.label.setAll({fontSize:12}),i.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",i),e.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),e.states.create("hover",{}),e.children.push(El.new(this,{stroke:Op(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:Op(3976191)}),e.children.push(El.new(this,{stroke:Op(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:Op(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._renderer,i=this._getRealSize(),r=this._getCalculatedSize(i),n=Math.floor(r.width),l=Math.floor(r.height),d=Math.floor(i.width),y=Math.floor(i.height),b=sn.new(this,{visible:!0,width:d,height:y});this._rootContainer=b,this._rootContainer._defaultThemes.push(Lye.new(this));const x=b.children.push(sn.new(this,{visible:!0,width:Fi,height:Fi}));this.container=x,e.resize(d,y,n,l),this._inner.appendChild(e.view),this._initResizeSensor();const $=document.createElement("div");if(this._htmlElementContainer=$,$.className="am5-html-container",$.style.position="absolute",$.style.pointerEvents="none",this._tooltipContainerSettings||($.style.overflow="hidden"),this._inner.appendChild($),this._a11yD!==!0){const E=document.createElement("div");E.className="am5-reader-container",E.setAttribute("role","alert"),E.style.position="absolute",E.style.width="1px",E.style.height="1px",E.style.overflow="hidden",E.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=E,this._inner.appendChild(this._readerAlertElement);const k=document.createElement("div");k.className="am5-focus-container",k.style.position="absolute",k.style.pointerEvents="none",k.style.top="0px",k.style.left="0px",k.style.overflow="hidden",k.style.width=n+"px",k.style.height=l+"px",k.setAttribute("role","application"),Cp(k,!1),this._focusElementContainer=k,this._inner.appendChild(this._focusElementContainer);const P=document.createElement("div");this._tooltipElementContainer=P,P.className="am5-tooltip-container",this._inner.appendChild(P),fd("keyboardevents")&&(this._disposers.push(rr(window,"keydown",D=>{D.keyCode==16?this._isShift=!0:D.keyCode==9&&(this._isShift=D.shiftKey)})),this._disposers.push(rr(window,"keyup",D=>{D.keyCode==16&&(this._isShift=!1)})),this._disposers.push(rr(k,"keydown",D=>{const L=this._focusedSprite;if(L){D.keyCode==27&&(K1e(),this._focusedSprite=void 0);let N=0,B=0;switch(D.keyCode){case 13:D.preventDefault();const W=e.getEvent(new MouseEvent("click"));return void L.events.dispatch("click",{type:"click",originalEvent:W.event,point:W.point,simulated:!0,target:L});case 37:N=-6;break;case 39:N=6;break;case 38:B=-6;break;case 40:B=6;break;default:return}if(N!=0||B!=0){if(D.preventDefault(),!L.isDragging()){this._keyboardDragPoint={x:0,y:0};const Y=e.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));L.events.isEnabled("pointerdown")&&L.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:Y.event,point:Y.point,simulated:!0,target:L})}const W=this._keyboardDragPoint;W.x+=N,W.y+=B;const H=e.getEvent(new MouseEvent("mousemove",{clientX:W.x,clientY:W.y}),!1);L.events.isEnabled("globalpointermove")&&L.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:H.event,point:H.point,simulated:!0,target:L})}}})),this._disposers.push(rr(k,"keyup",D=>{if(this._focusedSprite){const L=this._focusedSprite,N=D.keyCode;switch(N){case 37:case 39:case 38:case 40:if(L.isDragging()){const B=this._keyboardDragPoint,W=e.getEvent(new MouseEvent("mouseup",{clientX:B.x,clientY:B.y}));return L.events.isEnabled("globalpointerup")&&L.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:W.event,point:W.point,simulated:!0,target:L}),void(this._keyboardDragPoint=void 0)}if(L.get("focusableGroup")){const B=L.get("focusableGroup"),W=this._tabindexes.filter(ie=>ie.get("focusableGroup")==B);let H=W.indexOf(L);const Y=W.length-1;H+=N==39||N==40?1:-1,H<0?H=Y:H>Y&&(H=0),Z1e(W[H].getPrivate("focusElement").dom)}}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new jye(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),i=this._getCalculatedSize(e),r=Math.floor(i.width),n=Math.floor(i.height);if(r>0&&n>0){const l=Math.floor(e.width),d=Math.floor(e.height),y=this._htmlElementContainer;if(y.style.width=r+"px",y.style.height=n+"px",this._a11yD!==!0){const x=this._focusElementContainer;x.style.width=r+"px",x.style.height=n+"px"}this._renderer.resize(l,d,r,n);const b=this._rootContainer;b.setPrivate("width",l),b.setPrivate("height",d),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){Te(this._tickers,i=>{i(e)})}_runAnimations(e){P_(this._animations,i=>i._runAnimation(e))}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,gs(this._dirtyParents).forEach(d=>{const y=this._dirtyParents[d];delete this._dirtyParents[d],y.isDisposed()||(e[y.uid]=y,y._prepareChildren())});gs(e).forEach(d=>{e[d]._updateChildren()});const i=[];gs(this._dirty).forEach(d=>{const y=this._dirty[d];y.isDisposed()?delete this._dirty[y.uid]:(i.push(y),y._beforeChanged())}),i.forEach(d=>{d._changed(),delete this._dirty[d.uid],d._clearDirty()}),this._isDirty=!1;const r={},n=[];gs(this._dirtyBounds).forEach(d=>{const y=this._dirtyBounds[d];delete this._dirtyBounds[d],y.isDisposed()||(r[y.uid]=y.depth(),n.push(y))}),this._positionHTMLElements(),n.sort((d,y)=>yd(r[y.uid],r[d.uid])),n.forEach(d=>{d._updateBounds()});const l=this._dirtyPositions;gs(l).forEach(d=>{const y=l[d];delete l[d],y.isDisposed()||y._updatePosition()}),i.forEach(d=>{d._afterChanged()})}_renderFrame(e){return!this._updateTick||(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e),this._runAnimations(e),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),this._tickers.length===0&&this._animations.length===0&&!this._isDirty)}_runTicker(e,i){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||(i?this._ticker:YA(this.fps,this._ticker)))}_runTickerNow(e=1e4){if(!this.isDisposed()){const i=performance.now()+e;for(;;){const r=performance.now();if(r>=i){this.animationTime=null;break}if(this.animationTime=r,this._renderFrame(r)){this.animationTime=null;break}}}}_startTicker(){this._ticker===null&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},YA(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){this._dirty[e.uid]===void 0&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}_addDirtyParent(e){this._dirtyParents[e.uid]===void 0&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}_addDirtyBounds(e){this._dirtyBounds[e.uid]===void 0&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}_addDirtyPosition(e){this._dirtyPositions[e.uid]===void 0&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}_addAnimation(e){this._animations.indexOf(e)===-1&&(this._animations.push(e),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(e){return this._tickers.push(e),this._startTicker(),new yr(()=>{on(this._tickers,e)})}markDirtyGlobal(e){e||(e=this.container),e.walkChildren(i=>{i instanceof sn&&this.markDirtyGlobal(i),i.markDirty(),i.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),Te(this._disposers,e=>{e.dispose()}),this._inner&&Y1e(this._inner),Xu(Co.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){this._a11yD!==!0&&(this._readerAlertElement.innerHTML=NA(e))}setThemes(e){this._rootContainer.set("themes",e);const i=this.tooltipContainer;i&&i._applyThemes();const r=this.interfaceColors;r&&r._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,i=this._rootContainer.children.push(sn.new(this,{position:"absolute",isMeasured:!1,width:Fi,height:Fi,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=i;const r=Cy.new(this,{});this.container.set("tooltip",r),r.hide(0),this._tooltip=r}}_registerTabindexOrder(e){this._a11yD!=1&&(e.get("focusable")?cm(this._tabindexes,e):Xu(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){this._a11yD!=1&&(Xu(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(this._a11yD==1)return;this._tabindexes.sort((i,r)=>{const n=i.get("tabindexOrder",0),l=r.get("tabindexOrder",0);return n==l?0:n>l?1:-1});const e=[];Te(this._tabindexes,(i,r)=>{i.getPrivate("focusElement")?this._moveFocusElement(r,i):this._makeFocusElement(r,i);const n=i.get("focusableGroup");n&&(e.indexOf(n)!==-1?i.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(n))})}_updateCurrentFocus(){this._a11yD!=1&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,i){if(this._a11yD==1||(i||(i=e.getPrivate("focusElement").dom),!i))return;e.get("visible")&&e.get("role")!="tooltip"&&!e.isHidden()?i.getAttribute("tabindex")!="-1"&&i.setAttribute("tabindex",""+this.tabindex):i.removeAttribute("tabindex");const r=e.get("role");r?i.setAttribute("role",r):i.removeAttribute("role");const n=e.get("ariaLabel");if(n){const P=y2(e,n);i.setAttribute("aria-label",P)}else i.removeAttribute("aria-label");const l=e.get("ariaLive");l?i.setAttribute("aria-live",l):i.removeAttribute("aria-live");const d=e.get("ariaChecked");d!=null?i.setAttribute("aria-checked",d?"true":"false"):i.removeAttribute("aria-checked"),e.get("ariaHidden")?i.setAttribute("aria-hidden","hidden"):i.removeAttribute("aria-hidden");const y=e.get("ariaOrientation");y?i.setAttribute("aria-orientation",y):i.removeAttribute("aria-orientation");const b=e.get("ariaValueNow");b?i.setAttribute("aria-valuenow",b):i.removeAttribute("aria-valuenow");const x=e.get("ariaValueMin");x?i.setAttribute("aria-valuemin",x):i.removeAttribute("aria-valuemin");const $=e.get("ariaValueMax");$?i.setAttribute("aria-valuemax",$):i.removeAttribute("aria-valuemax");const E=e.get("ariaValueText");E?i.setAttribute("aria-valuetext",E):i.removeAttribute("aria-valuetext");const k=e.get("ariaControls");k?i.setAttribute("aria-controls",k):i.removeAttribute("aria-controls")}_makeFocusElement(e,i){if(i.getPrivate("focusElement")||this._a11yD==1)return;const r=document.createElement("div");i.get("role")!="tooltip"&&(r.tabIndex=this.tabindex),r.style.position="absolute",Cp(r,!1);const n=[];i.setPrivate("focusElement",{dom:r,disposers:n}),this._decorateFocusElement(i),n.push(rr(r,"focus",l=>{this._handleFocus(l,e)})),n.push(rr(r,"blur",l=>{this._handleBlur(l,e)})),this._moveFocusElement(e,i)}_removeFocusElement(e){if(this._a11yD==1)return;Xu(this._tabindexes,e);const i=e.getPrivate("focusElement");i&&(this._focusElementContainer.removeChild(i.dom),Te(i.disposers,r=>{r.dispose()}))}_hideFocusElement(e){this._a11yD!=1&&(e.getPrivate("focusElement").dom.style.display="none")}_moveFocusElement(e,i){if(this._a11yD==1)return;const r=this._focusElementContainer,n=i.getPrivate("focusElement").dom;if(n===this._focusElementContainer.children[e])return;const l=this._focusElementContainer.children[e+1];l?r.insertBefore(n,l):r.append(n)}_positionFocusElement(e){if(this._a11yD==1)return;const i=e.globalBounds();let r=i.right==i.left?e.width():i.right-i.left,n=i.top==i.bottom?e.height():i.bottom-i.top,l=i.left-2,d=i.top-2;r<0&&(l+=r,r=Math.abs(r)),n<0&&(d+=n,n=Math.abs(n));const y=e.getPrivate("focusElement").dom;y.style.top=d+"px",y.style.left=l+"px",y.style.width=r+4+"px",y.style.height=n+4+"px"}_handleFocus(e,i){if(this._a11yD==1)return;const r=this._tabindexes[i];r.isVisibleDeep()?(this._positionFocusElement(r),this._focusedSprite=r,r.events.isEnabled("focus")&&r.events.dispatch("focus",{type:"focus",originalEvent:e,target:r})):this._focusNext(e.target,this._isShift?-1:1)}_focusNext(e,i){if(this._a11yD==1)return;const r=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let n=r.indexOf(e)+i;n<0?n=r.length-1:n>=r.length&&(n=0),r[n].focus()}_handleBlur(e,i){if(this._a11yD==1)return;const r=this._focusedSprite;r&&r.events.isEnabled("blur")&&r.events.dispatch("blur",{type:"blur",originalEvent:e,target:r}),this._focusedSprite=void 0}updateTooltip(e){if(this._a11yD==1)return;const i=NA(e._getText());let r=e.getPrivate("tooltipElement");e.get("role")=="tooltip"&&i!=""?(r||(r=this._makeTooltipElement(e)),r.innerHTML!=i&&(r.innerHTML=i)):r&&(r.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const i=this._tooltipElementContainer,r=document.createElement("div");return r.style.position="absolute",r.style.width="1px",r.style.height="1px",r.style.overflow="hidden",r.style.clip="rect(1px, 1px, 1px, 1px)",Cp(r,!1),this._decorateFocusElement(e,r),i.append(r),e.setPrivate("tooltipElement",r),r}_removeTooltipElement(e){if(this._a11yD==1)return;const i=e.getPrivate("tooltipElement");if(i){const r=i.parentElement;r&&r.removeChild(i)}}_invalidateAccessibility(e){if(this._a11yD==1)return;this._focusElementDirty=!0;const i=e.getPrivate("focusElement");e.get("focusable")?i&&(this._decorateFocusElement(e),this._positionFocusElement(e)):i&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const i=this.dom.getBoundingClientRect();return{x:e.x-i.left,y:e.y-i.top}}rootPointToDocument(e){const i=this.dom.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let i="";Si(e,(n,l)=>{G0(n)&&n.match(/^font/)&&(i+=l)});const r=i!=this._fontHash;return r&&(this._fontHash=i),r}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof sn?e.children.each(i=>{this._invalidateLabelBounds(i)}):e instanceof Py&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<Co.licenses.length;e++)if(Co.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const i=this._htmlElementContainer,r=document.createElement("div");return e.setPrivate("htmlElement",r),r.style.position="absolute",r.style.overflow="auto",r.style.boxSizing="border-box",Cp(r,e.get("interactive",!1)),e.events.isEnabled("click")&&(Cp(r,!0),this._disposers.push(rr(r,"click",n=>{const l=this._renderer.getEvent(n);e.events.dispatch("click",{type:"click",originalEvent:l.event,point:l.point,simulated:!1,target:e})}))),this._positionHTMLElement(e),i.append(r),cm(this._htmlEnabledContainers,e),r}_positionHTMLElements(){Te(this._htmlEnabledContainers,e=>{this._positionHTMLElement(e)})}_positionHTMLElement(e){const i=e.getPrivate("htmlElement");if(i){Te(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],$=>{const E=e.get($);i.style[$]=E?E+"px":""});const r=e.compositeOpacity();setTimeout(()=>{i.style.opacity=r+""},10);const n=e.isVisibleDeep();n&&(i.style.display="block");const l=e.globalBounds();i.style.top=l.top+"px",i.style.left=l.left+"px";const d=e.get("width"),y=e.get("height");let b=0,x=0;if(d&&(b=e.width()),y&&(x=e.height()),d&&y)e.removePrivate("minWidth"),e.removePrivate("minHeight");else{i.style.position="fixed",i.style.width="",i.style.height="";const $=i.getBoundingClientRect();i.style.position="absolute",b=$.width,x=$.height,e._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},e.setPrivate("minWidth",b),e.setPrivate("minHeight",x)}b>0&&(i.style.minWidth=b+"px"),x>0&&(i.style.minHeight=x+"px"),n&&r!=0||(i.style.display="none")}}_setHTMLContent(e,i){let r=e.getPrivate("htmlElement");r||(r=this._makeHTMLElement(e)),r.innerHTML!=i&&(r.innerHTML=i)}_removeHTMLContent(e){let i=e.getPrivate("htmlElement");i&&this._htmlElementContainer.removeChild(i),Xu(this._htmlEnabledContainers,e)}}$ye("AM5C241025748");const KA="en-us",L$=new Map([["ar",()=>le(()=>import("./ar2-dfb29e9e.js"),[])],["bg-bg",()=>le(()=>import("./bg_BG2-08c99e6c.js"),[])],["bs-ba",()=>le(()=>import("./bs_BA2-f2917445.js"),[])],["ca-es",()=>le(()=>import("./ca_ES2-f5f347b0.js"),[])],["cs-cz",()=>le(()=>import("./cs_CZ2-1e33a1ce.js"),[])],["da-dk",()=>le(()=>import("./da_DK2-4e72198c.js"),[])],["de-de",()=>le(()=>import("./de_DE2-15e279b1.js"),[])],["de-ch",()=>le(()=>import("./de_CH2-b9a3a608.js"),[])],["el-gr",()=>le(()=>import("./el_GR2-2b9c8a60.js"),[])],["en-us",()=>le(()=>import("./en_US2-40dcf3cc.js"),[])],["en-ca",()=>le(()=>import("./en_CA2-40dcf3cc.js"),[])],["es-es",()=>le(()=>import("./es_ES2-c856435b.js"),[])],["et-ee",()=>le(()=>import("./et_EE2-193ac1c8.js"),[])],["fi-fi",()=>le(()=>import("./fi_FI2-53484f9e.js"),[])],["fr-fr",()=>le(()=>import("./fr_FR2-8b6dd3fc.js"),[])],["he-il",()=>le(()=>import("./he_IL2-ecc10351.js"),[])],["hr-hr",()=>le(()=>import("./hr_HR2-6c8e87b3.js"),[])],["hu-hu",()=>le(()=>import("./hu_HU2-fbe5572b.js"),[])],["id-id",()=>le(()=>import("./id_ID2-56ecb0c6.js"),[])],["it-it",()=>le(()=>import("./it_IT2-20a2fdf5.js"),[])],["ja-jp",()=>le(()=>import("./ja_JP2-2f441bec.js"),[])],["ko-kr",()=>le(()=>import("./ko_KR2-5290e5f8.js"),[])],["lt-lt",()=>le(()=>import("./lt_LT2-e057464e.js"),[])],["lv-lv",()=>le(()=>import("./lv_LV2-7a761c7a.js"),[])],["nb-no",()=>le(()=>import("./nb_NO2-853c98f6.js"),[])],["nl-nl",()=>le(()=>import("./nl_NL2-e2c04ba1.js"),[])],["pl-pl",()=>le(()=>import("./pl_PL2-8693870b.js"),[])],["pt-br",()=>le(()=>import("./pt_BR2-a1cac873.js"),[])],["pt-pt",()=>le(()=>import("./pt_PT2-e5eb7b28.js"),[])],["ro-ro",()=>le(()=>import("./ro_RO2-554c8802.js"),[])],["ru-ru",()=>le(()=>import("./ru_RU2-5b0bfec9.js"),[])],["sk-sk",()=>le(()=>import("./sk_SK2-feee92a1.js"),[])],["sl-sl",()=>le(()=>import("./sl_SL2-56e581d6.js"),[])],["sr-rs",()=>le(()=>import("./sr_RS2-dba2ad75.js"),[])],["sv-se",()=>le(()=>import("./sv_SE2-e6ae4e09.js"),[])],["th-th",()=>le(()=>import("./th_TH2-def73602.js"),[])],["tr-tr",()=>le(()=>import("./tr_TR2-d87d745f.js"),[])],["uk-ua",()=>le(()=>import("./uk_UA2-ae6136c6.js"),[])],["vi-vn",()=>le(()=>import("./vi_VN2-8bff547b.js"),[])],["zh-cn",()=>le(()=>import("./zh_Hans2-41156b15.js"),[])],["zh-hk",()=>le(()=>import("./zh_Hant2-8bca75bb.js"),[])],["zh-tw",()=>le(()=>import("./zh_Hant2-8bca75bb.js"),[])]]);function Mme(t){const e=t.split("-")[0].toLowerCase();let i=null;for(const r of L$.keys())if(r.startsWith(e)){i=r;break}return i}function $me(t){return t?L$.has(t.toLowerCase())?t.toLowerCase():Mme(t)||KA:KA}async function Tme(t,e=Vn()){const i=O$.new(t);return i.locale=(await L$.get($me(e))()).default,i}const rB=["#7ABEE5","#B39BD5","#F8AE83","#92E6E4","#FBC487","#EE967A","#CEA2D6","#89D594","#CEE68F","#F1A6D5"].map(t=>Op(t)),Ime=Object.freeze(Object.defineProperty({__proto__:null,createRoot:Tme,esriChartColorSet:rB},Symbol.toStringTag,{value:"Module"})),Ji="esri-feature-media",ss={base:Ji,mediaContainer:`${Ji}__container`,mediaItemContainer:`${Ji}__item-container`,mediaItem:`${Ji}__item`,mediaItemText:`${Ji}__item-text`,mediaItemTitle:`${Ji}__item-title`,mediaItemCaption:`${Ji}__item-caption`,mediaNavigation:`${Ji}__item-navigation`,mediaPagination:`${Ji}__pagination`,mediaPaginationText:`${Ji}__pagination-text`,mediaPrevious:`${Ji}__previous`,mediaPreviousIconLTR:`${Ji}__previous-icon`,mediaPreviousIconRTL:`${Ji}__previous-icon--rtl`,mediaNext:`${Ji}__next`,mediaNextIconLTR:`${Ji}__next-icon`,mediaNextIconRTL:`${Ji}__next-icon--rtl`,mediaChart:`${Ji}__chart`,mediaPaginationButton:`${Ji}__pagination-button`,mediaPaginationIcon:`${Ji}__pagination-icon`,mediaChartRendered:`${Ji}__chart--rendered`},F5=15,uu="category",Bf="value",Eme="rgba(50, 50, 50, 1)",Ame=250,kme=500,Pme=200;let cs=class extends kr{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new id,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:l}=this;if(n||!l||!r)return;const{createRoot:d}=await le(()=>Promise.resolve().then(()=>Ime),void 0),y=await d(r);this._chartRootMap.set(r,y),this._renderChart({mediaInfo:l.activeMediaInfo,root:y})}}initialize(){this._featureElementInfo=new S_,this.addHandles([me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),st),me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),st)])}loadDependencies(){return uf({icon:()=>le(()=>import("./calcite-icon-0ebdbba9.js"),["assets/calcite-icon-0ebdbba9.js","assets/icon-0e13ae13.js","assets/observers-279029a9.js"])})}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return X("div",{bind:this,class:ss.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:i}=this.viewModel,r=this.renderMediaText();return e?X("div",{key:"media-element-container",class:ss.mediaContainer},this.renderMediaInfo(),X("div",{class:ss.mediaNavigation},r,X("div",{class:ss.mediaPagination},this.renderMediaPageButton("previous"),X("span",{class:ss.mediaPaginationText},To(this.messages.pageText,{index:i+1,total:e})),this.renderMediaPageButton("next")))):null}renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e&&e.title?X("div",{key:"media-title",class:ss.mediaItemTitle,innerHTML:e.title}):null,r=e&&e.caption?X("div",{key:"media-caption",class:ss.mediaItemCaption,innerHTML:e.caption}):null;return i||r?X("div",{key:"media-text",class:ss.mediaItemText},i,r):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:l,refreshInterval:d,altText:y,title:b,type:x}=e,{sourceURL:$,linkURL:E}=l,k=Tz(E??void 0)?"_blank":"_self",P=k==="_blank"?"noreferrer":"",D=d?i:null,L=D?D.timestamp:0,N=D?D.sourceURL:$,B=X("img",{alt:y||b,key:`media-${x}-${r}-${n}-${L}`,src:N??void 0});return(E?X("a",{title:b,href:E,rel:P,target:k},B):null)??B}renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return X("div",{key:`media-${e.type}-${i}-${r}`,bind:this,class:ss.mediaChart,afterCreate:this._createChart,afterRemoved:this._disposeChart})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?X("div",{key:"media-container",class:ss.mediaItemContainer},X("div",{key:"media-item-container",class:ss.mediaItem},this.renderMediaInfoType())):null}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",l=i?"media-previous":"media-next",d=i?this._previous:this._next;return X("button",{type:"button",key:l,title:r,"aria-label":r,tabIndex:0,class:ss.mediaPaginationButton,bind:this,onclick:d},X("calcite-icon",{class:ss.mediaPaginationIcon,scale:"s",icon:n}))}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:e,layer:i}=this.viewModel;return e&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getRendererColors(){const{colorAm5:e}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const l=await afe(r);return l.delete(n),Array.from(l.values()).every(d=>(d==null?void 0:d.length)===1)&&Array.from(l.keys()).forEach(d=>{var b,x;const y=(x=(b=l.get(d))==null?void 0:b[0])==null?void 0:x.toCss(!0);y&&i.set(d,e(y))}),i}_handleMediaKeyup(e){const i=Ju(e);i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!Mpe()}_getChartAnimationMS(){return this._canAnimateChart()?Ame:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?kme:0}async _renderChart(e){const{root:i,mediaInfo:r}=e,{value:n,type:l}=r,{ResponsiveThemeAm5:d,DarkThemeAm5:y,AnimatedThemeAm5:b,ColorSetAm5:x,ThemeAm5:$}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]),E=$.new(i);E.rule("ColorSet").set("colors",rB);const k=[d.new(i),E];Uw()&&k.push(y.new(i)),this._canAnimateChart()&&k.push(b.new(i)),i.setThemes(k);const P=await this._getRendererColors(),D=x.new(i,{}),L=n.series.map((N,B)=>{const W=P.get(N.fieldName)||D.getIndex(B);return{[uu]:N.tooltip,[Bf]:N.value,columnSettings:{fill:W,stroke:W}}}).filter(N=>l!=="pie-chart"||N.value!=null&&N.value>0);l==="pie-chart"?this._createPieChart(e,L):this._createXYChart(e,L)}_getDirection(){return Th(this.container)?"rtl":"ltr"}_isInversed(){return!!Th(this.container)}async _customizeChartTooltip(e,i="horizontal"){var n;const{colorAm5:r}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]);e.setAll({pointerOrientation:i}),(n=e.get("background"))==null||n.setAll({stroke:r(Eme)}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:Pme})}async _createPieChart(e,i){const{TooltipAm5:r}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]),{PieChartAm5:n,PieSeriesAm5:l}=await le(()=>import("./pieChart-3fce4741.js"),["assets/pieChart-3fce4741.js","assets/Tick-6efca5d7.js","assets/ColorSet-11f5d865.js"]),{mediaInfo:d,root:y}=e,{title:b}=d,x=5,$=(d==null?void 0:d.altText)||(d==null?void 0:d.title)||"",E=y.container.children.push(n.new(y,{ariaLabel:$,focusable:!0,paddingBottom:x,paddingTop:x,paddingLeft:x,paddingRight:x})),k=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,P=r.new(y,{labelText:k}),D=E.series.push(l.new(y,{name:b,valueField:Bf,categoryField:uu,tooltip:P}));D.ticks.template.set("forceHidden",!0),D.labels.template.set("forceHidden",!0),D.slices.template.states.create("active",{shiftRadius:x}),this._customizeChartTooltip(P),D.slices.template.setAll({ariaLabel:k,focusable:!0,templateField:"columnSettings"}),D.data.setAll(i),D.appear(this._getChartSeriesAnimationMS()),E.appear(this._getChartAnimationMS()),E.root.dom.classList.toggle(ss.mediaChartRendered,!0)}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:l}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]),{CategoryAxisAm5:d,AxisRendererXAm5:y,ValueAxisAm5:b,AxisRendererYAm5:x,ColumnSeriesAm5:$}=await le(()=>import("./xyChart-40adabea.js"),["assets/xyChart-40adabea.js","assets/ColorSet-11f5d865.js","assets/Tick-6efca5d7.js","assets/Button-67b95260.js"]),{mediaInfo:E,root:k}=i,{value:P,title:D}=E;e.setAll({wheelX:"panX",wheelY:"zoomX"});const L=e.xAxes.push(d.new(k,{renderer:y.new(k,{inversed:this._isInversed()}),categoryField:uu}));L.get("renderer").labels.template.setAll({forceHidden:!0});const N=e.yAxes.push(b.new(k,{renderer:x.new(k,{inside:!1}),min:this._getMinSeriesValue(P.series)}));N.get("renderer").labels.template.setAll({direction:this._getDirection()});const B="{categoryX}",W=n.new(k,{labelText:B}),H=e.series.push($.new(k,{name:D,xAxis:L,yAxis:N,valueYField:Bf,categoryXField:uu,tooltip:W}));this._customizeChartTooltip(W),H.columns.template.setAll({ariaLabel:B,focusable:!0,templateField:"columnSettings"}),P.series.length>F5&&e.set("scrollbarX",l.new(k,{orientation:"horizontal"})),L.data.setAll(r),H.data.setAll(r),H.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:l}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]),{CategoryAxisAm5:d,AxisRendererXAm5:y,ValueAxisAm5:b,AxisRendererYAm5:x,ColumnSeriesAm5:$}=await le(()=>import("./xyChart-40adabea.js"),["assets/xyChart-40adabea.js","assets/ColorSet-11f5d865.js","assets/Tick-6efca5d7.js","assets/Button-67b95260.js"]),{mediaInfo:E,root:k}=i,{value:P,title:D}=E;e.setAll({wheelX:"panY",wheelY:"zoomY"});const L=e.yAxes.push(d.new(k,{renderer:x.new(k,{inversed:!0}),categoryField:uu}));L.get("renderer").labels.template.setAll({forceHidden:!0});const N=e.xAxes.push(b.new(k,{renderer:y.new(k,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(P.series)}));N.get("renderer").labels.template.setAll({direction:this._getDirection()});const B="{categoryY}",W=n.new(k,{labelText:B}),H=e.series.push($.new(k,{name:D,xAxis:N,yAxis:L,valueXField:Bf,categoryYField:uu,tooltip:W}));this._customizeChartTooltip(W,"vertical"),H.columns.template.setAll({ariaLabel:B,focusable:!0,templateField:"columnSettings"}),P.series.length>F5&&e.set("scrollbarY",l.new(k,{orientation:"vertical"})),L.data.setAll(r),H.data.setAll(r),H.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:l}=await le(()=>import("./chartCommon-d855bd00.js"),["assets/chartCommon-d855bd00.js","assets/Button-67b95260.js","assets/ColorSet-11f5d865.js"]),{CategoryAxisAm5:d,AxisRendererXAm5:y,ValueAxisAm5:b,AxisRendererYAm5:x,LineSeriesAm5:$}=await le(()=>import("./xyChart-40adabea.js"),["assets/xyChart-40adabea.js","assets/ColorSet-11f5d865.js","assets/Tick-6efca5d7.js","assets/Button-67b95260.js"]),{root:E,mediaInfo:k}=i,{value:P,title:D}=k;e.setAll({wheelX:"panX",wheelY:"zoomX"});const L=e.xAxes.push(d.new(E,{renderer:y.new(E,{inversed:this._isInversed()}),categoryField:uu}));L.get("renderer").labels.template.setAll({forceHidden:!0});const N=e.yAxes.push(b.new(E,{renderer:x.new(E,{inside:!1}),min:this._getMinSeriesValue(P.series)}));N.get("renderer").labels.template.setAll({direction:this._getDirection()});const B="{categoryX}",W=n.new(E,{labelText:B}),H=e.series.push($.new(E,{name:D,xAxis:L,yAxis:N,valueYField:Bf,categoryXField:uu,tooltip:W}));this._customizeChartTooltip(W,"vertical"),P.series.length>F5&&e.set("scrollbarX",l.new(E,{orientation:"horizontal"})),L.data.setAll(r),H.data.setAll(r),H.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,i){const{XYChartAm5:r,XYCursorAm5:n}=await le(()=>import("./xyChart-40adabea.js"),["assets/xyChart-40adabea.js","assets/ColorSet-11f5d865.js","assets/Tick-6efca5d7.js","assets/Button-67b95260.js"]),{root:l,mediaInfo:d}=e,{type:y}=d,b=(d==null?void 0:d.altText)||(d==null?void 0:d.title)||"",x=l.container.children.push(r.new(l,{ariaLabel:b,focusable:!0,panX:!0,panY:!0}));x.set("cursor",n.new(l,{})),y==="column-chart"&&await this._createColumnChart(x,e,i),y==="bar-chart"&&await this._createBarChart(x,e,i),y==="line-chart"&&await this._createLineChart(x,e,i),x.root.dom.classList.toggle(ss.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e;if(!i)return;const n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const l=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=l}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[n,l=""]=e.split("#");return`${n}${r}timestamp=${i}${l?"#":""}${l}`}};g([S()],cs.prototype,"_refreshIntervalInfo",void 0),g([S()],cs.prototype,"attributes",null),g([S()],cs.prototype,"activeMediaInfoIndex",null),g([S()],cs.prototype,"description",null),g([S()],cs.prototype,"fieldInfoMap",null),g([S()],cs.prototype,"layer",null),g([S()],cs.prototype,"mediaInfos",null),g([S()],cs.prototype,"popupTemplate",null),g([S()],cs.prototype,"relatedInfos",null),g([S()],cs.prototype,"title",null),g([S({type:id})],cs.prototype,"viewModel",void 0),g([S(),Er("esri/widgets/Feature/t9n/Feature")],cs.prototype,"messages",void 0),cs=g([J("esri.widgets.Feature.FeatureMedia")],cs);const sB=cs;var ZS;let z1=ZS=class extends ve{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new ZS({minValue:this.minValue,maxValue:this.maxValue})}};g([S({type:Number,json:{write:!0}})],z1.prototype,"minValue",void 0),g([S({type:Number,json:{write:!0}})],z1.prototype,"maxValue",void 0),z1=ZS=g([J("esri.renderer.support.AuthoringInfoClassBreakInfo")],z1);var XS;let Wu=XS=class extends ve{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new XS({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ae(this.classBreakInfos)})}};g([S({type:String,json:{write:!0}})],Wu.prototype,"field",void 0),g([S({type:String,json:{write:!0}})],Wu.prototype,"normalizationField",void 0),g([S({type:String,json:{write:!0}})],Wu.prototype,"label",void 0),g([S({type:[z1],json:{write:!0}})],Wu.prototype,"classBreakInfos",void 0),Wu=XS=g([J("esri.renderers.support.AuthoringInfoFieldInfo")],Wu);var QS;const tv=new _t({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),iv=new _t({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),ZA={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},XA=["high-to-low","above-and-below","centered-on","extremes"],QA=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],ek=["seconds","minutes","hours","days","months","years"];let Ps=QS=class extends ve{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new QS({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};g([S({types:ZA,json:{write:!0}})],Ps.prototype,"endTime",void 0),g([xt("endTime")],Ps.prototype,"castEndTime",null),g([S({type:String,json:{write:!0}})],Ps.prototype,"field",void 0),g([S({type:Number,json:{write:!0}})],Ps.prototype,"maxSliderValue",void 0),g([S({type:Number,json:{write:!0}})],Ps.prototype,"minSliderValue",void 0),g([S({types:ZA,json:{write:!0}})],Ps.prototype,"startTime",void 0),g([xt("startTime")],Ps.prototype,"castStartTime",null),g([S({type:tv.apiValues,value:null,json:{type:tv.jsonValues,read:tv.read,write:tv.write}})],Ps.prototype,"style",null),g([S({type:QA,value:null,json:{type:QA,origins:{"web-scene":{type:XA,write:{writer:(t,e)=>{XA.includes(t)&&(e.theme=t)}}}},write:!0}})],Ps.prototype,"theme",null),g([S({type:iv.apiValues,json:{type:iv.jsonValues,read:iv.read,write:iv.write}})],Ps.prototype,"type",void 0),g([S({type:ek,json:{type:ek,write:!0}})],Ps.prototype,"units",void 0),Ps=QS=g([J("esri.renderers.support.AuthoringInfoVisualVariable")],Ps);const Cme=Ps;let _b=class extends ve{constructor(e){super(e),this.type=null}};g([S({readOnly:!0,json:{read:!1,write:!0}})],_b.prototype,"type",void 0),_b=g([J("esri.rest.support.ColorRamp")],_b);const D$=_b;var e6;let Ec=e6=class extends D${constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new e6({fromColor:ae(this.fromColor),toColor:ae(this.toColor),algorithm:this.algorithm})}};g([Ue({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Ec.prototype,"algorithm",void 0),g([S({type:Ne,json:{type:[Ct],write:!0}})],Ec.prototype,"fromColor",void 0),g([S({type:Ne,json:{type:[Ct],write:!0}})],Ec.prototype,"toColor",void 0),g([S({type:["algorithmic"]})],Ec.prototype,"type",void 0),Ec=e6=g([J("esri.rest.support.AlgorithmicColorRamp")],Ec);const R$=Ec;var t6;let V1=t6=class extends D${constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new t6({colorRamps:ae(this.colorRamps)})}};g([S({type:[R$],json:{write:!0}})],V1.prototype,"colorRamps",void 0),g([S({type:["multipart"]})],V1.prototype,"type",void 0),V1=t6=g([J("esri.rest.support.MultipartColorRamp")],V1);const nB=V1,Ome={key:"type",base:D$,typeMap:{algorithmic:R$,multipart:nB}};function Lme(t){return t&&t.type?t.type==="algorithmic"?R$.fromJSON(t):t.type==="multipart"?nB.fromJSON(t):null:null}var i6;const Kh=new _t({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),rv=new _t({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),tk=new _t({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),ik=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Dme=["high-to-low","above-and-below","above","below","90-10"],Rme=["flow-line","wave-front"],jme=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Ii=i6=class extends ve{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?Lme(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new i6({classificationMethod:this.classificationMethod,colorRamp:ae(this.colorRamp),fadeRatio:ae(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:ae(this.field1),field2:ae(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};g([S({type:Kh.apiValues,value:null,json:{type:Kh.jsonValues,read:Kh.read,write:Kh.write,origins:{"web-document":{default:"manual",type:Kh.jsonValues,read:Kh.read,write:Kh.write}}}})],Ii.prototype,"classificationMethod",null),g([S({types:Ome,json:{write:!0}})],Ii.prototype,"colorRamp",void 0),g([Se("colorRamp")],Ii.prototype,"readColorRamp",null),g([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ii.prototype,"fadeRatio",void 0),g([S({type:[String],value:null,json:{write:!0}})],Ii.prototype,"fields",null),g([S({type:Wu,value:null,json:{write:!0}})],Ii.prototype,"field1",null),g([S({type:Wu,value:null,json:{write:!0}})],Ii.prototype,"field2",null),g([S({type:Rme,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ii.prototype,"flowTheme",null),g([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Ii.prototype,"focus",null),g([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Ii.prototype,"isAutoGenerated",void 0),g([S({type:Number,value:null,json:{type:Ct,write:!0}})],Ii.prototype,"numClasses",null),g([S({type:ik,json:{type:ik,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ii.prototype,"lengthUnit",void 0),g([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ii.prototype,"maxSliderValue",void 0),g([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ii.prototype,"minSliderValue",void 0),g([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ii.prototype,"statistics",null),g([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Ii.prototype,"standardDeviationInterval",null),g([S({type:rv.apiValues,value:null,json:{type:rv.jsonValues,read:rv.read,write:rv.write,origins:{"web-scene":{type:tk.jsonValues,write:{writer:tk.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],Ii.prototype,"type",null),g([S({type:[Cme],json:{write:!0}})],Ii.prototype,"visualVariables",void 0),g([S({type:jme,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ii.prototype,"univariateSymbolStyle",null),g([S({type:Dme,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ii.prototype,"univariateTheme",null),Ii=i6=g([J("esri.renderers.support.AuthoringInfo")],Ii);const j$=Ii,N5=new _t({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let B1=class extends ve{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};g([S({type:j$,json:{write:!0}})],B1.prototype,"authoringInfo",void 0),g([S({type:N5.apiValues,readOnly:!0,json:{type:N5.jsonValues,read:!1,write:{writer:N5.write,ignoreOrigin:!0}}})],B1.prototype,"type",void 0),B1=g([J("esri.renderers.Renderer")],B1);const ql=B1;function Fme(t){var e,i;return((i=(e=t.match(Nme))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Nme=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var r6;let _0=r6=class extends ve{constructor(){super(...arguments),this.title=null}clone(){return new r6({title:this.title})}};g([S({type:String,json:{write:!0}})],_0.prototype,"title",void 0),_0=r6=g([J("esri.renderers.support.LegendOptions")],_0);var s6;let xb=s6=class extends _0{constructor(){super(...arguments),this.showLegend=null}clone(){return new s6({title:this.title,showLegend:this.showLegend})}};g([S({type:Boolean,json:{write:!0}})],xb.prototype,"showLegend",void 0),xb=s6=g([J("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],xb);const oB=xb,z5=new _t({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let _o=class extends ve{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(ge.getLogger(this).error(".field: field must be a string value"),null):bm(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};g([S()],_o.prototype,"index",void 0),g([S({type:z5.apiValues,readOnly:!0,json:{read:z5.read,write:z5.write}})],_o.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],_o.prototype,"field",void 0),g([xt("field")],_o.prototype,"castField",null),g([S({type:String,json:{write:!0}})],_o.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],_o.prototype,"valueExpressionTitle",void 0),g([S({readOnly:!0})],_o.prototype,"arcadeRequired",null),g([S({type:oB,json:{write:!0}})],_o.prototype,"legendOptions",void 0),_o=g([J("esri.renderers.visualVariables.VisualVariable")],_o);const Wm=_o;var n6;let Ac=n6=class extends Wm{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new n6({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};g([S({readOnly:!0})],Ac.prototype,"cache",null),g([S({type:["color"],json:{type:["colorInfo"]}})],Ac.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Ac.prototype,"normalizationField",void 0),g([S({type:[Cpe],json:{write:!0}})],Ac.prototype,"stops",null),Ac=n6=g([J("esri.renderers.visualVariables.ColorVariable")],Ac);const aB=Ac;var o6;let Ou=o6=class extends ve{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Wy(e.transparency)}writeOpacity(t,e,i){e[i]=H2(t)}clone(){return new o6({label:this.label,opacity:this.opacity,value:this.value})}};g([S({type:String,json:{write:!0}})],Ou.prototype,"label",void 0),g([S({type:Number,json:{type:Ct,write:{target:"transparency"}}})],Ou.prototype,"opacity",void 0),g([Se("opacity",["transparency"])],Ou.prototype,"readOpacity",null),g([Ae("opacity")],Ou.prototype,"writeOpacity",null),g([S({type:Number,json:{write:!0}})],Ou.prototype,"value",void 0),Ou=o6=g([J("esri.renderers.visualVariables.support.OpacityStop")],Ou);const zme=Ou;var a6;let kc=a6=class extends Wm{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new a6({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};g([S({readOnly:!0})],kc.prototype,"cache",null),g([S({type:["opacity"],json:{type:["transparencyInfo"]}})],kc.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],kc.prototype,"normalizationField",void 0),g([S({type:[zme],json:{write:!0}})],kc.prototype,"stops",null),kc=a6=g([J("esri.renderers.visualVariables.OpacityVariable")],kc);const lB=kc;var l6;let ul=l6=class extends Wm{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new se("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new l6({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};g([S({readOnly:!0})],ul.prototype,"cache",null),g([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ul.prototype,"axis",void 0),g([S({type:["rotation"],json:{type:["rotationInfo"]}})],ul.prototype,"type",void 0),g([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ul.prototype,"rotationType",void 0),g([S({type:String,json:{write:!0}})],ul.prototype,"valueExpressionTitle",void 0),g([Ae("web-scene","valueExpressionTitle")],ul.prototype,"writeValueExpressionTitleWebScene",null),ul=l6=g([J("esri.renderers.visualVariables.RotationVariable")],ul);const uB=ul;var u6;let Lp=u6=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new u6({label:this.label,size:this.size,value:this.value})}};g([S({type:String,json:{write:!0}})],Lp.prototype,"label",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Lp.prototype,"size",void 0),g([S({type:Number,json:{write:!0}})],Lp.prototype,"value",void 0),Lp=u6=g([J("esri.renderers.visualVariables.support.SizeStop")],Lp);const Dp=Lp;var h6;let Sb=h6=class extends oB{constructor(){super(...arguments),this.customValues=null}clone(){return new h6({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};g([S({type:[Number],json:{write:!0}})],Sb.prototype,"customValues",void 0),Sb=h6=g([J("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Sb);const Vme=Sb;var Pl,pr;function ch(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function dm(t){return t!=null&&!isNaN(t)&&isFinite(t)}function hB(t){return t.valueExpression?Pl.Expression:t.field&&typeof t.field=="string"?Pl.Field:Pl.Unknown}function Bme(t,e){const i=e||hB(t),r=t.valueUnit||"unknown";return i===Pl.Unknown?pr.Constant:t.stops?pr.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?pr.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?pr.Proportional:pr.Additive:pr.Identity:pr.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Pl||(Pl={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(pr||(pr={}));const F$={unknown:1,inches:vn(1,"meters","inches"),feet:vn(1,"meters","feet"),"us-feet":vn(1,"meters","us-feet"),yards:vn(1,"meters","yards"),miles:vn(1,"meters","miles"),"nautical-miles":vn(1,"meters","nautical-miles"),millimeters:vn(1,"meters","millimeters"),centimeters:vn(1,"meters","centimeters"),decimeters:vn(1,"meters","decimeters"),meters:vn(1,"meters","meters"),kilometers:vn(1,"meters","kilometers"),"decimal-degrees":1/DW(1,"meters",Yt.radius)},kh=ge.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),rk=new xs,Mb=Math.PI,cB=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function dB(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(D=>D.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void kh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof e=="number",l=n?null:e,d=l&&l.attributes;let y=n?e:null;const b=r.field,{ipData:x,hasExpression:$}=r.cache;let E=r.cache.compiledFunc;if(!b&&!$){const D=r.stops;return D&&D[0]&&D[0].color}if(typeof y!="number")if($){if(i==null||i.arcade==null)return void kh.error("Use of arcade expressions requires an arcade context");const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,N=L.getViewInfo(D),B=L.createExecContext(l,N);if(!E){const W=L.createSyntaxTree(r.valueExpression);E=L.createFunction(W),r.cache.compiledFunc=E}y=L.executeFunction(E,B)}else d&&(y=d[b]);const k=r.normalizationField,P=d!=null&&k!=null?parseFloat(d[k]):void 0;if(y!=null&&(!k||n||!isNaN(P)&&P!==0)){isNaN(P)||n||(y/=P);const D=N$(y,x);if(D){const L=D[0],N=D[1],B=L===N?r.stops[L].color:Ne.blendColors(r.stops[L].color,r.stops[N].color,D[2],i!=null?i.color:void 0);return new Ne(B)}}}function pB(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(D=>D.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void kh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof e=="number",l=n?null:e,d=l&&l.attributes;let y=n?e:null;const b=r.field,{ipData:x,hasExpression:$}=r.cache;let E=r.cache.compiledFunc;if(!b&&!$){const D=r.stops;return D&&D[0]&&D[0].opacity}if(typeof y!="number")if($){if(i==null||i.arcade==null)return void kh.error("Use of arcade expressions requires an arcade context");const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,N=L.getViewInfo(D),B=L.createExecContext(l,N);if(!E){const W=L.createSyntaxTree(r.valueExpression);E=L.createFunction(W),r.cache.compiledFunc=E}y=L.executeFunction(E,B)}else d&&(y=d[b]);const k=r.normalizationField,P=d!=null&&k!=null?parseFloat(d[k]):void 0;if(y!=null&&(!k||n||!isNaN(P)&&P!==0)){isNaN(P)||n||(y/=P);const D=N$(y,x);if(D){const L=D[0],N=D[1];if(L===N)return r.stops[L].opacity;{const B=r.stops[L].opacity;return B+(r.stops[N].opacity-B)*D[2]}}}}function fB(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void kh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",l=n==="heading"&&r.rotationType==="arithmetic"?90:0,d=n==="heading"&&r.rotationType==="arithmetic"?-1:1,y=typeof e=="number"?null:e,b=y&&y.attributes,x=r.field,{hasExpression:$}=r.cache;let E=r.cache.compiledFunc,k=0;if(!x&&!$)return k;if($){if(i==null||i.arcade==null)return void kh.error("Use of arcade expressions requires an arcade context");const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,L=D.getViewInfo(P),N=D.createExecContext(y,L);if(!E){const B=D.createSyntaxTree(r.valueExpression);E=D.createFunction(B),r.cache.compiledFunc=E}k=D.executeFunction(E,N)}else b&&(k=b[x]||0);return k=typeof k!="number"||isNaN(k)?null:l+d*k,k}function Gme(t,e,i){const r=typeof e=="number",n=r?null:e,l=n&&n.attributes;let d=r?e:null;const{isScaleDriven:y}=t.cache;let b=t.cache.compiledFunc;if(y){const $=i!=null?i.scale:void 0,E=i!=null?i.view:void 0;d=$==null||E==="3d"?Ume(t):$}else if(!r)switch(t.inputValueType){case Pl.Expression:{if(i==null||i.arcade==null)return void kh.error("Use of arcade expressions requires an arcade context");const $={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},E=i.arcade.arcadeUtils,k=E.getViewInfo($),P=E.createExecContext(n,k);if(!b){const D=E.createSyntaxTree(t.valueExpression);b=E.createFunction(D),t.cache.compiledFunc=b}d=E.executeFunction(b,P);break}case Pl.Field:l&&(d=l[t.field]);break;case Pl.Unknown:d=null}if(!dm(d))return null;if(r||!t.normalizationField)return d;const x=l?parseFloat(l[t.normalizationField]):null;return dm(x)&&x!==0?d/x:null}function Ume(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function L_(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(l=>l.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void kh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=mB(Gme(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function Ls(t,e,i){return t==null?null:ch(t)?L_(t,e,i):dm(t)?t:null}function yB(t,e,i){return dm(i)&&t>i?i:dm(e)&&t<e?e:t}function qme(t,e,i,r){return t+((Ls(e.minSize,i,r)||e.minDataValue)??0)}function Hme(t,e,i){const r=t.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=t.minSize),Ls(n,e,i)}function Wme(t,e,i,r){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),l=Ls(e.minSize,i,r),d=Ls(e.maxSize,i,r),y=r!=null?r.shape:void 0;if(t<=e.minDataValue)return l;if(t>=e.maxDataValue)return d;if(l==null||d==null)return null;if(e.scaleBy==="area"&&y){const b=y==="circle",x=b?Mb*(l/2)**2:l*l,$=x+n*((b?Mb*(d/2)**2:d*d)-x);return b?2*Math.sqrt($/Mb):Math.sqrt($)}return l+n*(d-l)}function Jme(t,e,i,r){const n=r!=null?r.shape:void 0,l=t/e.minDataValue,d=Ls(e.minSize,i,r),y=Ls(e.maxSize,i,r);let b=null;return b=n==="circle"?2*Math.sqrt(l*(d/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(l*d**2):l*d,yB(b,d,y)}function Yme(t,e,i,r,n){var b,x,$;const[l,d,y]=N$(t,n);if(l===d)return Ls((b=e.stops)==null?void 0:b[l].size,i,r);{const E=Ls((x=e.stops)==null?void 0:x[l].size,i,r);return E+(Ls(($=e.stops)==null?void 0:$[d].size,i,r)-E)*y}}function Kme(t,e,i,r){const n=(r!=null&&r.resolution?r.resolution:1)*F$[e.valueUnit],l=Ls(e.minSize,i,r),d=Ls(e.maxSize,i,r),{valueRepresentation:y}=e;let b=null;return b=y==="area"?2*Math.sqrt(t/Mb)/n:y==="radius"||y==="distance"?2*t/n:t/n,yB(b,l,d)}function mB(t,e,i,r,n){switch(e.transformationType){case pr.Additive:return qme(t,e,i,r);case pr.Constant:return Hme(e,i,r);case pr.ClampedLinear:return Wme(t,e,i,r);case pr.Proportional:return Jme(t,e,i,r);case pr.Stops:return Yme(t,e,i,r,n);case pr.RealWorldSize:return Kme(t,e,i,r);case pr.Identity:return t;case pr.Unknown:return null}}function Zme(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let l=Ls(t.minSize,rk,n),d=Ls(t.maxSize,rk,n);if(l!=null||d!=null){if(l>d){const y=d;d=l,l=y}return{minSize:l,maxSize:d}}}function Xme(t,e,i){if(!t.visualVariables)return;const r=[],n=[],l=[],d=[],y=[];for(const b of t.visualVariables)switch(b.type){case"color":n.push(b);break;case"opacity":l.push(b);break;case"rotation":y.push(b);break;case"size":d.push(b)}return n.forEach(b=>{const x=dB(b,e,i);r.push({variable:b,value:x})}),l.forEach(b=>{const x=pB(b,e,i);r.push({variable:b,value:x})}),y.forEach(b=>{const x=fB(b,e,i);r.push({variable:b,value:x})}),d.forEach(b=>{const x=L_(b,e,i);r.push({variable:b,value:x})}),r.filter(b=>b.value!=null)}function N$(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,l)=>t<n?(r=l,!0):(i=l,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function Qme(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const l=n.useSymbolValue?"symbol-value":L_(n,e,i);switch(n.axis){case"width":r[0]=l;break;case"depth":r[1]=l;break;case"height":r[2]=l;break;case"width-and-depth":r[0]=l,r[1]=l;break;case"all":case void 0:case null:r[0]=l,r[1]=l,r[2]=l;break;default:n.axis}}return r}const D_=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Qme,getColor:dB,getOpacity:pB,getRotationAngle:fB,getSize:L_,getSizeForValue:mB,getSizeFromNumberOrVariable:Ls,getSizeRangeAtScale:Zme,getVisualVariableValues:Xme,viewScaleRE:cB},Symbol.toStringTag,{value:"Module"}));var c6;const sv=new _t({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),d6=new _t({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function sk(t){if(t!=null)return typeof t=="string"||typeof t=="number"?kt(t):t.type==="size"?ch(t)?t:(delete(t={...t}).type,new Dt(t)):void 0}function nk(t,e,i){if(typeof t!="object")return t;const r=new Dt;return r.read(t,i),r}let Dt=c6=class extends Wm{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&cB.test(this.valueExpression)}}set expression(t){ge.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){ch(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),ch(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return hB(this)}set maxDataValue(t){t&&this.stops&&(ge.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(ge.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return sk(t)}readMaxSize(t,e,i){return nk(t,e,i)}set minDataValue(t){t&&this.stops&&(ge.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(ge.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return sk(t)}readMinSize(t,e,i){return nk(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(ge.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return Bme(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r&&r.messages){const n=this.index,l=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new se("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?d6.read(t):null}clone(){return new c6({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ch(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ch(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===pr.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===pr.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};g([S({readOnly:!0})],Dt.prototype,"cache",null),g([S({type:sv.apiValues,json:{type:sv.jsonValues,origins:{"web-map":{read:!1}},read:sv.read,write:sv.write}})],Dt.prototype,"axis",void 0),g([S({type:String,value:null,json:{read:!1}})],Dt.prototype,"expression",null),g([S()],Dt.prototype,"index",null),g([S({type:String,readOnly:!0})],Dt.prototype,"inputValueType",null),g([S({type:Vme,json:{write:!0}})],Dt.prototype,"legendOptions",void 0),g([S({type:Number,value:null,json:{write:!0}})],Dt.prototype,"maxDataValue",null),g([S({type:Number,value:null,json:{write:!0}})],Dt.prototype,"maxSize",null),g([xt("maxSize")],Dt.prototype,"castMaxSize",null),g([Se("maxSize")],Dt.prototype,"readMaxSize",null),g([S({type:Number,value:null,json:{write:!0}})],Dt.prototype,"minDataValue",null),g([S({type:Number,value:null,json:{write:!0}})],Dt.prototype,"minSize",null),g([xt("minSize")],Dt.prototype,"castMinSize",null),g([Se("minSize")],Dt.prototype,"readMinSize",null),g([S({type:String,json:{write:!0}})],Dt.prototype,"normalizationField",void 0),g([S({readOnly:!0})],Dt.prototype,"arcadeRequired",null),g([S({type:String})],Dt.prototype,"scaleBy",void 0),g([S({type:[Dp],value:null,json:{write:!0}})],Dt.prototype,"stops",null),g([S({type:["outline"],json:{write:!0}})],Dt.prototype,"target",void 0),g([S({type:String,readOnly:!0})],Dt.prototype,"transformationType",null),g([S({type:["size"],json:{type:["sizeInfo"]}})],Dt.prototype,"type",void 0),g([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Dt.prototype,"useSymbolValue",void 0),g([S({type:String,json:{write:!0}})],Dt.prototype,"valueExpression",void 0),g([Se("valueExpression",["valueExpression","expression"])],Dt.prototype,"readValueExpression",null),g([Ae("web-scene","valueExpression")],Dt.prototype,"writeValueExpressionWebScene",null),g([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Dt.prototype,"valueRepresentation",void 0),g([S({type:d6.apiValues,json:{write:d6.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Dt.prototype,"valueUnit",void 0),g([Se("valueUnit")],Dt.prototype,"readValueUnit",null),Dt=c6=g([J("esri.renderers.visualVariables.SizeVariable")],Dt);const R_=Dt,ege={color:aB,size:R_,opacity:lB,rotation:uB},tge=new _t({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),ige=/^\[([^\]]+)\]$/i;let $b=class extends Be{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:l}=i,d=n&&n.match(ige),y=d&&d[1];if(y&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:l,field:y})),e)return e.map(b=>{const x=tge.read(b.type),$=ege[x];$||(ge.getLogger(this).warn(`Unknown variable type: ${x}`),r&&r.messages&&r.messages.push(new Un("visual-variable:unsupported",`visualVariable of type '${x}' is not supported`,{definition:b,context:r})));const E=new $;return E.read(b,r),E})}writeVariables(e,i){const r=[];for(const n of e){const l=n.toJSON(i);l&&r.push(l)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};g([S()],$b.prototype,"visualVariables",null),$b=g([J("esri.renderers.visualVariables.VisualVariableFactory")],$b);const rge=$b,sge={base:Wm,key:"type",typeMap:{opacity:lB,color:aB,rotation:uB,size:R_}},pf=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new rge}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,l){r[n]=this._vvFactory.writeVariables(i,l)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(l=>l.type===i&&(typeof r=="string"?l.target===r:r!==!1||!l.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const l of n)l&&(l.field&&ln(i,r,l.field),l.normalizationField&&ln(i,r,l.normalizationField),l.valueExpression&&(nge(l.valueExpression,i,r)||await _s(i,r,l.valueExpression)))}};return g([S({types:[sge],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),g([Se("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),g([Ae("visualVariables")],e.prototype,"writeVisualVariables",null),e=g([J("esri.renderers.mixins.VisualVariablesMixin")],e),e};function nge(t,e,i){const r=Fme(t);return r!=null&&(ln(e,i,r),!0)}const Gf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function oge(t,e=Gf){var y,b;if(!t)return{symbol:null};const{retainId:i=Gf.retainId,ignoreDrivers:r=Gf.ignoreDrivers,hasLabelingContext:n=Gf.hasLabelingContext,retainCIM:l=Gf.retainCIM}=e;let d=null;if(Fl(t)||t instanceof Dd)d=t.clone();else if(t.type==="cim"){const x=(b=(y=t.data)==null?void 0:y.symbol)==null?void 0:b.type;if(x!=="CIMPointSymbol")return{error:new se("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})};d=l?t.clone():Zc.fromCIMSymbol(t)}else if(t instanceof cn)d=n_.fromSimpleLineSymbol(t);else if(t instanceof jh)d=Zc.fromSimpleMarkerSymbol(t);else if(t instanceof a_)d=Zc.fromPictureMarkerSymbol(t);else if(t instanceof Rh)d=e.geometryType&&e.geometryType==="mesh"?o_.fromSimpleFillSymbol(t):Pm.fromSimpleFillSymbol(t);else{if(!(t instanceof of))return{error:new se("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};d=n?s_.fromTextSymbol(t):Zc.fromTextSymbol(t)}return i&&d&&d.type!=="cim"&&(d.id=t.id),r&&Fl(d)&&d.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:d}}function m2(t,e,i,r){const n=gB(t,{},{context:r,isLabelSymbol:!1});n!=null&&(e[i]=n)}function ok(t,e,i,r){const n=gB(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function ak(t){return t instanceof nf||t instanceof Dd}function gB(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:n}=i,l=r==null?void 0:r.origin,d=r==null?void 0:r.messages;if(l==="web-scene"&&!ak(t)){const y=oge(t,{retainCIM:!0,hasLabelingContext:n});return y.symbol!=null?y.symbol.write(e,r):(d==null||d.push(new se("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:y.error})),null)}return(l==="web-map"||l==="portal-item"&&!CO(r==null?void 0:r.layer))&&ak(t)?(d==null||d.push(new se("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function vB(t,e){return Ite(t,null,e)}const ff={types:PR,json:{write:{writer:m2},origins:{"web-scene":{types:HI,write:{writer:m2},read:{reader:W0({types:HI})}}}}},bB={types:{base:Ns,key:"type",typeMap:{"simple-fill":hd.typeMap["simple-fill"],"picture-fill":hd.typeMap["picture-fill"],"polygon-3d":hd.typeMap["polygon-3d"]}},json:{write:{writer:m2},origins:{"web-scene":{type:Pm,write:{writer:m2}}}}},Tb={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var p6;let Lu=p6=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new p6({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};g([S({type:String,json:{write:!0}})],Lu.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Lu.prototype,"label",void 0),g([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Lu.prototype,"minValue",void 0),g([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Lu.prototype,"maxValue",void 0),g([S(ff)],Lu.prototype,"symbol",void 0),Lu=p6=g([J("esri.renderers.support.ClassBreakInfo")],Lu);const g2=Lu;var f6;const wB="log",Ib="percent-of-total",Eb="field",nv=new _t({esriNormalizeByLog:wB,esriNormalizeByPercentOfTotal:Ib,esriNormalizeByField:Eb}),age=zi(g2);let Xi=f6=class extends pf(ql){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const l=new g2;return l.read(n,i),l.minValue==null&&(l.minValue=r),l.maxValue==null&&(l.maxValue=l.minValue),r=l.maxValue,l})}writeClassBreakInfos(t,e,i,r){const n=t.map(l=>l.write({},r));this._areClassBreaksConsecutive()&&n.forEach(l=>delete l.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(ge.getLogger(this).error(".field: field must be a string value"),null):bm(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&Eb||i&&Ib||null,e&&i&&ge.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==Eb&&t!==Ib||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new g2({minValue:t,maxValue:e,symbol:CR(i)}):age(ae(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||ge.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await Rl()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void ge.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const n=await Rl(),{arcadeUtils:l}=n;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new f6({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ae(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ae(this.visualVariables),legendOptions:ae(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),_s(t,e,this.valueExpression)];ln(t,e,this.field),ln(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:l}=e??{},{valueExpression:d}=this;let y=this._compiledValueExpression.valueExpression===d?this._compiledValueExpression.compiledFunction:null;const b=l.arcadeUtils;if(!y){const $=b.createSyntaxTree(d);y=b.createFunction($),this._compiledValueExpression.compiledFunction=y}this._compiledValueExpression.valueExpression=d;const x=b.executeFunction(y,b.createExecContext(t,b.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(x)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const l=this.normalizationTotal,d=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===wB)n=Math.log(n)*Math.LOG10E;else if(r!==Ib||l==null||isNaN(l)){if(r===Eb&&!isNaN(d)){if(isNaN(n)||isNaN(d))return-1;n/=d}}else n=n/l*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};g([S(bB)],Xi.prototype,"backgroundFillSymbol",void 0),g([S({type:[g2]})],Xi.prototype,"classBreakInfos",void 0),g([Se("classBreakInfos")],Xi.prototype,"readClassBreakInfos",null),g([Ae("classBreakInfos")],Xi.prototype,"writeClassBreakInfos",null),g([S({type:String,json:{write:!0}})],Xi.prototype,"defaultLabel",void 0),g([S(ff)],Xi.prototype,"defaultSymbol",void 0),g([S({type:String,json:{write:!0}})],Xi.prototype,"field",void 0),g([xt("field")],Xi.prototype,"castField",null),g([S({type:Boolean})],Xi.prototype,"isMaxInclusive",void 0),g([S({type:_0,json:{write:!0}})],Xi.prototype,"legendOptions",void 0),g([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Xi.prototype,"minValue",null),g([S({type:String,json:{write:!0}})],Xi.prototype,"normalizationField",void 0),g([S({type:Number,cast:t=>Ln(t),json:{write:!0}})],Xi.prototype,"normalizationTotal",void 0),g([S({type:nv.apiValues,value:null,json:{type:nv.jsonValues,read:nv.read,write:nv.write}})],Xi.prototype,"normalizationType",null),g([Ue({classBreaks:"class-breaks"})],Xi.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Xi.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],Xi.prototype,"valueExpressionTitle",void 0),Xi=f6=g([J("esri.renderers.ClassBreaksRenderer")],Xi);const _B=Xi;let v2=class{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new se(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new v2(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),l=/^\s*\d+\s*$/;if(!r||!r.match||!l.test(r))throw new se((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!l.test(n))throw new se((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const d=parseInt(r,10),y=parseInt(n,10);return new v2(d,y,i)}};function lge(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function lk(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function uk(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let z$=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const r of e){const n=r==null?void 0:r.name,l=ck(r==null?void 0:r.name);if(n&&l){const d=hk(n);this._fieldsMap.set(n,r),this._fieldsMap.set(d,r),this._normalizedFieldsMap.set(l,r),i.push(d),lge(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):r7(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),lk(r)||uk(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)lk(e)||uk(e)||e.nullable||XZ(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(hk(e))??this._normalizedFieldsMap.get(ck(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function hk(t){return t.trim().toLowerCase()}function ck(t){var e;return((e=RZ(t))==null?void 0:e.toLowerCase())??""}const dk="esri.renderers.support.DictionaryLoader",uge={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let V$=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new tV(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(D){if(is(D))return this._dictionaryPromise=null,null}const n=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),l={};if(this.fieldMap)for(const D of this._symbolFields){const L=this._getFieldName(this.fieldMap[D]);l[D]=L?n?e.attributes[L]:""+e.attributes[L]:""}let d=null;try{d=r==null?void 0:r(l,i)}catch{return null}if(!d||typeof d!="string")return null;const y=lM(d).toString(),b=this._symbolCache.get(y);if(b)return b.catch(()=>{this._symbolCache.pop(y)}),b;const x=d.split(";"),$=[],E=[];for(const D of x)if(D)if(D.includes("po:")){const L=D.substr(3).split("|");if(L.length===3){const N=L[0],B=L[1];let W=L[2];if(B==="DashTemplate")W=W.split(" ").map(H=>Number(H));else if(B==="Color"){const H=new Ne(W).toRgba();W=[H[0],H[1],H[2],255*H[3]]}else W=Number(W);E.push({primitiveName:N,propertyName:B,value:W})}}else if(D.includes("|")){for(const L of D.split("|"))if(this._itemNames.has(L)){$.push(L);break}}else this._itemNames.has(D)&&$.push(D);const k=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",P=this._cimPartsToCIMSymbol($,E,k,i);return this._symbolCache.put(y,P,1),P}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void ge.getLogger(dk).error("no valid URL!");const i=Wt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,Rl()]);if(!r)throw this._dictionaryPromise=null,new se("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:l,expression:d,itemsNames:y}=r,b=d;let x=!1;l&&(this._dictionaryVersion=v2.parse(l),x=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(y),this._symbolFields=n.symbol;const $={};if(this.config){const P=this.config;for(const D in P)$[D]=P[D]}if(n.configuration)for(const P of n.configuration)$.hasOwnProperty(P.name)||($[P.name]=P.value);const E=[];if(e!=null&&e.fields&&this.fieldMap)for(const P of this._symbolFields){const D=this.fieldMap[P],L=e.fields.filter(N=>N.name.toLowerCase()===(D==null?void 0:D.toLowerCase()));L.length>0&&E.push({...L[0],type:x?L[0].type:"esriFieldTypeString"})}E.length>0&&(this._fieldIndex=new z$(E));const k=OZ(b,e!=null?e.spatialReference:null,E,$).then(P=>{const D={scale:0};return(L,N)=>{if(P==null)return null;const B=P.repurposeFeature({geometry:null,attributes:L});return D.scale=N!=null?N.scale??void 0:void 0,P.evaluate({$feature:B,$view:D},P.services)}}).catch(P=>(ge.getLogger(dk).error("Creating dictinoary expression failed:",P),null));return this._dictionaryPromise=k,k}async _cimPartsToCIMSymbol(e,i,r,n){const l=new Array(e.length);for(let b=0;b<e.length;b++)l[b]=this._getSymbolPart(e[b],n);const d=await Promise.all(l),y=this.fieldMap;if(y)for(const b of d)xB(b,y);return new Im({data:this._combineSymbolParts(d,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(l=>l.data);const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),n=Wt(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,n);try{return(await n).data}catch(l){throw this._ongoingRequests.delete(e),l}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const n={...e[0]};if(e.length>1){n.symbolLayers=[];for(const l of e){const d=l;n.symbolLayers.unshift(...d.symbolLayers)}}return r&&(n.callout=uge),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function xB(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&hge(n,e)}}function hge(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":xB(n,e);break;case"CIMTextSymbol":n.fieldMap=e}}}const CMe=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:V$},Symbol.toStringTag,{value:"Module"}));var y6;let xo=y6=class extends pf(ql){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new V$(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new y6({config:ae(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ae(this.fieldMap),url:ae(this.url),visualVariables:ae(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await _s(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};g([S({type:V$})],xo.prototype,"_loader",null),g([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],xo.prototype,"config",void 0),g([S({type:Object,json:{write:!0}})],xo.prototype,"fieldMap",void 0),g([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],xo.prototype,"scaleExpression",void 0),g([Ae("scaleExpression")],xo.prototype,"writeData",null),g([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],xo.prototype,"scaleExpressionTitle",void 0),g([S({type:String,json:{write:!0}})],xo.prototype,"url",void 0),g([Ae("visualVariables")],xo.prototype,"writeVisualVariables",null),xo=y6=g([J("esri.renderers.DictionaryRenderer")],xo);const cge=xo;var m6;let hl=m6=class extends ve{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(ge.getLogger(this).error(".field: field must be a string value"),null):bm(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new m6({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([S({type:Ne,json:{type:[Number],write:!0}})],hl.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],hl.prototype,"field",void 0),g([xt("field")],hl.prototype,"castField",null),g([S({type:String,json:{write:!0}})],hl.prototype,"label",void 0),g([S({type:String,json:{write:!0}})],hl.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],hl.prototype,"valueExpressionTitle",void 0),hl=m6=g([J("esri.renderers.support.AttributeColorInfo")],hl);const SB=hl;var g6;let Ab=g6=class extends ve{constructor(){super(...arguments),this.unit=null}clone(){return new g6({unit:this.unit})}};g([S({type:String,json:{write:!0}})],Ab.prototype,"unit",void 0),Ab=g6=g([J("esri.renderers.support.DotDensityLegendOptions")],Ab);const dge=Ab;var v6;let Cs=v6=class extends pf(ql){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ne([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new cn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Rh({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new v6({attributes:ae(this.attributes),backgroundColor:ae(this.backgroundColor),dotBlendingEnabled:ae(this.dotBlendingEnabled),dotShape:ae(this.dotShape),dotSize:ae(this.dotSize),dotValue:ae(this.dotValue),legendOptions:ae(this.legendOptions),outline:ae(this.outline),referenceScale:ae(this.referenceScale),visualVariables:ae(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await _s(t,e,i.valueExpression),i.field&&t.add(i.field)}};g([S({type:[SB],json:{write:!0}})],Cs.prototype,"attributes",void 0),g([S({type:Ne,json:{write:!0}})],Cs.prototype,"backgroundColor",void 0),g([S({type:Boolean,json:{write:!0}})],Cs.prototype,"dotBlendingEnabled",void 0),g([S({type:String,json:{write:!1}})],Cs.prototype,"dotShape",void 0),g([S({type:Number,json:{write:!0}})],Cs.prototype,"dotSize",void 0),g([S({type:dge,json:{write:!0}})],Cs.prototype,"legendOptions",void 0),g([S({type:cn,json:{default:null,write:!0}})],Cs.prototype,"outline",void 0),g([S({type:Number,json:{write:!0}})],Cs.prototype,"dotValue",void 0),g([S({type:Number,json:{write:!0}})],Cs.prototype,"referenceScale",void 0),g([S({type:Number,json:{write:!0}})],Cs.prototype,"seed",void 0),g([Ue({dotDensity:"dot-density"})],Cs.prototype,"type",void 0),Cs=v6=g([J("esri.renderers.DotDensityRenderer")],Cs);const pge=Cs;let Rp=class extends ti(ve){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};g([S({type:String,json:{write:!0}})],Rp.prototype,"minLabel",void 0),g([S({type:String,json:{write:!0}})],Rp.prototype,"maxLabel",void 0),g([S({type:String,json:{write:!0}})],Rp.prototype,"title",void 0),Rp=g([J("esri.renderers.support.HeatmapLegendOptions")],Rp);function j_(){return[0,0,0,0]}function fge(t){return[t[0],t[1],t[2],t[3]]}function yf(t,e,i,r){return[t,e,i,r]}function yge(t){const e=j_(),i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function mge(t,e){return new Float64Array(t,e,4)}function MB(){return j_()}function $B(){return yf(1,1,1,1)}function TB(){return yf(1,0,0,0)}function IB(){return yf(0,1,0,0)}function EB(){return yf(0,0,1,0)}function AB(){return yf(0,0,0,1)}const gge=MB(),vge=$B(),bge=TB(),wge=IB(),_ge=EB(),xge=AB();Object.freeze(Object.defineProperty({__proto__:null,ONES:vge,UNIT_W:xge,UNIT_X:bge,UNIT_Y:wge,UNIT_Z:_ge,ZEROS:gge,clone:fge,create:j_,createView:mge,fromArray:yge,fromValues:yf,ones:$B,unitW:AB,unitX:TB,unitY:IB,unitZ:EB,zeros:MB},Symbol.toStringTag,{value:"Module"}));const B$=2.4;function Sge(t){return Da(t*B$)}function Mge(t){return Rr(t)/B$}function $ge(t,e,i,r){let{color:n,ratio:l}=e,{color:d,ratio:y}=i;y===l&&(y===1?l-=1e-6:y+=1e-6);const b=Ds((r-l)/(y-l),0,1);nL(t,n.toArray(),d.toArray(),b)}function LMe(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:y})=>y>=0&&y<=1).sort((y,b)=>y.ratio-b.ratio).map(({color:y,ratio:b})=>({color:y,ratio:Math.max(b,.001)})),t.length<1)return i;let r=t[0],n=t[0],l=1;const d=j_();for(let y=0;y<512;y++){const b=(y+.5)/512;for(;b>n.ratio&&l<t.length;)r=n,n=t[l++];$ge(d,r,n,b),i.set(d,4*y)}return i}function DMe(t,e,i,r){const{radius:n,fieldOffset:l,field:d}=e,y=Math.round(Rr(n)),b=new Float64Array(i*r);let x,$=Number.NEGATIVE_INFINITY;const E=Ege(d,l),k=new Set;for(const P of t){const D=P.getCursor();for(;D.next();){const L=D.getObjectId();if(k.has(L))continue;k.add(L);const N=D.readLegacyPointGeometry(),B=128;if(N.x<-B||N.x>=i+B||N.y<-B||N.y>r+B)continue;const W=+E(D),H=Math.max(0,Math.round(N.x)-y),Y=Math.max(0,Math.round(N.y)-y),ie=Math.min(r,Math.round(N.y)+y),ne=Math.min(i,Math.round(N.x)+y);for(let he=Y;he<ie;he++)for(let de=H;de<ne;de++){const be=he*i+de,we=Ige(N.x-de,N.y-he,y);x=b[be]+=we*W,x>$&&($=x)}}}return{matrix:b.buffer,max:$}}function RMe(t,e,i,r,n,l){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const d=t.getImageData(0,0,e,e);i&&r&&d.data.set(new Uint8ClampedArray(Tge(e,i,r,n,l))),t.putImageData(d,0,0)}function Tge(t,e,i,r,n){const l=new Uint32Array(t*t),d="buffer"in e?e:new Float64Array(e),y="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),b=y.length/(n-r);for(let x=0;x<d.length;x++){const $=d[x],E=Math.floor(($-r)*b);l[x]=y[Ds(E,0,y.length-1)]}return l.buffer}function Ige(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function jMe(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function Ege(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var b6;const kB="esri.renderers.HeatmapRenderer",Age=ge.getLogger(kB);function pk(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:l,minPixelIntensity:d,...y}=t;return y}}return t}let ur=b6=class extends ql{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new My({ratio:0,color:new Ne("rgba(255, 140, 0, 0)")}),new My({ratio:.75,color:new Ne("rgba(255, 140, 0, 1)")}),new My({ratio:.9,color:new Ne("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return pk(t)}get blurRadius(){return Mge(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Sge(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(B$**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||mr(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,H0(()=>{Gy(Age,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=pk(t),super.read(t,e)}getSymbol(){return new jh}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await ln(t,e,i),r&&typeof r=="string"&&await _s(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new b6({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ae(this.colorStops),field:this.field,legendOptions:ae(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([S({type:j$,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"authoringInfo",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ur.prototype,"blurRadius",null),g([S({type:[My],json:{write:!0}})],ur.prototype,"colorStops",void 0),g([S({type:String,json:{write:!0}})],ur.prototype,"field",void 0),g([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],ur.prototype,"fieldOffset",void 0),g([S({type:Rp,json:{write:!0}})],ur.prototype,"legendOptions",void 0),g([S({type:Number,json:{write:!0}})],ur.prototype,"maxDensity",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ur.prototype,"maxPixelIntensity",null),g([S({type:Number,json:{write:!0}})],ur.prototype,"minDensity",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ur.prototype,"minPixelIntensity",null),g([S({type:Number,cast:kt,json:{write:!0}})],ur.prototype,"radius",void 0),g([S({type:Number,range:{min:0},json:{default:0,write:!0}})],ur.prototype,"referenceScale",void 0),g([Ue({heatmap:"heatmap"})],ur.prototype,"type",void 0),g([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ur.prototype,"valueExpression",void 0),g([S({type:String})],ur.prototype,"valueExpressionTitle",void 0),g([S({readOnly:!0})],ur.prototype,"_pixelIntensityToDensity",null),ur=b6=g([J(kB)],ur);const PB=ur;let Wc=class extends ti(ve){constructor(){super(...arguments),this.color=new Ne([0,0,0,0]),this.label=null,this.threshold=0}};g([S({type:Ne,json:{write:!0}})],Wc.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],Wc.prototype,"label",void 0),g([S({type:Number,range:{min:0,max:1},json:{write:!0}})],Wc.prototype,"threshold",void 0),Wc=g([J("esri.renderers.support.OthersCategory")],Wc);let kb=class extends ti(ve){constructor(){super(...arguments),this.title=null}};g([S({type:String,json:{write:!0}})],kb.prototype,"title",void 0),kb=g([J("esri.renderers.support.PieChartLegendOptions")],kb);let Ws=class extends pf(ti(ql)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ne([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Wc,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new jh({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Go)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await _s(e,i,r.valueExpression),r.field&&e.add(r.field)}};g([S({type:[SB],json:{write:!0}})],Ws.prototype,"attributes",void 0),g([S({type:Rh,json:{default:null,write:!0}})],Ws.prototype,"backgroundFillSymbol",void 0),g([S({type:Ne,json:{write:!0}})],Ws.prototype,"defaultColor",void 0),g([S({type:String,json:{write:!0}})],Ws.prototype,"defaultLabel",void 0),g([S({type:Number,range:{min:0,max:1},json:{write:!0}})],Ws.prototype,"holePercentage",void 0),g([S({type:Wc,json:{write:!0}})],Ws.prototype,"othersCategory",void 0),g([S({type:kb,json:{write:!0}})],Ws.prototype,"legendOptions",void 0),g([S({type:cn,json:{default:null,write:!0}})],Ws.prototype,"outline",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Ws.prototype,"size",void 0),g([Ue({pieChart:"pie-chart"})],Ws.prototype,"type",void 0),Ws=g([J("esri.renderers.PieChartRenderer")],Ws);const kge=Ws;var w6;let Pc=w6=class extends pf(ql){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new w6({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ae(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};g([S({type:String,json:{write:!0}})],Pc.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Pc.prototype,"label",void 0),g([S(ff)],Pc.prototype,"symbol",void 0),g([Ue({simple:"simple"})],Pc.prototype,"type",void 0),Pc=w6=g([J("esri.renderers.SimpleRenderer")],Pc);const F_=Pc,Pge=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function _6(t){return t instanceof Be}function fk(t){return t instanceof ze?Object.keys(t.items):_6(t)?mr(t).keys():t?Object.keys(t):[]}function ov(t,e){return t instanceof ze?t.items[e]:t[e]}function Cge(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Ly(t){return t?t.declaredClass:null}function CB(t,e){var E;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=fk(t),n=fk(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||Cge(t,e))return{type:"complete",oldValue:t,newValue:e};const l=n.filter(k=>!r.includes(k)),d=r.filter(k=>!n.includes(k)),y=r.filter(k=>n.includes(k)&&ov(t,k)!==ov(e,k)).concat(l,d).sort(),b=Ly(t);if(b&&Pge.includes(b)&&y.length)return{type:"complete",oldValue:t,newValue:e};let x;const $=_6(t)&&_6(e);for(const k of y){const P=ov(t,k),D=ov(e,k);let L;if(($||typeof P!="function"&&typeof D!="function")&&P!==D&&(P!=null||D!=null)){if(i&&i[k]&&typeof i[k]=="function")L=(E=i[k])==null?void 0:E.call(i,P,D);else if(P instanceof Date&&D instanceof Date){if(P.getTime()===D.getTime())continue;L={type:"complete",oldValue:P,newValue:D}}else L=typeof P=="object"&&typeof D=="object"&&Ly(P)===Ly(D)?CB(P,D):{type:"complete",oldValue:P,newValue:D};L!=null&&(x!=null?x.diff[k]=L:x={type:"partial",diff:{[k]:L}})}}return x}function Oge(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const l=r.diff[n];if(!l)return!1;r=l}}return!0}function VMe(t,e){for(const i of e)if(Oge(t,i))return!0;return!1}function Lge(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Ly(t)!==Ly(e)?{type:"complete",oldValue:t,newValue:e}:CB(t,e)}let jp=class extends ti(ve){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};g([S(Tb)],jp.prototype,"value",void 0),g([S(Tb)],jp.prototype,"value2",void 0),g([S(Tb)],jp.prototype,"value3",void 0),jp=g([J("esri.renderers.support.UniqueValue")],jp);const x0=jp;let Du=class extends ti(ve){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new x0({value:r})):i==="object"?e[0]instanceof x0?e:e.map(r=>new x0(r)):null}};g([S({type:String,json:{write:!0}})],Du.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Du.prototype,"label",void 0),g([S(ff)],Du.prototype,"symbol",void 0),g([S({type:[x0],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new x0({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(Go).map(l=>l.toString());i.push(n)}e.values=i}}}})],Du.prototype,"values",void 0),g([xt("values")],Du.prototype,"castValues",null),Du=g([J("esri.renderers.support.UniqueValueClass")],Du);const OB=Du;let G1=class extends ti(ve){constructor(e){super(e),this.heading=null,this.classes=null}};g([S({type:String,json:{write:!0}})],G1.prototype,"heading",void 0),g([S({type:[OB],json:{write:!0}})],G1.prototype,"classes",void 0),G1=g([J("esri.renderers.support.UniqueValueGroup")],G1);const x6=G1;var S6;let Cc=S6=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new S6({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};g([S({type:String,json:{write:!0}})],Cc.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Cc.prototype,"label",void 0),g([S(ff)],Cc.prototype,"symbol",void 0),g([S(Tb)],Cc.prototype,"value",void 0),Cc=S6=g([J("esri.renderers.support.UniqueValueInfo")],Cc);const Dy=Cc,Dge=()=>!!ce("enable-feature:force-wosr"),Rge=()=>ce.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),jge=()=>ce.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),Fge=()=>ce.add("enable-i3s-patching",!0,!0,!0),Nge=()=>ce.add("enable-i3s-patching",!1,!0,!0),qMe=()=>!!ce("enable-feature:SceneLayer-editing"),zge=(t="i3s-patching")=>{switch(Nge(),jge(),ce.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":Rge();break;case"i3s-patching":Fge()}};zge("i3s-patching");let V5={};async function Vge(t,e){try{return{data:(await G$(t,e)).data,baseUrl:EM(t),styleUrl:t}}catch(i){return On(i),null}}function Bge(t,e,i){const r=e.portal!=null?e.portal:ts.getDefault();let n;const l=`${r.url} - ${r.user&&r.user.username} - ${t}`;return V5[l]||(V5[l]=Gge(t,r,i).then(d=>(n=d,d.fetchData())).then(d=>({data:d,baseUrl:n.itemUrl??"",styleName:t}))),V5[l]}function Gge(t,e,i){return e.load(i).then(()=>{const r=new Ea({disableExtraQuery:!0,query:`owner:${yk} AND type:${mk} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var d;let n=null;const l=t.toLowerCase();if(r&&Array.isArray(r)){for(const y of r)if(((d=y.typeKeywords)==null?void 0:d.some(x=>x.toLowerCase()===l))&&y.type===mk&&y.owner===yk){n=y;break}}if(!n)throw new se("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function LB(t,e,i){return t&&t.styleUrl!=null?Vge(t.styleUrl,i):t&&t.styleName!=null?Bge(t.styleName,e,i):Promise.reject(new se("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function DB(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Uge(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!Dge())for(const r of i){const n=t.formatInfos.find(l=>l.type===r);if(n)return n.href}return t.webRef}function G$(t,e){const i={responseType:"json",query:{f:"json"},...e};return Wt(Ro(t),i)}const yk="esri_en",mk="Style",qge="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var U1;const RB="esri.renderers.UniqueValueRenderer",hu=ge.getLogger(RB),gk="uvInfos-watcher",vk="uvGroups-watcher",Hge=",",Wge=zi(Dy);function Jge(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:l,valueExpression:d}=t,y=!(!e||!i);return[{classes:(l??[]).map(b=>{var B;const{symbol:x,label:$,value:E,description:k}=b,[P,D,L]=y?((B=E==null?void 0:E.toString())==null?void 0:B.split(n||""))||[]:[E],N=[];return(e||d)&&N.push(P),i&&N.push(D),r&&N.push(L),{symbol:x,label:$,values:[N],description:k}})}]}let yi=U1=class extends pf(ql){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let l=0;l<i.length;l++){const d=e.find(y=>y.value===i[l].value);d?Lge(d,i[l])?(n.changed.push({type:"complete",oldValue:d,newValue:i[l]}),r=!0):n.unchanged.push({oldValue:d,newValue:i[l]}):(n.added.push(i[l]),r=!0)}for(let l=0;l<e.length;l++)i.find(d=>d.value===e[l].value)||(n.removed.push(e[l]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:bm(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r&&r.messages?r.messages.push(new se("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):hu.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||ts.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=_h(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Am(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?hu.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?hu.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void hu.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?Wge(t):new Dy({value:t,symbol:CR(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void hu.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await Rl()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void hu.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const n=await Rl(),{arcadeUtils:l}=n;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,l)=>n+l.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new U1({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ae(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ae(this.visualVariables),legendOptions:ae(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ae(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=ae(this.uniqueValueInfos),i=ae(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(ae(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),_s(t,e,this.valueExpression)];ln(t,e,this.field),ln(t,e,this.field2),ln(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return LB(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new Dd({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const l=new Dy({value:r.name,symbol:n});e.push(l),this._valueInfoMap[r.name]=l}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Hge)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(gk);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(me(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,gk)}}_watchUniqueValueGroups(){this.removeHandles(vk);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(me(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(me(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,l)=>{n!==l&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,vk)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:l,valueExpression:d}=this;if(!e&&!d)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const y=!(!e||!i);for(const b of l)for(const x of b.classes??[]){const{symbol:$,label:E,values:k,description:P}=x;for(const D of k??[]){const{value:L,value2:N,value3:B}=D,W=[L];i&&W.push(N),r&&W.push(B);const H=y?W.join(n||""):W[0];t.push(new Dy({symbol:$,label:E,value:H,description:P}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:l}=this;if(!e&&!r||!l.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const d=!(!e||!i),y=l.map(x=>{var B;const{symbol:$,label:E,value:k,description:P}=x,[D,L,N]=d?((B=k==null?void 0:k.toString())==null?void 0:B.split(n||""))||[]:[k];return new OB({symbol:$,label:E,description:P,values:[new x0({value:D,value2:L,value3:N})]})}),b=[new x6({classes:y})];t&&Object.freeze(b),this._set("uniqueValueGroups",b),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:l}=e??{};let d=this._cache.compiledFunc;const y=l.arcadeUtils;if(!d){const x=y.createSyntaxTree(this.valueExpression);d=y.createFunction(x),this._cache.compiledFunc=d}const b=y.executeFunction(d,y.createExecContext(t,y.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[b+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const n=this.field2,l=this.field3,d=[];e&&d.push(i[e]),n&&d.push(i[n]),l&&d.push(i[l]),r=d.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new U1(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||ts.getDefault());const r=i.populateFromStyle();return r.catch(n=>{hu.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new U1(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{hu.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};g([S({readOnly:!0})],yi.prototype,"_cache",null),g([Ue({uniqueValue:"unique-value"})],yi.prototype,"type",void 0),g([S(bB)],yi.prototype,"backgroundFillSymbol",void 0),g([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],yi.prototype,"field",null),g([xt("field")],yi.prototype,"castField",null),g([Ae("field")],yi.prototype,"writeField",null),g([S({type:String,value:null,json:{write:!0}})],yi.prototype,"field2",null),g([S({type:String,value:null,json:{write:!0}})],yi.prototype,"field3",null),g([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],yi.prototype,"orderByClassesEnabled",void 0),g([S({type:String,value:null,json:{write:!0}})],yi.prototype,"valueExpression",null),g([S({type:String,json:{write:!0}})],yi.prototype,"valueExpressionTitle",void 0),g([S({type:_0,json:{write:!0}})],yi.prototype,"legendOptions",void 0),g([S({type:String,json:{write:!0}})],yi.prototype,"defaultLabel",void 0),g([S(iC({...ff},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],yi.prototype,"defaultSymbol",null),g([S({type:String,value:null,json:{write:!0}})],yi.prototype,"fieldDelimiter",null),g([S({type:ts,readOnly:!0})],yi.prototype,"portal",void 0),g([Se("portal",["styleName"])],yi.prototype,"readPortal",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],yi.prototype,"styleOrigin",void 0),g([Se("styleOrigin",["styleName","styleUrl"])],yi.prototype,"readStyleOrigin",null),g([Ae("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],yi.prototype,"writeStyleOrigin",null),g([S({type:[x6],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||Jge(e)).map(r=>x6.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],yi.prototype,"uniqueValueGroups",null),g([S({type:[Dy],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],yi.prototype,"uniqueValueInfos",null),yi=U1=g([J(RB)],yi);const U$=yi,Jm={key:"type",base:ql,typeMap:{heatmap:PB,simple:F_,"unique-value":U$,"class-breaks":_B,"dot-density":pge,dictionary:cge,"pie-chart":kge},errorContext:"renderer"},jB={key:"type",base:ql,typeMap:{simple:F_,"unique-value":U$,"class-breaks":_B,heatmap:PB},errorContext:"renderer"};function HMe(t,e){return pm(t,null,e)}const Yge=W0({types:Jm});function pm(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Un("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Yge(t,e,i):null}let Kge=class FB{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(yx),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new FB,r=this._originStores[Le.DEFAULTS];r&&r.forEach((n,l)=>{i.set(l,ae(n),Le.DEFAULTS)});for(let n=Le.SERVICE;n<yx;n++){const l=this._originStores[n];l&&l.forEach((d,y)=>{e&&e.has(y)||i.set(y,ae(d),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Le.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const l=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),l!==i}return!1}delete(e,i=Le.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let l=i-1;l>=0;l--){const d=this._originStores[l];if(d&&d.has(e)){this._values.set(e,d.get(e)),this._propertyOriginMap.set(e,l);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r&&r.get(e),l=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),l!==n}originOf(e){return this._propertyOriginMap.get(e)||Le.DEFAULTS}forEach(e){this._values.forEach(e)}};const NB=t=>{let e=class extends t{constructor(...i){super(...i);const r=mr(this),n=r.store,l=new Kge;r.store=l,UC(r,n,l)}read(i,r){HC(this,i,r)}getAtOrigin(i,r){const n=B5(this),l=vs(r);if(typeof i=="string")return n.get(i,l);const d={};return i.forEach(y=>{d[y]=n.get(y,l)}),d}originOf(i){return Ny(this.originIdOf(i))}originIdOf(i){return B5(this).originOf(i)}revert(i,r){const n=B5(this),l=vs(r),d=mr(this);let y;y=typeof i=="string"?i==="*"?n.keys(l):[i]:i,y.forEach(b=>{d.invalidate(b),n.revert(b,l),d.commit(b)})}};return e=g([J("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function B5(t){return mr(t).store}let bk=class extends NB(Be){};bk=g([J("esri.core.ReadOnlyMultiOriginJSONSupport")],bk);const Zge=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return G5(this).delete(i,vs(r))}write(i,r){return JC(this,i=i||{},r),i}setAtOrigin(i,r,n){mr(this).setAtOrigin(i,r,vs(n))}removeOrigin(i){const r=G5(this),n=vs(i),l=r.keys(n);for(const d of l)r.originOf(d)===n&&r.set(d,r.get(d,n),Le.USER)}updateOrigin(i,r){const n=G5(this),l=vs(r),d=this.get(i);for(let y=l+1;y<yx;++y)n.delete(i,y);n.set(i,d,l)}toJSON(i){return this.write({},i)}};return e=g([J("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function G5(t){return mr(t).store}const N_=t=>{let e=class extends Zge(NB(t)){constructor(...i){super(...i)}};return e=g([J("esri.core.MultiOriginJSONSupport")],e),e};let wk=class extends N_(Be){};wk=g([J("esri.core.MultiOriginJSONSupport")],wk);async function Xge(t,e){const{WhereClause:i}=await le(()=>import("./WhereClause-e24c22dd.js").then(r=>r.W),["assets/WhereClause-e24c22dd.js","assets/executionError-c92d3b85.js"]);return i.create(t,e)}function q$(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}var M6;let Oc=M6=class extends ve{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new M6({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([S({type:String,json:{write:!0}})],Oc.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],Oc.prototype,"name",void 0),g([S({type:["boolean","date","number","string"],json:{write:!0}})],Oc.prototype,"returnType",void 0),g([S({type:String,json:{write:!0}})],Oc.prototype,"title",void 0),Oc=M6=g([J("esri.form.ExpressionInfo")],Oc);const Qge=Oc;let Lc=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};g([S({type:String,json:{write:!0}})],Lc.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Lc.prototype,"label",void 0),g([S()],Lc.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Lc.prototype,"visibilityExpression",void 0),Lc=g([J("esri.form.elements.Element")],Lc);const U0=Lc;var $6;let Pb=$6=class extends ve{constructor(t){super(t),this.type=null}clone(){return new $6({type:this.type})}};g([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Pb.prototype,"type",void 0),Pb=$6=g([J("esri.form.elements.inputs.AttachmentInput")],Pb);const eve=Pb;var T6;let Dc=T6=class extends U0{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new T6({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};g([S({type:String,json:{write:!0}})],Dc.prototype,"attachmentKeyword",void 0),g([S({type:Boolean,json:{write:!0}})],Dc.prototype,"editable",void 0),g([S({type:eve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Dc.prototype,"input",void 0),g([S({type:["attachment"],json:{read:!1,write:!0}})],Dc.prototype,"type",void 0),Dc=T6=g([J("esri.form.elements.AttachmentElement")],Dc);const _k=Dc;let Cb=class extends ve{constructor(e){super(e),this.type=null}};g([S()],Cb.prototype,"type",void 0),Cb=g([J("esri.form.elements.inputs.Input")],Cb);const mf=Cb;let q1=class extends mf{constructor(e){super(e),this.maxLength=null,this.minLength=0}};g([S({type:Number,json:{write:!0}})],q1.prototype,"maxLength",void 0),g([S({type:Number,json:{write:!0}})],q1.prototype,"minLength",void 0),q1=g([J("esri.form.elements.inputs.TextInput")],q1);const H$=q1;var I6;let Ob=I6=class extends H${constructor(t){super(t),this.type="barcode-scanner"}clone(){return new I6({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],Ob.prototype,"type",void 0),Ob=I6=g([J("esri.form.elements.inputs.BarcodeScannerInput")],Ob);const tve=Ob;var E6;let Fp=E6=class extends mf{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new E6({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};g([S({type:String,json:{write:!0}})],Fp.prototype,"noValueOptionLabel",void 0),g([S({type:Boolean,json:{write:!0}})],Fp.prototype,"showNoValueOption",void 0),g([S({type:["combo-box"],json:{read:!1,write:!0}})],Fp.prototype,"type",void 0),Fp=E6=g([J("esri.form.elements.inputs.ComboBoxInput")],Fp);const ive=Fp;var A6;function xk(t){return t!=null?new Date(t):null}function Sk(t){return t?t.getTime():null}let So=A6=class extends mf{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return xk(e.max)}writeMax(t,e){e.max=Sk(t)}readMin(t,e){return xk(e.min)}writeMin(t,e){e.min=Sk(t)}clone(){return new A6({includeTime:this.includeTime,max:this.max,min:this.min})}};g([S({type:Boolean,json:{write:!0}})],So.prototype,"includeTime",void 0),g([S({type:Date,json:{type:Number,write:!0}})],So.prototype,"max",void 0),g([Se("max")],So.prototype,"readMax",null),g([Ae("max")],So.prototype,"writeMax",null),g([S({type:Date,json:{type:Number,write:!0}})],So.prototype,"min",void 0),g([Se("min")],So.prototype,"readMin",null),g([Ae("min")],So.prototype,"writeMin",null),g([S({type:["datetime-picker"],json:{read:!1,write:!0}})],So.prototype,"type",void 0),So=A6=g([J("esri.form.elements.inputs.DateTimePickerInput")],So);const rve=So;var k6;let Np=k6=class extends mf{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new k6({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};g([S({type:String,json:{write:!0}})],Np.prototype,"noValueOptionLabel",void 0),g([S({type:Boolean,json:{write:!0}})],Np.prototype,"showNoValueOption",void 0),g([S({type:["radio-buttons"],json:{read:!1,write:!0}})],Np.prototype,"type",void 0),Np=k6=g([J("esri.form.elements.inputs.RadioButtonsInput")],Np);const sve=Np;var P6;let zp=P6=class extends mf{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new P6({offValue:this.offValue,onValue:this.onValue})}};g([S({type:[String,Number],json:{write:!0}})],zp.prototype,"offValue",void 0),g([S({type:[String,Number],json:{write:!0}})],zp.prototype,"onValue",void 0),g([S({type:["switch"],json:{read:!1,write:!0}})],zp.prototype,"type",void 0),zp=P6=g([J("esri.form.elements.inputs.SwitchInput")],zp);const nve=zp;var C6;let Lb=C6=class extends H${constructor(t){super(t),this.type="text-area"}clone(){return new C6({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["text-area"],json:{read:!1,write:!0}})],Lb.prototype,"type",void 0),Lb=C6=g([J("esri.form.elements.inputs.TextAreaInput")],Lb);const ove=Lb;var O6;let Db=O6=class extends H${constructor(t){super(t),this.type="text-box"}clone(){return new O6({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["text-box"],json:{read:!1,write:!0}})],Db.prototype,"type",void 0),Db=O6=g([J("esri.form.elements.inputs.TextBoxInput")],Db);const ave=Db,lve={base:mf,key:"type",typeMap:{"barcode-scanner":tve,"combo-box":ive,"datetime-picker":rve,"radio-buttons":sve,switch:nve,"text-area":ove,"text-box":ave}};var L6;const zB="esri.form.elements.FieldElement",Mk=ge.getLogger(zB);let En=L6=class extends U0{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return Gy(Mk,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){Gy(Mk,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new L6({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};g([S({types:dV,json:{read:{reader:M$},write:!0}})],En.prototype,"domain",void 0),g([S({type:Boolean,json:{write:!0}})],En.prototype,"editable",null),g([S({type:String,json:{write:!0}})],En.prototype,"editableExpression",void 0),g([S({type:String,json:{write:!0}})],En.prototype,"fieldName",void 0),g([S({type:String,json:{write:!0}})],En.prototype,"hint",void 0),g([S({types:lve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],En.prototype,"input",void 0),g([S({type:String,json:{write:!0}})],En.prototype,"requiredExpression",void 0),g([S({type:String,json:{read:!1,write:!0}})],En.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],En.prototype,"valueExpression",void 0),En=L6=g([J(zB)],En);const $k=En;var D6;let cl=D6=class extends U0{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new D6({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:ae(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};g([S({type:Number,json:{write:!0}})],cl.prototype,"displayCount",void 0),g([S({type:["list"],json:{write:!0}})],cl.prototype,"displayType",void 0),g([S({type:String,json:{write:!0}})],cl.prototype,"editableExpression",void 0),g([S({type:[g7],json:{write:!0}})],cl.prototype,"orderByFields",void 0),g([S({type:Number,json:{write:!0}})],cl.prototype,"relationshipId",void 0),g([S({type:["relationship"],json:{read:!1,write:!0}})],cl.prototype,"type",void 0),cl=D6=g([J("esri.form.elements.RelationshipElement")],cl);const Tk=cl;function VB(t){return{typesWithGroup:{base:U0,key:"type",typeMap:{attachment:_k,field:$k,group:t,relationship:Tk}},typesWithoutGroup:{base:U0,key:"type",typeMap:{attachment:_k,field:$k,relationship:Tk}}}}function BB(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function GB(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function UB(t,e,i=!0){return t?t.map(r=>Ca(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var R6;let xa=R6=class extends U0{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return UB(t,U5,!1)}readElements(t,e){return BB(e.formElements,U5,!1)}writeElements(t,e){e.formElements=GB(t,U5,!1)}clone(){return new R6({description:this.description,elements:ae(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};g([S({json:{write:!0}})],xa.prototype,"elements",void 0),g([xt("elements")],xa.prototype,"castElements",null),g([Se("elements",["formElements"])],xa.prototype,"readElements",null),g([Ae("elements")],xa.prototype,"writeElements",null),g([S({type:["collapsed","expanded"],json:{write:!0}})],xa.prototype,"initialState",void 0),g([S({type:String,json:{read:!1,write:!0}})],xa.prototype,"type",void 0),xa=R6=g([J("esri.form.elements.GroupElement")],xa);const U5=VB(xa),uve=xa;var j6;const q5=VB(uve);let Mo=j6=class extends ve{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return UB(t,q5)}readElements(t,e){return BB(e.formElements,q5)}writeElements(t,e){e.formElements=GB(t,q5)}clone(){return new j6({description:this.description,expressionInfos:ae(this.expressionInfos),elements:ae(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};g([S({type:String,json:{write:!0}})],Mo.prototype,"description",void 0),g([S({json:{write:!0}})],Mo.prototype,"elements",void 0),g([xt("elements")],Mo.prototype,"castElements",null),g([Se("elements",["formElements"])],Mo.prototype,"readElements",null),g([Ae("elements")],Mo.prototype,"writeElements",null),g([S({type:[Qge],json:{write:!0}})],Mo.prototype,"expressionInfos",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Mo.prototype,"preserveFieldValuesWhenHidden",void 0),g([S({type:String,json:{write:!0}})],Mo.prototype,"title",void 0),Mo=j6=g([J("esri.form.FormTemplate")],Mo);const hve=Mo;function Ik(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function cve(t,e,i){if(!t&&!e||!i)return;const r=E0(i);Ek(t,i,r),Ek(e,i,r)}function Ek(t,e,i){if(t)for(const r of t)dve(r.geometry,e,i)}function dve(t,e,i){if(t==null||!t.spatialReference||qi(t.spatialReference,e))return;const r=E0(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)Ik(t,t.rings,r);else if("paths"in t)Ik(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}let pve=0;const qB="esri.layers.graphics.sources.MemorySource",H5=ge.getLogger(qB);let ml=class extends qo.LoadableMixin(j2(Xo(ze))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);DS(e,this.layer.spatialReference,r);const n=qm.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const l=this.layer.objectIdField;for(const d of n.features){const y=d.attributes[l],b=this._idToClientGraphic.get(y);b&&(d.geometry=b.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new se("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return DS(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Nt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new se("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],l=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const d=$=>"objectId"in $&&$.objectId!=null?$.objectId:"attributes"in $&&$.attributes[i]!=null?$.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const $ of e.deleteFeatures){const E=d($);E!=null&&n.push(E)}const y=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const $ of e.updateFeatures)if(l.push(this._serializeFeature($)),y){const E=d($);E!=null&&y.set(E,$)}}cve(r?r.features:null,l,this.layer.spatialReference);const{fullExtent:b,featureEditResults:x}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:l,deletes:n});return this.fullExtent=b,r&&r.finish(x.uidToObjectId),this._updateClientGraphicIds(y,x),this._createEditsResult(x)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new se("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let d=0;d<e.length;d++){const y=e[d],b=this._serializeFeature(y);n||y.geometry==null||(n=y.geometry.type),r[d]=b,i.set(`${b.uid}`,y)}const l=this;return{features:r,inferredGeometryType:n,finish(d){const y=l.sourceJSON.objectIdField;for(const b in d){const x=d[b],$=i.get(b);$&&($.attributes||($.attributes={}),x===-1?delete $.attributes[y]:$.attributes[y]=x,l._addIdToClientGraphic($))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(pve++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Dl.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await FR("MemorySourceWorker",{strategy:ce("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:r,objectIdField:n,hasM:l,hasZ:d,timeInfo:y}=this.layer,b=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const x=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",P=>{H5.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const $={features:x.features,fields:i&&i.map(P=>P.toJSON()),geometryType:cI.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&l,hasZ:this._layerOrSourceGeometryType==="mesh"||d,objectIdField:n,spatialReference:b?null:r&&r.toJSON(),timeInfo:y?y.toJSON():null},E=await this._connection.invoke("load",$,{signal:e});for(const P of E.warnings)H5.warn(P.message,{layer:this.layer,warning:P});E.featureErrors.length&&H5.warn(`Encountered ${E.featureErrors.length} validation errors while loading features`,E.featureErrors);const k=E.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(x.inferredGeometryType)&&(k.geometryType=cI.toJSON(x.inferredGeometryType)),this.sourceJSON=k,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),x.finish(E.assignedObjectIds)}};g([yM({Type:xs,ensureType:zi(xs)})],ml.prototype,"itemType",void 0),g([S()],ml.prototype,"type",void 0),g([S({constructOnly:!0})],ml.prototype,"layer",void 0),g([S({readOnly:!0})],ml.prototype,"_workerGeometryType",null),g([S()],ml.prototype,"sourceJSON",void 0),ml=g([J(qB)],ml);function fve(t){return"portalItem"in t}const HB=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):fve(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return g([S({type:String})],e.prototype,"apiKey",null),e=g([J("esri.layers.mixins.APIKeyMixin")],e),e},WB=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Nd(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Wne(i,ge.getLogger(this)))}};return g([S()],e.prototype,"title",null),g([S({type:String})],e.prototype,"url",null),e=g([J("esri.layers.mixins.ArcGISService")],e),e},Ak={read:{reader:w$},write:{allowNull:!0,writer:_$}},JB=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return g([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),g([S({json:{read:!1,write:!1,origins:{"web-map":Ak,"portal-item":Ak}}})],e.prototype,"effect",void 0),e=g([J("esri.layers.mixins.BlendLayer")],e),e},YB=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return g([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=g([J("esri.layers.mixins.CustomParametersMixin")],e),e},KB=new Na.EventEmitter;function QMe(t,e,i=!1){const r=Gn();return i=e==null||i,KB.emit("apply-edits",{serviceUrl:t,layerId:e,mayReceiveServiceEdits:i,result:r.promise}),r}const ZB="esri.layers.mixins.EditBusLayer",XB=Symbol(ZB);function e7e(t){return t!=null&&typeof t=="object"&&XB in t}const yve=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this.when().then(()=>{this.own([KB.on("apply-edits",n=>{const{serviceUrl:l,layerId:d,mayReceiveServiceEdits:y,result:b}=n,x=l===this.url,$=d!=null&&this.layerId!=null&&d===this.layerId;if(!x||!$&&!y)return;const E=b.then(k=>{var D;if($&&(k.addedFeatures.length||k.updatedFeatures.length||k.deletedFeatures.length||k.addedAttachments.length||k.updatedAttachments.length||k.deletedAttachments.length))return this.emit("edits",ae(k)),k;const P=(D=k.editedFeatures)==null?void 0:D.find(({layerId:L})=>L===this.layerId);if(P){const{adds:L,updates:N,deletes:B}=P.editedFeatures,W={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:L?L.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],deletedFeatures:B?B.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],updatedFeatures:N?N.map(({current:{attributes:H}})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],editedFeatures:ae(k.editedFeatures),exceededTransferLimit:!1};return this.emit("edits",W),W}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:ae(k.editedFeatures),exceededTransferLimit:!1}});this.emit("apply-edits",{result:E})})])},()=>{})}};return e=XB,i=g([J(ZB)],i),i};var F6;const W5=new _t({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),J5=new _t({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let wa=F6=class extends ve{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:l,units:d,distance:y}=this;return new Bi({geometry:ae(i),objectIds:ae(l),spatialRelationship:r,timeExtent:ae(n),where:e,units:d,distance:y,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:l,distance:d}=this;return new F6({geometry:ae(e),objectIds:ae(n),spatialRelationship:i,timeExtent:ae(r),where:t,units:l,distance:d})}};g([S({type:String,json:{write:!0}})],wa.prototype,"where",void 0),g([S({types:Od,json:{write:!0}})],wa.prototype,"geometry",void 0),g([S({type:W5.apiValues,json:{name:"spatialRel",read:{reader:W5.read},write:{allowNull:!1,writer:W5.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],wa.prototype,"spatialRelationship",void 0),g([S({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],wa.prototype,"distance",void 0),g([S({type:[Number],json:{write:!0}})],wa.prototype,"objectIds",void 0),g([S({type:J5.apiValues,json:{read:J5.read,write:{writer:J5.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],wa.prototype,"units",void 0),g([S({type:Zo,json:{write:!0}})],wa.prototype,"timeExtent",void 0),wa=F6=g([J("esri.layers.support.FeatureFilter")],wa);const mve=wa;var N6;const kk={read:{reader:w$},write:{writer:_$,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},Pk={read:{reader:w$},write:{writer:_$,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Ck={name:"showExcludedLabels",default:!0};let Rc=N6=class extends ve{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const l=Object.keys(i.filter);if(l.length>1||l[0]!=="where")return(r=e.messages)==null||r.push(new se("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new se("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new N6({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};g([S({type:mve,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?es(i,n,e):es(i,null,e)}}}})],Rc.prototype,"filter",void 0),g([S({json:{write:!0,origins:{"web-map":kk,"portal-item":kk}}})],Rc.prototype,"includedEffect",void 0),g([S({json:{write:!0,origins:{"web-map":Pk,"portal-item":Pk}}})],Rc.prototype,"excludedEffect",void 0),g([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Ck,"portal-item":Ck}}})],Rc.prototype,"excludedLabelsVisible",void 0),Rc=N6=g([J("esri.layers.support.FeatureEffect")],Rc);const gve=Rc,Ok={write:{allowNull:!0}},vve=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return g([S({type:gve,json:{origins:{"web-map":Ok,"portal-item":Ok}}})],e.prototype,"featureEffect",void 0),e=g([J("esri.layers.mixins.FeatureEffectLayer")],e),e};function bve(t){if(!t)return t;const{start:e,end:i}=t;return new Zo({start:e!=null?dd(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?dd(i,-i.getTimezoneOffset(),"minutes"):i})}function wve(t){if(!t)return t;const{start:e,end:i}=t;return new Zo({start:e!=null?dd(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?dd(i,i.getTimezoneOffset(),"minutes"):i})}var z6;let H1=z6=class extends ve{constructor(t){super(t)}async collectRequiredFields(t,e){return _s(t,e,this.expression)}clone(){return new z6({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};g([S({type:String,json:{write:!0}})],H1.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],H1.prototype,"title",void 0),H1=z6=g([J("esri.layers.support.FeatureExpressionInfo")],H1);const Lk=H1;function t7e(t){return 1/(F$[t]||1)}function _ve(){const t=Object.keys(F$);return t.sort(),t}const xve=_ve();var V6;const av=rs()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Dk=new _t({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let dl=V6=class extends ve{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new V6({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&PU(this.featureExpressionInfo,t.featureExpressionInfo)}};g([S({type:Lk,json:{write:!0}})],dl.prototype,"featureExpressionInfo",void 0),g([Se("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],dl.prototype,"readFeatureExpressionInfo",null),g([Ae("featureExpressionInfo",{featureExpressionInfo:{type:Lk},"featureExpression.value":{type:[0]}})],dl.prototype,"writeFeatureExpressionInfo",null),g([S({type:av.apiValues,nonNullable:!0,json:{type:av.jsonValues,read:av.read,write:{writer:av.write,isRequired:!0}}})],dl.prototype,"mode",null),g([S({type:Number,json:{write:!0}})],dl.prototype,"offset",void 0),g([S({type:xve,json:{type:String,read:Dk.read,write:Dk.write}})],dl.prototype,"unit",null),dl=V6=g([J("esri.layers.support.ElevationInfo")],dl);const Sve=dl,Mve={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},z_={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},W$={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},QB={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:xh}}},$ve={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Tve={value:null,type:Sve,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function i7e(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const eG={write:!0,read:!0},B6={type:Number,json:{origins:{"web-document":eG,"portal-item":{write:!0}}}},Ive={...B6,json:{...B6.json,origins:{"web-document":{...eG,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Wy(e.layerDefinition.drawingInfo.transparency):void 0:Wy(e.drawingInfo.transparency)}}},Eve={type:Zo,readOnly:!0,get(){var y,b;if(!((y=this.layer)!=null&&y.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=(b=this.view)==null?void 0:b.timeExtent;let n=this.layer.timeExtent;t&&(n=wve(n));let l=i?r&&n?r.intersection(n):r||n:n;if(!l||l.isEmpty||l.isAllTime)return l;e&&(l=l.offset(-e.value,e.unit)),t&&(l=bve(l));const d=this._get("timeExtent");return l.equals(d)?d:l}},r7e={type:Nt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Nt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=dt.fromJSON(e.spatialReference)),i}}}},read:!1}},tG={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Ave={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},kve={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},iG={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};let pl=class extends ti(ve){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};g([S()],pl.prototype,"creatorField",void 0),g([S()],pl.prototype,"creationDateField",void 0),g([S()],pl.prototype,"editorField",void 0),g([S()],pl.prototype,"editDateField",void 0),g([S()],pl.prototype,"realm",void 0),g([S({type:Ih})],pl.prototype,"dateFieldsTimeReference",void 0),pl=g([J("esri.layers.support.EditFieldsInfo")],pl);const Pve=pl;let Sa=class extends ti(ve){constructor(e){super(e)}};g([S({constructOnly:!0,json:{write:!0}})],Sa.prototype,"name",void 0),g([S({constructOnly:!0,json:{write:!0}})],Sa.prototype,"fields",void 0),g([S({constructOnly:!0,json:{write:!0}})],Sa.prototype,"isAscending",void 0),g([S({constructOnly:!0,json:{write:!0}})],Sa.prototype,"indexType",void 0),g([S({constructOnly:!0,json:{write:!0}})],Sa.prototype,"isUnique",void 0),g([S({constructOnly:!0,json:{write:!0}})],Sa.prototype,"description",void 0),Sa=g([J("esri.layers.support.FeatureIndex")],Sa);const G6=new _t({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Cve(t,e,i,r){const n=await zh(t);if(await J$(t,e,r),!n.addAttachment)throw new se(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function J$(t,e,i){const{attributes:r}=e,{objectIdField:n}=t;return t.get("capabilities.data.supportsAttachment")?e?r?n&&r[n]?Promise.resolve():Promise.reject(new se(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new se(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new se(i,"A feature is required to add/delete/update attachments")):Promise.reject(new se(i,"this layer doesn't support attachments"))}async function Ove(t,e,i,r,n){const l=await zh(t);if(await J$(t,e,n),!l.updateAttachment)throw new se(n,"Layer source does not support updateAttachment capability");return l.updateAttachment(e,i,r)}async function Lve(t,e,i){const{applyEdits:r}=await le(()=>import("./editingSupport-b8002a58.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function Dve(t,e,i){const{uploadAssets:r}=await le(()=>import("./editingSupport-b8002a58.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function Rve(t,e,i,r){const n=await zh(t);if(await J$(t,e,r),!n.deleteAttachments)throw new se(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function jve(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new se(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function Fve(t,e,i,r){var P,D;e=l2.from(e),await t.load();const n=t.source,l=t.capabilities;if(!((P=l==null?void 0:l.data)!=null&&P.supportsAttachment))throw new se(r,"this layer doesn't support attachments");const{attachmentTypes:d,objectIds:y,globalIds:b,num:x,size:$,start:E,where:k}=e;if(!((D=l==null?void 0:l.operations)!=null&&D.supportsQueryAttachments)&&((d==null?void 0:d.length)>0||(b==null?void 0:b.length)>0||($==null?void 0:$.length)>0||x||E||k))throw new se(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(y!=null&&y.length||b!=null&&b.length||k))throw new se(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new se(r,"Layer source does not support queryAttachments capability",e);return n.queryAttachments(e)}async function Nve(t,e,i,r){const n=await zh(t);if(!n.queryObjectIds)throw new se(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Bi.from(e)??t.createQuery(),i)}async function zve(t,e,i,r){const n=await zh(t);if(!n.queryFeatureCount)throw new se(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Bi.from(e)??t.createQuery(),i)}async function Vve(t,e,i,r){const n=await zh(t);if(!n.queryExtent)throw new se(r,"Layer source does not support queryExtent capability");return n.queryExtent(Bi.from(e)??t.createQuery(),i)}async function Bve(t,e,i,r){const n=await zh(t);if(!n.queryRelatedFeatures)throw new se(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(B0.from(e),i)}async function Gve(t,e,i,r){const n=await zh(t);if(!n.queryRelatedFeaturesCount)throw new se(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(B0.from(e),i)}async function Uve(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await Xge(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function qve(t){const e=new Bi,i=t.get("capabilities.data"),r=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:l}=t;return e.timeExtent=n!=null&&l!=null?l.offset(-n.value,n.unit):l||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function rG(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function sG(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function Hve(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function zh(t){return(await t.load()).source}async function Wve(t,e){if(!wt||wt.findCredential(t))return;let i;try{const r=await OO(t,e);r&&(i=await wt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await wt.getCredential(t,{signal:r})}catch{}}async function Jve(t,e){var r;const i=(r=t.parsedUrl)==null?void 0:r.path;i&&Yve(t)&&await Wve(i,e)}function Yve(t){const e=t.editFieldsInfo;return!(!(e!=null&&e.creatorField)&&!(e!=null&&e.editorField))||(t.userHasUpdateItemPrivileges?t.hasUpdateItemRestrictions:!!t.userHasFullEditingPrivileges&&t.hasFullEditingRestrictions)}function Kve(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const Y5=W0({types:PR});function Y$(t,e){if(t.defaultSymbol)return t.types&&t.types.length?new U$({defaultSymbol:Y5(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:Y5(i.symbol,i,e)}))}):new F_({symbol:Y5(t.defaultSymbol,t,e)})}let Vp=class extends ti(ve){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};g([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Vp.prototype,"shapeAreaField",void 0),g([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Vp.prototype,"shapeLengthField",void 0),g([S({type:String,json:{read:t=>GW.read(t)||UW.read(t)}})],Vp.prototype,"units",void 0),Vp=g([J("esri.layers.support.GeometryFieldsInfo")],Vp);const Zve=Vp;var U6;let Bp=U6=class extends ve{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ze}clone(){return new U6({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};g([S({type:String,json:{write:!0}})],Bp.prototype,"floorField",void 0),g([S({json:{read:!1,write:!1}})],Bp.prototype,"viewAllMode",void 0),g([S({json:{read:!1,write:!1}})],Bp.prototype,"viewAllLevelIds",void 0),Bp=U6=g([J("esri.layers.support.LayerFloorInfo")],Bp);const nG=Bp,Rk=new _t({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),jk=new _t({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let An=class extends ti(ve){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};g([S({json:{read:Rk.read,write:Rk.write}})],An.prototype,"cardinality",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"composite",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"id",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"keyField",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"keyFieldInRelationshipTable",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"name",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"relatedTableId",void 0),g([S({json:{read:!0,write:!0}})],An.prototype,"relationshipTableId",void 0),g([S({json:{read:jk.read,write:jk.write}})],An.prototype,"role",void 0),An=g([J("esri.layers.support.Relationship")],An);const Xve=An,Qve={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Ke(t,e,i){return!!oG(t,e,i)}function lv(t,e,i){return oG(t,e,i)}function oG(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function ebe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Ym(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function K$(t,e){return{analytics:tbe(t),attachment:ibe(t),data:rbe(t),metadata:sbe(t),operations:nbe(t.capabilities,t,e),query:obe(t,e),queryRelated:abe(t),queryTopFeatures:lbe(t),editing:ube(t)}}function tbe(t){return{supportsCacheHint:Ym(t.advancedQueryCapabilities,"queryAnalytics")}}function ibe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Ym(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Ke(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=Qve[r.name];n&&(i[n]=!!r.isEnabled)}),i}function rbe(t){return{isVersioned:Ke(t,"isDataVersioned",!1),supportsAttachment:Ke(t,"hasAttachments",!1),supportsM:Ke(t,"hasM",!1),supportsZ:Ke(t,"hasZ",!1)}}function sbe(t){return{supportsAdvancedFieldProperties:Ke(t,"supportsFieldDescriptionProperty",!1)}}function nbe(t,e,i){const r=t?t.toLowerCase().split(",").map(k=>k.trim()):[],n=i?Nd(i):null,l=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),d=r.includes("editing")&&!e.datesInUnknownTimezone;let y=d&&r.includes("create"),b=d&&r.includes("delete"),x=d&&r.includes("update");const $=r.includes("changetracking"),E=e.advancedQueryCapabilities;return d&&!(y||b||x)&&(y=b=x=!0),{supportsCalculate:Ke(e,"supportsCalculate",!1),supportsTruncate:Ke(e,"supportsTruncate",!1),supportsValidateSql:Ke(e,"supportsValidateSql",!1),supportsAdd:y,supportsDelete:b,supportsEditing:d,supportsChangeTracking:$,supportsQuery:l,supportsQueryAnalytics:Ke(E,"supportsQueryAnalytic",!1),supportsQueryAttachments:Ke(E,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Ke(E,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Ke(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:x,supportsExceedsLimitStatistics:Ke(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Ke(e,"supportsAsyncConvert3D",!1)}}function obe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,l=t.currentVersion,d=e==null?void 0:e.includes("MapServer"),y=!d||l>=ce("mapserver-pbf-version-support"),b=iF(e),x=new Set((t.supportedQueryFormats??"").split(",").map($=>$.toLowerCase().trim()));return{supportsStatistics:Ke(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Ke(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Ke(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:ebe(i),supportsCentroid:Ke(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Ke(i,"supportsQueryWithDistance",!1),supportsDistinct:Ke(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Ke(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Ke(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ke(i,"supportsHavingClause",!1),supportsOrderBy:Ke(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Ke(i,"supportsPagination",!1),supportsQuantization:Ke(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ke(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Ke(t,"supportsReturningQueryGeometry",!1),supportsResultType:Ke(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Ke(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Ke(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ke(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Ke(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Ke(r,"allowOthersToQuery",!0),supportsHistoricMoment:Ke(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&x.has("pbf"),supportsDisjointSpatialRelationship:Ke(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Ke(i,"supportsQueryWithCacheHint",!1)||Ym(i,"query"),supportsDefaultSpatialReference:Ke(i,"supportsDefaultSR",!1),supportsCompactGeometry:b,supportsFullTextSearch:Ke(i,"supportsFullTextSearch",!1),maxRecordCountFactor:lv(t,"maxRecordCountFactor",void 0),maxRecordCount:lv(t,"maxRecordCount",void 0),standardMaxRecordCount:lv(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:lv(t,"tileMaxRecordCount",void 0)}}function abe(t){const e=t.advancedQueryCapabilities,i=Ke(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ke(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Ym(e,"queryRelated")}}function lbe(t){return{supportsCacheHint:Ym(t.advancedQueryCapabilities,"queryTopFilter")}}function ube(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Ke(t,"allowGeometryUpdates",!0),supportsGlobalId:Ke(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Ke(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Ke(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ke(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ke(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ke(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ke(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ke(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ke(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Ke(i,"supportsAsyncApplyEdits",!1)}}const hbe=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=dt.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(ze.ofType(Sa)),this.version=void 0}readCapabilitiesFromService(i,r){return K$(r,this.url)}get effectiveCapabilities(){var d;const i=this.capabilities;if(!i)return null;const r=ae(i),{operations:n,editing:l}=r;return(d=this.sourceJSON)!=null&&d.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=l.supportsDeleteByOthers=l.supportsGeometryUpdate=l.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=l.supportsGeometryUpdate=!0),r)}get hasFullEditingRestrictions(){var l;const i=this.capabilities;if(!i||(l=this.sourceJSON)!=null&&l.isMultiServicesView)return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var l;const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return(l=this.sourceJSON)!=null&&l.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return rG(r)}readObjectIdFieldFromService(i,r){return sG(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=Jne({layer:this,url:i,nonStandardUrlAllowed:!0,logger:ge.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,l){Yne(this,i,null,r,l)}readVersion(i,r){return Hve(r)}};return g([S({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),g([Se("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),g([S({readOnly:!0})],e.prototype,"effectiveCapabilities",null),g([S({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),g([S({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),g([S({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),g([S({type:Ih})],e.prototype,"dateFieldsTimeReference",void 0),g([S({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),g([S({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),g([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),g([S({readOnly:!0,type:Pve})],e.prototype,"editFieldsInfo",void 0),g([S({readOnly:!0})],e.prototype,"editingInfo",void 0),g([Se("editingInfo")],e.prototype,"readEditingInfo",null),g([S((()=>{const i=ae(Tve),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),g([S({type:nG,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),g([S({type:Nt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),g([S()],e.prototype,"gdbVersion",void 0),g([S({readOnly:!0,type:Zve,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),g([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:G6.read}}}})],e.prototype,"geometryType",void 0),g([S({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),g([S({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),g([S({readOnly:!0,type:m_})],e.prototype,"heightModelInfo",void 0),g([S({type:Date})],e.prototype,"historicMoment",void 0),g([S({readOnly:!0})],e.prototype,"isTable",void 0),g([Se("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),g([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),g([S(Ave)],e.prototype,"minScale",void 0),g([Se("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),g([S(kve)],e.prototype,"maxScale",void 0),g([Se("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),g([S({type:String})],e.prototype,"globalIdField",void 0),g([Se("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),g([S({type:String})],e.prototype,"objectIdField",void 0),g([Se("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),g([S({type:Ih})],e.prototype,"preferredTimeReference",void 0),g([S({type:[Xve],readOnly:!0})],e.prototype,"relationships",void 0),g([S()],e.prototype,"sourceJSON",void 0),g([S({type:Boolean})],e.prototype,"returnM",void 0),g([S({type:Boolean})],e.prototype,"returnZ",void 0),g([S({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),g([Se("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),g([S({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),g([S({type:dt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),g([S({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),g([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),g([S({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),g([S({type:ze.ofType(Sa),readOnly:!0})],e.prototype,"indexes",void 0),g([S(QB)],e.prototype,"url",null),g([Ae("url")],e.prototype,"writeUrl",null),g([S({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),g([Se("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=g([J("esri.layers.mixins.FeatureLayerBase")],e),e};let Gp=class extends ti(ve){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};g([S({type:String,json:{write:!0}})],Gp.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],Gp.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],Gp.prototype,"returnType",void 0),Gp=g([J("esri.layers.support.ExpressionInfo")],Gp);const Z$=Gp;var q6;let fl=q6=class extends ve{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new q6({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ae(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};g([S({type:Boolean,json:{write:!0}})],fl.prototype,"isAutoGenerated",void 0),g([S({type:String,json:{write:!0}})],fl.prototype,"name",void 0),g([S({type:String,json:{write:!0}})],fl.prototype,"alias",void 0),g([S({type:String,json:{write:!0}})],fl.prototype,"onStatisticField",void 0),g([S({type:Z$,json:{write:!0}})],fl.prototype,"onStatisticExpression",void 0),g([S({type:String,json:{write:!0}})],fl.prototype,"statisticType",void 0),fl=q6=g([J("esri.layers.support.AggregateField")],fl);const kd=fl;let mh=class extends ve{constructor(){super(...arguments),this.type=null}};g([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],mh.prototype,"type",void 0),mh=g([J("esri.layers.support.FeatureReduction")],mh);const X$="__begin__",Q$="__end__",cbe=new RegExp(X$,"ig"),dbe=new RegExp(Q$,"ig"),Fk=new RegExp("^"+X$,"i"),Nk=new RegExp(Q$+"$","i"),b2='"',pbe=b2+" + ",fbe=" + "+b2;function ybe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function mbe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function eT(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=ybe(t.labelExpression),e.type="conventional"),e}function gbe(t){const e=eT(t);if(!e)return null;switch(e.type){case"conventional":return H6(e.expression);case"arcade":return e.expression}return null}function vbe(t){const e=eT(t);if(!e)return null;switch(e.type){case"conventional":return wbe(e.expression);case"arcade":return aG(e.expression)}return null}function H6(t){let e;return t?(e=Bn(t,i=>X$+'$feature["'+i+'"]'+Q$),e=Fk.test(e)?e.replace(Fk,""):b2+e,e=Nk.test(e)?e.replace(Nk,""):e+b2,e=e.replaceAll(cbe,pbe).replaceAll(dbe,fbe)):e='""',e}const bbe=/^\s*\{([^}]+)\}\s*$/i;function wbe(t){const e=t==null?void 0:t.match(bbe);return e&&e[1].trim()||null}const _be=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,xbe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Sbe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function aG(t){if(!t)return null;let e=_be.exec(t)||xbe.exec(t);return e?e[1]||e[3]:(e=Sbe.exec(t),e?e[2]:null)}var W6;let Ru=W6=class extends ve{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?H6(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=H6(this.value)),t!=null&&(e[i]=t)}clone(){return new W6({expression:this.expression,title:this.title,value:this.value})}};g([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ru.prototype,"expression",void 0),g([Se("expression",["expression","value"])],Ru.prototype,"readExpression",null),g([Ae("expression")],Ru.prototype,"writeExpression",null),g([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ru.prototype,"title",void 0),g([S({json:{read:!1,write:!1}})],Ru.prototype,"value",void 0),Ru=W6=g([J("esri.layers.support.LabelExpressionInfo")],Ru);const lG=Ru,uG=[252,146,31,255],hG={type:"esriSMS",style:"esriSMSCircle",size:6,color:uG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},cG={type:"esriSLS",style:"esriSLSSolid",width:.75,color:uG},dG={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Mbe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},$be={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Tbe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Ibe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},h7e=jh.fromJSON(hG),c7e=cn.fromJSON(cG),d7e=Rh.fromJSON(dG),Ebe=of.fromJSON(Mbe),p7e=jh.fromJSON($be),f7e=cn.fromJSON(Tbe),y7e=Rh.fromJSON(Ibe);var J6;const uv=new _t({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function hv(t,e,i){return{enabled:!CO(i==null?void 0:i.layer)}}function pG(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Abe(t){return(t==null?void 0:t.type)==="map-image"}function fG(t){var e,i;return!!Abe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function kbe(t){return pG(t)||fG(t==null?void 0:t.layer)}let Ri=J6=class extends ve{static evaluateWhere(t,e){const i=(r,n,l)=>{switch(n){case"=":return r==l;case"<>":return r!=l;case">":return r>l;case">=":return r>=l;case"<":return r<l;case"<=":return r<=l}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const n=i(e[r[0]],r[1],r[2]),l=r[3],d=i(e[r[4]],r[5],r[6]);switch(l){case"AND":return n&&d;case"OR":return n||d}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Ebe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=mbe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=aG(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&pG(r))t=new lG({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(r);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return eT(this)}getLabelExpressionArcade(){return gbe(this)}getLabelExpressionSingleField(){return vbe(this)}hash(){return JSON.stringify(this)}clone(){return new J6({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ae(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ae(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};g([S({type:String,json:{write:!0}})],Ri.prototype,"name",void 0),g([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:hv}}}}})],Ri.prototype,"allowOverrun",void 0),g([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:hv}}}}})],Ri.prototype,"deconflictionStrategy",void 0),g([S({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&fG(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ri.prototype,"labelExpression",void 0),g([Se("labelExpression")],Ri.prototype,"readLabelExpression",null),g([Ae("labelExpression")],Ri.prototype,"writeLabelExpression",null),g([S({type:lG,json:{write:{overridePolicy:(t,e,i)=>kbe(i)?{allowNull:!0}:{enabled:!1}}}})],Ri.prototype,"labelExpressionInfo",void 0),g([Ae("labelExpressionInfo")],Ri.prototype,"writeLabelExpressionInfo",null),g([S({type:uv.apiValues,json:{type:uv.jsonValues,read:uv.read,write:uv.write}})],Ri.prototype,"labelPlacement",void 0),g([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ri.prototype,"labelPosition",void 0),g([S({type:Number})],Ri.prototype,"maxScale",void 0),g([Ae("maxScale")],Ri.prototype,"writeMaxScale",null),g([S({type:Number})],Ri.prototype,"minScale",void 0),g([Ae("minScale")],Ri.prototype,"writeMinScale",null),g([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:hv}}}}})],Ri.prototype,"repeatLabel",void 0),g([S({type:Number,cast:kt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:hv}}}}})],Ri.prototype,"repeatLabelDistance",void 0),g([S({types:Ete,json:{origins:{"web-scene":{types:Ate,write:ok,default:null}},write:ok,default:null}})],Ri.prototype,"symbol",void 0),g([S({type:Boolean,json:{write:!0}})],Ri.prototype,"useCodedValues",void 0),g([S({type:String,json:{write:!0}})],Ri.prototype,"where",void 0),Ri=J6=g([J("esri.layers.support.LabelClass")],Ri);const Km=Ri;var Y6;const Pbe="esri.layers.support.FeatureReductionBinning";let ds=Y6=class extends mh{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());es(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?pm(r,e,i)??void 0:Y$(e,i)}clone(){return new Y6({fields:ae(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ae(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:ae(this.popupTemplate),renderer:ae(this.renderer)})}};g([Ue({binning:"binning"})],ds.prototype,"type",void 0),g([Ue({geohash:"geohash"})],ds.prototype,"binType",void 0),g([S({type:Number,range:{min:1,max:9},json:{write:!0}})],ds.prototype,"fixedBinLevel",void 0),g([S({type:[Km],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ds.prototype,"labelingInfo",void 0),g([S(W$)],ds.prototype,"labelsVisible",void 0),g([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ds.prototype,"maxScale",void 0),g([S(z_)],ds.prototype,"popupEnabled",void 0),g([S({type:rf,json:{name:"popupInfo",write:!0}})],ds.prototype,"popupTemplate",void 0),g([S({type:[kd],json:{write:!0}})],ds.prototype,"fields",void 0),g([Ae("fields")],ds.prototype,"writeFields",null),g([S({types:Jm,json:{write:{target:"drawingInfo.renderer"}}})],ds.prototype,"renderer",void 0),g([Se("renderer",["drawingInfo.renderer"])],ds.prototype,"readRenderer",null),ds=Y6=g([J(Pbe)],ds);const yG=ds;var K6;const Cbe="esri.layers.support.FeatureReductionCluster";function zk(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Qi=K6=class extends ve{constructor(t){super(t),this.type="cluster",this.clusterRadius=kt("80px"),this.clusterMinSize=kt("12px"),this.clusterMaxSize=kt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var n,l;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(l=r==null?void 0:r.authoringInfo)!=null&&l.isAutoGenerated?null:r?zk(r)?null:pm(r,e,i)??void 0:Y$(e,i)}readSymbol(t,e,i){var n,l;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((l=r==null?void 0:r.authoringInfo)!=null&&l.isAutoGenerated)return null;if(r&&zk(r)){const d=pm(r,e,i);return d==null?void 0:d.symbol}return null}writeSymbol(t,e,i,r){var l,d;const n=(d=(l=this.renderer)==null?void 0:l.authoringInfo)==null?void 0:d.isAutoGenerated;if(!this.renderer||n){const y=new F_({symbol:t});e.drawingInfo={renderer:y.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());es(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>kd.fromJSON(r))}clone(){return new K6({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ae(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ae(this.fields),maxScale:this.maxScale,renderer:ae(this.renderer),symbol:ae(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ae(this.popupTemplate)})}};g([S({type:["cluster"],readOnly:!0,json:{write:!0}})],Qi.prototype,"type",void 0),g([S({type:Number,cast:t=>t==="auto"?t:kt(t),json:{write:!0}})],Qi.prototype,"clusterRadius",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Qi.prototype,"clusterMinSize",void 0),g([S({type:Number,cast:kt,json:{write:!0}})],Qi.prototype,"clusterMaxSize",void 0),g([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Qi.prototype,"maxScale",void 0),g([S(z_)],Qi.prototype,"popupEnabled",void 0),g([S({type:rf,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Qi.prototype,"popupTemplate",void 0),g([S({types:Jm,json:{write:{target:"drawingInfo.renderer"}}})],Qi.prototype,"renderer",void 0),g([Se("renderer",["drawingInfo.renderer"])],Qi.prototype,"readRenderer",null),g([S({types:Tte})],Qi.prototype,"symbol",void 0),g([Se("symbol",["drawingInfo.renderer"])],Qi.prototype,"readSymbol",null),g([Ae("symbol")],Qi.prototype,"writeSymbol",null),g([S({type:[Km],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Qi.prototype,"labelingInfo",void 0),g([S(W$)],Qi.prototype,"labelsVisible",void 0),g([S({type:[kd],json:{write:!0}})],Qi.prototype,"fields",void 0),g([Ae("fields")],Qi.prototype,"writeFields",null),g([Se("fields")],Qi.prototype,"readFields",null),Qi=K6=g([J(Cbe)],Qi);const mG=Qi;var Z6;let Rb=Z6=class extends mh{constructor(t){super(t),this.type="selection"}clone(){return new Z6}};g([S({type:["selection"]})],Rb.prototype,"type",void 0),Rb=Z6=g([J("esri.layers.support.FeatureReductionSelection")],Rb);const Vk=Rb,Bk={key:"type",base:mh,typeMap:{cluster:mG,binning:yG}},Obe={types:{key:"type",base:mh,typeMap:{selection:Vk,cluster:mG,binning:yG}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Bk},"portal-item":{types:Bk},"web-scene":{types:{key:"type",base:mh,typeMap:{selection:Vk}}}}}},rp={Base64:0,Hex:1,String:2,Raw:3},S0=8,gG=(1<<S0)-1;function dh(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function Lbe(t){const e=[];for(let i=0,r=t.length*S0;i<r;i+=S0)e[i>>5]|=(t.charCodeAt(i/S0)&gG)<<i%32;return e}function Dbe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=S0)e.push(String.fromCharCode(t[i>>5]>>>i%32&gG));return e.join("")}function Rbe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function jbe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,l=4*t.length;n<l;n+=3){const d=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let y=0;y<4;y++)8*n+6*y>32*t.length?r.push(e):r.push(i.charAt(d>>6*(3-y)&63))}return r.join("")}function Fbe(t,e){return t<<e|t>>>32-e}function V_(t,e,i,r,n,l){return dh(Fbe(dh(dh(e,t),dh(r,l)),n),i)}function Vr(t,e,i,r,n,l,d){return V_(e&i|~e&r,t,e,n,l,d)}function Br(t,e,i,r,n,l,d){return V_(e&r|i&~r,t,e,n,l,d)}function Gr(t,e,i,r,n,l,d){return V_(e^i^r,t,e,n,l,d)}function Ur(t,e,i,r,n,l,d){return V_(i^(e|~r),t,e,n,l,d)}function Nbe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,l=271733878;for(let d=0;d<t.length;d+=16){const y=i,b=r,x=n,$=l;i=Vr(i,r,n,l,t[d],7,-680876936),l=Vr(l,i,r,n,t[d+1],12,-389564586),n=Vr(n,l,i,r,t[d+2],17,606105819),r=Vr(r,n,l,i,t[d+3],22,-1044525330),i=Vr(i,r,n,l,t[d+4],7,-176418897),l=Vr(l,i,r,n,t[d+5],12,1200080426),n=Vr(n,l,i,r,t[d+6],17,-1473231341),r=Vr(r,n,l,i,t[d+7],22,-45705983),i=Vr(i,r,n,l,t[d+8],7,1770035416),l=Vr(l,i,r,n,t[d+9],12,-1958414417),n=Vr(n,l,i,r,t[d+10],17,-42063),r=Vr(r,n,l,i,t[d+11],22,-1990404162),i=Vr(i,r,n,l,t[d+12],7,1804603682),l=Vr(l,i,r,n,t[d+13],12,-40341101),n=Vr(n,l,i,r,t[d+14],17,-1502002290),r=Vr(r,n,l,i,t[d+15],22,1236535329),i=Br(i,r,n,l,t[d+1],5,-165796510),l=Br(l,i,r,n,t[d+6],9,-1069501632),n=Br(n,l,i,r,t[d+11],14,643717713),r=Br(r,n,l,i,t[d],20,-373897302),i=Br(i,r,n,l,t[d+5],5,-701558691),l=Br(l,i,r,n,t[d+10],9,38016083),n=Br(n,l,i,r,t[d+15],14,-660478335),r=Br(r,n,l,i,t[d+4],20,-405537848),i=Br(i,r,n,l,t[d+9],5,568446438),l=Br(l,i,r,n,t[d+14],9,-1019803690),n=Br(n,l,i,r,t[d+3],14,-187363961),r=Br(r,n,l,i,t[d+8],20,1163531501),i=Br(i,r,n,l,t[d+13],5,-1444681467),l=Br(l,i,r,n,t[d+2],9,-51403784),n=Br(n,l,i,r,t[d+7],14,1735328473),r=Br(r,n,l,i,t[d+12],20,-1926607734),i=Gr(i,r,n,l,t[d+5],4,-378558),l=Gr(l,i,r,n,t[d+8],11,-2022574463),n=Gr(n,l,i,r,t[d+11],16,1839030562),r=Gr(r,n,l,i,t[d+14],23,-35309556),i=Gr(i,r,n,l,t[d+1],4,-1530992060),l=Gr(l,i,r,n,t[d+4],11,1272893353),n=Gr(n,l,i,r,t[d+7],16,-155497632),r=Gr(r,n,l,i,t[d+10],23,-1094730640),i=Gr(i,r,n,l,t[d+13],4,681279174),l=Gr(l,i,r,n,t[d],11,-358537222),n=Gr(n,l,i,r,t[d+3],16,-722521979),r=Gr(r,n,l,i,t[d+6],23,76029189),i=Gr(i,r,n,l,t[d+9],4,-640364487),l=Gr(l,i,r,n,t[d+12],11,-421815835),n=Gr(n,l,i,r,t[d+15],16,530742520),r=Gr(r,n,l,i,t[d+2],23,-995338651),i=Ur(i,r,n,l,t[d],6,-198630844),l=Ur(l,i,r,n,t[d+7],10,1126891415),n=Ur(n,l,i,r,t[d+14],15,-1416354905),r=Ur(r,n,l,i,t[d+5],21,-57434055),i=Ur(i,r,n,l,t[d+12],6,1700485571),l=Ur(l,i,r,n,t[d+3],10,-1894986606),n=Ur(n,l,i,r,t[d+10],15,-1051523),r=Ur(r,n,l,i,t[d+1],21,-2054922799),i=Ur(i,r,n,l,t[d+8],6,1873313359),l=Ur(l,i,r,n,t[d+15],10,-30611744),n=Ur(n,l,i,r,t[d+6],15,-1560198380),r=Ur(r,n,l,i,t[d+13],21,1309151649),i=Ur(i,r,n,l,t[d+4],6,-145523070),l=Ur(l,i,r,n,t[d+11],10,-1120210379),n=Ur(n,l,i,r,t[d+2],15,718787259),r=Ur(r,n,l,i,t[d+9],21,-343485551),i=dh(i,y),r=dh(r,b),n=dh(n,x),l=dh(l,$)}return[i,r,n,l]}function vG(t,e=rp.Hex){const i=e||rp.Base64,r=Nbe(Lbe(t),t.length*S0);switch(i){case rp.Raw:return r;case rp.Hex:return Rbe(r);case rp.String:return Dbe(r);case rp.Base64:return jbe(r)}}var X6;let W1=X6=class extends R_{writeLevels(t,e,i){for(const r in t){const n=this.levels[r];return void(e.stops=n)}}clone(){return new X6({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ch(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ch(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:ae(this.levels)})}};g([S()],W1.prototype,"levels",void 0),g([Ae("levels")],W1.prototype,"writeLevels",null),W1=X6=g([J("esri.views.2d.engine.LevelDependentSizeVariable")],W1);const zbe=ge.getLogger("esri.views.2d.layers.support.clusterUtils");ce.add("esri-cluster-arcade-enabled",!0);const Vbe=ce("esri-cluster-arcade-enabled"),Bbe=(t,e,i,r,n)=>{const l=e.clone();if(!Ube(l))return l;if(l.authoringInfo||(l.authoringInfo=new j$),l.authoringInfo.isAutoGenerated=!0,"visualVariables"in l){const d=(l.visualVariables||[]).filter(b=>b.valueExpression!=="$view.scale"),y=bG(d);d.forEach(b=>{b.type==="rotation"?b.field?b.field=Zh(t,b.field,"avg_angle","number"):b.valueExpression&&(b.field=Uf(t,b.valueExpression,"avg_angle","number"),b.valueExpression=null):b.normalizationField?(b.field=Zh(t,b.field,"avg_norm","number",b.normalizationField),b.normalizationField=null):b.field?b.field=Zh(t,b.field,"avg","number"):b.valueExpression&&(b.field=Uf(t,b.valueExpression,"avg","number"),b.valueExpression=null)}),y==null&&!Gbe(d)&&n&&(d.push(wG(i,r)),l.dynamicClusterSize=!0),l.visualVariables=d}switch(l.type){case"simple":break;case"pie-chart":for(const d of l.attributes)d.field?d.field=Zh(t,d.field,"sum","number"):d.valueExpression&&(d.field=Uf(t,d.valueExpression,"sum","number"),d.valueExpression=null);break;case"unique-value":l.field?l.field=Zh(t,l.field,"mode","string"):l.valueExpression&&(l.field=Uf(t,l.valueExpression,"mode","string"),l.valueExpression=null);break;case"class-breaks":l.normalizationField?(l.field=Zh(t,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=Zh(t,l.field,"avg","number"):l.valueExpression&&(l.field=Uf(t,l.valueExpression,"avg","number"),l.valueExpression=null)}return l},bG=t=>{for(const e of t)if(e.type==="size")return e;return null};function m7e(t,e,i){const r=t.clone();let n=!1;if("visualVariables"in r){const l=(r.visualVariables||[]).filter(d=>d.valueExpression!=="$view.scale");bG(l)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(wG(e,i)),r.dynamicClusterSize=!0,n=!0)}return{renderer:r,didInject:n}}const Gbe=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},wG=(t,e)=>{const i=[new Dp({value:0,size:0}),new Dp({value:1})];if(e==null)return new R_({field:"cluster_count",stops:[...i,new Dp({value:2,size:0})]});const r=Object.keys(e).reduce((n,l)=>({...n,[l]:[...i,new Dp({value:Math.max(2,e[l].minValue),size:t.clusterMinSize}),new Dp({value:Math.max(3,e[l].maxValue),size:t.clusterMaxSize})]}),{});return new W1({field:"cluster_count",levels:r})},Ube=t=>{const e=i=>zbe.error(new se("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Vbe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function qbe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",l=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+vG(l)}}}function Uf(t,e,i,r){const n=vG(e),l=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(d=>d.name===l)||t.push(new kd({name:l,isAutoGenerated:!0,onStatisticExpression:new Z$({expression:e,returnType:r}),statisticType:i})),l}function Zh(t,e,i,r,n){if(e==="cluster_count"||t.some(d=>d.name===e))return e;const l=qbe(i,e,n);return t.some(d=>d.name===l)||(i==="avg_norm"?t.push(new kd({name:l,isAutoGenerated:!0,onStatisticExpression:new Z$({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new kd({name:l,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),l}const Hbe=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var y;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new kd({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],l=(r.fields??[]).filter(b=>!b.isAutoGenerated);if(i.renderer&&!((y=i.renderer.authoringInfo)!=null&&y.isAutoGenerated))return r.fields=[...n,...l],r;if(i.symbol)return r.fields=[...n,...l],r.renderer=null,r;if(!this.renderer)return i;const d=Bbe(n,this.renderer,i,null,!1);return r.fields=[...n,...l],r.renderer=d,r}};return g([S(Obe)],e.prototype,"featureReduction",null),e=g([J("esri.layers.mixins.FeatureReductionLayer")],e),e},Gk={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Uk={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},qk={ArcGISFeatureLayer:!0},Wbe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":Gk,"web-map/basemap":Uk,"web-map/tables":qk,"link-chart/operational-layers":{...Gk,LinkChartLayer:!0},"link-chart/basemap":Uk,"link-chart/tables":qk,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},_G=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,l){(l&&l.layerContainerType==="ground"||i&&AH(this,n,{},l))&&(r[n]=i)}writeOperationalLayerType(i,r,n,l){!i||l&&l.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),TH(this,i,n=>super.read(i,n),r)}write(i,r){var d,y;if(r!=null&&r.origin){const b=`${r.origin}/${r.layerContainerType||"operational-layers"}`,x=Wbe[b];let $=!!(x!=null&&x[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&b==="web-scene/operational-layers"&&($=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&b==="web-map/operational-layers"&&($=!1),!$)return(d=r.messages)==null||d.push(new se("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${b}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),l=!!r&&!!r.messages&&!!r.messages.filter(b=>b instanceof se&&b.name==="web-document-write:property-required").length;return z2(n==null?void 0:n.url)?((y=r==null?void 0:r.messages)==null||y.push(new se("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:n}beforeSave(){}};return g([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),g([S(iG)],e.prototype,"listMode",void 0),g([Ae("listMode")],e.prototype,"writeListMode",null),g([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),g([Ae("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),g([S(B6)],e.prototype,"opacity",void 0),g([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),g([Ae("title"),Ae(["web-scene"],"title")],e.prototype,"writeTitle",null),g([S({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=g([J("esri.layers.mixins.OperationalLayer")],e),e};var Q6;const K5=new _t({asc:"ascending",desc:"descending"});let Up=Q6=class extends ve{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Q6({field:this.field,valueExpression:this.valueExpression,order:this.order})}};g([S({type:String,json:{write:!0}})],Up.prototype,"field",void 0),g([S({type:String,json:{write:!0}})],Up.prototype,"valueExpression",void 0),g([S({type:K5.apiValues,json:{read:K5.read,write:K5.write}})],Up.prototype,"order",void 0),Up=Q6=g([J("esri.layers.support.OrderByInfo")],Up);const xG=Up;function Jbe(t,e,i){if(!t)return null;const r=t.find(l=>!!l.field);if(!r)return null;const n=new xG;return n.read(r,i),[n]}function Ybe(t,e,i,r){const n=t.find(l=>!!l.field);n&&es(i,[n.toJSON()],e)}const Kbe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return g([S({type:[xG],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Jbe},write:{target:"layerDefinition.orderBy",writer:Ybe}}})],e.prototype,"orderBy",void 0),e=g([J("esri.layers.mixins.OrderedLayer")],e),e};async function Zbe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Wp(t);const i=dt.WGS84;return await XR(e,i),Nh(t,i)}function g7e(t,e){if(!SG(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function SG(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function Hk(t){return SG(t,Xbe.HOSTED_SERVICE)}function v7e(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}async function b7e(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return Zbe(i)}const Xbe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function Wk(t){var b;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(b=e.user)==null?void 0:b.privileges;let l=!n||n.includes("features:user:edit"),d=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const y=r==="update"||r==="admin";return y?d=l=!0:d&&(l=!0),{features:{edit:l,fullEdit:d},content:{updateItem:y}}}const MG=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ei(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new oy({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const{load:n}=await le(()=>import("./layersLoader-2039c3aa.js"),["assets/layersLoader-2039c3aa.js","assets/fetchService-509c5174.js","assets/jsonContext-e51bc28f.js"]);return ai(r),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(n){throw is(n)||ge.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(On(r),!0)))}async _setUserPrivileges(i,r){if(!Ft.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:l},content:{updateItem:d}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",l),this._set("userHasUpdateItemPrivileges",d)}catch(n){On(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const l=i===n.id;if(l&&n.portal.user)return Wk(n);let d,y;if(l)d=n.portal.url;else try{d=await OO(this.url,r)}catch(E){On(E)}if(!d||!rW(d,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const E=r!=null?r.signal:null;y=await(wt==null?void 0:wt.getCredential(`${d}/sharing`,{prompt:!1,signal:E}))}catch(E){On(E)}const b=!0,x=!1,$=!1;if(!y)return{features:{edit:b,fullEdit:x},content:{updateItem:$}};try{if(l?await n.reload():(n=new oy({id:i,portal:{url:d}}),await n.load(r)),n.portal.user)return Wk(n)}catch(E){On(E)}return{features:{edit:b,fullEdit:x},content:{updateItem:$}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){On(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?wt==null?void 0:wt.findCredential(this.url):null;if(!r)return!0;const n=cv.credential===r?cv.user:await this._fetchEditingUser(i);return cv.credential=r,cv.user=n,n==null||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var $,E;const r=(E=($=this.portalItem)==null?void 0:$.portal)==null?void 0:E.user;if(r)return r;const n=wt.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const l=`${n.owningSystemUrl}/sharing/rest`,d=ts.getDefault();if(d&&d.loaded&&Ro(d.restUrl)===Ro(l))return d.user;const y=`${l}/community/self`,b=i!=null?i.signal:null,x=await F2(Wt(y,{authMode:"no-prompt",query:{f:"json"},signal:b}));return x.ok?FM.fromJSON(x.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,l=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ts.getDefault());return n&&l&&!QC(l.restUrl,n.restUrl)?(r.messages&&r.messages.push(new se("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return g([S({type:oy})],e.prototype,"portalItem",null),g([Se("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),g([Ae("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),g([S({clonable:!1})],e.prototype,"resourceReferences",void 0),g([S({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),g([S({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),g([S({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=g([J("esri.layers.mixins.PortalLayer")],e),e},cv={credential:null,user:null};let J1=class extends Be{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};g([S()],J1.prototype,"updating",void 0),g([S()],J1.prototype,"status",void 0),J1=g([J("esri.layers.support.PublishingInfo")],J1);const Qbe=J1,$G="esri.layers.mixins.PublishableLayer",ewe=Symbol($G),twe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new Qbe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let d=0;const y=async x=>{let $;r.updating=!0;try{$=await this.fetchPublishingStatus()}catch{$="unavailable"}$!=="published"&&$!=="unavailable"||(r.status==="publishing"&&this.refresh(),b.remove()),r.status=$,r.updating=!1,b.removed||(d=setTimeout(y,x,x+125))},b={removed:!1,remove(){this.removed=!0,clearTimeout(d)}};this.when().catch(()=>b.remove()),y(250),this.own(b)}};return e=ewe,g([S({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=g([J($G)],i),i},fm=new ze,Ry=new WeakMap;function iwe(t){TG(t)&&fm.push(t)}function rwe(t){TG(t)&&fm.includes(t)&&fm.remove(t)}function TG(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function IG(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:IG(e,t%e):0}let Z5=0,dv=0;function swe(){const t=Date.now();for(const e of fm)e.refreshInterval&&t-(Ry.get(e)??0)+5>=6e4*e.refreshInterval&&(Ry.set(e,t),e.refresh(t))}wC(()=>{const t=Date.now();let e=0;for(const i of fm)e=IG(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?Ry.get(i)||Ry.set(i,t):Ry.delete(i);if(e!==dv){if(dv=e,clearInterval(Z5),dv===0)return void(Z5=0);Z5=setInterval(swe,dv)}});const EG=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=nd(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||iwe(this)},()=>{})}destroy(){rwe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){n0(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{ge.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return g([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),g([S({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),g([S()],e.prototype,"refreshParameters",null),e=g([J("esri.layers.mixins.RefreshableLayer")],e),e},AG=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&nwe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return g([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),g([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),g([S({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=g([J("esri.layers.mixins.ScaleRangeLayer")],e),e};function nwe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const kG=rs()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Y1=class extends ti(ve){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return gne(this.value,this.unit,"milliseconds")}};g([Ue(kG,{nonNullable:!0})],Y1.prototype,"unit",void 0),g([S({type:Number,json:{write:!0},nonNullable:!0})],Y1.prototype,"value",void 0),Y1=g([J("esri.TimeInterval")],Y1);const w2=Y1;function Jk(t,e){return w2.fromJSON({value:t,unit:e})}let Kr=class extends ti(ve){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),n=new Date(i.timeExtent[1]);return new Zo({start:r,end:n})}writeFullTimeExtent(e,i){e&&e.start!=null&&e.end!=null?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?Jk(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?Jk(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};g([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Kr.prototype,"cumulative",void 0),g([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Kr.prototype,"endField",void 0),g([S({type:Zo,json:{write:{enabled:!0,allowNull:!0}}})],Kr.prototype,"fullTimeExtent",void 0),g([Se("fullTimeExtent",["timeExtent"])],Kr.prototype,"readFullTimeExtent",null),g([Ae("fullTimeExtent")],Kr.prototype,"writeFullTimeExtent",null),g([S({type:Boolean,json:{write:!0}})],Kr.prototype,"hasLiveData",void 0),g([S({type:w2,json:{write:{enabled:!0,allowNull:!0}}})],Kr.prototype,"interval",void 0),g([Se("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Kr.prototype,"readInterval",null),g([Ae("interval")],Kr.prototype,"writeInterval",null),g([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Kr.prototype,"startField",void 0),g([S({type:Ih,json:{write:{enabled:!0,allowNull:!0}}})],Kr.prototype,"timeReference",void 0),g([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Kr.prototype,"trackIdField",void 0),g([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Kr.prototype,"useTime",void 0),Kr=g([J("esri.layers.support.TimeInfo")],Kr);const PG=Kr,CG=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const l=n.timeOffset,d=kG.fromJSON(n.timeOffsetUnits);return l&&d?new w2({value:l,unit:d}):null}set timeInfo(i){CL(i,this.fieldsIndex),this._set("timeInfo",i)}};return g([S({type:Zo,json:{write:!1}})],e.prototype,"timeExtent",void 0),g([S({type:w2})],e.prototype,"timeOffset",void 0),g([Se("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),g([S({value:null,type:PG,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),g([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=g([J("esri.layers.mixins.TemporalLayer")],e),e},Yk=new _t({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let ju=class extends ti(ve){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};g([S({json:{write:!0}})],ju.prototype,"name",void 0),g([S({json:{write:!0}})],ju.prototype,"description",void 0),g([S({json:{read:Yk.read,write:Yk.write}})],ju.prototype,"drawingTool",void 0),g([S({json:{write:!0}})],ju.prototype,"prototype",void 0),g([S({json:{write:!0}})],ju.prototype,"thumbnail",void 0),ju=g([J("esri.layers.support.FeatureTemplate")],ju);const tT=ju;let yl=class extends ti(ve){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=M$(e[r]);return i}writeDomains(e,i){var n;const r={};for(const l of Object.keys(e))e[l]&&(r[l]=(n=e[l])==null?void 0:n.toJSON());i.domains=r}};g([S({json:{write:!0}})],yl.prototype,"id",void 0),g([S({json:{write:!0}})],yl.prototype,"name",void 0),g([S({json:{write:!0}})],yl.prototype,"domains",void 0),g([Se("domains")],yl.prototype,"readDomains",null),g([Ae("domains")],yl.prototype,"writeDomains",null),g([S({type:[tT],json:{write:!0}})],yl.prototype,"templates",void 0),yl=g([J("esri.layers.support.FeatureType")],yl);const iT=yl;function owe(){return{fields:{type:[E_],value:null},fieldsIndex:{readOnly:!0,get(){return new z$(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||ge.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return t7(this.fieldsIndex,t)}}}}const X5=ge.getLogger("esri.layers.support.labelingInfo"),awe=/\[([^\[\]]+)\]/gi;function Kk(t,e,i){return t?t.map(r=>{const n=new Km;if(n.read(r,i),n.labelExpression){const l=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(awe,(d,y)=>`[${lwe(y,l)}]`)}return n}):null}function lwe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const uwe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function hwe(t,e){const i=ae(t);return i.some(r=>cwe(r,e))?[]:i}function cwe(t,e){const i=t.labelPlacement,r=uwe[e];if(!t.symbol)return X5.warn("No ILabelClass symbol specified."),!0;if(!r)return X5.error(new se("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const n=r[0];i&&X5.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${n}`),t.labelPlacement=n}return!1}const $o=[];function OG(t,e){if(iF(t.url??""))return!0;const{wkid:i}=e;for(const r of $o){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}$o.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),$o.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),$o.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),$o.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),$o.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),$o.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),$o.push([10.61,()=>new Set([102497])]),$o.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),$o.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),$o.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);async function dwe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await F2(r.populateFromStyle());if(ai(i),n.ok===!1){const l=n.error;e&&e.messages&&e.messages.push(new Un("renderer:style-reference",`Failed to create unique value renderer from style reference: ${l.message}`,{error:l,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function LG({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},l){if(!i)return null;const d=mwe({editFieldsInfo:e,fields:i,objectIdField:r},l);if(!d.length)return null;const y=bwe({titleBase:n,fields:i,displayField:t}),b=vwe();return new rf({title:y,content:b,fieldInfos:d})}const pwe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):KZ(t,e);function fwe(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(ywe),t}function ywe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Zk(t)?-1:Zk(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function mwe(t,e){const i=e==null?void 0:e.visibleFieldNames;return fwe(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||wwe).map(r=>new Tm({fieldName:r.name,isEditable:YZ(r,t),label:r.alias,format:gwe(r),visible:pwe(r,{...t,visibleFieldNames:i})}))}function gwe(t){switch(t.type){case"small-integer":case"integer":case"single":return new Yp({digitSeparator:!0,places:0});case"double":return new Yp({digitSeparator:!0,places:2});case"date":return new Yp({dateFormat:"long-month-day-year"});default:return t.type==="string"&&Xx(t.name)?new Yp({digitSeparator:!0,places:0}):null}}function vwe(){return[new D0,new Ky]}function bwe(t){const e=NZ(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function Zk(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const wwe=["geometry","blob","raster","guid","xml"],ns="FeatureLayer",DG="esri.layers.FeatureLayer",_we=ge.getLogger(DG);function pv(t,e){return new se("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Xk(t){return t&&t instanceof ze}const Q5=owe();function ex(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ve=class extends hbe(Hbe(vve(twe(yve(JB(Kbe(CG(AG(EG(WB(_G(MG(N_(YB(HB(ti(Jy))))))))))))))))){constructor(...t){super(...t),this._handles=new Fs,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=dt.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var t;(t=this.source)==null||t.destroy(),this._handles=ei(this._handles)}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){var r;const e=t!=null?t.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},t).catch(On).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstLayerId(e);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new se("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>this._setUserPrivileges(this.serviceItemId,t)).then(()=>Jve(this,t));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(t,e){return e=e.layerDefinition||e,K$(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,r){this._writeEditingEnabled(t,e,!0,r)}get effectiveEditingEnabled(){return Kve(this)}readIsTable(t,e){return(e=(e==null?void 0:e.layerDefinition)??e).type==="Table"||!e.geometryType}writeIsTable(t,e,i,r){r!=null&&r.writeLayerSchema&&es(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return rG(e.layerDefinition||e)}readObjectIdField(t,e){return sG(e.layerDefinition||e)}get parsedUrl(){const t=Ui(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=Ll(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=Ll(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){fI(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){var n;e=e.layerDefinition||e;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if(r){const l=pm(r,e,i)??void 0;return l||_we.error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),l}return Y$(e,i)}set source(t){const e=this._get("source");e!==t&&(Xk(e)&&this._resetMemorySource(e),Xk(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof ze?new ml({layer:this,items:t}):t:null}readSource(t,e){const i=qm.fromJSON(e.featureSet);return new ml({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(t,e){const i=e.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return t=t&&t.map(l=>tT.fromJSON(l)),this._fixTemplates(t,r),this._fixTemplates(t,n),t}readTitle(t,e){var n;const i=((n=e.layerDefinition)==null?void 0:n.name)??e.name,r=e.title||e.layerDefinition&&e.layerDefinition.title;if(i){const l=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Hne(this.url,i):i;let d=i;if(!d&&this.url){const y=Nd(this.url);y!=null&&(d=y.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==d&&(d=l+" - "+d),G7(d)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(t,e){return e.title||e.layerDefinition&&e.layerDefinition.name}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return t&&t.map(l=>(l=iT.fromJSON(l),this._fixTemplates(l.templates,r),this._fixTemplates(l.templates,n),l))}readVisible(t,e){return e.layerDefinition&&e.layerDefinition.defaultVisibility!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){return Cve(this,t,e,ns)}async updateAttachment(t,e,i){return Ove(this,t,e,i,ns)}async applyEdits(t,e){return Lve(this,t,e)}async uploadAssets(t,e){return Dve(this,t,e)}on(t,e){return super.on(t,e)}createPopupTemplate(t){return LG(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await _a(le(()=>import("./FeatureLayerSource-7c46549a.js"),["assets/FeatureLayerSource-7c46549a.js","assets/mat4f64-1413b4a7.js","assets/MeshGeoreferencedRelativeVertexSpace-627d89e1.js","assets/vec32-c6c88e0a.js","assets/External-9e088e05.js","assets/editingSupport-b8002a58.js"]),t);return new e({layer:this}).load({signal:t})}createQuery(){const t=qve(this);t.dynamicDataSource=this.dynamicDataSource;const e=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=q$(this.definitionExpression,e);return t.where=i||"1=1",t}async deleteAttachments(t,e){return Rve(this,t,e,ns)}async fetchRecomputedExtents(t){return jve(this,t,ns)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let n=null;return i==null||i.some(l=>{const{id:d}=l;return d!=null&&(d.toString()===r.toString()&&(n=l),!!n)}),n}getFieldDomain(t,e){const i=e==null?void 0:e.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[t];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,e){return Fve(this,t,e,ns)}async queryFeatures(t,e){const i=await this.load(),r=await i.source.queryFeatures(Bi.from(t)??i.createQuery(),e);if(r!=null&&r.features)for(const n of r.features)n.layer=n.sourceLayer=i;return r}async queryObjectIds(t,e){return Nve(this,t,e,ns)}async queryFeatureCount(t,e){return zve(this,t,e,ns)}async queryExtent(t,e){return Vve(this,t,e,ns)}async queryRelatedFeatures(t,e){return Bve(this,t,e,ns)}async queryRelatedFeaturesCount(t,e){return Gve(this,t,e,ns)}async queryTopFeatures(t,e){var l;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((l=r==null?void 0:r.query)!=null&&l.supportsTopFeaturesQuery))throw new se(ns,"Layer source does not support queryTopFeatures capability");const n=await i.queryTopFeatures(Yg.from(t),e);if(n!=null&&n.features)for(const d of n.features)d.layer=d.sourceLayer=this;return n}async queryTopObjectIds(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new se(ns,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(Yg.from(t),e)}async queryTopFeaturesExtent(t,e){var n;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((n=r==null?void 0:r.query)!=null&&n.supportsTopFeaturesQuery))throw new se(ns,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(Yg.from(t),e)}async queryTopFeatureCount(t,e){var n;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((n=r==null?void 0:r.query)!=null&&n.supportsTopFeaturesQuery))throw new se(ns,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(Yg.from(t),e)}read(t,e){const i=t.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],e),i.showLegend!=null&&super.read({showLegend:i.showLegend},e))}super.read(t,e),e&&e.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:(e==null?void 0:e.origin)??void 0,writeLayerSchema:(e==null?void 0:e.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=e;if(this.dynamicDataSource)return n==null||n.push(pv(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return n==null||n.push(pv(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n==null||n.push(pv(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return n==null||n.push(pv(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new se(ns,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var e;return!!this.loaded&&(((e=this.source)==null?void 0:e.type)==="memory"||OG(this,t))}async save(t){const{save:e}=await le(()=>import("./featureLayerUtils-5b3c55d2.js"),["assets/featureLayerUtils-5b3c55d2.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-509c5174.js","assets/jsonContext-e51bc28f.js"]);return e(this,t)}async saveAs(t,e){const{saveAs:i}=await le(()=>import("./featureLayerUtils-5b3c55d2.js"),["assets/featureLayerUtils-5b3c55d2.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-509c5174.js","assets/jsonContext-e51bc28f.js"]);return i(this,t,e)}_readEditingEnabled(t,e,i){var n;let r=(n=t.layerDefinition)==null?void 0:n.capabilities;return r?this._hasEditingCapability(r):(r=t.capabilities,e&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,r){var n,l;if(!t){const d=(l=(n=this.capabilities)==null?void 0:n.operations)!=null&&l.supportsSync?"Query,Sync":"Query";es("layerDefinition.capabilities",d,e),i&&!(r!=null&&r.writeLayerSchema)&&(e.capabilities=d)}}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}_fetchFirstLayerId(t){return Wt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(t){var e;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(e=this.portalItem)==null?void 0:e.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),fI(this.renderer,this.fieldsIndex),CL(this.timeInfo,this.fieldsIndex),dwe(this,{origin:"service"})}async hasDataChanged(){return Uve(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var e,i;const t=((e=this.parsedUrl)==null?void 0:e.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&e&&delete r[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new se("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new se("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this._handles.add([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};g([Se("service","capabilities")],Ve.prototype,"readCapabilities",null),g([S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ve.prototype,"charts",void 0),g([S({readOnly:!0})],Ve.prototype,"createQueryVersion",null),g([S({json:{read:{source:"layerDefinition.copyrightText"}}})],Ve.prototype,"copyright",void 0),g([S({json:{read:{source:"layerDefinition.displayField"}}})],Ve.prototype,"displayField",void 0),g([S({types:hd,readOnly:!0})],Ve.prototype,"defaultSymbol",void 0),g([S({type:ys})],Ve.prototype,"dynamicDataSource",void 0),g([S({type:Boolean})],Ve.prototype,"editingEnabled",null),g([Se(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ve.prototype,"readEditingEnabled",null),g([Se("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ve.prototype,"readEditingEnabledFromWebMap",null),g([Ae(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ve.prototype,"writeEditingEnabled",null),g([Ae("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ve.prototype,"writeEditingEnabledToWebMap",null),g([S({readOnly:!0})],Ve.prototype,"effectiveEditingEnabled",null),g([S({...Q5.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:ex}}}}})],Ve.prototype,"fields",void 0),g([S(Q5.fieldsIndex)],Ve.prototype,"fieldsIndex",void 0),g([S({type:hve,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ve.prototype,"formTemplate",void 0),g([S({json:{read:{source:"layerDefinition.extent"}}})],Ve.prototype,"fullExtent",void 0),g([S({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:ex,writer(t,e,i){const r=t?G6.toJSON(t):null;r&&es(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:G6.read}}})],Ve.prototype,"geometryType",void 0),g([S({json:{read:{source:"layerDefinition.hasM"}}})],Ve.prototype,"hasM",void 0),g([S({json:{read:{source:"layerDefinition.hasZ"}}})],Ve.prototype,"hasZ",void 0),g([S(tG)],Ve.prototype,"id",void 0),g([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ve.prototype,"infoFor3D",void 0),g([S({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ve.prototype,"isTable",void 0),g([Se("service","isTable",["type","geometryType"]),Se("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ve.prototype,"readIsTable",null),g([Ae("web-map","isTable")],Ve.prototype,"writeIsTable",null),g([S(W$)],Ve.prototype,"labelsVisible",void 0),g([S({type:[Km],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Kk},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Kk},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ve.prototype,"labelingInfo",void 0),g([S((()=>{const t=ae(Ive);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){es(r,H2(e),i)}}},t})())],Ve.prototype,"opacity",void 0),g([S($ve)],Ve.prototype,"legendEnabled",void 0),g([S({type:["show","hide"],json:(()=>{const t=ae(iG.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Ve.prototype,"listMode",void 0),g([Se("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ve.prototype,"readGlobalIdField",null),g([S({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:ex}}}}})],Ve.prototype,"objectIdField",void 0),g([Se("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ve.prototype,"readObjectIdField",null),g([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ve.prototype,"operationalLayerType",void 0),g([S(Q5.outFields)],Ve.prototype,"outFields",void 0),g([S({readOnly:!0})],Ve.prototype,"parsedUrl",null),g([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ve.prototype,"path",void 0),g([S(z_)],Ve.prototype,"popupEnabled",void 0),g([S({type:rf,json:{name:"popupInfo",write:!0}})],Ve.prototype,"popupTemplate",void 0),g([S({readOnly:!0})],Ve.prototype,"defaultPopupTemplate",null),g([S({types:Jm,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:jB,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ve.prototype,"renderer",null),g([Se("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Se("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ve.prototype,"readRenderer",null),g([S((()=>{const t=ae(Mve);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Ve.prototype,"screenSizePerspectiveEnabled",void 0),g([S({clonable:!1})],Ve.prototype,"source",null),g([xt("source")],Ve.prototype,"castSource",null),g([Se("portal-item","source",["featureSet"]),Se("web-map","source",["featureSet"])],Ve.prototype,"readSource",null),g([S({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ve.prototype,"spatialReference",void 0),g([S({type:Number})],Ve.prototype,"subtypeCode",void 0),g([S({type:[tT]})],Ve.prototype,"templates",void 0),g([Se("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ve.prototype,"readTemplates",null),g([S({type:PG})],Ve.prototype,"timeInfo",void 0),g([S()],Ve.prototype,"title",void 0),g([Se("service","title",["name"]),Se("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ve.prototype,"readTitle",null),g([Se("web-map","title",["layerDefinition.name","title"])],Ve.prototype,"readTitleFromWebMap",null),g([S({type:String})],Ve.prototype,"sublayerTitleMode",void 0),g([S({json:{read:!1}})],Ve.prototype,"type",void 0),g([S({type:String})],Ve.prototype,"typeIdField",void 0),g([Se("service","typeIdField"),Se("typeIdField",["layerDefinition.typeIdField"])],Ve.prototype,"readTypeIdField",null),g([S({type:[iT]})],Ve.prototype,"types",void 0),g([Se("service","types",["types"]),Se("types",["layerDefinition.types"])],Ve.prototype,"readTypes",null),g([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ve.prototype,"visible",void 0),g([Se("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ve.prototype,"readVisible",null),Ve=g([J(DG)],Ve);const B_=Ve,xwe=Object.freeze(Object.defineProperty({__proto__:null,default:B_},Symbol.toStringTag,{value:"Module"})),Swe=["$datastore","$map","$layer","$aggregatedfeatures"],Mwe="esri.widgets.Feature.support.arcadeFeatureUtils",$we=ge.getLogger(Mwe);function Twe(t){return typeof t=="string"?Bm(p$(t)):Array.isArray(t)?Iwe(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?Ewe(t):t}function Iwe(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?Bm(p$(e)):e}</li>`).join("")}</ul>`}function Ewe(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const i=t.field(e);return`<tr><th>${e}</th><td>${typeof i=="string"?Bm(p$(i)):i}</td></tr>`}).join("")}</table>`}function Awe({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:i,context:r,viewInfo:n,map:l,graphic:d,interceptor:y}){i.forEach(b=>{const x=b.toLowerCase(),$=n.sr,E={map:l,spatialReference:$,interceptor:y};if(x==="$map"&&(r.vars[x]=e.convertMapToFeatureSetCollection(E)),x==="$layer"&&(r.vars[x]=e.convertFeatureLayerToFeatureSet({layer:d.sourceLayer,spatialReference:$,interceptor:y})),x==="$datastore"&&(r.vars[x]=e.convertServiceUrlToWorkspace({url:d.sourceLayer.url,spatialReference:$,interceptor:y})),x==="$aggregatedfeatures"){const k=d.layer,{fields:P,objectIdField:D,geometryType:L,spatialReference:N,displayField:B}=k,W=new B_({fields:P,objectIdField:D,geometryType:L,spatialReference:N,displayField:B,...k.type==="feature"?{templates:k.templates,typeIdField:k.typeIdField,types:k.types}:null,source:t});r.vars[x]=e.convertFeatureLayerToFeatureSet({layer:W,spatialReference:N,interceptor:y})}})}function RG(){return le(()=>import("./arcadeUtils-52d9c897.js").then(t=>t.az),["assets/arcadeUtils-52d9c897.js","assets/arcadeTimeUtils-0c8493bd.js","assets/executionError-c92d3b85.js","assets/number-be8268ad.js"])}function kwe(t){return"createQuery"in t&&"queryFeatures"in t}async function Pwe({graphic:t,view:e}){const{isAggregate:i,layer:r}=t;if(!i||!r||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(r);if(!kwe(n))return[];const l=n.createQuery(),d=t.getObjectId();l.aggregateIds=d!=null?[d]:[];const{features:y}=await n.queryFeatures(l);return y}async function jG({expressionInfo:t,arcadeUtils:e,interceptor:i,spatialReference:r,map:n,graphic:l,view:d}){if(!t||!t.expression)return null;const y=e.createSyntaxTree(t.expression),b=Swe.filter(P=>e.hasVariable(y,P)),[x]=await Promise.all([Pwe({graphic:l,view:d}),e.loadScriptDependencies(y,!0,b)]),$=e.getViewInfo({spatialReference:r}),E=e.createExecContext(l,$);E.interceptor=i,E.useAsync=!0,Awe({aggregatedFeatures:x,arcadeUtils:e,featureSetVars:b,context:E,viewInfo:$,map:n,graphic:l,interceptor:i});const k=e.createFunction(y,E);return e.executeAsyncFunction(k,E).catch(P=>$we.error("arcade-execution-error",{error:P,graphic:l,expressionInfo:t}))}async function Cwe({expressionInfos:t,spatialReference:e,graphic:i,interceptor:r,map:n,view:l}){if(!t||!t.length)return{};const d=await RG(),y={};for(const $ of t)y[`expression/${$.name}`]=jG({expressionInfo:$,arcadeUtils:d,interceptor:r,spatialReference:e,map:n,graphic:i,view:l});const b=await ws(y),x={};for(const $ in b)x[$]=Twe(b[$].value);return x}const Owe=1;let Js=class extends Xo(Be){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var n,l;const i=(n=this.contentElement)==null?void 0:n.type;(l=this.contentElementViewModel)==null||l.destroy();const r=i==="fields"?new M_:i==="media"?new id:i==="text"?new h2:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=h$(this._compile,Owe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:n,spatialReference:l,map:d,view:y,_abortController:b}=this;if(!(i&&r&&l&&d))return void this._set("contentElement",null);const x=await RG();if(b!==this._abortController)return;const $=await jG({arcadeUtils:x,expressionInfo:i,graphic:r,interceptor:n,map:d,spatialReference:l,view:y});if(!$||$.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const E=await $.castAsJsonAsync(b==null?void 0:b.signal),k=E==null?void 0:E.type,P=k==="media"?Zy.fromJSON(E):k==="text"?R0.fromJSON(E):k==="fields"?D0.fromJSON(E):null;this._set("contentElement",P)},this.handles.add([me(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),st),me(()=>[this.contentElement],()=>this._createVM(),st)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:r}=this;return e?"loading":i||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};g([S()],Js.prototype,"_abortController",void 0),g([S({type:zL})],Js.prototype,"expressionInfo",void 0),g([S({type:xs})],Js.prototype,"graphic",void 0),g([S({readOnly:!0})],Js.prototype,"contentElement",void 0),g([S({readOnly:!0})],Js.prototype,"contentElementViewModel",void 0),g([S()],Js.prototype,"interceptor",void 0),g([S()],Js.prototype,"spatialReference",null),g([S({readOnly:!0})],Js.prototype,"state",null),g([S()],Js.prototype,"map",null),g([S()],Js.prototype,"view",void 0),Js=g([J("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Js);const rT=Js,fv={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let jb=class extends kr{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new rT}initialize(){this.addHandles(me(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),st))}destroy(){this._destroyContentWidget()}renderLoading(){return X("div",{key:"loading-container",class:fv.loadingSpinnerContainer},X("span",{class:this.classes(fv.iconLoading,fv.spinner)}))}render(){var i;const{state:e}=this.viewModel;return X("div",{class:fv.base},e==="loading"?this.renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=e?r==="fields"?new Rz({viewModel:e}):r==="media"?new sB({viewModel:e}):r==="text"?new db({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};g([S({type:rT})],jb.prototype,"viewModel",void 0),jb=g([J("esri.widgets.Feature.FeatureExpression")],jb);const Lwe=jb;function Dwe(t,e,i){const r=Object.keys(e).filter(d=>fx(t,d)),n=r.map(d=>e[d]),l=r.map(d=>i.get(d)).filter(Go);return jwe(t,FG(n,l))}function FG(t,e){const i=e.map((r,n)=>{let l=t[n];if(r.domain&&r.domain.type==="coded-value"){const d=r.domain.codedValues.find(y=>y.code===l);d!=null&&d.name&&(l=d.name)}return aX(r)&&(l=Rwe(r,l)),[r.name,l]});return Object.fromEntries(i)}function Rwe(t,e){if(!t||e==null)return null;switch(t.type){case"date":return qn(e);case"date-only":return p7(e);case"time-only":return f7(e);case"timestamp-offset":return y7(e);default:return null}}function jwe(t,e){return Bn(Bn(t,i=>`{${i.toLowerCase()}}`),Object.fromEntries(Object.entries(e).map(([i,r])=>[i.toLowerCase(),r])))}var Qk;(function(t){t.TOO_SHORT="length-validation-error::too-short"})(Qk||(Qk={}));const Fwe=t=>{var i;const e=[];if(t.formTemplate){const{description:r,title:n}=t.formTemplate;(i=t.fields)==null||i.forEach(l=>{const d=n&&fx(n,l.name),y=r&&fx(r,l.name);(d||y)&&e.push(l.name)})}return e},tx=100;let Lt=class extends ti(Oh(Xo(Be))){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await n0(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await n0(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await n0(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=nd(this._queryController,tx),this._queryFeatureCountDebounced=nd(this._queryFeatureCountController,tx),this._queryPageDebounced=nd(this._queryPageController,tx),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.handles.add([me(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount]},()=>this._queryDebounced(),st),me(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),me(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,n=1,l=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,n),l))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(r=>{const n=r.clone();return n.field=um(r.field,i),n}):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new ze}get relatedFeatureInfos(){const{itemDescriptionFieldName:e,relatedFeatures:i,relatedLayer:r}=this;if(!i.length||!r)return[];const n=r&&"formTemplate"in r&&r.formTemplate,l=n&&(n==null?void 0:n.title)||void 0;return i.map(d=>{let y;if(e){const b=d.getAttribute(e),x=r.fieldsIndex.get(e);if(x){const $=FG([b],[x])[e];$!=null&&(y=$.toString())}}return{feature:d,description:y,title:l?Dwe(l,d.attributes,r.fieldsIndex):void 0}}).toArray()}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;return e!=null&&e.loaded&&i&&r?ype(i,e,r)??null:null}get relationship(){var r;const{relationshipId:e,layer:i}=this;return typeof e=="number"?((r=i==null?void 0:i.relationships)==null?void 0:r.find(({id:n})=>n===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new ze}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:l,canLoad:d}=this;return i||d&&!l?"loading":e||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(e){return this.relatedFeatures.find(i=>i.getObjectId()===e)}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(i=>!i.destroyed&&i.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i,relationshipId:r,objectId:n,_queryFeatureCountAbortController:l,canQuery:d,supportsCacheHint:y}=this;if(await(e==null?void 0:e.load()),await(i==null?void 0:i.load()),!d||!e||!i)return void this._set("featureCount",0);const b=i.createQuery(),x=new B0({cacheHint:y,relationshipId:r,returnGeometry:!1,objectIds:[n],where:b.where??void 0}),$=await e.queryRelatedFeaturesCount(x,{signal:l==null?void 0:l.signal});this._set("featureCount",$[n]||0)}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:l}=this;!r||i<2||!l||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var he;const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:n,displayCount:l,layer:d,relationshipId:y,featurePage:b,featureCount:x,relatedLayer:$,supportsCacheHint:E}=this,{canQuery:k,objectId:P}=this;if(!k||!d||!$)return[];const D=r?((b-1)*n+x)%x:0,L=r?n:l,N=$.objectIdField,B=[...i.map(de=>de.field),...Fwe($),N].filter(Go),W=i.map(de=>`${de.field} ${de.order}`),H=$.createQuery(),Y=new B0({orderByFields:W,start:D,num:L,outFields:B,cacheHint:E,relationshipId:y,returnGeometry:!1,objectIds:[P],where:H.where??void 0}),ie=await d.queryRelatedFeatures(Y,{signal:e==null?void 0:e.signal}),ne=((he=ie[P])==null?void 0:he.features)||[];return ne.forEach(de=>{de.sourceLayer=$,de.layer=$}),ne}};g([S()],Lt.prototype,"_loaded",void 0),g([S()],Lt.prototype,"_queryAbortController",void 0),g([S()],Lt.prototype,"_queryPageAbortController",void 0),g([S()],Lt.prototype,"_queryFeatureCountAbortController",void 0),g([S({value:1})],Lt.prototype,"featurePage",null),g([S()],Lt.prototype,"featuresPerPage",void 0),g([S({readOnly:!0})],Lt.prototype,"orderByFieldsFixedCasing",null),g([S({readOnly:!0})],Lt.prototype,"supportsCacheHint",null),g([S({readOnly:!0})],Lt.prototype,"canLoad",null),g([S({readOnly:!0})],Lt.prototype,"canQuery",null),g([S()],Lt.prototype,"description",void 0),g([S({readOnly:!0})],Lt.prototype,"itemDescriptionFieldName",null),g([S({value:3})],Lt.prototype,"displayCount",null),g([S({type:xs})],Lt.prototype,"graphic",void 0),g([S()],Lt.prototype,"layer",void 0),g([S()],Lt.prototype,"map",void 0),g([S({readOnly:!0})],Lt.prototype,"objectId",null),g([S({readOnly:!0})],Lt.prototype,"objectIdField",null),g([S()],Lt.prototype,"orderByFields",void 0),g([S({readOnly:!0})],Lt.prototype,"relatedFeatures",null),g([S({readOnly:!0})],Lt.prototype,"relatedFeatureInfos",null),g([S({readOnly:!0})],Lt.prototype,"relatedLayer",null),g([S({readOnly:!0})],Lt.prototype,"relationship",null),g([S()],Lt.prototype,"featureCount",void 0),g([S({readOnly:!0})],Lt.prototype,"relatedFeatureViewModels",null),g([S()],Lt.prototype,"relationshipId",void 0),g([S()],Lt.prototype,"showAllEnabled",void 0),g([S()],Lt.prototype,"state",null),g([S()],Lt.prototype,"title",void 0),g([S()],Lt.prototype,"getRelatedFeatureByObjectId",null),Lt=g([J("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],Lt);const sT=Lt,K1="esri-feature",qf=`${K1}-relationship`,lo={base:qf,esriWidget:"esri-widget",listContainer:`${qf}__list`,listItem:`${qf}__list-item`,listItemHidden:`${qf}__list-item--hidden`,listContainerQuerying:`${qf}__list--querying`,featureObserver:`${K1}__feature-observer`,stickySpinnerContainer:`${K1}__sticky-loading-container`,loadingSpinnerContainer:`${K1}__loading-container`,spinner:`${K1}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},eP={title:!0,description:!0};let ps=class extends kr{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new sT,this.messages=null,this.messagesCommon=null,this.visibleElements={...eP},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:n,relatedFeatures:l,featuresPerPage:d,featurePage:y}=this.viewModel;r==="ready"&&n&&l.length>=d*y&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new S_,this.addHandles([me(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),st),me(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Rs(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return uf({icon:()=>le(()=>import("./calcite-icon-0ebdbba9.js"),["assets/calcite-icon-0ebdbba9.js","assets/icon-0e13ae13.js","assets/observers-279029a9.js"]),list:()=>le(()=>import("./calcite-list-5ce3c479.js"),["assets/calcite-list-5ce3c479.js","assets/loader-11488a26.js","assets/guid-0d265cb2.js","assets/observers-279029a9.js","assets/utils3-5c4b2d7f.js","assets/loadable-f00d0b8b.js","assets/debounce-fe65f68f.js","assets/t9n-f5597cda.js","assets/icon-0e13ae13.js","assets/scrim-be67464a.js"]),"list-item":()=>le(()=>import("./calcite-list-item-cc52d892.js"),["assets/calcite-list-item-cc52d892.js","assets/loader-11488a26.js","assets/guid-0d265cb2.js","assets/utils3-5c4b2d7f.js","assets/t9n-f5597cda.js","assets/observers-279029a9.js","assets/loadable-f00d0b8b.js","assets/action-6a0804ca.js","assets/icon-0e13ae13.js"]),notice:()=>le(()=>import("./calcite-notice-cf269e7b.js"),["assets/calcite-notice-cf269e7b.js","assets/observers-279029a9.js","assets/loadable-f00d0b8b.js","assets/t9n-f5597cda.js","assets/openCloseComponent-4a028ddf.js","assets/icon-0e13ae13.js"])})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=ei(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r,state:n}=this.viewModel;return!e&&!!i&&n==="ready"&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return To(e==null?void 0:e.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...eP,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?X("div",{key:"sticky-loader",class:lo.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return X("span",{class:this.classes(lo.iconLoading,lo.spinner)})}renderLoading(){return X("div",{key:"loading-container",class:lo.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return X("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Th(this.container)?"chevron-left":"chevron-right";return X("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var l;const{itemDescriptionFieldName:i}=this.viewModel,r=e.title;e.description=i&&((l=e.formattedAttributes)==null?void 0:l.global[i]);const n=e.state==="loading";return X("calcite-list-item",{class:this.classes(lo.listItem,{[lo.listItemHidden]:n}),key:e.uid,label:r,description:e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?X("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return X("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},X("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return X("div",{key:"feature-observer",class:lo.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return X("calcite-list",null,e.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return X("div",{key:"list-container",class:this.classes(lo.listContainer,{[lo.listContainerQuerying]:i==="querying"})},e?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return X("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},X("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var i;const{state:e}=this.viewModel;return X("div",{class:this.classes(lo.base,lo.esriWidget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e==null||e.forEach(r=>{this.addHandles(me(()=>[r.title,r.state],()=>this.scheduleRender(),st),i)}),this.scheduleRender()}_setupFeatureElementInfo(){var l;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(l=this._featureElementInfo)==null||l.set({description:r,title:n,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await P2(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};g([S()],ps.prototype,"_relatedFeatureIntersectionObserverNode",void 0),g([S({readOnly:!0})],ps.prototype,"displayShowAllButton",null),g([S({readOnly:!0})],ps.prototype,"displayListItems",null),g([S()],ps.prototype,"description",null),g([S({readOnly:!0})],ps.prototype,"featureCountDescription",null),g([S()],ps.prototype,"headingLevel",void 0),g([S()],ps.prototype,"title",null),g([S({type:sT})],ps.prototype,"viewModel",void 0),g([S(),Er("esri/widgets/Feature/t9n/Feature")],ps.prototype,"messages",void 0),g([S(),Er("esri/t9n/common")],ps.prototype,"messagesCommon",void 0),g([S()],ps.prototype,"visibleElements",void 0),g([xt("visibleElements")],ps.prototype,"castVisibleElements",null),ps=g([J("esri.widgets.Feature.FeatureRelationship")],ps);const tP=ps;let Nwe=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var Z1;const zwe=1,iP="content-view-models",rP="relationship-view-models",sP={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let ci=Z1=class extends Oh(Be){constructor(t){super(t),this._handles=new Fs,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=h$(this._graphicChanged,zwe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...sP},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this._handles.add(me(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),st))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return lpe(tA(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return $z(this.graphic)}castAbilities(t){return{...sP,...t}}get isTable(){var t;return((t=this._sourceLayer)==null?void 0:t.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof id&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof id&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof id&&e.previous()}async updateGeometry(){var d;const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!t||!i)return;const n=(d=t==null?void 0:t.attributes)==null?void 0:d[r];if(n==null)return;const l=[n];if(!t.geometry){const y=await Cz({layer:i,graphic:t,outFields:[],objectIds:l,returnGeometry:!0,spatialReference:e}),b=y==null?void 0:y.geometry;b&&(t.geometry=b)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){is(i)||(this._error=i,ge.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(Go):typeof t=="string"?this._compileText(new R0({text:t}),0).text:t}_destroyContentViewModels(){var t,e;(t=this._handles)==null||t.remove(rP),(e=this._handles)==null||e.remove(iP),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var n;const i=(n=t==null?void 0:t.graphic)==null?void 0:n.getObjectId(),r=e==null?void 0:e.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:r,spatialReference:n}=this;e==null||e.filter(Boolean).forEach(l=>{t.find(d=>this._matchesFeature(d,l))||t.add(new Z1({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:n,graphic:l}))}),t.forEach(l=>{(e==null?void 0:e.find(y=>this._matchesFeature(l,y)))||t.remove(l)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:n}=t,l=r==null?void 0:r.type;n&&l&&(l==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,e))),l==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),n.set(this._createMediaVMParams(r,e))),l==="text"&&n.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:r,relationshipId:n,title:l,description:d}=t,{_sourceLayer:y,graphic:b,map:x}=this;if(!Az(y))return;const $=new sT({displayCount:i,graphic:b,orderByFields:r,relationshipId:n,layer:y,map:x,...this._compileTitleAndDesc({title:l,description:d})});return this.contentViewModels[e]=$,this._handles.add(Rs(()=>$.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels($)),rP),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:r,map:n,spatialReference:l,view:d}=this,y=new rT({expressionInfo:i,graphic:r,interceptor:Z1.interceptor,map:n,spatialReference:l,view:d});return this.contentViewModels[e]=y,this._handles.add(me(()=>y.contentElementViewModel,()=>this._setExpressionContentVM(y,e),st),iP),t}_compileAttachments(t,e){const{graphic:i}=this,{description:r,title:n}=t;return this.contentViewModels[e]=new y$({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:r,destroyer:n}=t;return this.contentViewModels[e]=new h2({graphic:i,creator:r,destroyer:n}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:l}=this,d=n==null?void 0:n.attributes,y=this._expressionAttributes,b=l.global;return{title:ed({attributes:d,fieldInfoMap:i,globalAttributes:b,expressionAttributes:y,layer:r,text:t}),description:ed({attributes:d,fieldInfoMap:i,globalAttributes:b,expressionAttributes:y,layer:r,text:e})}}_createFieldsVMParams(t,e){const i=this._effectivePopupTemplate,r=this.formattedAttributes,n={...r==null?void 0:r.global,...r==null?void 0:r.content[e]},l=(t==null?void 0:t.fieldInfos)||(i==null?void 0:i.fieldInfos),d=l==null?void 0:l.filter(({fieldName:$})=>c$($)||Sl($)||n.hasOwnProperty($)),y=i==null?void 0:i.expressionInfos,{description:b,title:x}=t;return{attributes:n,expressionInfos:y,fieldInfos:d,...this._compileTitleAndDesc({title:x,description:b})}}_compileFields(t,e){const i=t.clone(),r=new M_(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:l,relatedInfos:d,_sourceLayer:y,_expressionAttributes:b}=this,x=this.formattedAttributes,$=(r==null?void 0:r.attributes)??{},{description:E,mediaInfos:k,title:P}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:$,isAggregate:r==null?void 0:r.isAggregate,layer:y,fieldInfoMap:n,formattedAttributes:{...x==null?void 0:x.global,...x==null?void 0:x.content[e]},expressionAttributes:b,mediaInfos:k,popupTemplate:l,relatedInfos:d,...this._compileTitleAndDesc({title:P,description:E})}}_compileMedia(t,e){const i=t.clone(),r=new id(this._createMediaVMParams(t,e));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[e]=r,i}_createTextVMParams(t){var l;const{graphic:e,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(t&&t.text){const d=(e==null?void 0:e.attributes)??{},y=((l=this.formattedAttributes)==null?void 0:l.global)??{};t.text=ed({attributes:d,fieldInfoMap:i,globalAttributes:y,expressionAttributes:n,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new h2(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i}=this;if(!t)return;const{lastEditInfoEnabled:r}=t,n=e==null?void 0:e.editFieldsInfo;return r&&n?ape(n,i==null?void 0:i.attributes):void 0}_compileTitle(t){var y;const{_fieldInfoMap:e,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,l=(r==null?void 0:r.attributes)??{},d=((y=this.formattedAttributes)==null?void 0:y.global)??{};return ed({attributes:l,fieldInfoMap:e,globalAttributes:d,expressionAttributes:n,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.title;return u2(i,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.content;return u2(i,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n}=this,l=this.map,d=this.view,y=this.spatialReference;if(e!==this._featureAbortController||!r)return;await hpe({graphic:r,popupTemplate:n,layer:i,spatialReference:y},t);const{content:{value:b},title:{value:x}}=await ws({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:$}}=await ws({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:Cwe({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:y,graphic:r,map:l,interceptor:Z1.interceptor,view:d})});e===this._featureAbortController&&r&&(this._expressionAttributes=$,this._graphicExpressionAttributes={...r.attributes,...$},this._set("formattedAttributes",this._createFormattedAttributes(b)),this._set("title",this._compileTitle(x)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(b)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:l,_sourceLayer:d,_fieldInfoMap:y,_graphicExpressionAttributes:b}=this;i.content[e]=f5({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...b,...t.attributes},layer:d,fieldInfoMap:y,relatedInfos:l})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:l,_fieldInfoMap:d,_graphicExpressionAttributes:y}=this;i.content[e]=f5({fieldInfos:t.fieldInfos,graphic:r,attributes:{...y,...t.attributes},layer:l,fieldInfoMap:d,relatedInfos:n})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:l,_graphicExpressionAttributes:d}=this,y=e==null?void 0:e.fieldInfos,b={global:f5({fieldInfos:y,graphic:i,attributes:d,layer:n,fieldInfoMap:l,relatedInfos:r}),content:[]};return Array.isArray(t)&&t.forEach((x,$)=>{x.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:x,contentElementIndex:$,formattedAttributes:b}),x.type==="media"&&this._createMediaFormattedAttributes({contentElement:x,contentElementIndex:$,formattedAttributes:b})}),b}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,tA(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const l=(n==null?void 0:n.associatedLayer)!=null?await(n==null?void 0:n.associatedLayer.load(i)):n;if(!l||!t)return;const d=e.filter(x=>x&&Sl(x.fieldName));if(!d||!d.length)return;e.forEach(x=>this._configureRelatedInfo(x,l));const y=await I1e({relatedInfos:r,layer:l},i);Object.keys(y).forEach(x=>{var k;const $=r.get(x.toString()),E=(k=y[x])==null?void 0:k.value;$&&E&&($.layerInfo=E.data)});const b=await E1e({graphic:t,relatedInfos:r,layer:l},i);Object.keys(b).forEach(x=>{var $;x1e(($=b[x])==null?void 0:$.value,r.get(x.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,r=mb(t.fieldName);if(!r)return;const{layerId:n,fieldName:l}=r;if(!n)return;const d=i.get(n.toString())||_1e(n,e);d&&(A1e({relatedInfo:d,fieldName:l,fieldInfo:t}),this.relatedInfos.set(n,d))}};ci.interceptor=new Nwe(ppe,fpe),g([S()],ci.prototype,"_error",void 0),g([S()],ci.prototype,"_featureAbortController",void 0),g([S({readOnly:!0})],ci.prototype,"_effectivePopupTemplate",null),g([S({readOnly:!0})],ci.prototype,"_fieldInfoMap",null),g([S({readOnly:!0})],ci.prototype,"_sourceLayer",null),g([S()],ci.prototype,"abilities",void 0),g([xt("abilities")],ci.prototype,"castAbilities",null),g([S({readOnly:!0})],ci.prototype,"content",void 0),g([S({readOnly:!0})],ci.prototype,"contentViewModels",void 0),g([S()],ci.prototype,"description",void 0),g([S({type:Boolean})],ci.prototype,"defaultPopupTemplateEnabled",void 0),g([S({readOnly:!0})],ci.prototype,"isTable",null),g([S({readOnly:!0})],ci.prototype,"state",null),g([S({readOnly:!0})],ci.prototype,"formattedAttributes",void 0),g([S({type:xs,value:null})],ci.prototype,"graphic",null),g([S({readOnly:!0})],ci.prototype,"lastEditInfo",void 0),g([S({readOnly:!0})],ci.prototype,"relatedInfos",void 0),g([S()],ci.prototype,"spatialReference",null),g([S({readOnly:!0})],ci.prototype,"title",void 0),g([S()],ci.prototype,"map",null),g([S({readOnly:!0})],ci.prototype,"waitingForContent",null),g([S()],ci.prototype,"view",void 0),ci=Z1=g([J("esri.widgets.FeatureViewModel")],ci);const nT=ci,Cr="esri-feature",_i={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:Cr,container:`${Cr}__size-container`,title:`${Cr}__title`,main:`${Cr}__main-container`,btn:`${Cr}__button`,icon:`${Cr}__icon`,content:`${Cr}__content`,contentNode:`${Cr}__content-node`,contentElement:`${Cr}__content-element`,text:`${Cr}__text`,lastEditedInfo:`${Cr}__last-edited-info`,fields:`${Cr}__fields`,fieldHeader:`${Cr}__field-header`,fieldData:`${Cr}__field-data`,fieldDataDate:`${Cr}__field-data--date`,loadingSpinnerContainer:`${Cr}__loading-container`,spinner:`${Cr}__loading-spinner`},NG=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>t2(i)&&!i.destroyed?X("div",{class:_i.contentNode,key:i},i.render()):i instanceof HTMLElement?X("div",{class:_i.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):Yce(i)?X("div",{class:_i.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=g([J("esri.widgets.Feature.ContentMixin")],e),e};var eM;const nP={title:!0,content:!0,lastEditedInfo:!0},oP="relationship-handles";let hr=eM=class extends NG(kr){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...nP},this.viewModel=new nT}initialize(){this.addHandles(me(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),st))}loadDependencies(){return uf({notice:()=>le(()=>import("./calcite-notice-cf269e7b.js"),["assets/calcite-notice-cf269e7b.js","assets/observers-279029a9.js","assets/loadable-f00d0b8b.js","assets/t9n-f5597cda.js","assets/openCloseComponent-4a028ddf.js","assets/icon-0e13ae13.js"])})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...nP,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=X("div",{class:_i.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return X("div",{class:this.classes(_i.base,_i.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return X("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?X("div",{key:"error-title",slot:"title"},t.errorMessage):null,X("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return X("div",{key:"loading-container",class:_i.loadingSpinnerContainer},X("span",{class:this.classes(_i.iconLoading,_i.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?X("div",{class:_i.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?X(m$,{level:this.headingLevel,class:_i.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?X("div",{class:_i.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:X("div",{class:_i.contentNode,key:`${e}-content`},i.render())}return this.renderNodeContent(t)}renderContentElement(t,e){var r;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((r=i.content)!=null&&r[t.type]))return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:r}=e.viewModel;return i==="loading"||r.length>0?X("div",{key:this._buildKey("attachments-element",t),class:this.classes(_i.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?X("div",{key:this._buildKey("relationship-element",t),class:_i.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:X("div",{key:this._buildKey("expression-element",t),class:_i.contentElement},e.render())}renderCustom(t,e){const{creator:i}=t,r=this._contentWidgets[e];return!r||r.destroyed?null:i?X("div",{key:this._buildKey("custom-element",e),class:_i.contentElement},r.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:X("div",{key:this._buildKey("fields-element",t),class:_i.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:X("div",{key:this._buildKey("media-element",t),class:_i.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:r,user:n}=i,l=i.type==="edit"?n?e.lastEditedByUser:e.lastEdited:n?e.lastCreatedByUser:e.lastCreated,d=To(l,{date:r,user:n});return X("div",{key:"edit-info-element",class:this.classes(_i.lastEditedInfo,_i.contentElement)},d)}renderText(t,e){const i=t.text,r=this._contentWidgets[e];return!r||r.destroyed?null:i?X("div",{key:this._buildKey("text-element",e),class:this.classes(_i.contentElement,_i.text)},r.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(oP),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([Rs(()=>t,"select-record",({featureViewModel:r})=>{e&&(r.abilities={relationshipContent:!0},e.push(new eM({flowItems:e,viewModel:r,visibleElements:i})))}),Rs(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:r}=t;r.showAllEnabled=!0;const n=new tP({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(n),e.push(n)})],oP)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,l)=>{if(n.type==="attachments"&&(this._contentWidgets[l]=new wpe({displayType:n.displayType,headingLevel:e.title?t+1:t,viewModel:r[l]})),n.type==="fields"&&(this._contentWidgets[l]=new Rz({viewModel:r[l]})),n.type==="media"&&(this._contentWidgets[l]=new sB({viewModel:r[l]})),n.type==="text"&&(this._contentWidgets[l]=new db({viewModel:r[l]})),n.type==="custom"&&(this._contentWidgets[l]=new db({viewModel:r[l]})),n.type==="expression"&&(this._contentWidgets[l]=new Lwe({viewModel:r[l]})),n.type==="relationship"){const d=new tP({viewModel:r[l]});this._addFeatureRelationshipHandles(d),this._contentWidgets[l]=d}},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new db({viewModel:n}))}this.scheduleRender()}};g([S()],hr.prototype,"graphic",null),g([S()],hr.prototype,"defaultPopupTemplateEnabled",null),g([S()],hr.prototype,"flowItems",void 0),g([S()],hr.prototype,"headingLevel",void 0),g([S({readOnly:!0})],hr.prototype,"isTable",null),g([S()],hr.prototype,"label",null),g([S(),Er("esri/widgets/Feature/t9n/Feature")],hr.prototype,"messages",void 0),g([S(),Er("esri/t9n/common")],hr.prototype,"messagesCommon",void 0),g([S(),Er("esri/widgets/support/t9n/uriUtils")],hr.prototype,"messagesURIUtils",void 0),g([S()],hr.prototype,"spatialReference",null),g([S({readOnly:!0})],hr.prototype,"title",null),g([S()],hr.prototype,"visibleElements",void 0),g([xt("visibleElements")],hr.prototype,"castVisibleElements",null),g([S()],hr.prototype,"map",null),g([S()],hr.prototype,"view",null),g([S({type:nT})],hr.prototype,"viewModel",void 0),hr=eM=g([J("esri.widgets.Feature")],hr);const zG=hr;var VG;const Fb=Symbol("anchorHandles");let jc=class extends Na.EventedAccessor{constructor(e){super(e),this[VG]=new Fs,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Fb].add([Hn(()=>eh(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),me(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null,this[Fb]=ei(this[Fb])}get screenLocation(){var n;const{location:e,view:i,screenLocationEnabled:r}=this;return r&&e!=null&&i!=null&&i.ready?(n=i.toScreen)==null?void 0:n.call(i,e):null}};VG=Fb,g([S()],jc.prototype,"location",void 0),g([S()],jc.prototype,"screenLocation",null),g([S()],jc.prototype,"screenLocationEnabled",void 0),g([S()],jc.prototype,"view",void 0),jc=g([J("esri.widgets.support.AnchorElementViewModel")],jc);const BG=jc,Vwe="esri.widgets.CompassViewModel";let Nb=class extends BG{constructor(e){super(e),this.visible=!1}};g([S()],Nb.prototype,"visible",void 0),Nb=g([J(Vwe)],Nb);const GG=Nb,ix="esri-spinner",rx={base:ix,spinnerStart:`${ix}--start`,spinnerFinish:`${ix}--finish`};let Fc=class extends kr{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new GG}initialize(){this.addHandles(me(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,n=e&&r,l=!e&&r,d={[rx.spinnerStart]:n,[rx.spinnerFinish]:l},y=this._getPositionStyles();return X("div",{class:this.classes(rx.base,d),styles:y})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=P2(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(i==null||e==null)return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};g([S()],Fc.prototype,"location",null),g([S()],Fc.prototype,"view",null),g([S({type:GG})],Fc.prototype,"viewModel",void 0),g([S()],Fc.prototype,"visible",null),Fc=g([J("esri.widgets.Spinner")],Fc);const Bwe=Fc,G_={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},rd=new tf({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:G_.iconZoom}),aP=new tf({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:G_.iconTrash}),i0=new tf({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:G_.iconZoom}),Qu=new t_({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:G_.iconBrowseClusteredFeatures,value:!1}),Gwe="esri.widgets.Popup.PopupViewModel",_2=ge.getLogger(Gwe),Uwe=t=>{const{event:e,view:i,viewModel:r}=t,{action:n}=e;if(!n)return Promise.reject(new se("trigger-action:missing-arguments","Event has no action"));const{disabled:l,id:d}=n;if(!d)return Promise.reject(new se("trigger-action:invalid-action","action.id is missing"));if(l)return Promise.reject(new se("trigger-action:invalid-action","Action is disabled"));if(d===rd.id)return Hwe(r).catch(gx);if(d===i0.id)return Wwe(r);if(d===Qu.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(d===aP.id){r.visible=!1;const{selectedFeature:y}=r;if(!y)return Promise.reject(new se(`trigger-action:${aP.id}`,"selectedFeature is required",{selectedFeature:y}));const{sourceLayer:b}=y;return b?b.remove(y):i==null||i.graphics.remove(y),Promise.resolve()}return Promise.resolve()};function UG(t){const{selectedFeature:e,location:i,view:r}=t;return r?r.type==="3d"?e??i??null:t.get("selectedFeature.geometry")||i:null}function Jc(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function qwe(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function Hwe(t){var $;const{location:e,selectedFeature:i,view:r,zoomFactor:n}=t,l=UG(t);if(!r||!l){const E=new se("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:r});throw _2.error(E),E}const d=r.scale/n,y=($=t.selectedFeature)==null?void 0:$.geometry,b=y??e,x=b!=null&&b.type==="point"&&await qwe(i,r);rd.active=!0,rd.disabled=!0;try{await t.zoomTo({target:{target:l,scale:x?d:void 0}})}catch{const k=new se("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});_2.error(k)}finally{rd.active=!1,rd.disabled=!1,t.zoomToLocation=null,x&&(t.location=b)}}async function Wwe(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const d=new se("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw _2.error(d),d}if(!e||!Jc(e)){const d=new se("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw _2.error(d),d}const[r,n]=await oT(i,e);i0.active=!0,i0.disabled=!0;const{extent:l}=await r.queryExtent(n);await t.zoomTo({target:l}),i0.active=!1,i0.disabled=!1}async function Jwe(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,n]=await oT(e,i),{extent:l}=await r.queryExtent(n);t.selectedClusterBoundaryFeature.geometry=l,e.graphics.add(t.selectedClusterBoundaryFeature)}async function Ywe(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,n]=await oT(i,e);Qu.active=!0,Qu.disabled=!0;const{features:l}=await r.queryFeatures(n);Qu.active=!1,Qu.disabled=!1,Qu.value=!0,t==null||t.open({features:[e].concat(l),featureMenuOpen:!0})}async function oT(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),n=e.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function Kwe(t){Qu.value=!1;const e=t.features.filter(i=>Jc(i));e.length&&(t.features=e)}function qG(t){var e;if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const He="esri-popup",Hf=`${He}__header`,Xh=`${He}--is-docked`,_e={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:He,widget:"esri-widget",main:`${He}__main-container`,loadingContainer:`${He}__loading-container`,isCollapsible:`${He}--is-collapsible`,isCollapsed:`${He}--is-collapsed`,shadow:`${He}--shadow`,isDocked:Xh,isDockedTopLeft:`${Xh}-top-left`,isDockedTopCenter:`${Xh}-top-center`,isDockedTopRight:`${Xh}-top-right`,isDockedBottomLeft:`${Xh}-bottom-left`,isDockedBottomCenter:`${Xh}-bottom-center`,isDockedBottomRight:`${Xh}-bottom-right`,alignTopCenter:`${He}--aligned-top-center`,alignBottomCenter:`${He}--aligned-bottom-center`,alignTopLeft:`${He}--aligned-top-left`,alignBottomLeft:`${He}--aligned-bottom-left`,alignTopRight:`${He}--aligned-top-right`,alignBottomRight:`${He}--aligned-bottom-right`,isFeatureMenuOpen:`${He}--feature-menu-open`,isActionsMenuOpen:`${He}--actions-menu-open`,hasFeatureUpdated:`${He}--feature-updated`,header:Hf,headerButtons:`${Hf}-buttons`,headerContainer:`${Hf}-container`,headerContainerButton:`${Hf}-container--button`,headerTitle:`${Hf}-title`,content:`${He}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${He}__footer`,footerHasPagination:`${He}__footer--has-pagination`,footerHasActions:`${He}__footer--has-actions`,footerHasActionsMenu:`${He}__footer--has-actions-menu`,button:`${He}__button`,buttonDisabled:`${He}__button--disabled`,buttonDock:`${He}__button--dock`,icon:`${He}__icon`,iconDock:`${He}__icon--dock-icon`,inlineActionsContainer:`${He}__inline-actions-container`,actionsMenuButton:`${He}__actions-menu-button`,actions:`${He}__actions`,action:`${He}__action`,actionImage:`${He}__action-image`,actionText:`${He}__action-text`,actionToggle:`${He}__action-toggle`,actionToggleOn:`${He}__action-toggle--on`,actionExit:`${He}__action--exit`,actionSelectFeature:`${He}__action--select-feature`,pointer:`${He}__pointer`,pointerDirection:`${He}__pointer-direction`,navigation:`${He}__navigation`,paginationIcon:`${He}__pagination-icon`,paginationPrevious:`${He}__pagination-previous`,paginationNext:`${He}__pagination-next`,featureMenu:`${He}__feature-menu`,featureMenuList:`${He}__feature-menu-list`,featureMenuItem:`${He}__feature-menu-item`,featureMenuViewport:`${He}__feature-menu-viewport`,featureMenuHeader:`${He}__feature-menu-header`,featureMenuNote:`${He}__feature-menu-note`,featureMenuSelected:`${He}__feature-menu-item--selected`,featureMenuButton:`${He}__feature-menu-button`,featureMenuButtonIcon:`${He}__feature-menu-button-icon`,featureMenuTitle:`${He}__feature-menu-title`,featureMenuObserver:`${He}__feature-menu-observer`,featureMenuLoader:`${He}__feature-menu-loader`,collapseButton:`${He}__collapse-button`,collapseIcon:`${He}__collapse-icon`},Zwe="OBJECTID";var gr;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(gr||(gr={}));const tM={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function Xwe(t,e,i){const r=gr.size;let n=r,l=r;t<1?n*=.75:t>1&&(l*=1.25);const d=0,y=0;let b=r,x=r;return e&&i&&(n=l=b=x=0),[{type:"path",path:[{command:"M",values:[b,d]},{command:"L",values:[i?b:.875*b,d]},{command:"L",values:[i?n-.5*b:y,l-.5*x]},{command:"L",values:[n-.5*b,l-.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[b,d]},{command:"L",values:[b,e?d:.125*x]},{command:"L",values:[n-.5*b,e?l-.5*x:x]},{command:"L",values:[n-.5*b,l-.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*b,l-.5*x]},{command:"L",values:[i?n-.5*b:y,l-.5*x]},{command:"L",values:[i?n-.5*b:y,e?l-.5*x:x]},{command:"L",values:[n-.5*b,e?l-.5*x:x]},{command:"Z",values:[]}]}]}function Qwe(t){const e=gr.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function e2e(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function t2e(t,e){let i=e?gr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=gr.size?i-=.5*n:i-=n;const l=0,d=0,y=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,l]},{command:"L",values:[i,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[d,.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[d,r-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*y]},{command:"L",values:[i,.5*y]},{command:"Z",values:[]}]}]}function i2e(t,e){let i=e?gr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=gr.size?i-=.5*n:i-=n;const l=.5*i,d=.15*i,y=0,b=r-d;return[{type:"ellipse",cx:.5*i,cy:b,rx:l,ry:d},{type:"path",path:[{command:"M",values:[y,d]},{command:"L",values:[y,b]},{command:"L",values:[i,b]},{command:"L",values:[i,d]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:d,rx:l,ry:d}]}function r2e(t,e){let i=e?gr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=gr.size?i-=.5*n:i-=n;const l=.15*i,d=r-l;return[{type:"ellipse",cx:.5*i,cy:d,rx:.5*i,ry:l},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,d]},{command:"L",values:[0,d]},{command:"Z",values:[]}]}]}function s2e(t){let e=t;const i=t,r=6;e<gr.size?e-=.5*r:e-=r;const n=.15*e,l=0;return[{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[e,l]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:l,rx:.5*e,ry:n}]}function n2e(t){let e=t;const i=t,r=4;e<gr.size?e-=.5*r:e-=r;const n=0,l=0,d=e,y=i,b=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*d,n]},{command:"L",values:[d,.5*y-b]},{command:"L",values:[.45*d-b,.5*y+b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,n]},{command:"L",values:[.45*d-b,.5*y+b]},{command:"L",values:[l,.5*y-b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,.5*y-b]},{command:"L",values:[.45*d-b,.5*y+b]},{command:"L",values:[.45*d,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,i]},{command:"L",values:[d,.5*y-b]},{command:"L",values:[.45*d-b,.5*y+b]},{command:"Z",values:[]}]}]}function o2e(t){const e=t,i=2;let r=t;r<gr.size?r-=.5*i:r-=i;const n=0,l=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[l,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function gh(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function O7e(t,e){if(t==null)return new Ne;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Ne(t);return new Ne([gh(i.r,e),gh(i.g,e),gh(i.b,e),i.a])}function a2e(t){return"r"in t&&"g"in t&&"b"in t}function HG(t){return"h"in t&&"s"in t&&"v"in t}function WG(t){return"l"in t&&"a"in t&&"b"in t}function JG(t){return"l"in t&&"c"in t&&"h"in t}function l2e(t){return"x"in t&&"y"in t&&"z"in t}const u2e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h2e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function YG(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const l=t.length,d=t[0].length;let y=0;for(r=0;r<l;r++){for(y=0,n=0;n<d;n++)y+=t[r][n]*e[n];i.push(y)}return i}function KG(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=YG(u2e,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function aT(t){const e=YG(h2e,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function ZG(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function XG(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function c2e(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let l=Math.atan2(r,i);return l=l>0?l:l+2*Math.PI,{l:e,c:n,h:l}}function d2e(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function p2e(t){return ZG(KG(t))}function f2e(t){return aT(XG(t))}function y2e(t){return c2e(ZG(KG(t)))}function m2e(t){return aT(XG(d2e(t)))}function g2e(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),l=n-Math.min(e,i,r);let d=n,y=l===0?0:n===e?(i-r)/l%6:n===i?(r-e)/l+2:(e-i)/l+4,b=l===0?0:l/d;return y<0&&(y+=6),y*=60,b*=100,d*=100/255,{h:y,s:b,v:d}}function v2e(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,l=n*(1-Math.abs(e%2-1));let d;switch(Math.floor(e)){case 0:d={r:n,g:l,b:0};break;case 1:d={r:l,g:n,b:0};break;case 2:d={r:0,g:n,b:l};break;case 3:d={r:0,g:l,b:n};break;case 4:d={r:l,g:0,b:n};break;case 5:case 6:d={r:n,g:0,b:l};break;default:d={r:0,g:0,b:0}}return d.r=Math.round(d.r+r-n),d.g=Math.round(d.g+r-n),d.b=Math.round(d.b+r-n),d}function Zm(t){return a2e(t)?t:JG(t)?m2e(t):WG(t)?f2e(t):l2e(t)?aT(t):HG(t)?v2e(t):t}function lT(t){return HG(t)?t:g2e(Zm(t))}function L7e(t){return WG(t)?t:p2e(Zm(t))}function D7e(t){return JG(t)?t:y2e(Zm(t))}const b2e="http://www.w3.org/2000/svg";let w2e=0,_2e=0;const lP=ce("android"),x2e=ce("chrome")||lP&&lP>=4?"auto":"optimizeLegibility",S2e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},M2e=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let xi={},Vt={};const uP={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},$2e=Math.PI;let T2e=1;function r0(t,e){const i=t*($2e/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function QG(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function eU(t,e,i,r){if(t){if(t.type==="circle")return X("circle",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if(t.type==="ellipse")return X("ellipse",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if(t.type==="rect")return X("rect",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if(t.type==="image")return X("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if(t.type==="path"){const n=typeof t.path!="string"?QG(t.path):t.path;return X("path",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:n})}if(t.type==="text")return Pd(r),X("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":x2e,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:t.x,y:t.y},t.text)}return null}function tU(t){const e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){const i="patternId-"+ ++w2e;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){const i="linearGradientId-"+ ++_2e;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(r=>({offset:r.offset,color:r.color&&new Ne(r.color).toString()}))}}else if(t){const i=new Ne(t);e.fill=i.toString()}}return e}function iU(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Ne(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in uP&&(i=uP[t.style]),Array.isArray(i)){i=i.slice(0);const r=t.width??0;for(let n=0;n<i.length;++n)i[n]*=r;if(t.cap!=="butt"){for(let n=0;n<i.length;n+=2)i[n]-=r,i[n]<1&&(i[n]=1);for(let n=1;n<i.length;n+=2)i[n]+=r}i=i.join(",")}e.dashArray=i}return e}function rU(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",Pd(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function I2e(t){const{pattern:e,linearGradient:i}=t;if(e)return X("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},X("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(i){const r=i.stops.map((n,l)=>X("stop",{key:`${l}-stop`,offset:n.offset,"stop-color":n.color}));return X("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r)}return null}function E2e(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:l,stroke:d,font:y}=r,b=tU(l),x=iU(d),$=n.type==="text"?rU(n,y):null,E=eU(n,b.fill,x,$);E&&i.push(E)}return X("mask",{id:e,maskUnits:"userSpaceOnUse"},X("g",null,i))}function hP(t,e,i){return N0(t,g_(t),[e,i])}function cP(t,e,i,r,n){return v_(t,g_(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function A2e(t,e,i,r){const n=e%360*Math.PI/180;Om(t,g_(t),n);const l=Math.cos(n),d=Math.sin(n),y=t[4],b=t[5];return t[4]=y*l-b*d+r*d-i*l+i,t[5]=b*l+y*d-i*d-r*l+r,t}function os(t,e){xi&&"left"in xi?(xi.left!=null&&xi.left>t&&(xi.left=t),(xi.right==null||xi.right<t)&&(xi.right=t),(xi.top==null||xi.top>e)&&(xi.top=e),(xi.bottom==null||xi.bottom<e)&&(xi.bottom=e)):xi={left:t,bottom:e,right:t,top:e}}function dP(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)os(e[r],e[r+1]);Vt.x=e[i-2],Vt.y=e[i-1];break;case"H":for(r=0;r<i;++r)os(e[r],Vt.y);Vt.x=e[i-1];break;case"V":for(r=0;r<i;++r)os(Vt.x,e[r]);Vt.y=e[i-1];break;case"m":{let n=0;for(("x"in Vt)||(os(Vt.x=e[0],Vt.y=e[1]),n=2),r=n;r<i;r+=2)os(Vt.x+=e[r],Vt.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)os(Vt.x+=e[r],Vt.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)os(Vt.x+=e[r],Vt.y);break;case"v":for(r=0;r<i;++r)os(Vt.x,Vt.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)os(Vt.x+e[r],Vt.y+e[r+1]),os(Vt.x+e[r+2],Vt.y+e[r+3]),os(Vt.x+=e[r+4],Vt.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)os(Vt.x+e[r],Vt.y+e[r+1]),os(Vt.x+=e[r+2],Vt.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)os(e[r+5],e[r+6]);Vt.x=e[i-2],Vt.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)os(Vt.x+=e[r+5],Vt.y+=e[r+6])}}function pP(t,e,i){const r=S2e[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),dP(n)):(n={action:t,args:[]},i.push(n),dP(n)))}function k2e(t){const e=(typeof t.path!="string"?QG(t.path):t.path).match(M2e),i=[];if(xi={},Vt={},!e)return null;let r="",n=[];const l=e.length;for(let y=0;y<l;++y){const b=e[y],x=parseFloat(b);isNaN(x)?(r&&pP(r,n,i),n=[],r=b):n.push(x)}pP(r,n,i);const d={x:0,y:0,width:0,height:0};return xi&&"left"in xi&&(d.x=xi.left,d.y=xi.top,d.width=xi.right-xi.left,d.height=xi.bottom-xi.top),d}function P2e(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=fr(k2e(t));e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function C2e(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const l of t)i?(i.x=Math.min(i.x,l.x),i.y=Math.min(i.y,l.y),r=Math.max(r,l.x+l.width),n=Math.max(n,l.y+l.height)):(i=e,i.x=l.x,i.y=l.y,r=l.x+l.width,n=l.y+l.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function O2e(t,e,i,r,n,l,d,y,b){let x=(d&&l?r0(l,e):e)/2,$=(d&&l?r0(l,i):i)/2;if(b){const W=b[0],H=b[1];x=(d&&l?r0(l,W):W)/2,$=(d&&l?r0(l,H):H)/2}const E=t.width+r,k=t.height+r,P=Bw(),D=Bw();let L=!1;if(n&&E!==0&&k!==0){const W=e!==i?e/i:E/k,H=e>i?e:i;let Y=1,ie=1;isNaN(H)||(W>1?(Y=H/E,ie=H/W/k):(ie=H/k,Y=H*W/E)),qc(D,D,cP(P,Y,ie,x,$)),L=!0}const N=t.x+(E-r)/2,B=t.y+(k-r)/2;if(qc(D,D,hP(P,x-N,$-B)),!L&&(E>e||k>i)){const W=E/e>k/i,H=(W?e:i)/(W?E:k);qc(D,D,cP(P,H,H,N,B))}return l&&qc(D,D,A2e(P,l,N,B)),y&&qc(D,D,hP(P,y[0],y[1])),`matrix(${D[0]},${D[1]},${D[2]},${D[3]},${D[4]},${D[5]})`}function L2e(t,e,i){const r=t==null?void 0:t.effects.find(x=>x.type==="bloom");if(!r)return null;const{strength:n,radius:l}=r,d=n>0?l:0,y=(n+d)*e,b=4*n+1;return X("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},X("feMorphology",{operator:"dilate",radius:(n+.5*d)*(5**(e/100)*(.4+e/100)),in:"SourceGraphic",result:"dilate"}),X("feGaussianBlur",{in:"dilate",stdDeviation:y/25,result:"blur"}),X("feGaussianBlur",{in:"blur",stdDeviation:y/50,result:"intensityBlur"}),X("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},X("feFuncR",{type:"linear",slope:b}),X("feFuncG",{type:"linear",slope:b}),X("feFuncB",{type:"linear",slope:b})),X("feMerge",null,X("feMergeNode",{in:"intensityBlur"}),X("feMergeNode",{in:"intensityBrightness"}),X("feGaussianBlur",{stdDeviation:n/10})))}function D2e(t,e,i,r={}){var x;const n=[],l=[],d=++T2e,y=L2e(r.effectView,e,d);let b=null;if(y){const $=(x=r.effectView)==null?void 0:x.effects.find(D=>D.type==="bloom"),E=($.strength?$.strength+$.radius/2:0)/3,k=e+e*E,P=i+i*E;b=[Math.max(k,10),Math.max(P,10)]}for(let $=0;$<t.length;$++){const E=t[$],k=[],P=[];let D=0,L=0,N=0;for(const H of E){const{shape:Y,fill:ie,stroke:ne,font:he,offset:de}=H;r.ignoreStrokeWidth||Y.type==="text"||(D+=ne&&ne.width||0);const be=tU(ie),we=iU(ne),$e=Y.type==="text"?rU(Y,he):null;n.push(I2e(be)),k.push(eU(Y,be.fill,we,$e)),P.push(P2e(Y)),de&&(L+=de[0],N+=de[1])}const B=O2e(fr(C2e(P)),e,i,D,r.scale??!1,r.rotation,r.useRotationSize??!1,[L,N],b);let W=null;if(r.masking){const H=`mask-${$}`,Y=r.masking[$];n.push(E2e(Y,H)),W=`url(#${H})`}l.push(W?X("g",{mask:W},X("g",{transform:B},k)):X("g",{transform:B},k))}return r.useRotationSize&&r.rotation&&(e=r0(r.rotation,e),i=r0(r.rotation,i)),y&&(Pd(b),e=b[0],i=b[1]),X("svg",{xmlns:b2e,width:e,height:i,style:"display: block;","aria-labelledby":r.ariaLabel,role:"img",focusable:!1},y,X("defs",null,n),y?X("g",{filter:`url(#bloom${d})`},l):l)}const fP=O4();function R2e(t,e){fP.append(t,e),fP.detach(e)}function U_(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(d=>!!d.length))return null;const l=i&&i.node||document.createElement("div");return i.opacity!=null&&(l.style.opacity=i.opacity.toString()),i.effectView!=null&&(l.style.filter=aV(i.effectView)),R2e(l,()=>D2e(t,r,n,i)),l}function j2e(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function F2e(t,e,i){return t?Wt(t,{responseType:"image"}).then(r=>{const n=r.data,l=n.width,d=n.height,y=l/d;let b=e;if(i){const x=Math.max(l,d);b=Math.min(b,x)}return{image:n,width:y<=1?Math.ceil(b*y):b,height:y<=1?b:Math.ceil(b/y)}}):Promise.reject(new se("renderUtils: imageDataSize","href not provided."))}function N2e(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function z2e(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const l=lT({r:t[e],g:t[e+1],b:t[e+2]});l.h=r.h,l.s=r.s,l.v=l.v/100*r.v;const d=Zm(l);t[e]=d.r,t[e+1]=d.g,t[e+2]=d.b,t[e+3]*=i[3];break}}}function V2e(t,e,i,r,n){return F2e(t,e,n).then(l=>{const d=l.width??e,y=l.height??e;if(l.image&&N2e(i,r)){let b=l.image.width,x=l.image.height;ce("edge")&&/\.svg$/i.test(t)&&(b-=1,x-=1);const $=j2e(d,y);$.drawImage(l.image,0,0,b,x,0,0,d,y);const E=$.getImageData(0,0,d,y),k=[i.r/255,i.g/255,i.b/255,i.a],P=lT(i);for(let D=0;D<E.data.length;D+=4)z2e(E.data,D,k,P,r);$.putImageData(E,0,0),t=$.canvas.toDataURL("image/png")}else{const b=wt&&wt.findCredential(t);if(b&&b.token){const x=t.includes("?")?"&":"?";t=`${t}${x}token=${b.token}`}}return{url:t,width:d,height:y}}).catch(()=>({url:t,width:e,height:e}))}function B2e(t){return t=t||globalThis.location.hostname,G2e.some(e=>(t==null?void 0:t.match(e))!=null)}function yP(t,e){return t&&(e=e||globalThis.location.hostname)?e.match(sU)!=null||e.match(oU)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(nU)!=null||e.match(aU)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t}const sU=/^devext.arcgis.com$/,nU=/^qaext.arcgis.com$/,oU=/^[\w-]*\.mapsdevext.arcgis.com$/,aU=/^[\w-]*\.mapsqa.arcgis.com$/,G2e=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,sU,nU,/^jsapps.esri.com$/,oU,aU];function lU(t,e,i,r){const n=t.name;return n==null?Promise.reject(new se("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&t.styleName==="Esri2DPointSymbolsStyle"?U2e(n,e,r):LB(t,e,r).then(l=>hU(fr(l),n,e,i,Uge,r))}function uU(t,e){return e.items.find(i=>i.name===t)}function hU(t,e,i,r,n,l){var P;const d=i&&i.portal!=null?i.portal:ts.getDefault(),y={portal:d,url:Ui(t.baseUrl),origin:"portal-item"},b=uU(e,t.data);if(!b){const D=`The symbol name '${e}' could not be found`;return Promise.reject(new se("symbolstyleutils:symbol-name-not-found",D,{symbolName:e}))}let x=_h(n(b,r),y),$=((P=b.thumbnail)==null?void 0:P.href)??null;const E=b.thumbnail&&b.thumbnail.imageData;B2e()&&(x=yP(x)??"",$=yP($));const k={portal:d,url:Ui(EM(x)),origin:"portal-item"};return G$(x,l).then(D=>{const L=r==="cimRef"?DB(D.data):D.data,N=vB(L,k);if(N&&Fl(N)){if($){const B=_h($,y);N.thumbnail=new ud({url:B})}else E&&(N.thumbnail=new ud({url:`data:image/png;base64,${E}`}));t.styleUrl?N.styleOrigin=new Qy({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(N.styleOrigin=new Qy({portal:i.portal,styleName:t.styleName,name:e}))}return N})}function U2e(t,e,i){const r=qge.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:ts.getDefault();return G$(r,i).then(l=>{const d=DB(l.data);return vB(d,{portal:n,url:Ui(EM(r)),origin:"portal-item"})})}const q2e=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:hU,getStyleItemFromStyle:uU,resolveWebStyleSymbol:lU},Symbol.toStringTag,{value:"Module"})),Yc=gr.size,zb=gr.maxSize,uT=gr.maxOutlineSize,mP=gr.lineWidth,iM=gr.tallSymbolWidth;function s0(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=Rr(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,uT),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?S$(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function H2e(t,e){var r,n,l;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return D0e(e);const i=It("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const d=await lU(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch(()=>null);if(d&&"thumbnail"in d&&((l=d.thumbnail)!=null&&l.url))return d.thumbnail.url}return i}function sx(t,e=1){const i=t.a,r=lT(t),n=r.h,l=r.s/e,d=100-(100-r.v)/e,{r:y,g:b,b:x}=Zm({h:n,s:l,v:d});return[y,b,x,i]}function x2(t){return t.type==="water"?t.color==null?null:t.color:t.material==null||t.material.color==null?null:t.material.color}function Qt(t,e=0){const i=x2(t);if(!i){if(t.type==="fill")return null;const n=P0e.r,l=gh(n,e);return[l,l,l,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=gh(r[n],e);return r}async function cU(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await k0e(It(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function gP(t){return t.outline?s0(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function dU(t,e){const i=x2(t);if(!i)return null;let r="rgba(";return r+=gh(i.r,e)+",",r+=gh(i.g,e)+",",r+=gh(i.b,e)+",",r+i.a+");"}function rM(t,e){const i=dU(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?Rr(t.size):.75,uT),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?S$(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?Rr(2):t.join:null}:{}}function yv(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function W2e(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function J2e(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const d=e,y=e;switch(t.resource&&t.resource.primitive||fte){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Qt(t,0),stroke:s0(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[0,0]},{command:"L",values:[d,0]},{command:"L",values:[d,y]},{command:"Z",values:[]}]},fill:Qt(t,0),stroke:s0(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,y]},{command:"Z",values:[]}]},fill:Qt(t,0),stroke:s0(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*d,0]},{command:"L",values:[.5*d,y]},{command:"M",values:[0,.5*y]},{command:"L",values:[d,.5*y]}]},stroke:gP(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[d,y]},{command:"M",values:[d,0]},{command:"L",values:[0,y]}]},stroke:gP(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*y]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,.5*y]},{command:"L",values:[.5*d,y]},{command:"Z",values:[]}]},fill:Qt(t,0),stroke:s0(t)})}break}case"object":switch(t.resource&&t.resource.primitive||vte){case"cone":{const n=yv(Qt(t,0),Qt(t,-.6),i?iM:e),l=r2e(e,i);r.push({shape:l[0],fill:n}),r.push({shape:l[1],fill:n});break}case"inverted-cone":{const n=Qt(t,0),l=yv(n,Qt(t,-.6),e),d=s2e(e);r.push({shape:d[0],fill:l}),r.push({shape:d[1],fill:n});break}case"cube":{const n=t2e(e,i);r.push({shape:n[0],fill:Qt(t,0)}),r.push({shape:n[1],fill:Qt(t,-.3)}),r.push({shape:n[2],fill:Qt(t,-.5)});break}case"cylinder":{const n=yv(Qt(t,0),Qt(t,-.6),i?iM:e),l=i2e(e,i);r.push({shape:l[0],fill:n}),r.push({shape:l[1],fill:n}),r.push({shape:l[2],fill:Qt(t,0)});break}case"diamond":{const n=n2e(e);r.push({shape:n[0],fill:Qt(t,-.3)}),r.push({shape:n[1],fill:Qt(t,0)}),r.push({shape:n[2],fill:Qt(t,-.3)}),r.push({shape:n[3],fill:Qt(t,-.7)});break}case"sphere":{const n=yv(Qt(t,0),Qt(t,-.6));n.x1=0,n.y1=0,n.x2=.25*e,n.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:n});break}case"tetrahedron":{const n=o2e(e);r.push({shape:n[0],fill:Qt(t,-.3)}),r.push({shape:n[1],fill:Qt(t,0)}),r.push({shape:n[2],fill:Qt(t,-.6)});break}}break}return r}function q_(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?Rr(e):null}function Y2e(t){return t.type==="icon"?"multiply":"tint"}function K2e(t,e){const i=q_(e),r=e!=null&&e.maxSize?Rr(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,l=t.symbolLayers,d=[];let y=0,b=0;const x=l.at(-1);let $;return x&&x.type==="icon"&&($=x.size&&Rr(x.size)),l.forEach(E=>{var D;if(E.type!=="icon"&&E.type!=="object")return;const k=E.type==="icon"?E.size&&Rr(E.size):0,P=i||k?Math.ceil(Math.min(i||k,r||zb)):Yc;if(E&&E.resource&&E.resource.href){const L=H2e(t,E).then(N=>{const B=E.get("material.color"),W=Y2e(E);return V2e(N,P,B,W,n)}).then(N=>{const B=N.width,W=N.height;return y=Math.max(y,B),b=Math.max(b,W),[{shape:{type:"image",x:0,y:0,width:B,height:W,src:N.url},fill:null,stroke:null}]});d.push(L)}else{let L=P;E.type==="icon"&&$&&i&&(L=P*(k/$));const N=(e==null?void 0:e.symbolConfig)==="tall"||((D=e==null?void 0:e.symbolConfig)==null?void 0:D.isTall)||E.type==="object"&&W2e(E);y=Math.max(y,N?iM:L),b=Math.max(b,L),d.push(Promise.resolve(J2e(E,L,N)))}}),ws(d).then(E=>{const k=[];return E.forEach(P=>{P.value?k.push(P.value):P.error&&ge.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",P.error)}),U_(k,[y,b],{node:e&&e.node,scale:!1,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})})}function Z2e(t,e){const i=t.symbolLayers,r=[],n=L0e(t),l=q_(e),d=(e&&e.maxSize?Rr(e.maxSize):null)||uT;let y,b=0,x=0;return i.forEach(($,E)=>{if(!$||$.type!=="line"&&$.type!=="path")return;const k=[];switch($.type){case"line":{const P=rM($,0);if(P==null)break;const D=P&&P.width||0;E===0&&(y=D);const L=Math.min(l||D,d),N=E===0?L:l?L*(D/y):L,B=N>mP/2?2*N:mP;x=Math.max(x,N),b=Math.max(b,B),P.width=N,k.push({shape:{type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[b,.5*x]}]},stroke:P});break}case"path":{const P=Math.min(l||Yc,d),D=Qt($,0),L=Qt($,-.2),N=dU($,-.4),B=N?{color:N,width:1}:{};if($.profile==="quad"){const W=$.width,H=$.height,Y=Xwe(W&&H?W/H:1,H===0,W===0),ie={...B,join:"bevel"};k.push({shape:Y[0],fill:L,stroke:ie}),k.push({shape:Y[1],fill:L,stroke:ie}),k.push({shape:Y[2],fill:D,stroke:ie})}else k.push({shape:tM.pathSymbol3DLayer[0],fill:L,stroke:B}),k.push({shape:tM.pathSymbol3DLayer[1],fill:D,stroke:B});x=Math.max(x,P),b=x}}r.push(k)}),Promise.resolve(U_(r,[b,x],{node:e&&e.node,scale:n,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function X2e(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=q_(e),l=e&&e.maxSize?Rr(e.maxSize):null,d=n||Yc,y=[];let b=0,x=0,$=!1;for(let E=0;E<r.length;E++){const k=r.at(E),P=[];if(i&&k.type!=="fill")continue;const D=tM.fill[0];switch(k.type){case"fill":{const L=s0(k),N=Math.min(d,l||zb);b=Math.max(b,N),x=Math.max(x,N),$=!0;let B=Qt(k,0);const W="pattern"in k?k.pattern:null,H=x2(k);!i&&W!=null&&W.type==="style"&&W.style!=="solid"&&H&&(B=await cU(W,H)),P.push({shape:D,fill:B,stroke:L});break}case"line":{const L=rM(k,0);if(L==null)break;const N={stroke:L,shape:D};b=Math.max(b,Yc),x=Math.max(x,Yc),P.push(N);break}case"extrude":{const L={join:"round",width:1,...rM(k,-.4)},N=Qt(k,0),B=Qt(k,-.2),W=Math.min(d,l||zb),H=Qwe(W);L.width=1,P.push({shape:H[0],fill:B,stroke:L}),P.push({shape:H[1],fill:B,stroke:L}),P.push({shape:H[2],fill:N,stroke:L});const Y=Yc,ie=.7*Yc+.5*W;b=Math.max(b,Y),x=Math.max(x,ie);break}case"water":{const L=fr(x2(k)),N=sx(L),B=sx(L,2),W=sx(L,3),H=e2e();$=!0,P.push({shape:H[0],fill:N}),P.push({shape:H[1],fill:B}),P.push({shape:H[2],fill:W});const Y=Math.min(d,l||zb);b=Math.max(b,Y),x=Math.max(x,Y);break}}y.push(P)}return U_(y,[b,x],{node:e&&e.node,scale:$,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function Q2e(t,e){if(t.symbolLayers.length===0)return Promise.reject(new se("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return K2e(t,e);case"line-3d":return Z2e(t,e);case"polygon-3d":case"mesh-3d":return X2e(t,e)}return Promise.reject(new se("symbolPreview: swatchInfo3D","symbol not supported."))}const e_e=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:cU,getSizeFromOptions:q_,getSymbolLayerFill:Qt,previewSymbol3D:Q2e},Symbol.toStringTag,{value:"Module"}));let sp=null;const vP=[255,255,255];function bP(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function R7e(t,e,i){const{backgroundColor:r,outline:n,dotSize:l}=t,d=i&&i.swatchSize||gr.size,y=.8,b=Math.round(d*d/l**2*y),x=window.devicePixelRatio,$=document.createElement("canvas"),E=d*x;$.width=E,$.height=E,$.style.width=$.width/x+"px",$.style.height=$.height/x+"px";const k=$.getContext("2d");if(r&&(k.fillStyle=r.toCss(!0),k.fillRect(0,0,E,E),k.fill()),k.fillStyle=(e==null?void 0:e.toCss(!0))??"",sp&&sp.length/2===b)for(let D=0;D<2*b;D+=2){const L=sp[D],N=sp[D+1];k.fillRect(L,N,l*x,l*x),k.fill()}else{sp=[];for(let D=0;D<2*b;D+=2){const L=bP(0,E),N=bP(0,E);sp.push(L,N),k.fillRect(L,N,l*x,l*x),k.fill()}}n&&(n.color&&(k.strokeStyle=n.color.toCss(!0)),k.lineWidth=n.width,k.strokeRect(0,0,E,E));const P=new Image(d,d);return P.src=$.toDataURL(),P.ariaLabel=(i==null?void 0:i.ariaLabel)??null,P.alt=(i==null?void 0:i.ariaLabel)??"",P}function j7e(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,l=r/n,d=[],y=x$(e.outline);(y==null?void 0:y.width)!=null&&(y.width*=2),(y||e.backgroundColor)&&d.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:y,offset:[0,0]});const b=e.values,x=b&&b.length===n&&b.reduce((D,L)=>D+L,0)===100,$=[0];for(let D=0;D<n;D++){let L=null;x&&(L=b[D]*r/100,$.push(L+$[D])),d.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(L??l)/2} ${r}`,dashoffset:"-"+(x?$[D]/2:D*(l/2)),color:t[D]},offset:[0,0]})}let E=null;const k=2*i+((y==null?void 0:y.width)||0),P=e.holePercentage;if(P){y&&d.push({shape:{type:"circle",cx:i,cy:i,r:i*P},fill:null,stroke:y,offset:[0,0]});const D=k/2;E=[[{shape:{type:"circle",cx:D,cy:D,r:D},fill:vP,stroke:y?{...y,color:vP}:null,offset:[0,0]},{shape:{type:"circle",cx:D,cy:D,r:i*P},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return U_([d],[k,k],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:E,rotation:-90,ariaLabel:e.ariaLabel})}function F7e(t,e={}){const n=e.align==="horizontal",l=n?75:24,d=n?24:75,y=e.width??l,b=e.height??d,x=e.gradient??!0,$=window.devicePixelRatio,E=y*$,k=b*$,P=document.createElement("canvas");P.width=E,P.height=k,P.ariaLabel=e.ariaLabel??null,P.style.width=`${y}px`,P.style.height=`${b}px`;const D=P.getContext("2d"),L=n?E:0,N=n?0:k;if(x){const W=D.createLinearGradient(0,0,L,N),H=t.length,Y=H===1?0:1/(H-1);t.forEach((ie,ne)=>W.addColorStop(ne*Y,ie.toString())),D.fillStyle=W,D.fillRect(0,0,E,k)}else{const W=n?E/t.length:E,H=n?k:k/t.length;let Y=0,ie=0;for(const ne of t)D.fillStyle=ne.toString(),D.fillRect(Y,ie,W,H),Y=n?Y+W:0,ie=n?0:ie+H}const B=document.createElement("div");return B.style.width=`${y}px`,B.style.height=`${b}px`,t_e(B,e==null?void 0:e.effectList),B.appendChild(P),B}function t_e(t,e){if(!e)return;t.style.filter=aV(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function i_e(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await le(()=>import("./previewWebStyleSymbol-046bc04d.js"),[]);return i(t,i_e,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await le(()=>Promise.resolve().then(()=>e_e),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await le(()=>import("./previewSymbol2D-4039f84a.js"),["assets/previewSymbol2D-4039f84a.js","assets/fontUtils-e5a6d9a4.js"]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await le(()=>import("./previewCIMSymbol-b5ee5a73.js"),["assets/previewCIMSymbol-b5ee5a73.js","assets/cimAnalyzer-6c67340f.js","assets/fontUtils-e5a6d9a4.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-9bd633e4.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-98deeb3c.js","assets/floatRGBA-6de551b1.js","assets/CIMResourceManager-00eb191d.js","assets/Rasterizer-e647197f.js","assets/rasterizingUtils-09460abf.js","assets/imageutils-42b20626.js"]);return i(t,e)}default:return}}function pU(t){return t&&"opacity"in t?t.opacity*pU(t.parent):1}async function r_e(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=pU(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const H=t.symbol.type==="web-style"?await Y0e(t.symbol,{...e,cache:e!=null?e.webStyleCache:null}):t.symbol.clone();return x5(H,null,n),H}const l=(e!=null?e.renderer:null)??(r&&"renderer"in r?r.renderer:null);let d=l&&"getSymbolAsync"in l?await l.getSymbolAsync(t,e):null;if(!d)return;if(d=d.type==="web-style"?await d.fetchSymbol({...e,cache:e!=null?e.webStyleCache:null}):d.clone(),!(l&&"visualVariables"in l&&l.visualVariables&&l.visualVariables.length))return x5(d,null,n),d;if("arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&(e==null||e.arcade==null)){const H={...e};H.arcade=await Rl(),e=H}const{getColor:y,getOpacity:b,getAllSizes:x,getRotationAngle:$}=await le(()=>Promise.resolve().then(()=>D_),void 0),E=[],k=[],P=[],D=[];for(const H of l.visualVariables)switch(H.type){case"color":E.push(H);break;case"opacity":k.push(H);break;case"rotation":D.push(H);break;case"size":H.target||P.push(H)}const L=!!E.length&&E[E.length-1],N=L?y(L,t,e):null,B=!!k.length&&k[k.length-1];let W=B?b(B,t,e):null;if(n!=null&&(W=W!=null?W*n:n),x5(d,N,W),P.length){const H=x(P,t,e);await W0e(d,H)}for(const H of D)J0e(d,$(H,t,e),H.axis);return d}function wP(t){return t&&typeof t.highlight=="function"}const jy=ze.ofType({key:"type",defaultKeyValue:"button",base:ef,typeMap:{button:tf,toggle:t_}}),s_e=()=>[rd.clone()],n_e=()=>[i0.clone(),Qu.clone()];let bt=class extends BN(BG){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Fs,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new jy,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new xs({symbol:new Rh({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([this.on("view-change",()=>this._autoClose()),me(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),me(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),me(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state},e=>this._animationStateChange(e)),me(()=>this.location,e=>this._locationChange(e)),me(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),me(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),me(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),me(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>Uwe({event:e,viewModel:this,view:this.view})),Hn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Rd),me(()=>{var e,i;return[this.features,(e=this.view)==null?void 0:e.map,(i=this.view)==null?void 0:i.spatialReference]},()=>this._updateFeatureVMs()),me(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Hn(()=>!this.visible,()=>this.browseClusterEnabled=!1),me(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new jy;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:l,selectedFeature:d}=this,y=l?r.concat(i):i,b=d&&(typeof d.getEffectivePopupTemplate=="function"&&d.getEffectivePopupTemplate(n)||d.popupTemplate),x=b&&b.actions,$=b&&b.overwriteActions?x:x?x.concat(y):y;return $&&$.filter(Boolean).forEach(E=>e.add(E)),e}get defaultActions(){const e=this._get("defaultActions")||new jy;return e.removeAll(),e.addMany(Jc(this.selectedFeature)?n_e():s_e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:l}=this,d=n&&i.length;d&&r&&l===-1?this.selectedFeatureIndex=0:d&&l!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(e){var n,l,d;let i=e;const r=(l=(n=this.view)==null?void 0:n.spatialReference)==null?void 0:l.isWebMercator;e&&((d=e==null?void 0:e.spatialReference)!=null&&d.isWGS84)&&r&&(i=ph(e)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(i=>{this._pendingPromises.add(i);const r=l=>{this._pendingPromises.has(i)&&this._updateFeatures(l),this._updatePendingPromises(i)},n=()=>this._updatePendingPromises(i);i.then(r,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;e=isNaN(e)||e<-1||!i?-1:(e+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,i=UG(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new se("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){const{view:r}=this;if(!r||!e)throw new se("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const l of n)delete i[l];this.set(i)}triggerAction(e){const i=this.allActions.at(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Kwe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?Jc(i)?(await Jwe(this),await Ywe(this)):ge.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):ge.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(e){this.autoOpenEnabled&&this._fetchFeaturesAndOpen(e)}_animationStateChange(e){this.zoomToLocation||(rd.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i;const e=(i=this.view)==null?void 0:i.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Jc(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r}=this;r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:l}=this;if(r===null)return;const d=((r-1)*n+i)%i,y=d+n;l.slice(d,y).forEach((b,x)=>{b&&!b.graphic&&(b.graphic=e[d+x])})}async _selectedFeatureChange(e){const{location:i,updateLocationEnabled:r,view:n}=this;if(e&&n){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Jc(e)?void 0:(e.symbol=await r_e(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));!r&&i||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{var d;const l=(d=n.center)==null?void 0:d.clone();l&&(this.location=l)}):this.location=qG(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(i=>{const{clientOnlyGraphics:r,promisesPerLayerView:n}=i,l=Promise.resolve(r),d=n.map(y=>y.promise);this.promises=[l,...d]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r}=this;if(Jc(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const n=r.slice(0),l=[];i.forEach((d,y)=>{var x,$;if(!d)return;let b=null;if(n.some((E,k)=>(E&&E.graphic===d&&(b=E,n.splice(k,1)),!!b)),b)l[y]=b;else{const E=new nT({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(x=this.view)==null?void 0:x.spatialReference,graphic:d===e?d:null,map:($=this.view)==null?void 0:$.map,view:this.view});l[y]=E}}),n.forEach(d=>d&&!d.destroyed&&d.destroy()),this._set("featureViewModels",l)}_getScreenPoint(e){const{view:i}=this;return i&&e&&typeof i.toScreen=="function"?i.toScreen(e):null}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,i){this._cancelFetchingFeatures();const r=new AbortController,{signal:n}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const l=this.fetchFeatures(e,{signal:n,event:i});return l.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),l}_fetchFeaturesAndOpen(e){const{screenPoint:i,mapPoint:r}=e,{view:n}=this;this._fetchFeaturesWithController(i,e).then(l=>{const{clientOnlyGraphics:d,promisesPerLayerView:y,location:b}=l,x=[Promise.resolve(d),...y.map($=>$.promise)];return n!=null&&n.popup&&"open"in n.popup&&n.popup.open({location:b||r,promises:x}),l})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightTarget(e,i){const r=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||Zwe:null,n=e.attributes;return n&&r&&n[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:i,view:r,activeFeature:n,visible:l}=this;if(!(n&&r&&i&&l))return;const d=this._getHighlightLayer(n);if(!(d&&d instanceof Jy))return;const y=this._getLayerView(r,d);this._highlightActiveFeaturePromise=y;const b=await y;if(!(b&&wP(b)&&this._highlightActiveFeaturePromise===y&&this.activeFeature&&this.highlightEnabled))return;const x=b.highlight(this._getHighlightTarget(n,d));this._handles.add(x,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:i,highlightEnabled:r,view:n,visible:l}=this;if(!(i&&n&&r&&l))return;const d=this._getHighlightLayer(i);if(!(d&&d instanceof Jy))return;const y=this._getLayerView(n,d);this._highlightSelectedFeaturePromise=y;const b=await y;if(!(b&&wP(b)&&this._highlightSelectedFeaturePromise===y&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const x=b.highlight(this._getHighlightTarget(i,d));this._handles.add(x,e)}_updateFeatures(e){const{features:i}=this;if(!e||!e.length)return;if(!i.length)return void(this.features=e);const r=e.filter(n=>!i.includes(n));this.features=i.concat(r)}};g([S()],bt.prototype,"featurePage",void 0),g([S()],bt.prototype,"isLoadingFeature",null),g([S({type:jy})],bt.prototype,"actions",void 0),g([S({readOnly:!0})],bt.prototype,"active",null),g([S()],bt.prototype,"activeFeature",void 0),g([S({readOnly:!0})],bt.prototype,"allActions",null),g([S({type:Boolean})],bt.prototype,"defaultPopupTemplateEnabled",void 0),g([S()],bt.prototype,"autoCloseEnabled",void 0),g([S()],bt.prototype,"autoOpenEnabled",void 0),g([S()],bt.prototype,"browseClusterEnabled",void 0),g([S()],bt.prototype,"content",void 0),g([S({type:jy,readOnly:!0})],bt.prototype,"defaultActions",null),g([S({readOnly:!0})],bt.prototype,"featureCount",null),g([S()],bt.prototype,"features",null),g([S()],bt.prototype,"featuresPerPage",void 0),g([S()],bt.prototype,"featureMenuOpen",void 0),g([S()],bt.prototype,"featureViewModelAbilities",void 0),g([S({readOnly:!0})],bt.prototype,"featureViewModels",void 0),g([S()],bt.prototype,"highlightEnabled",void 0),g([S()],bt.prototype,"includeDefaultActions",void 0),g([S({type:lt})],bt.prototype,"location",null),g([S({readOnly:!0})],bt.prototype,"pendingPromisesCount",null),g([S({readOnly:!0})],bt.prototype,"selectedClusterBoundaryFeature",void 0),g([S({readOnly:!0})],bt.prototype,"waitingForResult",null),g([S({readOnly:!0})],bt.prototype,"promiseCount",null),g([S()],bt.prototype,"promises",null),g([S({value:null,readOnly:!0})],bt.prototype,"selectedFeature",null),g([S({value:-1})],bt.prototype,"selectedFeatureIndex",null),g([S({readOnly:!0})],bt.prototype,"selectedFeatureViewModel",null),g([S({readOnly:!0})],bt.prototype,"state",null),g([S()],bt.prototype,"title",void 0),g([S()],bt.prototype,"updateLocationEnabled",void 0),g([S()],bt.prototype,"view",void 0),g([S()],bt.prototype,"visible",void 0),g([S()],bt.prototype,"zoomFactor",void 0),g([S()],bt.prototype,"zoomToLocation",void 0),g([S()],bt.prototype,"centerAtLocation",null),bt=g([J("esri.widgets.Popup.PopupViewModel")],bt);const fU=bt,_P="selected-index",o_e=0,xP="popup-spinner",SP={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},MP="esri-popup";function Ja(t,e){return e===void 0?`${MP}__${t}`:`${MP}__${t}-${e}`}const $P={closeButton:!0,featureNavigation:!0};let qe=class extends NG(kr){constructor(t,e){super(t,e),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Fs,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=h$(()=>this._displaySpinner(),o_e),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new ze,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new fU,this.visibleElements={...$P},this._handleOpenRelatedFeature=i=>{this._openRelatedFeature(i)},this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,me(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),me(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),me(()=>{var i,r,n,l,d,y;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(l=(n=this.viewModel)==null?void 0:n.view)==null?void 0:l.size,(d=this.viewModel)==null?void 0:d.active,(y=this.viewModel)==null?void 0:y.location,this.alignment]},()=>this.reposition()),me(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),me(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),me(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i??!1,r??!1)),me(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),me(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),me(()=>{var i,r,n,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(l=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:l.state]},()=>this._setTitleFromFeatureWidget()),me(()=>{var i,r,n,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(l=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:l.state]},()=>this._setContentFromFeatureWidget()),Hn(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Rs(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),st),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),Rs(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),me(()=>{var i,r,n,l;return[(r=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:r.state,(l=(n=this._activeFlowItemWidget)==null?void 0:n.viewModel)==null?void 0:l.title]},()=>this.scheduleRender())])}loadDependencies(){return uf({action:()=>le(()=>import("./calcite-action-b004a5ea.js"),["assets/calcite-action-b004a5ea.js","assets/action-6a0804ca.js","assets/guid-0d265cb2.js","assets/loader-11488a26.js","assets/loadable-f00d0b8b.js","assets/t9n-f5597cda.js","assets/observers-279029a9.js","assets/icon-0e13ae13.js"]),flow:()=>le(()=>import("./calcite-flow-782ea313.js"),["assets/calcite-flow-782ea313.js","assets/observers-279029a9.js","assets/loadable-f00d0b8b.js"]),"flow-item":()=>le(()=>import("./calcite-flow-item-d7877a3c.js"),["assets/calcite-flow-item-d7877a3c.js","assets/loader-11488a26.js","assets/guid-0d265cb2.js","assets/loadable-f00d0b8b.js","assets/t9n-f5597cda.js","assets/observers-279029a9.js","assets/action-6a0804ca.js","assets/icon-0e13ae13.js","assets/FloatingArrow-43fbb875.js","assets/debounce-fe65f68f.js","assets/openCloseComponent-4a028ddf.js","assets/scrim-be67464a.js"]),icon:()=>le(()=>import("./calcite-icon-0ebdbba9.js"),["assets/calcite-icon-0ebdbba9.js","assets/icon-0e13ae13.js","assets/observers-279029a9.js"]),tooltip:()=>le(()=>import("./calcite-tooltip-62ad0877.js"),["assets/calcite-tooltip-62ad0877.js","assets/FloatingArrow-43fbb875.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-4a028ddf.js"])})}initialize(){this.addHandles(this._displaySpinnerThrottled)}destroy(){var t,e;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(t=this._handles)==null||t.destroy(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:t,viewModel:e}=this;if(!t)return!!(e!=null&&e.content);const i=t.viewModel;if(i!=null&&i.waitingForContent||(i==null?void 0:i.state)==="error")return!0;const r=i==null?void 0:i.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:t}=this;return t.at(-1)??null}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}set actionsMenuOpen(t){this._set("actionsMenuOpen",!!t)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get autoOpenEnabled(){return Gy(ge.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled}set autoOpenEnabled(t){Gy(ge.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||SP}set dockOptions(t){var y,b;const e={...SP},i=(b=(y=this.viewModel)==null?void 0:y.view)==null?void 0:b.breakpoints,r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...e,...t},l={...e.breakpoint,...r},{breakpoint:d}=n;typeof d=="object"?n.breakpoint={...l,...d}:d&&(n.breakpoint=l),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,visibleElements:e,headingLevel:i,_flowItems:r}=this,{selectedFeatureViewModel:n}=this.viewModel,l={...e,title:!1};return n?(t?(t.viewModel=n,t.visibleElements=l):this._feature=new zG({flowItems:r,headingLevel:i+1,viewModel:n,visibleElements:l}),this._feature):null}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}castVisibleElements(t){return{...$P,...t}}blur(){const{active:t}=this.viewModel;t||ge.getLogger(this).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,e){return this.viewModel.fetchFeatures(t,e)}focus(){const{active:t}=this.viewModel;t||ge.getLogger(this).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(t){var n,l;this._handles.remove(_P);const e=!!t&&!!t.featureMenuOpen,i=!!t&&!!t.actionsMenuOpen,r={collapsed:!!t&&!!t.collapsed,actionsMenuOpen:i,featureMenuOpen:e};((l=(n=this.viewModel)==null?void 0:n.view)==null?void 0:l.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(t),this._shouldFocus(t),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){var D,L,N,B;const{actionsMenuOpen:t,dockEnabled:e,featureMenuVisible:i,dividedActions:r,currentAlignment:n,currentDockPosition:l}=this,{active:d}=this.viewModel,{menuActions:y}=r,b=d&&y.length>1&&t,x=d&&e,$=d&&!e,E=(L=(D=this.selectedFeature)==null?void 0:D.layer)==null?void 0:L.title,k=(B=(N=this.selectedFeature)==null?void 0:N.layer)==null?void 0:B.id,P={[_e.alignTopCenter]:n==="top-center",[_e.alignBottomCenter]:n==="bottom-center",[_e.alignTopLeft]:n==="top-left",[_e.alignBottomLeft]:n==="bottom-left",[_e.alignTopRight]:n==="top-right",[_e.alignBottomRight]:n==="bottom-right",[_e.isDocked]:x,[_e.shadow]:$,[_e.isDockedTopLeft]:l==="top-left",[_e.isDockedTopCenter]:l==="top-center",[_e.isDockedTopRight]:l==="top-right",[_e.isDockedBottomLeft]:l==="bottom-left",[_e.isDockedBottomCenter]:l==="bottom-center",[_e.isDockedBottomRight]:l==="bottom-right",[_e.isFeatureMenuOpen]:i,[_e.isActionsMenuOpen]:b};return X("div",{class:this.classes(_e.base,P),role:"presentation","data-layer-title":E,"data-layer-id":k,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},d?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return X("span",{"aria-hidden":"true",class:this.classes(_e.icon,_e.iconLoading,_e.rotating)})}renderNavigationLoading(){const{messagesCommon:t}=this;return this.viewModel.pendingPromisesCount?X("div",{key:Ja("loading-container"),role:"presentation",class:_e.loadingContainer,"aria-label":t.loading,title:t.loading},this.renderLoadingIcon()):null}renderPreviousButton(){const{messages:t}=this;return X("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(_e.button,_e.paginationPrevious),"aria-label":t.previous,title:t.previous},X("calcite-icon",{icon:"chevron-left",scale:"s",class:_e.paginationIcon}))}renderNextButton(){const{messages:t}=this;return X("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(_e.button,_e.paginationNext),"aria-label":t.next,title:t.next},X("calcite-icon",{icon:"chevron-right",scale:"s",class:_e.paginationIcon}))}renderFeatureMenuButton(){const{featureMenuOpen:t,featureMenuId:e,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return X("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:_e.featureMenuButton,"aria-haspopup":"true","aria-controls":e,"aria-expanded":t.toString(),"aria-label":i.menu,title:i.menu},X("calcite-icon",{icon:"list-bullet",scale:"s",class:_e.featureMenuButtonIcon}),this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNextButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton()]:[]}renderDockIcon(){const{dockEnabled:t}=this,e=this._wouldDockTo(),i={[_e.iconUndock]:t,[_e.iconDock]:!t,[_e.iconDockToRight]:!t&&(e==="top-right"||e==="bottom-right"),[_e.iconDockToLeft]:!t&&(e==="top-left"||e==="bottom-left"),[_e.iconDockToTop]:!t&&e==="top-center",[_e.iconDockToBottom]:!t&&e==="bottom-center"};return X("span",{"aria-hidden":"true",class:this.classes(i,_e.icon)})}renderDockButton(){var n,l,d;const{dockEnabled:t,messages:e}=this,i=(l=(n=this.viewModel)==null?void 0:n.view)==null?void 0:l.widthBreakpoint,r=t?e.undock:e.dock;return i!=="xsmall"&&((d=this.dockOptions)!=null&&d.buttonEnabled)?X("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(_e.button,_e.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:t}=this.viewModel,{titleId:e,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,l={[_e.headerContainerButton]:i},d=X(m$,{level:this.headingLevel,class:_e.headerTitle,innerHTML:t??""}),y=i?X("button",{key:`${t}--collapsible`,id:e,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_e.headerContainer,l),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},d,X("calcite-icon",{class:_e.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):X("div",{key:t??"title",id:e,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_e.headerContainer,l)},d);return t?y:null}renderCloseIcon(){return X("span",{"aria-hidden":"true",class:this.classes(_e.icon,_e.iconClose)})}renderCloseButton(){const{visibleElements:t,messagesCommon:e}=this;return t.closeButton?X("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:_e.button,"aria-label":e.close,title:e.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return X("header",{class:_e.header},this.renderTitle(),X("div",{class:_e.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:t,hasContent:e,contentCollapsed:i,_flowItems:r}=this,{content:n}=this.viewModel,l=r.toArray(),d={[_e.contentHasFlows]:!!l.length};return e&&!i?X("div",{key:n??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:this.classes(_e.content,d)},X("calcite-flow",{bind:this},X("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Ow,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),l.map(y=>this.renderFlowItem(y))),l.map(y=>this.renderFlowItemTooltips(y))):null}renderFlowItem(t){const{messages:e}=this,i=Uw(),r="graphic"in t&&!t.isTable;return X("calcite-flow-item",{bind:this,class:this.classes({[_e.calciteThemeDark]:!i,[_e.calciteThemeLight]:i}),heading:t.title??"",description:this._getFlowItemDescription(t),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${t.viewModel.uid}`},X("calcite-action",{class:_e.actionExit,icon:"move-up",label:e==null?void 0:e.exitRelatedRecords,text:e==null?void 0:e.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:n=>this._storeExitRelatedRecordsAction(t,n),onclick:this._destroyFlowItemWidgets}),r?X("calcite-action",{class:_e.actionSelectFeature,icon:"zoom-to-object",label:e==null?void 0:e.selectFeature,text:e==null?void 0:e.selectFeature,slot:"header-actions-end",bind:this,afterCreate:n=>this._storeFeatureSelectionAction(t,n),onclick:()=>this._handleOpenRelatedFeature(t)}):null,X("div",{class:this.classes(_e.contentFlowItem,{[_e.calciteThemeDark]:i,[_e.calciteThemeLight]:!i})},t.render()))}renderFlowItemTooltips(t){const{messages:e,_exitRelatedRecordsActions:i,_featureSelectionActions:r}=this,n=Uw(),l=r.get(t);return[X("calcite-tooltip",{class:this.classes({[_e.calciteThemeDark]:!n,[_e.calciteThemeLight]:n}),key:`exit-related-records-tooltip-${t.viewModel.uid}`,label:e==null?void 0:e.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(t),placement:"top"},e==null?void 0:e.exitRelatedRecords),l?X("calcite-tooltip",{class:this.classes({[_e.calciteThemeDark]:!n,[_e.calciteThemeLight]:n}),key:`select-related-record-tooltip-${t.viewModel.uid}`,label:e==null?void 0:e.selectFeature,overlayPositioning:"fixed",referenceElement:l,placement:"top"},e==null?void 0:e.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:t,actionsMenuButtonId:e,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,l=i?n.close:n.open,{menuActions:d}=r;return d.length?X("div",{key:Ja("actions-menu-button"),class:this.classes(_e.button,_e.actionsMenuButton),role:"button",id:e,"aria-haspopup":"true","aria-controls":i?t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":l,title:l},X("span",{"aria-hidden":"true",class:_e.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:t,actionsMenuButtonId:e,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?X("ul",{id:t,role:"menu","aria-labelledby":e,key:Ja("actions"),class:_e.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(l=>this.renderAction({action:l,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:t}=this.dividedActions;return t.length?t.toArray().map(e=>this.renderAction({action:e,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:t,menuActions:e}=this.dividedActions,i=!!t.length,r=!!e.length;return i||r?X("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:_e.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?X("section",{key:Ja("navigation"),class:this.classes(_e.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:t,dividedActions:e}=this,{inlineActions:i,menuActions:r}=e,n=!!i.length,l=!!r.length,d={[_e.footerHasPagination]:t,[_e.footerHasActions]:n,[_e.footerHasActionsMenu]:l};return t||n?X("div",{key:Ja("feature-buttons"),class:this.classes(_e.footer,d)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:t}=this,{featureViewModels:e,isLoadingFeature:i}=this.viewModel,r=To(t.selectedFeatures,{total:e.length});return X("section",{key:Ja("menu"),class:_e.featureMenu},X("strong",{class:_e.featureMenuHeader},r),X("nav",{bind:this,class:_e.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Ow},this.renderFeatureMenu(),X("div",{class:_e.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?X("div",{class:_e.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:X("div",{key:Ja("pointer"),class:_e.pointer,role:"presentation"},X("div",{class:this.classes(_e.pointerDirection,_e.shadow)}))}renderMainContainer(){const{dockEnabled:t,currentAlignment:e,currentDockPosition:i,titleId:r,contentId:n,collapsible:l,hasContent:d,contentCollapsed:y,visibleElements:b}=this,{title:x}=this.viewModel,$=e==="bottom-left"||e==="bottom-center"||e==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",E=e==="top-left"||e==="top-center"||e==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",k={[_e.shadow]:t,[_e.isCollapsible]:l,[_e.isCollapsed]:y};return X("div",{class:this.classes(_e.main,_e.widget,k),tabIndex:b.closeButton?void 0:-1,role:"dialog","aria-live":"polite","aria-labelledby":x?r:"","aria-describedby":d&&!y?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},$?this.renderFooter():null,$?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),E?this.renderFooter():null,E?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=(e=this.viewModel)==null?void 0:e.content;return t?typeof t=="string"?X("div",{class:_i.contentNode,key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(t){return X("span",{key:"text",class:_e.actionText},t)}renderActionCalciteIcon(t,e){return X("calcite-icon",{scale:"s",key:`calcite-icon-${e}`,icon:t,class:_e.icon})}renderActionIcon(t){const e=this._getActionClass(t),i=this._getActionImage(t),r={[_e.iconLoading]:t.active,[_e.rotating]:t.active,[_e.icon]:!!e,[_e.actionImage]:!t.active&&!!i};return e&&(r[e]=!t.active),X("span",{key:"icon","aria-hidden":"true",class:this.classes(_e.icon,r),styles:this._getIconStyles(i)})}renderAction(t){const{action:e,type:i}=t,r=this._getActionTitle(e),n={[_e.action]:e.type!=="toggle",[_e.actionToggle]:e.type==="toggle",[_e.actionToggleOn]:e.type==="toggle"&&e.value,[_e.buttonDisabled]:e.disabled},l=[e.icon&&!e.active?this.renderActionCalciteIcon(e.icon,e.uid):this.renderActionIcon(e),this.renderActionText(r)],d=i==="menu-item"?X("li",{key:e.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(_e.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":e.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l):X("div",{key:e.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(_e.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":e.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l);return e.visible?d:null}renderFeatureMenuItem(t,e){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:l}=this.viewModel,d=t===l,y={[_e.featureMenuSelected]:d},b=d?X("span",{key:Ja(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:_e.iconCheckMark}):null,x=X("span",{innerHTML:t.title||r.untitled});return X("li",{role:"menuitem",tabIndex:-1,key:Ja(`feature-menu-feature-${n}`),class:this.classes(y,_e.featureMenuItem),bind:this,"data-feature-index":e,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},X("span",{class:_e.featureMenuTitle},x,b))}renderFeatureMenu(){const{featureMenuId:t}=this,{featureViewModels:e}=this.viewModel;return e.length>1?X("ol",{class:_e.featureMenuList,id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},e.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_storeFeatureSelectionAction(t,e){this._featureSelectionActions.set(t,e),this.scheduleRender()}_storeExitRelatedRecordsAction(t,e){this._exitRelatedRecordsActions.set(t,e),this.scheduleRender()}_getFlowItemDescription(t){return"featureCountDescription"in t?t.featureCountDescription:t.viewModel.description??""}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const e=t.graphic,i=e==null?void 0:e.geometry;if(i==null||e==null)return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:i});const r=qG(i);this.open({features:[e],location:r??void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_handleBackClick(){const t=this._flowItems.pop();t&&(this._exitRelatedRecordsActions.delete(t),this._featureSelectionActions.delete(t),"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getActionTitle(t){const{messages:e,selectedFeature:i,messagesCommon:r}=this,{id:n}=t,l=i==null?void 0:i.attributes,d=t.title??"",y=n==="zoom-to-feature"?To(d,{messages:e}):n==="remove-selected-feature"?To(d,{messages:r}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?To(d,{messages:e}):t.title;return y&&l?To(y,l):y??""}_getActionClass(t){const{selectedFeature:e}=this,i=e==null?void 0:e.attributes,{className:r,image:n}=t,l=n||r?r:_e.iconDefaultAction;return l&&i?To(l,i):l??""}_getActionImage(t){if(t.active)return"";const{selectedFeature:e}=this,i=e==null?void 0:e.attributes,{image:r}=t;return r&&i?To(r,i):r??""}_createFeatureUpdatedAnimation(){return Dse("enter",_e.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:t,featureNavigationVisible:e}=this;if(typeof t!="number")return null;const i=Math.round(t);return Math.max(e?i-1:i,0)}_watchActions(){const{allActions:t}=this.viewModel;this.notifyChange("dividedActions");const e="actions";this._handles.remove(e),t&&t.forEach(i=>{this._handles.add(me(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),e)})}_divideActions(){const{allActions:t}=this.viewModel,e=t.filter(l=>l.visible),i=this._getInlineActionCount(),r=i===null,n=i===0;return{inlineActions:r?e.slice(0):n?new ze:e.slice(0,i),menuActions:r?new ze:n?e.slice(0):e.slice(i)}}_featureMenuOpenChanged(t){t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(t){t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:t,messagesCommon:e}=this;t&&(this.viewModel.title=((i=t.viewModel)==null?void 0:i.state)==="error"?e.errorMessage:((r=t.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_handleFeatureMenuKeyup(t){Ju(t)==="Escape"&&(t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(t){Ju(t)==="Escape"&&(t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(t){const{viewModel:e}=this,i=nx(t.currentTarget);e.activeFeature=e.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(t){const e=Ju(t),{_featureMenuNode:i}=this,r=nx(t.currentTarget);if(!i)return;const n=i.querySelectorAll("li"),l=n.length;e!=="ArrowUp"?e!=="ArrowDown"?e!=="Home"?e!=="End"||(t.stopPropagation(),n[n.length-1].focus()):(t.stopPropagation(),n[0].focus()):(t.stopPropagation(),n[(r+1+l)%l].focus()):(t.stopPropagation(),n[(r-1+l)%l].focus())}_handleActionMenuItemKeyup(t){const e=Ju(t),{_actionsMenuNode:i}=this,r=t.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,l=n.findIndex(b=>b.uid===r);if(!i)return;const d=i.querySelectorAll("li"),y=d.length;e!=="ArrowUp"?e!=="ArrowDown"?e!=="Home"?e!=="End"||(t.stopPropagation(),d[d.length-1].focus()):(t.stopPropagation(),d[0].focus()):(t.stopPropagation(),d[(l+1+y)%y].focus()):(t.stopPropagation(),d[(l-1+y)%y].focus())}_handleMainKeyup(t){const e=Ju(t);e==="ArrowLeft"&&(t.stopPropagation(),this.previous()),e==="ArrowRight"&&(t.stopPropagation(),this.next())}_spinnerEnabledChange(t){if(this._destroySpinner(),!t)return;const e=this.get("viewModel.view");this._createSpinner(e)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:e,waitingForResult:i}=this.viewModel;i&&e?t.show({location:e}):t.hide()}_getIconStyles(t){return{"background-image":t?`url(${t})`:""}}async _shouldFocus(t){t!=null&&t.shouldFocus&&(await u_(()=>{var e;return((e=this.viewModel)==null?void 0:e.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const t=me(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedFeatureIndex},(e,i)=>this._selectedFeatureIndexUpdated(e,i));this._handles.add(t,_P)}_selectedFeatureIndexUpdated(t,e){const{featureCount:i}=this;i&&t!==e&&t!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,t&&!t.destroyed&&t.destroy()),this._feature=null}_isScreenLocationWithinView(t,e){return t.x>-1&&t.y>-1&&t.x<=e.width&&t.y<=e.height}_isOutsideView(t){const{popupHeight:e,popupWidth:i,screenLocation:r,side:n,view:l}=t;if(isNaN(i)||isNaN(e)||!l||!r)return!1;const d=l.padding;return n==="right"&&r.x+i/2>l.width-d.right||n==="left"&&r.x-i/2<d.left||n==="top"&&r.y-e<d.top||n==="bottom"&&r.y+e>l.height-d.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:e,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:l,view:d}=n;if(l==null||!d||!i)return"top-center";if(!this._isScreenLocationWithinView(l,d))return this._get("currentAlignment")||"top-center";function y(H){return parseInt(H.replaceAll(/[^-\d\.]/g,""),10)}const b=r?window.getComputedStyle(r,null):null,x=b?y(b.getPropertyValue("max-height")):0,$=b?y(b.getPropertyValue("height")):0,{height:E,width:k}=i.getBoundingClientRect(),P=k+e,D=Math.max(E,x,$)+e,L=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"right",view:d}),N=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"left",view:d}),B=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"top",view:d}),W=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"bottom",view:d});return N?B?"bottom-right":"top-right":L?B?"bottom-left":"top-left":B?W?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:e}=this;return e||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const e=["left","right"];return Th(this.container)&&e.reverse(),t==null?void 0:t.replace(/leading/gi,e[0]).replaceAll(/trailing/gi,e[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((t=this.dockOptions)==null?void 0:t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(t){var d;if(t!=="auto")return t;const e=(d=this.viewModel)==null?void 0:d.view,i=Th(this.container)?"top-left":"top-right";if(!e)return i;const r=e.padding||{left:0,right:0,top:0,bottom:0},n=e.width-r.left-r.right,{breakpoints:l}=e;return l&&n<=l.xsmall?"bottom-center":i}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:e}=this.viewModel,{width:i}=this._containerNode.getBoundingClientRect(),r=this._calculatePositionStyle(e,i);r&&Object.assign(this._containerNode.style,r)}_calculateFullWidth(t){const{currentAlignment:e,_pointerOffsetInPx:i}=this;return e==="top-left"||e==="bottom-left"||e==="top-right"||e==="bottom-right"?t+i:t}_calculateAlignmentPosition(t,e,i,r){const{currentAlignment:n,_pointerOffsetInPx:l}=this;if(!i)return;const{padding:d}=i,y=r/2,b=i.height-e,x=i.width-t;return n==="bottom-center"?{top:e+l-d.top,left:t-y-d.left}:n==="top-left"?{bottom:b+l-d.bottom,right:x+l-d.right}:n==="bottom-left"?{top:e+l-d.top,right:x+l-d.right}:n==="top-right"?{bottom:b+l-d.bottom,left:t+l-d.left}:n==="bottom-right"?{top:e+l-d.top,left:t+l-d.left}:n==="top-center"?{bottom:b+l-d.bottom,left:t-y-d.left}:void 0}_calculatePositionStyle(t,e){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(t==null||!e)return;const n=this._calculateFullWidth(e),l=this._calculateAlignmentPosition(t.x,t.y,r,n);return l?{top:l.top!==void 0?`${l.top}px`:"auto",left:l.left!==void 0?`${l.left}px`:"auto",bottom:l.bottom!==void 0?`${l.bottom}px`:"auto",right:l.right!==void 0?`${l.right}px`:"auto"}:void 0}_viewChange(t,e){t&&e&&(this.close(),this.clear())}_viewReadyChange(t,e){if(t){const i=this.get("viewModel.view");this._wireUpView(i)}else e&&(this.close(),this.clear())}_wireUpView(t){if(this._destroySpinner(),!t)return;const{spinnerEnabled:e}=this;e&&this._createSpinner(t),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,e,i){const[r,n]=t,[l,d]=e,{width:y=0,height:b=0}=i??{};return r<=y&&l>y||r>y&&l<=y||n<=b&&d>b||n>b&&d<=b}_updateDockEnabledForViewSize(t,e){if(!t||!e)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,l=[],d=[];l[0]=t[0]-r,l[1]=t[1]-n,d[0]=e[0]-r,d[1]=e[1]-n;const{dockOptions:y}=this,b=y.breakpoint;this._dockingThresholdCrossed(l,d,b)&&this._setDockEnabledForViewSize(y),this._setCurrentDockPosition()}_focusDockButtonNode(t){this._focusDockButton&&(this._focusDockButton=!1,t.focus())}_closeButtonNodeUpdated(t){return this._focusClose?(this._focusClose=!1,void t.focus()):this._blurClose?(this._blurClose=!1,void t.blur()):void 0}_mainContainerNodeUpdated(t){return this._mainContainerNode=t,this._focusContainer?(this._focusContainer=!1,void t.focus()):this._blurContainer?(this._blurContainer=!1,void t.blur()):void 0}_featureMenuNodeUpdated(t){if(this._featureMenuNode=t,!t||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const e=t.querySelectorAll("li");e.length&&e[0].focus()}_actionsMenuNodeUpdated(t){if(this._actionsMenuNode=t,!t||!this._focusFirstAction)return;this._focusFirstAction=!1;const e=t.querySelectorAll("li");e.length&&e[0].focus()}_focusFeatureMenuButtonNode(t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,t.focus())}_focusActionsMenuButtonNode(t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,t.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:e}=this;if(!e)return;const i=e.active&&!t;e.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(t){var y,b;const e=t.breakpoint,i=(b=(y=this.viewModel)==null?void 0:y.view)==null?void 0:b.ui;if(!i)return!1;const{width:r,height:n}=i;if(isNaN(r)||isNaN(n)||!e)return!1;const l=e.hasOwnProperty("width")&&r<=(e.width??0),d=e.hasOwnProperty("height")&&n<=(e.height??0);return l||d}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}_getPageText(t,e){return this.featureNavigationVisible?To(this.messages.pageText,{index:e+1,total:t}):null}_destroySpinner(){var t,e;this._spinner&&((e=(t=this.view)==null?void 0:t.ui)==null||e.remove(this._spinner,xP),this._spinner.destroy(),this._spinner=null)}_createSpinner(t){t&&(this._spinner=new Bwe({view:t}),t.ui.add(this._spinner,{key:xP,position:"manual",internal:!0}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const t=!this.featureMenuOpen;this._featureMenuOpenChanged(t),this.actionsMenuOpen=!1,this.featureMenuOpen=t}_toggleActionsMenu(){const t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(t),this.featureMenuOpen=!1,this.actionsMenuOpen=t}_triggerAction(t){const e=t.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(l=>l.uid===e),n=i.at(r);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(t){const e=nx(t.currentTarget);e==null||isNaN(e)||(this.viewModel.selectedFeatureIndex=e),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};function nx(t){return t==null?void 0:t["data-feature-index"]}g([S({readOnly:!0})],qe.prototype,"actionsMenuId",null),g([S({readOnly:!0})],qe.prototype,"actionsMenuButtonId",null),g([S({readOnly:!0})],qe.prototype,"featureMenuId",null),g([S({readOnly:!0})],qe.prototype,"titleId",null),g([S({readOnly:!0})],qe.prototype,"contentId",null),g([S({readOnly:!0})],qe.prototype,"hasContent",null),g([S({readOnly:!0})],qe.prototype,"featureNavigationVisible",null),g([S({readOnly:!0})],qe.prototype,"collapsible",null),g([S({readOnly:!0})],qe.prototype,"featureMenuVisible",null),g([S({readOnly:!0})],qe.prototype,"contentCollapsed",null),g([S({readOnly:!0})],qe.prototype,"dividedActions",null),g([S({readOnly:!0,dependsOn:["_flowItems.length"]})],qe.prototype,"_activeFlowItemWidget",null),g([S()],qe.prototype,"actions",null),g([S()],qe.prototype,"actionsMenuOpen",null),g([S()],qe.prototype,"alignment",void 0),g([S()],qe.prototype,"autoCloseEnabled",null),g([S()],qe.prototype,"autoOpenEnabled",null),g([S()],qe.prototype,"defaultPopupTemplateEnabled",null),g([S()],qe.prototype,"content",null),g([S()],qe.prototype,"collapsed",void 0),g([S()],qe.prototype,"collapseEnabled",void 0),g([S({readOnly:!0})],qe.prototype,"currentAlignment",null),g([S({readOnly:!0})],qe.prototype,"currentDockPosition",null),g([S()],qe.prototype,"dockOptions",null),g([S()],qe.prototype,"dockEnabled",void 0),g([S({readOnly:!0})],qe.prototype,"featureCount",null),g([S()],qe.prototype,"featureMenuOpen",null),g([S()],qe.prototype,"features",null),g([S()],qe.prototype,"goToOverride",null),g([S()],qe.prototype,"headingLevel",void 0),g([S()],qe.prototype,"highlightEnabled",null),g([S()],qe.prototype,"location",null),g([S()],qe.prototype,"label",null),g([S()],qe.prototype,"maxInlineActions",void 0),g([S(),Er("esri/widgets/Popup/t9n/Popup")],qe.prototype,"messages",void 0),g([S(),Er("esri/t9n/common")],qe.prototype,"messagesCommon",void 0),g([S()],qe.prototype,"promises",null),g([S({readOnly:!0})],qe.prototype,"selectedFeature",null),g([S()],qe.prototype,"selectedFeatureIndex",null),g([S({readOnly:!0})],qe.prototype,"selectedFeatureWidget",null),g([S()],qe.prototype,"spinnerEnabled",void 0),g([S()],qe.prototype,"title",null),g([S()],qe.prototype,"updateLocationEnabled",null),g([S()],qe.prototype,"view",null),g([S({type:fU}),rz(["triggerAction","trigger-action"])],qe.prototype,"viewModel",void 0),g([S()],qe.prototype,"visible",null),g([S()],qe.prototype,"visibleElements",void 0),g([xt("visibleElements")],qe.prototype,"castVisibleElements",null),g([$r()],qe.prototype,"_close",null),g([$r()],qe.prototype,"_toggleDockEnabled",null),g([$r()],qe.prototype,"_toggleFeatureMenu",null),g([$r()],qe.prototype,"_toggleActionsMenu",null),g([$r()],qe.prototype,"_triggerAction",null),g([$r()],qe.prototype,"_selectFeature",null),g([$r()],qe.prototype,"_next",null),g([$r()],qe.prototype,"_previous",null),qe=g([J("esri.widgets.Popup")],qe);const a_e=qe,TP=Object.freeze(Object.defineProperty({__proto__:null,default:a_e},Symbol.toStringTag,{value:"Module"}));function l_e(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(r,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Vb={exports:{}};Vb.exports,function(t,e){function i(){function n(c){if(typeof c=="number")return q.Uc.ah(c);if(c==null)return null;if(Xn[c]!=null)return q.Uc.ah(Xn[c]);throw Error("Unrecognised Unit Type")}function l(c){if(typeof c=="number")return q.Uc.ah(c);if(c==null)return null;if(tg[c]!=null)return q.Uc.ah(tg[c]);throw Error("Unrecognised Unit Type")}function d(c){if(c)switch(c){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function y(c,C,w,h){if(w==null||w.B())return null;switch(w.K()){case q.sn.Point:return c.exportPoint(C,w,h);case q.sn.Polygon:return c.exportPolygon(C,w,h);case q.sn.Polyline:return c.exportPolyline(C,w,h);case q.sn.MultiPoint:return c.exportMultipoint(C,w,h);case q.sn.Envelope:return c.exportExtent(C,w,h)}return null}function b(c,C,w,h){if(w.K()!==q.sn.Point)throw Error("Geometry not Point");return c.exportPoint(C,w,h)}function x(c,C,w){return c.convertToGEGeometry(C,w)}function $(c){var C=c.wkid;c=c.wkt;var w=Va.get(C||c);return w==null&&(C!==-1&&C!=null?(w=q.Gg.create(C),Va.set(C,w)):c&&(w=q.Gg.lP(c),Va.set(c,w)),Hl.has(C||c)&&w.QW(Hl.get(C||c))),w}function E(c){var C;if(c==null)return null;var w=$(c);return c=w.Id(),w=w.Mn(),(C={}).tolerance=w,C.unitType=c==null?-1:c.pd,C.unitID=c==null?-1:c.Fc(),C.unitBaseFactor=c==null?0:c.ci,C.unitSquareDerivative=c==null?0:q.Uc.WF(c).Fc(),C}function k(c,C,w,h){return w==null?null:(w=q.ac.clip(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,w,C))}function P(c,C,w,h){w=q.ac.fl(x(c,Ie,w),x(c,Ie,h),$(C)),h=[];for(var a=0;a<w.length;a++)h.push(y(c,Ie,w[a],C));return h}function D(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.contains(x(c,Ie,w),x(c,Ie,h),$(C))}function L(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.wP(x(c,Ie,w),x(c,Ie,h),$(C))}function N(c,C,w,h,a){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.ub(x(c,Ie,w),x(c,Ie,h),$(C),n(a))}function B(c,C,w,h){return!(w==null&&h!=null||h==null&&w!=null)&&q.ac.Nb(x(c,Ie,w),x(c,Ie,h),$(C))}function W(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.OS(x(c,Ie,w),x(c,Ie,h),$(C))}function H(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.touches(x(c,Ie,w),x(c,Ie,h),$(C))}function Y(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.mY(x(c,Ie,w),x(c,Ie,h),$(C))}function ie(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.OP(x(c,Ie,w),x(c,Ie,h),$(C))}function ne(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.yU(x(c,Ie,w),x(c,Ie,h),$(C))}function he(c,C,w,h,a){if(w==null||h==null)throw Error("Illegal Argument Exception");return q.ac.tB(x(c,Ie,w),x(c,Ie,h),$(C),a)}function de(c,C,w){if(w==null)throw Error("Illegal Argument Exception");return q.ac.ZS(x(c,Ie,w),$(C))}function be(c,C,w){if(w==null)throw Error("Illegal Argument Exception");return w=q.ac.$B(x(c,Ie,w),$(C)),y(c,Ie,w,C)}function we(c,C,w,h){if(h===void 0&&(h=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var a=h,s=[];for(h=0;h<w.length;h++)s.push(x(c,Ie,w[h]));for(w=q.ac.eP(s,a),a=Array(w.length),h=0;h<w.length;h++)a[h]=y(c,Ie,w[h],C);return a}return h=q.ac.dP(x(c,Ie,w),$(C)),y(c,Ie,h,C)}function $e(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],s=0;s<w.length;s++)a.push(x(c,Ie,w[s]));for(w=q.ac.LP(a,x(c,Ie,h),$(C)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);return h}return s=q.ac.km(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,s,C)}function ke(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],s=0;s<w.length;s++)a.push(x(c,Ie,w[s]));for(w=q.ac.RX(a,x(c,Ie,h),$(C)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);return h}return s=q.ac.gp(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,s,C)}function Ge(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],s=0;s<w.length;s++)a.push(x(c,Ie,w[s]));for(w=q.ac.MS(a,x(c,Ie,h),$(C)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);return h}return s=q.ac.Fa(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,s,C)}function Fe(c,C,w,h){if(w==null)return null;var a=[];if(Array.isArray(w)){if(w.length===0)return null;for(h=0;h<w.length;h++)a.push(x(c,Ie,w[h]))}else a.push(x(c,Ie,w)),h!=null&&a.push(x(c,Ie,h));return y(c,Ie,q.ac.fY(a,$(C)),C)}function ut(c,C,w,h,a,s,o,u){var p=0;if(s!=null)switch(s){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(w)){if(w==null)c=null;else if(w.length===0)c=[];else{var f=[];for(s=0;s<w.length;s++)f.push(x(c,Ie,w[s]));for(w=q.ac.wU(f,$(C),h,p,o,u,n(a)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);c=h}return c}return w=q.ac.offset(x(c,Ie,w),$(C),h,p,o,u,n(a)),y(c,Ie,w,C)}function ii(c,C,w,h,a,s){if(s===void 0&&(s=!1),Array.isArray(w)){if(!Array.isArray(h)){for(var o=[],u=0;u<w.length;u++)o.push(h);h=o}if(h.length!=w.length){if(h.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(u=0;u<w.length;u++)h[u]===void 0?o.push(p):(o.push(h[u]),p=h[u]);h=o}return Xe(c,C,w,h,a,!1,s,"geodesic",NaN)}return w=q.ac.buffer(x(c,Ie,w),$(C),h,n(a),!1,0,NaN),y(c,Ie,w,C)}function Ze(c,C,w,h,a,s,o,u){if(Array.isArray(w)){if(!Array.isArray(h)){for(var p=[],f=0;f<w.length;f++)p.push(h);h=p}if(h.length!==w.length){if(h.length===0)throw Error("Illegal Argument Exception");p=[];var m=0;for(f=0;f<w.length;f++)h[f]===void 0?p.push(m):(p.push(h[f]),m=h[f]);h=p}return Xe(c,C,w,h,a,!0,s,o,u)}return o===void 0&&(o=NaN),w=q.ac.buffer(x(c,Ie,w),$(C),h,n(a),!0,d(s),o),y(c,Ie,w,C)}function Xe(c,C,w,h,a,s,o,u,p){if(p===void 0&&(p=NaN),w==null)return null;if(w.length===0)return[];for(var f=[],m=0;m<w.length;m++)f.push(x(c,Ie,w[m]));for(w=q.ac.HN(f,$(C),h,n(a),s,o,d(u),p),h=Array(w.length),m=0;m<w.length;m++)h[m]=y(c,Ie,w[m],C);return h}function ri(c,C,w,h,a){var s;return a===void 0&&(a=!0),w=q.ac.iz(x(c,Ie,w),x(c,Ie,h),a),(s={}).coordinate=b(c,Ie,w.az(),C),s.distance=w.cz(),s.isRightSide=w.Nz(),s.vertexIndex=w.Va(),s.isEmpty=w.B(),s}function Jn(c,C,w,h){var a;return w=q.ac.jz(x(c,Ie,w),x(c,Ie,h)),(a={}).coordinate=b(c,Ie,w.az(),C),a.distance=w.cz(),a.isRightSide=w.Nz(),a.vertexIndex=w.Va(),a.isEmpty=w.B(),a}function Yn(c,C,w,h,a,s){var o;for(w=q.ac.kz(x(c,Ie,w),x(c,Ie,h),a,s),h=[],a=0;a<w.length;a++)w[a].B()===!1&&h.push(((o={}).coordinate=b(c,Ie,w[a].az(),C),o.distance=w[a].cz(),o.isRightSide=w[a].Nz(),o.vertexIndex=w[a].Va(),o.isEmpty=w[a].B(),o));return h}function Ss(c,C,w,h,a,s){return w=q.ac.LQ(x(c,Ie,w),$(C),h,a,n(s)),y(c,Ie,w,C)}function dn(c,C,w,h,a){return w=q.ac.Sr(x(c,Ie,w),$(C),h,n(a)),y(c,Ie,w,C)}function Vd(c,C,w,h,a,s){return s===void 0&&(s=0),w=q.ac.Ry(x(c,Ie,w),$(C),h,n(a),s),y(c,Ie,w,C)}function gf(c,C,w,h){if(w==null)throw Error("Illegal Argument Exception");return q.ac.EU(x(c,Ie,w),$(C),l(h))}function vf(c,C,w,h){if(w==null)throw Error("Illegal Argument Exception");return q.ac.FU(x(c,Ie,w),$(C),n(h))}function Xm(c,C,w,h,a){if(w==null)throw Error("Illegal Argument Exception");return q.ac.RQ(x(c,Ie,w),$(C),l(h),d(a))}function W_(c,C,w,h,a){if(w==null)throw Error("Illegal Argument Exception");return q.ac.UQ(x(c,Ie,w),$(C),n(h),d(a))}function J_(c){q.IL.bind(c)}function Y_(c,C,w,h,a){var s=null,o=null;if(h){if(!a)throw q.i.O("AOI missing Spatial Reference");s=x(c,Ie,h),o=$(a).hh()}return(c=q.iu.SR($(C).hh(),$(w).hh(),s,o))!==null?c:null}function K_(c,C,w,h,a){var s=null,o=null;if(h){if(!a)throw q.i.O("AOI missing Spatial Reference");s=x(c,Ie,h),o=$(a).hh()}return q.iu.TR($(C).hh(),$(w).hh(),s,o)}function Z_(c,C,w,h,a,s){if(a===void 0&&(a=null),s===void 0&&(s=null),s){var o=new q.tC;o.Xu=s.densificationStep,o.Lr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&o.KW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&o.LW(s.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(C.length===0)return[];if(a){if(!(s=a.getCachedGeTransformation(w,h)))e:{if(s=a,a=null,s){var u=s.getGTListEntry();if(u!==null){a=new q.rC(null);for(var p=0,f=u.steps;p<f.length;p++){u=f[p];var m=new q.Cx(u.geogtran);u.isInverse&&m.Lz(),a.add(m)}o=q.xr.Pr($(w).hh(),$(h).hh(),a,o),s.assignCachedGe(w,h,o),s=o;break e}}if(a===null&&s&&s.steps&&0<s.steps.length){for(a=new q.rC(null),p=0,f=s.steps;p<f.length;p++)(u=f[p]).wkid!=-1&&u.wkid!=null?a.add(q.Cx.create(u.wkid,u.isInverse)):a.add(q.Cx.pP(u.wkt,u.isInverse));o=q.xr.Pr($(w).hh(),$(h).hh(),a,o),s.assignCachedGe(w,h,o),s=o}else s=q.xr.Pr($(w).hh(),$(h).hh(),a,o)}for(w=[],a=0;a<C.length;a++)o=C[a],w.push(Qm(c,o,h,s))}else for(s=q.xr.Pr($(w).hh(),$(h).hh(),null),w=[],a=0;a<C.length;a++)o=C[a],w.push(Qm(c,o,h,s));return w}function Qm(c,C,w,h){return C=q.ac.Bh(x(c,Ie,C),h),y(c,Ie,C,w)}function X_(c,C){c!=null&&(c=c.wkid||c.wkt,Hl.has(c),Hl.set(c,C),Va.has(c)&&Va.delete(c))}function Q_(c){c!=null&&(c=c.wkid||c.wkt,Hl.has(c)&&(Hl.delete(c),Va.has(c)&&Va.delete(c)))}function e3(c,C,w,h){if(w==null||h==null)return[];var a=[],s=0;for(w=q.ac.LS(x(c,Ie,w),x(c,Ie,h),$(C))||[];s<w.length;s++)a.push(y(c,Ie,w[s],C));return a}var Hi,q,Fr,eg,Et=this&&this.__extends||function(){function c(C,w){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,a){h.__proto__=a}||function(h,a){for(var s in a)a.hasOwnProperty(s)&&(h[s]=a[s])})(C,w)}return function(C,w){function h(){this.constructor=C}c(C,w),C.prototype=w===null?Object.create(w):(h.prototype=w.prototype,new h)}}();(function(c){var C;(C=c.sn||(c.sn={}))[C.Unknown=0]="Unknown",C[C.Point=33]="Point",C[C.Line=322]="Line",C[C.Envelope=197]="Envelope",C[C.MultiPoint=550]="MultiPoint",C[C.Polyline=1607]="Polyline",C[C.Polygon=1736]="Polygon",function(h){h[h.enumMild=0]="enumMild",h[h.enumMedium=1]="enumMedium",h[h.enumHot=2]="enumHot"}(c.TK||(c.TK={}));var w=function(){function h(){this.description=null,this.QA=0}return h.prototype.K=function(){return 0},h.prototype.Eb=function(){return-1},h.prototype.Pf=function(a){this.wc(),a!=this.description&&this.un(a)},h.prototype.un=function(){},h.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=c.fe.xR(this.description,a))!=this.description&&this.un(a)},h.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},h.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=c.fe.wR(this.description,a),this.un(a))},h.prototype.Vg=function(){return null},h.prototype.dn=function(){},h.prototype.A=function(){},h.prototype.So=function(){},h.prototype.yc=function(a){this.A(a)},h.prototype.B=function(){return!0},h.prototype.Pa=function(){},h.prototype.Pc=function(){},h.prototype.Ja=function(){return null},h.prototype.copyTo=function(){},h.prototype.He=function(){return 0},h.prototype.Rb=function(){return 0},h.prototype.dG=function(){return this.hasAttribute(1)},h.uf=function(a){return 1+((192&a)>>6)>>1},h.Tn=function(a){return(32&a)!=0},h.PS=function(a){return(128&a)!=0},h.zd=function(a){return(256&a)!=0},h.zj=function(a){return(512&a)!=0},h.Ic=function(a){return(1024&a)!=0},h.prototype.Qf=function(){var a=this.Ja();return this.copyTo(a),a},h.prototype.ng=function(){return null},h.kg=function(a){var s=a.Ja();return a.copyTo(s),s},h.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},h.zx=function(a){var s=a.K();if(h.zj(s))return a.I();if(a.B())return 0;if(s==197)return 4;if(s==33)return 1;if(h.zd(s))return 2;throw c.i.ga("missing type")},h}();c.ba=w})(q||(q={})),Fr=q||(q={}),eg=function(){function c(){this.y=this.x=0}return c.construct=function(C,w){var h=new c;return h.x=C,h.y=w,h},c.cl=function(C){var w=new c;return w.x=C.x,w.y=C.y,w},c.prototype.na=function(C,w){this.x=C,this.y=w},c.prototype.N=function(C){this.x=C.x,this.y=C.y},c.prototype.hq=function(C,w){return this.x===C&&this.y===w},c.prototype.Mz=function(C){return 2220446049250313e-31>=Math.abs(this.x-C.x)&&2220446049250313e-31>=Math.abs(this.y-C.y)},c.prototype.rb=function(C){return this.x===C.x&&this.y===C.y},c.prototype.Nb=function(C){return C==this||C instanceof c&&this.x==C.x&&this.y==C.y},c.prototype.sub=function(C){this.x-=C.x,this.y-=C.y},c.prototype.vc=function(C,w){this.x=C.x-w.x,this.y=C.y-w.y},c.prototype.add=function(C,w){w!==void 0?(this.x=C.x+w.x,this.y=C.y+w.y):(this.x+=C.x,this.y+=C.y)},c.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},c.prototype.nt=function(C){this.x=-C.x,this.y=-C.y},c.prototype.IS=function(C,w,h){this.x=C.x*(1-h)+w.x*h,this.y=C.y*(1-h)+w.y*h},c.prototype.Dt=function(C,w){this.x=this.x*C+w.x,this.y=this.y*C+w.y},c.prototype.BW=function(C,w,h){this.x=w.x*C+h.x,this.y=w.y*C+h.y},c.prototype.scale=function(C){this.x*=C,this.y*=C},c.prototype.compare=function(C){return this.y<C.y?-1:this.y>C.y?1:this.x<C.x?-1:this.x>C.x?1:0},c.prototype.normalize=function(){var C=this.length();C==0&&(this.x=1,this.y=0),this.x/=C,this.y/=C},c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.Uk=function(){return this.x*this.x+this.y*this.y},c.ub=function(C,w){return Math.sqrt(this.zc(C,w))},c.Jy=function(C,w,h,a){return C-=h,w-=a,Math.sqrt(C*C+w*w)},c.prototype.Sh=function(C){return this.x*C.x+this.y*C.y},c.prototype.aD=function(C){return Math.abs(this.x*C.x)+Math.abs(this.y*C.y)},c.prototype.yi=function(C){return this.x*C.y-this.y*C.x},c.prototype.Ct=function(C,w){var h=-this.x*w+this.y*C;this.x=this.x*C+this.y*w,this.y=h},c.prototype.Jv=function(){var C=this.x;this.x=-this.y,this.y=C},c.prototype.HG=function(C){this.x=-C.y,this.y=C.x},c.prototype.cr=function(){var C=this.x;this.x=this.y,this.y=-C},c.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},c.pu=function(C,w){var h=C.su(),a=w.su();return a==h?0>(C=C.yi(w))?1:0<C?-1:0:h<a?-1:1},c.zc=function(C,w){var h=C.x-w.x;return h*h+(C=C.y-w.y)*C},c.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},c.prototype.Sc=function(){this.y=this.x=NaN},c.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},c.prototype.offset=function(C,w){var h=c.ub(C,w),a=c.construct(this.x,this.y);if(h==0)return c.ub(a,C);var s=new c;return s.N(w),s.sub(C),a.sub(C),a.yi(s)/h},c.Wq=function(C,w,h){var a=new Fr.Xb;a.set(w.x),a.sub(C.x);var s=new Fr.Xb;s.set(h.y),s.sub(C.y);var o=new Fr.Xb;o.set(w.y),o.sub(C.y);var u=new Fr.Xb;return u.set(h.x),u.sub(C.x),a.Bg(s),o.Bg(u),a.sub(o),a.rs()?(a=new Fr.jp(w.x),s=new Fr.jp(C.x),o=new Fr.jp(C.y),a=a.kt(s),C=(C=new Fr.jp(h.y)).kt(o),w=(w=new Fr.jp(w.y)).kt(o),h=(h=new Fr.jp(h.x)).kt(s),a=a.nr(C),w=w.nr(h),(a=a.nr(w)).iT()?-1:a.aS()?1:0):0>(h=a.value())?-1:0<h?1:0},c.prototype.dc=function(){return Fr.P.wj(Fr.P.wj())},c}(),Fr.h=eg,function(c){var C=function(){function w(h){this.Ay=this.Ot=0,this.KX=h}return w.prototype.reset=function(){this.Ay=this.Ot=0},w.prototype.add=function(h){h-=this.Ay;var a=this.Ot+h;this.Ay=a-this.Ot-h,this.Ot=a},w.prototype.sub=function(h){this.add(-h)},w.prototype.tm=function(){return this.KX+this.Ot},w}();c.Ex=C,c.mc=function(){function w(){}return w.En=function(h,a){return 0<=a?Math.abs(h):-Math.abs(h)},w.sign=function(h){return 0>h?-1:0<h?1:0},w.MK=function(h){return h-360*Math.floor(h/360)},w.round=function(h){return Math.floor(h+.5)},w.ox=function(h){return h*h},w.jq=function(h,a,s){return .5>=s?h+(a-h)*s:a-(a-h)*(1-s)},w.JG=function(h,a,s,o){.5>=s?(o.x=h.x+(a.x-h.x)*s,o.y=h.y+(a.y-h.y)*s):(o.x=a.x-(a.x-h.x)*(1-s),o.y=a.y-(a.y-h.y)*(1-s))},w.gT=function(h,a,s,o,u,p){.5>=u?(p.x=h+(s-h)*u,p.y=a+(o-a)*u):(p.x=s-(s-h)*(1-u),p.y=o-(o-a)*(1-u))},w}()}(q||(q={})),function(c){var C=function(w){function h(){var a=w.call(this)||this;return a.ta=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return Et(h,w),h.prototype.bc=function(){return c.h.construct(this.ta,this.oa)},h.prototype.$p=function(a){a.x=this.ta,a.y=this.oa},h.prototype.Ec=function(a){this.gm(0,a)},h.prototype.UB=function(a,s){this.gm(0,c.h.construct(a,s))},h.prototype.Vo=function(a){this.cD(0,a)},h.prototype.setStart=function(a){this.pD(0,a)},h.prototype.yv=function(a,s){return this.Pd(0,a,s)},h.prototype.TB=function(a,s,o){this.vn(0,a,s,o)},h.prototype.xc=function(){return c.h.construct(this.qa,this.ma)},h.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},h.prototype.Rc=function(a){this.gm(1,a)},h.prototype.Sl=function(a,s){this.gm(1,c.h.construct(a,s))},h.prototype.Ro=function(a){this.cD(1,a)},h.prototype.setEnd=function(a){this.pD(1,a)},h.prototype.jv=function(a,s){return this.Pd(1,a,s)},h.prototype.JB=function(a,s,o){this.vn(1,a,s,o)},h.prototype.Eb=function(){return 1},h.prototype.B=function(){return this.Bc()},h.prototype.Pa=function(){},h.prototype.He=function(){return 0},h.prototype.Fa=function(a,s,o,u,p){return this.FM(a,s,o,u,p)},h.prototype.isIntersecting=function(a,s){return this.Br(a,s,!1)!=0},h.prototype.ss=function(a,s){return this.tu(a,s,!1)},h.prototype.tu=function(){return null},h.prototype.Bc=function(){return!1},h.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=c.P.mg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var s=this.la.slice(0),o=this.la.length;o<2*a;o++)s[o]=0;this.la=s}},h.bM=function(a,s,o){if(0<o)var u=0;for(var p=0;p<o;p++)s[0+u]=a[0],u++},h.prototype.gm=function(a,s){a!=0?(this.qa=s.x,this.ma=s.y):(this.ta=s.x,this.oa=s.y)},h.prototype.un=function(a){if(this.la!=null){for(var s=c.fe.Kw(a,this.description),o=[],u=h.Ig(this.description,0),p=h.Ig(this.description,1),f=h.Ig(a,0),m=h.Ig(a,1),v=0,_=1,M=a.Ba;_<M;_++){var T=a.ld(_),A=c.sa.Wa(T);if(s[_]==-1){var O=c.sa.te(T);for(T=0;T<A;T++)o[f+v]=O,o[m+v]=O,v++}else for(O=this.description.bk(s[_])-2,T=0;T<A;T++)o[f+v]=this.la[u+O],o[m+v]=this.la[p+O],v++,O++}this.la=o}this.description=a},h.prototype.cD=function(a,s){if(this.Bc())throw c.i.ga("empty geometry");s.Pf(this.description),s.Bc()&&s.wn();for(var o=0;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=0,f=c.sa.Wa(u);p<f;p++){var m=this.Pd(a,u,p);s.setAttribute(u,p,m)}},h.prototype.pD=function(a,s){if(this.wc(),s.Bc())throw c.i.ga("empty geometry");for(var o=s.description,u=0,p=o.Ba;u<p;u++)for(var f=o.Fd(u),m=c.sa.Wa(f),v=0;v<m;v++){var _=s.Vc(f,v);this.vn(a,f,v,_)}},h.prototype.Pd=function(a,s,o){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.ta;if(o>=c.sa.Wa(s))throw c.i.de();var u=this.description.Rf(s);return 0<=u?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[h.Ig(this.description,a)+this.description.bk(u)-2+o]):c.sa.te(s)},h.prototype.vn=function(a,s,o,u){if(this.wc(),o>=c.sa.Wa(s))throw c.i.de();var p=this.description.Rf(s);0>p&&(this.se(s),p=this.description.Rf(s)),s==0?a!=0?o!=0?this.ma=u:this.qa=u:o!=0?this.oa=u:this.ta=u:(this.la==null&&this.$x(this.description.Be.length-2),this.la[h.Ig(this.description,a)+this.description.bk(p)-2+o]=u)},h.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();a.description=this.description,a.$x(this.description.Be.length-2),h.bM(this.la,a.la,2*(this.description.Be.length-2)),a.ta=this.ta,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.qp(a)},h.prototype.Vg=function(a,s){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,s),o.wa=o.pa,o.Nk(this.Pd(1,a,s)),o)},h.prototype.UI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Nk(this.Pd(1,0,0)))},h.prototype.Vw=function(a,s){s.Pf(this.description),s.Db(this.ic(a));for(var o=1,u=this.description.Ba;o<u;o++)for(var p=this.description.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++){var v=this.Vc(a,p,m);s.setAttribute(p,m,v)}},h.prototype.AM=function(a){if(this.description!=a.description||this.ta!=a.ta||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var s=0;s<2*(this.description.Be.length-2);s++)if(this.la[s]!=a.la[s])return!1;return!0},h.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},h.prototype.reverse=function(){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var s=this.description.Ba;a<s;a++)for(var o=this.description.ld(a),u=0,p=c.sa.Wa(o);u<p;u++){var f=this.Pd(0,o,u),m=this.Pd(1,o,u);this.vn(0,o,u,m),this.vn(1,o,u,f)}},h.prototype.Br=function(a,s,o){var u=a.K();if(this.K()===322){if(u==322)return c.zb.JM(this,a,s,o);throw c.i.Ra()}throw c.i.Ra()},h.prototype.FM=function(a,s,o,u,p){var f=a.K();if(this.K()===322){if(f==322)return c.zb.Yx(this,a,s,o,u,p);throw c.i.Ra()}throw c.i.Ra()},h.prototype.Sx=function(){return null},h.Ig=function(a,s){return s*(a.Be.length-2)},h.prototype.ic=function(a,s){if(s===void 0)return s=new c.h,this.ic(a,s),s;c.mc.gT(this.ta,this.oa,this.qa,this.ma,a,s)},h.prototype.ge=function(){return null},h.prototype.$F=function(){return null},h.prototype.fq=function(){return null},h.prototype.Di=function(){return null},h.prototype.Rn=function(){return null},h.prototype.lg=function(){return null},h.prototype.Tx=function(a,s){return s!==void 0?this.ux(s)-this.ux(a):this.ux(a)},h.prototype.qp=function(){},h.prototype.fl=function(){return null},h.prototype.dh=function(){},h.prototype.Vc=function(){return null},h.prototype.Me=function(){return null},h.prototype.ux=function(){return null},h.prototype.IG=function(){return null},h.prototype.ub=function(a,s){if(!s&&this.Br(a,0,!1)!=0)return 0;s=17976931348623157e292;var o=this.bc(),u=a.ge(o,!1);return o.sub(a.ic(u)),(o=o.length())<s&&(s=o),o=this.xc(),u=a.ge(o,!1),o.sub(a.ic(u)),(o=o.length())<s&&(s=o),o=a.bc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<s&&(s=o),o=a.xc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<s&&(s=o),s},h.prototype.ng=function(){return c.si.im(this,null)},h}(c.ba);c.NC=C}(q||(q={})),new q.h,function(c){var C;(C=c.VK||(c.VK={}))[C.Unknown=-1]="Unknown",C[C.Not=0]="Not",C[C.Weak=1]="Weak",C[C.Strong=2]="Strong",function(h){h[h.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",h[h.IsWeakSimple=2]="IsWeakSimple",h[h.IsStrongSimple=4]="IsStrongSimple",h[h.DirtyOGCFlags=8]="DirtyOGCFlags",h[h.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",h[h.DirtyExactIntervals=64]="DirtyExactIntervals",h[h.DirtyLooseIntervals=128]="DirtyLooseIntervals",h[h.DirtyIntervals=192]="DirtyIntervals",h[h.DirtyIsEnvelope=256]="DirtyIsEnvelope",h[h.DirtyLength2D=512]="DirtyLength2D",h[h.DirtyRingAreas2D=1024]="DirtyRingAreas2D",h[h.DirtyCoordinates=1993]="DirtyCoordinates",h[h.DirtyAllInternal=65535]="DirtyAllInternal",h[h.DirtyAll=16777215]="DirtyAll"}(c.HK||(c.HK={}));var w=function(h){function a(){var s=h.call(this)||this;return s.Jm=65535,s.xa=0,s.Rg=-1,s.Cb=null,s}return Et(a,h),a.prototype.qp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.ck=function(s){return(this.Jm&s)!=0},a.prototype.Nf=function(s,o){this.Jm=o?this.Jm|s:this.Jm&~s},a.prototype.oc=function(){this.ck(32)&&this.XM()},a.prototype.vx=function(){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(s,o){if(0>s||s>=this.xa)throw c.i.ga("index out of bounds");this.oc(),o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.Fd(u),f=0,m=c.sa.Wa(p);f<m;f++){var v=this.Aa[u].gg(m*s+f);o.setAttribute(p,f,v)}},a.prototype.It=function(s,o){this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.Fd(p),m=c.sa.Wa(f),v=0;v<m;v++){var _=o.Vc(f,v);this.setAttribute(f,s,v,_)}},a.prototype.D=function(s,o){if(0>s||s>=this.I())throw c.i.de();this.oc(),this.Aa[0].uc(2*s,o)},a.prototype.Oa=function(s){var o=new c.h;return this.D(s,o),o},a.prototype.Hc=function(s,o){this.Aa[0].uc(2*s,o)},a.prototype.Db=function(s,o,u){if(0>s||s>=this.xa)throw c.i.de();this.oc();var p=this.Aa[0];u!==void 0?(p.write(2*s,o),p.write(2*s+1,u)):p.Vt(2*s,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw c.i.de();this.oc();var s=this.Aa[0],o=new c.Od;return o.x=s.read(NaN),o.y=s.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):c.sa.te(1),o},a.prototype.ZB=function(s){if(0>s||s>=this.I())throw c.i.de();this.se(1),this.oc(),this.Qc(1993);var o=this.Aa[0];o.write(2*s,(void 0).x),o.write(2*s+1,(void 0).y),this.Aa[1].rr(s,(void 0).z)},a.prototype.Vc=function(s,o,u){if(0>o||o>=this.xa)throw c.i.de();var p=c.sa.Wa(s);if(u>=p)throw c.i.de();this.oc();var f=this.description.Rf(s);return 0<=f?this.Aa[f].gg(o*p+u):c.sa.te(s)},a.prototype.tF=function(s,o){return this.Vc(s,o,void 0)},a.prototype.setAttribute=function(s,o,u,p){if(0>o||o>=this.xa)throw c.i.de();var f=c.sa.Wa(s);if(u>=f)throw c.i.de();this.se(s),this.oc(),s=this.description.Rf(s),this.Qc(1993),this.Aa[s].rr(o*f+u,p)},a.prototype.vb=function(s){return this.vx(),this.se(s),this.oc(),this.Aa[this.description.Rf(s)]},a.prototype.kn=function(s,o){if(o!=null&&c.sa.Vp(s)!=o.Vp())throw c.i.O();this.se(s),s=this.description.Rf(s),this.Aa==null&&(this.Aa=c.Zc.lI(this.description.Ba)),this.Aa[s]=o,this.Qc(16777215)},a.prototype.un=function(s){var o=null;if(this.Aa!=null){var u=c.fe.Kw(s,this.description);o=[];for(var p=0,f=s.Ba;p<f;p++)u[p]!=-1&&(o[p]=this.Aa[u[p]])}this.description=s,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.vD=function(s){this.yu(!0),s instanceof c.l?this.aa.A(s):this.aa.So(s)},a.prototype.WM=function(s){this.yu(!1),s instanceof c.l?this.aa.A(s):this.aa.So(s)},a.prototype.dn=function(s){this.yu(!0),this.aa.copyTo(s)},a.prototype.A=function(s){this.vD(s)},a.prototype.So=function(s){this.vD(s)},a.prototype.yc=function(s){this.WM(s)},a.prototype.Vg=function(s,o){var u=new c.Oc;return this.Bc()?(u.Pa(),u):(this.yu(!0),this.aa.Vg(s,o))},a.prototype.dc=function(){var s=this.description.dc();if(!this.Bc())for(var o=this.I(),u=0,p=this.description.Ba;u<p;u++)s=this.Aa[u].Cn(s,0,o*c.sa.Wa(this.description.Fd(u)));return s},a.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof a&&this.description.Nb(s.description))||this.Bc()!=s.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=s.I())return!1;for(var u=0;u<this.description.Ba;u++){var p=this.description.ld(u),f=this.vb(p),m=s.vb(p);if(!f.Nb(m,0,o*c.sa.Wa(p)))return!1}return!0},a.prototype.copyTo=function(s){if(s.K()!=this.K())throw c.i.O();this.ZC(s)},a.prototype.ZC=function(s){this.oc(),s.description=this.description,s.Aa=null;var o=this.description.Ba,u=null;if(this.Aa!=null){u=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(u[p]=this.Aa[p].BB(this.I()*c.sa.Wa(this.description.Fd(p))))}this.aa!=null?(s.aa=this.aa.Ja(),this.aa.copyTo(s.aa)):s.aa=null,s.xa=this.xa,s.Jm=this.Jm,s.Aa=u;try{this.qp(s)}catch{throw s.Pa(),c.i.hu()}},a.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(s){s==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=s,this.gM(),this.wc()},a.prototype.yu=function(s){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new c.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(s);for(var o=1;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=c.sa.Wa(u),f=this.Aa[o],m=0;m<p;m++){var v=new c.Oc;v.Pa();for(var _=0;_<this.xa;_++){var M=f.gg(_*p+m);v.$b(M)}this.aa.setInterval(u,m,v)}s&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var s=this.Aa[0],o=new c.h,u=0;u<this.xa;u++)s.uc(2*u,o),this.aa.$b(o)},a.prototype.Ap=function(s){s.Pa();for(var o=this.Aa[0],u=new c.h,p=0;p<this.xa;p++)o.uc(2*p,u),s.$b(u)},a.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=c.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var s=0;s<this.description.Ba;s++){var o=this.description.Fd(s);if(this.Aa[s]!=null){var u=c.sa.Wa(o),p=c.P.truncate(this.Aa[s].size/u);p<this.xa&&(p=c.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[s].resize(p*u,c.sa.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[s]=c.Zc.TE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(s){if(0>s)throw c.i.O();s!=this.xa&&(this.xa=s,this.Qc(65535))},a.prototype.qm=function(s){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=s)return this.ck(8)?1:2}return-1},a.prototype.Eh=function(s,o){if(this.LT=o,s==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),s==0)this.Nf(2,!1),this.Nf(4,!1);else if(s==1)this.Nf(2,!0),this.Nf(4,!1);else{if(s!=2)throw c.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.fD=function(s,o,u,p){if(0>s||s>=this.xa||0>o||o>=this.xa)throw c.i.ga("index out of bounds");this.oc(),p.Pf(this.description),p.B()&&p.wn();for(var f=0;f<this.description.Ba;f++)for(var m=this.description.Fd(f),v=0,_=c.sa.Wa(m);v<_;v++){var M=this.Aa[f].gg(_*s+v),T=this.Aa[f].gg(_*o+v);p.setAttribute(m,v,c.mc.jq(M,T,u))}},a.prototype.Ar=function(s,o){var u=this.Aa[0].o,p=u[2*s]-u[2*o];return s=u[2*s+1]-u[2*o+1],Math.sqrt(p*p+s*s)},a.prototype.FR=function(s){if(0>s||s>=this.xa)throw c.i.de();this.oc();var o=new c.Ta;o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.ld(u),f=0,m=c.sa.Wa(p);f<m;f++){var v=this.Aa[u].gg(m*s+f);o.setAttribute(p,f,v)}return o},a.prototype.Fh=function(s,o){if(0>s||s>=this.xa)throw c.i.de();if(o.B())throw c.i.O();this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.ld(p),m=c.sa.Wa(f),v=0;v<m;v++){var _=o.Vc(f,v);this.setAttribute(f,s,v,_)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(c.ba);c.Fx=w}(q||(q={})),function(c){var C=function(){function w(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new c.ad(7),this.ao=null}return w.prototype.Xo=function(h){this.ao=h},w.prototype.MP=function(){this.Tv=!1},w.prototype.Ee=function(h){this.ob.Ee(h)},w.prototype.Rr=function(h){var a=this.ob.De();return this.nX(a),this.qX(h,a),a},w.prototype.HP=function(h){this.ob.kd(h)},w.prototype.addElement=function(h,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.AD(h,0,a)},w.prototype.ED=function(h){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(h,1,this.Ne)},w.prototype.zn=function(h){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,s=this.ob.o;if(a==-1||s[7*a]==-1)return h=this.ob.Nl([-1,-1,-1,h,this.il(),-1,-1]),(s=this.ob.o)[7*a]=h,this.xp(-1,h,a,s),h;var o=a==-1?-1:s[7*a+2];return h=this.ob.Nl([-1,-1,o,h,this.il(),-1,-1]),(s=this.ob.o)[7*o+1]=h,this.ky(h,s),s[7*h+2]===-1&&(s[7*a]=h),this.xp(-1,h,a,s),h},w.prototype.Bu=function(h,a,s,o){var u=-1;u==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),u=this.Ne);var p=this.ob.o;if(u==-1||p[7*u]==-1)return s=this.ob.Nl([-1,-1,-1,s,this.il(),-1,-1]),(p=this.ob.o)[7*u]=s,this.xp(-1,s,u,p),s;if(o){o=a!=-1?this.ao.compare(this,s,a):-1;var f=h!=-1?this.ao.compare(this,s,h):1}else o=-1,f=1;if(o==0||f==0)return p[7*u+3]=o==0?a:h,-1;for((a!=-1&&h!=-1?this.Vm>c.P.XA(this.Vm)>>1:a!=-1)?h=a:o=f,a=!0;;){if(0>o){if((f=p[7*h])==-1){o=h,s=this.ob.Nl([-1,-1,h,s,this.il(),-1,-1]),(p=this.ob.o)[7*h]=s;break}h=f}else{if((f=p[7*h+1])==-1){o=p[7*h+6],s=this.ob.Nl([-1,-1,h,s,this.il(),-1,-1]),(p=this.ob.o)[7*h+1]=s;break}h=f}a&&(o*=-1,a=!1)}return this.ky(s,p),p[7*s+2]===-1&&(p[7*u]=s),this.xp(o,s,u,p),s},w.prototype.AF=function(){return this.dR(this.Ne)},w.prototype.wd=function(h,a){a=a==-1?this.Ne:a,this.Tv?this.GP(h,a):this.eY(h,a)},w.prototype.search=function(h,a){for(a=this.uv(a);a!=-1;){var s=this.ao.compare(this,h,a);if(s==0)return a;a=0>s?this.nl(a):this.Zp(a)}return-1},w.prototype.DW=function(h){for(var a=this.uv(-1),s=-1;a!=-1;){var o=h.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(s=a,a=this.Zp(a))}return s},w.prototype.pJ=function(h){for(var a=this.uv(-1),s=-1;a!=-1;){var o=h.compare(this,a);if(o==0)return a;0>o?(s=a,a=this.nl(a)):a=this.Zp(a)}return s},w.prototype.ka=function(h){return this.ob.U(h,3)},w.prototype.nl=function(h){return this.ob.U(h,0)},w.prototype.Zp=function(h){return this.ob.U(h,1)},w.prototype.getParent=function(h){return this.ob.U(h,2)},w.prototype.lb=function(h){return this.ob.U(h,6)},w.prototype.xe=function(h){return this.ob.U(h,5)},w.prototype.sc=function(h){return h==-1?this.ml(this.Ne):this.ml(h)},w.prototype.Gc=function(h){return h==-1?this.bs(this.Ne):this.bs(h)},w.prototype.UR=function(h){return h==-1?this.XF(this.Ne):this.XF(h)},w.prototype.Uj=function(h,a){this.IB(h,a)},w.prototype.uv=function(h){return h==-1?this.TF(this.Ne):this.TF(h)},w.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},w.prototype.size=function(h){return h==-1?this.VF(this.Ne):this.VF(h)},w.prototype.FN=function(h,a){for(var s=a[7*h],o=a[7*h+1],u=a[7*h+4];s!=-1||o!=-1;){var p=s!=-1?a[7*s+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,u<=Math.min(p,o))break;p<=o?this.nJ(s,a):this.mJ(h,a),s=a[7*h],o=a[7*h+1]}},w.prototype.ky=function(h,a){if(this.Tv)for(var s=a[7*h+4],o=a[7*h+2];o!=-1&&a[7*o+4]>s;)a[7*o]==h?this.nJ(h,a):this.mJ(o,a),o=a[7*h+2]},w.prototype.mJ=function(h,a){var s=a[7*h+1];a[7*s+2]=a[7*h+2],a[7*h+2]=s;var o=a[7*s];a[7*h+1]=o,o!=-1&&(a[7*o+2]=h),a[7*s]=h,(o=a[7*s+2])!=-1&&(a[7*o]==h?a[7*o]=s:a[7*o+1]=s)},w.prototype.nJ=function(h,a){var s=a[7*h+2];a[7*h+2]=a[7*s+2],a[7*s+2]=h;var o=a[7*h+1];a[7*s]=o,o!=-1&&(a[7*o+2]=s),a[7*h+1]=s,(o=a[7*h+2])!=-1&&(a[7*o]===s?a[7*o]=h:a[7*o+1]=h)},w.prototype.Rk=function(h,a){this.ob.T(h,2,a)},w.prototype.OB=function(h,a){this.ob.T(h,0,a)},w.prototype.SB=function(h,a){this.ob.T(h,1,a)},w.prototype.RB=function(h,a){this.ob.T(h,5,a)},w.prototype.fx=function(h,a){this.ob.T(h,6,a)},w.prototype.SJ=function(h,a){this.ob.T(a,0,h)},w.prototype.nX=function(h){this.ob.T(h,4,0)},w.prototype.qX=function(h,a){this.ob.T(a,5,h)},w.prototype.TF=function(h){return h==-1?-1:this.ob.U(h,0)},w.prototype.ml=function(h){return h==-1?-1:this.ob.U(h,1)},w.prototype.bs=function(h){return h==-1?-1:this.ob.U(h,2)},w.prototype.dR=function(h){return h==-1?-1:this.ob.U(h,3)},w.prototype.VF=function(h){return h==-1?0:this.ob.U(h,4)},w.prototype.XF=function(h){return this.ob.U(h,5)},w.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},w.prototype.hl=function(h){h!=-1&&this.ob.kd(h)},w.prototype.il=function(){return this.Vm=c.P.XA(this.Vm),1073741823&this.Vm},w.prototype.AD=function(h,a,s){var o=this.ob.o;if(s==-1||o[7*s]==-1)return h=this.ob.Nl([-1,-1,-1,h,this.il(),-1,-1]),(o=this.ob.o)[7*s]=h,this.xp(-1,h,s,o),h;for(var u=s==-1?-1:o[7*s];;){var p=a==-1?1:this.ao.compare(this,h,u);if(0>p){if((p=this.nl(u))==-1){a=u,h=this.ob.Nl([-1,-1,u,h,this.il(),-1,-1]),(o=this.ob.o)[7*u]=h;break}u=p}else{if(a==1&&p==0)return o[7*s+3]=u,-1;if((p=o[7*u+1])==-1){a=o[7*u+6],h=this.ob.Nl([-1,-1,u,h,this.il(),-1,-1]),(o=this.ob.o)[7*u+1]=h;break}u=p}}return this.ky(h,o),o[7*h+2]===-1&&(o[7*s]=h),this.xp(a,h,s,o),h},w.prototype.xp=function(h,a,s,o){if(h!=-1){var u=o[7*h+5];o[7*h+5]=a}else u=s==-1?-1:o[7*s+2];o[7*a+5]=u,u!=-1&&(o[7*u+6]=a),o[7*a+6]=h,h==(s==-1?-1:o[7*s+1])&&(o[7*s+1]=a),h==-1&&(o[7*s+2]=a),o[7*s+4]=(s==-1?0:o[7*s+4])+1},w.prototype.vB=function(h,a){var s=this.ob.o,o=s[7*h+5];h=s[7*h+6],o!=-1?s[7*o+6]=h:s[7*a+1]=h,h!=-1?s[7*h+5]=o:s[7*a+2]=o,s[7*a+4]=a===-1?-1:s[7*a+4]-1},w.prototype.eY=function(h,a){this.vB(h,a);var s=this.nl(h),o=this.Zp(h),u=this.getParent(h),p=h;if(s!=-1&&o!=-1){this.Vm=c.P.XA(this.Vm);var f=1073741823<this.Vm?this.lb(h):this.xe(h),m=this.getParent(f)==h;this.ob.bC(h,f,0),this.ob.bC(h,f,1),this.ob.bC(h,f,2),u!=-1?this.nl(u)==h?this.OB(u,f):this.SB(u,f):this.SJ(f,a),m?(s==f?(this.OB(f,h),this.Rk(o,f)):o==f&&(this.SB(f,h),this.Rk(s,f)),this.Rk(h,f),u=f):(this.Rk(s,f),this.Rk(o,f),u=this.getParent(h),p=f),s=this.nl(h),o=this.Zp(h),s!=-1&&this.Rk(s,h),o!=-1&&this.Rk(o,h)}s=s!=-1?s:o,u==-1?this.SJ(s,a):this.nl(u)==p?this.OB(u,s):this.SB(u,s),s!=-1&&this.Rk(s,u),this.hl(h)},w.prototype.GP=function(h,a){var s=this.ob.o;s[7*h+4]=2147483647;var o=-1,u=-1,p=a===-1?-1:s[7*a],f=p==h;if(f&&(o=s[7*p],u=s[7*p+1],o==-1&&u==-1))return this.vB(p,a),this.hl(p),void(s[7*a]=-1);this.FN(h,s),(p=s[7*h+2])!=-1&&(s[7*p]==h?s[7*p]=-1:s[7*p+1]=-1),this.vB(h,a),this.hl(h),f&&(s[7*a]=o==-1||s[7*o+2]!=-1?u:o)},w.prototype.IB=function(h,a){this.ob.T(h,3,a)},w}();c.$j=C}(q||(q={})),function(c){var C=function(){function w(h,a){h!==void 0&&this.L(h,a)}return w.prototype.L=function(h,a){this.pa=h,this.wa=a,this.normalize()},w.prototype.isIntersecting=function(h){return this.pa<=h.pa?this.wa>=h.pa:h.wa>=this.pa},w.prototype.move=function(h){this.B()||(this.pa+=h,this.wa+=h)},w.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var h=this.pa;this.pa=this.wa,this.wa=h}isNaN(this.wa)&&this.Pa()}},w.prototype.Pa=function(){this.wa=this.pa=NaN},w.prototype.B=function(){return isNaN(this.pa)},w.prototype.$b=function(h){typeof h=="number"?this.B()?this.wa=this.pa=h:this.Nk(h):h.B()||(this.B()?(this.pa=h.pa,this.wa=h.wa):(this.pa>h.pa&&(this.pa=h.pa),this.wa<h.wa&&(this.wa=h.wa),this.pa>this.wa&&this.Pa()))},w.prototype.Nk=function(h){h<this.pa?this.pa=h:h>this.wa&&(this.wa=h)},w.prototype.contains=function(h){return typeof h=="number"?h>=this.pa&&h<=this.wa:h.pa>=this.pa&&h.wa<=this.wa},w.prototype.Fa=function(h){this.B()||h.B()?this.Pa():(this.pa<h.pa&&(this.pa=h.pa),this.wa>h.wa&&(this.wa=h.wa),this.pa>this.wa&&this.Pa())},w.prototype.X=function(h){this.B()||(this.pa-=h,this.wa+=h,this.wa<this.pa&&this.Pa())},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},w.prototype.FB=function(h,a){h>a?(this.pa=a,this.wa=h):(this.pa=h,this.wa=a)},w.prototype.Kt=function(h){return c.P.Tk(h,this.pa,this.wa)},w.prototype.S=function(){return this.wa-this.pa},w.prototype.tf=function(){return .5*(this.pa+this.wa)},w.prototype.Nb=function(h){return h==this||h instanceof w&&(!(!this.B()||!h.B())||this.pa==h.pa&&this.wa==h.wa)},w.prototype.dc=function(){return c.P.wj(c.P.wj())},w}();c.Oc=C}(q||(q={})),function(c){var C=new c.Oc,w=new c.Oc,h=function(){this.oe=null,this.pb=-1,this.tb=new c.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new c.Oc,this.Wf.FB(0,0)};c.EY=h;var a=function(){function s(o,u,p){this.g=o,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=u,this.Pq=10*u,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=p,this.OA=new h,this.TH=new h,c.P.truncate(3*o.gd/2)}return s.prototype.hG=function(o,u,p,f){o.oe=f===null?null:f[p[5*u]],o.Vv=o.oe!=null,o.Vv||((f=p[5*u+2])!==-1&&this.g.hW(p[5*u],p[5*f],o.tb),o.oe=o.tb,o.Wf.FB(o.tb.ta,o.tb.qa),o.Wf.wa+=this.ra,o.tb.mI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.lA=(o.tb.qa-o.tb.ta)/(o.tb.ma-o.tb.oa)))},s.prototype.JO=function(o,u){var p=o.Br(u,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(Kn),o.Vr(ea),u.$p(Zn),u.Vr(ta),Ti.na(this.Mq,this.Jk),Kn.rb(Zn)&&this.Jk==Kn.y?0>ea.compare(ta)?Ti.N(ea):Ti.N(ta):Kn.rb(ta)&&this.Jk==Kn.y?0>ea.compare(Zn)?Ti.N(ea):Ti.N(Zn):Zn.rb(ea)&&this.Jk==Zn.y?0>Kn.compare(ta)?Ti.N(Kn):Ti.N(ta):ea.rb(ta)&&this.Jk==ea.y&&(0>Kn.compare(Zn)?Ti.N(Kn):Ti.N(Zn)),o.Me(Ti.y,Ti.x)<u.Me(Ti.y,Ti.x)?-1:1)},s.prototype.HO=function(o,u){if(o.tb.oa==u.tb.oa&&o.tb.ta==u.tb.ta)return o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa?this.bA?this.Ly():0:this.KE(o,u);if(o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa)return this.JE(o,u);var p=this.JE(o,u);return o=this.KE(o,u),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},s.prototype.DO=function(o,u){if(o.qa>u.qa){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.qa-o.ta)<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 1},s.prototype.EO=function(o,u){if(o.ta<u.ta){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.ta-o.qa)<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi();return-1},s.prototype.FO=function(o,u){var p=new c.h;p.vc(u.xc(),u.bc()),p.cr(),p.normalize();var f=new c.h;f.vc(o.bc(),u.bc());var m=new c.h;m.vc(o.xc(),u.bc()),f=f.Sh(p),p=m.Sh(p),m=Math.abs(f);var v=Math.abs(p);if(m<v){if(m<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi()}else if(v<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 0>f&&0>p?-1:0<f&&0<p?1:this.zi()},s.prototype.IE=function(o,u){return o.oa==u.oa&&o.ta==u.ta?this.DO(o,u):o.ma==u.ma&&o.qa==u.qa?this.EO(o,u):this.FO(o,u)},s.prototype.GO=function(o,u){return o.ma==u.ma&&o.qa==u.qa&&o.oa==u.oa&&o.ta==u.ta?this.bA?this.Ly():0:this.zi()},s.prototype.JE=function(o,u){var p=1;if(o.tb.oa<u.tb.oa){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var m=o.ta-f.ta;u=u.lA*(o.oa-f.oa);var v=this.Pq;return m<u-v?-p:m>u+v?p:f.xi(o.ta,o.oa,this.ra)?this.zi():m<u?-p:p},s.prototype.KE=function(o,u){var p=1;if(u.tb.ma<o.tb.ma){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var m=o.qa-f.ta;u=u.lA*(o.ma-f.oa);var v=this.Pq;return m<u-v?-p:m>u+v?p:f.xi(o.qa,o.ma,this.ra)?this.zi():m<u?-p:p},s.prototype.Ly=function(){return this.sg=!0,this.Pi=new c.Nd(5,this.No,this.ht),-1},s.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new c.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},s.prototype.IO=function(o,u,p,f){if(this.sg)return-1;var m=this.JH==this.Jk&&this.IH==this.Mq;if(m&&o==this.Ys)var v=this.KH;else v=NaN,this.Ys=-1;return m&&u==this.Zs?m=this.LH:(m=NaN,this.Zs=-1),p.oe.UI(C),f.oe.UI(w),C.wa<w.pa?-1:w.wa<C.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(v)&&(this.Ys=o,this.KH=v=o=p.oe.Me(this.Jk,this.Mq)),isNaN(m)&&(this.Zs=u,this.LH=m=o=f.oe.Me(this.Jk,this.Mq)),Math.abs(v-m)<=this.ra?this.JO(p.oe,f.oe):v<m?-1:v>m?1:0)},s.prototype.Mr=function(){this.sg=!1},s.prototype.tm=function(){return this.Pi},s.prototype.VJ=function(o,u){this.Jk=o,this.Mq=u,this.ht=this.No=this.Zs=this.Ys=-1},s.prototype.compare=function(o,u,p){return this.sg?-1:(o=o.ka(p),this.Fm=p,this.ME(u,u,o,o))},s.prototype.ME=function(o,u,p,f){if(this.No==u)var m=this.OA;else this.No=u,m=this.OA,this.OA.pb=o,this.hG(m,u,this.g.ud.o,this.g.Te);if(v==null){this.ht=f;var v=this.TH;this.TH.pb=p,this.hG(v,f,this.g.ud.o,this.g.Te)}return m.Vv||v.Vv?this.IO(u,f,m,v):m.Wf.wa<v.Wf.pa?-1:v.Wf.wa<m.Wf.pa?1:(o=m.Xv?1:0,(o|=v.Xv?2:0)==0?this.HO(m,v):o==1?this.IE(m.tb,v.tb):o==2?-1*this.IE(v.tb,m.tb):this.GO(m.tb,v.tb))},s}();c.PC=a}(q||(q={})),function(c){var C=function(){function w(h,a){this.g=h,this.ra=a,this.sg=!1,this.No=-1,this.Wf=new c.Oc,this.Iq=new c.h,this.Iq.Sc(),this.je=new c.zb,this.Fm=-1,this.wA=17976931348623157e292}return w.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},w.prototype.Fh=function(h){this.Iq.N(h)},w.prototype.compare=function(h,a){return this.NE(a,h.ka(a))},w.prototype.NE=function(h,a){var s=this.g.cc(a)!=null;if(s||(this.g.fd(a,this.je),this.Wf.FB(this.je.ta,this.je.qa)),s)throw c.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=h,this.sg=!0,0;this.je.mI(),s=this.je.bc(),(a=new c.h).vc(this.je.xc(),s),a.cr();var o=new c.h;return o.vc(this.Iq,s),s=a.Sh(o),(s/=a.length())<10*-this.ra?-1:s>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((a=Math.abs(s))<this.wA&&(this.Fm=h,this.wA=a),this.sg=!0,a<.25*this.ra)?0:0>s?-1:1},w}();c.WL=C}(q||(q={})),function(c){function C(h,a,s,o){s=new Float64Array(h.subarray(s,o)),h.set(s,a)}var w=function(){function h(a){this.Pb=this.rk=!1,this.o=null;var s=a;2>s&&(s=2),this.o=new Float64Array(s),this.size=a}return h.prototype.rotate=function(a,s,o){if(this.Pb)throw c.i.ga("invalid_call");if(s<a||s>o||a>o)throw c.i.O();a!=s&&o!=s&&(this.pi(a,s-a,1),this.pi(s,o-s,1),this.pi(a,o-a,1))},h.rf=function(a,s){var o=new h(a),u=o.o;if(2>a&&(a=2),s!==0)for(var p=0;p<a;p++)u[p]=s;return o},h.Dn=function(a){var s=new h(0);return s.o=new Float64Array(a.o),s.size=a.size,s},h.Nr=function(a,s){var o=new h(0);return o.size=a.size,o.size>s&&(o.size=s),2>(s=o.size)&&(s=2),o.o=new Float64Array(s),o.o.set(a.o.length<=s?a.o:a.o.subarray(0,s),0),o},h.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},h.prototype.read=function(a){return this.o[a]},h.prototype.uc=function(a,s){s.x=this.o[a],s.y=this.o[a+1]},h.prototype.get=function(a){return this.o[a]},h.prototype.write=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.set=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.Vt=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},h.prototype.BB=function(a){return h.Nr(this,a)},h.prototype.gg=function(a){return this.read(a)},h.prototype.resize=function(a,s){if(s===void 0&&(s=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=s}this.size=a},h.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},h.prototype.rr=function(a,s){this.write(a,s)},h.prototype.Cn=function(a,s,o){for(var u=this.size;s<u&&s<o;s++)a=c.P.wj(this.read(s));return a},h.prototype.Nb=function(a,s,o){if(a==null||!(a instanceof h))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);s<o;s++)if(this.read(s)!=a.read(s))return!1;return!0},h.prototype.addRange=function(a,s,o,u,p){if(this.Pb)throw c.i.Hb();if(!u&&(1>p||o%p!=0))throw c.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(s,s+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var v=0;v<p;v++)this.o[f+m+v]=a.o[s+u+v]}}},h.prototype.On=function(a,s,o,u,p,f,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>f||u%f!=0))throw c.i.O();var v=this.size-m;if(v<u&&this.resize(this.size+u-v),C(this.o,a+u,a,a+(m-a)),this.o==s.o&&a<o&&(o+=u),p)this.o.set(s.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f)for(p-=f,v=0;v<f;v++)this.o[a+m+v]=s.o[o+p+v]},h.prototype.Dz=function(a,s,o,u,p,f){if(this.Pb)throw c.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,C(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=s[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=s[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},h.prototype.Nn=function(a,s,o,u){if(this.Pb)throw c.i.Hb();for(u-=a,C(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=s},h.prototype.xj=function(a,s,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.Wt=function(a,s,o,u,p,f){if(0>a||0>s||0>u||!p&&(0>=f||s%f!=0)||o.size<u+s)throw c.i.O();if(s!=0)if(this.size<s+a&&this.resize(s+a),o==this)this.Cr(a,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,s=c.P.truncate(s/f);p<s;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},h.prototype.Gn=function(a,s,o){if(this.Pb||a+s>this.size)throw c.i.Hb();0<o-(a+s)&&C(this.o,a,a+s,a+(o-(a+s))+s),this.size-=s},h.prototype.pi=function(a,s,o){if(this.Pb||1>o||s%o!=0)throw c.i.Hb();for(var u=s>>1,p=0;p<u;p+=o){s-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+s+f],this.o[a+s+f]=m}}},h.prototype.Yj=function(a,s,o){if(0>s||0>o||0>s||o+s>this.size)throw c.i.O();for(var u=s;u<s+o;u++)this.o[u]=a},h.prototype.Cr=function(a,s,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+s),a),u)))for(o=a,a=a+s-p,u=0,s=c.P.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},h.prototype.qC=function(a,s,o,u,p){if(0>a||0>s||0>u)throw c.i.O();if(s!=0)for(this.size<(s<<1)+a&&this.resize((s<<1)+a),p||(a+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},h.prototype.pC=function(a,s,o){if(0>a||0>s)throw c.i.O();if(s!=0){this.size<(s<<1)+a&&this.resize((s<<1)+a),s+=0;for(var u=0;u<s;u++)this.o[a]=o[u][0],this.o[a+1]=o[u][1],a+=2}},h.prototype.Xw=function(a,s,o,u,p){if(0>a||0>s||0>u||this.size<s+a)throw c.i.O();if(p)for(p=0;p<s;p++)o[u+p]=this.o[a+p];else for(u=u+s-1;a<s;a++)o[u]=this.o[a],u--},h.prototype.pB=function(a,s,o){if(0>a||0>s||this.size<(s>>1)+a)throw c.i.O();if(s!=0){s=0+s;for(var u=0;u<s;u++)o[u][0]=this.o[a],o[u][1]=this.o[a+1],a+=2}},h.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(a,s,o){Array.prototype.sort.call(this.o.subarray(a,s),o)},h.prototype.Vp=function(){return 1},h}();c.ce=w}(q||(q={})),function(c){function C(h,a,s,o){s=new Int32Array(h.subarray(s,o)),h.set(s,a)}c.nY=function(){this.random=1973};var w=function(){function h(a){this.Pb=this.rk=!1,this.o=null;var s=a;2>s&&(s=2),this.o=new Int32Array(s),this.size=a}return h.prototype.rotate=function(a,s,o){if(this.Pb)throw c.i.ga("invalid_call");if(s<a||s>o||a>o)throw c.i.O();a!=s&&o!=s&&(this.pi(a,s-a,1),this.pi(s,o-s,1),this.pi(a,o-a,1))},h.rf=function(a,s){var o=new h(a),u=o.o;if(2>a&&(a=2),s!==0)for(var p=0;p<a;p++)u[p]=s;return o},h.Dn=function(a){var s=new h(0);return s.o=new Int32Array(a.o),s.size=a.size,s},h.Nr=function(a,s){var o=new h(0);return o.size=a.size,o.size>s&&(o.size=s),2>(s=o.size)&&(s=2),o.o=new Int32Array(s),o.o.set(a.o.length<=s?a.o:a.o.subarray(0,s),0),o},h.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},h.prototype.read=function(a){return this.o[a]},h.prototype.uc=function(a,s){s.x=this.o[a],s.y=this.o[a+1]},h.prototype.get=function(a){return this.o[a]},h.prototype.write=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.set=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.Vt=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},h.prototype.BB=function(a){return h.Nr(this,a)},h.prototype.gg=function(a){return this.read(a)},h.prototype.resize=function(a,s){if(s===void 0&&(s=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=s}this.size=a},h.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},h.prototype.rr=function(a,s){this.write(a,s)},h.prototype.Cn=function(a,s,o){for(var u=this.size;s<u&&s<o;s++)a=c.P.Vh(this.read(s),a);return a},h.prototype.Nb=function(a,s,o){if(a==null||!(a instanceof h))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);s<o;s++)if(this.read(s)!=a.read(s))return!1;return!0},h.prototype.addRange=function(a,s,o,u,p){if(this.Pb)throw c.i.Hb();if(!u&&(1>p||o%p!=0))throw c.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(s,s+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var v=0;v<p;v++)this.o[f+m+v]=a.o[s+u+v]}}},h.prototype.On=function(a,s,o,u,p,f,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>f||u%f!=0))throw c.i.O();if(C(this.o,a+u,a,a+(m-a)),this.o==s.o&&a<o&&(o+=u),p)this.o.set(s.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f){p-=f;for(var v=0;v<f;v++)this.o[a+m+v]=s.o[o+p+v]}},h.prototype.Dz=function(a,s,o,u,p,f){if(this.Pb)throw c.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,C(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=s[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=s[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},h.prototype.Nn=function(a,s,o,u){if(this.Pb)throw c.i.Hb();for(u-=a,C(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=s},h.prototype.xj=function(a,s,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.Wt=function(a,s,o,u,p,f){if(0>a||0>s||0>u||!p&&(0>=f||s%f!=0)||o.size<u+s)throw c.i.O();if(s!=0)if(this.size<s+a&&this.resize(s+a),o==this)this.Cr(a,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,s=c.P.truncate(s/f);p<s;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},h.prototype.Gn=function(a,s,o){if(this.Pb||a+s>this.size)throw c.i.Hb();0<o-(a+s)&&C(this.o,a,a+s,a+(o-(a+s))+s),this.size-=s},h.prototype.pi=function(a,s,o){if(this.Pb||1>o||s%o!=0)throw c.i.Hb();for(var u=s>>1,p=0;p<u;p+=o){s-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+s+f],this.o[a+s+f]=m}}},h.prototype.Yj=function(a,s,o){if(0>s||0>o||0>s||o+s>this.size)throw c.i.O();for(var u=s;u<s+o;u++)this.o[u]=a},h.prototype.Cr=function(a,s,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+s),a),u)))for(o=a,a=a+s-p,u=0,s=c.P.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},h.prototype.qC=function(a,s,o,u,p){if(0>a||0>s||0>u)throw c.i.O();if(s!=0)for(this.size<(s<<1)+a&&this.resize((s<<1)+a),p||(a+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},h.prototype.Xw=function(a,s,o,u,p){if(0>a||0>s||0>u||this.size<s+a)throw c.i.O();if(p)for(p=0;p<s;p++)o[u+p]=this.o[a+p];else for(u=u+s-1;a<s;a++)o[u]=this.o[a],u--},h.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(a,s,o){10>s-a?h.mG(this.o,a,s,o):h.lB(this.o,a,s-1,o)},h.prototype.Vp=function(){return 2},h.prototype.Gc=function(){return this.o[this.size-1]},h.prototype.Jf=function(){this.resize(this.size-1)},h.prototype.XW=function(a){this.o[this.size-1]=a},h.prototype.NV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},h.prototype.gF=function(a){for(var s=0,o=this.size;s<o;s++)if(this.o[s]==a)return s;return-1},h.prototype.cG=function(a){return 0<=this.gF(a)},h.mG=function(a,s,o,u){for(var p=s;p<o;p++){for(var f=a[p],m=p-1;m>=s&&0<u(a[m],f);)a[m+1]=a[m],m--;a[m+1]=f}},h.sx=function(a,s,o){var u=a[o];a[o]=a[s],a[s]=u},h.lB=function(a,s,o,u){if(!(s>=o))for(;;){if(9>o-s){h.mG(a,s,o+1,u);break}var p=a[s];h.sx(a,s,o);for(var f=s,m=s;m<o;m++)0>=u(a[m],p)&&(h.sx(a,f,m),f+=1);h.sx(a,f,o),f-s<o-f?(h.lB(a,s,f-1,u),s=f+1):(h.lB(a,f+1,o,u),o=f-1)}},h}();c.ja=w}(q||(q={})),function(c){function C(h,a,s,o){s=new Int8Array(h.subarray(s,o)),h.set(s,a)}var w=function(){function h(a){this.o=null;var s=a;2>s&&(s=2),this.o=new Int8Array(s),this.size=a}return h.prototype.rotate=function(a,s,o){if(this.Pb)throw c.i.ga("invalid_call");if(s<a||s>o||a>o)throw c.i.O();a!=s&&o!=s&&(this.pi(a,s-a,1),this.pi(s,o-s,1),this.pi(a,o-a,1))},h.rf=function(a,s){var o=new h(a),u=o.o;if(2>a&&(a=2),s!==0)for(var p=0;p<a;p++)u[p]=s;return o},h.Dn=function(a){var s=new h(0);return s.o=new Int8Array(a.o),s.size=a.size,s},h.Nr=function(a,s){var o=new h(0);return o.size=a.size,o.size>s&&(o.size=s),2>(s=o.size)&&(s=2),o.o=new Int8Array(s),o.o.set(a.o.length<=s?a.o:a.o.subarray(0,s),0),o},h.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},h.prototype.read=function(a){return this.o[a]},h.prototype.uc=function(a,s){s.x=this.o[a],s.y=this.o[a+1]},h.prototype.get=function(a){return this.o[a]},h.prototype.write=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.set=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.Vt=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},h.prototype.BB=function(a){return h.Nr(this,a)},h.prototype.gg=function(a){return this.read(a)},h.prototype.resize=function(a,s){if(s===void 0&&(s=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=s}this.size=a},h.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},h.prototype.rr=function(a,s){this.write(a,s)},h.prototype.Cn=function(a,s,o){for(var u=this.size;s<u&&s<o;s++)a=c.P.Vh(this.read(s),a);return a},h.prototype.Nb=function(a,s,o){if(a==null||!(a instanceof h))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);s<o;s++)if(this.read(s)!=a.read(s))return!1;return!0},h.prototype.addRange=function(a,s,o,u,p){if(this.Pb)throw c.i.Hb();if(!u&&(1>p||o%p!=0))throw c.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(s,s+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var v=0;v<p;v++)this.o[f+m+v]=a.o[s+u+v]}}},h.prototype.On=function(a,s,o,u,p,f,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>f||u%f!=0))throw c.i.O();if(C(this.o,a+u,a,a+(m-a)),this.o==s.o&&a<o&&(o+=u),p)this.o.set(s.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f){p-=f;for(var v=0;v<f;v++)this.o[a+m+v]=s.o[o+p+v]}},h.prototype.Nn=function(a,s,o,u){if(this.Pb)throw c.i.Hb();for(u-=a,C(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=s},h.prototype.Dz=function(a,s,o,u,p,f){if(this.Pb)throw c.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,C(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=s[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=s[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},h.prototype.xj=function(a,s,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.Wt=function(a,s,o,u,p,f){if(0>a||0>s||0>u||!p&&(0>=f||s%f!=0)||o.size<u+s)throw c.i.O();if(s!=0)if(this.size<s+a&&this.resize(s+a),o==this)this.Cr(a,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,s=c.P.truncate(s/f);p<s;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},h.prototype.Gn=function(a,s,o){if(this.Pb||a+s>this.size)throw c.i.Hb();0<o-(a+s)&&C(this.o,a,a+s,a+(o-(a+s))+s),this.size-=s},h.prototype.pi=function(a,s,o){if(this.Pb||1>o||s%o!=0)throw c.i.Hb();for(var u=s>>1,p=0;p<u;p+=o){s-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+s+f],this.o[a+s+f]=m}}},h.prototype.Yj=function(a,s,o){if(0>s||0>o||0>s||o+s>this.size)throw c.i.O();for(var u=s;u<s+o;u++)this.o[u]=a},h.prototype.Cr=function(a,s,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+s),a),u)))for(o=a,a=a+s-p,u=0,s=c.P.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},h.prototype.qC=function(a,s,o,u,p){if(0>a||0>s||0>u)throw c.i.O();if(s!=0)for(this.size<(s<<1)+a&&this.resize((s<<1)+a),p||(a+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},h.prototype.Xw=function(a,s,o,u,p){if(0>a||0>s||0>u||this.size<s+a)throw c.i.O();if(p)for(p=0;p<s;p++)o[u+p]=this.o[a+p];else for(u=u+s-1;a<s;a++)o[u]=this.o[a],u--},h.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(a,s,o){s=this.o.subarray(a,s),Array.prototype.sort.call(s,o),this.o.set(s,a)},h.prototype.uJ=function(a,s){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=s},h.prototype.FE=function(a,s){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~s},h.prototype.Vp=function(){return 1},h}();c.rn=w}(q||(q={})),function(c){c.Zc=function(){function C(){}return C.Or=function(w,h){return c.rn.rf(w,h)},C.Fn=function(w,h){return c.ce.rf(w,h)},C.kP=function(w,h,a){switch(w){case 1:w=c.ce.rf(h,a);break;case 2:w=c.ja.rf(h,a);break;case 4:w=c.rn.rf(h,a);break;default:throw c.i.Ra()}return w},C.TE=function(w,h){return C.kP(c.sa.Vp(w),h*c.sa.Wa(w),c.sa.te(w))},C.Qh=function(w,h){return c.ja.rf(w,h)},C.lI=function(w){var h,a=[];for(h=0;h<w;h++)a.push(null);return a},C}()}(q||(q={})),function(c){c.ha=function(C){C===void 0&&(C=0),this.u=C}}(q||(q={})),function(c){c.IL=function(){function C(){}return C.bind=function(w){c.Tc=w.PeDefs,c.qf=w.PeFactory,c.IC=w.PeVertcs,c.gj=w.PeCSTransformations,c.HC=w.PeGTTransformations,c.GL=w.PeGeogtran,c.FL=w.PeFactoryCodechange,c.GC=w.PeGCSExtent,c.Eg=w.PePCSInfo,c.HL=w.PeHorizon,c.EL=w.PeCoordsys,c.np=w.PeGTlistExtended,c.np.PE_GTLIST_OPTS_USE_DEFAULT=128,c.qf.initialize(null),c.Lx=w.PeGTlistExtendedEntry,c.qf.fromString(c.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},C}(),c.qf=null,c.IC=null,c.EL=null,c.HL=null,c.Eg=null,c.np=null,c.Lx=null,c.GC=null,c.FL=null,c.GL=null,c.Tc=null,c.HC=null,c.gj=null}(q||(q={})),function(c){var C=function(){function w(){}return w.Mb=function(h,a){return 0<=a?w.R(h):-w.R(h)},w.R=function(h){return 0>h?-h:h},w.vi=function(h){return 3552713678800501e-30>h},w.FC=function(h,a,s){return w.R(h-a)<=s*(1+(w.R(h)+w.R(a))/2)},w.$=function(h,a){return w.FC(h,a,3552713678800501e-30)},w.AL=function(h){return 3552713678800501e-30>=w.R(h)},w.Dd=function(h){return w.AL(h)},w}();c.s=C,c.F=function(){function w(){}return w.ip=function(h,a){var s=0;return(h=C.R(h))+(a=C.R(a))!=0&&(h>a?(s=a/h,s=h*Math.sqrt(1+s*s)):(s=h/a,s=a*Math.sqrt(1+s*s))),s},w.Yq=function(h,a,s,o,u){for(var p=[0,0,0],f=[0,0,0],m=0;2>=m;m++)a[m]-=h[m],s[m]-=a[m];s=p[1]*f[2]-p[2]*f[1],a=p[2]*f[0]-p[0]*f[2],p=p[0]*f[1]-p[1]*f[0],h=-1*(s*h[0]+a*h[1]+p*h[2]),o[0]=s,o[1]=a,o[2]=p,o[3]=h,f=w.qn(o),o[0]/=f,o[1]/=f,o[2]/=f,o[3]/=f,u!=0&&(f=C.Dd(p)?C.Dd(h)?C.Mb(1,a):-C.Mb(1,h):C.Mb(1,p),f*=C.Mb(1,u),o[0]*=f,o[1]*=f,o[2]*=f,o[3]*=f)},w.yx=function(h,a,s){s[0]=h[1]*a[2]-a[1]*h[2],s[1]=h[2]*a[0]-a[2]*h[0],s[2]=h[0]*a[1]-a[0]*h[1]},w.Ut=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]},w.qn=function(h){return w.ip(w.ip(h[0],h[1]),h[2])},w.el=function(h,a,s,o,u,p,f,m){h=w.n(h,a,s);var v=Math.cos(s);p.u=(h+u)*v*Math.cos(o),f.u=(h+u)*v*Math.sin(o),m.u=(h*(1-a)+u)*Math.sin(s)},w.eO=function(h,a,s,o,u,p,f){var m=w.ip(a,s),v=1*Math.sqrt(1-h),_=v/1;if(C.$(m,0))p.u=0,u.u=C.Mb(1.570796326794897,o),f.u=C.R(o)-v;else{p.u=Math.atan2(s,a),s=Math.atan2(1*o,v*m),p=Math.cos(s);var M=Math.sin(s);a=v*h/(1-h),h*=1,s=Math.atan2(o+a*M*M*M,m-h*p*p*p),3.141592653589793<C.R(s)&&(s=C.Mb(3.141592653589793,s)-s),s=Math.atan(_*Math.tan(s)),M=Math.sin(s),p=Math.cos(s),u.u=Math.atan2(o+a*M*M*M,m-h*p*p*p),1.570796326794897<C.R(u.u)&&(u.u=C.Mb(3.141592653589793,u.u)-u.u),s=Math.atan(_*Math.tan(u.u)),M=Math.sin(s),p=Math.cos(s),f.u=(o-v*M)*Math.sin(u.u)+(m-1*p)*Math.cos(u.u)}},w.n=function(h,a,s){return s=Math.sin(s),h/Math.sqrt(1-a*s*s)},w.pt=function(h,a){return Math.atan2(Math.sin(a)*(1-h),Math.cos(a))},w.Sj=function(h,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-h))},w.Tq=function(h,a){if(C.vi(h)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>h){var s=Math.sqrt(1-h),o=(1-s)/(1+s),u=o*o,p=o*u,f=o*p,m=o*f,v=o*m,_=o*v,M=1.572916666666667*p-3.2578125*m+4.295068359375*_;h=2.142578125*f-6.071484375*v,s=3.129296875*m-11.249837239583334*_;var T=4.775276692708333*v,A=7.958636765252976*_,O=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*m-.2688395182291667*_-M+s-A+O*(2*(1.3125*u-1.71875*f+1.650146484375*v)-4*h+6*T+O*(4*M-12*s+24*A+O*(8*h-32*T+O*(16*s-80*A+O*(32*T+64*O*A))))))}for(s=1-h,o=h/2,p=(u=C.R(a))*w.av(h)/(1.570796326794897*s),f=9999,v=u,u=0;1e-16<f&&50>u;u++)_=w.w(h,v),m=v-(M=(m=(w.fG(v,h)-o*Math.sin(2*v)/_)/s-p)/(_=1/(_*_*_))),f=C.R(M),v=m;return 0<=a?v:-v},w.lW=function(h,a){return C.vi(a)?h:h*w.av(a)/1.570796326794897},w.ca=function(h){return 0>(h=w.kF(h,6.283185307179586))?h+6.283185307179586:3.141592653589793>C.R(h)||C.$(C.R(h),3.141592653589793)?h:h-6.283185307179586},w.kF=function(h,a){return h-Math.floor(h/a)*a},w.Ch=function(h,a){if(.006884661117170036>a){var s=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=s*s;return h/(1+a)*(1+.25*s+.015625*o+.00390625*s*o)*1.570796326794897}return h*w.av(a)},w.Xq=function(h,a){var s=C.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=C.R(w.kF(a,3.141592653589793)))?a:3.141592653589793-a,(C.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-h)*Math.tan(a)))*s},w.q=function(h,a,s){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,u=a*o,p=a*u,f=a*p,m=a*f,v=a*m,_=-.7291666666666666*u+.2278645833333333*f+.03987630208333334*v,M=.615234375*p-.21533203125*m,T=-.54140625*f+.20302734375*v,A=.48876953125*m,O=-.4488699776785715*v,R=Math.cos(2*s);return h/(1+a)*((1+.25*o+.015625*p+.00390625*m)*s+Math.sin(2*s)*(-1.5*a+.1875*u+.0234375*f+.00732421875*v-_+T-O+R*(2*(.9375*o-.234375*p-.03662109375*m)-4*M+6*A+R*(4*_-12*T+24*O+R*(8*M-32*A+R*(16*T-80*O+R*(32*A+64*R*O)))))))}return h*(w.fG(s,a)-.5*a*Math.sin(2*s)/w.w(a,s))},w.w=function(h,a){return a=Math.sin(a),Math.sqrt(1-h*a*a)},w.av=function(h){return C.FC(h,1,2220446049250313e-31)?1:1>h?w.Zw(0,1-h)-h/3*w.Ww(0,1-h):NaN},w.fG=function(h,a){var s=C.Mb(1,h);h=C.R(h);var o=Math.floor(h/1.570796326794897);if(1<a)a=h==0?0:NaN;else if(C.Dd(o))a=(h=w.sin(h))*w.Zw(1-h*h,1-a*h*h)-a/3*h*h*h*w.Ww(1-h*h,1-a*h*h);else{var u=c.P.truncate(o%2),p=w.av(a);0<u?a=p*(o+1)-(a=(h=Math.sin(1.570796326794897*(o+1)-h))*w.Zw(1-h*h,1-a*h*h)-a/3*h*h*h*w.Ww(1-h*h,1-a*h*h)):a=p*o+(a=(h=Math.sin(h-1.570796326794897*o))*w.Zw(1-h*h,1-a*h*h)-a/3*h*h*h*w.Ww(1-h*h,1-a*h*h))}return a*s},w.sin=function(h){h=w.ca(h);var a=C.Mb(1,h);return h=C.R(h),C.$(h,3.141592653589793)?0:C.$(h,1.570796326794897)?1*a:Math.sin(h)*a},w.Ww=function(h,a){var s,o,u,p,f=h,m=a,v=1;for(a=0,h=1;o=((s=.2*(f+m+3*v))-f)/s,u=(s-m)/s,p=(s-v)/s,!(1e-4>C.R(o)&&1e-4>C.R(u)&&1e-4>C.R(p));)p=Math.sqrt(m),a+=h/((s=Math.sqrt(v))*(v+(p=Math.sqrt(f)*(p+s)+p*s))),h*=.25,f=.25*(f+p),m=.25*(m+p),v=.25*(v+p);return m=(f=o*u)-(v=p*p),3*a+h*(1+(v=f-6*v)*(.10227272727272728*v-.2142857142857143-.1730769230769231*p*(o=v+m+m))+p*(.1666666666666667*o+p*(-.4090909090909091*m+.1153846153846154*p*f)))/(s*Math.sqrt(s))},w.Zw=function(h,a){for(var s,o,u,p,f=1;o=2-((s=(h+a+f)/3)+h)/s,u=2-(s+a)/s,p=2-(s+f)/s,!(1e-4>C.R(o)&&1e-4>C.R(u)&&1e-4>C.R(p));f=.25*(f+s))s=Math.sqrt(a),o=Math.sqrt(f),h=.25*(h+(s=Math.sqrt(h)*(s+o)+s*o)),a=.25*(a+s);return(1+(.04166666666666666*(h=o*u-p*p)-.1-.06818181818181818*(a=o*u*p))*h+.07142857142857142*a)/Math.sqrt(s)},w.Sw=function(h,a){if(C.vi(h)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>h){var s=h*h,o=h*s,u=h*o,p=h*u,f=h*p,m=h*f,v=-(.02708333333333333*o+.03430059523809524*u+.03149181547619048*p+.02634359154541446*f+.02156896735835538*m),_=.007669890873015873*u+.01299603174603175*p+.0148051353064374*f+.01454454953803912*m,M=-(.002275545634920635*p+.004830845032667949*f+.006558395368616723*m),T=.0006957236677288761*f+.001775193002406544*m,A=-.000217324089394402*m,O=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*h+.2083333333333333*s+.09375*o+.04878472222222222*u+.02916666666666667*p+.01938905423280423*f+.01388255931712963*m)-v+M-A+O*(2*(.1041666666666667*s+.0875*o+.06050347222222222*u+.04151785714285714*p+.02958958540013228*f+.02203667534722222*m)-4*_+6*T+O*(4*v-12*M+24*A+O*(8*_-32*T+O*(16*M-80*A+O*(32*T+64*O*A))))))}return a==0||C.$(C.R(a),1.570796326794897)?s=a:(u=(o=Math.sqrt(h))*Math.sin(a),s=Math.tan(.7853981633974483+a/2)*Math.pow((1-u)/(1+u),o/2),s=2*Math.atan(s)-1.570796326794897),s},w.tO=function(h,a){if(C.vi(h)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>h){var s=h*(T=h*(M=h*(O=h*h))),o=h*(A=h*s),u=.05833333333333333*M+.07232142857142858*T+.05634300595238095*s+.0355325796406526*A+.020235546186067*o,p=.02653149801587302*T+.04379960317460317*s+.0429211791776896*A+.03255384637546096*o,f=.01294022817460318*s+.02668104344536636*A+.03155651254609588*o,m=.00659454790965208*A+.0163075268674227*o,v=.003463473736911237*o,_=Math.cos(2*a);return a+Math.sin(2*a)*(.5*h+.2083333333333333*O+.08333333333333333*M+.03611111111111111*T+.01875*s+.01195601851851852*A+.008863673941798942*o-u+f-v+_*(2*(.1458333333333333*O+.1208333333333333*M+.07039930555555556*T+.03616071428571429*s+.01839451058201058*A+.01017113095238095*o)-4*p+6*m+_*(4*u-12*f+24*v+_*(8*p-32*m+_*(16*f-80*v+_*(32*m+64*_*v))))))}var M=Math.sqrt(h),T=M/2,A=Math.tan(.7853981633974483+a/2);h=0,u=1;for(var O=a;u!=0;O=o)s=M*Math.sin(O),o=A*Math.pow((1+s)/(1-s),T),o=2*Math.atan(o)-1.570796326794897,h++,(C.$(o,O)||3e4<h)&&(u=0);return O},w}()}(q||(q={})),function(c){var C=function(){function w(h){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new c.h,this.SH=new c.h,this.FA=!1,this.xq=new c.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=h,this.Cs=c.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var a=h.getCode();0<a?(this.Mk=a,c.qf.getCode(h)):this.Mk=c.qf.getCode(h),0>this.Mk&&(this.Mk=0);var s=this.Re.getType();if(this.eH=s==c.Tc.PE_TYPE_PROJCS?2:1,s==c.Tc.PE_TYPE_PROJCS&&!h.loadConstants())throw c.i.O("PeProjcs.loadConstants failed");a=s==c.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),s!=c.Tc.PE_TYPE_GEOGCS&&c.qf.getCode(a),this.Go=h.getUnit(),this.MH=a.getPrimem().getLongitude(),this.rH=h=a.getUnit().getUnitFactor(),h=Math.PI/(180*h),1e-10>Math.abs(h-1)&&(h=1),this.BA=h,s&c.Tc.PE_TYPE_PROJCS?(a=this.Re,this.CA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=c.Eg.generate(a,c.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=c.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,s=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*s,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return w.prototype.cs=function(){return this.Mk},w.prototype.mk=function(){return this.vw},w.Ky=function(h,a){return h==a||h!=null&&a!=null&&h.Mk==0&&a.Mk==0&&h.Cs===a.Cs},w.prototype.Xc=function(){return this.Bl},w.prototype.ih=function(h){h.L(this.uo)},w.prototype.rv=function(){return this.uo.v},w.prototype.qv=function(){return this.uo.C},w.prototype.BR=function(h){h.L(this.ww)},w.prototype.hY=function(){var h=this.Re.getType();if(h==c.Tc.PE_TYPE_PROJCS){h=this.Re;var a=this.mk().getCentralMeridian(),s=h.getGeogcs();if(s==null)throw c.i.ga("internal error");a=[[a+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],c.gj.geogToProj(h,1,a),a=a[0][0],s=h.getParameters()[c.Tc.PE_PARM_X0].getValue();var o=this.ol();h=new c.l,o.A(h),a=(o=Math.abs(a-s))+s,s=-1*o+s,o=h.H,h=h.G;var u=new c.l;u.L(s,h,a,o),this.uo==null&&(this.uo=u)}else{if(h!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");s=1/this.Re.getUnit().getUnitFactor()*Math.PI,(h=new c.l).L(-s,-s/2,s,s/2),this.uo==null&&(this.uo=h)}},w.prototype.iY=function(){var h=this.Re.getType();if(h==c.Tc.PE_TYPE_PROJCS){var a=this.Re;if(h=this.mk().getCentralMeridian(),(a=a.getGeogcs())==null)throw c.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var s=this.Xr(),o=new c.l;s.A(o),(s=new c.l).L(h-a,o.G,h+a,o.H),this.ww==null&&(this.ww=s)}else{if(h!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(h=new c.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=h)}},w.prototype.bf=function(){return this.BA},w.prototype.rm=function(){return this.CA},w.prototype.Xr=function(){if(this.Bl)return this.wl;var h=this.wl;return h??(this.wx(),this.wl)},w.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},w.prototype.wx=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var h=this.Re,a=h.getGeogcs(),s=h.horizonGcsGenerate();if(s!=null){var o=s[0].getNump(),u=s[0].getKind();h=0<s[0].getInclusive();var p=this.bf(),f=90*p,m=360*p,v=370*p,_=180*p*c.Tc.PE_HORIZON_DELTA/Math.PI,M=new c.l,T=null;if(1<o){for(var A=1;A<o;A++)if(s[A].getKind()==c.Tc.PE_HORIZON_LINE){T==null&&(T=new c.Ua);var O=s[A].getCoord();T.rx(O[0][0],O[0][1]),T.Aj(O[1][0],O[1][1])}}if(u==c.Tc.PE_HORIZON_RECT)s=s[0].getCoord(),M.L(s[0][0],s[0][1]),M.$b(s[1][0],s[1][1]),Math.abs(M.H-f)<1e-7*_&&(M.H=f),Math.abs(M.G+f)<1e-7*_&&(M.G=-f),M.S()>v&&(s=-400*p,M.L(s,M.G,s+5*m,M.H)),s=new c.Hh(M),this.wl==null&&(this.wl=s,this.Kv=h);else{if(v=new c.Ea,m=this.mk().isGcsHorizonMultiOverlap(),M=c.iu.XE(a,c.ju.Integer64),m){for(v=new c.bL,_=c.Ih.local().W(v,M,null),A=0;A<o;A++)if(s[A].getKind()==c.Tc.PE_HORIZON_POLY){for(a=s[A].getSize(),p=s[A].getCoord(),u=[],f=0;f<a;f++)u[f]=c.h.construct(p[f][0],p[f][1]);s[A].getInclusive(),m&&((p=new c.Ea).$k(u,a-1),v.VX(p),_.re())}v=_.next()}else for(A=0;A<o;A++)if(s[A].getKind()==c.Tc.PE_HORIZON_POLY){for(a=s[A].getSize(),p=s[A].getCoord(),m=[],f=0;f<a;f++)m[f]=c.h.construct(p[f][0],p[f][1]);s[A].getInclusive(),v.$k(m,a-1)}h?c.Zj.local().yn(v,M,1):c.mp.local().yn(v,M,1),c.fj.local().yn(v,M,1),this.wl==null&&(this.wl=v,this.Kv=h,this.TG=T)}}}},w.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},w.prototype.yK=function(){if(this.eH==2){var h=this.Re.horizonPcsGenerate();if(h!=null){var a=h[0].getKind();h[0].getInclusive();var s=h[0].getNump(),o=!1;if(a==c.Tc.PE_HORIZON_RECT)h=h[0].getCoord(),(s=new c.l).L(h[0][0],h[0][1]),s.$b(h[1][0],h[1][1]),h=new c.Hh(s);else{for(a=-1,o=0;o<s;o++)h[o].getKind()==c.Tc.PE_HORIZON_POLY&&(a=o);for(o=h[a].getSize()-1,h=h[a].getCoord(),s=[],a=0;a<o;a++)s[a]=c.h.construct(h[a][0],h[a][1]);h=a=new c.Ea,a.$k(s,o),o=!0}this.mk().isDensificationNeeded()&&(s=1e5*this.rm(),h=c.Zl.local().W(h,s,null)),o&&(o=new c.Hh,h.dn(o),h.He(),h.Rb(),h.kR(),c.Zj.local().yn(h,null,1)),this.Ws==null&&(this.Ws=h)}}},w.prototype.ol=function(){if(this.Bl)return this.Ws;var h=this.Ws;return h??(this.yK(),this.Ws)},w.prototype.jY=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var h=90*this.bf();h=[[0,h],[0,-h]],c.gj.geogToProj(this.Re,2,h);var a=this.mk(),s=a.getNorthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(s&&this.CH.na(h[0][0],h[0][1]),a&&this.SH.na(h[1][0],h[1][1]))}this.FA=!0},w.prototype.xK=function(){if(this.eH==1){var h=400*this.bf();this.xq.L(-h,-h,h,h)}else h=c.Eg.generate(this.Re,c.Eg.PE_PCSINFO_OPTION_DOMAIN),h=c.l.construct(h.getDomainMinx(),h.getDomainMiny(),h.getDomainMaxx(),h.getDomainMaxy()),this.xq.B()&&this.xq.L(h)},w.prototype.cR=function(h){this.Bl&&h.L(this.xq),this.xq.B()&&this.xK(),h.L(this.xq)},w.prototype.Wp=function(){return this.MH},w.prototype.Bi=function(){return this.Xz},w.prototype.Id=function(){return this.Go},w.prototype.Zr=function(){return this.rH},w}();c.JC=C}(q||(q={})),function(c){var C=function(){function w(h){this.FT=h,this.Cs=c.Ab.zv(h,0,!0);var a=h.getCode();this.us=0<a?a:c.qf.getCode(h),0>this.us&&(this.us=0),this.Go=a=this.FT.getUnit(),this.DH=1/a.getUnitFactor(),c.qf.getCode(h)}return w.Ky=function(h,a){return h==a||h!=null&&a!=null&&h.us==0&&a.us==0&&h.Cs===a.Cs},w.prototype.cs=function(){return this.us},w}();c.KL=C}(q||(q={})),function(c){c.$g=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f){if(u!=null||p!=null||f!=null){s=c.F.ca(s),h=c.F.ca(h),a=c.F.ca(a),o=c.F.ca(o),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,h=c.F.ca(h+3.141592653589793)),1.570796326794897<c.s.R(o)&&(o=c.s.Mb(3.141592653589793,o)-o,s=c.F.ca(s+3.141592653589793));var m=c.F.ca(s-h);if(c.s.$(a,o)&&(c.s.$(h,s)||c.s.$(c.s.R(a),1.570796326794897)))u!=null&&(u.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(c.s.$(a,-o)){if(c.s.$(c.s.R(a),1.570796326794897))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0<a?c.F.ca(3.141592653589793-c.F.ca(s)):c.F.ca(s)),void(f!=null&&(f.u=0<a?c.F.ca(s):c.F.ca(3.141592653589793-c.F.ca(s))));if(c.s.$(c.s.R(m),3.141592653589793))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0),void(f!=null&&(f.u=0))}var v=c.s.R(a)==1.570796326794897?0:Math.cos(a),_=Math.sin(a),M=c.s.R(o)==1.570796326794897?0:Math.cos(o),T=Math.sin(o),A=c.s.R(m)==1.570796326794897?0:Math.cos(m),O=c.s.R(m)==3.141592653589793?0:Math.sin(m);if(u!=null){var R=Math.sin((o-a)/2);m=Math.sin(m/2),u.u=2*Math.asin(Math.sqrt(R*R+v*M*m*m))*w}p!=null&&(p.u=c.s.$(c.s.R(a),1.570796326794897)?0>a?s:c.F.ca(3.141592653589793-s):Math.atan2(M*O,v*T-_*M*A)),f!=null&&(c.s.$(c.s.R(o),1.570796326794897)?f.u=0>o?h:c.F.ca(3.141592653589793-h):(f.u=Math.atan2(v*O,T*v*A-M*_),f.u=c.F.ca(f.u+3.141592653589793)))}}},C.sf=function(w,h,a,s,o,u,p){if(u!=null||p!=null){h=c.F.ca(h),a=c.F.ca(a),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,h=c.F.ca(h+3.141592653589793)),c.s.$(c.s.R(a),1.570796326794897)&&(h=0),o=c.F.ca(o);var f=c.s.$(c.s.R(o),1.570796326794897)?0:Math.cos(o),m=c.s.$(c.s.R(o),3.141592653589793)?0:Math.sin(o),v=c.s.$(c.s.R(a),1.570796326794897)?0:Math.cos(a),_=Math.sin(a);w=s/w,s=c.s.$(c.s.R(w),1.570796326794897)?0:Math.cos(w);var M=c.s.$(c.s.R(w),3.141592653589793)?0:Math.sin(w),T=Math.asin(_*s+v*M*f);p!=null&&(p.u=T),u!=null&&(u.u=c.s.$(c.s.R(T),1.570796326794897)?c.s.$(a,-T)?0>T?o:c.F.ca(3.141592653589793-o):h:c.s.$(c.s.R(a),1.570796326794897)&&c.s.$(w,3.141592653589793)?0>a?o:c.F.ca(3.141592653589793-o):c.F.ca(h+Math.atan2(M*m,v*s-_*M*f)))}},C}()}(q||(q={})),function(c){c.Yk=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var v=new c.ha(0),_=new c.ha(0),M=[0,0,0],T=[0,0,0],A=[0,0,0],O=new c.ha(0),R=new c.ha(0),j=new c.ha(0),z=new c.ha(0),V=new c.ha(0);if(p!=null||f!=null||m!=null)if(c.s.vi(h))c.$g.ub(w,a,s,o,u,p,f,m);else{o=c.F.ca(o),a=c.F.ca(a);var F=c.F.ca(o-a);if(c.s.$(s,u)&&(c.s.$(a,o)||c.s.$(c.s.R(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.$(s,-u)){if(c.s.$(c.s.R(s),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0<s?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<s?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(F),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else(c.s.$(c.s.R(s),1.570796326794897)||c.s.$(c.s.R(u),1.570796326794897))&&(c.s.$(c.s.R(s),1.570796326794897)?a=o:o=a);var G=0;if(0>F){G=1;var Z=a;a=o,o=Z,Z=s,s=u,u=Z}F=c.F.pt(h,s);var K=c.F.pt(h,u);f==null&&m==null||(c.$g.ub(w,a,F,o,K,null,v,_),v=Math.atan2(Math.sin(v.u)*Math.cos(s-F),Math.cos(v.u)),_=Math.atan2(Math.sin(_.u)*Math.cos(u-K),Math.cos(_.u)),G!=0&&(Z=v,v=_,_=Z),f!=null&&(f.u=v),m!=null&&(m.u=_)),p!=null&&(c.F.el(1,h,s,a,0,j,z,V),M[0]=j.u,M[1]=z.u,M[2]=V.u,c.F.el(1,h,u,o,0,j,z,V),T[0]=j.u,T[1]=z.u,T[2]=V.u,A[0]=M[1]*T[2]-T[1]*M[2],A[1]=-(M[0]*T[2]-T[0]*M[2]),A[2]=M[0]*T[1]-T[0]*M[1],h=1-c.F.w(h,c.F.Xq(h,c.F.Sj(h,Math.acos(A[2]/Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]))))),h*=2-h,f=Math.atan2(-A[1],-A[0]),A=c.F.ca(f-1.570796326794897),f=c.F.ca(f+1.570796326794897),A=c.s.R(c.F.ca(a-A))<=c.s.R(c.F.ca(a-f))?A:f,c.$g.ub(1,A,0,a,F,O,null,null),c.$g.ub(1,A,0,o,K,R,null,null),3.141592653589793<O.u+R.u&&(A=c.F.ca(A+3.141592653589793),c.$g.ub(1,A,0,a,F,O,null,null),c.$g.ub(1,A,0,o,K,R,null,null)),O.u*=c.s.Mb(1,s),R.u*=c.s.Mb(1,u),O.u=c.F.Sj(h,O.u),R.u=c.F.Sj(h,R.u),a=c.F.q(w,h,O.u),w=c.F.q(w,h,R.u),p.u=c.s.R(w-a))}}},C.sf=function(w,h,a,s,o,u,p,f){var m=0,v=new c.ha(0),_=new c.ha(0),M=[0,0,0],T=[0,0,0],A=new c.ha(0),O=new c.ha(0),R=new c.ha(0);if(p!=null||f!=null)if(c.s.vi(h))c.$g.sf(w,a,s,o,u,p,f);else if(c.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=s);else if(u=c.F.ca(u),0>o&&(o=c.s.R(o),u=c.F.ca(u+3.141592653589793)),a=c.F.ca(a),s=c.F.ca(s),1.570796326794897<c.s.R(s)&&(a=c.F.ca(a+3.141592653589793),s=c.s.Mb(3.141592653589793,s)-s),c.s.$(c.s.R(s),1.570796326794897)&&(a=0),c.s.Dd(s)){var j=c.s.R(1.570796326794897-c.s.R(u));j=c.F.Sj(h,j),j=1-c.F.w(h,c.F.Xq(h,j)),j*=2-j,w=o/c.F.Ch(w,j)*1.570796326794897,w=c.F.Tq(j,w),w=c.F.pt(j,w),c.$g.sf(1,a,s,w,u,p,v),f!=null&&(m=v.u),f!=null&&(f.u=c.F.Sj(h,m))}else if(c.s.$(c.s.R(s),1.570796326794897))v=2*(m=c.F.Ch(w,h)),u=0<(w=c.s.Mb(1.570796326794897,s))?c.F.ca(3.141592653589793-u):u,s=m-o,c.s.R(s)<=m?p!=null&&(p.u=u):(s=Math.floor(o/v),c.P.truncate(s%2)==0?(p!=null&&(p.u=u),o-=s*v):(p!=null&&(p.u=c.F.ca(u+3.141592653589793)),o=(s+1)*v-o),s=m-o),f!=null&&(f.u=c.F.Tq(h,s/m*w));else{j=c.F.pt(h,s),u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(s-j));var z=c.P.truncate(c.s.Mb(1,j))*(1.570796326794897>=c.s.R(u)?1:-1);u=c.F.ca(a+Math.atan(Math.tan(u)*-Math.sin(j))),c.$g.ub(w,u,0,a,j,null,_,null),j=c.s.R(1.570796326794897-c.s.R(_.u)),j=c.F.Sj(h,j),j=1-c.F.w(h,c.F.Xq(h,j)),j*=2-j,c.F.el(1,h,0,u,0,A,O,R),M[0]=A.u,M[1]=O.u,M[2]=R.u,c.F.el(1,h,s,a,0,A,O,R),T[0]=A.u,T[1]=O.u,T[2]=R.u,s=Math.acos((M[0]*T[0]+M[1]*T[1]+M[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),s=c.F.Sj(j,s),o=0<(s=c.F.q(w,j,s)+o*z)?_.u:c.F.ca(_.u+3.141592653589793),w=c.s.R(s)/c.F.Ch(w,j)*1.570796326794897,w=c.F.Tq(j,w),w=c.F.pt(j,w),c.$g.sf(1,u,0,w,o,p,v),f!=null&&(m=v.u),f!=null&&(f.u=c.F.Sj(h,m))}},C}()}(q||(q={})),function(c){c.eu=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var v=0,_=0,M=0;if(p!=null||f!=null||m!=null)if(c.s.vi(h))c.$g.ub(w,a,s,o,u,p,f,m);else{var T=c.F.ca(o-a);if(c.s.$(s,u)&&(c.s.Dd(T)||c.s.$(c.s.R(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.$(s,-u)){if(c.s.$(c.s.R(s),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0<s?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<s?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(T),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else if(c.s.$(c.s.R(s),1.570796326794897)||c.s.$(c.s.R(u),1.570796326794897)||c.s.Dd(T)||c.s.$(c.s.R(T),3.141592653589793))return void c.Yk.ub(w,h,a,s,o,u,p,f,m);var A=1-Math.sqrt(1-h),O=h/(1-h),R=w*(1-A);w=c.F.Xq(h,s);var j=c.F.Xq(h,u);h=c.s.R(w)==1.570796326794897?0:Math.cos(w);var z=Math.sin(w),V=c.s.R(j)==1.570796326794897?0:Math.cos(j),F=Math.sin(j),G=T,Z=Math.cos(G),K=Math.sin(G),re=1,te=0;do{var ue=G,ye=Math.sqrt(Math.pow(V*K,2)+Math.pow(h*F-z*V*Z,2)),pe=z*F+h*V*Z,De=Math.atan2(ye,pe);if(ye==0){re=0;break}var xe=h*V*K/ye;if(v=Math.cos(Math.asin(xe)),_=pe-2*z*F/(v*=v),1<c.s.R(_)&&(_=c.s.Mb(1,_)),G=T+(1-(G=A/16*v*(4+A*(4-3*v))))*A*xe*(De+G*ye*(_+G*pe*(2*(M=_*_)-1))),Z=Math.cos(G),K=Math.sin(G),te++,3.141592653589793<c.s.R(G)&&30<te){re=0;break}}while(5e3>=te&&!c.s.$(ue,G));if(re!=0)A=(O*=v)*(256+O*(O*(74-47*O)-128))/1024,p!=null&&(p.u=R*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(De-A*ye*(_+A/4*(pe*(2*M-1)-A/6*_*(4*ye*ye-3)*(4*M-3))))),f!=null&&(f.u=c.s.$(c.s.R(s),1.570796326794897)?0>s?o:c.F.ca(3.141592653589793-o):Math.atan2(V*K,h*F-z*V*Z)),m!=null&&(c.s.$(c.s.R(u),1.570796326794897)?m.u=0>u?a:c.F.ca(3.141592653589793-a):(m.u=Math.atan2(h*K,h*F*Z-z*V),m.u=c.F.ca(m.u+3.141592653589793)));else{G=c.s.Mb(3.141592653589793,T),pe=z*F-h*V,De=Math.acos(pe),ye=Math.sin(De),v=1,te=xe=0;do M=xe,Z=1-.25*(xe=A*(v*=v)*(1+A+A*A))+.1875*(_=A*A*(Z=v*v)*(1+2.25*A))-.1953125*(re=A*A*A*Z*v),xe=.25*xe-.25*_+.29296875*re,K=.03125*_-.05859375*re,re*=.00651041666666667,_=pe-2*z*F/v,1<c.s.R(_)&&(_=c.s.Mb(1,_)),v=Math.acos(_),pe=Math.cos(2*v),ue=Math.cos(3*v),K=(xe=c.s.$(s,-u)?c.F.ca(3.141592653589793-T)/(3.141592653589793*A*Z):c.F.ca(G-T)/(A*(Z*De+xe*ye*_+K*Math.sin(2*De)*pe+re*Math.sin(3*De)*ue)))*ye/(h*V),G=1.570796326794897<c.s.R(T)?c.s.Mb(3.141592653589793,K)-Math.asin(K):Math.asin(K),Z=Math.cos(G),ye=Math.sqrt(Math.pow(V*K,2)+Math.pow(h*F-z*V*Z,2)),De=3.141592653589793-Math.asin(c.s.R(ye)),pe=Math.cos(De),v=Math.cos(Math.asin(xe)),te++;while(70>=te&&!c.s.$(M,xe));p!=null&&(Z=1+(O*=v*=v)*(4096+O*(O*(320-175*O)-768))/16384,c.s.$(s,-u)?p.u=3.141592653589793*R*Z:(_=pe-2*z*F/v,v=Math.acos(_),pe=Math.cos(2*v),ue=Math.cos(3*v),p.u=R*(Z*De+O*(O*(128+O*(35*O-60))-512)/2048*ye*_+O*(5*O-4)/6144*O*O*Math.sin(2*De)*pe+re*Math.sin(3*De)*ue+-762939453125e-16*O*O*O*O*Math.sin(4*De)*Math.cos(4*v)))),f!=null&&(c.s.Dd(s)&&c.s.Dd(u)?(v=Math.sqrt(1-xe*xe),f.u=Math.acos(v),0>T&&(f.u*=-1)):c.s.$(c.s.R(s),1.570796326794897)?f.u=0>s?o:c.F.ca(3.141592653589793-o):(p=xe/h,R=Math.sqrt(1-p*p),0>h*F-z*V*Math.cos(G)&&(R*=-1),f.u=Math.atan2(p,R),c.s.$(s,-u)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(s))&&(0<s&&1.570796326794897>c.s.R(f.u)||0>s&&1.570796326794897<c.s.R(f.u))&&(f.u=c.s.Mb(3.141592653589793,f.u)-f.u))),m!=null&&(c.s.Dd(s)&&c.s.Dd(u)?(v=Math.sqrt(1-xe*xe),m.u=Math.acos(v),0<=T&&(m.u*=-1)):c.s.$(c.s.R(u),1.570796326794897)?m.u=0>u?a:c.F.ca(3.141592653589793-a):(T=xe/V,p=Math.sqrt(1-T*T),R=Math.sin(G/2),0>Math.sin(j-w)-2*h*F*R*R&&(p*=-1),m.u=Math.atan2(T,p),m.u=c.F.ca(m.u+3.141592653589793),c.s.$(s,-u)&&!c.s.Dd(s)&&!c.s.$(c.s.R(s),1.570796326794897)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(s))&&(f!=null?R=f.u:(p=xe/h,R=Math.sqrt(1-p*p),0>h*F-z*V*Math.cos(G)&&(R*=-1),R=Math.atan2(p,R),c.s.$(s,-u)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(s))&&(0<s&&1.570796326794897>c.s.R(R)||0>s&&1.570796326794897<c.s.R(R))&&(R=c.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=c.s.R(R)&&1.570796326794897<c.s.R(m.u)||1.570796326794897<=c.s.R(R)&&1.570796326794897>c.s.R(m.u))&&(m.u=-1*c.F.ca(m.u+3.141592653589793))))}}}},C.sf=function(w,h,a,s,o,u,p,f){if(p!=null||f!=null)if(c.s.vi(h))c.$g.sf(w,a,s,o,u,p,f);else if(u=c.F.ca(u),c.s.$(c.s.R(s),1.570796326794897)||c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))c.Yk.sf(w,h,a,s,o,u,p,f);else{var m=c.s.R(u)==1.570796326794897?0:Math.cos(u),v=c.s.R(u)==3.141592653589793?0:Math.sin(u);c.s.$(c.s.R(s),1.570796326794897)&&(a=0),u=1-Math.sqrt(1-h);var _=c.F.Xq(h,s);s=c.s.R(_)==1.570796326794897?0:Math.cos(_);var M=Math.sin(_);_=Math.atan2(Math.tan(_),m);var T=s*v,A=T*T,O=1-A,R=h/(1-h)*O,j=(h=R*(256+R*(R*(74-47*R)-128))/1024)/4,z=h/6,V=o/(w*(1-u)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),F=V;do{var G=F;o=c.s.R(F)==1.570796326794897?0:Math.cos(F);var Z=(R=c.s.R(F)==3.141592653589793?0:Math.sin(F))*R;F=h*R*((w=Math.cos(2*_+F))+j*(o*(2*(F=w*w)-1)-z*w*(4*Z-3)*(4*F-3)))+V}while(!c.s.$(G,F));o=c.s.R(F)==1.570796326794897?0:Math.cos(F),R=c.s.R(F)==3.141592653589793?0:Math.sin(F),p!=null&&(v=Math.atan2(R*v,s*o-M*R*m),O=u/16*O*(4+u*(4-3*O)),w=Math.cos(2*_+F),p.u=c.F.ca(a+(v-(1-O)*u*T*(F+O*R*(w+O*o*(2*w*w-1)))))),f!=null&&(O=M*R-s*o*m,O=(1-u)*Math.sqrt(A+O*O),f.u=Math.atan2(M*o+s*R*m,O))}},C}()}(q||(q={})),function(c){c.KC=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var v=c.F.ca(o-a),_=c.s.$(c.s.R(s),1.570796326794897),M=c.s.$(c.s.R(u),1.570796326794897);if(c.s.$(s,u)&&(c.s.Dd(v)||_))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.vi(h)){var T=Math.sin(s),A=Math.sin(u);T=Math.sqrt((1+T)/(1-T)),A=Math.sqrt((1+A)/(1-A)),T=Math.log(A)-Math.log(T),T=Math.atan2(v,T),p!=null&&(p.u=c.s.$(s,u)?c.s.R(w*Math.cos(s)*v):c.s.R((w*u-w*s)/Math.cos(T)))}else A=c.F.Sw(h,u),T=Math.sin(c.F.Sw(h,s)),A=Math.sin(A),T=Math.sqrt((1+T)/(1-T)),A=Math.sqrt((1+A)/(1-A)),T=Math.log(A)-Math.log(T),T=Math.atan2(v,T),p!=null&&(c.s.$(s,u)?p.u=c.s.R(w*v*Math.cos(s)/c.F.w(h,s)):(v=c.F.q(w,h,s),w=c.F.q(w,h,u),p.u=c.s.R((w-v)/Math.cos(T))));f==null&&m==null||(p=c.F.ca(T+3.141592653589793),_&&M||!_&&!M||(_?T=0>s?o:c.F.ca(3.141592653589793-o):M&&(p=0>u?a:c.F.ca(3.141592653589793-a))),f!=null&&(f.u=T),m!=null&&(m.u=p))}},C.sf=function(w,h,a,s,o,u,p,f){u=c.F.ca(u),0>o&&(o=c.s.R(o),u=c.F.ca(u+3.141592653589793)),c.s.vi(h)?c.s.$(c.s.R(s),1.570796326794897)?(a=0>s?u:c.F.ca(3.141592653589793-u),3.141592653589793>=(u=o/w%6.283185307179586)?w=s-c.s.Mb(u,s):(a=c.F.ca(a+3.141592653589793),w=-s+c.s.Mb(u-3.141592653589793,s))):c.s.$(c.s.R(u),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,u)/(w*Math.cos(s))),w=s):(w=s+o*Math.cos(u)/w,1.570796326794897<c.s.R(w)&&(w=1.570796326794897),c.s.$(c.s.R(w),1.570796326794897)&&(c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))||(1.570796316258184<c.s.R(w)&&(w=c.s.Mb(1.570796316258184,w)),h=Math.sin(s),s=Math.sin(w),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),a=c.F.ca(a+Math.tan(u)*h))):c.s.$(c.s.R(s),1.570796326794897)?(a=0>s?u:c.F.ca(3.141592653589793-u),u=o/c.F.lW(w,h),3.141592653589793>=(u%=6.283185307179586)?w=s-c.s.Mb(u,s):(a=c.F.ca(a+3.141592653589793),w=-s+c.s.Mb(u-3.141592653589793,s)),w=c.F.Tq(h,w)):c.s.$(c.s.R(u),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,u)*c.F.w(h,s)/(w*Math.cos(s))),w=s):(w=1.570796326794897*(o*Math.cos(u)+c.F.q(w,h,s))/c.F.Ch(w,h),1.570796326794897<c.s.R(w)&&(w=c.s.Mb(1.570796326794897,w)),w=c.F.Tq(h,w),c.s.$(c.s.R(w),1.570796326794897)&&(c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))||(o=c.F.Sw(h,s),s=c.F.Sw(h,w),1.570796316258184<c.s.R(s)&&(s=c.s.Mb(1.570796316258184,w),w=c.F.tO(h,s)),h=Math.sin(o),s=Math.sin(s),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),a=c.F.ca(a+Math.tan(u)*h))),p!=null&&(p.u=a),f!=null&&(f.u=w)},C}()}(q||(q={})),function(c){c.kb=function(){function C(){}return C.Sy=function(w,h,a,s,o,u,p){c.eu.ub(w,h,a,s,o,u,null,p,null)},C.Ai=function(w,h,a,s,o,u,p,f){c.eu.sf(w,h,a,s,o,u,p,f)},C.xd=function(w,h,a,s,o,u,p,f,m,v){switch(v){case 2:c.Yk.ub(w,h,a,s,o,u,p,f,m);break;case 3:c.LC.ub(w,h,a,s,o,u,p,f,m);break;case 1:c.KC.ub(w,h,a,s,o,u,p,f,m);break;default:c.eu.ub(w,h,a,s,o,u,p,f,m)}},C.qj=function(w,h,a,s,o,u,p,f,m){switch(m){case 2:c.Yk.sf(w,h,a,s,o,u,p,f);break;case 3:c.LC.sf(w,h,a,s,o,u,p,f);break;case 1:c.KC.sf(w,h,a,s,o,u,p,f);break;default:c.eu.sf(w,h,a,s,o,u,p,f)}},C}()}(q||(q={})),function(c){var C=function(){function h(){this.y=this.x=null}return h.construct=function(a){var s=new h;return s.x=new c.Xb,s.x.set(a.x),s.y=new c.Xb,s.y.set(a.y),s},h.QE=function(a,s){var o=new h;return o.x=new c.Xb,o.x.set(a),o.y=new c.Xb,o.y.set(s),o},h.prototype.rg=function(){return this.x.rg()&&this.y.rg()},h.prototype.value=function(){return c.h.construct(this.x.value(),this.y.value())},h}();c.rY=C;var w=function(){function h(){this.z=this.y=this.x=null}return h.construct=function(a){var s=new h;return s.x=new c.Xb,s.x.set(a.x),s.y=new c.Xb,s.y.set(a.y),s.z=new c.Xb,s.z.set(a.z),s},h.QE=function(a,s,o){var u=new h;return u.x=new c.Xb,u.x.set(a),u.y=new c.Xb,u.y.set(s),u.z=new c.Xb,u.z.set(o),u},h.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},h.prototype.value=function(){return new c.Od(this.x.value(),this.y.value(),this.z.value())},h.prototype.Sh=function(a){var s=new c.Xb,o=new c.Xb,u=new c.Xb;return s.Ml(this.x,a.x),o.Ml(this.y,a.y),u.Ml(this.z,a.z),(a=new c.Xb).ZM(s,o),a.add(u),a},h.prototype.YE=function(a){var s=new h;s.x.Ml(this.y,a.z),s.y.Ml(this.z,a.x),s.z.Ml(this.x,a.y);var o=new c.Xb,u=new c.Xb,p=new c.Xb;return o.Ml(this.z,a.y),u.Ml(this.x,a.z),p.Ml(this.y,a.x),s.x.sub(o),s.y.sub(u),s.z.sub(p),s},h}();c.sY=w,c.Nx=function(){function h(){}return h.zP=function(a,s,o){var u=s.x;s=s.y,h.el(1,a,Math.cos(u),Math.sin(u),Math.cos(s),Math.sin(s),o)},h.yP=function(a,s){var o=new c.Od;return h.zP(a,s,o),o},h.el=function(a,s,o,u,p,f,m){a/=Math.sqrt(1-s*f*f),m.L(a*p*o,a*p*u,a*(1-s)*f)},h.$u=function(a,s){var o=new c.Xb,u=new c.Xb,p=new c.Xb,f=new c.Xb;o.cos(s.x),u.sin(s.x),p.cos(s.y),f.sin(s.y);var m=new c.Xb;return m.set(f),m.Bg(f),m.Po(a),m.Po(-1),m.fN(),m.sqrt(),(s=new c.Xb).set(1),s.lm(m),(m=new c.Xb).set(s),m.Bg(p),m.Bg(o),(o=new c.Xb).set(s),o.Bg(p),o.Bg(u),(u=new c.Xb).set(s),u.Po(1-a),u.Bg(f),w.QE(m,o,u)},h.NS=function(a,s,o,u){if(Math.abs(s.x-o.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&s.x!=o.x)return NaN;if(u=h.YA(u,Math.min(s.x,o.x),Math.max(s.x,o.x)),!new c.Oc(s.x,o.x).contains(u))return NaN;var p=C.construct(s);if(o=C.construct(o),p=h.$u(a,p),o=h.$u(a,o),(o=p.YE(o)).z.rg())return s.y;var f=new c.Xb;f.set(o.x),f.lm(o.z),f.Po(-1);var m=new c.Xb;m.set(o.y),m.lm(o.z),m.Po(-1);var v=new c.Xb;return v.set(m),v.Bg(m),(p=new c.Xb).set(f),p.Bg(f),p.add(v),p.sqrt(),p.rg()||f.rg()&&m.rg()?s.y:(s=Math.atan2(m.value(),f.value()),s=Math.atan2(p.value()*Math.cos(s-u),1-a),u=h.yP(a,c.h.construct(u,s)),a=new c.Od(u.x,u.y,-u.z),u=o.value().Sh(u),a=o.value().Sh(a),Math.abs(a)<Math.abs(u)&&(s=-s),s)},h.Jz=function(a,s,o,u,p){if(p[0]=NaN,p[1]=NaN,Math.abs(s.x-o.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&s.x!=o.x||Math.abs(u)>=.5*Math.PI||0<s.y&&0<o.y&&s.y>u&&o.y>u||0>s.y&&0>o.y&&s.y<u&&o.y<u)return 0;var f=C.construct(s),m=C.construct(o);f=h.$u(a,f),m=h.$u(a,m);var v=f.YE(m);if(v.z.rg())return new c.Oc(s.y,o.y).contains(u)?(p[0]=s.x,1):0;(m=new c.Xb).set(v.x),m.lm(v.z),m.Po(-1),(f=new c.Xb).set(v.y),f.lm(v.z),f.Po(-1),(v=new c.Xb).set(f),v.Bg(f);var _=new c.Xb;return _.set(m),_.Bg(m),_.add(v),_.sqrt(),_.rg()||m.rg()&&f.rg()?u==0?(p[0]=s.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(u)/_.value(),1<Math.abs(a)?0:(a=Math.acos(a),v=Math.atan2(f.value(),m.value()),m=Math.min(s.x,o.x),f=Math.max(s.x,o.x),o=h.YA(v-a,m,f),a=u!=0?h.YA(v+a,m,f):o,u=0,m<=o&&o<=f&&(p[u]=o,u++),a!=o&&m<=a&&a<=f&&(p[u]=a,++u==2&&Math.abs(p[0]-s.x)>Math.abs(p[1]-s.x)&&(s=p[0],p[0]=p[1],p[1]=s)),u))},h.YA=function(a,s,o){return a>o?a-=2*(s=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<s&&(a+=2*(s=Math.ceil((s-a)/(2*Math.PI)))*Math.PI),a},h}()}(q||(q={})),function(c){c.SK=function(){function C(){}return C.WX=function(w,h){var a=8,s=[0,0,0,0],o=new c.h;o.N(h),o.scale(c.cb.tc(w).Id().Fc()==9102?1:c.cb.tc(w).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var u=-180,p=180,f=(w=5*a)-1,m=(h=(w+31)/32)-1;0<=m;m--)for(var v=f-32*m,_=Math.min(32,w-32*m),M=1;M<_;M+=2){var T=.5*(p+u);o.x>=T?(s[m]|=1<<v,u=T):p=T,v-=2,f-=2}for(u=-90,p=90,f=w-2,m=h-1;0<=m;m--)for(v=f-32*m,_=Math.min(32,w-32*m),M=0;M<_;M+=2)T=.5*(p+u),o.y>=T?(s[m]|=1<<v,u=T):p=T,v-=2,f-=2;return C.VP(s,a,a)},C.VP=function(w,h,a){for(var s=[],o=0;o<h;o++)s[o]="";for(var u=o=0,p=0;p<h;p++){var f=w[o]>>u&31;if(31<(u+=5)){var m=37-u;f&=(1<<m)-1,u-=32,f|=(w[++o]&(1<<u)-1)<<m}s[h-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[f]}if(a>h)for(p=0;p<a-h;p++)s.push("0");else a<h&&(s.length=a);return s.join("")},C}()}(q||(q={})),function(c){var C={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};c.yr=function(){function h(){}return h.Ny=function(a){h.zp===!1&&h.zt();var s=h.AQ(a);if(s==-1){var o=h.Ax(a);o!=a&&(s=h.Ny(o))}return s==-1&&(o=h.AK(a))!=a&&(s=h.Ny(o)),s},h.AQ=function(a){return h.Hw[a]!==void 0?h.Hw[a]:-1},h.xQ=function(a){h.zp===!1&&h.zt();var s=h.iF(a);if(s==1e38){var o=h.Ax(a);if(o!=a&&(s=h.iF(o)),s==1e38)return 1e-10}return s},h.US=function(a){if(h.Ks[a]!==void 0)return!0;var s=h.Ax(a);return s!=a&&h.Ks[s]!==void 0},h.WS=function(a){if(h.zo[a]!==void 0)return!0;var s=h.Ax(a);return s!=a&&h.zo[s]!==void 0},h.iF=function(a){return h.zp===!1&&h.zt(),h.Ks[a]!==void 0?h.Ks[a]:h.zo[a]!==void 0?h.zo[a]:1e38},h.AK=function(a){return h.zp===!1&&h.zt(),h.RA[a]!==void 0?h.RA[a]:a},h.Ax=function(a){return h.zp===!1&&h.zt(),h.SA[a]!==void 0?h.SA[a]:a},h.zt=function(){for(var a,s=C,o=0;o<s.pcsid.length;o+=2)h.zo[s.pcsid[o]]=s.pcstol[2*s.pcsid[o+1]+1];for(o=0;o<s.pcsidc.length;o+=1)for(var u=(a=s.pcsidc[o])[0];u<=a[1];u++)h.zo[u]=s.pcstol[2*a[2]+1];for(o=0;o<s.gcsid.length;o+=2)h.Ks[s.gcsid[o]]=s.gcstol[2*s.gcsid[o+1]+1];for(o=0;o<s.gcsidc.length;o+=1)for(u=(a=s.gcsidc[o])[0];u<=a[1];u++)h.zo[u]=s.gcstol[2*a[2]+1];for(o=0;o<w.c.length;o+=1)for(u=(a=w.c[o])[0];u<=a[1];u++)h.Hw[u]=a[2];for(o=0;o<w.nc.length;o+=2)h.Hw[w.nc[o]]=w.nc[o+1];for(w=null,o=0;o<s.newtoold.length;o+=2)h.RA[s.newtoold[o+1]]=s.newtoold[o],h.SA[s.newtoold[o]]=s.newtoold[o+1];C=null,h.zp=!0},h.zp=!1,h.Ks=[],h.zo=[],h.RA=[],h.SA=[],h.Hw=[],h}()}(q||(q={})),function(c){function C(h){return h.length===0?'""':h[0]=='"'||h[0]=="."||"0"<=h[0]&&"9">=h[0]?h:'"'+h.trim()+'"'}var w=[];c.SC=function(){function h(){}return h.zQ=function(a){try{for(var s=0;s<w.length;s++)if(w[s].wkttext===a)return w[s].unit;for(var o,u=s="",p=!1,f=0;f<a.length;f++){var m=a[f];p===!0?m=='"'?a[f+1]=='"'?s+=m:p=p=!1:s+=m:/[\s]/.test(m)||(m==","?(u=s!==""?u+(C(s)+","):u+",",s=""):m==")"||m=="]"?(u=s!==""?u+(C(s)+"]}"):u+"]}",s=""):m=="("||m=="["?(u+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):m=='"'?(p=!0,s=""):s+=m)}o=JSON.parse(u);var v=h.hF(o);if(v===null)return null;for(o=null,m=0;m<v.values.length;m++)if(typeof v.values[m]=="object"&&v.values[m].entity==="UNIT"){o=v.values[m];break}if(o===null)return null;var _=c.Uc.UO(v.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return w.push({wkttext:a,unit:_}),10<w.length&&w.shift(),_}catch{return null}},h.hF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var s=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];s.push(a.values[o])}for(a=0;a<s.length;a++)if((o=h.hF(s[a]))!==null)return o;return null},h.yQ=function(a){var s=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var u=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<u&&(s=.001/u)}else if(0<=(o=a.indexOf("GEOGCS"))){var f=0;if(u=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{f=parseFloat(a.substring(o,p))}catch{f=0}if(0<f&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<f&&0<u&&(s=.001/(f*u))}}return s},h}()}(q||(q={})),function(c){var C;(C=c.$K||(c.$K={}))[C.NONE=0]="NONE",C[C.LINEAR=1]="LINEAR",C[C.ANGULAR=2]="ANGULAR",function(h){h[h.enumFloat=0]="enumFloat",h[h.enumDouble=1]="enumDouble",h[h.enumInt32=2]="enumInt32",h[h.enumInt64=3]="enumInt64",h[h.enumInt8=4]="enumInt8",h[h.enumInt16=5]="enumInt16"}(c.LL||(c.LL={})),function(h){h[h.POSITION=0]="POSITION",h[h.Z=1]="Z",h[h.M=2]="M",h[h.ID=3]="ID",h[h.NORMAL=4]="NORMAL",h[h.TEXTURE1D=5]="TEXTURE1D",h[h.TEXTURE2D=6]="TEXTURE2D",h[h.TEXTURE3D=7]="TEXTURE3D",h[h.ID2=8]="ID2",h[h.MAXSEMANTICS=10]="MAXSEMANTICS"}(c.Kh||(c.Kh={}));var w=function(){function h(a,s){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,s!==void 0){for(this.Ba=s.Ba,this.Qq=s.Qq,this.dg=s.dg.slice(0),this.wh=s.wh.slice(0),this.yl=s.yl,this.Xs=[],a=s=0;a<this.Ba;a++)this.Xs[a]=s,s+=h.Wa(this.dg[a]);for(this.Qq=s,this.Be=[],a=0;a<this.Ba;a++){s=h.Wa(this.ld(a));for(var o=h.te(this.ld(a)),u=0;u<s;u++)this.Be[this.Xs[a]+u]=o}}else this.Qq=this.Ba=0}return h.prototype.ld=function(a){if(0>a||a>this.Ba)throw c.i.O();return this.dg[a]},h.prototype.Rf=function(a){return this.wh[a]},h.gz=function(a){return h.EM[a]},h.Vp=function(a){return h.NM[a]},h.Wa=function(a){return h.mM[a]},h.prototype.hasAttribute=function(a){return 0<=this.wh[a]},h.prototype.dG=function(){return this.hasAttribute(1)},h.te=function(a){return h.$C[a]},h.prototype.GR=function(a){return this.Xs[a]},h.yG=function(a,s){return h.$C[a]===s},h.prototype.Nb=function(a){return this===a},h.prototype.Cn=function(){for(var a=c.P.Vh(this.dg[0]),s=1;s<this.Ba;s++)a=c.P.Vh(this.dg[s],a);return a},h.prototype.bk=function(a){return this.Xs[a]},h.prototype.dc=function(){return this.yl},h.prototype.Fd=function(a){return this.dg[a]},h.$C=[0,0,NaN,0,0,0,0,0,0],h.EM=[1,1,1,0,2,1,1,1,0],h.NM=[1,1,1,2,0,0,0,0,2],h.mM=[2,1,1,1,3,1,2,3,2],h}();c.sa=w}(q||(q={})),function(c){function C(p,f,m){var v=f-(p=new u(p)).e,_=p.c;for(_.length>++f&&w(p,v,u.gu),_[0]?m?v=f:(_=p.c,v=p.e+v+1):++v;_.length<v;_.push(0));return v=p.e,m===1||m&&(f<=v||v<=a)?(0>p.Cd&&_[0]?"-":"")+(1<_.length?_[0]+"."+_.join("").slice(1):_[0])+(0>v?"e":"e+")+v:p.toString()}function w(p,f,m,v){var _=p.c,M=p.e+f+1;if(m===1?v=5<=_[M]:m===2?v=5<_[M]||_[M]==5&&(v||0>M||_[M+1]!==void 0||1&_[M-1]):m===3?v=v||_[M]!==void 0||0>M:(v=!1,m!==0&&h("!Big.RM!")),1>M||!_[0])v?(p.e=-f,p.c=[1]):p.c=[p.e=0];else{if(_.length=M--,v)for(;9<++_[M];)_[M]=0,M--||(++p.e,_.unshift(1));for(M=_.length;!_[--M];_.pop());}return p}function h(p){throw(p=Error(p)).name="BigError",p}var a=-7,s=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=function(){function p(f){if(f instanceof p)this.Cd=f.Cd,this.e=f.e,this.c=f.c.slice();else{var m,v,_;for(f===0&&0>1/f?f="-0":o.test(f+="")||h(NaN),this.Cd=f.charAt(0)=="-"?(f=f.slice(1),-1):1,-1<(m=f.indexOf("."))&&(f=f.replace(".","")),0<(v=f.search(/e/i))?(0>m&&(m=v),m+=+f.slice(v+1),f=f.substring(0,v)):0>m&&(m=f.length),v=0;f.charAt(v)=="0";v++);if(v==(_=f.length))this.c=[this.e=0];else{for(;f.charAt(--_)=="0";);for(this.e=m-v-1,this.c=[],m=0;v<=_;this.c[m++]=+f.charAt(v++));}}}return p.prototype.abs=function(){var f=new p(this);return f.Cd=1,f},p.prototype.cmp=function(f){var m=this.c,v=(f=new p(f)).c,_=this.Cd,M=f.Cd,T=this.e,A=f.e;if(!m[0]||!v[0])return m[0]?_:v[0]?-M:0;if(_!=M)return _;if(f=0>_,T!=A)return T>(A^f)?1:-1;for(_=-1,M=(T=m.length)<(A=v.length)?T:A;++_<M;)if(m[_]!=v[_])return m[_]>(v[_]^f)?1:-1;return T==A?0:T>(A^f)?1:-1},p.prototype.lm=function(f){var m=this.c,v=(f=new p(f)).c,_=this.Cd==f.Cd?1:-1,M=p.tr;if((M!==~~M||0>M||1e6<M)&&h("!Big.DP!"),!m[0]||!v[0])return m[0]==v[0]&&h(NaN),v[0]||h(_/0),new p(0*_);var T,A,O=v.slice(),R=T=v.length,j=m.length,z=m.slice(0,T),V=z.length,F=f,G=F.c=[],Z=0,K=M+(F.e=this.e-f.e)+1;for(F.Cd=_,_=0>K?0:K,O.unshift(0);V++<T;z.push(0));do{for(A=0;10>A;A++){if(T!=(V=z.length))var re=T>V?1:-1;else{var te=-1;for(re=0;++te<T;)if(v[te]!=z[te]){re=v[te]>z[te]?1:-1;break}}if(!(0>re))break;for(f=V==T?v:O;V;){if(z[--V]<f[V]){for(te=V;te&&!z[--te];z[te]=9);--z[te],z[V]+=10}z[V]-=f[V]}for(;!z[0];z.shift());}G[Z++]=re?A:++A,z[0]&&re?z[V]=m[R]||0:z=[m[R]]}while((R++<j||z[0]!==void 0)&&_--);return G[0]||Z==1||(G.shift(),F.e--),Z>K&&w(F,M,p.gu,z[0]!==void 0),F},p.prototype.aS=function(){return 0<this.cmp(0)},p.prototype.iT=function(){return 0>this.cmp(0)},p.prototype.kt=function(f){var m,v=this.Cd,_=(f=new p(f)).Cd;if(v!=_)return f.Cd=-_,this.oI(f);var M=this.c.slice(),T=this.e,A=f.c,O=f.e;if(!M[0]||!A[0])return A[0]?(f.Cd=-_,f):new p(M[0]?this:0);if(v=T-O){for((m=0>v)?(v=-v,T=M):(O=T,T=A),T.reverse(),_=v;_--;T.push(0));T.reverse()}else for(T=((m=M.length<A.length)?M:A).length,v=_=0;_<T;_++)if(M[_]!=A[_]){m=M[_]<A[_];break}if(m&&(T=M,M=A,A=T,f.Cd=-f.Cd),0<(_=(T=A.length)-(m=M.length)))for(;_--;M[m++]=0);for(_=m;T>v;){if(M[--T]<A[T]){for(m=T;m&&!M[--m];M[m]=9);--M[m],M[T]+=10}M[T]-=A[T]}for(;M[--_]==0;M.pop());for(;M[0]==0;)M.shift(),--O;return M[0]||(f.Cd=1,M=[O=0]),f.c=M,f.e=O,f},p.prototype.oI=function(f){var m=this.Cd,v=(f=new p(f)).Cd;if(m!=v)return f.Cd=-v,this.kt(f);v=this.e;var _=this.c,M=f.e,T=f.c;if(!_[0]||!T[0])return T[0]?f:new p(_[0]?this:0*m);if(_=_.slice(),m=v-M){for(0<m?(M=v,v=T):(m=-m,v=_),v.reverse();m--;v.push(0));v.reverse()}for(0>_.length-T.length&&(v=T,T=_,_=v),m=T.length,v=0;m;)v=(_[--m]=_[m]+T[m]+v)/10|0,_[m]%=10;for(v&&(_.unshift(v),++M),m=_.length;_[--m]==0;_.pop());return f.c=_,f.e=M,f},p.prototype.pow=function(f){var m=this,v=new p(1),_=v,M=0>f;for((f!==~~f||-1e6>f||1e6<f)&&h("!pow!"),f=M?-f:f;1&f&&(_=_.nr(m)),f>>=1;)m=m.nr(m);return M?v.lm(_):_},p.prototype.round=function(f,m){var v=this;return f==null?f=0:(f!==~~f||0>f||1e6<f)&&h("!round!"),w(v=new p(v),f,m??p.gu),v},p.prototype.sqrt=function(){var f=this.c,m=this.Cd,v=this.e,_=new p("0.5");if(!f[0])return new p(this);0>m&&h(NaN),(m=Math.sqrt(this.toString()))==0||m==1/0?((m=f.join("")).length+v&1||(m+="0"),(f=new p(Math.sqrt(m).toString())).e=((v+1)/2|0)-(0>v||1&v)):f=new p(m.toString()),m=f.e+(p.tr+=4);do v=f,f=_.nr(v.oI(this.lm(v)));while(v.c.slice(0,m).join("")!==f.c.slice(0,m).join(""));return w(f,p.tr-=4,p.gu),f},p.prototype.nr=function(f){var m=this.c,v=(f=new p(f)).c,_=m.length,M=v.length,T=this.e,A=f.e;if(f.Cd=this.Cd==f.Cd?1:-1,!m[0]||!v[0])return new p(0*f.Cd);if(f.e=T+A,_<M){var O=m;m=v,v=O,A=_,_=M,M=A}for(O=Array(A=_+M);A--;O[A]=0);for(T=M;T--;){for(M=0,A=_+T;A>T;)M=O[A]+v[T]*m[A-T-1]+M,O[A--]=M%10,M=M/10|0;O[A]=(O[A]+M)%10}for(M&&++f.e,O[0]||O.shift(),T=O.length;!O[--T];O.pop());return f.c=O,f},p.prototype.toString=function(){var f=this.e,m=this.c.join(""),v=m.length;if(f<=a||f>=s)m=m.charAt(0)+(1<v?"."+m.slice(1):"")+(0>f?"e":"e+")+f;else if(0>f){for(;++f;m="0"+m);m="0."+m}else if(0<f)if(++f>v)for(f-=v;f--;m+="0");else f<v&&(m=m.slice(0,f)+"."+m.slice(f));else 1<v&&(m=m.charAt(0)+"."+m.slice(1));return 0>this.Cd&&this.c[0]?"-"+m:m},p.prototype.toExponential=function(f){return f==null?f=this.c.length-1:(f!==~~f||0>f||1e6<f)&&h("!toExp!"),C(this,f,1)},p.prototype.toFixed=function(f){var m=a,v=s;if(a=-(s=1/0),f==null)var _=this.toString();else f===~~f&&0<=f&&1e6>=f&&(_=C(this,this.e+f),0>this.Cd&&this.c[0]&&0>_.indexOf("-")&&(_="-"+_));return a=m,s=v,_||h("!toFix!"),_},p.prototype.toPrecision=function(f){return f==null?this.toString():((f!==~~f||1>f||1e6<f)&&h("!toPre!"),C(this,f-1,2))},p.tr=20,p.gu=1,p}();c.jp=u}(q||(q={})),function(c){var C=function(){function w(h){this.lf=h}return w.prototype.qr=function(h,a,s){var o=new c.h,u=new c.h,p=this.lf;s.Wd(h,a,function(f,m){return p.uc(2*f,o),p.uc(2*m,u),o.compare(u)})},w.prototype.bq=function(h){return this.lf.read(2*h+1)},w}();c.si=function(){function w(){}return w.cq=function(h){if(h.B())return!1;var a=h.K();return a==1736?h.He()!=0:a==1607?(a=[!1],w.nE(h,!0,a),a[0]):!(a!=197&&(!c.ba.zd(a)||h.wG()))},w.im=function(h){var a=h.K();if(a==1736)return a=new c.Ua(h.description),h.B()||h.ZC(a),a;if(a==1607)return w.nE(h,!1,null);if(a==197)return a=new c.Ua(h.description),h.B()||a.bd(h,!1),a;if(c.ba.zd(a)){if(a=new c.ee(h.description),!h.B()&&!h.wG()){var s=new c.Ta;h.Vo(s),a.add(s),h.Ro(s),a.add(s)}return a}if(c.ba.Tn(a))return null;throw c.i.O()},w.nE=function(h,a,s){s!=null&&(s[0]=!1);var o=null;if(a||(o=new c.ee(h.description)),!h.B()){var u=new c.ja(0);u.Jb(2*h.ea());for(var p=0,f=h.ea();p<f;p++)if(0<h.Ka(p)&&!h.Pn(p)){var m=h.Ca(p);u.add(m),m=h.Wc(p)-1,u.add(m)}if(0<u.size){f=new c.Zt,p=h.vb(0),f.sort(u,0,u.size,new C(p)),f=new c.h,p.uc(2*u.get(0),f),m=0;for(var v=1,_=new c.Ta,M=new c.h,T=1,A=u.size;T<A;T++)if(p.uc(2*u.get(T),M),M.rb(f))u.get(m)>u.get(T)?(u.set(m,2147483647),m=T):u.set(T,2147483647),v++;else{if(!(1&v))u.set(m,2147483647);else if(a)return s!=null&&(s[0]=!0),null;f.N(M),m=T,v=1}if(!(1&v))u.set(m,2147483647);else if(a)return s!=null&&(s[0]=!0),null;if(!a)for(u.Wd(0,u.size,function(O,R){return O-R}),T=0,A=u.size;T<A&&u.get(T)!=2147483647;T++)h.we(u.get(T),_),o.add(_)}}return a?null:o},w}()}(q||(q={})),function(c){var C=function(){function w(){this.zf=new c.ja(0),this.As=new c.ja(0),this.zH=1,this.Gs=NaN}return w.prototype.sort=function(h,a,s,o){if(32>s-a)o.qr(a,s,h);else{var u=!0;try{for(var p=1/0,f=-1/0,m=a;m<s;m++){var v=o.bq(h.get(m));v<p&&(p=v),v>f&&(f=v)}if(this.reset(s-a,p,f,s-a)){for(m=a;m<s;m++){var _=h.get(m);v=o.bq(_);var M=this.uF(v);this.zf.set(M,this.zf.get(M)+1),this.As.write(m-a,_)}var T=this.zf.get(0);this.zf.set(0,0),m=1;for(var A=this.zf.size;m<A;m++){var O=this.zf.get(m);this.zf.set(m,T),T+=O}for(m=a;m<s;m++){_=this.As.read(m-a),v=o.bq(_),M=this.uF(v);var R=this.zf.get(M);h.set(R+a,_),this.zf.set(M,R+1)}u=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(u)o.qr(a,s,h);else{for(m=s=0,A=this.zf.size;m<A;m++)u=s,(s=this.zf.get(m))>u&&o.qr(a+u,a+s,h);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},w.prototype.reset=function(h,a,s,o){return!(2>h||s==a)&&(h=Math.min(w.cL,h),this.zf.Jb(h),this.zf.resize(h),this.zf.Yj(0,0,this.zf.size),this.zH=a,this.As.resize(o),this.Gs=(s-a)/(h-1),!0)},w.prototype.uF=function(h){return c.P.truncate((h-this.zH)/this.Gs)},w.cL=65536,w}();c.Zt=C}(q||(q={})),function(c){var C,w;(w=C||(C={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var h=function(){function p(){}return p.Su=function(f,m,v,_,M,T){var A=new p;return A.Km=new c.h,A.Xm=new c.h,A.cw=new c.h,A.Km.N(f),A.Xm.N(m),A.cw.N(v),A.Eo=_,A.sh=M,A.uh=T,A},p.construct=function(f,m,v,_){var M=new p;return M.Km=new c.h,M.Xm=new c.h,M.cw=new c.h,M.Km.N(f),M.Xm.N(m),M.cw.Sc(),M.Eo=4,M.sh=v,M.uh=_,M},p}(),a=function(){function p(f,m,v,_,M,T){this.$v=null,this.za=0,this.zA=f,this.XH=this.VH=0,this.La=m,this.Oj=v,this.xk=_,this.Fq=M,this.Vb=T}return p.prototype.next=function(){for(var f=new c.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,f),this.za++,!f.B())break}var m=!1;if(this.$v==null&&(this.VH=f.Ng(),this.XH=f.kh(),this.$v=u.buffer(f,this.La,this.Oj,this.xk,this.Fq,this.Vb),m=!0),this.za<this.zA.I()){var v=new c.Ea;this.$v.copyTo(v)}else v=this.$v;if(!m){m=new c.Ed;var _=f.Ng()-this.VH;f=f.kh()-this.XH,m.ig(_,f),v.Pc(m)}return v},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),s=function(){function p(f,m){this.Xa=f,this.za=0,this.qq=m}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var m=this.za;if(this.za++,!f.Pn(m))for(var v=f.Oa(f.Wc(m)-1);this.za<f.ea();){var _=f.Oa(f.Ca(this.za));if(f.Pn(this.za)||_!=v)break;v=f.Oa(f.Wc(this.za)-1),this.za++}if(this.za-m==1)return this.Xa.fE(this.Xa.Y,m,this.qq);for((v=new c.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,m,!0),m+=1;m<this.za;m++)v.Fr(this.Xa.Y,m,0,f.tv(m),!1);return this.Xa.fE(v,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),o=function(){function p(f){this.Xa=f,this.za=0}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var m=this.za;for(f.Kr(this.za),this.za++;this.za<f.ea()&&!(0<f.Kr(this.za));)this.za++;return m==0&&this.za==f.ea()?this.Xa.ly(f,0,f.ea()):this.Xa.ly(f,m,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),u=function(){function p(f){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=f,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return p.buffer=function(f,m,v,_,M,T){if(f==null||0>_)throw c.i.O();if(f.B())return new c.Ea(f.description);var A=new c.l;return f.yc(A),0<m&&A.X(m,m),(T=new p(T)).Oj=v,T.Y=f,T.ra=c.ua.Xd(v,A,!0),T.dt=c.ua.Xd(null,A,!0),T.La=m,T.ET=f.K(),0>=M&&(M=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(_)||_==0?_=1e-5*T.sb:_>.5*T.sb&&(_=.5*T.sb),12>M&&(M=12),(f=Math.abs(m)*(1-Math.cos(Math.PI/M)))>_?_=f:(f=Math.PI/Math.acos(1-_/Math.abs(m)))<M-1&&12>(M=c.P.truncate(f))&&(M=12,_=Math.abs(m)*(1-Math.cos(Math.PI/M))),T.xk=_,T.Fq=M,T.oA=Math.min(T.dt,.25*_),T.gE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var f=this.lE();f=c.P.truncate((f+3)/4);var m=.5*Math.PI/f;this.jA=m;for(var v=0;v<4*f;v++)this.Jd.push(null);var _=Math.cos(m);m=Math.sin(m);var M=c.h.construct(0,1);for(v=0;v<f;v++)this.Jd[v+0*f]=c.h.construct(M.y,-M.x),this.Jd[v+1*f]=c.h.construct(-M.x,-M.y),this.Jd[v+2*f]=c.h.construct(-M.y,M.x),this.Jd[v+3*f]=M,(M=c.h.construct(M.x,M.y)).Ct(_,m)},p.prototype.gE=function(){var f=this.Y.K();if(c.ba.zd(f))return(f=new c.Ua(this.Y.description)).pc(this.Y,!0),this.Y=f,this.gE();if(this.La<=this.ra){if(!c.ba.PS(f))return new c.Ea(this.Y.description);if(0>=this.La&&(f=new c.l,this.Y.A(f),f.S()<=2*-this.La||f.da()<=2*this.La))return new c.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw c.i.Ra()}},p.prototype.MN=function(){if(this.zG(this.Y)){var f=new c.Ta;this.Y.we(0,f);var m=new c.l;return this.Y.A(m),f.Db(m.tf()),this.Iu(f)}return this.Y=this.RV(this.Y),f=new s(this,this.qq),c.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.LN=function(){if(this.La==0)return this.Y;var f=c.$l.local();if(this.ev(),this.Y=f.W(this.Y,null,!1,this.Vb),0>this.La){var m=this.Y;return m=this.ly(m,0,m.ea()),f.W(m,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(f=new c.Ta,this.Y.we(0,f),m=new c.l,this.Y.A(m),f.Db(m.tf()),this.Iu(f)):(f=new o(this),c.Ih.local().W(f,this.Oj,this.Vb).next())},p.prototype.ly=function(f,m,v){for(var _=new c.Ea(f.description);m<v;m++)if(!(1>f.Ka(m))){var M=f.Kr(m),T=new c.l;if(f.Tj(m,T),0<this.La){if(0<M)if(this.AG(f,m))M=new c.Ta,f.we(f.Ca(m),M),M.Db(T.tf()),this.Au(_,M);else{var A=M=new c.Ua(f.description);A=c.au.EG(this.Y,m)||this.Bn(this.Y,m,A,!0,1)==2?this.eE(f,m):this.An(M),_.add(A,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(A=M=new c.Ua(f.description),this.Bn(this.Y,m,A,!0,1),M.B()))){var O=new c.l;for(O.L(T),O.X(this.sb,this.sb),A.vp(O),T=1,M=(A=this.An(M)).ea();T<M;T++)_.addPath(A,T,!0)}}else if(0<M){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(A=M=new c.Ua(f.description),this.Bn(this.Y,m,A,!0,-1),M.B())))for(O=new c.l,A.yc(O),O.X(this.sb,this.sb),A.vp(O),T=1,M=(A=this.An(M)).ea();T<M;T++)_.addPath(A,T,!0)}else for(A=M=new c.Ua(f.description),this.Bn(this.Y,m,A,!0,-1),T=0,M=(A=this.An(M)).ea();T<M;T++)_.addPath(A,T,!0)}if(0<this.La)return 1<_.ea()?_=this.An(_):p.kx(_);if(f=new c.l,_.yc(f),_.B())return p.kx(_);for(f.X(this.sb,this.sb),_.vp(f),_=this.An(_),f=new c.Ea(_.description),T=1,M=_.ea();T<M;T++)f.addPath(_,T,!1);return p.kx(f)},p.prototype.KN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(f){var m=new c.Ea(this.Y.description);return this.Au(m,f),this.oX(m)},p.prototype.JN=function(){var f=new a(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return c.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.GN=function(){var f=new c.Ea(this.Y.description);if(0>=this.La){if(this.La==0)f.bd(this.Y,!1);else{var m=new c.Hh;this.Y.dn(m),m.X(this.La,this.La),f.bd(m,!1)}return f}return f.bd(this.Y,!1),this.Y=f,this.eE(f,0)},p.prototype.eE=function(f,m){this.ev();var v=new c.Ea(f.description),_=new c.h,M=new c.h,T=new c.h,A=new c.h,O=new c.h,R=new c.h,j=new c.h,z=new c.h,V=f.Ka(m),F=f.Ca(m),G=0;for(m=f.Ka(m);G<m;G++){if(f.D(F+G,M),f.D(F+(G+1)%V,A),f.D(F+(G+2)%V,R),j.vc(A,M),j.length()==0||(j.Jv(),j.normalize(),j.scale(this.sb),_.add(j,M),T.add(j,A),G==0?v.Nt(_):v.Ei(_),v.Ei(T),z.vc(R,A),z.length()==0))throw c.i.Ra();z.Jv(),z.normalize(),z.scale(this.sb),O.add(z,A),this.BD(v,A,T,O,!1)}return p.kx(v)},p.prototype.fE=function(f,m,v){if(this.ev(),1>f.Ka(m))return null;if(this.AG(f,m)&&0<this.La){v=new c.Ta,f.we(f.Ca(m),v);var _=new c.l;return f.Tj(m,_),v.Db(_.tf()),this.Iu(v)}if(_=new c.Ua(f.description),f.Pn(m))this.Bn(f,m,_,v,1),this.Bn(f,m,_,v,-1);else{var M=new c.Ua(f.description);M.addPath(f,m,!1),M.Fr(f,m,0,f.tv(m),!1),this.Bn(M,0,_,v,1)}return this.An(_)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw c.i.hu("user_canceled")},p.prototype.An=function(f){return c.Hg.Ok(f,this.dt,!0,!0,this.Vb)},p.prototype.lE=function(){if(this.xk==0)return this.Fq;var f=1-this.xk*Math.abs(this.Mv);return 4>(f=-1>f?4:2*Math.PI/Math.acos(f)+.5)?f=4:f>this.Fq&&(f=this.Fq),c.P.truncate(f)},p.prototype.BD=function(f,m,v,_,M){this.ev();var T=new c.h;T.vc(v,m),T.scale(this.Mv);var A=new c.h;A.vc(_,m),A.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.jA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(A=Math.atan2(A.y,A.x)/this.jA)&&(A=this.Jd.length+A),(A=this.Jd.length-A)<T&&(A+=this.Jd.length);var O=c.P.truncate(A);A=c.P.truncate(Math.ceil(T)),(T=new c.h).N(this.Jd[A%this.Jd.length]),T.Dt(this.sb,m);var R=10*this.ra;for(T.sub(v),T.length()<R&&(A+=1),T.N(this.Jd[O%this.Jd.length]),T.Dt(this.sb,m),T.sub(_),T.length()<R&&--O,v=O-A,v++,O=0,A%=this.Jd.length;O<v;O++,A=(A+1)%this.Jd.length)T.N(this.Jd[A]),T.Dt(this.sb,m),f.Ei(T),this.Zq();M&&f.Ei(_)},p.prototype.Bn=function(f,m,v,_,M){var T=new c.hd,A=T.hN(f,m);if(T.Ip(this.oA,!1,!1),2>T.I(A))return 0>M||(M=f,T=new c.Ta,M.we(M.Ca(m),T),this.Au(v,T)),1;var O=T.Oa(T.Ya(T.Ob(A))),R=new c.Ed;if(R.ig(-O.x,-O.y),T.Pc(R),_&&(this.oQ(T,A,M),2>T.I(A)))return 0>M||(M=f,T=new c.Ta,M.we(M.Ca(m),T),this.Au(v,T)),1;this.$d.length=0;var j=T.Ob(A);m=T.Ya(j);var z=M==1?T.Na(m):T.V(m);f=M==1?T.V(m):T.Na(m);var V=!0;_=new c.h,A=new c.h;var F=new c.h,G=new c.h,Z=new c.h,K=new c.h,re=new c.h,te=new c.h,ue=new c.h,ye=new c.h,pe=this.sb;j=T.Ka(j);for(var De=0;De<j;De++)T.D(f,A),V&&(T.D(m,_),T.D(z,F),te.vc(_,F),te.normalize(),ye.HG(te),ye.scale(pe),G.add(ye,_)),re.vc(A,_),re.normalize(),ue.HG(re),ue.scale(pe),Z.add(_,ue),z=te.yi(re),V=te.Sh(re),0>z||0>V&&z==0?this.$d.push(h.Su(G,Z,_,2,this.$d.length+1,this.$d.length-1)):G.rb(Z)||(this.$d.push(h.construct(G,_,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(h.construct(_,Z,this.$d.length+1,this.$d.length-1,"dummy"))),K.add(A,ue),this.$d.push(h.Su(Z,K,_,1,this.$d.length+1,this.$d.length-1)),G.N(K),ye.N(ue),F.N(_),_.N(A),te.N(re),z=m,m=f,V=!1,f=M==1?T.V(m):T.Na(m);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(v),R.ig(O.x,O.y),v.TD(R,v.ea()-1),1},p.prototype.TV=function(f){for(var m=this.uO(),v=!0,_=m+1,M=m;_!=m;M=_){var T=this.$d[M];_=T.sh!=-1?T.sh:(M+1)%this.$d.length,T.Eo!=0&&(v&&f.Nt(T.Km),T.Eo==2?this.BD(f,T.cw,T.Km,T.Xm,!0):f.Ei(T.Xm),v=!1)}},p.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var f=0,m=0,v=this.$d.length;m<v;){var _=this.$d[m];if(3&_.Eo){f=m;break}m=_.sh}for(v=f+1,m=f;v!=f;m=v){v=(_=this.$d[m]).sh;for(var M=1,T=null;v!=m&&!(3&(T=this.$d[v]).Eo);)v=T.sh,M++;M!=1&&(_.Eo&T.Eo)==1&&(this.Ns==null&&(this.Ns=new c.zb,this.nw=new c.zb),this.Ns.Ec(_.Km),this.Ns.Rc(_.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(_.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),_.sh=v,T.uh=m))}return f},p.prototype.Hv=function(f,m,v){var _=new c.h;if(_.vc(v,f),v=_.length(),0<(v=this.sb*this.sb-v*v*.25)){v=Math.sqrt(v),_.normalize(),_.cr();var M=new c.h;if(M.vc(m,f),M.Sh(_)+v>=this.sb)return!0}return!1},p.prototype.oQ=function(f,m,v){for(var _=0;1>_;_++){var M=!1,T=f.Ob(m),A=f.Ka(T);if(A==0)break;var O=A;if(3>A)break;!f.ec(T)&&(O=A-1),T=f.Ya(T),A=0<v?f.Na(T):f.V(T);for(var R=0<v?f.V(T):f.Na(T),j=A,z=!0,V=new c.h,F=new c.h,G=new c.h,Z=new c.h,K=new c.h,re=c.h.construct(0,0),te=new c.h,ue=new c.h,ye=new c.h,pe=new c.h,De=this.sb,xe=0,Qe=0;Qe<O&&(f.D(R,F),z&&(f.D(T,V),f.D(A,G),j=A),ue.vc(V,G),ue.normalize(),te.vc(F,V),te.normalize(),j!=R);){var We=ue.yi(te),Ce=ue.Sh(te),Jt=!0;if(0>We||0>Ce&&We==0||!this.Hv(G,V,F)||(re.N(F),Jt=!1,++xe,M=!0),Jt){if(0<xe)for(;(We=0<v?f.Na(j):f.V(j))!=T;){if(f.D(We,Z),!this.Hv(Z,G,re)){We!=R&&this.Hv(Z,G,F)&&this.Hv(Z,V,F)&&(G.N(Z),j=We,Jt=!1,++xe);break}G.N(Z),j=We,Jt=!1,++xe}if(!Jt)continue;if(0<xe){for(j=0<v?f.Na(A):f.V(A),z=1;z<xe;z++)Jt=0<v?f.Na(j):f.V(j),f.qd(j,!0),j=Jt;ye.vc(V,G),xe=De*De-(xe=ye.length())*xe*.25,De-(xe=Math.sqrt(xe))>.5*this.xk?(K.add(G,V),K.scale(.5),ye.normalize(),ye.cr(),pe.N(ye),pe.scale(De-xe),K.add(pe),f.mf(A,K)):f.qd(A,!0),xe=0}G.N(V),j=T}V.N(F),A=T,T=R,R=0<v?f.V(T):f.Na(T),Qe++,z=!1}if(0<xe){for(j=0<v?f.Na(A):f.V(A),z=1;z<xe;z++)Jt=0<v?f.Na(j):f.V(j),f.qd(j,!0),j=Jt;K.add(G,V),K.scale(.5),ye.vc(V,G),xe=De*De-(xe=ye.length())*xe*.25,xe=Math.sqrt(xe),ye.normalize(),ye.cr(),pe.N(ye),pe.scale(De-xe),K.add(pe),f.mf(A,K)}if(f.Ip(this.oA,!1,!1),!M)break}},p.prototype.AG=function(f,m){if(f.Ka(m)==1)return!0;var v=new c.l;return f.Tj(m,v),Math.max(v.S(),v.da())<.5*this.xk},p.prototype.zG=function(f){var m=new c.l;return f.A(m),Math.max(m.S(),m.da())<.5*this.xk},p.prototype.RV=function(f){for(var m=0,v=0,_=(f=c.zC.local().W(f,.25*this.xk,!1,this.Vb)).ea();v<_;v++)m=Math.max(f.Ka(v),m);return 32>m?(this.qq=!1,f):(this.qq=!0,c.Hg.Ok(f,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(f,m){if(m=m.D(),this.Jd!=null&&this.Jd.length!==0){var v=new c.h;v.N(this.Jd[0]),v.Dt(this.sb,m),f.Nt(v);for(var _=1,M=this.Jd.length;_<M;_++)v.N(this.Jd[_]),v.Dt(this.sb,m),f.Ei(v)}else{_=this.lE(),v=c.P.truncate((_+3)/4),_=.5*Math.PI/v,M=Math.cos(_);for(var T=Math.sin(_),A=new c.h,O=3;0<=O;O--){switch(A.na(0,this.sb),O){case 0:for(_=0;_<v;_++)f.Aj(A.x+m.x,A.y+m.y),A.Ct(M,T);break;case 1:for(_=0;_<v;_++)f.Aj(-A.y+m.x,A.x+m.y),A.Ct(M,T);break;case 2:for(_=0;_<v;_++)f.Aj(-A.x+m.x,-A.y+m.y),A.Ct(M,T);break;default:for(f.rx(A.y+m.x,-A.x+m.y),_=1;_<v;_++)A.Ct(M,T),f.Aj(A.y+m.x,-A.x+m.y)}this.Zq()}}},p.kx=function(f){return f.Eh(1,0),f},p.prototype.oX=function(f){return f.Eh(2,this.ra),f.hm(),f},p}();c.CK=u}(q||(q={})),function(c){var C=function(){function w(h){this.Da=h,this.g=new c.hd,this.ed=new c.ja(0)}return w.prototype.Nh=function(h,a,s){switch(a){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},w.prototype.vy=function(h,a){return h.K()==1736?this.xy(h,a):this.yy(h)},w.prototype.xy=function(h,a){if(this.Da.S()==0||this.Da.da()==0)return h.Ja();var s=new c.l;h.yc(s),this.Y=this.g.Ib(h);var o=new c.l,u=new c.l,p=new c.h,f=new c.h,m=[0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0];new c.jg;var _=new c.zb,M=new c.ja(0);M.Jb(Math.min(100,h.I()));for(var T=!1,A=0;!T&&4>A;A++){var O=!1,R=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,O=s.v<=j&&s.C>=j;break;case 1:j=this.Da.G,O=s.G<=j&&s.H>=j;break;case 2:j=this.Da.C,O=s.v<=j&&s.C>=j;break;case 3:j=this.Da.H,O=s.G<=j&&s.H>=j}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var z=-1,V=-1,F=this.g.Ya(O),G=F;do{var Z=this.g.cc(G);Z==null&&(Z=_,this.g.D(G,p),Z.Ec(p),this.g.D(this.g.V(G),f),Z.Rc(f)),Z.A(o);var K=this.Nh(o,A,j),re=0,te=-1;if(K==-1){re=0<(Z=Z.fq(R,j,m,v))?this.g.Wl(G,v,Z):0,re+=1;var ue=G,ye=this.g.V(ue);for(Z=0;Z<re;Z++){if(this.g.D(ue,p),this.g.D(ye,f),(te=this.g.cc(ue))==null&&((te=_).Ec(p),te.Rc(f)),te.A(u),(te=this.Nh(u,A,j))==-1){if(R)(te=Math.abs(p.y-j))<(pe=Math.abs(f.y-j))?(p.y=j,this.g.mf(ue,p)):(f.y=j,this.g.mf(ye,f));else{te=Math.abs(p.x-j);var pe=Math.abs(f.x-j);te<pe?(p.x=j,this.g.mf(ue,p)):(f.x=j,this.g.mf(ye,f))}(te=this.g.cc(ue))==null&&((te=_).Ec(p),te.Rc(f)),te.A(u),te=this.Nh(u,A,j)}pe=z,z=te,V==-1&&(V=z),pe==0&&z==1||pe==1&&z==0||pe!=0||z!=0||M.add(ue),z==1&&(T=!1),te=ue=ye,ye=this.g.V(ye)}}re==0&&(pe=z,z=K,V==-1&&(V=z),pe==0&&z==1||pe==1&&z==0||pe!=0||z!=0||M.add(G),z==1&&(T=!1),te=this.g.V(G)),G=te}while(G!=F);for(V==0&&z==0&&M.add(F),Z=0,z=M.size;Z<z;Z++)V=M.get(Z),this.g.qd(V,!1);M.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return T?h.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(h){var a=new c.l,s=new c.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new c.jg,f=h,m=new c.l;h.yc(m);for(var v=0;4>v;v++){var _=!1,M=(1&v)!=0,T=0;switch(v){case 0:T=this.Da.v,_=m.v<=T&&m.C>=T;break;case 1:T=this.Da.G,_=m.G<=T&&m.H>=T;break;case 2:T=this.Da.C,_=m.v<=T&&m.C>=T;break;case 3:T=this.Da.H,_=m.G<=T&&m.H>=T}if(_){_=f,f=h.Ja(),(_=_.Ha()).aj();for(var A,O=new c.h;_.ab();)for(var R,j=!0;_.Ia();){var z=_.ia();z.A(a);var V=this.Nh(a,v,T);if(V==-1){if(0<(V=z.fq(M,T,o,u))){var F=0;A=z.bc();for(var G=0;G<=V;G++)if(F!=(R=G<V?u[G]:1)){z.dh(F,R,p);var Z=p.get();Z.Ec(A),G<V&&(M?(O.x=o[G],O.y=T):(O.x=T,O.y=o[G]),Z.Rc(O)),Z.A(s);var K=this.Nh(s,v,T);if(K==-1){if(A=Z.bc(),F=Z.xc(),M)(K=Math.abs(A.y-T))<(re=Math.abs(F.y-T))?(A.y=T,Z.Ec(A)):(F.y=T,Z.Rc(F));else{K=Math.abs(A.x-T);var re=Math.abs(F.x-T);K<re?(A.x=T,Z.Ec(A)):(F.x=T,Z.Rc(F))}Z.A(s),K=this.Nh(s,v,T)}A=Z.xc(),F=R,(R=K)==1?(f.pc(Z,j),j=!1):j=!0}}}else(R=V)==1?(f.pc(z,j),j=!1):j=!0}}}return f},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var h=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var s=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,s=this.g.V(s))this.g.D(s,h),(this.Da.v==h.x||this.Da.C==h.x||this.Da.G==h.y||this.Da.H==h.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(h){for(var a=new c.h,s=new c.h,o=c.P.mg(2048,0),u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u)){var p=this.g.Ya(u),f=p;do{var m=this.g.V(f);this.g.D(f,a);var v=-1;if(a.x==this.Da.v?(this.g.D(m,s),s.x==this.Da.v&&(v=1)):a.x==this.Da.C&&(this.g.D(m,s),s.x==this.Da.C&&(v=1)),a.y==this.Da.G?(this.g.D(m,s),s.y==this.Da.G&&(v=0)):a.y==this.Da.H&&(this.g.D(m,s),s.y==this.Da.H&&(v=0)),v!=-1&&(v=c.h.ub(a,s),!(1>=(v=c.P.truncate(Math.min(Math.ceil(v/h),2048)))))){for(var _=1;_<v;_++)o[_-1]=1*_/v;this.g.Wl(f,o,v-1)}f=m}while(f!=p)}},w.prototype.Xl=function(h,a){var s=this.g.Hd(),o=new c.h,u=new c.ja(0);u.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),m=0,v=this.g.Ka(p);m<v;m++){var _=this.g.V(f);this.g.D(f,o),(h?o.y==a:o.x==a)&&(this.g.D(_,o),(h?o.y==a:o.x==a)&&(this.g.Qa(f,s)!=1&&(u.add(f),this.g.Sa(f,s,1)),this.g.Qa(_,s)!=1&&(u.add(_),this.g.Sa(_,s,1)))),f=_}if(this.g.Ud(s),!(3>u.size)){var M=this;u.Wd(0,u.size,function(K,re){return M.Oh(K,re)}),s=new c.h,p=new c.h,f=new c.h,p.Sc();var T=-1;m=new c.ja(0),v=new c.ja(0),_=this.g.Hd();for(var A=this.g.Hd(),O=0,R=u.size;O<R;O++){var j=u.get(O);if(this.g.D(j,o),!o.rb(p)){if(T!=-1){for(var z=T;z<O;z++){T=u.get(z);var V=this.g.V(T);j=this.g.Na(T);var F=!1;0>this.Oh(T,V)&&(this.g.D(V,s),h?s.y==a:s.x==a)&&(m.add(T),F=!0,this.g.Sa(T,A,1)),0>this.Oh(T,j)&&(this.g.D(j,s),h?s.y==a:s.x==a)&&(F||m.add(T),this.g.Sa(T,_,1))}for(z=0,F=m.size;z<F;z++){if(T=m.get(z),j=this.g.Qa(T,_),V=this.g.Qa(T,A),j==1){j=this.g.Na(T),this.g.D(j,f);var G=[0];if(G[0]=0,!f.rb(o)){var Z=c.h.ub(p,f);G[0]=c.h.ub(f,o)/Z,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(j,G,1),j=this.g.Na(T),this.g.mf(j,o),v.add(j),this.g.Sa(j,_,1),this.g.Sa(j,A,-1)}}V==1&&(V=this.g.V(T),this.g.D(V,f),(G=[0])[0]=0,f.rb(o)||(Z=c.h.ub(p,f),G[0]=c.h.ub(p,o)/Z,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(T,G,1),j=this.g.V(T),this.g.mf(j,o),v.add(j),this.g.Sa(j,_,-1),this.g.Sa(j,A,1)))}T=m,m=v,(v=T).clear(!1)}T=O,p.N(o)}}this.g.Ud(_),this.g.Ud(A)}},w.prototype.Pl=function(h,a){var s=new c.h,o=new c.ja(0);o.Jb(100);for(var u=this.g.Hd(),p=0,f=this.ed.size;p<f;p++){var m=this.ed.get(p);if(m!=-1){var v=this.g.V(m);this.g.D(m,s),(h?s.y==a:s.x==a)&&(this.g.D(v,s),(h?s.y==a:s.x==a)&&(this.g.Qa(m,u)!=-2&&(o.add(m),this.g.Sa(m,u,-2)),this.g.Qa(v,u)!=-2&&(o.add(v),this.g.Sa(v,u,-2))))}}if(o.size!=0){var _=this;for(o.Wd(0,o.size,function(re,te){return _.Oh(re,te)}),p=0,f=o.size;p<f;p++){var M=o.get(p);this.g.Sa(M,u,p)}m=new c.h,(v=new c.h).Sc();var T=-1;for(p=0,f=o.size;p<f;p++)if((M=o.get(p))!=-1&&(this.g.D(M,s),!s.rb(v))){if(T!=-1)for(;;){M=!1;for(var A=1<p-T?p-1:p,O=T;O<A;O++){var R=o.get(O);if(R!=-1){var j=-1,z=this.g.V(R);0>this.Oh(R,z)&&(this.g.D(z,m),h?m.y==a:m.x==a)&&(j=z),z=-1;var V=this.g.Na(R);if(0>this.Oh(R,V)&&(this.g.D(V,m),h?m.y==a:m.x==a)&&(z=V),j!=-1&&z!=-1)this.Mh(R,o,u),this.g.qd(R,!1),this.Mh(j,o,u),this.g.qd(j,!1),M=!0;else if(j!=-1||z!=-1){for(V=O+1;V<p;V++){var F=o.get(V);if(F!=-1){var G=this.g.V(F),Z=-1;0>this.Oh(F,G)&&(this.g.D(G,m),h?m.y==a:m.x==a)&&(Z=G),G=this.g.Na(F);var K=-1;if(0>this.Oh(F,G)&&(this.g.D(G,m),h?m.y==a:m.x==a)&&(K=G),Z!=-1&&K!=-1){this.Mh(F,o,u),this.g.qd(F,!1),this.Mh(Z,o,u),this.g.qd(Z,!1),M=!0;break}if(j!=-1&&K!=-1){this.At(o,R,j,F,K,u),M=!0;break}if(z!=-1&&Z!=-1){this.At(o,F,Z,R,z,u),M=!0;break}}}if(M)break}}}if(!M)break}T=p,v.N(s)}}this.g.Ud(u)},w.prototype.Mh=function(h,a,s){s=this.g.Qa(h,s),a.set(s,-1),s=this.g.Qa(h,this.li),this.ed.set(s,-1),(a=this.g.cd(h))!=-1&&this.g.Ya(a)==h&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(h,a,s,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(s,u),this.g.Cc(u,s),this.Mh(o,h,p),this.g.oi(o,!1),this.Mh(u,h,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var h=0,a=this.ed.size;h<a;h++){var s=this.ed.get(h);s!=-1&&this.g.cj(s,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{s=f,m=0;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);2>=m?(s=this.g.Qa(f,this.li),this.ed.set(s,-1),f=this.g.qd(f,!1),m==2&&(s=this.g.Qa(f,this.li),this.ed.set(s,-1),this.g.qd(f,!1)),m=p,p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)):(this.g.fp(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,m),u+=m,o++,p=this.g.Sb(p))}}for(h=0,a=this.ed.size;h<a;h++)if((s=this.ed.get(h))!=-1&&(p=this.g.cd(s))==-1){p=this.g.wf(this.Y,-1),m=0,f=s;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);2>=m?(s=this.g.Qa(f,this.li),this.ed.set(s,-1),f=this.g.qd(f,!1),m==2&&(0<=(s=this.g.Qa(f,this.li))&&this.ed.set(s,-1),this.g.qd(f,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.fp(p,!1),u+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),h=0,a=this.g.md;a!=-1;a=this.g.ve(a))h+=this.g.I(a);this.g.XB(h)},w.wy=function(h,a,s){return new w(a).vy(h,s)},w.clip=function(h,a,s,o){if(h.B())return h;if(a.B())return h.Ja();if((s=h.K())==33)return o=h.D(),a.contains(o)?h:h.Ja();if(s==197)return o=new c.l,h.A(o),o.Fa(a)?(a=new c.Hh,h.copyTo(a),a.Zo(o),a):h.Ja();var u=new c.l;if(h.yc(u),a.contains(u))return h;if(!a.isIntersecting(u))return h.Ja();if((u=h.Cb)!=null&&(u=u.Hk)!=null){if((u=u.To(a))==1){if(s!=1736)throw c.i.Ra();return(h=new c.Ea(h.description)).vp(a),h}if(u==0)return h.Ja()}switch(s){case 550:s=null,u=h.I();for(var p=h.vb(0),f=0,m=0;m<u;m++)o=new c.h,p.uc(2*m,o),a.contains(o)||(f==0&&(s=h.Ja()),f<m&&s.Gd(h,f,m),f=m+1);return 0<f&&s.Gd(h,f,u),f==0?h:s;case 1736:case 1607:return w.wy(h,a,o);default:throw c.i.Ra()}},w.prototype.Oh=function(h,a){var s=new c.h;return this.g.D(h,s),h=new c.h,this.g.D(a,h),s.compare(h)},w}();c.Vd=C}(q||(q={})),function(c){var C=function(){function w(h,a){this.Da=h,this.g=new c.hd,this.ed=new c.ja(0),this.od=a}return w.prototype.Nh=function(h,a,s){switch(a){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},w.prototype.vy=function(h,a){return h.K()==1736?this.xy(h,a):this.yy(h)},w.prototype.xy=function(h,a){if(this.Da.S()==0||this.Da.da()==0)return h.Ja();var s=new c.l;h.yc(s),this.Y=this.g.Ib(h);var o=new c.l,u=new c.l,p=new c.h,f=new c.h,m=[0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0],_=new c.zb,M=new c.ja(0);M.Jb(256);for(var T=!1,A=0;!T&&4>A;A++){var O=!1,R=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,O=s.v<=j&&s.C>=j;break;case 1:j=this.Da.G,O=s.G<=j&&s.H>=j;break;case 2:j=this.Da.C,O=s.v<=j&&s.C>=j;break;case 3:j=this.Da.H,O=s.G<=j&&s.H>=j}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var z=!0,V=-1,F=-1,G=this.g.Ya(O),Z=G;do{var K=this.g.cc(Z);K==null&&(K=_,this.g.D(Z,p),K.Ec(p),this.g.D(this.g.V(Z),f),K.Rc(f)),K.A(o);var re=this.Nh(o,A,j),te=0,ue=-1;if(re==-1){te=0<(K=K.fq(R,j,m,v))?this.g.HX(Z,v,K):0,te+=1;var ye=Z,pe=this.g.V(ye);for(K=0;K<te;K++){if(this.g.D(ye,p),this.g.D(pe,f),(ue=this.g.cc(ye))==null&&((ue=_).Ec(p),ue.Rc(f)),ue.A(u),(ue=this.Nh(u,A,j))==-1){if(R)(ue=Math.abs(p.y-j))<(De=Math.abs(f.y-j))?(p.y=j,this.g.mf(ye,p)):(f.y=j,this.g.mf(pe,f));else{ue=Math.abs(p.x-j);var De=Math.abs(f.x-j);ue<De?(p.x=j,this.g.mf(ye,p)):(f.x=j,this.g.mf(pe,f))}(ue=this.g.cc(ye))==null&&((ue=_).Ec(p),ue.Rc(f)),ue.A(u),ue=this.Nh(u,A,j)}De=V,V=ue,F==-1&&(F=V),De==0&&V==1||De==1&&V==0||De!=0||V!=0||M.add(ye),V==1&&(z=T=!1),ue=ye=pe,pe=this.g.V(pe)}}if(te==0&&(De=V,V=re,F==-1&&(F=V),De==0&&V==1||De==1&&V==0||De!=0||V!=0||M.add(Z),V==1&&(z=T=!1),ue=this.g.V(Z)),Z=ue,256<=M.size){for(K=1,re=M.size-1;K<re;K++)te=M.get(K),this.g.qd(te,!1);M.set(1,M.Gc()),M.Dh(2)}}while(Z!=G);if(!z)for(F==0&&V==0&&M.add(G),K=0,re=M.size;K<re;K++)te=M.get(K),this.g.qd(te,!1);M.clear(!1),O=z||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return T?h.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(h){var a=new c.l,s=new c.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new c.jg,f=h,m=new c.l;h.yc(m);for(var v=new c.h,_=new c.h,M=null,T=null,A=0;4>A;A++){var O=!1,R=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,O=m.v<=j&&m.C>=j;break;case 1:j=this.Da.G,O=m.G<=j&&m.H>=j;break;case 2:j=this.Da.C,O=m.v<=j&&m.C>=j;break;case 3:j=this.Da.H,O=m.G<=j&&m.H>=j}if(O)for(O=f,f=h.Ja(),(O=O.Ha()).aj();O.ab();)for(var z,V=!0;O.Ia();){var F=O.ia();F.A(a);var G=this.Nh(a,A,j);if(G==-1){if(0<(G=F.fq(R,j,o,u))){var Z=0;F.$p(v);for(var K=0;K<=G;K++)if(Z!=(z=K<G?u[K]:1)){F.dh(Z,z,p);var re=p.get();re.Ec(v),K<G&&(R?(_.x=o[K],_.y=j):(_.x=j,_.y=o[K]),re.Rc(_)),re.A(s);var te=this.Nh(s,A,j);te==-1&&(M==null&&(M=new c.h),T==null&&(T=new c.h),re.$p(M),re.Vr(T),R?(Z=Math.abs(M.y-j))<(te=Math.abs(T.y-j))?(M.y=j,re.Ec(M)):(T.y=j,re.Rc(T)):(Z=Math.abs(M.x-j))<(te=Math.abs(T.x-j))?(M.x=j,re.Ec(M)):(T.x=j,re.Rc(T)),re.A(s),te=this.Nh(s,A,j)),re.Vr(v),Z=z,(z=te)==1?(f.pc(re,V),V=!1):V=!0}}}else(z=G)==1?(f.pc(F,V),V=!1):V=!0}}return f},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var h=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var s=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,s=this.g.V(s))this.g.D(s,h),(this.Da.v==h.x||this.Da.C==h.x||this.Da.G==h.y||this.Da.H==h.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(h){for(var a=new c.h,s=new c.h,o=null,u=null,p=c.P.mg(2048,0),f=this.g.Ob(this.Y);f!=-1;f=this.g.Sb(f)){var m=this.g.Ya(f),v=m;do{var _=this.g.V(v);this.g.D(v,a);var M=-1;if(a.x==this.Da.v?(this.g.D(_,s),s.x==this.Da.v&&(M=1)):a.x==this.Da.C&&(this.g.D(_,s),s.x==this.Da.C&&(M=1)),a.y==this.Da.G?(this.g.D(_,s),s.y==this.Da.G&&(M=0)):a.y==this.Da.H&&(this.g.D(_,s),s.y==this.Da.H&&(M=0)),M!=-1){if(o==null&&(o=new c.h),u==null&&(u=new c.h),o.N(a),u.na(0,0),M==0){var T=a.x-this.Da.v;u.x=c.mc.sign(s.x-a.x),o.x=h*c.mc.En(Math.floor(Math.abs(T/h)),T)+this.Da.v,0>o.x&&(o.x+=h)}else T=a.y-this.Da.G,u.y=c.mc.sign(s.y-a.y),o.y=h*c.mc.En(Math.floor(Math.abs(T/h)),T)+this.Da.G,0>o.y&&(o.y+=h);T=M!=0?s.y-a.y:s.x-a.x;var A=Math.abs(T);if(65536<A/h)throw c.i.ga("internal error");if(0<A){A=c.P.truncate(A/h)+2,p.length<A&&(p=c.P.mg(A));for(var O=A=0;;O++){var R=new c.h;if(R.x=o.x+u.x*O*h,R.y=o.y+u.y*O*h,1<=(R=(M!=0?R.y-a.y:R.x-a.x)/T))break;0>=R||(p[A]=R,A++)}A!=0&&this.g.Wl(v,p,A)}}v=_}while(v!=m)}},w.prototype.Xl=function(h,a){for(var s=-1,o=new c.h,u=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),m=0,v=this.g.Ka(p);m<v;m++){var _=this.g.V(f);this.g.D(f,o),(h?o.y==a:o.x==a)&&(this.g.D(_,o),(h?o.y==a:o.x==a)&&(s==-1&&(s=this.g.Hd()),u==null&&(u=new c.ja(0)).Jb(100),this.g.Qa(f,s)!=1&&(u.add(f),this.g.Sa(f,s,1)),this.g.Qa(_,s)!=1&&(u.add(_),this.g.Sa(_,s,1)))),f=_}if(s!=-1&&this.g.Ud(s),!(u==null||3>u.size)){var M=this;u.Wd(0,u.size,function(K,re){return M.Oh(K,re)}),s=new c.h,p=new c.h,f=new c.h,p.Sc();var T=-1;m=new c.ja(0),v=new c.ja(0),_=null;for(var A=this.g.Hd(),O=this.g.Hd(),R=0,j=u.size;R<j;R++){var z=u.get(R);if(this.g.D(z,o),!o.rb(p)){if(T!=-1){for(var V=T;V<R;V++){T=u.get(V);var F=this.g.V(T);z=this.g.Na(T);var G=!1;this.g.D(F,s),0>p.compare(s)&&(h?s.y==a:s.x==a)&&(m.add(T),G=!0,this.g.Sa(T,O,1)),this.g.D(z,s),0>p.compare(s)&&(h?s.y==a:s.x==a)&&(G||m.add(T),this.g.Sa(T,A,1))}for(V=0,G=m.size;V<G;V++){if(T=m.get(V),z=this.g.Qa(T,A),F=this.g.Qa(T,O),z==1&&(z=this.g.Na(T),this.g.D(z,f),!f.rb(o))){_==null&&(_=[]);var Z=c.h.ub(p,f);_[0]=c.h.ub(f,o)/Z,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(z,_,1),z=this.g.Na(T),this.g.mf(z,o),v.add(z),this.g.Sa(z,A,1),this.g.Sa(z,O,-1)}F==1&&(F=this.g.V(T),this.g.D(F,f),f.rb(o)||(_==null&&(_=[]),Z=c.h.ub(p,f),_[0]=c.h.ub(p,o)/Z,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(T,_,1),z=this.g.V(T),this.g.mf(z,o),v.add(z),this.g.Sa(z,A,-1),this.g.Sa(z,O,1)))}T=m,m=v,(v=T).clear(!1)}T=R,p.N(o)}}this.g.Ud(A),this.g.Ud(O)}},w.prototype.Pl=function(h,a){for(var s=new c.h,o=null,u=-1,p=0,f=this.ed.size;p<f;p++){var m=this.ed.get(p);if(m!=-1){var v=this.g.V(m);this.g.D(m,s),(h?s.y==a:s.x==a)&&(this.g.D(v,s),(h?s.y==a:s.x==a)&&(u==-1&&(u=this.g.Hd()),o==null&&(o=new c.ja(0)).Jb(100),this.g.Qa(m,u)!=-2&&(o.add(m),this.g.Sa(m,u,-2)),this.g.Qa(v,u)!=-2&&(o.add(v),this.g.Sa(v,u,-2))))}}if(o==null)u!=-1&&this.g.Ud(u);else{var _=this;for(o.Wd(0,o.size,function(re,te){return _.Oh(re,te)}),p=0,f=o.size;p<f;p++){var M=o.get(p);this.g.Sa(M,u,p)}m=new c.h,(v=new c.h).Sc();var T=-1;for(p=0,f=o.size;p<f;p++)if((M=o.get(p))!=-1&&(this.g.D(M,s),!s.rb(v))){if(T!=-1)for(;;){M=!1;for(var A=1<p-T?p-1:p,O=T;O<A;O++){var R=o.get(O);if(R!=-1){var j=-1,z=this.g.V(R);this.g.D(z,m),0>v.compare(m)&&(h?m.y==a:m.x==a)&&(j=z),z=-1;var V=this.g.Na(R);if(this.g.D(V,m),0>v.compare(m)&&(h?m.y==a:m.x==a)&&(z=V),j!=-1&&z!=-1)this.Mh(R,o,u),this.g.qd(R,!1),this.Mh(j,o,u),this.g.qd(j,!1),M=!0;else if(j!=-1||z!=-1){for(V=O+1;V<p;V++){var F=o.get(V);if(F!=-1){var G=this.g.V(F),Z=-1;this.g.D(G,m),0>v.compare(m)&&(h?m.y==a:m.x==a)&&(Z=G),G=this.g.Na(F);var K=-1;if(this.g.D(G,m),0>v.compare(m)&&(h?m.y==a:m.x==a)&&(K=G),Z!=-1&&K!=-1){this.Mh(F,o,u),this.g.qd(F,!1),this.Mh(Z,o,u),this.g.qd(Z,!1),M=!0;break}if(j!=-1&&K!=-1){this.At(o,R,j,F,K,u),M=!0;break}if(z!=-1&&Z!=-1){this.At(o,F,Z,R,z,u),M=!0;break}}}if(M)break}}}if(!M)break}T=p,v.N(s)}this.g.Ud(u)}},w.prototype.Mh=function(h,a,s){s=this.g.Qa(h,s),a.set(s,-1),s=this.g.Qa(h,this.li),this.ed.set(s,-1),(a=this.g.cd(h))!=-1&&this.g.Ya(a)==h&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(h,a,s,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(s,u),this.g.Cc(u,s),this.Mh(o,h,p),this.g.oi(o,!1),this.Mh(u,h,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var h=0,a=this.ed.size;h<a;h++){var s=this.ed.get(h);s!=-1&&this.g.cj(s,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{s=f,m=0;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);this.g.fp(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,m),u+=m,o++,p=this.g.Sb(p)}}for(h=0,a=this.ed.size;h<a;h++)if((s=this.ed.get(h))!=-1&&(p=this.g.cd(s))==-1){p=this.g.wf(this.Y,-1),m=0,f=s;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);2>=m?(s=this.g.Qa(f,this.li),this.ed.set(s,-1),f=this.g.qd(f,!1),m==2&&(0<=(s=this.g.Qa(f,this.li))&&this.ed.set(s,-1),this.g.qd(f,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.fp(p,!1),u+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),h=0,a=this.g.md;a!=-1;a=this.g.ve(a))h+=this.g.I(a);this.g.XB(h)},w.wy=function(h,a,s,o){return new w(a,o).vy(h,s)},w.clip=function(h,a,s,o,u){return w.Pu(h,a,null,s,o,u)},w.Pu=function(h,a,s,o,u,p){var f=h.K();if(f==33)return u=h.D(),a.contains(u)?h:h.Ja();if(f==197)return u=new c.l,h.A(u),u.Fa(a)?(a=new c.Hh,h.copyTo(a),a.Zo(u),a):h.Ja();if(h.B())return h;if(a.B())return h.Ja();var m=new c.l;if(h.yc(m),a.contains(m))return h;if(!a.isIntersecting(m))return h.Ja();if((s!=null||isNaN(o))&&c.ua.oy(s,a,!1),!c.ba.zj(f))throw c.i.O();if((s=h.Cb)!=null&&(s=s.Hk)!=null){if((s=s.To(a))==1){if(f!=1736)throw c.i.ga("internal error");return(h=new c.Ea(h.description)).vp(a),h}if(s==0)return h.Ja()}switch(f){case 550:for(p=null,f=h.I(),s=h.vb(0),o=0,u=new c.h,m=0;m<f;m++)s.uc(2*m,u),a.contains(u)||(o==0&&(p=h.Ja()),o<m&&p.Gd(h,o,m),o=m+1);return 0<o&&p.Gd(h,o,f),o==0?h:p;case 1736:case 1607:return w.wy(h,a,u,p);default:throw c.i.ga("internal error")}},w.prototype.Oh=function(h,a){var s=new c.h;return this.g.D(h,s),h=new c.h,this.g.D(a,h),s.compare(h)},w}();c.ti=C}(q||(q={})),function(c){var C=new c.h,w=function(){function a(s,o,u,p,f){this.Rm=new c.h,this.Fk=new c.h,this.Ri=new c.h,this.g=s,this.Cw=u,this.po=p,this.Rm=o,this.Al=f,this.Fk.Sc(),this.Ri.Sc()}return a.prototype.sE=function(s){this.g.D(s,this.Fk),s=c.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var o=c.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return h.eG(s,o)},a.prototype.ez=function(s){return this.g.Qa(s,this.Al)},a.prototype.Ky=function(s,o){return this.g.D(s,this.Fk),this.g.D(o,this.Ri),h.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},a}();c.oY=function(){};var h=function(){function a(){this.Rm=new c.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return a.dQ=function(s,o){var u=new a;return u.g=s,u.ra=o,u.Cw=o*o,u.bw=2*o,u.po=1/u.bw,u.wO()},a.Ev=function(s,o,u,p,f){return(s-=u)*s+(o-=p)*o<=f},a.eG=function(s,o){return c.P.Vh(o,c.P.Vh(s))},a.prototype.yO=function(s,o){this.g.Hc(s,C);for(var u=(C.y-this.Rm.y)*this.po,p=c.P.truncate((C.x-this.Rm.x)*this.po),f=c.P.truncate(u),m=u=0;1>=m;m+=1)for(var v=0;1>=v;v+=1){var _=a.eG(p+m,f+v),M=this.zl.lR(_);M!=-1&&(this.rq[u]=M,this.zs[u]=_,u++)}for(p=u-1;1<=p;p--)for(M=this.rq[p],f=p-1;0<=f;f--)if(M==this.rq[f]){this.zs[f]=-1,p!=--u&&(this.zs[p]=this.zs[u],this.rq[p]=this.rq[u]);break}for(f=0;f<u;f++)this.zO(s,this.zs[f],C,this.rq[f],o)},a.prototype.zO=function(s,o,u,p,f){for(var m=new c.h;p!=-1;p=this.zl.zR(p)){var v=this.zl.ka(p);s==v||o!=-1&&this.g.Qa(v,this.Al)!=o||(this.g.Hc(v,m),a.Ev(u.x,u.y,m.x,m.y,this.Cw)&&f.add(p))}},a.prototype.Zm=function(s,o,u){var p=this.g.Qa(s,this.so),f=this.g.Qa(o,this.so);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,s),this.g.Sa(s,this.so,p)),f==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,f),this.g.Sa(o,this.so,-2),o=this.TT(s,o),u&&(u=this.mw.sE(s),this.g.Sa(s,this.Al,u)),o},a.RT=function(s,o,u){s.Nb(o),u=s;var p=new c.h;a.ST(s.D(),o.D(),p),u.Db(p)},a.ST=function(s,o,u){var p=s.x;s.x!=o.x&&(p=(1*s.x+1*o.x)/2);var f=s.y;s.y!=o.y&&(f=(1*s.y+1*o.y)/2),u.na(p,f)},a.prototype.TT=function(s,o){var u=new c.h;this.g.D(s,u);var p=new c.h;this.g.D(o,p);var f=this.g.YF(s),m=f+(o=this.g.YF(o)),v=0,_=u.x;u.x!=p.x&&(_=(u.x*f+p.x*o)/m,v++);var M=u.y;return u.y!=p.y&&(M=(u.y*f+p.y*o)/m,v++),0<v&&this.g.Db(s,_,M),this.g.rX(s,m),v!=0},a.prototype.wO=function(){var s=this.g.gd,o=this.g.DF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.po=1/this.bw),this.Ad=new c.cu,this.Ad.Bt(c.P.truncate(this.g.gd/3+1)),this.Ad.hn(c.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new w(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new c.ZK(c.P.truncate(4*s/3),this.mw),this.zl.vW(this.g.gd),s=!1,o=this.g.md;o!=-1;o=this.g.ve(o))for(var u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++){var v=this.mw.sE(p);this.g.Sa(p,this.Al,v),this.zl.addElement(p,v),p=this.g.V(p)}var _=new c.ja(0);for(_.Jb(10),o=this.g.md;o!=-1;o=this.g.ve(o))for(u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++){if(this.g.Qa(p,this.so)!=-2)for(v=this.g.Qa(p,this.Al),this.zl.kd(p,v);this.yO(p,_),_.size!=0;){v=!1;for(var M=0,T=_.size;M<T;M++){var A=_.get(M),O=this.zl.ka(A);this.zl.wd(A),v=this.Zm(p,O,M+1==T)||v}if(s=s||v,_.clear(!1),!v)break}p=this.g.V(p)}return s&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),s},a.prototype.qN=function(){for(var s=new c.h,o=this.Ad.ke;o!=-1;o=this.Ad.lz(o)){var u=this.Ad.sc(o);for(this.g.D(this.Ad.ka(u),s),u=this.Ad.lb(u);u!=-1;u=this.Ad.lb(u))this.g.mf(this.Ad.ka(u),s)}},a}();c.$t=h}(q||(q={})),function(c){var C=function(){function w(h){h===void 0&&(h=null),this.zg=null,this.Pb=!1,this.zg=h===null?[]:h}return w.prototype.copyTo=function(h){if(h.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.zg.length;a++)h.zg.push(this.zg[a].Qf())},w.prototype.count=function(){return this.zg.length},w.prototype.add=function(h){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(h.Qf())},w.prototype.clear=function(){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},w.prototype.remove=function(h){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(h,1)},w.prototype.kg=function(){var h=new w;return this.copyTo(h),h},w.prototype.Qf=function(){return this.kg()},w.prototype.transform=function(h,a,s,o){if(h.length<a)throw c.i.ga("invalid Argument");var u=s;for(s=0;s<this.zg.length;s++){var p=this.zg[s];if(p.sm()!=null){var f=p.Wn,m=f?1:0,v=f?p.sm().getGeogcs2():p.sm().getGeogcs1();if(v=u/(v=v.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(v-1))for(u=0;u<a;u++)h[u][0]*=v,h[u][1]*=v;c.HC.geogToGeog(p.sm(),a,h,null,m),u=(f?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(v=u/o,3552713678800501e-30<Math.abs(v-1))for(u=0;u<a;u++)h[u][0]*=v,h[u][1]*=v;return a},w.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof w)||this.zg.length!=h.zg.length)return!1;for(var a=0;a<this.zg.length;a++)if(!this.zg[a].Nb(h.zg[a]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var h="CGT ("+this.count()+") ",a=0,s=this.count();a<s;++a)h+=this.zg[a].toString()+", ";return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},w.create=function(){return new w},w}();c.rC=C}(q||(q={})),function(c){var C,w=Math.PI,h=2*Math.PI,a=Math.PI/2,s=function(){function p(){}return p.OO=function(f,m){var v=new p;return v.x=f,v.y=m,v.type=0,v.Wh=0,v},p.cl=function(f){var m=new p;return m.x=f.x,m.y=f.y,m.type=0,m.Wh=0,m},p.NO=function(f){var m=new p;return m.x=f.x,m.y=f.y,m.type=f.type,m.Wh=f.Wh,m},p.Qd=function(f,m,v){var _=new p;return _.x=f.x+m*Math.cos(v),_.y=f.y+m*Math.sin(v),_.type=f.type,_.Wh=f.Wh,_},p.Ru=function(f,m){var v=new p;return v.x=.5*(f.x+m.x),v.y=.5*(f.y+m.y),v.type=f.type,v.Wh=f.Wh,v},p.OE=function(f,m){var v=new p;return v.x=f.x+.001*(m.x-f.x),v.y=f.y+.001*(m.y-f.y),v.type=f.type,v.Wh=f.Wh,v},p}(),o=function(){};(C=c.aL||(c.aL={}))[C.Round=0]="Round",C[C.Bevel=1]="Bevel",C[C.Miter=2]="Miter",C[C.Square=3]="Square";var u=function(){function p(f){this.IA=this.Zb=this.xg=null,this.od=f}return p.W=function(f,m,v,_,M,T){if(f==null||1>f.Eb())throw c.i.O();return m==0||f.B()?f:((T=new p(T)).mo=f,T.La=m,T.ra=M,T.Mi=v,T.xA=_,T.Qx())},p.prototype.$L=function(){var f=this.mo,m=f.bc(),v=f.xc(),_=new c.h;return _.vc(v,m),_.normalize(),_.Jv(),_.scale(this.La),m.add(_),v.add(_),_=f.Ja(),f.Ec(m),f.Rc(v),_},p.prototype.ZL=function(){var f=this.mo;if(0<this.La&&this.Mi!=2){var m=new c.Ea;return m.bd(f,!1),this.mo=m,this.Qx()}return(f=new c.Hh(f.aa)).X(this.La,this.La),f},p.prototype.oJ=function(f,m,v,_){return(m.x-f.x)*(_.x-v.x)+(m.y-f.y)*(_.y-v.y)},p.prototype.hc=function(f,m){if(m===void 0)this.Zb.push(f),this.gf++;else if(this.gf==0)this.hc(f);else{var v=this.Dw,_=this.xg[m==0?v-1:m-1],M=this.xg[m],T=this.oJ(_,M,this.Zb[this.gf-1],f);0<T?this.hc(f):0>T&&(0<this.oJ(_,M,M,this.Zb[this.gf-1])?(M=this.xg[m==0?v-2:m==1?v-1:m-2],v=s.Qd(_,this.La,Math.atan2(_.y-M.y,_.x-M.x)-a),this.Zb[this.gf-1]=v,this.Mi==1||this.Mi==2?(v=s.Ru(v,_),this.hc(v),v=s.Qd(_,this.La,this.Lv+a),(_=s.Ru(v,_)).type|=256,this.hc(_)):(v=s.Qd(_,this.La,this.Lv+a)).type|=256,this.hc(v),this.hc(f,m)):(v=s.Qd(M,this.La,this.Lv+a),this.hc(v),this.Mi==1||this.Mi==2?(v=s.Ru(v,M),this.hc(v),v=s.Qd(M,this.La,this.Wz-a),(_=s.Ru(v,M)).type|=256,this.hc(_)):(v=s.Qd(M,this.La,this.Wz-a)).type|=256,this.hc(v)))}},p.prototype.hE=function(){var f,m=this.Dw;this.gf=0;var v=.5*this.ra,_=0,M=0;for(f=0;f<m;f++){var T=this.xg[f],A=f==0?this.xg[m-1]:this.xg[f-1],O=f==m-1?this.xg[0]:this.xg[f+1],R=A.x-T.x,j=A.y-T.y,z=O.x-T.x,V=O.y-T.y,F=Math.atan2(j,R),G=Math.atan2(V,z);if(this.Lv=F,this.Wz=G,f==0&&(_=F,M=G),R=R*V-z*j,j=G,G<F&&(G+=h),0<R*this.La)this.Mi==1||this.Mi==2?(F=s.Qd(T,this.La,F+a),this.hc(F),F=s.OE(T,F),this.hc(F),F=s.Qd(T,this.La,G-a),(T=s.OE(T,F)).type|=256,this.hc(T),this.hc(F)):(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),F=s.Qd(T,R,.5*(F+G)),this.hc(F,f));else if(512&T.type){for(R=1-v/Math.abs(this.La),A=1,O=0>this.La?-w:w,-1<R&&1>R&&(.017453292519943295>(j=2*Math.acos(R))&&(j=.017453292519943295),1<(A=c.P.truncate(w/j+1.5))&&(O/=A)),j=F+a,F=s.Qd(T,this.La,j),f==0&&(F.type|=1024),this.hc(F,f),R=this.La/Math.cos(O/2),j+=O/2,(F=s.Qd(T,R,j)).type|=1024,this.hc(F);0<--A;)j+=O,(F=s.Qd(T,R,j)).type|=1024,this.hc(F);(F=s.Qd(T,this.La,G-a)).type|=1024,this.hc(F)}else if(this.Mi==1)F=s.Qd(T,this.La,F+a),this.hc(F,f),F=s.Qd(T,this.La,G-a),this.hc(F);else if(this.Mi==0)for(R=1-v/Math.abs(this.La),A=1,O=G-a-(F+a),-1<R&&1>R&&(.017453292519943295>(j=2*Math.acos(R))&&(j=.017453292519943295),1<(A=c.P.truncate(Math.abs(O)/j+1.5))&&(O/=A)),R=this.La/Math.cos(.5*O),j=F+a+.5*O,F=s.Qd(T,R,j),this.hc(F,f);0<--A;)j+=O,F=s.Qd(T,R,j),this.hc(F);else this.Mi==2?(R=A.x-T.x,j=A.y-T.y,.99999999<(A=(R*(z=O.x-T.x)+j*(V=O.y-T.y))/Math.sqrt(R*R+j*j)/Math.sqrt(z*z+V*V))?(F=s.Qd(T,1.4142135623730951*this.La,G-.25*w),this.hc(F,f),F=s.Qd(T,1.4142135623730951*this.La,G+.25*w),this.hc(F)):(A=Math.abs(this.La/Math.sin(.5*Math.acos(A))))>(O=Math.abs(this.xA*this.La))?(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),F=s.Qd(T,R,.5*(F+G)),G=c.h.construct(F.x,F.y),F=c.h.construct(T.x,T.y),(T=new c.h).vc(G,F),(G=new c.h).BW(O/T.length(),T,F),F=(A-O)*Math.abs(this.La)/Math.sqrt(A*A-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(F/T.length()),(F=new c.h).add(G,T),(A=new c.h).vc(G,T),F=s.cl(F),this.hc(F,f),F=s.cl(A),this.hc(F)):(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),F=s.Qd(T,R,.5*(F+G)),this.hc(F,f))):(G=j,0<this.La?(G>F&&(G-=h),A=F-G<a):(G<F&&(G+=h),A=G-F<a),A?(j=0>(R=1.4142135623730951*this.La)?F+.25*w:F+.75*w,F=s.Qd(T,R,j),this.hc(F,f),j=0>R?G-.25*w:G-.75*w,F=s.Qd(T,R,j),this.hc(F)):(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),G<F&&(G+=h),F=s.Qd(T,R,(F+G)/2),this.hc(F,f)))}return this.Lv=_,this.Wz=M,this.hc(this.Zb[0],0),T=s.NO(this.Zb[this.gf-1]),this.Zb[0]=T,this.rW()},p.prototype.Cu=function(f,m){if(!(2>m))for(var v=0;v<m;v++){var _=this.Zb[f+v];v!=0?this.IA.Ei(c.h.construct(_.x,_.y)):this.IA.Nt(c.h.construct(_.x,_.y))}},p.prototype.aM=function(f,m,v){var _=f.Ca(m),M=f.Wc(m);if(this.Zb=[],this.IA=v,f.ec(m)){for(m=f.Oa(_);f.Oa(M-1).rb(m);)M--;if(2<=M-_){for(this.Dw=M-_,this.xg=[],m=_;m<M;m++)this.xg.push(s.cl(f.Oa(m)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(m=f.Oa(_);_<M&&f.Oa(_+1).rb(m);)_++;for(m=f.Oa(M-1);_<M&&f.Oa(M-2).rb(m);)M--;if(2<=M-_){for(this.Dw=2*(M-_)-2,this.xg=[],(v=s.cl(f.Oa(_))).type|=1536,this.xg.push(v),m=_+1;m<M-1;m++)v=s.cl(f.Oa(m)),this.xg.push(v);for((v=s.cl(f.Oa(M-1))).type|=512,this.xg.push(v),m=M-2;m>=_+1;m--)(v=s.cl(f.Oa(m))).type|=1024,this.xg.push(v);if(this.hE())if(2<=this.Zb.length){for(f=-1,(M=(1024&this.Zb[this.gf-1].type)!=0)||(f=0),m=1;m<this.gf;m++)(_=(1024&this.Zb[m].type)!=0)?M||1<(M=m-1)-f+1&&this.Cu(f,M-f+1):M&&(f=m-1),M=_;M||1<(M=this.gf-1)-f+1&&this.Cu(f,M-f+1)}else f=0,M=this.gf-1,0<=f&&1<=M-f&&this.Cu(f,M-f+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.rW=function(){for(var f=!1,m=0;m<this.gf;m++){var v=this.Zb[m];v.sh=m+1,v.uh=m-1,this.Zb[m]=v}for((v=this.Zb[0]).uh=this.gf-2,this.Zb[0]=v,(v=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=v,m=v=0;m<this.gf;m++)if(256&this.Zb[v].type){var _=this.BP(v);if(_==-1){f=!0;break}v=_}else v=this.Zb[v].sh;return!f&&(this.LO(v),!0)},p.prototype.BP=function(f){for(var m,v,_=this.gf-1,M=f,T=1;T<=_-2;T++){m=M=this.Zb[M].sh,v=f;for(var A=1;A<=T;A++){if(v=this.Zb[v].uh,(256&this.Zb[v].type)==0&&(256&this.Zb[m].type)==0){var O=this.bS(v,m);if(O!=-1)return O}m=this.Zb[m].uh}}return-1},p.prototype.bS=function(f,m){var v=this.Zb[this.Zb[f].uh],_=this.Zb[f],M=this.Zb[this.Zb[m].uh],T=this.Zb[m];if(!this.EW(v,_,M,T))return-1;var A=new o;return this.sQ(v,_,M,T,A)&&!A.XD&&c.P.XJ((_.x-v.x)*(T.y-M.y)-(_.y-v.y)*(T.x-M.x))!=c.P.XJ(this.La)?(v=this.Zb[f].uh,A.cn.type=_.type,A.cn.sh=m,A.cn.uh=v,this.Zb[f]=A.cn,A.cn=this.Zb[m],A.cn.uh=f,this.Zb[m]=A.cn,m):-1},p.prototype.EW=function(f,m,v,_){return Math.max(f.x,m.x)>=Math.min(v.x,_.x)&&Math.max(v.x,_.x)>=Math.min(f.x,m.x)&&Math.max(f.y,m.y)>=Math.min(v.y,_.y)&&Math.max(v.y,_.y)>=Math.min(f.y,m.y)},p.prototype.sQ=function(f,m,v,_,M){M.XD=!1;var T=(m.y-f.y)*(_.x-v.x)-(m.x-f.x)*(_.y-v.y),A=(v.y-f.y)*(m.x-f.x)-(v.x-f.x)*(m.y-f.y);if(0<=(T=T==0?2:A/T)&&1>=T){var O=T;if(T=(_.y-v.y)*(m.x-f.x)-(_.x-v.x)*(m.y-f.y),A=(f.y-v.y)*(_.x-v.x)-(f.x-v.x)*(_.y-v.y),0<=(T=T==0?2:A/T)&&1>=T)return M.cn=s.OO(f.x+T*(m.x-f.x),f.y+T*(m.y-f.y)),M.cn.Wh=v.Wh+O*(_.Wh-v.Wh),O!=0&&O!=1||T!=0&&T!=1||(M.XD=!0),M.RY=T,M.SY=O,!((O==0||O==1)&&0<T&&1>T||(T==0||T==1)&&0<O&&1>O)}return!1},p.prototype.LO=function(f){for(;this.Zb[f].uh<f;)f=this.Zb[f].uh;var m=0,v=f;do v=this.Zb[v],this.Zb[m]=v,v=v.sh,m++;while(v!=f);this.Zb[m]=this.Zb[0],this.gf=m+1},p.prototype.VC=function(f){var m=this.mo,v=m.Ha();if(v!=null){v.aj();for(var _=-1;v.ab();)_++,this.aM(m,_,f)}},p.prototype.Qx=function(){var f=this.mo.K();return f==322?this.$L():f==197?this.ZL():c.ba.zd(f)?((f=new c.Ua).pc(this.mo,!0),this.mo=f,this.Qx()):f==1607?(f=new c.Ua,this.VC(f),f):f==1736?(f=new c.Ea,this.VC(f),f):null},p}();c.DK=u}(q||(q={})),function(c){var C=function(){function s(o){this.sk=o}return s.prototype.D=function(o,u){this.sk.g.D(o,u)},s.prototype.wd=function(o){var u=this.sk.Ga.ka(o);this.sk.Ga.wd(o,-1),this.sk.g.qd(u,!1)},s}(),w=function(){function s(o){this.sk=o}return s.prototype.D=function(o,u){this.sk.DT.D(o,u)},s.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},s}(),h=function(){function s(o){this.sk=o}return s.prototype.D=function(o,u){u.N(this.sk.GT[o])},s.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},s}(),a=function(){function s(o){o===void 0?(this.Ga=new c.$j,this.Ga.Ee(20),this.g=new c.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new C(this)):o instanceof Array?(this.Ga=new c.$j,this.Ga.Ee(20),this.GT=o,this.Zh=new h(this)):(this.Ga=new c.$j,this.Ga.Ee(20),this.DT=o,this.Zh=new w(this))}return s.prototype.Ib=function(o){var u=o.K();if(c.Fx.zj(u))this.eN(o);else if(c.Xk.zd(u))this.jN(o);else if(u==197)this.bN(o);else{if(u!=33)throw c.i.O("invalid shape type");this.iN(o)}},s.prototype.YQ=function(){var o=new c.Ta,u=this.Ga.sc(-1),p=new c.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(u),o),p.nf(o),u=this.Ga.lb(u);u!=-1;u=this.Ga.lb(u))this.g.Xi(this.Ga.ka(u),o),p.lineTo(o);return p},s.MO=function(o){var u=new s(o),p=o.I(),f=1,m=new c.h,v=new c.h,_=new c.h;for(o.D(0,m);o.D(f,v),v.Mz(m)&&f<p-1;)f++;for(u.Ga.addElement(0,-1),u.Ga.zn(f),p=f+1;p<o.I();p++)o.D(p,_),(f=u.kC(_))!=-1&&u.Ga.Uj(f,p);for(_=new c.Ta,f=u.Ga.sc(-1),p=new c.Ea(o.description),o.we(u.Ga.ka(f),_),p.nf(_),f=u.Ga.lb(f);f!=-1;f=u.Ga.lb(f))o.we(u.Ga.ka(f),_),p.lineTo(_);return p},s.construct=function(o,u,p){for(var f=new s(o),m=1,v=o[0];o[m].Mz(v)&&m<u-1;)m++;for(f.Ga.addElement(0,-1),f.Ga.zn(m),m+=1;m<u;m++)(v=f.kC(o[m]))!=-1&&f.Ga.Uj(v,m);for(o=0,u=f.Ga.sc(-1);u!=-1;u=f.Ga.lb(u))p[o++]=f.Ga.ka(u);return o},s.EG=function(o,u){var p=o.Ca(u),f=o.Wc(u);if(u=!o.ec(u)&&o.Pn(u),o=o.vb(0),f*=2,u&&(f-=2),6>f-(p*=2))return!0;u=new c.h;var m=new c.h,v=new c.h;o.uc(p,u),o.uc(p+2,m),o.uc(p+4,v);var _=s.Yu(m,v,u);if(_.rs()||!s.wm(_.value()))return!1;var M=c.h.construct(m.x,m.y),T=new c.h;for(p+=6;p<f;p+=2)if(T.N(m),m.N(v),o.uc(p,v),(_=s.Yu(m,v,u)).rs()||!s.wm(_.value())||(_=s.Yu(M,v,u)).rs()||!s.wm(_.value())||(_=s.Yu(m,v,T)).rs()||!s.wm(_.value()))return!1;return!0},s.prototype.eN=function(o){for(var u=new c.Ta,p=new c.h,f=0;f<o.I();f++){o.D(f,p);var m=this.Er(p);if(m!=-1){o.we(f,u);var v=this.g.hc(this.Us,u);this.Ga.Uj(m,v)}}},s.prototype.bN=function(o){for(var u=new c.Ta,p=new c.h,f=0;4>f;f++){o.hB(f,p);var m=this.Er(p);if(m!=-1){o.If(f,u);var v=this.g.hc(this.Us,u);this.Ga.Uj(m,v)}}},s.prototype.jN=function(o){var u=new c.Ta,p=o.bc();if((p=this.Er(p))!=-1){o.Vo(u);var f=this.g.hc(this.Us,u);this.Ga.Uj(p,f)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Ro(u),o=this.g.hc(this.Us,u),this.Ga.Uj(p,o))},s.prototype.iN=function(o){var u=o.D();(u=this.Er(u))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(u,o))},s.prototype.Er=function(o){var u=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(u=this.Ga.zn(-5)),u}return this.kC(o)},s.prototype.kC=function(o){var u=-1;do{var p=this.Ga.sc(-1),f=this.Ga.Gc(-1),m=this.Ga.ka(p),v=this.Ga.ka(f),_=new c.h,M=new c.h;if(this.Zh.D(m,_),this.Zh.D(v,M),m=c.h.Wq(M,o,_),s.wm(m))u=this.Ga.zn(-1),(_=this.iC(o,f,p))!=p&&this.jC(o,p,this.Ga.xe(_));else if(s.xG(m)){M=this.Ga.uv(-1);var T=this.Ga.sc(-1),A=this.Ga.Gc(-1);for(m=new c.h,v=new c.h;T!=this.Ga.xe(A);){var O=this.Ga.ka(M);this.Zh.D(O,m),O=c.h.Wq(m,o,_),s.xG(O)?(A=M,M=this.Ga.nl(M)):(T=M,M=this.Ga.Zp(M))}if(M=A,_=T,O=this.Ga.ka(M),T=this.Ga.ka(_),this.Zh.D(O,m),this.Zh.D(T,v),_!=p&&(m=c.h.Wq(v,o,m),!s.wm(m)))continue;u=this.Ga.Bu(_,M,-2,!1),this.jC(o,M,f),this.iC(o,_,p)}else this.tb==null&&(this.tb=new c.zb),this.tb.Ec(M),this.tb.Rc(_),0>(_=this.tb.ge(o,!0))?(_=this.Ga.xe(f),this.Ga.wd(f,-1),u=this.Ga.zn(-3),this.iC(o,_,p)):1<_&&(_=this.Ga.lb(p),this.Ga.wd(p,-1),u=this.Ga.Bu(-1,_,-3,!1),this.jC(o,_,f))}while(0);return u},s.prototype.jC=function(o,u,p){if(u!=p){var f=this.Ga.ka(u),m=this.Ga.lb(u),v=new c.h,_=new c.h;for(this.Zh.D(f,v);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),_),f=c.h.Wq(_,o,v),!s.wm(f));)f=u,u=m,v.N(_),m=this.Ga.lb(u),this.Zh.wd(f)}},s.prototype.iC=function(o,u,p){if(u==p)return p;var f=this.Ga.ka(u),m=this.Ga.xe(u),v=new c.h,_=new c.h;for(this.Zh.D(f,v);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),_),f=c.h.Wq(v,o,_),!s.wm(f));)f=u,u=m,v.N(_),m=this.Ga.xe(u),this.Zh.wd(f);return u},s.Yu=function(o,u,p){var f=new c.Xb;f.set(u.x),f.sub(o.x);var m=new c.Xb;m.set(p.y),m.sub(o.y);var v=new c.Xb;return v.set(u.y),v.sub(o.y),(u=new c.Xb).set(p.x),u.sub(o.x),f.Bg(m),v.Bg(u),f.sub(v),f},s.wm=function(o){return 0>o},s.xG=function(o){return 0<o},s}();c.au=a}(q||(q={})),function(c){var C=function(){function w(h){this.g=null,this.oH=!0,this.od=h}return w.uU=function(h,a,s){return h=c.ua.Gr(h),c.$t.Ev(a.Ng(),a.kh(),s.Ng(),s.kh(),c.mc.ox(h))},w.xO=function(h,a){var s=new c.Ta;return c.$t.RT(h,a,s),s},w.W=function(h,a,s,o){return(s=new w(s)).g=h,s.ra=a,s.oH=o,s.zM()},w.prototype.iM=function(h){return c.$t.dQ(this.g,h)},w.prototype.nM=function(h){return c.bu.W(this.g,h,this.od)},w.prototype.zM=function(){var h=this.ra,a=c.ua.Gr(h),s=1.00001*(h=c.ua.mN(h));h*=1.000001;for(var o=!1,u=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,f=this.g.eS();;p++){if(p>u)throw c.i.ga("Internal Error: max number of iterations exceeded");var m=this.iM(a);if(o=o||m,this.oH&&(m=this.g.Ip(a,!0,!1)!=0,o=o||m),m=!1,(p==0||f||c.bu.fI(!0,this.g,h,null,this.od))&&(m=this.nM(s),o=o||m),!m)break;c.op.Bp(this.od)}return o},w}();c.Vk=C}(q||(q={})),function(c){var C=function(){function h(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return h.prototype.wv=function(a,s){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,s))return null;o=s}return o},h.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||!(4095&this.$s))&&(this.$s=0,c.op.Bp(this.Vb))},h.prototype.iP=function(){var a=this.g.$q(!1),s=!1,o=new c.zb,u=new c.zb,p=new c.l;p.Pa();var f=new c.l;f.Pa();for(var m=new c.Ta,v=new c.OC,_=a.next();_!=-1;_=a.next()){c.op.Bp(this.Vb);var M=null,T=!1;if(!c.ba.Tn(this.g.jc(a.ek))){if((M=this.wv(_,o))==null)continue;if(M.A(p),p.X(this.ra,this.ra),M.Di(this.ra)){if(!M.Di(0))continue;T=!0,M=null}}var A=this.g.$q(a),O=A.next();for(O!=-1&&(O=A.next());O!=-1;O=A.next()){var R=null,j=!1;if(!c.ba.Tn(this.g.jc(A.ek))){if((R=this.wv(O,u))==null)continue;if(R.A(f),R.Di(this.ra)){if(!R.Di(0))continue;j=!0,R=null}}var z=0,V=0;if(M!=null&&R!=null)p.CG(f)&&(v.Qo(M),v.Qo(R),v.Fa(this.ra,!1),0<(z=v.ql(0))+(V=v.ql(1))&&(this.g.lr(_,v,0,!0),this.g.lr(O,v,1,!0)),v.clear());else if(M!=null){var F=new c.h;if(this.g.D(O,F),p.contains(F)){if(v.Qo(M),this.g.Xi(O,m),v.Fz(this.ra,m,!1),0<(z=v.ql(0)))if(this.g.lr(_,v,0,!0),j){for(j=-1,F=this.g.V(O);F!=-1&&F!=O&&(j=F,(R=this.wv(F,u))!=null&&R.Di(0));F=this.g.V(F));for(F=O;F!=-1&&(this.g.Fh(F,v.Cf),F!=j);F=this.g.V(F));}else this.g.Fh(O,v.Cf);v.clear()}}else{if(R==null)continue;if(F=new c.h,this.g.D(_,F),f.X(this.ra,this.ra),f.contains(F)){if(v.Qo(R),this.g.Xi(_,m),v.Fz(this.ra,m,!1),0<(V=v.ql(0)))if(this.g.lr(O,v,0,!0),T){for(j=-1,F=this.g.V(_);F!=-1&&F!=_&&(j=F,(R=this.wv(F,u))!=null&&R.Di(0));F=this.g.V(F));for(F=_;F!=-1&&(this.g.Fh(F,v.Cf),F!=j);F=this.g.V(F));}else this.g.Fh(_,v.Cf);v.clear()}}if(z+V!=0){if(z!=0){if((M=this.g.cc(_))==null){if(!this.g.fd(_,o))continue;M=o,o.A(p)}else M.A(p);if(M.Di(this.ra))break}s=!0}}}return s},h.prototype.jP=function(){return this.LU()},h.prototype.LU=function(){return new c.MC().LX(this.g,this.ra)},h.prototype.gI=function(){var a=!1;this.Nc==null&&(this.Nc=new c.$j);var s=new c.ja(0);s.Jb(this.g.gd+1);for(var o=this.g.$q(),u=o.next();u!=-1;u=o.next())s.add(u);this.g.nx(s,s.size),s.add(-1),o=this.g.Hd(),u=this.g.Hd(),this.ae=new c.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var p=new c.ja(0),f=new c.ja(0),m=0;new c.h;var v=this.g.ud;this.g.wb.oc();for(var _,M,T=this.g.wb.Aa[0].o,A=s.get(m++);A!=-1;){var O=_=T[2*(M=v.U(A,0))],R=M=T[2*M+1];do{var j=v.U(A,2),z=v.U(A,1);if(j!=-1){var V=v.U(j,0),F=T[2*V];0>(R<(V=T[2*V+1])?-1:R>V?1:O<F?-1:O>F?1:0)&&(f.add(A),f.add(j))}z!=-1&&(F=T[2*(V=v.U(z,0))],0>(R<(V=T[2*V+1])?-1:R>V?1:O<F?-1:O>F?1:0)&&(f.add(z),f.add(z))),(F=this.g.Qa(A,o))!=-1&&(p.add(F),this.g.Sa(A,o,-1)),(F=this.g.Qa(A,u))!=-1&&(p.add(F),this.g.Sa(A,u,-1)),(A=s.get(m++))!==-1&&(O=T[2*(R=v.U(A,0))],R=T[2*R+1])}while(A!=-1&&O===_&&R===M);for(O=p.size==1&&f.size==2,F=R=-1,j=0,z=p.size;j<z;j++){V=p.get(j);var G=this.Nc.xe(V);if(G==-1||p.cG(G)||(R=G),(V=this.Nc.lb(V))==-1||p.cG(V)||(F=V),R!=-1&&F!=-1)break}for(this.ae.VJ(M,_),j=0,z=p.size;j<z;j++)V=p.get(j),this.Nc.wd(V,-1);if(p.clear(!1),!O&&R!=-1&&F!=-1&&this.lO(R,F)){a=!0,this.Pi=this.ae.tm();break}for(j=0,z=f.size;j<z;j+=2){if(M=f.get(j),_=f.get(j+1),O?(M=this.Nc.Bu(R,F,M,!0),O=!1):M=this.Nc.addElement(M,-1),this.ae.sg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(_,o)==-1?this.g.Sa(_,o,M):this.g.Sa(_,u,M)}if(a)break;f.Dh(0)}return this.g.Ud(o),this.g.Ud(u),a},h.prototype.lO=function(a,s){return this.ae.compare(this.Nc,this.Nc.ka(a),s),a=this.ae.sg,this.ae.Mr(),a},h.tE=function(a){for(var s=a.md;s!=-1;s=a.ve(s))if(c.ba.Ic(a.jc(s)))return!0;return!1},h.aQ=function(a,s,o,u){return!!h.tE(a)&&((s=new h(u)).g=a,s.ra=o,15>a.gd?a=s.iP():s.jP())},h.W=function(a,s,o){return h.aQ(a,a.DF(),s,o)},h.fI=function(a,s,o,u,p){if(!h.tE(s))return!1;var f=new h(p);if(f.g=s,f.ra=o,f.Yz=a,f.gI())return u!=null&&u.Yt(f.Pi),!0;var m=new c.Ed;return m.VB(),s.Pc(m),(f=new h(p)).g=s,f.ra=o,f.Yz=a,a=f.gI(),m.VB(),s.Pc(m),!!a&&(u!=null&&u.Yt(f.Pi),!0)},h.Ol=function(a,s){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*s<1*a*s},h.gP=function(a,s,o,u){if(c.ba.Ic(s.K()))return new h(u).hP(a,s,o);throw c.i.ga("crack_A_with_B")},h.prototype.hP=function(a,s,o){var u=new c.l;a.yc(u);var p=new c.l;if(s.yc(p),p.X(o,o),!p.isIntersecting(u))return a;var f=a.Cb,m=null;f!=null&&(m=f.Gb),h.Ol(a,a.I())&&(m=c.ua.lj(a,p));var v=m!=null?m.getIterator():null,_=s.Ha();s=a.Ha();var M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];_.ab();)for(;_.Ia();){var T=_.ia();if(m!=null){for(v.Wo(T,o),f=v.next();f!=-1;f=v.next())if(this.Zq(),s.Wb(m.ka(f),-1),s.Ia()){var A=(f=s.ia()).Fa(T,null,M,null,o);for(f=0;f<A;++f){var O=M[f];if(O!=0&&O!=1){var R=s.xb(),j=new w;j.t=O,j.index=R,p.push(j)}}}}else{var z=new c.l;if(T.yc(z),z.X(o,o),u.isIntersecting(z)){for(s.aj();s.ab();)for(;s.Ia();)if(this.Zq(),f=s.ia(),O=new c.l,f.yc(O),O.isIntersecting(z))for(A=f.Fa(T,null,M,null,o),f=0;f<A;++f)(O=M[f])!=0&&O!=1&&(R=s.xb(),(j=new w).t=O,j.index=R,p.push(j))}}}if(p.length==0)return a;for(p=p.sort(w.zy),a=a.Ja(),s.aj();s.ab()&&!s.Ia(););for(o=s.ia(),u=new c.jg,m=-1,f=0,v=p.length;f<v;){for(M=p[f].index,_=f+1;_<v&&p[_].index==M;)++_;for(;s.xb()<M;){if(this.Zq(),T=s.Ia(),O=s.gb,(z=T||!s.Qn()||s.Rn())&&a.pc(o,m!=O),m=O,!T)for(;s.ab()&&!s.Ia(););o=s.ia()}for(M=0;f<_;f++)(O=p[f].t)!=M&&(o.dh(M,O,u),M=O,O=s.gb,a.pc(u.get(),m!=O),m=O);if((z=(T=s.Ia())||!s.Qn()||s.Rn())&&(o.dh(M,1,u),a.pc(u.get(),!1)),T)o=s.ia();else{for(;s.ab()&&!s.Ia(););o=s.Ia()?s.ia():null}f=_}for(o!=null&&(O=s.gb,(z=(T=s.Ia())||!s.Qn()||s.Rn())&&a.pc(o,m!=O),m=O),T=s.Ia();;){if(!T){for(;s.ab()&&!(T=s.Ia()););if(!T)break}o=s.ia(),O=s.gb,(z=(T=s.Ia())||!s.Qn()||s.Rn())&&a.pc(o,m!=O),m=O}return a},h}();c.bu=C;var w=function(){function h(){}return h.zy=function(a,s){return a.index==s.index?a.t>s.t?1:a.t<s.t?-1:0:a.index>s.index?1:-1},h}()}(q||(q={})),function(c){var C;(C=c.FK||(c.FK={}))[C.Left=0]="Left",C[C.Right=1]="Right",C[C.Coincident=2]="Coincident",C[C.Undefined=3]="Undefined",C[C.Uncut=4]="Uncut";var w=function(s,o,u,p,f,m,v,_,M,T,A){this.Y=s,this.ct=o,this.Ps=u,this.ug=p,this.Nm=T,this.Cl=A};c.qY=w;var h=function(){function s(o,u){this.EH=o,this.Ji=u}return s.prototype.lM=function(o,u){var p=new c.h;this.Ji.D(o,p);var f=new c.h;return this.Ji.D(u,f),(p=p.compare(f))!=0?p:(o=this.Ji.Qa(o,this.EH))<(u=this.Ji.Qa(u,this.EH))?-1:o==u?0:1},s}(),a=function(s,o,u,p,f,m,v,_,M){this.ug=s,this.Ps=o,this.JA=u,this.PH=p,this.Gi=f,this.Cl=m,this.Nm=v,this.QH=_,this.JT=M};c.pY=a,c.GK=function(){function s(){}return s.EK=function(o,u,p,f,m,v){if(u.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else if(p.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{var _=new c.hd;if(_.Ib(u),_.Ib(p),c.Vk.W(_,f,v,!0),_.gd==0)o=new w(u.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{for(u=0,p=_.Hd(),f=_.md;f!=-1;f=_.ve(f))for(v=_.Ob(f);v!=-1;v=_.Sb(v))for(var M=_.Ya(v),T=0,A=_.Ka(v);T<A;M=_.V(M),T++)_.Sa(M,p,u++);u=s.CM(p,_),s.YL(o,u,_,m)}}},s.CM=function(o,u){for(var p=u.gd,f=new c.ja(0),m=u.md;m!=-1;m=u.ve(m))for(var v=u.Ob(m);v!=-1;v=u.Sb(v))for(var _=u.Ya(v),M=0,T=u.Ka(v);M<T;_=u.V(_),M++)f.add(_);var A=new h(o,u);f.Wd(0,p,function(ye,pe){return A.lM(ye,pe)}),o=[];var O=[],R=u.Hd(),j=u.Hd();m=u.md,v=u.ve(m),T=new c.h;var z=new c.h,V=f.get(0),F=u.cd(V),G=u.Sf(F);u.D(V,T);var Z=1;for(_=0;Z<p-1;){var K=!1;for(M=Z;M<p;M++)if(M!=_){var re=f.get(M),te=u.cd(re),ue=u.Sf(te);if(u.D(re,z),!T.rb(z))break;G==m&&ue==v&&(K=s.pM(R,j,u,o,O,F,V,te,re))}if(K||_==Z-1){if(K&&_==Z-1&&Z--,++_==p)break;V=f.get(_),F=u.cd(V),G=u.Sf(F),u.D(V,T)}K||(Z=_+1)}for(p=[],m=u.md;m!=-1;m=u.ve(m))for(v=u.Ob(m);v!=-1;v=u.Sb(v))for(f=u.Ya(v),M=0,T=u.Ka(v);M<T;f=u.V(f),M++){if(0<=(_=u.Qa(f,j)))for(;_<O.length&&O[_].ug==f;)p.push(O[_++]);if(0<=(_=u.Qa(f,R)))for(;_<o.length&&o[_].ug==f;)p.push(o[_++])}return u.Ud(R),u.Ud(j),p},s.pM=function(o,u,p,f,m,v,_,M,T){var A=p.tj(v),O=p.tj(M),R=p.Ya(v),j=p.Ya(M),z=p.Na(_),V=p.Na(T),F=!1,G=!1,Z=!1,K=!1;return _!=R&&(T!=j&&(F=s.qM(o,p,f,v,z,M,V)),T!=O&&(G=s.rM(o,p,f,v,z,M,T))),_!=A&&(T!=j&&(Z=s.sM(u,p,m,v,_,M,V,R)),T!=O&&(K=s.tM(u,p,m,v,_,M,T,R))),F&&G&&Z?(o=f.length-1,m[K?m.length-2:m.length-1].Gi==2&&(f[o-1]=f[o],--f.length)):F&&G&&K&&m[m.length-1].Gi==2&&(m=f[f.length-1],--f.length,p.Qa(m.ug,o)==f.length&&p.Sa(m.ug,o,-1)),F||G||Z||K},s.qM=function(o,u,p,f,m,v,_){var M=new c.zb,T=new c.zb,A=[0,0],O=[0,0],R=u.cc(m);return R==null&&(u.fd(m,M),R=M),(M=u.cc(_))==null&&(u.fd(_,T),M=T),2>(R=R.Fa(M,null,A,O,0))&&(f=new a(m,f,A[0],NaN,R,_,v,O[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1)),!0},s.rM=function(o,u,p,f,m,v,_){var M=new c.zb,T=new c.zb,A=[0,0],O=[0,0],R=u.cc(m);return R==null&&(u.fd(m,M),R=M),(M=u.cc(_))==null&&(u.fd(_,T),M=T),2>(R=R.Fa(M,null,A,O,0))&&(f=new a(m,f,A[0],NaN,R,_,v,O[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0)},s.sM=function(o,u,p,f,m,v,_,M){var T=new c.zb,A=new c.zb,O=[0,0],R=[0,0],j=u.cc(m);return j==null&&(u.fd(m,T),j=T),(T=u.cc(_))==null&&(u.fd(_,A),T=A),(j=j.Fa(T,null,O,R,0))==2?(f=new a(m,f,O[0],O[1],j,_,v,R[0],R[1]),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0):(A=!1,m==M&&(f=new a(m,f,O[0],NaN,j,_,v,R[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),A=!0),A)},s.tM=function(o,u,p,f,m,v,_,M){var T=new c.zb,A=new c.zb,O=[0,0],R=[0,0],j=u.cc(m);return j==null&&(u.fd(m,T),j=T),(T=u.cc(_))==null&&(u.fd(_,A),T=A),(j=j.Fa(T,null,O,R,0))==2?(f=new a(m,f,O[0],O[1],j,_,v,R[0],R[1]),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0):(A=!1,m==M&&(f=new a(m,f,O[0],NaN,j,_,v,R[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),A=!0),A)},s.YL=function(o,u,p,f){var m=[];m[0]=new c.h,m[1]=new c.h,m[2]=new c.h,m[3]=new c.h;var v=new c.h,_=new c.h,M=new c.h,T=new c.h,A=null;f!=null&&(A=new c.jg).Qr();var O=0,R=null,j=new c.zb;new c.zb;for(var z=p.Ob(p.md);z!=-1;z=p.Sb(z)){for(var V=4,F=-1,G=-1,Z=-1,K=-1,re=NaN,te=!0,ue=!1,ye=!0,pe=!0,De=!0,xe=0,Qe=z,We=0,Ce=p.Ya(z),Jt=p.Ka(z),Ci=0;Ci<Jt;Ce=p.V(Ce),Ci++){var Kt=p.cc(Ce);if(Kt==null){if(!p.fd(Ce,j))continue;Kt=j}G==-1&&(G=Ce);for(var $t=0;O<u.length&&Ce==u[O].ug;){F=u[O].Ps;var Tt=u[O].ug,pt=u[O].JA,si=u[O].Nm,ct=u[O].Cl,zs=u[O].QH;if(u[O].Gi==2){if(ue||(Qe=F,G=Tt,We=pt,Z=si,K=ct,re=zs,V=2,f!=null?R=new c.Ua:xe=0,De=!1,pe=!0),pt=u[O].PH,zs=u[O].JT,f!=null?(Kt.dh($t,u[O].PH,A),R.pc(A.get(),pe)):xe++,$t=pt,ue=!0,pe=te=!1,O+1==u.length||u[O+1].Gi!=2||u[O+1].ug==Tt&&u[O+1].JA!=$t){if(f!=null){var vt=new w(R,2,F,Tt,pt,V,Qe,G,We,si,ct);f.push(vt)}else null.add(xe);Qe=F,G=Tt,We=pt,Z=si,K=ct,re=zs,V=2,ue=te=!1,pe=De=!0}}else{var Pr=p.V(Tt);if(O<u.length-1&&u[O+1].ug==Pr&&u[O+1].Cl==ct&&u[O+1].Gi==2)pt!=$t&&(De&&(f!=null?R=new c.Ua:xe=0),te=0<O&&u[O-1].Ps==F?V==1?0:V==0?1:3:3,f!=null?(Kt.dh($t,pt,A),R.pc(A.get(),pe),vt=new w(R,te,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):(xe++,null.add(xe)),$t=pt,Qe=F,G=Tt,We=pt,Z=si,K=ct,re=zs,V=te,te=ye=!1,pe=De=!0);else if(!s.xM(o,p,u,O,v,_)){s.uM(p,u,O,z,Ce,M,T);var Ot=!1;if(Pr=!1,vt=!0,!(v.rb(M)||_.rb(M)||v.rb(T)||_.rb(T))){m[0].N(v),m[1].N(_),m[2].N(M),m[3].N(T),m.sort(c.h.pu);var Bd=m[0],Gd=m[1],Ud=m[2],Nr=m[3];Bd.rb(v)?Gd.rb(_)?o?(Pr=Ot=!0,vt=!1):Ot=!1:Nr.rb(_)?o?vt=Pr=Ot=!0:Ot=!1:(Ot=!0,vt=Gd.rb(M)):Gd.rb(v)?Ud.rb(_)?o?(Pr=Ot=!0,vt=!1):Ot=!1:Bd.rb(_)?o?vt=Pr=Ot=!0:Ot=!1:(Ot=!0,vt=Ud.rb(M)):Ud.rb(v)?Nr.rb(_)?o?(Pr=Ot=!0,vt=!1):Ot=!1:Gd.rb(_)?o?vt=Pr=Ot=!0:Ot=!1:(Ot=!0,vt=Nr.rb(M)):Bd.rb(_)?o?(Pr=Ot=!0,vt=!1):Ot=!1:Ud.rb(_)?o?vt=Pr=Ot=!0:Ot=!1:(Ot=!0,vt=Bd.rb(M))}Ot&&(Ot=Ce==Tt,(pt!=$t||Ot&&$t==0)&&(De&&(f!=null?R=new c.Ua:xe=0),f!=null?(Kt.dh($t,pt,A),R.pc(A.get(),pe)):xe++),vt?V!=1?((pt!=$t||Ot&&$t==0)&&(f!=null?(vt=new w(R,1,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):null.add(xe)),Pr?(O>=u.length-2||u[O+2].Ps!=F)&&(V=0):V=1):((pt!=$t||Ot&&$t==0)&&(f!=null?(vt=new w(R,3,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):null.add(xe)),V=1):V!=0?((pt!=$t||Ot&&$t==0)&&(f!=null?(vt=new w(R,0,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):null.add(xe)),Pr?(O>=u.length-2||u[O+2].Ps!=F)&&(V=1):V=0):((pt!=$t||Ot&&$t==0)&&(f!=null?(vt=new w(R,3,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):null.add(xe)),V=0),(pt!=$t||Ot&&$t==0)&&($t=pt,Qe=F,G=Tt,We=pt,Z=si,K=ct,re=zs,te=ye=!1,pe=De=!0))}}O++}$t!=1&&(De&&(f!=null?R=new c.Ua:xe=0),f!=null?(Kt.dh($t,1,A),R.pc(A.get(),pe)):xe++,pe=De=!1,ye=!0)}ye&&(pt=1,Tt=p.tj(z),Tt=p.Na(Tt),ct=si=-1,zs=NaN,te?f!=null?(vt=new w(R,4,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):null.add(xe):(te=V==1?0:V==0?1:3,f!=null?(vt=new w(R,te,F,Tt,pt,V,Qe,G,We,si,ct),f.push(vt)):null.add(xe)))}},s.xM=function(o,u,p,f,m,v){var _=p[f].QH;if(_==1)return s.vM(o,u,p,f,m,v);if(_==0)return s.wM(o,u,p,f,m,v);throw c.i.Ra()},s.vM=function(o,u,p,f,m,v){var _=new c.zb,M=p[f].ug,T=p[f].Nm,A=p[f].Cl,O=-1,R=-1,j=-1,z=-1;if(!o&&0<f){var V=p[f-1];O=V.ug,R=V.Nm,j=V.Cl,z=V.Gi}var F=-1,G=-1,Z=-1,K=-1;f<p.length-1&&(F=(V=p[f+1]).ug,G=V.Nm,Z=V.Cl,K=V.Gi);var re=u.V(M);return V=u.V(A),o?f==p.length-1||F!=M||G!=T||Z!=V||K==2?((o=u.cc(A))==null&&(u.fd(A,_),o=_),v.N(o.lg()),m.nt(v),v.normalize(),m.normalize(),!1):((o=u.cc(A))==null&&(u.fd(A,_),o=_),m.N(o.lg()),(o=u.cc(V))==null&&(u.fd(V,_),o=_),v.N(o.lg()),m.Uq(),v.normalize(),m.normalize(),!1):0<f&&O==M&&R==T&&j==V&&z==2||f<p.length-1&&F==re&&G==T&&Z==V&&K==2?((o=u.cc(A))==null&&(u.fd(A,_),o=_),v.N(o.lg()),m.nt(v),v.normalize(),m.normalize(),!1):!(f<p.length-1&&F==M&&G==T&&Z==V)||((o=u.cc(A))==null&&(u.fd(A,_),o=_),m.N(o.lg()),(o=u.cc(V))==null&&(u.fd(V,_),o=_),v.N(o.lg()),m.Uq(),v.normalize(),m.normalize(),!1)},s.wM=function(o,u,p,f,m,v){var _=new c.zb,M=p[f].ug,T=p[f].Nm,A=p[f].Cl,O=-1,R=-1,j=-1,z=-1;if(!o&&f<p.length-1){var V=p[f+1];O=V.ug,R=V.Nm,j=V.Cl,z=V.Gi}var F=-1,G=-1,Z=-1;V=-1,0<f&&(F=(V=p[f-1]).ug,G=V.Nm,Z=V.Cl,V=V.Gi);var K=u.V(M),re=u.Na(A);return o?f!=0&&F==M&&G==T&&Z==re&&V!=2||((o=u.cc(A))==null&&(u.fd(A,_),o=_),v.N(o.lg()),m.nt(v),v.normalize(),m.normalize(),!1):!(0<f&&F==M&&G==T&&Z==re&&V==2||f<p.length-1&&O==K&&R==T&&j==re&&z==2)||((o=u.cc(A))==null&&(u.fd(A,_),o=_),v.N(o.lg()),m.nt(v),v.normalize(),m.normalize(),!1)},s.uM=function(o,u,p,f,m,v,_){var M=new c.zb,T=o.cc(m);if(T==null&&(o.fd(m,M),T=M),u=(p=u[p]).ug,p=p.JA,m=o.V(u),p==1)v.N(T.lg()),m!=-1&&m!=o.tj(f)?((T=o.cc(m))==null&&(o.fd(m,M),T=M),_.N(T.lg()),(T=o.cc(u))==null&&o.fd(u,M)):_.N(v),v.Uq(),_.normalize(),v.normalize();else{if(p!=0)throw c.i.Ra();_.N(T.lg()),v.nt(_),_.normalize(),v.normalize()}},s}()}(q||(q={})),function(c){var C;(C=c.XL||(c.XL={}))[C.Linear=0]="Linear",C[C.Angular=1]="Angular",C[C.Area=2]="Area";var w=function(){function f(m,v,_){this.pd=v,this.ci=_,this.qA=m}return f.prototype.Nb=function(m){return m instanceof f&&this.ci===m.ci},f.WF=function(m){return m.pd!==0?null:m.qA===-1?new f(-1,2,m.ci*m.ci):f.ah(u[m.qA])},f.ah=function(m){return(m=o[m])===void 0?null:m},f.UO=function(m,v,_){var M=null;if(_!=null)try{_.values[0]==="EPSG"&&(M=f.ah(parseInt(_.values[1])))}catch{}return M===null&&(M=new f(-1,m,v)),M},f.prototype.Fc=function(){return this.qA},f.prototype.xF=function(m){if(m.pd!=this.pd)throw c.i.Hb();return this.ci/m.ci},f.Ph=function(m,v,_){return v.xF(_)*m},f.SE=function(m,v,_,M,T){for(_=_.xF(M),M=0;M<v;M++)T[M]=m[M]*_},f}();c.Uc=w;for(var h=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],u=[],p=0;p<h.length;p+=2)o[h[p]]=new w(h[p],2,h[p+1]);for(h=null,p=0;p<a.length;p+=2)o[a[p]]=new w(a[p],1,a[p+1]);for(a=null,p=0;p<s.length;p+=3)o[s[p]]=new w(s[p],0,s[p+1]),u[s[p]]=s[p+2];s=null}(q||(q={})),function(c){var C=function(){function w(){this.yb=this.pb=0}return w.prototype.set=function(h,a){a!==void 0?(this.pb=h,this.yb=a):typeof h=="number"?(this.pb=h,this.yb=0):(this.pb=h.pb,this.yb=h.yb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(h){var a=this.pb+h.pb;h=this.yb+h.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=h},w.prototype.fN=function(){var h=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(h);this.pb=h,this.yb=a},w.prototype.ZM=function(h,a){this.pb=h.pb+a.pb,this.yb=h.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(h){if(typeof h=="number"){var a=this.pb-h;h=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-h.pb,h=this.yb+h.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=h},w.prototype.Bg=function(h){var a=this.pb*h.pb;this.yb=this.yb*Math.abs(h.pb)+h.yb*Math.abs(this.pb)+this.yb*h.yb+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Po=function(h){var a=this.pb*h;this.yb=this.yb*Math.abs(h)+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Ml=function(h,a){var s=Math.abs(h.pb)*Math.abs(a.pb);this.yb=h.yb*Math.abs(a.pb)+a.yb*Math.abs(h.pb)+h.yb*a.yb+2220446049250313e-31*Math.abs(s),this.pb=s},w.prototype.lm=function(h){var a=Math.abs(h.pb),s=this.pb/h.pb,o=(this.yb+Math.abs(s)*h.yb)/a;h.yb>.01*a&&(o*=1+(1+(h=h.yb/a))*h),this.pb=s,this.yb=o+2220446049250313e-31*Math.abs(s)},w.prototype.sqrt=function(){if(0<=this.pb){var h=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/h:this.pb>this.yb?h-Math.sqrt(this.pb-this.yb):Math.max(h,Math.sqrt(this.pb+this.yb)-h);a+=2220446049250313e-31*Math.abs(h)}else this.pb<-1*this.yb?a=h=NaN:(h=0,a=Math.sqrt(this.yb));this.pb=h,this.yb=a},w.prototype.sin=function(h){var a=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(s)+.5*a*h.yb)*h.yb+2220446049250313e-31*a},w.prototype.cos=function(h){var a=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=s,s=Math.abs(s),this.yb=(Math.abs(a)+.5*s*h.yb)*h.yb+2220446049250313e-31*s},w.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},w.prototype.rs=function(){return this.rg()&&this.yb!=0},w}();c.Xb=C}(q||(q={}));var Ti=new q.h,Kn=new q.h,ea=new q.h,Zn=new q.h,ta=new q.h;(function(c){var C,w;(w=C||(C={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var h=function(){function a(s,o,u,p,f,m,v){o!==void 0?(this.ib=s,this.ek=o,this.dl=u,this.ki=p,this.za=m,this.cA=v,this.gw=f):(this.ib=s.ib,this.ek=s.ek,this.dl=s.dl,this.ki=s.ki,this.za=s.za,this.cA=s.cA,this.gw=s.gw),this.XG=!0}return a.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},a.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!c.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},a.vP=function(s,o,u,p,f,m,v){return new a(s,o,u,p,f,m,v)},a}();c.vY=h,C=function(){function a(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(s){return this.Te!=null?this.Te[s]:null},a.prototype.Zg=function(s,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var u=0,p=this.wb.I();u<p;u++)this.Te.push(null)}this.Te[s]=o},a.prototype.ep=function(s,o){this.nd.T(s,1,o)},a.prototype.cp=function(s,o){this.nd.T(s,2,o)},a.prototype.QB=function(s,o){this.nd.T(s,6,o)},a.prototype.Up=function(s){return this.nd.U(s,6)},a.prototype.gx=function(s,o){this.nd.T(s,7,o)},a.prototype.sv=function(s){return this.nd.U(s,0)},a.prototype.JJ=function(s,o){this.dd.T(s,1,o)},a.prototype.NJ=function(s,o){this.dd.T(s,0,o)},a.prototype.EF=function(s){return this.dd.U(s,7)},a.prototype.ap=function(s,o){this.dd.T(s,3,o)},a.prototype.bp=function(s,o){this.dd.T(s,4,o)},a.prototype.pU=function(s){this.dd==null&&(this.dd=new c.ad(8));var o=this.dd.De();return this.dd.T(o,2,s),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.JQ=function(s){this.dd.kd(s)},a.prototype.rU=function(s){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0));var o=this.nd.De();return this.nd.T(o,0,o),this.nd.T(o,3,0),this.nd.T(o,6,0),this.gx(o,s),o>=this.Qi.size&&(s=16>o?16:c.P.truncate(3*o/2),this.Qi.resize(s),this.xo.resize(s)),this.Qi.set(o,0),this.xo.set(o,0),o},a.prototype.nF=function(s){this.nd.kd(s)},a.prototype.Qy=function(s){this.ud.kd(s),this.gd--},a.prototype.jI=function(s){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0));var o=this.ud.De(),u=0<=s?s:o;if(this.ud.T(o,0,u),0>s){if(u>=this.wb.I()){if(s=16>u?16:c.P.truncate(3*u/2),this.wb.resize(s),this.Te!=null)for(var p=0;p<s;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(s),this.jt=this.wb.vb(0)}this.wb.Db(u,-1e38,-1e38),this.Te!=null&&(this.Te[u]=null),this.Ug!=null&&this.Ug.write(u,1)}return this.ud.T(o,4,2*u),this.gd++,o},a.prototype.yj=function(s,o,u){var p=o!=-1?this.Na(o):this.tj(s),f=p!=-1?this.V(p):-1,m=this.jI(u==null?this.gd:-1),v=this.Va(m);return u!=null&&this.wb.It(v,u),this.cj(m,s),this.Cc(m,f),this.Dc(m,p),f!=-1&&this.Dc(f,m),p!=-1&&this.Cc(p,m),u=this.ec(s),p=this.Ya(s),o==-1&&this.Yg(s,m),o==p&&this.Kf(s,m),u&&f==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),m},a.prototype.pm=function(){return this.lo==null&&(this.lo=new c.Ta(this.wb.description)),this.lo},a.prototype.$o=function(s,o){this.dd.T(s,2,-134217729&this.dd.U(s,2)||(o==1?134217728:0))},a.prototype.Kn=function(s){return 134217728&this.dd.U(s,2)?1:0},a.prototype.cN=function(s){var o=this.Kg(s.K(),s.description);return s.K()==1736&&this.$o(o,s.Kn()),this.PD(o,s),o},a.prototype.dN=function(s){var o=this.Kg(s.K(),s.description);return this.QD(o,s),o},a.prototype.SV=function(s,o){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0)),this.nd.Ee(this.nd.Jg+s),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+s),this.xo.Jb(this.xo.size+s)},a.prototype.PD=function(s,o){this.SV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var u=this.Te!=null&&o.Se!=null,p=0,f=o.ea();p<f;p++)if(!(2>o.Ka(p))){var m=this.wf(s,-1);this.mn(m,o.ec(p));for(var v=o.Ca(p),_=o.Wc(p);v<_;v++){var M=this.yj(m,-1,null);if(u)if(M=this.Va(M),(1&o.UF(v))!=0)this.Zg(M,null);else{var T=new c.jg;o.cc(v,T,!0),this.Zg(M,T.get())}}}},a.prototype.QD=function(s,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),s=this.wf(s,-1);var u=0;for(o=o.I();u<o;u++)this.yj(s,-1,null)},a.prototype.JX=function(s,o,u){var p=this.V(s);if(p==-1)throw c.i.Ra();for(var f=this.pm(),m=this.cd(s),v=0,_=o.ql(u);v<_;v++){var M=this.Va(s),T=this.V(s),A=o.Xp(u,v);v==0&&(A.Vo(f),this.Fh(s,f)),A.K()==322?this.Zg(M,null):this.Zg(M,c.ba.kg(A)),A.Ro(f),v<_-1?s=this.yj(m,T,f):this.Fh(p,f)}},a.prototype.IX=function(s,o,u){var p=this.V(s);if(p==-1)throw c.i.Ra();for(var f=this.pm(),m=this.cd(s),v=0,_=o.ql(u);v<_;v++){var M=this.Va(s),T=this.V(s),A=o.Xp(u,_-v-1);v==0&&(A.Ro(f),this.Fh(s,f)),A.K()==322?this.Zg(M,null):this.Zg(M,c.ba.kg(A)),A.Vo(f),v<_-1?s=this.yj(m,T,f):this.Fh(p,f)}},a.prototype.DF=function(){var s=new c.l;s.Pa();for(var o=this.$q(),u=new c.h,p=!0,f=o.next();f!=-1;f=o.next())this.D(f,u),p?s.$b(u.x,u.y):s.Nk(u.x,u.y),p=!1;return s},a.prototype.Ib=function(s){var o=s.K();if(c.ba.Ic(o))return this.cN(s);if(o==550)return this.dN(s);throw c.i.Ra()},a.prototype.pN=function(s,o){var u=o.K();if(c.ba.Ic(u))this.PD(s,o);else{if(u!=550)throw c.i.Ra();this.QD(s,o)}},a.prototype.hN=function(s,o){var u=this.Kg(1736,s.description);if(2>s.Ka(o))return u;this.Kl.Gd(s,s.Ca(o),s.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(u,-1);this.mn(p,s.ec(o)||!0);var f=this.Te!=null&&s.Se!=null,m=s.Ca(o);for(o=s.Wc(o);m<o;m++){var v=this.yj(p,-1,null);if(f)if(v=this.Va(v),(1&s.UF(m))!=0)this.Zg(v,null);else{var _=new c.jg;s.cc(m,_,!0),this.Zg(v,_.get())}}return u},a.prototype.Ke=function(s){var o=this.jc(s),u=c.UK.Kg(o,this.Kl.description),p=this.I(s);if(p==0)return u;if(c.ba.Ic(o)){o=this.ea(s);for(var f=c.Zc.Qh(o+1),m=c.Zc.Or(o+1,0),v=u.description,_=0,M=v.Ba;_<M;_++){for(var T=v.ld(_),A=c.sa.Wa(T),O=c.Zc.TE(T,p),R=this.wb.vb(T),j=0,z=0,V=0,F=this.Ob(s);F!=-1;F=this.Sb(F)){var G=0;this.ec(F)&&(G|=1),this.TS(F)&&(G|=4),G!=0&&m.uJ(z,G);var Z=this.Ka(F);if(f.write(z++,V),V+=Z,T==0){Z=R;var K=O,re=new c.h;for(G=this.Ya(F);j<V;G=this.V(G),j++){var te=this.Va(G);Z.uc(2*te,re),K.Vt(2*j,re)}}else for(G=this.Ya(F);j<V;G=this.V(G),j++)for(te=this.Va(G),K=0;K<A;K++)re=R.gg(te*A+K),O.rr(j*A+K,re)}u.kn(T,O),f.write(o,p)}u.KJ(m),u.LJ(f),u.Qc(16777215)}else if(o==550){for(v=u.description,u.resize(p),_=0,M=v.Ba;_<M;_++){for(T=v.ld(_),A=c.sa.Wa(T),O=u.vb(T),R=this.wb.vb(T),j=0,F=this.Ob(s),Z=this.Ka(F),G=this.Ya(F);j<Z;G=this.V(G),j++)for(te=this.Va(G),K=0;K<A;K++)re=R.gg(te*A+K),O.rr(j*A+K,re);u.kn(T,O)}u.Qc(16777215)}return u},a.prototype.wB=function(s){for(var o=this.Ob(s);o!=-1;o=this.ar(o));o=this.KR(s);var u=this.ve(s);o!=-1?this.JJ(o,u):this.md=u,u!=-1?this.NJ(u,o):this.sw=o,this.JQ(s)},a.prototype.Kg=function(s,o){return o===void 0?this.VE(s,c.fe.pg()):this.VE(s,o)},a.prototype.VE=function(s,o){return s=this.pU(s),this.wb==null?this.wb=this.Kl=new c.ee(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=s:(this.NJ(s,this.sw),this.JJ(this.sw,s)),this.sw=s},a.prototype.ve=function(s){return this.dd.U(s,1)},a.prototype.KR=function(s){return this.dd.U(s,0)},a.prototype.jc=function(s){return 2147483647&this.dd.U(s,2)},a.prototype.CJ=function(s,o,u){o=this.yk[o],(s=this.EF(s))>=o.size&&o.resize(Math.max(c.P.truncate(1.25*s),16),-1),o.write(s,u)},a.prototype.FF=function(s,o){return(s=this.EF(s))<(o=this.yk[o]).size?o.read(s):-1},a.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var s=0;s<this.yk.length;s++)if(this.yk[s]==null)return this.yk[s]=c.Zc.Qh(0),s;return this.yk.push(c.Zc.Qh(0)),this.yk.length-1},a.prototype.sW=function(s){this.yk[s]=null},a.prototype.Ob=function(s){return this.dd.U(s,3)},a.prototype.mv=function(s){return this.dd.U(s,4)},a.prototype.I=function(s){return this.dd.U(s,5)},a.prototype.ea=function(s){return this.dd.U(s,6)},a.prototype.Ip=function(s,o,u){for(var p=0,f=this.md;f!=-1;f=this.ve(f)){var m=this.jc(f);if(c.ba.Ic(m)&&(!u||m==1736)){m=this.jc(f)==1736;for(var v=this.Ob(f);v!=-1;){for(var _=0,M=this.Ya(v);_<c.P.truncate(this.Ka(v)/2);){var T=this.V(M);if(T==-1)break;var A=this.Va(M),O=this.Uh(A);O!=null?A=O.Rb():(O=this.Va(T),A=this.wb.Ar(A,O)),A<=s?(A==0?p==0&&(p=-1):p=1,T!=this.tj(v)&&(this.gC(T,M),this.qd(T,!0))):M=this.V(M),_++}for(_=this.Ya(v),M=this.ec(v)?_:this.tj(v);0<this.Ka(v);){if((T=this.Na(M))==-1){this.qd(M,!0),p==0&&(p=-1);break}var R=this.Va(T);if((O=this.Uh(R))!=null?A=O.Rb():(A=this.Va(M),A=this.wb.Ar(A,R)),A<=s)A==0?p==0&&(p=-1):p=1,this.gC(T,M),this.qd(T,!1),_==T&&(_=this.Ya(v));else if((M=this.Na(M))==_)break}M=this.Ka(v),o&&(m?3>M:2>M)?(v=this.ar(v),p=0<M?1:p==0?-1:p):v=this.Sb(v)}}}return p},a.prototype.gC=function(s,o){var u=this.Va(s),p=this.Va(o);if(this.Ug!=null&&(u=this.Ug.read(u),this.Ug.write(p,u)),this.di!=null){for(p=0,u=this.di.length;p<u;p++)if(this.di[p]!=null){var f=this.Qa(s,p);f!=-1&&this.Sa(o,p,f)}}},a.prototype.Wl=function(s,o,u){var p=0,f=this.V(s);if(f==-1)throw c.i.Ra();for(var m=this.Va(s),v=this.Va(f),_=this.Uh(m),M=_==null?this.wb.Ar(m,v):_.Rb(),T=0;T<u;T++){var A=o[T];if(0<A&&1>A){var O=A;_!=null&&(O=0<M?_.Tx(A)/M:0),this.wb.fD(m,v,O,this.pm());var R=this.yj(this.cd(s),f,this.pm());if(p++,_!=null){var j=_.fl(0,A);O=this.Va(this.Na(R)),this.Zg(O,j),this.mf(R,j.xc()),T!=u-1&&o[T+1]!=1||(A=_.fl(A,1),this.Zg(O,A))}}}return p},a.prototype.HX=function(s,o,u){var p=0,f=this.V(s);if(f==-1)throw c.i.ga("internal error");var m=this.Va(s),v=this.Va(f),_=this.Uh(m),M=_==null?this.wb.Ar(m,v):_.Rb(),T=0;s=this.cd(s);for(var A=0;A<u;A++){var O=o[A];if(T<O&&1>O){var R=O;if(_!=null&&(R=0<M?_.Tx(O)/M:0),this.wb.fD(m,v,R,this.pm()),R=this.tS(s,f,this.pm()),p++,_!=null){T=_.fl(T,O);var j=this.Va(this.Na(R));this.Zg(j,T),this.Db(R,T.qa,T.ma),A!=u-1&&o[A+1]!=1||(T=_.fl(O,1),R=this.Va(R),this.Zg(R,T))}}T=O}return p},a.prototype.tS=function(s,o,u){var p=o!=-1?this.Na(o):this.tj(s),f=p!=-1?this.V(p):-1,m=this.jI(u==null?this.gd:-1),v=this.Va(m);return u!=null&&this.wb.It(v,u),this.cj(m,s),this.Cc(m,f),this.Dc(m,p),f!=-1&&this.Dc(f,m),p!=-1&&this.Cc(p,m),u=this.ec(s),p=this.Ya(s),o==-1&&this.Yg(s,m),o==p&&(u&&p!=-1||this.Kf(s,m)),u&&f==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),m},a.prototype.pE=function(s,o,u){var p=this.Va(o),f=this.Va(u);if(0>p||f>this.gd-1)throw c.i.O("invalid call");if(p>f&&!this.ec(s))throw c.i.O("cannot iterate across an open path");for(s=0;o!=u;o=this.V(o))p=this.Va(o),(f=this.Uh(p))!=null?s+=f.Rb():(f=this.Va(this.V(o)),s+=this.wb.Ar(p,f));return s},a.prototype.Fh=function(s,o){var u=this.Va(s);this.wb.It(u,o),(u=this.Uh(u))!=null&&u.setStart(o),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&u.setEnd(o))},a.prototype.Xi=function(s,o){s=this.Va(s),this.wb.we(s,o)},a.prototype.mf=function(s,o){this.Db(s,o.x,o.y)},a.prototype.Db=function(s,o,u){var p=this.Va(s);this.wb.Db(p,o,u),(p=this.Uh(p))!=null&&p.UB(o,u),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&p.Sl(o,u))},a.prototype.D=function(s,o){this.wb.D(this.ud.U(s,0),o)},a.prototype.Hc=function(s,o){this.wb.Aa[0].uc(2*this.ud.U(s,0),o)},a.prototype.Oa=function(s){var o=new c.h;return this.wb.D(this.ud.U(s,0),o),o},a.prototype.ZF=function(s,o){this.jt.uc(2*s,o)},a.prototype.Vc=function(s,o,u){return this.wb.Vc(s,this.Va(o),u)},a.prototype.setAttribute=function(s,o,u,p){this.wb.setAttribute(s,this.Va(o),u,p)},a.prototype.Va=function(s){return this.ud.U(s,0)},a.prototype.kh=function(){var s=new c.h;return this.D(void 0,s),s.y},a.prototype.hq=function(s,o){s=this.Va(s),o=this.Va(o);var u=this.wb.Aa[0].o;return u[2*s]===u[2*o]&&u[2*s+1]===u[2*o+1]},a.prototype.Fv=function(s,o){s=this.Va(s);var u=this.wb.Aa[0].o;return u[2*s]===o.x&&u[2*s+1]===o.y},a.prototype.rX=function(s,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=c.Zc.Fn(this.wb.I(),1)}(s=this.Va(s))>=this.Ug.size&&this.Ug.resize(s+1,1),this.Ug.write(s,o)},a.prototype.YF=function(s){return s=this.Va(s),this.Ug==null||s>=this.Ug.size?1:this.Ug.read(s)},a.prototype.Sa=function(s,o,u){o=this.di[o],s=this.Va(s),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(s,u)},a.prototype.Qa=function(s,o){return(s=this.Va(s))<(o=this.di[o]).size?o.read(s):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var s=0;s<this.di.length;s++)if(this.di[s]==null)return this.di[s]=c.Zc.Qh(0,-1),s;return this.di.push(c.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(s){this.di[s]=null},a.prototype.cc=function(s){return this.Te!=null?(s=this.Va(s),this.Te[s]):null},a.prototype.fd=function(s,o){var u=this.ud.U(s,2);if(u==-1)return!1;if(this.aA){var p=new c.Ta;this.Xi(s,p),o.setStart(p),this.Xi(u,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(s,0),Ti),o.gm(0,Ti),this.wb.Hc(this.ud.U(u,0),Ti),o.gm(1,Ti);return!0},a.prototype.hW=function(s,o,u){if(this.aA){var p=new c.Ta;this.Xi(s,p),u.setStart(p),this.Xi(o,p),u.setEnd(p)}else this.wb.Hc(s,Ti),u.gm(0,Ti),this.wb.Hc(o,Ti),u.gm(1,Ti)},a.prototype.wf=function(s,o){if(o!=-1){if(s!=this.Sf(o))throw c.i.Ra();var u=this.es(o)}else u=this.mv(s);var p=this.rU(s);return o!=-1&&this.ep(o,p),this.cp(p,o),this.ep(p,u),u!=-1?this.cp(u,p):this.ap(s,p),o==-1&&this.bp(s,p),this.Tl(s,this.ea(s)+1),p},a.prototype.iG=function(s,o,u,p){s=this.wf(s,-1);for(var f=0,m=o,v=!1;m==u&&(v=!0),this.cj(m,s),f++,(m=this.V(m))!=o;);return this.mn(s,!0),this.Xj(s,f),v&&(o=u),this.Kf(s,o),this.Yg(s,this.Na(o)),this.fp(s,!1),p!=null&&(p[0]=v),s},a.prototype.ar=function(s){var o=this.es(s),u=this.Sb(s),p=this.Sf(s);return o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.vO(s),this.Tl(p,this.ea(p)-1),this.nF(s),u},a.prototype.vO=function(s){var o=this.Ya(s);if(o!=-1){for(var u=0,p=this.Ka(s);u<p;u++){var f=o;o=this.V(o),this.Qy(f)}o=this.Sf(s),this.Vj(o,this.I(o)-this.Ka(s))}this.Xj(s,0)},a.prototype.Sb=function(s){return this.nd.U(s,2)},a.prototype.es=function(s){return this.nd.U(s,1)},a.prototype.Ka=function(s){return this.nd.U(s,3)},a.prototype.ec=function(s){return(1&this.Up(s))!=0},a.prototype.mn=function(s,o){if(this.ec(s)!=o){if(0<this.Ka(s)){var u=this.Ya(s),p=this.tj(s);o?(this.Cc(p,u),this.Dc(u,p),u=this.Va(p)):(this.Cc(p,-1),this.Dc(u,-1),u=this.Va(p)),this.Zg(u,null)}this.QB(s,(1|this.Up(s))-1|(o?1:0))}},a.prototype.Sf=function(s){return this.nd.U(s,7)},a.prototype.TS=function(s){return(2&this.Up(s))!=0},a.prototype.KB=function(s,o){this.QB(s,(2|this.Up(s))-2|(o?2:0))},a.prototype.qz=function(s){if(this.YS(s))return this.Qi.get(this.sv(s));var o=new c.zb,u=this.Ya(s);if(u==-1)return 0;var p=new c.h;this.D(u,p);for(var f=0,m=0,v=this.Ka(s);m<v;m++,u=this.V(u)){var _=this.cc(u);if(_==null){if(!this.fd(u,o))continue;_=o}f+=_.Sx(p.x,p.y)}return this.fp(s,!0),this.Qi.set(this.sv(s),f),f},a.prototype.ir=function(s,o,u){o=this.Ek[o],s=this.sv(s),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(s,u)},a.prototype.uj=function(s,o){return(s=this.sv(s))<(o=this.Ek[o]).size?o.read(s):-1},a.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var s=0;s<this.Ek.length;s++)if(this.Ek[s]==null)return this.Ek[s]=c.Zc.Qh(0),s;return this.Ek.push(c.Zc.Qh(0)),this.Ek.length-1},a.prototype.xB=function(s){this.Ek[s]=null},a.prototype.UT=function(s,o,u){if(u==-1)throw c.i.O();if(o!=u){var p=this.Sb(u),f=this.es(u),m=this.Sf(u);f==-1?this.ap(m,p):this.cp(f,p),p==-1?this.bp(m,f):this.ep(p,f),this.Vj(m,this.I(m)-this.Ka(u)),this.Tl(m,this.ea(m)-1),f=o==-1?this.mv(s):this.es(o),this.ep(u,f),this.cp(u,o),o==-1?this.bp(s,u):this.ep(o,u),f==-1?this.ap(s,u):this.cp(f,u),this.Vj(s,this.I(s)+this.Ka(u)),this.Tl(s,this.ea(s)+1),this.gx(u,s)}},a.prototype.kj=function(s,o){this.wb.we(this.Va(o),this.pm()),this.yj(s,-1,this.pm())},a.prototype.qd=function(s,o){var u=this.cd(s),p=this.Na(s),f=this.V(s);p!=-1&&this.Cc(p,f);var m=this.Ka(u);if(s==this.Ya(u)&&this.Kf(u,1<m?f:-1),f!=-1&&this.Dc(f,p),s==this.tj(u)&&this.Yg(u,1<m?p:-1),p!=-1&&f!=-1){p=this.Va(p);var v=this.Va(f);o?(o=this.Uh(p))!=null&&(p=new c.h,this.wb.D(v,p),o.Rc(p)):(v=this.Va(s),o=this.Uh(v),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(u,m-1),u=this.Sf(u),this.Vj(u,this.I(u)-1),this.Qy(s),f},a.prototype.Ya=function(s){return this.nd.U(s,4)},a.prototype.tj=function(s){return this.nd.U(s,5)},a.prototype.V=function(s){return this.ud.U(s,2)},a.prototype.Na=function(s){return this.ud.U(s,1)},a.prototype.cd=function(s){return this.ud.U(s,3)},a.prototype.hc=function(s,o){return this.yj(s,-1,o)},a.prototype.$q=function(s){if(s===void 0)return this.$q(!1);if(s instanceof h)return new h(s);var o,u=-1,p=-1,f=-1,m=0,v=!1;for(o=this.md;o!=-1;o=this.ve(o))if(!s||c.ba.Ic(this.jc(o))){for(u=this.Ob(o);u!=-1;u=this.Sb(u))if(f=p=this.Ya(u),m=0,p!=-1){v=!0;break}if(v)break}return h.vP(this,o,u,p,f,m,s)},a.prototype.Pc=function(s){if(this.Kl.Pc(s),this.Te!=null)for(var o=0,u=this.Te.length;o<u;o++)this.Te[o]!=null&&this.Te[o].Pc(s)},a.prototype.lr=function(s,o,u,p){p?this.JX(s,o,u):this.IX(s,o,u)},a.prototype.Dc=function(s,o){this.ud.T(s,1,o)},a.prototype.Cc=function(s,o){this.ud.T(s,2,o)},a.prototype.cj=function(s,o){this.ud.T(s,3,o)},a.prototype.Xj=function(s,o){this.nd.T(s,3,o)},a.prototype.Kf=function(s,o){this.nd.T(s,4,o)},a.prototype.Yg=function(s,o){this.nd.T(s,5,o)},a.prototype.Tl=function(s,o){this.dd.T(s,6,o)},a.prototype.Vj=function(s,o){this.dd.T(s,5,o)},a.prototype.kJ=function(s){var o=s;do{var u=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,u),o=u}while(o!=s)},a.prototype.XB=function(s){this.gd=s},a.prototype.br=function(s){var o=this.es(s),u=this.Sb(s),p=this.Sf(s);o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.Kf(s,-1),this.Yg(s,-1),this.nF(s)},a.prototype.oi=function(s,o){var u=this.Na(s),p=this.V(s);if(u!=-1&&this.Cc(u,p),p!=-1&&this.Dc(p,u),u!=-1&&p!=-1)if(u=this.Va(u),p=this.Va(p),o){if((o=this.Uh(u))!=null){var f=new c.h;this.wb.D(p,f),o.Rc(f)}}else o=this.Va(s),o=this.Uh(o),this.Zg(u,o),o!=null&&(f=new c.h,this.wb.D(u,f),o.Ec(f));this.Qy(s)},a.prototype.YS=function(s){return(4&this.Up(s))!=0},a.prototype.fp=function(s,o){this.QB(s,(4|this.Up(s))-4|(o?4:0))},a.prototype.nx=function(s,o){var u=this.ud.o;this.wb.oc();var p=this.wb.Aa[0].o;s.Wd(0,o,function(f,m){var v=u[5*f];f=u[5*m],m=p[2*v],v=p[2*v+1];var _=p[2*f];return v<(f=p[2*f+1])?-1:v>f?1:m<_?-1:m>_?1:0})},a.prototype.eS=function(){for(var s=this.md;s!=-1;s=this.ve(s))if(!c.ba.Ic(this.jc(s)))return!0;return!1},a.prototype.cC=function(s,o){for(var u=this.Ob(s),p=this.Ob(o),f=this.mv(s),m=this.mv(o),v=this.Ob(s);v!=-1;v=this.Sb(v))this.gx(v,o);for(v=this.Ob(o);v!=-1;v=this.Sb(v))this.gx(v,s);this.ap(s,p),this.ap(o,u),this.bp(s,m),this.bp(o,f),u=this.I(s),p=this.ea(s),f=this.ea(o),this.Vj(s,this.I(o)),this.Vj(o,u),this.Tl(s,f),this.Tl(o,p),u=this.dd.U(s,2),this.dd.T(s,2,this.dd.U(o,2)),this.dd.T(o,2,u)},a}(),c.hd=C})(q||(q={})),function(c){var C=function(w){function h(a,s,o,u){var p=w.call(this)||this;return p.aa=new c.l,a===void 0?p.PE():typeof a=="number"?p.QO(a,s,o,u):a instanceof c.Ta?s!==void 0?p.Su(a,s,o):p.RO(a):a instanceof c.sa?s!==void 0?p.TO(a,s):p.SO(a):a instanceof c.l?p.PO(a):p.PE(),p}return Et(h,w),h.prototype.Su=function(a,s,o){this.description=c.fe.pg(),this.aa.Pa(),a.B()||this.vu(a,s,o)},h.prototype.PO=function(a){this.description=c.fe.pg(),this.aa.L(a),this.aa.normalize()},h.prototype.SO=function(a){if(a==null)throw c.i.O();this.description=a,this.aa.Pa()},h.prototype.TO=function(a,s){if(a==null)throw c.i.O();this.description=a,this.aa.L(s),this.aa.normalize()},h.prototype.PE=function(){this.description=c.fe.pg(),this.aa.Pa()},h.prototype.RO=function(a){this.description=c.fe.pg(),this.aa.Pa(),a.B()||this.vu(a)},h.prototype.QO=function(a,s,o,u){this.description=c.fe.pg(),this.L(a,s,o,u)},h.prototype.L=function(a,s,o,u){if(this.wc(),typeof a=="number")this.aa.L(a,s,o,u);else for(this.Pa(),s=0,o=a.length;s<o;s++)this.$b(a[s])},h.prototype.Zo=function(a){if(this.wc(),!a.aT())throw c.i.O();this.aa.L(a)},h.prototype.Pa=function(){this.wc(),this.aa.Pa()},h.prototype.B=function(){return this.aa.B()},h.prototype.S=function(){return this.aa.S()},h.prototype.da=function(){return this.aa.da()},h.prototype.ik=function(){return this.aa.ik()},h.prototype.Lp=function(){return this.aa.Lp()},h.prototype.Kp=function(){return this.aa.tf()},h.prototype.$b=function(a){if(a instanceof c.h)this.wc(),this.aa.$b(a);else if(a instanceof c.l)this.wc(),this.aa.$b(a);else if(a instanceof c.Ta){if(this.wc(),!a.Bc()){var s=a.description;if(this.description!=s&&this.Ll(s),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,u=s.Ba;o<u;o++)for(var p=s.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++){var v=a.Vc(p,m),_=this.Vg(p,m);_.$b(v),this.setInterval(p,m,_)}}}}else if(a instanceof h&&!a.B())for((s=a.description)!=this.description&&this.Ll(s),this.aa.$b(a.aa),o=1,u=s.Ba;o<u;o++)for(p=s.ld(o),f=c.sa.Wa(p),m=0;m<f;m++)v=a.Vg(p,m),(_=this.Vg(p,m)).$b(v),this.setInterval(p,m,_)},h.prototype.vu=function(a,s,o){if(s!==void 0){this.aa.L(a.D(),s,o),o=1;for(var u=(s=a.description).Ba;o<u;o++)for(var p=s.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++){var v=a.Vc(p,m);this.setInterval(p,m,v,v)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,u=(s=a.description).Ba;o<u;o++)for(p=s.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++)v=a.Vc(p,m),this.setInterval(p,m,v,v)},h.prototype.setInterval=function(a,s,o,u){if(o=typeof o=="number"?new c.Oc(o,u):o,this.wc(),a==0)if(s==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(s!=1)throw c.i.de();this.aa.G=o.pa,this.aa.H=o.wa}else this.qD(0,a,s,o.pa),this.qD(1,a,s,o.wa)},h.prototype.X=function(a,s){this.wc(),this.aa.X(a,s)},h.prototype.Pc=function(a){if(a instanceof c.Ed)this.wc(),a.hC(this.aa);else if(this.wc(),!this.aa.B()){var s=new c.JK;this.So(s),s.SS()?s.Pa():a.hC(s)}},h.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var s=0;s<2*(this.description.Be.length-2);s++)a.la[s]=this.la[s]}},h.prototype.Ja=function(){return new h(this.description)},h.prototype.He=function(){return this.aa.rF()},h.prototype.Rb=function(){return this.aa.tR()},h.prototype.K=function(){return 197},h.prototype.Eb=function(){return 2},h.prototype.dn=function(a){this.copyTo(a)},h.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},h.prototype.So=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},h.prototype.Vg=function(a,s){var o=new c.Oc;return o.L(this.Pd(0,a,s),this.Pd(1,a,s)),o},h.prototype.If=function(a,s){s.Pf(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(0,u,f));s.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(1,u,f));s.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(0,u,f));s.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(1,u,f));s.Db(this.aa.C,this.aa.G);break;default:throw c.i.de()}},h.prototype.hB=function(a,s){a=this.aa.hB(a),s.na(a.x,a.y)},h.prototype.fR=function(a,s){return s*(a.Qq-2)},h.prototype.sF=function(a,s,o){if(this.aa.B())throw c.i.ga("empty geometry");if(s==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.sa.Wa(s))throw c.i.O();var u=this.description.Rf(s);return this.qu(),0<=u?this.la[this.fR(this.description,a)+this.description.GR(u)-2+o]:c.sa.te(s)},h.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=h.Ig(this.description,0),s=h.Ig(this.description,1),o=0,u=1,p=this.description.Ba;u<p;u++){var f=this.description.ld(u),m=c.sa.Wa(f);f=c.sa.te(f);for(var v=0;v<m;v++)this.la[a+o]=f,this.la[s+o]=f,o++}}},h.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var s=c.fe.Kw(a,this.description),o=[],u=h.Ig(this.description,0),p=h.Ig(this.description,1),f=h.Ig(a,0),m=h.Ig(a,1),v=0,_=1,M=a.Ba;_<M;_++){var T=a.ld(_),A=c.sa.Wa(T);if(s[_]==-1){var O=c.sa.te(T);for(T=0;T<A;T++)o[f+v]=O,o[m+v]=O,v++}else for(O=this.description.bk(s[_])-2,T=0;T<A;T++)o[f+v]=this.la[u+O],o[m+v]=this.la[p+O],v++,O++}this.la=o}else this.la=null;this.description=a},h.prototype.Pd=function(a,s,o){if(this.aa.B())throw c.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.sa.Wa(s))throw c.i.de();var u=this.description.Rf(s);return 0<=u?(this.qu(),this.la[h.Ig(this.description,a)+this.description.bk(u)-2+o]):c.sa.te(s)},h.prototype.qD=function(a,s,o,u){if(this.wc(),s==0)a!=0?o!=0?this.aa.H=u:this.aa.C=u:o!=0?this.aa.G=u:this.aa.v=u;else{if(o>=c.sa.Wa(s))throw c.i.de();if(!this.hasAttribute(s)){if(c.sa.yG(s,u))return;this.se(s)}s=this.description.Rf(s),this.qu(),this.la[h.Ig(this.description,a)+this.description.bk(s)-2+o]=u}},h.Ig=function(a,s){return s*(a.Be.length-2)},h.prototype.Fa=function(a){this.wc();var s=new c.l;return a.A(s),this.aa.Fa(s)},h.prototype.isIntersecting=function(a){return a instanceof c.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},h.prototype.Lu=function(a,s){this.wc(),a.B()?this.Pa():s!==void 0?this.vu(a,s,void 0):this.aa.Lu(a.Ng(),a.kh())},h.prototype.offset=function(a,s){this.wc(),this.aa.offset(a,s)},h.prototype.normalize=function(){this.wc(),this.aa.normalize()},h.prototype.tf=function(a){if(a===void 0){if(a=new c.Ta(this.description),this.B())return a;for(s=this.description.Ba,o=1;o<s;o++)for(u=this.description.Fd(o),p=c.sa.Wa(u),f=0;f<p;f++)m=.5*(this.Pd(0,u,f)+this.Pd(1,u,f)),a.setAttribute(u,f,m);return a.Db(this.aa.ik(),this.aa.Lp()),a}if(a.Pf(this.description),this.B())a.Pa();else{for(var s=this.description.Ba,o=1;o<s;o++)for(var u=this.description.ld(o),p=c.sa.Wa(u),f=0;f<p;f++){var m=.5*(this.sF(0,u,f)+this.sF(1,u,f));a.setAttribute(u,f,m)}a.Db(this.aa.tf())}},h.prototype.hz=function(){return new c.Ta(this.aa.hz())},h.prototype.contains=function(a){return a instanceof c.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},h.prototype.ZO=function(a){return this.aa.contains(a)},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var s=0,o=2*(this.description.Be.length-2);s<o;s++)if(this.la[s]!=a.la[s])return!1;return!0},h.prototype.dc=function(){var a=this.description.dc();if(a=c.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var s=0,o=2*(this.description.Be.length-2);s<o;s++)a=c.P.Vh(a,this.la[s]);return a},h.prototype.gs=function(){return this.aa.v},h.prototype.js=function(){return this.aa.G},h.prototype.fs=function(){return this.aa.C},h.prototype.hs=function(){return this.aa.H},h.prototype.ng=function(){return c.si.im(this,null)},h.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},h}(c.ba);c.Hh=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o){h===void 0?this.Pa():(this.v=h,this.G=a,this.C=s,this.H=o)}return w.construct=function(h,a,s,o){var u=new w;return u.v=h,u.G=a,u.C=s,u.H=o,u},w.prototype.L=function(h,a,s,o){typeof h=="number"?s!==void 0?(this.v=h,this.G=a,this.C=s,this.H=o,this.normalize()):(this.v=h,this.G=a,this.C=h,this.H=a):h instanceof c.h?a!==void 0?(this.v=h.x-.5*a,this.C=this.v+a,this.G=h.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=h.x,this.G=h.y,this.C=h.x,this.H=h.y):h instanceof w?this.L(h.v,h.G,h.C,h.H):h instanceof c.Oc&&(h.B()||a.B()?this.Pa():(this.v=h.pa,this.C=h.wa,this.G=a.pa,this.H=a.wa))},w.prototype.bx=function(h,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=h[0].x,this.G=h[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<a;s++){var o=h[s];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(h==null||h.length==0)this.Pa();else for(o=h[0],this.L(o.x,o.y),s=1;s<h.length;s++)a=h[s],this.Nk(a.x,a.y)},w.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.$b=function(h,a){typeof h=="number"?this.B()?(this.v=h,this.G=a,this.C=h,this.H=a):(this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>a?this.G=a:this.H<a&&(this.H=a)):h instanceof c.h||h instanceof c.Od?this.$b(h.x,h.y):h instanceof w&&!h.B()&&(this.$b(h.v,h.G),this.$b(h.C,h.H))},w.prototype.Nk=function(h,a){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>a?this.G=a:this.H<a&&(this.H=a)},w.prototype.X=function(h,a){this.B()||(this.v-=h,this.C+=h,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},w.prototype.scale=function(h){0>h&&this.Pa(),this.B()||(this.v*=h,this.C*=h,this.G*=h,this.H*=h)},w.prototype.zoom=function(h,a){this.B()||this.L(this.tf(),h*this.S(),a*this.da())},w.prototype.isIntersecting=function(h){return!this.B()&&!h.B()&&(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},w.prototype.CG=function(h){return(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},w.prototype.Fa=function(h){return!this.B()&&!h.B()&&(h.v>this.v&&(this.v=h.v),h.C<this.C&&(this.C=h.C),h.G>this.G&&(this.G=h.G),h.H<this.H&&(this.H=h.H),(h=this.v<=this.C&&this.G<=this.H)||this.Pa(),h)},w.prototype.hB=function(h){switch(h){case 0:return c.h.construct(this.v,this.G);case 1:return c.h.construct(this.v,this.H);case 2:return c.h.construct(this.C,this.H);case 3:return c.h.construct(this.C,this.G);default:throw c.i.de()}},w.prototype.iB=function(h){if(h==null||4>h.length)throw c.i.O();h[0]!=null?h[0].na(this.v,this.G):h[0]=c.h.construct(this.v,this.G),h[1]!=null?h[1].na(this.v,this.H):h[1]=c.h.construct(this.v,this.H),h[2]!=null?h[2].na(this.C,this.H):h[2]=c.h.construct(this.C,this.H),h[3]!=null?h[3].na(this.C,this.G):h[3]=c.h.construct(this.C,this.G)},w.prototype.rF=function(){return this.B()?0:this.S()*this.da()},w.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},w.prototype.ik=function(){return(this.C+this.v)/2},w.prototype.Lp=function(){return(this.H+this.G)/2},w.prototype.S=function(){return this.C-this.v},w.prototype.da=function(){return this.H-this.G},w.prototype.move=function(h,a){this.B()||(this.v+=h,this.G+=a,this.C+=h,this.H+=a)},w.prototype.Lu=function(h,a){if(a!==void 0)this.move(h-this.ik(),a-this.Lp());else if(h instanceof c.h)this.Lu(h.x,h.y);else{if(!(h instanceof c.Ta))throw c.i.O();a=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=h.Ng()-a,this.C=h.Ng()+a,this.G=h.kh()-s,this.H=h.kh()+s}},w.prototype.offset=function(h,a){this.v+=h,this.C+=h,this.G+=a,this.H+=a},w.prototype.normalize=function(){if(!this.B()){var h=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=h,this.C=a,h=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=h,this.H=a}},w.prototype.fn=function(h){h.na(this.v,this.G)},w.prototype.VI=function(h){h.na(this.C,this.G)},w.prototype.YI=function(h){h.na(this.v,this.H)},w.prototype.gn=function(h){h.na(this.C,this.H)},w.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.tf=function(){return c.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.hz=function(){return c.h.construct(this.v,this.G)},w.prototype.contains=function(h,a){if(a!==void 0)return h>=this.v&&h<=this.C&&a>=this.G&&a<=this.H;if(h instanceof c.Ta)return this.contains(h.Ng(),h.kh());if(h instanceof c.h)return this.contains(h.x,h.y);if(h instanceof w)return h.v>=this.v&&h.C<=this.C&&h.G>=this.G&&h.H<=this.H;throw c.i.O()},w.prototype.jm=function(h,a){if(a!==void 0)return h>this.v&&h<this.C&&a>this.G&&a<this.H;if(h instanceof c.h)return this.jm(h.x,h.y);if(h instanceof w)return h.v>this.v&&h.C<this.C&&h.G>this.G&&h.H<this.H;throw c.i.O()},w.prototype.Nb=function(h){return h==this||h instanceof w&&(!(!this.B()||!h.B())||this.v==h.v&&this.G==h.G&&this.C==h.C&&this.H==h.H)},w.prototype.dc=function(){var h=this.v;h=c.P.truncate(h^h>>>32);var a=c.P.Vh(h);return h=this.C,h=c.P.truncate(h^h>>>32),a=c.P.Vh(h,a),h=this.G,h=c.P.truncate(h^h>>>32),a=c.P.Vh(h,a),h=this.H,h=c.P.truncate(h^h>>>32),c.P.Vh(h,a)},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.uy=function(h,a){var s=this.ak(h),o=this.ak(a);if(s&o)return 0;if(!(s|o))return 4;var u=(s!=0?1:0)|(o!=0?2:0);do{var p=a.x-h.x,f=a.y-h.y;if(p>f?s&w.TC?(s&w.lu?(h.y+=f*(this.v-h.x)/p,h.x=this.v):(h.y+=f*(this.C-h.x)/p,h.x=this.C),s=this.ak(h)):o&w.TC?(o&w.lu?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)):s!=0?(s&w.mu?(h.x+=p*(this.G-h.y)/f,h.y=this.G):(h.x+=p*(this.H-h.y)/f,h.y=this.H),s=this.ak(h)):(o&w.mu?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.ak(a)):s&w.UC?(s&w.mu?(h.x+=p*(this.G-h.y)/f,h.y=this.G):(h.x+=p*(this.H-h.y)/f,h.y=this.H),s=this.ak(h)):o&w.UC?(o&w.mu?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.ak(a)):s!=0?(s&w.lu?(h.y+=f*(this.v-h.x)/p,h.x=this.v):(h.y+=f*(this.C-h.x)/p,h.x=this.C),s=this.ak(h)):(o&w.lu?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)),(s&o)!=0)return 0}while(s|o);return u},w.prototype.ak=function(h){return(h.x<this.v?1:0)|(h.x>this.C?1:0)<<1|(h.y<this.G?1:0)<<2|(h.y>this.H?1:0)<<3},w.prototype.Di=function(h){return!this.B()&&(this.S()<=h||this.da()<=h)},w.prototype.ub=function(h){return h instanceof c.h?Math.sqrt(this.dK(h)):Math.sqrt(this.px(h))},w.prototype.px=function(h){var a=0,s=0,o=this.v-h.C;return o>a&&(a=o),(o=this.G-h.H)>s&&(s=o),(o=h.v-this.C)>a&&(a=o),(o=h.G-this.H)>s&&(s=o),a*a+s*s},w.prototype.dK=function(h){var a=0,s=0,o=this.v-h.x;return o>a&&(a=o),(o=this.G-h.y)>s&&(s=o),(o=h.x-this.C)>a&&(a=o),(o=h.y-this.H)>s&&(s=o),a*a+s*s},w.prototype.en=function(h){this.B()?h.Pa():h.L(this.v,this.C)},w.lu=1,w.mu=4,w.TC=3,w.UC=12,w}();c.l=C}(q||(q={})),function(c){var C,w;(w=C||(C={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var h=function(){function a(s,o){this.ei=s,this.ZG=o}return a.prototype.qr=function(s,o,u){this.ei.FX(u,s,o,this.ZG)},a.prototype.bq=function(s){return this.ei.Tr(s,this.ZG)},a}();C=function(){function a(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new c.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return a.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new c.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.bd=function(s,o){if(!this.Rv)throw c.i.Hb();var u=new c.l;u.L(o),this.io.add(s),this.Fb.push(u)},a.prototype.Hp=function(){if(!this.Rv)throw c.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new c.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.DD=function(s,o){if(!this.Qv)throw c.i.Hb();var u=new c.l;u.L(o),this.io.add(s),this.Fb.push(u)},a.prototype.dF=function(){if(!this.Qv)throw c.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new c.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.zD=function(s,o){if(!this.Pv)throw c.i.Hb();var u=new c.l;u.L(o),this.ew.add(s),this.rd.push(u)},a.prototype.cF=function(){if(!this.Pv)throw c.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var s=!0;s;)switch(this.Yb){case 0:s=this.Bz();break;case 1:s=this.mS();break;case 2:s=this.jS();break;case 3:s=this.lS();break;case 4:s=this.QX();break;case 5:s=this.MX();break;case 6:s=this.NX();break;case 7:s=this.OX();break;case 8:s=this.tx();break;case 9:s=this.dC();break;case 10:s=this.Pz();break;case 11:s=this.eT();break;case 12:s=this.bT();break;case 13:s=this.cT();break;case 14:s=this.dT();break;case 15:s=this.fJ();break;case 16:s=this.eJ();break;default:throw c.i.Ra()}return!this.Jc},a.prototype.WB=function(s){this.ra=s},a.prototype.oz=function(s){return this.Fb[s]},a.prototype.Wy=function(s){return this.rd[s]},a.prototype.pl=function(s){return this.io.read(s)},a.prototype.jl=function(s){return this.ew.read(s)},a.Oz=function(s){return(1&s)==1},a.gq=function(s){return(1&s)==0},a.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var o=this.Fb[s];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},a.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var o=this.Fb[s];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.ff.mr();for(var s=0;s<this.rd.length;s++){var o=this.rd[s];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},a.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var o=this.Fb[s];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),s=0;s<this.rd.length;s++)o=this.rd[s],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);for(s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.QX=function(){var s=this.Md.get(--this.qe),o=s>>1;return a.gq(s)?(this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=10,!0)},a.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},a.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.OX=function(){var s=this.Md.get(this.qe-1),o=this.Ff.get(this.Tg-1),u=this.Tr(s,!0),p=this.Tr(o,!1);return u>p?this.tx():u<p?this.dC():a.Oz(s)?this.tx():a.Oz(o)?this.dC():this.tx()},a.prototype.tx=function(){var s=this.Md.get(--this.qe),o=s>>1;if(a.gq(s))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(s=this.Bd.sc(this.Df);s!=-1;){var u=this.Bd.getData(s);this.ff.xj(u),this.Jj.set(u,-1),u=this.Bd.lb(s),this.Bd.kd(this.Df,s),s=u}return 0<this.ff.size()?(this.qw.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new c.lp),this.Kj=new c.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.dC=function(){var s=this.Ff.get(--this.Tg),o=s>>1;if(a.gq(s))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(s=this.Bd.sc(this.Ef);s!=-1;){var u=this.Bd.getData(s);this.sd.xj(u),this.Kj.set(u,-1),u=this.Bd.lb(s),this.Bd.kd(this.Ef,s),s=u}return 0<this.sd.size()?(this.qo.zB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new c.lp),this.Jj=new c.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=4,!0},a.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var s=this.Ff.get(this.Tg)>>1;return this.ff.xj(s),this.Yb=7,!0},a.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=7,!0},a.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var s=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},a.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var s=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},a.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(s,o,u){this.Cm==null&&(this.Cm=new c.Zt),u=new h(this,u),this.Cm.sort(s,0,o,u)},a.prototype.FX=function(s,o,u,p){var f=this;s.Wd(o,u,function(m,v){var _=f.Tr(m,p),M=f.Tr(v,p);return _<M||_==M&&a.gq(m)&&a.Oz(v)?-1:1})},a.prototype.Tr=function(s,o){var u=.5*this.ra;return o?(o=this.Fb[s>>1],a.gq(s)?o.G-u:o.H+u):(o=this.rd[s>>1],a.gq(s)?o.G-u:o.H+u)},a}(),c.sC=C}(q||(q={})),function(c){var C=function(){function w(){}return w.construct=function(h,a,s,o,u,p){var f=new w;return f.v=h,f.G=a,f.Xe=s,f.C=o,f.H=u,f.Dg=p,f},w.prototype.Pa=function(){this.Xe=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.SS=function(){return isNaN(this.Xe)},w.prototype.L=function(h,a,s,o,u,p){o!==void 0?typeof h=="number"?(this.v=h,this.G=a,this.Xe=s,this.C=o,this.H=u,this.Dg=p):(this.v=h.x-.5*a,this.C=this.v+a,this.G=h.y-.5*s,this.H=this.G+s,this.Xe=h.z-.5*o,this.Dg=this.Xe+o):(this.v=h,this.G=a,this.Xe=s,this.C=h,this.H=a,this.Dg=s)},w.prototype.move=function(h){this.v+=h.x,this.G+=h.y,this.Xe+=h.z,this.C+=h.x,this.H+=h.y,this.Dg+=h.z},w.prototype.copyTo=function(h){h.v=this.v,h.G=this.G,h.C=this.C,h.H=this.H},w.prototype.Nk=function(h,a,s){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>s?this.Xe=s:this.Dg<s&&(this.Dg=s):this.Dg=this.Xe=s},w.prototype.$b=function(h,a,s){if(typeof h=="number")this.B()?(this.v=h,this.G=a,this.Xe=s,this.C=h,this.H=a,this.Dg=s):this.Nk(h,a,s);else if(h instanceof c.Od)this.$b(h.x,h.y,h.z);else{if(!(h instanceof w))throw c.i.O();h.B()||(this.$b(h.v,h.G,h.Xe),this.$b(h.C,h.H,h.Dg))}},w.prototype.construct=function(h,a,s){h.B()||a.B()?this.Pa():(this.v=h.pa,this.C=h.wa,this.G=a.pa,this.H=a.wa,this.Xe=s.pa,this.Dg=s.wa)},w.prototype.iB=function(h){if(h==null||8>h.length)throw c.i.O();h[0]=new c.Od(this.v,this.G,this.Xe),h[1]=new c.Od(this.v,this.H,this.Xe),h[2]=new c.Od(this.C,this.H,this.Xe),h[3]=new c.Od(this.C,this.G,this.Xe),h[4]=new c.Od(this.v,this.G,this.Dg),h[5]=new c.Od(this.v,this.H,this.Dg),h[6]=new c.Od(this.C,this.H,this.Dg),h[7]=new c.Od(this.C,this.G,this.Dg)},w.prototype.bx=function(h){if(h==null||h.length==0)this.Pa();else{var a=h[0];for(this.L(a.x,a.y,a.z),a=1;a<h.length;a++){var s=h[a];this.Nk(s.x,s.y,s.z)}}},w}();c.JK=C}(q||(q={})),function(c){(function(C){C.Ra=function(){var w=Error();return w.message="Internal Error",w},C.Fe=function(){var w=Error();return w.message="Not Implemented",w},C.Zk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},C.Hb=function(){var w=Error();return w.message="Invalid Call",w},C.O=function(w){var h=Error();return h.message="Illegal Argument Exception",w!==void 0&&(h.message+=": "+w),h},C.hu=function(w){var h=Error();return h.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",h},C.ga=function(w){var h=Error();return h.message="Geometry Exception: "+w,h},C.BK=function(){var w=Error();return w.message="Assert Failed Exception",w},C.de=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},C.RC=function(){var w=Error();return w.message="UserCancelException",w}})(c.i||(c.i={}))}(q||(q={})),function(c){(c=c.dm||(c.dm={}))[c.forward=0]="forward",c[c.reverse=1]="reverse"}(q||(q={})),function(c){var C=function(){function a(s,o){this.Xa=s,this.AH=o,this.GH=-1,this.ul=!1}return a.prototype.re=function(){},a.prototype.next=function(){if(++this.GH==this.AH.I())return null;var s=this.AH.Oa(this.GH);s.scale(this.Xa.fc);var o=new c.Ea;return this.Xa.ny(s,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),w=function(){function a(s,o,u){this.Xa=s,this.tw=o,this.Zn=!1,this.fo=u,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new c.Ea,this.wk=[]}return a.prototype.re=function(){},a.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var s=c.ba.kg(this.sq);return c.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}s=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var o=this.wk.length=0,u=new c.h,p=new c.h,f=[0];this.td.Ia()&&8>this.AA;){var m=this.td.ia();if(u.N(m.bc()),p.N(m.xc()),u.scale(this.Xa.fc),p.scale(this.Xa.fc),c.ej.Ou(u,p)?u.x=p.x:c.ej.Mu(u,p)&&(p.x=u.x),this.wk.length=0,c.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,u,p,this.Xa.LA,this.Xa.at,f,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(m=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,m,m.length-1)),c.ej.Nu(u,p)?(this.sq.Pa(),this.Xa.ny(u,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(f[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}s==null&&(s=new c.Ea).$k(null,0),this.JD(s),o++}if(this.dw[0]=0,0<o){for(f=this.td.xb();0<o;)this.td.ni(),u.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.kk())),u.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(c.ej.Ou(u,p)?u.x=p.x:c.ej.Mu(u,p)&&(p.x=u.x)),this.wk.length=0,c.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,u,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(s),o--;return u.N(this.tw.Oa(this.td.xb())),u.scale(this.Xa.fc),h.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,u,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.td.Wb(f),this.td.ia(),o=c.ua.mj(null,s,!0),c.Hg.Ok(s,o,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),s=c.ba.kg(this.sq),c.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.JD=function(s){var o=this.wk[0],u=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var f=this.fi+1.570796326794897;u=f+3.141592653589793-(this.fi-this.Pj[0])}else u=(f=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var m=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),v=!1;if(Math.abs(u-f)<=.5*this.Xa.co)if(m){var _=s.Oa(s.I()-2);_.scale(this.Xa.fc);var M=new c.ha(0);for(c.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,_.x,_.y,M),_=M.u;_<=f;)_+=6.283185307179586;for(;_>f;)_-=6.283185307179586;_<u&&(v=!0)}else v=!0;v?(s.yB(0,s.I()-1),this.ul||((o=new c.h).N(s.Oa(s.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<o.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),m||(u=.5*(u+f))):(m?((f=new c.h).N(o),f.scale(1/this.Xa.fc),s.xf(0,-1,f)):h.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],f,u,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.AA+=1)}h.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,u,p,this.ul,this.uk,s),this.fi=this.Is[0]},a.prototype.sy=function(s,o){return this.Xa.sy(this.wk,s,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),h=function(){function a(){}return a.buffer=function(s,o,u,p,f,m){if(s==null)throw c.i.O("Geometry::Geodesic_bufferer::buffer");if(s.B())return new c.Ea(s.description);var v=new a;v.Sg=o,v.Kc=c.cb.tc(o);var _=c.cb.xv(v.Kc);if(v.Vb=m,v.Ub=c.cb.gv(v.Kc),v.lc=_*(2-_),v.fc=v.Kc.Id().ci,v.ra=v.Sg.Mn(),v.Cq=v.Kc.Mn(),v.at=v.Cq*v.fc,v.Bq=1.570796326794897/v.fc,v.KY=3.141592653589793/v.fc,v.Ls=6.283185307179586/v.fc,v.LY=v.Ls/6,v.GA=0,v.JY=1.5707963267948966*v.Ub/v.GA,u==4?(v.Ae=2,v.Yv=!0):(v.Ae=u,v.Yv=!1),v.La=p,v.sb=Math.abs(p),isNaN(f)||.001>f?v.tX():v.bo=f,u=s.K(),c.ba.zd(u)?((u=new c.Ua(s.description)).pc(s,!0),s=u,u=1607):u==197&&(u=new c.l,s.A(u),u.S()<=v.ra||u.da()<=v.ra?((u=new c.Ua(s.description)).bd(s,!1),s=u,u=1607):((u=new c.Ea(s.description)).bd(s,!1),s=u,u=1736)),v.uX(),c.ba.Tn(u)||v.vX(),v.sb<=.5*v.bo)return u!=1736?new c.Ea(s.description):v.Yv?s:c.ej.Sr(s,v.Sg,v.Ae,v.LA,-1,m);if(0>v.La&&u!=1736)return new c.Ea(s.description);if(v.Yv&&c.ba.Ic(u)?(o=c.ej.Sr(s,o,4,NaN,v.bo,m),s=c.cb.Bh(o,v.Sg,v.Kc)):s=c.cb.Bh(s,v.Sg,v.Kc),(s=c.Jh.nj(s,v.Kc)).B())return new c.Ea(s.description);switch(!v.Yv&&c.ba.Ic(u)&&(s=c.ej.kI(v.fc,s)),s=a.GX(s,v.Kc),u){case 1736:o=v.PN(s);break;case 1607:o=v.QN(s);break;case 550:o=v.NN(s);break;case 33:o=v.ON(s);break;default:throw c.i.ga("corrupted_geometry")}return(v=c.cb.Bh(o,v.Kc,v.Sg)).Ll(s.description),v},a.prototype.PN=function(s){var o=new c.Ea;s=new w(this,s,o),s=c.Ih.local().W(s,this.Kc,this.Vb).next(),s=c.kp.pj(s,this.Kc,2);var u=new c.Ed;return u.scale(1/this.fc,1/this.fc),o.Pc(u),o=c.kp.pj(o,this.Kc,2),0<=this.La?c.Ih.local().W(o,s,this.Kc,this.Vb):c.mp.local().W(o,s,this.Kc,this.Vb)},a.prototype.QN=function(s){return s=new w(this,s,null),s=c.Ih.local().W(s,this.Kc,this.Vb).next(),c.kp.pj(s,this.Kc,2)},a.prototype.NN=function(s){return s=new C(this,s),s=c.Ih.local().W(s,this.Kc,this.Vb).next(),c.kp.pj(s,this.Kc,2)},a.prototype.ON=function(s){(s=s.D()).scale(this.fc);var o=new c.Ea;return this.ny(s,!1,o),c.kp.pj(o,this.Kc,2)},a.prototype.sy=function(s,o,u,p,f,m){var v=s[0],_=s[s.length-1],M=v.y>_.y?v.y:_.y,T=c.F.q(this.Ub,this.lc,v.y<_.y?v.y:_.y);if(M=c.F.q(this.Ub,this.lc,M),.001<this.GA-(T+o+this.sb)&&.001<this.GA+(M-o-this.sb))return!1;T=(o=u-1.570796326794897)-3.141592653589793,M=o+3.141592653589793;var A=(u=p+1.570796326794897)+3.141592653589793,O=[NaN],R=[NaN],j=[NaN],z=[NaN];if(p=!1,a.ZI(this.Ub,this.lc,this.sb,v,o,T,_,u,O,R),a.ZI(this.Ub,this.lc,this.sb,_,A,u,v,T,j,z),(u<O[0]&&O[0]<A||u<R[0]&&R[0]<A)&&(p=!0),p||(T<j[0]&&j[0]<o||T<z[0]&&z[0]<o)&&(p=!0),!p&&f)return!1;for(var V=[],F=s.length-1;0<=F;F--)V.push(s[F]);return m.Pa(),m.$k(null,0),F=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,s,o,u,f,F,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,_,u,A,this.co,f,F,m,O[0],R[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,V,A,M,f,F,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,v,T,o,this.co,f,F,m,j[0],z[0]),s=!1,f||(s=this.DE(this.fc,m)),p||s},a.prototype.ny=function(s,o,u){u.Pa(),u.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,s,-this.co,6.283185307179586,this.co,o,[0],u,NaN,NaN),o||this.DE(this.fc,u)},a.prototype.DE=function(s,o){var u=this.qO(s,o);return s=this.rO(s,o),u||s},a.prototype.qO=function(s,o){var u=o.I(),p=!1,f=new c.l;if(o.A(f),!c.s.$(f.H*s,1.570796326794897)&&!c.s.$(f.G*s,-1.570796326794897))return!1;var m=new c.h;for(--u;0<=u;u--)o.D(u,m),(m.y==f.H&&c.s.$(m.y*s,1.570796326794897)||m.y==f.G&&c.s.$(m.y*s,-1.570796326794897))&&(p=!0,this.JI(m,u,o));return p},a.prototype.rO=function(s,o){var u=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(u.x-p.x)*s?(this.QV(o),!0):this.pO(o)},a.prototype.pO=function(s){return 0>s.He()&&(this.PV(s),!0)},a.prototype.JI=function(s,o,u){var p=u.I(),f=0<o?o-1:p-1;if(p=u.Oa(o<p-1?o+1:0),f=u.Oa(f),!c.s.$(p.y,s.y)&&!c.s.$(p.x,s.x)){var m=new c.h;m.na(p.x,s.y),u.Db(o,m)}c.s.$(f.y,s.y)||c.s.$(f.x,s.x)||((p=new c.h).na(f.x,s.y),u.xf(0,o,p))},a.prototype.QV=function(s){var o=new c.Ea,u=new c.Ea,p=new c.Ed,f=s.Oa(0),m=s.Oa(s.I()-1),v=new c.h;f.x>m.x?(m=this.Bq,p.ig(-this.Ls,0)):(m=-this.Bq,p.ig(this.Ls,0)),o.add(s,!1),s.Pa(),u.add(o,!1),u.Pc(p),f=new c.l,u.A(f),f.X((this.Ls-f.S())/2,0),f.G=-this.Bq,f.H=this.Bq;for(var _=0;_<u.I();_++)u.D(_,v),o.xf(0,-1,v);for(u.Pc(p),_=0;_<u.I();_++)u.D(_,v),o.xf(0,-1,v);u=o.Oa(0),p=o.Oa(o.I()-1),v.na(p.x,m),o.xf(0,-1,v),v.na(.5*(p.x+u.x),m),o.xf(0,-1,v),v.na(u.x,m),o.xf(0,-1,v),o=c.Jh.ms(o,this.Kc,2,!0,f.v),o=c.Jh.ms(o,this.Kc,2,!0,f.C),o=c.Vd.clip(o,f,this.Cq,NaN),s.add(o,!1)},a.prototype.PV=function(s){var o=new c.l;s.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,s.$k(null,0);var u=new c.h;u.na(o.v,o.G),s.xf(1,-1,u),u.na(o.v,o.H),s.xf(1,-1,u),u.na(.5*(o.v+o.C),o.H),s.xf(1,-1,u),u.na(o.C,o.H),s.xf(1,-1,u),u.na(o.C,o.G),s.xf(1,-1,u),u.na(.5*(o.v+o.C),o.G),s.xf(1,-1,u)},a.my=function(s,o,u,p,f,m,v,_,M,T,A){var O=null;M||((O=new c.h).Sc(),0<A.I()&&(O.N(A.Oa(A.I()-1)),O.scale(u)));var R=new c.ha(0),j=new c.ha(0),z=new c.ha(0),V=new c.h,F=new c.h,G=m[m.length-1];u=1/u;for(var Z=0;Z<m.length;Z++){var K=m[Z];if(Z==0)var re=v;else Z==m.length-1?re=_:(c.kb.xd(s,o,G.x,G.y,K.x,K.y,null,null,R,f),re=R.u-1.570796326794897);c.kb.Ai(s,o,K.x,K.y,p,re,j,z),M?F.na(j.u,z.u):(V.na(j.u,z.u),a.bJ(K.x,V.x,O.x,T),F.na(T[0]+V.x,V.y),O.N(F)),F.scale(u),A.xf(0,-1,F)}},a.Jr=function(s,o,u,p,f,m,v,_,M,T,A,O,R){if(!(v-m<_)){var j=new c.ha(0),z=new c.ha(0),V=new c.h,F=new c.h,G=null;M||((G=new c.h).Sc(),0<A.I()&&(G.N(A.Oa(A.I()-1)),G.scale(u)));var Z=c.P.truncate(Math.ceil(m/_)),K=Z++*_;for(K==m&&(K=Z++*_),u=1/u;K<v+_&&(m<O&&O<K?(K=O,Z--):m<R&&R<K&&(K=R,Z--),!(K>=v));)c.kb.Ai(s,o,f.x,f.y,p,K,j,z),M?F.na(j.u,z.u):(V.na(j.u,z.u),a.bJ(f.x,V.x,G.x,T),F.na(T[0]+V.x,V.y),G.N(F)),F.scale(u),A.xf(0,-1,F),m=K,K=Z++*_}},a.ZI=function(s,o,u,p,f,m,v,_,M,T){var A=new c.h,O=new c.h,R=new c.ha(0),j=new c.ha(0);for(c.kb.Ai(s,o,p.x,p.y,u,f,R,j),A.na(R.u,j.u),c.kb.Ai(s,o,p.x,p.y,u,m,R,j),O.na(R.u,j.u),u=new c.ha(0),c.kb.Sy(s,o,v.x,v.y,A.x,A.y,u),M[0]=u.u,c.kb.Sy(s,o,v.x,v.y,O.x,O.y,u),T[0]=u.u;M[0]<=T[0];)M[0]+=6.283185307179586;for(;M[0]>T[0];)M[0]-=6.283185307179586;for(;M[0]>=_;)M[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;M[0]<_;)M[0]+=6.283185307179586,T[0]+=6.283185307179586},a.bJ=function(s,o,u,p){if(isNaN(u)){for(;3.141592653589793<p[0]+o-s;)p[0]-=6.283185307179586;for(;3.141592653589793<s-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-u?p[0]-=6.283185307179586:3.141592653589793<u-(p[0]+o)&&(p[0]+=6.283185307179586)},a.GX=function(s,o){var u=s.K(),p=c.ba.Ic(u)?s.ea():u==550?s.I():1;if(p==1)return s;var f=new c.ja(0);f.resize(p);for(var m=[],v=new c.l,_=0;_<p;_++){if(f.write(_,_),c.ba.Ic(u)){s.Tj(_,v);var M=v.tf()}else M=s.Oa(_);M=c.SK.WX(o,M),m[_]=M}for(f.Wd(0,f.size,function(T,A){return m[T]<m[A]?-1:m[T]>m[A]?1:0}),o=s.Ja(),_=0;_<p;_++)v=f.read(_),c.ba.Ic(u)?o.addPath(s,v,!0):o.Gd(s,v,v+1);return o},a.prototype.uX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var o=new c.h;o.na(0,10*this.fc);var u=45*this.fc,p=new c.ha(0),f=new c.ha(0),m=new c.ha(0),v=new c.ha(0),_=new c.ha(0),M=new c.ha(0),T=new c.ha(0),A=new c.ha(0),O=new c.h,R=new c.h,j=new c.h,z=new c.h;c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,0,p,f),O.na(p.u,f.u),c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,u,m,v),R.na(m.u,v.u),p=new c.ha(0),f=new c.ha(0);for(var V=new c.ha(0);c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,.5*(0+u),_,M),j.na(_.u,M.u),c.kb.xd(this.Ub,this.lc,O.x,O.y,R.x,R.y,p,f,null,2),c.kb.qj(this.Ub,this.lc,O.x,O.y,.5*p.u,f.u,T,A,2),z.na(T.u,A.u),c.kb.xd(this.Ub,this.lc,j.x,j.y,z.x,z.y,V,null,null,2),!(V.u<=this.bo);)u*=.9,c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,u,m,v),R.na(m.u,v.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(u-0))},a.prototype.vX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var o=new c.h,u=new c.h;o.na(0,10*this.fc),u.na(10*this.fc,10*this.fc);var p=new c.ha(0),f=new c.ha(0),m=new c.ha(0);c.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,m,p,f,this.Ae);var v=new c.ha(0),_=new c.ha(0),M=new c.ha(0),T=new c.ha(0),A=new c.h,O=new c.ha(0),R=new c.ha(0),j=new c.ha(0),z=new c.ha(0),V=new c.ha(0),F=new c.ha(0),G=new c.ha(0),Z=new c.ha(0),K=new c.ha(0),re=new c.h,te=new c.h,ue=new c.h,ye=new c.h,pe=1;p=p.u,f=f.u+1.570796326794897,m=m.u,c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,p-1.570796326794897,R,j),re.na(R.u,j.u),c.kb.Ai(this.Ub,this.lc,u.x,u.y,s,f,z,V),te.na(z.u,V.u),R=new c.ha(0),j=new c.ha(0),f=new c.ha(0);for(var De=new c.ha(0);c.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+pe)*m,p,v,_,this.Ae),A.na(v.u,_.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,A.x,A.y,null,null,O,this.Ae),c.kb.Ai(this.Ub,this.lc,A.x,A.y,s,O.u+1.570796326794897,F,G),ue.na(F.u,G.u),c.kb.xd(this.Ub,this.lc,re.x,re.y,te.x,te.y,R,j,null,2),c.kb.qj(this.Ub,this.lc,re.x,re.y,.5*R.u,j.u,Z,K,2),ye.na(Z.u,K.u),c.kb.xd(this.Ub,this.lc,ue.x,ue.y,ye.x,ye.y,f,null,null,2),!(f.u<=this.bo);)pe*=.9,c.kb.qj(this.Ub,this.lc,o.x,o.y,pe*m,p,M,T,this.Ae),u.na(M.u,T.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,null,null,De,this.Ae),c.kb.Ai(this.Ub,this.lc,u.x,u.y,s,De.u+1.570796326794897,z,V),te.na(z.u,V.u);1e5<(s=pe*m)&&(s=1e5),this.LA=s},a.prototype.tX=function(){var s=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/s&&(s=this.sb/500),.01>s&&(s=.01),this.bo=s},a}();c.QK=h}(q||(q={})),function(c){var C=function(){function w(){}return w.Of=function(h,a){var s=new c.h;s.N(a),h.push(s)},w.wp=function(h,a){h.add(a.x),h.add(a.y)},w.cB=function(h){h.Dh(h.size-2)},w.jB=function(h,a){a.na(h.get(h.size-2),h.get(h.size-1))},w.Sr=function(h,a,s,o,u,p){if(h==null)throw c.i.O();var f=h.K();if(h.B()||c.ba.Tn(f))return h;var m=new w;m.Sg=a,m.Kc=c.cb.tc(a);var v=c.cb.xv(m.Kc);if(m.Vb=p,m.Ub=c.cb.gv(m.Kc),m.lc=v*(2-v),m.fc=m.Kc.Id().ci,m.Cq=m.Kc.Mn(),m.at=m.Cq*m.fc,m.vA=o,m.uA=u,m.Ae=s,f==197?(s=new c.Ea(h.description)).bd(h,!1):c.ba.zd(f)?(s=new c.Ua(h.description)).pc(h,!0):s=h,m.Ae!=4){if((a=m.Sg.Nb(m.Kc)==0?c.cb.Bh(s,m.Sg,m.Kc):c.Jh.nj(s,m.Kc)).B())return a;a=w.kI(m.fc,a),a=m.Uy(a),a=c.kp.pj(a,m.Kc,m.Ae),m=c.cb.Bh(a,m.Kc,m.Sg)}else{if(c.Gg.Tb(a)==2?(h=c.cb.ol(),(a=c.Zj.local().W(s,h,a,p))==h&&(a=new c.Ea,h.copyTo(a))):a=c.Jh.nj(s,m.Kc),a.B())return a;m=m.yX(a)}return m},w.kI=function(h,a){var s=new c.l;if(a.yc(s),3.141592653589793>s.S()*h)return a;var o=!1;s=a.Ha();for(var u=new c.h,p=new c.h;s.ab();)for(;s.Ia();){var f=s.ia();if(u.N(f.bc()),p.N(f.xc()),u.scale(h),p.scale(h),3.141592653589793<Math.abs(u.x-p.x)){var m=w.Nu(u,p);if(!m){o=!0;break}if(6.283185307179586<Math.abs(u.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var v=1<a.description.Ba,_=new c.h,M=new c.h,T=new c.h,A=new c.h,O=new c.Ta;for(s.aj();s.ab();)for(var R=NaN,j=[0];s.Ia();){if(f=s.ia(),u.N(f.bc()),p.N(f.xc()),u.scale(h),p.scale(h),isNaN(R)?(w.Yi(u.x,NaN,j),M.N(u)):M.N(T),R=M.x,m=w.Nu(u,p)){if(6.283185307179586<p.x-u.x)for(;6.283185307179586<p.x-u.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-u.x)for(;-6.283185307179586>p.x-u.x;)p.x+=6.283185307179586;w.Yi(p.x,NaN,j),T.N(p)}else _.N(p),w.vU(_),w.Yi(_.x,R,j),T.na(j[0]+_.x,_.y);.5>Math.abs(T.x-p.x)&&T.N(p),v?(f.Vw(0,O),A.N(M),A.scale(1/h),O.Db(A),(m=s.xm())?o.nf(O):o.lineTo(O),s.Sn()&&!a.ec(s.gb)&&(f.Vw(1,O),A.N(T),A.scale(1/h),O.Db(A),o.lineTo(O))):((m=s.xm())&&o.Cz(null,0),f=o.ea()-1,A.N(M),A.scale(1/h),o.xf(f,-1,A),s.Sn()&&!a.ec(s.gb)&&(A.N(T),A.scale(1/h),o.xf(f,-1,A)))}return o},w.oF=function(h,a,s,o,u,p,f,m,v,_,M,T){var A=new c.h,O=new c.h,R=0<o.compare(u);w.aJ(R,o,u,A,O),w.pF(h,a,s,A,O,p,NaN,f,m,v,_,null,M,T),R&&w.aC(v,_,null,M)},w.prototype.Uy=function(h){var a=h.Ja(),s=h.Ha(),o=[],u=null,p=null,f=1<h.description.Ba;f&&(u=new c.ce(0),p=new c.jg);for(var m=[0],v=new c.h,_=new c.h,M=new c.h,T=new c.h;s.ab();)for(m[0]=0;s.Ia();){var A=s.ia();v.N(A.bc()),_.N(A.xc()),v.scale(this.fc),_.scale(this.fc);var O=0<v.compare(_);w.aJ(O,v,_,M,T),o.length=0,u!=null&&u.Dh(0),0<this.vA?w.pF(this.Ub,this.lc,this.Ae,M,T,this.vA,this.uA,this.at,null,null,null,f?u:null,o,m):w.WQ(this.Ub,this.lc,this.Ae,M,T,this.uA,this.at,f?u:null,o,m),O&&w.aC(null,null,f?u:null,o),o[0].N(A.bc()),o[o.length-1].N(A.xc());for(var R=1;R<o.length-1;R++)o[R].scale(1/this.fc);f?(O=w.$I(O,A,p),w.OD(s.xm(),s.Sn()&&!h.ec(s.gb),A,O,u,o,a)):w.ND(s.xm(),s.Sn()&&!h.ec(s.gb),o,a)}return a},w.prototype.yX=function(h){var a=h.Ja(),s=h.Ha(),o=[],u=null,p=new c.jg,f=1<h.description.Ba;for(f&&(u=new c.ce(0));s.ab();)for(;s.Ia();){var m=s.ia(),v=m.bc(),_=m.xc();v=0<v.compare(_),_=w.$I(v,m,p),o.length=0,u!=null&&u.Dh(0),w.xX(this.Ub,this.lc,this.fc,_,this.Sg,this.vA,this.uA,f?u:null,o),v&&w.aC(null,null,f?u:null,o),f?w.OD(s.xm(),s.Sn()&&!h.ec(s.gb),m,_,u,o,a):w.ND(s.xm(),s.Sn()&&!h.ec(s.gb),o,a)}return a},w.ND=function(h,a,s,o){h&&o.Cz(null,0),h=o.ea()-1;var u=s.slice(0);o.lG(h,u,u.length-1),a&&o.xf(h,-1,s[s.length-1])},w.OD=function(h,a,s,o,u,p,f){var m=new c.Ta;if(s.Vo(m),h?f.nf(m):f.lineTo(m),2<p.length){h=o.Rb();for(var v=1;v<p.length-1;v++){var _=o.IG(u.get(v)*h);o.Vw(_,m),m.Db(p[v]),f.lineTo(m)}}a&&(s.Ro(m),f.lineTo(m))},w.pF=function(h,a,s,o,u,p,f,m,v,_,M,T,A,O){var R=new c.ha(0),j=new c.ha(0),z=new c.ha(0);c.kb.xd(h,a,o.x,o.y,u.x,u.y,z,R,j,s),z=z.u;var V=R=R.u;0>V&&(V+=6.283185307179586),0>(j=j.u)&&(j+=6.283185307179586),v!=null&&(v[0]=z),_!=null&&(_[0]=V),M!=null&&(M[0]=j),_=v=NaN,T!=null&&(v=((_=c.F.Ch(h,a))-(M=c.F.q(h,a,o.y)))/z,_=(_+M)/z),M=w.Ou(o,u),j=w.Mu(o,u),V=M||j;var F=w.AE(o,u,m),G=new c.ha(0),Z=new c.ha(0),K=new c.h,re=new c.h,te=new c.h;w.Yi(o.x,NaN,O);var ue=[O[0]];if(z<=p)w.Of(A,o),w.Yi(u.x,NaN,O),T!=null&&T.add(0),V?(M&&w.fB(o,u,T,A),j&&w.dB(o,u,T,A)):F?w.eB(o,u,R,v,_,T,A):0<f&&(re.na(o.x-ue[0],o.y),K.na(u.x-O[0],u.y),w.Ty(h,a,s,o,z,R,re,K,0,1,f,T,A,ue)),w.Of(A,u);else{var ye=z/((p=1+c.P.truncate(Math.ceil(z/p)))-1),pe=new c.h,De=0;w.Of(A,o),pe.N(o),re.na(o.x-O[0],o.y),T!=null&&T.add(0);for(var xe=1;xe<p;xe++){if(xe<p-1){c.kb.qj(h,a,o.x,o.y,xe*ye,R,G,Z,s),K.na(G.u,Z.u),w.Yi(K.x,pe.x,O),te.na(O[0]+K.x,K.y);var Qe=xe/(p-1)}else w.Yi(u.x,NaN,O),K.na(u.x-O[0],u.y),te.N(u),Qe=1;V?(xe==1&&M&&w.fB(o,te,T,A),xe==p-1&&j&&w.dB(pe,u,T,A)):F?w.zE(pe,te,m)&&(o.x<u.x?pe.x>te.x&&(O[0]+=6.283185307179586,te.na(O[0]+K.x,K.y)):pe.x<te.x&&(O[0]-=6.283185307179586,te.na(O[0]+K.x,K.y)),w.eB(pe,te,R,v,_,T,A)):0<f&&w.Ty(h,a,s,o,z,R,re,K,De,Qe,f,T,A,ue),w.Of(A,te),T!=null&&T.add(Qe),pe.N(te),re.N(K),ue[0]=O[0],De=Qe}}},w.WQ=function(h,a,s,o,u,p,f,m,v,_){var M=new c.ha(0),T=new c.ha(0),A=new c.ha(0);c.kb.xd(h,a,o.x,o.y,u.x,u.y,A,M,T,s),T=A.u,M=M.u;var O=A=NaN;if(m!=null){O=c.F.Ch(h,a);var R=c.F.q(h,a,o.y);A=(O-R)/T,O=(O+R)/T}R=w.Ou(o,u);var j=w.Mu(o,u),z=R||j;f=w.AE(o,u,f);var V=w.Nu(o,u);V=z||f||V,w.Yi(o.x,NaN,_);var F=new c.h;w.Of(v,o),F.N(o),m!=null&&m.add(0),V?(z?(R&&w.fB(o,u,m,v),j&&w.dB(o,u,m,v)):f&&w.eB(o,u,M,A,O,m,v),w.Yi(u.x,NaN,_),w.Of(v,u)):T<=p?(w.Yi(u.x,NaN,_),w.Of(v,u)):(A=new c.h,f=new c.h,A.N(o),f.N(u),A.x-=_[0],f.x-=_[0],-3.141592653589793>f.x?f.x+=6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),w.Ty(h,a,s,o,T,M,A,f,0,1,p,m,v,_),w.Of(v,u),w.Yi(u.x,NaN,_)),m!=null&&m.add(1)},w.Ty=function(h,a,s,o,u,p,f,m,v,_,M,T,A,O){var R=new c.h,j=new c.h;R.na(f.x+O[0],f.y),new c.ha(0),new c.ha(0),new c.ha(0),new c.ha(0);var z=new c.ha(0),V=new c.ha(0),F=new c.ha(0),G=new c.h,Z=new c.h,K=new c.h,re=new c.h;G.N(f),Z.N(m),f=new c.ce(0),m=new c.ce(0),w.wp(f,Z),m.add(_);var te=new c.h,ue=new c.zb,ye=[];for(w.TJ(4,ye);0<f.size;){for(var pe,De=!1,xe=NaN,Qe=0;3>Qe;Qe++)if(pe=ye[Qe]*_+(1-ye[Qe])*v,c.kb.qj(h,a,o.x,o.y,pe*u,p,z,V,s),K.na(z.u,V.u),Qe==0&&(xe=pe,re.N(K)),w.RW(G,K,Z,ue),ue.ic(ue.ge(K,!0),te),c.kb.xd(h,a,K.x,K.y,te.x,te.y,F,null,null,2),F.u>M){De=!0;break}De?(Z.N(re),_=xe,w.wp(f,Z),m.add(_)):(w.cB(f),m.Gn(m.size-1,1,m.size-1),0<f.size&&(w.Yi(Z.x,R.x,O),j.na(O[0]+Z.x,Z.y),w.Of(A,j),R.N(j),T!=null&&T.add(_),G.N(Z),v=_,w.jB(f,Z),_=m.get(m.size-1)))}},w.xX=function(h,a,s,o,u,p,f,m,v){var _=new c.h,M=new c.h,T=new c.h,A=new c.h,O=new c.h,R=new c.h,j=new c.h,z=new c.h,V=new c.h,F=new c.h,G=new c.ha(0),Z=new c.ha(0),K=new c.h,re=[[],[]],te=c.Gg.Tb(u)==1;u=u.Yd(0);var ue=o.bc(),ye=o.xc();te?(R.na(ue.x*s,ue.y*s),j.na(ye.x*s,ye.y*s)):(re[0][0]=ue.x,re[0][1]=ue.y,re[1][0]=ye.x,re[1][1]=ye.y,c.cb.wt(),R.x=re[0][0]*s,R.y=re[0][1]*s,j.x=re[1][0]*s,j.y=re[1][1]*s);var pe=0,De=0,xe=1,Qe=o.Rn();_.N(ue),M.N(ye),ye=new c.ce(0);var We=new c.ce(0),Ce=new c.ce(0);w.wp(ye,M),w.wp(We,j),Ce.add(xe),w.Of(v,_),m!=null&&m.add(De);var Jt=[],Ci=0<f?Qe?5:3:Qe?5:1;w.TJ(Ci,Jt);for(var Kt=new c.ha(0),$t=new c.ha(0),Tt=new c.ha(0),pt=new c.ha(0),si=new c.ha(0),ct=new c.ha(0),zs=new c.ha(0);0<We.size;){var vt=!1,Pr=NaN;for(c.kb.xd(h,a,R.x,R.y,j.x,j.y,Kt,$t,null,2),ue=0;ue<Ci&&!(ue==0&&(!Qe&&0>=f&&Kt.u<=p&&3.141592653589793>Math.abs(R.x-j.x)||o.Tx(De,xe)<=u));ue++){var Ot=Jt[ue]*xe+(1-Jt[ue])*De;if(o.ic(Ot,T),te?z.na(T.x*s,T.y*s):(re[0][0]=T.x,re[0][1]=T.y,c.cb.wt(),z.x=re[0][0]*s,z.y=re[0][1]*s),ue==0&&(Pr=Ot,O.N(T),F.N(z),0<p&&(Kt.u>p||3.141592653589793<=Math.abs(R.x-j.x)))){vt=!0;break}if(Qe&&0<p){if(c.kb.xd(h,a,R.x,R.y,z.x,z.y,Tt,null,null,2),Tt.u>p||3.141592653589793<=Math.abs(R.x-z.x)){vt=!0;break}}else if(0<f){if(Qe?(A.IS(_,M,Jt[ue]),te?V.na(A.x*s,A.y*s):(re[0][0]=A.x,re[0][1]=A.y,c.cb.wt(),V.x=re[0][0]*s,V.y=re[0][1]*s)):(A.N(T),V.N(z)),c.kb.xd(h,a,R.x,R.y,V.x,V.y,pt,null,null,2),!(pt.u<=Kt.u)){vt=!0;break}if(c.kb.qj(h,a,R.x,R.y,pt.u,$t.u,G,Z,2),K.na(G.u,Z.u),c.kb.xd(h,a,K.x,K.y,z.x,z.y,si,null,null,2),si.u>f){vt=!0;break}if(Qe){if(c.kb.xd(h,a,K.x,K.y,V.x,V.y,ct,null,null,2),ct.u>f){vt=!0;break}if(c.kb.xd(h,a,V.x,V.y,z.x,z.y,zs,null,null,2),zs.u>f){vt=!0;break}}}}vt?(M.N(O),j.N(F),xe=Pr,w.wp(ye,M),w.wp(We,j),Ce.add(xe)):(w.cB(ye),w.cB(We),Ce.Gn(Ce.size-1,1,Ce.size-1),w.Of(v,M),pe+=Kt.u,m!=null&&m.add(pe),0<We.size&&(_.N(M),R.N(j),De=xe,w.jB(ye,M),w.jB(We,j),xe=Ce.get(Ce.size-1)))}if(m!=null)for(h=1/pe,ue=0;ue<m.size;ue++)m.write(ue,m.read(ue)*h)},w.aC=function(h,a,s,o){o.reverse(),s!=null&&s.pi(0,s.size,1),s=h!=null?h[0]:NaN,o=a!=null?a[0]:NaN,h!=null&&(h[0]=o),a!=null&&(a[0]=s)},w.aJ=function(h,a,s,o,u){h?(o.N(s),u.N(a)):(o.N(a),u.N(s))},w.$I=function(h,a,s){return h?(s.create(a.K()),a.copyTo(s.get()),s.get().reverse(),s.get()):a},w.Yi=function(h,a,s){if(isNaN(a)){for(;3.141592653589793<s[0]-h;)s[0]-=6.283185307179586;for(;3.141592653589793<h-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+h-a?s[0]-=6.283185307179586:3.141592653589793<a-(s[0]+h)&&(s[0]+=6.283185307179586)},w.RW=function(h,a,s,o){3.141592653589793>Math.abs(a.x-h.x)?(o.Ec(h),3.141592653589793<=s.x-h.x?o.Sl(s.x-6.283185307179586,s.y):3.141592653589793<=h.x-s.x?o.Sl(s.x+6.283185307179586,s.y):o.Sl(s.x,s.y)):(o.Ec(s),3.141592653589793<=h.x-s.x?o.Sl(h.x-6.283185307179586,h.y):3.141592653589793<=s.x-h.x?o.Sl(h.x+6.283185307179586,h.y):o.Sl(h.x,h.y))},w.TJ=function(h,a){for(var s=0;s<h;s++){var o=Math.ceil(s/2)/(h+1);s%2!=0&&(o=-o),a[s]=.5+o}},w.Ou=function(h,a){return!!(c.s.$(h.y,1.570796326794897)&&!c.s.$(a.y,1.570796326794897)||c.s.$(h.y,-1.570796326794897)&&!c.s.$(a.y,-1.570796326794897))},w.Mu=function(h,a){return!!(c.s.$(a.y,1.570796326794897)&&!c.s.$(h.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897)&&!c.s.$(h.y,-1.570796326794897))},w.AE=function(h,a,s){return!(!w.zE(h,a,s)||c.s.$(h.y,1.570796326794897)||c.s.$(h.y,-1.570796326794897)||c.s.$(a.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897))},w.zE=function(h,a,s){return Math.abs(Math.abs(h.x-a.x)-3.141592653589793)<=s},w.Nu=function(h,a){return!!(c.s.$(h.y,1.570796326794897)&&c.s.$(a.y,1.570796326794897)||c.s.$(h.y,-1.570796326794897)&&c.s.$(a.y,-1.570796326794897))},w.fB=function(h,a,s,o){if(0<h.y){var u=new c.h;u.na(a.x,1.570796326794897)}else(u=new c.h).na(a.x,-1.570796326794897);c.s.$(h.x,u.x)||c.s.$(a.y,u.y)||(w.Of(o,u),s!=null&&s.add(0))},w.dB=function(h,a,s,o){if(0<a.y){var u=new c.h;u.na(h.x,1.570796326794897)}else(u=new c.h).na(h.x,-1.570796326794897);c.s.$(a.x,u.x)||c.s.$(h.y,u.y)||(w.Of(o,u),s!=null&&s.add(1))},w.eB=function(h,a,s,o,u,p,f){c.s.Dd(s)?(0<1.570796326794897-h.y&&((s=new c.h).na(h.x,1.570796326794897),w.Of(f,s),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((s=new c.h).na(a.x,1.570796326794897),w.Of(f,s),p!=null&&p.add(o))):(0<1.570796326794897+h.y&&((s=new c.h).na(h.x,-1.570796326794897),w.Of(f,s),p!=null&&p.add(u)),0<1.570796326794897+a.y&&((s=new c.h).na(a.x,-1.570796326794897),w.Of(f,s),p!=null&&p.add(u)))},w.vU=function(h){if(-3.141592653589793>h.x)for(;-3.141592653589793>h.x;)h.x+=6.283185307179586;if(3.141592653589793<h.x)for(;3.141592653589793<h.x;)h.x-=6.283185307179586},w}();c.ej=C}(q||(q={})),function(c){c.kp=function(){function C(){}return C.pj=function(w,h,a){if(w==null||h==null||!c.cb.Xc(h))throw c.i.O();if(w.B())return w;var s=w,o=s.K();if(c.ba.Ic(o)){s=c.Jh.nj(w,h),w=new c.l,s.A(w),o=c.ua.Xd(h,w,!1);for(var u=c.cb.ih(h),p=Math.floor((w.v-u.v)/u.S())*u.S()+u.v;p<w.C;)p>w.v+o&&p<w.C-o&&(s=c.Jh.ms(s,h,a,!0,p)),p+=u.S()}else{if(o==197)return(w=new c.Ea(s.description)).bd(s,!1),C.pj(w,h,a);if(c.ba.zd(o))return(w=new c.Ua(s.description)).pc(s,!0),C.pj(w,h,a)}return C.Py(s,h)},C.Py=function(w,h){if(w==null||h==null||!c.cb.Xc(h))throw c.i.O();if(w.B())return w;var a=w.K();return a==197?(a=new c.Ea(w.description)).bd(w,!1):c.ba.zd(a)?(a=new c.Ua(w.description)).pc(w,!0):a=w,(a=c.Jh.nj(a,h)).B()?a:c.Gg.Tb(h)==1?c.Jh.Hn(a,h,0,a!=w,0):C.IQ(a,h,a!=w)},C.IQ=function(w,h,a){if(!c.cb.Xc(h))throw c.i.O();if(w.B())return w;var s=c.cb.bf(h),o=-180*s;return s*=360,c.Gg.Tb(h)==2&&(s=(o=c.cb.ih(h)).C,s-=o=o.v),c.Jh.Jp(w,o,s,h,a,0,!0)},C}()}(q||(q={})),function(c){c.xY=function(){function C(){}return C.R=function(w){return 0>w?-w:w},C.Mb=function(w,h){return 0<=h?C.R(w):-C.R(w)},C.$=function(w,h){return w==h||C.R(w-h)<=C.EC*(1+(C.R(w)+C.R(h))/2)},C.Dd=function(w){return w==0||C.R(w)<=C.EC},C.Ch=function(w,h){var a=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h;return w/(1+h)*(1+a*(.25+a*(.015625+1/256*a)))*C.zL},C.zL=1.5707963267948966,C.EC=3552713678800501e-30,C}()}(q||(q={})),function(c){var C=function(h){this.Yf=h,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};c.zY=C;var w=function(){function h(a){a===void 0&&(a=null),this.Ej=null,this.Wn=!1,a!==null&&(this.Ej=new C(a))}return h.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},h.prototype.Qf=function(){var a=new h;return this.copyTo(a),a},h.prototype.copyTo=function(a){a.Ej=this.Ej,a.Wn=this.Wn},h.prototype.Lz=function(){this.Wn=!this.Wn},h.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},h.prototype.GJ=function(a){if(0>=a)throw c.i.O();if(a!=this.Fc()){if((a=c.qf.geogtran(a))==null)throw c.i.O("Geogtran not found.");this.Ej=new C(a)}},h.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},h.prototype.pX=function(a){if(a==null)throw c.i.O();var s=null;try{s=c.qf.fromString(c.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw c.i.O()}this.Ej=new C(s)},h.prototype.Nb=function(a){return a==this||!(!(a instanceof h)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Wn==a.Wn},h.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},h.create=function(a,s){var o=new h;return o.GJ(a),s&&o.Lz(),o},h.pP=function(a,s){var o=new h;return o.pX(a),s&&o.Lz(),o},h}();c.Cx=w}(q||(q={})),function(c){var C=function(){function h(){}return h.construct=function(a,s,o,u){var p=new h;return p.jw=a,p.kw=s,p.MY=o,p.NY=u,p},h.zy=function(a,s){return a.jw==s.jw?a.kw==s.kw?0:a.kw<s.kw?-1:1:a.jw<s.jw?-1:1},h}(),w=function(){function h(){this.tT=[],this.uT=[],this.sp()}return h.fz=function(){return h.eK==null&&(h.eK=new h),h.eK},h.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},h.prototype.dD=function(a){try{var s=[];s=s.sort(C.zy);for(var o=0;o<s.length;o++)a.push(s[o])}catch{}},h}();c.yY=w}(q||(q={})),function(c){var C=function(){function w(){}return w.prototype.tD=function(h){this.Hk=h},w.prototype.RM=function(h){this.Gb=h},w.prototype.sD=function(h){this.Bo=h},w.xE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736)},w.vE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736||20>h.I())},w.wE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736||20>h.I())},w}();c.Wk=C}(q||(q={})),function(c){c.ac=function(){function C(){}return C.OT=function(w){var h=new c.Ea;return h.rx(w.gs(),w.js()),h.Aj(w.gs(),w.hs()),h.Aj(w.fs(),w.hs()),h.Aj(w.fs(),w.js()),h},C.Bh=function(w,h){return w===null?null:c.Gx.local().W(w,h,null)},C.fY=function(w,h){var a=c.Ih.local();return w=new c.$c(w),a.W(w,h,null).next()},C.km=function(w,h,a){return c.mp.local().W(w,h,a,null)},C.gp=function(w,h,a){return c.Jx.local().W(w,h,a,null)},C.RX=function(w,h,a){var s=c.Jx.local();for(w=new c.$c(w),h=new c.$c(h),a=s.W(w,h,a,null),s=[];(h=a.next())!=null;)s.push(h);return s},C.Nb=function(w,h,a){return c.fj.local().W(3,w,h,a,null)},C.OP=function(w,h,a){return c.fj.local().W(4,w,h,a,null)},C.MS=function(w,h,a){var s=c.Zj.local();for(w=new c.$c(w),h=new c.$c(h),a=s.W(w,h,a,null),s=[];(h=a.next())!=null;)s.push(h);return s},C.LP=function(w,h,a){var s=c.mp.local();for(w=new c.$c(w),h=new c.$c(h),a=s.W(w,h,a,null),s=[];(h=a.next())!=null;)s.push(h);return s},C.Fa=function(w,h,a){return c.Zj.local().W(w,h,a,null)},C.LS=function(w,h,a){if((w=c.Zj.local().W(w,h,a,null,1))===null)return[];if(w.K()===550){for(h=[],a=0;a<w.xa;a++)h.push(w.FR(a));return h}return w.K()===33?[w]:[]},C.mY=function(w,h,a){return c.fj.local().W(2,w,h,a,null)},C.contains=function(w,h,a){return c.fj.local().W(1,w,h,a,null)},C.wP=function(w,h,a){return c.fj.local().W(16,w,h,a,null)},C.touches=function(w,h,a){return c.fj.local().W(8,w,h,a,null)},C.yU=function(w,h,a){return c.fj.local().W(32,w,h,a,null)},C.OS=function(w,h,a){return c.fj.local().W(1073741824,w,h,a,null)},C.tB=function(w,h,a,s){return c.uL.local().W(w,h,a,s,null)},C.ub=function(w,h,a,s){var o=null;if(a!=null){if(o=a.Id(),s!=null&&o.Fc()!=s.Fc()&&o.pd!=s.pd)throw c.i.Zk()}else if(s!=null)throw c.i.O();return w=c.lL.local().W(w,h,null),o!==null&&s!==null&&(w=c.Uc.Ph(w,o,s)),w},C.clip=function(w,h,a){return c.fL.local().W(w,c.l.construct(h.gs(),h.js(),h.fs(),h.hs()),a,null)},C.fl=function(w,h,a){if(w==null||h==null)return null;for(w=c.hL.local().W(!0,w,h,a,null),h=[];(a=w.next())!=null;)a.B()||h.push(a);return h.slice(0)},C.HN=function(w,h,a,s,o,u,p,f){if(o===!0)return C.IN(w,h,a,s,u,p,f);if(o=a,h!=null){if(p=h.Id(),s!=null&&p.Fc()!=s.Fc()){if(p.pd!=s.pd)throw c.i.Zk();o=[],c.Uc.SE(a,a.length,s,p,o)}}else if(s!=null)throw c.i.O();if(a=c.vC.local(),u){for(w=new c.$c(w),h=a.W(w,h,o,u,null),w=[];(u=h.next())!=null;)w.push(u);u=w.slice(0)}else for(u=[],s=0;s<w.length;s++)u[s]=a.W(w[s],h,o[s],null);return u},C.IN=function(w,h,a,s,o,u,p){if(h===null||(s==null&&(s=h.Fc()!==4326?h.Id():c.Uc.ah(9001)),s.pd!==0))throw c.i.O();if(c.Uc.SE(a,a.length,s,c.Uc.ah(9001),a),s=c.AC.local(),o){for(w=new c.$c(w),h=s.W(w,h,u,a,p,!1,o,null),a=[];(u=h.next())!=null;)a.push(u);o=a.slice(0)}else{o=[];for(var f=0;f<w.length;f++)o[f]=s.W(w[f],h,u,a[f],p,!1,null)}return o},C.buffer=function(w,h,a,s,o,u,p){var f=a;if(o===!1){if(h!=null){if(o=h.Id(),s!=null&&o.Fc()!=s.Fc()){if(o.pd!=s.pd)throw c.i.Zk();f=c.Uc.Ph(a,s,o)}}else if(s!=null)throw c.i.O();w=c.vC.local().W(w,h,f,null)}else{if(h===null||(s==null&&(s=h.Fc()!==4326?h.Id():c.Uc.ah(9001)),s.pd!==0))throw c.i.O();f=c.Uc.Ph(a,s,c.Uc.ah(9001)),w=c.AC.local().W(w,h,u,f,p,!1,null)}return w},C.wU=function(w,h,a,s,o,u,p){if(h!=null){var f=h.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.pd!=p.pd)throw c.i.Zk();a=c.Uc.Ph(a,p,f)}}else if(p!=null)throw c.i.O();for(w=new c.$c(w),h=c.DC.local().W(w,h,a,s,o,u,null),a=[];(s=h.next())!=null;)a.push(s);return a.slice(0)},C.offset=function(w,h,a,s,o,u,p){if(h!=null){var f=h.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.pd!=p.pd)throw c.i.Zk();a=c.Uc.Ph(a,p,f)}}else if(p!=null)throw c.i.O();return c.DC.local().W(w,h,a,s,o,u,null)},C.dP=function(w){return c.xC.local().W(w,null)},C.eP=function(w,h){var a=c.xC.local();for(w=new c.$c(w),h=a.W(w,h,null),a=[];(w=h.next())!=null;)a.push(w);return a},C.iz=function(w,h,a){return c.Hx.local().iz(w,h,a)},C.jz=function(w,h){return c.Hx.local().jz(w,h)},C.kz=function(w,h,a,s){return c.Hx.local().kz(w,h,a,s)},C.$B=function(w,h){return c.$l.local().W(w,h,!1,null)},C.ZS=function(w,h){return c.$l.local().ts(w,h,null)},C.LQ=function(w,h,a,s,o){var u=c.zC.local();if(h!=null){if(h=h.Id(),o!=null&&h.Fc()!=o.Fc()){if(h.pd!=o.pd)throw c.i.Zk();a=c.Uc.Ph(a,o,h)}}else if(o!=null)throw c.i.O();return u.W(w,a,s,null)},C.Sr=function(w,h,a,s){var o=c.Zl.local();if(h!=null){if(h=h.Id(),s!=null&&h.Fc()!=s.Fc()){if(h.pd!=s.pd)throw c.i.Zk();a=c.Uc.Ph(a,s,h)}}else if(s!=null)throw c.i.O();return o.W(w,a,null)},C.Ry=function(w,h,a,s,o){o===void 0&&(o=0);var u=c.nL.local();if(o==4||o!==0)throw c.i.Fe();if(s!==null){if(s.pd!==0)throw c.i.O("Unit must be a linear unit type");a=c.Uc.Ph(a,s,c.Uc.ah(9001))}return u.W(w,a,h,o,null)},C.RQ=function(w,h,a,s){if(w===null)return 0;if(s==4||s!==0)throw c.i.Fe();if(w.K()==197)w=C.OT(w);else if(w.K()!=1736)return 0;if(s=c.cb.tc(h),w=c.cb.Bh(w,h,s),w=c.PK.SQ([w])[0],a!==null){if(a.pd!==2)throw c.i.O("Unit must be a area unit type");w=c.Uc.Ph(w,c.Uc.ah(109404),a)}return w},C.UQ=function(w,h,a,s){if(w=c.qL.local().W(w,h,s,null),a!==null){if(a.pd!==0)throw c.i.O("Unit must be a linear unit type");w=c.Uc.Ph(w,c.Uc.ah(9001),a)}return w},C.EU=function(w,h,a){if(w===null)return 0;var s=null;if(h!=null){if((s=h.Id()).pd==0&&(s=c.Uc.WF(s))==null&&a!==null)throw c.i.O();if(a!=null&&s.Fc()!=a.Fc()&&s.pd!=a.pd)throw c.i.Zk()}else if(a!=null)throw c.i.O();return w.K()==1736||w.K()==197?(w=w.He(),a!==null?c.Uc.Ph(w,s,a):w):0},C.FU=function(w,h,a){if(w===null||w.B()||1>w.Eb())return 0;var s=null;if(h!=null){if(s=h.Id(),a!=null&&s.Fc()!=a.Fc()&&s.pd!=a.pd)throw c.i.Zk()}else if(a!=null)throw c.i.O();w.K()==1736||w.K()==197?h=w.ng():c.ba.zd(w.K())?(h=new c.Ua(w.description)).pc(w,!0):h=w,w=0,h=h.Ha();for(var o=new c.h,u=new c.h;h.ab();)for(;h.Ia();){var p=h.ia();p.$p(o),p.Vr(u),w+=c.h.ub(o,u)}return s!==null&&a!==null&&(w=c.Uc.Ph(w,s,a)),w},C.aP=function(w){return w.points!==void 0?C.hS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?C.gG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?C.gG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?C.iS(w):w.xmin!==void 0?C.gS(w):null},C.iS=function(w){if(w.x==null||w.x=="NaN")return new c.Ta;var h=new c.Ta(w.x,w.y);return w.z!==void 0&&w.z!==null&&h.sX(w.z),w.m!==void 0&&w.m!==null&&h.cX(w.m),h},C.gS=function(w){if(w.xmin==null||w.xmin=="NaN")return new c.Hh;var h=new c.Hh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&h.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&h.setInterval(2,0,w.mmin,w.mmax),h},C.hS=function(w,h,a){var s=0,o=new c.ee,u=3*w.points.length;u%2!=0&&u++,2>u&&(u=2);var p=c.P.truncate(3*w.points.length/2);4>p?p=4:16>p&&(p=16),u=c.Zc.Fn(u,0);var f=c.Zc.Fn(p);p=c.Zc.Fn(p);for(var m=0;m<w.points.length;m++)u.write(2*m,w.points[m][0]),u.write(2*m+1,w.points[m][1]),f.write(m,h||a?w.points[m][2]:NaN),p.write(m,a&&h?w.points[m][3]:NaN),s++;return s!=0&&(o.resize(s),o.kn(0,u)),h&&(o.se(1),o.kn(1,f)),a&&(o.se(2),o.kn(2,h==0?f:p)),o.Qc(16777215),o},C.gG=function(w,h,a,s){var o=0,u=2;if(s=="P"){var p=new c.Ea;o=1,u=3}else p=new c.Ua;for(var f=c.Zc.Qh(0),m=c.Zc.Or(0),v=0,_=0,M=[],T=[],A=0;A<w.length;A++){var O=w[A].length;if(M[A]=!1,s==="P"&&w[A][0][0]===w[A][w[A].length-1][0]&&w[A][0][1]===w[A][w[A].length-1][1]){var R=a==0||w[A][0][3]===w[A][w[A].length-1][3]||w[A][0][3]===void 0&&w[A][w[A].length-1][3]===void 0;(h==0||w[A][0][2]===w[A][w[A].length-1][2]||w[A][0][2]===void 0&&w[A][w[A].length-1][2]===void 0)&&R&&(M[A]=!0,--O)}O>=u?(T[A]=!1,_+=1,f.add(v),m.add(o),v+=O):T[A]=!0}for((s=3*v)%2!=0&&s++,2>s&&(s=2),4>(A=c.P.truncate(3*v/2))?A=4:16>A&&(A=16),s=c.Zc.Fn(s,0),o=c.Zc.Fn(A),u=c.Zc.Fn(A),A=O=0;A<w.length;A++)if(T[A]===!1)for(R=0;R<w[A].length;R++){var j=!1;R===w[A].length-1&&M[A]===!0&&(j=!0),j||(s.write(2*O,w[A][R][0]),s.write(2*O+1,w[A][R][1]),o.write(O,h||a?w[A][R][2]:NaN),u.write(O,a&&h?w[A][R][3]:NaN),O++)}return v!=0&&(w=p,f.resize(_),m.resize(_),0<v&&(f.add(v),m.add(0)),w.kn(0,s),w.KJ(m),w.LJ(f)),h&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,h==0?o:u)),p.Qc(16777215),p},C}()}(q||(q={})),function(c){c.Dx=function(){function C(){}return C.dr=function(w){var h,a=0,s=w.length,o=w[0];for(h=0;h<s-1;h++){var u=w[h+1];a+=(u[0]-o[0])*(u[1]+o[1]),o=u}return 0<=a},C.rotate=function(w,h,a){h=h*Math.PI/180;var s=Math.cos(h),o=Math.sin(h);if(w.paths!==void 0){h={paths:[]};for(var u=0;u<w.paths.length;u++){for(var p=w.paths[u],f=[],m=0;m<p.length;m++){var v=p[m].slice(0);f.push(v);var _=s*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,M=o*(p[m][0]-a.x)+s*(p[m][1]-a.y)+a.y;v[0]=_,v[1]=M}h.paths.push(f),w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM)}return h}if(w.rings!==void 0){for(h={rings:[]},u=0;u<w.rings.length;u++){p=w.rings[u],f=[];var T=C.dr(p);for(m=0;m<p.length;m++)v=p[m].slice(0),f.push(v),_=s*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,M=o*(p[m][0]-a.x)+s*(p[m][1]-a.y)+a.y,v[0]=_,v[1]=M;C.dr(f)!==T&&f.reverse(),h.rings.push(f),w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM)}return h}if(w.x!==void 0)return h={x:s*(w.x-a.x)-o*(w.y-a.y)+a.x,y:o*(w.x-a.x)+s*(w.y-a.y)+a.y},w.z!==void 0&&(h.z=w.z),w.m!==void 0&&(h.m=w.m),w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM),h;if(w.points!==void 0){for(h={points:[]},u=w.points,m=0;m<u.length;m++)(p=u[m].slice(0))[0]=s*(u[m][0]-a.x)-o*(u[m][1]-a.y)+a.x,p[1]=o*(u[m][0]-a.x)+s*(u[m][1]-a.y)+a.y,h.points.push(p);return w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM),h}return null},C.EQ=function(w,h){if(w.paths!==void 0){for(var a={paths:[]},s=0;s<w.paths.length;s++){for(var o=w.paths[s],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var m=h.x-o[p][0];f[0]=o[p][0]+2*m}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},s=0;s<w.rings.length;s++){o=w.rings[s];var v=C.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),m=h.x-o[p][0],f[0]=o[p][0]+2*m;C.dr(u)!==v&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return m=h.x-w.x,a={x:w.x+2*m,y:w.y},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},s=w.points,p=0;p<s.length;p++)o=s[p].slice(0),m=h.x-o[0],o[0]+=2*m,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),m=h.x-w.xmin,a.xmax=w.xmin+2*m,m=h.x-w.xmax,a.xmin=w.xmax+2*m,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},C.FQ=function(w,h){if(w.paths!==void 0){for(var a={paths:[]},s=0;s<w.paths.length;s++){for(var o=w.paths[s],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var m=h.y-o[p][1];f[1]=o[p][1]+2*m}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},s=0;s<w.rings.length;s++){o=w.rings[s];var v=C.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),m=h.y-o[p][1],f[1]=o[p][1]+2*m;C.dr(u)!==v&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return m=h.y-w.y,a={y:w.y+2*m,x:w.x},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},s=w.points,p=0;p<s.length;p++)o=s[p].slice(0),m=h.y-o[1],o[1]+=2*m,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),m=h.y-w.ymin,a.ymax=w.ymin+2*m,m=h.y-w.ymax,a.ymin=w.ymax+2*m,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},C}()}(q||(q={})),function(c){c.UK=function(){function C(){}return C.Kg=function(w,h){switch(h==null&&(h=c.fe.pg()),w){case 33:return new c.Ta(h);case 322:return new c.zb(h);case 197:return new c.Hh(h);case 550:return new c.ee(h);case 1607:return new c.Ua(h);case 1736:return new c.Ea(h);default:throw c.i.ga("invalid argument.")}},C}()}(q||(q={})),function(c){var C=function(){function w(h,a){this.Qe=c.ja.rf(h,-1),this.va=new c.cu,this.yl=a}return w.prototype.vW=function(h){this.va.Bt(Math.min(this.Qe.size,h)),this.va.hn(h)},w.prototype.addElement=function(h,a){if(a===void 0)return this.$M(h);a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);return s==-1&&(s=this.va.Rh(),this.Qe.set(a,s)),this.va.addElement(s,h)},w.prototype.$M=function(h){var a=this.yl.ez(h);a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);return s==-1&&(s=this.va.Rh(),this.Qe.set(a,s)),this.va.addElement(s,h)},w.prototype.kd=function(h,a){if(a===void 0)this.FP(h);else{a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);if(s==-1)throw c.i.O();for(var o=this.va.sc(s),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==h?(this.va.kd(s,u,o),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(a,-1))):u=o,o=p}}},w.prototype.FP=function(h){var a=this.yl.ez(h);a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);if(s==-1)throw c.i.O();for(var o=this.va.sc(s),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==h?(this.va.kd(s,u,o),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(a,-1))):u=o,o=p}},w.prototype.lR=function(h){return h=c.P.truncate(h%this.Qe.size),(h=this.Qe.get(h))==-1?-1:this.va.sc(h)},w.prototype.zR=function(h){return this.va.lb(h)},w.prototype.wd=function(h){var a=this.yl.ez(this.ka(h));a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);if(s==-1)throw c.i.O();for(var o=this.va.sc(s),u=-1;o!=-1;){if(o==h)return this.va.kd(s,u,o),void(this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(a,-1)));u=o,o=this.va.lb(o)}throw c.i.O()},w.prototype.ka=function(h){return this.va.ka(h)},w.prototype.clear=function(){this.Qe=c.ja.rf(this.Qe.size,-1),this.va.clear()},w.prototype.size=function(){return this.va.OF()},w}();c.ZK=C}(q||(q={})),function(c){var C=function(){function w(){this.Ni=new c.ad(3),this.va=new c.ad(6),this.mT=!1,this.ke=-1}return w.prototype.hl=function(h){this.Ni.kd(h)},w.prototype.Rw=function(){return this.Ni.De()},w.prototype.dv=function(h){this.va.kd(h)},w.prototype.VA=function(){return this.va.De()},w.prototype.RB=function(h,a){this.Ni.T(h,1,a)},w.prototype.fx=function(h,a){this.Ni.T(h,2,a)},w.prototype.bX=function(h,a){this.Ni.T(h,3,a)},w.prototype.PB=function(h,a){this.va.T(h,4,a)},w.prototype.eX=function(h,a){this.va.T(h,3,a)},w.prototype.OJ=function(h,a){this.va.T(h,2,a)},w.prototype.Rh=function(h){var a=this.VA();return this.va.T(a,3,this.ke),this.va.T(a,4,0),this.va.T(a,5,h),this.ke!=-1&&this.OJ(this.ke,a),this.ke=a},w.prototype.eh=function(h){this.GE(h);var a=this.va.U(h,2),s=this.va.U(h,3);return a!=-1?this.eX(a,s):this.ke=s,s!=-1&&this.OJ(s,a),this.dv(h),s},w.prototype.Bt=function(h){this.va.Ee(h)},w.prototype.KF=function(h){return this.va.U(h,5)},w.prototype.aX=function(h,a){this.va.T(h,5,a)},w.prototype.addElement=function(h,a){return this.oS(h,a)},w.prototype.oS=function(h,a){var s=this.Rw();this.fx(s,-1),this.va.U(h,0)==-1&&this.va.T(h,0,s);var o=this.va.U(h,1);return this.RB(s,o),o!=-1&&this.fx(o,s),this.va.T(h,1,s),this.setData(s,a),this.PB(h,this.ds(h)+1),this.mT&&this.bX(s,h),s},w.prototype.kd=function(h,a){var s=this.xe(a),o=this.lb(a);return s!=-1?this.fx(s,o):this.va.T(h,0,o),o!=-1?this.RB(o,s):this.va.T(h,1,s),this.hl(a),this.PB(h,this.ds(h)-1),o},w.prototype.hn=function(h){this.Ni.Ee(h)},w.prototype.getData=function(h){return this.Ni.U(h,0)},w.prototype.setData=function(h,a){this.Ni.T(h,0,a)},w.prototype.lb=function(h){return this.Ni.U(h,2)},w.prototype.xe=function(h){return this.Ni.U(h,1)},w.prototype.sc=function(h){return this.va.U(h,0)},w.prototype.Gc=function(h){return this.va.U(h,1)},w.prototype.clear=function(){for(var h=this.ke;h!=-1;)h=this.eh(h)},w.prototype.GE=function(h){for(var a=this.Gc(h);a!=-1;){var s=a;a=this.xe(s),this.hl(s)}this.va.T(h,0,-1),this.va.T(h,1,-1),this.PB(h,0)},w.prototype.B=function(){return this.Ni.size==0},w.prototype.OF=function(){return this.Ni.size},w.prototype.ds=function(h){return this.va.U(h,4)},w.prototype.lz=function(h){return this.va.U(h,3)},w}();c.lp=C}(q||(q={})),function(c){var C=function(){function w(h){h===void 0?(this.vg=new c.ad(2),this.va=new c.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new c.ad(2),this.va=new c.ad(h?4:2),this.ke=-1,this.Sv=h)}return w.prototype.hl=function(h){this.vg.kd(h)},w.prototype.Rw=function(){return this.vg.De()},w.prototype.dv=function(h){this.va.kd(h)},w.prototype.VA=function(){return this.va.De()},w.prototype.Rh=function(){var h=this.VA();return this.Sv&&(this.va.T(h,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,h),this.ke=h),h},w.prototype.eh=function(h){for(var a=this.sc(h);a!=-1;){var s=a;a=this.lb(a),this.hl(s)}this.Sv&&(a=this.va.U(h,2),s=this.va.U(h,3),a!=-1?this.va.T(a,3,s):this.ke=s,s!=-1&&this.va.T(s,2,a)),this.dv(h)},w.prototype.Bt=function(h){this.va.Ee(h)},w.prototype.addElement=function(h,a){var s=this.va.U(h,1),o=this.Rw();return s!=-1?this.vg.T(s,1,o):this.va.T(h,0,o),this.va.T(h,1,o),this.vg.T(o,0,a),o},w.prototype.hn=function(h){this.vg.Ee(h)},w.prototype.kd=function(h,a,s){a!=-1?(this.vg.T(a,1,this.vg.U(s,1)),this.va.U(h,1)==s&&this.va.T(h,1,a)):(this.va.T(h,0,this.vg.U(s,1)),this.va.U(h,1)==s&&this.va.T(h,1,-1)),this.hl(s)},w.prototype.Cy=function(h,a){var s=this.va.U(h,1),o=this.va.U(a,0);o!=-1&&(s!=-1?this.vg.T(s,1,o):this.va.T(h,0,o),this.va.T(h,1,this.va.U(a,1))),this.Sv&&(h=this.va.U(a,2),s=this.va.U(a,3),h!=-1?this.va.T(h,3,s):this.ke=s,s!=-1&&this.va.T(s,2,h)),this.dv(a)},w.prototype.ka=function(h){return this.vg.U(h,0)},w.prototype.Uj=function(h,a){this.vg.T(h,0,a)},w.prototype.lb=function(h){return this.vg.U(h,1)},w.prototype.sc=function(h){return this.va.U(h,0)},w.prototype.Ln=function(h){return this.ka(this.sc(h))},w.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},w.prototype.B=function(){return this.vg.size==0},w.prototype.OF=function(){return this.vg.size},w.prototype.lz=function(h){return this.va.U(h,3)},w}();c.cu=C}(q||(q={})),function(c){c.ua=function(){function C(){}return C.Xd=function(w,h,a){return h=h.zr(),w=w!=null&&w.Yd!==void 0?w.Yd(0):0,a&&(h*=4,w*=1.1),Math.max(w,h)},C.Gr=function(w){return 2*Math.sqrt(2)*w},C.mN=function(w){return Math.sqrt(2)*w},C.mj=function(w,h,a){var s=new c.l;return h.A(s),C.Xd(w,s,a)},C.rE=function(w,h,a){return h=h.Vg(1,0).zr(),w=w!=null?w.Yd(1):0,a&&(h*=4,w*=1.1),Math.max(w,h)},C.ov=function(w,h){var a=new c.l;return w.yc(a),w=new c.l,h.yc(w),a.$b(w),a},C.TN=function(w){var h=new c.l;if(w.yc(h),h.B())return null;var a=new c.fu(h,8),s=-1,o=new c.l,u=!1;do for(var p=0,f=w.ea();p<f;p++){if(w.Tj(p,o),(s=a.Ez(p,o,s))==-1){if(u)throw c.i.ga("internal error");w.Ap(h,!1),u=!0,a.reset(h,8);break}u=!1}while(u);return a},C.iE=function(w){var h=new c.l;w.yc(h);for(var a=new c.fu(h,8),s=-1,o=w.Ha(),u=new c.l,p=!1;o.ab();)for(;o.Ia();){var f=o.ia(),m=o.xb();if(f.A(u),(s=a.Ez(m,u,s))==-1){if(p)throw c.i.Ra();w.Ap(h,!1),p=!0,a.reset(h,8),o.aj();break}}return a},C.lj=function(w,h){var a=new c.l;w.yc(a);for(var s=new c.fu(a,8),o=-1,u=new c.l,p=w.Ha(),f=!1;p.ab();)for(;p.Ia();){var m=p.ia(),v=p.xb();if(m.A(u),u.isIntersecting(h)&&(o=s.Ez(v,u,o))==-1){if(f)throw c.i.ga("internal error.");w.Ap(a,!1),f=!0,s.reset(a,8),p.aj();break}}return s},C.jE=function(w,h){for(var a=new c.fu(h,8),s=new c.h,o=!1,u=new c.l,p=0;p<w.I();p++)if(w.D(p,s),h.contains(s)&&(u.L(s),a.xj(p,u)==-1)){if(o)throw c.i.Ra();o=!0,p=new c.l,w.Ap(p,!1),a.reset(p,8),p=-1}return a},C.gR=function(w,h,a){var s=new c.l,o=new c.l;w.yc(s),h.yc(o),s.X(a,a),o.X(a,a);var u=new c.l;u.L(s),u.Fa(o),w=w.Ha(),h=h.Ha();var p=new c.sC;p.WB(a);var f=!1;for(p.kK();w.ab();)for(;w.Ia();)w.ia().A(s),s.isIntersecting(u)&&(f=!0,(a=new c.l).L(s),p.DD(w.xb(),a));if(p.dF(),!f)return null;for(s=!1,p.jK();h.ab();)for(;h.Ia();)h.ia().A(o),o.isIntersecting(u)&&(s=!0,(a=new c.l).L(o),p.zD(h.xb(),a));return p.cF(),s?p:null},C.hR=function(w,h,a,s,o){var u=w.K(),p=h.K(),f=new c.l,m=new c.l;w.yc(f),h.yc(m),f.X(a,a),m.X(a,a);var v=new c.l;v.L(f),v.Fa(m);var _=new c.sC;_.WB(a);var M=!1;_.kK();var T=0;for(a=w.ea();T<a;T++)s&&u==1736&&!w.Gv(T)||(w.Tj(T,f),f.isIntersecting(v)&&(M=!0,_.DD(T,f)));if(_.dF(),!M)return null;for(w=!1,_.jK(),s=0,a=h.ea();s<a;s++)o&&p==1736&&!h.Gv(s)||(h.Tj(s,m),m.isIntersecting(v)&&(w=!0,_.zD(s,m)));return _.cF(),w?_:null},C.Tu=function(w,h,a){if(w!=h)for(var s=0;s<a;s++)w[s]==null?w[s]=c.h.cl(h[s]):w[s].N(h[s])},C.Ey=function(w,h,a,s){var o=0;for(s+=0;o<s;a++,o++)w[o]==null&&(w[o]=[0,0]),w[o][0]=h[a].x,w[o][1]=h[a].y},C.Dy=function(w,h,a,s){var o=h,u=0;for(h=s+h;o<h;u++,o++)w[o]==null?w[o]=c.h.construct(a[u][0],a[u][1]):w[o].na(a[u][0],a[u][1])},C.fP=function(w,h,a){if(w!=h)for(var s=0;s<a;s++)w[s]==null?w[s]=new c.Ta(h[s]):h[s].copyTo(w[s])},C.qE=function(w,h,a,s){var o=0;return w!=null&&(o=w.Yd(0),s&&!a||w==null||(o+=1.01*w.pz(0))),a&&(h*=4,o*=1.01),Math.max(o,h)},C.oy=function(w,h,a){return C.qE(w,h.zr(),a,!1)},C.bO=function(w,h){var a=new c.l;return h.A(a),C.oy(w,a,!0)},C.py=function(w,h){return C.qE(w,h.zr(),!1,!0)},C.Ju=function(w,h){var a=new c.l;return h.A(a),C.py(w,a)},C.vG=function(w,h,a,s){s*=s;var o=new c.h;if(o.vc(w,h),(w=new c.h).vc(a,h),h=o.Uk(),a=w.Uk(),h<=s&&a<=s)return!0;var u=c.mc.ox(o.yi(w));return(u<=s*h||u<=s*a)&&0<=o.Sh(w)},C.ZJ=function(w,h,a,s){for(var o=0;o<h;o++){var u=w[o].y,p=c.P.Tk(u,a,s);p!=u&&(w[o].y=p)}},C}()}(q||(q={})),function(c){var C,w,h=function(){function u(p){this.Za=p}return u.prototype.compare=function(p,f,m){p=p.ka(m),m=this.Za.qk(f);var v=this.Za.qk(p);return m<v?-1:m==v?o.iq(f)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(f)?1:0:1},u}(),a=function(){function u(p){this.Za=p}return u.prototype.qr=function(p,f,m){this.Za.CX(m,p,f)},u.prototype.bq=function(p){return this.Za.qk(p)},u}();(w=C||(C={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var s=function(){function u(){this.Za=null,this.Si=new c.Oc,this.ji=new c.ja(0),this.tg=[0,0]}return u.prototype.Zi=function(p,f){this.Si.pa=p.pa-f,this.Si.wa=p.wa+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.zB=function(p,f,m){if(p>f)throw c.i.O();this.Si.pa=p-m,this.Si.wa=f+m,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.Wo=function(p,f){this.Si.pa=p-f,this.Si.wa=p+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.next=function(){if(!this.Za.nq)throw c.i.Hb();if(0>this.ie)return-1;for(var p=!0;p;)switch(this.tg[this.ie]){case 1:p=this.AU();break;case 2:p=this.BU();break;case 3:p=this.CU();break;case 4:p=this.DU();break;case 5:p=this.AW();break;case 6:p=this.fT();break;case 7:p=this.oN();break;case 0:p=this.Bz();break;default:throw c.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},u.construct=function(p){var f=new u;return f.Za=p,f.ji.Jb(20),f.ie=-1,f},u.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},u.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0):p<this.Si.pa?(p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),!0)},u.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.nk(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.pk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},u.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},u.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},u.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},u.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},u}();c.AY=s;var o=function(){function u(p){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=p,this.nq=this.Uv=!1}return u.prototype.mr=function(){this.Pk(!0)},u.prototype.Dr=function(p,f){if(!this.Uv)throw c.i.Hb();this.Hj.push(new c.Oc(p,f))},u.prototype.Hp=function(){if(!this.Uv)throw c.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},u.prototype.xj=function(p){if(!this.Uf||!this.nq)throw c.i.O("invalid call");if(this.kf==-1){var f=this.Hj.length;if(this.dA){var m=new c.ja(0);m.Jb(2*f),this.XI(m),this.bi.Jb(2*f),this.bi.resize(0),this.WI(m),this.Mm.resize(f,-1),this.Mm.Yj(-1,0,f),this.dA=!1}else this.Mm.Yj(-1,0,f);this.kf=this.Vu()}f=this.kG(p<<1,this.kf),m=this.bg.addElement(1+(p<<1),this.rz(f)),this.QJ(f,m),this.Mm.set(p,f),this.aw++},u.prototype.remove=function(p){if(!this.Uf||!this.nq)throw c.i.ga("invalid call");var f=this.Mm.get(p);if(f==-1)throw c.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var m=this.rz(f),v=this.bg.UR(m);this.bg.wd(this.rR(f),m),this.bg.wd(this.OR(f),m),(p=this.bg.size(m))==0&&(this.bg.HP(m),this.UJ(v,-1)),this.Gj.kd(f),m=this.PF(v);var _=this.sj(v),M=this.nk(v);for(f=0;!(0<p||v==this.kf||_!=-1&&M!=-1);)v==this.sj(m)?_!=-1?(this.Qk(m,_),this.Wj(_,m),this.Qk(v,-1)):M!=-1?(this.Qk(m,M),this.Wj(M,m),this.Sk(v,-1)):this.Qk(m,-1):_!=-1?(this.Sk(m,_),this.Wj(_,m),this.Qk(v,-1)):M!=-1?(this.Sk(m,M),this.Wj(M,m),this.Sk(v,-1)):this.Sk(m,-1),this.Wj(v,-1),f++,v=m,p=(m=this.pk(v))!=-1?this.bg.size(m):0,_=this.sj(v),M=this.nk(v),m=this.PF(v)},u.prototype.reset=function(){if(!this.Uf||!this.nq)throw c.i.O("invalid call");this.Pk(!1)},u.prototype.size=function(){return this.aw},u.prototype.getIterator=function(){return s.construct(this)},u.prototype.XI=function(p){for(var f=this.Hj.length,m=0;m<2*f;m++)p.add(m);this.DX(p,2*f)},u.prototype.WI=function(p){for(var f=NaN,m=0;m<p.size;m++){var v=p.get(m),_=this.qk(v);_!=f&&(this.bi.add(v),f=_)}},u.prototype.qS=function(){var p=this.Hj.length,f=new c.ja(0);f.Jb(2*p),this.XI(f),this.bi.Jb(2*p),this.bi.resize(0),this.WI(f),this.Gj.Ee(p),this.Vi.hn(2*p);var m=c.Zc.Qh(p);for(m.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<f.size;p++){var v=f.get(p),_=m.get(v>>1);_!=-1?this.QJ(_,this.Vi.addElement(this.rz(_),v)):(_=this.kG(v,this.kf),m.set(v>>1,_))}},u.prototype.kG=function(p,f){var m=f,v=f,_=-1,M=0,T=this.bi.size-1,A=0,O=p>>1,R=NaN,j=NaN,z=!0,V=this.yR(O);for(O=this.vR(O);z;){M<T?(A=M+c.P.truncate((T-M)/2),this.bz(m)==-1&&this.AJ(m,this.bi.get(A),this.bi.get(A+1))):this.bz(m)==-1&&this.AJ(m,this.bi.get(M),this.bi.get(M));var F=this.Pp(m);if(O<F)f!=-1&&(f==m?(v=m,R=F,j=(f=this.sj(m))!=-1?this.Pp(f):NaN):j>F&&(F<R?this.Qk(v,m):this.Sk(v,m),this.Sk(m,f),this.Uf&&(this.Wj(m,v),this.Wj(f,m)),v=m,R=F,f=-1,j=NaN)),(T=this.sR(m))==-1&&(T=this.Vu(),this.ZW(m,T)),m=T,T=A;else if(V>F)f!=-1&&(f==m?(v=m,R=F,j=(f=this.nk(m))!=-1?this.Pp(f):NaN):j<F&&(F<R?this.Qk(v,m):this.Sk(v,m),this.Qk(m,f),this.Uf&&(this.Wj(m,v),this.Wj(f,m)),v=m,R=F,f=-1,j=NaN)),(M=this.PR(m))==-1&&(M=this.Vu(),this.jX(m,M)),m=M,M=A+1;else{(z=this.pk(m))==-1&&(z=this.uP(m),this.UJ(m,z));var G=this.aN(z,p);_=this.sP(),this.mX(_,z),this.YW(_,G),m!=f&&(F<R?this.Qk(v,m):this.Sk(v,m),this.Uf&&this.Wj(m,v),f!=-1&&(j<F?this.Qk(m,f):this.Sk(m,f),this.Uf&&this.Wj(f,m))),z=!1}}return _},u.prototype.Vu=function(){return this.ne.De()},u.prototype.uP=function(p){return this.Uf?this.bg.Rr(p):this.Vi.Rh(p)},u.prototype.sP=function(){return this.Gj.De()},u.prototype.Pk=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=c.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=c.Zc.Qh(0),this.bg=new c.$j,this.bg.Xo(new h(this))):this.bg.clear():this.Vi==null?this.Vi=new c.lp:this.Vi.clear(),this.ne==null?(this.Gj=new c.ad(3),this.ne=new c.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},u.prototype.AJ=function(p,f,m){this.SW(p,f),this.TW(p,m)},u.prototype.Pp=function(p){var f=this.bz(p);return f==-1?NaN:(f=this.qk(f))==(p=this.qk(this.bR(p)))?f:.5*(f+p)},u.prototype.SW=function(p,f){this.ne.T(p,0,f)},u.prototype.TW=function(p,f){this.ne.T(p,1,f)},u.prototype.ZW=function(p,f){this.ne.T(p,3,f)},u.prototype.jX=function(p,f){this.ne.T(p,4,f)},u.prototype.UJ=function(p,f){this.ne.T(p,2,f)},u.prototype.Qk=function(p,f){this.ne.T(p,5,f)},u.prototype.Sk=function(p,f){this.ne.T(p,6,f)},u.prototype.Wj=function(p,f){this.ne.T(p,7,f)},u.prototype.mX=function(p,f){this.Gj.T(p,0,f)},u.prototype.aN=function(p,f){return this.Uf?this.bg.addElement(f,p):this.Vi.addElement(p,f)},u.prototype.YW=function(p,f){this.Gj.T(p,1,f)},u.prototype.QJ=function(p,f){this.Gj.T(p,2,f)},u.prototype.ml=function(p){return this.Uf?this.bg.sc(p):this.Vi.sc(p)},u.prototype.bs=function(p){return this.Uf?this.bg.Gc(p):this.Vi.Gc(p)},u.iq=function(p){return(1&p)==0},u.Iv=function(p){return(1&p)==1},u.prototype.bz=function(p){return this.ne.U(p,0)},u.prototype.bR=function(p){return this.ne.U(p,1)},u.prototype.pk=function(p){return this.ne.U(p,2)},u.prototype.sR=function(p){return this.ne.U(p,3)},u.prototype.PR=function(p){return this.ne.U(p,4)},u.prototype.sj=function(p){return this.ne.U(p,5)},u.prototype.nk=function(p){return this.ne.U(p,6)},u.prototype.PF=function(p){return this.ne.U(p,7)},u.prototype.rz=function(p){return this.Gj.U(p,0)},u.prototype.rR=function(p){return this.Gj.U(p,1)},u.prototype.OR=function(p){return this.Gj.U(p,2)},u.prototype.yR=function(p){return this.Hj[p].pa},u.prototype.vR=function(p){return this.Hj[p].wa},u.prototype.DX=function(p,f){this.Cm==null&&(this.Cm=new c.Zt);var m=new a(this);this.Cm.sort(p,0,f,m)},u.prototype.CX=function(p,f,m){var v=this;p.Wd(f,m,function(_,M){var T=v.qk(_),A=v.qk(M);return T<A||T==A&&u.iq(_)&&u.Iv(M)?-1:1})},u.prototype.qk=function(p){var f=this.Hj[p>>1];return u.iq(p)?f.pa:f.wa},u}();c.ur=o}(q||(q={})),function(c){var C=function(){function w(h){if(h==null)throw c.i.ga("Invalid arguement");this.hf=h;var a=h.iR();a.cS()?h.ef.DG()?this.no=c.ui.PannableFold:this.no=c.ui.Clip:this.no=c.ui.DontClip,a.dS()?h.$f.DG()?this.Sm=c.ui.PannableFold:this.Sm=c.ui.Clip:this.Sm=c.ui.DontClip,this.Dm=a.Lr,this.hH=a.Xu,h=this.hf.nH,this.WG=h.ks(2147483648),this.Wv=h.ks(1073741824)}return w.Bh=function(h,a,s){return a.yw.Bh(h,s)},w.Tt=function(h,a,s,o){return h.yw.Tt(a,s,o)},w.St=function(h,a,s,o){if(s=0>s?a.length:s,(h=h.yw.Tt(a,s,o))==s)return h;for(var u=a=0;u<s;u++){var p=o[u];p.isNaN()||(a<u&&o[a].N(p),a++)}for(;a<s;a++)o[a].Sc();return h},w.transform=function(h,a,s,o,u){if(h.isIdentity())return c.ua.fP(o,a,s),s;for(var p=[],f=0,m=0;m<s;){for(var v=Math.min(p.length,s-m),_=m,M=0;_<v;_++,M++)p[M]==null?p[M]=a[_].D():a[_].D(p[M]);var T=u?w.St(h,p,v,p):w.Tt(h,p,v,p);for(M=_=0;_<T;_++,M++)o[m]==null&&(o[m]=new c.Ta(a[m])),o[m].Db(p[M]);m+=v,f+=T}return f},w.prototype.Tt=function(h,a,s){if(this.hf.isIdentity())return h!=s&&c.ua.Tu(s,h,a),a;var o=this.hf.ef,u=this.hf.$f,p=o.Tb(),f=u.Tb();if(p==0&&p===f){var m=o.Sp();return u=m/(u=u.Sp()),(m=new c.Ed).Jt(u,u),m.aY(h,a,s),a}if(m=c.P.Hu(Math.min(a,64)),p==3){var v=o.Li;p=(o=v.hk()).Tb(),s!=h&&c.ua.Tu(s,h,a),c.Ab.bl(v,s,a,!0),v.St(c.dm.forward,s,a),c.Ab.al(v,s,a,!0)}if(p==3||f===3)throw c.i.ga("image: transform_in_place_");if(p==2)this.no==c.ui.Clip?(s!=h&&c.ua.Tu(s,h,a),h=o.ol(),c.Ab.JS(h,o,s,a)):(s!=h&&c.ua.Tu(s,h,a),o.Xc()&&(p=o.Yd(0),v=o.Le(),c.Ab.AX(s,a,v,p),c.Ab.lF(s,a,o,0))),c.Ab.DL(o,s,a,m);else for(p=o.Yd(0),v=o.Le(),o=0;o<a;o++)c.Ab.BX(h[o],v,p,s[o]);for(c.Ab.BL(this.hf,s,a,m),h=0,(f=f==2)?h=u.Bi():isNaN(this.Dm)||(h=this.Dm),f&&this.Sm!=c.ui.Clip||c.Ab.lF(s,a,u.tc(),h),f&&(c.Ab.tG(s,a,u,this.Sm),c.Ab.CL(u,s,a,m)),h=a,o=0;o<a;++o)s[o].isNaN()&&h--;return h},w.prototype.Bh=function(h,a){if(this.hf.isIdentity()||h.B())return h;if(h.K()==33)return this.SI(h);var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb();if(u==0&&u==p)return a=s.Sp(),a/=o=o.Sp(),(o=new c.Ed).Jt(a,a),(h=c.ba.kg(h)).Pc(o),h;switch(h.K()){case 1607:case 1736:h=this.QI(h,a);break;case 550:h=this.aW(h,a);break;case 197:h=this.$V(h,a);break;default:throw c.i.ga("")}return h},w.prototype.SI=function(h){var a=h.D(),s=[];return s[0]=a,this.Tt(s,1,s),(h=new c.Ta(h)).Db(s[0]),h},w.prototype.QI=function(h,a){if(h.vm())throw c.i.ga("curves not supported");var s=h.K();if(s==1736)return this.bW(h,a);if(s==1607)return this.cW(h,a);throw c.i.ga("projectMultiPath")},w.prototype.bW=function(h,a){var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb(),f=c.P.Hu(Math.min(h.I(),64)),m=c.Ea.kg(h);u==3&&(u=(s=(h=s.Li).hk()).Tb(),m=h.bl(m,!0),this.yp(h,c.dm.forward,m),m=h.al(m,!0)),h=null,p==3&&(p=(o=(h=o.Li).hk()).Tb());var v=u==2,_=p==2,M=_?o.tc():o,T=!_&&!this.Wv;p=!1;var A=m;if(v){if((A=c.Ab.OI(A,s,this.no,a)).B())return A}else{if(m=new c.l,A.yc(m),u=s.Le(),m.G<u.G||m.H>u.H){var O=c.l.construct(m.v-1,u.G,m.C+1,u.H);if((A=c.ti.Pu(A,O,s,NaN,0,a)).B())return A}m.S()>2*u.S()&&(A=c.Ab.Jp(A,-2*u.S(),2*u.S(),s,!0,0,!0,a))}m=this.hH,(u=!isNaN(m))&&(A=c.Zl.local().W(A,m,a)),O=_?o.mk():null;var R=NaN;v&&(R=s.Bi());var j=o.Yr()!=null;if(this.WG)v&&(c.Ab.wr(s,R,A,f),u&&(v=s.jh(),m*=(R=s.tc().jh())/v)),c.Ab.vr(this.hf,A,T,f),u&&(v=s.tc().jh(),m*=(R=o.tc().jh())/v),s=A;else{var z=new c.Ua(A.description);z.yD(A),v&&(c.Ab.wr(s,R,z,f),u&&(v=s.jh(),m*=(R=s.tc().jh())/v)),c.Ab.vr(this.hf,z,T,f),u&&(v=s.tc().rm(),m*=(R=o.tc().rm())/v),T=NaN,_?(O=o.mk(),T=o.Bi()):isNaN(this.Dm)||(T=this.Dm),v=w.vv(s)|w.vv(o),R=10*M.Yd(0),this.Wv&&(v=3,R=0),s=c.Ab.PQ(A,s,z,M,T,a,v,R)}return j&&(s=c.Ab.SD(s,o,a)),_&&(p||(_=M.Le().S(),s.Vg(0,0).S()>=_-M.Yd(0)&&(M=O.getNorthPoleLocation(),_=O.getSouthPoleLocation(),A=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),T=0,A==c.Eg.PE_POLE_POINT&&M!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),O==c.Eg.PE_POLE_POINT&&_!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(p=!0))),s=c.Ab.Hz(s,o,this.Sm,a),u&&(s=c.Zl.local().W(s,m,a)),c.Ab.Kx(o,s,f)),s.B()||(p&&(s=c.$l.local().W(s,o,!1,a)),h!=null&&(s=h.al(s,!1),this.yp(h,c.dm.reverse,s),s=h.bl(s,!1))),s},w.vv=function(h){if(h.Tb()!=2)return 0;var a=0,s=h.mk();h=s.getNorthPoleLocation();var o=s.getSouthPoleLocation(),u=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),u==c.Eg.PE_POLE_POINT&&h!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),s==c.Eg.PE_POLE_POINT&&o!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},w.prototype.cW=function(h,a){var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb(),f=c.P.Hu(Math.min(h.I(),64)),m=c.Ua.kg(h);u==3&&(u=(s=(h=s.Li).hk()).Tb(),m=h.bl(m,!0),this.yp(h,c.dm.forward,m),m=h.al(m,!0)),h=null,p==3&&(p=(o=(h=o.Li).hk()).Tb());var v=u==2;u=(p=p==2)?o.tc():o;var _=!p&&!this.Wv;if(v){if((m=c.Ab.OI(m,s,this.no,a)).B())return m}else{var M=new c.l;m.yc(M);var T=s.Le();if((M.G<T.G||M.H>T.H)&&(M=c.l.construct(M.v-1,T.G,M.C+1,T.H),(m=c.ti.Pu(m,M,s,NaN,0,a)).B()))return m}var A=NaN;v&&(A=s.Bi()),M=o.Yr()!=null,T=this.hH;var O=!isNaN(T);if(O&&(m=c.Zl.local().W(m,T,a)),this.WG)v&&c.Ab.wr(s,A,m,f),O&&(v=s.jh(),T*=(A=s.tc().jh())/v),c.Ab.vr(this.hf,m,_,f),O&&(v=s.tc().jh(),T*=(A=o.tc().jh())/v),s=m;else{var R=new c.Ua(m.description);R.yD(m),v&&(c.Ab.wr(s,A,R,f),O&&(v=s.jh(),T*=(A=s.tc().jh())/v)),c.Ab.vr(this.hf,R,_,f),O&&(v=s.tc().jh(),T*=(A=o.tc().jh())/v),_=NaN,p?_=o.Bi():isNaN(this.Dm)||(_=this.Dm),v=w.vv(s)|w.vv(o),A=10*u.Yd(0),this.Wv&&(v=3,A=0),s=c.Ab.QQ(m,s,R,u,_,a,v,A)}return M&&(s=c.Ab.SD(s,o,a)),p&&(s=c.Ab.Hz(s,o,this.Sm,a),O&&(s=c.Zl.local().W(s,T,a)),c.Ab.Kx(o,s,f)),s.B()||h!=null&&(s=h.al(s,!1),this.yp(h,c.dm.reverse,s),s=h.bl(s,!1)),s},w.prototype.$V=function(h,a){var s=(h.da()+h.S())/400;return s!=0?(s=c.Zl.local().W(h,s,a),s=this.QI(s,a),a=h.Ja(),s.dn(a)):(a=new c.Ta(h.Kp()),s=this.SI(a),a=h.Ja(),s.B()?a.Pa():(h.copyTo(a),h=s.D(),a.L(h.x,h.y,h.x,h.y))),a},w.prototype.aW=function(h,a){h=c.ba.kg(h);var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb(),f=c.P.Hu(Math.min(h.I(),64));if(u==3){var m=s.Li;u=(s=m.hk()).Tb(),h=m.al(h,!0),this.yp(m,c.dm.forward,h),h=m.bl(h,!0)}if(u==2){if(this.no==c.ui.Clip?h=c.Zj.local().W(h,s.ol(),s,a):s.Xc()&&(u=new c.l,h.yc(u),s.Le().contains(u)||(this.no==c.ui.PannableFold&&(h=c.Ab.nj(h,s)),c.Ab.Lt(h,s.Le(),s.Yd(0),!0),h=c.Ab.Hn(h,s,0,!0,0,a))),h.B())return h;c.Ab.wr(s,0,h,f)}else c.Ab.Lt(h,s.Le(),s.Yd(0),!0);return c.Ab.vr(this.hf,h,!1,f),s=0,u=!1,m=null,p==3&&(u=!0,p=(o=(m=o.Li).hk()).Tb()),(p=p==2)?s=o.Bi():isNaN(this.Dm)||(s=this.Dm),p&&this.Sm!=c.ui.Clip||(h=c.Ab.Hn(h,o.tc(),s,!1,0,a)),p&&(h=c.Ab.Hz(h,o,this.Sm,a),c.Ab.Kx(o,h,f),h.B())||u&&(h=m.al(h,!0),this.yp(m,c.dm.reverse,h),h=m.bl(h,!0)),h},w.prototype.yp=function(h,a,s){var o=s.I();if(o!=0){for(var u=s.vb(0),p=c.P.mg(200,0),f=[],m=0;m<o;){var v=Math.min(100,o-m);u.Xw(2*m,2*v,p,2,!0);for(var _=0;_<v;++_)f[_]=c.h.construct(p[2*m],p[2*m+1]);h.St(a,f,v),m+=v}s.Qc(1993)}},w.Py=function(h,a,s){if(h==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(h.B())return h;var o=h.K();return o==197?(o=new c.Ea(h.description)).bd(h,!1):c.ba.zd(o)?(o=new c.Ua(h.description)).pc(h,!0):o=h,(o=c.Ab.nj(o,a)).B()?o:c.Ab.Hn(o,a,0,o!=h,0,s)},w.pj=function(h,a,s,o){if(h==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(h.B())return h;var u=h.K();if(c.ba.Ic(u)){h=c.Ab.nj(h,a),u=new c.l,h.A(u);for(var p=c.ua.oy(a,u,!1),f=a.ih(),m=Math.floor((u.v-f.v)/f.S())*f.S()+f.v;m<u.C;)m>u.v+p&&m<u.C-p&&(h=c.Ab.pS(h,a,s,m)),m+=f.S()}else{if(u==197)return(u=new c.Ea(h.description)).bd(h,!1),w.pj(u,a,s,o);if(c.ba.zd(u))return(u=new c.Ua(h.description)).pc(h,!0),w.pj(u,a,s,o)}return w.Py(h,a,o)},w}();c.du=C}(q||(q={})),function(c){var C=function(w){function h(a,s,o,u){var p=w.call(this)||this;return a===void 0?p.description=c.fe.pg():o===void 0?p.description=a:(p.description=c.fe.pg(),p.UB(a,s),p.Sl(o,u)),p}return Et(h,w),h.prototype.K=function(){return 322},h.prototype.Rb=function(){var a=this.ta-this.qa,s=this.oa-this.ma;return Math.sqrt(a*a+s*s)},h.prototype.Di=function(a){var s=this.ta-this.qa,o=this.oa-this.ma;return Math.sqrt(s*s+o*o)<=a},h.prototype.Rn=function(){return!1},h.prototype.lg=function(){var a=new c.h;return a.vc(this.xc(),this.bc()),a},h.YO=function(a,s){return new h(a.x,a.y,s.x,s.y)},h.prototype.dn=function(a){a.Pa(),a.Pf(this.description);var s=new c.l;this.A(s),a.Zo(s),s=1;for(var o=this.description.Ba;s<o;s++)for(var u=this.description.ld(s),p=c.sa.Wa(u);s<p;s++){var f=this.Vg(u,0);a.setInterval(u,0,f)}},h.prototype.A=function(a){a.L(this.ta,this.oa,this.qa,this.ma),a.normalize()},h.prototype.So=function(a){a.Pa(),a.$b(this.ta,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},h.prototype.Pc=function(a){if(a instanceof c.Ed){this.wc();var s=new c.h;s.x=this.ta,s.y=this.oa,a.Gh(s,s),this.ta=s.x,this.oa=s.y,s.x=this.qa,s.y=this.ma,a.Gh(s,s),this.qa=s.x,this.ma=s.y}else this.wc(),(s=new c.Od).x=this.ta,s.y=this.oa,s.z=this.Pd(0,1,0),s=a.hp(s),this.ta=s.x,this.oa=s.y,this.vn(0,1,0,s.z),s.x=this.qa,s.y=this.ma,s.z=this.Pd(1,1,0),s=a.hp(s),this.qa=s.x,this.ma=s.y,this.vn(1,1,0,s.z)},h.prototype.Ja=function(){return new h(this.description)},h.prototype.Sx=function(a,s){return(this.qa-a-(this.ta-a))*(this.ma-s+(this.oa-s))*.5},h.prototype.ux=function(a){return a*this.Rb()},h.prototype.IG=function(a){return a/this.Rb()},h.prototype.yF=function(a){return c.mc.jq(this.ta,this.qa,a)},h.prototype.aR=function(a){return c.mc.jq(this.oa,this.ma,a)},h.prototype.fl=function(a,s){var o=new c.jg;return this.dh(a,s,o),o.get()},h.prototype.dh=function(a,s,o){if(o==null)throw c.i.O();o.Qr(),(o=o.get()).Pf(this.description);var u=new c.h;this.ic(a,u),o.UB(u.x,u.y),this.ic(s,u),o.Sl(u.x,u.y),u=1;for(var p=this.description.Ba;u<p;u++)for(var f=this.description.Fd(u),m=c.sa.Wa(f),v=0;v<m;v++){var _=this.Vc(a,f,v);o.TB(f,v,_),_=this.Vc(s,f,v),o.JB(f,v,_)}},h.prototype.Vc=function(a,s,o){if(s==0)return o==0?this.ic(a).x:this.ic(a).y;switch(c.sa.gz(s)){case 0:return .5>a?this.yv(s,o):this.jv(s,o);case 1:var u=this.yv(s,o);return s=this.jv(s,o),c.mc.jq(u,s,a);case 2:throw c.i.ga("not implemented")}throw c.i.Ra()},h.prototype.ge=function(a,s){var o=this.qa-this.ta,u=this.ma-this.oa,p=o*o+u*u;return p==0?.5:(a=((a.x-this.ta)*o+(a.y-this.oa)*u)/p,s||(0>a?a=0:1<a&&(a=1)),a)},h.prototype.fq=function(a,s,o,u){if(a){if((a=this.ma-this.oa)==0)return s==this.ma?-1:0;if(0>(s=(s-this.oa)/a)||1<s)return 0;o!=null&&(o[0]=this.yF(s))}else{if((a=this.qa-this.ta)==0)return s==this.qa?-1:0;if(0>(s=(s-this.ta)/a)||1<s)return 0;o!=null&&(o[0]=this.aR(s))}return u!=null&&(u[0]=s),1},h.prototype.Me=function(a,s){var o=this.ma-this.oa;return o==0?a==this.ma?s:NaN:(a=(a-this.oa)/o,s=this.yF(a),a==1&&(s=this.qa),s)},h.prototype.tu=function(a,s,o){return 0<=this.tp(a.x,a.y,s,o)},h.prototype.xi=function(a,s,o){return 0<=this.tp(a,s,o,!0)},h.prototype.ss=function(a,s){return this.tu(a,s,!1)},h.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var s=this.description.Qq-2;a<s;a++){var o=this.la[a];this.la[a]=this.la[a+s],this.la[a+s]=o}}},h.prototype.wu=function(a,s){(s=c.h.construct(a,s)).sub(this.bc());var o=new c.h;return o.vc(this.xc(),this.bc()),(a=o.yi(s))>(s=8881784197001252e-31*(Math.abs(o.x*s.y)+Math.abs(o.y*s.x)))?-1:a<-s?1:0},h.prototype.tp=function(a,s,o,u){var p=this.ta,f=this.oa,m=a-p,v=s-f;if((m=Math.sqrt(m*m+v*v))<=Math.max(o,6661338147750939e-31*m))return u&&m==0?NaN:0;if(m=a-this.qa,v=s-this.ma,(m=Math.sqrt(m*m+v*v))<=Math.max(o,6661338147750939e-31*m))return u&&m==0?NaN:1;if(m=this.qa-this.ta,v=this.ma-this.oa,0<(u=Math.sqrt(m*m+v*v))){var _=1/u,M=a-p,T=s-f,A=M*(m*=_)+T*(v*=_),O=17763568394002505e-31*(Math.abs(M*m)+Math.abs(T*v)),R=m;if(m=-v,v=R,A<-(O=Math.max(o,O))||A>u+O)return NaN;if(Math.abs(M*m+T*v)<=Math.max(o,17763568394002505e-31*(Math.abs(M*m)+Math.abs(T*v)))&&(.5>=(m=c.P.Tk(A*_,0,1))?(v=this.ta+(this.qa-this.ta)*m,u=this.oa+(this.ma-this.oa)*m):(v=this.qa-(this.qa-this.ta)*(1-m),u=this.ma-(this.ma-this.oa)*(1-m)),c.h.Jy(v,u,a,s)<=o)){if(.5>m){if(c.h.Jy(v,u,p,f)<=o)return 0}else if(c.h.Jy(v,u,this.qa,this.ma)<=o)return 1;return m}}return NaN},h.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.AM(a))},h.prototype.mD=function(a,s,o){var u=o?this.ta:this.qa;o=o?this.oa:this.ma;var p=new c.h;return p.x=a.qa-u,p.y=a.ma-o,!(s.Sh(p)>6661338147750939e-31*s.aD(p))||(p.x=a.ta-u,p.y=a.oa-o,s.Sh(p)<=6661338147750939e-31*s.aD(p))},h.prototype.lD=function(a){var s=new c.h;return s.x=this.qa-this.ta,s.y=this.ma-this.oa,!!this.mD(a,s,!1)&&(s.Uq(),!!this.mD(a,s,!0))},h.IM=function(a,s){var o=a.wu(s.ta,s.oa),u=a.wu(s.qa,s.ma);return!(0>o&&0>u||0<o&&0<u)&&(o=s.wu(a.ta,a.oa),u=s.wu(a.qa,a.ma),!(0>o&&0>u||0<o&&0<u)&&((o=a.Rb())>(u=s.Rb())?a.lD(s):s.lD(a)))},h.GM=function(a,s,o){var u=c.h.construct(NaN,NaN),p=a.qa-a.ta,f=a.ma-a.oa,m=s.qa-s.ta,v=s.ma-s.oa,_=m*f-p*v;if(_==0)return u;var M=8881784197001252e-31*(Math.abs(m*f)+Math.abs(p*v)),T=s.ta-a.ta,A=s.oa-a.oa,O=m*A-T*v,R=O/_,j=Math.abs(_);return R<-(m=(8881784197001252e-31*(Math.abs(m*A)+Math.abs(T*v))*j+M*Math.abs(O))/(_*_)+2220446049250313e-31*Math.abs(R))||R>1+m||(m=(v=p*A-T*f)/_)<-(p=(8881784197001252e-31*(Math.abs(p*A)+Math.abs(T*f))*j+M*Math.abs(v))/(_*_)+2220446049250313e-31*Math.abs(m))||m>1+p||(R=c.P.Tk(R,0,1),p=c.P.Tk(m,0,1),f=a.ic(R),_=s.ic(p),(M=new c.h).vc(f,_),M.length()>o&&(M.add(f,_),M.scale(.5),R=a.ge(M,!1),p=s.ge(M,!1),a=a.ic(R),s=s.ic(p),a.sub(s),a.length()>o)||u.na(R,p)),u},h.JM=function(a,s,o,u){var p=0;if((a.ta==s.ta&&a.oa==s.oa||a.ta==s.qa&&a.oa==s.ma)&&(p++,!u))return 1;if(a.qa==s.ta&&a.ma==s.oa||a.qa==s.qa&&a.ma==s.ma){if(++p==2)return 2;if(!u)return 1}return s.xi(a.ta,a.oa,o)||s.xi(a.qa,a.ma,o)||a.xi(s.ta,s.oa,o)||a.xi(s.qa,s.ma,o)?1:u&&p!=0||h.IM(a,s)==0?0:1},h.Yx=function(a,s,o,u,p,f){var m=0,v=a.tp(s.ta,s.oa,f,!1),_=a.tp(s.qa,s.ma,f,!1),M=s.tp(a.ta,a.oa,f,!1),T=s.tp(a.qa,a.ma,f,!1);return isNaN(v)||(u!=null&&(u[m]=v),p!=null&&(p[m]=0),o!=null&&(o[m]=c.h.construct(s.ta,s.oa)),m++),isNaN(_)||(u!=null&&(u[m]=_),p!=null&&(p[m]=1),o!=null&&(o[m]=c.h.construct(s.qa,s.ma)),m++),m==2||isNaN(M)||v==0&&M==0||_==0&&M==1||(u!=null&&(u[m]=0),p!=null&&(p[m]=M),o!=null&&(o[m]=c.h.construct(a.ta,a.oa)),m++),m==2||isNaN(T)||v==1&&T==0||_==1&&T==1||(u!=null&&(u[m]=1),p!=null&&(p[m]=T),o!=null&&(o[m]=c.h.construct(s.qa,s.ma)),m++),0<m?(m==2&&u!=null&&u[0]>u[1]&&(a=u[0],u[0]=u[1],u[1]=a,p!=null&&(u=p[0],p[0]=p[1],p[1]=u),o!=null&&(p=c.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),m):(m=h.GM(a,s,f),isNaN(m.x)?0:(o!=null&&(o[0]=a.ic(m.x)),u!=null&&(u[0]=m.x),p!=null&&(p[0]=m.y),1))},h.prototype.$F=function(){return 0},h.prototype.qp=function(){},h.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},h}(c.NC);c.zb=C}(q||(q={})),function(c){var C=function(){function w(){this.Lm=[],this.za=-1}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var h=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),h}return this.Lm=null},w.prototype.VX=function(h){this.Lm.push(h)},w.prototype.re=function(){},w}();c.bL=C}(q||(q={})),function(c){var C;(C=c.NL||(c.NL={}))[C.enumFillRuleOddEven=0]="enumFillRuleOddEven",C[C.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(h){function a(s,o){var u=h.call(this)||this;if(u.yf=!1,u.Gq=null,u.uq=0,u.tq=0,u.Cj=null,u.Og=!1,u.nb=null,u.mb=null,u.Se=null,u.Nj=null,u.Td=null,u.vq=0,u.gb=0,u.zq=0,o===void 0)u.yf=s,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=c.fe.pg();else{if(o==null)throw c.i.O();u.yf=s,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=o}return u.Cj=null,u.gb=0,u}return Et(a,h),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new c.Ta(this.description):this.Gq.Pf(this.description)},a.prototype.rx=function(s,o){var u=new c.h;u.x=s,u.y=o,this.Nt(u)},a.prototype.Nt=function(s){this.Xx(),this.Gq.Db(s),this.Og=!0},a.prototype.nf=function(s){if(s.B())throw c.i.O();this.Ll(s.description),this.Xx(),s.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var s=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=c.Zc.Qh(2),this.nb.write(0,0),this.mb=c.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),s++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+s),this.fm(o+s),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(s,o){this.Rx(),this.Db(this.xa-1,s,o)},a.prototype.Ei=function(s){this.Rx(),this.Db(this.xa-1,s)},a.prototype.lineTo=function(s){this.Rx(),this.It(this.xa-1,s)},a.prototype.xU=function(s){if(this.wc(),this.yf)throw c.i.Ra();var o=this.ea();if(s>o)throw c.i.Ra();if(this.ec(s)){if(this.mb==null)throw c.i.Ra();var u=this.xa,p=this.Ca(s),f=this.Wc(s);this.fm(this.xa+1),this.oc();for(var m=0,v=this.description.Ba;m<v;m++)if(this.Aa[m]!=null){var _=c.sa.Wa(this.description.Fd(m));this.Aa[m].On(_*f,this.Aa[m],_*p,_,!0,1,_*u)}for(;o>s;o--)u=this.nb.read(o),this.nb.write(o,u+1);this.mb.FE(s,1)}},a.prototype.Cp=function(){if(this.vx(),s===void 0){this.Og=!1;var s=this.ea()-1}var o=this.mb.read(s);this.mb.write(s,1|o),this.Se!=null&&(s=this.Wc(s)-1,this.Se.write(s,1),this.Nj.write(s,-1))},a.prototype.ec=function(s){return(1&this.mb.read(s))!=0},a.prototype.Pn=function(s){if(this.ec(s))return!0;var o=this.Ca(s);return!(o>(s=this.Wc(s)-1))&&(o=this.Oa(o),s=this.Oa(s),o.rb(s))},a.prototype.Av=function(s){return(2&this.mb.read(s))!=0},a.prototype.pc=function(s,o){if(this.Ll(s.description),s.K()!=322)throw c.i.Ra();var u=new c.Ta;(o||this.B())&&(s.Vo(u),this.nf(u)),s.Ro(u),this.lineTo(u)},a.prototype.vp=function(s){var o=this.xa==0;this.rx(s.v,s.G),this.Aj(s.v,s.H),this.Aj(s.C,s.H),this.Aj(s.C,s.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(s,o){if(!s.B()){for(var u=this.xa==0,p=new c.Ta(this.description),f=0;4>f;f++)s.If(o?4-f-1:f,p),f==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,u&&!o&&this.Nf(256,!1)}},a.prototype.add=function(s,o){for(var u=0;u<s.ea();u++)this.addPath(s,u,!o)},a.prototype.addPath=function(s,o,u){this.wf(-1,s,o,u)},a.prototype.$k=function(s,o){this.Cz(s,o)},a.prototype.Fr=function(s,o,u,p,f){if(f||this.ea()!=0||(f=!0),0>o&&(o=s.ea()-1),o>=s.ea()||0>u||0>p||p>s.tv(o))throw c.i.ga("index out of bounds");if(p!=0){var m=s.ec(o)&&u+p==s.tv(o);if(!m||p!=1){if(this.Og=!1,this.Ll(s.description),u=s.Ca(o)+u+1,f&&(p++,u--),m&&p--,m=this.xa,this.fm(this.xa+p),this.oc(),f){if(p==0)return;this.nb.add(this.xa),f=s.mb.read(o),f&=-5,this.yf&&(f|=1),this.mb.write(this.mb.size-1,f),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);f=0;for(var v=this.description.Ba;f<v;f++){var _=this.description.ld(f),M=c.sa.Wa(_),T=s.description.Rf(_);0>T||s.Aa[T]==null?this.Aa[f].Nn(M*m,c.sa.te(_),p*M,M*m):this.Aa[f].On(M*m,s.Aa[T],M*u,p*M,!0,M,M*m)}if(this.vm()||s.Av(o))throw c.i.Ra();this.Qc(1993)}}},a.prototype.jJ=function(){for(var s=0,o=this.ea();s<o;s++)this.zW(s)},a.prototype.zW=function(s){if(this.oc(),s>=this.ea())throw c.i.O();var o=this.Ca(s),u=this.Ka(s);s=this.ec(s)?1:0;for(var p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=c.sa.Wa(this.description.Fd(p));this.Aa[p].pi(m*(o+s),m*(u-s),m)}this.Qc(1993)},a.prototype.ar=function(s){this.oc();var o=this.ea();if(0>s&&(s=o-1),s>=o)throw c.i.O();for(var u=this.Ca(s),p=this.Ka(s),f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var v=c.sa.Wa(this.description.Fd(f));this.Aa[f].Gn(v*u,v*p,v*this.xa)}for(u=s+1;u<=o;u++)f=this.nb.read(u),this.nb.write(u-1,f-p);if(this.mb==null)for(u=s+1;u<=o;u++)s=this.mb.read(u),this.mb.write(u-1,s);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(s,o,u,p){if(o==this||u>=o.ea())throw c.i.O();var f=this.ea();if(s>f)throw c.i.O();0>s&&(s=f),0>u&&(u=o.ea()-1),this.Og=!1,this.Ll(o.description),o.oc();var m=o.Ca(u),v=o.Ka(u),_=this.xa,M=o.ec(u)&&!p?1:0;this.fm(this.xa+v),this.oc();for(var T=s<f?this.Ca(s):_,A=0,O=this.description.Ba;A<O;A++){var R=this.description.Fd(A),j=o.description.Rf(R),z=c.sa.Wa(R);0<=j&&o.Aa[j]!=null?(M!=0&&this.Aa[A].On(T*z,o.Aa[j],z*m,z,!0,z,z*_),this.Aa[A].On((T+M)*z,o.Aa[j],z*(m+M),z*(v-M),p,z,z*(_+M))):this.Aa[A].Nn(T*z,c.sa.te(R),z*v,z*_)}for(this.nb.add(_+v),p=f;p>=s+1;p--)m=this.nb.read(p-1),this.nb.write(p,m+v);for(o.Av(u),this.mb.add(0),p=f-1;p>=s+1;p--)f=this.mb.read(p),f&=-5,this.mb.write(p+1,f);f=o.ER().read(u),f&=-5,this.yf&&(f|=1),this.mb.write(s,f)},a.prototype.Cz=function(s,o){var u=-1,p=this.ea();if(u>p)throw c.i.O();0>u&&(u=p),this.Og=!1;var f=this.xa;this.fm(this.xa+o),this.oc();var m=u<p?this.Ca(u):f;if(s!=null)this.Aa[0].Dz(2*m,s,0,o,!0,2*f);else{var v=c.sa.te(0);this.Aa[0].Nn(2*m,v,2*o,2*f)}s=1;for(var _=this.description.Ba;s<_;s++){v=this.description.ld(s);var M=c.sa.Wa(v);v=c.sa.te(v),this.Aa[s].Nn(m*M,v,M*o,M*f)}for(this.nb.add(this.xa),f=p;f>=u+1;f--)m=this.nb.read(f-1),this.nb.write(f,m+o);for(this.mb.add(0),f=p-1;f>=u+1;f--)o=this.mb.read(f),o&=-5,this.mb.write(f+1,o);this.yf&&this.mb.write(u,1)},a.prototype.lG=function(s,o,u){var p=-1;if(0>s&&(s=this.ea()),s>this.ea()||p>this.Ka(s)||u>o.length)throw c.i.ga("index out of bounds");if(u!=0){s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(s)),this.oc();var f=this.xa;this.fm(this.xa+u),this.oc();for(var m=0,v=this.description.Ba;m<v;m++){var _=this.description.Fd(m),M=c.sa.Wa(_);this.Aa[m].Wt(M*(this.Ca(s)+p+u),(f-this.Ca(s)-p)*M,this.Aa[m],M*(this.Ca(s)+p),!0,M),m==0?this.Aa[m].qC(M*(this.Ca(s)+p),u,o,0,!0):this.Aa[m].Yj(c.sa.te(_),(this.Ca(s)+p)*M,u*M)}for(this.vm()&&(this.Se.Wt(this.Ca(s)+p+u,f-this.Ca(s)-p,this.Se,this.Ca(s)+p,!0,1),this.Nj.Wt(this.Ca(s)+p+u,f-this.Ca(s)-p,this.Nj,this.Ca(s)+p,!0,1),this.Se.Yj(1,this.Ca(s)+p,u),this.Nj.Yj(-1,this.Ca(s)+p,u)),s+=1,o=this.ea();s<=o;s++)this.nb.write(s,this.nb.read(s)+u)}},a.prototype.xf=function(s,o,u){var p=this.ea();if(0>s&&(s=this.ea()),s>=p||o>this.Ka(s))throw c.i.ga("index out of bounds");s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(s));var f=this.xa;this.fm(this.xa+1),this.oc();var m=this.Ca(s);this.Aa[0].xj(2*(m+o),u,2*f),u=1;for(var v=this.description.Ba;u<v;u++){var _=this.description.Fd(u),M=c.sa.Wa(_);this.Aa[u].Nn(M*(m+o),c.sa.te(_),M,M*f)}for(s+=1;s<=p;s++)this.nb.write(s,this.nb.read(s)+1)},a.prototype.yB=function(s,o){var u=this.ea();if(0>s&&(s=u-1),s>=u||o>=this.Ka(s))throw c.i.ga("index out of bounds");this.oc();var p=this.Ca(s);0>o&&(o=this.Ka(s)-1),o=p+o,p=0;for(var f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=c.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(m*o,m,m*this.xa)}for(;u>=s+1;u--)o=this.nb.read(u),this.nb.write(u,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.pE=function(s,o,u,p){if(s=this.Ca(s)+o,(u=this.Ca(u)+p)<s||0>s||u>this.I()-1)throw c.i.O();o=0,(p=this.Ha()).Wb(s);do{for(;p.Ia()&&(s=p.ia(),p.xb()!=u);)o+=s=s.Rb();if(p.xb()==u)break}while(p.ab());return o},a.prototype.aO=function(s,o,u){if(o=this.Ca(s)+o,u=this.Ca(s)+u,0>o||u>this.I()-1)throw c.i.O();var p=this.Ha();if(o>u){if(!this.ec(s))throw c.i.O("cannot iterate across an open path");p.EB()}var f=s=0;p.Wb(o);do f+=s,s=p.ia().Rb();while(p.xb()!=u);return f},a.prototype.ng=function(){return c.si.im(this,null)},a.prototype.FS=function(s,o,u){for(var p=s;p<u-1;p++)if(this.ec(p))throw c.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var f=this.pE(s,o,u,void 0);if(f!=0)for(var m=1;m<p;m++){var v=this.description.ld(m);if(c.sa.gz(v)!=2)for(var _=c.sa.Wa(v),M=0;M<_;M++)this.HS(v,s,o,u,f,M)}}},a.prototype.ES=function(s,o,u){var p=this.description.Ba;if(p!=1){var f=this.aO(s,o,u);if(f!=0)for(var m=1;m<p;m++){var v=this.description.ld(m);if(c.sa.gz(v)!=2)for(var _=c.sa.Wa(v),M=0;M<_;M++)this.GS(v,s,o,u,f,M)}}},a.prototype.HS=function(s,o,u,p,f,m){var v=this.Ha(),_=this.Ca(o)+u;p=this.Ca(p)+void 0,o=this.Vc(s,_,m),u=this.Vc(s,p,m);var M=o,T=0;v.Wb(_);do if(v.Ia()){if(v.ia(),v.xb()==p)break;this.setAttribute(s,v.xb(),m,M),v.ni();do{if(_=v.ia(),v.kk()==p)return;T+=_=_.Rb(),M=c.mc.jq(o,u,T/f),v.Qn()||this.setAttribute(s,v.kk(),m,M)}while(v.Ia())}while(v.ab())},a.prototype.GS=function(s,o,u,p,f,m){var v=this.Ha(),_=this.Ca(o)+u;if((o=this.Ca(o)+p)!=_){p=this.Vc(s,_,m),u=this.Vc(s,o,m);var M=0;v.Wb(_),v.EB(),_=p;do{var T=v.ia();this.setAttribute(s,v.xb(),m,_),M+=_=T.Rb(),_=c.mc.jq(p,u,M/f)}while(v.kk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},a.prototype.Pc=function(s){s instanceof c.Ed?this.TD(s,-1):this.rN(s)},a.prototype.TD=function(s,o){if(!this.B()&&!s.isIdentity()){this.oc();var u=this.Aa[0],p=new c.h,f=new c.h;if(0>o){var m=this.vm(),v=0;o=this.xa}else m=this.Av(o),v=this.Ca(o),o=this.Wc(o);for(;v<o;v++){if(p.x=u.read(2*v),p.y=u.read(2*v+1),m){var _=this.Nj.read(v);if(0<=_)switch(7&this.Se.read(v)){case 2:f.x=this.Td.read(_),f.y=this.Td.read(_+1),s.Gh(f,f),this.Td.write(_,f.x),this.Td.write(_+1,f.y),f.x=this.Td.read(_+3),f.y=this.Td.read(_+4),s.Gh(f,f),this.Td.write(_+3,f.x),this.Td.write(_+4,f.y);break;case 4:throw c.i.Ra()}}s.Gh(p,p),u.write(2*v,p.x),u.write(2*v+1,p.y)}this.Qc(1993)}},a.prototype.rN=function(s){if(!this.B()){this.se(1),this.oc();for(var o=this.Aa[0],u=this.Aa[1],p=new c.Od,f=new c.Od,m=this.vm(),v=0;v<this.xa;v++){if(p.x=o.read(2*v),p.y=o.read(2*v+1),p.z=u.read(v),m){var _=this.Nj.read(v);if(0<=_)switch(7&this.Se.read(v)){case 2:f.x=this.Td.read(_),f.y=this.Td.read(_+1),f.z=this.Td.read(_+2),f=s.hp(f),this.Td.write(_,f.x),this.Td.write(_+1,f.y),this.Td.write(_+1,f.z),f.x=this.Td.read(_+3),f.y=this.Td.read(_+4),f.z=this.Td.read(_+5),f=s.hp(f),this.Td.write(_+3,f.x),this.Td.write(_+4,f.y),this.Td.write(_+5,f.z);break;case 4:throw c.i.Ra()}}p=s.hp(p),o.write(2*v,p.x),o.write(2*v+1,p.y),u.write(v,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=c.Zc.Qh(1,0),this.mb=c.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.qp=function(s){s.Og=!1,s.vq=this.vq,s.zq=this.zq,s.nb=this.nb!=null?c.ja.Dn(this.nb):null,s.mb=this.mb!=null?c.rn.Dn(this.mb):null,s.Nj=this.Nj!=null?c.ja.Dn(this.Nj):null,s.Se=this.Se!=null?c.rn.Dn(this.Se):null,s.Td=this.Td!=null?c.ce.Dn(this.Td):null,s.uq=this.uq,s.tq=this.tq,s.Cj=this.ck(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var s=this.Ha(),o=new c.Ex(0);s.ab();)for(;s.Ia();)o.add(s.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof a&&h.prototype.Nb.call(this,s)))return!1;var o=this.ea();return!(o!=s.ea()||this.nb!=null&&!this.nb.Nb(s.nb,0,o+1)||this.zq!=s.zq||this.mb!=null&&!this.mb.Nb(s.mb,0,o))&&h.prototype.Nb.call(this,s)},a.prototype.Ha=function(){return new c.TL(this)},a.prototype.dy=function(s){if(h.prototype.dy.call(this,s),this.vm())for(s=this.Ha();s.ab();)s.Ia()},a.prototype.Ap=function(s,o){if(h.prototype.Ap.call(this,s,o),this.vm())for(s=this.Ha();s.ab();)s.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(s){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(s)):(4&this.mb.read(s))!=0)},a.prototype.Kr=function(s){return this.yf?(this.zu(),this.Cj.read(s)):0},a.prototype.zu=function(){if(this.ck(1024)){var s=this.ea();this.Cj==null?this.Cj=new c.ce(s):this.Cj.size!=s&&this.Cj.resize(s),s=new c.Ex(0);for(var o=new c.Ex(0),u=new c.h,p=0,f=this.Ha();f.ab();){for(o.reset(),this.D(this.Ca(f.gb),u);f.Ia();)o.add(f.ia().Sx(u.x,u.y));s.add(o.tm());var m=p++;this.Cj.write(m,o.tm())}this.tq=s.tm(),this.Nf(1024,!1)}},a.prototype.AR=function(){if(this.yf){this.hm();for(var s=this.ea(),o=0;o<s;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.ck(8)){this.zu();var s=this.ea();(this.mb==null||this.mb.size<s)&&(this.mb=c.Zc.Or(s+1));for(var o=1,u=0;u<s;u++){var p=this.Cj.read(u);u==0&&(o=0<p?1:-1),0<p*o?this.mb.uJ(u,4):this.mb.FE(u,4)}this.Nf(8,!1)}},a.prototype.nz=function(s){var o=this.gb,u=this.ea();if(0<=o&&o<u){if(s<this.Wc(o)){if(s>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<u&&s>=this.Ca(o)&&s<this.Wc(o))return this.gb=o}if(5>u){for(o=0;o<u;o++)if(s<this.Wc(o))return this.gb=o;throw c.i.ga("corrupted geometry")}for(o=0,--u;u>o;){var p=o+(u-o>>1);if(s<this.Ca(p))u=p-1;else{if(!(s>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var s=this.I();if(!this.yf){s-=this.ea();for(var o=0,u=this.ea();o<u;o++)this.ec(o)&&s++}return s},a.prototype.tv=function(s){var o=this.Ka(s);return this.ec(s)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.LJ=function(s){this.nb=s,this.Qc(16777215)},a.prototype.QR=function(){return this.vx(),this.Se},a.prototype.ER=function(){return this.vx(),this.mb},a.prototype.KJ=function(s){this.mb=s,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(s){return this.nb.read(s+1)},a.prototype.Ka=function(s){return this.nb.read(s+1)-this.nb.read(s)},a.prototype.Ca=function(s){return this.nb.read(s)},a.prototype.nu=function(s,o){this.Cb==null&&(this.Cb=new c.Wk),o=c.Mx.kW(o);var u=this.Cb.Hk;if(u!=null){if(!(u.Kk<s||o>u.MR()))return!0;this.Cb.tD(null)}return u=c.Mx.create(this,s,o),this.Cb.tD(u),!0},a.prototype.dc=function(){var s=h.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Cn(s,0,o+1),this.mb!=null&&this.mb.Cn(s,0,o)}return s},a.prototype.UF=function(s){return this.Se!=null?this.Se.read(s):1},a.prototype.cc=function(s,o,u){var p=this.nz(s);if(s==this.Wc(p)-1&&!this.ec(p))throw c.i.ga("index out of bounds");this.oc();var f=this.Se,m=1;if(f!=null&&(m=7&f.read(s)),m!==1)throw c.i.Ra();if(o.Qr(),o=o.get(),u?o.Pf(c.fe.pg()):o.Pf(this.description),p=s==this.Wc(p)-1&&this.ec(p)?this.Ca(p):s+1,f=new c.h,this.D(s,f),o.Ec(f),this.D(p,f),o.Rc(f),!u)for(u=1,f=this.description.Ba;u<f;u++){m=this.description.Fd(u);for(var v=c.sa.Wa(m),_=0;_<v;_++){var M=this.Vc(m,s,_);o.TB(m,_,M),M=this.Vc(m,p,_),o.JB(m,_,M)}}},a.prototype.Tj=function(s,o){if(s>=this.ea())throw c.i.O();if(this.B())o.Pa();else{if(this.Av(s))throw c.i.ga("not implemented");var u=this.vb(0),p=new c.h,f=new c.l;f.Pa();var m=this.Ca(s);for(s=this.Wc(s);m<s;m++)u.uc(2*m,p),f.$b(p);o.L(f)}},a.prototype.hj=function(s){return this.Cb==null&&(this.Cb=new c.Wk),!(s==0||16>this.I())&&(s=c.ua.iE(this),this.Cb.RM(s),!0)},a.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new c.Wk),this.Cb.Bo==null){this.Cb.sD(null);var s=c.ua.TN(this);this.Cb.sD(s)}},a.prototype.$o=function(s){this.zq=s},a.prototype.Kn=function(){return this.zq},a.prototype.yD=function(s){if(this==s)throw c.i.ga("MultiPathImpl.add");for(var o=this.ea(),u=0;u<s.ea();u++)this.addPath(s,u,!0),this.xU(o),o++},a.prototype.fO=function(s){var o=this.nz(s),u=this.Ca(o);if(u!=s){if(s>=(o=this.Wc(o))||s<u)throw c.i.ga("change_ring_start_point");for(var p=0,f=this.description.Ba;p<f;p++){var m=this.description.ld(p);m=c.sa.Wa(m),this.Aa[p].rotate(u*m,s*m,o*m)}}},a}(c.Fx);c.Xk=w}(q||(q={})),function(c){var C=function(w){function h(a){var s=w.call(this)||this;if(a!==void 0){if(a==null)throw c.i.O();s.description=a}else s.description=c.fe.pg();return s.xa=0,s}return Et(h,w),h.prototype.Ja=function(){return new h(this.description)},h.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},h.prototype.Du=function(a,s){this.resize(this.xa+1);var o=new c.h;o.na(a,s),this.Db(this.xa-1,o)},h.prototype.Gd=function(a,s,o){if(o=0>o?a.I():o,0>s||s>a.I()||o<s)throw c.i.O();if(s!=o){this.Ll(a.description),o-=s;var u=this.xa;this.resize(this.xa+o),this.oc();for(var p=0,f=a.description.Ba;p<f;p++){var m=a.description.Fd(p),v=c.sa.Wa(m),_=this.vb(m);m=a.vb(m),_.On(u*v,m,s*v,o*v,!0,1,u*v)}}},h.prototype.CD=function(a,s){var o=a.length;if(s=0>s?o:s,0>o||0>s)throw c.i.O();if(s!=0){o=s-0,s=this.xa,this.resize(this.xa+o);for(var u=0;u<o;u++)this.Db(s+u,a[0+u])}},h.prototype.yB=function(a){if(0>a||a>=this.I())throw c.i.ga("index out of bounds");this.oc();for(var s=0,o=this.description.Ba;s<o;s++)if(this.Aa[s]!=null){var u=c.sa.Wa(this.description.Fd(s));this.Aa[s].Gn(u*a,u,u*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},h.prototype.resize=function(a){this.fm(a)},h.prototype.qp=function(){},h.prototype.Pa=function(){w.prototype.rD.call(this)},h.prototype.Pc=function(a){if(a instanceof c.Ed){if(this.B())return;this.oc();for(var s=this.Aa[0],o=new c.h,u=0;u<this.xa;u++)o.x=s.read(2*u),o.y=s.read(2*u+1),a.Gh(o,o),s.write(2*u,o.x),s.write(2*u+1,o.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),s=this.Aa[0],o=this.Aa[1];var p=new c.Od;for(u=0;u<this.xa;u++){p.x=s.read(2*u),p.y=s.read(2*u+1),p.z=o.read(u);var f=a.hp(p);s.write(2*u,f.x),s.write(2*u+1,f.y),o.write(u,f.z)}}this.Qc(1993)},h.prototype.Eb=function(){return 0},h.prototype.K=function(){return 550},h.prototype.He=function(){return 0},h.prototype.Rb=function(){return 0},h.prototype.Nb=function(a){return a==this||a instanceof h&&w.prototype.Nb.call(this,a)},h.prototype.gW=function(a,s){var o=this.xa;if(o=Math.min(o,s+1e3),0>s||s>=this.xa||o<s||a.length!=1e3)throw c.i.O();var u=o-s,p=[];for(this.vb(0).Xw(2*s,2*u,p,0,!0),s=0;s<u;s++)a[s]=c.h.construct(p[2*s],p[2*s+1]);return o},h.prototype.Zx=function(){},h.prototype.ey=function(){},h.prototype.nu=function(){return!1},h.prototype.hj=function(){return!1},h.prototype.ng=function(){return null},h}(c.Fx);c.ee=C}(q||(q={})),function(c){var C;(C=c.dL||(c.dL={}))[C.NotDetermined=0]="NotDetermined",C[C.Structure=1]="Structure",C[C.DegenerateSegments=2]="DegenerateSegments",C[C.Clustering=3]="Clustering",C[C.Cracking=4]="Cracking",C[C.CrossOver=5]="CrossOver",C[C.RingOrientation=6]="RingOrientation",C[C.RingOrder=7]="RingOrder",C[C.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",C[C.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",C[C.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function h(a,s,o){a===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=a,this.Lo=s,this.Mo=o)}return h.prototype.Yt=function(a){this.Lj=a.Lj,this.Lo=a.Lo,this.Mo=a.Mo},h}();c.Nd=w}(q||(q={})),function(c){c.P=function(){function C(){}return C.assert=function(w){if(w===!1)throw c.i.BK()},C.XJ=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},C.Hu=function(w){var h;h===void 0&&(h=0);for(var a=[],s=0;s<w;s++)a[s]=C.mg(2,h);return a},C.mg=function(w,h){h===void 0&&(h=0);for(var a=[],s=0;s<w;s++)a[s]=h;return a},C.bv=function(w,h){var a,s;for(a===void 0&&(a=0),s===void 0&&(s=w.length-1);a<=s;a++)w[a]=h},C.Tk=function(w,h,a){return w<h?h:w>a?a:w},C.Vh=function(w,h){var a=5381;return((a=((a=((a=h!==void 0?(h<<5)+h+(255&w):(a<<5)+a+(255&w))<<5)+a+(w>>8&255))<<5)+a+(w>>16&255))<<5)+a+(w>>24&255)&2147483647},C.wj=function(){throw Error("Not Implemented")},C.XA=function(w){return C.WT(w)+12345&2147483647},C.SG=function(w){var h=32,a=w%C.Px|0,s=w/C.Px|0;return(h&=63)==0?w:(32>h?(w=a>>>h|s<<32-h,h=s>>h):(w=s>>h-32,h=0<=s?0:-1),h*C.Px+(w>>>0))},C.WT=function(w){var h=1103515245,a=65535&h;return((h-a)*(w|=0)|0)+(a*w|0)|0},C.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},C.MAX_SAFE_INTEGER=Math.pow(2,53)-1,C.MIN_SAFE_INTEGER=-C.MAX_SAFE_INTEGER,C.QC=65536,C.Px=C.QC*C.QC,C}()}(q||(q={})),function(c){var C;(C=c.xL||(c.xL={}))[C.Project=0]="Project",C[C.Union=1]="Union",C[C.Difference=2]="Difference",C[C.Proximity2D=3]="Proximity2D",C[C.Relate=4]="Relate",C[C.Equals=5]="Equals",C[C.Disjoint=6]="Disjoint",C[C.Intersects=7]="Intersects",C[C.Within=8]="Within",C[C.Contains=9]="Contains",C[C.Crosses=10]="Crosses",C[C.Touches=11]="Touches",C[C.Overlaps=12]="Overlaps",C[C.Buffer=13]="Buffer",C[C.Distance=14]="Distance",C[C.Intersection=15]="Intersection",C[C.Clip=16]="Clip",C[C.Cut=17]="Cut",C[C.DensifyByLength=18]="DensifyByLength",C[C.DensifyByAngle=19]="DensifyByAngle",C[C.LabelPoint=20]="LabelPoint",C[C.GeodesicBuffer=21]="GeodesicBuffer",C[C.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",C[C.ShapePreservingDensify=23]="ShapePreservingDensify",C[C.GeodeticLength=24]="GeodeticLength",C[C.GeodeticArea=25]="GeodeticArea",C[C.Simplify=26]="Simplify",C[C.SimplifyOGC=27]="SimplifyOGC",C[C.Offset=28]="Offset",C[C.Generalize=29]="Generalize",C[C.SymmetricDifference=30]="SymmetricDifference",C[C.ConvexHull=31]="ConvexHull",C[C.Boundary=32]="Boundary",C[C.SimpleRelation=33]="SimpleRelation";var w=function(){function h(){}return h.prototype.K=function(){return null},h.prototype.yn=function(){},h.prototype.Ku=function(){return!1},h}();c.Ge=w}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 13},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p){return a instanceof c.ba?(p=new c.$c(a),this.W(p,s,[o],!1,u).next()):u===!0?(o=new c.wC(a,s,o,!1,p),c.Ih.local().W(o,s,p)):new c.wC(a,s,o,!1,p)},h.instance=null,h}(c.Ge);c.vC=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o,u){this.za=-1,this.Sd=h,this.Vz=a,this.Es=s,this.nT=new c.l,this.nT.Pa(),this.ho=-1,this.Vb=u}return w.prototype.next=function(){for(var h;(h=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(h,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.buffer=function(h,a){return c.CK.buffer(h,a,this.Vz,NaN,96,this.Vb)},w.prototype.re=function(){},w}();c.wC=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 16},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u).next()):new c.gL(a,s,o,u)},h.instance=null,h}(c.Ge);c.fL=C}(q||(q={})),function(c){var C=function(){function w(h,a,s){if(this.za=-1,h==null)throw c.i.O();this.aa=a,this.Ak=h,this.ra=c.ua.Xd(s,a,!1)}return w.prototype.next=function(){var h;return(h=this.Ak.next())!=null?(this.za=this.Ak.Ma(),c.Vd.clip(h,this.aa,this.ra,0)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.gL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 31},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o){return a instanceof c.ba?c.yC.mE(a):new c.yC(s,a,o)},h.instance=null,h}(c.Ge);c.xC=C}(q||(q={})),function(c){var C=function(){function w(h,a,s){if(this.pA=new c.au,this.za=-1,a==null)throw c.i.O();this.YG=h,this.Jc=!1,this.Ak=a,this.Vb=s}return w.prototype.next=function(){if(this.YG){if(!this.Jc){var h=this.ZN(this.Ak);return this.Jc=!0,h}return null}if(!this.Jc){if((h=this.Ak.next())!=null)return this.za=this.Ak.Ma(),w.mE(h);this.Jc=!0}return null},w.prototype.Ma=function(){return this.za},w.prototype.ZN=function(h){for(var a;(a=h.next())!=null;)this.pA.Ib(a);return this.pA.YQ()},w.prototype.re=function(){if(!this.Jc){if(!this.YG)throw c.i.ga("Invalid call for non merging convex hull.");var h=this.Ak.next();if(h==null)throw c.i.ga("Expects a non-null geometry.");this.pA.Ib(h)}},w.mE=function(h){if(w.QS(h))return h;var a=h.K();if(c.Xk.zd(a))return(a=new c.Ua(h.description)).pc(h,!0),a;if(a==550&&h.I()==2){var s=new c.Ta;return a=new c.Ua(h.description),h.we(0,s),a.nf(s),h.we(1,s),a.lineTo(s),a}return c.au.MO(h)},w.QS=function(h){if(h.B())return!0;var a=h.K();return a==33||a==197||!c.Xk.zd(a)&&(a==550?h.I()==1:a==1607?h.ea()==1&&2>=h.I():h.ea()==1&&(2>=h.I()||c.au.EG(h,0)))},w}();c.yC=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 17},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p){return new c.iL(a,s,o,u,p)},h.instance=null,h}(c.Ge);c.hL=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o,u){if(this.Vf=null,a==null||s==null)throw c.i.ga("invalid argument");this.kT=h,this.iA=a,this.gH=s,h=c.ua.ov(a,s),this.ra=c.ua.Xd(o,h,!0),this.fH=-1,this.od=u}return w.prototype.Ma=function(){return 0},w.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},w.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},w.prototype.OQ=function(){var h=new c.Ua,a=new c.Ua,s=new c.Ua;this.Vf.push(h),this.Vf.push(a);var o=[];c.GK.EK(this.kT,this.iA,this.gH,this.ra,o,this.od);for(var u=0;u<o.length;u++){var p=o[u];if(p.ct==0)h.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Vf.push(p.Y);else{if(p.ct!=4)throw c.i.ga("internal");s.add(p.Y,!1)}}s.B()||h.B()&&a.B()&&!(3<=this.Vf.length)||this.Vf.push(s),h.B()&&a.B()&&3>this.Vf.length&&(this.Vf.length=0)},w.prototype.NQ=function(){var h=new c.ja(0),a=new c.hd,s=a.WE(),o=a.Ib(this.iA),u=a.Ib(this.gH),p=new c.Hg;try{p.Gt(a,this.ra,this.od),p.fl(s,o,u,h);var f=a.Ke(o),m=new c.Ea,v=new c.Ea;for(this.Vf.length=0,this.Vf.push(m),this.Vf.push(v),o=0;o<h.size;o++){var _=new c.hd,M=_.Ib(f),T=_.Ib(a.Ke(h.get(o)));p.fr(_,this.od);var A=p.Cv(M,T),O=_.Ke(A);if(!O.B()){var R=a.FF(h.get(o),s);R==2?m.add(O,!1):R==1?v.add(O,!1):this.Vf.push(O);var j=new c.hd;M=j.Ib(f),T=j.Ib(a.Ke(h.get(o))),p.fr(j,this.od),f=j.Ke(p.km(M,T))}}!f.B()&&0<h.size&&this.Vf.push(f),m.B()&&v.B()&&(this.Vf.length=0)}finally{p.Wg()}},w.prototype.re=function(){},w}();c.iL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o){if(a instanceof c.ba)return a=new c.$c(a),this.W(a,s,o).next();if(0>=s)throw c.i.O();return new c.jL(a,s,o)},h.instance=null,h}(c.Ge);c.Zl=C}(q||(q={})),function(c){var C=function(){function w(h,a){this.za=-1,this.Sd=h,this.Rs=a}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){var h;return(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(h)):null},w.prototype.IP=function(h){if(h.B()||1>h.Eb())return h;var a=h.K();if(a==1736||a==1607)return this.Iy(h);if(c.ba.zd(a))return this.KP(h);if(a==197)return this.JP(h);throw c.i.Ra()},w.prototype.KP=function(h){if(h.Rb()<=this.Rs)return h;var a=new c.Ua(h.description);return a.pc(h,!0),this.Iy(a)},w.prototype.JP=function(h){var a=new c.Ea(h.description);a.bd(h,!1);var s=new c.l;return h.A(s),h=s.da(),s.S()<=this.Rs&&h<=this.Rs?a:this.Iy(a)},w.prototype.Iy=function(h){for(var a=h.Ja(),s=h.Ha();s.ab();)for(var o=!0;s.Ia();){var u=s.ia();if(u.K()!=322)throw c.i.ga("not implemented");var p=s.Qn(),f=u.Rb();if(f>this.Rs){var m=Math.ceil(f/this.Rs);f=new c.Ta(h.description),o&&(u.Vo(f),a.nf(f));var v=o=1/m,_=0;for(--m;_<m;_++)u.Vw(v,f),a.lineTo(f),v+=o;p?a.Cp():(u.Ro(f),a.lineTo(f))}else p?a.Cp():a.pc(u,o);o=!1}return a},w.prototype.re=function(){},w}();c.jL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.K=function(){return 2},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),s=new c.$c(s),this.W(a,s,o,u).next()):new c.kL(a,s,o,u)},h.km=function(a,s,o,u){if(a.B()||s.B())return a;var p=a.Eb(),f=s.Eb();if(p>f)return a;var m=a.K(),v=s.K(),_=new c.l,M=new c.l,T=new c.l;a.A(_),s.A(M),T.L(_),T.$b(M);var A=(T=c.ua.Xd(o,T,!0))*Math.sqrt(2)*1.00001,O=new c.l;if(O.L(_),O.X(A,A),!O.isIntersecting(M))return a;if(p==1&&f==2)return h.FV(a,s,v,o,u);if(m==33)switch(c.Xk.zd(v)?(o=new c.Ua(s.description),o.pc(s,!0)):o=s,v){case 1736:return h.SU(a,o,T);case 1607:return h.TU(a,o,T);case 550:return h.QU(a,o,T);case 197:return h.PU(a,o,T);case 33:return h.RU(a,o,T);default:throw c.i.O()}else if(m==550)switch(v){case 1736:return h.iU(a,s,T);case 197:return h.gU(a,s,T);case 33:return h.hU(a,s,T)}return c.Hg.km(a,s,o,u)},h.SU=function(a,s,o){return c.jd.FG(s,a,o)==0?a:a.Ja()},h.TU=function(a,s,o){var u=a.D();s=s.Ha();for(var p=o*Math.sqrt(2)*1.00001,f=p*p,m=new c.l;s.ab();)for(;s.Ia();){var v=s.ia();if(v.A(m),m.X(p,p),m.contains(u)){if(v.ss(u,o))return a.Ja();var _=v.bc();if(c.h.zc(u,_)<=f||(_=v.xc(),c.h.zc(u,_)<=f))return a.Ja()}}return a},h.QU=function(a,s,o){var u=s.vb(0);s=s.I();var p=a.D(),f=new c.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var m=0;m<s;m++)if(u.uc(2*m,f),c.h.zc(f,p)<=o)return a.Ja();return a},h.PU=function(a,s,o){var u=new c.l;return s.A(u),u.X(o,o),s=a.D(),u.contains(s)?a.Ja():a},h.RU=function(a,s,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D();return s=s.D(),c.h.zc(u,s)<=o?a.Ja():a},h.iU=function(a,s,o){var u=new c.l;s.A(u),u.X(o,o);for(var p=a.I(),f=!1,m=[],v=0;v<p;v++)m[v]=!1;var _=new c.h;for(v=0;v<p;v++)a.D(v,_),u.contains(_)&&c.jd.Zd(s,_,o)!=0&&(f=!0,m[v]=!0);if(!f)return a;for(s=a.Ja(),v=0;v<p;v++)m[v]||s.Gd(a,v,v+1);return s},h.gU=function(a,s,o){var u=new c.l;s.A(u),u.X(o,o),s=a.I();var p=!1;o=[];for(var f=0;f<s;f++)o[f]=!1;var m=new c.h;for(f=0;f<s;f++)a.D(f,m),u.contains(m)&&(p=!0,o[f]=!0);if(!p)return a;for(u=a.Ja(),f=0;f<s;f++)o[f]||u.Gd(a,f,f+1);return u},h.hU=function(a,s,o){var u=a.vb(0),p=a.I(),f=s.D(),m=new c.h,v=!1;s=[];for(var _=0;_<p;_++)s[_]=!1;for(o=(_=o*Math.sqrt(2)*1.00001)*_,_=0;_<p;_++)u.uc(2*_,m),c.h.zc(m,f)<=o&&(v=!0,s[_]=!0);if(!v)return a;for(u=a.Ja(),_=0;_<p;_++)s[_]||u.Gd(a,_,_+1);return u},h.FV=function(a,s,o,u,p){var f=new c.Hh;a.dn(f);var m=new c.l;return s.A(m),f.$b(m),f.X(.1*f.S(),.1*f.da()),(m=new c.Ea).bd(f,!1),o==1736?m.add(s,!0):m.bd(s,!0),c.Zj.local().W(a,m,u,p)},h.instance=null,h}(c.Ge);c.mp=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o){this.vs=a==null,this.za=-1,this.Sd=h,this.Vz=s,this.rT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.mp.km(h,this.rT,this.Vz,this.Vb)):null;var h},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.kL=C}(q||(q={})),function(c){var C=function(){function h(a){this.od=a,this.Dj=new c.l,this.Dj.Pa(),this.qh=new c.l,this.qh.Pa()}return h.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},h.prototype.$P=function(a,s){if(this.od!=null&&!this.od.progress(-1,-1))throw c.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return c.ba.Ic(a.K())&&c.ba.Ic(s.K())?a.I()>s.I()?this.bE(a,s,o):(this.Pt(),a=this.bE(s,a,o),this.Pt(),a):a.K()==550&&c.ba.Ic(s.K())?(a=this.cE(s,a,o),this.Pt(),a):s.K()==550&&c.ba.Ic(a.K())?this.cE(a,s,o):a.K()==550&&s.K()==550?a.I()>s.I()?this.dE(a,s):(this.Pt(),a=this.dE(s,a),this.Pt(),a):0},h.prototype.bE=function(a,s,o){var u=a.Ha(),p=s.Ha(),f=new c.l,m=new c.l,v=17976931348623157e292;if(!o&&this.lY(a,s,u,p))return 0;for(;u.ab();)for(;u.Ia();)if((a=u.ia()).A(f),!(f.px(this.qh)>v)){for(;p.ab();)for(;p.Ia();)if((s=p.ia()).A(m),f.px(m)<v&&(s=a.ub(s,o),(s*=s)<v)){if(s==0)return 0;v=s}p.aj()}return Math.sqrt(v)},h.prototype.cE=function(a,s,o){var u=a.Ha(),p=new c.l,f=17976931348623157e292,m=new c.h,v=s.I();for(o=!o&&a.K()==1736;u.ab();)for(;u.Ia();){var _=u.ia();if(_.A(p),!(1<v&&p.px(this.qh)>f)){for(var M=0;M<v;M++){if(s.D(M,m),o&&c.jd.Zd(a,m,0)!=0)return 0;var T=_.ge(m,!1);if(m.sub(_.ic(T)),(T=m.Uk())<f){if(T==0)return 0;f=T}}o=!1}}return Math.sqrt(f)},h.prototype.dE=function(a,s){for(var o,u=17976931348623157e292,p=new c.h,f=new c.h,m=a.I(),v=s.I(),_=0;_<m;_++)if(a.D(_,p),!(1<v&&this.qh.dK(p)>u)){for(var M=0;M<v;M++)if(s.D(M,f),(o=c.h.zc(p,f))<u){if(o==0)return 0;u=o}}return Math.sqrt(u)},h.prototype.lY=function(a,s,o,u){if(a.K()==1736){for(;u.ab();)if(u.Ia()){var p=u.ia();if(c.jd.Zd(a,p.xc(),0)!=0)return!0}u.aj()}if(s.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),c.jd.Zd(s,a.xc(),0)!=0))return!0;o.aj()}return!1},h.prototype.im=function(a,s){return a.B()||s.B()?NaN:(a.A(this.Dj),s.A(this.qh),this.$P(a,s))},h}(),w=function(h){function a(){return h!==null&&h.apply(this,arguments)||this}return Et(a,h),a.prototype.W=function(s,o,u){if(s==null||o==null)throw c.i.O();if(s.B()||o.B())return NaN;var p=s.K(),f=o.K();if(p==33){if(f==33)return c.h.ub(s.D(),o.D());if(f==197)return u=new c.l,o.A(u),u.ub(s.D());(p=new c.ee).add(s),s=p}else if(p==197){if(f==197)return f=new c.l,s.A(f),u=new c.l,o.A(u),u.ub(f);(p=new c.Ea).bd(s,!1),s=p}return f==33?((f=new c.ee).add(o),o=f):f==197&&((f=new c.Ea).bd(o,!1),o=f),new C(u).im(s,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(c.Ge);c.lL=w}(q||(q={})),function(c){var C=function(){function w(h,a,s,o){this.uH=h,this.yH=a,this.od=o,this.VG=s}return w.prototype.next=function(){var h=this.uH.next();return h==null?null:this.uC(h)},w.prototype.Ma=function(){return this.uH.Ma()},w.prototype.uC=function(h){var a=h.K();if(c.ba.Tn(a))return h;if(a==197)return(a=new c.Ea(h.description)).bd(h,!1),this.uC(a);if(h.B())return h;if(h==null)throw c.i.Ra();a=h.Ja();for(var s=new c.zb,o=0,u=h.ea();o<u;o++)this.OK(h,o,a,s);return a},w.prototype.OK=function(h,a,s,o){if(!(2>h.Ka(a))){var u=h.Ca(a),p=h.Wc(a)-1,f=h.vb(0),m=h.ec(a),v=new c.ja(0);v.Jb(h.Ka(a)+1);var _=new c.ja(0);for(_.Jb(h.Ka(a)+1),v.add(m?u:p),v.add(u),u=new c.h;1<v.size;){var M=v.Gc();v.Jf();var T=v.Gc();h.D(M,u),o.Ec(u),h.D(T,u),o.Rc(u),0<=(T=this.NK(o,u,f,M,T,p))?(v.add(T),v.add(M)):_.add(M)}if(m||_.add(v.get(0)),_.size==v.size)s.addPath(h,a,!0);else if(2<=_.size&&(!this.VG||_.size!=2||!(m||c.h.ub(h.Oa(_.get(0)),h.Oa(_.get(1)))<=this.yH))){for(a=new c.Ta,o=0,p=_.size;o<p;o++)h.we(_.get(o),a),o==0?s.nf(a):s.lineTo(a);m&&(this.VG||_.size!=2||s.lineTo(a),s.Cp())}}},w.prototype.NK=function(h,a,s,o,u,p){var f=u-1;for(u<=o&&(f=p),p=u=-1,o+=1;o<=f;o++){s.uc(2*o,a);var m=a.x,v=a.y;h.ic(h.ge(a,!1),a),a.x-=m,a.y-=v,(m=a.length())>this.yH&&m>p&&(u=o,p=m)}return u},w.prototype.re=function(){},w}();c.mL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 29},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u).next()):new c.mL(a,s,o,u)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(c.Ge);c.zC=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 21},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p,f,m,v){return a instanceof c.ba?(v=new c.$c(a),this.W(v,s,o,[u],p,f,!1,m).next()):m===!0?(o=new c.BC(a,s,o,u,p,!1,!1,v),c.Ih.local().W(o,s,v)):new c.BC(a,s,o,u,p,!1,!1,v)},h.instance=null,h}(c.Ge);c.AC=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o,u,p,f,m){if(p)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=h,this.wg=a,this.Ae=s,this.Es=o,this.bo=u,this.ho=-1,this.Vb=m,this.oT=new c.l,this.oT.Pa()}return w.prototype.next=function(){for(var h;(h=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(h,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.VQ=function(h,a){return c.QK.buffer(h,this.wg,this.Ae,a,this.bo,this.Vb)},w.prototype.re=function(){},w}();c.BC=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 24},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o){if(s==null)throw c.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw c.i.Fe();var u=c.cb.tc(s),p=c.cb.xv(u),f=c.cb.gv(u);p*=2-p;var m=u.Id().ci,v=a.K();if(v==1736||v==197)var _=a.ng();else c.ba.zd(v)?(_=new c.Ua(a.description)).pc(a,!0):_=a;if(u.Nb(s)==0){if(c.cb.Xc(s)){_=c.Jh.nj(_,s),v==1607&&_==a&&(_=c.ba.kg(a)),a=new c.Oc,c.cb.ih(s).en(a),v=0;for(var M=_.I();v<M;v++){var T=_.Oa(v);T.x=c.Jh.an(T.x,a),_.Db(v,T)}}a=_.Ja(),_=c.Jh.RI(s,u,_,a)?a:c.cb.Bh(_,s,u)}return this.cQ(_,o,f,p,m)},h.prototype.cQ=function(a,s,o,u,p){var f=new c.ha(0),m=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var v=a.ia(),_=v.bc();v=v.xc(),_.scale(p),v.scale(p),c.kb.xd(o,u,_.x,_.y,v.x,v.y,f,null,null,s),m+=f.u}return m},h.instance=null,h}(c.Ge);c.qL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u,p).next()):new c.oL(a,o,u,s,-1,-1,p)},h.instance=null,h}(c.Ge);c.nL=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o,u,p){if(0<p||s!=4&&0<u)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=h,this.wg=a,this.Ae=s,this.yT=o,this.xT=u}return w.prototype.next=function(){for(var h;(h=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(h);return null},w.prototype.Ma=function(){return this.za},w.prototype.Uy=function(h){return c.ej.Sr(h,this.wg,this.Ae,this.yT,this.xT,this.Vb)},w.prototype.re=function(){},w}();c.oL=C}(q||(q={})),function(c){(function(C){C[C.Unknown=0]="Unknown",C[C.Contains=1]="Contains",C[C.Within=2]="Within",C[C.Equals=3]="Equals",C[C.Disjoint=4]="Disjoint",C[C.Touches=8]="Touches",C[C.Crosses=16]="Crosses",C[C.Overlaps=32]="Overlaps",C[C.NoThisRelation=64]="NoThisRelation",C[C.Intersects=1073741824]="Intersects",C[C.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(c.YK||(c.YK={})),c.rL=function(){function C(){}return C.iW=function(w,h){var a=w.K(),s=h.K();if(c.ba.zj(a)){var o=w.Cb;if(o!=null&&(o=o.Hk)!=null){if(s==33){var u=h.D();o=o.Uo(u.x,u.y)}else u=new c.l,h.A(u),o=o.To(u);if(o==1)return 1;if(o==0)return 4}}if(c.ba.zj(s)&&(o=h.Cb)!=null&&(o=o.Hk)!=null){if(a==33?(w=w.D(),o=o.Uo(w.x,w.y)):(h=new c.l,w.A(h),o=o.To(h)),o==1)return 2;if(o==0)return 4}return 0},C}()}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.K=function(){return 15},h.prototype.W=function(a,s,o,u,p){return a instanceof c.ba?(a=new c.$c(a),s=new c.$c(s),this.W(a,s,o,u,p===void 0?-1:p).next()):p===void 0?new c.CC(a,s,o,u,-1):new c.CC(a,s,o,u,p)},h.prototype.yn=function(a,s,o){this.Ku(a)&&(s=c.ua.mj(s,a,!1),a.hj(o)||a.nu(s,o))},h.prototype.Ku=function(a){return c.Mx.uE(a)},h.instance=null,h}(c.Ge);c.Zj=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o,u){if(this.vs=a==null,this.za=-1,this.Sd=h,this.wg=s,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=u,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw c.i.O("bad dimension mask")}return w.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var h=this.Bw.next();if(h!=null)return h;this.Bw=null}for(;(h=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?h=this.Fa(h):(this.Bw=this.KS(h),h=this.Bw.next()),h;return null},w.prototype.Ma=function(){return this.za},w.prototype.Fa=function(h){var a=this.uK(h);if(a!=null)return a;a=c.ua.ov(this.Pe,h);var s=c.ua.Xd(this.wg,a,!0);a=new c.l,this.Pe.A(a);var o=new c.l;return h.A(o),a.X(2*s,2*s),a.Fa(o),a.X(100*s,100*s),s=c.Vd.clip(this.Pe,a,0,0),h=c.Vd.clip(h,a,0,0),c.Hg.Cv(h,s,this.wg,this.Vb)},w.prototype.KI=function(h,a,s){var o=0;if(1&a)s[0]==null&&(s[0]=new c.ee(h)),o++;else for(var u=0;u<s.length-1;u++)s[u]=s[u+1];if(2&a)s[o]==null&&(s[o]=new c.Ua(h)),o++;else for(u=o;u<s.length-1;u++)s[u]=s[u+1];if(4&a)s[o]==null&&(s[o]=new c.Ea(h)),o++;else for(u=o;u<s.length-1;u++)s[u]=s[u+1];if(o!=3){for(h=[],u=0;u<o;u++)h[u]=s[u];return new c.$c(h)}return new c.$c(s)},w.prototype.KS=function(h){var a=this.uK(h);if(a!=null){var s=[null,null,null];return s[a.Eb()]=a,this.KI(h.description,this.Hi,s)}a=c.ua.ov(this.Pe,h),s=c.ua.Xd(this.wg,a,!0),a=new c.l,this.Pe.A(a),a.X(2*s,2*s);var o=new c.l;return h.A(o),a.Fa(o),a.X(100*s,100*s),s=c.Vd.clip(this.Pe,a,0,0),a=c.Vd.clip(h,a,0,0),s=c.Hg.Kz(a,s,this.wg,this.Vb),this.KI(h.description,this.Hi,s)},w.prototype.uK=function(h){var a=c.ua.ov(h,this.Pe),s=c.ua.Xd(this.wg,a,!0);a=h.K();var o=h.B(),u=this.Pe.B();if(!(u=o||u)){u=new c.l,h.A(u);var p=new c.l;this.Pe.A(p),p.X(2*s,2*s),u=!u.isIntersecting(p)}if(!u)if((p=c.rL.iW(this.Pe,h))==4)u=!0;else{if(2&p)return this.Pe;if(1&p)return h}if(u)return(s=c.ba.uf(a))<(u=c.ba.uf(this.Fj))?w.CB(h,o):s>u||s==0&&a==550&&this.Fj==33?this.iJ():w.CB(h,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return s=this.Pe,a=new c.l,h.A(a),o=new c.l,s.A(o),a.Fa(o),s=new c.Hh,h.copyTo(s),s.Zo(a),s;if(a==197&&c.ba.uf(this.Fj)==0||this.Fj==197&&c.ba.uf(a)==0)return o=a==197?h:this.Pe,h=a==197?this.Pe:h,a=new c.l,o.A(a),c.Vd.clip(h,a,s,0);if(c.ba.uf(a)==0&&0<c.ba.uf(this.Fj)||0<c.ba.uf(a)&&c.ba.uf(this.Fj)==0){if(s=c.ua.mj(this.wg,h,!1),a==550||a==33)return c.Hg.uG(h,this.Pe,s);if(this.Fj==550||this.Fj==33)return c.Hg.uG(this.Pe,h,s);throw c.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.rK(this.Pe,h):this.rK(h,this.Pe)},w.prototype.rK=function(h,a){var s=h,o=a,u=c.ua.mj(this.wg,a,!1),p=new c.l;o.A(p);var f=new c.l;s.A(f),f.X(2*u,2*u),p.Fa(f),p.X(10*u,10*u),s=h=c.Vd.clip(h,p,0,0),f=new c.ja(0);var m=-1,v=o.Cb;if(v!=null){var _=v.Hk;if(_!=null){m=0,f.Jb(s.I()+s.ea());for(var M=new c.l,T=s.Ha();T.ab();)for(;T.Ia();){T.ia().A(M);var A=_.To(M);A==1?f.add(1):A==0?f.add(0):(f.add(-1),m++)}}}if(5<a.I()&&(v=(o=a=c.Vd.clip(a,p,0,0)).Cb),0>m&&(m=s.sz()),p=s.I()+o.I(),m*o.I()>Math.log(p)*p*4)return null;p=null,m=o.Ha(),v!=null&&v.Gb!=null&&(p=v.Gb),p==null&&20<o.I()&&(p=c.ua.iE(o)),h=h.Ja(),o=null,v=s.Ha(),_=[0,0,0,0,0,0,0,0,0],M=new c.ce(0),T=new c.jg,A=-1;for(var O=0,R=0,j=0<f.size,z=-1;v.ab();){z=v.gb;var V=0;for(A=-1,O=0;v.Ia();){var F=j?c.P.truncate(f.get(R)):-1;R++;var G=v.ia();if(0>F){if(p!=null)for(o==null?o=p.qR(G,u):o.Wo(G,u),F=o.next();F!=-1;F=o.next()){m.Wb(p.ka(F)),F=m.ia();var Z=G.Fa(F,null,_,null,u);for(F=0;F<Z;F++)M.add(_[F])}else for(m.aj();m.ab();)for(;m.Ia();)for(F=m.ia(),Z=G.Fa(F,null,_,null,u),F=0;F<Z;F++)M.add(_[F]);if(0<M.size){M.Wd(0,M.size,function(ye,pe){return ye-pe});var K=0;M.add(1),Z=-1,F=0;for(var re=M.size;F<re;F++){var te=M.get(F);if(te!=K){var ue=!1;if(K!=0||te!=1?(G.dh(K,te,T),K=T.get()):(K=G,ue=!0),2<=V){if(h.Fr(s,z,A,O,V==3),this.LD(a,K.bc(),u)!=1&&this.MD(a,K,u)!=1)return null;h.pc(K,!1),V=1,O=0}else switch(Z=this.MD(a,K,u),Z){case 1:ue?2>V?(A=v.xb()-s.Ca(z),O=1,V=V==0?3:2):O++:(h.pc(K,V==0),V=1);break;case 0:V=0,A=-1,O=0;break;default:return null}K=te}}}else{if(0>(F=this.LD(a,G.bc(),u)))return null;F==1?(2>V&&(A=v.xb()-s.Ca(z),V=V==0?3:2),O++):(A=-1,O=0)}M.clear(!1)}else F!=0&&F==1&&(V==0?(V=3,A=v.xb()-s.Ca(z)):V==1?(V=2,A=v.xb()-s.Ca(z)):O++)}2<=V&&(h.Fr(s,z,A,O,V==3),A=-1)}return h},w.prototype.LD=function(h,a,s){return c.Fg.ym(h,a,s)},w.prototype.MD=function(h,a,s){var o=a.bc();a=a.xc();var u=c.Fg.ym(h,o,s),p=c.Fg.ym(h,a,s);return u==1&&p==0||u==0&&p==1?-1:u==0||p==0?0:u==1||p==1?1:((u=new c.h).add(o,a),u.scale(.5),(h=c.Fg.ym(h,u,s))==0?0:h==1?1:-1)},w.CB=function(h,a){return a?h:h.Ja()},w.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},w.prototype.re=function(){},w}();c.CC=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 28},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p,f,m){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u,p,f,m).next()):new c.sL(a,s,o,u,p,f,m)},h.instance=null,h}(c.Ge);c.DC=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o,u,p,f){this.za=-1,this.Sd=h,this.Oj=a,this.La=s,this.Mi=o,this.xA=u,this.pH=p,this.od=f}return w.prototype.next=function(){var h=this.Sd.next();return h!=null?(this.za=this.Sd.Ma(),this.eL(h)):null},w.prototype.Ma=function(){return this.za},w.prototype.eL=function(h){var a=0>=this.pH?c.ua.mj(this.Oj,h,!1):this.pH;return c.DK.W(h,this.La,this.Mi,this.xA,a,this.od)},w.prototype.re=function(){},w}();c.sL=C}(q||(q={})),function(c){var C;(C=c.IK||(c.IK={}))[C.clipToDomainOnly=1]="clipToDomainOnly",C[C.clipWithHorizon=2]="clipWithHorizon",C[C.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(h){function a(){return h!==null&&h.apply(this,arguments)||this}return Et(a,h),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(s,o,u){return s instanceof c.ba?(s=new c.$c(s),this.W(s,o,u).next()):new c.tL(s,o,u)},a.prototype.transform=function(s,o,u,p){return c.du.transform(s,o,u,p,!0)},a.prototype.St=function(s,o,u,p){return c.du.St(s,o,u,p)},a.instance=null,a}(c.Ge);c.Gx=w}(q||(q={})),function(c){var C=function(){function w(h,a,s){this.za=-1,this.Sd=h,this.HT=a,this.od=s}return w.prototype.next=function(){var h=this.Sd.next();return h!=null?(this.za=this.Sd.Ma(),c.du.Bh(h,this.HT,this.od)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.tL=C}(q||(q={})),function(c){var C=function(){function h(){}return h.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},h.prototype.vQ=function(a,s,o){for(a.Wb(s,o);a.Ia();){var u=a.ia();if((u=u.Rb())!=0)return a.xb()}for(a.Wb(s,o);a.zz();)if((u=(u=a.ni()).Rb())!=0)return a.xb();return-1},h.prototype.wQ=function(a,s){for(a.Wb(s,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},h.prototype.uQ=function(a,s){for(a.Wb(s,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},h.prototype.tQ=function(a,s,o,u){if(this.zk=this.vQ(s,o,u),this.zk!=-1){s.Wb(this.zk,-1);var p=s.ia(),f=p.ic(p.ge(a,!1));if(o=c.h.zc(f,a),(u=new c.h).N(f),u.sub(p.bc()),(f=new c.h).N(a),f.sub(p.bc()),this.mq=0>u.yi(f),this.rh=this.uQ(s,this.zk),this.rh!=-1){s.Wb(this.rh,-1);var m=(p=s.ia()).ge(a,!1);m=p.ic(m);var v=c.h.zc(m,a);v>o?this.rh=-1:(u.N(m),u.sub(p.bc()),f.N(a),f.sub(p.bc()),this.ws=0>u.yi(f))}this.rh==-1&&(this.rh=this.wQ(s,this.zk),this.rh!=-1&&(s.Wb(this.rh,-1),m=(p=s.ia()).ge(a,!1),m=p.ic(m),(v=c.h.zc(m,a))>o?this.rh=-1:(u.N(m),u.sub(p.bc()),f.N(a),f.sub(p.bc()),this.ws=0>u.yi(f),a=this.zk,this.zk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},h.prototype.YN=function(a,s,o,u,p){return o=o.Ha(),this.tQ(a,o,u,p),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.zk,-1),a=o.ia().lg(),o.Wb(this.rh,-1),s=o.ia().lg(),0<=a.yi(s)):s},h}(),w=function(h){function a(){return h!==null&&h.apply(this,arguments)||this}return Et(a,h),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(s,o,u){var p;if(p===void 0&&(p=!1),s.B())return new c.bm;o=o.D();var f=s,m=s.K();switch(m==197&&((f=new c.Ea).bd(s,!1),m=1736),m){case 33:return this.sI(f,o);case 550:return this.eI(f,o);case 1607:case 1736:return this.XT(f,o,u,p);default:throw c.i.ga("not implemented")}},a.prototype.jz=function(s,o){if(s.B())return new c.bm;o=o.D();var u=s,p=s.K();switch(p==197&&((u=new c.Ea).bd(s,!1),p=1736),p){case 33:return this.sI(u,o);case 550:case 1607:case 1736:return this.eI(u,o);default:throw c.i.ga("not implemented")}},a.prototype.kz=function(s,o,u,p){if(0>p)throw c.i.O();if(s.B())return[];o=o.D();var f=s,m=s.K();switch(m==197&&((f=new c.Ea).bd(s,!1),m=1736),m){case 33:return this.OU(f,o,u,p);case 550:case 1607:case 1736:return this.oU(f,o,u,p);default:throw c.i.ga("not implemented")}},a.prototype.XT=function(s,o,u,p){if(s.K()==1736&&u&&(u=new c.l,s.A(u),u=c.ua.Xd(null,u,!1),(p?c.jd.Zd(s,o,0):c.jd.Zd(s,o,u))!=0)){var f=new c.bm(o,0,0);return p&&f.RJ(!0),f}var m=s.Ha();f=new c.h;for(var v=u=-1,_=17976931348623157e292,M=0;m.ab();)for(;m.Ia();){var T=m.ia();T=T.ic(T.ge(o,!1));var A=c.h.zc(T,o);A<_?(M=1,f=T,u=m.xb(),v=m.gb,_=A):A==_&&M++}return f=new c.bm(f,u,Math.sqrt(_)),p&&(m.Wb(u,v),T=m.ia(),p=0>c.h.Wq(o,T.bc(),T.xc()),1<M&&((M=new C).reset(),p=M.YN(o,p,s,u,v)),f.RJ(p)),f},a.prototype.sI=function(s,o){return s=s.D(),o=c.h.ub(s,o),new c.bm(s,0,o)},a.prototype.eI=function(s,o){for(var u=s.vb(0),p=s.I(),f=s=0,m=0,v=17976931348623157e292,_=0;_<p;_++){var M=new c.h;u.uc(2*_,M);var T=c.h.zc(M,o);T<v&&(f=M.x,m=M.y,s=_,v=T)}return(o=new c.bm).by(f,m,s,Math.sqrt(v)),o},a.prototype.OU=function(s,o,u,p){return p==0?[]:(u*=u,s=s.D(),(o=c.h.zc(s,o))<=u?(u=[],(p=new c.bm).by(s.x,s.y,0,Math.sqrt(o)),u[0]=p):u=[],u)},a.prototype.oU=function(s,o,u,p){if(p==0)return[];var f=s.vb(0),m=s.I();s=[],u*=u;for(var v=0;v<m;v++){var _=f.read(2*v),M=f.read(2*v+1),T=o.x-_,A=o.y-M;(T=T*T+A*A)<=u&&((A=new c.bm).by(_,M,v,Math.sqrt(T)),s.push(A))}return o=s.length,s.sort(function(O,R){return O.La<R.La?-1:O.La==R.La?0:1}),p>=o||(s.length=p),s.slice(0)},a.instance=null,a}(c.Ge);c.Hx=w}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 4},h.prototype.W=function(a,s,o,u,p){return c.cm.tB(a,s,o,u,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Ku=function(a){return c.Xt.ry(a)},h.prototype.yn=function(a,s,o){c.Xt.xD(a,s,o)},h.instance=null,h}(c.Ge);c.uL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 33},h.prototype.W=function(a,s,o,u,p){return a===1073741824?!c.vd.uB(s,o,u,4,p):c.vd.uB(s,o,u,a,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Ku=function(a){return c.Xt.ry(a)},h.prototype.yn=function(a,s,o){c.Xt.xD(a,s,o)},h.instance=null,h}(c.Ge);c.fj=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o){if(this.od=o,this.lT=s,this.za=-1,h==null)throw c.i.O();this.Ak=h,this.Oj=a}return w.prototype.next=function(){var h;if((h=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw c.i.hu("user_canceled");return this.$B(h)}return null},w.prototype.Ma=function(){return this.za},w.prototype.$B=function(h){if(h==null)throw c.i.O();return c.Ix.YJ(h,this.Oj,this.lT,this.od)},w.prototype.re=function(){},w}();c.vL=C}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 26},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u).next()):new c.vL(a,s,o,u)},h.prototype.ts=function(a,s,o,u,p){return 0<(u!==void 0?c.Ix.ts(a,s,o,u,p):c.Ix.ts(a,s,!1,null,o))},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(c.Ge);c.$l=C}(q||(q={})),function(c){var C=function(){function p(){this.Aq=0}return p.prototype.iX=function(f){this.Aq&=-2,this.Aq|=f?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.SF=function(){return this.Yp()?0:1},p}();c.tY=C;var w=function(){},h=function(p,f,m,v){this.x=p,this.y=f,this.Ci=m,this.zm=v},a=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,m,v){return f=f.ka(v),m=this.Ce.lf.read(2*m),0>(m-=f=this.Ce.lf.read(2*f))?-1:0<m?1:0},p}(),s=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,m,v){m=this.Ce.hb[m],f=this.Ce.hb[f.ka(v)];var _=m.Yp(),M=f.Yp();v=m.oe.Me(this.Ce.Oo,0);var T=f.oe.Me(this.Ce.Oo,0);return v==T&&((_=.5*((v=Math.min(_?m.oe.oa:m.oe.ma,M?f.oe.oa:f.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(_=v),v=m.oe.Me(_,0),T=f.oe.Me(_,0)),v<T?-1:v>T?1:0},p}(),o=function(){function p(f,m){this.TI=new c.h,this.parent=f,this.ZR=m}return p.prototype.qr=function(f,m,v){var _=this.parent,M=this.ZR;v.Wd(f,m,function(T,A){return _.Oh(T,A,M)})},p.prototype.bq=function(f){return f=this.parent.ii.get(f),this.parent.lf.uc(2*(f>>1),this.TI),this.TI.y+(1&f?this.parent.Qj:-this.parent.Qj)},p}(),u=function(){function p(f,m,v,_,M){this.iH=f.description,this.Y=f,this.Sg=m,this.Qj=c.ua.mj(this.Sg,f,!1),this.Do=c.ua.mj(this.Sg,f,!0),this.sA=v,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new c.lp,this.fb=new c.$j,this.le=new c.Nd,this.UG=this.sl=M}return p.prototype.$S=function(){return this.UG=!0,(!c.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?c.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},p.prototype.fC=function(f,m){var v=this.lf.read(2*f);f=this.lf.read(2*f+1);var _=this.lf.read(2*m);m=this.lf.read(2*m+1);var M=!c.$t.Ev(v,f,_,m,this.Qj*this.Qj);return M||this.Y.Eb()!=0&&v==_&&f==m},p.prototype.BE=function(){for(var f=this.Y,m=f.yf?3:2,v=0,_=f.ea();v<_;v++)if(f.Ka(v)<m)return this.le=new c.Nd(1,v,0),!1;return!0},p.prototype.yE=function(f){var m=this.Y,v=m.Ha(),_=m.hasAttribute(1);for(m=_?c.ua.rE(this.Sg,m,!1):0;v.ab();)for(;v.Ia();){var M=v.ia();if(!(M.Rb()>this.Qj)){if(f&&_){var T=M.yv(1,0);if(M=M.yv(1,0),Math.abs(M-T)>m)continue}return this.le=new c.Nd(2,v.xb(),-1),!1}}return!0},p.prototype.hO=function(){var f=this.Y,m=null;c.ba.Ic(this.Y.K())&&(m=this.Y);var v=(this.UG||this.sl)&&m!=null,_=f.I();this.lf=f.vb(0),this.ii=new c.ja(0),this.ii.Jb(2*_),this.hi=new c.ja(0),this.hi.Jb(2*_),v&&(this.Hl==null&&(this.Hl=new c.ja(0)),this.Hl.Jb(_));for(var M=f=0;M<_;M++)if(this.ii.add(2*M),this.ii.add(2*M+1),this.hi.add(2*M),this.hi.add(2*M+1),v){for(;M>=m.Wc(f);)f++;this.Hl.add(f)}for(new c.Zt().sort(this.hi,0,2*_,new o(this,v)),this.fb.clear(),this.fb.Xo(new a(this)),this.fb.Ee(_),m=0,_*=2;m<_;m++)if(v=this.hi.get(m),v=(f=this.ii.get(v))>>1,(1&f)==0){if(f=this.fb.addElement(v,-1),(M=this.fb.xe(f))!=-1&&!this.fC(this.fb.ka(M),v))return this.le=new c.Nd(3,v,this.fb.ka(M)),!1;var T=this.fb.lb(f);if(T!=-1&&!this.fC(this.fb.ka(T),v))return this.le=new c.Nd(3,v,this.fb.ka(T)),!1}else if(f=this.fb.search(v,-1),M=this.fb.xe(f),T=this.fb.lb(f),this.fb.wd(f,-1),M!=-1&&T!=-1&&!this.fC(this.fb.ka(M),this.fb.ka(T)))return this.le=new c.Nd(3,this.fb.ka(M),this.fb.ka(T)),!1;return!0},p.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},p.prototype.jO=function(){var f=new c.hd;f.Ib(this.Y);var m=new c.Nd;return!c.bu.fI(!1,f,this.Qj,m,this.od)||(m.Lo=f.Va(m.Lo),m.Mo=f.Va(m.Mo),this.le.Yt(m),!1)},p.prototype.iO=function(){var f=this.Y,m=f.Ha();for(f=f.Ha();m.ab();)for(;m.Ia();){var v=m.ia();if(!m.Sn()||!m.VS()){f.wW(m);do for(;f.Ia();){var _=f.ia();if((_=v.Br(_,this.Qj,!0))!=0)return this.le=new c.Nd(_==2?5:4,m.xb(),f.xb()),!1}while(f.ab())}}return!0},p.prototype.nO=function(){var f=this.Y;this.hb.length=0,this.ro.length=0,this.ag=f.Ha(),this.ag.EB();var m=new c.ja(0);m.Jb(10);var v=NaN,_=0,M=0;for(f=2*f.I();M<f;M++){var T=this.hi.get(M);if(!(1&(T=this.ii.get(T)))){T>>=1;var A=this.lf.read(2*T),O=this.lf.read(2*T+1);if(m.size!=0&&(A!=v||O!=_)){if(!this.LI(m))return!1;m!=null&&m.clear(!1)}m.add(T),v=A,_=O}}return!!this.LI(m)},p.prototype.mO=function(){for(var f=this.Y,m=Array(f.ea()),v=0,_=f.ea();v<_;v++)m[v]=f.Pn(v);_=new w;var M=new c.h;v=this.hi.get(0);var T=(v=this.ii.get(v))>>1;this.lf.uc(2*T,M);var A=m[v=this.Hl.get(T)],O=f.Ca(v),R=f.Wc(v)-1;_.gl=T==O||T==R,_.jy=this.sl?!A&&_.gl:_.gl,_.Ci=v,_.x=M.x,_.y=M.y,_.zm=T;for(var j=new w,z=1,V=this.hi.size;z<V;z++)if(v=this.hi.get(z),(1&(v=this.ii.get(v)))==0){T=v>>1,this.lf.uc(2*T,M),(v=this.Hl.get(T))!=_.Ci&&(A=m[v],O=f.Ca(v),R=f.Wc(v)-1);var F=T==O||T==R,G=this.sl?!A&&_.gl:_.gl;if(j.x=M.x,j.y=M.y,j.Ci=v,j.zm=T,j.jy=G,j.gl=F,j.x==_.x&&j.y==_.y){if(this.sl){if(!(j.jy&&_.jy||j.Ci==_.Ci&&(j.gl||_.gl)))return this.le=new c.Nd(8,j.zm,_.zm),!1}else if(!j.gl||!_.gl)return this.le=new c.Nd(5,j.zm,_.zm),!1}v=_,_=j,j=v}return!0},p.prototype.EE=function(){for(var f=this.Y,m=[],v=-1,_=!1,M=0,T=f.ea();M<T;M++)f.Gv(M)&&(_=!1,v++,M<T-1&&(f.Gv(M+1)||(_=!0))),m[M]=_?v:-1;_=new c.h,M=this.hi.get(0);var A=(M=this.ii.get(M))>>1;this.lf.uc(2*A,_),M=this.Hl.get(A),v=new h(_.x,_.y,M,A,m[M]),f=[];var O=1;for(T=this.hi.size;O<T;O++)if(M=this.hi.get(O),(1&(M=this.ii.get(M)))==0){if(A=M>>1,this.lf.uc(2*A,_),M=this.Hl.get(A),(M=new h(_.x,_.y,M,A,m[M])).x==v.x&&M.y==v.y){if(M.Ci==v.Ci)return this.le=new c.Nd(9,M.zm,v.zm),!1;0<=m[M.Ci]&&m[M.Ci]==m[v.Ci]&&(f.length!=0&&f[f.length-1]==v||f.push(v),f.push(M))}v=M}if(f.length==0)return!0;for(M=new c.lp(!0),c.P.bv(m,-1),_=-1,(O=new c.h).Sc(),v=0,T=f.length;v<T;v++){(A=f[v]).x==O.x&&A.y==O.y||(_=M.Rh(0),O.x=A.x,O.y=A.y);var R=m[A.Ci];R==-1&&(R=M.Rh(2),m[A.Ci]=R),M.addElement(R,_),M.addElement(_,R)}for((T=new c.ja(0)).Jb(10),v=M.ke;v!=-1;v=M.lz(v))if(!(1&(f=M.KF(v)))&&2&f){for(f=-1,T.add(v),T.add(-1);0<T.size;){if(_=T.Gc(),T.Jf(),O=T.Gc(),T.Jf(),(1&(A=M.KF(O)))!=0){f=2&A?O:_;break}for(M.aX(O,1|A),A=M.sc(O);A!=-1;A=M.lb(A))(R=M.getData(A))!=_&&(T.add(R),T.add(O))}if(f!=-1){for(M=-1,v=0,T=m.length;v<T;v++)if(m[v]==f){M=v;break}return this.le=new c.Nd(10,M,-1),!1}}return!0},p.prototype.oO=function(){var f=this.Y;if(0>=f.He())return this.le=new c.Nd(6,f.ea()==1?1:-1,-1),0;if(f.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=c.ja.rf(f.ea(),0),this.EA=c.ja.rf(f.ea(),-1);for(var m=-1,v=0,_=0,M=f.ea();_<M;_++){var T=f.Kr(_);if(this.vo.write(_,0>T?0:256),0<T)m=_,v=T;else{if(T==0)return this.le=new c.Nd(6,_,-1),0;if((0>m||v<Math.abs(T))&&(this.le=new c.Nd(7,_,-1),this.sl))return 0;this.EA.write(_,m)}}for(this.et=f.ea(),this.Qm=new c.ja(0),this.Qm.Jb(10),M=f.I(),this.Oo=NaN,(f=new c.ja(0)).Jb(10),this.Sq=c.ja.rf(M,-1),this.Jw=c.ja.rf(M,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new c.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new s(this)),m=0,M*=2;0<this.et&&m<M;m++)if(v=this.hi.get(m),(1&(v=this.ii.get(v)))==0){if(v>>=1,(_=this.lf.read(2*v+1))!=this.Oo&&f.size!=0){if(!this.vt(f))return 0;f!=null&&f.clear(!1)}f.add(v),this.Oo=_}return 0<this.et&&!this.vt(f)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},p.prototype.LI=function(f){if(f.size==1)return!0;for(var m=0,v=f.size;m<v;m++){var _=f.get(m);this.ag.Wb(_);var M=this.ag.ni();this.hb.push(this.Uu(M,_,this.ag.gb,!0)),this.ag.ia(),M=this.ag.ia(),this.hb.push(this.Uu(M,_,this.ag.gb,!1))}var T=this;for(this.hb.sort(function(R,j){return T.SP(R,j)}),(_=this.oh.ke)==-1&&(_=this.oh.Rh(0)),this.oh.hn(this.hb.length),m=0,v=this.hb.length;m<v;m++)this.oh.addElement(_,m);m=!0;for(var A=v=-1;m&&(m=!1,(M=this.oh.sc(_))!=-1);)for(var O=this.oh.lb(M);O!=-1;)if(v=this.oh.getData(M),A=this.oh.getData(O),(v=this.hb[v].Ko)!=(A=this.hb[A].Ko))M=O,O=this.oh.lb(M);else if(m=!0,this.oh.kd(_,M),M=this.oh.xe(O),(O=this.oh.kd(_,O))==-1||M==-1)break;if(m=this.oh.ds(_),this.oh.GE(_),0<m)return this.le=new c.Nd(5,v,A),!1;for(m=0,v=f.size;m<v;m++)this.qB(this.hb[m]);return this.hb.length=0,!0},p.prototype.vt=function(f){for(var m=0,v=f.size;m<v;m++){var _=f.get(m),M=this.Sq.read(_);if(M!=-1){var T=this.fb.ka(M);this.Bj.add(T),this.fb.wd(M,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Sq.write(_,-1)}(M=this.Jw.read(_))!=-1&&(T=this.fb.ka(M),this.Bj.add(T),this.fb.wd(M,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Jw.write(_,-1))}for(m=0,v=f.size;m<v;m++){if(_=f.get(m),this.ag.Wb(_),(M=this.ag.ni()).oa>M.ma){var A=this.ag.xb(),O=this.Uu(M,_,this.ag.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),M=this.fb.addElement(T,-1),this.Sq.read(A)==-1?this.Sq.write(A,M):this.Jw.write(A,M),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(M)}this.ag.ia(),(M=this.ag.ia()).oa<M.ma&&(A=this.ag.kk(),O=this.Uu(M,_,this.ag.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),M=this.fb.addElement(T,-1),this.Sq.read(A)==-1?this.Sq.write(A,M):this.Jw.write(A,M),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(M))}for(m=0,v=this.Qm.size;m<v&&0<this.et;m++)if(M=this.Qm.get(m),(3&this.vo.read(this.hb[this.fb.ka(M)].DA))==0){f=-1,_=this.fb.xe(M);var R=M;O=null,T=-1;for(var j=0;_!=-1&&(T=this.fb.ka(_),T=(O=this.hb[T]).DA,(3&(j=this.vo.read(T)))==0);)R=_,_=this.fb.xe(_);_==-1?(A=1,_=R):(f=(3&j)==1?T:this.EA.read(T),A=O.SF()!=0?0:1,_=this.fb.lb(_));do{if(T=this.fb.ka(_),T=(O=this.hb[T]).DA,(3&(R=this.vo.read(T)))==0){if(A!=O.SF())return this.le=new c.Nd(6,T,-1),!1;if(R=252&R|(j=A==0||O.Yp()?2:1),this.vo.write(T,j),j==2&&this.le.Lj==0&&this.EA.read(T)!=f&&(this.le=new c.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&R)==1&&(f=T),R=_,_=this.fb.lb(_),A=A!=0?0:1}while(R!=M)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new c.ja(0),!0},p.prototype.Uu=function(f,m,v,_){if(f.K()!=322)throw c.i.Ra();return(f=this.nP(f)).Ko=m,f.DA=v,f.Aq=0,f.iX(_),f},p.prototype.nP=function(f){if(0<this.ro.length){var m=this.ro[this.ro.length-1];--this.ro.length,f.copyTo(m.oe)}else(m=new C).oe=c.NC.kg(f);return m},p.prototype.qB=function(f){f.oe.K()==322&&this.ro.push(f)},p.prototype.fU=function(){for(var f=this.Y.I(),m=new c.ja(0),v=0;v<f;v++)m.add(v);var _=this;for(m.Wd(0,f,function(M,T){return _.Qu(M,T)}),v=1;v<f;v++)if(this.Qu(m.get(v-1),m.get(v))==0)return this.le=new c.Nd(3,m.get(v-1),m.get(v)),0;return 2},p.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},p.prototype.jV=function(){return this.$S()},p.prototype.kU=function(){for(var f=this.Y.I(),m=new c.ja(0),v=0;v<f;v++)m.add(v);var _=this;m.Wd(0,f,function(R,j){return _.KO(R,j)});var M=Array(f);for(c.P.bv(M,!1),M[m.get(0)]=!0,v=1;v<f;v++){var T=m.get(v-1),A=m.get(v);this.Qu(T,A)==0?M[A]=!1:M[A]=!0}m=this.Y.Ja(),T=this.Y,A=0;var O=1;for(v=0;v<f;v++)M[v]?O=v+1:(A<O&&m.Gd(T,A,O),A=v+1);return A<O&&m.Gd(T,A,O),m.Eh(2,this.Do),m},p.prototype.IV=function(){var f=this.Y,m=f.Ha(),v=f.Ha(),_=this.Y.Ja(),M=this.Y,T=f.hasAttribute(1),A=T?c.ua.rE(this.Sg,f,!0):0,O=new c.ja(0),R=new c.ja(0);for(O.Jb(c.P.truncate(f.I()/2+1)),R.Jb(c.P.truncate(f.I()/2+1));m.ab();)if(v.ab(),!(2>f.Ka(m.gb))){v.yW();for(var j,z,V=!0;m.Ia();){var F=m.ia(),G=v.ni();if(m.xb()>v.xb())break;V&&(O.add(m.xb()),R.add(v.kk()),V=!1),z=O.Gc();var Z=m.kk();if(1<Z-z){var K=new c.h;K.vc(f.Oa(z),f.Oa(Z)),j=K.length()}else j=F.Rb();z=R.Gc(),1<(Z=v.xb())-z?((K=new c.h).vc(f.Oa(z),f.Oa(Z)),z=K.length()):z=G.Rb(),j>this.Do?O.add(m.kk()):T&&(j=f.Vc(1,O.Gc(),0),F=F.jv(1,0),Math.abs(F-j)>A&&O.add(m.kk())),z>this.Do?R.add(v.xb()):T&&(j=f.Vc(1,R.Gc(),0),F=G.jv(1,0),Math.abs(F-j)>A&&R.add(v.xb()))}if(O.Gc()<R.Gc()?O.size>R.size?O.Jf():R.Jf():(O.Gc()!=R.Gc()&&R.Jf(),R.Jf()),2<=R.size+O.size){for(V=new c.Ta,G=0,F=O.size;G<F;G++)M.we(O.get(G),V),G==0?_.nf(V):_.lineTo(V);for(G=R.size-1;0<G;G--)M.we(R.get(G),V),_.lineTo(V);M.ec(m.gb)?_.Cp():0<R.size&&(M.we(R.get(0),V),_.lineTo(V))}O!=null&&O.clear(!1),R!=null&&R.clear(!1)}return _.Eh(2,this.Do),_},p.prototype.mV=function(){return this.zX()},p.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?c.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new c.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&c.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&c.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},p.ts=function(f,m,v,_,M){if(_!=null&&(_.Lj=0,_.Lo=-1,_.Mo=-1),f.B())return 1;var T=f.K();if(T==33)return 1;var A=c.ua.mj(m,f,!1);if(T==197)return m=new c.l,f.A(m),m.Di(A)?(_!=null&&(_.Lj=2,_.Lo=-1,_.Mo=-1),0):1;if(c.ba.zd(T))return(A=new c.Ua(f.description)).pc(f,!0),p.ts(A,m,v,_,M);var O=f.qm(A);if((v=v?-1:O)!=-1)return v;if(m=new p(f,m,v,M,!1),T==550)v=m.fU();else if(T==1607)v=m.EV();else{if(T!=1736)throw c.i.Ra();v=m.jV()}return f.Eh(v,A),_!=null&&v==0&&_.Yt(m.le),v},p.YJ=function(f,m,v,_){if(f.B())return f;var M=f.K();if(M==33)return f;var T=c.ua.mj(m,f,!1);if(M==197)return m=new c.l,f.A(m),m.Di(T)?f.Ja():f;if(c.ba.zd(M))return(M=new c.Ua(f.description)).pc(f,!0),p.YJ(M,m,v,_);if(T=f.qm(T),(v=v?-1:T)==2)return f;if(f=new p(f,m,v,_,!1),M==550)f=f.kU();else if(M==1607)f=f.IV();else{if(M!=1736)throw c.i.Ra();f=f.mV()}return f},p.prototype.Oh=function(f,m,v){if(f==m)return 0;f=this.ii.get(f);var _=this.ii.get(m);m=f>>1;var M=_>>1,T=new c.h,A=new c.h;return this.lf.uc(2*m,T),T.y+=1&f?this.Qj:-this.Qj,this.lf.uc(2*M,A),A.y+=1&_?this.Qj:-this.Qj,(f=T.compare(A))==0&&v?0>(v=this.Hl.get(m)-this.Hl.get(M))?-1:0<v?1:0:f},p.prototype.Qu=function(f,m){if(f==m)return 0;var v=this.Y,_=v.Oa(f),M=v.Oa(m);if(_.x<M.x)return-1;if(_.x>M.x)return 1;if(_.y<M.y)return-1;if(_.y>M.y)return 1;for(_=1;_<this.jT;_++){M=this.iH.ld(_);for(var T=c.sa.Wa(M),A=0;A<T;A++){var O=v.Vc(M,f,A),R=v.Vc(M,m,A);if(O<R)return-1;if(O>R)return 1}}return 0},p.prototype.KO=function(f,m){var v=this.Qu(f,m);return v==0?f<m?-1:1:v},p.prototype.SP=function(f,m){if(f===m)return 0;var v=f.oe.lg();f.Yp()&&v.Uq(),f=m.oe.lg(),m.Yp()&&f.Uq(),m=v.su();var _=f.su();return _==m?(m=v.yi(f),Math.abs(m)<=8881784197001252e-31*(Math.abs(f.x*v.y)+Math.abs(f.y*v.x))&&(m--,m++),0>m?1:0<m?-1:0):m<_?-1:1},p}();c.Ix=u}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 30},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),s=new c.$c(s),this.W(a,s,o,u).next()):new c.wL(a,s,o,u)},h.gp=function(a,s,o,u){var p=a.Eb(),f=s.Eb();if(a.B()&&s.B())return p>f?a:s;if(a.B())return s;if(s.B())return a;var m=new c.l,v=new c.l,_=new c.l;return a.A(m),s.A(v),_.L(m),_.$b(v),m=c.ua.Xd(o,_,!0),v=a.K(),_=s.K(),v==33&&_==33?h.WU(a,s,m):v!=_?0<p||0<f?p>f?a:s:v==550?h.dI(a,s,m):h.dI(s,a,m):c.Hg.gp(a,s,o,u)},h.WU=function(a,s,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D(),p=s.D(),f=new c.ee(a.description);return c.h.zc(u,p)>o&&(f.add(a),f.add(s)),f},h.dI=function(a,s,o){var u=a.vb(0),p=a.I(),f=s.D(),m=a.Ja();o=o*Math.sqrt(2)*1.00001;var v=new c.l;if(a.A(v),v.X(o,o),v.contains(f)){o*=o,v=!1;for(var _=[],M=0;M<p;M++)_[M]=!1;for(M=0;M<p;M++){var T=u.read(2*M),A=u.read(2*M+1);(T-=f.x)*T+(A-=f.y)*A<=o&&(v=!0,_[M]=!0)}if(v)for(M=0;M<p;M++)_[M]||m.Gd(a,M,M+1);else m.Gd(a,0,p),m.add(s)}else m.Gd(a,0,p),m.add(s);return m},h.instance=null,h}(c.Ge);c.Jx=C}(q||(q={})),function(c){var C=function(){function w(h,a,s,o){this.vs=a==null,this.za=-1,this.Sd=h,this.wg=s,this.IT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.Jx.gp(h,this.IT,this.wg,this.Vb)):null;var h},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.wL=C}(q||(q={})),function(c){var C=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},a}(),w=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.kN=function(s){this.Ir+=s.zx,this.rj.push(s)},a.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(s){return s===this},a}(),h=function(){function a(s,o,u){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=s,this.wg=o,this.Vb=u}return a.ZD=function(s){var o=[],u=0;for(s=Object.keys(s);u<s.length;u++)o.push(Number(s[u]));return o.sort(function(p,f){return p-f}),o},a.prototype.aG=function(s){var o=this.Fo[s],u=a.ZD(o)[0],p=o[u],f=p.iy().Vy;return p=p.iy().vK,delete o[u],p&&(f=c.$l.local().W(f,this.wg,!1,this.Vb),s==0&&f.K()==33&&(s=new c.ee(f.description),f.B()||s.add(f),f=s)),f},a.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw c.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},a.prototype.Ma=function(){return this.za},a.prototype.lK=function(){if(this.Jc)return!0;var s=null;if(this.Sd!=null&&(s=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),c.op.Bp(this.Vb),s!=null){var o=s.Eb();this.vH[o]=!0,o>=this.Bk&&!this.eA&&(this.HD(o,!1,s),o>this.Bk&&!this.eA&&this.uW(o))}if(0<this.kq)for(o=0;o<=this.Bk;o++)for(;1<this.wq[o]&&(s=this.AO(o)).length!=0;)s=c.Hg.QP(s,this.wg,this.Vb),this.HD(o,!0,s);return this.Jc},a.prototype.AO=function(s){for(var o=[],u=[],p=this.Fo[s],f=a.ZD(p),m=0;m<f.length;m++){var v=f[m],_=p[v];if(this.Jc||1e4<_.Ir&&1<_.rj.length){for(this.wq[s]-=_.rj.length,this.kq-=_.rj.length;0<_.rj.length;)o.push(_.iy().Vy),_.OV();u.push(v)}}for(m=0;m<u.length;m++)delete p[u[m]];return o},a.prototype.uW=function(s){for(var o=0;o<s;o++)this.Fo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.HD=function(s,o,u){var p=new C;if(p.Az(),p.Vy=u,u=a.$R(u),p.zx=u,u=a.YR(u),s+1>this.Fo.length)for(var f=0,m=Math.max(2,s+1);f<m;f++)this.Fo.push([]);(f=this.Fo[s][u])===void 0&&(f=new w,this.Fo[s][u]=f),p.vK=o,f.kN(p),this.wq[s]++,this.kq++,this.Bk=Math.max(this.Bk,s)},a.YR=function(s){return 0<s?c.P.truncate(Math.log(s)/Math.log(4)+.5):0},a.$R=function(s){var o=s.K();if(c.ba.zj(o))return s.I();if(o==33)return 1;if(o==197)return 4;if(c.ba.zd(o))return 2;throw c.i.Ra()},a.prototype.re=function(){this.lK()},a}();c.yL=h}(q||(q={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return Et(h,w),h.prototype.K=function(){return 1},h.prototype.W=function(a,s,o,u){return u===void 0?new c.yL(a,s,o):this.bQ(a,s,o,u)},h.prototype.bQ=function(a,s,o,u){return a=new c.$c([a,s]),this.W(a,o,u).next()},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(c.Ge);c.Ih=C}(q||(q={})),function(c){var C,w;(w=C||(C={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",C=function(){function h(a,s,o,u){this.Vs=new c.l,this.BT=a,this.CT=s,this.oq=u,this.wo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,u?this.wo=s.ea():this.td=s.Ha()),this.tl||(p=s.Cb)!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,u?this.wo=a.ea():this.td=a.Ha()),this.tl||(this.ei=u?c.ua.hR(a,s,o,1<=a.qm(0),1<=s.qm(0)):c.ua.gR(a,s,o))}return h.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.sU();break;case 1:a=this.tU();break;case 2:a=this.Pz();break;default:throw c.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},h.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},h.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},h.prototype.oz=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},h.prototype.Wy=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},h.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},h.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Wo(a,this.ra),this.Yb=2,!0},h.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},h}(),c.am=C}(q||(q={})),function(c){(c=c.JL||(c.JL={}))[c.enumClosed=1]="enumClosed",c[c.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",c[c.enumOGCStartPolygon=4]="enumOGCStartPolygon",c[c.enumCalcMask=4]="enumCalcMask"}(q||(q={})),function(c){c.LC=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var v=[0,0,0],_=[0,0,0],M=[0,0,0],T=[0,0,0,0],A=new c.ha(0),O=new c.ha(0),R=new c.ha(0);if(p!=null||f!=null||m!=null)if(c.s.vi(h))c.$g.ub(w,a,s,o,u,p,f,m);else{o=c.F.ca(o),a=c.F.ca(a);var j=c.F.ca(o-a);if(c.s.$(s,u)&&(c.s.$(a,o)||c.s.$(c.s.R(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.$(s,-u)){if(c.s.$(c.s.R(s),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0<s?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<s?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(j),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else if(c.s.$(c.s.R(s),1.570796326794897)||c.s.$(c.s.R(u),1.570796326794897)||c.s.$(a,o)||c.s.$(c.s.R(j),3.141592653589793)||c.s.Dd(s))return void c.Yk.ub(w,h,a,s,o,u,p,f,m);var z=Math.sqrt(1-h);o=c.F.ca(o-a),a=0,c.F.el(1,h,s,a,0,A,O,R),v[0]=A.u,v[1]=O.u,v[2]=R.u,c.F.el(1,h,u,o,0,A,O,R),_[0]=A.u,_[1]=O.u,_[2]=R.u,M[0]=0,M[1]=0,M[2]=-1*h*c.F.n(1,h,s)*Math.sin(s),0>o?c.F.Yq(M,_,v,T,0):c.F.Yq(M,v,_,T,0),O=[0,0,0],R=[0,0,0];var V=[0,0,0];v=[0,0,0],A=[0,0,0];var F=Math.acos(T[2]/1),G=1-h,Z=Math.tan(F),K=1+Z*Z/G,re=2*M[2]*Z/G;for(G=(-re+(Z=Math.sqrt(re*re-4*K*(M[2]*M[2]/G-1))))/(K*=2),re=(-re-Z)/K,Z=Math.tan(F),F=(G+re)/2,M=((K=Z*G+M[2])+(Z*re+M[2]))/2,Z=c.F.ip(G-F,K-M),G=M/z*1.570796326794897,re=0;100>re&&(K=(K=c.F.w(h,G))*K/Math.cos(G)*(Math.sin(G)-M*K/(1-h)),!c.s.Dd(K));re++)G-=K;M=c.F.n(1,h,G)*Math.cos(G),Z=1-Z/(M=Math.sqrt((M-F)*(M+F))),Z*=2-Z,K=c.F.qn(O),F=c.F.qn(R),G=c.F.qn(V);var te=c.F.Ut(V,O);re=c.F.Ut(V,R),c.F.yx(V,O,v),c.F.yx(V,R,A),O=Math.acos(te/(G*K)),R=Math.acos(re/(G*F)),R*=c.s.Mb(1,c.F.Ut(v,A)),(1.570796326794897<=c.s.R(O)&&1.570796326794897<=c.s.R(R)||3.141592653589793<c.s.R(O-R))&&(O=(3.141592653589793-c.s.R(O))*c.s.Mb(1,O),R=(3.141592653589793-c.s.R(R))*c.s.Mb(1,R)),v=c.F.Sj(Z,R),A=c.F.q(M,Z,c.F.Sj(Z,O)),v=c.F.q(M,Z,v),v=c.s.R(v-A)*w,O=new c.ha(0),R=new c.ha(0),V=T[1]/1,V*=-c.s.Mb(1,j),A=Math.acos(V)*c.s.Mb(1,j),C.sf(w,h,a,s,v,A,O,R),c.s.$(o,O.u)&&c.s.$(u,R.u)||(Z=c.F.ip(c.F.ca(o-O.u),u-R.u),C.sf(w,h,a,s,v,c.F.ca(A+3.141592653589793),O,R),(K=c.F.ip(c.F.ca(o-O.u),u-R.u))<Z&&(A=c.F.ca(A+3.141592653589793))),O=[0,0,0,0],R=[0,0,0,0],Z=[0,0,0],w=[0,0,0],a=[0,0,0],s=[0,0,0],V=[0,0,0],(M=[0,0,0])[0]=0,M[1]=0,M[2]=z,Z[0]=0,Z[1]=0,Z[2]=0,c.F.Yq(Z,M,_,O,0),c.s.Dd(u)?(w[0]=_[0],w[1]=_[1],w[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(h=c.F.n(1,h,u)*Math.cos(u),w[0]=0,w[1]=0,_[2]+=Math.tan(1.570796326794897-c.s.R(u))*h*c.s.Mb(1,u),a[0]=h*Math.cos(o)-h*Math.sin(o),a[1]=h*Math.sin(o)+h*Math.cos(o)),a[2]=_[2],c.F.Yq(_,a,w,R,1),c.F.yx(R,O,s),c.F.yx(R,T,V),V=c.F.Ut(s,V)/(c.F.qn(s)*c.F.qn(V)),V*=c.s.Mb(1,j),o=Math.acos(V)*-c.s.Mb(1,j),(0<A&&0<o||0>A&&0>o)&&(o=c.F.ca(o+3.141592653589793)),p!=null&&(p.u=v),f!=null&&(f.u=A),m!=null&&(m.u=o)}}},C.sf=function(w,h,a,s,o,u,p,f){var m=[0,0,0],v=[0,0,0],_=[0,0,0],M=[0,0,0],T=[0,0,0],A=[0,0,0],O=[0,0,0],R=[0,0,0,0],j=new c.ha(0),z=new c.ha(0),V=new c.ha(0),F=new c.ha(0),G=new c.ha(0),Z=new c.ha(0);if(p!=null&&f!=null)if(c.s.vi(h))c.$g.sf(w,a,s,o,u,p,f);else if(c.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=s);else if(u=c.F.ca(u),0>o&&(o=c.s.R(o),u=c.F.ca(u+3.141592653589793)),a=c.F.ca(a),s=c.F.ca(s),1.570796326794897<c.s.R(s)&&(a=c.F.ca(a+3.141592653589793),s=c.s.Mb(3.141592653589793,s)-s),c.s.$(c.s.R(s),1.570796326794897)||c.s.Dd(s)||c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))c.Yk.sf(w,h,a,s,o,u,p,f);else{var K=Math.sqrt(1-h);for(w=o/w,c.F.el(1,h,s,0,0,F,G,Z),m[0]=F.u,m[1]=G.u,m[2]=G.u,O[0]=0,O[1]=0,O[2]=-1*h*c.F.n(1,h,s)*Math.sin(s),F=c.F.n(1,h,s),G=c.F.ca(1.570796326794897-u),Z=Math.sin(G),o=Math.cos(s),s=Math.sin(s),T[0]=F*o-s*Z,T[1]=Math.cos(G),T[2]=(1-h)*F*s+o*Z,0>u?c.F.Yq(O,T,m,R,0):c.F.Yq(O,m,T,R,0),m=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),s=1-h,G=1+(T=Math.tan(m))*T/s,s=(-(F=2*O[2]*T/s)+(T=Math.sqrt(F*F-4*G*(O[2]*O[2]/s-1))))/(G*=2),F=(-F-T)/G,T=Math.tan(m),m=(s+F)/2,O=((G=T*s+O[2])+(T*F+O[2]))/2,T=c.F.ip(s-m,G-O),K=O/K*1.570796326794897,s=0;100>s&&(F=(F=c.F.w(h,K))*F/Math.cos(K)*(Math.sin(K)-O*F/(1-h)),!c.s.Dd(F));s++)K-=F;K=c.F.n(1,h,K)*Math.cos(K),O=1-T/(K=Math.sqrt((K-m)*(K+m))),O*=2-O,A=Math.acos(c.F.Ut(A,v)/(c.F.qn(A)*c.F.qn(v))),A*=c.s.Mb(1,v[0]),u=(c.F.q(K,O,c.F.Sj(O,A))+w*c.s.Mb(1,u))/c.F.Ch(K,O),u=c.F.ca(1.570796326794897*u),u=c.F.Tq(O,u),c.F.n(K,O,u),T=c.F.ca(R+a),a=Math.cos(T),u=Math.sin(T),_[0]=M[0]*a+M[1]*-u,_[1]=M[0]*u+M[1]*a,_[2]=M[2],c.F.eO(h,_[0],_[1],_[2],V,z,j),p!=null&&(p.u=z.u),f!=null&&(f.u=V.u)}},C}()}(q||(q={})),function(c){var C=function(){function o(u){this.Za=null,this.xt=new c.h,this.yt=new c.h,this.g=u}return o.prototype.compare=function(u,p,f){return this.g.Hc(p,this.xt),this.g.Hc(u.ka(f),this.yt),this.xt.compare(this.yt)},o}(),w=function(){function o(u){this.Cf=new c.h,this.Fk=new c.h,this.g=u}return o.prototype.Fh=function(u){this.Cf.N(u)},o.prototype.compare=function(u,p){return this.g.Hc(u.ka(p),this.Fk),this.Cf.compare(this.Fk)},o}(),h=function(o){function u(p){var f=o.call(this,p.g,p.ra,!1)||this;return f.ib=p,f}return Et(u,o),u.prototype.compare=function(p,f,m){if(this.sg)return-1;var v=this.ib.Rd.Ln(this.ib.Th(f));p=p.ka(m);var _=this.ib.Rd.Ln(this.ib.Th(p));return this.Fm=m,this.ME(f,v,p,_)},u}(c.PC),a=function(o){function u(p){var f=o.call(this,p.g,p.ra)||this;return f.ib=p,f}return Et(u,o),u.prototype.compare=function(p,f){return this.sg?-1:(p=this.ib.Rd.Ln(this.ib.Th(p.ka(f))),this.Fm=f,this.NE(f,p))},u}(c.WL),s=function(){function o(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new c.h,this.Ri=new c.h,this.hb=new c.ad(8),this.Ad=new c.ad(5),this.nh=new c.cu,this.Rd=new c.cu,this.Pg=!1,this.xh=new c.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new c.$j,this.Nc=new c.$j,this.ph=new c.ja(0),this.Ik=new c.OC,this.Gf=new c.ja(0),this.Ck=new c.ja(0),this.lo=new c.Ta}return o.prototype.LX=function(u,p){var f=new c.Ed;return f.VB(),u.Pc(f),this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,p=this.eC(),u.Pc(f),p||(this.lQ(),p||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},o.prototype.PX=function(u,p){this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,this.Pg=!1,this.eC(),this.Pg||(this.Pg=u.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.qg=function(u,p){return this.hb.U(u,0+p)},o.prototype.GB=function(u,p,f){this.hb.T(u,0+p,f)},o.prototype.Th=function(u){return this.hb.U(u,2)},o.prototype.UW=function(u,p){this.hb.T(u,2,p)},o.prototype.MF=function(u,p){return this.hb.U(u,3+p)},o.prototype.Rp=function(u){return this.hb.U(u,7)},o.prototype.Rl=function(u,p){this.hb.T(u,7,p)},o.prototype.Tp=function(u,p){return this.hb.U(u,3+this.Qp(u,p))},o.prototype.hr=function(u,p,f){this.hb.T(u,3+this.Qp(u,p),f)},o.prototype.IR=function(u,p){return this.hb.U(u,5+this.Qp(u,p))},o.prototype.jr=function(u,p,f){this.hb.T(u,5+this.Qp(u,p),f)},o.prototype.Ur=function(u){return this.Ad.U(u,0)},o.prototype.PW=function(u,p){this.Ad.T(u,0,p)},o.prototype.$y=function(u){return this.Ad.U(u,4)},o.prototype.er=function(u,p){this.Ad.T(u,4,p)},o.prototype.kl=function(u){return this.Ad.U(u,1)},o.prototype.nn=function(u,p){this.Ad.T(u,1,p)},o.prototype.Zy=function(u){return this.Ad.U(u,3)},o.prototype.Ft=function(u,p){this.Ad.T(u,3,p)},o.prototype.$m=function(u){var p=this.Ad.De(),f=this.nh.Rh();return this.PW(p,f),u!=-1?(this.nh.addElement(f,u),this.g.Sa(u,this.zh,p),this.er(p,this.g.Va(u))):this.er(p,-1),p},o.prototype.CP=function(u){this.Ad.kd(u)},o.prototype.FD=function(u,p){this.nh.addElement(this.Ur(u),p),this.g.Sa(p,this.zh,u)},o.prototype.ot=function(u){var p=this.hb.De(),f=this.Rd.Rh();return this.UW(p,f),u!=-1&&this.Rd.addElement(f,u),p},o.prototype.GD=function(u,p){this.Rd.addElement(this.Th(u),p)},o.prototype.Wu=function(u){this.hb.kd(u),0<=(u=this.ph.gF(u))&&this.ph.NV(u)},o.prototype.jj=function(u,p){if(this.qg(u,0)==-1)this.GB(u,0,p);else{if(this.qg(u,1)!=-1)throw c.i.Ra();this.GB(u,1,p)}this.gy(u,p)},o.prototype.gy=function(u,p){var f=this.kl(p);if(f!=-1){var m=this.Tp(f,p);this.jr(m,p,u),this.hr(u,p,m),this.hr(f,p,u),this.jr(u,p,f)}else this.jr(u,p,u),this.hr(u,p,u),this.nn(p,u)},o.prototype.Qp=function(u,p){return this.qg(u,0)==p?0:1},o.prototype.Zm=function(u,p){var f,m=this.Zy(p);if(m!=-1&&(this.df.wd(m,-1),this.Ft(p,-1)),(m=this.kl(p))!=-1){var v=f=m;do{var _=!1,M=this.Qp(f,p),T=this.MF(f,M);if(this.qg(f,M+1&1)==u){if(this.Zu(f),this.Rd.eh(this.Th(f)),this.Wu(f),f==T){m=-1;break}m==f&&(m=this.kl(p),v=T,_=!0)}f=T}while(f!=v||_);if(m!=-1){do M=this.Qp(f,p),T=this.MF(f,M),this.GB(f,M,u),f=T;while(f!=v);(f=this.kl(u))!=-1?(v=this.Tp(f,u),_=this.Tp(m,u),v==f?(this.nn(u,m),this.gy(f,u),this.nn(u,f)):_==m&&this.gy(m,u),this.hr(m,u,v),this.jr(v,u,m),this.hr(f,u,_),this.jr(_,u,f)):this.nn(u,m)}}for(m=this.Ur(u),f=this.Ur(p),v=this.nh.sc(f);v!=-1;v=this.nh.lb(v))this.g.Sa(this.nh.ka(v),this.zh,u);this.nh.Cy(m,f),this.CP(p)},o.prototype.PT=function(u,p){var f=this.qg(u,0),m=this.qg(u,1),v=this.qg(p,0),_=this.qg(p,1);this.Rd.Cy(this.Th(u),this.Th(p)),p==this.kl(f)&&this.nn(f,u),p==this.kl(m)&&this.nn(m,u),this.Zu(p),this.Wu(p),f==v&&m==_||m==v&&f==_||(this.Jn(f,this.Ao),this.Jn(v,this.Ri),this.Ao.rb(this.Ri)?(f!=v&&this.Zm(f,v),m!=_&&this.Zm(m,_)):(m!=v&&this.Zm(m,v),f!=_&&this.Zm(f,_)))},o.prototype.Zu=function(u){var p=this.qg(u,1);this.ZE(u,this.qg(u,0)),this.ZE(u,p)},o.prototype.ZE=function(u,p){var f=this.Tp(u,p),m=this.IR(u,p),v=this.kl(p);f!=u?(this.hr(m,p,f),this.jr(f,p,m),v==u&&this.nn(p,f)):this.nn(p,-1)},o.prototype.RD=function(u,p,f){var m=this.Rd.sc(u),v=this.Rd.ka(m);u=this.Ie(v);var _=this.Ie(this.g.V(v));for(this.g.lr(v,p,f,!0),m=this.Rd.lb(m);m!=-1;m=this.Rd.lb(m)){v=this.Rd.ka(m);var M=this.Ie(v)==u;this.g.lr(v,p,f,M)}m=p.Xp(f,0).bc(),p=p.Xp(f,p.ql(f)-1).xc(),this.wK(u,m),this.wK(_,p)},o.prototype.UE=function(u,p,f){var m=this.Th(u),v=this.qg(u,0),_=this.qg(u,1),M=this.ot(-1);for(this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,v),u=1,p=p.ql(f);u<p;u++)f=this.$m(-1),this.Ck.add(f),this.Gf.add(f),this.jj(M,f),M=this.ot(-1),this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,f);for(this.jj(M,_),m=this.Rd.sc(m);m!=-1;m=this.Rd.lb(m))if(_=this.Rd.ka(m),this.Ie(_)==v){u=0;do 0<u&&(M=this.Gf.get(u-1),this.FD(M,_),this.$y(M)==-1&&this.er(M,this.g.Va(_))),M=this.Gf.get(u),u+=2,this.GD(M,_),_=this.g.V(_);while(u<this.Gf.size)}else{u=this.Gf.size-1;do u<this.Gf.size-2&&(M=this.Gf.get(u+1),this.FD(M,_),0>this.$y(M)&&this.er(M,this.g.Va(_))),M=this.Gf.get(u),u-=2,this.GD(M,_),_=this.g.V(_);while(0<=u)}this.Gf.clear(!1)},o.prototype.Ie=function(u){return this.g.Qa(u,this.zh)},o.prototype.NI=function(u,p,f){var m=this.qg(p,0),v=new c.h;this.Jn(m,v);var _=new c.h,M=this.qg(p,1);this.Jn(M,_);var T=f.ql(u),A=f.Xp(u,0),O=new c.h;if(A.$p(O),!v.rb(O)){if(!this.Pg){var R=v.compare(this.xh);0>R*(O=O.compare(this.xh))&&(this.Pg=!0)}this.qF(m,this.Gf),this.Ck.add(m)}for(!this.Pg&&1<T&&(R=v.compare(_),A=A.xc(),(v.compare(A)!=R||A.compare(_)!=R||0>A.compare(this.xh))&&(this.Pg=!0)),u=(A=f.Xp(u,T-1)).xc(),_.rb(u)||(this.Pg||0>(R=_.compare(this.xh))*(O=u.compare(this.xh))&&(this.Pg=!0),this.qF(M,this.Gf),this.Ck.add(M)),this.Gf.add(p),_=0,M=this.Gf.size;_<M;_++)u=this.Gf.get(_),f=this.Rp(u),c.ad.GG(f)&&(this.Nc.wd(f,-1),this.Rl(u,-1)),u!=p&&this.Rp(u)!=-3&&(this.ph.add(u),this.Rl(u,-3));this.Gf.clear(!1)},o.prototype.gO=function(u,p){this.ae.compare(this.Nc,this.Nc.ka(u),p),this.ae.sg&&(this.ae.Mr(),this.jF(u,p))},o.prototype.jF=function(u,p){this.Yn=!0,u=this.Nc.ka(u),p=this.Nc.ka(p);var f=this.Rd.Ln(this.Th(u)),m=this.Rd.Ln(this.Th(p)),v=this.g.cc(f);v==null&&(this.je==null&&(this.je=new c.zb),this.g.fd(f,this.je),v=this.je),(f=this.g.cc(m))==null&&(this.Pm==null&&(this.Pm=new c.zb),this.g.fd(m,this.Pm),f=this.Pm),this.Ik.Qo(v),this.Ik.Qo(f),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(u,p,-1,this.Ik),this.Ik.clear()},o.prototype.BQ=function(u,p){this.Yn=!0,p=this.Nc.ka(p);var f=this.Rd.Ln(this.Th(p)),m=this.g.cc(f);m==null&&(this.je==null&&(this.je=new c.zb),this.g.fd(f,this.je),m=this.je),f=this.wF(u),this.Ik.Qo(m),this.g.Xi(f,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(p,-1,u,this.Ik),this.Ik.clear()},o.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var u=this.ph.Gc();this.ph.Jf(),this.Rl(u,-1),this.RS(u)!=-1&&this.rS(u),this.Xn=!1}},o.prototype.rS=function(u){if(this.Xn){var p=this.Nc.Bu(this.HH,this.BH,u,!0);this.Xn=!1}else p=this.Nc.ED(u);p==-1?this.PT(this.Nc.ka(this.Nc.AF()),u):(this.Rl(u,p),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,p)))},o.prototype.RS=function(u){var p=this.qg(u,0);if(u=this.qg(u,1),this.Jn(p,this.Ao),this.Jn(u,this.Ri),c.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var f=this.Ao.compare(this.xh),m=this.Ri.compare(this.xh);return 0>=f&&0<m?u:0>=m&&0<f?p:-1},o.prototype.jQ=function(){var u=new c.ja(0);u.Jb(this.g.gd);for(var p=this.g.$q(),f=p.next();f!=-1;f=p.next())this.g.Qa(f,this.zh)!=-1&&u.add(f);this.g.nx(u,u.size),this.kQ(u)},o.prototype.kQ=function(u){this.df.clear(),this.df.Ee(u.size),this.df.Xo(new C(this.g));var p=new c.h;p.Sc();for(var f=-1,m=new c.h,v=0,_=u.size;v<_;v++){var M=u.get(v);this.g.Hc(M,m),m.rb(p)?(M=this.g.Qa(M,this.zh),this.Zm(f,M)):(f=this.Ie(M),this.g.Hc(M,p),M=this.df.zn(M),this.Ft(f,M))}},o.prototype.lQ=function(){var u=new c.ja(0);u.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))u.add(this.df.ka(p));this.df.clear(),this.g.nx(u,u.size),p=0;for(var f=u.size;p<f;p++){var m=u.get(p),v=this.Ie(m);m=this.df.zn(m),this.Ft(v,m)}},o.prototype.qF=function(u,p){var f=this.kl(u);if(f!=-1){var m=f;do c.ad.GG(this.Rp(m))&&p.add(m),m=this.Tp(m,u);while(m!=f)}},o.prototype.wK=function(u,p){for(u=this.nh.sc(this.Ur(u));u!=-1;u=this.nh.lb(u))this.g.mf(this.nh.ka(u),p)},o.prototype.cK=function(u,p,f,m){this.Zu(u),p!=-1&&this.Zu(p),this.NI(0,u,m),p!=-1&&this.NI(1,p,m),f!=-1&&(m.Cf.D(this.Ao),this.Jn(f,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(f)),f=0;for(var v=this.Ck.size;f<v;f++){var _=this.Ck.get(f),M=this.Zy(_);M!=-1&&(this.df.wd(M,-1),this.Ft(_,-1))}for(f=this.Th(u),v=p!=-1?this.Th(p):-1,this.RD(f,m,0),p!=-1&&this.RD(v,m,1),this.UE(u,m,0),p!=-1&&this.UE(p,m,1),this.Rd.eh(f),this.Wu(u),p!=-1&&(this.Rd.eh(v),this.Wu(p)),f=0,v=this.Ck.size;f<v;f++)(_=this.Ck.get(f))==this.Lq&&(this.Zv=!0),(M=this.Zy(_))==-1&&((M=this.df.ED(this.wF(_)))==-1?(u=this.Ie(this.df.ka(this.df.AF())),this.Zm(u,_)):this.Ft(_,M));this.Ck.clear(!1)},o.prototype.Jn=function(u,p){this.g.ZF(this.$y(u),p)},o.prototype.wF=function(u){return this.nh.Ln(this.Ur(u))},o.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new h(this),this.Nc.ao=this.ae);var u=new c.ja(0),p=null,f=null;this.BH=this.HH=-1,this.Xn=!1;for(var m=this.df.sc(-1);m!=-1;){this.Xn=!1;var v=this.df.ka(m);this.Lq=this.Ie(v),this.g.Hc(v,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var _=this.kl(this.Lq),M=_==-1;if(!M){v=_;do{var T=this.Rp(v);T==-1?(this.ph.add(v),this.Rl(v,-3)):T!=-3&&u.add(T),v=this.Tp(v,this.Lq)}while(v!=_)}if(0<u.size){for(this.Xn=u.size==1&&this.ph.size==1,M=0,_=u.size;M<_;M++)v=this.Nc.ka(u.get(M)),this.Rl(v,-2);var A=-2,O=-2;for(M=0,_=u.size;M<_;M++){if(T=u.get(M),A==-2){var R=this.Nc.xe(T);R!=-1?(v=this.Nc.ka(R),(v=this.Rp(v))!=-2&&(A=R)):A=-1}if(O==-2&&((T=this.Nc.lb(T))!=-1?(v=this.Nc.ka(T),(v=this.Rp(v))!=-2&&(O=T)):O=-1),A!=-2&&O!=-2)break}for(M=0,_=u.size;M<_;M++)T=u.get(M),v=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(v,-1);u.clear(!1),this.HH=A!=-1?A:-1,this.BH=O!=-1?O:-1,A!=-1&&O!=-1?this.Xn||this.gO(A,O):A==-1&&O==-1&&(this.Xn=!1)}else M&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.pJ(p),p.sg&&(p.Mr(),this.BQ(this.Lq,p.Fm)));this.sS(),this.Zv?(this.Zv=!1,f==null&&(f=new w(this.g)),f.Fh(this.xh),m=this.df.pJ(f)):m=this.df.lb(m)}return this.Yn},o.prototype.gr=function(u){for(this.g=u,this.zh=this.g.Hd(),this.hb.Ee(u.gd+32),this.Ad.Ee(u.gd),this.nh.Bt(u.gd),this.nh.hn(u.gd),this.Rd.Bt(u.gd+32),this.Rd.hn(u.gd+32),u=this.g.md;u!=-1;u=this.g.ve(u))if(c.ba.Ic(this.g.jc(u)))for(T=this.g.Ob(u);T!=-1;T=this.g.Sb(T)){var p=this.g.Ka(T),f=this.g.Ya(T),m=this.$m(f),v=this.ot(f);for(this.jj(v,m),A=this.g.V(f),f=0,p-=2;f<p;f++){var _=this.g.V(A),M=this.$m(A);this.jj(v,M),v=this.ot(A),this.jj(v,M),A=_}this.g.ec(T)?(M=this.$m(A),this.jj(v,M),v=this.ot(A),this.jj(v,M),this.jj(v,m)):(M=this.$m(A),this.jj(v,M))}else for(var T=this.g.Ob(u);T!=-1;T=this.g.Sb(T)){var A=this.g.Ya(T);for(m=0,p=this.g.Ka(T);m<p;m++)this.$m(A),A=this.g.V(A)}this.jQ()},o}();c.MC=s}(q||(q={})),function(c){var C=function(w){function h(a,s,o){var u=w.call(this)||this;if(a!==void 0)if(o!==void 0){u.description=c.fe.pg();var p=new c.Od;p.L(a,s,o),u.ZB(p)}else if(s!==void 0)u.description=c.fe.pg(),u.Db(a,s);else if(a instanceof c.sa)u.description=a;else if(a instanceof c.h)u.description=c.fe.pg(),u.Db(a);else{if(!(a instanceof h))throw c.i.O();u.description=a.description,u.Db(a.Ng(),a.kh()),a.la!==null&&(u.la=a.la.slice(0))}else u.description=c.fe.pg();return u}return Et(h,w),h.prototype.D=function(a){if(a===void 0){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return(a=new c.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},h.prototype.Db=function(a,s){typeof a=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=a,this.la[1]=s):(this.wc(),this.Db(a.x,a.y))},h.prototype.xz=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");var a=new c.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.dG()?this.la[2]:c.sa.te(1),a},h.prototype.ZB=function(a){this.wc();var s=this.hasAttribute(1);s||c.sa.yG(1,a.z)||(this.se(1),s=!0),this.la==null&&this.wn(),this.la[0]=a.x,this.la[1]=a.y,s&&(this.la[2]=a.z)},h.prototype.Ng=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},h.prototype.YB=function(a){this.setAttribute(0,0,a)},h.prototype.kh=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},h.prototype.WJ=function(a){this.setAttribute(0,1,a)},h.prototype.XR=function(){return this.Vc(1,0)},h.prototype.sX=function(a){this.setAttribute(1,0,a)},h.prototype.uR=function(){return this.Vc(2,0)},h.prototype.cX=function(a){this.setAttribute(2,0,a)},h.prototype.Fc=function(){return this.tF(3,0)},h.prototype.GJ=function(a){this.setAttribute(3,0,a)},h.prototype.Vc=function(a,s){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+s]:c.sa.te(a)},h.prototype.tF=function(a,s){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+s]:c.sa.te(a)},h.prototype.setAttribute=function(a,s,o){this.wc();var u=this.description.Rf(a);0>u&&(this.se(a),u=this.description.Rf(a)),this.la==null&&this.wn(),this.la[this.description.bk(u)+s]=o},h.prototype.K=function(){return 33},h.prototype.Eb=function(){return 0},h.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},h.prototype.un=function(a){if(this.la!=null){for(var s=c.fe.Kw(a,this.description),o=[],u=0,p=0,f=a.Ba;p<f;p++){var m=a.ld(p),v=c.sa.Wa(m);if(s[p]==-1){var _=c.sa.te(m);for(m=0;m<v;m++)o[u]=_,u++}else for(_=this.description.bk(s[p]),m=0;m<v;m++)o[u]=this.la[_],u++,_++}this.la=o}this.description=a},h.prototype.wn=function(){this.gJ(this.description.Be.length),h.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},h.prototype.Pc=function(a){if(a instanceof c.Ed){if(!this.Bc()){var s=this.D();a.Gh(s,s),this.Db(s)}}else this.Bc()||(this.se(1),s=this.xz(),this.ZB(a.hp(s)))},h.prototype.copyTo=function(a){if(a.K()!=33)throw c.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.Pf(this.description)):(a.Pf(this.description),a.gJ(this.description.Be.length),h.YD(this.la,a.la,this.description.Be.length))},h.prototype.Ja=function(){return new h(this.description)},h.prototype.B=function(){return this.Bc()},h.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},h.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.Pf(this.description),a.$b(this)},h.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},h.prototype.So=function(a){if(this.Bc())a.Pa();else{var s=this.xz();a.v=s.x,a.G=s.y,a.Xe=s.z,a.C=s.x,a.H=s.y,a.Dg=s.z}},h.prototype.Vg=function(a,s){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,s),o.pa=a,o.wa=a,o)},h.prototype.gJ=function(a){if(this.la==null)this.la=c.P.mg(a);else if(this.la.length<a){for(var s=this.la.slice(0),o=this.la.length;o<a;o++)s[o]=0;this.la=s}},h.YD=function(a,s,o){if(0<o)for(o=0;o<a.length;o++)s[o]=a[o]},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var s=0,o=this.description.Be.length;s<o;s++)if(this.la[s]!=a.la[s])return!1;return!0},h.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var s=0,o=this.description.Be.length;s<o;s++){var u=this.la[s];u=c.P.truncate(u^u>>>32),a=c.P.Vh(u,a)}return a},h.prototype.ng=function(){return null},h}(c.ba);c.Ta=C}(q||(q={})),function(c){var C=function(){function w(h,a,s){h!==void 0&&(this.x=h,this.y=a,this.z=s)}return w.construct=function(h,a,s){var o=new w;return o.x=h,o.y=a,o.z=s,o},w.prototype.L=function(h,a,s){this.x=h,this.y=a,this.z=s},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var h=this.length();h==0&&(this.x/=h,this.y/=h,this.z/=h)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(h){return new w(this.x-h.x,this.y-h.y,this.z-h.z)},w.prototype.Bg=function(h){new w(this.x*h,this.y*h,this.z*h)},w.prototype.Sh=function(h){return this.x*h.x+this.y*h.y+this.z*h.z},w}();c.Od=C}(q||(q={})),function(c){var C=function(){function w(h,a,s){this.Iw=this.yA=null,this.Zf=a,this.AT=a.y-s,this.zT=a.y+s,this.Gw=0,this.Zz=h,this.ra=s,this.MT=s*s,this.$z=s!=0,this.Nv=!1}return w.prototype.result=function(){return this.Gw!=0?1:0},w.prototype.UM=function(h){return h=h.ic(h.ge(this.Zf,!1)),c.h.zc(h,this.Zf)<=this.MT},w.prototype.aF=function(h){if(!this.$z&&(this.Zz&&this.Zf.rb(h.bc())||this.Zf.rb(h.xc())))this.Nv=!0;else if(h.oa==this.Zf.y&&h.oa==h.ma){if(this.Zz&&!this.$z){var a=Math.max(h.ta,h.qa);this.Zf.x>Math.min(h.ta,h.qa)&&this.Zf.x<a&&(this.Nv=!0)}}else{var s=!1;if(a=Math.max(h.ta,h.qa),this.Zf.x>a?s=!0:this.Zf.x>=Math.min(h.ta,h.qa)&&(s=0<h.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),s){if(this.Zf.y==h.bc().y){if(this.Zf.y<h.xc().y)return}else if(this.Zf.y==h.xc().y&&this.Zf.y<h.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(h.bc().y>h.xc().y?1:-1)}}},w.prototype.MI=function(h){var a=h.Vg(0,1);if(a.pa>this.zT||a.wa<this.AT)return!1;if(this.$z&&this.UM(h))return!0;if(a.pa>this.Zf.y||a.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=h.$F()))for(h=0;h<a;h++){var s=this.yA[h].get();if(this.aF(s),this.Nv)return!0}else if(this.aF(h),this.Nv)return!0;return!1},w.KM=function(h,a,s){for(a=new w(h.Kn()==0,a,s),h=h.Ha();h.ab();)for(;h.Ia();)if(s=h.ia(),a.MI(s))return-1;return a.result()},w.LM=function(h,a,s,o){var u=new c.l;h.yc(u),u.X(o,o);var p=new w(h.Kn()==0,s,o);h=h.Ha();var f=new c.l;for(f.L(u),f.C=s.x+o,f.G=s.y-o,f.H=s.y+o,o=(s=a.HF(f,o)).next();o!=-1;o=s.next())if(h.Wb(a.ka(o)),h.Ia()&&(o=h.ia(),p.MI(o)))return-1;return p.result()},w.ym=function(h,a,s){if(h.B())return 0;var o=new c.l;if(h.yc(o),o.X(s,s),!o.contains(a))return 0;if((o=h.Cb)!=null){var u=o.Hk;if(u!=null){if((u=u.Uo(a.x,a.y))==1)return 1;if(u==0)return 0}if((o=o.Gb)!=null)return w.LM(h,o,a,s)}return w.KM(h,a,s)},w.XS=function(h,a,s){return a.B()?0:w.ym(h,a.D(),s)},w.Ol=function(h,a){return!(16>(h=h.I()))&&2*h+Math.log(h)/Math.log(2)*a<1*h*a},w}();c.Fg=C}(q||(q={})),function(c){var C=function(w){function h(a){return w.call(this,!0,a)||this}return Et(h,w),h.prototype.Ja=function(){return new h(this.description)},h.prototype.Eb=function(){return 2},h.prototype.K=function(){return 1736},h.prototype.sG=function(a,s,o){this.ES(a,s,o)},h.prototype.kR=function(){this.AR()},h}(c.Xk);c.Ea=C}(q||(q={})),function(c){(function(C){C[C.PiPOutside=0]="PiPOutside",C[C.PiPInside=1]="PiPInside",C[C.PiPBoundary=2]="PiPBoundary"})(c.ML||(c.ML={})),c.jd=function(){function C(){}return C.FG=function(w,h,a){return(w=c.Fg.XS(w,h,a))==0?0:w==1?1:2},C.Zd=function(w,h,a){return(w=c.Fg.ym(w,h,a))==0?0:w==1?1:2},C.SX=function(w,h,a,s,o){if(h.length<a||o.length<a)throw c.i.O();for(var u=0;u<a;u++)o[u]=C.Zd(w,h[u],s)},C.nK=function(w,h,a,s,o){if(w.K()==1736)C.SX(w,h,a,s,o);else{if(w.K()!=197)throw c.i.ga("invalid_call");var u=new c.l;w.A(u),C.VM(u,h,a,s,o)}},C.VM=function(w,h,a,s,o){if(h.length<a||o.length<a)throw c.i.O();if(w.B())for(s=0;s<a;s++)o[s]=0;else for(w.X(.5*-s,.5*-s),w.X(.5*s,.5*s),s=0;s<a;s++)w.contains(h[s])?o[s]=1:w.contains(h[s])?o[s]=2:o[s]=0},C.UX=function(w,h,a,s,o){for(var u=0;u<a;u++)o[u]=w.ss(h[u],s)?2:0},C.TX=function(w,h,a,s,o){var u=w.Cb,p=null;u!=null&&(p=u.Hk),u=a;for(var f=0;f<a;f++)if(o[f]=1,p!=null){var m=h[f];p.Uo(m.x,m.y)==0&&(o[f]=0,u--)}if(u!=0)for(w=w.Ha();w.ab()&&u!=0;)for(;w.Ia()&&u!=0;)for(p=w.ia(),f=0;f<a&&u!=0;f++)o[f]==1&&p.ss(h[f],s)&&(o[f]=2,u--);for(f=0;f<a;f++)o[f]==1&&(o[f]=0)},C.oK=function(w,h,a,s,o){var u=w.K();if(u==1607)C.TX(w,h,a,s,o);else{if(!c.ba.zd(u))throw c.i.ga("Invalid call.");C.UX(w,h,a,s,o)}},C}()}(q||(q={})),function(c){var C=function(w){function h(a,s){if(arguments.length==2){var o=w.call(this,!1,a.description)||this;o.nf(a),o.lineTo(s)}else o=w.call(this,!1,a)||this;return o}return Et(h,w),h.prototype.Ja=function(){return new h(this.description)},h.prototype.Eb=function(){return 1},h.prototype.K=function(){return 1607},h.prototype.sG=function(a,s,o){this.FS(a,s,o)},h}(c.Xk);c.Ua=C}(q||(q={})),function(c){var C=function(){function w(){}return w.prototype.progress=function(){return!0},w.Bp=function(h){if(h!=null&&!h.progress(-1,-1))throw c.i.RC()},w}();c.op=C}(q||(q={})),function(c){var C;(C=c.KK||(c.KK={}))[C.clipWithInputHorizon=1]="clipWithInputHorizon",C[C.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function s(){this.Mg=3,this.Xu=this.Lr=NaN}return s.prototype.KW=function(o){this.LB(1,o)},s.prototype.LW=function(o){this.LB(2,o)},s.prototype.cS=function(){return this.ks(1)},s.prototype.dS=function(){return this.ks(2)},s.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},s.prototype.ks=function(o){return(this.Mg&o)!=0},s.prototype.Qf=function(){var o=new s;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},s}();c.tC=w,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(c.LK||(c.LK={}));var h=function(){function s(){this.Mg=0}return s.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},s.prototype.ks=function(o){return(this.Mg&o)!=0},s.kg=function(o){var u=new s;return u.Mg=o.Mg,u},s.prototype.hM=function(o){this.Mg=o.Mg},s}();c.wY=h;var a=function(){function s(o,u,p){this.ef=o,this.$f=u,this.Wf=new c.l,this.Wf.L(p),this.vT=o.dc()+u.dc()+this.Wf.dc().toString()}return s.prototype.dc=function(){return this.vT},s.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.$f.Nb(o.$f)&&this.Wf.Nb(o.Wf)},s}();c.BY=a,a=function(){function s(){this.$f=this.ef=null,this.mH=new w,this.nH=new h,this.yw=this.Yf=null,this.ow=this.Vn=!0}return s.Pr=function(o,u,p,f){var m;f===void 0&&(f=null),m===void 0&&(m=null);var v=new s;return v.sp(o,u,p,f,m),v},s.prototype.sp=function(o,u,p,f,m){if(o==null||u==null)throw c.i.ga("invalidArgument");if(this.ef=o,this.$f=u,this.ow=this.Vn=!1,f!=null&&(this.mH=f.Qf()),m!=null&&this.nH.hM(m),m=!1,u.Tb()==1&&f!=null&&(f=f.Lr,isNaN(f)||f==0||(m=!0)),o==u)this.Vn=!m,this.ow=!0;else{f=o.Tb();var v=u.Tb();if(f==0||v==0){if(p!=null)throw c.i.O();o.Id()!=null&&u.Id()!=null&&(this.Vn=o.Id().Nb(u.Id()))}else f==3||v==3?this.Vn=o.Nb(u):this.ef.fS(this.$f)?this.Vn=!m:this.Vn=!1,this.Yf=p,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},s.prototype.isIdentity=function(){return this.Vn},s.prototype.iR=function(){return this.mH.Qf()},s.prototype.Nb=function(o){return o==this||!!(o instanceof s&&this.ef.Nb(o.ef)&&this.$f.Nb(o.$f))&&(this.Yf==o.Yf||!(this.Yf==null||o.Yf==null||!this.Yf.Nb(o.Yf)))},s.prototype.kY=function(){this.yw=new c.du(this)},s}(),c.xr=a}(q||(q={})),function(c){var C=function(){function w(){}return w.Ep=function(h){return h*w.jW},w.mx=function(h,a){return w.bP(a-h)},w.cP=function(h){return-360<=h&&720>h?(0>h?h+=360:360<=h&&(h-=360),h):(0>(h=c.mc.MK(h))&&(h+=360),h)},w.bP=function(h){return 180<(h=w.cP(h))&&(h-=360),h},w.jW=57.29577951308232,w}();c.sr=C,c.Jh=function(){function w(){}return w.nj=function(h,a){var s=new c.l;h.A(s);var o=c.cb.ih(a),u=new c.l;return u.L(o),u.v=s.v,u.C=s.C,u.X(.01*u.da(),0),a=c.ua.Xd(a,s,!1),u.contains(s)?h:c.Vd.clip(h,u,a,0)},w.ms=function(h,a,s,o,u){if(!c.cb.Xc(a))throw c.i.O();var p=c.ua.mj(a,h,!1),f=c.cb.ih(a),m=c.cb.tc(a),v=m.Id().ci,_=c.cb.xv(m);m=c.cb.gv(m),_*=2-_;var M=new c.Oc;f.en(M);var T=[[0,0],[0,0]];if(c.Gg.Tb(a)==2?o?(T[0][0]=w.an(u,M),T[0][1]=f.Lp(),c.cb.wt(),f=T[0][0]*v):(T[0][0]=f.ik(),T[0][1]=u,c.cb.wt(),f=T[0][1]*v):f=u*v,!o&&f!=0)throw c.i.O();var A=new c.ha,O=new c.hd;h=O.Ib(h);for(var R=[0],j=new c.h,z=new c.h,V=new c.h,F=new c.h,G=new c.h,Z=new c.h,K=O.Ob(h);K!=-1;K=O.Sb(K)){var re=O.Ya(K);O.D(re,V);for(var te=!1,ue=re=O.V(re);ue!=-1;ue=O.V(ue)){if(ue==re){if(te)break;te=!0}if(O.D(ue,F),o&&p<u-V.x&&F.x-u>p||p<u-F.x&&V.x-u>p||!o&&p<-V.y&&F.y>p||p<-F.y&&V.y>p)do if(!(Math.abs(V.x-F.x)>=.5*M.S())){if(c.Gg.Tb(a)==2?(T[0][0]=w.an(V.x,M),T[0][1]=V.y,T[1][0]=w.an(F.x,M),T[1][1]=F.y,c.cb.ZV(),G.x=T[0][0]*v,G.y=T[0][1]*v,Z.x=T[1][0]*v,Z.y=T[1][1]*v):(G.x=V.x*v,G.y=V.y*v,Z.x=F.x*v,Z.y=F.y*v),Z.x=6.283185307179586*(F.x-V.x)/M.S()+G.x,o){if(z.x=f,z.y=w.Iz(m,_,G,Z,f,s),isNaN(z.y))break}else{if(z.x=w.Gz(m,_,G,Z,s),isNaN(z.x))break;z.y=0}c.kb.xd(m,_,G.x,G.y,Z.x,Z.y,A,null,null,s);var ye=A.u;c.kb.xd(m,_,G.x,G.y,z.x,z.y,A,null,null,s);var pe=A.u;c.Gg.Tb(a)==2?(T[0][0]=z.x/v,T[0][1]=z.y/v,c.cb.XQ(),o?(j.y=T[0][1],j.x=u):(j.x=w.qs(T[0][0],V.x,F.x,M),j.y=u)):o?(j.x=u,j.y=z.y/v):(j.x=w.qs(z.x/v,V.x,F.x,M),j.y=u),R[0]=0<ye?c.P.Tk(pe/ye,0,1):.5,R[0]!=0&&R[0]!=1&&(ye=O.Na(ue),O.Wl(ye,R,1),O.Db(O.V(ye),j.x,j.y))}while(0);V.N(F)}}return O.Ke(h)},w.Hn=function(h,a,s,o,u){if(h.B())return h;var p=c.cb.bf(a);return w.Jp(h,s-180*p,360*p,a,o,u,!0)},w.Iz=function(h,a,s,o,u,p){if(3.141592653589793<=Math.abs(s.x-o.x)||!w.Un(s.x,o.x,u))return NaN;if(s.x>o.x)var f=o;else f=s,s=o;o=new c.ha(0);var m=new c.ha(0),v=new c.ha(0);c.kb.xd(h,a,f.x,f.y,s.x,s.y,m,o,null,p);var _=m.u,M=0,T=1,A=new c.h;for(A.N(f);_*(T-M)>1e-12*h;){var O=.5*(M+T);if(c.kb.qj(h,a,f.x,f.y,_*O,o.u,m,v,p),A.x=m.u,A.y=v.u,A.x==u)break;if(w.Un(f.x,A.x,u))T=O;else{if(!w.Un(s.x,A.x,u))return NaN;M=O}}return A.y},w.Un=function(h,a,s){return h=C.Ep(h),a=C.mx(h,C.Ep(a)),(s=C.mx(h,C.Ep(s)))==0||0<a&&0<s&&s<=a||0>a&&0>s&&s>=a},w.an=function(h,a){var s=a.wa-a.pa;return a.Kt(h-Math.floor((h-a.pa)/s)*s)},w.qs=function(h,a,s,o){var u=new c.Oc;for(u.L(a,s),s=o.S(),h=Math.floor((h-a)/s)*s+h,u=u.tf();Math.abs(h-u)>Math.abs(h+s-u);)h+=s;return h},w.Gz=function(h,a,s,o,u){if(s.y>o.y)var p=o;else p=s,s=o;if((o=new c.Oc).L(p.y,s.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-s.x))return NaN;if(p.x==s.x)return p.x;var f=new c.ha(0),m=new c.ha(0),v=new c.ha(0);c.kb.xd(h,a,p.x,p.y,s.x,s.y,m,f,null,u);var _=m.u,M=0,T=1,A=new c.h;for(A.N(p);_*(T-M)>1e-12*h;){var O=.5*(M+T);if(c.kb.qj(h,a,p.x,p.y,_*O,f.u,m,v,u),A.x=m.u,A.y=v.u,o.L(p.y,A.y),A.y==0)break;if(o.contains(0))T=O;else{if(o.L(s.y,A.y),!o.contains(0))return NaN;M=O}}return A.x},w.Jp=function(h,a,s,o,u,p,f){var m=new c.l;if(h.A(m),m.B())return h;var v=new c.Oc;m.en(v);var _=new c.Oc;if(_.L(a,a+s),_.contains(v)&&_.wa!=v.wa)return h;var M=new c.l;M.L(m);var T=h.K();if(T==33)return((m=(M=u?h:h.Qf()).Ng())<_.pa||m>=_.wa||f&&m==_.wa)&&(m+=Math.ceil((_.pa-m)/s)*s,m=_.Kt(m),M.YB(m)),M;if(T==550){for(o=(M=u?h:h.Qf()).vb(0),T=2*M.I(),h=!1,u=0;u<T;u+=2)((m=o.read(u))<_.pa||m>=_.wa||f&&m==_.wa)&&(h=!0,m+=Math.ceil((_.pa-m)/s)*s,m=_.Kt(m),o.write(u,m));return h&&M.Qc(1993),M}if(_.contains(v))return h;if(T==197)return s=u?h:h.Qf(),m.Fa(M),s.Zo(m),s;var A=.1*Math.max(m.da(),m.S());for(M.X(0,A),f=h,_=o.Yd(0),h=c.Ih.local(),u=new c.Ed;;){var O=Math.floor((v.pa-a)/s),R=Math.ceil((v.wa-a)/s);if(!(3<R-O))break;O=Math.floor(.5*(R+O)),M.v=m.v-A,M.C=a+s*O;var j=c.Vd.clip(f,M,_,p);M.v=M.C,M.C=m.C+A;var z=c.Vd.clip(f,M,_,p);u.ig((O-R)*s,0),z.Pc(u),T==1736?f=h.W(j,z,o,null):(f=j).add(z,!1),f.A(m),m.en(v)}for(M.v=a,M.C=a+s,(a=new c.l).L(M),a.X(_,0),(a=Math.floor((m.v-M.v)/s)*s)!=0?(M.move(a,0),u.ig(-a,0)):u.MB(),a=T==1607?new c.Ua(f.description):new c.Ea(f.description),p=new c.l,v=new c.l;m.C>M.v;)(A=c.Vd.clip(f,M,_,0)).A(v),(T==1607?!A.B()&&(v.S()>_||v.da()>_):!A.B()&&(T!=1736||v.S()>_))&&(A.Pc(u),A.A(v),a.A(p),p.X(_,_),p.isIntersecting(v)&&T==1736?a=h.W(a,A,o,null):a.add(A,!1)),M.move(s,0),u.shift(-s,0);return a},w.RI=function(h,a,s,o){var u=new c.ee(s.description);u.Gd(s,0,-1),u=c.cb.Bh(u,h,a);var p=s.I();if(o.Pa(),!c.cb.Xc(h)||p!=u.I())return!1;var f=new c.l;s.A(f);var m=new c.l;if(u.A(m),f=f.S(),m=m.S(),f!=0&&m!=0){if(m/=f,h=c.cb.ih(a).S()/c.cb.ih(h).S(),1e-10<Math.abs(m/h-1))return!1}else if(f!=0||m!=0)return!1;for(o.add(s,!1),s=0;s<p;s++)h=u.Oa(s),o.Db(s,h);return!0},w.Jz=function(){throw c.i.Fe()},w}()}(q||(q={})),function(c){var C,w,h;(w=C=c.ui||(c.ui={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(h=c.RK||(c.RK={})),c.Ab=function(){function a(){}return a.zv=function(s,o,u){if(u||0<o){for(s=s.toString(c.Tc.PE_STR_NAME_CANON|c.Tc.PE_STR_AUTH_NONE),o=[],u=0;u<s.length;u++)o[u]="a"<=s[u]&&"z">=s[u]?o[u]=s[u].toUpperCase():s[u];return o.join()}return s.toString(c.Tc.PE_STR_AUTH_TOP)},a.wr=function(s,o,u,p){var f=p.length,m=u.I();if(m!=0){var v=u.vb(0),_=Math.min(m,f),M=0,T=s.gh();isNaN(o)&&(o=0);for(var A=s.Xc(),O=179*(s=A?s.tc().Le().S():0)/360;0<m;){if(v.pB(M<<1,_,p),c.gj.projToGeogCenter(T,_,p,o),A)for(var R=0;R<_;R++){var j=p[R][0]-o,z=c.mc.sign(j),V=v.read(2*(M+R));0>z*c.mc.sign(V)&&Math.abs(j)>O&&(p[R][0]+=-z*s)}v.pC(M<<1,_,p),M+=_,m-=_,_=Math.min(m,f)}u.Qc(1993)}},a.DL=function(s,o,u,p){var f=0,m=s.gh();isNaN(f)&&(f=0);var v=s.Xc(),_=s.bf();s=360*_,_*=179;for(var M=p.length,T=0;T<u;){for(var A=T;A<u&&o[A].isNaN();++A)T++;var O=Math.min(M,u-T);if(0<O){A=1;for(var R=T+1;A<O;++A,++R)if(o[R].isNaN()){O=A;break}if(c.ua.Ey(p,o,T,O),c.gj.projToGeogCenter(m,O,p,f),v)for(A=0,R=T;A<O;++A,++R){var j=o[R].x,z=p[A][0]-f,V=c.mc.sign(z);0>V*c.mc.sign(j)&&Math.abs(z)>_&&(p[A][0]-=V*s)}c.ua.Dy(o,T,p,O),T+=O}}},a.Kx=function(s,o,u){var p=u.length,f=o.I();if(!(1>f)){var m=o.vb(0),v=Math.min(f,p),_=0,M=s.gh(),T=s.Xc(),A=T?s.Le().S():0,O=179*A/360,R=0;for(T&&(R=s.Bi());0<f;){if(m.pB(_<<1,v,u),c.gj.geogToProj(M,v,u),T)for(s=0;s<v;s++){var j=u[s][0],z=c.mc.sign(j),V=m.read(2*(_+s))-R;0>z*c.mc.sign(V)&&Math.abs(j)>O&&(u[s][0]+=-z*A)}m.pC(_<<1,v,u),_+=v,f-=v,v=Math.min(f,p)}o.Qc(1993)}},a.CL=function(s,o,u,p){if(u!=0){var f=s.gh(),m=s.Xc(),v=m?s.Le().S():0,_=179*v/360,M=0;for(m&&(M=s.Bi()),s=0;s<u;){for(var T=s;T<u&&o[T].isNaN();++T)s++;var A=Math.min(p.length,u-s);if(0<A){T=1;for(var O=s+1;T<A;++T,++O)if(o[O].isNaN()){A=T;break}if(c.ua.Ey(p,o,s,A),c.gj.geogToProj(f,A,p),m)for(T=0,O=s;T<A;T++){var R=p[T][0],j=c.mc.sign(R);0>j*c.mc.sign(o[O].x-M)&&Math.abs(R)>_&&(p[T][0]-=j*v)}c.ua.Dy(o,s,p,A),s+=A}}}},a.vr=function(s,o,u,p){var f=o.I();if(f!=0){var m=o.vb(0),v=s.ef,_=s.$f,M=v.tc().Sp(),T=_.tc().Sp(),A=v.bf(),O=_.bf();if((s=s.Yf)==null||s.count()==0){for(u=M/T,p=(v.Wp()-_.Wp())*O,T=-90*A,s=90*A,M=!1,O=1,v=2*f;O<v;)A=m.get(O),(_=c.P.Tk(A,T,s))!=A&&(m.set(O,_),M=!0),O+=2;if(p!=0||u!=1)for(M=!0,T=new c.h,O=0;O<f;O++)m.uc(2*O,T),T.x*=u,T.x+=p,T.y*=u,m.Vt(2*O,T);M&&o.Qc(1993)}else{v=p.length,_=Math.min(f,v);var R=c.P.mg(_),j=null,z=0,V=NaN,F=NaN,G=360*O,Z=O/A;u&&(F=90*O,V=89.9*A,j=c.P.mg(_));for(var K=!0,re=0;f!=0;){for(A=!1,m.pB(z<<1,_,p),O=0;O<_;O++)R[O]=p[O][0];if(u)for(O=0;O<_;O++){var te=Math.abs(p[O][1])-V;0<te&&(A=p[O][1],p[O][1]=c.mc.En(V,A),j[O]=c.mc.En(te,A),A=!0)}for(O=p[0][0],s.transform(p,_,M,T),K&&(re=p[0][0]-Z*O,K=!1),O=0;O<_;O++)te=p[O][0]-R[O]*Z-re,200<Math.abs(te)&&(p[O][0]=0<te?p[O][0]-G:p[O][0]+G);if(A){for(O=0;O<_;O++)j[O]!=0&&(p[O][1]+=Z*j[O],p[O][1]>F?p[O][1]=F:p[O][1]<-F&&(p[O][1]=-F));for(A=0;A<_;A++)j[A]=0}m.pC(z<<1,_,p),z+=_,f-=_,_=Math.min(f,v)}o.Qc(1993)}}},a.BL=function(s,o,u,p){if(s.ow)p=90*s.ef.bf(),c.ua.ZJ(o,u,-p,p);else{var f=s.Yf,m=s.ef,v=s.$f;s=m.Zr();var _=v.Zr(),M=m.bf(),T=90*M,A=v.bf();if(f==null||f.count()==0){if(p=s/_,f=(m.Wp()-v.Wp())*A,c.ua.ZJ(o,u,-T,T),f!=0||p!=1)for(A=0;A<u;A++)o[A].x*=p,o[A].x+=f,o[A].y*=p}else{m=Math.min(u,p.length),T=c.P.mg(m),v=360*A,M=A/M;for(var O=!0,R=0,j=0;u!=0;){for(A=0;A<m;A++)T[A]=o[A+j].x;for(A=o[0].x,c.ua.Ey(p,o,j,m),f.transform(p,m,s,_),c.ua.Dy(o,j,p,m),O&&(R=o[0].x-M*A,O=!1),A=0;A<m;A++){var z=o[j+A].x-T[A]*M-R;200<Math.abs(z)&&(o[j+A].x=0<z?o[j+A].x-v:o[j+A].x+v)}j+=m,u-=m,m=Math.min(u,p.length)}}}},a.fv=function(s,o){return s=s.ih(),isNaN(o)||s.Lu(o,0),s},a.PQ=function(s,o,u,p,f,m,v,_){for(var M=a.fv(p,f),T=M.S(),A=T/360,O=a.kE*A,R=s.vb(0),j=o.Xc(),z=j?T/o.Le().S():0,V=!1,F=new c.Ea(u.description),G=0,Z=u.ea();G<Z;++G){var K=j,re=new c.Ua(u.description);if(re.addPath(u,G,!0),v!=0){var te=a.KD(!0,re,M.H-_,M.H,v);(V=V||te)&&(K=!1)}var ue=-1;K&&(ue=s.Ca(G));var ye=re.vb(0),pe=re.I(),De=0,xe=ye.read(0),Qe=0;te=3*p.Yd(0);var We=!1,Ce=new c.h;Ce.Sc();var Jt=new c.h;Jt.Sc();for(var Ci=!1,Kt=1;Kt<pe;++Kt){var $t=c.h.construct(ye.gg(2*Kt),ye.gg(2*Kt+1)),Tt=$t.x,pt=Tt+De,si=pt-xe;if($t.x=pt,Math.abs(si)>O){if(K){var ct=ue+(Kt+1<pe?Kt:0),zs=R.read(2*(ue+Kt-1));ct=(R.read(2*ct)-zs)*z,Math.abs(si-ct)>1*A&&(K=!1)}K||(pt=Tt+(De-=c.mc.En(T,pt-xe)),++Qe,Ci=De!=0,$t.x=pt)}else We||c.ua.vG(Jt,Ce,$t,te)&&(We=!0);Ci&&ye.write(2*Kt,pt),xe=pt,Jt.N(Ce),Ce.N($t)}0<Qe&&re.Qc(1993),K=re.Oa(0),pe=re.Oa(pe-1),re=c.h.ub(K,pe)<te?a.pQ(re,p,f,m,We):a.qQ(s,G,re,p,f),F.add(re,!1)}return f=p.Yd(0),u=M.S()/180,a.Lt(F,M,.1*f,!1),F=F!=(f=c.ti.clip(F,M,f,u,m)),s=s.He(),v=0,0<(_=f.He())&&0>s?v=1:0>=_&&0<s&&(_==0?(_=NaN,o.Tb()==2?_=o.ol().He():o.Tb()==1&&(_=o.Le().rF()),s>.99*_&&(v=-1)):v=-1),v!=0&&((o=new c.Ea(f.description)).vp(M),(o=c.Zl.local().W(o,u,m)).add(f,!1),F=!0,f=o),F&&(f=c.$l.local().W(f,p,!1,m)),f},a.qQ=function(s,o,u,p,f){var m=u.I(),v=u.Oa(0),_=u.Oa(m-1);f=(p=a.fv(p,f)).S(),v=c.mc.sign(_.x-v.x);var M=new c.l;u.yc(M);var T=p.ik();if(_=T-f,T+=f,0<=v){var A=Math.ceil((_-M.v)/f);for(A*=f;_>M.v+A;)A+=f;for(;_<M.C+A;)A-=f;var O=A;720<M.S()&&(T=_+360*Math.ceil(M.S()/360))}else{for(A=Math.ceil((T-M.C)/f),A*=f;T<M.C+A;)A-=f;for(;T>M.v+A;)A+=f;O=A,720<M.S()&&(_=T-360*Math.ceil(M.S()/360))}A=v*f;var R=c.l.construct(M.v,M.G,M.C,M.H);R.move(O,0);var j=new c.Ed;j.ig(O,0),u.Pc(j),(M=new c.Ua(u.description)).add(u,!1),O=u.Oa(m-1),f=0;for(var z=M.Oa(0).x,V=0;0<v?R.C<T:R.v>_;)1024<=V&&(V=0),R.move(A,0),j.Lb=A,u.Pc(j),z+=A,p.v<=z&&p.C>=z&&(f=M.I()-1),u.Db(0,O),O=u.Oa(m-1),M.Fr(u,0,0,m-1,!1);return u=new c.Ea(M.description),m=0<s.Kr(o),u.add(M,!1),s=M.Oa(0),_=M.Oa(M.I()-1),o=u.ea()-1,(0>v?m:!m)?(v=c.h.construct(_.x,p.H),u.Ei(v),v=c.h.construct(p.ik(),p.H),u.Ei(v),p=c.h.construct(s.x,p.H)):(v=c.h.construct(_.x,p.G),u.Ei(v),v=c.h.construct(p.ik(),p.G),u.Ei(v),p=c.h.construct(s.x,p.G)),u.Ei(p),u.sG(0,o,0),u.fO(f),u},a.pQ=function(s,o,u,p,f){var m=new c.Ea(s.description);m.add(s,!1),m.yB(0,m.I()-1);var v=new c.l;m.yc(v);var _=(u=a.fv(o,u)).S(),M=Math.ceil((u.v-v.v)/_);for(M*=_;u.v>v.v+M;)M+=_;for(;u.v<v.C+M;)M-=_;if((M+=_)!=0){v.move(M,0);var T=new c.Ed;T.ig(M,0),m.Pc(T)}if(u.v<=v.v&&u.C>v.C)return f&&(f=m.He(),o=(m=c.$l.local().W(m,o,!0,p)).He(),(o=c.mc.sign(f)!=c.mc.sign(o))&&m.jJ()),m;for((s=new c.Ea(s.description)).add(m,!1),f=f||v.S()>_-o.Yd(0);v.v<u.C;)v.move(_,0),(T=new c.Ed).ig(_,0),m.Pc(T),s.add(m,!1);return f&&(f=s.He(),s.$o(1),o=(s=c.$l.local().W(s,o,!0,p)).He(),(o=c.mc.sign(f)!=c.mc.sign(o))&&s.jJ()),s},a.KD=function(s,o,u,p,f){for(var m=o.vb(0),v=o.I(),_=!1,M=0;M<v;M++){var T=c.h.construct(m.gg(2*M),m.gg(2*M+1));if(1&f&&T.y>=u){_=!0;break}if(2&f&&T.y<=-u){_=!0;break}}if(!_)return!1;m=!1,s&&(m=o.Pn(0)),v=(s=new c.hd).Ib(o),_=s.Ob(v);var A=-1,O=!0,R=new c.h;R.Sc(),M=new c.Ta;for(var j=-1,z=s.Ya(_);z!=-1;z=s.V(z)){T=s.Oa(z);var V=1&f&&90<=T.y?1:0;if(V|=2&f&&T.y<=-u?2:0,0<A&&A!=V){if(R.x!=T.x){R.x=T.x,s.Xi(s.Na(z),M);var F=s.yj(_,z,M);s.mf(F,R)}if(m)for(j=j!=-1?s.V(j):s.Ya(_),F=s.Na(z);j!=F;)j=s.qd(j,!1);j=-1}0<V&&(T.y=c.mc.En(p,T.y),s.mf(z,T),O||A==V||(T.x!=R.x?(s.Xi(z,M),F=s.yj(_,z,M),s.Db(F,R.x,T.y),j=F):j=z)),A=V,R=T,O=!1}if(m){if(j!=-1)for(j=s.V(j);j!=-1;)j=s.qd(j,!1);u=s.Ya(_),s.hq(u,s.tj(_))||(s.Xi(u,M),s.yj(_,-1,M))}return s.Ke(v).copyTo(o),!0},a.Hz=function(s,o,u,p){var f=s;if(f.B()||u==C.DontClip)return f;var m=f.K();if(m==33)return f=[(p=f).D()],a.tG(f,1,o,u),f[0].isNaN()?p.Pa():p.Db(f[0]),s;var v=(s=o.tc()).bf(),_=90*v,M=180*v,T=360*v,A=o.Bi(),O=.5*v,R=new c.l;f.A(R);var j=o.Xr(),z=o.KQ(),V=j.K()==197;if(o=new c.l,j.A(o),u==C.PannableFold&&(u=s.Le().S(),o.v=A-.5*u,o.C=o.v+u),R.G<-_||R.H>_){if(new c.l().L(R.v-v,-_,R.C+v,_),(f=c.ti.Pu(f,o,s,NaN,0,p)).B())return f;f.A(R)}if(z&&(o.H<R.G||o.G>R.H))return f.Ja();if(R.S()>T&&(f=a.Jp(f,A-M,T,s,!0,0,!0,p)).A(R),(_=a.$N(R.v,R.C,o.v,o.C,T))!=0&&R.move(_,0),R.C>o.C||R.v<o.v){if(R.C>o.C)for(;R.v>=o.C;)R.move(-T,0),_-=T;for(;R.v<o.C-T;)R.move(T,0),_+=T}if(u=c.ua.Ju(s,j),_!=0&&((v=new c.Ed).ig(_,0),f.Pc(v)),z){if(V&&o.contains(R))return f;for(z=[null,null],_=0;2>_;_++){if(V?v=c.ba.Ic(m)?c.ti.clip(f,o,u,O,p):c.ti.clip(f,o,u,0,p):(v=c.Zj.local().W(f,j,s,p))==j&&(v=c.ba.kg(v)),o.v<=R.v&&o.C>=R.C||o.v>=R.v&&o.C<=R.C)return v;z[_]=v,_==0&&(R.move(-T,0),(v=new c.Ed).ig(-T,0),f.Pc(v))}if(m==550)z[0].Gd(z[1],0,-1);else if(c.ba.Ic(m))z[0].add(z[1],!1);else{if(m!=33)throw c.i.ga("intersect_with_GCS_horizon: unexpected geometry type");z[0].B()&&(z[0]=z[1])}return z[0]}if(o.H<R.G||o.G>R.H)return f;for(m=0;!f.B()&&R.C>o.v;)m!=0&&((v=new c.Ed).ig(m,0),f.Pc(v)),c.fj.local().W(4,f,j,s,p)||j==(f=c.mp.local().W(f,j,s,p))&&(f=c.ba.kg(f)),m!=0&&((O=new c.Ed).ig(-m,0),f.Pc(O)),m-=T,R.move(-T,0);return f},a.tG=function(s,o,u,p){if(o!=0&&p!=C.DontClip)if(p==C.PannableFold){p=u.CR();for(var f=o,m=0;m<o;m++)(s[m].y>p.H||s[m].y<p.G)&&(s[m].Sc(),f--);f!=0&&a.cv(s,o,p.v,p.S())}else{var v=90*(p=u.bf()),_=180*p;for(p*=360,f=o,m=0;m<o;m++)(s[m].y>v||s[m].y<-v)&&(s[m].Sc(),f--);if(f!=0){(f=new c.l).bx(s,o),v=u.Xr();var M=u.kv();m=v.K()==197;var T=new c.l;if(v.A(T),!M||!(T.H<f.G||T.G>f.H))if(M)if(a.cv(s,o,T.ik()-_,p),f=o,m)for(m=0;m<o;m++)T.contains(s[m])||(s[m].Sc(),f--);else for(u=c.ua.Ju(u.tc(),v),m=0;m<o;m++)(_=c.jd.Zd(v,s[m],u)!=0)||(s[m].Sc(),f--);else for(a.cv(s,o,-_,p),f=o,u=c.ua.Ju(u.tc(),v),m=0;m<o;m++)(_=s[m]).isNaN()&&f--,M=a.oE(_.x,T.v,T.C,p),_.x+=M,(_=c.jd.Zd(v,_,u)!=0)&&(s[m].Sc(),f--)}}},a.Jp=function(s,o,u,p,f,m,v,_){var M=s.K(),T=o+u;if(M===33){var A=(p=f?s:s.Qf()).Ng();return(A<o||A>=T||v&&A==T)&&(A+=Math.ceil((o-A)/u)*u,A=c.P.Tk(A,o,T),p.YB(A)),p}if(s.B()||(A=new c.l,s.A(A),A.B()))return s;var O=new c.Oc;A.en(O);var R=new c.Oc;if(R.L(o,T),R.contains(O))return s;if((T=new c.l).L(A),M===550){for(_=(p=f?s:s.Qf()).vb(0),M=2*p.I(),T=!1,o=0;o<M;o+=2)((A=_.read(o))<R.pa||A>=R.wa||v&&A==R.wa)&&(T=!0,A+=Math.ceil((R.pa-A)/u)*u,A=R.Kt(A),_.write(o,A));return T&&p.Qc(1993),p}if(M==197)return u=f?s:s.Qf(),A.Fa(T),u.Zo(A),u;var j=.1*Math.max(A.da(),A.S());for(T.X(0,j),v=s,R=p.Yd(0),s=c.Ih.local(),f=new c.Ed;;){var z=Math.floor((O.pa-o)/u),V=Math.ceil((O.wa-o)/u);if(!(3<V-z))break;z=Math.floor(.5*(V+z)),T.v=A.v-j,T.C=o+u*z;var F=c.ti.clip(v,T,R,m,_);T.v=T.C,T.C=A.C+j;var G=c.ti.clip(v,T,R,m,_);f.ig((z-V)*u,0),G.Pc(f),M==1736?v=s.W(F,G,p,null):(v=F).add(G,!1),v.A(A),A.en(O)}for(T.v=o,T.C=o+u,(o=new c.l).L(T),o.X(R,0),(o=Math.floor((A.v-T.v)/u)*u)!=0?(T.move(o,0),f.ig(-o,0)):f.MB(),o=M==1607?new c.Ua(v.description):new c.Ea(v.description),m=new c.l,O=new c.l;A.C>T.v;)(j=c.ti.clip(v,T,R,0,_)).A(O),(M==1607?!j.B()&&(O.S()>R||O.da()>R):!j.B()&&(M!=1736||O.S()>R))&&(j.Pc(f),j.A(O),o.A(m),m.X(R,R),m.isIntersecting(O)&&M==1736?o=s.W(o,j,p,null):o.add(j,!1)),T.move(u,0),f.shift(-u,0);return o},a.cv=function(s,o,u,p){for(var f=u+p,m=0;m<o;m++){var v=s[m].x;u<=v&&v<f||!(v<u||v>f||v==f)||(v+=Math.ceil((u-v)/p)*p,v=c.P.Tk(v,u,f),s[m].x=v)}},a.Hn=function(s,o,u,p,f,m){if(!o.Xc())throw c.i.ga("fold_into_360_degree_range");if(s.B())return s;if(o.Tb()==2){u=o.rv();var v=o.qv()-u}else{var _=o.bf();v=360*_,u-=180*_}return a.Jp(s,u,v,o,p,f,!0,m)},a.lF=function(s,o,u,p){if(u.Tb()==2)p=u.rv(),u=u.qv()-p;else{var f=u.bf();u=360*f,p-=180*f}a.cv(s,o,p,u)},a.nj=function(s,o){var u=o.Le();if(s.K()==33){var p=s.kh();return u.G<=p&&p<=u.H?s:s.Ja()}p=new c.l,s.A(p);var f=new c.l;return f.L(u),f.v=p.v,f.C=p.C,f.X(.01*f.da(),0),u=c.ua.py(o,p),f.contains(p)?s:c.ti.clip(s,f,u,0,null)},a.kr=function(s,o,u){return s>o.C&&s-o.C<u?o.C:s<o.v&&o.v-s<u?o.v:s},a.BX=function(s,o,u,p){p.x=a.kr(s.x,o,u),p.y=s.y},a.AX=function(s,o,u,p){for(var f=0;f<o;f++)s[f].y<u.G||s[f].y>u.H?s[f].Sc():s[f].x=a.kr(s[f].x,u,p)},a.Lt=function(s,o,u,p){if(!s.B()){var f=s.K();if(!p||f!=1736)if(c.ba.zj(f)){p=s.vb(0),f=0;for(var m=s.I();f<m;f++){var v=p.read(2*f),_=a.kr(v,o,u);_!=v&&p.write(2*f,_)}s.Qc(1993)}else if(f==197)p=new c.l,s.A(p),p.v=a.kr(p.v,o,u),p.C=a.kr(p.C,o,u),s.Zo(p);else{if(f!=33)throw c.i.ga("internal error");s.YB(a.kr(s.Ng(),o,u))}}},a.pS=function(s,o,u,p){var f=new c.hd,m=f.Ib(s);return s=c.ua.Ju(o,s),a.ms(f,m,o,s,u,!0,p),f.Ke(m)},a.ms=function(s,o,u,p,f,m,v){if(!u.Xc())throw c.i.O("invalid call");var _=u.Le(),M=u.tc(),T=M.gh().getDatum().getSpheroid();M=M.Id().ci;var A=T.getFlattening();T=T.getAxis(),A*=2-A;var O=new c.Oc;_.en(O);var R=null,j=[[0,0],[0,0]];if(u.Tb()==2?(R=u.gh(),m?(j[0][0]=a.an(v,O),j[0][1]=_.Lp(),c.gj.projToGeog(R,1,j),_=j[0][0]*M):(j[0][0]=_.ik(),j[0][1]=v,c.gj.projToGeog(R,1,j),_=j[0][1]*M)):_=v*M,!m&&_!=0&&f!=h.GreatElliptic)throw c.i.ga("invalid argument");var z=new c.ha,V=[0],F=new c.h,G=new c.h,Z=new c.h,K=[null,null],re=new c.h,te=new c.h,ue=new c.h,ye=new c.h;for(o=s.Ob(o);o!=-1;o=s.Sb(o)){var pe=s.Ya(o);s.D(pe,re);for(var De=!1,xe=pe=s.V(pe);xe!=-1;xe=s.V(xe)){if(xe==pe){if(De)break;De=!0}if(s.D(xe,te),m&&(p<v-re.x&&te.x-v>p||p<v-te.x&&re.x-v>p)||!m&&(v!=0||p<-re.y&&te.y>p||p<-te.y&&re.y>p))do if(!(Math.abs(re.x-te.x)>=.5*O.S())){if(u.Tb()==2?(j[0][0]=a.an(re.x,O),j[0][1]=re.y,j[1][0]=a.an(te.x,O),j[1][1]=te.y,c.gj.projToGeogCenter(R,2,j,0),ue.x=j[0][0]*M,ue.y=j[0][1]*M,ye.y=j[1][1]*M):(ue.x=re.x*M,ue.y=re.y*M,ye.y=te.y*M),ye.x=2*(te.x-re.x)*Math.PI/O.S()+ue.x,m){if(G.x=_,G.y=a.Iz(T,A,ue,ye,_,f),isNaN(G.y))break;K[0]=G;var Qe=1}else if(f==h.GreatElliptic){var We=[0,0];if((Qe=c.Nx.Jz(A,ue,ye,_,We))==0)break;G.x=We[0],G.y=_,K[0]=G,Qe==2&&(Z.x=We[1],Z.y=_,K[1]=Z)}else{if(G.x=a.Gz(T,A,ue,ye,f),isNaN(G.x))break;G.y=0,K[0]=G,Qe=1}var Ce=-1;for(We=0;We<Qe;We++){c.kb.xd(T,A,ue.x,ue.y,ye.x,ye.y,z,null,null,f);var Jt=z.u;c.kb.xd(T,A,ue.x,ue.y,K[We].x,K[We].y,z,null,null,f);var Ci=z.u;if(u.Tb()==2?(j[0][0]=K[We].x/M,j[0][1]=K[We].y/M,c.gj.geogToProj(R,1,j),m?(F.y=j[0][1],F.x=v):(F.x=a.qs(j[0][0],re.x,te.x,O),F.y=v)):m?(F.x=v,F.y=K[We].y/M):(F.x=a.qs(K[We].x/M,re.x,te.x,O),F.y=v),V[0]=0<Jt?c.P.Tk(Ci/Jt,0,1):.5,V[0]==0||V[0]==1)break;Ce>V[0]||(Ce=s.Na(xe),s.Wl(Ce,V,1),s.Db(s.V(Ce),F.x,F.y),Ce=V[0])}}while(0);re.N(te)}}},a.an=function(s,o){var u=o.wa-o.pa;return o.Kt(s-Math.floor((s-o.pa)/u)*u)},a.qs=function(s,o,u,p){var f=new c.Oc;for(f.L(o,u),u=p.S(),s=Math.floor((s-o)/u)*u+s,f=f.tf();Math.abs(s-f)>Math.abs(s+u-f);)s+=u;return s},a.Un=function(s,o,u){return s=c.sr.Ep(s),o=c.sr.mx(s,c.sr.Ep(o)),(u=c.sr.mx(s,c.sr.Ep(u)))==0||0<o&&0<u&&u<=o||0>o&&0>u&&u>=o},a.Iz=function(s,o,u,p,f,m){if(m==h.GreatElliptic)return c.Nx.NS(o,u,p,f);if(Math.abs(u.x-p.x)>=Math.PI||!a.Un(u.x,p.x,f))return NaN;if(u.x>p.x)var v=p;else v=u,u=p;p=new c.ha;var _=new c.ha,M=new c.ha;c.kb.xd(s,o,v.x,v.y,u.x,u.y,_,p,null,m);var T=_.u,A=0,O=1,R=new c.h;for(R.N(v);T*(O-A)>1e-12*s;){var j=.5*(A+O);if(c.kb.qj(s,o,v.x,v.y,T*j,p.u,_,M,m),R.x=_.u,R.y=M.u,R.x==f)break;if(a.Un(v.x,R.x,f))O=j;else{if(!a.Un(u.x,R.x,f))return NaN;A=j}}return R.y},a.Gz=function(s,o,u,p,f){if(f==h.GreatElliptic)return s=[0,0],c.Nx.Jz(o,u,p,0,s),s[0];if(u.y>p.y)var m=p;else m=u,u=p;if((p=new c.Oc).L(m.y,u.y),!p.contains(0)||Math.abs(m.x-u.x)>=Math.PI)return NaN;if(m.x==u.x)return m.x;var v=new c.ha,_=new c.ha,M=new c.ha;c.kb.xd(s,o,m.x,m.y,u.x,u.y,_,v,null,f);var T=_.u,A=0,O=1,R=new c.h;for(R.N(m);T*(O-A)>1e-12*s;){var j=.5*(A+O);if(c.kb.qj(s,o,m.x,m.y,T*j,v.u,_,M,f),R.x=_.u,R.y=M.u,p.L(m.y,R.y),R.y==0)break;if(p.contains(0))O=j;else{if(p.L(u.y,R.y),!p.contains(0))return NaN;A=j}}return R.x},a.RI=function(s,o,u,p){if(!s.ef.Xc())return!1;var f=new c.ee(o.description);if(f.Gd(o,0,-1),p=c.Gx.local().W(f,s,p),f=o.I(),u.Pa(),f!=p.I())return!1;var m=new c.l;o.A(m);var v=new c.l;if(p.A(v),m=m.S(),v=v.S(),m!=0&&v!=0){if(v/=m,s=s.$f.ih().S()/s.ef.ih().S(),1e-10<Math.abs(v/s-1))return!1}else if(m!=0||v!=0)return!1;for(u.add(o,!1),o=new c.h,s=0;s<f;s++)p.D(s,o),u.Db(s,o);return!0},a.lN=function(s,o){return(s%=360*o)>=180*o&&(s-=360*o),s},a.OI=function(s,o,u,p){if(u==C.Clip){var f=o.ol();f.K()==197?(u=new c.l,f.A(u),f=c.ua.py(o,u),s=c.ti.clip(s,u,f,5e4*o.rm(),p)):c.fj.local().W(1,f,s,o,p)||(s=c.Zj.local().W(s,f,o,p))==f&&(s=c.Xk.kg(s))}else o.Xc()&&(p=new c.l,s.yc(p),o.Le().contains(p)||(a.Lt(s,o.Le(),o.Yd(0),!0),u==C.PannableFold&&(s=a.nj(s,o)),s=a.Hn(s,o,0,!0,1e5*o.rm(),null)));return s},a.SD=function(s,o,u){var p=o.Yr();if(p==null)return s;var f=(o=o.tc()).Le().S(),m=new c.l;s.yc(m);var v=new c.Oc;m.en(v),m=p.Ha(),p=null;for(var _=new c.Ed;m.ab();)for(;m.Ia();){var M=m.ia(),T=M.Vg(0,0),A=new c.Oc;for(A.L(T.pa,T.wa),T=0;A.wa>v.pa;)A.move(-f),--T;for(;A.pa<=v.wa;){if(A.isIntersecting(v)){p==null&&(p=new c.Ua);var O=c.zb.YO(M.bc(),M.xc());T!=0&&(_.ig(T*f,0),O.Pc(_)),p.pc(O,!0)}A.move(f),++T}}return p!=null?(o=c.ua.bO(o,p),o=c.ua.Gr(o),c.bu.gP(s,p,o,u)):s},a.$N=function(s,o,u,p,f){return s>=u&&o<=p?0:a.oE(.5*(o+s),u,p,f)},a.oE=function(s,o,u,p){return c.mc.round((.5*(u+o)-s)/p)*p},a.QQ=function(s,o,u,p,f,m,v,_){var M=a.fv(p,f),T=M.S(),A=T/360,O=a.kE*A,R=s.vb(0),j=o.Xc(),z=j?T/o.Le().S():0;o=s.Ja();for(var V=0,F=u.ea();V<F;++V){var G=j,Z=new c.Ua(u.description);Z.addPath(u,V,!0);var K=u.ec(V);v!=0&&(K=a.KD(K,Z,M.H-_,M.H,v))&&(G=!1);var re=-1;K=Z.I();var te=!1;G&&(re=s.Ca(V),te=s.ec(V));var ue=Z.vb(0),ye=0,pe=ue.read(0),De=0,xe=3*p.Yd(0),Qe=!1,We=new c.h;We.Sc();var Ce=new c.h;Ce.Sc();for(var Jt=!1,Ci=1;Ci<K;++Ci){var Kt=c.h.construct(ue.gg(2*Ci),ue.gg(2*Ci+1)),$t=Kt.x,Tt=$t+ye,pt=Tt-pe;if(Kt.x=Tt,Math.abs(pt)>O){if(G){var si=re+Ci-1,ct=re;(!te||Ci+1<K)&&(ct+=Ci),si=R.read(2*si),ct=(R.read(2*ct)-si)*z,Math.abs(pt-ct)>1*A&&(j=!1)}G||(Tt=$t+(ye-=c.mc.En(T,Tt-pe)),++De,Jt=ye!=0,Kt.x=Tt)}else Qe||c.ua.vG(We,Ce,Kt,xe)&&(Qe=!0);Jt&&ue.write(2*Ci,Tt),pe=Tt,We.N(Ce),Ce.N(Kt)}De!=0&&Z.Qc(1993),G=Z.Oa(0),K=Z.Oa(K-1),c.h.ub(G,K),Z=a.rQ(Z,p,isNaN(f)?0:f,m),o.add(Z,!1)}return s=p.Yd(0),u=M.S()/180,a.Lt(o,M,.1*s,!1),c.ti.clip(o,M,s,u,m)},a.rQ=function(s,o,u,p){return a.Hn(s,o,u,!0,0,p)},a.JS=function(s,o,u,p){var f=s.K();if(f==1736)for(o=o!=null?o.Yd(0):0,f=0;f<p;f++)c.jd.Zd(s,u[f],o)!=1&&u[f].Sc();else{if(f!=197)throw c.i.O();for(f=0;f<p;f++)s.ZO(u[f])||u[f].Sc()}},a.bl=function(s,o,u,p){if(32>u)for(var f=new c.Ta,m=0;m<u;m++)f.Db(o[m]),s.bl(f,p).D(o[m]);else{var v=new c.ee;for(v.se(3),v.CD(o,u),f=v.vb(3),m=0;m<u;m++)f.write(m,m);for(m=s.bl(v,p),s=m.vb(0),f=m.vb(3),p=c.h.construct(NaN,NaN),v=0;v<u;v++)o[v]=p;for(u=m.I(),m=0;m<u;m++)p=f.read(m),s.uc(2*m,o[p])}},a.al=function(s,o,u,p){if(32>u)for(var f=new c.Ta,m=0;m<u;m++)f.Db(o[m]),s.al(f,p).D(o[m]);else{var v=new c.ee;for(v.se(3),v.CD(o,u),f=v.vb(3),m=0;m<u;m++)f.write(m,m);for(m=s.al(v,p),s=m.vb(0),f=m.vb(3),p=c.h.construct(NaN,NaN),v=0;v<u;v++)o[v]=p;for(u=m.I(),m=0;m<u;m++)p=f.read(m),s.uc(2*m,o[p])}},a.kE=210,a}()}(q||(q={})),function(c){var C;(C=c.PL||(c.PL={}))[C.rightSide=1]="rightSide";var w=function(){function h(a,s,o){this.Ds=new c.h,a===void 0?this.Ko=-1:(this.Ds.N(a),this.Ko=s,this.La=o,this.pw=0)}return h.prototype.RJ=function(a){this.pw=a?1|this.pw:-2&this.pw},h.prototype.B=function(){return 0>this.Ko},h.prototype.az=function(){if(this.B())throw c.i.ga("invalid call");return new c.Ta(this.Ds.x,this.Ds.y)},h.prototype.Va=function(){if(this.B())throw c.i.ga("invalid call");return this.Ko},h.prototype.cz=function(){if(this.B())throw c.i.ga("invalid call");return this.La},h.prototype.Nz=function(){return(1&this.pw)!=0},h.prototype.by=function(a,s,o,u){this.Ds.x=a,this.Ds.y=s,this.Ko=o,this.La=u},h}();c.bm=w}(q||(q={})),function(c){var C=function(){function h(){}return h.prototype.Wo=function(a,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,a.yc(this.Gk),this.Gk.X(s,s),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=c.ba.zd(a.K()))?(this.OH=a.bc(),this.NH=a.xc(),this.ra=s):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},h.prototype.Zi=function(a,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(a),this.Gk.X(s,s),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},h.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var a=null,s=null,o=null,u=null;this.xs&&(a=new c.h,s=new c.h,o=new c.l);for(var p=!1;!p;){for(;this.vk!=-1;){var f=this.Gb.Xy(this.Gb.hv(this.vk));if(f.isIntersecting(this.Gk)){if(!this.xs){p=!0;break}if(a.N(this.OH),s.N(this.NH),o.L(f),o.X(this.ra,this.ra),0<o.uy(a,s)){p=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){f=this.vh.Gc();var m=this.Ki[this.Ki.length-1];for(u==null&&((u=[])[0]=new c.l,u[1]=new c.l,u[2]=new c.l,u[3]=new c.l),w.zJ(m,u),this.vh.Jf(),--this.Ki.length,m=0;4>m;m++){var v=this.Gb.Np(f,m);if(v!=-1&&0<this.Gb.RR(v)&&u[m].isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),s.N(this.NH),o.L(u[m]),o.X(this.ra,this.ra),0<o.uy(a,s)){var _=new c.l;_.L(u[m]),this.vh.add(v),this.Ki.push(_)}}else(_=new c.l).L(u[m]),this.vh.add(v),this.Ki.push(_)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},h.XO=function(a,s,o){var u=new h;return u.Gb=a,u.Gk=new c.l,u.vh=new c.ja(0),u.Ki=[],u.Wo(s,o),u},h.WO=function(a,s,o){var u=new h;return u.Gb=a,u.Gk=new c.l,u.vh=new c.ja(0),u.Ki=[],u.Zi(s,o),u},h.VO=function(a){var s=new h;return s.Gb=a,s.Gk=new c.l,s.vh=new c.ja(0),s.Ki=[],s},h}();c.CY=C;var w=function(){function h(a,s){this.jf=new c.ad(11),this.ai=new c.ad(5),this.ys=[],this.iw=new c.ja(0),this.Da=new c.l,this.Pk(a,s)}return h.prototype.reset=function(a,s){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(a,s)},h.prototype.xj=function(a,s){return this.Bv(a,s,0,this.Da,this.kf,!1,-1)},h.prototype.Ez=function(a,s,o){o=o==-1?this.kf:this.RF(o);var u=this.da(o),p=this.jR(o);return this.Bv(a,s,u,p,o,!1,-1)},h.prototype.ka=function(a){return this.eR(a)},h.prototype.BF=function(a){return this.Xy(this.hv(a))},h.prototype.da=function(a){return this.lv(a)},h.prototype.jR=function(a){var s=new c.l;s.L(this.Da);var o=this.lv(a);a=this.LF(a);for(var u=0;u<2*o;u+=2){var p=c.P.truncate(3&a>>u);p==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):p==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(p==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},h.prototype.RR=function(a){return this.vz(a)},h.prototype.qR=function(a,s){return C.XO(this,a,s)},h.prototype.HF=function(a,s){return C.WO(this,a,s)},h.prototype.getIterator=function(){return C.VO(this)},h.prototype.Pk=function(a,s){if(0>s||32<2*s)throw c.i.O("invalid height");this.wT=s,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},h.prototype.Bv=function(a,s,o,u,p,f,m){if(!u.contains(s))return o==0?-1:this.Bv(a,s,0,this.Da,this.kf,f,m);if(!f)for(var v=p;v!=-1;v=this.DR(v))this.jx(v,this.vz(v)+1);(v=new c.l).L(u),u=p;var _=[];for(_[0]=new c.l,_[1]=new c.l,_[2]=new c.l,_[3]=new c.l;o<this.wT&&this.dO(u);o++){h.zJ(v,_);for(var M=!1,T=0;4>T;T++)if(_[T].contains(s)){M=!0;var A=this.Np(u,T);A==-1&&(A=this.mP(u,T)),this.jx(A,this.vz(A)+1),u=A,v.L(_[T]);break}if(!M)break}return this.nS(a,s,o,v,u,f,p,m)},h.prototype.nS=function(a,s,o,u,p,f,m,v){var _=this.IF(p);if(f){if(p==m)return v;this.NP(v),f=v}else f=this.oP(),this.IB(f,a),this.FW(this.hv(f),s);return this.hX(f,p),_!=-1?(this.hx(f,_),this.ex(_,f)):this.BJ(p,f),this.NB(p,f),this.dx(p,this.nv(p)+1),this.cO(p)&&this.HQ(o,u,p),f},h.prototype.NP=function(a){var s=this.RF(a),o=this.IF(s),u=this.JR(a),p=this.pv(a);this.Wr(s)==a?(p!=-1?this.hx(p,-1):this.NB(s,-1),this.BJ(s,p)):o==a?(this.ex(u,-1),this.NB(s,u)):(this.hx(p,u),this.ex(u,p)),this.hx(a,-1),this.ex(a,-1),this.dx(s,this.nv(s)-1)},h.zJ=function(a,s){var o=.5*(a.v+a.C),u=.5*(a.G+a.H);s[0].L(o,u,a.C,a.H),s[1].L(a.v,u,o,a.H),s[2].L(a.v,a.G,o,u),s[3].L(o,a.G,a.C,u)},h.prototype.cO=function(a){return this.nv(a)==8&&!this.bG(a)},h.prototype.HQ=function(a,s,o){var u=this.Wr(o);do{var p=this.hv(u),f=this.ai.U(u,0);p=this.Xy(p),this.Bv(f,p,a,s,o,!0,u),u=f=this.pv(u)}while(u!=-1)},h.prototype.dO=function(a){return 8<=this.nv(a)||this.bG(a)},h.prototype.bG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},h.prototype.mP=function(a,s){var o=this.jf.De();return this.JW(a,s,o),this.jx(o,0),this.dx(o,0),this.Rk(o,a),this.FJ(o,this.lv(a)+1),this.IJ(o,s<<2*this.lv(a)|this.LF(a)),o},h.prototype.oP=function(){var a=this.ai.De();if(0<this.iw.size){var s=this.iw.Gc();this.iw.Jf()}else s=this.ys.length,this.ys.push(new c.l);return this.GW(a,s),a},h.prototype.Np=function(a,s){return this.jf.U(a,s)},h.prototype.JW=function(a,s,o){this.jf.T(a,s,o)},h.prototype.Wr=function(a){return this.jf.U(a,4)},h.prototype.BJ=function(a,s){this.jf.T(a,4,s)},h.prototype.IF=function(a){return this.jf.U(a,5)},h.prototype.NB=function(a,s){this.jf.T(a,5,s)},h.prototype.LF=function(a){return this.jf.U(a,6)},h.prototype.IJ=function(a,s){this.jf.T(a,6,s)},h.prototype.nv=function(a){return this.jf.U(a,7)},h.prototype.vz=function(a){return this.jf.U(a,8)},h.prototype.dx=function(a,s){this.jf.T(a,7,s)},h.prototype.jx=function(a,s){this.jf.T(a,8,s)},h.prototype.DR=function(a){return this.jf.U(a,9)},h.prototype.Rk=function(a,s){this.jf.T(a,9,s)},h.prototype.lv=function(a){return this.jf.U(a,10)},h.prototype.FJ=function(a,s){this.jf.T(a,10,s)},h.prototype.eR=function(a){return this.ai.U(a,0)},h.prototype.IB=function(a,s){this.ai.T(a,0,s)},h.prototype.JR=function(a){return this.ai.U(a,1)},h.prototype.pv=function(a){return this.ai.U(a,2)},h.prototype.hx=function(a,s){this.ai.T(a,1,s)},h.prototype.ex=function(a,s){this.ai.T(a,2,s)},h.prototype.RF=function(a){return this.ai.U(a,3)},h.prototype.hX=function(a,s){this.ai.T(a,3,s)},h.prototype.hv=function(a){return this.ai.U(a,4)},h.prototype.GW=function(a,s){this.ai.T(a,4,s)},h.prototype.Xy=function(a){return this.ys[a]},h.prototype.FW=function(a,s){this.ys[a].L(s)},h}();c.fu=w}(q||(q={})),function(c){var C;(C=c.WK||(c.WK={}))[C.Outside=0]="Outside",C[C.Inside=1]="Inside",C[C.Border=2]="Border";var w=function(){function a(s,o){this.KT=o,this.Xh=s}return a.prototype.ax=function(s,o){this.dH!=o&&s.flush(),this.dH=o},a.prototype.bF=function(s,o){for(var u=0;u<o;)for(var p=s[u++],f=s[u++],m=s[u++]*this.KT;p<f;p++)this.Xh[m+(p>>4)]|=this.dH<<2*(15&p)},a}();c.DY=w;var h=function(){function a(s,o,u){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(s,o,u)}return a.create=function(s,o,u){if(!a.uE(s))throw c.i.O();return a.rP(s,o,u)},a.kW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw c.i.ga("Internal Error")}return s},a.uE=function(s){return!(s.B()||s.K()!=1607&&s.K()!=1736)},a.prototype.mQ=function(s,o){o=o.Ha();for(var u=new c.h,p=new c.h;o.ab();)for(;o.Ia();){var f=o.ia();if(f.K()!=322)throw c.i.ga("Internal Error");s.Gh(f.bc(),u),s.Gh(f.xc(),p),this.Ti.fy(u.x,u.y,p.x,p.y)}this.Ti.dJ(c.Ox.Bx)},a.prototype.nQ=function(){throw c.i.ga("Internal Error")},a.prototype.My=function(s,o){for(var u=1;4>u;u++)s.fy(o[u-1].x,o[u-1].y,o[u].x,o[u].y);s.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.dJ(c.Ox.Bx)},a.prototype.mK=function(s,o,u){for(var p=[null,null,null,null],f=0;f<p.length;f++)p[f]=new c.h;o=o.Ha(),u=this.Lk.$X(u)+1.5,f=new c.h;for(var m=new c.h,v=new c.h,_=new c.h,M=new c.h,T=new c.l,A=new c.h;o.ab();){var O=!1,R=!0;for(A.na(0,0);o.Ia();){var j=o.ia();if(_.x=j.ta,_.y=j.oa,M.x=j.qa,M.y=j.ma,T.Pa(),T.$b(_.x,_.y),T.Nk(M.x,M.y),this.xl.CG(T)){this.Lk.Gh(M,M),R?(this.Lk.Gh(_,_),A.N(_),R=!1):_.N(A),f.vc(M,_);var z=.5>(j=f.length());j==0?f.na(1,0):(z||A.N(M),f.scale(u/j),m.na(-f.y,f.x),v.na(f.y,-f.x),_.sub(f),M.add(f),p[0].add(_,m),p[1].add(_,v),p[2].add(M,v),p[3].add(M,m),z?O=!0:this.My(s,p))}else O&&(this.My(s,p),O=!1),R=!0}O&&this.My(s,p)}},a.prototype.nC=function(s){return c.P.truncate(s*this.lH+this.WH)},a.prototype.oC=function(s){return c.P.truncate(s*this.Gs+this.YH)},a.rP=function(s,o,u){return new a(s,o,u)},a.prototype.Az=function(s,o,u){this.Hf=Math.max(c.P.truncate(2*Math.sqrt(u)+.5),64),this.Wm=c.P.truncate((2*this.Hf+31)/32),this.xl=new c.l,this.Kk=o,u=0;for(var p=this.Hf,f=this.Wm;8<=p;)u+=p*f,p=c.P.truncate(p/2),f=c.P.truncate((2*p+31)/32);this.Xh=c.P.mg(u,0),this.Ti=new c.Ox,u=new w(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,u),s.A(this.xl),this.xl.X(o,o),p=new c.l;var m=o*(f=c.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=f.da(),p.L(this.xl.tf(),Math.max(m,this.xl.S()),Math.max(o,this.xl.da())),this.NA=this.Kk,this.Lk=new c.Ed,this.Lk.kS(p,f),new c.Ed,s.K()){case 550:u.ax(this.Ti,2),this.nQ();break;case 1607:u.ax(this.Ti,2),this.mK(this.Ti,s,this.NA);break;case 1736:u.ax(this.Ti,1),this.mQ(this.Lk,s),u.ax(this.Ti,2),this.mK(this.Ti,s,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},a.prototype.SN=function(){this.Ti.flush();for(var s=0,o=this.Hf*this.Wm,u=this.Hf,p=c.P.truncate(this.Hf/2),f=this.Wm,m=c.P.truncate((2*p+31)/32);8<u;){for(u=0;u<p;u++)for(var v=2*u,_=2*u+1,M=0;M<p;M++){var T=2*M,A=2*M+1,O=T>>4;T=2*(15&T);var R=A>>4;A=2*(15&A);var j=this.Xh[s+f*v+O]>>T&3;j|=this.Xh[s+f*v+R]>>A&3,j|=this.Xh[s+f*_+O]>>T&3,j|=this.Xh[s+f*_+R]>>A&3,this.Xh[o+m*u+(M>>4)]|=j<<2*(15&M)}u=p,f=m,s=o,p=c.P.truncate(u/2),m=c.P.truncate((2*p+31)/32),o=s+f*u}},a.prototype.Uo=function(s,o){return this.xl.contains(s,o)?(s=this.nC(s),o=this.oC(o),0>s||s>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(s>>4)]>>2*(15&s)&3)==0?0:o==1?1:2):0},a.prototype.To=function(s){if(!s.Fa(this.xl))return 0;var o=this.nC(s.v),u=this.nC(s.C),p=this.oC(s.G);if(s=this.oC(s.H),0>o&&(o=0),0>p&&(p=0),u>=this.Hf&&(u=this.Hf-1),s>=this.Hf&&(s=this.Hf-1),o>u||p>s)return 0;for(var f=Math.max(u-o,1)*Math.max(s-p,1),m=0,v=this.Wm,_=this.Hf,M=0;;){if(32>f||16>_){for(f=p;f<=s;f++)for(var T=o;T<=u;T++)if(1<(M=this.Xh[m+v*f+(T>>4)]>>2*(15&T)&3))return 2;if(M==0)return 0;if(M==1)return 1}m+=v*_,_=c.P.truncate(_/2),v=c.P.truncate((2*_+31)/32),o=c.P.truncate(o/2),p=c.P.truncate(p/2),u=c.P.truncate(u/2),s=c.P.truncate(s/2),f=Math.max(u-o,1)*Math.max(s-p,1)}},a.prototype.MR=function(){return this.Hf*this.Wm},a}();c.Mx=h}(q||(q={})),function(c){var C;(C=c.QL||(c.QL={}))[C.contains=1]="contains",C[C.within=2]="within",C[C.equals=3]="equals",C[C.disjoint=4]="disjoint",C[C.touches=8]="touches",C[C.crosses=16]="crosses",C[C.overlaps=32]="overlaps",C[C.unknown=0]="unknown",C[C.intersects=1073741824]="intersects";var w=function(){function a(){}return a.construct=function(s,o,u,p,f,m,v,_){var M=new a;return M.rw=s,M.Om=o,M.Mj=u,M.Ui=p,M.wH=f,M.OY=m,M.PY=v,M.QY=_,M},a}();c.Xt=function(){function a(){}return a.xD=function(s,o,u){if(a.ry(s)){var p=c.ua.mj(o,s,!1);o=!1,c.Wk.xE(s)&&(o=o||s.nu(p,u)),(p=s.K())!=1736&&p!=1607||!c.Wk.vE(s)||u==0||(o=o||s.hj(u)),p!=1736&&p!=1607||!c.Wk.wE(s)||u==0||o||s.cM()}},a.ry=function(s){return c.Wk.xE(s)||c.Wk.vE(s)||c.Wk.wE(s)},a}();var h=function(){function a(){this.th=[]}return a.uB=function(s,o,u,p,f){var m=s.K(),v=o.K();if(m==197){if(v==197)return a.oW(s,o,u,p);if(v==33)return p==2?p=1:p==1&&(p=2),a.cJ(o,s,u,p)}else if(m==33){if(v==197)return a.cJ(s,o,u,p);if(v==33)return a.qW(s,o,u,p)}if(s.B()||o.B())return p==4;var _=new c.l;s.A(_);var M=new c.l;o.A(M);var T=new c.l;if(T.L(_),T.$b(M),u=c.ua.Xd(u,T,!1),a.fk(_,M,u))return p==4;switch(_=!1,c.Xk.zd(m)&&((m=new c.Ua(s.description)).pc(s,!0),s=m,m=1607),c.Xk.zd(v)&&((v=new c.Ua(o.description)).pc(o,!0),o=v,v=1607),m!=197&&v!=197?(s.Eb()<o.Eb()||m==33&&v==550)&&(p==2?p=1:p==1&&(p=2)):m!=1736&&v!=197&&(p==2?p=1:p==1&&(p=2)),m){case 1736:switch(v){case 1736:_=a.st(s,o,u,p,f);break;case 1607:_=a.bn(s,o,u,p,f);break;case 33:_=a.rt(s,o,u,p);break;case 550:_=a.qt(s,o,u,p,f);break;case 197:_=a.BI(s,o,u,p,f)}break;case 1607:switch(v){case 1736:_=a.bn(o,s,u,p,f);break;case 1607:_=a.bB(s,o,u,p,f);break;case 33:_=a.ut(s,o,u,p,f);break;case 550:_=a.tt(s,o,u,p,f);break;case 197:_=a.HI(s,o,u,p)}break;case 33:switch(v){case 1736:_=a.rt(o,s,u,p);break;case 1607:_=a.ut(o,s,u,p,f);break;case 550:_=a.mt(o,s,u,p)}break;case 550:switch(v){case 1736:_=a.qt(o,s,u,p,f);break;case 1607:_=a.tt(o,s,u,p,f);break;case 550:_=a.UA(s,o,u,p,f);break;case 33:_=a.mt(s,o,u,p);break;case 197:_=a.cI(s,o,u,p)}break;case 197:switch(v){case 1736:_=a.BI(o,s,u,p,f);break;case 1607:_=a.HI(o,s,u,p);break;case 550:_=a.cI(o,s,u,p)}}return _},a.oW=function(s,o,u,p){if(s.B()||o.B())return p==4;var f=new c.l,m=new c.l,v=new c.l;switch(s.A(f),o.A(m),v.L(f),v.$b(m),s=c.ua.Xd(u,v,!1),p){case 4:return a.fk(f,m,s);case 2:return a.eF(m,f,s);case 1:return a.eF(f,m,s);case 3:return a.gk(f,m,s);case 8:return a.YP(f,m,s);case 32:return a.XP(f,m,s);case 16:return a.WP(f,m,s)}return!1},a.cJ=function(s,o,u,p){if(s.B()||o.B())return p==4;s=s.D();var f=new c.l,m=new c.l;switch(o.A(f),m.L(s),m.$b(f),o=c.ua.Xd(u,m,!1),p){case 4:return a.Tw(s,f,o);case 2:return a.$A(s,f,o);case 1:return a.MU(s,f,o);case 3:return a.qI(s,f,o);case 8:return a.ZA(s,f,o)}return!1},a.qW=function(s,o,u,p){if(s.B()||o.B())return p==4;s=s.D(),o=o.D();var f=new c.l;switch(f.L(s),f.$b(o),u=c.ua.Xd(u,f,!1),p){case 4:return a.NU(s,o,u);case 2:return a.pI(o,s,u);case 1:return a.pI(s,o,u);case 3:return a.rI(s,o,u)}return!1},a.st=function(s,o,u,p,f){switch(p){case 4:return a.fV(s,o,u);case 2:return a.Uw(o,s,u,f);case 1:return a.Uw(s,o,u,f);case 3:return a.iV(s,o,u);case 8:return a.qV(s,o,u);case 32:return a.lV(s,o,u,f)}return!1},a.bn=function(s,o,u,p,f){switch(p){case 4:return a.gV(s,o,u);case 1:return a.aB(s,o,u,f);case 8:return a.rV(s,o,u,f);case 16:return a.bV(s,o,u)}return!1},a.rt=function(s,o,u,p){switch(p){case 4:return a.eV(s,o,u);case 1:return a.ZU(s,o,u);case 8:return a.pV(s,o,u)}return!1},a.qt=function(s,o,u,p){switch(p){case 4:return a.dV(s,o,u);case 1:return a.YU(s,o,u);case 8:return a.oV(s,o,u);case 16:return a.aV(s,o,u)}return!1},a.BI=function(s,o,u,p,f){if(a.cV(s,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.sV(s,o,u);case 1:return a.XU(s,o,u);case 3:return a.hV(s,o,u);case 8:return a.nV(s,o,u,f);case 32:return a.kV(s,o,u,f);case 16:return a.$U(s,o,u,f)}return!1},a.bB=function(s,o,u,p){switch(p){case 4:return a.BV(s,o,u);case 2:return a.FI(o,s,u);case 1:return a.FI(s,o,u);case 3:return a.DV(s,o,u);case 8:return a.II(s,o,u);case 32:return a.HV(s,o,u);case 16:return a.GI(s,o,u)}return!1},a.ut=function(s,o,u,p){switch(p){case 4:return a.AV(s,o,u);case 1:return a.vV(s,o,u);case 8:return a.LV(s,o,u)}return!1},a.tt=function(s,o,u,p){switch(p){case 4:return a.zV(s,o,u);case 1:return a.uV(s,o,u);case 8:return a.KV(s,o,u);case 16:return a.xV(s,o,u)}return!1},a.HI=function(s,o,u,p){if(a.yV(s,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.MV(s,o,u);case 1:return a.tV(s,o,u);case 3:return a.CV(s,o,u);case 8:return a.JV(s,o,u);case 32:return a.GV(s,o,u);case 16:return a.wV(s,o,u)}return!1},a.UA=function(s,o,u,p){switch(p){case 4:return a.bU(s,o,u);case 2:return a.$H(o,s,u);case 1:return a.$H(s,o,u);case 3:return a.dU(s,o,u);case 32:return a.jU(s,o,u)}return!1},a.mt=function(s,o,u,p){switch(p){case 4:return a.aI(s,o,u);case 2:return a.nU(s,o,u);case 1:return a.ZT(s,o,u);case 3:return a.Pw(s,o,u)}return!1},a.cI=function(s,o,u,p){switch(p){case 4:return a.aU(s,o,u);case 2:return a.mU(s,o,u);case 1:return a.YT(s,o,u);case 3:return a.cU(s,o,u);case 8:return a.lU(s,o,u);case 16:return a.$T(s,o,u)}return!1},a.iV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.gk(p,f,u)&&(p=a.rc(s,o,!1))!=4&&p!=1&&p!=2&&(!!a.ZH(s,o,u)||(p=s.Rb(),f=o.Rb(),!(Math.abs(p-f)>4*Math.max(s.I(),o.I())*u)&&a.Rz(s,o,u,!0)))},a.fV=function(s,o,u){var p=a.rc(s,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.zI(s,o,u)},a.qV=function(s,o,u){var p=a.rc(s,o,!1);return p!=4&&p!=1&&p!=2&&a.DI(s,o,u,null)},a.lV=function(s,o,u,p){var f=a.rc(s,o,!1);return f!=4&&f!=1&&f!=2&&a.AI(s,o,u,p)},a.Uw=function(s,o,u,p){var f=new c.l,m=new c.l;return s.A(f),o.A(m),!!a.Ac(f,m,u)&&(f=a.rc(s,o,!1))!=4&&f!=2&&(f==1||a.wI(s,o,u,p))},a.gV=function(s,o,u){var p=a.rc(s,o,!0);return p==4||p!=1&&p!=1073741824&&a.zI(s,o,u)},a.rV=function(s,o,u,p){var f=a.rc(s,o,!1);return f!=4&&f!=1&&a.EI(s,o,u,p)},a.bV=function(s,o,u){var p=a.rc(s,o,!1);return p!=4&&p!=1&&a.yI(s,o,u,null)},a.aB=function(s,o,u,p){var f=new c.l,m=new c.l;return s.A(f),o.A(m),!!a.Ac(f,m,u)&&(f=a.rc(s,o,!1))!=4&&(f==1||a.xI(s,o,u,p))},a.eV=function(s,o,u){return c.jd.FG(s,o,u)==0},a.pV=function(s,o,u){return o=o.D(),a.CI(s,o,u)},a.ZU=function(s,o,u){return o=o.D(),a.vI(s,o,u)},a.dV=function(s,o,u){var p=a.rc(s,o,!1);if(p==4)return!0;if(p==1)return!1;p=new c.l,s.A(p),p.X(u,u);for(var f=new c.h,m=0;m<o.I();m++)if(o.D(m,f),p.contains(f)){var v=c.jd.Zd(s,f,u);if(v==1||v==2)return!1}return!0},a.oV=function(s,o,u){var p=this.rc(s,o,!1);if(p==4||p==1)return!1;p=new c.l,s.A(p),p.X(u,u);for(var f=!1,m=s,v=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(p.contains(M)){if((M=c.jd.Zd(m,M,u))==2)f=!0;else if(M==1)return!1}v||(!c.Fg.Ol(s,o.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?m=s:(m=new c.Ea,s.copyTo(m),m.hj(1)),v=!0)}return!!f},a.aV=function(s,o,u){var p=this.rc(s,o,!1);if(p==4||p==1)return!1;var f=new c.l;p=new c.l;var m=new c.l;s.A(f),o.A(m),p.L(f),p.X(u,u),m=f=!1;for(var v=s,_=!1,M=0;M<o.I();M++){var T=o.Oa(M);if(p.contains(T)?(T=c.jd.Zd(v,T,u))==0?m=!0:T==1&&(f=!0):m=!0,f&&m)return!0;_||(!c.Fg.Ol(s,o.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?v=s:(v=new c.Ea,s.copyTo(v),v.hj(1)),_=!0)}return!1},a.YU=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),!this.Ac(p,f,u)||(f=this.rc(s,o,!1))==4)return!1;if(f==1)return!0;f=!1;for(var m=s,v=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(!p.contains(M))return!1;if((M=c.jd.Zd(m,M,u))==1)f=!0;else if(M==0)return!1;v||(!c.Fg.Ol(s,o.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?m=s:(m=new c.Ea,s.copyTo(m),m.hj(1)),v=!0)}return f},a.hV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.gk(p,f,u)&&((p=new c.Ea).bd(o,!1),a.Rz(s,p,u,!0))},a.cV=function(s,o,u){var p=a.rc(s,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var f=new c.l;if(p=new c.l,s.A(f),o.A(p),a.Ac(p,f,u)||(f=new c.h,p.fn(f),(o=c.jd.Zd(s,f,u))!=0)||(p.VI(f),(o=c.jd.Zd(s,f,u))!=0)||(p.gn(f),(o=c.jd.Zd(s,f,u))!=0)||(p.YI(f),(o=c.jd.Zd(s,f,u))!=0))return!1;o=s.vb(0),(f=new c.l).L(p),f.X(u,u);for(var m=0,v=s.I();m<v;m++){var _=o.read(2*m),M=o.read(2*m+1);if(f.contains(_,M))return!1}return!a.NG(s,p,u)},a.nV=function(s,o,u,p){var f=a.rc(s,o,!1);if(f==4||f==1||f==2)return!1;f=new c.l;var m=new c.l;return s.A(f),o.A(m),!a.Ac(m,f,u)&&(m.S()<=u&&m.da()<=u?(o=o.Kp(),a.CI(s,o,u)):m.S()<=u||m.da()<=u?(f=new c.Ua,m=new c.Ta,o.If(0,m),f.nf(m),o.If(2,m),f.lineTo(m),a.EI(s,f,u,p)):((f=new c.Ea).bd(o,!1),a.DI(s,f,u,p)))},a.kV=function(s,o,u,p){var f=a.rc(s,o,!1);if(f==4||f==1||f==2)return!1;f=new c.l;var m=new c.l;return s.A(f),o.A(m),!(a.Ac(m,f,u)||m.S()<=u||m.da()<=u)&&((f=new c.Ea).bd(o,!1),a.AI(s,f,u,p))},a.sV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),a.Ac(f,p,u)},a.XU=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.Ac(p,f,u)&&(p=a.rc(s,o,!1))!=4&&p!=2&&(p==1||(f.S()<=u&&f.da()<=u?(o=o.Kp(),a.vI(s,o,u)):f.S()<=u||f.da()<=u?(f=new c.Ua,p=new c.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.xI(s,f,u,null)):((f=new c.Ea).bd(o,!1),a.wI(s,f,u,null))))},a.$U=function(s,o,u,p){var f=new c.l,m=new c.l;return s.A(f),o.A(m),!(a.Ac(m,f,u)||m.da()>u&&m.S()>u||m.da()<=u&&m.S()<=u)&&(f=new c.Ua,m=new c.Ta,o.If(0,m),f.nf(m),o.If(2,m),f.lineTo(m),a.yI(s,f,u,p))},a.DV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.gk(p,f,u)||a.rc(s,o,!1)==4)&&(!!a.ZH(s,o,u)||a.Rz(s,o,u,!1))},a.BV=function(s,o,u){return this.rc(s,o,!1)==4||!!new c.am(s,o,u,!0).next()&&!this.OG(s,o,u)},a.II=function(s,o,u){if(a.rc(s,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(s,o,u,p)!=0)return!1;for(var f=new c.ee,m=0;m<p.size;m+=2){var v=p.read(m),_=p.read(m+1);f.Du(v,_)}return s=s.ng(),o=o.ng(),s.Gd(o,0,o.I()),a.Ow(s,f,u)},a.GI=function(s,o,u){if(a.rc(s,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(s,o,u,p)!=0)return!1;for(var f=new c.ee,m=0;m<p.size;m+=2){var v=p.read(m),_=p.read(m+1);f.Du(v,_)}return s=s.ng(),o=o.ng(),s.Gd(o,0,o.I()),!a.Ow(s,f,u)},a.HV=function(s,o,u){return a.rc(s,o,!1)!=4&&a.QG(s,o,u)},a.FI=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.Ac(p,f,u)||a.rc(s,o,!1)==4)&&a.Am(o,s,u,!1)},a.AV=function(s,o,u){return a.rc(s,o,!1)==4||(o=o.D(),!a.Tz(s,o,u))},a.LV=function(s,o,u){return a.rc(s,o,!1)!=4&&(o=o.D(),a.Uz(s,o,u))},a.vV=function(s,o,u){return a.rc(s,o,!1)!=4&&(o=o.D(),a.MG(s,o,u))},a.zV=function(s,o,u){return a.rc(s,o,!1)==4||!a.PG(s,o,u,!1)},a.KV=function(s,o,u){if(this.rc(s,o,!1)==4)return!1;var p=s.Ha(),f=new c.l,m=new c.l,v=new c.l;s.A(f),o.A(m),f.X(u,u),m.X(u,u),v.L(f),v.Fa(m),f=null;var _=s.Cb;if(_!=null){var M=_.Gb;f=_.Bo,M==null&&(M=_=c.ua.lj(s,v))}else M=_=c.ua.lj(s,v);var T=M.getIterator(),A=null;f!=null&&(A=f.getIterator());var O=new c.h,R=new c.h,j=!1,z=u*u;for(f=new c.rn(o.I()),_=0;_<o.I();_++)f.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,O),v.contains(O)){if(m.L(O.x,O.y,O.x,O.y),A!=null&&(A.Zi(m,u),A.next()==-1))continue;T.Zi(m,u);for(var V=T.next();V!=-1;V=T.next())if(p.Wb(M.ka(V)),(V=p.ia()).ic(V.ge(O,!1),R),c.h.zc(O,R)<=z){f.write(_,1),j=!0;break}}if(!j)return!1;for(s=s.ng(),p=new c.ee,m=new c.h,_=0;_<o.I();_++)f.read(_)!=0&&(o.D(_,m),p.Du(m.x,m.y));return this.Ow(s,p,u)},a.xV=function(s,o,u){if(this.rc(s,o,!1)==4)return!1;var p=s.Ha(),f=new c.l,m=new c.l,v=new c.l;s.A(f),o.A(m),f.X(u,u),m.X(u,u),v.L(f),v.Fa(m),f=null;var _=s.Cb;if(_!=null){var M=_.Gb;f=_.Bo,M==null&&(M=_=c.ua.lj(s,v))}else M=_=c.ua.lj(s,v);var T=M.getIterator(),A=null;f!=null&&(A=f.getIterator());var O=new c.h,R=new c.h,j=!1,z=!1,V=u*u;for(f=new c.rn(o.I()),_=0;_<o.I();_++)f.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,O),v.contains(O)){if(m.L(O.x,O.y,O.x,O.y),A!=null&&(A.Zi(m,u),A.next()==-1)){z=!0;continue}T.Zi(m,u);for(var F=!1,G=T.next();G!=-1;G=T.next())if(p.Wb(M.ka(G)),(G=p.ia()).ic(G.ge(O,!1),R),c.h.zc(O,R)<=V){f.write(_,1),F=j=!0;break}F||(z=!0)}else z=!0;if(!j||!z)return!1;for(s=s.ng(),p=new c.ee,m=new c.h,_=0;_<o.I();_++)f.read(_)!=0&&(o.D(_,m),p.Du(m.x,m.y));return!this.Ow(s,p,u)},a.uV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.Ac(p,f,u)||a.rc(s,o,!1)==4||!a.PG(s,o,u,!0))&&(s=s.ng(),!a.bI(s,o,u))},a.CV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(f.da()>u&&f.S()>u)&&a.gk(p,f,u)},a.yV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!a.Ac(f,p,u)&&!a.NG(s,f,u)},a.JV=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),f.da()<=u&&f.S()<=u)return f=o.Kp(),a.Uz(s,f,u);if(f.da()<=u||f.S()<=u)return f=new c.Ua,p=new c.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.II(s,f,u);s=s.Ha(),o=new c.l,p=new c.l,o.L(f),p.L(f),o.X(-u,-u),p.X(u,u),f=!1;for(var m=new c.l,v=new c.l;s.ab();)for(;s.Ia();){if(s.ia().A(m),v.L(o),v.Fa(m),!v.B()&&(v.da()>u||v.S()>u))return!1;v.L(p),v.Fa(m),v.B()||(f=!0)}return f},a.GV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(a.Ac(p,f,u)||a.Ac(f,p,u)||a.Ac(f,p,u)||f.da()>u&&f.S()>u||f.da()<=u&&f.S()<=u)&&(p=new c.Ua,f=new c.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.QG(s,p,u))},a.MV=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),!a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return a.Ac(f,p,u);s=s.Ha(),(o=new c.l).L(f),o.X(-u,-u),f=!1,p=new c.l;for(var m=new c.l;s.ab();)for(;s.Ia();)s.ia().A(p),o.jm(p)?f=!0:(m.L(o),m.Fa(p),!m.B()&&(m.da()>u||m.S()>u)&&(f=!0));return f},a.tV=function(s,o,u){var p=new c.l,f=new c.l;return o.A(f),s.A(p),!(!a.Ac(p,f,u)||f.da()>u&&f.S()>u)&&(f.da()<=u&&f.S()<=u?(o=o.Kp(),a.MG(s,o,u)):(p=new c.Ua,f=new c.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.Am(p,s,u,!1)))},a.wV=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return p=new c.Ua,f=new c.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.GI(s,p,u);s=s.Ha(),o=new c.l,(p=new c.l).L(f),o.L(f),p.X(-u,-u),o.X(u,u);for(var m=f=!1,v=new c.l,_=new c.l;s.ab();)for(;s.Ia();)if(s.ia().A(v),m||o.contains(v)||(m=!0),f||(_.L(p),_.Fa(v),!_.B()&&(_.da()>u||_.S()>u)&&(f=!0)),f&&m)return!0;return!1},a.dU=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.gk(p,f,u)&&(!!a.eU(s,o,u)||a.TA(s,o,u,!1,!0,!1))},a.bU=function(s,o,u){return!a.bI(s,o,u)},a.jU=function(s,o,u){return a.TA(s,o,u,!1,!1,!0)},a.$H=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.Ac(p,f,u)&&a.TA(o,s,u,!0,!1,!1)},a.Ow=function(s,o,u){u*=u;for(var p=new c.h,f=new c.h,m=0;m<o.I();m++){o.D(m,f);for(var v=!1,_=0;_<s.I();_++)if(s.D(_,p),c.h.zc(p,f)<=u){v=!0;break}if(!v)return!1}return!0},a.Pw=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),a.gk(p,f,u)},a.aI=function(s,o,u){return o=o.D(),a.lt(s,o,u)},a.nU=function(s,o,u){return a.Pw(s,o,u)},a.ZT=function(s,o,u){return!a.aI(s,o,u)},a.cU=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(f.da()>u||f.S()>u)&&a.gk(p,f,u)},a.aU=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),a.Ac(f,p,u))return!1;for((o=new c.l).L(f),o.X(u,u),u=new c.h,f=0;f<s.I();f++)if(s.D(f,u),o.contains(u))return!1;return!0},a.lU=function(s,o,u){var p=new c.l,f=new c.l,m=new c.l;if(o.A(p),p.da()<=u&&p.S()<=u)return!1;if(p.da()<=u||p.S()<=u){o=new c.h;var v=!1;f.L(p),m.L(p),f.X(u,u),p.da()>u?m.X(0,-u):m.X(-u,0);for(var _=0;_<s.I();_++)if(s.D(_,o),f.contains(o)){if(p.da()>u){if(o.y>m.G&&o.y<m.H)return!1}else if(o.x>m.v&&o.x<m.C)return!1;v=!0}return v}for(f.L(p),m.L(p),f.X(u,u),m.X(-u,-u),o=new c.h,v=!1,_=0;_<s.I();_++)if(s.D(_,o),f.contains(o)){if(m.jm(o))return!1;v=!0}return v},a.mU=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),!a.Ac(f,p,u))return!1;if(f.da()<=u&&f.S()<=u)return a.gk(p,f,u);if(f.da()<=u||f.S()<=u){o=!1,p=new c.l;var m=new c.l;p.L(f),m.L(f),f.da()>u?p.X(0,-u):p.X(-u,0),m.X(u,u);for(var v=new c.h,_=0;_<s.I();_++){if(s.D(_,v),!m.contains(v))return!1;f.da()>u?v.y>p.G&&v.y<p.H&&(o=!0):v.x>p.v&&v.x<p.C&&(o=!0)}return o}for(o=!1,p=new c.l,m=new c.l,p.L(f),m.L(f),p.X(-u,-u),m.X(u,u),v=new c.h,_=0;_<s.I();_++){if(s.D(_,v),!m.contains(v))return!1;p.jm(v)&&(o=!0)}return o},a.YT=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.Ac(p,f,u)||f.da()>u||f.S()>u)&&(o=o.Kp(),!a.lt(s,o,u))},a.$T=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u){o=new c.l,p=new c.l,o.L(f),f.da()>u?o.X(0,-u):o.X(-u,0),p.L(f),p.X(u,u);for(var m=new c.h,v=!1,_=!1,M=0;M<s.I();M++)if(s.D(M,m),v||(f.da()>u?m.y>o.G&&m.y<o.H&&(v=!0):m.x>o.v&&m.x<o.C&&(v=!0)),_||p.contains(m)||(_=!0),v&&_)return!0;return!1}for(o=new c.l,p=new c.l,o.L(f),o.X(-u,-u),p.L(f),p.X(u,u),m=new c.h,_=v=!1,M=0;M<s.I();M++)if(s.D(M,m),!v&&o.jm(m)&&(v=!0),_||p.contains(m)||(_=!0),v&&_)return!0;return!1},a.rI=function(s,o,u){return c.h.zc(s,o)<=u*u},a.NU=function(s,o,u){return c.h.zc(s,o)>u*u},a.pI=function(s,o,u){return a.rI(s,o,u)},a.qI=function(s,o,u){var p=new c.l;return p.L(s),a.gk(p,o,u)},a.Tw=function(s,o,u){var p=new c.l;return p.L(o),p.X(u,u),!p.contains(s)},a.ZA=function(s,o,u){if(o.da()<=u&&o.S()<=u)return!1;var p=new c.l,f=new c.l;if(p.L(o),p.X(u,u),!p.contains(s))return!1;if(o.da()<=u||o.S()<=u){if(f.L(o),o.da()>u?f.X(0,-u):f.X(-u,0),o.da()>u){if(s.y>f.G&&s.y<f.H)return!1}else if(s.x>f.v&&s.x<f.C)return!1;return!0}return f.L(o),f.X(-u,-u),!f.jm(s)},a.$A=function(s,o,u){if(o.da()<=u&&o.S()<=u)return!0;if(o.da()<=u||o.S()<=u){var p=new c.l;p.L(o),o.da()>u?p.X(0,-u):p.X(-u,0);var f=!1;return o.da()>u?s.y>p.G&&s.y<p.H&&(f=!0):s.x>p.v&&s.x<p.C&&(f=!0),f}return(p=new c.l).L(o),p.X(-u,-u),p.jm(s)},a.MU=function(s,o,u){return a.qI(s,o,u)},a.gk=function(s,o,u){return a.Ac(s,o,u)&&a.Ac(o,s,u)},a.fk=function(s,o,u){var p=new c.l;return p.L(o),p.X(u,u),!s.isIntersecting(p)},a.YP=function(s,o,u){if(s.da()<=u&&s.S()<=u){var p=s.tf();return a.ZA(p,o,u)}if(o.da()<=u&&o.S()<=u)return p=o.tf(),a.ZA(p,s,u);if(s.da()>u&&s.S()>u&&(o.da()<=u||o.S()<=u)?p=o:(p=s,s=o),p.da()<=u||p.S()<=u){if(s.da()<=u||s.S()<=u){o=new c.zb;var f=new c.zb,m=[0,0],v=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),s.fn(_),f.Ec(_),s.gn(_),f.Rc(_),o.Fa(f,null,m,v,u),o.Fa(f,null,null,null,u)==1&&(m[0]==0||m[1]==1||v[0]==0||v[1]==1)}return o=new c.l,f=new c.l,o.L(s),o.X(-u,-u),f.L(o),f.Fa(p),!(!f.B()&&(f.da()>u||f.S()>u))}return s.X(u,u),(f=new c.l).L(p),f.Fa(s),!(f.B()||!f.B()&&f.da()>u&&f.S()>u)},a.XP=function(s,o,u){if(a.Ac(s,o,u)||a.Ac(o,s,u)||s.da()<=u&&s.S()<=u||o.da()<=u&&o.S()<=u)return!1;if(s.da()<=u||s.S()<=u){if(o.da()>u&&o.S()>u)return!1;var p=new c.zb,f=new c.zb,m=[0,0],v=[0,0],_=new c.h;return s.fn(_),p.Ec(_),s.gn(_),p.Rc(_),o.fn(_),f.Ec(_),o.gn(_),f.Rc(_),p.Fa(f,null,m,v,u),p.Fa(f,null,null,null,u)==2&&(0<m[0]||1>m[1])&&(0<v[0]||1>v[1])}return!(o.da()<=u||o.S()<=u)&&((p=new c.l).L(s),p.Fa(o),!(p.B()||p.da()<=u||p.S()<=u))},a.eF=function(s,o,u){if(!a.Ac(s,o,u))return!1;if(s.da()<=u&&s.S()<=u)return s=s.tf(),a.$A(s,o,u);if(o.da()<=u&&o.S()<=u)return o=o.tf(),a.$A(o,s,u);if(s.da()<=u||s.S()<=u)return a.Ac(s,o,u);if(o.da()<=u||o.S()<=u){var p=new c.l;return p.L(s),p.X(-u,-u),p.jm(o)?!0:((s=new c.l).L(p),s.Fa(o),!(s.B()||s.da()<=u&&s.S()<=u))}return a.Ac(s,o,u)},a.WP=function(s,o,u){if(a.Ac(s,o,u)||a.Ac(o,s,u)||s.da()<=u&&s.S()<=u||o.da()<=u&&o.S()<=u||o.da()>u&&o.S()>u&&s.da()>u&&s.S()>u)return!1;if(s.da()>u&&s.S()>u)var p=o;else p=s,s=o;if(s.da()>u&&s.S()>u){o=new c.l;var f=new c.l;return f.L(s),f.X(-u,-u),o.L(f),o.Fa(p),!(o.B()||o.da()<=u&&o.S()<=u)}o=new c.zb,f=new c.zb;var m=[0,0],v=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),s.fn(_),f.Ec(_),s.gn(_),f.Rc(_),o.Fa(f,null,m,v,u),o.Fa(f,null,null,null,u)==1&&0<m[0]&&1>m[1]&&0<v[0]&&1>v[1]},a.zI=function(s,o,u){var p=new c.l,f=new c.l,m=new c.am(s,o,u,!0);if(!m.next())return!0;if(this.OG(s,o,u))return!1;var v=s,_=null;o.K()==1736&&(_=o);var M=!1,T=!1;do{var A=m.pl(),O=m.jl();if(O=o.Oa(o.Ca(O)),p.L(m.oz()),p.X(u,u),p.contains(O)&&(O=c.jd.Zd(v,O,0))!=0||o.K()==1736&&(A=s.Oa(s.Ca(A)),f.L(m.Wy()),f.X(u,u),f.contains(A)&&(O=c.jd.Zd(_,A,0))!=0))return!1;M||(!c.Fg.Ol(s,o.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?v=s:(v=new c.Ea,s.copyTo(v),v.hj(1)),M=!0),o.K()!=1736||T||(T=o,!c.Fg.Ol(T,s.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(_=new c.Ea,T.copyTo(_),_.hj(1)),T=!0)}while(m.next());return!0},a.Ac=function(s,o,u){var p=new c.l;return p.L(s),p.X(u,u),p.contains(o)},a.ns=function(s,o,u){var p=new c.l;return p.L(o),p.X(u,u),o=new c.h,s.fn(o),!p.contains(o)||(s.VI(o),!p.contains(o)||(s.YI(o),!p.contains(o)||(s.gn(o),!p.contains(o))))},a.ZH=function(s,o,u){if(s.ea()!=o.ea()||s.I()!=o.I())return!1;var p=new c.h,f=new c.h,m=!0;u*=u;for(var v=0;v<s.ea();v++){if(s.Wc(v)!=o.Wc(v)){m=!1;break}for(var _=s.Ca(v);_<o.Wc(v);_++)if(s.D(_,p),o.D(_,f),c.h.zc(p,f)>u){m=!1;break}if(!m)break}return!!m},a.eU=function(s,o,u){if(s.I()!=o.I())return!1;var p=new c.h,f=new c.h,m=!0;u*=u;for(var v=0;v<s.I();v++)if(s.D(v,p),o.D(v,f),c.h.zc(p,f)>u){m=!1;break}return!!m},a.TA=function(s,o,u,p,f,m){var v=!1;if(s.I()>o.I()){p&&(p=!1,v=!0);var _=o}else _=s,s=o;if(o=null,f||m||v){o=new c.rn(s.I());for(var M=0;M<s.I();M++)o.write(M,0)}M=new c.l;var T=new c.l,A=new c.l;_.A(M),s.A(T),M.X(u,u),T.X(u,u),A.L(M),A.Fa(T),T=new c.h;for(var O=new c.h,R=!0,j=c.ua.jE(s,A),z=j.getIterator(),V=u*u,F=0;F<_.I();F++)if(_.D(F,T),A.contains(T)){var G=!1;M.L(T.x,T.y,T.x,T.y),z.Zi(M,u);for(var Z=z.next();Z!=-1&&(Z=j.ka(Z),s.D(Z,O),!(c.h.zc(T,O)<=V&&((f||m||v)&&o.write(Z,1),G=!0,p)));Z=z.next());if(!G&&(R=!1,f||p))return!1}else{if(f||p)return!1;R=!1}if(m&&R)return!1;if(p)return!0;for(M=0;M<s.I();M++)if(o.read(M)==1){if(m)return!0}else if(f||v)return!1;return!m},a.bI=function(s,o,u){if(s.I()>o.I())var p=o;else p=s,s=o;o=new c.l;var f=new c.l,m=new c.l;p.A(o),s.A(f),o.X(u,u),f.X(u,u),m.L(o),m.Fa(f),f=new c.h;for(var v=new c.h,_=u*u,M=c.ua.jE(s,m),T=M.getIterator(),A=0;A<p.I();A++)if(p.D(A,f),m.contains(f)){o.L(f.x,f.y,f.x,f.y),T.Zi(o,u);for(var O=T.next();O!=-1;O=T.next())if(s.D(M.ka(O),v),c.h.zc(f,v)<=_)return!0}return!1},a.Rz=function(s,o,u,p){return a.Am(s,o,u,p)&&a.Am(o,s,u,p)},a.Am=function(s,o,u,p){function f(De,xe){return O.LE(De,xe)}var m,v=!0,_=[0,0],M=[0,0],T=0,A=new c.ja(0),O=new a,R=new c.l,j=new c.l,z=new c.l;s.A(R),o.A(j),R.X(u,u),j.X(u,u),z.L(R),z.Fa(j),s=s.Ha(),j=o.Ha();var V=null,F=V=null,G=o.Cb;for(G!=null?(V=G.Gb,F=G.Bo,V==null&&(V=c.ua.lj(o,z))):V=c.ua.lj(o,z),o=V.getIterator(),G=null,F!=null&&(G=F.getIterator());s.ab();)for(;s.Ia();){var Z=!1,K=s.ia();if(K.A(R),!R.isIntersecting(z)||G!=null&&(G.Zi(R,u),G.next()==-1))return!1;for(F=K.Rb(),o.Wo(K,u),m=o.next();m!=-1;m=o.next()){j.Wb(V.ka(m)),m=j.ia();var re=K.Fa(m,null,_,M,u);if(re==2&&(!p||M[0]<=M[1])){re=_[0];var te=_[1],ue=M[0],ye=M[1];if(re*F<=u&&(1-te)*F<=u){Z=!0,T=0,A.resize(0),O.th.length=0;var pe=s.xb();for(ue=!0;ue;){if(s.Ia()){if(F=(K=s.ia()).Rb(),(re=K.Fa(m,null,_,M,u))==2&&(!p||M[0]<=M[1])&&(re=_[0],te=_[1],re*F<=u&&(1-te)*F<=u)){pe=s.xb();continue}if(j.Ia()&&(m=j.ia(),(re=K.Fa(m,null,_,M,u))==2&&(!p||M[0]<=M[1])&&(re=_[0],te=_[1],re*F<=u&&(1-te)*F<=u))){pe=s.xb();continue}}ue=!1}pe!=s.xb()&&(s.Wb(pe),s.ia());break}pe=s.xb(),m=w.construct(pe,s.gb,re,te,j.xb(),j.gb,ue,ye),O.th.push(m),A.add(A.size)}}if(!Z){if(T==O.th.length)return!1;for(1<A.size-T&&A.Wd(T,A.size,f),Z=0;T<O.th.length;T++)if(!((m=O.th[A.get(T)]).Mj<Z&&m.Ui<Z)){if(F*(m.Mj-Z)>u)return!1;if(F*(1-(Z=m.Ui))<=u||Z==1)break}if(F*(1-Z)>u)return!1;T=0,A.resize(0),O.th.length=0}}return v},a.QG=function(s,o,u){if(1>a.Sz(s,o,u,null))return!1;var p=new c.l,f=new c.l;s.A(p),o.A(f);var m=a.ns(p,f,u);return p=a.ns(f,p,u),!(!m||!p)||(m&&!p?!a.Am(o,s,u,!1):p&&!m?!a.Am(s,o,u,!1):!a.Am(s,o,u,!1)&&!a.Am(o,s,u,!1))},a.Sz=function(s,o,u,p){function f(Ce,Jt){return R.LE(Ce,Jt)}if(s.sz()>o.sz())var m=o,v=s;else m=s,v=o;s=m.Ha(),o=v.Ha();var _=[0,0],M=[0,0],T=-1,A=0,O=new c.ja(0),R=new a,j=new c.l,z=new c.l,V=new c.l;m.A(j),v.A(z),j.X(u,u),z.X(u,u),V.L(j),V.Fa(z),m=null,p!=null&&(m=new c.h);var F=z=z=null,G=v.Cb;for(G!=null?(z=G.Gb,F=G.Bo,z==null&&(z=c.ua.lj(v,V))):z=c.ua.lj(v,V),v=z.getIterator(),G=null,F!=null&&(G=F.getIterator());s.ab();)for(F=0;s.Ia();){var Z=s.ia();if(Z.A(j),j.isIntersecting(V)){if(G!=null&&(G.Zi(j,u),G.next()==-1))continue;var K=Z.Rb();v.Wo(Z,u);for(var re=v.next();re!=-1;re=v.next()){var te=z.ka(re);o.Wb(te);var ue=o.ia(),ye=ue.Rb(),pe=Z.Fa(ue,null,_,M,u);if(0<pe){re=_[0],T=M[0];var De=pe==2?_[1]:NaN,xe=pe==2?M[1]:NaN;if(pe==2){if(K*(De-re)>u)return 1;var Qe=K*(De-re);if(o.Ia()){if(ue=o.ia(),(pe=Z.Fa(ue,null,_,null,u))==2){pe=_[0];var We=_[1];if(Qe+(pe=K*(We-pe))>u)return 1}o.Wb(te),o.ia()}if(!o.xm()){if(o.ni(),ue=o.ni(),(pe=Z.Fa(ue,null,_,null,u))==2&&(pe=_[0],Qe+(pe=K*((We=_[1])-pe))>u))return 1;o.Wb(te),o.ia()}if(s.Ia()){if(te=s.xb(),(pe=(Z=s.ia()).Fa(ue,null,_,null,u))==2&&(pe=_[0],Qe+(pe=K*((We=_[1])-pe))>u))return 1;s.Wb(te),s.ia()}if(!s.xm()){if(te=s.xb(),s.ni(),(pe=(Z=s.ni()).Fa(ue,null,_,null,u))==2&&(pe=_[0],Qe+(pe=ye*((We=_[1])-pe))>u))return 1;s.Wb(te),s.ia()}ue=w.construct(s.xb(),s.gb,re,De,o.xb(),o.gb,T,xe),R.th.push(ue),O.add(O.size)}T=0,p!=null&&(Z.ic(re,m),p.add(m.x),p.add(m.y))}}if(A<R.th.length){for(O.Wd(A,O.size,f),Z=0,re=R.th[O.get(A)].Om;A<R.th.length;A++)if(!((ue=R.th[O.get(A)]).Mj<Z&&ue.Ui<Z))if(K*(ue.Mj-Z)>u)F=K*(ue.Ui-ue.Mj),Z=ue.Ui,re=ue.Om;else{if(ue.Om!=re?(F=K*(ue.Ui-ue.Mj),re=ue.Om):F+=K*(ue.Ui-ue.Mj),F>u)return 1;if((Z=ue.Ui)==1)break}K*(1-Z)>u&&(F=0),A=0,O.resize(0),R.th.length=0}}}return T},a.OG=function(s,o,u){var p=s.Ha(),f=o.Ha();for(s=new c.am(s,o,u,!1);s.next();){o=s.pl();var m=s.jl();if(p.Wb(o),f.Wb(m),o=p.ia(),0<f.ia().Fa(o,null,null,null,u))return!0}return!1},a.PG=function(s,o,u,p){var f=s.Ha(),m=new c.l,v=new c.l,_=new c.l;s.A(m),o.A(v),m.X(u,u),m.contains(v),v.X(u,u),_.L(m),_.Fa(v),(m=s.Cb)!=null?(m=m.Gb)==null&&(m=c.ua.lj(s,_)):m=c.ua.lj(s,_),s=m.getIterator();for(var M=new c.h,T=new c.h,A=u*u,O=0;O<o.I();O++)if(o.D(O,M),_.contains(M)){v.L(M.x,M.y,M.x,M.y),s.Zi(v,u);for(var R=!1,j=s.next();j!=-1;j=s.next())if(f.Wb(m.ka(j)),(j=f.ia()).ic(j.ge(M,!1),T),c.h.zc(T,M)<=A){R=!0;break}if(p){if(!R)return!1}else if(R)return!0}return!!p},a.Tz=function(s,o,u){var p=new c.h,f=u*u,m=s.Ha();if((s=s.Cb)!=null&&(s=s.Gb)!=null){var v=new c.l;for(v.L(o),v=(u=s.HF(v,u)).next();v!=-1;v=u.next())if(m.Wb(s.ka(v)),m.Ia()){var _=(v=m.ia()).ge(o,!1);if(v.ic(_,p),c.h.zc(o,p)<=f)return!0}return!1}for(s=new c.l;m.ab();)for(;m.Ia();)if((v=m.ia()).A(s),s.X(u,u),s.contains(o)&&(_=v.ge(o,!1),v.ic(_,p),c.h.zc(o,p)<=f))return!0;return!1},a.MG=function(s,o,u){return a.Tz(s,o,u)&&!a.Uz(s,o,u)},a.Uz=function(s,o,u){return s=s.ng(),!a.lt(s,o,u)},a.NG=function(s,o,u){if(s.vm()){var p=new c.zb(o.v,o.G,o.v,o.H),f=new c.zb(o.v,o.H,o.C,o.H),m=new c.zb(o.C,o.H,o.C,o.G);for(o=new c.zb(o.C,o.G,o.v,o.G),s=s.Ha();s.ab();)for(;s.Ia();){var v=s.ia();if(v.isIntersecting(p,u)||v.isIntersecting(f,u)||v.isIntersecting(m,u)||v.isIntersecting(o,u))return!0}}else{(p=new c.l).L(o),p.X(u,u),u=s.vb(0),f=new c.h,m=new c.h,o=new c.h,v=new c.h;for(var _=0,M=s.ea();_<M;_++)for(var T=!0,A=s.Ca(_),O=s.Wc(_);A<O;A++)if(T)u.uc(2*A,m),T=!1;else{if(u.uc(2*A,f),o.N(m),v.N(f),p.uy(o,v)!=0)return!0;m.N(f)}}return!1},a.rc=function(s,o,u){var p=s.K(),f=o.K();if(c.ba.zj(p)){var m=s.Cb;if(m!=null&&(m=m.Hk)!=null)if(f==33){var v=o.D();if((v=m.Uo(v.x,v.y))==1)return 1;if(v==0)return 4}else{if(v=new c.l,o.A(v),(v=m.To(v))==1)return 1;if(v==0)return 4;if(u&&c.ba.zj(f)&&a.CE(o,m))return 1073741824}}if(c.ba.zj(f)&&(m=o.Cb)!=null&&(m=m.Hk)!=null)if(p==33){if(s=s.D(),(v=m.Uo(s.x,s.y))==1)return 2;if(v==0)return 4}else{if(o=new c.l,s.A(o),(v=m.To(o))==1)return 2;if(v==0)return 4;if(u&&c.ba.zj(p)&&a.CE(s,m))return 1073741824}return 0},a.CE=function(s,o){for(var u=s.I(),p=new c.h,f=0;f<u;f++)if(s.D(f,p),o.Uo(p.x,p.y)==1)return!0;return!1},a.DI=function(s,o,u,p){for(var f=1<=s.qm(0)&&1<=o.qm(0),m=s.Ha(),v=o.Ha(),_=[0,0],M=[0,0],T=new c.am(s,o,u,!1),A=!1;T.next();){var O=T.pl(),R=T.jl();if(m.Wb(O),v.Wb(R),O=m.ia(),(R=v.ia().Fa(O,null,M,_,u))==2){if(A=_[0],R=_[1],O=O.Rb(),f&&(R-A)*O>u)return!1;A=!0}else if(R!=0){if(A=_[0],O=M[0],0<A&&1>A&&0<O&&1>O)return!1;A=!0}}return!!A&&(m=new c.l,v=new c.l,f=new c.l,s.A(m),o.A(v),m.X(1e3*u,1e3*u),v.X(1e3*u,1e3*u),f.L(m),f.Fa(v),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B())||10<o.I()&&(o=c.Vd.clip(o,f,u,0),o.B()))&&c.cm.st(s,o,u,"F********",p))},a.AI=function(s,o,u,p){var f=1<=s.qm(0)&&1<=o.qm(0),m=new c.l,v=new c.l,_=new c.l;s.A(m),o.A(v);for(var M=!1,T=a.ns(m,v,u),A=a.ns(v,m,u),O=s.Ha(),R=o.Ha(),j=[0,0],z=[0,0],V=new c.am(s,o,u,!1);V.next();){var F=V.pl(),G=V.jl();if(O.Wb(F),R.Wb(G),G=O.ia(),(F=R.ia().Fa(G,null,z,j,u))==2){F=j[0];var Z=j[1];if(G=G.Rb(),f&&(Z-F)*G>u&&(M=!0,T&&A))return!0}else if(F!=0&&(F=j[0],G=z[0],0<F&&1>F&&0<G&&1>G))return!0}if(f=new c.l,O=new c.l,f.L(m),f.X(1e3*u,1e3*u),O.L(v),O.X(1e3*u,1e3*u),_.L(f),_.Fa(O),m="",m=M?m+"**":m+"T*",T){if(10<o.I()&&(o=c.Vd.clip(o,_,u,0)).B())return!1;m+="****"}else m+="T***";if(A){if(10<s.I()&&(s=c.Vd.clip(s,_,u,0)).B())return!1;m+="***"}else m+="T**";return c.cm.st(s,o,u,m.toString(),p)},a.wI=function(s,o,u,p){var f=[!1],m=a.uI(s,o,u,f);return f[0]?m:(f=new c.l,o.A(f),f.X(1e3*u,1e3*u),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B()))&&c.cm.Uw(s,o,u,p))},a.uI=function(s,o,u,p){p[0]=!1;for(var f=s.Ha(),m=o.Ha(),v=[0,0],_=[0,0],M=new c.am(s,o,u,!1),T=!1;M.next();){var A=M.pl(),O=M.jl();if(f.Wb(A,-1),m.Wb(O,-1),A=f.ia(),(A=m.ia().Fa(A,null,_,v,u))!=0&&(T=!0,A==1&&(A=v[0],O=_[0],0<A&&1>A&&0<O&&1>O)))return p[0]=!0,!1}if(!T){for(p[0]=!0,v=new c.l,s.A(v),v.X(u,u),M=s,T=!1,_=new c.l,p=0,f=o.ea();p<f;p++)if(0<o.Ka(p)){if(o.Tj(p,_),!v.isIntersecting(_)||(m=o.Oa(o.Ca(p)),(m=c.Fg.ym(M,m,0))==0))return!1;T||(!c.Fg.Ol(s,o.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?M=s:(m=new c.Ea,s.copyTo(m),m.hj(1),M=m),T=!0)}if(s.ea()==1||o.K()==1607)return!0;for(v=new c.l,o.A(v),v.X(u,u),_=o,M=!1,u=new c.l,p=0,f=s.ea();p<f;p++)if(0<s.Ka(p)){if(s.Tj(p,u),v.isIntersecting(u)&&(m=s.Oa(s.Ca(p)),(m=c.Fg.ym(_,m,0))==1))return!1;M||(!c.Fg.Ol(o,s.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(m=new c.Ea,o.copyTo(m),m.hj(1),_=m),M=!0)}return!0}return!1},a.EI=function(s,o,u,p){for(var f=s.Ha(),m=o.Ha(),v=[0,0],_=[0,0],M=new c.am(s,o,u,!1),T=!1;M.next();){var A=M.pl(),O=M.jl();if(f.Wb(A),m.Wb(O),A=f.ia(),(A=m.ia().Fa(A,null,_,v,u))==2)T=!0;else if(A!=0){if(T=v[0],A=_[0],0<T&&1>T&&0<A&&1>A)return!1;T=!0}}return!!T&&(m=new c.l,v=new c.l,f=new c.l,s.A(m),o.A(v),m.X(1e3*u,1e3*u),v.X(1e3*u,1e3*u),f.L(m),f.Fa(v),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B())||10<o.I()&&(o=c.Vd.clip(o,f,u,0),o.B()))&&c.cm.bn(s,o,u,"F********",p))},a.yI=function(s,o,u,p){for(var f=s.Ha(),m=o.Ha(),v=[0,0],_=[0,0],M=new c.am(s,o,u,!1),T=!1;M.next();){var A=M.pl(),O=M.jl();if(f.Wb(A),m.Wb(O),A=f.ia(),(A=m.ia().Fa(A,null,_,v,u))==2)T=!0;else if(A!=0){if(T=v[0],A=_[0],0<T&&1>T&&0<A&&1>A)return!0;T=!0}}return!!T&&(m=new c.l,v=new c.l,_=new c.l,M=new c.l,f=new c.l,s.A(m),o.A(v),a.ns(v,m,u)?(_.L(m),_.X(1e3*u,1e3*u),M.L(v),M.X(1e3*u,1e3*u),f.L(_),f.Fa(M),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B())||10<o.I()&&(o=c.Vd.clip(o,f,u,0),o.B()))&&(u=c.cm.bn(s,o,u,"T********",p))):u=c.cm.bn(s,o,u,"T*****T**",p))},a.xI=function(s,o,u,p){var f=[!1],m=a.uI(s,o,u,f);return f[0]?m:(f=new c.l,o.A(f),f.X(1e3*u,1e3*u),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B()))&&c.cm.aB(s,o,u,p))},a.vI=function(s,o,u){return c.jd.Zd(s,o,u)==1},a.CI=function(s,o,u){return c.jd.Zd(s,o,u)==2},a.lt=function(s,o,u){var p=new c.h;u*=u;for(var f=0;f<s.I();f++)if(s.D(f,p),c.h.zc(p,o)<=u)return!1;return!0},a.prototype.LE=function(s,o){return s=this.th[s],o=this.th[o],s.Om<o.Om||s.Om==o.Om&&(s.rw<o.rw||s.rw==o.rw&&(s.Mj<o.Mj||s.Mj==o.Mj&&(s.Ui<o.Ui||s.Ui==o.Ui&&s.wH<o.wH)))?-1:1},a}();c.vd=h}(q||(q={})),function(c){var C,w,h;(w=C||(C={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(h||(h={})),C=function(){function a(){this.me=0,this.j=new c.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.tB=function(s,o,u,p,f){if(p.length!=9)throw c.i.ga("relation string length has to be 9 characters");for(var m=0;9>m;m++){var v=p.charAt(m);if(v!="*"&&v!="T"&&v!="F"&&v!="0"&&v!="1"&&v!="2")throw c.i.ga("relation string")}if((m=this.HR(p,s.Eb(),o.Eb()))!=0)return c.vd.uB(s,o,u,m,f);m=new c.l,s.A(m),v=new c.l,o.A(v);var _=new c.l;if(_.L(m),_.$b(v),u=c.ua.Xd(u,_,!1),s=this.RE(s,u),o=this.RE(o,u),s.B()||o.B())return this.pW(s,o,p);switch(m=o.K(),v=!1,s.K()){case 1736:switch(m){case 1736:v=this.st(s,o,u,p,f);break;case 1607:v=this.bn(s,o,u,p,f);break;case 33:v=this.rt(s,o,u,p);break;case 550:v=this.qt(s,o,u,p,f)}break;case 1607:switch(m){case 1736:v=this.bn(o,s,u,this.aq(p),f);break;case 1607:v=this.bB(s,o,u,p,f);break;case 33:v=this.ut(s,o,u,p,f);break;case 550:v=this.tt(s,o,u,p,f)}break;case 33:switch(m){case 1736:v=this.rt(o,s,u,this.aq(p));break;case 1607:v=this.ut(o,s,u,this.aq(p),f);break;case 33:v=this.VU(s,o,u,p);break;case 550:v=this.mt(o,s,u,this.aq(p))}break;case 550:switch(m){case 1736:v=this.qt(o,s,u,this.aq(p),f);break;case 1607:v=this.tt(o,s,u,this.aq(p),f);break;case 550:v=this.UA(s,o,u,p,f);break;case 33:v=this.mt(s,o,u,p)}break;default:v=!1}return v},a.st=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.sJ();var v=new c.l,_=new c.l;return s.A(v),o.A(_),p=!1,c.vd.fk(v,_,u)&&(m.Eu(s,o),p=!0),p||((v=c.vd.rc(s,o,!1))==4?(m.Eu(s,o),p=!0):v==1?(m.hy(o),p=!0):v==2&&(m.UD(s),p=!0)),p||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.Dp(s,o),m.j.Wg()),a.hg(m.J,m.Yc)},a.Uw=function(s,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.sJ();var m=new c.l,v=new c.l;s.A(m),o.A(v);var _=!1;return c.vd.fk(m,v,u)&&(f.Eu(s,o),_=!0),_||((m=c.vd.rc(s,o,!1))==4?(f.Eu(s,o),_=!0):m==1?(f.hy(o),_=!0):m==2&&(f.UD(s),_=!0)),_?this.hg(f.J,f.Yc):(s=(_=new c.hd).Ib(s),m=_.Ib(o),c.Vk.W(_,u,p,!1),u=_.Ke(m).ng(),_.Ip(0,!0,!0),c.tn.W(_,s,-1,!1,p),_.I(s)!=0&&(c.tn.W(_,m,-1,!1,p),f.gr(_,p),(o=_.I(m)==0)||(f.Dp(s,m),f.j.Wg(),m=this.hg(f.J,f.Yc))?(s=_.Ke(s),s=(_=new c.hd).Ib(s),m=_.Ib(u),f.gr(_,p),f.me=0,f.$i(),f.dj(o?"T*****F**":"******F**"),f.DB(),f.Dp(s,m),f.j.Wg(),this.hg(f.J,f.Yc)):m))},a.bn=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.DB();var v=new c.l,_=new c.l;return s.A(v),o.A(_),p=!1,c.vd.fk(v,_,u)&&(m.Fu(s,o),p=!0),p||((v=c.vd.rc(s,o,!1))==4?(m.Fu(s,o),p=!0):v==1&&(m.VD(o),p=!0)),p||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.mh=m.j.Fp(),a.Lw(o,m.j,m.mh),m.Dp(s,o),m.j.Gp(m.mh),m.j.Wg()),a.hg(m.J,m.Yc)},a.aB=function(s,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.DB();var m=new c.l,v=new c.l;s.A(m),o.A(v);var _=!1;return c.vd.fk(m,v,u)&&(f.Fu(s,o),_=!0),_||((m=c.vd.rc(s,o,!1))==4?(f.Fu(s,o),_=!0):m==1&&(f.VD(o),_=!0)),_?this.hg(f.J,f.Yc):(s=(_=new c.hd).Ib(s),o=_.Ib(o),f.Yo(_,u,p),_.I(s)!=0&&(f.Dp(s,o),f.j.Wg(),this.hg(f.J,f.Yc)))},a.qt=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.tJ();var v=new c.l,_=new c.l;return s.A(v),o.A(_),p=!1,c.vd.fk(v,_,u)&&(m.Gu(s),p=!0),p||((v=c.vd.rc(s,o,!1))==4?(m.Gu(s),p=!0):v==1&&(m.uN(),p=!0)),p||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.By(s,o),m.j.Wg()),a.hg(m.J,m.Yc)},a.bB=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.$W(),p=new c.l;var v=new c.l;s.A(p),o.A(v);var _=!1;return c.vd.fk(p,v,u)&&(m.KG(s,o),_=!0),_||c.vd.rc(s,o,!1)!=4||(m.KG(s,o),_=!0),_||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.$h=m.j.Fp(),m.mh=m.j.Fp(),a.Lw(s,m.j,m.$h),a.Lw(o,m.j,m.mh),m.Dp(s,o),m.j.Gp(m.$h),m.j.Gp(m.mh),m.j.Wg()),a.hg(m.J,m.Yc)},a.tt=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.HJ(),p=new c.l;var v=new c.l;s.A(p),o.A(v);var _=!1;return c.vd.fk(p,v,u)&&(m.Qz(s),_=!0),_||c.vd.rc(s,o,!1)!=4||(m.Qz(s),_=!0),_||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.$h=m.j.Fp(),a.Lw(s,m.j,m.$h),m.By(s,o),m.j.Gp(m.$h),m.j.Wg()),a.hg(m.J,m.Yc)},a.UA=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.MJ(),p=new c.l;var v=new c.l;s.A(p),o.A(v);var _=!1;return c.vd.fk(p,v,u)&&(m.tI(),_=!0),_||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.By(s,o),m.j.Wg()),a.hg(m.J,m.Yc)},a.rt=function(s,o,u,p){var f=new a;f.$i(),f.dj(p),f.tJ();var m=new c.l;s.A(m),o=o.D();var v=!1;return c.vd.Tw(o,m,u)&&(f.Gu(s),v=!0),v||((u=c.jd.Zd(s,o,u))==1?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):u==2?(f.J[6]=-1,s.He()!=0?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=-1,f.J[5]=-1,u=new c.l,s.A(u),f.J[2]=u.da()==0&&u.S()==0?-1:1)):f.Gu(s)),this.hg(f.J,p)},a.ut=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.HJ();var v=new c.l;s.A(v),p=o.D();var _=!1;if(c.vd.Tw(p,v,u)&&(m.Qz(s),_=!0),!_){v=null;var M=_=!1;(m.fa[0]||m.fa[6])&&(c.vd.Tz(s,p,u)?(m.fa[0]&&(v=c.si.im(s,f),M=!c.vd.lt(v,p,u),_=!0,m.J[0]=M?-1:0),m.J[6]=-1):(m.J[0]=-1,m.J[6]=0)),m.fa[3]&&(v!=null&&v.B()?m.J[3]=-1:(_||(v==null&&(v=c.si.im(s,f)),M=!c.vd.lt(v,p,u),_=!0),m.J[3]=M?0:-1)),m.fa[5]&&(v!=null&&v.B()?m.J[5]=-1:_&&!M?m.J[5]=0:(v==null&&(v=c.si.im(s,f)),f=c.vd.Pw(v,o,u),m.J[5]=f?-1:0)),m.fa[2]&&(s.Rb()!=0?m.J[2]=1:((f=new c.ee(s.description)).Gd(s,0,s.I()),s=c.vd.Pw(f,o,u),m.J[2]=s?-1:0))}return this.hg(m.J,m.Yc)},a.mt=function(s,o,u,p){var f=new a;f.$i(),f.dj(p),f.MJ();var m=new c.l;s.A(m),o=o.D();var v=!1;if(c.vd.Tw(o,m,u)&&(f.tI(),v=!0),!v){m=!1,v=!0,u*=u;for(var _=0;_<s.I();_++){var M=s.Oa(_);if(c.h.zc(M,o)<=u?m=!0:v=!1,m&&!v)break}m?(f.J[0]=0,f.J[2]=v?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=0,f.J[6]=0)}return a.hg(f.J,p)},a.VU=function(s,o,u,p){s=s.D(),o=o.D();for(var f=[],m=0;9>m;m++)f[m]=-1;return c.h.zc(s,o)<=u*u?f[0]=0:(f[2]=0,f[6]=0),f[8]=2,a.hg(f,p)},a.hg=function(s,o){for(var u=0;9>u;u++)switch(o.charAt(u)){case"T":if(s[u]==-1)return!1;break;case"F":if(s[u]!=-1)return!1;break;case"0":if(s[u]!=0)return!1;break;case"1":if(s[u]!=1)return!1;break;case"2":if(s[u]!=2)return!1}return!0},a.pW=function(s,o,u){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&o.B()){for(var f=0;9>f;f++)p[f]=-1;return this.hg(p,u)}return f=!1,s.B()&&(s=o,f=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=s.K(),c.ba.Ic(o)?o==1736?s.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new c.l,s.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=s.Rb()!=0,p[2]=o?1:0,p[5]=c.si.cq(s)?0:-1):(p[2]=0,p[5]=-1),f&&this.qK(p),this.hg(p,u)},a.HR=function(s,o,u){return a.ZP(s)?3:a.PP(s)?4:a.ZX(s,o,u)?8:a.xP(s,o,u)?16:a.$O(s)?1:a.zU(s,o,u)?32:0},a.ZP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},a.PP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},a.ZX=function(s,o,u){return(o!=0||u!=0)&&((o!=2||u!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||o==1&&u==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||u!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},a.xP=function(s,o,u){return o>u?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":o==1&&u==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},a.$O=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},a.zU=function(s,o,u){if(o==u){if(o!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},a.Lw=function(s,o,u){s=o.Ma(s);for(var p=o.Oe;p!=-1;p=o.Tf(p))if(o.yd(p)&s){var f=o.Je(p);if(f==-1)o.pn(p,u,0);else{var m=f,v=0;do o.fh(m)&s&&v++,m=o.kc(o.ya(m));while(m!=f);o.pn(p,u,v)}}},a.aq=function(s){var o=""+s.charAt(0);return o+=s.charAt(3),o+=s.charAt(6),o+=s.charAt(1),o+=s.charAt(4),o+=s.charAt(7),o+=s.charAt(2),(o+=s.charAt(5))+s.charAt(8)},a.prototype.$i=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.$a[s]=-2},a.qK=function(s){var o=s[1],u=s[2],p=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=o,s[6]=u,s[7]=p},a.prototype.dj=function(s){for(this.Yc=s,s=0;9>s;s++)this.Yc.charAt(s)!="*"?(this.fa[s]=!0,this.me++):this.fa[s]=!1},a.prototype.PJ=function(){for(var s=0;9>s;s++)this.fa[s]&&this.J[s]==-2&&(this.J[s]=-1,this.fa[s]=!1)},a.prototype.qc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.fa[s]=!1,this.me--,!0):this.Yc.charAt(s)!="T"&&this.Yc.charAt(s)!="F"?!(this.J[s]<this.$a[s])&&(this.fa[s]=!1,this.me--,!0):(this.fa[s]=!1,this.me--,!0))},a.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.sN=function(s,o,u){var p=!0;return this.fa[0]&&(this.xS(s,o,u),p=p&&this.qc(0)),this.fa[1]&&(this.nG(s,o,1),p=p&&this.qc(1)),this.fa[2]&&(this.oG(s,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.nG(s,u,3),p=p&&this.qc(3)),this.fa[4]&&(this.wN(s,o,u),p=p&&this.qc(4)),this.fa[5]&&(this.$D(s,u,5),p=p&&this.qc(5)),this.fa[6]&&(this.oG(s,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.$D(s,o,7),p=p&&this.qc(7)),p},a.prototype.Eu=function(s,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(s,o,u,p,f){o==-1&&p==-1||((u!="T"&&u!="F"&&o!=-1||f!="T"&&f!="F"&&p!=-1)&&s.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(u=new c.l,s.A(u),this.J[o]=u.da()==0&&u.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(s,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.UD=function(s){this.hy(s),a.qK(this.J)},a.prototype.Fu=function(s,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var u=this.Yc.charAt(6);u=u=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0}this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1),this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.VD=function(s){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||s.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(s=c.si.cq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.KG=function(s,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var u=this.Yc.charAt(2);u=u=="T"||u=="F"||s.Rb()!=0,this.J[2]=u?1:0}this.fa[5]&&(s=c.si.cq(s),this.J[5]=s?0:-1),this.fa[6]&&(u=(u=this.Yc.charAt(6))=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0),this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||s.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(s=c.si.cq(s),this.J[5]=s?0:-1),this.J[6]=0},a.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.tN=function(s,o,u){var p=!0;return this.fa[0]&&(this.yS(s,o),p=p&&this.qc(0)),this.fa[1]&&(this.uS(s,o,u,this.mh),p=p&&this.qc(1)),this.fa[2]&&(this.vS(s,o),p=p&&this.qc(2)),this.fa[3]&&(this.AN(s,o,u,this.mh),p=p&&this.qc(3)),this.fa[4]&&(this.xN(s,o,u,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.yN(s,o,u),p=p&&this.qc(5)),this.fa[6]&&(this.gQ(s,o),p=p&&this.qc(6)),this.fa[7]&&(this.fQ(s,o,u,this.mh),p=p&&this.qc(7)),p},a.prototype.hT=function(s,o,u){var p=!0;return this.fa[0]&&(this.BS(s,o,u,this.$h,this.mh),p=p&&this.qc(0)),this.fa[1]&&(this.pG(s,o,u,this.$h,this.mh,1),p=p&&this.qc(1)),this.fa[2]&&(this.qG(s,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.pG(s,u,o,this.mh,this.$h,3),p=p&&this.qc(3)),this.fa[4]&&(this.CN(s,o,u,this.$h,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.aE(s,u,this.$h,5),p=p&&this.qc(5)),this.fa[6]&&(this.qG(s,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.aE(s,o,this.mh,7),p=p&&this.qc(7)),p},a.prototype.WD=function(s,o,u){var p=!0;return this.fa[0]&&(this.zS(s,o),p=p&&this.qc(0)),this.fa[2]&&(this.wS(s,o),p=p&&this.qc(2)),this.fa[3]&&(this.BN(s,o,u),p=p&&this.qc(3)),this.fa[5]&&(this.zN(s,o),p=p&&this.qc(5)),this.fa[6]&&(this.hQ(s,o),p=p&&this.qc(6)),p},a.prototype.LG=function(s,o,u){var p=!0;return this.fa[0]&&(this.CS(s,o,u,this.$h),p=p&&this.qc(0)),this.fa[2]&&(this.AS(s,u),p=p&&this.qc(2)),this.fa[3]&&(this.EN(s,o,u,this.$h),p=p&&this.qc(3)),this.fa[5]&&(this.DN(s,o,u,this.$h),p=p&&this.qc(5)),this.fa[6]&&(this.iQ(s,o,u),p=p&&this.qc(6)),p},a.prototype.UU=function(s,o,u){var p=!0;return this.fa[0]&&(this.DS(s,o,u),p=p&&this.qc(0)),this.fa[2]&&(this.rG(s,o,u,2),p=p&&this.qc(2)),this.fa[6]&&(this.rG(s,u,o,6),p=p&&this.qc(6)),p},a.prototype.xS=function(s,o,u){this.J[0]!=2&&(s=this.j.af(s))&o&&s&u&&(this.J[0]=2)},a.prototype.nG=function(s,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(s));this.j.af(s)&o&&p&o&&(this.J[u]=1)}},a.prototype.oG=function(s,o,u,p){this.J[p]!=2&&(s=this.j.af(s))&o&&!(s&u)&&(this.J[p]=2)},a.prototype.wN=function(s,o,u){if(this.J[4]!=1){var p=this.j.fh(s);p&o&&p&u?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.yd(this.j.vf(s)))&o&&s&u&&(this.J[4]=0)}},a.prototype.$D=function(s,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(s));!(this.j.af(s)&o)&&!(p&o)&&(this.J[u]=1)}},a.prototype.yS=function(s,o){if(this.J[0]!=1){var u=this.j.af(this.j.ya(s));this.j.af(s)&o&&u&o&&(this.J[0]=1)}},a.prototype.uS=function(s,o,u,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var f=this.j.vf(s),m=this.j.yd(f);!(m&o)&&this.j.af(s)&o&&(s=this.j.og(f,p),m&u&&s%2!=0&&(this.J[1]=0))}},a.prototype.vS=function(s,o){this.J[2]!=2&&this.j.fh(s)&o&&(this.J[2]=2)},a.prototype.AN=function(s,o,u,p){if(this.J[3]!=1){var f=this.j.fh(s);f&o&&f&u?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(f=this.j.vf(s),(s=this.j.yd(f))&o&&(o=this.j.og(f,p),s&u&&o%2==0&&(this.J[3]=0)))}},a.prototype.xN=function(s,o,u,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var f=this.j.vf(s);(s=this.j.yd(f))&o&&(o=this.j.og(f,p),s&u&&o%2!=0&&(this.J[4]=0))}},a.prototype.yN=function(s,o,u){this.J[5]!=1&&(s=this.j.fh(s))&o&&!(s&u)&&(this.J[5]=1)},a.prototype.gQ=function(s,o){if(this.J[6]!=1){var u=this.j.af(this.j.ya(s));!(this.j.af(s)&o)&&!(u&o)&&(this.J[6]=1)}},a.prototype.fQ=function(s,o,u,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var f=this.j.vf(s),m=this.j.yd(f);!(m&o)&&!(this.j.af(s)&o)&&(s=this.j.og(f,p),m&u&&s%2!=0&&(this.J[7]=0))}},a.prototype.BS=function(s,o,u,p,f){if(this.J[0]!=1){var m=this.j.fh(s);m&o&&m&u?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),(m=this.j.yd(s))&o&&m&u&&(o=this.j.og(s,p),f=this.j.og(s,f),o%2==0&&f%2==0&&(this.J[0]=0)))}},a.prototype.pG=function(s,o,u,p,f,m){if(this.J[m]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var v=this.j.yd(s);v&o&&v&u&&(o=this.j.og(s,p),f=this.j.og(s,f),o%2==0&&f%2!=0&&(this.J[m]=0))}},a.prototype.qG=function(s,o,u,p){this.J[p]!=1&&(s=this.j.fh(s))&o&&!(s&u)&&(this.J[p]=1)},a.prototype.CN=function(s,o,u,p,f){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var m=this.j.yd(s);m&o&&m&u&&(o=this.j.og(s,p),f=this.j.og(s,f),o%2!=0&&f%2!=0&&(this.J[4]=0))}},a.prototype.aE=function(s,o,u,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),!(this.j.yd(s)&o)&&this.j.og(s,u)%2!=0&&(this.J[p]=0))},a.prototype.zS=function(s,o){this.J[0]!=0&&!(this.j.yd(s)&o)&&this.j.jk(this.j.Yy(s))&o&&(this.J[0]=0)},a.prototype.wS=function(s,o){this.J[2]!=2&&this.j.yd(s)&o&&(this.J[2]=2)},a.prototype.BN=function(s,o,u){this.J[3]!=0&&(s=this.j.yd(s))&o&&s&u&&(this.J[3]=0)},a.prototype.zN=function(s,o){this.J[5]!=1&&this.j.yd(s)&o&&(this.J[5]=1)},a.prototype.hQ=function(s,o){this.J[6]!=0&&!(this.j.yd(s)&o)&&!(this.j.jk(this.j.Yy(s))&o)&&(this.J[6]=0)},a.prototype.CS=function(s,o,u,p){if(this.J[0]!=0){var f=this.j.yd(s);f&o&&f&u&&this.j.og(s,p)%2==0&&(this.J[0]=0)}},a.prototype.AS=function(s,o){this.J[2]!=1&&(this.j.Je(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(s)&o)&&(this.J[2]=0))},a.prototype.EN=function(s,o,u,p){if(this.J[3]!=0){var f=this.j.yd(s);f&o&&f&u&&this.j.og(s,p)%2!=0&&(this.J[3]=0)}},a.prototype.DN=function(s,o,u,p){if(this.J[5]!=0){var f=this.j.yd(s);f&o&&!(f&u)&&this.j.og(s,p)%2!=0&&(this.J[5]=0)}},a.prototype.iQ=function(s,o,u){this.J[6]!=0&&!((s=this.j.yd(s))&o)&&s&u&&(this.J[6]=0)},a.prototype.DS=function(s,o,u){this.J[0]!=0&&(s=this.j.yd(s))&o&&s&u&&(this.J[0]=0)},a.prototype.rG=function(s,o,u,p){this.J[p]!=0&&(s=this.j.yd(s))&o&&!(s&u)&&(this.J[p]=0)},a.prototype.Dp=function(s,o){var u=!1;s=this.j.Ma(s),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){var f=this.j.Je(p);if(f==-1){if(this.Um!=-1)switch(this.Um){case 3:u=this.WD(p,s,o);break;case 4:u=this.LG(p,s,o);break;default:throw c.i.ga("internal error")}}else{var m=f;do{var v=m;if(this.j.Bb(v,this.Wi)!=1)do{switch(this.xw){case 0:u=this.sN(v,s,o);break;case 1:u=this.tN(v,s,o);break;case 2:u=this.hT(v,s,o);break;default:throw c.i.ga("internal error")}if(u)break;this.j.Kb(v,this.Wi,1),v=this.j.kc(v)}while(v!=m&&!u);if(u)break;m=this.j.kc(this.j.ya(v))}while(m!=f);if(u)break}}u||this.PJ(),this.j.Lg(this.Wi)},a.prototype.By=function(s,o){var u=!1;s=this.j.Ma(s),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){switch(this.Um){case 3:u=this.WD(p,s,o);break;case 4:u=this.LG(p,s,o);break;case 5:u=this.UU(p,s,o);break;default:throw c.i.Ra()}if(u)break}u||this.PJ()},a.prototype.gr=function(s,o){this.j.fr(s,o)},a.prototype.Yo=function(s,o,u){this.TP(s,o,u),this.gr(s,u)},a.prototype.TP=function(s,o,u){for(c.Vk.W(s,o,u,!1),s.Ip(0,!0,!0),o=s.md;o!=-1;o=s.ve(o))s.jc(o)==1736&&c.tn.W(s,o,-1,!1,u)},a.RE=function(s,o){var u=s.K();return c.ba.zd(u)?((o=new c.Ua(s.description)).pc(s,!0),o):u==197?(u=new c.l,s.A(u),u.da()<=o&&u.S()<=o?(o=new c.Ta(s.description),s.tf(o),o):u.da()<=o||u.S()<=o?(o=new c.Ua(s.description),u=new c.Ta,s.If(0,u),o.nf(u),s.If(2,u),o.lineTo(u),o):((o=new c.Ea(s.description)).bd(s,!1),o)):s},a}(),c.cm=C}(q||(q={})),function(c){var C=function(){function a(s){this.Gm=new c.ja(0),this.fw=new c.ja(0),this.xt=new c.h,this.yt=new c.h,this.g=s,this.Js=-1}return a.prototype.cc=function(s){return this.g.cc(this.uz(s))},a.prototype.Dv=function(s){var o=this.dz(s);if(s=this.CF(s),this.g.Na(o)==s){var u=o;o=s,s=u}return this.g.Hc(o,this.xt),this.g.Hc(s,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(s){var o=this.dz(s);return s=this.CF(s),this.g.V(o)==s?o:s},a.prototype.dz=function(s){return this.Gm.get(s)},a.prototype.CF=function(s){return this.fw.get(s)},a.prototype.mF=function(s){this.Gm.set(s,this.Js),this.Js=s},a.prototype.iI=function(s){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,s),this.fw.set(o,this.g.V(s)),o}return this.Gm==null&&(this.Gm=new c.ja(0),this.fw=new c.ja(0)),o=this.Gm.size,this.Gm.add(s),this.fw.add(this.g.V(s)),o},a.prototype.mz=function(s){return this.g.cd(this.dz(s))},a}();c.uY=C;var w=function(){function a(s){this.Ce=s,this.je=new c.zb,this.Pm=new c.zb,this.xH=0,this.Co=null,this.tA=-1}return a.prototype.compare=function(s,o,u){u=s.ka(u);var p=this.Ce.hb;if(this.tA==o)var f=this.xH;else this.Co=p.cc(o),this.Co==null?((s=p.g).fd(p.uz(o),this.je),this.Co=this.je,f=this.je.Me(this.Ce.Ah,0)):f=this.Co.Me(this.Ce.Ah,0),this.xH=f,this.tA=o;if((s=p.cc(u))==null){(s=p.g).fd(p.uz(u),this.Pm),s=this.Pm;var m=this.Pm.Me(this.Ce.Ah,0)}else m=s.Me(this.Ce.Ah,0);return f==m&&(o=p.Dv(o),u=p.Dv(u),(o=.5*((u=Math.min(o?this.Co.ma:this.Co.oa,u?s.ma:s.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=u),f=this.Co.Me(o,0),m=s.Me(o,0)),f<m?-1:f>m?1:0},a.prototype.reset=function(){this.tA=-1},a}(),h=function(){function a(){this.Ym=this.Il=null,this.fb=new c.$j,this.fb.MP(),this.ae=new w(this),this.fb.Xo(this.ae)}return a.prototype.CQ=function(){var s=!1;if(this.hw&&(s=this.DQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return s=this.g.qz(o),this.g.KB(o,!0),0>s&&(s=this.g.Ya(o),this.g.kJ(s),this.g.Yg(o,this.g.Na(s)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.yo,-1);o=new c.ja(0),this.Ah=NaN;var u=new c.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.ke);p!=-1;p=this.Il.lb(p)){var f=this.Il.getData(p);if(this.g.Hc(f,u),u.y!=this.Ah&&o.size!=0&&(s=this.vt(o)||s,this.ae.reset(),o.clear(!1)),o.add(f),this.Ah=u.y,this.ft==0)break}for(0<this.ft&&(s=this.vt(o)||s,o.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.KB(o,!0),u=o,o=this.g.uj(o,this.yo);o!=-1;)p=this.g.uj(o,this.yo),this.g.UT(this.Y,this.g.Sb(u),o),u=o,o=p;o=this.g.Sb(u)}else this.g.KB(o,!1),o=this.g.Sb(o);return this.g.xB(this.Gl),this.g.xB(this.yo),s},a.prototype.vt=function(s){return this.VV(s)},a.prototype.VV=function(s){var o=!1;this.hb==null&&(this.hb=new C(this.g)),this.Ym==null?(this.Ym=new c.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(s);for(var u=0,p=s.size;u<p;u++){var f=s.get(u);f!=-1&&this.jG(f,-1)}for(u=0;u<this.Ym.size&&0<this.ft;u++)if(s=this.Ym.get(u),f=this.hb.mz(this.fb.ka(s)),p=-1,this.g.uj(f,this.Gl)==0){f=this.fb.xe(s);for(var m,v=s;f!=-1;){var _=this.fb.ka(f),M=this.hb.mz(_),T=this.g.uj(M,this.Gl);if(T!=0){p=M;break}v=f,f=this.fb.xe(f)}f==-1?(m=!0,f=v):(_=this.fb.ka(f),m=this.hb.Dv(_),f=this.fb.lb(f),m=!m);do{if(_=this.fb.ka(f),M=this.hb.mz(_),(T=this.g.uj(M,this.Gl))==0&&(m!=this.hb.Dv(_)&&(o=this.g.Ya(M),this.g.kJ(o),this.g.Yg(M,this.g.Na(o)),o=!0),this.g.ir(M,this.Gl,m?3:2),m||(v=this.g.uj(p,this.yo),this.g.ir(p,this.yo,M),this.g.ir(M,this.yo,v)),this.ft--,this.ft==0))return o;p=M,v=f,f=this.fb.lb(f),m=!m}while(v!=s)}return o},a.prototype.UV=function(s){for(var o=0,u=s.size;o<u;o++){var p=s.get(o),f=this.g.Qa(p,this.to),m=this.g.Qa(p,this.Ts);if(f!=-1){var v=this.fb.ka(f);this.hb.mF(v),this.g.Sa(p,this.to,-1)}m!=-1&&(v=this.fb.ka(m),this.hb.mF(v),this.g.Sa(p,this.Ts,-1)),v=-1,f!=-1&&m!=-1?(this.fb.wd(f,-1),this.fb.wd(m,-1),s.set(o,-1)):v=f!=-1?f:m,v!=-1&&(this.jG(p,v)||this.fb.wd(v,-1),s.set(o,-1))}},a.prototype.jG=function(s,o){var u=new c.h,p=new c.h;this.g.Hc(s,u);var f=this.g.V(s);this.g.Hc(f,p);var m=!1;if(u.y<p.y){m=!0;var v=this.hb.iI(s);if(o==-1)var _=this.fb.addElement(v,-1);else _=o,this.fb.Uj(_,v);(v=this.g.Qa(f,this.to))==-1?this.g.Sa(f,this.to,_):this.g.Sa(f,this.Ts,_),f=this.g.cd(s),this.g.uj(f,this.Gl)==0&&this.Ym.add(_)}return f=this.g.Na(s),this.g.Hc(f,p),u.y<p.y&&(m=!0,v=this.hb.iI(f),o==-1?_=this.fb.addElement(v,-1):(_=o,this.fb.Uj(_,v)),(v=this.g.Qa(f,this.to))==-1?this.g.Sa(f,this.to,_):this.g.Sa(f,this.Ts,_),f=this.g.cd(s),this.g.uj(f,this.Gl)==0&&this.Ym.add(_)),m},a.W=function(s,o,u,p){var f=new a;return f.g=s,f.Y=o,f.Il=u,f.hw=p,f.CQ()},a.prototype.DQ=function(){var s=new c.ja(0),o=new c.ja(0),u=-1,p=-1,f=new c.h;f.Sc();for(var m=-1,v=-1,_=-1,M=new c.h,T=this.Il.sc(this.Il.ke);T!=-1;T=this.Il.lb(T)){var A=this.Il.getData(T);this.g.Hc(A,M);var O=this.g.cd(A);f.rb(M)&&v==O?(p==-1&&(u=this.g.Fy(),p=this.g.Hd()),_==-1&&(_=o.size,this.g.Sa(m,p,_),o.add(1),this.g.uj(O,u)==-1&&(this.g.ir(O,u,m),s.add(O))),this.g.Sa(A,p,_),o.XW(o.Gc()+1)):(_=-1,f.N(M)),m=A,v=O}if(s.size==0)return!1;for(f=new c.ja(0),m=new c.ja(0),v=0,_=s.size;v<_;v++){O=s.get(v);var R=this.g.uj(O,u);for(A=this.g.Qa(R,p),f.clear(!1),m.clear(!1),f.add(R),m.add(A),A=this.g.V(R);A!=R;A=this.g.V(A)){var j=A;if((M=this.g.Qa(j,p))!=-1)if(m.size==0)m.add(M),f.add(j);else if(m.Gc()==M){T=f.Gc();var z=this.g.V(T);R=this.g.V(j),this.g.Cc(T,R),this.g.Dc(R,T),this.g.Cc(j,z),this.g.Dc(z,j),j=[!1],z=this.g.iG(this.Y,z,this.g.Ya(O),j),this.g.Sa(A,p,-1),j[0]&&this.g.Kf(O,R),A=this.g.Ka(O),A-=R=this.g.Ka(z),this.g.Xj(O,A),o.set(M,o.get(M)-1),o.get(M)==1&&(o.set(M,0),m.Jf(),f.Jf()),A=R=T}else f.add(A),m.add(M)}}return this.g.xB(u),this.g.Ud(p),!0},a}();c.RL=h}(q||(q={})),function(c){var C=function(){function w(){}return w.prototype.jg=function(){this.KA=this.tb=null},w.prototype.get=function(){return this.KA},w.prototype.set=function(h){if(this.KA=h,h!=null)throw h.K()==322&&(this.tb=h),c.i.Ra()},w.prototype.create=function(h){if(h!=322)throw c.i.ga("Not Implemented");this.Qr()},w.prototype.Qr=function(){this.tb==null&&(this.tb=new c.zb),this.KA=this.tb},w}();c.jg=C}(q||(q={})),function(c){(c=c.SL||(c.SL={}))[c.enumLineSeg=1]="enumLineSeg",c[c.enumBezierSeg=2]="enumBezierSeg",c[c.enumArcSeg=4]="enumArcSeg",c[c.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",c[c.enumSegmentMask=7]="enumSegmentMask",c[c.enumDensified=8]="enumDensified"}(q||(q={})),function(c){var C=function(h){this.bj=h,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},w=function(){function h(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new c.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return h.prototype.rB=function(a){if(a!=null){for(var s=0,o=a.length;s<o;s++)this.mW(a[s]);a.length=0}},h.prototype.mW=function(a){a.bj=null,this.Kq.push(a)},h.prototype.Qw=function(a){if(this.Kq.length===0)var s=new C(a);else(s=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return s},h.prototype.NR=function(a,s){return a==0?this.bt[s]:this.Aw[s]},h.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new c.jg);var a=this.HA[this.Ew];return this.Ew++,a},h.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},h.prototype.Qo=function(a){this.oo.push(this.Qw(a))},h.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},h.prototype.Xp=function(a,s){return this.NR(a,s).bj},h.prototype.Fa=function(a,s){if(this.oo.length!=2)throw c.i.Ra();this.ra=a;var o=c.mc.ox(.01*a),u=!1,p=this.oo[0],f=this.oo[1];if(s||5&p.bj.Br(f.bj,a,!0)){if(p.bj.K()==322){var m=p.bj;if(f.bj.K()==322){s=f.bj;var v=c.zb.Yx(m,s,null,this.Hq,this.Dk,a);if(v==0)throw c.zb.Yx(m,s,null,this.Hq,this.Dk,a),c.i.Ra();a=Array(9),c.P.bv(a,null);for(var _=0;_<v;_++){var M=this.Hq[_],T=this.Dk[_],A=p.nB,O=1;M==0?(A=p.oB,O=p.mC):M==1&&(A=p.mB,O=p.lC);var R=f.nB,j=1;T==0?(R=f.oB,j=f.mC):T==1&&(R=f.mB,j=f.lC);var z=new c.h;A==R?(A=new c.h,m.ic(M,A),M=new c.h,s.ic(T,M),j/=T=O+j,c.mc.JG(A,M,j,z),c.h.zc(z,A)+c.h.zc(z,M)>o&&(u=!0)):A>R?(m.ic(M,z),M=new c.h,s.ic(T,M),c.h.zc(z,M)>o&&(u=!0)):(s.ic(T,z),A=new c.h,m.ic(M,A),c.h.zc(z,A)>o&&(u=!0)),a[_]=z}for(p=0,f=-1,_=0;_<=v;_++)(j=_<v?this.Hq[_]:1)!=p&&(o=this.WA(),m.dh(p,j,o),f!=-1&&o.get().Ec(a[f]),_!=v&&o.get().Rc(a[_]),p=j,this.bt.push(this.Qw(o.get()))),f=_;for(m=[0,0,0,0,0,0,0,0,0],_=0;_<v;_++)m[_]=_;for(1<v&&this.Dk[0]>this.Dk[1]&&(j=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=j,_=m[0],m[0]=m[1],m[1]=_),p=0,f=-1,_=0;_<=v;_++)(j=_<v?this.Dk[_]:1)!=p&&(o=this.WA(),s.dh(p,j,o),f!=-1&&(p=m[f],o.get().Ec(a[p])),_!=v&&(p=m[_],o.get().Rc(a[p])),p=j,this.Aw.push(this.Qw(o.get()))),f=_;return u}}throw c.i.Ra()}return!1},h.prototype.Fz=function(a,s,o){if(s.copyTo(this.Cf),this.oo.length!=1)throw c.i.Ra();this.ra=a;var u=this.oo[0];if(o||u.bj.tu(s.D(),a,!0)){if(u.bj.K()!=322)throw c.i.Ra();var p=(a=u.bj).ge(s.D(),!1);this.Hq[0]=p;var f=u.nB;for(o=1,p==0?(f=u.oB,o=u.mC):p==1&&(f=u.mB,o=u.lC),u=new c.h,f==0?(f=new c.h,a.ic(p,f),s=s.D(),c.mc.JG(f,s,1/(o+1),u)):0<f?(u=new c.h,a.ic(p,u)):u=s.D(),o=0,p=-1,f=0;1>=f;f++){if((s=1>f?this.Hq[f]:1)!=o){var m=this.WA();a.dh(o,s,m),p!=-1&&m.get().Ec(u),f!=1&&m.get().Rc(u),o=s,this.bt.push(this.Qw(m.get()))}p=f}this.Cf.Db(u)}},h}();c.OC=w}(q||(q={})),function(c){var C=function(){function w(h){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=h,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new c.h}return w.prototype.wW=function(h){if(this.ib!=h.ib)throw c.i.Hb();this.Af=h.Af,this.Kd=h.Kd,this.gb=h.gb,this.El=h.El,this.cg=h.cg,this.Bm=h.Bm,this.tk=null},w.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw c.i.de();this.Kd++}return this.tk},w.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw c.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},w.prototype.xW=function(){this.Af=-1,this.Kd=0},w.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},w.prototype.Wb=function(h,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var s=this.DM();if(h>=s&&h<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=h-s)}a=0<=a&&a<this.ib.ea()&&h>=this.ib.Ca(a)&&h<this.ib.Wc(a)?a:this.ib.nz(h),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=h-this.ib.Ca(a),this.cg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},w.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},w.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},w.prototype.Vx=function(h){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(h)&&(a=0),this.ib.Ka(h)-a},w.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},w.prototype.EB=function(){this.Bm=!0},w.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},w.prototype.DM=function(){return this.ib.Ca(this.gb)},w.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},w.prototype.xm=function(){return this.Af==0},w.prototype.Sn=function(){return this.Af==this.cg-1},w.prototype.Ia=function(){return this.Kd<this.cg},w.prototype.zz=function(){return 0<this.Kd},w.prototype.Qf=function(){var h=new w(this.ib);return h.Af=this.Af,h.Kd=this.Kd,h.cg=this.cg,h.gb=this.gb,h.El=this.El,h.ib=this.ib,h.Bm=this.Bm,h},w.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw c.i.de();this.Af=this.Kd;var h=this.xb();this.ib.oc();var a=this.ib.Se,s=1;switch(a!=null&&(s=7&a.read(h)),a=this.ib.description,s){case 1:this.tb==null&&(this.tb=new c.zb),this.tk=this.tb;break;case 2:throw c.i.ga("internal error");default:throw c.i.Ra()}this.tk.Pf(a),s=this.kk(),this.ib.Hc(h,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(s,this.Fs),this.tk.Rc(this.Fs);for(var o=1,u=a.Ba;o<u;o++)for(var p=a.ld(o),f=c.sa.Wa(p),m=0;m<f;m++){var v=this.ib.Vc(p,h,m);this.tk.TB(p,m,v),v=this.ib.Vc(p,s,m),this.tk.JB(p,m,v)}},w.prototype.VS=function(){return this.gb==this.ib.ea()-1},w.prototype.Rn=function(){var h=this.ib.QR();return h!=null&&(7&h.read(this.Af))!=1},w}();c.TL=C}(q||(q={})),function(c){var C=function(){function w(h){h instanceof c.ba?(this.sH=h,this.za=-1,this.Gi=1):(this.qT=h.slice(0),this.za=-1,this.Gi=h.length)}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},w.prototype.re=function(){},w}();c.$c=C}(q||(q={})),function(c){var C=function(){this.next=null},w=function(){function h(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return h.prototype.wX=function(a,s,o){this.ri=a,this.rl=s,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=c.P.mg(384,0)),this.iK()},h.prototype.S=function(){return this.ri},h.prototype.da=function(){return this.rl},h.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},h.prototype.iK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var s=this.Yl[a];s!=null;){var o=s;s=s.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},h.prototype.dJ=function(a){for(this.fF=a==h.Bx,a=this.Nw;a<=this.Mw;a++)this.nN(),this.gN(a),this.UP();this.iK()},h.prototype.fy=function(a,s,o,u){if(s!=u){var p=1;if(s>u&&(p=a,a=o,o=p,p=s,s=u,u=p,p=-1),!(0>u||s>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var f=(o-a)/(u-s);u>this.rl&&(o=f*((u=this.rl)-s)+a),0>s&&(a=f*(0-s)+a,s=0);var m=Math.max(this.ri+1,8388607);-8388607>a?(s=(0-a)/f+s,a=0):a>m&&(s=(this.ri-a)/f+s,a=this.ri),-8388607>o?u=(0-a)/f+s:o>m&&(u=(this.ri-a)/f+s),(s=c.P.truncate(s))!=(u=c.P.truncate(u))&&((o=new C).x=c.P.truncate(4294967296*a),o.y=s,o.H=u,o.RP=c.P.truncate(4294967296*f),o.dir=p,this.Yl==null&&(this.Yl=c.P.mg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},h.prototype.nN=function(){if(this.Lh!=null){for(var a=!1,s=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var u=o;o=o.next,s!=null?s.next=o:this.Lh=o,u.next=null}else o.x+=o.RP,s!=null&&s.x>o.x&&(a=!0),s=o,o=o.next;a&&(this.Lh=this.aK(this.Lh))}},h.prototype.gN=function(a){if(!(a>=this.rl)){var s=this.Yl[a];if(s!=null){this.Yl[a]=null,s=this.aK(s),this.Vq-=this.bK,a=this.Lh;for(var o=!0,u=s,p=null;a!=null&&u!=null;)a.x>u.x?(o&&(this.Lh=u),o=u.next,u.next=a,p!=null&&(p.next=u),p=u,u=o):(o=a.next,a.next=u,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=s)}}},h.$J=function(a,s){return 0>a?0:a>s?s:a},h.prototype.UP=function(){if(this.Lh!=null){for(var a=0,s=this.Lh,o=c.P.truncate(c.P.SG(s.x)),u=s.next;u!=null;u=u.next)if(a=this.fF?1^a:a+u.dir,u.x>s.x){var p=c.P.truncate(c.P.SG(u.x));a!=0&&(s=h.$J(o,this.ri),(o=h.$J(p,this.ri))>s&&s<this.ri&&(this.jn[this.Ql++]=s,this.jn[this.Ql++]=o,this.jn[this.Ql++]=u.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),s=u,o=p}}},h.prototype.aK=function(a){for(var s=0,o=a;o!=null;o=o.next)s++;if(this.bK=s,s==1)return a;this.Lf==null?this.Lf=c.P.mg(Math.max(s,16),null):this.Lf.length<s&&(this.Lf=c.P.mg(Math.max(s,2*this.Lf.length),null));var u=0;for(o=a;o!=null;o=o.next)this.Lf[u++]=o;for(s==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):h.vN(this.Lf,s,function(p,f){return p==f?0:p.x<f.x?-1:p.x>f.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,u=1;u<s;u++)o.next=this.Lf[u],o=this.Lf[u],this.Lf[u]=null;return o.next=null,a},h.vN=function(a,s,o){if(s==a.length)a.sort(o);else{var u=a.slice(0,0),p=a.slice(s);s=a.slice(0,s).sort(o),a.length=0,a.push.apply(a,u.concat(s).concat(p))}},h.Bx=0,h}();c.Ox=w}(q||(q={})),function(c){var C=function(){function w(){}return w.prototype.wi=function(h,a){var s=this.g.Qa(h,this.Rq);if(this.Fl==s&&(this.Fl=this.pe.lb(this.Fl)),this.jo==s&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,s),this.dk(h),a&&(a=this.g.cd(h))!=-1&&this.g.Ya(a)==h){var o=this.g.V(h);if(o!=h){if((s=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(h))!=h&&(s=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},w.prototype.kD=function(){for(var h=!1,a=new c.h;;){this.Yh==null?(this.Yh=new c.ja(0),this.Bs=new c.ja(0),this.ye=new c.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var s=this.jo,o=0,u=!0;s!=this.Fl;){var p=this.pe.getData(s),f=new c.h;this.g.Hc(p,f),u&&(this.g.Hc(p,a),u=!1),f=this.g.Na(p);var m=this.g.V(p);this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(m,this.Ag)!=-559038737&&(this.Yh.add(m),this.g.Sa(m,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),s=this.pe.lb(s)}if(2>this.Yh.size)break;var v=this;for(this.ye.Wd(0,this.ye.size,function(_,M){return v.kM(_,M)}),s=0,o=this.ye.size;s<o;s++)u=this.ye.get(s),u=this.Yh.get(u),this.g.Sa(u,this.Ag,s),f=new c.h,this.g.Hc(u,f);for(f=this.OM(a),s=0,o=this.ye.size;s<o;s++)(u=this.ye.get(s))!=-1&&(u=this.Yh.get(u),this.g.Sa(u,this.Ag,-1));if(!f)break;h=!0}return h},w.prototype.OM=function(h){for(var a=!1,s=!0;s;){s=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++){var m=this.ye.get(o);u=this.ye.get(u),m=this.Yh.get(m),u=this.Yh.get(u);var v=this.g.V(m);this.g.Fv(v,h)||(v=this.g.Na(m));var _=this.g.V(u);this.g.Fv(_,h)||(_=this.g.Na(u));var M=this.ru(v,m),T=this.ru(_,u),A=M?this.g.Na(v):this.g.V(v),O=T?this.g.Na(_):this.g.V(_),R=!1;(this.up(v)||this.up(_)||this.up(m)||this.up(u)||this.up(A)||this.up(O))&&(R=!0),!R&&this.g.hq(m,u)&&(R=!0,this.oD(M,T,v,m,_,u)),!R&&this.g.hq(A,O)&&(R=!0,this.oD(!M,!T,v,A,_,O)),R&&(a=!0),s=s||R,o=this.em(o),u=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++)m=this.ye.get(o),u=this.ye.get(u),m=this.Yh.get(m),u=this.Yh.get(u),v=this.g.V(m),this.g.Fv(v,h)||(v=this.g.Na(m)),_=this.g.V(u),this.g.Fv(_,h)||(_=this.g.Na(u)),M=this.ru(v,m),T=this.ru(_,u),A=M?this.g.Na(v):this.g.V(v),O=T?this.g.Na(_):this.g.V(_),this.yM(M,T,m,v,A,u,_,O)&&(a=!0),o=this.em(o),u=this.em(o);return a},w.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new c.Hg().HU(this.hw,this.g,this.Y,this.od);var h=!1,a=!0;this.Ag=this.Rq=-1;var s=this.g.I(this.Y),o=new c.ja(0);o.Jb(s);for(var u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++)o.add(p),p=this.g.V(p);var v=this.g.ud.o,_=this.g.ud.Mf;this.g.wb.oc();var M=this.g.wb.Aa[0].o;for(o.Wd(0,s,function(A,O){var R=v[_*A],j=v[_*O],z=M[2*R];R=M[2*R+1];var V=M[2*j];return(z=R<(j=M[2*j+1])?-1:R>j?1:z<V?-1:z>V?1:0)==0&&(z=(A=v[_*A+3])<(O=v[_*O+3])?-1:A==O?0:1),z}),this.Rq=this.g.Hd(),this.pe=new c.lp,this.MA=this.pe.Rh(0),this.pe.hn(s),u=0;u<s;u++)p=o.get(u),f=this.pe.addElement(this.MA,p),this.g.Sa(p,this.Rq,f);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(h=!0);a;){a=!1,s=0,o=!1;do{o=!1,this.jo=-1,m=0,u=new c.h,f=new c.h;for(var T=this.pe.sc(this.MA);T!=-1;)p=this.pe.getData(T),this.jo!=-1?(this.g.Hc(p,f),u.rb(f)?m++:(u.N(f),this.Fl=T,0<m&&(p=this.kD())&&(o=!0,this.Fl!=-1&&(p=this.pe.getData(this.Fl),this.g.Hc(p,u))),this.jo=T=this.Fl,m=0)):(this.jo=T,this.g.Hc(this.pe.getData(T),u),m=0),T!=-1&&(T=this.pe.lb(T));if(this.Fl=-1,0<m&&(p=this.kD())&&(o=!0),10<s++)throw c.i.Ra();o&&this.BM(),this.YC()&&(o=!0),a=a||o&&!1,h=h||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),c.RL.W(this.g,this.Y,this.pe,this.hw)||h},w.prototype.ru=function(h,a){return this.g.V(a)!=h},w.prototype.yM=function(h,a,s,o,u,p,f,m){if(o==f)return this.dk(s),this.dk(p),!1;var v=this.g.Qa(s,this.Ag),_=this.g.Qa(u,this.Ag),M=this.g.Qa(p,this.Ag),T=this.g.Qa(m,this.Ag),A=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,A[0]=v,s[1]=0,A[1]=_,s[2]=1,A[2]=M,s[3]=1,A[3]=T,v=1;4>v;v++){for(_=A[v],M=s[v],T=v-1;0<=T&&A[T]>_;)A[T+1]=A[T],s[T+1]=s[T],T--;A[T+1]=_,s[T+1]=M}return A=0,s[0]!=0&&(A|=1),s[1]!=0&&(A|=2),s[2]!=0&&(A|=4),s[3]!=0&&(A|=8),(A==5||A==10)&&(h==a?h?(this.g.Cc(m,o),this.g.Dc(o,m),this.g.Cc(u,f),this.g.Dc(f,u)):(this.g.Dc(m,o),this.g.Cc(o,m),this.g.Dc(u,f),this.g.Cc(f,u)):h?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(f,u),this.g.Cc(u,f)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(f,u),this.g.Dc(u,f)),!0)},w.prototype.oD=function(h,a,s,o,u,p){this.IY?this.QM():this.PM(h,a,s,o,u,p)},w.prototype.QM=function(){throw c.i.ga("not implemented.")},w.prototype.PM=function(h,a,s,o,u,p){if(h!=a)h?(this.g.Cc(s,u),this.g.Dc(u,s),this.g.Cc(p,o),this.g.Dc(o,p),this.xn(u,s),this.wi(u,!0),this.g.oi(u,!0),this.dk(s),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(u,s),this.g.Dc(s,u),this.g.Cc(o,p),this.g.Dc(p,o),this.xn(u,s),this.wi(u,!0),this.g.oi(u,!1),this.dk(s),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.dk(o);else{var f=h?s:o,m=a?u:p;for(h=h?o:s,a=a?p:u,u=!1,this.g.Cc(f,m),this.g.Cc(m,f),this.g.Dc(h,a),this.g.Dc(a,h),p=a;p!=m;)s=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,s),u=u||p==f,p=o;u||(s=this.g.Na(m),o=this.g.V(m),this.g.Dc(m,o),this.g.Cc(m,s)),this.xn(m,f),this.wi(m,!0),this.g.oi(m,!1),this.dk(f),this.xn(a,h),this.wi(a,!0),this.g.oi(a,!1),this.dk(h)}},w.prototype.YC=function(){for(var h=!1,a=this.g.Ob(this.Y);a!=-1;){for(var s=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u&&1<u;){var p=this.g.Na(s),f=this.g.V(s);this.g.hq(p,f)?(h=!0,this.wi(s,!1),this.g.qd(s,!0),this.wi(f,!1),this.g.qd(f,!0),s=p,o=0,u=this.g.Ka(a)):(s=f,o++)}if(2>this.g.Ka(a)){for(h=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++)this.wi(h,!1),h=this.g.V(h);a=this.g.ar(a),h=!0}else a=this.g.Sb(a)}return h},w.prototype.up=function(h){for(var a=!1;;){var s=this.g.V(h),o=this.g.Na(h);if(s==h)return this.wi(h,!0),this.g.oi(h,!1),!0;if(!this.g.hq(s,o)||(a=!0,this.dk(o),this.dk(s),this.wi(h,!0),this.g.oi(h,!1),this.xn(s,o),this.wi(s,!0),this.g.oi(s,!0),s==o))break;h=o}return a},w.prototype.BM=function(){for(var h=0,a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a)){var s=this.pe.getData(a);this.g.cj(s,-1)}for(var o=0,u=this.g.Ob(this.Y);u!=-1;)if((a=this.g.Ya(u))==-1||this.g.cd(a)!=-1)s=u,u=this.g.Sb(u),this.g.br(s);else{this.g.cj(a,u);var p=1;for(s=this.g.V(a);s!=a;s=this.g.V(s))this.g.cj(s,u),p++;this.g.fp(u,!1),this.g.Xj(u,p),this.g.Yg(u,this.g.Na(a)),o+=p,h++,u=this.g.Sb(u)}for(a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a))s=this.pe.getData(a),this.g.cd(s)==-1&&(u=this.g.iG(this.Y,s,s,null),o+=this.g.Ka(u),h++);for(this.g.Tl(this.Y,h),this.g.Vj(this.Y,o),h=0,o=this.g.md;o!=-1;o=this.g.ve(o))h+=this.g.I(o);this.g.XB(h)},w.prototype.em=function(h){for(var a=0,s=this.ye.size-1;a<s;a++)if(h=(h+1)%this.ye.size,this.ye.get(h)!=-1)return h;return-1},w.prototype.xn=function(h,a){var s=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.Ag);this.g.gC(h,a),this.g.Sa(a,this.Rq,s),this.g.Sa(a,this.Ag,o)},w.prototype.dk=function(h){var a=this.g.Qa(h,this.Ag);a!=-1&&(this.ye.set(a,-1),this.g.Sa(h,this.Ag,-1))},w.W=function(h,a,s,o,u){var p=new w;return p.g=h,p.Y=a,p.sA=s,p.hw=o,p.od=u,p.SM()},w.prototype.kM=function(h,a){var s=this.Yh.get(h),o=new c.h;this.g.Hc(s,o),s=new c.h;var u=this.Yh.get(a);return this.g.Hc(u,s),o.rb(s)?0:(u=this.Bs.get(h),h=new c.h,this.g.Hc(u,h),u=this.Bs.get(a),a=new c.h,this.g.Hc(u,a),(u=new c.h).vc(o,h),(o=new c.h).vc(s,a),c.h.pu(u,o))},w}();c.tn=C}(q||(q={})),function(c){var C;(C=c.VL||(c.VL={}))[C.Local=0]="Local",C[C.Geographic=1]="Geographic",C[C.Projected=2]="Projected",C[C.Image=3]="Image",C[C.Unknown=4]="Unknown",function(h){h[h.Integer32=0]="Integer32",h[h.Integer64=1]="Integer64",h[h.FloatingPoint=2]="FloatingPoint"}(c.OL||(c.OL={}));var w=function(){function h(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return h.prototype.Fc=function(){return this.fg},h.prototype.QF=function(){return 1},h.prototype.QW=function(a){this.hA=a},h.prototype.Yd=function(){if(this.hA!==null)return this.hA;var a=.001;return this.fg!=0?a=c.yr.xQ(this.fg):this.yh!=null&&(a=c.SC.yQ(this.yh)),a},h.prototype.wz=function(){return this.yh},h.prototype.Id=function(){return this.fg!=0?c.Uc.ah(c.yr.Ny(this.fg)):this.yh!=null?c.SC.zQ(this.yh):void 0},h.Tb=function(a){if(a.fg!=0){if(c.yr.US(a.fg)===!0)return 1;if(c.yr.WS(a.fg)===!0)return 2}return 4},h.prototype.cs=function(){var a=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=c.yr.AK(a),this.Jo!=-1?this.Jo:a)},h.create=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var s=new h;return s.fg=a,s},h.lP=function(a){if(a==null||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var s=new h;return s.yh=a,s},h.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.fg==a.fg&&(this.fg!=0||this.yh===a.yh)},h.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},h.prototype.dc=function(){if(this.rp!=="")return this.rp;var a=this.toString();if(Array.prototype.reduce)return this.rp="S"+a.split("").reduce(function(u,p){return(u=(u<<5)-u+p.charCodeAt(0))&u},0);var s=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)s=(s<<5)-s+a.charCodeAt(o),s&=s;return this.rp="S"+s},h.prototype.Mn=function(){return this.Yd(0)},h.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=c.iu.tP(this)},h.UN=2147483645,h.VN=9007199254740990,h}();c.Gg=w}(q||(q={})),function(c){var C=function(w){function h(){var a=w!==null&&w.apply(this,arguments)||this;return a.Li=null,a.NT=null,a.Jq=new c.UL,a.Go=null,a.lw=null,a}return Et(h,w),h.tP=function(a){var s=new h;if(s.fg=a.fg,s.Jo=a.Jo,s.UH=a.UH,s.yh=a.yh,s.yh!==""&&s.yh!==null){a=h.fM(s.yh);var o=h.dM(s.yh);s.Jq.Wx(a,o,c.ju.Integer64),s.ay(a),s.cy(o),s.fg=a.cs()}else a=h.eM(s.fg),s.ay(a),s.cy(null),s.Jq.Wx(a,null,c.ju.Integer64);return s},h.prototype.Yd=function(a){return this.Jq.Mn(a)},h.dM=function(a){if(0>=a.length)throw c.i.O();var s=null;try{s=c.IC.fromString(a)}catch{s=null}return s==null?null:h.XC(s,!0)},h.prototype.ay=function(a){this.Ld=a,this.Go=this.Ld.Id()},h.prototype.cy=function(a){this.FH=a,this.NT=this.FH!=null?this.FH.Go:null},h.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},h.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},h.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},h.prototype.rm=function(){return this.Ld.rm()},h.prototype.bf=function(){return this.Ld.bf()},h.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},h.prototype.Wp=function(){return this.Ld.Wp()},h.prototype.Yr=function(){return this.Ld.Yr()},h.prototype.mk=function(){return this.Ld.mk()},h.prototype.fS=function(a){return c.JC.Ky(this.Ld,a.Ld)},h.prototype.ol=function(){return this.Ld.ol()},h.prototype.Xr=function(){return this.Ld.Xr()},h.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},h.prototype.ih=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.ih(a),a},h.prototype.Le=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.uo},h.prototype.CR=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.BR(a),a},h.prototype.rv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.rv()},h.prototype.qv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.qv()},h.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},h.prototype.KQ=function(){return this.Ld.kv()},h.prototype.Sp=function(){return this.Go.getUnitFactor()},h.prototype.pz=function(a){return this.Jq.pz(a)},h.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.hk().tc();if(a==0||a===4)throw c.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw c.i.Ra();return this.lw=h.XE(a,this.Jq.QF())},h.XE=function(a,s){if(a==null)throw c.i.O("null pointer.");var o=new h;return a=h.ou(a,!0),o.Jq.Wx(a,null,s),o.ay(a),o.cy(null),o.fg=a.cs(),o},h.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case c.Tc.PE_TYPE_GEOGCS:return 1;case c.Tc.PE_TYPE_PROJCS:return 2}return 4},h.prototype.kv=function(){return this.Ld.kv()},h.ou=function(a,s){var o=a.getCode();if(0>=o&&0<(o=c.qf.getCode(a))){if((a=c.qf.coordsys(o))==null)throw c.i.O("Text to wkid mapping had failed: "+o);return h.ou(a,s)}if(s&&0<o&&(s=h.qx[o]))return s;s=c.Ab.zv(a,o,!1);var u=h.gK[s];return u||(a=0>=o?a:c.qf.coordsys(o),a=new c.JC(a),h.gK[s]=a,0<o&&(h.qx[o]=a),a)},h.eM=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var s=h.qx[a];if(s!=null)return s;if((s=c.qf.coordsys(a))==null)throw c.i.O("Invalid or unsupported wkid: "+a);return(s=h.ou(s,!1)).cs()!=a&&(h.qx[a]=s),s},h.fM=function(a){if(a==null||a===void 0||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var s=null;try{s=c.qf.fromString(c.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw c.i.O("Cannot create SpatialReference from text. "+o.message)}if(s===null)throw c.i.O("Cannot create SpatialReference from text. ");return h.ou(s,!0)},h.XC=function(a,s){var o,u=a.getCode();if(0>=u&&0<(u=c.qf.getCode(a))){if((u=c.qf.vertcs(u))===null)throw c.i.O();return h.XC(u,s)}if(s&&0<u&&(s=h.fK[u])||(a=c.Ab.zv(a,u,!1),s=h.hK[a]))return s;if(0>=u||(o=c.qf.vertcs(u)),o===null)throw c.i.O();return o=new c.KL(o),h.hK[a]=o,0<u&&(h.fK[u]=o),o},h.nI=function(a,s){if(s===null||s.B())return null;var o=new c.l;if(s!==null&&a.Tb()!=1){var u=a.tc(),p=u.gh();a=c.xr.Pr(a,u,null,null),(s=c.Gx.local().W(s,a,null)).A(o)}else p=a.gh(),s.A(o);return s=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new c.GC(o.v,o.G,o.C,o.H,s,p)},h.gD=function(a){var s={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var u=a[o],p={HY:!1,VY:"",UY:-1,geogtran:null};u.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var f=u.getGeogtran().getCode();-1<f?p.wkid=f:p.wkt=u.getGeogtran().toString(),s.steps.push(p)}return s},h.SR=function(a,s,o,u){return o===void 0&&(o=null),o=h.nI(u,o),a=c.np.getGTlist(a.gh(),s.gh(),2,c.np.PE_GTLIST_OPTS_COMMON,o,1),s=null,a&&0<a.length&&(s=this.gD(a[0]),c.Lx.destroy(a)),o!==null&&o.destroy(),s},h.TR=function(a,s,o,u){var p;if(o===void 0&&(o=null),u===void 0&&(u=null),p===void 0&&(p=30),o=h.nI(u,o),a=c.np.getGTlist(a.gh(),s.gh(),2,c.np.PE_GTLIST_OPTS_COMMON,o,p),s=[],a&&0<a.length){for(p=0;p<a.length;p++)s.push(this.gD(a[p]));c.Lx.destroy(a)}return o!==null&&o.destroy(),s},h.qx={},h.gK={},h.fK={},h.hK={},h}(c.Gg);c.iu=C}(q||(q={})),function(c){var C,w;(w=C=c.ju||(c.ju={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var h=function(){function a(){this.sp()}return a.prototype.assign=function(s){this.Hm=s.Hm,this.Im=s.Im,this.Rj=s.Rj,this.nA=s.nA,this.Ho=s.Ho,this.mA=s.mA,this.Kk=s.Kk,this.Oq=s.Oq,this.Nq=s.Nq,this.Tm=s.Tm},a.prototype.QF=function(){return this.Tm},a.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=C.FloatingPoint},a.prototype.Wx=function(s,o,u){if(this.sp(),this.Tm=u,u!=C.FloatingPoint){var p=new c.l;s.cR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=s.Re.getType())==c.Tc.PE_TYPE_GEOGCS?(p=(u==C.Integer64?1e-9:1/18e5)*s.bf(),this.Rj=1/p):p==c.Tc.PE_TYPE_PROJCS&&(p=(u==C.Integer64?1e-4:.001)*s.rm(),this.Rj=1/p),o!=null?(p=(u==C.Integer32?.001:1e-4)*o.DH,this.Ho=1/p):this.Ho=1e4,this.TM(),this.Kk=s.uw,this.Oq=o!=null?.001*o.DH:.001,this.Nq=2220446049250313e-29},a.prototype.TM=function(){if(this.Tm!=C.FloatingPoint){var s=this.Tm==C.Integer64?c.Gg.VN:c.Gg.UN,o=s/this.Rj,u=this.Hm+o,p=c.P.truncate((u-this.Hm)*this.Rj);p>s&&(this.Rj=s/(u-this.Hm)),o=this.Im+o,(p=c.P.truncate((o-this.Im)*this.Rj))>s&&(this.Rj=s/(o-this.Im))}},a.prototype.WB=function(s){switch(s){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Mn=function(s){switch(s){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(s){if(this.Tm==C.FloatingPoint)return 0;switch(s){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},a.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Kk.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();c.UL=h}(q||(q={})),function(c){function C(u,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*u,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function w(u,p,f){return u=u/6378137*57.29577951308232,f?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function h(u,p,f){var m=u.Qf();if(u.K()===33)p=p(m.Ng(),m.kh()),m.Db(p[0],p[1]);else if(u.K()===197){var v=p(u.gs(),u.js(),f);p=p(u.fs(),u.hs(),f),m.L(v[0],v[1],p[0],p[1])}else for(v=new c.h,u=0;u<m.I();u++){m.D(u,v);var _=p(v.x,v.y,f);v.na(_[0],_[1]),m.Db(u,v)}return m}function a(u){return h(u,w,!0)}function s(u){return h(u,C,!0)}var o=Math.PI/180;c.PK=function(){function u(){}return u.xu=function(p){var f=Math.sqrt(.006694379990197414),m=Math.sin(p.y*o);return c.h.construct(6378137*p.x*o,3.1677196636462314e6*(m/(1-.006694379990197414*m*m)-1/(2*f)*Math.log((1-f*m)/(1+f*m))))},u.Ux=function(p,f,m,v){var _=.0033528106647474805,M=Math.sin(m);m=Math.cos(m);var T=(1-_)*Math.tan(p),A=T*(p=1/Math.sqrt(1+T*T)),O=Math.atan2(T,m),R=(T=p*M)*T,j=1-R,z=27233160610754688e-5*j/4040829998466145e-2,V=1+z/16384*(4096+z*(z*(320-175*z)-768)),F=z/1024*(256+z*(z*(74-47*z)-128));z=v/(635675231424518e-8*V);for(var G,Z,K,re=2*Math.PI;1e-12<Math.abs(z-re);)K=Math.cos(2*O+z),re=z,z=v/(635675231424518e-8*V)+F*(G=Math.sin(z))*(K+F/4*((Z=Math.cos(z))*(2*K*K-1)-F/6*K*(4*G*G-3)*(4*K*K-3)));return v=A*G-p*Z*m,j=_/16*j*(4+_*(4-3*j)),c.h.construct((f+(Math.atan2(G*M,p*Z-A*G*m)-(1-j)*_*T*(z+j*G*(K+j*Z*(2*K*K-1)))))/o,Math.atan2(A*Z+p*G*m,(1-_)*Math.sqrt(R+v*v))/o)},u.HM=function(p,f,m,v){var _=.0033528106647474805,M=v-f,T=Math.atan((1-_)*Math.tan(p)),A=Math.atan((1-_)*Math.tan(m)),O=Math.sin(T);T=Math.cos(T);var R=Math.sin(A);A=Math.cos(A);var j=M,z=1e3;do{var V=Math.sin(j),F=Math.cos(j),G=Math.sqrt(A*V*A*V+(T*R-O*A*F)*(T*R-O*A*F));if(G===0)return 0;F=O*R+T*A*F;var Z=Math.atan2(G,F),K=T*A*V/G,re=1-K*K;V=F-2*O*R/re,isNaN(V)&&(V=0);var te=_/16*re*(4+_*(4-3*re)),ue=j;j=M+(1-te)*_*K*(Z+te*G*(V+te*F*(2*V*V-1)))}while(1e-12<Math.abs(j-ue)&&0<--z);return z===0?(O=v-f,{azimuth:Math.atan2(Math.sin(O)*Math.cos(m),Math.cos(p)*Math.sin(m)-Math.sin(p)*Math.cos(m)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(m)+Math.cos(p)*Math.cos(m)*Math.cos(v-f))}):(f=(p=27233160610754688e-5*re/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(A*Math.sin(j),T*R-O*A*Math.cos(j)),TQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(Z-f*G*(V+f/4*(F*(2*V*V-1)-f/6*V*(4*G*G-3)*(4*V*V-3)))),TY:Math.atan2(T*Math.sin(j),T*R*Math.cos(j)-O*A)})},u.eQ=function(p){var f=p.hasAttribute(1),m=p.hasAttribute(2),v=[],_=p.ea(),M=null,T=null;f&&(M=p.vb(1)),m&&(T=p.vb(2));for(var A=new c.h,O=0;O<_;O++){for(var R=p.Ca(O),j=p.Ka(O),z=0,V=0,F=NaN,G=NaN,Z=NaN,K=NaN,re=p.ec(O),te=[],ue=R;ue<R+j;ue++){p.D(ue,A),K=Z=NaN;var ye=[A.x,A.y];f&&(Z=M.get(ue),ye.push(Z)),m&&(_=T.get(ue),ye.push(K)),ue==R&&re&&(z=A.x,V=A.y,F=Z,G=K),te.push(ye)}!re||z==A.x&&V==A.y&&(!f||isNaN(F)&&isNaN(Z)||F==Z)&&(!m||isNaN(G)&&isNaN(K)||G==K)||te.push(te[0].slice(0)),v.push(te)}return v},u.Ry=function(p,f){p=u.eQ(p),637.100877141506>f&&(f=637.100877141506);for(var m,v=[],_=0;_<p.length;_++){var M,T,A=p[_];v.push(m=[]),m.push([A[0][0],A[0][1]]);var O=A[0][0]*o,R=A[0][1]*o;for(M=0;M<A.length-1;M++){var j=A[M+1][0]*o,z=A[M+1][1]*o;if(O!==j||R!==z){j=(z=u.HM(R,O,z,j)).azimuth;var V=(z=z.TQ)/f;if(1<V){for(T=1;T<=V-1;T++){var F=u.Ux(R,O,j,T*f);m.push([F.x,F.y])}T=u.Ux(R,O,j,(z+Math.floor(V-1)*f)/2),m.push([T.x,T.y])}R=u.Ux(R,O,j,z),m.push([R.x,R.y]),O=R.x*o,R=R.y*o}}}return{lJ:v}},u.SQ=function(p){for(var f=[],m=0;m<p.length;m++){var v=p[m];v=u.Ry(v,1e4),f.push(v)}p=[];for(var _=0;_<f.length;_++){v=f[_];var M=0;for(m=0;m<v.lJ.length;m++){var T,A=v.lJ[m],O=u.xu(c.h.construct(A[0][0],A[0][1])),R=u.xu(c.h.construct(A[A.length-1][0],A[A.length-1][1])),j=R.x*O.y-O.x*R.y;for(T=0;T<A.length-1;T++)O=u.xu(c.h.construct(A[T+1][0],A[T+1][1])),j+=(R=u.xu(c.h.construct(A[T][0],A[T][1]))).x*O.y-O.x*R.y;M+=j}M/=1,p.push(M/-2)}return p},u}(),c.cb=function(){function u(){}return u.sB=function(p,f,m,v,_,M,T){u.bD[p.dc()]=f,isNaN(m)==0&&(u.hD[p.dc()]=m),isNaN(v)==0&&(u.uD[p.dc()]=v),isNaN(_)==0&&(u.WC[p.dc()]=_),u.iD[p.dc()]=M,T!==null&&(u.jD[p.dc()]=T)},u.Yw=function(p,f,m){u.nD[p.dc()+"-"+f.dc()]=m},u.tc=function(p){if((p=u.bD[p.dc()])==null)throw c.i.Fe();return p},u.bf=function(p){if((p=u.hD[p.dc()])==null)throw c.i.Fe();return p},u.xv=function(p){if((p=u.uD[p.dc()])==null)throw c.i.Fe();return p},u.gv=function(p){if((p=u.WC[p.dc()])==null)throw c.i.Fe();return p},u.ih=function(p){if((p=u.jD[p.dc()])==null)throw c.i.Fe();return c.l.construct(p[0],p[1],p[2],p[3])},u.Xc=function(p){if((p=u.iD[p.dc()])==null)throw c.i.Fe();return p},u.Bh=function(p,f,m){if(f.Nb(m))return p;var v=u.nD[f.dc()+"-"+m.dc()];if(v!==void 0)return v(p,f,m);throw c.i.Fe()},u.wt=function(){throw c.i.Fe()},u.XQ=function(){throw c.i.Fe()},u.ZV=function(){throw c.i.Fe()},u.ol=function(){throw c.i.Fe()},u.nW=function(){var p=c.Gg.create(102100),f=c.Gg.create(3857),m=c.Gg.create(4326);c.cb.sB(p,m,NaN,NaN,NaN,!1,null),c.cb.sB(m,m,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),c.cb.sB(f,m,NaN,NaN,NaN,!1,null),c.cb.Yw(p,m,a),c.cb.Yw(m,p,s),c.cb.Yw(f,m,a),c.cb.Yw(m,f,s)},u.bD=[],u.hD=[],u.uD=[],u.WC=[],u.iD=[],u.jD=[],u.nD=[],u}()}(q||(q={})),q.cb.nW(),function(c){var C=function(){function w(h){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=h}return w.prototype.kd=function(h){h<this.Dl?(this.o[h*this.Mf]=this.ko,this.ko=h):this.Dl--,this.size--},w.prototype.U=function(h,a){return this.o[h*this.Mf+a]},w.prototype.T=function(h,a,s){this.o[h*this.Mf+a]=s},w.prototype.De=function(){var h=this.ko;if(h==-1){if(this.Dl==this.Jg){if(2147483647<(h=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(h=2147483647),h==this.Jg)throw c.i.de();this.yz(h)}h=this.Dl,this.Dl++}else this.ko=this.o[h*this.Mf];this.size++;for(var a=h*this.Mf;a<h*this.Mf+this.Mf;a++)this.o[a]=-1;return h},w.prototype.Nl=function(h){var a=this.ko;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw c.i.de();this.yz(a)}a=this.Dl,this.Dl++}else this.ko=this.o[a*this.Mf];this.size++;for(var s=a*this.Mf,o=0;o<h.length;o++)this.o[s+o]=h[o];return a},w.prototype.oj=function(h){this.ko=-1,this.size=this.Dl=0,h&&(this.o=null,this.Jg=0)},w.prototype.Ee=function(h){h>this.Jg&&this.yz(h)},w.prototype.sx=function(h,a){h*=this.Mf,a*=this.Mf;for(var s=0;s<this.Mf;s++){var o=this.o[a+s];this.o[a+s]=this.o[h+s],this.o[h+s]=o}},w.prototype.bC=function(h,a,s){var o=this.o[this.Mf*a+s];this.o[this.Mf*a+s]=this.o[this.Mf*h+s],this.o[this.Mf*h+s]=o},w.GG=function(h){return 0<=h},w.prototype.yz=function(h){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*h);a.set(this.o,0),this.o=a,this.Jg=h},w}();c.ad=C}(q||(q={})),function(c){var C,w;(w=C||(C={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var h=function(){function s(o){this.Ce=o,this.Ah=NaN,this.$G=new c.jg,this.aH=new c.jg,this.os=new c.Oc,this.ps=new c.Oc}return s.prototype.compare=function(o,u,p){if(o=o.ka(p),this.Ce.kB(u,this.$G),this.Ce.kB(o,this.aH),u=this.$G.get(),o=this.aH.get(),this.os.L(u.ta,u.qa),this.ps.L(o.ta,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=u.oa==u.ma;var f=o.oa==o.ma;if(p||f){if(p&&f)return 0;if(u.oa==o.oa&&u.ta==o.ta)return p?1:-1;if(u.ma==o.ma&&u.qa==o.qa)return p?-1:1}return(p=u.Me(this.Ah,this.os.pa))==(f=o.Me(this.Ah,this.ps.pa))&&((f=.5*((p=Math.min(u.ma,o.ma))+this.Ah))==this.Ah&&(f=p),p=u.Me(f,this.os.pa),f=o.Me(f,this.ps.pa)),p<f?-1:p>f?1:0},s.prototype.WJ=function(o){this.Ah=o},s}(),a=function(){function s(o){this.ib=o,this.RH=new c.jg,this.Cf=new c.h,this.rA=new c.Oc}return s.prototype.fX=function(o){this.Cf.N(o)},s.prototype.compare=function(o,u){return this.ib.kB(o.ka(u),this.RH),o=this.RH.get(),this.rA.L(o.ta,o.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},s}();C=function(){function s(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new c.Nd,this.XN=2147483647,this.WN=c.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return s.prototype.ty=function(o){this.gA=o},s.prototype.$m=function(){this.he==null&&(this.he=new c.ad(8));var o=this.he.De();return this.he.T(o,1,0),o},s.prototype.qU=function(){this.Lc==null&&(this.Lc=new c.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var u=this.Lc.De();return this.Lc.T(u,2,0),this.Lc.T(u,3,0),this.EJ(o,u),this.EJ(u,o),o},s.prototype.hI=function(){this.ze==null&&(this.ze=new c.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},s.prototype.OW=function(o,u){this.he.T(o,7,u)},s.prototype.on=function(o,u){this.he.T(o,2,u)},s.prototype.NW=function(o,u){this.he.T(o,1,u)},s.prototype.gX=function(o,u){this.he.T(o,3,u)},s.prototype.dX=function(o,u){this.he.T(o,4,u)},s.prototype.er=function(o,u){this.he.T(o,5,u)},s.prototype.$Q=function(o){return this.he.U(o,5)},s.prototype.MW=function(o,u){this.he.T(o,6,u)},s.prototype.YM=function(o,u){this.MW(u,o)},s.prototype.DJ=function(o,u){this.Lc.T(o,1,u)},s.prototype.EJ=function(o,u){this.Lc.T(o,4,u)},s.prototype.Vl=function(o,u){this.Lc.T(o,5,u)},s.prototype.Ul=function(o,u){this.Lc.T(o,6,u)},s.prototype.VW=function(o,u){this.Lc.T(o,2,u)},s.prototype.cx=function(o,u){this.Lc.T(o,3,u)},s.prototype.GF=function(o){return this.Lc.U(o,3)},s.prototype.Ht=function(o,u){this.Lc.T(o,7,u)},s.prototype.zK=function(o,u){if(this.om(o)!=-1)for(u=u?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,u)},s.prototype.xx=function(o,u){o!=-1&&(this.zK(o,u),this.zK(this.ya(o),u))},s.prototype.Et=function(o,u){this.ze.T(o,1,u)},s.prototype.Xg=function(o,u){this.ze.T(o,2,u)},s.prototype.ln=function(o,u){this.ze.T(o,3,u),this.IW(o,this.ZQ(u)),this.HW(u,o)},s.prototype.HW=function(o,u){this.ze.T(o,4,u)},s.prototype.IW=function(o,u){this.ze.T(o,5,u)},s.prototype.yJ=function(o,u){this.ze.T(o,6,u)},s.prototype.wJ=function(o,u){this.ze.T(o,7,u)},s.prototype.vJ=function(o,u){this.$n.write(o,u)},s.prototype.xJ=function(o,u){this.fA.write(o,u)},s.prototype.gY=function(o){var u=0,p=0,f=this.vF(o),m=new c.h,v=new c.h,_=new c.h;this.$r(f,m),v.N(m);var M=f;do this.nm(M,_),p+=c.h.ub(v,_),this.$e(this.ya(M))!=o&&(u+=(_.x-m.x-(v.x-m.x))*(_.y-m.y+(v.y-m.y))*.5),v.N(_),M=this.kc(M);while(M!=f);this.$n.write(o,u),this.fA.write(o,p)},s.prototype.KU=function(o,u){var p=new h(this),f=new c.$j;f.Ee(c.P.truncate(this.xa/2)),f.Xo(p);for(var m=new c.ja(0),v=this.bh(),_=null,M=0,T=new c.h,A=this.Oe;A!=-1;A=this.Tf(A)){if(!(255&++M)&&u!=null&&!u.progress(-1,-1))throw c.i.RC();var O=this.Je(A);if(O!=-1){if(m.Dh(0),!this.cY(f,v,m,O)){this.D(A,T),p.WJ(T.y);var R=O;do{var j=this.Bb(R,v);j!=-1&&(f.wd(j,-1),this.Kb(R,v,-2)),R=this.kc(this.ya(R))}while(O!=R);R=O;do(j=this.Bb(R,v))==-1&&(j=f.addElement(R,-1),m.add(j)),R=this.kc(this.ya(R));while(O!=R)}for(O=m.size-1;0<=O;O--)j=m.get(O),R=f.ka(j),this.Kb(this.ya(R),v,j),this.JU(f,j,o)}else this.Yy(A)==-1&&(_==null&&(_=new a(this)),this.D(A,T),_.fX(T),R=f.DW(_),O=this.Jl,R!=-1&&(j=f.ka(R),this.$e(j)==this.$e(this.ya(j))&&(j=this.JF(f,R)),j!=-1&&(O=this.$e(j))),this.YM(O,A))}this.Lg(v)},s.prototype.JU=function(o,u,p){var f=o.ka(u),m=this.$e(f);if(this.In(m)==-1){var v=this.JF(o,u),_=this.ya(f),M=this.$e(_);this.Mp(m),this.Mp(M);var T=this.In(m),A=this.In(M);if(v==-1&&T==-1&&(M==m?(this.ln(M,this.Jl),T=A=this.Jl):(A==-1&&(this.ln(M,this.Jl),A=this.Jl),this.ln(m,M),T=M)),v!=-1){var O=this.$e(v);A==-1&&(0>=this.Mp(O)?(A=this.In(O),this.ln(M,A)):(this.ln(M,O),A=O),M==m&&(T=A))}T==-1&&this.dY(m,M),p==0?this.eW(o,u,f,v,m,M):p==5?this.fW(o,u,f,_,m,M):p==4&&this.dW(f,v,m,M)}},s.prototype.eW=function(o,u,p,f,m,v){var _=this.jk(m);if(f!=-1){var M=this.jk(v),T=this.jk(this.$e(f));f=_&M&T,T^=T&this.fh(p),(T|=f)!=0&&(this.Xg(v,M|T),this.Xg(m,T|_),_=_||T)}for(u=o.lb(u);u!=-1&&(f=o.ka(u),p=this.$e(this.ya(f)),m=this.jk(p),v=this.fh(f),M=this.$e(f),f=m&(T=this.jk(M))&_,_^=_&v,(_|=f)!=0);u=o.lb(u))this.Xg(p,m|_),this.Xg(M,T|_)},s.prototype.fW=function(o,u,p,f,m,v){if(m!=v){p=this.Bb(p,this.eg),p+=this.Bb(f,this.eg),f=0;var _=new c.ja(0),M=new c.ja(0);M.add(0);for(var T=o.sc(-1);T!=u;T=o.lb(T)){var A=o.ka(T),O=this.ya(A),R=this.$e(A),j=this.$e(O);if(R!=j){if(A=this.Bb(A,this.eg),f+=A+=this.Bb(O,this.eg),O=!1,_.size!=0&&_.Gc()==j&&(M.Jf(),_.Jf(),O=!0),this.In(j)==-1)throw c.i.Ra();O&&this.In(j)==R||(M.add(f),_.add(R))}}f+=p,_.size!=0&&_.Gc()==v&&(M.Jf(),_.Jf()),f!=0?M.Gc()==0&&(o=this.g.md,o=this.Ma(o),this.Xg(m,o)):M.Gc()!=0&&(o=this.g.md,o=this.Ma(o),this.Xg(m,o))}},s.prototype.dW=function(o,u,p,f){var m=this.Ma(this.g.md);if(u==-1)this.Xg(f,this.Io),1&(o=this.Bb(o,this.yg))?this.Xg(p,m):this.Xg(p,this.Io);else{var v=this.jk(f);v==0?(v=this.jk(this.$e(u)),this.Xg(f,v),1&(o=this.Bb(o,this.yg))?this.Xg(p,v==m?this.Io:m):this.Xg(p,v)):1&(o=this.Bb(o,this.yg))?this.Xg(p,v==m?this.Io:m):this.Xg(p,v)}},s.prototype.cY=function(o,u,p,f){var m=f,v=-1,_=-1,M=0;do{if(M==2)return!1;var T=this.Bb(m,u);if(T!=-1){if(v!=-1)return!1;v=T}else{if(_!=-1)return!1;_=m}M++,m=this.kc(this.ya(m))}while(f!=m);return _!=-1&&v!=-1&&(this.Kb(o.ka(v),u,-2),o.Uj(v,_),p.add(v),!0)},s.prototype.dY=function(o,u){var p=this.Mp(o);if(p!=0){var f=this.Mp(u);0<p&&0>f||0>p&&0<f?this.ln(o,u):(u=this.In(u))!=-1&&this.ln(o,u)}},s.prototype.qP=function(o,u){this.Eq=this.g.Hd();for(var p=0,f=u.size;p<f;p++){var m=u.get(p),v=this.g.Qa(m,this.Em),_=this.g.Sf(this.g.cd(m)),M=this.g.jc(_);if(c.ba.Ic(M)){var T=this.g.V(m);if(T!=-1){var A=this.g.Qa(T,this.Em);if(v!=A){var O=this.qU(),R=this.ya(O),j=this.lh.De();this.lh.T(j,0,m),this.lh.T(j,1,-1),this.Ht(O,j),this.DJ(O,v),(j=this.Je(v))==-1?(this.on(v,O),this.Vl(O,R),this.Ul(R,O)):(v=this.ue(j),this.Vl(j,R),this.Ul(R,j),this.Ul(v,O),this.Vl(O,v)),this.DJ(R,A),(v=this.Je(A))==-1?(this.on(A,R),this.Ul(O,R),this.Vl(R,O)):(A=this.ue(v),this.Vl(v,O),this.Ul(O,v),this.Ul(A,R),this.Vl(R,A)),_=this.Ma(_),o==0?(this.Kb(R,this.be,0),this.Kb(O,this.be,M==1736?_:0)):o==5?(A=new c.h,this.g.D(m,A),m=new c.h,this.g.D(T,m),v=T=0,0>A.compare(m)?T=1:v=-1,this.Kb(R,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.eg,T),this.Kb(R,this.eg,v)):o==7?(this.Kb(R,this.be,this.Io),this.Kb(O,this.be,M==1736?_:0)):o==4&&(this.Kb(R,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.yg,1),this.Kb(R,this.yg,1)),M=M==1736?this.WN:0,this.cx(O,_|M),this.cx(R,_|M)}}}}},s.prototype.QT=function(o,u){var p=this.om(u);if(p!=-1){var f=this.om(o);this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1)}o=this.ya(o),u=this.ya(u),(p=this.om(u))!=-1&&(f=this.om(o),this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1))},s.prototype.EX=function(o){function u(Z,K){return f.CO(Z,K)}var p=new c.ja(0);p.Jb(10);for(var f=this,m=this.Oe;m!=-1;m=this.Tf(m)){p.clear(!1);var v=this.Je(m);if(v!=-1){var _=v;do p.add(_),_=this.kc(this.ya(_));while(_!=v);if(1<p.size){if(_=!0,2<p.size)p.Wd(0,p.size,u),p.add(p.get(0));else if(0<this.BO(p.get(0),p.get(1))){var M=p.get(0);p.set(0,p.get(1)),p.set(1,M)}else _=!1;for(var T=M=p.get(0),A=this.vf(T),O=this.ya(T),R=-1,j=1,z=p.size;j<z;j++){var V=p.get(j),F=this.ya(V),G=this.lk(F);if(G==A&&V!=T){if(o==0)R=this.GF(T)|this.GF(V),this.cx(T,R),this.cx(O,R),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(V,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(F,this.be));else if(this.eg!=-1)R=this.Bb(T,this.eg)+this.Bb(V,this.eg),F=this.Bb(O,this.eg)+this.Bb(F,this.eg),this.Kb(T,this.eg,R),this.Kb(O,this.eg,F);else{if(o==7)return void(this.Pi=new c.Nd(5,m,-1));this.yg!=-1&&(R=this.Bb(T,this.yg)+this.Bb(V,this.yg),F=this.Bb(O,this.yg)+this.Bb(F,this.yg),this.Kb(T,this.yg,R),this.Kb(O,this.yg,F))}this.QT(T,V),this.Gy(V),R=T,p.set(j,-1),V==M&&(p.set(0,-1),M=-1)}else this.xx(R,!1),R=-1,T=V,A=G,O=F}if(this.xx(R,!1),R=-1,_){for(M=-1,j=0,z=p.size;j<z;j++)if((V=p.get(j))!=-1){if(M==-1)T=M=V,A=this.vf(T),O=this.ya(T);else if(V!=T&&(F=this.ya(V),G=this.lk(F),this.Ul(O,V),this.Vl(V,O),T=V,A=G,O=F,o==7&&(this.Bb(V,this.be)|this.Bb(this.ue(V),this.be))==(1|this.Io)))return void(this.Pi=new c.Nd(5,m,-1))}this.on(m,M)}else{for(M=-1,j=0,z=p.size;j<z;j++)if((V=p.get(j))!=-1){M=V;break}v!=M&&this.on(m,M)}}}}},s.prototype.RN=function(){for(var o=-1,u=this.bh(),p=this.Oe;p!=-1;p=this.Tf(p)){var f=this.Je(p);if(f!=-1){var m=f;do{if(this.Bb(m,u)!=1){var v=this.hI();this.Et(v,m),this.wJ(v,o),o!=-1&&this.yJ(o,v),o=v;var _=0,M=m;do _|=this.Bb(M,this.be),this.VW(M,v),this.Kb(M,u,1),M=this.kc(M);while(M!=m);this.Xg(v,_)}m=this.kc(this.ya(m))}while(m!=f)}}v=this.hI(),this.Et(v,-1),this.wJ(v,o),o!=-1&&this.yJ(o,v),this.Jl=v,this.$n=c.ce.rf(this.ze.size,NaN),this.fA=c.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(u)},s.prototype.mR=function(o,u,p){if((u=u!=-1?u:this.Je(o))==-1)return-1;for(o=u;;){if(this.Bb(u,p)!=1)return u;if((u=this.kc(this.ya(u)))==o)return-1}},s.prototype.tW=function(){for(var o=this.bh(),u=this.Oe;u!=-1;u=this.Tf(u))for(var p=-1;;){var f=this.mR(u,p,o);if(f==-1)break;p=this.kc(this.ya(f));for(var m=f;;){var v=this.kc(m),_=this.ue(m),M=this.ya(m);if(_==M){if(this.DP(m),p!=m&&p!=M||(p=-1),m==f||_==f){if(m==(f=v)||_==f)break;m=v;continue}}else this.Kb(m,o,1);if((m=v)==f)break}}this.Lg(o)},s.prototype.HB=function(o,u,p,f,m){this.Wg(),this.bH=m,this.g=o,this.Dq=this.g.WE(),(o=new c.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var v=0,_=1,M=p!=null?p.get(0):this.g.md;for(m=1;M!=-1;){this.g.CJ(M,this.Dq,_),_<<=1;for(var T=this.g.Ob(M);T!=-1;T=this.g.Sb(T))for(var A=this.g.Ya(T),O=0,R=this.g.Ka(T);O<R;O++)o.add(A),A=this.g.V(A);c.ba.Tn(this.g.jc(M))||(v+=this.g.ea(M)),p!=null?(M=m<p.size?p.get(m):-1,m++):M=this.g.ve(M)}for(this.Io=_,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new c.ad(2),this.he=new c.ad(8),this.Lc=new c.ad(8),this.ze=new c.ad(8)),this.lh.Ee(this.xa),c.op.Bp(f),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,v)),this.Em=this.g.Hd(),p=new c.h,m=0,v=new c.h,p.Sc(),_=0;_<=this.xa;_++)if(_<this.xa?(A=o.get(_),this.g.D(A,v)):v.Sc(),!p.rb(v)){if(m<_){for(A=this.$m(),R=O=-1;m<_;m++)R=o.get(m),this.g.Sa(R,this.Em,A),M=this.lh.De(),this.lh.T(M,0,R),this.lh.T(M,1,O),O=M,T=this.g.cd(R),M=this.g.Sf(T),M=this.Ma(M),this.NW(A,this.yd(A)|M);this.OW(A,O),this.er(A,this.g.Va(R)),this.Qs!=-1&&this.dX(this.Qs,A),this.gX(A,this.Qs),this.Qs=A,this.Oe==-1&&(this.Oe=A)}m=_,p.N(v)}c.op.Bp(f),this.be=this.bh(),u==5&&(this.eg=this.bh()),u==4&&(this.yg=this.bh()),this.qP(u,o),this.Pi.Lj==0&&(this.EX(u),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(u,f))):this.kA=!0))},s.prototype.Gy=function(o){var u=this.kc(o),p=this.ue(o),f=this.ya(o),m=this.kc(f),v=this.ue(f);u!=f&&(this.Ul(v,u),this.Vl(u,v)),p!=f&&(this.Ul(p,m),this.Vl(m,p)),p=this.lk(o),this.Je(p)==o&&(m!=o?this.on(p,m):this.on(p,-1)),m=this.lk(f),this.Je(m)==f&&(u!=f?this.on(m,u):this.on(m,-1)),this.Lc.kd(o),this.Lc.kd(f)},s.prototype.JF=function(o,u){for(;;){if((u=o.xe(u))==-1)return-1;var p=o.ka(u);if(this.$e(p)!=this.$e(this.ya(p)))return p}},s.prototype.fr=function(o,u){var p;p===void 0&&(p=!0),this.HB(o,0,null,u,p)},s.prototype.qJ=function(o,u,p){var f=new c.ja(0);f.add(u),this.HB(o,4,f,p,o.jc(u)==1736)},s.prototype.rJ=function(o,u,p){var f=new c.ja(0);f.add(u),this.HB(o,5,f,p,!0)},s.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},s.prototype.Je=function(o){return this.he.U(o,2)},s.prototype.D=function(o,u){this.g.ZF(this.$Q(o),u)},s.prototype.yd=function(o){return this.he.U(o,1)},s.prototype.Tf=function(o){return this.he.U(o,4)},s.prototype.Yy=function(o){return this.he.U(o,6)},s.prototype.mm=function(o){return this.he.U(o,7)},s.prototype.ls=function(o){return this.lh.U(o,1)},s.prototype.vj=function(o){return this.lh.U(o,0)},s.prototype.og=function(o,u){return(u=this.Fi[u]).size<=o?-1:u.read(o)},s.prototype.pn=function(o,u,p){(u=this.Fi[u]).size<=o&&u.resize(this.he.size,-1),u.write(o,p)},s.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=c.ja.rf(this.he.Jg,-1),u=0,p=this.Fi.length;u<p;u++)if(this.Fi[u]==null)return this.Fi[u]=o,u;return this.Fi.push(o),this.Fi.length-1},s.prototype.Gp=function(o){this.Fi[o]=null},s.prototype.lk=function(o){return this.Lc.U(o,1)},s.prototype.vf=function(o){return this.lk(this.ya(o))},s.prototype.ya=function(o){return this.Lc.U(o,4)},s.prototype.ue=function(o){return this.Lc.U(o,5)},s.prototype.kc=function(o){return this.Lc.U(o,6)},s.prototype.$e=function(o){return this.Lc.U(o,2)},s.prototype.af=function(o){return this.jk(this.Lc.U(o,2))},s.prototype.om=function(o){return this.Lc.U(o,7)},s.prototype.$r=function(o,u){this.D(this.lk(o),u)},s.prototype.nm=function(o,u){this.D(this.vf(o),u)},s.prototype.fh=function(o){return this.Lc.U(o,3)&this.XN},s.prototype.Bb=function(o,u){return(u=this.Ii[u]).size<=o?-1:u.read(o)},s.prototype.Kb=function(o,u,p){(u=this.Ii[u]).size<=o&&u.resize(this.Lc.size,-1),u.write(o,p)},s.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=c.ja.rf(this.Lc.Jg,-1),u=0,p=this.Ii.length;u<p;u++)if(this.Ii[u]==null)return this.Ii[u]=o,u;return this.Ii.push(o),this.Ii.length-1},s.prototype.Lg=function(o){this.Ii[o]=null},s.prototype.DP=function(o){var u=this.$e(o),p=this.ya(o),f=this.kc(o);f==p&&(f=this.kc(f))==o&&(f=-1);var m=this.vF(u);m!==o&&m!=p||this.Et(u,f),p=this.$n.read(u),isNaN(p)||(this.vJ(u,NaN),this.xJ(u,NaN)),this.xx(o,!0),this.Gy(o)},s.prototype.EP=function(o){for(var u=0,p=o.size;u<p;u++){var f=o.get(u),m=this.$e(this.ya(f));this.Et(this.$e(f),-1),this.Et(m,-1),this.xx(f,!0),this.Gy(f)}},s.prototype.vF=function(o){return this.ze.U(o,1)},s.prototype.jk=function(o){return this.ze.U(o,2)},s.prototype.In=function(o){return this.ze.U(o,3)},s.prototype.ZQ=function(o){return this.ze.U(o,4)},s.prototype.Mp=function(o){var u=this.$n.read(o);return isNaN(u)&&(this.gY(o),u=this.$n.read(o)),u},s.prototype.Ma=function(o){return this.g.FF(o,this.Dq)},s.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},s.prototype.oR=function(o){return this.g.Qa(o,this.Eq)},s.prototype.nR=function(o,u){var p=this.Je(o);if(p==-1)return-1;var f=p,m=-1,v=-1;do{if(this.vf(f)==u)return f;if(m==-1){if((m=this.Je(u))==-1)break;v=m}if(this.vf(v)==o)return this.ya(v);f=this.kc(this.ya(f)),v=this.kc(this.ya(v))}while(f!=p&&v!=m);return-1},s.prototype.kB=function(o,u){u.Qr(),u=u.get();var p=new c.h;this.$r(o,p),u.Ec(p),this.nm(o,p),u.Rc(p)},s.prototype.CO=function(o,u){if(o==u)return 0;var p=new c.h;this.nm(o,p);var f=new c.h;return this.nm(u,f),p.rb(f)?0:(u=new c.h,this.$r(o,u),(o=new c.h).vc(p,u),(p=new c.h).vc(f,u),c.h.pu(o,p))},s.prototype.BO=function(o,u){if(o==u)return 0;var p=new c.h;this.nm(o,p);var f=new c.h;return this.nm(u,f),p.rb(f)?0:(u=new c.h,this.$r(o,u),(o=new c.h).vc(p,u),(p=new c.h).vc(f,u),0<=p.y&&0<o.y?c.h.pu(o,p):0)},s.prototype.sO=function(){for(var o=c.mc.ox(this.gA),u=new c.h,p=new c.h,f=new c.h,m=new c.h,v=new c.h,_=this.Oe;_!=-1;_=this.Tf(_)){var M=this.Je(_);if(M!=-1){var T=M;this.$r(T,u),this.nm(T,p),v.vc(p,u);var A=v.Uk();do{var O=T;if((T=this.kc(this.ya(T)))!=O){this.nm(T,f),m.vc(f,u),O=m.Uk();var R=m.yi(v);if(R*R/(O*A)*Math.min(O,A)<=o)return!1;v.N(m),A=O,p.N(f)}}while(T!=M)}}return!0},s}(),c.ku=C}(q||(q={})),function(c){var C=function(){function w(){this.j=null,this.jH=new c.h,this.kH=new c.h,this.Ij=null,this.Ov=!1,this.vl=-1}return w.prototype.cf=function(h){return h<this.Ij.length&&this.Ij[h]},w.prototype.fl=function(h,a,s,o){var u=c.ba.uf(this.j.g.jc(s));if(c.ba.uf(this.j.g.jc(a))!=2||u!=1)throw c.i.Ra();this.AP(h,a,s,o)},w.prototype.fr=function(h,a){this.j==null&&(this.j=new c.ku),this.j.fr(h,a)},w.prototype.Gt=function(h,a,s){for(c.Vk.W(h,a,s,!0),a=h.md;a!=-1;a=h.ve(a))h.jc(a)==1736&&c.tn.W(h,a,-1,this.Ov,s);this.fr(h,s)},w.prototype.HE=function(h,a,s,o,u){var p=this.j.g;if(p.jc(h)==1736)for(h=p.Ob(h);h!=-1;h=p.Sb(h)){var f=p.Ya(h);this.j.Ie(f),this.j.Ie(p.V(f));var m=this.j.oR(f);if(m!=-1){var v=this.j.Bb(m,s);if(v!=1&&v!=2)if(this.cf(this.j.af(m))){this.j.Kb(m,s,1),v=p.wf(a,-1);var _=m,M=this.j.Ie(f),T=1;do{var A=this.um(f,u);p.kj(v,A),o!=-1&&this.j.pn(M,o,1),this.j.Kb(_,s,1),_=this.j.kc(_);do var O=(A=T==1?p.V(f):p.Na(f))!=-1?this.j.Ie(A):-1;while(O==M);var R=this.j.lk(_);if(R!=O){do O=(A=T==1?p.Na(f):p.V(f))!=-1?this.j.Ie(A):-1;while(O==M);R!=O?(O=R,A=this.j.vj(this.j.mm(O))):T=-T}M=O,f=A}while(_!=m);p.mn(v,!0)}else this.j.Kb(m,s,2)}}},w.prototype.$E=function(){for(var h=this.j.bh(),a=new c.ja(0),s=this.j.Oe;s!=-1;s=this.j.Tf(s)){var o=this.j.Je(s),u=o;if(o!=-1)do{if(this.j.Bb(u,h)!=1){var p=this.j.ya(u);this.j.Kb(p,h,1),this.j.Kb(u,h,1),this.cf(this.j.af(u))&&this.cf(this.j.af(p))&&a.add(u)}u=this.j.kc(this.j.ya(u))}while(u!=o)}this.j.Lg(h),this.j.EP(a)},w.prototype.um=function(h,a){return a==-1?h:this.WR(h,a)},w.prototype.WR=function(h,a){var s=this.j.g,o=this.j.mm(this.j.Ie(h));do{var u=this.j.vj(o);if(s.Sf(s.cd(u))==a)return u;o=this.j.ls(o)}while(o!=-1);return h},w.prototype.Qt=function(h,a,s){this.$E();var o=this.j.g,u=o.Kg(1736),p=this.j.bh();return this.pK(h,a,u,s,p,-1),this.j.Lg(p),c.tn.W(o,u,1,this.Ov,null),u},w.prototype.pK=function(h,a,s,o,u,p){for(this.HE(h,s,u,p,o),a!=-1&&this.HE(a,s,u,p,o),h=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Tf(a)){var f=this.j.Je(a);if(f!=-1){var m=f;do{var v=this.j.Bb(m,u);if(v!=1&&v!=2)if(this.cf(this.j.af(m))){v=h.wf(s,-1);var _=m;do{var M=this.j.om(_);M!=-1?M=this.j.vj(M):(M=this.j.vj(this.j.om(this.j.ya(_))),M=this.j.g.V(M)),M=this.um(M,o),h.kj(v,M),this.j.Kb(_,u,1),p!=-1&&(M=this.j.Ie(M),this.j.pn(M,p,1)),_=this.j.kc(_)}while(_!=m);h.mn(v,!0)}else this.j.Kb(m,u,2);m=this.j.kc(this.j.ya(m))}while(m!=f)}}},w.prototype.XX=function(h,a,s){var o=this.j.g,u=o.Kg(1736),p=o.Kg(1607),f=o.Kg(550);this.$E();var m=-1,v=this.j.bh(),_=this.j.Fp();for(this.pK(h,a,u,s,v,_),h=this.j.Oe;h!=-1;h=this.j.Tf(h))if((a=this.j.Je(h))!=-1){var M=a;do{var T=this.j.Bb(M,v),A=this.j.Bb(this.j.ya(M),v);if((T|=A)==2)if(T=this.j.fh(M),this.cf(T)){var O=o.wf(p,-1),R=M;T=this.$w(h,o),T=this.um(T,s),o.kj(O,T),this.j.pn(h,_,1);do{if(T=this.j.vf(R),A=this.$w(T,o),A=this.um(A,s),o.kj(O,A),this.j.Kb(R,v,1),this.j.Kb(this.j.ya(R),v,1),this.j.pn(T,_,1),R=this.j.kc(R),T=this.j.Bb(R,v),(T|=A=this.j.Bb(this.j.ya(R),v))!=2)break;if(T=this.j.fh(R),!this.cf(T)){this.j.Kb(R,v,1),this.j.Kb(this.j.ya(R),v,1);break}}while(R!=M)}else this.j.Kb(M,v,1),this.j.Kb(this.j.ya(M),v,1);M=this.j.kc(this.j.ya(M))}while(M!=a)}for(h=this.j.Oe;h!=-1;h=this.j.Tf(h))(T=this.j.og(h,_))!=1&&(T=this.j.yd(h),this.cf(T)&&(m==-1&&(m=o.wf(f,-1)),(a=this.j.mm(h))!=-1&&(a=this.j.vj(a),T=this.um(a,s),o.kj(m,T))));return this.j.Gp(_),this.j.Lg(v),c.tn.W(o,u,1,this.Ov,null),(s=[])[0]=f,s[1]=p,s[2]=u,s},w.prototype.$w=function(h,a){var s=-1;for(h=this.j.mm(h);h!=-1;h=this.j.ls(h)){var o=this.j.vj(h);s==-1&&(s=o);var u=this.j.Ma(a.Sf(a.cd(o)));if(this.cf(u)){s=o;break}}return s},w.prototype.gB=function(h,a){for(var s=this.ll(a),o=this.j.lk(a),u=this.j.vf(a),p=0,f=0,m=this.j.mm(o);m!=-1;m=this.j.ls(m)){var v=this.j.vj(m),_=h.cd(v),M=this.j.Ma(h.Sf(_));_=h.Ya(_),(M=(M&s)!=0)&&_==v&&(this.vl=a);var T=h.V(v);T!=-1&&this.j.Ie(T)==u?(p++,M&&(this.vl===-1&&_==T&&(v=this.j.kc(a),this.cf(this.ll(v))&&(this.vl=v)),f++)):(v=h.Na(v))!=-1&&this.j.Ie(v)==u&&(p--,M&&(this.vl===-1&&_===v&&(v=this.j.kc(a),this.cf(this.ll(v))&&(this.vl=v)),f--))}return this.j.D(o,this.jH),this.j.D(u,this.kH),(f!=0?f:p)*(h=c.h.ub(this.jH,this.kH))},w.prototype.ll=function(h){return this.j.fh(h)|this.j.af(h)|this.j.af(this.j.ya(h))},w.prototype.sK=function(h){for(var a=this.j.ya(this.j.ue(h)),s=-1;a!=h;){if(this.cf(this.ll(a))){if(s!=-1)return-1;s=a}a=this.j.ya(this.j.ue(a))}return s!=-1?this.j.ya(s):-1},w.prototype.tK=function(h){for(var a=this.j.ya(this.j.kc(h)),s=-1;a!=h;){if(this.cf(this.ll(a))){if(s!=-1)return-1;s=a}a=this.j.ya(this.j.kc(a))}return s!=-1?this.j.ya(s):-1},w.prototype.hJ=function(h,a,s,o,u){var p=this.j.g,f=h,m=this.j.ya(f);this.j.Kb(f,s,1),this.j.Kb(m,s,1),this.vl=-1;for(var v=this.gB(p,f),_=f,M=-1,T=!1,A=1;;){var O=this.j.ue(f);if(O==m)break;if(m=this.j.kc(m),this.j.ya(O)!=m){if((f=this.sK(f))==-1){T=!0;break}m=this.j.ya(f)}else f=O;if(f==h){M=h;break}if(O=this.ll(f),!this.cf(O))break;this.j.Kb(f,s,1),this.j.Kb(m,s,1),_=f,v+=this.gB(p,f),A++}if(M==-1)for(f=h,m=this.j.ya(f),M=f;(h=this.j.kc(f))!=m;){if(m=this.j.ue(m),this.j.ya(h)!=m){if((f=this.tK(f))==-1){T=!0;break}m=this.j.ya(f)}else f=h;if(O=this.ll(f),!this.cf(O))break;this.j.Kb(f,s,1),this.j.Kb(m,s,1),M=f,v+=this.gB(p,f),A++}else if(this.vl!=-1&&(_=this.vl,M=this.j.ue(this.vl),this.j.ya(M)!=this.j.kc(this.j.ya(_))&&(M=this.sK(_))==-1))throw c.i.Ra();for(0<=v||(f=M,M=this.j.ya(_),_=this.j.ya(f)),s=p.wf(a,-1),f=_,_=this.j.lk(_),T=this.j.vf(M)==_&&T,v=this.$w(_,p),v=this.um(v,u),p.kj(s,v),o!=-1&&this.j.pn(_,o,1),_=0,A=T?c.P.truncate((A+1)/2):-1;h=this.j.vf(f),v=this.$w(h,p),v=this.um(v,u),p.kj(s,v),_++,o!=-1&&this.j.pn(h,o,1),T&&_==A&&(s=p.wf(a,-1),p.kj(s,v)),f!=M;)if(h=this.j.kc(f),this.j.ue(this.j.ya(f))!=this.j.ya(h)){if((f=this.tK(f))==-1)throw c.i.Ra()}else f=h},w.prototype.Rt=function(h){for(var a=this.j.g.Kg(1607),s=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var u=this.j.Je(o),p=u;do this.j.Bb(p,s)!=1&&this.cf(this.ll(p))&&this.hJ(p,a,s,-1,h),p=this.j.kc(this.j.ya(p));while(p!=u)}return this.j.Lg(s),a},w.prototype.YX=function(h){for(var a=this.j.g,s=a.Kg(1607),o=a.Kg(550),u=this.j.bh(),p=this.j.Fp(),f=-1,m=this.j.Oe;m!=-1;m=this.j.Tf(m)){var v=this.j.Je(m),_=v;do{var M=this.j.Bb(_,u);M!=1&&(M=this.ll(_),this.cf(M)&&this.hJ(_,s,u,p,h)),_=this.j.kc(this.j.ya(_))}while(_!=v)}for(m=this.j.Oe;m!=-1;m=this.j.Tf(m))(M=this.j.og(m,p))!=1&&(M=this.j.yd(m),this.cf(M)&&(f==-1&&(f=a.wf(o,-1)),(v=this.j.mm(m))!=-1&&(v=this.j.vj(v),v=this.um(v,h),a.kj(f,v))));return this.j.Lg(u),this.j.Gp(p),(h=[])[0]=o,h[1]=s,h},w.prototype.pr=function(){for(var h=this.j.g,a=h.Kg(550),s=h.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Tf(o))if(this.cf(this.j.yd(o))){for(var u=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var f=this.j.vj(p);u==-1&&(u=f);var m=this.j.Ma(h.Sf(h.cd(f)));if(this.cf(m)){u=f;break}}h.kj(s,u)}return a},w.prototype.eq=function(h){this.Ij=[];for(var a=0;a<h;a++)this.Ij[a]=!1},w.WV=function(h,a,s){var o=h.Ja(),u=Array(1e3);c.P.bv(u,null);var p=c.P.mg(1e3,0),f=h.I(),m=!0,v=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();for(var _=0;_<f;){var M=c.P.truncate(h.gW(u,_)-_);v?c.jd.nK(a,u,M,s,p):c.jd.oK(a,u,M,s,p);for(var T=0,A=0;A<M;A++)p[A]==0&&(m&&(m=!1,o.Gd(h,0,_)),T!=A&&o.Gd(h,_+T,_+A),T=A+1);m||T==M||o.Gd(h,_+T,_+M),_+=M}return m?h:o},w.uG=function(h,a,s){return h instanceof c.ee?w.WV(h,a,s):a instanceof c.Ta?h.B()||a.B()?h.Ja():c.Vk.uU(s,h,a)?c.Vk.xO(h,a):h.Ja():w.XV(h,a,s)},w.Cv=function(h,a,s,o){var u=new c.l;h.A(u);var p=new c.l;a.A(p);var f=new c.l;if(f.L(u),f.$b(p),s=c.ua.Xd(s,f,!0),(f=new c.l).L(p),p=c.ua.Gr(s),f.X(p,p),!u.isIntersecting(f)){if(h.Eb()<=a.Eb())return w.mi(w.Ue(h.Ja()),h,"&");if(h.Eb()>a.Eb())return w.mi(w.Ue(a.Ja()),h,"&")}return p=new w,f=(u=new c.hd).Ib(w.Ue(h)),a=u.Ib(w.Ue(a)),p.Gt(u,s,o),o=p.Cv(f,a),h=w.mi(u.Ke(o),h,"&"),c.ba.Ic(h.K())&&(h.Eh(2,s),h.K()==1736&&h.hm()),h},w.XV=function(h,a,s){if(h.B()||a.B())return h.Ja();var o=[null],u=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();return o[0]=h.D(),p?c.jd.nK(a,o,1,s,u):c.jd.oK(a,o,1,s,u),u[0]==0?h.Ja():h},w.prototype.GU=function(h,a,s,o,u){if(h.B())return h;var p=new c.hd;return h=p.Ib(h),this.Ok(p,h,a,s,o,u)},w.prototype.IU=function(h,a,s,o,u,p){if(u&&h.jc(a)!=550){var f=new c.MC;f.PX(h,s),f.Pg?(c.Vk.W(h,s,p,!0),u=!1):this.j.ty(s)}else c.Vk.W(h,s,p,!0),u=!1;if(o&&h.jc(a)!=550?this.j.rJ(h,a,p):this.j.qJ(h,a,p),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(h,a,s,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,h.jc(a)==1736||o&&h.jc(a)!=550)return h.$o(a,0),a=this.Qt(a,-1,-1),(h=h.Ke(a)).$o(0),u?h.Eh(1,0):(h.Eh(2,s),h.hm()),h;if(h.jc(a)==1607)return a=this.Rt(-1),h=h.Ke(a),u||h.Eh(2,s),h;if(h.jc(a)==550)return a=this.pr(),h=h.Ke(a),u||h.Eh(2,s),h;throw c.i.Ra()},w.prototype.Ok=function(h,a,s,o,u,p){this.j=new c.ku;try{return this.IU(h,a,s,o,u,p)}finally{this.j.Wg()}},w.Ok=function(h,a,s,o,u){return new w().GU(h,a,s,o,u)},w.prototype.HU=function(h,a,s,o){this.Ov=h,this.j=new c.ku,h=a.Kn(s);var u=a.jc(s);if(h!=1||u==550?this.j.qJ(a,s,o):this.j.rJ(a,s,o),!this.j.kA)if(this.j.ty(NaN),o=this.j.Ma(s),this.eq(o+1),this.Ij[o]=!0,a.jc(s)==1736||h==1&&a.jc(s)!=550)a.$o(s,0),o=this.Qt(s,-1,-1),a.cC(o,s),a.wB(o);else if(a.jc(s)==1607)o=this.Rt(-1),a.cC(o,s),a.wB(o);else{if(a.jc(s)!=550)throw c.i.ga("internal error");o=this.pr(),a.cC(o,s),a.wB(o)}},w.prototype.km=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a));if(s>o)return h;var u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)]=!0,s==2&&o==2)return this.Qt(h,a,-1);if(s==1&&o==2||s==1&&o==1)return this.Rt(-1);if(s==0)return this.pr();throw c.i.Ra()},w.prototype.Cv=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a)),u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=h),s==2&&o==2)return this.Qt(h,a,u);if(s==1&&0<o||o==1&&0<s)return this.Rt(u);if(s==0||o==0)return this.pr();throw c.i.Ra()},w.prototype.Kz=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a)),u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=h),s==2&&o==2)return this.XX(h,a,u);if(s==1&&0<o||o==1&&0<s)return this.YX(u);if(s==0||o==0)return(h=[])[0]=this.pr(),h;throw c.i.Ra()},w.prototype.gp=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a)),u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)]=!0,this.Ij[this.j.Ma(a)]=!0,s==2&&o==2)return this.Qt(h,a,-1);if(s==1&&o==1)return this.Rt(-1);if(s==0&&o==0)return this.pr();throw c.i.Ra()},w.Ue=function(h){var a=h.K();return a==197?(a=new c.Ea(h.description),h.B()||a.bd(h,!1),a):a==33?(a=new c.ee(h.description),h.B()||a.add(h),a):a==322?(a=new c.Ua(h.description),h.B()||a.pc(h,!0),a):h},w.mi=function(h,a,s){var o=h.K();return o==197?(a=new c.Ea(h.description),h.B()||a.bd(h,!1),a):o!=33||s!="|"&&s!="^"?o==322?(a=new c.Ua(h.description),h.B()||a.pc(h,!0),a):o==33&&s=="-"&&a.K()==33||o==550&&s=="&"&&a.K()==33?(a=new c.Ta(h.description),h.B()||h.we(0,a),a):h:(a=new c.ee(h.description),h.B()||a.add(h),a)},w.km=function(h,a,s,o){if(h.B()||a.B()||h.Eb()>a.Eb())return w.mi(w.Ue(h),h,"-");var u=new c.l;h.A(u);var p=new c.l;if(a.A(p),!u.isIntersecting(p))return w.mi(w.Ue(h),h,"-");var f=new c.l;return f.L(u),f.$b(p),s=c.ua.Xd(s,f,!0),p=new w,f=(u=new c.hd).Ib(w.Ue(h)),a=u.Ib(w.Ue(a)),p.Gt(u,s,o),o=p.km(f,a),o=u.Ke(o),h=w.mi(o,h,"-"),c.ba.Ic(h.K())&&(h.Eh(2,s),h.K()==1736&&h.hm()),h},w.QP=function(h,a,s){if(2>h.length)throw c.i.O("not enough geometries to dissolve");for(var o=0,u=0,p=h.length;u<p;u++)o=Math.max(h[u].Eb(),o);var f=new c.l;f.Pa();var m=new c.hd,v=-1,_=0,M=-1;for(u=0,p=h.length;u<p;u++)if(h[u].Eb()==o)if(h[u].B())M==-1&&(M=u);else{M=u,v==-1?v=m.Ib(w.Ue(h[u])):m.pN(v,w.Ue(h[u]));var T=new c.l;h[u].yc(T),f.$b(T),_++}return 2>_?w.Ue(h[M]):(h=o==2,a=c.ua.Xd(o==0?a:null,f,!0),new w().Ok(m,v,a,h,!0,s))},w.Kz=function(h,a,s,o){var u=[null,null,null],p=new c.l;h.A(p);var f=new c.l;a.A(f);var m=new c.l;if(m.L(p),m.$b(f),s=c.ua.Xd(s,m,!0),(m=new c.l).L(f),f=c.ua.Gr(s),m.X(f,f),!p.isIntersecting(m)){if(h.Eb()<=a.Eb())return u[(h=w.mi(w.Ue(h.Ja()),h,"&")).Eb()]=h,u;if(h.Eb()>a.Eb())return u[(h=w.mi(w.Ue(a.Ja()),h,"&")).Eb()]=h,u}for(f=new w,m=(p=new c.hd).Ib(w.Ue(h)),a=p.Ib(w.Ue(a)),f.Gt(p,s,o),o=f.Kz(m,a),a=0;a<o.length;a++)f=w.mi(p.Ke(o[a]),h,"&"),c.ba.Ic(f.K())&&(f.Eh(2,s),f.K()==1736&&f.hm()),u[f.Eb()]=f;return u},w.gp=function(h,a,s,o){if(h.Eb()>a.Eb())return w.mi(w.Ue(h),h,"^");if(h.Eb()<a.Eb()||h.B())return w.mi(w.Ue(a),h,"^");if(a.B())return w.mi(w.Ue(h),h,"^");var u=new c.l;h.A(u);var p=new c.l;a.A(p);var f=new c.l;return f.L(u),f.$b(p),s=c.ua.Xd(s,f,!0),p=new w,f=(u=new c.hd).Ib(w.Ue(h)),a=u.Ib(w.Ue(a)),p.Gt(u,s,o),o=p.gp(f,a),h=w.mi(u.Ke(o),h,"^"),c.ba.Ic(h.K())&&(h.Eh(2,s),h.K()==1736&&h.hm()),h},w.prototype.GQ=function(h,a){var s=this.j.g;h=s.wf(h,-1);for(var o=a.size,u=0;u<o;u++){var p=a.get(u);s.kj(h,p)}s.mn(h,!0)},w.prototype.WW=function(h,a){for(var s=this.j.g,o=s.md;o!=-1;o=s.ve(o))if(o==a)for(var u=s.Ob(o);u!=-1;u=s.Sb(u)){var p=s.Ya(u);if(p!=-1)for(var f=s.V(p);f!=-1;){p=this.j.Ie(p);var m=this.j.Ie(f);(p=this.j.nR(p,m))!=-1&&(m=this.j.ya(p),this.j.Kb(p,h,1),this.j.Kb(m,h,2)),p=f,f=s.V(p)}}},w.prototype.YV=function(h,a,s,o){s=this.j.Ma(s),o=this.j.Ma(o);var u=new c.ja(0);u.Jb(256);for(var p=this.j.g,f=this.j.bh(),m=this.j.Oe;m!=-1;m=this.j.Tf(m)){var v=this.j.Je(m);if(v!=-1){var _=v;do{if(this.j.Bb(_,f)!=1){var M=_,T=_,A=!1,O=0;do{if(this.j.Kb(M,f,1),!A){var R=this.j.fh(M);R&o&&this.j.af(M)&s&&(T=M,A=!0)}A&&(u.add(this.j.vj(this.j.mm(this.j.lk(M)))),h!=-1&&(R=this.j.fh(M))&o&&(O|=R=this.j.Bb(M,h))),M=this.j.kc(M)}while(M!=T);A&&0<this.j.Mp(this.j.$e(T))&&(M=p.Kg(1736),this.GQ(M,u),a!=-1&&p.CJ(M,a,O)),u.clear(!1)}_=this.j.kc(this.j.ya(_))}while(_!=v)}}this.j.Lg(f)},w.prototype.AP=function(h,a,s,o){this.j.tW();var u=-1;h!=-1&&(u=this.j.bh(),this.WW(u,s)),this.YV(u,h,a,s),u!=-1&&(this.j.Lg(u),u=-1);var p=this.j.g;for(h=0,u=p.md;u!=-1;u=p.ve(u))u!=a&&u!=s&&(o.add(u),h++);o.Wd(0,h,function(f,m){return(f=p.qz(p.Ob(f)))<(m=p.qz(p.Ob(m)))?-1:f==m?0:1})},w.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},w}();c.Hg=C}(q||(q={})),function(c){var C=function(){function w(h){h!==void 0?this.Jt(h):this.MB()}return w.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},w.prototype.Nb=function(h){return this==h||h instanceof w&&this.eb==h.eb&&this.jb==h.jb&&this.Lb==h.Lb&&this.qb==h.qb&&this.bb==h.bb&&this.Qb==h.Qb},w.prototype.dc=function(){return c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj()},w.prototype.Gh=function(h,a){var s=this.qb*h.x+this.bb*h.y+this.Qb;a.x=this.eb*h.x+this.jb*h.y+this.Lb,a.y=s},w.prototype.aY=function(h,a,s){for(var o=0;o<a;o++){var u=h[o].x,p=h[o].y,f=this.eb*u+this.jb*p+this.Lb;u=this.qb*u+this.bb*p+this.Qb,s[o]!=null?s[o].na(f,u):s[o]=c.h.construct(f,u)}},w.prototype.multiply=function(h){w.multiply(this,h,this)},w.multiply=function(h,a,s){var o=h.eb*a.eb+h.qb*a.jb,u=h.jb*a.eb+h.bb*a.jb,p=h.Lb*a.eb+h.Qb*a.jb+a.Lb,f=h.eb*a.qb+h.qb*a.bb,m=h.jb*a.qb+h.bb*a.bb;h=h.Lb*a.qb+h.Qb*a.bb+a.Qb,s.eb=o,s.jb=u,s.Lb=p,s.qb=f,s.bb=m,s.Qb=h},w.prototype.Qf=function(){var h=new w;return h.eb=this.eb,h.jb=this.jb,h.Lb=this.Lb,h.qb=this.qb,h.bb=this.bb,h.Qb=this.Qb,h},w.prototype.hC=function(h){if(!h.B()){for(var a=[],s=0;4>s;s++)a[s]=new c.h;h.iB(a),this.bY(a,a),h.bx(a,4)}},w.prototype.bY=function(h,a){for(var s=0;s<h.length;s++){var o=new c.h,u=h[s];o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.Qb,a[s]=o}},w.prototype.kS=function(h,a){h.B()||a.B()||h.S()==0||h.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/h.S(),this.bb=a.da()/h.da(),this.Lb=a.v-h.v*this.eb,this.Qb=a.G-h.G*this.bb)},w.prototype.$X=function(h){var a=new c.h,s=new c.h;a.na(this.eb,this.qb),s.na(this.jb,this.bb),a.sub(a);var o=.5*a.Uk();return a.na(this.eb,this.qb),s.na(this.jb,this.bb),a.add(s),h*(o>(a=.5*a.Uk())?Math.sqrt(o):Math.sqrt(a))},w.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},w.prototype.isIdentity=function(h){if(h!==void 0){var a=c.h.construct(0,1);return this.Gh(a,a),a.sub(c.h.construct(0,1)),a.Uk()>h*h?!1:(a.na(0,0),this.Gh(a,a),!(a.Uk()>h*h)&&(a.na(1,0),this.Gh(a,a),a.sub(c.h.construct(1,0)),a.Uk()<=h*h))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},w.prototype.Di=function(h){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*h*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},w.prototype.ig=function(h,a){this.eb=1,this.jb=0,this.Lb=h,this.qb=0,this.bb=1,this.Qb=a},w.prototype.Jt=function(h,a){a!==void 0?(this.eb=h,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(h,h)},w.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},w.prototype.kX=function(h){this.lX(Math.cos(h),Math.sin(h))},w.prototype.lX=function(h,a){this.eb=h,this.jb=-a,this.Lb=0,this.qb=a,this.bb=h,this.Qb=0},w.prototype.shift=function(h,a){this.Lb+=h,this.Qb+=a},w.prototype.scale=function(h,a){this.eb*=h,this.jb*=h,this.Lb*=h,this.qb*=a,this.bb*=a,this.Qb*=a},w.prototype.flipX=function(h,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=h+a-this.Lb},w.prototype.flipY=function(h,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=h+a-this.Qb},w.prototype.rotate=function(h){var a=new w;a.kX(h),this.multiply(a)},w.prototype.inverse=function(h){if(h!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?h.lx():(a=1/a,h.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,h.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,h.eb=this.bb*a,h.jb=-this.jb*a,h.qb=-this.qb*a,h.bb=this.eb*a)}else this.inverse(this)},w}();c.Ed=C}(q||(q={})),function(c){var C=function(){function w(){}return w.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},w.prototype.Jt=function(h,a){this.eb=h,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},w.prototype.translate=function(h,a,s){this.Lb+=h,this.Qb+=a,this.Cg+=s},w.prototype.hC=function(h){if(!h.B()){for(var a=new c.Od[8],s=0;8>s;s++)a[s]=new c.Od;h.iB(a),this.transform(a,8,a),h.bx(a)}},w.prototype.transform=function(h,a,s){for(var o=0;o<a;o++){var u=new c.Od,p=h[o];u.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,u.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,u.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,s[o]=u}},w.prototype.hp=function(h){var a=new c.Od;return a.x=this.eb*h.x+this.jb*h.y+this.Ve*h.z+this.Lb,a.y=this.qb*h.x+this.bb*h.y+this.We*h.z+this.Qb,a.z=this.pf*h.x+this.Ye*h.y+this.Ze*h.z+this.Cg,a},w.prototype.Bg=function(h){w.multiply(this,h,this)},w.multiply=function(h,a,s){var o=h.eb*a.eb+h.qb*a.jb+h.pf*a.Ve,u=h.eb*a.qb+h.qb*a.bb+h.pf*a.We,p=h.eb*a.pf+h.qb*a.Ye+h.pf*a.Ze,f=h.jb*a.eb+h.bb*a.jb+h.Ye*a.Ve,m=h.jb*a.qb+h.bb*a.bb+h.Ye*a.We,v=h.jb*a.pf+h.bb*a.Ye+h.Ye*a.Ze,_=h.Ve*a.eb+h.We*a.jb+h.Ze*a.Ve,M=h.Ve*a.qb+h.We*a.bb+h.Ze*a.We,T=h.Ve*a.pf+h.We*a.Ye+h.Ze*a.Ze,A=h.Lb*a.eb+h.Qb*a.jb+h.Cg*a.Ve+a.Lb,O=h.Lb*a.qb+h.Qb*a.bb+h.Cg*a.We+a.Qb;h=h.Lb*a.pf+h.Qb*a.Ye+h.Cg*a.Ze+a.Cg,s.eb=o,s.qb=u,s.pf=p,s.jb=f,s.bb=m,s.Ye=v,s.Ve=_,s.We=M,s.Ze=T,s.Lb=A,s.Qb=O,s.Cg=h},w.inverse=function(h,a){var s=h.eb*(h.bb*h.Ze-h.Ye*h.We)-h.qb*(h.jb*h.Ze-h.Ye*h.Ve)+h.pf*(h.jb*h.We-h.bb*h.Ve);if(s==0)throw c.i.ga("math singularity");var o=1/s;s=(h.bb*h.Ze-h.Ye*h.We)*o;var u=-(h.jb*h.Ze-h.Ye*h.Ve)*o,p=(h.jb*h.We-h.bb*h.Ve)*o,f=-(h.qb*h.Ze-h.We*h.pf)*o,m=(h.eb*h.Ze-h.pf*h.Ve)*o,v=-(h.eb*h.We-h.qb*h.Ve)*o,_=(h.qb*h.Ye-h.pf*h.bb)*o,M=-(h.eb*h.Ye-h.pf*h.jb)*o;o*=h.eb*h.bb-h.qb*h.jb;var T=-(h.Lb*s+h.Qb*u+h.Cg*p),A=-(h.Lb*f+h.Qb*m+h.Cg*v);h=-(h.Lb*_+h.Qb*M+h.Cg*o),a.eb=s,a.qb=f,a.pf=_,a.jb=u,a.bb=m,a.Ye=M,a.Ve=p,a.We=v,a.Ze=o,a.Lb=T,a.Qb=A,a.Cg=h},w.prototype.Qf=function(){var h=new w;return h.eb=this.eb,h.qb=this.qb,h.pf=this.pf,h.jb=this.jb,h.bb=this.bb,h.Ye=this.Ye,h.Ve=this.Ve,h.We=this.We,h.Ze=this.Ze,h.Lb=this.Lb,h.Qb=this.Qb,h.Cg=this.Cg,h},w}();c.FY=C}(q||(q={})),function(c){var C=function(h){function a(s){if(s!==void 0)s=h.call(this,s.dc(),s)||this;else{(s=h.call(this)||this).dg=[],s.dg[0]=0,s.Ba=1,s.wh=[];for(var o=0;10>o;o++)s.wh[o]=-1;s.wh[s.dg[0]]=0}return s.lq=!0,s}return Et(a,h),a.prototype.se=function(s){this.hasAttribute(s)||(this.wh[s]=0,this.eD())},a.prototype.removeAttribute=function(s){if(s==0)throw c.i.O("Position attribue cannot be removed");this.hasAttribute(s)&&(this.wh[s]=-1,this.eD())},a.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var s=0;s<this.wh.length;s++)this.wh[s]=-1;this.wh[this.dg[0]]=0,this.lq=!0},a.prototype.zF=function(){return w.fz().add(this)},a.pg=function(){return w.fz().VR()},a.prototype.oM=function(){var s=this.dc();return new c.sa(s,this)},a.prototype.eD=function(){for(var s=this.Ba=0,o=0;10>s;s++)0<=this.wh[s]&&(this.dg[o]=s,this.wh[s]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},a.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof a)||s.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=s.dg[o])return!1;return this.lq==s.lq},a.prototype.BG=function(s){if(s.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=s.dg[o])return!1;return!0},a.Kw=function(s,o){for(var u=[],p=0;p<s.Ba;p++)u[p]=-1;p=0;for(var f=s.Ba;p<f;p++)u[p]=o.Rf(s.ld(p));return u},a.wR=function(s,o){return(s=new a(s)).se(o),s.zF()},a.xR=function(s,o){for(var u=null,p=0;10>p;p++)!s.hasAttribute(p)&&o.hasAttribute(p)&&(u==null&&(u=new a(s)),u.se(p));return u!=null?u.zF():s},a}(c.sa);c.fe=C;var w=function(){function h(){this.map=[];var a=new C;this.add(a),(a=new C).se(1),this.add(a)}return h.fz=function(){return h.XK},h.prototype.VR=function(){return h.gt},h.prototype.add=function(a){var s=a.dc();if(h.gt!=null&&h.gt.dc()==s&&a.BG(h.gt))return h.gt;if(h.Fw!=null&&h.Fw.dc()==s&&a.BG(h.Fw))return h.Fw;var o=null;return this.map[s]!==void 0&&(o=this.map[s]),o==null&&((o=a.oM()).Ba==1?h.gt=o:o.Ba==2&&o.ld(1)==1?h.Fw=o:this.map[s]=o),o},h.XK=new h,h}()}(q||(q={}));var Xn={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},tg={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Va=new(function(){function c(){this.MM=50,this.pp=new Map,this.ij=[]}return c.prototype.clear=function(){this.ij.length=0,this.pp.clear()},c.prototype.delete=function(C){return!!this.pp.delete(C)&&(this.ij.splice(this.ij.indexOf(C),1),!0)},c.prototype.get=function(C){var w=this.pp.get(C);if(w!==void 0)return this.ij[0]!==C&&(this.ij.splice(this.ij.indexOf(C),1),this.ij.unshift(C)),w},c.prototype.has=function(C){return this.pp.has(C)},c.prototype.set=function(C,w){return this.get(C)!==void 0&&this.delete(C),this.ij.unshift(C),this.pp.set(C,w),this.jM(),this},c.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var C=this.ij.pop();this.pp.delete(C)}},c}()),Ie=((Hi={}).convertJSONToGeometry=function(c){return q.ac.aP(c)},Hi.hasM=function(c){return c.hasAttribute(q.Kh.M)},Hi.hasZ=function(c){return c.hasAttribute(q.Kh.Z)},Hi.getPointX=function(c){return c.Ng()},Hi.getPointY=function(c){return c.kh()},Hi.getPointZ=function(c){return c.XR()},Hi.getPointM=function(c){return c.uR()},Hi.getXMin=function(c){return c.gs()},Hi.getYMin=function(c){return c.js()},Hi.getXMax=function(c){return c.fs()},Hi.getYMax=function(c){return c.hs()},Hi.getZExtent=function(c){return c.Vg(q.Kh.Z,0)},Hi.getMExtent=function(c){return c.Vg(q.Kh.M,0)},Hi.exportPaths=function(c){var C=[],w=c.ea(),h=null,a=null,s=c.hasAttribute(q.Kh.Z),o=c.hasAttribute(q.Kh.M);s&&(h=c.vb(q.Kh.Z)),o&&(a=c.vb(q.Kh.M));for(var u=new q.h,p=0;p<w;p++){for(var f=c.Ca(p),m=c.Ka(p),v=0,_=0,M=NaN,T=NaN,A=NaN,O=NaN,R=c.ec(p),j=[],z=f;z<f+m;z++){c.D(z,u),O=A=NaN;var V=[u.x,u.y];s&&(A=h.get(z),V.push(A)),o&&(O=a.get(z),V.push(O)),z==f&&R&&(v=u.x,_=u.y,M=A,T=O),j.push(V)}!R||v==u.x&&_==u.y&&(!s||isNaN(M)&&isNaN(A)||M==A)&&(!o||isNaN(T)&&isNaN(O)||T==O)||j.push(j[0].slice(0)),C.push(j)}return C},Hi.exportPathsFlat=function(){},Hi.exportPoints=function(c){var C=c.hasAttribute(q.Kh.Z),w=c.hasAttribute(q.Kh.M),h=null,a=null;C&&(h=c.vb(q.Kh.Z)),w&&(a=c.vb(q.Kh.M));for(var s=new q.h,o=c.I(),u=[],p=0;p<o;p++){c.D(p,s);var f=[s.x,s.y];C&&f.push(h.get(p)),w&&f.push(a.get(p)),u.push(f)}return u},Hi.exportPointsFlat=function(){},Hi),Hl=new Map;return function(){function c(){}return c.buffer=ii,c.clip=k,c.contains=D,c.convexHull=we,c.crosses=L,c.cut=P,c.densify=dn,c.difference=$e,c.disjoint=ie,c.distance=N,c.equals=B,c.extendedSpatialReferenceInfo=E,c.generalize=Ss,c.geodesicArea=Xm,c.geodesicBuffer=Ze,c.geodesicDensify=Vd,c.geodesicLength=W_,c.intersect=Ge,c.intersects=W,c.isSimple=de,c.nearestCoordinate=ri,c.nearestVertex=Jn,c.nearestVertices=Yn,c.offset=ut,c.overlaps=ne,c.planarArea=gf,c.planarLength=vf,c.relate=he,c.simplify=be,c.symmetricDifference=ke,c.touches=H,c.union=Fe,c.within=Y,c.rotate=q.Dx.rotate,c.flipHorizontal=q.Dx.EQ,c.flipVertical=q.Dx.FQ,c.intersectLinesToPoints=e3,c.ExtendedParams=q.tC,c.clearDefaultSpatialReferenceTolerance=Q_,c.changeDefaultSpatialReferenceTolerance=X_,c._enableProjection=J_,c._project=Z_,c._getTransformation=Y_,c._getTransformationBySuitability=K_,c}()}var r=i();r!==void 0&&(t.exports=r)}(Vb,Vb.exports);var yU=Vb.exports;const mU=JF(yU),u_e=l_e({__proto__:null,default:mU},[yU]),h_e=Object.freeze(Object.defineProperty({__proto__:null,G:mU,g:u_e},Symbol.toStringTag,{value:"Module"})),c_e=t=>{me(()=>t.updating,e=>{e||console.log("view.stationary",t.stationary,"view.updating",t.updating,t.zoom)})},d_e=(t,e)=>{const i={popupTemplate:{content:"Popup Windows Block the view of map, so put the informaiton here..."}},r=new zG({container:"feature-node",graphic:i,map:t.map,spatialReference:t.spatialReference});t.whenLayerView(e).then(n=>{let l,d;const y=nd(async b=>{const $=(await t.hitTest(b)).results.filter(P=>P.graphic.layer.popupTemplate);if($.length==0)return;const E=$[0],k=E&&E.graphic.attributes[e.objectIdField];console.log("clcik:::",E,E.graphic.attributes.Shipper),k?d!==k&&(l==null||l.remove(),d=k,r.graphic=E.graphic,l=n.highlight(E.graphic),p_e(e,E.graphic.attributes.Shipper,t)):(l==null||l.remove(),d=r.graphic=null)});t.on("click",b=>{y(b).catch(x=>{if(!is(x))throw x})})})},p_e=(t,e,i)=>{let r=new Bi({where:"Shipper ='"+e+"'",returnGeometry:!1,outFields:["Consignee","Consignee_address"]});t.queryFeatures(r).then(function(n){console.log(n.features[0].attributes),f_e([["41.83211671;-88.00793003","36.06488;120.38042"],["36.06488;120.38042","33.84769238;-118.2197552"]],i)})},f_e=(t,e)=>{const i=[];for(const d of t){const y=[];for(const b of d){const x=b.split(";");y.push([x[1],x[0]])}i.push(y)}const r={type:"polyline",paths:i,spatialReference:{wkid:4326}},n={type:"simple-line",color:[4,90,141],width:4,style:"short-dot",cap:"round",join:"round",marker:{color:"blue",placement:"end",style:"arrow"}},l=new xs({geometry:r,symbol:n});e.graphics.removeAll(),e.graphics.add(l),console.log(i)},gU=96;function y_e(t,e){const i=e||t.extent,r=t.width,n=Bl(i&&i.spatialReference);return i&&r?i.width/r*n*hO*gU:0}function z7e(t,e){return t/(Bl(e)*hO*gU)}const m_e=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,r){const n=r.capabilities&&r.capabilities.split(",").map(W=>W.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const l=this.type,d=l!=="tile"&&!!r.supportsDynamicLayers,y=n.includes("query"),b=n.includes("map"),x=!!r.exportTilesAllowed,$=n.includes("tilemap"),E=n.includes("data"),k=l!=="tile"&&(!r.tileInfo||d),P=l!=="tile"&&(!r.tileInfo||d),D=l!=="tile",L=r.cimVersion&&v2.parse(r.cimVersion),N=(L==null?void 0:L.since(1,4))??!1,B=(L==null?void 0:L.since(2,0))??!1;return{operations:{supportsExportMap:b,supportsExportTiles:x,supportsIdentify:y,supportsQuery:E,supportsTileMap:$},exportMap:b?{supportsArcadeExpressionForLabeling:N,supportsSublayersChanges:D,supportsDynamicLayers:d,supportsSublayerVisibility:k,supportsSublayerDefinitionExpression:P,supportsCIMSymbols:B}:null,exportTiles:x?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let n=r.currentVersion;return n||(n=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchRelatedService(i){const r=this.portalItem;if(!r||!Hk(r))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(l=>l.find(d=>d.type==="Feature Service")??null,()=>null));const n=await this._relatedFeatureServicePromise;return ai(i),n?{itemId:n.id,url:n.url}:null}async fetchSublayerInfo(i,r){const{source:n}=i;if(this!=null&&this.portalItem&&this.type==="tile"&&(n==null?void 0:n.type)==="map-layer"&&Hk(this.portalItem)&&i.originIdOf("url")<Le.SERVICE){const y=await this.fetchRelatedService(r);y&&(i.url=Ll(y.url,n.mapLayerId.toString()),i.layerItemId=y.itemId)}const{url:l}=i;let d;if(n.type==="data-layer")d=(await Wt(l,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...r})).data;else if(l&&i.originIdOf("url")>Le.SERVICE)try{d=(await this._fetchAllLayersAndTablesFromService(l)).get(n.mapLayerId)}catch{}else{let y=i.id;(n==null?void 0:n.type)==="map-layer"&&(y=n.mapLayerId);try{d=(await this.fetchAllLayersAndTables(r)).get(y)}catch{}}return d}async fetchAllLayersAndTables(i){var r;return this._fetchAllLayersAndTablesFromService((r=this.parsedUrl)==null?void 0:r.path,i)}async _fetchAllLayersAndTablesFromService(i,r){await this.load(r),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const n=Nd(i),l=cM(this._allLayersAndTablesMap,n==null?void 0:n.url.path,()=>Wt(Ll(n==null?void 0:n.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(y=>{const b=new Map;for(const x of y.data.layers)b.set(x.id,x);return{result:b}},y=>({error:y}))),d=await l;if(ai(r),"result"in d)return d.result;throw d.error}};return g([S({readOnly:!0})],e.prototype,"capabilities",void 0),g([Se("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],e.prototype,"readCapabilities",null),g([S({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),g([S({type:Nt})],e.prototype,"fullExtent",void 0),g([S(tG)],e.prototype,"id",void 0),g([S({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),g([S(z_)],e.prototype,"popupEnabled",void 0),g([S({type:dt})],e.prototype,"spatialReference",void 0),g([S({readOnly:!0})],e.prototype,"version",void 0),g([Se("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=g([J("esri.layers.mixins.ArcGISMapService")],e),e};async function g_e(t,e,i){const r=zd(t);return Yfe(r,Bi.from(e),{...i}).then(n=>n.data.count)}async function v_e(t,e,i){const r=zd(t);return Kfe(r,Bi.from(e),{...i}).then(n=>({count:n.data.count,extent:Nt.fromJSON(n.data.extent)}))}async function b_e(t,e,i){const r=zd(t);return Jfe(r,Bi.from(e),{...i}).then(n=>n.data.objectIds)}function w_e(t,e){return e}function hT(t,e,i,r){switch(i){case 0:return ym(t,e+r,0);case 1:return t.originPosition==="lowerLeft"?ym(t,e+r,1):S_e(t,e+r,1)}}function vU(t,e,i,r){return i===2?ym(t,e,2):hT(t,e,i,r)}function __e(t,e,i,r){return i===2?ym(t,e,3):hT(t,e,i,r)}function x_e(t,e,i,r){return i===3?ym(t,e,3):vU(t,e,i,r)}function ym({translate:t,scale:e},i,r){return t[r]+i*e[r]}function S_e({translate:t,scale:e},i,r){return t[r]-i*e[r]}let M_e=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=w_e,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=C7(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(i!=null)for(const r of e.features)i(r.geometry)}createSpatialReference(){return{}}addField(e,i){const r=e.fields;Pd(r),r.push(i);const n=r.map(l=>l.name);this._attributesConstructor=function(){for(const l of n)this[l]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,n)=>this.addCoordinatePoint(i,r,n),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,n)=>this._addCoordinatePolygon(i,r,n),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,n)=>this._addCoordinatePolyline(i,r,n),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,n)=>this._addCoordinateMultipoint(i,r,n),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:r,queryGeometryType:n}=i,l=zS(r.clone(),r,!1,!1,this._transform),d=RV(l,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...d}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,r){const n=fr(this._transform,"transform");switch(i=this._applyTransform(n,i,r,0),r){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const n=fr(this._transform,"transform");return this._applyTransform(n,e,i,r)}_addCoordinatePolyline(e,i,r){this._dehydratedAddPointsCoordinate(e.paths,i,r)}_addCoordinatePolygon(e,i,r){this._dehydratedAddPointsCoordinate(e.rings,i,r)}_addCoordinateMultipoint(e,i,r){r===0&&e.points.push([]);const n=this._transformPathLikeValue(i,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,r){r===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(i,r),l=e[e.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),l.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:i,hasM:r}=e;return i&&r?x_e:i?vU:r?__e:hT}};async function $_e(t,e,i){const r=zd(t),n={...i},l=Bi.from(e),d=!l.quantizationParameters,{data:y}=await Hfe(r,l,new M_e({sourceSpatialReference:l.sourceSpatialReference,applyTransform:d}),n);return y}let kn=class extends Be{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return Ui(this.url)}async execute(t,e){const i=await this.executeJSON(t,e);return this.featureSetFromJSON(t,i,e)}async executeJSON(t,e){var y;const i=this._normalizeQuery(t),r=((y=t.outStatistics)==null?void 0:y[0])!=null,n=ce("featurelayer-pbf-statistics"),l=!r||n;let d;if(this.pbfSupported&&l)try{d=await $_e(this.url,i,e)}catch(b){if(b.name!=="query:parsing-pbf")throw b;this.pbfSupported=!1}return this.pbfSupported&&l||(d=await xV(this.url,i,e)),this._normalizeFields(d.fields),d}async featureSetFromJSON(t,e,i){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!e.features)return qm.fromJSON(e);const{meshFeatureSetFromJSON:r}=await _a(le(()=>import("./meshFeatureSet-894c0d70.js").then(n=>n.b),["assets/meshFeatureSet-894c0d70.js","assets/georeference-78bb382a.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-9b71f651.js","assets/MeshLocalVertexSpace-2ae36bea.js","assets/MeshGeoreferencedRelativeVertexSpace-627d89e1.js","assets/quat-b7a99513.js","assets/quatf64-3363c48e.js","assets/vec32-c6c88e0a.js","assets/BufferView-fcc17949.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-19a5cba4.js","assets/Indices-cca0929a.js","assets/deduplicate-b69c0974.js","assets/External-9e088e05.js"]),i);return r(t,this.infoFor3D,e)}executeForCount(t,e){return g_e(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return v_e(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return b_e(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:i},{executeRelationshipQuery:r}]=await _a(Promise.all([le(()=>Promise.resolve().then(()=>kA),void 0),le(()=>import("./executeRelationshipQuery-12bb49a5.js"),[])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),r(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:i},{executeRelationshipQueryForCount:r}]=await _a(Promise.all([le(()=>Promise.resolve().then(()=>kA),void 0),le(()=>import("./executeRelationshipQuery-12bb49a5.js"),[])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),r(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:i,fetchAttachments:r,processAttachmentQueryResult:n}=await _a(le(()=>import("./queryAttachments-d35e716c.js"),[]),e),l=zd(this.url);return n(l,await(this.queryAttachmentsSupported?i(l,t,e):r(l,t,e)))}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:i}=await _a(le(()=>import("./executeTopFeaturesQuery-0e4bafb9.js"),["assets/executeTopFeaturesQuery-0e4bafb9.js","assets/queryTopFeatures-bd83ca7e.js"]),e);return i(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:i}=await _a(le(()=>import("./executeForTopIds-da10bc00.js"),["assets/executeForTopIds-da10bc00.js","assets/queryTopFeatures-bd83ca7e.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:i}=await _a(le(()=>import("./executeForTopExtents-e13184ec.js"),["assets/executeForTopExtents-e13184ec.js","assets/queryTopFeatures-bd83ca7e.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:i}=await _a(le(()=>import("./executeForTopCount-96e3f46a.js"),["assets/executeForTopCount-96e3f46a.js","assets/queryTopFeatures-bd83ca7e.js"]),e);return i(this.parsedUrl,t,e)}_normalizeQuery(t){let e=Bi.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?ys.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:r,queryFormats:n}=i,l=qx("model/gltf-binary",r)??Hx("glb",r),d=qx("model/gltf+json",r)??Hx("gtlf",r);for(const y of n){if(y===l){e.formatOf3DObjects=y;break}y!==d||e.formatOf3DObjects||(e.formatOf3DObjects=y)}if(!e.formatOf3DObjects)throw new se("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(e.outFields==null||!e.outFields.includes("*")){e=e===t?e.clone():e,e.outFields==null&&(e.outFields=[]);const{originX:y,originY:b,originZ:x,translationX:$,translationY:E,translationZ:k,scaleX:P,scaleY:D,scaleZ:L,rotationX:N,rotationY:B,rotationZ:W,rotationDeg:H}=i.transformFieldRoles;e.outFields.push(y,b,x,$,E,k,P,D,L,N,B,W,H)}}return e}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const e of t){const i=this.fieldsIndex.get(e.name);i&&Object.assign(e,i.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};g([S({type:ys})],kn.prototype,"dynamicDataSource",void 0),g([S()],kn.prototype,"fieldsIndex",void 0),g([S()],kn.prototype,"gdbVersion",void 0),g([S()],kn.prototype,"infoFor3D",void 0),g([S({readOnly:!0})],kn.prototype,"parsedUrl",null),g([S()],kn.prototype,"pbfSupported",void 0),g([S()],kn.prototype,"queryAttachmentsSupported",void 0),g([S()],kn.prototype,"sourceSpatialReference",void 0),g([S({type:String})],kn.prototype,"url",void 0),kn=g([J("esri.tasks.QueryTask")],kn);const T_e=kn;var Bb;function ox(t){return t!=null&&t.type==="esriSMS"}function ax(t,e,i){var n;const r=this.originIdOf(e)>=vs(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&((n=i.layer)==null?void 0:n.type)==="map-image"&&(i.writeSublayerStructure||r)}}function lx(t,e,i){var r;return{enabled:!!i&&((r=i.layer)==null?void 0:r.type)==="tile"&&(i.origin&&this.originIdOf(e)>=vs(i.origin)||this._isOverridden(e))}}function gn(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function mv(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(e)>=vs(i.origin))}}let I_e=0;const Nc=new Set;Nc.add("layer"),Nc.add("parent"),Nc.add("loaded"),Nc.add("loadStatus"),Nc.add("loadError"),Nc.add("loadWarnings");let it=Bb=class extends Xo(N_(Oh(qo))){constructor(t){super(t),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(t){return this.addResolvingPromise((async()=>{const{layer:e,url:i}=this;if(!e&&!i)throw new se("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const r=e?await e.fetchSublayerInfo(this,t):(await Wt(i,{responseType:"json",query:{f:"json"},...t})).data;r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(t,e){e=e.layerDefinition||e;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:n},data:{supportsAttachment:l}}=K$(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:l},query:{supportsFormatPBF:n}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get fieldsIndex(){return new z$(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,e){if((e=e.layerDefinition||e).globalIdField)return e.globalIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??I_e++}set id(t){var e,i,r;this._get("id")!==t&&(((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.exportMap)==null?void 0:r.supportsDynamicLayers)!==!1?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,e,i,r){t&&t.length&&(e.layerDefinition={drawingInfo:{labelingInfo:t.map(n=>n.write({},r))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(e=>e.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,e){return e.minScale||e.layerDefinition&&e.layerDefinition.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,e){return e.maxScale||e.layerDefinition&&e.layerDefinition.maxScale||0}readObjectIdFieldFromService(t,e){if((e=e.layerDefinition||e).objectIdField)return e.objectIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,e){var r;const i=e.layerDefinition;return 1-.01*(((i==null?void 0:i.transparency)!=null?i.transparency:(r=i==null?void 0:i.drawingInfo)==null?void 0:r.transparency)??0)}writeOpacity(t,e,i,r){e.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,e){this.parent&&this.parent!==this.layer?e.parentLayerId=L2(this.parent.id):e.parentLayerId=-1}get queryTask(){var d;if(!this.layer)return null;const{spatialReference:t}=this.layer,e="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:r}=this,n=ce("featurelayer-pbf")&&(i==null?void 0:i.query.supportsFormatPBF),l=((d=i==null?void 0:i.operations)==null?void 0:d.supportsQueryAttachments)??!1;return new T_e({url:this.url,pbfSupported:n,fieldsIndex:r,gdbVersion:e,sourceSpatialReference:t,queryAttachmentsSupported:l})}set renderer(t){if(t){for(const e of t.getSymbols())if(Fl(e)){ge.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new _l({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return zi(ze.ofType(Bb),t)}writeSublayers(t,e,i){var r;(r=this.sublayers)!=null&&r.length&&(e[i]=this.sublayers.map(n=>n.id).toArray().reverse())}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){var r;const t=((r=this.layer)==null?void 0:r.parsedUrl)??this._lastParsedUrl,e=this.source;if(!t)return null;if(this._lastParsedUrl=t,(e==null?void 0:e.type)==="map-layer")return`${t.path}/${e.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${T0(i)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,e,i,r){e[i]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=mr(this),e=new Bb;return mr(e).store=t.clone(Nc),this.commitProperty("url"),e._lastParsedUrl=this._lastParsedUrl,e}createPopupTemplate(t){return LG(this,t)}createQuery(){return new Bi({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var r;if(this.hasOwnProperty("sublayers"))return null;const{layer:t}=this,e=t==null?void 0:t.parsedUrl,i=new(await le(()=>Promise.resolve().then(()=>xwe),void 0)).default({url:e==null?void 0:e.path});return e&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),(t==null?void 0:t.refreshInterval)!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=ae(this.floorInfo)),this.originIdOf("labelingInfo")>Le.SERVICE&&(i.labelingInfo=ae(this.labelingInfo)),this.originIdOf("labelsVisible")>Le.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>Le.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>Le.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>Le.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>Le.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>Le.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>Le.DEFAULTS&&(i.popupTemplate=ae(this.popupTemplate)),this.originIdOf("renderer")>Le.SERVICE&&(i.renderer=ae(this.renderer)),((r=this.source)==null?void 0:r.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>Le.DEFAULTS&&(i.title=this.title),(t==null?void 0:t.type)==="map-image"&&t.originIdOf("customParameters")>Le.DEFAULTS&&(i.customParameters=t.customParameters),(t==null?void 0:t.type)==="tile"&&t.originIdOf("customParameters")>Le.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let n=null;return i==null||i.some(l=>{const{id:d}=l;return d!=null&&(d.toString()===r.toString()&&(n=l),!!n)}),n}getFieldDomain(t,e){const i=e&&e.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[t];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(t)}async queryAttachments(t,e){var $,E;await this.load(),t=l2.from(t);const i=this.capabilities;if(!(($=i==null?void 0:i.data)!=null&&$.supportsAttachment))throw new se("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:n,globalIds:l,num:d,size:y,start:b,where:x}=t;if(!((E=i==null?void 0:i.operations)!=null&&E.supportsQueryAttachments)&&((r==null?void 0:r.length)>0||(l==null?void 0:l.length)>0||(y==null?void 0:y.length)>0||d||b||x))throw new se("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(n!=null&&n.length||l!=null&&l.length||x))throw new se("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return this.queryTask.executeAttachmentQuery(t,e)}async queryFeatures(t=this.createQuery(),e){var r,n;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new se("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new se("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(t,{...e,query:{...(r=this.layer)==null?void 0:r.customParameters,token:(n=this.layer)==null?void 0:n.apiKey}});if(i!=null&&i.features)for(const l of i.features)l.sourceLayer=this;return i}toExportImageJSON(t){var l;const e={id:this.id,source:((l=this.source)==null?void 0:l.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=q$(t,this.definitionExpression);i!=null&&(e.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((d,y)=>(d[y]=this.originIdOf(y),d),{});if(Object.keys(r).some(d=>r[d]>Le.SERVICE)){const d=e.drawingInfo={};if(r.renderer>Le.SERVICE&&(d.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>Le.SERVICE&&(d.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>Le.SERVICE){!this.loaded&&this.labelingInfo.some(b=>!b.labelPlacement)&&ge.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let y=this.labelingInfo;this.geometryType!=null&&(y=hwe(this.labelingInfo,vw.toJSON(this.geometryType))),d.labelingInfo=y.filter(b=>b.labelPlacement).map(b=>b.toJSON({origin:"service",layer:this.layer})),d.showLabels=!0}r.opacity>Le.SERVICE&&(d.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(d.renderer)}return e}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,e=>{e.color||e.style!=="esriSMSX"&&e.style!=="esriSMSCross"||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,e){if(t){const i=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const r of i)ox(r.symbol)&&e(r.symbol);"symbol"in t&&ox(t.symbol)&&e(t.symbol),"defaultSymbol"in t&&ox(t.defaultSymbol)&&e(t.defaultSymbol)}}_setAndNotifyLayer(t,e){var y,b,x,$;const i=this.layer,r=this._get(t);let n,l;switch(t){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",l="supportsModification"}const d=mr(this).getDefaultOrigin();if(d!=="service"){if(n&&((x=(b=(y=this.layer)==null?void 0:y.capabilities)==null?void 0:b.exportMap)==null?void 0:x[n])===!1)return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${n}'`);if(l&&(($=this.capabilities)==null?void 0:$.exportMap[l])===!1)return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${l}'`)}t!=="source"||this.loadStatus==="not-loaded"?(this._set(t,e),d!=="service"&&r!==e&&i&&i.emit&&i.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,e){e&&(e.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),t&&(t.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),t.on("before-changes",i=>{var n,l,d;const r=(d=(l=(n=this.layer)==null?void 0:n.capabilities)==null?void 0:l.exportMap)==null?void 0:d.supportsSublayersChanges;r==null||r||(ge.getLogger(this).error(new se("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(t,e){const{layer:i,declaredClass:r}=this;ge.getLogger(r).error(new se("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${i==null?void 0:i.id}'`,{reason:e,sublayer:this,layer:i}))}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}};it.test={isMapImageLayerOverridePolicy:t=>t===gn||t===ax,isTileImageLayerOverridePolicy:t=>t===lx},g([S({readOnly:!0})],it.prototype,"capabilities",void 0),g([Se("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],it.prototype,"readCapabilities",null),g([S()],it.prototype,"defaultPopupTemplate",null),g([S({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:ax}}})],it.prototype,"definitionExpression",null),g([S({readOnly:!0})],it.prototype,"effectiveScaleRange",null),g([S({type:[E_],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],it.prototype,"fields",void 0),g([S({readOnly:!0})],it.prototype,"fieldsIndex",null),g([S({type:nG,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:ax},origins:{"web-scene":{read:!1,write:!1}}}})],it.prototype,"floorInfo",null),g([S({type:Nt,json:{read:{source:"layerDefinition.extent"}}})],it.prototype,"fullExtent",void 0),g([S({type:vw.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:vw.read}}}}})],it.prototype,"geometryType",void 0),g([S({type:String})],it.prototype,"globalIdField",void 0),g([Se("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],it.prototype,"readGlobalIdFieldFromService",null),g([S({type:Ct,json:{write:{ignoreOrigin:!0}}})],it.prototype,"id",null),g([S({value:null,type:[Km],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:gn}}})],it.prototype,"labelingInfo",null),g([Ae("labelingInfo")],it.prototype,"writeLabelingInfo",null),g([S({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:gn}}})],it.prototype,"labelsVisible",null),g([S({value:null})],it.prototype,"layer",null),g([S({type:String,json:{write:{overridePolicy:lx}}})],it.prototype,"layerItemId",void 0),g([S({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:mv}}})],it.prototype,"legendEnabled",void 0),g([S({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],it.prototype,"listMode",null),g([S({type:Number,value:0,json:{write:{overridePolicy:gn}}})],it.prototype,"minScale",null),g([Se("minScale",["minScale","layerDefinition.minScale"])],it.prototype,"readMinScale",null),g([S({type:Number,value:0,json:{write:{overridePolicy:gn}}})],it.prototype,"maxScale",null),g([Se("maxScale",["maxScale","layerDefinition.maxScale"])],it.prototype,"readMaxScale",null),g([S({type:String})],it.prototype,"objectIdField",void 0),g([Se("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],it.prototype,"readObjectIdFieldFromService",null),g([S({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:gn}}})],it.prototype,"opacity",null),g([Se("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],it.prototype,"readOpacity",null),g([Ae("opacity")],it.prototype,"writeOpacity",null),g([S({json:{type:Ct,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:gn}}})],it.prototype,"parent",void 0),g([Ae("parent")],it.prototype,"writeParent",null),g([S({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:mv,writer(t,e,i){e[i]=!t}}}})],it.prototype,"popupEnabled",void 0),g([S({type:rf,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:mv}}})],it.prototype,"popupTemplate",void 0),g([S({readOnly:!0})],it.prototype,"queryTask",null),g([S({types:Jm,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:gn},origins:{"web-scene":{types:jB,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:gn}}}}})],it.prototype,"renderer",null),g([S({types:{key:"type",base:null,typeMap:{"data-layer":ys,"map-layer":_l}},cast(t){if(t){if("mapLayerId"in t)return $0(_l,t);if("dataSource"in t)return $0(ys,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:gn}}})],it.prototype,"source",null),g([S()],it.prototype,"sourceJSON",void 0),g([S({value:null,json:{type:[Ct],write:{target:"subLayerIds",allowNull:!0,overridePolicy:gn}}})],it.prototype,"sublayers",null),g([xt("sublayers")],it.prototype,"castSublayers",null),g([Ae("sublayers")],it.prototype,"writeSublayers",null),g([S({type:String,json:{name:"name",write:{overridePolicy:mv}}})],it.prototype,"title",void 0),g([S({type:String})],it.prototype,"typeIdField",void 0),g([Se("typeIdField",["layerDefinition.typeIdField"])],it.prototype,"readTypeIdField",null),g([S({type:[iT],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],it.prototype,"types",void 0),g([S({type:String,json:{name:"layerUrl",write:{overridePolicy:lx}}})],it.prototype,"url",null),g([S({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:gn}}})],it.prototype,"visible",null),g([Ae("visible")],it.prototype,"writeVisible",null),it=Bb=g([J("esri.layers.support.Sublayer")],it);const H_=it;function IP(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!bU(t,e)}function E_e(t,e,i){return!!t.some(r=>{const n=r.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i))||r.originIdOf("renderer")>Le.SERVICE||r.originIdOf("labelingInfo")>Le.SERVICE||r.originIdOf("opacity")>Le.SERVICE||r.originIdOf("labelsVisible")>Le.SERVICE})||!bU(t,e)}function bU(t,e){if(!t||!t.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).map(l=>l.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:l}of t){for(;r<n&&i[r]!==l;)r++;if(r>=n)return!1}return!0}function A_e(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition&&e.layerDefinition.minScale!=null)}const k_e=ge.getLogger("esri.layers.TileLayer");function P_e(t,e){const i=[],r={};return t&&t.forEach(n=>{const l=new H_;if(l.read(n,e),r[l.id]=l,n.parentLayerId!=null&&n.parentLayerId!==-1){const d=r[n.parentLayerId];d.sublayers||(d.sublayers=[]),d.sublayers.unshift(l)}else i.unshift(l)}),i}const ux=ze.ofType(H_);function wU(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&wU(i.sublayers,e)})}const C_e=t=>{let e=class extends t{constructor(...i){super(...i),this.allSublayers=new k0({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[Le.SERVICE]:{},[Le.PORTAL_ITEM]:{},[Le.WEB_SCENE]:{},[Le.WEB_MAP]:{}},this.addHandles(me(()=>this.sublayers,(r,n)=>this._handleSublayersChange(r,n),Rd))}destroy(){this.allSublayers.destroy()}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:n}=this,l=vs(r.origin);if(l<Le.SERVICE||(n[l]={context:r,visibleLayers:i.visibleLayers||n[l].visibleLayers,layers:i.layers||n[l].layers},l>Le.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:d,origin:y}=this.createSublayersForOrigin("web-document"),b=mr(this);b.setDefaultOrigin(y),this._set("sublayers",new ux(d)),b.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=vs(i==="web-document"?"web-map":i);let n=Le.SERVICE,l=this.sublayersSourceJSON[Le.SERVICE].layers,d=this.sublayersSourceJSON[Le.SERVICE].context,y=null;const b=[Le.PORTAL_ITEM,Le.WEB_SCENE,Le.WEB_MAP].filter(D=>D<=r);for(const D of b){const L=this.sublayersSourceJSON[D];A_e(L.layers)&&(n=D,l=L.layers,d=L.context,L.visibleLayers&&(y={visibleLayers:L.visibleLayers,context:L.context}))}const x=[Le.PORTAL_ITEM,Le.WEB_SCENE,Le.WEB_MAP].filter(D=>D>n&&D<=r);let $=null;for(const D of x){const{layers:L,visibleLayers:N,context:B}=this.sublayersSourceJSON[D];L&&($={layers:L,context:B}),N&&(y={visibleLayers:N,context:B})}const E=P_e(l,d),k=new Map,P=new Set;if($)for(const D of $.layers)k.set(D.id,D);if(y!=null&&y.visibleLayers)for(const D of y.visibleLayers)P.add(D);return wU(E,D=>{$&&D.read(k.get(D.id),$.context),y&&D.read({defaultVisibility:P.has(D.id)},y.context)}),{origin:Ny(n),sublayers:new ux({items:E})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(n=>{n.parent=null,n.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(n=>{n.parent=this,n.layer=this}),this.addHandles([i.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),i.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",n=>{k_e.error(new se("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return g([S({readOnly:!0})],e.prototype,"allSublayers",void 0),g([S({readOnly:!0,type:ze.ofType(H_)})],e.prototype,"serviceSublayers",void 0),g([S({value:null,type:ux,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0),g([S({readOnly:!0})],e.prototype,"sublayersSourceJSON",void 0),e=g([J("esri.layers.mixins.SublayersOwner")],e),e};function B7e(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?_U(t.view.floors,e.floorInfo.floorField):null}function EP(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?_U(t,e.floorInfo.floorField):null}function _U(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}const O_e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Ys=class extends Xo(Be){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=EP(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&E_e(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(O_e[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||e&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,l)=>{const d=EP(this.floors,l),y=q$(d,l.definitionExpression);return y!=null&&(n[l.id]=y),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=l=>{const d=this.scale,y=d===0,b=l.minScale===0||d<=l.minScale,x=l.maxScale===0||d>=l.maxScale;l.visible&&(y||b&&x)&&(l.sublayers?l.sublayers.forEach(r):e.unshift(l))};i&&i.forEach(r);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((l,d)=>e[d]!==l)?e:n}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};g([S({readOnly:!0})],Ys.prototype,"dynamicLayers",null),g([S()],Ys.prototype,"floors",void 0),g([S({readOnly:!0})],Ys.prototype,"hasDynamicLayers",null),g([S()],Ys.prototype,"layer",null),g([S({readOnly:!0})],Ys.prototype,"layers",null),g([S({readOnly:!0})],Ys.prototype,"layerDefs",null),g([S({type:Number})],Ys.prototype,"scale",void 0),g([S(Eve)],Ys.prototype,"timeExtent",void 0),g([S({readOnly:!0})],Ys.prototype,"version",null),g([S({readOnly:!0})],Ys.prototype,"visibleSublayers",null),Ys=g([J("esri.layers.mixins.ExportImageParameters")],Ys);async function L_e(t,e,i){let r;try{r=await createImageBitmap(t)}catch(n){throw new se("request:server",`Unable to load ${e}`,{url:e,error:n})}return ai(i),r}async function U7e(t,e,i,r,n){let l;try{l=await createImageBitmap(t)}catch(d){throw new se("request:server",`Unable to load tile ${e}/${i}/${r}`,{error:d,level:e,row:i,col:r})}return ai(n),l}let Ei=class extends JB(CG(AG(C_e(m_e(WB(_G(MG(N_(EG(HB(YB(Xo(Jy))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(On).then(()=>this._fetchService(e))),Promise.resolve(this)}readImageFormat(t,e){const i=e.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(t,e,i,r){var x;if(!this.loaded||!t)return;const n=t.slice().reverse().flatten(({sublayers:$})=>$&&$.toArray().reverse()).toArray();let l=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((x=this.capabilities.exportMap)!=null&&x.supportsDynamicLayers)){const $=vs(r.origin);if($===Le.PORTAL_ITEM){const E=this.createSublayersForOrigin("service").sublayers;l=IP(n,E,Le.SERVICE)}else if($>Le.PORTAL_ITEM){const E=this.createSublayersForOrigin("portal-item");l=IP(n,E.sublayers,vs(E.origin))}}const d=[],y={writeSublayerStructure:l,...r};let b=l;n.forEach($=>{const E=$.write({},y);d.push(E),b=b||$.originOf("visible")==="user"}),d.some($=>Object.keys($).length>1)&&(e.layers=d),b&&(e.visibleLayers=n.filter($=>$.visible).map($=>$.id))}createExportImageParameters(t,e,i,r){const n=r&&r.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const l=new Ys({layer:this,floors:r==null?void 0:r.floors,scale:y_e({extent:t,width:e})*n}),d=l.toJSON();l.destroy();const y=!r||!r.rotation||this.version<10.3?{}:{rotation:-r.rotation},b=t&&t.spatialReference,x=b.wkid||JSON.stringify(b.toJSON());d.dpi*=n;const $={};if(r!=null&&r.timeExtent){const{start:E,end:k}=r.timeExtent.toJSON();$.time=E&&k&&E===k?""+E:`${E??"null"},${k??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&($.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:x,imageSR:x,size:e+","+i,...d,...y,...$}}async fetchImage(t,e,i,r){const{data:n}=await this._fetchImage("image",t,e,i,r);return n}async fetchImageBitmap(t,e,i,r){const{data:n,url:l}=await this._fetchImage("blob",t,e,i,r);return L_e(n,l,r==null?void 0:r.signal)}async fetchRecomputedExtents(t={}){const e={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await Wt(this.url,e),{extent:r,fullExtent:n,timeExtent:l}=i,d=r||n;return{fullExtent:d&&Nt.fromJSON(d),timeExtent:l&&Zo.fromJSON({start:l[0],end:l[1]})}}loadAll(){return bM(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return OG(this,t)}async _fetchImage(t,e,i,r,n){var y,b,x;const l={responseType:t,signal:(n==null?void 0:n.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,i,r,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},d=this.parsedUrl.path+"/export";if(((y=l.query)==null?void 0:y.dynamicLayers)!=null&&!((x=(b=this.capabilities)==null?void 0:b.exportMap)!=null&&x.supportsDynamicLayers))throw new se("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:l.query});try{const{data:$}=await Wt(d,l);return{data:$,url:d}}catch($){throw is($)?$:new se("mapimagelayer:image-fetch-error",`Unable to load image: ${d}`,{error:$})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:e,ssl:i}=await Wt(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=e,this.read(e,{origin:"service",url:this.parsedUrl})}};g([S({type:Ih})],Ei.prototype,"dateFieldsTimeReference",void 0),g([S({type:Boolean})],Ei.prototype,"datesInUnknownTimezone",void 0),g([S()],Ei.prototype,"dpi",void 0),g([S()],Ei.prototype,"gdbVersion",void 0),g([S()],Ei.prototype,"imageFormat",void 0),g([Se("imageFormat",["supportedImageFormatTypes"])],Ei.prototype,"readImageFormat",null),g([S({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Ei.prototype,"imageMaxHeight",void 0),g([S({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Ei.prototype,"imageMaxWidth",void 0),g([S()],Ei.prototype,"imageTransparency",void 0),g([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ei.prototype,"isReference",void 0),g([S({json:{read:!1,write:!1}})],Ei.prototype,"labelsVisible",void 0),g([S({type:["ArcGISMapServiceLayer"]})],Ei.prototype,"operationalLayerType",void 0),g([S({json:{read:!1,write:!1}})],Ei.prototype,"popupEnabled",void 0),g([S({type:Ih})],Ei.prototype,"preferredTimeReference",void 0),g([S()],Ei.prototype,"sourceJSON",void 0),g([S({json:{write:{ignoreOrigin:!0}}})],Ei.prototype,"sublayers",void 0),g([Ae("sublayers",{layers:{type:[H_]},visibleLayers:{type:[Ct]}})],Ei.prototype,"writeSublayers",null),g([S({type:["show","hide","hide-children"]})],Ei.prototype,"listMode",void 0),g([S({json:{read:!1},readOnly:!0,value:"map-image"})],Ei.prototype,"type",void 0),g([S(QB)],Ei.prototype,"url",void 0),Ei=g([J("esri.layers.MapImageLayer")],Ei);const qp=Ei,q7e=Object.freeze(Object.defineProperty({__proto__:null,default:qp},Symbol.toStringTag,{value:"Module"}));let Ma=class extends qo{constructor(e){super(e),this.type="csv",this.refresh=nd(async i=>{await this.load();const{extent:r,timeExtent:n}=await this._connection.invoke("refresh",i);return r&&(this.sourceJSON.extent=r),n&&(this.sourceJSON.timeInfo.timeExtent=[n.start,n.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return qm.fromJSON(r)}async queryFeaturesJSON(e,i={}){return await this.load(i),this._connection.invoke("queryFeatures",e?e.toJSON():null,i)}async queryFeatureCount(e,i={}){return await this.load(i),this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i)}async queryObjectIds(e,i={}){return await this.load(i),this._connection.invoke("queryObjectIds",e?e.toJSON():null,i)}async queryExtent(e,i={}){await this.load(i);const r=await this._connection.invoke("queryExtent",e?e.toJSON():null,i);return{count:r.count,extent:Nt.fromJSON(r.extent)}}async querySnapping(e,i={}){return await this.load(i),this._connection.invoke("querySnapping",e,i)}async _startWorker(e){this._connection=await FR("CSVSourceWorker",{strategy:ce("feature-layers-workers")?"dedicated":"local",signal:e});const{url:i,delimiter:r,fields:n,latitudeField:l,longitudeField:d,spatialReference:y,timeInfo:b}=this.loadOptions,x=await this._connection.invoke("load",{url:i,customParameters:this.customParameters,parsingOptions:{delimiter:r,fields:n==null?void 0:n.map($=>$.toJSON()),latitudeField:l,longitudeField:d,spatialReference:y==null?void 0:y.toJSON(),timeInfo:b==null?void 0:b.toJSON()}},{signal:e});this.locationInfo=x.locationInfo,this.sourceJSON=x.layerDefinition,this.delimiter=x.delimiter}};g([S()],Ma.prototype,"type",void 0),g([S()],Ma.prototype,"loadOptions",void 0),g([S()],Ma.prototype,"customParameters",void 0),g([S()],Ma.prototype,"locationInfo",void 0),g([S()],Ma.prototype,"sourceJSON",void 0),g([S()],Ma.prototype,"delimiter",void 0),Ma=g([J("esri.layers.graphics.sources.CSVSource")],Ma);const D_e={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function W7e(t){return{renderer:{type:"simple",symbol:t==="esriGeometryPoint"||t==="esriGeometryMultipoint"?hG:t==="esriGeometryPolyline"?cG:dG}}}const R_e=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let j_e=1;function J7e(t,e){if(ce("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let i=`this.${e} = null;`;for(const n in t)i+=`this${R_e.test(n)?`.${n}`:`["${n}"]`} = ${JSON.stringify(t[n])};`;const r=new Function(`
      return class AttributesClass$${j_e++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[e]:null,...t})}}function Y7e(t={}){return[{name:"New Feature",description:"",prototype:{attributes:ae(t)}}]}function F_e(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:D_e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}function AP(t,e){throw new se(e,`CSVLayer (title: ${t.title}, id: ${t.id}) cannot be saved to a portal item`)}let cr=class extends B_{constructor(...t){super(...t),this.geometryType="point",this.capabilities=F_e(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=dt.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null,i=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},t).catch(On).then(async()=>this.initLayerProperties(await this.createGraphicsSource(e)));return this.addResolvingPromise(i),Promise.resolve(this)}get isTable(){return this.loaded&&this.geometryType==null}readWebMapLabelsVisible(t,e){return e.showLabels!=null?e.showLabels:!!(e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.labelingInfo)}set url(t){if(!t)return void this._set("url",t);const e=Ui(t);this._set("url",e.path),e.query&&(this.customParameters={...this.customParameters,...e.query})}async createGraphicsSource(t){const e=new Ma({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField??void 0,longitudeField:this.longitudeField??void 0,spatialReference:this.spatialReference??void 0,timeInfo:this.timeInfo??void 0,url:this.url},customParameters:this.customParameters??void 0});return this._set("source",e),await e.load({signal:t}),this.read({locationInfo:e.locationInfo,columnDelimiter:e.delimiter},{origin:"service",url:this.parsedUrl}),e}queryFeatures(t,e){return this.load().then(()=>this.source.queryFeatures(Bi.from(t)||this.createQuery())).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(t,e){return this.load().then(()=>this.source.queryObjectIds(Bi.from(t)||this.createQuery()))}queryFeatureCount(t,e){return this.load().then(()=>this.source.queryFeatureCount(Bi.from(t)||this.createQuery()))}queryExtent(t,e){return this.load().then(()=>this.source.queryExtent(Bi.from(t)||this.createQuery()))}read(t,e){super.read(t,e),e&&e.origin==="service"&&this.revert(["latitudeField","longitudeField"],"service")}write(t,e){return super.write(t,{...e,writeLayerSchema:!0})}clone(){throw new se("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}async save(t){return AP(this,"csv-layer:save")}async saveAs(t,e){return AP(this,"csv-layer:save-as")}async hasDataChanged(){try{const{dataChanged:t,updates:e}=await this.source.refresh(this.customParameters);return e!=null&&this.read(e,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),t}catch{}return!1}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};g([S({readOnly:!0,json:{read:!1,write:!1}})],cr.prototype,"capabilities",void 0),g([S({type:[","," ",";","|","	"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],cr.prototype,"delimiter",void 0),g([S({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],cr.prototype,"editingEnabled",void 0),g([S({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],cr.prototype,"fields",void 0),g([S({type:Boolean,readOnly:!0})],cr.prototype,"isTable",null),g([Se("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],cr.prototype,"readWebMapLabelsVisible",null),g([S({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],cr.prototype,"latitudeField",void 0),g([S({type:["show","hide"]})],cr.prototype,"listMode",void 0),g([S({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],cr.prototype,"locationType",void 0),g([S({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],cr.prototype,"longitudeField",void 0),g([S({type:["CSV"]})],cr.prototype,"operationalLayerType",void 0),g([S()],cr.prototype,"outFields",void 0),g([S({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],cr.prototype,"path",void 0),g([S({json:{read:!1},cast:null,type:Ma,readOnly:!0})],cr.prototype,"source",void 0),g([S({json:{read:!1},value:"csv",readOnly:!0})],cr.prototype,"type",void 0),g([S({json:{read:r_,write:{isRequired:!0,ignoreOrigin:!0,writer:xh}}})],cr.prototype,"url",null),cr=g([J("esri.layers.CSVLayer")],cr);const N_e=cr,K7e=Object.freeze(Object.defineProperty({__proto__:null,default:N_e},Symbol.toStringTag,{value:"Module"})),z_e={url:"https://gis.servermapcollective.com:6443/arcgis/rest/services/USAConsignee100223/MapServer",title:"USA Consignee 10/02/23",minScale:4e5,sublayers:[{id:0,visible:!0}]},V_e={url:"https://gis.servermapcollective.com:6443/arcgis/rest/services/USAShipper100223/MapServer",title:"USA Shippper 10/02/23",minScale:4e5,sublayers:[{id:0,visible:!0}]},B_e={url:"https://gis.servermapcollective.com:6443/arcgis/rest/services/USAConnectLines100223/MapServer",title:"USA ConnectLines 10/02/23",minScale:1e4,sublayers:[{id:0,visible:!0}]},G_e={url:"https://gis.servermapcollective.com:6443/arcgis/rest/services/test/srdjan_connect_line/MapServer",title:"USA ConnectLines Test",sublayers:[{id:0,visible:!1}]},U_e={url:"https://gis.servermapcollective.com:6443/arcgis/rest/services/test/srdjan_consignee/MapServer",title:"USA Consineed Test",sublayers:[{id:0,visible:!0}]},xU=new B_({url:"https://gis.servermapcollective.com:6443/arcgis/rest/services/test/srdjan_shipper/MapServer/0",outFields:["*"],popupTemplate:{title:"{Shipper_address}",content:"Shipper From<br /><br /> {Shipper_address} <br /><br />To Consignee<br /><br />{Consignee_address}"}}),q_e=()=>{new qp(z_e),new qp(V_e),new qp(B_e);const t=new qp(U_e),e=new qp(G_e);return[t,e,xU]},H_e=!0;console.warn=(t,e)=>{console.log("%c "+t+"  "+e,"color: red; font-weight:bold")};console.warn("The develop mode::",H_e);(async()=>await le(()=>Promise.resolve({}),["assets/mapfromonline-31fe072e.css"]))();const kP={zoom:3,baseMapID:"hybrid",center:[-94,41.5]};const W_e=new kL({basemap:"streets-vector",layers:q_e()}),X1=new Rce({container:"viewDiv",map:W_e,zoom:kP.zoom,center:kP.center,popupEnabled:!1,ui:{components:["attribution"]}});X1.when(()=>{const t=new Cde({view:X1});X1.ui.add(t,"top-right"),d_e(X1,xU)});c_e(X1);export{U4e as $,M0 as A,st as B,Gn as C,Ds as D,vM as E,Q3e as F,Wt as G,G4e as H,q4e as I,V4e as J,uN as K,nSe as L,q4 as M,Kue as N,Q4e as O,aSe as P,X4e as Q,tSe as R,Khe as S,K4e as T,Jhe as U,J4e as V,Y4e as W,AN as X,B4e as Y,iSe as Z,le as _,Ko as a,qW as a$,nce as a0,oce as a1,Z4e as a2,ws as a3,dwe as a4,oy as a5,ze as a6,ge as a7,lt as a8,z5e as a9,rf as aA,HMe as aB,F_ as aC,xs as aD,Go as aE,BC as aF,Rd as aG,vd as aH,Be as aI,nd as aJ,Nt as aK,Rw as aL,vl as aM,Eve as aN,Bi as aO,jF as aP,z0 as aQ,Gae as aR,Z7 as aS,Joe as aT,hae as aU,wue as aV,Lre as aW,RF as aX,CK as aY,$h as aZ,dt as a_,La as aa,Bl as ab,U5e as ac,V2 as ad,XR as ae,Nh as af,N5e as ag,Pd as ah,_a as ai,On as aj,Ore as ak,F2 as al,W2 as am,Oo as an,fZ as ao,my as ap,Aae as aq,n4e as ar,a4e as as,qi as at,is as au,Id as av,g as aw,S as ax,J as ay,qm as az,q2 as b,W9e as b$,xM as b0,zd as b1,T0 as b2,_m as b3,P2 as b4,T3e as b5,Ys as b6,J2 as b7,y_e as b8,E_e as b9,Fo as bA,MO as bB,IJ as bC,gx as bD,LS as bE,zn as bF,$i as bG,CF as bH,Ft as bI,x5e as bJ,zF as bK,Na as bL,Xo as bM,h$ as bN,fh as bO,U2 as bP,WO as bQ,ka as bR,b_ as bS,Mxe as bT,$F as bU,hF as bV,TF as bW,tae as bX,H9e as bY,dae as bZ,sm as b_,EP as ba,q$ as bb,Od as bc,bh as bd,Zo as be,ve as bf,$0 as bg,Se as bh,Ae as bi,cI as bj,yV as bk,pfe as bl,f6e as bm,Rs as bn,Cl as bo,jh as bp,cM as bq,z7e as br,Yy as bs,Rl as bt,Ni as bu,Hn as bv,_5e as bw,Mr as bx,bs as by,y6e as bz,FF as c,hwe as c$,k0 as c0,t3e as c1,Dl as c2,M6e as c3,ad as c4,rZ as c5,q5e as c6,PV as c7,P6e as c8,AA as c9,FR as cA,pr as cB,F$ as cC,om as cD,gve as cE,t7 as cF,nxe as cG,B7e as cH,cxe as cI,oxe as cJ,lxe as cK,axe as cL,uxe as cM,ln as cN,fX as cO,LO as cP,ae as cQ,bG as cR,wG as cS,m7e as cT,Ube as cU,Bbe as cV,Tw as cW,aoe as cX,qc as cY,kt as cZ,Lge as c_,AV as ca,Jo as cb,Gw as cc,H5e as cd,F5e as ce,Y5e as cf,Oh as cg,dZ as ch,pZ as ci,XM as cj,EL as ck,L5e as cl,ZM as cm,KM as cn,f7e as co,y7e as cp,p7e as cq,mve as cr,S2 as cs,RMe as ct,LMe as cu,eh as cv,fr as cw,Bw as cx,ow as cy,n0 as cz,BM as d,m0e as d$,X_e as d0,Q_e as d1,_t as d2,u3 as d3,tV as d4,u3e as d5,lle as d6,Oge as d7,UP as d8,qP as d9,Om as dA,cZ as dB,BSe as dC,QSe as dD,Da as dE,YSe as dF,JSe as dG,KSe as dH,ZSe as dI,dA as dJ,fA as dK,pA as dL,HSe as dM,WSe as dN,Ph as dO,i_ as dP,c2 as dQ,USe as dR,qSe as dS,V5e as dT,XSe as dU,sxe as dV,v0e as dW,b0e as dX,lM as dY,Zz as dZ,GSe as d_,NU as da,JF as db,i3e as dc,UH as dd,Ne as de,i3 as df,c1e as dg,LV as dh,C5e as di,ZK as dj,K5e as dk,D5e as dl,WM as dm,fL as dn,QK as dp,jx as dq,mZ as dr,oZ as ds,O5e as dt,j5e as du,zxe as dv,aF as dw,Dae as dx,Ia as dy,N0 as dz,tb as e,hxe as e$,w0e as e0,zSe as e1,FSe as e2,e7 as e3,wd as e4,Jg as e5,pV as e6,iZ as e7,td as e8,Hp as e9,L6e as eA,zS as eB,c0 as eC,Yz as eD,qpe as eE,Hpe as eF,It as eG,VSe as eH,Cd as eI,Uy as eJ,jl as eK,yt as eL,xm as eM,Qr as eN,wne as eO,Uue as eP,H4e as eQ,eSe as eR,Zhe as eS,oSe as eT,SG as eU,v5e as eV,Jy as eW,V9e as eX,Ch as eY,ZF as eZ,j2 as e_,ry as ea,Ir as eb,Sv as ec,x4 as ed,g_ as ee,LB as ef,qge as eg,G$ as eh,DB as ei,ts as ej,Ui as ek,uU as el,_h as em,Uge as en,B2e as eo,yP as ep,$be as eq,Tbe as er,Ibe as es,Uo as et,RV as eu,DV as ev,E6e as ew,z$ as ex,$6e as ey,$fe as ez,Bae as f,Z_e as f$,xt as f0,jd as f1,Nl as f2,y4 as f3,mi as f4,f4 as f5,g4 as f6,kw as f7,KR as f8,D3e as f9,W7e as fA,es as fB,o5e as fC,t5e as fD,z4e as fE,P5e as fF,$5 as fG,M2 as fH,Hx as fI,qx as fJ,e7e as fK,QMe as fL,tY as fM,NM as fN,g7e as fO,r3e as fP,B_ as fQ,Nd as fR,b7e as fS,v7e as fT,Xbe as fU,b5e as fV,jU as fW,WB as fX,_G as fY,MG as fZ,N_ as f_,wt as fa,w7 as fb,GI as fc,Z5e as fd,Pxe as fe,Fxe as ff,ire as fg,BY as fh,Fae as fi,zae as fj,rs as fk,ti as fl,hd as fm,Ue as fn,D7e as fo,Zm as fp,L7e as fq,Uc as fr,sSe as fs,rSe as ft,BR as fu,qo as fv,T_e as fw,cve as fx,iF as fy,Ll as fz,ce as g,To as g$,m_ as g0,QB as g1,xT as g2,h3e as g3,n3e as g4,sd as g5,a2 as g6,k3e as g7,e5e as g8,qne as g9,Ape as gA,wh as gB,Rh as gC,XJ as gD,u_ as gE,K0e as gF,Z0e as gG,F7e as gH,Le as gI,u5e as gJ,sfe as gK,c6e as gL,mS as gM,R7e as gN,U_ as gO,j7e as gP,ofe as gQ,h6e as gR,d6e as gS,efe as gT,l6e as gU,gr as gV,i_e as gW,Vme as gX,aX as gY,ife as gZ,kO as g_,X3e as ga,Th as gb,X as gc,Dj as gd,tU as ge,iU as gf,I2e as gg,eU as gh,P2e as gi,C2e as gj,O2e as gk,aV as gl,Qt as gm,x$ as gn,o6e as go,R_ as gp,L0e as gq,jSe as gr,a6e as gs,u6e as gt,cn as gu,Fl as gv,Uw as gw,t6e as gx,jz as gy,Q0e as gz,hM as h,lSe as h$,EO as h0,O4 as h1,Er as h2,$r as h3,kr as h4,m$ as h5,kSe as h6,D2e as h7,sn as h8,fye as h9,JV as hA,wye as hB,gv as hC,hMe as hD,Mt as hE,Eye as hF,gs as hG,VV as hH,F1e as hI,gye as hJ,D1e as hK,G1e as hL,Si as hM,Q6e as hN,fd as hO,rr as hP,K6e as hQ,FA as hR,y2 as hS,W6e as hT,k$ as hU,Y6e as hV,R1e as hW,H1e as hX,on as hY,J6e as hZ,Z6e as h_,El as ha,eye as hb,rt as hc,Oye as hd,et as he,rn as hf,Xu as hg,Fi as hh,Hm as hi,Op as hj,Cy as hk,g0 as hl,lu as hm,Qs as hn,js as ho,Py as hp,bb as hq,Zi as hr,_ye as hs,di as ht,X6e as hu,U6e as hv,YS as hw,Te as hx,WS as hy,JS as hz,CU as i,fw as i$,W4e as i0,Y0e as i1,tM as i2,O7e as i3,k0e as i4,e6e as i5,Kp as i6,x0e as i7,NSe as i8,Ow as i9,TL as iA,X5e as iB,R5e as iC,$0e as iD,D_e as iE,i6e as iF,Xee as iG,Hj as iH,dx as iI,T6e as iJ,zP as iK,W5e as iL,O6e as iM,yO as iN,aO as iO,_6e as iP,CV as iQ,TV as iR,MJ as iS,PJ as iT,B2 as iU,d5e as iV,Vn as iW,e3e as iX,eue as iY,o3e as iZ,JO as i_,t2 as ia,HP as ib,I0 as ic,l0 as id,Y3e as ie,GH as ig,Ro as ih,N2 as ii,vm as ij,Rn as ik,l5e as il,f3e as im,xW as io,jMe as ip,Ige as iq,mU as ir,RZ as is,XZ as it,J7e as iu,Eh as iv,SW as iw,jxe as ix,C6e as iy,dxe as iz,s3e as j,ufe as j$,ZO as j0,M5e as j1,ZY as j2,RY as j3,GM as j4,yw as j5,UO as j6,w5e as j7,oK as j8,FU as j9,lO as jA,uO as jB,IW as jC,Wn as jD,nK as jE,aK as jF,pK as jG,vK as jH,nL as jI,rL as jJ,sL as jK,gK as jL,SK as jM,MK as jN,rK as jO,G2 as jP,E0 as jQ,t7e as jR,U3e as jS,Kfe as jT,Hfe as jU,v6e as jV,A6e as jW,qfe as jX,Yfe as jY,G5e as jZ,Sve as j_,oL as ja,vY as jb,bY as jc,wY as jd,yY as je,fY as jf,Eie as jg,zR as jh,VY as ji,Bie as jj,Wo as jk,Sre as jl,Rae as jm,c5e as jn,s5e as jo,PM as jp,OM as jq,Kae as jr,nle as js,gY as jt,Gie as ju,YY as jv,VR as jw,pie as jx,vn as jy,TW as jz,XF as k,xh as k$,Y7e as k0,S6e as k1,r7 as k2,fxe as k3,yxe as k4,pxe as k5,$5e as k6,C7 as k7,E_ as k8,E5e as k9,Lme as kA,sI as kB,YO as kC,jY as kD,OY as kE,KO as kF,Yb as kG,Woe as kH,mY as kI,mge as kJ,j_ as kK,yf as kL,bie as kM,T5e as kN,Y_e as kO,lW as kP,IM as kQ,kU as kR,vw as kS,ms as kT,zi as kU,mfe as kV,Vl as kW,dL as kX,QC as kY,Oxe as kZ,Nxe as k_,ty as ka,Bfe as kb,Pfe as kc,Rfe as kd,Wfe as ke,k6e as kf,Bte as kg,VMe as kh,yq as ki,T5 as kj,I5 as kk,x6e as kl,Yt as km,m6e as kn,nue as ko,Qee as kp,I6e as kq,vV as kr,l3e as ks,GY as kt,Ct as ku,_0 as kv,Cpe as kw,Pw as kx,lT as ky,Ome as kz,Uae as l,AZ as l$,Am as l0,mre as l1,EM as l2,$M as l3,pI as l4,k5e as l5,mV as l6,B0 as l7,J3e as l8,jde as l9,Yne as lA,nM as lB,oM as lC,wm as lD,Cte as lE,Ln as lF,YR as lG,F_e as lH,Kbe as lI,YB as lJ,Hbe as lK,vve as lL,CG as lM,fI as lN,CL as lO,W$ as lP,Km as lQ,Kk as lR,B6 as lS,Jm as lT,Mve as lU,tT as lV,iT as lW,qy as lX,Ns as lY,a_ as lZ,kZ as l_,Yg as la,DS as lb,JB as lc,AG as ld,EG as le,U7e as lf,zu as lg,i7e as lh,wk as li,LG as lj,jB as lk,z_ as ll,owe as lm,Un as ln,NH as lo,QD as lp,oN as lq,HB as lr,bM as ls,r7e as lt,$ve as lu,Tve as lv,tG as lw,Hne as lx,G7 as ly,Jne as lz,A2 as m,Wy as m$,JK as m0,iI as m1,mr as m2,UW as m3,GW as m4,a5e as m5,Gy as m6,L_e as m7,b_e as m8,g_e as m9,y3e as mA,PU as mB,_7 as mC,Cxe as mD,kxe as mE,Xge as mF,Sh as mG,I8 as mH,of as mI,B5e as mJ,J5e as mK,uI as mL,Nae as mM,Ooe as mN,Eoe as mO,QM as mP,K3e as mQ,Oa as mR,Bn as mS,ZD as mT,iO as mU,pm as mV,yve as mW,qMe as mX,mh as mY,Vk as mZ,nG as m_,Jq as ma,OG as mb,pf as mc,j$ as md,uB as me,W0e as mf,Qme as mg,J0e as mh,fB as mi,_B as mj,g2 as mk,U$ as ml,nB as mm,Dy as mn,Wne as mo,dre as mp,EC as mq,I2 as mr,r_ as ms,Xy as mt,vs as mu,an as mv,cte as mw,z2 as mx,dte as my,Vxe as mz,sr as n,Dxe as n$,Y$ as n0,kve as n1,Ave as n2,M$ as n3,W0 as n4,qve as n5,hve as n6,ql as n7,d7e as n8,c7e as n9,S5e as nA,HO as nB,qO as nC,Ive as nD,B9e as nE,AH as nF,U as nG,n5e as nH,DMe as nI,eT as nJ,rxe as nK,qn as nL,Jp as nM,aG as nN,vG as nO,rp as nP,$_e as nQ,xV as nR,ys as nS,_V as nT,ple as nU,fle as nV,ule as nW,tK as nX,BP as nY,JW as nZ,Lxe as n_,h7e as na,hbe as nb,Jve as nc,Kve as nd,Cve as ne,Ove as nf,Lve as ng,Rve as nh,jve as ni,Fve as nj,Nve as nk,zve as nl,Vve as nm,Bve as nn,Gve as no,Uve as np,PG as nq,C_e as nr,m_e as ns,H_ as nt,H0 as nu,GP as nv,W3e as nw,DT as nx,dR as ny,MY as nz,L4e as o,qie as o0,Uie as o1,die as o2,Nw as o3,v2 as o4,Rxe as o5,d3e as o6,p3e as o7,c3e as o8,nW as o9,wie as oa,fie as ob,GO as oc,Z3e as od,I5e as oe,A4e as of,cJ as og,i9e as oh,D_ as oi,CMe as oj,xwe as ok,q7e as ol,K7e as om,Mi as p,se as q,Rm as r,ai as s,K_e as t,Rr as u,Fs as v,O4e as w,ei as x,Fy as y,me as z};
