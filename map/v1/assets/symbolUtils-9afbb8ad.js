import{at as w,f0 as Oe,D as De,a3 as Ne,_ as E,f1 as Be,a5 as Pe,a8 as Ue,dl as S,f2 as qe,J as ve,f3 as Ge,bP as We,g as Y,cR as J,U as ee,cS as oe,d8 as N,d_ as Fe,ei as te,f4 as Te,d$ as Qe,f5 as He,f6 as se,G as Ke,q as Q,ao as be,u as I,H as Xe,f7 as Ye,f8 as Je,ac as et}from"./index-2e5318f2.js";import{b as V,J as Le,g as tt,h as at,p as nt,d as we,a as lt,y as ot,q as st,c as F,D as it,I as rt}from"./utils-dff16f1b.js";import{y as ae,p as xe}from"./colorUtils-c0f43caf.js";import{resolveWebStyleSymbol as ct}from"./webStyleSymbolUtils-eb2f0e65.js";const ut={heading:"esri-widget__heading"};function xa({level:e,class:t,...a},n){const l=Ae(e);return w(`h${l}`,{...a,class:Oe(ut.heading,t),role:"heading","aria-level":String(l)},n)}function Ae(e){return De(Math.ceil(e),1,6)}function Aa(e,t=1){return Ae(e+t)}const ht=/^-?(\d+)(\.(\d+))?$/i;function pt(e,t){return e-t}function mt(e,t){let a,n;return a=Number(e.toFixed(t)),a<e?n=a+1/10**t:(n=a,a-=1/10**t),a=Number(a.toFixed(t)),n=Number(n.toFixed(t)),[a,n]}function ft(e,t,a,n,l){const o=dt(e,t,a,n),s=o.previous==null||o.previous<=l,i=o.next==null||o.next<=l;return s&&i||o.previous+o.next<=2*l}function Me(e){const t=String(e),a=t.match(ht);if(a&&a[1])return{integer:a[1].split("").length,fractional:a[3]?a[3].split("").length:0};if(t.toLowerCase().includes("e")){const n=t.split("e"),l=n[0],o=n[1];if(l&&o){const s=Number(l);let i=Number(o);const r=i>0;r||(i=Math.abs(i));const c=Me(s);return r?(c.integer+=i,i>c.fractional?c.fractional=0:c.fractional-=i):(c.fractional+=i,i>c.integer?c.integer=1:c.integer-=i),c}}return{integer:0,fractional:0}}function dt(e,t,a,n){const l={previous:null,next:null};if(a!=null){const o=e-a,s=t-a-o;l.previous=Math.floor(Math.abs(100*s/o))}if(n!=null){const o=n-e,s=n-t-o;l.next=Math.floor(Math.abs(100*s/o))}return l}function Ma(e,t={}){const a=e.slice(0),{tolerance:n=2,strictBounds:l=!1,indexes:o=a.map((s,i)=>i)}=t;o.sort(pt);for(let s=0;s<o.length;s++){const i=o[s],r=a[i],c=i===0?null:a[i-1],m=i===a.length-1?null:a[i+1],p=Me(r).fractional;if(p){let u,f=0,h=!1;for(;f<=p&&!h;){const y=mt(r,f);u=l&&s===0?y[1]:y[0],h=ft(r,u,c,m,n),f++}h&&(a[i]=u)}}return a}const yt={maximumFractionDigits:20};function gt(e){return Ne(e,yt)}const vt="<",bt=">",Lt=Ue("short-date");function wt(e,t,a,n){let l="";t===0?l=`${vt} `:t===a&&(l=`${bt} `);let o=null;return o=n?Pe(e,Lt):gt(e),l+o}const ka=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function xt(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(s=>s.type==="color");if(!t)return null;let a=null,n=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;a=t.stops[0].value,n=t.stops[t.stops.length-1].value}const l=a!=null&&n!=null?a+(n-a)/2:0,{getColor:o}=await E(()=>import("./index-2e5318f2.js").then(s=>s.mj),["assets/index-2e5318f2.js","assets/index-dc13cc80.css"]);return o(t,l)??null}async function $a(e,t){const a=e.trailCap,n=e.trailWidth||1,l=t||await xt(e)||e.color;return new Be({cap:a,color:l,width:n})}function Sa(e){return e!=null&&typeof e=="object"&&"min"in e&&"max"in e}const At=new S([64,64,64]);function ke(e,t){const a=[],n=e.length-1;return e.length===5?a.push(0,2,4):a.push(0,n),e.map((l,o)=>a.includes(o)?wt(l,o,n,t):null)}async function Mt(e,t,a){let n=!1,l=[],o=[];if(e.stops){const c=e.stops;l=c.map(m=>m.value),n=c.some(m=>!!m.label),n&&(o=c.map(m=>m.label))}const s=l[0],i=l[l.length-1];if(s==null&&i==null)return null;const r=n?null:ke(l,a??!1);return(await Promise.all(l.map(async(c,m)=>({value:c,color:e.type==="opacity"?await kt(c,e,t):(await E(()=>import("./index-2e5318f2.js").then(p=>p.mj),["assets/index-2e5318f2.js","assets/index-dc13cc80.css"])).getColor(e,c),label:n?o[m]:(r==null?void 0:r[m])??""})))).reverse()}async function kt(e,t,a){const n=new S(a??At),l=(await E(()=>import("./index-2e5318f2.js").then(o=>o.mj),["assets/index-2e5318f2.js","assets/index-dc13cc80.css"])).getOpacity(t,e);return l!=null&&(n.a=l),n}function za(e){let t=!1,a=[],n=[];a=e.map(i=>i.value),t=e.some(i=>!!i.label),t&&(n=e.map(i=>i.label??""));const l=a[0],o=a[a.length-1];if(l==null&&o==null)return null;const s=t?null:ke(a,!1);return a.map((i,r)=>({value:i,color:$t(i,e),label:t?n[r]:(s==null?void 0:s[r])??""})).reverse()}function $t(e,t){const{startIndex:a,endIndex:n,weight:l}=St(e,t);if(a===n)return t[a].color;const o=S.blendColors(t[a].color,t[n].color,l);return new S(o)}function St(e,t){let a=0,n=t.length-1;return t.some((l,o)=>e<l.value?(n=o,!0):(a=o,!1)),{startIndex:a,endIndex:n,weight:(e-t[a].value)/(t[n].value-t[a].value)}}function Ca(e,t){let a=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((n,l)=>{l===0?a.push({value:t.max,color:new S(n.toColor),label:"high"}):a.push({value:null,color:new S(n.toColor),label:""}),l===e.colorRamps.length-1?a.push({value:t.min,color:new S(n.fromColor),label:"low"}):a.push({value:null,color:new S(n.fromColor),label:""})});else{let n,l;e&&e.type==="algorithmic"?(n=e.fromColor,l=e.toColor):(n=[0,0,0,1],l=[255,255,255,1]),a=[{value:t.max,color:new S(l),label:"high"},{value:t.min,color:new S(n),label:"low"}]}return a}function zt(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(n=>{var l;return((l=n.color)==null?void 0:l.a)>0});let a=t.length-1;if(t&&t[0]){const n=t[a];n&&n.ratio!==1&&(t.push(new qe({ratio:1,color:n.color})),a++)}return t.map((n,l)=>{var s,i;let o="";return l===0?o=((s=e.legendOptions)==null?void 0:s.minLabel)||"low":l===a&&(o=((i=e.legendOptions)==null?void 0:i.maxLabel)||"high"),{color:n.color,label:o,ratio:n.ratio}}).reverse()}ve.getLogger("esri.renderers.support.utils");async function C(e,t,a){We(e,t,()=>[]).push(...a)}async function Ia(e){var a,n;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const l=e.visualVariables.filter(o=>o.type==="color");for(const o of l){const s=(await Mt(o)??[]).map(i=>i.color);await C(t,o.field||o.valueExpression,s)}}if(e.type==="heatmap"){const l=zt(e).map(o=>o.color);await C(t,e.field||e.valueExpression,l)}else if(e.type==="pie-chart"){for(const l of e.attributes)await C(t,l.field||l.valueExpression,[l.color]);await C(t,"default",[(a=e==null?void 0:e.othersCategory)==null?void 0:a.color,V(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const l of e.attributes)await C(t,l.field||l.valueExpression,[l.color]);await C(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((n=e.authoringInfo)==null?void 0:n.type)==="predominance")for(const l of e.uniqueValueInfos??[])await C(t,l.value.toString(),[V(l.symbol,null)]);else{const l=(e.uniqueValueInfos??[]).map(c=>V(c.symbol,null)),{field:o,field2:s,field3:i,valueExpression:r}=e;(o||r)&&await C(t,o||r,l),s&&await C(t,s,l),i&&await C(t,i,l)}else if(e.type==="class-breaks"){const l=e.classBreakInfos.map(i=>V(i.symbol,null)),{field:o,valueExpression:s}=e;await C(t,o??s,l)}else e.type==="simple"&&await C(t,"default",[V(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await C(t,"default",[V(e.defaultSymbol,null)]),t.forEach((l,o)=>{const s=Ge(l.filter(Boolean),(i,r)=>JSON.stringify(i)===JSON.stringify(r));t.set(o,s)}),t}var k;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(k||(k={}));const H={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function Ct(e,t,a){const n=k.size;let l=n,o=n;e<1?l*=.75:e>1&&(o*=1.25);const s=0,i=0;let r=n,c=n;return t&&a&&(l=o=r=c=0),[{type:"path",path:[{command:"M",values:[r,s]},{command:"L",values:[a?r:.875*r,s]},{command:"L",values:[a?l-.5*r:i,o-.5*c]},{command:"L",values:[l-.5*r,o-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,s]},{command:"L",values:[r,t?s:.125*c]},{command:"L",values:[l-.5*r,t?o-.5*c:c]},{command:"L",values:[l-.5*r,o-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l-.5*r,o-.5*c]},{command:"L",values:[a?l-.5*r:i,o-.5*c]},{command:"L",values:[a?l-.5*r:i,t?o-.5*c:c]},{command:"L",values:[l-.5*r,t?o-.5*c:c]},{command:"Z",values:[]}]}]}function It(e){const t=k.size,a=.5*e,n=0,l=0;return[{type:"path",path:[{command:"M",values:[l,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[l,.7*t+a-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[t,a]},{command:"L",values:[t,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,n]},{command:"L",values:[t,n]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[l,.7*t*.5]},{command:"Z",values:[]}]}]}function Et(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function jt(e,t){let a=t?k.tallSymbolWidth:e;const n=e,l=t?4:6;a<=k.size?a-=.5*l:a-=l;const o=0,s=0,i=t?.35*a:.5*a;return[{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[a,.5*i]},{command:"L",values:[.5*a,i]},{command:"L",values:[s,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*i]},{command:"L",values:[.5*a,i]},{command:"L",values:[.5*a,n]},{command:"L",values:[s,n-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*a,i]},{command:"L",values:[.5*a,n]},{command:"L",values:[a,n-.5*i]},{command:"L",values:[a,.5*i]},{command:"Z",values:[]}]}]}function Zt(e,t){let a=t?k.tallSymbolWidth:e;const n=e,l=t?4:6;a<=k.size?a-=.5*l:a-=l;const o=.5*a,s=.15*a,i=0,r=n-s;return[{type:"ellipse",cx:.5*a,cy:r,rx:o,ry:s},{type:"path",path:[{command:"M",values:[i,s]},{command:"L",values:[i,r]},{command:"L",values:[a,r]},{command:"L",values:[a,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*a,cy:s,rx:o,ry:s}]}function _t(e,t){let a=t?k.tallSymbolWidth:e;const n=e,l=t?4:6;a<=k.size?a-=.5*l:a-=l;const o=.15*a,s=n-o;return[{type:"ellipse",cx:.5*a,cy:s,rx:.5*a,ry:o},{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[a,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function Vt(e){let t=e;const a=e,n=6;t<k.size?t-=.5*n:t-=n;const l=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,a-l]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:l}]}function Rt(e){let t=e;const a=e,n=4;t<k.size?t-=.5*n:t-=n;const l=0,o=0,s=t,i=a,r=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*s,l]},{command:"L",values:[s,.5*i-r]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*s,l]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"L",values:[o,.5*i-r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*i-r]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"L",values:[.45*s,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*s,a]},{command:"L",values:[s,.5*i-r]},{command:"L",values:[.45*s-r,.5*i+r]},{command:"Z",values:[]}]}]}function Ot(e){const t=e,a=2;let n=e;n<k.size?n-=.5*a:n-=a;const l=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[t,n]},{command:"L",values:[.45*t,.6*n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[o,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,n]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[t,n]},{command:"Z",values:[]}]}]}function j(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function Ea(e,t){if(e==null)return new S;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const a=new S(e);return new S([j(a.r,t),j(a.g,t),j(a.b,t),a.a])}const Dt="http://www.w3.org/2000/svg";let Nt=0,Bt=0;const ie=Y("android"),Pt=Y("chrome")||ie&&ie>=4?"auto":"optimizeLegibility",Ut={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},qt=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let M={},L={};const re={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},Gt=Math.PI;let Wt=1;function O(e,t){const a=e*(Gt/180);return Math.abs(t*Math.sin(a))+Math.abs(t*Math.cos(a))}function $e(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function Se(e,t,a,n){if(e){if(e.type==="circle")return w("circle",{fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-width":a.width,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-dasharray":a.dashArray,"stroke-dashoffset":a.dashOffset,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if(e.type==="ellipse")return w("ellipse",{fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-width":a.width,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-dasharray":a.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if(e.type==="rect")return w("rect",{fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-width":a.width,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-dasharray":a.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if(e.type==="image")return w("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if(e.type==="path"){const l=typeof e.path!="string"?$e(e.path):e.path;return w("path",{fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-width":a.width,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-dasharray":a.dashArray,"stroke-miterlimit":"4",d:l})}if(e.type==="text")return ee(n),w("text",{"dominant-baseline":n.dominantBaseline,fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-width":a.width,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-dasharray":a.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":Pt,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:e.x,y:e.y},e.text)}return null}function ze(e){const t={fill:"none",pattern:null,linearGradient:null};if(e){if("type"in e&&e.type==="pattern"){const a="patternId-"+ ++Nt;t.fill=`url(#${a})`,t.pattern={id:a,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&e.type==="linear"){const a="linearGradientId-"+ ++Bt;t.fill=`url(#${a})`,t.linearGradient={id:a,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(n=>({offset:n.offset,color:n.color&&new S(n.color).toString()}))}}else if(e){const a=new S(e);t.fill=a.toString()}}return t}function Ce(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new S(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashArray&&(t.dashOffset=e.dashoffset),e.style)){let a=null;if(e.style in re&&(a=re[e.style]),Array.isArray(a)){a=a.slice(0);const n=e.width??0;for(let l=0;l<a.length;++l)a[l]*=n;if(e.cap!=="butt"){for(let l=0;l<a.length;l+=2)a[l]-=n,a[l]<1&&(a[l]=1);for(let l=1;l<a.length;l+=2)a[l]+=n}a=a.join(",")}t.dashArray=a}return t}function Ie(e,t){const a={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const n=e.alignBaseline,l=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;a.align=e.align,a.dominantBaseline=l,a.decoration=e.decoration,a.kerning=e.kerning?"auto":"0",a.rotate=e.rotated?"90":"0",ee(t),a.font.style=t.style||"normal",a.font.variant=t.variant||"normal",a.font.weight=t.weight||"normal",a.font.size=t.size&&t.size.toString()||"10pt",a.font.family=t.family||"serif"}return a}function Ft(e){const{pattern:t,linearGradient:a}=e;if(t)return w("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},w("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(a){const n=a.stops.map((l,o)=>w("stop",{key:`${o}-stop`,offset:l.offset,"stop-color":l.color}));return w("linearGradient",{id:a.id,gradientUnits:"userSpaceOnUse",x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n)}return null}function Tt(e,t){if(!e||e.length===0)return null;const a=[];for(const n of e){const{shape:l,fill:o,stroke:s,font:i}=n,r=ze(o),c=Ce(s),m=l.type==="text"?Ie(l,i):null,p=Se(l,r.fill,c,m);p&&a.push(p)}return w("mask",{id:t,maskUnits:"userSpaceOnUse"},w("g",null,a))}function ce(e,t,a){return Fe(e,te(e),[t,a])}function ue(e,t,a,n,l){return Te(e,te(e),[t,a]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*a-l*a+l,e}function Qt(e,t,a,n){const l=t%360*Math.PI/180;Qe(e,te(e),l);const o=Math.cos(l),s=Math.sin(l),i=e[4],r=e[5];return e[4]=i*o-r*s+n*s-a*o+a,e[5]=r*o+i*s-a*s-n*o+n,e}function z(e,t){M&&"left"in M?(M.left!=null&&M.left>e&&(M.left=e),(M.right==null||M.right<e)&&(M.right=e),(M.top==null||M.top>t)&&(M.top=t),(M.bottom==null||M.bottom<t)&&(M.bottom=t)):M={left:e,bottom:t,right:e,top:t}}function he(e){const t=e.args,a=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<a;n+=2)z(t[n],t[n+1]);L.x=t[a-2],L.y=t[a-1];break;case"H":for(n=0;n<a;++n)z(t[n],L.y);L.x=t[a-1];break;case"V":for(n=0;n<a;++n)z(L.x,t[n]);L.y=t[a-1];break;case"m":{let l=0;for(("x"in L)||(z(L.x=t[0],L.y=t[1]),l=2),n=l;n<a;n+=2)z(L.x+=t[n],L.y+=t[n+1]);break}case"l":case"t":for(n=0;n<a;n+=2)z(L.x+=t[n],L.y+=t[n+1]);break;case"h":for(n=0;n<a;++n)z(L.x+=t[n],L.y);break;case"v":for(n=0;n<a;++n)z(L.x,L.y+=t[n]);break;case"c":for(n=0;n<a;n+=6)z(L.x+t[n],L.y+t[n+1]),z(L.x+t[n+2],L.y+t[n+3]),z(L.x+=t[n+4],L.y+=t[n+5]);break;case"s":case"q":for(n=0;n<a;n+=4)z(L.x+t[n],L.y+t[n+1]),z(L.x+=t[n+2],L.y+=t[n+3]);break;case"A":for(n=0;n<a;n+=7)z(t[n+5],t[n+6]);L.x=t[a-2],L.y=t[a-1];break;case"a":for(n=0;n<a;n+=7)z(L.x+=t[n+5],L.y+=t[n+6])}}function pe(e,t,a){const n=Ut[e.toLowerCase()];let l;typeof n=="number"&&(n?t.length>=n&&(l={action:e,args:t.slice(0,t.length-t.length%n)},a.push(l),he(l)):(l={action:e,args:[]},a.push(l),he(l)))}function Ht(e){const t=(typeof e.path!="string"?$e(e.path):e.path).match(qt),a=[];if(M={},L={},!t)return null;let n="",l=[];const o=t.length;for(let i=0;i<o;++i){const r=t[i],c=parseFloat(r);isNaN(c)?(n&&pe(n,l,a),l=[],n=r):l.push(c)}pe(n,l,a);const s={x:0,y:0,width:0,height:0};return M&&"left"in M&&(s.x=M.left,s.y=M.top,s.width=M.right-M.left,s.height=M.bottom-M.top),s}function Kt(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const a=J(Ht(e));t.x=a.x,t.y=a.y,t.width=a.width,t.height=a.height}return t}function Xt(e){const t={x:0,y:0,width:0,height:0};let a=null,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const o of e)a?(a.x=Math.min(a.x,o.x),a.y=Math.min(a.y,o.y),n=Math.max(n,o.x+o.width),l=Math.max(l,o.y+o.height)):(a=t,a.x=o.x,a.y=o.y,n=o.x+o.width,l=o.y+o.height);return a&&(a.width=n-a.x,a.height=l-a.y),a}function Yt(e,t,a,n,l,o,s,i,r){let c=(s&&o?O(o,t):t)/2,m=(s&&o?O(o,a):a)/2;if(r){const g=r[0],d=r[1];c=(s&&o?O(o,g):g)/2,m=(s&&o?O(o,d):d)/2}const p=e.width+n,u=e.height+n,f=oe(),h=oe();let y=!1;if(l&&p!==0&&u!==0){const g=t!==a?t/a:p/u,d=t>a?t:a;let A=1,$=1;isNaN(d)||(g>1?(A=d/p,$=d/g/u):($=d/u,A=d*g/p)),N(h,h,ue(f,A,$,c,m)),y=!0}const v=e.x+(p-n)/2,b=e.y+(u-n)/2;if(N(h,h,ce(f,c-v,m-b)),!y&&(p>t||u>a)){const g=p/t>u/a,d=(g?t:a)/(g?p:u);N(h,h,ue(f,d,d,v,b))}return o&&N(h,h,Qt(f,o,v,b)),i&&N(h,h,ce(f,i[0],i[1])),`matrix(${h[0]},${h[1]},${h[2]},${h[3]},${h[4]},${h[5]})`}function Jt(e,t,a){const n=e==null?void 0:e.effects.find(c=>c.type==="bloom");if(!n)return null;const{strength:l,radius:o}=n,s=l>0?o:0,i=(l+s)*t,r=4*l+1;return w("filter",{id:`bloom${a}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},w("feMorphology",{operator:"dilate",radius:(l+.5*s)*(5**(t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),w("feGaussianBlur",{in:"dilate",stdDeviation:i/25,result:"blur"}),w("feGaussianBlur",{in:"blur",stdDeviation:i/50,result:"intensityBlur"}),w("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},w("feFuncR",{type:"linear",slope:r}),w("feFuncG",{type:"linear",slope:r}),w("feFuncB",{type:"linear",slope:r})),w("feMerge",null,w("feMergeNode",{in:"intensityBlur"}),w("feMergeNode",{in:"intensityBrightness"}),w("feGaussianBlur",{stdDeviation:l/10})))}function ea(e,t,a,n={}){var c;const l=[],o=[],s=++Wt,i=Jt(n.effectView,t,s);let r=null;if(i){const m=(c=n.effectView)==null?void 0:c.effects.find(h=>h.type==="bloom"),p=(m.strength?m.strength+m.radius/2:0)/3,u=t+t*p,f=a+a*p;r=[Math.max(u,10),Math.max(f,10)]}for(let m=0;m<e.length;m++){const p=e[m],u=[],f=[];let h=0,y=0,v=0;for(const d of p){const{shape:A,fill:$,stroke:Z,font:_e,offset:W}=d;n.ignoreStrokeWidth||A.type==="text"||(h+=Z&&Z.width||0);const le=ze($),Ve=Ce(Z),Re=A.type==="text"?Ie(A,_e):null;l.push(Ft(le)),u.push(Se(A,le.fill,Ve,Re)),f.push(Kt(A)),W&&(y+=W[0],v+=W[1])}const b=Yt(J(Xt(f)),t,a,h,n.scale??!1,n.rotation,n.useRotationSize??!1,[y,v],r);let g=null;if(n.masking){const d=`mask-${m}`,A=n.masking[m];l.push(Tt(A,d)),g=`url(#${d})`}o.push(g?w("g",{mask:g},w("g",{transform:b},u)):w("g",{transform:b},u))}return n.useRotationSize&&n.rotation&&(t=O(n.rotation,t),a=O(n.rotation,a)),i&&(ee(r),t=r[0],a=r[1]),w("svg",{xmlns:Dt,width:t,height:a,style:"display: block;","aria-labelledby":n.ariaLabel,role:"img",focusable:!1},i,w("defs",null,l),i?w("g",{filter:`url(#bloom${s})`},o):o)}const me=He();function ta(e,t){me.append(e,t),me.detach(t)}function q(e,t,a){const n=Math.ceil(t[0]),l=Math.ceil(t[1]);if(!e.some(s=>!!s.length))return null;const o=a&&a.node||document.createElement("div");return a.opacity!=null&&(o.style.opacity=a.opacity.toString()),a.effectView!=null&&(o.style.filter=Le(a.effectView)),ta(o,()=>ea(e,n,l,a)),o}function aa(e,t){e=Math.ceil(e),t=Math.ceil(t);const a=document.createElement("canvas");a.width=e,a.height=t,a.style.width=e+"px",a.style.height=t+"px";const n=a.getContext("2d");return n.clearRect(0,0,e,t),n}function na(e,t,a){return e?Ke(e,{responseType:"image"}).then(n=>{const l=n.data,o=l.width,s=l.height,i=o/s;let r=t;if(a){const c=Math.max(o,s);r=Math.min(r,c)}return{image:l,width:i<=1?Math.ceil(r*i):r,height:i<=1?r:Math.ceil(r/i)}}):Promise.reject(new Q("renderUtils: imageDataSize","href not provided."))}function la(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function oa(e,t,a,n,l){switch(l){case"multiply":e[t]*=a[0],e[t+1]*=a[1],e[t+2]*=a[2],e[t+3]*=a[3];break;default:{const o=ae({r:e[t],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;const s=xe(o);e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=a[3];break}}}function sa(e,t,a,n,l){return na(e,t,l).then(o=>{const s=o.width??t,i=o.height??t;if(o.image&&la(a,n)){let r=o.image.width,c=o.image.height;Y("edge")&&/\.svg$/i.test(e)&&(r-=1,c-=1);const m=aa(s,i);m.drawImage(o.image,0,0,r,c,0,0,s,i);const p=m.getImageData(0,0,s,i),u=[a.r/255,a.g/255,a.b/255,a.a],f=ae(a);for(let h=0;h<p.data.length;h+=4)oa(p.data,h,u,f,n);m.putImageData(p,0,0),e=m.canvas.toDataURL("image/png")}else{const r=se&&se.findCredential(e);if(r&&r.token){const c=e.includes("?")?"&":"?";e=`${e}${c}token=${r.token}`}}return{url:e,width:s,height:i}}).catch(()=>({url:e,width:t,height:t}))}const _=k.size,P=k.maxSize,ne=k.maxOutlineSize,fe=k.lineWidth,K=k.tallSymbolWidth;function D(e){const t=e.outline,a=e.material!=null?e.material.color:null,n=a!=null?a.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&n==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const l=I(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(l,ne),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?we(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function ia(e,t){var n,l,o;if((n=e.thumbnail)!=null&&n.url)return e.thumbnail.url;if(t.type==="icon"&&((l=t==null?void 0:t.resource)==null?void 0:l.href))return lt(t);const a=be("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const s=await ct(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(()=>null);if(s&&"thumbnail"in s&&((o=s.thumbnail)!=null&&o.url))return s.thumbnail.url}return a}function T(e,t=1){const a=e.a,n=ae(e),l=n.h,o=n.s/t,s=100-(100-n.v)/t,{r:i,g:r,b:c}=xe({h:l,s:o,v:s});return[i,r,c,a]}function U(e){return e.type==="water"?e.color==null?null:e.color:e.material==null||e.material.color==null?null:e.material.color}function x(e,t=0){const a=U(e);if(!a){if(e.type==="fill")return null;const l=tt.r,o=j(l,t);return[o,o,o,100]}const n=a.toRgba();for(let l=0;l<3;l++)n[l]=j(n[l],t);return n}async function Ee(e,t){const a=e.style;return a==="none"?null:{type:"pattern",x:0,y:0,src:await at(be(`esri/symbols/patterns/${a}.png`),t.toCss(!0)),width:5,height:5}}function de(e){return e.outline?D(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function je(e,t){const a=U(e);if(!a)return null;let n="rgba(";return n+=j(a.r,t)+",",n+=j(a.g,t)+",",n+=j(a.b,t)+",",n+a.a+");"}function X(e,t){const a=je(e,t);return a?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:a,width:Math.min(e.size?I(e.size):.75,ne),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?we(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?I(2):e.join:null}:{}}function B(e,t,a){const n=a!=null?.75*a:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function ra(e){const t=e.depth,a=e.height,n=e.width;return n!==0&&t!==0&&a!==0&&n===t&&n!=null&&a!=null&&n<a}function ca(e,t,a){const n=[];if(!e)return n;switch(e.type){case"icon":{const s=t,i=t;switch(e.resource&&e.resource.primitive||Je){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:x(e,0),stroke:D(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,i]},{command:"L",values:[0,0]},{command:"L",values:[s,0]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},fill:x(e,0),stroke:D(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,i]},{command:"L",values:[.5*s,0]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},fill:x(e,0),stroke:D(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*s,0]},{command:"L",values:[.5*s,i]},{command:"M",values:[0,.5*i]},{command:"L",values:[s,.5*i]}]},stroke:de(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[s,i]},{command:"M",values:[s,0]},{command:"L",values:[0,i]}]},stroke:de(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*s,0]},{command:"L",values:[s,.5*i]},{command:"L",values:[.5*s,i]},{command:"Z",values:[]}]},fill:x(e,0),stroke:D(e)})}break}case"object":switch(e.resource&&e.resource.primitive||Ye){case"cone":{const l=B(x(e,0),x(e,-.6),a?K:t),o=_t(t,a);n.push({shape:o[0],fill:l}),n.push({shape:o[1],fill:l});break}case"inverted-cone":{const l=x(e,0),o=B(l,x(e,-.6),t),s=Vt(t);n.push({shape:s[0],fill:o}),n.push({shape:s[1],fill:l});break}case"cube":{const l=jt(t,a);n.push({shape:l[0],fill:x(e,0)}),n.push({shape:l[1],fill:x(e,-.3)}),n.push({shape:l[2],fill:x(e,-.5)});break}case"cylinder":{const l=B(x(e,0),x(e,-.6),a?K:t),o=Zt(t,a);n.push({shape:o[0],fill:l}),n.push({shape:o[1],fill:l}),n.push({shape:o[2],fill:x(e,0)});break}case"diamond":{const l=Rt(t);n.push({shape:l[0],fill:x(e,-.3)}),n.push({shape:l[1],fill:x(e,0)}),n.push({shape:l[2],fill:x(e,-.3)}),n.push({shape:l[3],fill:x(e,-.7)});break}case"sphere":{const l=B(x(e,0),x(e,-.6));l.x1=0,l.y1=0,l.x2=.25*t,l.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:l});break}case"tetrahedron":{const l=Ot(t);n.push({shape:l[0],fill:x(e,-.3)}),n.push({shape:l[1],fill:x(e,0)}),n.push({shape:l[2],fill:x(e,-.6)});break}}break}return n}function G(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?I(t):null}function ua(e){return e.type==="icon"?"multiply":"tint"}function ha(e,t){const a=G(t),n=t!=null&&t.maxSize?I(t.maxSize):null,l=(t==null?void 0:t.disableUpsampling)??!1,o=e.symbolLayers,s=[];let i=0,r=0;const c=o.at(-1);let m;return c&&c.type==="icon"&&(m=c.size&&I(c.size)),o.forEach(p=>{var h;if(p.type!=="icon"&&p.type!=="object")return;const u=p.type==="icon"?p.size&&I(p.size):0,f=a||u?Math.ceil(Math.min(a||u,n||P)):_;if(p&&p.resource&&p.resource.href){const y=ia(e,p).then(v=>{const b=p.get("material.color"),g=ua(p);return sa(v,f,b,g,l)}).then(v=>{const b=v.width,g=v.height;return i=Math.max(i,b),r=Math.max(r,g),[{shape:{type:"image",x:0,y:0,width:b,height:g,src:v.url},fill:null,stroke:null}]});s.push(y)}else{let y=f;p.type==="icon"&&m&&a&&(y=f*(u/m));const v=(t==null?void 0:t.symbolConfig)==="tall"||((h=t==null?void 0:t.symbolConfig)==null?void 0:h.isTall)||p.type==="object"&&ra(p);i=Math.max(i,v?K:y),r=Math.max(r,y),s.push(Promise.resolve(ca(p,y,v)))}}),Xe(s).then(p=>{const u=[];return p.forEach(f=>{f.value?u.push(f.value):f.error&&ve.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",f.error)}),q(u,[i,r],{node:t&&t.node,scale:!1,opacity:t&&t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})})}function pa(e,t){const a=e.symbolLayers,n=[],l=nt(e),o=G(t),s=(t&&t.maxSize?I(t.maxSize):null)||ne;let i,r=0,c=0;return a.forEach((m,p)=>{if(!m||m.type!=="line"&&m.type!=="path")return;const u=[];switch(m.type){case"line":{const f=X(m,0);if(f==null)break;const h=f&&f.width||0;p===0&&(i=h);const y=Math.min(o||h,s),v=p===0?y:o?y*(h/i):y,b=v>fe/2?2*v:fe;c=Math.max(c,v),r=Math.max(r,b),f.width=v,u.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[r,.5*c]}]},stroke:f});break}case"path":{const f=Math.min(o||_,s),h=x(m,0),y=x(m,-.2),v=je(m,-.4),b=v?{color:v,width:1}:{};if(m.profile==="quad"){const g=m.width,d=m.height,A=Ct(g&&d?g/d:1,d===0,g===0),$={...b,join:"bevel"};u.push({shape:A[0],fill:y,stroke:$}),u.push({shape:A[1],fill:y,stroke:$}),u.push({shape:A[2],fill:h,stroke:$})}else u.push({shape:H.pathSymbol3DLayer[0],fill:y,stroke:b}),u.push({shape:H.pathSymbol3DLayer[1],fill:h,stroke:b});c=Math.max(c,f),r=c}}n.push(u)}),Promise.resolve(q(n,[r,c],{node:t&&t.node,scale:l,opacity:t&&t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function ma(e,t){const a=e.type==="mesh-3d",n=e.symbolLayers,l=G(t),o=t&&t.maxSize?I(t.maxSize):null,s=l||_,i=[];let r=0,c=0,m=!1;for(let p=0;p<n.length;p++){const u=n.at(p),f=[];if(a&&u.type!=="fill")continue;const h=H.fill[0];switch(u.type){case"fill":{const y=D(u),v=Math.min(s,o||P);r=Math.max(r,v),c=Math.max(c,v),m=!0;let b=x(u,0);const g="pattern"in u?u.pattern:null,d=U(u);!a&&g!=null&&g.type==="style"&&g.style!=="solid"&&d&&(b=await Ee(g,d)),f.push({shape:h,fill:b,stroke:y});break}case"line":{const y=X(u,0);if(y==null)break;const v={stroke:y,shape:h};r=Math.max(r,_),c=Math.max(c,_),f.push(v);break}case"extrude":{const y={join:"round",width:1,...X(u,-.4)},v=x(u,0),b=x(u,-.2),g=Math.min(s,o||P),d=It(g);y.width=1,f.push({shape:d[0],fill:b,stroke:y}),f.push({shape:d[1],fill:b,stroke:y}),f.push({shape:d[2],fill:v,stroke:y});const A=_,$=.7*_+.5*g;r=Math.max(r,A),c=Math.max(c,$);break}case"water":{const y=J(U(u)),v=T(y),b=T(y,2),g=T(y,3),d=Et();m=!0,f.push({shape:d[0],fill:v}),f.push({shape:d[1],fill:b}),f.push({shape:d[2],fill:g});const A=Math.min(s,o||P);r=Math.max(r,A),c=Math.max(c,A);break}}i.push(f)}return q(i,[r,c],{node:t&&t.node,scale:m,opacity:t&&t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function fa(e,t){if(e.symbolLayers.length===0)return Promise.reject(new Q("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return ha(e,t);case"line-3d":return pa(e,t);case"polygon-3d":case"mesh-3d":return ma(e,t)}return Promise.reject(new Q("symbolPreview: swatchInfo3D","symbol not supported."))}const da=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Ee,getSizeFromOptions:G,getSymbolLayerFill:x,previewSymbol3D:fa},Symbol.toStringTag,{value:"Module"}));let R=null;const ye=[255,255,255];function ge(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function ja(e,t,a){const{backgroundColor:n,outline:l,dotSize:o}=e,s=a&&a.swatchSize||k.size,i=.8,r=Math.round(s*s/o**2*i),c=window.devicePixelRatio,m=document.createElement("canvas"),p=s*c;m.width=p,m.height=p,m.style.width=m.width/c+"px",m.style.height=m.height/c+"px";const u=m.getContext("2d");if(n&&(u.fillStyle=n.toCss(!0),u.fillRect(0,0,p,p),u.fill()),u.fillStyle=(t==null?void 0:t.toCss(!0))??"",R&&R.length/2===r)for(let h=0;h<2*r;h+=2){const y=R[h],v=R[h+1];u.fillRect(y,v,o*c,o*c),u.fill()}else{R=[];for(let h=0;h<2*r;h+=2){const y=ge(0,p),v=ge(0,p);R.push(y,v),u.fillRect(y,v,o*c,o*c),u.fill()}}l&&(l.color&&(u.strokeStyle=l.color.toCss(!0)),u.lineWidth=l.width,u.strokeRect(0,0,p,p));const f=new Image(s,s);return f.src=m.toDataURL(),f.ariaLabel=(a==null?void 0:a.ariaLabel)??null,f.alt=(a==null?void 0:a.ariaLabel)??"",f}function Za(e,t={}){const a=t.radius||40,n=2*Math.PI*a,l=e.length,o=n/l,s=[],i=ot(t.outline);(i==null?void 0:i.width)!=null&&(i.width*=2),(i||t.backgroundColor)&&s.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:i,offset:[0,0]});const r=t.values,c=r&&r.length===l&&r.reduce((h,y)=>h+y,0)===100,m=[0];for(let h=0;h<l;h++){let y=null;c&&(y=r[h]*n/100,m.push(y+m[h])),s.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(y??o)/2} ${n}`,dashoffset:"-"+(c?m[h]/2:h*(o/2)),color:e[h]},offset:[0,0]})}let p=null;const u=2*a+((i==null?void 0:i.width)||0),f=t.holePercentage;if(f){i&&s.push({shape:{type:"circle",cx:a,cy:a,r:a*f},fill:null,stroke:i,offset:[0,0]});const h=u/2;p=[[{shape:{type:"circle",cx:h,cy:h,r:h},fill:ye,stroke:i?{...i,color:ye}:null,offset:[0,0]},{shape:{type:"circle",cx:h,cy:h,r:a*f},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return q([s],[u,u],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:p,rotation:-90,ariaLabel:t.ariaLabel})}function _a(e,t={}){const l=t.align==="horizontal",o=l?75:24,s=l?24:75,i=t.width??o,r=t.height??s,c=t.gradient??!0,m=window.devicePixelRatio,p=i*m,u=r*m,f=document.createElement("canvas");f.width=p,f.height=u,f.ariaLabel=t.ariaLabel??null,f.style.width=`${i}px`,f.style.height=`${r}px`;const h=f.getContext("2d"),y=l?p:0,v=l?0:u;if(c){const g=h.createLinearGradient(0,0,y,v),d=e.length,A=d===1?0:1/(d-1);e.forEach(($,Z)=>g.addColorStop(Z*A,$.toString())),h.fillStyle=g,h.fillRect(0,0,p,u)}else{const g=l?p/e.length:p,d=l?u:u/e.length;let A=0,$=0;for(const Z of e)h.fillStyle=Z.toString(),h.fillRect(A,$,g,d),A=l?A+g:0,$=l?0:$+d}const b=document.createElement("div");return b.style.width=`${i}px`,b.style.height=`${r}px`,ya(b,t==null?void 0:t.effectList),b.appendChild(f),b}function ya(e,t){if(!t)return;e.style.filter=Le(t);const a=t.effects;if(a){for(const n of a)if((n==null?void 0:n.type)==="drop-shadow"){n.offsetX<0?e.style.marginLeft=`${Math.abs(n.offsetX)}px`:e.style.marginRight=`${n.offsetX}px`;break}}}async function ga(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:a}=await E(()=>import("./previewWebStyleSymbol-3753213f.js"),["assets/previewWebStyleSymbol-3753213f.js","assets/index-2e5318f2.js","assets/index-dc13cc80.css","assets/utils-dff16f1b.js","assets/utils-3a6e77c7.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-eb2f0e65.js","assets/devEnvironmentUtils-5002a058.js"]);return a(e,ga,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:a}=await E(()=>Promise.resolve().then(()=>da),void 0);return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:a}=await E(()=>import("./previewSymbol2D-5b5774db.js"),["assets/previewSymbol2D-5b5774db.js","assets/index-2e5318f2.js","assets/index-dc13cc80.css","assets/fontUtils-1356fe6e.js","assets/utils-dff16f1b.js","assets/utils-3a6e77c7.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-eb2f0e65.js","assets/devEnvironmentUtils-5002a058.js"]);return a(e,t)}case"cim":{const{previewCIMSymbol:a}=await E(()=>import("./previewCIMSymbol-08debaab.js"),["assets/previewCIMSymbol-08debaab.js","assets/index-2e5318f2.js","assets/index-dc13cc80.css","assets/cimAnalyzer-c31e96af.js","assets/fontUtils-1356fe6e.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-3a6e77c7.js","assets/alignmentUtils-ae955d28.js","assets/definitions-b648854a.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-94927ab6.js","assets/floatRGBA-77089d96.js","assets/CIMResourceManager-59c91a6c.js","assets/Rasterizer-d116e213.js","assets/rasterizingUtils-6758f537.js","assets/imageutils-898bba58.js","assets/utils-dff16f1b.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-eb2f0e65.js","assets/devEnvironmentUtils-5002a058.js"]);return a(e,t)}default:return}}function Ze(e){return e&&"opacity"in e?e.opacity*Ze(e.parent):1}async function Va(e,t){if(!e)return;const a=e.sourceLayer,n=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=Ze(n);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const d=e.symbol.type==="web-style"?await st(e.symbol,{...t,cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return F(d,null,l),d}const o=(t!=null?t.renderer:null)??(n&&"renderer"in n?n.renderer:null);let s=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!s)return;if(s=s.type==="web-style"?await s.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):s.clone(),!(o&&"visualVariables"in o&&o.visualVariables&&o.visualVariables.length))return F(s,null,l),s;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(t==null||t.arcade==null)){const d={...t};d.arcade=await et(),t=d}const{getColor:i,getOpacity:r,getAllSizes:c,getRotationAngle:m}=await E(()=>import("./index-2e5318f2.js").then(d=>d.mj),["assets/index-2e5318f2.js","assets/index-dc13cc80.css"]),p=[],u=[],f=[],h=[];for(const d of o.visualVariables)switch(d.type){case"color":p.push(d);break;case"opacity":u.push(d);break;case"rotation":h.push(d);break;case"size":d.target||f.push(d)}const y=!!p.length&&p[p.length-1],v=y?i(y,e,t):null,b=!!u.length&&u[u.length-1];let g=b?r(b,e,t):null;if(l!=null&&(g=g!=null?g*l:l),F(s,v,g),f.length){const d=c(f,e,t);await it(s,d)}for(const d of h)rt(s,m(d,e,t),d.axis);return s}export{ze as A,H as B,Yt as C,Ea as D,Kt as E,ea as L,Se as M,Ft as N,Ce as S,Xt as V,x as a,Ia as b,$a as c,wt as d,vt as e,_a as f,$t as g,za as h,Me as i,ja as j,q as k,dt as l,Za as m,xa as n,bt as o,Sa as p,Ca as q,zt as r,xt as s,ka as t,Ma as u,k as v,ga as w,Va as x,Mt as y,Aa as z};
