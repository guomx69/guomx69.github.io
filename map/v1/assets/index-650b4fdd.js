(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();function g(t,e,i,r){var n,l=arguments.length,d=l<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,e,i,r);else for(var y=t.length-1;y>=0;y--)(n=t[y])&&(d=(l<3?n(d):l>3?n(e,i,d):n(e,i))||d);return l>3&&d&&Object.defineProperty(e,i,d),d}function Iv(t,e,i,r){function n(l){return l instanceof i?l:new i(function(d){d(l)})}return new(i||(i=Promise))(function(l,d){function y($){try{x(r.next($))}catch(E){d(E)}}function v($){try{x(r.throw($))}catch(E){d(E)}}function x($){$.done?l($.value):n($.value).then(y,v)}x((r=r.apply(t,e||[])).next())})}const qU="modulepreload",HU=function(t){return"/map/v1/"+t},$T={},le=function(e,i,r){if(!i||i.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(i.map(l=>{if(l=HU(l),l in $T)return;$T[l]=!0;const d=l.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(!!r)for(let $=n.length-1;$>=0;$--){const E=n[$];if(E.href===l&&(!d||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${y}`))return;const x=document.createElement("link");if(x.rel=d?"stylesheet":qU,d||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),d)return new Promise(($,E)=>{x.addEventListener("load",$),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e())};function WU(t){return t&&t.release&&typeof t.release=="function"}function JU(t){return t&&t.acquire&&typeof t.acquire=="function"}let Nh=class wx{constructor(e,i,r,n=1,l=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(l),this._initialSize=l,this._ctor)for(let d=0;d<l;d++)this._pool[d]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(wx.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):JU(i)&&i.acquire(...e),i}release(e){e&&!wx.test.disabled&&(this._releaseFunction?this._releaseFunction(e):WU(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Nh.test={disabled:!1};function YU(t){t.length=0}let _s=class{constructor(e=50,i=50){this._pool=new Nh(Array,void 0,YU,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return c3.acquire()}static release(e){return c3.release(e)}static prune(){c3.prune()}};const c3=new _s(100);function v5e(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function KU(t,e){for(const i of t)if(i!=null&&e(i))return i}function Qb(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function uh(t,e){return t!=null?e(t):null}function br(t,e){return Vd(t,e),t}function Vd(t,e){if(t==null)throw new Error(e??"value is None")}function ri(t){return t==null||t.destroy(),null}function b5e(t){return t==null||t.dispose(),null}function Ii(t){return t==null||t.remove(),null}function H1(t){return t==null||t.abort(),null}function w5e(t){return t==null||t.release(),null}function ZU(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function XU(t){return null}function _5e(t,e){const i=new Array;for(const r of t)i.push(r!=null?e(r):null);return i}function x5e(t,e){for(const i of t)uh(i,e)}function S5e(t){return t}let Gs=class _x{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Qb(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Qb(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof _x)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof _x?i.removeAll():i.remove()}};const XP=Symbol("Accessor-beforeDestroy");function D2(t){return Vl(()=>t.forEach(e=>e!=null&&e.remove()))}function Vl(t){return{remove:()=>{t&&(t(),t=void 0)}}}let d3=class uc{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*uc._m}getInt(){return this._seed=(uc._a*this._seed+uc._c)%uc._m,this._seed}getFloat(){return this.getInt()/(uc._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/uc._m*r}};d3._m=2147483647,d3._a=48271,d3._c=0;const M5e=1.5;function QU(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):t.filter((i,r,n)=>n.indexOf(i)===r)}function R2(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function $5e(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function T5e(t,e,i){let r,n;return i?(r=e.filter(l=>!t.some(d=>i(d,l))),n=t.filter(l=>!e.some(d=>i(d,l)))):(r=e.filter(l=>!t.includes(l)),n=t.filter(l=>!e.includes(l))),{added:r,removed:n}}function I5e(t){return t&&typeof t.length=="number"}const eq=!!Array.prototype.fill;function E5e(t,e){if(eq)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function A5e(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let QP=class{constructor(){this.last=0}};const eC=new QP;function xx(t,e,i,r){r=r||eC;const n=Math.max(0,r.last-10);for(let d=n;d<i;++d)if(t[d]===e)return r.last=d,d;const l=Math.min(n,i);for(let d=0;d<l;++d)if(t[d]===e)return r.last=d,d;return-1}function tq(t,e,i,r){const n=i??t.length,l=xx(t,e,n,r);if(l!==-1)return t[l]=t[n-1],i==null&&t.pop(),e}const oo=new Set;function iq(t,e,i=t.length,r=e.length,n,l){if(r===0||i===0)return i;oo.clear();for(let y=0;y<r;++y)oo.add(e[y]);n=n||eC;const d=Math.max(0,n.last-10);for(let y=d;y<i;++y)if(oo.has(t[y])&&(l&&l.push(t[y]),oo.delete(t[y]),t[y]=t[i-1],--i,--y,oo.size===0||i===0))return oo.clear(),i;for(let y=0;y<d;++y)if(oo.has(t[y])&&(l&&l.push(t[y]),oo.delete(t[y]),t[y]=t[i-1],--i,--y,oo.size===0||i===0))return oo.clear(),i;return oo.clear(),i}function rq(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Yo(t,e){return t!=null}let hh;function ce(t){return typeof hh[t]=="function"?hh[t]=hh[t](globalThis):hh[t]}var UP,qP,HP,WP;hh=(UP=globalThis.dojoConfig)!=null&&UP.has||(qP=globalThis.esriConfig)!=null&&qP.has?{...(HP=globalThis.dojoConfig)==null?void 0:HP.has,...(WP=globalThis.esriConfig)==null?void 0:WP.has}:{},ce.add=(t,e,i,r)=>((r||hh[t]===void 0)&&(hh[t]=e),i&&ce(t)),ce.cache=hh,ce.add("esri-deprecation-warnings",!0),ce.add("esri-force-fullscreen-debug",!1),(()=>{var e;ce.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ce.add("host-browser",t),ce.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ce.add("dom",t),ce("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,l=parseFloat(n);if(ce.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ce.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ce.add("khtml",n.includes("Konqueror")?l:void 0),ce.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ce.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ce.add("webkit",!ce("wp")&&!ce("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ce.add("chrome",!ce("edge")&&!ce("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ce.add("android",!ce("wp")&&parseFloat(r.split("Android ")[1])||void 0),ce.add("safari",!n.includes("Safari")||ce("wp")||ce("chrome")||ce("android")||ce("edge")||ce("opr")?void 0:parseFloat(n.split("Version/")[1])),ce.add("mac",n.includes("Macintosh")),!ce("wp")&&/(iPhone|iPod|iPad)/.test(r)){const d=RegExp.$1.replace(/P/,"p"),y=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",v=parseFloat(y.replace(/_/,".").replaceAll("_",""));ce.add(d,v),ce.add("ios",v)}ce("webkit")||(!r.includes("Gecko")||ce("wp")||ce("khtml")||ce("edge")||ce.add("mozilla",l),ce("mozilla")&&ce.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ce.add("esri-mobile",e),i&&ce.add("esri-iPhone",i),ce.add("esri-geolocation",!!navigator.geolocation)}ce.add("esri-wasm","WebAssembly"in globalThis),ce.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ce.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ce.add("esri-atomics","Atomics"in globalThis),ce.add("esri-workers","Worker"in globalThis),ce.add("web-feat:cache","caches"in globalThis),ce.add("esri-workers-arraybuffer-transfer",!ce("safari")||Number(ce("safari"))>=12),ce.add("workers-pool-size",8),ce.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ce.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ce.add("featurelayer-animation-enabled",!0),ce.add("featurelayer-snapshot-enabled",!0),ce.add("featurelayer-snapshot-point-min-threshold",8e4),ce.add("featurelayer-snapshot-point-max-threshold",4e5),ce.add("featurelayer-snapshot-point-coverage",.1),ce.add("featurelayer-advanced-symbols",!1),ce.add("featurelayer-pbf",!0),ce.add("featurelayer-pbf-statistics",!1),ce.add("feature-layers-workers",!0),ce.add("feature-polyline-generalization-factor",1),ce.add("mapview-transitions-duration",200),ce.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ce.add("mapserver-pbf-version-support",10.81),ce.add("mapservice-popup-identify-max-tolerance",20),ce.add("heatmap-allow-raster-fallback",!1),ce.add("heatmap-force-raster",!1),ce("host-webworker")||ce("host-browser")&&(ce.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ce.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ce.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ce.add("esri-image-decode",!1,!0,!0)})}return!1}),ce.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function P5e(t){return t instanceof ArrayBuffer}function yM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function tC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function iC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function mM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function rC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function gM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function sC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function j2(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function F2(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function sq(t){return!("buffer"in t)}function C5e(t){return t!=null?sq(t)?8*t.length+12:t.byteLength+nq:0}const nq=145,O5e=1024;function L5e(t){return F2(t)||j2(t)||gM(t)||mM(t)||yM(t)}function D5e(t){return F2(t)||j2(t)}function R5e(t){return F2(t)?179769e303:j2(t)?3402823e32:sC(t)?4294967295:rC(t)?65535:tC(t)||iC(t)?255:gM(t)?2147483647:mM(t)?32767:yM(t)?127:256}function nC(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&nC(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function ae(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=lC(t);if(e!=null)return e;if(ew(t))return t.clone();if(oC(t))return t.map(ae);if(aC(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=ae(t[r]);return i}function Sx(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=lC(t);if(e!=null)return e;if(oC(t)){let i=!0;const r=t.map(n=>{const l=Sx(n);return n!=null&&l==null&&(i=!1),l});return i?r:null}if(ew(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!aC(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],l=Sx(n);if(n!=null&&l==null)return null;i[r]=l}return i}return null}function ew(t){return typeof t.clone=="function"}function oC(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function aC(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function TT(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function lC(t){if(yM(t)||tC(t)||iC(t)||mM(t)||rC(t)||gM(t)||sC(t)||j2(t)||F2(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,ae(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(ae(i));return e}return null}function vM(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function uC(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&R2(t,e):t instanceof Set?e instanceof Set&&aq(t,e):t instanceof Map?e instanceof Map&&lq(t,e):!!TT(t)&&TT(e)&&oq(t,e))}function oq(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function aq(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function lq(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function _r(t){return t.__accessor__??null}function uq(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function Ev(t,e,i){return i?tw(t,e,{policy:i,path:""}):tw(t,e,null)}function tw(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const l=n;let d=null,y="merge";if(i&&(d=i.path?`${i.path}.${n}`:n,y=i.policy(d)),y==="replace"||y==="replace-arrays"&&Array.isArray(r[l]))return r[l]=e[l],r;if(r[l]===void 0)return r[l]=ae(e[l]),r;let v=r[l],x=e[l];if(v===x)return r;if(Array.isArray(x)||Array.isArray(r))v=v?Array.isArray(v)?r[l]=v.concat():r[l]=[v]:r[l]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach($=>{v.includes($)||v.push($)}));else if(x&&typeof x=="object")if(i){const $=i.path;i.path=d,r[l]=tw(v,x,i),i.path=$}else r[l]=tw(v,x,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[l]=x);return r},t||{}):t}function hC(t){return Array.isArray(t)?t:t.split(".")}function IT(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function hq(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...IT(i));return e}return IT(t)}function cC(t,e,i,r){const n=hq(e);if(n.length!==1){const l=n.map(d=>r(t,d,i));return D2(l)}return r(t,n[0],i)}function dC(t){let e=!1;return()=>{e||(e=!0,t())}}function pC(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=_r(e);return uq(r,i)?r.get(i):e[i]}function fC(t,e,i){if(t==null)return t;const r=pC(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:fC(r,e,i+1)}function Mm(t,e,i=0){return typeof e!="string"||e.includes(".")?fC(t,hC(e),i):pC(e,t)}function iw(t,e){return Mm(t,e)}function ET(t,e){return Mm(e,t)!==void 0}function $m(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=ae(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function N2(t,e){const i=$m(t);let r=i[e];return r||(r=i[e]={}),r}function cq(t,e){return Ev(t,e,pq)}const dq=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function pq(t){return dq.test(t)?"replace":"merge"}function yC(t,e,i=!1){return gC(t,e,i)}function Tm(t,e){if(e!=null)return e[t]||mC(t.split("."),!1,e)}function ns(t,e,i){const r=t.split("."),n=r.pop(),l=mC(r,!0,i);l&&n&&(l[n]=e)}function mC(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function gC(t,e,i){return e?Object.keys(e).reduce((r,n)=>{let l=r[n],d=e[n];return l===d?r:l===void 0?(r[n]=ae(d),r):(Array.isArray(d)||Array.isArray(r)?(l=l?Array.isArray(l)?r[n]=l.concat():r[n]=[l]:r[n]=[],d&&(Array.isArray(d)||(d=[d]),i?d.forEach(y=>{l.includes(y)||l.push(y)}):r[n]=d.concat())):d&&typeof d=="object"?r[n]=gC(l,d,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=d),r)},t||{}):t}var JP;const Vt={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(JP=globalThis.location)==null?void 0:JP.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(yC(Vt,globalThis.esriConfig,!0),delete Vt.has),!Vt.assetsPath){{const t="4.27";Vt.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Vt.defaultAssetsPath=Vt.assetsPath}const fq=/\{([^\}]+)\}/g;function AT(t){return t??""}function Jn(t,e){return t.replaceAll(fq,typeof e=="object"?(i,r)=>AT(Tm(r,e)):(i,r)=>AT(e(r)))}function j5e(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function bM(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function F5e(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function Mx(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const kT={info:0,warn:1,error:2,none:3};let ve=class Kr{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Kr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Kr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=Kr._loggers;return Kr._loggers=e,i},set throttlingDisabled(e){Kr._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Kr._loggers.get(e)||new Kr({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Kr._throttlingDisabled){const n=this._argsToKey(r),l=this._loggedMessages[e].get(n);if(i==="once"&&l!=null||i==="oncePerTick"&&l&&l>=Kr._tickCounter)return;this._loggedMessages[e].set(n,Kr._tickCounter),Kr._scheduleTickCounterIncrement()}for(const n of Vt.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=Vt.log.level||"warn";return kT[this._parentWithMember("level",i)]<=kT[e]}_argsToKey(...e){return bM(JSON.stringify(e,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}static _scheduleTickCounterIncrement(){Kr._tickCounterScheduled||(Kr._tickCounterScheduled=!0,Promise.resolve().then(()=>{Kr._tickCounter++,Kr._tickCounterScheduled=!1}))}};ve._loggers=new Map,ve._tickCounter=0,ve._tickCounterScheduled=!1,ve._throttlingDisabled=!1;var Al;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Al||(Al={}));let yq=class{constructor(e,i){this._observers=e,this._observer=i}remove(){rq(this._observers,this._observer)}},vC=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return mq;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const l=i.length;for(let d=0;d<l;++d){const y=i[d];if(y.destroyed)n=!0;else if(y===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new yq(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const mq=Vl();var Le;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Le||(Le={}));const $x=Le.USER+1;function Ss(t){switch(t){case"defaults":return Le.DEFAULTS;case"service":return Le.SERVICE;case"portal-item":return Le.PORTAL_ITEM;case"web-scene":return Le.WEB_SCENE;case"web-map":return Le.WEB_MAP;case"link-chart":return Le.LINK_CHART;case"user":return Le.USER;default:return null}}function W1(t){switch(t){case Le.DEFAULTS:return"defaults";case Le.SERVICE:return"service";case Le.PORTAL_ITEM:return"portal-item";case Le.WEB_SCENE:return"web-scene";case Le.WEB_MAP:return"web-map";case Le.LINK_CHART:return"link-chart";case Le.USER:return"user"}return void 0}function gq(t){return W1(t)}var Kt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Kt||(Kt={}));const rw={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},iy=[];let a1=rw;function nt(t){a1.onObservableAccessed(t)}let Av=!1,kv=!1;function Bl(t,e,i){if(Av)return wM(t,e,i);bC(t);const r=e.call(i);return wC(),r}function vq(t,e){return Bl(rw,t,e)}function wM(t,e,i){const r=Av;Av=!0,bC(t);let n=null;try{n=e.call(i)}catch(l){kv&&ve.getLogger("esri.core.accessorSupport.tracking").error(l)}return wC(),Av=r,n}function bC(t){a1=t,iy.push(t)}function wC(){const t=iy.length;if(t>1){const e=iy.pop();a1=iy[t-2],e.onTrackingEnd()}else if(t===1){const e=iy.pop();a1=rw,e.onTrackingEnd()}else a1=rw}function _C(t,e){const i=e.observerObject;if(i.flags&Kt.DepTrackingInitialized)return;const r=kv;kv=!1,i.flags&Kt.AutoTracked?wM(e,e.metadata.get,t):xC(t,e),kv=r}const bq=[];function xC(t,e){const i=e.observerObject;i.flags&Kt.ExplicitlyTracking||(i.flags|=Kt.ExplicitlyTracking,wM(e,()=>{const r=e.metadata.dependsOn||bq;for(const n of r)if(typeof n!="string"||n.includes(".")){const l=hC(n);for(let d=0,y=t;d<l.length&&y!=null&&typeof y=="object";++d)y=PT(y,l[d],d!==l.length-1)}else PT(t,n,!1)}),i.flags&=~Kt.ExplicitlyTracking)}function PT(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const l=parseInt(r,10);if(!isNaN(l))return Array.isArray(t)?t[l]:t.at(l)}const n=_r(t);if(n){const l=n.propertiesByName.get(r);l&&(nt(l.observerObject),_C(t,l))}return i?t[r]:void 0}let CT=class{constructor(e,i){this.propertyName=e,this.metadata=i,this.observerObject=new wq,this._accessed=null,this._handles=null,this.observerObject.flags=Kt.Dirty|(i.nonNullable?Kt.NonNullable:0)|(i.hasOwnProperty("value")?Kt.HasDefaultValue:0)|(i.get===void 0?Kt.DepTrackingInitialized:0)|(i.dependsOn===void 0?Kt.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){const i=this.observerObject;nt(i);const r=e.store,n=this.propertyName,l=i.flags,d=r.get(n);if(l&Kt.Computing||~l&Kt.Dirty&&r.has(n))return d;i.flags|=Kt.Computing;const y=e.host;let v;l&Kt.AutoTracked?v=Bl(this,this.metadata.get,y):(xC(y,this),v=this.metadata.get.call(y)),r.set(n,v,Le.COMPUTED);const x=r.get(n);return x===d?i.flags&=~Kt.Dirty:vq(this.commit,this),i.flags&=~Kt.Computing,x}onObservableAccessed(e){if(e===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Kt.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let r=this._handles;r==null&&(r=[],this._handles=r);for(let n=0;n<i.length;++n)r.push(i[n].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Kt.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},wq=class extends vC{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Kt.Overriden&&(this.flags|=Kt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&Kt.Dirty&&this.onCommitted(),super.destroy()}},_q=class SC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new SC;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,ae(r))}),i}get(e){return this._values.get(e)}originOf(){return Le.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function pg(t,e,i){return t!==void 0}function OT(t,e,i,r){return t!==void 0&&(!(i==null&&t.observerObject.flags&Kt.NonNullable)||(r.lifecycle,Al.INITIALIZING,!1))}function xq(t){return t&&typeof t.destroy=="function"}ve.getLogger("esri.core.accessorSupport.Properties");let Sq=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Al.INITIALIZING,this.store=new _q,this._origin=Le.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new CT(r,i[r]);this.propertiesByName.set(r,n)}this.metadatas=i}initialize(){this.lifecycle=Al.CONSTRUCTING}constructed(){this.lifecycle=Al.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&xq(r)&&(r.destroy(),~i.observerObject.flags&Kt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Al.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);nt(i.observerObject);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.observerObject.flags&Kt.HasDefaultValue)return"defaults"}return W1(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(pg(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);pg(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!pg(n))return"";const l=new Set,d=Bl({onObservableAccessed:v=>l.add(v),onTrackingEnd:()=>{}},()=>{var v;return(v=n.metadata.get)==null?void 0:v.call(e)});let y=`${r}${e.declaredClass.split(".").pop()}.${i}: ${d}
`;if(l.size===0)return y;r+="  ";for(const v of l)v instanceof CT&&(y+=`${r}${v.propertyName}: undefined
`);return y}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(pg(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.observerObject.flags&Kt.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e),r=i==null?void 0:i.observerObject;r&&r.flags&Kt.Overriden&&(r.flags&=~Kt.Overriden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!OT(r,e,i,this))return;const n=r.metadata.cast;if(n){const l=this._cast(n,i),{valid:d,value:y}=l;if(p3.release(l),!d)return;i=y}r.observerObject.flags|=Kt.Overriden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!OT(r,e,i,this))return;const n=r.metadata.cast;if(n){const d=this._cast(n,i),{valid:y,value:v}=d;if(p3.release(d),!y)return;i=v}const l=r.metadata.set;l?l.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Ss(e)}getDefaultOrigin(){return W1(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Al.INITIALIZING?this._origin:Le.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,l=e.propertyName;n.has(l,r)&&vM(i,n.get(l))&&~e.observerObject.flags&Kt.Overriden&&r===n.originOf(l)||(e.invalidate(),n.set(l,i,r),e.commit(),_C(this.host,e))}_cast(e,i){const r=p3.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},Mq=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const p3=new Nh(Mq);function $q(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>r===""?"$":(Tm(r,e)??"").toString())}let MC=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&$q(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ne=class $C extends MC{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ae(i)}catch{return"[object]"}}))}}catch(e){throw ve.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new $C(e.name,e.message,e.details)}};ne.prototype.type="error";function sw(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))sw(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),l=n.splice(n.length-1,1)[0];return void sw(iw(t,n),l,i)}const r=t.__accessor__;r!=null&&Tq(e,r),t[e]=i}}function Tq(t,e){if(ce("esri-unknown-property-errors")&&!Iq(t,e))throw new ne("set:unknown-property",Eq(t,e))}function Iq(t,e){return e.metadatas[t]!=null}function Eq(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let Aq;function kq(){return Aq}let TC=class extends Nh{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=XU(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const fg=[];function nw(t){fg.push(t),fg.length===1&&queueMicrotask(()=>{const e=fg.slice();fg.length=0;for(const i of e)i()})}let l1=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Tx;(function(t){const e=(l,d,y,v)=>{let x=d,$=d;const E=y>>>1,k=l[x-1];for(;$<=E;){$=x<<1,$<y&&v(l[$-1],l[$])<0&&++$;const P=l[$-1];if(v(P,k)<=0)break;l[x-1]=P,x=$}l[x-1]=k},i=(l,d)=>l<d?-1:l>d?1:0;function r(l,d,y,v){d===void 0&&(d=0),y===void 0&&(y=l.length),v===void 0&&(v=i);for(let $=y>>>1;$>d;$--)e(l,$,y,v);const x=d+1;for(let $=y-1;$>d;$--){const E=l[d];l[d]=l[$],l[$]=E,e(l,x,$,v)}}function*n(l,d,y,v){d===void 0&&(d=0),y===void 0&&(y=l.length),v===void 0&&(v=i);for(let $=y>>>1;$>d;$--)e(l,$,y,v),yield;const x=d+1;for(let $=y-1;$>d;$--){const E=l[d];l[d]=l[$],l[$]=E,e(l,x,$,v),yield}}t.sort=r,t.iterableSort=n})(Tx||(Tx={}));const LT=Tx,Pq=1.5,Cq=1.1;let fd=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new QP,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>DT(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,DT(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=xx(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(xx(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=iq(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){LT.sort(this.data,0,this.length,e)}iterableSort(e){return LT.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const n=this.data[r];if(e.call(i,n,r))return n}}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const l=this.data[n];e.call(i,l,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=l,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,n=this.data;for(let l=0;l<r;++l)e.call(i,n[l],l,n)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}};function DT(t){t.data.length>Pq*t.length&&(t.data.length=Math.floor(t.length*Cq))}function Oq(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(r)}}}}const ef=Oq(globalThis);function z2(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function V2(t,e,i){if(!z2(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const n of r)t.addEventListener(n,i);return{remove(){for(const n of r)t.removeEventListener(n,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function IC(t,e,i){if(!z2(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=V2(t,e,n=>{r.remove(),i.call(t,n)});return{remove(){r.remove()}}}const Lq={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function rh({key:t}){return Lq[t]||t}function Ei(t="Aborted"){return new ne("AbortError",t)}function hi(t,e="Aborted"){if(Ko(t))throw Ei(e)}function B2(t){return t!=null?"aborted"in t?t:t.signal:t}function Ko(t){const e=B2(t);return e!=null&&e.aborted}function Nn(t){if(Is(t))throw t}function Ix(t){if(!Is(t))throw t}function Hn(t,e){const i=B2(t);if(i!=null){if(!i.aborted)return IC(i,"abort",()=>e());e()}}function _M(t,e){const i=B2(t);if(i!=null)return hi(i),IC(i,"abort",()=>e(Ei()))}function Ia(t,e){return B2(e)==null?t:new Promise((i,r)=>{let n=Hn(e,()=>r(Ei()));const l=()=>n=Ii(n);t.then(l,l),t.then(i,r)})}function Is(t){return(t==null?void 0:t.name)==="AbortError"}async function p0(t){try{return await t}catch(e){if(!Is(e))throw e;return}}async function $s(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(d=>t[d]),n=await $s(r),l={};return i.map((d,y)=>l[d]=n[y]),l}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const l=i[n];return l.status==="fulfilled"?{promise:r,value:l.value}:{promise:r,error:l.reason}}))}async function Dq(t){return(await $s(t)).filter(e=>!!e.value).map(e=>e.value)}function G2(t,e=void 0,i){const r=new AbortController;return Hn(i,()=>r.abort()),new Promise((n,l)=>{let d=setTimeout(()=>{d=0,n(e)},t);Hn(r,()=>{d&&(clearTimeout(d),l(Ei()))})})}function Kl(t){return t&&typeof t.then=="function"}function Ex(t){return Kl(t)?t:Promise.resolve(t)}function f0(t,e=-1){let i,r,n,l,d=null;const y=(...v)=>{if(i){r=v,l&&l.reject(Ei()),l=Yn();const k=l.promise;if(d){const P=d;d=null,P.abort()}return k}if(n=l||Yn(),l=null,e>0){const k=new AbortController;i=Ex(t(...v,k.signal));const P=i;G2(e).then(()=>{i===P&&(l?k.abort():d=k)})}else i=1,i=Ex(t(...v));const x=()=>{const k=r;r=n=i=d=null,k!=null&&y(...k)},$=i,E=n;return $.then(x,x),$.then(E.resolve,E.reject),E.promise};return y}function Yn(){let t,e;const i=new Promise((n,l)=>{t=n,e=l}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,l)=>ef.setTimeout(()=>r.reject(l),n),r.promise=i,r}async function RT(t){await Promise.resolve(),hi(t)}function Y5e(t){return t}let Rq=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},jq=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},Ax=0;const Ef={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},kx=["prepare","preRender","render","postRender","update","finish"],Px=[],Td=new fd;let Fq=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const ow={frameTasks:Td,willDispatch:!1,clearFrameTasks:Nq,dispatch:kC,executeFrameTasks:zq};function tf(t){const e=new jq(t);return Px.push(e),ow.willDispatch||(ow.willDispatch=!0,nw(kC)),e}function O0(t){const e=new Rq(t);return Td.push(e),aw==null&&(Ax=performance.now(),aw=requestAnimationFrame(EC)),new Fq(e)}let aw=null;function Nq(t=!1){Td.forAll(e=>{e.removed=!0}),t&&AC()}function EC(){const t=performance.now();aw=null,aw=Td.length>0?requestAnimationFrame(EC):null,ow.executeFrameTasks(t)}function zq(t){const e=t-Ax;Ax=t;const i=1e3/60,r=Math.max(0,e-i);Ef.time=t,Ef.frameDuration=i-r;for(let n=0;n<kx.length;n++){const l=performance.now(),d=kx[n];Td.forAll(y=>{var v;y.paused||y.removed||(n===0&&y.ticks++,y.phases[d]&&(Ef.elapsedFrameTime=performance.now()-t,Ef.deltaTime=y.ticks===0?0:e,(v=y.phases[d])==null||v.call(y,Ef)))}),Vq[n].record(performance.now()-l)}AC(),Bq.record(performance.now()-t)}const yg=new fd;function AC(){Td.forAll(t=>{t.removed&&yg.push(t)}),Td.removeUnorderedMany(yg.data,yg.length),yg.clear()}function kC(){for(;Px.length;){const t=Px.shift();t.isActive&&t.callback()}ow.willDispatch=!1}function Q5e(t=1,e){const i=Yn(),r=()=>{Ko(e)?i.reject(Ei()):t===0?i():(--t,nw(()=>r()))};return r(),i.promise}const Vq=kx.map(t=>new l1(t)),Bq=new l1("total");function Gq(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let Uq=0;function u1(){return++Uq}let U2=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new qq(e),jT.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;jT.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let n=0;n<i.length;++n)e.push(i[n].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},qq=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Hq}};const jT=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Hq(){}let y0=!1;const lw=[];function PC(t,e){let i=new U2(l),r=null,n=!1;function l(){if(!i||n)return;if(y0)return void LC(l);const y=r;i.clear(),y0=!0,n=!0,r=Bl(i,t),n=!1,y0=!1,e(r,y),DC()}function d(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Bl(i,t),n=!1,{remove:d}}function CC(t,e){let i=new U2(n),r=null;function n(){e(r,d)}function l(){i&&(i.destroy(),i=null),r=null}function d(){return i?(i.clear(),r=Bl(i,t),r):null}return d(),{remove:l}}function OC(t){let e=new U2(r),i=!1;function r(){e&&!i&&(y0?LC(r):(e.clear(),y0=!0,i=!0,Bl(e,t),i=!1,y0=!1,DC()))}function n(){e&&(e.destroy(),e=null)}return i=!0,Bl(e,t),i=!1,{remove:n}}function LC(t){lw.includes(t)||lw.unshift(t)}function DC(){for(;lw.length;)lw.pop()()}var h1;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(h1||(h1={}));let J1=class{constructor(){this.uid=u1(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,l){return this.pool.acquire(h1.Untracked,e,i,r,n,l,vM)}static acquireTracked(e,i,r,n){return this.pool.acquire(h1.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===h1.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,l,d,y){this.uid=u1(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=l,this.path=d,this.equals=y}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=u1(),this.removed=!0}};J1.pool=new TC(J1);const Pv=new _s,Ol=new Set;let uw;function hw(t){Ol.delete(t),Ol.add(t),uw||(uw=tf(Yq))}function Wq(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Jq(t){for(const e of Ol.values())e.target===t&&(e.removed=!0)}function Yq(){let t=10;for(;uw&&t--;){uw=null;const e=Kq(),i=Pv.acquire();for(const r of e){const n=r.uid;Wq(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Ol)r.removed&&(i.push(r),Ol.delete(r));for(const r of i)J1.pool.release(r);Pv.release(i),Pv.release(e),Cx.forEach(r=>r())}}function Kq(){const t=Pv.acquire();t.length=Ol.size;let e=0;for(const i of Ol)t[e]=i,++e;return Ol.clear(),t}const Cx=new Set;function Zq(t){return Cx.add(t),{remove(){Cx.delete(t)}}}function Xq(t,e,i){let r=cC(t,e,i,(n,l,d)=>{let y,v,x=CC(()=>Mm(n,l),($,E)=>{n.__accessor__.destroyed||y&&y.uid!==v?r.remove():(y||(y=J1.acquireUntracked($,d,E,n,l),v=y.uid),hw(y))});return{remove:dC(()=>{x.remove(),y&&(y.uid!==v||y.removed||(y.removed=!0,hw(y)),y=null),r=x=null})}});return r}function Qq(t,e,i){const r=cC(t,e,i,(n,l,d)=>{let y=!1;return PC(()=>Mm(n,l),(v,x)=>{n.__accessor__.destroyed?r.remove():y||(y=!0,vM(x,v)||d.call(n,v,x,l,n),y=!1)})});return r}function eH(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:r?Qq(t,e,i):Xq(t,e,i)}function tH(t,e,i){let r,n,l=CC(t,(d,y)=>{r&&r.uid!==n?l.remove():(r||(r=J1.acquireTracked(d,e,y,i),n=r.uid),hw(r))});return{remove:dC(()=>{l.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,hw(r)),r=null),l=null})}}function iH(t,e,i){let r=!1;return PC(t,(n,l)=>{r||(r=!0,i(l,n)||e(n,l),r=!1)})}function rH(t,e,i=!1,r=uC){return i?iH(t,e,r):tH(t,e,r)}function FT(t){return Gq(Ol,e=>e.oldValue===t)}function q2(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function xM(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}const m0=ve.getLogger("esri.core.accessorSupport.ensureTypes");function sH(t){return t==null?t:new Date(t)}function nH(t){return t==null?t:!!t}function Im(t){return t==null?t:t.toString()}function zn(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function H2(t){return t==null?t:Math.round(parseFloat(t))}function RC(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function cw(t,e){return e!=null&&t&&!(e instanceof t)}function jC(t){return t&&"isCollection"in t}function NT(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function oH(t,e){if(!e||!e.constructor||!jC(e.constructor))return Ox(t,e)?e:new t(e);const i=NT(t.prototype.itemType),r=NT(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(Ox(t,e),e):new t(e):e}function Ox(t,e){return!!RC(e)&&(m0.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+W2(t)+"'"),!0)}function Id(t,e){return e==null?e:jC(t)?oH(t,e):cw(t,e)?Ox(t,e)?e:new t(e):e}function W2(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const aH=new WeakMap;function lH(t){switch(t){case Number:return zn;case Lt:return H2;case Boolean:return nH;case String:return Im;case Date:return sH;default:return xM(aH,t,()=>Id.bind(null,t))}}function Di(t,e){const i=lH(t);return arguments.length===1?i:i(e)}function Y1(t,e,i){return arguments.length===1?Y1.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function uH(t,e){return arguments.length===1?Y1(i=>Di(t,i)):Y1(i=>Di(t,i),e)}function FC(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>FC(t,e-1,r)):t(i)}function dw(t,e,i){if(arguments.length===2)return l=>dw(t,e,l);if(!i)return i;i=FC(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let l=0;l<r;l++)i=[i];return i}function hH(t,e,i){return arguments.length===2?dw(r=>Di(t,r),e):dw(r=>Di(t,r),e,i)}function NC(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function Lx(t,e){if(arguments.length===2)return Lx(t).call(null,e);const i=new Set,r=t.filter(y=>typeof y!="function"),n=t.filter(y=>typeof y=="function");for(const y of t)typeof y!="string"&&typeof y!="number"||i.add(y);let l=null,d=null;return(y,v)=>{if(y==null)return y;const x=typeof y,$=x==="string"||x==="number";return $&&(i.has(y)||n.some(E=>x==="string"&&E===String||x==="number"&&E===Number))||x==="object"&&n.some(E=>!cw(y,E))?y:($&&r.length?(l||(l=r.map(E=>typeof E=="string"?`'${E}'`:`${E}`).join(", ")),m0.error("Accessor#set",`'${y}' is not a valid value for this property, only the following values are valid: ${l}`)):typeof y=="object"&&n.length?(d||(d=n.map(E=>W2(E)).join(", ")),m0.error("Accessor#set",`'${y}' is not a valid value for this property, value must be one of ${d}`)):m0.error("Accessor#set",`'${y}' is not a valid value for this property`),v&&(v.valid=!1),null)}}function Fa(t,e){if(arguments.length===2)return Fa(t).call(null,e);const i={},r=[],n=[];for(const v in t.typeMap){const x=t.typeMap[v];i[v]=Di(x),r.push(W2(x)),n.push(v)}const l=()=>`'${r.join("', '")}'`,d=()=>`'${n.join("', '")}'`,y=typeof t.key=="string"?v=>v[t.key]:t.key;return v=>{if(t.base&&!cw(t.base,v)||v==null)return v;const x=y(v)||t.defaultKeyValue,$=i[x];if(!$)return m0.error("Accessor#set",`Invalid property value, value needs to be one of ${l()}, or a plain object that can autocast (having .type = ${d()})`),null;if(!cw(t.typeMap[x],v))return v;if(typeof t.key=="string"&&!RC(v)){const E={};for(const k in v)k!==t.key&&(E[k]=v[k]);return $(E)}return $(v)}}let Lt=class{};const sxe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function cH(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function zC(t){switch(t.type){case"native":return Di(t.value);case"array":return Y1(zC(t.value));case"one-of":return dH(t);default:return null}}function dH(t){let e=null;return(i,r)=>Rx(i,t)?i:(e==null&&(e=Dx(t)),m0.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function Dx(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Lt:return"integer";case Date:return"date";default:return W2(t.value)}case"array":return`array of ${Dx(t.value)}`;case"one-of":{const e=t.values.map(i=>Dx(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function Rx(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Lt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!Rx(i,e.value));case"one-of":return e.values.some(i=>Rx(t,i))}}function S(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=N2(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&ve.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const l=t.aliasOf;if(l){const v=typeof l=="string"?l:l.source,x=typeof l=="string"?null:l.overridable===!0;let $;n.dependsOn=[v],n.get=function(){let E=iw(this,v);if(typeof E=="function"){$||($=v.split(".").slice(0,-1).join("."));const k=iw(this,$);k&&(E=E.bind(k))}return E},n.readOnly||(n.set=x?function(E){this._override(i,E)}:function(E){sw(this,v,E)})}const d=t.type,y=t.types;n.cast||(d?n.cast=pH(d):y&&(Array.isArray(y)?n.cast=Y1(Fa(y[0])):n.cast=Fa(y))),cq(n,t),t.range&&(n.cast=fH(n.cast,t.range))}}function VC(t,e,i){const r=N2(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function pH(t){let e=0,i=t;if(cH(t))return zC(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(NC(r))return e===0?Lx(r):dw(Lx(r),e);if(e===1)return uH(r);if(e>1)return hH(r,e);const n=t;return n.from?n.from:Di(n)}function fH(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function yH(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(l=>{e[l]=n}),delete e[r]}}}let Kn=class extends MC{constructor(e,i,r){super(e,i,r)}};Kn.prototype.type="warning";function BC(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const jx=ve.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function zT(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||vH(t)&&ns("read.reader",rf(t),e))}function rf(t){var i,r;const e=t.ndimArray??0;if(e>1)return gH(t);if(e===1)return VT(t);if("type"in t&&UC(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,l=VT(typeof n=="function"?{type:n}:{types:n});return(d,y,v)=>{const x=l(d,y,v);return x&&new t.type(x)}}return SM(t)}function SM(t){return"type"in t?mH(t.type):bH(t.types)}function mH(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void jx.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const l=new t;return l.read(e,r),l}:t.fromJSON}function GC(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>GC(t,n,i,r-1)):t(e,void 0,i)}function gH(t){const e=SM(t),i=GC.bind(null,e),r=t.ndimArray??0;return(n,l,d)=>{if(n==null)return n;n=i(n,d,r);let y=r,v=n;for(;y>0&&Array.isArray(v);)y--,v=v[0];if(v!==void 0)for(let x=0;x<y;x++)n=[n];return n}}function VT(t){const e=SM(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const d=[];for(const y of i){const v=e(y,void 0,n);v!==void 0&&d.push(v)}return d}const l=e(i,void 0,n);return l!==void 0?[l]:void 0}}function UC(t){if(!BC(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?MM(e.Type):qC(e.Type))}function vH(t){return"types"in t?qC(t.types):MM(t.type)}function MM(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||UC(t))}function qC(t){for(const e in t.typeMap)if(!MM(t.typeMap[e]))return!1;return!0}function bH(t){let e=null;const i=t.errorContext??"type";return(r,n,l)=>{if(r==null)return r;const d=typeof r;if(d!=="object")return void jx.error(`Expected JSON value of type 'object' to deserialize, but got '${d}'`);e||(e=wH(t));const y=t.key;if(typeof y!="string")return;const v=r[y],x=v?e[v]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!x){const E=`Type '${v||"unknown"}' is not supported`;return l&&l.messages&&r&&l.messages.push(new Kn(`${i}:unsupported`,E,{definition:r,context:l})),void jx.error(E)}const $=new x;return $.read(r,l),$}}function wH(t){var i,r;const e={};for(const n in t.typeMap){const l=t.typeMap[n],d=$m(l.prototype);if(typeof t.key=="function")continue;const y=d[t.key];if(!y)continue;(i=y.json)!=null&&i.type&&Array.isArray(y.json.type)&&y.json.type.length===1&&typeof y.json.type[0]=="string"&&(e[y.json.type[0]]=l);const v=(r=y.json)==null?void 0:r.write;if(!v||!v.writer){e[n]=l;continue}const x=v.target,$=typeof x=="string"?x:t.key,E={};v.writer(n,E,$),E[$]&&(e[E[$]]=l)}return e}function _H(t){if(t.json||(t.json={}),GT(t.json),UT(t.json),BT(t.json),t.json.origins)for(const e in t.json.origins)GT(t.json.origins[e]),UT(t.json.origins[e]),BT(t.json.origins[e]);return!0}function BT(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function GT(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function UT(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function qT(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&BC(t.type))?e.write.writer=MH:i>1?e.write.writer=$H(i):e.types?Array.isArray(e.types)?e.write.writer=SH(e.types[0]):e.write.writer=xH(e.types):e.write.writer=K1}function xH(t){return(e,i,r,n)=>e?HC(e,t,n)?K1(e,i,r,n):void 0:K1(e,i,r,n)}function HC(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ne(`${r}:unsupported`,n,{definition:t,context:i})),ve.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function SH(t){return(e,i,r,n)=>!e||!Array.isArray(e)?K1(e,i,r,n):K1(e.filter(l=>HC(l,t,n)),i,r,n)}function K1(t,e,i,r){ns(i,pw(t,r),e)}function pw(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?fw(t):t}function fw(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function MH(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(l=>pw(l,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[pw(t,r)],ns(i,n,e)}function WC(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>WC(r,e,i-1)):pw(t,e)}function $H(t){return(e,i,r,n)=>{let l;if(e===null)l=null;else{l=WC(e,n,t);let d=t,y=l;for(;d>0&&Array.isArray(y);)d--,y=y[0];if(y!==void 0)for(let v=0;v<d;v++)l=[l]}ns(r,l,i)}}function TH(t,e){return $M(t,"any",e==null?void 0:e.origin)}function Fx(t,e){return $M(t,"read",e==null?void 0:e.origin)}function JC(t,e){return $M(t,"write",e==null?void 0:e.origin)}function $M(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function IH(t){const e=EH(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],n=r.types?AH(r):e;zT(n,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),qT(n,r)}zT(e,t.json,!0),qT(e,t.json)}function EH(t){return t.json.types?Nx(t.json):t.type?YC(t):Nx(t)}function AH(t){return t.type?YC(t):Nx(t)}function YC(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!NC(i);)i=i[0],e++;return{type:i,ndimArray:e}}function Nx(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function kH(t){_H(t)&&(yH(t),IH(t))}const f3=new Set,y3=new Set;function J(t){return e=>{e.prototype.declaredClass=t,CH(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!f3.has(n.initialize)&&(f3.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!y3.has(n.destroy)&&(y3.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);f3.clear(),y3.clear();class l extends e{constructor(...y){if(super(...y),this.constructor===l&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let v=i.length-1;v>=0;v--)i[v].call(this)}}),r.length){let v=!1;const x=this[XP];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!v){v=!0,x.call(this);for(let $=0;$<r.length;$++)r[$].call(this)}}})}this.postscript(...y)}}}return l.__accessorMetadata__=$m(e.prototype),l.prototype.declaredClass=t,l}}function PH(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;nt(r.observerObject);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function CH(t){const e=t.prototype,i=$m(e),r={};for(const n of Object.getOwnPropertyNames(i)){const l=i[n];kH(l),r[n]={enumerable:!0,configurable:!0,get:PH(n,l),set(d){const y=this.__accessor__;if(y!==void 0){if(!Object.isFrozen(this)){if(y.initialized&&l.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(y.lifecycle===Al.CONSTRUCTED&&l.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);y.set(n,d)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:d})}}}Object.defineProperties(t.prototype,r)}var KC,ZC;function OH(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const wu=Symbol("Accessor-Handles"),zx=Symbol("Accessor-Initialized");let Be=class XC{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const l=this;class d extends l{constructor(...v){super(...v),this.inherited=null,n&&n.apply(this,v)}}$m(d.prototype);for(const y in e){const v=e[y];d.prototype[y]=typeof v=="function"?function(...x){const $=this.inherited;let E;this.inherited=function(...k){if(l.prototype[y])return l.prototype[y].apply(this,k)};try{E=v.apply(this,x)}catch(k){throw this.inherited=$,k}return this.inherited=$,E}:e[y]}for(const y in i){const v=OH(i[y]);S(v)(d.prototype,y)}return J(r)(d)}constructor(...e){if(this[KC]=null,this[ZC]=!1,this.constructor===XC)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new Sq(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e)),HT.register(this,i.propertiesByName,this)}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[zx]=!0}initialize(){}[XP](){this[wu]=ri(this[wu])}destroy(){var e;this.destroyed||(HT.unregister(this),Jq(this),this.__accessor__.destroy(),(e=kq())==null||e.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[zx]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return iw(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return sw(this,e,i),this}watch(e,i,r){return eH(this,e,i,r)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const l of n)l.remove();return}let r=this[wu];r==null&&(r=this[wu]=new Gs),r.add(e,i)}removeHandles(e){const i=this[wu];i!=null&&i.remove(e)}removeAllHandles(){const e=this[wu];e!=null&&e.removeAll()}hasHandles(e){const i=this[wu];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};KC=wu,ZC=zx;const HT=new FinalizationRegistry(t=>{for(const e of t.values())e.destroy()});let Cv=class QC{constructor(){this._emitter=new QC.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,l){const d=this._listenersMap&&this._listenersMap.get(n);if(!d)return!1;const y=this._target||this;return[...d].forEach(v=>{v.call(y,l)}),d.length>0}on(n,l){if(Array.isArray(n)){const y=n.map(v=>this.on(v,l));return D2(y)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const d=this._listenersMap.get(n)||[];return d.push(l),this._listenersMap.set(n,d),{remove:()=>{const y=this._listenersMap&&this._listenersMap.get(n)||[],v=y.indexOf(l);v>=0&&y.splice(v,1)}}}once(n,l){const d=this.on(n,y=>{d.remove(),l.call(null,y)});return d}hasEventListener(n){const l=this._listenersMap&&this._listenersMap.get(n);return l!=null&&l.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(l,d){return this._emitter.emit(l,d)}on(l,d){return this._emitter.on(l,d)}once(l,d){return this._emitter.once(l,d)}hasEventListener(l){return this._emitter.hasEventListener(l)}};return n=g([J("esri.core.Evented")],n),n};let i=class extends Be{constructor(){super(...arguments),this._emitter=new Cv.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=g([J("esri.core.Evented")],i),t.EventedAccessor=i})(Cv||(Cv={}));const Ha=Cv;var qt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(qt||(qt={}));function TM(t){return(e,i)=>{e[i]=t}}let J2=class extends vC{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var $l;let LH=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const wn=new Nh(LH,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),DH=()=>{};function m3(t){return t?t instanceof Kc?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function g3(t){if(t&&t.length)return t[0]}function RH(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let l=0;for(;l<n&&t[i+l]===e[r+l];)l++;return l}function eO(t,e,i,r){e&&e.forEach((n,l,d)=>{t.push(n),eO(t,i.call(r,n,l,d),i,r)})}const iu=new Set,ru=new Set,su=new Set,v3=new Map;let jH=0,Kc=$l=class extends Ha.EventedAccessor{static isCollection(t){return t!=null&&t instanceof $l}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new J2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:jH++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof $l?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return nt(this._observable),this._items}set items(t){this._emitBeforeChanges(qt.ADD)||(this._splice(0,this.length,m3(t)),this._emitAfterChanges(qt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=DH,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(nt(this._observable),this._emitBeforeChanges(qt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(qt.ADD),this}addMany(t,e=this._items.length){if(nt(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(qt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,m3(t)),this._emitAfterChanges(qt.ADD),this}at(t){if(nt(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(nt(this._observable),!this.length||this._emitBeforeChanges(qt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(qt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return nt(this._observable),this._createNewInstance({items:this._items.map(ae)})}concat(...t){nt(this._observable);const e=t.map(m3);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(nt(this._observable),!this.length||this._emitBeforeChanges(qt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(qt.REMOVE)}every(t,e){return nt(this._observable),this._items.every(t,e)}filter(t,e){let i;return nt(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return nt(this._observable),this._items.find(t,e)}findIndex(t,e){return nt(this._observable),this._items.findIndex(t,e)}flatten(t,e){nt(this._observable);const i=[];return eO(i,this,t,e),new $l(i)}forEach(t,e){return nt(this._observable),this._items.forEach(t,e)}getItemAt(t){return nt(this._observable),this._items[t]}getNextIndex(t){nt(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return nt(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return nt(this._observable),this._items.indexOf(t,e)}join(t=","){return nt(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return nt(this._observable),this._items.lastIndexOf(t,e)}map(t,e){nt(this._observable);const i=this._items.map(t,e);return new $l({items:i})}reorder(t,e=this.length-1){nt(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(qt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(qt.MOVE)}return t}}pop(){if(nt(this._observable),!this.length||this._emitBeforeChanges(qt.REMOVE))return;const t=g3(this._splice(this.length-1,1));return this._emitAfterChanges(qt.REMOVE),t}push(...t){return nt(this._observable),this._emitBeforeChanges(qt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(qt.ADD)),this.length}reduce(t,e){nt(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){nt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return nt(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(nt(this._observable),t<0||t>=this.length||this._emitBeforeChanges(qt.REMOVE))return;const e=g3(this._splice(t,1));return this._emitAfterChanges(qt.REMOVE),e}removeMany(t){if(nt(this._observable),!t||!t.length||this._emitBeforeChanges(qt.REMOVE))return[];const e=t instanceof $l?t.toArray():t,i=this._items,r=[],n=e.length;for(let l=0;l<n;l++){const d=e[l],y=i.indexOf(d);if(y>-1){const v=1+RH(e,i,l+1,y+1),x=this._splice(y,v);x&&x.length>0&&r.push.apply(r,x),l+=v-1}}return this._emitAfterChanges(qt.REMOVE),r}reverse(){if(nt(this._observable),this._emitBeforeChanges(qt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(qt.MOVE),this}shift(){if(nt(this._observable),!this.length||this._emitBeforeChanges(qt.REMOVE))return;const t=g3(this._splice(0,1));return this._emitAfterChanges(qt.REMOVE),t}slice(t=0,e=this.length){return nt(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return nt(this._observable),this._items.some(t,e)}sort(t){if(nt(this._observable),!this.length||this._emitBeforeChanges(qt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(qt.MOVE),this}splice(t,e,...i){nt(this._observable);const r=(e?qt.REMOVE:0)|(i.length?qt.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return nt(this._observable),this._items.slice()}toJSON(){return nt(this._observable),this.toArray()}toLocaleString(){return nt(this._observable),this._items.toLocaleString()}toString(){return nt(this._observable),this._items.toString()}unshift(...t){return nt(this._observable),!t.length||this._emitBeforeChanges(qt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(qt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let l,d;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=tf(()=>this._dispatchChange())),e){if(d=r.splice(t,e),this.hasEventListener("before-remove")){const y=wn.acquire();y.target=this,y.cancellable=!0;for(let v=0,x=d.length;v<x;v++)l=d[v],y.reset(l),this.emit("before-remove",y),y.defaultPrevented&&(d.splice(v,1),r.splice(t,0,l),t+=1,v-=1,x-=1);wn.release(y)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const y=wn.acquire();y.target=this,y.cancellable=!1;const v=d.length;for(let x=0;x<v;x++)y.reset(d[x]),this.emit("after-remove",y);wn.release(y)}}if(i&&i.length){if(n){const $=[];for(const E of i){const k=n.ensureType(E);k==null&&E!=null||$.push(k)}i=$}const y=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),x=t===this.length;if(y||v){const $=wn.acquire();$.target=this,$.cancellable=!0;const E=wn.acquire();E.target=this,E.cancellable=!1;for(const k of i)y?($.reset(k),this.emit("before-add",$),$.defaultPrevented||(x?r.push(k):r.splice(t++,0,k),this._set("length",r.length),v&&(E.reset(k),this.emit("after-add",E)))):(x?r.push(k):r.splice(t++,0,k),this._set("length",r.length),E.reset(k),this.emit("after-add",E));wn.release(E),wn.release($)}else{if(x)for(const $ of i)r.push($);else r.splice(t,0,...i);this._set("length",r.length)}}return(i&&i.length||d&&d.length)&&this._notifyChangeEvent(i,d),d}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=wn.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,wn.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=wn.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),wn.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;iu.clear(),ru.clear(),su.clear();for(const{added:v,removed:x}of i){if(v)if(su.size===0&&ru.size===0)for(const $ of v)iu.add($);else for(const $ of v)ru.has($)?(su.add($),ru.delete($)):su.has($)||iu.add($);if(x)if(su.size===0&&iu.size===0)for(const $ of x)ru.add($);else for(const $ of x)iu.has($)?iu.delete($):(su.delete($),ru.add($))}const r=_s.acquire();iu.forEach(v=>{r.push(v)});const n=_s.acquire();ru.forEach(v=>{n.push(v)});const l=this._items,d=e.items,y=_s.acquire();if(su.forEach(v=>{d.indexOf(v)!==l.indexOf(v)&&y.push(v)}),e.listeners&&(r.length||n.length||y.length)){const v={target:this,added:r,removed:n,moved:y},x=e.listeners.length;for(let $=0;$<x;$++){const E=e.listeners[$];E.removed||E.callback.call(this,v)}}_s.release(r),_s.release(n),_s.release(y)}iu.clear(),ru.clear(),su.clear()}};Kc.ofType=t=>{if(!t)return $l;if(v3.has(t))return v3.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends $l{};return g([TM({Type:t,ensureType:typeof t=="function"?Di(t):Fa(t)})],i.prototype,"itemType",void 0),i=g([J(`esri.core.Collection<${e}>`)],i),v3.set(t,i),i},g([S()],Kc.prototype,"length",void 0),g([S()],Kc.prototype,"items",null),Kc=$l=g([J("esri.core.Collection")],Kc);const ze=Kc;function Ed(t,e,i=ze){return e||(e=new i),e===t||(e.removeAll(),FH(t)?e.addMany(t):t&&e.add(t)),e}function tO(t){return t}function FH(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const WT=new Set;function NH(t,e,i=!1){i&&WT.has(e)||(i&&WT.add(e),t.warn(` DEPRECATED - ${e}`))}function Z1(t,e,i={}){if(ce("esri-deprecation-warnings")){const{moduleName:r}=i;yw(t,`Property: ${(r?r+"::":"")+e}`,i)}}function yw(t,e,i={}){if(ce("esri-deprecation-warnings")){const{replacement:r,version:n,see:l,warnOnce:d}=i;let y=e;r&&(y+=`
	 Replacement: ${r}`),n&&(y+=`
	 Version: ${n}`),l&&(y+=`
	 See ${l} for more details.`),NH(t,y,d)}}let zH=class iO{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new iO;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,ae(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Le.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===Le.DEFAULTS){const n=this._values.get(e);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(e,new VH(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===Le.DEFAULTS?e:Le.USER}},VH=class{constructor(e,i){this.value=e,this.origin=i}};function rO(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Le.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Le.DEFAULTS)})}function BH(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&ET(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&ET(n,i))return!0;return!1}function GH(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function UH(t,e,i,r,n){let l=Fx(e[i],n);GH(l)&&(t[i]=!0);for(const d of Object.getOwnPropertyNames(e))l=Fx(e[d],n),BH(l,i,r)&&(t[d]=!0)}function qH(t,e,i,r){const n=i.metadatas,l=TH(n[e],r),d=l==null?void 0:l.default;if(d===void 0)return;const y=typeof d=="function"?d.call(t,e,r):d;y!==void 0&&i.set(e,y)}const sO={origin:"service"};function nO(t,e,i=sO){if(!e||typeof e!="object")return;const r=_r(t),n=r.metadatas,l={};for(const d of Object.getOwnPropertyNames(e))UH(l,n,d,e,i);r.setDefaultOrigin(i.origin);for(const d of Object.getOwnPropertyNames(l)){const y=Fx(n[d],i).read,v=y&&y.source;let x;x=v&&typeof v=="string"?Mm(e,v):e[d],y&&y.reader&&(x=y.reader.call(t,x,e,i)),x!==void 0&&r.set(d,x)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const d of Object.getOwnPropertyNames(n))l[d]||qH(t,d,r,i)}r.setDefaultOrigin("user")}function HH(t,e,i,r=sO){var l;const n={...r,messages:[]};i(n),(l=n.messages)==null||l.forEach(d=>{d.type!=="warning"||t.loaded?r&&r.messages&&r.messages.push(d):t.loadWarnings.push(d)})}function WH(t,e,i,r,n){var d,y;const l={};return(y=(d=e.write)==null?void 0:d.writer)==null||y.call(t,r,l,i,n),l}function oO(t,e,i,r,n,l){if(!r||!r.write)return!1;const d=t.get(i);if(!n&&r.write.overridePolicy){const y=r.write.overridePolicy.call(t,d,i,l??void 0);y!==void 0&&(n=y)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((d===null&&!n.allowNull&&!n.writerEnsuresNonNull||d===void 0)&&n.isRequired){const y=new ne("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return y&&l&&l.messages?l.messages.push(y):y&&!l&&ve.getLogger("esri.core.accessorSupport.write").error(y.name,y.message),!1}return!(d===void 0||d===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Le.DEFAULTS)&&JH(t,i,l,r,d)||!n.ignoreOrigin&&l&&l.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Ss(l.origin))}function JH(t,e,i,r,n){const l=r.default;if(l===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof l=="function"){if(Array.isArray(n)){const d=l.call(t,e,i??void 0);return R2(d,n)}return!1}return l===n}function YH(t,e,i,r){const n=_r(t),l=n.metadatas,d=JC(l[e],r);return!!d&&oO(t,n,e,d,i,r)}function aO(t,e,i){var l,d;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return Ev(e,t.toJSON(i));const r=_r(t),n=r.metadatas;for(const y in n){const v=JC(n[y],i);if(!oO(t,r,y,v,void 0,i))continue;const x=t.get(y),$=WH(t,v,v.write&&typeof v.write.target=="string"?v.write.target:y,x,i);Object.keys($).length>0&&(e=Ev(e,$),(d=(l=i==null?void 0:i.resources)==null?void 0:l.pendingOperations)!=null&&d.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>Ev(e,$,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:y,oldOrigin:gq(r.store.originOf(y)),newOrigin:i.origin}))}return e}const Em=t=>{let e=class extends t{constructor(...i){super(...i);const r=_r(this),n=r.store,l=new zH;r.store=l,rO(r,n,l)}read(i,r){nO(this,i,r)}write(i,r){return aO(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return KH.call(this,i,r)}};return e=g([J("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function KH(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let ge=class extends Em(Be){};ge=g([J("esri.core.JSONSupport")],ge);var Wu;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Wu||(Wu={}));let ZH=class{constructor(){this._resolver=Yn(),this._status=Wu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Wu.RESOLVED,this._cleanUp()},()=>{this._status=Wu.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Wu.RESOLVED}isRejected(){return this._status===Wu.REJECTED}isFulfilled(){return this._status!==Wu.PENDING}abort(){this._resolver.reject(Ei())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Yn(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||Is(n)||this._resolver.reject(n)}),e.resolve()}};const Y2=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new ZH,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=g([J("esri.core.Promise")],e),e};let mw=class extends Y2(Be){};mw=g([J("esri.core.Promise")],mw);const XH="not-loaded",QH="loading",eW="failed",JT="loaded",lO=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=l=>{const d=new Promise((y,v)=>{const x=_M(l,v);this.destroyed&&v(new ne("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(y,v).finally(()=>{x&&x.remove()})});if(this.loadStatus===XH){this._set("loadStatus",QH);const y=this._loadController=new AbortController;n({signal:y.signal}),Hn(y.signal,()=>{this._promiseProps.abort()})}return r(),d}})),this.when(()=>{this._set("loadStatus",JT),this._loadController=null},r=>{this._set("loadStatus",eW),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController=H1(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===JT}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ne("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return g([S({readOnly:!0})],e.prototype,"loaded",null),g([S({readOnly:!0})],e.prototype,"loadError",void 0),g([S({clonable:!1})],e.prototype,"loadStatus",void 0),g([S({type:[Kn],readOnly:!0})],e.prototype,"loadWarnings",null),e=g([J("esri.core.Loadable")],e),e};let ry=class extends lO(mw){};ry=g([J("esri.core.Loadable")],ry),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=lO,t.isLoadable=e}(ry||(ry={}));const Zo=ry;function tW(t,e,i){return $s(t.map((r,n)=>e.apply(i,[r,n])))}async function iW(t,e,i){return(await $s(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function IM(t){return{ok:!0,value:t}}function EM(t){return{ok:!1,error:t}}function rW(t){return t!=null&&t.ok===!0?t.value:null}function sW(t){return t!=null&&t.ok===!1?t.error:null}async function K2(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return IM(await t)}catch(e){return EM(e)}}async function pxe(t){try{return IM(await t)}catch(e){return Nn(e),EM(e)}}function AM(t,e){return new _u(t,e)}let _u=class extends Be{get value(){return rW(this._result)}get error(){return sW(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=H1(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=IM(n),this._cleanup()},n=>{this._result=EM(n),this._cleanup()}),this._abortHandle=Hn(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ii(this._abortHandle),this._abortController=null}};g([S()],_u.prototype,"value",null),g([S()],_u.prototype,"error",null),g([S()],_u.prototype,"finished",null),g([S()],_u.prototype,"promise",void 0),g([S()],_u.prototype,"_result",void 0),_u=g([J("esri.core.asyncUtils.ReactiveTask")],_u);async function kM(t,e){return await t.load(),nW(t,e)}async function nW(t,e){const i=[],r=(...l)=>{for(const d of l)d!=null&&(Array.isArray(d)?r(...d):ze.isCollection(d)?d.forEach(y=>r(y)):Zo.isLoadable(d)&&i.push(d))};e(r);let n=null;if(await iW(i,async l=>{const d=await K2(oW(l)?l.loadAll():l.load());d.ok!==!1||n||(n=d)}),n)throw n.error;return t}function oW(t){return"loadAll"in t&&typeof t.loadAll=="function"}const aW=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,lW={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function YT(t){const e=t==null?void 0:t.match(aW);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let l=null,d=null,y=null;const{devext:v,qaext:x,www:$}=lW;if(r)if(l=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:d,portalHostname:y}=v);break;case"qa":({customBaseUrl:d,portalHostname:y}=x);break;default:return null}else({customBaseUrl:d,portalHostname:y}=$);else switch(i.toLowerCase()){case"devext":({customBaseUrl:d,portalHostname:y}=v);break;case"qaext":({customBaseUrl:d,portalHostname:y}=x);break;case"www":({customBaseUrl:d,portalHostname:y}=$);break;default:return null}return{customBaseUrl:d,isPortal:!1,portalHostname:y,urlKey:l}}function uW(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function hW(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}const cW=ve.getLogger("esri.core.urlUtils"),sf=Vt.request,KT="esri/config: esriConfig.request.proxyUrl is not set.",uO=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,hO=/^\s*http:/i,dW=/^\s*https:/i,pW=/^\s*file:/i,fW=/:\d+$/,yW=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,mW=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),gW=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let g0=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(mW);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(gW),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const mg={},vW=new g0(Vt.applicationUrl);let is=vW;const bW=wW();let PM=bW;const CM=()=>is,mxe=()=>PM;function wW(){const t=is.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${is.scheme}://${is.host}${is.port!=null?`:${is.port}`:""}`}${e}`}function Wi(t){if(!t)return null;const e={path:null,query:null},i=new g0(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=OM(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function OM(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let l,d;n<0?(l=decodeURIComponent(r),d=""):(l=decodeURIComponent(r.slice(0,n)),d=decodeURIComponent(r.slice(n+1)));let y=i[l];typeof y=="string"&&(y=i[l]=[y]),Array.isArray(y)?y.push(d):i[l]=d}return i}function ZT(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function L0(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",l=e&&e[i];return l?n+encodeURIComponent(l(r)):Array.isArray(r)?r.map(d=>ZT(d)?n+encodeURIComponent(JSON.stringify(d)):n+encodeURIComponent(d)).join("&"):ZT(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function _W(t=!1){let e,i=sf.proxyUrl;if(typeof t=="string"){e=EW(t);const r=Z2(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw cW.warn(KT),new ne("urlutils:proxy-not-set",KT);return e&&Vx()&&(i=FM(i)),Wi(i)}function gxe(t){const e=Z2(t);let i,r;if(e){const n=LM(e.proxyUrl);i=n.path,r=n.query?OM(n.query):null}if(i){const n=Wi(t);t=i+"?"+n.path;const l=L0({...r,...n.query});l&&(t=`${t}?${l}`)}return t}const Af={path:"",query:""};function LM(t){const e=t.indexOf("?");return e!==-1?(Af.path=t.slice(0,e),Af.query=t.slice(e+1)):(Af.path=t,Af.query=null),Af}function cO(t){return t=(t=vw(t=OW(t=LM(t).path),!0)).toLowerCase()}function xW(t){const e={proxyUrl:t.proxyUrl,urlPrefix:cO(t.urlPrefix)},i=sf.proxyRules,r=e.urlPrefix;let n=i.length;for(let l=0;l<i.length;l++){const d=i[l].urlPrefix;if(r.indexOf(d)===0){if(r.length===d.length)return-1;n=l;break}d.indexOf(r)===0&&(n=l+1)}return i.splice(n,0,e),n}function Z2(t){const e=sf.proxyRules,i=cO(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function SW(t,e){if(!t||!e)return!1;t=gw(t),e=gw(e);const i=YT(t),r=YT(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&D0(t,e,!0)}function dO(t,e){return t=gw(t),e=gw(e),vw(t)===vw(e)}function gw(t){const e=(t=Bo(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function pO(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=sf.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function D0(t,e,i=!1){if(!t||!e)return!1;const r=Gx(t),n=Gx(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function DM(t){if(typeof t=="string"){if(!pn(t))return!0;t=Gx(t)}if(D0(t,is))return!0;const e=sf.trustedServers||[];for(let i=0;i<e.length;i++){const r=MW(e[i]);for(let n=0;n<r.length;n++)if(D0(t,r[n]))return!0}return!1}function MW(t){return mg[t]||(jM(t)||Na(t)?mg[t]=[new g0(Bn(t))]:mg[t]=[new g0(`http://${t}`),new g0(`https://${t}`)]),mg[t]}function Bn(t,e=PM,i){return Na(t)?i&&i.preserveProtocolRelative?t:is.scheme==="http"&&is.authority===Go(t).slice(2)?`http:${t}`:`https:${t}`:jM(t)?t:Gl(t[0]==="/"?CW(e):e,t)}function RM(t,e=PM,i){if(t==null||!pn(t))return t;const r=Bo(t),n=r.toLowerCase(),l=Bo(e).toLowerCase().replace(/\/+$/,""),d=i?Bo(i).toLowerCase().replace(/\/+$/,""):null;if(d&&l.indexOf(d)!==0)return t;const y=(E,k,P)=>(P=E.indexOf(k,P))===-1?E.length:P;let v=y(n,"/",n.indexOf("//")+2),x=-1;for(;n.slice(0,v+1)===l.slice(0,v)+"/"&&(x=v+1,v!==n.length);)v=y(n,"/",v+1);if(x===-1||d&&x<d.length)return t;t=r.slice(x);const $=l.slice(x-1).replaceAll(/[^/]+/g,"").length;if($>0)for(let E=0;E<$;E++)t=`../${t}`;else t=`./${t}`;return t}function Bo(t){return t=RW(t=DW(t=LW(t=Bn(t=t.trim()))))}function Gl(...t){const e=t.filter(Yo);if(!e||!e.length)return;const i=[];if(pn(e[0])){const n=e[0],l=n.indexOf("//");l!==-1&&(i.push(n.slice(0,l+1)),kW(e[0])&&(i[0]+="/"),e[0]=n.slice(l+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((n,l)=>l?n.concat(l.split("/")):n,[]);for(let n=0;n<r.length;n++){const l=r[n];l===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!l&&n===r.length-1||l&&(l!=="."||i.length===0))&&i.push(l)}return i.join("/")}function Go(t,e=!1){if(t==null||X2(t)||Bd(t))return null;let i=t.indexOf("://");if(i===-1&&Na(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=vw(t,!0)),t}function pn(t){return Na(t)||jM(t)}function X2(t){return t!=null&&t.slice(0,5)==="blob:"}function Bd(t){return t!=null&&t.slice(0,5)==="data:"}function $W(t){const e=X1(t);return e&&e.isBase64?hW(e.data):null}function vxe(t){return btoa(String.fromCharCode.apply(null,t)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const TW=/^data:(.*?)(;base64)?,(.*)$/;function X1(t){const e=t.match(TW);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function fO(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function bxe(t){const e=$W(t);if(!e)return null;const i=X1(t);return new Blob([e],{type:i.mediaType})}function wxe(t,e){IW(t,e)}function IW(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function Na(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function jM(t){return t!=null&&uO.test(t)}function EW(t){return t!=null&&dW.test(t)||is.scheme==="https"&&Na(t)}function AW(t){return t!=null&&hO.test(t)||is.scheme==="http"&&Na(t)}function kW(t){return t!=null&&pW.test(t)}function FM(t){return Na(t)?`https:${t}`:t.replace(hO,"https:")}function PW(){return is.scheme==="http"}function Vx(){return is.scheme==="https"}function vw(t,e=!1){return Na(t)?t.slice(2):(t=t.replace(uO,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function CW(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function NM(t){let e=0;if(pn(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function _xe(t,e){if(!t)return"";const i=Wi(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(n,"")}function OW(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function yO(t){return t.replace(/\/+$/,"")}function LW(t){if(/^https?:\/\//i.test(t)){const e=LM(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function DW(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function RW(t){const e=sf.httpsDomains;if(!AW(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),fW.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return PW()&&r===is.authority&&!yW.test(t)||(Vx()&&r===is.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||Vx()&&!Z2(t))&&(t=FM(t)),t}function Bx(t,e,i){if(!(e&&i&&t&&pn(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),l=t.indexOf(":",r+2),d=Math.min(n<0?t.length:n,l<0?t.length:l);return t.slice(r+2,d).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(d)}`}function Gx(t){return typeof t=="string"?new g0(Bn(t)):(t.scheme||(t.scheme=is.scheme),t)}function xxe(t){return jW.test(t)}function mO(t,e){const i=Wi(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function gO(t,e,i){const r=Wi(t),n=r.query||{};return n[e]=String(i),`${r.path}?${L0(n)}`}function b3(t,e){const i=Wi(t),r=i.query||{};for(const l in e)r[l]=e[l];const n=L0(r);return n?`${i.path}?${n}`:i.path}function Sxe(t){if(t==null)return null;const e=t.match(vO);return e?e[2]:null}function XT(t){if(t==null)return null;const e=t.match(vO);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function Mxe(t){return typeof t=="string"?X1(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(X1(r.result)),r.onerror=n=>i(n)})}const vO=/([^.]*)\.([^\/]*)$/,jW=/(^data:image\/svg|\.svg$)/i;function Ae(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(l,d)=>{const y=l.constructor.prototype;for(const v of r){const x=VC(l,v,n);x.write&&typeof x.write=="object"||(x.write={}),i&&(x.write.target=i),x.write.writer=y[d]}}}let xt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,l)=>{const d=this.toJSON(r);d!==void 0&&ns(l,d,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function as(){return function(t,e){return new xt(t,{ignoreUnknown:!0,...e})}}let zM=class{constructor(e,i,r,n){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Xt=new zM(6378137,1/298.257223563,3e5,.006694379990137799),Ll=new zM(3396190,1/169.8944472236118,23e4),Ih=new zM(1737400,0,0);var Ad;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Ad||(Ad={}));let I;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)U[I]=0;for(I=2056;I<=2065;I++)U[I]=0;for(I=2067;I<=2135;I++)U[I]=0;for(I=2137;I<=2154;I++)U[I]=0;for(I=2161;I<=2170;I++)U[I]=0;for(I=2172;I<=2193;I++)U[I]=0;for(I=2195;I<=2198;I++)U[I]=0;for(I=2200;I<=2203;I++)U[I]=0;for(I=2205;I<=2217;I++)U[I]=0;for(I=2222;I<=2224;I++)U[I]=1;for(I=2225;I<=2250;I++)U[I]=2;for(I=2251;I<=2253;I++)U[I]=1;for(I=2257;I<=2264;I++)U[I]=2;for(I=2274;I<=2279;I++)U[I]=2;for(I=2280;I<=2282;I++)U[I]=1;for(I=2283;I<=2289;I++)U[I]=2;for(I=2290;I<=2292;I++)U[I]=0;for(I=2308;I<=2313;I++)U[I]=0;for(I=2315;I<=2491;I++)U[I]=0;for(I=2494;I<=2866;I++)U[I]=0;for(I=2867;I<=2869;I++)U[I]=1;for(I=2870;I<=2888;I++)U[I]=2;for(I=2891;I<=2895;I++)U[I]=2;for(I=2896;I<=2898;I++)U[I]=1;for(I=2902;I<=2908;I++)U[I]=2;for(I=2915;I<=2920;I++)U[I]=2;for(I=2921;I<=2923;I++)U[I]=1;for(I=2924;I<=2930;I++)U[I]=2;for(I=2931;I<=2962;I++)U[I]=0;for(I=2964;I<=2968;I++)U[I]=2;for(I=2969;I<=2973;I++)U[I]=0;for(I=2975;I<=2991;I++)U[I]=0;for(I=2995;I<=3051;I++)U[I]=0;for(I=3054;I<=3079;I++)U[I]=0;for(I=3081;I<=3088;I++)U[I]=0;for(I=3092;I<=3101;I++)U[I]=0;for(I=3106;I<=3138;I++)U[I]=0;for(I=3146;I<=3151;I++)U[I]=0;for(I=3153;I<=3166;I++)U[I]=0;for(I=3168;I<=3172;I++)U[I]=0;for(I=3174;I<=3203;I++)U[I]=0;for(I=3294;I<=3358;I++)U[I]=0;for(I=3367;I<=3403;I++)U[I]=0;for(I=3408;I<=3416;I++)U[I]=0;for(I=3417;I<=3438;I++)U[I]=2;for(I=3441;I<=3446;I++)U[I]=2;for(I=3447;I<=3450;I++)U[I]=0;for(I=3451;I<=3459;I++)U[I]=2;for(I=3460;I<=3478;I++)U[I]=0;for(I=3554;I<=3559;I++)U[I]=0;for(I=3560;I<=3570;I++)U[I]=2;for(I=3571;I<=3581;I++)U[I]=0;for(I=3594;I<=3597;I++)U[I]=0;for(I=3601;I<=3604;I++)U[I]=0;for(I=3637;I<=3639;I++)U[I]=0;for(I=3665;I<=3667;I++)U[I]=0;for(I=3693;I<=3695;I++)U[I]=0;for(I=3701;I<=3727;I++)U[I]=0;for(I=3728;I<=3739;I++)U[I]=2;for(I=3740;I<=3751;I++)U[I]=0;for(I=3753;I<=3760;I++)U[I]=2;for(I=3761;I<=3773;I++)U[I]=0;for(I=3775;I<=3777;I++)U[I]=0;for(I=3779;I<=3781;I++)U[I]=0;for(I=3783;I<=3785;I++)U[I]=0;for(I=3788;I<=3791;I++)U[I]=0;for(I=3797;I<=3802;I++)U[I]=0;for(I=3814;I<=3816;I++)U[I]=0;for(I=3825;I<=3829;I++)U[I]=0;for(I=3832;I<=3841;I++)U[I]=0;for(I=3844;I<=3852;I++)U[I]=0;for(I=3873;I<=3885;I++)U[I]=0;for(I=3890;I<=3893;I++)U[I]=0;for(I=3907;I<=3912;I++)U[I]=0;for(I=3942;I<=3950;I++)U[I]=0;for(I=3968;I<=3970;I++)U[I]=0;for(I=3973;I<=3976;I++)U[I]=0;for(I=3986;I<=3989;I++)U[I]=0;for(I=3994;I<=3997;I++)U[I]=0;for(I=4048;I<=4051;I++)U[I]=0;for(I=4056;I<=4063;I++)U[I]=0;for(I=4093;I<=4096;I++)U[I]=0;for(I=4390;I<=4398;I++)U[I]=0;for(I=4399;I<=4413;I++)U[I]=2;for(I=4418;I<=4433;I++)U[I]=2;for(I=4455;I<=4457;I++)U[I]=2;for(I=4484;I<=4489;I++)U[I]=0;for(I=4491;I<=4554;I++)U[I]=0;for(I=4568;I<=4589;I++)U[I]=0;for(I=4652;I<=4656;I++)U[I]=0;for(I=4766;I<=4800;I++)U[I]=0;for(I=5014;I<=5016;I++)U[I]=0;for(I=5069;I<=5072;I++)U[I]=0;for(I=5105;I<=5130;I++)U[I]=0;for(I=5173;I<=5188;I++)U[I]=0;for(I=5253;I<=5259;I++)U[I]=0;for(I=5269;I<=5275;I++)U[I]=0;for(I=5292;I<=5311;I++)U[I]=0;for(I=5329;I<=5331;I++)U[I]=0;for(I=5343;I<=5349;I++)U[I]=0;for(I=5355;I<=5357;I++)U[I]=0;for(I=5387;I<=5389;I++)U[I]=0;for(I=5459;I<=5463;I++)U[I]=0;for(I=5479;I<=5482;I++)U[I]=0;for(I=5518;I<=5520;I++)U[I]=0;for(I=5530;I<=5539;I++)U[I]=0;for(I=5550;I<=5552;I++)U[I]=0;for(I=5562;I<=5583;I++)U[I]=0;for(I=5623;I<=5625;I++)U[I]=2;for(I=5631;I<=5639;I++)U[I]=0;for(I=5649;I<=5653;I++)U[I]=0;for(I=5663;I<=5680;I++)U[I]=0;for(I=5682;I<=5685;I++)U[I]=0;for(I=5875;I<=5877;I++)U[I]=0;for(I=5896;I<=5899;I++)U[I]=0;for(I=5921;I<=5940;I++)U[I]=0;for(I=6050;I<=6125;I++)U[I]=0;for(I=6244;I<=6275;I++)U[I]=0;for(I=6328;I<=6348;I++)U[I]=0;for(I=6350;I<=6356;I++)U[I]=0;for(I=6366;I<=6372;I++)U[I]=0;for(I=6381;I<=6387;I++)U[I]=0;for(I=6393;I<=6404;I++)U[I]=0;for(I=6480;I<=6483;I++)U[I]=0;for(I=6511;I<=6514;I++)U[I]=0;for(I=6579;I<=6581;I++)U[I]=0;for(I=6619;I<=6624;I++)U[I]=0;for(I=6625;I<=6627;I++)U[I]=2;for(I=6628;I<=6632;I++)U[I]=0;for(I=6634;I<=6637;I++)U[I]=0;for(I=6669;I<=6692;I++)U[I]=0;for(I=6707;I<=6709;I++)U[I]=0;for(I=6720;I<=6723;I++)U[I]=0;for(I=6732;I<=6738;I++)U[I]=0;for(I=6931;I<=6933;I++)U[I]=0;for(I=6956;I<=6959;I++)U[I]=0;for(I=7005;I<=7007;I++)U[I]=0;for(I=7057;I<=7070;I++)U[I]=2;for(I=7074;I<=7082;I++)U[I]=0;for(I=7109;I<=7118;I++)U[I]=0;for(I=7119;I<=7127;I++)U[I]=1;for(I=7374;I<=7376;I++)U[I]=0;for(I=7528;I<=7586;I++)U[I]=0;for(I=7587;I<=7645;I++)U[I]=2;for(I=7692;I<=7696;I++)U[I]=0;for(I=7755;I<=7787;I++)U[I]=0;for(I=7791;I<=7795;I++)U[I]=0;for(I=7799;I<=7801;I++)U[I]=0;for(I=7803;I<=7805;I++)U[I]=0;for(I=7825;I<=7831;I++)U[I]=0;for(I=7845;I<=7859;I++)U[I]=0;for(I=8013;I<=8032;I++)U[I]=0;for(I=8065;I<=8068;I++)U[I]=1;for(I=8518;I<=8529;I++)U[I]=2;for(I=8533;I<=8536;I++)U[I]=2;for(I=8538;I<=8540;I++)U[I]=2;for(I=8677;I<=8679;I++)U[I]=0;for(I=8836;I<=8840;I++)U[I]=0;for(I=8857;I<=8859;I++)U[I]=0;for(I=8908;I<=8910;I++)U[I]=0;for(I=9154;I<=9159;I++)U[I]=0;for(I=9205;I<=9218;I++)U[I]=0;for(I=9271;I<=9273;I++)U[I]=0;for(I=9295;I<=9297;I++)U[I]=0;for(I=9356;I<=9360;I++)U[I]=0;for(I=9404;I<=9407;I++)U[I]=0;for(I=9476;I<=9482;I++)U[I]=0;for(I=9487;I<=9494;I++)U[I]=0;for(I=9697;I<=9699;I++)U[I]=0;for(I=9821;I<=9865;I++)U[I]=0;for(I=20002;I<=20032;I++)U[I]=0;for(I=20047;I<=20049;I++)U[I]=0;for(I=20062;I<=20092;I++)U[I]=0;for(I=20135;I<=20138;I++)U[I]=0;for(I=20248;I<=20258;I++)U[I]=0;for(I=20348;I<=20358;I++)U[I]=0;for(I=20436;I<=20440;I++)U[I]=0;for(I=20822;I<=20824;I++)U[I]=0;for(I=20904;I<=20932;I++)U[I]=0;for(I=20934;I<=20936;I++)U[I]=0;for(I=21004;I<=21032;I++)U[I]=0;for(I=21035;I<=21037;I++)U[I]=0;for(I=21095;I<=21097;I++)U[I]=0;for(I=21148;I<=21150;I++)U[I]=0;for(I=21207;I<=21264;I++)U[I]=0;for(I=21307;I<=21364;I++)U[I]=0;for(I=21413;I<=21423;I++)U[I]=0;for(I=21453;I<=21463;I++)U[I]=0;for(I=21473;I<=21483;I++)U[I]=0;for(I=21780;I<=21782;I++)U[I]=0;for(I=21891;I<=21894;I++)U[I]=0;for(I=21896;I<=21899;I++)U[I]=0;for(I=22171;I<=22177;I++)U[I]=0;for(I=22181;I<=22187;I++)U[I]=0;for(I=22191;I<=22197;I++)U[I]=0;for(I=22207;I<=22222;I++)U[I]=0;for(I=22234;I<=22236;I++)U[I]=0;for(I=22243;I<=22250;I++)U[I]=0;for(I=22262;I<=22265;I++)U[I]=0;for(I=22307;I<=22322;I++)U[I]=0;for(I=22348;I<=22357;I++)U[I]=0;for(I=22407;I<=22422;I++)U[I]=0;for(I=22462;I<=22465;I++)U[I]=0;for(I=22521;I<=22525;I++)U[I]=0;for(I=22607;I<=22622;I++)U[I]=0;for(I=22641;I<=22646;I++)U[I]=0;for(I=22648;I<=22657;I++)U[I]=0;for(I=22707;I<=22722;I++)U[I]=0;for(I=22762;I<=22765;I++)U[I]=0;for(I=22991;I<=22994;I++)U[I]=0;for(I=23028;I<=23038;I++)U[I]=0;for(I=23830;I<=23853;I++)U[I]=0;for(I=23866;I<=23872;I++)U[I]=0;for(I=23877;I<=23884;I++)U[I]=0;for(I=23886;I<=23894;I++)U[I]=0;for(I=23946;I<=23948;I++)U[I]=0;for(I=24311;I<=24313;I++)U[I]=0;for(I=24342;I<=24347;I++)U[I]=0;for(I=24370;I<=24374;I++)U[I]=10;for(I=24375;I<=24381;I++)U[I]=0;for(I=24718;I<=24721;I++)U[I]=0;for(I=24817;I<=24821;I++)U[I]=0;for(I=24877;I<=24882;I++)U[I]=0;for(I=24891;I<=24893;I++)U[I]=0;for(I=25391;I<=25395;I++)U[I]=0;for(I=25828;I<=25838;I++)U[I]=0;for(I=26191;I<=26195;I++)U[I]=0;for(I=26391;I<=26393;I++)U[I]=0;for(I=26701;I<=26722;I++)U[I]=0;for(I=26729;I<=26799;I++)U[I]=2;for(I=26801;I<=26803;I++)U[I]=2;for(I=26811;I<=26813;I++)U[I]=2;for(I=26847;I<=26870;I++)U[I]=2;for(I=26891;I<=26899;I++)U[I]=0;for(I=26901;I<=26923;I++)U[I]=0;for(I=26929;I<=26946;I++)U[I]=0;for(I=26948;I<=26998;I++)U[I]=0;for(I=27037;I<=27040;I++)U[I]=0;for(I=27205;I<=27232;I++)U[I]=0;for(I=27258;I<=27260;I++)U[I]=0;for(I=27391;I<=27398;I++)U[I]=0;for(I=27561;I<=27564;I++)U[I]=0;for(I=27571;I<=27574;I++)U[I]=0;for(I=27581;I<=27584;I++)U[I]=0;for(I=27591;I<=27594;I++)U[I]=0;for(I=28191;I<=28193;I++)U[I]=0;for(I=28348;I<=28358;I++)U[I]=0;for(I=28402;I<=28432;I++)U[I]=0;for(I=28462;I<=28492;I++)U[I]=0;for(I=29118;I<=29122;I++)U[I]=0;for(I=29168;I<=29172;I++)U[I]=0;for(I=29177;I<=29185;I++)U[I]=0;for(I=29187;I<=29195;I++)U[I]=0;for(I=29900;I<=29903;I++)U[I]=0;for(I=30161;I<=30179;I++)U[I]=0;for(I=30491;I<=30494;I++)U[I]=0;for(I=30729;I<=30732;I++)U[I]=0;for(I=31251;I<=31259;I++)U[I]=0;for(I=31265;I<=31268;I++)U[I]=0;for(I=31275;I<=31279;I++)U[I]=0;for(I=31281;I<=31297;I++)U[I]=0;for(I=31461;I<=31469;I++)U[I]=0;for(I=31491;I<=31495;I++)U[I]=0;for(I=31917;I<=31922;I++)U[I]=0;for(I=31965;I<=32e3;I++)U[I]=0;for(I=32001;I<=32003;I++)U[I]=2;for(I=32005;I<=32031;I++)U[I]=2;for(I=32033;I<=32060;I++)U[I]=2;for(I=32064;I<=32067;I++)U[I]=2;for(I=32074;I<=32077;I++)U[I]=2;for(I=32081;I<=32086;I++)U[I]=0;for(I=32107;I<=32130;I++)U[I]=0;for(I=32133;I<=32159;I++)U[I]=0;for(I=32164;I<=32167;I++)U[I]=2;for(I=32180;I<=32199;I++)U[I]=0;for(I=32201;I<=32260;I++)U[I]=0;for(I=32301;I<=32360;I++)U[I]=0;for(I=32601;I<=32662;I++)U[I]=0;for(I=32664;I<=32667;I++)U[I]=2;for(I=32701;I<=32761;I++)U[I]=0;for(I=53001;I<=53004;I++)U[I]=0;for(I=53008;I<=53019;I++)U[I]=0;for(I=53021;I<=53032;I++)U[I]=0;for(I=53034;I<=53037;I++)U[I]=0;for(I=53042;I<=53046;I++)U[I]=0;for(I=53074;I<=53080;I++)U[I]=0;for(I=54001;I<=54004;I++)U[I]=0;for(I=54008;I<=54019;I++)U[I]=0;for(I=54021;I<=54032;I++)U[I]=0;for(I=54034;I<=54037;I++)U[I]=0;for(I=54042;I<=54046;I++)U[I]=0;for(I=54048;I<=54053;I++)U[I]=0;for(I=54074;I<=54080;I++)U[I]=0;for(I=54098;I<=54101;I++)U[I]=0;for(I=102001;I<=102040;I++)U[I]=0;for(I=102042;I<=102063;I++)U[I]=0;for(I=102065;I<=102067;I++)U[I]=0;for(I=102070;I<=102117;I++)U[I]=0;for(I=102122;I<=102216;I++)U[I]=0;for(I=102221;I<=102377;I++)U[I]=0;for(I=102382;I<=102388;I++)U[I]=0;for(I=102389;I<=102398;I++)U[I]=2;for(I=102399;I<=102444;I++)U[I]=0;for(I=102445;I<=102447;I++)U[I]=2;for(I=102448;I<=102458;I++)U[I]=0;for(I=102459;I<=102468;I++)U[I]=2;for(I=102469;I<=102499;I++)U[I]=0;for(I=102500;I<=102519;I++)U[I]=1;for(I=102520;I<=102524;I++)U[I]=0;for(I=102525;I<=102529;I++)U[I]=2;for(I=102530;I<=102588;I++)U[I]=0;for(I=102590;I<=102598;I++)U[I]=0;for(I=102601;I<=102603;I++)U[I]=0;for(I=102605;I<=102628;I++)U[I]=0;for(I=102629;I<=102646;I++)U[I]=2;for(I=102648;I<=102700;I++)U[I]=2;for(I=102701;I<=102703;I++)U[I]=0;for(I=102707;I<=102730;I++)U[I]=2;for(I=102733;I<=102758;I++)U[I]=2;for(I=102767;I<=102900;I++)U[I]=0;for(I=102901;I<=102933;I++)U[I]=2;for(I=102934;I<=102950;I++)U[I]=13;for(I=102951;I<=102955;I++)U[I]=0;for(I=102961;I<=102963;I++)U[I]=0;for(I=102965;I<=102969;I++)U[I]=0;for(I=102971;I<=102973;I++)U[I]=0;for(I=102975;I<=102989;I++)U[I]=0;for(I=102990;I<=102992;I++)U[I]=1;for(I=102997;I<=103002;I++)U[I]=0;for(I=103003;I<=103008;I++)U[I]=2;for(I=103009;I<=103011;I++)U[I]=0;for(I=103012;I<=103014;I++)U[I]=2;for(I=103019;I<=103021;I++)U[I]=0;for(I=103022;I<=103024;I++)U[I]=2;for(I=103029;I<=103031;I++)U[I]=0;for(I=103032;I<=103034;I++)U[I]=2;for(I=103065;I<=103068;I++)U[I]=0;for(I=103074;I<=103076;I++)U[I]=0;for(I=103077;I<=103079;I++)U[I]=1;for(I=103080;I<=103082;I++)U[I]=0;for(I=103083;I<=103085;I++)U[I]=2;for(I=103090;I<=103093;I++)U[I]=0;for(I=103097;I<=103099;I++)U[I]=0;for(I=103100;I<=103102;I++)U[I]=2;for(I=103107;I<=103109;I++)U[I]=0;for(I=103110;I<=103112;I++)U[I]=2;for(I=103113;I<=103116;I++)U[I]=0;for(I=103117;I<=103120;I++)U[I]=2;for(I=103153;I<=103157;I++)U[I]=0;for(I=103158;I<=103162;I++)U[I]=2;for(I=103163;I<=103165;I++)U[I]=0;for(I=103166;I<=103168;I++)U[I]=1;for(I=103169;I<=103171;I++)U[I]=2;for(I=103186;I<=103188;I++)U[I]=0;for(I=103189;I<=103191;I++)U[I]=2;for(I=103192;I<=103195;I++)U[I]=0;for(I=103196;I<=103199;I++)U[I]=2;for(I=103200;I<=103224;I++)U[I]=0;for(I=103225;I<=103227;I++)U[I]=1;for(I=103232;I<=103237;I++)U[I]=0;for(I=103238;I<=103243;I++)U[I]=2;for(I=103244;I<=103246;I++)U[I]=0;for(I=103247;I<=103249;I++)U[I]=2;for(I=103254;I<=103256;I++)U[I]=0;for(I=103257;I<=103259;I++)U[I]=2;for(I=103264;I<=103266;I++)U[I]=0;for(I=103267;I<=103269;I++)U[I]=2;for(I=103300;I<=103375;I++)U[I]=0;for(I=103381;I<=103383;I++)U[I]=0;for(I=103384;I<=103386;I++)U[I]=1;for(I=103387;I<=103389;I++)U[I]=0;for(I=103390;I<=103392;I++)U[I]=2;for(I=103397;I<=103399;I++)U[I]=0;for(I=103400;I<=103471;I++)U[I]=2;for(I=103476;I<=103478;I++)U[I]=0;for(I=103479;I<=103481;I++)U[I]=2;for(I=103486;I<=103488;I++)U[I]=0;for(I=103489;I<=103491;I++)U[I]=2;for(I=103492;I<=103495;I++)U[I]=0;for(I=103496;I<=103499;I++)U[I]=2;for(I=103528;I<=103543;I++)U[I]=0;for(I=103544;I<=103548;I++)U[I]=2;for(I=103549;I<=103551;I++)U[I]=0;for(I=103552;I<=103554;I++)U[I]=1;for(I=103555;I<=103557;I++)U[I]=2;for(I=103558;I<=103560;I++)U[I]=0;for(I=103571;I<=103573;I++)U[I]=0;for(I=103574;I<=103576;I++)U[I]=2;for(I=103577;I<=103580;I++)U[I]=0;for(I=103581;I<=103583;I++)U[I]=2;for(I=103595;I<=103694;I++)U[I]=0;for(I=103696;I<=103699;I++)U[I]=0;for(I=103700;I<=103793;I++)U[I]=2;for(I=103794;I<=103890;I++)U[I]=0;for(I=103891;I<=103896;I++)U[I]=2;for(I=103900;I<=103971;I++)U[I]=2;for(I=103972;I<=103977;I++)U[I]=0;for(I=112e3;I<=112101;I++)U[I]=0;const FW={102113:!0,102100:!0,3857:!0,3785:!0},NW={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},QT='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',gg=[-20037508342788905e-9,20037508342788905e-9],vg=[-20037508342787e-6,20037508342787e-6],bO={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:gg,origin:vg,dx:1e-5},102100:{wkTemplate:QT,valid:gg,origin:vg,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:gg,origin:vg,dx:1e-5},3857:{wkTemplate:QT,valid:gg,origin:vg,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ji(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||kd(t)&&kd(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function Uo(t){return Cr(t)&&t.wkid&&bO[t.wkid]||null}function wO(t){return!!Cr(t)&&(t.wkid?U[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function zW(t){return!(BM(t)||UM(t))}function Q1(t){return Cr(t)&&t.wkid===4326}function Ixe(t){return Cr(t)&&t.wkid===Ad.CGCS2000}function kd(t){return Cr(t)&&t.wkid!=null&&FW[t.wkid]===!0}function VW(t){return Cr(t)&&t.wkid===32662}function VM(t){return t===Ad.GCSMARS2000||t===Ad.GCSMARS2000_SPHERE}function BM(t){return Cr(t)&&t.wkid!=null&&VM(t.wkid)}function GM(t){return t===Ad.GCSMOON2000}function UM(t){return Cr(t)&&t.wkid!=null&&GM(t.wkid)}function BW(t){return Cr(t)&&t.wkid!=null&&NW[t.wkid]===!0}function Cr(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const GW={wkid:4326,wkt:Jn(bO[4326].wkTemplate,{Central_Meridian:"0.0"})},UW={wkid:102100,latestWkid:3857},qW={wkid:32662};function qM(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const HW=qM(Xt),_O=qM(Ll),xO=qM(Ih),WW={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Xt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function JW(t){return t!=null&&(BM(t)||Ji(t,_O))?Ll:t!=null&&(UM(t)||Ji(t,xO))?Ih:Xt}function Exe(t){return VM(t)?Ll:GM(t)?Ih:Xt}const SO=39.37,YW=Xt.radius*Math.PI/200,MO=/UNIT\[([^\]]+)\]\]$/i,yd=U,$O=/UNIT\[([^\]]+)\]/i,KW=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),ZW=as()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),aa=t=>t*t,nu=t=>t*t*t,em={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:aa(.001)},"square-centimeters":{inBaseUnits:aa(.01)},"square-decimeters":{inBaseUnits:aa(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:aa(1e3)},"square-inches":{inBaseUnits:aa(.0254)},"square-feet":{inBaseUnits:aa(.3048)},"square-yards":{inBaseUnits:aa(.9144)},"square-miles":{inBaseUnits:aa(1609.344)},"square-us-feet":{inBaseUnits:aa(1200/3937)},acres:{inBaseUnits:.0015625*aa(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*nu(.001)},"cubic-centimeters":{inBaseUnits:1e3*nu(.01)},"cubic-decimeters":{inBaseUnits:1e3*nu(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*nu(1e3)},"cubic-inches":{inBaseUnits:1e3*nu(.0254)},"cubic-feet":{inBaseUnits:1e3*nu(.3048)},"cubic-yards":{inBaseUnits:1e3*nu(.9144)},"cubic-miles":{inBaseUnits:1e3*nu(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},XW=(()=>{const t={};for(const e in em)for(const i in em[e].units)t[i]=e;return t})();function QW(t,e,i){return t*em[i].units[e].inBaseUnits}function eJ(t,e,i){return t/em[i].units[e].inBaseUnits}function Ux(t){const e=XW[t];if(!e)throw new Error("unknown type");return e}function eI(t,e=null){return e=e||Ux(t),em[e].baseUnit===t}function Mn(t,e,i){if(e===i)return t;const r=Ux(e);if(r!==Ux(i))throw new Error("incompatible units");const n=eI(e,r)?t:QW(t,e,r);return eI(i,r)?n:eJ(n,i,r)}function tJ(t,e,i){return Mn(t,e,"meters")/(i*Math.PI/180)}function TO(t){return ZW.fromJSON(t.toLowerCase())||null}function R0(t){if(t!=null&&!zW(t))return 1;const e=Zl(t);return e>1e5?1:e}function iJ(t){return Zl(t)>=JW(t).metersPerDegree?"meters":EO(t)}function Zl(t,e=Xt.metersPerDegree){return rJ(t,!0)??e}function rJ(t,e=!1){const i=t!=null?t.wkid:null,r=t!=null?t.wkt:null;let n=null;if(i){if(VM(i))return Ll.metersPerDegree;if(GM(i))return Ih.metersPerDegree;n=yd.values[yd[i]],!n&&e&&KW.has(i)&&(n=YW)}else r&&(kO(r)?n=tI(MO.exec(r),n):AO(r)&&(n=tI($O.exec(r),n)));return n}function Axe(t){return t.isGeographic?1:Zl(t)}function tI(t,e){return t&&t[1]?IO(t[1]):e}function IO(t){return parseFloat(t.split(",")[1])}function EO(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let r=null;if(e)r=yd.units[yd[e]];else if(i){const n=kO(i)?MO:AO(i)?$O:null;if(n){const l=n.exec(i);l&&l[1]&&(r=nJ(l[1]))}}return r!=null?TO(r):null}function AO(t){return/^GEOCCS/i.test(t)}function kO(t){return/^PROJCS/i.test(t)}const sJ=1e-7;function nJ(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!yd.units.includes(i)){const r=IO(t);i=null;const n=yd.values;for(let l=0;l<n.length;++l)if(Math.abs(r-n[l])<sJ){i=yd.units[l];break}}return i}const oJ={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},aJ={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},lJ={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},uJ=as()(oJ),hJ=as()(aJ),kxe=as()(lJ);var ca;let Gt=ca=class extends ge{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return ca.WebMercator;if(t.wkid===4326)return ca.WGS84}const e=new ca;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Q1(this)}get isWebMercator(){return kd(this)}get isGeographic(){return wO(this)}get isWrappable(){return BW(this)}get metersPerUnit(){return Zl(this)}get unit(){return EO(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===ca.WGS84)return ca.WGS84;if(this===ca.WebMercator)return ca.WebMercator;const t=new ca;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=ae(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||r?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return Ji(this,t)}toJSON(t){return this.write(void 0,t)}};Gt.GCS_NAD_1927=null,Gt.WGS84=null,Gt.WebMercator=null,Gt.PlateCarree=null,g([S({readOnly:!0})],Gt.prototype,"isWGS84",null),g([S({readOnly:!0})],Gt.prototype,"isWebMercator",null),g([S({readOnly:!0})],Gt.prototype,"isGeographic",null),g([S({readOnly:!0})],Gt.prototype,"isWrappable",null),g([S({type:Lt,json:{write:!0}})],Gt.prototype,"latestWkid",void 0),g([S({readOnly:!0})],Gt.prototype,"metersPerUnit",null),g([S({readOnly:!0})],Gt.prototype,"unit",null),g([S({type:Lt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Gt.prototype,"wkid",void 0),g([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Gt.prototype,"wkt",void 0),g([Ae("wkt"),Ae("web-scene","wkt")],Gt.prototype,"writeWkt",null),g([S({type:Lt,json:{write:!0}})],Gt.prototype,"vcsWkid",void 0),g([S({type:Lt,json:{write:!0}})],Gt.prototype,"latestVcsWkid",void 0),g([S()],Gt.prototype,"imageCoordinateSystem",void 0),Gt=ca=g([J("esri.geometry.SpatialReference")],Gt),Gt.prototype.toJSON.isDefaultToJSON=!0,Gt.GCS_NAD_1927=new Gt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Gt.WGS84=new Gt(GW),Gt.WebMercator=new Gt(UW),Gt.PlateCarree=new Gt(qW),Object.freeze&&(Object.freeze(Gt.GCS_NAD_1927),Object.freeze(Gt.WGS84),Object.freeze(Gt.WebMercator));const ut=Gt,PO="20230626",CO="b81703b48e0b92e492f4cc6b739af02a9af50038",cJ="4.27";let HM=cJ;HM="4.27.6";const dJ={async request(t,e){var y,v;const{default:i}=await le(()=>Promise.resolve().then(()=>PJ),void 0),r=t.options,n=r.responseType;r.signal=e==null?void 0:e.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((y=pO(t.url))!=null&&y.after)?n:"array-buffer";const l=await i(t.url,r),d={data:l.data,httpStatus:l.httpStatus,ssl:l.ssl};switch((v=l.requestOptions)==null?void 0:v.responseType){case"native-request-init":return delete d.data.signal,d;case"blob":d.data=await d.data.arrayBuffer();break;case"json":d.data=new TextEncoder().encode(JSON.stringify(d.data)).buffer;break;case"text":d.data=new TextEncoder().encode(d.data).buffer}return{result:d,transferList:[d.data]}}};let _t;function Pxe(t){_t=t}function Cxe(t){const e=_t==null?void 0:_t.findCredential(t);return e!=null&&e.token?gO(t,"token",e.token):t}ce("host-webworker");const pJ=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function OO(t){const e=Go(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!pJ.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function fJ(t,e,i=!1,r){return new Promise((n,l)=>{if(Ko(r))return void l(iI());let d=()=>{x(),l(new Error(`Unable to load ${e}`))},y=()=>{const $=t;x(),n($)},v=()=>{if(!t)return;const $=t;x(),$.src="",l(iI())};const x=()=>{ce("esri-image-decode")||(t.removeEventListener("error",d),t.removeEventListener("load",y)),d=null,y=null,t=null,r!=null&&r.removeEventListener("abort",v),v=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",v),ce("esri-image-decode")?t.decode().then(y,d):(t.addEventListener("error",d),t.addEventListener("load",y))})}function iI(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const yJ="Timeout exceeded";function mJ(){return new Error(yJ)}function gJ(t){Vt.request.crossOriginNoCorsDomains||(Vt.request.crossOriginNoCorsDomains={});const e=Vt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Go(i)??""]=0:(e[Go("http://"+i)??""]=0,e[Go("https://"+i)??""]=0)}function vJ(t){const e=Vt.request.crossOriginNoCorsDomains;if(e){let i=Go(t);if(i)return i=i.toLowerCase(),!D0(i,CM())&&e[i]<Date.now()-36e5}return!1}async function bJ(t){var n;const e=Vt.request.crossOriginNoCorsDomains,i=Go(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=Wi(t);t=r.path,((n=r.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function Ht(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=OM(e.query.toString().replaceAll("+"," ")));const i=Bd(t),r=X2(t);r||i||(t=Bo(t));const n={url:t,requestOptions:{...e}};let l=pO(t);if(l){const $=await IJ(l,n);if($!=null)return{data:$,getHeader:WM,httpStatus:200,requestOptions:n.requestOptions,url:n.url};l.after||l.error||(l=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ce("host-webworker")||ce("host-node")))throw Da("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Da("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Da("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await MJ(),bw)return bw.execute(t,e);const d=new AbortController;Hn(e,()=>d.abort());const y={controller:d,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:n,redoRequest:!1,useIdentity:Ro.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=await AJ(y);return(x=l==null?void 0:l.after)==null||x.call(l,v),v}let bw;const Ro=Vt.request,LO="FormData"in globalThis,wJ=[499,498,403,401],_J=["COM_0056","COM_0057","SB_0008"],xJ=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],WM=()=>null,ww=Symbol();function SJ(t){const e=Go(t);e&&!Ht._corsServers.includes(e)&&Ht._corsServers.push(e)}function rI(t){const e=Go(t);return!e||e.endsWith(".arcgis.com")||Ht._corsServers.includes(e)||DM(e)}function Da(t,e,i,r){let n="Error";const l={url:i.url,requestOptions:i.requestOptions,getHeader:WM,ssl:!1};if(e instanceof ne)return e.details?(e.details=ae(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=l,e;if(e){const d=r&&(x=>r.headers.get(x)),y=r==null?void 0:r.status,v=e.message;v&&(n=v),d&&(l.getHeader=d),l.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||y||0,l.subCode=e.subcode,l.messageCode=e.messageCode,typeof e.details=="string"?l.messages=[e.details]:l.messages=e.details,l.raw=ww in e?e[ww]:e}return Is(e)?Ei():new ne(t,n,l)}async function MJ(){ce("host-webworker")?bw||(bw=await le(()=>import("./request-d7bb5eeb.js"),[])):Ht._abortableFetch||(Ht._abortableFetch=globalThis.fetch.bind(globalThis))}async function qx(){_t||await le(()=>import("./IdentityManager-e55a0cec.js"),[])}async function $J(t){var y;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let l=null,d=null;if(LO&&"HTMLFormElement"in globalThis&&(n instanceof FormData?l=n:n instanceof HTMLFormElement&&(l=new FormData(n))),typeof n=="string"&&(d=n),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in Ht._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ro.priority,redirect:"follow",signal:r},(l||d)&&(t.fetchOptions.body=l||d),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(y=i.query)!=null&&y.token||l!=null&&l.get("token")),!t.hasToken&&Vt.apiKey&&OO(e)&&(i.query||(i.query={}),i.query.token=Vt.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!DO(e)&&!Ko(r)){let v;i.authMode==="immediate"?(await qx(),v=await _t.getCredential(e,{signal:r}),t.credential=v):i.authMode==="no-prompt"?(await qx(),v=await _t.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=v):_t&&(v=_t.findCredential(e)),v&&(t.credentialToken=v.token,t.useSSL=!!v.ssl)}}function DO(t){return xJ.some(e=>e.test(t))}async function TJ(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},n=X2(e)||Bd(e),l=i.responseType||"json",d=n?0:i.timeout!=null?i.timeout:Ro.timeout;let y=!1;if(!n){t.useSSL&&(e=FM(e)),i.cacheBust&&r.cache==="default"&&(e=gO(e,"request.preventCache",Date.now()));let k={...i.query};t.credentialToken&&(k.token=t.credentialToken);let P=L0(k);ce("esri-url-encodes-apostrophe")&&(P=P.replaceAll("'","%27"));const D=e.length+1+P.length;let L;y=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||D>Ro.maxUrlLength;const N=i.useProxy||!!Z2(e);if(N){const B=_W(e);L=B.path,!y&&L.length+1+D>Ro.maxUrlLength&&(y=!0),B.query&&(k={...B.query,...k})}if(r.method==="HEAD"&&(y||N)){if(y)throw D>Ro.maxUrlLength?Da("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Da("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(N)throw Da("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(y?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=b3(e,k):(r.body=L0(k),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=b3(e,k),N&&(t.useProxy=!0,e=`${L}?${e}`),k.token&&LO&&r.body instanceof FormData&&!uW(e)&&r.body.set("token",k.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!D0(e,CM())){if(DM(e))t.withCredentials=!0;else if(_t){const B=_t.findServerInfo(e);B!=null&&B.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",vJ(e)&&await bJ(y?b3(e,k):e))}let v,x,$=0,E=!1;d>0&&($=setTimeout(()=>{E=!0,t.controller.abort()},d));try{if(i.responseType==="native-request-init")x=r,x.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||y||EJ(i.headers)||!n&&!t.useProxy&&Ro.proxyUrl&&!rI(e)){if(v=await Ht._abortableFetch(e,r),t.useProxy||SJ(e),i.responseType==="native")x=v;else if(r.method!=="HEAD")if(v.ok){switch(l){case"array-buffer":x=await v.arrayBuffer();break;case"blob":case"image":x=await v.blob();break;default:x=await v.text()}if($&&(clearTimeout($),$=0),l==="json"||l==="xml"||l==="document")if(x)switch(l){case"json":x=JSON.parse(x);break;case"xml":x=sI(x,"application/xml");break;case"document":x=sI(x,"text/html")}else x=null;if(x){if(l==="array-buffer"||l==="blob"){const k=v.headers.get("Content-Type");if(k&&/application\/json|text\/plain/i.test(k)&&x[l==="blob"?"size":"byteLength"]<=750)try{const P=await new Response(x).json();P.error&&(x=P)}catch{}}l==="image"&&x instanceof Blob&&(x=await nI(URL.createObjectURL(x),t,!0))}}else{x=await v.text();try{x=JSON.parse(x)}catch{}}}else x=await nI(e,t)}catch(k){if(k.name==="AbortError")throw E?mJ():Ei("Request canceled");if(!(!v&&k instanceof TypeError&&Ro.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||rI(e))throw k;t.redoRequest=!0,xW({proxyUrl:Ro.proxyUrl,urlPrefix:Go(e)??""})}finally{$&&clearTimeout($)}return[v,x]}async function IJ(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Da("request:interceptor",n,e)}if((r instanceof Error||r instanceof ne)&&(i=Da("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function EJ(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function sI(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function AJ(t){var l,d;let e,i;await $J(t);try{do[e,i]=await TJ(t);while(!await kJ(t,e,i))}catch(y){const v=Da("request:server",y,t.params,e);throw v.details.ssl=t.useSSL,(l=t.interceptor)!=null&&l.error&&t.interceptor.error(v),v}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((d=i.user)!=null&&d.username)&&!DM(r)){const y=Go(r,!0);y&&Ro.trustedServers.push(y)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&gJ(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&_t){const y=_t.findServerInfo(n.server);let v=y==null?void 0:y.owningSystemUrl;if(v){v=v.replace(/\/?$/,"/sharing");const x=_t.findCredential(v,n.userId);x&&_t._getIdenticalSvcIdx(v,x)===-1&&x.resources.unshift(v)}}return{data:i,getHeader:e?y=>e==null?void 0:e.headers.get(y):WM,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function kJ(t,e,i){var x;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,l;if(i&&(i.error?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[ww]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[ww]=i,n;let d,y=null;n&&(l=Number(n.code),y=n.hasOwnProperty("subcode")?Number(n.subcode):null,d=n.messageCode,d=d==null?void 0:d.toUpperCase());const v=r.authMode;if(l===403&&(y===4||(x=n.message)!=null&&x.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(v!=="no-prompt"||l===498)&&l!==void 0&&wJ.includes(l)&&!DO(t.params.url)&&(l!==403||d&&!_J.includes(d)&&(y==null||y===2&&t.credentialToken))){await qx();try{const $=await _t.getCredential(t.params.url,{error:Da("request:server",n,t.params),prompt:v!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=$,t.credentialToken=$.token,t.useSSL=t.useSSL||$.ssl,!1}catch($){if(v==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=$}}if(n)throw n;return!0}function nI(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Ro.priority,n.src=t,fJ(n,t,i,r)}Ht._abortableFetch=null,Ht._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const PJ=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));function xe(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(l,d)=>{const y=l.constructor.prototype;r.forEach(v=>{const x=VC(l,v,n);x.read&&typeof x.read=="object"||(x.read={}),x.read.reader=y[d],i&&(x.read.source=(x.read.source||[]).concat(i))})}}let da=class extends ge{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ut.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof ut)return e;if(e!=null){const r=new ut;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};g([S()],da.prototype,"type",void 0),g([S({readOnly:!0})],da.prototype,"cache",null),g([S({readOnly:!0})],da.prototype,"extent",null),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],da.prototype,"hasM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],da.prototype,"hasZ",void 0),g([S({type:ut,json:{write:!0},value:ut.WGS84})],da.prototype,"spatialReference",void 0),g([xe("spatialReference")],da.prototype,"readSpatialReference",null),da=g([J("esri.geometry.Geometry")],da);const zh=da,CJ=Object.prototype.toString;function OJ(t){const e="__accessorMetadata__"in t?Di(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return LJ.apply(this,i)}}function LJ(t,e,i,r){N2(t,e).cast=r}function DJ(t){return(e,i)=>{N2(e,t).cast=e[i]}}function St(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&CJ.call(t[0])==="[object Function]"?OJ(t[0]):t.length===1&&typeof t[0]=="string"?DJ(t[0]):void 0}function RJ(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}const jJ=57.29577951308232,FJ=.017453292519943;function oI(t){return t*jJ}function aI(t){return t*FJ}function Lxe(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Xt.radius))}function Hx(t){return t.wkid!=null||t.wkt!=null}const w3=[0,0];function _w(t,e,i,r,n){const l=t,d=n;if(d.spatialReference=i,"x"in l&&"x"in d)[d.x,d.y]=e(l.x,l.y,w3,r);else if("xmin"in l&&"xmin"in d)[d.xmin,d.ymin]=e(l.xmin,l.ymin,w3,r),[d.xmax,d.ymax]=e(l.xmax,l.ymax,w3,r);else if("paths"in l&&"paths"in d||"rings"in l&&"rings"in d){const y="paths"in l?l.paths:l.rings,v=[];let x;for(let $=0;$<y.length;$++){const E=y[$];x=[],v.push(x);for(let k=0;k<E.length;k++)x.push(e(E[k][0],E[k][1],[0,0],r)),E[k].length>2&&x[k].push(E[k][2]),E[k].length>3&&x[k].push(E[k][3])}"paths"in d?d.paths=v:d.rings=v}else if("points"in l&&"points"in d){const y=l.points,v=[];for(let x=0;x<y.length;x++)v[x]=e(y[x][0],y[x][1],[0,0],r),y[x].length>2&&v[x].push(y[x][2]),y[x].length>3&&v[x].push(y[x][3]);d.points=v}return n}function Ov(t,e){const i=t&&(Hx(t)?t:t.spatialReference),r=e&&(Hx(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Ji(r,i)||kd(r)&&Q1(i)||kd(i)&&Q1(r))}function Q2(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(Hx(e)?e:e.spatialReference);return Ov(i,r)?Ji(i,r)?ae(t):kd(r)?_w(t,e0,ut.WebMercator,!1,ae(t)):Q1(r)?_w(t,c1,ut.WGS84,!1,ae(t)):null:null}function e0(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=aI(e);return i[0]=aI(t)*Xt.radius,i[1]=Xt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function c1(t,e,i=[0,0],r=!1){const n=oI(t/Xt.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=oI(Math.PI/2-2*Math.atan(Math.exp(-e/Xt.radius))),i}function xh(t,e=!1,i=ae(t)){return _w(t,e0,ut.WebMercator,e,i)}function t0(t,e=!1,i=ae(t)){return _w(t,c1,ut.WGS84,e,i)}var Lv;const kf=[0,0];function lI(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ds=Lv=class extends zh{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let l;if(Array.isArray(t))l=t,n=e,t=l[0],e=l[1],i=l[2],r=l[3];else if(t&&typeof t=="object"){if(l=t,t=l.x!=null?l.x:l.longitude,e=l.y!=null?l.y:l.latitude,i=l.z,r=l.m,(n=l.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new ut(n)),l.longitude!=null||l.latitude!=null){if(l.longitude==null)ve.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(l.latitude==null)ve.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!l.declaredClass&&n&&n.isWebMercator){const y=e0(l.longitude,l.latitude,kf);t=y[0],e=y[1]}}}else lI(i)?(n=i,i=null):lI(r)&&(n=r,r=null);const d={x:t,y:e};return d.x==null&&d.y!=null?ve.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):d.y==null&&d.x!=null&&ve.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(d.spatialReference=n),i!=null&&(d.z=i),r!=null&&(d.m=r),d}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return c1(e,i,kf)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",e0(i,t,kf)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return c1(t,e,kf)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",e0(t,e,kf)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new Lv;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return Lv.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:l}=this,{z:d,m:y}=t;let{x:v,y:x,spatialReference:$}=t;if(!l.equals($))if(l.isWebMercator&&$.isWGS84)[v,x]=e0(v,x),$=l;else{if(!l.isWGS84||!$.isWebMercator)return!1;[v,x]=c1(v,x),$=l}return e===v&&i===x&&r===d&&n===y&&l.wkid===$.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Uo(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let l;return e>r?(l=Math.ceil(Math.abs(e-r)/n),e-=l*n):e<i&&(l=Math.ceil(Math.abs(e-i)/n),e+=l*n),this._set("x",e),this}distance(t){return RJ(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};g([S({readOnly:!0})],ds.prototype,"cache",null),g([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ds.prototype,"hasM",null),g([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ds.prototype,"hasZ",null),g([S({type:Number})],ds.prototype,"latitude",null),g([S({type:Number})],ds.prototype,"longitude",null),g([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),St(t=>isNaN(t)?t:zn(t))],ds.prototype,"x",void 0),g([Ae("x")],ds.prototype,"writeX",null),g([xe("x")],ds.prototype,"readX",null),g([S({type:Number,json:{write:!0}})],ds.prototype,"y",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ds.prototype,"z",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ds.prototype,"m",void 0),ds=Lv=g([J("esri.geometry.Point")],ds),ds.prototype.toJSON.isDefaultToJSON=!0;const lt=ds,_3=[0,0];function e_(t,e){return e!=null&&bs(t,e.x,e.y,e.z)}function Dxe(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!j0(t,i))return!1;return!0}function NJ(t,e){const{xmin:i,ymin:r,zmin:n,xmax:l,ymax:d,zmax:y}=e;return t.hasZ&&e.hasZ?bs(t,i,r,n)&&bs(t,i,d,n)&&bs(t,l,d,n)&&bs(t,l,r,n)&&bs(t,i,r,y)&&bs(t,i,d,y)&&bs(t,l,d,y)&&bs(t,l,r,y):bs(t,i,r)&&bs(t,i,d)&&bs(t,l,d)&&bs(t,l,r)}function j0(t,e){return bs(t,e[0],e[1])}function zJ(t,e){return bs(t,e[0],e[1],e[2])}function bs(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function RO(t,e){return _3[1]=e.y,_3[0]=e.x,VJ(t,_3)}function VJ(t,e){return jO(t.rings,e)}function jO(t,e){if(!t)return!1;if(BJ(t))return uI(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=uI(i,t[r],e);return i}function BJ(t){return!Array.isArray(t[0][0])}function uI(t,e,i){const[r,n]=i;let l=t,d=0;for(let y=0,v=e.length;y<v;y++){d++,d===v&&(d=0);const[x,$]=e[y],[E,k]=e[d];($<n&&k>=n||k<n&&$>=n)&&x+(n-$)/(k-$)*(E-x)<r&&(l=!l)}return l}function GJ(t,e){return e_(t,e)}function UJ(t,e){const i=t.hasZ&&e.hasZ;let r,n,l;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(l=e.zmin,t.zmax<l)return!1}else if(l=t.zmin,e.zmax<l)return!1}return!0}function qJ(t,e){const{points:i,hasZ:r}=e,n=r?zJ:j0;for(const l of i)if(n(t,l))return!0;return!1}const Pd=[0,0],Cd=[0,0],Od=[0,0],Ld=[0,0],HJ=[Pd,Cd,Od,Ld],FO=[[Od,Pd],[Pd,Cd],[Cd,Ld],[Ld,Od]];function WJ(t,e){return JJ(t,e.rings)}function JJ(t,e){Pd[0]=t.xmin,Pd[1]=t.ymax,Cd[0]=t.xmax,Cd[1]=t.ymax,Od[0]=t.xmin,Od[1]=t.ymin,Ld[0]=t.xmax,Ld[1]=t.ymin;for(const i of HJ)if(jO(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(j0(t,r))return!0;for(let n=1;n<i.length;n++){const l=i[n];if(j0(t,l)||NO(r,l,FO))return!0;r=l}}return!1}function YJ(t,e){Pd[0]=t.xmin,Pd[1]=t.ymax,Cd[0]=t.xmax,Cd[1]=t.ymax,Od[0]=t.xmin,Od[1]=t.ymin,Ld[0]=t.xmax,Ld[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(j0(t,n))return!0;for(let l=1;l<r.length;l++){const d=r[l];if(j0(t,d)||NO(n,d,FO))return!0;n=d}}return!1}const $r=[0,0];function KJ(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const l=i[n],d=i[n+1];for(let y=e+1;y<t.length;y++)for(let v=0;v<t[y].length-1;v++){const x=t[y][v],$=t[y][v+1];if(Wx(l,d,x,$,$r)&&!($r[0]===l[0]&&$r[1]===l[1]||$r[0]===x[0]&&$r[1]===x[1]||$r[0]===d[0]&&$r[1]===d[1]||$r[0]===$[0]&&$r[1]===$[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let l=r-1;n===0&&(l=r-2);const d=i[n],y=i[n+1];for(let v=n+2;v<l;v++){const x=i[v],$=i[v+1];if(Wx(d,y,x,$,$r)&&!($r[0]===d[0]&&$r[1]===d[1]||$r[0]===x[0]&&$r[1]===x[1]||$r[0]===y[0]&&$r[1]===y[1]||$r[0]===$[0]&&$r[1]===$[1]))return!0}}}return!1}function NO(t,e,i){for(let r=0;r<i.length;r++)if(Wx(t,e,i[r][0],i[r][1]))return!0;return!1}function Wx(t,e,i,r,n){const[l,d]=t,[y,v]=e,[x,$]=i,[E,k]=r,P=E-x,D=l-x,L=y-l,N=k-$,B=d-$,W=v-d,q=N*L-P*W;if(q===0)return!1;const Y=(P*B-N*D)/q,ie=(L*B-W*D)/q;return Y>=0&&Y<=1&&ie>=0&&ie<=1&&(n&&(n[0]=l+Y*(y-l),n[1]=d+Y*(v-d)),!0)}function ZJ(t){switch(t){case"esriGeometryEnvelope":case"extent":return UJ;case"esriGeometryMultipoint":case"multipoint":return qJ;case"esriGeometryPoint":case"point":return GJ;case"esriGeometryPolygon":case"polygon":return WJ;case"esriGeometryPolyline":case"polyline":return YJ}}var $n;function XJ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function ou(t,e,i){return e==null?i:i==null?e:t(e,i)}let hr=$n=class extends zh{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return XJ(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?ut.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??ut.WGS84}}static fromBounds(t,e){return new $n({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new $n({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new lt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new $n;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Ov(e,i)&&(t=e.isWebMercator?xh(t):t0(t,!0)),t.type==="point"?e_(this,t):t.type==="extent"&&NJ(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Ov(e,i)&&(t=e.isWebMercator?xh(t):t0(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ji(e,i)&&Ov(e,i)&&(t=e.isWebMercator?xh(t):t0(t,!0)),ZJ(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ou(Math.min,this.zmin,t.zmin),this.zmax=ou(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ou(Math.min,this.mmin,t.mmin),this.mmax=ou(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ou(Math.max,this.zmin,t.zmin),this.zmax=ou(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ou(Math.max,this.mmin,t.mmin),this.mmax=ou(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Uo(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?t0(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new ut(Jn((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,l=this.xmax;return n>=i&&n<=r&&l>=i&&l<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??Uo(r);if(n==null)return this;const l=this._getParts(n).map(v=>v.extent);if(l.length<2)return l[0]||this;if(l.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return l;let d=!0,y=!0;return l.forEach(v=>{v.hasZ||(d=!1),v.hasM||(y=!1)}),{rings:l.map(v=>{const x=[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]];if(d){const $=(v.zmax-v.zmin)/2;for(let E=0;E<x.length;E++)x[E].push($)}if(y){const $=(v.mmax-v.mmin)/2;for(let E=0;E<x.length;E++)x[E].push($)}return x}),hasZ:d,hasM:y,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:l,spatialReference:d}=this,y=this.width,v=this.xmin,x=this.xmax;let $;t=t||Uo(d);const[E,k]=t.valid;$=this._normalizeX(this.xmin,t);const P=$.x,D=$.frameId;$=this._normalizeX(this.xmax,t);const L=$.x,N=$.frameId,B=P===L&&y>0;if(y>2*k){const W=new $n(v<x?P:L,n,k,l,d),q=new $n(E,n,v<x?L:P,l,d),Y=new $n(0,n,k,l,d),ie=new $n(E,n,0,l,d),se=[],ue=[];W.contains(Y)&&se.push(D),W.contains(ie)&&ue.push(D),q.contains(Y)&&se.push(N),q.contains(ie)&&ue.push(N);for(let de=D+1;de<N;de++)se.push(de),ue.push(de);e.push({extent:W,frameIds:[D]},{extent:q,frameIds:[N]},{extent:Y,frameIds:se},{extent:ie,frameIds:ue})}else P>L||B?e.push({extent:new $n(P,n,k,l,d),frameIds:[D]},{extent:new $n(E,n,L,l,d),frameIds:[N]}):e.push({extent:new $n(P,n,L,l,d),frameIds:[D]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let l=0;l<e.length;l++)e[l].extent.set(n)}return e}_normalizeX(t,e){const[i,r]=e.valid,n=2*r;let l,d=0;return t>r?(l=Math.ceil(Math.abs(t-r)/n),t-=l*n,d=l):t<i&&(l=Math.ceil(Math.abs(t-i)/n),t+=l*n,d=-l),{x:t,frameId:d}}};g([S({readOnly:!0})],hr.prototype,"cache",null),g([S({readOnly:!0})],hr.prototype,"center",null),g([S({readOnly:!0})],hr.prototype,"extent",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],hr.prototype,"hasM",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],hr.prototype,"hasZ",null),g([S({readOnly:!0})],hr.prototype,"height",null),g([S({readOnly:!0})],hr.prototype,"width",null),g([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],hr.prototype,"xmin",void 0),g([S({type:Number,json:{write:!0}})],hr.prototype,"ymin",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],hr.prototype,"mmin",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],hr.prototype,"zmin",void 0),g([S({type:Number,json:{write:!0}})],hr.prototype,"xmax",void 0),g([S({type:Number,json:{write:!0}})],hr.prototype,"ymax",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],hr.prototype,"mmax",void 0),g([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],hr.prototype,"zmax",void 0),hr=$n=g([J("esri.geometry.Extent")],hr),hr.prototype.toJSON.isDefaultToJSON=!0;const Ct=hr;let d1;var YP,KP;const QJ=((YP=globalThis.esriConfig)==null?void 0:YP.locale)??((KP=globalThis.dojoConfig)==null?void 0:KP.locale);function zO(){var t;return QJ??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Wn(){return d1===void 0&&(d1=zO()),d1}const p1=[];function VO(t){return p1.push(t),{remove(){p1.splice(p1.indexOf(t),1)}}}const Jx=[];function JM(t){return Jx.push(t),{remove(){p1.splice(Jx.indexOf(t),1)}}}function eY(){const t=zO();d1!==t&&(d1=t,[...Jx].forEach(e=>{e.call(null,t)}),[...p1].forEach(e=>{e.call(null,t)}))}var ZP;(ZP=globalThis.addEventListener)==null||ZP.call(globalThis,"languagechange",eY);let bg;function tY(t){return bg&&!bg.destroyed||(bg=t()),bg}var Yx;const iY=new xt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Tn=Yx=class extends Be{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Yx({categories:this.categories?ae(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(d=>Array.isArray(d)?JSON.stringify(d):d));let r="";if(this.extent){const d=Q2(this.extent,ut.WGS84);d!=null&&(r=`${d.xmin},${d.ymin},${d.xmax},${d.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const l={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(l.sortField=this.sortField.split(",").map(d=>iY.toJSON(d.trim())).join(","),l.sortOrder=this.sortOrder),{query:{...e,...l}}}};g([S()],Tn.prototype,"categories",void 0),g([S()],Tn.prototype,"disableExtraQuery",void 0),g([S({type:Ct})],Tn.prototype,"extent",void 0),g([S()],Tn.prototype,"filter",void 0),g([S()],Tn.prototype,"num",void 0),g([S()],Tn.prototype,"query",void 0),g([S()],Tn.prototype,"sortField",void 0),g([S()],Tn.prototype,"sortOrder",null),g([S()],Tn.prototype,"start",void 0),Tn=Yx=g([J("esri.portal.PortalQueryParams")],Tn);const La=Tn;let hc=class extends Be{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};g([S()],hc.prototype,"nextQueryParams",void 0),g([S()],hc.prototype,"queryParams",void 0),g([S()],hc.prototype,"results",void 0),g([S()],hc.prototype,"total",void 0),hc=g([J("esri.portal.PortalQueryResult")],hc);const rY=hc;let il=class extends ge{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ne("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};g([S({type:Date})],il.prototype,"created",void 0),g([S()],il.prototype,"id",void 0),g([S()],il.prototype,"portal",void 0),g([S()],il.prototype,"title",void 0),g([S({readOnly:!0})],il.prototype,"url",null),g([S()],il.prototype,"username",void 0),il=g([J("esri.portal.PortalFolder")],il);const sY=il;let cr=class extends ge{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return br(this.portal).request(this.url+"/categorySchema",e).then(i=>{const r=i.categorySchema||[];return r.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return br(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let r=Di(La,e);const n=br(this.portal);return parseFloat(n.currentVersion)>5?(r=r||new La,n.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new La,r.query="group:"+this.id+(r.query?" "+r.query:""),n.queryItems(r,i))}_fetchCategorySchemaSet(e,i){const r=br(this.portal);return r.fetchSelf(r.authMode,!0,i).then(n=>{const l=n.contentCategorySetsGroupQuery;if(l){const d=new La;return d.disableExtraQuery=!0,d.num=1,d.query=l,r.queryGroups(d,i)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const l=n.results[0],d=new La;return d.num=1,d.query=`typekeywords:"${e}"`,l.queryItems(d,i)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",i).then(l=>{const d=l&&l.categorySchema;return d&&d.length?d:[]}):[])}};g([S()],cr.prototype,"access",void 0),g([S({type:Date})],cr.prototype,"created",void 0),g([S()],cr.prototype,"description",void 0),g([S()],cr.prototype,"id",void 0),g([S()],cr.prototype,"isInvitationOnly",void 0),g([S({type:Date})],cr.prototype,"modified",void 0),g([S()],cr.prototype,"owner",void 0),g([S()],cr.prototype,"portal",void 0),g([S()],cr.prototype,"snippet",void 0),g([S()],cr.prototype,"sortField",void 0),g([S()],cr.prototype,"sortOrder",void 0),g([S()],cr.prototype,"tags",void 0),g([S()],cr.prototype,"thumbnail",void 0),g([S({readOnly:!0})],cr.prototype,"thumbnailUrl",null),g([S()],cr.prototype,"title",void 0),g([S({readOnly:!0})],cr.prototype,"url",null),cr=g([J("esri.portal.PortalGroup")],cr);const Kx=cr,nY=Object.freeze(Object.defineProperty({__proto__:null,default:Kx},Symbol.toStringTag,{value:"Module"}));var Zx;let ci=Zx=class extends ge{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,r=t&&t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let l=this.userContentUrl;return r&&(l+="/"+(typeof r=="string"?r:r.id)),this.portal.request(l+"/addItem",n).then(d=>(e.id=d.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=sY.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Kx.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),le(()=>Promise.resolve().then(()=>BO),void 0).then(({default:n})=>{i=n;const l={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:l})}).then(n=>{let l;return n&&n.items?(l=n.items.map(d=>{const y=i.fromJSON(d);return y.portal=this.portal,y}),Promise.all(l.map(d=>d.load())).catch(d=>d).then(()=>({items:l,nextStart:n.nextStart,total:n.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Kx({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ne("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Zx;return e.sourceJSON=t,e.read(t),e}};g([S()],ci.prototype,"access",void 0),g([S({type:Date})],ci.prototype,"created",void 0),g([S()],ci.prototype,"culture",void 0),g([S()],ci.prototype,"description",void 0),g([S()],ci.prototype,"email",void 0),g([S()],ci.prototype,"favGroupId",void 0),g([S()],ci.prototype,"fullName",void 0),g([S({type:Date})],ci.prototype,"modified",void 0),g([S()],ci.prototype,"orgId",void 0),g([S()],ci.prototype,"portal",void 0),g([S()],ci.prototype,"preferredView",void 0),g([S()],ci.prototype,"privileges",void 0),g([S()],ci.prototype,"region",void 0),g([S()],ci.prototype,"role",void 0),g([S()],ci.prototype,"roleId",void 0),g([S()],ci.prototype,"sourceJSON",void 0),g([S()],ci.prototype,"thumbnail",void 0),g([S({readOnly:!0})],ci.prototype,"thumbnailUrl",null),g([S()],ci.prototype,"units",void 0),g([S({readOnly:!0})],ci.prototype,"userContentUrl",null),g([S({readOnly:!0})],ci.prototype,"url",null),g([S()],ci.prototype,"username",void 0),g([S()],ci.prototype,"userType",void 0),ci=Zx=g([J("esri.portal.PortalUser")],ci);const YM=ci,oY=Object.freeze(Object.defineProperty({__proto__:null,default:YM},Symbol.toStringTag,{value:"Module"}));var rl;let wg;const hI={PortalGroup:()=>le(()=>Promise.resolve().then(()=>nY),void 0),PortalItem:()=>le(()=>Promise.resolve().then(()=>BO),void 0),PortalUser:()=>le(()=>Promise.resolve().then(()=>oY),void 0)};let Ee=rl=class extends Em(Zo){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Vt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){cI.unregister(this),this.defaultBasemap=ri(this.defaultBasemap),this.defaultDevBasemap=ri(this.defaultDevBasemap),this.defaultVectorBasemap=ri(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ii(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Vt.request.trustedServers.includes(e)||Vt.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=YM.fromJSON(t),e.portal=this),e}load(t){const e=le(()=>Promise.resolve().then(()=>PY),void 0).then(({default:i})=>{hi(t),wg=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if(_t){const n=_t;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==rl.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",aY(new WeakRef(this))),cI.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await le(()=>import("./ElevationLayer-67c1411f.js"),["assets/ElevationLayer-67c1411f.js","assets/ArcGISCachedService-0eaf732b.js","assets/TileInfoTilemapCache-4c1da8bc.js","assets/TilemapCache-d9919efa.js"])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(t,e);i.unshift(...r)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Ko(t)?Promise.reject(Ei()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new La;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const n of e)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return Ko(t)?Promise.reject(Ei()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Wn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Wn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return tY(()=>new rl)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",n={authMode:t,query:{culture:Wn().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(r,n)}queryPortal(t,e,i,r){const n=Di(La,e),l=d=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...r}).then(y=>{const v=n.clone();return v.start=y.nextStart,new rY({nextQueryParams:v,queryParams:n,total:y.total,results:rl._resultsToTypedArray(d,{portal:this},y,r)})}).then(y=>Promise.all(y.results.map(v=>typeof v.when=="function"?v.when():y)).then(()=>y,v=>(Nn(v),y)));return i&&hI[i]?hI[i]().then(({default:d})=>(hi(r),l(d))):l()}signIn(){if(this.authMode===rl.AUTH_MODE_ANONYMOUS)return Promise.reject(new ne("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return _t?_t.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const n=rl._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(l=>typeof l.when=="function"?l.when():r)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===rl.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:l=!1,method:d="auto",responseType:y="json",signal:v}=e,x={authMode:r,body:n,cacheBust:l,method:d,query:i,responseType:y,timeout:0,signal:v};return Ht(this._normalizeSSL(t),x).then($=>$.data)}toJSON(){throw new ne("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new rl({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new ne("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new La;i.query=t||(Vt.apiKey&&OO(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,e);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const l=await n.queryItems(i,e);return l.total?l.results.filter(d=>d.type==="Web Map").map(d=>new wg({portalItem:d})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new La({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,e);if(!n.total)return[];const l=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=l.sortField||"name",r.sortOrder=l.sortOrder||"desc";const d=await l.queryItems(r,e);return d.total?d.results.filter(y=>y.type==="Web Scene").map(y=>new wg({portalItem:y})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=wg.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let n=[];if(i){const l=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(d=>{const y=Object.assign(t?t.fromJSON(d):d,e);return typeof y.load=="function"&&y.load(l),y}))}else n=[];return n}};Ee.AUTH_MODE_ANONYMOUS="anonymous",Ee.AUTH_MODE_AUTO="auto",Ee.AUTH_MODE_IMMEDIATE="immediate",g([S()],Ee.prototype,"access",void 0),g([S()],Ee.prototype,"allSSL",void 0),g([S()],Ee.prototype,"authMode",void 0),g([S()],Ee.prototype,"authorizedCrossOriginDomains",void 0),g([xe("authorizedCrossOriginDomains")],Ee.prototype,"readAuthorizedCrossOriginDomains",null),g([S()],Ee.prototype,"basemapGalleryGroupQuery",void 0),g([S({json:{name:"3DBasemapGalleryGroupQuery"}})],Ee.prototype,"basemapGalleryGroupQuery3D",void 0),g([S()],Ee.prototype,"bingKey",void 0),g([S()],Ee.prototype,"canListApps",void 0),g([S()],Ee.prototype,"canListData",void 0),g([S()],Ee.prototype,"canListPreProvisionedItems",void 0),g([S()],Ee.prototype,"canProvisionDirectPurchase",void 0),g([S()],Ee.prototype,"canSearchPublic",void 0),g([S()],Ee.prototype,"canShareBingPublic",void 0),g([S()],Ee.prototype,"canSharePublic",void 0),g([S()],Ee.prototype,"canSignInArcGIS",void 0),g([S()],Ee.prototype,"canSignInIDP",void 0),g([S()],Ee.prototype,"colorSetsGroupQuery",void 0),g([S()],Ee.prototype,"commentsEnabled",void 0),g([S({type:Date})],Ee.prototype,"created",void 0),g([S()],Ee.prototype,"credential",void 0),g([S()],Ee.prototype,"culture",void 0),g([S()],Ee.prototype,"currentVersion",void 0),g([S()],Ee.prototype,"customBaseUrl",void 0),g([S()],Ee.prototype,"defaultBasemap",void 0),g([xe("defaultBasemap")],Ee.prototype,"readDefaultBasemap",null),g([S()],Ee.prototype,"defaultDevBasemap",void 0),g([xe("defaultDevBasemap")],Ee.prototype,"readDefaultDevBasemap",null),g([S({type:Ct})],Ee.prototype,"defaultExtent",void 0),g([S()],Ee.prototype,"defaultVectorBasemap",void 0),g([xe("defaultVectorBasemap")],Ee.prototype,"readDefaultVectorBasemap",null),g([S()],Ee.prototype,"description",void 0),g([S()],Ee.prototype,"devBasemapGalleryGroupQuery",void 0),g([S()],Ee.prototype,"eueiEnabled",void 0),g([S({readOnly:!0})],Ee.prototype,"extraQuery",null),g([S()],Ee.prototype,"featuredGroups",void 0),g([S()],Ee.prototype,"featuredItemsGroupQuery",void 0),g([S()],Ee.prototype,"galleryTemplatesGroupQuery",void 0),g([S()],Ee.prototype,"livingAtlasGroupQuery",void 0),g([S()],Ee.prototype,"hasCategorySchema",void 0),g([S()],Ee.prototype,"helpBase",void 0),g([S()],Ee.prototype,"helperServices",void 0),g([S()],Ee.prototype,"helpMap",void 0),g([S()],Ee.prototype,"homePageFeaturedContent",void 0),g([S()],Ee.prototype,"homePageFeaturedContentCount",void 0),g([S()],Ee.prototype,"httpPort",void 0),g([S()],Ee.prototype,"httpsPort",void 0),g([S()],Ee.prototype,"id",void 0),g([S()],Ee.prototype,"ipCntryCode",void 0),g([S({readOnly:!0})],Ee.prototype,"isOrganization",null),g([S()],Ee.prototype,"isPortal",void 0),g([S()],Ee.prototype,"isReadOnly",void 0),g([S({readOnly:!0})],Ee.prototype,"itemPageUrl",null),g([S()],Ee.prototype,"layerTemplatesGroupQuery",void 0),g([S()],Ee.prototype,"maxTokenExpirationMinutes",void 0),g([S({type:Date})],Ee.prototype,"modified",void 0),g([S()],Ee.prototype,"name",void 0),g([S()],Ee.prototype,"portalHostname",void 0),g([S()],Ee.prototype,"portalMode",void 0),g([S()],Ee.prototype,"portalProperties",void 0),g([S()],Ee.prototype,"region",void 0),g([S({readOnly:!0})],Ee.prototype,"restUrl",null),g([S()],Ee.prototype,"rotatorPanels",void 0),g([S()],Ee.prototype,"showHomePageDescription",void 0),g([S()],Ee.prototype,"sourceJSON",void 0),g([S()],Ee.prototype,"staticImagesUrl",void 0),g([S({json:{name:"2DStylesGroupQuery"}})],Ee.prototype,"stylesGroupQuery2d",void 0),g([S({json:{name:"stylesGroupQuery"}})],Ee.prototype,"stylesGroupQuery3d",void 0),g([S()],Ee.prototype,"supportsHostedServices",void 0),g([S()],Ee.prototype,"symbolSetsGroupQuery",void 0),g([S()],Ee.prototype,"templatesGroupQuery",void 0),g([S()],Ee.prototype,"thumbnail",void 0),g([S({readOnly:!0})],Ee.prototype,"thumbnailUrl",null),g([S()],Ee.prototype,"units",void 0),g([S()],Ee.prototype,"url",void 0),g([S()],Ee.prototype,"urlKey",void 0),g([xe("urlKey")],Ee.prototype,"readUrlKey",null),g([S()],Ee.prototype,"user",void 0),g([xe("user")],Ee.prototype,"readUser",null),g([S()],Ee.prototype,"use3dBasemaps",void 0),g([S()],Ee.prototype,"useStandardizedQuery",void 0),g([S()],Ee.prototype,"useVectorBasemaps",void 0),g([S()],Ee.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ee=rl=g([J("esri.portal.Portal")],Ee);const os=Ee,cI=new FinalizationRegistry(t=>{t.remove()});function aY(t){const e=_t;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const lY=ve.getLogger("esri.assets");function Et(t){if(!Vt.assetsPath)throw lY.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ne("assets:path-not-set","config.assetsPath is not set");return Gl(Vt.assetsPath,t)}let sl=class extends Be{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&pn(e)?ve.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new ne("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:r}=await le(()=>import("./resourceUtils-0bad6954.js"),[]);return r(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&pn(e)&&(e=RM(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};g([S()],sl.prototype,"portalItem",void 0),g([S({type:String,value:null})],sl.prototype,"path",null),g([St("path")],sl.prototype,"_castPath",null),g([S({type:String,readOnly:!0})],sl.prototype,"url",null),g([S({type:String,readOnly:!0})],sl.prototype,"cdnUrl",null),g([S({type:String,readOnly:!0})],sl.prototype,"itemRelativeUrl",null),sl=g([J("esri.portal.PortalItemResource")],sl);const uY=sl;let sy=class extends Be{constructor(e){super(e),this.created=null,this.rating=null}};g([S()],sy.prototype,"created",void 0),g([S()],sy.prototype,"rating",void 0),sy=g([J("esri.portal.PortalRating")],sy);const x3=sy;var cc;const hY=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),cY=new Set(["KML","GeoJson","CSV"]);let ct=cc=class extends Em(Zo){static from(t){return Id(cc,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new Ct(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,l=!1,d=!1,y=!1,v=!1,x=!1,$=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(l=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(d=e.includes("Table"),y=e.includes("Route Layer"),v=e.includes("Markup"),x=e.includes("Spatiotemporal"),$=e.includes("UtilityNetwork"),n=x&&d?"spatiotemporaltable":d?"table":y?"routelayer":v?"markup":x?"spatiotemporal":l?"featureshosted":$?"utilitynetwork":"features"):n=t==="map service"||t==="wms"||t==="wmts"?l||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):n=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="360 vr experience"?"360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":t==="data pipeline"?"datapipelines":"maps",n?Et(i+n+r+".png"):null}get isLayer(){return this.type!=null&&hY.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&_t&&!_t.findCredential(t)&&(t=_t._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=os.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof x3&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new x3({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:ae(this.applicationProxies),avgRating:this.avgRating,categories:ae(this.categories),created:ae(this.created),culture:this.culture,description:this.description,extent:ae(this.extent),groupCategories:ae(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ae(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ae(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ae(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ae(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new cc({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const r of["tags","typeKeywords","categories"])t[r]=(i=t[r])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await br(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return br(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await br(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new x3(e)):null}fetchRelatedItems(t,e){return br(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},cc)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return br(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>br(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ne("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await br(e).signIn();const{copyResources:r,folder:n,tags:l,title:d}=t||{},y={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:l==null?void 0:l.join(","),title:d}},{itemId:v}=await e.request(`${i}/copy`,y);return new cc({id:v,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Bd(e)?r.query={data:e}:r.query={url:Bn(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await le(()=>import("./resourceUtils-0bad6954.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:r}=await le(()=>import("./resourceUtils-0bad6954.js"),[]);return t.portalItem=this,r(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await le(()=>import("./resourceUtils-0bad6954.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ne("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await le(()=>import("./resourceUtils-0bad6954.js"),[]);return e(this,t)}resourceFromPath(t){return new uY({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:ae(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ae(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ae(this.typeKeywords),url:this.url};return nC(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new cc({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};g([S({type:["private","shared","org","public"]})],ct.prototype,"access",void 0),g([S()],ct.prototype,"accessInformation",void 0),g([S({type:String})],ct.prototype,"apiKey",void 0),g([S({json:{read:{source:"appProxies"}}})],ct.prototype,"applicationProxies",void 0),g([S()],ct.prototype,"avgRating",void 0),g([S()],ct.prototype,"categories",void 0),g([S({type:Date})],ct.prototype,"created",void 0),g([S()],ct.prototype,"culture",void 0),g([S()],ct.prototype,"description",void 0),g([S({readOnly:!0})],ct.prototype,"displayName",null),g([S({type:Ct})],ct.prototype,"extent",void 0),g([xe("extent")],ct.prototype,"readExtent",null),g([S()],ct.prototype,"groupCategories",void 0),g([S({readOnly:!0})],ct.prototype,"iconUrl",null),g([S()],ct.prototype,"id",void 0),g([S({readOnly:!0})],ct.prototype,"isLayer",null),g([S({type:Boolean,readOnly:!0})],ct.prototype,"isOrgItem",void 0),g([S()],ct.prototype,"itemControl",void 0),g([S({readOnly:!0})],ct.prototype,"itemPageUrl",null),g([S({readOnly:!0})],ct.prototype,"itemUrl",null),g([S()],ct.prototype,"licenseInfo",void 0),g([S({type:Date})],ct.prototype,"modified",void 0),g([S()],ct.prototype,"name",void 0),g([S()],ct.prototype,"numComments",void 0),g([S()],ct.prototype,"numRatings",void 0),g([S()],ct.prototype,"numViews",void 0),g([S()],ct.prototype,"owner",void 0),g([S()],ct.prototype,"ownerFolder",void 0),g([S({type:os})],ct.prototype,"portal",void 0),g([S()],ct.prototype,"screenshots",void 0),g([S()],ct.prototype,"size",void 0),g([S()],ct.prototype,"snippet",void 0),g([S()],ct.prototype,"sourceJSON",void 0),g([S({type:String})],ct.prototype,"sourceUrl",void 0),g([S({type:String})],ct.prototype,"spatialReference",void 0),g([S()],ct.prototype,"tags",void 0),g([S()],ct.prototype,"thumbnail",void 0),g([S({readOnly:!0})],ct.prototype,"thumbnailUrl",null),g([S()],ct.prototype,"title",void 0),g([S()],ct.prototype,"type",void 0),g([S()],ct.prototype,"typeKeywords",void 0),g([S({type:String,json:{read(t,e){var i;if(cY.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],ct.prototype,"url",void 0),g([S({readOnly:!0})],ct.prototype,"userItemUrl",null),ct=cc=g([J("esri.portal.PortalItem")],ct);const f1=ct,BO=Object.freeze(Object.defineProperty({__proto__:null,default:f1},Symbol.toStringTag,{value:"Module"})),dI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,dY={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function pI(t){return t in dY}const ny=[],v0=new Map;function fI(t){for(const e of v0.keys())UO(t.pattern,e)&&v0.delete(e)}function pY(t){return ny.includes(t)||(fI(t),ny.unshift(t)),{remove(){const e=ny.indexOf(t);e>-1&&(ny.splice(e,1),fI(t))}}}async function GO(t){const e=Wn();v0.has(t)||v0.set(t,yY(t,e));const i=v0.get(t);return i&&await mY.add(i),i}function fY(t){if(!dI.test(t))return null;const e=dI.exec(t);if(e===null)return null;const[,i,r]=e,n=i+(r?"-"+r.toUpperCase():"");return pI(n)?n:pI(i)?i:null}async function yY(t,e){const i=[];for(const r of ny)if(UO(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new ne("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ne("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function UO(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}JM(()=>{v0.clear()});const mY=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Yn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function gY(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await GO("esri/t9n/basemaps");return i[t]||i[e]}const Xx={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Et("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Et("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Et("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Et("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Et("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Et("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Et("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Et("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Et("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Et("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Et("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Et("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Et("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Et("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Et("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Et("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function vY(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}const Vxe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function qO(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function KM(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function Bxe(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function HO(t,e){const i=_t==null?void 0:_t.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.substring(0,r)}/rest/info`,l=e!=null?e.signal:null,{data:d}=await Ht(n,{query:{f:"json"},responseType:"json",signal:l});return(d==null?void 0:d.owningSystemUrl)||null}function bY(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function WO(t){return bY(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function wY(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function _Y(t){return!!wY(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const xY=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),SY=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function MY(t){return t.layerContainerType==="basemap"?xY:t.layerContainerType==="operational-layers"?SY:null}function $Y(t,e){if(e.restrictedWebMapWriting){const i=MY(e);return i==null||i.has(t.type)&&!KM(t)}return!0}function TY(t,e){if(e)if(KM(t)){const i=Tm("featureCollection.layers",e),r=i&&i[0]&&i[0].layerDefinition;r&&yI(t,r)}else t.type!=="group"&&yI(t,e)}function yI(t,e){"maxScale"in t&&(e.maxScale=fw(t.maxScale)??void 0),"minScale"in t&&(e.minScale=fw(t.minScale)??void 0)}function IY(t,e){if(TY(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=fw(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(KM(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function mI(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if($Y(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&IY(t,e=ae(e)),e}var Dv;let EY=0;const JO="esri.Basemap";let In=Dv=class extends Em(Zo){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+EY++,this.baseLayers=new ze,this.referenceLayers=new ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&ve.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{ve.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const r of t)r.destroy();const e=this.referenceLayers.removeAll();for(const r of e)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Ed(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const l=mI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);l!=null&&r.push(l)}),this.referenceLayers.forEach(n=>{const l=mI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);l!=null&&(n.type!=="scene"&&(l.isReference=!0),r.push(l))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",Ed(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return kM(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>ew(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>ew(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new Dv({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=ae(i);return r.url&&Na(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&Na(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;hi(t);const r=[];if(e){const n=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,n,t)),e.data.id&&!e.data.title){const l=e.data.id;r.push(gY(l).then(d=>{d&&this.read({title:d},e.context)}))}}else i&&r.push(this._loadFromItem(i,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,l=kY[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:d}=await le(()=>import("./layersCreator-3127444f.js"),["assets/layersCreator-3127444f.js","assets/lazyLayerLoader-c1377c69.js","assets/portalLayers-7281779b.js","assets/layersLoader-df053e66.js","assets/fetchService-0902ef39.js","assets/jsonContext-b4b994e9.js"]),y=[];if(hi(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const v={context:{origin:l,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},x=k=>l==="web-scene"&&k.layerType==="ArcGISSceneServiceLayer"||k.isReference,$=d(this.baseLayers,t.baseMapLayers.filter(k=>!x(k)),v);y.push($);const E=d(this.referenceLayers,t.baseMapLayers.filter(x),v);y.push(E)}await $s(y)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=Wi(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:AY[t.type||""]??"web-map",portal:t.portal||os.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||os.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}static fromId(t){const e=Xx[t];if(!e)return null;if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),yw(ve.getLogger(JO),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Dv.fromJSON(e)}};g([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ze}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],In.prototype,"baseLayers",null),g([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],In.prototype,"id",void 0),g([S({type:f1})],In.prototype,"portalItem",void 0),g([S()],In.prototype,"referenceLayers",null),g([S({readOnly:!0})],In.prototype,"resourceInfo",void 0),g([S({type:ut})],In.prototype,"spatialReference",void 0),g([S()],In.prototype,"thumbnailUrl",void 0),g([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],In.prototype,"title",void 0),g([Ae("title")],In.prototype,"writeTitle",null),In=Dv=g([J(JO)],In);const AY={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},kY={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},xw=In,PY=Object.freeze(Object.defineProperty({__proto__:null,default:xw},Symbol.toStringTag,{value:"Module"})),Sw={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function YO(t){return!!Sw[t]||!!Sw[t.toLowerCase()]}function ZM(t){return Sw[t]??Sw[t.toLowerCase()]}function CY(t){return[...ZM(t)]}function S3(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function KO(t,e,i,r=1){const n=(t%360+360)%360/360,l=i<=.5?i*(e+1):i+e-i*e,d=2*i-l;return[Math.round(255*S3(d,l,n+1/3)),Math.round(255*S3(d,l,n)),Math.round(255*S3(d,l,n-1/3)),r]}function OY(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,l=e?t.length===9:t.length===5;let d=Number("0x"+t.substr(1));if(isNaN(d))return null;const y=[0,0,0,1];let v;return l&&(v=d&r,d>>=i,y[3]=n*v/255),v=d&r,d>>=i,y[2]=n*v,v=d&r,d>>=i,y[1]=n*v,v=d&r,d>>=i,y[0]=n*v,y}function ia(){return[0,0,0]}function LY(t){return[t[0],t[1],t[2]]}function Am(t,e,i){return[t,e,i]}function DY(t){const e=ia(),i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function RY(t,e){return new Float64Array(t,e,3)}function ZO(){return ia()}function XO(){return Am(1,1,1)}function QO(){return Am(1,0,0)}function eL(){return Am(0,1,0)}function tL(){return Am(0,0,1)}const jY=ZO(),iL=XO(),FY=QO(),NY=eL(),zY=tL();Object.freeze(Object.defineProperty({__proto__:null,ONES:iL,UNIT_X:FY,UNIT_Y:NY,UNIT_Z:zY,ZEROS:jY,clone:LY,create:ia,createView:RY,fromArray:DY,fromValues:Am,ones:XO,unitX:QO,unitY:eL,unitZ:tL,zeros:ZO},Symbol.toStringTag,{value:"Module"}));let XM=1e-6;function Qn(){return XM}function VY(t){XM=t}const t_=Math.random,BY=Math.PI/180,GY=180/Math.PI;function QM(t){return t*BY}function UY(t){return t*GY}function qY(t,e){return Math.abs(t-e)<=XM*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:t_,equals:qY,getEpsilon:Qn,setEpsilon:VY,toDegree:UY,toRadian:QM},Symbol.toStringTag,{value:"Module"}));function i_(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function Mw(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function r_(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function rL(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function e7(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function sL(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function nL(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function HY(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function WY(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function JY(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function YY(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function KY(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function ZY(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function XY(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function oL(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function QY(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function aL(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function lL(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function uL(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function eK(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function tK(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function $w(t,e){const i=e[0],r=e[1],n=e[2];let l=i*i+r*r+n*n;return l>0&&(l=1/Math.sqrt(l),t[0]=e[0]*l,t[1]=e[1]*l,t[2]=e[2]*l),t}function hL(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function iK(t,e,i){const r=e[0],n=e[1],l=e[2],d=i[0],y=i[1],v=i[2];return t[0]=n*v-l*y,t[1]=l*d-r*v,t[2]=r*y-n*d,t}function rK(t,e,i,r){const n=e[0],l=e[1],d=e[2];return t[0]=n+r*(i[0]-n),t[1]=l+r*(i[1]-l),t[2]=d+r*(i[2]-d),t}function sK(t,e,i,r,n,l){const d=l*l,y=d*(2*l-3)+1,v=d*(l-2)+l,x=d*(l-1),$=d*(3-2*l);return t[0]=e[0]*y+i[0]*v+r[0]*x+n[0]*$,t[1]=e[1]*y+i[1]*v+r[1]*x+n[1]*$,t[2]=e[2]*y+i[2]*v+r[2]*x+n[2]*$,t}function nK(t,e,i,r,n,l){const d=1-l,y=d*d,v=l*l,x=y*d,$=3*l*y,E=3*v*d,k=v*l;return t[0]=e[0]*x+i[0]*$+r[0]*E+n[0]*k,t[1]=e[1]*x+i[1]*$+r[1]*E+n[1]*k,t[2]=e[2]*x+i[2]*$+r[2]*E+n[2]*k,t}function oK(t,e){e=e||1;const i=t_,r=2*i()*Math.PI,n=2*i()-1,l=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*l,t[1]=Math.sin(r)*l,t[2]=n*e,t}function aK(t,e,i){const r=e[0],n=e[1],l=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*l+i[12],t[1]=i[1]*r+i[5]*n+i[9]*l+i[13],t[2]=i[2]*r+i[6]*n+i[10]*l+i[14],t}function lK(t,e,i){const r=e[0],n=e[1],l=e[2];return t[0]=r*i[0]+n*i[3]+l*i[6],t[1]=r*i[1]+n*i[4]+l*i[7],t[2]=r*i[2]+n*i[5]+l*i[8],t}function uK(t,e,i){const r=i[0],n=i[1],l=i[2],d=i[3],y=e[0],v=e[1],x=e[2];let $=n*x-l*v,E=l*y-r*x,k=r*v-n*y,P=n*k-l*E,D=l*$-r*k,L=r*E-n*$;const N=2*d;return $*=N,E*=N,k*=N,P*=2,D*=2,L*=2,t[0]=y+$+P,t[1]=v+E+D,t[2]=x+k+L,t}function hK(t,e,i,r){const n=[],l=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],l[0]=n[0],l[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),l[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=l[0]+i[0],t[1]=l[1]+i[1],t[2]=l[2]+i[2],t}function cK(t,e,i,r){const n=[],l=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],l[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),l[1]=n[1],l[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=l[0]+i[0],t[1]=l[1]+i[1],t[2]=l[2]+i[2],t}function dK(t,e,i,r){const n=[],l=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],l[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),l[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),l[2]=n[2],t[0]=l[0]+i[0],t[1]=l[1]+i[1],t[2]=l[2]+i[2],t}function pK(t,e){Mw(_g,t),Mw(xg,e),$w(_g,_g),$w(xg,xg);const i=hL(_g,xg);return i>1?0:i<-1?Math.PI:Math.acos(i)}const _g=ia(),xg=ia();function fK(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function yK(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function mK(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],l=e[0],d=e[1],y=e[2],v=Qn();return Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-d)<=v*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-y)<=v*Math.max(1,Math.abs(n),Math.abs(y))}function gK(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],l=i[2]-e[2];let d=r*r+n*n+l*l;return d>0?(d=1/Math.sqrt(d),t[0]=r*d,t[1]=n*d,t[2]=l*d,t):(t[0]=0,t[1]=0,t[2]=0,t)}const vK=e7,bK=sL,wK=nL,_K=aL,xK=lL,SK=i_,MK=uL;Object.freeze(Object.defineProperty({__proto__:null,abs:JY,add:rL,angle:pK,bezier:nK,ceil:HY,copy:Mw,cross:iK,direction:gK,dist:_K,distance:aL,div:wK,divide:nL,dot:hL,equals:mK,exactEquals:yK,floor:WY,hermite:sK,inverse:tK,len:SK,length:i_,lerp:rK,max:ZY,min:KY,mul:bK,multiply:sL,negate:eK,normalize:$w,random:oK,rotateX:hK,rotateY:cK,rotateZ:dK,round:XY,scale:oL,scaleAndAdd:QY,set:r_,sign:YY,sqrDist:xK,sqrLen:MK,squaredDistance:lL,squaredLength:uL,str:fK,sub:vK,subtract:e7,transformMat3:lK,transformMat4:aK,transformQuat:uK},Symbol.toStringTag,{value:"Module"}));function $K(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function TK(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function IK(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function cL(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function dL(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function pL(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function EK(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function AK(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function kK(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function PK(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function CK(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function OK(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function LK(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function fL(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],l=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+l*l)}function yL(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],l=e[3]-t[3];return i*i+r*r+n*n+l*l}function mL(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function gL(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function DK(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function RK(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function jK(t,e){const i=e[0],r=e[1],n=e[2],l=e[3];let d=i*i+r*r+n*n+l*l;return d>0&&(d=1/Math.sqrt(d),t[0]=i*d,t[1]=r*d,t[2]=n*d,t[3]=l*d),t}function FK(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function vL(t,e,i,r){const n=e[0],l=e[1],d=e[2],y=e[3];return t[0]=n+r*(i[0]-n),t[1]=l+r*(i[1]-l),t[2]=d+r*(i[2]-d),t[3]=y+r*(i[3]-y),t}function NK(t,e){const i=t_;let r,n,l,d,y,v;e=e||1;do r=2*i()-1,n=2*i()-1,y=r*r+n*n;while(y>=1);do l=2*i()-1,d=2*i()-1,v=l*l+d*d;while(v>=1);const x=Math.sqrt((1-y)/v);return t[0]=e*r,t[1]=e*n,t[2]=e*l*x,t[3]=e*d*x,t}function zK(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*l+i[12]*d,t[1]=i[1]*r+i[5]*n+i[9]*l+i[13]*d,t[2]=i[2]*r+i[6]*n+i[10]*l+i[14]*d,t[3]=i[3]*r+i[7]*n+i[11]*l+i[15]*d,t}function VK(t,e,i){const r=e[0],n=e[1],l=e[2],d=i[0],y=i[1],v=i[2],x=i[3],$=x*r+y*l-v*n,E=x*n+v*r-d*l,k=x*l+d*n-y*r,P=-d*r-y*n-v*l;return t[0]=$*x+P*-d+E*-v-k*-y,t[1]=E*x+P*-y+k*-d-$*-v,t[2]=k*x+P*-v+$*-y-E*-d,t[3]=e[3],t}function BK(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function GK(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function UK(t,e){const i=t[0],r=t[1],n=t[2],l=t[3],d=e[0],y=e[1],v=e[2],x=e[3],$=Qn();return Math.abs(i-d)<=$*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-y)<=$*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-v)<=$*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(l-x)<=$*Math.max(1,Math.abs(l),Math.abs(x))}const qK=cL,HK=dL,WK=pL,JK=fL,YK=yL,KK=mL,ZK=gL;Object.freeze(Object.defineProperty({__proto__:null,add:IK,ceil:EK,copy:$K,dist:JK,distance:fL,div:WK,divide:pL,dot:FK,equals:UK,exactEquals:GK,floor:AK,inverse:RK,len:KK,length:mL,lerp:vL,max:PK,min:kK,mul:HK,multiply:dL,negate:DK,normalize:jK,random:NK,round:CK,scale:OK,scaleAndAdd:LK,set:TK,sqrDist:YK,sqrLen:ZK,squaredDistance:yL,squaredLength:gL,str:BK,sub:qK,subtract:cL,transformMat4:zK,transformQuat:VK},Symbol.toStringTag,{value:"Module"}));const gI=new Float32Array(1);function Gxe(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function zs(t,e,i){return Math.min(Math.max(t,e),i)}function Uxe(t){return(t&t-1)==0}function qxe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Hxe(t,e,i){return t+(e-t)*i}function XK(t){return t*Math.PI/180}function bL(t){return 180*t/Math.PI}function Wxe(t){return Math.acos(zs(t,-1,1))}function wL(t){return Math.asin(zs(t,-1,1))}function M3(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const Tw=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function QK(t){return Tw.setFloat64(0,t),Tw.getBigInt64(0)}function eZ(t){return Tw.setBigInt64(0,t),Tw.getFloat64(0)}const $3=BigInt("1000000");tZ(1);function tZ(t){const e=QK(t=Math.abs(t)),i=eZ(e<=$3?$3:e-$3);return Math.abs(t-i)}function Jxe(t){return _L(Math.max(-vI,Math.min(t,vI)))}function _L(t){return gI[0]=t,gI[0]}function Yxe(t,e){const i=i_(t),r=wL(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return r_(e,i,r,n),e}function Kxe(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(M3(e,1)&&M3(i,1)&&M3(r,1))}const vI=_L(34028234663852886e22);function Sg(t){return zs(H2(t),0,255)}function Mg(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let Rv=class Fr{static blendColors(e,i,r,n=new Fr){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),l=r[1];if(l==="rgb"&&n.length===3||l==="rgba"&&n.length===4){const d=n[0];if(d.charAt(d.length-1)==="%"){const y=n.map(v=>2.56*parseFloat(v));return n.length===4&&(y[3]=parseFloat(n[3])),Fr.fromArray(y,i)}return Fr.fromArray(n.map(y=>parseFloat(y)),i)}if(l==="hsl"&&n.length===3||l==="hsla"&&n.length===4)return Fr.fromArray(KO(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new Fr){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const r=e.length===4?4:8,n=(1<<r)-1;let l=Number("0x"+e.substr(1));return isNaN(l)?null:(["b","g","r"].forEach(d=>{const y=l&n;l>>=r,i[d]=r===4?17*y:y}),i.a=1,i)}static fromArray(e,i=new Fr){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=YO(e)?ZM(e):null;return r&&Fr.fromArray(r,i)||Fr.fromRgb(e,i)||Fr.fromHex(e,i)}static fromJSON(e){return e&&new Fr([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Fr.fromString(e,this):Array.isArray(e)?Fr.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Fr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Fr.AlphaMode.ALWAYS){const i=Sg(this.r),r=Sg(this.g),n=Sg(this.b);return e===Fr.AlphaMode.ALWAYS||this.a!==1?[i,r,n,Sg(255*this.a)]:[i,r,n]}clone(){return new Fr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(Mg(this.r,0,255)),this.g=Math.round(Mg(this.g,0,255)),this.b=Math.round(Mg(this.b,0,255)),this.a=Mg(this.a,0,1),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};Rv.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Rv||(Rv={}));const Ne=Rv;function Zxe(t){}function iZ(t){return()=>t}function Ue(t,e={}){const i=t instanceof xt?t:new xt(t,e),r={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(r.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(r.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(r.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(r.nonNullable=e.nonNullable),S(r)}var Qx;let jv=Qx=class extends ge{constructor(t){super(t),this.type="none"}clone(){return new Qx({type:this.type})}};g([Ue({none:"none",stayAbove:"stay-above"})],jv.prototype,"type",void 0),jv=Qx=g([J("esri.ground.NavigationConstraint")],jv);function s_(t){const e=H2(100*(1-t));return Math.max(0,Math.min(e,100))}function tm(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var e9;let nl=e9=class extends Em(Zo){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&ve.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{Is(t)||ve.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Ed(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(l=>{if("write"in l){const d={};iZ(l)().write(d,r)&&n.push(d)}else r&&r.messages&&r.messages.push(new ne("layer:unsupported",`Layers (${l.title}, ${l.id}) of type '${l.declaredClass}' cannot be persisted in the ground`,{layer:l}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return kM(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await le(()=>import("./ElevationQuery-11a9ed3c.js"),[]);hi(e);const r=new i,n=this.layers.filter(bI).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await le(()=>import("./ElevationQuery-11a9ed3c.js"),[]);hi(e);const r=new i,n=this.layers.filter(bI).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:ae(this.surfaceColor),navigationConstraint:ae(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new e9({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const r=e&&e.origin||"web-scene",n=e&&e.portal||null,l=e&&e.url||null;return le(()=>import("./layersCreator-3127444f.js"),["assets/layersCreator-3127444f.js","assets/lazyLayerLoader-c1377c69.js","assets/portalLayers-7281779b.js","assets/layersLoader-df053e66.js","assets/fetchService-0902ef39.js","assets/jsonContext-b4b994e9.js"]).then(({populateOperationalLayers:d})=>{hi(i);const y=[];if(t.layers&&Array.isArray(t.layers)){const v={context:{origin:r,url:l,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};y.push(d(this.layers,t.layers,v))}return $s(y)}).then(()=>{})}};function rZ(t){return t&&"createElevationSampler"in t}function bI(t){return t.type==="elevation"||rZ(t)}g([S({json:{read:!1}})],nl.prototype,"layers",null),g([Ae("layers")],nl.prototype,"writeLayers",null),g([S({readOnly:!0})],nl.prototype,"resourceInfo",void 0),g([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Lt,read:{reader:tm,source:"transparency"},write:{writer:(t,e)=>{e.transparency=s_(t)},target:"transparency"}}})],nl.prototype,"opacity",void 0),g([S({type:Ne,json:{type:[Lt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],nl.prototype,"surfaceColor",void 0),g([S({type:jv,json:{write:!0}})],nl.prototype,"navigationConstraint",void 0),nl=e9=g([J("esri.Ground")],nl);const Iw=nl;let pp=class extends ze{constructor(e){super(e),this.getCollections=null}initialize(){this.own(OC(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new ze(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const l=this.indexOf(n,e);l>=0?l!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const l=this.getChildrenFunction(n);if(Array.isArray(l))for(const d of l)e=this._processCollection(e,d);else e=this._processCollection(e,l)}}return e}};g([S()],pp.prototype,"getCollections",void 0),g([S()],pp.prototype,"getChildrenFunction",void 0),g([S()],pp.prototype,"itemFilterFunction",void 0),pp=g([J("esri.core.CollectionFlattener")],pp);const F0=pp,sZ=[["binary","application/octet-stream","bin",""]];function t9(t,e){return i7(oZ(t,e))}function i9(t,e){return i7(aZ(t,e))}function Qxe(t,e){return xL(nZ(t,e))}function t7(t){return[...sZ,...t]}function nZ(t,e){return t7(e).find(i=>i7(i)===t)}function oZ(t,e){return t7(e).find(i=>xL(i)===t)}function aZ(t,e){const i=t.toLowerCase();return t7(e).find(r=>lZ(r).some(n=>i.endsWith(n)))}function i7(t){return t==null?void 0:t[0]}function xL(t){return t==null?void 0:t[1]}function lZ(t){return(t==null?void 0:t[2].split(","))??[]}function e9e(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function uZ(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=WO(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!_Y(t)||t.type==="scene"&&!hZ(t))}function hZ(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:r}=e,n=t9("model/gltf-binary",i)??i9("glb",i);return n!=null&&r.includes(n)}const wI=ve.getLogger("esri.support.basemapUtils");function cZ(){return{}}function dZ(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function pZ(t,e){let i;if(typeof t=="string"){if(!(t in Xx)){const r=Object.entries(Xx).filter(([n,l])=>Vt.apiKey&&!l.classic||!Vt.apiKey&&l.classic&&!l.deprecated).map(([n])=>`"${n}"`).join(", ");return wI.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}e&&(i=e[t]),i||(i=xw.fromId(t),e&&(e[t]=i))}else i=Di(xw,t);return i!=null&&i.destroyed&&(wI.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function fZ(t){return new F0({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function T3(t){for(const e of t.values())e==null||e.destroy();t.clear()}const _I={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function yZ(t){let e=null;if(typeof t=="string")if(t in _I){const i=_I[t];e=new Iw({resourceInfo:{data:{layers:[i]}}})}else ve.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Di(Iw,t);return e}function N0(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var r9;function xI(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function mZ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let xu=r9=class extends zh{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):mZ(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Ct,i=this.hasZ,r=this.hasM,n=i?3:2,l=t[0],d=xI(Math.min),y=xI(Math.max);let v,x,$,E,[k,P]=l,[D,L]=l;for(let N=0,B=t.length;N<B;N++){const W=t[N],[q,Y]=W;if(k=d(k,q),P=d(P,Y),D=y(D,q),L=y(L,Y),i&&W.length>2){const ie=W[2];v=d(v,ie),$=y($,ie)}if(r&&W.length>n){const ie=W[n];x=d(x,ie),E=y(E,ie)}}return e.xmin=k,e.ymin=P,e.xmax=D,e.ymax=L,e.spatialReference=this.spatialReference,i?(e.zmin=v,e.zmax=$):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=x,e.mmax=E):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=ae(this.points)}addPoint(t){return N0(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:ae(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new r9(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new lt(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new lt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(N0(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};g([S({readOnly:!0})],xu.prototype,"cache",null),g([S()],xu.prototype,"extent",null),g([S({type:[[Number]],json:{write:{isRequired:!0}}})],xu.prototype,"points",void 0),g([Ae("points")],xu.prototype,"writePoints",null),xu=r9=g([J("esri.geometry.Multipoint")],xu),xu.prototype.toJSON.isDefaultToJSON=!0;const km=xu;function t9e(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function gZ(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function SL(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function vZ(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function bZ(t,e,i,r){const[n,l]=e,[d,y]=i[r],[v,x]=i[r+1],$=v-d,E=x-y,k=$*$+E*E,P=(n-d)*$+(l-y)*E,D=Math.min(1,Math.max(0,P/k));return t[0]=d+$*D,t[1]=y+E*D,t}function i9e(t,e,i){let r,n,l,d,y=!1,v=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();)l=i.x,d=i.y,n>e!=d>e&&t<(l-r)*(e-n)/(d-n)+r&&(y=!y),v=Math.min(v,wZ(t,e,r,n,l,d)),r=l,n=d;return v===0?0:(y?1:-1)*Math.sqrt(v)}function wZ(t,e,i,r,n,l){let d=i,y=r,v=n-d,x=l-y;if(v!==0||x!==0){const $=((t-d)*v+(e-y)*x)/(v*v+x*x);$>1?(d=n,y=l):$>0&&(d+=v*$,y+=x*$)}return v=t-d,x=e-y,v*v+x*x}function ML(t,e){return vZ(t,e,.5)}function $L(t,e,i){const r=t.length;let n=0,l=0,d=0;for(let y=0;y<r;y++){const v=t[y],x=t[(y+1)%r];let $=2;n+=v[0]*x[1]-x[0]*v[1],v.length>2&&x.length>2&&i&&(l+=v[0]*x[2]-x[0]*v[2],$=3),v.length>$&&x.length>$&&e&&(d+=v[0]*x[$]-x[0]*v[$])}return n<=0&&l<=0&&d<=0}function _Z(t){const e=t.length;return e>2&&R2(t[0],t[e-1])}function r9e(t){if("rings"in t&&(xZ(t),t.rings.length>0&&!$L(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function xZ(t){if("rings"in t)for(const e of t.rings)_Z(e)||e.push(e[0].slice())}function s9e(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let r=0;r<i;r++)e+=(t[r][0]-t[r+1][0])*(t[r][1]+t[r+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function TL(t){if(!t||t.numPoints<3)return 0;let e,i,r=0;if(t.seekPathStart(),!t.nextPoint())return 0;e=t.x,i=t.y;const n=e,l=i;for(;t.nextPoint();)r+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return r+=(e-n)*(i+l),-.5*r}function n9e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function SZ(t){return t?MZ(t.rings,t.hasZ??!1):null}function MZ(t,e){if(!t||!t.length)return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let l=0,d=t.length;l<d;l++){const y=IL(t[l],e,n);y&&r.push(y)}if(r.sort((l,d)=>{let y=l[2]-d[2];return y===0&&e&&(y=l[4]-d[4]),y}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const l=t[0]&&t[0].length?$Z(t[0],e):null;if(!l)return null;i[0]=l[0],i[1]=l[1],e&&l.length>2&&(i[2]=l[2])}return i}function IL(t,e,i){let r=0,n=0,l=0,d=0,y=0;const v=t.length?t[0][0]:0,x=t.length?t[0][1]:0,$=t.length&&e?t[0][2]:0;for(let k=0;k<t.length;k++){const P=t[k],D=t[(k+1)%t.length],[L,N,B]=P,W=L-v,q=N-x,[Y,ie,se]=D,ue=Y-v,de=ie-x,be=W*de-ue*q;if(d+=be,r+=(W+ue)*be,n+=(q+de)*be,e&&P.length>2&&D.length>2){const we=B-$,$e=se-$,ke=W*$e-ue*we;l+=(we+$e)*ke,y+=ke}L<i[0]&&(i[0]=L),L>i[1]&&(i[1]=L),N<i[2]&&(i[2]=N),N>i[3]&&(i[3]=N),e&&(B<i[4]&&(i[4]=B),B>i[5]&&(i[5]=B))}if(d>0&&(d*=-1),y>0&&(y*=-1),!d)return null;d*=.5,y*=.5;const E=[r/(6*d)+v,n/(6*d)+x,d];return e&&(i[4]===i[5]||y===0?(E[3]=(i[4]+i[5])/2,E[4]=0):(E[3]=l/(6*y)+$,E[4]=y)),E}function $Z(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,l=0,d=0,y=0;for(let v=0,x=t.length;v<x-1;v++){const $=t[v],E=t[v+1];if($&&E){i[0]=$[0],i[1]=$[1],r[0]=E[0],r[1]=E[1],e&&$.length>2&&E.length>2&&(i[2]=$[2],r[2]=E[2]);const k=SL(i,r);if(k){n+=k;const P=ML($,E);l+=k*P[0],d+=k*P[1],e&&P.length>2&&(y+=k*P[2])}}}return n>0?e?[l/n,d/n,y/n]:[l/n,d/n]:t.length?t[0]:null}function TZ(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const r=[],n=[],l=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const d=IL(gZ(t),t.hasZ,l);d&&n.push(d)}if(n.sort((d,y)=>{let v=d[2]-y[2];return v===0&&e&&(v=d[4]-y[4]),v}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<l[0]||r[0]>l[1]||r[1]<l[2]||r[1]>l[3]||e&&(r[2]<l[4]||r[2]>l[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const d=t.numPoints?IZ(t):null;if(!d)return null;r[0]=d[0],r[1]=d[1],e&&d.length>2&&(r[2]=d[2])}return r}function IZ(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,l=0,d=0,y=0;if(t.nextPoint()){let v=t.x,x=t.y,$=t.z;for(;t.nextPoint();){const E=t.x,k=t.y,P=t.z;i[0]=v,i[1]=x,r[0]=E,r[1]=k,e&&(i[2]=$,r[2]=P);const D=SL(i,r);if(D){n+=D;const L=ML(i,r);l+=D*L[0],d+=D*L[1],e&&L.length>2&&(y+=D*L[2])}v=E,x=k,$=P}}return n>0?e?[l/n,d/n,y/n]:[l/n,d/n]:t.numPoints?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const EZ=1e-6;function o9e(t){let e=0;for(t.reset();t.nextPath();)e+=TL(t);if(e<EZ){const n=TZ(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)kZ(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const AZ=1/3;function kZ(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let l,d=i.x-r,y=i.y-n,v=0,x=0;for(;i.nextPoint();)v=i.x-r,x=i.y-n,l=.5*AZ*(v*y-x*d),t[0]+=l*(d+v),t[1]+=l*(y+x),d=v,y=x;const $=TL(i),E=[r,n];return E[0]-=e[0],E[1]-=e[1],E[0]*=$,E[1]*=$,t[0]+=E[0],t[1]+=E[1],t}function za(t=DZ){return[t[0],t[1],t[2],t[3]]}function a9e(t){return[t[0],t[1],t[2],t[3]]}function r7(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function PZ(t,e,i,r,n=za()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function l9e(t,e=za()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function u9e(t,e){return new Ct({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function h9e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function c9e(t,e,i){if(e!=null)if("length"in e)s9(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else r7(i,t)}function CZ(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function OZ(t){return t[1]>=t[3]?0:t[3]-t[1]}function d9e(t){return CZ(t)*OZ(t)}function p9e(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function f9e(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function y9e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function LZ(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function m9e(t){return t?r7(t,SI):za(SI)}function s9(t){return t!=null&&t.length===4}function g9e(t,e){return s9(t)&&s9(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const SI=[1/0,1/0,-1/0,-1/0],DZ=[0,0,0,0];function EL(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function AL(t){return t.points!==void 0}function kL(t){return t.x!==void 0&&t.y!==void 0}function PL(t){return t.paths!==void 0}function CL(t){return t.rings!==void 0}function OL(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const ch=OL(Math.min),dh=OL(Math.max);function v9e(t,e){return PL(e)?z0(t,e.paths,!1,!1):CL(e)?z0(t,e.rings,!1,!1):AL(e)?s7(t,e.points,!1,!1,!1,!1):EL(e)?LL(t,e):(kL(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function b9e(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const l=RZ(t);e=Math.min(l[0],e),r=Math.min(l[1],r),i=Math.max(l[2],i),n=Math.max(l[3],n)}return za([e,r,i,n])}function RZ(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return za([e,r,i,n])}function w9e(t,e){return PL(e)?z0(t,e.paths,!0,!1):CL(e)?z0(t,e.rings,!0,!1):AL(e)?s7(t,e.points,!0,!1,!0,!1):EL(e)?LL(t,e,!0,!1,!0,!1):(kL(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function z0(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let l,d,y,v,[x,$]=e[0][0],[E,k]=e[0][0];for(let P=0;P<e.length;P++){const D=e[P];for(let L=0;L<D.length;L++){const N=D[L],[B,W]=N;if(x=ch(x,B),$=ch($,W),E=dh(E,B),k=dh(k,W),i&&N.length>2){const q=N[2];l=ch(l,q),d=dh(d,q)}if(r&&N.length>n){const q=N[n];y=ch(l,q),v=dh(d,q)}}}return i?r?(t[0]=x,t[1]=$,t[2]=l,t[3]=y,t[4]=E,t[5]=k,t[6]=d,t[7]=v,t.length=8,t):(t[0]=x,t[1]=$,t[2]=l,t[3]=E,t[4]=k,t[5]=d,t.length=6,t):r?(t[0]=x,t[1]=$,t[2]=y,t[3]=E,t[4]=k,t[5]=v,t.length=6,t):(t[0]=x,t[1]=$,t[2]=E,t[3]=k,t.length=4,t)}function LL(t,e,i,r,n,l){const d=e.xmin,y=e.xmax,v=e.ymin,x=e.ymax;let $=e.zmin,E=e.zmax,k=e.mmin,P=e.mmax;return n?($=$||0,E=E||0,l?(k=k||0,P=P||0,t[0]=d,t[1]=v,t[2]=$,t[3]=k,t[4]=y,t[5]=x,t[6]=E,t[7]=P,t):(t[0]=d,t[1]=v,t[2]=$,t[3]=y,t[4]=x,t[5]=E,t)):l?(k=k||0,P=P||0,t[0]=d,t[1]=v,t[2]=k,t[3]=y,t[4]=x,t[5]=P,t):(t[0]=d,t[1]=v,t[2]=y,t[3]=x,t)}function s7(t,e,i,r,n,l){const d=i?3:2,y=r&&l,v=i&&n;if(!e.length||!e[0].length)return null;let x,$,E,k,[P,D]=e[0],[L,N]=e[0];for(let B=0;B<e.length;B++){const W=e[B],[q,Y]=W;if(P=ch(P,q),D=ch(D,Y),L=dh(L,q),N=dh(N,Y),v&&W.length>2){const ie=W[2];x=ch(x,ie),$=dh($,ie)}if(y&&W.length>d){const ie=W[d];E=ch(x,ie),k=dh($,ie)}}return n?(x=x||0,$=$||0,l?(E=E||0,k=k||0,t[0]=P,t[1]=D,t[2]=x,t[3]=E,t[4]=L,t[5]=N,t[6]=$,t[7]=k,t):(t[0]=P,t[1]=D,t[2]=x,t[3]=L,t[4]=N,t[5]=$,t)):l?(E=E||0,k=k||0,t[0]=P,t[1]=D,t[2]=E,t[3]=L,t[4]=N,t[5]=k,t):(t[0]=P,t[1]=D,t[2]=L,t[3]=N,t)}function jZ(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function FZ(t){return t.points!==void 0}function NZ(t){return t.x!==void 0&&t.y!==void 0}function zZ(t){return t.paths!==void 0}function VZ(t){return t.rings!==void 0}const n7=[];function DL(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function RL(t,e,i,r,n,l){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:l}}function jL(t,e,i,r,n,l){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:l}}function FL(t,e,i,r,n,l,d,y){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:l,zmax:d,mmax:y}}function o7(t,e=!1,i=!1){return e?i?FL(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):RL(t[0],t[1],t[2],t[3],t[4],t[5]):i?jL(t[0],t[1],t[2],t[3],t[4],t[5]):DL(t[0],t[1],t[2],t[3])}function _9e(t){return t?jZ(t)?t:NZ(t)?GZ(t):VZ(t)?NL(t):zZ(t)?zL(t):FZ(t)?BZ(t):null:null}function BZ(t){const{hasZ:e,hasM:i,points:r}=t;return o7(s7(n7,r,e??!1,i??!1),e,i)}function GZ(t){const{x:e,y:i,z:r,m:n}=t,l=n!=null;return r!=null?l?FL(e,i,r,n,e,i,r,n):RL(e,i,r,e,i,r):l?jL(e,i,n,e,i,n):DL(e,i,e,i)}function NL(t){const{hasZ:e,hasM:i,rings:r}=t,n=z0(n7,r,e??!1,i??!1);return n?o7(n,e,i):null}function zL(t){const{hasZ:e,hasM:i,paths:r}=t,n=z0(n7,r,e??!1,i??!1);return n?o7(n,e,i):null}var Fv;function MI(t){return!Array.isArray(t[0])}let pa=Fv=class extends zh{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,n=!1;for(const d of e)d.hasZ&&(r=!0),d.hasM&&(n=!0);const l={rings:e.map(d=>{const y=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(r&&d.hasZ){const v=d.zmin+.5*(d.zmax-d.zmin);for(let x=0;x<y.length;x++)y[x].push(v)}if(n&&d.hasM){const v=d.mmin+.5*(d.mmax-d.mmin);for(let x=0;x<y.length;x++)y[x].push(v)}return y}),spatialReference:i};return r&&(l.hasZ=!0),n&&(l.hasM=!0),new Fv(l)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,r,n=null,l=null;return t&&!Array.isArray(t)?(n=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||ut.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),l=n[0]&&n[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=l.length>3):i===void 0?i=r?l.length>3:l.length>2:r===void 0&&(r=i?l.length>3:l.length>2)),{rings:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=SZ(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new lt;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=NL(this);if(!e)return null;const i=new Ct(e);return i.spatialReference=t,i}get isSelfIntersecting(){return KJ(this.rings)}writeRings(t,e){e.rings=ae(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(MI(t)){const r=[];for(let n=0,l=t.length;n<l;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new Fv;return t.spatialReference=this.spatialReference,t.rings=ae(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,l,d,y],[v,x,$,E])=>n===v&&l===x&&(d==null&&$==null||d===$)&&(y==null&&E==null||y===E);for(let n=0;n<this.rings.length;n++){const l=this.rings[n],d=t.rings[n];if(!R2(l,d,r))return!1}return!0}contains(t){if(!t)return!1;const e=Q2(t,this.spatialReference);return RO(this,e??t)}isClockwise(t){let e;return e=MI(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,$L(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new lt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new lt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new lt(i[0],i[1],i[2],i[3],this.spatialReference):new lt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(N0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new lt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new lt(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(N0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};g([S({readOnly:!0})],pa.prototype,"cache",null),g([S({readOnly:!0})],pa.prototype,"centroid",null),g([S({readOnly:!0})],pa.prototype,"extent",null),g([S({readOnly:!0})],pa.prototype,"isSelfIntersecting",null),g([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],pa.prototype,"rings",void 0),g([Ae("rings")],pa.prototype,"writeRings",null),pa=Fv=g([J("esri.geometry.Polygon")],pa),pa.prototype.toJSON.isDefaultToJSON=!0;const Va=pa;var n9;function UZ(t){return!Array.isArray(t[0])}let Su=n9=class extends zh{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,r,n=null,l=null;return t&&!Array.isArray(t)?(n=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||ut.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),l=n[0]&&n[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=!1):i===void 0?i=!r&&l.length>3:r===void 0&&(r=!i&&l.length>3)),{paths:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=zL(this);if(!e)return null;const i=new Ct(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=ae(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(UZ(t)){const r=[];for(let n=0,l=t.length;n<l;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new n9;return t.spatialReference=this.spatialReference,t.paths=ae(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new lt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new lt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new lt(i[0],i[1],i[2],i[3],this.spatialReference):new lt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(N0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new lt(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new lt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(N0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};g([S({readOnly:!0})],Su.prototype,"cache",null),g([S({readOnly:!0})],Su.prototype,"extent",null),g([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Su.prototype,"paths",void 0),g([Ae("paths")],Su.prototype,"writePaths",null),Su=n9=g([J("esri.geometry.Polyline")],Su),Su.prototype.toJSON.isDefaultToJSON=!0;const cn=Su,Ew=as()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Aw=as()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function VL(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function a7(t){return t.points!==void 0}function l7(t){return t.x!==void 0&&t.y!==void 0}function u7(t){return t.paths!==void 0}function md(t){return t.rings!==void 0}function Ul(t){return t==null?null:t instanceof zh?t:l7(t)?lt.fromJSON(t):u7(t)?cn.fromJSON(t):md(t)?Va.fromJSON(t):a7(t)?km.fromJSON(t):VL(t)?Ct.fromJSON(t):null}function Pm(t){return t?l7(t)?"esriGeometryPoint":u7(t)?"esriGeometryPolyline":md(t)?"esriGeometryPolygon":VL(t)?"esriGeometryEnvelope":a7(t)?"esriGeometryMultipoint":null:null}const qZ={esriGeometryPoint:lt,esriGeometryPolyline:cn,esriGeometryPolygon:Va,esriGeometryEnvelope:Ct,esriGeometryMultipoint:km};function HZ(t){return t&&qZ[t]||null}const Vh={base:zh,key:"type",typeMap:{extent:Ct,multipoint:km,point:lt,polyline:cn,polygon:Va}};Fa(Vh);let BL=0;const Bh=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+BL++})}};return e=g([J("esri.core.Identifiable")],e),e},h7=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:BL++})}};return e=g([J("esri.core.NumericIdentifiable")],e),e};let $I=class extends Bh(class{}){};$I=g([J("esri.core.Identifiable")],$I);async function WZ(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await le(()=>import("./portalLayers-7281779b.js"),["assets/portalLayers-7281779b.js","assets/lazyLayerLoader-c1377c69.js","assets/layersLoader-df053e66.js","assets/fetchService-0902ef39.js","assets/jsonContext-b4b994e9.js"]);try{return await i(e)}catch(r){const n=e&&e.portalItem,l=n&&n.id||"unset",d=n&&n.portal&&n.portal.url||Vt.portalUrl;throw ve.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+d+"', id: '"+l+"')",r),r}}let JZ=0,dr=class extends Ha.EventedMixin(Bh(Zo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ct(-180,-90,180,90,ut.WGS84),this.id=Date.now().toString(16)+"-layer-"+JZ++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ut.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await le(()=>import("./arcgisLayers-7d587cfc.js"),["assets/arcgisLayers-7d587cfc.js","assets/fetchService-0902ef39.js","assets/lazyLayerLoader-c1377c69.js"])).fromUrl(i)}static fromPortalItem(e){return WZ(e)}initialize(){this.when().catch(e=>{Is(e)||ve.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Wi(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ht(e,{query:{f:"json"},responseType:"json"})).data;throw new ne("layer:no-attribution-data","Layer does not have attribution data")}};g([S({type:String})],dr.prototype,"attributionDataUrl",void 0),g([S({type:Ct})],dr.prototype,"fullExtent",void 0),g([S({readOnly:!0})],dr.prototype,"hasAttributionData",null),g([S({type:String,clonable:!1})],dr.prototype,"id",void 0),g([S({type:Boolean,nonNullable:!0})],dr.prototype,"legendEnabled",void 0),g([S({type:["show","hide","hide-children"]})],dr.prototype,"listMode",void 0),g([S({type:Number,range:{min:0,max:1},nonNullable:!0})],dr.prototype,"opacity",void 0),g([S({clonable:!1})],dr.prototype,"parent",void 0),g([S({readOnly:!0})],dr.prototype,"parsedUrl",null),g([S({type:Boolean})],dr.prototype,"popupEnabled",void 0),g([S({type:Boolean})],dr.prototype,"attributionVisible",void 0),g([S({type:ut})],dr.prototype,"spatialReference",void 0),g([S({type:String})],dr.prototype,"title",void 0),g([S({readOnly:!0,json:{read:!1}})],dr.prototype,"type",void 0),g([S()],dr.prototype,"url",void 0),g([S({type:Boolean,nonNullable:!0})],dr.prototype,"visible",void 0),dr=g([J("esri.layers.Layer")],dr);const im=dr;function o9(t,e,i){let r,n;if(t)for(let l=0,d=t.length;l<d;l++){if(r=t.at(l),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=o9(r.layers,e,i),n))return n}}const YZ=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ze;const r=d=>{d.parent&&"remove"in d.parent&&d.parent.remove(d)},n=d=>{d.parent=this,this.layerAdded(d),d.type!=="elevation"&&d.type!=="base-elevation"||ve.getLogger(this).error(`Layer 'title:${d.title}, id:${d.id}' of type '${d.type}' is not supported as an operational layer and will therefore be ignored.`)},l=d=>{d.parent=null,this.layerRemoved(d)};this.addHandles([this.layers.on("before-add",d=>r(d.item)),this.layers.on("after-add",d=>n(d.item)),this.layers.on("after-remove",d=>l(d.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Ed(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof im){const l=i;l.parent===this?this.reorder(l,r):n.add(l,r)}else Kl(i)?i.then(l=>{this.destroyed||this.add(l,r)}):ve.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let l=n.getNextIndex(r);i.slice().forEach(d=>{d.parent!==this?(n.add(d,l),l+=1):this.reorder(d,l)})}findLayerById(i){return o9(this.layers,"id",i)}findLayerByUid(i){return o9(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return g([S()],e.prototype,"layers",null),e=g([J("esri.support.LayersMixin")],e),e};function a9(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const l=t.at(r);if(l[e]===i)return l;if((l==null?void 0:l.type)==="group"){const d=a9(l.tables,e,i);if(d)return d}}}const KZ=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ze,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&ve.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Ed(i,this._get("tables")))}findTableById(i){return a9(this.tables,"id",i)}findTableByUid(i){return a9(this.tables,"uid",i)}};return g([S()],e.prototype,"tables",null),e=g([J("esri.support.TablesMixin")],e),e};let fa=class extends KZ(YZ(Ha.EventedMixin(Be))){constructor(e){super(e),this.allLayers=new F0({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=fZ(this),this.basemap=null,this.editableLayers=new F0({getCollections:()=>[this.allLayers],itemFilterFunction:uZ}),this.ground=new Iw,this._basemapCache=cZ()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),dZ(this._basemapCache),this._basemapCache=null}castBasemap(e){return pZ(e,this._basemapCache)}castGround(e){return yZ(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};g([S({readOnly:!0,dependsOn:[]})],fa.prototype,"allLayers",void 0),g([S({readOnly:!0})],fa.prototype,"allTables",void 0),g([S({type:xw})],fa.prototype,"basemap",void 0),g([St("basemap")],fa.prototype,"castBasemap",null),g([S({readOnly:!0})],fa.prototype,"editableLayers",void 0),g([S({type:Iw,nonNullable:!0})],fa.prototype,"ground",void 0),g([St("ground")],fa.prototype,"castGround",null),fa=g([J("esri.Map")],fa);const GL=fa,si=t=>{let e=class extends t{clone(){var v;const i=br(_r(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,l={},d=new Map;for(const x in r){const $=r[x],E=n==null?void 0:n.originOf(x),k=$.clonable;if($.readOnly||k===!1||E!==Le.USER&&E!==Le.DEFAULTS&&E!==Le.WEB_MAP&&E!==Le.WEB_SCENE)continue;const P=this[x];let D=null;D=typeof k=="function"?k(P):k==="reference"?P:Sx(P),P!=null&&D==null||(E===Le.DEFAULTS?d.set(x,D):l[x]=D)}const y=new(Object.getPrototypeOf(this)).constructor(l);if(d.size){const x=(v=_r(y))==null?void 0:v.store;if(x)for(const[$,E]of d)x.set($,E,Le.DEFAULTS)}return y}};return e=g([J("esri.core.Clonable")],e),e};let TI=class extends si(Be){};TI=g([J("esri.core.Clonable")],TI);var V0;function ZZ(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||r!=null&&+e>r)return V0.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return V0.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(V0||(V0={}));const XZ=ve.getLogger("esri.support.arcadeOnDemand");let I3;function ql(){return I3||(I3=(async()=>{const t=await le(()=>import("./arcadeUtils-b61fa350.js").then(e=>e.az),["assets/arcadeUtils-b61fa350.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/number-37f11f22.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),I3}const T9e=(t,e,i)=>c7.create(t,e,i,null,["$feature"],[]),I9e=(t,e,i)=>c7.create(t,e,i,null,["$feature","$view"],[]),QZ=(t,e,i,r)=>c7.create(t,e,i,r,["$feature","$view"],[]);let c7=class UL{constructor(e,i,r,n,l,d,y){this.services=null,this.script=e,this.evaluate=n;const v=Array.isArray(d)?d:d.fields;this.fields=v,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=l,this._spatialReference=y,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,n,l,d){const{arcade:y,Feature:v,Dictionary:x}=await ql(),$=ut.fromJSON(i);let E;try{E=y.parseScript(e,d)}catch(de){return XZ.error(new ne("arcade-bad-expression","Failed to parse arcade script",{script:e,error:de})),null}const k=l.reduce((de,be)=>({...de,[be]:null}),{});let P=null;n!=null&&(P=new x(n),P.immutable=!0,k.$config=null);const D=y.scriptUsesGeometryEngine(E),L=D&&y.enableGeometrySupport(),N=y.scriptUsesFeatureSet(E)&&y.enableFeatureSetSupport(),B=y.scriptIsAsync(E),W=B&&y.enableAsyncSupport(),q={vars:k,spatialReference:$,useAsync:!!W};await Promise.all([L,N,W]);const Y=new Set;await y.loadDependentModules(Y,E,null,B,D);const ie=new x;ie.immutable=!1,ie.setField("scale",0);const se=y.compileScript(E,q),ue=(de,be)=>("$view"in de&&de.$view&&(ie.setField("scale",typeof de.$view=="object"&&"scale"in de.$view?de.$view.scale:void 0),de.$view=ie),P&&(de.$config=P),se({vars:de,spatialReference:$,services:be}));return new UL(e,y,E,ue,new v,r,$)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const eX=/^([0-9_])/,tX=/[^a-z0-9_\u0080-\uffff]+/gi;function iX(t){return t==null?null:t.trim().replaceAll(tX,"_").replace(eX,"F$1")||null}const rX=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],sX=["field","normalizationField"];function II(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(EI(rX,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)EI(sX,r,e)}}function EI(t,e,i){if(t)for(const r of t){const n=Tm(r,e),l=n&&typeof n!="function"&&i.get(n);l&&ns(r,l.name,e)}}function qL(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const E3=new Set;function d7(t,e){return t&&e?(E3.clear(),rm(E3,t,e),Array.from(E3).sort()):[]}function rm(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)fn(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function fn(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function E9e(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function Ts(t,e,i){var l;if(!i)return;const{arcadeUtils:r}=await ql(),n=r.extractFieldNames(i,(l=e==null?void 0:e.fields)==null?void 0:l.map(d=>d.name));for(const d of n)fn(t,e,d)}async function HL(t,e,i){if(i&&i!=="1=1"){const{WhereClause:r}=await le(()=>import("./WhereClause-166a8c4d.js").then(l=>l.W),["assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js"]),n=r.create(i,e);if(!n.isStandardized)throw new ne("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});rm(t,e,n.fieldNames)}}function nX({displayField:t,fields:e}){return t||(e&&e.length?A3(e,"name-or-title")||A3(e,"unique-identifier")||A3(e,"type-or-category")||oX(e):null)}function oX(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function A3(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function A9e(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function aX(t,e,i){i.onStatisticExpression?Ts(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function k9e(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(lX(t,e,n)),i.fields&&r.push(...i.fields.map(async l=>aX(t,e.fieldsIndex,l))),await Promise.all(r)}async function lX(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(l=>Ts(t,e.fieldsIndex,l.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const l of n)l.type==="expression"&&l.expressionInfo&&r.push(Ts(t,e.fieldsIndex,l.expressionInfo.expression));await Promise.all(r)}async function P9e(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&rm(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&rm(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await HL(t,e.fieldsIndex,i.where))}async function C9e(t,e,i){e&&i&&await Promise.all(i.map(r=>uX(t,e,r)))}async function uX(t,e,i){e&&i&&(i.valueExpression?await Ts(t,e.fieldsIndex,i.valueExpression):i.field&&fn(t,e.fieldsIndex,i.field))}function O9e(t){return t?d7(t.fieldsIndex,WL(t)):[]}function hX(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?d7(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const cX=["oid","global-id","guid"],dX=["oid","global-id"],pX=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function fX(t){const e=new Set;JL(t).forEach(r=>e.add(r)),hX(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function WL(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:l}=e;return[i,r,n,l].filter(Boolean)}function JL(t){return WL(t).map(e=>e.toLowerCase())}function yX(t,e){var i;return t.editable&&!cX.includes(t.type)&&!JL(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function mX(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||fX(e).includes(i)||dX.includes(t.type)||pX.some(n=>n.test(i)))}async function L9e(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i&&i.length&&await Promise.all(i.map(n=>gX(t,r,n)))}async function gX(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Ts(t,e,r.expression);else{const l=r.expression.match(/{[^}]*}/g);l&&l.forEach(d=>{fn(t,e,d.slice(1,-1))})}await HL(t,e,n)}function vX(t){const e=t.defaultValue;return e!==void 0&&ZL(t,e)?e:t.nullable?null:void 0}function YL(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function bX(t){return t===null||YL(t)}const p7="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function wX(t){return t===null||p7(t)}function KL(t){return t!=null&&typeof t=="string"}function _X(t){return t===null||KL(t)}function xX(){return!0}function ZL(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?wX:p7;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?bX:YL;break;case"string":case"esriFieldTypeString":i=t.nullable?_X:KL;break;default:i=xX}return arguments.length===1?i:i(e)}const SX=["integer","small-integer","single","double"],MX=new Set([...SX,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),$X=["date","date-only","time-only","timestamp-offset"],TX=new Set([...$X,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function f7(t){return t!=null&&MX.has(t.type)}function D9e(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function IX(t){return t!=null&&TX.has(t.type)}var kw,Pw;function R9e(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function j9e(t,e){return t==null||t.nullable&&e===null?null:f7(t)&&!EX(t.type,Number(e))?kw.OUT_OF_RANGE:ZL(t,e)?t.domain?ZZ(t.domain,e):null:Pw.INVALID_TYPE}function EX(t,e){const i=typeof t=="string"?XL(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?p7(e)&&e>=r&&e<=n:e>=r&&e<=n}function XL(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return AX;case"esriFieldTypeInteger":case"integer":return kX;case"esriFieldTypeBigInteger":case"big-integer":return PX;case"esriFieldTypeSingle":case"single":return CX;case"esriFieldTypeDouble":case"double":return OX}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(kw||(kw={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(Pw||(Pw={}));const AX={min:-32768,max:32767,isInteger:!0},kX={min:-2147483648,max:2147483647,isInteger:!0},PX={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},CX={min:-34e37,max:12e37,isInteger:!1},OX={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function F9e(t,e,i){switch(t){case V0.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case V0.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Pw.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case kw.OUT_OF_RANGE:{const{min:r,max:n}=XL(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function LX(t,e){return!DX(t,e,null)}function DX(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const l of t??[])i.add(l);return!0}const r=e.attributes;let n=!1;for(const l of t)if(!(l in r)){if(n=!0,i==null)break;i.add(l)}return n}function l9(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let Nv=class extends ge{constructor(e){super(e),this.type=null}};g([S({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Nv.prototype,"type",void 0),Nv=g([J("esri.popup.content.Content")],Nv);const Gh=Nv;var u9;let dc=u9=class extends Gh{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new u9({description:this.description,displayType:this.displayType,title:this.title})}};g([S({type:String,json:{write:!0}})],dc.prototype,"description",void 0),g([S({type:["auto","preview","list"],json:{write:!0}})],dc.prototype,"displayType",void 0),g([S({type:String,json:{write:!0}})],dc.prototype,"title",void 0),g([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],dc.prototype,"type",void 0),dc=u9=g([J("esri.popup.content.AttachmentsContent")],dc);const sm=dc;var h9;let pc=h9=class extends Gh{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new h9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ae(this.outFields):null})}};g([S()],pc.prototype,"creator",void 0),g([S()],pc.prototype,"destroyer",void 0),g([S()],pc.prototype,"outFields",void 0),g([S({type:["custom"],readOnly:!0})],pc.prototype,"type",void 0),pc=h9=g([J("esri.popup.content.CustomContent")],pc);const RX=pc;var c9;let fp=c9=class extends ge{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new c9({title:this.title,expression:this.expression})}};g([S({type:String,json:{write:!0}})],fp.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],fp.prototype,"expression",void 0),g([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],fp.prototype,"returnType",void 0),fp=c9=g([J("esri.popup.ElementExpressionInfo")],fp);const QL=fp;var d9;let oy=d9=class extends Gh{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new d9({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};g([S({type:QL,json:{write:!0}})],oy.prototype,"expressionInfo",void 0),g([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],oy.prototype,"type",void 0),oy=d9=g([J("esri.popup.content.ExpressionContent")],oy);const y7=oy;class Gd extends Error{}class jX extends Gd{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class FX extends Gd{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class NX extends Gd{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ay extends Gd{}class eD extends Gd{constructor(e){super(`Invalid unit ${e}`)}}class Vn extends Gd{}class au extends Gd{constructor(){super("Zone is an abstract class")}}const Re="numeric",Xo="short",yn="long",Cw={year:Re,month:Re,day:Re},tD={year:Re,month:Xo,day:Re},zX={year:Re,month:Xo,day:Re,weekday:Xo},iD={year:Re,month:yn,day:Re},rD={year:Re,month:yn,day:Re,weekday:yn},sD={hour:Re,minute:Re},nD={hour:Re,minute:Re,second:Re},oD={hour:Re,minute:Re,second:Re,timeZoneName:Xo},aD={hour:Re,minute:Re,second:Re,timeZoneName:yn},lD={hour:Re,minute:Re,hourCycle:"h23"},uD={hour:Re,minute:Re,second:Re,hourCycle:"h23"},hD={hour:Re,minute:Re,second:Re,hourCycle:"h23",timeZoneName:Xo},cD={hour:Re,minute:Re,second:Re,hourCycle:"h23",timeZoneName:yn},dD={year:Re,month:Re,day:Re,hour:Re,minute:Re},pD={year:Re,month:Re,day:Re,hour:Re,minute:Re,second:Re},fD={year:Re,month:Xo,day:Re,hour:Re,minute:Re},yD={year:Re,month:Xo,day:Re,hour:Re,minute:Re,second:Re},VX={year:Re,month:Xo,day:Re,weekday:Xo,hour:Re,minute:Re},mD={year:Re,month:yn,day:Re,hour:Re,minute:Re,timeZoneName:Xo},gD={year:Re,month:yn,day:Re,hour:Re,minute:Re,second:Re,timeZoneName:Xo},vD={year:Re,month:yn,day:Re,weekday:yn,hour:Re,minute:Re,timeZoneName:yn},bD={year:Re,month:yn,day:Re,weekday:yn,hour:Re,minute:Re,second:Re,timeZoneName:yn};class Cm{get type(){throw new au}get name(){throw new au}get ianaName(){return this.name}get isUniversal(){throw new au}offsetName(e,i){throw new au}formatOffset(e,i){throw new au}offset(e){throw new au}equals(e){throw new au}get isValid(){throw new au}}let k3=null;class n_ extends Cm{static get instance(){return k3===null&&(k3=new n_),k3}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return _D(e,i,r)}formatOffset(e,i){return m1(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let zv={};function BX(t){return zv[t]||(zv[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),zv[t]}const GX={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function UX(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,l,d,y,v,x,$]=r;return[d,n,l,y,v,x,$]}function qX(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:l,value:d}=i[n],y=GX[l];l==="era"?r[y]=d:Ot(y)||(r[y]=parseInt(d,10))}return r}let $g={};class Hl extends Cm{static create(e){return $g[e]||($g[e]=new Hl(e)),$g[e]}static resetCache(){$g={},zv={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Hl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return _D(e,i,r,this.name)}formatOffset(e,i){return m1(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=BX(this.name);let[n,l,d,y,v,x,$]=r.formatToParts?qX(r,i):UX(r,i);y==="BC"&&(n=-Math.abs(n)+1);const k=v7({year:n,month:l,day:d,hour:v===24?0:v,minute:x,second:$,millisecond:0});let P=+i;const D=P%1e3;return P-=D>=0?D:1e3+D,(k-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let AI={};function HX(t,e={}){const i=JSON.stringify([t,e]);let r=AI[i];return r||(r=new Intl.ListFormat(t,e),AI[i]=r),r}let p9={};function f9(t,e={}){const i=JSON.stringify([t,e]);let r=p9[i];return r||(r=new Intl.DateTimeFormat(t,e),p9[i]=r),r}let y9={};function WX(t,e={}){const i=JSON.stringify([t,e]);let r=y9[i];return r||(r=new Intl.NumberFormat(t,e),y9[i]=r),r}let m9={};function JX(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let l=m9[n];return l||(l=new Intl.RelativeTimeFormat(t,e),m9[n]=l),l}let ly=null;function YX(){return ly||(ly=new Intl.DateTimeFormat().resolvedOptions().locale,ly)}function KX(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=f9(t).resolvedOptions(),n=t}catch{const v=t.substring(0,i);r=f9(v).resolvedOptions(),n=v}const{numberingSystem:l,calendar:d}=r;return[n,l,d]}}function ZX(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function XX(t){const e=[];for(let i=1;i<=12;i++){const r=yt.utc(2016,i,1);e.push(t(r))}return e}function QX(t){const e=[];for(let i=1;i<=7;i++){const r=yt.utc(2016,11,13+i);e.push(t(r))}return e}function Tg(t,e,i,r,n){const l=t.listingMode(i);return l==="error"?null:l==="en"?r(e):n(e)}function eQ(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class tQ{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:l,...d}=r;if(!i||Object.keys(d).length>0){const y={useGrouping:!1,...r};r.padTo>0&&(y.minimumIntegerDigits=r.padTo),this.inf=WX(e,y)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):g7(e,3);return nr(i,this.padTo)}}}class iQ{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const d=-1*(e.offset/60),y=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;e.offset!==0&&Hl.create(y).valid?(n=y,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const l={...this.opts};l.timeZone=l.timeZone||n,this.dtf=f9(i,l)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class rQ{constructor(e,i,r){this.opts={style:"long",...r},!i&&wD()&&(this.rtf=JX(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):wQ(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class wi{static fromOpts(e){return wi.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,r,n=!1){const l=e||sr.defaultLocale,d=l||(n?"en-US":YX()),y=i||sr.defaultNumberingSystem,v=r||sr.defaultOutputCalendar;return new wi(d,y,v,l)}static resetCache(){ly=null,p9={},y9={},m9={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r}={}){return wi.create(e,i,r)}constructor(e,i,r,n){const[l,d,y]=KX(e);this.locale=l,this.numberingSystem=i||d||null,this.outputCalendar=r||y||null,this.intl=ZX(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=eQ(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:wi.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,r=!0){return Tg(this,e,r,MD,()=>{const n=i?{month:e,day:"numeric"}:{month:e},l=i?"format":"standalone";return this.monthsCache[l][e]||(this.monthsCache[l][e]=XX(d=>this.extract(d,n,"month"))),this.monthsCache[l][e]})}weekdays(e,i=!1,r=!0){return Tg(this,e,r,ID,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},l=i?"format":"standalone";return this.weekdaysCache[l][e]||(this.weekdaysCache[l][e]=QX(d=>this.extract(d,n,"weekday"))),this.weekdaysCache[l][e]})}meridiems(e=!0){return Tg(this,void 0,e,()=>ED,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[yt.utc(2016,11,13,9),yt.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return Tg(this,e,i,AD,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[yt.utc(-40,1,1),yt.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),l=n.formatToParts(),d=l.find(y=>y.type.toLowerCase()===r);return d?d.value:null}numberFormatter(e={}){return new tQ(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new iQ(e,this.intl,i)}relFormatter(e={}){return new rQ(this.intl,this.isEnglish(),e)}listFormatter(e={}){return HX(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let P3=null;class ss extends Cm{static get utcInstance(){return P3===null&&(P3=new ss(0)),P3}static instance(e){return e===0?ss.utcInstance:new ss(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new ss(a_(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${m1(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${m1(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return m1(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class sQ extends Cm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function sh(t,e){if(Ot(t)||t===null)return e;if(t instanceof Cm)return t;if(nQ(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?n_.instance:i==="utc"||i==="gmt"?ss.utcInstance:ss.parseSpecifier(i)||Hl.create(t)}else return gd(t)?ss.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new sQ(t)}let kI=()=>Date.now(),PI="system",CI=null,OI=null,LI=null,DI=60,RI;class sr{static get now(){return kI}static set now(e){kI=e}static set defaultZone(e){PI=e}static get defaultZone(){return sh(PI,n_.instance)}static get defaultLocale(){return CI}static set defaultLocale(e){CI=e}static get defaultNumberingSystem(){return OI}static set defaultNumberingSystem(e){OI=e}static get defaultOutputCalendar(){return LI}static set defaultOutputCalendar(e){LI=e}static get twoDigitCutoffYear(){return DI}static set twoDigitCutoffYear(e){DI=e%100}static get throwOnInvalid(){return RI}static set throwOnInvalid(e){RI=e}static resetCaches(){wi.resetCache(),Hl.resetCache()}}function Ot(t){return typeof t>"u"}function gd(t){return typeof t=="number"}function o_(t){return typeof t=="number"&&t%1===0}function nQ(t){return typeof t=="string"}function oQ(t){return Object.prototype.toString.call(t)==="[object Date]"}function wD(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function aQ(t){return Array.isArray(t)?t:[t]}function jI(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const l=[e(n),n];return r&&i(r[0],l[0])===r[0]?r:l},null)[1]}function lQ(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function B0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pl(t,e,i){return o_(t)&&t>=e&&t<=i}function uQ(t,e){return t-e*Math.floor(t/e)}function nr(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Ju(t){if(!(Ot(t)||t===null||t===""))return parseInt(t,10)}function Zh(t){if(!(Ot(t)||t===null||t===""))return parseFloat(t)}function m7(t){if(!(Ot(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function g7(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function Om(t){return t%4===0&&(t%100!==0||t%400===0)}function y1(t){return Om(t)?366:365}function Ow(t,e){const i=uQ(e-1,12)+1,r=t+(e-i)/12;return i===2?Om(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function v7(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Lw(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||r===3?53:52}function g9(t){return t>99?t:t>sr.twoDigitCutoffYear?1900+t:2e3+t}function _D(t,e,i,r=null){const n=new Date(t),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(l.timeZone=r);const d={timeZoneName:e,...l},y=new Intl.DateTimeFormat(i,d).formatToParts(n).find(v=>v.type.toLowerCase()==="timezonename");return y?y.value:null}function a_(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function xD(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Vn(`Invalid unit value ${t}`);return e}function Dw(t,e){const i={};for(const r in t)if(B0(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=xD(n)}return i}function m1(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${nr(i,2)}:${nr(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${nr(i,2)}${nr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function l_(t){return lQ(t,["hour","minute","second","millisecond"])}const hQ=["January","February","March","April","May","June","July","August","September","October","November","December"],SD=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cQ=["J","F","M","A","M","J","J","A","S","O","N","D"];function MD(t){switch(t){case"narrow":return[...cQ];case"short":return[...SD];case"long":return[...hQ];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const $D=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],TD=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],dQ=["M","T","W","T","F","S","S"];function ID(t){switch(t){case"narrow":return[...dQ];case"short":return[...TD];case"long":return[...$D];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ED=["AM","PM"],pQ=["Before Christ","Anno Domini"],fQ=["BC","AD"],yQ=["B","A"];function AD(t){switch(t){case"narrow":return[...yQ];case"short":return[...fQ];case"long":return[...pQ];default:return null}}function mQ(t){return ED[t.hour<12?0:1]}function gQ(t,e){return ID(e)[t.weekday-1]}function vQ(t,e){return MD(e)[t.month-1]}function bQ(t,e){return AD(e)[t.year<0?0:1]}function wQ(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&l){const E=t==="days";switch(e){case 1:return E?"tomorrow":`next ${n[t][0]}`;case-1:return E?"yesterday":`last ${n[t][0]}`;case 0:return E?"today":`this ${n[t][0]}`}}const d=Object.is(e,-0)||e<0,y=Math.abs(e),v=y===1,x=n[t],$=r?v?x[1]:x[2]||x[1]:v?n[t][0]:t;return d?`${y} ${$} ago`:`in ${y} ${$}`}function FI(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const _Q={D:Cw,DD:tD,DDD:iD,DDDD:rD,t:sD,tt:nD,ttt:oD,tttt:aD,T:lD,TT:uD,TTT:hD,TTTT:cD,f:dD,ff:fD,fff:mD,ffff:vD,F:pD,FF:yD,FFF:gD,FFFF:bD};class rs{static create(e,i={}){return new rs(e,i)}static parseFormat(e){let i=null,r="",n=!1;const l=[];for(let d=0;d<e.length;d++){const y=e.charAt(d);y==="'"?(r.length>0&&l.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||y===i?r+=y:(r.length>0&&l.push({literal:/^\s+$/.test(r),val:r}),r=y,i=y)}return r.length>0&&l.push({literal:n||/^\s+$/.test(r),val:r}),l}static macroTokenToFormatOpts(e){return _Q[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return nr(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",l=(P,D)=>this.loc.extract(e,P,D),d=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",y=()=>r?mQ(e):l({hour:"numeric",hourCycle:"h12"},"dayperiod"),v=(P,D)=>r?vQ(e,P):l(D?{month:P}:{month:P,day:"numeric"},"month"),x=(P,D)=>r?gQ(e,P):l(D?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),$=P=>{const D=rs.macroTokenToFormatOpts(P);return D?this.formatWithSystemDefault(e,D):P},E=P=>r?bQ(e,P):l({era:P},"era"),k=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return y();case"d":return n?l({day:"numeric"},"day"):this.num(e.day);case"dd":return n?l({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return x("short",!0);case"cccc":return x("long",!0);case"ccccc":return x("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return x("short",!1);case"EEEE":return x("long",!1);case"EEEEE":return x("narrow",!1);case"L":return n?l({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?l({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return v("short",!0);case"LLLL":return v("long",!0);case"LLLLL":return v("narrow",!0);case"M":return n?l({month:"numeric"},"month"):this.num(e.month);case"MM":return n?l({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return v("short",!1);case"MMMM":return v("long",!1);case"MMMMM":return v("narrow",!1);case"y":return n?l({year:"numeric"},"year"):this.num(e.year);case"yy":return n?l({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?l({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?l({year:"numeric"},"year"):this.num(e.year,6);case"G":return E("short");case"GG":return E("long");case"GGGGG":return E("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return $(P)}};return FI(rs.parseFormat(i),k)}formatDurationFromString(e,i){const r=v=>{switch(v[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=v=>x=>{const $=r(x);return $?this.num(v.get($),x.length):x},l=rs.parseFormat(i),d=l.reduce((v,{literal:x,val:$})=>x?v:v.concat($),[]),y=e.shiftTo(...d.map(r).filter(v=>v));return FI(l,n(y))}}class zo{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const kD=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function nf(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function of(...t){return e=>t.reduce(([i,r,n],l)=>{const[d,y,v]=l(e,n);return[{...i,...d},y||r,v]},[{},null,1]).slice(0,2)}function af(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function PD(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Ju(e[i+n]);return[r,null,i+n]}}const CD=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,xQ=`(?:${CD.source}?(?:\\[(${kD.source})\\])?)?`,b7=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,OD=RegExp(`${b7.source}${xQ}`),w7=RegExp(`(?:T${OD.source})?`),SQ=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,MQ=/(\d{4})-?W(\d\d)(?:-?(\d))?/,$Q=/(\d{4})-?(\d{3})/,TQ=PD("weekYear","weekNumber","weekDay"),IQ=PD("year","ordinal"),EQ=/(\d{4})-(\d\d)-(\d\d)/,LD=RegExp(`${b7.source} ?(?:${CD.source}|(${kD.source}))?`),AQ=RegExp(`(?: ${LD.source})?`);function b0(t,e,i){const r=t[e];return Ot(r)?i:Ju(r)}function kQ(t,e){return[{year:b0(t,e),month:b0(t,e+1,1),day:b0(t,e+2,1)},null,e+3]}function lf(t,e){return[{hours:b0(t,e,0),minutes:b0(t,e+1,0),seconds:b0(t,e+2,0),milliseconds:m7(t[e+3])},null,e+4]}function Lm(t,e){const i=!t[e]&&!t[e+1],r=a_(t[e+1],t[e+2]),n=i?null:ss.instance(r);return[{},n,e+3]}function Dm(t,e){const i=t[e]?Hl.create(t[e]):null;return[{},i,e+1]}const PQ=RegExp(`^T?${b7.source}$`),CQ=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function OQ(t){const[e,i,r,n,l,d,y,v,x]=t,$=e[0]==="-",E=v&&v[0]==="-",k=(P,D=!1)=>P!==void 0&&(D||P&&$)?-P:P;return[{years:k(Zh(i)),months:k(Zh(r)),weeks:k(Zh(n)),days:k(Zh(l)),hours:k(Zh(d)),minutes:k(Zh(y)),seconds:k(Zh(v),v==="-0"),milliseconds:k(m7(x),E)}]}const LQ={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _7(t,e,i,r,n,l,d){const y={year:e.length===2?g9(Ju(e)):Ju(e),month:SD.indexOf(i)+1,day:Ju(r),hour:Ju(n),minute:Ju(l)};return d&&(y.second=Ju(d)),t&&(y.weekday=t.length>3?$D.indexOf(t)+1:TD.indexOf(t)+1),y}const DQ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function RQ(t){const[,e,i,r,n,l,d,y,v,x,$,E]=t,k=_7(e,n,r,i,l,d,y);let P;return v?P=LQ[v]:x?P=0:P=a_($,E),[k,new ss(P)]}function jQ(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const FQ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,NQ=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,zQ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function NI(t){const[,e,i,r,n,l,d,y]=t;return[_7(e,n,r,i,l,d,y),ss.utcInstance]}function VQ(t){const[,e,i,r,n,l,d,y]=t;return[_7(e,y,i,r,n,l,d),ss.utcInstance]}const BQ=nf(SQ,w7),GQ=nf(MQ,w7),UQ=nf($Q,w7),qQ=nf(OD),DD=of(kQ,lf,Lm,Dm),HQ=of(TQ,lf,Lm,Dm),WQ=of(IQ,lf,Lm,Dm),JQ=of(lf,Lm,Dm);function YQ(t){return af(t,[BQ,DD],[GQ,HQ],[UQ,WQ],[qQ,JQ])}function KQ(t){return af(jQ(t),[DQ,RQ])}function ZQ(t){return af(t,[FQ,NI],[NQ,NI],[zQ,VQ])}function XQ(t){return af(t,[CQ,OQ])}const QQ=of(lf);function eee(t){return af(t,[PQ,QQ])}const tee=nf(EQ,AQ),iee=nf(LD),ree=of(lf,Lm,Dm);function see(t){return af(t,[tee,DD],[iee,ree])}const nee="Invalid Duration",RD={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},oee={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...RD},_n=146097/400,Qd=146097/4800,aee={years:{quarters:4,months:12,weeks:_n/7,days:_n,hours:_n*24,minutes:_n*24*60,seconds:_n*24*60*60,milliseconds:_n*24*60*60*1e3},quarters:{months:3,weeks:_n/28,days:_n/4,hours:_n*24/4,minutes:_n*24*60/4,seconds:_n*24*60*60/4,milliseconds:_n*24*60*60*1e3/4},months:{weeks:Qd/7,days:Qd,hours:Qd*24,minutes:Qd*24*60,seconds:Qd*24*60*60,milliseconds:Qd*24*60*60*1e3},...RD},fc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],lee=fc.slice(0).reverse();function lu(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new zt(r)}function uee(t){return t<0?Math.floor(t):Math.ceil(t)}function jD(t,e,i,r,n){const l=t[n][i],d=e[i]/l,y=Math.sign(d)===Math.sign(r[n]),v=!y&&r[n]!==0&&Math.abs(d)<=1?uee(d):Math.trunc(d);r[n]+=v,e[i]-=v*l}function hee(t,e){lee.reduce((i,r)=>Ot(e[r])?i:(i&&jD(t,e,i,e,r),r),null)}function cee(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class zt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?aee:oee;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||wi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return zt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Vn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new zt({values:Dw(e,zt.normalizeUnit),loc:wi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(gd(e))return zt.fromMillis(e);if(zt.isDuration(e))return e;if(typeof e=="object")return zt.fromObject(e);throw new Vn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=XQ(e);return r?zt.fromObject(r,i):zt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=eee(e);return r?zt.fromObject(r,i):zt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Vn("need to specify a reason the Duration is invalid");const r=e instanceof zo?e:new zo(e,i);if(sr.throwOnInvalid)throw new NX(r);return new zt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new eD(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?rs.create(this.loc,r).formatDurationFromString(this,e):nee}toHuman(e={}){const i=fc.map(r=>{const n=this.values[r];return Ot(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=g7(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let n=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(n+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(n+=".SSS"));let l=r.toFormat(n);return e.includePrefix&&(l="T"+l),l}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=zt.fromDurationLike(e),r={};for(const n of fc)(B0(i.values,n)||B0(this.values,n))&&(r[n]=i.get(n)+this.get(n));return lu(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=zt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=xD(e(this.values[r],r));return lu(this,{values:i},!0)}get(e){return this[zt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...Dw(e,zt.normalizeUnit)};return lu(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const d={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return lu(this,d)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return hee(this.matrix,e),lu(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=cee(this.normalize().shiftToAll().toObject());return lu(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(d=>zt.normalizeUnit(d));const i={},r={},n=this.toObject();let l;for(const d of fc)if(e.indexOf(d)>=0){l=d;let y=0;for(const x in r)y+=this.matrix[x][d]*r[x],r[x]=0;gd(n[d])&&(y+=n[d]);const v=Math.trunc(y);i[d]=v,r[d]=(y*1e3-v*1e3)/1e3;for(const x in n)fc.indexOf(x)>fc.indexOf(d)&&jD(this.matrix,n,x,i,d)}else gd(n[d])&&(r[d]=n[d]);for(const d in r)r[d]!==0&&(i[l]+=d===l?r[d]:r[d]/this.matrix[l][d]);return lu(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return lu(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of fc)if(!i(this.values[r],e.values[r]))return!1;return!0}}const ep="Invalid Interval";function dee(t,e){return!t||!t.isValid?Bi.invalid("missing or invalid start"):!e||!e.isValid?Bi.invalid("missing or invalid end"):e<t?Bi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Bi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Vn("need to specify a reason the Interval is invalid");const r=e instanceof zo?e:new zo(e,i);if(sr.throwOnInvalid)throw new FX(r);return new Bi({invalid:r})}static fromDateTimes(e,i){const r=Of(e),n=Of(i),l=dee(r,n);return l??new Bi({start:r,end:n})}static after(e,i){const r=zt.fromDurationLike(i),n=Of(e);return Bi.fromDateTimes(n,n.plus(r))}static before(e,i){const r=zt.fromDurationLike(i),n=Of(e);return Bi.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let l,d;try{l=yt.fromISO(r,i),d=l.isValid}catch{d=!1}let y,v;try{y=yt.fromISO(n,i),v=y.isValid}catch{v=!1}if(d&&v)return Bi.fromDateTimes(l,y);if(d){const x=zt.fromISO(n,i);if(x.isValid)return Bi.after(l,x)}else if(v){const x=zt.fromISO(r,i);if(x.isValid)return Bi.before(y,x)}}return Bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Bi.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Of).filter(d=>this.contains(d)).sort(),r=[];let{s:n}=this,l=0;for(;n<this.e;){const d=i[l]||this.e,y=+d>+this.e?this.e:d;r.push(Bi.fromDateTimes(n,y)),n=y,l+=1}return r}splitBy(e){const i=zt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,l;const d=[];for(;r<this.e;){const y=this.start.plus(i.mapUnits(v=>v*n));l=+y>+this.e?this.e:y,d.push(Bi.fromDateTimes(r,l)),r=l,n+=1}return d}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Bi.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Bi.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,l)=>n.s-l.s).reduce(([n,l],d)=>l?l.overlaps(d)||l.abutsStart(d)?[n,l.union(d)]:[n.concat([l]),d]:[n,d],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],l=e.map(v=>[{time:v.s,type:"s"},{time:v.e,type:"e"}]),d=Array.prototype.concat(...l),y=d.sort((v,x)=>v.time-x.time);for(const v of y)r+=v.type==="s"?1:-1,r===1?i=v.time:(i&&+i!=+v.time&&n.push(Bi.fromDateTimes(i,v.time)),i=null);return Bi.merge(n)}difference(...e){return Bi.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ep}toLocaleString(e=Cw,i={}){return this.isValid?rs.create(this.s.loc.clone(i),e).formatInterval(this):ep}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ep}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ep}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ep}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:ep}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):zt.invalid(this.invalidReason)}mapEndpoints(e){return Bi.fromDateTimes(e(this.s),e(this.e))}}class Ig{static hasDST(e=sr.defaultZone){const i=yt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Hl.isValidZone(e)}static normalizeZone(e){return sh(e,sr.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:l="gregory"}={}){return(n||wi.create(i,r,l)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:l="gregory"}={}){return(n||wi.create(i,r,l)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||wi.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||wi.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return wi.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return wi.create(i,null,"gregory").eras(e)}static features(){return{relative:wD()}}}function zI(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(zt.fromMillis(r).as("days"))}function pee(t,e,i){const r=[["years",(v,x)=>x.year-v.year],["quarters",(v,x)=>x.quarter-v.quarter+(x.year-v.year)*4],["months",(v,x)=>x.month-v.month+(x.year-v.year)*12],["weeks",(v,x)=>{const $=zI(v,x);return($-$%7)/7}],["days",zI]],n={},l=t;let d,y;for(const[v,x]of r)i.indexOf(v)>=0&&(d=v,n[v]=x(t,e),y=l.plus(n),y>e?(n[v]--,t=l.plus(n)):t=y);return[t,n,y,d]}function fee(t,e,i,r){let[n,l,d,y]=pee(t,e,i);const v=e-n,x=i.filter(E=>["hours","minutes","seconds","milliseconds"].indexOf(E)>=0);x.length===0&&(d<e&&(d=n.plus({[y]:1})),d!==n&&(l[y]=(l[y]||0)+v/(d-n)));const $=zt.fromObject(l,r);return x.length>0?zt.fromMillis(v,r).shiftTo(...x).plus($):$}const x7={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},VI={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},yee=x7.hanidec.replace(/[\[|\]]/g,"").split("");function mee(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(x7.hanidec)!==-1)e+=yee.indexOf(t[i]);else for(const n in VI){const[l,d]=VI[n];r>=l&&r<=d&&(e+=r-l)}}return parseInt(e,10)}else return e}function ao({numberingSystem:t},e=""){return new RegExp(`${x7[t||"latn"]}${e}`)}const gee="missing Intl.DateTimeFormat.formatToParts support";function Wt(t,e=i=>i){return{regex:t,deser:([i])=>e(mee(i))}}const vee=String.fromCharCode(160),FD=`[ ${vee}]`,ND=new RegExp(FD,"g");function bee(t){return t.replace(/\./g,"\\.?").replace(ND,FD)}function BI(t){return t.replace(/\./g,"").replace(ND," ").toLowerCase()}function lo(t,e){return t===null?null:{regex:RegExp(t.map(bee).join("|")),deser:([i])=>t.findIndex(r=>BI(i)===BI(r))+e}}function GI(t,e){return{regex:t,deser:([,i,r])=>a_(i,r),groups:e}}function Eg(t){return{regex:t,deser:([e])=>e}}function wee(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _ee(t,e){const i=ao(e),r=ao(e,"{2}"),n=ao(e,"{3}"),l=ao(e,"{4}"),d=ao(e,"{6}"),y=ao(e,"{1,2}"),v=ao(e,"{1,3}"),x=ao(e,"{1,6}"),$=ao(e,"{1,9}"),E=ao(e,"{2,4}"),k=ao(e,"{4,6}"),P=N=>({regex:RegExp(wee(N.val)),deser:([B])=>B,literal:!0}),L=(N=>{if(t.literal)return P(N);switch(N.val){case"G":return lo(e.eras("short",!1),0);case"GG":return lo(e.eras("long",!1),0);case"y":return Wt(x);case"yy":return Wt(E,g9);case"yyyy":return Wt(l);case"yyyyy":return Wt(k);case"yyyyyy":return Wt(d);case"M":return Wt(y);case"MM":return Wt(r);case"MMM":return lo(e.months("short",!0,!1),1);case"MMMM":return lo(e.months("long",!0,!1),1);case"L":return Wt(y);case"LL":return Wt(r);case"LLL":return lo(e.months("short",!1,!1),1);case"LLLL":return lo(e.months("long",!1,!1),1);case"d":return Wt(y);case"dd":return Wt(r);case"o":return Wt(v);case"ooo":return Wt(n);case"HH":return Wt(r);case"H":return Wt(y);case"hh":return Wt(r);case"h":return Wt(y);case"mm":return Wt(r);case"m":return Wt(y);case"q":return Wt(y);case"qq":return Wt(r);case"s":return Wt(y);case"ss":return Wt(r);case"S":return Wt(v);case"SSS":return Wt(n);case"u":return Eg($);case"uu":return Eg(y);case"uuu":return Wt(i);case"a":return lo(e.meridiems(),0);case"kkkk":return Wt(l);case"kk":return Wt(E,g9);case"W":return Wt(y);case"WW":return Wt(r);case"E":case"c":return Wt(i);case"EEE":return lo(e.weekdays("short",!1,!1),1);case"EEEE":return lo(e.weekdays("long",!1,!1),1);case"ccc":return lo(e.weekdays("short",!0,!1),1);case"cccc":return lo(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return GI(new RegExp(`([+-]${y.source})(?::(${r.source}))?`),2);case"ZZZ":return GI(new RegExp(`([+-]${y.source})(${r.source})?`),2);case"z":return Eg(/[a-z_+-/]{1,256}?/i);case" ":return Eg(/[^\S\n\r]/);default:return P(N)}})(t)||{invalidReason:gee};return L.token=t,L}const xee={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function See(t,e){const{type:i,value:r}=t;if(i==="literal"){const d=/^\s+$/.test(r);return{literal:!d,val:d?" ":r}}const n=e[i];let l=xee[i];if(typeof l=="object"&&(l=l[n]),l)return{literal:!1,val:l}}function Mee(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function $ee(t,e,i){const r=t.match(e);if(r){const n={};let l=1;for(const d in i)if(B0(i,d)){const y=i[d],v=y.groups?y.groups+1:1;!y.literal&&y.token&&(n[y.token.val[0]]=y.deser(r.slice(l,l+v))),l+=v}return[r,n]}else return[r,{}]}function Tee(t){const e=l=>{switch(l){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Ot(t.z)||(i=Hl.create(t.z)),Ot(t.Z)||(i||(i=new ss(t.Z)),r=t.Z),Ot(t.q)||(t.M=(t.q-1)*3+1),Ot(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Ot(t.u)||(t.S=m7(t.u)),[Object.keys(t).reduce((l,d)=>{const y=e(d);return y&&(l[y]=t[d]),l},{}),i,r]}let C3=null;function Iee(){return C3||(C3=yt.fromMillis(1555555555555)),C3}function Eee(t,e){if(t.literal)return t;const i=rs.macroTokenToFormatOpts(t.val),r=BD(i,e);return r==null||r.includes(void 0)?t:r}function zD(t,e){return Array.prototype.concat(...t.map(i=>Eee(i,e)))}function VD(t,e,i){const r=zD(rs.parseFormat(i),t),n=r.map(d=>_ee(d,t)),l=n.find(d=>d.invalidReason);if(l)return{input:e,tokens:r,invalidReason:l.invalidReason};{const[d,y]=Mee(n),v=RegExp(d,"i"),[x,$]=$ee(e,v,y),[E,k,P]=$?Tee($):[null,null,void 0];if(B0($,"a")&&B0($,"H"))throw new ay("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:v,rawMatches:x,matches:$,result:E,zone:k,specificOffset:P}}}function Aee(t,e,i){const{result:r,zone:n,specificOffset:l,invalidReason:d}=VD(t,e,i);return[r,n,l,d]}function BD(t,e){return t?rs.create(e,t).formatDateTimeParts(Iee()).map(n=>See(n,t)):null}const GD=[0,31,59,90,120,151,181,212,243,273,304,334],UD=[0,31,60,91,121,152,182,213,244,274,305,335];function Gn(t,e){return new zo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function qD(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function HD(t,e,i){return i+(Om(t)?UD:GD)[e-1]}function WD(t,e){const i=Om(t)?UD:GD,r=i.findIndex(l=>l<e),n=e-i[r];return{month:r+1,day:n}}function v9(t){const{year:e,month:i,day:r}=t,n=HD(e,i,r),l=qD(e,i,r);let d=Math.floor((n-l+10)/7),y;return d<1?(y=e-1,d=Lw(y)):d>Lw(e)?(y=e+1,d=1):y=e,{weekYear:y,weekNumber:d,weekday:l,...l_(t)}}function UI(t){const{weekYear:e,weekNumber:i,weekday:r}=t,n=qD(e,1,4),l=y1(e);let d=i*7+r-n-3,y;d<1?(y=e-1,d+=y1(y)):d>l?(y=e+1,d-=y1(e)):y=e;const{month:v,day:x}=WD(y,d);return{year:y,month:v,day:x,...l_(t)}}function O3(t){const{year:e,month:i,day:r}=t,n=HD(e,i,r);return{year:e,ordinal:n,...l_(t)}}function qI(t){const{year:e,ordinal:i}=t,{month:r,day:n}=WD(e,i);return{year:e,month:r,day:n,...l_(t)}}function kee(t){const e=o_(t.weekYear),i=Pl(t.weekNumber,1,Lw(t.weekYear)),r=Pl(t.weekday,1,7);return e?i?r?!1:Gn("weekday",t.weekday):Gn("week",t.week):Gn("weekYear",t.weekYear)}function Pee(t){const e=o_(t.year),i=Pl(t.ordinal,1,y1(t.year));return e?i?!1:Gn("ordinal",t.ordinal):Gn("year",t.year)}function JD(t){const e=o_(t.year),i=Pl(t.month,1,12),r=Pl(t.day,1,Ow(t.year,t.month));return e?i?r?!1:Gn("day",t.day):Gn("month",t.month):Gn("year",t.year)}function YD(t){const{hour:e,minute:i,second:r,millisecond:n}=t,l=Pl(e,0,23)||e===24&&i===0&&r===0&&n===0,d=Pl(i,0,59),y=Pl(r,0,59),v=Pl(n,0,999);return l?d?y?v?!1:Gn("millisecond",n):Gn("second",r):Gn("minute",i):Gn("hour",e)}const L3="Invalid DateTime",HI=864e13;function Ag(t){return new zo("unsupported zone",`the zone "${t.name}" is not supported`)}function D3(t){return t.weekData===null&&(t.weekData=v9(t.c)),t.weekData}function Pf(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new yt({...i,...e,old:i})}function KD(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const l=i.offset(r);return n===l?[r,n]:[t-Math.min(n,l)*60*1e3,Math.max(n,l)]}function WI(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Vv(t,e,i){return KD(v7(t),e,i)}function JI(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,l={...t.c,year:r,month:n,day:Math.min(t.c.day,Ow(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},d=zt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),y=v7(l);let[v,x]=KD(y,i,t.zone);return d!==0&&(v+=d,x=t.zone.offset(v)),{ts:v,o:x}}function Cf(t,e,i,r,n,l){const{setZone:d,zone:y}=i;if(t&&Object.keys(t).length!==0||e){const v=e||y,x=yt.fromObject(t,{...i,zone:v,specificOffset:l});return d?x:x.setZone(y)}else return yt.invalid(new zo("unparsable",`the input "${n}" can't be parsed as ${r}`))}function kg(t,e,i=!0){return t.isValid?rs.create(wi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function R3(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=nr(t.c.year,i?6:4),e?(r+="-",r+=nr(t.c.month),r+="-",r+=nr(t.c.day)):(r+=nr(t.c.month),r+=nr(t.c.day)),r}function YI(t,e,i,r,n,l){let d=nr(t.c.hour);return e?(d+=":",d+=nr(t.c.minute),(t.c.second!==0||!i)&&(d+=":")):d+=nr(t.c.minute),(t.c.second!==0||!i)&&(d+=nr(t.c.second),(t.c.millisecond!==0||!r)&&(d+=".",d+=nr(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!l?d+="Z":t.o<0?(d+="-",d+=nr(Math.trunc(-t.o/60)),d+=":",d+=nr(Math.trunc(-t.o%60))):(d+="+",d+=nr(Math.trunc(t.o/60)),d+=":",d+=nr(Math.trunc(t.o%60)))),l&&(d+="["+t.zone.ianaName+"]"),d}const ZD={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Cee={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Oee={ordinal:1,hour:0,minute:0,second:0,millisecond:0},XD=["year","month","day","hour","minute","second","millisecond"],Lee=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Dee=["year","ordinal","hour","minute","second","millisecond"];function KI(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new eD(t);return e}function ZI(t,e){const i=sh(e.zone,sr.defaultZone),r=wi.fromObject(e),n=sr.now();let l,d;if(Ot(t.year))l=n;else{for(const x of XD)Ot(t[x])&&(t[x]=ZD[x]);const y=JD(t)||YD(t);if(y)return yt.invalid(y);const v=i.offset(n);[l,d]=Vv(t,v,i)}return new yt({ts:l,zone:i,loc:r,o:d})}function XI(t,e,i){const r=Ot(i.round)?!0:i.round,n=(d,y)=>(d=g7(d,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(d,y)),l=d=>i.calendary?e.hasSame(t,d)?0:e.startOf(d).diff(t.startOf(d),d).get(d):e.diff(t,d).get(d);if(i.unit)return n(l(i.unit),i.unit);for(const d of i.units){const y=l(d);if(Math.abs(y)>=1)return n(y,d)}return n(t>e?-0:0,i.units[i.units.length-1])}function QI(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class yt{constructor(e){const i=e.zone||sr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new zo("invalid input"):null)||(i.isValid?null:Ag(i));this.ts=Ot(e.ts)?sr.now():e.ts;let n=null,l=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,l]=[e.old.c,e.old.o];else{const y=i.offset(this.ts);n=WI(this.ts,y),r=Number.isNaN(n.year)?new zo("invalid input"):null,n=r?null:n,l=r?null:y}this._zone=i,this.loc=e.loc||wi.create(),this.invalid=r,this.weekData=null,this.c=n,this.o=l,this.isLuxonDateTime=!0}static now(){return new yt({})}static local(){const[e,i]=QI(arguments),[r,n,l,d,y,v,x]=i;return ZI({year:r,month:n,day:l,hour:d,minute:y,second:v,millisecond:x},e)}static utc(){const[e,i]=QI(arguments),[r,n,l,d,y,v,x]=i;return e.zone=ss.utcInstance,ZI({year:r,month:n,day:l,hour:d,minute:y,second:v,millisecond:x},e)}static fromJSDate(e,i={}){const r=oQ(e)?e.valueOf():NaN;if(Number.isNaN(r))return yt.invalid("invalid input");const n=sh(i.zone,sr.defaultZone);return n.isValid?new yt({ts:r,zone:n,loc:wi.fromObject(i)}):yt.invalid(Ag(n))}static fromMillis(e,i={}){if(gd(e))return e<-HI||e>HI?yt.invalid("Timestamp out of range"):new yt({ts:e,zone:sh(i.zone,sr.defaultZone),loc:wi.fromObject(i)});throw new Vn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(gd(e))return new yt({ts:e*1e3,zone:sh(i.zone,sr.defaultZone),loc:wi.fromObject(i)});throw new Vn("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=sh(i.zone,sr.defaultZone);if(!r.isValid)return yt.invalid(Ag(r));const n=sr.now(),l=Ot(i.specificOffset)?r.offset(n):i.specificOffset,d=Dw(e,KI),y=!Ot(d.ordinal),v=!Ot(d.year),x=!Ot(d.month)||!Ot(d.day),$=v||x,E=d.weekYear||d.weekNumber,k=wi.fromObject(i);if(($||y)&&E)throw new ay("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&y)throw new ay("Can't mix ordinal dates with month/day");const P=E||d.weekday&&!$;let D,L,N=WI(n,l);P?(D=Lee,L=Cee,N=v9(N)):y?(D=Dee,L=Oee,N=O3(N)):(D=XD,L=ZD);let B=!1;for(const de of D){const be=d[de];Ot(be)?B?d[de]=L[de]:d[de]=N[de]:B=!0}const W=P?kee(d):y?Pee(d):JD(d),q=W||YD(d);if(q)return yt.invalid(q);const Y=P?UI(d):y?qI(d):d,[ie,se]=Vv(Y,l,r),ue=new yt({ts:ie,zone:r,o:se,loc:k});return d.weekday&&$&&e.weekday!==ue.weekday?yt.invalid("mismatched weekday",`you can't specify both a weekday of ${d.weekday} and a date of ${ue.toISO()}`):ue}static fromISO(e,i={}){const[r,n]=YQ(e);return Cf(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=KQ(e);return Cf(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=ZQ(e);return Cf(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Ot(e)||Ot(i))throw new Vn("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:l=null}=r,d=wi.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0}),[y,v,x,$]=Aee(d,e,i);return $?yt.invalid($):Cf(y,v,r,`format ${i}`,e,x)}static fromString(e,i,r={}){return yt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=see(e);return Cf(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Vn("need to specify a reason the DateTime is invalid");const r=e instanceof zo?e:new zo(e,i);if(sr.throwOnInvalid)throw new jX(r);return new yt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=BD(e,wi.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return zD(rs.parseFormat(e),wi.fromObject(i)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?D3(this).weekYear:NaN}get weekNumber(){return this.isValid?D3(this).weekNumber:NaN}get weekday(){return this.isValid?D3(this).weekday:NaN}get ordinal(){return this.isValid?O3(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ig.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ig.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ig.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ig.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Om(this.year)}get daysInMonth(){return Ow(this.year,this.month)}get daysInYear(){return this.isValid?y1(this.year):NaN}get weeksInWeekYear(){return this.isValid?Lw(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=rs.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(ss.instance(e),i)}toLocal(){return this.setZone(sr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=sh(e,sr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const l=e.offset(this.ts),d=this.toObject();[n]=Vv(d,l,e)}return Pf(this,{ts:n,zone:e})}else return yt.invalid(Ag(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Pf(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=Dw(e,KI),r=!Ot(i.weekYear)||!Ot(i.weekNumber)||!Ot(i.weekday),n=!Ot(i.ordinal),l=!Ot(i.year),d=!Ot(i.month)||!Ot(i.day),y=l||d,v=i.weekYear||i.weekNumber;if((y||n)&&v)throw new ay("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&n)throw new ay("Can't mix ordinal dates with month/day");let x;r?x=UI({...v9(this.c),...i}):Ot(i.ordinal)?(x={...this.toObject(),...i},Ot(i.day)&&(x.day=Math.min(Ow(x.year,x.month),x.day))):x=qI({...O3(this.c),...i});const[$,E]=Vv(x,this.o,this.zone);return Pf(this,{ts:$,o:E})}plus(e){if(!this.isValid)return this;const i=zt.fromDurationLike(e);return Pf(this,JI(this,i))}minus(e){if(!this.isValid)return this;const i=zt.fromDurationLike(e).negate();return Pf(this,JI(this,i))}startOf(e){if(!this.isValid)return this;const i={},r=zt.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?rs.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):L3}toLocaleString(e=Cw,i={}){return this.isValid?rs.create(this.loc.clone(i),e).formatDateTime(this):L3}toLocaleParts(e={}){return this.isValid?rs.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:l=!1}={}){if(!this.isValid)return null;const d=e==="extended";let y=R3(this,d);return y+="T",y+=YI(this,d,i,r,n,l),y}toISODate({format:e="extended"}={}){return this.isValid?R3(this,e==="extended"):null}toISOWeekDate(){return kg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:l=!1,format:d="extended"}={}){return this.isValid?(n?"T":"")+YI(this,d==="extended",i,e,r,l):null}toRFC2822(){return kg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return kg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?R3(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),kg(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():L3}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return zt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},l=aQ(i).map(zt.normalizeUnit),d=e.valueOf()>this.valueOf(),y=d?this:e,v=d?e:this,x=fee(y,v,l,n);return d?x.negate():x}diffNow(e="milliseconds",i={}){return this.diff(yt.now(),e,i)}until(e){return this.isValid?Bi.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const r=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i)<=r&&r<=n.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||yt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],l=e.unit;return Array.isArray(e.unit)&&(n=e.unit,l=void 0),XI(i,this.plus(r),{...e,numeric:"always",units:n,unit:l})}toRelativeCalendar(e={}){return this.isValid?XI(e.base||yt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(yt.isDateTime))throw new Vn("min requires all arguments be DateTimes");return jI(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(yt.isDateTime))throw new Vn("max requires all arguments be DateTimes");return jI(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:l=null}=r,d=wi.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0});return VD(d,e,i)}static fromStringExplain(e,i,r={}){return yt.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return Cw}static get DATE_MED(){return tD}static get DATE_MED_WITH_WEEKDAY(){return zX}static get DATE_FULL(){return iD}static get DATE_HUGE(){return rD}static get TIME_SIMPLE(){return sD}static get TIME_WITH_SECONDS(){return nD}static get TIME_WITH_SHORT_OFFSET(){return oD}static get TIME_WITH_LONG_OFFSET(){return aD}static get TIME_24_SIMPLE(){return lD}static get TIME_24_WITH_SECONDS(){return uD}static get TIME_24_WITH_SHORT_OFFSET(){return hD}static get TIME_24_WITH_LONG_OFFSET(){return cD}static get DATETIME_SHORT(){return dD}static get DATETIME_SHORT_WITH_SECONDS(){return pD}static get DATETIME_MED(){return fD}static get DATETIME_MED_WITH_SECONDS(){return yD}static get DATETIME_MED_WITH_WEEKDAY(){return VX}static get DATETIME_FULL(){return mD}static get DATETIME_FULL_WITH_SECONDS(){return gD}static get DATETIME_HUGE(){return vD}static get DATETIME_HUGE_WITH_SECONDS(){return bD}}function Of(t){if(yt.isDateTime(t))return t;if(t&&t.valueOf&&gd(t.valueOf()))return yt.fromJSDate(t);if(t&&typeof t=="object")return yt.fromObject(t);throw new Vn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Ree={year:void 0,month:void 0,day:void 0,weekday:void 0},jee={hour:void 0,minute:void 0,second:void 0},Fee={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},S7={timeZone:"Etc/UTC"},la={year:"numeric",month:"numeric",day:"numeric"},Lf={year:"numeric",month:"long",day:"numeric"},Df={year:"numeric",month:"short",day:"numeric"},Rf={year:"numeric",month:"long",weekday:"long",day:"numeric"},En={hour:"numeric",minute:"numeric"},uo={...En,second:"numeric"},uf={"short-date":la,"short-date-short-time":{...la,...En},"short-date-short-time-24":{...la,...En,hour12:!1},"short-date-long-time":{...la,...uo},"short-date-long-time-24":{...la,...uo,hour12:!1},"short-date-le":la,"short-date-le-short-time":{...la,...En},"short-date-le-short-time-24":{...la,...En,hour12:!1},"short-date-le-long-time":{...la,...uo},"short-date-le-long-time-24":{...la,...uo,hour12:!1},"long-month-day-year":Lf,"long-month-day-year-short-time":{...Lf,...En},"long-month-day-year-short-time-24":{...Lf,...En,hour12:!1},"long-month-day-year-long-time":{...Lf,...uo},"long-month-day-year-long-time-24":{...Lf,...uo,hour12:!1},"day-short-month-year":Df,"day-short-month-year-short-time":{...Df,...En},"day-short-month-year-short-time-24":{...Df,...En,hour12:!1},"day-short-month-year-long-time":{...Df,...uo},"day-short-month-year-long-time-24":{...Df,...uo,hour12:!1},"long-date":Rf,"long-date-short-time":{...Rf,...En},"long-date-short-time-24":{...Rf,...En,hour12:!1},"long-date-long-time":{...Rf,...uo},"long-date-long-time-24":{...Rf,...uo,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":En,"long-time":uo},Nee=as()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),QD={ar:"ar-u-nu-latn-ca-gregory"};let b9=new WeakMap,eR=uf["short-date-short-time"];function zee(t){const e=t||eR;let i=b9.get(e);if(!i){const r=Wn(),n=QD[r]||r;i=new Intl.DateTimeFormat(n,e),b9.set(e,i)}return i}function i0(t){return uf[t]}function Zn(t,e){return zee(e).format(t)}function M7(t,e=uf["short-date"]){return Zn(new Date(t),{...e,...S7,...jee})}function $7(t,e=uf["short-time"]){return Zn(new Date(`1970-01-01T${t}Z`),{...e,...S7,...Ree})}function T7(t,e=uf["short-date-short-time"]){const i=yt.fromISO(t,{setZone:!0}),r=Wn(),n=QD[r]??r;return i.toLocaleString({...Fee,...e},{locale:n})}JM(()=>{b9=new WeakMap,eR=uf["short-date-short-time"]});const Vee={ar:"ar-u-nu-latn"};let Bv=new WeakMap,tR={};function Bee(t){const e=t||tR;if(!Bv.has(e)){const i=Wn(),r=Vee[Wn()]||i;Bv.set(e,new Intl.NumberFormat(r,t))}return Bv.get(e)}function iR(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Eh(t,e){return Object.is(t,-0)&&(t=0),Bee(e).format(t)}JM(()=>{Bv=new WeakMap,tR={}});let yp=class extends si(ge){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(e){return Eh(e,iR(this))}formatDate(e,i=!1){return this.dateFormat?Zn(e,{...i0(this.dateFormat),...i&&S7}):this.formatNumber(e)}formatDateOnly(e){const i=(this.dateFormat&&i0(this.dateFormat))??void 0;return M7(e,i)}formatTimeOnly(e){const i=(this.dateFormat&&i0(this.dateFormat))??void 0;return $7(e,i)}formatTimestamp(e){const i=(this.dateFormat&&i0(this.dateFormat))??void 0;return T7(e,i)}formatRasterPixelValue(e){return e.includes("-")?e:e.trim().includes(",")?this._formatDelimitedString(e,",",", "):e.trim().includes(";")?this._formatDelimitedString(e,";","; "):e.trim().includes(" ")?this._formatDelimitedString(e," "," "):this.formatNumber(Number(e))}_formatDelimitedString(e,i,r){return e&&i&&r?e.trim().split(i).map(n=>this.formatNumber(Number(n))).join(r):e}};g([Ue(Nee)],yp.prototype,"dateFormat",void 0),g([S({type:Boolean,json:{write:!0}})],yp.prototype,"digitSeparator",void 0),g([S({type:Lt,json:{write:!0}})],yp.prototype,"places",void 0),yp=g([J("esri.popup.support.FieldInfoFormat")],yp);const r0=yp;var w9;let go=w9=class extends ge{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new w9({fieldName:this.fieldName,format:this.format?ae(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};g([S({type:String,json:{write:!0}})],go.prototype,"fieldName",void 0),g([S({type:r0,json:{write:!0}})],go.prototype,"format",void 0),g([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],go.prototype,"isEditable",void 0),g([S({type:String,json:{write:!0}})],go.prototype,"label",void 0),g([Ue(new xt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],go.prototype,"stringFieldOption",void 0),g([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],go.prototype,"statisticType",void 0),g([S({type:String,json:{write:!0}})],go.prototype,"tooltip",void 0),g([S({type:Boolean,json:{write:!0}})],go.prototype,"visible",void 0),go=w9=g([J("esri.popup.FieldInfo")],go);const Rm=go;var _9;let ol=_9=class extends Gh{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new _9(ae({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};g([S({type:Object,json:{write:!0}})],ol.prototype,"attributes",void 0),g([S({type:String,json:{write:!0}})],ol.prototype,"description",void 0),g([S({type:[Rm]})],ol.prototype,"fieldInfos",void 0),g([Ae("fieldInfos")],ol.prototype,"writeFieldInfos",null),g([S({type:String,json:{write:!0}})],ol.prototype,"title",void 0),g([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ol.prototype,"type",void 0),ol=_9=g([J("esri.popup.content.FieldsContent")],ol);const G0=ol;let yc=class extends ge{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};g([S({type:String,json:{write:!0}})],yc.prototype,"altText",void 0),g([S({type:String,json:{write:!0}})],yc.prototype,"caption",void 0),g([S({type:String,json:{write:!0}})],yc.prototype,"title",void 0),g([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],yc.prototype,"type",void 0),yc=g([J("esri.popup.content.mixins.MediaInfo")],yc);const I7=yc;var x9;let mp=x9=class extends Be{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new x9({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};g([S()],mp.prototype,"fieldName",void 0),g([S()],mp.prototype,"tooltip",void 0),g([S()],mp.prototype,"value",void 0),mp=x9=g([J("esri.popup.content.support.ChartMediaInfoValueSeries")],mp);const rR=mp;var S9;let mc=S9=class extends ge{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new S9({fields:ae(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};g([S({type:[String],json:{write:!0}})],mc.prototype,"fields",void 0),g([S({type:String,json:{write:!0}})],mc.prototype,"normalizeField",void 0),g([S({type:[rR],json:{read:!1}})],mc.prototype,"series",void 0),g([S({type:String,json:{write:!0}})],mc.prototype,"tooltipField",void 0),mc=S9=g([J("esri.popup.content.support.ChartMediaInfoValue")],mc);const Gee=mc;let uy=class extends I7{constructor(e){super(e),this.type=null,this.value=null}};g([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],uy.prototype,"type",void 0),g([S({type:Gee,json:{write:!0}})],uy.prototype,"value",void 0),uy=g([J("esri.popup.content.mixins.ChartMediaInfo")],uy);const u_=uy,h_=as()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var M9;let Gv=M9=class extends u_{constructor(t){super(t),this.type="bar-chart"}clone(){return new M9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:h_.write}})],Gv.prototype,"type",void 0),Gv=M9=g([J("esri.popup.content.BarChartMediaInfo")],Gv);const sR=Gv;var $9;let Uv=$9=class extends u_{constructor(t){super(t),this.type="column-chart"}clone(){return new $9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:h_.write}})],Uv.prototype,"type",void 0),Uv=$9=g([J("esri.popup.content.ColumnChartMediaInfo")],Uv);const nR=Uv;var T9;let hy=T9=class extends ge{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new T9({linkURL:this.linkURL,sourceURL:this.sourceURL})}};g([S({type:String,json:{write:!0}})],hy.prototype,"linkURL",void 0),g([S({type:String,json:{write:!0}})],hy.prototype,"sourceURL",void 0),hy=T9=g([J("esri.popup.content.support.ImageMediaInfoValue")],hy);const Uee=hy;var I9;let gp=I9=class extends I7{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new I9({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};g([S({type:Number,json:{write:!0}})],gp.prototype,"refreshInterval",void 0),g([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],gp.prototype,"type",void 0),g([S({type:Uee,json:{write:!0}})],gp.prototype,"value",void 0),gp=I9=g([J("esri.popup.content.ImageMediaInfo")],gp);const oR=gp;var E9;let qv=E9=class extends u_{constructor(t){super(t),this.type="line-chart"}clone(){return new E9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:h_.write}})],qv.prototype,"type",void 0),qv=E9=g([J("esri.popup.content.LineChartMediaInfo")],qv);const aR=qv;var A9;let Hv=A9=class extends u_{constructor(t){super(t),this.type="pie-chart"}clone(){return new A9({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:h_.write}})],Hv.prototype,"type",void 0),Hv=A9=g([J("esri.popup.content.PieChartMediaInfo")],Hv);const lR=Hv,uR={base:I7,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":sR,"column-chart":nR,"line-chart":aR,"pie-chart":lR,image:oR}};var k9;let vo=k9=class extends Gh{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?oR.fromJSON(e):e.type==="barchart"?sR.fromJSON(e):e.type==="columnchart"?nR.fromJSON(e):e.type==="linechart"?aR.fromJSON(e):e.type==="piechart"?lR.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new k9(ae({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};g([S()],vo.prototype,"activeMediaInfoIndex",void 0),g([S({type:Object,json:{write:!0}})],vo.prototype,"attributes",void 0),g([S({type:String,json:{write:!0}})],vo.prototype,"description",void 0),g([S({types:[uR]})],vo.prototype,"mediaInfos",void 0),g([xe("mediaInfos")],vo.prototype,"readMediaInfos",null),g([Ae("mediaInfos")],vo.prototype,"writeMediaInfos",null),g([S({type:String,json:{write:!0}})],vo.prototype,"title",void 0),g([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],vo.prototype,"type",void 0),vo=k9=g([J("esri.popup.content.MediaContent")],vo);const nm=vo;var P9;let cy=P9=class extends ge{constructor(t){super(t),this.field=null,this.order=null}clone(){return new P9({field:this.field,order:this.order})}};g([S({type:String,json:{write:!0}})],cy.prototype,"field",void 0),g([S({type:["asc","desc"],json:{write:!0}})],cy.prototype,"order",void 0),cy=P9=g([J("esri.popup.support.RelatedRecordsInfoFieldOrder")],cy);const E7=cy;let ya=class extends si(Gh){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};g([S({type:String,json:{write:!0}})],ya.prototype,"description",void 0),g([S({type:Number,json:{type:Lt,write:!0}})],ya.prototype,"displayCount",void 0),g([S({type:["list"],json:{write:!0}})],ya.prototype,"displayType",void 0),g([S({type:[E7],json:{write:!0}})],ya.prototype,"orderByFields",void 0),g([S({type:Number,json:{type:Lt,write:!0}})],ya.prototype,"relationshipId",void 0),g([S({type:String,json:{write:!0}})],ya.prototype,"title",void 0),g([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],ya.prototype,"type",void 0),ya=g([J("esri.popup.content.RelationshipContent")],ya);const Rw=ya;var C9;let dy=C9=class extends Gh{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new C9({text:this.text})}};g([S({type:String,json:{write:!0}})],dy.prototype,"text",void 0),g([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],dy.prototype,"type",void 0),dy=C9=g([J("esri.popup.content.TextContent")],dy);const U0=dy,qee={base:null,key:"type",typeMap:{attachment:sm,media:nm,text:U0,expression:y7,field:G0,relationship:Rw}};var O9;let gc=O9=class extends ge{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new O9({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([S({type:String,json:{write:!0}})],gc.prototype,"name",void 0),g([S({type:String,json:{write:!0}})],gc.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],gc.prototype,"expression",void 0),g([S({type:["string","number"],json:{write:!0}})],gc.prototype,"returnType",void 0),gc=O9=g([J("esri.popup.ExpressionInfo")],gc);const hR=gc;var L9;let py=L9=class extends ge{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new L9({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};g([S({type:Boolean,json:{write:!0}})],py.prototype,"returnTopmostRaster",void 0),g([S({type:Boolean,json:{write:!0}})],py.prototype,"showNoDataRecords",void 0),py=L9=g([J("esri.popup.LayerOptions")],py);const Hee=py;var D9;let fy=D9=class extends ge{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new D9({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ae(this.orderByFields):null})}};g([S({type:Boolean,json:{write:!0}})],fy.prototype,"showRelatedRecords",void 0),g([S({type:[E7],json:{write:!0}})],fy.prototype,"orderByFields",void 0),fy=D9=g([J("esri.popup.RelatedRecordsInfo")],fy);const Wee=fy;var R9;let An=R9=class extends Bh(Be){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new R9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};g([S()],An.prototype,"active",void 0),g([S()],An.prototype,"className",void 0),g([S()],An.prototype,"disabled",void 0),g([S()],An.prototype,"icon",void 0),g([S()],An.prototype,"id",void 0),g([S()],An.prototype,"indicator",void 0),g([S()],An.prototype,"title",void 0),g([S()],An.prototype,"type",void 0),g([S()],An.prototype,"visible",void 0),An=R9=g([J("esri.support.actions.ActionBase")],An);const hf=An;var j9;let Wv=j9=class extends hf{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new j9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};g([S()],Wv.prototype,"image",void 0),Wv=j9=g([J("esri.support.Action.ActionButton")],Wv);const cf=Wv;var F9;let yy=F9=class extends hf{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new F9({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};g([S()],yy.prototype,"image",void 0),g([S()],yy.prototype,"value",void 0),yy=F9=g([J("esri.support.Action.ActionToggle")],yy);const c_=yy,Jee="esri.PopupTemplate",Yee=ve.getLogger(Jee),jf="relationships/",eE="expression/",Kee=ze.ofType({key:"type",defaultKeyValue:"button",base:hf,typeMap:{button:cf,toggle:c_}}),Zee={base:Gh,key:"type",typeMap:{media:nm,custom:RX,text:U0,attachments:sm,fields:G0,expression:y7,relationship:Rw}},Xee=["attachments","fields","media","text","expression","relationship"];let pr=class extends si(ge){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Fa(Zee,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Kl(e)?e:(Yee.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,n){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(l=>Xee.includes(l.type)).map(l=>l&&l.toJSON(n)),i.popupElements.forEach(l=>{l.type==="attachments"?this._writeAttachmentContent(i):l.type==="media"?this._writeMediaContent(l,i):l.type==="text"?this._writeTextContent(l,i):l.type==="relationship"&&this._writeRelationshipContent(l,i)})):i.description=e}writeFieldInfos(e,i,r,n){const{content:l}=this,d=Array.isArray(l)?l:null;if(e){const y=d?d.filter(x=>x.type==="fields"):[],v=y.length&&y.every(x=>{var $;return($=x.fieldInfos)==null?void 0:$.length});i.fieldInfos=e.filter(Boolean).map(x=>{const $=x.toJSON(n);return v&&($.visible=!1),$})}if(d)for(const y of d)y.type==="fields"&&this._writeFieldsContent(y,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),rm(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=ae(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const l=i.fieldInfos.find(d=>d.fieldName.toLowerCase()===n.fieldName.toLowerCase());l?l.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var l,d;const r=((l=e.orderByFields)==null?void 0:l.map(y=>this._toFieldOrderJSON(y,e.relationshipId)))||[],n=[...((d=i.relatedRecordsInfo)==null?void 0:d.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=ae(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(l=>l.type==="media"?(l.mediaInfos||!i||n.mediaInfos||(l.mediaInfos=i,n.mediaInfos=!0),nm.fromJSON(l)):l.type==="text"?(l.text||!e||n.description||(l.text=e,n.description=!0),U0.fromJSON(l)):l.type==="attachments"?sm.fromJSON(l):l.type==="fields"?G0.fromJSON(l):l.type==="expression"?y7.fromJSON(l):l.type==="relationship"?Rw.fromJSON(l):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(jf)))return null;const n=i.replace(jf,"").split("/");if(n.length!==2)return null;const l=parseInt(n[0],10),d=n[1];return typeof l=="number"&&d?Rw.fromJSON({relationshipId:l,orderByFields:[{field:d,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${jf}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const l=[];e?l.push(new U0({text:e})):l.push(new G0),Array.isArray(i)&&i.length&&l.push(nm.fromJSON({mediaInfos:i})),r&&l.push(sm.fromJSON({displayType:"auto"}));const{showRelatedRecords:d,orderByFields:y}=n;return d&&(y!=null&&y.length)&&y.forEach(v=>{const x=this._toRelationshipContent(v);x&&l.push(x)}),l.length?l:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,l)=>[...n,...this._getMediaInfoFields(l)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,l=n||{},{fields:d,normalizeField:y,tooltipField:v,sourceURL:x,linkURL:$}=l,E=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(x),...this._extractFieldNames($),...d??[]];return y&&E.push(y),v&&E.push(v),E}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(n=>Ts(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(jf)&&!i.startsWith(eE)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,l=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(l)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const n=/\{(\w+):.+\}/,l=r.filter(d=>!(d.indexOf(`{${jf}`)===0||d.indexOf(`{${eE}`)===0)).map(d=>d.replace(n,"{$1}"));return l?l.map(d=>d.slice(1,-1)):[]}};g([S({type:Kee})],pr.prototype,"actions",void 0),g([S()],pr.prototype,"content",void 0),g([St("content")],pr.prototype,"castContent",null),g([xe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],pr.prototype,"readContent",null),g([Ae("content",{popupElements:{type:ze.ofType(qee)},showAttachments:{type:Boolean},mediaInfos:{type:ze.ofType(uR)},description:{type:String},relatedRecordsInfo:{type:Wee}})],pr.prototype,"writeContent",null),g([S({type:[hR],json:{write:!0}})],pr.prototype,"expressionInfos",void 0),g([S({type:[Rm]})],pr.prototype,"fieldInfos",void 0),g([Ae("fieldInfos")],pr.prototype,"writeFieldInfos",null),g([S({type:Hee})],pr.prototype,"layerOptions",void 0),g([Ae("layerOptions")],pr.prototype,"writeLayerOptions",null),g([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],pr.prototype,"lastEditInfoEnabled",void 0),g([S()],pr.prototype,"outFields",void 0),g([S()],pr.prototype,"overwriteActions",void 0),g([S()],pr.prototype,"returnGeometry",void 0),g([S({json:{type:String}})],pr.prototype,"title",void 0),g([Ae("title")],pr.prototype,"writeTitle",null),pr=g([J("esri.PopupTemplate")],pr);const df=pr,tE=new xt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Qee=0,vp=class extends ge{constructor(e){super(e),this.id="sym"+Qee++,this.type=null,this.color=new Ne([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};g([S({type:tE.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:tE.write}}})],vp.prototype,"type",void 0),g([S({type:Ne,json:{write:{allowNull:!0}}})],vp.prototype,"color",void 0),g([xe("color")],vp.prototype,"readColor",null),vp=g([J("esri.symbols.Symbol")],vp);const Us=vp;var N9;let Mu=N9=class extends Us{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(l=>{const d=l.valueExpressionInfo;return Ts(t,e,d.expression)});await Promise.all(n)}}}clone(){return new N9({data:ae(this.data)})}hash(){return bM(JSON.stringify(this.data)).toString()}};g([S({json:{write:!1}})],Mu.prototype,"color",void 0),g([S({json:{write:!0}})],Mu.prototype,"data",void 0),g([xe("data",["symbol"])],Mu.prototype,"readData",null),g([Ae("data",{})],Mu.prototype,"writeData",null),g([Ue({CIMSymbolReference:"cim"},{readOnly:!0})],Mu.prototype,"type",void 0),Mu=N9=g([J("esri.symbols.CIMSymbol")],Mu);const jm=Mu;let bp=class extends ge{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};g([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],bp.prototype,"enabled",void 0),g([Ae("enabled")],bp.prototype,"writeEnabled",null),g([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],bp.prototype,"type",void 0),bp=g([J("esri.symbols.Symbol3DLayer")],bp);const Wa=bp,ete=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,tte="screenUtils.toPt: input not recognized!",cR=96;function Vr(t){return t?t/72*cR:0}function Ba(t){return t?72*t/cR:0}function Pt(t){if(typeof t=="string"){const e=t.match(ete);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",l=r==="px"?Ba(i):i;return n?-l:l}return console.warn(tte),null}return t}function Ms(t=0,e=0){return{x:t,y:e}}function W9e(t=0,e=0){return[t,e]}function ite(t,e){const i=e.transparency!=null?tm(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ne([r[0]||0,r[1]||0,r[2]||0,i]):null}function rte(t,e){e.color=t.toJSON().slice(0,3);const i=s_(t.a);i!==0&&(e.transparency=i)}const Uh={type:Ne,json:{type:[Lt],default:null,read:{source:["color","transparency"],reader:ite},write:{target:{color:{type:[Lt]},transparency:{type:Lt}},writer:rte}}},Ga={type:Number,cast:Pt,json:{write:!0}};let vc=class extends ge{constructor(e){super(e),this.color=new Ne([0,0,0,1]),this.extensionLength=0,this.size=Ba(1)}clone(){}cloneProperties(){return{color:ae(this.color),size:this.size,extensionLength:this.extensionLength}}};g([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],vc.prototype,"type",void 0),g([S(Uh)],vc.prototype,"color",void 0),g([S({...Ga,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],vc.prototype,"extensionLength",void 0),g([S(Ga)],vc.prototype,"size",void 0),vc=g([J("esri.symbols.edges.Edges3D")],vc);const A7=vc;var z9;let Jv=z9=class extends A7{constructor(t){super(t),this.type="sketch"}clone(){return new z9(this.cloneProperties())}};g([Ue({sketch:"sketch"},{readOnly:!0})],Jv.prototype,"type",void 0),Jv=z9=g([J("esri.symbols.edges.SketchEdges3D")],Jv);const ste=Jv;var V9;let Yv=V9=class extends A7{constructor(t){super(t),this.type="solid"}clone(){return new V9(this.cloneProperties())}};g([Ue({solid:"solid"},{readOnly:!0})],Yv.prototype,"type",void 0),Yv=V9=g([J("esri.symbols.support.SolidEdges3D")],Yv);const nte=Yv,dR={types:{key:"type",base:A7,typeMap:{solid:nte,sketch:ste}},json:{write:!0}};var B9;let mn=B9=class extends ge{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new B9(t)}};g([S(Uh)],mn.prototype,"color",void 0),mn=B9=g([J("esri.symbols.support.Symbol3DMaterial")],mn);var G9;let $u=G9=class extends Wa{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new G9({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};g([Ue({Extrude:"extrude"},{readOnly:!0})],$u.prototype,"type",void 0),g([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],$u.prototype,"size",void 0),g([S({type:mn,json:{write:!0}})],$u.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],$u.prototype,"castShadows",void 0),g([S(dR)],$u.prototype,"edges",void 0),$u=G9=g([J("esri.symbols.ExtrudeSymbol3DLayer")],$u);const pR=$u;let my=class extends Us{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};g([Ue({esriSLS:"simple-line"},{readOnly:!0})],my.prototype,"type",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],my.prototype,"width",void 0),my=g([J("esri.symbols.LineSymbol")],my);const ote=my,ate=["begin","end","begin-end"],fR=["arrow","circle","square","diamond","cross","x"];var U9;let ma=U9=class extends ge{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new U9({color:ae(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};g([S({type:["begin","end","begin-end"],json:{write:!0}})],ma.prototype,"placement",void 0),g([Ue({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],ma.prototype,"type",void 0),g([S({type:fR})],ma.prototype,"style",void 0),g([Ae("style")],ma.prototype,"writeStyle",null),g([S({type:Ne,value:null,json:{write:{allowNull:!0}}})],ma.prototype,"color",null),g([xe("color")],ma.prototype,"readColor",null),g([Ae("color")],ma.prototype,"writeColor",null),ma=U9=g([J("esri.symbols.LineSymbolMarker")],ma);const lte=ma;var q9;const j3=new xt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let al=q9=class extends ote{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,l){if(t&&typeof t!="string")return t;const d={};return t!=null&&(d.style=t),e!=null&&(d.color=e),i!=null&&(d.width=Pt(i)),r!=null&&(d.cap=r),n!=null&&(d.join=n),l!=null&&(d.miterLimit=Pt(l)),d}clone(){var t;return new q9({color:ae(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};g([Ue({esriSLS:"simple-line"},{readOnly:!0})],al.prototype,"type",void 0),g([S({type:j3.apiValues,json:{read:j3.read,write:j3.write}})],al.prototype,"style",void 0),g([S({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],al.prototype,"cap",void 0),g([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],al.prototype,"join",void 0),g([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":lte}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],al.prototype,"marker",void 0),g([S({type:Number,json:{read:!1,write:!1}})],al.prototype,"miterLimit",void 0),al=q9=g([J("esri.symbols.SimpleLineSymbol")],al);const gn=al;let gy=class extends Us{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};g([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":gn}},json:{default:null,write:!0}})],gy.prototype,"outline",void 0),g([S({type:["simple-fill","picture-fill"],readOnly:!0})],gy.prototype,"type",void 0),gy=g([J("esri.symbols.FillSymbol")],gy);const yR=gy;let Kv=class extends ge{constructor(e){super(e)}clone(){}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Kv.prototype,"type",void 0),Kv=g([J("esri.symbols.patterns.LinePattern3D")],Kv);const mR=Kv,ute=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var H9;const hte=as()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let vy=H9=class extends mR{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new H9(t)}};g([S({type:["style"]})],vy.prototype,"type",void 0),g([Ue(hte),S({type:ute})],vy.prototype,"style",void 0),vy=H9=g([J("esri.symbols.patterns.LineStylePattern3D")],vy);const k7=vy;let Zv=class extends ge{constructor(e){super(e)}clone(){}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Zv.prototype,"type",void 0),Zv=g([J("esri.symbols.patterns.Pattern3D")],Zv);const gR=Zv,cte=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var W9;let by=W9=class extends gR{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new W9(t)}};g([S({type:["style"]})],by.prototype,"type",void 0),g([S({type:cte,json:{read:!0,write:!0}})],by.prototype,"style",void 0),by=W9=g([J("esri.symbols.patterns.StylePattern3D")],by);const vR=by,dte={types:{key:"type",base:gR,typeMap:{style:vR}},json:{write:!0}},bR={types:{key:"type",base:mR,typeMap:{style:k7}},json:{write:!0}},g1=new Ne("white");new Ne("black");const pte=new Ne([255,255,255,0]);function fte(t){return t.r===0&&t.g===0&&t.b===0}var J9;let v1=J9=class extends mn{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new J9(t)}};g([Ue({multiply:"multiply",replace:"replace",tint:"tint"})],v1.prototype,"colorMixMode",void 0),v1=J9=g([J("esri.symbols.support.Symbol3DFillMaterial")],v1);function P7(t=wte){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function C7(t,e,i,r,n,l,d=P7()){return d[0]=t,d[1]=e,d[2]=i,d[3]=r,d[4]=n,d[5]=l,d}function Q9e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Ct(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function e4e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function t4e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function yte(t){return t[0]>=t[3]?0:t[3]-t[0]}function mte(t){return t[1]>=t[4]?0:t[4]-t[1]}function gte(t){return t[2]>=t[5]?0:t[5]-t[2]}function i4e(t,e=[0,0,0]){return e[0]=yte(t),e[1]=mte(t),e[2]=gte(t),e}function r4e(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function s4e(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function vte(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function n4e(t){return t?vte(t,iE):P7(iE)}function o4e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function bte(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function Y9(t){return t.length===6}function a4e(t,e,i){if(t==null||e==null)return t===e;if(!Y9(t)||!Y9(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const iE=[1/0,1/0,1/0,-1/0,-1/0,-1/0],wte=[0,0,0,0,0,0];P7();const _te=C7(-.5,-.5,-.5,.5,.5,.5),xte=C7(-.5,-.5,0,.5,.5,1),Ste=C7(-.5,-.5,0,.5,.5,.5);function l4e(t){switch(t){case"sphere":case"cube":case"diamond":return _te;case"cylinder":case"cone":case"inverted-cone":return xte;case"tetrahedron":return Ste;default:return}}const O7=["butt","square","round"],Mte=[...O7,"none"],wR=["miter","bevel","round"];var K9;let bc=K9=class extends ge{constructor(t){super(t),this.color=new Ne([0,0,0,1]),this.size=Ba(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new K9(t)}};g([S(Uh)],bc.prototype,"color",void 0),g([S(Ga)],bc.prototype,"size",void 0),g([S(bR)],bc.prototype,"pattern",void 0),g([S({type:O7,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],bc.prototype,"patternCap",void 0),bc=K9=g([J("esri.symbols.support.Symbol3DOutline")],bc);var Xv;let ll=Xv=class extends Wa{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Xv(t)}static fromSimpleFillSymbol(t){var r,n,l;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new k7({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((n=t.outline)==null?void 0:n.color)??g1).clone(),pattern:e};return e&&((l=t.outline)!=null&&l.cap)&&(i.patternCap=t.outline.cap),new Xv({material:new v1({color:(t.color??pte).clone()}),pattern:t.style&&t.style!=="solid"?new vR({style:t.style}):null,outline:i})}};g([Ue({Fill:"fill"},{readOnly:!0})],ll.prototype,"type",void 0),g([S({type:v1,json:{write:!0}})],ll.prototype,"material",void 0),g([S(dte)],ll.prototype,"pattern",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ll.prototype,"castShadows",void 0),g([S({type:bc,json:{write:!0}})],ll.prototype,"outline",void 0),g([S(dR)],ll.prototype,"edges",void 0),ll=Xv=g([J("esri.symbols.FillSymbol3DLayer")],ll);const Fm=ll,$te=["none","underline","line-through"],Tte=["normal","italic","oblique"],Ite=["normal","lighter","bold","bolder"],_R={type:Number,cast:t=>{const e=zn(t);return e===0?1:zs(e,.1,4)},nonNullable:!0},Ete=["left","right","center"],Ate=["baseline","top","middle","bottom"],xR={type:Ete,nonNullable:!0},SR={type:Ate,nonNullable:!0},u4e=8;var Z9;let ul=Z9=class extends ge{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Pt(t)}clone(){return new Z9({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};g([S({type:$te,json:{default:"none",write:!0}})],ul.prototype,"decoration",void 0),g([S({type:String,json:{write:!0}})],ul.prototype,"family",void 0),g([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ul.prototype,"size",void 0),g([St("size")],ul.prototype,"castSize",null),g([S({type:Tte,json:{default:"normal",write:!0}})],ul.prototype,"style",void 0),g([S({type:Ite,json:{default:"normal",write:!0}})],ul.prototype,"weight",void 0),ul=Z9=g([J("esri.symbols.Font")],ul);const d_=ul;function Ah(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=Bn(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=RM(t,e.portalItem.itemUrl);r!=null&&kte.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return X9(t,e&&e.portal)}function Nm(t,e,i=om.YES){if(t==null)return t;!pn(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Bn(t);if(e){const n=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(n){const l=X9(n,e.portal),d=X9(r,e.portal);r=RM(d,l,l),r!=null&&r!==d&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=$R(r,e==null?void 0:e.portal),pn(r)&&(r=Bo(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!pn(r)&&!Bd(r)&&i===om.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function p_(t,e,i){return Ah(t,i)}function kh(t,e,i,r){const n=Nm(t,r);n!==void 0&&(e[i]=n)}const MR=/\/items\/([^\/]+)\/resources\/(.*)/,kte=/^\.\/resources\//;function Pte(t){const e=(t==null?void 0:t.match(MR))??null;return(e==null?void 0:e[1])??null}function Cte(t){const e=(t==null?void 0:t.match(MR))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:d,extension:y}=XT(i);return{prefix:null,filename:d,extension:y}}const{path:n,extension:l}=XT(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:l}}function $R(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Bx(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function X9(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=CM();return D0(r,`${r.scheme}://${i}`)?Bx(t,e.portalHostname,i):Bx(t,i,e.portalHostname)}var om;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(om||(om={}));const h4e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return om},ensureMainOnlineDomain:$R,fromJSON:Ah,itemIdFromResourceUrl:Pte,prefixAndFilenameFromResourceUrl:Cte,read:p_,toJSON:Nm,write:kh},Symbol.toStringTag,{value:"Module"}));var Q9;const Ote=as()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let wc=Q9=class extends ge{constructor(t){super(t)}readHref(t,e,i){return t?Ah(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Bd(t)?e.dataURI=t:(e.href=Nm(t,r),pn(e.href)&&(e.href=Bo(e.href))))}clone(){return new Q9({href:this.href,primitive:this.primitive})}};g([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],wc.prototype,"href",void 0),g([xe("href")],wc.prototype,"readHref",null),g([Ae("href",{href:{type:String},dataURI:{type:String}})],wc.prototype,"writeHref",null),g([Ue(Ote)],wc.prototype,"primitive",void 0),wc=Q9=g([J("esri.symbols.support.IconSymbol3DLayerResource")],wc);const Lte="circle";var e4;let s0=e4=class extends Be{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new e4({x:this.x,y:this.y})}};g([S({type:Number})],s0.prototype,"x",void 0),g([S({type:Number})],s0.prototype,"y",void 0),s0=e4=g([J("esri.symbols.support.Symbol3DAnchorPosition2D")],s0);var t4;let wy=t4=class extends ge{constructor(t){super(t),this.color=new Ne([0,0,0,1]),this.size=Ba(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new t4(t)}};g([S(Uh)],wy.prototype,"color",void 0),g([S(Ga)],wy.prototype,"size",void 0),wy=t4=g([J("esri.symbols.support.Symbol3DIconOutline")],wy);var wp;const TR="esri.symbols.IconSymbol3DLayer";let ga=wp=class extends Wa{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new wp({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||g1,i=rE(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||g1).clone()}:null;return new wp({size:t.size,resource:{primitive:Rte(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||fte(t.color)?g1:t.color,i=rE(t);return new wp({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new wp({resource:{href:fO({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function rE(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=sE(t.xoffset),n=sE(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function sE(t){return isFinite(t)?t:0}g([S({type:mn,json:{write:!0}})],ga.prototype,"material",void 0),g([S({type:wc,json:{write:!0}})],ga.prototype,"resource",void 0),g([Ue({Icon:"icon"},{readOnly:!0})],ga.prototype,"type",void 0),g([S(Ga)],ga.prototype,"size",void 0),g([Ue({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],ga.prototype,"anchor",void 0),g([S({type:s0,json:{type:[Number],read:{reader:t=>new s0({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ga.prototype,"anchorPosition",void 0),g([S({type:wy,json:{write:!0}})],ga.prototype,"outline",void 0),ga=wp=g([J(TR)],ga);const Dte={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Rte(t){return Dte[t]||(ve.getLogger(TR).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const od=ga;let _c=class extends si(ge){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};g([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],_c.prototype,"type",void 0),g([S({type:ate,json:{default:"begin-end",write:!0}})],_c.prototype,"placement",void 0),g([S({type:fR,json:{default:"arrow",write:!0}})],_c.prototype,"style",void 0),g([S({type:Ne,json:{type:[Lt],default:null,write:!0}})],_c.prototype,"color",void 0),_c=g([J("esri.symbols.LineStyleMarker3D")],_c);const i4=_c;var Qv;let va=Qv=class extends Wa{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ba(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Qv(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Ba(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new k7({style:t.style}):null,material:new mn({color:(t.color||g1).clone()}),marker:t.marker?new i4({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new Qv(e)}};g([S({type:mn,json:{write:!0}})],va.prototype,"material",void 0),g([Ue({Line:"line"},{readOnly:!0})],va.prototype,"type",void 0),g([S({type:wR,json:{write:!0,default:"miter"}})],va.prototype,"join",void 0),g([S({type:O7,json:{write:!0,default:"butt"}})],va.prototype,"cap",void 0),g([S(Ga)],va.prototype,"size",void 0),g([S(bR)],va.prototype,"pattern",void 0),g([S({types:{key:"type",base:i4,typeMap:{style:i4}},json:{write:!0}})],va.prototype,"marker",void 0),va=Qv=g([J("esri.symbols.LineSymbol3DLayer")],va);const zm=va;var r4;const jte=as()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let _y=r4=class extends ge{clone(){return new r4({href:this.href,primitive:this.primitive})}};g([S({type:String,json:{read:p_,write:kh}})],_y.prototype,"href",void 0),g([Ue(jte)],_y.prototype,"primitive",void 0),_y=r4=g([J("esri.symbols.support.ObjectSymbol3DLayerResource")],_y);const Fte="sphere";var s4;let Zc=s4=class extends Be{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new s4({x:this.x,y:this.y,z:this.z})}};g([S({type:Number})],Zc.prototype,"x",void 0),g([S({type:Number})],Zc.prototype,"y",void 0),g([S({type:Number})],Zc.prototype,"z",void 0),Zc=s4=g([J("esri.symbols.support.Symbol3DAnchorPosition3D")],Zc);var n4;let Zr=n4=class extends Wa{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new n4({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};g([S({type:mn,json:{write:!0}})],Zr.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zr.prototype,"castShadows",void 0),g([S({type:_y,json:{write:!0}})],Zr.prototype,"resource",void 0),g([Ue({Object:"object"},{readOnly:!0})],Zr.prototype,"type",void 0),g([S({type:Number,json:{write:!0}})],Zr.prototype,"width",void 0),g([S({type:Number,json:{write:!0}})],Zr.prototype,"height",void 0),g([S({type:Number,json:{write:!0}})],Zr.prototype,"depth",void 0),g([Ue({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],Zr.prototype,"anchor",void 0),g([S({type:Zc,json:{type:[Number],read:{reader:t=>new Zc({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Zr.prototype,"anchorPosition",void 0),g([S({type:Number,json:{write:!0}})],Zr.prototype,"heading",void 0),g([S({type:Number,json:{write:!0}})],Zr.prototype,"tilt",void 0),g([S({type:Number,json:{write:!0}})],Zr.prototype,"roll",void 0),g([S({readOnly:!0})],Zr.prototype,"isPrimitive",null),Zr=n4=g([J("esri.symbols.ObjectSymbol3DLayer")],Zr);const L7=Zr;var o4;let ps=o4=class extends Wa{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new o4({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};g([S({type:mn,json:{write:!0}})],ps.prototype,"material",void 0),g([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ps.prototype,"castShadows",void 0),g([Ue({Path:"path"},{readOnly:!0})],ps.prototype,"type",void 0),g([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],ps.prototype,"profile",void 0),g([S({type:wR,json:{write:!0,default:"miter"}})],ps.prototype,"join",void 0),g([S({type:Mte,json:{write:!0,default:"butt"}})],ps.prototype,"cap",void 0),g([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ps.prototype,"width",void 0),g([xe("width",["width","size","height"])],ps.prototype,"readWidth",null),g([S({type:Number,json:{write:!0}})],ps.prototype,"height",void 0),g([xe("height",["height","size","width"])],ps.prototype,"readHeight",null),g([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ps.prototype,"anchor",void 0),g([S({type:["heading","all"],json:{write:!0,default:"all"}})],ps.prototype,"profileRotation",void 0),ps=o4=g([J("esri.symbols.PathSymbol3DLayer")],ps);const D7=ps;var a4;let n0=a4=class extends ge{constructor(){super(...arguments),this.color=new Ne([0,0,0,1]),this.size=0}clone(){const t={color:ae(this.color),size:this.size};return new a4(t)}};g([S(Uh)],n0.prototype,"color",void 0),g([S(Ga)],n0.prototype,"size",void 0),n0=a4=g([J("esri.symbols.support.Symbol3DHalo")],n0);let b1=class extends si(ge){constructor(e){super(e),this.color=null}};g([S(Uh)],b1.prototype,"color",void 0),b1=g([J("esri.symbols.support.Symbol3DTextBackground")],b1);var eb;let Ps=eb=class extends Wa{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const n={...r,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new eb({enabled:this.enabled,font:this.font&&ae(this.font),halo:this.halo&&ae(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ae(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new eb({font:t.font!=null?t.font.clone():new d_,halo:Nte(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new mn({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new b1({color:t.backgroundColor.clone()}):null})}};function Nte(t,e){return t&&e!=null&&e>0?new n0({color:ae(t),size:e}):null}g([S({type:d_,json:{write:!0}})],Ps.prototype,"font",null),g([Ae("font")],Ps.prototype,"writeFont",null),g([S({type:n0,json:{write:!0}})],Ps.prototype,"halo",void 0),g([S({...xR,json:{default:"center",write:!0}})],Ps.prototype,"horizontalAlignment",void 0),g([S({..._R,json:{default:1,write:!0}})],Ps.prototype,"lineHeight",void 0),g([S({type:mn,json:{write:!0}})],Ps.prototype,"material",void 0),g([S({type:b1,json:{write:!0}})],Ps.prototype,"background",void 0),g([S(Ga)],Ps.prototype,"size",null),g([S({type:String,json:{write:!0}})],Ps.prototype,"text",void 0),g([Ue({Text:"text"},{readOnly:!0})],Ps.prototype,"type",void 0),g([S({...SR,json:{default:"baseline",write:!0}})],Ps.prototype,"verticalAlignment",void 0),Ps=eb=g([J("esri.symbols.TextSymbol3DLayer")],Ps);const pf=Ps;var l4;let Tu=l4=class extends Wa{constructor(t){super(t),this.color=u4.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new l4({color:ae(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};g([S({type:Ne,nonNullable:!0,json:{type:[Lt],write:(t,e,i)=>e[i]=t.toArray(Ne.AlphaMode.UNLESS_OPAQUE),default:()=>u4.clone(),defaultEquals:t=>t.toCss(!0)===u4.toCss(!0)}})],Tu.prototype,"color",void 0),g([Ue({Water:"water"},{readOnly:!0})],Tu.prototype,"type",void 0),g([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Tu.prototype,"waterbodySize",void 0),g([S({type:Number,json:{write:!0,default:null}})],Tu.prototype,"waveDirection",void 0),g([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Tu.prototype,"waveStrength",void 0),Tu=l4=g([J("esri.symbols.WaterSymbol3DLayer")],Tu);const u4=new Ne([0,119,190]),IR=Tu;var h4;let xc=h4=class extends Be{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new h4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};g([S({type:String})],xc.prototype,"name",void 0),g([S({type:String})],xc.prototype,"styleUrl",void 0),g([S({type:String})],xc.prototype,"styleName",void 0),g([S({type:os})],xc.prototype,"portal",void 0),xc=h4=g([J("esri.symbols.support.StyleOrigin")],xc);const am=xc;var c4;let vd=c4=class extends Be{constructor(){super(...arguments),this.url=""}clone(){return new c4({url:this.url})}};g([S({type:String})],vd.prototype,"url",void 0),vd=c4=g([J("esri.symbols.support.Thumbnail")],vd);const ER={icon:od,object:L7,line:zm,path:D7,fill:Fm,extrude:pR,text:pf,water:IR},zte=ze.ofType({base:Wa,key:"type",typeMap:ER,errorContext:"symbol-layer"});let ba=class extends Us{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||ze;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&ve.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Ed(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Ah(e.styleUrl,r);return new am({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new am({portal:r&&r.portal||os.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new Kn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let l=Nm(e.styleUrl,n);pn(l)&&(l=Bo(l)),i.styleOrigin={styleUrl:l,name:e.name}}else e.styleName&&e.name&&(e.portal&&n&&n.portal&&!dO(e.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new Kn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Wa||e&&ER[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};g([S({json:{read:!1,write:!1}})],ba.prototype,"color",null),g([S({type:zte,nonNullable:!0,json:{write:!0}}),St(tO)],ba.prototype,"symbolLayers",null),g([S({type:am})],ba.prototype,"styleOrigin",void 0),g([xe("styleOrigin")],ba.prototype,"readStyleOrigin",null),g([Ae("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],ba.prototype,"writeStyleOrigin",null),g([S({type:vd,json:{read:!1}})],ba.prototype,"thumbnail",void 0),g([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],ba.prototype,"type",void 0),ba=g([J("esri.symbols.Symbol3D")],ba);const ff=ba;let xy=class extends ge{constructor(e){super(e),this.visible=!0}clone(){}};g([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],xy.prototype,"type",void 0),g([S({readOnly:!0})],xy.prototype,"visible",void 0),xy=g([J("esri.symbols.callouts.Callout3D")],xy);const AR=xy;var d4;let tb=d4=class extends ge{constructor(){super(...arguments),this.color=new Ne("white")}clone(){return new d4({color:ae(this.color)})}};g([S(Uh)],tb.prototype,"color",void 0),tb=d4=g([J("esri.symbols.callouts.LineCallout3DBorder")],tb);const kR=tb;Object.freeze(Object.defineProperty({__proto__:null,default:kR},Symbol.toStringTag,{value:"Module"}));var p4;let Iu=p4=class extends AR{constructor(t){super(t),this.type="line",this.color=new Ne([0,0,0,1]),this.size=Ba(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new p4({color:ae(this.color),size:this.size,border:ae(this.border)})}};g([Ue({line:"line"},{readOnly:!0})],Iu.prototype,"type",void 0),g([S(Uh)],Iu.prototype,"color",void 0),g([S(Ga)],Iu.prototype,"size",void 0),g([S({type:kR,json:{write:!0}})],Iu.prototype,"border",void 0),g([S({readOnly:!0})],Iu.prototype,"visible",null),Iu=p4=g([J("esri.symbols.callouts.LineCallout3D")],Iu);const Vte=Iu;function R7(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function PR(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!R7(t)}const CR={types:{key:"type",base:AR,typeMap:{line:Vte}},json:{write:!0}};var f4;let _p=f4=class extends ge{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new f4({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};g([S(Ga)],_p.prototype,"screenLength",void 0),g([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],_p.prototype,"minWorldLength",void 0),g([S({type:Number,json:{write:!0}})],_p.prototype,"maxWorldLength",void 0),_p=f4=g([J("esri.symbols.support.Symbol3DVerticalOffset")],_p);const OR=_p;var ib;const LR=ze.ofType({base:null,key:"type",typeMap:{text:pf}});let Eu=ib=class extends ff{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new LR,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return PR(this)}hasVisibleVerticalOffset(){return R7(this)}clone(){return new ib({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail),callout:ae(this.callout),verticalOffset:ae(this.verticalOffset)})}static fromTextSymbol(t){return new ib({symbolLayers:[pf.fromTextSymbol(t)]})}};g([S({type:OR,json:{write:!0}})],Eu.prototype,"verticalOffset",void 0),g([S(CR)],Eu.prototype,"callout",void 0),g([S({json:{read:!1,write:!1}})],Eu.prototype,"styleOrigin",void 0),g([S({type:LR})],Eu.prototype,"symbolLayers",void 0),g([Ue({LabelSymbol3D:"label-3d"},{readOnly:!0})],Eu.prototype,"type",void 0),Eu=ib=g([J("esri.symbols.LabelSymbol3D")],Eu);const f_=Eu;var rb;const DR=ze.ofType({base:null,key:"type",typeMap:{line:zm,path:D7}}),Bte=ze.ofType({base:null,key:"type",typeMap:{line:zm,path:D7}});let Sy=rb=class extends ff{constructor(t){super(t),this.symbolLayers=new DR,this.type="line-3d"}clone(){return new rb({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleLineSymbol(t){return new rb({symbolLayers:[zm.fromSimpleLineSymbol(t)]})}};g([S({type:DR,json:{type:Bte}})],Sy.prototype,"symbolLayers",void 0),g([Ue({LineSymbol3D:"line-3d"},{readOnly:!0})],Sy.prototype,"type",void 0),Sy=rb=g([J("esri.symbols.LineSymbol3D")],Sy);const y_=Sy;let Au=class extends Us{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};g([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Au.prototype,"angle",void 0),g([S({type:["simple-marker","picture-marker"],readOnly:!0})],Au.prototype,"type",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],Au.prototype,"xoffset",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],Au.prototype,"yoffset",void 0),g([S({type:Number,cast:t=>t==="auto"?t:Pt(t),json:{write:!0}})],Au.prototype,"size",void 0),Au=g([J("esri.symbols.MarkerSymbol")],Au);const RR=Au;var sb;const jR=ze.ofType({base:null,key:"type",typeMap:{fill:Fm}});let My=sb=class extends ff{constructor(t){super(t),this.symbolLayers=new jR,this.type="mesh-3d"}clone(){return new sb({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleFillSymbol(t){return new sb({symbolLayers:[Fm.fromSimpleFillSymbol(t)]})}};g([S({type:jR})],My.prototype,"symbolLayers",void 0),g([Ue({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],My.prototype,"type",void 0),My=sb=g([J("esri.symbols.MeshSymbol3D")],My);const m_=My;function Gte(t,e,i){return e.imageData?fO({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):FR(e.url,i)}function FR(t,e){var i;return qte(e)&&!pn(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Gl(e.layer.parsedUrl.path,"images",t):Ah(t,e)}function Ute(t,e,i,r){if(Bd(t)){const n=X1(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&kh(i.url,e,"url",r)}else kh(t,e,"url",r)}const NR={json:{read:{source:["imageData","url"],reader:Gte},write:{writer(t,e,i,r){Ute(t,e,this.source,r)}}}},zR={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=FR(e.url,i)),r}}}};function qte(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var y4;let kn=y4=class extends yR{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=Pt(i)),r!=null&&(n.height=Pt(r)),n}clone(){const t=new y4({color:ae(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",ae(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};g([Ue({esriPFS:"picture-fill"},{readOnly:!0})],kn.prototype,"type",void 0),g([S(NR)],kn.prototype,"url",void 0),g([S({type:Number,json:{write:!0}})],kn.prototype,"xscale",void 0),g([S({type:Number,json:{write:!0}})],kn.prototype,"yscale",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],kn.prototype,"width",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],kn.prototype,"height",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],kn.prototype,"xoffset",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],kn.prototype,"yoffset",void 0),g([S(zR)],kn.prototype,"source",void 0),kn=y4=g([J("esri.symbols.PictureFillSymbol")],kn);const VR=kn;var m4;let bo=m4=class extends RR{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Pt(e)),i!=null&&(r.height=Pt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new m4({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",ae(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};g([S({json:{write:!1}})],bo.prototype,"color",void 0),g([Ue({esriPMS:"picture-marker"},{readOnly:!0})],bo.prototype,"type",void 0),g([S(NR)],bo.prototype,"url",void 0),g([S(zR)],bo.prototype,"source",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],bo.prototype,"height",void 0),g([xe("height",["height","size"])],bo.prototype,"readHeight",null),g([S({type:Number,cast:Pt,json:{write:!0}})],bo.prototype,"width",void 0),g([S({json:{write:!1}})],bo.prototype,"size",void 0),bo=m4=g([J("esri.symbols.PictureMarkerSymbol")],bo);const g_=bo;var Sc;const BR=ze.ofType({base:null,key:"type",typeMap:{icon:od,object:L7,text:pf}});let Mc=Sc=class extends ff{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new BR,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return PR(this)}hasVisibleVerticalOffset(){return R7(this)}clone(){return new Sc({verticalOffset:ae(this.verticalOffset),callout:ae(this.callout),styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Sc({symbolLayers:[od.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new Sc({symbolLayers:[od.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Sc(i!=null&&i.callout?{symbolLayers:[od.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[od.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new Sc({symbolLayers:[pf.fromTextSymbol(t)]})}};g([S({type:OR,json:{write:!0}})],Mc.prototype,"verticalOffset",void 0),g([S(CR)],Mc.prototype,"callout",void 0),g([S({type:BR,json:{origins:{"web-scene":{write:!0}}}})],Mc.prototype,"symbolLayers",void 0),g([Ue({PointSymbol3D:"point-3d"},{readOnly:!0})],Mc.prototype,"type",void 0),Mc=Sc=g([J("esri.symbols.PointSymbol3D")],Mc);const ad=Mc;var $y;const GR=ze.ofType({base:null,key:"type",typeMap:{extrude:pR,fill:Fm,icon:od,line:zm,object:L7,text:pf,water:IR}});let Ty=$y=class extends ff{constructor(t){super(t),this.symbolLayers=new GR,this.type="polygon-3d"}clone(){return new $y({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromJSON(t){const e=new $y;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new $y({symbolLayers:[Fm.fromSimpleFillSymbol(t)]})}};g([S({type:GR,json:{write:!0}})],Ty.prototype,"symbolLayers",void 0),g([Ue({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ty.prototype,"type",void 0),Ty=$y=g([J("esri.symbols.PolygonSymbol3D")],Ty);const Vm=Ty;var g4;const F3=new xt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let $c=g4=class extends yR{constructor(...t){super(...t),this.color=new Ne([0,0,0,.25]),this.outline=new gn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new g4({color:ae(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};g([S()],$c.prototype,"color",void 0),g([S()],$c.prototype,"outline",void 0),g([Ue({esriSFS:"simple-fill"},{readOnly:!0})],$c.prototype,"type",void 0),g([S({type:F3.apiValues,json:{read:F3.read,write:F3.write}})],$c.prototype,"style",void 0),$c=g4=g([J("esri.symbols.SimpleFillSymbol")],$c);const qh=$c;var v4;const N3=new xt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let wa=v4=class extends RR{constructor(...t){super(...t),this.color=new Ne([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new gn}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=Pt(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new v4({angle:this.angle,color:ae(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};g([S()],wa.prototype,"color",void 0),g([Ae("color")],wa.prototype,"writeColor",null),g([Ue({esriSMS:"simple-marker"},{readOnly:!0})],wa.prototype,"type",void 0),g([S()],wa.prototype,"size",void 0),g([S({type:N3.apiValues,json:{read:N3.read,write:N3.write}})],wa.prototype,"style",void 0),g([S({type:String,json:{write:!0}})],wa.prototype,"path",null),g([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":gn}},json:{default:null,write:!0}})],wa.prototype,"outline",void 0),wa=v4=g([J("esri.symbols.SimpleMarkerSymbol")],wa);const Hh=wa;var b4;let gi=b4=class extends Us{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new d_,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Pt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new b4({angle:this.angle,backgroundColor:ae(this.backgroundColor),borderLineColor:ae(this.borderLineColor),borderLineSize:this.borderLineSize,color:ae(this.color),font:this.font&&this.font.clone(),haloColor:ae(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};g([S({type:Ne,json:{write:!0}})],gi.prototype,"backgroundColor",void 0),g([S({type:Ne,json:{write:!0}})],gi.prototype,"borderLineColor",void 0),g([S({type:Number,json:{write:!0},cast:Pt})],gi.prototype,"borderLineSize",void 0),g([S({type:d_,json:{write:!0}})],gi.prototype,"font",void 0),g([S({...xR,json:{write:!0}})],gi.prototype,"horizontalAlignment",void 0),g([S({type:Boolean,json:{write:!0}})],gi.prototype,"kerning",void 0),g([S({type:Ne,json:{write:!0}})],gi.prototype,"haloColor",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],gi.prototype,"haloSize",void 0),g([S({type:Boolean,json:{write:!0}})],gi.prototype,"rightToLeft",void 0),g([S({type:Boolean,json:{write:!0}})],gi.prototype,"rotated",void 0),g([S({type:String,json:{write:!0}})],gi.prototype,"text",void 0),g([Ue({esriTS:"text"},{readOnly:!0})],gi.prototype,"type",void 0),g([S({...SR,json:{write:!0}})],gi.prototype,"verticalAlignment",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],gi.prototype,"xoffset",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],gi.prototype,"yoffset",void 0),g([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],gi.prototype,"angle",void 0),g([S({type:Number,json:{write:!0}})],gi.prototype,"width",void 0),g([S({type:Number})],gi.prototype,"lineWidth",void 0),g([Ae("lineWidth")],gi.prototype,"writeLineWidth",null),g([St("lineWidth")],gi.prototype,"castLineWidth",null),g([S(_R)],gi.prototype,"lineHeight",void 0),g([Ae("lineHeight")],gi.prototype,"writeLineHeight",null),gi=b4=g([J("esri.symbols.TextSymbol")],gi);const yf=gi;var w4;let wo=w4=class extends Us{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:os.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new w4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const y=r&&i.get(r);if(y)return y.clone()}const{resolveWebStyleSymbol:n}=await le(()=>Promise.resolve().then(()=>d_e),void 0);hi(e);const l=n(this,{portal:this.portal},t,e);l.catch(y=>{ve.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",y)});const d=await l;return t==="webRef"&&d.type==="point-3d"||t==="cimRef"&&d.type==="cim"?(i!=null&&i.set(r,d.clone()),d):null}};g([S({json:{write:!1}})],wo.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],wo.prototype,"styleName",void 0),g([S({type:os,json:{write:!1}})],wo.prototype,"portal",void 0),g([S({type:String,json:{read:p_,write:kh}})],wo.prototype,"styleUrl",void 0),g([S({type:vd,json:{read:!1}})],wo.prototype,"thumbnail",void 0),g([S({type:String,json:{write:!0}})],wo.prototype,"name",void 0),g([Ue({styleSymbolReference:"web-style"},{readOnly:!0})],wo.prototype,"type",void 0),g([S()],wo.prototype,"_fetchCacheKey",null),wo=w4=g([J("esri.symbols.WebStyleSymbol")],wo);const Ud=wo;function v_(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Wl(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const bd={base:Us,key:"type",typeMap:{"simple-fill":qh,"picture-fill":VR,"picture-marker":g_,"simple-line":gn,"simple-marker":Hh,text:yf,"label-3d":f_,"line-3d":y_,"mesh-3d":m_,"point-3d":ad,"polygon-3d":Vm,"web-style":Ud,cim:jm},errorContext:"symbol"},Hte={base:Us,key:"type",typeMap:{"picture-marker":g_,"simple-marker":Hh,text:yf,"web-style":Ud,cim:jm},errorContext:"symbol"},Wte=rf({types:bd}),UR={base:Us,key:"type",typeMap:{"simple-fill":qh,"picture-fill":VR,"picture-marker":g_,"simple-line":gn,"simple-marker":Hh,text:yf,"line-3d":y_,"mesh-3d":m_,"point-3d":ad,"polygon-3d":Vm,"web-style":Ud,cim:jm},errorContext:"symbol"},Jte={base:Us,key:"type",typeMap:{text:yf,"label-3d":f_},errorContext:"symbol"},nE={base:Us,key:"type",typeMap:{"line-3d":y_,"mesh-3d":m_,"point-3d":ad,"polygon-3d":Vm,"web-style":Ud,cim:jm},errorContext:"symbol"},Yte={base:Us,key:"type",typeMap:{"label-3d":f_},errorContext:"symbol"},qR=Fa(bd);var _4;function Kte(t){if(!t)return null;const e={};for(const i in t){const r=Ul(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function Zte(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let Cs=_4=class extends si(ge){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:u1(),configurable:!0})}normalizeCtorArgs(t,e,i,r){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:r}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new _4({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Zte(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=r),t==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};g([S({value:null,json:{read:Kte}})],Cs.prototype,"aggregateGeometries",null),g([S({value:null})],Cs.prototype,"attributes",null),g([S({value:null,types:Vh,json:{read:Ul}})],Cs.prototype,"geometry",null),g([S({type:Boolean})],Cs.prototype,"isAggregate",void 0),g([S({clonable:"reference"})],Cs.prototype,"layer",void 0),g([S({type:df})],Cs.prototype,"popupTemplate",void 0),g([S({clonable:"reference"})],Cs.prototype,"sourceLayer",void 0),g([S({value:null,types:bd})],Cs.prototype,"symbol",null),g([S({type:Boolean,value:!0})],Cs.prototype,"visible",null),Cs=_4=g([J("esri.Graphic")],Cs),function(t){t.generateUID=u1}(Cs||(Cs={}));const ur=Cs;let j7=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,n=0,l=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),l&&r===i&&(r=e),r+n}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return zs(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function F7(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}F7(new j7(0,2*Math.PI));F7(new j7(-Math.PI,Math.PI));const Xte=F7(new j7(0,360));let hl=class extends si(ge){constructor(...e){super(...e),this.position=new lt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const l={position:e};return i!=null&&(l.heading=i),r!=null&&(l.tilt=r),n!=null&&(l.fov=n),l}return e}writePosition(e,i,r,n){const l=e.clone();l.x=zn(e.x||0),l.y=zn(e.y||0),l.z=e.hasZ?zn(e.z||0):e.z,i[r]=l.write({},n)}readPosition(e,i){const r=new lt;return r.read(e,i),r.x=zn(r.x||0),r.y=zn(r.y||0),r.z=r.hasZ?zn(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};g([S({type:lt,json:{write:{isRequired:!0}}})],hl.prototype,"position",void 0),g([Ae("position")],hl.prototype,"writePosition",null),g([xe("position")],hl.prototype,"readPosition",null),g([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),St(t=>Xte.normalize(zn(t)))],hl.prototype,"heading",void 0),g([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),St(t=>zs(zn(t),-180,180))],hl.prototype,"tilt",void 0),g([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],hl.prototype,"fov",void 0),hl=g([J("esri.Camera")],hl);const Qte=hl;var x4;let ku=x4=class extends ge{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new x4({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function z3(){return{enabled:!this.camera}}g([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:z3}}}}})],ku.prototype,"rotation",void 0),g([St("rotation")],ku.prototype,"castRotation",null),g([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:z3}}}}})],ku.prototype,"scale",void 0),g([S({types:Vh,json:{read:Ul,write:!0,origins:{"web-scene":{read:Ul,write:{overridePolicy:z3}}}}})],ku.prototype,"targetGeometry",void 0),g([S({type:Qte,json:{write:!0}})],ku.prototype,"camera",void 0),ku=x4=g([J("esri.Viewpoint")],ku);const Ra=ku;function me(t,e,i={}){return N7(t,e,i,HR)}function Xn(t,e,i={}){return N7(t,e,i,WR)}function N7(t,e,i={},r){let n=null;const l=i.once?(d,y)=>{r(d)&&(Ii(n),e(d,y))}:(d,y)=>{r(d)&&e(d,y)};if(n=rH(t,l,i.sync,i.equals),i.initial){const d=t();l(d,d)}return n}function Vs(t,e,i,r={}){let n=null,l=null,d=null;function y(){var $;n&&l&&(l.remove(),($=r.onListenerRemove)==null||$.call(r,n),n=null,l=null)}function v($){r.once&&r.once&&Ii(d),i($)}const x=me(t,($,E)=>{var k;y(),z2($)&&(n=$,l=V2($,e,v),(k=r.onListenerAdd)==null||k.call(r,$))},{sync:r.sync,initial:!0});return d=Vl(()=>{x.remove(),y()}),d}function b_(t,e){return eie(t,WR,e)}function eie(t,e,i){if(Ko(i))return Promise.reject(Ei());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function l(){n=Ii(n)}return new Promise((d,y)=>{n=D2([Hn(i,()=>{l(),y(Ei())}),N7(t,v=>{l(),d(v)},{sync:!1,once:!0},e??HR)])})}function HR(t){return!0}function WR(t){return!!t}const qd={sync:!0},st={initial:!0},Tl={sync:!0,initial:!0};let jw=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new J2,this._items=new Set}get length(){return nt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return nt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){nt(this._observable),yield*this._items}};const tie={statsWorker:()=>le(()=>import("./statsWorker-3fe8615a.js"),["assets/statsWorker-3fe8615a.js","assets/quantizationUtils-f146c253.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js"]),geometryEngineWorker:()=>le(()=>import("./geometryEngineWorker-5f0e40e2.js"),["assets/geometryEngineWorker-5f0e40e2.js","assets/geometryEngineJSON-747fee98.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>le(()=>import("./CSVSourceWorker-a4be2c5a.js"),["assets/CSVSourceWorker-a4be2c5a.js","assets/json-48e3ea08.js","assets/FeatureStore-c9a621c1.js","assets/BoundsStore-d8e4f486.js","assets/PooledRBush-5f448012.js","assets/projectionSupport-03e991d5.js","assets/timeSupport-f51102cb.js","assets/QueryEngine-4215f413.js","assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-f146c253.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js","assets/number-37f11f22.js"]),EdgeProcessingWorker:()=>le(()=>import("./EdgeProcessingWorker-976f07ca.js"),["assets/EdgeProcessingWorker-976f07ca.js","assets/InterleavedLayout-516ec1b9.js","assets/BufferView-f6835a9d.js","assets/types-1305598a.js","assets/edgeProcessing-e70fa183.js","assets/deduplicate-7bf32266.js","assets/Indices-aed44d11.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>le(()=>import("./ElevationSamplerWorker-3fd829e5.js"),["assets/ElevationSamplerWorker-3fd829e5.js","assets/PooledRBush-5f448012.js","assets/georeference-f963d9cd.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-debab8b1.js","assets/MeshLocalVertexSpace-f6b9ff28.js","assets/MeshGeoreferencedRelativeVertexSpace-c3f61512.js","assets/quat-f980ec23.js","assets/quatf64-3363c48e.js","assets/vec32-fd00a1c3.js","assets/BufferView-f6835a9d.js"]),FeatureServiceSnappingSourceWorker:()=>le(()=>import("./FeatureServiceSnappingSourceWorker-fd3185dd.js"),["assets/FeatureServiceSnappingSourceWorker-fd3185dd.js","assets/FeatureStore-c9a621c1.js","assets/BoundsStore-d8e4f486.js","assets/PooledRBush-5f448012.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/timeSupport-f51102cb.js","assets/QueryEngine-4215f413.js","assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-f146c253.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js","assets/byteSizeEstimations-7cf1c05d.js"]),GeoJSONSourceWorker:()=>le(()=>import("./GeoJSONSourceWorker-04c0929e.js"),["assets/GeoJSONSourceWorker-04c0929e.js","assets/FeatureStore-c9a621c1.js","assets/BoundsStore-d8e4f486.js","assets/PooledRBush-5f448012.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/timeSupport-f51102cb.js","assets/QueryEngine-4215f413.js","assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-f146c253.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js","assets/geojson-0110dbb2.js","assets/sourceUtils-2507b214.js"]),LercWorker:()=>le(()=>import("./LercWorker-1efd1f28.js"),[]),MemorySourceWorker:()=>le(()=>import("./MemorySourceWorker-a0498601.js"),["assets/MemorySourceWorker-a0498601.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-c9a621c1.js","assets/BoundsStore-d8e4f486.js","assets/PooledRBush-5f448012.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/timeSupport-f51102cb.js","assets/QueryEngine-4215f413.js","assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-f146c253.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js","assets/sourceUtils-2507b214.js"]),PBFDecoderWorker:()=>le(()=>import("./PBFDecoderWorker-2774a54f.js"),[]),Pipeline:()=>le(()=>import("./Pipeline-a725d85c.js"),["assets/Pipeline-a725d85c.js","assets/QueryEngine-4215f413.js","assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/quantizationUtils-f146c253.js","assets/timeSupport-f51102cb.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js","assets/FeatureStore2D-42bbfa9f.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/definitions-5e0e38c0.js","assets/visualVariablesUtils-860f1be8.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-953f84e2.js","assets/geojson-0110dbb2.js","assets/createConnection-7637ca47.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>le(()=>import("./PointCloudWorker-1d7345fd.js"),["assets/PointCloudWorker-1d7345fd.js","assets/quat-f980ec23.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-8b3ea02e.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-ef79d35c.js"]),RasterWorker:()=>le(()=>import("./RasterWorker-d6ce32fb.js"),["assets/RasterWorker-d6ce32fb.js","assets/dataUtils-f67a06a3.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-1665fa21.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-48a193e6.js","assets/rasterProjectionHelper-71a535ff.js"]),SceneLayerSnappingSourceWorker:()=>le(()=>import("./SceneLayerSnappingSourceWorker-5d6eeafb.js"),["assets/SceneLayerSnappingSourceWorker-5d6eeafb.js","assets/lineSegment-09ef59cf.js","assets/sphere-59da4412.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-84765026.js","assets/InterleavedLayout-516ec1b9.js","assets/BufferView-f6835a9d.js","assets/types-1305598a.js","assets/edgeProcessing-e70fa183.js","assets/deduplicate-7bf32266.js","assets/Indices-aed44d11.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>le(()=>import("./SceneLayerWorker-c6feeff5.js"),["assets/SceneLayerWorker-c6feeff5.js","assets/MeshLocalVertexSpace-f6b9ff28.js","assets/MeshGeoreferencedRelativeVertexSpace-c3f61512.js","assets/vec32-fd00a1c3.js","assets/sphere-59da4412.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>le(()=>import("./WFSSourceWorker-4730f83d.js"),["assets/WFSSourceWorker-4730f83d.js","assets/FeatureStore-c9a621c1.js","assets/BoundsStore-d8e4f486.js","assets/PooledRBush-5f448012.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/timeSupport-f51102cb.js","assets/QueryEngine-4215f413.js","assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js","assets/quantizationUtils-f146c253.js","assets/utils-37c7bc43.js","assets/generateRendererUtils-178dd9b9.js","assets/geojson-0110dbb2.js","assets/sourceUtils-2507b214.js","assets/wfsUtils-c86ea3ca.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>le(()=>import("./WorkerTileHandler-62732ef5.js"),["assets/WorkerTileHandler-62732ef5.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-b55e37bf.js","assets/definitions-5e0e38c0.js","assets/StyleRepository-0cc21e5c.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/earcut-27ea47a3.js","assets/BidiEngine-9a40f2f4.js"])};var Pr;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Pr||(Pr={}));let iie=0;function JR(){return iie++}function rie(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function lm(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function z7(t,e,i,r){if(e.type===Pr.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Pr.INVOKE&&e.type!==Pr.RESPONSE)return void t.postMessage(e);let n;if(rie(i)?(n=oE(i.transferList),e.data=i.result):(n=oE(r),e.data=i),n){if(ce("ff")){for(const l of n)if("byteLength"in l&&l.byteLength>267386880){const d="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Pr.INVOKE:throw d;case Pr.RESPONSE:return void z7(t,{type:Pr.RESPONSE,jobId:e.jobId,error:lm(d)})}}}t.postMessage(e,n)}else t.postMessage(e)}function um(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function oE(t){if(!t||!t.length)return null;if(ce("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!sie(i));return e.length?e:null}function sie(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:aE,ABORT:lE,INVOKE:uE,RESPONSE:Ff,OPEN_PORT:hE,ON:nie}=Pr,oie=2;let aie=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Pr.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Ph=class xp{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new xp(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),xp.clients.set(n,r),i.port2}static loadWorker(e){const i=tie[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new aie(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:aE}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const n=r==null?void 0:r.signal,l=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ne("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const d=JR();return new Promise((y,v)=>{if(Ko(n))return this._processWork(),void v(Ei());const x=Hn(n,()=>{const E=this._outJobs.get(d);E&&(this._outJobs.delete(d),this._processWork(),Ii(E.abortHandle),this._post({type:lE,jobId:d}),v(Ei()))}),$={resolve:y,reject:v,abortHandle:x,debugInfo:e};this._outJobs.set(d,$),this._post({type:uE,jobId:d,methodName:e,abortable:n!=null},i,l)})}on(e,i){const r=new MessageChannel;function n(l){i(l.data)}return this._port.postMessage({type:Pr.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:Pr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:hE,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=oie)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:l}=e;this.invoke(i,r,n).then(d=>l.resolve(d)).catch(d=>l.reject(d))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Ii(e.abortHandle),e.reject(Ei(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=um(e);if(i)switch(i.type){case Ff:this._onResponseMessage(i);break;case uE:this._invokeQueue.push(i);break;case lE:this._onAbortMessage(i);break;case aE:this._onCloseMessage();break;case hE:this._onOpenPortMessage(i);break;case nie:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&xp.clients.get(this)===e&&e.destroy(),xp.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:l}=e,d=l?new AbortController:null,y=this._inJobs;let v,x=this._client,$=x[i];try{if(!$&&i&&i.includes(".")){const E=i.split(".");for(let k=0;k<E.length-1;k++)x=x[E[k]],$=x[E[k+1]]}if(typeof $!="function")throw new TypeError(`${i} is not a function`);v=$.call(x,n,{client:this,signal:d?d.signal:null})}catch(E){return void this._post({type:Ff,jobId:r,error:lm(E)})}Kl(v)?(y.set(r,{controller:d,promise:v}),v.then(E=>{y.has(r)&&(y.delete(r),this._post({type:Ff,jobId:r},E))},E=>{y.has(r)&&(y.delete(r),Is(E)||this._post({type:Ff,jobId:r,error:lm(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:Ff,jobId:r},v)}_onOpenPortMessage(e){new xp(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,l=>{i.postMessage(l)}),n=V2(e.port,"message",l=>{const d=um(l);(d==null?void 0:d.type)===Pr.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,l=this._outJobs;if(!l.has(i))return;const d=l.get(i);l.delete(i),this._processWork(),Ii(d.abortHandle),r?d.reject(ne.fromJSON(JSON.parse(r))):d.resolve(n)}_post(e,i,r){return z7(this._port,e,i,r)}};Ph.kernelInfo={buildDate:PO,fullVersion:HM,revision:CO},Ph.clients=new Map;let lie=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new jw}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((r,n)=>{let l=!0;const d=y=>{hi(i.signal),l&&(l=!1,y())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let y=0;y<e.length;++y){const v=e[y];Kl(v)?this._clientPromises[y]=v.then(x=>(this._clients[y]=new Ph(x,i,()=>this._ongoingJobsQueue.pop()??null),d(r),this._clients[y]),()=>(d(n),null)):(this._clients[y]=new Ph(v,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[y]=Promise.resolve(this._clients[y]),d(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let l=0;l<this._clientPromises.length;++l){const d=this._clientPromises[l];n[l]=d.then(y=>y==null?void 0:y.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Ei(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,r){let n;Array.isArray(r)?(ve.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const l=Yn();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:l});for(let d=0;d<this._clientPromises.length;d++){const y=this._clients[d];y?y.jobAdded():this._clientPromises[d].then(v=>v==null?void 0:v.jobAdded())}return l.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>D2(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(l=>{l&&(i[n]=l.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const YR=ve.getLogger("esri.intl.substitute");function Oo(t,e,i={}){const{format:r={}}=i;return Jn(t,n=>uie(n,e,r))}function uie(t,e,i){let r,n;const l=t.indexOf(":");if(l===-1?r=t.trim():(r=t.slice(0,l).trim(),n=t.slice(l+1).trim()),!r)return"";const d=Tm(r,e);if(d==null)return"";const y=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return y?hie(d,y):n?cie(d,n):V7(d)}function hie(t,e){switch(e.type){case"date":return Zn(t,e.intlOptions);case"number":return Eh(t,e.intlOptions);default:return YR.warn("missing format descriptor for key {key}"),V7(t)}}function cie(t,e){switch(e.toLowerCase()){case"dateformat":return Zn(t);case"numberformat":return Eh(t);default:return YR.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Zn(t):/^numberformat/i.test(e)?Eh(t):V7(t)}}function V7(t){switch(typeof t){case"string":return t;case"number":return Eh(t);case"boolean":return""+t;default:return t instanceof Date?Zn(t):""}}async function die(t,e,i,r){const n=e.exec(i);if(!n)throw new ne("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const l=n[1]?`${n[1]}/`:"",d=n[2],y=fY(r),v=`${l}${d}.json`,x=y?`${l}${d}_${y}.json`:v;let $;try{$=await cE(t(x))}catch(E){if(x===v)throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:E});try{$=await cE(t(v))}catch(k){throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:k})}}return $}async function cE(t){if(dE.fetchBundleAsset!=null)return dE.fetchBundleAsset(t);const e=await Ht(t,{responseType:"text"});return JSON.parse(e.data)}let pie=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?l=>new URL(l,new URL(r,window.location.href)).href:r instanceof URL?l=>new URL(l,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return die(this.getAssetUrl,this.matcher,e,i)}};function fie(t){return new pie(t)}const dE={};pY(fie({pattern:"esri/",location:Et}));const yie={};function mie(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=yie.baseUrl),e}let gie=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},nb=class{constructor(){this._dispatcher=new gie,this._workerPostMessage({type:Pr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){nw(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){nw(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=um(e);if(i&&i.type===Pr.OPEN){const{modulePath:r,jobId:n}=i;let l=await Ph.loadWorker(r);l||(l=await le(()=>import(r),[]));const d=Ph.connect(l);this._workerPostMessage({type:Pr.OPENED,jobId:n,data:d})}}};const S4=ve.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:vie}=Pr,bie='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Pg,Cg;const pE="Failed to create Worker. Fallback to execute module in main thread";async function wie(){if(!ce("esri-workers")||(ce("mozilla"),0))return fE(new nb);if(!Pg&&!Cg)try{const e=bie.split('"{CONFIGURATION}"').join(`'${_ie()}'`);Pg=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){Cg=e||{}}let t;if(Pg)try{t=new Worker(Pg,{name:"esri-worker-"+xie++})}catch{S4.warn(pE,Cg),t=new nb}else S4.warn(pE,Cg),t=new nb;return fE(t)}async function fE(t){return new Promise(e=>{function i(n){const l=um(n);l&&l.type===vie&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),S4.warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new nb).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function _ie(){let t;if(Vt.default!=null){const n={...Vt};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Vt));t.assetsPath=Bn(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Bn(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Wn(),t.has={"esri-csp-restrictions":ce("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ce("esri-2d-update-debug"),"esri-2d-log-updating":ce("esri-2d-log-updating"),"featurelayer-pbf":ce("featurelayer-pbf"),"featurelayer-simplify-thresholds":ce("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ce("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ce("featurelayer-simplify-mobile-factor"),"esri-atomics":ce("esri-atomics"),"esri-shared-array-buffer":ce("esri-shared-array-buffer"),"esri-tiles-debug":ce("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ce("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ce("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":ce("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=Bn(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Bn(t.workers.workerPath):t.workers.workerPath=Bn(Et("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Vt.workers.loaderConfig,i=mie({baseUrl:e==null?void 0:e.baseUrl,locale:Wn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:PO,fullVersion:HM,revision:CO}})}let xie=0;const{ABORT:yE,INVOKE:Sie,OPEN:Mie,OPENED:$ie,RESPONSE:Nf}=Pr;let Tie=class KR{static async create(e){const i=await wie();return new KR(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),ve.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=JR();return new Promise((l,d)=>{const y={resolve:l,reject:d,abortHandle:_M(r,()=>{this._outJobs.delete(n),this._post({type:yE,jobId:n})})};this._outJobs.set(n,y),this._post({type:Mie,jobId:n,modulePath:e})})}_onMessage(e){const i=um(e);if(i)switch(i.type){case $ie:this._onOpenedMessage(i);break;case Nf:this._onResponseMessage(i);break;case yE:this._onAbortMessage(i);break;case Sie:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:l}=e,d=l?new AbortController:null,y=this._inJobs,v=dJ[i];let x;try{if(typeof v!="function")throw new TypeError(`${i} is not a function`);x=v.call(null,n,{signal:d?d.signal:null})}catch($){return void this._post({type:Nf,jobId:r,error:lm($)})}Kl(x)?(y.set(r,{controller:d,promise:x}),x.then($=>{y.has(r)&&(y.delete(r),this._post({type:Nf,jobId:r},$))},$=>{y.has(r)&&(y.delete(r),$||($={message:"Error encountered at method"+i}),Is($)||this._post({type:Nf,jobId:r,error:lm($||{message:`Error encountered at method ${i}`})}))})):this._post({type:Nf,jobId:r},x)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Ii(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),Ii(l.abortHandle),r?l.reject(ne.fromJSON(JSON.parse(r))):l.resolve(n))}_post(e,i,r){return z7(this.worker,e,i,r)}};const mE=ce("host-browser")?Math.min(navigator.hardwareConcurrency-1,ce("workers-pool-size")):0;let ld=ce("esri-mobile")?Math.min(mE,3):mE;ld||(ld=ce("safari")&&ce("mac")?7:2);let gE=0;const ob=[];function Iie(){XR()}async function Og(t,e){const i=new lie;return await i.open(t,e),i}async function ZR(t,e={}){if(typeof t!="string")throw new ne("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ce("host-webworker")&&!ce("esri-workers")&&(i="local"),i==="local"){let r=await Ph.loadWorker(t);r||(r=await le(()=>import(t),[])),hi(e.signal);const n=e.client||r;return Og([Ph.connect(r)],{...e,client:n})}if(await XR(),hi(e.signal),i==="dedicated"){const r=gE++%ld;return Og([await ob[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,ld);if(r<ld){const n=new Array(r);for(let l=0;l<r;++l){const d=gE++%ld;n[l]=ob[d].open(t,e)}return Og(n,e)}}return Og(ob.map(r=>r.open(t,e)),e)}let Lg=null;async function XR(){if(Lg)return Lg;new AbortController;const t=[];for(let e=0;e<ld;e++){const i=Tie.create(e).then(r=>(ob[e]=r,r));t.push(i)}return Lg=Promise.all(t),Lg}function Eie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Wh(t,e,i,r,n,l,d,y,v,x,$,E,k,P,D,L,N){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=l,t[5]=d,t[6]=y,t[7]=v,t[8]=x,t[9]=$,t[10]=E,t[11]=k,t[12]=P,t[13]=D,t[14]=L,t[15]=N,t}function Bm(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xl(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],l=e[6],d=e[7],y=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=l,t[11]=e[14],t[12]=n,t[13]=d,t[14]=y}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Aie(t,e){return QR(t,e)||Bm(t),t}function QR(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],v=e[6],x=e[7],$=e[8],E=e[9],k=e[10],P=e[11],D=e[12],L=e[13],N=e[14],B=e[15],W=i*y-r*d,q=i*v-n*d,Y=i*x-l*d,ie=r*v-n*y,se=r*x-l*y,ue=n*x-l*v,de=$*L-E*D,be=$*N-k*D,we=$*B-P*D,$e=E*N-k*L,ke=E*B-P*L,Ge=k*B-P*N;let Fe=W*Ge-q*ke+Y*$e+ie*we-se*be+ue*de;return Fe?(Fe=1/Fe,t[0]=(y*Ge-v*ke+x*$e)*Fe,t[1]=(n*ke-r*Ge-l*$e)*Fe,t[2]=(L*ue-N*se+B*ie)*Fe,t[3]=(k*se-E*ue-P*ie)*Fe,t[4]=(v*we-d*Ge-x*be)*Fe,t[5]=(i*Ge-n*we+l*be)*Fe,t[6]=(N*Y-D*ue-B*q)*Fe,t[7]=($*ue-k*Y+P*q)*Fe,t[8]=(d*ke-y*we+x*de)*Fe,t[9]=(r*we-i*ke-l*de)*Fe,t[10]=(D*se-L*Y+B*W)*Fe,t[11]=(E*Y-$*se-P*W)*Fe,t[12]=(y*be-d*$e-v*de)*Fe,t[13]=(i*$e-r*be+n*de)*Fe,t[14]=(L*q-D*ie-N*W)*Fe,t[15]=($*ie-E*q+k*W)*Fe,t):null}function kie(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],v=e[6],x=e[7],$=e[8],E=e[9],k=e[10],P=e[11],D=e[12],L=e[13],N=e[14],B=e[15];return t[0]=y*(k*B-P*N)-E*(v*B-x*N)+L*(v*P-x*k),t[1]=-(r*(k*B-P*N)-E*(n*B-l*N)+L*(n*P-l*k)),t[2]=r*(v*B-x*N)-y*(n*B-l*N)+L*(n*x-l*v),t[3]=-(r*(v*P-x*k)-y*(n*P-l*k)+E*(n*x-l*v)),t[4]=-(d*(k*B-P*N)-$*(v*B-x*N)+D*(v*P-x*k)),t[5]=i*(k*B-P*N)-$*(n*B-l*N)+D*(n*P-l*k),t[6]=-(i*(v*B-x*N)-d*(n*B-l*N)+D*(n*x-l*v)),t[7]=i*(v*P-x*k)-d*(n*P-l*k)+$*(n*x-l*v),t[8]=d*(E*B-P*L)-$*(y*B-x*L)+D*(y*P-x*E),t[9]=-(i*(E*B-P*L)-$*(r*B-l*L)+D*(r*P-l*E)),t[10]=i*(y*B-x*L)-d*(r*B-l*L)+D*(r*x-l*y),t[11]=-(i*(y*P-x*E)-d*(r*P-l*E)+$*(r*x-l*y)),t[12]=-(d*(E*N-k*L)-$*(y*N-v*L)+D*(y*k-v*E)),t[13]=i*(E*N-k*L)-$*(r*N-n*L)+D*(r*k-n*E),t[14]=-(i*(y*N-v*L)-d*(r*N-n*L)+D*(r*v-n*y)),t[15]=i*(y*k-v*E)-d*(r*k-n*E)+$*(r*v-n*y),t}function Pie(t){const e=t[0],i=t[1],r=t[2],n=t[3],l=t[4],d=t[5],y=t[6],v=t[7],x=t[8],$=t[9],E=t[10],k=t[11],P=t[12],D=t[13],L=t[14],N=t[15];return(e*d-i*l)*(E*N-k*L)-(e*y-r*l)*($*N-k*D)+(e*v-n*l)*($*L-E*D)+(i*y-r*d)*(x*N-k*P)-(i*v-n*d)*(x*L-E*P)+(r*v-n*y)*(x*D-$*P)}function ej(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=e[6],$=e[7],E=e[8],k=e[9],P=e[10],D=e[11],L=e[12],N=e[13],B=e[14],W=e[15];let q=i[0],Y=i[1],ie=i[2],se=i[3];return t[0]=q*r+Y*y+ie*E+se*L,t[1]=q*n+Y*v+ie*k+se*N,t[2]=q*l+Y*x+ie*P+se*B,t[3]=q*d+Y*$+ie*D+se*W,q=i[4],Y=i[5],ie=i[6],se=i[7],t[4]=q*r+Y*y+ie*E+se*L,t[5]=q*n+Y*v+ie*k+se*N,t[6]=q*l+Y*x+ie*P+se*B,t[7]=q*d+Y*$+ie*D+se*W,q=i[8],Y=i[9],ie=i[10],se=i[11],t[8]=q*r+Y*y+ie*E+se*L,t[9]=q*n+Y*v+ie*k+se*N,t[10]=q*l+Y*x+ie*P+se*B,t[11]=q*d+Y*$+ie*D+se*W,q=i[12],Y=i[13],ie=i[14],se=i[15],t[12]=q*r+Y*y+ie*E+se*L,t[13]=q*n+Y*v+ie*k+se*N,t[14]=q*l+Y*x+ie*P+se*B,t[15]=q*d+Y*$+ie*D+se*W,t}function Cie(t,e,i){const r=i[0],n=i[1],l=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*l+e[12],t[13]=e[1]*r+e[5]*n+e[9]*l+e[13],t[14]=e[2]*r+e[6]*n+e[10]*l+e[14],t[15]=e[3]*r+e[7]*n+e[11]*l+e[15];else{const d=e[0],y=e[1],v=e[2],x=e[3],$=e[4],E=e[5],k=e[6],P=e[7],D=e[8],L=e[9],N=e[10],B=e[11];t[0]=d,t[1]=y,t[2]=v,t[3]=x,t[4]=$,t[5]=E,t[6]=k,t[7]=P,t[8]=D,t[9]=L,t[10]=N,t[11]=B,t[12]=d*r+$*n+D*l+e[12],t[13]=y*r+E*n+L*l+e[13],t[14]=v*r+k*n+N*l+e[14],t[15]=x*r+P*n+B*l+e[15]}return t}function Oie(t,e,i){const r=i[0],n=i[1],l=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Lie(t,e,i,r){let n,l,d,y,v,x,$,E,k,P,D,L,N,B,W,q,Y,ie,se,ue,de,be,we,$e,ke=r[0],Ge=r[1],Fe=r[2],ht=Math.sqrt(ke*ke+Ge*Ge+Fe*Fe);return ht<Qn()?null:(ht=1/ht,ke*=ht,Ge*=ht,Fe*=ht,n=Math.sin(i),l=Math.cos(i),d=1-l,y=e[0],v=e[1],x=e[2],$=e[3],E=e[4],k=e[5],P=e[6],D=e[7],L=e[8],N=e[9],B=e[10],W=e[11],q=ke*ke*d+l,Y=Ge*ke*d+Fe*n,ie=Fe*ke*d-Ge*n,se=ke*Ge*d-Fe*n,ue=Ge*Ge*d+l,de=Fe*Ge*d+ke*n,be=ke*Fe*d+Ge*n,we=Ge*Fe*d-ke*n,$e=Fe*Fe*d+l,t[0]=y*q+E*Y+L*ie,t[1]=v*q+k*Y+N*ie,t[2]=x*q+P*Y+B*ie,t[3]=$*q+D*Y+W*ie,t[4]=y*se+E*ue+L*de,t[5]=v*se+k*ue+N*de,t[6]=x*se+P*ue+B*de,t[7]=$*se+D*ue+W*de,t[8]=y*be+E*we+L*$e,t[9]=v*be+k*we+N*$e,t[10]=x*be+P*we+B*$e,t[11]=$*be+D*we+W*$e,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Die(t,e,i){const r=Math.sin(i),n=Math.cos(i),l=e[4],d=e[5],y=e[6],v=e[7],x=e[8],$=e[9],E=e[10],k=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=l*n+x*r,t[5]=d*n+$*r,t[6]=y*n+E*r,t[7]=v*n+k*r,t[8]=x*n-l*r,t[9]=$*n-d*r,t[10]=E*n-y*r,t[11]=k*n-v*r,t}function Rie(t,e,i){const r=Math.sin(i),n=Math.cos(i),l=e[0],d=e[1],y=e[2],v=e[3],x=e[8],$=e[9],E=e[10],k=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*n-x*r,t[1]=d*n-$*r,t[2]=y*n-E*r,t[3]=v*n-k*r,t[8]=l*r+x*n,t[9]=d*r+$*n,t[10]=y*r+E*n,t[11]=v*r+k*n,t}function jie(t,e,i){const r=Math.sin(i),n=Math.cos(i),l=e[0],d=e[1],y=e[2],v=e[3],x=e[4],$=e[5],E=e[6],k=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*n+x*r,t[1]=d*n+$*r,t[2]=y*n+E*r,t[3]=v*n+k*r,t[4]=x*n-l*r,t[5]=$*n-d*r,t[6]=E*n-y*r,t[7]=k*n-v*r,t}function tj(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Fie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nie(t,e,i){if(e===0)return Bm(t);let r,n,l,d=i[0],y=i[1],v=i[2],x=Math.sqrt(d*d+y*y+v*v);return x<Qn()?null:(x=1/x,d*=x,y*=x,v*=x,r=Math.sin(e),n=Math.cos(e),l=1-n,t[0]=d*d*l+n,t[1]=y*d*l+v*r,t[2]=v*d*l-y*r,t[3]=0,t[4]=d*y*l-v*r,t[5]=y*y*l+n,t[6]=v*y*l+d*r,t[7]=0,t[8]=d*v*l+y*r,t[9]=y*v*l-d*r,t[10]=v*v*l+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function zie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Bie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ij(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=r+r,v=n+n,x=l+l,$=r*y,E=r*v,k=r*x,P=n*v,D=n*x,L=l*x,N=d*y,B=d*v,W=d*x;return t[0]=1-(P+L),t[1]=E+W,t[2]=k-B,t[3]=0,t[4]=E-W,t[5]=1-($+L),t[6]=D+N,t[7]=0,t[8]=k+B,t[9]=D-N,t[10]=1-($+P),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Gie(t,e){const i=Uie,r=-e[0],n=-e[1],l=-e[2],d=e[3],y=e[4],v=e[5],x=e[6],$=e[7],E=r*r+n*n+l*l+d*d;return E>0?(i[0]=2*(y*d+$*r+v*l-x*n)/E,i[1]=2*(v*d+$*n+x*r-y*l)/E,i[2]=2*(x*d+$*l+y*n-v*r)/E):(i[0]=2*(y*d+$*r+v*l-x*n),i[1]=2*(v*d+$*n+x*r-y*l),i[2]=2*(x*d+$*l+y*n-v*r)),ij(t,e,i),t}const Uie=ia();function qie(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Hie(t,e){const i=e[0],r=e[1],n=e[2],l=e[4],d=e[5],y=e[6],v=e[8],x=e[9],$=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(l*l+d*d+y*y),t[2]=Math.sqrt(v*v+x*x+$*$),t}function Wie(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function Jie(t,e,i,r){const n=e[0],l=e[1],d=e[2],y=e[3],v=n+n,x=l+l,$=d+d,E=n*v,k=n*x,P=n*$,D=l*x,L=l*$,N=d*$,B=y*v,W=y*x,q=y*$,Y=r[0],ie=r[1],se=r[2];return t[0]=(1-(D+N))*Y,t[1]=(k+q)*Y,t[2]=(P-W)*Y,t[3]=0,t[4]=(k-q)*ie,t[5]=(1-(E+N))*ie,t[6]=(L+B)*ie,t[7]=0,t[8]=(P+W)*se,t[9]=(L-B)*se,t[10]=(1-(E+D))*se,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Yie(t,e,i,r,n){const l=e[0],d=e[1],y=e[2],v=e[3],x=l+l,$=d+d,E=y+y,k=l*x,P=l*$,D=l*E,L=d*$,N=d*E,B=y*E,W=v*x,q=v*$,Y=v*E,ie=r[0],se=r[1],ue=r[2],de=n[0],be=n[1],we=n[2],$e=(1-(L+B))*ie,ke=(P+Y)*ie,Ge=(D-q)*ie,Fe=(P-Y)*se,ht=(1-(k+B))*se,ni=(N+W)*se,Ze=(D+q)*ue,Xe=(N-W)*ue,oi=(1-(k+L))*ue;return t[0]=$e,t[1]=ke,t[2]=Ge,t[3]=0,t[4]=Fe,t[5]=ht,t[6]=ni,t[7]=0,t[8]=Ze,t[9]=Xe,t[10]=oi,t[11]=0,t[12]=i[0]+de-($e*de+Fe*be+Ze*we),t[13]=i[1]+be-(ke*de+ht*be+Xe*we),t[14]=i[2]+we-(Ge*de+ni*be+oi*we),t[15]=1,t}function Kie(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=i+i,y=r+r,v=n+n,x=i*d,$=r*d,E=r*y,k=n*d,P=n*y,D=n*v,L=l*d,N=l*y,B=l*v;return t[0]=1-E-D,t[1]=$+B,t[2]=k-N,t[3]=0,t[4]=$-B,t[5]=1-x-D,t[6]=P+L,t[7]=0,t[8]=k+N,t[9]=P-L,t[10]=1-x-E,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zie(t,e,i,r,n,l,d){const y=1/(i-e),v=1/(n-r),x=1/(l-d);return t[0]=2*l*y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*l*v,t[6]=0,t[7]=0,t[8]=(i+e)*y,t[9]=(n+r)*v,t[10]=(d+l)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=d*l*2*x,t[15]=0,t}function Xie(t,e,i,r,n){const l=1/Math.tan(e/2);let d;return t[0]=l/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(d=1/(r-n),t[10]=(n+r)*d,t[14]=2*n*r*d):(t[10]=-1,t[14]=-2*r),t}function Qie(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),l=Math.tan(e.downDegrees*Math.PI/180),d=Math.tan(e.leftDegrees*Math.PI/180),y=Math.tan(e.rightDegrees*Math.PI/180),v=2/(d+y),x=2/(n+l);return t[0]=v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-(d-y)*v*.5,t[9]=(n-l)*x*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function ere(t,e,i,r,n,l,d){const y=1/(e-i),v=1/(r-n),x=1/(l-d);return t[0]=-2*y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*v,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+i)*y,t[13]=(n+r)*v,t[14]=(d+l)*x,t[15]=1,t}function tre(t,e,i,r){const n=e[0],l=e[1],d=e[2];let y=n-i[0],v=l-i[1],x=d-i[2];const $=Qn();if(Math.abs(y)<$&&Math.abs(v)<$&&Math.abs(x)<$)return void Bm(t);let E=1/Math.sqrt(y*y+v*v+x*x);y*=E,v*=E,x*=E;const k=r[0],P=r[1],D=r[2];let L=P*x-D*v,N=D*y-k*x,B=k*v-P*y;E=Math.sqrt(L*L+N*N+B*B),E?(E=1/E,L*=E,N*=E,B*=E):(L=0,N=0,B=0);let W=v*B-x*N,q=x*L-y*B,Y=y*N-v*L;E=Math.sqrt(W*W+q*q+Y*Y),E?(E=1/E,W*=E,q*=E,Y*=E):(W=0,q=0,Y=0),t[0]=L,t[1]=W,t[2]=y,t[3]=0,t[4]=N,t[5]=q,t[6]=v,t[7]=0,t[8]=B,t[9]=Y,t[10]=x,t[11]=0,t[12]=-(L*n+N*l+B*d),t[13]=-(W*n+q*l+Y*d),t[14]=-(y*n+v*l+x*d),t[15]=1}function ire(t,e,i,r){const n=e[0],l=e[1],d=e[2],y=r[0],v=r[1],x=r[2];let $=n-i[0],E=l-i[1],k=d-i[2],P=$*$+E*E+k*k;P>0&&(P=1/Math.sqrt(P),$*=P,E*=P,k*=P);let D=v*k-x*E,L=x*$-y*k,N=y*E-v*$;return P=D*D+L*L+N*N,P>0&&(P=1/Math.sqrt(P),D*=P,L*=P,N*=P),t[0]=D,t[1]=L,t[2]=N,t[3]=0,t[4]=E*N-k*L,t[5]=k*D-$*N,t[6]=$*L-E*D,t[7]=0,t[8]=$,t[9]=E,t[10]=k,t[11]=0,t[12]=n,t[13]=l,t[14]=d,t[15]=1,t}function rre(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function sre(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function nre(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function rj(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function ore(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function are(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function lre(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ure(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],v=t[6],x=t[7],$=t[8],E=t[9],k=t[10],P=t[11],D=t[12],L=t[13],N=t[14],B=t[15],W=e[0],q=e[1],Y=e[2],ie=e[3],se=e[4],ue=e[5],de=e[6],be=e[7],we=e[8],$e=e[9],ke=e[10],Ge=e[11],Fe=e[12],ht=e[13],ni=e[14],Ze=e[15],Xe=Qn();return Math.abs(i-W)<=Xe*Math.max(1,Math.abs(i),Math.abs(W))&&Math.abs(r-q)<=Xe*Math.max(1,Math.abs(r),Math.abs(q))&&Math.abs(n-Y)<=Xe*Math.max(1,Math.abs(n),Math.abs(Y))&&Math.abs(l-ie)<=Xe*Math.max(1,Math.abs(l),Math.abs(ie))&&Math.abs(d-se)<=Xe*Math.max(1,Math.abs(d),Math.abs(se))&&Math.abs(y-ue)<=Xe*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(v-de)<=Xe*Math.max(1,Math.abs(v),Math.abs(de))&&Math.abs(x-be)<=Xe*Math.max(1,Math.abs(x),Math.abs(be))&&Math.abs($-we)<=Xe*Math.max(1,Math.abs($),Math.abs(we))&&Math.abs(E-$e)<=Xe*Math.max(1,Math.abs(E),Math.abs($e))&&Math.abs(k-ke)<=Xe*Math.max(1,Math.abs(k),Math.abs(ke))&&Math.abs(P-Ge)<=Xe*Math.max(1,Math.abs(P),Math.abs(Ge))&&Math.abs(D-Fe)<=Xe*Math.max(1,Math.abs(D),Math.abs(Fe))&&Math.abs(L-ht)<=Xe*Math.max(1,Math.abs(L),Math.abs(ht))&&Math.abs(N-ni)<=Xe*Math.max(1,Math.abs(N),Math.abs(ni))&&Math.abs(B-Ze)<=Xe*Math.max(1,Math.abs(B),Math.abs(Ze))}function hre(t){const e=Qn(),i=t[0],r=t[1],n=t[2],l=t[4],d=t[5],y=t[6],v=t[8],x=t[9],$=t[10];return Math.abs(1-(i*i+l*l+v*v))<=e&&Math.abs(1-(r*r+d*d+x*x))<=e&&Math.abs(1-(n*n+y*y+$*$))<=e}function cre(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const dre=ej,pre=rj;Object.freeze(Object.defineProperty({__proto__:null,add:nre,adjoint:kie,copy:Eie,determinant:Pie,equals:ure,exactEquals:lre,frob:sre,fromQuat:Kie,fromQuat2:Gie,fromRotation:Nie,fromRotationTranslation:ij,fromRotationTranslationScale:Jie,fromRotationTranslationScaleOrigin:Yie,fromScaling:Fie,fromTranslation:tj,fromXRotation:zie,fromYRotation:Vie,fromZRotation:Bie,frustum:Zie,getRotation:Wie,getScaling:Hie,getTranslation:qie,hasIdentityRotation:cre,identity:Bm,invert:QR,invertOrIdentity:Aie,isOrthoNormal:hre,lookAt:tre,mul:dre,multiply:ej,multiplyScalar:ore,multiplyScalarAndAdd:are,ortho:ere,perspective:Xie,perspectiveFromFieldOfView:Qie,rotate:Lie,rotateX:Die,rotateY:Rie,rotateZ:jie,scale:Oie,set:Wh,str:rre,sub:pre,subtract:rj,targetTo:ire,translate:Cie,transpose:Xl},Symbol.toStringTag,{value:"Module"}));let V3,oe=null;function B7(){return!!oe}function fre(){return!!ce("esri-wasm")}function sj(){return V3||(V3=le(()=>import("./pe-wasm-e62e57a7.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Et(`esri/geometry/support/${e}`)})).then(t=>{oj(t)}),V3)}var M4,bi,$4;(function(t){function e(l,d,y){oe.ensureCache.prepare();const v=Xc(y),x=y===v,$=oe.ensureFloat64(v),E=oe._pe_geog_to_proj(oe.getPointer(l),d,$);return E&&nh(y,d,$,x),E}function i(l,d,y,v){switch(v){case bi.PE_TRANSFORM_P_TO_G:return r(l,d,y);case bi.PE_TRANSFORM_G_TO_P:return e(l,d,y)}return 0}function r(l,d,y){return n(l,d,y,0)}function n(l,d,y,v){oe.ensureCache.prepare();const x=Xc(y),$=y===x,E=oe.ensureFloat64(x),k=oe._pe_proj_to_geog_center(oe.getPointer(l),d,E,v);return k&&nh(y,d,E,$),k}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(M4||(M4={})),function(t){function e(){t.PE_BUFFER_MAX=oe.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=oe.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=oe.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=oe.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=oe.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=oe.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=oe.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=oe.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=oe.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=oe.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=oe.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=oe.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=oe.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=oe.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=oe.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=oe.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=oe.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=oe.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=oe.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=oe.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=oe.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=oe.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=oe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=oe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=oe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=oe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=oe.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=oe.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=oe.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=oe.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(bi||(bi={})),function(t){const e={},i={},r=P=>{if(P){const D=P.getType();switch(D){case bi.PE_TYPE_GEOGCS:P=oe.castObject(P,oe.PeGeogcs);break;case bi.PE_TYPE_PROJCS:P=oe.castObject(P,oe.PeProjcs);break;case bi.PE_TYPE_GEOGTRAN:P=oe.castObject(P,oe.PeGeogtran);break;default:D&bi.PE_TYPE_UNIT&&(P=oe.castObject(P,oe.PeUnit))}}return P};function n(){oe.PeFactory.prototype.initialize(null)}function l(P){return d(bi.PE_TYPE_COORDSYS,P)}function d(P,D){let L=null,N=e[P];if(N||(N={},e[P]=N),N.hasOwnProperty(String(D)))L=N[D];else{const B=oe.PeFactory.prototype.factoryByType(P,D);oe.compare(B,oe.NULL)||(L=B,N[D]=L)}return L=r(L),L}function y(P,D){let L=null,N=i[P];if(N||(N={},i[P]=N),N.hasOwnProperty(D))L=N[D];else{const B=oe.PeFactory.prototype.fromString(P,D);oe.compare(B,oe.NULL)||(L=B,N[D]=L)}return L=r(L),L}function v(P){return d(bi.PE_TYPE_GEOGCS,P)}function x(P){return d(bi.PE_TYPE_GEOGTRAN,P)}function $(P){return oe.PeFactory.prototype.getCode(P)}function E(P){return d(bi.PE_TYPE_PROJCS,P)}function k(P){return d(bi.PE_TYPE_UNIT,P)}t.initialize=n,t.coordsys=l,t.factoryByType=d,t.fromString=y,t.geogcs=v,t.geogtran=x,t.getCode=$,t.projcs=E,t.unit=k}($4||($4={}));let nj=null;var Fw,T4,I4,E4,Nw,A4,zw,Vw,k4;function oj(t){function e(l,d,y){l[d]=y(l[d])}oe=t,bi.init(),Fw.init(),Nw.init(),zw.init(),Vw.init(),nj=class extends oe.PeGCSExtent{destroy(){oe.destroy(this)}};const i=[oe.PeDatum,oe.PeGeogcs,oe.PeGeogtran,oe.PeObject,oe.PeParameter,oe.PePrimem,oe.PeProjcs,oe.PeSpheroid,oe.PeUnit];for(const l of i)e(l.prototype,"getName",d=>function(){return d.call(this,new Array(bi.PE_NAME_MAX))});for(const l of[oe.PeGeogtran,oe.PeProjcs])e(l.prototype,"getParameters",d=>function(){const y=new Array(bi.PE_PARM_MAX);let v=d.call(this);for(let x=0;x<y.length;x++){const $=oe.getValue(v,"*");y[x]=$?oe.wrapPointer($,oe.PeParameter):null,v+=Int32Array.BYTES_PER_ELEMENT}return y});e(oe.PeHorizon.prototype,"getCoord",l=>function(){const d=this.getSize();if(!d)return null;const y=[];return nh(y,d,l.call(this)),y}),e(oe.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const d=oe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;const v=l.call(this);if(!oe.compare(v,oe.NULL)){y=[v];const x=this.getSteps();if(x>1){const $=oe.getPointer(v);for(let E=1;E<x;E++)y.push(oe.wrapPointer($+d*E,oe.PeGTlistExtendedGTs))}}return y}});const r=oe._pe_getPeHorizonSize(),n=l=>function(){let d=this._cache;if(d||(d=new Map,this._cache=d),d.has(l))return d.get(l);let y=null;const v=l.call(this);if(!oe.compare(v,oe.NULL)){y=[v];const x=v.getNump();if(x>1){const $=oe.getPointer(v);for(let E=1;E<x;E++)y.push(oe.wrapPointer($+r*E,oe.PeHorizon))}}return d.set(l,y),y};e(oe.PeProjcs.prototype,"horizonGcsGenerate",n),e(oe.PeProjcs.prototype,"horizonPcsGenerate",n),oe.PeObject.prototype.toString=function(l=bi.PE_STR_OPTS_NONE){oe.ensureCache.prepare();const d=oe.getPointer(this),y=oe.ensureInt8(new Array(bi.PE_BUFFER_MAX));return oe.UTF8ToString(oe._pe_object_to_string_ext(d,l,y))}}function Ya(t){if(!t)return;const e=oe.getClass(t);if(!e)return;const i=oe.getCache(e);if(!i)return;const r=oe.getPointer(t);r&&delete i[r]}function Dg(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(oe.ensureInt8(r));return i}function Xc(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function nh(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=oe.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let l=0;l<e;l++)n&&(t[l]=new Array(2)),t[l][0]=oe.getValue(i,"double"),t[l][1]=oe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=oe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=oe._pe_getPeGTlistExtendedEntrySize()}function r(n,l,d,y,v,x){let $=null;const E=new oe.PeInteger(x);try{const k=oe.PeGTlistExtended.prototype.getGTlist(n,l,d,y,v,E);if((x=E.val)&&($=[k],x>1)){const P=oe.getPointer(k);for(let D=1;D<x;D++)$.push(oe.wrapPointer(P+e*D,oe.PeGTlistExtendedEntry))}}finally{oe.destroy(E)}return $}t.init=i,t.getGTlist=r})(Fw||(Fw={})),function(t){function e(i){if(i&&i.length){for(const r of i)Ya(r),r.getEntries().forEach(n=>{Ya(n);const l=n.getGeogtran();Ya(l),l.getParameters().forEach(Ya),[l.getGeogcs1(),l.getGeogcs2()].forEach(d=>{Ya(d);const y=d.getDatum();Ya(y),Ya(y.getSpheroid()),Ya(d.getPrimem()),Ya(d.getUnit())})});oe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(T4||(T4={})),function(t){function e(i,r,n,l,d){oe.ensureCache.prepare();const y=Xc(n),v=n===y,x=oe.ensureFloat64(y);let $=0;l&&($=oe.ensureFloat64(l));const E=oe._pe_geog_to_geog(oe.getPointer(i),r,x,$,d);return E&&nh(n,r,x,v),E}t.geogToGeog=e}(I4||(I4={})),function(t){const e=(x,$,E,k,P,D)=>{let L,N;switch(oe.ensureCache.prepare(),x){case"dd":L=oe._pe_geog_to_dd,N=bi.PE_DD_MAX;break;case"ddm":L=oe._pe_geog_to_ddm,N=bi.PE_DDM_MAX;break;case"dms":L=oe._pe_geog_to_dms,N=bi.PE_DMS_MAX}let B=0;$&&(B=oe.getPointer($));const W=Xc(k),q=oe.ensureFloat64(W),Y=Dg(E,N),ie=L(B,E,q,P,oe.ensureInt32(Y));if(ie)for(let se=0;se<E;se++)D[se]=oe.UTF8ToString(Y[se]);return ie},i=(x,$,E,k,P)=>{let D;switch(oe.ensureCache.prepare(),x){case"dd":D=oe._pe_dd_to_geog;break;case"ddm":D=oe._pe_ddm_to_geog;break;case"dms":D=oe._pe_dms_to_geog}let L=0;$&&(L=oe.getPointer($));const N=k.map(Y=>oe.ensureString(Y)),B=oe.ensureInt32(N),W=oe.ensureFloat64(new Array(2*E)),q=D(L,E,B,W);return q&&nh(P,E,W),q};function r(x,$,E,k,P){return e("dms",x,$,E,k,P)}function n(x,$,E,k){return i("dms",x,$,E,k)}function l(x,$,E,k,P){return e("ddm",x,$,E,k,P)}function d(x,$,E,k){return i("ddm",x,$,E,k)}function y(x,$,E,k,P){return e("dd",x,$,E,k,P)}function v(x,$,E,k){return i("dd",x,$,E,k)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=l,t.ddmToGeog=d,t.geogToDd=y,t.ddToGeog=v}(E4||(E4={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=oe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=oe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=oe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=oe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=oe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,l,d,y,v,x,$){oe.ensureCache.prepare();let E=0;n&&(E=oe.getPointer(n));const k=Xc(d),P=oe.ensureFloat64(k),D=Dg(l,bi.PE_MGRS_MAX),L=oe.ensureInt32(D),N=oe._pe_geog_to_mgrs_extended(E,l,P,y,v,x,L);if(N)for(let B=0;B<l;B++)$[B]=oe.UTF8ToString(D[B]);return N}function r(n,l,d,y,v){oe.ensureCache.prepare();let x=0;n&&(x=oe.getPointer(n));const $=d.map(D=>oe.ensureString(D)),E=oe.ensureInt32($),k=oe.ensureFloat64(new Array(2*l)),P=oe._pe_mgrs_to_geog_extended(x,l,E,y,k);return P&&nh(v,l,k),P}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(Nw||(Nw={})),function(t){function e(r,n,l,d,y,v,x){oe.ensureCache.prepare();let $=0;r&&($=oe.getPointer(r));const E=Xc(l),k=oe.ensureFloat64(E),P=Dg(n,bi.PE_MGRS_MAX),D=oe.ensureInt32(P),L=oe._pe_geog_to_usng($,n,k,d,y,v,D);if(L)for(let N=0;N<n;N++)x[N]=oe.UTF8ToString(P[N]);return L}function i(r,n,l,d){oe.ensureCache.prepare();let y=0;r&&(y=oe.getPointer(r));const v=l.map(k=>oe.ensureString(k)),x=oe.ensureInt32(v),$=oe.ensureFloat64(new Array(2*n)),E=oe._pe_usng_to_geog(y,n,x,$);return E&&nh(d,n,$),E}t.geogToUsng=e,t.usngToGeog=i}(A4||(A4={})),function(t){function e(){t.PE_UTM_OPTS_NONE=oe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=oe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=oe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,l,d,y,v){oe.ensureCache.prepare();let x=0;n&&(x=oe.getPointer(n));const $=Xc(d),E=oe.ensureFloat64($),k=Dg(l,bi.PE_UTM_MAX),P=oe.ensureInt32(k),D=oe._pe_geog_to_utm(x,l,E,y,P);if(D)for(let L=0;L<l;L++)v[L]=oe.UTF8ToString(k[L]);return D}function r(n,l,d,y,v){oe.ensureCache.prepare();let x=0;n&&(x=oe.getPointer(n));const $=d.map(D=>oe.ensureString(D)),E=oe.ensureInt32($),k=oe.ensureFloat64(new Array(2*l)),P=oe._pe_utm_to_geog(x,l,E,y,k);return P&&nh(v,l,k),P}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(zw||(zw={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=oe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=oe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=oe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=oe.PePCSInfo.prototype.PE_POLE_POINT}function r(n,l=t.PE_PCSINFO_OPTION_DOMAIN){let d=null,y=null;return e.has(n)&&(y=e.get(n),y[l]&&(d=y[l])),d||(d=oe.PePCSInfo.prototype.generate(n,l),y||(y=[],e.set(n,y)),y[l]=d),d}t.init=i,t.generate=r}(Vw||(Vw={})),function(t){function e(){return oe.PeVersion.prototype.version_string()}t.versionString=e}(k4||(k4={}));const yre=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return M4},get PeDefs(){return bi},get PeFactory(){return $4},get PeGCSExtent(){return nj},get PeGTTransformations(){return I4},get PeGTlistExtended(){return Fw},get PeGTlistExtendedEntry(){return T4},get PeNotationDms(){return E4},get PeNotationMgrs(){return Nw},get PeNotationUsng(){return A4},get PeNotationUtm(){return zw},get PePCSInfo(){return Vw},get PeVersion(){return k4},_init:oj,get _pe(){return oe},isLoaded:B7,isSupported:fre,load:sj},Symbol.toStringTag,{value:"Module"})),uu=Xt.radius,ho=Xt.eccentricitySquared,mre={a1:uu*ho,a2:uu*ho*uu*ho,a3:uu*ho*ho/2,a4:uu*ho*uu*ho*2.5,a5:uu*ho+uu*ho*ho/2,a6:1-ho};1/294.9786982,1/298.257222101,Xt.radius,Xt.flattening,Ih.radius,Ih.flattening,1/192.0430107526882,Ll.radius,Ll.flattening,1/10.2079945799458,1/43.61604095563141,Ll.radius;let Rg=0,B3=class P4{static fromGE(e){const i=new P4;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Rg++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Rg++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Rg++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Rg++}getInverse(){const e=new P4;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Bw=class Iy{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new Iy;let r="";for(const n of e.steps){const l=B3.fromGE(n);i.steps.push(l),r+=l.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof B3?this.steps.push(i):this.steps.push(new B3({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new Iy;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[Iy.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const l of this.steps)r+=l.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[Iy.cacheKey(e,i)];return n===void 0?null:n}};function G7(t,e,i){if(e==null||i==null||i.vcsWkid||Ji(e,i))return null;const r=R0(e)/R0(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>gre(n,r);case"polyline":case"esriGeometryPolyline":return n=>bre(n,r);case"polygon":case"esriGeometryPolygon":return n=>vre(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>wre(n,r);case"extent":case"esriGeometryEnvelope":return n=>_re(n,r);default:return null}}function gre(t,e){t&&t.z!=null&&(t.z*=e)}function vre(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function bre(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function wre(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function _re(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let qo=null,Ch=null,w1=null,ab={};const aj=new J2;function Hd(){return!!qo&&B7()}function Oh(t){return w1==null&&(w1=Promise.all([sj(),le(()=>Promise.resolve().then(()=>P_e),void 0).then(e=>e.g),le(()=>Promise.resolve().then(()=>F_e),void 0)])),w1.then(([,e,{hydratedAdapter:i}])=>{hi(t),Ch=i,qo=e.default,qo._enableProjection(yre),aj.notify()})}function Jh(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:C4(Ch,t,t[0].spatialReference,e,i,r):C4(Ch,[t],t.spatialReference,e,i,r)[0]}function C4(t,e,i,r,n=null,l=null){if(i==null||r==null)return e;if(Jl(i,r,n))return e.map(d=>dj(d,i,r));if(n==null){const d=Bw.cacheKey(i,r);ab[d]!==void 0?n=ab[d]:((n=uj(i,r,void 0))==null&&(n=new Bw),ab[d]=n)}if(qo==null||t==null)throw new w_;return l!=null?qo._project(t,e,i,r,n,l):qo._project(t,e,i,r,n)}function xre(t,e){const i=lj([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function lj(t,e){if(!Hd()){for(const i of t)if(i!=null&&!Ji(i.spatialReference,e)&&Cr(i.spatialReference)&&Cr(e)&&!Jl(i.spatialReference,e))return nt(aj),{pending:Oh(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Ji(i.spatialReference,e)?i:Cr(i.spatialReference)&&Cr(e)?hj(i,e):null)}}function uj(t,e,i=null){if(t==null||e==null)return null;if(qo==null||Ch==null)throw new w_;const r=qo._getTransformation(Ch,t,e,i,i==null?void 0:i.spatialReference);return r!==null?Bw.fromGE(r):null}function Sre(t,e,i=null){if(qo==null||Ch==null)throw new w_;const r=qo._getTransformationBySuitability(Ch,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const l of r)n.push(Bw.fromGE(l));return n}return[]}let w_=class extends ne{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var ee;function Mre(){qo=null,Ch=null,w1=null,ab={}}(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(ee||(ee={}));const $re={get loadPromise(){return w1}};function hj(t,e){try{const i=Jh(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=G7(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof w_))throw i;return null}}function Jl(t,e,i){return!i&&(!!Ji(t,e)||Cr(t)&&Cr(e)&&!!H7(t,e,J7))}async function cj(t,e,i,r){if(Hd())return RT(r);if(Array.isArray(t)){for(const{source:n,dest:l,geographicTransformation:d}of t)if(!Jl(n,l,d))return Oh(r)}else if(!Jl(t,e,i))return Oh(r);return RT(r)}function Tre(t,e){switch(H7(t,e,J7)){case Jt:return"copy3";case fh:return"wgs84ToSphericalECEF";case Dd:return"wgs84ToWebMercator";case ph:return"wgs84ToPlateCarree";case mh:return"wgs84ToWGS84ECEF";case wd:return"webMercatorToWGS84";case _j:return"webMercatorToSphericalECEF";case xj:return"webMercatorToWGS84ECEF";case Mj:return"webMercatorToPlateCarree";case gh:return"wgs84ECEFToWGS84";case Ij:return"wgs84ECEFToSphericalECEF";case Ej:return"wgs84ECEFToWebMercator";case yh:return"sphericalECEFToWGS84";case $j:return"sphericalECEFToWebMercator";case F4:return"sphericalMarsPCPFToMars2000";case j4:return"sphericalMoonPCPFToMoon2000";case Tj:return"sphericalECEFToWGS84ECEF";case R4:return"mars2000ToSphericalPCPF";case D4:return"moon2000ToSphericalPCPF";default:return null}}function dj(t,e,i){return t?"x"in t?pj(t,e,new lt,i,0):"xmin"in t?gj(t,e,new Ct,i,0):"rings"in t?mj(t,e,new Va,i,0):"paths"in t?yj(t,e,new cn,i,0):"points"in t?fj(t,e,new km,i,0):null:null}function Ire(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&pj(t,t.spatialReference,e,i,r)!=null}function pj(t,e,i,r,n){Mt[0]=t.x,Mt[1]=t.y;const l=t.z;return Mt[2]=l!==void 0?l:n,Qo(Mt,e,0,Mt,r,0,1)?(i.x=Mt[0],i.y=Mt[1],i.spatialReference=r,l===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Mt[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function Ere(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&fj(t,t.spatialReference,e,i,r)!=null}function fj(t,e,i,r,n){const{points:l,hasZ:d,hasM:y}=t,v=[],x=l.length,$=[];for(const E of l)$.push(E[0],E[1],d?E[2]:n);if(!Qo($,e,0,$,r,0,x))return null;for(let E=0;E<x;++E){const k=3*E,P=$[k],D=$[k+1];d&&y?v.push([P,D,$[k+2],l[E][3]]):d?v.push([P,D,$[k+2]]):y?v.push([P,D,l[E][2]]):v.push([P,D])}return i.points=v,i.spatialReference=r,i.hasZ=d,i.hasM=y,i}function Are(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&yj(t,t.spatialReference,e,i,r)!=null}function yj(t,e,i,r,n){const{paths:l,hasZ:d,hasM:y}=t,v=[];return bj(l,d??!1,y??!1,e,v,r,n)?(i.paths=v,i.spatialReference=r,i.hasZ=d,i.hasM=y,i):null}function kre({hasZ:t,spatialReference:e,paths:i},r,n=0){const l=Ua(e,mf),d=Un[l][ee.WGS84_COMPARABLE_LON_LAT];if(d==null)return!1;const y=t?v=>v:v=>r_(Mt,v[0],v[1],n);for(const v of i){const x=[];for(const $ of v){const E=[0,0,n];d(y($),0,E,0),x.push(E)}r.push(x)}return!0}function Pre({hasZ:t,spatialReference:e,rings:i},r,n=0){const l=Ua(e,mf),d=Un[l][ee.WGS84_COMPARABLE_LON_LAT];if(d==null)return!1;const y=t?v=>v:v=>r_(Mt,v[0],v[1],n);for(const v of i){const x=[];for(const $ of v){const E=[0,0,n];d(y($),0,E,0),x.push(E)}r.push(x)}return!0}function Cre(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&mj(t,t.spatialReference,e,i,r)!=null}function mj(t,e,i,r,n){const{rings:l,hasZ:d,hasM:y}=t,v=[];return bj(l,d??!1,y??!1,e,v,r,n)?(i.rings=v,i.spatialReference=r,i.hasZ=d,i.hasM=y,i):null}function Ore(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&gj(t,t.spatialReference,e,i,r)!=null}function gj(t,e,i,r,n){const{xmin:l,ymin:d,xmax:y,ymax:v,hasZ:x,hasM:$}=t;return O4(l,d,x?t.zmin:n,e,Mt,r)?(i.xmin=Mt[0],i.ymin=Mt[1],x&&(i.zmin=Mt[2]),O4(y,v,x?t.zmax:n,e,Mt,r)?(i.xmax=Mt[0],i.ymax=Mt[1],x&&(i.zmax=Mt[2]),$&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null):null}function Lre(t,e,i){if(e==null||i==null)return null;const r=new lt({spatialReference:i});return Qo(t,e,0,Mt,i,0,1)?(r.x=Mt[0],r.y=Mt[1],r.z=Mt[2],r):null}function Dre(t,e,i){return Qo(t,e,0,Mt,i.spatialReference,0,1)?(i.x=Mt[0],i.y=Mt[1],i.z=Mt[2],i):null}function Rre(t,e,i,r=0){Mt[0]=t.x,Mt[1]=t.y;const n=t.z;return Mt[2]=n!==void 0?n:r,Qo(Mt,t.spatialReference,0,e,i,0,1)}function O4(t,e,i,r,n,l){return ui[0]=t,ui[1]=e,ui[2]=i,Qo(ui,r,0,n,l,0,1)}function L4(t,e,i,r){return!(e==null||r==null||t.length<2)&&(t.length===2&&(ui[0]=t[0],ui[1]=t[1],ui[2]=0,t=ui),Qo(t,e,0,i,r,0,1))}function jre(t,e){Mt[0]=t.x,Mt[1]=t.y;const i=t.z;return Mt[2]=i!==void 0?i:0,vj(Mt,t.spatialReference,e)}function vj(t,e,i){return Fre(t,e,i)}function Fre(t,e,i){if(e==null)return!1;const r=Ua(e,mf),n=Un[r][ee.WGS84_COMPARABLE_LON_LAT];return n!=null&&(n(t,0,ui,0),i!==ui&&(i[0]=ui[0],i[1]=ui[1],i.length>2&&(i[2]=ui[2])),!0)}function Qo(t,e,i,r,n,l,d=1){const y=H7(e,n,J7);if(y==null)return!1;if(y===Jt){if(t===r&&i===l)return!0;const x=i+3*d;for(let $=i,E=l;$<x;$++,E++)r[E]=t[$];return!0}const v=i+3*d;for(let x=i,$=l;x<v;x+=3,$+=3)y(t,x,r,$);return!0}function Nre(t,e,i,r,n){Mw(Mt,t),rL(jg,t,e),L4(Mt,i,Mt,n),L4(jg,i,jg,n),e7(r,jg,Mt),$w(r,r)}function bj(t,e,i,r,n,l,d=0){const y=new Array;for(const x of t)for(const $ of x)y.push($[0],$[1],e?$[2]:d);if(!Qo(y,r,0,y,l,0,y.length/3))return!1;let v=0;n.length=0;for(const x of t){const $=new Array;for(const E of x)e&&i?$.push([y[v++],y[v++],y[v++],E[3]]):e?$.push([y[v++],y[v++],y[v++]]):i?($.push([y[v++],y[v++],E[2]]),v++):($.push([y[v++],y[v++]]),v++);n.push($)}return!0}function zre(t,e,i,r){if(e==null||r==null)return!1;const n=Aj(e,r,Xre);if(n.projector===Jt)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],!0;if(n.projector==null)return!1;const{source:l,dest:d}=n;if(d.spatialReferenceId===ee.WEB_MERCATOR){const y=Un[l.spatialReferenceId][ee.WGS84];return y!=null&&(y(t,0,Lo,0),Dd(Lo,0,i,0),i[3]=vE(Lo[1],t[2],t[3],Xt.radius),!0)}if(l.spatialReferenceId!==ee.WGS84&&l.spatialReferenceId!==ee.CGCS2000||d.spatialReferenceId!==ee.PLATE_CARREE){n.projector(t,0,i,0);const y=l.metersPerUnit??1,v=d.metersPerUnit??1;i[3]=t[3]*y/v}else{const y=Un[l.spatialReferenceId][ee.SPHERICAL_ECEF],v=Un[ee.SPHERICAL_ECEF][ee.PLATE_CARREE];let x=t[3];y!=null&&v!=null&&(x=vE(t[1],t[2],t[3],Xt.radius)),n.projector(t,0,i,0),i[3]=x}return!0}function vE(t,e,i,r){const n=r+e;if(n<r/2||i>n)return Number.MAX_VALUE;const l=Math.abs(Vo*t)+Math.asin(i/n);return l>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(l)}function Vre(t,e,i,r){return t!=null&&(Ji(e,r)?(r7(i,t),!0):(ui[0]=t[0],ui[1]=t[1],ui[2]=0,!!Qo(ui,e,0,ui,r,0,1)&&(i[0]=ui[0],i[1]=ui[1],ui[0]=t[2],ui[1]=t[3],ui[2]=0,!!Qo(ui,e,0,ui,r,0,1)&&(i[2]=ui[0],i[3]=ui[1],!0))))}function Bre(t,e,i,r){if(e==null||r==null)return!1;const n=Ua(e,mf),l=Ua(r,kj);if(n===l&&n!==ee.UNKNOWN||Ji(e,r))return i[0]=1,i[1]=1,i[2]=1,!0;if(n===ee.SPHERICAL_ECEF){const d=i_(t),y=d/Math.sqrt(t[0]*t[0]+t[1]*t[1]),v=d/Xt.radius;if(l===ee.WEB_MERCATOR)return i[0]=y*v,i[1]=y*v,i[2]=1,!0;if(l===ee.WGS84||l===ee.CGCS2000){const x=_1;return i[0]=x*y*v,i[1]=x*v,i[2]=1,!0}}else if(n===ee.PLATE_CARREE){if(l===ee.WGS84||l===ee.CGCS2000)return i[0]=_1,i[1]=_1,i[2]=1,!0;if(l===ee.WEB_MERCATOR){const d=t[1]/Xt.radius;return i[0]=1,i[1]=1/Math.cos(d),i[2]=1,!0}}return!1}function Gre(t,e,i,r){if(t==null||r==null)return!1;const n=Ua(t,mf),l=Ua(r,kj);if(n===l&&!bE(l)&&(n!==ee.UNKNOWN||Ji(t,r)))return tj(i,e),!0;if(bE(l)){const d=Un[n][ee.LON_LAT],y=Un[ee.LON_LAT][l];return d!=null&&y!=null&&(d(e,0,Lo,0),y(Lo,0,hu,0),U7(Vo*Lo[0],Vo*Lo[1],i),i[12]=hu[0],i[13]=hu[1],i[14]=hu[2],!0)}if((l===ee.WEB_MERCATOR||l===ee.PLATE_CARREE)&&(n===ee.WGS84||n===ee.CGCS2000&&l===ee.PLATE_CARREE||n===ee.SPHERICAL_ECEF||n===ee.WEB_MERCATOR)){const d=Un[n][ee.LON_LAT],y=Un[ee.LON_LAT][l];return d!=null&&y!=null&&(d(e,0,Lo,0),y(Lo,0,hu,0),n===ee.SPHERICAL_ECEF?wj(Vo*Lo[0],Vo*Lo[1],i):Bm(i),i[12]=hu[0],i[13]=hu[1],i[14]=hu[2],!0)}return!1}function bE(t){return t===ee.SPHERICAL_ECEF||t===ee.SPHERICAL_MARS_PCPF||t===ee.SPHERICAL_MOON_PCPF}function U7(t,e,i){const r=Math.sin(t),n=Math.cos(t),l=Math.sin(e),d=Math.cos(e),y=i;return y[0]=-r,y[4]=-l*n,y[8]=d*n,y[12]=0,y[1]=n,y[5]=-l*r,y[9]=d*r,y[13]=0,y[2]=0,y[6]=d,y[10]=l,y[14]=0,y[3]=0,y[7]=0,y[11]=0,y[15]=1,y}function wj(t,e,i){return U7(t,e,i),Xl(i,i),i}function Ua(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Zl(t,1)),t.wkt===HW.wkt?e.spatialReferenceId=ee.SPHERICAL_ECEF:Q1(t)?e.spatialReferenceId=ee.WGS84:kd(t)?e.spatialReferenceId=ee.WEB_MERCATOR:VW(t)?e.spatialReferenceId=ee.PLATE_CARREE:t.wkt===WW.wkt?e.spatialReferenceId=ee.WGS84_ECEF:t.wkid===Ad.CGCS2000?e.spatialReferenceId=ee.CGCS2000:t.wkt===_O.wkt?e.spatialReferenceId=ee.SPHERICAL_MARS_PCPF:t.wkt===xO.wkt?e.spatialReferenceId=ee.SPHERICAL_MOON_PCPF:BM(t)?e.spatialReferenceId=ee.GCSMARS2000:UM(t)?e.spatialReferenceId=ee.GCSMOON2000:e.spatialReferenceId=ee.UNKNOWN):ee.UNKNOWN}function Jt(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function wd(t,e,i,r){i[r++]=q0*(t[e++]/Xt.radius),i[r++]=q0*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Xt.radius))),i[r]=t[e]}function _j(t,e,i,r){wd(t,e,i,r),fh(i,r,i,r)}function xj(t,e,i,r){wd(t,e,i,r),mh(i,r,i,r)}function Sj(t,e,i,r,n){const l=.4999999*Math.PI,d=zs(Vo*t[e+1],-l,l),y=Math.sin(d);i[r++]=Vo*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+y)/(1-y)),i[r]=t[e+2]}function Dd(t,e,i,r){Sj(t,e,i,r,Xt)}const wE=Xt.radius*Math.PI/180,_1=180/(Xt.radius*Math.PI);function ph(t,e,i,r){i[r]=t[e]*wE,i[r+1]=t[e+1]*wE,i[r+2]=t[e+2]}function ud(t,e,i,r){i[r]=t[e]*_1,i[r+1]=t[e+1]*_1,i[r+2]=t[e+2]}function Mj(t,e,i,r){wd(t,e,i,r),ph(i,r,i,r)}function Ure(t,e,i,r){gh(t,e,i,r),ph(i,r,i,r)}function qre(t,e,i,r){yh(t,e,i,r),ph(i,r,i,r)}function Hre(t,e,i,r){ud(t,e,i,r),fh(i,r,i,r)}function Wre(t,e,i,r){ud(t,e,i,r),Dd(i,r,i,r)}function Jre(t,e,i,r){ud(t,e,i,r),mh(i,r,i,r)}function Yre(t){if(t==null)return!1;const e=Ua(t,mf);return!!Un[e][ee.WGS84_COMPARABLE_LON_LAT]}function Kre(t,e,i,r){const n=Math.cos(i);t[0]=Math.cos(e)*n*r,t[1]=Math.sin(e)*n*r,t[2]=Math.sin(i)*r}function q7(t,e,i,r,n){const l=n+t[e+2],d=Vo*t[e+1],y=Vo*t[e],v=Math.cos(d);i[r++]=Math.cos(y)*v*l,i[r++]=Math.sin(y)*v*l,i[r]=Math.sin(d)*l}function D4(t,e,i,r){q7(t,e,i,r,Ih.radius)}function R4(t,e,i,r){q7(t,e,i,r,Ll.radius)}function fh(t,e,i,r){q7(t,e,i,r,Xt.radius)}function __(t,e,i,r,n){const l=t[e],d=t[e+1],y=t[e+2],v=Math.sqrt(l*l+d*d+y*y),x=wL(y/(v===0?1:v)),$=Math.atan2(d,l);i[r++]=q0*$,i[r++]=q0*x,i[r]=v-n}function j4(t,e,i,r){__(t,e,i,r,Ih.radius)}function F4(t,e,i,r){__(t,e,i,r,Ll.radius)}function yh(t,e,i,r){__(t,e,i,r,Xt.radius)}function $j(t,e,i,r){yh(t,e,i,r),Dd(i,r,i,r)}function Tj(t,e,i,r){yh(t,e,i,r),mh(i,r,i,r)}function Zre(t,e,i,r,n){const l=Vo*t[e],d=Vo*t[e+1],y=t[e+2],v=Math.sin(d),x=Math.cos(d),$=n.radius/Math.sqrt(1-n.eccentricitySquared*v*v);i[r++]=($+y)*x*Math.cos(l),i[r++]=($+y)*x*Math.sin(l),i[r++]=($*(1-n.eccentricitySquared)+y)*v}function mh(t,e,i,r){Zre(t,e,i,r,Xt)}function gh(t,e,i,r){const n=mre,l=t[e],d=t[e+1],y=t[e+2];let v,x,$,E,k,P,D,L,N,B,W,q,Y,ie,se,ue,de,be,we,$e,ke;v=Math.abs(y),x=l*l+d*d,$=Math.sqrt(x),E=x+y*y,k=Math.sqrt(E),$e=Math.atan2(d,l),P=y*y/E,D=x/E,ie=n.a2/k,se=n.a3-n.a4/k,D>.3?(L=v/k*(1+D*(n.a1+ie+P*se)/k),we=Math.asin(L),B=L*L,N=Math.sqrt(1-B)):(N=$/k*(1-P*(n.a5-ie-D*se)/k),we=Math.acos(N),B=1-N*N,L=Math.sqrt(B)),W=1-Xt.eccentricitySquared*B,q=Xt.radius/Math.sqrt(W),Y=n.a6*q,ie=$-q*N,se=v-Y*L,de=N*ie+L*se,ue=N*se-L*ie,be=ue/(Y/W+de),we+=be,ke=de+ue*be/2,y<0&&(we=-we),i[r++]=q0*$e,i[r++]=q0*we,i[r]=ke}function Ij(t,e,i,r){gh(t,e,i,r),fh(i,r,i,r)}function Ej(t,e,i,r){gh(t,e,i,r),Dd(i,r,i,r)}const Un={[ee.WGS84]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Jt,[ee.WGS84_COMPARABLE_LON_LAT]:Jt,[ee.SPHERICAL_ECEF]:fh,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Dd,[ee.PLATE_CARREE]:ph,[ee.WGS84]:Jt,[ee.WGS84_ECEF]:mh},[ee.CGCS2000]:{[ee.CGCS2000]:Jt,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Jt,[ee.WGS84_COMPARABLE_LON_LAT]:Jt,[ee.SPHERICAL_ECEF]:fh,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:ph,[ee.WGS84]:null,[ee.WGS84_ECEF]:mh},[ee.GCSMARS2000]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:Jt,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Jt,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:R4,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.GCSMOON2000]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:Jt,[ee.LON_LAT]:Jt,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:D4,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.WEB_MERCATOR]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:wd,[ee.WGS84_COMPARABLE_LON_LAT]:wd,[ee.SPHERICAL_ECEF]:_j,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Jt,[ee.PLATE_CARREE]:Mj,[ee.WGS84]:wd,[ee.WGS84_ECEF]:xj},[ee.WGS84_ECEF]:{[ee.CGCS2000]:gh,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:gh,[ee.WGS84_COMPARABLE_LON_LAT]:gh,[ee.SPHERICAL_ECEF]:Ij,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Ej,[ee.PLATE_CARREE]:Ure,[ee.WGS84]:gh,[ee.WGS84_ECEF]:Jt},[ee.SPHERICAL_ECEF]:{[ee.CGCS2000]:yh,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:yh,[ee.WGS84_COMPARABLE_LON_LAT]:yh,[ee.SPHERICAL_ECEF]:Jt,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:$j,[ee.PLATE_CARREE]:qre,[ee.WGS84]:yh,[ee.WGS84_ECEF]:Tj},[ee.SPHERICAL_MARS_PCPF]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:F4,[ee.GCSMOON2000]:null,[ee.LON_LAT]:F4,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:Jt,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.SPHERICAL_MOON_PCPF]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:j4,[ee.LON_LAT]:j4,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:Jt,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.UNKNOWN]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:null,[ee.WGS84_COMPARABLE_LON_LAT]:null,[ee.SPHERICAL_ECEF]:null,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:Jt,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:null,[ee.WGS84]:null,[ee.WGS84_ECEF]:null},[ee.LON_LAT]:{[ee.CGCS2000]:Jt,[ee.GCSMARS2000]:Jt,[ee.GCSMOON2000]:Jt,[ee.LON_LAT]:Jt,[ee.WGS84_COMPARABLE_LON_LAT]:Jt,[ee.SPHERICAL_ECEF]:fh,[ee.SPHERICAL_MARS_PCPF]:R4,[ee.SPHERICAL_MOON_PCPF]:D4,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Dd,[ee.PLATE_CARREE]:ph,[ee.WGS84]:Jt,[ee.WGS84_ECEF]:mh},[ee.WGS84_COMPARABLE_LON_LAT]:{[ee.CGCS2000]:null,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:Jt,[ee.WGS84_COMPARABLE_LON_LAT]:Jt,[ee.SPHERICAL_ECEF]:fh,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:null,[ee.PLATE_CARREE]:ph,[ee.WGS84]:Jt,[ee.WGS84_ECEF]:mh},[ee.PLATE_CARREE]:{[ee.CGCS2000]:ud,[ee.GCSMARS2000]:null,[ee.GCSMOON2000]:null,[ee.LON_LAT]:ud,[ee.WGS84_COMPARABLE_LON_LAT]:ud,[ee.SPHERICAL_ECEF]:Hre,[ee.SPHERICAL_MARS_PCPF]:null,[ee.SPHERICAL_MOON_PCPF]:null,[ee.UNKNOWN]:null,[ee.WEB_MERCATOR]:Wre,[ee.PLATE_CARREE]:Jt,[ee.WGS84]:ud,[ee.WGS84_ECEF]:Jre}};function H7(t,e,i=W7()){return t==null||e==null?null:Aj(t,e,i).projector}function Aj(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=Ua(t,i.source),n=Ua(e,i.dest);return r===ee.UNKNOWN&&n===ee.UNKNOWN?Ji(t,e)?i.projector=Jt:i.projector=null:i.projector=Un[r][n],i}function W7(){return{source:{spatialReference:null,spatialReferenceId:ee.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ee.UNKNOWN,metersPerUnit:1},projector:Jt}}const mf={spatialReference:null,spatialReferenceId:ee.UNKNOWN},kj={spatialReference:null,spatialReferenceId:ee.UNKNOWN},J7=W7(),Xre=W7(),Vo=XK(1),q0=bL(1),ui=ia(),Lo=ia(),hu=ia(),Mt=ia(),jg=ia(),$4e=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:Yre,canProjectWithoutEngine:Jl,computeENUToSphericalPCPFLocalRotation:U7,computeSphericalPCPFToENULocalRotation:wj,computeTranslationToOriginAndRotation:Gre,getProjectorName:Tre,getTransformation:uj,getTransformations:Sre,initializeProjection:cj,isLoaded:Hd,load:Oh,localLinearScaleFactors:Bre,lonLatToSphericalPCPF:Kre,lonLatToWebMercatorComparable:Sj,project:Jh,projectBoundingRect:Vre,projectBoundingSphere:zre,projectBuffer:Qo,projectDirection:Nre,projectExtent:Ore,projectMany:C4,projectMultipoint:Ere,projectOrLoad:xre,projectOrLoadMany:lj,projectPoint:Ire,projectPointToVector:Rre,projectPointToWGS84ComparableLonLat:jre,projectPolygon:Cre,projectPolygonToWGS84ComparableLonLat:Pre,projectPolyline:Are,projectPolylineToWGS84ComparableLonLat:kre,projectVectorToDehydratedPoint:Dre,projectVectorToPoint:Lre,projectVectorToVector:L4,projectVectorToWGS84ComparableLonLat:vj,projectWithoutEngine:dj,projectXYZToVector:O4,sphericalPCPFtoLonLatElevation:__,test:$re,tryProjectWithZConversion:hj,unload:Mre},Symbol.toStringTag,{value:"Module"}));var N4;let _a=N4=class extends ge{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new N4({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_a.prototype,"cols",void 0),g([S({type:Lt,json:{write:!0}})],_a.prototype,"level",void 0),g([S({type:String,json:{write:!0}})],_a.prototype,"levelValue",void 0),g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_a.prototype,"origin",void 0),g([S({type:Number,json:{write:!0}})],_a.prototype,"resolution",void 0),g([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_a.prototype,"rows",void 0),g([S({type:Number,json:{write:!0}})],_a.prototype,"scale",void 0),_a=N4=g([J("esri.layers.support.LOD")],_a);const Yu=_a;let Qre=class{constructor(e,i,r,n,l=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=l}};var Pu;const _E=new xt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Nr=Pu=class extends ge{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:n=ut.WebMercator,numLODs:l=24}=t;if(!Cr(n)){const E=[];if(i)for(let k=0;k<i.length;k++){const P=i[k];E.push(new Yu({level:k,scale:P,resolution:P}))}else{let k=5e-4;for(let P=l-1;P>=0;P--)E.unshift(new Yu({level:P,scale:k,resolution:k})),k*=2}return new Pu({dpi:96,lods:E,origin:new lt(0,0,n),size:[r,r],spatialReference:n})}const d=Uo(n),y=t.origin?new lt({x:t.origin.x,y:t.origin.y,spatialReference:n}):new lt(d?{x:d.origin[0],y:d.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),v=96,x=1/(Zl(n)*39.37*v),$=[];if(i)for(let E=0;E<i.length;E++){const k=i[E],P=k*x;$.push(new Yu({level:E,scale:k,resolution:P}))}else{let E=wO(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const k=Math.ceil(l/e);$.push(new Yu({level:0,scale:E,resolution:E*x}));for(let P=1;P<k;P++){const D=E/2**e,L=D*x;$.push(new Yu({level:P,scale:D,resolution:L})),E=D}}return new Pu({dpi:v,lods:$,origin:y,size:[r,r],spatialReference:n})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=Uo(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return lt.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],n=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(l=>{r.push(l.scale),e=l.scale>e?l.scale:e,i=l.scale<i?l.scale:i,n[l.level]=l})),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const n=e[r],l=e[r+1];if(n<=t)return r;if(l===t)return r+1;if(n>t&&l<t)return r+Math.log(n/t)/Math.log(n/l)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const n=this.lodAt(t);if(!n)return null;let l,d;if(typeof e=="number")l=e,d=i;else if(Ji(e.spatialReference,this.spatialReference))l=e.x,d=e.y,r=i;else{const x=Q2(e,this.spatialReference);if(x==null)return null;l=x.x,d=x.y,r=i}const y=n.resolution*this.size[0],v=n.resolution*this.size[1];return r||(r=new Qre(null,0,0,0,za())),r.level=t,r.row=Math.floor((this.origin.y-d)/v+.001),r.col=Math.floor((l-this.origin.x)/y+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=Pu.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Pu.ExtrapolateOptions.POWER_OF_TWO){const d=this.lods[this.lods.length-1];d.level<t.level&&(i=d)}if(!i)return;const r=t.level-i.level,n=i.resolution*this.size[0]/2**r,l=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=za()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*l,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+l}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],l=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*l,t[2]=t[0]+n,t[3]=t[1]+l,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return Pu.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const l=this.lods[n],d=l.resolution*e;i.push(new Yu({level:l.level,scale:l.scale,resolution:d}))}return new Pu({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};g([S({type:Number,json:{write:!0}})],Nr.prototype,"compressionQuality",void 0),g([S({type:Number,json:{write:!0}})],Nr.prototype,"dpi",void 0),g([S({type:String,json:{read:_E.read,write:_E.write,origins:{"web-scene":{read:!1,write:!1}}}})],Nr.prototype,"format",void 0),g([S({readOnly:!0})],Nr.prototype,"isWrappable",null),g([S({type:lt,json:{write:!0}})],Nr.prototype,"origin",void 0),g([xe("origin")],Nr.prototype,"readOrigin",null),g([S({type:[Yu],value:null,json:{write:!0}})],Nr.prototype,"lods",null),g([S({readOnly:!0})],Nr.prototype,"scales",void 0),g([S({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Nr.prototype,"size",void 0),g([xe("size",["rows","cols"])],Nr.prototype,"readSize",null),g([Ae("size",{cols:{type:Lt},rows:{type:Lt}})],Nr.prototype,"writeSize",null),g([S({type:ut,json:{write:!0}})],Nr.prototype,"spatialReference",void 0),Nr=Pu=g([J("esri.layers.support.TileInfo")],Nr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Nr||(Nr={}));const ese=Nr,lb={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},G3={xsmall:544,small:768,medium:992,large:1200};function tse(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function U3(t,e){return e?lb[t].valueToClassName[e].split(" "):[]}const ise=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Gs,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=G3}initialize(){this._breakpointsHandles.add(me(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),st))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=ri(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=tse(i);if(!r){const n=JSON.stringify(G3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:G3,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=_s.acquire(),r=_s.acquire();let n,l=!1;for(n in lb){const d=this[n],y=lb[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});d!==y&&(l=!0,this[n]=y,U3(n,d).forEach(v=>r.push(v)),U3(n,y).forEach(v=>i.push(v)))}l&&(this._applyClassNameChanges(i,r),_s.release(i),_s.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(l=>n.classList.remove(l)),i.forEach(l=>n.classList.add(l)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in lb)U3(r,this[r]).forEach(n=>i.classList.remove(n))}};return g([S()],e.prototype,"breakpoints",null),g([S()],e.prototype,"orientation",void 0),g([S()],e.prototype,"widthBreakpoint",void 0),g([S()],e.prototype,"heightBreakpoint",void 0),e=g([J("esri.views.BreakpointsOwner")],e),e};function Y7(t){return typeof t=="string"?document.getElementById(t):t??null}function Pj(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function xE(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function SE(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let w0=class extends Be{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Gs,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,r={}){return this._installWatch(e,i,r,me)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Xn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const l=++this._handleId;return this._handles.add([Vs(e,"after-changes",this._createSyncUpdatingCallback(),qd),Vs(e,"change",i,{onListenerAdd:r?d=>i({added:d.toArray(),removed:[]}):void 0,onListenerRemove:n?d=>i({added:[],removed:d.toArray()}):void 0})],l),Vl(()=>this._handles.remove(l))}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(Fg)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this._handles.remove(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,r={},n){const l=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,l);const d=n(e,i,r);return this._handles.add(d,l),Vl(()=>this._handles.remove(l))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=me(e,r,{sync:!0,equals:()=>!1});return this._handles.add(n,i),n}_createSyncUpdatingCallback(){return()=>{this._handles.remove(Fg),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(tf(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(Fg))}),Fg)}}};g([S({readOnly:!0})],w0.prototype,"updating",void 0),w0=g([J("esri.core.support.WatchUpdatingTracking")],w0);const Fg=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var rse=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Qc={exports:{}},Ri={},hm={exports:{}},Wd={};function Cj(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function sse(t,e,i){}function nse(t,e,i){}var ose=/javascript\s*\:/img;function ase(t,e){return ose.test(e)?"":e}Wd.whiteList=Cj();Wd.getDefaultWhiteList=Cj;Wd.onAttr=sse;Wd.onIgnoreAttr=nse;Wd.safeAttrValue=ase;var lse={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},zf=lse;function use(t,e){t=zf.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,l=0,d="";function y(){if(!r){var $=zf.trim(t.slice(n,l)),E=$.indexOf(":");if(E!==-1){var k=zf.trim($.slice(0,E)),P=zf.trim($.slice(E+1));if(k){var D=e(n,d.length,k,P,$);D&&(d+=D+"; ")}}}n=l+1}for(;l<i;l++){var v=t[l];if(v==="/"&&t[l+1]==="*"){var x=t.indexOf("*/",l+2);if(x===-1)break;l=x+1,n=l+1,r=!1}else v==="("?r=!0:v===")"?r=!1:v===";"?r||y():v===`
`&&y()}return zf.trim(d)}var hse=use,Ng=Wd,cse=hse;function ME(t){return t==null}function dse(t){var e={};for(var i in t)e[i]=t[i];return e}function Oj(t){t=dse(t||{}),t.whiteList=t.whiteList||Ng.whiteList,t.onAttr=t.onAttr||Ng.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Ng.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Ng.safeAttrValue,this.options=t}Oj.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,l=i.onIgnoreAttr,d=i.safeAttrValue,y=cse(t,function(v,x,$,E,k){var P=r[$],D=!1;if(P===!0?D=P:typeof P=="function"?D=P(E):P instanceof RegExp&&(D=P.test(E)),D!==!0&&(D=!1),E=d($,E),!!E){var L={position:x,sourcePosition:v,source:k,isWhite:D};if(D){var N=n($,E,L);return ME(N)?$+":"+E:N}else{var N=l($,E,L);if(!ME(N))return N}}});return y};var pse=Oj;(function(t,e){var i=Wd,r=pse;function n(d,y){var v=new r(y);return v.process(d)}e=t.exports=n,e.FilterCSS=r;for(var l in i)e[l]=i[l]})(hm,hm.exports);var K7={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},fse=hm.exports.FilterCSS,yse=hm.exports.getDefaultWhiteList,Gw=K7;function Lj(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Dj=new fse;function mse(t,e,i){}function gse(t,e,i){}function vse(t,e,i){}function bse(t,e,i){}function Rj(t){return t.replace(_se,"&lt;").replace(xse,"&gt;")}function wse(t,e,i,r){if(i=Bj(i),e==="href"||e==="src"){if(i=Gw.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(zg.lastIndex=0,zg.test(i))return""}else if(e==="style"){if($E.lastIndex=0,$E.test(i)||(TE.lastIndex=0,TE.test(i)&&(zg.lastIndex=0,zg.test(i))))return"";r!==!1&&(r=r||Dj,i=r.process(i))}return i=Gj(i),i}var _se=/</g,xse=/>/g,Sse=/"/g,Mse=/&quot;/g,$se=/&#([a-zA-Z0-9]*);?/gim,Tse=/&colon;?/gim,Ise=/&newline;?/gim,zg=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,$E=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,TE=/u\s*r\s*l\s*\(.*/gi;function jj(t){return t.replace(Sse,"&quot;")}function Fj(t){return t.replace(Mse,'"')}function Nj(t){return t.replace($se,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function zj(t){return t.replace(Tse,":").replace(Ise," ")}function Vj(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return Gw.trim(e)}function Bj(t){return t=Fj(t),t=Nj(t),t=zj(t),t=Vj(t),t}function Gj(t){return t=jj(t),t=Rj(t),t}function Ese(){return""}function Ase(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(d){return i?!0:Gw.indexOf(t,d)!==-1}var n=[],l=!1;return{onIgnoreTag:function(d,y,v){if(r(d))if(v.isClosing){var x="[/removed]",$=v.position+x.length;return n.push([l!==!1?l:v.position,$]),l=!1,x}else return l||(l=v.position),"[removed]";else return e(d,y,v)},remove:function(d){var y="",v=0;return Gw.forEach(n,function(x){y+=d.slice(v,x[0]),v=x[1]}),y+=d.slice(v),y}}}function kse(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function Pse(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Ri.whiteList=Lj();Ri.getDefaultWhiteList=Lj;Ri.onTag=mse;Ri.onIgnoreTag=gse;Ri.onTagAttr=vse;Ri.onIgnoreTagAttr=bse;Ri.safeAttrValue=wse;Ri.escapeHtml=Rj;Ri.escapeQuote=jj;Ri.unescapeQuote=Fj;Ri.escapeHtmlEntities=Nj;Ri.escapeDangerHtml5Entities=zj;Ri.clearNonPrintableCharacter=Vj;Ri.friendlyAttrValue=Bj;Ri.escapeAttrValue=Gj;Ri.onIgnoreTagStripAll=Ese;Ri.StripTagBody=Ase;Ri.stripCommentTag=kse;Ri.stripBlankChar=Pse;Ri.cssFilter=Dj;Ri.getDefaultCSSWhiteList=yse;var x_={},Ku=K7;function Cse(t){var e=Ku.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Ku.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Ose(t){return t.slice(0,2)==="</"}function Lse(t,e,i){var r="",n=0,l=!1,d=!1,y=0,v=t.length,x="",$="";e:for(y=0;y<v;y++){var E=t.charAt(y);if(l===!1){if(E==="<"){l=y;continue}}else if(d===!1){if(E==="<"){r+=i(t.slice(n,y)),l=y,n=y;continue}if(E===">"){r+=i(t.slice(n,l)),$=t.slice(l,y+1),x=Cse($),r+=e(l,r.length,x,$,Ose($)),n=y+1,l=!1;continue}if(E==='"'||E==="'")for(var k=1,P=t.charAt(y-k);P.trim()===""||P==="=";){if(P==="="){d=E;continue e}P=t.charAt(y-++k)}}else if(E===d){d=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var Dse=/[^a-zA-Z0-9\\_:.-]/gim;function Rse(t,e){var i=0,r=0,n=[],l=!1,d=t.length;function y(k,P){if(k=Ku.trim(k),k=k.replace(Dse,"").toLowerCase(),!(k.length<1)){var D=e(k,P||"");D&&n.push(D)}}for(var v=0;v<d;v++){var x=t.charAt(v),$,E;if(l===!1&&x==="="){l=t.slice(i,v),i=v+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:Fse(t,v+1);continue}if(l!==!1&&v===r){if(E=t.indexOf(x,v+1),E===-1)break;$=Ku.trim(t.slice(r+1,E)),y(l,$),l=!1,v=E,i=v+1;continue}if(/\s|\n|\t/.test(x))if(t=t.replace(/\s|\n|\t/g," "),l===!1)if(E=jse(t,v),E===-1){$=Ku.trim(t.slice(i,v)),y($),l=!1,i=v+1;continue}else{v=E-1;continue}else if(E=Nse(t,v-1),E===-1){$=Ku.trim(t.slice(i,v)),$=IE($),y(l,$),l=!1,i=v+1;continue}else continue}return i<t.length&&(l===!1?y(t.slice(i)):y(l,IE(Ku.trim(t.slice(i))))),Ku.trim(n.join(" "))}function jse(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function Fse(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function Nse(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function zse(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function IE(t){return zse(t)?t.substr(1,t.length-2):t}x_.parseTag=Lse;x_.parseAttr=Rse;var Vse=hm.exports.FilterCSS,Do=Ri,Uj=x_,Bse=Uj.parseTag,Gse=Uj.parseAttr,ub=K7;function Vg(t){return t==null}function Use(t){var e=ub.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=ub.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=ub.trim(t.slice(0,-1))),{html:t,closing:i}}function qse(t){var e={};for(var i in t)e[i]=t[i];return e}function Hse(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function qj(t){t=qse(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Do.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Hse(t.whiteList||t.allowList):t.whiteList=Do.whiteList,t.onTag=t.onTag||Do.onTag,t.onTagAttr=t.onTagAttr||Do.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Do.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Do.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Do.safeAttrValue,t.escapeHtml=t.escapeHtml||Do.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new Vse(t.css))}qj.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,l=i.onIgnoreTag,d=i.onTagAttr,y=i.onIgnoreTagAttr,v=i.safeAttrValue,x=i.escapeHtml,$=e.cssFilter;i.stripBlankChar&&(t=Do.stripBlankChar(t)),i.allowCommentTag||(t=Do.stripCommentTag(t));var E=!1;i.stripIgnoreTagBody&&(E=Do.StripTagBody(i.stripIgnoreTagBody,l),l=E.onIgnoreTag);var k=Bse(t,function(P,D,L,N,B){var W={sourcePosition:P,position:D,isClosing:B,isWhite:Object.prototype.hasOwnProperty.call(r,L)},q=n(L,N,W);if(!Vg(q))return q;if(W.isWhite){if(W.isClosing)return"</"+L+">";var Y=Use(N),ie=r[L],se=Gse(Y.html,function(ue,de){var be=ub.indexOf(ie,ue)!==-1,we=d(L,ue,de,be);return Vg(we)?be?(de=v(L,ue,de,$),de?ue+'="'+de+'"':ue):(we=y(L,ue,de,be),Vg(we)?void 0:we):we});return N="<"+L,se&&(N+=" "+se),Y.closing&&(N+=" /"),N+=">",N}else return q=l(L,N,W),Vg(q)?x(N):q},x);return E&&(k=E.remove(k)),k};var Wse=qj;(function(t,e){var i=Ri,r=x_,n=Wse;function l(y,v){var x=new n(v);return x.process(y)}e=t.exports=l,e.filterXSS=l,e.FilterXSS=n,function(){for(var y in i)e[y]=i[y];for(var v in r)e[v]=r[v]}();function d(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}d()&&(self.filterXSS=t.exports)})(Qc,Qc.exports);var Jse=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(l,d,y,v){return l==="a"&&d==="href"||(l==="img"||l==="source")&&d==="src"?r.sanitizeUrl(y):Qc.exports.safeAttrValue(l,d,y,v)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(l){l==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[l]=e[l]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new Qc.exports.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,l=this._trim(e.substring(0,e.indexOf(":"))),d=e==="/",y=/^#/.test(e),v=l&&this.allowedProtocols.indexOf(l.toLowerCase())>-1;return d||y||v?Qc.exports.escapeAttrValue(e):!l&&!n?Qc.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):Qc.exports.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,l=void 0;if(Array.isArray(e))l=e.reduce(function(y,v){var x=r.validate(v,i);return x.isValid?y.concat([v]):(n=!0,y.concat([x.sanitized]))},[]);else if(rse(e)){var d=Object.keys(e);l=d.reduce(function(y,v){var x=e[v],$=r.validate(x,i);return $.isValid?y[v]=x:(n=!0,y[v]=$.sanitized),y},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?l:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const S_=new Map;function Hj(){S_.clear()}function Yse(t){return S_.get(t)}function Kse(t,e){S_.set(t,e)}function q3(t){S_.delete(t)}var Rd,H0,Zse=function(t){if("WebkitTransition"in t.style)Rd="webkitTransitionEnd",H0="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");Rd="transitionend",H0="animationend"}},Wj=function(t){Rd||Zse(t)},Xse=function(t,e){return e===void 0&&(e=t+"-active"),function(i){Wj(i);var r=!1,n=function(l){r||(r=!0,i.removeEventListener(Rd,n),i.removeEventListener(H0,n),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(Rd,n),i.addEventListener(H0,n),requestAnimationFrame(function(){i.classList.add(e)})}},Qse=function(t,e){return e===void 0&&(e=t+"-active"),function(i,r){Wj(i);var n=!1,l=function(d){n||(n=!0,i.removeEventListener(Rd,l),i.removeEventListener(H0,l),r())};i.classList.add(t),i.addEventListener(Rd,l),i.addEventListener(H0,l),requestAnimationFrame(function(){i.classList.add(e)})}};const ene=ve.getLogger("esri.widgets.support.widgetUtils");function Jj(t){const e=_s.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],l=typeof n;if(l==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(l==="object")for(const d in n)n[d]&&e.push(d)}const i=e.join(" ");return _s.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;Hj();for(const l of r)(n=t.get(l.target))==null||n(l)}),i=(r,n,l)=>(t.has(r)&&ene.error("Already observing element",r),t.set(r,n),e.observe(r,l),Vl(()=>{e.unobserve(r),t.delete(r)}));return(r,n,l)=>{let d=null;return me(()=>typeof r=="function"?r():r,y=>{d==null||d.remove(),y&&(d=i(y,n,l))},Tl)}})();function Lh(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function EE(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Uw(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function tne(t,e){return(t==="enter"?Xse:Qse)(e)}const ine=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],rne=ine.reduce((t,e)=>(t[e]=[],t),{}),sne=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Yj=new Jse({whiteList:rne,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(sne.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function nne(t){return t==="Enter"||t===" "}const Kj="http://www.w3.org/",M_=`${Kj}2000/svg`,Zj=`${Kj}1999/xlink`;let AE=[],Z7=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},X7=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Xj=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},one=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(X7(t[r],e))return r}return-1},H3=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let l=n.properties;if(!(l&&(l.key===void 0?l.bind:l.key))){for(let d=0;d<t.length;d++)if(d!==e){let y=t[d];if(X7(y,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},ane=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},z4=[],V4=!1,Qj=t=>{(t.children||[]).forEach(Qj),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},kE=()=>{V4=!1,z4.forEach(Qj),z4.length=0},PE=t=>{z4.push(t),V4||(V4=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(kE,{timeout:16}):setTimeout(kE,16))},CE=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),PE(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),PE(t))},lne=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),l=n.length;for(let d=0;d<l;d++){let y=n[d],v=e[y];if(y==="className")throw new Error('Property "className" is not supported, use "class".');if(y==="class")B4(t,v,!0);else if(y==="classes"){let x=Object.keys(v),$=x.length;for(let E=0;E<$;E++){let k=x[E];v[k]&&t.classList.add(k)}}else if(y==="styles"){let x=Object.keys(v),$=x.length;for(let E=0;E<$;E++){let k=x[E],P=v[k];P&&(Xj(P),i.styleApplyer(t,k,P))}}else if(y!=="key"&&v!=null){let x=typeof v;x==="function"?(y.lastIndexOf("on",0)===0&&(r&&(v=r(y,v,t,e)),y==="oninput"&&function(){let $=v;v=function(E){$.apply(this,[E]),E.target["oninput-value"]=E.target.value}}()),t[y]=v):i.namespace===M_?y==="href"?t.setAttributeNS(Zj,y,v):t.setAttribute(y,v):x==="string"&&y!=="value"?y==="innerHTML"?t[y]=Yj.sanitize(v):eF(t)&&y in t?t[y]=v:t.setAttribute(y,v):t[y]=v}}};function eF(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let qw,une=(t,e,i)=>{if(e)for(let r of e)o0(r,t,void 0,i)},tF=(t,e,i)=>{une(t,e.children,i),e.text&&(t.textContent=e.text),lne(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},o0=(t,e,i,r)=>{let n,l=0,d=t.vnodeSelector,y=e.ownerDocument;if(d==="")n=t.domNode=y.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let v=0;v<=d.length;++v){let x=d.charAt(v);if(v===d.length||x==="."||x==="#"){let $=d.charAt(l-1),E=d.slice(l,v);$==="."?n.classList.add(E):$==="#"?n.id=E:(E==="svg"&&(r=Z7(r,{namespace:M_})),r.namespace!==void 0?n=t.domNode=y.createElementNS(r.namespace,E):(n=t.domNode=t.domNode||y.createElement(E),E==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),l=v+1}}tF(n,t,r)}},B4=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},hne=(t,e,i,r)=>{if(!i)return;let n=!1,l=Object.keys(i),d=l.length;for(let y=0;y<d;y++){let v=l[y],x=i[v],$=e[v];if(v==="class")$!==x&&(B4(t,$,!1),B4(t,x,!0));else if(v==="classes"){let E=t.classList,k=Object.keys(x),P=k.length;for(let D=0;D<P;D++){let L=k[D],N=!!x[L];N!==!!$[L]&&(n=!0,N?E.add(L):E.remove(L))}}else if(v==="styles"){let E=Object.keys(x),k=E.length;for(let P=0;P<k;P++){let D=E[P],L=x[D];L!==$[D]&&(n=!0,L?(Xj(L),r.styleApplyer(t,D,L)):r.styleApplyer(t,D,""))}}else if(x||typeof $!="string"||(x=""),v==="value"){let E=t[v];E!==x&&(t["oninput-value"]?E===t["oninput-value"]:x!==$)&&(t[v]=x,t["oninput-value"]=void 0),x!==$&&(n=!0)}else if(x!==$){let E=typeof x;E==="function"&&r.eventHandlerInterceptor||(r.namespace===M_?v==="href"?t.setAttributeNS(Zj,v,x):t.setAttribute(v,x):E==="string"?v==="innerHTML"?t[v]=Yj.sanitize(x):v==="role"&&x===""?t.removeAttribute(v):eF(t)&&v in t?t[v]=x:t.setAttribute(v,x):t[v]!==x&&(t[v]=x),n=!0)}}return n},cne=(t,e,i,r,n)=>{if(i===r)return!1;r=r||AE;let l,d=(i=i||AE).length,y=r.length,v=0,x=0,$=!1;for(;x<y;){let E=v<d?i[v]:void 0,k=r[x];if(E!==void 0&&X7(E,k))$=qw(E,k,n)||$,v++;else{let P=one(i,k,v+1);if(P>=0){for(l=v;l<P;l++)CE(i[l]),H3(i,l,t,"removed");$=qw(i[P],k,n)||$,v=P+1}else o0(k,e,v<d?i[v].domNode:void 0,n),ane(k),H3(r,x,t,"added")}x++}if(d>v)for(l=v;l<d;l++)CE(i[l]),H3(i,l,t,"removed");return $};qw=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let l=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let d=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(d,r),e.domNode=d,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=Z7(i,{namespace:M_})),t.text!==e.text&&(l=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,l=cne(e,r,t.children,e.children,i)||l,l=hne(r,t.properties,e.properties,i)||l,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return l&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let Vf=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,qw(r,i,e)},domNode:t.domNode});const dne={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Sp=t=>Z7(dne,t),vh={create:(t,e)=>(e=Sp(e),o0(t,document.createElement("div"),void 0,e),Vf(t,e)),append:(t,e,i)=>(i=Sp(i),o0(e,t,void 0,i),Vf(e,i)),insertBefore:(t,e,i)=>(i=Sp(i),o0(e,t.parentNode,t,i),Vf(e,i)),merge:(t,e,i)=>(i=Sp(i),e.domNode=t,tF(t,e,i),Vf(e,i)),replace:(t,e,i)=>(i=Sp(i),o0(e,t.parentNode,t,i),t.parentNode.removeChild(t),Vf(e,i))},iF,pne=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};iF=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let fne=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?iF(i.children,n=>n.domNode===r):void 0}),i},yne=(t,e,i)=>{let r=function(n){i("domEvent",n);let l=e(),d=pne(n.currentTarget,l.domNode);d.reverse();let y,v=fne(l.getLastRender(),d);return t.scheduleRender(),v&&(y=v.properties[`on${n.type}`].apply(v.properties.bind||this,arguments)),i("domEventProcessed",n),y};return(n,l,d,y)=>r},G4=t=>{let e,i,r=Sp(t),n=r.performanceLogger,l=!0,d=!1,y=[],v=[],x=(E,k,P)=>{let D,L=()=>D;r.eventHandlerInterceptor=yne(e,L,n),D=E(k,P(),r),y.push(D),v.push(P)},$=()=>{if(i=void 0,l){l=!1,n("renderStart",void 0);for(let E=0;E<y.length;E++){let k=v[E]();n("rendered",void 0),y[E].update(k),n("patched",void 0)}n("renderDone",void 0),l=!0}};return e={renderNow:$,scheduleRender:()=>{i||d||(i=requestAnimationFrame($))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),d=!0},resume:()=>{d=!1,l=!0,e.scheduleRender()},append:(E,k)=>{x(vh.append,E,k)},insertBefore:(E,k)=>{x(vh.insertBefore,E,k)},merge:(E,k)=>{x(vh.merge,E,k)},replace:(E,k)=>{x(vh.replace,E,k)},detach:E=>{for(let k=0;k<v.length;k++)if(v[k]===E)return v.splice(k,1),y.splice(k,1)[0];throw new Error("renderFunction was not found")}},e},Cu=class extends Be{constructor(){super(...arguments),this.items=new ze,this._watchUpdatingTracking=new w0,this._callbacks=new Map,this._projector=G4(),this._hiddenProjector=G4()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const l=()=>(n=e.render(),n);r.append(i,l),r.renderNow();const d={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const y=n.domNode.getBoundingClientRect();d.left=y.left,d.top=y.top,d.right=y.right,d.bottom=y.bottom}for(r.detach(l);i.firstChild;)i.removeChild(i.firstChild);return d}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};g([S({readOnly:!0})],Cu.prototype,"surface",void 0),g([S({readOnly:!0})],Cu.prototype,"items",void 0),g([S({readOnly:!0})],Cu.prototype,"needsRender",null),g([S({readOnly:!0})],Cu.prototype,"_watchUpdatingTracking",void 0),g([S({readOnly:!0})],Cu.prototype,"updating",null),Cu=g([J("esri.views.overlay.ViewOverlay")],Cu);const OE=Cu,W3=[0,0];function mne(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return W3[0]=i.left+((e==null?void 0:e.pageXOffset)??0),W3[1]=i.top+((e==null?void 0:e.pageYOffset)??0),W3}function LE(t){t&&(Pj(t),t.parentNode&&t.parentNode.removeChild(t))}function gne(t){const e=document.createElement("div");return t.appendChild(e),e}const Bf=16,Bg=750,vne=512,bne=2,wne=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:Bf,time:Bg},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([me(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),me(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([me(()=>this.ui,(i,r)=>this._handleUIChange(i,r),st),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=ri(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=Y7(i);if(n||typeof i!="string"||ve.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(LE(this.root),this._set("root",null)),this.userContent&&(SE(this.userContent,r),LE(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const l=document.createElement("div");l.className="esri-view-user-storage",SE(n,l),n.appendChild(l),this._set("userContent",l);const d=document.createElement("div");d.className="esri-view-root",n.insertBefore(d,n.firstChild),this._set("root",d);const y=document.createElement("div");y.className="esri-view-surface",y.setAttribute("role","application"),y.tabIndex=0,d.appendChild(y),this._set("surface",y);const v=new OE;d.appendChild(v.surface),this._set("overlay",v),this.addHandles(me(()=>v.needsRender,x=>{x&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=O0({render:()=>{var $;return($=this.overlay)==null?void 0:$.render()}}):this._overlayRenderTaskHandle=Ii(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const l=this.position;return i-=l?l[0]:0,r-=l?l[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const l=this.position;return i+=l?l[0]:0,r+=l?l[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(me(()=>this.root,n=>{i.container=n?gne(n):null},st),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Bf,i.time=Bg,this.addHandles([(()=>{const r=()=>{i.freq=Bf,i.time=Bg};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),O0({prepare:r=>{const n=this._measure(),l=this._freqInfo;if(l.time+=r.deltaTime,n&&(l.freq=Bf,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const d=this._position();l.freq=d||n?Bf:Math.min(Bg,l.freq*bne),!n&&l.freq>=vne&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const l=this.width,d=this.height;return r===l&&n===d?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:l,oldHeight:d,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&mne(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return g([S()],e.prototype,"container",null),g([S({readOnly:!0})],e.prototype,"focused",null),g([S({readOnly:!0})],e.prototype,"height",void 0),g([S({type:OE})],e.prototype,"overlay",void 0),g([S({readOnly:!0})],e.prototype,"position",void 0),g([S({readOnly:!0})],e.prototype,"resizing",void 0),g([S({readOnly:!0})],e.prototype,"root",void 0),g([S({value:null,readOnly:!0})],e.prototype,"size",null),g([S({readOnly:!0})],e.prototype,"surface",void 0),g([S({readOnly:!0})],e.prototype,"suspended",void 0),g([S()],e.prototype,"ui",void 0),g([S({readOnly:!0})],e.prototype,"userContent",void 0),g([S({readOnly:!0})],e.prototype,"width",void 0),g([S()],e.prototype,"widthBreakpoint",void 0),e=g([J("esri.views.DOMContainer")],e),e};let _ne=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],l=new TC(n,void 0,void 0,2,2);this._properties[r]={pool:l,acquired:[]}}this._afterDispatchHandle=Zq(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)FT(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)FT(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}};const xne=ce("mac")?"Meta":"Ctrl",$_={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)$_[t]=String.fromCharCode(t);for(let t=1;t<25;t++)$_[111+t]=`F${t}`;for(let t=65;t<91;t++)$_[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function Sne(t){if(t.key!==void 0)return rh(t);const e=$_[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function Mne(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let $ne=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const DE=ve.getLogger("esri.views.input.InputHandler");let Sr=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?DE.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const l=typeof e=="string"?new $ne(e,n):e,d=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},y=$=>{const E=this._incoming[$.match.eventType];if(E){const k=E.indexOf($);E.splice(k,1),d(),this._manager&&this._manager.updateDependencies()}},v=new Tne(l,r,{onPause:y,onRemove:y,onResume:$=>{const E=this._incoming[$.match.eventType];E&&!E.includes($)&&(E.push($),d(),this._manager&&this._manager.updateDependencies())}});let x=this._incoming[l.eventType];return x||(x=[],this._incoming[l.eventType]=x),x.push(v),d(),this._manager&&this._manager.updateDependencies(),v}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new Ine(e,{onEmit:(r,n,l,d)=>{var y;(y=this._manager)==null||y.emit(r.eventType,n,l,d)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):DE.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},Tne=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Ine=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},Ene=class extends Sr{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},Ane=class{constructor(e,i){this._observable=new J2,this._value=e,this._equalityFunction=i}get value(){return nt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Hw(t,e=uC){return new Ane(t,e)}let kne=class extends Sr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Hw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Pn=class extends Be{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=xne,this._latestPointerType="mouse",this._propertiesPool=new _ne({latestPointerLocation:One},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Sh.INTERNAL){if(this._nameToGroup[e])return void ve.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void ve.getLogger(this).error("Can't register a group of zero handlers");const n={name:e,handlers:i.map(l=>({handler:l,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let l=n.handlers.length-1;l>=0;l--){const d=n.handlers[l];this._handlers.push(d),d.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,v,x,$,E)=>{this._emitInputEvent(d.priorityIndex+1,y,v,x,E,$)},setPointerCapture:(y,v)=>{this._setPointerCapture(n,d,y,v)},setEventCallback:y=>{d.eventCallback=y},setUninstallCallback:y=>{d.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ve.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let l=n.handler.hasSideEffects;if(!l){for(const d of n.handler.outgoingEventTypes)if(e.has(d)){l=!0;break}}if(l)for(const d of n.handler.incomingEventMatches){e.add(d.eventType);for(const y of d.keyModifiers)Mne(y)||i.add(y)}n.active=l}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const l=this._propertiesPool.get("latestPointerLocation");l.x=i,l.y=r,this._set("latestPointerLocation",l)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const l=i;this._pointerCaptures.delete(l.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{if(!r){const y=new Set;this._activeKeyModifiers.forEach(v=>{y.add(v)}),this._activeKeyModifiers=y,r=!0}},l=(y,v)=>{v&&!this._activeKeyModifiers.has(y)?(n(),this._activeKeyModifiers.add(y)):!v&&this._activeKeyModifiers.has(y)&&(n(),this._activeKeyModifiers.delete(y))};if(e==="key-down"||e==="key-up"){const y=i.key;this._keyModifiers.has(y)&&l(y,e==="key-down")}const d=i.native;l("Alt",!(!d||!d.altKey)),l("Ctrl",!(!d||!d.ctrlKey)),l("Shift",!(!d||!d.shiftKey)),l("Meta",!(!d||!d.metaKey)),l("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Ene((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new kne,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Sh.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Sh.INTERNAL)}_setPointerCapture(e,i,r,n){const l=e.name+"-"+i.priorityIndex,d=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,d),n?(d.add(l),d.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):d.has(l)&&(d.delete(l),d.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,l,d){const y=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),v=l!==void 0&&l,x={event:new Pne(i,r,y,d||this._activeKeyModifiers,v),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new jw,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:l}=e.events.pop(),d=n.data&&n.data.eventId;if(!(d!=null&&this._stoppedPropagationEventIds.has(d)))for(e.currentHandler=this._handlersPriority[l];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((r=(i=e.currentHandler).eventCallback)==null||r.call(i,n)),n.shouldStopPropagation()){d!=null&&this._stoppedPropagationEventIds.add(d);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new jw;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const l=r.keyModifiers.filter(d=>n.keyModifiers.includes(d));if(l.length===r.keyModifiers.length!=(l.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};g([S({readOnly:!0})],Pn.prototype,"hasPendingInputs",null),g([S({constructOnly:!0})],Pn.prototype,"eventSource",void 0),g([S({constructOnly:!0})],Pn.prototype,"recognizers",void 0),g([S()],Pn.prototype,"_latestPointerType",void 0),g([S()],Pn.prototype,"latestPointerType",null),g([S()],Pn.prototype,"multiTouchActive",null),g([S({readOnly:!0})],Pn.prototype,"latestPointerLocation",void 0),g([S()],Pn.prototype,"_paused",void 0),g([S({readOnly:!0})],Pn.prototype,"updating",null),Pn=g([J("esri.views.input.InputManager")],Pn);let Pne=class{constructor(e,i,r,n,l){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=l,this._propagationState=Zu.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Zu.STOPPED}shouldStopPropagation(){return(this._propagationState&Zu.STOPPED)!=0}async(e){this._propagationState|=Zu.PAUSED;const i=(r,n)=>{this._propagationState&=~Zu.PAUSED;const l=this._resumeCallback;if(this._resumeCallback=null,l&&l(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&Zu.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Zu;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Zu||(Zu={}));const Sh={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Cne=class{};const One=Cne;function ua(t){return t!=null&&"open"in t&&"declaredClass"in t}function RE(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const Lne=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([me(()=>[this.ui,this.popup],([i,r],n)=>{const l="popup",d="manual";if(n){const[y,v]=n;y&&ua(v)&&(v.view=null,RE(v)&&y.remove(v,l))}i&&ua(r)&&(r.view=this,RE(r)&&i.add(r,{key:l,position:d,internal:!0}))},st),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!ua(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(ua(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),ua(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},Sh.WIDGET)]),b_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{le(()=>Promise.resolve().then(()=>NP),void 0)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){ua(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void ve.getLogger(this).error(new ne("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),ua(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:l,layerViewsAndGraphics:d,clientOnlyGraphics:y}=await this._prepareFetchPopupFeatures(i,r),v=Promise.resolve(y),x=this._queryLayerPopupFeatures(l,d,r),$=x.map(E=>E.promise);return{location:n,clientOnlyGraphics:y,allGraphicsPromise:Dq([v,...$]).then(E=>Array.from(new Set(E.flat()))),promisesPerLayerView:x}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!ua(this.popup))return this._popupSetupTask=AM(async r=>{const{default:n}=await le(()=>Promise.resolve().then(()=>NP),void 0);if(hi(r),!this.popup||ua(this.popup))return;const l=this.popup;delete l.open,delete l.close,this.popup=new n(l)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:l,graphics:d})=>{const y={clientGraphics:d,event:n!=null?n.event:void 0,signal:n!=null?n.signal:void 0,defaultPopupTemplateEnabled:n!=null&&!!n.defaultPopupTemplateEnabled},v=l.fetchPopupFeatures(i,y);return{layerView:l,promise:v}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:l,location:d}=await this._popupHitTestGraphics(i,r),y=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:v,clientOnlyGraphics:x}=this._graphicsPerFetchPopupLayerView(n,y);return{clientOnlyGraphics:x,layerViewsAndGraphics:v,queryArea:l,location:d}}async _popupHitTestGraphics(i,r){const n=await this.popupHitTest(i),l=n.results,d=n.mapPoint,y=l.filter(x=>x.type==="graphic"&&this._isValidPopupGraphic(x.graphic,r)),v=y.length?y[0].mapPoint:null;return{clientGraphics:y.map(x=>x.graphic),queryArea:d,location:d||v}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],l=new Map,d=r.map(y=>{const v=[];return"layer"in y?l.set(y.layer,v):l.set(y.graphics,v),{layerView:y,graphics:v}});for(const y of i){const v=l.get(y.layer)||l.get(y.sourceLayer)||null;v?v.push(y):n.push(y)}return{layerViewsAndGraphics:d,clientOnlyGraphics:n}}};return g([S({cast(i){return!i||ua(i)||typeof i=="object"&&(i.open=r=>(yw(ve.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),i.close=()=>(yw(ve.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),g([S()],e.prototype,"popupEnabled",void 0),e=g([J("esri.views.PopupView")],e),e},jE={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Dne={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Rne(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function _d(t,e,i){const r=new Date(t.getTime());if(e&&i){const n=Dne[i],{getter:l,setter:d,multiplier:y}=n;if(i==="months"){const v=Rne(r.getFullYear(),r.getMonth()+e);r.getDate()>v&&r.setDate(v)}r[d](r[l]()+e*y)}return r}function FE(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function jne(t,e,i){return t===0?0:t*jE[e]/jE[i]}var _o;let sn=_o=class extends ge{static get allTime(){return NE}static get empty(){return Fne}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(_o.allTime)}get isEmpty(){return this.equals(_o.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new _o({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,r=t.start!=null?t.start.getTime():t.start,n=t.end!=null?t.end.getTime():t.end;return e===r&&i===n}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=uh(this.start,r=>FE(r,t)),i=uh(this.end,r=>{const n=FE(r,t);return r.getTime()===n.getTime()?n:_d(n,1,t)});return new _o({start:e,end:i})}intersection(t){var y,v,x,$;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return _o.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((y=this.start)==null?void 0:y.getTime())??-1/0,i=((v=this.end)==null?void 0:v.getTime())??1/0,r=((x=t.start)==null?void 0:x.getTime())??-1/0,n=(($=t.end)==null?void 0:$.getTime())??1/0;let l,d;if(r>=e&&r<=i?l=r:e>=r&&e<=n&&(l=e),i>=r&&i<=n?d=i:n>=e&&n<=i&&(d=n),l!=null&&d!=null&&!isNaN(l)&&!isNaN(d)){const E=new _o;return E.start=l===-1/0?null:new Date(l),E.end=d===1/0?null:new Date(d),E}return _o.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new _o,{start:r,end:n}=this;return r!=null&&(i.start=_d(r,t,e)),n!=null&&(i.end=_d(n,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return NE.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new _o({start:e,end:i})}};g([S({type:Date,json:{write:{allowNull:!0}}})],sn.prototype,"end",void 0),g([xe("end")],sn.prototype,"readEnd",null),g([Ae("end")],sn.prototype,"writeEnd",null),g([S({readOnly:!0,json:{read:!1}})],sn.prototype,"isAllTime",null),g([S({readOnly:!0,json:{read:!1}})],sn.prototype,"isEmpty",null),g([S({type:Date,json:{write:{allowNull:!0}}})],sn.prototype,"start",void 0),g([xe("start")],sn.prototype,"readStart",null),g([Ae("start")],sn.prototype,"writeStart",null),sn=_o=g([J("esri.TimeExtent")],sn);const NE=new sn,Fne=new sn({start:void 0,end:void 0}),eo=sn,ra=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Gs,this._updatingHandles=new w0}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return g([S({readOnly:!0})],e.prototype,"handles",null),g([S({readOnly:!0})],e.prototype,"updatingHandles",null),e=g([J("esri.core.HandleOwner")],e),e};let Ww=class extends ra(Be){};Ww=g([J("esri.core.HandleOwner")],Ww);let x1=class extends ra(ze){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ze.ofType(this.itemType.Type))(e):new ze(e)}};function zE(t,e){return{type:t,cast:tO,set(i){const r=Ed(i,this._get(e),t);r.owner=this,this._set(e,r)}}}g([S()],x1.prototype,"owner",null),x1=g([J("esri.core.support.OwningCollection")],x1);var Ey;const Jw=as()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),rF=Jw.jsonValues.slice();tq(rF,"orthometric");const S1=as()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let xo=Ey=class extends ge{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return Jw.write(t,e,i)}readHeightModel(t,e,i){return Jw.read(t)||(i&&i.messages&&i.messages.push(Nne(t,{context:i})),null)}readHeightUnit(t,e,i){return S1.read(t)||(i&&i.messages&&i.messages.push(VE(t,{context:i})),null)}readHeightUnitService(t,e,i){return TO(t)||S1.read(t)||(i&&i.messages&&i.messages.push(VE(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new Ey({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=iJ(e);return new Ey({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new Ey;return e.read(t,{origin:"web-scene"}),e}};function VE(t,e){return new Kn("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Nne(t,e){return new Kn("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}g([S({type:Jw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:rF,default:"ellipsoidal"}}}})],xo.prototype,"heightModel",void 0),g([Ae("web-scene","heightModel")],xo.prototype,"writeHeightModel",null),g([xe(["web-scene","service"],"heightModel")],xo.prototype,"readHeightModel",null),g([S({type:S1.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:S1.jsonValues,write:S1.write}}}})],xo.prototype,"heightUnit",void 0),g([xe("web-scene","heightUnit")],xo.prototype,"readHeightUnit",null),g([xe("service","heightUnit")],xo.prototype,"readHeightUnitService",null),g([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],xo.prototype,"vertCRS",void 0),g([xe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],xo.prototype,"readVertCRS",null),xo=Ey=g([J("esri.geometry.HeightModelInfo")],xo);const T_=xo;let Yw=class extends x1{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(ve.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Yw=g([J("esri.support.AnalysesCollection")],Yw);let M1=class extends x1{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};g([TM({Type:ur,ensureType:Di(ur)})],M1.prototype,"itemType",void 0),M1=g([J("esri.support.GraphicsCollection")],M1);const BE=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function zne(t,e="system"){if(!t||!BE.has(t.timeZone))return e;const i=BE.get(t.timeZone);return Bne(t.timeZone)||t.respectsDaylightSaving?i:Vne(i)}function Vne(t){const e=yt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${ss.instance(-i).formatOffset(0,"narrow")}`}function Bne(t){return t.startsWith("UTC")}let Ou=class extends si(ge){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:r,respectsDaylightSaving:n}=i;return{timeZone:r,respectsDaylightSaving:n}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:zne(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};g([S()],Ou.prototype,"legacy",void 0),g([xe("legacy",["timeZone"])],Ou.prototype,"readLegacy",null),g([S({type:String,nonNullable:!0})],Ou.prototype,"timeZone",void 0),g([xe("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Ou.prototype,"readTimeZone",null),g([Ae("timeZone")],Ou.prototype,"writeTimeZone",null),Ou=g([J("esri.time.TimeReference")],Ou);const Dh=Ou;let Lu=class extends Be{constructor(e){super(e),this.view=null,this.baseLayerViews=new ze,this.referenceLayerViews=new ze,this._loadingHandle=me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},st)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const e=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};g([S({constructOnly:!0})],Lu.prototype,"view",void 0),g([S({readOnly:!0})],Lu.prototype,"baseLayerViews",void 0),g([S({readOnly:!0})],Lu.prototype,"referenceLayerViews",void 0),g([S({readOnly:!0})],Lu.prototype,"suspended",null),g([S({type:Boolean,readOnly:!0})],Lu.prototype,"updating",null),Lu=g([J("esri.views.BasemapView")],Lu);function Gne(t){return"tryRecycleWith"in t}let Une=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Yn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Hn(this._controller.signal,()=>{const n=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!Gne(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<e.length;n++){const l=e[n];if(l.type!==i)continue;const d=this.layerView.tryRecycleWith(l,{signal:r});if(d){e.splice(n,1),this.layer=l;const y=this.layerView,v=y.view;return this.promise=Promise.race([d.then(()=>(hi(this._controller.signal),l.emit("layerview-destroy",{view:v,layerView:y}),v.emit("layerview-destroy",{view:v,layerView:y}),l.emit("layerview-create",{view:v,layerView:y}),v.emit("layerview-create",{view:v,layerView:y}),y)),new Promise((x,$)=>Hn(this._controller.signal,()=>$(Ei())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,l,d;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let y,v;if(await i.load({signal:e}),"prefetchResources"in i&&await((n=i.prefetchResources)==null?void 0:n.call(i,{signal:e})),Hne(i))y=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ne("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);hi(e),y="default"in E?new E.default({layer:i,view:r}):new E({layer:i,view:r})}const x=()=>{v=Ii(v),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};v=Hn(e,x),hi(e);try{await y.when()}catch(E){throw x(),E}if(!((d=(l=this._map)==null?void 0:l.allLayers)==null?void 0:d.includes(i)))return x(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:r,layerView:y}),r.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:r,error:y}),r.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}},Cn=class extends Be{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new w0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Yn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(tf(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var v,x,$;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],l=this.view.ready,d=E=>{if(E!=null){for(const k of E)if(k){r.add(k);const P=this._layerLayerViewInfoMap.get(k);P&&l?P.start():P||this._recyclingInfoMap.has(k)||n.push(k),"layers"in k&&k.layers&&d(k.layers)}}};for(const E of this._rootCollectionNames)d(this.get(E));for(const[E,k]of this._layerLayerViewInfoMap)if(!r.has(E)){this._layerLayerViewInfoMap.delete(k.layer);const P=k.tryRecycle(n);P?(this.notifyChange("updating"),this._recyclingInfoMap.set(k.layer,k),P.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(k.layer),this._layerLayerViewInfoMap.set(k.layer,k),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(k.layer),k.destroy(),this._reschedule()})):k.destroy()}for(const[E,k]of this._recyclingInfoMap)r.has(E)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(k.layer),k.destroy());for(const E of n)this._createLayerView(E);this._refreshCollections();const y=[(v=i==null?void 0:i.ground)==null?void 0:v.layers,(x=i==null?void 0:i.basemap)==null?void 0:x.baseLayers,($=i==null?void 0:i.basemap)==null?void 0:$.referenceLayers,i==null?void 0:i.layers].filter(E=>!!E);r.forEach(E=>"layers"in E&&y.push(E.layers)),this.addHandles(y.map(E=>this._watchUpdatingTracking.addOnCollectionChange(()=>E,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Vs(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),me(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Tl)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),T3(this._recyclingInfoMap),T3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ei()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||q2(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(T3(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let n=0;for(const l of e){const d=this._layerLayerViewInfoMap.get(l);if(!d||!d.layerView)continue;const y=d.layerView;y.layer=l,y.parent=r,i.at(n)!==y&&i.splice(n,0,y),l.layers&&this._populateLayerViewsOwners(l.layers,y.layerViews,y),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new Une(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(Is(r)||r.name==="cancelled:layerview-create")||ve.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};g([S()],Cn.prototype,"_workPromise",void 0),g([S({readOnly:!0})],Cn.prototype,"_watchUpdatingTracking",void 0),g([S({readOnly:!0})],Cn.prototype,"_layersToLayerViews",null),g([S({readOnly:!0})],Cn.prototype,"_rootCollectionNames",null),g([S()],Cn.prototype,"layerViewImporter",void 0),g([S()],Cn.prototype,"supportsGround",void 0),g([S({readOnly:!0})],Cn.prototype,"updating",null),g([S({readOnly:!0})],Cn.prototype,"updatingRemaining",null),g([S({constructOnly:!0})],Cn.prototype,"view",void 0),Cn=g([J("esri.views.LayerViewManager")],Cn);const qne=Cn;function Hne(t){return"createLayerView"in t&&t.createLayerView!=null}let Ys=class extends Be{constructor(e){super(e),this.factor=1.5,this.offset=Ms(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};g([S({type:Number})],Ys.prototype,"factor",void 0),g([S({nonNullable:!0})],Ys.prototype,"offset",void 0),g([S()],Ys.prototype,"position",void 0),g([S({type:Number,range:{min:0}})],Ys.prototype,"size",void 0),g([S()],Ys.prototype,"maskUrl",void 0),g([S()],Ys.prototype,"maskEnabled",void 0),g([S()],Ys.prototype,"overlayUrl",void 0),g([S()],Ys.prototype,"overlayEnabled",void 0),g([S({readOnly:!0})],Ys.prototype,"version",null),g([S({type:Boolean})],Ys.prototype,"visible",void 0),Ys=g([J("esri.views.Magnifier")],Ys);const sF=Ys;let Wne=class{constructor(){this._tasks=new Array,this._running=Hw(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.value=!0,new Promise((n,l)=>this._tasks.push(new GE(n,l,e,i,r)))}unshift(e,i,r){return this._running.value=!0,new Promise((n,l)=>this._tasks.unshift(new GE(n,l,e,i,r)))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=Ko(i.signal);if(n&&!i.abortCallback)i.reject(Ei());else{const l=n?(r=i.abortCallback)==null?void 0:r.call(i,Ei()):i.callback(e);Kl(l)?l.then(i.resolve,i.reject):i.resolve(l)}}catch(n){i.reject(n)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=Ei();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},GE=class{constructor(e,i,r,n=void 0,l=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=l}},Ay=class extends Be{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};g([S()],Ay.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),g([S()],Ay.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Ay=g([J("esri.views.support.DebugFlags")],Ay);const Jne=new Ay;var tn;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(tn||(tn={}));var U4,gt;(function(t){t[t.YIELD=1]="YIELD"})(U4||(U4={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(gt||(gt={}));const Pa=0,UE=new Map([[gt.RESOURCE_CONTROLLER_IMMEDIATE,Pa],[gt.RESOURCE_CONTROLLER,4],[gt.SLIDE,Pa],[gt.STREAM_DATA_LOADER,Pa],[gt.ELEVATION_QUERY,Pa],[gt.TERRAIN_SURFACE,1],[gt.SURFACE_GEOMETRY_UPDATES,1],[gt.LOD_RENDERER,2],[gt.GRAPHICS_CORE,2],[gt.I3S_CONTROLLER,2],[gt.POINT_CLOUD_LAYER,2],[gt.FEATURE_TILE_FETCHER,2],[gt.OVERLAY,4],[gt.STAGE,4],[gt.GRAPHICS_DECONFLICTOR,4],[gt.FILTER_VISIBILITY,4],[gt.SCALE_VISIBILITY,4],[gt.FRUSTUM_VISIBILITY,4],[gt.CLOUDS_GENERATOR,4],[gt.POINT_OF_INTEREST_FREQUENT,6],[gt.POINT_OF_INTEREST_INFREQUENT,30],[gt.LABELER,8],[gt.FEATURE_QUERY_ENGINE,8],[gt.FEATURE_TILE_TREE,16],[gt.FEATURE_TILE_TREE_ACTIVE,Pa],[gt.ELEVATION_ALIGNMENT,12],[gt.TEXT_TEXTURE_ATLAS,12],[gt.TEXTURE_UNLOAD,12],[gt.LINE_OF_SIGHT_TOOL,16],[gt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Pa],[gt.SNAPPING,Pa],[gt.SHADOW_ACCUMULATOR,30]]);function qE(t){return UE.has(t)?UE.get(t):typeof t=="number"?t:1}const HE=6.5,WE=1,Yne=30,JE=1e3/30,YE=100,KE=.9;var q4,Xh;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(l=>l.needsUpdate)}constructor(){this._updating=Hw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new l1("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=tn.INTERACTING,this._tasks=new fd,this._runQueue=new fd,this._load=0,this._idleStateCallbacks=new fd,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=me(()=>Jne.SCHEDULER_LOG_SLOW_TASKS,d=>this._debug=d,st);for(const d of Object.keys(gt))this.performanceInfo.tasks.set(gt[d],new l1(gt[d]));const l=this;this._test={FRAME_SAFETY_BUDGET:HE,INTERACTING_BUDGET:JE,IDLE_BUDGET:YE,get availableBudget(){return l._budget.budget},usedBudget:0,getBudget:()=>l._budget,setBudget:d=>l._budget=d,updateTask:d=>this._updateTask(d),getState:d=>this._getState(d),getRuntime:d=>this._getRuntime(d),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(l=>l.remove()),this._tasks.clear(),Ii(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(l){this._updatingChanged(),l&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(l,d){const y=qE(l),v=new i(this,l,d,y);return this._tasks.push(v),this._updatingChanged(),this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new l1(l)),v}registerIdleStateCallbacks(l,d){const y={idleBegin:l,idleEnd:d};this._idleStateCallbacks.push(y),this.state===tn.IDLE&&this._idleUpdatesStartFired&&y.idleBegin();const v=this;return{remove:()=>this._removeIdleStateCallbacks(y),set idleBegin(x){v._idleUpdatesStartFired&&(y.idleEnd(),v._state===tn.IDLE&&x()),y.idleBegin=x},set idleEnd(x){y.idleEnd=x}}}get load(){return this._load}set state(l){this._state!==l&&(this._state=l,this.state!==tn.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(d=>d.idleEnd())))}get state(){return this._state}updateBudget(l){this._test.usedBudget=0,++this._frameNumber;let d=HE,y=l.frameDuration,v=WE;switch(this.state){case tn.IDLE:d=0,y=Math.max(YE,l.frameDuration),v=Yne;break;case tn.INTERACTING:y=Math.max(JE,l.frameDuration);case tn.ANIMATING:}return y=y-l.elapsedFrameTime-d,this.state!==tn.IDLE&&y<WE&&!this._forceTask?(this._forceTask=!0,!1):(y=Math.max(y,v),this._budget.reset(y,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case tn.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin())),this._runIdle();break;case tn.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd(),this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l),this._runQueue.removeUnordered(l),this._updatingChanged()}_updateTask(l){this._tasks.forAll(d=>{d.name===l&&d.setPriority(l)})}_getState(l){if(this._runQueue.some(y=>y.name===l))return Xh.SCHEDULED;let d=Xh.IDLE;return this._tasks.forAll(y=>{y.name===l&&y.needsUpdate&&(y.schedulePriority<=1?d=Xh.READY:d!==Xh.READY&&(d=Xh.WAITING))}),d}_getRuntime(l){let d=0;return this._tasks.forAll(y=>{y.name===l&&(d+=y.runtime)}),d}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;if(this._tasks.forAll(y=>{y.needsUpdate&&l.set(y.name,(l.get(y.name)||0)+1)}),l.size===0)return null;let d="";return l.forEach((y,v)=>{d+=y>1?` ${y}x ${v}`:` ${v}`}),d}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=this._tasks.reduce((d,y)=>y.needsUpdate?++d:d,0);this._load=this._load*KE+l*(1-KE)}_schedule(){for(this._runQueue.filterInPlace(l=>!!l.needsUpdate||(l.schedulePriority=l.basePriority,!1)),this._tasks.forAll(l=>{l.basePriority===Pa&&l.needsUpdate&&!this._runQueue.includes(l)&&l.blockFrame!==this._frameNumber&&this._runQueue.unshift(l)});this._runQueue.length===0;){let l=!1,d=0;if(this._tasks.forAll(y=>{y.needsUpdate&&y.schedulePriority!==0&&y.basePriority!==Pa&&y.blockFrame!==this._frameNumber&&(l=!0,d=Math.max(d,y.basePriority),y.schedulePriority===1?(y.schedulePriority=0,this._runQueue.push(y)):--y.schedulePriority)}),!l)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const d=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)===U4.YIELD&&(y.blockFrame=this._frameNumber)}catch(x){ve.getLogger("esri.views.support.Scheduler").error(`Exception in task "${y.name}"`,x)}!this._budget.hasProgressed&&y.blockFrame!==this._frameNumber&&y.needsUpdate&&(y.name,gt.I3S_CONTROLLER,y.blockFrame=this._frameNumber),y.schedulePriority=y.basePriority;const v=this._budget.now()-d;if(y.runtime+=v,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+v),this._debug&&v>2*this._budget.budget&&console.log("Task",y.name,"used",v,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-l)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(gt))this._frameTaskTimes.set(gt[l],0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((d,y)=>this.performanceInfo.tasks.get(y).record(d)),this.performanceInfo.total.record(l)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(l,d,y,v){this._scheduler=l,this.name=d,this._basePriority=v,this.blockFrame=0,this.runtime=0,this._queue=new Wne,this._handles=new Gs,this.schedulePriority=this._basePriority,this._task=Hw(y??this._queue),this._handles.add(Xn(()=>this.task.running,x=>l.taskRunningChanged(x)))}remove(){this.processQueue(nF),this._scheduler.removeTask(this),this.schedule=H4.schedule,this.reschedule=H4.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){this.name=l;const d=qE(l);this._basePriority!==Pa&&this.schedulePriority===0||(this.schedulePriority=d),this._basePriority=d}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,d,y){return this._queue.push(l,d,y)}reschedule(l,d,y){return this._queue.unshift(l,d,y)}processQueue(l){this._queue.runTask(l)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=tn.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(l){return!this.done&&(l()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(l){this._enabled=l}reset(l,d){this._begin=this.now(),this._budget=l,this._state=d,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(q4||(q4={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Xh||(Xh={}));const nF=(()=>{const t=new q4.Budget;return t.enabled=!1,t})();let Kne=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Ko(i)){const n=Ei();return r?Promise.resolve(r(n)):Promise.reject(n)}return Ex(e(nF))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const H4=new Kne;let ky=class extends Be{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(gt.TEXTURE_UNLOAD))??H4}normalizeCtorArgs(){return{}}destroy(){var e,i,r;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(n=>this._releaseTextureRequest(n)),(r=this._textureRequests)==null||r.clear()}get updating(){return this._frameTask.updating}fromData(e,i,r){var d,y;const n=this.makeUid(e);let l=this._textureRequests.get(n);if(!l){const v=new Zne(r);v.texture=i(),(d=this._stage)==null||d.add(v.texture),(y=this._stage)==null||y.loadImmediate(v.texture),this._textureRequests.set(n,v),l=v}return l.referenceCount++,{uid:n,texture:l.texture,release:()=>this._release(n)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};g([S()],ky.prototype,"_frameTask",void 0),g([S()],ky.prototype,"updating",null),ky=g([J("esri.views.3d.support.TextureCollection")],ky);let Zne=class{constructor(e){this.onRemove=e,this.referenceCount=0}};var ZE;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(ZE||(ZE={}));const oF=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],aF={};function lF(t){return!!aF[t]}function Xne(t){for(const e of t)if(!lF(e))return!1;return!0}oF.forEach(t=>{aF[t]=!0});let Qne=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var l;return(l=this.inputManager)==null?void 0:l.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const l=Array.isArray(e)?e:e.split(",");if(!Xne(l))return l.some(lF)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let d,y;Array.isArray(i)?y=i:(d=i,y=[]),typeof r=="function"?d=r:n=r,n=n??Sh.DEFAULT;const v=this._createUniqueGroupName(),x=new eoe(this.view,l,y,d);this._handlers.set(v,{handler:x,priority:n});for(const $ of l){const E=this._handlerCounts.get($)||0;this._handlerCounts.set($,E+1)}return this.inputManager&&this.inputManager.installHandlers(v,[x],n),{remove:()=>this._removeHandler(v,l)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},eoe=class extends Sr{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const l of i)switch(l){case"click":this.registerIncoming("click",r,d=>n(this._wrapClick(d)));break;case"double-click":this.registerIncoming("double-click",r,d=>n(this._wrapDoubleClick(d)));break;case"immediate-click":this.registerIncoming("immediate-click",r,d=>n(this._wrapImmediateClick(d)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,d=>n(this._wrapImmediateDoubleClick(d)));break;case"hold":this.registerIncoming("hold",r,d=>n(this._wrapHold(d)));break;case"drag":this.registerIncoming("drag",r,d=>{const y=this._wrapDrag(d);y&&n(y)});break;case"key-down":this.registerIncoming("key-down",r,d=>n(this._wrapKeyDown(d)));break;case"key-up":this.registerIncoming("key-up",r,d=>n(this._wrapKeyUp(d)));break;case"pointer-down":this.registerIncoming("pointer-down",r,d=>n(this._wrapPointer(d,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,d=>n(this._wrapPointer(d,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,d=>n(this._wrapPointer(d,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,d=>n(this._wrapPointerDrag(d)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,d=>n(this._wrapMouseWheel(d)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,d=>n(this._wrapPointer(d,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,d=>n(this._wrapPointer(d,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,d=>{n(this._wrapGamepad(d))});break;case"focus":this.registerIncoming("focus",r,d=>{n(this._wrapFocus(d))});break;case"blur":this.registerIncoming("blur",r,d=>{n(this._wrapBlur(d))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:v}=e.data,{cancelable:x,timestamp:$}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:$,screenPoint:Ms(l,d),mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:E=>e.async(E),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:v}=e.data,{cancelable:x,timestamp:$}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:$,mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:E=>e.async(E),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:v}=e.data,x=y.pointerId,{cancelable:$,timestamp:E}=e;return{type:"immediate-click",pointerId:x,pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:E,mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y,eventId:v}=e.data,x=y.pointerId,{cancelable:$,timestamp:E}=e;return{type:"immediate-double-click",pointerId:x,pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:E,mapPoint:this._getMapPoint(l,d),eventId:v,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:k=>e.async(k),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:n,x:l,y:d,native:y}=e.data,{cancelable:v,timestamp:x}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:l,y:d,native:y,timestamp:x,mapPoint:this._getMapPoint(l,d),cancelable:v,stopPropagation:()=>e.stopPropagation(),async:$=>e.async($),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(Ms(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:l,pointerType:d,button:y}=i;if(l==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const v=i.pointer.native,x=i.buttons,{cancelable:$,timestamp:E}=e,k={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return l==="end"&&(this._latestDragStart=void 0),{type:"drag",action:l,x:r,y:n,origin:k,pointerType:d,button:y,buttons:x,radius:i.radius,angle:bL(i.angle),native:v,timestamp:E,cancelable:$,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:n}=e.data,{cancelable:l,timestamp:d}=e;return{type:"key-down",key:i,repeat:r,native:n,timestamp:d,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:n,timestamp:l}=e;return{type:"key-up",key:i,native:r,timestamp:l,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:n,button:l,buttons:d,native:y,eventId:v}=e.data,x=y.pointerId,$=y.pointerType,{cancelable:E,timestamp:k}=e;return{type:i,x:r,y:n,pointerId:x,pointerType:$,button:l,buttons:d,native:y,timestamp:k,eventId:v,cancelable:E,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:n,native:l,eventId:d}=e.data.currentEvent,{button:y}=e.data.startEvent,v=e.data.startEvent.native.pointerId,x=e.data.startEvent.native.pointerType,$=e.data.action,E={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:k,timestamp:P}=e;return{type:"pointer-drag",x:i,y:r,pointerId:v,pointerType:x,button:y,buttons:n,action:$,origin:E,native:l,timestamp:P,eventId:d,cancelable:k,stopPropagation:()=>e.stopPropagation(),async:D=>e.async(D),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:n}=e,{x:l,y:d,deltaY:y,native:v}=r;return{type:"mouse-wheel",x:l,y:d,deltaY:y,native:v,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:n}=e.data,{cancelable:l,timestamp:d}=e,{buttons:y,axes:v}=r;return{type:"gamepad",device:n,timestamp:d,action:i,buttons:y,axes:v,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}};var cm,XE,QE;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(cm||(cm={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(XE||(XE={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(QE||(QE={}));function toe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return ve.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function W4(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(cm.USER)&&t.getEditableFlag(cm.MANAGER)}function xa(t){return Ms(t.x,t.y)}function uF(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Ms(e.clientX-i.left,e.clientY-i.top):Ms(0,0)}function e8(t,e){return e instanceof Event?uF(t,e):xa(e)}function t8(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let ioe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":i8(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!r8(e))break;const n=xa(e),l=this._intersect(n,e.pointerType,i.forEachTool);if(l==null)break;const d=l.manipulator,y=l.tool;d==null||y==null||!d.interactive||d.grabbable&&d.grabbableForEvent(e)||!d.grabbing||d.dragging||this._ungrabManipulatorBeforeDragging(d,e,i),d!=null&&y!=null&&d.interactive&&d.grabbable&&d.grabbableForEvent(e)&&!d.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:d,tool:y,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(l.tool)),d.grabbing=!0,d.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!r8(e))break;const n=this._grabbedManipulators.get(e.pointerId),l=uh(n,({manipulator:$})=>$),d=uh(n,({tool:$})=>$);if(l==null||d==null)break;const y=xa(e);y.x=zs(y.x,0,i.view.width),y.y=zs(y.y,0,i.view.height);const v=n.start,x=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(l.dragging=!0,x?l.events.emit("drag",{action:"update",start:v,screenPoint:y}):l.events.emit("drag",{action:"start",start:v,screenPoint:y,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:d,manipulator:l,start:v}));break;case"end":l.dragging=!1,x&&l.events.emit("drag",{action:"end",start:v,screenPoint:y}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=xa(e),l=this._intersect(n,e.pointerType,i.forEachTool);if(roe(e)||i.forEachTool(x=>{if((l==null||l.tool!==x||x.automaticManipulatorSelection)&&x.manipulators){let $=!1;x.manipulators.forEach(({manipulator:E})=>{E.selected&&(E.selected=!1,$=!0)}),$&&x.onManipulatorSelectionChanged&&x.onManipulatorSelectionChanged()}}),l==null)break;const{manipulator:d,tool:y}=l;if(!d.interactive)break;d.selectable&&y.automaticManipulatorSelection&&(d.selected=!d.selected,y.onManipulatorSelectionChanged&&y.onManipulatorSelectionChanged());const v=e.native.shiftKey;d.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:v,stopPropagation:r});break}case"click":{const n=xa(e),l=this._intersect(n,e.pointerType,i.forEachTool),d=l!=null?l.manipulator:null;if(d==null||!d.interactive)break;const y=e.native.shiftKey;d.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:y}),r();break}case"double-click":{const n=xa(e),l=this._intersect(n,e.pointerType,i.forEachTool),d=l!=null?l.manipulator:null;if(d==null||!d.interactive)break;const y=e.native.shiftKey;d.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:y,stopPropagation:r});break}case"immediate-double-click":{const n=xa(e),l=this._intersect(n,e.pointerType,i.forEachTool),d=l!=null?l.manipulator:null;if(d==null||!d.interactive)break;const y=e.native.shiftKey;d.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:y,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:xa(i)}),this._grabbedManipulators.forEach(({manipulator:n},l)=>{n===e&&this._grabbedManipulators.delete(l)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){const r=uh(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:xa(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return q2(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const l=this._grabbedManipulators.values(),d=KU(l,({tool:y})=>y===n);n.firstGrabbedManipulator=d!=null?d.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,l){const d=(y,v)=>y===e&&(l==null||l===v);this._grabbedManipulators.forEach(({tool:y,manipulator:v,pointerType:x},$)=>{d(y,v)&&(this._grabbedManipulators.delete($),v.grabbing=!1,v.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:x}))}),this._draggedManipulators.forEach(({tool:y,manipulator:v},x)=>{d(y,v)&&(this._draggedManipulators.delete(x),v.dragging=!1,v.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:y,manipulator:v},x)=>{d(y,v)&&(this._hoveredManipulators.delete(x),v.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let n=null;return r(l=>{if(l.manipulators==null||!W4(l))return!1;const d=l.manipulators.intersect(e,i);return d!=null&&(n={tool:l,manipulator:d},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Ms(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!i8(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(xa(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){let l=this._intersect(e,r,n);const d=uh(this._hoveredManipulators.get(i),({manipulator:y})=>y);l==null||l.manipulator.interactive||(l=null),l!=null&&d===l.manipulator||(d!=null&&(d.hovering=!1),l!=null?(l.manipulator.hovering=!0,this._hoveredManipulators.set(i,l)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function i8(t){return t==="mouse"}function r8(t){return t.pointerType!=="mouse"||t.button===0}function roe(t){return!!t.native.shiftKey}const s8="attached",J3="tools",soe=1e3;let So=class extends Ww{constructor(e){super(e),this._clock=ef,this._manipulatorState=new ioe,this.tools=new ze,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(oF,e=>{this._handleInputEvent(e)},Sh.TOOL),...toe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void ve.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=W4(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=Ii(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,soe)}attach(){var e;this.view.type==="3d"?(this._set("textures",new ky(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([me(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i))),Vl(()=>this._set("textures",ri(this.textures)))],s8)):this.handles.add(me(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(s8),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(J3),this._forEachTool(e=>{if(e instanceof Be){const i=me(()=>[e.cursor,e.visible,e.editable],()=>{W4(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,J3)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],J3)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,cm.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:e=>this._clock=e}}};g([S({constructOnly:!0,nonNullable:!0})],So.prototype,"view",void 0),g([S({readOnly:!0,nonNullable:!0})],So.prototype,"textures",void 0),g([S({value:null})],So.prototype,"activeTool",null),g([S({readOnly:!0,type:ze})],So.prototype,"tools",void 0),g([S({readOnly:!0})],So.prototype,"cursor",void 0),g([S({readOnly:!0})],So.prototype,"updating",null),g([S()],So.prototype,"_interacting",void 0),g([S({readOnly:!0})],So.prototype,"interacting",null),So=g([J("esri.views.ToolViewManager")],So);let Mp=class extends Be{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":noe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return ooe[this.deviceType]}};g([S({nonNullable:!0,readOnly:!0})],Mp.prototype,"nativeIndex",void 0),g([S({type:String,readOnly:!0})],Mp.prototype,"deviceType",null),g([S({type:Number,readOnly:!0})],Mp.prototype,"axisThreshold",null),Mp=g([J("esri.views.input.gamepad.GamepadInputDevice")],Mp);const noe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),ooe={standard:.15,spacemouse:.025,unknown:0},Q7=Mp;let Py=class extends Be{constructor(...e){super(...e),this.devices=new ze,this.enabledFocusMode="document"}};g([S({type:ze.ofType(Q7),readOnly:!0})],Py.prototype,"devices",void 0),g([S({type:["document","view","none"]})],Py.prototype,"enabledFocusMode",void 0),Py=g([J("esri.views.input.gamepad.GamepadSettings")],Py);const aoe=Py;let hb=class extends Be{constructor(){super(...arguments),this.gamepad=new aoe}};g([S({readOnly:!0})],hb.prototype,"gamepad",void 0),hb=g([J("esri.views.input.Input")],hb);const loe=hb;let Du=class extends Be{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};g([S({type:Boolean,nonNullable:!0})],Du.prototype,"enabled",void 0),g([S({type:Q7})],Du.prototype,"device",void 0),g([S({type:["pan","zoom"],nonNullable:!0})],Du.prototype,"mode",void 0),g([S({type:["forward-down","forward-up"],nonNullable:!0})],Du.prototype,"tiltDirection",void 0),g([S({type:Number,nonNullable:!0})],Du.prototype,"velocityFactor",void 0),Du=g([J("esri.views.navigation.gamepad.GamepadSettings")],Du);const hF=Du;let Tc=class extends Be{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new hF,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};g([S({type:Boolean})],Tc.prototype,"browserTouchPanEnabled",void 0),g([S({type:hF,nonNullable:!0})],Tc.prototype,"gamepad",void 0),g([S({type:Boolean})],Tc.prototype,"momentumEnabled",void 0),g([S({type:Boolean})],Tc.prototype,"mouseWheelZoomEnabled",void 0),Tc=g([J("esri.views.navigation.Navigation")],Tc);const cF=Tc,dF={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},pF=Object.values(dF),fF=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${pF.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),uoe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${pF.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),hoe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function hSe(t){return!!fF.test(t)}function Jd(t){if(t==null)return null;const e=Wi(t),i=e.path.match(fF)||e.path.match(uoe);if(!i)return null;const[,r,n,l,d]=i,y=n.indexOf("/");return{title:e$(y!==-1?n.slice(y+1):n),serverType:dF[l.toLowerCase()],sublayer:d!=null&&d!==""?parseInt(d,10):null,url:{path:r}}}function coe(t){const e=Wi(t).path.match(hoe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function e$(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function doe(t,e){const i=[];if(t){const r=Jd(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=e$(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function yF(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",n="//features",l=(t=t.toLowerCase()).includes(e),d=t.includes(i)||t.includes(r)||t.includes(n);return l&&d}function poe(t,e){return t&&yO(mO(t,e))}function foe(t){let{url:e}=t;if(!e)return{url:e};e=mO(e,t.logger);const i=Wi(e),r=Jd(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const l=coe(i.path);l!=null&&(e=l.serviceUrl,n=l.sublayerId)}return{url:yO(e),layerId:n}}function yoe(t,e,i,r,n){kh(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Gl(r.url,i,t.layerId.toString()))}function cSe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),l=e.includes("/wmsserver");return i&&(r||n||l)}var n8;function moe(t){var r;const e=t.url?Jd(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&mF(t)&&t.heightModelInfo?t.heightModelInfo:goe(t)?T_.deriveUnitFromSR(boe,t.spatialReference):null}function mF(t){return"heightModelInfo"in t}function gF(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function goe(t){return gF(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):vF(t)}function voe(t){return t.layers!=null||vF(t)||gF(t)||mF(t)}function vF(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(n8||(n8={}));const boe=new T_({heightModel:"gravity-related-height"});var Kw;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Kw||(Kw={}));let J4,Y3=null;async function woe(t){Y3||(Y3=le(()=>import("./geometryServiceUtils-b10dacde.js"),[]).then(e=>J4=e)),await Y3,hi(t)}async function bF(t,e,i,r){if(!t)return null;const n=t.spatialReference;return Hd()||Jl(n,e)?Jh(t,e):J4?J4.projectGeometry(t,e,i,r):(await Promise.race([woe(r),Oh(r)]),bF(t,e,i,r))}let ti=class extends Be{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=H1(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,l,d;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(l=e==null?void 0:e.ground)==null?void 0:l.layers},{parent:e==null?void 0:e.basemap,layers:(d=e==null?void 0:e.basemap)==null?void 0:d.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const l of e){const d=this._getSupportedSpatialReferences(l);if(d.length>0){const y=this._narrowDownSpatialReferenceCandidates(r,d);y!=null&&(r=y)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(r);return{spatialReference:n!=null?n.spatialReference:null,viewingMode:n!=null?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,n,l,d,y,v,x;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(y=(d=(l=this.map)==null?void 0:l.call(this))==null?void 0:d.basemap)==null?void 0:y.baseLayers},{layers:(x=(v=this.map)==null?void 0:v.call(this))==null?void 0:x.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const $=e[0].tileInfo;return{tileInfo:$&&$.spatialReference.equals(this.spatialReference)?$:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,n,l;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const d of e)if(voe(d)){const y=moe(d);if(y)return{heightModelInfo:y,vcsWkid:(n=d.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(l=d.spatialReference)==null?void 0:l.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const n of e.layers){const l="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),d=this.requiresExtentInSpatialReference?null:l[0],y=l.find(v=>v.spatialReference.equals(this.spatialReference))??d;if(y)return{candidates:[{extent:y,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const v of l)r.push({extent:v,layer:n})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=H1(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:AM(async l=>{try{const d=await bF(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,l);this._projectExtentTask={...this._projectExtentTask,task:null,output:d}}catch{if(Ko(l))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=[],n=(l,d)=>l!=null?d!=null?l===d&&l:l:d;for(const l of e)for(const d of i){if(!l.spatialReference.equals(d.spatialReference))continue;const y=n(l.viewingMode,d.viewingMode);if(y!==!1){r.push({spatialReference:l.spatialReference,viewingMode:y});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==Kw.Local)&&(e=e.filter(({viewingMode:r})=>r!==Kw.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const l=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(l!=null){const d=l.constraints!=null?l.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:y,viewingMode:v}of d)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!y.equals(this.userSpatialReference)||r.push({spatialReference:y,viewingMode:v})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new _oe;for(const n of e)if(this._collectCollection(n,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Is(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};g([S()],ti.prototype,"required",void 0),g([S({constructOnly:!0})],ti.prototype,"map",void 0),g([S({constructOnly:!0})],ti.prototype,"getSpatialReferenceSupport",void 0),g([S()],ti.prototype,"defaultSpatialReference",void 0),g([S()],ti.prototype,"userSpatialReference",void 0),g([S()],ti.prototype,"sourcePreloadCount",void 0),g([S()],ti.prototype,"priorityCollection",void 0),g([S()],ti.prototype,"requiresExtentInSpatialReference",void 0),g([S()],ti.prototype,"suspended",void 0),g([S({readOnly:!0})],ti.prototype,"ready",null),g([S({readOnly:!0})],ti.prototype,"heightModelInfoReady",null),g([S({readOnly:!0})],ti.prototype,"spatialReference",null),g([S({readOnly:!0})],ti.prototype,"extent",null),g([S({readOnly:!0})],ti.prototype,"heightModelInfo",null),g([S({readOnly:!0})],ti.prototype,"vcsWkid",null),g([S({readOnly:!0})],ti.prototype,"latestVcsWkid",null),g([S({readOnly:!0})],ti.prototype,"viewingMode",null),g([S({readOnly:!0})],ti.prototype,"tileInfo",null),g([S({readOnly:!0})],ti.prototype,"mapCollections",null),g([S({readOnly:!0})],ti.prototype,"_allLayers",null),g([S({readOnly:!0})],ti.prototype,"_spatialReferenceTask",null),g([S({readOnly:!0})],ti.prototype,"_tileInfoTask",null),g([S({readOnly:!0})],ti.prototype,"_heightModelInfoTask",null),g([S({readOnly:!0})],ti.prototype,"_extentCandidatesTask",null),g([S()],ti.prototype,"_extentTask",null),g([S()],ti.prototype,"_projectExtentTask",void 0),ti=g([J("esri.views.support.DefaultsFromMap")],ti);let _oe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var Cy;let Je=Cy=class extends ra(Ha.EventedMixin(Y2(Be))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new F0({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:Soe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new M1,this.analyses=new Yw,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ze,this.magnifier=new sF,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Dh,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new loe,this.navigation=new cF,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Qne(this),this.persistableViewModels=new ze,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(me(()=>this.preconditionsReady,e=>{var i,r;e?(this._currentSpatialReference=this.spatialReference,Cy.views.add(this)):(this._currentSpatialReference=null,Cy.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},qd))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,b_(()=>this.ready)))),this.basemapView=new Lu({view:this}),this.layerViewManager=new qne({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new So({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([me(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),me(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),me(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([me(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const n=Vl(()=>t=H1(t));t=AM(async l=>{try{await G2(this.spatialReferenceWarningDelay,null,l)}catch{return}finally{t=null}ve.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(Cy.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ri(this.graphics),this.analyses=ri(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ri(this.analysisViewManager),this.toolViewManager=ri(this.toolViewManager),this.layerViewManager=ri(this.layerViewManager),this.basemapView=ri(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=ri(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ve.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ti({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Zo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(ve.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),Zo.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!Ji(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new ne("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&ve.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Xn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Je.views=new ze,g([S()],Je.prototype,"_userSpatialReference",void 0),g([S()],Je.prototype,"activeTool",null),g([S({readOnly:!0})],Je.prototype,"allLayerViews",void 0),g([S()],Je.prototype,"groundView",void 0),g([S()],Je.prototype,"animation",null),g([S()],Je.prototype,"basemapView",void 0),g([S()],Je.prototype,"center",null),g([S({readOnly:!0})],Je.prototype,"_defaultsFromMapSettings",null),g([S()],Je.prototype,"defaultsFromMap",null),g([S()],Je.prototype,"fatalError",void 0),g([S({type:Ct})],Je.prototype,"extent",null),g([S(zE(M1,"graphics"))],Je.prototype,"graphics",void 0),g([S(zE(Yw,"analyses"))],Je.prototype,"analyses",void 0),g([S({readOnly:!0,type:T_})],Je.prototype,"heightModelInfo",null),g([S({readOnly:!0})],Je.prototype,"interacting",null),g([S({readOnly:!0})],Je.prototype,"navigating",null),g([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Je.prototype,"preconditionsReady",null),g([S({readOnly:!0})],Je.prototype,"typeSpecificPreconditionsReady",void 0),g([S({type:ze,readOnly:!0})],Je.prototype,"layerViews",void 0),g([S()],Je.prototype,"resolution",null),g([S({type:sF})],Je.prototype,"magnifier",void 0),g([S({value:null,type:GL})],Je.prototype,"map",null),g([S()],Je.prototype,"padding",void 0),g([S({readOnly:!0})],Je.prototype,"ready",void 0),g([S({type:ut})],Je.prototype,"spatialReference",null),g([S()],Je.prototype,"spatialReferenceWarningDelay",void 0),g([S()],Je.prototype,"stationary",null),g([S({readOnly:!0})],Je.prototype,"supportsGround",void 0),g([S({type:eo})],Je.prototype,"timeExtent",void 0),g([S({type:Dh,nonNullable:!0})],Je.prototype,"timeReference",void 0),g([S()],Je.prototype,"tools",null),g([S()],Je.prototype,"toolViewManager",void 0),g([S({readOnly:!0})],Je.prototype,"type",void 0),g([S({type:Number})],Je.prototype,"scale",void 0),g([S({readOnly:!0})],Je.prototype,"updating",void 0),g([S({readOnly:!0})],Je.prototype,"initialExtentRequired",void 0),g([S({readOnly:!0})],Je.prototype,"initialExtent",null),g([S()],Je.prototype,"cursor",null),g([S({readOnly:!0})],Je.prototype,"input",void 0),g([S({type:cF,nonNullable:!0})],Je.prototype,"navigation",void 0),g([S()],Je.prototype,"layerViewManager",void 0),g([S()],Je.prototype,"analysisViewManager",void 0),g([S()],Je.prototype,"width",void 0),g([S()],Je.prototype,"height",void 0),g([S({readOnly:!0})],Je.prototype,"resizing",void 0),g([S({value:null,readOnly:!0})],Je.prototype,"size",null),g([S({readOnly:!0})],Je.prototype,"suspended",void 0),g([S({readOnly:!0})],Je.prototype,"viewEvents",void 0),g([S({readOnly:!0})],Je.prototype,"persistableViewModels",void 0),g([S()],Je.prototype,"_isValid",void 0),g([S()],Je.prototype,"_readyCycleForced",void 0),g([S()],Je.prototype,"_currentSpatialReference",void 0),Je=Cy=g([J("esri.views.View")],Je);const xoe=Je;function Soe(t){return t.layerViews}let Ru=class extends mw{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Yn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new ne("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Kl(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};g([S({readOnly:!0})],Ru.prototype,"done",null),g([S({readOnly:!0,type:String})],Ru.prototype,"state",void 0),g([S()],Ru.prototype,"target",void 0),Ru=g([J("esri.views.ViewAnimation")],Ru),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ru||(Ru={}));const Y4=Ru;function ed(t,e,i,r){const n=3*t,l=3*(i-t)-n,d=1-n-l,y=3*e,v=3*(r-e)-y,x=1-y-v;function $(D){return((d*D+l)*D+n)*D}function E(D){return((x*D+v)*D+y)*D}function k(D){return(3*d*D+2*l)*D+n}function P(D,L){let N,B,W,q,Y,ie;for(W=D,ie=0;ie<8;ie++){if(q=$(W)-D,Math.abs(q)<L)return W;if(Y=k(W),Math.abs(Y)<1e-6)break;W-=q/Y}if(N=0,B=1,W=D,W<N)return N;if(W>B)return B;for(;N<B;){if(q=$(W),Math.abs(q-D)<L)return W;D>q?N=W:B=W,W=.5*(B-N)+N}return W}return function(D,L=1e-6){return E(P(D,L))}}const Moe=/^cubic-bezier\((.*)\)/,Fn={};function $oe(t){let e=Fn[t]||null;if(!e){const i=Moe.exec(t);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(e=ed.apply(ed,r))}}return e}Fn.ease=ed(.25,.1,.25,1),Fn.linear=ed(0,0,1,1),Fn.easeIn=Fn["ease-in"]=ed(.42,0,1,1),Fn.easeOut=Fn["ease-out"]=ed(0,0,.58,1),Fn.easeInOut=Fn["ease-in-out"]=ed(.42,0,.58,1);function Toe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function I_(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Ioe(t,e,i,r,n,l,d){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=l,t[5]=d,t}function t$(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5];let v=i*l-r*n;return v?(v=1/v,t[0]=l*v,t[1]=-r*v,t[2]=-n*v,t[3]=i*v,t[4]=(n*y-l*d)*v,t[5]=(r*d-i*y)*v,t):null}function Eoe(t){return t[0]*t[3]-t[1]*t[2]}function td(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=i[0],$=i[1],E=i[2],k=i[3],P=i[4],D=i[5];return t[0]=r*x+l*$,t[1]=n*x+d*$,t[2]=r*E+l*k,t[3]=n*E+d*k,t[4]=r*P+l*D+y,t[5]=n*P+d*D+v,t}function Gm(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=Math.sin(i),$=Math.cos(i);return t[0]=r*$+l*x,t[1]=n*$+d*x,t[2]=r*-x+l*$,t[3]=n*-x+d*$,t[4]=y,t[5]=v,t}function E_(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=i[0],$=i[1];return t[0]=r*x,t[1]=n*x,t[2]=l*$,t[3]=d*$,t[4]=y,t[5]=v,t}function W0(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=i[0],$=i[1];return t[0]=r,t[1]=n,t[2]=l,t[3]=d,t[4]=r*x+l*$+y,t[5]=n*x+d*$+v,t}function wF(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function _F(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function i$(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Aoe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function koe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function Poe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function xF(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function Coe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function Ooe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function Loe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Doe(t,e){const i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],v=e[0],x=e[1],$=e[2],E=e[3],k=e[4],P=e[5],D=Qn();return Math.abs(i-v)<=D*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-x)<=D*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-$)<=D*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(l-E)<=D*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(d-k)<=D*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(y-P)<=D*Math.max(1,Math.abs(y),Math.abs(P))}const Roe=td,joe=xF;Object.freeze(Object.defineProperty({__proto__:null,add:Poe,copy:Toe,determinant:Eoe,equals:Doe,exactEquals:Loe,frob:koe,fromRotation:wF,fromScaling:_F,fromTranslation:i$,identity:I_,invert:t$,mul:Roe,multiply:td,multiplyScalar:Coe,multiplyScalarAndAdd:Ooe,rotate:Gm,scale:E_,set:Ioe,str:Aoe,sub:joe,subtract:xF,translate:W0},Symbol.toStringTag,{value:"Module"}));function Mh(){return[1,0,0,1,0,0]}function Foe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Noe(t,e,i,r,n,l){return[t,e,i,r,n,l]}function zoe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:Foe,create:Mh,createView:zoe,fromValues:Noe},Symbol.toStringTag,{value:"Module"}));function dm(t,e){return t[0]=e[0],t[1]=e[1],t}function Ar(t,e,i){return t[0]=e,t[1]=i,t}function SF(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function pm(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function MF(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function $F(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Voe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Boe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Goe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Uoe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function qoe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Um(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Hoe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function qm(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function Zw(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function Xw(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function TF(t){const e=t[0],i=t[1];return e*e+i*i}function IF(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Woe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function K4(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function EF(t,e){return t[0]*e[0]+t[1]*e[1]}function AF(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Joe(t,e,i,r){const n=e[0],l=e[1];return t[0]=n+r*(i[0]-n),t[1]=l+r*(i[1]-l),t}function Yoe(t,e){e=e||1;const i=2*t_()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Koe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Oa(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function Zoe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Xoe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Qoe(t,e,i,r){const n=e[0]-i[0],l=e[1]-i[1],d=Math.sin(r),y=Math.cos(r);return t[0]=n*y-l*d+i[0],t[1]=n*d+l*y+i[1],t}function eae(t,e){const i=t[0],r=t[1],n=e[0],l=e[1];let d=i*i+r*r;d>0&&(d=1/Math.sqrt(d));let y=n*n+l*l;y>0&&(y=1/Math.sqrt(y));const v=(i*n+r*l)*d*y;return v>1?0:v<-1?Math.PI:Math.acos(v)}function tae(t){return"vec2("+t[0]+", "+t[1]+")"}function iae(t,e){return t[0]===e[0]&&t[1]===e[1]}function rae(t,e){const i=t[0],r=t[1],n=e[0],l=e[1],d=Qn();return Math.abs(i-n)<=d*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))}function sae(t,e,i,r,n){let l=e[0]-i[0],d=e[1]-i[1];const y=(r[0]*l+r[1]*d)*(n-1);return l=r[0]*y,d=r[1]*y,t[0]=e[0]+l,t[1]=e[1]+d,t}const nae=Xw,r$=pm,oae=MF,aae=$F,lae=qm,uae=Zw,hae=TF;Object.freeze(Object.defineProperty({__proto__:null,add:SF,angle:eae,ceil:Voe,copy:dm,cross:AF,dist:lae,distance:qm,div:aae,divide:$F,dot:EF,equals:rae,exactEquals:iae,floor:Boe,inverse:Woe,len:nae,length:Xw,lerp:Joe,max:Uoe,min:Goe,mul:oae,multiply:MF,negate:IF,normalize:K4,projectAndScale:sae,random:Yoe,rotate:Qoe,round:qoe,scale:Um,scaleAndAdd:Hoe,set:Ar,sqrDist:uae,sqrLen:hae,squaredDistance:Zw,squaredLength:TF,str:tae,sub:r$,subtract:pm,transformMat2:Koe,transformMat2d:Oa,transformMat3:Zoe,transformMat4:Xoe},Symbol.toStringTag,{value:"Module"}));function Ui(){return[0,0]}function cae(t){return[t[0],t[1]]}function Hm(t,e){return[t,e]}function dae(t){const e=Ui(),i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function pae(t,e){return new Float64Array(t,e,2)}function kF(){return Ui()}function PF(){return Hm(1,1)}function CF(){return Hm(1,0)}function OF(){return Hm(0,1)}const fae=kF(),yae=PF(),mae=CF(),gae=OF();Object.freeze(Object.defineProperty({__proto__:null,ONES:yae,UNIT_X:mae,UNIT_Y:gae,ZEROS:fae,clone:cae,create:Ui,createView:pae,fromArray:dae,fromValues:Hm,ones:PF,unitX:CF,unitY:OF,zeros:kF},Symbol.toStringTag,{value:"Module"}));const LF=96,DF=39.37,vae=180/Math.PI;function RF(t){return t.wkid?t:t.spatialReference||ut.WGS84}function s$(t,e){return e.type?Ar(t,e.x,e.y):dm(t,e)}function jF(t){return Zl(t)}function _0(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*Iae(t.spatialReference)}async function Oy(t,e,i,r){var y,v;let n,l;if(!t||Array.isArray(t)&&!t.length)return null;if(ze.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const x=t.every(k=>"attributes"in k),$=t.some(k=>!k.geometry);let E=t;if(x&&$&&e&&e.allLayerViews){const k=new Map;for(const N of t){const B=N.layer,W=k.get(B)||[],q=N.attributes[B.objectIdField];q!=null&&W.push(q),k.set(B,W)}const P=[];k.forEach((N,B)=>{const W=e.allLayerViews.find(q=>q.layer.id===B.id);if(W&&"queryFeatures"in W){const q=B.createQuery();q.objectIds=N,q.returnGeometry=!0,P.push(W.queryFeatures(q))}});const D=await Promise.all(P),L=[];for(const N of D)if(N&&N.features&&N.features.length)for(const B of N.features)B.geometry!=null&&L.push(B.geometry);E=L}for(const k of E)r=await Oy(k,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new lt(t);else if(t instanceof zh)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const x=t.layer,$=e.allLayerViews.find(E=>E.layer.id===x.id);if($&&"queryFeatures"in $){const E=x.createQuery();E.objectIds=[t.attributes[x.objectIdField]],E.returnGeometry=!0;const k=await $.queryFeatures(E);n=(v=(y=k==null?void 0:k.features)==null?void 0:y[0])==null?void 0:v.geometry}}}if(n==null||(l=n.type==="point"?new Ct({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!l))return null;Hd()||Jl(l.spatialReference,i)||await Oh();const d=Jh(l,i);return d?r=r?r.union(d):d:null}function bae(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const n=r.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,i=n.maxScale>i?n.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function K3(t,e){return Ji(RF(t),e)?t:Jh(t,e)}async function wae(t,e){if(!t||!e)return new Ra({targetGeometry:new lt,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:l,size:d}=e,y=[n?d[0]-n.left-n.right:d[0],n?d[1]-n.top-n.bottom:d[1]];let v=null;t instanceof Ra?v=t:t.viewpoint?v=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(v=t.target);let x=null;v&&v.targetGeometry?x=v.targetGeometry:t instanceof Ct?x=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(x=await Oy(t.center,e,i)||await Oy(t.extent,e,i)||await Oy(t.target,e,i)||await Oy(t,e,i)),!x&&l&&l.targetGeometry?x=l.targetGeometry:!x&&e.extent&&(x=e.extent),i||(i=RF(e.spatialReference||e.extent||x)),Hd()||Ji(x.spatialReference,i)||Jl(x,i)||await Oh();const $=K3(x.center??x,i);let E=0;if(v&&v.targetGeometry!=null&&v.targetGeometry.type==="point")E=v.scale;else if("scale"in t&&t.scale)E=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)E=r.zoomToScale(t.zoom);else if(Array.isArray(x)||x.type==="point"||x.type==="extent"&&x.width===0&&x.height===0){const L=K3(e.extent,i);E=L!=null?_0(L,y):e.extent?_0(e.extent,y):l.scale}else E=_0(K3(x.extent,i),y);const k=bae(t);k&&(k.min&&k.min>E?E=k.min:k.max&&k.max<E&&(E=k.max));let P=0;v?P=v.rotation:t.hasOwnProperty("rotation")?P=t.rotation:l&&(P=l.rotation);let D=new Ra({targetGeometry:$,scale:E,rotation:P});return r&&(D=r.fit(D),r.constrainByGeometry(D),r.rotationEnabled||(D.rotation=P)),D}function sa(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function _ae(t,e,i){return i?Ar(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Um(t,e,.5)}const xae=function(){const t=Ui();return function(e,i,r){const n=i.targetGeometry;s$(t,n);const l=.5*gf(i);return e.xmin=t[0]-l*r[0],e.ymin=t[1]-l*r[1],e.xmax=t[0]+l*r[0],e.ymax=t[1]+l*r[1],e.spatialReference=n.spatialReference,e}}();function Sae(t,e,i,r,n){var l;return Z4(t,e,i.center),t.scale=_0(i,r),(l=n==null?void 0:n.constraints)==null||l.constrain(t),t}function Mae(t,e,i,r){return a$(t,e,i,r),t$(t,t)}const FF=function(){const t=Ui();return function(e,i,r){return r$(e,Eae(e,i),_ae(t,i,r))}}(),$ae=function(){const t=Mh(),e=Ui();return function(i,r,n,l){const d=gf(r),y=n$(r);return Ar(e,d,d),_F(t,e),Gm(t,t,y),W0(t,t,FF(e,n,l)),W0(t,t,[0,l.top-l.bottom]),Ar(i,t[4],t[5])}}();function gf(t){return t.scale*Tae(t.targetGeometry)}function Tae(t){return t!=null&&Cr(t.spatialReference)?1/(jF(t.spatialReference)*DF*LF):1}function n$(t){return QM(t.rotation)||0}function Iae(t){return Cr(t)?jF(t)*DF*LF:1}function Eae(t,e){return Um(t,e,.5)}const o$=function(){const t=Ui(),e=Ui(),i=Ui();return function(r,n,l,d,y,v){return IF(t,n),Um(e,l,.5*v),Ar(i,1/d*v,-1/d*v),i$(r,e),y&&Gm(r,r,y),E_(r,r,i),W0(r,r,t),r}}(),a$=function(){const t=Ui();return function(e,i,r,n){const l=gf(i),d=n$(i);return s$(t,i.targetGeometry),o$(e,t,r,l,d,n)}}(),Aae=function(){const t=Ui();return function(e,i,r,n){const l=gf(i);return s$(t,i.targetGeometry),o$(e,t,r,l,0,n)}}();function kae(t){const e=Uo(t);return e?e.valid[1]-e.valid[0]:0}function Pae(t,e){return Math.round(kae(t)/e)}const Cae=function(){const t=Ui(),e=Ui(),i=[0,0,0];return function(r,n,l){pm(t,r,n),K4(t,t),pm(e,r,l),K4(e,e),AF(i,t,e);let d=Math.acos(EF(t,e)/(Xw(t)*Xw(e)))*vae;return i[2]<0&&(d=-d),isNaN(d)&&(d=0),d}}(),Oae=function(){const t=Ui();return function(e,i,r,n){const l=e.targetGeometry;return sa(e,i),$ae(t,i,r,n),l.x+=t[0],l.y+=t[1],e}}(),Z4=function(t,e,i){sa(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},Lae=function(){const t=Ui();return function(e,i,r,n,l){l||(l="center"),r$(t,r,n),Um(t,t,.5);const d=t[0],y=t[1];switch(l){case"center":Ar(t,0,0);break;case"left":Ar(t,-d,0);break;case"top":Ar(t,0,y);break;case"right":Ar(t,d,0);break;case"bottom":Ar(t,0,-y);break;case"top-left":Ar(t,-d,y);break;case"bottom-left":Ar(t,-d,-y);break;case"top-right":Ar(t,d,y);break;case"bottom-right":Ar(t,d,-y)}return A_(e,i,t),e}}();function ySe(t,e,i){return sa(t,e),t.rotation+=i,t}function Dae(t,e,i){return sa(t,e),t.rotation=i,t}const Rae=function(){const t=Ui();return function(e,i,r,n,l){return sa(e,i),isNaN(r)||r===0||(zF(t,n,i,l),e.scale=i.scale*r,VF(t,t,e,l),A_(e,e,Ar(t,t[0]-n[0],n[1]-t[1]))),e}}();function o8(t,e,i){return sa(t,e),t.scale=i,t}const NF=function(){const t=Ui();return function(e,i,r,n,l,d){return sa(e,i),isNaN(r)||r===0||(zF(t,l,i,d),e.scale=i.scale*r,e.rotation+=n,VF(t,t,e,d),A_(e,e,Ar(t,t[0]-l[0],l[1]-t[1]))),e}}(),mSe=function(){const t=Ui(),e=Ui();return function(i,r,n,l,d,y,v){return FF(e,y,v),SF(t,d,e),l?NF(i,r,n,l,t,y):Rae(i,r,n,t,y)}}(),zF=function(){const t=Mh();return function(e,i,r,n){return Oa(e,i,Mae(t,r,n,1))}}(),VF=function(){const t=Mh();return function(e,i,r,n){return Oa(e,i,a$(t,r,n,1))}}(),A_=function(){const t=Ui(),e=Mh();return function(i,r,n){sa(i,r);const l=gf(r),d=i.targetGeometry;return wF(e,n$(r)),E_(e,e,Hm(l,l)),Oa(t,n,e),d.x+=t[0],d.y+=t[1],i}}();let jae=class{constructor(e,i,r,n){const l=e.targetGeometry,d=i.targetGeometry;n?typeof n=="string"&&(n=$oe(n)||Fn.ease):n=Fn.ease,this.easing=n,this.duration=r,this.sCenterX=l.x,this.sCenterY=l.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=d.x,this.tCenterY=d.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let n,l,d,y;i>=1?(n=this.tCenterX,l=this.tCenterY,d=this.tRotation,y=this.tScale):(n=this.sCenterX+r*this.dCenterX,l=this.sCenterY+r*this.dCenterY,d=this.sRotation+r*this.dRotation,y=this.sScale+r*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=l,e.scale=y,e.rotation=d}},cl=class extends Be{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Fn.ease,this.view=null,this.viewpoint=new Ra({targetGeometry:new lt,scale:0,rotation:0}),this._updateTask=O0({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Ii(this._updateTask)}animate(e,i,r){this.stop();const n=this.viewpoint;sa(n,i),this.transition=new jae(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const l=()=>{var d,y;this.animation===e&&this._updateTask&&(e.state==="finished"&&((d=this.transition)==null||d.applyRatio(this.viewpoint,1),(y=this.view)!=null&&y.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(l,l),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new Y4({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==Y4.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const l=this.transition,d=(performance.now()-this._startTime)/l.duration,y=d>=1;l.applyRatio(this.viewpoint,d),y&&((r=this.animation)==null||r.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};g([S()],cl.prototype,"animation",void 0),g([S()],cl.prototype,"duration",void 0),g([S()],cl.prototype,"transition",void 0),g([S()],cl.prototype,"easing",void 0),g([S()],cl.prototype,"view",void 0),g([S()],cl.prototype,"viewpoint",void 0),cl=g([J("esri.views.2d.AnimationManager")],cl);const Fae=cl;let Nae=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var d,y;if(this._updateRequested=!1,(d=this.view)==null?void 0:d.destroyed)return;const{allLayerViews:i,graphicsView:r,labelManager:n,state:{id:l}}=this.view;i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==l&&(n.viewChange(),n.lastUpdateId=l),n.updateRequested&&n.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==l&&(r.viewChange(),r.lastUpdateId=l),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((y=this._frameTaskHandle)==null||y.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=me(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=O0(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function Oi(){return Promise.all([le(()=>import("./webglDeps-30844d90.js"),["assets/webglDeps-30844d90.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/ProgramTemplate-05235e0a.js","assets/programUtils-c964fa40.js","assets/NestedMap-1b5db22e.js"]),le(()=>import("./mapViewDeps-00672561.js"),["assets/mapViewDeps-00672561.js","assets/CIMResourceManager-b8596627.js","assets/fontUtils-fc0691f0.js","assets/Rasterizer-4873c8da.js","assets/cimAnalyzer-a75fa5be.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-5e0e38c0.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/rasterizingUtils-9bca9145.js","assets/imageutils-9adfcaac.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/BufferPool-ede83915.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/enums-fb086c25.js","assets/programUtils-c964fa40.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-a86fa27a.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f0e74e96.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/RenderingContext-0a1ced51.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/GraphicContainer-cc0b4924.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-08b983c3.js"])])}const Gf=()=>Oi().then(()=>le(()=>import("./TileLayerView2D-a03b30ce.js"),["assets/TileLayerView2D-a03b30ce.js","assets/Rasterizer-4873c8da.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-5e0e38c0.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/rasterizingUtils-9bca9145.js","assets/EffectView-bf3c1891.js","assets/Container-01e66e42.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/BufferPool-ede83915.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-a86fa27a.js","assets/imageutils-9adfcaac.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f0e74e96.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-d627dbe0.js","assets/BitmapTileContainer-f3d5ae91.js","assets/Bitmap-7fa768bb.js","assets/TileContainer-42268b14.js","assets/LayerView-123af3c3.js","assets/HighlightGraphicContainer-8d83ec93.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/RefreshableLayerView-d7ad5a62.js","assets/drapedUtils-5d6e5bdf.js","assets/popupUtils-af378d79.js"])),tp=()=>Oi().then(()=>le(()=>import("./FeatureLayerView2D-3c534b4a.js"),["assets/FeatureLayerView2D-3c534b4a.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/BitmapTileContainer-f3d5ae91.js","assets/Bitmap-7fa768bb.js","assets/TileContainer-42268b14.js","assets/CircularArray-ef508845.js","assets/BufferPool-ede83915.js","assets/FeatureContainer-cb4c1483.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),a8={"base-dynamic":()=>Oi().then(()=>le(()=>import("./BaseDynamicLayerView2D-2f7e3248.js"),["assets/BaseDynamicLayerView2D-2f7e3248.js","assets/BitmapContainer-99a4fd90.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/ExportStrategy-14e34e57.js","assets/Bitmap-7fa768bb.js","assets/RefreshableLayerView-d7ad5a62.js"])),"base-tile":Gf,"bing-maps":Gf,csv:tp,"geo-rss":()=>Oi().then(()=>le(()=>import("./GeoRSSLayerView2D-71f59094.js"),["assets/GeoRSSLayerView2D-71f59094.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/GraphicContainer-cc0b4924.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js"])),feature:tp,geojson:tp,graphics:()=>Oi().then(()=>le(()=>import("./GraphicsLayerView2D-f1902dd3.js"),["assets/GraphicsLayerView2D-f1902dd3.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/GraphicContainer-cc0b4924.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js"])),group:()=>Oi().then(()=>le(()=>import("./GroupLayerView2D-97f57ce3.js"),["assets/GroupLayerView2D-97f57ce3.js","assets/GroupContainer-42d111c3.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js"])),imagery:()=>Oi().then(()=>le(()=>import("./ImageryLayerView2D-52ff1f0e.js"),["assets/ImageryLayerView2D-52ff1f0e.js","assets/RasterVFDisplayObject-d29dcc5b.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-f67a06a3.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/GraphicsView2D-d2ce3f60.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/visualVariablesUtils-860f1be8.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-8d83ec93.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-99a4fd90.js","assets/Bitmap-7fa768bb.js","assets/ExportStrategy-14e34e57.js","assets/rasterProjectionHelper-71a535ff.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),"imagery-tile":()=>Oi().then(()=>le(()=>import("./ImageryTileLayerView2D-e2deb142.js"),["assets/ImageryTileLayerView2D-e2deb142.js","assets/multidimensionalUtils-32a5fa6c.js","assets/RasterVFDisplayObject-d29dcc5b.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-f67a06a3.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/rasterUtils-6562c031.js","assets/TiledDisplayObject-f3761b81.js","assets/TileContainer-42268b14.js","assets/RawBlockCache-e573ca48.js","assets/rasterProjectionHelper-71a535ff.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-b828dc39.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),kml:()=>Oi().then(()=>le(()=>import("./KMLLayerView2D-3d86c1c7.js"),["assets/KMLLayerView2D-3d86c1c7.js","assets/kmlUtils-d1bb72aa.js","assets/Bitmap-7fa768bb.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/BitmapContainer-99a4fd90.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/GraphicContainer-cc0b4924.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-71a535ff.js","assets/RenderingContext-0a1ced51.js","assets/programUtils-c964fa40.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-f0e74e96.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-6562c031.js"])),"knowledge-graph":()=>Oi().then(()=>le(()=>import("./KnowledgeGraphLayerView2D-244119a3.js"),["assets/KnowledgeGraphLayerView2D-244119a3.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js"])),"link-chart":()=>Oi().then(()=>le(()=>import("./KnowledgeGraphLayerView2D-244119a3.js"),["assets/KnowledgeGraphLayerView2D-244119a3.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js"])),"knowledge-graph-sublayer":tp,"map-image":()=>Oi().then(()=>le(()=>import("./MapImageLayerView2D-08976e52.js"),["assets/MapImageLayerView2D-08976e52.js","assets/BitmapContainer-99a4fd90.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/GraphicsView2D-d2ce3f60.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/visualVariablesUtils-860f1be8.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-8d83ec93.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-14e34e57.js","assets/Bitmap-7fa768bb.js","assets/RefreshableLayerView-d7ad5a62.js","assets/drapedUtils-5d6e5bdf.js","assets/popupUtils-af378d79.js"])),"map-notes":()=>Oi().then(()=>le(()=>import("./MapNotesLayerView2D-29fc4752.js"),["assets/MapNotesLayerView2D-29fc4752.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/GroupContainer-42d111c3.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/GraphicContainer-cc0b4924.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js"])),media:()=>Oi().then(()=>le(()=>import("./MediaLayerView2D-6ac80c8a.js"),["assets/MediaLayerView2D-6ac80c8a.js","assets/perspectiveUtils-2d5f809d.js","assets/normalizeUtilsSync-7ac4d606.js","assets/mat3f64-221ce671.js","assets/Rasterizer-4873c8da.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-5e0e38c0.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/rasterizingUtils-9bca9145.js","assets/EffectView-bf3c1891.js","assets/Container-01e66e42.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/BufferPool-ede83915.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-a86fa27a.js","assets/imageutils-9adfcaac.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f0e74e96.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-d2ce3f60.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-123af3c3.js"])),"ogc-feature":()=>Oi().then(()=>le(()=>import("./OGCFeatureLayerView2D-201caf9e.js"),["assets/OGCFeatureLayerView2D-201caf9e.js","assets/FeatureLayerView2D-3c534b4a.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/BitmapTileContainer-f3d5ae91.js","assets/Bitmap-7fa768bb.js","assets/TileContainer-42268b14.js","assets/CircularArray-ef508845.js","assets/BufferPool-ede83915.js","assets/FeatureContainer-cb4c1483.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),"open-street-map":Gf,"oriented-imagery":tp,route:()=>Oi().then(()=>le(()=>import("./RouteLayerView2D-069fa2d9.js"),["assets/RouteLayerView2D-069fa2d9.js","assets/Stop-8816db47.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/GraphicContainer-cc0b4924.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js"])),stream:()=>Oi().then(()=>le(()=>import("./StreamLayerView2D-c4675234.js"),["assets/StreamLayerView2D-c4675234.js","assets/FeatureLayerView2D-3c534b4a.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/BitmapTileContainer-f3d5ae91.js","assets/Bitmap-7fa768bb.js","assets/TileContainer-42268b14.js","assets/CircularArray-ef508845.js","assets/BufferPool-ede83915.js","assets/FeatureContainer-cb4c1483.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),"subtype-group":()=>Oi().then(()=>le(()=>import("./SubtypeGroupLayerView2D-9b666b5a.js"),["assets/SubtypeGroupLayerView2D-9b666b5a.js","assets/FeatureLayerView2D-3c534b4a.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/BitmapTileContainer-f3d5ae91.js","assets/Bitmap-7fa768bb.js","assets/TileContainer-42268b14.js","assets/CircularArray-ef508845.js","assets/BufferPool-ede83915.js","assets/FeatureContainer-cb4c1483.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),tile:Gf,"vector-tile":()=>Oi().then(()=>le(()=>import("./VectorTileLayerView2D-1e7e3316.js"),["assets/VectorTileLayerView2D-1e7e3316.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/rasterizingUtils-9bca9145.js","assets/floatRGBA-79a9de9b.js","assets/VertexArrayObject-ab47a1d6.js","assets/config-1337d16e.js","assets/TiledDisplayObject-f3761b81.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-1d7e752a.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-42268b14.js","assets/WGLContainer-a7ca1fab.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/earcut-27ea47a3.js","assets/StyleRepository-0cc21e5c.js","assets/GeometryUtils-53652037.js","assets/LayerView-123af3c3.js"])),video:()=>Oi().then(()=>le(()=>import("./VideoLayerView2D-ebf5bec5.js"),["assets/VideoLayerView2D-ebf5bec5.js","assets/LayerView-123af3c3.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js"])),wcs:()=>Oi().then(()=>le(()=>import("./ImageryTileLayerView2D-e2deb142.js"),["assets/ImageryTileLayerView2D-e2deb142.js","assets/multidimensionalUtils-32a5fa6c.js","assets/RasterVFDisplayObject-d29dcc5b.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-f67a06a3.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/rasterUtils-6562c031.js","assets/TiledDisplayObject-f3761b81.js","assets/TileContainer-42268b14.js","assets/RawBlockCache-e573ca48.js","assets/rasterProjectionHelper-71a535ff.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-b828dc39.js","assets/popupUtils-af378d79.js","assets/RefreshableLayerView-d7ad5a62.js"])),"web-tile":Gf,wfs:tp,wms:()=>Oi().then(()=>le(()=>import("./WMSLayerView2D-4e1d609a.js"),["assets/WMSLayerView2D-4e1d609a.js","assets/BitmapContainer-99a4fd90.js","assets/WGLContainer-a7ca1fab.js","assets/definitions-5e0e38c0.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/earcut-27ea47a3.js","assets/LayerView-123af3c3.js","assets/ExportStrategy-14e34e57.js","assets/Bitmap-7fa768bb.js","assets/RefreshableLayerView-d7ad5a62.js","assets/ExportWMSImageParameters-865cc052.js"])),wmts:()=>Oi().then(()=>le(()=>import("./WMTSLayerView2D-1d97de6f.js"),["assets/WMTSLayerView2D-1d97de6f.js","assets/imageUtils-d627dbe0.js","assets/BitmapTileContainer-f3d5ae91.js","assets/Bitmap-7fa768bb.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/definitions-5e0e38c0.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/TiledDisplayObject-f3761b81.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-1d7e752a.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/TileContainer-42268b14.js","assets/LayerView-123af3c3.js","assets/RefreshableLayerView-d7ad5a62.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function zae(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const l8={hasLayerViewModule:t=>a8[t.type]!=null,importLayerView:t=>{const e=a8[t.type];if(e==null)throw zae(t);return e(t)}};function Vae(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n=Number.POSITIVE_INFINITY,l=0,d=0;const y=[0,0],v=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const x of v)for(let $=0;$<x.length-1;$++){bZ(y,r,x,$);const E=qm(r,y);E<n&&(n=E,l=y[0],d=y[1])}return{coordinate:new lt({x:l,y:d,spatialReference:i}),distance:n}}var X4;let id=X4=class extends h7(Be){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Jh(this.geometry,this.spatialReference)}catch(t){return ve.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?e_(this.normalizedGeometry,i):RO(this.normalizedGeometry,i))return t;const{coordinate:r}=Vae(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new X4({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};g([S({constructOnly:!0})],id.prototype,"geometry",void 0),g([S({readOnly:!0})],id.prototype,"normalizedGeometry",null),g([S({constructOnly:!0})],id.prototype,"spatialReference",void 0),id=X4=g([J("esri.views.2d.constraints.GeometryConstraint")],id);var Q4;let Ly=Q4=class extends h7(Be){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new Q4({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};g([S()],Ly.prototype,"enabled",void 0),g([S()],Ly.prototype,"rotationEnabled",void 0),Ly=Q4=g([J("esri.views.2d.constraints.RotationConstraint")],Ly);const BF=Ly;var eS;let Os=eS=class extends h7(Be){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:l}=this,d=-1,y=-1,v=!1,x=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map($=>$.clone()),e.sort(($,E)=>E.scale-$.scale),e.forEach(($,E)=>$.level=E);for(const $ of e)!v&&i>0&&i>=$.scale&&(d=$.level,v=!0),!x&&r>0&&r>=$.scale&&(y=t?t.level:-1,x=!0),t=$;n===-1&&(n=i===0?0:d),l===-1&&(l=r===0?e.length-1:y),n=Math.max(n,0),n=Math.min(n,e.length-1),l=Math.max(l,0),l=Math.min(l,e.length-1),n>l&&([n,l]=[l,n]),i=e[n].scale,r=e[l].scale,e.splice(0,n),e.splice(l-n+1,e.length),e.forEach(($,E)=>{this._lodByScale[$.scale]=$,this._scales[E]=$.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",l),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,l=e&&e.targetGeometry,d=r!==0&&t.scale<r,y=i!==0&&t.scale>i;if(d||y){const v=y?i:r;if(e&&l){const x=(v-e.scale)/(t.scale-e.scale);n.x=l.x+(n.x-l.x)*x,n.y=l.y+(n.y-l.y)*x}t.scale=v}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new eS({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};g([S({readOnly:!0})],Os.prototype,"effectiveLODs",void 0),g([S({readOnly:!0})],Os.prototype,"effectiveMinZoom",void 0),g([S({readOnly:!0})],Os.prototype,"effectiveMaxZoom",void 0),g([S({readOnly:!0})],Os.prototype,"effectiveMinScale",void 0),g([S({readOnly:!0})],Os.prototype,"effectiveMaxScale",void 0),g([S()],Os.prototype,"lods",void 0),g([S()],Os.prototype,"minZoom",void 0),g([S()],Os.prototype,"maxZoom",void 0),g([S()],Os.prototype,"minScale",void 0),g([S()],Os.prototype,"maxScale",void 0),g([S()],Os.prototype,"snapToZoom",void 0),Os=eS=g([J("esri.views.2d.constraints.ZoomConstraint")],Os);const GF=Os,Bae={base:null,key:"type",typeMap:{extent:Ct,polygon:Va}};let Fi=class extends Be{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ze}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new id({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new BF({rotationEnabled:this.rotationEnabled})}get _zoom(){var v;const e=this._get("_zoom"),i=this.lods||((v=this.view)==null?void 0:v.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,l=this.minScale,d=this.maxScale,y=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===l&&e.maxScale===d&&e.snapToZoom===y?e:new GF({lods:i,minZoom:r,maxZoom:n,minScale:l,maxScale:d,snapToZoom:y})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};g([S({readOnly:!0})],Fi.prototype,"effectiveLODs",null),g([S({readOnly:!0})],Fi.prototype,"effectiveMinScale",null),g([S({readOnly:!0})],Fi.prototype,"effectiveMaxScale",null),g([S({readOnly:!0})],Fi.prototype,"effectiveMinZoom",null),g([S({readOnly:!0})],Fi.prototype,"effectiveMaxZoom",null),g([S({types:Bae,value:null})],Fi.prototype,"geometry",null),g([S({type:[Yu]})],Fi.prototype,"lods",void 0),g([S()],Fi.prototype,"minScale",void 0),g([S()],Fi.prototype,"maxScale",void 0),g([S()],Fi.prototype,"minZoom",void 0),g([S()],Fi.prototype,"maxZoom",void 0),g([S()],Fi.prototype,"rotationEnabled",void 0),g([S()],Fi.prototype,"snapToZoom",void 0),g([S({type:ze})],Fi.prototype,"customConstraints",void 0),g([S()],Fi.prototype,"view",void 0),g([S({readOnly:!0})],Fi.prototype,"version",null),g([S({type:id,readOnly:!0})],Fi.prototype,"_geometry",null),g([S({type:BF})],Fi.prototype,"_rotation",null),g([S({readOnly:!0,type:GF})],Fi.prototype,"_zoom",null),Fi=g([J("esri.views.2d.MapViewConstraints")],Fi);const UF=Fi;let Gae=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},qF=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new jw(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Ii(this._schedule),this._task=Ii(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let l=null;i&&(l=Hn(i,()=>n.abort()));const d=()=>{const $=this._processingItems.get(e);$&&$.controller.abort(),y(),x.reject(Ei())},y=()=>{v.remove(),l!=null&&l.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},v=_M(n.signal,d),x=Yn();return this._deferreds.set(e,x),this._controllers.set(e,n),x.promise.then(y,y),this._queue.push(e),this._scheduleNext(),x.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=tf(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new Gae(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(l){this._processError(n,l)}Kl(i)?(n.promise=i,i.then(l=>this._processResult(n,l),l=>this._processError(n,l))):this._processResult(n,i)}get test(){return{update:e=>this.runTask(e)}}};function Uae(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const Z3=new Set,Gg=[],ip=new Map,u8=[0,0];let cu=class extends Be{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new qF({concurrency:e,process:(r,n)=>{const l=this._keyToItem.get(r);return i(l,{signal:n})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=ri(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const r=e.key.id+"-"+i;if(this.has(r))return this.get(r);const n=this._queue.push(r),l=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),n.then(l,l),this.notifyChange("updating"),n}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach($=>{const E=this._keyToItem.get($),k=this.tileInfoView.getTileScale(E.key);ip.has(k)||(ip.set(k,[]),r=Math.max(k,r),n=Math.min(k,n)),ip.get(k).push(E.key),Z3.add(k)});let l=this.state.scale;ip.has(l)||(Uae(Gg,Z3),Gg.sort(($,E)=>$-E),l=Gg.reduce(($,E)=>Math.abs(E-l)<Math.abs($-l)?E:$,Gg[0])),l=Math.min(l,r),l=Math.max(l,n);const d=ip.get(l),y=i.getClosestInfoForScale(l),v=y.getColumnForX(this.state.center[0]),x=y.getRowForY(this.state.center[1]);return d.sort(($,E)=>{const k=y.denormalizeCol($.col,$.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((v-k)*(v-k)+(x-$.row)*(x-$.row))-Math.sqrt((v-P)*(v-P)+(x-E.row)*(x-E.row))}),Z3.clear(),ip.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,l=Number.POSITIVE_INFINITY;return e.forEach(d=>{const y=this._keyToItem.get(d);i.getTileCoords(u8,y.key);const v=qm(u8,r);v<l&&(l=v,n=y.key)}),n.id}};g([S({constructOnly:!0})],cu.prototype,"concurrency",void 0),g([S({constructOnly:!0})],cu.prototype,"process",void 0),g([S()],cu.prototype,"state",void 0),g([S({constructOnly:!0})],cu.prototype,"strategy",void 0),g([S({constructOnly:!0})],cu.prototype,"tileInfoView",void 0),g([S({readOnly:!0})],cu.prototype,"updating",null),cu=g([J("esri.views.2d.tiling.PagedTileQueue")],cu);let jd=class Ic{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new Ic(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[l,d,y,v]=e.split("/");this.level=parseFloat(l),this.row=parseFloat(d),this.col=parseFloat(y),this.world=parseFloat(v)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Ic(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new Ic(e,i,r,n),new Ic(e,i,r+1,n),new Ic(e,i+1,r,n),new Ic(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};jd.pool=new Nh(jd,null,null,25,50);function du(t,e){return[t,e]}function Qh(t,e,i){return t[0]=e,t[1]=i,t}function qae(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const co=new jd("0/0/0/0");let Hae=class HF{static create(e,i,r=null){const n=Uo(e.spatialReference),l=i.origin||du(e.origin.x,e.origin.y),d=du(e.size[0]*i.resolution,e.size[1]*i.resolution),y=du(-1/0,-1/0),v=du(1/0,1/0),x=du(1/0,1/0);r!=null&&(Qh(y,Math.max(0,Math.floor((r.xmin-l[0])/d[0])),Math.max(0,Math.floor((l[1]-r.ymax)/d[1]))),Qh(v,Math.max(0,Math.floor((r.xmax-l[0])/d[0])),Math.max(0,Math.floor((l[1]-r.ymin)/d[1]))),Qh(x,v[0]-y[0]+1,v[1]-y[1]+1));const{cols:$,rows:E}=i;let k,P,D,L;return!r&&$&&E&&(Qh(y,$[0],E[0]),Qh(v,$[1],E[1]),Qh(x,$[1]-$[0]+1,E[1]-E[0]+1)),e.isWrappable?(k=du(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),x[1]),P=du(Math.floor((n.origin[0]-l[0])/d[0]),y[1]),D=du(k[0]+P[0]-1,v[1]),L=!0):(P=y,D=v,k=x,L=!1),new HF(i.level,i.resolution,i.scale,l,y,v,x,d,P,D,k,L)}constructor(e,i,r,n,l,d,y,v,x,$,E,k){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=l,this.last=d,this.size=y,this.norm=v,this.worldStart=x,this.worldEnd=$,this.worldSize=E,this.wrap=k}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){co.set(i);const n=r?co.col:this.denormalizeCol(co.col,co.world),l=co.row;return qae(e,this.getXForColumn(n),this.getYForRow(l+1),this.getXForColumn(n+1),this.getYForRow(l)),e}getTileCoords(e,i,r=!1){co.set(i);const n=r?co.col:this.denormalizeCol(co.col,co.world);return Array.isArray(e)?Qh(e,this.getXForColumn(n),this.getYForRow(co.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(co.row)),e}},fm=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:l}=n;if(r.length!==0)for(const{row:d,colFrom:y,colTo:v}of r)for(let x=y;x<=v;x++)e.call(i,l,d,n.normalizeCol(x),n.getWorldForColumn(x))}};fm.pool=new Nh(fm);let X3=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const mi=new jd("0/0/0/0");let Wae=class WF{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[l,d]=i,y=l-r,v=d-n,x=v!==0?y/v:0,$=(Math.ceil(n)-n)*x,E=(Math.floor(n)-n)*x;return new WF(r,Math.floor(n),Math.ceil(d),x,y<0?$:E,y<0?E:$,y<0?l:r,y<0?r:l)}constructor(e,i,r,n,l,d,y,v){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=l,this.rightAdjust=d,this.leftBound=y,this.rightBound=v}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Hs=[[0,0],[0,0],[0,0],[0,0]],Jae=1e-6;let Yae=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const l=e.lods.filter(y=>y.level>=r&&y.level<=n);this.minScale=l[0].scale,this.maxScale=l[l.length-1].scale;const d=this._lodInfos=l.map(y=>Hae.create(e,y,i));l.forEach((y,v)=>{this._infoByLevel[y.level]=d[v],this._infoByScale[y.scale]=d[v],this.scales[v]=y.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){mi.set(i);const n=this._infoByLevel[mi.level];return n?n.getTileBounds(e,mi,r):e}getTileCoords(e,i,r=!1){mi.set(i);const n=this._infoByLevel[mi.level];return n?n.getTileCoords(e,mi,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const l=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),d=fm.pool.acquire(l),y=this._wrap;let v,x,$,E=1/0,k=-1/0;const P=d.spans;Hs[0][0]=Hs[0][1]=Hs[1][1]=Hs[3][0]=-i,Hs[1][0]=Hs[2][0]=e.size[0]+i,Hs[2][1]=Hs[3][1]=e.size[1]+i;for(const B of Hs)e.toMap(B,B),B[0]=l.getColumnForX(B[0]),B[1]=l.getRowForY(B[1]);const D=[];let L=3;for(let B=0;B<4;B++){if(Hs[B][1]===Hs[L][1]){L=B;continue}const W=Wae.create(Hs[B],Hs[L]);E=Math.min(W.ymin,E),k=Math.max(W.ymax,k),D[W.ymin]===void 0&&(D[W.ymin]=[]),D[W.ymin].push(W),L=B}if(E==null||k==null||k-E>100)return null;let N=[];for(v=E;v<k;){D[v]!=null&&(N=N.concat(D[v])),x=1/0,$=-1/0;for(let B=N.length-1;B>=0;B--){const W=N[B];x=Math.min(x,W.getLeftCol()),$=Math.max($,W.getRightCol())}if(x=Math.floor(x),$=Math.floor($),v>=l.first[1]&&v<=l.last[1])if(y)if(l.size[0]<l.worldSize[0]){const B=Math.floor($/l.worldSize[0]);for(let W=Math.floor(x/l.worldSize[0]);W<=B;W++)P.push(new X3(v,Math.max(l.getFirstColumnForWorld(W),x),Math.min(l.getLastColumnForWorld(W),$)))}else P.push(new X3(v,x,$));else x>l.last[0]||$<l.first[0]||(x=Math.max(x,l.first[0]),$=Math.min($,l.last[0]),P.push(new X3(v,x,$)));v+=1;for(let B=N.length-1;B>=0;B--){const W=N[B];W.ymax>=v?W.incrRow():N.splice(B,1)}}return d}getTileParentId(e){mi.set(e);const i=this._infoByLevel[mi.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(mi,this._lodInfos[r],mi),mi.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){mi.set(i);const r=this._infoByLevel[mi.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(mi,n,mi);const d=n.denormalizeCol(mi.col,mi.world);for(const y of e.spans)if(y.row===mi.row&&y.colFrom<=d&&y.colTo>=d)return!0}if(n.resolution<r.resolution){const[d,y,v,x]=e.spans.reduce((L,N)=>(L[0]=Math.min(L[0],N.row),L[1]=Math.max(L[1],N.row),L[2]=Math.min(L[2],N.colFrom),L[3]=Math.max(L[3],N.colTo),L),[1/0,-1/0,1/0,-1/0]),$=r.denormalizeCol(mi.col,mi.world),E=n.getColumnForX(r.getXForColumn($)),k=n.getRowForY(r.getYForRow(mi.row)),P=n.getColumnForX(r.getXForColumn($+1))-1,D=n.getRowForY(r.getYForRow(mi.row+1))-1;return!(E>x||P<v||k>y||D<d)}const l=n.denormalizeCol(mi.col,mi.world);return e.spans.some(d=>d.row===mi.row&&d.colFrom<=l&&d.colTo>=l)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=Uo(this.tileInfo.spatialReference),l=-r*(n.valid[1]-n.valid[0]);e[0]+=l,e[2]+=l}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+Jae)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}};function Kae(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const Q3=new Set,Ug=[],rp=new Map,h8=[0,0];let dl=class extends Be{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new qF({concurrency:e,process:(n,l)=>{const d=this._keyToItem.get(n);return i(d,{signal:l})},peeker:r==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=ri(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach($=>{const E=this._keyToItem.get($),k=this.tileInfoView.getTileScale(E.key);rp.has(k)||(rp.set(k,[]),r=Math.max(k,r),n=Math.min(k,n)),rp.get(k).push(E.key),Q3.add(k)});let l=this.state.scale;rp.has(l)||(Kae(Ug,Q3),Ug.sort(($,E)=>$-E),l=Ug.reduce(($,E)=>Math.abs(E-l)<Math.abs($-l)?E:$,Ug[0])),l=Math.min(l,r),l=Math.max(l,n);const d=rp.get(l),y=i.getClosestInfoForScale(l),v=y.getColumnForX(this.state.center[0]),x=y.getRowForY(this.state.center[1]);return d.sort(($,E)=>{const k=y.denormalizeCol($.col,$.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((v-k)*(v-k)+(x-$.row)*(x-$.row))-Math.sqrt((v-P)*(v-P)+(x-E.row)*(x-E.row))}),Q3.clear(),rp.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,l=Number.POSITIVE_INFINITY;return e.forEach(d=>{const y=this._keyToItem.get(d);i.getTileCoords(h8,y.key);const v=qm(h8,r);v<l&&(l=v,n=y.key)}),n.id}};g([S({constructOnly:!0})],dl.prototype,"concurrency",void 0),g([S({constructOnly:!0})],dl.prototype,"process",void 0),g([S()],dl.prototype,"state",void 0),g([S({constructOnly:!0})],dl.prototype,"strategy",void 0),g([S({constructOnly:!0})],dl.prototype,"tileInfoView",void 0),g([S({readOnly:!0})],dl.prototype,"updating",null),dl=g([J("esri.views.2d.tiling.TileQueue")],dl);const ESe=dl;let Zae=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];c8(this._tilePerId,e);for(let l=0;l<n.length;l++)if(n[l].id===e){n.splice(l,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let l=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&l>=0;)l!==e&&(n=this._pruneAroundCenterTile(n,i,r,l)),l--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const l=this._tileKeysPerLevel[n];if(!l||l.length===0)return e;const{size:d,origin:y}=this._tileInfoView.tileInfo,v=r*d[0],x=r*d[1],$=[0,0],E=[0,0];for(l.sort((k,P)=>($[0]=y.x+v*(k.col+.5),$[1]=y.y-x*(k.row+.5),E[0]=y.x+v*(P.col+.5),E[1]=y.y-x*(P.row+.5),Zw($,i)-Zw(E,i)));l.length>0;){const k=l.pop();if(this._removeTile(k.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),c8(this._tilePerId,e)}};function c8(t,e){t.delete(e)}const ec=new jd(0,0,0,0),Ka=new Map,tc=[],e5=[];let kSe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Zae(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var B,W;const{resampling:i,tileIndex:r}=this,{scale:n,center:l,resolution:d}=e.state,{minScale:y,maxScale:v}=this.tileInfoView,x=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>y||n<v))return this.tiles.length=0,void this.clear();const $=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!$)return this.tiles.length=0,void this.clear();const{spans:E,lodInfo:k}=$,{level:P}=k;this.tiles.length=0,r.forEach(q=>q.visible=!0);let D=0,L=0;if(E.length>0)for(const{row:q,colFrom:Y,colTo:ie}of E)for(let se=Y;se<=ie;se++){D++;const ue=ec.set(P,q,k.normalizeCol(se),k.getWorldForColumn(se)).id;let de=r.get(ue);if(de)de.isReady?(Ka.set(ue,de),L++):x||this._addParentTile(ue,Ka);else{if((B=this._tileCache)!=null&&B.has(ue)){if(de=this._tileCache.pop(ue),this.tileIndex.set(ue,de),de.isReady){Ka.set(ue,de),L++;continue}}else de=this.acquireTile(ec),this.tileIndex.set(ue,de);x||this._addParentTile(ue,Ka)}}const N=L===D;for(const[q,Y]of r){if(Ka.has(q))continue;ec.set(q);const ie=this.tileInfoView.intersects($,ec),se=this.cachePolicy==="purge"?ec.level!==P:ec.level>P;!ie||!x&&N?!se&&ie||tc.push(Y):Y.isReady?se&&this.cachePolicy==="purge"&&this._hasReadyAncestor(ec,P)?tc.push(Y):e5.push(Y):se&&tc.push(Y)}for(const q of e5)q.isReady&&Ka.set(q.key.id,q);for(const q of tc)this._tileCache?this._tileCache.add(q):this.releaseTile(q),r.delete(q.key.id);for(const q of Ka.values())this.tiles.push(q);for(const q of r.values())Ka.has(q.key.id)||(q.visible=!1);(W=this._tileCache)==null||W.prune(P,l,d),fm.pool.release($),e5.length=0,tc.length=0,Ka.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())this.tiles.includes(r)?e(r):tc.push(r);for(const r of tc)this.releaseTile(r),this.tileIndex.delete(r.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var l;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((l=this._tileCache)!=null&&l.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=za();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const l=za();if(this.tileInfoView.getTileBounds(l,n.key,!0),LZ(l,r))return!0}return!1}};function Qw(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Xae(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Qae(t,e,i,r,n,l){const d=new Float32Array(6);return d[0]=t,d[1]=e,d[2]=i,d[3]=r,d[4]=n,d[5]=l,d}function ele(t,e){return new Float32Array(t,e,6)}function JF(t,e,i,r){const n=e[r],l=e[r+1];t[r]=i[0]*n+i[2]*l+i[4],t[r+1]=i[1]*n+i[3]*l+i[5]}function tle(t,e,i,r=0,n=0,l=2){const d=n||e.length/l;for(let y=r;y<d;y++)JF(t,e,i,y*l)}Object.freeze(Object.defineProperty({__proto__:null,clone:Xae,create:Qw,createView:ele,fromValues:Qae,transform:JF,transformMany:tle},Symbol.toStringTag,{value:"Module"}));function ile(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function rle(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function YF(t,e,i,r,n,l,d,y,v,x){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=l,t[5]=d,t[6]=y,t[7]=v,t[8]=x,t}function KF(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function sle(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function nle(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],v=e[6],x=e[7],$=e[8],E=$*d-y*x,k=-$*l+y*v,P=x*l-d*v;let D=i*E+r*k+n*P;return D?(D=1/D,t[0]=E*D,t[1]=(-$*r+n*x)*D,t[2]=(y*r-n*d)*D,t[3]=k*D,t[4]=($*i-n*v)*D,t[5]=(-y*i+n*l)*D,t[6]=P*D,t[7]=(-x*i+r*v)*D,t[8]=(d*i-r*l)*D,t):null}function ole(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],v=e[6],x=e[7],$=e[8];return t[0]=d*$-y*x,t[1]=n*x-r*$,t[2]=r*y-n*d,t[3]=y*v-l*$,t[4]=i*$-n*v,t[5]=n*l-i*y,t[6]=l*x-d*v,t[7]=r*v-i*x,t[8]=i*d-r*l,t}function ale(t){const e=t[0],i=t[1],r=t[2],n=t[3],l=t[4],d=t[5],y=t[6],v=t[7],x=t[8];return e*(x*l-d*v)+i*(-x*n+d*y)+r*(v*n-l*y)}function l$(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=e[6],$=e[7],E=e[8],k=i[0],P=i[1],D=i[2],L=i[3],N=i[4],B=i[5],W=i[6],q=i[7],Y=i[8];return t[0]=k*r+P*d+D*x,t[1]=k*n+P*y+D*$,t[2]=k*l+P*v+D*E,t[3]=L*r+N*d+B*x,t[4]=L*n+N*y+B*$,t[5]=L*l+N*v+B*E,t[6]=W*r+q*d+Y*x,t[7]=W*n+q*y+Y*$,t[8]=W*l+q*v+Y*E,t}function tS(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=e[6],$=e[7],E=e[8],k=i[0],P=i[1];return t[0]=r,t[1]=n,t[2]=l,t[3]=d,t[4]=y,t[5]=v,t[6]=k*r+P*d+x,t[7]=k*n+P*y+$,t[8]=k*l+P*v+E,t}function ZF(t,e,i){const r=e[0],n=e[1],l=e[2],d=e[3],y=e[4],v=e[5],x=e[6],$=e[7],E=e[8],k=Math.sin(i),P=Math.cos(i);return t[0]=P*r+k*d,t[1]=P*n+k*y,t[2]=P*l+k*v,t[3]=P*d-k*r,t[4]=P*y-k*n,t[5]=P*v-k*l,t[6]=x,t[7]=$,t[8]=E,t}function lle(t,e,i){const r=i[0],n=i[1],l=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=l*e[6],t[7]=l*e[7],t[8]=l*e[8],t}function ule(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function hle(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function cle(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function dle(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ple(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function fle(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=i+i,y=r+r,v=n+n,x=i*d,$=r*d,E=r*y,k=n*d,P=n*y,D=n*v,L=l*d,N=l*y,B=l*v;return t[0]=1-E-D,t[3]=$-B,t[6]=k+N,t[1]=$+B,t[4]=1-x-D,t[7]=P-L,t[2]=k-N,t[5]=P+L,t[8]=1-x-E,t}function yle(t,e){const i=e[0],r=e[1],n=e[2],l=e[4],d=e[5],y=e[6],v=e[8],x=e[9],$=e[10],E=$*d-y*x,k=-$*l+y*v,P=x*l-d*v,D=i*E+r*k+n*P;if(!D)return null;const L=1/D;return t[0]=E*L,t[1]=(-$*r+n*x)*L,t[2]=(y*r-n*d)*L,t[3]=k*L,t[4]=($*i-n*v)*L,t[5]=(-y*i+n*l)*L,t[6]=P*L,t[7]=(-x*i+r*v)*L,t[8]=(d*i-r*l)*L,t}function mle(t,e){const i=e[0],r=e[1],n=e[2],l=e[3],d=e[4],y=e[5],v=e[6],x=e[7],$=e[8],E=e[9],k=e[10],P=e[11],D=e[12],L=e[13],N=e[14],B=e[15],W=i*y-r*d,q=i*v-n*d,Y=i*x-l*d,ie=r*v-n*y,se=r*x-l*y,ue=n*x-l*v,de=$*L-E*D,be=$*N-k*D,we=$*B-P*D,$e=E*N-k*L,ke=E*B-P*L,Ge=k*B-P*N;let Fe=W*Ge-q*ke+Y*$e+ie*we-se*be+ue*de;return Fe?(Fe=1/Fe,t[0]=(y*Ge-v*ke+x*$e)*Fe,t[1]=(v*we-d*Ge-x*be)*Fe,t[2]=(d*ke-y*we+x*de)*Fe,t[3]=(n*ke-r*Ge-l*$e)*Fe,t[4]=(i*Ge-n*we+l*be)*Fe,t[5]=(r*we-i*ke-l*de)*Fe,t[6]=(L*ue-N*se+B*ie)*Fe,t[7]=(N*Y-D*ue-B*q)*Fe,t[8]=(D*se-L*Y+B*W)*Fe,t):null}function gle(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function vle(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function ble(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function wle(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function XF(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function _le(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function xle(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function Sle(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Mle(t,e){const i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],v=t[6],x=t[7],$=t[8],E=e[0],k=e[1],P=e[2],D=e[3],L=e[4],N=e[5],B=e[6],W=e[7],q=e[8],Y=Qn();return Math.abs(i-E)<=Y*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(r-k)<=Y*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(n-P)<=Y*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(l-D)<=Y*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(d-L)<=Y*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(y-N)<=Y*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(v-B)<=Y*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(x-W)<=Y*Math.max(1,Math.abs(x),Math.abs(W))&&Math.abs($-q)<=Y*Math.max(1,Math.abs($),Math.abs(q))}function $le(t){const e=Qn(),i=t[0],r=t[1],n=t[2],l=t[3],d=t[4],y=t[5],v=t[6],x=t[7],$=t[8];return Math.abs(1-(i*i+l*l+v*v))<=e&&Math.abs(1-(r*r+d*d+x*x))<=e&&Math.abs(1-(n*n+y*y+$*$))<=e}const Tle=l$,Ile=XF;Object.freeze(Object.defineProperty({__proto__:null,add:wle,adjoint:ole,copy:rle,determinant:ale,equals:Mle,exactEquals:Sle,frob:ble,fromMat2d:ple,fromMat4:ile,fromQuat:fle,fromRotation:cle,fromScaling:dle,fromTranslation:hle,identity:KF,invert:nle,isOrthoNormal:$le,mul:Tle,multiply:l$,multiplyScalar:_le,multiplyScalarAndAdd:xle,normalFromMat4:mle,normalFromMat4Legacy:yle,projection:gle,rotate:ZF,scale:lle,scaleByVec2:ule,set:YF,str:vle,sub:Ile,subtract:XF,translate:tS,transpose:sle},Symbol.toStringTag,{value:"Module"}));function cb(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function Ele(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ale(t,e,i,r,n,l,d,y,v){const x=new Float32Array(9);return x[0]=t,x[1]=e,x[2]=i,x[3]=r,x[4]=n,x[5]=l,x[6]=d,x[7]=y,x[8]=v,x}function kle(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Ele,create:cb,createView:kle,fromValues:Ale},Symbol.toStringTag,{value:"Module"}));function QF(){return new Float32Array(2)}function Ple(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function J0(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function Cle(t,e){return new Float32Array(t,e,2)}function eN(){return QF()}function tN(){return J0(1,1)}function iN(){return J0(1,0)}function rN(){return J0(0,1)}const Ole=eN(),Lle=tN(),Dle=iN(),Rle=rN();Object.freeze(Object.defineProperty({__proto__:null,ONES:Lle,UNIT_X:Dle,UNIT_Y:Rle,ZEROS:Ole,clone:Ple,create:QF,createView:Cle,fromValues:J0,ones:tN,unitX:iN,unitY:rN,zeros:eN},Symbol.toStringTag,{value:"Module"}));function jle(t){return t instanceof Float32Array&&t.length>=2}function Fle(t){return Array.isArray(t)&&t.length>=2}function t5(t){return jle(t)||Fle(t)}var iS;const Za=[0,0];let ju=iS=class extends ge{constructor(t){super(t),this._viewpoint2D={center:Ui(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ct,this.id=0,this.inverseTransform=Mh(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Mh(),this.transformNoRotation=Mh(),this.displayMat3=cb(),this.displayViewMat3=cb(),this.viewMat3=cb(),this.viewMat2d=Qw(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=sa(i,t.viewpoint),this._set("size",dm(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new iS({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return t5(e)?Oa(t,e,this.inverseTransform):(Za[0]=e,Za[1]=i,Oa(t,Za,this.inverseTransform))}toScreen(t,e,i){return t5(e)?Oa(t,e,this.transform):(Za[0]=e,Za[1]=i,Oa(t,Za,this.transform))}toScreenNoRotation(t,e,i){return t5(e)?Oa(t,e,this.transformNoRotation):(Za[0]=e,Za[1]=i,Oa(t,Za,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return o$(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,l=this._get("size"),d=new Ra({targetGeometry:new lt(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",d),!l||!e||!i)return;this.resolution=gf(d),this.rotation=r,this.scale=i,this.spatialReference=e,dm(this.center,t);const y=l[0]!==0?2/l[0]:0,v=l[1]!==0?-2/l[1]:0;YF(this.displayMat3,y,0,0,0,v,0,-1,1,1);const x=KF(this.viewMat3),$=J0(l[0]/2,l[1]/2),E=J0(-l[0]/2,-l[1]/2),k=QM(r);tS(x,x,$),ZF(x,x,k),tS(x,x,E),l$(this.displayViewMat3,this.displayMat3,x);const P=i$(this.viewMat2d,$);return Gm(P,P,k),W0(P,P,E),xae(this.extent,d,l),a$(this.transform,d,l,n),t$(this.inverseTransform,this.transform),Aae(this.transformNoRotation,d,l,n),this.worldScreenWidth=Pae(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};g([S({readOnly:!0})],ju.prototype,"id",void 0),g([S({value:1,json:{write:!0}})],ju.prototype,"pixelRatio",null),g([S({json:{write:!0}})],ju.prototype,"size",null),g([S()],ju.prototype,"spatialReference",void 0),g([S({type:Ra,json:{write:!0}})],ju.prototype,"viewpoint",null),ju=iS=g([J("esri.views.2d.ViewState")],ju);const d8=ju;var rS,sS;let Il=rS=class extends Be{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new rS({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};g([S()],Il.prototype,"left",void 0),g([S()],Il.prototype,"top",void 0),g([S()],Il.prototype,"right",void 0),g([S()],Il.prototype,"bottom",void 0),Il=rS=g([J("esri.views.2d.PaddedViewState.Padding")],Il);let $p=sS=class extends d8{constructor(...t){super(...t),this.paddedViewState=new d8,this._updateContent=(()=>{const e=Ui();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Ar(e,r.left+r.right,r.top+r.bottom),pm(e,i,e),dm(n.size,e);const l=n.viewpoint;l&&(this.viewpoint=l)}})(),this.addHandles(me(()=>[this.size,this.padding],()=>this._updateContent(),qd)),this.padding=new Il,this.size=[0,0]}set padding(t){this._set("padding",t||new Il)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,Oae(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new sS({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};g([S()],$p.prototype,"paddedViewState",void 0),g([S({type:Il})],$p.prototype,"padding",null),g([S()],$p.prototype,"viewpoint",null),$p=sS=g([J("esri.views.2d.PaddedViewState")],$p);const Nle=$p;let fs=class extends Be{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([me(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},qd)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new lt({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ve.getLogger(this).error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;Z4(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void ve.getLogger(this).error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ve.getLogger(this).error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;Sae(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;Dae(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;o8(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var l;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ne("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(d){r=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:d})}if(r)return void ve.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Ra({targetGeometry:new lt,scale:0,rotation:0});sa(n,i),(l=this.constraints)==null||l.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,l;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const d=this._get("extent");return void(d&&(this._set("extent",void 0),this._set("center",d.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;o8(r,r,i),this.viewpoint=r,this._set("zoom",((l=this.constraints)==null?void 0:l.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),l=this._get("extent"),d=this._get("scale"),y=this._get("rotation"),v=this._get("viewpoint"),x=this._get("zoom"),$=x!=null&&r!=null&&r.zoomToScale(x)||void 0;let E,k,P;const D=v==null?void 0:v.rotation,L=v==null?void 0:v.targetGeometry;(L==null?void 0:L.type)==="extent"?E=L:(L==null?void 0:L.type)==="point"&&(k=L,P=v==null?void 0:v.scale);const N=l??E;return{center:n??k??(N==null?void 0:N.center),rotation:y??D,scale:(d??$??P??(N&&_0(N,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var d;const l=e.targetGeometry;try{this._project(e,r)}catch(y){ve.getLogger(this).warn(new Kn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:l.toJSON(),spatialReference:r,error:y})),e.targetGeometry=n||new lt({x:0,y:0,spatialReference:r})}(d=this.constraints)==null||d.fit(e),this._set("state",new Nle({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:l}=this.state.paddedViewState,d=new lt({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",d),this._set("zoom",-1),this._set("rotation",n),this._set("scale",l),this._set("state",null)}changeSpatialReference(e){var v;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const x=i.viewpoint.clone();x.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=x}const r=i.clone(),[n,l]=i.center;let d=null;try{d=this._project(new lt({x:n,y:l,spatialReference:i.spatialReference}),e)}catch(x){B7()||ve.getLogger(this).warn(new Kn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:d==null?void 0:d.toJSON(),spatialReference:e,error:x}))}d||(d=new lt({x:0,y:0,spatialReference:e}));const y=Z4(new Ra({targetGeometry:new lt,scale:0,rotation:0}),i.viewpoint,d);r.viewpoint=y;try{const $=[i.size[0]/2,i.size[1]/2],E=[$[0]+20,$[1]],k=i.toMap([0,0],E),{x:P,y:D}=this._project(new lt({x:k[0],y:k[1],spatialReference:i.spatialReference}),e);k[0]=P,k[1]=D,r.toScreen(k,k);const L=Cae($,k,E),N=Math.hypot(k[0]-$[0],k[1]-$[1])/20;!Number.isFinite(N)||Math.abs(N)>4?(y.rotation=0,y.targetGeometry=new lt({x:0,y:0,spatialReference:e})):(y.scale*=N,y.scale>ce("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(L)?L:0)}catch{}(v=this._get("constraints"))==null||v.constrain(y,void 0),this._get("state").viewpoint=y}resize(e,i){var d;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const l=this.state.paddedViewState.size.concat();r.size=[e,i],Lae(n,n,l,this.state.paddedViewState.size,this.resizeAlign),n=((d=this.constraints)==null?void 0:d.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),l=this.state.spatialReference;return new lt({x:r,y:n,spatialReference:l})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),r=[i.x,i.y];return this.state.toScreen(r,r),Ms(r[0],r[1])}_project(e,i){var l;const r=e&&e.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(l=r.spatialReference)!=null&&l.imageCoordinateSystem||Ji(i,r.spatialReference))return e;const n=Jh(r,i);if(!n)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return zle(e)?(e.targetGeometry=n,e):n}};function zle(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}g([S({type:lt})],fs.prototype,"center",null),g([S()],fs.prototype,"constraints",void 0),g([S({type:Ct})],fs.prototype,"extent",null),g([S({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],fs.prototype,"padding",null),g([S()],fs.prototype,"ready",void 0),g([S()],fs.prototype,"resizeAlign",void 0),g([S({readOnly:!0})],fs.prototype,"resolution",null),g([S({type:Number})],fs.prototype,"rotation",null),g([S({type:Number})],fs.prototype,"scale",null),g([S({readOnly:!0})],fs.prototype,"state",void 0),g([S({type:Ra})],fs.prototype,"viewpoint",null),g([S()],fs.prototype,"zoom",null),fs=g([J("esri.views.2d.ViewStateManager")],fs);function u$(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let p8=class extends Sr{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){u$(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Vle=class extends Sr{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:l}=i,{view:d}=this,{mapViewNavigation:y}=d;switch(n){case"begin":{const{scale:v}=d;this._startScale=v,this._currentScale=v,this._previousDelta=l,y.begin();break}case"update":{if(this._previousDelta.y===l.y)return;this._previousDelta=l;const v=1.015**l.y,x=this._startScale*v,$=x/this._currentScale;y.setViewpointImmediate($),this._currentScale=x;break}case"end":{const{constraints:v}=d,{effectiveLODs:x,snapToZoom:$}=v;if(!$||!x)return void y.end();const E=v.snapScale(this._currentScale),k=(l.y>0?Math.max(E,v.snapToPreviousScale(this._startScale)):Math.min(E,v.snapToNextScale(this._startScale)))/this._currentScale;y.zoom(k);break}}}},k_=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Ble=class extends Sr{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new k_({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&u$(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Gle=class extends Sr{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new k_({start:(l,d)=>{n.rotate.begin(this._view,d.data),d.stopPropagation()},update:(l,d)=>{n.rotate.update(this._view,d.data),d.stopPropagation()},end:(l,d)=>{n.rotate.end(),d.stopPropagation()},condition:(l,d)=>l===1&&u$(d.data,this.pointerAction)}),this.registerIncoming("drag",r,l=>this._dragEventSeparator.handle(l))}};function po(t){let e=t*t;return t<0&&(e*=-1),e}function Ule(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function qle(t,e,i){const r=i,n=t.state,l=t.device,d=e.tiltDirection==="forward-down"?1:-1,y=1;return l.deviceType==="standard"?(r.translation[0]=po(n.axes[0]),r.translation[1]=po(n.axes[1]),r.translation[2]=po(n.buttons[7])-po(n.buttons[6]),r.heading=po(n.axes[2]),r.tilt=po(n.axes[3])):l.deviceType==="spacemouse"&&(r.translation[0]=1.2*po(n.axes[0]),r.translation[1]=1.2*po(n.axes[1]),r.translation[2]=2*-po(n.axes[2]),r.heading=1.2*po(n.axes[5]),r.tilt=1.2*po(n.axes[3])),r.tilt*=d,oL(r.translation,r.translation,y),r}function Hle(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Wle=class extends Sr{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Gs,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([me(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=O0({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},st)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,Ule(this._transformation)):(this._currentDevice=e.data.device,qle(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Hle(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,l=Yle*n*e;A_(r,r,[i.translation[0]*l,-i.translation[1]*l]);const d=1+i.translation[2]*Kle*e,y=this._view.constraints.rotationEnabled?-i.heading*Jle*e:0,v=this._view.size,x=[v[0]/2,v[1]];NF(r,r,d,y,x,v);const $=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=$}};const Jle=.06,Yle=.7,Kle=6e-4;let Zle=class extends Sr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=this._keyMap[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},Xle=class extends Sr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var a0;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(a0||(a0={}));let Qle=class extends Sr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=a0.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=a0.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:l}=this.view;let d=null;switch(n){case a0.IN:d=l.zoomIn();break;case a0.OUT:d=l.zoomOut();break;default:return}l.begin(),d.then(()=>l.end()),e.stopPropagation()}};const eue=.6;let tue=class extends Sr{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:l}=e.data,d=1/eue**(1/60*l),y=i.zoom(d,[r,n]);y&&(this._canZoom=!1,y.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},iue=class extends Sr{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new k_({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function f8(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>nue(i,t.axisThreshold))}:{buttons:[],axes:[]}}function rue(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function sue(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function nue(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let oue=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=l=>{this._connectGamepad(l.gamepad)},this._onDisconnectGamepad=l=>{const d=l.gamepad,y=d.index,v=this._inputDevices[y];v&&(this._emitGamepadEvent(d,f8(v),!1),this._inputDevices.splice(y,1),this._latestUpdate.splice(y,1),this._input.gamepad.devices.remove(v),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(l=>this._connectGamepad(l)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new Q7(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=O0({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const l=this._inputDevices[n.index];if(!l)return;const d=this._latestUpdate[n.index],y=f8(l),v=r||sue(y);d&&(d.timestamp===n.timestamp||!d.active&&v||rue(d.state,y))||this._emitGamepadEvent(n,y,!v)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&e(n)}}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],l=n&&n.active;if(!l&&!r)return;const d=!l&&r?"start":l&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:d})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const y8=ce("edge"),aue=ce("chrome"),lue=ce("ff"),uue=ce("safari"),m8="esri-view-surface",sp={touchNone:`${m8}--touch-none`,touchPan:`${m8}--touch-pan`};let sN=class nN{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new oue(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=ri(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(i5[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&i5[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(i5[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?sp.touchNone:sp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?sp.touchPan:sp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(sp.touchNone),this._element.classList.remove(sp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=uF(this._element,e);return nN.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=Sne(i);r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:y8&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}y8?r*=.7:aue||uue?r*=.6:lue&&(r*=1.375);const n=100,l=Math.abs(r);l>n&&(r=r/l*200/(1+Math.exp(-.02*(l-n))));const d=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,d)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};sN.test={disableSubpixelCoordinates:!1};const i5={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let hue=class extends Sr{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function h$(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function cue(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function due(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ms()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[q,Y]=t,[ie,se]=[Y.x-q.x,Y.y-q.y];return e.radius=Math.sqrt(ie*ie+se*se)/2,e.center.x=(q.x+Y.x)/2,e.center.y=(q.y+Y.y)/2,e}let i=0,r=0;for(let q=0;q<t.length;q++)i+=t[q].x,r+=t[q].y;i/=t.length,r/=t.length;const n=t.map(q=>q.x-i),l=t.map(q=>q.y-r);let d=0,y=0,v=0,x=0,$=0,E=0,k=0;for(let q=0;q<n.length;q++){const Y=n[q],ie=l[q],se=Y*Y,ue=ie*ie;d+=se,y+=ue,v+=Y*ie,x+=se*Y,$+=ue*ie,E+=Y*ue,k+=ie*se}const P=.5*(x+E),D=.5*($+k),L=d*y-v*v,N=(P*y-D*v)/L,B=(d*D-v*P)/L,W=Ms(N+i,B+r);return{radius:Math.sqrt(N*N+B*B+(d+y)/t.length),center:W}}function xd(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}const qn={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let pue=class extends Sr{constructor(e=qn.maximumDoubleClickDelay,i=qn.maximumDoubleClickDistance,r=qn.maximumDoubleTouchDelay,n=qn.maximumDoubleTouchDistance,l=ef){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=l,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Ii(e.doubleClickTimer))}get hasPendingInputs(){return q2(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Ii(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:n}=e.native;return r==="mouse"?`${i}:${n}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=this._getPointerId(i);if(!this._pointerState.has(n))return void this._startClick(e);const l=this._pointerState.get(n),{data:d,modifiers:y}=l.event,v=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h$(d,i)>v?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),l.pointerDownCount===2&&this._doubleClick.emit(d,void 0,y))}_handlePointerDown(e){const i=xd(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=xd(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,d=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),l),y=1;this._pointerState.set(n,{event:e,doubleClickTimer:d,pointerDownCount:y}),this.refreshHasPendingInputs()}},fue=class extends Sr{constructor(e=qn.maximumDoubleClickDelay,i=qn.maximumDoubleClickDistance,r=qn.maximumDoubleTouchDelay,n=qn.maximumDoubleTouchDistance,l=ef){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=l,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ms(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new k_({start:(d,y)=>this._dragStart(d,y),update:(d,y)=>this._dragUpdate(y),end:(d,y)=>this._dragEnd(y)}),this.registerIncoming("drag",d=>this._dragEventSeparator.handle(d)),this.registerIncoming("pointer-down",d=>this._handlePointerDown(d)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Ii(e.doubleTapTimeout)})}get hasPendingInputs(){return q2(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Ii(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:n,buttons:l,pointer:d,pointers:y,pointerType:v,timestamp:x}=r;return{action:e,delta:i,button:n,buttons:l,pointer:d,pointers:y,pointerType:v,timestamp:x}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:l}=r;this._dragStartCenter=l;const d=this._createDoubleTapDragData("begin",Ms(0,0),r);this._doubleTapDrag.emit(d,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,l=Ms(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),d=this._createDoubleTapDragData("update",l,i);this._doubleTapDrag.emit(d,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,l=Ms(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),d=this._createDoubleTapDragData("end",l,i);this._doubleTapDrag.emit(d,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=xd(i),n=this._pointerState.get(r),{pointerType:l}=i.native;if(n){const d=l==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),h$(n.event.data,i)>d?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=xd(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,d=this._clock.setTimeout(()=>this._clearPointerDown(n),l);this._pointerState.set(n,{event:e,doubleTapTimeout:d}),this.refreshHasPendingInputs()}},yue=class extends Sr{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:mue(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=qg(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const l=db(n,oN(this._activePointerMap));n.initialAngle=l,n.lastAngle=l,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=qg(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=qg(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=db(r,i)-e,r.lastAngle=db(r,i)-e})}_emitEvent(e,i,r){const n=qg(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function oN(t){const e=[];return t.forEach(i=>{e.push(Ms(i.event.x,i.event.y))}),due(e)}function qg(t){const e=oN(t);let i=0;return t.forEach(r=>{let n=db(r,e),l=n-r.lastAngle;for(;l>Math.PI;)l-=2*Math.PI;for(;l<-Math.PI;)l+=2*Math.PI;n=r.lastAngle+l,r.lastAngle=n;const d=n-r.initialAngle;i+=d}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function mue(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function db(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var g8;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(g8||(g8={}));let gue=class extends Sr{constructor(e=qn.maximumDoubleClickDelay,i=qn.maximumDoubleClickDistance,r=qn.maximumDoubleTouchDelay,n=qn.maximumDoubleTouchDistance,l=ef){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=l,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=xd(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=xd(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const l=n.immediateDoubleClick;if(l){l.timeoutHandle.remove();const d=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h$(l,e.data)>d?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,l.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=xd(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const Uf={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let vue=class extends Sr{constructor(e=Uf.maximumClickDelay,i=Uf.movementUntilMouseDrag,r=Uf.movementUntilPenDrag,n=Uf.movementUntilTouchDrag,l=Uf.holdDelay,d=ef){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=l,this._clock=d,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",y=>{this._handlePointerLoss(y,"pointer-up")}),this.registerIncoming("pointer-capture-lost",y=>{this._handlePointerLoss(y,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",y=>{this._handlePointerLoss(y,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Ii(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const d=this._pointerState.get(r);if(d){if(!d.isDragging){const y=d.previousEvent;this._pointerHold.emit(y,void 0,e.modifiers),d.holdEmitted=!0}d.holdTimeout=null}},this._holdDelay));const l={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,l),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):cue(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,l=this._pointerState.get(n);l&&(l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",l,i==="pointer-up"?r:l.previousEvent),void 0,l.modifiers):i==="pointer-up"&&l.downButton===r.native.button&&e.timestamp-l.startTimestamp<=this._maximumClickDelay&&!l.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Hg={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Ec=class extends Be{constructor(){super(...arguments),this._handles=new Gs}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Xn(()=>!e(),()=>this._disconnect()),Xn(e,()=>this._connect())])}destroy(){this._handles=ri(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=ri(this._inputManager)}_connect(){const e=this.view.surface,i=new sN(e,this.view.input),r=[new gue,new vue,new pue,new yue(this.view.navigation),new fue],n=new Pn({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new hue],Sh.INTERNAL),n.installHandlers("navigation",[new iue(this.view),new Wle(this.view),new tue(this.view),new p8(this.view),new p8(this.view,[Hg.counter]),new Ble(this.view,"primary"),new Zle(this.view,Hg.pan),new Qle(this.view,Hg.zoom),new Xle(this.view,Hg.rotate),new Gle(this.view,"secondary"),new Vle(this.view,"touch")],Sh.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,me(()=>{var l,d;return(d=(l=this.view)==null?void 0:l.navigation)==null?void 0:d.browserTouchPanEnabled},l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},st)}get test(){return{inputManager:this._inputManager}}};g([S()],Ec.prototype,"view",void 0),g([S()],Ec.prototype,"latestPointerType",null),g([S()],Ec.prototype,"latestPointerLocation",null),g([S()],Ec.prototype,"multiTouchActive",null),Ec=g([J("esri.views.2d.input.MapViewInputManager")],Ec);const bue=Ec;var XSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v8,b8,w8,nS={exports:{}};nS.exports,v8=nS,b8=function(){function t(n,l,d,y,v){e(n,l,d||0,y||n.length-1,v||r)}function e(n,l,d,y,v){for(;y>d;){if(y-d>600){var x=y-d+1,$=l-d+1,E=Math.log(x),k=.5*Math.exp(2*E/3),P=.5*Math.sqrt(E*k*(x-k)/x)*($-x/2<0?-1:1);e(n,l,Math.max(d,Math.floor(l-$*k/x+P)),Math.min(y,Math.floor(l+(x-$)*k/x+P)),v)}var D=n[l],L=d,N=y;for(i(n,d,l),v(n[y],D)>0&&i(n,d,y);L<N;){for(i(n,L,N),L++,N--;v(n[L],D)<0;)L++;for(;v(n[N],D)>0;)N--}v(n[d],D)===0?i(n,d,N):i(n,++N,y),N<=l&&(d=N+1),l<=N&&(y=N-1)}}function i(n,l,d){var y=n[l];n[l]=n[d],n[d]=y}function r(n,l){return n<l?-1:n>l?1:0}return t},(w8=b8())!==void 0&&(v8.exports=w8);const wue=aN(nS.exports);function e2(t,e){if(!(this instanceof e2))return new e2(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function _ue(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function np(t,e){Dy(t,0,t.children.length,e,t)}function Dy(t,e,i,r,n){n||(n=Tp(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var l,d=e;d<i;d++)l=t.children[d],Ry(n,t.leaf?r(l):l);return n}function Ry(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function _8(t,e){return t.minX-e.minX}function x8(t,e){return t.minY-e.minY}function r5(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Wg(t){return t.maxX-t.minX+(t.maxY-t.minY)}function xue(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Sue(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),l=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,l-r)}function s5(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Jg(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Tp(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S8(t,e,i,r,n){for(var l,d=[e,i];d.length;)(i=d.pop())-(e=d.pop())<=r||(l=e+Math.ceil((i-e)/r/2)*r,wue(t,l,e,i,n),d.push(e,l,l,i))}e2.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!Jg(t,e))return i;for(var n,l,d,y,v=[];e;){for(n=0,l=e.children.length;n<l;n++)d=e.children[n],Jg(t,y=e.leaf?r(d):d)&&(e.leaf?i.push(d):s5(t,y)?this._all(d,i):v.push(d));e=v.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Jg(t,e))return!1;for(var r,n,l,d,y=[];e;){for(r=0,n=e.children.length;r<n;r++)if(l=e.children[r],Jg(t,d=e.leaf?i(l):l)){if(e.leaf||s5(t,d))return!0;y.push(l)}e=y.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Tp([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,l,d=this.data,y=this.toBBox(t),v=[],x=[];d||v.length;){if(d||(d=v.pop(),r=v[v.length-1],i=x.pop(),l=!0),d.leaf&&(n=_ue(t,d.children,e))!==-1)return d.children.splice(n,1),v.push(d),this._condense(v),this;l||d.leaf||!s5(d,y)?r?(i++,d=r.children[i],l=!1):d=null:(v.push(d),x.push(i),i=0,r=d,d=d.children[0])}return this},toBBox:function(t){return t},compareMinX:_8,compareMinY:x8,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,l=i-e+1,d=this._maxEntries;if(l<=d)return np(n=Tp(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(l)/Math.log(d)),d=Math.ceil(l/Math.pow(d,r-1))),(n=Tp([])).leaf=!1,n.height=r;var y,v,x,$,E=Math.ceil(l/d),k=E*Math.ceil(Math.sqrt(d));for(S8(t,e,i,k,this.compareMinX),y=e;y<=i;y+=k)for(S8(t,y,x=Math.min(y+k-1,i),E,this.compareMinY),v=y;v<=x;v+=E)$=Math.min(v+E-1,x),n.children.push(this._build(t,v,$,r-1));return np(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,l,d,y,v,x,$,E;r.push(e),!e.leaf&&r.length-1!==i;){for($=E=1/0,n=0,l=e.children.length;n<l;n++)v=r5(d=e.children[n]),(x=xue(t,d)-v)<E?(E=x,$=v<$?v:$,y=d):x===E&&v<$&&($=v,y=d);e=y||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),l=[],d=this._chooseSubtree(n,this.data,e,l);for(d.children.push(t),Ry(d,n);e>=0&&l[e].children.length>this._maxEntries;)this._split(l,e),e--;this._adjustParentBBoxes(n,l,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var l=this._chooseSplitIndex(i,n,r),d=Tp(i.children.splice(l,i.children.length-l));d.height=i.height,d.leaf=i.leaf,np(i,this.toBBox),np(d,this.toBBox),e?t[e-1].children.push(d):this._splitRoot(i,d)},_splitRoot:function(t,e){this.data=Tp([t,e]),this.data.height=t.height+1,this.data.leaf=!1,np(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,l,d,y,v,x,$;for(v=x=1/0,r=e;r<=i-e;r++)d=Sue(n=Dy(t,0,r,this.toBBox),l=Dy(t,r,i,this.toBBox)),y=r5(n)+r5(l),d<v?(v=d,$=r,x=y<x?y:x):d===v&&y<x&&(x=y,$=r);return $},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:_8,n=t.leaf?this.compareMinY:x8;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,l,d=this.toBBox,y=Dy(t,0,e,d),v=Dy(t,i-e,i,d),x=Wg(y)+Wg(v);for(n=e;n<i-e;n++)l=t.children[n],Ry(y,t.leaf?d(l):l),x+=Wg(y);for(n=i-e-1;n>=e;n--)l=t.children[n],Ry(v,t.leaf?d(l):l),x+=Wg(v);return x},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)Ry(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():np(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var oS;const M8=new xt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Ac=oS=class extends ge{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new oS(ae({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};g([S({type:Ct,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ac.prototype,"extent",void 0),g([S({type:["view","edit"],json:{write:!0}})],Ac.prototype,"mode",void 0),g([S({type:String,json:{read:M8.read,write:M8.write}})],Ac.prototype,"originPosition",void 0),g([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ac.prototype,"tolerance",void 0),Ac=oS=g([J("esri.rest.support.QuantizationParameters")],Ac);const lN=Ac;let $8=class uN{constructor(e,i){this.key=new jd(0,0,0,0),this.bounds=za(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Ct.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=_s.acquire();for(let r=0;r<e.length;r++)i[r]=new uN(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return lN.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const ic={added:[],removed:[]},n5=new Set,Mue=new jd(0,0,0,0);let $ue=class extends Ha{constructor(e){super(),this._tiles=new Map,this._index=e2(9,ce("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new $8(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:l}=n;if(r.length>0)for(const{row:d,colFrom:y,colTo:v}of r)for(let x=y;x<=v;x++){const $=Mue.set(l,d,n.normalizeCol(x),n.getWorldForColumn(x)).id;if(n5.add($),!this.has($)){const E=new $8(this.tileScheme,$);this._tiles.set($,E),this._index.insert(E),this.tiles.push(E),ic.added.push(E)}}for(let d=this.tiles.length-1;d>=0;d--){const y=this.tiles[d];n5.has(y.id)||(this._tiles.delete(y.id),this.tiles.splice(d,1),this._index.remove(y),ic.removed.push(y))}(ic.added.length||ic.removed.length)&&this.emit("update",ic),fm.pool.release(i),n5.clear(),ic.added.length=0,ic.removed.length=0}},kc=class extends Be{constructor(){super(...arguments),this.color=new Ne([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};g([S({type:Ne})],kc.prototype,"color",void 0),g([S({type:Ne})],kc.prototype,"haloColor",void 0),g([S()],kc.prototype,"haloOpacity",void 0),g([S()],kc.prototype,"fillOpacity",void 0),kc=g([J("esri.views.2d.support.HighlightOptions")],kc);const hN=kc,Tue=t=>t.includes("Brush");let cN=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Tue(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function Iue(t,e,i,r,n,l,d,y){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let v=null;t.width!=null&&t.height!=null?v=[t.width,t.height]:t.width==null&&t.height!=null?v=[t.height,t.height]:t.width!=null&&t.height==null?v=[t.width,t.width]:t.width==null&&t.height==null&&(v=null);const x=i[0]-(r.left+r.right),$=i[1]-(r.top+r.bottom);let E,k,P=t.area||{x:0,y:0,width:x,height:$};if(v){const D=x/$,L=v[0]/v[1];if(L>D){const N=P.width/L;P={x:P.x,y:Math.round(P.y+(P.height-N)/2),width:P.width,height:Math.round(N)}}else{const N=P.height*L;P={x:Math.round(P.x+(P.width-N)/2),y:P.y,width:Math.round(N),height:P.height}}}else v=[P.width,P.height];return v[0]>P.width?(E=Math.min(v[0]/P.width,e),k=v[0]/P.width/E):(E=1,k=v[0]/P.width),{resolutionScale:E,cropArea:{x:Math.round((P.x+r.left)*E),y:Math.round((P.y+r.top)*E),width:Math.round(P.width*E),height:Math.round(P.height*E)},outputScale:k,format:n,quality:l,children:d,rotation:y}}function Eue(t,e,i){const{ctx:r,canvas:n}=dN(t,i),l=r.getImageData(0,0,t.width,t.height),d=Pue(n,e);return pN(n),{dataUrl:d,data:l}}function Aue(t,e){const{ctx:i,canvas:r}=dN(t,e),n=i.getImageData(0,0,t.width,t.height);return pN(r),n}function dN(t,e){const i=kue();e.premultipliedAlpha&&Rue(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&Due(r),{ctx:r,canvas:i}}function pN(t){t.width=0,t.height=0}function kue(){return o5==null&&(o5=document.createElement("canvas")),o5}let o5=null;function Pue(t,e){const i=jue[e.format],r=e.quality/100;return t.toDataURL(i,r)}function Cue(t,e){const i=Lue(t),r=Nue[i];return{format:i,quality:zs(e??r,0,100)}}function Oue(t,e){return e/Math.max(t[0],t[1])}function i6e(t,e,i,r=0,n=0,l=t.width-r,d=t.height-n,y=!1){const{data:v}=t,{width:x,height:$,data:E}=e,k=l/x,P=d/$,D=Math.ceil(k/2),L=Math.ceil(P/2),N=t.width;for(let B=0;B<$;B++)for(let W=0;W<x;W++){const q=4*(W+(y?$-B-1:B)*x);let Y=0,ie=0,se=0,ue=0,de=0,be=0;const we=(B+.5)*P;for(let $e=Math.floor(B*P);$e<(B+1)*P;$e++){const ke=Math.abs(we-($e+.5))/L,Ge=(W+.5)*k,Fe=ke*ke;for(let ht=Math.floor(W*k);ht<(W+1)*k;ht++){const ni=Math.abs(Ge-(ht+.5))/D,Ze=Math.sqrt(Fe+ni*ni);if(Ze>=1)continue;let Xe=2*Ze*Ze*Ze-3*Ze*Ze+1;const oi=4*(r+ht+(n+$e)*N);be+=Xe*v[oi+3],ie+=Xe,!i&&v[oi+3]<255&&(Xe=Xe*v[oi+3]/255),se+=Xe*v[oi],ue+=Xe*v[oi+1],de+=Xe*v[oi+2],Y+=Xe}}E[q]=se/Y,E[q+1]=ue/Y,E[q+2]=de/Y,E[q+3]=be/ie}return e}function Lue(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Fue}}function Due(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Rue(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const l=255/n;e[r]=e[r]*l,e[r+1]=e[r+1]*l,e[r+2]=e[r+2]*l}}}const jue={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},T8=98,Fue="png",Nue={png:100,jpg:T8,jpeg:T8};var ar;function aS(t,e,i={}){const r=e===ar.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const n of r){const l=t.getContext(n,i);if(l)return l}return null}function r6e(t,e,i={}){const r=fN(t);for(const n of r){const l=aS(e,n,i);if(l)return l}return null}function fN(t){if(t==="3d")return[ar.WEBGL2];const e=ce("esri-force-webgl");return e===ar.WEBGL1||e===ar.WEBGL2?[e]:ce("mac")&&ce("chrome")?[ar.WEBGL1,ar.WEBGL2]:[ar.WEBGL2,ar.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(ar||(ar={}));let a5,l5;function zue(t){const e=fN(t);for(;e.length>1;){const i=I8(e.shift());if(i.available)return i}return I8(e.shift())}function I8(t){switch(t){case ar.WEBGL1:return Vue();case ar.WEBGL2:return Bue()}}function Vue(){return a5||(a5=que()),a5}function Bue(){return l5||(l5=Hue()),l5}let yN=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},Gue=class extends yN{constructor(){super(...arguments),this.type=ar.WEBGL1}},Uue=class extends yN{constructor(){super(...arguments),this.type=ar.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function mN(t,e){if(t===ar.WEBGL1&&typeof WebGLRenderingContext>"u"||t===ar.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=aS(i,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=aS(i,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===ar.WEBGL1){const l=r.getParameter(r.VERSION),d=l==null?void 0:l.match(/^WebGL\s+([\d.]*)/);if(d){const y=parseFloat(d[1]);e.available=y>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),r}function que(){const t=new Gue,e=mN(ar.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function Hue(){const t=new Uue,e=mN(ar.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Wue(t){const e=zue(t);if(!e.available)return new ne("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===ar.WEBGL1){if(!e.supportsElementIndexUint)return new ne("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new ne("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new ne("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Jue(t){return t&&"nodeType"in t}function Yue(t){return t&&typeof t.render=="function"}const E8={component:"esri-component"};let Pc=class extends Be{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(E8.component),i&&i.classList.remove(E8.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||Jue(e)?(this._set("widget",null),Y7(e)):(Yue(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};g([S({dependsOn:[]})],Pc.prototype,"id",null),g([S()],Pc.prototype,"node",null),g([St("node")],Pc.prototype,"castNode",null),g([S({readOnly:!0})],Pc.prototype,"widget",void 0),Pc=g([J("esri.views.ui.Component")],Pc);const pb=Pc,gN="calcite-mode-";function Kue(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function t2(){return Kue().startsWith("dark")}function Zue(){return`${gN}${t2()?"dark":"light"}`}function Xue(t){Que(t),t.classList.add(Zue())}function Que(t){Array.from(t.classList).forEach(e=>{e.startsWith(gN)&&t.classList.remove(e)})}const ehe={left:0,top:0,bottom:0,right:0},vN={bottom:30,top:15,right:15,left:15},Xa="esri-ui",As={ui:Xa,corner:`${Xa}-corner`,innerContainer:`${Xa}-inner-container`,manualContainer:`${Xa}-manual-container`,cornerContainer:`${Xa}-corner-container`,topLeft:`${Xa}-top-left`,topRight:`${Xa}-top-right`,bottomLeft:`${Xa}-bottom-left`,bottomRight:`${Xa}-bottom-right`};function the(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function Yg(t){return t===0?"0":`${t}px`}function u5(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function h5(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let Sa=class extends Ha.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Wn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&h5(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&h5(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([me(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,st),me(()=>this.padding,this._applyUIPadding,st),me(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},st),VO(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(As.ui),Xue(e),this._attachContainers(e)),i&&(i.classList.remove(As.ui),h5(i,{top:"",bottom:"",left:"",right:""}),Pj(i)),this._set("container",e))}get height(){var l;const e=((l=this.view)==null?void 0:l.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...vN,...e}}get width(){var l;const e=((l=this.view)==null?void 0:l.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,l;if(Array.isArray(e))return void e.forEach(y=>this.add(y,i));const d=u5(e);d&&({index:r,position:i,component:e,key:n}=d),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:l}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,n,l)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(l=>this.remove(l,i));const r=this._find(e);if(r){if(this._componentMap.has(e)&&((n=this._componentMap.get(e))==null?void 0:n.key)!==i)return;const l=this._components.indexOf(r),d=r.node.parentNode;return d==null||d.removeChild(r.node),this._componentMap.delete(e),this._components.splice(l,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const l of e)this.empty(l,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(l=>this._findByNode(l)).filter(l=>{var d;return l==null?!1:!(((d=this._componentMap.get(l))==null?void 0:d.internal)??!1)||i.removeInternal});for(const l of n)this.remove(l)}move(e,i){if(Array.isArray(e)&&e.forEach(d=>this.move(d,i)),!e)return;let r;const n=u5(e)||u5(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const l=this.remove(e);l&&this.add(l,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.map(r=>this._getComponentsAtPosition(r,i)).flat():this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,l){e instanceof pb||(e=new pb({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,internal:l})}_find(e){return e?e instanceof pb?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??ehe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(As.innerContainer,As.cornerContainer);const i=document.createElement("div");i.classList.add(As.innerContainer,As.manualContainer);const r=document.createElement("div");r.classList.add(As.topLeft,As.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(As.topRight,As.corner),e.appendChild(n);const l=document.createElement("div");l.classList.add(As.bottomLeft,As.corner),e.appendChild(l);const d=document.createElement("div");d.classList.add(As.bottomRight,As.corner),e.appendChild(d),this._innerContainer=e,this._manualContainer=i;const y=Lh();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":l,"bottom-right":d,"top-leading":y?n:r,"top-trailing":y?r:n,"bottom-leading":y?d:l,"bottom-trailing":y?l:d},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:n}=e,l=this._positionNameToContainerLookup[i],d=n!=null&&n>-1;if(the(r.widget)&&r.widget.startup(),!d)return void l.appendChild(r.node);const y=Array.from(l.children);if(n===0)return void(l.firstChild?xE(r.node,l.firstChild):l.appendChild(r.node));n>=y.length?l.appendChild(r.node):xE(r.node,y[n])}_toPixelPosition(e){return{top:Yg(e.top),left:Yg(e.left),right:Yg(e.right),bottom:Yg(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(Yo).filter(n=>{var l;return i.includeInternal||!((l=this._componentMap.get(n))!=null&&l.internal)}).map(({widget:n,node:l})=>n??l)}};g([S()],Sa.prototype,"_locale",void 0),g([S()],Sa.prototype,"container",null),g([S()],Sa.prototype,"height",null),g([S({value:vN})],Sa.prototype,"padding",null),g([St("padding")],Sa.prototype,"castPadding",null),g([S()],Sa.prototype,"view",void 0),g([S()],Sa.prototype,"width",null),Sa=g([J("esri.views.ui.UI")],Sa);const ihe=Sa,rhe="randomUUID"in crypto;function bN(){if(rhe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function u6e(){return`{${bN()}}`}const she={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},nhe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},ohe=t=>({...nhe,...t}),ahe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},lhe=(t,e)=>t.find(e),A8=(t,e,i=!1)=>{let r=t;return e.forEach((n,l)=>{const d=r!=null&&r.children?lhe(r.children,y=>y.domNode===n):void 0;i&&!d&&l!==e.length-1||(r=d)}),r},uhe=t=>{let e;const i={...she,...t},r=ohe(i),n=r.performanceLogger;let l,d=!0,y=!1;const v=[],x=[],$=(k,P,D)=>{var B;let L;r.eventHandlerInterceptor=(W,q,Y,ie)=>function(se){let ue;n("domEvent",se);const de=ahe(se.currentTarget,L.domNode),be=de.some($e=>{var ke;return customElements.get((ke=$e==null?void 0:$e.tagName)==null?void 0:ke.toLowerCase())});if(se.eventPhase===Event.CAPTURING_PHASE||!be)de.reverse(),ue=A8(L.getLastRender(),de);else{const $e=se.composedPath(),ke=$e.slice($e.indexOf(se.currentTarget),$e.indexOf(L.domNode)).filter(Ge=>Ge.getRootNode()===Ge.ownerDocument).reverse();ue=A8(L.getLastRender(),ke,!0)}let we;return ue&&(we=i.handleInterceptedEvent(e,ue,this,se)),n("domEventProcessed",se),we},(B=i.postProcessProjectionOptions)==null||B.call(i,r);const N=D();L=k(P,N,r),v.push(L),x.push(D),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(L,N)};let E=()=>{if(l=void 0,d){d=!1,n("renderStart",void 0);for(let k=0;k<v.length;k++){const P=x[k]();n("rendered",void 0),v[k].update(P),n("patched",void 0)}n("renderDone",void 0),d=!0}};return i.modifyDoRenderImplementation&&(E=i.modifyDoRenderImplementation(E,v,x)),e={renderNow:E,scheduleRender:()=>{l||y||(l=requestAnimationFrame(E))},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),y=!0},resume:()=>{y=!1,d=!0,e.scheduleRender()},append:(k,P)=>{$(vh.append,k,P)},insertBefore:(k,P)=>{$(vh.insertBefore,k,P)},merge:(k,P)=>{$(vh.merge,k,P)},replace:(k,P)=>{$(vh.replace,k,P)},detach:k=>{for(let P=0;P<x.length;P++)if(x[P]===k)return x.splice(P,1),v.splice(P,1)[0];throw new Error("renderFunction was not found")}},e},Ip={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Ep,wN,P_,_N=!1,i2=!1,c$=!1,on=!1,k8=null,lS=!1;const hhe=t=>{const e=new URL(t,Lr.$resourcesUrl$);return e.origin!==Ym.location.origin?e.href:e.pathname},che=t=>Lr.$resourcesUrl$=t,Fd=(t,e="")=>()=>{},P8="http://www.w3.org/1999/xlink",C8={},dhe="http://www.w3.org/2000/svg",phe="http://www.w3.org/1999/xhtml",fhe=t=>t!=null,d$=t=>(t=typeof t,t==="object"||t==="function");function yhe(t){var e,i,r;return(r=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const xN=(t,e,...i)=>{let r=null,n=null,l=null,d=!1,y=!1;const v=[],x=E=>{for(let k=0;k<E.length;k++)r=E[k],Array.isArray(r)?x(r):r!=null&&typeof r!="boolean"&&((d=typeof t!="function"&&!d$(r))&&(r=String(r)),d&&y?v[v.length-1].$text$+=r:v.push(d?r2(null,r):r),y=d)};if(x(i),e){e.key&&(n=e.key),e.name&&(l=e.name);{const E=e.className||e.class;E&&(e.class=typeof E!="object"?E:Object.keys(E).filter(k=>E[k]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,v,vhe);const $=r2(t,null);return $.$attrs$=e,v.length>0&&($.$children$=v),$.$key$=n,$.$name$=l,$},r2=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},mhe={},ghe=t=>t&&t.$tag$===mhe,vhe={forEach:(t,e)=>t.map(O8).forEach(e),map:(t,e)=>t.map(O8).map(e).map(bhe)},O8=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),bhe=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),xN(t.vtag,i,...t.vchildren||[])}const e=r2(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},whe=t=>Whe.map(e=>e(t)).find(e=>!!e),_he=(t,e)=>t!=null&&!d$(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,xhe=t=>t,h6e=(t,e,i)=>{const r=xhe(t);return{emit:n=>She(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},She=(t,e,i)=>{const r=Lr.ce(e,i);return t.dispatchEvent(r),r},L8=new WeakMap,Mhe=(t,e,i)=>{let r=n2.get(t);Khe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,n2.set(t,r)},$he=(t,e,i,r)=>{var n;let l=SN(e,i);const d=n2.get(l);if(t=t.nodeType===11?t:Ho,d)if(typeof d=="string"){t=t.head||t;let y=L8.get(t),v;if(y||L8.set(t,y=new Set),!y.has(l)){{v=Ho.createElement("style"),v.innerHTML=d;const x=(n=Lr.$nonce$)!==null&&n!==void 0?n:yhe(Ho);x!=null&&v.setAttribute("nonce",x),t.insertBefore(v,t.querySelector("link"))}y&&y.add(l)}}else t.adoptedStyleSheets.includes(d)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,d]);return l},The=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,n=Fd("attachStyles",e.$tagName$),l=$he(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=l,i.classList.add(l+"-h"),r&2&&i.classList.add(l+"-s")),n()},SN=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),D8=(t,e,i,r,n,l)=>{if(i!==r){let d=N8(t,e),y=e.toLowerCase();if(e==="class"){const v=t.classList,x=R8(i),$=R8(r);v.remove(...x.filter(E=>E&&!$.includes(E))),v.add(...$.filter(E=>E&&!x.includes(E)))}else if(e==="style"){for(const v in i)(!r||r[v]==null)&&(v.includes("-")?t.style.removeProperty(v):t.style[v]="");for(const v in r)(!i||r[v]!==i[v])&&(v.includes("-")?t.style.setProperty(v,r[v]):t.style[v]=r[v])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):N8(Ym,y)?e=y.slice(2):e=y[2]+e.slice(3),i&&Lr.rel(t,e,i,!1),r&&Lr.ael(t,e,r,!1);else{const v=d$(r);if((d||v&&r!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=r;else{const $=r??"";e==="list"?d=!1:(i==null||t[e]!=$)&&(t[e]=$)}}catch{}let x=!1;y!==(y=y.replace(/^xlink\:?/,""))&&(e=y,x=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(x?t.removeAttributeNS(P8,e):t.removeAttribute(e)):(!d||l&4||n)&&!v&&(r=r===!0?"":r,x?t.setAttributeNS(P8,e,r):t.setAttribute(e,r))}}},Ihe=/\s/,R8=t=>t?t.split(Ihe):[],MN=(t,e,i,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,l=t&&t.$attrs$||C8,d=e.$attrs$||C8;for(r in l)r in d||D8(n,r,l[r],void 0,i,e.$flags$);for(r in d)D8(n,r,l[r],d[r],i,e.$flags$)},s2=(t,e,i,r)=>{const n=e.$children$[i];let l=0,d,y,v;if(_N||(c$=!0,n.$tag$==="slot"&&(Ep&&r.classList.add(Ep+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)d=n.$elm$=Ho.createTextNode(n.$text$);else if(n.$flags$&1)d=n.$elm$=Ho.createTextNode("");else{if(on||(on=n.$tag$==="svg"),d=n.$elm$=Ho.createElementNS(on?dhe:phe,n.$flags$&2?"slot-fb":n.$tag$),on&&n.$tag$==="foreignObject"&&(on=!1),MN(null,n,on),fhe(Ep)&&d["s-si"]!==Ep&&d.classList.add(d["s-si"]=Ep),n.$children$)for(l=0;l<n.$children$.length;++l)y=s2(t,n,l,d),y&&d.appendChild(y);n.$tag$==="svg"?on=!1:d.tagName==="foreignObject"&&(on=!0)}return d["s-hn"]=P_,n.$flags$&3&&(d["s-sr"]=!0,d["s-cr"]=wN,d["s-sn"]=n.$name$||"",v=t&&t.$children$&&t.$children$[i],v&&v.$tag$===n.$tag$&&t.$elm$&&ym(t.$elm$,!1)),d},ym=(t,e)=>{Lr.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==P_&&n["s-ol"]&&(IN(n).insertBefore(n,p$(n)),n["s-ol"].remove(),n["s-ol"]=void 0,c$=!0),e&&ym(n,e)}Lr.$flags$&=-2},$N=(t,e,i,r,n,l)=>{let d=t["s-cr"]&&t["s-cr"].parentNode||t,y;for(d.shadowRoot&&d.tagName===P_&&(d=d.shadowRoot);n<=l;++n)r[n]&&(y=s2(null,i,n,t),y&&(r[n].$elm$=y,d.insertBefore(y,p$(e))))},TN=(t,e,i,r,n)=>{for(;e<=i;++e)(r=t[e])&&(n=r.$elm$,kN(r),i2=!0,n["s-ol"]?n["s-ol"].remove():ym(n,!0),n.remove())},Ehe=(t,e,i,r)=>{let n=0,l=0,d=0,y=0,v=e.length-1,x=e[0],$=e[v],E=r.length-1,k=r[0],P=r[E],D,L;for(;n<=v&&l<=E;)if(x==null)x=e[++n];else if($==null)$=e[--v];else if(k==null)k=r[++l];else if(P==null)P=r[--E];else if(Kg(x,k))Ap(x,k),x=e[++n],k=r[++l];else if(Kg($,P))Ap($,P),$=e[--v],P=r[--E];else if(Kg(x,P))(x.$tag$==="slot"||P.$tag$==="slot")&&ym(x.$elm$.parentNode,!1),Ap(x,P),t.insertBefore(x.$elm$,$.$elm$.nextSibling),x=e[++n],P=r[--E];else if(Kg($,k))(x.$tag$==="slot"||P.$tag$==="slot")&&ym($.$elm$.parentNode,!1),Ap($,k),t.insertBefore($.$elm$,x.$elm$),$=e[--v],k=r[++l];else{for(d=-1,y=n;y<=v;++y)if(e[y]&&e[y].$key$!==null&&e[y].$key$===k.$key$){d=y;break}d>=0?(L=e[d],L.$tag$!==k.$tag$?D=s2(e&&e[l],i,d,t):(Ap(L,k),e[d]=void 0,D=L.$elm$),k=r[++l]):(D=s2(e&&e[l],i,l,t),k=r[++l]),D&&IN(x.$elm$).insertBefore(D,p$(x.$elm$))}n>v?$N(t,r[E+1]==null?null:r[E+1].$elm$,i,r,l,E):l>E&&TN(e,n,v)},Kg=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,p$=t=>t&&t["s-ol"]||t,IN=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Ap=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,n=e.$children$,l=e.$tag$,d=e.$text$;let y;d===null?(on=l==="svg"?!0:l==="foreignObject"?!1:on,l==="slot"||MN(t,e,on),r!==null&&n!==null?Ehe(i,r,e,n):n!==null?(t.$text$!==null&&(i.textContent=""),$N(i,null,e,n,0,n.length-1)):r!==null&&TN(r,0,r.length-1),on&&l==="svg"&&(on=!1)):(y=i["s-cr"])?y.parentNode.textContent=d:t.$text$!==d&&(i.data=d)},EN=t=>{const e=t.childNodes;let i,r,n,l,d,y;for(r=0,n=e.length;r<n;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(d=i["s-sn"],i.hidden=!1,l=0;l<n;l++)if(y=e[l].nodeType,e[l]["s-hn"]!==i["s-hn"]||d!==""){if(y===1&&d===e[l].getAttribute("slot")){i.hidden=!0;break}}else if(y===1||y===3&&e[l].textContent.trim()!==""){i.hidden=!0;break}}EN(i)}},Fo=[],AN=t=>{let e,i,r,n,l,d,y=0;const v=t.childNodes,x=v.length;for(;y<x;y++){if(e=v[y],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=e["s-sn"],d=r.length-1;d>=0;d--)i=r[d],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(j8(i,n)?(l=Fo.find($=>$.$nodeToRelocate$===i),i2=!0,i["s-sn"]=i["s-sn"]||n,l?l.$slotRefNode$=e:Fo.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&Fo.map($=>{j8($.$nodeToRelocate$,i["s-sn"])&&(l=Fo.find(E=>E.$nodeToRelocate$===i),l&&!$.$slotRefNode$&&($.$slotRefNode$=l.$slotRefNode$))})):Fo.some($=>$.$nodeToRelocate$===i)||Fo.push({$nodeToRelocate$:i}));e.nodeType===1&&AN(e)}},j8=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",kN=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(kN)},Ahe=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,n=t.$vnode$||r2(null,null),l=ghe(e)?e:xN(null,null,e);P_=i.tagName,r.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},r.$attrsToReflect$.map(([d,y])=>l.$attrs$[y]=i[d])),l.$tag$=null,l.$flags$|=4,t.$vnode$=l,l.$elm$=n.$elm$=i.shadowRoot||i,Ep=i["s-sc"],wN=i["s-cr"],_N=(r.$flags$&1)!==0,i2=!1,Ap(n,l);{if(Lr.$flags$|=1,c$){AN(l.$elm$);let d,y,v,x,$,E,k=0;for(;k<Fo.length;k++)d=Fo[k],y=d.$nodeToRelocate$,y["s-ol"]||(v=Ho.createTextNode(""),v["s-nr"]=y,y.parentNode.insertBefore(y["s-ol"]=v,y));for(k=0;k<Fo.length;k++)if(d=Fo[k],y=d.$nodeToRelocate$,d.$slotRefNode$){for(x=d.$slotRefNode$.parentNode,$=d.$slotRefNode$.nextSibling,v=y["s-ol"];v=v.previousSibling;)if(E=v["s-nr"],E&&E["s-sn"]===y["s-sn"]&&x===E.parentNode&&(E=E.nextSibling,!E||!E["s-nr"])){$=E;break}(!$&&x!==y.parentNode||y.nextSibling!==$)&&y!==$&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),x.insertBefore(y,$))}else y.nodeType===1&&(y.hidden=!0)}i2&&EN(l.$elm$),Lr.$flags$&=-2,Fo.length=0}},khe=(t,e)=>{},f$=(t,e)=>(t.$flags$|=16,khe(t,t.$ancestorComponent$),Xhe(()=>Phe(t,e))),Phe=(t,e)=>{const i=t.$hostElement$,r=Fd("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;let l;return e?l=x0(n,"componentWillLoad"):l=x0(n,"componentWillUpdate"),l=F8(l,()=>x0(n,"componentWillRender")),r(),F8(l,()=>Che(t,n,e))},Che=async(t,e,i)=>{const r=t.$hostElement$,n=Fd("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&The(t);const l=Fd("render",t.$cmpMeta$.$tagName$);Ohe(t,e,r),l(),n(),Lhe(t)},Ohe=(t,e,i)=>{try{k8=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Ip.hasRenderFn||Ip.reflect)&&(Ip.vdomRender||Ip.reflect)&&(Ip.hydrateServerSide||Ahe(t,e))}catch(y){Jm(y,t.$hostElement$)}return k8=null,null},Lhe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=Fd("postUpdate",e),n=i;t.$ancestorComponent$,x0(n,"componentDidRender"),t.$flags$&64?(x0(n,"componentDidUpdate"),r()):(t.$flags$|=64,x0(n,"componentDidLoad"),r())},c6e=t=>{{const e=Wm(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&f$(e,!1),i}},x0=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){Jm(r)}},F8=(t,e)=>t&&t.then?t.then(e):e(),Dhe=(t,e)=>Wm(t).$instanceValues$.get(e),Rhe=(t,e,i,r)=>{const n=Wm(t),l=t,d=n.$instanceValues$.get(e),y=n.$flags$,v=l;i=_he(i,r.$members$[e][0]);const x=Number.isNaN(d)&&Number.isNaN(i);if(i!==d&&!x){n.$instanceValues$.set(e,i);{if(r.$watchers$&&y&128){const E=r.$watchers$[e];E&&E.map(k=>{try{v[k](i,d,e)}catch(P){Jm(P,l)}})}if((y&18)===2){if(v.componentShouldUpdate&&v.componentShouldUpdate(i,d,e)===!1)return;f$(n,!1)}}}},jhe=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),n=t.prototype;r.map(([l,[d]])=>{(d&31||d&32)&&Object.defineProperty(n,l,{get(){return Dhe(this,l)},set(y){Rhe(this,l,y,e)},configurable:!0,enumerable:!0})});{const l=new Map;n.attributeChangedCallback=function(d,y,v){Lr.jmp(()=>{const x=l.get(d);if(this.hasOwnProperty(x))v=this[x],delete this[x];else if(n.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==v)return;this[x]=v===null&&typeof this[x]=="boolean"?!1:v})},t.observedAttributes=r.filter(([d,y])=>y[0]&15).map(([d,y])=>{const v=y[1]||d;return l.set(v,d),y[0]&512&&e.$attrsToReflect$.push([d,v]),v})}}return t},Fhe=async(t,e,i,r,n)=>{if(!(e.$flags$&32)&&(n=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),n.style)){let d=n.style;typeof d!="string"&&(d=d[e.$modeName$=whe(t)]);const y=SN(i,e.$modeName$);if(!n2.has(y)){const v=Fd("registerStyles",i.$tagName$);Mhe(y,d,!!(i.$flags$&1)),v()}}e.$ancestorComponent$,(()=>f$(e,!0))()},Nhe=t=>{},zhe=t=>{if(!(Lr.$flags$&1)){const e=Wm(t),i=e.$cmpMeta$,r=Fd("connectedCallback",i.$tagName$);e.$flags$&1?(PN(t,e,i.$listeners$),Nhe(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&Vhe(t),i.$members$&&Object.entries(i.$members$).map(([n,[l]])=>{if(l&31&&t.hasOwnProperty(n)){const d=t[n];delete t[n],t[n]=d}}),Fhe(t,e,i)),r()}},Vhe=t=>{const e=t["s-cr"]=Ho.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Bhe=t=>{if(!(Lr.$flags$&1)){const e=Wm(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},d6e=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Hhe(this,i)},connectedCallback(){zhe(this),r&&r.call(this)},disconnectedCallback(){Bhe(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,jhe(t,i)},p6e=(t,e)=>e,PN=(t,e,i,r)=>{i&&i.map(([n,l,d])=>{const y=Uhe(t,n),v=Ghe(e,d),x=qhe(n);Lr.ael(y,l,v,x),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Lr.rel(y,l,v,x))})},Ghe=(t,e)=>i=>{try{Ip.lazyLoad||t.$hostElement$[e](i)}catch(r){Jm(r)}},Uhe=(t,e)=>e&4?Ho:e&8?Ym:e&16?Ho.body:t,qhe=t=>Jhe?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,CN=new WeakMap,Wm=t=>CN.get(t),Hhe=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return PN(t,i,e.$listeners$),CN.set(t,i)},N8=(t,e)=>e in t,Jm=(t,e)=>(0,console.error)(t,e),n2=new Map,Whe=[],Ym=typeof window<"u"?window:{},Ho=Ym.document||{head:{}},f6e=Ym.HTMLElement||class{},Lr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},Jhe=(()=>{let t=!1;try{Ho.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Yhe=t=>Promise.resolve(t),Khe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),uS=[],ON=[],LN=(t,e)=>i=>{t.push(i),lS||(lS=!0,e&&Lr.$flags$&4?Zhe(hS):Lr.raf(hS))},z8=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Jm(i)}t.length=0},hS=()=>{z8(uS),z8(ON),(lS=uS.length>0)&&Lr.raf(hS)},Zhe=t=>Yhe().then(t),y6e=LN(uS,!1),Xhe=LN(ON,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const DN="calcite-mode-auto",RN="calcite-mode-dark",Qhe="calcite-mode-light",m6e={autoMode:DN,darkMode:RN,lightMode:Qhe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],o2=jN.join(","),FN=typeof Element>"u",Nd=FN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,a2=!FN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},l2=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),l=n===""||n==="true",d=l||i&&e&&t(e.parentNode);return d},ece=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},NN=function(e,i,r){if(l2(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(o2));return i&&Nd.call(e,o2)&&n.unshift(e),n=n.filter(r),n},zN=function t(e,i,r){for(var n=[],l=Array.from(e);l.length;){var d=l.shift();if(!l2(d,!1))if(d.tagName==="SLOT"){var y=d.assignedElements(),v=y.length?y:d.children,x=t(v,!0,r);r.flatten?n.push.apply(n,x):n.push({scopeParent:d,candidates:x})}else{var $=Nd.call(d,o2);$&&r.filter(d)&&(i||!e.includes(d))&&n.push(d);var E=d.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(d),k=!l2(E,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(d));if(E&&k){var P=t(E===!0?d.children:E.children,!0,r);r.flatten?n.push.apply(n,P):n.push({scopeParent:d,candidates:P})}else l.unshift.apply(l,d.children)}}return n},VN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},BN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ece(e))&&!VN(e)?0:e.tabIndex},tce=function(e,i){var r=BN(e);return r<0&&i&&!VN(e)?0:r},ice=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},GN=function(e){return e.tagName==="INPUT"},rce=function(e){return GN(e)&&e.type==="hidden"},sce=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},nce=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},oce=function(e){if(!e.name)return!0;var i=e.form||a2(e),r=function(y){return i.querySelectorAll('input[type="radio"][name="'+y+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var l=nce(n,e.form);return!l||l===e},ace=function(e){return GN(e)&&e.type==="radio"},lce=function(e){return ace(e)&&!oce(e)},uce=function(e){var i,r=e&&a2(e),n=(i=r)===null||i===void 0?void 0:i.host,l=!1;if(r&&r!==e){var d,y,v;for(l=!!((d=n)!==null&&d!==void 0&&(y=d.ownerDocument)!==null&&y!==void 0&&y.contains(n)||e!=null&&(v=e.ownerDocument)!==null&&v!==void 0&&v.contains(e));!l&&n;){var x,$,E;r=a2(n),n=(x=r)===null||x===void 0?void 0:x.host,l=!!(($=n)!==null&&$!==void 0&&(E=$.ownerDocument)!==null&&E!==void 0&&E.contains(n))}}return l},V8=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},hce=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var l=Nd.call(e,"details>summary:first-of-type"),d=l?e.parentElement:e;if(Nd.call(d,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var y=e;e;){var v=e.parentElement,x=a2(e);if(v&&!v.shadowRoot&&n(v)===!0)return V8(e);e.assignedSlot?e=e.assignedSlot:!v&&x!==e.ownerDocument?e=x.host:e=v}e=y}if(uce(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return V8(e);return!1},cce=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Nd.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},u2=function(e,i){return!(i.disabled||l2(i)||rce(i)||hce(i,e)||sce(i)||cce(i))},cS=function(e,i){return!(lce(i)||BN(i)<0||!u2(e,i))},dce=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},pce=function t(e){var i=[],r=[];return e.forEach(function(n,l){var d=!!n.scopeParent,y=d?n.scopeParent:n,v=tce(y,d),x=d?t(n.candidates):y;v===0?d?i.push.apply(i,x):i.push(y):r.push({documentOrder:l,tabIndex:v,item:n,isScope:d,content:x})}),r.sort(ice).reduce(function(n,l){return l.isScope?n.push.apply(n,l.content):n.push(l.content),n},[]).concat(i)},fce=function(e,i){i=i||{};var r;return i.getShadowRoot?r=zN([e],i.includeContainer,{filter:cS.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:dce}):r=NN(e,i.includeContainer,cS.bind(null,i)),pce(r)},g6e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=zN([e],i.includeContainer,{filter:u2.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=NN(e,i.includeContainer,u2.bind(null,i)),r},v6e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Nd.call(e,o2)===!1?!1:cS(i,e)},yce=jN.concat("iframe").join(","),b6e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Nd.call(e,yce)===!1?!1:u2(i,e)};const mce={getShadowRoot:!0};function w6e(t){const e="dir",i=`[${e}]`,r=gce(t,i);return r?r.getAttribute(e):"ltr"}function y$(t){return t.getRootNode()}function _6e(t){const e=y$(t);return"host"in e?e:null}function UN(t){return t.host||null}function x6e(t,{selector:e,id:i}){function r(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const l=y$(n),d=i?"getElementById"in l?l.getElementById(i):null:e?l.querySelector(e):null,y=UN(l);return d||(y?r(y):null)}return r(t)}function gce(t,e){function i(r){return r?r.closest(e)||i(UN(y$(r))):null}return i(t)}function vce(t,e){return qN(t,e)}function qN(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return qN(r instanceof ShadowRoot?r.host:r,e)}function S6e(t,e){return!!vce(e,i=>i===t?!0:void 0)}function bce(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function M6e(t){if(t)return bce(t)?t.setFocus():t.focus()}function $6e(t){t&&(fce(t,mce)[0]||t).focus()}const mm=":not([slot])";function T6e(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:mm;return i!=null&&i.all?wce(t,r,i):_ce(t,r,i)}function HN(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function wce(t,e,i){let r=e===mm?HN(t,mm):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(l=>l.parentElement===t),r=i!=null&&i.matches?r.filter(l=>l==null?void 0:l.matches(i.matches)):r;const n=i==null?void 0:i.selector;return n?r.map(l=>Array.from(l.querySelectorAll(n))).reduce((l,d)=>[...l,...d],[]).filter(l=>!!l):r}function _ce(t,e,i){let r=e===mm?HN(t,mm)[0]||null:t.querySelector(e);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===t?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const n=i==null?void 0:i.selector;return n?r==null?void 0:r.querySelector(n):r}function I6e(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function E6e(t){return Boolean(t).toString()}function A6e(t){return $ce(t)||Sce(t)}function xce(t){return Mce(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function Sce(t){return!!xce(t)}function Mce(t){return t.target.assignedNodes({flatten:!0})}function $ce(t){return!!Tce(t).length}function Tce(t){return t.target.assignedElements({flatten:!0})}function k6e(t){return!!(t.isPrimary&&t.button===0)}function P6e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function B8(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(RN)||t.contains(DN)&&e?"dark":"light",r=d=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:d}})),n=d=>{l!==d&&r(d),l=d};let l=i();r(l),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>n(d.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Ice(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?B8():document.addEventListener("DOMContentLoaded",()=>B8(),{once:!0}))}const Ece=Ice;Ece();let WN;function Ace(){try{hhe(".")}catch{che(Bn(Et(WN)))}}function vf(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return Promise.all(e)}WN="components/assets";const JN=Symbol("widget"),kce=Symbol("widget-test-data"),Pce=[],Cce={},h2=new WeakMap;function YN(t,e){let i=e.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=YN(t,i[n]);else i=Pce;const r=e.vnodeSelector;if(m$(r)){const n=e.properties||Cce,l=n.key||r;return{vnodeSelector:"div",properties:{key:l,afterCreate:Oce,afterUpdate:Lce,afterRemoved:KN,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:l,children:i}},children:void 0,text:void 0,domNode:null}}return e}function Oce(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:l}){var y;const d=new n(l);d.container=t,h2.set(t,d),(y=d.afterCreate)==null||y.call(d,d,t),r._internalHandles.add(Vl(()=>KN(t)))}function Lce(t,e,i,{widgetProperties:r}){var l;const n=h2.get(t);n&&(n.set(r),(l=n.afterUpdate)==null||l.call(n,n,t))}function KN(t){var i;const e=h2.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),h2.delete(t))}function m$(t){return typeof t=="function"&&t[JN]}const G8=new Set;function Dce(t){G8.add(t),t.finally(()=>G8.delete(t))}var ZN;const Rce="esri.widgets.Widget";let jce=0;const Fce={widgetIcon:"esri-icon-checkbox-unchecked"};function XN(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?XN(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const Nce=uhe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,l,d)=>{const y=e==null?void 0:e(r,n,l,d),v=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in l)||v){const x=r[2].toLowerCase()+r.slice(3),$=P=>y==null?void 0:y.call(l,P);l.addEventListener(x,$,v);const E=()=>l.removeEventListener(x,$,v),k=d.afterRemoved;d.afterRemoved=P=>{k==null||k(P),E()}}return y}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:l}=r,d=n===Event.CAPTURING_PHASE;let y=`on${l}${d?"capture":""}`;const v=e.properties;(v&&y in v||(y=`on${l[0].toUpperCase()}${l.slice(1)}${d?"Capture":""}`,v&&y in v))&&(Hj(),t.scheduleRender(),v[y].call(v.bind||i,r))}});let c5=!1,Xi=class extends Y2(Ha.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Gs,this._projector=Nce,this._readyForTrueRender=!1,this.iconClass=Fce.widgetIcon,this.icon=null,this.key=this,this._loadLocale=f0(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const d=await $s(this._messageBundleProps.map(async({bundlePath:y,propertyName:v})=>{if(this.destroyed)return;let x=await GO(y);this.uiStrings&&Object.keys(this.uiStrings)&&(x=XN(ae(x),this.uiStrings)),this[v]=x}));if(this.destroyed)return;for(const y of d)y.error&&ve.getLogger(this).error("widget-intl:locale-error",this.declaredClass,y.error)}await this.loadLocale()}),Ace();const r="esri-widget-uid-"+bN(),n=this.render.bind(this);this._trackingTarget=new U2(()=>this.scheduleRender());const l=()=>{var $;if(!this._readyForTrueRender||this.destroyed)return null;const d=n();let{properties:y}=d;y||(d.properties=y={});const{key:v}=y;v||(y.key=r),this.visible?y.styles||(y.styles={}):(y.class="",y.styles={display:"none"}),y.styles.display||(y.styles.display="");let x=0;return($=d.children)==null||$.forEach(E=>{if(m$(E.vnodeSelector))return;let{properties:k}=E;k||(E.properties=k={}),k.key||(k.key=`${this.id}--${x++}`)}),YN(this,d)};this.render=()=>{if(c5)return l();let d=Yse(this)??null;if(d)return d;this._trackingTarget.clear(),c5=!0;try{d=Bl(this._trackingTarget,l)}catch(y){throw console.error(y),y}finally{c5=!1}return d&&Kse(this,d),d},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Dce(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Ix)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(ri(this._trackingTarget),ri(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,q3(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return Y7(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+jce++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(ZN=JN,kce)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(q3(this),this._projector.scheduleRender())}classes(...e){return Jj.apply(this,e)}renderNow(){q3(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(me(()=>this.viewModel,(r,n)=>{n&&this._internalHandles.remove("delegated-events"),r&&z2(r)&&this._internalHandles.add(this._delegatedEventNames.map(l=>V2(r,l,d=>{this.emit(l,d)})),"delegated-events")},st)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Ix),this.scheduleRender()};this._internalHandles.add([VO(e),me(()=>this.uiStrings,e),Xn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Xi[ZN]=!0,g([S()],Xi.prototype,"_readyForTrueRender",void 0),g([S({value:null})],Xi.prototype,"container",null),g([St("container")],Xi.prototype,"castContainer",null),g([S()],Xi.prototype,"iconClass",void 0),g([S()],Xi.prototype,"icon",void 0),g([S()],Xi.prototype,"id",null),g([S()],Xi.prototype,"label",null),g([S()],Xi.prototype,"renderable",null),g([S()],Xi.prototype,"uiStrings",void 0),g([S()],Xi.prototype,"viewModel",void 0),g([S({value:!0})],Xi.prototype,"visible",null),g([S()],Xi.prototype,"key",void 0),g([S()],Xi.prototype,"children",void 0),g([S()],Xi.prototype,"afterCreate",void 0),g([S()],Xi.prototype,"afterUpdate",void 0),g([S()],Xi.prototype,"afterRemoved",void 0),Xi=g([J(Rce)],Xi);const Dr=Xi;function U8(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function zce(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function Zg(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function Vce(t){return t.type==="bing-maps"}const pu=[];let kp=class extends Ww{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ze,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(n=>me(()=>{var l;return[n.suspended,(l=n.layer)==null?void 0:l.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([Vs(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Xn(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;pu.length=0,e&&i?(i.forEach(r=>{var d;if(r.suspended||!((d=r.layer)!=null&&d.attributionVisible))return;const n=r.layer;if(U8(n,"user"))return void Zg(pu,r,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(r)){const y=this._fetchedAttributionData.get(r);return void(y?Zg(pu,r,this._getDynamicAttribution(y,e,n)):U8(n)&&Zg(pu,r,n.copyright))}return void this._fetchAttributionData(r)}const l=n.get("portalItem.accessInformation");Zg(pu,r,l||n.copyright)}),zce(this.items,pu)&&(this.items.removeAll(),this.items.addMany(pu)),pu.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await K2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,Vce(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let l=0;l<r.length;l++){const d=r[l],y=d.coverageAreas;if(!y)return;for(const v of y){const x=v.bbox,$=v.zoomMin-(i&&v.zoomMin?1:0),E=v.zoomMax-(i&&v.zoomMax?1:0),k=new Ct({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:ut.WGS84}),P={extent:xh(k),attribution:d.attribution||"",score:v.score!=null?v.score:100,id:l};for(let D=$;D<=E;D++)n[D]??(n[D]=[]),n[D].push(P)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var $;const{extent:n,scale:l}=i;let d=(($=r.tileInfo)==null?void 0:$.scaleToZoom(l))??0;if(d=Math.min(e.maxKey??0,Math.round(d)),!n||d==null||d<=-1)return"";const y=e[d],v=Q2(n.center.clone().normalize(),i.spatialReference),x=new Set;return y?y.filter(E=>{const k=E.id,P=!x.has(k)&&v&&E.extent&&e_(E.extent,v);return P&&x.add(k),P}).sort((E,k)=>k.score-E.score||E.objectId-k.objectId).map(E=>E.attribution).join(", "):""}};g([S({readOnly:!0,type:ze})],kp.prototype,"items",void 0),g([S({readOnly:!0})],kp.prototype,"state",null),g([S()],kp.prototype,"view",void 0),kp=g([J("esri.widgets.Attribution.AttributionViewModel")],kp);const QN=kp;function kr(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Gce(t[e])}}}function Bce(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Gce(t){return function(e,...i){Bce(e)?nne(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Or(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Uce=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},ez=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?ez(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Uce(n)),e.push(n))}},qce=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return ez(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function X(t,e,...i){return typeof t!="function"||m$(t)?qce(t,e,...i):t(e,...i)}const op="esri-attribution",fu={base:`${op} esri-widget`,poweredBy:`${op}__powered-by`,sources:`${op}__sources`,open:`${op}--open`,sourcesOpen:`${op}__sources--open`,link:`${op}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Xr=class extends Dr{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=fu.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new QN}initialize(){this.addHandles(Vs(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[fu.open]:this._isOpen};return X("div",{bind:this,class:this.classes(fu.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return X("div",{class:fu.poweredBy},"Powered by"," ",X("a",{class:fu.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:n}=this,l={[fu.sourcesOpen]:e,[fu.interactive]:i};return X("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(fu.sources,l),innerHTML:n,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:l}=e,d=l>n,y=this._attributionTextOverflowed!==d;if(this._attributionTextOverflowed=d,y&&(i=!0),this._isOpen){const v=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,v&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};g([S()],Xr.prototype,"_isOpen",void 0),g([S()],Xr.prototype,"_isInteractive",null),g([S()],Xr.prototype,"_attributionTextOverflowed",void 0),g([S()],Xr.prototype,"_prevSourceNodeHeight",void 0),g([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Xr.prototype,"attributionText",null),g([S()],Xr.prototype,"iconClass",void 0),g([S()],Xr.prototype,"icon",void 0),g([S()],Xr.prototype,"itemDelimiter",void 0),g([S()],Xr.prototype,"label",null),g([S(),Or("esri/widgets/Attribution/t9n/Attribution")],Xr.prototype,"messages",void 0),g([S()],Xr.prototype,"view",null),g([S({type:QN})],Xr.prototype,"viewModel",void 0),g([kr()],Xr.prototype,"_toggleState",null),Xr=g([J("esri.widgets.Attribution")],Xr);const Hce=Xr,tz=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return Vd(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return g([S()],e.prototype,"goToOverride",void 0),g([S()],e.prototype,"view",void 0),e=g([J("esri.widgets.support.GoTo")],e),e},Wce="esri.widgets.CompassViewModel";let Cc=class extends tz(Be){constructor(e){super(e),this._handles=new Gs,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(me(()=>this.view,this._updateRotationWatcher,st))}destroy(){Ii(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?me(()=>e==null?void 0:e.rotation,this._updateForRotation,st):me(()=>e==null?void 0:e.camera,this._updateForCamera,st))}};g([S({readOnly:!0})],Cc.prototype,"canShowNorth",null),g([S()],Cc.prototype,"orientation",void 0),g([S({readOnly:!0})],Cc.prototype,"state",null),g([S()],Cc.prototype,"view",void 0),Cc=g([J(Wce)],Cc);const iz=Cc,yu={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Mo=class extends Dr{constructor(e,i){super(e,i),this.iconClass=yu.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new iz}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="disabled",n=(i==="rotation"?"rotation":"compass")=="compass",l=r?-1:0,d={[yu.disabled]:r,[yu.interactive]:!r},y={[yu.northIcon]:n,[yu.rotationIcon]:!n},{messages:v}=this;return X("div",{bind:this,class:this.classes(yu.base,d),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:l,"aria-label":v.reset,title:v.reset},X("span",{"aria-hidden":"true",class:this.classes(yu.icon,y),styles:this._toRotationTransform(e)}),X("span",{class:yu.text},v.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};g([S()],Mo.prototype,"goToOverride",null),g([S()],Mo.prototype,"iconClass",void 0),g([S()],Mo.prototype,"icon",void 0),g([S()],Mo.prototype,"label",null),g([S(),Or("esri/widgets/Compass/t9n/Compass")],Mo.prototype,"messages",void 0),g([S()],Mo.prototype,"view",null),g([S({type:iz})],Mo.prototype,"viewModel",void 0),g([kr()],Mo.prototype,"_reset",null),Mo=g([J("esri.widgets.Compass")],Mo);const Jce=Mo,ap="esri-navigation-toggle",xn={base:`${ap} esri-widget`,button:`${ap}__button esri-widget--button`,activeButton:`${ap}__button--active`,panButton:`${ap}__button--pan`,rotateButton:`${ap}__button--rotate`,isLayoutHorizontal:`${ap}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Pp=class extends Be{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Xn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};g([S({readOnly:!0})],Pp.prototype,"state",null),g([S()],Pp.prototype,"navigationMode",void 0),g([S()],Pp.prototype,"view",void 0),Pp=g([J("esri.widgets.NavigationToggleViewModel")],Pp);const rz=Pp;let $o=class extends Dr{constructor(e,i){super(e,i),this.iconClass=xn.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new rz}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[xn.disabled]:e,[xn.isLayoutHorizontal]:this.layout==="horizontal"},n={[xn.activeButton]:i},l={[xn.activeButton]:!i},d=e?-1:0,y=this.messages.toggle;return X("div",{bind:this,class:this.classes(xn.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:d,"aria-label":y,title:y},X("div",{class:this.classes(xn.button,xn.panButton,n)},X("span",{class:xn.panIcon})),X("div",{class:this.classes(xn.button,xn.rotateButton,l)},X("span",{class:xn.rotationIcon})))}_toggle(){this.toggle()}};g([S()],$o.prototype,"iconClass",void 0),g([S()],$o.prototype,"icon",void 0),g([S()],$o.prototype,"label",null),g([S({value:"vertical"})],$o.prototype,"layout",null),g([S(),Or("esri/widgets/NavigationToggle/t9n/NavigationToggle")],$o.prototype,"messages",void 0),g([S()],$o.prototype,"view",null),g([S({type:rz})],$o.prototype,"viewModel",void 0),g([kr()],$o.prototype,"_toggle",null),$o=g([J("esri.widgets.NavigationToggle")],$o);const Yce=$o,qf={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let pl=class extends Dr{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[qf.disabled]:!this.enabled,[qf.interactive]:this.enabled};return X("div",{bind:this,class:this.classes(qf.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},X("span",{"aria-hidden":"true",role:"presentation",class:this.classes(qf.icon,this.iconClass??"")}),X("span",{class:qf.iconText},this.title))}_triggerAction(){this.action.call(this)}};g([S()],pl.prototype,"action",void 0),g([S()],pl.prototype,"enabled",void 0),g([S()],pl.prototype,"iconClass",void 0),g([S()],pl.prototype,"icon",void 0),g([S()],pl.prototype,"title",void 0),g([kr()],pl.prototype,"_triggerAction",null),pl=g([J("esri.widgets.IconButton")],pl);const q8=pl;let Cp=class extends Be{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};g([S({readOnly:!0})],Cp.prototype,"canZoomIn",null),g([S({readOnly:!0})],Cp.prototype,"canZoomOut",null),g([S()],Cp.prototype,"view",void 0),Cp=g([J("esri.widgets.Zoom.ZoomConditions2D")],Cp);const Kce=Cp;let Op=class extends Be{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};g([S({readOnly:!0})],Op.prototype,"canZoomIn",null),g([S({readOnly:!0})],Op.prototype,"canZoomOut",null),g([S()],Op.prototype,"view",void 0),Op=g([J("esri.widgets.Zoom.ZoomConditions3D")],Op);const Zce=Op;let Fu=class extends Be{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Kce({view:e}):e.type==="3d"&&(this._zoomConditions=new Zce({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():p0(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():p0(e.goTo({zoomFactor:.5}))}};g([S()],Fu.prototype,"_zoomConditions",void 0),g([S()],Fu.prototype,"canZoomIn",null),g([S()],Fu.prototype,"canZoomOut",null),g([S({readOnly:!0})],Fu.prototype,"state",null),g([S()],Fu.prototype,"view",null),Fu=g([J("esri.widgets.Zoom.ZoomViewModel")],Fu);const sz=Fu,Hf={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Ma=class extends Dr{constructor(e,i){super(e,i),this.iconClass=Hf.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new sz}initialize(){this._zoomInButton=new q8({action:this.zoomIn.bind(this),iconClass:Hf.zoomInIcon}),this._zoomOutButton=new q8({action:this.zoomOut.bind(this),iconClass:Hf.zoomOutIcon})}destroy(){this._zoomInButton=ri(this._zoomInButton),this._zoomOutButton=ri(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[Hf.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:n}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=n;const{zoomIn:l,zoomOut:d}=this.messages;return this._zoomInButton.title=l,this._zoomOutButton.title=d,X("div",{class:this.classes(Hf.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};g([S()],Ma.prototype,"iconClass",void 0),g([S()],Ma.prototype,"icon",void 0),g([S()],Ma.prototype,"label",null),g([S({value:"vertical"})],Ma.prototype,"layout",null),g([S(),Or("esri/widgets/Zoom/t9n/Zoom")],Ma.prototype,"messages",void 0),g([S()],Ma.prototype,"view",null),g([S({type:sz})],Ma.prototype,"viewModel",void 0),Ma=g([J("esri.widgets.Zoom")],Ma);const Xce=Ma;function Qce(t){return(t==null?void 0:t.view)!==void 0}let fb=class extends ihe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),l=n==null?void 0:n.widget;Qce(l)&&(l.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([me(()=>this.components,this._componentsWatcher,st),me(()=>this.view,this._updateViewAwareWidgets,st)])}_add(e,i,r,n,l){let d=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;d=this._createComponent(e)}super._add(d,i,r,n,l)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new pb({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new Hce({view:i});case"compass":return new Jce({view:i});case"navigation-toggle":return new Yce({view:i});case"zoom":return new Xce({view:i})}}};g([S()],fb.prototype,"components",void 0),fb=g([J("esri.views.ui.DefaultUI")],fb);const nz=fb;let yb=class extends nz{constructor(e){super(e),this.components=["attribution","zoom"]}};g([S()],yb.prototype,"components",void 0),yb=g([J("esri.views.ui.2d.DefaultUI2D")],yb);const oz=yb;var dS;let mb=dS=class extends ge{constructor(t){super(t),this.color=new Ne([0,0,0,1])}clone(){return new dS(ae({color:this.color}))}};g([S({type:Ne,json:{write:!0}})],mb.prototype,"color",void 0),mb=dS=g([J("esri.webmap.background.ColorBackground")],mb);const ede=mb;let az,lz,uz,hz,cz,dz;async function tde(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:l}]=await Promise.all([le(()=>import("./webglDeps-30844d90.js"),["assets/webglDeps-30844d90.js","assets/VertexArrayObject-ab47a1d6.js","assets/Texture-f6348ae2.js","assets/enums-b14466b3.js","assets/ProgramTemplate-05235e0a.js","assets/programUtils-c964fa40.js","assets/NestedMap-1b5db22e.js"]),le(()=>import("./mapViewDeps-00672561.js"),["assets/mapViewDeps-00672561.js","assets/CIMResourceManager-b8596627.js","assets/fontUtils-fc0691f0.js","assets/Rasterizer-4873c8da.js","assets/cimAnalyzer-a75fa5be.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-5e0e38c0.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/rasterizingUtils-9bca9145.js","assets/imageutils-9adfcaac.js","assets/Container-01e66e42.js","assets/EffectView-bf3c1891.js","assets/enums-b14466b3.js","assets/Texture-f6348ae2.js","assets/BufferPool-ede83915.js","assets/AttributeStoreView-4c38e5a7.js","assets/TiledDisplayObject-f3761b81.js","assets/color-1d7e752a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-a7ca1fab.js","assets/VertexArrayObject-ab47a1d6.js","assets/ProgramTemplate-05235e0a.js","assets/GeometryUtils-efe9597c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-27ea47a3.js","assets/visualVariablesUtils-860f1be8.js","assets/ExpandedCIM-0496b033.js","assets/util-b828dc39.js","assets/enums-fb086c25.js","assets/programUtils-c964fa40.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-a86fa27a.js","assets/Matcher-5f2e52db.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-b55e37bf.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-f0e74e96.js","assets/ComputedAttributeStorage-91ebb345.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/projectionSupport-03e991d5.js","assets/json-48e3ea08.js","assets/RenderingContext-0a1ced51.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-d2ce3f60.js","assets/normalizeUtilsSync-7ac4d606.js","assets/GraphicContainer-cc0b4924.js","assets/BaseGraphicContainer-5da11e27.js","assets/FeatureContainer-cb4c1483.js","assets/TileContainer-42268b14.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-08b983c3.js"])]);lz=t,uz=e,hz=i,cz=r,dz=n,az=l}const H8=160,W8={flipY:!0,premultipliedAlpha:!0};let tt=class extends ise(Lne(wne(xoe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new F0({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new fs({constraints:new UF({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new Nae(this),this._pePromise=null,this.floors=new ze,this.highlightOptions=new hN,this.inputManager=new bue({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new cN,this.type="2d",this.ui=new oz,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([me(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(H8)},qd),this.on("resize",i=>this.stateManager.resize(i.width,i.height)),me(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),Iie()}destroy(){this._set("preconditionsReady",!1),this.frameTask=ri(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new $ue(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:l}=this;let d=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!l&&(i!=null&&i.effectiveLODs||(d=-1),(!r||e===0&&d===-1)&&(!n||n.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Hd()||(this._pePromise||(this._pePromise=Oh().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=this.spatialReference,r=e.targetGeometry;return!!Jl(r.spatialReference,i)||this._projectionEngineLoaded}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return rde(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){this.stateManager.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var i,r,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(l=>!l.destroyed&&!("layerViews"in l)&&l.updating===!0));if(ce("esri-2d-log-updating")){const l=this.allLayerViews.reduce((d,y)=>({...d,[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(r=this.labelManager)==null?void 0:r.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(l)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,i){if(e)return this.animation&&(this.animation=null),this._createAnimation(),b_(()=>this.ready,i).then(()=>{var l;const r={animate:!0,...i},n=wae(e,this);return(l=this.animation)==null||l.update(n),this._gotoTask={},r.animate?this._gotoAnimated(n,r):this._gotoImmediate(n,r)});ve.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(e,i){const r=t8(e)?e8(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set,l=!1,d=null,y=null;i!=null&&i.include?Y8(i.include,J8(this,E=>n.add(E),E=>{d||(d=new Set),d.add(E)},E=>n.add(E),()=>l=!0)):(l=!0,n=new Set(this.allLayerViews)),i!=null&&i.exclude&&Y8(i.exclude,J8(this,E=>n.delete(E),E=>{y||(y=new Set),y.add(E)}));const v=this.allLayerViews.filter(E=>!E.suspended&&n.has(E)).reverse(),x=this.toMap(r);let $=[...l?this.graphicsView.hitTest(x).map(E=>({type:"graphic",graphic:E,layer:null,mapPoint:x})):[],...await Promise.all(v.map(E=>E.hitTest(x,r)).toArray())].filter(Yo).flat().filter(Yo);return d&&($=$.filter(E=>!("graphic"in E)||!E.graphic||(d==null?void 0:d.has(pS(E.graphic))))),y&&($=$.filter(E=>!("graphic"in E)||!E.graphic||!(y!=null&&y.has(pS(E.graphic))))),{screenPoint:r,results:$}}async takeScreenshot(e){const i=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(i);return Eue(r,{format:i.format,quality:i.quality,rotation:0,disableDecorations:!1},W8)}async _takeScreenshot(e){const i=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(i);return Aue(r,W8)}_createScreenshotPlan(e){e=e??{};const i=this.supersampleScreenshotsEnabled?Math.min(4,Oue(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(d=>{const y=this.allLayerViews.find(v=>v.layer.id===d.id);y&&"container"in y&&y.container&&r.push(y.container)})):r=this._stage.children;const{format:n,quality:l}=Cue(e.format,e.quality);return Iue(e,i,this.size,this.padding,n,l,r,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const i=t8(e)?e8(this,e):e;return this.stateManager.toMap(i)}toScreen(e){return this.stateManager.toScreen(e)}on(e,i,r,n){return this.inputManager&&this.viewEvents.on(e,i,r,n)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,r;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}hasLayerViewModule(e){return l8.hasLayerViewModule(e)}importLayerView(e){return l8.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(ve.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(i=>({...i,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=Wue(this.type);return ce("safari")&&ce("safari")<9&&(e=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ce("safari")})),e!=null?(ve.getLogger(this).warn("#validate()",e.message),Promise.reject(e)):tde()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Y4),this.animation}_cancellableGoTo(e,i,r){const n=()=>e===this._gotoTask,l=r.then(()=>{n()&&(this.animation=null)}).catch(y=>{throw n()&&(i&&!i.done&&(i.stop(),this.frameTask.animationInProgress=!1),this.animation=null),y}),d=new Promise(y=>y(l));return i.when().catch(()=>{n()&&d.cancel&&d.cancel()}),d}_gotoImmediate(e,i){const r=this._gotoTask,n=this.animation,l=e.then(d=>{if(hi(i),r!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=d,n.finish()});return this._cancellableGoTo(r,n,l)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const i=performance.now()-this._lastStationaryEventTimestamp;i<H8&&(this._stationaryTimer=this._flipStationary(i))},e)),this._stationaryTimer}_getDefaultViewpoint(){var N;const{constraints:e,initialExtent:i,map:r,padding:n,size:l}=this;if(!e)return null;const d=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),v=d==null?void 0:d.viewpoint,x=((N=v==null?void 0:v.targetGeometry)==null?void 0:N.extent)??i,$=x==null?void 0:x.center,E=(v==null?void 0:v.rotation)??0,k=(v==null?void 0:v.scale)||x&&_0(x,[l[0]-n.left-n.right,l[1]-n.top-n.bottom]),P=y.center??$,D=y.rotation??E,L=y.scale??k;return P&&L?new Ra({targetGeometry:P,scale:L,rotation:D}):null}_gotoAnimated(e,i){const r=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const l=e.then(d=>{if(hi(i),r!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return n.update(d),this.animationManager.animate(n,this.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,l)}_startup(){var y;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const i=new az(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new dz,this._magnifierView.magnifier=this.magnifier;const r=new hz({view:this});this._set("labelManager",r);const n=new Fae({view:this});this._set("animationManager",n);const l=new cz({view:this,animationManager:n});this._set("mapViewNavigation",l),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",v=>this.fatalError=v.error),me(()=>this.stationary,v=>i.stationary=v,Tl),me(()=>this.background,v=>{i.backgroundColor=v==null?void 0:v.color,this._magnifierView.backgroundColor=v==null?void 0:v.color},Tl),me(()=>this.magnifier,v=>this._magnifierView.magnifier=v,Tl),me(()=>this.renderingOptions,v=>i.renderingOptions=v,Tl),me(()=>this.highlightOptions,v=>i.highlightOptions=v,Tl),me(()=>this.state.id,()=>i.state=this.state,Tl)],"map-view"),this._updateStageChildren();const d=this._resolveWhenReady;this._resolveWhenReady=[],d.forEach(v=>v(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this._stage.addChild(i.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Yae(ese.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new lz({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new uz(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};tt.type="2d",g([S({readOnly:!0})],tt.prototype,"animationManager",void 0),g([S({constructOnly:!0})],tt.prototype,"deactivatedWebGLExtensions",void 0),g([S({constructOnly:!0})],tt.prototype,"debugWebGLExtensions",void 0),g([S({readOnly:!0})],tt.prototype,"featuresTilingScheme",void 0),g([S({readOnly:!0})],tt.prototype,"fullOpacity",void 0),g([S({readOnly:!0})],tt.prototype,"graphicsTileStore",null),g([S()],tt.prototype,"graphicsView",void 0),g([S()],tt.prototype,"stateManager",void 0),g([S()],tt.prototype,"constraintsInfo",null),g([S({readOnly:!0})],tt.prototype,"state",null),g([S()],tt.prototype,"initialExtentRequired",null),g([S()],tt.prototype,"labelManager",void 0),g([S({readOnly:!0})],tt.prototype,"resourceManager",null),g([S({readOnly:!0})],tt.prototype,"textureManager",null),g([S({readOnly:!0})],tt.prototype,"mapViewNavigation",void 0),g([S({constructOnly:!0})],tt.prototype,"renderCanvas",void 0),g([S()],tt.prototype,"renderingOptions",void 0),g([S({readOnly:!0})],tt.prototype,"rendering",void 0),g([S({constructOnly:!0})],tt.prototype,"supersampleScreenshotsEnabled",void 0),g([S({readOnly:!0})],tt.prototype,"supportsGround",void 0),g([S()],tt.prototype,"_stationaryTimer",void 0),g([S()],tt.prototype,"_defaultsFromMapSettings",null),g([S()],tt.prototype,"_pePromise",void 0),g([S({readOnly:!0})],tt.prototype,"typeSpecificPreconditionsReady",null),g([S()],tt.prototype,"animation",null),g([S({type:ede})],tt.prototype,"background",null),g([S()],tt.prototype,"center",null),g([S({type:UF})],tt.prototype,"constraints",null),g([S()],tt.prototype,"extent",null),g([S()],tt.prototype,"floors",void 0),g([S({type:hN})],tt.prototype,"highlightOptions",void 0),g([S({readOnly:!0})],tt.prototype,"inputManager",void 0),g([S()],tt.prototype,"map",void 0),g([S()],tt.prototype,"padding",null),g([S()],tt.prototype,"resizeAlign",null),g([S({readOnly:!0})],tt.prototype,"resolution",null),g([S()],tt.prototype,"rotation",null),g([S()],tt.prototype,"scale",null),g([S({constructOnly:!0})],tt.prototype,"spatialReferenceLocked",void 0),g([S()],tt.prototype,"stationary",null),g([S({type:cN,readOnly:!0})],tt.prototype,"timeline",void 0),g([S({readOnly:!0})],tt.prototype,"type",void 0),g([S({readOnly:!0})],tt.prototype,"updating",null),g([S()],tt.prototype,"viewpoint",null),g([S()],tt.prototype,"zoom",null),g([S({readOnly:!0})],tt.prototype,"navigating",null),g([S(),St(t=>t instanceof nz?t:Id(oz,t))],tt.prototype,"ui",void 0),tt=g([J("esri.views.MapView")],tt);const ide=tt;function pS(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function J8(t,e,i,r,n){return l=>{if(l instanceof ur){if(l.layer===t)n==null||n();else{const d=t.allLayerViews.find(y=>y.layer===l.layer);d&&(r==null||r(d))}i(pS(l))}else{const d=t.allLayerViews.find(y=>y.layer===l);d&&e(d)}}}function Y8(t,e){if(t)if(Qb(t))for(const i of t)if(Qb(i))for(const r of i)e(r);else e(i);else e(t)}function rde(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}var fS;let Nu=fS=class extends hf{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new fS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};g([S()],Nu.prototype,"displayValueEnabled",void 0),g([S()],Nu.prototype,"max",void 0),g([S()],Nu.prototype,"min",void 0),g([S()],Nu.prototype,"step",void 0),g([S()],Nu.prototype,"value",void 0),Nu=fS=g([J("esri.support.Action.ActionSlider")],Nu);const sde=Nu,pz={hide:"hide",hideChildren:"hide-children"};function c2(t){if(t)return t.listMode!=null?t.listMode:void 0}function nde(t){if(t)return t.minScale!=null?t.minScale:void 0}function ode(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function ade(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const i=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function fz(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==pz.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function lde(t){const e=t&&(t.get("layer.layer")||t.layer);if(!e)return!1;const i=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function ude(t){return c2(t)!==pz.hide}function hde(t,e){if(!t||isNaN(e))return!1;const i=nde(t),r=ode(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,l=r!=null&&!isNaN(r)&&r>0&&e<r;return n||l}function yz(t,e){t&&t.sort((i,r)=>{const n=e.indexOf(i.uid),l=e.indexOf(r.uid);return n>l?-1:n<l?1:0})}function cde(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=fz(i);r&&yz(i.get(r),e)}function K8(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function d5(t,e){var r;const i=(r=t.layer)==null?void 0:r.uid;return i!=null?e.find(n=>{var l;return((l=n.layer)==null?void 0:l.uid)===i}):null}function dde(t){const e=pde(t)?t:null,i=t==null?void 0:t.parent,r=(i==null?void 0:i.type)==="map-image"?e==null?void 0:e.source:null,n="";return r&&i?{layer:i,title:n,sublayerIds:[r.mapLayerId]}:{layer:t,title:n}}function pde(t){return!!(t!=null&&t.layer)}function mz(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:fde(t);i.push(...r)}}function fde(t){return t.split(",").map(e=>e.trim())}function d2(t){return t&&typeof t.render=="function"}function yde(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const gz="esri-layer-list-panel",Wf=`${gz}__content`,Qa={base:gz,content:Wf,contentLegend:`${Wf}--legend`,contentString:`${Wf}--string`,contentElement:`${Wf}--html-element`,contentWidget:`${Wf}--widget`},mde="legends";let On=class extends Bh(Dr){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(me(()=>this.content,e=>this._createLegend(e),st))}destroy(){this._legend=ri(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return X("div",{class:Qa.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r}=this;return!e||r?null:e==="legend"&&i?X("div",{class:this.classes(Qa.content,Qa.contentLegend),key:i},i.render()):typeof e=="string"?X("div",{class:this.classes(Qa.content,Qa.contentString),key:e,innerHTML:e}):d2(e)?X("div",{class:this.classes(Qa.content,Qa.contentWidget),key:e},e.render()):e instanceof HTMLElement?X("div",{class:this.classes(Qa.content,Qa.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:r}=e;return i&&r?{view:r,layerInfos:[dde(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await le(()=>import("./Legend-308b2bf3.js"),["assets/Legend-308b2bf3.js","assets/EffectView-bf3c1891.js","assets/pixelRangeUtils-cc28ceb4.js"]),{listItem:r}=this,n=new i(this._getLegendOptions());this._legend=n,this.notifyChange("className"),this.notifyChange("title");const l=me(()=>{var d,y;return[r==null?void 0:r.view,r==null?void 0:r.layer,(d=r==null?void 0:r.layer)==null?void 0:d.source,(y=r==null?void 0:r.layer)==null?void 0:y.parent]},()=>this._updateLegend(n),st);this.addHandles(l,mde),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:d2(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(r=>{const n=this._getWidget(r);return n&&(i=n),!!n}),i}return this._getWidget(e)}};g([S()],On.prototype,"_legend",void 0),g([S()],On.prototype,"className",null),g([S()],On.prototype,"content",void 0),g([S()],On.prototype,"disabled",null),g([S()],On.prototype,"image",void 0),g([S()],On.prototype,"listItem",void 0),g([S()],On.prototype,"title",null),g([S()],On.prototype,"open",void 0),g([S()],On.prototype,"visible",void 0),On=g([J("esri.widgets.LayerList.ListItemPanel")],On);const vz=On;var jy;const gde=ze.ofType({key:"type",defaultKeyValue:"button",base:hf,typeMap:{button:cf,toggle:c_,slider:sde}}),bz=ze.ofType(gde),Xg="layer",p5="child-list-mode",vde="hide",bde="esri.widgets.LayerList.ListItem";let li=jy=class extends Bh(ra(Be)){constructor(t){super(t),this.actionsSections=new bz,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ze.ofType(jy)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([me(()=>this.layer,t=>this._watchLayerProperties(t),st),me(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),st),me(()=>this.view,t=>this._updateChildrenView(t),st),me(()=>this.panel,t=>this._setListItemOnPanel(t),st),me(()=>[this.layer,this.view],()=>this._getLayerView(),st)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new vz(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!hde(this.layer,this.get("view.scale"))}get visibilityMode(){return ade(this.layer)}clone(){return new jy({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.handles.remove(p5),this.children.removeAll(),!t)return;t.forEach(i=>{this.handles.add(me(()=>i.listMode,()=>this._addChildren(t)),p5)});const e=t.filter(i=>c2(i)!==vde);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),Xg)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>ude(e)?new jy({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Yo).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(Xg),this.handles.remove(p5),!t))return;if(this.handles.add(me(()=>t.listMode,()=>this._watchLayerProperties(t)),Xg),c2(t)==="hide-children")return void this.children.removeAll();const e=fz(t);e&&this.handles.add(me(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},st),Xg)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};g([S({type:bz})],li.prototype,"actionsSections",void 0),g([S()],li.prototype,"actionsOpen",void 0),g([S()],li.prototype,"checkPublishStatusEnabled",void 0),g([S({type:ze})],li.prototype,"children",void 0),g([S()],li.prototype,"childrenSortable",void 0),g([S({readOnly:!0})],li.prototype,"connectionStatus",null),g([S({readOnly:!0})],li.prototype,"error",null),g([S()],li.prototype,"hidden",void 0),g([S({readOnly:!0})],li.prototype,"incompatible",null),g([S()],li.prototype,"layer",void 0),g([S({readOnly:!0})],li.prototype,"layerView",void 0),g([S()],li.prototype,"listItemCreatedFunction",void 0),g([S()],li.prototype,"open",void 0),g([S({type:vz})],li.prototype,"panel",void 0),g([St("panel")],li.prototype,"castPanel",null),g([S()],li.prototype,"parent",void 0),g([S()],li.prototype,"sortable",void 0),g([S()],li.prototype,"title",null),g([S({readOnly:!0})],li.prototype,"publishing",null),g([S({readOnly:!0})],li.prototype,"updating",null),g([S()],li.prototype,"view",void 0),g([S()],li.prototype,"visible",null),g([S({readOnly:!0})],li.prototype,"visibleAtCurrentScale",null),g([S({readOnly:!0})],li.prototype,"visibilityMode",null),li=jy=g([J(bde)],li);const g$=li,fo={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},wde="hide",wz=ze.ofType(g$);let zu=class extends Ha.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new wz,this.view=null}initialize(){this.addHandles([me(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),st),me(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],fo.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){var P,D;const l=e==null?void 0:e.layer;if(!l)return;const d=(D=(P=this.view)==null?void 0:P.map)==null?void 0:D.layers,y=i?K8(i):d,v=r?K8(r):d;if(!y||!v)return;const{operationalItems:x}=this,$=(i==null?void 0:i.children)||x,E=(r==null?void 0:r.children)||x,k=v.length-n;e.parent=r||null,$.includes(e)&&$.remove(e),y.includes(l)&&y.remove(l),E.includes(e)||E.add(e,k),v.includes(l)||v.add(l,k)}_createLayerViewHandles(e){this.removeHandles(fo.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),fo.layerViews)}_createMapLayerHandles(e){this.removeHandles(fo.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),fo.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n}=this;return new g$({checkPublishStatusEnabled:n,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>c2(i)!==wde)}_watchLayersListMode(e){this.removeHandles(fo.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(me(()=>i.listMode,()=>this._compileList()),fo.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const i=this._getViewableLayers(e);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.find(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.removeMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const l=e.indexOf(r.layer),d=e.indexOf(n.layer);return l>d?-1:l<d?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([fo.mapLayers,fo.layerViews,fo.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([me(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),st),me(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),st)],fo.viewLayers)}};g([S()],zu.prototype,"checkPublishStatusEnabled",void 0),g([S()],zu.prototype,"listItemCreatedFunction",void 0),g([S({type:wz})],zu.prototype,"operationalItems",void 0),g([S({readOnly:!0})],zu.prototype,"state",null),g([S()],zu.prototype,"view",void 0),zu=g([J("esri.widgets.LayerList.LayerListViewModel")],zu);const _z=zu;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Z8(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function qa(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(i),!0).forEach(function(r){_de(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z8(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function gb(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gb=function(e){return typeof e}:gb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function _de(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Yl(){return Yl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Yl.apply(this,arguments)}function xde(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,l;for(l=0;l<r.length;l++)n=r[l],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function Sde(t,e){if(t==null)return{};var i=xde(t,e),r,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)r=l[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Mde="1.15.0";function Dl(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ql=Dl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Km=Dl(/Edge/i),X8=Dl(/firefox/i),$1=Dl(/safari/i)&&!Dl(/chrome/i)&&!Dl(/android/i),xz=Dl(/iP(ad|od|hone)/i),Sz=Dl(/chrome/i)&&Dl(/android/i),Mz={capture:!1,passive:!1};function Yt(t,e,i){t.addEventListener(e,i,!Ql&&Mz)}function Nt(t,e,i){t.removeEventListener(e,i,!Ql&&Mz)}function p2(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function $de(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ca(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&p2(t,e):p2(t,e))||r&&t===i)return t;if(t===i)break}while(t=$de(t))}return null}var Q8=/\s+/g;function Ks(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Q8," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(Q8," ")}}function ot(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function S0(t,e){var i="";if(typeof t=="string")i=t;else do{var r=ot(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function $z(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,l=r.length;if(i)for(;n<l;n++)i(r[n],n);return r}return[]}function ja(){var t=document.scrollingElement;return t||document.documentElement}function gr(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var l,d,y,v,x,$,E;if(t!==window&&t.parentNode&&t!==ja()?(l=t.getBoundingClientRect(),d=l.top,y=l.left,v=l.bottom,x=l.right,$=l.height,E=l.width):(d=0,y=0,v=window.innerHeight,x=window.innerWidth,$=window.innerHeight,E=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!Ql))do if(n&&n.getBoundingClientRect&&(ot(n,"transform")!=="none"||i&&ot(n,"position")!=="static")){var k=n.getBoundingClientRect();d-=k.top+parseInt(ot(n,"border-top-width")),y-=k.left+parseInt(ot(n,"border-left-width")),v=d+l.height,x=y+l.width;break}while(n=n.parentNode);if(r&&t!==window){var P=S0(n||t),D=P&&P.a,L=P&&P.d;P&&(d/=L,y/=D,E/=D,$/=L,v=d+$,x=y+E)}return{top:d,left:y,bottom:v,right:x,width:E,height:$}}}function eA(t,e,i){for(var r=bh(t,!0),n=gr(t)[e];r;){var l=gr(r)[i],d=void 0;if(i==="top"||i==="left"?d=n>=l:d=n<=l,!d)return r;if(r===ja())break;r=bh(r,!1)}return!1}function Y0(t,e,i,r){for(var n=0,l=0,d=t.children;l<d.length;){if(d[l].style.display!=="none"&&d[l]!==at.ghost&&(r||d[l]!==at.dragged)&&Ca(d[l],i.draggable,t,!1)){if(n===e)return d[l];n++}l++}return null}function v$(t,e){for(var i=t.lastElementChild;i&&(i===at.ghost||ot(i,"display")==="none"||e&&!p2(i,e));)i=i.previousElementSibling;return i||null}function jn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==at.clone&&(!e||p2(t,e))&&i++;return i}function tA(t){var e=0,i=0,r=ja();if(t)do{var n=S0(t),l=n.a,d=n.d;e+=t.scrollLeft*l,i+=t.scrollTop*d}while(t!==r&&(t=t.parentNode));return[e,i]}function Tde(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function bh(t,e){if(!t||!t.getBoundingClientRect)return ja();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=ot(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return ja();if(r||e)return i;r=!0}}while(i=i.parentNode);return ja()}function Ide(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function f5(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var T1;function Tz(t,e){return function(){if(!T1){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),T1=setTimeout(function(){T1=void 0},e)}}}function Ede(){clearTimeout(T1),T1=void 0}function Iz(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Ez(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var hn="Sortable"+new Date().getTime();function Ade(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(ot(n,"display")==="none"||n===at.ghost)){t.push({target:n,rect:gr(n)});var l=qa({},t[t.length-1].rect);if(n.thisAnimationDuration){var d=S0(n,!0);d&&(l.top-=d.f,l.left-=d.e)}n.fromRect=l}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Tde(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var l=!1,d=0;t.forEach(function(y){var v=0,x=y.target,$=x.fromRect,E=gr(x),k=x.prevFromRect,P=x.prevToRect,D=y.rect,L=S0(x,!0);L&&(E.top-=L.f,E.left-=L.e),x.toRect=E,x.thisAnimationDuration&&f5(k,E)&&!f5($,E)&&(D.top-E.top)/(D.left-E.left)===($.top-E.top)/($.left-E.left)&&(v=Pde(D,k,P,n.options)),f5(E,$)||(x.prevFromRect=$,x.prevToRect=E,v||(v=n.options.animation),n.animate(x,D,E,v)),v&&(l=!0,d=Math.max(d,v),clearTimeout(x.animationResetTimer),x.animationResetTimer=setTimeout(function(){x.animationTime=0,x.prevFromRect=null,x.fromRect=null,x.prevToRect=null,x.thisAnimationDuration=null},v),x.thisAnimationDuration=v)}),clearTimeout(e),l?e=setTimeout(function(){typeof r=="function"&&r()},d):typeof r=="function"&&r(),t=[]},animate:function(r,n,l,d){if(d){ot(r,"transition",""),ot(r,"transform","");var y=S0(this.el),v=y&&y.a,x=y&&y.d,$=(n.left-l.left)/(v||1),E=(n.top-l.top)/(x||1);r.animatingX=!!$,r.animatingY=!!E,ot(r,"transform","translate3d("+$+"px,"+E+"px,0)"),this.forRepaintDummy=kde(r),ot(r,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),ot(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ot(r,"transition",""),ot(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},d)}}}}function kde(t){return t.offsetWidth}function Pde(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var lp=[],y5={initializeByDefault:!0},Zm={mount:function(e){for(var i in y5)y5.hasOwnProperty(i)&&!(i in e)&&(e[i]=y5[i]);lp.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),lp.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var l=e+"Global";lp.forEach(function(d){i[d.pluginName]&&(i[d.pluginName][l]&&i[d.pluginName][l](qa({sortable:i},r)),i.options[d.pluginName]&&i[d.pluginName][e]&&i[d.pluginName][e](qa({sortable:i},r)))})},initializePlugins:function(e,i,r,n){lp.forEach(function(y){var v=y.pluginName;if(!(!e.options[v]&&!y.initializeByDefault)){var x=new y(e,i,e.options);x.sortable=e,x.options=e.options,e[v]=x,Yl(r,x.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var d=this.modifyOption(e,l,e.options[l]);typeof d<"u"&&(e.options[l]=d)}},getEventProperties:function(e,i){var r={};return lp.forEach(function(n){typeof n.eventProperties=="function"&&Yl(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return lp.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[i]=="function"&&(n=l.optionListeners[i].call(e[l.pluginName],r))}),n}};function Cde(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,l=t.cloneEl,d=t.toEl,y=t.fromEl,v=t.oldIndex,x=t.newIndex,$=t.oldDraggableIndex,E=t.newDraggableIndex,k=t.originalEvent,P=t.putSortable,D=t.extraEventProperties;if(e=e||i&&i[hn],!!e){var L,N=e.options,B="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ql&&!Km?L=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(r,!0,!0)),L.to=d||i,L.from=y||i,L.item=n||i,L.clone=l,L.oldIndex=v,L.newIndex=x,L.oldDraggableIndex=$,L.newDraggableIndex=E,L.originalEvent=k,L.pullMode=P?P.lastPutMode:void 0;var W=qa(qa({},D),Zm.getEventProperties(r,e));for(var q in W)L[q]=W[q];i&&i.dispatchEvent(L),N[B]&&N[B].call(e,L)}}var Ode=["evt"],ks=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,l=Sde(r,Ode);Zm.pluginEvent.bind(at)(e,i,qa({dragEl:Oe,parentEl:Ni,ghostEl:ft,rootEl:Si,nextEl:Oc,lastDownEl:vb,cloneEl:Li,cloneHidden:oh,dragStarted:Fy,putSortable:zr,activeSortable:at.active,originalEvent:n,oldIndex:l0,oldDraggableIndex:I1,newIndex:rn,newDraggableIndex:Xu,hideGhostForTarget:Cz,unhideGhostForTarget:Oz,cloneNowHidden:function(){oh=!0},cloneNowShown:function(){oh=!1},dispatchSortableEvent:function(y){ys({sortable:i,name:y,originalEvent:n})}},l))};function ys(t){Cde(qa({putSortable:zr,cloneEl:Li,targetEl:Oe,rootEl:Si,oldIndex:l0,oldDraggableIndex:I1,newIndex:rn,newDraggableIndex:Xu},t))}var Oe,Ni,ft,Si,Oc,vb,Li,oh,l0,rn,I1,Xu,Qg,zr,Lp=!1,f2=!1,y2=[],rc,yo,m5,g5,iA,rA,Fy,up,E1,A1=!1,ev=!1,bb,qr,v5=[],yS=!1,m2=[],C_=typeof document<"u",tv=xz,sA=Km||Ql?"cssFloat":"float",Lde=C_&&!Sz&&!xz&&"draggable"in document.createElement("div"),Az=function(){if(C_){if(Ql)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),kz=function(e,i){var r=ot(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),l=Y0(e,0,i),d=Y0(e,1,i),y=l&&ot(l),v=d&&ot(d),x=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+gr(l).width,$=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+gr(d).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&y.float&&y.float!=="none"){var E=y.float==="left"?"left":"right";return d&&(v.clear==="both"||v.clear===E)?"vertical":"horizontal"}return l&&(y.display==="block"||y.display==="flex"||y.display==="table"||y.display==="grid"||x>=n&&r[sA]==="none"||d&&r[sA]==="none"&&x+$>n)?"vertical":"horizontal"},Dde=function(e,i,r){var n=r?e.left:e.top,l=r?e.right:e.bottom,d=r?e.width:e.height,y=r?i.left:i.top,v=r?i.right:i.bottom,x=r?i.width:i.height;return n===y||l===v||n+d/2===y+x/2},Rde=function(e,i){var r;return y2.some(function(n){var l=n[hn].options.emptyInsertThreshold;if(!(!l||v$(n))){var d=gr(n),y=e>=d.left-l&&e<=d.right+l,v=i>=d.top-l&&i<=d.bottom+l;if(y&&v)return r=n}}),r},Pz=function(e){function i(l,d){return function(y,v,x,$){var E=y.options.group.name&&v.options.group.name&&y.options.group.name===v.options.group.name;if(l==null&&(d||E))return!0;if(l==null||l===!1)return!1;if(d&&l==="clone")return l;if(typeof l=="function")return i(l(y,v,x,$),d)(y,v,x,$);var k=(d?y:v).options.group.name;return l===!0||typeof l=="string"&&l===k||l.join&&l.indexOf(k)>-1}}var r={},n=e.group;(!n||gb(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},Cz=function(){!Az&&ft&&ot(ft,"display","none")},Oz=function(){!Az&&ft&&ot(ft,"display","")};C_&&!Sz&&document.addEventListener("click",function(t){if(f2)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),f2=!1,!1},!0);var sc=function(e){if(Oe){e=e.touches?e.touches[0]:e;var i=Rde(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[hn]._onDragOver(r)}}},jde=function(e){Oe&&Oe.parentNode[hn]._isOutsideThisEl(e.target)};function at(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Yl({},e),t[hn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kz(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,y){d.setData("Text",y.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:at.supportPointer!==!1&&"PointerEvent"in window&&!$1,emptyInsertThreshold:5};Zm.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);Pz(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:Lde,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Yt(t,"pointerdown",this._onTapStart):(Yt(t,"mousedown",this._onTapStart),Yt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Yt(t,"dragover",this),Yt(t,"dragenter",this)),y2.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Yl(this,Ade())}at.prototype={constructor:at,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(up=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,Oe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,l=n.preventOnFilter,d=e.type,y=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(y||e).target,x=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,$=n.filter;if(qde(r),!Oe&&!(/mousedown|pointerdown/.test(d)&&e.button!==0||n.disabled)&&!x.isContentEditable&&!(!this.nativeDraggable&&$1&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=Ca(v,n.draggable,r,!1),!(v&&v.animated)&&vb!==v)){if(l0=jn(v),I1=jn(v,n.draggable),typeof $=="function"){if($.call(this,e,v,this)){ys({sortable:i,rootEl:x,name:"filter",targetEl:v,toEl:r,fromEl:r}),ks("filter",i,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if($&&($=$.split(",").some(function(E){if(E=Ca(x,E.trim(),r,!1),E)return ys({sortable:i,rootEl:E,name:"filter",targetEl:v,fromEl:r,toEl:r}),ks("filter",i,{evt:e}),!0}),$)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!Ca(x,n.handle,r,!1)||this._prepareDragStart(e,y,v)}}},_prepareDragStart:function(e,i,r){var n=this,l=n.el,d=n.options,y=l.ownerDocument,v;if(r&&!Oe&&r.parentNode===l){var x=gr(r);if(Si=l,Oe=r,Ni=Oe.parentNode,Oc=Oe.nextSibling,vb=r,Qg=d.group,at.dragged=Oe,rc={target:Oe,clientX:(i||e).clientX,clientY:(i||e).clientY},iA=rc.clientX-x.left,rA=rc.clientY-x.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,Oe.style["will-change"]="all",v=function(){if(ks("delayEnded",n,{evt:e}),at.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!X8&&n.nativeDraggable&&(Oe.draggable=!0),n._triggerDragStart(e,i),ys({sortable:n,name:"choose",originalEvent:e}),Ks(Oe,d.chosenClass,!0)},d.ignore.split(",").forEach(function($){$z(Oe,$.trim(),b5)}),Yt(y,"dragover",sc),Yt(y,"mousemove",sc),Yt(y,"touchmove",sc),Yt(y,"mouseup",n._onDrop),Yt(y,"touchend",n._onDrop),Yt(y,"touchcancel",n._onDrop),X8&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Oe.draggable=!0),ks("delayStart",this,{evt:e}),d.delay&&(!d.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Km||Ql))){if(at.eventCanceled){this._onDrop();return}Yt(y,"mouseup",n._disableDelayedDrag),Yt(y,"touchend",n._disableDelayedDrag),Yt(y,"touchcancel",n._disableDelayedDrag),Yt(y,"mousemove",n._delayedDragTouchMoveHandler),Yt(y,"touchmove",n._delayedDragTouchMoveHandler),d.supportPointer&&Yt(y,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(v,d.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Oe&&b5(Oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Nt(e,"mouseup",this._disableDelayedDrag),Nt(e,"touchend",this._disableDelayedDrag),Nt(e,"touchcancel",this._disableDelayedDrag),Nt(e,"mousemove",this._delayedDragTouchMoveHandler),Nt(e,"touchmove",this._delayedDragTouchMoveHandler),Nt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Yt(document,"pointermove",this._onTouchMove):i?Yt(document,"touchmove",this._onTouchMove):Yt(document,"mousemove",this._onTouchMove):(Yt(Oe,"dragend",this),Yt(Si,"dragstart",this._onDragStart));try{document.selection?wb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Lp=!1,Si&&Oe){ks("dragStarted",this,{evt:i}),this.nativeDraggable&&Yt(document,"dragover",jde);var r=this.options;!e&&Ks(Oe,r.dragClass,!1),Ks(Oe,r.ghostClass,!0),at.active=this,e&&this._appendGhost(),ys({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(yo){this._lastX=yo.clientX,this._lastY=yo.clientY,Cz();for(var e=document.elementFromPoint(yo.clientX,yo.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(yo.clientX,yo.clientY),e!==i);)i=e;if(Oe.parentNode[hn]._isOutsideThisEl(e),i)do{if(i[hn]){var r=void 0;if(r=i[hn]._onDragOver({clientX:yo.clientX,clientY:yo.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);Oz()}},_onTouchMove:function(e){if(rc){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,l=e.touches?e.touches[0]:e,d=ft&&S0(ft,!0),y=ft&&d&&d.a,v=ft&&d&&d.d,x=tv&&qr&&tA(qr),$=(l.clientX-rc.clientX+n.x)/(y||1)+(x?x[0]-v5[0]:0)/(y||1),E=(l.clientY-rc.clientY+n.y)/(v||1)+(x?x[1]-v5[1]:0)/(v||1);if(!at.active&&!Lp){if(r&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ft){d?(d.e+=$-(m5||0),d.f+=E-(g5||0)):d={a:1,b:0,c:0,d:1,e:$,f:E};var k="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");ot(ft,"webkitTransform",k),ot(ft,"mozTransform",k),ot(ft,"msTransform",k),ot(ft,"transform",k),m5=$,g5=E,yo=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ft){var e=this.options.fallbackOnBody?document.body:Si,i=gr(Oe,!0,tv,!0,e),r=this.options;if(tv){for(qr=e;ot(qr,"position")==="static"&&ot(qr,"transform")==="none"&&qr!==document;)qr=qr.parentNode;qr!==document.body&&qr!==document.documentElement?(qr===document&&(qr=ja()),i.top+=qr.scrollTop,i.left+=qr.scrollLeft):qr=ja(),v5=tA(qr)}ft=Oe.cloneNode(!0),Ks(ft,r.ghostClass,!1),Ks(ft,r.fallbackClass,!0),Ks(ft,r.dragClass,!0),ot(ft,"transition",""),ot(ft,"transform",""),ot(ft,"box-sizing","border-box"),ot(ft,"margin",0),ot(ft,"top",i.top),ot(ft,"left",i.left),ot(ft,"width",i.width),ot(ft,"height",i.height),ot(ft,"opacity","0.8"),ot(ft,"position",tv?"absolute":"fixed"),ot(ft,"zIndex","100000"),ot(ft,"pointerEvents","none"),at.ghost=ft,e.appendChild(ft),ot(ft,"transform-origin",iA/parseInt(ft.style.width)*100+"% "+rA/parseInt(ft.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,l=r.options;if(ks("dragStart",this,{evt:e}),at.eventCanceled){this._onDrop();return}ks("setupClone",this),at.eventCanceled||(Li=Ez(Oe),Li.removeAttribute("id"),Li.draggable=!1,Li.style["will-change"]="",this._hideClone(),Ks(Li,this.options.chosenClass,!1),at.clone=Li),r.cloneId=wb(function(){ks("clone",r),!at.eventCanceled&&(r.options.removeCloneOnHide||Si.insertBefore(Li,Oe),r._hideClone(),ys({sortable:r,name:"clone"}))}),!i&&Ks(Oe,l.dragClass,!0),i?(f2=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Nt(document,"mouseup",r._onDrop),Nt(document,"touchend",r._onDrop),Nt(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(r,n,Oe)),Yt(document,"drop",r),ot(Oe,"transform","translateZ(0)")),Lp=!0,r._dragStartId=wb(r._dragStarted.bind(r,i,e)),Yt(document,"selectstart",r),Fy=!0,$1&&ot(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,l,d,y=this.options,v=y.group,x=at.active,$=Qg===v,E=y.sort,k=zr||x,P,D=this,L=!1;if(yS)return;function N(Xe,oi){ks(Xe,D,qa({evt:e,isOwner:$,axis:P?"vertical":"horizontal",revert:d,dragRect:n,targetRect:l,canSort:E,fromSortable:k,target:r,completed:W,onMove:function(io,Es){return iv(Si,i,Oe,n,io,gr(io),e,Es)},changed:q},oi))}function B(){N("dragOverAnimationCapture"),D.captureAnimationState(),D!==k&&k.captureAnimationState()}function W(Xe){return N("dragOverCompleted",{insertion:Xe}),Xe&&($?x._hideClone():x._showClone(D),D!==k&&(Ks(Oe,zr?zr.options.ghostClass:x.options.ghostClass,!1),Ks(Oe,y.ghostClass,!0)),zr!==D&&D!==at.active?zr=D:D===at.active&&zr&&(zr=null),k===D&&(D._ignoreWhileAnimating=r),D.animateAll(function(){N("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==k&&(k.animateAll(),k._ignoreWhileAnimating=null)),(r===Oe&&!Oe.animated||r===i&&!r.animated)&&(up=null),!y.dragoverBubble&&!e.rootEl&&r!==document&&(Oe.parentNode[hn]._isOutsideThisEl(e.target),!Xe&&sc(e)),!y.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),L=!0}function q(){rn=jn(Oe),Xu=jn(Oe,y.draggable),ys({sortable:D,name:"change",toEl:i,newIndex:rn,newDraggableIndex:Xu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Ca(r,y.draggable,i,!0),N("dragOver"),at.eventCanceled)return L;if(Oe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||D._ignoreWhileAnimating===r)return W(!1);if(f2=!1,x&&!y.disabled&&($?E||(d=Ni!==Si):zr===this||(this.lastPutMode=Qg.checkPull(this,x,Oe,e))&&v.checkPut(this,x,Oe,e))){if(P=this._getDirection(e,r)==="vertical",n=gr(Oe),N("dragOverValid"),at.eventCanceled)return L;if(d)return Ni=Si,B(),this._hideClone(),N("revert"),at.eventCanceled||(Oc?Si.insertBefore(Oe,Oc):Si.appendChild(Oe)),W(!0);var Y=v$(i,y.draggable);if(!Y||Vde(e,P,this)&&!Y.animated){if(Y===Oe)return W(!1);if(Y&&i===e.target&&(r=Y),r&&(l=gr(r)),iv(Si,i,Oe,n,r,l,e,!!r)!==!1)return B(),Y&&Y.nextSibling?i.insertBefore(Oe,Y.nextSibling):i.appendChild(Oe),Ni=i,q(),W(!0)}else if(Y&&zde(e,P,this)){var ie=Y0(i,0,y,!0);if(ie===Oe)return W(!1);if(r=ie,l=gr(r),iv(Si,i,Oe,n,r,l,e,!1)!==!1)return B(),i.insertBefore(Oe,ie),Ni=i,q(),W(!0)}else if(r.parentNode===i){l=gr(r);var se=0,ue,de=Oe.parentNode!==i,be=!Dde(Oe.animated&&Oe.toRect||n,r.animated&&r.toRect||l,P),we=P?"top":"left",$e=eA(r,"top","top")||eA(Oe,"top","top"),ke=$e?$e.scrollTop:void 0;up!==r&&(ue=l[we],A1=!1,ev=!be&&y.invertSwap||de),se=Bde(e,r,l,P,be?1:y.swapThreshold,y.invertedSwapThreshold==null?y.swapThreshold:y.invertedSwapThreshold,ev,up===r);var Ge;if(se!==0){var Fe=jn(Oe);do Fe-=se,Ge=Ni.children[Fe];while(Ge&&(ot(Ge,"display")==="none"||Ge===ft))}if(se===0||Ge===r)return W(!1);up=r,E1=se;var ht=r.nextElementSibling,ni=!1;ni=se===1;var Ze=iv(Si,i,Oe,n,r,l,e,ni);if(Ze!==!1)return(Ze===1||Ze===-1)&&(ni=Ze===1),yS=!0,setTimeout(Nde,30),B(),ni&&!ht?i.appendChild(Oe):r.parentNode.insertBefore(Oe,ni?ht:r),$e&&Iz($e,0,ke-$e.scrollTop),Ni=Oe.parentNode,ue!==void 0&&!ev&&(bb=Math.abs(ue-gr(r)[we])),q(),W(!0)}if(i.contains(Oe))return W(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Nt(document,"mousemove",this._onTouchMove),Nt(document,"touchmove",this._onTouchMove),Nt(document,"pointermove",this._onTouchMove),Nt(document,"dragover",sc),Nt(document,"mousemove",sc),Nt(document,"touchmove",sc)},_offUpEvents:function(){var e=this.el.ownerDocument;Nt(e,"mouseup",this._onDrop),Nt(e,"touchend",this._onDrop),Nt(e,"pointerup",this._onDrop),Nt(e,"touchcancel",this._onDrop),Nt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(rn=jn(Oe),Xu=jn(Oe,r.draggable),ks("drop",this,{evt:e}),Ni=Oe&&Oe.parentNode,rn=jn(Oe),Xu=jn(Oe,r.draggable),at.eventCanceled){this._nulling();return}Lp=!1,ev=!1,A1=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),mS(this.cloneId),mS(this._dragStartId),this.nativeDraggable&&(Nt(document,"drop",this),Nt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$1&&ot(document.body,"user-select",""),ot(Oe,"transform",""),e&&(Fy&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ft&&ft.parentNode&&ft.parentNode.removeChild(ft),(Si===Ni||zr&&zr.lastPutMode!=="clone")&&Li&&Li.parentNode&&Li.parentNode.removeChild(Li),Oe&&(this.nativeDraggable&&Nt(Oe,"dragend",this),b5(Oe),Oe.style["will-change"]="",Fy&&!Lp&&Ks(Oe,zr?zr.options.ghostClass:this.options.ghostClass,!1),Ks(Oe,this.options.chosenClass,!1),ys({sortable:this,name:"unchoose",toEl:Ni,newIndex:null,newDraggableIndex:null,originalEvent:e}),Si!==Ni?(rn>=0&&(ys({rootEl:Ni,name:"add",toEl:Ni,fromEl:Si,originalEvent:e}),ys({sortable:this,name:"remove",toEl:Ni,originalEvent:e}),ys({rootEl:Ni,name:"sort",toEl:Ni,fromEl:Si,originalEvent:e}),ys({sortable:this,name:"sort",toEl:Ni,originalEvent:e})),zr&&zr.save()):rn!==l0&&rn>=0&&(ys({sortable:this,name:"update",toEl:Ni,originalEvent:e}),ys({sortable:this,name:"sort",toEl:Ni,originalEvent:e})),at.active&&((rn==null||rn===-1)&&(rn=l0,Xu=I1),ys({sortable:this,name:"end",toEl:Ni,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ks("nulling",this),Si=Oe=Ni=ft=Oc=Li=vb=oh=rc=yo=Fy=rn=Xu=l0=I1=up=E1=zr=Qg=at.dragged=at.ghost=at.clone=at.active=null,m2.forEach(function(e){e.checked=!0}),m2.length=m5=g5=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Oe&&(this._onDragOver(e),Fde(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,l=r.length,d=this.options;n<l;n++)i=r[n],Ca(i,d.draggable,this.el,!1)&&e.push(i.getAttribute(d.dataIdAttr)||Ude(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(l,d){var y=n.children[d];Ca(y,this.options.draggable,n,!1)&&(r[l]=y)},this),i&&this.captureAnimationState(),e.forEach(function(l){r[l]&&(n.removeChild(r[l]),n.appendChild(r[l]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Ca(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=Zm.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&Pz(r)},destroy:function(){ks("destroy",this);var e=this.el;e[hn]=null,Nt(e,"mousedown",this._onTapStart),Nt(e,"touchstart",this._onTapStart),Nt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Nt(e,"dragover",this),Nt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),y2.splice(y2.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!oh){if(ks("hideClone",this),at.eventCanceled)return;ot(Li,"display","none"),this.options.removeCloneOnHide&&Li.parentNode&&Li.parentNode.removeChild(Li),oh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(oh){if(ks("showClone",this),at.eventCanceled)return;Oe.parentNode==Si&&!this.options.group.revertClone?Si.insertBefore(Li,Oe):Oc?Si.insertBefore(Li,Oc):Si.appendChild(Li),this.options.group.revertClone&&this.animate(Oe,Li),ot(Li,"display",""),oh=!1}}};function Fde(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function iv(t,e,i,r,n,l,d,y){var v,x=t[hn],$=x.options.onMove,E;return window.CustomEvent&&!Ql&&!Km?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=e,v.from=t,v.dragged=i,v.draggedRect=r,v.related=n||e,v.relatedRect=l||gr(e),v.willInsertAfter=y,v.originalEvent=d,t.dispatchEvent(v),$&&(E=$.call(x,v,d)),E}function b5(t){t.draggable=!1}function Nde(){yS=!1}function zde(t,e,i){var r=gr(Y0(i.el,0,i.options,!0)),n=10;return e?t.clientX<r.left-n||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-n||t.clientY<r.bottom&&t.clientX<r.left}function Vde(t,e,i){var r=gr(v$(i.el,i.options.draggable)),n=10;return e?t.clientX>r.right+n||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+n}function Bde(t,e,i,r,n,l,d,y){var v=r?t.clientY:t.clientX,x=r?i.height:i.width,$=r?i.top:i.left,E=r?i.bottom:i.right,k=!1;if(!d){if(y&&bb<x*n){if(!A1&&(E1===1?v>$+x*l/2:v<E-x*l/2)&&(A1=!0),A1)k=!0;else if(E1===1?v<$+bb:v>E-bb)return-E1}else if(v>$+x*(1-n)/2&&v<E-x*(1-n)/2)return Gde(e)}return k=k||d,k&&(v<$+x*l/2||v>E-x*l/2)?v>$+x/2?1:-1:0}function Gde(t){return jn(Oe)<jn(t)?1:-1}function Ude(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function qde(t){m2.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&m2.push(r)}}function wb(t){return setTimeout(t,0)}function mS(t){return clearTimeout(t)}C_&&Yt(document,"touchmove",function(t){(at.active||Lp)&&t.cancelable&&t.preventDefault()});at.utils={on:Yt,off:Nt,css:ot,find:$z,is:function(e,i){return!!Ca(e,i,e,!1)},extend:Ide,throttle:Tz,closest:Ca,toggleClass:Ks,clone:Ez,index:jn,nextTick:wb,cancelNextTick:mS,detectDirection:kz,getChild:Y0};at.get=function(t){return t[hn]};at.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(at.utils=qa(qa({},at.utils),r.utils)),Zm.mount(r)})};at.create=function(t,e){return new at(t,e)};at.version=Mde;var rr=[],Ny,gS,vS=!1,w5,_5,g2,zy;function Hde(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?Yt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Yt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Yt(document,"touchmove",this._handleFallbackAutoScroll):Yt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Nt(document,"dragover",this._handleAutoScroll):(Nt(document,"pointermove",this._handleFallbackAutoScroll),Nt(document,"touchmove",this._handleFallbackAutoScroll),Nt(document,"mousemove",this._handleFallbackAutoScroll)),nA(),_b(),Ede()},nulling:function(){g2=gS=Ny=vS=zy=w5=_5=null,rr.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,l=(i.touches?i.touches[0]:i).clientX,d=(i.touches?i.touches[0]:i).clientY,y=document.elementFromPoint(l,d);if(g2=i,r||this.options.forceAutoScrollFallback||Km||Ql||$1){x5(i,this.options,y,r);var v=bh(y,!0);vS&&(!zy||l!==w5||d!==_5)&&(zy&&nA(),zy=setInterval(function(){var x=bh(document.elementFromPoint(l,d),!0);x!==v&&(v=x,_b()),x5(i,n.options,x,r)},10),w5=l,_5=d)}else{if(!this.options.bubbleScroll||bh(y,!0)===ja()){_b();return}x5(i,this.options,bh(y,!1),!1)}}},Yl(t,{pluginName:"scroll",initializeByDefault:!0})}function _b(){rr.forEach(function(t){clearInterval(t.pid)}),rr=[]}function nA(){clearInterval(zy)}var x5=Tz(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,d=e.scrollSensitivity,y=e.scrollSpeed,v=ja(),x=!1,$;gS!==i&&(gS=i,_b(),Ny=e.scroll,$=e.scrollFn,Ny===!0&&(Ny=bh(i,!0)));var E=0,k=Ny;do{var P=k,D=gr(P),L=D.top,N=D.bottom,B=D.left,W=D.right,q=D.width,Y=D.height,ie=void 0,se=void 0,ue=P.scrollWidth,de=P.scrollHeight,be=ot(P),we=P.scrollLeft,$e=P.scrollTop;P===v?(ie=q<ue&&(be.overflowX==="auto"||be.overflowX==="scroll"||be.overflowX==="visible"),se=Y<de&&(be.overflowY==="auto"||be.overflowY==="scroll"||be.overflowY==="visible")):(ie=q<ue&&(be.overflowX==="auto"||be.overflowX==="scroll"),se=Y<de&&(be.overflowY==="auto"||be.overflowY==="scroll"));var ke=ie&&(Math.abs(W-n)<=d&&we+q<ue)-(Math.abs(B-n)<=d&&!!we),Ge=se&&(Math.abs(N-l)<=d&&$e+Y<de)-(Math.abs(L-l)<=d&&!!$e);if(!rr[E])for(var Fe=0;Fe<=E;Fe++)rr[Fe]||(rr[Fe]={});(rr[E].vx!=ke||rr[E].vy!=Ge||rr[E].el!==P)&&(rr[E].el=P,rr[E].vx=ke,rr[E].vy=Ge,clearInterval(rr[E].pid),(ke!=0||Ge!=0)&&(x=!0,rr[E].pid=setInterval(function(){r&&this.layer===0&&at.active._onTouchMove(g2);var ht=rr[this.layer].vy?rr[this.layer].vy*y:0,ni=rr[this.layer].vx?rr[this.layer].vx*y:0;typeof $=="function"&&$.call(at.dragged.parentNode[hn],ni,ht,t,g2,rr[this.layer].el)!=="continue"||Iz(rr[this.layer].el,ni,ht)}.bind({layer:E}),24))),E++}while(e.bubbleScroll&&k!==v&&(k=bh(k,!1)));vS=x}},30),Lz=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,l=e.activeSortable,d=e.dispatchSortableEvent,y=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(i){var x=r||l;y();var $=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,E=document.elementFromPoint($.clientX,$.clientY);v(),x&&!x.el.contains(E)&&(d("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function b$(){}b$.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=Y0(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:Lz};Yl(b$,{pluginName:"revertOnSpill"});function w$(){}w$.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:Lz};Yl(w$,{pluginName:"removeOnSpill"});at.mount(new Hde);at.mount(w$,b$);function oA(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const Wde="esri-layerlist-new-ui",Jde=ze.ofType(g$),aA="data-sort-filter",lA="data-layer-uid",Yde="layerUid",zi="esri-layer-list",_i=`${zi}__item`,je={base:`${zi} esri-widget esri-widget--panel`,newUI:`${zi}--new-ui`,noItems:`${zi}__no-items`,list:`${zi}__list`,listRoot:`${zi}__list--root`,listExclusive:`${zi}__list--exclusive`,listInherited:`${zi}__list--inherited`,listIndependent:`${zi}__list--independent`,item:_i,itemContent:`${_i}-content`,itemMessage:`${_i}--has-message`,itemInvisible:`${_i}--invisible`,itemInvisibleAtScale:`${_i}--invisible-at-scale`,itemChildren:`${_i}--has-children`,itemSelectable:`${_i}--selectable`,itemContainer:`${_i}-container`,actionsMenu:`${_i}-actions-menu`,actionsMenuItem:`${_i}-actions-menu-item`,actionsMenuItemActive:`${_i}-actions-menu-item--active`,actions:`${_i}-actions`,actionsList:`${_i}-actions-list`,action:`${_i}-action`,actionIcon:`${_i}-action-icon`,actionImage:`${_i}-action-image`,actionTitle:`${_i}-action-title`,actionToggle:`${zi}__action-toggle`,actionToggleOn:`${zi}__action-toggle--on`,label:`${_i}-label`,message:`${_i}-message`,title:`${_i}-title`,statusIndicator:`${zi}__status-indicator`,publishing:`${zi}__publishing`,updating:`${zi}__updating`,connectionStatus:`${zi}__connection-status`,connectionStatusConnected:`${zi}__connection-status--connected`,toggleVisible:`${_i}-toggle`,toggleVisibleIcon:`${_i}-toggle-icon`,toggleIcon:`${_i}-toggle-icon`,radioIcon:`${_i}-radio-icon`,childToggle:`${zi}__child-toggle`,childToggleOpen:`${zi}__child-toggle--open`,childOpened:`${zi}__child-toggle-icon--opened`,childClosed:`${zi}__child-toggle-icon--closed`,childClosed_RTL:`${zi}__child-toggle-icon--closed-rtl`,sortableChosen:`${zi}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},mu={actions:"actions",actionSection:"action-section",items:"items"},Jf={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function Dz(t){const{actionsOpen:e,children:i}=t;e&&(t.actionsOpen=!1),i.forEach(r=>Dz(r))}const S5="root",uA={statusIndicators:!0,errors:!1};let di=class extends Dr{constructor(e,i){super(e,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=ce(Wde),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=je.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new Jde,this.viewModel=new _z,this.visibleElements={...uA},this._onSortableSort=({to:r,from:n,item:l,newIndex:d})=>{n&&r&&(n===r?this._sortLayers(this._sortableMap.get(n.dataset.group)):this._moveLayerFromChildList({to:r,from:n,item:l,newIndex:d}))},this._sortableCanSort=(r,n)=>!(!r.el.dataset.group||!n.el.dataset.group),this._sortableCanPull=(r,n,l)=>{const{listItemCanGiveFunction:d}=this,y={selected:Tr(l),from:Tr(n.el),to:Tr(r.el)};return!this._sortableCanSort(r,n)||typeof d!="function"||d.call(null,y)},this._sortableCanPut=(r,n,l)=>{const{listItemCanReceiveFunction:d}=this,y={selected:Tr(l),from:Tr(n.el),to:Tr(r.el)};return!this._sortableCanSort(r,n)||typeof d!="function"||d.call(null,y)},this._onSortableEnd=({oldIndex:r,from:n,to:l,item:d})=>{n!==l&&n.insertBefore(d,n.children[r])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([Vs(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),me(()=>this.visibleElements,()=>this._itemsChanged(e)),me(()=>this.selectionEnabled,()=>this._toggleAllSorting(),st)])}loadDependencies(){return vf({icon:()=>le(()=>import("./calcite-icon-899b792c.js"),["assets/calcite-icon-899b792c.js","assets/icon-2aec3643.js","assets/observers-279029a9.js"]),tooltip:()=>le(()=>import("./calcite-tooltip-6839b27e.js"),["assets/calcite-tooltip-6839b27e.js","assets/FloatingArrow-a90ff1a9.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-29d09d20.js"])})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...uA,...e}}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var y;const{visibleItems:e,_newUI:i}=this,r=(y=this.viewModel)==null?void 0:y.state,n={[je.newUI]:i,[je.hidden]:r==="loading",[je.disabled]:r==="disabled"},l=this.renderItemTooltips(),d=this.renderItems();return X("div",{class:this.classes(je.base,n)},e.length?[l,d]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:r}=this;return e?X("calcite-tooltip",{label:r.layerIncompatible,referenceElement:i.get(e.uid)},r.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:i,children:r}=e;return[i?this.renderItemTooltip(e):null,...!i&&r?r.toArray().map(n=>this.renderItemTooltipNodes(n)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))??[]}renderNoItems(){return X("div",{class:je.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:i,messages:r}=this;return X("ul",{"aria-label":r.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":S5,bind:this,class:this.classes(je.list,je.listRoot,je.listIndependent)},e.map(n=>this.renderItem(n,null)).toArray())}renderActionsMenuIcon(e,i){const{messagesCommon:r}=this,n={[je.actionsMenuItemActive]:e.actionsOpen};return X("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(je.actionsMenuItem,n),tabindex:"0",role:"button","aria-controls":i,"aria-label":r.options,title:r.options},X("span",{"aria-hidden":"true",class:je.iconEllipses}))}renderActionsMenu(e,i,r,n){const{panel:l}=e,d=l&&l.visible?this.renderPanelButton(l):null,y=r===1&&this._getSingleActionButton(i),v=y?this.renderAction({item:e,action:y,singleAction:!0}):null,x=!y&&r?this.renderActionsMenuIcon(e,n):null;return x||d||y?X("div",{key:"actions-menu",class:je.actionsMenu},d,v,x):null}renderChildList(e,i){var E;const{selectionEnabled:r}=this,{visibilityMode:n,children:l}=e,d=this._hasChildren(e),y=!d&&r&&((E=e.layer)==null?void 0:E.type)==="group",{exclusive:v,inherited:x}=Jf,$={[je.listExclusive]:n===v,[je.listInherited]:n===x,[je.listIndependent]:n!==x&&n!==v};return d||y?X("ul",{bind:this,key:"list-items",id:i,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(je.list,$),"aria-expanded":e.open?"true":"false",role:r?"listbox":n===v?"radiogroup":"group",hidden:!e.open&&!y||null},l==null?void 0:l.map(k=>this.renderItem(k,e)).toArray()):null}renderChildrenToggle(e,i){const{messagesCommon:r}=this,n=this._hasChildren(e),l={[je.childToggleOpen]:e.open},d=e.open?r.collapse:r.expand;return n?X("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(je.childToggle,l),tabindex:"0",role:"button","aria-controls":i,"aria-label":d,title:d},X("span",{"aria-hidden":"true",class:this.classes(je.childClosed,je.iconRightArrow)}),X("span",{"aria-hidden":"true",class:this.classes(je.childOpened,je.iconDownArrow)}),X("span",{"aria-hidden":"true",class:this.classes(je.childClosed_RTL,je.iconLeftArrow)})):null}renderItemMessage(e){return e.error?X("div",{key:"esri-layer-list__error",class:je.message,role:"alert"},X("span",{"aria-hidden":"true",class:je.iconNoticeTriangle}),this.messages.layerError):e.incompatible?X("div",{key:"esri-layer-list__incompatible",class:je.message,role:"alert"},X("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:je.iconNoticeTriangle,afterCreate:i=>this._setTooltipReference(i,e)}),this.messages.layerIncompatible):null}renderItemContent(e,i,r){const{id:n}=this,l=`${n}_${e.uid}`,d=`${l}_actions`,y=`${l}__list`,{panel:v}=e,x=this._filterActions(e.actionsSections),$=this._countActions(x);return[X("div",{key:"list-item-container",class:je.itemContainer},this.renderChildrenToggle(e,y),this.renderLabel(e,i,r),this.renderActionsMenu(e,x,$,d)),this.renderItemMessage(e),$?this.renderActionsSections(e,x,d):null,v&&v.open&&!v.disabled?v.render():null,this.renderChildList(e,y)]}renderItem(e,i){var E;const{_newUI:r,id:n,selectionEnabled:l,selectedItems:d}=this,y=`${`${n}_${e.uid}`}__title`,v=this._hasMessage(e),x=this._hasChildren(e),$={[je.itemChildren]:x,[je.itemMessage]:!!v,[je.itemInvisible]:r&&!e.visible,[je.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[je.itemSelectable]:l};if(l){const k={[lA]:(E=e.layer)==null?void 0:E.uid,[aA]:(!e.sortable).toString()};return X("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(je.item,$),"aria-labelledby":y,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":i?i.uid:S5,tabIndex:0,"aria-selected":d5(e,d)?"true":"false",role:"option",...k},this.renderItemContent(e,i,y))}return X("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(je.item,$),"aria-labelledby":y},this.renderItemContent(e,i,y))}renderConnectionIcon(e){const{connectionStatus:i}=e;return i!=null?X("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(e,i){const{visibleElements:r}=this;if(!r.statusIndicators)return null;const{connectionStatus:n,publishing:l,updating:d}=e,y=d&&!i,v=!!n;return X("span",{class:this.classes({[je.statusIndicator]:!0,[je.publishing]:l,[je.updating]:y,[je.connectionStatus]:v,[je.connectionStatusConnected]:v&&n==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,i){const{messages:r}=this;if(!e)return null;const n=e.title||r.untitledLayer,l=e.visibleAtCurrentScale?n:`${n} (${r.layerInvisibleAtScale})`;return X("span",{key:"layer-title-container",id:i,title:l,"aria-label":l,class:je.title},n)}renderItemToggleIcon(e,i){const{_newUI:r}=this,{exclusive:n}=Jf,l=i==null?void 0:i.visibilityMode,d={[je.toggleVisibleIcon]:r,[je.toggleIcon]:r&&l!==n,[je.radioIcon]:r&&l===n,[je.iconRadioSelected]:l===n&&e.visible,[je.iconRadioUnselected]:l===n&&!e.visible,[je.iconVisible]:l!==n&&e.visible,[je.iconInvisible]:l!==n&&!e.visible};return X("span",{key:"item-toggle-icon",class:this.classes(d),"aria-hidden":"true"})}renderItemToggle(e,i,r){const{selectionEnabled:n,messages:l}=this,{exclusive:d}=Jf,y=i==null?void 0:i.visibilityMode,v=y===d?"radio":"switch";return X("span",n?{key:"item-toggle-selection-enabled",class:je.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":y,tabIndex:0,title:l.layerVisibility,"aria-checked":e.visible?"true":"false",role:v,"aria-labelledby":r}:{key:"item-toggle",class:je.toggleVisible},this.renderItemToggleIcon(e,i))}renderLabel(e,i,r){const{selectionEnabled:n,_newUI:l,messages:d}=this,{inherited:y,exclusive:v}=Jf,x=i==null?void 0:i.visibilityMode,$=x===v?"radio":"switch",E=l?[this.renderItemTitle(e,r),this.renderItemStatus(e,i),this.renderItemToggle(e,i,r)]:[this.renderItemToggle(e,i,r),this.renderItemTitle(e,r),this.renderItemStatus(e,i)],k=X("div",n?{key:`item-label-no-selection-${e.uid}`,class:je.label}:{key:`item-label-with-selection-${e.uid}`,class:je.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":x,tabIndex:0,"aria-checked":e.visible?"true":"false",title:d.layerVisibility,role:$,"aria-labelledby":r},E);return x===y||e.error?X("div",{key:`item-label-container-${e.uid}`,class:je.label},this.renderItemTitle(e,r),this.renderItemStatus(e,i)):k}renderPanelButton(e){const{className:i,open:r,title:n,image:l,disabled:d}=e,y=l||i?i:je.iconDefaultAction,v=this._getIconImageStyles(e),x={[je.actionsMenuItemActive]:r&&!d},$={[je.actionImage]:!!v["background-image"],[je.disabledElement]:e.disabled};return y&&($[y]=!!y),X("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(je.actionsMenuItem,x),role:"button",tabindex:e.disabled?null:0,title:n,"aria-label":n},X("span",{class:this.classes($),styles:v}))}renderActionsSections(e,i,r){const n=i.toArray().map((l,d)=>X("ul",{key:`${e}-action-section-${d}`,class:je.actionsList},this.renderActionSection(e,l)));return X("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:r,class:je.actions,hidden:!e.actionsOpen||null},n)}renderActionSection(e,i){return(i&&i.toArray()).map(r=>this.renderAction({item:e,action:r}))}renderActionIcon(e){const{active:i,className:r}=e,n=this._getIconImageStyles(e),l=e.type!=="button"||e.image||r?r:je.iconDefaultAction,d={[je.actionImage]:!i&&!!n["background-image"],[je.iconLoading]:i,[je.rotating]:i};return l&&!i&&(d[l]=!0),X("span",{key:"action-icon","aria-hidden":"true",class:this.classes(je.actionIcon,d),styles:n})}renderActionTitle(e,i){return i?null:X("span",{key:"action-title",class:je.actionTitle},e)}renderAction(e){const{item:i,action:r,singleAction:n}=e,{active:l,disabled:d,title:y}=r,v={[je.actionsMenuItem]:n&&r.type==="button",[je.action]:l||!n&&r.type!=="toggle",[je.actionToggle]:!l&&r.type==="toggle",[je.actionToggleOn]:!l&&r.type==="toggle"&&r.value,[je.disabledElement]:d},x=[this.renderActionIcon(r),this.renderActionTitle(y,n)];return n?X("div",{bind:this,"data-item":i,"data-action":r,role:"button",key:`single-action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:v,tabindex:"0",title:y??void 0,"aria-label":y??void 0},x):X("li",{bind:this,"data-item":i,"data-action":r,key:`action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:v,tabindex:"0",role:"button",title:y??void 0,"aria-label":y??void 0},x)}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:i}=this,r=e.dataset.group,n=i.get(r);n&&n.destroy(),i.delete(r)}_destroySortables(){const{_sortableMap:e,_sortableNodes:i}=this;e.forEach(r=>r&&r.destroy()),e.clear(),i.clear()}_moveLayerFromChildList({to:e,from:i,item:r,newIndex:n}){const l=Tr(r),d=Tr(e),y=Tr(i);this.viewModel.moveListItem(l,y,d,n)}_sortLayers(e){var n,l;if(!e)return;const i=Tr(e.el),r=e.toArray();i?cde(i,r):yz((l=(n=this.view)==null?void 0:n.map)==null?void 0:l.layers,r)}_toggleSorting(e,i){const{_sortableMap:r,selectionEnabled:n}=this,l=r.get(i),d=Tr(e),y=(i===S5||(d==null?void 0:d.childrenSortable)&&lde(d))&&n;if(l)l.option("disabled",!y);else if(y){const v=at.create(e,{dataIdAttr:lA,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${aA}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!y,chosenClass:je.sortableChosen});r.set(i,v)}}_toggleAllSorting(){this._sortableNodes.forEach((e,i)=>this._toggleSorting(e,i))}_sortNodeCreated(e){const i=e.dataset.group;i&&(this._sortableNodes.set(i,e),this._toggleSorting(e,i))}_setVisibleItems(e){this.visibleItems=e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(e){return e.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(e){var n;const{_focusSortUid:i}=this;if(!e||!i)return;const r=Tr(e);((n=r==null?void 0:r.layer)==null?void 0:n.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e){this.addHandles(e.on("change",this.scheduleRender.bind(this)),mu.actionSection),e.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(e){e.type!=="toggle"?e.type!=="slider"?this.addHandles(me(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),st),mu.actions):this.addHandles(me(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),st),mu.actions):this.addHandles(me(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),st),mu.actions)}_renderOnItemChanges(e){this.addHandles([me(()=>{var i,r,n;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(i=e==null?void 0:e.panel)==null?void 0:i.title,(r=e==null?void 0:e.panel)==null?void 0:r.content,(n=e==null?void 0:e.panel)==null?void 0:n.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),Tl),me(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],mu.items),e.children.forEach(i=>this._renderOnItemChanges(i)),e.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(e){this.removeHandles(mu.items),this.removeHandles(mu.actions),this.removeHandles(mu.actionSection),e.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(i=>i.filter(r=>r.visible))}_countActions(e){return e.reduce((i,r)=>i+r.length,0)}_getIconImageStyles(e){const i=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(e){var D,L,N,B;const i=["ArrowDown","ArrowUp"],r=rh(e);if(!i.includes(r))return void this._toggleSelection(e);e.stopPropagation();const n=e.currentTarget,l=Tr(n),{_sortableMap:d,selectedItems:y}=this,v=n.dataset.group,x=d.get(v);if(!x||!l)return;const $=d5(l,y),E=x.toArray(),k=e.target,P=E.indexOf(k.dataset[Yde]);if(P!==-1){if(r==="ArrowDown"){const W=P+1;if(W>=E.length)return;$?(oA(E,P,W),x.sort(E),this._sortLayers(x),this._focusSortUid=(D=l.layer)==null?void 0:D.uid):(this._focusSortUid=(L=l.layer)==null?void 0:L.uid,this.scheduleRender())}if(r==="ArrowUp"){const W=P-1;if(W<=-1)return;$?(oA(E,P,W),x.sort(E),this._sortLayers(x),this._focusSortUid=(N=l.layer)==null?void 0:N.uid):(this._focusSortUid=(B=l.layer)==null?void 0:B.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const i=Tr(e.currentTarget);if(!i)return;const{actionsOpen:r}=i,n=!r;n&&this.operationalItems.forEach(l=>Dz(l)),i.actionsOpen=n,e.stopPropagation()}_triggerPanel(e){const i=Kde(e.currentTarget);e.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(e){const i=e.currentTarget,r=Zde(i),n=Tr(i);r&&n&&(r.type==="toggle"&&(r.value=!r.value),this.triggerAction(r,n),e.stopPropagation())}_toggleVisibility(e){const i=e.currentTarget,r=i.getAttribute("data-parent-visibility"),n=Tr(i);n&&(r===Jf.exclusive&&n.visible||(n.visible=!n.visible),e.stopPropagation())}_toggleChildrenClick(e){const i=Tr(e.currentTarget);i&&(i.open=!i.open,e.stopPropagation())}_toggleSelection(e){var y,v;e.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:r}=this,n=Tr(e.currentTarget);if(!n)return;const l=d5(n,r),{length:d}=r;if(!i)return d&&!(l&&d===1)?(r.removeAll(),void r.add(n)):void(l?(y=r.remove)==null?void 0:y.call(r,l):r.add(n));l?(v=r.remove)==null||v.call(r,l):r.add(n)}get test(){return{visibleItems:this.visibleItems}}};function Tr(t){return t==null?void 0:t["data-item"]}function Kde(t){return t==null?void 0:t["data-panel"]}function Zde(t){return t==null?void 0:t["data-action"]}g([S()],di.prototype,"visibleItems",void 0),g([S()],di.prototype,"iconClass",void 0),g([S()],di.prototype,"icon",void 0),g([S()],di.prototype,"label",null),g([S()],di.prototype,"listItemCanGiveFunction",void 0),g([S()],di.prototype,"listItemCanReceiveFunction",void 0),g([S()],di.prototype,"listItemCreatedFunction",null),g([S(),Or("esri/widgets/LayerList/t9n/LayerList")],di.prototype,"messages",void 0),g([S(),Or("esri/t9n/common")],di.prototype,"messagesCommon",void 0),g([S()],di.prototype,"multipleSelectionEnabled",void 0),g([S()],di.prototype,"operationalItems",null),g([S()],di.prototype,"selectionEnabled",void 0),g([S()],di.prototype,"selectedItems",void 0),g([S()],di.prototype,"view",null),g([mz("trigger-action"),S({type:_z})],di.prototype,"viewModel",void 0),g([S()],di.prototype,"visibleElements",void 0),g([St("visibleElements")],di.prototype,"castVisibleElements",null),g([kr()],di.prototype,"_toggleActionsOpen",null),g([kr()],di.prototype,"_triggerPanel",null),g([kr()],di.prototype,"_triggerAction",null),g([kr()],di.prototype,"_toggleVisibility",null),g([kr()],di.prototype,"_toggleChildrenClick",null),g([kr()],di.prototype,"_toggleSelection",null),di=g([J("esri.widgets.LayerList")],di);const Xde=di;function _$(t,e,i,r){let n=null,l=1e3;typeof e=="number"?(l=e,r=i):(n=e??null,l=i);let d,y=0;const v=()=>{y=0,t.apply(r,d)},x=(...$)=>{n&&n.apply(r,$),d=$,l?y||(y=setTimeout(v,l)):v()};return x.remove=()=>{y&&(clearTimeout(y),y=0)},x.forceUpdate=()=>{y&&(clearTimeout(y),v())},x.hasPendingUpdates=()=>!!y,x}var v2;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(v2||(v2={}));const hA=["B","kB","MB","GB","TB"];function Qde(t,e){let i=e===0?0:Math.floor(Math.log(e)/Math.log(v2.KILOBYTES));i=zs(i,0,hA.length-1);const r=Eh(e/v2.KILOBYTES**i,{maximumFractionDigits:2});return Jn(t.units.bytes[hA[i]],{fileSize:r})}function epe(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const n=e.find(l=>l.name===i);return n?tpe({tagName:r,tags:n.tags}):null}function tpe(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find(n=>n.name===e);return r&&r.value||null}var bS;const ipe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Ls=bS=class extends ge{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=epe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return ipe[e]||null}clone(){return new bS({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};g([S({type:String})],Ls.prototype,"contentType",void 0),g([S()],Ls.prototype,"exifInfo",void 0),g([S({readOnly:!0})],Ls.prototype,"orientationInfo",null),g([S({type:Lt})],Ls.prototype,"id",void 0),g([S({type:String})],Ls.prototype,"globalId",void 0),g([S({type:String})],Ls.prototype,"keywords",void 0),g([S({type:String})],Ls.prototype,"name",void 0),g([S({json:{read:!1}})],Ls.prototype,"parentGlobalId",void 0),g([S({json:{read:!1}})],Ls.prototype,"parentObjectId",void 0),g([S({type:Lt})],Ls.prototype,"size",void 0),g([S({json:{read:!1}})],Ls.prototype,"url",void 0),Ls=bS=g([J("esri.layers.support.AttachmentInfo")],Ls);const rpe=Ls;var wS;let Ir=wS=class extends ge{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new wS(ae({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};g([S({type:[String],json:{write:!0}})],Ir.prototype,"attachmentTypes",void 0),g([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ir.prototype,"attachmentsWhere",void 0),g([S({type:Boolean,json:{write:!0}})],Ir.prototype,"cacheHint",void 0),g([S({type:[String],json:{write:!0}})],Ir.prototype,"keywords",void 0),g([S({type:[Number],json:{write:!0}})],Ir.prototype,"globalIds",void 0),g([S({json:{write:!0}})],Ir.prototype,"name",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ir.prototype,"num",void 0),g([S({type:[Number],json:{write:!0}})],Ir.prototype,"objectIds",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ir.prototype,"returnMetadata",void 0),g([S({type:[Number],json:{write:!0}})],Ir.prototype,"size",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],Ir.prototype,"start",void 0),g([Ae("start"),Ae("num")],Ir.prototype,"writeStart",null),g([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ir.prototype,"where",void 0),Ir=wS=g([J("esri.rest.support.AttachmentQuery")],Ir),Ir.from=Di(Ir);const b2=Ir,spe="esri.widgets.Feature.support.featureUtils",cA=ve.getLogger(spe),npe=/href=(""|'')/gi,ope=/(\{([^\{\r\n]+)\})/g,ape=/\'/g,Rz=/^\s*expression\//i,lpe=/(\n)/gi,upe=/[\u00A0-\u9999<>\&]/gim,hpe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,cpe=/^(?:mailto:|tel:)/,jz="relationships/",dA=i0("short-date-short-time");function Fz(t){if(t!=null)return t.get("sourceLayer")||t.get("layer")}async function w2(t,e){return typeof t=="function"?t(e):t}function Nz(t=""){if(t)return!cpe.test(t.trim().toLowerCase())}function x$(t){return!!t&&Rz.test(t)}function dpe(t,e){if(!x$(e)||!t)return null;const i=e.replace(Rz,"").toLowerCase();let r=null;return t.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function zz(t,e){const i=dpe(e,t==null?void 0:t.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function ppe(t,e){const i=e.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`}function fpe(t){return t.replaceAll(npe,"")}function gm(t,e){const i=S$(e,t);return i?i.name:t}function ype(t,e){return t&&t.map(i=>gm(i,e))}function S$(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function Vz(t){return`${t}`.trim()}function hd({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:n,fieldInfoMap:l}){return r?_S({formattedAttributes:e,template:bpe(r,{...e,...n,...t},i),fieldInfoMap:l}):""}function _S({formattedAttributes:t,template:e,fieldInfoMap:i}){return Vz(fpe(Jn(Jn(e,r=>ppe(r,i)),t)))}function mpe(t,e,i=!1){const r=e[t];if(typeof r=="string"){const n="%27",l=(i?encodeURIComponent(r):r).replaceAll(ape,n);e[t]=l}}function gpe(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>mpe(r,i,e)),i}function vpe(t,e,i){const r=(e=Vz(e))&&e[0]!=="{";return Jn(t,gpe(i,r||!1))}function xS(t,e){return t.replaceAll(ope,(i,r,n)=>{const l=S$(e,n);return l?`{${l.name}}`:r})}function bpe(t,e,i){const r=xS(t,i);return r&&r.replaceAll(hpe,(n,l,d)=>vpe(n,l||d,e))}function wpe(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function pA(t){return t!=null&&typeof t=="object"&&"layer"in t&&!!t.layer}function _pe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function xpe(t){return t!=null&&typeof t=="object"&&"fieldsIndex"in t&&"geometryType"in t&&"getField"in t&&"load"in t&&"loaded"in t&&"objectIdField"in t&&"spatialReference"in t&&"type"in t&&t.type==="feature"&&"when"in t}function Spe(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatureCount"in t&&"queryObjectIds"in t&&"queryRelatedFeatures"in t&&"queryRelatedFeaturesCount"in t&&"relationships"in t}function Bz(t){return xpe(t)&&Spe(t)}function Mpe(t,e){var $;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:n,layer:l}=e,d=Gz(i,r),y=d==null?void 0:d.clone(),v=S$(l,r);if(y&&!l9(r)){const E=v==null?void 0:v.type;if(E==="date"||E==="date-only"||E==="time-only"||E==="timestamp-offset"||($=y.format)!=null&&$.dateFormat){const k=y.format??new r0;if(k.dateFormat??(k.dateFormat=E==="date-only"?"short-date":"short-date-short-time"),typeof t=="number"){const P=!pA(l)&&vY(l)&&l.datesInUnknownTimezone||pA(l)&&_pe(l.layer)&&l.layer.datesInUnknownTimezone;return k.formatDate(t,P)}switch(E){case"date-only":return k.formatDateOnly(t);case"time-only":return k.formatTimeOnly(t);case"timestamp-offset":return k.formatTimestamp(t)}}}const x=y==null?void 0:y.format;return typeof t=="string"&&l9(r)&&x?x.formatRasterPixelValue(t):typeof(t=wpe(t,x))=="string"||t==null||x==null?Xm(t):n?Eh(t,{...iR(x),minimumFractionDigits:0,maximumFractionDigits:20}):x.formatNumber(t)}function Gz(t,e){if(t&&t.length&&e)return t.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===e.toLowerCase()})}function $pe({fieldName:t,graphic:e,layer:i}){if(Cl(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const n=i.getFeatureType(e);return n?n.name:null}function Tpe({fieldName:t,value:e,graphic:i,layer:r}){if(Cl(t)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(t,{feature:i});return n&&n.type==="coded-value"?n.getName(e):null}function Ipe(t,e){const{creatorField:i,creationDateField:r,editorField:n,editDateField:l}=t;if(!e)return;const d=e[l];if(typeof d=="number"){const v=e[n];return{type:"edit",date:Zn(d,dA),user:v}}const y=e[r];if(typeof y=="number"){const v=e[i];return{type:"create",date:Zn(y,dA),user:v}}return null}function Epe(t,e){const i=new Map;return t&&t.forEach(r=>{const n=gm(r.fieldName,e);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function fA(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const l=n&&n.fieldInfos;l&&e.push(...l)}}),e}function M$(t){return t.replaceAll(upe,e=>`&#${e.charCodeAt(0)};`)}function Xm(t){return typeof t=="string"?t.replaceAll(lpe,'<br class="esri-text-new-line" />'):t}function Uz(t){var x,$;const{value:e,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:l,graphic:d}=t;if(e==null)return"";const y=Tpe({fieldName:i,value:e,graphic:d,layer:l});if(y)return y;const v=$pe({fieldName:i,graphic:d,layer:l});if(v)return v;if(n.get(i.toLowerCase()))return Mpe(e,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:l});switch(($=(x=l==null?void 0:l.fieldsIndex)==null?void 0:x.get(i))==null?void 0:$.type){case"date":return Zn(e);case"date-only":return M7(e);case"time-only":return $7(e);case"timestamp-offset":return T7(e)}return Xm(e)}function M5({fieldInfos:t,attributes:e,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:l}){const d={};return l==null||l.forEach(y=>Cpe({attributes:d,relatedInfo:y,fieldInfoMap:n,fieldInfos:t,layer:i})),e&&Object.keys(e).forEach(y=>{const v=e[y];d[y]=Uz({fieldName:y,fieldInfos:t,fieldInfoMap:n,layer:i,value:v,graphic:r})}),d}async function qz(t,e){var $,E;const{layer:i,graphic:r,outFields:n,objectIds:l,returnGeometry:d,spatialReference:y}=t,v=l[0];if(typeof v!="number"&&typeof v!="string"){const k="Could not query required fields for the specified feature. The feature's ID is invalid.",P={layer:i,graphic:r,objectId:v,requiredFields:n};return cA.warn(k,P),null}if(!((E=($=WO(i))==null?void 0:$.operations)!=null&&E.supportsQuery)){const k="The specified layer cannot be queried. The following fields will not be available.",P={layer:i,graphic:r,requiredFields:n,returnGeometry:d};return cA.warn(k,P),null}const x=i.createQuery();return x.objectIds=l,x.outFields=n!=null&&n.length?n:[i.objectIdField],x.returnGeometry=!!d,x.returnZ=!!d,x.returnM=!!d,x.outSpatialReference=y,(await i.queryFeatures(x,e)).features[0]}async function Ape(t){var r;if(!((r=t.expressionInfos)!=null&&r.length))return!1;const e=await ql(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function kpe({graphic:t,popupTemplate:e,layer:i,spatialReference:r},n){if(!i||!e||(typeof i.load=="function"&&await i.load(n),!t.attributes))return;const l=t.attributes[i.objectIdField];if(l==null)return;const d=[l],y=await e.getRequiredFields(i.fieldsIndex),v=LX(y,t),x=v?[]:y,$=e.returnGeometry||await Ape(e);if(v&&!$)return;const E=await qz({layer:i,graphic:t,outFields:x,objectIds:d,returnGeometry:$,spatialReference:r},n);E&&(E.geometry&&(t.geometry=E.geometry),E.attributes&&(t.attributes={...t.attributes,...E.attributes}))}function Cl(t=""){return!!t&&t.includes(jz)}function Ppe(t){return t?`${jz}${t.layerId}/${t.fieldName}`:""}function yA({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:l}){t&&e&&i&&Object.keys(e.attributes).forEach(d=>{const y=Ppe({layerId:i.relation.id.toString(),fieldName:d}),v=e.attributes[d];t[y]=Uz({fieldName:y,fieldInfos:r,fieldInfoMap:n,layer:l,value:v,graphic:e})})}function Cpe({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(l=>yA({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(l=>yA({attributes:t,graphic:l,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:n})))}const mA=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Hz=({layer:t,method:e,query:i,definitionExpression:r})=>{var d,y;if(!((y=(d=t.capabilities)==null?void 0:d.query)!=null&&y.supportsCacheHint)||e==="attachments")return;const n=i.where!=null?i.where:null,l=i.geometry!=null?i.geometry:null;mA(r)||mA(n)||(l==null?void 0:l.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},Ope=({query:t,layer:e,method:i})=>{Hz({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},Lpe=({queryPayload:t,layer:e,method:i})=>{Hz({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function Dpe(t,e,i){return t&&e&&i?gA(t.allLayers,e,i)||gA(t.allTables,e,i):null}function gA(t,e,i){return t.filter(Bz).find(r=>r!==e&&r.url===e.url&&r.layerId===i.relatedTableId)}const vA={editing:!1,operations:{add:!0,update:!0,delete:!0}},Wz=ze.ofType(rpe);let Ds=class extends Be{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...vA},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Wz,this.fileInfos=new ze,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(me(()=>this.graphic,()=>this._graphicChanged(),st))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(e){return{...vA,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i}=this;if(!e||typeof e.queryAttachments!="function")throw new ne("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId(),n=new b2({objectIds:[r],returnMetadata:!0}),l=[],d=e.queryAttachments(n).then(v=>v[r]||l).catch(()=>l);this._getAttachmentsPromise=d,this.notifyChange("state");const y=await d;return i.removeAll(),y.length&&i.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(e,i=this.graphic){var v;const{_attachmentLayer:r,attachmentInfos:n,capabilities:l}=this;if(!i)throw new ne("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new ne("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((v=l.operations)!=null&&v.add))throw new ne("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new ne("invalid-layer","addAttachment(): A valid layer is required.");const d=r.addAttachment(i,e).then(x=>this._queryAttachment(x.objectId,i)),y=await d;return n.add(y),y}async deleteAttachment(e){var v;const{_attachmentLayer:i,attachmentInfos:r,graphic:n,capabilities:l}=this;if(!e)throw new ne("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((v=l.operations)!=null&&v.delete))throw new ne("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new ne("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new ne("invalid-graphic","deleteAttachment(): A graphic is required.");const d=i.deleteAttachments(n,[e.id]).then(()=>e),y=await d;return r.remove(y),y}async updateAttachment(e,i=this.activeAttachmentInfo){var $;const{_attachmentLayer:r,attachmentInfos:n,graphic:l,capabilities:d}=this;if(!e)throw new ne("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new ne("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!(($=d.operations)!=null&&$.update))throw new ne("invalid-capabilities","updateAttachment(): Update capabilities are required.");const y=n.findIndex(E=>E===i);if(!r||typeof r.updateAttachment!="function")throw new ne("invalid-layer","updateAttachment(): A valid layer is required.");if(!l)throw new ne("invalid-graphic","updateAttachment(): A graphic is required.");const v=r.updateAttachment(l,i.id,e).then(E=>this._queryAttachment(E.objectId)),x=await v;return n.splice(y,1,x),x}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const n=this.fileInfos.findIndex(l=>r===l);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:i}),this.fileInfos.items[n]}deleteFile(e){const i=this.fileInfos.find(r=>r.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!(r!=null&&r.queryAttachments))throw new ne("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i),l=new b2({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(l).then(d=>d[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,i=Fz(e);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};g([S()],Ds.prototype,"capabilities",void 0),g([St("capabilities")],Ds.prototype,"castCapabilities",null),g([S()],Ds.prototype,"activeAttachmentInfo",void 0),g([S()],Ds.prototype,"activeFileInfo",void 0),g([S({readOnly:!0,type:Wz})],Ds.prototype,"attachmentInfos",void 0),g([S()],Ds.prototype,"fileInfos",void 0),g([S({type:ur})],Ds.prototype,"graphic",void 0),g([S()],Ds.prototype,"mode",void 0),g([S({readOnly:!0})],Ds.prototype,"state",null),g([S()],Ds.prototype,"filesEnabled",void 0),g([S({readOnly:!0})],Ds.prototype,"supportsResizeAttachments",null),Ds=g([J("esri.widgets.Attachments.AttachmentsViewModel")],Ds);const $$=Ds;function bA(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function Rpe(t){const e=Et("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const wA={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},kt="esri-attachments",nc="esri-button",Pe={base:kt,loaderContainer:`${kt}__loader-container`,loader:`${kt}__loader`,fadeIn:`${kt}--fade-in`,container:`${kt}__container`,containerList:`${kt}__container--list`,containerPreview:`${kt}__container--preview`,actions:`${kt}__actions`,deleteButton:`${kt}__delete-button`,addAttachmentButton:`${kt}__add-attachment-button`,errorMessage:`${kt}__error-message`,items:`${kt}__items`,item:`${kt}__item`,itemButton:`${kt}__item-button`,itemMask:`${kt}__item-mask`,itemMaskIcon:`${kt}__item-mask--icon`,itemImage:`${kt}__image`,itemImageResizable:`${kt}__image--resizable`,itemLabel:`${kt}__label`,itemFilename:`${kt}__filename`,itemChevronIcon:`${kt}__item-chevron-icon`,itemLink:`${kt}__item-link`,itemLinkOverlay:`${kt}__item-link-overlay`,itemLinkOverlayIcon:`${kt}__item-link-overlay-icon`,itemEditIcon:`${kt}__item-edit-icon`,itemAddIcon:`${kt}__item-add-icon`,itemAddButton:`${kt}__item-add-button`,formNode:`${kt}__form-node`,fileFieldset:`${kt}__file-fieldset`,fileLabel:`${kt}__file-label`,fileName:`${kt}__file-name`,fileInput:`${kt}__file-input`,metadata:`${kt}__metadata`,metadataFieldset:`${kt}__metadata-fieldset`,progressBar:`${kt}__progress-bar`,esriWidget:"esri-widget",esriButton:nc,buttonDisabled:`${nc}--disabled`,esriButtonSecondary:`${nc}--secondary`,esriButtonTertiary:`${nc}--tertiary`,esriButtonThird:`${nc}--third`,esriButtonSmall:`${nc}--small`,esriButtonHalf:`${nc}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},$5=window.CSS;let Qr=class extends Dr{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...wA},this._supportsImageOrientation=$5&&$5.supports&&$5.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new $$),this.addHandles([Vs(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Vs(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),me(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),st)])}loadDependencies(){return vf({icon:()=>le(()=>import("./calcite-icon-899b792c.js"),["assets/calcite-icon-899b792c.js","assets/icon-2aec3643.js","assets/observers-279029a9.js"])})}get capabilities(){return this.viewModel.capabilities}set capabilities(e){this.viewModel.capabilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...wA,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var r;const i=this.viewModel.deleteFile(e||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return X("div",{class:this.classes(Pe.base,Pe.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?X("div",{key:"error-message",class:Pe.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(r||e):this.renderAttachmentContainer()}renderLoading(){return X("div",{class:Pe.loaderContainer,key:"loader"},X("div",{class:Pe.loader}))}renderProgressBar(){return this.visibleElements.progressBar?X("div",{class:Pe.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,n=this.visibleElements.cancelAddButton?X("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Pe.esriButton,Pe.esriButtonTertiary,Pe.esriButtonSmall,Pe.esriButtonHalf,e&&Pe.buttonDisabled)},this.messages.cancel):null,l=this.visibleElements.addSubmitButton?X("button",{type:"submit",disabled:r,class:this.classes(Pe.esriButton,Pe.esriButtonSecondary,Pe.esriButtonSmall,Pe.esriButtonHalf,{[Pe.buttonDisabled]:r})},this.messages.add):null,d=i?X("span",{key:"file-name",class:Pe.fileName},i.name):null,y=X("form",{bind:this,afterCreate:Uw,afterRemoved:EE,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},X("fieldset",{class:Pe.fileFieldset},d,X("label",{class:this.classes(Pe.fileLabel,Pe.esriButton,Pe.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,X("input",{class:Pe.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),l,n);return X("div",{key:"add-form-container",class:Pe.formNode},y)}renderDetailsForm(e){var Y,ie,se;const{visibleElements:i,viewModel:r,selectedFile:n,submitting:l}=this,{capabilities:d}=r,y=l||!n;let v,x,$,E;n?(v=n.type,x=n.name,$=n.size):e&&"file"in e?(v=e.file.type,x=e.file.name,$=e.file.size):e&&"contentType"in e&&(v=e.contentType,x=e.name,$=e.size,E=e.url);const k=d.editing&&((Y=d.operations)!=null&&Y.delete)&&i.deleteButton?X("button",{key:"delete-button",type:"button",disabled:l,bind:this,onclick:ue=>this._submitDeleteAttachment(ue,e),class:this.classes(Pe.esriButton,Pe.esriButtonSmall,Pe.esriButtonTertiary,Pe.deleteButton,{[Pe.buttonDisabled]:l})},this.messages.delete):void 0,P=d.editing&&((ie=d.operations)!=null&&ie.update)&&i.updateButton?X("button",{disabled:y,key:"update-button",type:"submit",class:this.classes(Pe.esriButton,Pe.esriButtonSmall,Pe.esriButtonThird,{[Pe.buttonDisabled]:y})},this.messages.update):void 0,D=this.visibleElements.cancelUpdateButton?X("button",{disabled:l,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Pe.esriButton,Pe.esriButtonSmall,Pe.esriButtonTertiary,Pe.esriButtonThird,{[Pe.buttonDisabled]:l})},this.messages.cancel):void 0,L=d.editing&&((se=d.operations)!=null&&se.update)?X("fieldset",{key:"file",class:Pe.fileFieldset},X("span",{key:"file-name",class:Pe.fileName},x),X("label",{class:this.classes(Pe.fileLabel,Pe.esriButton,Pe.esriButtonSecondary)},this.messages.changeFile,X("input",{class:Pe.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,N=X("fieldset",{key:"size",class:Pe.metadataFieldset},X("label",null,Qde(this.messagesUnits,$??0))),B=X("fieldset",{key:"content-type",class:Pe.metadataFieldset},X("label",null,v)),W=E!=null?X("a",{class:Pe.itemLink,href:E,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),X("div",{class:Pe.itemLinkOverlay},X("span",{class:Pe.itemLinkOverlayIcon},X("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),q=X("form",{bind:this,afterCreate:Uw,afterRemoved:EE,"data-node-ref":"_updateAttachmentForm",onsubmit:ue=>this._submitUpdateAttachment(ue,e)},X("div",{class:Pe.metadata},N,B),L,X("div",{class:Pe.actions},k,D,P));return X("div",{key:"edit-form-container",class:Pe.formNode},W,q)}renderImageMask(e,i){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,i):null}renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,n=Rpe(i),l={[Pe.itemImageResizable]:r};return X("div",{key:n,class:this.classes(Pe.itemMaskIcon,Pe.itemMask)},X("img",{title:e,alt:e,src:n,class:this.classes(l,Pe.itemImage)}))}renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:n,name:l,url:d}=e;if(!r||!bA(n))return this.renderGenericImageMask(l,n);const y=this._getCSSTransform(e),v=y?{transform:y,"image-orientation":"none"}:{},x=`${d}${d!=null&&d.includes("?")?"&":"?"}w=${i}`,$={[Pe.itemImageResizable]:r};return X("div",{key:x,class:this.classes(Pe.itemMask)},X("img",{styles:v,alt:l,title:l,src:x,class:this.classes($,Pe.itemImage)}))}renderFile(e){const{file:i}=e;return X("li",{class:Pe.item,key:i},X("button",{key:"details-button",bind:this,class:Pe.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),X("label",{class:Pe.itemLabel},X("span",{class:Pe.itemFilename},i.name||this.messages.noTitle),X("span",{"aria-hidden":"true",class:this.classes(Pe.itemChevronIcon,Lh(this.container)?Pe.iconLeft:Pe.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{capabilities:l,supportsResizeAttachments:d}=r,{contentType:y,name:v,url:x}=e,$=this.renderImageMask(e,i==="list"?48:400),E=l.editing?X("span",{"aria-hidden":"true",class:this.classes(Pe.itemChevronIcon,Lh(this.container)?Pe.iconLeft:Pe.iconRight)}):null,k=[$,n==="preview"&&d&&bA(y)?null:X("label",{class:Pe.itemLabel},X("span",{class:Pe.itemFilename},v||this.messages.noTitle),E)],P=l.editing?X("button",{key:"details-button",bind:this,class:Pe.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},k):X("a",{key:"details-link",class:Pe.itemButton,href:x??void 0,target:"_blank"},k);return X("li",{class:Pe.item,key:e},P)}renderAttachmentContainer(){var D;const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,capabilities:l,fileInfos:d}=i,y=!!(n!=null&&n.length),v=!!(d!=null&&d.length),x={[Pe.containerList]:e!=="preview",[Pe.containerPreview]:e==="preview"},$=l.editing&&((D=l.operations)!=null&&D.add)&&r.addButton?X("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Pe.esriButton,Pe.esriButtonTertiary,Pe.addAttachmentButton),type:"button"},X("span",{"aria-hidden":"true",class:this.classes(Pe.itemAddIcon,Pe.iconPlus)}),this.messages.add):void 0,E=y?X("ul",{key:"attachments-list",class:Pe.items},n.toArray().map(L=>this.renderAttachmentInfo({attachmentInfo:L,displayType:e}))):void 0,k=v?X("ul",{key:"file-list",class:Pe.items},d.toArray().map(L=>this.renderFile(L))):void 0,P=v||y?void 0:X("div",{class:Pe.empty},this.messages.noAttachments);return X("div",{key:"attachments-container",class:this.classes(Pe.container,x)},E,k,P,$)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const i=e.target,r=i&&i.files&&i.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};g([S()],Qr.prototype,"capabilities",null),g([S()],Qr.prototype,"displayType",void 0),g([S({readOnly:!0})],Qr.prototype,"effectiveDisplayType",null),g([S()],Qr.prototype,"graphic",null),g([S()],Qr.prototype,"label",null),g([S(),Or("esri/widgets/Attachments/t9n/Attachments")],Qr.prototype,"messages",void 0),g([S(),Or("esri/core/t9n/Units")],Qr.prototype,"messagesUnits",void 0),g([S({readOnly:!0})],Qr.prototype,"selectedFile",void 0),g([S({readOnly:!0})],Qr.prototype,"submitting",void 0),g([S({readOnly:!0})],Qr.prototype,"error",void 0),g([S({type:$$})],Qr.prototype,"viewModel",void 0),g([S()],Qr.prototype,"visibleElements",void 0),g([St("visibleElements")],Qr.prototype,"castVisibleElements",null),Qr=g([J("esri.widgets.Attachments")],Qr);const jpe=Qr;let Vy=class extends $${constructor(e){super(e),this.description=null,this.title=null}};g([S()],Vy.prototype,"description",void 0),g([S()],Vy.prototype,"title",void 0),Vy=g([J("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Vy);const T$=Vy,Fpe={heading:"esri-widget__heading"};function I$({level:t,class:e,...i},r){const n=Jz(t);return X(`h${n}`,{...i,class:Jj(Fpe.heading,e),role:"heading","aria-level":String(n)},r)}function Jz(t){return zs(Math.ceil(t),1,6)}function Q6e(t,e=1){return Jz(t+e)}const T5="esri-feature-element-info",I5={base:T5,title:`${T5}__title`,description:`${T5}__description`};let Dp=class extends Dr{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return X("div",{class:I5.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?X(I$,{level:this.headingLevel,class:I5.title},e):null}renderDescription(){const{description:e}=this;return e?X("div",{key:"description",class:I5.description},e):null}};g([S()],Dp.prototype,"description",void 0),g([S()],Dp.prototype,"headingLevel",void 0),g([S()],Dp.prototype,"title",void 0),Dp=g([J("esri.widgets.Feature.support.FeatureElementInfo")],Dp);const O_=Dp,Npe={base:"esri-feature-attachments"};let $a=class extends Dr{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new jpe,this.headingLevel=2,this.viewModel=new T$}initialize(){this._featureElementInfo=new O_,this.addHandles([me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),st),me(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,st)])}destroy(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return X("div",{class:Npe.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var n;const{description:e,title:i,headingLevel:r}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i,headingLevel:r})}};g([S({readOnly:!0})],$a.prototype,"attachmentsWidget",void 0),g([S()],$a.prototype,"description",null),g([S()],$a.prototype,"displayType",null),g([S()],$a.prototype,"graphic",null),g([S()],$a.prototype,"headingLevel",void 0),g([S()],$a.prototype,"title",null),g([S({type:T$})],$a.prototype,"viewModel",void 0),$a=g([J("esri.widgets.Feature.FeatureAttachments")],$a);const zpe=$a;let Vu=class extends ra(Be){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(me(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},st))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(w2(r,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=w2(e,{graphic:i}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};g([S({readOnly:!0})],Vu.prototype,"created",void 0),g([S()],Vu.prototype,"creator",void 0),g([S()],Vu.prototype,"destroyer",void 0),g([S({type:ur})],Vu.prototype,"graphic",void 0),g([S({readOnly:!0})],Vu.prototype,"state",null),Vu=g([J("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Vu);const _2=Vu,E5="esri-feature-content",A5={base:E5,loaderContainer:`${E5}__loader-container`,loader:`${E5}__loader`};let Rp=class extends Dr{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{Nz(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return X("div",{class:A5.loaderContainer,key:"loader"},X("div",{class:A5.loader}))}renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?X("div",{key:e,bind:e,afterCreate:this._attachToNode}):d2(e)?X("div",{key:e},!e.destroyed&&e.render()):X("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return X("div",{class:A5.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const i=this;e.appendChild(i)}};g([S()],Rp.prototype,"creator",null),g([S()],Rp.prototype,"graphic",null),g([S({type:_2})],Rp.prototype,"viewModel",void 0),Rp=g([J("esri.widgets.Feature.FeatureContent")],Rp);const xb=Rp;let fl=class extends Be{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i==null||i.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const l=n.clone();l.label=zz(l,e),r.push(l)}),r}};g([S()],fl.prototype,"attributes",void 0),g([S({type:[hR]})],fl.prototype,"expressionInfos",void 0),g([S()],fl.prototype,"description",void 0),g([S({type:[Rm]})],fl.prototype,"fieldInfos",void 0),g([S({readOnly:!0})],fl.prototype,"formattedFieldInfos",null),g([S()],fl.prototype,"title",void 0),fl=g([J("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],fl);const L_=fl,Vpe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Bpe(t){let e=null;return Vpe.some(i=>(i.pattern.test(t)&&(e=i),!!e)),e}function Gpe(t,e){if(typeof e!="string"||!e)return e;const i=Bpe(e);if(!i)return e;const r=e.match(i.pattern),n=r&&r[2],l=Jn(Jn(i.label,{messages:t,hierPart:n}),{appName:i.appName}),d=i.target?` target="${i.target}"`:"",y=i.target==="_blank"?' rel="noreferrer"':"";return e.replace(i.pattern,`<a${d} href="$1"${y}>${l}</a>`)}const rv="esri-feature-fields",Yf={base:rv,fieldHeader:`${rv}__field-header`,fieldData:`${rv}__field-data`,fieldDataDate:`${rv}__field-data--date`,esriTable:"esri-widget__table"};let To=class extends Dr{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new L_,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new O_,this.addHandles(me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),st))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,i){const{attributes:r}=this.viewModel,n=e.fieldName,l=e.label||n,d=r?r[n]==null?"":r[n]:"",y=!(!e.format||!e.format.dateFormat),v=typeof d=="number"&&!y?this._forceLTR(d):Gpe(this.messagesURIUtils,d),x={[Yf.fieldDataDate]:y};return X("tr",{key:`fields-element-info-row-${n}-${i}`},X("th",{key:`fields-element-info-row-header-${n}-${i}`,class:Yf.fieldHeader,innerHTML:l}),X("td",{key:`fields-element-info-row-data-${n}-${i}`,class:this.classes(Yf.fieldData,x),innerHTML:v}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?X("table",{class:Yf.esriTable,summary:this.messages.fieldsSummary},X("tbody",null,e.map((i,r)=>this.renderFieldInfo(i,r)))):null}render(){var e;return X("div",{class:Yf.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};g([S()],To.prototype,"attributes",null),g([S()],To.prototype,"description",null),g([S()],To.prototype,"expressionInfos",null),g([S()],To.prototype,"fieldInfos",null),g([S()],To.prototype,"title",null),g([S({type:L_,nonNullable:!0})],To.prototype,"viewModel",void 0),g([S(),Or("esri/widgets/Feature/t9n/Feature")],To.prototype,"messages",void 0),g([S(),Or("esri/widgets/support/t9n/uriUtils")],To.prototype,"messagesURIUtils",void 0),To=g([J("esri.widgets.Feature.FeatureFields")],To);const Yz=To,Upe=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,qpe=/^-?(\d+)(\.(\d+))?$/i;function Hpe(t,e){return t-e}function Wpe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function Jpe(t,e,i,r,n){const l=Ype(t,e,i,r),d=l.previous==null||l.previous<=n,y=l.next==null||l.next<=n;return d&&y||l.previous+l.next<=2*n}function Kz(t){const e=String(t),i=e.match(qpe);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],l=r[1];if(n&&l){const d=Number(n);let y=Number(l);const v=y>0;v||(y=Math.abs(y));const x=Kz(d);return v?(x.integer+=y,y>x.fractional?x.fractional=0:x.fractional-=y):(x.fractional+=y,y>x.integer?x.integer=1:x.integer-=y),x}}return{integer:0,fractional:0}}function Ype(t,e,i,r){const n={previous:null,next:null};if(i!=null){const l=t-i,d=e-i-l;n.previous=Math.floor(Math.abs(100*d/l))}if(r!=null){const l=r-t,d=r-e-l;n.next=Math.floor(Math.abs(100*d/l))}return n}function oMe(t,e={}){const i=t.slice(0),{tolerance:r=2,strictBounds:n=!1,indexes:l=i.map((d,y)=>y)}=e;l.sort(Hpe);for(let d=0;d<l.length;d++){const y=l[d],v=i[y],x=y===0?null:i[y-1],$=y===i.length-1?null:i[y+1],E=Kz(v).fractional;if(E){let k,P=0,D=!1;for(;P<=E&&!D;){const L=Wpe(v,P);k=n&&d===0?L[1]:L[0],D=Jpe(v,k,x,$,r),P++}D&&(i[y]=k)}}return i}const Kpe={maximumFractionDigits:20};function Zpe(t){return Eh(t,Kpe)}var SS;let Lc=SS=class extends ge{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new SS({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};g([S({type:Ne,json:{type:[Lt],write:!0}})],Lc.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],Lc.prototype,"label",void 0),g([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Lc.prototype,"value",void 0),g([Ae("value")],Lc.prototype,"writeValue",null),Lc=SS=g([J("esri.renderers.visualVariables.support.ColorStop")],Lc);const Xpe=Lc;function D_(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qpe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function e0e(t,e,i,r,n,l,d,y,v,x,$,E,k,P,D,L){const N=new Float32Array(16);return N[0]=t,N[1]=e,N[2]=i,N[3]=r,N[4]=n,N[5]=l,N[6]=d,N[7]=y,N[8]=v,N[9]=x,N[10]=$,N[11]=E,N[12]=k,N[13]=P,N[14]=D,N[15]=L,N}function t0e(t,e){return new Float32Array(t,e,16)}const i0e=D_();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i0e,clone:Qpe,create:D_,createView:t0e,fromValues:e0e},Symbol.toStringTag,{value:"Module"}));const r0e=(t,e)=>{const i=Wh(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Xl(i,i)},s0e=(t,e)=>{const i=Wh(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Xl(i,i)},n0e=(t,e)=>{const i=1-e,r=Wh(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Xl(r,r)},o0e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=Wh(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Xl(n,n)},a0e=(t,e)=>{const i=1-2*e,r=Wh(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Xl(r,r)},l0e=(t,e)=>{const i=Wh(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Xl(i,i)},u0e=(t,e)=>{const i=1-e,r=Wh(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Xl(r,r)};let Zz=class Xz{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Fs(e.strength,i.strength,r),this.radius=Fs(e.radius,i.radius,r),this.threshold=Fs(e.threshold,i.threshold,r)}clone(){return new Xz(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:k1(this.radius),strength:this.strength,threshold:this.threshold}}},Qz=class eV{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Fs(e.radius,i.radius,r))}clone(){return new eV(this.radius)}toJSON(){return{type:"blur",radius:k1(this.radius)}}},MS=class tV{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Fs(e.amount,i.amount,r),this._updateMatrix()}clone(){return new tV(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||D_();switch(this.type){case"brightness":this._colorMatrix=r0e(e,this.amount);break;case"contrast":this._colorMatrix=s0e(e,this.amount);break;case"grayscale":this._colorMatrix=n0e(e,this.amount);break;case"invert":this._colorMatrix=a0e(e,this.amount);break;case"saturate":this._colorMatrix=l0e(e,this.amount);break;case"sepia":this._colorMatrix=u0e(e,this.amount)}}},iV=class rV{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Fs(e.offsetX,i.offsetX,r),this.offsetY=Fs(e.offsetY,i.offsetY,r),this.blurRadius=Fs(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Fs(e.color[0],i.color[0],r)),this.color[1]=Math.round(Fs(e.color[1],i.color[1],r)),this.color[2]=Math.round(Fs(e.color[2],i.color[2],r)),this.color[3]=Fs(e.color[3],i.color[3],r)}clone(){return new rV(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:k1(this.offsetX),yoffset:k1(this.offsetY),blurRadius:k1(this.blurRadius),color:e}}},sV=class nV{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Fs(e.angle,i.angle,r),this._updateMatrix()}clone(){return new nV(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||D_();this._colorMatrix=o0e(e,this.angle)}},oV=class aV{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Fs(e.amount,i.amount,r)}clone(){return new aV(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Fs(t,e,i){return t+(e-t)*i}function k1(t){return Math.round(1e3*Ba(t))/1e3}function h0e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new MS(t.type,0);case"saturate":case"brightness":case"contrast":return new MS(t.type,1);case"opacity":return new oV(1);case"hue-rotate":return new sV(0);case"blur":return new Qz(0);case"drop-shadow":return new iV(0,0,0,[...ZM("transparent")]);case"bloom":return new Zz(0,0,1)}}function c0e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function d0e(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(h0e(i[n]))}function p0e(t){const e=t[0];return!!e&&"type"in e}var _A,xA,$S={exports:{}};$S.exports,xA=function(){function t(n,l){function d(){this.constructor=n}d.prototype=l.prototype,n.prototype=new d}function e(n,l,d,y){var v=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(v,e.prototype),v.expected=l,v.found=d,v.location=y,v.name="SyntaxError",v}function i(n,l,d){return d=d||" ",n.length>l?n:(l-=n.length,n+(d+=d.repeat(l)).slice(0,l))}function r(n,l){var d,y={},v=(l=l!==void 0?l:{}).grammarSource,x={start:ji},$=ji,E="none",k=")",P=",",D="(",L="%",N="px",B="cm",W="mm",q="in",Y="pt",ie="pc",se="deg",ue="rad",de="grad",be="turn",we="#",$e=".",ke="e",Ge=/^[ \t\n\r]/,Fe=/^[a-z\-]/,ht=/^[0-9a-fA-F]/,ni=/^[+\-]/,Ze=/^[0-9]/,Xe=Se("none"),oi=ye("none",!1),to=ye(")",!1),io=ye(",",!1),Es=Se("whitespace"),vn=pe([" ","	",`
`,"\r"],!1,!1),Yd=Se("function"),Tf=ye("(",!1),If=Se("identifier"),lg=pe([["a","z"],"-"],!1,!1),r3=Se("percentage"),s3=ye("%",!1),n3=Se("length"),o3=ye("px",!1),a3=ye("cm",!1),ug=ye("mm",!1),l3=ye("in",!1),u3=ye("pt",!1),h3=ye("pc",!1),Yi=Se("angle"),H=ye("deg",!1),Gr=ye("rad",!1),hg=ye("grad",!1),At=ye("turn",!1),Ai=Se("number"),ro=Se("color"),na=ye("#",!1),so=pe([["0","9"],["a","f"],["A","F"]],!1,!1),oa=pe(["+","-"],!1,!1),no=pe([["0","9"]],!1,!1),cg=ye(".",!1),Ja=ye("e",!1),Ie=function(){return[]},tu=function(Q,fe){return{type:"function",name:Q,parameters:fe||[]}},c=function(Q,fe){return fe.length>0?UU(Q,fe,3):[Q]},C=function(Q){return{type:"quantity",value:Q.value,unit:Q.unit}},w=function(Q){return{type:"color",colorType:Q.type,value:Q.value}},h=function(Q){return Q},a=function(){return he()},s=function(Q){return{value:Q,unit:"%"}},o=function(Q){return{value:Q,unit:"px"}},u=function(Q){return{value:Q,unit:"cm"}},p=function(Q){return{value:Q,unit:"mm"}},f=function(Q){return{value:Q,unit:"in"}},m=function(Q){return{value:Q,unit:"pt"}},b=function(Q){return{value:Q,unit:"pc"}},_=function(Q){return{value:Q,unit:"deg"}},M=function(Q){return{value:Q,unit:"rad"}},T=function(Q){return{value:Q,unit:"grad"}},A=function(Q){return{value:Q,unit:"turn"}},O=function(Q){return{value:Q,unit:null}},R=function(){return{type:"hex",value:he()}},j=function(Q){return{type:"function",value:Q}},z=function(){return{type:"named",value:he()}},V=function(){return parseFloat(he())},F=0,G=0,Z=[{line:1,column:1}],K=0,re=[],te=0;if("startRule"in l){if(!(l.startRule in x))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');$=x[l.startRule]}function he(){return n.substring(G,F)}function ye(Q,fe){return{type:"literal",text:Q,ignoreCase:fe}}function pe(Q,fe,Me){return{type:"class",parts:Q,inverted:fe,ignoreCase:Me}}function De(){return{type:"end"}}function Se(Q){return{type:"other",description:Q}}function Qe(Q){var fe,Me=Z[Q];if(Me)return Me;for(fe=Q-1;!Z[fe];)fe--;for(Me={line:(Me=Z[fe]).line,column:Me.column};fe<Q;)n.charCodeAt(fe)===10?(Me.line++,Me.column=1):Me.column++,fe++;return Z[Q]=Me,Me}function We(Q,fe,Me){var mt=Qe(Q),Ki=Qe(fe),ei={source:v,start:{offset:Q,line:mt.line,column:mt.column},end:{offset:fe,line:Ki.line,column:Ki.column}};return Me&&v&&typeof v.offset=="function"&&(ei.start=v.offset(ei.start),ei.end=v.offset(ei.end)),ei}function Ce(Q){F<K||(F>K&&(K=F,re=[]),re.push(Q))}function Zt(Q,fe,Me){return new e(e.buildMessage(Q,fe),Q,fe,Me)}function ji(){var Q;return(Q=Qt())===y&&(Q=Tt()),Q}function Qt(){var Q,fe;return te++,Q=F,dt(),n.substr(F,4)===E?(fe=E,F+=4):(fe=y,te===0&&Ce(oi)),fe!==y?(dt(),G=Q,Q=Ie()):(F=Q,Q=y),te--,Q===y&&te===0&&Ce(Xe),Q}function Tt(){var Q,fe;if(Q=[],(fe=It())!==y)for(;fe!==y;)Q.push(fe),fe=It();else Q=y;return Q}function It(){var Q,fe,Me,mt;return Q=F,dt(),(fe=qs())!==y?(dt(),(Me=pt())===y&&(Me=null),dt(),n.charCodeAt(F)===41?(mt=k,F++):(mt=y,te===0&&Ce(to)),mt!==y?(dt(),G=Q,Q=tu(fe,Me)):(F=Q,Q=y)):(F=Q,Q=y),Q}function pt(){var Q,fe,Me,mt,Ki,ei,bn,dg;if(Q=F,(fe=ai())!==y){for(Me=[],mt=F,Ki=dt(),n.charCodeAt(F)===44?(ei=P,F++):(ei=y,te===0&&Ce(io)),ei===y&&(ei=null),bn=dt(),(dg=ai())!==y?mt=Ki=[Ki,ei,bn,dg]:(F=mt,mt=y);mt!==y;)Me.push(mt),mt=F,Ki=dt(),n.charCodeAt(F)===44?(ei=P,F++):(ei=y,te===0&&Ce(io)),ei===y&&(ei=null),bn=dt(),(dg=ai())!==y?mt=Ki=[Ki,ei,bn,dg]:(F=mt,mt=y);G=Q,Q=c(fe,Me)}else F=Q,Q=y;return Q}function ai(){var Q,fe;return Q=F,(fe=Rr())===y&&(fe=Rt())===y&&(fe=Kd())===y&&(fe=Zd()),fe!==y&&(G=Q,fe=C(fe)),(Q=fe)===y&&(Q=F,(fe=Xd())!==y&&(G=Q,fe=w(fe)),Q=fe),Q}function dt(){var Q,fe;for(te++,Q=[],Ge.test(n.charAt(F))?(fe=n.charAt(F),F++):(fe=y,te===0&&Ce(vn));fe!==y;)Q.push(fe),Ge.test(n.charAt(F))?(fe=n.charAt(F),F++):(fe=y,te===0&&Ce(vn));return te--,fe=y,te===0&&Ce(Es),Q}function qs(){var Q,fe,Me;return te++,Q=F,(fe=bt())!==y?(n.charCodeAt(F)===40?(Me=D,F++):(Me=y,te===0&&Ce(Tf)),Me!==y?(G=Q,Q=h(fe)):(F=Q,Q=y)):(F=Q,Q=y),te--,Q===y&&(fe=y,te===0&&Ce(Yd)),Q}function bt(){var Q,fe,Me;if(te++,Q=F,fe=[],Fe.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(lg)),Me!==y)for(;Me!==y;)fe.push(Me),Fe.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(lg));else fe=y;return fe!==y&&(G=Q,fe=a()),te--,(Q=fe)===y&&(fe=y,te===0&&Ce(If)),Q}function Rr(){var Q,fe,Me;return te++,Q=F,dt(),(fe=Ur())!==y?(n.charCodeAt(F)===37?(Me=L,F++):(Me=y,te===0&&Ce(s3)),Me!==y?(G=Q,Q=s(fe)):(F=Q,Q=y)):(F=Q,Q=y),te--,Q===y&&te===0&&Ce(r3),Q}function Rt(){var Q,fe,Me;return te++,Q=F,dt(),(fe=Ur())!==y?(n.substr(F,2)===N?(Me=N,F+=2):(Me=y,te===0&&Ce(o3)),Me!==y?(G=Q,Q=o(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,dt(),(fe=Ur())!==y?(n.substr(F,2)===B?(Me=B,F+=2):(Me=y,te===0&&Ce(a3)),Me!==y?(G=Q,Q=u(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,dt(),(fe=Ur())!==y?(n.substr(F,2)===W?(Me=W,F+=2):(Me=y,te===0&&Ce(ug)),Me!==y?(G=Q,Q=p(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,dt(),(fe=Ur())!==y?(n.substr(F,2)===q?(Me=q,F+=2):(Me=y,te===0&&Ce(l3)),Me!==y?(G=Q,Q=f(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,dt(),(fe=Ur())!==y?(n.substr(F,2)===Y?(Me=Y,F+=2):(Me=y,te===0&&Ce(u3)),Me!==y?(G=Q,Q=m(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,dt(),(fe=Ur())!==y?(n.substr(F,2)===ie?(Me=ie,F+=2):(Me=y,te===0&&Ce(h3)),Me!==y?(G=Q,Q=b(fe)):(F=Q,Q=y)):(F=Q,Q=y)))))),te--,Q===y&&te===0&&Ce(n3),Q}function Kd(){var Q,fe,Me;return te++,Q=F,(fe=Ur())!==y?(n.substr(F,3)===se?(Me=se,F+=3):(Me=y,te===0&&Ce(H)),Me!==y?(G=Q,Q=_(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,(fe=Ur())!==y?(n.substr(F,3)===ue?(Me=ue,F+=3):(Me=y,te===0&&Ce(Gr)),Me!==y?(G=Q,Q=M(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,(fe=Ur())!==y?(n.substr(F,4)===de?(Me=de,F+=4):(Me=y,te===0&&Ce(hg)),Me!==y?(G=Q,Q=T(fe)):(F=Q,Q=y)):(F=Q,Q=y),Q===y&&(Q=F,(fe=Ur())!==y?(n.substr(F,4)===be?(Me=be,F+=4):(Me=y,te===0&&Ce(At)),Me!==y?(G=Q,Q=A(fe)):(F=Q,Q=y)):(F=Q,Q=y)))),te--,Q===y&&(fe=y,te===0&&Ce(Yi)),Q}function Zd(){var Q,fe;return te++,Q=F,dt(),(fe=Ur())!==y?(G=Q,Q=O(fe)):(F=Q,Q=y),te--,Q===y&&te===0&&Ce(Ai),Q}function Xd(){var Q,fe,Me,mt;if(te++,Q=F,n.charCodeAt(F)===35?(fe=we,F++):(fe=y,te===0&&Ce(na)),fe!==y){if(Me=[],ht.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(so)),mt!==y)for(;mt!==y;)Me.push(mt),ht.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(so));else Me=y;Me!==y?(G=Q,Q=R()):(F=Q,Q=y)}else F=Q,Q=y;return Q===y&&(Q=F,(fe=It())!==y&&(G=Q,fe=j(fe)),(Q=fe)===y&&(Q=F,(fe=bt())!==y&&(G=Q,fe=z()),Q=fe)),te--,Q===y&&(fe=y,te===0&&Ce(ro)),Q}function Ur(){var Q,fe,Me,mt,Ki,ei,bn;for(Q=F,ni.test(n.charAt(F))?(n.charAt(F),F++):te===0&&Ce(oa),fe=F,Me=[],Ze.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(no));mt!==y;)Me.push(mt),Ze.test(n.charAt(F))?(mt=n.charAt(F),F++):(mt=y,te===0&&Ce(no));if(n.charCodeAt(F)===46?(mt=$e,F++):(mt=y,te===0&&Ce(cg)),mt!==y){if(Ki=[],Ze.test(n.charAt(F))?(ei=n.charAt(F),F++):(ei=y,te===0&&Ce(no)),ei!==y)for(;ei!==y;)Ki.push(ei),Ze.test(n.charAt(F))?(ei=n.charAt(F),F++):(ei=y,te===0&&Ce(no));else Ki=y;Ki!==y?fe=Me=[Me,mt,Ki]:(F=fe,fe=y)}else F=fe,fe=y;if(fe===y)if(fe=[],Ze.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(no)),Me!==y)for(;Me!==y;)fe.push(Me),Ze.test(n.charAt(F))?(Me=n.charAt(F),F++):(Me=y,te===0&&Ce(no));else fe=y;if(fe!==y){if(Me=F,n.charCodeAt(F)===101?(mt=ke,F++):(mt=y,te===0&&Ce(Ja)),mt!==y){if(ni.test(n.charAt(F))?(Ki=n.charAt(F),F++):(Ki=y,te===0&&Ce(oa)),Ki===y&&(Ki=null),ei=[],Ze.test(n.charAt(F))?(bn=n.charAt(F),F++):(bn=y,te===0&&Ce(no)),bn!==y)for(;bn!==y;)ei.push(bn),Ze.test(n.charAt(F))?(bn=n.charAt(F),F++):(bn=y,te===0&&Ce(no));else ei=y;ei!==y?Me=mt=[mt,Ki,ei]:(F=Me,Me=y)}else F=Me,Me=y;Me===y&&(Me=null),G=Q,Q=V()}else F=Q,Q=y;return Q}function GU(Q,fe){return Q.map(function(Me){return Me[fe]})}function UU(Q,fe,Me){return[Q].concat(GU(fe,Me))}if((d=$())!==y&&F===n.length)return d;throw d!==y&&F<n.length&&Ce(De()),Zt(re,K<n.length?n.charAt(K):null,K<n.length?We(K,K+1):We(K,K))}return t(e,Error),e.prototype.format=function(n){var l="Error: "+this.message;if(this.location){var d,y=null;for(d=0;d<n.length;d++)if(n[d].source===this.location.source){y=n[d].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,x=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,$=this.location.source+":"+x.line+":"+x.column;if(y){var E=this.location.end,k=i("",x.line.toString().length," "),P=y[v.line-1],D=(v.line===E.line?E.column:P.length+1)-v.column||1;l+=`
 --> `+$+`
`+k+` |
`+x.line+" | "+P+`
`+k+" | "+i("",v.column-1," ")+i("",D,"^")}else l+=`
 at `+$}return l},e.buildMessage=function(n,l){var d={literal:function(P){return'"'+v(P.text)+'"'},class:function(P){var D=P.parts.map(function(L){return Array.isArray(L)?x(L[0])+"-"+x(L[1]):x(L)});return"["+(P.inverted?"^":"")+D.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(P){return P.description}};function y(P){return P.charCodeAt(0).toString(16).toUpperCase()}function v(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(D){return"\\x0"+y(D)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(D){return"\\x"+y(D)})}function x(P){return P.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(D){return"\\x0"+y(D)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(D){return"\\x"+y(D)})}function $(P){return d[P.type](P)}function E(P){var D,L,N=P.map($);if(N.sort(),N.length>0){for(D=1,L=1;D<N.length;D++)N[D-1]!==N[D]&&(N[L]=N[D],L++);N.length=L}switch(N.length){case 1:return N[0];case 2:return N[0]+" or "+N[1];default:return N.slice(0,-1).join(", ")+", or "+N[N.length-1]}}function k(P){return P?'"'+v(P)+'"':"end of input"}return"Expected "+E(n)+" but "+k(l)+" found."},{SyntaxError:e,parse:r}},(_A=$S).exports&&(_A.exports=xA());var f0e=$S.exports;function lV(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=SA(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ne("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:SA(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!c0e(e[i].effects,e[i+1].effects))throw new ne("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});d0e(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function SA(t){let e;if(!t)return[];try{e=f0e.parse(t)}catch(i){throw new ne("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>y0e(i))}function y0e(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return m0e(t);case"opacity":return g0e(t);case"hue-rotate":return v0e(t);case"blur":return b0e(t);case"drop-shadow":return w0e(t);case"bloom":return _0e(t)}}catch(e){throw e.details.filter=t,e}throw new ne("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function m0e(t){let e=1;return bf(t.parameters,1),t.parameters.length===1&&(e=jo(t.parameters[0])),new MS(t.name,e)}function g0e(t){let e=1;return bf(t.parameters,1),t.parameters.length===1&&(e=jo(t.parameters[0])),new oV(e)}function v0e(t){let e=0;return bf(t.parameters,1),t.parameters.length===1&&(e=I0e(t.parameters[0])),new sV(e)}function b0e(t){let e=0;return bf(t.parameters,1),t.parameters.length===1&&(e=k$(t.parameters[0]),Qm(e,t.parameters[0])),new Qz(e)}function w0e(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ne("effect:type-error","Accepts only one color",{});i=E0e(r)}else{const n=k$(r);if(Object.isFrozen(e))throw new ne("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&Qm(n,r)}if(e.length<2||e.length>3)throw new ne("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new iV(e[0],e[1],e[2]||0,i||uV("black"))}function _0e(t){let e=1,i=0,r=0;return bf(t.parameters,3),t.parameters[0]&&(e=jo(t.parameters[0])),t.parameters[1]&&(i=k$(t.parameters[1]),Qm(i,t.parameters[1])),t.parameters[2]&&(r=jo(t.parameters[2])),new Zz(e,i,r)}function bf(t,e){if(t.length>e)throw new ne("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function R_(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in A$)return"<length>";if(t.unit in E$)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Qm(t,e){if(t<0)throw new ne("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function x0e(t){if(t.type!=="quantity"||t.unit!==null)throw new ne("effect:type-error",`Expected <double>, Actual: ${R_(t)}`,{term:t})}function S0e(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ne("effect:type-error",`Expected <double> or <percentage>, Actual: ${R_(t)}`,{term:t})}const E$={deg:1,grad:.9,rad:180/Math.PI,turn:360};function M0e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&E$[t.unit]!=null))throw new ne("effect:type-error",`Expected <angle>, Actual: ${R_(t)}`,{term:t})}const A$={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function $0e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&A$[t.unit]!=null))throw new ne("effect:type-error",`Expected <length>, Actual: ${R_(t)}`,{term:t})}function jo(t){S0e(t);const e=t.value;return Qm(e,t),t.unit==="%"?.01*e:e}function T0e(t){return x0e(t),Qm(t.value,t),t.value}function I0e(t){return M0e(t),t.value*E$[t.unit]||0}function k$(t){return $0e(t),t.value*A$[t.unit]||0}function E0e(t){switch(t.colorType){case"hex":return OY(t.value);case"named":return uV(t.value);case"function":return P0e(t.value)}}function uV(t){if(!YO(t))throw new ne("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return CY(t)}const A0e=/^rgba?/i,k0e=/^hsla?/i;function P0e(t){if(bf(t.parameters,4),A0e.test(t.name))return[jo(t.parameters[0]),jo(t.parameters[1]),jo(t.parameters[2]),t.parameters[3]?jo(t.parameters[3]):1];if(k0e.test(t.name))return KO(T0e(t.parameters[0]),jo(t.parameters[1]),jo(t.parameters[2]),t.parameters[3]?jo(t.parameters[3]):1);throw new ne("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function P$(t,e,i){var r;try{return O0e(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function C$(t,e,i,r){try{const n=C0e(t);ns(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function C0e(t){const e=lV(t);return e?p0e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function O0e(t){if(!t||t.length===0)return null;if(L0e(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:TS(i.value)});return e}return TS(t)}function L0e(t){const e=t[0];return!!e&&"scale"in e}function TS(t){if(!t||!t.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[el(i,"amount")];break;case"blur":r=[el(i,"radius","pt")];break;case"hue-rotate":r=[el(i,"angle","deg")];break;case"drop-shadow":r=[el(i,"xoffset","pt"),el(i,"yoffset","pt"),el(i,"blurRadius","pt"),D0e(i,"color")];break;case"bloom":r=[el(i,"strength"),el(i,"radius","pt"),el(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;lV(n),e.push(n)}return e.join(" ")}function el(t,e,i){if(t[e]==null)throw new ne("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function D0e(t,e){if(t[e]==null)throw new ne("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}function R0e(t){return typeof t=="function"}function aMe(t,e,i,r){return R0e(t)?t(e,i,r):t}function lMe(t){return[t.r,t.g,t.b,t.a]}const j0e=` /-,
`;function MA(t){let e=t.length;for(;e--;)if(!j0e.includes(t.charAt(e)))return!1;return!0}function F0e(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const l=t.substr(r,n-r);i.push([l,null,MA(l)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const l=e[t.substr(r,n-r)];l&&i.push([null,l,!1])}r=n+1}}while(n!==-1);if(r<t.length-1){const l=t.substr(r);i.push([l,null,MA(l)])}return i}function N0e(t,e,i){let r="",n=null;for(const l of e){const[d,y,v]=l;if(d)v?n=d:(n&&(r+=n,n=null),r+=d);else{const x=t.attributes[y];x&&(n&&(r+=n,n=null),r+=x)}}return z0e(r,i)}function uMe(t,e,i){const r=F0e(e,t);return n=>N0e(n,r,i)}function z0e(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function hMe(t,e,i,r,n,l,d=!0){const y=e/n,v=i/l,x=Math.ceil(y/2),$=Math.ceil(v/2);for(let E=0;E<l;E++)for(let k=0;k<n;k++){const P=4*(k+(d?l-E-1:E)*n);let D=0,L=0,N=0,B=0,W=0,q=0,Y=0;const ie=(E+.5)*v;for(let se=Math.floor(E*v);se<(E+1)*v;se++){const ue=Math.abs(ie-(se+.5))/$,de=(k+.5)*y,be=ue*ue;for(let we=Math.floor(k*y);we<(k+1)*y;we++){let $e=Math.abs(de-(we+.5))/x;const ke=Math.sqrt(be+$e*$e);ke>=-1&&ke<=1&&(D=2*ke*ke*ke-3*ke*ke+1,D>0&&($e=4*(we+se*e),Y+=D*t[$e+3],N+=D,t[$e+3]<255&&(D=D*t[$e+3]/250),B+=D*t[$e],W+=D*t[$e+1],q+=D*t[$e+2],L+=D))}}r[P]=B/L,r[P+1]=W/L,r[P+2]=q/L,r[P+3]=Y/N}}function hV(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function cV(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function IS(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function ES(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function V0e(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function x2(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const cMe=(t,e=0)=>t==null||isNaN(t)?e:t,dMe=t=>t.tintColor?hV(t.tintColor):{r:255,g:255,b:255,a:1},pMe=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function fMe(){return le(()=>import("./geometryEngineJSON-f485a277.js"),["assets/geometryEngineJSON-f485a277.js","assets/geometryEngineJSON-747fee98.js","assets/json-48e3ea08.js"])}function yMe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function mMe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function gMe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function vMe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function $A(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=$A(e);if(i!=null)return i}break;case"CIMTextSymbol":return $A(t.symbol);case"CIMSolidFill":return t.color}}function TA(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=TA(i);if(r!=null)return r}break}case"CIMTextSymbol":return TA(t.symbol);case"CIMSolidStroke":return t.color}}function IA(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=IA(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return IA(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function bMe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function wMe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function _Me(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const xMe=t=>t.includes("data:image/svg+xml");function SMe(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function dV(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(i&&t.effects)for(const n of t.effects)U0e(n,e);if(t.symbolLayers)for(const n of t.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":B0e(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":dV(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}}else t.height!=null&&(t.height*=e)}function B0e(t,e,i){if(t&&(t.markerPlacement&&G0e(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||dV(r.symbol,e,!0,i)}function G0e(t,e){switch(x2(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function U0e(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function pV(t){const e=[];return AS(cV(t),e),e.length?new Ne(hV(e[0])):null}function AS(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const l of i.symbolLayers)if(!(l.colorLocked||r&&(ES(l)||IS(l)&&l.markerPlacement&&x2(l.markerPlacement))))switch(l.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":l.tintColor&&EA(e,l.tintColor);break;case"CIMVectorMarker":(n=l.markerGraphics)==null||n.forEach(d=>{AS(d.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":EA(e,l.color);break;case"CIMHatchFill":AS(l.lineSymbol,e)}}}function EA(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function MMe(t,e,i){e instanceof Ne||(e=new Ne(e));const r=cV(t);r&&kS(r,e,i)}function kS(t,e,i){var l;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const d of r.symbolLayers){if(d.colorLocked)continue;if(n){if(i){const{layersToColor:v}=i;if((ES(d)||IS(d)&&d.markerPlacement&&x2(d.markerPlacement))&&v==="fill"||V0e(d)&&v==="outline")continue}else if(ES(d)||IS(d)&&d.markerPlacement&&x2(d.markerPlacement))continue}const y=e.toArray();switch(d.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":d.tintColor=y;break;case"CIMVectorMarker":(l=d.markerGraphics)==null||l.forEach(v=>{kS(v.symbol,e,i)});break;case"CIMSolidStroke":case"CIMSolidFill":d.color=y;break;case"CIMHatchFill":kS(d.lineSymbol,e,i)}}}const k5=-3;var Qu;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Qu||(Qu={}));let $Me=class{constructor(e,i,r){this.name=e,this._storage=i,this.id=H0e+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,r,n=0){this._storage.put(this,e,i,r,n)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this,e,i,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},q0e=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new fd,this._users=new fd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,r,n,l){i=e.id+i;const d=this._db.get(i);if(d&&(this._size-=d.size,e.size-=d.size,this._db.delete(i),d.entry!==r&&this._notifyRemove(i,d.entry,Qu.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,Qu.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const y=1+Math.max(l,k5)-k5;this._db.set(i,{entry:r,size:n,lifetime:y,lives:y}),this._size+=n,e.size+=n,this._checkSizeLimits()}updateSize(e,i,r,n){i=e.id+i;const l=this._db.get(i);if(l&&l.entry===r){for(this._size-=l.size,e.size-=l.size;n>this._maxSize;){const d=this._notifyRemove(i,r,Qu.SOME);if(!(d!=null&&d>0))return void this._db.delete(i);n=d}l.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((d,y)=>{const v=d.lifetime;r[v]=(r[v]||0)+d.size,this._users.forAll(x=>{const{id:$,name:E}=x;if(y.startsWith($)){const k=i[E]||0;i[E]=k+d.size}})});const n={};this._users.forAll(d=>{const y=d.name;if("hitRate"in d&&typeof d.hitRate=="number"&&!isNaN(d.hitRate)&&d.hitRate>0){const v=i[y]||0;i[y]=v,n[y]=Math.round(100*d.hitRate)+"%"}else n[y]="0%"});const l=Object.keys(i);l.sort((d,y)=>i[y]-i[d]),l.forEach(d=>e[d]=Math.round(i[d]/2**20)+"MB / "+n[d]);for(let d=r.length-1;d>=0;--d){const y=r[d];y&&(e["Priority "+(d+k5-1)]=Math.round(y/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,Qu.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,Qu.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let n;return this._removeFuncs.some(l=>{if(e.startsWith(l[0])){const d=l[1](i,r);return typeof d=="number"&&(n=d),!0}return!1}),n}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,r]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,r,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,r=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,Qu.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},H0e=0,fV=class{constructor(e,i){this._storage=new q0e,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}};const yV="picture-fill",mV="simple-fill",W0e="simple-line",gV="simple-marker",J0e="text",Y0e="cim",P5=new fV(1e3);function AMe(t){const e=t.style;let i=null;if(t)switch(t.type){case gV:e!=="cross"&&e!=="x"&&(i=t.color);break;case mV:e==="solid"?i=t.color:e!=="none"&&(i={type:"pattern",x:0,y:0,src:Et(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case yV:i={type:"pattern",src:t.url,width:Vr(t.width)*t.xscale,height:Vr(t.height)*t.yscale,x:Vr(t.xoffset),y:Vr(t.yoffset)};break;case J0e:i=t.color;break;case Y0e:i=pV(t)}return i}function K0e(t,e){const i=t+"-"+e;return P5.get(i)!==void 0?Promise.resolve(P5.get(i)):Ht(t,{responseType:"image"}).then(r=>{const n=r.data,l=n.naturalWidth,d=n.naturalHeight,y=document.createElement("canvas");y.width=l,y.height=d;const v=y.getContext("2d");v.fillStyle=e,v.fillRect(0,0,l,d),v.globalCompositeOperation="destination-in",v.drawImage(n,0,0);const x=y.toDataURL();return P5.put(i,x),x})}function O$(t){if(!t)return null;let e=null;switch(t.type){case mV:case yV:case gV:e=O$(t.outline);break;case W0e:{const i=Vr(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:L$(t.style),width:i,cap:t.cap,join:t.join==="miter"?Vr(t.miterLimit):t.join});break}default:e=null}return e}const L$=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),Z0e=new Ne([128,128,128]),X0e=new Ne("white");function Q0e(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function kMe(t){var e;if(!t)return 0;if(Wl(t)){const i=Q0e(t);return i??0}return Ba((e=O$(t))==null?void 0:e.width)}function efe(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function tfe(t){return br(t.resource).href}function hp(t,e){if(!t)return null;let i=null;return Wl(t)?i=ife(t):v_(t)&&(i=t.type==="cim"?pV(t):t.color?new Ne(t.color):null),i?vm(i,e):null}function ife(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Ne(i):null}function vm(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Ne(i)}function rfe(t,e,i){const r=t.symbolLayers;if(!r)return;const n=l=>vm(e=e??l??(i!=null?X0e:null),i);r.forEach(l=>{var d;if(l.type!=="object"||!((d=l.resource)!=null&&d.href)||e)if(l.type==="water")l.color=n(l.color);else{const y=l.material!=null?l.material.color:null,v=n(y);l.material==null?l.material=new mn({color:v}):l.material.color=v,i!=null&&"outline"in l&&l.outline!=null&&l.outline.color!=null&&(l.outline.color=vm(l.outline.color,i))}})}function sfe(t,e,i){(e=e??t.color)&&(t.color=vm(e,i)),i!=null&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=vm(t.outline.color,i))}function C5(t,e,i){t&&(e||i!=null)&&(e&&(e=new Ne(e)),Wl(t)?rfe(t,e,i):v_(t)&&sfe(t,e,i))}async function nfe(t,e){const i=t.symbolLayers;i&&await tW(i,async r=>ofe(r,e))}async function ofe(t,e){switch(t.type){case"extrude":lfe(t,e);break;case"icon":case"line":case"text":afe(t,e);break;case"path":hfe(t,e);break;case"object":await ufe(t,e)}}function afe(t,e){const i=vV(e);i!=null&&(t.size=i)}function vV(t){for(const e of t)if(typeof e=="number")return e;return null}function lfe(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function ufe(t,e){const{resourceSize:i,symbolSize:r}=await cfe(t),n=bV(e,i,r);t.width=P1(e[0],r[0],i[0],n),t.depth=P1(e[1],r[1],i[1],n),t.height=P1(e[2],r[2],i[2],n)}function hfe(t,e){const i=bV(e,iL,[t.width,void 0,t.height]);t.width=P1(e[0],t.width,1,i),t.height=P1(e[2],t.height,1,i)}function bV(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const l=i[r];return l!=null?l/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return 1}async function cfe(t){const{computeObjectLayerResourceSize:e}=await le(()=>import("./symbolLayerUtils-4d53700b.js"),[]),i=await e(t,10),{width:r,height:n,depth:l}=t,d=[r,l,n];let y=1;for(let v=0;v<3;v++){const x=d[v];if(x!=null){y=x/i[v];break}}for(let v=0;v<3;v++)d[v]==null&&(d[v]=i[v]*y);return{resourceSize:i,symbolSize:d}}function P1(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function dfe(t,e){const i=vV(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function pfe(t,e){if(t&&e)return Wl(t)?nfe(t,e):void(v_(t)&&dfe(t,e))}function ffe(t,e,i){if(t&&e!=null)if(Wl(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=e;break;case"roll":n.roll=e;break;default:n.heading=e}})}else v_(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}function wV(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return TS(e)}async function yfe(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}const mfe="<",gfe=">",vfe=i0("short-date");function bfe(t,e,i,r){let n="";e===0?n=`${mfe} `:e===i&&(n=`${gfe} `);let l=null;return l=r?Zn(t,vfe):Zpe(t),n+l}const PMe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function wfe(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(d=>d.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:l}=await le(()=>Promise.resolve().then(()=>q_),void 0);return l(e,n)??null}async function CMe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await wfe(t)||t.color;return new gn({cap:i,color:n,width:r})}function OMe(t){return t!=null&&typeof t=="object"&&"min"in t&&"max"in t}const _fe=new Ne([64,64,64]);function _V(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,l)=>i.includes(l)?bfe(n,l,r,e):null)}async function xfe(t,e,i){let r=!1,n=[],l=[];if(t.stops){const x=t.stops;n=x.map($=>$.value),r=x.some($=>!!$.label),r&&(l=x.map($=>$.label))}const d=n[0],y=n[n.length-1];if(d==null&&y==null)return null;const v=r?null:_V(n,i??!1);return(await Promise.all(n.map(async(x,$)=>({value:x,color:t.type==="opacity"?await Sfe(x,t,e):(await le(()=>Promise.resolve().then(()=>q_),void 0)).getColor(t,x),label:r?l[$]:(v==null?void 0:v[$])??""})))).reverse()}async function Sfe(t,e,i){const r=new Ne(i??_fe),n=(await le(()=>Promise.resolve().then(()=>q_),void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function LMe(t){let e=!1,i=[],r=[];i=t.map(y=>y.value),e=t.some(y=>!!y.label),e&&(r=t.map(y=>y.label??""));const n=i[0],l=i[i.length-1];if(n==null&&l==null)return null;const d=e?null:_V(i,!1);return i.map((y,v)=>({value:y,color:Mfe(y,t),label:e?r[v]:(d==null?void 0:d[v])??""})).reverse()}function Mfe(t,e){const{startIndex:i,endIndex:r,weight:n}=$fe(t,e);if(i===r)return e[i].color;const l=Ne.blendColors(e[i].color,e[r].color,n);return new Ne(l)}function $fe(t,e){let i=0,r=e.length-1;return e.some((n,l)=>t<n.value?(r=l,!0):(i=l,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function DMe(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new Ne(r.toColor),label:"high"}):i.push({value:null,color:new Ne(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new Ne(r.fromColor),label:"low"}):i.push({value:null,color:new Ne(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new Ne(n),label:"high"},{value:e.min,color:new Ne(r),label:"low"}]}return i}var PS;let By=PS=class extends ge{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new PS({color:this.color,ratio:this.ratio})}};g([S({type:Ne,json:{type:[Lt],default:null,write:!0}})],By.prototype,"color",void 0),g([S({type:Number,json:{write:!0}})],By.prototype,"ratio",void 0),By=PS=g([J("esri.renderers.support.HeatmapColorStop")],By);const C1=By;function Tfe(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new C1({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var d,y;let l="";return n===0?l=((d=t.legendOptions)==null?void 0:d.minLabel)||"low":n===i&&(l=((y=t.legendOptions)==null?void 0:y.maxLabel)||"high"),{color:r.color,label:l,ratio:r.ratio}}).reverse()}ve.getLogger("esri.renderers.support.utils");async function Ws(t,e,i){xM(t,e,()=>[]).push(...i)}async function Ife(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const n=t.visualVariables.filter(l=>l.type==="color");for(const l of n){const d=(await xfe(l)??[]).map(y=>y.color);await Ws(e,l.field||l.valueExpression,d)}}if(t.type==="heatmap"){const n=Tfe(t).map(l=>l.color);await Ws(e,t.field||t.valueExpression,n)}else if(t.type==="pie-chart"){for(const n of t.attributes)await Ws(e,n.field||n.valueExpression,[n.color]);await Ws(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,hp(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const n of t.attributes)await Ws(e,n.field||n.valueExpression,[n.color]);await Ws(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of t.uniqueValueInfos??[])await Ws(e,n.value.toString(),[hp(n.symbol,null)]);else{const n=(t.uniqueValueInfos??[]).map(x=>hp(x.symbol,null)),{field:l,field2:d,field3:y,valueExpression:v}=t;(l||v)&&await Ws(e,l||v,n),d&&await Ws(e,d,n),y&&await Ws(e,y,n)}else if(t.type==="class-breaks"){const n=t.classBreakInfos.map(y=>hp(y.symbol,null)),{field:l,valueExpression:d}=t;await Ws(e,l??d,n)}else t.type==="simple"&&await Ws(e,"default",[hp(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Ws(e,"default",[hp(t.defaultSymbol,null)]),e.forEach((n,l)=>{const d=QU(n.filter(Boolean),(y,v)=>JSON.stringify(y)===JSON.stringify(v));e.set(l,d)}),e}var CS;let Gy=CS=class extends ge{constructor(t){super(t),this.name=null,this.code=null}clone(){return new CS({name:this.name,code:this.code})}};g([S({type:String,json:{write:!0}})],Gy.prototype,"name",void 0),g([S({type:[String,Number],json:{write:!0}})],Gy.prototype,"code",void 0),Gy=CS=g([J("esri.layers.support.CodedValue")],Gy);const Efe=new xt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Uy=class extends ge{constructor(e){super(e),this.name=null,this.type=null}};g([S({type:String,json:{write:!0}})],Uy.prototype,"name",void 0),g([Ue(Efe)],Uy.prototype,"type",void 0),Uy=g([J("esri.layers.support.Domain")],Uy);const j_=Uy;var OS;let qy=OS=class extends j_{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new OS({codedValues:ae(this.codedValues),name:this.name})}};g([S({type:[Gy],json:{write:!0}})],qy.prototype,"codedValues",void 0),g([Ue({codedValue:"coded-value"})],qy.prototype,"type",void 0),qy=OS=g([J("esri.layers.support.CodedValueDomain")],qy);const xV=qy;var LS;let Sb=LS=class extends j_{constructor(t){super(t),this.type="inherited"}clone(){return new LS}};g([Ue({inherited:"inherited"})],Sb.prototype,"type",void 0),Sb=LS=g([J("esri.layers.support.InheritedDomain")],Sb);const SV=Sb;var DS;let jp=DS=class extends j_{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new DS({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};g([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],jp.prototype,"maxValue",void 0),g([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],jp.prototype,"minValue",void 0),g([Ue({range:"range"})],jp.prototype,"type",void 0),jp=DS=g([J("esri.layers.support.RangeDomain")],jp);const MV=jp,$V={key:"type",base:j_,typeMap:{range:MV,"coded-value":xV,inherited:SV}};function D$(t){if(!t||!t.type)return null;switch(t.type){case"range":return MV.fromJSON(t);case"codedValue":return xV.fromJSON(t);case"inherited":return SV.fromJSON(t)}return null}const Afe=new xt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var RS;const kfe=new xt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let es=RS=class extends ge{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?kfe.fromJSON(i.fieldValueType):null}clone(){return new RS({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};g([S({type:String,json:{write:!0}})],es.prototype,"alias",void 0),g([S({type:[String,Number],json:{write:{allowNull:!0}}})],es.prototype,"defaultValue",void 0),g([S()],es.prototype,"description",void 0),g([xe("description")],es.prototype,"readDescription",null),g([S({types:$V,json:{read:{reader:D$},write:!0}})],es.prototype,"domain",void 0),g([S({type:Boolean,json:{write:!0}})],es.prototype,"editable",void 0),g([S({type:Lt,json:{write:!0}})],es.prototype,"length",void 0),g([S({type:String,json:{write:!0}})],es.prototype,"name",void 0),g([S({type:Boolean,json:{write:!0}})],es.prototype,"nullable",void 0),g([Ue(Afe)],es.prototype,"type",void 0),g([S()],es.prototype,"valueType",void 0),g([xe("valueType",["description"])],es.prototype,"readValueType",null),g([S({type:Boolean,json:{read:!1}})],es.prototype,"visible",void 0),es=RS=g([J("esri.layers.support.Field")],es);const F_=es;var jS;let kl=jS=class extends ge{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new jS({mapLayerId:t,gdbVersion:e})}};g([Ue({mapLayer:"map-layer"})],kl.prototype,"type",void 0),g([S({type:Lt,json:{write:!0}})],kl.prototype,"mapLayerId",void 0),g([S({type:String,json:{write:!0}})],kl.prototype,"gdbVersion",void 0),kl=jS=g([J("esri.layers.support.source.MapLayerSource")],kl);var FS;let yl=FS=class extends ge{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,l={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new FS(l)}};g([Ue({queryTable:"query-table"})],yl.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],yl.prototype,"workspaceId",void 0),g([S({type:String,json:{write:!0}})],yl.prototype,"query",void 0),g([S({type:String,json:{write:!0}})],yl.prototype,"oidFields",void 0),g([S({type:ut,json:{write:!0}})],yl.prototype,"spatialReference",void 0),g([Ue(Ew)],yl.prototype,"geometryType",void 0),yl=FS=g([J("esri.layers.support.source.QueryTableDataSource")],yl);var NS;let Fp=NS=class extends ge{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new NS({workspaceId:t,dataSourceName:e})}};g([Ue({raster:"raster"})],Fp.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Fp.prototype,"dataSourceName",void 0),g([S({type:String,json:{write:!0}})],Fp.prototype,"workspaceId",void 0),Fp=NS=g([J("esri.layers.support.source.RasterDataSource")],Fp);var zS;let Dc=zS=class extends ge{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new zS({workspaceId:t,gdbVersion:e,dataSourceName:i})}};g([Ue({table:"table"})],Dc.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Dc.prototype,"workspaceId",void 0),g([S({type:String,json:{write:!0}})],Dc.prototype,"gdbVersion",void 0),g([S({type:String,json:{write:!0}})],Dc.prototype,"dataSourceName",void 0),Dc=zS=g([J("esri.layers.support.source.TableDataSource")],Dc);var VS,BS;const Pfe=as()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Zs=VS=class extends ge{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return AA()(t,e,i)}castLeftTableSource(t){return Fa(GS(),t)}readRightTableSource(t,e,i){return AA()(t,e,i)}castRightTableSource(t){return Fa(GS(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,l={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new VS(l)}};g([Ue({joinTable:"join-table"})],Zs.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Zs.prototype,"leftTableKey",void 0),g([S({type:String,json:{write:!0}})],Zs.prototype,"rightTableKey",void 0),g([S({json:{write:!0}})],Zs.prototype,"leftTableSource",void 0),g([xe("leftTableSource")],Zs.prototype,"readLeftTableSource",null),g([St("leftTableSource")],Zs.prototype,"castLeftTableSource",null),g([S({json:{write:!0}})],Zs.prototype,"rightTableSource",void 0),g([xe("rightTableSource")],Zs.prototype,"readRightTableSource",null),g([St("rightTableSource")],Zs.prototype,"castRightTableSource",null),g([Ue(Pfe)],Zs.prototype,"joinType",void 0),Zs=VS=g([J("esri.layers.support.source.JoinTableDataSource")],Zs);let O5=null;function AA(){return O5||(O5=rf({types:GS()})),O5}let L5=null;function GS(){return L5||(L5={key:"type",base:null,typeMap:{"data-layer":ws,"map-layer":kl}}),L5}const Cfe={key:"type",base:null,typeMap:{"join-table":Zs,"query-table":yl,raster:Fp,table:Dc}};let ws=BS=class extends ge{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new BS({fields:t,dataSource:e})}};g([Ue({dataLayer:"data-layer"})],ws.prototype,"type",void 0),g([S({type:[F_],json:{write:!0}})],ws.prototype,"fields",void 0),g([S({types:Cfe,json:{write:!0}})],ws.prototype,"dataSource",void 0),ws=BS=g([J("esri.layers.support.source.DataLayerSource")],ws),ws.from=Di(ws);function Ofe(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Yh(t){return typeof t=="string"?Wi(t):ae(t)}function TV(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const l=t[n];if(l!=null&&typeof l!="function")if(Array.isArray(l)){r[n]=[];for(let d=0;d<l.length;d++)r[n][d]=TV(l[d])}else if(typeof l=="object")if(l.toJSON){const d=l.toJSON(i&&i[n]);r[n]=e?d:JSON.stringify(d)}else r[n]=e?l:JSON.stringify(l);else r[n]=l}return r}const sv={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new cn({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ut.WebMercator}),minus180Line:new cn({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ut.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new cn({paths:[[[180,-180],[180,180]]],spatialReference:ut.WGS84}),minus180Line:new cn({paths:[[[-180,-180],[-180,180]]],spatialReference:ut.WGS84})}};function cd(t,e){return Math.ceil((t-e)/(2*e))}function IV(t,e){const i=O1(t);for(const r of i)for(const n of r)n[0]+=e;return t}function O1(t){return md(t)?t.rings:t.paths}async function Lfe(t,e,i,r){const n=Yh(t),l=e[0].spatialReference,d={...r,query:{...n.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:Pm(e[0]),geometries:e}),cutter:JSON.stringify(i)}},y=await Ht(n.path+"/cut",d),{cutIndexes:v,geometries:x=[]}=y.data;return{cutIndexes:v,geometries:x.map($=>{const E=Ul($);return E.spatialReference=l,E})}}function Dfe(t){return{geometryType:Pm(t[0]),geometries:t.map(e=>e.toJSON())}}function Rfe(t,e,i){const r=HZ(e);return t.map(n=>{const l=r.fromJSON(n);return l.spatialReference=i,l})}async function jfe(t,e,i){const r=typeof t=="string"?Wi(t):t,n=e[0].spatialReference,l=Pm(e[0]),d={...i,query:{...r.query,f:"json",sr:n.wkid??JSON.stringify(n),geometries:JSON.stringify(Dfe(e))}},{data:y}=await Ht(r.path+"/simplify",d);return Rfe(y.geometries,l,n)}const EV=ve.getLogger("esri.geometry.support.normalizeUtils");function Ffe(t){return t.type==="polygon"}function Nfe(t){return t[0].type==="polygon"}function zfe(t){return t[0].type==="polyline"}function Vfe(t,e){if(!(t instanceof cn||t instanceof Va)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw EV.error(n),new ne(n)}const i=O1(t),r=[];for(const n of i){const l=[];r.push(l),l.push([n[0][0],n[0][1]]);for(let d=0;d<n.length-1;d++){const y=n[d][0],v=n[d][1],x=n[d+1][0],$=n[d+1][1],E=Math.sqrt((x-y)*(x-y)+($-v)*($-v)),k=($-v)/E,P=(x-y)/E,D=E/e;if(D>1){for(let W=1;W<=D-1;W++){const q=W*e,Y=P*q+y,ie=k*q+v;l.push([Y,ie])}const L=(E+Math.floor(D-1)*e)/2,N=P*L+y,B=k*L+v;l.push([N,B])}l.push([x,$])}}return Ffe(t)?new Va({rings:r,spatialReference:t.spatialReference}):new cn({paths:r,spatialReference:t.spatialReference})}function kA(t,e,i){if(e){const r=Vfe(t,1e6);t=t0(r,!0)}return i&&(t=IV(t,i)),t}function PA(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=cd(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=cd(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=cd(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=cd(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function Bfe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],l=e.geometries[r],d=O1(l);for(let y=0;y<d.length;y++){const v=d[y];v.some(x=>{if(x[0]<180)return!0;{let $=0;for(let k=0;k<v.length;k++){const P=v[k][0];$=P>$?P:$}$=Number($.toFixed(9));const E=-360*cd($,180);for(let k=0;k<v.length;k++){const P=l.getPoint(y,k);l.setPoint(y,k,P.clone().offset(E,0))}return!0}})}if(n===i){if(Nfe(t))for(const y of O1(l))t[n]=t[n].addRing(y);else if(zfe(t))for(const y of O1(l))t[n]=t[n].addPath(y)}else i=n,t[n]=l}return t}async function R$(t,e,i){if(!Array.isArray(t))return R$([t],e);e&&typeof e!="string"&&EV.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Vt.geometryServiceUrl;let n,l,d,y,v,x,$,E,k=0;const P=[],D=[];for(const Y of t)if(Y!=null)if(n||(n=Y.spatialReference,l=Uo(n),d=n.isWebMercator,x=d?102100:4326,y=sv[x].maxX,v=sv[x].minX,$=sv[x].plus180Line,E=sv[x].minus180Line),l)if(Y.type==="mesh")D.push(Y);else if(Y.type==="point")D.push(PA(Y.clone(),y,v));else if(Y.type==="multipoint"){const ie=Y.clone();ie.points=ie.points.map(se=>PA(se,y,v)),D.push(ie)}else if(Y.type==="extent"){const ie=Y.clone()._normalize(!1,!1,l);D.push(ie.rings?new Va(ie):ie)}else if(Y.extent){const ie=Y.extent,se=cd(ie.xmin,v)*(2*y);let ue=se===0?Y.clone():IV(Y.clone(),se);ie.offset(se,0),ie.intersects($)&&ie.xmax!==y?(k=ie.xmax>k?ie.xmax:k,ue=kA(ue,d),P.push(ue),D.push("cut")):ie.intersects(E)&&ie.xmin!==v?(k=ie.xmax*(2*y)>k?ie.xmax*(2*y):k,ue=kA(ue,d,360),P.push(ue),D.push("cut")):D.push(ue)}else D.push(Y.clone());else D.push(Y);else D.push(Y);let L=cd(k,y),N=-90;const B=L,W=new cn;for(;L>0;){const Y=360*L-180;W.addPath([[Y,N],[Y,-1*N]]),N*=-1,L--}if(P.length>0&&B>0){const Y=Bfe(P,await Lfe(r,P,W,i)),ie=[],se=[];for(let be=0;be<D.length;be++){const we=D[be];if(we!=="cut")se.push(we);else{const $e=Y.shift(),ke=t[be];ke!=null&&ke.type==="polygon"&&ke.rings&&ke.rings.length>1&&$e.rings.length>=ke.rings.length?(ie.push($e),se.push("simplify")):se.push(d?xh($e):$e)}}if(!ie.length)return se;const ue=await jfe(r,ie,i),de=[];for(let be=0;be<se.length;be++){const we=se[be];we!=="simplify"?de.push(we):de.push(d?xh(ue.shift()):ue.shift())}return de}const q=[];for(let Y=0;Y<D.length;Y++){const ie=D[Y];if(ie!=="cut")q.push(ie);else{const se=P.shift();q.push(d===!0?xh(se):se)}}return q}function jMe(t,e){const i=Uo(e);if(i){const[r,n]=i.valid,l=n-r;if(t<r)for(;t<r;)t+=l;if(t>n)for(;t>n;)t-=l}return t}function AV(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let n=0;n<r.length;n++)e[i][n]=AV(r[n])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}var eh;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(eh||(eh={}));const CA=4294967296,Gfe=new TextDecoder("utf-8"),Ufe=ce("safari")||ce("ios")?6:ce("ff")?12:32;let US=class Mb{constructor(e,i,r=0,n=e?e.byteLength:0){this._tag=0,this._dataType=eh.unknown,this._init(e,i,r,n)}_init(e,i,r,n){this._data=e,this._dataView=i,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new Mb(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*CA;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*CA;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,n){const l=this.getMessage(),d=e(l,i,r,n);return l.release(),d}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=Mb.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){Mb.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case eh.varint:this._decodeVarint();break;case eh.fixed64:this._skip(8);break;case eh.delimited:this._skip(this._getLength());break;case eh.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=e[i++],r|=127&n,(128&n)==0||(n=e[i++],r|=(127&n)<<7,(128&n)==0)||(n=e[i++],r|=(127&n)<<14,(128&n)==0)||(n=e[i++],r|=(127&n)<<21,(128&n)==0)||(n=e[i++],r+=268435456*(127&n),(128&n)==0)||(n=e[i++],r+=34359738368*(127&n),(128&n)==0)||(n=e[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=e[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=e[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=e[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let l=1;for(;i!==this._end&&(n=e[i],(128&n)!=0);)++i,r+=(127&n)*l,l*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*l}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i=this._pos,r=0,n=0;const l=1&e[i];if(this._end-i>=10)do{if(n=e[i++],r|=127&n,(128&n)==0||(n=e[i++],r|=(127&n)<<7,(128&n)==0)||(n=e[i++],r|=(127&n)<<14,(128&n)==0)||(n=e[i++],r|=(127&n)<<21,(128&n)==0)||(n=e[i++],r+=268435456*(127&n),(128&n)==0)||(n=e[i++],r+=34359738368*(127&n),(128&n)==0)||(n=e[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=e[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=e[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=e[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;i!==this._end&&(n=e[i],(128&n)!=0);)++i,r+=(127&n)*d,d*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*d}return this._pos=i,l?-(r+1)/2:r/2}_getLength(){if(this._dataType!==eh.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>Ufe){const d=e.subarray(i,r);return Gfe.decode(d)}let n="",l="";for(let d=i;d<r;++d){const y=e[d];128&y?l+="%"+y.toString(16):(n+=decodeURIComponent(l)+String.fromCharCode(y),l="")}return l.length&&(n+=decodeURIComponent(l)),n}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}};US.pool=new Nh(US,void 0,t=>{t._data=null,t._dataView=null});let ea=class $b{constructor(e=[],i=[],r=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[i,r,n,l]=e,d=n-i,y=l-r;return new $b([5],[i,r,d,0,0,y,-d,0,0,-y])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let l=0;l<n;l++)e(this.coords[2*(l+i)],this.coords[2*(l+i)+1]);i+=n}}clone(e){return e?(e.set(this.coords),new $b(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new $b(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Rh=class kV{constructor(e=null,i={},r,n){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new kV(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function qfe(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let FMe=class extends Rh{},PV=class CV{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new CV;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const OV=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let zMe=class{constructor(e){this._options=e,this.geometryTypes=OV,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new PV}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Ji(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=R0(this._options.sourceSpatialReference)/R0(e.spatialReference);if(i!==1)for(const r of e.features){if(!qfe(r))continue;const n=r.geometry.coords;for(let l=2;l<n.length;l+=3)n[l]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Rh}createSpatialReference(){return{wkid:0}}createGeometry(){return new ea}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new ea}};const OA=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],LA=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],DA=["upperLeft","lowerLeft"];function RA(t){return t>=OA.length?null:OA[t]}function Hfe(t){return t>=LA.length?null:LA[t]}function jA(t){return t>=DA.length?null:DA[t]}function FA(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Wfe(t,e,i){const n=t.asUnsafe(),l=e.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const d=n.getUInt32(),y=n.pos()+d;let v=0;for(;n.pos()<y;)e.addCoordinatePoint(l,n.getSInt64(),v++);break}default:n.skip()}return l}function Jfe(t,e,i){const l=t.asUnsafe(),d=e.createGeometry(i),y=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;l.next();)switch(l.tag()){case 2:{const v=l.getUInt32(),x=l.pos()+v;let $=0;for(;l.pos()<x;)e.addLength(d,l.getUInt32(),$++);break}case 3:{const v=l.getUInt32(),x=l.pos()+v;let $=0;for(e.allocateCoordinates(d);l.pos()<x;)e.addCoordinate(d,l.getSInt64(),$),$++,$===y&&($=0);break}default:l.skip()}return d}function Yfe(t){const n=t.asUnsafe(),l=new ea;let d="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const y=n.getUInt32(),v=n.pos()+y;for(;n.pos()<v;)l.lengths.push(n.getUInt32());break}case 3:{const y=n.getUInt32(),v=n.pos()+y;for(;n.pos()<v;)l.coords.push(n.getSInt64());break}case 1:d=OV[n.getEnum()];break;default:n.skip()}return{queryGeometry:l,queryGeometryType:d}}function Kfe(t){const $=t.asUnsafe();for(;$.next();)switch($.tag()){case 1:return $.getString();case 2:return $.getFloat();case 3:return $.getDouble();case 4:return $.getSInt32();case 5:return $.getUInt32();case 6:return $.getInt64();case 7:return $.getUInt64();case 8:return $.getSInt64();case 9:return $.getBool();default:return $.skip(),null}return null}function Zfe(t){const y=t.asUnsafe(),v={type:RA(0)};for(;y.next();)switch(y.tag()){case 1:v.name=y.getString();break;case 2:v.type=RA(y.getEnum());break;case 3:v.alias=y.getString();break;case 4:v.sqlType=Hfe(y.getEnum());break;case 5:y.skip();break;case 6:v.defaultValue=y.getString();break;default:y.skip()}return v}function Xfe(t){const r={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function Qfe(t,e,i,r){const y=e.createFeature(i);let v=0;for(;t.next();)switch(t.tag()){case 1:{const x=r[v++].name;y.attributes[x]=t.processMessage(Kfe);break}case 2:y.geometry=t.processMessageWithArgs(Jfe,e,i);break;case 4:y.centroid=t.processMessageWithArgs(Wfe,e,i);break;default:t.skip()}return y}function eye(t){const l=[1,1,1,1],d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:l[0]=d.getDouble();break;case 2:l[1]=d.getDouble();break;case 4:l[2]=d.getDouble();break;case 3:l[3]=d.getDouble();break;default:d.skip()}return l}function tye(t){const l=[0,0,0,0],d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:l[0]=d.getDouble();break;case 2:l[1]=d.getDouble();break;case 4:l[2]=d.getDouble();break;case 3:l[3]=d.getDouble();break;default:d.skip()}return l}function iye(t){const n={originPosition:jA(0)},l=t.asUnsafe();for(;l.next();)switch(l.tag()){case 1:n.originPosition=jA(l.getEnum());break;case 2:n.scale=l.processMessage(eye);break;case 3:n.translate=l.processMessage(tye);break;default:l.skip()}return n}function rye(t){const n={},l=t.asUnsafe();for(;l.next();)switch(l.tag()){case 1:n.shapeAreaFieldName=l.getString();break;case 2:n.shapeLengthFieldName=l.getString();break;case 3:n.units=l.getString();break;default:l.skip()}return n}function sye(t,e){const y=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:y.wkid=t.getUInt32();break;case 5:y.wkt=t.getString();break;case 2:y.latestWkid=t.getUInt32();break;case 3:y.vcsWkid=t.getUInt32();break;case 4:y.latestVcsWkid=t.getUInt32();break;default:t.skip()}return y}function nye(t,e){const L=e.createFeatureResult(),N=t.asUnsafe();L.geometryType=FA(e,0);let B=!1;for(;N.next();)switch(N.tag()){case 1:L.objectIdFieldName=N.getString();break;case 3:L.globalIdFieldName=N.getString();break;case 4:L.geohashFieldName=N.getString();break;case 5:L.geometryProperties=N.processMessage(rye);break;case 7:L.geometryType=FA(e,N.getEnum());break;case 8:L.spatialReference=N.processMessageWithArgs(sye,e);break;case 10:L.hasZ=N.getBool();break;case 11:L.hasM=N.getBool();break;case 12:L.transform=N.processMessage(iye);break;case 9:{const W=N.getBool();L.exceededTransferLimit=W;break}case 13:e.addField(L,N.processMessage(Zfe));break;case 15:B||(e.prepareFeatures(L),B=!0),e.addFeature(L,N.processMessageWithArgs(Qfe,e,L,L.fields));break;case 2:L.uniqueIdField=N.processMessage(Xfe);break;default:N.skip()}return e.finishFeatureResult(L),L}function oye(t,e){const n={};let l=null;for(;t.next();)switch(t.tag()){case 4:l=t.processMessageWithArgs(Yfe);break;case 1:n.featureResult=t.processMessageWithArgs(nye,e);break;default:t.skip()}return l!=null&&n.featureResult&&e.addQueryGeometry(n,l),n}function aye(t,e){try{const r=new US(new Uint8Array(t),new DataView(t)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(oye,e):r.skip();return n}catch(i){throw new ne("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function lye(t,e){const i=aye(t,e),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,l=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const d=r.objectIdFieldName;for(const y of r.features)y.attributes&&(y.objectId=y.attributes[d])}return r&&(r.queryGeometry=n,r.queryGeometryType=l),r}function qS(t,e,i){if(!i||!i.features||!i.hasZ)return;const r=G7(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}const NA="Layer does not support extent calculation.";function uye(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function hye(t,e){const i=t.geometry,r=t.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let l,d,y;if(i!=null&&(d=i.spatialReference,y=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=Pm(i),n.geometry=uye(i,t.compactGeometryEnabled),n.inSR=y),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),l=t.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,l=d),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(n.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&d!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&d.equals(t.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const v=r.timeExtent,{start:x,end:$}=v;x==null&&$==null||(n.time=x===$?x:`${x??"null"},${$??"null"}`),delete r.timeExtent}return t.defaultSpatialReferenceEnabled&&d!=null&&l!=null&&d.equals(l)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function cye(t,e,i,r){const n=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await eg(t,e,"json",r);return qS(e,i,n.data),n}async function dye(t,e,i,r){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await pye(t,e,r),l=n;return l.data=lye(n.data,i),l}function pye(t,e,i){return eg(t,e,"pbf",i)}function fye(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):eg(t,e,"json",i,{returnIdsOnly:!0})}function yye(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):eg(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function mye(t,e,i){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await eg(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(NA);if(n.hasOwnProperty("count"))throw new Error(NA);return r}async function eg(t,e,i,r={},n={}){const l=typeof t=="string"?Wi(t):t,d=e.geometry?[e.geometry]:[];r.responseType=i==="pbf"?"array-buffer":"json";const y=await R$(d,null,r),v=y&&y[0];v!=null&&((e=e.clone()).geometry=v);const x=AV({...l.query,f:i,...n,...hye(e,n)});return Ht(Gl(l.path,gye(e,n)?"query3d":"query"),{...r,query:{...x,...r.query}})}function gye(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}var HS;const WS=new xt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Er=HS=class extends ge{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=ut.fromJSON(e.spatialReference),r=[];for(let n=0;n<t.length;n++){const l=t[n],d=ur.fromJSON(l),y=l.geometry&&l.geometry.spatialReference;d.geometry==null||y||(d.geometry.spatialReference=i);const v=l.aggregateGeometries,x=d.aggregateGeometries;if(v&&x!=null)for(const $ in x){const E=x[$],k=v[$],P=k==null?void 0:k.spatialReference;E==null||P||(E.spatialReference=i)}r.push(d)}return r}writeGeometryType(t,e,i,r){if(t)return void WS.write(t,e,i,r);const{features:n}=this;if(n){for(const l of n)if(l&&l.geometry!=null)return void WS.write(l.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Ul(t);return r&&!i&&e.spatialReference&&(r.spatialReference=ut.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new HS(this.cloneProperties())}cloneProperties(){return ae({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t&&t[i];r.geometry=n&&n.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,l=x=>Math.round((x-r)/e),d=x=>Math.round((n-x)/i),y=this.features,v=this._getQuantizationFunction(this.geometryType,l,d);for(let x=0,$=y.length;x<$;x++)v!=null&&v(y[x].geometry)||(y.splice(x,1),x--,$--);return this.transform=t,this}unquantize(){var k,P;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[l,d]}=i,y=D=>D*l+r,v=D=>n-D*d;let x=null,$=null;if(this.hasZ&&((k=i==null?void 0:i.scale)==null?void 0:k[2])!=null){const{translate:[,,D],scale:[,,L]}=i;x=N=>N*L+D}if(this.hasM&&((P=i==null?void 0:i.scale)==null?void 0:P[3])!=null){const{translate:[,,,D],scale:[,,,L]}=i;$=N=>N==null?N:N*L+D}const E=this._getHydrationFunction(t,y,v,x,$);for(const{geometry:D}of e)D!=null&&E&&E(D);return this.transform=null,this}_quantizePoints(t,e,i){let r,n;const l=[];for(let d=0,y=t.length;d<y;d++){const v=t[d];if(d>0){const x=e(v[0]),$=i(v[1]);x===r&&$===n||(l.push([x-r,$-n]),r=x,n=$)}else r=e(v[0]),n=i(v[1]),l.push([r,n])}return l.length>0?l:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=md(r)?r.rings:r.paths,l=[];for(let d=0,y=n.length;d<y;d++){const v=n[d],x=this._quantizePoints(v,e,i);x&&l.push(x)}return l.length>0?(md(r)?r.rings=l:r.paths=l,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?l=>{l.x=e(l.x),l.y=i(l.y),r&&(l.z=r(l.z))}:t==="polyline"||t==="polygon"?l=>{const d=md(l)?l.rings:l.paths;let y,v;for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];k>0?(y+=D[0],v+=D[1]):(y=D[0],v=D[1]),D[0]=e(y),D[1]=i(v)}}if(r&&n)for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];D[2]=r(D[2]),D[3]=n(D[3])}}else if(r)for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];D[2]=r(D[2])}}else if(n)for(let x=0,$=d.length;x<$;x++){const E=d[x];for(let k=0,P=E.length;k<P;k++){const D=E[k];D[2]=n(D[2])}}}:t==="extent"?l=>{l.xmin=e(l.xmin),l.ymin=i(l.ymin),l.xmax=e(l.xmax),l.ymax=i(l.ymax),r&&l.zmax!=null&&l.zmin!=null&&(l.zmax=r(l.zmax),l.zmin=r(l.zmin)),n&&l.mmax!=null&&l.mmin!=null&&(l.mmax=n(l.mmax),l.mmin=n(l.mmin))}:t==="multipoint"?l=>{const d=l.points;let y,v;for(let x=0,$=d.length;x<$;x++){const E=d[x];x>0?(y+=E[0],v+=E[1]):(y=E[0],v=E[1]),E[0]=e(y),E[1]=i(v)}if(r&&n)for(let x=0,$=d.length;x<$;x++){const E=d[x];E[2]=r(E[2]),E[3]=n(E[3])}else if(r)for(let x=0,$=d.length;x<$;x++){const E=d[x];E[2]=r(E[2])}else if(n)for(let x=0,$=d.length;x<$;x++){const E=d[x];E[2]=n(E[2])}}:null}};g([S({type:String,json:{write:!0}})],Er.prototype,"displayFieldName",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Er.prototype,"exceededTransferLimit",void 0),g([S({type:[ur],json:{write:!0}})],Er.prototype,"features",void 0),g([xe("features")],Er.prototype,"readFeatures",null),g([S({type:[F_],json:{write:!0}})],Er.prototype,"fields",void 0),g([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:WS.read}}})],Er.prototype,"geometryType",void 0),g([Ae("geometryType")],Er.prototype,"writeGeometryType",null),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Er.prototype,"hasM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Er.prototype,"hasZ",void 0),g([S({types:Vh,json:{write:!0}})],Er.prototype,"queryGeometry",void 0),g([xe("queryGeometry")],Er.prototype,"readQueryGeometry",null),g([S({type:ut,json:{write:!0}})],Er.prototype,"spatialReference",void 0),g([Ae("spatialReference")],Er.prototype,"writeSpatialReference",null),g([S({json:{write:!0}})],Er.prototype,"transform",void 0),Er=HS=g([J("esri.rest.support.FeatureSet")],Er),Er.prototype.toJSON.isDefaultToJSON=!0;const tg=Er;let Rc=class extends si(ge){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};g([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Rc.prototype,"onFields",void 0),g([S({type:String,json:{write:!0}})],Rc.prototype,"operator",void 0),g([S({type:String,json:{write:!0}})],Rc.prototype,"searchTerm",void 0),g([S({type:String,json:{write:!0}})],Rc.prototype,"searchType",void 0),Rc=g([J("esri.rest.support.FullTextSearch")],Rc);const vye=Rc;var JS;const zA=new xt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Io=JS=class extends ge{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=ae(t))}clone(){return new JS({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ae(this.statisticParameters)})}};g([S({type:Number,json:{write:!0}})],Io.prototype,"maxPointCount",void 0),g([S({type:Number,json:{write:!0}})],Io.prototype,"maxRecordCount",void 0),g([S({type:Number,json:{write:!0}})],Io.prototype,"maxVertexCount",void 0),g([S({type:String,json:{write:!0}})],Io.prototype,"onStatisticField",void 0),g([S({type:String,json:{write:!0}})],Io.prototype,"outStatisticFieldName",void 0),g([S({type:String,json:{read:{source:"statisticType",reader:zA.read},write:{target:"statisticType",writer:zA.write}}})],Io.prototype,"statisticType",void 0),g([S({type:Object})],Io.prototype,"statisticParameters",void 0),g([Ae("statisticParameters")],Io.prototype,"writeStatisticParameters",null),Io=JS=g([J("esri.rest.support.StatisticDefinition")],Io);const LV=Io;var M0;const bye=new xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),wye=new xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ye=M0=class extends ge{static from(t){return Id(M0,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const n=t[r];Array.isArray(n)?i[r]=n.map(l=>l instanceof Date?l.getTime():l):n instanceof Date?i[r]=n.getTime():i[r]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new M0(ae({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ye.MAX_MAX_RECORD_COUNT_FACTOR=5,g([S({json:{write:!0}})],Ye.prototype,"aggregateIds",void 0),g([S({type:Boolean,json:{write:!0}})],Ye.prototype,"cacheHint",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"compactGeometryEnabled",void 0),g([S({json:{write:!0}})],Ye.prototype,"datumTransformation",void 0),g([St("datumTransformation")],Ye.prototype,"castDatumTransformation",null),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"defaultSpatialReferenceEnabled",void 0),g([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ye.prototype,"distance",void 0),g([S({type:ws,json:{write:!0}})],Ye.prototype,"dynamicDataSource",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"formatOf3DObjects",void 0),g([S({type:[vye],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ye.prototype,"fullText",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"gdbVersion",void 0),g([S({types:Vh,json:{read:Ul,write:!0}})],Ye.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],Ye.prototype,"geometryPrecision",void 0),g([S({type:[String],json:{write:!0}})],Ye.prototype,"groupByFieldsForStatistics",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"having",void 0),g([S({type:Date})],Ye.prototype,"historicMoment",void 0),g([Ae("historicMoment")],Ye.prototype,"writeHistoricMoment",null),g([S({type:Number,json:{write:!0}})],Ye.prototype,"maxAllowableOffset",void 0),g([S({type:Number,cast:t=>t<1?1:t>M0.MAX_MAX_RECORD_COUNT_FACTOR?M0.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ye.prototype,"maxRecordCountFactor",void 0),g([S({type:["xyFootprint"],json:{write:!0}})],Ye.prototype,"multipatchOption",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ye.prototype,"num",void 0),g([S({json:{write:!0}})],Ye.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],Ye.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],Ye.prototype,"outFields",void 0),g([S({type:ut,json:{name:"outSR",write:!0}})],Ye.prototype,"outSpatialReference",void 0),g([S({type:[LV],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ye.prototype,"outStatistics",void 0),g([S({json:{write:!0}})],Ye.prototype,"parameterValues",void 0),g([Ae("parameterValues")],Ye.prototype,"writeParameterValues",null),g([S({type:lt,json:{write:!0}})],Ye.prototype,"pixelSize",void 0),g([S({type:lN,json:{write:!0}})],Ye.prototype,"quantizationParameters",void 0),g([S({type:[Object],json:{write:!0}})],Ye.prototype,"rangeValues",void 0),g([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ye.prototype,"relationParameter",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"resultType",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnCentroid",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnDistinctValues",void 0),g([S({type:Boolean,json:{default:!0,write:!0}})],Ye.prototype,"returnExceededLimitFeatures",void 0),g([S({type:Boolean,json:{write:!0}})],Ye.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnQueryGeometry",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ye.prototype,"returnZ",void 0),g([S({type:ut,json:{write:!0}})],Ye.prototype,"sourceSpatialReference",void 0),g([Ue(bye,{ignoreUnknown:!1,name:"spatialRel"})],Ye.prototype,"spatialRelationship",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],Ye.prototype,"start",void 0),g([Ae("start"),Ae("num")],Ye.prototype,"writeStart",null),g([S({type:String,json:{write:!0}})],Ye.prototype,"sqlFormat",void 0),g([S({type:String,json:{write:!0}})],Ye.prototype,"text",void 0),g([S({type:eo,json:{write:!0}})],Ye.prototype,"timeExtent",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Ye.prototype,"timeReferenceUnknownClient",void 0),g([Ue(wye,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ye.prototype,"units",void 0),g([S({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ye.prototype,"where",void 0),g([Ae("where")],Ye.prototype,"writeWhere",null),Ye=M0=g([J("esri.rest.support.Query")],Ye);const lr=Ye;async function D5(t,e,i){const r=await DV(t,e,i);return tg.fromJSON(r)}async function DV(t,e,i){const r=Yh(t),n={...i},l=lr.from(e),{data:d}=await cye(r,l,l.sourceSpatialReference,n);return d}function Br(t,e){return t?e?4:3:e?3:2}const wf=ve.getLogger("esri.layers.graphics.featureConversionUtils"),RV={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},_ye=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l},VA=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l,t[i+2]=e[r+2]},xye=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l,t[i+2]=e[r+3]},Sye=(t,e,i,r,n,l)=>{t[i]=n,t[i+1]=l,t[i+2]=e[r+2],t[i+3]=e[r+3]};function j$(t,e,i,r){if(t){if(i)return e&&r?Sye:VA;if(e&&r)return xye}else if(e&&r)return VA;return _ye}function R5({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function j5({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function F5({scale:t,translate:e},i,r){return i*t[r]+e[r]}function GMe(t,e,i){return t?e?i?z$(t):F$(t):i?N$(t):N_(t):null}function N_(t){const e=t.coords;return{x:e[0],y:e[1]}}function jV(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function F$(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function Mye(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function N$(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function $ye(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function z$(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function Tye(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Iye(t,e,i,r){let n=N_;i&&r?n=z$:i?n=F$:r&&(n=N$);for(const l of e){const{geometry:d,attributes:y}=l,v=d!=null?n(d):null;t.push({attributes:y,geometry:v})}return t}function V$(t,e){return t&&e?Tye:t?Mye:e?$ye:jV}function FV(t,e,i,r,n){const l=V$(i,r);for(const{geometry:d,attributes:y}of e){const v=d!=null?l(new ea,d):null;t.push(new Rh(v,y,null,n?y[n]:void 0))}return t}function UMe(t,e,i=V$(e.z!=null,e.m!=null)){return i(t,e)}function Eye(t,e,i,r){for(const{geometry:n,attributes:l}of e)t.push({attributes:l,geometry:n!=null?NV(n,i,r):null});return t}function NV(t,e,i){if(t==null)return null;const r=Br(e,i),n=[];for(let l=0;l<t.coords.length;l+=r){const d=[];for(let y=0;y<r;y++)d.push(t.coords[l+y]);n.push(d)}return e?i?{points:n,hasZ:e,hasM:i}:{points:n,hasZ:e}:i?{points:n,hasM:i}:{points:n}}function zV(t,e,i,r,n){const l=Br(i,r);for(const{geometry:d,attributes:y}of e){const v=d!=null?VV(new ea,d,l):null;t.push(new Rh(v,y,null,n?y[n]:void 0))}return t}function VV(t,e,i=Br(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let n=0;for(const l of e.points)for(let d=0;d<i;d++)r[n++]=l[d];return t}function Aye(t,e,i,r){for(const{geometry:n,attributes:l}of e)t.push({attributes:l,geometry:n!=null?BV(n,i,r):null});return t}function BV(t,e,i){if(!t)return null;const r=Br(e,i),{coords:n,lengths:l}=t,d=[];let y=0;for(const v of l){const x=[];for(let $=0;$<v;$++){const E=[];for(let k=0;k<r;k++)E.push(n[y++]);x.push(E)}d.push(x)}return e?i?{paths:d,hasZ:e,hasM:i}:{paths:d,hasZ:e}:i?{paths:d,hasM:i}:{paths:d}}function GV(t,e,i,r,n){const l=Br(i,r);for(const{geometry:d,attributes:y}of e){const v=d!=null?UV(new ea,d,l):null;t.push(new Rh(v,y,null,n?y[n]:void 0))}return t}function UV(t,e,i=Br(e.hasZ,e.hasM)){const{lengths:r,coords:n}=t;let l=0;for(const d of e.paths){for(const y of d)for(let v=0;v<i;v++)n[l++]=y[v];r.push(d.length)}return t}function kye(t,e,i,r){for(const{geometry:n,attributes:l,centroid:d}of e){const y=n!=null?qV(n,i,r):null;if(d!=null){const v=N_(d);t.push({attributes:l,centroid:v,geometry:y})}else t.push({attributes:l,geometry:y})}return t}function qV(t,e,i){if(!t)return null;const r=Br(e,i),{coords:n,lengths:l}=t,d=[];let y=0;for(const v of l){const x=[];for(let $=0;$<v;$++){const E=[];for(let k=0;k<r;k++)E.push(n[y++]);x.push(E)}d.push(x)}return e?i?{rings:d,hasZ:e,hasM:i}:{rings:d,hasZ:e}:i?{rings:d,hasM:i}:{rings:d}}function HV(t,e,i,r,n){for(const{geometry:l,centroid:d,attributes:y}of e){const v=l!=null?WV(new ea,l,i,r):null,x=n?y[n]:void 0;d!=null?t.push(new Rh(v,y,jV(new ea,d),x)):t.push(new Rh(v,y,null,x))}return t}function WV(t,e,i=e.hasZ,r=e.hasM){return Pye(t,e.rings,i,r)}function Pye(t,e,i,r){const n=Br(i,r),{lengths:l,coords:d}=t;let y=0;Rl(t);for(const v of e){for(const x of v)for(let $=0;$<n;$++)d[y++]=x[$];l.push(v.length)}return t}const $0=[],L1=[];function qMe(t,e,i,r,n){$0[0]=t;const[l]=JV(L1,$0,e,i,r,n);return ta($0),ta(L1),l}function JV(t,e,i,r,n,l){if(ta(t),!i){for(const d of e){const y=l?d.attributes[l]:void 0;t.push(new Rh(null,d.attributes,null,y))}return t}switch(i){case"esriGeometryPoint":return FV(t,e,r,n,l);case"esriGeometryMultipoint":return zV(t,e,r,n,l);case"esriGeometryPolyline":return GV(t,e,r,n,l);case"esriGeometryPolygon":return HV(t,e,r,n,l);default:wf.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`)),ta(t)}return t}function HMe(t,e,i,r,n,l){const d=t.length;switch(i){case"esriGeometryPoint":FV(t,e,r,n,l);break;case"esriGeometryMultipoint":zV(t,e,r,n,l);break;case"esriGeometryPolyline":GV(t,e,r,n,l);break;case"esriGeometryPolygon":HV(t,e,r,n,l);break;default:wf.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`))}for(let y=0;y<e.length;y++)t[y+d].geometryType=i,t[y+d].insertAfter=e[y].insertAfter,t[y+d].groupId=e[y].groupId;return t}function WMe(t,e,i,r){L1[0]=t,KV($0,L1,e,i,r);const n=$0[0];return ta($0),ta(L1),n}function JMe(t,e,i){if(t==null)return null;const r=new ea;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),l7(t)?V$(e??t.z!=null,i??t.m!=null)(r,t):md(t)?WV(r,t,e,i):u7(t)?UV(r,t,Br(e,i)):a7(t)?VV(r,t,Br(e,i)):void wf.error("convertFromGeometry:unknown-geometry",new ne(`Unable to parse unknown geometry type '${t}'`))}function YV(t,e,i,r){const n=t&&("coords"in t?t:t.geometry);if(n==null)return null;switch(e){case"esriGeometryPoint":{let l=N_;return i&&r?l=z$:i?l=F$:r&&(l=N$),l(n)}case"esriGeometryMultipoint":return NV(n,i,r);case"esriGeometryPolyline":return BV(n,i,r);case"esriGeometryPolygon":return qV(n,i,r);default:return wf.error("convertToGeometry:unknown-geometry",new ne(`Unable to parse unknown geometry type '${e}'`)),null}}function Cye(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function KV(t,e,i,r,n){if(ta(t),i==null)return Cye(t,e);switch(i){case"esriGeometryPoint":return Iye(t,e,r,n);case"esriGeometryMultipoint":return Eye(t,e,r,n);case"esriGeometryPolyline":return Aye(t,e,r,n);case"esriGeometryPolygon":return kye(t,e,r,n);default:wf.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`))}return t}function YMe(t){const{objectIdFieldName:e,spatialReference:i,transform:r,fields:n,hasM:l,hasZ:d,features:y,geometryType:v,exceededTransferLimit:x,uniqueIdField:$,queryGeometry:E,queryGeometryType:k}=t,P={features:KV([],y,v,d,l),fields:n,geometryType:v,objectIdFieldName:e,spatialReference:i,uniqueIdField:$,queryGeometry:YV(E,k,!1,!1)};return r&&(P.transform=r),x&&(P.exceededTransferLimit=x),l&&(P.hasM=l),d&&(P.hasZ=d),P}function KMe(t,e){const i=new PV,{hasM:r,hasZ:n,features:l,objectIdFieldName:d,spatialReference:y,geometryType:v,exceededTransferLimit:x,transform:$,fields:E}=t;return E&&(i.fields=E),i.geometryType=v??null,i.objectIdFieldName=d??e??null,i.spatialReference=y??null,i.objectIdFieldName?(l&&JV(i.features,l,v,n,r,i.objectIdFieldName),x&&(i.exceededTransferLimit=x),r&&(i.hasM=r),n&&(i.hasZ=n),$&&(i.transform=$),i):(wf.error(new ne("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function ZMe(t){const{transform:e,features:i,hasM:r,hasZ:n}=t;if(!e)return t;for(const l of i)l.geometry!=null&&KS(l.geometry,l.geometry,r,n,e),l.centroid!=null&&KS(l.centroid,l.centroid,r,n,e);return t.transform=null,t}function XMe(t,e){const{geometryType:i,features:r,hasM:n,hasZ:l}=e;if(!t)return e;for(let d=0;d<r.length;d++){const y=r[d],v=y.weakClone();v.geometry=new ea,BA(v.geometry,y.geometry,n,l,i,t),y.centroid&&(v.centroid=new ea,BA(v.centroid,y.centroid,n,l,"esriGeometryPoint",t)),r[d]=v}return e.transform=t,e}function BA(t,e,i,r,n,l,d=i,y=r){if(Rl(t),e==null||!e.coords.length)return null;const v=RV[n],{coords:x,lengths:$}=e,E=Br(i,r),k=Br(i&&d,r&&y),P=j$(i,r,d,y);if(!$.length)return P(t.coords,x,0,0,R5(l,x[0]),j5(l,x[1])),Rl(t,E,0),t;let D,L,N,B,W=0,q=0,Y=q;for(const ie of $){if(ie<v)continue;let se=0;q=Y,N=D=R5(l,x[W]),B=L=j5(l,x[W+1]),P(t.coords,x,q,W,N,B),se++,W+=E,q+=k;for(let ue=1;ue<ie;ue++,W+=E)N=R5(l,x[W]),B=j5(l,x[W+1]),N===D&&B===L||(P(t.coords,x,q,W,N-D,B-L),q+=k,se++,D=N,L=B);se>=v&&(t.lengths.push(se),Y=q)}return ta(t.coords,Y),t.coords.length?t:null}function QMe(t,e,i,r,n,l,d=i,y=r){if(Rl(t),!e||!e.coords.length)return null;const v=RV[n],{coords:x,lengths:$}=e,E=Br(i,r),k=Br(i&&d,r&&y),P=j$(i,r,d,y);if(!$.length)return P(t.coords,x,0,0,x[0],x[1]),Rl(t,E,0),t;let D=0;const L=l*l;for(const N of $){if(N<v){D+=N*E;continue}const B=t.coords.length/k,W=D,q=D+(N-1)*E;P(t.coords,x,t.coords.length,W,x[W],x[W+1]),YS(t.coords,x,E,L,P,W,q),P(t.coords,x,t.coords.length,q,x[q],x[q+1]);const Y=t.coords.length/k-B;Y>=v?t.lengths.push(Y):ta(t.coords,B*k),D+=N*E}return t.coords.length?t:null}function Oye(t,e,i,r){const n=t[e],l=t[e+1],d=t[i],y=t[i+1],v=t[r],x=t[r+1];let $=d,E=y,k=v-$,P=x-E;if(k!==0||P!==0){const D=((n-$)*k+(l-E)*P)/(k*k+P*P);D>1?($=v,E=x):D>0&&($+=k*D,E+=P*D)}return k=n-$,P=l-E,k*k+P*P}function YS(t,e,i,r,n,l,d){let y,v=r,x=0;for(let $=l+i;$<d;$+=i)y=Oye(e,$,l,d),y>v&&(x=$,v=y);v>r&&(x-l>i&&YS(t,e,i,r,n,l,x),n(t,e,t.length,x,e[x],e[x+1]),d-x>i&&YS(t,e,i,r,n,x,d))}function e7e(t,e,i,r){if(e==null||!e.coords||!e.coords.length)return null;const n=Br(i,r);let l=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;if(e&&e.coords){const x=e.coords;for(let $=0;$<x.length;$+=n){const E=x[$],k=x[$+1];l=Math.min(l,E),y=Math.max(y,E),d=Math.min(d,k),v=Math.max(v,k)}}return Y9(t)?bte(t,l,d,y,v):PZ(l,d,y,v,t),t}function KS(t,e,i,r,n){const{coords:l,lengths:d}=e,y=Br(i,r);if(!l.length)return t!==e&&Rl(t),t;Vd(n);const{originPosition:v,scale:x,translate:$}=n,E=Dye;E.originPosition=v;const k=E.scale;k[0]=x[0]??1,k[1]=-(x[1]??1),k[2]=x[2]??1,k[3]=x[3]??1;const P=E.translate;if(P[0]=$[0]??0,P[1]=$[1]??0,P[2]=$[2]??0,P[3]=$[3]??0,!d.length){for(let L=0;L<y;++L)t.coords[L]=F5(E,l[L],L);return t!==e&&Rl(t,y,0),t}let D=0;for(let L=0;L<d.length;L++){const N=d[L];t.lengths[L]=N;for(let q=0;q<y;++q)t.coords[D+q]=F5(E,l[D+q],q);let B=t.coords[D],W=t.coords[D+1];D+=y;for(let q=1;q<N;q++,D+=y){B+=l[D]*k[0],W+=l[D+1]*k[1],t.coords[D]=B,t.coords[D+1]=W;for(let Y=2;Y<y;++Y)t.coords[D+Y]=F5(E,l[D+Y],Y)}}return t!==e&&Rl(t,l.length,d.length),t}function t7e(t,e,i,r,n,l){if(Rl(t),t.lengths.push(...e.lengths),i===n&&r===l)for(let d=0;d<e.coords.length;d++)t.coords.push(e.coords[d]);else{const d=Br(i,r),y=j$(i,r,n,l),v=e.coords;for(let x=0;x<v.length;x+=d)y(t.coords,v,t.coords.length,x,v[x],v[x+1])}return t}function Lye(t,e,i,r){let n=0,l=t[r*e],d=t[r*(e+1)];for(let y=1;y<i;y++){const v=l+t[r*(e+y)],x=d+t[r*(e+y)+1],$=(v-l)*(x+d);l=v,d=x,n+=$}return .5*n}function i7e(t,e){const{coords:i,lengths:r}=t;let n=0,l=0;for(let d=0;d<r.length;d++){const y=r[d];l+=Lye(i,n,y,e),n+=y}return Math.abs(l)}function Rl(t,e=0,i=0){ta(t.lengths,i),ta(t.coords,e)}function ta(t,e=0){t.length!==e&&(t.length=e)}const Dye={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var ZS;let xi=ZS=class extends ge{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new ZS(ae({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};g([S({type:Boolean,json:{write:!0}})],xi.prototype,"cacheHint",void 0),g([S({type:ws,json:{write:!0}})],xi.prototype,"dynamicDataSource",void 0),g([S({type:String,json:{write:!0}})],xi.prototype,"gdbVersion",void 0),g([S({type:Number,json:{write:!0}})],xi.prototype,"geometryPrecision",void 0),g([S({type:Date})],xi.prototype,"historicMoment",void 0),g([Ae("historicMoment")],xi.prototype,"_writeHistoricMoment",null),g([S({type:Number,json:{write:!0}})],xi.prototype,"maxAllowableOffset",void 0),g([S({type:[Number],json:{write:!0}})],xi.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],xi.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],xi.prototype,"outFields",void 0),g([S({type:ut,json:{read:{source:"outSR"},write:{target:"outSR"}}})],xi.prototype,"outSpatialReference",void 0),g([S({json:{write:!0}})],xi.prototype,"relationshipId",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],xi.prototype,"start",void 0),g([Ae("start"),Ae("num")],xi.prototype,"writeStart",null),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],xi.prototype,"num",void 0),g([S({json:{write:!0}})],xi.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],xi.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],xi.prototype,"returnZ",void 0),g([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],xi.prototype,"where",void 0),xi=ZS=g([J("esri.rest.support.RelationshipQuery")],xi),xi.from=Di(xi);const K0=xi,GA=Object.freeze(Object.defineProperty({__proto__:null,default:K0},Symbol.toStringTag,{value:"Module"}));var XS;let Np=XS=class extends ge{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new XS({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};g([S({type:[String],json:{write:!0}})],Np.prototype,"groupByFields",void 0),g([S({type:Number,json:{write:!0}})],Np.prototype,"topCount",void 0),g([S({type:[String],json:{write:!0}})],Np.prototype,"orderByFields",void 0),Np=XS=g([J("esri.rest.support.TopFilter")],Np);const Rye=Np;var QS;const UA=new xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),qA=new xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pi=QS=class extends ge{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new QS(ae({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};g([S({type:Boolean,json:{write:!0}})],pi.prototype,"cacheHint",void 0),g([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],pi.prototype,"distance",void 0),g([S({types:Vh,json:{read:Ul,write:!0}})],pi.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),g([S({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),g([S({type:Number,json:{read:{source:"resultRecordCount"}}})],pi.prototype,"num",void 0),g([S({json:{write:!0}})],pi.prototype,"objectIds",void 0),g([S({type:[String],json:{write:!0}})],pi.prototype,"orderByFields",void 0),g([S({type:[String],json:{write:!0}})],pi.prototype,"outFields",void 0),g([S({type:ut,json:{read:{source:"outSR"},write:{target:"outSR"}}})],pi.prototype,"outSpatialReference",void 0),g([S({type:String,json:{write:!0}})],pi.prototype,"resultType",void 0),g([S({json:{write:!0}})],pi.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnZ",void 0),g([S({type:Number,json:{read:{source:"resultOffset"}}})],pi.prototype,"start",void 0),g([Ae("start"),Ae("num")],pi.prototype,"writeStart",null),g([S({type:String,json:{read:{source:"spatialRel",reader:UA.read},write:{target:"spatialRel",writer:UA.write}}})],pi.prototype,"spatialRelationship",void 0),g([S({type:eo,json:{write:!0}})],pi.prototype,"timeExtent",void 0),g([S({type:Rye,json:{write:!0}})],pi.prototype,"topFilter",void 0),g([S({type:String,json:{read:qA.read,write:{writer:qA.write,overridePolicy(t){return{enabled:t!=null&&this.distance!=null&&this.distance>0}}}}})],pi.prototype,"units",void 0),g([S({type:String,json:{write:!0}})],pi.prototype,"where",void 0),pi=QS=g([J("esri.rest.support.TopFeaturesQuery")],pi),pi.from=Di(pi);const nv=pi,jye="esri.widgets.Feature.support.relatedFeatureUtils",HA=ve.getLogger(jye),WA=new Map;function Tb(t){if(!Cl(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function Fye(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(n=>n.id===parseInt(t,10)&&(i=n,!0)),i}function Nye({originRelationship:t,relationships:e,layerId:i}){let r=null;return e&&e.some(n=>(`${n.relatedTableId}`===i&&n.id===(t==null?void 0:t.id)&&(r=n),!!r)),r}function zye(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function Vye(t,e){const i=Fye(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function Bye(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,n=i&&i.value;e.relatedFeatures=n?n.features:[];const l=r&&r.value;e.relatedStatsFeatures=l?l.features:[]}function Gye(t,e,i,r){var l;const n=new K0;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[t.attributes[i.objectIdField]],((l=i.queryRelatedFeatures)==null?void 0:l.call(i,n,r))??Promise.resolve({})}function Uye(t,e,i){let r=0;const n=[];for(;r<e.length;)n.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function qye(t,e,i,r){const n=i.layerId.toString(),{layerInfo:l,relation:d,relatedFields:y,outStatistics:v,url:x,sourceSpatialReference:$}=e;if(!l||!d)return null;const E=Nye({originRelationship:d,relationships:l.relationships,layerId:n});if(E!=null&&E.relationshipTableId&&E.keyFieldInRelationshipTable){const P=(await Gye(t,E,i,r))[t.attributes[i.objectIdField]];if(!P)return null;const D=P.features.map(L=>L.attributes[l.objectIdField]);if(v!=null&&v.length&&l.supportsStatistics){const L=new lr;L.where=Uye(l.objectIdField,D,1e3),L.outFields=y,L.outStatistics=v,L.sourceSpatialReference=$;const N={features:Promise.resolve(P),statsFeatures:D5(x,L)};return $s(N)}}const k=E==null?void 0:E.keyField;if(k){const P=f7(Kye(l.fields,k)),D=zye(t.attributes,d.keyField),L=P?`${k}=${D}`:`${k}='${D}'`,N=D5(x,new lr({where:L,outFields:e.relatedFields,sourceSpatialReference:$}),r),B=e.outStatistics&&e.outStatistics.length>0&&l.supportsStatistics?D5(x,new lr({where:L,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:$}),r):null,W={features:N};return B&&(W.statsFeatures=B),$s(W)}return null}function Hye(t,e){return Ht(t,{query:{f:"json"},signal:e&&e.signal})}function Wye({relatedInfos:t,layer:e},i){const r={};return t.forEach((n,l)=>{const{relation:d}=n;if(!d){const E=new ne("relation-required","A relation is required on a layer to retrieve related records.");throw HA.error(E),E}const{relatedTableId:y}=d;if(typeof y!="number"){const E=new ne("A related table ID is required on a layer to retrieve related records.");throw HA.error(E),E}const v=`${e.url}/${y}`,x=WA.get(v),$=x??Hye(v);x||WA.set(v,$),r[l]=$}),Ia($s(r),i)}function Jye({graphic:t,relatedInfos:e,layer:i},r){const n={};return e.forEach((l,d)=>{l.layerInfo&&(n[d]=qye(t,l,i,r))}),$s(n)}function Yye({relatedInfo:t,fieldName:e,fieldInfo:i}){var r,n;if((r=t.relatedFields)==null||r.push(e),i.statisticType){const l=new LV({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(n=t.outStatistics)==null||n.push(l)}}function Kye(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const JA={chartAnimation:!0};let Qi=class extends Be{constructor(e){super(e),this.abilities={...JA},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...JA,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},l=this.expressionAttributes??{},d=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(y=>{const v=y==null?void 0:y.clone();if(!v)return null;if(v.title=hd({attributes:r,fieldInfoMap:d,globalAttributes:n,expressionAttributes:l,layer:i,text:v.title}),v.caption=hd({attributes:r,fieldInfoMap:d,globalAttributes:n,expressionAttributes:l,layer:i,text:v.caption}),v.altText=hd({attributes:r,fieldInfoMap:d,globalAttributes:n,expressionAttributes:l,layer:i,text:v.altText}),v.type==="image"){const{value:x}=v;return this._setImageValue({value:x,formattedAttributes:n,layer:i}),v.value.sourceURL?v:void 0}if(v.type==="pie-chart"||v.type==="line-chart"||v.type==="column-chart"||v.type==="bar-chart"){const{value:x}=v;return this._setChartValue({value:x,chartType:v.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:l}),v}return null}).filter(Yo))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:l}=e,{linkURL:d,sourceURL:y}=r;if(y){const v=xS(y,l);r.sourceURL=_S({formattedAttributes:n,template:v,fieldInfoMap:i})}if(d){const v=xS(d,l);r.linkURL=_S({formattedAttributes:n,template:v,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:n,chartType:l,layer:d,expressionAttributes:y}=e,{popupTemplate:v,relatedInfos:x}=this,{fields:$,normalizeField:E}=i,k=d;if(i.fields=ype($,k),E&&(i.normalizeField=gm(E,k)),!$.some(D=>!!(n[D]!=null||Cl(D)&&(x!=null&&x.size))))return;const P=(v==null?void 0:v.fieldInfos)??[];$.forEach(D=>{if(Cl(D))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:P,fieldName:D,formattedAttributes:n,chartType:l,value:i})]);const L=this._getChartOption({value:i,attributes:r,chartType:l,formattedAttributes:n,expressionAttributes:y,fieldName:D,fieldInfos:P});i.series.push(L)})}_getRelatedChartInfos(e){var P;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:l,value:d}=e,y=[],v=Tb(r),x=v&&((P=this.relatedInfos)==null?void 0:P.get(v.layerId.toString()));if(!x)return y;const{relatedFeatures:$,relation:E}=x;if(!E||!$)return y;const{cardinality:k}=E;return $.forEach(D=>{const{attributes:L}=D;L&&Object.keys(L).forEach(N=>{N===v.fieldName&&y.push(this._getChartOption({value:d,attributes:L,formattedAttributes:n,fieldName:r,chartType:l,relatedFieldName:N,hasMultipleRelatedFeatures:($==null?void 0:$.length)>1,fieldInfos:i}))})}),k==="one-to-many"||k==="many-to-many"?y:[y[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var se;const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:l,fieldName:d,relatedFieldName:y,fieldInfos:v,chartType:x,hasMultipleRelatedFeatures:$}=e,E=this.layer,k=this.fieldInfoMap??new Map,{normalizeField:P,tooltipField:D}=i,L=P?Cl(P)?r[Tb(P).fieldName]:r[P]:null,N=x$(d)&&l&&l[d]!==void 0?l[d]:y&&r[y]!==void 0?r[y]:r[d]!==void 0?r[d]:n[d],B=new rR({fieldName:d,value:N===void 0?null:N&&L?N/L:N});if(Cl(d)){const ue=k.get(d.toLowerCase()),de=D&&k.get(D.toLowerCase()),be=(ue==null?void 0:ue.fieldName)??d,we=$&&D?Tb(D).fieldName:(de==null?void 0:de.fieldName)??D,$e=$&&we?r[we]:n[we]??(ue==null?void 0:ue.label)??(ue==null?void 0:ue.fieldName)??y,ke=$&&y?r[y]:n[be];return B.tooltip=this._getTooltip({label:$e,value:ke,chartType:x}),B}const W=Gz(v,d),q=gm(d,E),Y=D&&n[D]!==void 0?n[D]:zz(W||new Rm({fieldName:q}),(se=this.popupTemplate)==null?void 0:se.expressionInfos),ie=n[q];return B.tooltip=this._getTooltip({label:Y,value:ie,chartType:x}),B}};g([S()],Qi.prototype,"abilities",void 0),g([St("abilities")],Qi.prototype,"castAbilities",null),g([S()],Qi.prototype,"activeMediaInfoIndex",void 0),g([S({readOnly:!0})],Qi.prototype,"activeMediaInfo",null),g([S()],Qi.prototype,"attributes",void 0),g([S()],Qi.prototype,"description",void 0),g([S()],Qi.prototype,"fieldInfoMap",void 0),g([S()],Qi.prototype,"formattedAttributes",void 0),g([S()],Qi.prototype,"expressionAttributes",void 0),g([S({readOnly:!0})],Qi.prototype,"formattedMediaInfos",null),g([S()],Qi.prototype,"isAggregate",void 0),g([S()],Qi.prototype,"layer",void 0),g([S({readOnly:!0})],Qi.prototype,"formattedMediaInfoCount",null),g([S()],Qi.prototype,"mediaInfos",void 0),g([S()],Qi.prototype,"popupTemplate",void 0),g([S()],Qi.prototype,"relatedInfos",void 0),g([S()],Qi.prototype,"title",void 0),Qi=g([J("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Qi);const dd=Qi;function B$(t){return Number(t)!==t}function Zye(t){return{}.toString.call(t)}function an(t){if(t!=null&&!rt(t)){let e=Number(t);return B$(e)&&Z0(t)&&t!=""?an(t.replace(/[^0-9.\-]+/g,"")):e}return t}function Xye(t){if(e6(t))return new Date(t);if(rt(t))return new Date(t);{let e=Number(t);return rt(e)?new Date(e):new Date(t)}}function Qye(t){if(B$(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(t===0&&1/t==-1/0)return"-0";let e=t<0;t=Math.abs(t);let i,r=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t),n=r[1],l=r[2]||"";if(r[3]===void 0)i=l===""?n:n+"."+l;else{let d=+r[3];if(t<1)i="0."+YA("0",d-1)+n+l;else{let y=d-l.length;i=y===0?n+l:y<0?n+l.slice(0,y)+"."+l.slice(y):n+l+YA("0",y)}}return e?"-"+i:i}function YA(t,e){return new Array(e+1).join(t)}function e6(t){return Zye(t)==="[object Date]"}function Z0(t){return typeof t=="string"}function rt(t){return typeof t=="number"&&Number(t)==t}function z_(t){return typeof t=="object"&&t!==null}const jh="____",u0="____";function S2(t,e){const i=t.length;for(let r=0;r<i;++r)if(t[r]===e)return r;return-1}function e1e(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r]))return!0;return!1}function t1e(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=e(t[n],n);return r}function Te(t,e){const i=t.length;for(let r=0;r<i;++r)e(t[r],r)}function D1(t,e){let i=t.length;for(;i>0;)--i,e(t[i],i)}function ZV(t,e){const i=t.length;for(let r=0;r<i&&e(t[r],r);++r);}function ah(t,e){let i=!1,r=0;for(;;){if(r=t.indexOf(e,r),r===-1)return i;i=!0,t.splice(r,1)}}function dn(t,e){let i=t.indexOf(e);return i!==-1&&(t.splice(i,1),!0)}function bm(t,e){t.indexOf(e)===-1&&t.push(e)}function i1e(t){const e=t.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=t[r];return i}function N5(t,e,i){t.splice(e,0,i)}function KA(t,e){t.splice(e,1)}function XV(t,e){const i=t.length;for(let r=0;r<i;++r)if(e(t[r],r))return r;return-1}function r1e(t,e){let i=t.length;for(;i>0;)if(--i,e(t[i],i))return i;return-1}function s1e(t,e){const i=XV(t,e);if(i!==-1)return t[i]}function n1e(t,e){const i=r1e(t,e);if(i!==-1)return t[i]}function o1e(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const l=i+r>>1,d=e(t[l]);d<0?i=l+1:d===0?(n=!0,i=l+1):r=l}return{found:n,index:n?i-1:i}}function a1e(t,e){let i=0,r=t.length,n=!1;for(;i<r;){const l=i+r>>1,d=e(t[l]);d<0?i=l+1:(d===0&&(n=!0),r=l)}return{found:n,index:i}}function V_(t,e){let i=t.length;for(;i>0;)--i,e(t[i])||t.splice(i,1)}let G$=class{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},wr=class{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},l1e=class extends G${constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){Te(this._disposers,e=>{e.dispose()})}},ln=class extends G${constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){Te(this._disposers,e=>{e.dispose()})}},QV=class extends wr{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new wr(()=>{--this._counter,this._counter===0&&this.dispose()})}},_f=class{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Te(e,i=>{i.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(e){return e1e(this._listeners,i=>(i.type===null||i.type===e)&&!i.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,i=1/0){this._disabled[e]=i}_removeListener(e){if(this._iterating===0){const i=this._listeners.indexOf(e);if(i===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(i,1)}else this._killed.push(e)}_removeExistingListener(e,i,r,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(l=>{l.once!==e||l.type!==i||r!==void 0&&l.callback!==r||l.context!==n||l.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&this._disabled[e]===void 0}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(i=>{i.type===e&&i.disposer.dispose()})}has(e,i,r){return XV(this._listeners,n=>n.once!==!0&&n.type===e&&(i===void 0||n.callback===i)&&n.context===r)!==-1}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const i=this._disabled[e];return rt(i)?(i<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{Te(this._listeners,e)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(Te(this._killed,i=>{this._removeListener(i)}),this._killed.length=0)}}dispatch(e,i){this._shouldDispatch(e)&&this._eachListener(r=>{r.killed||r.type!==null&&r.type!==e||r.dispatch(e,i)})}_on(e,i,r,n,l,d){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,i,r,n);const y={type:i,callback:r,context:n,shouldClone:l,dispatch:d,killed:!1,once:e,disposer:new wr(()=>{y.killed=!0,this._removeListener(y)})};return this._listeners.push(y),y}onAll(e,i,r=!0){return this._on(!1,null,e,i,r,(n,l)=>e.call(i,l)).disposer}on(e,i,r,n=!0){return this._on(!1,e,i,r,n,(l,d)=>i.call(r,d)).disposer}once(e,i,r,n=!0){const l=this._on(!0,e,i,r,n,(d,y)=>{l.disposer.dispose(),i.call(r,y)});return l.disposer}off(e,i,r){this._removeExistingListener(!1,e,i,r)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const i=[];return Te(e._listeners,r=>{!r.killed&&r.shouldClone&&(r.type===null?i.push(this.onAll(r.callback,r.context)):r.once?i.push(this.once(r.type,r.callback,r.context)):i.push(this.on(r.type,r.callback,r.context)))}),new ln(i)}};function Kf(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}let eB=class{constructor(e=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new _f}),this._values=e}get values(){return this._values}contains(e){return this._values.indexOf(e)!==-1}removeValue(e){let i=0,r=this._values.length;for(;i<r;)this._values[i]===e?(this.removeIndex(i),--r):++i}indexOf(e){return S2(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,i){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:i})}_onSetIndex(e,i,r){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:i,newValue:r})}_onRemoveIndex(e,i){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:i})}_onMoveIndex(e,i,r){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:i,value:r})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,i){Kf(e,this._values.length);const r=this._values[e];return r!==i&&(this._values[e]=i,this._onSetIndex(e,r,i)),r}insertIndex(e,i){return Kf(e,this._values.length+1),N5(this._values,e,i),this._onInsertIndex(e,i),i}swap(e,i){const r=this._values.length;if(Kf(e,r),Kf(i,r),e!==i){const n=this._values[e],l=this._values[i];this._values[e]=l,this._onSetIndex(e,n,l),this._values[i]=n,this._onSetIndex(i,l,n)}}removeIndex(e){Kf(e,this._values.length);const i=this._values[e];return KA(this._values,e),this._onRemoveIndex(e,i),i}moveValue(e,i){let r=this.indexOf(e);if(r!==-1)if(KA(this._values,r),i==null){const n=this._values.length;this._values.push(e),this._onMoveIndex(r,n,e)}else N5(this._values,i,e),this._onMoveIndex(r,i,e);else i==null?(this._values.push(e),this._onPush(e)):(N5(this._values,i,e),this._onInsertIndex(i,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){Te(e,i=>{this.push(i)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const i=this._values;this._values=[],this._onClear(i),Te(e,r=>{this._values.push(r),this._onPush(r)})}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let i=0;i<e;++i)yield this._values[i]}each(e){Te(this._values,e)}eachReverse(e){D1(this._values,e)}},u1e=class extends eB{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(e,i,r){this.autoDispose&&i.dispose(),super._onSetIndex(e,i,r)}_onRemoveIndex(e,i){this.autoDispose&&i.dispose(),super._onRemoveIndex(e,i)}_onClear(e){this.autoDispose&&Te(e,i=>{i.dispose()}),super._onClear(e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&Te(this._values,e=>{e.dispose()}))}},d7e=class extends u1e{constructor(e,i){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=i}},h1e=class extends eB{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(i=>{if(i.type==="clear")Te(i.oldValues,r=>{this._onRemoved(r)});else if(i.type==="push")this._onInserted(i.newValue);else if(i.type==="setIndex")this._onRemoved(i.oldValue),this._onInserted(i.newValue,i.index);else if(i.type==="insertIndex")this._onInserted(i.newValue,i.index);else if(i.type==="removeIndex")this._onRemoved(i.oldValue);else{if(i.type!=="moveIndex")throw new Error("Unknown IListEvent type");this._onRemoved(i.value),this._onInserted(i.value,i.newIndex)}})}_onInserted(e,i){e._setParent(this._container,!0);const r=this._container._childrenDisplay;i===void 0?r.addChild(e._display):r.addChildAt(e._display,i)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),Te(this.values,e=>{e.dispose()}))}},yi=class t6{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(e,i){return e+this.value*(i-e)}static normalize(e,i,r){return e instanceof t6?e:new t6(i===r?0:100*Math.min(Math.max(1/(r-i)*(e-i),0),1))}};function ig(t){return new yi(t)}ig(0);const Gi=ig(100),er=ig(50);function xs(t){return Object.keys(t)}function c1e(t,e){return xs(t).sort(e)}function d1e(t){return Object.assign({},t)}function Ti(t,e){xs(t).forEach(i=>{e(i,t[i])})}function p1e(t,e){for(let i in t)if(f1e(t,i)&&!e(i,t[i]))break}function f1e(t,e){return{}.hasOwnProperty.call(t,e)}function y1e(t){t.parentNode&&t.parentNode.removeChild(t)}function or(t,e,i,r){return t.addEventListener(e,i,r||!1),new wr(()=>{t.removeEventListener(e,i,r||!1)})}function tB(t){return or(window,"resize",e=>{t()})}function Sd(t){switch(t){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function z5(t){return t.pointerId||0}function m1e(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function g1e(t){t&&t.focus()}function i6(t){if(Sd("pointerevents"))return t;if(Sd("touchevents"))switch(t){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(Sd("mouseevents"))switch(t){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return t}function ZA(t){if(typeof Touch<"u"&&t instanceof Touch)return!0;if(typeof PointerEvent<"u"&&t instanceof PointerEvent&&t.pointerType!=null)switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(t.type!=null&&t.type.match(/^mouse/))return!1;return!0}function V5(t,e,i){t.style[e]=i}function v1e(t,e){return t.style[e]}function iB(t){if(t.composedPath){const e=t.composedPath();return e.length===0?null:e[0]}return t.target}function b1e(t,e){let i=e;for(;;){if(t===i)return!0;if(i.parentNode===null){if(i.host==null)return!1;i=i.host}else i=i.parentNode}}function w1e(t,e){return t.target&&b1e(e.root.dom,t.target)}function zp(t,e){t.style.pointerEvents=e?"auto":"none"}function _1e(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}function x1e(){return _1e()?1:void 0}function gu(t,e){return rt(t)?t:t!=null&&rt(t.value)&&rt(e)?e*t.value:0}function y7e(t){let e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function qi(t,e=0,i="0"){return typeof t!="string"&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function S1e(t){return t.replace(/^[\s]*/,"")}function M1e(t){return t.replace(/[\s]*$/,"")}function Ib(t){return S1e(M1e(t))}function $1e(t){if(t===void 0)return"string";let e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:t==="number"?"number":t==="date"?"date":t==="duration"?"duration":t.match(/[#0]/)?"number":t.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}function U$(t){return t.replace(/\/(date|number|duration)$/i,"")}function XA(t){return t&&t.replace(/<[^>]*>/g,"")}function QA(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function ek(t,e=!1){const i=new Date(t.getFullYear(),0,0),r=t.getTime()-i.getTime()+60*(i.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function M2(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-r);const n=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-n.getTime())/864e5+1)/7)}function T1e(t,e=!1){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),r=i.getUTCDay()||7;return i.setUTCDate(i.getUTCDate()+4-r),new Date(Date.UTC(i.getUTCFullYear(),0,1)).getFullYear()}function I1e(t,e=!1){const i=M2(new Date(t.getFullYear(),t.getMonth(),1),e);let r=M2(t,e);return r==1&&(r=53),r-i+1}function E1e(t,e,i=1,r=!1){let n=new Date(e,0,4,0,0,0,0);return r&&n.setUTCFullYear(e),7*t+i-((n.getDay()||7)+3)}function ov(t,e){return t>12?t-=12:t===0&&(t=12),e!=null?t+(e-1):t}function av(t,e=!1,i=!1,r=!1){if(r)return e?"Coordinated Universal Time":"UTC";let n=t.toLocaleString("UTC"),l=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(n.length);return i===!1&&(l=l.replace(/ (standard|daylight|summer|winter) /i," ")),l}function A1e(t){const e=new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:t})).getTime()-i.getTime())/6e4*-1}function m7e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function rB(t){let e,i,r,n=t.h,l=t.s,d=t.l;if(l==0)e=i=r=d;else{let y=function($,E,k){return k<0&&(k+=1),k>1&&(k-=1),k<.16666666666666666?$+6*(E-$)*k:k<.5?E:k<.6666666666666666?$+(E-$)*(.6666666666666666-k)*6:$},v=d<.5?d*(1+l):d+l-d*l,x=2*d-v;e=y(x,v,n+1/3),i=y(x,v,n),r=y(x,v,n-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*r)}}function sB(t){let e=t.r/255,i=t.g/255,r=t.b/255,n=Math.max(e,i,r),l=Math.min(e,i,r),d=0,y=0,v=(n+l)/2;if(n===l)d=y=0;else{let x=n-l;switch(y=v>.5?x/(2-n-l):x/(n+l),n){case e:d=(i-r)/x+(i<r?6:0);break;case i:d=(r-e)/x+2;break;case r:d=(e-i)/x+4}d/=6}return{h:d,s:y,l:v}}function k1e(t,e){return t&&{r:Math.max(0,Math.min(255,t.r+Eb(t.r,e))),g:Math.max(0,Math.min(255,t.g+Eb(t.g,e))),b:Math.max(0,Math.min(255,t.b+Eb(t.b,e))),a:t.a}}function Eb(t,e){let i=e>0?255-t:t;return Math.round(i*e)}function P1e(t,e){if(t){let i=Eb(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}function tk(t){return(299*t.r+587*t.g+114*t.b)/1e3>=128}function C1e(t,e){if(t===void 0||e==1)return t;let i=sB(t);return i.s=e,rB(i)}function O1e(t,e={r:255,g:255,b:255},i={r:255,g:255,b:255}){let r=e,n=i;return tk(i)&&(r=i,n=e),tk(t)?n:r}function L1e(t,e){return t||(t=[]),[...t,...e].filter((i,r,n)=>n.indexOf(i)===r)}function g7e(t,e){return!!e&&t.left==e.left&&t.right==e.right&&t.top==e.top&&t.bottom==e.bottom}function nB(t){return t[0]==="#"&&(t=t.substr(1)),t.length==3&&(t=t[0].repeat(2)+t[1].repeat(2)+t[2].repeat(2)),parseInt(t,16)}function D1e(t){let e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let i="";for(let r=1;r<=3;r++){let n=parseInt(e[r]).toString(16);n.length==1&&(n="0"+n),i+=n}return nB(i)}function Vp(t){return et.fromAny(t)}class et{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(e=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+qi(this.r.toString(16),2)+qi(this.g.toString(16),2)+qi(this.b.toString(16),2)}toHSL(e=1){return sB({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,i,r){const n=rB({h:e,s:i,l:r});return this.fromRGB(n.r,n.g,n.b)}toString(){return this.toCSSHex()}static fromHex(e){return new et(e)}static fromRGB(e,i,r){return new et((0|r)+(i<<8)+(e<<16))}static fromString(e){return new et(nB(e))}static fromCSS(e){return new et(D1e(e))}static fromAny(e){if(Z0(e)){if(e[0]=="#")return et.fromString(e);if(e.substr(0,3)=="rgb")return et.fromCSS(e)}else{if(rt(e))return et.fromHex(e);if(e instanceof et)return et.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,i,r){const n=O1e({r:e.r,g:e.g,b:e.b},i?{r:i.r,g:i.g,b:i.b}:void 0,r?{r:r.r,g:r.g,b:r.b}:void 0);return this.fromRGB(n.r,n.g,n.b)}static interpolate(e,i,r,n="rgb"){if(n=="hsl"){const l=i.toHSL(),d=r.toHSL();return et.fromHSL(th(e,l.h,d.h),th(e,l.s,d.s),th(e,l.l,d.l))}return et.fromRGB(th(e,i.r,r.r),th(e,i.g,r.g),th(e,i.b,r.b))}static lighten(e,i){const r=k1e({r:e.r,g:e.g,b:e.b},i);return et.fromRGB(r.r,r.g,r.b)}static brighten(e,i){const r=P1e({r:e.r,g:e.g,b:e.b},i);return et.fromRGB(r.r,r.g,r.b)}static saturate(e,i){const r=C1e({r:e.r,g:e.g,b:e.b},i);return et.fromRGB(r.r,r.g,r.b)}}function ik(t){return Iv(this,void 0,void 0,function*(){if(t!==void 0){const e=[];Ti(t,(i,r)=>{e.push(r.waitForStop())}),yield Promise.all(e)}})}function th(t,e,i){return e+t*(i-e)}function R1e(t,e,i){return t>=1?i:e}function j1e(t,e,i){return new yi(th(t,e.percent,i.percent))}function F1e(t,e,i){return et.interpolate(t,e,i)}function N1e(t,e){return typeof t=="number"&&typeof e=="number"?th:t instanceof yi&&e instanceof yi?j1e:t instanceof et&&e instanceof et?F1e:R1e}const oB=Math.PI,aB=oB/180,R1=180/oB;function v7e(t,e,i){if(!rt(e)||e<=0){let r=Math.round(t);return i&&r-t==.5&&r--,r}{let r=Math.pow(10,e);return Math.round(t*r)/r}}function b7e(t,e){if(!rt(e)||e<=0)return Math.ceil(t);{let i=Math.pow(10,e);return Math.ceil(t*i)/i}}function nn(t,e,i){return Math.min(Math.max(t,e),i)}function r6(t){return Math.sin(aB*t)}function s6(t){return Math.cos(aB*t)}function z1e(t){return(t%=360)<0&&(t+=360),t}function V1e(t,e,i,r,n){let l=Number.MAX_VALUE,d=Number.MAX_VALUE,y=-Number.MAX_VALUE,v=-Number.MAX_VALUE,x=[];x.push(B5(n,i)),x.push(B5(n,r));let $=Math.min(90*Math.floor(i/90),90*Math.floor(r/90)),E=Math.max(90*Math.ceil(i/90),90*Math.ceil(r/90));for(let k=$;k<=E;k+=90)k>=i&&k<=r&&x.push(B5(n,k));for(let k=0;k<x.length;k++){let P=x[k];P.x<l&&(l=P.x),P.y<d&&(d=P.y),P.x>y&&(y=P.x),P.y>v&&(v=P.y)}return{left:t+l,top:e+d,right:t+y,bottom:e+v}}function B5(t,e){return{x:t*s6(e),y:t*r6(e)}}function w7e(t){const e=t.length;if(e>0){let i=t[0],r=i.left,n=i.top,l=i.right,d=i.bottom;if(e>1)for(let y=1;y<e;y++)i=t[y],r=Math.min(i.left,r),l=Math.max(i.right,l),n=Math.min(i.top,n),d=Math.max(i.bottom,d);return{left:r,right:l,top:n,bottom:d}}return{left:0,right:0,top:0,bottom:0}}function rk(t){return t}function Hy(t){return t*t*t}function lv(t){return function(e){return 1-t(1-e)}}class B1e{constructor(e,i){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=i,Ti(i,r=>{this._userSettings[r]=!0})}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._userSettings[e]=!0,this.setRaw(e,i)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){xs(e).forEach(i=>{this.set(i,e[i])})}_eachSetting(e){Ti(this._settings,e)}apply(){const e={stateAnimationEasing:!0,stateAnimationDuration:!0},i=this._entity.states.lookup("default");this._eachSetting((r,n)=>{e[r]||(e[r]=!0,this!==i&&(r in i._settings||(i._settings[r]=this._entity.get(r))),this._entity.set(r,n))})}applyAnimate(e){e==null&&(e=this._settings.stateAnimationDuration),e==null&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let i=this._settings.stateAnimationEasing;i==null&&(i=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",Hy)));const r=this._entity.states.lookup("default"),n={stateAnimationEasing:!0,stateAnimationDuration:!0},l={};return this._eachSetting((d,y)=>{if(!n[d]){n[d]=!0,this!=r&&(d in r._settings||(r._settings[d]=this._entity.get(d)));const v=this._entity.animate({key:d,to:y,duration:e,easing:i});v&&(l[d]=v)}}),l}}class G1e{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new B1e(this._entity,i);return this._states[e]=n,n}}remove(e){delete this._states[e]}apply(e){const i=this._states[e];i&&i.apply(),this._entity._applyState(e)}applyAnimate(e,i){let r;const n=this._states[e];return n&&(r=n.applyAnimate(i)),this._entity._applyStateAnimated(e,i),r}}class U1e{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.3.12"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}const No=new U1e;function q1e(t){No.licenses.push(t)}function Md(t,e){return t===e?0:t<e?-1:1}function lB(t,e,i){const r=t.length,n=e.length,l=Math.min(r,n);for(let d=0;d<l;++d){const y=i(t[d],e[d]);if(y!==0)return y}return Md(r,n)}function _7e(t,e){return t===e?0:t<e?-1:1}let H1e=class{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),this._entity._markDirtyKey(e),new wr(()=>{dn(r,i)&&this._entity._markDirtyKey(e)})}remove(e){const i=this._callbacks[e];i!==void 0&&(delete this._callbacks[e],i.length!==0&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,i){if(!this._disabled[e]){const r=this._callbacks[e];if(r!==void 0)for(let n=0,l=r.length;n<l;++n)i=r[n](i,this._entity,e)}return i}},uv=class{constructor(e,i,r,n,l,d,y){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new _f}),this._animation=e,this._from=i,this._to=r,this._duration=n,this._easing=l,this._loops=d,this._interpolate=N1e(i,r),this._oldTime=y}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,i)=>{if(this._stopped)e();else{const r=()=>{n.dispose(),e()},n=this.events.on("stopped",r)}})}_checkEnded(){return!(this._loops>1)||(--this._loops,!1)}_run(e){this._oldTime!==null&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}},W1e=0,J1e=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++W1e}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}_checkDirty(){xs(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){if(this.isDisposed())return!1;{let i=!1;return Ti(this._animatingSettings,(r,n)=>{if(n._stopped)this._stopAnimation(r);else if(n._playing){n._run(e);const l=n.percentage;l>=1?n._checkEnded()?this.set(r,n._value(1)):(i=!0,n._reset(e),this._set(r,n._value(1))):(i=!0,this._set(r,n._value(l)))}}),Ti(this._animatingPrivateSettings,(r,n)=>{if(n._stopped)this._stopAnimationPrivate(r);else if(n._playing){n._run(e);const l=n.percentage;l>=1?n._checkEnded()?this.setPrivate(r,n._value(1)):(i=!0,n._reset(e),this._setPrivate(r,n._value(1))):(i=!0,this._setPrivate(r,n._value(l)))}}),i}}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new wr(()=>{dn(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new wr(()=>{dn(r,i),r.length===0&&delete this._privateSettingEvents[e]})}getRaw(e,i){const r=this._settings[e];return r!==void 0?r:i}get(e,i){return this.getRaw(e,i)}_sendKeyEvent(e,i){const r=this._settingEvents[e];r!==void 0&&Te(r,n=>{n(i,this,e)})}_sendPrivateKeyEvent(e,i){const r=this._privateSettingEvents[e];r!==void 0&&Te(r,n=>{n(i,this,e)})}_setRaw(e,i,r){this._prevSettings[e]=i,this._sendKeyEvent(e,r)}setRaw(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&this._setRaw(e,r,i)}_set(e,i){const r=this._settings[e];this._settings[e]=i,r!==i&&(this._setRaw(e,r,i),this._markDirtyKey(e))}_stopAnimation(e){const i=this._animatingSettings[e];i&&(delete this._animatingSettings[e],i.stop())}set(e,i){return this._set(e,i),this._stopAnimation(e),i}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){Te(xs(this._settings),e=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}_setPrivateRaw(e,i,r){this._prevPrivateSettings[e]=i,this._sendPrivateKeyEvent(e,r)}setPrivateRaw(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&this._setPrivateRaw(e,r,i)}_setPrivate(e,i){const r=this._privateSettings[e];this._privateSettings[e]=i,r!==i&&(this._setPrivateRaw(e,r,i),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const i=this._animatingPrivateSettings[e];i&&(i.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,i){return this._setPrivate(e,i),this._stopAnimationPrivate(e),i}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){Ti(e,(i,r)=>{this.set(i,r)})}animate(e){const i=e.key,r=e.to,n=e.duration||0,l=e.loops||1,d=e.from===void 0?this.get(i):e.from,y=e.easing===void 0?rk:e.easing;if(n===0)this.set(i,r);else{if(d!==void 0&&d!==r){this.set(i,d);const x=this._animatingSettings[i]=new uv(this,d,r,n,y,l,this._animationTime());return this._startAnimation(),x}this.set(i,r)}const v=new uv(this,d,r,n,y,l,null);return v.stop(),v}animatePrivate(e){const i=e.key,r=e.to,n=e.duration||0,l=e.loops||1,d=e.from===void 0?this.getPrivate(i):e.from,y=e.easing===void 0?rk:e.easing;if(n===0)this.setPrivate(i,r);else{if(d!==void 0&&d!==r){this.setPrivate(i,d);const x=this._animatingPrivateSettings[i]=new uv(this,d,r,n,y,l,this._animationTime());return this._startAnimation(),x}this.setPrivate(i,r)}const v=new uv(this,d,r,n,y,l,null);return v.stop(),v}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},Bs=class extends J1e{constructor(e,i,r,n=[]){if(super(i),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new G1e(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new H1e(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=n,i.id&&this._registerId(i.id)}static new(e,i,r){const n=new this(e,i,!0);return n._template=r,n._afterNew(),n}static _new(e,i,r=[]){const n=new this(e,i,!0,r);return n._afterNew(),n}_afterNew(){this._checkDirty();let e=!1;const i=this._template;i&&(e=!0,i._setObjectTemplate(this)),Te(this._internalTemplates,r=>{e=!0,r._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),Te(this._internalTemplates,i=>{i._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new _f}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(e,i){e in this._settings||super.set(e,i)}_setRawDefault(e,i){e in this._settings||super.setRaw(e,i)}_clearDirty(){xs(this._dirty).forEach(e=>{this._dirty[e]=!1}),xs(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return this.classNames.indexOf(e)!==-1}_pushPropertyDisposer(e,i){let r=this._disposerProperties[e];return r===void 0&&(r=this._disposerProperties[e]=[]),r.push(i),i}_disposeProperty(e){const i=this._disposerProperties[e];i!==void 0&&(Te(i,r=>{r.dispose()}),delete this._disposerProperties[e])}set template(e){const i=this._template;i!==e&&(this._template=e,i&&i._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,i){}get(e,i){const r=this.adapters.fold(e,this._settings[e]);return r!==void 0?r:i}isUserSetting(e){return this._userProperties[e]||!1}set(e,i){return this._userProperties[e]=!0,super.set(e,i)}setRaw(e,i){this._userProperties[e]=!0,super.setRaw(e,i)}_setSoft(e,i){return this._userProperties[e]?i:super.set(e,i)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,i){return this._userPrivateProperties[e]=!0,super.setPrivate(e,i)}setPrivateRaw(e,i){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,i)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,i,r){this._userProperties[i]||e===this._findTemplateByKey(i)&&super.set(i,r)}_setTemplatePrivateProperty(e,i,r){this._userPrivateProperties[i]||e===this._findTemplateByPrivateKey(i)&&super.setPrivate(i,r)}_removeTemplateProperty(e){if(!this._userProperties[e]){const i=this._findTemplateByKey(e);i?super.set(e,i._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const i=this._findTemplateByPrivateKey(e);i?super.setPrivate(e,i._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const i=this.states.create(e,{}),r={};this._eachTemplate(n=>{const l=n.states.lookup(e);l&&l._apply(i,r)}),Ti(i._settings,n=>{r[n]||i._userSettings[n]||i.remove(n)})}_applyTemplate(e,i){this._templateDisposers.push(e._apply(this,i)),Ti(e._settings,(r,n)=>{i.settings[r]||this._userProperties[r]||(i.settings[r]=!0,super.set(r,n))}),Ti(e._privateSettings,(r,n)=>{i.privateSettings[r]||this._userPrivateProperties[r]||(i.privateSettings[r]=!0,super.setPrivate(r,n))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(i=>(e(i),!1)),D1(this._internalTemplates,e),Te(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();const i={settings:{},privateSettings:{},states:{}};this._eachTemplate(r=>{this._applyTemplate(r,i)}),e&&(Ti(this._settings,r=>{this._userProperties[r]||i.settings[r]||super.remove(r)}),Ti(this._privateSettings,r=>{this._userPrivateProperties[r]||i.privateSettings[r]||super.removePrivate(r)}))}_findTemplate(e){const i=this._findStaticTemplate(e);if(i===void 0){const r=n1e(this._internalTemplates,e);return r===void 0?s1e(this._templates,e):r}return i}_findTemplateByKey(e){return this._findTemplate(i=>e in i._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(i=>e in i._privateSettings)}_disposeTemplates(){Te(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){Te(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(){let e=!1;const i=[];let r=[];const n=new Set,l=this.get("themeTagsSelf");return l&&Te(l,d=>{n.add(d)}),this._walkParents(d=>{d===this._root._rootContainer&&(e=!0),d._defaultThemes.length>0&&i.push(d._defaultThemes);const y=d.get("themes");y&&r.push(y);const v=d.get("themeTags");v&&Te(v,x=>{n.add(x)})}),r=i.concat(r),this._removeTemplates(),e&&D1(this.classNames,d=>{const y=[];Te(r,v=>{Te(v,x=>{const $=x._lookupRules(d);$&&D1($,E=>{if(E.tags.every(k=>n.has(k))){const k=a1e(y,P=>{const D=Md(E.tags.length,P.tags.length);return D===0?lB(E.tags,P.tags,Md):D});y.splice(k.index,0,E)}})})}),Te(y,v=>{this._templates.push(v.template),v.template._setObjectTemplate(this)})}),this._applyTemplates(),e&&(this._runSetup=!1),e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const i=this._prevSettings.id;i&&delete No.entitiesById[i]}}_registerId(e){if(No.entitiesById[e]&&No.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');No.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),Te(this._internalTemplates,r=>{r._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(r=>{r.dispose()}),Ti(this._disposerProperties,(r,n)=>{Te(n,l=>{l.dispose()})});const i=this.get("id");i&&delete No.entitiesById[i]}setTimeout(e,i){const r=setTimeout(()=>{this.removeDispose(n),e()},i),n=new wr(()=>{clearTimeout(r)});return this._disposers.push(n),n}removeDispose(e){if(!this.isDisposed()){let i=S2(this._disposers,e);i>-1&&this._disposers.splice(i,1)}e.dispose()}hasTag(e){return S2(this.get("themeTags",[]),e)!==-1}addTag(e){if(!this.hasTag(e)){const i=this.get("themeTags",[]);i.push(e),this.set("themeTags",i)}}removeTag(e){if(this.hasTag(e)){const i=this.get("themeTags",[]);ah(i,e),this.set("themeTags",i)}}_t(e,i,...r){return this._root.language.translate(e,i,...r)}get root(){return this._root}};Object.defineProperty(Bs,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(Bs,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});let Y1e=class{constructor(e,i,r){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=i,this._settings=r}get(e,i){const r=this._settings[e];return r!==void 0?r:i}set(e,i){this._settings[e]=i,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){xs(e).forEach(i=>{this._settings[i]=e[i]}),this._template._stateChanged(this._name)}_apply(e,i){Ti(this._settings,(r,n)=>{i[r]||e._userSettings[r]||(i[r]=!0,e.setRaw(r,n))})}},K1e=class{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}lookup(e){return this._states[e]}create(e,i){const r=this._states[e];if(r)return r.setAll(i),r;{const n=new Y1e(e,this._template,i);return this._states[e]=n,this._template._stateChanged(e),n}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,i){Ti(this._states,(r,n)=>{let l=i.states[r];l==null&&(l=i.states[r]={});const d=e.states.create(r,{});n._apply(d,l)})}},Z1e=class{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,i){let r=this._callbacks[e];return r===void 0&&(r=this._callbacks[e]=[]),r.push(i),new wr(()=>{dn(r,i),r.length===0&&delete this._callbacks[e]})}remove(e){this._callbacks[e]!==void 0&&delete this._callbacks[e]}_apply(e){const i=[];return Ti(this._callbacks,(r,n)=>{Te(n,l=>{i.push(e.adapters.add(r,l))})}),new ln(i)}},n6=class uB{constructor(e,i){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new K1e(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Z1e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new _f}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new uB(e,!0)}get entities(){return this._entities}get(e,i){const r=this._settings[e];return r!==void 0?r:i}setRaw(e,i){this._settings[e]=i}set(e,i){this._settings[e]!==i&&(this.setRaw(e,i),this._entities.forEach(r=>{r._setTemplateProperty(this,e,i)}))}remove(e){e in this._settings&&(delete this._settings[e],this._entities.forEach(i=>{i._removeTemplateProperty(e)}))}removeAll(){Ti(this._settings,(e,i)=>{this.remove(e)})}getPrivate(e,i){const r=this._privateSettings[e];return r!==void 0?r:i}setPrivateRaw(e,i){return this._privateSettings[e]=i,i}setPrivate(e,i){return this._privateSettings[e]!==i&&(this.setPrivateRaw(e,i),this._entities.forEach(r=>{r._setTemplatePrivateProperty(this,e,i)})),i}removePrivate(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(i=>{i._removeTemplatePrivateProperty(e)}))}setAll(e){Ti(e,(i,r)=>{this.set(i,r)})}on(e,i){let r=this._settingEvents[e];return r===void 0&&(r=this._settingEvents[e]=[]),r.push(i),new wr(()=>{dn(r,i),r.length===0&&delete this._settingEvents[e]})}onPrivate(e,i){let r=this._privateSettingEvents[e];return r===void 0&&(r=this._privateSettingEvents[e]=[]),r.push(i),new wr(()=>{dn(r,i),r.length===0&&delete this._privateSettingEvents[e]})}_apply(e,i){const r=[];return Ti(this._settingEvents,(n,l)=>{Te(l,d=>{r.push(e.on(n,d))})}),Ti(this._privateSettingEvents,(n,l)=>{Te(l,d=>{r.push(e.onPrivate(n,d))})}),this.states._apply(e,i),r.push(this.adapters._apply(e)),r.push(e.events.copyFrom(this.events)),new ln(r)}_setObjectTemplate(e){this._entities.push(e)}_removeObjectTemplate(e){ah(this._entities,e)}_stateChanged(e){this._entities.forEach(i=>{i._applyStateByKey(e)})}},hB=class cB extends _f{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,i){return{type:e,originalEvent:i.event,point:i.point,simulated:i.simulated,native:i.native,target:this._sprite}}_onRenderer(e,i){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let r=this._rendererDisposers[e];if(r===void 0){const n=this._sprite._display.on(e,l=>{i.call(this,l)});r=this._rendererDisposers[e]=new QV(()=>{delete this._rendererDisposers[e],n.dispose()})}return r.increment()}_on(e,i,r,n,l,d){const y=super._on(e,i,r,n,l,d),v=cB.RENDERER_EVENTS[i];return v!==void 0&&(y.disposer=new ln([y.disposer,this._onRenderer(i,v)])),y}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,i){const r=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,i),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,i)}finally{this._dispatchParents=r}}};Object.defineProperty(hB,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(t){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",t))&&this.dispatch("click",this._makePointerEvent("click",t))},rightclick:function(t){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",t))},middleclick:function(t){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",t))},dblclick:function(t){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",t))},pointerover:function(t){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",t))},pointerout:function(t){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",t))},pointerdown:function(t){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",t))},pointerup:function(t){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",t))},globalpointerup:function(t){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",t))},globalpointermove:function(t){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",t))},wheel:function(t){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:t.event,point:t.point})}}});let Wo=class extends Bs{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}_markDirtyKey(e){super._markDirtyKey(e),e!="x"&&e!="y"&&e!="dx"&&e!="dy"||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),e!="x"&&e!="y"||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new hB(this)}_processTemplateField(){let e;const i=this.get("templateField");if(i){const r=this.dataItem;if(r){const n=r.dataContext;n&&(e=n[i],e instanceof n6||!e||(e=n6.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const i=this._dataItem;this._dataItem=e,this._processTemplateField();const r="dataitemchanged";e!=i&&this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this,oldDataItem:i,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof yi||this.get("height")instanceof yi?bm(e._percentageSizeChildren,this):dn(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof yi||this.get("y")instanceof yi?bm(e._percentagePositionChildren,this):dn(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const i=this.get("centerX");i!=null&&(this._display.pivot.x=e.left+gu(i,e.right-e.left));const r=this.get("centerY");r!=null&&(this._display.pivot.y=e.top+gu(r,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const i=this._tooltipPointerDp;i&&(i.dispose(),this._tooltipPointerDp=void 0),this.get("tooltipPosition")=="pointer"&&(this._tooltipPointerDp=new ln([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})}),this.events.on("pointerout",()=>{const r=this._tooltipMoveDp;r&&(r.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const e=this._display,i=this.events;if(this.isDirty("draggable")){const r=this.get("draggable");r?(this.set("interactive",!0),this._dragDp=new ln([i.on("pointerdown",n=>{this.dragStart(n)}),i.on("globalpointermove",n=>{this.dragMove(n)}),i.on("globalpointerup",n=>{this.dragStop(n)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!r}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const r=this.get("tooltipText"),n=this.get("tooltipHTML"),l=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(r||n)&&(l=="click"?this._tooltipDp=new ln([i.on("click",()=>{this.setTimeout(()=>this.showTooltip(),10)}),or(document,"click",d=>{this.hideTooltip()})]):l=="always"||(this._tooltipDp=new ln([i.on("pointerover",()=>{this.showTooltip()}),i.on("pointerout",()=>{this.hideTooltip()})])))}if(this.isDirty("toggleKey")){let r=this.get("toggleKey");r&&r!="none"?this._toggleDp=i.on("click",()=>{this._isDragging||this.set(r,!this.get(r))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1))),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const r=this.parent;r&&(this.isDirty("width")&&this.get("width")instanceof yi||this.isDirty("height")&&this.get("height")instanceof yi)&&(r.markDirty(),r._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const r=this.get("wheelable");r&&this.set("interactive",!0),e.wheelable=!!r}if((this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter")),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new ln([i.on("focus",()=>{this.showTooltip()}),i.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const r=this.events;this.get("interactive")?this._hoverDp=new ln([r.on("click",n=>{ZA(n.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})},10))}),r.on("globalpointerup",n=>{ZA(n.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:n.target,originalEvent:n.originalEvent,point:n.point,simulated:n.simulated})),this._isDown&&this._handleUp(n)}),r.on("pointerover",()=>{this._handleOver()}),r.on("pointerout",()=>{this._handleOut()}),r.on("pointerdown",n=>{this._handleDown(n)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",!1)),this.get("showTooltipOn")=="always"&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const i="dragstop";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const i=z5(e.originalEvent);delete this._downPoints[i],xs(this._downPoints).length==0&&(this._isDown=!1)}}_hasMoved(e){const i=z5(e.originalEvent),r=this._downPoints[i];if(r){const n=Math.abs(r.x-e.point.x),l=Math.abs(r.y-e.point.y);return n>5||l>5}return!1}_hasDown(){return xs(this._downPoints).length>0}_handleDown(e){const i=this.parent;if(i&&!this.get("draggable")&&i._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const r=z5(e.originalEvent);this._downPoints[r]={x:e.point.x,y:e.point.y}}}dragMove(e){let i=this._dragEvent;if(i){if(i.simulated&&!e.simulated)return!0;let r=0,n=this.parent;for(;n!=null;)r+=n.get("rotation",0),n=n.parent;let l=e.point.x-i.point.x,d=e.point.y-i.point.y;const y=this.events;if(i.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const v="dragstart";y.isEnabled(v)&&y.dispatch(v,{type:v,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let v=this._dragPoint;this.set("x",v.x+l*s6(r)+d*r6(r)),this.set("y",v.y+d*s6(r)-l*r6(r));const x="dragged";y.isEnabled(x)&&y.dispatch(x,{type:x,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(l,d)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const v="dragstart";y.isEnabled(v)&&y.dispatch(v,{type:v,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,i=0;for(;;){if(!e)return i;++i,e=e.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){if(this.get("isMeasured")){const e=this._display;this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const i=this.parent;i&&this.get("position")!="absolute"&&(i.get("width")==null||i.get("height")==null||i.get("layout"))&&i.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let i;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),i=this._adjustedLocalBounds):(i={left:0,right:0,top:0,bottom:0},this._localBounds=i,this._adjustedLocalBounds=i),!e||e.left!==i.left||e.top!==i.top||e.right!==i.right||e.bottom!==i.bottom){const r="boundschanged";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}_fixMinBounds(e){let i=this.get("minWidth",this.getPrivate("minWidth")),r=this.get("minHeight",this.getPrivate("minHeight"));rt(i)&&e.right-e.left<i&&(e.right=e.left+i),rt(r)&&e.bottom-e.top<r&&(e.bottom=e.top+r);let n=this.getPrivate("width"),l=this.getPrivate("height");rt(n)&&(n>0?e.right=e.left+n:e.left=e.right+n),rt(l)&&(l>0?e.bottom=e.top+l:e.top=e.bottom+l)}_removeParent(e){e&&(e.children.removeValue(this),dn(e._percentageSizeChildren,this),dn(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.showTooltip(),this._handleOver()}unhover(){this.hideTooltip(),this._handleOut()}showTooltip(e){const i=this.getTooltip(),r=this.get("tooltipText"),n=this.get("tooltipHTML");if((r||n)&&i){const l=this.get("tooltipPosition"),d=this.getPrivate("tooltipTarget",this);l!="fixed"&&e||(this._display._setMatrix(),e=this.toGlobal(d._getTooltipPoint())),i.set("pointTo",e),i.set("tooltipTarget",d),i.get("x")||i.set("x",e.x),i.get("y")||i.set("y",e.y),r&&i.label.set("text",r),n&&i.label.set("html",n);const y=this.dataItem;if(y&&i.label._setDataItem(y),this.get("showTooltipOn")=="always"&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();i.label.text.markDirtyText();const v=i.show();return this.setPrivateRaw("showingTooltip",!0),v}}hideTooltip(){const e=this.getTooltip();if(e&&e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)){let i=e.get("keepTargetHover")&&e.get("stateAnimationDuration",0)==0?400:void 0;const r=e.hide(i);return this.setPrivateRaw("showingTooltip",!1),r}}_getTooltipPoint(){const e=this._localBounds;if(e){let i=0,r=0;return this.get("isMeasured")?(i=e.left+gu(this.get("tooltipX",0),e.right-e.left),r=e.top+gu(this.get("tooltipY",0),e.bottom-e.top)):(i=gu(this.get("tooltipX",0),this.width()),r=gu(this.get("tooltipY",0),this.height())),{x:i,y:r}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let i=this.parent;if(i)return i.getTooltip()}}_updatePosition(){const e=this.parent;let i=this.get("dx",0),r=this.get("dy",0),n=this.get("x"),l=this.getPrivate("x"),d=0,y=0;const v=this.get("position");n instanceof yi&&(n=e?e.innerWidth()*n.value+e.get("paddingLeft",0):0),rt(n)?d=n+i:l!=null?d=l:e&&v=="relative"&&(d=e.get("paddingLeft",0)+i);let x=this.get("y"),$=this.getPrivate("y");x instanceof yi&&(x=e?e.innerHeight()*x.value+e.get("paddingTop",0):0),rt(x)?y=x+r:$!=null?y=$:e&&v=="relative"&&(y=e.get("paddingTop",0)+r);const E=this._display;if(E.x!=d||E.y!=y){E.invalidateBounds(),E.x=d,E.y=y;const k="positionchanged";this.events.isEnabled(k)&&this.events.dispatch(k,{type:k,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),i=this.getPrivate("x");const r=this.parent;return r?e instanceof yi?gu(e,r.innerWidth())+r.get("paddingLeft",0):rt(e)?e:i??r.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(e!=null)return e;let i=this.get("y");const r=this.parent;return r?i instanceof yi?gu(i,r.innerHeight())+r.get("paddingTop",0):rt(i)?i:e??r.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,i=this.x(),r=this.y();return{left:e.left+i,right:e.right+i,top:e.top+r,bottom:e.bottom+r}}globalBounds(){const e=this.localBounds(),i=this.toGlobal({x:e.left,y:e.top}),r=this.toGlobal({x:e.right,y:e.top}),n=this.toGlobal({x:e.right,y:e.bottom}),l=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,n.x,l.x),top:Math.min(i.y,r.y,n.y,l.y),right:Math.max(i.x,r.x,n.x,l.x),bottom:Math.max(i.y,r.y,n.y,l.y)}}_onShow(e){}_onHide(e){}appear(e,i){return Iv(this,void 0,void 0,function*(){return yield this.hide(0),i?new Promise((r,n)=>{this.setTimeout(()=>{r(this.show(e))},i)}):this.show(e)})}show(e){return Iv(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const i=this.states.applyAnimate("default",e);yield ik(i),this._isShowing=!1}})}hide(e){return Iv(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let i=this.states.lookup("hidden");i||(i=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const r=this.states.applyAnimate("hidden",e);yield ik(r),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}width(){let e=this.get("width"),i=this.get("maxWidth",this.getPrivate("maxWidth")),r=this.get("minWidth",this.getPrivate("minWidth")),n=this.getPrivate("width"),l=0;if(rt(n))l=n;else if(e==null)this._adjustedLocalBounds&&(l=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof yi){const d=this.parent;l=d?d.innerWidth()*e.value:this._root.width()*e.value}else rt(e)&&(l=e);return rt(r)&&(l=Math.max(r,l)),rt(i)&&(l=Math.min(i,l)),l}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(rt(e))return e;{let r=this.get("width");if(rt(r))return r}const i=this.parent;return i?i.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(rt(e))return e;{let r=this.get("height");if(rt(r))return r}const i=this.parent;return i?i.innerHeight():this._root.height()}height(){let e=this.get("height"),i=this.get("maxHeight",this.getPrivate("maxHeight")),r=this.get("minHeight",this.getPrivate("minHeight")),n=this.getPrivate("height"),l=0;if(rt(n))l=n;else if(e==null)this._adjustedLocalBounds&&(l=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof yi){const d=this.parent;l=d?d.innerHeight()*e.value:this._root.height()*e.value}else rt(e)&&(l=e);return rt(r)&&(l=Math.max(r,l)),rt(i)&&(l=Math.min(i,l)),l}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){this._parent&&this._walkParent(e)}_walkParent(e){this._parent&&this._parent._walkParent(e),e(this)}get parent(){return this._parent}_setParent(e,i=!1){const r=this._parent;e!==r&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,i&&(this._removeParent(r),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return c1e(this._downPoints,(e,i)=>e>i?1:e<i?-1:0)[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}};Object.defineProperty(Wo,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(Wo,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Bs.classNames.concat([Wo.className])});let j1=class extends Bs{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("color")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fill")||this.isDirty("fillOpacity"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),i=this.get("width",100),r=this.get("height",100),n=this.get("fill"),l=this.get("fillOpacity",1);this._display.clear(),this._backgroundDisplay.clear(),n&&l>0&&(this._backgroundDisplay.beginFill(n,l),this._backgroundDisplay.drawRect(0,0,i,r),this._backgroundDisplay.endFill()),this._display.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(this._display,this._backgroundDisplay,e,i,r)}}};Object.defineProperty(j1,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(j1,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Bs.classNames.concat([j1.className])});let F1=class extends j1{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load()}_draw(){super._draw();const e=this._image;if(e){const i=this.get("width",100),r=this.get("height",100),n=this.get("fit","image");let l=0,d=0;n=="pattern"?(l=i,d=r):(l=e.width,d=e.height,n=="image"&&(this.set("width",l),this.set("height",d)));let y=0,v=0;this.get("centered",!0)&&(y=i/2-l/2,v=r/2-d/2),this._display.image(e,l,d,y,v)}}_load(){const e=this.get("src");if(e){const i=new Image;i.src=e,i.decode().then(()=>{this._image=i,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(r=>{})}}};var $2;Object.defineProperty(F1,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(F1,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j1.classNames.concat([F1.className])}),function(t){t.ADD="lighter",t.COLOR="color",t.COLOR_BURN="color-burn",t.COLOR_DODGE="color-dodge",t.DARKEN="darken",t.DIFFERENCE="difference",t.DST_OVER="destination-over",t.EXCLUSION="exclusion",t.HARD_LIGHT="hard-light",t.HUE="hue",t.LIGHTEN="lighten",t.LUMINOSITY="luminosity",t.MULTIPLY="multiply",t.NORMAL="source-over",t.OVERLAY="overlay",t.SATURATION="saturation",t.SCREEN="screen",t.SOFT_LIGHT="soft-light",t.SRC_ATOP="source-atop",t.XOR="xor"}($2||($2={}));const C7e=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset"];let jl=class extends Wo{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const i=e.get("target");i&&(this._disposers.push(i.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(i.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");rt(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);const i=this.get("strokeDashoffset");i&&this._display.setLineDashOffset(i);const r=this.get("blendMode",$2.NORMAL);this._display.blendMode=r;const n=this.get("draw");n&&n(this._display,this);const l=this.get("svgPath");l!=null&&this._display.svgPath(l)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),i=this.get("fillGradient"),r=this.get("fillPattern"),n=this.get("fillOpacity"),l=this.get("stroke"),d=this.get("strokeGradient"),y=this.get("strokePattern"),v=this.get("shadowColor"),x=this.get("shadowBlur"),$=this.get("shadowOffsetX"),E=this.get("shadowOffsetY"),k=this.get("shadowOpacity");if(v&&(x||$||E)&&this._display.shadow(v,x,$,E,k),r){let P=!1;!e||r.get("fill")&&!r.get("fillInherited")||(r.set("fill",e),r.set("fillInherited",!0),P=!0),!l||r.get("color")&&!r.get("colorInherited")||(r.set("color",l),r.set("colorInherited",!0),P=!0),P&&r._changed();const D=r.pattern;D&&(this._display.beginFill(D,n),this._display.endFill(),r instanceof F1&&r.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}else if(i){if(e){const D=i.get("stops",[]);D.length&&Te(D,L=>{L.color&&!L.colorInherited||!e||(L.color=e,L.colorInherited=!0),(L.opacity==null||L.opacityInherited)&&(L.opacity=n,L.opacityInherited=!0)})}const P=i.getFill(this);P&&(this._display.beginFill(P,n),this._display.endFill())}else e&&(this._display.beginFill(e,n),this._display.endFill());if(l||d||y){const P=this.get("strokeOpacity");let D=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(D/=this.get("scale",1)),this.get("crisp")&&(D/=this._root._renderer.resolution);const L=this.get("lineJoin");if(y){let N=!1;!l||y.get("color")&&!y.get("colorInherited")||(y.set("color",l),y.set("colorInherited",!0),N=!0),N&&y._changed();const B=y.pattern;B&&(this._display.lineStyle(D,B,P,L),this._display.endStroke(),y instanceof F1&&y.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}else if(d){const N=d.get("stops",[]);N.length&&Te(N,W=>{W.color&&!W.colorInherited||!l||(W.color=l,W.colorInherited=!0),(W.opacity==null||W.opacityInherited)&&(W.opacity=P,W.opacityInherited=!0)});const B=d.getFill(this);B&&(this._display.lineStyle(D,B,P,L),this._display.endStroke())}else l&&(this._display.lineStyle(D,l,P,L),this._display.endStroke())}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}};Object.defineProperty(jl,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(jl,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Wo.classNames.concat([jl.className])});let T0=class extends jl{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}};function Fl(t,e){t.get("reverseChildren",!1)?t.children.eachReverse(e):t.children.each(e)}Object.defineProperty(T0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(T0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jl.classNames.concat([T0.className])});let Nl=class extends Bs{};Object.defineProperty(Nl,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(Nl,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Bs.classNames.concat([Nl.className])});let I0=class extends Nl{updateContainer(e){let i=e.get("paddingLeft",0),r=e.innerWidth(),n=0;Fl(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("width");if(y instanceof yi){n+=y.value;let v=r*y.value,x=d.get("minWidth",d.getPrivate("minWidth",-1/0));x>v&&(r-=x,n-=y.value);let $=d.get("maxWidth",d.getPrivate("maxWidth",1/0));v>$&&(r-=$,n-=y.value)}else rt(y)||(y=d.width()),r-=y+d.get("marginLeft",0)+d.get("marginRight",0)}}),(r<=0||r==1/0)&&(r=.1),Fl(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("width");if(y instanceof yi){let v=r*y.value/n-d.get("marginLeft",0)-d.get("marginRight",0),x=d.get("minWidth",d.getPrivate("minWidth",-1/0)),$=d.get("maxWidth",d.getPrivate("maxWidth",1/0));v=Math.min(Math.max(x,v),$),d.setPrivate("width",v)}}});let l=i;Fl(e,d=>{if(d.get("position")=="relative")if(d.isVisible()){let y=d.adjustedLocalBounds(),v=d.get("marginLeft",0),x=d.get("marginRight",0),$=d.get("maxWidth"),E=y.left,k=y.right;$&&k-E>$&&(k=E+$);let P=l+v-E;d.setPrivate("x",P),l=P+k+x}else d.setPrivate("x",void 0)})}};Object.defineProperty(I0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(I0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Nl.classNames.concat([I0.className])});let E0=class extends Nl{updateContainer(e){let i=e.get("paddingTop",0),r=e.innerHeight(),n=0;Fl(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("height");if(y instanceof yi){n+=y.value;let v=r*y.value,x=d.get("minHeight",d.getPrivate("minHeight",-1/0));x>v&&(r-=x,n-=y.value);let $=d.get("maxHeight",d.getPrivate("maxHeight",1/0));v>$&&(r-=$,n-=y.value)}else rt(y)||(y=d.height()),r-=y+d.get("marginTop",0)+d.get("marginBottom",0)}}),(r<=0||r==1/0)&&(r=.1),Fl(e,d=>{if(d.isVisible()&&d.get("position")=="relative"){let y=d.get("height");if(y instanceof yi){let v=r*y.value/n-d.get("marginTop",0)-d.get("marginBottom",0),x=d.get("minHeight",d.getPrivate("minHeight",-1/0)),$=d.get("maxHeight",d.getPrivate("maxHeight",1/0));v=Math.min(Math.max(x,v),$),d.setPrivate("height",v)}}});let l=i;Fl(e,d=>{if(d.get("position")=="relative")if(d.isVisible()){let y=d.adjustedLocalBounds(),v=d.get("marginTop",0),x=y.top,$=y.bottom,E=d.get("maxHeight");E&&$-x>E&&($=x+E);let k=d.get("marginBottom",0),P=l+v-x;d.setPrivate("y",P),l=P+$+k}else d.setPrivate("y",void 0)})}};Object.defineProperty(E0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(E0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Nl.classNames.concat([E0.className])});let $d=class extends Nl{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let i=e.get("paddingLeft",0),r=e.get("paddingRight",0),n=e.get("paddingTop",0),l=e.maxWidth()-i-r,d=l,y=1;Fl(e,D=>{if(D.get("visible")&&D.getPrivate("visible")&&!D.get("forceHidden")&&D.get("position")!="absolute"){let L=D.width();L<d&&(d=L),L>y&&(y=L)}}),d=nn(d,1,l),y=nn(y,1,l);let v=1;v=this.get("fixedWidthGrid")?l/y:l/d,v=Math.max(1,Math.floor(v)),v=Math.min(this.get("maxColumns",Number.MAX_VALUE),v);let x=this.getColumnWidths(e,v,y,l),$=n,E=0,k=0;v=x.length;let P=i;Fl(e,D=>{if(D.get("position")=="relative"&&D.isVisible()){const L=D.get("marginTop",0),N=D.get("marginBottom",0);let B=D.adjustedLocalBounds(),W=D.get("marginLeft",0),q=D.get("marginRight",0),Y=P+W-B.left,ie=$+L-B.top;D.setPrivate("x",Y),D.setPrivate("y",ie),P+=x[E]+q,k=Math.max(k,D.height()+L+N),E++,E>=v&&(E=0,P=i,$+=k)}})}getColumnWidths(e,i,r,n){let l=0,d=[],y=0;return Fl(e,v=>{let x=v.adjustedLocalBounds();v.get("position")!="absolute"&&v.isVisible()&&(this.get("fixedWidthGrid")?d[y]=r:d[y]=Math.max(0|d[y],x.right-x.left+v.get("marginLeft",0)+v.get("marginRight",0)),y<e.children.length-1&&(y++,y==i&&(y=0)))}),Te(d,v=>{l+=v}),l>n?i>2?(i-=1,this.getColumnWidths(e,i,r,n)):[n]:d}};Object.defineProperty($d,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty($d,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Nl.classNames.concat([$d.className])});let Jo=class{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e,i=!1,r=!1){let n=[];e=this.escape(e);let l=i?e.split("'"):[e];for(let d=0;d<l.length;d++){let y=l[d];if(y!=="")if(d%2==0){y=y.replace(/\]\[/g,"]"+jh+"["),y=y.replace(/\[\]/g,"[ ]");let v=y.split(/[\[\]]+/);for(let x=0;x<v.length;x++){let $=this.cleanUp(this.unescape(v[x]));$!==jh&&$!==""&&(x%2==0?n.push({type:"value",text:$}):n.push({type:r?"value":"format",text:"["+$+"]"}))}}else{let v=y.split(/[\[\]]+/);for(let x=0;x<v.length;x++){let $=this.cleanUp(this.unescape(v[x]));$!==""&&(x%2==0?n.push({type:"text",text:$}):this.isImage($)?n.push({type:"image",text:"["+$+"]"}):n.push({type:"format",text:"["+$+"]"}))}}}return n}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let i={};if(e==""||e=="[ ]")return{};const r=e.match(/('[^']*')|("[^"]*")/gi);if(r)for(let l=0;l<r.length;l++)e=e.replace(r[l],r[l].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let n=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!n)return{};for(let l=0;l<n.length;l++)if(n[l].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))i.fontWeight=n[l];else if(n[l].match(/^(underline|line-through)$/i))i.textDecoration=n[l];else if(n[l]!="/")if(n[l].match(/:/)){const d=n[l].replace("+"," ").split(/:[ ]*/);i[d[0]]=d[1]}else i.fill=et.fromString(n[l]);return i}};function T2(t,e){if(e!=null){e=""+e;let i,r=(e=Jo.escape(e)).match(/\{([^}]+)\}/g);if(r)for(i=0;i<r.length;i++){let n=o6(t,r[i].replace(/\{([^}]+)\}/,"$1"));n==null&&(n=""),e=e.split(r[i]).join(n)}e=Jo.unescape(e)}else e="";return e}function o6(t,e,i){let r;const n=t.dataItem;let l,d=[],y=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;l=y.exec(e),l!==null;)if(l[3]){d.push({prop:l[3]});const v=t.getDateFormatter().get("dateFields",[]),x=t.getNumberFormatter().get("numericFields",[]),$=t.getDurationFormatter().get("durationFields",[]);v.indexOf(l[3])!==-1?d.push({method:"formatDate",params:[]}):x.indexOf(l[3])!==-1?d.push({method:"formatNumber",params:[]}):$.indexOf(l[3])!==-1&&d.push({method:"formatDuration",params:[]})}else{let v=[];if(Ib(l[2])!=""){let x,$=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;x=$.exec(l[2]),x!==null;)v.push(x[1]||x[2]||x[3])}d.push({method:l[1],params:v})}if(n){r=jc(t,d,n._settings),(r==null||z_(r))&&(r=jc(t,d,n));let v=n.dataContext;r==null&&v&&(r=jc(t,d,v),r==null&&(r=jc(t,[{prop:e}],v)),r==null&&v.dataContext&&(r=jc(t,d,v.dataContext))),r==null&&n.component&&n.component.dataItem!==n&&(r=o6(n.component,e))}return r==null&&(r=jc(t,d,t)),r==null&&t.parent&&(r=o6(t.parent,e)),r}function X1e(t,e){const i=t.getPrivate("customData");if(z_(i))return i[e]}function jc(t,e,i,r){let n=i,l=!1;for(let d=0,y=e.length;d<y;d++){let v=e[d];if(v.prop){if(n instanceof Wo){let x=n.get(v.prop);x==null&&(x=n.getPrivate(v.prop)),x==null&&(x=X1e(n,v.prop)),x==null&&(x=n[v.prop]),n=x}else if(n.get){let x=n.get(v.prop);x==null&&(x=n[v.prop]),n=x}else n=n[v.prop];if(n==null)return}else switch(v.method){case"formatNumber":let x=an(n);x!=null&&(n=t.getNumberFormatter().format(x,r||v.params[0]||void 0),l=!0);break;case"formatDate":let $=Xye(n);if(!e6($)||B$($.getTime()))return;$!=null&&(n=t.getDateFormatter().format($,r||v.params[0]||void 0),l=!0);break;case"formatDuration":let E=an(n);E!=null&&(n=t.getDurationFormatter().format(E,r||v.params[0]||void 0,v.params[1]||void 0),l=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[v.method]&&n[v.method].apply(i,v.params)}}if(!l){let d=[{method:"",params:r}];if(r==null)rt(n)?(d[0].method="formatNumber",d[0].params=""):e6(n)&&(d[0].method="formatDate",d[0].params="");else{let y=$1e(r);y==="number"?d[0].method="formatNumber":y==="date"?d[0].method="formatDate":y==="duration"&&(d[0].method="formatDuration")}d[0].method&&(n=jc(t,d,n))}return n}Object.defineProperty(Jo,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});let un=class dB extends Wo{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new h1e(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){D1(this.allChildren(),e=>{e.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate("x"),e.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty("maskContent")){const e=this._childrenDisplay;let i=this._contentMask;this.get("maskContent")?i||(i=T0.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=i,e.addChildAt(i._display,0),e.mask=i._display):i&&(e.removeChild(i._display),e.mask=null,i.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),Te(this._percentageSizeChildren,e=>{e._updateSize()}),Te(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){const e=this.get("background");let i=this._localBounds;if(i&&!this.isHidden()){let r=i.left,n=i.top,l=i.right-r,d=i.bottom-n,y=this.get("maxWidth"),v=this.get("maxHeight");v&&d>v&&(d=v),y&&l>y&&(l=y);let x=this.width(),$=this.height();e&&(e.setAll({width:l,height:d,x:r,y:n}),this._display.interactive&&(e._display.interactive=!0));const E=this._contentMask;E&&E.setAll({width:x+1,height:$+1});const k=this.get("verticalScrollbar");if(k){k.set("height",$),k.set("x",x-k.width()-k.get("marginRight",0)),k.set("end",k.get("start",0)+$/this._contentHeight);const P=k.get("background");P&&P.setAll({width:k.width(),height:$});let D=!0;this._contentHeight<=$&&(D=!1),k.setPrivate("visible",D)}}}_applyThemes(){return!!super._applyThemes()&&(this.eachChildren(e=>{e._applyThemes()}),!0)}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren(i=>{i.states.apply(e)})}_applyStateAnimated(e,i){super._applyStateAnimated(e,i),this.get("setStateOnChildren")&&this.eachChildren(r=>{r.states.applyAnimate(e,i)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let e=this.get("width"),i=this.get("height"),r=this.getPrivate("width"),n=this.getPrivate("height"),l={left:0,top:0,right:this.width(),bottom:this.height()},d=this.get("layout"),y=!1,v=!1;if((d instanceof I0||d instanceof $d)&&(y=!0),d instanceof E0&&(v=!0),e==null&&r==null||i==null&&n==null||this.get("verticalScrollbar")){let x=Number.MAX_VALUE,$=x,E=-x,k=x,P=-x;const D=this.get("paddingLeft",0),L=this.get("paddingTop",0),N=this.get("paddingRight",0),B=this.get("paddingBottom",0);this.children.each(W=>{if(W.get("position")!="absolute"&&W.get("isMeasured")){let q=W.adjustedLocalBounds(),Y=W.x(),ie=W.y(),se=Y+q.left,ue=Y+q.right,de=ie+q.top,be=ie+q.bottom;y&&(se-=W.get("marginLeft",0),ue+=W.get("marginRight",0)),v&&(de-=W.get("marginTop",0),be+=W.get("marginBottom",0)),se<$&&($=se),ue>E&&(E=ue),de<k&&(k=de),be>P&&(P=be)}}),$==x&&($=0),E==-x&&(E=0),k==x&&(k=0),P==-x&&(P=0),l.left=$-D,l.top=k-L,l.right=E+N,l.bottom=P+B}this._contentWidth=l.right-l.left,this._contentHeight=l.bottom-l.top,rt(e)&&(l.left=0,l.right=e),rt(r)&&(l.left=0,l.right=r),rt(i)&&(l.top=0,l.bottom=i),rt(n)&&(l.top=0,l.bottom=n),this._localBounds=l}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const e=this.innerWidth(),i=this.innerHeight();if(e!=this._prevWidth||i!=this._prevHeight){let r=this.get("layout"),n=!1,l=!1;r&&((r instanceof I0||r instanceof $d)&&(n=!0),r instanceof E0&&(l=!0)),Te(this._percentageSizeChildren,d=>{if(!n){let y=d.get("width");y instanceof yi&&d.setPrivate("width",y.value*e)}if(!l){let y=d.get("height");y instanceof yi&&d.setPrivate("height",y.value*i)}}),Te(this._percentagePositionChildren,d=>{d.markDirtyPosition(),d.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=i,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){const e=this.get("html");e&&e!==""?this._root._setHTMLContent(this,T2(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.children.removeValue(e.startGrip),e.children.removeValue(e.endGrip),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let i=this.get("background");i||(i=this.set("background",T0.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",r=>{const n=r.originalEvent;if(!w1e(n,this))return;n.preventDefault();let l=n.deltaY/5e3;const d=e.get("start",0),y=e.get("end",1);d+l<=0&&(l=-d),y+l>=1&&(l=1-y),d+l>=0&&y+l<=1&&(e.set("start",d+l),e.set("end",y+l))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",()=>{let r=this._contentHeight;const n=this._childrenDisplay,l=this._contentMask;n.y=-e.get("start")*r,n.markDirtyLayer(),l&&(l._display.y=-n.y,n.mask=l._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const i=this._prevSettings.verticalScrollbar;i&&(this._display.removeChild(i._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const i=this.get("background");i instanceof Wo&&(i.set("isMeasured",!1),i._setParent(this),this._display.addChildAt(i._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),i=this._prevSettings.mask;if(i&&(this._display.removeChild(i._display),i!=e&&i.dispose()),e){const r=e.parent;r&&r.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(e){this.children.each(i=>{i instanceof dB&&i.walkChildren(e),e(i)})}eachChildren(e){const i=this.get("background");i&&e(i);const r=this.get("verticalScrollbar");r&&e(r);const n=this.get("mask");n&&e(n),this.children.values.forEach(l=>{e(l)})}allChildren(){const e=[];return this.eachChildren(i=>{e.push(i)}),e}_setDataItem(e){const i=e!==this._dataItem;super._setDataItem(e);const r=this.get("html","");r&&r!==""&&i&&this._root._setHTMLContent(this,T2(this,r))}};Object.defineProperty(un,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(un,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Wo.classNames.concat([un.className])});let N1=class extends Wo{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(this.get("text"))super._updateBounds();else{let e={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=e}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let i=this.get("opacity",1);this._display.alpha=i}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),this.get("role")=="tooltip"&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new wr(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){let i=this.get("fill");i&&(e.fill=i)}if(this.isDirty("fillOpacity")){let i=this.get("fillOpacity",1);i&&(e.fillOpacity=i)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),Te(this._textStyles,i=>{this._dirty[i]&&(e[i]=this.get(i),this.markDirtyBounds())}),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&this.get("role")=="tooltip"&&this._root.updateTooltip(this)}_getText(){const e=this.get("text","");return this.get("populateText")?T2(this,e):e}markDirtyText(){this._display.text=this._getText(),this.get("role")=="tooltip"&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}};Object.defineProperty(N1,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(N1,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Wo.classNames.concat([N1.className])});let Ab=class extends un{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),Te(this._textKeys,e=>{const i=this.get(e);i!=null&&this._text.set(e,i)}),this.get("html","")!==""&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(N1.new(this._root,{}))}_updateChildren(){if(super._updateChildren(),Te(this._textKeys,e=>{this._text.set(e,this.get(e))}),this.isDirty("maxWidth")&&this._setMaxDimentions(),this.isDirty("maxHeight")&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),this.get("html","")!==""?this._text.set("text",""):this._text.set("text",this.get("text")),this.isDirty("textAlign")||this.isDirty("width")){const e=this.get("textAlign");let i;this.get("width")!=null?i=e=="right"?Gi:e=="center"?er:0:e=="left"||e=="start"?i=this.get("paddingLeft"):e!="right"&&e!="end"||(i=-this.get("paddingRight")),this.text.set("x",i)}}_setMaxDimentions(){const e=this.get("rotation"),i=e==90||e==270||e==-90,r=this.get("maxWidth",this.getPrivate("maxWidth",1/0));rt(r)?this.text.set(i?"maxHeight":"maxWidth",r-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(i?"maxHeight":"maxWidth",void 0);const n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));rt(n)?this.text.set(i?"maxWidth":"maxHeight",n-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(i?"maxWidth":"maxHeight",void 0)}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}getText(){return this._text._getText()}};Object.defineProperty(Ab,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(Ab,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:un.classNames.concat([Ab.className])});class Q1e{constructor(e,i){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const i=new this(e,!0);return i.setupDefaultRules(),i}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,i=[]){let r=this._rules[e];r||(r=this._rules[e]=[]),i.sort(Md);const{index:n,found:l}=o1e(r,d=>{const y=Md(d.tags.length,i.length);return y===0?lB(d.tags,i,Md):y});if(l)return r[n].template;{const d=n6.new({});return r.splice(n,0,{tags:i,template:d}),d}}rule(e,i=[]){return this.ruleRaw(e,i)}}let A0=class extends jl{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),i=this.height();if(e>0&&i>0){let r=this.get("cornerRadius",8);r=nn(r,0,Math.min(e/2,i/2));let n=this.get("pointerX",0),l=this.get("pointerY",0),d=this.get("pointerBaseWidth",15)/2,y=0,v=0,x=0,$=(n-y)*(i-v)-(l-v)*(e-y),E=(n-x)*(0-i)-(l-i)*(e-x);const k=this._display;if(k.moveTo(r,0),$>0&&E>0){let P=Math.round(nn(n,r+d,e-d-r));l=nn(l,-1/0,0),k.lineTo(P-d,0),k.lineTo(n,l),k.lineTo(P+d,0)}if(k.lineTo(e-r,0),k.arcTo(e,0,e,r,r),$>0&&E<0){let P=Math.round(nn(l,r+d,i-d-r));n=nn(n,e,1/0),k.lineTo(e,r),k.lineTo(e,Math.max(P-d,r)),k.lineTo(n,l),k.lineTo(e,P+d)}if(k.lineTo(e,i-r),k.arcTo(e,i,e-r,i,r),$<0&&E<0){let P=Math.round(nn(n,r+d,e-d-r));l=nn(l,i,1/0),k.lineTo(e-r,i),k.lineTo(P+d,i),k.lineTo(n,l),k.lineTo(P-d,i)}if(k.lineTo(r,i),k.arcTo(0,i,0,i-r,r),$<0&&E>0){let P=Math.round(nn(l,r+d,i-r-d));n=nn(n,-1/0,0),k.lineTo(0,i-r),k.lineTo(0,P+d),k.lineTo(n,l),k.lineTo(0,Math.max(P-d,r))}k.lineTo(0,r),k.arcTo(0,0,r,0,r),k.closePath()}}}};Object.defineProperty(A0,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(A0,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jl.classNames.concat([A0.className])});let z1=class extends un{constructor(e,i,r,n=[]){super(e,i,r,n),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=L1e(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",A0.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(Ab.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",e=>{e&&(or(e,"pointerover",i=>{this._htmlContentHovered=!0}),or(e,"pointerout",i=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),ah(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),this.get("labelText")!=null&&this.label.set("text",this.get("labelText")),this.get("labelHTML")!=null&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const e=this.get("background");this._keepHoverDp=new ln([e.events.on("pointerover",i=>{let r=this.get("tooltipTarget");r&&(r.parent&&r.parent.getPrivate("tooltipTarget")==r&&(r=r.parent),r.hover())}),e.events.on("pointerout",i=>{let r=this.get("tooltipTarget");r&&(r.parent&&r.parent.getPrivate("tooltipTarget")==r&&(r=r.parent),this._htmlContentHovered||r.unhover())})])}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const i=this.get("background");let r,n;e&&i&&(r=e.get("fill"),n=e.get("stroke"),r==null&&(r=n),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),r!=null&&i.set("fill",r),this._fillDp=e.on("fill",l=>{l!=null&&(i.set("fill",l),this._updateTextColor(l))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),r!=null&&i.set("stroke",r),this._strokeDp=e.on("fill",l=>{l!=null&&i.set("stroke",l)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),r!=null&&this.label.set("fill",r),this._labelDp=e.on("fill",l=>{l!=null&&this.label.set("fill",l)}),this._disposers.push(this._labelDp))),this._updateTextColor(r)}_updateTextColor(e){this.get("autoTextColor")&&(e==null&&(e=this.get("background").get("fill")),e==null&&(e=this._root.interfaceColors.get("background")),e instanceof et&&this.label.set("fill",et.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let i=.5,r=.5,n=this.get("centerX");n instanceof yi&&(i=n.value);let l=this.get("centerY");l instanceof yi&&(r=l.value);let d=e.width(),y=e.height(),v=this.parent,x=0,$=0;if(v){x=v.x(),$=v.y();const $e=v.get("layerMargin");$e&&(x+=$e.left||0,$+=$e.top||0,d+=($e.left||0)+($e.right||0),y+=($e.top||0)+($e.bottom||0))}const E=this.get("bounds",{left:-x,top:-$,right:d-x,bottom:y-$});this._updateBounds();let k=this.width(),P=this.height();k===0&&(k=this._w),P===0&&(P=this._h);let D=this.get("pointTo",{x:d/2,y:y/2}),L=D.x,N=D.y,B=this.get("pointerOrientation"),W=this.get("background"),q=0,Y=0,ie=0;W instanceof A0&&(q=W.get("pointerLength",0),Y=W.get("strokeWidth",0)/2,ie=Y,W.set("width",k),W.set("height",P));let se=0,ue=0,de=E.right-E.left,be=E.bottom-E.top;B=="horizontal"||B=="left"||B=="right"?(Y=0,B=="horizontal"?L>E.left+de/2?(L-=k*(1-i)+q,ie*=-1):L+=k*i+q:B=="left"?L+=k*(1-i)+q:(L-=k*i+q,ie*=-1)):(ie=0,B=="vertical"?N>E.top+P/2+q?N-=P*(1-r)+q:(N+=P*r+q,Y*=-1):B=="down"?N-=P*(1-r)+q:(N+=P*r+q,Y*=-1)),L=nn(L,E.left+k*i,E.left+de-k*(1-i))+ie,N=nn(N,E.top+P*r,E.top+be-P*(1-r))-Y,se=D.x-L+k*i+ie,ue=D.y-N+P*r-Y,this._fx=L,this._fy=N;const we=this.get("animationDuration",0);if(we>0&&this.get("visible")&&this.get("opacity")>.1){const $e=this.get("animationEasing");this.animate({key:"x",to:L,duration:we,easing:$e}),this.animate({key:"y",to:N,duration:we,easing:$e})}else this.set("x",L),this.set("y",N);W instanceof A0&&(W.set("pointerX",se),W.set("pointerY",ue)),k>0&&(this._w=k),P>0&&(this._h=P)}}};Object.defineProperty(z1,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(z1,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:un.classNames.concat([z1.className])});function $t(t,e,i,r){t.set(e,i.get(r)),i.on(r,n=>{t.set(e,n)})}let eme=class extends Q1e{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,i=this._root.interfaceColors,r=this._root.horizontalLayout,n=this._root.verticalLayout,l=this.rule.bind(this);l("InterfaceColors").setAll({stroke:et.fromHex(15066597),fill:et.fromHex(15987699),primaryButton:et.fromHex(6788316),primaryButtonHover:et.fromHex(6779356),primaryButtonDown:et.fromHex(6872182),primaryButtonActive:et.fromHex(6872182),primaryButtonText:et.fromHex(16777215),primaryButtonStroke:et.fromHex(16777215),secondaryButton:et.fromHex(14277081),secondaryButtonHover:et.fromHex(10724259),secondaryButtonDown:et.fromHex(9276813),secondaryButtonActive:et.fromHex(15132390),secondaryButtonText:et.fromHex(0),secondaryButtonStroke:et.fromHex(16777215),grid:et.fromHex(0),background:et.fromHex(16777215),alternativeBackground:et.fromHex(0),text:et.fromHex(0),alternativeText:et.fromHex(16777215),disabled:et.fromHex(11382189),positive:et.fromHex(5288704),negative:et.fromHex(11730944)});{const d=l("ColorSet");d.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[et.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),d.setPrivate("currentStep",0),d.setPrivate("currentPass",0)}l("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:lv(Hy)}),l("Component").setAll({interpolationDuration:0,interpolationEasing:lv(Hy)}),l("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:er,tooltipY:er,tooltipPosition:"fixed",isMeasured:!0}),l("Sprite").states.create("default",{visible:!0,opacity:1}),l("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),l("Graphics").setAll({strokeWidth:1}),l("Chart").setAll({width:Gi,height:Gi,interactiveChildren:!1}),l("Sprite",["horizontal","center"]).setAll({centerX:er,x:er}),l("Sprite",["vertical","center"]).setAll({centerY:er,y:er}),l("Container",["horizontal","layout"]).setAll({layout:r}),l("Container",["vertical","layout"]).setAll({layout:n}),l("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),l("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),l("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),l("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),l("LinearGradient").setAll({rotation:90}),l("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:$d.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),l("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:r,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const d=l("Rectangle",["legend","item","background"]);d.setAll({fillOpacity:0}),$t(d,"fill",i,"background")}l("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:er,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),l("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:Gi,height:Gi,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const d=l("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});$t(d,"fill",i,"disabled"),$t(d,"stroke",i,"disabled")}l("Label",["legend","label"]).setAll({centerY:er,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),$t(l("Label",["legend","label"]).states.create("disabled",{}),"fill",i,"disabled"),l("Label",["legend","value","label"]).setAll({centerY:er,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:Gi,populateText:!0}),$t(l("Label",["legend","value","label"]).states.create("disabled",{}),"fill",i,"disabled"),l("HeatLegend").setAll({stepCount:1}),l("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),l("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:Gi,width:15}),l("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:Gi,height:15}),l("HeatLegend",["vertical"]).setAll({height:Gi}),l("HeatLegend",["horizontal"]).setAll({width:Gi}),l("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),l("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const d=l("Label");d.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),$t(d,"fill",i,"text")}l("RadialLabel").setAll({textType:"regular",centerY:er,centerX:er,inside:!1,radius:0,baseRadius:Gi,orientation:"auto",textAlign:"center"}),l("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),l("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),l("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const d=l("Tick");d.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),$t(d,"stroke",i,"grid")}l("Bullet").setAll({locationX:.5,locationY:.5}),l("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:er,centerY:er,animationEasing:lv(Hy),exportable:!1}),l("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:et.fromHex(16777215)});{const d=l("Label",["tooltip"]);d.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),$t(d,"fill",i,"alternativeText")}l("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:r,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),l("Button").states.create("hover",{}),l("Button").states.create("down",{stateAnimationDuration:0}),l("Button").states.create("active",{});{const d=l("RoundedRectangle",["button","background"]);$t(d,"fill",i,"primaryButton"),$t(d,"stroke",i,"primaryButtonStroke")}$t(l("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),$t(l("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown"),$t(l("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",i,"primaryButtonActive"),$t(l("Graphics",["button","icon"]),"stroke",i,"primaryButtonText"),$t(l("Label",["button"]),"fill",i,"primaryButtonText"),l("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:Gi,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const d=l("RoundedRectangle",["background","button","zoom"]);d.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),$t(d,"fill",i,"primaryButton")}$t(l("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),$t(l("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown");{const d=l("Graphics",["icon","button","zoom"]);d.setAll({crisp:!0,strokeOpacity:.7,draw:y=>{y.moveTo(0,0),y.lineTo(12,0)}}),$t(d,"stroke",i,"primaryButtonText")}l("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:er,centerY:er,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const d=l("RoundedRectangle",["background","resize","button"]);d.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),$t(d,"fill",i,"secondaryButton"),$t(d,"stroke",i,"secondaryButtonStroke")}$t(l("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),$t(l("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown");{const d=l("Graphics",["resize","button","icon"]);d.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:y=>{y.moveTo(0,.5),y.lineTo(0,12.5),y.moveTo(4,.5),y.lineTo(4,12.5)}}),$t(d,"stroke",i,"secondaryButtonText")}l("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),l("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),l("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const d=l("RoundedRectangle",["play","background"]);d.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),$t(d,"fill",i,"primaryButton")}{const d=l("Graphics",["play","icon"]);d.setAll({stateAnimationDuration:0,dx:1,draw:y=>{y.moveTo(0,-5),y.lineTo(8,0),y.lineTo(0,5),y.lineTo(0,-5)}}),$t(d,"fill",i,"primaryButtonText")}l("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),l("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:d=>{d.moveTo(-4,-5),d.lineTo(-1,-5),d.lineTo(-1,5),d.lineTo(-4,5),d.lineTo(-4,-5),d.moveTo(4,-5),d.lineTo(1,-5),d.lineTo(1,5),d.lineTo(4,5),d.lineTo(4,-5)}}),l("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const d=l("RoundedRectangle",["switch","background"]);d.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),$t(d,"fill",i,"primaryButton")}{const d=l("Circle",["switch","icon"]);d.setAll({radius:8,centerY:0,centerX:0,dx:0}),$t(d,"fill",i,"primaryButtonText")}l("Graphics",["switch","icon"]).states.create("active",{dx:16}),l("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:lv(Hy)}),l("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:Gi}),l("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:Gi}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const d=l("RoundedRectangle",["scrollbar","main","background"]);d.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),$t(d,"fill",i,"fill")}{const d=l("RoundedRectangle",["scrollbar","thumb"]);d.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),$t(d,"fill",i,"secondaryButton")}$t(l("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),$t(l("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown"),l("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:er,width:Gi,centerX:er,ariaLabel:e.translate("Use up and down arrows to move selection")}),l("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:er,centerY:er,height:Gi,ariaLabel:e.translate("Use left and right arrows to move selection")});{const d=l("PointedRectangle",["axis","tooltip","background"]);d.setAll({cornerRadius:0}),$t(d,"fill",i,"alternativeBackground")}l("Label",["axis","tooltip"]).setAll({role:void 0}),l("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),l("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),l("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),l("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),l("Star").setAll({spikes:5,innerRadius:5,radius:10}),l("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),l("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),l("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),l("SpriteResizer").setAll({rotationStep:10}),l("Container",["resizer","grip"]).states.create("hover",{});{const d=l("RoundedRectangle",["resizer","grip"]);d.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),$t(d,"fill",i,"background"),$t(d,"stroke",i,"alternativeBackground")}{const d=l("RoundedRectangle",["resizer","grip","outline"]);d.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),d.states.create("hover",{fillOpacity:.3}),$t(d,"fill",i,"alternativeBackground")}l("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),l("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const d=l("Rectangle",["resizer","rectangle"]);d.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),$t(d,"stroke",i,"alternativeBackground")}}};class tme{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(e=>{Te(e,i=>{Te(this._targets,r=>{r.target===i.target&&r.callback()})})})}addTarget(e,i){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:i})}removeTarget(e){this._observer.unobserve(e),V_(this._targets,i=>i.target!==e)}}class B_{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,i){if(this._timer===null){let n=null;const l=()=>{const d=Date.now();(n===null||d>n+B_.delay)&&(n=d,Te(this._targets,y=>{let v=y.target.getBoundingClientRect();v.width===y.size.width&&v.height===y.size.height||(y.size=v,y.callback())})),this._targets.length===0?this._timer=null:this._timer=requestAnimationFrame(l)};this._timer=requestAnimationFrame(l)}let r={width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0};this._targets.push({target:e,callback:i,size:r})}removeTarget(e){V_(this._targets,i=>i.target!==e),this._targets.length===0&&this._timer!==null&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(B_,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let G5=null;function ime(){return G5===null&&(G5=typeof ResizeObserver<"u"?new tme:new B_),G5}class rme{constructor(e,i){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=ime(),this._element=e,this._listener=tB(i),this._sensor.addTarget(e,i)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class kb extends Bs{}Object.defineProperty(kb,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(kb,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Bs.classNames.concat([kb.className])});class sme extends Bs{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",i="_small_number_suffix_",r="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(i+"24")},{number:1e-21,suffix:this._t(i+"21")},{number:1e-18,suffix:this._t(i+"18")},{number:1e-15,suffix:this._t(i+"15")},{number:1e-12,suffix:this._t(i+"12")},{number:1e-9,suffix:this._t(i+"9")},{number:1e-6,suffix:this._t(i+"6")},{number:.001,suffix:this._t(i+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(r+"B")},{number:1024,suffix:this._t(r+"KB")},{number:1048576,suffix:this._t(r+"MB")},{number:1073741824,suffix:this._t(r+"GB")},{number:1099511627776,suffix:this._t(r+"TB")},{number:0x4000000000000,suffix:this._t(r+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n;(i==null||Z0(i)&&i.toLowerCase()==="number")&&(i=this.get("numberFormat",""));let l=Number(e);if(z_(i))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),i).format(l):new Intl.NumberFormat(void 0,i).format(l)}catch{return"Invalid"}else{i=U$(i);let d,y=this.parseFormat(i,this._root.language);d=l>this.get("negativeBase")?y.positive:l<this.get("negativeBase")?y.negative:y.zero,r==null||d.mod||(d=d1e(d),d.decimals.active=l==0?0:r),n=d.template.split(jh).join(this.applyFormat(l,d))}return n}parseFormat(e,i){const r=i.translateEmpty("_thousandSeparator"),n=i.translateEmpty("_decimalSeparator");let l={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:n},template:"",source:"",parsed:!1}},d=(e=e.replace("||",u0)).split("|");return l.positive.source=d[0],d[2]===void 0?l.zero=l.positive:l.zero.source=d[2],d[1]===void 0?l.negative=l.positive:l.negative.source=d[1],Ti(l,(y,v)=>{if(v.parsed)return;let x=v.source;x.toLowerCase()==="number"&&(x=this.get("numberFormat","#,###.#####"));let $=Jo.chunk(x,!0);for(let E=0;E<$.length;E++){let k=$[E];if(k.text=k.text.replace(u0,"|"),k.type==="value"){let P=k.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/);if(P)if(P===null||P[0]==="")v.template+=k.text;else{let D=P[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/);D&&(v.mod=D[0].toLowerCase(),v.modSpacing=!!P[0].match(/[ ]{1}[abespABESP%!]{1}$/));let L=P[0].split(".");if(L[0]!==""){v.thousands.active=(L[0].match(/0/g)||[]).length,v.thousands.passive=(L[0].match(/\#/g)||[]).length+v.thousands.active;let N=L[0].split(",");N.length===1||(v.thousands.interval=(N.pop()||"").length,v.thousands.interval===0&&(v.thousands.interval=-1))}L[1]===void 0||(v.decimals.active=(L[1].match(/0/g)||[]).length,v.decimals.passive=(L[1].match(/\#/g)||[]).length+v.decimals.active),v.template+=k.text.split(P[0]).join(jh)}}else v.template+=k.text}v.parsed=!0}),l}applyFormat(e,i){let r=e<0;e=Math.abs(e);let n="",l="",d=i.mod?i.mod.split(""):[];if(d.indexOf("b")!==-1){let E=this.applyPrefix(e,this.get("bytePrefixes"),d.indexOf("!")!==-1);e=E[0],n=E[1],l=E[2],i.modSpacing&&(l=" "+l)}else if(d.indexOf("a")!==-1){let E=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),d.indexOf("!")!==-1);e=E[0],n=E[1],l=E[2],i.modSpacing&&(l=" "+l)}else if(d.indexOf("p")!==-1){let E=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(E)),n=this._root.language.translate("_percentPrefix"),l=this._root.language.translate("_percentSuffix"),n==""&&l==""&&(l="%")}else if(d.indexOf("%")!==-1){let E=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(E)),l="%"}else if(d.indexOf("")!==-1){let E=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(E)),l=""}if(d.indexOf("e")!==-1){let E;E=i.decimals.passive>=0?e.toExponential(i.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(E[0]),l="e"+E[1],i.modSpacing&&(l=" "+l)}else if(i.decimals.passive===0)e=Math.round(e);else if(i.decimals.passive>0){let E=Math.pow(10,i.decimals.passive);e=Math.round(e*E)/E}let y="",v=Qye(e).split("."),x=v[0];if(x.length<i.thousands.active&&(x=Array(i.thousands.active-x.length+1).join("0")+x),i.thousands.interval>0){let E=[],k=x.split("").reverse().join("");for(let P=0,D=x.length;P<=D;P+=i.thousands.interval){let L=k.substr(P,i.thousands.interval).split("").reverse().join("");L!==""&&E.unshift(L)}x=E.join(i.thousands.separator)}y+=x,v.length===1&&v.push("");let $=v[1];return $.length<i.decimals.active&&($+=Array(i.decimals.active-$.length+1).join("0")),$!==""&&(y+=i.decimals.separator+$),y===""&&(y="0"),e!==0&&r&&d.indexOf("s")===-1&&(y="-"+y),n&&(y=n+y),l&&(y+=l),y}applyPrefix(e,i,r=!1){let n=e,l="",d="",y=!1,v=1;for(let x=0,$=i.length;x<$;x++)i[x].number<=e&&(i[x].number===0?n=0:(n=e/i[x].number,v=i[x].number),l=i[x].prefix,d=i[x].suffix,y=!0);return!y&&r&&i.length&&e!=0&&(n=e/i[0].number,l=i[0].prefix,d=i[0].suffix,y=!0),y&&(n=parseFloat(n.toPrecision(Math.min(v.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,l,d]}escape(e){return e.replace("||",u0)}unescape(e){return e.replace(u0,"|")}}function pB(t,e){let i=0,r=0,n=1,l=0,d=0,y=0,v=0,x=0;return t.formatToParts(e).forEach($=>{switch($.type){case"year":i=+$.value;break;case"month":r=+$.value-1;break;case"day":n=+$.value;break;case"hour":l=+$.value;break;case"minute":d=+$.value;break;case"second":y=+$.value;break;case"fractionalSecond":v=+$.value;break;case"weekday":switch($.value){case"Sun":x=0;break;case"Mon":x=1;break;case"Tue":x=2;break;case"Wed":x=3;break;case"Thu":x=4;break;case"Fri":x=5;break;case"Sat":x=6}}}),l===24&&(l=0),{year:i,month:r,day:n,hour:l,minute:d,second:y,millisecond:v,weekday:x}}function sk(t,e){const{year:i,month:r,day:n,hour:l,minute:d,second:y,millisecond:v}=pB(t,e);return Date.UTC(i,r,n,l,d,y,v)}let nme=class{constructor(e,i){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const i=this.offsetUTC(e),r=e.getTimezoneOffset(),n=new Date(e);n.setUTCMinutes(n.getUTCMinutes()-(i-r));const l=n.getTimezoneOffset();return r!=l&&n.setUTCMinutes(n.getUTCMinutes()+l-r),n}offsetUTC(e){return(sk(this._utc,e)-sk(this._dtf,e))/6e4}parseDate(e){return pB(this._dtf,e)}};class ome extends Bs{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i){let r;i!==void 0&&i!==""||(i=this.get("dateFormat","yyyy-MM-dd"));let n=e;if(z_(i))try{const y=this.get("intlLocales");return y?new Intl.DateTimeFormat(y,i).format(n):new Intl.DateTimeFormat(void 0,i).format(n)}catch{return"Invalid"}let l=this.parseFormat(i);const d=this._root.timezone;return d&&!this._root.utc&&(n=d.convertLocal(n)),rt(n.getTime())?(r=this.applyFormat(n,l),this.get("capitalize")&&(r=r.replace(/^.{1}/,r.substr(0,1).toUpperCase())),r):"Invalid date"}applyFormat(e,i){let r,n,l,d,y,v,x,$,E=i.template,k=e.getTime();this._root.utc?(r=e.getUTCFullYear(),n=e.getUTCMonth(),l=e.getUTCDay(),d=e.getUTCDate(),y=e.getUTCHours(),v=e.getUTCMinutes(),x=e.getUTCSeconds(),$=e.getUTCMilliseconds()):(r=e.getFullYear(),n=e.getMonth(),l=e.getDay(),d=e.getDate(),y=e.getHours(),v=e.getMinutes(),x=e.getSeconds(),$=e.getMilliseconds());for(let P=0,D=i.parts.length;P<D;P++){let L="";switch(i.parts[P]){case"G":L=this._t(r<0?"_era_bc":"_era_ad");break;case"yyyy":L=Math.abs(r).toString(),r<0&&(L+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":L=Math.abs(r).toString().substr(-i.parts[P].length),r<0&&(L+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let N=T1e(e,this._root.utc);L=i.parts[P]=="YYYY"?Math.abs(N).toString():Math.abs(N).toString().substr(-i.parts[P].length),N<0&&(L+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":L=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":L=this._t(this._getMonth(n)).substr(0,1);break;case"MMMM":L=this._t(this._getMonth(n));break;case"MMM":L=this._t(this._getShortMonth(n));break;case"MM":L=qi(n+1,2,"0");break;case"M":L=(n+1).toString();break;case"ww":L=qi(M2(e,this._root.utc),2,"0");break;case"w":L=M2(e,this._root.utc).toString();break;case"W":L=I1e(e,this._root.utc).toString();break;case"dd":L=qi(d,2,"0");break;case"d":L=d.toString();break;case"DD":case"DDD":L=qi(ek(e,this._root.utc).toString(),i.parts[P].length,"0");break;case"D":L=ek(e,this._root.utc).toString();break;case"t":L=this._root.language.translateFunc("_dateOrd").call(this,d);break;case"E":L=(l||7).toString();break;case"EE":L=qi((l||7).toString(),2,"0");break;case"EEE":case"eee":L=this._t(this._getShortWeekday(l));break;case"EEEE":case"eeee":L=this._t(this._getWeekday(l));break;case"EEEEE":case"eeeee":L=this._t(this._getShortWeekday(l)).substr(0,1);break;case"e":case"ee":L=(l-(this._root.locale.firstDayOfWeek||1)+1).toString(),i.parts[P]=="ee"&&(L=qi(L,2,"0"));break;case"a":L=y>=12?this._t("PM"):this._t("AM");break;case"aa":L=y>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":L=y>=12?this._t("P"):this._t("A");break;case"h":L=ov(y).toString();break;case"hh":L=qi(ov(y),2,"0");break;case"H":L=y.toString();break;case"HH":L=qi(y,2,"0");break;case"K":L=ov(y,0).toString();break;case"KK":L=qi(ov(y,0),2,"0");break;case"k":L=(y+1).toString();break;case"kk":L=qi(y+1,2,"0");break;case"m":L=v.toString();break;case"mm":L=qi(v,2,"0");break;case"s":L=x.toString();break;case"ss":L=qi(x,2,"0");break;case"S":case"SS":case"SSS":L=Math.round($/1e3*Math.pow(10,i.parts[P].length)).toString();break;case"x":L=k.toString();break;case"n":case"nn":case"nnn":L=qi($,i.parts[P].length,"0");break;case"z":L=av(e,!1,!1,this._root.utc);break;case"zz":L=av(e,!0,!1,this._root.utc);break;case"zzz":L=av(e,!1,!0,this._root.utc);break;case"zzzz":L=av(e,!0,!0,this._root.utc);break;case"Z":case"ZZ":let B=this._root.utc?"UTC":this._root.timezone;B instanceof nme&&(B=B.name);const W=B?A1e(B):e.getTimezoneOffset();let q=Math.abs(W)/60,Y=Math.floor(q),ie=60*q-60*Y;this._root.utc&&(Y=0,ie=0),i.parts[P]=="Z"?(L="GMT",L+=W>0?"-":"+",L+=qi(Y,2)+":"+qi(ie,2)):(L=W>0?"-":"+",L+=qi(Y,2)+qi(ie,2));break;case"i":L=e.toISOString();break;case"I":L=e.toUTCString()}E=E.replace(jh,L)}return E}parseFormat(e){let i={template:"",parts:[]},r=Jo.chunk(e,!0);for(let n=0;n<r.length;n++){let l=r[n];if(l.type==="value"){if(l.text.match(/^date$/i)){let y=this.get("dateFormat","yyyy-MM-dd");Z0(y)||(y="yyyy-MM-dd"),l.text=y}let d=l.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(d)for(let y=0;y<d.length;y++)i.parts.push(d[y]),l.text=l.text.replace(d[y],jh)}i.template+=l.text}return i}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,i){if(e instanceof Date)return e;if(rt(e))return new Date(e);let r;Z0(e)||(e=e.toString());let n="";i=(i=U$(i)).substr(0,e.length);let l=this.parseFormat(i),d={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},y={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},v=0,x=0;for(let k=0;k<l.parts.length;k++){switch(x=k+v+1,l.parts[k]){case"yyyy":case"YYYY":n+="([0-9]{4})",d.year=x;break;case"yyy":case"YYY":n+="([0-9]{3})",d.year3=x;break;case"yy":case"YY":n+="([0-9]{2})",d.year2=x;break;case"y":case"Y":n+="([0-9]{1})",d.year1=x;break;case"MMMM":n+="("+this.getStringList(this._months()).join("|")+")",d.monthLong=x;break;case"MMM":n+="("+this.getStringList(this._shortMonths()).join("|")+")",d.monthShort=x;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",d.month=x;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",d.week=x;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",d.day=x;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",d.yearDay=x;break;case"dddd":n+="("+this.getStringList(this._weekdays()).join("|")+")",d.weekdayLong=x;break;case"ddd":n+="("+this.getStringList(this._shortWeekdays()).join("|")+")",d.weekdayShort=x;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",d.am=x;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",d.hour12Base1=x;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",d.hourBase0=x;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",d.hour12Base0=x;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",d.hourBase1=x;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",d.minute=x;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",d.second=x;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",d.millisecond=x,d.millisecondDigits=l.parts[k].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",d.millisecond=x;break;case"x":n+="([0-9]{1,})",d.timestamp=x;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",d.zone=x;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",d.zone=x;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",d.iso=x,v+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":v--}n+="[^0-9]*"}let $=new RegExp(n),E=e.match($);if(E){if(d.year>-1&&(y.year=parseInt(E[d.year])),d.year3>-1){let k=parseInt(E[d.year3]);k+=1e3,y.year=k}if(d.year2>-1){let k=parseInt(E[d.year2]);k+=k>50?1e3:2e3,y.year=k}if(d.year1>-1){let k=parseInt(E[d.year1]);k=10*Math.floor(new Date().getFullYear()/10)+k,y.year=k}if(d.monthLong>-1&&(y.month=this.resolveMonth(E[d.monthLong])),d.monthShort>-1&&(y.month=this.resolveShortMonth(E[d.monthShort])),d.month>-1&&(y.month=parseInt(E[d.month])-1),d.week>-1&&d.day===-1&&(y.month=0,y.day=E1e(parseInt(E[d.week]),y.year,1,this._root.utc)),d.day>-1&&(y.day=parseInt(E[d.day])),d.yearDay>-1&&(y.month=0,y.day=parseInt(E[d.yearDay])),d.hourBase0>-1&&(y.hour=parseInt(E[d.hourBase0])),d.hourBase1>-1&&(y.hour=parseInt(E[d.hourBase1])-1),d.hour12Base0>-1){let k=parseInt(E[d.hour12Base0]);k==11&&(k=0),d.am>-1&&!this.isAm(E[d.am])&&(k+=12),y.hour=k}if(d.hour12Base1>-1){let k=parseInt(E[d.hour12Base1]);k==12&&(k=0),d.am>-1&&!this.isAm(E[d.am])&&(k+=12),y.hour=k}if(d.minute>-1&&(y.minute=parseInt(E[d.minute])),d.second>-1&&(y.second=parseInt(E[d.second])),d.millisecond>-1){let k=parseInt(E[d.millisecond]);d.millisecondDigits==2?k*=10:d.millisecondDigits==1&&(k*=100),y.millisecond=k}if(d.timestamp>-1){y.timestamp=parseInt(E[d.timestamp]);const k=new Date(y.timestamp);y.year=k.getUTCFullYear(),y.month=k.getUTCMonth(),y.day=k.getUTCDate(),y.hour=k.getUTCHours(),y.minute=k.getUTCMinutes(),y.second=k.getUTCSeconds(),y.millisecond=k.getUTCMilliseconds()}d.zone>-1&&(y.offset=this.resolveTimezoneOffset(new Date(y.year,y.month,y.day),E[d.zone])),d.iso>-1&&(y.year=an(E[d.iso+0]),y.month=an(E[d.iso+1])-1,y.day=an(E[d.iso+2]),y.hour=an(E[d.iso+3]),y.minute=an(E[d.iso+4]),y.second=an(E[d.iso+5]),y.millisecond=an(E[d.iso+6]),E[d.iso+7]=="Z"||E[d.iso+7]=="z"?y.utc=!0:E[d.iso+7]!=""&&(y.offset=this.resolveTimezoneOffset(new Date(y.year,y.month,y.day),E[d.iso+7]))),r=y.utc?new Date(Date.UTC(y.year,y.month,y.day,y.hour,y.minute,y.second,y.millisecond)):new Date(y.year,y.month,y.day,y.hour,y.minute+y.offset,y.second,y.millisecond)}else r=new Date(e);return r}resolveTimezoneOffset(e,i){if(i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let r=i.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),n=r[1],l=r[2],d=r[3],y=60*parseInt(l)+parseInt(d);return n=="+"&&(y*=-1),y-(e||new Date).getTimezoneOffset()}return 0}resolveMonth(e){let i=this._months().indexOf(e);return i>-1||!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._months()).indexOf(e),i>-1)?i:0}resolveShortMonth(e){let i=this._shortMonths().indexOf(e);return i>-1?i:(i=this._months().indexOf(e),i>-1||this._root.language&&!this._root.language.isDefault()&&(i=this._root.language.translateAll(this._shortMonths()).indexOf(e),i>-1)?i:0)}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let i=[];for(let r=0;r<e.length;r++)this._root.language?i.push(QA(this._t(e[r]))):i.push(QA(e[r]));return i}}class ame extends Bs{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",i="_duration_second",r="_duration_minute",n="_duration_hour",l="_duration_day",d="_duration_week",y="_duration_month",v="_duration_year",x="_second",$="_minute",E="_hour",k="_day",P="_week",D="_week",L="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+x),minute:this._t(e+$),hour:this._t(e+E),day:this._t(e+k),week:this._t(e+P),month:this._t(e+D),year:this._t(e+L)},second:{second:this._t(i),minute:this._t(i+$),hour:this._t(i+E),day:this._t(i+k),week:this._t(i+P),month:this._t(i+D),year:this._t(i+L)},minute:{minute:this._t(r),hour:this._t(r+E),day:this._t(r+k),week:this._t(r+P),month:this._t(r+D),year:this._t(r+L)},hour:{hour:this._t(n),day:this._t(n+k),week:this._t(n+P),month:this._t(n+D),year:this._t(n+L)},day:{day:this._t(l),week:this._t(l+P),month:this._t(l+D),year:this._t(l+L)},week:{week:this._t(d),month:this._t(d+D),year:this._t(d+L)},month:{month:this._t(y),year:this._t(y+L)},year:{year:this._t(v)}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,i,r){let n=r||this.get("baseUnit");i!==void 0&&i!==""||(i=this.get("durationFormat")!=null?this.get("durationFormat"):this.getFormat(an(e),void 0,n)),i=U$(i);let l,d=this.parseFormat(i,n),y=Number(e);l=y>this.get("negativeBase")?d.positive:y<this.get("negativeBase")?d.negative:d.zero;let v=this.applyFormat(y,l);return l.color!==""&&(v="["+l.color+"]"+v+"[/]"),v}parseFormat(e,i){let r=i||this.get("baseUnit"),n={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},l=(e=e.replace("||",u0)).split("|");return n.positive.source=l[0],l[2]===void 0?n.zero=n.positive:n.zero.source=l[2],l[1]===void 0?n.negative=n.positive:n.negative.source=l[1],Ti(n,(d,y)=>{if(y.parsed)return;let v=y.source,x=[];x=y.source.match(/^\[([^\]]*)\]/),x&&x.length&&x[0]!==""&&(v=y.source.substr(x[0].length),y.color=x[1]);let $=Jo.chunk(v,!0);for(let E=0;E<$.length;E++){let k=$[E];if(k.text=k.text.replace(u0,"|"),k.type==="value"){k.text.match(/[yYMdDwhHKkmsSn]+a/)&&(y.absolute=!0,k.text=k.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let P=k.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(P)for(let D=0;D<P.length;D++)P[D]==null&&(P[D]=this._unitAliases[P[D]]),y.parts.push(P[D]),k.text=k.text.replace(P[D],jh)}y.template+=k.text}y.parsed=!0}),n}applyFormat(e,i){let r=!i.absolute&&e<this.get("negativeBase");e=Math.abs(e);let n=this.toTimeStamp(e,i.baseUnit),l=i.template;for(let d=0,y=i.parts.length;d<y;d++){let v=i.parts[d],x=this._toTimeUnit(v.substr(0,1)),$=v.length,E=Math.floor(n/this._getUnitValue(x));l=l.replace(jh,qi(E,$,"0")),n-=E*this._getUnitValue(x)}return r&&(l="-"+l),l}toTimeStamp(e,i){return e*this._getUnitValue(i)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,i,r){if(this.get("durationFormat")!=null)return this.get("durationFormat");if(r||(r=this.get("baseUnit")),i!=null&&e!=i){e=Math.abs(e),i=Math.abs(i);let n=this.getValueUnit(Math.max(e,i),r);return this.get("durationFormats")[r][n]}{let n=this.getValueUnit(e,r);return this.get("durationFormats")[r][n]}}getValueUnit(e,i){let r;i||(i=this.get("baseUnit"));let n=this.getMilliseconds(e,i);return p1e(this._getUnitValues(),(l,d)=>{if(l==i||r){if(n/d<=1)return r||(r=l),!1;r=l}return!0}),r}getMilliseconds(e,i){return i||(i=this.get("baseUnit")),e*this._getUnitValue(i)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const fB={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){let e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class lme extends Bs{_setDefaults(){this.setPrivate("defaultLocale",fB),super._setDefaults()}translate(e,i,...r){i||(i=this._root.locale||this.getPrivate("defaultLocale"));let n=e,l=i[e];if(l===null)n="";else if(l!=null)l&&(n=l);else if(i!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...r);if(r.length)for(let d=r.length,y=0;y<d;++y)n=n.split("%"+(y+1)).join(r[y]);return n}translateAny(e,i,...r){return this.translate(e,i,...r)}setTranslationAny(e,i,r){(r||this._root.locale)[e]=i}setTranslationsAny(e,i){Ti(e,(r,n)=>{this.setTranslationAny(r,n,i)})}translateEmpty(e,i,...r){let n=this.translate(e,i,...r);return n==e?"":n}translateFunc(e,i){return this._root.locale[e]?this._root.locale[e]:i!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,i){return this.isDefault()?e:t1e(e,r=>this.translate(r,i))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class U5{constructor(e=1,i=0,r=0,n=1,l=0,d=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=l,this.ty=d}setTransform(e,i,r,n,l,d=1){this.a=Math.cos(l)*d,this.b=Math.sin(l)*d,this.c=-Math.sin(l)*d,this.d=Math.cos(l)*d,this.tx=e-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const i=1/(this.a*this.d+this.c*-this.b);return{x:this.d*i*e.x+-this.c*i*e.y+(this.ty*this.c-this.tx*this.d)*i,y:this.a*i*e.y+-this.b*i*e.x+(-this.ty*this.a+this.tx*this.b)*i}}append(e){const i=this.a,r=this.b,n=this.c,l=this.d;this.a=e.a*i+e.b*n,this.b=e.a*r+e.b*l,this.c=e.c*i+e.d*n,this.d=e.c*r+e.d*l,this.tx=e.tx*i+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*l+this.ty}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var ume=function(){function t(e,i){var r=[],n=!0,l=!1,d=void 0;try{for(var y,v=e[Symbol.iterator]();!(n=(y=v.next()).done)&&(r.push(y.value),!i||r.length!==i);n=!0);}catch(x){l=!0,d=x}finally{try{!n&&v.return&&v.return()}finally{if(l)throw d}}return r}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),V1=2*Math.PI,q5=function(t,e,i,r,n,l,d){var y=t.x,v=t.y;return{x:r*(y*=e)-n*(v*=i)+l,y:n*y+r*v+d}},hme=function(t,e){var i=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(t),n=Math.sin(t),l=Math.cos(t+e),d=Math.sin(t+e);return[{x:r-n*i,y:n+r*i},{x:l+d*i,y:d-l*i},{x:l,y:d}]},nk=function(t,e,i,r){var n=t*i+e*r;return n>1&&(n=1),n<-1&&(n=-1),(t*r-e*i<0?-1:1)*Math.acos(n)},cme=function(t,e,i,r,n,l,d,y,v,x,$,E){var k=Math.pow(n,2),P=Math.pow(l,2),D=Math.pow($,2),L=Math.pow(E,2),N=k*P-k*L-P*D;N<0&&(N=0),N/=k*L+P*D;var B=(N=Math.sqrt(N)*(d===y?-1:1))*n/l*E,W=N*-l/n*$,q=x*B-v*W+(t+i)/2,Y=v*B+x*W+(e+r)/2,ie=($-B)/n,se=(E-W)/l,ue=(-$-B)/n,de=(-E-W)/l,be=nk(1,0,ie,se),we=nk(ie,se,ue,de);return y===0&&we>0&&(we-=V1),y===1&&we<0&&(we+=V1),[q,Y,be,we]},dme=function(t){var e=t.px,i=t.py,r=t.cx,n=t.cy,l=t.rx,d=t.ry,y=t.xAxisRotation,v=y===void 0?0:y,x=t.largeArcFlag,$=x===void 0?0:x,E=t.sweepFlag,k=E===void 0?0:E,P=[];if(l===0||d===0)return[];var D=Math.sin(v*V1/360),L=Math.cos(v*V1/360),N=L*(e-r)/2+D*(i-n)/2,B=-D*(e-r)/2+L*(i-n)/2;if(N===0&&B===0)return[];l=Math.abs(l),d=Math.abs(d);var W=Math.pow(N,2)/Math.pow(l,2)+Math.pow(B,2)/Math.pow(d,2);W>1&&(l*=Math.sqrt(W),d*=Math.sqrt(W));var q=cme(e,i,r,n,l,d,$,k,D,L,N,B),Y=ume(q,4),ie=Y[0],se=Y[1],ue=Y[2],de=Y[3],be=Math.abs(de)/(V1/4);Math.abs(1-be)<1e-7&&(be=1);var we=Math.max(Math.ceil(be),1);de/=we;for(var $e=0;$e<we;$e++)P.push(hme(ue,de)),ue+=de;return P.map(function(ke){var Ge=q5(ke[0],l,d,L,D,ie,se),Fe=Ge.x,ht=Ge.y,ni=q5(ke[1],l,d,L,D,ie,se),Ze=ni.x,Xe=ni.y,oi=q5(ke[2],l,d,L,D,ie,se);return{x1:Fe,y1:ht,x2:Ze,y2:Xe,x:oi.x,y:oi.y}})};function pme(t,e,i){if(e!==i)throw new Error("Required "+i+" arguments for "+t+" but got "+e)}function Wy(t,e,i){if(e<i)throw new Error("Required at least "+i+" arguments for "+t+" but got "+e)}function Js(t,e,i){if(Wy(t,e,i),e%i!=0)throw new Error("Arguments for "+t+" must be in pairs of "+i)}function fme(t){for(let e=0;e<t.length;e+=7){let i=e+3,r=t[i];if(r.length>1){const n=/^([01])([01])(.*)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t.splice(i,0,n[2]),++i,n[3].length>0?t[i]=n[3]:t.splice(i,1))}if(++i,r=t[i],r.length>1){const n=/^([01])(.+)$/.exec(r);n!==null&&(t.splice(i,0,n[1]),++i,t[i]=n[2])}}}function ok(t){if(t===0||t===1)return t;throw new Error("Flag must be 0 or 1")}function yme(t){const e=[0,0,0];for(let i=0;i<24;i++)e[i%3]<<=1,e[i%3]|=1&t,t>>=1;return(0|e[2])+(e[1]<<8)+(e[0]<<16)}function hv(t,e){for(;(!t.interactive||e(t))&&t._parent;)t=t._parent}function mme(t,e,i){return or(t,i6(e),r=>{const n=iB(r);let l=r.touches;l?(l.length==0&&(l=r.changedTouches),i(i1e(l),n)):i([r],n)})}function ak(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i.drawImage(t,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+t.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function Jy(t){t.width=0,t.height=0,t.style.width="0px",t.style.height="0px"}class gme{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class G_ extends G${constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new gme}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new U5}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new U5}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new U5}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,i){e==null?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=i,i&&zp(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return this._colorId===void 0&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(){return this.inactive==0&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(){return this._isInteractive()}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();const i=this.getLocalMatrix(),r=i.apply({x:e.left,y:e.top}),n=i.apply({x:e.right,y:e.top}),l=i.apply({x:e.right,y:e.bottom}),d=i.apply({x:e.left,y:e.bottom});return{left:Math.min(r.x,n.x,l.x,d.x),top:Math.min(r.y,n.y,l.y,d.y),right:Math.max(r.x,n.x,l.x,d.x),bottom:Math.max(r.y,n.y,l.y,d.y)}}on(e,i,r){return this.interactive?this._renderer._addEvent(this,e,i,r):new wr(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,i){const r=this._matrix;let n=r.tx*i,l=r.ty*i;this.crisp&&(n=Math.floor(n)+.5,l=Math.floor(l)+.5),e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,n,l)}_transformMargin(e,i,r){const n=this._matrix;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,(n.tx+r.left)*i,(n.ty+r.top)*i)}_transformLayer(e,i,r){r.margin?this._transformMargin(e,r.scale||i,r.margin):this._transform(e,r.scale||i)}render(e){if(this.visible&&(this.exportable!==!1||!this._renderer._omitTainted)){this._setMatrix();const i=this._renderer.resolution,r=this._renderer.layers,n=this._renderer._ghostLayer,l=n.context,d=this.mask;d&&d._setMatrix(),Te(r,y=>{if(y){const v=y.context;v.save(),d&&(d._transformLayer(v,i,y),d._runPath(v),v.clip()),v.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(v,i,y),this.filter&&(v.filter=this.filter)}}),l.save(),d&&this._isInteractiveMask()&&(d._transformMargin(l,i,n.margin),d._runPath(l),l.clip()),this._transformMargin(l,i,n.margin),this._render(e),l.restore(),Te(r,y=>{y&&y.context.restore()})}}_render(e){this.exportable===!1&&((this._layer||e).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){const e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class vme extends G_{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,i){e._parent=this,this._children.splice(i,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,dn(this._children,e)}_render(e){super._render(e);const i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive;const r=this._layer||e;Te(this._children,n=>{n.compoundAlpha=this.compoundAlpha*this.alpha,n.render(r)}),this.interactive&&this.interactiveChildren&&--i._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),bm(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&Te(this._childLayers,i=>i.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&Te(this._childLayers,e=>{e.dirty=!0})}}function Hi(t,e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.right=Math.max(t.right,e.x),t.bottom=Math.max(t.bottom,e.y)}class Mr{colorize(e,i){}path(e){}addBounds(e){}}class bme extends Mr{colorize(e,i){e.beginPath()}}class H5 extends Mr{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fillStyle=i!==void 0?i:this.color}}class wme extends Mr{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class _me extends Mr{colorize(e,i){e.stroke()}}class W5 extends Mr{constructor(e,i,r){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:r})}colorize(e,i){e.strokeStyle=i!==void 0?i:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}class xme extends Mr{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.setLineDash(this.dash)}}class Sme extends Mr{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,i){e.lineDashOffset=this.dashOffset}}class Mme extends Mr{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const i=this.x,r=this.y,n=i+this.width,l=r+this.height;Hi(e,{x:i,y:r}),Hi(e,{x:n,y:r}),Hi(e,{x:i,y:l}),Hi(e,{x:n,y:l})}}class $me extends Mr{constructor(e,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){Hi(e,{x:this.x-this.radius,y:this.y-this.radius}),Hi(e,{x:this.x+this.radius,y:this.y+this.radius})}}class Tme extends Mr{constructor(e,i,r,n){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){Hi(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),Hi(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class Ime extends Mr{constructor(e,i,r,n,l,d){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:d})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let i=V1e(this.cx,this.cy,this.startAngle*R1,this.endAngle*R1,this.radius);Hi(e,{x:i.left,y:i.top}),Hi(e,{x:i.right,y:i.bottom})}}class Eme extends Mr{constructor(e,i,r,n,l){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class Ame extends Mr{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.lineTo(this.x,this.y)}addBounds(e){Hi(e,{x:this.x,y:this.y})}}class kme extends Mr{constructor(e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x,this.y)}addBounds(e){Hi(e,{x:this.x,y:this.y})}}class Pme extends Mr{path(e){e.closePath()}}class Cme extends Mr{constructor(e,i,r,n,l,d){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:d})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){Hi(e,{x:this.cpX,y:this.cpY}),Hi(e,{x:this.cpX2,y:this.cpY2}),Hi(e,{x:this.toX,y:this.toY})}}class Ome extends Mr{constructor(e,i,r,n){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){Hi(e,{x:this.cpX,y:this.cpY}),Hi(e,{x:this.toX,y:this.toY})}}class Lme extends Mr{constructor(e,i,r,n,l){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:l})}colorize(e,i){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}class Dme extends Mr{constructor(e,i,r,n,l){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){Hi(e,{x:this.x,y:this.y}),Hi(e,{x:this.width,y:this.height})}}class Rme extends G_{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:$2.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,i=1){this._fillAlpha=i,e?e instanceof et?this._pushOp(new H5(e.toCSS(i))):(this.isMeasured=!0,this._pushOp(new H5(e))):this._pushOp(new H5("rgba(0, 0, 0, "+i+")"))}endFill(){this._pushOp(new wme(this._hasShadows))}endStroke(){this._pushOp(new _me)}beginPath(){this._pushOp(new bme)}lineStyle(e=0,i,r=1,n){this._strokeAlpha=r,i?i instanceof et?this._pushOp(new W5(e,i.toCSS(r),n)):this._pushOp(new W5(e,i,n)):this._pushOp(new W5(e,"rgba(0, 0, 0, "+r+")",n))}setLineDash(e){this._pushOp(new xme(e||[]))}setLineDashOffset(e=0){this._pushOp(new Sme(e))}drawRect(e,i,r,n){this._pushOp(new Mme(e,i,r,n))}drawCircle(e,i,r){this._pushOp(new $me(e,i,r))}drawEllipse(e,i,r,n){this._pushOp(new Tme(e,i,r,n))}arc(e,i,r,n,l,d=!1){this._pushOp(new Ime(e,i,r,n,l,d))}arcTo(e,i,r,n,l){this._pushOp(new Eme(e,i,r,n,l))}lineTo(e,i){this._pushOp(new Ame(e,i))}moveTo(e,i){this._pushOp(new kme(e,i))}bezierCurveTo(e,i,r,n,l,d){this._pushOp(new Cme(e,i,r,n,l,d))}quadraticCurveTo(e,i,r,n){this._pushOp(new Ome(e,i,r,n))}closePath(){this._pushOp(new Pme)}shadow(e,i=0,r=0,n=0,l){this._hasShadows=!0,this._pushOp(new Lme(l?e.toCSS(l):e.toCSS(this._fillAlpha||this._strokeAlpha),i,r,n))}image(e,i,r,n,l){this._pushOp(new Dme(e,i,r,n,l))}svgPath(e){let i=0,r=0,n=null,l=null,d=null,y=null;const v=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,x=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let $;for(;($=v.exec(e))!==null;){const E=$[1],k=$[2],P=[];for(;($=x.exec(k))!==null;)P.push($[1]);switch(E!=="S"&&E!=="s"&&E!=="C"&&E!=="c"&&(n=null,l=null),E!=="Q"&&E!=="q"&&E!=="T"&&E!=="t"&&(d=null,y=null),E){case"M":Js(E,P.length,2),i=+P[0],r=+P[1],this.moveTo(i,r);for(let L=2;L<P.length;L+=2)i=+P[L],r=+P[L+1],this.lineTo(i,r);break;case"m":Js(E,P.length,2),i+=+P[0],r+=+P[1],this.moveTo(i,r);for(let L=2;L<P.length;L+=2)i+=+P[L],r+=+P[L+1],this.lineTo(i,r);break;case"L":Js(E,P.length,2);for(let L=0;L<P.length;L+=2)i=+P[L],r=+P[L+1],this.lineTo(i,r);break;case"l":Js(E,P.length,2);for(let L=0;L<P.length;L+=2)i+=+P[L],r+=+P[L+1],this.lineTo(i,r);break;case"H":Wy(E,P.length,1);for(let L=0;L<P.length;++L)i=+P[L],this.lineTo(i,r);break;case"h":Wy(E,P.length,1);for(let L=0;L<P.length;++L)i+=+P[L],this.lineTo(i,r);break;case"V":Wy(E,P.length,1);for(let L=0;L<P.length;++L)r=+P[L],this.lineTo(i,r);break;case"v":Wy(E,P.length,1);for(let L=0;L<P.length;++L)r+=+P[L],this.lineTo(i,r);break;case"C":Js(E,P.length,6);for(let L=0;L<P.length;L+=6){const N=+P[L],B=+P[L+1];n=+P[L+2],l=+P[L+3],i=+P[L+4],r=+P[L+5],this.bezierCurveTo(N,B,n,l,i,r)}break;case"c":Js(E,P.length,6);for(let L=0;L<P.length;L+=6){const N=+P[L]+i,B=+P[L+1]+r;n=+P[L+2]+i,l=+P[L+3]+r,i+=+P[L+4],r+=+P[L+5],this.bezierCurveTo(N,B,n,l,i,r)}break;case"S":Js(E,P.length,4),n!==null&&l!==null||(n=i,l=r);for(let L=0;L<P.length;L+=4){const N=2*i-n,B=2*r-l;n=+P[L],l=+P[L+1],i=+P[L+2],r=+P[L+3],this.bezierCurveTo(N,B,n,l,i,r)}break;case"s":Js(E,P.length,4),n!==null&&l!==null||(n=i,l=r);for(let L=0;L<P.length;L+=4){const N=2*i-n,B=2*r-l;n=+P[L]+i,l=+P[L+1]+r,i+=+P[L+2],r+=+P[L+3],this.bezierCurveTo(N,B,n,l,i,r)}break;case"Q":Js(E,P.length,4);for(let L=0;L<P.length;L+=4)d=+P[L],y=+P[L+1],i=+P[L+2],r=+P[L+3],this.quadraticCurveTo(d,y,i,r);break;case"q":Js(E,P.length,4);for(let L=0;L<P.length;L+=4)d=+P[L]+i,y=+P[L+1]+r,i+=+P[L+2],r+=+P[L+3],this.quadraticCurveTo(d,y,i,r);break;case"T":Js(E,P.length,2),d!==null&&y!==null||(d=i,y=r);for(let L=0;L<P.length;L+=2)d=2*i-d,y=2*r-y,i=+P[L],r=+P[L+1],this.quadraticCurveTo(d,y,i,r);break;case"t":Js(E,P.length,2),d!==null&&y!==null||(d=i,y=r);for(let L=0;L<P.length;L+=2)d=2*i-d,y=2*r-y,i+=+P[L],r+=+P[L+1],this.quadraticCurveTo(d,y,i,r);break;case"A":case"a":const D=E==="a";fme(P),Js(E,P.length,7);for(let L=0;L<P.length;L+=7){let N=+P[L+5],B=+P[L+6];D&&(N+=i,B+=r);const W=dme({px:i,py:r,rx:+P[L],ry:+P[L+1],xAxisRotation:+P[L+2],largeArcFlag:ok(+P[L+3]),sweepFlag:ok(+P[L+4]),cx:N,cy:B});Te(W,q=>{this.bezierCurveTo(q.x1,q.y1,q.x2,q.y2,q.x,q.y),i=q.x,r=q.y})}break;case"Z":case"z":pme(E,P.length,0),this.closePath()}}}_runPath(e){e.beginPath(),Te(this._operations,i=>{i.path(e)})}_render(e){super._render(e);const i=this._layer||e,r=i.dirty,n=this._isInteractive();if(r||n){const l=i.context,d=this._renderer._ghostLayer.context;let y;r&&(l.globalCompositeOperation=this.blendMode,l.beginPath()),n&&(d.beginPath(),y=this._getColorId()),Te(this._operations,v=>{r&&(v.path(l),v.colorize(l,void 0)),n&&(v.path(d),v.colorize(d,y))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const i=this.mask;i&&(i._setMatrix(),i._transform(e,1),i._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),Te(this._operations,r=>{r.path(e),r.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&Te(this._operations,i=>{i.addBounds(e)})}}class yB extends G_{constructor(e,i,r){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=i,this.style=r}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,i=!1,r=!1){super._render(e);const n=e.context,l=this._renderer._ghostLayer.context,d=this.style;let y=this._getFontStyle(void 0,r);n.font=y,this._isInteractive()&&!i&&(l.font=y),d.fill&&(d.fill instanceof et?n.fillStyle=d.fill.toCSS(d.fillOpacity!=null?d.fillOpacity:1):n.fillStyle=d.fill),d.shadowColor&&(e.context.shadowColor=d.shadowColor.toCSS(d.shadowOpacity||1)),d.shadowBlur&&(e.context.shadowBlur=d.shadowBlur),d.shadowOffsetX&&(e.context.shadowOffsetX=d.shadowOffsetX),d.shadowOffsetY&&(e.context.shadowOffsetY=d.shadowOffsetY),this._shared(n),this._isInteractive()&&!i&&(l.fillStyle=this._getColorId(),this._shared(l))}_getFontStyle(e,i=!1){const r=this.style;let n=[];return e&&e.fontVariant?n.push(e.fontVariant):r.fontVariant&&n.push(r.fontVariant),i||(e&&e.fontWeight?n.push(e.fontWeight):r.fontWeight&&n.push(r.fontWeight)),e&&e.fontStyle?n.push(e.fontStyle):r.fontStyle&&n.push(r.fontStyle),e&&e.fontSize?(rt(e.fontSize)&&(e.fontSize=e.fontSize+"px"),n.push(e.fontSize)):r.fontSize&&(rt(r.fontSize)&&(r.fontSize=r.fontSize+"px"),n.push(r.fontSize)),e&&e.fontFamily?n.push(e.fontFamily):r.fontFamily?n.push(r.fontFamily):n.length&&n.push("Arial"),n.join(" ")}_render(e){const i=this._layer||e;if(this._textInfo||this._measure(i),this.textVisible){const r=this._isInteractive(),n=i.context,l=i.dirty,d=this._renderer._ghostLayer.context;n.save(),d.save(),this._prerender(i),Te(this._textInfo,(y,v)=>{Te(y.textChunks,(x,$)=>{if(x.style&&(n.save(),d.save(),n.font=x.style,this._isInteractive()&&(d.font=x.style)),x.fill&&(n.save(),n.fillStyle=x.fill.toCSS()),l&&n.fillText(x.text,x.offsetX,y.offsetY+x.offsetY),x.textDecoration=="underline"||x.textDecoration=="line-through"){let E,k=1,P=1,D=x.height,L=x.offsetX;switch(this.style.textAlign){case"right":case"end":L-=x.width;break;case"center":L-=x.width/2}if(x.style)switch(Jo.getTextStyle(x.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":k=2}D&&(P=D/20),E=x.textDecoration=="line-through"?k+y.offsetY+x.offsetY-x.height/2:k+1.5*P+y.offsetY+x.offsetY,n.save(),n.beginPath(),x.fill?n.strokeStyle=x.fill.toCSS():this.style.fill&&this.style.fill instanceof et&&(n.strokeStyle=this.style.fill.toCSS()),n.lineWidth=k*P,n.moveTo(L,E),n.lineTo(L+x.width,E),n.stroke(),n.restore()}r&&this.interactive&&d.fillText(x.text,x.offsetX,y.offsetY+x.offsetY),x.fill&&n.restore(),x.style&&(n.restore(),d.restore())})}),n.restore(),d.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const i=this._measure(this.getLayer());Hi(e,{x:i.left,y:i.top}),Hi(e,{x:i.right,y:i.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const i=e.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl";this._textInfo=[];const l=this.style.oversizedBehavior,d=this.style.maxWidth,y=rt(d)&&l=="truncate",v=rt(d)&&(l=="wrap"||l=="wrap-no-break");i.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());const x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",$=this.text.toString().replace(/\r/g,"").split(/\n/);let E,k=!0,P=0,D=0,L=0;Te($,(B,W)=>{let q;for(q=B==""?[{type:"value",text:""}]:Jo.chunk(B,!1,this.style.ignoreFormatting);q.length>0;){let Y={offsetY:L,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const ie=this._measureText(x,i),se=ie.actualBoundingBoxAscent+ie.actualBoundingBoxDescent;let ue;Y.height=se,Y.ascent=ie.actualBoundingBoxAscent;let de,be,we,$e=this.style.textDecoration,ke=!1,Ge=!0,Fe=[];ZV(q,(ht,ni)=>{if(ht.type=="format")if(ht.text=="[/]")k||(i.restore(),r.restore(),k=!0),de=void 0,E=void 0,be=void 0,$e=this.style.textDecoration,we=void 0,ue=ht.text;else{k||(i.restore(),r.restore());let Ze=Jo.getTextStyle(ht.text);const Xe=this._getFontStyle(Ze);i.save(),r.save(),i.font=Xe,E=Xe,ue=ht.text,Ze.textDecoration&&($e=Ze.textDecoration),Ze.fill&&(de=Ze.fill),Ze.width&&(be=an(Ze.width)),Ze.verticalAlign&&(we=Ze.verticalAlign),k=!1;const oi=this._measureText(x,i),to=oi.actualBoundingBoxAscent+oi.actualBoundingBoxDescent;to>Y.height&&(Y.height=to),oi.actualBoundingBoxAscent>Y.ascent&&(Y.ascent=oi.actualBoundingBoxAscent)}else if(ht.type=="value"&&!ke){const Ze=this._measureText(ht.text,i);let Xe=Ze.actualBoundingBoxLeft+Ze.actualBoundingBoxRight;if(y){let Es=Ge||this.style.breakWords||!1;const vn=this.style.ellipsis||"",Yd=this._measureText(vn,i),Tf=Yd.actualBoundingBoxLeft+Yd.actualBoundingBoxRight;if(Y.width+Xe>d){const If=d-Y.width-Tf;ht.text=this._truncateText(i,ht.text,If,Es),ht.text+=vn,ke=!0}}else if(v&&Y.width+Xe>d){const Es=d-Y.width,vn=this._truncateText(i,ht.text,Es,!1,Ge&&this.style.oversizedBehavior!="wrap-no-break");if(vn=="")return this.textVisible=!0,!1;Fe=q.slice(ni+1),Ib(vn)!=Ib(ht.text)&&(Fe.unshift({type:"value",text:ht.text.substr(vn.length)}),ue&&Fe.unshift({type:"format",text:ue})),ht.text=Ib(vn),q=[],ke=!0}let oi=1,to=1;if(E&&be&&be>Xe){const Es=Xe/be;switch(this.style.textAlign){case"right":case"end":oi=Es;break;case"center":oi=Es,to=Es;break;default:to=Es}Xe=be}const io=Ze.actualBoundingBoxAscent+Ze.actualBoundingBoxDescent;io>Y.height&&(Y.height=io),Ze.actualBoundingBoxAscent>Y.ascent&&(Y.ascent=Ze.actualBoundingBoxAscent),Y.width+=Xe,Y.left+=Ze.actualBoundingBoxLeft/oi,Y.right+=Ze.actualBoundingBoxRight/to,Y.textChunks.push({style:E,fill:de,text:ht.text,width:Xe,height:io,left:Ze.actualBoundingBoxLeft,right:Ze.actualBoundingBoxRight,ascent:Ze.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:$e,verticalAlign:we}),Ge=!1}return!0}),this.style.lineHeight instanceof yi?(Y.height*=this.style.lineHeight.value,Y.ascent*=this.style.lineHeight.value):(Y.height*=this.style.lineHeight||1.2,Y.ascent*=this.style.lineHeight||1.2),P<Y.left&&(P=Y.left),D<Y.right&&(D=Y.right),this._textInfo.push(Y),L+=Y.height,q=Fe||[]}}),k||(i.restore(),r.restore()),Te(this._textInfo,(B,W)=>{let q=0;Te(B.textChunks,Y=>{if(Y.offsetX=q+Y.left-B.left,Y.offsetY+=B.height-B.height*(this.style.baselineRatio||.19),q+=Y.width,Y.verticalAlign)switch(Y.verticalAlign){case"super":Y.offsetY-=B.height/2-Y.height/2;break;case"sub":Y.offsetY+=Y.height/2}})});const N={left:n?-D:-P,top:0,right:n?P:D,bottom:L};if(l!=="none"){const B=this._fitRatio(N);if(B<1)if(l=="fit")rt(this.style.minScale)&&B<this.style.minScale?(this.textVisible=!1,N.left=0,N.top=0,N.right=0,N.bottom=0):(this._originalScale&&this._originalScale!=1||(this._originalScale=this.scale),this.scale=B,this.textVisible=!0);else if(l=="hide")this.textVisible=!1,N.left=0,N.top=0,N.right=0,N.bottom=0;else{switch(this.style.textAlign){case"right":case"end":N.left=-d,N.right=0;break;case"center":N.left=-d/2,N.right=d/2;break;default:N.left=0,N.right=d}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),r.restore(),N}_fitRatio(e){const i=this.style.maxWidth,r=this.style.maxHeight;if(!rt(i)&&!rt(r))return 1;const n=e.right-e.left,l=e.bottom-e.top;return Math.min(i/n||1,r/l||1)}_truncateText(e,i,r,n=!1,l=!0){let d;do{if(n)i=i.slice(0,-1);else{let v=i.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if(v==""&&l)n=!0;else{if(v=="")return i;i=v}}const y=this._measureText(i,e);d=y.actualBoundingBoxLeft+y.actualBoundingBoxRight}while(d>r&&i!="");return i}_measureText(e,i){let r=i.measureText(e),n={};if(r.actualBoundingBoxAscent==null){const d=document.createElement("div");d.innerText=e,d.style.visibility="hidden",d.style.position="absolute",d.style.top="-1000000px;",d.style.fontFamily=this.style.fontFamily||"",d.style.fontSize=this.style.fontSize+"",document.body.appendChild(d);const y=d.getBoundingClientRect();document.body.removeChild(d);const v=y.height,x=r.width;n={actualBoundingBoxAscent:v,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:x,fontBoundingBoxAscent:v,fontBoundingBoxDescent:0,width:x}}else n={actualBoundingBoxAscent:r.actualBoundingBoxAscent,actualBoundingBoxDescent:r.actualBoundingBoxDescent,actualBoundingBoxLeft:r.actualBoundingBoxLeft,actualBoundingBoxRight:r.actualBoundingBoxRight,fontBoundingBoxAscent:r.actualBoundingBoxAscent,fontBoundingBoxDescent:r.actualBoundingBoxDescent,width:r.width};const l=r.width;switch(this.style.textAlign){case"right":case"end":n.actualBoundingBoxLeft=l,n.actualBoundingBoxRight=0;break;case"center":n.actualBoundingBoxLeft=l/2,n.actualBoundingBoxRight=l/2;break;default:n.actualBoundingBoxLeft=0,n.actualBoundingBoxRight=l}return n}}class jme{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:ig(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class Fme extends yB{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){this.textType==="circular"?this._renderCircular(e):super._render(e)}_renderCircular(e){if(this.textVisible){const i=this._layer||e;this._prerender(i);const r=this._isInteractive(),n=i.context,l=i.dirty,d=this._renderer._ghostLayer.context;n.save(),r&&d.save(),this._textInfo||this._measure(i);let y=this.radius||0,v=this.startAngle||0,x=0,$=this.orientation,E=$=="auto"?"auto":$=="inward";const k=this.inside,P=this.style.textAlign||"left",D=this.kerning||0;let L=P=="left"?1:-1;const N=!this._textReversed;if(E=="auto"){let B=0,W=0;Te(this._textInfo,(q,Y)=>{const ie=v+q.width/(y-q.height)/2*-L;ie>B&&(B=ie)}),W=P=="left"?(B+x/2)*R1:P=="right"?(B-x/2)*R1:v*R1,W=z1e(W),E=W>=270||W<=90}E==1&&N&&(this._textInfo.reverse(),this._textReversed=!0),Te(this._textInfo,(B,W)=>{const q=B.height;k||(y+=q),(L==-1&&E||L==1&&!E)&&N&&B.textChunks.reverse();let Y=v;x=0,P=="center"&&(Y+=B.width/(y-q)/2*-L,x=Y-v),Y+=Math.PI*(E?0:1),n.save(),r&&d.save(),n.rotate(Y),r&&d.rotate(Y);let ie=0;Te(B.textChunks,(se,ue)=>{const de=se.text,be=se.width;ie=be/2/(y-q)*L,n.rotate(ie),r&&d.rotate(ie),se.style&&(n.save(),d.save(),n.font=se.style,r&&(d.font=se.style)),se.fill&&(n.save(),n.fillStyle=se.fill.toCSS()),n.textBaseline="middle",n.textAlign="center",r&&(d.textBaseline="middle",d.textAlign="center"),l&&n.fillText(de,0,(E?1:-1)*(0-y+q/2)),r&&d.fillText(de,0,(E?1:-1)*(0-y+q/2)),se.fill&&n.restore(),se.style&&(n.restore(),d.restore()),ie=(be/2+D)/(y-q)*L,n.rotate(ie),r&&d.rotate(ie)}),n.restore(),r&&d.restore(),k&&(y-=q)}),n.restore(),r&&d.restore()}}_measure(e){return this.textType==="circular"?this._measureCircular(e):super._measure(e)}_measureCircular(e){const i=e.context,r=this._renderer._ghostLayer.context,n=this.style.direction=="rtl",l=this.style.oversizedBehavior,d=this.style.maxWidth,y=rt(d)&&l=="truncate",v=this.style.ellipsis||"";let x;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,i.save(),r.save(),this._prerender(e,!0);const $=this.text.toString().replace(/\r/g,"").split(/\n/);let E=!0,k=0,P=0;return Te($,(D,L)=>{let N,B,W,q=Jo.chunk(D,!1,this.style.ignoreFormatting),Y={offsetY:P,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};Te(q,(ie,se)=>{if(ie.type=="format"){if(ie.text=="[/]")E||(i.restore(),r.restore(),E=!0),B=void 0,N=void 0,W=void 0;else{let ue=Jo.getTextStyle(ie.text);const de=this._getFontStyle(ue);i.save(),r.save(),i.font=de,N=de,ue.fill&&(B=ue.fill),ue.width&&(W=an(ue.width)),E=!1}y&&(x=this._measureText(v,i))}else if(ie.type=="value"){const ue=ie.text.match(/./gu)||[];n&&ue.reverse();for(let de=0;de<ue.length;de++){const be=ue[de],we=this._measureText(be,i);let $e=we.width;N&&W&&W>$e&&($e=W);const ke=we.actualBoundingBoxAscent+we.actualBoundingBoxDescent;if(ke>Y.height&&(Y.height=ke),we.actualBoundingBoxAscent>Y.ascent&&(Y.ascent=we.actualBoundingBoxAscent),Y.width+=$e,Y.left+=we.actualBoundingBoxLeft,Y.right+=we.actualBoundingBoxRight,Y.textChunks.push({style:N,fill:B,text:be,width:$e,height:ke+we.actualBoundingBoxDescent,left:we.actualBoundingBoxLeft,right:we.actualBoundingBoxRight,ascent:we.actualBoundingBoxAscent,offsetX:0,offsetY:ke,textDecoration:void 0}),k+=$e,y){x||(x=this._measureText(v,i));const Ge=x.actualBoundingBoxLeft+x.actualBoundingBoxRight;if(k+=Ge,k+Ge>d){Y.textChunks.length==1?this.textVisible=!1:(Y.width+=Ge,Y.left+=x.actualBoundingBoxLeft,Y.right+=x.actualBoundingBoxRight,Y.textChunks.push({style:N,fill:B,text:v,width:Ge,height:ke+x.actualBoundingBoxDescent,left:x.actualBoundingBoxLeft,right:x.actualBoundingBoxRight,ascent:x.actualBoundingBoxAscent,offsetX:0,offsetY:ke,textDecoration:void 0}));break}}if(n)break}}}),this.style.lineHeight instanceof yi?Y.height*=this.style.lineHeight.value:Y.height*=this.style.lineHeight||1.2,this._textInfo.push(Y),P+=Y.height}),E||(i.restore(),r.restore()),l=="hide"&&k>d&&(this.textVisible=!1),Te(this._textInfo,D=>{Te(D.textChunks,L=>{L.offsetY+=Math.round((D.height-L.height+(D.ascent-L.ascent))/2)})}),i.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class Nme extends G_{constructor(e,i){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=i}_dispose(){super._dispose(),this._imageMask&&Jy(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,i=0;this.width&&(e=this.width),this.height&&(i=this.height),this._localBounds={left:0,top:0,right:e,bottom:i},this._addBounds(this._localBounds)}return this._localBounds}_render(e){if(super._render(e),this.image){const i=this._layer||e;if(this.tainted===void 0&&(this.tainted=ak(this.image),i.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(i.dirty){this.shadowColor&&(i.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(i.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(i.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(i.context.shadowOffsetY=this.shadowOffsetY);const r=this.width||this.image.naturalWidth,n=this.height||this.image.naturalHeight;i.context.drawImage(this.image,0,0,r,n)}if(this.interactive&&this._isInteractive()){const r=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(r,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(this._imageMask===void 0){const i=this.width||e.naturalWidth,r=this.height||e.naturalHeight,n=document.createElement("canvas");n.width=i,n.height=r;const l=n.getContext("2d");l.imageSmoothingEnabled=!1,l.fillStyle=this._getColorId(),l.fillRect(0,0,i,r),ak(e)||(l.globalCompositeOperation="destination-in",l.drawImage(e,0,0,i,r)),this._imageMask=n}return this._imageMask}}class zme{constructor(e,i,r,n){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Sd("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class Vme extends l1e{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Bme}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_domWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=e??window.devicePixelRatio,this.view.style.position="absolute",this.view.appendChild(this._layerDom),this._disposers.push(new wr(()=>{Ti(this._events,(i,r)=>{r.disposer.dispose()}),Te(this.layers,i=>{Jy(i.view),i.exportableView&&Jy(i.exportableView)}),Jy(this._ghostLayer.view),Jy(this._patternCanvas)})),this._disposers.push(tB(()=>{e==null&&(this.resolution=window.devicePixelRatio)})),Sd("touchevents")){const i=r=>{this._dragging.length!==0&&ZV(this._dragging,n=>!n.value.shouldCancelTouch()||(r.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(or(window,"touchstart",i,{passive:!1})),this._disposers.push(or(this.view,"touchstart",i,{passive:!1})),this._disposers.push(or(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(or(window,"click",r=>{this._touchActive=!1},{passive:!0})),this._disposers.push(or(this.view,"click",r=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}Sd("wheelevents")&&this._disposers.push(or(this.view,"wheel",i=>{let r=!1;this._hovering.forEach(n=>{if(n.wheelable)return r=!0,!1}),r&&i.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,i,r,n){return this.defaultLayer.context.createLinearGradient(e,i,r,n)}createRadialGradient(e,i,r,n,l,d){return this.defaultLayer.context.createRadialGradient(e,i,r,n,l,d)}createPattern(e,i,r,n,l){return this._patternCanvas.width=n,this._patternCanvas.height=l,this._patternContext.clearRect(0,0,n,l),i.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,r)}makeContainer(){return new vme(this)}makeGraphics(){return new Rme(this)}makeText(e,i){return new yB(this,e,i)}makeTextStyle(){return new jme}makeRadialText(e,i){return new Fme(this,e,i)}makePicture(e){return new Nme(this,e)}resizeLayer(e){e.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resize(e,i,r,n){this._canvasWidth=e,this._canvasHeight=i,this._domWidth=r,this._domHeight=n,Te(this.layers,l=>{l&&(l.dirty=!0,this.resizeLayer(l))}),this.resizeGhost(),this.view.style.width=r+"px",this.view.style.height=n+"px"}createDetachedLayer(e=!1){const i=document.createElement("canvas"),r=i.getContext("2d",{willReadFrequently:e}),n=new Gme(i,r);return i.style.position="absolute",i.style.top="0px",i.style.left="0px",n}getLayerByOrder(e){const i=this.layers,r=i.length;for(let n=0;n<r;n++){const l=i[n];if(l.order==e)return l}}getLayer(e,i=!0){let r=this.getLayerByOrder(e);if(r)return r;const n=this.createDetachedLayer(e==99);n.order=e,n.visible=i,n.visible&&this.resizeLayer(n);const l=this.layers;l.push(n),l.sort((v,x)=>v.order>x.order?1:v.order<x.order?-1:0);const d=l.length;let y;for(let v=S2(l,n)+1;v<d;v++)if(l[v].visible){y=l[v];break}return n.visible&&(y===void 0?this._layerDom.appendChild(n.view):this._layerDom.insertBefore(n.view,y.view)),n}render(e){if(this._dirtyLayers.length=0,Te(this.layers,i=>{i&&i.dirty&&i.visible&&(this._dirtyLayers.push(i),i.clear())}),this._ghostLayer.clear(),e.render(this.defaultLayer),this._ghostLayer.context.restore(),Te(this.layers,i=>{if(i){const r=i.context;r.beginPath(),r.moveTo(0,0),r.stroke()}}),Te(this._dirtyLayers,i=>{i.context.restore(),i.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:i,target:r,native:n}=this._lastPointerMoveEvent;Te(i,l=>{this._dispatchGlobalMousemove(l,r,n)})}}paintId(e){const i=yme(++this._colorId),r=et.fromHex(i).toCSS();return this._colorMap[r]=e,r}_removeObject(e){e._colorId!==void 0&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const i=this._ghostLayer.margin;return new DOMRect(e.left-i.left,e.top-i.top,e.width+i.left+i.right,e.height+i.top+i.bottom)}getEvent(e,i=!0){const r=this.view.getBoundingClientRect(),n={x:e.clientX||0,y:e.clientY||0},l={x:n.x-(i?r.left:0),y:n.y-(i?r.top:0)};return new zme(e,n,l,this._adjustBoundingBox(r))}_getHitTarget(e,i,r){if(i.width===0||i.height===0||e.x<i.left||e.x>i.right||e.y<i.top||e.y>i.bottom||!r||!this._layerDom.contains(r))return;const n=this._ghostLayer.getImageData(e,i);if(n.data[0]===0&&n.data[1]===0&&n.data[2]===0)return!1;const l=et.fromRGB(n.data[0],n.data[1],n.data[2]).toCSS();return this._colorMap[l]}_withEvents(e,i){const r=this._events[e];if(r!==void 0){r.dispatching=!0;try{i(r)}finally{r.dispatching=!1,r.cleanup&&(r.cleanup=!1,V_(r.callbacks,n=>!n.disposed),r.callbacks.length===0&&(r.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,i){this.interactionsEnabled&&this._withEvents(e,r=>{Te(r.callbacks,n=>{n.disposed||n.callback.call(n.context,i)})})}_dispatchEvent(e,i,r){if(!this.interactionsEnabled)return!1;let n=!1;return this._withEvents(e,l=>{Te(l.callbacks,d=>{d.disposed||d.object!==i||(d.callback.call(d.context,r),n=!0)})}),n}_dispatchMousedown(e,i){const r=e.button;if(r!=0&&r!=2&&r!=1&&r!==void 0)return;const n=this.getEvent(e),l=this._getHitTarget(n.originalPoint,n.bbox,i);if(l){const d=n.id;let y=!1;hv(l,v=>{const x={id:d,value:v};return this._mousedown.push(x),!y&&this._dispatchEvent("pointerdown",v,n)&&(y=!0,this._dragging.some($=>$.value===v&&$.id===d)||this._dragging.push(x)),!0})}}_dispatchGlobalMousemove(e,i,r){const n=this.getEvent(e),l=this._getHitTarget(n.originalPoint,n.bbox,i);n.native=r,l?(this._hovering.forEach(d=>{d.contains(l)||(this._hovering.delete(d),d.cursorOverStyle&&V5(document.body,"cursor",d._replacedCursorStyle),this._dispatchEvent("pointerout",d,n))}),n.native&&hv(l,d=>(this._hovering.has(d)||(this._hovering.add(d),d.cursorOverStyle&&(d._replacedCursorStyle=v1e(document.body,"cursor"),V5(document.body,"cursor",d.cursorOverStyle)),this._dispatchEvent("pointerover",d,n)),!0))):(this._hovering.forEach(d=>{d.cursorOverStyle&&V5(document.body,"cursor",d._replacedCursorStyle),this._dispatchEvent("pointerout",d,n)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",n)}_dispatchGlobalMouseup(e,i){const r=this.getEvent(e);r.native=i,this._dispatchEventAll("globalpointerup",r)}_dispatchDragMove(e){if(this._dragging.length!==0){const i=this.getEvent(e),r=i.id;this._dragging.forEach(n=>{n.id===r&&this._dispatchEvent("pointermove",n.value,i)})}}_dispatchDragEnd(e,i){const r=e.button;let n;if(r==0||r===void 0)n="click";else if(r==2)n="rightclick";else{if(r!=1)return;n="middleclick"}const l=this.getEvent(e),d=l.id;if(this._mousedown.length!==0){const y=this._getHitTarget(l.originalPoint,l.bbox,i);y&&this._mousedown.forEach(v=>{v.id===d&&v.value.contains(y)&&this._dispatchEvent(n,v.value,l)}),this._mousedown.length=0}this._dragging.length!==0&&(this._dragging.forEach(y=>{y.id===d&&this._dispatchEvent("pointerup",y.value,l)}),this._dragging.length=0)}_dispatchDoubleClick(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&hv(n,l=>!this._dispatchEvent("dblclick",l,r))}_dispatchWheel(e,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,i);n&&hv(n,l=>!this._dispatchEvent("wheel",l,r))}_makeSharedEvent(e,i){if(this._listeners[e]===void 0){const r=i();this._listeners[e]=new QV(()=>{delete this._listeners[e],r.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,i){let r=!1,n=null;function l(){n=null,r=!1}return new ln([new wr(()=>{n!==null&&clearTimeout(n),l()}),or(this.view,i6(e),d=>{r=!0,n!==null&&clearTimeout(n),n=window.setTimeout(l,0)}),mme(window,e,(d,y)=>{n!==null&&(clearTimeout(n),n=null),i(d,y,r),r=!1})])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const i=(r,n,l)=>{this._lastPointerMoveEvent={events:r,target:n,native:l},Te(r,d=>{this._dispatchGlobalMousemove(d,n,l)})};return new ln([this._onPointerEvent("pointerdown",i),this._onPointerEvent("pointermove",i)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const i=this._onPointerEvent("pointerup",(n,l,d)=>{Te(n,y=>{this._dispatchGlobalMouseup(y,d)}),this._lastPointerMoveEvent={events:n,target:l,native:d}}),r=this._onPointerEvent("pointercancel",(n,l,d)=>{Te(n,y=>{this._dispatchGlobalMouseup(y,d)}),this._lastPointerMoveEvent={events:n,target:l,native:d}});return new wr(()=>{i.dispose(),r.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const i=this._onPointerEvent("pointerdown",(d,y)=>{Te(d,v=>{this._dispatchMousedown(v,y)})}),r=this._onPointerEvent("pointermove",d=>{Te(d,y=>{this._dispatchDragMove(y)})}),n=this._onPointerEvent("pointerup",(d,y)=>{Te(d,v=>{this._dispatchDragEnd(v,y)})}),l=this._onPointerEvent("pointercancel",(d,y)=>{Te(d,v=>{this._dispatchDragEnd(v,y)})});return new wr(()=>{i.dispose(),r.dispose(),n.dispose(),l.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(i,r)=>{Te(i,n=>{this._dispatchDoubleClick(n,r)})}));case"wheel":return this._makeSharedEvent("wheel",()=>or(window,i6("wheel"),i=>{this._dispatchWheel(i,iB(i))},{passive:!1}))}}_addEvent(e,i,r,n){let l=this._events[i];l===void 0&&(l=this._events[i]={disposer:this._initEvent(i),callbacks:[],dispatching:!1,cleanup:!1});const d={object:e,context:n,callback:r,disposed:!1};return l.callbacks.push(d),new wr(()=>{d.disposed=!0,l.dispatching?l.cleanup=!0:(dn(l.callbacks,d),l.callbacks.length===0&&(l.disposer.dispose(),delete this._events[i]))})}getCanvas(e,i){this.render(e),i||(i={});let r=this.resolution,n=Math.floor(this._canvasWidth*this.resolution),l=Math.floor(this._canvasHeight*this.resolution);if(i.minWidth&&i.minWidth>n){let P=i.minWidth/n;P>r&&(r=P*this.resolution)}if(i.minHeight&&i.minHeight>l){let P=i.minHeight/l;P>r&&(r=P*this.resolution)}if(i.maxWidth&&i.maxWidth<n){let P=i.maxWidth/n;P<r&&(r=P*this.resolution)}if(i.maxHeight&&i.maxHeight>l){let P=i.maxHeight/l;P<r&&(r=P*this.resolution)}i.maintainPixelRatio&&(r/=this.resolution);const d=[];let y=!1;const v=document.createElement("canvas");r!=this.resolution&&(y=!0,n=n*r/this.resolution,l=l*r/this.resolution),v.width=n,v.height=l,v.style.position="fixed",v.style.top="-10000px",this.view.appendChild(v),d.push(v);const x=v.getContext("2d");let $=0,E=0,k=!1;return Te(this.layers,P=>{if(P&&P.visible&&(P.tainted||y)){k=!0,P.exportableView=P.view,P.exportableContext=P.context,P.view=document.createElement("canvas"),P.view.style.position="fixed",P.view.style.top="-10000px",this.view.appendChild(P.view),d.push(P.view);let D=0,L=0;P.margin&&(D+=P.margin.left||0+P.margin.right||0,L+=P.margin.top||0+P.margin.bottom||0),P.view.width=n+D,P.view.height=l+L,P.context=P.view.getContext("2d"),P.dirty=!0,P.scale=r}}),k&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),Te(this.layers,P=>{if(P&&P.visible){let D=0,L=0;P.margin&&(D=-(P.margin.left||0)*this.resolution,L=-(P.margin.top||0)*this.resolution),x.drawImage(P.view,D,L),P.exportableView&&(P.view=P.exportableView,P.exportableView=void 0),P.exportableContext&&(P.context=P.exportableContext,P.exportableContext=void 0),$<P.view.clientWidth&&($=P.view.clientWidth),E<P.view.clientHeight&&(E=P.view.clientHeight),P.scale=void 0}}),v.style.width=$+"px",v.style.height=E+"px",Te(d,P=>{P.style.position="",P.style.top="",this.view.removeChild(P)}),v}}class Bme{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,i,r,n,l){e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*l),this._height=Math.floor(i*l),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}getImageData(e,i){return this.context.getImageData(Math.round((e.x-i.left)/i.width*this._width),Math.round((e.y-i.top)/i.height*this._height),1,1)}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,Te(e,i=>{i.margin&&(this.margin.left=Math.max(this.margin.left,i.margin.left),this.margin.right=Math.max(this.margin.right,i.margin.right),this.margin.top=Math.max(this.margin.top,i.margin.top),this.margin.bottom=Math.max(this.margin.bottom,i.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class Gme{constructor(e,i){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=i}resize(e,i,r,n,l){this.width!=null&&(e=this.width,r=this.width),this.height!=null&&(i=this.height,n=this.height),this.margin?(e+=this.margin.left+this.margin.right,i+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*l),this._height=Math.floor(i*l),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=n+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function lk(t,e){t==null?requestAnimationFrame(e):setTimeout(()=>{requestAnimationFrame(e)},1e3/t)}class q${constructor(e,i={},r){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new _f}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:lme.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:fB}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:sme.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:ome.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:ame.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:E0.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:I0.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:$d.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");let n,l;if(this._settings=i,i.accessible==0&&(this._a11yD=!0),i.useSafeResolution==null&&(i.useSafeResolution=!0),i.useSafeResolution&&(n=x1e()),this._renderer=new Vme(n),l=e instanceof HTMLElement?e:document.getElementById(e),Te(No.rootElements,v=>{if(v.dom===l)throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=kb.new(this,{}),l===null)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=l;let d=document.createElement("div");d.style.position="relative",d.style.height="100%",l.appendChild(d);const y=i.tooltipContainerBounds;y&&(this._tooltipContainerSettings=y),this._inner=d,this._updateComputedStyles(),No.rootElements.push(this)}static new(e,i){const r=new q$(e,i,!0);return r._init(),r}moveDOM(e){let i;if(i=e instanceof HTMLElement?e:document.getElementById(e),i){for(;this.dom.childNodes.length>0;)i.appendChild(this.dom.childNodes[0]);this.dom=i,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const e=this.dom.offsetWidth,i=this.dom.offsetHeight;e<=150||i<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(un.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:ig(100),centerY:Gi,tooltipText:"Created using amCharts 5",tooltipX:Gi,cursorOverStyle:"pointer",background:T0.new(this,{fill:Vp(4671320),fillOpacity:0,tooltipY:5})})),i=z1.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});i.label.setAll({fontSize:12}),i.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",i),e.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),e.states.create("hover",{}),e.children.push(jl.new(this,{stroke:Vp(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:Vp(3976191)}),e.children.push(jl.new(this,{stroke:Vp(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:Vp(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._renderer,i=this._getRealSize(),r=this._getCalculatedSize(i),n=Math.floor(r.width),l=Math.floor(r.height),d=Math.floor(i.width),y=Math.floor(i.height),v=un.new(this,{visible:!0,width:d,height:y});this._rootContainer=v,this._rootContainer._defaultThemes.push(eme.new(this));const x=v.children.push(un.new(this,{visible:!0,width:Gi,height:Gi}));this.container=x,e.resize(d,y,n,l),this._inner.appendChild(e.view),this._initResizeSensor();const $=document.createElement("div");if(this._htmlElementContainer=$,$.className="am5-html-container",$.style.position="absolute",$.style.pointerEvents="none",this._tooltipContainerSettings||($.style.overflow="hidden"),this._inner.appendChild($),this._a11yD!==!0){const E=document.createElement("div");E.className="am5-reader-container",E.setAttribute("role","alert"),E.style.position="absolute",E.style.width="1px",E.style.height="1px",E.style.overflow="hidden",E.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=E,this._inner.appendChild(this._readerAlertElement);const k=document.createElement("div");k.className="am5-focus-container",k.style.position="absolute",k.style.pointerEvents="none",k.style.top="0px",k.style.left="0px",k.style.overflow="hidden",k.style.width=n+"px",k.style.height=l+"px",k.setAttribute("role","application"),zp(k,!1),this._focusElementContainer=k,this._inner.appendChild(this._focusElementContainer);const P=document.createElement("div");this._tooltipElementContainer=P,P.className="am5-tooltip-container",this._inner.appendChild(P),Sd("keyboardevents")&&(this._disposers.push(or(window,"keydown",D=>{D.keyCode==16?this._isShift=!0:D.keyCode==9&&(this._isShift=D.shiftKey)})),this._disposers.push(or(window,"keyup",D=>{D.keyCode==16&&(this._isShift=!1)})),this._disposers.push(or(k,"keydown",D=>{const L=this._focusedSprite;if(L){D.keyCode==27&&(m1e(),this._focusedSprite=void 0);let N=0,B=0;switch(D.keyCode){case 13:D.preventDefault();const W=e.getEvent(new MouseEvent("click"));return void L.events.dispatch("click",{type:"click",originalEvent:W.event,point:W.point,simulated:!0,target:L});case 37:N=-6;break;case 39:N=6;break;case 38:B=-6;break;case 40:B=6;break;default:return}if(N!=0||B!=0){if(D.preventDefault(),!L.isDragging()){this._keyboardDragPoint={x:0,y:0};const Y=e.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));L.events.isEnabled("pointerdown")&&L.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:Y.event,point:Y.point,simulated:!0,target:L})}const W=this._keyboardDragPoint;W.x+=N,W.y+=B;const q=e.getEvent(new MouseEvent("mousemove",{clientX:W.x,clientY:W.y}),!1);L.events.isEnabled("globalpointermove")&&L.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:q.event,point:q.point,simulated:!0,target:L})}}})),this._disposers.push(or(k,"keyup",D=>{if(this._focusedSprite){const L=this._focusedSprite,N=D.keyCode;switch(N){case 37:case 39:case 38:case 40:if(L.isDragging()){const B=this._keyboardDragPoint,W=e.getEvent(new MouseEvent("mouseup",{clientX:B.x,clientY:B.y}));return L.events.isEnabled("globalpointerup")&&L.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:W.event,point:W.point,simulated:!0,target:L}),void(this._keyboardDragPoint=void 0)}if(L.get("focusableGroup")){const B=L.get("focusableGroup"),W=this._tabindexes.filter(ie=>ie.get("focusableGroup")==B);let q=W.indexOf(L);const Y=W.length-1;q+=N==39||N==40?1:-1,q<0?q=Y:q>Y&&(q=0),g1e(W[q].getPrivate("focusElement").dom)}}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new rme(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),i=this._getCalculatedSize(e),r=Math.floor(i.width),n=Math.floor(i.height);if(r>0&&n>0){const l=Math.floor(e.width),d=Math.floor(e.height),y=this._htmlElementContainer;if(y.style.width=r+"px",y.style.height=n+"px",this._a11yD!==!0){const x=this._focusElementContainer;x.style.width=r+"px",x.style.height=n+"px"}this._renderer.resize(l,d,r,n);const v=this._rootContainer;v.setPrivate("width",l),v.setPrivate("height",d),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){Te(this._tickers,i=>{i(e)})}_runAnimations(e){V_(this._animations,i=>i._runAnimation(e))}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,xs(this._dirtyParents).forEach(d=>{const y=this._dirtyParents[d];delete this._dirtyParents[d],y.isDisposed()||(e[y.uid]=y,y._prepareChildren())});xs(e).forEach(d=>{e[d]._updateChildren()});const i=[];xs(this._dirty).forEach(d=>{const y=this._dirty[d];y.isDisposed()?delete this._dirty[y.uid]:(i.push(y),y._beforeChanged())}),i.forEach(d=>{d._changed(),delete this._dirty[d.uid],d._clearDirty()}),this._isDirty=!1;const r={},n=[];xs(this._dirtyBounds).forEach(d=>{const y=this._dirtyBounds[d];delete this._dirtyBounds[d],y.isDisposed()||(r[y.uid]=y.depth(),n.push(y))}),this._positionHTMLElements(),n.sort((d,y)=>Md(r[y.uid],r[d.uid])),n.forEach(d=>{d._updateBounds()});const l=this._dirtyPositions;xs(l).forEach(d=>{const y=l[d];delete l[d],y.isDisposed()||y._updatePosition()}),i.forEach(d=>{d._afterChanged()})}_renderFrame(e){return!this._updateTick||(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e),this._runAnimations(e),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),this._tickers.length===0&&this._animations.length===0&&!this._isDirty)}_runTicker(e,i){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||(i?this._ticker:lk(this.fps,this._ticker)))}_runTickerNow(e=1e4){if(!this.isDisposed()){const i=performance.now()+e;for(;;){const r=performance.now();if(r>=i){this.animationTime=null;break}if(this.animationTime=r,this._renderFrame(r)){this.animationTime=null;break}}}}_startTicker(){this._ticker===null&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},lk(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){this._dirty[e.uid]===void 0&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}_addDirtyParent(e){this._dirtyParents[e.uid]===void 0&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}_addDirtyBounds(e){this._dirtyBounds[e.uid]===void 0&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}_addDirtyPosition(e){this._dirtyPositions[e.uid]===void 0&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}_addAnimation(e){this._animations.indexOf(e)===-1&&(this._animations.push(e),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(e){return this._tickers.push(e),this._startTicker(),new wr(()=>{dn(this._tickers,e)})}markDirtyGlobal(e){e||(e=this.container),e.walkChildren(i=>{i instanceof un&&this.markDirtyGlobal(i),i.markDirty(),i.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),Te(this._disposers,e=>{e.dispose()}),this._inner&&y1e(this._inner),ah(No.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){this._a11yD!==!0&&(this._readerAlertElement.innerHTML=XA(e))}setThemes(e){this._rootContainer.set("themes",e);const i=this.tooltipContainer;i&&i._applyThemes();const r=this.interfaceColors;r&&r._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,i=this._rootContainer.children.push(un.new(this,{position:"absolute",isMeasured:!1,width:Gi,height:Gi,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=i;const r=z1.new(this,{});this.container.set("tooltip",r),r.hide(0),this._tooltip=r}}_registerTabindexOrder(e){this._a11yD!=1&&(e.get("focusable")?bm(this._tabindexes,e):ah(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){this._a11yD!=1&&(ah(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(this._a11yD==1)return;this._tabindexes.sort((i,r)=>{const n=i.get("tabindexOrder",0),l=r.get("tabindexOrder",0);return n==l?0:n>l?1:-1});const e=[];Te(this._tabindexes,(i,r)=>{i.getPrivate("focusElement")?this._moveFocusElement(r,i):this._makeFocusElement(r,i);const n=i.get("focusableGroup");n&&(e.indexOf(n)!==-1?i.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(n))})}_updateCurrentFocus(){this._a11yD!=1&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,i){if(this._a11yD==1||(i||(i=e.getPrivate("focusElement").dom),!i))return;e.get("visible")&&e.get("role")!="tooltip"&&!e.isHidden()?i.getAttribute("tabindex")!="-1"&&i.setAttribute("tabindex",""+this.tabindex):i.removeAttribute("tabindex");const r=e.get("role");r?i.setAttribute("role",r):i.removeAttribute("role");const n=e.get("ariaLabel");if(n){const P=T2(e,n);i.setAttribute("aria-label",P)}else i.removeAttribute("aria-label");const l=e.get("ariaLive");l?i.setAttribute("aria-live",l):i.removeAttribute("aria-live");const d=e.get("ariaChecked");d!=null?i.setAttribute("aria-checked",d?"true":"false"):i.removeAttribute("aria-checked"),e.get("ariaHidden")?i.setAttribute("aria-hidden","hidden"):i.removeAttribute("aria-hidden");const y=e.get("ariaOrientation");y?i.setAttribute("aria-orientation",y):i.removeAttribute("aria-orientation");const v=e.get("ariaValueNow");v?i.setAttribute("aria-valuenow",v):i.removeAttribute("aria-valuenow");const x=e.get("ariaValueMin");x?i.setAttribute("aria-valuemin",x):i.removeAttribute("aria-valuemin");const $=e.get("ariaValueMax");$?i.setAttribute("aria-valuemax",$):i.removeAttribute("aria-valuemax");const E=e.get("ariaValueText");E?i.setAttribute("aria-valuetext",E):i.removeAttribute("aria-valuetext");const k=e.get("ariaControls");k?i.setAttribute("aria-controls",k):i.removeAttribute("aria-controls")}_makeFocusElement(e,i){if(i.getPrivate("focusElement")||this._a11yD==1)return;const r=document.createElement("div");i.get("role")!="tooltip"&&(r.tabIndex=this.tabindex),r.style.position="absolute",zp(r,!1);const n=[];i.setPrivate("focusElement",{dom:r,disposers:n}),this._decorateFocusElement(i),n.push(or(r,"focus",l=>{this._handleFocus(l,e)})),n.push(or(r,"blur",l=>{this._handleBlur(l,e)})),this._moveFocusElement(e,i)}_removeFocusElement(e){if(this._a11yD==1)return;ah(this._tabindexes,e);const i=e.getPrivate("focusElement");i&&(this._focusElementContainer.removeChild(i.dom),Te(i.disposers,r=>{r.dispose()}))}_hideFocusElement(e){this._a11yD!=1&&(e.getPrivate("focusElement").dom.style.display="none")}_moveFocusElement(e,i){if(this._a11yD==1)return;const r=this._focusElementContainer,n=i.getPrivate("focusElement").dom;if(n===this._focusElementContainer.children[e])return;const l=this._focusElementContainer.children[e+1];l?r.insertBefore(n,l):r.append(n)}_positionFocusElement(e){if(this._a11yD==1)return;const i=e.globalBounds();let r=i.right==i.left?e.width():i.right-i.left,n=i.top==i.bottom?e.height():i.bottom-i.top,l=i.left-2,d=i.top-2;r<0&&(l+=r,r=Math.abs(r)),n<0&&(d+=n,n=Math.abs(n));const y=e.getPrivate("focusElement").dom;y.style.top=d+"px",y.style.left=l+"px",y.style.width=r+4+"px",y.style.height=n+4+"px"}_handleFocus(e,i){if(this._a11yD==1)return;const r=this._tabindexes[i];r.isVisibleDeep()?(this._positionFocusElement(r),this._focusedSprite=r,r.events.isEnabled("focus")&&r.events.dispatch("focus",{type:"focus",originalEvent:e,target:r})):this._focusNext(e.target,this._isShift?-1:1)}_focusNext(e,i){if(this._a11yD==1)return;const r=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let n=r.indexOf(e)+i;n<0?n=r.length-1:n>=r.length&&(n=0),r[n].focus()}_handleBlur(e,i){if(this._a11yD==1)return;const r=this._focusedSprite;r&&r.events.isEnabled("blur")&&r.events.dispatch("blur",{type:"blur",originalEvent:e,target:r}),this._focusedSprite=void 0}updateTooltip(e){if(this._a11yD==1)return;const i=XA(e._getText());let r=e.getPrivate("tooltipElement");e.get("role")=="tooltip"&&i!=""?(r||(r=this._makeTooltipElement(e)),r.innerHTML!=i&&(r.innerHTML=i)):r&&(r.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const i=this._tooltipElementContainer,r=document.createElement("div");return r.style.position="absolute",r.style.width="1px",r.style.height="1px",r.style.overflow="hidden",r.style.clip="rect(1px, 1px, 1px, 1px)",zp(r,!1),this._decorateFocusElement(e,r),i.append(r),e.setPrivate("tooltipElement",r),r}_removeTooltipElement(e){if(this._a11yD==1)return;const i=e.getPrivate("tooltipElement");if(i){const r=i.parentElement;r&&r.removeChild(i)}}_invalidateAccessibility(e){if(this._a11yD==1)return;this._focusElementDirty=!0;const i=e.getPrivate("focusElement");e.get("focusable")?i&&(this._decorateFocusElement(e),this._positionFocusElement(e)):i&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const i=this.dom.getBoundingClientRect();return{x:e.x-i.left,y:e.y-i.top}}rootPointToDocument(e){const i=this.dom.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let i="";Ti(e,(n,l)=>{Z0(n)&&n.match(/^font/)&&(i+=l)});const r=i!=this._fontHash;return r&&(this._fontHash=i),r}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof un?e.children.each(i=>{this._invalidateLabelBounds(i)}):e instanceof N1&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<No.licenses.length;e++)if(No.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const i=this._htmlElementContainer,r=document.createElement("div");return e.setPrivate("htmlElement",r),r.style.position="absolute",r.style.overflow="auto",r.style.boxSizing="border-box",zp(r,e.get("interactive",!1)),e.events.isEnabled("click")&&(zp(r,!0),this._disposers.push(or(r,"click",n=>{const l=this._renderer.getEvent(n);e.events.dispatch("click",{type:"click",originalEvent:l.event,point:l.point,simulated:!1,target:e})}))),this._positionHTMLElement(e),i.append(r),bm(this._htmlEnabledContainers,e),r}_positionHTMLElements(){Te(this._htmlEnabledContainers,e=>{this._positionHTMLElement(e)})}_positionHTMLElement(e){const i=e.getPrivate("htmlElement");if(i){Te(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],$=>{const E=e.get($);i.style[$]=E?E+"px":""});const r=e.compositeOpacity();setTimeout(()=>{i.style.opacity=r+""},10);const n=e.isVisibleDeep();n&&(i.style.display="block");const l=e.globalBounds();i.style.top=l.top+"px",i.style.left=l.left+"px";const d=e.get("width"),y=e.get("height");let v=0,x=0;if(d&&(v=e.width()),y&&(x=e.height()),d&&y)e.removePrivate("minWidth"),e.removePrivate("minHeight");else{i.style.position="fixed",i.style.width="",i.style.height="";const $=i.getBoundingClientRect();i.style.position="absolute",v=$.width,x=$.height,e._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},e.setPrivate("minWidth",v),e.setPrivate("minHeight",x)}v>0&&(i.style.minWidth=v+"px"),x>0&&(i.style.minHeight=x+"px"),n&&r!=0||(i.style.display="none")}}_setHTMLContent(e,i){let r=e.getPrivate("htmlElement");r||(r=this._makeHTMLElement(e)),r.innerHTML!=i&&(r.innerHTML=i)}_removeHTMLContent(e){let i=e.getPrivate("htmlElement");i&&this._htmlElementContainer.removeChild(i),ah(this._htmlEnabledContainers,e)}}q1e("AM5C241025748");const uk="en-us",H$=new Map([["ar",()=>le(()=>import("./ar2-dfb29e9e.js"),[])],["bg-bg",()=>le(()=>import("./bg_BG2-08c99e6c.js"),[])],["bs-ba",()=>le(()=>import("./bs_BA2-f2917445.js"),[])],["ca-es",()=>le(()=>import("./ca_ES2-f5f347b0.js"),[])],["cs-cz",()=>le(()=>import("./cs_CZ2-1e33a1ce.js"),[])],["da-dk",()=>le(()=>import("./da_DK2-4e72198c.js"),[])],["de-de",()=>le(()=>import("./de_DE2-15e279b1.js"),[])],["de-ch",()=>le(()=>import("./de_CH2-b9a3a608.js"),[])],["el-gr",()=>le(()=>import("./el_GR2-2b9c8a60.js"),[])],["en-us",()=>le(()=>import("./en_US2-40dcf3cc.js"),[])],["en-ca",()=>le(()=>import("./en_CA2-40dcf3cc.js"),[])],["es-es",()=>le(()=>import("./es_ES2-c856435b.js"),[])],["et-ee",()=>le(()=>import("./et_EE2-193ac1c8.js"),[])],["fi-fi",()=>le(()=>import("./fi_FI2-53484f9e.js"),[])],["fr-fr",()=>le(()=>import("./fr_FR2-8b6dd3fc.js"),[])],["he-il",()=>le(()=>import("./he_IL2-ecc10351.js"),[])],["hr-hr",()=>le(()=>import("./hr_HR2-6c8e87b3.js"),[])],["hu-hu",()=>le(()=>import("./hu_HU2-fbe5572b.js"),[])],["id-id",()=>le(()=>import("./id_ID2-56ecb0c6.js"),[])],["it-it",()=>le(()=>import("./it_IT2-20a2fdf5.js"),[])],["ja-jp",()=>le(()=>import("./ja_JP2-2f441bec.js"),[])],["ko-kr",()=>le(()=>import("./ko_KR2-5290e5f8.js"),[])],["lt-lt",()=>le(()=>import("./lt_LT2-e057464e.js"),[])],["lv-lv",()=>le(()=>import("./lv_LV2-7a761c7a.js"),[])],["nb-no",()=>le(()=>import("./nb_NO2-853c98f6.js"),[])],["nl-nl",()=>le(()=>import("./nl_NL2-e2c04ba1.js"),[])],["pl-pl",()=>le(()=>import("./pl_PL2-8693870b.js"),[])],["pt-br",()=>le(()=>import("./pt_BR2-a1cac873.js"),[])],["pt-pt",()=>le(()=>import("./pt_PT2-e5eb7b28.js"),[])],["ro-ro",()=>le(()=>import("./ro_RO2-554c8802.js"),[])],["ru-ru",()=>le(()=>import("./ru_RU2-5b0bfec9.js"),[])],["sk-sk",()=>le(()=>import("./sk_SK2-feee92a1.js"),[])],["sl-sl",()=>le(()=>import("./sl_SL2-56e581d6.js"),[])],["sr-rs",()=>le(()=>import("./sr_RS2-dba2ad75.js"),[])],["sv-se",()=>le(()=>import("./sv_SE2-e6ae4e09.js"),[])],["th-th",()=>le(()=>import("./th_TH2-def73602.js"),[])],["tr-tr",()=>le(()=>import("./tr_TR2-d87d745f.js"),[])],["uk-ua",()=>le(()=>import("./uk_UA2-ae6136c6.js"),[])],["vi-vn",()=>le(()=>import("./vi_VN2-8bff547b.js"),[])],["zh-cn",()=>le(()=>import("./zh_Hans2-41156b15.js"),[])],["zh-hk",()=>le(()=>import("./zh_Hant2-8bca75bb.js"),[])],["zh-tw",()=>le(()=>import("./zh_Hant2-8bca75bb.js"),[])]]);function Ume(t){const e=t.split("-")[0].toLowerCase();let i=null;for(const r of H$.keys())if(r.startsWith(e)){i=r;break}return i}function qme(t){return t?H$.has(t.toLowerCase())?t.toLowerCase():Ume(t)||uk:uk}async function Hme(t,e=Wn()){const i=q$.new(t);return i.locale=(await H$.get(qme(e))()).default,i}const mB=["#7ABEE5","#B39BD5","#F8AE83","#92E6E4","#FBC487","#EE967A","#CEA2D6","#89D594","#CEE68F","#F1A6D5"].map(t=>Vp(t)),Wme=Object.freeze(Object.defineProperty({__proto__:null,createRoot:Hme,esriChartColorSet:mB},Symbol.toStringTag,{value:"Module"})),Zi="esri-feature-media",ls={base:Zi,mediaContainer:`${Zi}__container`,mediaItemContainer:`${Zi}__item-container`,mediaItem:`${Zi}__item`,mediaItemText:`${Zi}__item-text`,mediaItemTitle:`${Zi}__item-title`,mediaItemCaption:`${Zi}__item-caption`,mediaNavigation:`${Zi}__item-navigation`,mediaPagination:`${Zi}__pagination`,mediaPaginationText:`${Zi}__pagination-text`,mediaPrevious:`${Zi}__previous`,mediaPreviousIconLTR:`${Zi}__previous-icon`,mediaPreviousIconRTL:`${Zi}__previous-icon--rtl`,mediaNext:`${Zi}__next`,mediaNextIconLTR:`${Zi}__next-icon`,mediaNextIconRTL:`${Zi}__next-icon--rtl`,mediaChart:`${Zi}__chart`,mediaPaginationButton:`${Zi}__pagination-button`,mediaPaginationIcon:`${Zi}__pagination-icon`,mediaChartRendered:`${Zi}__chart--rendered`},J5=15,vu="category",Zf="value",Jme="rgba(50, 50, 50, 1)",Yme=250,Kme=500,Zme=200;let ms=class extends Dr{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new dd,this.messages=null,this._disposeChart=r=>{var n;(n=this._chartRootMap.get(r))==null||n.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:n,viewModel:l}=this;if(n||!l||!r)return;const{createRoot:d}=await le(()=>Promise.resolve().then(()=>Wme),void 0),y=await d(r);this._chartRootMap.set(r,y),this._renderChart({mediaInfo:l.activeMediaInfo,root:y})}}initialize(){this._featureElementInfo=new O_,this.addHandles([me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),st),me(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),st)])}loadDependencies(){return vf({icon:()=>le(()=>import("./calcite-icon-899b792c.js"),["assets/calcite-icon-899b792c.js","assets/icon-2aec3643.js","assets/observers-279029a9.js"])})}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return X("div",{bind:this,class:ls.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e,activeMediaInfoIndex:i}=this.viewModel,r=this.renderMediaText();return e?X("div",{key:"media-element-container",class:ls.mediaContainer},this.renderMediaInfo(),X("div",{class:ls.mediaNavigation},r,X("div",{class:ls.mediaPagination},this.renderMediaPageButton("previous"),X("span",{class:ls.mediaPaginationText},Oo(this.messages.pageText,{index:i+1,total:e})),this.renderMediaPageButton("next")))):null}renderMediaText(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e&&e.title?X("div",{key:"media-title",class:ls.mediaItemTitle,innerHTML:e.title}):null,r=e&&e.caption?X("div",{key:"media-caption",class:ls.mediaItemCaption,innerHTML:e.caption}):null;return i||r?X("div",{key:"media-text",class:ls.mediaItemText},i,r):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:l,refreshInterval:d,altText:y,title:v,type:x}=e,{sourceURL:$,linkURL:E}=l,k=Nz(E??void 0)?"_blank":"_self",P=k==="_blank"?"noreferrer":"",D=d?i:null,L=D?D.timestamp:0,N=D?D.sourceURL:$,B=X("img",{alt:y||v,key:`media-${x}-${r}-${n}-${L}`,src:N??void 0});return(E?X("a",{title:v,href:E,rel:P,target:k},B):null)??B}renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return X("div",{key:`media-${e.type}-${i}-${r}`,bind:this,class:ls.mediaChart,afterCreate:this._createChart,afterRemoved:this._disposeChart})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;return e?X("div",{key:"media-container",class:ls.mediaItemContainer},X("div",{key:"media-item-container",class:ls.mediaItem},this.renderMediaInfoType())):null}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,n=i?"chevron-left":"chevron-right",l=i?"media-previous":"media-next",d=i?this._previous:this._next;return X("button",{type:"button",key:l,title:r,"aria-label":r,tabIndex:0,class:ls.mediaPaginationButton,bind:this,onclick:d},X("calcite-icon",{class:ls.mediaPaginationIcon,scale:"s",icon:n}))}_setupFeatureElementInfo(){var r;const{description:e,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:e,layer:i}=this.viewModel;return e&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getRendererColors(){const{colorAm5:e}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]),i=new Map,r=this._getRenderer(),n="default";if(!r)return i;const l=await Ife(r);return l.delete(n),Array.from(l.values()).every(d=>(d==null?void 0:d.length)===1)&&Array.from(l.keys()).forEach(d=>{var v,x;const y=(x=(v=l.get(d))==null?void 0:v[0])==null?void 0:x.toCss(!0);y&&i.set(d,e(y))}),i}_handleMediaKeyup(e){const i=rh(e);i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!Upe()}_getChartAnimationMS(){return this._canAnimateChart()?Yme:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?Kme:0}async _renderChart(e){const{root:i,mediaInfo:r}=e,{value:n,type:l}=r,{ResponsiveThemeAm5:d,DarkThemeAm5:y,AnimatedThemeAm5:v,ColorSetAm5:x,ThemeAm5:$}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]),E=$.new(i);E.rule("ColorSet").set("colors",mB);const k=[d.new(i),E];t2()&&k.push(y.new(i)),this._canAnimateChart()&&k.push(v.new(i)),i.setThemes(k);const P=await this._getRendererColors(),D=x.new(i,{}),L=n.series.map((N,B)=>{const W=P.get(N.fieldName)||D.getIndex(B);return{[vu]:N.tooltip,[Zf]:N.value,columnSettings:{fill:W,stroke:W}}}).filter(N=>l!=="pie-chart"||N.value!=null&&N.value>0);l==="pie-chart"?this._createPieChart(e,L):this._createXYChart(e,L)}_getDirection(){return Lh(this.container)?"rtl":"ltr"}_isInversed(){return!!Lh(this.container)}async _customizeChartTooltip(e,i="horizontal"){var n;const{colorAm5:r}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]);e.setAll({pointerOrientation:i}),(n=e.get("background"))==null||n.setAll({stroke:r(Jme)}),e.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:Zme})}async _createPieChart(e,i){const{TooltipAm5:r}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]),{PieChartAm5:n,PieSeriesAm5:l}=await le(()=>import("./pieChart-2727a79b.js"),["assets/pieChart-2727a79b.js","assets/Tick-afaa36a3.js","assets/ColorSet-328b8b22.js"]),{mediaInfo:d,root:y}=e,{title:v}=d,x=5,$=(d==null?void 0:d.altText)||(d==null?void 0:d.title)||"",E=y.container.children.push(n.new(y,{ariaLabel:$,focusable:!0,paddingBottom:x,paddingTop:x,paddingLeft:x,paddingRight:x})),k=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,P=r.new(y,{labelText:k}),D=E.series.push(l.new(y,{name:v,valueField:Zf,categoryField:vu,tooltip:P}));D.ticks.template.set("forceHidden",!0),D.labels.template.set("forceHidden",!0),D.slices.template.states.create("active",{shiftRadius:x}),this._customizeChartTooltip(P),D.slices.template.setAll({ariaLabel:k,focusable:!0,templateField:"columnSettings"}),D.data.setAll(i),D.appear(this._getChartSeriesAnimationMS()),E.appear(this._getChartAnimationMS()),E.root.dom.classList.toggle(ls.mediaChartRendered,!0)}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:l}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]),{CategoryAxisAm5:d,AxisRendererXAm5:y,ValueAxisAm5:v,AxisRendererYAm5:x,ColumnSeriesAm5:$}=await le(()=>import("./xyChart-bf51ca65.js"),["assets/xyChart-bf51ca65.js","assets/ColorSet-328b8b22.js","assets/Tick-afaa36a3.js","assets/Button-eaf1a67f.js"]),{mediaInfo:E,root:k}=i,{value:P,title:D}=E;e.setAll({wheelX:"panX",wheelY:"zoomX"});const L=e.xAxes.push(d.new(k,{renderer:y.new(k,{inversed:this._isInversed()}),categoryField:vu}));L.get("renderer").labels.template.setAll({forceHidden:!0});const N=e.yAxes.push(v.new(k,{renderer:x.new(k,{inside:!1}),min:this._getMinSeriesValue(P.series)}));N.get("renderer").labels.template.setAll({direction:this._getDirection()});const B="{categoryX}",W=n.new(k,{labelText:B}),q=e.series.push($.new(k,{name:D,xAxis:L,yAxis:N,valueYField:Zf,categoryXField:vu,tooltip:W}));this._customizeChartTooltip(W),q.columns.template.setAll({ariaLabel:B,focusable:!0,templateField:"columnSettings"}),P.series.length>J5&&e.set("scrollbarX",l.new(k,{orientation:"horizontal"})),L.data.setAll(r),q.data.setAll(r),q.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createBarChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:l}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]),{CategoryAxisAm5:d,AxisRendererXAm5:y,ValueAxisAm5:v,AxisRendererYAm5:x,ColumnSeriesAm5:$}=await le(()=>import("./xyChart-bf51ca65.js"),["assets/xyChart-bf51ca65.js","assets/ColorSet-328b8b22.js","assets/Tick-afaa36a3.js","assets/Button-eaf1a67f.js"]),{mediaInfo:E,root:k}=i,{value:P,title:D}=E;e.setAll({wheelX:"panY",wheelY:"zoomY"});const L=e.yAxes.push(d.new(k,{renderer:x.new(k,{inversed:!0}),categoryField:vu}));L.get("renderer").labels.template.setAll({forceHidden:!0});const N=e.xAxes.push(v.new(k,{renderer:y.new(k,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(P.series)}));N.get("renderer").labels.template.setAll({direction:this._getDirection()});const B="{categoryY}",W=n.new(k,{labelText:B}),q=e.series.push($.new(k,{name:D,xAxis:N,yAxis:L,valueXField:Zf,categoryYField:vu,tooltip:W}));this._customizeChartTooltip(W,"vertical"),q.columns.template.setAll({ariaLabel:B,focusable:!0,templateField:"columnSettings"}),P.series.length>J5&&e.set("scrollbarY",l.new(k,{orientation:"vertical"})),L.data.setAll(r),q.data.setAll(r),q.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createLineChart(e,i,r){const{TooltipAm5:n,ScrollbarAm5:l}=await le(()=>import("./chartCommon-48444250.js"),["assets/chartCommon-48444250.js","assets/Button-eaf1a67f.js","assets/ColorSet-328b8b22.js"]),{CategoryAxisAm5:d,AxisRendererXAm5:y,ValueAxisAm5:v,AxisRendererYAm5:x,LineSeriesAm5:$}=await le(()=>import("./xyChart-bf51ca65.js"),["assets/xyChart-bf51ca65.js","assets/ColorSet-328b8b22.js","assets/Tick-afaa36a3.js","assets/Button-eaf1a67f.js"]),{root:E,mediaInfo:k}=i,{value:P,title:D}=k;e.setAll({wheelX:"panX",wheelY:"zoomX"});const L=e.xAxes.push(d.new(E,{renderer:y.new(E,{inversed:this._isInversed()}),categoryField:vu}));L.get("renderer").labels.template.setAll({forceHidden:!0});const N=e.yAxes.push(v.new(E,{renderer:x.new(E,{inside:!1}),min:this._getMinSeriesValue(P.series)}));N.get("renderer").labels.template.setAll({direction:this._getDirection()});const B="{categoryX}",W=n.new(E,{labelText:B}),q=e.series.push($.new(E,{name:D,xAxis:L,yAxis:N,valueYField:Zf,categoryXField:vu,tooltip:W}));this._customizeChartTooltip(W,"vertical"),P.series.length>J5&&e.set("scrollbarX",l.new(E,{orientation:"horizontal"})),L.data.setAll(r),q.data.setAll(r),q.appear(this._getChartSeriesAnimationMS()),e.appear(this._getChartAnimationMS())}async _createXYChart(e,i){const{XYChartAm5:r,XYCursorAm5:n}=await le(()=>import("./xyChart-bf51ca65.js"),["assets/xyChart-bf51ca65.js","assets/ColorSet-328b8b22.js","assets/Tick-afaa36a3.js","assets/Button-eaf1a67f.js"]),{root:l,mediaInfo:d}=e,{type:y}=d,v=(d==null?void 0:d.altText)||(d==null?void 0:d.title)||"",x=l.container.children.push(r.new(l,{ariaLabel:v,focusable:!0,panX:!0,panY:!0}));x.set("cursor",n.new(l,{})),y==="column-chart"&&await this._createColumnChart(x,e,i),y==="bar-chart"&&await this._createBarChart(x,e,i),y==="line-chart"&&await this._createLineChart(x,e,i),x.root.dom.classList.toggle(ls.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e;if(!i)return;const n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const l=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=l}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[n,l=""]=e.split("#");return`${n}${r}timestamp=${i}${l?"#":""}${l}`}};g([S()],ms.prototype,"_refreshIntervalInfo",void 0),g([S()],ms.prototype,"attributes",null),g([S()],ms.prototype,"activeMediaInfoIndex",null),g([S()],ms.prototype,"description",null),g([S()],ms.prototype,"fieldInfoMap",null),g([S()],ms.prototype,"layer",null),g([S()],ms.prototype,"mediaInfos",null),g([S()],ms.prototype,"popupTemplate",null),g([S()],ms.prototype,"relatedInfos",null),g([S()],ms.prototype,"title",null),g([S({type:dd})],ms.prototype,"viewModel",void 0),g([S(),Or("esri/widgets/Feature/t9n/Feature")],ms.prototype,"messages",void 0),ms=g([J("esri.widgets.Feature.FeatureMedia")],ms);const gB=ms;var a6;let Yy=a6=class extends ge{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new a6({minValue:this.minValue,maxValue:this.maxValue})}};g([S({type:Number,json:{write:!0}})],Yy.prototype,"minValue",void 0),g([S({type:Number,json:{write:!0}})],Yy.prototype,"maxValue",void 0),Yy=a6=g([J("esri.renderer.support.AuthoringInfoClassBreakInfo")],Yy);var l6;let ih=l6=class extends ge{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new l6({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ae(this.classBreakInfos)})}};g([S({type:String,json:{write:!0}})],ih.prototype,"field",void 0),g([S({type:String,json:{write:!0}})],ih.prototype,"normalizationField",void 0),g([S({type:String,json:{write:!0}})],ih.prototype,"label",void 0),g([S({type:[Yy],json:{write:!0}})],ih.prototype,"classBreakInfos",void 0),ih=l6=g([J("esri.renderers.support.AuthoringInfoFieldInfo")],ih);var u6;const cv=new xt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),dv=new xt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),hk={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},ck=["high-to-low","above-and-below","centered-on","extremes"],dk=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],pk=["seconds","minutes","hours","days","months","years"];let Rs=u6=class extends ge{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new u6({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};g([S({types:hk,json:{write:!0}})],Rs.prototype,"endTime",void 0),g([St("endTime")],Rs.prototype,"castEndTime",null),g([S({type:String,json:{write:!0}})],Rs.prototype,"field",void 0),g([S({type:Number,json:{write:!0}})],Rs.prototype,"maxSliderValue",void 0),g([S({type:Number,json:{write:!0}})],Rs.prototype,"minSliderValue",void 0),g([S({types:hk,json:{write:!0}})],Rs.prototype,"startTime",void 0),g([St("startTime")],Rs.prototype,"castStartTime",null),g([S({type:cv.apiValues,value:null,json:{type:cv.jsonValues,read:cv.read,write:cv.write}})],Rs.prototype,"style",null),g([S({type:dk,value:null,json:{type:dk,origins:{"web-scene":{type:ck,write:{writer:(t,e)=>{ck.includes(t)&&(e.theme=t)}}}},write:!0}})],Rs.prototype,"theme",null),g([S({type:dv.apiValues,json:{type:dv.jsonValues,read:dv.read,write:dv.write}})],Rs.prototype,"type",void 0),g([S({type:pk,json:{type:pk,write:!0}})],Rs.prototype,"units",void 0),Rs=u6=g([J("esri.renderers.support.AuthoringInfoVisualVariable")],Rs);const Xme=Rs;let Pb=class extends ge{constructor(e){super(e),this.type=null}};g([S({readOnly:!0,json:{read:!1,write:!0}})],Pb.prototype,"type",void 0),Pb=g([J("esri.rest.support.ColorRamp")],Pb);const W$=Pb;var h6;let Fc=h6=class extends W${constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new h6({fromColor:ae(this.fromColor),toColor:ae(this.toColor),algorithm:this.algorithm})}};g([Ue({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Fc.prototype,"algorithm",void 0),g([S({type:Ne,json:{type:[Lt],write:!0}})],Fc.prototype,"fromColor",void 0),g([S({type:Ne,json:{type:[Lt],write:!0}})],Fc.prototype,"toColor",void 0),g([S({type:["algorithmic"]})],Fc.prototype,"type",void 0),Fc=h6=g([J("esri.rest.support.AlgorithmicColorRamp")],Fc);const J$=Fc;var c6;let Ky=c6=class extends W${constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new c6({colorRamps:ae(this.colorRamps)})}};g([S({type:[J$],json:{write:!0}})],Ky.prototype,"colorRamps",void 0),g([S({type:["multipart"]})],Ky.prototype,"type",void 0),Ky=c6=g([J("esri.rest.support.MultipartColorRamp")],Ky);const vB=Ky,Qme={key:"type",base:W$,typeMap:{algorithmic:J$,multipart:vB}};function ege(t){return t&&t.type?t.type==="algorithmic"?J$.fromJSON(t):t.type==="multipart"?vB.fromJSON(t):null:null}var d6;const oc=new xt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),pv=new xt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),fk=new xt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),yk=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],tge=["high-to-low","above-and-below","above","below","90-10"],ige=["flow-line","wave-front"],rge=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ki=d6=class extends ge{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?ege(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new d6({classificationMethod:this.classificationMethod,colorRamp:ae(this.colorRamp),fadeRatio:ae(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:ae(this.field1),field2:ae(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};g([S({type:oc.apiValues,value:null,json:{type:oc.jsonValues,read:oc.read,write:oc.write,origins:{"web-document":{default:"manual",type:oc.jsonValues,read:oc.read,write:oc.write}}}})],ki.prototype,"classificationMethod",null),g([S({types:Qme,json:{write:!0}})],ki.prototype,"colorRamp",void 0),g([xe("colorRamp")],ki.prototype,"readColorRamp",null),g([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ki.prototype,"fadeRatio",void 0),g([S({type:[String],value:null,json:{write:!0}})],ki.prototype,"fields",null),g([S({type:ih,value:null,json:{write:!0}})],ki.prototype,"field1",null),g([S({type:ih,value:null,json:{write:!0}})],ki.prototype,"field2",null),g([S({type:ige,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ki.prototype,"flowTheme",null),g([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ki.prototype,"focus",null),g([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ki.prototype,"isAutoGenerated",void 0),g([S({type:Number,value:null,json:{type:Lt,write:!0}})],ki.prototype,"numClasses",null),g([S({type:yk,json:{type:yk,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ki.prototype,"lengthUnit",void 0),g([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ki.prototype,"maxSliderValue",void 0),g([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ki.prototype,"minSliderValue",void 0),g([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ki.prototype,"statistics",null),g([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ki.prototype,"standardDeviationInterval",null),g([S({type:pv.apiValues,value:null,json:{type:pv.jsonValues,read:pv.read,write:pv.write,origins:{"web-scene":{type:fk.jsonValues,write:{writer:fk.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],ki.prototype,"type",null),g([S({type:[Xme],json:{write:!0}})],ki.prototype,"visualVariables",void 0),g([S({type:rge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ki.prototype,"univariateSymbolStyle",null),g([S({type:tge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ki.prototype,"univariateTheme",null),ki=d6=g([J("esri.renderers.support.AuthoringInfo")],ki);const Y$=ki,Y5=new xt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Zy=class extends ge{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};g([S({type:Y$,json:{write:!0}})],Zy.prototype,"authoringInfo",void 0),g([S({type:Y5.apiValues,readOnly:!0,json:{type:Y5.jsonValues,read:!1,write:{writer:Y5.write,ignoreOrigin:!0}}})],Zy.prototype,"type",void 0),Zy=g([J("esri.renderers.Renderer")],Zy);const eu=Zy;function sge(t){var e,i;return((i=(e=t.match(nge))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const nge=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var p6;let k0=p6=class extends ge{constructor(){super(...arguments),this.title=null}clone(){return new p6({title:this.title})}};g([S({type:String,json:{write:!0}})],k0.prototype,"title",void 0),k0=p6=g([J("esri.renderers.support.LegendOptions")],k0);var f6;let Cb=f6=class extends k0{constructor(){super(...arguments),this.showLegend=null}clone(){return new f6({title:this.title,showLegend:this.showLegend})}};g([S({type:Boolean,json:{write:!0}})],Cb.prototype,"showLegend",void 0),Cb=f6=g([J("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Cb);const bB=Cb,K5=new xt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Eo=class extends ge{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(ve.getLogger(this).error(".field: field must be a string value"),null):Im(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};g([S()],Eo.prototype,"index",void 0),g([S({type:K5.apiValues,readOnly:!0,json:{read:K5.read,write:K5.write}})],Eo.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Eo.prototype,"field",void 0),g([St("field")],Eo.prototype,"castField",null),g([S({type:String,json:{write:!0}})],Eo.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],Eo.prototype,"valueExpressionTitle",void 0),g([S({readOnly:!0})],Eo.prototype,"arcadeRequired",null),g([S({type:bB,json:{write:!0}})],Eo.prototype,"legendOptions",void 0),Eo=g([J("esri.renderers.visualVariables.VisualVariable")],Eo);const rg=Eo;var y6;let Nc=y6=class extends rg{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new y6({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};g([S({readOnly:!0})],Nc.prototype,"cache",null),g([S({type:["color"],json:{type:["colorInfo"]}})],Nc.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Nc.prototype,"normalizationField",void 0),g([S({type:[Xpe],json:{write:!0}})],Nc.prototype,"stops",null),Nc=y6=g([J("esri.renderers.visualVariables.ColorVariable")],Nc);const wB=Nc;var m6;let Bu=m6=class extends ge{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return tm(e.transparency)}writeOpacity(t,e,i){e[i]=s_(t)}clone(){return new m6({label:this.label,opacity:this.opacity,value:this.value})}};g([S({type:String,json:{write:!0}})],Bu.prototype,"label",void 0),g([S({type:Number,json:{type:Lt,write:{target:"transparency"}}})],Bu.prototype,"opacity",void 0),g([xe("opacity",["transparency"])],Bu.prototype,"readOpacity",null),g([Ae("opacity")],Bu.prototype,"writeOpacity",null),g([S({type:Number,json:{write:!0}})],Bu.prototype,"value",void 0),Bu=m6=g([J("esri.renderers.visualVariables.support.OpacityStop")],Bu);const oge=Bu;var g6;let zc=g6=class extends rg{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new g6({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};g([S({readOnly:!0})],zc.prototype,"cache",null),g([S({type:["opacity"],json:{type:["transparencyInfo"]}})],zc.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],zc.prototype,"normalizationField",void 0),g([S({type:[oge],json:{write:!0}})],zc.prototype,"stops",null),zc=g6=g([J("esri.renderers.visualVariables.OpacityVariable")],zc);const _B=zc;var v6;let ml=v6=class extends rg{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new v6({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};g([S({readOnly:!0})],ml.prototype,"cache",null),g([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ml.prototype,"axis",void 0),g([S({type:["rotation"],json:{type:["rotationInfo"]}})],ml.prototype,"type",void 0),g([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ml.prototype,"rotationType",void 0),g([S({type:String,json:{write:!0}})],ml.prototype,"valueExpressionTitle",void 0),g([Ae("web-scene","valueExpressionTitle")],ml.prototype,"writeValueExpressionTitleWebScene",null),ml=v6=g([J("esri.renderers.visualVariables.RotationVariable")],ml);const xB=ml;var b6;let Bp=b6=class extends ge{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new b6({label:this.label,size:this.size,value:this.value})}};g([S({type:String,json:{write:!0}})],Bp.prototype,"label",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],Bp.prototype,"size",void 0),g([S({type:Number,json:{write:!0}})],Bp.prototype,"value",void 0),Bp=b6=g([J("esri.renderers.visualVariables.support.SizeStop")],Bp);const Gp=Bp;var w6;let Ob=w6=class extends bB{constructor(){super(...arguments),this.customValues=null}clone(){return new w6({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};g([S({type:[Number],json:{write:!0}})],Ob.prototype,"customValues",void 0),Ob=w6=g([J("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Ob);const age=Ob;var zl,vr;function wh(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function wm(t){return t!=null&&!isNaN(t)&&isFinite(t)}function SB(t){return t.valueExpression?zl.Expression:t.field&&typeof t.field=="string"?zl.Field:zl.Unknown}function lge(t,e){const i=e||SB(t),r=t.valueUnit||"unknown";return i===zl.Unknown?vr.Constant:t.stops?vr.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?vr.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?vr.Proportional:vr.Additive:vr.Identity:vr.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(zl||(zl={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(vr||(vr={}));const K$={unknown:1,inches:Mn(1,"meters","inches"),feet:Mn(1,"meters","feet"),"us-feet":Mn(1,"meters","us-feet"),yards:Mn(1,"meters","yards"),miles:Mn(1,"meters","miles"),"nautical-miles":Mn(1,"meters","nautical-miles"),millimeters:Mn(1,"meters","millimeters"),centimeters:Mn(1,"meters","centimeters"),decimeters:Mn(1,"meters","decimeters"),meters:Mn(1,"meters","meters"),kilometers:Mn(1,"meters","kilometers"),"decimal-degrees":1/tJ(1,"meters",Xt.radius)},Fh=ve.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),mk=new ur,Lb=Math.PI,MB=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function $B(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(D=>D.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Fh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof e=="number",l=n?null:e,d=l&&l.attributes;let y=n?e:null;const v=r.field,{ipData:x,hasExpression:$}=r.cache;let E=r.cache.compiledFunc;if(!v&&!$){const D=r.stops;return D&&D[0]&&D[0].color}if(typeof y!="number")if($){if(i==null||i.arcade==null)return void Fh.error("Use of arcade expressions requires an arcade context");const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,N=L.getViewInfo(D),B=L.createExecContext(l,N);if(!E){const W=L.createSyntaxTree(r.valueExpression);E=L.createFunction(W),r.cache.compiledFunc=E}y=L.executeFunction(E,B)}else d&&(y=d[v]);const k=r.normalizationField,P=d!=null&&k!=null?parseFloat(d[k]):void 0;if(y!=null&&(!k||n||!isNaN(P)&&P!==0)){isNaN(P)||n||(y/=P);const D=Z$(y,x);if(D){const L=D[0],N=D[1],B=L===N?r.stops[L].color:Ne.blendColors(r.stops[L].color,r.stops[N].color,D[2],i!=null?i.color:void 0);return new Ne(B)}}}function TB(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(D=>D.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Fh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof e=="number",l=n?null:e,d=l&&l.attributes;let y=n?e:null;const v=r.field,{ipData:x,hasExpression:$}=r.cache;let E=r.cache.compiledFunc;if(!v&&!$){const D=r.stops;return D&&D[0]&&D[0].opacity}if(typeof y!="number")if($){if(i==null||i.arcade==null)return void Fh.error("Use of arcade expressions requires an arcade context");const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,N=L.getViewInfo(D),B=L.createExecContext(l,N);if(!E){const W=L.createSyntaxTree(r.valueExpression);E=L.createFunction(W),r.cache.compiledFunc=E}y=L.executeFunction(E,B)}else d&&(y=d[v]);const k=r.normalizationField,P=d!=null&&k!=null?parseFloat(d[k]):void 0;if(y!=null&&(!k||n||!isNaN(P)&&P!==0)){isNaN(P)||n||(y/=P);const D=Z$(y,x);if(D){const L=D[0],N=D[1];if(L===N)return r.stops[L].opacity;{const B=r.stops[L].opacity;return B+(r.stops[N].opacity-B)*D[2]}}}}function IB(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Fh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",l=n==="heading"&&r.rotationType==="arithmetic"?90:0,d=n==="heading"&&r.rotationType==="arithmetic"?-1:1,y=typeof e=="number"?null:e,v=y&&y.attributes,x=r.field,{hasExpression:$}=r.cache;let E=r.cache.compiledFunc,k=0;if(!x&&!$)return k;if($){if(i==null||i.arcade==null)return void Fh.error("Use of arcade expressions requires an arcade context");const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,L=D.getViewInfo(P),N=D.createExecContext(y,L);if(!E){const B=D.createSyntaxTree(r.valueExpression);E=D.createFunction(B),r.cache.compiledFunc=E}k=D.executeFunction(E,N)}else v&&(k=v[x]||0);return k=typeof k!="number"||isNaN(k)?null:l+d*k,k}function uge(t,e,i){const r=typeof e=="number",n=r?null:e,l=n&&n.attributes;let d=r?e:null;const{isScaleDriven:y}=t.cache;let v=t.cache.compiledFunc;if(y){const $=i!=null?i.scale:void 0,E=i!=null?i.view:void 0;d=$==null||E==="3d"?hge(t):$}else if(!r)switch(t.inputValueType){case zl.Expression:{if(i==null||i.arcade==null)return void Fh.error("Use of arcade expressions requires an arcade context");const $={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},E=i.arcade.arcadeUtils,k=E.getViewInfo($),P=E.createExecContext(n,k);if(!v){const D=E.createSyntaxTree(t.valueExpression);v=E.createFunction(D),t.cache.compiledFunc=v}d=E.executeFunction(v,P);break}case zl.Field:l&&(d=l[t.field]);break;case zl.Unknown:d=null}if(!wm(d))return null;if(r||!t.normalizationField)return d;const x=l?parseFloat(l[t.normalizationField]):null;return wm(x)&&x!==0?d/x:null}function hge(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function U_(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(l=>l.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Fh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=AB(uge(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function Ns(t,e,i){return t==null?null:wh(t)?U_(t,e,i):wm(t)?t:null}function EB(t,e,i){return wm(i)&&t>i?i:wm(e)&&t<e?e:t}function cge(t,e,i,r){return t+((Ns(e.minSize,i,r)||e.minDataValue)??0)}function dge(t,e,i){const r=t.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=t.minSize),Ns(n,e,i)}function pge(t,e,i,r){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),l=Ns(e.minSize,i,r),d=Ns(e.maxSize,i,r),y=r!=null?r.shape:void 0;if(t<=e.minDataValue)return l;if(t>=e.maxDataValue)return d;if(l==null||d==null)return null;if(e.scaleBy==="area"&&y){const v=y==="circle",x=v?Lb*(l/2)**2:l*l,$=x+n*((v?Lb*(d/2)**2:d*d)-x);return v?2*Math.sqrt($/Lb):Math.sqrt($)}return l+n*(d-l)}function fge(t,e,i,r){const n=r!=null?r.shape:void 0,l=t/e.minDataValue,d=Ns(e.minSize,i,r),y=Ns(e.maxSize,i,r);let v=null;return v=n==="circle"?2*Math.sqrt(l*(d/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(l*d**2):l*d,EB(v,d,y)}function yge(t,e,i,r,n){var v,x,$;const[l,d,y]=Z$(t,n);if(l===d)return Ns((v=e.stops)==null?void 0:v[l].size,i,r);{const E=Ns((x=e.stops)==null?void 0:x[l].size,i,r);return E+(Ns(($=e.stops)==null?void 0:$[d].size,i,r)-E)*y}}function mge(t,e,i,r){const n=(r!=null&&r.resolution?r.resolution:1)*K$[e.valueUnit],l=Ns(e.minSize,i,r),d=Ns(e.maxSize,i,r),{valueRepresentation:y}=e;let v=null;return v=y==="area"?2*Math.sqrt(t/Lb)/n:y==="radius"||y==="distance"?2*t/n:t/n,EB(v,l,d)}function AB(t,e,i,r,n){switch(e.transformationType){case vr.Additive:return cge(t,e,i,r);case vr.Constant:return dge(e,i,r);case vr.ClampedLinear:return pge(t,e,i,r);case vr.Proportional:return fge(t,e,i,r);case vr.Stops:return yge(t,e,i,r,n);case vr.RealWorldSize:return mge(t,e,i,r);case vr.Identity:return t;case vr.Unknown:return null}}function gge(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let l=Ns(t.minSize,mk,n),d=Ns(t.maxSize,mk,n);if(l!=null||d!=null){if(l>d){const y=d;d=l,l=y}return{minSize:l,maxSize:d}}}function vge(t,e,i){if(!t.visualVariables)return;const r=[],n=[],l=[],d=[],y=[];for(const v of t.visualVariables)switch(v.type){case"color":n.push(v);break;case"opacity":l.push(v);break;case"rotation":y.push(v);break;case"size":d.push(v)}return n.forEach(v=>{const x=$B(v,e,i);r.push({variable:v,value:x})}),l.forEach(v=>{const x=TB(v,e,i);r.push({variable:v,value:x})}),y.forEach(v=>{const x=IB(v,e,i);r.push({variable:v,value:x})}),d.forEach(v=>{const x=U_(v,e,i);r.push({variable:v,value:x})}),r.filter(v=>v.value!=null)}function Z$(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,l)=>t<n?(r=l,!0):(i=l,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function bge(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const l=n.useSymbolValue?"symbol-value":U_(n,e,i);switch(n.axis){case"width":r[0]=l;break;case"depth":r[1]=l;break;case"height":r[2]=l;break;case"width-and-depth":r[0]=l,r[1]=l;break;case"all":case void 0:case null:r[0]=l,r[1]=l,r[2]=l;break;default:n.axis}}return r}const q_=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:bge,getColor:$B,getOpacity:TB,getRotationAngle:IB,getSize:U_,getSizeForValue:AB,getSizeFromNumberOrVariable:Ns,getSizeRangeAtScale:gge,getVisualVariableValues:vge,viewScaleRE:MB},Symbol.toStringTag,{value:"Module"}));var _6;const fv=new xt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),x6=new xt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function gk(t){if(t!=null)return typeof t=="string"||typeof t=="number"?Pt(t):t.type==="size"?wh(t)?t:(delete(t={...t}).type,new Ft(t)):void 0}function vk(t,e,i){if(typeof t!="object")return t;const r=new Ft;return r.read(t,i),r}let Ft=_6=class extends rg{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&MB.test(this.valueExpression)}}set expression(t){ve.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){wh(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),wh(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return SB(this)}set maxDataValue(t){t&&this.stops&&(ve.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(ve.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return gk(t)}readMaxSize(t,e,i){return vk(t,e,i)}set minDataValue(t){t&&this.stops&&(ve.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(ve.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return gk(t)}readMinSize(t,e,i){return vk(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(ve.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return lge(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r&&r.messages){const n=this.index,l=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?x6.read(t):null}clone(){return new _6({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:wh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:wh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===vr.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===vr.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};g([S({readOnly:!0})],Ft.prototype,"cache",null),g([S({type:fv.apiValues,json:{type:fv.jsonValues,origins:{"web-map":{read:!1}},read:fv.read,write:fv.write}})],Ft.prototype,"axis",void 0),g([S({type:String,value:null,json:{read:!1}})],Ft.prototype,"expression",null),g([S()],Ft.prototype,"index",null),g([S({type:String,readOnly:!0})],Ft.prototype,"inputValueType",null),g([S({type:age,json:{write:!0}})],Ft.prototype,"legendOptions",void 0),g([S({type:Number,value:null,json:{write:!0}})],Ft.prototype,"maxDataValue",null),g([S({type:Number,value:null,json:{write:!0}})],Ft.prototype,"maxSize",null),g([St("maxSize")],Ft.prototype,"castMaxSize",null),g([xe("maxSize")],Ft.prototype,"readMaxSize",null),g([S({type:Number,value:null,json:{write:!0}})],Ft.prototype,"minDataValue",null),g([S({type:Number,value:null,json:{write:!0}})],Ft.prototype,"minSize",null),g([St("minSize")],Ft.prototype,"castMinSize",null),g([xe("minSize")],Ft.prototype,"readMinSize",null),g([S({type:String,json:{write:!0}})],Ft.prototype,"normalizationField",void 0),g([S({readOnly:!0})],Ft.prototype,"arcadeRequired",null),g([S({type:String})],Ft.prototype,"scaleBy",void 0),g([S({type:[Gp],value:null,json:{write:!0}})],Ft.prototype,"stops",null),g([S({type:["outline"],json:{write:!0}})],Ft.prototype,"target",void 0),g([S({type:String,readOnly:!0})],Ft.prototype,"transformationType",null),g([S({type:["size"],json:{type:["sizeInfo"]}})],Ft.prototype,"type",void 0),g([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ft.prototype,"useSymbolValue",void 0),g([S({type:String,json:{write:!0}})],Ft.prototype,"valueExpression",void 0),g([xe("valueExpression",["valueExpression","expression"])],Ft.prototype,"readValueExpression",null),g([Ae("web-scene","valueExpression")],Ft.prototype,"writeValueExpressionWebScene",null),g([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ft.prototype,"valueRepresentation",void 0),g([S({type:x6.apiValues,json:{write:x6.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ft.prototype,"valueUnit",void 0),g([xe("valueUnit")],Ft.prototype,"readValueUnit",null),Ft=_6=g([J("esri.renderers.visualVariables.SizeVariable")],Ft);const H_=Ft,wge={color:wB,size:H_,opacity:_B,rotation:xB},_ge=new xt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),xge=/^\[([^\]]+)\]$/i;let Db=class extends Be{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:l}=i,d=n&&n.match(xge),y=d&&d[1];if(y&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:l,field:y})),e)return e.map(v=>{const x=_ge.read(v.type),$=wge[x];$||(ve.getLogger(this).warn(`Unknown variable type: ${x}`),r&&r.messages&&r.messages.push(new Kn("visual-variable:unsupported",`visualVariable of type '${x}' is not supported`,{definition:v,context:r})));const E=new $;return E.read(v,r),E})}writeVariables(e,i){const r=[];for(const n of e){const l=n.toJSON(i);l&&r.push(l)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};g([S()],Db.prototype,"visualVariables",null),Db=g([J("esri.renderers.visualVariables.VisualVariableFactory")],Db);const Sge=Db,Mge={base:rg,key:"type",typeMap:{opacity:_B,color:wB,rotation:xB,size:H_}},xf=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new Sge}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,l){r[n]=this._vvFactory.writeVariables(i,l)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(l=>l.type===i&&(typeof r=="string"?l.target===r:r!==!1||!l.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const l of n)l&&(l.field&&fn(i,r,l.field),l.normalizationField&&fn(i,r,l.normalizationField),l.valueExpression&&($ge(l.valueExpression,i,r)||await Ts(i,r,l.valueExpression)))}};return g([S({types:[Mge],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),g([xe("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),g([Ae("visualVariables")],e.prototype,"writeVisualVariables",null),e=g([J("esri.renderers.mixins.VisualVariablesMixin")],e),e};function $ge(t,e,i){const r=sge(t);return r!=null&&(fn(e,i,r),!0)}const Xf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Tge(t,e=Xf){var y,v;if(!t)return{symbol:null};const{retainId:i=Xf.retainId,ignoreDrivers:r=Xf.ignoreDrivers,hasLabelingContext:n=Xf.hasLabelingContext,retainCIM:l=Xf.retainCIM}=e;let d=null;if(Wl(t)||t instanceof Ud)d=t.clone();else if(t.type==="cim"){const x=(v=(y=t.data)==null?void 0:y.symbol)==null?void 0:v.type;if(x!=="CIMPointSymbol")return{error:new ne("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})};d=l?t.clone():ad.fromCIMSymbol(t)}else if(t instanceof gn)d=y_.fromSimpleLineSymbol(t);else if(t instanceof Hh)d=ad.fromSimpleMarkerSymbol(t);else if(t instanceof g_)d=ad.fromPictureMarkerSymbol(t);else if(t instanceof qh)d=e.geometryType&&e.geometryType==="mesh"?m_.fromSimpleFillSymbol(t):Vm.fromSimpleFillSymbol(t);else{if(!(t instanceof yf))return{error:new ne("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};d=n?f_.fromTextSymbol(t):ad.fromTextSymbol(t)}return i&&d&&d.type!=="cim"&&(d.id=t.id),r&&Wl(d)&&d.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:d}}function I2(t,e,i,r){const n=kB(t,{},{context:r,isLabelSymbol:!1});n!=null&&(e[i]=n)}function bk(t,e,i,r){const n=kB(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function wk(t){return t instanceof ff||t instanceof Ud}function kB(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:n}=i,l=r==null?void 0:r.origin,d=r==null?void 0:r.messages;if(l==="web-scene"&&!wk(t)){const y=Tge(t,{retainCIM:!0,hasLabelingContext:n});return y.symbol!=null?y.symbol.write(e,r):(d==null||d.push(new ne("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:y.error})),null)}return(l==="web-map"||l==="portal-item"&&!qO(r==null?void 0:r.layer))&&wk(t)?(d==null||d.push(new ne("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function PB(t,e){return Wte(t,null,e)}const Sf={types:UR,json:{write:{writer:I2},origins:{"web-scene":{types:nE,write:{writer:I2},read:{reader:rf({types:nE})}}}}},CB={types:{base:Us,key:"type",typeMap:{"simple-fill":bd.typeMap["simple-fill"],"picture-fill":bd.typeMap["picture-fill"],"polygon-3d":bd.typeMap["polygon-3d"]}},json:{write:{writer:I2},origins:{"web-scene":{type:Vm,write:{writer:I2}}}}},Rb={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var S6;let Gu=S6=class extends ge{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new S6({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};g([S({type:String,json:{write:!0}})],Gu.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Gu.prototype,"label",void 0),g([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Gu.prototype,"minValue",void 0),g([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Gu.prototype,"maxValue",void 0),g([S(Sf)],Gu.prototype,"symbol",void 0),Gu=S6=g([J("esri.renderers.support.ClassBreakInfo")],Gu);const E2=Gu;var M6;const OB="log",jb="percent-of-total",Fb="field",yv=new xt({esriNormalizeByLog:OB,esriNormalizeByPercentOfTotal:jb,esriNormalizeByField:Fb}),Ige=Di(E2);let tr=M6=class extends xf(eu){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const l=new E2;return l.read(n,i),l.minValue==null&&(l.minValue=r),l.maxValue==null&&(l.maxValue=l.minValue),r=l.maxValue,l})}writeClassBreakInfos(t,e,i,r){const n=t.map(l=>l.write({},r));this._areClassBreaksConsecutive()&&n.forEach(l=>delete l.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(ve.getLogger(this).error(".field: field must be a string value"),null):Im(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&Fb||i&&jb||null,e&&i&&ve.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==Fb&&t!==jb||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new E2({minValue:t,maxValue:e,symbol:qR(i)}):Ige(ae(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||ve.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await ql()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void ve.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const n=await ql(),{arcadeUtils:l}=n;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new M6({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ae(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ae(this.visualVariables),legendOptions:ae(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Ts(t,e,this.valueExpression)];fn(t,e,this.field),fn(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:l}=e??{},{valueExpression:d}=this;let y=this._compiledValueExpression.valueExpression===d?this._compiledValueExpression.compiledFunction:null;const v=l.arcadeUtils;if(!y){const $=v.createSyntaxTree(d);y=v.createFunction($),this._compiledValueExpression.compiledFunction=y}this._compiledValueExpression.valueExpression=d;const x=v.executeFunction(y,v.createExecContext(t,v.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(x)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const l=this.normalizationTotal,d=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===OB)n=Math.log(n)*Math.LOG10E;else if(r!==jb||l==null||isNaN(l)){if(r===Fb&&!isNaN(d)){if(isNaN(n)||isNaN(d))return-1;n/=d}}else n=n/l*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};g([S(CB)],tr.prototype,"backgroundFillSymbol",void 0),g([S({type:[E2]})],tr.prototype,"classBreakInfos",void 0),g([xe("classBreakInfos")],tr.prototype,"readClassBreakInfos",null),g([Ae("classBreakInfos")],tr.prototype,"writeClassBreakInfos",null),g([S({type:String,json:{write:!0}})],tr.prototype,"defaultLabel",void 0),g([S(Sf)],tr.prototype,"defaultSymbol",void 0),g([S({type:String,json:{write:!0}})],tr.prototype,"field",void 0),g([St("field")],tr.prototype,"castField",null),g([S({type:Boolean})],tr.prototype,"isMaxInclusive",void 0),g([S({type:k0,json:{write:!0}})],tr.prototype,"legendOptions",void 0),g([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],tr.prototype,"minValue",null),g([S({type:String,json:{write:!0}})],tr.prototype,"normalizationField",void 0),g([S({type:Number,cast:t=>zn(t),json:{write:!0}})],tr.prototype,"normalizationTotal",void 0),g([S({type:yv.apiValues,value:null,json:{type:yv.jsonValues,read:yv.read,write:yv.write}})],tr.prototype,"normalizationType",null),g([Ue({classBreaks:"class-breaks"})],tr.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],tr.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],tr.prototype,"valueExpressionTitle",void 0),tr=M6=g([J("esri.renderers.ClassBreaksRenderer")],tr);const LB=tr;let A2=class{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ne(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new A2(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),l=/^\s*\d+\s*$/;if(!r||!r.match||!l.test(r))throw new ne((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n||!n.match||!l.test(n))throw new ne((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const d=parseInt(r,10),y=parseInt(n,10);return new A2(d,y,i)}};function Ege(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function _k(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function xk(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let X$=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const r of e){const n=r==null?void 0:r.name,l=Mk(r==null?void 0:r.name);if(n&&l){const d=Sk(n);this._fieldsMap.set(n,r),this._fieldsMap.set(d,r),this._normalizedFieldsMap.set(l,r),i.push(d),Ege(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):f7(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),_k(r)||xk(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)_k(e)||xk(e)||e.nullable||vX(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(Sk(e))??this._normalizedFieldsMap.get(Mk(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function Sk(t){return t.trim().toLowerCase()}function Mk(t){var e;return((e=iX(t))==null?void 0:e.toLowerCase())??""}const $k="esri.renderers.support.DictionaryLoader",Age={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Q$=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new fV(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(D){if(Is(D))return this._dictionaryPromise=null,null}const n=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),l={};if(this.fieldMap)for(const D of this._symbolFields){const L=this._getFieldName(this.fieldMap[D]);l[D]=L?n?e.attributes[L]:""+e.attributes[L]:""}let d=null;try{d=r==null?void 0:r(l,i)}catch{return null}if(!d||typeof d!="string")return null;const y=bM(d).toString(),v=this._symbolCache.get(y);if(v)return v.catch(()=>{this._symbolCache.pop(y)}),v;const x=d.split(";"),$=[],E=[];for(const D of x)if(D)if(D.includes("po:")){const L=D.substr(3).split("|");if(L.length===3){const N=L[0],B=L[1];let W=L[2];if(B==="DashTemplate")W=W.split(" ").map(q=>Number(q));else if(B==="Color"){const q=new Ne(W).toRgba();W=[q[0],q[1],q[2],255*q[3]]}else W=Number(W);E.push({primitiveName:N,propertyName:B,value:W})}}else if(D.includes("|")){for(const L of D.split("|"))if(this._itemNames.has(L)){$.push(L);break}}else this._itemNames.has(D)&&$.push(D);const k=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",P=this._cimPartsToCIMSymbol($,E,k,i);return this._symbolCache.put(y,P,1),P}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void ve.getLogger($k).error("no valid URL!");const i=Ht(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,ql()]);if(!r)throw this._dictionaryPromise=null,new ne("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:l,expression:d,itemsNames:y}=r,v=d;let x=!1;l&&(this._dictionaryVersion=A2.parse(l),x=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(y),this._symbolFields=n.symbol;const $={};if(this.config){const P=this.config;for(const D in P)$[D]=P[D]}if(n.configuration)for(const P of n.configuration)$.hasOwnProperty(P.name)||($[P.name]=P.value);const E=[];if(e!=null&&e.fields&&this.fieldMap)for(const P of this._symbolFields){const D=this.fieldMap[P],L=e.fields.filter(N=>N.name.toLowerCase()===(D==null?void 0:D.toLowerCase()));L.length>0&&E.push({...L[0],type:x?L[0].type:"esriFieldTypeString"})}E.length>0&&(this._fieldIndex=new X$(E));const k=QZ(v,e!=null?e.spatialReference:null,E,$).then(P=>{const D={scale:0};return(L,N)=>{if(P==null)return null;const B=P.repurposeFeature({geometry:null,attributes:L});return D.scale=N!=null?N.scale??void 0:void 0,P.evaluate({$feature:B,$view:D},P.services)}}).catch(P=>(ve.getLogger($k).error("Creating dictinoary expression failed:",P),null));return this._dictionaryPromise=k,k}async _cimPartsToCIMSymbol(e,i,r,n){const l=new Array(e.length);for(let v=0;v<e.length;v++)l[v]=this._getSymbolPart(e[v],n);const d=await Promise.all(l),y=this.fieldMap;if(y)for(const v of d)DB(v,y);return new jm({data:this._combineSymbolParts(d,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(l=>l.data);const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),n=Ht(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,n);try{return(await n).data}catch(l){throw this._ongoingRequests.delete(e),l}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const n={...e[0]};if(e.length>1){n.symbolLayers=[];for(const l of e){const d=l;n.symbolLayers.unshift(...d.symbolLayers)}}return r&&(n.callout=Age),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function DB(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&kge(n,e)}}function kge(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":DB(n,e);break;case"CIMTextSymbol":n.fieldMap=e}}}const e$e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:Q$},Symbol.toStringTag,{value:"Module"}));var $6;let Ao=$6=class extends xf(eu){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Q$(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new $6({config:ae(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ae(this.fieldMap),url:ae(this.url),visualVariables:ae(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Ts(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};g([S({type:Q$})],Ao.prototype,"_loader",null),g([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ao.prototype,"config",void 0),g([S({type:Object,json:{write:!0}})],Ao.prototype,"fieldMap",void 0),g([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ao.prototype,"scaleExpression",void 0),g([Ae("scaleExpression")],Ao.prototype,"writeData",null),g([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Ao.prototype,"scaleExpressionTitle",void 0),g([S({type:String,json:{write:!0}})],Ao.prototype,"url",void 0),g([Ae("visualVariables")],Ao.prototype,"writeVisualVariables",null),Ao=$6=g([J("esri.renderers.DictionaryRenderer")],Ao);const Pge=Ao;var T6;let gl=T6=class extends ge{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(ve.getLogger(this).error(".field: field must be a string value"),null):Im(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new T6({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([S({type:Ne,json:{type:[Number],write:!0}})],gl.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],gl.prototype,"field",void 0),g([St("field")],gl.prototype,"castField",null),g([S({type:String,json:{write:!0}})],gl.prototype,"label",void 0),g([S({type:String,json:{write:!0}})],gl.prototype,"valueExpression",void 0),g([S({type:String,json:{write:!0}})],gl.prototype,"valueExpressionTitle",void 0),gl=T6=g([J("esri.renderers.support.AttributeColorInfo")],gl);const RB=gl;var I6;let Nb=I6=class extends ge{constructor(){super(...arguments),this.unit=null}clone(){return new I6({unit:this.unit})}};g([S({type:String,json:{write:!0}})],Nb.prototype,"unit",void 0),Nb=I6=g([J("esri.renderers.support.DotDensityLegendOptions")],Nb);const Cge=Nb;var E6;let js=E6=class extends xf(eu){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ne([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new gn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new qh({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new E6({attributes:ae(this.attributes),backgroundColor:ae(this.backgroundColor),dotBlendingEnabled:ae(this.dotBlendingEnabled),dotShape:ae(this.dotShape),dotSize:ae(this.dotSize),dotValue:ae(this.dotValue),legendOptions:ae(this.legendOptions),outline:ae(this.outline),referenceScale:ae(this.referenceScale),visualVariables:ae(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Ts(t,e,i.valueExpression),i.field&&t.add(i.field)}};g([S({type:[RB],json:{write:!0}})],js.prototype,"attributes",void 0),g([S({type:Ne,json:{write:!0}})],js.prototype,"backgroundColor",void 0),g([S({type:Boolean,json:{write:!0}})],js.prototype,"dotBlendingEnabled",void 0),g([S({type:String,json:{write:!1}})],js.prototype,"dotShape",void 0),g([S({type:Number,json:{write:!0}})],js.prototype,"dotSize",void 0),g([S({type:Cge,json:{write:!0}})],js.prototype,"legendOptions",void 0),g([S({type:gn,json:{default:null,write:!0}})],js.prototype,"outline",void 0),g([S({type:Number,json:{write:!0}})],js.prototype,"dotValue",void 0),g([S({type:Number,json:{write:!0}})],js.prototype,"referenceScale",void 0),g([S({type:Number,json:{write:!0}})],js.prototype,"seed",void 0),g([Ue({dotDensity:"dot-density"})],js.prototype,"type",void 0),js=E6=g([J("esri.renderers.DotDensityRenderer")],js);const Oge=js;let Up=class extends si(ge){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};g([S({type:String,json:{write:!0}})],Up.prototype,"minLabel",void 0),g([S({type:String,json:{write:!0}})],Up.prototype,"maxLabel",void 0),g([S({type:String,json:{write:!0}})],Up.prototype,"title",void 0),Up=g([J("esri.renderers.support.HeatmapLegendOptions")],Up);function W_(){return[0,0,0,0]}function Lge(t){return[t[0],t[1],t[2],t[3]]}function Mf(t,e,i,r){return[t,e,i,r]}function Dge(t){const e=W_(),i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Rge(t,e){return new Float64Array(t,e,4)}function jB(){return W_()}function FB(){return Mf(1,1,1,1)}function NB(){return Mf(1,0,0,0)}function zB(){return Mf(0,1,0,0)}function VB(){return Mf(0,0,1,0)}function BB(){return Mf(0,0,0,1)}const jge=jB(),Fge=FB(),Nge=NB(),zge=zB(),Vge=VB(),Bge=BB();Object.freeze(Object.defineProperty({__proto__:null,ONES:Fge,UNIT_W:Bge,UNIT_X:Nge,UNIT_Y:zge,UNIT_Z:Vge,ZEROS:jge,clone:Lge,create:W_,createView:Rge,fromArray:Dge,fromValues:Mf,ones:FB,unitW:BB,unitX:NB,unitY:zB,unitZ:VB,zeros:jB},Symbol.toStringTag,{value:"Module"}));const eT=2.4;function Gge(t){return Ba(t*eT)}function Uge(t){return Vr(t)/eT}function qge(t,e,i,r){let{color:n,ratio:l}=e,{color:d,ratio:y}=i;y===l&&(y===1?l-=1e-6:y+=1e-6);const v=zs((r-l)/(y-l),0,1);vL(t,n.toArray(),d.toArray(),v)}function i$e(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:y})=>y>=0&&y<=1).sort((y,v)=>y.ratio-v.ratio).map(({color:y,ratio:v})=>({color:y,ratio:Math.max(v,.001)})),t.length<1)return i;let r=t[0],n=t[0],l=1;const d=W_();for(let y=0;y<512;y++){const v=(y+.5)/512;for(;v>n.ratio&&l<t.length;)r=n,n=t[l++];qge(d,r,n,v),i.set(d,4*y)}return i}function r$e(t,e,i,r){const{radius:n,fieldOffset:l,field:d}=e,y=Math.round(Vr(n)),v=new Float64Array(i*r);let x,$=Number.NEGATIVE_INFINITY;const E=Jge(d,l),k=new Set;for(const P of t){const D=P.getCursor();for(;D.next();){const L=D.getObjectId();if(k.has(L))continue;k.add(L);const N=D.readLegacyPointGeometry(),B=128;if(N.x<-B||N.x>=i+B||N.y<-B||N.y>r+B)continue;const W=+E(D),q=Math.max(0,Math.round(N.x)-y),Y=Math.max(0,Math.round(N.y)-y),ie=Math.min(r,Math.round(N.y)+y),se=Math.min(i,Math.round(N.x)+y);for(let ue=Y;ue<ie;ue++)for(let de=q;de<se;de++){const be=ue*i+de,we=Wge(N.x-de,N.y-ue,y);x=v[be]+=we*W,x>$&&($=x)}}}return{matrix:v.buffer,max:$}}function s$e(t,e,i,r,n,l){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const d=t.getImageData(0,0,e,e);i&&r&&d.data.set(new Uint8ClampedArray(Hge(e,i,r,n,l))),t.putImageData(d,0,0)}function Hge(t,e,i,r,n){const l=new Uint32Array(t*t),d="buffer"in e?e:new Float64Array(e),y="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),v=y.length/(n-r);for(let x=0;x<d.length;x++){const $=d[x],E=Math.floor(($-r)*v);l[x]=y[zs(E,0,y.length-1)]}return l.buffer}function Wge(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function n$e(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function Jge(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var A6;const GB="esri.renderers.HeatmapRenderer",Yge=ve.getLogger(GB);function Tk(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:l,minPixelIntensity:d,...y}=t;return y}}return t}let fr=A6=class extends eu{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new C1({ratio:0,color:new Ne("rgba(255, 140, 0, 0)")}),new C1({ratio:.75,color:new Ne("rgba(255, 140, 0, 1)")}),new C1({ratio:.9,color:new Ne("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return Tk(t)}get blurRadius(){return Uge(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Gge(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(eT**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||_r(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,tf(()=>{Z1(Yge,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=Tk(t),super.read(t,e)}getSymbol(){return new Hh}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await fn(t,e,i),r&&typeof r=="string"&&await Ts(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new A6({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ae(this.colorStops),field:this.field,legendOptions:ae(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([S({type:Y$,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],fr.prototype,"authoringInfo",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fr.prototype,"blurRadius",null),g([S({type:[C1],json:{write:!0}})],fr.prototype,"colorStops",void 0),g([S({type:String,json:{write:!0}})],fr.prototype,"field",void 0),g([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],fr.prototype,"fieldOffset",void 0),g([S({type:Up,json:{write:!0}})],fr.prototype,"legendOptions",void 0),g([S({type:Number,json:{write:!0}})],fr.prototype,"maxDensity",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fr.prototype,"maxPixelIntensity",null),g([S({type:Number,json:{write:!0}})],fr.prototype,"minDensity",void 0),g([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fr.prototype,"minPixelIntensity",null),g([S({type:Number,cast:Pt,json:{write:!0}})],fr.prototype,"radius",void 0),g([S({type:Number,range:{min:0},json:{default:0,write:!0}})],fr.prototype,"referenceScale",void 0),g([Ue({heatmap:"heatmap"})],fr.prototype,"type",void 0),g([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],fr.prototype,"valueExpression",void 0),g([S({type:String})],fr.prototype,"valueExpressionTitle",void 0),g([S({readOnly:!0})],fr.prototype,"_pixelIntensityToDensity",null),fr=A6=g([J(GB)],fr);const UB=fr;let rd=class extends si(ge){constructor(){super(...arguments),this.color=new Ne([0,0,0,0]),this.label=null,this.threshold=0}};g([S({type:Ne,json:{write:!0}})],rd.prototype,"color",void 0),g([S({type:String,json:{write:!0}})],rd.prototype,"label",void 0),g([S({type:Number,range:{min:0,max:1},json:{write:!0}})],rd.prototype,"threshold",void 0),rd=g([J("esri.renderers.support.OthersCategory")],rd);let zb=class extends si(ge){constructor(){super(...arguments),this.title=null}};g([S({type:String,json:{write:!0}})],zb.prototype,"title",void 0),zb=g([J("esri.renderers.support.PieChartLegendOptions")],zb);let Xs=class extends xf(si(eu)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ne([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new rd,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new Hh({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Yo)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Ts(e,i,r.valueExpression),r.field&&e.add(r.field)}};g([S({type:[RB],json:{write:!0}})],Xs.prototype,"attributes",void 0),g([S({type:qh,json:{default:null,write:!0}})],Xs.prototype,"backgroundFillSymbol",void 0),g([S({type:Ne,json:{write:!0}})],Xs.prototype,"defaultColor",void 0),g([S({type:String,json:{write:!0}})],Xs.prototype,"defaultLabel",void 0),g([S({type:Number,range:{min:0,max:1},json:{write:!0}})],Xs.prototype,"holePercentage",void 0),g([S({type:rd,json:{write:!0}})],Xs.prototype,"othersCategory",void 0),g([S({type:zb,json:{write:!0}})],Xs.prototype,"legendOptions",void 0),g([S({type:gn,json:{default:null,write:!0}})],Xs.prototype,"outline",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],Xs.prototype,"size",void 0),g([Ue({pieChart:"pie-chart"})],Xs.prototype,"type",void 0),Xs=g([J("esri.renderers.PieChartRenderer")],Xs);const Kge=Xs;var k6;let Vc=k6=class extends xf(eu){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new k6({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ae(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};g([S({type:String,json:{write:!0}})],Vc.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Vc.prototype,"label",void 0),g([S(Sf)],Vc.prototype,"symbol",void 0),g([Ue({simple:"simple"})],Vc.prototype,"type",void 0),Vc=k6=g([J("esri.renderers.SimpleRenderer")],Vc);const J_=Vc,Zge=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function P6(t){return t instanceof Be}function Ik(t){return t instanceof ze?Object.keys(t.items):P6(t)?_r(t).keys():t?Object.keys(t):[]}function mv(t,e){return t instanceof ze?t.items[e]:t[e]}function Xge(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function B1(t){return t?t.declaredClass:null}function qB(t,e){var E;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=Ik(t),n=Ik(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||Xge(t,e))return{type:"complete",oldValue:t,newValue:e};const l=n.filter(k=>!r.includes(k)),d=r.filter(k=>!n.includes(k)),y=r.filter(k=>n.includes(k)&&mv(t,k)!==mv(e,k)).concat(l,d).sort(),v=B1(t);if(v&&Zge.includes(v)&&y.length)return{type:"complete",oldValue:t,newValue:e};let x;const $=P6(t)&&P6(e);for(const k of y){const P=mv(t,k),D=mv(e,k);let L;if(($||typeof P!="function"&&typeof D!="function")&&P!==D&&(P!=null||D!=null)){if(i&&i[k]&&typeof i[k]=="function")L=(E=i[k])==null?void 0:E.call(i,P,D);else if(P instanceof Date&&D instanceof Date){if(P.getTime()===D.getTime())continue;L={type:"complete",oldValue:P,newValue:D}}else L=typeof P=="object"&&typeof D=="object"&&B1(P)===B1(D)?qB(P,D):{type:"complete",oldValue:P,newValue:D};L!=null&&(x!=null?x.diff[k]=L:x={type:"partial",diff:{[k]:L}})}}return x}function Qge(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const l=r.diff[n];if(!l)return!1;r=l}}return!0}function u$e(t,e){for(const i of e)if(Qge(t,i))return!0;return!1}function eve(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&B1(t)!==B1(e)?{type:"complete",oldValue:t,newValue:e}:qB(t,e)}let qp=class extends si(ge){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};g([S(Rb)],qp.prototype,"value",void 0),g([S(Rb)],qp.prototype,"value2",void 0),g([S(Rb)],qp.prototype,"value3",void 0),qp=g([J("esri.renderers.support.UniqueValue")],qp);const P0=qp;let Uu=class extends si(ge){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new P0({value:r})):i==="object"?e[0]instanceof P0?e:e.map(r=>new P0(r)):null}};g([S({type:String,json:{write:!0}})],Uu.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Uu.prototype,"label",void 0),g([S(Sf)],Uu.prototype,"symbol",void 0),g([S({type:[P0],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new P0({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(Yo).map(l=>l.toString());i.push(n)}e.values=i}}}})],Uu.prototype,"values",void 0),g([St("values")],Uu.prototype,"castValues",null),Uu=g([J("esri.renderers.support.UniqueValueClass")],Uu);const HB=Uu;let Xy=class extends si(ge){constructor(e){super(e),this.heading=null,this.classes=null}};g([S({type:String,json:{write:!0}})],Xy.prototype,"heading",void 0),g([S({type:[HB],json:{write:!0}})],Xy.prototype,"classes",void 0),Xy=g([J("esri.renderers.support.UniqueValueGroup")],Xy);const C6=Xy;var O6;let Bc=O6=class extends ge{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new O6({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};g([S({type:String,json:{write:!0}})],Bc.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Bc.prototype,"label",void 0),g([S(Sf)],Bc.prototype,"symbol",void 0),g([S(Rb)],Bc.prototype,"value",void 0),Bc=O6=g([J("esri.renderers.support.UniqueValueInfo")],Bc);const G1=Bc,tve=()=>!!ce("enable-feature:force-wosr"),ive=()=>ce.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),rve=()=>ce.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),sve=()=>ce.add("enable-i3s-patching",!0,!0,!0),nve=()=>ce.add("enable-i3s-patching",!1,!0,!0),p$e=()=>!!ce("enable-feature:SceneLayer-editing"),ove=(t="i3s-patching")=>{switch(nve(),rve(),ce.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":ive();break;case"i3s-patching":sve()}};ove("i3s-patching");let Z5={};async function ave(t,e){try{return{data:(await tT(t,e)).data,baseUrl:NM(t),styleUrl:t}}catch(i){return Nn(i),null}}function lve(t,e,i){const r=e.portal!=null?e.portal:os.getDefault();let n;const l=`${r.url} - ${r.user&&r.user.username} - ${t}`;return Z5[l]||(Z5[l]=uve(t,r,i).then(d=>(n=d,d.fetchData())).then(d=>({data:d,baseUrl:n.itemUrl??"",styleName:t}))),Z5[l]}function uve(t,e,i){return e.load(i).then(()=>{const r=new La({disableExtraQuery:!0,query:`owner:${Ek} AND type:${Ak} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var d;let n=null;const l=t.toLowerCase();if(r&&Array.isArray(r)){for(const y of r)if(((d=y.typeKeywords)==null?void 0:d.some(x=>x.toLowerCase()===l))&&y.type===Ak&&y.owner===Ek){n=y;break}}if(!n)throw new ne("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function WB(t,e,i){return t&&t.styleUrl!=null?ave(t.styleUrl,i):t&&t.styleName!=null?lve(t.styleName,e,i):Promise.reject(new ne("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function JB(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function hve(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!tve())for(const r of i){const n=t.formatInfos.find(l=>l.type===r);if(n)return n.href}return t.webRef}function tT(t,e){const i={responseType:"json",query:{f:"json"},...e};return Ht(Bo(t),i)}const Ek="esri_en",Ak="Style",cve="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Qy;const YB="esri.renderers.UniqueValueRenderer",bu=ve.getLogger(YB),kk="uvInfos-watcher",Pk="uvGroups-watcher",dve=",",pve=Di(G1);function fve(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:l,valueExpression:d}=t,y=!(!e||!i);return[{classes:(l??[]).map(v=>{var B;const{symbol:x,label:$,value:E,description:k}=v,[P,D,L]=y?((B=E==null?void 0:E.toString())==null?void 0:B.split(n||""))||[]:[E],N=[];return(e||d)&&N.push(P),i&&N.push(D),r&&N.push(L),{symbol:x,label:$,values:[N],description:k}})}]}let vi=Qy=class extends xf(eu){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let l=0;l<i.length;l++){const d=e.find(y=>y.value===i[l].value);d?eve(d,i[l])?(n.changed.push({type:"complete",oldValue:d,newValue:i[l]}),r=!0):n.unchanged.push({oldValue:d,newValue:i[l]}):(n.added.push(i[l]),r=!0)}for(let l=0;l<e.length;l++)i.find(d=>d.value===e[l].value)||(n.removed.push(e[l]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Im(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r&&r.messages?r.messages.push(new ne("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):bu.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||os.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Ah(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Nm(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?bu.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?bu.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void bu.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?pve(t):new G1({value:t,symbol:qR(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void bu.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await ql()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void bu.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const n=await ql(),{arcadeUtils:l}=n;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,l)=>n+l.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new Qy({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ae(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ae(this.visualVariables),legendOptions:ae(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ae(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=ae(this.uniqueValueInfos),i=ae(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(ae(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Ts(t,e,this.valueExpression)];fn(t,e,this.field),fn(t,e,this.field2),fn(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return WB(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new Ud({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const l=new G1({value:r.name,symbol:n});e.push(l),this._valueInfoMap[r.name]=l}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",dve)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(kk);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(me(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,kk)}}_watchUniqueValueGroups(){this.removeHandles(Pk);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(me(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(me(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,l)=>{n!==l&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,Pk)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:l,valueExpression:d}=this;if(!e&&!d)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const y=!(!e||!i);for(const v of l)for(const x of v.classes??[]){const{symbol:$,label:E,values:k,description:P}=x;for(const D of k??[]){const{value:L,value2:N,value3:B}=D,W=[L];i&&W.push(N),r&&W.push(B);const q=y?W.join(n||""):W[0];t.push(new G1({symbol:$,label:E,value:q,description:P}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:l}=this;if(!e&&!r||!l.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const d=!(!e||!i),y=l.map(x=>{var B;const{symbol:$,label:E,value:k,description:P}=x,[D,L,N]=d?((B=k==null?void 0:k.toString())==null?void 0:B.split(n||""))||[]:[k];return new HB({symbol:$,label:E,description:P,values:[new P0({value:D,value2:L,value3:N})]})}),v=[new C6({classes:y})];t&&Object.freeze(v),this._set("uniqueValueGroups",v),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:l}=e??{};let d=this._cache.compiledFunc;const y=l.arcadeUtils;if(!d){const x=y.createSyntaxTree(this.valueExpression);d=y.createFunction(x),this._cache.compiledFunc=d}const v=y.executeFunction(d,y.createExecContext(t,y.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[v+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const n=this.field2,l=this.field3,d=[];e&&d.push(i[e]),n&&d.push(i[n]),l&&d.push(i[l]),r=d.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new Qy(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||os.getDefault());const r=i.populateFromStyle();return r.catch(n=>{bu.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new Qy(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{bu.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};g([S({readOnly:!0})],vi.prototype,"_cache",null),g([Ue({uniqueValue:"unique-value"})],vi.prototype,"type",void 0),g([S(CB)],vi.prototype,"backgroundFillSymbol",void 0),g([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],vi.prototype,"field",null),g([St("field")],vi.prototype,"castField",null),g([Ae("field")],vi.prototype,"writeField",null),g([S({type:String,value:null,json:{write:!0}})],vi.prototype,"field2",null),g([S({type:String,value:null,json:{write:!0}})],vi.prototype,"field3",null),g([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],vi.prototype,"orderByClassesEnabled",void 0),g([S({type:String,value:null,json:{write:!0}})],vi.prototype,"valueExpression",null),g([S({type:String,json:{write:!0}})],vi.prototype,"valueExpressionTitle",void 0),g([S({type:k0,json:{write:!0}})],vi.prototype,"legendOptions",void 0),g([S({type:String,json:{write:!0}})],vi.prototype,"defaultLabel",void 0),g([S(yC({...Sf},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],vi.prototype,"defaultSymbol",null),g([S({type:String,value:null,json:{write:!0}})],vi.prototype,"fieldDelimiter",null),g([S({type:os,readOnly:!0})],vi.prototype,"portal",void 0),g([xe("portal",["styleName"])],vi.prototype,"readPortal",null),g([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],vi.prototype,"styleOrigin",void 0),g([xe("styleOrigin",["styleName","styleUrl"])],vi.prototype,"readStyleOrigin",null),g([Ae("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],vi.prototype,"writeStyleOrigin",null),g([S({type:[C6],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||fve(e)).map(r=>C6.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],vi.prototype,"uniqueValueGroups",null),g([S({type:[G1],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],vi.prototype,"uniqueValueInfos",null),vi=Qy=g([J(YB)],vi);const iT=vi,sg={key:"type",base:eu,typeMap:{heatmap:UB,simple:J_,"unique-value":iT,"class-breaks":LB,"dot-density":Oge,dictionary:Pge,"pie-chart":Kge},errorContext:"renderer"},KB={key:"type",base:eu,typeMap:{simple:J_,"unique-value":iT,"class-breaks":LB,heatmap:UB},errorContext:"renderer"};function f$e(t,e){return _m(t,null,e)}const yve=rf({types:sg});function _m(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Kn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):yve(t,e,i):null}let mve=class ZB{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array($x),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new ZB,r=this._originStores[Le.DEFAULTS];r&&r.forEach((n,l)=>{i.set(l,ae(n),Le.DEFAULTS)});for(let n=Le.SERVICE;n<$x;n++){const l=this._originStores[n];l&&l.forEach((d,y)=>{e&&e.has(y)||i.set(y,ae(d),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Le.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const l=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),l!==i}return!1}delete(e,i=Le.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let l=i-1;l>=0;l--){const d=this._originStores[l];if(d&&d.has(e)){this._values.set(e,d.get(e)),this._propertyOriginMap.set(e,l);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r&&r.get(e),l=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),l!==n}originOf(e){return this._propertyOriginMap.get(e)||Le.DEFAULTS}forEach(e){this._values.forEach(e)}};const XB=t=>{let e=class extends t{constructor(...i){super(...i);const r=_r(this),n=r.store,l=new mve;r.store=l,rO(r,n,l)}read(i,r){nO(this,i,r)}getAtOrigin(i,r){const n=X5(this),l=Ss(r);if(typeof i=="string")return n.get(i,l);const d={};return i.forEach(y=>{d[y]=n.get(y,l)}),d}originOf(i){return W1(this.originIdOf(i))}originIdOf(i){return X5(this).originOf(i)}revert(i,r){const n=X5(this),l=Ss(r),d=_r(this);let y;y=typeof i=="string"?i==="*"?n.keys(l):[i]:i,y.forEach(v=>{d.invalidate(v),n.revert(v,l),d.commit(v)})}};return e=g([J("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function X5(t){return _r(t).store}let Ck=class extends XB(Be){};Ck=g([J("esri.core.ReadOnlyMultiOriginJSONSupport")],Ck);const gve=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return Q5(this).delete(i,Ss(r))}write(i,r){return aO(this,i=i||{},r),i}setAtOrigin(i,r,n){_r(this).setAtOrigin(i,r,Ss(n))}removeOrigin(i){const r=Q5(this),n=Ss(i),l=r.keys(n);for(const d of l)r.originOf(d)===n&&r.set(d,r.get(d,n),Le.USER)}updateOrigin(i,r){const n=Q5(this),l=Ss(r),d=this.get(i);for(let y=l+1;y<$x;++y)n.delete(i,y);n.set(i,d,l)}toJSON(i){return this.write({},i)}};return e=g([J("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Q5(t){return _r(t).store}const Y_=t=>{let e=class extends gve(XB(t)){constructor(...i){super(...i)}};return e=g([J("esri.core.MultiOriginJSONSupport")],e),e};let Ok=class extends Y_(Be){};Ok=g([J("esri.core.MultiOriginJSONSupport")],Ok);async function vve(t,e){const{WhereClause:i}=await le(()=>import("./WhereClause-166a8c4d.js").then(r=>r.W),["assets/WhereClause-166a8c4d.js","assets/executionError-c92d3b85.js"]);return i.create(t,e)}function K_(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}var L6;let Gc=L6=class extends ge{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new L6({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([S({type:String,json:{write:!0}})],Gc.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],Gc.prototype,"name",void 0),g([S({type:["boolean","date","number","string"],json:{write:!0}})],Gc.prototype,"returnType",void 0),g([S({type:String,json:{write:!0}})],Gc.prototype,"title",void 0),Gc=L6=g([J("esri.form.ExpressionInfo")],Gc);const bve=Gc;let Uc=class extends ge{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};g([S({type:String,json:{write:!0}})],Uc.prototype,"description",void 0),g([S({type:String,json:{write:!0}})],Uc.prototype,"label",void 0),g([S()],Uc.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Uc.prototype,"visibilityExpression",void 0),Uc=g([J("esri.form.elements.Element")],Uc);const X0=Uc;var D6;let Vb=D6=class extends ge{constructor(t){super(t),this.type=null}clone(){return new D6({type:this.type})}};g([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Vb.prototype,"type",void 0),Vb=D6=g([J("esri.form.elements.inputs.AttachmentInput")],Vb);const wve=Vb;var R6;let qc=R6=class extends X0{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new R6({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};g([S({type:String,json:{write:!0}})],qc.prototype,"attachmentKeyword",void 0),g([S({type:Boolean,json:{write:!0}})],qc.prototype,"editable",void 0),g([S({type:wve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],qc.prototype,"input",void 0),g([S({type:["attachment"],json:{read:!1,write:!0}})],qc.prototype,"type",void 0),qc=R6=g([J("esri.form.elements.AttachmentElement")],qc);const Lk=qc;let Bb=class extends ge{constructor(e){super(e),this.type=null}};g([S()],Bb.prototype,"type",void 0),Bb=g([J("esri.form.elements.inputs.Input")],Bb);const $f=Bb;let e1=class extends $f{constructor(e){super(e),this.maxLength=null,this.minLength=0}};g([S({type:Number,json:{write:!0}})],e1.prototype,"maxLength",void 0),g([S({type:Number,json:{write:!0}})],e1.prototype,"minLength",void 0),e1=g([J("esri.form.elements.inputs.TextInput")],e1);const rT=e1;var j6;let Gb=j6=class extends rT{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new j6({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],Gb.prototype,"type",void 0),Gb=j6=g([J("esri.form.elements.inputs.BarcodeScannerInput")],Gb);const _ve=Gb;var F6;let Hp=F6=class extends $f{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new F6({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};g([S({type:String,json:{write:!0}})],Hp.prototype,"noValueOptionLabel",void 0),g([S({type:Boolean,json:{write:!0}})],Hp.prototype,"showNoValueOption",void 0),g([S({type:["combo-box"],json:{read:!1,write:!0}})],Hp.prototype,"type",void 0),Hp=F6=g([J("esri.form.elements.inputs.ComboBoxInput")],Hp);const xve=Hp;var N6;function Dk(t){return t!=null?new Date(t):null}function Rk(t){return t?t.getTime():null}let ko=N6=class extends $f{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return Dk(e.max)}writeMax(t,e){e.max=Rk(t)}readMin(t,e){return Dk(e.min)}writeMin(t,e){e.min=Rk(t)}clone(){return new N6({includeTime:this.includeTime,max:this.max,min:this.min})}};g([S({type:Boolean,json:{write:!0}})],ko.prototype,"includeTime",void 0),g([S({type:Date,json:{type:Number,write:!0}})],ko.prototype,"max",void 0),g([xe("max")],ko.prototype,"readMax",null),g([Ae("max")],ko.prototype,"writeMax",null),g([S({type:Date,json:{type:Number,write:!0}})],ko.prototype,"min",void 0),g([xe("min")],ko.prototype,"readMin",null),g([Ae("min")],ko.prototype,"writeMin",null),g([S({type:["datetime-picker"],json:{read:!1,write:!0}})],ko.prototype,"type",void 0),ko=N6=g([J("esri.form.elements.inputs.DateTimePickerInput")],ko);const Sve=ko;var z6;let Wp=z6=class extends $f{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new z6({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};g([S({type:String,json:{write:!0}})],Wp.prototype,"noValueOptionLabel",void 0),g([S({type:Boolean,json:{write:!0}})],Wp.prototype,"showNoValueOption",void 0),g([S({type:["radio-buttons"],json:{read:!1,write:!0}})],Wp.prototype,"type",void 0),Wp=z6=g([J("esri.form.elements.inputs.RadioButtonsInput")],Wp);const Mve=Wp;var V6;let Jp=V6=class extends $f{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new V6({offValue:this.offValue,onValue:this.onValue})}};g([S({type:[String,Number],json:{write:!0}})],Jp.prototype,"offValue",void 0),g([S({type:[String,Number],json:{write:!0}})],Jp.prototype,"onValue",void 0),g([S({type:["switch"],json:{read:!1,write:!0}})],Jp.prototype,"type",void 0),Jp=V6=g([J("esri.form.elements.inputs.SwitchInput")],Jp);const $ve=Jp;var B6;let Ub=B6=class extends rT{constructor(t){super(t),this.type="text-area"}clone(){return new B6({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["text-area"],json:{read:!1,write:!0}})],Ub.prototype,"type",void 0),Ub=B6=g([J("esri.form.elements.inputs.TextAreaInput")],Ub);const Tve=Ub;var G6;let qb=G6=class extends rT{constructor(t){super(t),this.type="text-box"}clone(){return new G6({maxLength:this.maxLength,minLength:this.minLength})}};g([S({type:["text-box"],json:{read:!1,write:!0}})],qb.prototype,"type",void 0),qb=G6=g([J("esri.form.elements.inputs.TextBoxInput")],qb);const Ive=qb,Eve={base:$f,key:"type",typeMap:{"barcode-scanner":_ve,"combo-box":xve,"datetime-picker":Sve,"radio-buttons":Mve,switch:$ve,"text-area":Tve,"text-box":Ive}};var U6;const QB="esri.form.elements.FieldElement",jk=ve.getLogger(QB);let Ln=U6=class extends X0{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return Z1(jk,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){Z1(jk,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new U6({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};g([S({types:$V,json:{read:{reader:D$},write:!0}})],Ln.prototype,"domain",void 0),g([S({type:Boolean,json:{write:!0}})],Ln.prototype,"editable",null),g([S({type:String,json:{write:!0}})],Ln.prototype,"editableExpression",void 0),g([S({type:String,json:{write:!0}})],Ln.prototype,"fieldName",void 0),g([S({type:String,json:{write:!0}})],Ln.prototype,"hint",void 0),g([S({types:Eve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ln.prototype,"input",void 0),g([S({type:String,json:{write:!0}})],Ln.prototype,"requiredExpression",void 0),g([S({type:String,json:{read:!1,write:!0}})],Ln.prototype,"type",void 0),g([S({type:String,json:{write:!0}})],Ln.prototype,"valueExpression",void 0),Ln=U6=g([J(QB)],Ln);const Fk=Ln;var q6;let vl=q6=class extends X0{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new q6({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:ae(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};g([S({type:Number,json:{write:!0}})],vl.prototype,"displayCount",void 0),g([S({type:["list"],json:{write:!0}})],vl.prototype,"displayType",void 0),g([S({type:String,json:{write:!0}})],vl.prototype,"editableExpression",void 0),g([S({type:[E7],json:{write:!0}})],vl.prototype,"orderByFields",void 0),g([S({type:Number,json:{write:!0}})],vl.prototype,"relationshipId",void 0),g([S({type:["relationship"],json:{read:!1,write:!0}})],vl.prototype,"type",void 0),vl=q6=g([J("esri.form.elements.RelationshipElement")],vl);const Nk=vl;function eG(t){return{typesWithGroup:{base:X0,key:"type",typeMap:{attachment:Lk,field:Fk,group:t,relationship:Nk}},typesWithoutGroup:{base:X0,key:"type",typeMap:{attachment:Lk,field:Fk,relationship:Nk}}}}function tG(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function iG(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function rG(t,e,i=!0){return t?t.map(r=>Fa(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var H6;let Ea=H6=class extends X0{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return rG(t,ex,!1)}readElements(t,e){return tG(e.formElements,ex,!1)}writeElements(t,e){e.formElements=iG(t,ex,!1)}clone(){return new H6({description:this.description,elements:ae(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};g([S({json:{write:!0}})],Ea.prototype,"elements",void 0),g([St("elements")],Ea.prototype,"castElements",null),g([xe("elements",["formElements"])],Ea.prototype,"readElements",null),g([Ae("elements")],Ea.prototype,"writeElements",null),g([S({type:["collapsed","expanded"],json:{write:!0}})],Ea.prototype,"initialState",void 0),g([S({type:String,json:{read:!1,write:!0}})],Ea.prototype,"type",void 0),Ea=H6=g([J("esri.form.elements.GroupElement")],Ea);const ex=eG(Ea),Ave=Ea;var W6;const tx=eG(Ave);let Po=W6=class extends ge{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return rG(t,tx)}readElements(t,e){return tG(e.formElements,tx)}writeElements(t,e){e.formElements=iG(t,tx)}clone(){return new W6({description:this.description,expressionInfos:ae(this.expressionInfos),elements:ae(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};g([S({type:String,json:{write:!0}})],Po.prototype,"description",void 0),g([S({json:{write:!0}})],Po.prototype,"elements",void 0),g([St("elements")],Po.prototype,"castElements",null),g([xe("elements",["formElements"])],Po.prototype,"readElements",null),g([Ae("elements")],Po.prototype,"writeElements",null),g([S({type:[bve],json:{write:!0}})],Po.prototype,"expressionInfos",void 0),g([S({type:Boolean,json:{default:!1,write:!0}})],Po.prototype,"preserveFieldValuesWhenHidden",void 0),g([S({type:String,json:{write:!0}})],Po.prototype,"title",void 0),Po=W6=g([J("esri.form.FormTemplate")],Po);const kve=Po;function zk(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function Pve(t,e,i){if(!t&&!e||!i)return;const r=R0(i);Vk(t,i,r),Vk(e,i,r)}function Vk(t,e,i){if(t)for(const r of t)Cve(r.geometry,e,i)}function Cve(t,e,i){if(t==null||!t.spatialReference||Ji(t.spatialReference,e))return;const r=R0(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)zk(t,t.rings,r);else if("paths"in t)zk(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}let Ove=0;const sG="esri.layers.graphics.sources.MemorySource",ix=ve.getLogger(sG);let Ml=class extends Zo.LoadableMixin(Y2(ra(ze))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);qS(e,this.layer.spatialReference,r);const n=tg.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const l=this.layer.objectIdField;for(const d of n.features){const y=d.attributes[l],v=this._idToClientGraphic.get(y);v&&(d.geometry=v.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ne("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return qS(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Ct.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new ne("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],l=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const d=$=>"objectId"in $&&$.objectId!=null?$.objectId:"attributes"in $&&$.attributes[i]!=null?$.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const $ of e.deleteFeatures){const E=d($);E!=null&&n.push(E)}const y=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const $ of e.updateFeatures)if(l.push(this._serializeFeature($)),y){const E=d($);E!=null&&y.set(E,$)}}Pve(r?r.features:null,l,this.layer.spatialReference);const{fullExtent:v,featureEditResults:x}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:l,deletes:n});return this.fullExtent=v,r&&r.finish(x.uidToObjectId),this._updateClientGraphicIds(y,x),this._createEditsResult(x)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new ne("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let d=0;d<e.length;d++){const y=e[d],v=this._serializeFeature(y);n||y.geometry==null||(n=y.geometry.type),r[d]=v,i.set(`${v.uid}`,y)}const l=this;return{features:r,inferredGeometryType:n,finish(d){const y=l.sourceJSON.objectIdField;for(const v in d){const x=d[v],$=i.get(v);$&&($.attributes||($.attributes={}),x===-1?delete $.attributes[y]:$.attributes[y]=x,l._addIdToClientGraphic($))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(Ove++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Va.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await ZR("MemorySourceWorker",{strategy:ce("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:r,objectIdField:n,hasM:l,hasZ:d,timeInfo:y}=this.layer,v=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const x=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",P=>{ix.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const $={features:x.features,fields:i&&i.map(P=>P.toJSON()),geometryType:Aw.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&l,hasZ:this._layerOrSourceGeometryType==="mesh"||d,objectIdField:n,spatialReference:v?null:r&&r.toJSON(),timeInfo:y?y.toJSON():null},E=await this._connection.invoke("load",$,{signal:e});for(const P of E.warnings)ix.warn(P.message,{layer:this.layer,warning:P});E.featureErrors.length&&ix.warn(`Encountered ${E.featureErrors.length} validation errors while loading features`,E.featureErrors);const k=E.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(x.inferredGeometryType)&&(k.geometryType=Aw.toJSON(x.inferredGeometryType)),this.sourceJSON=k,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),x.finish(E.assignedObjectIds)}};g([TM({Type:ur,ensureType:Di(ur)})],Ml.prototype,"itemType",void 0),g([S()],Ml.prototype,"type",void 0),g([S({constructOnly:!0})],Ml.prototype,"layer",void 0),g([S({readOnly:!0})],Ml.prototype,"_workerGeometryType",null),g([S()],Ml.prototype,"sourceJSON",void 0),Ml=g([J(sG)],Ml);function Lve(t){return"portalItem"in t}const nG=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Lve(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return g([S({type:String})],e.prototype,"apiKey",null),e=g([J("esri.layers.mixins.APIKeyMixin")],e),e},oG=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Jd(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",poe(i,ve.getLogger(this)))}};return g([S()],e.prototype,"title",null),g([S({type:String})],e.prototype,"url",null),e=g([J("esri.layers.mixins.ArcGISService")],e),e},Bk={read:{reader:P$},write:{allowNull:!0,writer:C$}},aG=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return g([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),g([S({json:{read:!1,write:!1,origins:{"web-map":Bk,"portal-item":Bk}}})],e.prototype,"effect",void 0),e=g([J("esri.layers.mixins.BlendLayer")],e),e},lG=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return g([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=g([J("esri.layers.mixins.CustomParametersMixin")],e),e},uG=new Ha.EventEmitter;function _$e(t,e,i=!1){const r=Yn();return i=e==null||i,uG.emit("apply-edits",{serviceUrl:t,layerId:e,mayReceiveServiceEdits:i,result:r.promise}),r}const hG="esri.layers.mixins.EditBusLayer",cG=Symbol(hG);function x$e(t){return t!=null&&typeof t=="object"&&cG in t}const Dve=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this.when().then(()=>{this.own([uG.on("apply-edits",n=>{const{serviceUrl:l,layerId:d,mayReceiveServiceEdits:y,result:v}=n,x=l===this.url,$=d!=null&&this.layerId!=null&&d===this.layerId;if(!x||!$&&!y)return;const E=v.then(k=>{var D;if($&&(k.addedFeatures.length||k.updatedFeatures.length||k.deletedFeatures.length||k.addedAttachments.length||k.updatedAttachments.length||k.deletedAttachments.length))return this.emit("edits",ae(k)),k;const P=(D=k.editedFeatures)==null?void 0:D.find(({layerId:L})=>L===this.layerId);if(P){const{adds:L,updates:N,deletes:B}=P.editedFeatures,W={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:L?L.map(({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],deletedFeatures:B?B.map(({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],updatedFeatures:N?N.map(({current:{attributes:q}})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],editedFeatures:ae(k.editedFeatures),exceededTransferLimit:!1};return this.emit("edits",W),W}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:ae(k.editedFeatures),exceededTransferLimit:!1}});this.emit("apply-edits",{result:E})})])},()=>{})}};return e=cG,i=g([J(hG)],i),i};var J6;const rx=new xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),sx=new xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ta=J6=class extends ge{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:l,units:d,distance:y}=this;return new lr({geometry:ae(i),objectIds:ae(l),spatialRelationship:r,timeExtent:ae(n),where:e,units:d,distance:y,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:l,distance:d}=this;return new J6({geometry:ae(e),objectIds:ae(n),spatialRelationship:i,timeExtent:ae(r),where:t,units:l,distance:d})}};g([S({type:String,json:{write:!0}})],Ta.prototype,"where",void 0),g([S({types:Vh,json:{write:!0}})],Ta.prototype,"geometry",void 0),g([S({type:rx.apiValues,json:{name:"spatialRel",read:{reader:rx.read},write:{allowNull:!1,writer:rx.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Ta.prototype,"spatialRelationship",void 0),g([S({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Ta.prototype,"distance",void 0),g([S({type:[Number],json:{write:!0}})],Ta.prototype,"objectIds",void 0),g([S({type:sx.apiValues,json:{read:sx.read,write:{writer:sx.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Ta.prototype,"units",void 0),g([S({type:eo,json:{write:!0}})],Ta.prototype,"timeExtent",void 0),Ta=J6=g([J("esri.layers.support.FeatureFilter")],Ta);const Rve=Ta;var Y6;const Gk={read:{reader:P$},write:{writer:C$,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},Uk={read:{reader:P$},write:{writer:C$,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},qk={name:"showExcludedLabels",default:!0};let Hc=Y6=class extends ge{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const l=Object.keys(i.filter);if(l.length>1||l[0]!=="where")return(r=e.messages)==null||r.push(new ne("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new ne("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new Y6({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};g([S({type:Rve,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?ns(i,n,e):ns(i,null,e)}}}})],Hc.prototype,"filter",void 0),g([S({json:{write:!0,origins:{"web-map":Gk,"portal-item":Gk}}})],Hc.prototype,"includedEffect",void 0),g([S({json:{write:!0,origins:{"web-map":Uk,"portal-item":Uk}}})],Hc.prototype,"excludedEffect",void 0),g([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":qk,"portal-item":qk}}})],Hc.prototype,"excludedLabelsVisible",void 0),Hc=Y6=g([J("esri.layers.support.FeatureEffect")],Hc);const jve=Hc,Hk={write:{allowNull:!0}},Fve=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return g([S({type:jve,json:{origins:{"web-map":Hk,"portal-item":Hk}}})],e.prototype,"featureEffect",void 0),e=g([J("esri.layers.mixins.FeatureEffectLayer")],e),e};function Nve(t){if(!t)return t;const{start:e,end:i}=t;return new eo({start:e!=null?_d(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?_d(i,-i.getTimezoneOffset(),"minutes"):i})}function zve(t){if(!t)return t;const{start:e,end:i}=t;return new eo({start:e!=null?_d(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?_d(i,i.getTimezoneOffset(),"minutes"):i})}var K6;let t1=K6=class extends ge{constructor(t){super(t)}async collectRequiredFields(t,e){return Ts(t,e,this.expression)}clone(){return new K6({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};g([S({type:String,json:{write:!0}})],t1.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],t1.prototype,"title",void 0),t1=K6=g([J("esri.layers.support.FeatureExpressionInfo")],t1);const Wk=t1;function S$e(t){return 1/(K$[t]||1)}function Vve(){const t=Object.keys(K$);return t.sort(),t}const Bve=Vve();var Z6;const gv=as()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Jk=new xt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let bl=Z6=class extends ge{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new Z6({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&ZU(this.featureExpressionInfo,t.featureExpressionInfo)}};g([S({type:Wk,json:{write:!0}})],bl.prototype,"featureExpressionInfo",void 0),g([xe("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],bl.prototype,"readFeatureExpressionInfo",null),g([Ae("featureExpressionInfo",{featureExpressionInfo:{type:Wk},"featureExpression.value":{type:[0]}})],bl.prototype,"writeFeatureExpressionInfo",null),g([S({type:gv.apiValues,nonNullable:!0,json:{type:gv.jsonValues,read:gv.read,write:{writer:gv.write,isRequired:!0}}})],bl.prototype,"mode",null),g([S({type:Number,json:{write:!0}})],bl.prototype,"offset",void 0),g([S({type:Bve,json:{type:String,read:Jk.read,write:Jk.write}})],bl.prototype,"unit",null),bl=Z6=g([J("esri.layers.support.ElevationInfo")],bl);const Gve=bl,Uve={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Z_={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},sT={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},dG={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:kh}}},qve={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Hve={value:null,type:Gve,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function M$e(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const pG={write:!0,read:!0},X6={type:Number,json:{origins:{"web-document":pG,"portal-item":{write:!0}}}},Wve={...X6,json:{...X6.json,origins:{"web-document":{...pG,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?tm(e.layerDefinition.drawingInfo.transparency):void 0:tm(e.drawingInfo.transparency)}}},Jve={type:eo,readOnly:!0,get(){var y,v;if(!((y=this.layer)!=null&&y.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=(v=this.view)==null?void 0:v.timeExtent;let n=this.layer.timeExtent;t&&(n=zve(n));let l=i?r&&n?r.intersection(n):r||n:n;if(!l||l.isEmpty||l.isAllTime)return l;e&&(l=l.offset(-e.value,e.unit)),t&&(l=Nve(l));const d=this._get("timeExtent");return l.equals(d)?d:l}},$$e={type:Ct,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Ct.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=ut.fromJSON(e.spatialReference)),i}}}},read:!1}},fG={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Yve={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Kve={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},yG={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};let wl=class extends si(ge){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};g([S()],wl.prototype,"creatorField",void 0),g([S()],wl.prototype,"creationDateField",void 0),g([S()],wl.prototype,"editorField",void 0),g([S()],wl.prototype,"editDateField",void 0),g([S()],wl.prototype,"realm",void 0),g([S({type:Dh})],wl.prototype,"dateFieldsTimeReference",void 0),wl=g([J("esri.layers.support.EditFieldsInfo")],wl);const Zve=wl;let Aa=class extends si(ge){constructor(e){super(e)}};g([S({constructOnly:!0,json:{write:!0}})],Aa.prototype,"name",void 0),g([S({constructOnly:!0,json:{write:!0}})],Aa.prototype,"fields",void 0),g([S({constructOnly:!0,json:{write:!0}})],Aa.prototype,"isAscending",void 0),g([S({constructOnly:!0,json:{write:!0}})],Aa.prototype,"indexType",void 0),g([S({constructOnly:!0,json:{write:!0}})],Aa.prototype,"isUnique",void 0),g([S({constructOnly:!0,json:{write:!0}})],Aa.prototype,"description",void 0),Aa=g([J("esri.layers.support.FeatureIndex")],Aa);const Q6=new xt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Xve(t,e,i,r){const n=await Kh(t);if(await nT(t,e,r),!n.addAttachment)throw new ne(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function nT(t,e,i){const{attributes:r}=e,{objectIdField:n}=t;return t.get("capabilities.data.supportsAttachment")?e?r?n&&r[n]?Promise.resolve():Promise.reject(new ne(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ne(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ne(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ne(i,"this layer doesn't support attachments"))}async function Qve(t,e,i,r,n){const l=await Kh(t);if(await nT(t,e,n),!l.updateAttachment)throw new ne(n,"Layer source does not support updateAttachment capability");return l.updateAttachment(e,i,r)}async function ebe(t,e,i){const{applyEdits:r}=await le(()=>import("./editingSupport-281f35e4.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function tbe(t,e,i){const{uploadAssets:r}=await le(()=>import("./editingSupport-281f35e4.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function ibe(t,e,i,r){const n=await Kh(t);if(await nT(t,e,r),!n.deleteAttachments)throw new ne(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function rbe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new ne(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function sbe(t,e,i,r){var P,D;e=b2.from(e),await t.load();const n=t.source,l=t.capabilities;if(!((P=l==null?void 0:l.data)!=null&&P.supportsAttachment))throw new ne(r,"this layer doesn't support attachments");const{attachmentTypes:d,objectIds:y,globalIds:v,num:x,size:$,start:E,where:k}=e;if(!((D=l==null?void 0:l.operations)!=null&&D.supportsQueryAttachments)&&((d==null?void 0:d.length)>0||(v==null?void 0:v.length)>0||($==null?void 0:$.length)>0||x||E||k))throw new ne(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(y!=null&&y.length||v!=null&&v.length||k))throw new ne(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new ne(r,"Layer source does not support queryAttachments capability",e);return n.queryAttachments(e)}async function nbe(t,e,i,r){const n=await Kh(t);if(!n.queryObjectIds)throw new ne(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(lr.from(e)??t.createQuery(),i)}async function obe(t,e,i,r){const n=await Kh(t);if(!n.queryFeatureCount)throw new ne(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(lr.from(e)??t.createQuery(),i)}async function abe(t,e,i,r){const n=await Kh(t);if(!n.queryExtent)throw new ne(r,"Layer source does not support queryExtent capability");return n.queryExtent(lr.from(e)??t.createQuery(),i)}async function lbe(t,e,i,r){const n=await Kh(t);if(!n.queryRelatedFeatures)throw new ne(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(K0.from(e),i)}async function ube(t,e,i,r){const n=await Kh(t);if(!n.queryRelatedFeaturesCount)throw new ne(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(K0.from(e),i)}async function hbe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await vve(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function cbe(t){const e=new lr,i=t.get("capabilities.data"),r=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:l}=t;return e.timeExtent=n!=null&&l!=null?l.offset(-n.value,n.unit):l||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function mG(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function gG(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function dbe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function Kh(t){return(await t.load()).source}async function pbe(t,e){if(!_t||_t.findCredential(t))return;let i;try{const r=await HO(t,e);r&&(i=await _t.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await _t.getCredential(t,{signal:r})}catch{}}async function fbe(t,e){var r;const i=(r=t.parsedUrl)==null?void 0:r.path;i&&ybe(t)&&await pbe(i,e)}function ybe(t){const e=t.editFieldsInfo;return!(!(e!=null&&e.creatorField)&&!(e!=null&&e.editorField))||(t.userHasUpdateItemPrivileges?t.hasUpdateItemRestrictions:!!t.userHasFullEditingPrivileges&&t.hasFullEditingRestrictions)}function mbe(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const nx=rf({types:UR});function oT(t,e){if(t.defaultSymbol)return t.types&&t.types.length?new iT({defaultSymbol:nx(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:nx(i.symbol,i,e)}))}):new J_({symbol:nx(t.defaultSymbol,t,e)})}let Yp=class extends si(ge){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};g([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Yp.prototype,"shapeAreaField",void 0),g([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Yp.prototype,"shapeLengthField",void 0),g([S({type:String,json:{read:t=>uJ.read(t)||hJ.read(t)}})],Yp.prototype,"units",void 0),Yp=g([J("esri.layers.support.GeometryFieldsInfo")],Yp);const gbe=Yp;var eM;let Kp=eM=class extends ge{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ze}clone(){return new eM({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};g([S({type:String,json:{write:!0}})],Kp.prototype,"floorField",void 0),g([S({json:{read:!1,write:!1}})],Kp.prototype,"viewAllMode",void 0),g([S({json:{read:!1,write:!1}})],Kp.prototype,"viewAllLevelIds",void 0),Kp=eM=g([J("esri.layers.support.LayerFloorInfo")],Kp);const vG=Kp,Yk=new xt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Kk=new xt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Dn=class extends si(ge){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};g([S({json:{read:Yk.read,write:Yk.write}})],Dn.prototype,"cardinality",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"composite",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"id",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"keyField",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"keyFieldInRelationshipTable",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"name",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"relatedTableId",void 0),g([S({json:{read:!0,write:!0}})],Dn.prototype,"relationshipTableId",void 0),g([S({json:{read:Kk.read,write:Kk.write}})],Dn.prototype,"role",void 0),Dn=g([J("esri.layers.support.Relationship")],Dn);const vbe=Dn,bbe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Ke(t,e,i){return!!bG(t,e,i)}function vv(t,e,i){return bG(t,e,i)}function bG(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function wbe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function ng(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function aT(t,e){return{analytics:_be(t),attachment:xbe(t),data:Sbe(t),metadata:Mbe(t),operations:$be(t.capabilities,t,e),query:Tbe(t,e),queryRelated:Ibe(t),queryTopFeatures:Ebe(t),editing:Abe(t)}}function _be(t){return{supportsCacheHint:ng(t.advancedQueryCapabilities,"queryAnalytics")}}function xbe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:ng(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Ke(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=bbe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function Sbe(t){return{isVersioned:Ke(t,"isDataVersioned",!1),supportsAttachment:Ke(t,"hasAttachments",!1),supportsM:Ke(t,"hasM",!1),supportsZ:Ke(t,"hasZ",!1)}}function Mbe(t){return{supportsAdvancedFieldProperties:Ke(t,"supportsFieldDescriptionProperty",!1)}}function $be(t,e,i){const r=t?t.toLowerCase().split(",").map(k=>k.trim()):[],n=i?Jd(i):null,l=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),d=r.includes("editing")&&!e.datesInUnknownTimezone;let y=d&&r.includes("create"),v=d&&r.includes("delete"),x=d&&r.includes("update");const $=r.includes("changetracking"),E=e.advancedQueryCapabilities;return d&&!(y||v||x)&&(y=v=x=!0),{supportsCalculate:Ke(e,"supportsCalculate",!1),supportsTruncate:Ke(e,"supportsTruncate",!1),supportsValidateSql:Ke(e,"supportsValidateSql",!1),supportsAdd:y,supportsDelete:v,supportsEditing:d,supportsChangeTracking:$,supportsQuery:l,supportsQueryAnalytics:Ke(E,"supportsQueryAnalytic",!1),supportsQueryAttachments:Ke(E,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Ke(E,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Ke(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:x,supportsExceedsLimitStatistics:Ke(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Ke(e,"supportsAsyncConvert3D",!1)}}function Tbe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,l=t.currentVersion,d=e==null?void 0:e.includes("MapServer"),y=!d||l>=ce("mapserver-pbf-version-support"),v=yF(e),x=new Set((t.supportedQueryFormats??"").split(",").map($=>$.toLowerCase().trim()));return{supportsStatistics:Ke(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Ke(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Ke(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:wbe(i),supportsCentroid:Ke(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Ke(i,"supportsQueryWithDistance",!1),supportsDistinct:Ke(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Ke(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Ke(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ke(i,"supportsHavingClause",!1),supportsOrderBy:Ke(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Ke(i,"supportsPagination",!1),supportsQuantization:Ke(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ke(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Ke(t,"supportsReturningQueryGeometry",!1),supportsResultType:Ke(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Ke(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Ke(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ke(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Ke(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Ke(r,"allowOthersToQuery",!0),supportsHistoricMoment:Ke(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&x.has("pbf"),supportsDisjointSpatialRelationship:Ke(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Ke(i,"supportsQueryWithCacheHint",!1)||ng(i,"query"),supportsDefaultSpatialReference:Ke(i,"supportsDefaultSR",!1),supportsCompactGeometry:v,supportsFullTextSearch:Ke(i,"supportsFullTextSearch",!1),maxRecordCountFactor:vv(t,"maxRecordCountFactor",void 0),maxRecordCount:vv(t,"maxRecordCount",void 0),standardMaxRecordCount:vv(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:vv(t,"tileMaxRecordCount",void 0)}}function Ibe(t){const e=t.advancedQueryCapabilities,i=Ke(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ke(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:ng(e,"queryRelated")}}function Ebe(t){return{supportsCacheHint:ng(t.advancedQueryCapabilities,"queryTopFilter")}}function Abe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Ke(t,"allowGeometryUpdates",!0),supportsGlobalId:Ke(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Ke(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Ke(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ke(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ke(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ke(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ke(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ke(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ke(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Ke(i,"supportsAsyncApplyEdits",!1)}}const kbe=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=ut.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(ze.ofType(Aa)),this.version=void 0}readCapabilitiesFromService(i,r){return aT(r,this.url)}get effectiveCapabilities(){var d;const i=this.capabilities;if(!i)return null;const r=ae(i),{operations:n,editing:l}=r;return(d=this.sourceJSON)!=null&&d.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=l.supportsDeleteByOthers=l.supportsGeometryUpdate=l.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=l.supportsGeometryUpdate=!0),r)}get hasFullEditingRestrictions(){var l;const i=this.capabilities;if(!i||(l=this.sourceJSON)!=null&&l.isMultiServicesView)return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var l;const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return(l=this.sourceJSON)!=null&&l.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return mG(r)}readObjectIdFieldFromService(i,r){return gG(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=foe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:ve.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,l){yoe(this,i,null,r,l)}readVersion(i,r){return dbe(r)}};return g([S({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),g([xe("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),g([S({readOnly:!0})],e.prototype,"effectiveCapabilities",null),g([S({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),g([S({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),g([S({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),g([S({type:Dh})],e.prototype,"dateFieldsTimeReference",void 0),g([S({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),g([S({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),g([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),g([S({readOnly:!0,type:Zve})],e.prototype,"editFieldsInfo",void 0),g([S({readOnly:!0})],e.prototype,"editingInfo",void 0),g([xe("editingInfo")],e.prototype,"readEditingInfo",null),g([S((()=>{const i=ae(Hve),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),g([S({type:vG,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),g([S({type:Ct,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),g([S()],e.prototype,"gdbVersion",void 0),g([S({readOnly:!0,type:gbe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),g([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Q6.read}}}})],e.prototype,"geometryType",void 0),g([S({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),g([S({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),g([S({readOnly:!0,type:T_})],e.prototype,"heightModelInfo",void 0),g([S({type:Date})],e.prototype,"historicMoment",void 0),g([S({readOnly:!0})],e.prototype,"isTable",void 0),g([xe("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),g([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),g([S(Yve)],e.prototype,"minScale",void 0),g([xe("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),g([S(Kve)],e.prototype,"maxScale",void 0),g([xe("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),g([S({type:String})],e.prototype,"globalIdField",void 0),g([xe("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),g([S({type:String})],e.prototype,"objectIdField",void 0),g([xe("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),g([S({type:Dh})],e.prototype,"preferredTimeReference",void 0),g([S({type:[vbe],readOnly:!0})],e.prototype,"relationships",void 0),g([S()],e.prototype,"sourceJSON",void 0),g([S({type:Boolean})],e.prototype,"returnM",void 0),g([S({type:Boolean})],e.prototype,"returnZ",void 0),g([S({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),g([xe("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),g([S({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),g([S({type:ut,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),g([S({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),g([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),g([S({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),g([S({type:ze.ofType(Aa),readOnly:!0})],e.prototype,"indexes",void 0),g([S(dG)],e.prototype,"url",null),g([Ae("url")],e.prototype,"writeUrl",null),g([S({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),g([xe("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=g([J("esri.layers.mixins.FeatureLayerBase")],e),e};let Zp=class extends si(ge){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};g([S({type:String,json:{write:!0}})],Zp.prototype,"expression",void 0),g([S({type:String,json:{write:!0}})],Zp.prototype,"title",void 0),g([S({type:String,json:{write:!0}})],Zp.prototype,"returnType",void 0),Zp=g([J("esri.layers.support.ExpressionInfo")],Zp);const lT=Zp;var tM;let _l=tM=class extends ge{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new tM({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ae(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};g([S({type:Boolean,json:{write:!0}})],_l.prototype,"isAutoGenerated",void 0),g([S({type:String,json:{write:!0}})],_l.prototype,"name",void 0),g([S({type:String,json:{write:!0}})],_l.prototype,"alias",void 0),g([S({type:String,json:{write:!0}})],_l.prototype,"onStatisticField",void 0),g([S({type:lT,json:{write:!0}})],_l.prototype,"onStatisticExpression",void 0),g([S({type:String,json:{write:!0}})],_l.prototype,"statisticType",void 0),_l=tM=g([J("esri.layers.support.AggregateField")],_l);const zd=_l;let $h=class extends ge{constructor(){super(...arguments),this.type=null}};g([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],$h.prototype,"type",void 0),$h=g([J("esri.layers.support.FeatureReduction")],$h);const uT="__begin__",hT="__end__",Pbe=new RegExp(uT,"ig"),Cbe=new RegExp(hT,"ig"),Zk=new RegExp("^"+uT,"i"),Xk=new RegExp(hT+"$","i"),k2='"',Obe=k2+" + ",Lbe=" + "+k2;function Dbe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Rbe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function cT(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=Dbe(t.labelExpression),e.type="conventional"),e}function jbe(t){const e=cT(t);if(!e)return null;switch(e.type){case"conventional":return iM(e.expression);case"arcade":return e.expression}return null}function Fbe(t){const e=cT(t);if(!e)return null;switch(e.type){case"conventional":return zbe(e.expression);case"arcade":return wG(e.expression)}return null}function iM(t){let e;return t?(e=Jn(t,i=>uT+'$feature["'+i+'"]'+hT),e=Zk.test(e)?e.replace(Zk,""):k2+e,e=Xk.test(e)?e.replace(Xk,""):e+k2,e=e.replaceAll(Pbe,Obe).replaceAll(Cbe,Lbe)):e='""',e}const Nbe=/^\s*\{([^}]+)\}\s*$/i;function zbe(t){const e=t==null?void 0:t.match(Nbe);return e&&e[1].trim()||null}const Vbe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Bbe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Gbe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function wG(t){if(!t)return null;let e=Vbe.exec(t)||Bbe.exec(t);return e?e[1]||e[3]:(e=Gbe.exec(t),e?e[2]:null)}var rM;let qu=rM=class extends ge{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?iM(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=iM(this.value)),t!=null&&(e[i]=t)}clone(){return new rM({expression:this.expression,title:this.title,value:this.value})}};g([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],qu.prototype,"expression",void 0),g([xe("expression",["expression","value"])],qu.prototype,"readExpression",null),g([Ae("expression")],qu.prototype,"writeExpression",null),g([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],qu.prototype,"title",void 0),g([S({json:{read:!1,write:!1}})],qu.prototype,"value",void 0),qu=rM=g([J("esri.layers.support.LabelExpressionInfo")],qu);const _G=qu,xG=[252,146,31,255],SG={type:"esriSMS",style:"esriSMSCircle",size:6,color:xG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},MG={type:"esriSLS",style:"esriSLSSolid",width:.75,color:xG},$G={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Ube={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},qbe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Hbe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Wbe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},C$e=Hh.fromJSON(SG),O$e=gn.fromJSON(MG),L$e=qh.fromJSON($G),Jbe=yf.fromJSON(Ube),D$e=Hh.fromJSON(qbe),R$e=gn.fromJSON(Hbe),j$e=qh.fromJSON(Wbe);var sM;const bv=new xt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function wv(t,e,i){return{enabled:!qO(i==null?void 0:i.layer)}}function TG(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Ybe(t){return(t==null?void 0:t.type)==="map-image"}function IG(t){var e,i;return!!Ybe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Kbe(t){return TG(t)||IG(t==null?void 0:t.layer)}let Vi=sM=class extends ge{static evaluateWhere(t,e){const i=(r,n,l)=>{switch(n){case"=":return r==l;case"<>":return r!=l;case">":return r>l;case">=":return r>=l;case"<":return r<l;case"<=":return r<=l}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const n=i(e[r[0]],r[1],r[2]),l=r[3],d=i(e[r[4]],r[5],r[6]);switch(l){case"AND":return n&&d;case"OR":return n||d}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Jbe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=Rbe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=wG(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&TG(r))t=new _G({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(r);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return cT(this)}getLabelExpressionArcade(){return jbe(this)}getLabelExpressionSingleField(){return Fbe(this)}hash(){return JSON.stringify(this)}clone(){return new sM({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ae(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ae(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};g([S({type:String,json:{write:!0}})],Vi.prototype,"name",void 0),g([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:wv}}}}})],Vi.prototype,"allowOverrun",void 0),g([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:wv}}}}})],Vi.prototype,"deconflictionStrategy",void 0),g([S({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&IG(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Vi.prototype,"labelExpression",void 0),g([xe("labelExpression")],Vi.prototype,"readLabelExpression",null),g([Ae("labelExpression")],Vi.prototype,"writeLabelExpression",null),g([S({type:_G,json:{write:{overridePolicy:(t,e,i)=>Kbe(i)?{allowNull:!0}:{enabled:!1}}}})],Vi.prototype,"labelExpressionInfo",void 0),g([Ae("labelExpressionInfo")],Vi.prototype,"writeLabelExpressionInfo",null),g([S({type:bv.apiValues,json:{type:bv.jsonValues,read:bv.read,write:bv.write}})],Vi.prototype,"labelPlacement",void 0),g([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Vi.prototype,"labelPosition",void 0),g([S({type:Number})],Vi.prototype,"maxScale",void 0),g([Ae("maxScale")],Vi.prototype,"writeMaxScale",null),g([S({type:Number})],Vi.prototype,"minScale",void 0),g([Ae("minScale")],Vi.prototype,"writeMinScale",null),g([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:wv}}}}})],Vi.prototype,"repeatLabel",void 0),g([S({type:Number,cast:Pt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:wv}}}}})],Vi.prototype,"repeatLabelDistance",void 0),g([S({types:Jte,json:{origins:{"web-scene":{types:Yte,write:bk,default:null}},write:bk,default:null}})],Vi.prototype,"symbol",void 0),g([S({type:Boolean,json:{write:!0}})],Vi.prototype,"useCodedValues",void 0),g([S({type:String,json:{write:!0}})],Vi.prototype,"where",void 0),Vi=sM=g([J("esri.layers.support.LabelClass")],Vi);const og=Vi;var nM;const Zbe="esri.layers.support.FeatureReductionBinning";let gs=nM=class extends $h{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());ns(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?_m(r,e,i)??void 0:oT(e,i)}clone(){return new nM({fields:ae(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ae(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:ae(this.popupTemplate),renderer:ae(this.renderer)})}};g([Ue({binning:"binning"})],gs.prototype,"type",void 0),g([Ue({geohash:"geohash"})],gs.prototype,"binType",void 0),g([S({type:Number,range:{min:1,max:9},json:{write:!0}})],gs.prototype,"fixedBinLevel",void 0),g([S({type:[og],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],gs.prototype,"labelingInfo",void 0),g([S(sT)],gs.prototype,"labelsVisible",void 0),g([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],gs.prototype,"maxScale",void 0),g([S(Z_)],gs.prototype,"popupEnabled",void 0),g([S({type:df,json:{name:"popupInfo",write:!0}})],gs.prototype,"popupTemplate",void 0),g([S({type:[zd],json:{write:!0}})],gs.prototype,"fields",void 0),g([Ae("fields")],gs.prototype,"writeFields",null),g([S({types:sg,json:{write:{target:"drawingInfo.renderer"}}})],gs.prototype,"renderer",void 0),g([xe("renderer",["drawingInfo.renderer"])],gs.prototype,"readRenderer",null),gs=nM=g([J(Zbe)],gs);const EG=gs;var oM;const Xbe="esri.layers.support.FeatureReductionCluster";function Qk(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let ir=oM=class extends ge{constructor(t){super(t),this.type="cluster",this.clusterRadius=Pt("80px"),this.clusterMinSize=Pt("12px"),this.clusterMaxSize=Pt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var n,l;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(l=r==null?void 0:r.authoringInfo)!=null&&l.isAutoGenerated?null:r?Qk(r)?null:_m(r,e,i)??void 0:oT(e,i)}readSymbol(t,e,i){var n,l;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((l=r==null?void 0:r.authoringInfo)!=null&&l.isAutoGenerated)return null;if(r&&Qk(r)){const d=_m(r,e,i);return d==null?void 0:d.symbol}return null}writeSymbol(t,e,i,r){var l,d;const n=(d=(l=this.renderer)==null?void 0:l.authoringInfo)==null?void 0:d.isAutoGenerated;if(!this.renderer||n){const y=new J_({symbol:t});e.drawingInfo={renderer:y.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());ns(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>zd.fromJSON(r))}clone(){return new oM({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ae(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ae(this.fields),maxScale:this.maxScale,renderer:ae(this.renderer),symbol:ae(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ae(this.popupTemplate)})}};g([S({type:["cluster"],readOnly:!0,json:{write:!0}})],ir.prototype,"type",void 0),g([S({type:Number,cast:t=>t==="auto"?t:Pt(t),json:{write:!0}})],ir.prototype,"clusterRadius",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],ir.prototype,"clusterMinSize",void 0),g([S({type:Number,cast:Pt,json:{write:!0}})],ir.prototype,"clusterMaxSize",void 0),g([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ir.prototype,"maxScale",void 0),g([S(Z_)],ir.prototype,"popupEnabled",void 0),g([S({type:df,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ir.prototype,"popupTemplate",void 0),g([S({types:sg,json:{write:{target:"drawingInfo.renderer"}}})],ir.prototype,"renderer",void 0),g([xe("renderer",["drawingInfo.renderer"])],ir.prototype,"readRenderer",null),g([S({types:Hte})],ir.prototype,"symbol",void 0),g([xe("symbol",["drawingInfo.renderer"])],ir.prototype,"readSymbol",null),g([Ae("symbol")],ir.prototype,"writeSymbol",null),g([S({type:[og],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ir.prototype,"labelingInfo",void 0),g([S(sT)],ir.prototype,"labelsVisible",void 0),g([S({type:[zd],json:{write:!0}})],ir.prototype,"fields",void 0),g([Ae("fields")],ir.prototype,"writeFields",null),g([xe("fields")],ir.prototype,"readFields",null),ir=oM=g([J(Xbe)],ir);const AG=ir;var aM;let Hb=aM=class extends $h{constructor(t){super(t),this.type="selection"}clone(){return new aM}};g([S({type:["selection"]})],Hb.prototype,"type",void 0),Hb=aM=g([J("esri.layers.support.FeatureReductionSelection")],Hb);const eP=Hb,tP={key:"type",base:$h,typeMap:{cluster:AG,binning:EG}},Qbe={types:{key:"type",base:$h,typeMap:{selection:eP,cluster:AG,binning:EG}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:tP},"portal-item":{types:tP},"web-scene":{types:{key:"type",base:$h,typeMap:{selection:eP}}}}}},cp={Base64:0,Hex:1,String:2,Raw:3},C0=8,kG=(1<<C0)-1;function _h(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function ewe(t){const e=[];for(let i=0,r=t.length*C0;i<r;i+=C0)e[i>>5]|=(t.charCodeAt(i/C0)&kG)<<i%32;return e}function twe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=C0)e.push(String.fromCharCode(t[i>>5]>>>i%32&kG));return e.join("")}function iwe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function rwe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,l=4*t.length;n<l;n+=3){const d=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let y=0;y<4;y++)8*n+6*y>32*t.length?r.push(e):r.push(i.charAt(d>>6*(3-y)&63))}return r.join("")}function swe(t,e){return t<<e|t>>>32-e}function X_(t,e,i,r,n,l){return _h(swe(_h(_h(e,t),_h(r,l)),n),i)}function Hr(t,e,i,r,n,l,d){return X_(e&i|~e&r,t,e,n,l,d)}function Wr(t,e,i,r,n,l,d){return X_(e&r|i&~r,t,e,n,l,d)}function Jr(t,e,i,r,n,l,d){return X_(e^i^r,t,e,n,l,d)}function Yr(t,e,i,r,n,l,d){return X_(i^(e|~r),t,e,n,l,d)}function nwe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,l=271733878;for(let d=0;d<t.length;d+=16){const y=i,v=r,x=n,$=l;i=Hr(i,r,n,l,t[d],7,-680876936),l=Hr(l,i,r,n,t[d+1],12,-389564586),n=Hr(n,l,i,r,t[d+2],17,606105819),r=Hr(r,n,l,i,t[d+3],22,-1044525330),i=Hr(i,r,n,l,t[d+4],7,-176418897),l=Hr(l,i,r,n,t[d+5],12,1200080426),n=Hr(n,l,i,r,t[d+6],17,-1473231341),r=Hr(r,n,l,i,t[d+7],22,-45705983),i=Hr(i,r,n,l,t[d+8],7,1770035416),l=Hr(l,i,r,n,t[d+9],12,-1958414417),n=Hr(n,l,i,r,t[d+10],17,-42063),r=Hr(r,n,l,i,t[d+11],22,-1990404162),i=Hr(i,r,n,l,t[d+12],7,1804603682),l=Hr(l,i,r,n,t[d+13],12,-40341101),n=Hr(n,l,i,r,t[d+14],17,-1502002290),r=Hr(r,n,l,i,t[d+15],22,1236535329),i=Wr(i,r,n,l,t[d+1],5,-165796510),l=Wr(l,i,r,n,t[d+6],9,-1069501632),n=Wr(n,l,i,r,t[d+11],14,643717713),r=Wr(r,n,l,i,t[d],20,-373897302),i=Wr(i,r,n,l,t[d+5],5,-701558691),l=Wr(l,i,r,n,t[d+10],9,38016083),n=Wr(n,l,i,r,t[d+15],14,-660478335),r=Wr(r,n,l,i,t[d+4],20,-405537848),i=Wr(i,r,n,l,t[d+9],5,568446438),l=Wr(l,i,r,n,t[d+14],9,-1019803690),n=Wr(n,l,i,r,t[d+3],14,-187363961),r=Wr(r,n,l,i,t[d+8],20,1163531501),i=Wr(i,r,n,l,t[d+13],5,-1444681467),l=Wr(l,i,r,n,t[d+2],9,-51403784),n=Wr(n,l,i,r,t[d+7],14,1735328473),r=Wr(r,n,l,i,t[d+12],20,-1926607734),i=Jr(i,r,n,l,t[d+5],4,-378558),l=Jr(l,i,r,n,t[d+8],11,-2022574463),n=Jr(n,l,i,r,t[d+11],16,1839030562),r=Jr(r,n,l,i,t[d+14],23,-35309556),i=Jr(i,r,n,l,t[d+1],4,-1530992060),l=Jr(l,i,r,n,t[d+4],11,1272893353),n=Jr(n,l,i,r,t[d+7],16,-155497632),r=Jr(r,n,l,i,t[d+10],23,-1094730640),i=Jr(i,r,n,l,t[d+13],4,681279174),l=Jr(l,i,r,n,t[d],11,-358537222),n=Jr(n,l,i,r,t[d+3],16,-722521979),r=Jr(r,n,l,i,t[d+6],23,76029189),i=Jr(i,r,n,l,t[d+9],4,-640364487),l=Jr(l,i,r,n,t[d+12],11,-421815835),n=Jr(n,l,i,r,t[d+15],16,530742520),r=Jr(r,n,l,i,t[d+2],23,-995338651),i=Yr(i,r,n,l,t[d],6,-198630844),l=Yr(l,i,r,n,t[d+7],10,1126891415),n=Yr(n,l,i,r,t[d+14],15,-1416354905),r=Yr(r,n,l,i,t[d+5],21,-57434055),i=Yr(i,r,n,l,t[d+12],6,1700485571),l=Yr(l,i,r,n,t[d+3],10,-1894986606),n=Yr(n,l,i,r,t[d+10],15,-1051523),r=Yr(r,n,l,i,t[d+1],21,-2054922799),i=Yr(i,r,n,l,t[d+8],6,1873313359),l=Yr(l,i,r,n,t[d+15],10,-30611744),n=Yr(n,l,i,r,t[d+6],15,-1560198380),r=Yr(r,n,l,i,t[d+13],21,1309151649),i=Yr(i,r,n,l,t[d+4],6,-145523070),l=Yr(l,i,r,n,t[d+11],10,-1120210379),n=Yr(n,l,i,r,t[d+2],15,718787259),r=Yr(r,n,l,i,t[d+9],21,-343485551),i=_h(i,y),r=_h(r,v),n=_h(n,x),l=_h(l,$)}return[i,r,n,l]}function PG(t,e=cp.Hex){const i=e||cp.Base64,r=nwe(ewe(t),t.length*C0);switch(i){case cp.Raw:return r;case cp.Hex:return iwe(r);case cp.String:return twe(r);case cp.Base64:return rwe(r)}}var lM;let i1=lM=class extends H_{writeLevels(t,e,i){for(const r in t){const n=this.levels[r];return void(e.stops=n)}}clone(){return new lM({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:wh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:wh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:ae(this.levels)})}};g([S()],i1.prototype,"levels",void 0),g([Ae("levels")],i1.prototype,"writeLevels",null),i1=lM=g([J("esri.views.2d.engine.LevelDependentSizeVariable")],i1);const owe=ve.getLogger("esri.views.2d.layers.support.clusterUtils");ce.add("esri-cluster-arcade-enabled",!0);const awe=ce("esri-cluster-arcade-enabled"),lwe=(t,e,i,r,n)=>{const l=e.clone();if(!hwe(l))return l;if(l.authoringInfo||(l.authoringInfo=new Y$),l.authoringInfo.isAutoGenerated=!0,"visualVariables"in l){const d=(l.visualVariables||[]).filter(v=>v.valueExpression!=="$view.scale"),y=CG(d);d.forEach(v=>{v.type==="rotation"?v.field?v.field=ac(t,v.field,"avg_angle","number"):v.valueExpression&&(v.field=Qf(t,v.valueExpression,"avg_angle","number"),v.valueExpression=null):v.normalizationField?(v.field=ac(t,v.field,"avg_norm","number",v.normalizationField),v.normalizationField=null):v.field?v.field=ac(t,v.field,"avg","number"):v.valueExpression&&(v.field=Qf(t,v.valueExpression,"avg","number"),v.valueExpression=null)}),y==null&&!uwe(d)&&n&&(d.push(OG(i,r)),l.dynamicClusterSize=!0),l.visualVariables=d}switch(l.type){case"simple":break;case"pie-chart":for(const d of l.attributes)d.field?d.field=ac(t,d.field,"sum","number"):d.valueExpression&&(d.field=Qf(t,d.valueExpression,"sum","number"),d.valueExpression=null);break;case"unique-value":l.field?l.field=ac(t,l.field,"mode","string"):l.valueExpression&&(l.field=Qf(t,l.valueExpression,"mode","string"),l.valueExpression=null);break;case"class-breaks":l.normalizationField?(l.field=ac(t,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=ac(t,l.field,"avg","number"):l.valueExpression&&(l.field=Qf(t,l.valueExpression,"avg","number"),l.valueExpression=null)}return l},CG=t=>{for(const e of t)if(e.type==="size")return e;return null};function F$e(t,e,i){const r=t.clone();let n=!1;if("visualVariables"in r){const l=(r.visualVariables||[]).filter(d=>d.valueExpression!=="$view.scale");CG(l)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(OG(e,i)),r.dynamicClusterSize=!0,n=!0)}return{renderer:r,didInject:n}}const uwe=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},OG=(t,e)=>{const i=[new Gp({value:0,size:0}),new Gp({value:1})];if(e==null)return new H_({field:"cluster_count",stops:[...i,new Gp({value:2,size:0})]});const r=Object.keys(e).reduce((n,l)=>({...n,[l]:[...i,new Gp({value:Math.max(2,e[l].minValue),size:t.clusterMinSize}),new Gp({value:Math.max(3,e[l].maxValue),size:t.clusterMaxSize})]}),{});return new i1({field:"cluster_count",levels:r})},hwe=t=>{const e=i=>owe.error(new ne("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!awe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function cwe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",l=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+PG(l)}}}function Qf(t,e,i,r){const n=PG(e),l=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(d=>d.name===l)||t.push(new zd({name:l,isAutoGenerated:!0,onStatisticExpression:new lT({expression:e,returnType:r}),statisticType:i})),l}function ac(t,e,i,r,n){if(e==="cluster_count"||t.some(d=>d.name===e))return e;const l=cwe(i,e,n);return t.some(d=>d.name===l)||(i==="avg_norm"?t.push(new zd({name:l,isAutoGenerated:!0,onStatisticExpression:new lT({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new zd({name:l,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),l}const dwe=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var y;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new zd({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],l=(r.fields??[]).filter(v=>!v.isAutoGenerated);if(i.renderer&&!((y=i.renderer.authoringInfo)!=null&&y.isAutoGenerated))return r.fields=[...n,...l],r;if(i.symbol)return r.fields=[...n,...l],r.renderer=null,r;if(!this.renderer)return i;const d=lwe(n,this.renderer,i,null,!1);return r.fields=[...n,...l],r.renderer=d,r}};return g([S(Qbe)],e.prototype,"featureReduction",null),e=g([J("esri.layers.mixins.FeatureReductionLayer")],e),e},iP={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},rP={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},sP={ArcGISFeatureLayer:!0},pwe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":iP,"web-map/basemap":rP,"web-map/tables":sP,"link-chart/operational-layers":{...iP,LinkChartLayer:!0},"link-chart/basemap":rP,"link-chart/tables":sP,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},LG=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,l){(l&&l.layerContainerType==="ground"||i&&YH(this,n,{},l))&&(r[n]=i)}writeOperationalLayerType(i,r,n,l){!i||l&&l.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),HH(this,i,n=>super.read(i,n),r)}write(i,r){var d,y;if(r!=null&&r.origin){const v=`${r.origin}/${r.layerContainerType||"operational-layers"}`,x=pwe[v];let $=!!(x!=null&&x[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&v==="web-scene/operational-layers"&&($=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&v==="web-map/operational-layers"&&($=!1),!$)return(d=r.messages)==null||d.push(new ne("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${v}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),l=!!r&&!!r.messages&&!!r.messages.filter(v=>v instanceof ne&&v.name==="web-document-write:property-required").length;return X2(n==null?void 0:n.url)?((y=r==null?void 0:r.messages)==null||y.push(new ne("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:n}beforeSave(){}};return g([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),g([S(yG)],e.prototype,"listMode",void 0),g([Ae("listMode")],e.prototype,"writeListMode",null),g([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),g([Ae("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),g([S(X6)],e.prototype,"opacity",void 0),g([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),g([Ae("title"),Ae(["web-scene"],"title")],e.prototype,"writeTitle",null),g([S({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=g([J("esri.layers.mixins.OperationalLayer")],e),e};var uM;const ox=new xt({asc:"ascending",desc:"descending"});let Xp=uM=class extends ge{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new uM({field:this.field,valueExpression:this.valueExpression,order:this.order})}};g([S({type:String,json:{write:!0}})],Xp.prototype,"field",void 0),g([S({type:String,json:{write:!0}})],Xp.prototype,"valueExpression",void 0),g([S({type:ox.apiValues,json:{read:ox.read,write:ox.write}})],Xp.prototype,"order",void 0),Xp=uM=g([J("esri.layers.support.OrderByInfo")],Xp);const DG=Xp;function fwe(t,e,i){if(!t)return null;const r=t.find(l=>!!l.field);if(!r)return null;const n=new DG;return n.read(r,i),[n]}function ywe(t,e,i,r){const n=t.find(l=>!!l.field);n&&ns(i,[n.toJSON()],e)}const mwe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return g([S({type:[DG],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:fwe},write:{target:"layerDefinition.orderBy",writer:ywe}}})],e.prototype,"orderBy",void 0),e=g([J("esri.layers.mixins.OrderedLayer")],e),e};async function gwe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return t0(t);const i=ut.WGS84;return await cj(e,i),Jh(t,i)}function N$e(t,e){if(!RG(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function RG(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function nP(t){return RG(t,vwe.HOSTED_SERVICE)}function z$e(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}async function V$e(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return gwe(i)}const vwe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function oP(t){var v;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(v=e.user)==null?void 0:v.privileges;let l=!n||n.includes("features:user:edit"),d=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const y=r==="update"||r==="admin";return y?d=l=!0:d&&(l=!0),{features:{edit:l,fullEdit:d},content:{updateItem:y}}}const jG=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ri(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new f1({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const{load:n}=await le(()=>import("./layersLoader-df053e66.js"),["assets/layersLoader-df053e66.js","assets/fetchService-0902ef39.js","assets/jsonContext-b4b994e9.js"]);return hi(r),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(n){throw Is(n)||ve.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Nn(r),!0)))}async _setUserPrivileges(i,r){if(!Vt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:l},content:{updateItem:d}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",l),this._set("userHasUpdateItemPrivileges",d)}catch(n){Nn(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const l=i===n.id;if(l&&n.portal.user)return oP(n);let d,y;if(l)d=n.portal.url;else try{d=await HO(this.url,r)}catch(E){Nn(E)}if(!d||!SW(d,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const E=r!=null?r.signal:null;y=await(_t==null?void 0:_t.getCredential(`${d}/sharing`,{prompt:!1,signal:E}))}catch(E){Nn(E)}const v=!0,x=!1,$=!1;if(!y)return{features:{edit:v,fullEdit:x},content:{updateItem:$}};try{if(l?await n.reload():(n=new f1({id:i,portal:{url:d}}),await n.load(r)),n.portal.user)return oP(n)}catch(E){Nn(E)}return{features:{edit:v,fullEdit:x},content:{updateItem:$}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){Nn(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?_t==null?void 0:_t.findCredential(this.url):null;if(!r)return!0;const n=_v.credential===r?_v.user:await this._fetchEditingUser(i);return _v.credential=r,_v.user=n,n==null||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var $,E;const r=(E=($=this.portalItem)==null?void 0:$.portal)==null?void 0:E.user;if(r)return r;const n=_t.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const l=`${n.owningSystemUrl}/sharing/rest`,d=os.getDefault();if(d&&d.loaded&&Bo(d.restUrl)===Bo(l))return d.user;const y=`${l}/community/self`,v=i!=null?i.signal:null,x=await K2(Ht(y,{authMode:"no-prompt",query:{f:"json"},signal:v}));return x.ok?YM.fromJSON(x.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,l=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||os.getDefault());return n&&l&&!dO(l.restUrl,n.restUrl)?(r.messages&&r.messages.push(new ne("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return g([S({type:f1})],e.prototype,"portalItem",null),g([xe("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),g([Ae("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),g([S({clonable:!1})],e.prototype,"resourceReferences",void 0),g([S({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),g([S({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),g([S({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=g([J("esri.layers.mixins.PortalLayer")],e),e},_v={credential:null,user:null};let r1=class extends Be{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};g([S()],r1.prototype,"updating",void 0),g([S()],r1.prototype,"status",void 0),r1=g([J("esri.layers.support.PublishingInfo")],r1);const bwe=r1,FG="esri.layers.mixins.PublishableLayer",wwe=Symbol(FG),_we=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new bwe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let d=0;const y=async x=>{let $;r.updating=!0;try{$=await this.fetchPublishingStatus()}catch{$="unavailable"}$!=="published"&&$!=="unavailable"||(r.status==="publishing"&&this.refresh(),v.remove()),r.status=$,r.updating=!1,v.removed||(d=setTimeout(y,x,x+125))},v={removed:!1,remove(){this.removed=!0,clearTimeout(d)}};this.when().catch(()=>v.remove()),y(250),this.own(v)}};return e=wwe,g([S({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=g([J(FG)],i),i},xm=new ze,U1=new WeakMap;function xwe(t){NG(t)&&xm.push(t)}function Swe(t){NG(t)&&xm.includes(t)&&xm.remove(t)}function NG(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function zG(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:zG(e,t%e):0}let ax=0,xv=0;function Mwe(){const t=Date.now();for(const e of xm)e.refreshInterval&&t-(U1.get(e)??0)+5>=6e4*e.refreshInterval&&(U1.set(e,t),e.refresh(t))}OC(()=>{const t=Date.now();let e=0;for(const i of xm)e=zG(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?U1.get(i)||U1.set(i,t):U1.delete(i);if(e!==xv){if(xv=e,clearInterval(ax),xv===0)return void(ax=0);ax=setInterval(Mwe,xv)}});const VG=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=f0(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||xwe(this)},()=>{})}destroy(){Swe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){p0(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{ve.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return g([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),g([S({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),g([S()],e.prototype,"refreshParameters",null),e=g([J("esri.layers.mixins.RefreshableLayer")],e),e},BG=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&$we(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return g([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),g([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),g([S({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=g([J("esri.layers.mixins.ScaleRangeLayer")],e),e};function $we(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const GG=as()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let s1=class extends si(ge){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return jne(this.value,this.unit,"milliseconds")}};g([Ue(GG,{nonNullable:!0})],s1.prototype,"unit",void 0),g([S({type:Number,json:{write:!0},nonNullable:!0})],s1.prototype,"value",void 0),s1=g([J("esri.TimeInterval")],s1);const P2=s1;function aP(t,e){return P2.fromJSON({value:t,unit:e})}let ts=class extends si(ge){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),n=new Date(i.timeExtent[1]);return new eo({start:r,end:n})}writeFullTimeExtent(e,i){e&&e.start!=null&&e.end!=null?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?aP(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?aP(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};g([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ts.prototype,"cumulative",void 0),g([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ts.prototype,"endField",void 0),g([S({type:eo,json:{write:{enabled:!0,allowNull:!0}}})],ts.prototype,"fullTimeExtent",void 0),g([xe("fullTimeExtent",["timeExtent"])],ts.prototype,"readFullTimeExtent",null),g([Ae("fullTimeExtent")],ts.prototype,"writeFullTimeExtent",null),g([S({type:Boolean,json:{write:!0}})],ts.prototype,"hasLiveData",void 0),g([S({type:P2,json:{write:{enabled:!0,allowNull:!0}}})],ts.prototype,"interval",void 0),g([xe("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ts.prototype,"readInterval",null),g([Ae("interval")],ts.prototype,"writeInterval",null),g([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ts.prototype,"startField",void 0),g([S({type:Dh,json:{write:{enabled:!0,allowNull:!0}}})],ts.prototype,"timeReference",void 0),g([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ts.prototype,"trackIdField",void 0),g([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ts.prototype,"useTime",void 0),ts=g([J("esri.layers.support.TimeInfo")],ts);const UG=ts,qG=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const l=n.timeOffset,d=GG.fromJSON(n.timeOffsetUnits);return l&&d?new P2({value:l,unit:d}):null}set timeInfo(i){qL(i,this.fieldsIndex),this._set("timeInfo",i)}};return g([S({type:eo,json:{write:!1}})],e.prototype,"timeExtent",void 0),g([S({type:P2})],e.prototype,"timeOffset",void 0),g([xe("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),g([S({value:null,type:UG,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),g([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=g([J("esri.layers.mixins.TemporalLayer")],e),e},lP=new xt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Hu=class extends si(ge){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};g([S({json:{write:!0}})],Hu.prototype,"name",void 0),g([S({json:{write:!0}})],Hu.prototype,"description",void 0),g([S({json:{read:lP.read,write:lP.write}})],Hu.prototype,"drawingTool",void 0),g([S({json:{write:!0}})],Hu.prototype,"prototype",void 0),g([S({json:{write:!0}})],Hu.prototype,"thumbnail",void 0),Hu=g([J("esri.layers.support.FeatureTemplate")],Hu);const dT=Hu;let xl=class extends si(ge){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=D$(e[r]);return i}writeDomains(e,i){var n;const r={};for(const l of Object.keys(e))e[l]&&(r[l]=(n=e[l])==null?void 0:n.toJSON());i.domains=r}};g([S({json:{write:!0}})],xl.prototype,"id",void 0),g([S({json:{write:!0}})],xl.prototype,"name",void 0),g([S({json:{write:!0}})],xl.prototype,"domains",void 0),g([xe("domains")],xl.prototype,"readDomains",null),g([Ae("domains")],xl.prototype,"writeDomains",null),g([S({type:[dT],json:{write:!0}})],xl.prototype,"templates",void 0),xl=g([J("esri.layers.support.FeatureType")],xl);const pT=xl;function Twe(){return{fields:{type:[F_],value:null},fieldsIndex:{readOnly:!0,get(){return new X$(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||ve.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return d7(this.fieldsIndex,t)}}}}const lx=ve.getLogger("esri.layers.support.labelingInfo"),Iwe=/\[([^\[\]]+)\]/gi;function uP(t,e,i){return t?t.map(r=>{const n=new og;if(n.read(r,i),n.labelExpression){const l=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(Iwe,(d,y)=>`[${Ewe(y,l)}]`)}return n}):null}function Ewe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const Awe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function kwe(t,e){const i=ae(t);return i.some(r=>Pwe(r,e))?[]:i}function Pwe(t,e){const i=t.labelPlacement,r=Awe[e];if(!t.symbol)return lx.warn("No ILabelClass symbol specified."),!0;if(!r)return lx.error(new ne("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const n=r[0];i&&lx.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${n}`),t.labelPlacement=n}return!1}const Co=[];function HG(t,e){if(yF(t.url??""))return!0;const{wkid:i}=e;for(const r of Co){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Co.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),Co.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Co.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Co.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Co.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),Co.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),Co.push([10.61,()=>new Set([102497])]),Co.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),Co.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),Co.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);async function Cwe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await K2(r.populateFromStyle());if(hi(i),n.ok===!1){const l=n.error;e&&e.messages&&e.messages.push(new Kn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${l.message}`,{error:l,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function WG({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},l){if(!i)return null;const d=Rwe({editFieldsInfo:e,fields:i,objectIdField:r},l);if(!d.length)return null;const y=Nwe({titleBase:n,fields:i,displayField:t}),v=Fwe();return new df({title:y,content:v,fieldInfos:d})}const Owe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):mX(t,e);function Lwe(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(Dwe),t}function Dwe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:hP(t)?-1:hP(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Rwe(t,e){const i=e==null?void 0:e.visibleFieldNames;return Lwe(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||zwe).map(r=>new Rm({fieldName:r.name,isEditable:yX(r,t),label:r.alias,format:jwe(r),visible:Owe(r,{...t,visibleFieldNames:i})}))}function jwe(t){switch(t.type){case"small-integer":case"integer":case"single":return new r0({digitSeparator:!0,places:0});case"double":return new r0({digitSeparator:!0,places:2});case"date":return new r0({dateFormat:"long-month-day-year"});default:return t.type==="string"&&l9(t.name)?new r0({digitSeparator:!0,places:0}):null}}function Fwe(){return[new G0,new sm]}function Nwe(t){const e=nX(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function hP(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const zwe=["geometry","blob","raster","guid","xml"],us="FeatureLayer",JG="esri.layers.FeatureLayer",Vwe=ve.getLogger(JG);function Sv(t,e){return new ne("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function cP(t){return t&&t instanceof ze}const ux=Twe();function hx(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ve=class extends kbe(dwe(Fve(_we(Dve(aG(mwe(qG(BG(VG(oG(LG(jG(Y_(lG(nG(si(im))))))))))))))))){constructor(...t){super(...t),this._handles=new Gs,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=ut.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var t;(t=this.source)==null||t.destroy(),this._handles=ri(this._handles)}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){var r;const e=t!=null?t.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},t).catch(Nn).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstLayerId(e);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new ne("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>this._setUserPrivileges(this.serviceItemId,t)).then(()=>fbe(this,t));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(t,e){return e=e.layerDefinition||e,aT(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,r){this._writeEditingEnabled(t,e,!0,r)}get effectiveEditingEnabled(){return mbe(this)}readIsTable(t,e){return(e=(e==null?void 0:e.layerDefinition)??e).type==="Table"||!e.geometryType}writeIsTable(t,e,i,r){r!=null&&r.writeLayerSchema&&ns(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return mG(e.layerDefinition||e)}readObjectIdField(t,e){return gG(e.layerDefinition||e)}get parsedUrl(){const t=Wi(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=Gl(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=Gl(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){II(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){var n;e=e.layerDefinition||e;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if(r){const l=_m(r,e,i)??void 0;return l||Vwe.error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),l}return oT(e,i)}set source(t){const e=this._get("source");e!==t&&(cP(e)&&this._resetMemorySource(e),cP(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof ze?new Ml({layer:this,items:t}):t:null}readSource(t,e){const i=tg.fromJSON(e.featureSet);return new Ml({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(t,e){const i=e.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return t=t&&t.map(l=>dT.fromJSON(l)),this._fixTemplates(t,r),this._fixTemplates(t,n),t}readTitle(t,e){var n;const i=((n=e.layerDefinition)==null?void 0:n.name)??e.name,r=e.title||e.layerDefinition&&e.layerDefinition.title;if(i){const l=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?doe(this.url,i):i;let d=i;if(!d&&this.url){const y=Jd(this.url);y!=null&&(d=y.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==d&&(d=l+" - "+d),e$(d)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(t,e){return e.title||e.layerDefinition&&e.layerDefinition.name}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return t&&t.map(l=>(l=pT.fromJSON(l),this._fixTemplates(l.templates,r),this._fixTemplates(l.templates,n),l))}readVisible(t,e){return e.layerDefinition&&e.layerDefinition.defaultVisibility!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){return Xve(this,t,e,us)}async updateAttachment(t,e,i){return Qve(this,t,e,i,us)}async applyEdits(t,e){return ebe(this,t,e)}async uploadAssets(t,e){return tbe(this,t,e)}on(t,e){return super.on(t,e)}createPopupTemplate(t){return WG(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await Ia(le(()=>import("./FeatureLayerSource-92795810.js"),["assets/FeatureLayerSource-92795810.js","assets/mat4f64-1413b4a7.js","assets/MeshGeoreferencedRelativeVertexSpace-c3f61512.js","assets/vec32-fd00a1c3.js","assets/External-ee9e5610.js","assets/editingSupport-281f35e4.js"]),t);return new e({layer:this}).load({signal:t})}createQuery(){const t=cbe(this);t.dynamicDataSource=this.dynamicDataSource;const e=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=K_(this.definitionExpression,e);return t.where=i||"1=1",t}async deleteAttachments(t,e){return ibe(this,t,e,us)}async fetchRecomputedExtents(t){return rbe(this,t,us)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let n=null;return i==null||i.some(l=>{const{id:d}=l;return d!=null&&(d.toString()===r.toString()&&(n=l),!!n)}),n}getFieldDomain(t,e){const i=e==null?void 0:e.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[t];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,e){return sbe(this,t,e,us)}async queryFeatures(t,e){const i=await this.load(),r=await i.source.queryFeatures(lr.from(t)??i.createQuery(),e);if(r!=null&&r.features)for(const n of r.features)n.layer=n.sourceLayer=i;return r}async queryObjectIds(t,e){return nbe(this,t,e,us)}async queryFeatureCount(t,e){return obe(this,t,e,us)}async queryExtent(t,e){return abe(this,t,e,us)}async queryRelatedFeatures(t,e){return lbe(this,t,e,us)}async queryRelatedFeaturesCount(t,e){return ube(this,t,e,us)}async queryTopFeatures(t,e){var l;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((l=r==null?void 0:r.query)!=null&&l.supportsTopFeaturesQuery))throw new ne(us,"Layer source does not support queryTopFeatures capability");const n=await i.queryTopFeatures(nv.from(t),e);if(n!=null&&n.features)for(const d of n.features)d.layer=d.sourceLayer=this;return n}async queryTopObjectIds(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new ne(us,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(nv.from(t),e)}async queryTopFeaturesExtent(t,e){var n;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((n=r==null?void 0:r.query)!=null&&n.supportsTopFeaturesQuery))throw new ne(us,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(nv.from(t),e)}async queryTopFeatureCount(t,e){var n;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((n=r==null?void 0:r.query)!=null&&n.supportsTopFeaturesQuery))throw new ne(us,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(nv.from(t),e)}read(t,e){const i=t.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],e),i.showLegend!=null&&super.read({showLegend:i.showLegend},e))}super.read(t,e),e&&e.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:(e==null?void 0:e.origin)??void 0,writeLayerSchema:(e==null?void 0:e.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=e;if(this.dynamicDataSource)return n==null||n.push(Sv(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return n==null||n.push(Sv(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n==null||n.push(Sv(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return n==null||n.push(Sv(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new ne(us,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var e;return!!this.loaded&&(((e=this.source)==null?void 0:e.type)==="memory"||HG(this,t))}async save(t){const{save:e}=await le(()=>import("./featureLayerUtils-4401ec20.js"),["assets/featureLayerUtils-4401ec20.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-0902ef39.js","assets/jsonContext-b4b994e9.js"]);return e(this,t)}async saveAs(t,e){const{saveAs:i}=await le(()=>import("./featureLayerUtils-4401ec20.js"),["assets/featureLayerUtils-4401ec20.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-0902ef39.js","assets/jsonContext-b4b994e9.js"]);return i(this,t,e)}_readEditingEnabled(t,e,i){var n;let r=(n=t.layerDefinition)==null?void 0:n.capabilities;return r?this._hasEditingCapability(r):(r=t.capabilities,e&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,r){var n,l;if(!t){const d=(l=(n=this.capabilities)==null?void 0:n.operations)!=null&&l.supportsSync?"Query,Sync":"Query";ns("layerDefinition.capabilities",d,e),i&&!(r!=null&&r.writeLayerSchema)&&(e.capabilities=d)}}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}_fetchFirstLayerId(t){return Ht(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(t){var e;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(e=this.portalItem)==null?void 0:e.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),II(this.renderer,this.fieldsIndex),qL(this.timeInfo,this.fieldsIndex),Cwe(this,{origin:"service"})}async hasDataChanged(){return hbe(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var e,i;const t=((e=this.parsedUrl)==null?void 0:e.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&e&&delete r[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ne("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ne("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this._handles.add([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};g([xe("service","capabilities")],Ve.prototype,"readCapabilities",null),g([S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ve.prototype,"charts",void 0),g([S({readOnly:!0})],Ve.prototype,"createQueryVersion",null),g([S({json:{read:{source:"layerDefinition.copyrightText"}}})],Ve.prototype,"copyright",void 0),g([S({json:{read:{source:"layerDefinition.displayField"}}})],Ve.prototype,"displayField",void 0),g([S({types:bd,readOnly:!0})],Ve.prototype,"defaultSymbol",void 0),g([S({type:ws})],Ve.prototype,"dynamicDataSource",void 0),g([S({type:Boolean})],Ve.prototype,"editingEnabled",null),g([xe(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ve.prototype,"readEditingEnabled",null),g([xe("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ve.prototype,"readEditingEnabledFromWebMap",null),g([Ae(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ve.prototype,"writeEditingEnabled",null),g([Ae("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ve.prototype,"writeEditingEnabledToWebMap",null),g([S({readOnly:!0})],Ve.prototype,"effectiveEditingEnabled",null),g([S({...ux.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:hx}}}}})],Ve.prototype,"fields",void 0),g([S(ux.fieldsIndex)],Ve.prototype,"fieldsIndex",void 0),g([S({type:kve,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ve.prototype,"formTemplate",void 0),g([S({json:{read:{source:"layerDefinition.extent"}}})],Ve.prototype,"fullExtent",void 0),g([S({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:hx,writer(t,e,i){const r=t?Q6.toJSON(t):null;r&&ns(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:Q6.read}}})],Ve.prototype,"geometryType",void 0),g([S({json:{read:{source:"layerDefinition.hasM"}}})],Ve.prototype,"hasM",void 0),g([S({json:{read:{source:"layerDefinition.hasZ"}}})],Ve.prototype,"hasZ",void 0),g([S(fG)],Ve.prototype,"id",void 0),g([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ve.prototype,"infoFor3D",void 0),g([S({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ve.prototype,"isTable",void 0),g([xe("service","isTable",["type","geometryType"]),xe("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ve.prototype,"readIsTable",null),g([Ae("web-map","isTable")],Ve.prototype,"writeIsTable",null),g([S(sT)],Ve.prototype,"labelsVisible",void 0),g([S({type:[og],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:uP},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:uP},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ve.prototype,"labelingInfo",void 0),g([S((()=>{const t=ae(Wve);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){ns(r,s_(e),i)}}},t})())],Ve.prototype,"opacity",void 0),g([S(qve)],Ve.prototype,"legendEnabled",void 0),g([S({type:["show","hide"],json:(()=>{const t=ae(yG.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Ve.prototype,"listMode",void 0),g([xe("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ve.prototype,"readGlobalIdField",null),g([S({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:hx}}}}})],Ve.prototype,"objectIdField",void 0),g([xe("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ve.prototype,"readObjectIdField",null),g([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ve.prototype,"operationalLayerType",void 0),g([S(ux.outFields)],Ve.prototype,"outFields",void 0),g([S({readOnly:!0})],Ve.prototype,"parsedUrl",null),g([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ve.prototype,"path",void 0),g([S(Z_)],Ve.prototype,"popupEnabled",void 0),g([S({type:df,json:{name:"popupInfo",write:!0}})],Ve.prototype,"popupTemplate",void 0),g([S({readOnly:!0})],Ve.prototype,"defaultPopupTemplate",null),g([S({types:sg,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:KB,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ve.prototype,"renderer",null),g([xe("service","renderer",["drawingInfo.renderer","defaultSymbol"]),xe("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ve.prototype,"readRenderer",null),g([S((()=>{const t=ae(Uve);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Ve.prototype,"screenSizePerspectiveEnabled",void 0),g([S({clonable:!1})],Ve.prototype,"source",null),g([St("source")],Ve.prototype,"castSource",null),g([xe("portal-item","source",["featureSet"]),xe("web-map","source",["featureSet"])],Ve.prototype,"readSource",null),g([S({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ve.prototype,"spatialReference",void 0),g([S({type:Number})],Ve.prototype,"subtypeCode",void 0),g([S({type:[dT]})],Ve.prototype,"templates",void 0),g([xe("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ve.prototype,"readTemplates",null),g([S({type:UG})],Ve.prototype,"timeInfo",void 0),g([S()],Ve.prototype,"title",void 0),g([xe("service","title",["name"]),xe("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ve.prototype,"readTitle",null),g([xe("web-map","title",["layerDefinition.name","title"])],Ve.prototype,"readTitleFromWebMap",null),g([S({type:String})],Ve.prototype,"sublayerTitleMode",void 0),g([S({json:{read:!1}})],Ve.prototype,"type",void 0),g([S({type:String})],Ve.prototype,"typeIdField",void 0),g([xe("service","typeIdField"),xe("typeIdField",["layerDefinition.typeIdField"])],Ve.prototype,"readTypeIdField",null),g([S({type:[pT]})],Ve.prototype,"types",void 0),g([xe("service","types",["types"]),xe("types",["layerDefinition.types"])],Ve.prototype,"readTypes",null),g([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ve.prototype,"visible",void 0),g([xe("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ve.prototype,"readVisible",null),Ve=g([J(JG)],Ve);const fT=Ve,Bwe=Object.freeze(Object.defineProperty({__proto__:null,default:fT},Symbol.toStringTag,{value:"Module"})),Gwe=["$datastore","$map","$layer","$aggregatedfeatures"],Uwe="esri.widgets.Feature.support.arcadeFeatureUtils",qwe=ve.getLogger(Uwe);function Hwe(t){return typeof t=="string"?Xm(M$(t)):Array.isArray(t)?Wwe(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?Jwe(t):t}function Wwe(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?Xm(M$(e)):e}</li>`).join("")}</ul>`}function Jwe(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const i=t.field(e);return`<tr><th>${e}</th><td>${typeof i=="string"?Xm(M$(i)):i}</td></tr>`}).join("")}</table>`}function Ywe({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:i,context:r,viewInfo:n,map:l,graphic:d,interceptor:y}){i.forEach(v=>{const x=v.toLowerCase(),$=n.sr,E={map:l,spatialReference:$,interceptor:y};if(x==="$map"&&(r.vars[x]=e.convertMapToFeatureSetCollection(E)),x==="$layer"&&(r.vars[x]=e.convertFeatureLayerToFeatureSet({layer:d.sourceLayer,spatialReference:$,interceptor:y})),x==="$datastore"&&(r.vars[x]=e.convertServiceUrlToWorkspace({url:d.sourceLayer.url,spatialReference:$,interceptor:y})),x==="$aggregatedfeatures"){const k=d.layer,{fields:P,objectIdField:D,geometryType:L,spatialReference:N,displayField:B}=k,W=new fT({fields:P,objectIdField:D,geometryType:L,spatialReference:N,displayField:B,...k.type==="feature"?{templates:k.templates,typeIdField:k.typeIdField,types:k.types}:null,source:t});r.vars[x]=e.convertFeatureLayerToFeatureSet({layer:W,spatialReference:N,interceptor:y})}})}function YG(){return le(()=>import("./arcadeUtils-b61fa350.js").then(t=>t.az),["assets/arcadeUtils-b61fa350.js","assets/arcadeTimeUtils-aad6da0d.js","assets/executionError-c92d3b85.js","assets/number-37f11f22.js"])}function Kwe(t){return"createQuery"in t&&"queryFeatures"in t}async function Zwe({graphic:t,view:e}){const{isAggregate:i,layer:r}=t;if(!i||!r||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(r);if(!Kwe(n))return[];const l=n.createQuery(),d=t.getObjectId();l.aggregateIds=d!=null?[d]:[];const{features:y}=await n.queryFeatures(l);return y}async function KG({expressionInfo:t,arcadeUtils:e,interceptor:i,spatialReference:r,map:n,graphic:l,view:d}){if(!t||!t.expression)return null;const y=e.createSyntaxTree(t.expression),v=Gwe.filter(P=>e.hasVariable(y,P)),[x]=await Promise.all([Zwe({graphic:l,view:d}),e.loadScriptDependencies(y,!0,v)]),$=e.getViewInfo({spatialReference:r}),E=e.createExecContext(l,$);E.interceptor=i,E.useAsync=!0,Ywe({aggregatedFeatures:x,arcadeUtils:e,featureSetVars:v,context:E,viewInfo:$,map:n,graphic:l,interceptor:i});const k=e.createFunction(y,E);return e.executeAsyncFunction(k,E).catch(P=>qwe.error("arcade-execution-error",{error:P,graphic:l,expressionInfo:t}))}async function Xwe({expressionInfos:t,spatialReference:e,graphic:i,interceptor:r,map:n,view:l}){if(!t||!t.length)return{};const d=await YG(),y={};for(const $ of t)y[`expression/${$.name}`]=KG({expressionInfo:$,arcadeUtils:d,interceptor:r,spatialReference:e,map:n,graphic:i,view:l});const v=await $s(y),x={};for(const $ in v)x[$]=Hwe(v[$].value);return x}const Qwe=1;let Qs=class extends ra(Be){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var n,l;const i=(n=this.contentElement)==null?void 0:n.type;(l=this.contentElementViewModel)==null||l.destroy();const r=i==="fields"?new L_:i==="media"?new dd:i==="text"?new _2:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=_$(this._compile,Qwe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:n,spatialReference:l,map:d,view:y,_abortController:v}=this;if(!(i&&r&&l&&d))return void this._set("contentElement",null);const x=await YG();if(v!==this._abortController)return;const $=await KG({arcadeUtils:x,expressionInfo:i,graphic:r,interceptor:n,map:d,spatialReference:l,view:y});if(!$||$.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const E=await $.castAsJsonAsync(v==null?void 0:v.signal),k=E==null?void 0:E.type,P=k==="media"?nm.fromJSON(E):k==="text"?U0.fromJSON(E):k==="fields"?G0.fromJSON(E):null;this._set("contentElement",P)},this.handles.add([me(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),st),me(()=>[this.contentElement],()=>this._createVM(),st)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:r}=this;return e?"loading":i||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};g([S()],Qs.prototype,"_abortController",void 0),g([S({type:QL})],Qs.prototype,"expressionInfo",void 0),g([S({type:ur})],Qs.prototype,"graphic",void 0),g([S({readOnly:!0})],Qs.prototype,"contentElement",void 0),g([S({readOnly:!0})],Qs.prototype,"contentElementViewModel",void 0),g([S()],Qs.prototype,"interceptor",void 0),g([S()],Qs.prototype,"spatialReference",null),g([S({readOnly:!0})],Qs.prototype,"state",null),g([S()],Qs.prototype,"map",null),g([S()],Qs.prototype,"view",void 0),Qs=g([J("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Qs);const yT=Qs,Mv={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let Wb=class extends Dr{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new yT}initialize(){this.addHandles(me(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),st))}destroy(){this._destroyContentWidget()}renderLoading(){return X("div",{key:"loading-container",class:Mv.loadingSpinnerContainer},X("span",{class:this.classes(Mv.iconLoading,Mv.spinner)}))}render(){var i;const{state:e}=this.viewModel;return X("div",{class:Mv.base},e==="loading"?this.renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const n=e?r==="fields"?new Yz({viewModel:e}):r==="media"?new gB({viewModel:e}):r==="text"?new xb({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};g([S({type:yT})],Wb.prototype,"viewModel",void 0),Wb=g([J("esri.widgets.Feature.FeatureExpression")],Wb);const e2e=Wb;function t2e(t,e,i){const r=Object.keys(e).filter(d=>Mx(t,d)),n=r.map(d=>e[d]),l=r.map(d=>i.get(d)).filter(Yo);return r2e(t,ZG(n,l))}function ZG(t,e){const i=e.map((r,n)=>{let l=t[n];if(r.domain&&r.domain.type==="coded-value"){const d=r.domain.codedValues.find(y=>y.code===l);d!=null&&d.name&&(l=d.name)}return IX(r)&&(l=i2e(r,l)),[r.name,l]});return Object.fromEntries(i)}function i2e(t,e){if(!t||e==null)return null;switch(t.type){case"date":return Zn(e);case"date-only":return M7(e);case"time-only":return $7(e);case"timestamp-offset":return T7(e);default:return null}}function r2e(t,e){return Jn(Jn(t,i=>`{${i.toLowerCase()}}`),Object.fromEntries(Object.entries(e).map(([i,r])=>[i.toLowerCase(),r])))}var dP;(function(t){t.TOO_SHORT="length-validation-error::too-short"})(dP||(dP={}));const s2e=t=>{var i;const e=[];if(t.formTemplate){const{description:r,title:n}=t.formTemplate;(i=t.fields)==null||i.forEach(l=>{const d=n&&Mx(n,l.name),y=r&&Mx(r,l.name);(d||y)&&e.push(l.name)})}return e},cx=100;let jt=class extends si(Bh(ra(Be))){constructor(e){super(e),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await p0(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await p0(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await p0(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=f0(this._queryController,cx),this._queryFeatureCountDebounced=f0(this._queryFeatureCountController,cx),this._queryPageDebounced=f0(this._queryPageController,cx),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.handles.add([me(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount]},()=>this._queryDebounced(),st),me(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),me(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,n=1,l=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,n),l))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(r=>{const n=r.clone();return n.field=gm(r.field,i),n}):e??[]}get supportsCacheHint(){var e,i,r;return!!((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"}get canQuery(){var i,r;const e=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e;return((e=this.orderByFieldsFixedCasing[0])==null?void 0:e.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new ze}get relatedFeatureInfos(){const{itemDescriptionFieldName:e,relatedFeatures:i,relatedLayer:r}=this;if(!i.length||!r)return[];const n=r&&"formTemplate"in r&&r.formTemplate,l=n&&(n==null?void 0:n.title)||void 0;return i.map(d=>{let y;if(e){const v=d.getAttribute(e),x=r.fieldsIndex.get(e);if(x){const $=ZG([v],[x])[e];$!=null&&(y=$.toString())}}return{feature:d,description:y,title:l?t2e(l,d.attributes,r.fieldsIndex):void 0}}).toArray()}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;return e!=null&&e.loaded&&i&&r?Dpe(i,e,r)??null:null}get relationship(){var r;const{relationshipId:e,layer:i}=this;return typeof e=="number"?((r=i==null?void 0:i.relationships)==null?void 0:r.find(({id:n})=>n===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new ze}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n,_loaded:l,canLoad:d}=this;return i||d&&!l?"loading":e||r?"querying":n?"ready":"disabled"}getRelatedFeatureByObjectId(e){return this.relatedFeatures.find(i=>i.getObjectId()===e)}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(i=>!i.destroyed&&i.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i,relationshipId:r,objectId:n,_queryFeatureCountAbortController:l,canQuery:d,supportsCacheHint:y}=this;if(await(e==null?void 0:e.load()),await(i==null?void 0:i.load()),!d||!e||!i)return void this._set("featureCount",0);const v=i.createQuery(),x=new K0({cacheHint:y,relationshipId:r,returnGeometry:!1,objectIds:[n],where:v.where??void 0}),$=await e.queryRelatedFeaturesCount(x,{signal:l==null?void 0:l.signal});this._set("featureCount",$[n]||0)}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:n,featureCount:l}=this;!r||i<2||!l||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var ue;const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:n,displayCount:l,layer:d,relationshipId:y,featurePage:v,featureCount:x,relatedLayer:$,supportsCacheHint:E}=this,{canQuery:k,objectId:P}=this;if(!k||!d||!$)return[];const D=r?((v-1)*n+x)%x:0,L=r?n:l,N=$.objectIdField,B=[...i.map(de=>de.field),...s2e($),N].filter(Yo),W=i.map(de=>`${de.field} ${de.order}`),q=$.createQuery(),Y=new K0({orderByFields:W,start:D,num:L,outFields:B,cacheHint:E,relationshipId:y,returnGeometry:!1,objectIds:[P],where:q.where??void 0}),ie=await d.queryRelatedFeatures(Y,{signal:e==null?void 0:e.signal}),se=((ue=ie[P])==null?void 0:ue.features)||[];return se.forEach(de=>{de.sourceLayer=$,de.layer=$}),se}};g([S()],jt.prototype,"_loaded",void 0),g([S()],jt.prototype,"_queryAbortController",void 0),g([S()],jt.prototype,"_queryPageAbortController",void 0),g([S()],jt.prototype,"_queryFeatureCountAbortController",void 0),g([S({value:1})],jt.prototype,"featurePage",null),g([S()],jt.prototype,"featuresPerPage",void 0),g([S({readOnly:!0})],jt.prototype,"orderByFieldsFixedCasing",null),g([S({readOnly:!0})],jt.prototype,"supportsCacheHint",null),g([S({readOnly:!0})],jt.prototype,"canLoad",null),g([S({readOnly:!0})],jt.prototype,"canQuery",null),g([S()],jt.prototype,"description",void 0),g([S({readOnly:!0})],jt.prototype,"itemDescriptionFieldName",null),g([S({value:3})],jt.prototype,"displayCount",null),g([S({type:ur})],jt.prototype,"graphic",void 0),g([S()],jt.prototype,"layer",void 0),g([S()],jt.prototype,"map",void 0),g([S({readOnly:!0})],jt.prototype,"objectId",null),g([S({readOnly:!0})],jt.prototype,"objectIdField",null),g([S()],jt.prototype,"orderByFields",void 0),g([S({readOnly:!0})],jt.prototype,"relatedFeatures",null),g([S({readOnly:!0})],jt.prototype,"relatedFeatureInfos",null),g([S({readOnly:!0})],jt.prototype,"relatedLayer",null),g([S({readOnly:!0})],jt.prototype,"relationship",null),g([S()],jt.prototype,"featureCount",void 0),g([S({readOnly:!0})],jt.prototype,"relatedFeatureViewModels",null),g([S()],jt.prototype,"relationshipId",void 0),g([S()],jt.prototype,"showAllEnabled",void 0),g([S()],jt.prototype,"state",null),g([S()],jt.prototype,"title",void 0),g([S()],jt.prototype,"getRelatedFeatureByObjectId",null),jt=g([J("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],jt);const mT=jt,n1="esri-feature",ey=`${n1}-relationship`,mo={base:ey,esriWidget:"esri-widget",listContainer:`${ey}__list`,listItem:`${ey}__list-item`,listItemHidden:`${ey}__list-item--hidden`,listContainerQuerying:`${ey}__list--querying`,featureObserver:`${n1}__feature-observer`,stickySpinnerContainer:`${n1}__sticky-loading-container`,loadingSpinnerContainer:`${n1}__loading-container`,spinner:`${n1}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},pP={title:!0,description:!0};let vs=class extends Dr{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r!=null&&r.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new mT,this.messages=null,this.messagesCommon=null,this.visibleElements={...pP},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:n,relatedFeatures:l,featuresPerPage:d,featurePage:y}=this.viewModel;r==="ready"&&n&&l.length>=d*y&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new O_,this.addHandles([me(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),st),me(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Vs(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return vf({icon:()=>le(()=>import("./calcite-icon-899b792c.js"),["assets/calcite-icon-899b792c.js","assets/icon-2aec3643.js","assets/observers-279029a9.js"]),list:()=>le(()=>import("./calcite-list-9f85ceb1.js"),["assets/calcite-list-9f85ceb1.js","assets/loader-e9088f17.js","assets/guid-0d265cb2.js","assets/observers-279029a9.js","assets/utils3-5c4b2d7f.js","assets/loadable-63b9a67f.js","assets/debounce-fe65f68f.js","assets/t9n-e1da0311.js","assets/icon-2aec3643.js","assets/scrim-02ac3fc4.js"]),"list-item":()=>le(()=>import("./calcite-list-item-0e81a42c.js"),["assets/calcite-list-item-0e81a42c.js","assets/loader-e9088f17.js","assets/guid-0d265cb2.js","assets/utils3-5c4b2d7f.js","assets/t9n-e1da0311.js","assets/observers-279029a9.js","assets/loadable-63b9a67f.js","assets/action-add18332.js","assets/icon-2aec3643.js"]),notice:()=>le(()=>import("./calcite-notice-0095da23.js"),["assets/calcite-notice-0095da23.js","assets/observers-279029a9.js","assets/loadable-63b9a67f.js","assets/t9n-e1da0311.js","assets/openCloseComponent-29d09d20.js","assets/icon-2aec3643.js"])})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=ri(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r,state:n}=this.viewModel;return!e&&!!i&&n==="ready"&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return Oo(e==null?void 0:e.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...pP,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?X("div",{key:"sticky-loader",class:mo.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return X("span",{class:this.classes(mo.iconLoading,mo.spinner)})}renderLoading(){return X("div",{key:"loading-container",class:mo.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return X("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Lh(this.container)?"chevron-left":"chevron-right";return X("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var l;const{itemDescriptionFieldName:i}=this.viewModel,r=e.title;e.description=i&&((l=e.formattedAttributes)==null?void 0:l.global[i]);const n=e.state==="loading";return X("calcite-list-item",{class:this.classes(mo.listItem,{[mo.listItemHidden]:n}),key:e.uid,label:r,description:e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?X("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return X("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},X("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return X("div",{key:"feature-observer",class:mo.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return X("calcite-list",null,e.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return X("div",{key:"list-container",class:this.classes(mo.listContainer,{[mo.listContainerQuerying]:i==="querying"})},e?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return X("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},X("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var i;const{state:e}=this.viewModel;return X("div",{class:this.classes(mo.base,mo.esriWidget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e==null||e.forEach(r=>{this.addHandles(me(()=>[r.title,r.state],()=>this.scheduleRender(),st),i)}),this.scheduleRender()}_setupFeatureElementInfo(){var l;const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;(l=this._featureElementInfo)==null||l.set({description:r,title:n,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await G2(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};g([S()],vs.prototype,"_relatedFeatureIntersectionObserverNode",void 0),g([S({readOnly:!0})],vs.prototype,"displayShowAllButton",null),g([S({readOnly:!0})],vs.prototype,"displayListItems",null),g([S()],vs.prototype,"description",null),g([S({readOnly:!0})],vs.prototype,"featureCountDescription",null),g([S()],vs.prototype,"headingLevel",void 0),g([S()],vs.prototype,"title",null),g([S({type:mT})],vs.prototype,"viewModel",void 0),g([S(),Or("esri/widgets/Feature/t9n/Feature")],vs.prototype,"messages",void 0),g([S(),Or("esri/t9n/common")],vs.prototype,"messagesCommon",void 0),g([S()],vs.prototype,"visibleElements",void 0),g([St("visibleElements")],vs.prototype,"castVisibleElements",null),vs=g([J("esri.widgets.Feature.FeatureRelationship")],vs);const fP=vs;let n2e=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var o1;const o2e=1,yP="content-view-models",mP="relationship-view-models",gP={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let fi=o1=class extends Bh(Be){constructor(t){super(t),this._handles=new Gs,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=_$(this._graphicChanged,o2e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...gP},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this._handles.add(me(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),st))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Epe(fA(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Fz(this.graphic)}castAbilities(t){return{...gP,...t}}get isTable(){var t;return((t=this._sourceLayer)==null?void 0:t.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof dd&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof dd&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof dd&&e.previous()}async updateGeometry(){var d;const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!t||!i)return;const n=(d=t==null?void 0:t.attributes)==null?void 0:d[r];if(n==null)return;const l=[n];if(!t.geometry){const y=await qz({layer:i,graphic:t,outFields:[],objectIds:l,returnGeometry:!0,spatialReference:e}),v=y==null?void 0:y.geometry;v&&(t.geometry=v)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){Is(i)||(this._error=i,ve.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(Yo):typeof t=="string"?this._compileText(new U0({text:t}),0).text:t}_destroyContentViewModels(){var t,e;(t=this._handles)==null||t.remove(mP),(e=this._handles)==null||e.remove(yP),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var n;const i=(n=t==null?void 0:t.graphic)==null?void 0:n.getObjectId(),r=e==null?void 0:e.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:r,spatialReference:n}=this;e==null||e.filter(Boolean).forEach(l=>{t.find(d=>this._matchesFeature(d,l))||t.add(new o1({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:n,graphic:l}))}),t.forEach(l=>{(e==null?void 0:e.find(y=>this._matchesFeature(l,y)))||t.remove(l)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:n}=t,l=r==null?void 0:r.type;n&&l&&(l==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,e))),l==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),n.set(this._createMediaVMParams(r,e))),l==="text"&&n.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:r,relationshipId:n,title:l,description:d}=t,{_sourceLayer:y,graphic:v,map:x}=this;if(!Bz(y))return;const $=new mT({displayCount:i,graphic:v,orderByFields:r,relationshipId:n,layer:y,map:x,...this._compileTitleAndDesc({title:l,description:d})});return this.contentViewModels[e]=$,this._handles.add(Vs(()=>$.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels($)),mP),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:r,map:n,spatialReference:l,view:d}=this,y=new yT({expressionInfo:i,graphic:r,interceptor:o1.interceptor,map:n,spatialReference:l,view:d});return this.contentViewModels[e]=y,this._handles.add(me(()=>y.contentElementViewModel,()=>this._setExpressionContentVM(y,e),st),yP),t}_compileAttachments(t,e){const{graphic:i}=this,{description:r,title:n}=t;return this.contentViewModels[e]=new T$({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:r,destroyer:n}=t;return this.contentViewModels[e]=new _2({graphic:i,creator:r,destroyer:n}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:l}=this,d=n==null?void 0:n.attributes,y=this._expressionAttributes,v=l.global;return{title:hd({attributes:d,fieldInfoMap:i,globalAttributes:v,expressionAttributes:y,layer:r,text:t}),description:hd({attributes:d,fieldInfoMap:i,globalAttributes:v,expressionAttributes:y,layer:r,text:e})}}_createFieldsVMParams(t,e){const i=this._effectivePopupTemplate,r=this.formattedAttributes,n={...r==null?void 0:r.global,...r==null?void 0:r.content[e]},l=(t==null?void 0:t.fieldInfos)||(i==null?void 0:i.fieldInfos),d=l==null?void 0:l.filter(({fieldName:$})=>x$($)||Cl($)||n.hasOwnProperty($)),y=i==null?void 0:i.expressionInfos,{description:v,title:x}=t;return{attributes:n,expressionInfos:y,fieldInfos:d,...this._compileTitleAndDesc({title:x,description:v})}}_compileFields(t,e){const i=t.clone(),r=new L_(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:l,relatedInfos:d,_sourceLayer:y,_expressionAttributes:v}=this,x=this.formattedAttributes,$=(r==null?void 0:r.attributes)??{},{description:E,mediaInfos:k,title:P}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:$,isAggregate:r==null?void 0:r.isAggregate,layer:y,fieldInfoMap:n,formattedAttributes:{...x==null?void 0:x.global,...x==null?void 0:x.content[e]},expressionAttributes:v,mediaInfos:k,popupTemplate:l,relatedInfos:d,...this._compileTitleAndDesc({title:P,description:E})}}_compileMedia(t,e){const i=t.clone(),r=new dd(this._createMediaVMParams(t,e));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[e]=r,i}_createTextVMParams(t){var l;const{graphic:e,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(t&&t.text){const d=(e==null?void 0:e.attributes)??{},y=((l=this.formattedAttributes)==null?void 0:l.global)??{};t.text=hd({attributes:d,fieldInfoMap:i,globalAttributes:y,expressionAttributes:n,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new _2(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i}=this;if(!t)return;const{lastEditInfoEnabled:r}=t,n=e==null?void 0:e.editFieldsInfo;return r&&n?Ipe(n,i==null?void 0:i.attributes):void 0}_compileTitle(t){var y;const{_fieldInfoMap:e,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,l=(r==null?void 0:r.attributes)??{},d=((y=this.formattedAttributes)==null?void 0:y.global)??{};return hd({attributes:l,fieldInfoMap:e,globalAttributes:d,expressionAttributes:n,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.title;return w2(i,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.content;return w2(i,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n}=this,l=this.map,d=this.view,y=this.spatialReference;if(e!==this._featureAbortController||!r)return;await kpe({graphic:r,popupTemplate:n,layer:i,spatialReference:y},t);const{content:{value:v},title:{value:x}}=await $s({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:$}}=await $s({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:Xwe({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:y,graphic:r,map:l,interceptor:o1.interceptor,view:d})});e===this._featureAbortController&&r&&(this._expressionAttributes=$,this._graphicExpressionAttributes={...r.attributes,...$},this._set("formattedAttributes",this._createFormattedAttributes(v)),this._set("title",this._compileTitle(x)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(v)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:l,_sourceLayer:d,_fieldInfoMap:y,_graphicExpressionAttributes:v}=this;i.content[e]=M5({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...v,...t.attributes},layer:d,fieldInfoMap:y,relatedInfos:l})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:l,_fieldInfoMap:d,_graphicExpressionAttributes:y}=this;i.content[e]=M5({fieldInfos:t.fieldInfos,graphic:r,attributes:{...y,...t.attributes},layer:l,fieldInfoMap:d,relatedInfos:n})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:l,_graphicExpressionAttributes:d}=this,y=e==null?void 0:e.fieldInfos,v={global:M5({fieldInfos:y,graphic:i,attributes:d,layer:n,fieldInfoMap:l,relatedInfos:r}),content:[]};return Array.isArray(t)&&t.forEach((x,$)=>{x.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:x,contentElementIndex:$,formattedAttributes:v}),x.type==="media"&&this._createMediaFormattedAttributes({contentElement:x,contentElementIndex:$,formattedAttributes:v})}),v}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,fA(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const l=(n==null?void 0:n.associatedLayer)!=null?await(n==null?void 0:n.associatedLayer.load(i)):n;if(!l||!t)return;const d=e.filter(x=>x&&Cl(x.fieldName));if(!d||!d.length)return;e.forEach(x=>this._configureRelatedInfo(x,l));const y=await Wye({relatedInfos:r,layer:l},i);Object.keys(y).forEach(x=>{var k;const $=r.get(x.toString()),E=(k=y[x])==null?void 0:k.value;$&&E&&($.layerInfo=E.data)});const v=await Jye({graphic:t,relatedInfos:r,layer:l},i);Object.keys(v).forEach(x=>{var $;Bye(($=v[x])==null?void 0:$.value,r.get(x.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,r=Tb(t.fieldName);if(!r)return;const{layerId:n,fieldName:l}=r;if(!n)return;const d=i.get(n.toString())||Vye(n,e);d&&(Yye({relatedInfo:d,fieldName:l,fieldInfo:t}),this.relatedInfos.set(n,d))}};fi.interceptor=new n2e(Ope,Lpe),g([S()],fi.prototype,"_error",void 0),g([S()],fi.prototype,"_featureAbortController",void 0),g([S({readOnly:!0})],fi.prototype,"_effectivePopupTemplate",null),g([S({readOnly:!0})],fi.prototype,"_fieldInfoMap",null),g([S({readOnly:!0})],fi.prototype,"_sourceLayer",null),g([S()],fi.prototype,"abilities",void 0),g([St("abilities")],fi.prototype,"castAbilities",null),g([S({readOnly:!0})],fi.prototype,"content",void 0),g([S({readOnly:!0})],fi.prototype,"contentViewModels",void 0),g([S()],fi.prototype,"description",void 0),g([S({type:Boolean})],fi.prototype,"defaultPopupTemplateEnabled",void 0),g([S({readOnly:!0})],fi.prototype,"isTable",null),g([S({readOnly:!0})],fi.prototype,"state",null),g([S({readOnly:!0})],fi.prototype,"formattedAttributes",void 0),g([S({type:ur,value:null})],fi.prototype,"graphic",null),g([S({readOnly:!0})],fi.prototype,"lastEditInfo",void 0),g([S({readOnly:!0})],fi.prototype,"relatedInfos",void 0),g([S()],fi.prototype,"spatialReference",null),g([S({readOnly:!0})],fi.prototype,"title",void 0),g([S()],fi.prototype,"map",null),g([S({readOnly:!0})],fi.prototype,"waitingForContent",null),g([S()],fi.prototype,"view",void 0),fi=o1=g([J("esri.widgets.FeatureViewModel")],fi);const gT=fi,jr="esri-feature",Mi={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:jr,container:`${jr}__size-container`,title:`${jr}__title`,main:`${jr}__main-container`,btn:`${jr}__button`,icon:`${jr}__icon`,content:`${jr}__content`,contentNode:`${jr}__content-node`,contentElement:`${jr}__content-element`,text:`${jr}__text`,lastEditedInfo:`${jr}__last-edited-info`,fields:`${jr}__fields`,fieldHeader:`${jr}__field-header`,fieldData:`${jr}__field-data`,fieldDataDate:`${jr}__field-data--date`,loadingSpinnerContainer:`${jr}__loading-container`,spinner:`${jr}__loading-spinner`},XG=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>d2(i)&&!i.destroyed?X("div",{class:Mi.contentNode,key:i},i.render()):i instanceof HTMLElement?X("div",{class:Mi.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):yde(i)?X("div",{class:Mi.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=g([J("esri.widgets.Feature.ContentMixin")],e),e};var hM;const vP={title:!0,content:!0,lastEditedInfo:!0},bP="relationship-handles";let yr=hM=class extends XG(Dr){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...vP},this.viewModel=new gT}initialize(){this.addHandles(me(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),st))}loadDependencies(){return vf({notice:()=>le(()=>import("./calcite-notice-0095da23.js"),["assets/calcite-notice-0095da23.js","assets/observers-279029a9.js","assets/loadable-63b9a67f.js","assets/t9n-e1da0311.js","assets/openCloseComponent-29d09d20.js","assets/icon-2aec3643.js"])})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...vP,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=X("div",{class:Mi.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return X("div",{class:this.classes(Mi.base,Mi.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return X("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?X("div",{key:"error-title",slot:"title"},t.errorMessage):null,X("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return X("div",{key:"loading-container",class:Mi.loadingSpinnerContainer},X("span",{class:this.classes(Mi.iconLoading,Mi.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?X("div",{class:Mi.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?X(I$,{level:this.headingLevel,class:Mi.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?X("div",{class:Mi.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:X("div",{class:Mi.contentNode,key:`${e}-content`},i.render())}return this.renderNodeContent(t)}renderContentElement(t,e){var r;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((r=i.content)!=null&&r[t.type]))return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:r}=e.viewModel;return i==="loading"||r.length>0?X("div",{key:this._buildKey("attachments-element",t),class:this.classes(Mi.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?X("div",{key:this._buildKey("relationship-element",t),class:Mi.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:X("div",{key:this._buildKey("expression-element",t),class:Mi.contentElement},e.render())}renderCustom(t,e){const{creator:i}=t,r=this._contentWidgets[e];return!r||r.destroyed?null:i?X("div",{key:this._buildKey("custom-element",e),class:Mi.contentElement},r.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:X("div",{key:this._buildKey("fields-element",t),class:Mi.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:X("div",{key:this._buildKey("media-element",t),class:Mi.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:r,user:n}=i,l=i.type==="edit"?n?e.lastEditedByUser:e.lastEdited:n?e.lastCreatedByUser:e.lastCreated,d=Oo(l,{date:r,user:n});return X("div",{key:"edit-info-element",class:this.classes(Mi.lastEditedInfo,Mi.contentElement)},d)}renderText(t,e){const i=t.text,r=this._contentWidgets[e];return!r||r.destroyed?null:i?X("div",{key:this._buildKey("text-element",e),class:this.classes(Mi.contentElement,Mi.text)},r.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(bP),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([Vs(()=>t,"select-record",({featureViewModel:r})=>{e&&(r.abilities={relationshipContent:!0},e.push(new hM({flowItems:e,viewModel:r,visibleElements:i})))}),Vs(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:r}=t;r.showAllEnabled=!0;const n=new fP({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(n),e.push(n)})],bP)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,l)=>{if(n.type==="attachments"&&(this._contentWidgets[l]=new zpe({displayType:n.displayType,headingLevel:e.title?t+1:t,viewModel:r[l]})),n.type==="fields"&&(this._contentWidgets[l]=new Yz({viewModel:r[l]})),n.type==="media"&&(this._contentWidgets[l]=new gB({viewModel:r[l]})),n.type==="text"&&(this._contentWidgets[l]=new xb({viewModel:r[l]})),n.type==="custom"&&(this._contentWidgets[l]=new xb({viewModel:r[l]})),n.type==="expression"&&(this._contentWidgets[l]=new e2e({viewModel:r[l]})),n.type==="relationship"){const d=new fP({viewModel:r[l]});this._addFeatureRelationshipHandles(d),this._contentWidgets[l]=d}},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new xb({viewModel:n}))}this.scheduleRender()}};g([S()],yr.prototype,"graphic",null),g([S()],yr.prototype,"defaultPopupTemplateEnabled",null),g([S()],yr.prototype,"flowItems",void 0),g([S()],yr.prototype,"headingLevel",void 0),g([S({readOnly:!0})],yr.prototype,"isTable",null),g([S()],yr.prototype,"label",null),g([S(),Or("esri/widgets/Feature/t9n/Feature")],yr.prototype,"messages",void 0),g([S(),Or("esri/t9n/common")],yr.prototype,"messagesCommon",void 0),g([S(),Or("esri/widgets/support/t9n/uriUtils")],yr.prototype,"messagesURIUtils",void 0),g([S()],yr.prototype,"spatialReference",null),g([S({readOnly:!0})],yr.prototype,"title",null),g([S()],yr.prototype,"visibleElements",void 0),g([St("visibleElements")],yr.prototype,"castVisibleElements",null),g([S()],yr.prototype,"map",null),g([S()],yr.prototype,"view",null),g([S({type:gT})],yr.prototype,"viewModel",void 0),yr=hM=g([J("esri.widgets.Feature")],yr);const a2e=yr;var QG;const Jb=Symbol("anchorHandles");let Wc=class extends Ha.EventedAccessor{constructor(e){super(e),this[QG]=new Gs,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Jb].add([Xn(()=>uh(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),me(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null,this[Jb]=ri(this[Jb])}get screenLocation(){var n;const{location:e,view:i,screenLocationEnabled:r}=this;return r&&e!=null&&i!=null&&i.ready?(n=i.toScreen)==null?void 0:n.call(i,e):null}};QG=Jb,g([S()],Wc.prototype,"location",void 0),g([S()],Wc.prototype,"screenLocation",null),g([S()],Wc.prototype,"screenLocationEnabled",void 0),g([S()],Wc.prototype,"view",void 0),Wc=g([J("esri.widgets.support.AnchorElementViewModel")],Wc);const eU=Wc,l2e="esri.widgets.CompassViewModel";let Yb=class extends eU{constructor(e){super(e),this.visible=!1}};g([S()],Yb.prototype,"visible",void 0),Yb=g([J(l2e)],Yb);const tU=Yb,dx="esri-spinner",px={base:dx,spinnerStart:`${dx}--start`,spinnerFinish:`${dx}--finish`};let Jc=class extends Dr{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new tU}initialize(){this.addHandles(me(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,n=e&&r,l=!e&&r,d={[px.spinnerStart]:n,[px.spinnerFinish]:l},y=this._getPositionStyles();return X("div",{class:this.classes(px.base,d),styles:y})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=G2(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(i==null||e==null)return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};g([S()],Jc.prototype,"location",null),g([S()],Jc.prototype,"view",null),g([S({type:tU})],Jc.prototype,"viewModel",void 0),g([S()],Jc.prototype,"visible",null),Jc=g([J("esri.widgets.Spinner")],Jc);const u2e=Jc,Q_={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},pd=new cf({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:Q_.iconZoom}),wP=new cf({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:Q_.iconTrash}),h0=new cf({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Q_.iconZoom}),lh=new c_({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Q_.iconBrowseClusteredFeatures,value:!1}),h2e="esri.widgets.Popup.PopupViewModel",C2=ve.getLogger(h2e),c2e=t=>{const{event:e,view:i,viewModel:r}=t,{action:n}=e;if(!n)return Promise.reject(new ne("trigger-action:missing-arguments","Event has no action"));const{disabled:l,id:d}=n;if(!d)return Promise.reject(new ne("trigger-action:invalid-action","action.id is missing"));if(l)return Promise.reject(new ne("trigger-action:invalid-action","Action is disabled"));if(d===pd.id)return p2e(r).catch(Ix);if(d===h0.id)return f2e(r);if(d===lh.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(d===wP.id){r.visible=!1;const{selectedFeature:y}=r;if(!y)return Promise.reject(new ne(`trigger-action:${wP.id}`,"selectedFeature is required",{selectedFeature:y}));const{sourceLayer:v}=y;return v?v.remove(y):i==null||i.graphics.remove(y),Promise.resolve()}return Promise.resolve()};function iU(t){const{selectedFeature:e,location:i,view:r}=t;return r?r.type==="3d"?e??i??null:t.get("selectedFeature.geometry")||i:null}function sd(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function d2e(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function p2e(t){var $;const{location:e,selectedFeature:i,view:r,zoomFactor:n}=t,l=iU(t);if(!r||!l){const E=new ne("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:r});throw C2.error(E),E}const d=r.scale/n,y=($=t.selectedFeature)==null?void 0:$.geometry,v=y??e,x=v!=null&&v.type==="point"&&await d2e(i,r);pd.active=!0,pd.disabled=!0;try{await t.zoomTo({target:{target:l,scale:x?d:void 0}})}catch{const k=new ne("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});C2.error(k)}finally{pd.active=!1,pd.disabled=!1,t.zoomToLocation=null,x&&(t.location=v)}}async function f2e(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const d=new ne("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw C2.error(d),d}if(!e||!sd(e)){const d=new ne("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw C2.error(d),d}const[r,n]=await vT(i,e);h0.active=!0,h0.disabled=!0;const{extent:l}=await r.queryExtent(n);await t.zoomTo({target:l}),h0.active=!1,h0.disabled=!1}async function y2e(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,n]=await vT(e,i),{extent:l}=await r.queryExtent(n);t.selectedClusterBoundaryFeature.geometry=l,e.graphics.add(t.selectedClusterBoundaryFeature)}async function m2e(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,n]=await vT(i,e);lh.active=!0,lh.disabled=!0;const{features:l}=await r.queryFeatures(n);lh.active=!1,lh.disabled=!1,lh.value=!0,t==null||t.open({features:[e].concat(l),featureMenuOpen:!0})}async function vT(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),n=e.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function g2e(t){lh.value=!1;const e=t.features.filter(i=>sd(i));e.length&&(t.features=e)}function rU(t){var e;if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const He="esri-popup",ty=`${He}__header`,lc=`${He}--is-docked`,_e={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:He,widget:"esri-widget",main:`${He}__main-container`,loadingContainer:`${He}__loading-container`,isCollapsible:`${He}--is-collapsible`,isCollapsed:`${He}--is-collapsed`,shadow:`${He}--shadow`,isDocked:lc,isDockedTopLeft:`${lc}-top-left`,isDockedTopCenter:`${lc}-top-center`,isDockedTopRight:`${lc}-top-right`,isDockedBottomLeft:`${lc}-bottom-left`,isDockedBottomCenter:`${lc}-bottom-center`,isDockedBottomRight:`${lc}-bottom-right`,alignTopCenter:`${He}--aligned-top-center`,alignBottomCenter:`${He}--aligned-bottom-center`,alignTopLeft:`${He}--aligned-top-left`,alignBottomLeft:`${He}--aligned-bottom-left`,alignTopRight:`${He}--aligned-top-right`,alignBottomRight:`${He}--aligned-bottom-right`,isFeatureMenuOpen:`${He}--feature-menu-open`,isActionsMenuOpen:`${He}--actions-menu-open`,hasFeatureUpdated:`${He}--feature-updated`,header:ty,headerButtons:`${ty}-buttons`,headerContainer:`${ty}-container`,headerContainerButton:`${ty}-container--button`,headerTitle:`${ty}-title`,content:`${He}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${He}__footer`,footerHasPagination:`${He}__footer--has-pagination`,footerHasActions:`${He}__footer--has-actions`,footerHasActionsMenu:`${He}__footer--has-actions-menu`,button:`${He}__button`,buttonDisabled:`${He}__button--disabled`,buttonDock:`${He}__button--dock`,icon:`${He}__icon`,iconDock:`${He}__icon--dock-icon`,inlineActionsContainer:`${He}__inline-actions-container`,actionsMenuButton:`${He}__actions-menu-button`,actions:`${He}__actions`,action:`${He}__action`,actionImage:`${He}__action-image`,actionText:`${He}__action-text`,actionToggle:`${He}__action-toggle`,actionToggleOn:`${He}__action-toggle--on`,actionExit:`${He}__action--exit`,actionSelectFeature:`${He}__action--select-feature`,pointer:`${He}__pointer`,pointerDirection:`${He}__pointer-direction`,navigation:`${He}__navigation`,paginationIcon:`${He}__pagination-icon`,paginationPrevious:`${He}__pagination-previous`,paginationNext:`${He}__pagination-next`,featureMenu:`${He}__feature-menu`,featureMenuList:`${He}__feature-menu-list`,featureMenuItem:`${He}__feature-menu-item`,featureMenuViewport:`${He}__feature-menu-viewport`,featureMenuHeader:`${He}__feature-menu-header`,featureMenuNote:`${He}__feature-menu-note`,featureMenuSelected:`${He}__feature-menu-item--selected`,featureMenuButton:`${He}__feature-menu-button`,featureMenuButtonIcon:`${He}__feature-menu-button-icon`,featureMenuTitle:`${He}__feature-menu-title`,featureMenuObserver:`${He}__feature-menu-observer`,featureMenuLoader:`${He}__feature-menu-loader`,collapseButton:`${He}__collapse-button`,collapseIcon:`${He}__collapse-icon`},v2e="OBJECTID";var xr;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(xr||(xr={}));const cM={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function b2e(t,e,i){const r=xr.size;let n=r,l=r;t<1?n*=.75:t>1&&(l*=1.25);const d=0,y=0;let v=r,x=r;return e&&i&&(n=l=v=x=0),[{type:"path",path:[{command:"M",values:[v,d]},{command:"L",values:[i?v:.875*v,d]},{command:"L",values:[i?n-.5*v:y,l-.5*x]},{command:"L",values:[n-.5*v,l-.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[v,d]},{command:"L",values:[v,e?d:.125*x]},{command:"L",values:[n-.5*v,e?l-.5*x:x]},{command:"L",values:[n-.5*v,l-.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*v,l-.5*x]},{command:"L",values:[i?n-.5*v:y,l-.5*x]},{command:"L",values:[i?n-.5*v:y,e?l-.5*x:x]},{command:"L",values:[n-.5*v,e?l-.5*x:x]},{command:"Z",values:[]}]}]}function w2e(t){const e=xr.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function _2e(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function x2e(t,e){let i=e?xr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=xr.size?i-=.5*n:i-=n;const l=0,d=0,y=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,l]},{command:"L",values:[i,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[d,.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,.5*y]},{command:"L",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[d,r-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,y]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*y]},{command:"L",values:[i,.5*y]},{command:"Z",values:[]}]}]}function S2e(t,e){let i=e?xr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=xr.size?i-=.5*n:i-=n;const l=.5*i,d=.15*i,y=0,v=r-d;return[{type:"ellipse",cx:.5*i,cy:v,rx:l,ry:d},{type:"path",path:[{command:"M",values:[y,d]},{command:"L",values:[y,v]},{command:"L",values:[i,v]},{command:"L",values:[i,d]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:d,rx:l,ry:d}]}function M2e(t,e){let i=e?xr.tallSymbolWidth:t;const r=t,n=e?4:6;i<=xr.size?i-=.5*n:i-=n;const l=.15*i,d=r-l;return[{type:"ellipse",cx:.5*i,cy:d,rx:.5*i,ry:l},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,d]},{command:"L",values:[0,d]},{command:"Z",values:[]}]}]}function $2e(t){let e=t;const i=t,r=6;e<xr.size?e-=.5*r:e-=r;const n=.15*e,l=0;return[{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[e,l]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:l,rx:.5*e,ry:n}]}function T2e(t){let e=t;const i=t,r=4;e<xr.size?e-=.5*r:e-=r;const n=0,l=0,d=e,y=i,v=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*d,n]},{command:"L",values:[d,.5*y-v]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,n]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"L",values:[l,.5*y-v]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,.5*y-v]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"L",values:[.45*d,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,i]},{command:"L",values:[d,.5*y-v]},{command:"L",values:[.45*d-v,.5*y+v]},{command:"Z",values:[]}]}]}function I2e(t){const e=t,i=2;let r=t;r<xr.size?r-=.5*i:r-=i;const n=0,l=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[l,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Th(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function tTe(t,e){if(t==null)return new Ne;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Ne(t);return new Ne([Th(i.r,e),Th(i.g,e),Th(i.b,e),i.a])}function E2e(t){return"r"in t&&"g"in t&&"b"in t}function sU(t){return"h"in t&&"s"in t&&"v"in t}function nU(t){return"l"in t&&"a"in t&&"b"in t}function oU(t){return"l"in t&&"c"in t&&"h"in t}function A2e(t){return"x"in t&&"y"in t&&"z"in t}const k2e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],P2e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function aU(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const l=t.length,d=t[0].length;let y=0;for(r=0;r<l;r++){for(y=0,n=0;n<d;n++)y+=t[r][n]*e[n];i.push(y)}return i}function lU(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=aU(k2e,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function bT(t){const e=aU(P2e,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function uU(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function hU(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function C2e(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let l=Math.atan2(r,i);return l=l>0?l:l+2*Math.PI,{l:e,c:n,h:l}}function O2e(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function L2e(t){return uU(lU(t))}function D2e(t){return bT(hU(t))}function R2e(t){return C2e(uU(lU(t)))}function j2e(t){return bT(hU(O2e(t)))}function F2e(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),l=n-Math.min(e,i,r);let d=n,y=l===0?0:n===e?(i-r)/l%6:n===i?(r-e)/l+2:(e-i)/l+4,v=l===0?0:l/d;return y<0&&(y+=6),y*=60,v*=100,d*=100/255,{h:y,s:v,v:d}}function N2e(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,l=n*(1-Math.abs(e%2-1));let d;switch(Math.floor(e)){case 0:d={r:n,g:l,b:0};break;case 1:d={r:l,g:n,b:0};break;case 2:d={r:0,g:n,b:l};break;case 3:d={r:0,g:l,b:n};break;case 4:d={r:l,g:0,b:n};break;case 5:case 6:d={r:n,g:0,b:l};break;default:d={r:0,g:0,b:0}}return d.r=Math.round(d.r+r-n),d.g=Math.round(d.g+r-n),d.b=Math.round(d.b+r-n),d}function ag(t){return E2e(t)?t:oU(t)?j2e(t):nU(t)?D2e(t):A2e(t)?bT(t):sU(t)?N2e(t):t}function wT(t){return sU(t)?t:F2e(ag(t))}function iTe(t){return nU(t)?t:L2e(ag(t))}function rTe(t){return oU(t)?t:R2e(ag(t))}const z2e="http://www.w3.org/2000/svg";let V2e=0,B2e=0;const _P=ce("android"),G2e=ce("chrome")||_P&&_P>=4?"auto":"optimizeLegibility",U2e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},q2e=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let $i={},Ut={};const xP={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},H2e=Math.PI;let W2e=1;function c0(t,e){const i=t*(H2e/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function cU(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function dU(t,e,i,r){if(t){if(t.type==="circle")return X("circle",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if(t.type==="ellipse")return X("ellipse",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if(t.type==="rect")return X("rect",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if(t.type==="image")return X("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if(t.type==="path"){const n=typeof t.path!="string"?cU(t.path):t.path;return X("path",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:n})}if(t.type==="text")return Vd(r),X("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":G2e,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:t.x,y:t.y},t.text)}return null}function pU(t){const e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){const i="patternId-"+ ++V2e;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){const i="linearGradientId-"+ ++B2e;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(r=>({offset:r.offset,color:r.color&&new Ne(r.color).toString()}))}}else if(t){const i=new Ne(t);e.fill=i.toString()}}return e}function fU(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Ne(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in xP&&(i=xP[t.style]),Array.isArray(i)){i=i.slice(0);const r=t.width??0;for(let n=0;n<i.length;++n)i[n]*=r;if(t.cap!=="butt"){for(let n=0;n<i.length;n+=2)i[n]-=r,i[n]<1&&(i[n]=1);for(let n=1;n<i.length;n+=2)i[n]+=r}i=i.join(",")}e.dashArray=i}return e}function yU(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",Vd(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function J2e(t){const{pattern:e,linearGradient:i}=t;if(e)return X("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},X("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(i){const r=i.stops.map((n,l)=>X("stop",{key:`${l}-stop`,offset:n.offset,"stop-color":n.color}));return X("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r)}return null}function Y2e(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:l,stroke:d,font:y}=r,v=pU(l),x=fU(d),$=n.type==="text"?yU(n,y):null,E=dU(n,v.fill,x,$);E&&i.push(E)}return X("mask",{id:e,maskUnits:"userSpaceOnUse"},X("g",null,i))}function SP(t,e,i){return W0(t,I_(t),[e,i])}function MP(t,e,i,r,n){return E_(t,I_(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function K2e(t,e,i,r){const n=e%360*Math.PI/180;Gm(t,I_(t),n);const l=Math.cos(n),d=Math.sin(n),y=t[4],v=t[5];return t[4]=y*l-v*d+r*d-i*l+i,t[5]=v*l+y*d-i*d-r*l+r,t}function hs(t,e){$i&&"left"in $i?($i.left!=null&&$i.left>t&&($i.left=t),($i.right==null||$i.right<t)&&($i.right=t),($i.top==null||$i.top>e)&&($i.top=e),($i.bottom==null||$i.bottom<e)&&($i.bottom=e)):$i={left:t,bottom:e,right:t,top:e}}function $P(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)hs(e[r],e[r+1]);Ut.x=e[i-2],Ut.y=e[i-1];break;case"H":for(r=0;r<i;++r)hs(e[r],Ut.y);Ut.x=e[i-1];break;case"V":for(r=0;r<i;++r)hs(Ut.x,e[r]);Ut.y=e[i-1];break;case"m":{let n=0;for(("x"in Ut)||(hs(Ut.x=e[0],Ut.y=e[1]),n=2),r=n;r<i;r+=2)hs(Ut.x+=e[r],Ut.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)hs(Ut.x+=e[r],Ut.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)hs(Ut.x+=e[r],Ut.y);break;case"v":for(r=0;r<i;++r)hs(Ut.x,Ut.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)hs(Ut.x+e[r],Ut.y+e[r+1]),hs(Ut.x+e[r+2],Ut.y+e[r+3]),hs(Ut.x+=e[r+4],Ut.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)hs(Ut.x+e[r],Ut.y+e[r+1]),hs(Ut.x+=e[r+2],Ut.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)hs(e[r+5],e[r+6]);Ut.x=e[i-2],Ut.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)hs(Ut.x+=e[r+5],Ut.y+=e[r+6])}}function TP(t,e,i){const r=U2e[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),$P(n)):(n={action:t,args:[]},i.push(n),$P(n)))}function Z2e(t){const e=(typeof t.path!="string"?cU(t.path):t.path).match(q2e),i=[];if($i={},Ut={},!e)return null;let r="",n=[];const l=e.length;for(let y=0;y<l;++y){const v=e[y],x=parseFloat(v);isNaN(x)?(r&&TP(r,n,i),n=[],r=v):n.push(x)}TP(r,n,i);const d={x:0,y:0,width:0,height:0};return $i&&"left"in $i&&(d.x=$i.left,d.y=$i.top,d.width=$i.right-$i.left,d.height=$i.bottom-$i.top),d}function X2e(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=br(Z2e(t));e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function Q2e(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const l of t)i?(i.x=Math.min(i.x,l.x),i.y=Math.min(i.y,l.y),r=Math.max(r,l.x+l.width),n=Math.max(n,l.y+l.height)):(i=e,i.x=l.x,i.y=l.y,r=l.x+l.width,n=l.y+l.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function e_e(t,e,i,r,n,l,d,y,v){let x=(d&&l?c0(l,e):e)/2,$=(d&&l?c0(l,i):i)/2;if(v){const W=v[0],q=v[1];x=(d&&l?c0(l,W):W)/2,$=(d&&l?c0(l,q):q)/2}const E=t.width+r,k=t.height+r,P=Qw(),D=Qw();let L=!1;if(n&&E!==0&&k!==0){const W=e!==i?e/i:E/k,q=e>i?e:i;let Y=1,ie=1;isNaN(q)||(W>1?(Y=q/E,ie=q/W/k):(ie=q/k,Y=q*W/E)),td(D,D,MP(P,Y,ie,x,$)),L=!0}const N=t.x+(E-r)/2,B=t.y+(k-r)/2;if(td(D,D,SP(P,x-N,$-B)),!L&&(E>e||k>i)){const W=E/e>k/i,q=(W?e:i)/(W?E:k);td(D,D,MP(P,q,q,N,B))}return l&&td(D,D,K2e(P,l,N,B)),y&&td(D,D,SP(P,y[0],y[1])),`matrix(${D[0]},${D[1]},${D[2]},${D[3]},${D[4]},${D[5]})`}function t_e(t,e,i){const r=t==null?void 0:t.effects.find(x=>x.type==="bloom");if(!r)return null;const{strength:n,radius:l}=r,d=n>0?l:0,y=(n+d)*e,v=4*n+1;return X("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},X("feMorphology",{operator:"dilate",radius:(n+.5*d)*(5**(e/100)*(.4+e/100)),in:"SourceGraphic",result:"dilate"}),X("feGaussianBlur",{in:"dilate",stdDeviation:y/25,result:"blur"}),X("feGaussianBlur",{in:"blur",stdDeviation:y/50,result:"intensityBlur"}),X("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},X("feFuncR",{type:"linear",slope:v}),X("feFuncG",{type:"linear",slope:v}),X("feFuncB",{type:"linear",slope:v})),X("feMerge",null,X("feMergeNode",{in:"intensityBlur"}),X("feMergeNode",{in:"intensityBrightness"}),X("feGaussianBlur",{stdDeviation:n/10})))}function i_e(t,e,i,r={}){var x;const n=[],l=[],d=++W2e,y=t_e(r.effectView,e,d);let v=null;if(y){const $=(x=r.effectView)==null?void 0:x.effects.find(D=>D.type==="bloom"),E=($.strength?$.strength+$.radius/2:0)/3,k=e+e*E,P=i+i*E;v=[Math.max(k,10),Math.max(P,10)]}for(let $=0;$<t.length;$++){const E=t[$],k=[],P=[];let D=0,L=0,N=0;for(const q of E){const{shape:Y,fill:ie,stroke:se,font:ue,offset:de}=q;r.ignoreStrokeWidth||Y.type==="text"||(D+=se&&se.width||0);const be=pU(ie),we=fU(se),$e=Y.type==="text"?yU(Y,ue):null;n.push(J2e(be)),k.push(dU(Y,be.fill,we,$e)),P.push(X2e(Y)),de&&(L+=de[0],N+=de[1])}const B=e_e(br(Q2e(P)),e,i,D,r.scale??!1,r.rotation,r.useRotationSize??!1,[L,N],v);let W=null;if(r.masking){const q=`mask-${$}`,Y=r.masking[$];n.push(Y2e(Y,q)),W=`url(#${q})`}l.push(W?X("g",{mask:W},X("g",{transform:B},k)):X("g",{transform:B},k))}return r.useRotationSize&&r.rotation&&(e=c0(r.rotation,e),i=c0(r.rotation,i)),y&&(Vd(v),e=v[0],i=v[1]),X("svg",{xmlns:z2e,width:e,height:i,style:"display: block;","aria-labelledby":r.ariaLabel,role:"img",focusable:!1},y,X("defs",null,n),y?X("g",{filter:`url(#bloom${d})`},l):l)}const IP=G4();function r_e(t,e){IP.append(t,e),IP.detach(e)}function e3(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(d=>!!d.length))return null;const l=i&&i.node||document.createElement("div");return i.opacity!=null&&(l.style.opacity=i.opacity.toString()),i.effectView!=null&&(l.style.filter=wV(i.effectView)),r_e(l,()=>i_e(t,r,n,i)),l}function s_e(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function n_e(t,e,i){return t?Ht(t,{responseType:"image"}).then(r=>{const n=r.data,l=n.width,d=n.height,y=l/d;let v=e;if(i){const x=Math.max(l,d);v=Math.min(v,x)}return{image:n,width:y<=1?Math.ceil(v*y):v,height:y<=1?v:Math.ceil(v/y)}}):Promise.reject(new ne("renderUtils: imageDataSize","href not provided."))}function o_e(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function a_e(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const l=wT({r:t[e],g:t[e+1],b:t[e+2]});l.h=r.h,l.s=r.s,l.v=l.v/100*r.v;const d=ag(l);t[e]=d.r,t[e+1]=d.g,t[e+2]=d.b,t[e+3]*=i[3];break}}}function l_e(t,e,i,r,n){return n_e(t,e,n).then(l=>{const d=l.width??e,y=l.height??e;if(l.image&&o_e(i,r)){let v=l.image.width,x=l.image.height;ce("edge")&&/\.svg$/i.test(t)&&(v-=1,x-=1);const $=s_e(d,y);$.drawImage(l.image,0,0,v,x,0,0,d,y);const E=$.getImageData(0,0,d,y),k=[i.r/255,i.g/255,i.b/255,i.a],P=wT(i);for(let D=0;D<E.data.length;D+=4)a_e(E.data,D,k,P,r);$.putImageData(E,0,0),t=$.canvas.toDataURL("image/png")}else{const v=_t&&_t.findCredential(t);if(v&&v.token){const x=t.includes("?")?"&":"?";t=`${t}${x}token=${v.token}`}}return{url:t,width:d,height:y}}).catch(()=>({url:t,width:e,height:e}))}function u_e(t){return t=t||globalThis.location.hostname,h_e.some(e=>(t==null?void 0:t.match(e))!=null)}function EP(t,e){return t&&(e=e||globalThis.location.hostname)?e.match(mU)!=null||e.match(vU)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(gU)!=null||e.match(bU)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t}const mU=/^devext.arcgis.com$/,gU=/^qaext.arcgis.com$/,vU=/^[\w-]*\.mapsdevext.arcgis.com$/,bU=/^[\w-]*\.mapsqa.arcgis.com$/,h_e=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,mU,gU,/^jsapps.esri.com$/,vU,bU];function wU(t,e,i,r){const n=t.name;return n==null?Promise.reject(new ne("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&t.styleName==="Esri2DPointSymbolsStyle"?c_e(n,e,r):WB(t,e,r).then(l=>xU(br(l),n,e,i,hve,r))}function _U(t,e){return e.items.find(i=>i.name===t)}function xU(t,e,i,r,n,l){var P;const d=i&&i.portal!=null?i.portal:os.getDefault(),y={portal:d,url:Wi(t.baseUrl),origin:"portal-item"},v=_U(e,t.data);if(!v){const D=`The symbol name '${e}' could not be found`;return Promise.reject(new ne("symbolstyleutils:symbol-name-not-found",D,{symbolName:e}))}let x=Ah(n(v,r),y),$=((P=v.thumbnail)==null?void 0:P.href)??null;const E=v.thumbnail&&v.thumbnail.imageData;u_e()&&(x=EP(x)??"",$=EP($));const k={portal:d,url:Wi(NM(x)),origin:"portal-item"};return tT(x,l).then(D=>{const L=r==="cimRef"?JB(D.data):D.data,N=PB(L,k);if(N&&Wl(N)){if($){const B=Ah($,y);N.thumbnail=new vd({url:B})}else E&&(N.thumbnail=new vd({url:`data:image/png;base64,${E}`}));t.styleUrl?N.styleOrigin=new am({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(N.styleOrigin=new am({portal:i.portal,styleName:t.styleName,name:e}))}return N})}function c_e(t,e,i){const r=cve.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:os.getDefault();return tT(r,i).then(l=>{const d=JB(l.data);return PB(d,{portal:n,url:Wi(NM(r)),origin:"portal-item"})})}const d_e=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:xU,getStyleItemFromStyle:_U,resolveWebStyleSymbol:wU},Symbol.toStringTag,{value:"Module"})),nd=xr.size,Kb=xr.maxSize,_T=xr.maxOutlineSize,AP=xr.lineWidth,dM=xr.tallSymbolWidth;function d0(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=Vr(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,_T),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?L$(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function p_e(t,e){var r,n,l;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return tfe(e);const i=Et("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const d=await wU(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch(()=>null);if(d&&"thumbnail"in d&&((l=d.thumbnail)!=null&&l.url))return d.thumbnail.url}return i}function fx(t,e=1){const i=t.a,r=wT(t),n=r.h,l=r.s/e,d=100-(100-r.v)/e,{r:y,g:v,b:x}=ag({h:n,s:l,v:d});return[y,v,x,i]}function O2(t){return t.type==="water"?t.color==null?null:t.color:t.material==null||t.material.color==null?null:t.material.color}function ii(t,e=0){const i=O2(t);if(!i){if(t.type==="fill")return null;const n=Z0e.r,l=Th(n,e);return[l,l,l,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Th(r[n],e);return r}async function SU(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await K0e(Et(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function kP(t){return t.outline?d0(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function MU(t,e){const i=O2(t);if(!i)return null;let r="rgba(";return r+=Th(i.r,e)+",",r+=Th(i.g,e)+",",r+=Th(i.b,e)+",",r+i.a+");"}function pM(t,e){const i=MU(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?Vr(t.size):.75,_T),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?L$(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?Vr(2):t.join:null}:{}}function $v(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function f_e(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function y_e(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const d=e,y=e;switch(t.resource&&t.resource.primitive||Lte){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:ii(t,0),stroke:d0(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[0,0]},{command:"L",values:[d,0]},{command:"L",values:[d,y]},{command:"Z",values:[]}]},fill:ii(t,0),stroke:d0(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,y]},{command:"Z",values:[]}]},fill:ii(t,0),stroke:d0(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*d,0]},{command:"L",values:[.5*d,y]},{command:"M",values:[0,.5*y]},{command:"L",values:[d,.5*y]}]},stroke:kP(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[d,y]},{command:"M",values:[d,0]},{command:"L",values:[0,y]}]},stroke:kP(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*y]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,.5*y]},{command:"L",values:[.5*d,y]},{command:"Z",values:[]}]},fill:ii(t,0),stroke:d0(t)})}break}case"object":switch(t.resource&&t.resource.primitive||Fte){case"cone":{const n=$v(ii(t,0),ii(t,-.6),i?dM:e),l=M2e(e,i);r.push({shape:l[0],fill:n}),r.push({shape:l[1],fill:n});break}case"inverted-cone":{const n=ii(t,0),l=$v(n,ii(t,-.6),e),d=$2e(e);r.push({shape:d[0],fill:l}),r.push({shape:d[1],fill:n});break}case"cube":{const n=x2e(e,i);r.push({shape:n[0],fill:ii(t,0)}),r.push({shape:n[1],fill:ii(t,-.3)}),r.push({shape:n[2],fill:ii(t,-.5)});break}case"cylinder":{const n=$v(ii(t,0),ii(t,-.6),i?dM:e),l=S2e(e,i);r.push({shape:l[0],fill:n}),r.push({shape:l[1],fill:n}),r.push({shape:l[2],fill:ii(t,0)});break}case"diamond":{const n=T2e(e);r.push({shape:n[0],fill:ii(t,-.3)}),r.push({shape:n[1],fill:ii(t,0)}),r.push({shape:n[2],fill:ii(t,-.3)}),r.push({shape:n[3],fill:ii(t,-.7)});break}case"sphere":{const n=$v(ii(t,0),ii(t,-.6));n.x1=0,n.y1=0,n.x2=.25*e,n.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:n});break}case"tetrahedron":{const n=I2e(e);r.push({shape:n[0],fill:ii(t,-.3)}),r.push({shape:n[1],fill:ii(t,0)}),r.push({shape:n[2],fill:ii(t,-.6)});break}}break}return r}function t3(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?Vr(e):null}function m_e(t){return t.type==="icon"?"multiply":"tint"}function g_e(t,e){const i=t3(e),r=e!=null&&e.maxSize?Vr(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,l=t.symbolLayers,d=[];let y=0,v=0;const x=l.at(-1);let $;return x&&x.type==="icon"&&($=x.size&&Vr(x.size)),l.forEach(E=>{var D;if(E.type!=="icon"&&E.type!=="object")return;const k=E.type==="icon"?E.size&&Vr(E.size):0,P=i||k?Math.ceil(Math.min(i||k,r||Kb)):nd;if(E&&E.resource&&E.resource.href){const L=p_e(t,E).then(N=>{const B=E.get("material.color"),W=m_e(E);return l_e(N,P,B,W,n)}).then(N=>{const B=N.width,W=N.height;return y=Math.max(y,B),v=Math.max(v,W),[{shape:{type:"image",x:0,y:0,width:B,height:W,src:N.url},fill:null,stroke:null}]});d.push(L)}else{let L=P;E.type==="icon"&&$&&i&&(L=P*(k/$));const N=(e==null?void 0:e.symbolConfig)==="tall"||((D=e==null?void 0:e.symbolConfig)==null?void 0:D.isTall)||E.type==="object"&&f_e(E);y=Math.max(y,N?dM:L),v=Math.max(v,L),d.push(Promise.resolve(y_e(E,L,N)))}}),$s(d).then(E=>{const k=[];return E.forEach(P=>{P.value?k.push(P.value):P.error&&ve.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",P.error)}),e3(k,[y,v],{node:e&&e.node,scale:!1,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})})}function v_e(t,e){const i=t.symbolLayers,r=[],n=efe(t),l=t3(e),d=(e&&e.maxSize?Vr(e.maxSize):null)||_T;let y,v=0,x=0;return i.forEach(($,E)=>{if(!$||$.type!=="line"&&$.type!=="path")return;const k=[];switch($.type){case"line":{const P=pM($,0);if(P==null)break;const D=P&&P.width||0;E===0&&(y=D);const L=Math.min(l||D,d),N=E===0?L:l?L*(D/y):L,B=N>AP/2?2*N:AP;x=Math.max(x,N),v=Math.max(v,B),P.width=N,k.push({shape:{type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[v,.5*x]}]},stroke:P});break}case"path":{const P=Math.min(l||nd,d),D=ii($,0),L=ii($,-.2),N=MU($,-.4),B=N?{color:N,width:1}:{};if($.profile==="quad"){const W=$.width,q=$.height,Y=b2e(W&&q?W/q:1,q===0,W===0),ie={...B,join:"bevel"};k.push({shape:Y[0],fill:L,stroke:ie}),k.push({shape:Y[1],fill:L,stroke:ie}),k.push({shape:Y[2],fill:D,stroke:ie})}else k.push({shape:cM.pathSymbol3DLayer[0],fill:L,stroke:B}),k.push({shape:cM.pathSymbol3DLayer[1],fill:D,stroke:B});x=Math.max(x,P),v=x}}r.push(k)}),Promise.resolve(e3(r,[v,x],{node:e&&e.node,scale:n,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function b_e(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=t3(e),l=e&&e.maxSize?Vr(e.maxSize):null,d=n||nd,y=[];let v=0,x=0,$=!1;for(let E=0;E<r.length;E++){const k=r.at(E),P=[];if(i&&k.type!=="fill")continue;const D=cM.fill[0];switch(k.type){case"fill":{const L=d0(k),N=Math.min(d,l||Kb);v=Math.max(v,N),x=Math.max(x,N),$=!0;let B=ii(k,0);const W="pattern"in k?k.pattern:null,q=O2(k);!i&&W!=null&&W.type==="style"&&W.style!=="solid"&&q&&(B=await SU(W,q)),P.push({shape:D,fill:B,stroke:L});break}case"line":{const L=pM(k,0);if(L==null)break;const N={stroke:L,shape:D};v=Math.max(v,nd),x=Math.max(x,nd),P.push(N);break}case"extrude":{const L={join:"round",width:1,...pM(k,-.4)},N=ii(k,0),B=ii(k,-.2),W=Math.min(d,l||Kb),q=w2e(W);L.width=1,P.push({shape:q[0],fill:B,stroke:L}),P.push({shape:q[1],fill:B,stroke:L}),P.push({shape:q[2],fill:N,stroke:L});const Y=nd,ie=.7*nd+.5*W;v=Math.max(v,Y),x=Math.max(x,ie);break}case"water":{const L=br(O2(k)),N=fx(L),B=fx(L,2),W=fx(L,3),q=_2e();$=!0,P.push({shape:q[0],fill:N}),P.push({shape:q[1],fill:B}),P.push({shape:q[2],fill:W});const Y=Math.min(d,l||Kb);v=Math.max(v,Y),x=Math.max(x,Y);break}}y.push(P)}return e3(y,[v,x],{node:e&&e.node,scale:$,opacity:e&&e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function w_e(t,e){if(t.symbolLayers.length===0)return Promise.reject(new ne("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return g_e(t,e);case"line-3d":return v_e(t,e);case"polygon-3d":case"mesh-3d":return b_e(t,e)}return Promise.reject(new ne("symbolPreview: swatchInfo3D","symbol not supported."))}const __e=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:SU,getSizeFromOptions:t3,getSymbolLayerFill:ii,previewSymbol3D:w_e},Symbol.toStringTag,{value:"Module"}));let dp=null;const PP=[255,255,255];function CP(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function sTe(t,e,i){const{backgroundColor:r,outline:n,dotSize:l}=t,d=i&&i.swatchSize||xr.size,y=.8,v=Math.round(d*d/l**2*y),x=window.devicePixelRatio,$=document.createElement("canvas"),E=d*x;$.width=E,$.height=E,$.style.width=$.width/x+"px",$.style.height=$.height/x+"px";const k=$.getContext("2d");if(r&&(k.fillStyle=r.toCss(!0),k.fillRect(0,0,E,E),k.fill()),k.fillStyle=(e==null?void 0:e.toCss(!0))??"",dp&&dp.length/2===v)for(let D=0;D<2*v;D+=2){const L=dp[D],N=dp[D+1];k.fillRect(L,N,l*x,l*x),k.fill()}else{dp=[];for(let D=0;D<2*v;D+=2){const L=CP(0,E),N=CP(0,E);dp.push(L,N),k.fillRect(L,N,l*x,l*x),k.fill()}}n&&(n.color&&(k.strokeStyle=n.color.toCss(!0)),k.lineWidth=n.width,k.strokeRect(0,0,E,E));const P=new Image(d,d);return P.src=$.toDataURL(),P.ariaLabel=(i==null?void 0:i.ariaLabel)??null,P.alt=(i==null?void 0:i.ariaLabel)??"",P}function nTe(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,l=r/n,d=[],y=O$(e.outline);(y==null?void 0:y.width)!=null&&(y.width*=2),(y||e.backgroundColor)&&d.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:y,offset:[0,0]});const v=e.values,x=v&&v.length===n&&v.reduce((D,L)=>D+L,0)===100,$=[0];for(let D=0;D<n;D++){let L=null;x&&(L=v[D]*r/100,$.push(L+$[D])),d.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(L??l)/2} ${r}`,dashoffset:"-"+(x?$[D]/2:D*(l/2)),color:t[D]},offset:[0,0]})}let E=null;const k=2*i+((y==null?void 0:y.width)||0),P=e.holePercentage;if(P){y&&d.push({shape:{type:"circle",cx:i,cy:i,r:i*P},fill:null,stroke:y,offset:[0,0]});const D=k/2;E=[[{shape:{type:"circle",cx:D,cy:D,r:D},fill:PP,stroke:y?{...y,color:PP}:null,offset:[0,0]},{shape:{type:"circle",cx:D,cy:D,r:i*P},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return e3([d],[k,k],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:E,rotation:-90,ariaLabel:e.ariaLabel})}function oTe(t,e={}){const n=e.align==="horizontal",l=n?75:24,d=n?24:75,y=e.width??l,v=e.height??d,x=e.gradient??!0,$=window.devicePixelRatio,E=y*$,k=v*$,P=document.createElement("canvas");P.width=E,P.height=k,P.ariaLabel=e.ariaLabel??null,P.style.width=`${y}px`,P.style.height=`${v}px`;const D=P.getContext("2d"),L=n?E:0,N=n?0:k;if(x){const W=D.createLinearGradient(0,0,L,N),q=t.length,Y=q===1?0:1/(q-1);t.forEach((ie,se)=>W.addColorStop(se*Y,ie.toString())),D.fillStyle=W,D.fillRect(0,0,E,k)}else{const W=n?E/t.length:E,q=n?k:k/t.length;let Y=0,ie=0;for(const se of t)D.fillStyle=se.toString(),D.fillRect(Y,ie,W,q),Y=n?Y+W:0,ie=n?0:ie+q}const B=document.createElement("div");return B.style.width=`${y}px`,B.style.height=`${v}px`,x_e(B,e==null?void 0:e.effectList),B.appendChild(P),B}function x_e(t,e){if(!e)return;t.style.filter=wV(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function S_e(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await le(()=>import("./previewWebStyleSymbol-b695e89b.js"),[]);return i(t,S_e,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await le(()=>Promise.resolve().then(()=>__e),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await le(()=>import("./previewSymbol2D-504c402e.js"),["assets/previewSymbol2D-504c402e.js","assets/fontUtils-fc0691f0.js"]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await le(()=>import("./previewCIMSymbol-2baed39d.js"),["assets/previewCIMSymbol-2baed39d.js","assets/cimAnalyzer-a75fa5be.js","assets/fontUtils-fc0691f0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-5e0e38c0.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-f146c253.js","assets/floatRGBA-79a9de9b.js","assets/CIMResourceManager-b8596627.js","assets/Rasterizer-4873c8da.js","assets/rasterizingUtils-9bca9145.js","assets/imageutils-9adfcaac.js"]);return i(t,e)}default:return}}function $U(t){return t&&"opacity"in t?t.opacity*$U(t.parent):1}async function M_e(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=$U(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const q=t.symbol.type==="web-style"?await yfe(t.symbol,{...e,cache:e!=null?e.webStyleCache:null}):t.symbol.clone();return C5(q,null,n),q}const l=(e!=null?e.renderer:null)??(r&&"renderer"in r?r.renderer:null);let d=l&&"getSymbolAsync"in l?await l.getSymbolAsync(t,e):null;if(!d)return;if(d=d.type==="web-style"?await d.fetchSymbol({...e,cache:e!=null?e.webStyleCache:null}):d.clone(),!(l&&"visualVariables"in l&&l.visualVariables&&l.visualVariables.length))return C5(d,null,n),d;if("arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&(e==null||e.arcade==null)){const q={...e};q.arcade=await ql(),e=q}const{getColor:y,getOpacity:v,getAllSizes:x,getRotationAngle:$}=await le(()=>Promise.resolve().then(()=>q_),void 0),E=[],k=[],P=[],D=[];for(const q of l.visualVariables)switch(q.type){case"color":E.push(q);break;case"opacity":k.push(q);break;case"rotation":D.push(q);break;case"size":q.target||P.push(q)}const L=!!E.length&&E[E.length-1],N=L?y(L,t,e):null,B=!!k.length&&k[k.length-1];let W=B?v(B,t,e):null;if(n!=null&&(W=W!=null?W*n:n),C5(d,N,W),P.length){const q=x(P,t,e);await pfe(d,q)}for(const q of D)ffe(d,$(q,t,e),q.axis);return d}function OP(t){return t&&typeof t.highlight=="function"}const q1=ze.ofType({key:"type",defaultKeyValue:"button",base:hf,typeMap:{button:cf,toggle:c_}}),$_e=()=>[pd.clone()],T_e=()=>[h0.clone(),lh.clone()];let wt=class extends tz(eU){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Gs,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new q1,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new ur({symbol:new qh({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([this.on("view-change",()=>this._autoClose()),me(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),me(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),me(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state},e=>this._animationStateChange(e)),me(()=>this.location,e=>this._locationChange(e)),me(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),me(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),me(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),me(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>c2e({event:e,viewModel:this,view:this.view})),Xn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),qd),me(()=>{var e,i;return[this.features,(e=this.view)==null?void 0:e.map,(i=this.view)==null?void 0:i.spatialReference]},()=>this._updateFeatureVMs()),me(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Xn(()=>!this.visible,()=>this.browseClusterEnabled=!1),me(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new q1;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:l,selectedFeature:d}=this,y=l?r.concat(i):i,v=d&&(typeof d.getEffectivePopupTemplate=="function"&&d.getEffectivePopupTemplate(n)||d.popupTemplate),x=v&&v.actions,$=v&&v.overwriteActions?x:x?x.concat(y):y;return $&&$.filter(Boolean).forEach(E=>e.add(E)),e}get defaultActions(){const e=this._get("defaultActions")||new q1;return e.removeAll(),e.addMany(sd(this.selectedFeature)?T_e():$_e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:l}=this,d=n&&i.length;d&&r&&l===-1?this.selectedFeatureIndex=0:d&&l!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(e){var n,l,d;let i=e;const r=(l=(n=this.view)==null?void 0:n.spatialReference)==null?void 0:l.isWebMercator;e&&((d=e==null?void 0:e.spatialReference)!=null&&d.isWGS84)&&r&&(i=xh(e)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(i=>{this._pendingPromises.add(i);const r=l=>{this._pendingPromises.has(i)&&this._updateFeatures(l),this._updatePendingPromises(i)},n=()=>this._updatePendingPromises(i);i.then(r,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;e=isNaN(e)||e<-1||!i?-1:(e+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,i=iU(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new ne("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){const{view:r}=this;if(!r||!e)throw new ne("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed"];for(const l of n)delete i[l];this.set(i)}triggerAction(e){const i=this.allActions.at(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){g2e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?sd(i)?(await y2e(this),await m2e(this)):ve.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):ve.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(e){this.autoOpenEnabled&&this._fetchFeaturesAndOpen(e)}_animationStateChange(e){this.zoomToLocation||(pd.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i;const e=(i=this.view)==null?void 0:i.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(sd(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r}=this;r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:l}=this;if(r===null)return;const d=((r-1)*n+i)%i,y=d+n;l.slice(d,y).forEach((v,x)=>{v&&!v.graphic&&(v.graphic=e[d+x])})}async _selectedFeatureChange(e){const{location:i,updateLocationEnabled:r,view:n}=this;if(e&&n){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),sd(e)?void 0:(e.symbol=await M_e(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));!r&&i||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{var d;const l=(d=n.center)==null?void 0:d.clone();l&&(this.location=l)}):this.location=rU(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(i=>{const{clientOnlyGraphics:r,promisesPerLayerView:n}=i,l=Promise.resolve(r),d=n.map(y=>y.promise);this.promises=[l,...d]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r}=this;if(sd(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const n=r.slice(0),l=[];i.forEach((d,y)=>{var x,$;if(!d)return;let v=null;if(n.some((E,k)=>(E&&E.graphic===d&&(v=E,n.splice(k,1)),!!v)),v)l[y]=v;else{const E=new gT({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(x=this.view)==null?void 0:x.spatialReference,graphic:d===e?d:null,map:($=this.view)==null?void 0:$.map,view:this.view});l[y]=E}}),n.forEach(d=>d&&!d.destroyed&&d.destroy()),this._set("featureViewModels",l)}_getScreenPoint(e){const{view:i}=this;return i&&e&&typeof i.toScreen=="function"?i.toScreen(e):null}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,i){this._cancelFetchingFeatures();const r=new AbortController,{signal:n}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const l=this.fetchFeatures(e,{signal:n,event:i});return l.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),l}_fetchFeaturesAndOpen(e){const{screenPoint:i,mapPoint:r}=e,{view:n}=this;this._fetchFeaturesWithController(i,e).then(l=>{const{clientOnlyGraphics:d,promisesPerLayerView:y,location:v}=l,x=[Promise.resolve(d),...y.map($=>$.promise)];return n!=null&&n.popup&&"open"in n.popup&&n.popup.open({location:v||r,promises:x}),l})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightTarget(e,i){const r=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||v2e:null,n=e.attributes;return n&&r&&n[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:i,view:r,activeFeature:n,visible:l}=this;if(!(n&&r&&i&&l))return;const d=this._getHighlightLayer(n);if(!(d&&d instanceof im))return;const y=this._getLayerView(r,d);this._highlightActiveFeaturePromise=y;const v=await y;if(!(v&&OP(v)&&this._highlightActiveFeaturePromise===y&&this.activeFeature&&this.highlightEnabled))return;const x=v.highlight(this._getHighlightTarget(n,d));this._handles.add(x,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:i,highlightEnabled:r,view:n,visible:l}=this;if(!(i&&n&&r&&l))return;const d=this._getHighlightLayer(i);if(!(d&&d instanceof im))return;const y=this._getLayerView(n,d);this._highlightSelectedFeaturePromise=y;const v=await y;if(!(v&&OP(v)&&this._highlightSelectedFeaturePromise===y&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const x=v.highlight(this._getHighlightTarget(i,d));this._handles.add(x,e)}_updateFeatures(e){const{features:i}=this;if(!e||!e.length)return;if(!i.length)return void(this.features=e);const r=e.filter(n=>!i.includes(n));this.features=i.concat(r)}};g([S()],wt.prototype,"featurePage",void 0),g([S()],wt.prototype,"isLoadingFeature",null),g([S({type:q1})],wt.prototype,"actions",void 0),g([S({readOnly:!0})],wt.prototype,"active",null),g([S()],wt.prototype,"activeFeature",void 0),g([S({readOnly:!0})],wt.prototype,"allActions",null),g([S({type:Boolean})],wt.prototype,"defaultPopupTemplateEnabled",void 0),g([S()],wt.prototype,"autoCloseEnabled",void 0),g([S()],wt.prototype,"autoOpenEnabled",void 0),g([S()],wt.prototype,"browseClusterEnabled",void 0),g([S()],wt.prototype,"content",void 0),g([S({type:q1,readOnly:!0})],wt.prototype,"defaultActions",null),g([S({readOnly:!0})],wt.prototype,"featureCount",null),g([S()],wt.prototype,"features",null),g([S()],wt.prototype,"featuresPerPage",void 0),g([S()],wt.prototype,"featureMenuOpen",void 0),g([S()],wt.prototype,"featureViewModelAbilities",void 0),g([S({readOnly:!0})],wt.prototype,"featureViewModels",void 0),g([S()],wt.prototype,"highlightEnabled",void 0),g([S()],wt.prototype,"includeDefaultActions",void 0),g([S({type:lt})],wt.prototype,"location",null),g([S({readOnly:!0})],wt.prototype,"pendingPromisesCount",null),g([S({readOnly:!0})],wt.prototype,"selectedClusterBoundaryFeature",void 0),g([S({readOnly:!0})],wt.prototype,"waitingForResult",null),g([S({readOnly:!0})],wt.prototype,"promiseCount",null),g([S()],wt.prototype,"promises",null),g([S({value:null,readOnly:!0})],wt.prototype,"selectedFeature",null),g([S({value:-1})],wt.prototype,"selectedFeatureIndex",null),g([S({readOnly:!0})],wt.prototype,"selectedFeatureViewModel",null),g([S({readOnly:!0})],wt.prototype,"state",null),g([S()],wt.prototype,"title",void 0),g([S()],wt.prototype,"updateLocationEnabled",void 0),g([S()],wt.prototype,"view",void 0),g([S()],wt.prototype,"visible",void 0),g([S()],wt.prototype,"zoomFactor",void 0),g([S()],wt.prototype,"zoomToLocation",void 0),g([S()],wt.prototype,"centerAtLocation",null),wt=g([J("esri.widgets.Popup.PopupViewModel")],wt);const TU=wt,LP="selected-index",I_e=0,DP="popup-spinner",RP={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},jP="esri-popup";function tl(t,e){return e===void 0?`${jP}__${t}`:`${jP}__${t}-${e}`}const FP={closeButton:!0,featureNavigation:!0};let qe=class extends XG(Dr){constructor(t,e){super(t,e),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Gs,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=_$(()=>this._displaySpinner(),I_e),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new ze,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new TU,this.visibleElements={...FP},this._handleOpenRelatedFeature=i=>{this._openRelatedFeature(i)},this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,me(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),me(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),me(()=>{var i,r,n,l,d,y;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(l=(n=this.viewModel)==null?void 0:n.view)==null?void 0:l.size,(d=this.viewModel)==null?void 0:d.active,(y=this.viewModel)==null?void 0:y.location,this.alignment]},()=>this.reposition()),me(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),me(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),me(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i??!1,r??!1)),me(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),me(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),me(()=>{var i,r,n,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(l=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:l.state]},()=>this._setTitleFromFeatureWidget()),me(()=>{var i,r,n,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(l=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:l.state]},()=>this._setContentFromFeatureWidget()),Xn(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Vs(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),st),me(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),Vs(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),me(()=>{var i,r,n,l;return[(r=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:r.state,(l=(n=this._activeFlowItemWidget)==null?void 0:n.viewModel)==null?void 0:l.title]},()=>this.scheduleRender())])}loadDependencies(){return vf({action:()=>le(()=>import("./calcite-action-feb4da88.js"),["assets/calcite-action-feb4da88.js","assets/action-add18332.js","assets/guid-0d265cb2.js","assets/loader-e9088f17.js","assets/loadable-63b9a67f.js","assets/t9n-e1da0311.js","assets/observers-279029a9.js","assets/icon-2aec3643.js"]),flow:()=>le(()=>import("./calcite-flow-750a432c.js"),["assets/calcite-flow-750a432c.js","assets/observers-279029a9.js","assets/loadable-63b9a67f.js"]),"flow-item":()=>le(()=>import("./calcite-flow-item-a6b8baeb.js"),["assets/calcite-flow-item-a6b8baeb.js","assets/loader-e9088f17.js","assets/guid-0d265cb2.js","assets/loadable-63b9a67f.js","assets/t9n-e1da0311.js","assets/observers-279029a9.js","assets/action-add18332.js","assets/icon-2aec3643.js","assets/FloatingArrow-a90ff1a9.js","assets/debounce-fe65f68f.js","assets/openCloseComponent-29d09d20.js","assets/scrim-02ac3fc4.js"]),icon:()=>le(()=>import("./calcite-icon-899b792c.js"),["assets/calcite-icon-899b792c.js","assets/icon-2aec3643.js","assets/observers-279029a9.js"]),tooltip:()=>le(()=>import("./calcite-tooltip-6839b27e.js"),["assets/calcite-tooltip-6839b27e.js","assets/FloatingArrow-a90ff1a9.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-29d09d20.js"])})}initialize(){this.addHandles(this._displaySpinnerThrottled)}destroy(){var t,e;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(t=this._handles)==null||t.destroy(),this._unobserveFeatureMenuObserver(),(e=this._featureMenuIntersectionObserver)==null||e.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:t,viewModel:e}=this;if(!t)return!!(e!=null&&e.content);const i=t.viewModel;if(i!=null&&i.waitingForContent||(i==null?void 0:i.state)==="error")return!0;const r=i==null?void 0:i.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:t}=this;return t.at(-1)??null}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}set actionsMenuOpen(t){this._set("actionsMenuOpen",!!t)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get autoOpenEnabled(){return Z1(ve.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled}set autoOpenEnabled(t){Z1(ve.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||RP}set dockOptions(t){var y,v;const e={...RP},i=(v=(y=this.viewModel)==null?void 0:y.view)==null?void 0:v.breakpoints,r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...e,...t},l={...e.breakpoint,...r},{breakpoint:d}=n;typeof d=="object"?n.breakpoint={...l,...d}:d&&(n.breakpoint=l),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,visibleElements:e,headingLevel:i,_flowItems:r}=this,{selectedFeatureViewModel:n}=this.viewModel,l={...e,title:!1};return n?(t?(t.viewModel=n,t.visibleElements=l):this._feature=new a2e({flowItems:r,headingLevel:i+1,viewModel:n,visibleElements:l}),this._feature):null}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}castVisibleElements(t){return{...FP,...t}}blur(){const{active:t}=this.viewModel;t||ve.getLogger(this).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,e){return this.viewModel.fetchFeatures(t,e)}focus(){const{active:t}=this.viewModel;t||ve.getLogger(this).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(t){var n,l;this._handles.remove(LP);const e=!!t&&!!t.featureMenuOpen,i=!!t&&!!t.actionsMenuOpen,r={collapsed:!!t&&!!t.collapsed,actionsMenuOpen:i,featureMenuOpen:e};((l=(n=this.viewModel)==null?void 0:n.view)==null?void 0:l.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(t),this._shouldFocus(t),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){var D,L,N,B;const{actionsMenuOpen:t,dockEnabled:e,featureMenuVisible:i,dividedActions:r,currentAlignment:n,currentDockPosition:l}=this,{active:d}=this.viewModel,{menuActions:y}=r,v=d&&y.length>1&&t,x=d&&e,$=d&&!e,E=(L=(D=this.selectedFeature)==null?void 0:D.layer)==null?void 0:L.title,k=(B=(N=this.selectedFeature)==null?void 0:N.layer)==null?void 0:B.id,P={[_e.alignTopCenter]:n==="top-center",[_e.alignBottomCenter]:n==="bottom-center",[_e.alignTopLeft]:n==="top-left",[_e.alignBottomLeft]:n==="bottom-left",[_e.alignTopRight]:n==="top-right",[_e.alignBottomRight]:n==="bottom-right",[_e.isDocked]:x,[_e.shadow]:$,[_e.isDockedTopLeft]:l==="top-left",[_e.isDockedTopCenter]:l==="top-center",[_e.isDockedTopRight]:l==="top-right",[_e.isDockedBottomLeft]:l==="bottom-left",[_e.isDockedBottomCenter]:l==="bottom-center",[_e.isDockedBottomRight]:l==="bottom-right",[_e.isFeatureMenuOpen]:i,[_e.isActionsMenuOpen]:v};return X("div",{class:this.classes(_e.base,P),role:"presentation","data-layer-title":E,"data-layer-id":k,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},d?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return X("span",{"aria-hidden":"true",class:this.classes(_e.icon,_e.iconLoading,_e.rotating)})}renderNavigationLoading(){const{messagesCommon:t}=this;return this.viewModel.pendingPromisesCount?X("div",{key:tl("loading-container"),role:"presentation",class:_e.loadingContainer,"aria-label":t.loading,title:t.loading},this.renderLoadingIcon()):null}renderPreviousButton(){const{messages:t}=this;return X("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(_e.button,_e.paginationPrevious),"aria-label":t.previous,title:t.previous},X("calcite-icon",{icon:"chevron-left",scale:"s",class:_e.paginationIcon}))}renderNextButton(){const{messages:t}=this;return X("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(_e.button,_e.paginationNext),"aria-label":t.next,title:t.next},X("calcite-icon",{icon:"chevron-right",scale:"s",class:_e.paginationIcon}))}renderFeatureMenuButton(){const{featureMenuOpen:t,featureMenuId:e,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return X("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:_e.featureMenuButton,"aria-haspopup":"true","aria-controls":e,"aria-expanded":t.toString(),"aria-label":i.menu,title:i.menu},X("calcite-icon",{icon:"list-bullet",scale:"s",class:_e.featureMenuButtonIcon}),this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNextButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton()]:[]}renderDockIcon(){const{dockEnabled:t}=this,e=this._wouldDockTo(),i={[_e.iconUndock]:t,[_e.iconDock]:!t,[_e.iconDockToRight]:!t&&(e==="top-right"||e==="bottom-right"),[_e.iconDockToLeft]:!t&&(e==="top-left"||e==="bottom-left"),[_e.iconDockToTop]:!t&&e==="top-center",[_e.iconDockToBottom]:!t&&e==="bottom-center"};return X("span",{"aria-hidden":"true",class:this.classes(i,_e.icon)})}renderDockButton(){var n,l,d;const{dockEnabled:t,messages:e}=this,i=(l=(n=this.viewModel)==null?void 0:n.view)==null?void 0:l.widthBreakpoint,r=t?e.undock:e.dock;return i!=="xsmall"&&((d=this.dockOptions)!=null&&d.buttonEnabled)?X("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(_e.button,_e.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:t}=this.viewModel,{titleId:e,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,l={[_e.headerContainerButton]:i},d=X(I$,{level:this.headingLevel,class:_e.headerTitle,innerHTML:t??""}),y=i?X("button",{key:`${t}--collapsible`,id:e,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_e.headerContainer,l),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},d,X("calcite-icon",{class:_e.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):X("div",{key:t??"title",id:e,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_e.headerContainer,l)},d);return t?y:null}renderCloseIcon(){return X("span",{"aria-hidden":"true",class:this.classes(_e.icon,_e.iconClose)})}renderCloseButton(){const{visibleElements:t,messagesCommon:e}=this;return t.closeButton?X("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:_e.button,"aria-label":e.close,title:e.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return X("header",{class:_e.header},this.renderTitle(),X("div",{class:_e.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:t,hasContent:e,contentCollapsed:i,_flowItems:r}=this,{content:n}=this.viewModel,l=r.toArray(),d={[_e.contentHasFlows]:!!l.length};return e&&!i?X("div",{key:n??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:this.classes(_e.content,d)},X("calcite-flow",{bind:this},X("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Uw,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),l.map(y=>this.renderFlowItem(y))),l.map(y=>this.renderFlowItemTooltips(y))):null}renderFlowItem(t){const{messages:e}=this,i=t2(),r="graphic"in t&&!t.isTable;return X("calcite-flow-item",{bind:this,class:this.classes({[_e.calciteThemeDark]:!i,[_e.calciteThemeLight]:i}),heading:t.title??"",description:this._getFlowItemDescription(t),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${t.viewModel.uid}`},X("calcite-action",{class:_e.actionExit,icon:"move-up",label:e==null?void 0:e.exitRelatedRecords,text:e==null?void 0:e.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:n=>this._storeExitRelatedRecordsAction(t,n),onclick:this._destroyFlowItemWidgets}),r?X("calcite-action",{class:_e.actionSelectFeature,icon:"zoom-to-object",label:e==null?void 0:e.selectFeature,text:e==null?void 0:e.selectFeature,slot:"header-actions-end",bind:this,afterCreate:n=>this._storeFeatureSelectionAction(t,n),onclick:()=>this._handleOpenRelatedFeature(t)}):null,X("div",{class:this.classes(_e.contentFlowItem,{[_e.calciteThemeDark]:i,[_e.calciteThemeLight]:!i})},t.render()))}renderFlowItemTooltips(t){const{messages:e,_exitRelatedRecordsActions:i,_featureSelectionActions:r}=this,n=t2(),l=r.get(t);return[X("calcite-tooltip",{class:this.classes({[_e.calciteThemeDark]:!n,[_e.calciteThemeLight]:n}),key:`exit-related-records-tooltip-${t.viewModel.uid}`,label:e==null?void 0:e.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(t),placement:"top"},e==null?void 0:e.exitRelatedRecords),l?X("calcite-tooltip",{class:this.classes({[_e.calciteThemeDark]:!n,[_e.calciteThemeLight]:n}),key:`select-related-record-tooltip-${t.viewModel.uid}`,label:e==null?void 0:e.selectFeature,overlayPositioning:"fixed",referenceElement:l,placement:"top"},e==null?void 0:e.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:t,actionsMenuButtonId:e,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,l=i?n.close:n.open,{menuActions:d}=r;return d.length?X("div",{key:tl("actions-menu-button"),class:this.classes(_e.button,_e.actionsMenuButton),role:"button",id:e,"aria-haspopup":"true","aria-controls":i?t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":l,title:l},X("span",{"aria-hidden":"true",class:_e.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:t,actionsMenuButtonId:e,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?X("ul",{id:t,role:"menu","aria-labelledby":e,key:tl("actions"),class:_e.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(l=>this.renderAction({action:l,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:t}=this.dividedActions;return t.length?t.toArray().map(e=>this.renderAction({action:e,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:t,menuActions:e}=this.dividedActions,i=!!t.length,r=!!e.length;return i||r?X("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:_e.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?X("section",{key:tl("navigation"),class:this.classes(_e.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:t,dividedActions:e}=this,{inlineActions:i,menuActions:r}=e,n=!!i.length,l=!!r.length,d={[_e.footerHasPagination]:t,[_e.footerHasActions]:n,[_e.footerHasActionsMenu]:l};return t||n?X("div",{key:tl("feature-buttons"),class:this.classes(_e.footer,d)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:t}=this,{featureViewModels:e,isLoadingFeature:i}=this.viewModel,r=Oo(t.selectedFeatures,{total:e.length});return X("section",{key:tl("menu"),class:_e.featureMenu},X("strong",{class:_e.featureMenuHeader},r),X("nav",{bind:this,class:_e.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Uw},this.renderFeatureMenu(),X("div",{class:_e.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?X("div",{class:_e.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:X("div",{key:tl("pointer"),class:_e.pointer,role:"presentation"},X("div",{class:this.classes(_e.pointerDirection,_e.shadow)}))}renderMainContainer(){const{dockEnabled:t,currentAlignment:e,currentDockPosition:i,titleId:r,contentId:n,collapsible:l,hasContent:d,contentCollapsed:y,visibleElements:v}=this,{title:x}=this.viewModel,$=e==="bottom-left"||e==="bottom-center"||e==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",E=e==="top-left"||e==="top-center"||e==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",k={[_e.shadow]:t,[_e.isCollapsible]:l,[_e.isCollapsed]:y};return X("div",{class:this.classes(_e.main,_e.widget,k),tabIndex:v.closeButton?void 0:-1,role:"dialog","aria-live":"polite","aria-labelledby":x?r:"","aria-describedby":d&&!y?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},$?this.renderFooter():null,$?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),E?this.renderFooter():null,E?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=(e=this.viewModel)==null?void 0:e.content;return t?typeof t=="string"?X("div",{class:Mi.contentNode,key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(t){return X("span",{key:"text",class:_e.actionText},t)}renderActionCalciteIcon(t,e){return X("calcite-icon",{scale:"s",key:`calcite-icon-${e}`,icon:t,class:_e.icon})}renderActionIcon(t){const e=this._getActionClass(t),i=this._getActionImage(t),r={[_e.iconLoading]:t.active,[_e.rotating]:t.active,[_e.icon]:!!e,[_e.actionImage]:!t.active&&!!i};return e&&(r[e]=!t.active),X("span",{key:"icon","aria-hidden":"true",class:this.classes(_e.icon,r),styles:this._getIconStyles(i)})}renderAction(t){const{action:e,type:i}=t,r=this._getActionTitle(e),n={[_e.action]:e.type!=="toggle",[_e.actionToggle]:e.type==="toggle",[_e.actionToggleOn]:e.type==="toggle"&&e.value,[_e.buttonDisabled]:e.disabled},l=[e.icon&&!e.active?this.renderActionCalciteIcon(e.icon,e.uid):this.renderActionIcon(e),this.renderActionText(r)],d=i==="menu-item"?X("li",{key:e.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(_e.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":e.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l):X("div",{key:e.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(_e.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":e.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l);return e.visible?d:null}renderFeatureMenuItem(t,e){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:l}=this.viewModel,d=t===l,y={[_e.featureMenuSelected]:d},v=d?X("span",{key:tl(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:_e.iconCheckMark}):null,x=X("span",{innerHTML:t.title||r.untitled});return X("li",{role:"menuitem",tabIndex:-1,key:tl(`feature-menu-feature-${n}`),class:this.classes(y,_e.featureMenuItem),bind:this,"data-feature-index":e,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},X("span",{class:_e.featureMenuTitle},x,v))}renderFeatureMenu(){const{featureMenuId:t}=this,{featureViewModels:e}=this.viewModel;return e.length>1?X("ol",{class:_e.featureMenuList,id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},e.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_storeFeatureSelectionAction(t,e){this._featureSelectionActions.set(t,e),this.scheduleRender()}_storeExitRelatedRecordsAction(t,e){this._exitRelatedRecordsActions.set(t,e),this.scheduleRender()}_getFlowItemDescription(t){return"featureCountDescription"in t?t.featureCountDescription:t.viewModel.description??""}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const e=t.graphic,i=e==null?void 0:e.geometry;if(i==null||e==null)return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:i});const r=rU(i);this.open({features:[e],location:r??void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_handleBackClick(){const t=this._flowItems.pop();t&&(this._exitRelatedRecordsActions.delete(t),this._featureSelectionActions.delete(t),"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getActionTitle(t){const{messages:e,selectedFeature:i,messagesCommon:r}=this,{id:n}=t,l=i==null?void 0:i.attributes,d=t.title??"",y=n==="zoom-to-feature"?Oo(d,{messages:e}):n==="remove-selected-feature"?Oo(d,{messages:r}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?Oo(d,{messages:e}):t.title;return y&&l?Oo(y,l):y??""}_getActionClass(t){const{selectedFeature:e}=this,i=e==null?void 0:e.attributes,{className:r,image:n}=t,l=n||r?r:_e.iconDefaultAction;return l&&i?Oo(l,i):l??""}_getActionImage(t){if(t.active)return"";const{selectedFeature:e}=this,i=e==null?void 0:e.attributes,{image:r}=t;return r&&i?Oo(r,i):r??""}_createFeatureUpdatedAnimation(){return tne("enter",_e.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:t,featureNavigationVisible:e}=this;if(typeof t!="number")return null;const i=Math.round(t);return Math.max(e?i-1:i,0)}_watchActions(){const{allActions:t}=this.viewModel;this.notifyChange("dividedActions");const e="actions";this._handles.remove(e),t&&t.forEach(i=>{this._handles.add(me(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),e)})}_divideActions(){const{allActions:t}=this.viewModel,e=t.filter(l=>l.visible),i=this._getInlineActionCount(),r=i===null,n=i===0;return{inlineActions:r?e.slice(0):n?new ze:e.slice(0,i),menuActions:r?new ze:n?e.slice(0):e.slice(i)}}_featureMenuOpenChanged(t){t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(t){t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:t,messagesCommon:e}=this;t&&(this.viewModel.title=((i=t.viewModel)==null?void 0:i.state)==="error"?e.errorMessage:((r=t.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_handleFeatureMenuKeyup(t){rh(t)==="Escape"&&(t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(t){rh(t)==="Escape"&&(t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(t){const{viewModel:e}=this,i=yx(t.currentTarget);e.activeFeature=e.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(t){const e=rh(t),{_featureMenuNode:i}=this,r=yx(t.currentTarget);if(!i)return;const n=i.querySelectorAll("li"),l=n.length;e!=="ArrowUp"?e!=="ArrowDown"?e!=="Home"?e!=="End"||(t.stopPropagation(),n[n.length-1].focus()):(t.stopPropagation(),n[0].focus()):(t.stopPropagation(),n[(r+1+l)%l].focus()):(t.stopPropagation(),n[(r-1+l)%l].focus())}_handleActionMenuItemKeyup(t){const e=rh(t),{_actionsMenuNode:i}=this,r=t.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,l=n.findIndex(v=>v.uid===r);if(!i)return;const d=i.querySelectorAll("li"),y=d.length;e!=="ArrowUp"?e!=="ArrowDown"?e!=="Home"?e!=="End"||(t.stopPropagation(),d[d.length-1].focus()):(t.stopPropagation(),d[0].focus()):(t.stopPropagation(),d[(l+1+y)%y].focus()):(t.stopPropagation(),d[(l-1+y)%y].focus())}_handleMainKeyup(t){const e=rh(t);e==="ArrowLeft"&&(t.stopPropagation(),this.previous()),e==="ArrowRight"&&(t.stopPropagation(),this.next())}_spinnerEnabledChange(t){if(this._destroySpinner(),!t)return;const e=this.get("viewModel.view");this._createSpinner(e)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:e,waitingForResult:i}=this.viewModel;i&&e?t.show({location:e}):t.hide()}_getIconStyles(t){return{"background-image":t?`url(${t})`:""}}async _shouldFocus(t){t!=null&&t.shouldFocus&&(await b_(()=>{var e;return((e=this.viewModel)==null?void 0:e.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const t=me(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedFeatureIndex},(e,i)=>this._selectedFeatureIndexUpdated(e,i));this._handles.add(t,LP)}_selectedFeatureIndexUpdated(t,e){const{featureCount:i}=this;i&&t!==e&&t!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,t&&!t.destroyed&&t.destroy()),this._feature=null}_isScreenLocationWithinView(t,e){return t.x>-1&&t.y>-1&&t.x<=e.width&&t.y<=e.height}_isOutsideView(t){const{popupHeight:e,popupWidth:i,screenLocation:r,side:n,view:l}=t;if(isNaN(i)||isNaN(e)||!l||!r)return!1;const d=l.padding;return n==="right"&&r.x+i/2>l.width-d.right||n==="left"&&r.x-i/2<d.left||n==="top"&&r.y-e<d.top||n==="bottom"&&r.y+e>l.height-d.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:e,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:l,view:d}=n;if(l==null||!d||!i)return"top-center";if(!this._isScreenLocationWithinView(l,d))return this._get("currentAlignment")||"top-center";function y(q){return parseInt(q.replaceAll(/[^-\d\.]/g,""),10)}const v=r?window.getComputedStyle(r,null):null,x=v?y(v.getPropertyValue("max-height")):0,$=v?y(v.getPropertyValue("height")):0,{height:E,width:k}=i.getBoundingClientRect(),P=k+e,D=Math.max(E,x,$)+e,L=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"right",view:d}),N=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"left",view:d}),B=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"top",view:d}),W=this._isOutsideView({popupHeight:D,popupWidth:P,screenLocation:l,side:"bottom",view:d});return N?B?"bottom-right":"top-right":L?B?"bottom-left":"top-left":B?W?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:e}=this;return e||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const e=["left","right"];return Lh(this.container)&&e.reverse(),t==null?void 0:t.replace(/leading/gi,e[0]).replaceAll(/trailing/gi,e[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((t=this.dockOptions)==null?void 0:t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(t){var d;if(t!=="auto")return t;const e=(d=this.viewModel)==null?void 0:d.view,i=Lh(this.container)?"top-left":"top-right";if(!e)return i;const r=e.padding||{left:0,right:0,top:0,bottom:0},n=e.width-r.left-r.right,{breakpoints:l}=e;return l&&n<=l.xsmall?"bottom-center":i}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:e}=this.viewModel,{width:i}=this._containerNode.getBoundingClientRect(),r=this._calculatePositionStyle(e,i);r&&Object.assign(this._containerNode.style,r)}_calculateFullWidth(t){const{currentAlignment:e,_pointerOffsetInPx:i}=this;return e==="top-left"||e==="bottom-left"||e==="top-right"||e==="bottom-right"?t+i:t}_calculateAlignmentPosition(t,e,i,r){const{currentAlignment:n,_pointerOffsetInPx:l}=this;if(!i)return;const{padding:d}=i,y=r/2,v=i.height-e,x=i.width-t;return n==="bottom-center"?{top:e+l-d.top,left:t-y-d.left}:n==="top-left"?{bottom:v+l-d.bottom,right:x+l-d.right}:n==="bottom-left"?{top:e+l-d.top,right:x+l-d.right}:n==="top-right"?{bottom:v+l-d.bottom,left:t+l-d.left}:n==="bottom-right"?{top:e+l-d.top,left:t+l-d.left}:n==="top-center"?{bottom:v+l-d.bottom,left:t-y-d.left}:void 0}_calculatePositionStyle(t,e){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(t==null||!e)return;const n=this._calculateFullWidth(e),l=this._calculateAlignmentPosition(t.x,t.y,r,n);return l?{top:l.top!==void 0?`${l.top}px`:"auto",left:l.left!==void 0?`${l.left}px`:"auto",bottom:l.bottom!==void 0?`${l.bottom}px`:"auto",right:l.right!==void 0?`${l.right}px`:"auto"}:void 0}_viewChange(t,e){t&&e&&(this.close(),this.clear())}_viewReadyChange(t,e){if(t){const i=this.get("viewModel.view");this._wireUpView(i)}else e&&(this.close(),this.clear())}_wireUpView(t){if(this._destroySpinner(),!t)return;const{spinnerEnabled:e}=this;e&&this._createSpinner(t),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,e,i){const[r,n]=t,[l,d]=e,{width:y=0,height:v=0}=i??{};return r<=y&&l>y||r>y&&l<=y||n<=v&&d>v||n>v&&d<=v}_updateDockEnabledForViewSize(t,e){if(!t||!e)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,l=[],d=[];l[0]=t[0]-r,l[1]=t[1]-n,d[0]=e[0]-r,d[1]=e[1]-n;const{dockOptions:y}=this,v=y.breakpoint;this._dockingThresholdCrossed(l,d,v)&&this._setDockEnabledForViewSize(y),this._setCurrentDockPosition()}_focusDockButtonNode(t){this._focusDockButton&&(this._focusDockButton=!1,t.focus())}_closeButtonNodeUpdated(t){return this._focusClose?(this._focusClose=!1,void t.focus()):this._blurClose?(this._blurClose=!1,void t.blur()):void 0}_mainContainerNodeUpdated(t){return this._mainContainerNode=t,this._focusContainer?(this._focusContainer=!1,void t.focus()):this._blurContainer?(this._blurContainer=!1,void t.blur()):void 0}_featureMenuNodeUpdated(t){if(this._featureMenuNode=t,!t||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const e=t.querySelectorAll("li");e.length&&e[0].focus()}_actionsMenuNodeUpdated(t){if(this._actionsMenuNode=t,!t||!this._focusFirstAction)return;this._focusFirstAction=!1;const e=t.querySelectorAll("li");e.length&&e[0].focus()}_focusFeatureMenuButtonNode(t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,t.focus())}_focusActionsMenuButtonNode(t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,t.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:e}=this;if(!e)return;const i=e.active&&!t;e.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(t){var y,v;const e=t.breakpoint,i=(v=(y=this.viewModel)==null?void 0:y.view)==null?void 0:v.ui;if(!i)return!1;const{width:r,height:n}=i;if(isNaN(r)||isNaN(n)||!e)return!1;const l=e.hasOwnProperty("width")&&r<=(e.width??0),d=e.hasOwnProperty("height")&&n<=(e.height??0);return l||d}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}_getPageText(t,e){return this.featureNavigationVisible?Oo(this.messages.pageText,{index:e+1,total:t}):null}_destroySpinner(){var t,e;this._spinner&&((e=(t=this.view)==null?void 0:t.ui)==null||e.remove(this._spinner,DP),this._spinner.destroy(),this._spinner=null)}_createSpinner(t){t&&(this._spinner=new u2e({view:t}),t.ui.add(this._spinner,{key:DP,position:"manual",internal:!0}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const t=!this.featureMenuOpen;this._featureMenuOpenChanged(t),this.actionsMenuOpen=!1,this.featureMenuOpen=t}_toggleActionsMenu(){const t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(t),this.featureMenuOpen=!1,this.actionsMenuOpen=t}_triggerAction(t){const e=t.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(l=>l.uid===e),n=i.at(r);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(t){const e=yx(t.currentTarget);e==null||isNaN(e)||(this.viewModel.selectedFeatureIndex=e),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};function yx(t){return t==null?void 0:t["data-feature-index"]}g([S({readOnly:!0})],qe.prototype,"actionsMenuId",null),g([S({readOnly:!0})],qe.prototype,"actionsMenuButtonId",null),g([S({readOnly:!0})],qe.prototype,"featureMenuId",null),g([S({readOnly:!0})],qe.prototype,"titleId",null),g([S({readOnly:!0})],qe.prototype,"contentId",null),g([S({readOnly:!0})],qe.prototype,"hasContent",null),g([S({readOnly:!0})],qe.prototype,"featureNavigationVisible",null),g([S({readOnly:!0})],qe.prototype,"collapsible",null),g([S({readOnly:!0})],qe.prototype,"featureMenuVisible",null),g([S({readOnly:!0})],qe.prototype,"contentCollapsed",null),g([S({readOnly:!0})],qe.prototype,"dividedActions",null),g([S({readOnly:!0,dependsOn:["_flowItems.length"]})],qe.prototype,"_activeFlowItemWidget",null),g([S()],qe.prototype,"actions",null),g([S()],qe.prototype,"actionsMenuOpen",null),g([S()],qe.prototype,"alignment",void 0),g([S()],qe.prototype,"autoCloseEnabled",null),g([S()],qe.prototype,"autoOpenEnabled",null),g([S()],qe.prototype,"defaultPopupTemplateEnabled",null),g([S()],qe.prototype,"content",null),g([S()],qe.prototype,"collapsed",void 0),g([S()],qe.prototype,"collapseEnabled",void 0),g([S({readOnly:!0})],qe.prototype,"currentAlignment",null),g([S({readOnly:!0})],qe.prototype,"currentDockPosition",null),g([S()],qe.prototype,"dockOptions",null),g([S()],qe.prototype,"dockEnabled",void 0),g([S({readOnly:!0})],qe.prototype,"featureCount",null),g([S()],qe.prototype,"featureMenuOpen",null),g([S()],qe.prototype,"features",null),g([S()],qe.prototype,"goToOverride",null),g([S()],qe.prototype,"headingLevel",void 0),g([S()],qe.prototype,"highlightEnabled",null),g([S()],qe.prototype,"location",null),g([S()],qe.prototype,"label",null),g([S()],qe.prototype,"maxInlineActions",void 0),g([S(),Or("esri/widgets/Popup/t9n/Popup")],qe.prototype,"messages",void 0),g([S(),Or("esri/t9n/common")],qe.prototype,"messagesCommon",void 0),g([S()],qe.prototype,"promises",null),g([S({readOnly:!0})],qe.prototype,"selectedFeature",null),g([S()],qe.prototype,"selectedFeatureIndex",null),g([S({readOnly:!0})],qe.prototype,"selectedFeatureWidget",null),g([S()],qe.prototype,"spinnerEnabled",void 0),g([S()],qe.prototype,"title",null),g([S()],qe.prototype,"updateLocationEnabled",null),g([S()],qe.prototype,"view",null),g([S({type:TU}),mz(["triggerAction","trigger-action"])],qe.prototype,"viewModel",void 0),g([S()],qe.prototype,"visible",null),g([S()],qe.prototype,"visibleElements",void 0),g([St("visibleElements")],qe.prototype,"castVisibleElements",null),g([kr()],qe.prototype,"_close",null),g([kr()],qe.prototype,"_toggleDockEnabled",null),g([kr()],qe.prototype,"_toggleFeatureMenu",null),g([kr()],qe.prototype,"_toggleActionsMenu",null),g([kr()],qe.prototype,"_triggerAction",null),g([kr()],qe.prototype,"_selectFeature",null),g([kr()],qe.prototype,"_next",null),g([kr()],qe.prototype,"_previous",null),qe=g([J("esri.widgets.Popup")],qe);const E_e=qe,NP=Object.freeze(Object.defineProperty({__proto__:null,default:E_e},Symbol.toStringTag,{value:"Module"}));function A_e(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(r,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Zb={exports:{}};Zb.exports,function(t,e){function i(){function n(c){if(typeof c=="number")return H.Uc.ah(c);if(c==null)return null;if(no[c]!=null)return H.Uc.ah(no[c]);throw Error("Unrecognised Unit Type")}function l(c){if(typeof c=="number")return H.Uc.ah(c);if(c==null)return null;if(cg[c]!=null)return H.Uc.ah(cg[c]);throw Error("Unrecognised Unit Type")}function d(c){if(c)switch(c){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function y(c,C,w,h){if(w==null||w.B())return null;switch(w.K()){case H.sn.Point:return c.exportPoint(C,w,h);case H.sn.Polygon:return c.exportPolygon(C,w,h);case H.sn.Polyline:return c.exportPolyline(C,w,h);case H.sn.MultiPoint:return c.exportMultipoint(C,w,h);case H.sn.Envelope:return c.exportExtent(C,w,h)}return null}function v(c,C,w,h){if(w.K()!==H.sn.Point)throw Error("Geometry not Point");return c.exportPoint(C,w,h)}function x(c,C,w){return c.convertToGEGeometry(C,w)}function $(c){var C=c.wkid;c=c.wkt;var w=Ja.get(C||c);return w==null&&(C!==-1&&C!=null?(w=H.Gg.create(C),Ja.set(C,w)):c&&(w=H.Gg.lP(c),Ja.set(c,w)),tu.has(C||c)&&w.QW(tu.get(C||c))),w}function E(c){var C;if(c==null)return null;var w=$(c);return c=w.Id(),w=w.Mn(),(C={}).tolerance=w,C.unitType=c==null?-1:c.pd,C.unitID=c==null?-1:c.Fc(),C.unitBaseFactor=c==null?0:c.ci,C.unitSquareDerivative=c==null?0:H.Uc.WF(c).Fc(),C}function k(c,C,w,h){return w==null?null:(w=H.ac.clip(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,w,C))}function P(c,C,w,h){w=H.ac.fl(x(c,Ie,w),x(c,Ie,h),$(C)),h=[];for(var a=0;a<w.length;a++)h.push(y(c,Ie,w[a],C));return h}function D(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.contains(x(c,Ie,w),x(c,Ie,h),$(C))}function L(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.wP(x(c,Ie,w),x(c,Ie,h),$(C))}function N(c,C,w,h,a){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.ub(x(c,Ie,w),x(c,Ie,h),$(C),n(a))}function B(c,C,w,h){return!(w==null&&h!=null||h==null&&w!=null)&&H.ac.Nb(x(c,Ie,w),x(c,Ie,h),$(C))}function W(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.OS(x(c,Ie,w),x(c,Ie,h),$(C))}function q(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.touches(x(c,Ie,w),x(c,Ie,h),$(C))}function Y(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.mY(x(c,Ie,w),x(c,Ie,h),$(C))}function ie(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.OP(x(c,Ie,w),x(c,Ie,h),$(C))}function se(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.yU(x(c,Ie,w),x(c,Ie,h),$(C))}function ue(c,C,w,h,a){if(w==null||h==null)throw Error("Illegal Argument Exception");return H.ac.tB(x(c,Ie,w),x(c,Ie,h),$(C),a)}function de(c,C,w){if(w==null)throw Error("Illegal Argument Exception");return H.ac.ZS(x(c,Ie,w),$(C))}function be(c,C,w){if(w==null)throw Error("Illegal Argument Exception");return w=H.ac.$B(x(c,Ie,w),$(C)),y(c,Ie,w,C)}function we(c,C,w,h){if(h===void 0&&(h=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var a=h,s=[];for(h=0;h<w.length;h++)s.push(x(c,Ie,w[h]));for(w=H.ac.eP(s,a),a=Array(w.length),h=0;h<w.length;h++)a[h]=y(c,Ie,w[h],C);return a}return h=H.ac.dP(x(c,Ie,w),$(C)),y(c,Ie,h,C)}function $e(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],s=0;s<w.length;s++)a.push(x(c,Ie,w[s]));for(w=H.ac.LP(a,x(c,Ie,h),$(C)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);return h}return s=H.ac.km(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,s,C)}function ke(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],s=0;s<w.length;s++)a.push(x(c,Ie,w[s]));for(w=H.ac.RX(a,x(c,Ie,h),$(C)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);return h}return s=H.ac.gp(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,s,C)}function Ge(c,C,w,h){if(w==null||h==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],s=0;s<w.length;s++)a.push(x(c,Ie,w[s]));for(w=H.ac.MS(a,x(c,Ie,h),$(C)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);return h}return s=H.ac.Fa(x(c,Ie,w),x(c,Ie,h),$(C)),y(c,Ie,s,C)}function Fe(c,C,w,h){if(w==null)return null;var a=[];if(Array.isArray(w)){if(w.length===0)return null;for(h=0;h<w.length;h++)a.push(x(c,Ie,w[h]))}else a.push(x(c,Ie,w)),h!=null&&a.push(x(c,Ie,h));return y(c,Ie,H.ac.fY(a,$(C)),C)}function ht(c,C,w,h,a,s,o,u){var p=0;if(s!=null)switch(s){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(w)){if(w==null)c=null;else if(w.length===0)c=[];else{var f=[];for(s=0;s<w.length;s++)f.push(x(c,Ie,w[s]));for(w=H.ac.wU(f,$(C),h,p,o,u,n(a)),h=Array(w.length),s=0;s<w.length;s++)h[s]=y(c,Ie,w[s],C);c=h}return c}return w=H.ac.offset(x(c,Ie,w),$(C),h,p,o,u,n(a)),y(c,Ie,w,C)}function ni(c,C,w,h,a,s){if(s===void 0&&(s=!1),Array.isArray(w)){if(!Array.isArray(h)){for(var o=[],u=0;u<w.length;u++)o.push(h);h=o}if(h.length!=w.length){if(h.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(u=0;u<w.length;u++)h[u]===void 0?o.push(p):(o.push(h[u]),p=h[u]);h=o}return Xe(c,C,w,h,a,!1,s,"geodesic",NaN)}return w=H.ac.buffer(x(c,Ie,w),$(C),h,n(a),!1,0,NaN),y(c,Ie,w,C)}function Ze(c,C,w,h,a,s,o,u){if(Array.isArray(w)){if(!Array.isArray(h)){for(var p=[],f=0;f<w.length;f++)p.push(h);h=p}if(h.length!==w.length){if(h.length===0)throw Error("Illegal Argument Exception");p=[];var m=0;for(f=0;f<w.length;f++)h[f]===void 0?p.push(m):(p.push(h[f]),m=h[f]);h=p}return Xe(c,C,w,h,a,!0,s,o,u)}return o===void 0&&(o=NaN),w=H.ac.buffer(x(c,Ie,w),$(C),h,n(a),!0,d(s),o),y(c,Ie,w,C)}function Xe(c,C,w,h,a,s,o,u,p){if(p===void 0&&(p=NaN),w==null)return null;if(w.length===0)return[];for(var f=[],m=0;m<w.length;m++)f.push(x(c,Ie,w[m]));for(w=H.ac.HN(f,$(C),h,n(a),s,o,d(u),p),h=Array(w.length),m=0;m<w.length;m++)h[m]=y(c,Ie,w[m],C);return h}function oi(c,C,w,h,a){var s;return a===void 0&&(a=!0),w=H.ac.iz(x(c,Ie,w),x(c,Ie,h),a),(s={}).coordinate=v(c,Ie,w.az(),C),s.distance=w.cz(),s.isRightSide=w.Nz(),s.vertexIndex=w.Va(),s.isEmpty=w.B(),s}function to(c,C,w,h){var a;return w=H.ac.jz(x(c,Ie,w),x(c,Ie,h)),(a={}).coordinate=v(c,Ie,w.az(),C),a.distance=w.cz(),a.isRightSide=w.Nz(),a.vertexIndex=w.Va(),a.isEmpty=w.B(),a}function io(c,C,w,h,a,s){var o;for(w=H.ac.kz(x(c,Ie,w),x(c,Ie,h),a,s),h=[],a=0;a<w.length;a++)w[a].B()===!1&&h.push(((o={}).coordinate=v(c,Ie,w[a].az(),C),o.distance=w[a].cz(),o.isRightSide=w[a].Nz(),o.vertexIndex=w[a].Va(),o.isEmpty=w[a].B(),o));return h}function Es(c,C,w,h,a,s){return w=H.ac.LQ(x(c,Ie,w),$(C),h,a,n(s)),y(c,Ie,w,C)}function vn(c,C,w,h,a){return w=H.ac.Sr(x(c,Ie,w),$(C),h,n(a)),y(c,Ie,w,C)}function Yd(c,C,w,h,a,s){return s===void 0&&(s=0),w=H.ac.Ry(x(c,Ie,w),$(C),h,n(a),s),y(c,Ie,w,C)}function Tf(c,C,w,h){if(w==null)throw Error("Illegal Argument Exception");return H.ac.EU(x(c,Ie,w),$(C),l(h))}function If(c,C,w,h){if(w==null)throw Error("Illegal Argument Exception");return H.ac.FU(x(c,Ie,w),$(C),n(h))}function lg(c,C,w,h,a){if(w==null)throw Error("Illegal Argument Exception");return H.ac.RQ(x(c,Ie,w),$(C),l(h),d(a))}function r3(c,C,w,h,a){if(w==null)throw Error("Illegal Argument Exception");return H.ac.UQ(x(c,Ie,w),$(C),n(h),d(a))}function s3(c){H.IL.bind(c)}function n3(c,C,w,h,a){var s=null,o=null;if(h){if(!a)throw H.i.O("AOI missing Spatial Reference");s=x(c,Ie,h),o=$(a).hh()}return(c=H.iu.SR($(C).hh(),$(w).hh(),s,o))!==null?c:null}function o3(c,C,w,h,a){var s=null,o=null;if(h){if(!a)throw H.i.O("AOI missing Spatial Reference");s=x(c,Ie,h),o=$(a).hh()}return H.iu.TR($(C).hh(),$(w).hh(),s,o)}function a3(c,C,w,h,a,s){if(a===void 0&&(a=null),s===void 0&&(s=null),s){var o=new H.tC;o.Xu=s.densificationStep,o.Lr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&o.KW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&o.LW(s.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(C.length===0)return[];if(a){if(!(s=a.getCachedGeTransformation(w,h)))e:{if(s=a,a=null,s){var u=s.getGTListEntry();if(u!==null){a=new H.rC(null);for(var p=0,f=u.steps;p<f.length;p++){u=f[p];var m=new H.Cx(u.geogtran);u.isInverse&&m.Lz(),a.add(m)}o=H.xr.Pr($(w).hh(),$(h).hh(),a,o),s.assignCachedGe(w,h,o),s=o;break e}}if(a===null&&s&&s.steps&&0<s.steps.length){for(a=new H.rC(null),p=0,f=s.steps;p<f.length;p++)(u=f[p]).wkid!=-1&&u.wkid!=null?a.add(H.Cx.create(u.wkid,u.isInverse)):a.add(H.Cx.pP(u.wkt,u.isInverse));o=H.xr.Pr($(w).hh(),$(h).hh(),a,o),s.assignCachedGe(w,h,o),s=o}else s=H.xr.Pr($(w).hh(),$(h).hh(),a,o)}for(w=[],a=0;a<C.length;a++)o=C[a],w.push(ug(c,o,h,s))}else for(s=H.xr.Pr($(w).hh(),$(h).hh(),null),w=[],a=0;a<C.length;a++)o=C[a],w.push(ug(c,o,h,s));return w}function ug(c,C,w,h){return C=H.ac.Bh(x(c,Ie,C),h),y(c,Ie,C,w)}function l3(c,C){c!=null&&(c=c.wkid||c.wkt,tu.has(c),tu.set(c,C),Ja.has(c)&&Ja.delete(c))}function u3(c){c!=null&&(c=c.wkid||c.wkt,tu.has(c)&&(tu.delete(c),Ja.has(c)&&Ja.delete(c)))}function h3(c,C,w,h){if(w==null||h==null)return[];var a=[],s=0;for(w=H.ac.LS(x(c,Ie,w),x(c,Ie,h),$(C))||[];s<w.length;s++)a.push(y(c,Ie,w[s],C));return a}var Yi,H,Gr,hg,At=this&&this.__extends||function(){function c(C,w){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,a){h.__proto__=a}||function(h,a){for(var s in a)a.hasOwnProperty(s)&&(h[s]=a[s])})(C,w)}return function(C,w){function h(){this.constructor=C}c(C,w),C.prototype=w===null?Object.create(w):(h.prototype=w.prototype,new h)}}();(function(c){var C;(C=c.sn||(c.sn={}))[C.Unknown=0]="Unknown",C[C.Point=33]="Point",C[C.Line=322]="Line",C[C.Envelope=197]="Envelope",C[C.MultiPoint=550]="MultiPoint",C[C.Polyline=1607]="Polyline",C[C.Polygon=1736]="Polygon",function(h){h[h.enumMild=0]="enumMild",h[h.enumMedium=1]="enumMedium",h[h.enumHot=2]="enumHot"}(c.TK||(c.TK={}));var w=function(){function h(){this.description=null,this.QA=0}return h.prototype.K=function(){return 0},h.prototype.Eb=function(){return-1},h.prototype.Pf=function(a){this.wc(),a!=this.description&&this.un(a)},h.prototype.un=function(){},h.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=c.fe.xR(this.description,a))!=this.description&&this.un(a)},h.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},h.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=c.fe.wR(this.description,a),this.un(a))},h.prototype.Vg=function(){return null},h.prototype.dn=function(){},h.prototype.A=function(){},h.prototype.So=function(){},h.prototype.yc=function(a){this.A(a)},h.prototype.B=function(){return!0},h.prototype.Pa=function(){},h.prototype.Pc=function(){},h.prototype.Ja=function(){return null},h.prototype.copyTo=function(){},h.prototype.He=function(){return 0},h.prototype.Rb=function(){return 0},h.prototype.dG=function(){return this.hasAttribute(1)},h.uf=function(a){return 1+((192&a)>>6)>>1},h.Tn=function(a){return(32&a)!=0},h.PS=function(a){return(128&a)!=0},h.zd=function(a){return(256&a)!=0},h.zj=function(a){return(512&a)!=0},h.Ic=function(a){return(1024&a)!=0},h.prototype.Qf=function(){var a=this.Ja();return this.copyTo(a),a},h.prototype.ng=function(){return null},h.kg=function(a){var s=a.Ja();return a.copyTo(s),s},h.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},h.zx=function(a){var s=a.K();if(h.zj(s))return a.I();if(a.B())return 0;if(s==197)return 4;if(s==33)return 1;if(h.zd(s))return 2;throw c.i.ga("missing type")},h}();c.ba=w})(H||(H={})),Gr=H||(H={}),hg=function(){function c(){this.y=this.x=0}return c.construct=function(C,w){var h=new c;return h.x=C,h.y=w,h},c.cl=function(C){var w=new c;return w.x=C.x,w.y=C.y,w},c.prototype.na=function(C,w){this.x=C,this.y=w},c.prototype.N=function(C){this.x=C.x,this.y=C.y},c.prototype.hq=function(C,w){return this.x===C&&this.y===w},c.prototype.Mz=function(C){return 2220446049250313e-31>=Math.abs(this.x-C.x)&&2220446049250313e-31>=Math.abs(this.y-C.y)},c.prototype.rb=function(C){return this.x===C.x&&this.y===C.y},c.prototype.Nb=function(C){return C==this||C instanceof c&&this.x==C.x&&this.y==C.y},c.prototype.sub=function(C){this.x-=C.x,this.y-=C.y},c.prototype.vc=function(C,w){this.x=C.x-w.x,this.y=C.y-w.y},c.prototype.add=function(C,w){w!==void 0?(this.x=C.x+w.x,this.y=C.y+w.y):(this.x+=C.x,this.y+=C.y)},c.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},c.prototype.nt=function(C){this.x=-C.x,this.y=-C.y},c.prototype.IS=function(C,w,h){this.x=C.x*(1-h)+w.x*h,this.y=C.y*(1-h)+w.y*h},c.prototype.Dt=function(C,w){this.x=this.x*C+w.x,this.y=this.y*C+w.y},c.prototype.BW=function(C,w,h){this.x=w.x*C+h.x,this.y=w.y*C+h.y},c.prototype.scale=function(C){this.x*=C,this.y*=C},c.prototype.compare=function(C){return this.y<C.y?-1:this.y>C.y?1:this.x<C.x?-1:this.x>C.x?1:0},c.prototype.normalize=function(){var C=this.length();C==0&&(this.x=1,this.y=0),this.x/=C,this.y/=C},c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.Uk=function(){return this.x*this.x+this.y*this.y},c.ub=function(C,w){return Math.sqrt(this.zc(C,w))},c.Jy=function(C,w,h,a){return C-=h,w-=a,Math.sqrt(C*C+w*w)},c.prototype.Sh=function(C){return this.x*C.x+this.y*C.y},c.prototype.aD=function(C){return Math.abs(this.x*C.x)+Math.abs(this.y*C.y)},c.prototype.yi=function(C){return this.x*C.y-this.y*C.x},c.prototype.Ct=function(C,w){var h=-this.x*w+this.y*C;this.x=this.x*C+this.y*w,this.y=h},c.prototype.Jv=function(){var C=this.x;this.x=-this.y,this.y=C},c.prototype.HG=function(C){this.x=-C.y,this.y=C.x},c.prototype.cr=function(){var C=this.x;this.x=this.y,this.y=-C},c.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},c.pu=function(C,w){var h=C.su(),a=w.su();return a==h?0>(C=C.yi(w))?1:0<C?-1:0:h<a?-1:1},c.zc=function(C,w){var h=C.x-w.x;return h*h+(C=C.y-w.y)*C},c.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},c.prototype.Sc=function(){this.y=this.x=NaN},c.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},c.prototype.offset=function(C,w){var h=c.ub(C,w),a=c.construct(this.x,this.y);if(h==0)return c.ub(a,C);var s=new c;return s.N(w),s.sub(C),a.sub(C),a.yi(s)/h},c.Wq=function(C,w,h){var a=new Gr.Xb;a.set(w.x),a.sub(C.x);var s=new Gr.Xb;s.set(h.y),s.sub(C.y);var o=new Gr.Xb;o.set(w.y),o.sub(C.y);var u=new Gr.Xb;return u.set(h.x),u.sub(C.x),a.Bg(s),o.Bg(u),a.sub(o),a.rs()?(a=new Gr.jp(w.x),s=new Gr.jp(C.x),o=new Gr.jp(C.y),a=a.kt(s),C=(C=new Gr.jp(h.y)).kt(o),w=(w=new Gr.jp(w.y)).kt(o),h=(h=new Gr.jp(h.x)).kt(s),a=a.nr(C),w=w.nr(h),(a=a.nr(w)).iT()?-1:a.aS()?1:0):0>(h=a.value())?-1:0<h?1:0},c.prototype.dc=function(){return Gr.P.wj(Gr.P.wj())},c}(),Gr.h=hg,function(c){var C=function(){function w(h){this.Ay=this.Ot=0,this.KX=h}return w.prototype.reset=function(){this.Ay=this.Ot=0},w.prototype.add=function(h){h-=this.Ay;var a=this.Ot+h;this.Ay=a-this.Ot-h,this.Ot=a},w.prototype.sub=function(h){this.add(-h)},w.prototype.tm=function(){return this.KX+this.Ot},w}();c.Ex=C,c.mc=function(){function w(){}return w.En=function(h,a){return 0<=a?Math.abs(h):-Math.abs(h)},w.sign=function(h){return 0>h?-1:0<h?1:0},w.MK=function(h){return h-360*Math.floor(h/360)},w.round=function(h){return Math.floor(h+.5)},w.ox=function(h){return h*h},w.jq=function(h,a,s){return .5>=s?h+(a-h)*s:a-(a-h)*(1-s)},w.JG=function(h,a,s,o){.5>=s?(o.x=h.x+(a.x-h.x)*s,o.y=h.y+(a.y-h.y)*s):(o.x=a.x-(a.x-h.x)*(1-s),o.y=a.y-(a.y-h.y)*(1-s))},w.gT=function(h,a,s,o,u,p){.5>=u?(p.x=h+(s-h)*u,p.y=a+(o-a)*u):(p.x=s-(s-h)*(1-u),p.y=o-(o-a)*(1-u))},w}()}(H||(H={})),function(c){var C=function(w){function h(){var a=w.call(this)||this;return a.ta=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return At(h,w),h.prototype.bc=function(){return c.h.construct(this.ta,this.oa)},h.prototype.$p=function(a){a.x=this.ta,a.y=this.oa},h.prototype.Ec=function(a){this.gm(0,a)},h.prototype.UB=function(a,s){this.gm(0,c.h.construct(a,s))},h.prototype.Vo=function(a){this.cD(0,a)},h.prototype.setStart=function(a){this.pD(0,a)},h.prototype.yv=function(a,s){return this.Pd(0,a,s)},h.prototype.TB=function(a,s,o){this.vn(0,a,s,o)},h.prototype.xc=function(){return c.h.construct(this.qa,this.ma)},h.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},h.prototype.Rc=function(a){this.gm(1,a)},h.prototype.Sl=function(a,s){this.gm(1,c.h.construct(a,s))},h.prototype.Ro=function(a){this.cD(1,a)},h.prototype.setEnd=function(a){this.pD(1,a)},h.prototype.jv=function(a,s){return this.Pd(1,a,s)},h.prototype.JB=function(a,s,o){this.vn(1,a,s,o)},h.prototype.Eb=function(){return 1},h.prototype.B=function(){return this.Bc()},h.prototype.Pa=function(){},h.prototype.He=function(){return 0},h.prototype.Fa=function(a,s,o,u,p){return this.FM(a,s,o,u,p)},h.prototype.isIntersecting=function(a,s){return this.Br(a,s,!1)!=0},h.prototype.ss=function(a,s){return this.tu(a,s,!1)},h.prototype.tu=function(){return null},h.prototype.Bc=function(){return!1},h.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=c.P.mg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var s=this.la.slice(0),o=this.la.length;o<2*a;o++)s[o]=0;this.la=s}},h.bM=function(a,s,o){if(0<o)var u=0;for(var p=0;p<o;p++)s[0+u]=a[0],u++},h.prototype.gm=function(a,s){a!=0?(this.qa=s.x,this.ma=s.y):(this.ta=s.x,this.oa=s.y)},h.prototype.un=function(a){if(this.la!=null){for(var s=c.fe.Kw(a,this.description),o=[],u=h.Ig(this.description,0),p=h.Ig(this.description,1),f=h.Ig(a,0),m=h.Ig(a,1),b=0,_=1,M=a.Ba;_<M;_++){var T=a.ld(_),A=c.sa.Wa(T);if(s[_]==-1){var O=c.sa.te(T);for(T=0;T<A;T++)o[f+b]=O,o[m+b]=O,b++}else for(O=this.description.bk(s[_])-2,T=0;T<A;T++)o[f+b]=this.la[u+O],o[m+b]=this.la[p+O],b++,O++}this.la=o}this.description=a},h.prototype.cD=function(a,s){if(this.Bc())throw c.i.ga("empty geometry");s.Pf(this.description),s.Bc()&&s.wn();for(var o=0;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=0,f=c.sa.Wa(u);p<f;p++){var m=this.Pd(a,u,p);s.setAttribute(u,p,m)}},h.prototype.pD=function(a,s){if(this.wc(),s.Bc())throw c.i.ga("empty geometry");for(var o=s.description,u=0,p=o.Ba;u<p;u++)for(var f=o.Fd(u),m=c.sa.Wa(f),b=0;b<m;b++){var _=s.Vc(f,b);this.vn(a,f,b,_)}},h.prototype.Pd=function(a,s,o){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.ta;if(o>=c.sa.Wa(s))throw c.i.de();var u=this.description.Rf(s);return 0<=u?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[h.Ig(this.description,a)+this.description.bk(u)-2+o]):c.sa.te(s)},h.prototype.vn=function(a,s,o,u){if(this.wc(),o>=c.sa.Wa(s))throw c.i.de();var p=this.description.Rf(s);0>p&&(this.se(s),p=this.description.Rf(s)),s==0?a!=0?o!=0?this.ma=u:this.qa=u:o!=0?this.oa=u:this.ta=u:(this.la==null&&this.$x(this.description.Be.length-2),this.la[h.Ig(this.description,a)+this.description.bk(p)-2+o]=u)},h.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();a.description=this.description,a.$x(this.description.Be.length-2),h.bM(this.la,a.la,2*(this.description.Be.length-2)),a.ta=this.ta,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.qp(a)},h.prototype.Vg=function(a,s){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,s),o.wa=o.pa,o.Nk(this.Pd(1,a,s)),o)},h.prototype.UI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Nk(this.Pd(1,0,0)))},h.prototype.Vw=function(a,s){s.Pf(this.description),s.Db(this.ic(a));for(var o=1,u=this.description.Ba;o<u;o++)for(var p=this.description.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++){var b=this.Vc(a,p,m);s.setAttribute(p,m,b)}},h.prototype.AM=function(a){if(this.description!=a.description||this.ta!=a.ta||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var s=0;s<2*(this.description.Be.length-2);s++)if(this.la[s]!=a.la[s])return!1;return!0},h.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},h.prototype.reverse=function(){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var s=this.description.Ba;a<s;a++)for(var o=this.description.ld(a),u=0,p=c.sa.Wa(o);u<p;u++){var f=this.Pd(0,o,u),m=this.Pd(1,o,u);this.vn(0,o,u,m),this.vn(1,o,u,f)}},h.prototype.Br=function(a,s,o){var u=a.K();if(this.K()===322){if(u==322)return c.zb.JM(this,a,s,o);throw c.i.Ra()}throw c.i.Ra()},h.prototype.FM=function(a,s,o,u,p){var f=a.K();if(this.K()===322){if(f==322)return c.zb.Yx(this,a,s,o,u,p);throw c.i.Ra()}throw c.i.Ra()},h.prototype.Sx=function(){return null},h.Ig=function(a,s){return s*(a.Be.length-2)},h.prototype.ic=function(a,s){if(s===void 0)return s=new c.h,this.ic(a,s),s;c.mc.gT(this.ta,this.oa,this.qa,this.ma,a,s)},h.prototype.ge=function(){return null},h.prototype.$F=function(){return null},h.prototype.fq=function(){return null},h.prototype.Di=function(){return null},h.prototype.Rn=function(){return null},h.prototype.lg=function(){return null},h.prototype.Tx=function(a,s){return s!==void 0?this.ux(s)-this.ux(a):this.ux(a)},h.prototype.qp=function(){},h.prototype.fl=function(){return null},h.prototype.dh=function(){},h.prototype.Vc=function(){return null},h.prototype.Me=function(){return null},h.prototype.ux=function(){return null},h.prototype.IG=function(){return null},h.prototype.ub=function(a,s){if(!s&&this.Br(a,0,!1)!=0)return 0;s=17976931348623157e292;var o=this.bc(),u=a.ge(o,!1);return o.sub(a.ic(u)),(o=o.length())<s&&(s=o),o=this.xc(),u=a.ge(o,!1),o.sub(a.ic(u)),(o=o.length())<s&&(s=o),o=a.bc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<s&&(s=o),o=a.xc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<s&&(s=o),s},h.prototype.ng=function(){return c.si.im(this,null)},h}(c.ba);c.NC=C}(H||(H={})),new H.h,function(c){var C;(C=c.VK||(c.VK={}))[C.Unknown=-1]="Unknown",C[C.Not=0]="Not",C[C.Weak=1]="Weak",C[C.Strong=2]="Strong",function(h){h[h.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",h[h.IsWeakSimple=2]="IsWeakSimple",h[h.IsStrongSimple=4]="IsStrongSimple",h[h.DirtyOGCFlags=8]="DirtyOGCFlags",h[h.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",h[h.DirtyExactIntervals=64]="DirtyExactIntervals",h[h.DirtyLooseIntervals=128]="DirtyLooseIntervals",h[h.DirtyIntervals=192]="DirtyIntervals",h[h.DirtyIsEnvelope=256]="DirtyIsEnvelope",h[h.DirtyLength2D=512]="DirtyLength2D",h[h.DirtyRingAreas2D=1024]="DirtyRingAreas2D",h[h.DirtyCoordinates=1993]="DirtyCoordinates",h[h.DirtyAllInternal=65535]="DirtyAllInternal",h[h.DirtyAll=16777215]="DirtyAll"}(c.HK||(c.HK={}));var w=function(h){function a(){var s=h.call(this)||this;return s.Jm=65535,s.xa=0,s.Rg=-1,s.Cb=null,s}return At(a,h),a.prototype.qp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.ck=function(s){return(this.Jm&s)!=0},a.prototype.Nf=function(s,o){this.Jm=o?this.Jm|s:this.Jm&~s},a.prototype.oc=function(){this.ck(32)&&this.XM()},a.prototype.vx=function(){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(s,o){if(0>s||s>=this.xa)throw c.i.ga("index out of bounds");this.oc(),o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.Fd(u),f=0,m=c.sa.Wa(p);f<m;f++){var b=this.Aa[u].gg(m*s+f);o.setAttribute(p,f,b)}},a.prototype.It=function(s,o){this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.Fd(p),m=c.sa.Wa(f),b=0;b<m;b++){var _=o.Vc(f,b);this.setAttribute(f,s,b,_)}},a.prototype.D=function(s,o){if(0>s||s>=this.I())throw c.i.de();this.oc(),this.Aa[0].uc(2*s,o)},a.prototype.Oa=function(s){var o=new c.h;return this.D(s,o),o},a.prototype.Hc=function(s,o){this.Aa[0].uc(2*s,o)},a.prototype.Db=function(s,o,u){if(0>s||s>=this.xa)throw c.i.de();this.oc();var p=this.Aa[0];u!==void 0?(p.write(2*s,o),p.write(2*s+1,u)):p.Vt(2*s,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw c.i.de();this.oc();var s=this.Aa[0],o=new c.Od;return o.x=s.read(NaN),o.y=s.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):c.sa.te(1),o},a.prototype.ZB=function(s){if(0>s||s>=this.I())throw c.i.de();this.se(1),this.oc(),this.Qc(1993);var o=this.Aa[0];o.write(2*s,(void 0).x),o.write(2*s+1,(void 0).y),this.Aa[1].rr(s,(void 0).z)},a.prototype.Vc=function(s,o,u){if(0>o||o>=this.xa)throw c.i.de();var p=c.sa.Wa(s);if(u>=p)throw c.i.de();this.oc();var f=this.description.Rf(s);return 0<=f?this.Aa[f].gg(o*p+u):c.sa.te(s)},a.prototype.tF=function(s,o){return this.Vc(s,o,void 0)},a.prototype.setAttribute=function(s,o,u,p){if(0>o||o>=this.xa)throw c.i.de();var f=c.sa.Wa(s);if(u>=f)throw c.i.de();this.se(s),this.oc(),s=this.description.Rf(s),this.Qc(1993),this.Aa[s].rr(o*f+u,p)},a.prototype.vb=function(s){return this.vx(),this.se(s),this.oc(),this.Aa[this.description.Rf(s)]},a.prototype.kn=function(s,o){if(o!=null&&c.sa.Vp(s)!=o.Vp())throw c.i.O();this.se(s),s=this.description.Rf(s),this.Aa==null&&(this.Aa=c.Zc.lI(this.description.Ba)),this.Aa[s]=o,this.Qc(16777215)},a.prototype.un=function(s){var o=null;if(this.Aa!=null){var u=c.fe.Kw(s,this.description);o=[];for(var p=0,f=s.Ba;p<f;p++)u[p]!=-1&&(o[p]=this.Aa[u[p]])}this.description=s,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.vD=function(s){this.yu(!0),s instanceof c.l?this.aa.A(s):this.aa.So(s)},a.prototype.WM=function(s){this.yu(!1),s instanceof c.l?this.aa.A(s):this.aa.So(s)},a.prototype.dn=function(s){this.yu(!0),this.aa.copyTo(s)},a.prototype.A=function(s){this.vD(s)},a.prototype.So=function(s){this.vD(s)},a.prototype.yc=function(s){this.WM(s)},a.prototype.Vg=function(s,o){var u=new c.Oc;return this.Bc()?(u.Pa(),u):(this.yu(!0),this.aa.Vg(s,o))},a.prototype.dc=function(){var s=this.description.dc();if(!this.Bc())for(var o=this.I(),u=0,p=this.description.Ba;u<p;u++)s=this.Aa[u].Cn(s,0,o*c.sa.Wa(this.description.Fd(u)));return s},a.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof a&&this.description.Nb(s.description))||this.Bc()!=s.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=s.I())return!1;for(var u=0;u<this.description.Ba;u++){var p=this.description.ld(u),f=this.vb(p),m=s.vb(p);if(!f.Nb(m,0,o*c.sa.Wa(p)))return!1}return!0},a.prototype.copyTo=function(s){if(s.K()!=this.K())throw c.i.O();this.ZC(s)},a.prototype.ZC=function(s){this.oc(),s.description=this.description,s.Aa=null;var o=this.description.Ba,u=null;if(this.Aa!=null){u=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(u[p]=this.Aa[p].BB(this.I()*c.sa.Wa(this.description.Fd(p))))}this.aa!=null?(s.aa=this.aa.Ja(),this.aa.copyTo(s.aa)):s.aa=null,s.xa=this.xa,s.Jm=this.Jm,s.Aa=u;try{this.qp(s)}catch{throw s.Pa(),c.i.hu()}},a.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(s){s==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=s,this.gM(),this.wc()},a.prototype.yu=function(s){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new c.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(s);for(var o=1;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=c.sa.Wa(u),f=this.Aa[o],m=0;m<p;m++){var b=new c.Oc;b.Pa();for(var _=0;_<this.xa;_++){var M=f.gg(_*p+m);b.$b(M)}this.aa.setInterval(u,m,b)}s&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var s=this.Aa[0],o=new c.h,u=0;u<this.xa;u++)s.uc(2*u,o),this.aa.$b(o)},a.prototype.Ap=function(s){s.Pa();for(var o=this.Aa[0],u=new c.h,p=0;p<this.xa;p++)o.uc(2*p,u),s.$b(u)},a.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=c.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var s=0;s<this.description.Ba;s++){var o=this.description.Fd(s);if(this.Aa[s]!=null){var u=c.sa.Wa(o),p=c.P.truncate(this.Aa[s].size/u);p<this.xa&&(p=c.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[s].resize(p*u,c.sa.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[s]=c.Zc.TE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(s){if(0>s)throw c.i.O();s!=this.xa&&(this.xa=s,this.Qc(65535))},a.prototype.qm=function(s){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=s)return this.ck(8)?1:2}return-1},a.prototype.Eh=function(s,o){if(this.LT=o,s==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),s==0)this.Nf(2,!1),this.Nf(4,!1);else if(s==1)this.Nf(2,!0),this.Nf(4,!1);else{if(s!=2)throw c.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.fD=function(s,o,u,p){if(0>s||s>=this.xa||0>o||o>=this.xa)throw c.i.ga("index out of bounds");this.oc(),p.Pf(this.description),p.B()&&p.wn();for(var f=0;f<this.description.Ba;f++)for(var m=this.description.Fd(f),b=0,_=c.sa.Wa(m);b<_;b++){var M=this.Aa[f].gg(_*s+b),T=this.Aa[f].gg(_*o+b);p.setAttribute(m,b,c.mc.jq(M,T,u))}},a.prototype.Ar=function(s,o){var u=this.Aa[0].o,p=u[2*s]-u[2*o];return s=u[2*s+1]-u[2*o+1],Math.sqrt(p*p+s*s)},a.prototype.FR=function(s){if(0>s||s>=this.xa)throw c.i.de();this.oc();var o=new c.Ta;o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.ld(u),f=0,m=c.sa.Wa(p);f<m;f++){var b=this.Aa[u].gg(m*s+f);o.setAttribute(p,f,b)}return o},a.prototype.Fh=function(s,o){if(0>s||s>=this.xa)throw c.i.de();if(o.B())throw c.i.O();this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.ld(p),m=c.sa.Wa(f),b=0;b<m;b++){var _=o.Vc(f,b);this.setAttribute(f,s,b,_)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(c.ba);c.Fx=w}(H||(H={})),function(c){var C=function(){function w(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new c.ad(7),this.ao=null}return w.prototype.Xo=function(h){this.ao=h},w.prototype.MP=function(){this.Tv=!1},w.prototype.Ee=function(h){this.ob.Ee(h)},w.prototype.Rr=function(h){var a=this.ob.De();return this.nX(a),this.qX(h,a),a},w.prototype.HP=function(h){this.ob.kd(h)},w.prototype.addElement=function(h,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.AD(h,0,a)},w.prototype.ED=function(h){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(h,1,this.Ne)},w.prototype.zn=function(h){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,s=this.ob.o;if(a==-1||s[7*a]==-1)return h=this.ob.Nl([-1,-1,-1,h,this.il(),-1,-1]),(s=this.ob.o)[7*a]=h,this.xp(-1,h,a,s),h;var o=a==-1?-1:s[7*a+2];return h=this.ob.Nl([-1,-1,o,h,this.il(),-1,-1]),(s=this.ob.o)[7*o+1]=h,this.ky(h,s),s[7*h+2]===-1&&(s[7*a]=h),this.xp(-1,h,a,s),h},w.prototype.Bu=function(h,a,s,o){var u=-1;u==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),u=this.Ne);var p=this.ob.o;if(u==-1||p[7*u]==-1)return s=this.ob.Nl([-1,-1,-1,s,this.il(),-1,-1]),(p=this.ob.o)[7*u]=s,this.xp(-1,s,u,p),s;if(o){o=a!=-1?this.ao.compare(this,s,a):-1;var f=h!=-1?this.ao.compare(this,s,h):1}else o=-1,f=1;if(o==0||f==0)return p[7*u+3]=o==0?a:h,-1;for((a!=-1&&h!=-1?this.Vm>c.P.XA(this.Vm)>>1:a!=-1)?h=a:o=f,a=!0;;){if(0>o){if((f=p[7*h])==-1){o=h,s=this.ob.Nl([-1,-1,h,s,this.il(),-1,-1]),(p=this.ob.o)[7*h]=s;break}h=f}else{if((f=p[7*h+1])==-1){o=p[7*h+6],s=this.ob.Nl([-1,-1,h,s,this.il(),-1,-1]),(p=this.ob.o)[7*h+1]=s;break}h=f}a&&(o*=-1,a=!1)}return this.ky(s,p),p[7*s+2]===-1&&(p[7*u]=s),this.xp(o,s,u,p),s},w.prototype.AF=function(){return this.dR(this.Ne)},w.prototype.wd=function(h,a){a=a==-1?this.Ne:a,this.Tv?this.GP(h,a):this.eY(h,a)},w.prototype.search=function(h,a){for(a=this.uv(a);a!=-1;){var s=this.ao.compare(this,h,a);if(s==0)return a;a=0>s?this.nl(a):this.Zp(a)}return-1},w.prototype.DW=function(h){for(var a=this.uv(-1),s=-1;a!=-1;){var o=h.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(s=a,a=this.Zp(a))}return s},w.prototype.pJ=function(h){for(var a=this.uv(-1),s=-1;a!=-1;){var o=h.compare(this,a);if(o==0)return a;0>o?(s=a,a=this.nl(a)):a=this.Zp(a)}return s},w.prototype.ka=function(h){return this.ob.U(h,3)},w.prototype.nl=function(h){return this.ob.U(h,0)},w.prototype.Zp=function(h){return this.ob.U(h,1)},w.prototype.getParent=function(h){return this.ob.U(h,2)},w.prototype.lb=function(h){return this.ob.U(h,6)},w.prototype.xe=function(h){return this.ob.U(h,5)},w.prototype.sc=function(h){return h==-1?this.ml(this.Ne):this.ml(h)},w.prototype.Gc=function(h){return h==-1?this.bs(this.Ne):this.bs(h)},w.prototype.UR=function(h){return h==-1?this.XF(this.Ne):this.XF(h)},w.prototype.Uj=function(h,a){this.IB(h,a)},w.prototype.uv=function(h){return h==-1?this.TF(this.Ne):this.TF(h)},w.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},w.prototype.size=function(h){return h==-1?this.VF(this.Ne):this.VF(h)},w.prototype.FN=function(h,a){for(var s=a[7*h],o=a[7*h+1],u=a[7*h+4];s!=-1||o!=-1;){var p=s!=-1?a[7*s+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,u<=Math.min(p,o))break;p<=o?this.nJ(s,a):this.mJ(h,a),s=a[7*h],o=a[7*h+1]}},w.prototype.ky=function(h,a){if(this.Tv)for(var s=a[7*h+4],o=a[7*h+2];o!=-1&&a[7*o+4]>s;)a[7*o]==h?this.nJ(h,a):this.mJ(o,a),o=a[7*h+2]},w.prototype.mJ=function(h,a){var s=a[7*h+1];a[7*s+2]=a[7*h+2],a[7*h+2]=s;var o=a[7*s];a[7*h+1]=o,o!=-1&&(a[7*o+2]=h),a[7*s]=h,(o=a[7*s+2])!=-1&&(a[7*o]==h?a[7*o]=s:a[7*o+1]=s)},w.prototype.nJ=function(h,a){var s=a[7*h+2];a[7*h+2]=a[7*s+2],a[7*s+2]=h;var o=a[7*h+1];a[7*s]=o,o!=-1&&(a[7*o+2]=s),a[7*h+1]=s,(o=a[7*h+2])!=-1&&(a[7*o]===s?a[7*o]=h:a[7*o+1]=h)},w.prototype.Rk=function(h,a){this.ob.T(h,2,a)},w.prototype.OB=function(h,a){this.ob.T(h,0,a)},w.prototype.SB=function(h,a){this.ob.T(h,1,a)},w.prototype.RB=function(h,a){this.ob.T(h,5,a)},w.prototype.fx=function(h,a){this.ob.T(h,6,a)},w.prototype.SJ=function(h,a){this.ob.T(a,0,h)},w.prototype.nX=function(h){this.ob.T(h,4,0)},w.prototype.qX=function(h,a){this.ob.T(a,5,h)},w.prototype.TF=function(h){return h==-1?-1:this.ob.U(h,0)},w.prototype.ml=function(h){return h==-1?-1:this.ob.U(h,1)},w.prototype.bs=function(h){return h==-1?-1:this.ob.U(h,2)},w.prototype.dR=function(h){return h==-1?-1:this.ob.U(h,3)},w.prototype.VF=function(h){return h==-1?0:this.ob.U(h,4)},w.prototype.XF=function(h){return this.ob.U(h,5)},w.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},w.prototype.hl=function(h){h!=-1&&this.ob.kd(h)},w.prototype.il=function(){return this.Vm=c.P.XA(this.Vm),1073741823&this.Vm},w.prototype.AD=function(h,a,s){var o=this.ob.o;if(s==-1||o[7*s]==-1)return h=this.ob.Nl([-1,-1,-1,h,this.il(),-1,-1]),(o=this.ob.o)[7*s]=h,this.xp(-1,h,s,o),h;for(var u=s==-1?-1:o[7*s];;){var p=a==-1?1:this.ao.compare(this,h,u);if(0>p){if((p=this.nl(u))==-1){a=u,h=this.ob.Nl([-1,-1,u,h,this.il(),-1,-1]),(o=this.ob.o)[7*u]=h;break}u=p}else{if(a==1&&p==0)return o[7*s+3]=u,-1;if((p=o[7*u+1])==-1){a=o[7*u+6],h=this.ob.Nl([-1,-1,u,h,this.il(),-1,-1]),(o=this.ob.o)[7*u+1]=h;break}u=p}}return this.ky(h,o),o[7*h+2]===-1&&(o[7*s]=h),this.xp(a,h,s,o),h},w.prototype.xp=function(h,a,s,o){if(h!=-1){var u=o[7*h+5];o[7*h+5]=a}else u=s==-1?-1:o[7*s+2];o[7*a+5]=u,u!=-1&&(o[7*u+6]=a),o[7*a+6]=h,h==(s==-1?-1:o[7*s+1])&&(o[7*s+1]=a),h==-1&&(o[7*s+2]=a),o[7*s+4]=(s==-1?0:o[7*s+4])+1},w.prototype.vB=function(h,a){var s=this.ob.o,o=s[7*h+5];h=s[7*h+6],o!=-1?s[7*o+6]=h:s[7*a+1]=h,h!=-1?s[7*h+5]=o:s[7*a+2]=o,s[7*a+4]=a===-1?-1:s[7*a+4]-1},w.prototype.eY=function(h,a){this.vB(h,a);var s=this.nl(h),o=this.Zp(h),u=this.getParent(h),p=h;if(s!=-1&&o!=-1){this.Vm=c.P.XA(this.Vm);var f=1073741823<this.Vm?this.lb(h):this.xe(h),m=this.getParent(f)==h;this.ob.bC(h,f,0),this.ob.bC(h,f,1),this.ob.bC(h,f,2),u!=-1?this.nl(u)==h?this.OB(u,f):this.SB(u,f):this.SJ(f,a),m?(s==f?(this.OB(f,h),this.Rk(o,f)):o==f&&(this.SB(f,h),this.Rk(s,f)),this.Rk(h,f),u=f):(this.Rk(s,f),this.Rk(o,f),u=this.getParent(h),p=f),s=this.nl(h),o=this.Zp(h),s!=-1&&this.Rk(s,h),o!=-1&&this.Rk(o,h)}s=s!=-1?s:o,u==-1?this.SJ(s,a):this.nl(u)==p?this.OB(u,s):this.SB(u,s),s!=-1&&this.Rk(s,u),this.hl(h)},w.prototype.GP=function(h,a){var s=this.ob.o;s[7*h+4]=2147483647;var o=-1,u=-1,p=a===-1?-1:s[7*a],f=p==h;if(f&&(o=s[7*p],u=s[7*p+1],o==-1&&u==-1))return this.vB(p,a),this.hl(p),void(s[7*a]=-1);this.FN(h,s),(p=s[7*h+2])!=-1&&(s[7*p]==h?s[7*p]=-1:s[7*p+1]=-1),this.vB(h,a),this.hl(h),f&&(s[7*a]=o==-1||s[7*o+2]!=-1?u:o)},w.prototype.IB=function(h,a){this.ob.T(h,3,a)},w}();c.$j=C}(H||(H={})),function(c){var C=function(){function w(h,a){h!==void 0&&this.L(h,a)}return w.prototype.L=function(h,a){this.pa=h,this.wa=a,this.normalize()},w.prototype.isIntersecting=function(h){return this.pa<=h.pa?this.wa>=h.pa:h.wa>=this.pa},w.prototype.move=function(h){this.B()||(this.pa+=h,this.wa+=h)},w.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var h=this.pa;this.pa=this.wa,this.wa=h}isNaN(this.wa)&&this.Pa()}},w.prototype.Pa=function(){this.wa=this.pa=NaN},w.prototype.B=function(){return isNaN(this.pa)},w.prototype.$b=function(h){typeof h=="number"?this.B()?this.wa=this.pa=h:this.Nk(h):h.B()||(this.B()?(this.pa=h.pa,this.wa=h.wa):(this.pa>h.pa&&(this.pa=h.pa),this.wa<h.wa&&(this.wa=h.wa),this.pa>this.wa&&this.Pa()))},w.prototype.Nk=function(h){h<this.pa?this.pa=h:h>this.wa&&(this.wa=h)},w.prototype.contains=function(h){return typeof h=="number"?h>=this.pa&&h<=this.wa:h.pa>=this.pa&&h.wa<=this.wa},w.prototype.Fa=function(h){this.B()||h.B()?this.Pa():(this.pa<h.pa&&(this.pa=h.pa),this.wa>h.wa&&(this.wa=h.wa),this.pa>this.wa&&this.Pa())},w.prototype.X=function(h){this.B()||(this.pa-=h,this.wa+=h,this.wa<this.pa&&this.Pa())},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},w.prototype.FB=function(h,a){h>a?(this.pa=a,this.wa=h):(this.pa=h,this.wa=a)},w.prototype.Kt=function(h){return c.P.Tk(h,this.pa,this.wa)},w.prototype.S=function(){return this.wa-this.pa},w.prototype.tf=function(){return .5*(this.pa+this.wa)},w.prototype.Nb=function(h){return h==this||h instanceof w&&(!(!this.B()||!h.B())||this.pa==h.pa&&this.wa==h.wa)},w.prototype.dc=function(){return c.P.wj(c.P.wj())},w}();c.Oc=C}(H||(H={})),function(c){var C=new c.Oc,w=new c.Oc,h=function(){this.oe=null,this.pb=-1,this.tb=new c.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new c.Oc,this.Wf.FB(0,0)};c.EY=h;var a=function(){function s(o,u,p){this.g=o,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=u,this.Pq=10*u,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=p,this.OA=new h,this.TH=new h,c.P.truncate(3*o.gd/2)}return s.prototype.hG=function(o,u,p,f){o.oe=f===null?null:f[p[5*u]],o.Vv=o.oe!=null,o.Vv||((f=p[5*u+2])!==-1&&this.g.hW(p[5*u],p[5*f],o.tb),o.oe=o.tb,o.Wf.FB(o.tb.ta,o.tb.qa),o.Wf.wa+=this.ra,o.tb.mI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.lA=(o.tb.qa-o.tb.ta)/(o.tb.ma-o.tb.oa)))},s.prototype.JO=function(o,u){var p=o.Br(u,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(ro),o.Vr(na),u.$p(so),u.Vr(oa),Ai.na(this.Mq,this.Jk),ro.rb(so)&&this.Jk==ro.y?0>na.compare(oa)?Ai.N(na):Ai.N(oa):ro.rb(oa)&&this.Jk==ro.y?0>na.compare(so)?Ai.N(na):Ai.N(so):so.rb(na)&&this.Jk==so.y?0>ro.compare(oa)?Ai.N(ro):Ai.N(oa):na.rb(oa)&&this.Jk==na.y&&(0>ro.compare(so)?Ai.N(ro):Ai.N(so)),o.Me(Ai.y,Ai.x)<u.Me(Ai.y,Ai.x)?-1:1)},s.prototype.HO=function(o,u){if(o.tb.oa==u.tb.oa&&o.tb.ta==u.tb.ta)return o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa?this.bA?this.Ly():0:this.KE(o,u);if(o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa)return this.JE(o,u);var p=this.JE(o,u);return o=this.KE(o,u),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},s.prototype.DO=function(o,u){if(o.qa>u.qa){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.qa-o.ta)<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 1},s.prototype.EO=function(o,u){if(o.ta<u.ta){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.ta-o.qa)<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi();return-1},s.prototype.FO=function(o,u){var p=new c.h;p.vc(u.xc(),u.bc()),p.cr(),p.normalize();var f=new c.h;f.vc(o.bc(),u.bc());var m=new c.h;m.vc(o.xc(),u.bc()),f=f.Sh(p),p=m.Sh(p),m=Math.abs(f);var b=Math.abs(p);if(m<b){if(m<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi()}else if(b<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 0>f&&0>p?-1:0<f&&0<p?1:this.zi()},s.prototype.IE=function(o,u){return o.oa==u.oa&&o.ta==u.ta?this.DO(o,u):o.ma==u.ma&&o.qa==u.qa?this.EO(o,u):this.FO(o,u)},s.prototype.GO=function(o,u){return o.ma==u.ma&&o.qa==u.qa&&o.oa==u.oa&&o.ta==u.ta?this.bA?this.Ly():0:this.zi()},s.prototype.JE=function(o,u){var p=1;if(o.tb.oa<u.tb.oa){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var m=o.ta-f.ta;u=u.lA*(o.oa-f.oa);var b=this.Pq;return m<u-b?-p:m>u+b?p:f.xi(o.ta,o.oa,this.ra)?this.zi():m<u?-p:p},s.prototype.KE=function(o,u){var p=1;if(u.tb.ma<o.tb.ma){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var m=o.qa-f.ta;u=u.lA*(o.ma-f.oa);var b=this.Pq;return m<u-b?-p:m>u+b?p:f.xi(o.qa,o.ma,this.ra)?this.zi():m<u?-p:p},s.prototype.Ly=function(){return this.sg=!0,this.Pi=new c.Nd(5,this.No,this.ht),-1},s.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new c.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},s.prototype.IO=function(o,u,p,f){if(this.sg)return-1;var m=this.JH==this.Jk&&this.IH==this.Mq;if(m&&o==this.Ys)var b=this.KH;else b=NaN,this.Ys=-1;return m&&u==this.Zs?m=this.LH:(m=NaN,this.Zs=-1),p.oe.UI(C),f.oe.UI(w),C.wa<w.pa?-1:w.wa<C.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(b)&&(this.Ys=o,this.KH=b=o=p.oe.Me(this.Jk,this.Mq)),isNaN(m)&&(this.Zs=u,this.LH=m=o=f.oe.Me(this.Jk,this.Mq)),Math.abs(b-m)<=this.ra?this.JO(p.oe,f.oe):b<m?-1:b>m?1:0)},s.prototype.Mr=function(){this.sg=!1},s.prototype.tm=function(){return this.Pi},s.prototype.VJ=function(o,u){this.Jk=o,this.Mq=u,this.ht=this.No=this.Zs=this.Ys=-1},s.prototype.compare=function(o,u,p){return this.sg?-1:(o=o.ka(p),this.Fm=p,this.ME(u,u,o,o))},s.prototype.ME=function(o,u,p,f){if(this.No==u)var m=this.OA;else this.No=u,m=this.OA,this.OA.pb=o,this.hG(m,u,this.g.ud.o,this.g.Te);if(b==null){this.ht=f;var b=this.TH;this.TH.pb=p,this.hG(b,f,this.g.ud.o,this.g.Te)}return m.Vv||b.Vv?this.IO(u,f,m,b):m.Wf.wa<b.Wf.pa?-1:b.Wf.wa<m.Wf.pa?1:(o=m.Xv?1:0,(o|=b.Xv?2:0)==0?this.HO(m,b):o==1?this.IE(m.tb,b.tb):o==2?-1*this.IE(b.tb,m.tb):this.GO(m.tb,b.tb))},s}();c.PC=a}(H||(H={})),function(c){var C=function(){function w(h,a){this.g=h,this.ra=a,this.sg=!1,this.No=-1,this.Wf=new c.Oc,this.Iq=new c.h,this.Iq.Sc(),this.je=new c.zb,this.Fm=-1,this.wA=17976931348623157e292}return w.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},w.prototype.Fh=function(h){this.Iq.N(h)},w.prototype.compare=function(h,a){return this.NE(a,h.ka(a))},w.prototype.NE=function(h,a){var s=this.g.cc(a)!=null;if(s||(this.g.fd(a,this.je),this.Wf.FB(this.je.ta,this.je.qa)),s)throw c.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=h,this.sg=!0,0;this.je.mI(),s=this.je.bc(),(a=new c.h).vc(this.je.xc(),s),a.cr();var o=new c.h;return o.vc(this.Iq,s),s=a.Sh(o),(s/=a.length())<10*-this.ra?-1:s>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((a=Math.abs(s))<this.wA&&(this.Fm=h,this.wA=a),this.sg=!0,a<.25*this.ra)?0:0>s?-1:1},w}();c.WL=C}(H||(H={})),function(c){function C(h,a,s,o){s=new Float64Array(h.subarray(s,o)),h.set(s,a)}var w=function(){function h(a){this.Pb=this.rk=!1,this.o=null;var s=a;2>s&&(s=2),this.o=new Float64Array(s),this.size=a}return h.prototype.rotate=function(a,s,o){if(this.Pb)throw c.i.ga("invalid_call");if(s<a||s>o||a>o)throw c.i.O();a!=s&&o!=s&&(this.pi(a,s-a,1),this.pi(s,o-s,1),this.pi(a,o-a,1))},h.rf=function(a,s){var o=new h(a),u=o.o;if(2>a&&(a=2),s!==0)for(var p=0;p<a;p++)u[p]=s;return o},h.Dn=function(a){var s=new h(0);return s.o=new Float64Array(a.o),s.size=a.size,s},h.Nr=function(a,s){var o=new h(0);return o.size=a.size,o.size>s&&(o.size=s),2>(s=o.size)&&(s=2),o.o=new Float64Array(s),o.o.set(a.o.length<=s?a.o:a.o.subarray(0,s),0),o},h.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},h.prototype.read=function(a){return this.o[a]},h.prototype.uc=function(a,s){s.x=this.o[a],s.y=this.o[a+1]},h.prototype.get=function(a){return this.o[a]},h.prototype.write=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.set=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.Vt=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},h.prototype.BB=function(a){return h.Nr(this,a)},h.prototype.gg=function(a){return this.read(a)},h.prototype.resize=function(a,s){if(s===void 0&&(s=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=s}this.size=a},h.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},h.prototype.rr=function(a,s){this.write(a,s)},h.prototype.Cn=function(a,s,o){for(var u=this.size;s<u&&s<o;s++)a=c.P.wj(this.read(s));return a},h.prototype.Nb=function(a,s,o){if(a==null||!(a instanceof h))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);s<o;s++)if(this.read(s)!=a.read(s))return!1;return!0},h.prototype.addRange=function(a,s,o,u,p){if(this.Pb)throw c.i.Hb();if(!u&&(1>p||o%p!=0))throw c.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(s,s+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var b=0;b<p;b++)this.o[f+m+b]=a.o[s+u+b]}}},h.prototype.On=function(a,s,o,u,p,f,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>f||u%f!=0))throw c.i.O();var b=this.size-m;if(b<u&&this.resize(this.size+u-b),C(this.o,a+u,a,a+(m-a)),this.o==s.o&&a<o&&(o+=u),p)this.o.set(s.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f)for(p-=f,b=0;b<f;b++)this.o[a+m+b]=s.o[o+p+b]},h.prototype.Dz=function(a,s,o,u,p,f){if(this.Pb)throw c.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,C(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=s[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=s[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},h.prototype.Nn=function(a,s,o,u){if(this.Pb)throw c.i.Hb();for(u-=a,C(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=s},h.prototype.xj=function(a,s,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.Wt=function(a,s,o,u,p,f){if(0>a||0>s||0>u||!p&&(0>=f||s%f!=0)||o.size<u+s)throw c.i.O();if(s!=0)if(this.size<s+a&&this.resize(s+a),o==this)this.Cr(a,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,s=c.P.truncate(s/f);p<s;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},h.prototype.Gn=function(a,s,o){if(this.Pb||a+s>this.size)throw c.i.Hb();0<o-(a+s)&&C(this.o,a,a+s,a+(o-(a+s))+s),this.size-=s},h.prototype.pi=function(a,s,o){if(this.Pb||1>o||s%o!=0)throw c.i.Hb();for(var u=s>>1,p=0;p<u;p+=o){s-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+s+f],this.o[a+s+f]=m}}},h.prototype.Yj=function(a,s,o){if(0>s||0>o||0>s||o+s>this.size)throw c.i.O();for(var u=s;u<s+o;u++)this.o[u]=a},h.prototype.Cr=function(a,s,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+s),a),u)))for(o=a,a=a+s-p,u=0,s=c.P.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},h.prototype.qC=function(a,s,o,u,p){if(0>a||0>s||0>u)throw c.i.O();if(s!=0)for(this.size<(s<<1)+a&&this.resize((s<<1)+a),p||(a+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},h.prototype.pC=function(a,s,o){if(0>a||0>s)throw c.i.O();if(s!=0){this.size<(s<<1)+a&&this.resize((s<<1)+a),s+=0;for(var u=0;u<s;u++)this.o[a]=o[u][0],this.o[a+1]=o[u][1],a+=2}},h.prototype.Xw=function(a,s,o,u,p){if(0>a||0>s||0>u||this.size<s+a)throw c.i.O();if(p)for(p=0;p<s;p++)o[u+p]=this.o[a+p];else for(u=u+s-1;a<s;a++)o[u]=this.o[a],u--},h.prototype.pB=function(a,s,o){if(0>a||0>s||this.size<(s>>1)+a)throw c.i.O();if(s!=0){s=0+s;for(var u=0;u<s;u++)o[u][0]=this.o[a],o[u][1]=this.o[a+1],a+=2}},h.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(a,s,o){Array.prototype.sort.call(this.o.subarray(a,s),o)},h.prototype.Vp=function(){return 1},h}();c.ce=w}(H||(H={})),function(c){function C(h,a,s,o){s=new Int32Array(h.subarray(s,o)),h.set(s,a)}c.nY=function(){this.random=1973};var w=function(){function h(a){this.Pb=this.rk=!1,this.o=null;var s=a;2>s&&(s=2),this.o=new Int32Array(s),this.size=a}return h.prototype.rotate=function(a,s,o){if(this.Pb)throw c.i.ga("invalid_call");if(s<a||s>o||a>o)throw c.i.O();a!=s&&o!=s&&(this.pi(a,s-a,1),this.pi(s,o-s,1),this.pi(a,o-a,1))},h.rf=function(a,s){var o=new h(a),u=o.o;if(2>a&&(a=2),s!==0)for(var p=0;p<a;p++)u[p]=s;return o},h.Dn=function(a){var s=new h(0);return s.o=new Int32Array(a.o),s.size=a.size,s},h.Nr=function(a,s){var o=new h(0);return o.size=a.size,o.size>s&&(o.size=s),2>(s=o.size)&&(s=2),o.o=new Int32Array(s),o.o.set(a.o.length<=s?a.o:a.o.subarray(0,s),0),o},h.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},h.prototype.read=function(a){return this.o[a]},h.prototype.uc=function(a,s){s.x=this.o[a],s.y=this.o[a+1]},h.prototype.get=function(a){return this.o[a]},h.prototype.write=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.set=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.Vt=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},h.prototype.BB=function(a){return h.Nr(this,a)},h.prototype.gg=function(a){return this.read(a)},h.prototype.resize=function(a,s){if(s===void 0&&(s=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=s}this.size=a},h.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},h.prototype.rr=function(a,s){this.write(a,s)},h.prototype.Cn=function(a,s,o){for(var u=this.size;s<u&&s<o;s++)a=c.P.Vh(this.read(s),a);return a},h.prototype.Nb=function(a,s,o){if(a==null||!(a instanceof h))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);s<o;s++)if(this.read(s)!=a.read(s))return!1;return!0},h.prototype.addRange=function(a,s,o,u,p){if(this.Pb)throw c.i.Hb();if(!u&&(1>p||o%p!=0))throw c.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(s,s+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var b=0;b<p;b++)this.o[f+m+b]=a.o[s+u+b]}}},h.prototype.On=function(a,s,o,u,p,f,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>f||u%f!=0))throw c.i.O();if(C(this.o,a+u,a,a+(m-a)),this.o==s.o&&a<o&&(o+=u),p)this.o.set(s.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f){p-=f;for(var b=0;b<f;b++)this.o[a+m+b]=s.o[o+p+b]}},h.prototype.Dz=function(a,s,o,u,p,f){if(this.Pb)throw c.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,C(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=s[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=s[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},h.prototype.Nn=function(a,s,o,u){if(this.Pb)throw c.i.Hb();for(u-=a,C(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=s},h.prototype.xj=function(a,s,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.Wt=function(a,s,o,u,p,f){if(0>a||0>s||0>u||!p&&(0>=f||s%f!=0)||o.size<u+s)throw c.i.O();if(s!=0)if(this.size<s+a&&this.resize(s+a),o==this)this.Cr(a,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,s=c.P.truncate(s/f);p<s;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},h.prototype.Gn=function(a,s,o){if(this.Pb||a+s>this.size)throw c.i.Hb();0<o-(a+s)&&C(this.o,a,a+s,a+(o-(a+s))+s),this.size-=s},h.prototype.pi=function(a,s,o){if(this.Pb||1>o||s%o!=0)throw c.i.Hb();for(var u=s>>1,p=0;p<u;p+=o){s-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+s+f],this.o[a+s+f]=m}}},h.prototype.Yj=function(a,s,o){if(0>s||0>o||0>s||o+s>this.size)throw c.i.O();for(var u=s;u<s+o;u++)this.o[u]=a},h.prototype.Cr=function(a,s,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+s),a),u)))for(o=a,a=a+s-p,u=0,s=c.P.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},h.prototype.qC=function(a,s,o,u,p){if(0>a||0>s||0>u)throw c.i.O();if(s!=0)for(this.size<(s<<1)+a&&this.resize((s<<1)+a),p||(a+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},h.prototype.Xw=function(a,s,o,u,p){if(0>a||0>s||0>u||this.size<s+a)throw c.i.O();if(p)for(p=0;p<s;p++)o[u+p]=this.o[a+p];else for(u=u+s-1;a<s;a++)o[u]=this.o[a],u--},h.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(a,s,o){10>s-a?h.mG(this.o,a,s,o):h.lB(this.o,a,s-1,o)},h.prototype.Vp=function(){return 2},h.prototype.Gc=function(){return this.o[this.size-1]},h.prototype.Jf=function(){this.resize(this.size-1)},h.prototype.XW=function(a){this.o[this.size-1]=a},h.prototype.NV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},h.prototype.gF=function(a){for(var s=0,o=this.size;s<o;s++)if(this.o[s]==a)return s;return-1},h.prototype.cG=function(a){return 0<=this.gF(a)},h.mG=function(a,s,o,u){for(var p=s;p<o;p++){for(var f=a[p],m=p-1;m>=s&&0<u(a[m],f);)a[m+1]=a[m],m--;a[m+1]=f}},h.sx=function(a,s,o){var u=a[o];a[o]=a[s],a[s]=u},h.lB=function(a,s,o,u){if(!(s>=o))for(;;){if(9>o-s){h.mG(a,s,o+1,u);break}var p=a[s];h.sx(a,s,o);for(var f=s,m=s;m<o;m++)0>=u(a[m],p)&&(h.sx(a,f,m),f+=1);h.sx(a,f,o),f-s<o-f?(h.lB(a,s,f-1,u),s=f+1):(h.lB(a,f+1,o,u),o=f-1)}},h}();c.ja=w}(H||(H={})),function(c){function C(h,a,s,o){s=new Int8Array(h.subarray(s,o)),h.set(s,a)}var w=function(){function h(a){this.o=null;var s=a;2>s&&(s=2),this.o=new Int8Array(s),this.size=a}return h.prototype.rotate=function(a,s,o){if(this.Pb)throw c.i.ga("invalid_call");if(s<a||s>o||a>o)throw c.i.O();a!=s&&o!=s&&(this.pi(a,s-a,1),this.pi(s,o-s,1),this.pi(a,o-a,1))},h.rf=function(a,s){var o=new h(a),u=o.o;if(2>a&&(a=2),s!==0)for(var p=0;p<a;p++)u[p]=s;return o},h.Dn=function(a){var s=new h(0);return s.o=new Int8Array(a.o),s.size=a.size,s},h.Nr=function(a,s){var o=new h(0);return o.size=a.size,o.size>s&&(o.size=s),2>(s=o.size)&&(s=2),o.o=new Int8Array(s),o.o.set(a.o.length<=s?a.o:a.o.subarray(0,s),0),o},h.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},h.prototype.read=function(a){return this.o[a]},h.prototype.uc=function(a,s){s.x=this.o[a],s.y=this.o[a+1]},h.prototype.get=function(a){return this.o[a]},h.prototype.write=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.set=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s},h.prototype.Vt=function(a,s){if(this.Pb)throw c.i.Hb();this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},h.prototype.BB=function(a){return h.Nr(this,a)},h.prototype.gg=function(a){return this.read(a)},h.prototype.resize=function(a,s){if(s===void 0&&(s=0),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=s}this.size=a},h.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},h.prototype.rr=function(a,s){this.write(a,s)},h.prototype.Cn=function(a,s,o){for(var u=this.size;s<u&&s<o;s++)a=c.P.Vh(this.read(s),a);return a},h.prototype.Nb=function(a,s,o){if(a==null||!(a instanceof h))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);s<o;s++)if(this.read(s)!=a.read(s))return!1;return!0},h.prototype.addRange=function(a,s,o,u,p){if(this.Pb)throw c.i.Hb();if(!u&&(1>p||o%p!=0))throw c.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(s,s+o),f);else{u=o;for(var m=0;m<o;m+=p){u-=p;for(var b=0;b<p;b++)this.o[f+m+b]=a.o[s+u+b]}}},h.prototype.On=function(a,s,o,u,p,f,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>f||u%f!=0))throw c.i.O();if(C(this.o,a+u,a,a+(m-a)),this.o==s.o&&a<o&&(o+=u),p)this.o.set(s.o.subarray(o,o+u),a);else for(p=u,m=0;m<u;m+=f){p-=f;for(var b=0;b<f;b++)this.o[a+m+b]=s.o[o+p+b]}},h.prototype.Nn=function(a,s,o,u){if(this.Pb)throw c.i.Hb();for(u-=a,C(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=s},h.prototype.Dz=function(a,s,o,u,p,f){if(this.Pb)throw c.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,C(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=s[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var m=u-1;p<u;++p)f=s[o+m],this.o[a++]=f.x,this.o[a++]=f.y,m--}},h.prototype.xj=function(a,s,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=s.x,this.o[a+1]=s.y},h.prototype.Wt=function(a,s,o,u,p,f){if(0>a||0>s||0>u||!p&&(0>=f||s%f!=0)||o.size<u+s)throw c.i.O();if(s!=0)if(this.size<s+a&&this.resize(s+a),o==this)this.Cr(a,s,u,p,f);else if(p)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+s-f,f==1)for(p=0;p<s;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,s=c.P.truncate(s/f);p<s;p++){for(var m=0;m<f;m++)this.o[a+m]=o.o[u+m];a+=f,u-=f}},h.prototype.Gn=function(a,s,o){if(this.Pb||a+s>this.size)throw c.i.Hb();0<o-(a+s)&&C(this.o,a,a+s,a+(o-(a+s))+s),this.size-=s},h.prototype.pi=function(a,s,o){if(this.Pb||1>o||s%o!=0)throw c.i.Hb();for(var u=s>>1,p=0;p<u;p+=o){s-=o;for(var f=0;f<o;f++){var m=this.o[a+p+f];this.o[a+p+f]=this.o[a+s+f],this.o[a+s+f]=m}}},h.prototype.Yj=function(a,s,o){if(0>s||0>o||0>s||o+s>this.size)throw c.i.O();for(var u=s;u<s+o;u++)this.o[u]=a},h.prototype.Cr=function(a,s,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+s),a),u)))for(o=a,a=a+s-p,u=0,s=c.P.truncate(s/2);u<s;u++){for(var f=0;f<p;f++){var m=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=m}o+=p,a-=p}},h.prototype.qC=function(a,s,o,u,p){if(0>a||0>s||0>u)throw c.i.O();if(s!=0)for(this.size<(s<<1)+a&&this.resize((s<<1)+a),p||(a+=s-1<<1),p=p?2:-2,s+=u;u<s;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},h.prototype.Xw=function(a,s,o,u,p){if(0>a||0>s||0>u||this.size<s+a)throw c.i.O();if(p)for(p=0;p<s;p++)o[u+p]=this.o[a+p];else for(u=u+s-1;a<s;a++)o[u]=this.o[a],u--},h.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},h.prototype.ix=function(){this.rk=this.Pb=!0},h.prototype.Wd=function(a,s,o){s=this.o.subarray(a,s),Array.prototype.sort.call(s,o),this.o.set(s,a)},h.prototype.uJ=function(a,s){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=s},h.prototype.FE=function(a,s){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~s},h.prototype.Vp=function(){return 1},h}();c.rn=w}(H||(H={})),function(c){c.Zc=function(){function C(){}return C.Or=function(w,h){return c.rn.rf(w,h)},C.Fn=function(w,h){return c.ce.rf(w,h)},C.kP=function(w,h,a){switch(w){case 1:w=c.ce.rf(h,a);break;case 2:w=c.ja.rf(h,a);break;case 4:w=c.rn.rf(h,a);break;default:throw c.i.Ra()}return w},C.TE=function(w,h){return C.kP(c.sa.Vp(w),h*c.sa.Wa(w),c.sa.te(w))},C.Qh=function(w,h){return c.ja.rf(w,h)},C.lI=function(w){var h,a=[];for(h=0;h<w;h++)a.push(null);return a},C}()}(H||(H={})),function(c){c.ha=function(C){C===void 0&&(C=0),this.u=C}}(H||(H={})),function(c){c.IL=function(){function C(){}return C.bind=function(w){c.Tc=w.PeDefs,c.qf=w.PeFactory,c.IC=w.PeVertcs,c.gj=w.PeCSTransformations,c.HC=w.PeGTTransformations,c.GL=w.PeGeogtran,c.FL=w.PeFactoryCodechange,c.GC=w.PeGCSExtent,c.Eg=w.PePCSInfo,c.HL=w.PeHorizon,c.EL=w.PeCoordsys,c.np=w.PeGTlistExtended,c.np.PE_GTLIST_OPTS_USE_DEFAULT=128,c.qf.initialize(null),c.Lx=w.PeGTlistExtendedEntry,c.qf.fromString(c.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},C}(),c.qf=null,c.IC=null,c.EL=null,c.HL=null,c.Eg=null,c.np=null,c.Lx=null,c.GC=null,c.FL=null,c.GL=null,c.Tc=null,c.HC=null,c.gj=null}(H||(H={})),function(c){var C=function(){function w(){}return w.Mb=function(h,a){return 0<=a?w.R(h):-w.R(h)},w.R=function(h){return 0>h?-h:h},w.vi=function(h){return 3552713678800501e-30>h},w.FC=function(h,a,s){return w.R(h-a)<=s*(1+(w.R(h)+w.R(a))/2)},w.$=function(h,a){return w.FC(h,a,3552713678800501e-30)},w.AL=function(h){return 3552713678800501e-30>=w.R(h)},w.Dd=function(h){return w.AL(h)},w}();c.s=C,c.F=function(){function w(){}return w.ip=function(h,a){var s=0;return(h=C.R(h))+(a=C.R(a))!=0&&(h>a?(s=a/h,s=h*Math.sqrt(1+s*s)):(s=h/a,s=a*Math.sqrt(1+s*s))),s},w.Yq=function(h,a,s,o,u){for(var p=[0,0,0],f=[0,0,0],m=0;2>=m;m++)a[m]-=h[m],s[m]-=a[m];s=p[1]*f[2]-p[2]*f[1],a=p[2]*f[0]-p[0]*f[2],p=p[0]*f[1]-p[1]*f[0],h=-1*(s*h[0]+a*h[1]+p*h[2]),o[0]=s,o[1]=a,o[2]=p,o[3]=h,f=w.qn(o),o[0]/=f,o[1]/=f,o[2]/=f,o[3]/=f,u!=0&&(f=C.Dd(p)?C.Dd(h)?C.Mb(1,a):-C.Mb(1,h):C.Mb(1,p),f*=C.Mb(1,u),o[0]*=f,o[1]*=f,o[2]*=f,o[3]*=f)},w.yx=function(h,a,s){s[0]=h[1]*a[2]-a[1]*h[2],s[1]=h[2]*a[0]-a[2]*h[0],s[2]=h[0]*a[1]-a[0]*h[1]},w.Ut=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]},w.qn=function(h){return w.ip(w.ip(h[0],h[1]),h[2])},w.el=function(h,a,s,o,u,p,f,m){h=w.n(h,a,s);var b=Math.cos(s);p.u=(h+u)*b*Math.cos(o),f.u=(h+u)*b*Math.sin(o),m.u=(h*(1-a)+u)*Math.sin(s)},w.eO=function(h,a,s,o,u,p,f){var m=w.ip(a,s),b=1*Math.sqrt(1-h),_=b/1;if(C.$(m,0))p.u=0,u.u=C.Mb(1.570796326794897,o),f.u=C.R(o)-b;else{p.u=Math.atan2(s,a),s=Math.atan2(1*o,b*m),p=Math.cos(s);var M=Math.sin(s);a=b*h/(1-h),h*=1,s=Math.atan2(o+a*M*M*M,m-h*p*p*p),3.141592653589793<C.R(s)&&(s=C.Mb(3.141592653589793,s)-s),s=Math.atan(_*Math.tan(s)),M=Math.sin(s),p=Math.cos(s),u.u=Math.atan2(o+a*M*M*M,m-h*p*p*p),1.570796326794897<C.R(u.u)&&(u.u=C.Mb(3.141592653589793,u.u)-u.u),s=Math.atan(_*Math.tan(u.u)),M=Math.sin(s),p=Math.cos(s),f.u=(o-b*M)*Math.sin(u.u)+(m-1*p)*Math.cos(u.u)}},w.n=function(h,a,s){return s=Math.sin(s),h/Math.sqrt(1-a*s*s)},w.pt=function(h,a){return Math.atan2(Math.sin(a)*(1-h),Math.cos(a))},w.Sj=function(h,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-h))},w.Tq=function(h,a){if(C.vi(h)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>h){var s=Math.sqrt(1-h),o=(1-s)/(1+s),u=o*o,p=o*u,f=o*p,m=o*f,b=o*m,_=o*b,M=1.572916666666667*p-3.2578125*m+4.295068359375*_;h=2.142578125*f-6.071484375*b,s=3.129296875*m-11.249837239583334*_;var T=4.775276692708333*b,A=7.958636765252976*_,O=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*m-.2688395182291667*_-M+s-A+O*(2*(1.3125*u-1.71875*f+1.650146484375*b)-4*h+6*T+O*(4*M-12*s+24*A+O*(8*h-32*T+O*(16*s-80*A+O*(32*T+64*O*A))))))}for(s=1-h,o=h/2,p=(u=C.R(a))*w.av(h)/(1.570796326794897*s),f=9999,b=u,u=0;1e-16<f&&50>u;u++)_=w.w(h,b),m=b-(M=(m=(w.fG(b,h)-o*Math.sin(2*b)/_)/s-p)/(_=1/(_*_*_))),f=C.R(M),b=m;return 0<=a?b:-b},w.lW=function(h,a){return C.vi(a)?h:h*w.av(a)/1.570796326794897},w.ca=function(h){return 0>(h=w.kF(h,6.283185307179586))?h+6.283185307179586:3.141592653589793>C.R(h)||C.$(C.R(h),3.141592653589793)?h:h-6.283185307179586},w.kF=function(h,a){return h-Math.floor(h/a)*a},w.Ch=function(h,a){if(.006884661117170036>a){var s=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=s*s;return h/(1+a)*(1+.25*s+.015625*o+.00390625*s*o)*1.570796326794897}return h*w.av(a)},w.Xq=function(h,a){var s=C.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=C.R(w.kF(a,3.141592653589793)))?a:3.141592653589793-a,(C.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-h)*Math.tan(a)))*s},w.q=function(h,a,s){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,u=a*o,p=a*u,f=a*p,m=a*f,b=a*m,_=-.7291666666666666*u+.2278645833333333*f+.03987630208333334*b,M=.615234375*p-.21533203125*m,T=-.54140625*f+.20302734375*b,A=.48876953125*m,O=-.4488699776785715*b,R=Math.cos(2*s);return h/(1+a)*((1+.25*o+.015625*p+.00390625*m)*s+Math.sin(2*s)*(-1.5*a+.1875*u+.0234375*f+.00732421875*b-_+T-O+R*(2*(.9375*o-.234375*p-.03662109375*m)-4*M+6*A+R*(4*_-12*T+24*O+R*(8*M-32*A+R*(16*T-80*O+R*(32*A+64*R*O)))))))}return h*(w.fG(s,a)-.5*a*Math.sin(2*s)/w.w(a,s))},w.w=function(h,a){return a=Math.sin(a),Math.sqrt(1-h*a*a)},w.av=function(h){return C.FC(h,1,2220446049250313e-31)?1:1>h?w.Zw(0,1-h)-h/3*w.Ww(0,1-h):NaN},w.fG=function(h,a){var s=C.Mb(1,h);h=C.R(h);var o=Math.floor(h/1.570796326794897);if(1<a)a=h==0?0:NaN;else if(C.Dd(o))a=(h=w.sin(h))*w.Zw(1-h*h,1-a*h*h)-a/3*h*h*h*w.Ww(1-h*h,1-a*h*h);else{var u=c.P.truncate(o%2),p=w.av(a);0<u?a=p*(o+1)-(a=(h=Math.sin(1.570796326794897*(o+1)-h))*w.Zw(1-h*h,1-a*h*h)-a/3*h*h*h*w.Ww(1-h*h,1-a*h*h)):a=p*o+(a=(h=Math.sin(h-1.570796326794897*o))*w.Zw(1-h*h,1-a*h*h)-a/3*h*h*h*w.Ww(1-h*h,1-a*h*h))}return a*s},w.sin=function(h){h=w.ca(h);var a=C.Mb(1,h);return h=C.R(h),C.$(h,3.141592653589793)?0:C.$(h,1.570796326794897)?1*a:Math.sin(h)*a},w.Ww=function(h,a){var s,o,u,p,f=h,m=a,b=1;for(a=0,h=1;o=((s=.2*(f+m+3*b))-f)/s,u=(s-m)/s,p=(s-b)/s,!(1e-4>C.R(o)&&1e-4>C.R(u)&&1e-4>C.R(p));)p=Math.sqrt(m),a+=h/((s=Math.sqrt(b))*(b+(p=Math.sqrt(f)*(p+s)+p*s))),h*=.25,f=.25*(f+p),m=.25*(m+p),b=.25*(b+p);return m=(f=o*u)-(b=p*p),3*a+h*(1+(b=f-6*b)*(.10227272727272728*b-.2142857142857143-.1730769230769231*p*(o=b+m+m))+p*(.1666666666666667*o+p*(-.4090909090909091*m+.1153846153846154*p*f)))/(s*Math.sqrt(s))},w.Zw=function(h,a){for(var s,o,u,p,f=1;o=2-((s=(h+a+f)/3)+h)/s,u=2-(s+a)/s,p=2-(s+f)/s,!(1e-4>C.R(o)&&1e-4>C.R(u)&&1e-4>C.R(p));f=.25*(f+s))s=Math.sqrt(a),o=Math.sqrt(f),h=.25*(h+(s=Math.sqrt(h)*(s+o)+s*o)),a=.25*(a+s);return(1+(.04166666666666666*(h=o*u-p*p)-.1-.06818181818181818*(a=o*u*p))*h+.07142857142857142*a)/Math.sqrt(s)},w.Sw=function(h,a){if(C.vi(h)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>h){var s=h*h,o=h*s,u=h*o,p=h*u,f=h*p,m=h*f,b=-(.02708333333333333*o+.03430059523809524*u+.03149181547619048*p+.02634359154541446*f+.02156896735835538*m),_=.007669890873015873*u+.01299603174603175*p+.0148051353064374*f+.01454454953803912*m,M=-(.002275545634920635*p+.004830845032667949*f+.006558395368616723*m),T=.0006957236677288761*f+.001775193002406544*m,A=-.000217324089394402*m,O=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*h+.2083333333333333*s+.09375*o+.04878472222222222*u+.02916666666666667*p+.01938905423280423*f+.01388255931712963*m)-b+M-A+O*(2*(.1041666666666667*s+.0875*o+.06050347222222222*u+.04151785714285714*p+.02958958540013228*f+.02203667534722222*m)-4*_+6*T+O*(4*b-12*M+24*A+O*(8*_-32*T+O*(16*M-80*A+O*(32*T+64*O*A))))))}return a==0||C.$(C.R(a),1.570796326794897)?s=a:(u=(o=Math.sqrt(h))*Math.sin(a),s=Math.tan(.7853981633974483+a/2)*Math.pow((1-u)/(1+u),o/2),s=2*Math.atan(s)-1.570796326794897),s},w.tO=function(h,a){if(C.vi(h)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>h){var s=h*(T=h*(M=h*(O=h*h))),o=h*(A=h*s),u=.05833333333333333*M+.07232142857142858*T+.05634300595238095*s+.0355325796406526*A+.020235546186067*o,p=.02653149801587302*T+.04379960317460317*s+.0429211791776896*A+.03255384637546096*o,f=.01294022817460318*s+.02668104344536636*A+.03155651254609588*o,m=.00659454790965208*A+.0163075268674227*o,b=.003463473736911237*o,_=Math.cos(2*a);return a+Math.sin(2*a)*(.5*h+.2083333333333333*O+.08333333333333333*M+.03611111111111111*T+.01875*s+.01195601851851852*A+.008863673941798942*o-u+f-b+_*(2*(.1458333333333333*O+.1208333333333333*M+.07039930555555556*T+.03616071428571429*s+.01839451058201058*A+.01017113095238095*o)-4*p+6*m+_*(4*u-12*f+24*b+_*(8*p-32*m+_*(16*f-80*b+_*(32*m+64*_*b))))))}var M=Math.sqrt(h),T=M/2,A=Math.tan(.7853981633974483+a/2);h=0,u=1;for(var O=a;u!=0;O=o)s=M*Math.sin(O),o=A*Math.pow((1+s)/(1-s),T),o=2*Math.atan(o)-1.570796326794897,h++,(C.$(o,O)||3e4<h)&&(u=0);return O},w}()}(H||(H={})),function(c){var C=function(){function w(h){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new c.h,this.SH=new c.h,this.FA=!1,this.xq=new c.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=h,this.Cs=c.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var a=h.getCode();0<a?(this.Mk=a,c.qf.getCode(h)):this.Mk=c.qf.getCode(h),0>this.Mk&&(this.Mk=0);var s=this.Re.getType();if(this.eH=s==c.Tc.PE_TYPE_PROJCS?2:1,s==c.Tc.PE_TYPE_PROJCS&&!h.loadConstants())throw c.i.O("PeProjcs.loadConstants failed");a=s==c.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),s!=c.Tc.PE_TYPE_GEOGCS&&c.qf.getCode(a),this.Go=h.getUnit(),this.MH=a.getPrimem().getLongitude(),this.rH=h=a.getUnit().getUnitFactor(),h=Math.PI/(180*h),1e-10>Math.abs(h-1)&&(h=1),this.BA=h,s&c.Tc.PE_TYPE_PROJCS?(a=this.Re,this.CA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=c.Eg.generate(a,c.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=c.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,s=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*s,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return w.prototype.cs=function(){return this.Mk},w.prototype.mk=function(){return this.vw},w.Ky=function(h,a){return h==a||h!=null&&a!=null&&h.Mk==0&&a.Mk==0&&h.Cs===a.Cs},w.prototype.Xc=function(){return this.Bl},w.prototype.ih=function(h){h.L(this.uo)},w.prototype.rv=function(){return this.uo.v},w.prototype.qv=function(){return this.uo.C},w.prototype.BR=function(h){h.L(this.ww)},w.prototype.hY=function(){var h=this.Re.getType();if(h==c.Tc.PE_TYPE_PROJCS){h=this.Re;var a=this.mk().getCentralMeridian(),s=h.getGeogcs();if(s==null)throw c.i.ga("internal error");a=[[a+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],c.gj.geogToProj(h,1,a),a=a[0][0],s=h.getParameters()[c.Tc.PE_PARM_X0].getValue();var o=this.ol();h=new c.l,o.A(h),a=(o=Math.abs(a-s))+s,s=-1*o+s,o=h.H,h=h.G;var u=new c.l;u.L(s,h,a,o),this.uo==null&&(this.uo=u)}else{if(h!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");s=1/this.Re.getUnit().getUnitFactor()*Math.PI,(h=new c.l).L(-s,-s/2,s,s/2),this.uo==null&&(this.uo=h)}},w.prototype.iY=function(){var h=this.Re.getType();if(h==c.Tc.PE_TYPE_PROJCS){var a=this.Re;if(h=this.mk().getCentralMeridian(),(a=a.getGeogcs())==null)throw c.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var s=this.Xr(),o=new c.l;s.A(o),(s=new c.l).L(h-a,o.G,h+a,o.H),this.ww==null&&(this.ww=s)}else{if(h!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(h=new c.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=h)}},w.prototype.bf=function(){return this.BA},w.prototype.rm=function(){return this.CA},w.prototype.Xr=function(){if(this.Bl)return this.wl;var h=this.wl;return h??(this.wx(),this.wl)},w.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},w.prototype.wx=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var h=this.Re,a=h.getGeogcs(),s=h.horizonGcsGenerate();if(s!=null){var o=s[0].getNump(),u=s[0].getKind();h=0<s[0].getInclusive();var p=this.bf(),f=90*p,m=360*p,b=370*p,_=180*p*c.Tc.PE_HORIZON_DELTA/Math.PI,M=new c.l,T=null;if(1<o){for(var A=1;A<o;A++)if(s[A].getKind()==c.Tc.PE_HORIZON_LINE){T==null&&(T=new c.Ua);var O=s[A].getCoord();T.rx(O[0][0],O[0][1]),T.Aj(O[1][0],O[1][1])}}if(u==c.Tc.PE_HORIZON_RECT)s=s[0].getCoord(),M.L(s[0][0],s[0][1]),M.$b(s[1][0],s[1][1]),Math.abs(M.H-f)<1e-7*_&&(M.H=f),Math.abs(M.G+f)<1e-7*_&&(M.G=-f),M.S()>b&&(s=-400*p,M.L(s,M.G,s+5*m,M.H)),s=new c.Hh(M),this.wl==null&&(this.wl=s,this.Kv=h);else{if(b=new c.Ea,m=this.mk().isGcsHorizonMultiOverlap(),M=c.iu.XE(a,c.ju.Integer64),m){for(b=new c.bL,_=c.Ih.local().W(b,M,null),A=0;A<o;A++)if(s[A].getKind()==c.Tc.PE_HORIZON_POLY){for(a=s[A].getSize(),p=s[A].getCoord(),u=[],f=0;f<a;f++)u[f]=c.h.construct(p[f][0],p[f][1]);s[A].getInclusive(),m&&((p=new c.Ea).$k(u,a-1),b.VX(p),_.re())}b=_.next()}else for(A=0;A<o;A++)if(s[A].getKind()==c.Tc.PE_HORIZON_POLY){for(a=s[A].getSize(),p=s[A].getCoord(),m=[],f=0;f<a;f++)m[f]=c.h.construct(p[f][0],p[f][1]);s[A].getInclusive(),b.$k(m,a-1)}h?c.Zj.local().yn(b,M,1):c.mp.local().yn(b,M,1),c.fj.local().yn(b,M,1),this.wl==null&&(this.wl=b,this.Kv=h,this.TG=T)}}}},w.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},w.prototype.yK=function(){if(this.eH==2){var h=this.Re.horizonPcsGenerate();if(h!=null){var a=h[0].getKind();h[0].getInclusive();var s=h[0].getNump(),o=!1;if(a==c.Tc.PE_HORIZON_RECT)h=h[0].getCoord(),(s=new c.l).L(h[0][0],h[0][1]),s.$b(h[1][0],h[1][1]),h=new c.Hh(s);else{for(a=-1,o=0;o<s;o++)h[o].getKind()==c.Tc.PE_HORIZON_POLY&&(a=o);for(o=h[a].getSize()-1,h=h[a].getCoord(),s=[],a=0;a<o;a++)s[a]=c.h.construct(h[a][0],h[a][1]);h=a=new c.Ea,a.$k(s,o),o=!0}this.mk().isDensificationNeeded()&&(s=1e5*this.rm(),h=c.Zl.local().W(h,s,null)),o&&(o=new c.Hh,h.dn(o),h.He(),h.Rb(),h.kR(),c.Zj.local().yn(h,null,1)),this.Ws==null&&(this.Ws=h)}}},w.prototype.ol=function(){if(this.Bl)return this.Ws;var h=this.Ws;return h??(this.yK(),this.Ws)},w.prototype.jY=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var h=90*this.bf();h=[[0,h],[0,-h]],c.gj.geogToProj(this.Re,2,h);var a=this.mk(),s=a.getNorthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(s&&this.CH.na(h[0][0],h[0][1]),a&&this.SH.na(h[1][0],h[1][1]))}this.FA=!0},w.prototype.xK=function(){if(this.eH==1){var h=400*this.bf();this.xq.L(-h,-h,h,h)}else h=c.Eg.generate(this.Re,c.Eg.PE_PCSINFO_OPTION_DOMAIN),h=c.l.construct(h.getDomainMinx(),h.getDomainMiny(),h.getDomainMaxx(),h.getDomainMaxy()),this.xq.B()&&this.xq.L(h)},w.prototype.cR=function(h){this.Bl&&h.L(this.xq),this.xq.B()&&this.xK(),h.L(this.xq)},w.prototype.Wp=function(){return this.MH},w.prototype.Bi=function(){return this.Xz},w.prototype.Id=function(){return this.Go},w.prototype.Zr=function(){return this.rH},w}();c.JC=C}(H||(H={})),function(c){var C=function(){function w(h){this.FT=h,this.Cs=c.Ab.zv(h,0,!0);var a=h.getCode();this.us=0<a?a:c.qf.getCode(h),0>this.us&&(this.us=0),this.Go=a=this.FT.getUnit(),this.DH=1/a.getUnitFactor(),c.qf.getCode(h)}return w.Ky=function(h,a){return h==a||h!=null&&a!=null&&h.us==0&&a.us==0&&h.Cs===a.Cs},w.prototype.cs=function(){return this.us},w}();c.KL=C}(H||(H={})),function(c){c.$g=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f){if(u!=null||p!=null||f!=null){s=c.F.ca(s),h=c.F.ca(h),a=c.F.ca(a),o=c.F.ca(o),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,h=c.F.ca(h+3.141592653589793)),1.570796326794897<c.s.R(o)&&(o=c.s.Mb(3.141592653589793,o)-o,s=c.F.ca(s+3.141592653589793));var m=c.F.ca(s-h);if(c.s.$(a,o)&&(c.s.$(h,s)||c.s.$(c.s.R(a),1.570796326794897)))u!=null&&(u.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(c.s.$(a,-o)){if(c.s.$(c.s.R(a),1.570796326794897))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0<a?c.F.ca(3.141592653589793-c.F.ca(s)):c.F.ca(s)),void(f!=null&&(f.u=0<a?c.F.ca(s):c.F.ca(3.141592653589793-c.F.ca(s))));if(c.s.$(c.s.R(m),3.141592653589793))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0),void(f!=null&&(f.u=0))}var b=c.s.R(a)==1.570796326794897?0:Math.cos(a),_=Math.sin(a),M=c.s.R(o)==1.570796326794897?0:Math.cos(o),T=Math.sin(o),A=c.s.R(m)==1.570796326794897?0:Math.cos(m),O=c.s.R(m)==3.141592653589793?0:Math.sin(m);if(u!=null){var R=Math.sin((o-a)/2);m=Math.sin(m/2),u.u=2*Math.asin(Math.sqrt(R*R+b*M*m*m))*w}p!=null&&(p.u=c.s.$(c.s.R(a),1.570796326794897)?0>a?s:c.F.ca(3.141592653589793-s):Math.atan2(M*O,b*T-_*M*A)),f!=null&&(c.s.$(c.s.R(o),1.570796326794897)?f.u=0>o?h:c.F.ca(3.141592653589793-h):(f.u=Math.atan2(b*O,T*b*A-M*_),f.u=c.F.ca(f.u+3.141592653589793)))}}},C.sf=function(w,h,a,s,o,u,p){if(u!=null||p!=null){h=c.F.ca(h),a=c.F.ca(a),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,h=c.F.ca(h+3.141592653589793)),c.s.$(c.s.R(a),1.570796326794897)&&(h=0),o=c.F.ca(o);var f=c.s.$(c.s.R(o),1.570796326794897)?0:Math.cos(o),m=c.s.$(c.s.R(o),3.141592653589793)?0:Math.sin(o),b=c.s.$(c.s.R(a),1.570796326794897)?0:Math.cos(a),_=Math.sin(a);w=s/w,s=c.s.$(c.s.R(w),1.570796326794897)?0:Math.cos(w);var M=c.s.$(c.s.R(w),3.141592653589793)?0:Math.sin(w),T=Math.asin(_*s+b*M*f);p!=null&&(p.u=T),u!=null&&(u.u=c.s.$(c.s.R(T),1.570796326794897)?c.s.$(a,-T)?0>T?o:c.F.ca(3.141592653589793-o):h:c.s.$(c.s.R(a),1.570796326794897)&&c.s.$(w,3.141592653589793)?0>a?o:c.F.ca(3.141592653589793-o):c.F.ca(h+Math.atan2(M*m,b*s-_*M*f)))}},C}()}(H||(H={})),function(c){c.Yk=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var b=new c.ha(0),_=new c.ha(0),M=[0,0,0],T=[0,0,0],A=[0,0,0],O=new c.ha(0),R=new c.ha(0),j=new c.ha(0),z=new c.ha(0),V=new c.ha(0);if(p!=null||f!=null||m!=null)if(c.s.vi(h))c.$g.ub(w,a,s,o,u,p,f,m);else{o=c.F.ca(o),a=c.F.ca(a);var F=c.F.ca(o-a);if(c.s.$(s,u)&&(c.s.$(a,o)||c.s.$(c.s.R(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.$(s,-u)){if(c.s.$(c.s.R(s),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0<s?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<s?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(F),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else(c.s.$(c.s.R(s),1.570796326794897)||c.s.$(c.s.R(u),1.570796326794897))&&(c.s.$(c.s.R(s),1.570796326794897)?a=o:o=a);var G=0;if(0>F){G=1;var Z=a;a=o,o=Z,Z=s,s=u,u=Z}F=c.F.pt(h,s);var K=c.F.pt(h,u);f==null&&m==null||(c.$g.ub(w,a,F,o,K,null,b,_),b=Math.atan2(Math.sin(b.u)*Math.cos(s-F),Math.cos(b.u)),_=Math.atan2(Math.sin(_.u)*Math.cos(u-K),Math.cos(_.u)),G!=0&&(Z=b,b=_,_=Z),f!=null&&(f.u=b),m!=null&&(m.u=_)),p!=null&&(c.F.el(1,h,s,a,0,j,z,V),M[0]=j.u,M[1]=z.u,M[2]=V.u,c.F.el(1,h,u,o,0,j,z,V),T[0]=j.u,T[1]=z.u,T[2]=V.u,A[0]=M[1]*T[2]-T[1]*M[2],A[1]=-(M[0]*T[2]-T[0]*M[2]),A[2]=M[0]*T[1]-T[0]*M[1],h=1-c.F.w(h,c.F.Xq(h,c.F.Sj(h,Math.acos(A[2]/Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]))))),h*=2-h,f=Math.atan2(-A[1],-A[0]),A=c.F.ca(f-1.570796326794897),f=c.F.ca(f+1.570796326794897),A=c.s.R(c.F.ca(a-A))<=c.s.R(c.F.ca(a-f))?A:f,c.$g.ub(1,A,0,a,F,O,null,null),c.$g.ub(1,A,0,o,K,R,null,null),3.141592653589793<O.u+R.u&&(A=c.F.ca(A+3.141592653589793),c.$g.ub(1,A,0,a,F,O,null,null),c.$g.ub(1,A,0,o,K,R,null,null)),O.u*=c.s.Mb(1,s),R.u*=c.s.Mb(1,u),O.u=c.F.Sj(h,O.u),R.u=c.F.Sj(h,R.u),a=c.F.q(w,h,O.u),w=c.F.q(w,h,R.u),p.u=c.s.R(w-a))}}},C.sf=function(w,h,a,s,o,u,p,f){var m=0,b=new c.ha(0),_=new c.ha(0),M=[0,0,0],T=[0,0,0],A=new c.ha(0),O=new c.ha(0),R=new c.ha(0);if(p!=null||f!=null)if(c.s.vi(h))c.$g.sf(w,a,s,o,u,p,f);else if(c.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=s);else if(u=c.F.ca(u),0>o&&(o=c.s.R(o),u=c.F.ca(u+3.141592653589793)),a=c.F.ca(a),s=c.F.ca(s),1.570796326794897<c.s.R(s)&&(a=c.F.ca(a+3.141592653589793),s=c.s.Mb(3.141592653589793,s)-s),c.s.$(c.s.R(s),1.570796326794897)&&(a=0),c.s.Dd(s)){var j=c.s.R(1.570796326794897-c.s.R(u));j=c.F.Sj(h,j),j=1-c.F.w(h,c.F.Xq(h,j)),j*=2-j,w=o/c.F.Ch(w,j)*1.570796326794897,w=c.F.Tq(j,w),w=c.F.pt(j,w),c.$g.sf(1,a,s,w,u,p,b),f!=null&&(m=b.u),f!=null&&(f.u=c.F.Sj(h,m))}else if(c.s.$(c.s.R(s),1.570796326794897))b=2*(m=c.F.Ch(w,h)),u=0<(w=c.s.Mb(1.570796326794897,s))?c.F.ca(3.141592653589793-u):u,s=m-o,c.s.R(s)<=m?p!=null&&(p.u=u):(s=Math.floor(o/b),c.P.truncate(s%2)==0?(p!=null&&(p.u=u),o-=s*b):(p!=null&&(p.u=c.F.ca(u+3.141592653589793)),o=(s+1)*b-o),s=m-o),f!=null&&(f.u=c.F.Tq(h,s/m*w));else{j=c.F.pt(h,s),u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(s-j));var z=c.P.truncate(c.s.Mb(1,j))*(1.570796326794897>=c.s.R(u)?1:-1);u=c.F.ca(a+Math.atan(Math.tan(u)*-Math.sin(j))),c.$g.ub(w,u,0,a,j,null,_,null),j=c.s.R(1.570796326794897-c.s.R(_.u)),j=c.F.Sj(h,j),j=1-c.F.w(h,c.F.Xq(h,j)),j*=2-j,c.F.el(1,h,0,u,0,A,O,R),M[0]=A.u,M[1]=O.u,M[2]=R.u,c.F.el(1,h,s,a,0,A,O,R),T[0]=A.u,T[1]=O.u,T[2]=R.u,s=Math.acos((M[0]*T[0]+M[1]*T[1]+M[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),s=c.F.Sj(j,s),o=0<(s=c.F.q(w,j,s)+o*z)?_.u:c.F.ca(_.u+3.141592653589793),w=c.s.R(s)/c.F.Ch(w,j)*1.570796326794897,w=c.F.Tq(j,w),w=c.F.pt(j,w),c.$g.sf(1,u,0,w,o,p,b),f!=null&&(m=b.u),f!=null&&(f.u=c.F.Sj(h,m))}},C}()}(H||(H={})),function(c){c.eu=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var b=0,_=0,M=0;if(p!=null||f!=null||m!=null)if(c.s.vi(h))c.$g.ub(w,a,s,o,u,p,f,m);else{var T=c.F.ca(o-a);if(c.s.$(s,u)&&(c.s.Dd(T)||c.s.$(c.s.R(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.$(s,-u)){if(c.s.$(c.s.R(s),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0<s?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<s?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(T),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else if(c.s.$(c.s.R(s),1.570796326794897)||c.s.$(c.s.R(u),1.570796326794897)||c.s.Dd(T)||c.s.$(c.s.R(T),3.141592653589793))return void c.Yk.ub(w,h,a,s,o,u,p,f,m);var A=1-Math.sqrt(1-h),O=h/(1-h),R=w*(1-A);w=c.F.Xq(h,s);var j=c.F.Xq(h,u);h=c.s.R(w)==1.570796326794897?0:Math.cos(w);var z=Math.sin(w),V=c.s.R(j)==1.570796326794897?0:Math.cos(j),F=Math.sin(j),G=T,Z=Math.cos(G),K=Math.sin(G),re=1,te=0;do{var he=G,ye=Math.sqrt(Math.pow(V*K,2)+Math.pow(h*F-z*V*Z,2)),pe=z*F+h*V*Z,De=Math.atan2(ye,pe);if(ye==0){re=0;break}var Se=h*V*K/ye;if(b=Math.cos(Math.asin(Se)),_=pe-2*z*F/(b*=b),1<c.s.R(_)&&(_=c.s.Mb(1,_)),G=T+(1-(G=A/16*b*(4+A*(4-3*b))))*A*Se*(De+G*ye*(_+G*pe*(2*(M=_*_)-1))),Z=Math.cos(G),K=Math.sin(G),te++,3.141592653589793<c.s.R(G)&&30<te){re=0;break}}while(5e3>=te&&!c.s.$(he,G));if(re!=0)A=(O*=b)*(256+O*(O*(74-47*O)-128))/1024,p!=null&&(p.u=R*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(De-A*ye*(_+A/4*(pe*(2*M-1)-A/6*_*(4*ye*ye-3)*(4*M-3))))),f!=null&&(f.u=c.s.$(c.s.R(s),1.570796326794897)?0>s?o:c.F.ca(3.141592653589793-o):Math.atan2(V*K,h*F-z*V*Z)),m!=null&&(c.s.$(c.s.R(u),1.570796326794897)?m.u=0>u?a:c.F.ca(3.141592653589793-a):(m.u=Math.atan2(h*K,h*F*Z-z*V),m.u=c.F.ca(m.u+3.141592653589793)));else{G=c.s.Mb(3.141592653589793,T),pe=z*F-h*V,De=Math.acos(pe),ye=Math.sin(De),b=1,te=Se=0;do M=Se,Z=1-.25*(Se=A*(b*=b)*(1+A+A*A))+.1875*(_=A*A*(Z=b*b)*(1+2.25*A))-.1953125*(re=A*A*A*Z*b),Se=.25*Se-.25*_+.29296875*re,K=.03125*_-.05859375*re,re*=.00651041666666667,_=pe-2*z*F/b,1<c.s.R(_)&&(_=c.s.Mb(1,_)),b=Math.acos(_),pe=Math.cos(2*b),he=Math.cos(3*b),K=(Se=c.s.$(s,-u)?c.F.ca(3.141592653589793-T)/(3.141592653589793*A*Z):c.F.ca(G-T)/(A*(Z*De+Se*ye*_+K*Math.sin(2*De)*pe+re*Math.sin(3*De)*he)))*ye/(h*V),G=1.570796326794897<c.s.R(T)?c.s.Mb(3.141592653589793,K)-Math.asin(K):Math.asin(K),Z=Math.cos(G),ye=Math.sqrt(Math.pow(V*K,2)+Math.pow(h*F-z*V*Z,2)),De=3.141592653589793-Math.asin(c.s.R(ye)),pe=Math.cos(De),b=Math.cos(Math.asin(Se)),te++;while(70>=te&&!c.s.$(M,Se));p!=null&&(Z=1+(O*=b*=b)*(4096+O*(O*(320-175*O)-768))/16384,c.s.$(s,-u)?p.u=3.141592653589793*R*Z:(_=pe-2*z*F/b,b=Math.acos(_),pe=Math.cos(2*b),he=Math.cos(3*b),p.u=R*(Z*De+O*(O*(128+O*(35*O-60))-512)/2048*ye*_+O*(5*O-4)/6144*O*O*Math.sin(2*De)*pe+re*Math.sin(3*De)*he+-762939453125e-16*O*O*O*O*Math.sin(4*De)*Math.cos(4*b)))),f!=null&&(c.s.Dd(s)&&c.s.Dd(u)?(b=Math.sqrt(1-Se*Se),f.u=Math.acos(b),0>T&&(f.u*=-1)):c.s.$(c.s.R(s),1.570796326794897)?f.u=0>s?o:c.F.ca(3.141592653589793-o):(p=Se/h,R=Math.sqrt(1-p*p),0>h*F-z*V*Math.cos(G)&&(R*=-1),f.u=Math.atan2(p,R),c.s.$(s,-u)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(s))&&(0<s&&1.570796326794897>c.s.R(f.u)||0>s&&1.570796326794897<c.s.R(f.u))&&(f.u=c.s.Mb(3.141592653589793,f.u)-f.u))),m!=null&&(c.s.Dd(s)&&c.s.Dd(u)?(b=Math.sqrt(1-Se*Se),m.u=Math.acos(b),0<=T&&(m.u*=-1)):c.s.$(c.s.R(u),1.570796326794897)?m.u=0>u?a:c.F.ca(3.141592653589793-a):(T=Se/V,p=Math.sqrt(1-T*T),R=Math.sin(G/2),0>Math.sin(j-w)-2*h*F*R*R&&(p*=-1),m.u=Math.atan2(T,p),m.u=c.F.ca(m.u+3.141592653589793),c.s.$(s,-u)&&!c.s.Dd(s)&&!c.s.$(c.s.R(s),1.570796326794897)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(s))&&(f!=null?R=f.u:(p=Se/h,R=Math.sqrt(1-p*p),0>h*F-z*V*Math.cos(G)&&(R*=-1),R=Math.atan2(p,R),c.s.$(s,-u)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-A*Math.cos(s))&&(0<s&&1.570796326794897>c.s.R(R)||0>s&&1.570796326794897<c.s.R(R))&&(R=c.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=c.s.R(R)&&1.570796326794897<c.s.R(m.u)||1.570796326794897<=c.s.R(R)&&1.570796326794897>c.s.R(m.u))&&(m.u=-1*c.F.ca(m.u+3.141592653589793))))}}}},C.sf=function(w,h,a,s,o,u,p,f){if(p!=null||f!=null)if(c.s.vi(h))c.$g.sf(w,a,s,o,u,p,f);else if(u=c.F.ca(u),c.s.$(c.s.R(s),1.570796326794897)||c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))c.Yk.sf(w,h,a,s,o,u,p,f);else{var m=c.s.R(u)==1.570796326794897?0:Math.cos(u),b=c.s.R(u)==3.141592653589793?0:Math.sin(u);c.s.$(c.s.R(s),1.570796326794897)&&(a=0),u=1-Math.sqrt(1-h);var _=c.F.Xq(h,s);s=c.s.R(_)==1.570796326794897?0:Math.cos(_);var M=Math.sin(_);_=Math.atan2(Math.tan(_),m);var T=s*b,A=T*T,O=1-A,R=h/(1-h)*O,j=(h=R*(256+R*(R*(74-47*R)-128))/1024)/4,z=h/6,V=o/(w*(1-u)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),F=V;do{var G=F;o=c.s.R(F)==1.570796326794897?0:Math.cos(F);var Z=(R=c.s.R(F)==3.141592653589793?0:Math.sin(F))*R;F=h*R*((w=Math.cos(2*_+F))+j*(o*(2*(F=w*w)-1)-z*w*(4*Z-3)*(4*F-3)))+V}while(!c.s.$(G,F));o=c.s.R(F)==1.570796326794897?0:Math.cos(F),R=c.s.R(F)==3.141592653589793?0:Math.sin(F),p!=null&&(b=Math.atan2(R*b,s*o-M*R*m),O=u/16*O*(4+u*(4-3*O)),w=Math.cos(2*_+F),p.u=c.F.ca(a+(b-(1-O)*u*T*(F+O*R*(w+O*o*(2*w*w-1)))))),f!=null&&(O=M*R-s*o*m,O=(1-u)*Math.sqrt(A+O*O),f.u=Math.atan2(M*o+s*R*m,O))}},C}()}(H||(H={})),function(c){c.KC=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var b=c.F.ca(o-a),_=c.s.$(c.s.R(s),1.570796326794897),M=c.s.$(c.s.R(u),1.570796326794897);if(c.s.$(s,u)&&(c.s.Dd(b)||_))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.vi(h)){var T=Math.sin(s),A=Math.sin(u);T=Math.sqrt((1+T)/(1-T)),A=Math.sqrt((1+A)/(1-A)),T=Math.log(A)-Math.log(T),T=Math.atan2(b,T),p!=null&&(p.u=c.s.$(s,u)?c.s.R(w*Math.cos(s)*b):c.s.R((w*u-w*s)/Math.cos(T)))}else A=c.F.Sw(h,u),T=Math.sin(c.F.Sw(h,s)),A=Math.sin(A),T=Math.sqrt((1+T)/(1-T)),A=Math.sqrt((1+A)/(1-A)),T=Math.log(A)-Math.log(T),T=Math.atan2(b,T),p!=null&&(c.s.$(s,u)?p.u=c.s.R(w*b*Math.cos(s)/c.F.w(h,s)):(b=c.F.q(w,h,s),w=c.F.q(w,h,u),p.u=c.s.R((w-b)/Math.cos(T))));f==null&&m==null||(p=c.F.ca(T+3.141592653589793),_&&M||!_&&!M||(_?T=0>s?o:c.F.ca(3.141592653589793-o):M&&(p=0>u?a:c.F.ca(3.141592653589793-a))),f!=null&&(f.u=T),m!=null&&(m.u=p))}},C.sf=function(w,h,a,s,o,u,p,f){u=c.F.ca(u),0>o&&(o=c.s.R(o),u=c.F.ca(u+3.141592653589793)),c.s.vi(h)?c.s.$(c.s.R(s),1.570796326794897)?(a=0>s?u:c.F.ca(3.141592653589793-u),3.141592653589793>=(u=o/w%6.283185307179586)?w=s-c.s.Mb(u,s):(a=c.F.ca(a+3.141592653589793),w=-s+c.s.Mb(u-3.141592653589793,s))):c.s.$(c.s.R(u),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,u)/(w*Math.cos(s))),w=s):(w=s+o*Math.cos(u)/w,1.570796326794897<c.s.R(w)&&(w=1.570796326794897),c.s.$(c.s.R(w),1.570796326794897)&&(c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))||(1.570796316258184<c.s.R(w)&&(w=c.s.Mb(1.570796316258184,w)),h=Math.sin(s),s=Math.sin(w),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),a=c.F.ca(a+Math.tan(u)*h))):c.s.$(c.s.R(s),1.570796326794897)?(a=0>s?u:c.F.ca(3.141592653589793-u),u=o/c.F.lW(w,h),3.141592653589793>=(u%=6.283185307179586)?w=s-c.s.Mb(u,s):(a=c.F.ca(a+3.141592653589793),w=-s+c.s.Mb(u-3.141592653589793,s)),w=c.F.Tq(h,w)):c.s.$(c.s.R(u),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,u)*c.F.w(h,s)/(w*Math.cos(s))),w=s):(w=1.570796326794897*(o*Math.cos(u)+c.F.q(w,h,s))/c.F.Ch(w,h),1.570796326794897<c.s.R(w)&&(w=c.s.Mb(1.570796326794897,w)),w=c.F.Tq(h,w),c.s.$(c.s.R(w),1.570796326794897)&&(c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))||(o=c.F.Sw(h,s),s=c.F.Sw(h,w),1.570796316258184<c.s.R(s)&&(s=c.s.Mb(1.570796316258184,w),w=c.F.tO(h,s)),h=Math.sin(o),s=Math.sin(s),h=Math.sqrt((1+h)/(1-h)),s=Math.sqrt((1+s)/(1-s)),h=Math.log(s)-Math.log(h),a=c.F.ca(a+Math.tan(u)*h))),p!=null&&(p.u=a),f!=null&&(f.u=w)},C}()}(H||(H={})),function(c){c.kb=function(){function C(){}return C.Sy=function(w,h,a,s,o,u,p){c.eu.ub(w,h,a,s,o,u,null,p,null)},C.Ai=function(w,h,a,s,o,u,p,f){c.eu.sf(w,h,a,s,o,u,p,f)},C.xd=function(w,h,a,s,o,u,p,f,m,b){switch(b){case 2:c.Yk.ub(w,h,a,s,o,u,p,f,m);break;case 3:c.LC.ub(w,h,a,s,o,u,p,f,m);break;case 1:c.KC.ub(w,h,a,s,o,u,p,f,m);break;default:c.eu.ub(w,h,a,s,o,u,p,f,m)}},C.qj=function(w,h,a,s,o,u,p,f,m){switch(m){case 2:c.Yk.sf(w,h,a,s,o,u,p,f);break;case 3:c.LC.sf(w,h,a,s,o,u,p,f);break;case 1:c.KC.sf(w,h,a,s,o,u,p,f);break;default:c.eu.sf(w,h,a,s,o,u,p,f)}},C}()}(H||(H={})),function(c){var C=function(){function h(){this.y=this.x=null}return h.construct=function(a){var s=new h;return s.x=new c.Xb,s.x.set(a.x),s.y=new c.Xb,s.y.set(a.y),s},h.QE=function(a,s){var o=new h;return o.x=new c.Xb,o.x.set(a),o.y=new c.Xb,o.y.set(s),o},h.prototype.rg=function(){return this.x.rg()&&this.y.rg()},h.prototype.value=function(){return c.h.construct(this.x.value(),this.y.value())},h}();c.rY=C;var w=function(){function h(){this.z=this.y=this.x=null}return h.construct=function(a){var s=new h;return s.x=new c.Xb,s.x.set(a.x),s.y=new c.Xb,s.y.set(a.y),s.z=new c.Xb,s.z.set(a.z),s},h.QE=function(a,s,o){var u=new h;return u.x=new c.Xb,u.x.set(a),u.y=new c.Xb,u.y.set(s),u.z=new c.Xb,u.z.set(o),u},h.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},h.prototype.value=function(){return new c.Od(this.x.value(),this.y.value(),this.z.value())},h.prototype.Sh=function(a){var s=new c.Xb,o=new c.Xb,u=new c.Xb;return s.Ml(this.x,a.x),o.Ml(this.y,a.y),u.Ml(this.z,a.z),(a=new c.Xb).ZM(s,o),a.add(u),a},h.prototype.YE=function(a){var s=new h;s.x.Ml(this.y,a.z),s.y.Ml(this.z,a.x),s.z.Ml(this.x,a.y);var o=new c.Xb,u=new c.Xb,p=new c.Xb;return o.Ml(this.z,a.y),u.Ml(this.x,a.z),p.Ml(this.y,a.x),s.x.sub(o),s.y.sub(u),s.z.sub(p),s},h}();c.sY=w,c.Nx=function(){function h(){}return h.zP=function(a,s,o){var u=s.x;s=s.y,h.el(1,a,Math.cos(u),Math.sin(u),Math.cos(s),Math.sin(s),o)},h.yP=function(a,s){var o=new c.Od;return h.zP(a,s,o),o},h.el=function(a,s,o,u,p,f,m){a/=Math.sqrt(1-s*f*f),m.L(a*p*o,a*p*u,a*(1-s)*f)},h.$u=function(a,s){var o=new c.Xb,u=new c.Xb,p=new c.Xb,f=new c.Xb;o.cos(s.x),u.sin(s.x),p.cos(s.y),f.sin(s.y);var m=new c.Xb;return m.set(f),m.Bg(f),m.Po(a),m.Po(-1),m.fN(),m.sqrt(),(s=new c.Xb).set(1),s.lm(m),(m=new c.Xb).set(s),m.Bg(p),m.Bg(o),(o=new c.Xb).set(s),o.Bg(p),o.Bg(u),(u=new c.Xb).set(s),u.Po(1-a),u.Bg(f),w.QE(m,o,u)},h.NS=function(a,s,o,u){if(Math.abs(s.x-o.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&s.x!=o.x)return NaN;if(u=h.YA(u,Math.min(s.x,o.x),Math.max(s.x,o.x)),!new c.Oc(s.x,o.x).contains(u))return NaN;var p=C.construct(s);if(o=C.construct(o),p=h.$u(a,p),o=h.$u(a,o),(o=p.YE(o)).z.rg())return s.y;var f=new c.Xb;f.set(o.x),f.lm(o.z),f.Po(-1);var m=new c.Xb;m.set(o.y),m.lm(o.z),m.Po(-1);var b=new c.Xb;return b.set(m),b.Bg(m),(p=new c.Xb).set(f),p.Bg(f),p.add(b),p.sqrt(),p.rg()||f.rg()&&m.rg()?s.y:(s=Math.atan2(m.value(),f.value()),s=Math.atan2(p.value()*Math.cos(s-u),1-a),u=h.yP(a,c.h.construct(u,s)),a=new c.Od(u.x,u.y,-u.z),u=o.value().Sh(u),a=o.value().Sh(a),Math.abs(a)<Math.abs(u)&&(s=-s),s)},h.Jz=function(a,s,o,u,p){if(p[0]=NaN,p[1]=NaN,Math.abs(s.x-o.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&s.x!=o.x||Math.abs(u)>=.5*Math.PI||0<s.y&&0<o.y&&s.y>u&&o.y>u||0>s.y&&0>o.y&&s.y<u&&o.y<u)return 0;var f=C.construct(s),m=C.construct(o);f=h.$u(a,f),m=h.$u(a,m);var b=f.YE(m);if(b.z.rg())return new c.Oc(s.y,o.y).contains(u)?(p[0]=s.x,1):0;(m=new c.Xb).set(b.x),m.lm(b.z),m.Po(-1),(f=new c.Xb).set(b.y),f.lm(b.z),f.Po(-1),(b=new c.Xb).set(f),b.Bg(f);var _=new c.Xb;return _.set(m),_.Bg(m),_.add(b),_.sqrt(),_.rg()||m.rg()&&f.rg()?u==0?(p[0]=s.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(u)/_.value(),1<Math.abs(a)?0:(a=Math.acos(a),b=Math.atan2(f.value(),m.value()),m=Math.min(s.x,o.x),f=Math.max(s.x,o.x),o=h.YA(b-a,m,f),a=u!=0?h.YA(b+a,m,f):o,u=0,m<=o&&o<=f&&(p[u]=o,u++),a!=o&&m<=a&&a<=f&&(p[u]=a,++u==2&&Math.abs(p[0]-s.x)>Math.abs(p[1]-s.x)&&(s=p[0],p[0]=p[1],p[1]=s)),u))},h.YA=function(a,s,o){return a>o?a-=2*(s=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<s&&(a+=2*(s=Math.ceil((s-a)/(2*Math.PI)))*Math.PI),a},h}()}(H||(H={})),function(c){c.SK=function(){function C(){}return C.WX=function(w,h){var a=8,s=[0,0,0,0],o=new c.h;o.N(h),o.scale(c.cb.tc(w).Id().Fc()==9102?1:c.cb.tc(w).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var u=-180,p=180,f=(w=5*a)-1,m=(h=(w+31)/32)-1;0<=m;m--)for(var b=f-32*m,_=Math.min(32,w-32*m),M=1;M<_;M+=2){var T=.5*(p+u);o.x>=T?(s[m]|=1<<b,u=T):p=T,b-=2,f-=2}for(u=-90,p=90,f=w-2,m=h-1;0<=m;m--)for(b=f-32*m,_=Math.min(32,w-32*m),M=0;M<_;M+=2)T=.5*(p+u),o.y>=T?(s[m]|=1<<b,u=T):p=T,b-=2,f-=2;return C.VP(s,a,a)},C.VP=function(w,h,a){for(var s=[],o=0;o<h;o++)s[o]="";for(var u=o=0,p=0;p<h;p++){var f=w[o]>>u&31;if(31<(u+=5)){var m=37-u;f&=(1<<m)-1,u-=32,f|=(w[++o]&(1<<u)-1)<<m}s[h-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[f]}if(a>h)for(p=0;p<a-h;p++)s.push("0");else a<h&&(s.length=a);return s.join("")},C}()}(H||(H={})),function(c){var C={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};c.yr=function(){function h(){}return h.Ny=function(a){h.zp===!1&&h.zt();var s=h.AQ(a);if(s==-1){var o=h.Ax(a);o!=a&&(s=h.Ny(o))}return s==-1&&(o=h.AK(a))!=a&&(s=h.Ny(o)),s},h.AQ=function(a){return h.Hw[a]!==void 0?h.Hw[a]:-1},h.xQ=function(a){h.zp===!1&&h.zt();var s=h.iF(a);if(s==1e38){var o=h.Ax(a);if(o!=a&&(s=h.iF(o)),s==1e38)return 1e-10}return s},h.US=function(a){if(h.Ks[a]!==void 0)return!0;var s=h.Ax(a);return s!=a&&h.Ks[s]!==void 0},h.WS=function(a){if(h.zo[a]!==void 0)return!0;var s=h.Ax(a);return s!=a&&h.zo[s]!==void 0},h.iF=function(a){return h.zp===!1&&h.zt(),h.Ks[a]!==void 0?h.Ks[a]:h.zo[a]!==void 0?h.zo[a]:1e38},h.AK=function(a){return h.zp===!1&&h.zt(),h.RA[a]!==void 0?h.RA[a]:a},h.Ax=function(a){return h.zp===!1&&h.zt(),h.SA[a]!==void 0?h.SA[a]:a},h.zt=function(){for(var a,s=C,o=0;o<s.pcsid.length;o+=2)h.zo[s.pcsid[o]]=s.pcstol[2*s.pcsid[o+1]+1];for(o=0;o<s.pcsidc.length;o+=1)for(var u=(a=s.pcsidc[o])[0];u<=a[1];u++)h.zo[u]=s.pcstol[2*a[2]+1];for(o=0;o<s.gcsid.length;o+=2)h.Ks[s.gcsid[o]]=s.gcstol[2*s.gcsid[o+1]+1];for(o=0;o<s.gcsidc.length;o+=1)for(u=(a=s.gcsidc[o])[0];u<=a[1];u++)h.zo[u]=s.gcstol[2*a[2]+1];for(o=0;o<w.c.length;o+=1)for(u=(a=w.c[o])[0];u<=a[1];u++)h.Hw[u]=a[2];for(o=0;o<w.nc.length;o+=2)h.Hw[w.nc[o]]=w.nc[o+1];for(w=null,o=0;o<s.newtoold.length;o+=2)h.RA[s.newtoold[o+1]]=s.newtoold[o],h.SA[s.newtoold[o]]=s.newtoold[o+1];C=null,h.zp=!0},h.zp=!1,h.Ks=[],h.zo=[],h.RA=[],h.SA=[],h.Hw=[],h}()}(H||(H={})),function(c){function C(h){return h.length===0?'""':h[0]=='"'||h[0]=="."||"0"<=h[0]&&"9">=h[0]?h:'"'+h.trim()+'"'}var w=[];c.SC=function(){function h(){}return h.zQ=function(a){try{for(var s=0;s<w.length;s++)if(w[s].wkttext===a)return w[s].unit;for(var o,u=s="",p=!1,f=0;f<a.length;f++){var m=a[f];p===!0?m=='"'?a[f+1]=='"'?s+=m:p=p=!1:s+=m:/[\s]/.test(m)||(m==","?(u=s!==""?u+(C(s)+","):u+",",s=""):m==")"||m=="]"?(u=s!==""?u+(C(s)+"]}"):u+"]}",s=""):m=="("||m=="["?(u+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):m=='"'?(p=!0,s=""):s+=m)}o=JSON.parse(u);var b=h.hF(o);if(b===null)return null;for(o=null,m=0;m<b.values.length;m++)if(typeof b.values[m]=="object"&&b.values[m].entity==="UNIT"){o=b.values[m];break}if(o===null)return null;var _=c.Uc.UO(b.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return w.push({wkttext:a,unit:_}),10<w.length&&w.shift(),_}catch{return null}},h.hF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var s=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];s.push(a.values[o])}for(a=0;a<s.length;a++)if((o=h.hF(s[a]))!==null)return o;return null},h.yQ=function(a){var s=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var u=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<u&&(s=.001/u)}else if(0<=(o=a.indexOf("GEOGCS"))){var f=0;if(u=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{f=parseFloat(a.substring(o,p))}catch{f=0}if(0<f&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<f&&0<u&&(s=.001/(f*u))}}return s},h}()}(H||(H={})),function(c){var C;(C=c.$K||(c.$K={}))[C.NONE=0]="NONE",C[C.LINEAR=1]="LINEAR",C[C.ANGULAR=2]="ANGULAR",function(h){h[h.enumFloat=0]="enumFloat",h[h.enumDouble=1]="enumDouble",h[h.enumInt32=2]="enumInt32",h[h.enumInt64=3]="enumInt64",h[h.enumInt8=4]="enumInt8",h[h.enumInt16=5]="enumInt16"}(c.LL||(c.LL={})),function(h){h[h.POSITION=0]="POSITION",h[h.Z=1]="Z",h[h.M=2]="M",h[h.ID=3]="ID",h[h.NORMAL=4]="NORMAL",h[h.TEXTURE1D=5]="TEXTURE1D",h[h.TEXTURE2D=6]="TEXTURE2D",h[h.TEXTURE3D=7]="TEXTURE3D",h[h.ID2=8]="ID2",h[h.MAXSEMANTICS=10]="MAXSEMANTICS"}(c.Kh||(c.Kh={}));var w=function(){function h(a,s){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,s!==void 0){for(this.Ba=s.Ba,this.Qq=s.Qq,this.dg=s.dg.slice(0),this.wh=s.wh.slice(0),this.yl=s.yl,this.Xs=[],a=s=0;a<this.Ba;a++)this.Xs[a]=s,s+=h.Wa(this.dg[a]);for(this.Qq=s,this.Be=[],a=0;a<this.Ba;a++){s=h.Wa(this.ld(a));for(var o=h.te(this.ld(a)),u=0;u<s;u++)this.Be[this.Xs[a]+u]=o}}else this.Qq=this.Ba=0}return h.prototype.ld=function(a){if(0>a||a>this.Ba)throw c.i.O();return this.dg[a]},h.prototype.Rf=function(a){return this.wh[a]},h.gz=function(a){return h.EM[a]},h.Vp=function(a){return h.NM[a]},h.Wa=function(a){return h.mM[a]},h.prototype.hasAttribute=function(a){return 0<=this.wh[a]},h.prototype.dG=function(){return this.hasAttribute(1)},h.te=function(a){return h.$C[a]},h.prototype.GR=function(a){return this.Xs[a]},h.yG=function(a,s){return h.$C[a]===s},h.prototype.Nb=function(a){return this===a},h.prototype.Cn=function(){for(var a=c.P.Vh(this.dg[0]),s=1;s<this.Ba;s++)a=c.P.Vh(this.dg[s],a);return a},h.prototype.bk=function(a){return this.Xs[a]},h.prototype.dc=function(){return this.yl},h.prototype.Fd=function(a){return this.dg[a]},h.$C=[0,0,NaN,0,0,0,0,0,0],h.EM=[1,1,1,0,2,1,1,1,0],h.NM=[1,1,1,2,0,0,0,0,2],h.mM=[2,1,1,1,3,1,2,3,2],h}();c.sa=w}(H||(H={})),function(c){function C(p,f,m){var b=f-(p=new u(p)).e,_=p.c;for(_.length>++f&&w(p,b,u.gu),_[0]?m?b=f:(_=p.c,b=p.e+b+1):++b;_.length<b;_.push(0));return b=p.e,m===1||m&&(f<=b||b<=a)?(0>p.Cd&&_[0]?"-":"")+(1<_.length?_[0]+"."+_.join("").slice(1):_[0])+(0>b?"e":"e+")+b:p.toString()}function w(p,f,m,b){var _=p.c,M=p.e+f+1;if(m===1?b=5<=_[M]:m===2?b=5<_[M]||_[M]==5&&(b||0>M||_[M+1]!==void 0||1&_[M-1]):m===3?b=b||_[M]!==void 0||0>M:(b=!1,m!==0&&h("!Big.RM!")),1>M||!_[0])b?(p.e=-f,p.c=[1]):p.c=[p.e=0];else{if(_.length=M--,b)for(;9<++_[M];)_[M]=0,M--||(++p.e,_.unshift(1));for(M=_.length;!_[--M];_.pop());}return p}function h(p){throw(p=Error(p)).name="BigError",p}var a=-7,s=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=function(){function p(f){if(f instanceof p)this.Cd=f.Cd,this.e=f.e,this.c=f.c.slice();else{var m,b,_;for(f===0&&0>1/f?f="-0":o.test(f+="")||h(NaN),this.Cd=f.charAt(0)=="-"?(f=f.slice(1),-1):1,-1<(m=f.indexOf("."))&&(f=f.replace(".","")),0<(b=f.search(/e/i))?(0>m&&(m=b),m+=+f.slice(b+1),f=f.substring(0,b)):0>m&&(m=f.length),b=0;f.charAt(b)=="0";b++);if(b==(_=f.length))this.c=[this.e=0];else{for(;f.charAt(--_)=="0";);for(this.e=m-b-1,this.c=[],m=0;b<=_;this.c[m++]=+f.charAt(b++));}}}return p.prototype.abs=function(){var f=new p(this);return f.Cd=1,f},p.prototype.cmp=function(f){var m=this.c,b=(f=new p(f)).c,_=this.Cd,M=f.Cd,T=this.e,A=f.e;if(!m[0]||!b[0])return m[0]?_:b[0]?-M:0;if(_!=M)return _;if(f=0>_,T!=A)return T>(A^f)?1:-1;for(_=-1,M=(T=m.length)<(A=b.length)?T:A;++_<M;)if(m[_]!=b[_])return m[_]>(b[_]^f)?1:-1;return T==A?0:T>(A^f)?1:-1},p.prototype.lm=function(f){var m=this.c,b=(f=new p(f)).c,_=this.Cd==f.Cd?1:-1,M=p.tr;if((M!==~~M||0>M||1e6<M)&&h("!Big.DP!"),!m[0]||!b[0])return m[0]==b[0]&&h(NaN),b[0]||h(_/0),new p(0*_);var T,A,O=b.slice(),R=T=b.length,j=m.length,z=m.slice(0,T),V=z.length,F=f,G=F.c=[],Z=0,K=M+(F.e=this.e-f.e)+1;for(F.Cd=_,_=0>K?0:K,O.unshift(0);V++<T;z.push(0));do{for(A=0;10>A;A++){if(T!=(V=z.length))var re=T>V?1:-1;else{var te=-1;for(re=0;++te<T;)if(b[te]!=z[te]){re=b[te]>z[te]?1:-1;break}}if(!(0>re))break;for(f=V==T?b:O;V;){if(z[--V]<f[V]){for(te=V;te&&!z[--te];z[te]=9);--z[te],z[V]+=10}z[V]-=f[V]}for(;!z[0];z.shift());}G[Z++]=re?A:++A,z[0]&&re?z[V]=m[R]||0:z=[m[R]]}while((R++<j||z[0]!==void 0)&&_--);return G[0]||Z==1||(G.shift(),F.e--),Z>K&&w(F,M,p.gu,z[0]!==void 0),F},p.prototype.aS=function(){return 0<this.cmp(0)},p.prototype.iT=function(){return 0>this.cmp(0)},p.prototype.kt=function(f){var m,b=this.Cd,_=(f=new p(f)).Cd;if(b!=_)return f.Cd=-_,this.oI(f);var M=this.c.slice(),T=this.e,A=f.c,O=f.e;if(!M[0]||!A[0])return A[0]?(f.Cd=-_,f):new p(M[0]?this:0);if(b=T-O){for((m=0>b)?(b=-b,T=M):(O=T,T=A),T.reverse(),_=b;_--;T.push(0));T.reverse()}else for(T=((m=M.length<A.length)?M:A).length,b=_=0;_<T;_++)if(M[_]!=A[_]){m=M[_]<A[_];break}if(m&&(T=M,M=A,A=T,f.Cd=-f.Cd),0<(_=(T=A.length)-(m=M.length)))for(;_--;M[m++]=0);for(_=m;T>b;){if(M[--T]<A[T]){for(m=T;m&&!M[--m];M[m]=9);--M[m],M[T]+=10}M[T]-=A[T]}for(;M[--_]==0;M.pop());for(;M[0]==0;)M.shift(),--O;return M[0]||(f.Cd=1,M=[O=0]),f.c=M,f.e=O,f},p.prototype.oI=function(f){var m=this.Cd,b=(f=new p(f)).Cd;if(m!=b)return f.Cd=-b,this.kt(f);b=this.e;var _=this.c,M=f.e,T=f.c;if(!_[0]||!T[0])return T[0]?f:new p(_[0]?this:0*m);if(_=_.slice(),m=b-M){for(0<m?(M=b,b=T):(m=-m,b=_),b.reverse();m--;b.push(0));b.reverse()}for(0>_.length-T.length&&(b=T,T=_,_=b),m=T.length,b=0;m;)b=(_[--m]=_[m]+T[m]+b)/10|0,_[m]%=10;for(b&&(_.unshift(b),++M),m=_.length;_[--m]==0;_.pop());return f.c=_,f.e=M,f},p.prototype.pow=function(f){var m=this,b=new p(1),_=b,M=0>f;for((f!==~~f||-1e6>f||1e6<f)&&h("!pow!"),f=M?-f:f;1&f&&(_=_.nr(m)),f>>=1;)m=m.nr(m);return M?b.lm(_):_},p.prototype.round=function(f,m){var b=this;return f==null?f=0:(f!==~~f||0>f||1e6<f)&&h("!round!"),w(b=new p(b),f,m??p.gu),b},p.prototype.sqrt=function(){var f=this.c,m=this.Cd,b=this.e,_=new p("0.5");if(!f[0])return new p(this);0>m&&h(NaN),(m=Math.sqrt(this.toString()))==0||m==1/0?((m=f.join("")).length+b&1||(m+="0"),(f=new p(Math.sqrt(m).toString())).e=((b+1)/2|0)-(0>b||1&b)):f=new p(m.toString()),m=f.e+(p.tr+=4);do b=f,f=_.nr(b.oI(this.lm(b)));while(b.c.slice(0,m).join("")!==f.c.slice(0,m).join(""));return w(f,p.tr-=4,p.gu),f},p.prototype.nr=function(f){var m=this.c,b=(f=new p(f)).c,_=m.length,M=b.length,T=this.e,A=f.e;if(f.Cd=this.Cd==f.Cd?1:-1,!m[0]||!b[0])return new p(0*f.Cd);if(f.e=T+A,_<M){var O=m;m=b,b=O,A=_,_=M,M=A}for(O=Array(A=_+M);A--;O[A]=0);for(T=M;T--;){for(M=0,A=_+T;A>T;)M=O[A]+b[T]*m[A-T-1]+M,O[A--]=M%10,M=M/10|0;O[A]=(O[A]+M)%10}for(M&&++f.e,O[0]||O.shift(),T=O.length;!O[--T];O.pop());return f.c=O,f},p.prototype.toString=function(){var f=this.e,m=this.c.join(""),b=m.length;if(f<=a||f>=s)m=m.charAt(0)+(1<b?"."+m.slice(1):"")+(0>f?"e":"e+")+f;else if(0>f){for(;++f;m="0"+m);m="0."+m}else if(0<f)if(++f>b)for(f-=b;f--;m+="0");else f<b&&(m=m.slice(0,f)+"."+m.slice(f));else 1<b&&(m=m.charAt(0)+"."+m.slice(1));return 0>this.Cd&&this.c[0]?"-"+m:m},p.prototype.toExponential=function(f){return f==null?f=this.c.length-1:(f!==~~f||0>f||1e6<f)&&h("!toExp!"),C(this,f,1)},p.prototype.toFixed=function(f){var m=a,b=s;if(a=-(s=1/0),f==null)var _=this.toString();else f===~~f&&0<=f&&1e6>=f&&(_=C(this,this.e+f),0>this.Cd&&this.c[0]&&0>_.indexOf("-")&&(_="-"+_));return a=m,s=b,_||h("!toFix!"),_},p.prototype.toPrecision=function(f){return f==null?this.toString():((f!==~~f||1>f||1e6<f)&&h("!toPre!"),C(this,f-1,2))},p.tr=20,p.gu=1,p}();c.jp=u}(H||(H={})),function(c){var C=function(){function w(h){this.lf=h}return w.prototype.qr=function(h,a,s){var o=new c.h,u=new c.h,p=this.lf;s.Wd(h,a,function(f,m){return p.uc(2*f,o),p.uc(2*m,u),o.compare(u)})},w.prototype.bq=function(h){return this.lf.read(2*h+1)},w}();c.si=function(){function w(){}return w.cq=function(h){if(h.B())return!1;var a=h.K();return a==1736?h.He()!=0:a==1607?(a=[!1],w.nE(h,!0,a),a[0]):!(a!=197&&(!c.ba.zd(a)||h.wG()))},w.im=function(h){var a=h.K();if(a==1736)return a=new c.Ua(h.description),h.B()||h.ZC(a),a;if(a==1607)return w.nE(h,!1,null);if(a==197)return a=new c.Ua(h.description),h.B()||a.bd(h,!1),a;if(c.ba.zd(a)){if(a=new c.ee(h.description),!h.B()&&!h.wG()){var s=new c.Ta;h.Vo(s),a.add(s),h.Ro(s),a.add(s)}return a}if(c.ba.Tn(a))return null;throw c.i.O()},w.nE=function(h,a,s){s!=null&&(s[0]=!1);var o=null;if(a||(o=new c.ee(h.description)),!h.B()){var u=new c.ja(0);u.Jb(2*h.ea());for(var p=0,f=h.ea();p<f;p++)if(0<h.Ka(p)&&!h.Pn(p)){var m=h.Ca(p);u.add(m),m=h.Wc(p)-1,u.add(m)}if(0<u.size){f=new c.Zt,p=h.vb(0),f.sort(u,0,u.size,new C(p)),f=new c.h,p.uc(2*u.get(0),f),m=0;for(var b=1,_=new c.Ta,M=new c.h,T=1,A=u.size;T<A;T++)if(p.uc(2*u.get(T),M),M.rb(f))u.get(m)>u.get(T)?(u.set(m,2147483647),m=T):u.set(T,2147483647),b++;else{if(!(1&b))u.set(m,2147483647);else if(a)return s!=null&&(s[0]=!0),null;f.N(M),m=T,b=1}if(!(1&b))u.set(m,2147483647);else if(a)return s!=null&&(s[0]=!0),null;if(!a)for(u.Wd(0,u.size,function(O,R){return O-R}),T=0,A=u.size;T<A&&u.get(T)!=2147483647;T++)h.we(u.get(T),_),o.add(_)}}return a?null:o},w}()}(H||(H={})),function(c){var C=function(){function w(){this.zf=new c.ja(0),this.As=new c.ja(0),this.zH=1,this.Gs=NaN}return w.prototype.sort=function(h,a,s,o){if(32>s-a)o.qr(a,s,h);else{var u=!0;try{for(var p=1/0,f=-1/0,m=a;m<s;m++){var b=o.bq(h.get(m));b<p&&(p=b),b>f&&(f=b)}if(this.reset(s-a,p,f,s-a)){for(m=a;m<s;m++){var _=h.get(m);b=o.bq(_);var M=this.uF(b);this.zf.set(M,this.zf.get(M)+1),this.As.write(m-a,_)}var T=this.zf.get(0);this.zf.set(0,0),m=1;for(var A=this.zf.size;m<A;m++){var O=this.zf.get(m);this.zf.set(m,T),T+=O}for(m=a;m<s;m++){_=this.As.read(m-a),b=o.bq(_),M=this.uF(b);var R=this.zf.get(M);h.set(R+a,_),this.zf.set(M,R+1)}u=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(u)o.qr(a,s,h);else{for(m=s=0,A=this.zf.size;m<A;m++)u=s,(s=this.zf.get(m))>u&&o.qr(a+u,a+s,h);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},w.prototype.reset=function(h,a,s,o){return!(2>h||s==a)&&(h=Math.min(w.cL,h),this.zf.Jb(h),this.zf.resize(h),this.zf.Yj(0,0,this.zf.size),this.zH=a,this.As.resize(o),this.Gs=(s-a)/(h-1),!0)},w.prototype.uF=function(h){return c.P.truncate((h-this.zH)/this.Gs)},w.cL=65536,w}();c.Zt=C}(H||(H={})),function(c){var C,w;(w=C||(C={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var h=function(){function p(){}return p.Su=function(f,m,b,_,M,T){var A=new p;return A.Km=new c.h,A.Xm=new c.h,A.cw=new c.h,A.Km.N(f),A.Xm.N(m),A.cw.N(b),A.Eo=_,A.sh=M,A.uh=T,A},p.construct=function(f,m,b,_){var M=new p;return M.Km=new c.h,M.Xm=new c.h,M.cw=new c.h,M.Km.N(f),M.Xm.N(m),M.cw.Sc(),M.Eo=4,M.sh=b,M.uh=_,M},p}(),a=function(){function p(f,m,b,_,M,T){this.$v=null,this.za=0,this.zA=f,this.XH=this.VH=0,this.La=m,this.Oj=b,this.xk=_,this.Fq=M,this.Vb=T}return p.prototype.next=function(){for(var f=new c.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,f),this.za++,!f.B())break}var m=!1;if(this.$v==null&&(this.VH=f.Ng(),this.XH=f.kh(),this.$v=u.buffer(f,this.La,this.Oj,this.xk,this.Fq,this.Vb),m=!0),this.za<this.zA.I()){var b=new c.Ea;this.$v.copyTo(b)}else b=this.$v;if(!m){m=new c.Ed;var _=f.Ng()-this.VH;f=f.kh()-this.XH,m.ig(_,f),b.Pc(m)}return b},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),s=function(){function p(f,m){this.Xa=f,this.za=0,this.qq=m}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var m=this.za;if(this.za++,!f.Pn(m))for(var b=f.Oa(f.Wc(m)-1);this.za<f.ea();){var _=f.Oa(f.Ca(this.za));if(f.Pn(this.za)||_!=b)break;b=f.Oa(f.Wc(this.za)-1),this.za++}if(this.za-m==1)return this.Xa.fE(this.Xa.Y,m,this.qq);for((b=new c.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,m,!0),m+=1;m<this.za;m++)b.Fr(this.Xa.Y,m,0,f.tv(m),!1);return this.Xa.fE(b,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),o=function(){function p(f){this.Xa=f,this.za=0}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var m=this.za;for(f.Kr(this.za),this.za++;this.za<f.ea()&&!(0<f.Kr(this.za));)this.za++;return m==0&&this.za==f.ea()?this.Xa.ly(f,0,f.ea()):this.Xa.ly(f,m,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),u=function(){function p(f){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=f,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return p.buffer=function(f,m,b,_,M,T){if(f==null||0>_)throw c.i.O();if(f.B())return new c.Ea(f.description);var A=new c.l;return f.yc(A),0<m&&A.X(m,m),(T=new p(T)).Oj=b,T.Y=f,T.ra=c.ua.Xd(b,A,!0),T.dt=c.ua.Xd(null,A,!0),T.La=m,T.ET=f.K(),0>=M&&(M=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(_)||_==0?_=1e-5*T.sb:_>.5*T.sb&&(_=.5*T.sb),12>M&&(M=12),(f=Math.abs(m)*(1-Math.cos(Math.PI/M)))>_?_=f:(f=Math.PI/Math.acos(1-_/Math.abs(m)))<M-1&&12>(M=c.P.truncate(f))&&(M=12,_=Math.abs(m)*(1-Math.cos(Math.PI/M))),T.xk=_,T.Fq=M,T.oA=Math.min(T.dt,.25*_),T.gE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var f=this.lE();f=c.P.truncate((f+3)/4);var m=.5*Math.PI/f;this.jA=m;for(var b=0;b<4*f;b++)this.Jd.push(null);var _=Math.cos(m);m=Math.sin(m);var M=c.h.construct(0,1);for(b=0;b<f;b++)this.Jd[b+0*f]=c.h.construct(M.y,-M.x),this.Jd[b+1*f]=c.h.construct(-M.x,-M.y),this.Jd[b+2*f]=c.h.construct(-M.y,M.x),this.Jd[b+3*f]=M,(M=c.h.construct(M.x,M.y)).Ct(_,m)},p.prototype.gE=function(){var f=this.Y.K();if(c.ba.zd(f))return(f=new c.Ua(this.Y.description)).pc(this.Y,!0),this.Y=f,this.gE();if(this.La<=this.ra){if(!c.ba.PS(f))return new c.Ea(this.Y.description);if(0>=this.La&&(f=new c.l,this.Y.A(f),f.S()<=2*-this.La||f.da()<=2*this.La))return new c.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw c.i.Ra()}},p.prototype.MN=function(){if(this.zG(this.Y)){var f=new c.Ta;this.Y.we(0,f);var m=new c.l;return this.Y.A(m),f.Db(m.tf()),this.Iu(f)}return this.Y=this.RV(this.Y),f=new s(this,this.qq),c.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.LN=function(){if(this.La==0)return this.Y;var f=c.$l.local();if(this.ev(),this.Y=f.W(this.Y,null,!1,this.Vb),0>this.La){var m=this.Y;return m=this.ly(m,0,m.ea()),f.W(m,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(f=new c.Ta,this.Y.we(0,f),m=new c.l,this.Y.A(m),f.Db(m.tf()),this.Iu(f)):(f=new o(this),c.Ih.local().W(f,this.Oj,this.Vb).next())},p.prototype.ly=function(f,m,b){for(var _=new c.Ea(f.description);m<b;m++)if(!(1>f.Ka(m))){var M=f.Kr(m),T=new c.l;if(f.Tj(m,T),0<this.La){if(0<M)if(this.AG(f,m))M=new c.Ta,f.we(f.Ca(m),M),M.Db(T.tf()),this.Au(_,M);else{var A=M=new c.Ua(f.description);A=c.au.EG(this.Y,m)||this.Bn(this.Y,m,A,!0,1)==2?this.eE(f,m):this.An(M),_.add(A,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(A=M=new c.Ua(f.description),this.Bn(this.Y,m,A,!0,1),M.B()))){var O=new c.l;for(O.L(T),O.X(this.sb,this.sb),A.vp(O),T=1,M=(A=this.An(M)).ea();T<M;T++)_.addPath(A,T,!0)}}else if(0<M){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(A=M=new c.Ua(f.description),this.Bn(this.Y,m,A,!0,-1),M.B())))for(O=new c.l,A.yc(O),O.X(this.sb,this.sb),A.vp(O),T=1,M=(A=this.An(M)).ea();T<M;T++)_.addPath(A,T,!0)}else for(A=M=new c.Ua(f.description),this.Bn(this.Y,m,A,!0,-1),T=0,M=(A=this.An(M)).ea();T<M;T++)_.addPath(A,T,!0)}if(0<this.La)return 1<_.ea()?_=this.An(_):p.kx(_);if(f=new c.l,_.yc(f),_.B())return p.kx(_);for(f.X(this.sb,this.sb),_.vp(f),_=this.An(_),f=new c.Ea(_.description),T=1,M=_.ea();T<M;T++)f.addPath(_,T,!1);return p.kx(f)},p.prototype.KN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(f){var m=new c.Ea(this.Y.description);return this.Au(m,f),this.oX(m)},p.prototype.JN=function(){var f=new a(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return c.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.GN=function(){var f=new c.Ea(this.Y.description);if(0>=this.La){if(this.La==0)f.bd(this.Y,!1);else{var m=new c.Hh;this.Y.dn(m),m.X(this.La,this.La),f.bd(m,!1)}return f}return f.bd(this.Y,!1),this.Y=f,this.eE(f,0)},p.prototype.eE=function(f,m){this.ev();var b=new c.Ea(f.description),_=new c.h,M=new c.h,T=new c.h,A=new c.h,O=new c.h,R=new c.h,j=new c.h,z=new c.h,V=f.Ka(m),F=f.Ca(m),G=0;for(m=f.Ka(m);G<m;G++){if(f.D(F+G,M),f.D(F+(G+1)%V,A),f.D(F+(G+2)%V,R),j.vc(A,M),j.length()==0||(j.Jv(),j.normalize(),j.scale(this.sb),_.add(j,M),T.add(j,A),G==0?b.Nt(_):b.Ei(_),b.Ei(T),z.vc(R,A),z.length()==0))throw c.i.Ra();z.Jv(),z.normalize(),z.scale(this.sb),O.add(z,A),this.BD(b,A,T,O,!1)}return p.kx(b)},p.prototype.fE=function(f,m,b){if(this.ev(),1>f.Ka(m))return null;if(this.AG(f,m)&&0<this.La){b=new c.Ta,f.we(f.Ca(m),b);var _=new c.l;return f.Tj(m,_),b.Db(_.tf()),this.Iu(b)}if(_=new c.Ua(f.description),f.Pn(m))this.Bn(f,m,_,b,1),this.Bn(f,m,_,b,-1);else{var M=new c.Ua(f.description);M.addPath(f,m,!1),M.Fr(f,m,0,f.tv(m),!1),this.Bn(M,0,_,b,1)}return this.An(_)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw c.i.hu("user_canceled")},p.prototype.An=function(f){return c.Hg.Ok(f,this.dt,!0,!0,this.Vb)},p.prototype.lE=function(){if(this.xk==0)return this.Fq;var f=1-this.xk*Math.abs(this.Mv);return 4>(f=-1>f?4:2*Math.PI/Math.acos(f)+.5)?f=4:f>this.Fq&&(f=this.Fq),c.P.truncate(f)},p.prototype.BD=function(f,m,b,_,M){this.ev();var T=new c.h;T.vc(b,m),T.scale(this.Mv);var A=new c.h;A.vc(_,m),A.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.jA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(A=Math.atan2(A.y,A.x)/this.jA)&&(A=this.Jd.length+A),(A=this.Jd.length-A)<T&&(A+=this.Jd.length);var O=c.P.truncate(A);A=c.P.truncate(Math.ceil(T)),(T=new c.h).N(this.Jd[A%this.Jd.length]),T.Dt(this.sb,m);var R=10*this.ra;for(T.sub(b),T.length()<R&&(A+=1),T.N(this.Jd[O%this.Jd.length]),T.Dt(this.sb,m),T.sub(_),T.length()<R&&--O,b=O-A,b++,O=0,A%=this.Jd.length;O<b;O++,A=(A+1)%this.Jd.length)T.N(this.Jd[A]),T.Dt(this.sb,m),f.Ei(T),this.Zq();M&&f.Ei(_)},p.prototype.Bn=function(f,m,b,_,M){var T=new c.hd,A=T.hN(f,m);if(T.Ip(this.oA,!1,!1),2>T.I(A))return 0>M||(M=f,T=new c.Ta,M.we(M.Ca(m),T),this.Au(b,T)),1;var O=T.Oa(T.Ya(T.Ob(A))),R=new c.Ed;if(R.ig(-O.x,-O.y),T.Pc(R),_&&(this.oQ(T,A,M),2>T.I(A)))return 0>M||(M=f,T=new c.Ta,M.we(M.Ca(m),T),this.Au(b,T)),1;this.$d.length=0;var j=T.Ob(A);m=T.Ya(j);var z=M==1?T.Na(m):T.V(m);f=M==1?T.V(m):T.Na(m);var V=!0;_=new c.h,A=new c.h;var F=new c.h,G=new c.h,Z=new c.h,K=new c.h,re=new c.h,te=new c.h,he=new c.h,ye=new c.h,pe=this.sb;j=T.Ka(j);for(var De=0;De<j;De++)T.D(f,A),V&&(T.D(m,_),T.D(z,F),te.vc(_,F),te.normalize(),ye.HG(te),ye.scale(pe),G.add(ye,_)),re.vc(A,_),re.normalize(),he.HG(re),he.scale(pe),Z.add(_,he),z=te.yi(re),V=te.Sh(re),0>z||0>V&&z==0?this.$d.push(h.Su(G,Z,_,2,this.$d.length+1,this.$d.length-1)):G.rb(Z)||(this.$d.push(h.construct(G,_,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(h.construct(_,Z,this.$d.length+1,this.$d.length-1,"dummy"))),K.add(A,he),this.$d.push(h.Su(Z,K,_,1,this.$d.length+1,this.$d.length-1)),G.N(K),ye.N(he),F.N(_),_.N(A),te.N(re),z=m,m=f,V=!1,f=M==1?T.V(m):T.Na(m);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(b),R.ig(O.x,O.y),b.TD(R,b.ea()-1),1},p.prototype.TV=function(f){for(var m=this.uO(),b=!0,_=m+1,M=m;_!=m;M=_){var T=this.$d[M];_=T.sh!=-1?T.sh:(M+1)%this.$d.length,T.Eo!=0&&(b&&f.Nt(T.Km),T.Eo==2?this.BD(f,T.cw,T.Km,T.Xm,!0):f.Ei(T.Xm),b=!1)}},p.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var f=0,m=0,b=this.$d.length;m<b;){var _=this.$d[m];if(3&_.Eo){f=m;break}m=_.sh}for(b=f+1,m=f;b!=f;m=b){b=(_=this.$d[m]).sh;for(var M=1,T=null;b!=m&&!(3&(T=this.$d[b]).Eo);)b=T.sh,M++;M!=1&&(_.Eo&T.Eo)==1&&(this.Ns==null&&(this.Ns=new c.zb,this.nw=new c.zb),this.Ns.Ec(_.Km),this.Ns.Rc(_.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(_.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),_.sh=b,T.uh=m))}return f},p.prototype.Hv=function(f,m,b){var _=new c.h;if(_.vc(b,f),b=_.length(),0<(b=this.sb*this.sb-b*b*.25)){b=Math.sqrt(b),_.normalize(),_.cr();var M=new c.h;if(M.vc(m,f),M.Sh(_)+b>=this.sb)return!0}return!1},p.prototype.oQ=function(f,m,b){for(var _=0;1>_;_++){var M=!1,T=f.Ob(m),A=f.Ka(T);if(A==0)break;var O=A;if(3>A)break;!f.ec(T)&&(O=A-1),T=f.Ya(T),A=0<b?f.Na(T):f.V(T);for(var R=0<b?f.V(T):f.Na(T),j=A,z=!0,V=new c.h,F=new c.h,G=new c.h,Z=new c.h,K=new c.h,re=c.h.construct(0,0),te=new c.h,he=new c.h,ye=new c.h,pe=new c.h,De=this.sb,Se=0,Qe=0;Qe<O&&(f.D(R,F),z&&(f.D(T,V),f.D(A,G),j=A),he.vc(V,G),he.normalize(),te.vc(F,V),te.normalize(),j!=R);){var We=he.yi(te),Ce=he.Sh(te),Zt=!0;if(0>We||0>Ce&&We==0||!this.Hv(G,V,F)||(re.N(F),Zt=!1,++Se,M=!0),Zt){if(0<Se)for(;(We=0<b?f.Na(j):f.V(j))!=T;){if(f.D(We,Z),!this.Hv(Z,G,re)){We!=R&&this.Hv(Z,G,F)&&this.Hv(Z,V,F)&&(G.N(Z),j=We,Zt=!1,++Se);break}G.N(Z),j=We,Zt=!1,++Se}if(!Zt)continue;if(0<Se){for(j=0<b?f.Na(A):f.V(A),z=1;z<Se;z++)Zt=0<b?f.Na(j):f.V(j),f.qd(j,!0),j=Zt;ye.vc(V,G),Se=De*De-(Se=ye.length())*Se*.25,De-(Se=Math.sqrt(Se))>.5*this.xk?(K.add(G,V),K.scale(.5),ye.normalize(),ye.cr(),pe.N(ye),pe.scale(De-Se),K.add(pe),f.mf(A,K)):f.qd(A,!0),Se=0}G.N(V),j=T}V.N(F),A=T,T=R,R=0<b?f.V(T):f.Na(T),Qe++,z=!1}if(0<Se){for(j=0<b?f.Na(A):f.V(A),z=1;z<Se;z++)Zt=0<b?f.Na(j):f.V(j),f.qd(j,!0),j=Zt;K.add(G,V),K.scale(.5),ye.vc(V,G),Se=De*De-(Se=ye.length())*Se*.25,Se=Math.sqrt(Se),ye.normalize(),ye.cr(),pe.N(ye),pe.scale(De-Se),K.add(pe),f.mf(A,K)}if(f.Ip(this.oA,!1,!1),!M)break}},p.prototype.AG=function(f,m){if(f.Ka(m)==1)return!0;var b=new c.l;return f.Tj(m,b),Math.max(b.S(),b.da())<.5*this.xk},p.prototype.zG=function(f){var m=new c.l;return f.A(m),Math.max(m.S(),m.da())<.5*this.xk},p.prototype.RV=function(f){for(var m=0,b=0,_=(f=c.zC.local().W(f,.25*this.xk,!1,this.Vb)).ea();b<_;b++)m=Math.max(f.Ka(b),m);return 32>m?(this.qq=!1,f):(this.qq=!0,c.Hg.Ok(f,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(f,m){if(m=m.D(),this.Jd!=null&&this.Jd.length!==0){var b=new c.h;b.N(this.Jd[0]),b.Dt(this.sb,m),f.Nt(b);for(var _=1,M=this.Jd.length;_<M;_++)b.N(this.Jd[_]),b.Dt(this.sb,m),f.Ei(b)}else{_=this.lE(),b=c.P.truncate((_+3)/4),_=.5*Math.PI/b,M=Math.cos(_);for(var T=Math.sin(_),A=new c.h,O=3;0<=O;O--){switch(A.na(0,this.sb),O){case 0:for(_=0;_<b;_++)f.Aj(A.x+m.x,A.y+m.y),A.Ct(M,T);break;case 1:for(_=0;_<b;_++)f.Aj(-A.y+m.x,A.x+m.y),A.Ct(M,T);break;case 2:for(_=0;_<b;_++)f.Aj(-A.x+m.x,-A.y+m.y),A.Ct(M,T);break;default:for(f.rx(A.y+m.x,-A.x+m.y),_=1;_<b;_++)A.Ct(M,T),f.Aj(A.y+m.x,-A.x+m.y)}this.Zq()}}},p.kx=function(f){return f.Eh(1,0),f},p.prototype.oX=function(f){return f.Eh(2,this.ra),f.hm(),f},p}();c.CK=u}(H||(H={})),function(c){var C=function(){function w(h){this.Da=h,this.g=new c.hd,this.ed=new c.ja(0)}return w.prototype.Nh=function(h,a,s){switch(a){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},w.prototype.vy=function(h,a){return h.K()==1736?this.xy(h,a):this.yy(h)},w.prototype.xy=function(h,a){if(this.Da.S()==0||this.Da.da()==0)return h.Ja();var s=new c.l;h.yc(s),this.Y=this.g.Ib(h);var o=new c.l,u=new c.l,p=new c.h,f=new c.h,m=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0];new c.jg;var _=new c.zb,M=new c.ja(0);M.Jb(Math.min(100,h.I()));for(var T=!1,A=0;!T&&4>A;A++){var O=!1,R=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,O=s.v<=j&&s.C>=j;break;case 1:j=this.Da.G,O=s.G<=j&&s.H>=j;break;case 2:j=this.Da.C,O=s.v<=j&&s.C>=j;break;case 3:j=this.Da.H,O=s.G<=j&&s.H>=j}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var z=-1,V=-1,F=this.g.Ya(O),G=F;do{var Z=this.g.cc(G);Z==null&&(Z=_,this.g.D(G,p),Z.Ec(p),this.g.D(this.g.V(G),f),Z.Rc(f)),Z.A(o);var K=this.Nh(o,A,j),re=0,te=-1;if(K==-1){re=0<(Z=Z.fq(R,j,m,b))?this.g.Wl(G,b,Z):0,re+=1;var he=G,ye=this.g.V(he);for(Z=0;Z<re;Z++){if(this.g.D(he,p),this.g.D(ye,f),(te=this.g.cc(he))==null&&((te=_).Ec(p),te.Rc(f)),te.A(u),(te=this.Nh(u,A,j))==-1){if(R)(te=Math.abs(p.y-j))<(pe=Math.abs(f.y-j))?(p.y=j,this.g.mf(he,p)):(f.y=j,this.g.mf(ye,f));else{te=Math.abs(p.x-j);var pe=Math.abs(f.x-j);te<pe?(p.x=j,this.g.mf(he,p)):(f.x=j,this.g.mf(ye,f))}(te=this.g.cc(he))==null&&((te=_).Ec(p),te.Rc(f)),te.A(u),te=this.Nh(u,A,j)}pe=z,z=te,V==-1&&(V=z),pe==0&&z==1||pe==1&&z==0||pe!=0||z!=0||M.add(he),z==1&&(T=!1),te=he=ye,ye=this.g.V(ye)}}re==0&&(pe=z,z=K,V==-1&&(V=z),pe==0&&z==1||pe==1&&z==0||pe!=0||z!=0||M.add(G),z==1&&(T=!1),te=this.g.V(G)),G=te}while(G!=F);for(V==0&&z==0&&M.add(F),Z=0,z=M.size;Z<z;Z++)V=M.get(Z),this.g.qd(V,!1);M.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return T?h.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(h){var a=new c.l,s=new c.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new c.jg,f=h,m=new c.l;h.yc(m);for(var b=0;4>b;b++){var _=!1,M=(1&b)!=0,T=0;switch(b){case 0:T=this.Da.v,_=m.v<=T&&m.C>=T;break;case 1:T=this.Da.G,_=m.G<=T&&m.H>=T;break;case 2:T=this.Da.C,_=m.v<=T&&m.C>=T;break;case 3:T=this.Da.H,_=m.G<=T&&m.H>=T}if(_){_=f,f=h.Ja(),(_=_.Ha()).aj();for(var A,O=new c.h;_.ab();)for(var R,j=!0;_.Ia();){var z=_.ia();z.A(a);var V=this.Nh(a,b,T);if(V==-1){if(0<(V=z.fq(M,T,o,u))){var F=0;A=z.bc();for(var G=0;G<=V;G++)if(F!=(R=G<V?u[G]:1)){z.dh(F,R,p);var Z=p.get();Z.Ec(A),G<V&&(M?(O.x=o[G],O.y=T):(O.x=T,O.y=o[G]),Z.Rc(O)),Z.A(s);var K=this.Nh(s,b,T);if(K==-1){if(A=Z.bc(),F=Z.xc(),M)(K=Math.abs(A.y-T))<(re=Math.abs(F.y-T))?(A.y=T,Z.Ec(A)):(F.y=T,Z.Rc(F));else{K=Math.abs(A.x-T);var re=Math.abs(F.x-T);K<re?(A.x=T,Z.Ec(A)):(F.x=T,Z.Rc(F))}Z.A(s),K=this.Nh(s,b,T)}A=Z.xc(),F=R,(R=K)==1?(f.pc(Z,j),j=!1):j=!0}}}else(R=V)==1?(f.pc(z,j),j=!1):j=!0}}}return f},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var h=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var s=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,s=this.g.V(s))this.g.D(s,h),(this.Da.v==h.x||this.Da.C==h.x||this.Da.G==h.y||this.Da.H==h.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(h){for(var a=new c.h,s=new c.h,o=c.P.mg(2048,0),u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u)){var p=this.g.Ya(u),f=p;do{var m=this.g.V(f);this.g.D(f,a);var b=-1;if(a.x==this.Da.v?(this.g.D(m,s),s.x==this.Da.v&&(b=1)):a.x==this.Da.C&&(this.g.D(m,s),s.x==this.Da.C&&(b=1)),a.y==this.Da.G?(this.g.D(m,s),s.y==this.Da.G&&(b=0)):a.y==this.Da.H&&(this.g.D(m,s),s.y==this.Da.H&&(b=0)),b!=-1&&(b=c.h.ub(a,s),!(1>=(b=c.P.truncate(Math.min(Math.ceil(b/h),2048)))))){for(var _=1;_<b;_++)o[_-1]=1*_/b;this.g.Wl(f,o,b-1)}f=m}while(f!=p)}},w.prototype.Xl=function(h,a){var s=this.g.Hd(),o=new c.h,u=new c.ja(0);u.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),m=0,b=this.g.Ka(p);m<b;m++){var _=this.g.V(f);this.g.D(f,o),(h?o.y==a:o.x==a)&&(this.g.D(_,o),(h?o.y==a:o.x==a)&&(this.g.Qa(f,s)!=1&&(u.add(f),this.g.Sa(f,s,1)),this.g.Qa(_,s)!=1&&(u.add(_),this.g.Sa(_,s,1)))),f=_}if(this.g.Ud(s),!(3>u.size)){var M=this;u.Wd(0,u.size,function(K,re){return M.Oh(K,re)}),s=new c.h,p=new c.h,f=new c.h,p.Sc();var T=-1;m=new c.ja(0),b=new c.ja(0),_=this.g.Hd();for(var A=this.g.Hd(),O=0,R=u.size;O<R;O++){var j=u.get(O);if(this.g.D(j,o),!o.rb(p)){if(T!=-1){for(var z=T;z<O;z++){T=u.get(z);var V=this.g.V(T);j=this.g.Na(T);var F=!1;0>this.Oh(T,V)&&(this.g.D(V,s),h?s.y==a:s.x==a)&&(m.add(T),F=!0,this.g.Sa(T,A,1)),0>this.Oh(T,j)&&(this.g.D(j,s),h?s.y==a:s.x==a)&&(F||m.add(T),this.g.Sa(T,_,1))}for(z=0,F=m.size;z<F;z++){if(T=m.get(z),j=this.g.Qa(T,_),V=this.g.Qa(T,A),j==1){j=this.g.Na(T),this.g.D(j,f);var G=[0];if(G[0]=0,!f.rb(o)){var Z=c.h.ub(p,f);G[0]=c.h.ub(f,o)/Z,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(j,G,1),j=this.g.Na(T),this.g.mf(j,o),b.add(j),this.g.Sa(j,_,1),this.g.Sa(j,A,-1)}}V==1&&(V=this.g.V(T),this.g.D(V,f),(G=[0])[0]=0,f.rb(o)||(Z=c.h.ub(p,f),G[0]=c.h.ub(p,o)/Z,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(T,G,1),j=this.g.V(T),this.g.mf(j,o),b.add(j),this.g.Sa(j,_,-1),this.g.Sa(j,A,1)))}T=m,m=b,(b=T).clear(!1)}T=O,p.N(o)}}this.g.Ud(_),this.g.Ud(A)}},w.prototype.Pl=function(h,a){var s=new c.h,o=new c.ja(0);o.Jb(100);for(var u=this.g.Hd(),p=0,f=this.ed.size;p<f;p++){var m=this.ed.get(p);if(m!=-1){var b=this.g.V(m);this.g.D(m,s),(h?s.y==a:s.x==a)&&(this.g.D(b,s),(h?s.y==a:s.x==a)&&(this.g.Qa(m,u)!=-2&&(o.add(m),this.g.Sa(m,u,-2)),this.g.Qa(b,u)!=-2&&(o.add(b),this.g.Sa(b,u,-2))))}}if(o.size!=0){var _=this;for(o.Wd(0,o.size,function(re,te){return _.Oh(re,te)}),p=0,f=o.size;p<f;p++){var M=o.get(p);this.g.Sa(M,u,p)}m=new c.h,(b=new c.h).Sc();var T=-1;for(p=0,f=o.size;p<f;p++)if((M=o.get(p))!=-1&&(this.g.D(M,s),!s.rb(b))){if(T!=-1)for(;;){M=!1;for(var A=1<p-T?p-1:p,O=T;O<A;O++){var R=o.get(O);if(R!=-1){var j=-1,z=this.g.V(R);0>this.Oh(R,z)&&(this.g.D(z,m),h?m.y==a:m.x==a)&&(j=z),z=-1;var V=this.g.Na(R);if(0>this.Oh(R,V)&&(this.g.D(V,m),h?m.y==a:m.x==a)&&(z=V),j!=-1&&z!=-1)this.Mh(R,o,u),this.g.qd(R,!1),this.Mh(j,o,u),this.g.qd(j,!1),M=!0;else if(j!=-1||z!=-1){for(V=O+1;V<p;V++){var F=o.get(V);if(F!=-1){var G=this.g.V(F),Z=-1;0>this.Oh(F,G)&&(this.g.D(G,m),h?m.y==a:m.x==a)&&(Z=G),G=this.g.Na(F);var K=-1;if(0>this.Oh(F,G)&&(this.g.D(G,m),h?m.y==a:m.x==a)&&(K=G),Z!=-1&&K!=-1){this.Mh(F,o,u),this.g.qd(F,!1),this.Mh(Z,o,u),this.g.qd(Z,!1),M=!0;break}if(j!=-1&&K!=-1){this.At(o,R,j,F,K,u),M=!0;break}if(z!=-1&&Z!=-1){this.At(o,F,Z,R,z,u),M=!0;break}}}if(M)break}}}if(!M)break}T=p,b.N(s)}}this.g.Ud(u)},w.prototype.Mh=function(h,a,s){s=this.g.Qa(h,s),a.set(s,-1),s=this.g.Qa(h,this.li),this.ed.set(s,-1),(a=this.g.cd(h))!=-1&&this.g.Ya(a)==h&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(h,a,s,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(s,u),this.g.Cc(u,s),this.Mh(o,h,p),this.g.oi(o,!1),this.Mh(u,h,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var h=0,a=this.ed.size;h<a;h++){var s=this.ed.get(h);s!=-1&&this.g.cj(s,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{s=f,m=0;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);2>=m?(s=this.g.Qa(f,this.li),this.ed.set(s,-1),f=this.g.qd(f,!1),m==2&&(s=this.g.Qa(f,this.li),this.ed.set(s,-1),this.g.qd(f,!1)),m=p,p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)):(this.g.fp(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,m),u+=m,o++,p=this.g.Sb(p))}}for(h=0,a=this.ed.size;h<a;h++)if((s=this.ed.get(h))!=-1&&(p=this.g.cd(s))==-1){p=this.g.wf(this.Y,-1),m=0,f=s;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);2>=m?(s=this.g.Qa(f,this.li),this.ed.set(s,-1),f=this.g.qd(f,!1),m==2&&(0<=(s=this.g.Qa(f,this.li))&&this.ed.set(s,-1),this.g.qd(f,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.fp(p,!1),u+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),h=0,a=this.g.md;a!=-1;a=this.g.ve(a))h+=this.g.I(a);this.g.XB(h)},w.wy=function(h,a,s){return new w(a).vy(h,s)},w.clip=function(h,a,s,o){if(h.B())return h;if(a.B())return h.Ja();if((s=h.K())==33)return o=h.D(),a.contains(o)?h:h.Ja();if(s==197)return o=new c.l,h.A(o),o.Fa(a)?(a=new c.Hh,h.copyTo(a),a.Zo(o),a):h.Ja();var u=new c.l;if(h.yc(u),a.contains(u))return h;if(!a.isIntersecting(u))return h.Ja();if((u=h.Cb)!=null&&(u=u.Hk)!=null){if((u=u.To(a))==1){if(s!=1736)throw c.i.Ra();return(h=new c.Ea(h.description)).vp(a),h}if(u==0)return h.Ja()}switch(s){case 550:s=null,u=h.I();for(var p=h.vb(0),f=0,m=0;m<u;m++)o=new c.h,p.uc(2*m,o),a.contains(o)||(f==0&&(s=h.Ja()),f<m&&s.Gd(h,f,m),f=m+1);return 0<f&&s.Gd(h,f,u),f==0?h:s;case 1736:case 1607:return w.wy(h,a,o);default:throw c.i.Ra()}},w.prototype.Oh=function(h,a){var s=new c.h;return this.g.D(h,s),h=new c.h,this.g.D(a,h),s.compare(h)},w}();c.Vd=C}(H||(H={})),function(c){var C=function(){function w(h,a){this.Da=h,this.g=new c.hd,this.ed=new c.ja(0),this.od=a}return w.prototype.Nh=function(h,a,s){switch(a){case 0:if(h.v<s&&h.C<=s)break;return h.v>=s?1:-1;case 1:if(h.G<s&&h.H<=s)break;return h.G>=s?1:-1;case 2:if(h.v>=s&&h.C>s)break;return h.C<=s?1:-1;case 3:if(!(h.G>=s&&h.H>s))return h.H<=s?1:-1}return 0},w.prototype.vy=function(h,a){return h.K()==1736?this.xy(h,a):this.yy(h)},w.prototype.xy=function(h,a){if(this.Da.S()==0||this.Da.da()==0)return h.Ja();var s=new c.l;h.yc(s),this.Y=this.g.Ib(h);var o=new c.l,u=new c.l,p=new c.h,f=new c.h,m=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0],_=new c.zb,M=new c.ja(0);M.Jb(256);for(var T=!1,A=0;!T&&4>A;A++){var O=!1,R=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,O=s.v<=j&&s.C>=j;break;case 1:j=this.Da.G,O=s.G<=j&&s.H>=j;break;case 2:j=this.Da.C,O=s.v<=j&&s.C>=j;break;case 3:j=this.Da.H,O=s.G<=j&&s.H>=j}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var z=!0,V=-1,F=-1,G=this.g.Ya(O),Z=G;do{var K=this.g.cc(Z);K==null&&(K=_,this.g.D(Z,p),K.Ec(p),this.g.D(this.g.V(Z),f),K.Rc(f)),K.A(o);var re=this.Nh(o,A,j),te=0,he=-1;if(re==-1){te=0<(K=K.fq(R,j,m,b))?this.g.HX(Z,b,K):0,te+=1;var ye=Z,pe=this.g.V(ye);for(K=0;K<te;K++){if(this.g.D(ye,p),this.g.D(pe,f),(he=this.g.cc(ye))==null&&((he=_).Ec(p),he.Rc(f)),he.A(u),(he=this.Nh(u,A,j))==-1){if(R)(he=Math.abs(p.y-j))<(De=Math.abs(f.y-j))?(p.y=j,this.g.mf(ye,p)):(f.y=j,this.g.mf(pe,f));else{he=Math.abs(p.x-j);var De=Math.abs(f.x-j);he<De?(p.x=j,this.g.mf(ye,p)):(f.x=j,this.g.mf(pe,f))}(he=this.g.cc(ye))==null&&((he=_).Ec(p),he.Rc(f)),he.A(u),he=this.Nh(u,A,j)}De=V,V=he,F==-1&&(F=V),De==0&&V==1||De==1&&V==0||De!=0||V!=0||M.add(ye),V==1&&(z=T=!1),he=ye=pe,pe=this.g.V(pe)}}if(te==0&&(De=V,V=re,F==-1&&(F=V),De==0&&V==1||De==1&&V==0||De!=0||V!=0||M.add(Z),V==1&&(z=T=!1),he=this.g.V(Z)),Z=he,256<=M.size){for(K=1,re=M.size-1;K<re;K++)te=M.get(K),this.g.qd(te,!1);M.set(1,M.Gc()),M.Dh(2)}}while(Z!=G);if(!z)for(F==0&&V==0&&M.add(G),K=0,re=M.size;K<re;K++)te=M.get(K),this.g.qd(te,!1);M.clear(!1),O=z||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return T?h.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(h){var a=new c.l,s=new c.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new c.jg,f=h,m=new c.l;h.yc(m);for(var b=new c.h,_=new c.h,M=null,T=null,A=0;4>A;A++){var O=!1,R=(1&A)!=0,j=0;switch(A){case 0:j=this.Da.v,O=m.v<=j&&m.C>=j;break;case 1:j=this.Da.G,O=m.G<=j&&m.H>=j;break;case 2:j=this.Da.C,O=m.v<=j&&m.C>=j;break;case 3:j=this.Da.H,O=m.G<=j&&m.H>=j}if(O)for(O=f,f=h.Ja(),(O=O.Ha()).aj();O.ab();)for(var z,V=!0;O.Ia();){var F=O.ia();F.A(a);var G=this.Nh(a,A,j);if(G==-1){if(0<(G=F.fq(R,j,o,u))){var Z=0;F.$p(b);for(var K=0;K<=G;K++)if(Z!=(z=K<G?u[K]:1)){F.dh(Z,z,p);var re=p.get();re.Ec(b),K<G&&(R?(_.x=o[K],_.y=j):(_.x=j,_.y=o[K]),re.Rc(_)),re.A(s);var te=this.Nh(s,A,j);te==-1&&(M==null&&(M=new c.h),T==null&&(T=new c.h),re.$p(M),re.Vr(T),R?(Z=Math.abs(M.y-j))<(te=Math.abs(T.y-j))?(M.y=j,re.Ec(M)):(T.y=j,re.Rc(T)):(Z=Math.abs(M.x-j))<(te=Math.abs(T.x-j))?(M.x=j,re.Ec(M)):(T.x=j,re.Rc(T)),re.A(s),te=this.Nh(s,A,j)),re.Vr(b),Z=z,(z=te)==1?(f.pc(re,V),V=!1):V=!0}}}else(z=G)==1?(f.pc(F,V),V=!1):V=!0}}return f},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var h=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var s=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,s=this.g.V(s))this.g.D(s,h),(this.Da.v==h.x||this.Da.C==h.x||this.Da.G==h.y||this.Da.H==h.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(h){for(var a=new c.h,s=new c.h,o=null,u=null,p=c.P.mg(2048,0),f=this.g.Ob(this.Y);f!=-1;f=this.g.Sb(f)){var m=this.g.Ya(f),b=m;do{var _=this.g.V(b);this.g.D(b,a);var M=-1;if(a.x==this.Da.v?(this.g.D(_,s),s.x==this.Da.v&&(M=1)):a.x==this.Da.C&&(this.g.D(_,s),s.x==this.Da.C&&(M=1)),a.y==this.Da.G?(this.g.D(_,s),s.y==this.Da.G&&(M=0)):a.y==this.Da.H&&(this.g.D(_,s),s.y==this.Da.H&&(M=0)),M!=-1){if(o==null&&(o=new c.h),u==null&&(u=new c.h),o.N(a),u.na(0,0),M==0){var T=a.x-this.Da.v;u.x=c.mc.sign(s.x-a.x),o.x=h*c.mc.En(Math.floor(Math.abs(T/h)),T)+this.Da.v,0>o.x&&(o.x+=h)}else T=a.y-this.Da.G,u.y=c.mc.sign(s.y-a.y),o.y=h*c.mc.En(Math.floor(Math.abs(T/h)),T)+this.Da.G,0>o.y&&(o.y+=h);T=M!=0?s.y-a.y:s.x-a.x;var A=Math.abs(T);if(65536<A/h)throw c.i.ga("internal error");if(0<A){A=c.P.truncate(A/h)+2,p.length<A&&(p=c.P.mg(A));for(var O=A=0;;O++){var R=new c.h;if(R.x=o.x+u.x*O*h,R.y=o.y+u.y*O*h,1<=(R=(M!=0?R.y-a.y:R.x-a.x)/T))break;0>=R||(p[A]=R,A++)}A!=0&&this.g.Wl(b,p,A)}}b=_}while(b!=m)}},w.prototype.Xl=function(h,a){for(var s=-1,o=new c.h,u=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),m=0,b=this.g.Ka(p);m<b;m++){var _=this.g.V(f);this.g.D(f,o),(h?o.y==a:o.x==a)&&(this.g.D(_,o),(h?o.y==a:o.x==a)&&(s==-1&&(s=this.g.Hd()),u==null&&(u=new c.ja(0)).Jb(100),this.g.Qa(f,s)!=1&&(u.add(f),this.g.Sa(f,s,1)),this.g.Qa(_,s)!=1&&(u.add(_),this.g.Sa(_,s,1)))),f=_}if(s!=-1&&this.g.Ud(s),!(u==null||3>u.size)){var M=this;u.Wd(0,u.size,function(K,re){return M.Oh(K,re)}),s=new c.h,p=new c.h,f=new c.h,p.Sc();var T=-1;m=new c.ja(0),b=new c.ja(0),_=null;for(var A=this.g.Hd(),O=this.g.Hd(),R=0,j=u.size;R<j;R++){var z=u.get(R);if(this.g.D(z,o),!o.rb(p)){if(T!=-1){for(var V=T;V<R;V++){T=u.get(V);var F=this.g.V(T);z=this.g.Na(T);var G=!1;this.g.D(F,s),0>p.compare(s)&&(h?s.y==a:s.x==a)&&(m.add(T),G=!0,this.g.Sa(T,O,1)),this.g.D(z,s),0>p.compare(s)&&(h?s.y==a:s.x==a)&&(G||m.add(T),this.g.Sa(T,A,1))}for(V=0,G=m.size;V<G;V++){if(T=m.get(V),z=this.g.Qa(T,A),F=this.g.Qa(T,O),z==1&&(z=this.g.Na(T),this.g.D(z,f),!f.rb(o))){_==null&&(_=[]);var Z=c.h.ub(p,f);_[0]=c.h.ub(f,o)/Z,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(z,_,1),z=this.g.Na(T),this.g.mf(z,o),b.add(z),this.g.Sa(z,A,1),this.g.Sa(z,O,-1)}F==1&&(F=this.g.V(T),this.g.D(F,f),f.rb(o)||(_==null&&(_=[]),Z=c.h.ub(p,f),_[0]=c.h.ub(p,o)/Z,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(T,_,1),z=this.g.V(T),this.g.mf(z,o),b.add(z),this.g.Sa(z,A,-1),this.g.Sa(z,O,1)))}T=m,m=b,(b=T).clear(!1)}T=R,p.N(o)}}this.g.Ud(A),this.g.Ud(O)}},w.prototype.Pl=function(h,a){for(var s=new c.h,o=null,u=-1,p=0,f=this.ed.size;p<f;p++){var m=this.ed.get(p);if(m!=-1){var b=this.g.V(m);this.g.D(m,s),(h?s.y==a:s.x==a)&&(this.g.D(b,s),(h?s.y==a:s.x==a)&&(u==-1&&(u=this.g.Hd()),o==null&&(o=new c.ja(0)).Jb(100),this.g.Qa(m,u)!=-2&&(o.add(m),this.g.Sa(m,u,-2)),this.g.Qa(b,u)!=-2&&(o.add(b),this.g.Sa(b,u,-2))))}}if(o==null)u!=-1&&this.g.Ud(u);else{var _=this;for(o.Wd(0,o.size,function(re,te){return _.Oh(re,te)}),p=0,f=o.size;p<f;p++){var M=o.get(p);this.g.Sa(M,u,p)}m=new c.h,(b=new c.h).Sc();var T=-1;for(p=0,f=o.size;p<f;p++)if((M=o.get(p))!=-1&&(this.g.D(M,s),!s.rb(b))){if(T!=-1)for(;;){M=!1;for(var A=1<p-T?p-1:p,O=T;O<A;O++){var R=o.get(O);if(R!=-1){var j=-1,z=this.g.V(R);this.g.D(z,m),0>b.compare(m)&&(h?m.y==a:m.x==a)&&(j=z),z=-1;var V=this.g.Na(R);if(this.g.D(V,m),0>b.compare(m)&&(h?m.y==a:m.x==a)&&(z=V),j!=-1&&z!=-1)this.Mh(R,o,u),this.g.qd(R,!1),this.Mh(j,o,u),this.g.qd(j,!1),M=!0;else if(j!=-1||z!=-1){for(V=O+1;V<p;V++){var F=o.get(V);if(F!=-1){var G=this.g.V(F),Z=-1;this.g.D(G,m),0>b.compare(m)&&(h?m.y==a:m.x==a)&&(Z=G),G=this.g.Na(F);var K=-1;if(this.g.D(G,m),0>b.compare(m)&&(h?m.y==a:m.x==a)&&(K=G),Z!=-1&&K!=-1){this.Mh(F,o,u),this.g.qd(F,!1),this.Mh(Z,o,u),this.g.qd(Z,!1),M=!0;break}if(j!=-1&&K!=-1){this.At(o,R,j,F,K,u),M=!0;break}if(z!=-1&&Z!=-1){this.At(o,F,Z,R,z,u),M=!0;break}}}if(M)break}}}if(!M)break}T=p,b.N(s)}this.g.Ud(u)}},w.prototype.Mh=function(h,a,s){s=this.g.Qa(h,s),a.set(s,-1),s=this.g.Qa(h,this.li),this.ed.set(s,-1),(a=this.g.cd(h))!=-1&&this.g.Ya(a)==h&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(h,a,s,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(s,u),this.g.Cc(u,s),this.Mh(o,h,p),this.g.oi(o,!1),this.Mh(u,h,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var h=0,a=this.ed.size;h<a;h++){var s=this.ed.get(h);s!=-1&&this.g.cj(s,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{s=f,m=0;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);this.g.fp(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,m),u+=m,o++,p=this.g.Sb(p)}}for(h=0,a=this.ed.size;h<a;h++)if((s=this.ed.get(h))!=-1&&(p=this.g.cd(s))==-1){p=this.g.wf(this.Y,-1),m=0,f=s;do this.g.cj(s,p),m++,s=this.g.V(s);while(s!=f);2>=m?(s=this.g.Qa(f,this.li),this.ed.set(s,-1),f=this.g.qd(f,!1),m==2&&(0<=(s=this.g.Qa(f,this.li))&&this.ed.set(s,-1),this.g.qd(f,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.fp(p,!1),u+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),h=0,a=this.g.md;a!=-1;a=this.g.ve(a))h+=this.g.I(a);this.g.XB(h)},w.wy=function(h,a,s,o){return new w(a,o).vy(h,s)},w.clip=function(h,a,s,o,u){return w.Pu(h,a,null,s,o,u)},w.Pu=function(h,a,s,o,u,p){var f=h.K();if(f==33)return u=h.D(),a.contains(u)?h:h.Ja();if(f==197)return u=new c.l,h.A(u),u.Fa(a)?(a=new c.Hh,h.copyTo(a),a.Zo(u),a):h.Ja();if(h.B())return h;if(a.B())return h.Ja();var m=new c.l;if(h.yc(m),a.contains(m))return h;if(!a.isIntersecting(m))return h.Ja();if((s!=null||isNaN(o))&&c.ua.oy(s,a,!1),!c.ba.zj(f))throw c.i.O();if((s=h.Cb)!=null&&(s=s.Hk)!=null){if((s=s.To(a))==1){if(f!=1736)throw c.i.ga("internal error");return(h=new c.Ea(h.description)).vp(a),h}if(s==0)return h.Ja()}switch(f){case 550:for(p=null,f=h.I(),s=h.vb(0),o=0,u=new c.h,m=0;m<f;m++)s.uc(2*m,u),a.contains(u)||(o==0&&(p=h.Ja()),o<m&&p.Gd(h,o,m),o=m+1);return 0<o&&p.Gd(h,o,f),o==0?h:p;case 1736:case 1607:return w.wy(h,a,u,p);default:throw c.i.ga("internal error")}},w.prototype.Oh=function(h,a){var s=new c.h;return this.g.D(h,s),h=new c.h,this.g.D(a,h),s.compare(h)},w}();c.ti=C}(H||(H={})),function(c){var C=new c.h,w=function(){function a(s,o,u,p,f){this.Rm=new c.h,this.Fk=new c.h,this.Ri=new c.h,this.g=s,this.Cw=u,this.po=p,this.Rm=o,this.Al=f,this.Fk.Sc(),this.Ri.Sc()}return a.prototype.sE=function(s){this.g.D(s,this.Fk),s=c.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var o=c.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return h.eG(s,o)},a.prototype.ez=function(s){return this.g.Qa(s,this.Al)},a.prototype.Ky=function(s,o){return this.g.D(s,this.Fk),this.g.D(o,this.Ri),h.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},a}();c.oY=function(){};var h=function(){function a(){this.Rm=new c.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return a.dQ=function(s,o){var u=new a;return u.g=s,u.ra=o,u.Cw=o*o,u.bw=2*o,u.po=1/u.bw,u.wO()},a.Ev=function(s,o,u,p,f){return(s-=u)*s+(o-=p)*o<=f},a.eG=function(s,o){return c.P.Vh(o,c.P.Vh(s))},a.prototype.yO=function(s,o){this.g.Hc(s,C);for(var u=(C.y-this.Rm.y)*this.po,p=c.P.truncate((C.x-this.Rm.x)*this.po),f=c.P.truncate(u),m=u=0;1>=m;m+=1)for(var b=0;1>=b;b+=1){var _=a.eG(p+m,f+b),M=this.zl.lR(_);M!=-1&&(this.rq[u]=M,this.zs[u]=_,u++)}for(p=u-1;1<=p;p--)for(M=this.rq[p],f=p-1;0<=f;f--)if(M==this.rq[f]){this.zs[f]=-1,p!=--u&&(this.zs[p]=this.zs[u],this.rq[p]=this.rq[u]);break}for(f=0;f<u;f++)this.zO(s,this.zs[f],C,this.rq[f],o)},a.prototype.zO=function(s,o,u,p,f){for(var m=new c.h;p!=-1;p=this.zl.zR(p)){var b=this.zl.ka(p);s==b||o!=-1&&this.g.Qa(b,this.Al)!=o||(this.g.Hc(b,m),a.Ev(u.x,u.y,m.x,m.y,this.Cw)&&f.add(p))}},a.prototype.Zm=function(s,o,u){var p=this.g.Qa(s,this.so),f=this.g.Qa(o,this.so);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,s),this.g.Sa(s,this.so,p)),f==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,f),this.g.Sa(o,this.so,-2),o=this.TT(s,o),u&&(u=this.mw.sE(s),this.g.Sa(s,this.Al,u)),o},a.RT=function(s,o,u){s.Nb(o),u=s;var p=new c.h;a.ST(s.D(),o.D(),p),u.Db(p)},a.ST=function(s,o,u){var p=s.x;s.x!=o.x&&(p=(1*s.x+1*o.x)/2);var f=s.y;s.y!=o.y&&(f=(1*s.y+1*o.y)/2),u.na(p,f)},a.prototype.TT=function(s,o){var u=new c.h;this.g.D(s,u);var p=new c.h;this.g.D(o,p);var f=this.g.YF(s),m=f+(o=this.g.YF(o)),b=0,_=u.x;u.x!=p.x&&(_=(u.x*f+p.x*o)/m,b++);var M=u.y;return u.y!=p.y&&(M=(u.y*f+p.y*o)/m,b++),0<b&&this.g.Db(s,_,M),this.g.rX(s,m),b!=0},a.prototype.wO=function(){var s=this.g.gd,o=this.g.DF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.po=1/this.bw),this.Ad=new c.cu,this.Ad.Bt(c.P.truncate(this.g.gd/3+1)),this.Ad.hn(c.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new w(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new c.ZK(c.P.truncate(4*s/3),this.mw),this.zl.vW(this.g.gd),s=!1,o=this.g.md;o!=-1;o=this.g.ve(o))for(var u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++){var b=this.mw.sE(p);this.g.Sa(p,this.Al,b),this.zl.addElement(p,b),p=this.g.V(p)}var _=new c.ja(0);for(_.Jb(10),o=this.g.md;o!=-1;o=this.g.ve(o))for(u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++){if(this.g.Qa(p,this.so)!=-2)for(b=this.g.Qa(p,this.Al),this.zl.kd(p,b);this.yO(p,_),_.size!=0;){b=!1;for(var M=0,T=_.size;M<T;M++){var A=_.get(M),O=this.zl.ka(A);this.zl.wd(A),b=this.Zm(p,O,M+1==T)||b}if(s=s||b,_.clear(!1),!b)break}p=this.g.V(p)}return s&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),s},a.prototype.qN=function(){for(var s=new c.h,o=this.Ad.ke;o!=-1;o=this.Ad.lz(o)){var u=this.Ad.sc(o);for(this.g.D(this.Ad.ka(u),s),u=this.Ad.lb(u);u!=-1;u=this.Ad.lb(u))this.g.mf(this.Ad.ka(u),s)}},a}();c.$t=h}(H||(H={})),function(c){var C=function(){function w(h){h===void 0&&(h=null),this.zg=null,this.Pb=!1,this.zg=h===null?[]:h}return w.prototype.copyTo=function(h){if(h.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.zg.length;a++)h.zg.push(this.zg[a].Qf())},w.prototype.count=function(){return this.zg.length},w.prototype.add=function(h){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(h.Qf())},w.prototype.clear=function(){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},w.prototype.remove=function(h){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(h,1)},w.prototype.kg=function(){var h=new w;return this.copyTo(h),h},w.prototype.Qf=function(){return this.kg()},w.prototype.transform=function(h,a,s,o){if(h.length<a)throw c.i.ga("invalid Argument");var u=s;for(s=0;s<this.zg.length;s++){var p=this.zg[s];if(p.sm()!=null){var f=p.Wn,m=f?1:0,b=f?p.sm().getGeogcs2():p.sm().getGeogcs1();if(b=u/(b=b.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(b-1))for(u=0;u<a;u++)h[u][0]*=b,h[u][1]*=b;c.HC.geogToGeog(p.sm(),a,h,null,m),u=(f?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(b=u/o,3552713678800501e-30<Math.abs(b-1))for(u=0;u<a;u++)h[u][0]*=b,h[u][1]*=b;return a},w.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof w)||this.zg.length!=h.zg.length)return!1;for(var a=0;a<this.zg.length;a++)if(!this.zg[a].Nb(h.zg[a]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var h="CGT ("+this.count()+") ",a=0,s=this.count();a<s;++a)h+=this.zg[a].toString()+", ";return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},w.create=function(){return new w},w}();c.rC=C}(H||(H={})),function(c){var C,w=Math.PI,h=2*Math.PI,a=Math.PI/2,s=function(){function p(){}return p.OO=function(f,m){var b=new p;return b.x=f,b.y=m,b.type=0,b.Wh=0,b},p.cl=function(f){var m=new p;return m.x=f.x,m.y=f.y,m.type=0,m.Wh=0,m},p.NO=function(f){var m=new p;return m.x=f.x,m.y=f.y,m.type=f.type,m.Wh=f.Wh,m},p.Qd=function(f,m,b){var _=new p;return _.x=f.x+m*Math.cos(b),_.y=f.y+m*Math.sin(b),_.type=f.type,_.Wh=f.Wh,_},p.Ru=function(f,m){var b=new p;return b.x=.5*(f.x+m.x),b.y=.5*(f.y+m.y),b.type=f.type,b.Wh=f.Wh,b},p.OE=function(f,m){var b=new p;return b.x=f.x+.001*(m.x-f.x),b.y=f.y+.001*(m.y-f.y),b.type=f.type,b.Wh=f.Wh,b},p}(),o=function(){};(C=c.aL||(c.aL={}))[C.Round=0]="Round",C[C.Bevel=1]="Bevel",C[C.Miter=2]="Miter",C[C.Square=3]="Square";var u=function(){function p(f){this.IA=this.Zb=this.xg=null,this.od=f}return p.W=function(f,m,b,_,M,T){if(f==null||1>f.Eb())throw c.i.O();return m==0||f.B()?f:((T=new p(T)).mo=f,T.La=m,T.ra=M,T.Mi=b,T.xA=_,T.Qx())},p.prototype.$L=function(){var f=this.mo,m=f.bc(),b=f.xc(),_=new c.h;return _.vc(b,m),_.normalize(),_.Jv(),_.scale(this.La),m.add(_),b.add(_),_=f.Ja(),f.Ec(m),f.Rc(b),_},p.prototype.ZL=function(){var f=this.mo;if(0<this.La&&this.Mi!=2){var m=new c.Ea;return m.bd(f,!1),this.mo=m,this.Qx()}return(f=new c.Hh(f.aa)).X(this.La,this.La),f},p.prototype.oJ=function(f,m,b,_){return(m.x-f.x)*(_.x-b.x)+(m.y-f.y)*(_.y-b.y)},p.prototype.hc=function(f,m){if(m===void 0)this.Zb.push(f),this.gf++;else if(this.gf==0)this.hc(f);else{var b=this.Dw,_=this.xg[m==0?b-1:m-1],M=this.xg[m],T=this.oJ(_,M,this.Zb[this.gf-1],f);0<T?this.hc(f):0>T&&(0<this.oJ(_,M,M,this.Zb[this.gf-1])?(M=this.xg[m==0?b-2:m==1?b-1:m-2],b=s.Qd(_,this.La,Math.atan2(_.y-M.y,_.x-M.x)-a),this.Zb[this.gf-1]=b,this.Mi==1||this.Mi==2?(b=s.Ru(b,_),this.hc(b),b=s.Qd(_,this.La,this.Lv+a),(_=s.Ru(b,_)).type|=256,this.hc(_)):(b=s.Qd(_,this.La,this.Lv+a)).type|=256,this.hc(b),this.hc(f,m)):(b=s.Qd(M,this.La,this.Lv+a),this.hc(b),this.Mi==1||this.Mi==2?(b=s.Ru(b,M),this.hc(b),b=s.Qd(M,this.La,this.Wz-a),(_=s.Ru(b,M)).type|=256,this.hc(_)):(b=s.Qd(M,this.La,this.Wz-a)).type|=256,this.hc(b)))}},p.prototype.hE=function(){var f,m=this.Dw;this.gf=0;var b=.5*this.ra,_=0,M=0;for(f=0;f<m;f++){var T=this.xg[f],A=f==0?this.xg[m-1]:this.xg[f-1],O=f==m-1?this.xg[0]:this.xg[f+1],R=A.x-T.x,j=A.y-T.y,z=O.x-T.x,V=O.y-T.y,F=Math.atan2(j,R),G=Math.atan2(V,z);if(this.Lv=F,this.Wz=G,f==0&&(_=F,M=G),R=R*V-z*j,j=G,G<F&&(G+=h),0<R*this.La)this.Mi==1||this.Mi==2?(F=s.Qd(T,this.La,F+a),this.hc(F),F=s.OE(T,F),this.hc(F),F=s.Qd(T,this.La,G-a),(T=s.OE(T,F)).type|=256,this.hc(T),this.hc(F)):(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),F=s.Qd(T,R,.5*(F+G)),this.hc(F,f));else if(512&T.type){for(R=1-b/Math.abs(this.La),A=1,O=0>this.La?-w:w,-1<R&&1>R&&(.017453292519943295>(j=2*Math.acos(R))&&(j=.017453292519943295),1<(A=c.P.truncate(w/j+1.5))&&(O/=A)),j=F+a,F=s.Qd(T,this.La,j),f==0&&(F.type|=1024),this.hc(F,f),R=this.La/Math.cos(O/2),j+=O/2,(F=s.Qd(T,R,j)).type|=1024,this.hc(F);0<--A;)j+=O,(F=s.Qd(T,R,j)).type|=1024,this.hc(F);(F=s.Qd(T,this.La,G-a)).type|=1024,this.hc(F)}else if(this.Mi==1)F=s.Qd(T,this.La,F+a),this.hc(F,f),F=s.Qd(T,this.La,G-a),this.hc(F);else if(this.Mi==0)for(R=1-b/Math.abs(this.La),A=1,O=G-a-(F+a),-1<R&&1>R&&(.017453292519943295>(j=2*Math.acos(R))&&(j=.017453292519943295),1<(A=c.P.truncate(Math.abs(O)/j+1.5))&&(O/=A)),R=this.La/Math.cos(.5*O),j=F+a+.5*O,F=s.Qd(T,R,j),this.hc(F,f);0<--A;)j+=O,F=s.Qd(T,R,j),this.hc(F);else this.Mi==2?(R=A.x-T.x,j=A.y-T.y,.99999999<(A=(R*(z=O.x-T.x)+j*(V=O.y-T.y))/Math.sqrt(R*R+j*j)/Math.sqrt(z*z+V*V))?(F=s.Qd(T,1.4142135623730951*this.La,G-.25*w),this.hc(F,f),F=s.Qd(T,1.4142135623730951*this.La,G+.25*w),this.hc(F)):(A=Math.abs(this.La/Math.sin(.5*Math.acos(A))))>(O=Math.abs(this.xA*this.La))?(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),F=s.Qd(T,R,.5*(F+G)),G=c.h.construct(F.x,F.y),F=c.h.construct(T.x,T.y),(T=new c.h).vc(G,F),(G=new c.h).BW(O/T.length(),T,F),F=(A-O)*Math.abs(this.La)/Math.sqrt(A*A-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(F/T.length()),(F=new c.h).add(G,T),(A=new c.h).vc(G,T),F=s.cl(F),this.hc(F,f),F=s.cl(A),this.hc(F)):(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),F=s.Qd(T,R,.5*(F+G)),this.hc(F,f))):(G=j,0<this.La?(G>F&&(G-=h),A=F-G<a):(G<F&&(G+=h),A=G-F<a),A?(j=0>(R=1.4142135623730951*this.La)?F+.25*w:F+.75*w,F=s.Qd(T,R,j),this.hc(F,f),j=0>R?G-.25*w:G-.75*w,F=s.Qd(T,R,j),this.hc(F)):(R=.5*(G-F),R=this.La/Math.abs(Math.sin(R)),G<F&&(G+=h),F=s.Qd(T,R,(F+G)/2),this.hc(F,f)))}return this.Lv=_,this.Wz=M,this.hc(this.Zb[0],0),T=s.NO(this.Zb[this.gf-1]),this.Zb[0]=T,this.rW()},p.prototype.Cu=function(f,m){if(!(2>m))for(var b=0;b<m;b++){var _=this.Zb[f+b];b!=0?this.IA.Ei(c.h.construct(_.x,_.y)):this.IA.Nt(c.h.construct(_.x,_.y))}},p.prototype.aM=function(f,m,b){var _=f.Ca(m),M=f.Wc(m);if(this.Zb=[],this.IA=b,f.ec(m)){for(m=f.Oa(_);f.Oa(M-1).rb(m);)M--;if(2<=M-_){for(this.Dw=M-_,this.xg=[],m=_;m<M;m++)this.xg.push(s.cl(f.Oa(m)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(m=f.Oa(_);_<M&&f.Oa(_+1).rb(m);)_++;for(m=f.Oa(M-1);_<M&&f.Oa(M-2).rb(m);)M--;if(2<=M-_){for(this.Dw=2*(M-_)-2,this.xg=[],(b=s.cl(f.Oa(_))).type|=1536,this.xg.push(b),m=_+1;m<M-1;m++)b=s.cl(f.Oa(m)),this.xg.push(b);for((b=s.cl(f.Oa(M-1))).type|=512,this.xg.push(b),m=M-2;m>=_+1;m--)(b=s.cl(f.Oa(m))).type|=1024,this.xg.push(b);if(this.hE())if(2<=this.Zb.length){for(f=-1,(M=(1024&this.Zb[this.gf-1].type)!=0)||(f=0),m=1;m<this.gf;m++)(_=(1024&this.Zb[m].type)!=0)?M||1<(M=m-1)-f+1&&this.Cu(f,M-f+1):M&&(f=m-1),M=_;M||1<(M=this.gf-1)-f+1&&this.Cu(f,M-f+1)}else f=0,M=this.gf-1,0<=f&&1<=M-f&&this.Cu(f,M-f+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.rW=function(){for(var f=!1,m=0;m<this.gf;m++){var b=this.Zb[m];b.sh=m+1,b.uh=m-1,this.Zb[m]=b}for((b=this.Zb[0]).uh=this.gf-2,this.Zb[0]=b,(b=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=b,m=b=0;m<this.gf;m++)if(256&this.Zb[b].type){var _=this.BP(b);if(_==-1){f=!0;break}b=_}else b=this.Zb[b].sh;return!f&&(this.LO(b),!0)},p.prototype.BP=function(f){for(var m,b,_=this.gf-1,M=f,T=1;T<=_-2;T++){m=M=this.Zb[M].sh,b=f;for(var A=1;A<=T;A++){if(b=this.Zb[b].uh,(256&this.Zb[b].type)==0&&(256&this.Zb[m].type)==0){var O=this.bS(b,m);if(O!=-1)return O}m=this.Zb[m].uh}}return-1},p.prototype.bS=function(f,m){var b=this.Zb[this.Zb[f].uh],_=this.Zb[f],M=this.Zb[this.Zb[m].uh],T=this.Zb[m];if(!this.EW(b,_,M,T))return-1;var A=new o;return this.sQ(b,_,M,T,A)&&!A.XD&&c.P.XJ((_.x-b.x)*(T.y-M.y)-(_.y-b.y)*(T.x-M.x))!=c.P.XJ(this.La)?(b=this.Zb[f].uh,A.cn.type=_.type,A.cn.sh=m,A.cn.uh=b,this.Zb[f]=A.cn,A.cn=this.Zb[m],A.cn.uh=f,this.Zb[m]=A.cn,m):-1},p.prototype.EW=function(f,m,b,_){return Math.max(f.x,m.x)>=Math.min(b.x,_.x)&&Math.max(b.x,_.x)>=Math.min(f.x,m.x)&&Math.max(f.y,m.y)>=Math.min(b.y,_.y)&&Math.max(b.y,_.y)>=Math.min(f.y,m.y)},p.prototype.sQ=function(f,m,b,_,M){M.XD=!1;var T=(m.y-f.y)*(_.x-b.x)-(m.x-f.x)*(_.y-b.y),A=(b.y-f.y)*(m.x-f.x)-(b.x-f.x)*(m.y-f.y);if(0<=(T=T==0?2:A/T)&&1>=T){var O=T;if(T=(_.y-b.y)*(m.x-f.x)-(_.x-b.x)*(m.y-f.y),A=(f.y-b.y)*(_.x-b.x)-(f.x-b.x)*(_.y-b.y),0<=(T=T==0?2:A/T)&&1>=T)return M.cn=s.OO(f.x+T*(m.x-f.x),f.y+T*(m.y-f.y)),M.cn.Wh=b.Wh+O*(_.Wh-b.Wh),O!=0&&O!=1||T!=0&&T!=1||(M.XD=!0),M.RY=T,M.SY=O,!((O==0||O==1)&&0<T&&1>T||(T==0||T==1)&&0<O&&1>O)}return!1},p.prototype.LO=function(f){for(;this.Zb[f].uh<f;)f=this.Zb[f].uh;var m=0,b=f;do b=this.Zb[b],this.Zb[m]=b,b=b.sh,m++;while(b!=f);this.Zb[m]=this.Zb[0],this.gf=m+1},p.prototype.VC=function(f){var m=this.mo,b=m.Ha();if(b!=null){b.aj();for(var _=-1;b.ab();)_++,this.aM(m,_,f)}},p.prototype.Qx=function(){var f=this.mo.K();return f==322?this.$L():f==197?this.ZL():c.ba.zd(f)?((f=new c.Ua).pc(this.mo,!0),this.mo=f,this.Qx()):f==1607?(f=new c.Ua,this.VC(f),f):f==1736?(f=new c.Ea,this.VC(f),f):null},p}();c.DK=u}(H||(H={})),function(c){var C=function(){function s(o){this.sk=o}return s.prototype.D=function(o,u){this.sk.g.D(o,u)},s.prototype.wd=function(o){var u=this.sk.Ga.ka(o);this.sk.Ga.wd(o,-1),this.sk.g.qd(u,!1)},s}(),w=function(){function s(o){this.sk=o}return s.prototype.D=function(o,u){this.sk.DT.D(o,u)},s.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},s}(),h=function(){function s(o){this.sk=o}return s.prototype.D=function(o,u){u.N(this.sk.GT[o])},s.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},s}(),a=function(){function s(o){o===void 0?(this.Ga=new c.$j,this.Ga.Ee(20),this.g=new c.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new C(this)):o instanceof Array?(this.Ga=new c.$j,this.Ga.Ee(20),this.GT=o,this.Zh=new h(this)):(this.Ga=new c.$j,this.Ga.Ee(20),this.DT=o,this.Zh=new w(this))}return s.prototype.Ib=function(o){var u=o.K();if(c.Fx.zj(u))this.eN(o);else if(c.Xk.zd(u))this.jN(o);else if(u==197)this.bN(o);else{if(u!=33)throw c.i.O("invalid shape type");this.iN(o)}},s.prototype.YQ=function(){var o=new c.Ta,u=this.Ga.sc(-1),p=new c.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(u),o),p.nf(o),u=this.Ga.lb(u);u!=-1;u=this.Ga.lb(u))this.g.Xi(this.Ga.ka(u),o),p.lineTo(o);return p},s.MO=function(o){var u=new s(o),p=o.I(),f=1,m=new c.h,b=new c.h,_=new c.h;for(o.D(0,m);o.D(f,b),b.Mz(m)&&f<p-1;)f++;for(u.Ga.addElement(0,-1),u.Ga.zn(f),p=f+1;p<o.I();p++)o.D(p,_),(f=u.kC(_))!=-1&&u.Ga.Uj(f,p);for(_=new c.Ta,f=u.Ga.sc(-1),p=new c.Ea(o.description),o.we(u.Ga.ka(f),_),p.nf(_),f=u.Ga.lb(f);f!=-1;f=u.Ga.lb(f))o.we(u.Ga.ka(f),_),p.lineTo(_);return p},s.construct=function(o,u,p){for(var f=new s(o),m=1,b=o[0];o[m].Mz(b)&&m<u-1;)m++;for(f.Ga.addElement(0,-1),f.Ga.zn(m),m+=1;m<u;m++)(b=f.kC(o[m]))!=-1&&f.Ga.Uj(b,m);for(o=0,u=f.Ga.sc(-1);u!=-1;u=f.Ga.lb(u))p[o++]=f.Ga.ka(u);return o},s.EG=function(o,u){var p=o.Ca(u),f=o.Wc(u);if(u=!o.ec(u)&&o.Pn(u),o=o.vb(0),f*=2,u&&(f-=2),6>f-(p*=2))return!0;u=new c.h;var m=new c.h,b=new c.h;o.uc(p,u),o.uc(p+2,m),o.uc(p+4,b);var _=s.Yu(m,b,u);if(_.rs()||!s.wm(_.value()))return!1;var M=c.h.construct(m.x,m.y),T=new c.h;for(p+=6;p<f;p+=2)if(T.N(m),m.N(b),o.uc(p,b),(_=s.Yu(m,b,u)).rs()||!s.wm(_.value())||(_=s.Yu(M,b,u)).rs()||!s.wm(_.value())||(_=s.Yu(m,b,T)).rs()||!s.wm(_.value()))return!1;return!0},s.prototype.eN=function(o){for(var u=new c.Ta,p=new c.h,f=0;f<o.I();f++){o.D(f,p);var m=this.Er(p);if(m!=-1){o.we(f,u);var b=this.g.hc(this.Us,u);this.Ga.Uj(m,b)}}},s.prototype.bN=function(o){for(var u=new c.Ta,p=new c.h,f=0;4>f;f++){o.hB(f,p);var m=this.Er(p);if(m!=-1){o.If(f,u);var b=this.g.hc(this.Us,u);this.Ga.Uj(m,b)}}},s.prototype.jN=function(o){var u=new c.Ta,p=o.bc();if((p=this.Er(p))!=-1){o.Vo(u);var f=this.g.hc(this.Us,u);this.Ga.Uj(p,f)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Ro(u),o=this.g.hc(this.Us,u),this.Ga.Uj(p,o))},s.prototype.iN=function(o){var u=o.D();(u=this.Er(u))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(u,o))},s.prototype.Er=function(o){var u=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(u=this.Ga.zn(-5)),u}return this.kC(o)},s.prototype.kC=function(o){var u=-1;do{var p=this.Ga.sc(-1),f=this.Ga.Gc(-1),m=this.Ga.ka(p),b=this.Ga.ka(f),_=new c.h,M=new c.h;if(this.Zh.D(m,_),this.Zh.D(b,M),m=c.h.Wq(M,o,_),s.wm(m))u=this.Ga.zn(-1),(_=this.iC(o,f,p))!=p&&this.jC(o,p,this.Ga.xe(_));else if(s.xG(m)){M=this.Ga.uv(-1);var T=this.Ga.sc(-1),A=this.Ga.Gc(-1);for(m=new c.h,b=new c.h;T!=this.Ga.xe(A);){var O=this.Ga.ka(M);this.Zh.D(O,m),O=c.h.Wq(m,o,_),s.xG(O)?(A=M,M=this.Ga.nl(M)):(T=M,M=this.Ga.Zp(M))}if(M=A,_=T,O=this.Ga.ka(M),T=this.Ga.ka(_),this.Zh.D(O,m),this.Zh.D(T,b),_!=p&&(m=c.h.Wq(b,o,m),!s.wm(m)))continue;u=this.Ga.Bu(_,M,-2,!1),this.jC(o,M,f),this.iC(o,_,p)}else this.tb==null&&(this.tb=new c.zb),this.tb.Ec(M),this.tb.Rc(_),0>(_=this.tb.ge(o,!0))?(_=this.Ga.xe(f),this.Ga.wd(f,-1),u=this.Ga.zn(-3),this.iC(o,_,p)):1<_&&(_=this.Ga.lb(p),this.Ga.wd(p,-1),u=this.Ga.Bu(-1,_,-3,!1),this.jC(o,_,f))}while(0);return u},s.prototype.jC=function(o,u,p){if(u!=p){var f=this.Ga.ka(u),m=this.Ga.lb(u),b=new c.h,_=new c.h;for(this.Zh.D(f,b);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),_),f=c.h.Wq(_,o,b),!s.wm(f));)f=u,u=m,b.N(_),m=this.Ga.lb(u),this.Zh.wd(f)}},s.prototype.iC=function(o,u,p){if(u==p)return p;var f=this.Ga.ka(u),m=this.Ga.xe(u),b=new c.h,_=new c.h;for(this.Zh.D(f,b);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),_),f=c.h.Wq(b,o,_),!s.wm(f));)f=u,u=m,b.N(_),m=this.Ga.xe(u),this.Zh.wd(f);return u},s.Yu=function(o,u,p){var f=new c.Xb;f.set(u.x),f.sub(o.x);var m=new c.Xb;m.set(p.y),m.sub(o.y);var b=new c.Xb;return b.set(u.y),b.sub(o.y),(u=new c.Xb).set(p.x),u.sub(o.x),f.Bg(m),b.Bg(u),f.sub(b),f},s.wm=function(o){return 0>o},s.xG=function(o){return 0<o},s}();c.au=a}(H||(H={})),function(c){var C=function(){function w(h){this.g=null,this.oH=!0,this.od=h}return w.uU=function(h,a,s){return h=c.ua.Gr(h),c.$t.Ev(a.Ng(),a.kh(),s.Ng(),s.kh(),c.mc.ox(h))},w.xO=function(h,a){var s=new c.Ta;return c.$t.RT(h,a,s),s},w.W=function(h,a,s,o){return(s=new w(s)).g=h,s.ra=a,s.oH=o,s.zM()},w.prototype.iM=function(h){return c.$t.dQ(this.g,h)},w.prototype.nM=function(h){return c.bu.W(this.g,h,this.od)},w.prototype.zM=function(){var h=this.ra,a=c.ua.Gr(h),s=1.00001*(h=c.ua.mN(h));h*=1.000001;for(var o=!1,u=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,f=this.g.eS();;p++){if(p>u)throw c.i.ga("Internal Error: max number of iterations exceeded");var m=this.iM(a);if(o=o||m,this.oH&&(m=this.g.Ip(a,!0,!1)!=0,o=o||m),m=!1,(p==0||f||c.bu.fI(!0,this.g,h,null,this.od))&&(m=this.nM(s),o=o||m),!m)break;c.op.Bp(this.od)}return o},w}();c.Vk=C}(H||(H={})),function(c){var C=function(){function h(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return h.prototype.wv=function(a,s){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,s))return null;o=s}return o},h.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||!(4095&this.$s))&&(this.$s=0,c.op.Bp(this.Vb))},h.prototype.iP=function(){var a=this.g.$q(!1),s=!1,o=new c.zb,u=new c.zb,p=new c.l;p.Pa();var f=new c.l;f.Pa();for(var m=new c.Ta,b=new c.OC,_=a.next();_!=-1;_=a.next()){c.op.Bp(this.Vb);var M=null,T=!1;if(!c.ba.Tn(this.g.jc(a.ek))){if((M=this.wv(_,o))==null)continue;if(M.A(p),p.X(this.ra,this.ra),M.Di(this.ra)){if(!M.Di(0))continue;T=!0,M=null}}var A=this.g.$q(a),O=A.next();for(O!=-1&&(O=A.next());O!=-1;O=A.next()){var R=null,j=!1;if(!c.ba.Tn(this.g.jc(A.ek))){if((R=this.wv(O,u))==null)continue;if(R.A(f),R.Di(this.ra)){if(!R.Di(0))continue;j=!0,R=null}}var z=0,V=0;if(M!=null&&R!=null)p.CG(f)&&(b.Qo(M),b.Qo(R),b.Fa(this.ra,!1),0<(z=b.ql(0))+(V=b.ql(1))&&(this.g.lr(_,b,0,!0),this.g.lr(O,b,1,!0)),b.clear());else if(M!=null){var F=new c.h;if(this.g.D(O,F),p.contains(F)){if(b.Qo(M),this.g.Xi(O,m),b.Fz(this.ra,m,!1),0<(z=b.ql(0)))if(this.g.lr(_,b,0,!0),j){for(j=-1,F=this.g.V(O);F!=-1&&F!=O&&(j=F,(R=this.wv(F,u))!=null&&R.Di(0));F=this.g.V(F));for(F=O;F!=-1&&(this.g.Fh(F,b.Cf),F!=j);F=this.g.V(F));}else this.g.Fh(O,b.Cf);b.clear()}}else{if(R==null)continue;if(F=new c.h,this.g.D(_,F),f.X(this.ra,this.ra),f.contains(F)){if(b.Qo(R),this.g.Xi(_,m),b.Fz(this.ra,m,!1),0<(V=b.ql(0)))if(this.g.lr(O,b,0,!0),T){for(j=-1,F=this.g.V(_);F!=-1&&F!=_&&(j=F,(R=this.wv(F,u))!=null&&R.Di(0));F=this.g.V(F));for(F=_;F!=-1&&(this.g.Fh(F,b.Cf),F!=j);F=this.g.V(F));}else this.g.Fh(_,b.Cf);b.clear()}}if(z+V!=0){if(z!=0){if((M=this.g.cc(_))==null){if(!this.g.fd(_,o))continue;M=o,o.A(p)}else M.A(p);if(M.Di(this.ra))break}s=!0}}}return s},h.prototype.jP=function(){return this.LU()},h.prototype.LU=function(){return new c.MC().LX(this.g,this.ra)},h.prototype.gI=function(){var a=!1;this.Nc==null&&(this.Nc=new c.$j);var s=new c.ja(0);s.Jb(this.g.gd+1);for(var o=this.g.$q(),u=o.next();u!=-1;u=o.next())s.add(u);this.g.nx(s,s.size),s.add(-1),o=this.g.Hd(),u=this.g.Hd(),this.ae=new c.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var p=new c.ja(0),f=new c.ja(0),m=0;new c.h;var b=this.g.ud;this.g.wb.oc();for(var _,M,T=this.g.wb.Aa[0].o,A=s.get(m++);A!=-1;){var O=_=T[2*(M=b.U(A,0))],R=M=T[2*M+1];do{var j=b.U(A,2),z=b.U(A,1);if(j!=-1){var V=b.U(j,0),F=T[2*V];0>(R<(V=T[2*V+1])?-1:R>V?1:O<F?-1:O>F?1:0)&&(f.add(A),f.add(j))}z!=-1&&(F=T[2*(V=b.U(z,0))],0>(R<(V=T[2*V+1])?-1:R>V?1:O<F?-1:O>F?1:0)&&(f.add(z),f.add(z))),(F=this.g.Qa(A,o))!=-1&&(p.add(F),this.g.Sa(A,o,-1)),(F=this.g.Qa(A,u))!=-1&&(p.add(F),this.g.Sa(A,u,-1)),(A=s.get(m++))!==-1&&(O=T[2*(R=b.U(A,0))],R=T[2*R+1])}while(A!=-1&&O===_&&R===M);for(O=p.size==1&&f.size==2,F=R=-1,j=0,z=p.size;j<z;j++){V=p.get(j);var G=this.Nc.xe(V);if(G==-1||p.cG(G)||(R=G),(V=this.Nc.lb(V))==-1||p.cG(V)||(F=V),R!=-1&&F!=-1)break}for(this.ae.VJ(M,_),j=0,z=p.size;j<z;j++)V=p.get(j),this.Nc.wd(V,-1);if(p.clear(!1),!O&&R!=-1&&F!=-1&&this.lO(R,F)){a=!0,this.Pi=this.ae.tm();break}for(j=0,z=f.size;j<z;j+=2){if(M=f.get(j),_=f.get(j+1),O?(M=this.Nc.Bu(R,F,M,!0),O=!1):M=this.Nc.addElement(M,-1),this.ae.sg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(_,o)==-1?this.g.Sa(_,o,M):this.g.Sa(_,u,M)}if(a)break;f.Dh(0)}return this.g.Ud(o),this.g.Ud(u),a},h.prototype.lO=function(a,s){return this.ae.compare(this.Nc,this.Nc.ka(a),s),a=this.ae.sg,this.ae.Mr(),a},h.tE=function(a){for(var s=a.md;s!=-1;s=a.ve(s))if(c.ba.Ic(a.jc(s)))return!0;return!1},h.aQ=function(a,s,o,u){return!!h.tE(a)&&((s=new h(u)).g=a,s.ra=o,15>a.gd?a=s.iP():s.jP())},h.W=function(a,s,o){return h.aQ(a,a.DF(),s,o)},h.fI=function(a,s,o,u,p){if(!h.tE(s))return!1;var f=new h(p);if(f.g=s,f.ra=o,f.Yz=a,f.gI())return u!=null&&u.Yt(f.Pi),!0;var m=new c.Ed;return m.VB(),s.Pc(m),(f=new h(p)).g=s,f.ra=o,f.Yz=a,a=f.gI(),m.VB(),s.Pc(m),!!a&&(u!=null&&u.Yt(f.Pi),!0)},h.Ol=function(a,s){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*s<1*a*s},h.gP=function(a,s,o,u){if(c.ba.Ic(s.K()))return new h(u).hP(a,s,o);throw c.i.ga("crack_A_with_B")},h.prototype.hP=function(a,s,o){var u=new c.l;a.yc(u);var p=new c.l;if(s.yc(p),p.X(o,o),!p.isIntersecting(u))return a;var f=a.Cb,m=null;f!=null&&(m=f.Gb),h.Ol(a,a.I())&&(m=c.ua.lj(a,p));var b=m!=null?m.getIterator():null,_=s.Ha();s=a.Ha();var M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];_.ab();)for(;_.Ia();){var T=_.ia();if(m!=null){for(b.Wo(T,o),f=b.next();f!=-1;f=b.next())if(this.Zq(),s.Wb(m.ka(f),-1),s.Ia()){var A=(f=s.ia()).Fa(T,null,M,null,o);for(f=0;f<A;++f){var O=M[f];if(O!=0&&O!=1){var R=s.xb(),j=new w;j.t=O,j.index=R,p.push(j)}}}}else{var z=new c.l;if(T.yc(z),z.X(o,o),u.isIntersecting(z)){for(s.aj();s.ab();)for(;s.Ia();)if(this.Zq(),f=s.ia(),O=new c.l,f.yc(O),O.isIntersecting(z))for(A=f.Fa(T,null,M,null,o),f=0;f<A;++f)(O=M[f])!=0&&O!=1&&(R=s.xb(),(j=new w).t=O,j.index=R,p.push(j))}}}if(p.length==0)return a;for(p=p.sort(w.zy),a=a.Ja(),s.aj();s.ab()&&!s.Ia(););for(o=s.ia(),u=new c.jg,m=-1,f=0,b=p.length;f<b;){for(M=p[f].index,_=f+1;_<b&&p[_].index==M;)++_;for(;s.xb()<M;){if(this.Zq(),T=s.Ia(),O=s.gb,(z=T||!s.Qn()||s.Rn())&&a.pc(o,m!=O),m=O,!T)for(;s.ab()&&!s.Ia(););o=s.ia()}for(M=0;f<_;f++)(O=p[f].t)!=M&&(o.dh(M,O,u),M=O,O=s.gb,a.pc(u.get(),m!=O),m=O);if((z=(T=s.Ia())||!s.Qn()||s.Rn())&&(o.dh(M,1,u),a.pc(u.get(),!1)),T)o=s.ia();else{for(;s.ab()&&!s.Ia(););o=s.Ia()?s.ia():null}f=_}for(o!=null&&(O=s.gb,(z=(T=s.Ia())||!s.Qn()||s.Rn())&&a.pc(o,m!=O),m=O),T=s.Ia();;){if(!T){for(;s.ab()&&!(T=s.Ia()););if(!T)break}o=s.ia(),O=s.gb,(z=(T=s.Ia())||!s.Qn()||s.Rn())&&a.pc(o,m!=O),m=O}return a},h}();c.bu=C;var w=function(){function h(){}return h.zy=function(a,s){return a.index==s.index?a.t>s.t?1:a.t<s.t?-1:0:a.index>s.index?1:-1},h}()}(H||(H={})),function(c){var C;(C=c.FK||(c.FK={}))[C.Left=0]="Left",C[C.Right=1]="Right",C[C.Coincident=2]="Coincident",C[C.Undefined=3]="Undefined",C[C.Uncut=4]="Uncut";var w=function(s,o,u,p,f,m,b,_,M,T,A){this.Y=s,this.ct=o,this.Ps=u,this.ug=p,this.Nm=T,this.Cl=A};c.qY=w;var h=function(){function s(o,u){this.EH=o,this.Ji=u}return s.prototype.lM=function(o,u){var p=new c.h;this.Ji.D(o,p);var f=new c.h;return this.Ji.D(u,f),(p=p.compare(f))!=0?p:(o=this.Ji.Qa(o,this.EH))<(u=this.Ji.Qa(u,this.EH))?-1:o==u?0:1},s}(),a=function(s,o,u,p,f,m,b,_,M){this.ug=s,this.Ps=o,this.JA=u,this.PH=p,this.Gi=f,this.Cl=m,this.Nm=b,this.QH=_,this.JT=M};c.pY=a,c.GK=function(){function s(){}return s.EK=function(o,u,p,f,m,b){if(u.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else if(p.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{var _=new c.hd;if(_.Ib(u),_.Ib(p),c.Vk.W(_,f,b,!0),_.gd==0)o=new w(u.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{for(u=0,p=_.Hd(),f=_.md;f!=-1;f=_.ve(f))for(b=_.Ob(f);b!=-1;b=_.Sb(b))for(var M=_.Ya(b),T=0,A=_.Ka(b);T<A;M=_.V(M),T++)_.Sa(M,p,u++);u=s.CM(p,_),s.YL(o,u,_,m)}}},s.CM=function(o,u){for(var p=u.gd,f=new c.ja(0),m=u.md;m!=-1;m=u.ve(m))for(var b=u.Ob(m);b!=-1;b=u.Sb(b))for(var _=u.Ya(b),M=0,T=u.Ka(b);M<T;_=u.V(_),M++)f.add(_);var A=new h(o,u);f.Wd(0,p,function(ye,pe){return A.lM(ye,pe)}),o=[];var O=[],R=u.Hd(),j=u.Hd();m=u.md,b=u.ve(m),T=new c.h;var z=new c.h,V=f.get(0),F=u.cd(V),G=u.Sf(F);u.D(V,T);var Z=1;for(_=0;Z<p-1;){var K=!1;for(M=Z;M<p;M++)if(M!=_){var re=f.get(M),te=u.cd(re),he=u.Sf(te);if(u.D(re,z),!T.rb(z))break;G==m&&he==b&&(K=s.pM(R,j,u,o,O,F,V,te,re))}if(K||_==Z-1){if(K&&_==Z-1&&Z--,++_==p)break;V=f.get(_),F=u.cd(V),G=u.Sf(F),u.D(V,T)}K||(Z=_+1)}for(p=[],m=u.md;m!=-1;m=u.ve(m))for(b=u.Ob(m);b!=-1;b=u.Sb(b))for(f=u.Ya(b),M=0,T=u.Ka(b);M<T;f=u.V(f),M++){if(0<=(_=u.Qa(f,j)))for(;_<O.length&&O[_].ug==f;)p.push(O[_++]);if(0<=(_=u.Qa(f,R)))for(;_<o.length&&o[_].ug==f;)p.push(o[_++])}return u.Ud(R),u.Ud(j),p},s.pM=function(o,u,p,f,m,b,_,M,T){var A=p.tj(b),O=p.tj(M),R=p.Ya(b),j=p.Ya(M),z=p.Na(_),V=p.Na(T),F=!1,G=!1,Z=!1,K=!1;return _!=R&&(T!=j&&(F=s.qM(o,p,f,b,z,M,V)),T!=O&&(G=s.rM(o,p,f,b,z,M,T))),_!=A&&(T!=j&&(Z=s.sM(u,p,m,b,_,M,V,R)),T!=O&&(K=s.tM(u,p,m,b,_,M,T,R))),F&&G&&Z?(o=f.length-1,m[K?m.length-2:m.length-1].Gi==2&&(f[o-1]=f[o],--f.length)):F&&G&&K&&m[m.length-1].Gi==2&&(m=f[f.length-1],--f.length,p.Qa(m.ug,o)==f.length&&p.Sa(m.ug,o,-1)),F||G||Z||K},s.qM=function(o,u,p,f,m,b,_){var M=new c.zb,T=new c.zb,A=[0,0],O=[0,0],R=u.cc(m);return R==null&&(u.fd(m,M),R=M),(M=u.cc(_))==null&&(u.fd(_,T),M=T),2>(R=R.Fa(M,null,A,O,0))&&(f=new a(m,f,A[0],NaN,R,_,b,O[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1)),!0},s.rM=function(o,u,p,f,m,b,_){var M=new c.zb,T=new c.zb,A=[0,0],O=[0,0],R=u.cc(m);return R==null&&(u.fd(m,M),R=M),(M=u.cc(_))==null&&(u.fd(_,T),M=T),2>(R=R.Fa(M,null,A,O,0))&&(f=new a(m,f,A[0],NaN,R,_,b,O[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0)},s.sM=function(o,u,p,f,m,b,_,M){var T=new c.zb,A=new c.zb,O=[0,0],R=[0,0],j=u.cc(m);return j==null&&(u.fd(m,T),j=T),(T=u.cc(_))==null&&(u.fd(_,A),T=A),(j=j.Fa(T,null,O,R,0))==2?(f=new a(m,f,O[0],O[1],j,_,b,R[0],R[1]),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0):(A=!1,m==M&&(f=new a(m,f,O[0],NaN,j,_,b,R[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),A=!0),A)},s.tM=function(o,u,p,f,m,b,_,M){var T=new c.zb,A=new c.zb,O=[0,0],R=[0,0],j=u.cc(m);return j==null&&(u.fd(m,T),j=T),(T=u.cc(_))==null&&(u.fd(_,A),T=A),(j=j.Fa(T,null,O,R,0))==2?(f=new a(m,f,O[0],O[1],j,_,b,R[0],R[1]),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),!0):(A=!1,m==M&&(f=new a(m,f,O[0],NaN,j,_,b,R[0],NaN),p.push(f),0>(f=u.Qa(m,o))&&u.Sa(m,o,p.length-1),A=!0),A)},s.YL=function(o,u,p,f){var m=[];m[0]=new c.h,m[1]=new c.h,m[2]=new c.h,m[3]=new c.h;var b=new c.h,_=new c.h,M=new c.h,T=new c.h,A=null;f!=null&&(A=new c.jg).Qr();var O=0,R=null,j=new c.zb;new c.zb;for(var z=p.Ob(p.md);z!=-1;z=p.Sb(z)){for(var V=4,F=-1,G=-1,Z=-1,K=-1,re=NaN,te=!0,he=!1,ye=!0,pe=!0,De=!0,Se=0,Qe=z,We=0,Ce=p.Ya(z),Zt=p.Ka(z),ji=0;ji<Zt;Ce=p.V(Ce),ji++){var Qt=p.cc(Ce);if(Qt==null){if(!p.fd(Ce,j))continue;Qt=j}G==-1&&(G=Ce);for(var Tt=0;O<u.length&&Ce==u[O].ug;){F=u[O].Ps;var It=u[O].ug,pt=u[O].JA,ai=u[O].Nm,dt=u[O].Cl,qs=u[O].QH;if(u[O].Gi==2){if(he||(Qe=F,G=It,We=pt,Z=ai,K=dt,re=qs,V=2,f!=null?R=new c.Ua:Se=0,De=!1,pe=!0),pt=u[O].PH,qs=u[O].JT,f!=null?(Qt.dh(Tt,u[O].PH,A),R.pc(A.get(),pe)):Se++,Tt=pt,he=!0,pe=te=!1,O+1==u.length||u[O+1].Gi!=2||u[O+1].ug==It&&u[O+1].JA!=Tt){if(f!=null){var bt=new w(R,2,F,It,pt,V,Qe,G,We,ai,dt);f.push(bt)}else null.add(Se);Qe=F,G=It,We=pt,Z=ai,K=dt,re=qs,V=2,he=te=!1,pe=De=!0}}else{var Rr=p.V(It);if(O<u.length-1&&u[O+1].ug==Rr&&u[O+1].Cl==dt&&u[O+1].Gi==2)pt!=Tt&&(De&&(f!=null?R=new c.Ua:Se=0),te=0<O&&u[O-1].Ps==F?V==1?0:V==0?1:3:3,f!=null?(Qt.dh(Tt,pt,A),R.pc(A.get(),pe),bt=new w(R,te,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):(Se++,null.add(Se)),Tt=pt,Qe=F,G=It,We=pt,Z=ai,K=dt,re=qs,V=te,te=ye=!1,pe=De=!0);else if(!s.xM(o,p,u,O,b,_)){s.uM(p,u,O,z,Ce,M,T);var Rt=!1;if(Rr=!1,bt=!0,!(b.rb(M)||_.rb(M)||b.rb(T)||_.rb(T))){m[0].N(b),m[1].N(_),m[2].N(M),m[3].N(T),m.sort(c.h.pu);var Kd=m[0],Zd=m[1],Xd=m[2],Ur=m[3];Kd.rb(b)?Zd.rb(_)?o?(Rr=Rt=!0,bt=!1):Rt=!1:Ur.rb(_)?o?bt=Rr=Rt=!0:Rt=!1:(Rt=!0,bt=Zd.rb(M)):Zd.rb(b)?Xd.rb(_)?o?(Rr=Rt=!0,bt=!1):Rt=!1:Kd.rb(_)?o?bt=Rr=Rt=!0:Rt=!1:(Rt=!0,bt=Xd.rb(M)):Xd.rb(b)?Ur.rb(_)?o?(Rr=Rt=!0,bt=!1):Rt=!1:Zd.rb(_)?o?bt=Rr=Rt=!0:Rt=!1:(Rt=!0,bt=Ur.rb(M)):Kd.rb(_)?o?(Rr=Rt=!0,bt=!1):Rt=!1:Xd.rb(_)?o?bt=Rr=Rt=!0:Rt=!1:(Rt=!0,bt=Kd.rb(M))}Rt&&(Rt=Ce==It,(pt!=Tt||Rt&&Tt==0)&&(De&&(f!=null?R=new c.Ua:Se=0),f!=null?(Qt.dh(Tt,pt,A),R.pc(A.get(),pe)):Se++),bt?V!=1?((pt!=Tt||Rt&&Tt==0)&&(f!=null?(bt=new w(R,1,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):null.add(Se)),Rr?(O>=u.length-2||u[O+2].Ps!=F)&&(V=0):V=1):((pt!=Tt||Rt&&Tt==0)&&(f!=null?(bt=new w(R,3,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):null.add(Se)),V=1):V!=0?((pt!=Tt||Rt&&Tt==0)&&(f!=null?(bt=new w(R,0,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):null.add(Se)),Rr?(O>=u.length-2||u[O+2].Ps!=F)&&(V=1):V=0):((pt!=Tt||Rt&&Tt==0)&&(f!=null?(bt=new w(R,3,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):null.add(Se)),V=0),(pt!=Tt||Rt&&Tt==0)&&(Tt=pt,Qe=F,G=It,We=pt,Z=ai,K=dt,re=qs,te=ye=!1,pe=De=!0))}}O++}Tt!=1&&(De&&(f!=null?R=new c.Ua:Se=0),f!=null?(Qt.dh(Tt,1,A),R.pc(A.get(),pe)):Se++,pe=De=!1,ye=!0)}ye&&(pt=1,It=p.tj(z),It=p.Na(It),dt=ai=-1,qs=NaN,te?f!=null?(bt=new w(R,4,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):null.add(Se):(te=V==1?0:V==0?1:3,f!=null?(bt=new w(R,te,F,It,pt,V,Qe,G,We,ai,dt),f.push(bt)):null.add(Se)))}},s.xM=function(o,u,p,f,m,b){var _=p[f].QH;if(_==1)return s.vM(o,u,p,f,m,b);if(_==0)return s.wM(o,u,p,f,m,b);throw c.i.Ra()},s.vM=function(o,u,p,f,m,b){var _=new c.zb,M=p[f].ug,T=p[f].Nm,A=p[f].Cl,O=-1,R=-1,j=-1,z=-1;if(!o&&0<f){var V=p[f-1];O=V.ug,R=V.Nm,j=V.Cl,z=V.Gi}var F=-1,G=-1,Z=-1,K=-1;f<p.length-1&&(F=(V=p[f+1]).ug,G=V.Nm,Z=V.Cl,K=V.Gi);var re=u.V(M);return V=u.V(A),o?f==p.length-1||F!=M||G!=T||Z!=V||K==2?((o=u.cc(A))==null&&(u.fd(A,_),o=_),b.N(o.lg()),m.nt(b),b.normalize(),m.normalize(),!1):((o=u.cc(A))==null&&(u.fd(A,_),o=_),m.N(o.lg()),(o=u.cc(V))==null&&(u.fd(V,_),o=_),b.N(o.lg()),m.Uq(),b.normalize(),m.normalize(),!1):0<f&&O==M&&R==T&&j==V&&z==2||f<p.length-1&&F==re&&G==T&&Z==V&&K==2?((o=u.cc(A))==null&&(u.fd(A,_),o=_),b.N(o.lg()),m.nt(b),b.normalize(),m.normalize(),!1):!(f<p.length-1&&F==M&&G==T&&Z==V)||((o=u.cc(A))==null&&(u.fd(A,_),o=_),m.N(o.lg()),(o=u.cc(V))==null&&(u.fd(V,_),o=_),b.N(o.lg()),m.Uq(),b.normalize(),m.normalize(),!1)},s.wM=function(o,u,p,f,m,b){var _=new c.zb,M=p[f].ug,T=p[f].Nm,A=p[f].Cl,O=-1,R=-1,j=-1,z=-1;if(!o&&f<p.length-1){var V=p[f+1];O=V.ug,R=V.Nm,j=V.Cl,z=V.Gi}var F=-1,G=-1,Z=-1;V=-1,0<f&&(F=(V=p[f-1]).ug,G=V.Nm,Z=V.Cl,V=V.Gi);var K=u.V(M),re=u.Na(A);return o?f!=0&&F==M&&G==T&&Z==re&&V!=2||((o=u.cc(A))==null&&(u.fd(A,_),o=_),b.N(o.lg()),m.nt(b),b.normalize(),m.normalize(),!1):!(0<f&&F==M&&G==T&&Z==re&&V==2||f<p.length-1&&O==K&&R==T&&j==re&&z==2)||((o=u.cc(A))==null&&(u.fd(A,_),o=_),b.N(o.lg()),m.nt(b),b.normalize(),m.normalize(),!1)},s.uM=function(o,u,p,f,m,b,_){var M=new c.zb,T=o.cc(m);if(T==null&&(o.fd(m,M),T=M),u=(p=u[p]).ug,p=p.JA,m=o.V(u),p==1)b.N(T.lg()),m!=-1&&m!=o.tj(f)?((T=o.cc(m))==null&&(o.fd(m,M),T=M),_.N(T.lg()),(T=o.cc(u))==null&&o.fd(u,M)):_.N(b),b.Uq(),_.normalize(),b.normalize();else{if(p!=0)throw c.i.Ra();_.N(T.lg()),b.nt(_),_.normalize(),b.normalize()}},s}()}(H||(H={})),function(c){var C;(C=c.XL||(c.XL={}))[C.Linear=0]="Linear",C[C.Angular=1]="Angular",C[C.Area=2]="Area";var w=function(){function f(m,b,_){this.pd=b,this.ci=_,this.qA=m}return f.prototype.Nb=function(m){return m instanceof f&&this.ci===m.ci},f.WF=function(m){return m.pd!==0?null:m.qA===-1?new f(-1,2,m.ci*m.ci):f.ah(u[m.qA])},f.ah=function(m){return(m=o[m])===void 0?null:m},f.UO=function(m,b,_){var M=null;if(_!=null)try{_.values[0]==="EPSG"&&(M=f.ah(parseInt(_.values[1])))}catch{}return M===null&&(M=new f(-1,m,b)),M},f.prototype.Fc=function(){return this.qA},f.prototype.xF=function(m){if(m.pd!=this.pd)throw c.i.Hb();return this.ci/m.ci},f.Ph=function(m,b,_){return b.xF(_)*m},f.SE=function(m,b,_,M,T){for(_=_.xF(M),M=0;M<b;M++)T[M]=m[M]*_},f}();c.Uc=w;for(var h=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],u=[],p=0;p<h.length;p+=2)o[h[p]]=new w(h[p],2,h[p+1]);for(h=null,p=0;p<a.length;p+=2)o[a[p]]=new w(a[p],1,a[p+1]);for(a=null,p=0;p<s.length;p+=3)o[s[p]]=new w(s[p],0,s[p+1]),u[s[p]]=s[p+2];s=null}(H||(H={})),function(c){var C=function(){function w(){this.yb=this.pb=0}return w.prototype.set=function(h,a){a!==void 0?(this.pb=h,this.yb=a):typeof h=="number"?(this.pb=h,this.yb=0):(this.pb=h.pb,this.yb=h.yb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(h){var a=this.pb+h.pb;h=this.yb+h.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=h},w.prototype.fN=function(){var h=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(h);this.pb=h,this.yb=a},w.prototype.ZM=function(h,a){this.pb=h.pb+a.pb,this.yb=h.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(h){if(typeof h=="number"){var a=this.pb-h;h=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-h.pb,h=this.yb+h.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=h},w.prototype.Bg=function(h){var a=this.pb*h.pb;this.yb=this.yb*Math.abs(h.pb)+h.yb*Math.abs(this.pb)+this.yb*h.yb+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Po=function(h){var a=this.pb*h;this.yb=this.yb*Math.abs(h)+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Ml=function(h,a){var s=Math.abs(h.pb)*Math.abs(a.pb);this.yb=h.yb*Math.abs(a.pb)+a.yb*Math.abs(h.pb)+h.yb*a.yb+2220446049250313e-31*Math.abs(s),this.pb=s},w.prototype.lm=function(h){var a=Math.abs(h.pb),s=this.pb/h.pb,o=(this.yb+Math.abs(s)*h.yb)/a;h.yb>.01*a&&(o*=1+(1+(h=h.yb/a))*h),this.pb=s,this.yb=o+2220446049250313e-31*Math.abs(s)},w.prototype.sqrt=function(){if(0<=this.pb){var h=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/h:this.pb>this.yb?h-Math.sqrt(this.pb-this.yb):Math.max(h,Math.sqrt(this.pb+this.yb)-h);a+=2220446049250313e-31*Math.abs(h)}else this.pb<-1*this.yb?a=h=NaN:(h=0,a=Math.sqrt(this.yb));this.pb=h,this.yb=a},w.prototype.sin=function(h){var a=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(s)+.5*a*h.yb)*h.yb+2220446049250313e-31*a},w.prototype.cos=function(h){var a=Math.sin(h.pb),s=Math.cos(h.pb);this.pb=s,s=Math.abs(s),this.yb=(Math.abs(a)+.5*s*h.yb)*h.yb+2220446049250313e-31*s},w.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},w.prototype.rs=function(){return this.rg()&&this.yb!=0},w}();c.Xb=C}(H||(H={}));var Ai=new H.h,ro=new H.h,na=new H.h,so=new H.h,oa=new H.h;(function(c){var C,w;(w=C||(C={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var h=function(){function a(s,o,u,p,f,m,b){o!==void 0?(this.ib=s,this.ek=o,this.dl=u,this.ki=p,this.za=m,this.cA=b,this.gw=f):(this.ib=s.ib,this.ek=s.ek,this.dl=s.dl,this.ki=s.ki,this.za=s.za,this.cA=s.cA,this.gw=s.gw),this.XG=!0}return a.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},a.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!c.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},a.vP=function(s,o,u,p,f,m,b){return new a(s,o,u,p,f,m,b)},a}();c.vY=h,C=function(){function a(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(s){return this.Te!=null?this.Te[s]:null},a.prototype.Zg=function(s,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var u=0,p=this.wb.I();u<p;u++)this.Te.push(null)}this.Te[s]=o},a.prototype.ep=function(s,o){this.nd.T(s,1,o)},a.prototype.cp=function(s,o){this.nd.T(s,2,o)},a.prototype.QB=function(s,o){this.nd.T(s,6,o)},a.prototype.Up=function(s){return this.nd.U(s,6)},a.prototype.gx=function(s,o){this.nd.T(s,7,o)},a.prototype.sv=function(s){return this.nd.U(s,0)},a.prototype.JJ=function(s,o){this.dd.T(s,1,o)},a.prototype.NJ=function(s,o){this.dd.T(s,0,o)},a.prototype.EF=function(s){return this.dd.U(s,7)},a.prototype.ap=function(s,o){this.dd.T(s,3,o)},a.prototype.bp=function(s,o){this.dd.T(s,4,o)},a.prototype.pU=function(s){this.dd==null&&(this.dd=new c.ad(8));var o=this.dd.De();return this.dd.T(o,2,s),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.JQ=function(s){this.dd.kd(s)},a.prototype.rU=function(s){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0));var o=this.nd.De();return this.nd.T(o,0,o),this.nd.T(o,3,0),this.nd.T(o,6,0),this.gx(o,s),o>=this.Qi.size&&(s=16>o?16:c.P.truncate(3*o/2),this.Qi.resize(s),this.xo.resize(s)),this.Qi.set(o,0),this.xo.set(o,0),o},a.prototype.nF=function(s){this.nd.kd(s)},a.prototype.Qy=function(s){this.ud.kd(s),this.gd--},a.prototype.jI=function(s){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0));var o=this.ud.De(),u=0<=s?s:o;if(this.ud.T(o,0,u),0>s){if(u>=this.wb.I()){if(s=16>u?16:c.P.truncate(3*u/2),this.wb.resize(s),this.Te!=null)for(var p=0;p<s;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(s),this.jt=this.wb.vb(0)}this.wb.Db(u,-1e38,-1e38),this.Te!=null&&(this.Te[u]=null),this.Ug!=null&&this.Ug.write(u,1)}return this.ud.T(o,4,2*u),this.gd++,o},a.prototype.yj=function(s,o,u){var p=o!=-1?this.Na(o):this.tj(s),f=p!=-1?this.V(p):-1,m=this.jI(u==null?this.gd:-1),b=this.Va(m);return u!=null&&this.wb.It(b,u),this.cj(m,s),this.Cc(m,f),this.Dc(m,p),f!=-1&&this.Dc(f,m),p!=-1&&this.Cc(p,m),u=this.ec(s),p=this.Ya(s),o==-1&&this.Yg(s,m),o==p&&this.Kf(s,m),u&&f==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),m},a.prototype.pm=function(){return this.lo==null&&(this.lo=new c.Ta(this.wb.description)),this.lo},a.prototype.$o=function(s,o){this.dd.T(s,2,-134217729&this.dd.U(s,2)||(o==1?134217728:0))},a.prototype.Kn=function(s){return 134217728&this.dd.U(s,2)?1:0},a.prototype.cN=function(s){var o=this.Kg(s.K(),s.description);return s.K()==1736&&this.$o(o,s.Kn()),this.PD(o,s),o},a.prototype.dN=function(s){var o=this.Kg(s.K(),s.description);return this.QD(o,s),o},a.prototype.SV=function(s,o){this.nd==null&&(this.nd=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.xo=new c.ce(0)),this.nd.Ee(this.nd.Jg+s),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+s),this.xo.Jb(this.xo.size+s)},a.prototype.PD=function(s,o){this.SV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var u=this.Te!=null&&o.Se!=null,p=0,f=o.ea();p<f;p++)if(!(2>o.Ka(p))){var m=this.wf(s,-1);this.mn(m,o.ec(p));for(var b=o.Ca(p),_=o.Wc(p);b<_;b++){var M=this.yj(m,-1,null);if(u)if(M=this.Va(M),(1&o.UF(b))!=0)this.Zg(M,null);else{var T=new c.jg;o.cc(b,T,!0),this.Zg(M,T.get())}}}},a.prototype.QD=function(s,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),s=this.wf(s,-1);var u=0;for(o=o.I();u<o;u++)this.yj(s,-1,null)},a.prototype.JX=function(s,o,u){var p=this.V(s);if(p==-1)throw c.i.Ra();for(var f=this.pm(),m=this.cd(s),b=0,_=o.ql(u);b<_;b++){var M=this.Va(s),T=this.V(s),A=o.Xp(u,b);b==0&&(A.Vo(f),this.Fh(s,f)),A.K()==322?this.Zg(M,null):this.Zg(M,c.ba.kg(A)),A.Ro(f),b<_-1?s=this.yj(m,T,f):this.Fh(p,f)}},a.prototype.IX=function(s,o,u){var p=this.V(s);if(p==-1)throw c.i.Ra();for(var f=this.pm(),m=this.cd(s),b=0,_=o.ql(u);b<_;b++){var M=this.Va(s),T=this.V(s),A=o.Xp(u,_-b-1);b==0&&(A.Ro(f),this.Fh(s,f)),A.K()==322?this.Zg(M,null):this.Zg(M,c.ba.kg(A)),A.Vo(f),b<_-1?s=this.yj(m,T,f):this.Fh(p,f)}},a.prototype.DF=function(){var s=new c.l;s.Pa();for(var o=this.$q(),u=new c.h,p=!0,f=o.next();f!=-1;f=o.next())this.D(f,u),p?s.$b(u.x,u.y):s.Nk(u.x,u.y),p=!1;return s},a.prototype.Ib=function(s){var o=s.K();if(c.ba.Ic(o))return this.cN(s);if(o==550)return this.dN(s);throw c.i.Ra()},a.prototype.pN=function(s,o){var u=o.K();if(c.ba.Ic(u))this.PD(s,o);else{if(u!=550)throw c.i.Ra();this.QD(s,o)}},a.prototype.hN=function(s,o){var u=this.Kg(1736,s.description);if(2>s.Ka(o))return u;this.Kl.Gd(s,s.Ca(o),s.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(u,-1);this.mn(p,s.ec(o)||!0);var f=this.Te!=null&&s.Se!=null,m=s.Ca(o);for(o=s.Wc(o);m<o;m++){var b=this.yj(p,-1,null);if(f)if(b=this.Va(b),(1&s.UF(m))!=0)this.Zg(b,null);else{var _=new c.jg;s.cc(m,_,!0),this.Zg(b,_.get())}}return u},a.prototype.Ke=function(s){var o=this.jc(s),u=c.UK.Kg(o,this.Kl.description),p=this.I(s);if(p==0)return u;if(c.ba.Ic(o)){o=this.ea(s);for(var f=c.Zc.Qh(o+1),m=c.Zc.Or(o+1,0),b=u.description,_=0,M=b.Ba;_<M;_++){for(var T=b.ld(_),A=c.sa.Wa(T),O=c.Zc.TE(T,p),R=this.wb.vb(T),j=0,z=0,V=0,F=this.Ob(s);F!=-1;F=this.Sb(F)){var G=0;this.ec(F)&&(G|=1),this.TS(F)&&(G|=4),G!=0&&m.uJ(z,G);var Z=this.Ka(F);if(f.write(z++,V),V+=Z,T==0){Z=R;var K=O,re=new c.h;for(G=this.Ya(F);j<V;G=this.V(G),j++){var te=this.Va(G);Z.uc(2*te,re),K.Vt(2*j,re)}}else for(G=this.Ya(F);j<V;G=this.V(G),j++)for(te=this.Va(G),K=0;K<A;K++)re=R.gg(te*A+K),O.rr(j*A+K,re)}u.kn(T,O),f.write(o,p)}u.KJ(m),u.LJ(f),u.Qc(16777215)}else if(o==550){for(b=u.description,u.resize(p),_=0,M=b.Ba;_<M;_++){for(T=b.ld(_),A=c.sa.Wa(T),O=u.vb(T),R=this.wb.vb(T),j=0,F=this.Ob(s),Z=this.Ka(F),G=this.Ya(F);j<Z;G=this.V(G),j++)for(te=this.Va(G),K=0;K<A;K++)re=R.gg(te*A+K),O.rr(j*A+K,re);u.kn(T,O)}u.Qc(16777215)}return u},a.prototype.wB=function(s){for(var o=this.Ob(s);o!=-1;o=this.ar(o));o=this.KR(s);var u=this.ve(s);o!=-1?this.JJ(o,u):this.md=u,u!=-1?this.NJ(u,o):this.sw=o,this.JQ(s)},a.prototype.Kg=function(s,o){return o===void 0?this.VE(s,c.fe.pg()):this.VE(s,o)},a.prototype.VE=function(s,o){return s=this.pU(s),this.wb==null?this.wb=this.Kl=new c.ee(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=s:(this.NJ(s,this.sw),this.JJ(this.sw,s)),this.sw=s},a.prototype.ve=function(s){return this.dd.U(s,1)},a.prototype.KR=function(s){return this.dd.U(s,0)},a.prototype.jc=function(s){return 2147483647&this.dd.U(s,2)},a.prototype.CJ=function(s,o,u){o=this.yk[o],(s=this.EF(s))>=o.size&&o.resize(Math.max(c.P.truncate(1.25*s),16),-1),o.write(s,u)},a.prototype.FF=function(s,o){return(s=this.EF(s))<(o=this.yk[o]).size?o.read(s):-1},a.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var s=0;s<this.yk.length;s++)if(this.yk[s]==null)return this.yk[s]=c.Zc.Qh(0),s;return this.yk.push(c.Zc.Qh(0)),this.yk.length-1},a.prototype.sW=function(s){this.yk[s]=null},a.prototype.Ob=function(s){return this.dd.U(s,3)},a.prototype.mv=function(s){return this.dd.U(s,4)},a.prototype.I=function(s){return this.dd.U(s,5)},a.prototype.ea=function(s){return this.dd.U(s,6)},a.prototype.Ip=function(s,o,u){for(var p=0,f=this.md;f!=-1;f=this.ve(f)){var m=this.jc(f);if(c.ba.Ic(m)&&(!u||m==1736)){m=this.jc(f)==1736;for(var b=this.Ob(f);b!=-1;){for(var _=0,M=this.Ya(b);_<c.P.truncate(this.Ka(b)/2);){var T=this.V(M);if(T==-1)break;var A=this.Va(M),O=this.Uh(A);O!=null?A=O.Rb():(O=this.Va(T),A=this.wb.Ar(A,O)),A<=s?(A==0?p==0&&(p=-1):p=1,T!=this.tj(b)&&(this.gC(T,M),this.qd(T,!0))):M=this.V(M),_++}for(_=this.Ya(b),M=this.ec(b)?_:this.tj(b);0<this.Ka(b);){if((T=this.Na(M))==-1){this.qd(M,!0),p==0&&(p=-1);break}var R=this.Va(T);if((O=this.Uh(R))!=null?A=O.Rb():(A=this.Va(M),A=this.wb.Ar(A,R)),A<=s)A==0?p==0&&(p=-1):p=1,this.gC(T,M),this.qd(T,!1),_==T&&(_=this.Ya(b));else if((M=this.Na(M))==_)break}M=this.Ka(b),o&&(m?3>M:2>M)?(b=this.ar(b),p=0<M?1:p==0?-1:p):b=this.Sb(b)}}}return p},a.prototype.gC=function(s,o){var u=this.Va(s),p=this.Va(o);if(this.Ug!=null&&(u=this.Ug.read(u),this.Ug.write(p,u)),this.di!=null){for(p=0,u=this.di.length;p<u;p++)if(this.di[p]!=null){var f=this.Qa(s,p);f!=-1&&this.Sa(o,p,f)}}},a.prototype.Wl=function(s,o,u){var p=0,f=this.V(s);if(f==-1)throw c.i.Ra();for(var m=this.Va(s),b=this.Va(f),_=this.Uh(m),M=_==null?this.wb.Ar(m,b):_.Rb(),T=0;T<u;T++){var A=o[T];if(0<A&&1>A){var O=A;_!=null&&(O=0<M?_.Tx(A)/M:0),this.wb.fD(m,b,O,this.pm());var R=this.yj(this.cd(s),f,this.pm());if(p++,_!=null){var j=_.fl(0,A);O=this.Va(this.Na(R)),this.Zg(O,j),this.mf(R,j.xc()),T!=u-1&&o[T+1]!=1||(A=_.fl(A,1),this.Zg(O,A))}}}return p},a.prototype.HX=function(s,o,u){var p=0,f=this.V(s);if(f==-1)throw c.i.ga("internal error");var m=this.Va(s),b=this.Va(f),_=this.Uh(m),M=_==null?this.wb.Ar(m,b):_.Rb(),T=0;s=this.cd(s);for(var A=0;A<u;A++){var O=o[A];if(T<O&&1>O){var R=O;if(_!=null&&(R=0<M?_.Tx(O)/M:0),this.wb.fD(m,b,R,this.pm()),R=this.tS(s,f,this.pm()),p++,_!=null){T=_.fl(T,O);var j=this.Va(this.Na(R));this.Zg(j,T),this.Db(R,T.qa,T.ma),A!=u-1&&o[A+1]!=1||(T=_.fl(O,1),R=this.Va(R),this.Zg(R,T))}}T=O}return p},a.prototype.tS=function(s,o,u){var p=o!=-1?this.Na(o):this.tj(s),f=p!=-1?this.V(p):-1,m=this.jI(u==null?this.gd:-1),b=this.Va(m);return u!=null&&this.wb.It(b,u),this.cj(m,s),this.Cc(m,f),this.Dc(m,p),f!=-1&&this.Dc(f,m),p!=-1&&this.Cc(p,m),u=this.ec(s),p=this.Ya(s),o==-1&&this.Yg(s,m),o==p&&(u&&p!=-1||this.Kf(s,m)),u&&f==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),m},a.prototype.pE=function(s,o,u){var p=this.Va(o),f=this.Va(u);if(0>p||f>this.gd-1)throw c.i.O("invalid call");if(p>f&&!this.ec(s))throw c.i.O("cannot iterate across an open path");for(s=0;o!=u;o=this.V(o))p=this.Va(o),(f=this.Uh(p))!=null?s+=f.Rb():(f=this.Va(this.V(o)),s+=this.wb.Ar(p,f));return s},a.prototype.Fh=function(s,o){var u=this.Va(s);this.wb.It(u,o),(u=this.Uh(u))!=null&&u.setStart(o),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&u.setEnd(o))},a.prototype.Xi=function(s,o){s=this.Va(s),this.wb.we(s,o)},a.prototype.mf=function(s,o){this.Db(s,o.x,o.y)},a.prototype.Db=function(s,o,u){var p=this.Va(s);this.wb.Db(p,o,u),(p=this.Uh(p))!=null&&p.UB(o,u),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&p.Sl(o,u))},a.prototype.D=function(s,o){this.wb.D(this.ud.U(s,0),o)},a.prototype.Hc=function(s,o){this.wb.Aa[0].uc(2*this.ud.U(s,0),o)},a.prototype.Oa=function(s){var o=new c.h;return this.wb.D(this.ud.U(s,0),o),o},a.prototype.ZF=function(s,o){this.jt.uc(2*s,o)},a.prototype.Vc=function(s,o,u){return this.wb.Vc(s,this.Va(o),u)},a.prototype.setAttribute=function(s,o,u,p){this.wb.setAttribute(s,this.Va(o),u,p)},a.prototype.Va=function(s){return this.ud.U(s,0)},a.prototype.kh=function(){var s=new c.h;return this.D(void 0,s),s.y},a.prototype.hq=function(s,o){s=this.Va(s),o=this.Va(o);var u=this.wb.Aa[0].o;return u[2*s]===u[2*o]&&u[2*s+1]===u[2*o+1]},a.prototype.Fv=function(s,o){s=this.Va(s);var u=this.wb.Aa[0].o;return u[2*s]===o.x&&u[2*s+1]===o.y},a.prototype.rX=function(s,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=c.Zc.Fn(this.wb.I(),1)}(s=this.Va(s))>=this.Ug.size&&this.Ug.resize(s+1,1),this.Ug.write(s,o)},a.prototype.YF=function(s){return s=this.Va(s),this.Ug==null||s>=this.Ug.size?1:this.Ug.read(s)},a.prototype.Sa=function(s,o,u){o=this.di[o],s=this.Va(s),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(s,u)},a.prototype.Qa=function(s,o){return(s=this.Va(s))<(o=this.di[o]).size?o.read(s):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var s=0;s<this.di.length;s++)if(this.di[s]==null)return this.di[s]=c.Zc.Qh(0,-1),s;return this.di.push(c.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(s){this.di[s]=null},a.prototype.cc=function(s){return this.Te!=null?(s=this.Va(s),this.Te[s]):null},a.prototype.fd=function(s,o){var u=this.ud.U(s,2);if(u==-1)return!1;if(this.aA){var p=new c.Ta;this.Xi(s,p),o.setStart(p),this.Xi(u,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(s,0),Ai),o.gm(0,Ai),this.wb.Hc(this.ud.U(u,0),Ai),o.gm(1,Ai);return!0},a.prototype.hW=function(s,o,u){if(this.aA){var p=new c.Ta;this.Xi(s,p),u.setStart(p),this.Xi(o,p),u.setEnd(p)}else this.wb.Hc(s,Ai),u.gm(0,Ai),this.wb.Hc(o,Ai),u.gm(1,Ai)},a.prototype.wf=function(s,o){if(o!=-1){if(s!=this.Sf(o))throw c.i.Ra();var u=this.es(o)}else u=this.mv(s);var p=this.rU(s);return o!=-1&&this.ep(o,p),this.cp(p,o),this.ep(p,u),u!=-1?this.cp(u,p):this.ap(s,p),o==-1&&this.bp(s,p),this.Tl(s,this.ea(s)+1),p},a.prototype.iG=function(s,o,u,p){s=this.wf(s,-1);for(var f=0,m=o,b=!1;m==u&&(b=!0),this.cj(m,s),f++,(m=this.V(m))!=o;);return this.mn(s,!0),this.Xj(s,f),b&&(o=u),this.Kf(s,o),this.Yg(s,this.Na(o)),this.fp(s,!1),p!=null&&(p[0]=b),s},a.prototype.ar=function(s){var o=this.es(s),u=this.Sb(s),p=this.Sf(s);return o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.vO(s),this.Tl(p,this.ea(p)-1),this.nF(s),u},a.prototype.vO=function(s){var o=this.Ya(s);if(o!=-1){for(var u=0,p=this.Ka(s);u<p;u++){var f=o;o=this.V(o),this.Qy(f)}o=this.Sf(s),this.Vj(o,this.I(o)-this.Ka(s))}this.Xj(s,0)},a.prototype.Sb=function(s){return this.nd.U(s,2)},a.prototype.es=function(s){return this.nd.U(s,1)},a.prototype.Ka=function(s){return this.nd.U(s,3)},a.prototype.ec=function(s){return(1&this.Up(s))!=0},a.prototype.mn=function(s,o){if(this.ec(s)!=o){if(0<this.Ka(s)){var u=this.Ya(s),p=this.tj(s);o?(this.Cc(p,u),this.Dc(u,p),u=this.Va(p)):(this.Cc(p,-1),this.Dc(u,-1),u=this.Va(p)),this.Zg(u,null)}this.QB(s,(1|this.Up(s))-1|(o?1:0))}},a.prototype.Sf=function(s){return this.nd.U(s,7)},a.prototype.TS=function(s){return(2&this.Up(s))!=0},a.prototype.KB=function(s,o){this.QB(s,(2|this.Up(s))-2|(o?2:0))},a.prototype.qz=function(s){if(this.YS(s))return this.Qi.get(this.sv(s));var o=new c.zb,u=this.Ya(s);if(u==-1)return 0;var p=new c.h;this.D(u,p);for(var f=0,m=0,b=this.Ka(s);m<b;m++,u=this.V(u)){var _=this.cc(u);if(_==null){if(!this.fd(u,o))continue;_=o}f+=_.Sx(p.x,p.y)}return this.fp(s,!0),this.Qi.set(this.sv(s),f),f},a.prototype.ir=function(s,o,u){o=this.Ek[o],s=this.sv(s),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(s,u)},a.prototype.uj=function(s,o){return(s=this.sv(s))<(o=this.Ek[o]).size?o.read(s):-1},a.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var s=0;s<this.Ek.length;s++)if(this.Ek[s]==null)return this.Ek[s]=c.Zc.Qh(0),s;return this.Ek.push(c.Zc.Qh(0)),this.Ek.length-1},a.prototype.xB=function(s){this.Ek[s]=null},a.prototype.UT=function(s,o,u){if(u==-1)throw c.i.O();if(o!=u){var p=this.Sb(u),f=this.es(u),m=this.Sf(u);f==-1?this.ap(m,p):this.cp(f,p),p==-1?this.bp(m,f):this.ep(p,f),this.Vj(m,this.I(m)-this.Ka(u)),this.Tl(m,this.ea(m)-1),f=o==-1?this.mv(s):this.es(o),this.ep(u,f),this.cp(u,o),o==-1?this.bp(s,u):this.ep(o,u),f==-1?this.ap(s,u):this.cp(f,u),this.Vj(s,this.I(s)+this.Ka(u)),this.Tl(s,this.ea(s)+1),this.gx(u,s)}},a.prototype.kj=function(s,o){this.wb.we(this.Va(o),this.pm()),this.yj(s,-1,this.pm())},a.prototype.qd=function(s,o){var u=this.cd(s),p=this.Na(s),f=this.V(s);p!=-1&&this.Cc(p,f);var m=this.Ka(u);if(s==this.Ya(u)&&this.Kf(u,1<m?f:-1),f!=-1&&this.Dc(f,p),s==this.tj(u)&&this.Yg(u,1<m?p:-1),p!=-1&&f!=-1){p=this.Va(p);var b=this.Va(f);o?(o=this.Uh(p))!=null&&(p=new c.h,this.wb.D(b,p),o.Rc(p)):(b=this.Va(s),o=this.Uh(b),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(u,m-1),u=this.Sf(u),this.Vj(u,this.I(u)-1),this.Qy(s),f},a.prototype.Ya=function(s){return this.nd.U(s,4)},a.prototype.tj=function(s){return this.nd.U(s,5)},a.prototype.V=function(s){return this.ud.U(s,2)},a.prototype.Na=function(s){return this.ud.U(s,1)},a.prototype.cd=function(s){return this.ud.U(s,3)},a.prototype.hc=function(s,o){return this.yj(s,-1,o)},a.prototype.$q=function(s){if(s===void 0)return this.$q(!1);if(s instanceof h)return new h(s);var o,u=-1,p=-1,f=-1,m=0,b=!1;for(o=this.md;o!=-1;o=this.ve(o))if(!s||c.ba.Ic(this.jc(o))){for(u=this.Ob(o);u!=-1;u=this.Sb(u))if(f=p=this.Ya(u),m=0,p!=-1){b=!0;break}if(b)break}return h.vP(this,o,u,p,f,m,s)},a.prototype.Pc=function(s){if(this.Kl.Pc(s),this.Te!=null)for(var o=0,u=this.Te.length;o<u;o++)this.Te[o]!=null&&this.Te[o].Pc(s)},a.prototype.lr=function(s,o,u,p){p?this.JX(s,o,u):this.IX(s,o,u)},a.prototype.Dc=function(s,o){this.ud.T(s,1,o)},a.prototype.Cc=function(s,o){this.ud.T(s,2,o)},a.prototype.cj=function(s,o){this.ud.T(s,3,o)},a.prototype.Xj=function(s,o){this.nd.T(s,3,o)},a.prototype.Kf=function(s,o){this.nd.T(s,4,o)},a.prototype.Yg=function(s,o){this.nd.T(s,5,o)},a.prototype.Tl=function(s,o){this.dd.T(s,6,o)},a.prototype.Vj=function(s,o){this.dd.T(s,5,o)},a.prototype.kJ=function(s){var o=s;do{var u=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,u),o=u}while(o!=s)},a.prototype.XB=function(s){this.gd=s},a.prototype.br=function(s){var o=this.es(s),u=this.Sb(s),p=this.Sf(s);o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.Kf(s,-1),this.Yg(s,-1),this.nF(s)},a.prototype.oi=function(s,o){var u=this.Na(s),p=this.V(s);if(u!=-1&&this.Cc(u,p),p!=-1&&this.Dc(p,u),u!=-1&&p!=-1)if(u=this.Va(u),p=this.Va(p),o){if((o=this.Uh(u))!=null){var f=new c.h;this.wb.D(p,f),o.Rc(f)}}else o=this.Va(s),o=this.Uh(o),this.Zg(u,o),o!=null&&(f=new c.h,this.wb.D(u,f),o.Ec(f));this.Qy(s)},a.prototype.YS=function(s){return(4&this.Up(s))!=0},a.prototype.fp=function(s,o){this.QB(s,(4|this.Up(s))-4|(o?4:0))},a.prototype.nx=function(s,o){var u=this.ud.o;this.wb.oc();var p=this.wb.Aa[0].o;s.Wd(0,o,function(f,m){var b=u[5*f];f=u[5*m],m=p[2*b],b=p[2*b+1];var _=p[2*f];return b<(f=p[2*f+1])?-1:b>f?1:m<_?-1:m>_?1:0})},a.prototype.eS=function(){for(var s=this.md;s!=-1;s=this.ve(s))if(!c.ba.Ic(this.jc(s)))return!0;return!1},a.prototype.cC=function(s,o){for(var u=this.Ob(s),p=this.Ob(o),f=this.mv(s),m=this.mv(o),b=this.Ob(s);b!=-1;b=this.Sb(b))this.gx(b,o);for(b=this.Ob(o);b!=-1;b=this.Sb(b))this.gx(b,s);this.ap(s,p),this.ap(o,u),this.bp(s,m),this.bp(o,f),u=this.I(s),p=this.ea(s),f=this.ea(o),this.Vj(s,this.I(o)),this.Vj(o,u),this.Tl(s,f),this.Tl(o,p),u=this.dd.U(s,2),this.dd.T(s,2,this.dd.U(o,2)),this.dd.T(o,2,u)},a}(),c.hd=C})(H||(H={})),function(c){var C=function(w){function h(a,s,o,u){var p=w.call(this)||this;return p.aa=new c.l,a===void 0?p.PE():typeof a=="number"?p.QO(a,s,o,u):a instanceof c.Ta?s!==void 0?p.Su(a,s,o):p.RO(a):a instanceof c.sa?s!==void 0?p.TO(a,s):p.SO(a):a instanceof c.l?p.PO(a):p.PE(),p}return At(h,w),h.prototype.Su=function(a,s,o){this.description=c.fe.pg(),this.aa.Pa(),a.B()||this.vu(a,s,o)},h.prototype.PO=function(a){this.description=c.fe.pg(),this.aa.L(a),this.aa.normalize()},h.prototype.SO=function(a){if(a==null)throw c.i.O();this.description=a,this.aa.Pa()},h.prototype.TO=function(a,s){if(a==null)throw c.i.O();this.description=a,this.aa.L(s),this.aa.normalize()},h.prototype.PE=function(){this.description=c.fe.pg(),this.aa.Pa()},h.prototype.RO=function(a){this.description=c.fe.pg(),this.aa.Pa(),a.B()||this.vu(a)},h.prototype.QO=function(a,s,o,u){this.description=c.fe.pg(),this.L(a,s,o,u)},h.prototype.L=function(a,s,o,u){if(this.wc(),typeof a=="number")this.aa.L(a,s,o,u);else for(this.Pa(),s=0,o=a.length;s<o;s++)this.$b(a[s])},h.prototype.Zo=function(a){if(this.wc(),!a.aT())throw c.i.O();this.aa.L(a)},h.prototype.Pa=function(){this.wc(),this.aa.Pa()},h.prototype.B=function(){return this.aa.B()},h.prototype.S=function(){return this.aa.S()},h.prototype.da=function(){return this.aa.da()},h.prototype.ik=function(){return this.aa.ik()},h.prototype.Lp=function(){return this.aa.Lp()},h.prototype.Kp=function(){return this.aa.tf()},h.prototype.$b=function(a){if(a instanceof c.h)this.wc(),this.aa.$b(a);else if(a instanceof c.l)this.wc(),this.aa.$b(a);else if(a instanceof c.Ta){if(this.wc(),!a.Bc()){var s=a.description;if(this.description!=s&&this.Ll(s),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,u=s.Ba;o<u;o++)for(var p=s.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++){var b=a.Vc(p,m),_=this.Vg(p,m);_.$b(b),this.setInterval(p,m,_)}}}}else if(a instanceof h&&!a.B())for((s=a.description)!=this.description&&this.Ll(s),this.aa.$b(a.aa),o=1,u=s.Ba;o<u;o++)for(p=s.ld(o),f=c.sa.Wa(p),m=0;m<f;m++)b=a.Vg(p,m),(_=this.Vg(p,m)).$b(b),this.setInterval(p,m,_)},h.prototype.vu=function(a,s,o){if(s!==void 0){this.aa.L(a.D(),s,o),o=1;for(var u=(s=a.description).Ba;o<u;o++)for(var p=s.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++){var b=a.Vc(p,m);this.setInterval(p,m,b,b)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,u=(s=a.description).Ba;o<u;o++)for(p=s.Fd(o),f=c.sa.Wa(p),m=0;m<f;m++)b=a.Vc(p,m),this.setInterval(p,m,b,b)},h.prototype.setInterval=function(a,s,o,u){if(o=typeof o=="number"?new c.Oc(o,u):o,this.wc(),a==0)if(s==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(s!=1)throw c.i.de();this.aa.G=o.pa,this.aa.H=o.wa}else this.qD(0,a,s,o.pa),this.qD(1,a,s,o.wa)},h.prototype.X=function(a,s){this.wc(),this.aa.X(a,s)},h.prototype.Pc=function(a){if(a instanceof c.Ed)this.wc(),a.hC(this.aa);else if(this.wc(),!this.aa.B()){var s=new c.JK;this.So(s),s.SS()?s.Pa():a.hC(s)}},h.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var s=0;s<2*(this.description.Be.length-2);s++)a.la[s]=this.la[s]}},h.prototype.Ja=function(){return new h(this.description)},h.prototype.He=function(){return this.aa.rF()},h.prototype.Rb=function(){return this.aa.tR()},h.prototype.K=function(){return 197},h.prototype.Eb=function(){return 2},h.prototype.dn=function(a){this.copyTo(a)},h.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},h.prototype.So=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},h.prototype.Vg=function(a,s){var o=new c.Oc;return o.L(this.Pd(0,a,s),this.Pd(1,a,s)),o},h.prototype.If=function(a,s){s.Pf(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(0,u,f));s.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(1,u,f));s.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(0,u,f));s.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(u=this.description.ld(a),p=c.sa.Wa(u),f=0;f<p;f++)s.setAttribute(u,f,this.Pd(1,u,f));s.Db(this.aa.C,this.aa.G);break;default:throw c.i.de()}},h.prototype.hB=function(a,s){a=this.aa.hB(a),s.na(a.x,a.y)},h.prototype.fR=function(a,s){return s*(a.Qq-2)},h.prototype.sF=function(a,s,o){if(this.aa.B())throw c.i.ga("empty geometry");if(s==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.sa.Wa(s))throw c.i.O();var u=this.description.Rf(s);return this.qu(),0<=u?this.la[this.fR(this.description,a)+this.description.GR(u)-2+o]:c.sa.te(s)},h.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=h.Ig(this.description,0),s=h.Ig(this.description,1),o=0,u=1,p=this.description.Ba;u<p;u++){var f=this.description.ld(u),m=c.sa.Wa(f);f=c.sa.te(f);for(var b=0;b<m;b++)this.la[a+o]=f,this.la[s+o]=f,o++}}},h.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var s=c.fe.Kw(a,this.description),o=[],u=h.Ig(this.description,0),p=h.Ig(this.description,1),f=h.Ig(a,0),m=h.Ig(a,1),b=0,_=1,M=a.Ba;_<M;_++){var T=a.ld(_),A=c.sa.Wa(T);if(s[_]==-1){var O=c.sa.te(T);for(T=0;T<A;T++)o[f+b]=O,o[m+b]=O,b++}else for(O=this.description.bk(s[_])-2,T=0;T<A;T++)o[f+b]=this.la[u+O],o[m+b]=this.la[p+O],b++,O++}this.la=o}else this.la=null;this.description=a},h.prototype.Pd=function(a,s,o){if(this.aa.B())throw c.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.sa.Wa(s))throw c.i.de();var u=this.description.Rf(s);return 0<=u?(this.qu(),this.la[h.Ig(this.description,a)+this.description.bk(u)-2+o]):c.sa.te(s)},h.prototype.qD=function(a,s,o,u){if(this.wc(),s==0)a!=0?o!=0?this.aa.H=u:this.aa.C=u:o!=0?this.aa.G=u:this.aa.v=u;else{if(o>=c.sa.Wa(s))throw c.i.de();if(!this.hasAttribute(s)){if(c.sa.yG(s,u))return;this.se(s)}s=this.description.Rf(s),this.qu(),this.la[h.Ig(this.description,a)+this.description.bk(s)-2+o]=u}},h.Ig=function(a,s){return s*(a.Be.length-2)},h.prototype.Fa=function(a){this.wc();var s=new c.l;return a.A(s),this.aa.Fa(s)},h.prototype.isIntersecting=function(a){return a instanceof c.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},h.prototype.Lu=function(a,s){this.wc(),a.B()?this.Pa():s!==void 0?this.vu(a,s,void 0):this.aa.Lu(a.Ng(),a.kh())},h.prototype.offset=function(a,s){this.wc(),this.aa.offset(a,s)},h.prototype.normalize=function(){this.wc(),this.aa.normalize()},h.prototype.tf=function(a){if(a===void 0){if(a=new c.Ta(this.description),this.B())return a;for(s=this.description.Ba,o=1;o<s;o++)for(u=this.description.Fd(o),p=c.sa.Wa(u),f=0;f<p;f++)m=.5*(this.Pd(0,u,f)+this.Pd(1,u,f)),a.setAttribute(u,f,m);return a.Db(this.aa.ik(),this.aa.Lp()),a}if(a.Pf(this.description),this.B())a.Pa();else{for(var s=this.description.Ba,o=1;o<s;o++)for(var u=this.description.ld(o),p=c.sa.Wa(u),f=0;f<p;f++){var m=.5*(this.sF(0,u,f)+this.sF(1,u,f));a.setAttribute(u,f,m)}a.Db(this.aa.tf())}},h.prototype.hz=function(){return new c.Ta(this.aa.hz())},h.prototype.contains=function(a){return a instanceof c.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},h.prototype.ZO=function(a){return this.aa.contains(a)},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var s=0,o=2*(this.description.Be.length-2);s<o;s++)if(this.la[s]!=a.la[s])return!1;return!0},h.prototype.dc=function(){var a=this.description.dc();if(a=c.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var s=0,o=2*(this.description.Be.length-2);s<o;s++)a=c.P.Vh(a,this.la[s]);return a},h.prototype.gs=function(){return this.aa.v},h.prototype.js=function(){return this.aa.G},h.prototype.fs=function(){return this.aa.C},h.prototype.hs=function(){return this.aa.H},h.prototype.ng=function(){return c.si.im(this,null)},h.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},h}(c.ba);c.Hh=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o){h===void 0?this.Pa():(this.v=h,this.G=a,this.C=s,this.H=o)}return w.construct=function(h,a,s,o){var u=new w;return u.v=h,u.G=a,u.C=s,u.H=o,u},w.prototype.L=function(h,a,s,o){typeof h=="number"?s!==void 0?(this.v=h,this.G=a,this.C=s,this.H=o,this.normalize()):(this.v=h,this.G=a,this.C=h,this.H=a):h instanceof c.h?a!==void 0?(this.v=h.x-.5*a,this.C=this.v+a,this.G=h.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=h.x,this.G=h.y,this.C=h.x,this.H=h.y):h instanceof w?this.L(h.v,h.G,h.C,h.H):h instanceof c.Oc&&(h.B()||a.B()?this.Pa():(this.v=h.pa,this.C=h.wa,this.G=a.pa,this.H=a.wa))},w.prototype.bx=function(h,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=h[0].x,this.G=h[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<a;s++){var o=h[s];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(h==null||h.length==0)this.Pa();else for(o=h[0],this.L(o.x,o.y),s=1;s<h.length;s++)a=h[s],this.Nk(a.x,a.y)},w.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.$b=function(h,a){typeof h=="number"?this.B()?(this.v=h,this.G=a,this.C=h,this.H=a):(this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>a?this.G=a:this.H<a&&(this.H=a)):h instanceof c.h||h instanceof c.Od?this.$b(h.x,h.y):h instanceof w&&!h.B()&&(this.$b(h.v,h.G),this.$b(h.C,h.H))},w.prototype.Nk=function(h,a){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>a?this.G=a:this.H<a&&(this.H=a)},w.prototype.X=function(h,a){this.B()||(this.v-=h,this.C+=h,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},w.prototype.scale=function(h){0>h&&this.Pa(),this.B()||(this.v*=h,this.C*=h,this.G*=h,this.H*=h)},w.prototype.zoom=function(h,a){this.B()||this.L(this.tf(),h*this.S(),a*this.da())},w.prototype.isIntersecting=function(h){return!this.B()&&!h.B()&&(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},w.prototype.CG=function(h){return(this.v<=h.v?this.C>=h.v:h.C>=this.v)&&(this.G<=h.G?this.H>=h.G:h.H>=this.G)},w.prototype.Fa=function(h){return!this.B()&&!h.B()&&(h.v>this.v&&(this.v=h.v),h.C<this.C&&(this.C=h.C),h.G>this.G&&(this.G=h.G),h.H<this.H&&(this.H=h.H),(h=this.v<=this.C&&this.G<=this.H)||this.Pa(),h)},w.prototype.hB=function(h){switch(h){case 0:return c.h.construct(this.v,this.G);case 1:return c.h.construct(this.v,this.H);case 2:return c.h.construct(this.C,this.H);case 3:return c.h.construct(this.C,this.G);default:throw c.i.de()}},w.prototype.iB=function(h){if(h==null||4>h.length)throw c.i.O();h[0]!=null?h[0].na(this.v,this.G):h[0]=c.h.construct(this.v,this.G),h[1]!=null?h[1].na(this.v,this.H):h[1]=c.h.construct(this.v,this.H),h[2]!=null?h[2].na(this.C,this.H):h[2]=c.h.construct(this.C,this.H),h[3]!=null?h[3].na(this.C,this.G):h[3]=c.h.construct(this.C,this.G)},w.prototype.rF=function(){return this.B()?0:this.S()*this.da()},w.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},w.prototype.ik=function(){return(this.C+this.v)/2},w.prototype.Lp=function(){return(this.H+this.G)/2},w.prototype.S=function(){return this.C-this.v},w.prototype.da=function(){return this.H-this.G},w.prototype.move=function(h,a){this.B()||(this.v+=h,this.G+=a,this.C+=h,this.H+=a)},w.prototype.Lu=function(h,a){if(a!==void 0)this.move(h-this.ik(),a-this.Lp());else if(h instanceof c.h)this.Lu(h.x,h.y);else{if(!(h instanceof c.Ta))throw c.i.O();a=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=h.Ng()-a,this.C=h.Ng()+a,this.G=h.kh()-s,this.H=h.kh()+s}},w.prototype.offset=function(h,a){this.v+=h,this.C+=h,this.G+=a,this.H+=a},w.prototype.normalize=function(){if(!this.B()){var h=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=h,this.C=a,h=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=h,this.H=a}},w.prototype.fn=function(h){h.na(this.v,this.G)},w.prototype.VI=function(h){h.na(this.C,this.G)},w.prototype.YI=function(h){h.na(this.v,this.H)},w.prototype.gn=function(h){h.na(this.C,this.H)},w.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.tf=function(){return c.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.hz=function(){return c.h.construct(this.v,this.G)},w.prototype.contains=function(h,a){if(a!==void 0)return h>=this.v&&h<=this.C&&a>=this.G&&a<=this.H;if(h instanceof c.Ta)return this.contains(h.Ng(),h.kh());if(h instanceof c.h)return this.contains(h.x,h.y);if(h instanceof w)return h.v>=this.v&&h.C<=this.C&&h.G>=this.G&&h.H<=this.H;throw c.i.O()},w.prototype.jm=function(h,a){if(a!==void 0)return h>this.v&&h<this.C&&a>this.G&&a<this.H;if(h instanceof c.h)return this.jm(h.x,h.y);if(h instanceof w)return h.v>this.v&&h.C<this.C&&h.G>this.G&&h.H<this.H;throw c.i.O()},w.prototype.Nb=function(h){return h==this||h instanceof w&&(!(!this.B()||!h.B())||this.v==h.v&&this.G==h.G&&this.C==h.C&&this.H==h.H)},w.prototype.dc=function(){var h=this.v;h=c.P.truncate(h^h>>>32);var a=c.P.Vh(h);return h=this.C,h=c.P.truncate(h^h>>>32),a=c.P.Vh(h,a),h=this.G,h=c.P.truncate(h^h>>>32),a=c.P.Vh(h,a),h=this.H,h=c.P.truncate(h^h>>>32),c.P.Vh(h,a)},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.uy=function(h,a){var s=this.ak(h),o=this.ak(a);if(s&o)return 0;if(!(s|o))return 4;var u=(s!=0?1:0)|(o!=0?2:0);do{var p=a.x-h.x,f=a.y-h.y;if(p>f?s&w.TC?(s&w.lu?(h.y+=f*(this.v-h.x)/p,h.x=this.v):(h.y+=f*(this.C-h.x)/p,h.x=this.C),s=this.ak(h)):o&w.TC?(o&w.lu?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)):s!=0?(s&w.mu?(h.x+=p*(this.G-h.y)/f,h.y=this.G):(h.x+=p*(this.H-h.y)/f,h.y=this.H),s=this.ak(h)):(o&w.mu?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.ak(a)):s&w.UC?(s&w.mu?(h.x+=p*(this.G-h.y)/f,h.y=this.G):(h.x+=p*(this.H-h.y)/f,h.y=this.H),s=this.ak(h)):o&w.UC?(o&w.mu?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.ak(a)):s!=0?(s&w.lu?(h.y+=f*(this.v-h.x)/p,h.x=this.v):(h.y+=f*(this.C-h.x)/p,h.x=this.C),s=this.ak(h)):(o&w.lu?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)),(s&o)!=0)return 0}while(s|o);return u},w.prototype.ak=function(h){return(h.x<this.v?1:0)|(h.x>this.C?1:0)<<1|(h.y<this.G?1:0)<<2|(h.y>this.H?1:0)<<3},w.prototype.Di=function(h){return!this.B()&&(this.S()<=h||this.da()<=h)},w.prototype.ub=function(h){return h instanceof c.h?Math.sqrt(this.dK(h)):Math.sqrt(this.px(h))},w.prototype.px=function(h){var a=0,s=0,o=this.v-h.C;return o>a&&(a=o),(o=this.G-h.H)>s&&(s=o),(o=h.v-this.C)>a&&(a=o),(o=h.G-this.H)>s&&(s=o),a*a+s*s},w.prototype.dK=function(h){var a=0,s=0,o=this.v-h.x;return o>a&&(a=o),(o=this.G-h.y)>s&&(s=o),(o=h.x-this.C)>a&&(a=o),(o=h.y-this.H)>s&&(s=o),a*a+s*s},w.prototype.en=function(h){this.B()?h.Pa():h.L(this.v,this.C)},w.lu=1,w.mu=4,w.TC=3,w.UC=12,w}();c.l=C}(H||(H={})),function(c){var C,w;(w=C||(C={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var h=function(){function a(s,o){this.ei=s,this.ZG=o}return a.prototype.qr=function(s,o,u){this.ei.FX(u,s,o,this.ZG)},a.prototype.bq=function(s){return this.ei.Tr(s,this.ZG)},a}();C=function(){function a(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new c.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return a.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new c.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.bd=function(s,o){if(!this.Rv)throw c.i.Hb();var u=new c.l;u.L(o),this.io.add(s),this.Fb.push(u)},a.prototype.Hp=function(){if(!this.Rv)throw c.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new c.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.DD=function(s,o){if(!this.Qv)throw c.i.Hb();var u=new c.l;u.L(o),this.io.add(s),this.Fb.push(u)},a.prototype.dF=function(){if(!this.Qv)throw c.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new c.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.zD=function(s,o){if(!this.Pv)throw c.i.Hb();var u=new c.l;u.L(o),this.ew.add(s),this.rd.push(u)},a.prototype.cF=function(){if(!this.Pv)throw c.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var s=!0;s;)switch(this.Yb){case 0:s=this.Bz();break;case 1:s=this.mS();break;case 2:s=this.jS();break;case 3:s=this.lS();break;case 4:s=this.QX();break;case 5:s=this.MX();break;case 6:s=this.NX();break;case 7:s=this.OX();break;case 8:s=this.tx();break;case 9:s=this.dC();break;case 10:s=this.Pz();break;case 11:s=this.eT();break;case 12:s=this.bT();break;case 13:s=this.cT();break;case 14:s=this.dT();break;case 15:s=this.fJ();break;case 16:s=this.eJ();break;default:throw c.i.Ra()}return!this.Jc},a.prototype.WB=function(s){this.ra=s},a.prototype.oz=function(s){return this.Fb[s]},a.prototype.Wy=function(s){return this.rd[s]},a.prototype.pl=function(s){return this.io.read(s)},a.prototype.jl=function(s){return this.ew.read(s)},a.Oz=function(s){return(1&s)==1},a.gq=function(s){return(1&s)==0},a.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var o=this.Fb[s];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},a.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var o=this.Fb[s];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.ff.mr();for(var s=0;s<this.rd.length;s++){var o=this.rd[s];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},a.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.qo=this.sd.getIterator(),this.Md=new c.ja(0)),this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var o=this.Fb[s];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),s=0;s<this.rd.length;s++)o=this.rd[s],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);for(s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.QX=function(){var s=this.Md.get(--this.qe),o=s>>1;return a.gq(s)?(this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=10,!0)},a.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},a.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.OX=function(){var s=this.Md.get(this.qe-1),o=this.Ff.get(this.Tg-1),u=this.Tr(s,!0),p=this.Tr(o,!1);return u>p?this.tx():u<p?this.dC():a.Oz(s)?this.tx():a.Oz(o)?this.dC():this.tx()},a.prototype.tx=function(){var s=this.Md.get(--this.qe),o=s>>1;if(a.gq(s))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(s=this.Bd.sc(this.Df);s!=-1;){var u=this.Bd.getData(s);this.ff.xj(u),this.Jj.set(u,-1),u=this.Bd.lb(s),this.Bd.kd(this.Df,s),s=u}return 0<this.ff.size()?(this.qw.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new c.lp),this.Kj=new c.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.dC=function(){var s=this.Ff.get(--this.Tg),o=s>>1;if(a.gq(s))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(s=this.Bd.sc(this.Ef);s!=-1;){var u=this.Bd.getData(s);this.sd.xj(u),this.Kj.set(u,-1),u=this.Bd.lb(s),this.Bd.kd(this.Ef,s),s=u}return 0<this.sd.size()?(this.qo.zB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new c.lp),this.Jj=new c.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=4,!0},a.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var s=this.Ff.get(this.Tg)>>1;return this.ff.xj(s),this.Yb=7,!0},a.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=7,!0},a.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var s=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},a.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var s=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},a.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(s,o,u){this.Cm==null&&(this.Cm=new c.Zt),u=new h(this,u),this.Cm.sort(s,0,o,u)},a.prototype.FX=function(s,o,u,p){var f=this;s.Wd(o,u,function(m,b){var _=f.Tr(m,p),M=f.Tr(b,p);return _<M||_==M&&a.gq(m)&&a.Oz(b)?-1:1})},a.prototype.Tr=function(s,o){var u=.5*this.ra;return o?(o=this.Fb[s>>1],a.gq(s)?o.G-u:o.H+u):(o=this.rd[s>>1],a.gq(s)?o.G-u:o.H+u)},a}(),c.sC=C}(H||(H={})),function(c){var C=function(){function w(){}return w.construct=function(h,a,s,o,u,p){var f=new w;return f.v=h,f.G=a,f.Xe=s,f.C=o,f.H=u,f.Dg=p,f},w.prototype.Pa=function(){this.Xe=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.SS=function(){return isNaN(this.Xe)},w.prototype.L=function(h,a,s,o,u,p){o!==void 0?typeof h=="number"?(this.v=h,this.G=a,this.Xe=s,this.C=o,this.H=u,this.Dg=p):(this.v=h.x-.5*a,this.C=this.v+a,this.G=h.y-.5*s,this.H=this.G+s,this.Xe=h.z-.5*o,this.Dg=this.Xe+o):(this.v=h,this.G=a,this.Xe=s,this.C=h,this.H=a,this.Dg=s)},w.prototype.move=function(h){this.v+=h.x,this.G+=h.y,this.Xe+=h.z,this.C+=h.x,this.H+=h.y,this.Dg+=h.z},w.prototype.copyTo=function(h){h.v=this.v,h.G=this.G,h.C=this.C,h.H=this.H},w.prototype.Nk=function(h,a,s){this.v>h?this.v=h:this.C<h&&(this.C=h),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>s?this.Xe=s:this.Dg<s&&(this.Dg=s):this.Dg=this.Xe=s},w.prototype.$b=function(h,a,s){if(typeof h=="number")this.B()?(this.v=h,this.G=a,this.Xe=s,this.C=h,this.H=a,this.Dg=s):this.Nk(h,a,s);else if(h instanceof c.Od)this.$b(h.x,h.y,h.z);else{if(!(h instanceof w))throw c.i.O();h.B()||(this.$b(h.v,h.G,h.Xe),this.$b(h.C,h.H,h.Dg))}},w.prototype.construct=function(h,a,s){h.B()||a.B()?this.Pa():(this.v=h.pa,this.C=h.wa,this.G=a.pa,this.H=a.wa,this.Xe=s.pa,this.Dg=s.wa)},w.prototype.iB=function(h){if(h==null||8>h.length)throw c.i.O();h[0]=new c.Od(this.v,this.G,this.Xe),h[1]=new c.Od(this.v,this.H,this.Xe),h[2]=new c.Od(this.C,this.H,this.Xe),h[3]=new c.Od(this.C,this.G,this.Xe),h[4]=new c.Od(this.v,this.G,this.Dg),h[5]=new c.Od(this.v,this.H,this.Dg),h[6]=new c.Od(this.C,this.H,this.Dg),h[7]=new c.Od(this.C,this.G,this.Dg)},w.prototype.bx=function(h){if(h==null||h.length==0)this.Pa();else{var a=h[0];for(this.L(a.x,a.y,a.z),a=1;a<h.length;a++){var s=h[a];this.Nk(s.x,s.y,s.z)}}},w}();c.JK=C}(H||(H={})),function(c){(function(C){C.Ra=function(){var w=Error();return w.message="Internal Error",w},C.Fe=function(){var w=Error();return w.message="Not Implemented",w},C.Zk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},C.Hb=function(){var w=Error();return w.message="Invalid Call",w},C.O=function(w){var h=Error();return h.message="Illegal Argument Exception",w!==void 0&&(h.message+=": "+w),h},C.hu=function(w){var h=Error();return h.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",h},C.ga=function(w){var h=Error();return h.message="Geometry Exception: "+w,h},C.BK=function(){var w=Error();return w.message="Assert Failed Exception",w},C.de=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},C.RC=function(){var w=Error();return w.message="UserCancelException",w}})(c.i||(c.i={}))}(H||(H={})),function(c){(c=c.dm||(c.dm={}))[c.forward=0]="forward",c[c.reverse=1]="reverse"}(H||(H={})),function(c){var C=function(){function a(s,o){this.Xa=s,this.AH=o,this.GH=-1,this.ul=!1}return a.prototype.re=function(){},a.prototype.next=function(){if(++this.GH==this.AH.I())return null;var s=this.AH.Oa(this.GH);s.scale(this.Xa.fc);var o=new c.Ea;return this.Xa.ny(s,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),w=function(){function a(s,o,u){this.Xa=s,this.tw=o,this.Zn=!1,this.fo=u,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new c.Ea,this.wk=[]}return a.prototype.re=function(){},a.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var s=c.ba.kg(this.sq);return c.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}s=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var o=this.wk.length=0,u=new c.h,p=new c.h,f=[0];this.td.Ia()&&8>this.AA;){var m=this.td.ia();if(u.N(m.bc()),p.N(m.xc()),u.scale(this.Xa.fc),p.scale(this.Xa.fc),c.ej.Ou(u,p)?u.x=p.x:c.ej.Mu(u,p)&&(p.x=u.x),this.wk.length=0,c.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,u,p,this.Xa.LA,this.Xa.at,f,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(m=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,m,m.length-1)),c.ej.Nu(u,p)?(this.sq.Pa(),this.Xa.ny(u,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(f[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}s==null&&(s=new c.Ea).$k(null,0),this.JD(s),o++}if(this.dw[0]=0,0<o){for(f=this.td.xb();0<o;)this.td.ni(),u.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.kk())),u.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(c.ej.Ou(u,p)?u.x=p.x:c.ej.Mu(u,p)&&(p.x=u.x)),this.wk.length=0,c.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,u,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(s),o--;return u.N(this.tw.Oa(this.td.xb())),u.scale(this.Xa.fc),h.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,u,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.td.Wb(f),this.td.ia(),o=c.ua.mj(null,s,!0),c.Hg.Ok(s,o,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),s=c.ba.kg(this.sq),c.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.JD=function(s){var o=this.wk[0],u=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var f=this.fi+1.570796326794897;u=f+3.141592653589793-(this.fi-this.Pj[0])}else u=(f=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var m=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),b=!1;if(Math.abs(u-f)<=.5*this.Xa.co)if(m){var _=s.Oa(s.I()-2);_.scale(this.Xa.fc);var M=new c.ha(0);for(c.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,_.x,_.y,M),_=M.u;_<=f;)_+=6.283185307179586;for(;_>f;)_-=6.283185307179586;_<u&&(b=!0)}else b=!0;b?(s.yB(0,s.I()-1),this.ul||((o=new c.h).N(s.Oa(s.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<o.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),m||(u=.5*(u+f))):(m?((f=new c.h).N(o),f.scale(1/this.Xa.fc),s.xf(0,-1,f)):h.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],f,u,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.AA+=1)}h.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,u,p,this.ul,this.uk,s),this.fi=this.Is[0]},a.prototype.sy=function(s,o){return this.Xa.sy(this.wk,s,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),h=function(){function a(){}return a.buffer=function(s,o,u,p,f,m){if(s==null)throw c.i.O("Geometry::Geodesic_bufferer::buffer");if(s.B())return new c.Ea(s.description);var b=new a;b.Sg=o,b.Kc=c.cb.tc(o);var _=c.cb.xv(b.Kc);if(b.Vb=m,b.Ub=c.cb.gv(b.Kc),b.lc=_*(2-_),b.fc=b.Kc.Id().ci,b.ra=b.Sg.Mn(),b.Cq=b.Kc.Mn(),b.at=b.Cq*b.fc,b.Bq=1.570796326794897/b.fc,b.KY=3.141592653589793/b.fc,b.Ls=6.283185307179586/b.fc,b.LY=b.Ls/6,b.GA=0,b.JY=1.5707963267948966*b.Ub/b.GA,u==4?(b.Ae=2,b.Yv=!0):(b.Ae=u,b.Yv=!1),b.La=p,b.sb=Math.abs(p),isNaN(f)||.001>f?b.tX():b.bo=f,u=s.K(),c.ba.zd(u)?((u=new c.Ua(s.description)).pc(s,!0),s=u,u=1607):u==197&&(u=new c.l,s.A(u),u.S()<=b.ra||u.da()<=b.ra?((u=new c.Ua(s.description)).bd(s,!1),s=u,u=1607):((u=new c.Ea(s.description)).bd(s,!1),s=u,u=1736)),b.uX(),c.ba.Tn(u)||b.vX(),b.sb<=.5*b.bo)return u!=1736?new c.Ea(s.description):b.Yv?s:c.ej.Sr(s,b.Sg,b.Ae,b.LA,-1,m);if(0>b.La&&u!=1736)return new c.Ea(s.description);if(b.Yv&&c.ba.Ic(u)?(o=c.ej.Sr(s,o,4,NaN,b.bo,m),s=c.cb.Bh(o,b.Sg,b.Kc)):s=c.cb.Bh(s,b.Sg,b.Kc),(s=c.Jh.nj(s,b.Kc)).B())return new c.Ea(s.description);switch(!b.Yv&&c.ba.Ic(u)&&(s=c.ej.kI(b.fc,s)),s=a.GX(s,b.Kc),u){case 1736:o=b.PN(s);break;case 1607:o=b.QN(s);break;case 550:o=b.NN(s);break;case 33:o=b.ON(s);break;default:throw c.i.ga("corrupted_geometry")}return(b=c.cb.Bh(o,b.Kc,b.Sg)).Ll(s.description),b},a.prototype.PN=function(s){var o=new c.Ea;s=new w(this,s,o),s=c.Ih.local().W(s,this.Kc,this.Vb).next(),s=c.kp.pj(s,this.Kc,2);var u=new c.Ed;return u.scale(1/this.fc,1/this.fc),o.Pc(u),o=c.kp.pj(o,this.Kc,2),0<=this.La?c.Ih.local().W(o,s,this.Kc,this.Vb):c.mp.local().W(o,s,this.Kc,this.Vb)},a.prototype.QN=function(s){return s=new w(this,s,null),s=c.Ih.local().W(s,this.Kc,this.Vb).next(),c.kp.pj(s,this.Kc,2)},a.prototype.NN=function(s){return s=new C(this,s),s=c.Ih.local().W(s,this.Kc,this.Vb).next(),c.kp.pj(s,this.Kc,2)},a.prototype.ON=function(s){(s=s.D()).scale(this.fc);var o=new c.Ea;return this.ny(s,!1,o),c.kp.pj(o,this.Kc,2)},a.prototype.sy=function(s,o,u,p,f,m){var b=s[0],_=s[s.length-1],M=b.y>_.y?b.y:_.y,T=c.F.q(this.Ub,this.lc,b.y<_.y?b.y:_.y);if(M=c.F.q(this.Ub,this.lc,M),.001<this.GA-(T+o+this.sb)&&.001<this.GA+(M-o-this.sb))return!1;T=(o=u-1.570796326794897)-3.141592653589793,M=o+3.141592653589793;var A=(u=p+1.570796326794897)+3.141592653589793,O=[NaN],R=[NaN],j=[NaN],z=[NaN];if(p=!1,a.ZI(this.Ub,this.lc,this.sb,b,o,T,_,u,O,R),a.ZI(this.Ub,this.lc,this.sb,_,A,u,b,T,j,z),(u<O[0]&&O[0]<A||u<R[0]&&R[0]<A)&&(p=!0),p||(T<j[0]&&j[0]<o||T<z[0]&&z[0]<o)&&(p=!0),!p&&f)return!1;for(var V=[],F=s.length-1;0<=F;F--)V.push(s[F]);return m.Pa(),m.$k(null,0),F=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,s,o,u,f,F,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,_,u,A,this.co,f,F,m,O[0],R[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,V,A,M,f,F,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,b,T,o,this.co,f,F,m,j[0],z[0]),s=!1,f||(s=this.DE(this.fc,m)),p||s},a.prototype.ny=function(s,o,u){u.Pa(),u.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,s,-this.co,6.283185307179586,this.co,o,[0],u,NaN,NaN),o||this.DE(this.fc,u)},a.prototype.DE=function(s,o){var u=this.qO(s,o);return s=this.rO(s,o),u||s},a.prototype.qO=function(s,o){var u=o.I(),p=!1,f=new c.l;if(o.A(f),!c.s.$(f.H*s,1.570796326794897)&&!c.s.$(f.G*s,-1.570796326794897))return!1;var m=new c.h;for(--u;0<=u;u--)o.D(u,m),(m.y==f.H&&c.s.$(m.y*s,1.570796326794897)||m.y==f.G&&c.s.$(m.y*s,-1.570796326794897))&&(p=!0,this.JI(m,u,o));return p},a.prototype.rO=function(s,o){var u=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(u.x-p.x)*s?(this.QV(o),!0):this.pO(o)},a.prototype.pO=function(s){return 0>s.He()&&(this.PV(s),!0)},a.prototype.JI=function(s,o,u){var p=u.I(),f=0<o?o-1:p-1;if(p=u.Oa(o<p-1?o+1:0),f=u.Oa(f),!c.s.$(p.y,s.y)&&!c.s.$(p.x,s.x)){var m=new c.h;m.na(p.x,s.y),u.Db(o,m)}c.s.$(f.y,s.y)||c.s.$(f.x,s.x)||((p=new c.h).na(f.x,s.y),u.xf(0,o,p))},a.prototype.QV=function(s){var o=new c.Ea,u=new c.Ea,p=new c.Ed,f=s.Oa(0),m=s.Oa(s.I()-1),b=new c.h;f.x>m.x?(m=this.Bq,p.ig(-this.Ls,0)):(m=-this.Bq,p.ig(this.Ls,0)),o.add(s,!1),s.Pa(),u.add(o,!1),u.Pc(p),f=new c.l,u.A(f),f.X((this.Ls-f.S())/2,0),f.G=-this.Bq,f.H=this.Bq;for(var _=0;_<u.I();_++)u.D(_,b),o.xf(0,-1,b);for(u.Pc(p),_=0;_<u.I();_++)u.D(_,b),o.xf(0,-1,b);u=o.Oa(0),p=o.Oa(o.I()-1),b.na(p.x,m),o.xf(0,-1,b),b.na(.5*(p.x+u.x),m),o.xf(0,-1,b),b.na(u.x,m),o.xf(0,-1,b),o=c.Jh.ms(o,this.Kc,2,!0,f.v),o=c.Jh.ms(o,this.Kc,2,!0,f.C),o=c.Vd.clip(o,f,this.Cq,NaN),s.add(o,!1)},a.prototype.PV=function(s){var o=new c.l;s.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,s.$k(null,0);var u=new c.h;u.na(o.v,o.G),s.xf(1,-1,u),u.na(o.v,o.H),s.xf(1,-1,u),u.na(.5*(o.v+o.C),o.H),s.xf(1,-1,u),u.na(o.C,o.H),s.xf(1,-1,u),u.na(o.C,o.G),s.xf(1,-1,u),u.na(.5*(o.v+o.C),o.G),s.xf(1,-1,u)},a.my=function(s,o,u,p,f,m,b,_,M,T,A){var O=null;M||((O=new c.h).Sc(),0<A.I()&&(O.N(A.Oa(A.I()-1)),O.scale(u)));var R=new c.ha(0),j=new c.ha(0),z=new c.ha(0),V=new c.h,F=new c.h,G=m[m.length-1];u=1/u;for(var Z=0;Z<m.length;Z++){var K=m[Z];if(Z==0)var re=b;else Z==m.length-1?re=_:(c.kb.xd(s,o,G.x,G.y,K.x,K.y,null,null,R,f),re=R.u-1.570796326794897);c.kb.Ai(s,o,K.x,K.y,p,re,j,z),M?F.na(j.u,z.u):(V.na(j.u,z.u),a.bJ(K.x,V.x,O.x,T),F.na(T[0]+V.x,V.y),O.N(F)),F.scale(u),A.xf(0,-1,F)}},a.Jr=function(s,o,u,p,f,m,b,_,M,T,A,O,R){if(!(b-m<_)){var j=new c.ha(0),z=new c.ha(0),V=new c.h,F=new c.h,G=null;M||((G=new c.h).Sc(),0<A.I()&&(G.N(A.Oa(A.I()-1)),G.scale(u)));var Z=c.P.truncate(Math.ceil(m/_)),K=Z++*_;for(K==m&&(K=Z++*_),u=1/u;K<b+_&&(m<O&&O<K?(K=O,Z--):m<R&&R<K&&(K=R,Z--),!(K>=b));)c.kb.Ai(s,o,f.x,f.y,p,K,j,z),M?F.na(j.u,z.u):(V.na(j.u,z.u),a.bJ(f.x,V.x,G.x,T),F.na(T[0]+V.x,V.y),G.N(F)),F.scale(u),A.xf(0,-1,F),m=K,K=Z++*_}},a.ZI=function(s,o,u,p,f,m,b,_,M,T){var A=new c.h,O=new c.h,R=new c.ha(0),j=new c.ha(0);for(c.kb.Ai(s,o,p.x,p.y,u,f,R,j),A.na(R.u,j.u),c.kb.Ai(s,o,p.x,p.y,u,m,R,j),O.na(R.u,j.u),u=new c.ha(0),c.kb.Sy(s,o,b.x,b.y,A.x,A.y,u),M[0]=u.u,c.kb.Sy(s,o,b.x,b.y,O.x,O.y,u),T[0]=u.u;M[0]<=T[0];)M[0]+=6.283185307179586;for(;M[0]>T[0];)M[0]-=6.283185307179586;for(;M[0]>=_;)M[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;M[0]<_;)M[0]+=6.283185307179586,T[0]+=6.283185307179586},a.bJ=function(s,o,u,p){if(isNaN(u)){for(;3.141592653589793<p[0]+o-s;)p[0]-=6.283185307179586;for(;3.141592653589793<s-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-u?p[0]-=6.283185307179586:3.141592653589793<u-(p[0]+o)&&(p[0]+=6.283185307179586)},a.GX=function(s,o){var u=s.K(),p=c.ba.Ic(u)?s.ea():u==550?s.I():1;if(p==1)return s;var f=new c.ja(0);f.resize(p);for(var m=[],b=new c.l,_=0;_<p;_++){if(f.write(_,_),c.ba.Ic(u)){s.Tj(_,b);var M=b.tf()}else M=s.Oa(_);M=c.SK.WX(o,M),m[_]=M}for(f.Wd(0,f.size,function(T,A){return m[T]<m[A]?-1:m[T]>m[A]?1:0}),o=s.Ja(),_=0;_<p;_++)b=f.read(_),c.ba.Ic(u)?o.addPath(s,b,!0):o.Gd(s,b,b+1);return o},a.prototype.uX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var o=new c.h;o.na(0,10*this.fc);var u=45*this.fc,p=new c.ha(0),f=new c.ha(0),m=new c.ha(0),b=new c.ha(0),_=new c.ha(0),M=new c.ha(0),T=new c.ha(0),A=new c.ha(0),O=new c.h,R=new c.h,j=new c.h,z=new c.h;c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,0,p,f),O.na(p.u,f.u),c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,u,m,b),R.na(m.u,b.u),p=new c.ha(0),f=new c.ha(0);for(var V=new c.ha(0);c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,.5*(0+u),_,M),j.na(_.u,M.u),c.kb.xd(this.Ub,this.lc,O.x,O.y,R.x,R.y,p,f,null,2),c.kb.qj(this.Ub,this.lc,O.x,O.y,.5*p.u,f.u,T,A,2),z.na(T.u,A.u),c.kb.xd(this.Ub,this.lc,j.x,j.y,z.x,z.y,V,null,null,2),!(V.u<=this.bo);)u*=.9,c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,u,m,b),R.na(m.u,b.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(u-0))},a.prototype.vX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var o=new c.h,u=new c.h;o.na(0,10*this.fc),u.na(10*this.fc,10*this.fc);var p=new c.ha(0),f=new c.ha(0),m=new c.ha(0);c.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,m,p,f,this.Ae);var b=new c.ha(0),_=new c.ha(0),M=new c.ha(0),T=new c.ha(0),A=new c.h,O=new c.ha(0),R=new c.ha(0),j=new c.ha(0),z=new c.ha(0),V=new c.ha(0),F=new c.ha(0),G=new c.ha(0),Z=new c.ha(0),K=new c.ha(0),re=new c.h,te=new c.h,he=new c.h,ye=new c.h,pe=1;p=p.u,f=f.u+1.570796326794897,m=m.u,c.kb.Ai(this.Ub,this.lc,o.x,o.y,s,p-1.570796326794897,R,j),re.na(R.u,j.u),c.kb.Ai(this.Ub,this.lc,u.x,u.y,s,f,z,V),te.na(z.u,V.u),R=new c.ha(0),j=new c.ha(0),f=new c.ha(0);for(var De=new c.ha(0);c.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+pe)*m,p,b,_,this.Ae),A.na(b.u,_.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,A.x,A.y,null,null,O,this.Ae),c.kb.Ai(this.Ub,this.lc,A.x,A.y,s,O.u+1.570796326794897,F,G),he.na(F.u,G.u),c.kb.xd(this.Ub,this.lc,re.x,re.y,te.x,te.y,R,j,null,2),c.kb.qj(this.Ub,this.lc,re.x,re.y,.5*R.u,j.u,Z,K,2),ye.na(Z.u,K.u),c.kb.xd(this.Ub,this.lc,he.x,he.y,ye.x,ye.y,f,null,null,2),!(f.u<=this.bo);)pe*=.9,c.kb.qj(this.Ub,this.lc,o.x,o.y,pe*m,p,M,T,this.Ae),u.na(M.u,T.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,null,null,De,this.Ae),c.kb.Ai(this.Ub,this.lc,u.x,u.y,s,De.u+1.570796326794897,z,V),te.na(z.u,V.u);1e5<(s=pe*m)&&(s=1e5),this.LA=s},a.prototype.tX=function(){var s=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/s&&(s=this.sb/500),.01>s&&(s=.01),this.bo=s},a}();c.QK=h}(H||(H={})),function(c){var C=function(){function w(){}return w.Of=function(h,a){var s=new c.h;s.N(a),h.push(s)},w.wp=function(h,a){h.add(a.x),h.add(a.y)},w.cB=function(h){h.Dh(h.size-2)},w.jB=function(h,a){a.na(h.get(h.size-2),h.get(h.size-1))},w.Sr=function(h,a,s,o,u,p){if(h==null)throw c.i.O();var f=h.K();if(h.B()||c.ba.Tn(f))return h;var m=new w;m.Sg=a,m.Kc=c.cb.tc(a);var b=c.cb.xv(m.Kc);if(m.Vb=p,m.Ub=c.cb.gv(m.Kc),m.lc=b*(2-b),m.fc=m.Kc.Id().ci,m.Cq=m.Kc.Mn(),m.at=m.Cq*m.fc,m.vA=o,m.uA=u,m.Ae=s,f==197?(s=new c.Ea(h.description)).bd(h,!1):c.ba.zd(f)?(s=new c.Ua(h.description)).pc(h,!0):s=h,m.Ae!=4){if((a=m.Sg.Nb(m.Kc)==0?c.cb.Bh(s,m.Sg,m.Kc):c.Jh.nj(s,m.Kc)).B())return a;a=w.kI(m.fc,a),a=m.Uy(a),a=c.kp.pj(a,m.Kc,m.Ae),m=c.cb.Bh(a,m.Kc,m.Sg)}else{if(c.Gg.Tb(a)==2?(h=c.cb.ol(),(a=c.Zj.local().W(s,h,a,p))==h&&(a=new c.Ea,h.copyTo(a))):a=c.Jh.nj(s,m.Kc),a.B())return a;m=m.yX(a)}return m},w.kI=function(h,a){var s=new c.l;if(a.yc(s),3.141592653589793>s.S()*h)return a;var o=!1;s=a.Ha();for(var u=new c.h,p=new c.h;s.ab();)for(;s.Ia();){var f=s.ia();if(u.N(f.bc()),p.N(f.xc()),u.scale(h),p.scale(h),3.141592653589793<Math.abs(u.x-p.x)){var m=w.Nu(u,p);if(!m){o=!0;break}if(6.283185307179586<Math.abs(u.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var b=1<a.description.Ba,_=new c.h,M=new c.h,T=new c.h,A=new c.h,O=new c.Ta;for(s.aj();s.ab();)for(var R=NaN,j=[0];s.Ia();){if(f=s.ia(),u.N(f.bc()),p.N(f.xc()),u.scale(h),p.scale(h),isNaN(R)?(w.Yi(u.x,NaN,j),M.N(u)):M.N(T),R=M.x,m=w.Nu(u,p)){if(6.283185307179586<p.x-u.x)for(;6.283185307179586<p.x-u.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-u.x)for(;-6.283185307179586>p.x-u.x;)p.x+=6.283185307179586;w.Yi(p.x,NaN,j),T.N(p)}else _.N(p),w.vU(_),w.Yi(_.x,R,j),T.na(j[0]+_.x,_.y);.5>Math.abs(T.x-p.x)&&T.N(p),b?(f.Vw(0,O),A.N(M),A.scale(1/h),O.Db(A),(m=s.xm())?o.nf(O):o.lineTo(O),s.Sn()&&!a.ec(s.gb)&&(f.Vw(1,O),A.N(T),A.scale(1/h),O.Db(A),o.lineTo(O))):((m=s.xm())&&o.Cz(null,0),f=o.ea()-1,A.N(M),A.scale(1/h),o.xf(f,-1,A),s.Sn()&&!a.ec(s.gb)&&(A.N(T),A.scale(1/h),o.xf(f,-1,A)))}return o},w.oF=function(h,a,s,o,u,p,f,m,b,_,M,T){var A=new c.h,O=new c.h,R=0<o.compare(u);w.aJ(R,o,u,A,O),w.pF(h,a,s,A,O,p,NaN,f,m,b,_,null,M,T),R&&w.aC(b,_,null,M)},w.prototype.Uy=function(h){var a=h.Ja(),s=h.Ha(),o=[],u=null,p=null,f=1<h.description.Ba;f&&(u=new c.ce(0),p=new c.jg);for(var m=[0],b=new c.h,_=new c.h,M=new c.h,T=new c.h;s.ab();)for(m[0]=0;s.Ia();){var A=s.ia();b.N(A.bc()),_.N(A.xc()),b.scale(this.fc),_.scale(this.fc);var O=0<b.compare(_);w.aJ(O,b,_,M,T),o.length=0,u!=null&&u.Dh(0),0<this.vA?w.pF(this.Ub,this.lc,this.Ae,M,T,this.vA,this.uA,this.at,null,null,null,f?u:null,o,m):w.WQ(this.Ub,this.lc,this.Ae,M,T,this.uA,this.at,f?u:null,o,m),O&&w.aC(null,null,f?u:null,o),o[0].N(A.bc()),o[o.length-1].N(A.xc());for(var R=1;R<o.length-1;R++)o[R].scale(1/this.fc);f?(O=w.$I(O,A,p),w.OD(s.xm(),s.Sn()&&!h.ec(s.gb),A,O,u,o,a)):w.ND(s.xm(),s.Sn()&&!h.ec(s.gb),o,a)}return a},w.prototype.yX=function(h){var a=h.Ja(),s=h.Ha(),o=[],u=null,p=new c.jg,f=1<h.description.Ba;for(f&&(u=new c.ce(0));s.ab();)for(;s.Ia();){var m=s.ia(),b=m.bc(),_=m.xc();b=0<b.compare(_),_=w.$I(b,m,p),o.length=0,u!=null&&u.Dh(0),w.xX(this.Ub,this.lc,this.fc,_,this.Sg,this.vA,this.uA,f?u:null,o),b&&w.aC(null,null,f?u:null,o),f?w.OD(s.xm(),s.Sn()&&!h.ec(s.gb),m,_,u,o,a):w.ND(s.xm(),s.Sn()&&!h.ec(s.gb),o,a)}return a},w.ND=function(h,a,s,o){h&&o.Cz(null,0),h=o.ea()-1;var u=s.slice(0);o.lG(h,u,u.length-1),a&&o.xf(h,-1,s[s.length-1])},w.OD=function(h,a,s,o,u,p,f){var m=new c.Ta;if(s.Vo(m),h?f.nf(m):f.lineTo(m),2<p.length){h=o.Rb();for(var b=1;b<p.length-1;b++){var _=o.IG(u.get(b)*h);o.Vw(_,m),m.Db(p[b]),f.lineTo(m)}}a&&(s.Ro(m),f.lineTo(m))},w.pF=function(h,a,s,o,u,p,f,m,b,_,M,T,A,O){var R=new c.ha(0),j=new c.ha(0),z=new c.ha(0);c.kb.xd(h,a,o.x,o.y,u.x,u.y,z,R,j,s),z=z.u;var V=R=R.u;0>V&&(V+=6.283185307179586),0>(j=j.u)&&(j+=6.283185307179586),b!=null&&(b[0]=z),_!=null&&(_[0]=V),M!=null&&(M[0]=j),_=b=NaN,T!=null&&(b=((_=c.F.Ch(h,a))-(M=c.F.q(h,a,o.y)))/z,_=(_+M)/z),M=w.Ou(o,u),j=w.Mu(o,u),V=M||j;var F=w.AE(o,u,m),G=new c.ha(0),Z=new c.ha(0),K=new c.h,re=new c.h,te=new c.h;w.Yi(o.x,NaN,O);var he=[O[0]];if(z<=p)w.Of(A,o),w.Yi(u.x,NaN,O),T!=null&&T.add(0),V?(M&&w.fB(o,u,T,A),j&&w.dB(o,u,T,A)):F?w.eB(o,u,R,b,_,T,A):0<f&&(re.na(o.x-he[0],o.y),K.na(u.x-O[0],u.y),w.Ty(h,a,s,o,z,R,re,K,0,1,f,T,A,he)),w.Of(A,u);else{var ye=z/((p=1+c.P.truncate(Math.ceil(z/p)))-1),pe=new c.h,De=0;w.Of(A,o),pe.N(o),re.na(o.x-O[0],o.y),T!=null&&T.add(0);for(var Se=1;Se<p;Se++){if(Se<p-1){c.kb.qj(h,a,o.x,o.y,Se*ye,R,G,Z,s),K.na(G.u,Z.u),w.Yi(K.x,pe.x,O),te.na(O[0]+K.x,K.y);var Qe=Se/(p-1)}else w.Yi(u.x,NaN,O),K.na(u.x-O[0],u.y),te.N(u),Qe=1;V?(Se==1&&M&&w.fB(o,te,T,A),Se==p-1&&j&&w.dB(pe,u,T,A)):F?w.zE(pe,te,m)&&(o.x<u.x?pe.x>te.x&&(O[0]+=6.283185307179586,te.na(O[0]+K.x,K.y)):pe.x<te.x&&(O[0]-=6.283185307179586,te.na(O[0]+K.x,K.y)),w.eB(pe,te,R,b,_,T,A)):0<f&&w.Ty(h,a,s,o,z,R,re,K,De,Qe,f,T,A,he),w.Of(A,te),T!=null&&T.add(Qe),pe.N(te),re.N(K),he[0]=O[0],De=Qe}}},w.WQ=function(h,a,s,o,u,p,f,m,b,_){var M=new c.ha(0),T=new c.ha(0),A=new c.ha(0);c.kb.xd(h,a,o.x,o.y,u.x,u.y,A,M,T,s),T=A.u,M=M.u;var O=A=NaN;if(m!=null){O=c.F.Ch(h,a);var R=c.F.q(h,a,o.y);A=(O-R)/T,O=(O+R)/T}R=w.Ou(o,u);var j=w.Mu(o,u),z=R||j;f=w.AE(o,u,f);var V=w.Nu(o,u);V=z||f||V,w.Yi(o.x,NaN,_);var F=new c.h;w.Of(b,o),F.N(o),m!=null&&m.add(0),V?(z?(R&&w.fB(o,u,m,b),j&&w.dB(o,u,m,b)):f&&w.eB(o,u,M,A,O,m,b),w.Yi(u.x,NaN,_),w.Of(b,u)):T<=p?(w.Yi(u.x,NaN,_),w.Of(b,u)):(A=new c.h,f=new c.h,A.N(o),f.N(u),A.x-=_[0],f.x-=_[0],-3.141592653589793>f.x?f.x+=6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),w.Ty(h,a,s,o,T,M,A,f,0,1,p,m,b,_),w.Of(b,u),w.Yi(u.x,NaN,_)),m!=null&&m.add(1)},w.Ty=function(h,a,s,o,u,p,f,m,b,_,M,T,A,O){var R=new c.h,j=new c.h;R.na(f.x+O[0],f.y),new c.ha(0),new c.ha(0),new c.ha(0),new c.ha(0);var z=new c.ha(0),V=new c.ha(0),F=new c.ha(0),G=new c.h,Z=new c.h,K=new c.h,re=new c.h;G.N(f),Z.N(m),f=new c.ce(0),m=new c.ce(0),w.wp(f,Z),m.add(_);var te=new c.h,he=new c.zb,ye=[];for(w.TJ(4,ye);0<f.size;){for(var pe,De=!1,Se=NaN,Qe=0;3>Qe;Qe++)if(pe=ye[Qe]*_+(1-ye[Qe])*b,c.kb.qj(h,a,o.x,o.y,pe*u,p,z,V,s),K.na(z.u,V.u),Qe==0&&(Se=pe,re.N(K)),w.RW(G,K,Z,he),he.ic(he.ge(K,!0),te),c.kb.xd(h,a,K.x,K.y,te.x,te.y,F,null,null,2),F.u>M){De=!0;break}De?(Z.N(re),_=Se,w.wp(f,Z),m.add(_)):(w.cB(f),m.Gn(m.size-1,1,m.size-1),0<f.size&&(w.Yi(Z.x,R.x,O),j.na(O[0]+Z.x,Z.y),w.Of(A,j),R.N(j),T!=null&&T.add(_),G.N(Z),b=_,w.jB(f,Z),_=m.get(m.size-1)))}},w.xX=function(h,a,s,o,u,p,f,m,b){var _=new c.h,M=new c.h,T=new c.h,A=new c.h,O=new c.h,R=new c.h,j=new c.h,z=new c.h,V=new c.h,F=new c.h,G=new c.ha(0),Z=new c.ha(0),K=new c.h,re=[[],[]],te=c.Gg.Tb(u)==1;u=u.Yd(0);var he=o.bc(),ye=o.xc();te?(R.na(he.x*s,he.y*s),j.na(ye.x*s,ye.y*s)):(re[0][0]=he.x,re[0][1]=he.y,re[1][0]=ye.x,re[1][1]=ye.y,c.cb.wt(),R.x=re[0][0]*s,R.y=re[0][1]*s,j.x=re[1][0]*s,j.y=re[1][1]*s);var pe=0,De=0,Se=1,Qe=o.Rn();_.N(he),M.N(ye),ye=new c.ce(0);var We=new c.ce(0),Ce=new c.ce(0);w.wp(ye,M),w.wp(We,j),Ce.add(Se),w.Of(b,_),m!=null&&m.add(De);var Zt=[],ji=0<f?Qe?5:3:Qe?5:1;w.TJ(ji,Zt);for(var Qt=new c.ha(0),Tt=new c.ha(0),It=new c.ha(0),pt=new c.ha(0),ai=new c.ha(0),dt=new c.ha(0),qs=new c.ha(0);0<We.size;){var bt=!1,Rr=NaN;for(c.kb.xd(h,a,R.x,R.y,j.x,j.y,Qt,Tt,null,2),he=0;he<ji&&!(he==0&&(!Qe&&0>=f&&Qt.u<=p&&3.141592653589793>Math.abs(R.x-j.x)||o.Tx(De,Se)<=u));he++){var Rt=Zt[he]*Se+(1-Zt[he])*De;if(o.ic(Rt,T),te?z.na(T.x*s,T.y*s):(re[0][0]=T.x,re[0][1]=T.y,c.cb.wt(),z.x=re[0][0]*s,z.y=re[0][1]*s),he==0&&(Rr=Rt,O.N(T),F.N(z),0<p&&(Qt.u>p||3.141592653589793<=Math.abs(R.x-j.x)))){bt=!0;break}if(Qe&&0<p){if(c.kb.xd(h,a,R.x,R.y,z.x,z.y,It,null,null,2),It.u>p||3.141592653589793<=Math.abs(R.x-z.x)){bt=!0;break}}else if(0<f){if(Qe?(A.IS(_,M,Zt[he]),te?V.na(A.x*s,A.y*s):(re[0][0]=A.x,re[0][1]=A.y,c.cb.wt(),V.x=re[0][0]*s,V.y=re[0][1]*s)):(A.N(T),V.N(z)),c.kb.xd(h,a,R.x,R.y,V.x,V.y,pt,null,null,2),!(pt.u<=Qt.u)){bt=!0;break}if(c.kb.qj(h,a,R.x,R.y,pt.u,Tt.u,G,Z,2),K.na(G.u,Z.u),c.kb.xd(h,a,K.x,K.y,z.x,z.y,ai,null,null,2),ai.u>f){bt=!0;break}if(Qe){if(c.kb.xd(h,a,K.x,K.y,V.x,V.y,dt,null,null,2),dt.u>f){bt=!0;break}if(c.kb.xd(h,a,V.x,V.y,z.x,z.y,qs,null,null,2),qs.u>f){bt=!0;break}}}}bt?(M.N(O),j.N(F),Se=Rr,w.wp(ye,M),w.wp(We,j),Ce.add(Se)):(w.cB(ye),w.cB(We),Ce.Gn(Ce.size-1,1,Ce.size-1),w.Of(b,M),pe+=Qt.u,m!=null&&m.add(pe),0<We.size&&(_.N(M),R.N(j),De=Se,w.jB(ye,M),w.jB(We,j),Se=Ce.get(Ce.size-1)))}if(m!=null)for(h=1/pe,he=0;he<m.size;he++)m.write(he,m.read(he)*h)},w.aC=function(h,a,s,o){o.reverse(),s!=null&&s.pi(0,s.size,1),s=h!=null?h[0]:NaN,o=a!=null?a[0]:NaN,h!=null&&(h[0]=o),a!=null&&(a[0]=s)},w.aJ=function(h,a,s,o,u){h?(o.N(s),u.N(a)):(o.N(a),u.N(s))},w.$I=function(h,a,s){return h?(s.create(a.K()),a.copyTo(s.get()),s.get().reverse(),s.get()):a},w.Yi=function(h,a,s){if(isNaN(a)){for(;3.141592653589793<s[0]-h;)s[0]-=6.283185307179586;for(;3.141592653589793<h-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+h-a?s[0]-=6.283185307179586:3.141592653589793<a-(s[0]+h)&&(s[0]+=6.283185307179586)},w.RW=function(h,a,s,o){3.141592653589793>Math.abs(a.x-h.x)?(o.Ec(h),3.141592653589793<=s.x-h.x?o.Sl(s.x-6.283185307179586,s.y):3.141592653589793<=h.x-s.x?o.Sl(s.x+6.283185307179586,s.y):o.Sl(s.x,s.y)):(o.Ec(s),3.141592653589793<=h.x-s.x?o.Sl(h.x-6.283185307179586,h.y):3.141592653589793<=s.x-h.x?o.Sl(h.x+6.283185307179586,h.y):o.Sl(h.x,h.y))},w.TJ=function(h,a){for(var s=0;s<h;s++){var o=Math.ceil(s/2)/(h+1);s%2!=0&&(o=-o),a[s]=.5+o}},w.Ou=function(h,a){return!!(c.s.$(h.y,1.570796326794897)&&!c.s.$(a.y,1.570796326794897)||c.s.$(h.y,-1.570796326794897)&&!c.s.$(a.y,-1.570796326794897))},w.Mu=function(h,a){return!!(c.s.$(a.y,1.570796326794897)&&!c.s.$(h.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897)&&!c.s.$(h.y,-1.570796326794897))},w.AE=function(h,a,s){return!(!w.zE(h,a,s)||c.s.$(h.y,1.570796326794897)||c.s.$(h.y,-1.570796326794897)||c.s.$(a.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897))},w.zE=function(h,a,s){return Math.abs(Math.abs(h.x-a.x)-3.141592653589793)<=s},w.Nu=function(h,a){return!!(c.s.$(h.y,1.570796326794897)&&c.s.$(a.y,1.570796326794897)||c.s.$(h.y,-1.570796326794897)&&c.s.$(a.y,-1.570796326794897))},w.fB=function(h,a,s,o){if(0<h.y){var u=new c.h;u.na(a.x,1.570796326794897)}else(u=new c.h).na(a.x,-1.570796326794897);c.s.$(h.x,u.x)||c.s.$(a.y,u.y)||(w.Of(o,u),s!=null&&s.add(0))},w.dB=function(h,a,s,o){if(0<a.y){var u=new c.h;u.na(h.x,1.570796326794897)}else(u=new c.h).na(h.x,-1.570796326794897);c.s.$(a.x,u.x)||c.s.$(h.y,u.y)||(w.Of(o,u),s!=null&&s.add(1))},w.eB=function(h,a,s,o,u,p,f){c.s.Dd(s)?(0<1.570796326794897-h.y&&((s=new c.h).na(h.x,1.570796326794897),w.Of(f,s),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((s=new c.h).na(a.x,1.570796326794897),w.Of(f,s),p!=null&&p.add(o))):(0<1.570796326794897+h.y&&((s=new c.h).na(h.x,-1.570796326794897),w.Of(f,s),p!=null&&p.add(u)),0<1.570796326794897+a.y&&((s=new c.h).na(a.x,-1.570796326794897),w.Of(f,s),p!=null&&p.add(u)))},w.vU=function(h){if(-3.141592653589793>h.x)for(;-3.141592653589793>h.x;)h.x+=6.283185307179586;if(3.141592653589793<h.x)for(;3.141592653589793<h.x;)h.x-=6.283185307179586},w}();c.ej=C}(H||(H={})),function(c){c.kp=function(){function C(){}return C.pj=function(w,h,a){if(w==null||h==null||!c.cb.Xc(h))throw c.i.O();if(w.B())return w;var s=w,o=s.K();if(c.ba.Ic(o)){s=c.Jh.nj(w,h),w=new c.l,s.A(w),o=c.ua.Xd(h,w,!1);for(var u=c.cb.ih(h),p=Math.floor((w.v-u.v)/u.S())*u.S()+u.v;p<w.C;)p>w.v+o&&p<w.C-o&&(s=c.Jh.ms(s,h,a,!0,p)),p+=u.S()}else{if(o==197)return(w=new c.Ea(s.description)).bd(s,!1),C.pj(w,h,a);if(c.ba.zd(o))return(w=new c.Ua(s.description)).pc(s,!0),C.pj(w,h,a)}return C.Py(s,h)},C.Py=function(w,h){if(w==null||h==null||!c.cb.Xc(h))throw c.i.O();if(w.B())return w;var a=w.K();return a==197?(a=new c.Ea(w.description)).bd(w,!1):c.ba.zd(a)?(a=new c.Ua(w.description)).pc(w,!0):a=w,(a=c.Jh.nj(a,h)).B()?a:c.Gg.Tb(h)==1?c.Jh.Hn(a,h,0,a!=w,0):C.IQ(a,h,a!=w)},C.IQ=function(w,h,a){if(!c.cb.Xc(h))throw c.i.O();if(w.B())return w;var s=c.cb.bf(h),o=-180*s;return s*=360,c.Gg.Tb(h)==2&&(s=(o=c.cb.ih(h)).C,s-=o=o.v),c.Jh.Jp(w,o,s,h,a,0,!0)},C}()}(H||(H={})),function(c){c.xY=function(){function C(){}return C.R=function(w){return 0>w?-w:w},C.Mb=function(w,h){return 0<=h?C.R(w):-C.R(w)},C.$=function(w,h){return w==h||C.R(w-h)<=C.EC*(1+(C.R(w)+C.R(h))/2)},C.Dd=function(w){return w==0||C.R(w)<=C.EC},C.Ch=function(w,h){var a=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h;return w/(1+h)*(1+a*(.25+a*(.015625+1/256*a)))*C.zL},C.zL=1.5707963267948966,C.EC=3552713678800501e-30,C}()}(H||(H={})),function(c){var C=function(h){this.Yf=h,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};c.zY=C;var w=function(){function h(a){a===void 0&&(a=null),this.Ej=null,this.Wn=!1,a!==null&&(this.Ej=new C(a))}return h.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},h.prototype.Qf=function(){var a=new h;return this.copyTo(a),a},h.prototype.copyTo=function(a){a.Ej=this.Ej,a.Wn=this.Wn},h.prototype.Lz=function(){this.Wn=!this.Wn},h.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},h.prototype.GJ=function(a){if(0>=a)throw c.i.O();if(a!=this.Fc()){if((a=c.qf.geogtran(a))==null)throw c.i.O("Geogtran not found.");this.Ej=new C(a)}},h.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},h.prototype.pX=function(a){if(a==null)throw c.i.O();var s=null;try{s=c.qf.fromString(c.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw c.i.O()}this.Ej=new C(s)},h.prototype.Nb=function(a){return a==this||!(!(a instanceof h)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Wn==a.Wn},h.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},h.create=function(a,s){var o=new h;return o.GJ(a),s&&o.Lz(),o},h.pP=function(a,s){var o=new h;return o.pX(a),s&&o.Lz(),o},h}();c.Cx=w}(H||(H={})),function(c){var C=function(){function h(){}return h.construct=function(a,s,o,u){var p=new h;return p.jw=a,p.kw=s,p.MY=o,p.NY=u,p},h.zy=function(a,s){return a.jw==s.jw?a.kw==s.kw?0:a.kw<s.kw?-1:1:a.jw<s.jw?-1:1},h}(),w=function(){function h(){this.tT=[],this.uT=[],this.sp()}return h.fz=function(){return h.eK==null&&(h.eK=new h),h.eK},h.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},h.prototype.dD=function(a){try{var s=[];s=s.sort(C.zy);for(var o=0;o<s.length;o++)a.push(s[o])}catch{}},h}();c.yY=w}(H||(H={})),function(c){var C=function(){function w(){}return w.prototype.tD=function(h){this.Hk=h},w.prototype.RM=function(h){this.Gb=h},w.prototype.sD=function(h){this.Bo=h},w.xE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736)},w.vE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736||20>h.I())},w.wE=function(h){return!(h.B()||h.K()!=1607&&h.K()!=1736||20>h.I())},w}();c.Wk=C}(H||(H={})),function(c){c.ac=function(){function C(){}return C.OT=function(w){var h=new c.Ea;return h.rx(w.gs(),w.js()),h.Aj(w.gs(),w.hs()),h.Aj(w.fs(),w.hs()),h.Aj(w.fs(),w.js()),h},C.Bh=function(w,h){return w===null?null:c.Gx.local().W(w,h,null)},C.fY=function(w,h){var a=c.Ih.local();return w=new c.$c(w),a.W(w,h,null).next()},C.km=function(w,h,a){return c.mp.local().W(w,h,a,null)},C.gp=function(w,h,a){return c.Jx.local().W(w,h,a,null)},C.RX=function(w,h,a){var s=c.Jx.local();for(w=new c.$c(w),h=new c.$c(h),a=s.W(w,h,a,null),s=[];(h=a.next())!=null;)s.push(h);return s},C.Nb=function(w,h,a){return c.fj.local().W(3,w,h,a,null)},C.OP=function(w,h,a){return c.fj.local().W(4,w,h,a,null)},C.MS=function(w,h,a){var s=c.Zj.local();for(w=new c.$c(w),h=new c.$c(h),a=s.W(w,h,a,null),s=[];(h=a.next())!=null;)s.push(h);return s},C.LP=function(w,h,a){var s=c.mp.local();for(w=new c.$c(w),h=new c.$c(h),a=s.W(w,h,a,null),s=[];(h=a.next())!=null;)s.push(h);return s},C.Fa=function(w,h,a){return c.Zj.local().W(w,h,a,null)},C.LS=function(w,h,a){if((w=c.Zj.local().W(w,h,a,null,1))===null)return[];if(w.K()===550){for(h=[],a=0;a<w.xa;a++)h.push(w.FR(a));return h}return w.K()===33?[w]:[]},C.mY=function(w,h,a){return c.fj.local().W(2,w,h,a,null)},C.contains=function(w,h,a){return c.fj.local().W(1,w,h,a,null)},C.wP=function(w,h,a){return c.fj.local().W(16,w,h,a,null)},C.touches=function(w,h,a){return c.fj.local().W(8,w,h,a,null)},C.yU=function(w,h,a){return c.fj.local().W(32,w,h,a,null)},C.OS=function(w,h,a){return c.fj.local().W(1073741824,w,h,a,null)},C.tB=function(w,h,a,s){return c.uL.local().W(w,h,a,s,null)},C.ub=function(w,h,a,s){var o=null;if(a!=null){if(o=a.Id(),s!=null&&o.Fc()!=s.Fc()&&o.pd!=s.pd)throw c.i.Zk()}else if(s!=null)throw c.i.O();return w=c.lL.local().W(w,h,null),o!==null&&s!==null&&(w=c.Uc.Ph(w,o,s)),w},C.clip=function(w,h,a){return c.fL.local().W(w,c.l.construct(h.gs(),h.js(),h.fs(),h.hs()),a,null)},C.fl=function(w,h,a){if(w==null||h==null)return null;for(w=c.hL.local().W(!0,w,h,a,null),h=[];(a=w.next())!=null;)a.B()||h.push(a);return h.slice(0)},C.HN=function(w,h,a,s,o,u,p,f){if(o===!0)return C.IN(w,h,a,s,u,p,f);if(o=a,h!=null){if(p=h.Id(),s!=null&&p.Fc()!=s.Fc()){if(p.pd!=s.pd)throw c.i.Zk();o=[],c.Uc.SE(a,a.length,s,p,o)}}else if(s!=null)throw c.i.O();if(a=c.vC.local(),u){for(w=new c.$c(w),h=a.W(w,h,o,u,null),w=[];(u=h.next())!=null;)w.push(u);u=w.slice(0)}else for(u=[],s=0;s<w.length;s++)u[s]=a.W(w[s],h,o[s],null);return u},C.IN=function(w,h,a,s,o,u,p){if(h===null||(s==null&&(s=h.Fc()!==4326?h.Id():c.Uc.ah(9001)),s.pd!==0))throw c.i.O();if(c.Uc.SE(a,a.length,s,c.Uc.ah(9001),a),s=c.AC.local(),o){for(w=new c.$c(w),h=s.W(w,h,u,a,p,!1,o,null),a=[];(u=h.next())!=null;)a.push(u);o=a.slice(0)}else{o=[];for(var f=0;f<w.length;f++)o[f]=s.W(w[f],h,u,a[f],p,!1,null)}return o},C.buffer=function(w,h,a,s,o,u,p){var f=a;if(o===!1){if(h!=null){if(o=h.Id(),s!=null&&o.Fc()!=s.Fc()){if(o.pd!=s.pd)throw c.i.Zk();f=c.Uc.Ph(a,s,o)}}else if(s!=null)throw c.i.O();w=c.vC.local().W(w,h,f,null)}else{if(h===null||(s==null&&(s=h.Fc()!==4326?h.Id():c.Uc.ah(9001)),s.pd!==0))throw c.i.O();f=c.Uc.Ph(a,s,c.Uc.ah(9001)),w=c.AC.local().W(w,h,u,f,p,!1,null)}return w},C.wU=function(w,h,a,s,o,u,p){if(h!=null){var f=h.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.pd!=p.pd)throw c.i.Zk();a=c.Uc.Ph(a,p,f)}}else if(p!=null)throw c.i.O();for(w=new c.$c(w),h=c.DC.local().W(w,h,a,s,o,u,null),a=[];(s=h.next())!=null;)a.push(s);return a.slice(0)},C.offset=function(w,h,a,s,o,u,p){if(h!=null){var f=h.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.pd!=p.pd)throw c.i.Zk();a=c.Uc.Ph(a,p,f)}}else if(p!=null)throw c.i.O();return c.DC.local().W(w,h,a,s,o,u,null)},C.dP=function(w){return c.xC.local().W(w,null)},C.eP=function(w,h){var a=c.xC.local();for(w=new c.$c(w),h=a.W(w,h,null),a=[];(w=h.next())!=null;)a.push(w);return a},C.iz=function(w,h,a){return c.Hx.local().iz(w,h,a)},C.jz=function(w,h){return c.Hx.local().jz(w,h)},C.kz=function(w,h,a,s){return c.Hx.local().kz(w,h,a,s)},C.$B=function(w,h){return c.$l.local().W(w,h,!1,null)},C.ZS=function(w,h){return c.$l.local().ts(w,h,null)},C.LQ=function(w,h,a,s,o){var u=c.zC.local();if(h!=null){if(h=h.Id(),o!=null&&h.Fc()!=o.Fc()){if(h.pd!=o.pd)throw c.i.Zk();a=c.Uc.Ph(a,o,h)}}else if(o!=null)throw c.i.O();return u.W(w,a,s,null)},C.Sr=function(w,h,a,s){var o=c.Zl.local();if(h!=null){if(h=h.Id(),s!=null&&h.Fc()!=s.Fc()){if(h.pd!=s.pd)throw c.i.Zk();a=c.Uc.Ph(a,s,h)}}else if(s!=null)throw c.i.O();return o.W(w,a,null)},C.Ry=function(w,h,a,s,o){o===void 0&&(o=0);var u=c.nL.local();if(o==4||o!==0)throw c.i.Fe();if(s!==null){if(s.pd!==0)throw c.i.O("Unit must be a linear unit type");a=c.Uc.Ph(a,s,c.Uc.ah(9001))}return u.W(w,a,h,o,null)},C.RQ=function(w,h,a,s){if(w===null)return 0;if(s==4||s!==0)throw c.i.Fe();if(w.K()==197)w=C.OT(w);else if(w.K()!=1736)return 0;if(s=c.cb.tc(h),w=c.cb.Bh(w,h,s),w=c.PK.SQ([w])[0],a!==null){if(a.pd!==2)throw c.i.O("Unit must be a area unit type");w=c.Uc.Ph(w,c.Uc.ah(109404),a)}return w},C.UQ=function(w,h,a,s){if(w=c.qL.local().W(w,h,s,null),a!==null){if(a.pd!==0)throw c.i.O("Unit must be a linear unit type");w=c.Uc.Ph(w,c.Uc.ah(9001),a)}return w},C.EU=function(w,h,a){if(w===null)return 0;var s=null;if(h!=null){if((s=h.Id()).pd==0&&(s=c.Uc.WF(s))==null&&a!==null)throw c.i.O();if(a!=null&&s.Fc()!=a.Fc()&&s.pd!=a.pd)throw c.i.Zk()}else if(a!=null)throw c.i.O();return w.K()==1736||w.K()==197?(w=w.He(),a!==null?c.Uc.Ph(w,s,a):w):0},C.FU=function(w,h,a){if(w===null||w.B()||1>w.Eb())return 0;var s=null;if(h!=null){if(s=h.Id(),a!=null&&s.Fc()!=a.Fc()&&s.pd!=a.pd)throw c.i.Zk()}else if(a!=null)throw c.i.O();w.K()==1736||w.K()==197?h=w.ng():c.ba.zd(w.K())?(h=new c.Ua(w.description)).pc(w,!0):h=w,w=0,h=h.Ha();for(var o=new c.h,u=new c.h;h.ab();)for(;h.Ia();){var p=h.ia();p.$p(o),p.Vr(u),w+=c.h.ub(o,u)}return s!==null&&a!==null&&(w=c.Uc.Ph(w,s,a)),w},C.aP=function(w){return w.points!==void 0?C.hS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?C.gG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?C.gG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?C.iS(w):w.xmin!==void 0?C.gS(w):null},C.iS=function(w){if(w.x==null||w.x=="NaN")return new c.Ta;var h=new c.Ta(w.x,w.y);return w.z!==void 0&&w.z!==null&&h.sX(w.z),w.m!==void 0&&w.m!==null&&h.cX(w.m),h},C.gS=function(w){if(w.xmin==null||w.xmin=="NaN")return new c.Hh;var h=new c.Hh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&h.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&h.setInterval(2,0,w.mmin,w.mmax),h},C.hS=function(w,h,a){var s=0,o=new c.ee,u=3*w.points.length;u%2!=0&&u++,2>u&&(u=2);var p=c.P.truncate(3*w.points.length/2);4>p?p=4:16>p&&(p=16),u=c.Zc.Fn(u,0);var f=c.Zc.Fn(p);p=c.Zc.Fn(p);for(var m=0;m<w.points.length;m++)u.write(2*m,w.points[m][0]),u.write(2*m+1,w.points[m][1]),f.write(m,h||a?w.points[m][2]:NaN),p.write(m,a&&h?w.points[m][3]:NaN),s++;return s!=0&&(o.resize(s),o.kn(0,u)),h&&(o.se(1),o.kn(1,f)),a&&(o.se(2),o.kn(2,h==0?f:p)),o.Qc(16777215),o},C.gG=function(w,h,a,s){var o=0,u=2;if(s=="P"){var p=new c.Ea;o=1,u=3}else p=new c.Ua;for(var f=c.Zc.Qh(0),m=c.Zc.Or(0),b=0,_=0,M=[],T=[],A=0;A<w.length;A++){var O=w[A].length;if(M[A]=!1,s==="P"&&w[A][0][0]===w[A][w[A].length-1][0]&&w[A][0][1]===w[A][w[A].length-1][1]){var R=a==0||w[A][0][3]===w[A][w[A].length-1][3]||w[A][0][3]===void 0&&w[A][w[A].length-1][3]===void 0;(h==0||w[A][0][2]===w[A][w[A].length-1][2]||w[A][0][2]===void 0&&w[A][w[A].length-1][2]===void 0)&&R&&(M[A]=!0,--O)}O>=u?(T[A]=!1,_+=1,f.add(b),m.add(o),b+=O):T[A]=!0}for((s=3*b)%2!=0&&s++,2>s&&(s=2),4>(A=c.P.truncate(3*b/2))?A=4:16>A&&(A=16),s=c.Zc.Fn(s,0),o=c.Zc.Fn(A),u=c.Zc.Fn(A),A=O=0;A<w.length;A++)if(T[A]===!1)for(R=0;R<w[A].length;R++){var j=!1;R===w[A].length-1&&M[A]===!0&&(j=!0),j||(s.write(2*O,w[A][R][0]),s.write(2*O+1,w[A][R][1]),o.write(O,h||a?w[A][R][2]:NaN),u.write(O,a&&h?w[A][R][3]:NaN),O++)}return b!=0&&(w=p,f.resize(_),m.resize(_),0<b&&(f.add(b),m.add(0)),w.kn(0,s),w.KJ(m),w.LJ(f)),h&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,h==0?o:u)),p.Qc(16777215),p},C}()}(H||(H={})),function(c){c.Dx=function(){function C(){}return C.dr=function(w){var h,a=0,s=w.length,o=w[0];for(h=0;h<s-1;h++){var u=w[h+1];a+=(u[0]-o[0])*(u[1]+o[1]),o=u}return 0<=a},C.rotate=function(w,h,a){h=h*Math.PI/180;var s=Math.cos(h),o=Math.sin(h);if(w.paths!==void 0){h={paths:[]};for(var u=0;u<w.paths.length;u++){for(var p=w.paths[u],f=[],m=0;m<p.length;m++){var b=p[m].slice(0);f.push(b);var _=s*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,M=o*(p[m][0]-a.x)+s*(p[m][1]-a.y)+a.y;b[0]=_,b[1]=M}h.paths.push(f),w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM)}return h}if(w.rings!==void 0){for(h={rings:[]},u=0;u<w.rings.length;u++){p=w.rings[u],f=[];var T=C.dr(p);for(m=0;m<p.length;m++)b=p[m].slice(0),f.push(b),_=s*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,M=o*(p[m][0]-a.x)+s*(p[m][1]-a.y)+a.y,b[0]=_,b[1]=M;C.dr(f)!==T&&f.reverse(),h.rings.push(f),w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM)}return h}if(w.x!==void 0)return h={x:s*(w.x-a.x)-o*(w.y-a.y)+a.x,y:o*(w.x-a.x)+s*(w.y-a.y)+a.y},w.z!==void 0&&(h.z=w.z),w.m!==void 0&&(h.m=w.m),w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM),h;if(w.points!==void 0){for(h={points:[]},u=w.points,m=0;m<u.length;m++)(p=u[m].slice(0))[0]=s*(u[m][0]-a.x)-o*(u[m][1]-a.y)+a.x,p[1]=o*(u[m][0]-a.x)+s*(u[m][1]-a.y)+a.y,h.points.push(p);return w.hasZ!==void 0&&(h.hasZ=w.hasZ),w.hasM!==void 0&&(h.hasM=w.hasM),h}return null},C.EQ=function(w,h){if(w.paths!==void 0){for(var a={paths:[]},s=0;s<w.paths.length;s++){for(var o=w.paths[s],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var m=h.x-o[p][0];f[0]=o[p][0]+2*m}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},s=0;s<w.rings.length;s++){o=w.rings[s];var b=C.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),m=h.x-o[p][0],f[0]=o[p][0]+2*m;C.dr(u)!==b&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return m=h.x-w.x,a={x:w.x+2*m,y:w.y},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},s=w.points,p=0;p<s.length;p++)o=s[p].slice(0),m=h.x-o[0],o[0]+=2*m,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),m=h.x-w.xmin,a.xmax=w.xmin+2*m,m=h.x-w.xmax,a.xmin=w.xmax+2*m,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},C.FQ=function(w,h){if(w.paths!==void 0){for(var a={paths:[]},s=0;s<w.paths.length;s++){for(var o=w.paths[s],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var m=h.y-o[p][1];f[1]=o[p][1]+2*m}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},s=0;s<w.rings.length;s++){o=w.rings[s];var b=C.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),m=h.y-o[p][1],f[1]=o[p][1]+2*m;C.dr(u)!==b&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return m=h.y-w.y,a={y:w.y+2*m,x:w.x},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},s=w.points,p=0;p<s.length;p++)o=s[p].slice(0),m=h.y-o[1],o[1]+=2*m,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),m=h.y-w.ymin,a.ymax=w.ymin+2*m,m=h.y-w.ymax,a.ymin=w.ymax+2*m,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},C}()}(H||(H={})),function(c){c.UK=function(){function C(){}return C.Kg=function(w,h){switch(h==null&&(h=c.fe.pg()),w){case 33:return new c.Ta(h);case 322:return new c.zb(h);case 197:return new c.Hh(h);case 550:return new c.ee(h);case 1607:return new c.Ua(h);case 1736:return new c.Ea(h);default:throw c.i.ga("invalid argument.")}},C}()}(H||(H={})),function(c){var C=function(){function w(h,a){this.Qe=c.ja.rf(h,-1),this.va=new c.cu,this.yl=a}return w.prototype.vW=function(h){this.va.Bt(Math.min(this.Qe.size,h)),this.va.hn(h)},w.prototype.addElement=function(h,a){if(a===void 0)return this.$M(h);a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);return s==-1&&(s=this.va.Rh(),this.Qe.set(a,s)),this.va.addElement(s,h)},w.prototype.$M=function(h){var a=this.yl.ez(h);a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);return s==-1&&(s=this.va.Rh(),this.Qe.set(a,s)),this.va.addElement(s,h)},w.prototype.kd=function(h,a){if(a===void 0)this.FP(h);else{a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);if(s==-1)throw c.i.O();for(var o=this.va.sc(s),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==h?(this.va.kd(s,u,o),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(a,-1))):u=o,o=p}}},w.prototype.FP=function(h){var a=this.yl.ez(h);a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);if(s==-1)throw c.i.O();for(var o=this.va.sc(s),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==h?(this.va.kd(s,u,o),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(a,-1))):u=o,o=p}},w.prototype.lR=function(h){return h=c.P.truncate(h%this.Qe.size),(h=this.Qe.get(h))==-1?-1:this.va.sc(h)},w.prototype.zR=function(h){return this.va.lb(h)},w.prototype.wd=function(h){var a=this.yl.ez(this.ka(h));a=c.P.truncate(a%this.Qe.size);var s=this.Qe.get(a);if(s==-1)throw c.i.O();for(var o=this.va.sc(s),u=-1;o!=-1;){if(o==h)return this.va.kd(s,u,o),void(this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(a,-1)));u=o,o=this.va.lb(o)}throw c.i.O()},w.prototype.ka=function(h){return this.va.ka(h)},w.prototype.clear=function(){this.Qe=c.ja.rf(this.Qe.size,-1),this.va.clear()},w.prototype.size=function(){return this.va.OF()},w}();c.ZK=C}(H||(H={})),function(c){var C=function(){function w(){this.Ni=new c.ad(3),this.va=new c.ad(6),this.mT=!1,this.ke=-1}return w.prototype.hl=function(h){this.Ni.kd(h)},w.prototype.Rw=function(){return this.Ni.De()},w.prototype.dv=function(h){this.va.kd(h)},w.prototype.VA=function(){return this.va.De()},w.prototype.RB=function(h,a){this.Ni.T(h,1,a)},w.prototype.fx=function(h,a){this.Ni.T(h,2,a)},w.prototype.bX=function(h,a){this.Ni.T(h,3,a)},w.prototype.PB=function(h,a){this.va.T(h,4,a)},w.prototype.eX=function(h,a){this.va.T(h,3,a)},w.prototype.OJ=function(h,a){this.va.T(h,2,a)},w.prototype.Rh=function(h){var a=this.VA();return this.va.T(a,3,this.ke),this.va.T(a,4,0),this.va.T(a,5,h),this.ke!=-1&&this.OJ(this.ke,a),this.ke=a},w.prototype.eh=function(h){this.GE(h);var a=this.va.U(h,2),s=this.va.U(h,3);return a!=-1?this.eX(a,s):this.ke=s,s!=-1&&this.OJ(s,a),this.dv(h),s},w.prototype.Bt=function(h){this.va.Ee(h)},w.prototype.KF=function(h){return this.va.U(h,5)},w.prototype.aX=function(h,a){this.va.T(h,5,a)},w.prototype.addElement=function(h,a){return this.oS(h,a)},w.prototype.oS=function(h,a){var s=this.Rw();this.fx(s,-1),this.va.U(h,0)==-1&&this.va.T(h,0,s);var o=this.va.U(h,1);return this.RB(s,o),o!=-1&&this.fx(o,s),this.va.T(h,1,s),this.setData(s,a),this.PB(h,this.ds(h)+1),this.mT&&this.bX(s,h),s},w.prototype.kd=function(h,a){var s=this.xe(a),o=this.lb(a);return s!=-1?this.fx(s,o):this.va.T(h,0,o),o!=-1?this.RB(o,s):this.va.T(h,1,s),this.hl(a),this.PB(h,this.ds(h)-1),o},w.prototype.hn=function(h){this.Ni.Ee(h)},w.prototype.getData=function(h){return this.Ni.U(h,0)},w.prototype.setData=function(h,a){this.Ni.T(h,0,a)},w.prototype.lb=function(h){return this.Ni.U(h,2)},w.prototype.xe=function(h){return this.Ni.U(h,1)},w.prototype.sc=function(h){return this.va.U(h,0)},w.prototype.Gc=function(h){return this.va.U(h,1)},w.prototype.clear=function(){for(var h=this.ke;h!=-1;)h=this.eh(h)},w.prototype.GE=function(h){for(var a=this.Gc(h);a!=-1;){var s=a;a=this.xe(s),this.hl(s)}this.va.T(h,0,-1),this.va.T(h,1,-1),this.PB(h,0)},w.prototype.B=function(){return this.Ni.size==0},w.prototype.OF=function(){return this.Ni.size},w.prototype.ds=function(h){return this.va.U(h,4)},w.prototype.lz=function(h){return this.va.U(h,3)},w}();c.lp=C}(H||(H={})),function(c){var C=function(){function w(h){h===void 0?(this.vg=new c.ad(2),this.va=new c.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new c.ad(2),this.va=new c.ad(h?4:2),this.ke=-1,this.Sv=h)}return w.prototype.hl=function(h){this.vg.kd(h)},w.prototype.Rw=function(){return this.vg.De()},w.prototype.dv=function(h){this.va.kd(h)},w.prototype.VA=function(){return this.va.De()},w.prototype.Rh=function(){var h=this.VA();return this.Sv&&(this.va.T(h,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,h),this.ke=h),h},w.prototype.eh=function(h){for(var a=this.sc(h);a!=-1;){var s=a;a=this.lb(a),this.hl(s)}this.Sv&&(a=this.va.U(h,2),s=this.va.U(h,3),a!=-1?this.va.T(a,3,s):this.ke=s,s!=-1&&this.va.T(s,2,a)),this.dv(h)},w.prototype.Bt=function(h){this.va.Ee(h)},w.prototype.addElement=function(h,a){var s=this.va.U(h,1),o=this.Rw();return s!=-1?this.vg.T(s,1,o):this.va.T(h,0,o),this.va.T(h,1,o),this.vg.T(o,0,a),o},w.prototype.hn=function(h){this.vg.Ee(h)},w.prototype.kd=function(h,a,s){a!=-1?(this.vg.T(a,1,this.vg.U(s,1)),this.va.U(h,1)==s&&this.va.T(h,1,a)):(this.va.T(h,0,this.vg.U(s,1)),this.va.U(h,1)==s&&this.va.T(h,1,-1)),this.hl(s)},w.prototype.Cy=function(h,a){var s=this.va.U(h,1),o=this.va.U(a,0);o!=-1&&(s!=-1?this.vg.T(s,1,o):this.va.T(h,0,o),this.va.T(h,1,this.va.U(a,1))),this.Sv&&(h=this.va.U(a,2),s=this.va.U(a,3),h!=-1?this.va.T(h,3,s):this.ke=s,s!=-1&&this.va.T(s,2,h)),this.dv(a)},w.prototype.ka=function(h){return this.vg.U(h,0)},w.prototype.Uj=function(h,a){this.vg.T(h,0,a)},w.prototype.lb=function(h){return this.vg.U(h,1)},w.prototype.sc=function(h){return this.va.U(h,0)},w.prototype.Ln=function(h){return this.ka(this.sc(h))},w.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},w.prototype.B=function(){return this.vg.size==0},w.prototype.OF=function(){return this.vg.size},w.prototype.lz=function(h){return this.va.U(h,3)},w}();c.cu=C}(H||(H={})),function(c){c.ua=function(){function C(){}return C.Xd=function(w,h,a){return h=h.zr(),w=w!=null&&w.Yd!==void 0?w.Yd(0):0,a&&(h*=4,w*=1.1),Math.max(w,h)},C.Gr=function(w){return 2*Math.sqrt(2)*w},C.mN=function(w){return Math.sqrt(2)*w},C.mj=function(w,h,a){var s=new c.l;return h.A(s),C.Xd(w,s,a)},C.rE=function(w,h,a){return h=h.Vg(1,0).zr(),w=w!=null?w.Yd(1):0,a&&(h*=4,w*=1.1),Math.max(w,h)},C.ov=function(w,h){var a=new c.l;return w.yc(a),w=new c.l,h.yc(w),a.$b(w),a},C.TN=function(w){var h=new c.l;if(w.yc(h),h.B())return null;var a=new c.fu(h,8),s=-1,o=new c.l,u=!1;do for(var p=0,f=w.ea();p<f;p++){if(w.Tj(p,o),(s=a.Ez(p,o,s))==-1){if(u)throw c.i.ga("internal error");w.Ap(h,!1),u=!0,a.reset(h,8);break}u=!1}while(u);return a},C.iE=function(w){var h=new c.l;w.yc(h);for(var a=new c.fu(h,8),s=-1,o=w.Ha(),u=new c.l,p=!1;o.ab();)for(;o.Ia();){var f=o.ia(),m=o.xb();if(f.A(u),(s=a.Ez(m,u,s))==-1){if(p)throw c.i.Ra();w.Ap(h,!1),p=!0,a.reset(h,8),o.aj();break}}return a},C.lj=function(w,h){var a=new c.l;w.yc(a);for(var s=new c.fu(a,8),o=-1,u=new c.l,p=w.Ha(),f=!1;p.ab();)for(;p.Ia();){var m=p.ia(),b=p.xb();if(m.A(u),u.isIntersecting(h)&&(o=s.Ez(b,u,o))==-1){if(f)throw c.i.ga("internal error.");w.Ap(a,!1),f=!0,s.reset(a,8),p.aj();break}}return s},C.jE=function(w,h){for(var a=new c.fu(h,8),s=new c.h,o=!1,u=new c.l,p=0;p<w.I();p++)if(w.D(p,s),h.contains(s)&&(u.L(s),a.xj(p,u)==-1)){if(o)throw c.i.Ra();o=!0,p=new c.l,w.Ap(p,!1),a.reset(p,8),p=-1}return a},C.gR=function(w,h,a){var s=new c.l,o=new c.l;w.yc(s),h.yc(o),s.X(a,a),o.X(a,a);var u=new c.l;u.L(s),u.Fa(o),w=w.Ha(),h=h.Ha();var p=new c.sC;p.WB(a);var f=!1;for(p.kK();w.ab();)for(;w.Ia();)w.ia().A(s),s.isIntersecting(u)&&(f=!0,(a=new c.l).L(s),p.DD(w.xb(),a));if(p.dF(),!f)return null;for(s=!1,p.jK();h.ab();)for(;h.Ia();)h.ia().A(o),o.isIntersecting(u)&&(s=!0,(a=new c.l).L(o),p.zD(h.xb(),a));return p.cF(),s?p:null},C.hR=function(w,h,a,s,o){var u=w.K(),p=h.K(),f=new c.l,m=new c.l;w.yc(f),h.yc(m),f.X(a,a),m.X(a,a);var b=new c.l;b.L(f),b.Fa(m);var _=new c.sC;_.WB(a);var M=!1;_.kK();var T=0;for(a=w.ea();T<a;T++)s&&u==1736&&!w.Gv(T)||(w.Tj(T,f),f.isIntersecting(b)&&(M=!0,_.DD(T,f)));if(_.dF(),!M)return null;for(w=!1,_.jK(),s=0,a=h.ea();s<a;s++)o&&p==1736&&!h.Gv(s)||(h.Tj(s,m),m.isIntersecting(b)&&(w=!0,_.zD(s,m)));return _.cF(),w?_:null},C.Tu=function(w,h,a){if(w!=h)for(var s=0;s<a;s++)w[s]==null?w[s]=c.h.cl(h[s]):w[s].N(h[s])},C.Ey=function(w,h,a,s){var o=0;for(s+=0;o<s;a++,o++)w[o]==null&&(w[o]=[0,0]),w[o][0]=h[a].x,w[o][1]=h[a].y},C.Dy=function(w,h,a,s){var o=h,u=0;for(h=s+h;o<h;u++,o++)w[o]==null?w[o]=c.h.construct(a[u][0],a[u][1]):w[o].na(a[u][0],a[u][1])},C.fP=function(w,h,a){if(w!=h)for(var s=0;s<a;s++)w[s]==null?w[s]=new c.Ta(h[s]):h[s].copyTo(w[s])},C.qE=function(w,h,a,s){var o=0;return w!=null&&(o=w.Yd(0),s&&!a||w==null||(o+=1.01*w.pz(0))),a&&(h*=4,o*=1.01),Math.max(o,h)},C.oy=function(w,h,a){return C.qE(w,h.zr(),a,!1)},C.bO=function(w,h){var a=new c.l;return h.A(a),C.oy(w,a,!0)},C.py=function(w,h){return C.qE(w,h.zr(),!1,!0)},C.Ju=function(w,h){var a=new c.l;return h.A(a),C.py(w,a)},C.vG=function(w,h,a,s){s*=s;var o=new c.h;if(o.vc(w,h),(w=new c.h).vc(a,h),h=o.Uk(),a=w.Uk(),h<=s&&a<=s)return!0;var u=c.mc.ox(o.yi(w));return(u<=s*h||u<=s*a)&&0<=o.Sh(w)},C.ZJ=function(w,h,a,s){for(var o=0;o<h;o++){var u=w[o].y,p=c.P.Tk(u,a,s);p!=u&&(w[o].y=p)}},C}()}(H||(H={})),function(c){var C,w,h=function(){function u(p){this.Za=p}return u.prototype.compare=function(p,f,m){p=p.ka(m),m=this.Za.qk(f);var b=this.Za.qk(p);return m<b?-1:m==b?o.iq(f)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(f)?1:0:1},u}(),a=function(){function u(p){this.Za=p}return u.prototype.qr=function(p,f,m){this.Za.CX(m,p,f)},u.prototype.bq=function(p){return this.Za.qk(p)},u}();(w=C||(C={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var s=function(){function u(){this.Za=null,this.Si=new c.Oc,this.ji=new c.ja(0),this.tg=[0,0]}return u.prototype.Zi=function(p,f){this.Si.pa=p.pa-f,this.Si.wa=p.wa+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.zB=function(p,f,m){if(p>f)throw c.i.O();this.Si.pa=p-m,this.Si.wa=f+m,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.Wo=function(p,f){this.Si.pa=p-f,this.Si.wa=p+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.next=function(){if(!this.Za.nq)throw c.i.Hb();if(0>this.ie)return-1;for(var p=!0;p;)switch(this.tg[this.ie]){case 1:p=this.AU();break;case 2:p=this.BU();break;case 3:p=this.CU();break;case 4:p=this.DU();break;case 5:p=this.AW();break;case 6:p=this.fT();break;case 7:p=this.oN();break;case 0:p=this.Bz();break;default:throw c.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},u.construct=function(p){var f=new u;return f.Za=p,f.ji.Jb(20),f.ie=-1,f},u.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},u.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0):p<this.Si.pa?(p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),!0)},u.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.nk(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.pk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},u.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},u.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},u.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},u.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},u}();c.AY=s;var o=function(){function u(p){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=p,this.nq=this.Uv=!1}return u.prototype.mr=function(){this.Pk(!0)},u.prototype.Dr=function(p,f){if(!this.Uv)throw c.i.Hb();this.Hj.push(new c.Oc(p,f))},u.prototype.Hp=function(){if(!this.Uv)throw c.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},u.prototype.xj=function(p){if(!this.Uf||!this.nq)throw c.i.O("invalid call");if(this.kf==-1){var f=this.Hj.length;if(this.dA){var m=new c.ja(0);m.Jb(2*f),this.XI(m),this.bi.Jb(2*f),this.bi.resize(0),this.WI(m),this.Mm.resize(f,-1),this.Mm.Yj(-1,0,f),this.dA=!1}else this.Mm.Yj(-1,0,f);this.kf=this.Vu()}f=this.kG(p<<1,this.kf),m=this.bg.addElement(1+(p<<1),this.rz(f)),this.QJ(f,m),this.Mm.set(p,f),this.aw++},u.prototype.remove=function(p){if(!this.Uf||!this.nq)throw c.i.ga("invalid call");var f=this.Mm.get(p);if(f==-1)throw c.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var m=this.rz(f),b=this.bg.UR(m);this.bg.wd(this.rR(f),m),this.bg.wd(this.OR(f),m),(p=this.bg.size(m))==0&&(this.bg.HP(m),this.UJ(b,-1)),this.Gj.kd(f),m=this.PF(b);var _=this.sj(b),M=this.nk(b);for(f=0;!(0<p||b==this.kf||_!=-1&&M!=-1);)b==this.sj(m)?_!=-1?(this.Qk(m,_),this.Wj(_,m),this.Qk(b,-1)):M!=-1?(this.Qk(m,M),this.Wj(M,m),this.Sk(b,-1)):this.Qk(m,-1):_!=-1?(this.Sk(m,_),this.Wj(_,m),this.Qk(b,-1)):M!=-1?(this.Sk(m,M),this.Wj(M,m),this.Sk(b,-1)):this.Sk(m,-1),this.Wj(b,-1),f++,b=m,p=(m=this.pk(b))!=-1?this.bg.size(m):0,_=this.sj(b),M=this.nk(b),m=this.PF(b)},u.prototype.reset=function(){if(!this.Uf||!this.nq)throw c.i.O("invalid call");this.Pk(!1)},u.prototype.size=function(){return this.aw},u.prototype.getIterator=function(){return s.construct(this)},u.prototype.XI=function(p){for(var f=this.Hj.length,m=0;m<2*f;m++)p.add(m);this.DX(p,2*f)},u.prototype.WI=function(p){for(var f=NaN,m=0;m<p.size;m++){var b=p.get(m),_=this.qk(b);_!=f&&(this.bi.add(b),f=_)}},u.prototype.qS=function(){var p=this.Hj.length,f=new c.ja(0);f.Jb(2*p),this.XI(f),this.bi.Jb(2*p),this.bi.resize(0),this.WI(f),this.Gj.Ee(p),this.Vi.hn(2*p);var m=c.Zc.Qh(p);for(m.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<f.size;p++){var b=f.get(p),_=m.get(b>>1);_!=-1?this.QJ(_,this.Vi.addElement(this.rz(_),b)):(_=this.kG(b,this.kf),m.set(b>>1,_))}},u.prototype.kG=function(p,f){var m=f,b=f,_=-1,M=0,T=this.bi.size-1,A=0,O=p>>1,R=NaN,j=NaN,z=!0,V=this.yR(O);for(O=this.vR(O);z;){M<T?(A=M+c.P.truncate((T-M)/2),this.bz(m)==-1&&this.AJ(m,this.bi.get(A),this.bi.get(A+1))):this.bz(m)==-1&&this.AJ(m,this.bi.get(M),this.bi.get(M));var F=this.Pp(m);if(O<F)f!=-1&&(f==m?(b=m,R=F,j=(f=this.sj(m))!=-1?this.Pp(f):NaN):j>F&&(F<R?this.Qk(b,m):this.Sk(b,m),this.Sk(m,f),this.Uf&&(this.Wj(m,b),this.Wj(f,m)),b=m,R=F,f=-1,j=NaN)),(T=this.sR(m))==-1&&(T=this.Vu(),this.ZW(m,T)),m=T,T=A;else if(V>F)f!=-1&&(f==m?(b=m,R=F,j=(f=this.nk(m))!=-1?this.Pp(f):NaN):j<F&&(F<R?this.Qk(b,m):this.Sk(b,m),this.Qk(m,f),this.Uf&&(this.Wj(m,b),this.Wj(f,m)),b=m,R=F,f=-1,j=NaN)),(M=this.PR(m))==-1&&(M=this.Vu(),this.jX(m,M)),m=M,M=A+1;else{(z=this.pk(m))==-1&&(z=this.uP(m),this.UJ(m,z));var G=this.aN(z,p);_=this.sP(),this.mX(_,z),this.YW(_,G),m!=f&&(F<R?this.Qk(b,m):this.Sk(b,m),this.Uf&&this.Wj(m,b),f!=-1&&(j<F?this.Qk(m,f):this.Sk(m,f),this.Uf&&this.Wj(f,m))),z=!1}}return _},u.prototype.Vu=function(){return this.ne.De()},u.prototype.uP=function(p){return this.Uf?this.bg.Rr(p):this.Vi.Rh(p)},u.prototype.sP=function(){return this.Gj.De()},u.prototype.Pk=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=c.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=c.Zc.Qh(0),this.bg=new c.$j,this.bg.Xo(new h(this))):this.bg.clear():this.Vi==null?this.Vi=new c.lp:this.Vi.clear(),this.ne==null?(this.Gj=new c.ad(3),this.ne=new c.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},u.prototype.AJ=function(p,f,m){this.SW(p,f),this.TW(p,m)},u.prototype.Pp=function(p){var f=this.bz(p);return f==-1?NaN:(f=this.qk(f))==(p=this.qk(this.bR(p)))?f:.5*(f+p)},u.prototype.SW=function(p,f){this.ne.T(p,0,f)},u.prototype.TW=function(p,f){this.ne.T(p,1,f)},u.prototype.ZW=function(p,f){this.ne.T(p,3,f)},u.prototype.jX=function(p,f){this.ne.T(p,4,f)},u.prototype.UJ=function(p,f){this.ne.T(p,2,f)},u.prototype.Qk=function(p,f){this.ne.T(p,5,f)},u.prototype.Sk=function(p,f){this.ne.T(p,6,f)},u.prototype.Wj=function(p,f){this.ne.T(p,7,f)},u.prototype.mX=function(p,f){this.Gj.T(p,0,f)},u.prototype.aN=function(p,f){return this.Uf?this.bg.addElement(f,p):this.Vi.addElement(p,f)},u.prototype.YW=function(p,f){this.Gj.T(p,1,f)},u.prototype.QJ=function(p,f){this.Gj.T(p,2,f)},u.prototype.ml=function(p){return this.Uf?this.bg.sc(p):this.Vi.sc(p)},u.prototype.bs=function(p){return this.Uf?this.bg.Gc(p):this.Vi.Gc(p)},u.iq=function(p){return(1&p)==0},u.Iv=function(p){return(1&p)==1},u.prototype.bz=function(p){return this.ne.U(p,0)},u.prototype.bR=function(p){return this.ne.U(p,1)},u.prototype.pk=function(p){return this.ne.U(p,2)},u.prototype.sR=function(p){return this.ne.U(p,3)},u.prototype.PR=function(p){return this.ne.U(p,4)},u.prototype.sj=function(p){return this.ne.U(p,5)},u.prototype.nk=function(p){return this.ne.U(p,6)},u.prototype.PF=function(p){return this.ne.U(p,7)},u.prototype.rz=function(p){return this.Gj.U(p,0)},u.prototype.rR=function(p){return this.Gj.U(p,1)},u.prototype.OR=function(p){return this.Gj.U(p,2)},u.prototype.yR=function(p){return this.Hj[p].pa},u.prototype.vR=function(p){return this.Hj[p].wa},u.prototype.DX=function(p,f){this.Cm==null&&(this.Cm=new c.Zt);var m=new a(this);this.Cm.sort(p,0,f,m)},u.prototype.CX=function(p,f,m){var b=this;p.Wd(f,m,function(_,M){var T=b.qk(_),A=b.qk(M);return T<A||T==A&&u.iq(_)&&u.Iv(M)?-1:1})},u.prototype.qk=function(p){var f=this.Hj[p>>1];return u.iq(p)?f.pa:f.wa},u}();c.ur=o}(H||(H={})),function(c){var C=function(){function w(h){if(h==null)throw c.i.ga("Invalid arguement");this.hf=h;var a=h.iR();a.cS()?h.ef.DG()?this.no=c.ui.PannableFold:this.no=c.ui.Clip:this.no=c.ui.DontClip,a.dS()?h.$f.DG()?this.Sm=c.ui.PannableFold:this.Sm=c.ui.Clip:this.Sm=c.ui.DontClip,this.Dm=a.Lr,this.hH=a.Xu,h=this.hf.nH,this.WG=h.ks(2147483648),this.Wv=h.ks(1073741824)}return w.Bh=function(h,a,s){return a.yw.Bh(h,s)},w.Tt=function(h,a,s,o){return h.yw.Tt(a,s,o)},w.St=function(h,a,s,o){if(s=0>s?a.length:s,(h=h.yw.Tt(a,s,o))==s)return h;for(var u=a=0;u<s;u++){var p=o[u];p.isNaN()||(a<u&&o[a].N(p),a++)}for(;a<s;a++)o[a].Sc();return h},w.transform=function(h,a,s,o,u){if(h.isIdentity())return c.ua.fP(o,a,s),s;for(var p=[],f=0,m=0;m<s;){for(var b=Math.min(p.length,s-m),_=m,M=0;_<b;_++,M++)p[M]==null?p[M]=a[_].D():a[_].D(p[M]);var T=u?w.St(h,p,b,p):w.Tt(h,p,b,p);for(M=_=0;_<T;_++,M++)o[m]==null&&(o[m]=new c.Ta(a[m])),o[m].Db(p[M]);m+=b,f+=T}return f},w.prototype.Tt=function(h,a,s){if(this.hf.isIdentity())return h!=s&&c.ua.Tu(s,h,a),a;var o=this.hf.ef,u=this.hf.$f,p=o.Tb(),f=u.Tb();if(p==0&&p===f){var m=o.Sp();return u=m/(u=u.Sp()),(m=new c.Ed).Jt(u,u),m.aY(h,a,s),a}if(m=c.P.Hu(Math.min(a,64)),p==3){var b=o.Li;p=(o=b.hk()).Tb(),s!=h&&c.ua.Tu(s,h,a),c.Ab.bl(b,s,a,!0),b.St(c.dm.forward,s,a),c.Ab.al(b,s,a,!0)}if(p==3||f===3)throw c.i.ga("image: transform_in_place_");if(p==2)this.no==c.ui.Clip?(s!=h&&c.ua.Tu(s,h,a),h=o.ol(),c.Ab.JS(h,o,s,a)):(s!=h&&c.ua.Tu(s,h,a),o.Xc()&&(p=o.Yd(0),b=o.Le(),c.Ab.AX(s,a,b,p),c.Ab.lF(s,a,o,0))),c.Ab.DL(o,s,a,m);else for(p=o.Yd(0),b=o.Le(),o=0;o<a;o++)c.Ab.BX(h[o],b,p,s[o]);for(c.Ab.BL(this.hf,s,a,m),h=0,(f=f==2)?h=u.Bi():isNaN(this.Dm)||(h=this.Dm),f&&this.Sm!=c.ui.Clip||c.Ab.lF(s,a,u.tc(),h),f&&(c.Ab.tG(s,a,u,this.Sm),c.Ab.CL(u,s,a,m)),h=a,o=0;o<a;++o)s[o].isNaN()&&h--;return h},w.prototype.Bh=function(h,a){if(this.hf.isIdentity()||h.B())return h;if(h.K()==33)return this.SI(h);var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb();if(u==0&&u==p)return a=s.Sp(),a/=o=o.Sp(),(o=new c.Ed).Jt(a,a),(h=c.ba.kg(h)).Pc(o),h;switch(h.K()){case 1607:case 1736:h=this.QI(h,a);break;case 550:h=this.aW(h,a);break;case 197:h=this.$V(h,a);break;default:throw c.i.ga("")}return h},w.prototype.SI=function(h){var a=h.D(),s=[];return s[0]=a,this.Tt(s,1,s),(h=new c.Ta(h)).Db(s[0]),h},w.prototype.QI=function(h,a){if(h.vm())throw c.i.ga("curves not supported");var s=h.K();if(s==1736)return this.bW(h,a);if(s==1607)return this.cW(h,a);throw c.i.ga("projectMultiPath")},w.prototype.bW=function(h,a){var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb(),f=c.P.Hu(Math.min(h.I(),64)),m=c.Ea.kg(h);u==3&&(u=(s=(h=s.Li).hk()).Tb(),m=h.bl(m,!0),this.yp(h,c.dm.forward,m),m=h.al(m,!0)),h=null,p==3&&(p=(o=(h=o.Li).hk()).Tb());var b=u==2,_=p==2,M=_?o.tc():o,T=!_&&!this.Wv;p=!1;var A=m;if(b){if((A=c.Ab.OI(A,s,this.no,a)).B())return A}else{if(m=new c.l,A.yc(m),u=s.Le(),m.G<u.G||m.H>u.H){var O=c.l.construct(m.v-1,u.G,m.C+1,u.H);if((A=c.ti.Pu(A,O,s,NaN,0,a)).B())return A}m.S()>2*u.S()&&(A=c.Ab.Jp(A,-2*u.S(),2*u.S(),s,!0,0,!0,a))}m=this.hH,(u=!isNaN(m))&&(A=c.Zl.local().W(A,m,a)),O=_?o.mk():null;var R=NaN;b&&(R=s.Bi());var j=o.Yr()!=null;if(this.WG)b&&(c.Ab.wr(s,R,A,f),u&&(b=s.jh(),m*=(R=s.tc().jh())/b)),c.Ab.vr(this.hf,A,T,f),u&&(b=s.tc().jh(),m*=(R=o.tc().jh())/b),s=A;else{var z=new c.Ua(A.description);z.yD(A),b&&(c.Ab.wr(s,R,z,f),u&&(b=s.jh(),m*=(R=s.tc().jh())/b)),c.Ab.vr(this.hf,z,T,f),u&&(b=s.tc().rm(),m*=(R=o.tc().rm())/b),T=NaN,_?(O=o.mk(),T=o.Bi()):isNaN(this.Dm)||(T=this.Dm),b=w.vv(s)|w.vv(o),R=10*M.Yd(0),this.Wv&&(b=3,R=0),s=c.Ab.PQ(A,s,z,M,T,a,b,R)}return j&&(s=c.Ab.SD(s,o,a)),_&&(p||(_=M.Le().S(),s.Vg(0,0).S()>=_-M.Yd(0)&&(M=O.getNorthPoleLocation(),_=O.getSouthPoleLocation(),A=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),T=0,A==c.Eg.PE_POLE_POINT&&M!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),O==c.Eg.PE_POLE_POINT&&_!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(p=!0))),s=c.Ab.Hz(s,o,this.Sm,a),u&&(s=c.Zl.local().W(s,m,a)),c.Ab.Kx(o,s,f)),s.B()||(p&&(s=c.$l.local().W(s,o,!1,a)),h!=null&&(s=h.al(s,!1),this.yp(h,c.dm.reverse,s),s=h.bl(s,!1))),s},w.vv=function(h){if(h.Tb()!=2)return 0;var a=0,s=h.mk();h=s.getNorthPoleLocation();var o=s.getSouthPoleLocation(),u=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),u==c.Eg.PE_POLE_POINT&&h!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),s==c.Eg.PE_POLE_POINT&&o!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},w.prototype.cW=function(h,a){var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb(),f=c.P.Hu(Math.min(h.I(),64)),m=c.Ua.kg(h);u==3&&(u=(s=(h=s.Li).hk()).Tb(),m=h.bl(m,!0),this.yp(h,c.dm.forward,m),m=h.al(m,!0)),h=null,p==3&&(p=(o=(h=o.Li).hk()).Tb());var b=u==2;u=(p=p==2)?o.tc():o;var _=!p&&!this.Wv;if(b){if((m=c.Ab.OI(m,s,this.no,a)).B())return m}else{var M=new c.l;m.yc(M);var T=s.Le();if((M.G<T.G||M.H>T.H)&&(M=c.l.construct(M.v-1,T.G,M.C+1,T.H),(m=c.ti.Pu(m,M,s,NaN,0,a)).B()))return m}var A=NaN;b&&(A=s.Bi()),M=o.Yr()!=null,T=this.hH;var O=!isNaN(T);if(O&&(m=c.Zl.local().W(m,T,a)),this.WG)b&&c.Ab.wr(s,A,m,f),O&&(b=s.jh(),T*=(A=s.tc().jh())/b),c.Ab.vr(this.hf,m,_,f),O&&(b=s.tc().jh(),T*=(A=o.tc().jh())/b),s=m;else{var R=new c.Ua(m.description);R.yD(m),b&&(c.Ab.wr(s,A,R,f),O&&(b=s.jh(),T*=(A=s.tc().jh())/b)),c.Ab.vr(this.hf,R,_,f),O&&(b=s.tc().jh(),T*=(A=o.tc().jh())/b),_=NaN,p?_=o.Bi():isNaN(this.Dm)||(_=this.Dm),b=w.vv(s)|w.vv(o),A=10*u.Yd(0),this.Wv&&(b=3,A=0),s=c.Ab.QQ(m,s,R,u,_,a,b,A)}return M&&(s=c.Ab.SD(s,o,a)),p&&(s=c.Ab.Hz(s,o,this.Sm,a),O&&(s=c.Zl.local().W(s,T,a)),c.Ab.Kx(o,s,f)),s.B()||h!=null&&(s=h.al(s,!1),this.yp(h,c.dm.reverse,s),s=h.bl(s,!1)),s},w.prototype.$V=function(h,a){var s=(h.da()+h.S())/400;return s!=0?(s=c.Zl.local().W(h,s,a),s=this.QI(s,a),a=h.Ja(),s.dn(a)):(a=new c.Ta(h.Kp()),s=this.SI(a),a=h.Ja(),s.B()?a.Pa():(h.copyTo(a),h=s.D(),a.L(h.x,h.y,h.x,h.y))),a},w.prototype.aW=function(h,a){h=c.ba.kg(h);var s=this.hf.ef,o=this.hf.$f,u=s.Tb(),p=o.Tb(),f=c.P.Hu(Math.min(h.I(),64));if(u==3){var m=s.Li;u=(s=m.hk()).Tb(),h=m.al(h,!0),this.yp(m,c.dm.forward,h),h=m.bl(h,!0)}if(u==2){if(this.no==c.ui.Clip?h=c.Zj.local().W(h,s.ol(),s,a):s.Xc()&&(u=new c.l,h.yc(u),s.Le().contains(u)||(this.no==c.ui.PannableFold&&(h=c.Ab.nj(h,s)),c.Ab.Lt(h,s.Le(),s.Yd(0),!0),h=c.Ab.Hn(h,s,0,!0,0,a))),h.B())return h;c.Ab.wr(s,0,h,f)}else c.Ab.Lt(h,s.Le(),s.Yd(0),!0);return c.Ab.vr(this.hf,h,!1,f),s=0,u=!1,m=null,p==3&&(u=!0,p=(o=(m=o.Li).hk()).Tb()),(p=p==2)?s=o.Bi():isNaN(this.Dm)||(s=this.Dm),p&&this.Sm!=c.ui.Clip||(h=c.Ab.Hn(h,o.tc(),s,!1,0,a)),p&&(h=c.Ab.Hz(h,o,this.Sm,a),c.Ab.Kx(o,h,f),h.B())||u&&(h=m.al(h,!0),this.yp(m,c.dm.reverse,h),h=m.bl(h,!0)),h},w.prototype.yp=function(h,a,s){var o=s.I();if(o!=0){for(var u=s.vb(0),p=c.P.mg(200,0),f=[],m=0;m<o;){var b=Math.min(100,o-m);u.Xw(2*m,2*b,p,2,!0);for(var _=0;_<b;++_)f[_]=c.h.construct(p[2*m],p[2*m+1]);h.St(a,f,b),m+=b}s.Qc(1993)}},w.Py=function(h,a,s){if(h==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(h.B())return h;var o=h.K();return o==197?(o=new c.Ea(h.description)).bd(h,!1):c.ba.zd(o)?(o=new c.Ua(h.description)).pc(h,!0):o=h,(o=c.Ab.nj(o,a)).B()?o:c.Ab.Hn(o,a,0,o!=h,0,s)},w.pj=function(h,a,s,o){if(h==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(h.B())return h;var u=h.K();if(c.ba.Ic(u)){h=c.Ab.nj(h,a),u=new c.l,h.A(u);for(var p=c.ua.oy(a,u,!1),f=a.ih(),m=Math.floor((u.v-f.v)/f.S())*f.S()+f.v;m<u.C;)m>u.v+p&&m<u.C-p&&(h=c.Ab.pS(h,a,s,m)),m+=f.S()}else{if(u==197)return(u=new c.Ea(h.description)).bd(h,!1),w.pj(u,a,s,o);if(c.ba.zd(u))return(u=new c.Ua(h.description)).pc(h,!0),w.pj(u,a,s,o)}return w.Py(h,a,o)},w}();c.du=C}(H||(H={})),function(c){var C=function(w){function h(a,s,o,u){var p=w.call(this)||this;return a===void 0?p.description=c.fe.pg():o===void 0?p.description=a:(p.description=c.fe.pg(),p.UB(a,s),p.Sl(o,u)),p}return At(h,w),h.prototype.K=function(){return 322},h.prototype.Rb=function(){var a=this.ta-this.qa,s=this.oa-this.ma;return Math.sqrt(a*a+s*s)},h.prototype.Di=function(a){var s=this.ta-this.qa,o=this.oa-this.ma;return Math.sqrt(s*s+o*o)<=a},h.prototype.Rn=function(){return!1},h.prototype.lg=function(){var a=new c.h;return a.vc(this.xc(),this.bc()),a},h.YO=function(a,s){return new h(a.x,a.y,s.x,s.y)},h.prototype.dn=function(a){a.Pa(),a.Pf(this.description);var s=new c.l;this.A(s),a.Zo(s),s=1;for(var o=this.description.Ba;s<o;s++)for(var u=this.description.ld(s),p=c.sa.Wa(u);s<p;s++){var f=this.Vg(u,0);a.setInterval(u,0,f)}},h.prototype.A=function(a){a.L(this.ta,this.oa,this.qa,this.ma),a.normalize()},h.prototype.So=function(a){a.Pa(),a.$b(this.ta,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},h.prototype.Pc=function(a){if(a instanceof c.Ed){this.wc();var s=new c.h;s.x=this.ta,s.y=this.oa,a.Gh(s,s),this.ta=s.x,this.oa=s.y,s.x=this.qa,s.y=this.ma,a.Gh(s,s),this.qa=s.x,this.ma=s.y}else this.wc(),(s=new c.Od).x=this.ta,s.y=this.oa,s.z=this.Pd(0,1,0),s=a.hp(s),this.ta=s.x,this.oa=s.y,this.vn(0,1,0,s.z),s.x=this.qa,s.y=this.ma,s.z=this.Pd(1,1,0),s=a.hp(s),this.qa=s.x,this.ma=s.y,this.vn(1,1,0,s.z)},h.prototype.Ja=function(){return new h(this.description)},h.prototype.Sx=function(a,s){return(this.qa-a-(this.ta-a))*(this.ma-s+(this.oa-s))*.5},h.prototype.ux=function(a){return a*this.Rb()},h.prototype.IG=function(a){return a/this.Rb()},h.prototype.yF=function(a){return c.mc.jq(this.ta,this.qa,a)},h.prototype.aR=function(a){return c.mc.jq(this.oa,this.ma,a)},h.prototype.fl=function(a,s){var o=new c.jg;return this.dh(a,s,o),o.get()},h.prototype.dh=function(a,s,o){if(o==null)throw c.i.O();o.Qr(),(o=o.get()).Pf(this.description);var u=new c.h;this.ic(a,u),o.UB(u.x,u.y),this.ic(s,u),o.Sl(u.x,u.y),u=1;for(var p=this.description.Ba;u<p;u++)for(var f=this.description.Fd(u),m=c.sa.Wa(f),b=0;b<m;b++){var _=this.Vc(a,f,b);o.TB(f,b,_),_=this.Vc(s,f,b),o.JB(f,b,_)}},h.prototype.Vc=function(a,s,o){if(s==0)return o==0?this.ic(a).x:this.ic(a).y;switch(c.sa.gz(s)){case 0:return .5>a?this.yv(s,o):this.jv(s,o);case 1:var u=this.yv(s,o);return s=this.jv(s,o),c.mc.jq(u,s,a);case 2:throw c.i.ga("not implemented")}throw c.i.Ra()},h.prototype.ge=function(a,s){var o=this.qa-this.ta,u=this.ma-this.oa,p=o*o+u*u;return p==0?.5:(a=((a.x-this.ta)*o+(a.y-this.oa)*u)/p,s||(0>a?a=0:1<a&&(a=1)),a)},h.prototype.fq=function(a,s,o,u){if(a){if((a=this.ma-this.oa)==0)return s==this.ma?-1:0;if(0>(s=(s-this.oa)/a)||1<s)return 0;o!=null&&(o[0]=this.yF(s))}else{if((a=this.qa-this.ta)==0)return s==this.qa?-1:0;if(0>(s=(s-this.ta)/a)||1<s)return 0;o!=null&&(o[0]=this.aR(s))}return u!=null&&(u[0]=s),1},h.prototype.Me=function(a,s){var o=this.ma-this.oa;return o==0?a==this.ma?s:NaN:(a=(a-this.oa)/o,s=this.yF(a),a==1&&(s=this.qa),s)},h.prototype.tu=function(a,s,o){return 0<=this.tp(a.x,a.y,s,o)},h.prototype.xi=function(a,s,o){return 0<=this.tp(a,s,o,!0)},h.prototype.ss=function(a,s){return this.tu(a,s,!1)},h.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var s=this.description.Qq-2;a<s;a++){var o=this.la[a];this.la[a]=this.la[a+s],this.la[a+s]=o}}},h.prototype.wu=function(a,s){(s=c.h.construct(a,s)).sub(this.bc());var o=new c.h;return o.vc(this.xc(),this.bc()),(a=o.yi(s))>(s=8881784197001252e-31*(Math.abs(o.x*s.y)+Math.abs(o.y*s.x)))?-1:a<-s?1:0},h.prototype.tp=function(a,s,o,u){var p=this.ta,f=this.oa,m=a-p,b=s-f;if((m=Math.sqrt(m*m+b*b))<=Math.max(o,6661338147750939e-31*m))return u&&m==0?NaN:0;if(m=a-this.qa,b=s-this.ma,(m=Math.sqrt(m*m+b*b))<=Math.max(o,6661338147750939e-31*m))return u&&m==0?NaN:1;if(m=this.qa-this.ta,b=this.ma-this.oa,0<(u=Math.sqrt(m*m+b*b))){var _=1/u,M=a-p,T=s-f,A=M*(m*=_)+T*(b*=_),O=17763568394002505e-31*(Math.abs(M*m)+Math.abs(T*b)),R=m;if(m=-b,b=R,A<-(O=Math.max(o,O))||A>u+O)return NaN;if(Math.abs(M*m+T*b)<=Math.max(o,17763568394002505e-31*(Math.abs(M*m)+Math.abs(T*b)))&&(.5>=(m=c.P.Tk(A*_,0,1))?(b=this.ta+(this.qa-this.ta)*m,u=this.oa+(this.ma-this.oa)*m):(b=this.qa-(this.qa-this.ta)*(1-m),u=this.ma-(this.ma-this.oa)*(1-m)),c.h.Jy(b,u,a,s)<=o)){if(.5>m){if(c.h.Jy(b,u,p,f)<=o)return 0}else if(c.h.Jy(b,u,this.qa,this.ma)<=o)return 1;return m}}return NaN},h.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.AM(a))},h.prototype.mD=function(a,s,o){var u=o?this.ta:this.qa;o=o?this.oa:this.ma;var p=new c.h;return p.x=a.qa-u,p.y=a.ma-o,!(s.Sh(p)>6661338147750939e-31*s.aD(p))||(p.x=a.ta-u,p.y=a.oa-o,s.Sh(p)<=6661338147750939e-31*s.aD(p))},h.prototype.lD=function(a){var s=new c.h;return s.x=this.qa-this.ta,s.y=this.ma-this.oa,!!this.mD(a,s,!1)&&(s.Uq(),!!this.mD(a,s,!0))},h.IM=function(a,s){var o=a.wu(s.ta,s.oa),u=a.wu(s.qa,s.ma);return!(0>o&&0>u||0<o&&0<u)&&(o=s.wu(a.ta,a.oa),u=s.wu(a.qa,a.ma),!(0>o&&0>u||0<o&&0<u)&&((o=a.Rb())>(u=s.Rb())?a.lD(s):s.lD(a)))},h.GM=function(a,s,o){var u=c.h.construct(NaN,NaN),p=a.qa-a.ta,f=a.ma-a.oa,m=s.qa-s.ta,b=s.ma-s.oa,_=m*f-p*b;if(_==0)return u;var M=8881784197001252e-31*(Math.abs(m*f)+Math.abs(p*b)),T=s.ta-a.ta,A=s.oa-a.oa,O=m*A-T*b,R=O/_,j=Math.abs(_);return R<-(m=(8881784197001252e-31*(Math.abs(m*A)+Math.abs(T*b))*j+M*Math.abs(O))/(_*_)+2220446049250313e-31*Math.abs(R))||R>1+m||(m=(b=p*A-T*f)/_)<-(p=(8881784197001252e-31*(Math.abs(p*A)+Math.abs(T*f))*j+M*Math.abs(b))/(_*_)+2220446049250313e-31*Math.abs(m))||m>1+p||(R=c.P.Tk(R,0,1),p=c.P.Tk(m,0,1),f=a.ic(R),_=s.ic(p),(M=new c.h).vc(f,_),M.length()>o&&(M.add(f,_),M.scale(.5),R=a.ge(M,!1),p=s.ge(M,!1),a=a.ic(R),s=s.ic(p),a.sub(s),a.length()>o)||u.na(R,p)),u},h.JM=function(a,s,o,u){var p=0;if((a.ta==s.ta&&a.oa==s.oa||a.ta==s.qa&&a.oa==s.ma)&&(p++,!u))return 1;if(a.qa==s.ta&&a.ma==s.oa||a.qa==s.qa&&a.ma==s.ma){if(++p==2)return 2;if(!u)return 1}return s.xi(a.ta,a.oa,o)||s.xi(a.qa,a.ma,o)||a.xi(s.ta,s.oa,o)||a.xi(s.qa,s.ma,o)?1:u&&p!=0||h.IM(a,s)==0?0:1},h.Yx=function(a,s,o,u,p,f){var m=0,b=a.tp(s.ta,s.oa,f,!1),_=a.tp(s.qa,s.ma,f,!1),M=s.tp(a.ta,a.oa,f,!1),T=s.tp(a.qa,a.ma,f,!1);return isNaN(b)||(u!=null&&(u[m]=b),p!=null&&(p[m]=0),o!=null&&(o[m]=c.h.construct(s.ta,s.oa)),m++),isNaN(_)||(u!=null&&(u[m]=_),p!=null&&(p[m]=1),o!=null&&(o[m]=c.h.construct(s.qa,s.ma)),m++),m==2||isNaN(M)||b==0&&M==0||_==0&&M==1||(u!=null&&(u[m]=0),p!=null&&(p[m]=M),o!=null&&(o[m]=c.h.construct(a.ta,a.oa)),m++),m==2||isNaN(T)||b==1&&T==0||_==1&&T==1||(u!=null&&(u[m]=1),p!=null&&(p[m]=T),o!=null&&(o[m]=c.h.construct(s.qa,s.ma)),m++),0<m?(m==2&&u!=null&&u[0]>u[1]&&(a=u[0],u[0]=u[1],u[1]=a,p!=null&&(u=p[0],p[0]=p[1],p[1]=u),o!=null&&(p=c.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),m):(m=h.GM(a,s,f),isNaN(m.x)?0:(o!=null&&(o[0]=a.ic(m.x)),u!=null&&(u[0]=m.x),p!=null&&(p[0]=m.y),1))},h.prototype.$F=function(){return 0},h.prototype.qp=function(){},h.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},h}(c.NC);c.zb=C}(H||(H={})),function(c){var C=function(){function w(){this.Lm=[],this.za=-1}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var h=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),h}return this.Lm=null},w.prototype.VX=function(h){this.Lm.push(h)},w.prototype.re=function(){},w}();c.bL=C}(H||(H={})),function(c){var C;(C=c.NL||(c.NL={}))[C.enumFillRuleOddEven=0]="enumFillRuleOddEven",C[C.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(h){function a(s,o){var u=h.call(this)||this;if(u.yf=!1,u.Gq=null,u.uq=0,u.tq=0,u.Cj=null,u.Og=!1,u.nb=null,u.mb=null,u.Se=null,u.Nj=null,u.Td=null,u.vq=0,u.gb=0,u.zq=0,o===void 0)u.yf=s,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=c.fe.pg();else{if(o==null)throw c.i.O();u.yf=s,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=o}return u.Cj=null,u.gb=0,u}return At(a,h),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new c.Ta(this.description):this.Gq.Pf(this.description)},a.prototype.rx=function(s,o){var u=new c.h;u.x=s,u.y=o,this.Nt(u)},a.prototype.Nt=function(s){this.Xx(),this.Gq.Db(s),this.Og=!0},a.prototype.nf=function(s){if(s.B())throw c.i.O();this.Ll(s.description),this.Xx(),s.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var s=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=c.Zc.Qh(2),this.nb.write(0,0),this.mb=c.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),s++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+s),this.fm(o+s),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(s,o){this.Rx(),this.Db(this.xa-1,s,o)},a.prototype.Ei=function(s){this.Rx(),this.Db(this.xa-1,s)},a.prototype.lineTo=function(s){this.Rx(),this.It(this.xa-1,s)},a.prototype.xU=function(s){if(this.wc(),this.yf)throw c.i.Ra();var o=this.ea();if(s>o)throw c.i.Ra();if(this.ec(s)){if(this.mb==null)throw c.i.Ra();var u=this.xa,p=this.Ca(s),f=this.Wc(s);this.fm(this.xa+1),this.oc();for(var m=0,b=this.description.Ba;m<b;m++)if(this.Aa[m]!=null){var _=c.sa.Wa(this.description.Fd(m));this.Aa[m].On(_*f,this.Aa[m],_*p,_,!0,1,_*u)}for(;o>s;o--)u=this.nb.read(o),this.nb.write(o,u+1);this.mb.FE(s,1)}},a.prototype.Cp=function(){if(this.vx(),s===void 0){this.Og=!1;var s=this.ea()-1}var o=this.mb.read(s);this.mb.write(s,1|o),this.Se!=null&&(s=this.Wc(s)-1,this.Se.write(s,1),this.Nj.write(s,-1))},a.prototype.ec=function(s){return(1&this.mb.read(s))!=0},a.prototype.Pn=function(s){if(this.ec(s))return!0;var o=this.Ca(s);return!(o>(s=this.Wc(s)-1))&&(o=this.Oa(o),s=this.Oa(s),o.rb(s))},a.prototype.Av=function(s){return(2&this.mb.read(s))!=0},a.prototype.pc=function(s,o){if(this.Ll(s.description),s.K()!=322)throw c.i.Ra();var u=new c.Ta;(o||this.B())&&(s.Vo(u),this.nf(u)),s.Ro(u),this.lineTo(u)},a.prototype.vp=function(s){var o=this.xa==0;this.rx(s.v,s.G),this.Aj(s.v,s.H),this.Aj(s.C,s.H),this.Aj(s.C,s.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(s,o){if(!s.B()){for(var u=this.xa==0,p=new c.Ta(this.description),f=0;4>f;f++)s.If(o?4-f-1:f,p),f==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,u&&!o&&this.Nf(256,!1)}},a.prototype.add=function(s,o){for(var u=0;u<s.ea();u++)this.addPath(s,u,!o)},a.prototype.addPath=function(s,o,u){this.wf(-1,s,o,u)},a.prototype.$k=function(s,o){this.Cz(s,o)},a.prototype.Fr=function(s,o,u,p,f){if(f||this.ea()!=0||(f=!0),0>o&&(o=s.ea()-1),o>=s.ea()||0>u||0>p||p>s.tv(o))throw c.i.ga("index out of bounds");if(p!=0){var m=s.ec(o)&&u+p==s.tv(o);if(!m||p!=1){if(this.Og=!1,this.Ll(s.description),u=s.Ca(o)+u+1,f&&(p++,u--),m&&p--,m=this.xa,this.fm(this.xa+p),this.oc(),f){if(p==0)return;this.nb.add(this.xa),f=s.mb.read(o),f&=-5,this.yf&&(f|=1),this.mb.write(this.mb.size-1,f),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);f=0;for(var b=this.description.Ba;f<b;f++){var _=this.description.ld(f),M=c.sa.Wa(_),T=s.description.Rf(_);0>T||s.Aa[T]==null?this.Aa[f].Nn(M*m,c.sa.te(_),p*M,M*m):this.Aa[f].On(M*m,s.Aa[T],M*u,p*M,!0,M,M*m)}if(this.vm()||s.Av(o))throw c.i.Ra();this.Qc(1993)}}},a.prototype.jJ=function(){for(var s=0,o=this.ea();s<o;s++)this.zW(s)},a.prototype.zW=function(s){if(this.oc(),s>=this.ea())throw c.i.O();var o=this.Ca(s),u=this.Ka(s);s=this.ec(s)?1:0;for(var p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=c.sa.Wa(this.description.Fd(p));this.Aa[p].pi(m*(o+s),m*(u-s),m)}this.Qc(1993)},a.prototype.ar=function(s){this.oc();var o=this.ea();if(0>s&&(s=o-1),s>=o)throw c.i.O();for(var u=this.Ca(s),p=this.Ka(s),f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var b=c.sa.Wa(this.description.Fd(f));this.Aa[f].Gn(b*u,b*p,b*this.xa)}for(u=s+1;u<=o;u++)f=this.nb.read(u),this.nb.write(u-1,f-p);if(this.mb==null)for(u=s+1;u<=o;u++)s=this.mb.read(u),this.mb.write(u-1,s);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(s,o,u,p){if(o==this||u>=o.ea())throw c.i.O();var f=this.ea();if(s>f)throw c.i.O();0>s&&(s=f),0>u&&(u=o.ea()-1),this.Og=!1,this.Ll(o.description),o.oc();var m=o.Ca(u),b=o.Ka(u),_=this.xa,M=o.ec(u)&&!p?1:0;this.fm(this.xa+b),this.oc();for(var T=s<f?this.Ca(s):_,A=0,O=this.description.Ba;A<O;A++){var R=this.description.Fd(A),j=o.description.Rf(R),z=c.sa.Wa(R);0<=j&&o.Aa[j]!=null?(M!=0&&this.Aa[A].On(T*z,o.Aa[j],z*m,z,!0,z,z*_),this.Aa[A].On((T+M)*z,o.Aa[j],z*(m+M),z*(b-M),p,z,z*(_+M))):this.Aa[A].Nn(T*z,c.sa.te(R),z*b,z*_)}for(this.nb.add(_+b),p=f;p>=s+1;p--)m=this.nb.read(p-1),this.nb.write(p,m+b);for(o.Av(u),this.mb.add(0),p=f-1;p>=s+1;p--)f=this.mb.read(p),f&=-5,this.mb.write(p+1,f);f=o.ER().read(u),f&=-5,this.yf&&(f|=1),this.mb.write(s,f)},a.prototype.Cz=function(s,o){var u=-1,p=this.ea();if(u>p)throw c.i.O();0>u&&(u=p),this.Og=!1;var f=this.xa;this.fm(this.xa+o),this.oc();var m=u<p?this.Ca(u):f;if(s!=null)this.Aa[0].Dz(2*m,s,0,o,!0,2*f);else{var b=c.sa.te(0);this.Aa[0].Nn(2*m,b,2*o,2*f)}s=1;for(var _=this.description.Ba;s<_;s++){b=this.description.ld(s);var M=c.sa.Wa(b);b=c.sa.te(b),this.Aa[s].Nn(m*M,b,M*o,M*f)}for(this.nb.add(this.xa),f=p;f>=u+1;f--)m=this.nb.read(f-1),this.nb.write(f,m+o);for(this.mb.add(0),f=p-1;f>=u+1;f--)o=this.mb.read(f),o&=-5,this.mb.write(f+1,o);this.yf&&this.mb.write(u,1)},a.prototype.lG=function(s,o,u){var p=-1;if(0>s&&(s=this.ea()),s>this.ea()||p>this.Ka(s)||u>o.length)throw c.i.ga("index out of bounds");if(u!=0){s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(s)),this.oc();var f=this.xa;this.fm(this.xa+u),this.oc();for(var m=0,b=this.description.Ba;m<b;m++){var _=this.description.Fd(m),M=c.sa.Wa(_);this.Aa[m].Wt(M*(this.Ca(s)+p+u),(f-this.Ca(s)-p)*M,this.Aa[m],M*(this.Ca(s)+p),!0,M),m==0?this.Aa[m].qC(M*(this.Ca(s)+p),u,o,0,!0):this.Aa[m].Yj(c.sa.te(_),(this.Ca(s)+p)*M,u*M)}for(this.vm()&&(this.Se.Wt(this.Ca(s)+p+u,f-this.Ca(s)-p,this.Se,this.Ca(s)+p,!0,1),this.Nj.Wt(this.Ca(s)+p+u,f-this.Ca(s)-p,this.Nj,this.Ca(s)+p,!0,1),this.Se.Yj(1,this.Ca(s)+p,u),this.Nj.Yj(-1,this.Ca(s)+p,u)),s+=1,o=this.ea();s<=o;s++)this.nb.write(s,this.nb.read(s)+u)}},a.prototype.xf=function(s,o,u){var p=this.ea();if(0>s&&(s=this.ea()),s>=p||o>this.Ka(s))throw c.i.ga("index out of bounds");s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(s));var f=this.xa;this.fm(this.xa+1),this.oc();var m=this.Ca(s);this.Aa[0].xj(2*(m+o),u,2*f),u=1;for(var b=this.description.Ba;u<b;u++){var _=this.description.Fd(u),M=c.sa.Wa(_);this.Aa[u].Nn(M*(m+o),c.sa.te(_),M,M*f)}for(s+=1;s<=p;s++)this.nb.write(s,this.nb.read(s)+1)},a.prototype.yB=function(s,o){var u=this.ea();if(0>s&&(s=u-1),s>=u||o>=this.Ka(s))throw c.i.ga("index out of bounds");this.oc();var p=this.Ca(s);0>o&&(o=this.Ka(s)-1),o=p+o,p=0;for(var f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=c.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(m*o,m,m*this.xa)}for(;u>=s+1;u--)o=this.nb.read(u),this.nb.write(u,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.pE=function(s,o,u,p){if(s=this.Ca(s)+o,(u=this.Ca(u)+p)<s||0>s||u>this.I()-1)throw c.i.O();o=0,(p=this.Ha()).Wb(s);do{for(;p.Ia()&&(s=p.ia(),p.xb()!=u);)o+=s=s.Rb();if(p.xb()==u)break}while(p.ab());return o},a.prototype.aO=function(s,o,u){if(o=this.Ca(s)+o,u=this.Ca(s)+u,0>o||u>this.I()-1)throw c.i.O();var p=this.Ha();if(o>u){if(!this.ec(s))throw c.i.O("cannot iterate across an open path");p.EB()}var f=s=0;p.Wb(o);do f+=s,s=p.ia().Rb();while(p.xb()!=u);return f},a.prototype.ng=function(){return c.si.im(this,null)},a.prototype.FS=function(s,o,u){for(var p=s;p<u-1;p++)if(this.ec(p))throw c.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var f=this.pE(s,o,u,void 0);if(f!=0)for(var m=1;m<p;m++){var b=this.description.ld(m);if(c.sa.gz(b)!=2)for(var _=c.sa.Wa(b),M=0;M<_;M++)this.HS(b,s,o,u,f,M)}}},a.prototype.ES=function(s,o,u){var p=this.description.Ba;if(p!=1){var f=this.aO(s,o,u);if(f!=0)for(var m=1;m<p;m++){var b=this.description.ld(m);if(c.sa.gz(b)!=2)for(var _=c.sa.Wa(b),M=0;M<_;M++)this.GS(b,s,o,u,f,M)}}},a.prototype.HS=function(s,o,u,p,f,m){var b=this.Ha(),_=this.Ca(o)+u;p=this.Ca(p)+void 0,o=this.Vc(s,_,m),u=this.Vc(s,p,m);var M=o,T=0;b.Wb(_);do if(b.Ia()){if(b.ia(),b.xb()==p)break;this.setAttribute(s,b.xb(),m,M),b.ni();do{if(_=b.ia(),b.kk()==p)return;T+=_=_.Rb(),M=c.mc.jq(o,u,T/f),b.Qn()||this.setAttribute(s,b.kk(),m,M)}while(b.Ia())}while(b.ab())},a.prototype.GS=function(s,o,u,p,f,m){var b=this.Ha(),_=this.Ca(o)+u;if((o=this.Ca(o)+p)!=_){p=this.Vc(s,_,m),u=this.Vc(s,o,m);var M=0;b.Wb(_),b.EB(),_=p;do{var T=b.ia();this.setAttribute(s,b.xb(),m,_),M+=_=T.Rb(),_=c.mc.jq(p,u,M/f)}while(b.kk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},a.prototype.Pc=function(s){s instanceof c.Ed?this.TD(s,-1):this.rN(s)},a.prototype.TD=function(s,o){if(!this.B()&&!s.isIdentity()){this.oc();var u=this.Aa[0],p=new c.h,f=new c.h;if(0>o){var m=this.vm(),b=0;o=this.xa}else m=this.Av(o),b=this.Ca(o),o=this.Wc(o);for(;b<o;b++){if(p.x=u.read(2*b),p.y=u.read(2*b+1),m){var _=this.Nj.read(b);if(0<=_)switch(7&this.Se.read(b)){case 2:f.x=this.Td.read(_),f.y=this.Td.read(_+1),s.Gh(f,f),this.Td.write(_,f.x),this.Td.write(_+1,f.y),f.x=this.Td.read(_+3),f.y=this.Td.read(_+4),s.Gh(f,f),this.Td.write(_+3,f.x),this.Td.write(_+4,f.y);break;case 4:throw c.i.Ra()}}s.Gh(p,p),u.write(2*b,p.x),u.write(2*b+1,p.y)}this.Qc(1993)}},a.prototype.rN=function(s){if(!this.B()){this.se(1),this.oc();for(var o=this.Aa[0],u=this.Aa[1],p=new c.Od,f=new c.Od,m=this.vm(),b=0;b<this.xa;b++){if(p.x=o.read(2*b),p.y=o.read(2*b+1),p.z=u.read(b),m){var _=this.Nj.read(b);if(0<=_)switch(7&this.Se.read(b)){case 2:f.x=this.Td.read(_),f.y=this.Td.read(_+1),f.z=this.Td.read(_+2),f=s.hp(f),this.Td.write(_,f.x),this.Td.write(_+1,f.y),this.Td.write(_+1,f.z),f.x=this.Td.read(_+3),f.y=this.Td.read(_+4),f.z=this.Td.read(_+5),f=s.hp(f),this.Td.write(_+3,f.x),this.Td.write(_+4,f.y),this.Td.write(_+5,f.z);break;case 4:throw c.i.Ra()}}p=s.hp(p),o.write(2*b,p.x),o.write(2*b+1,p.y),u.write(b,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=c.Zc.Qh(1,0),this.mb=c.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.qp=function(s){s.Og=!1,s.vq=this.vq,s.zq=this.zq,s.nb=this.nb!=null?c.ja.Dn(this.nb):null,s.mb=this.mb!=null?c.rn.Dn(this.mb):null,s.Nj=this.Nj!=null?c.ja.Dn(this.Nj):null,s.Se=this.Se!=null?c.rn.Dn(this.Se):null,s.Td=this.Td!=null?c.ce.Dn(this.Td):null,s.uq=this.uq,s.tq=this.tq,s.Cj=this.ck(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var s=this.Ha(),o=new c.Ex(0);s.ab();)for(;s.Ia();)o.add(s.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof a&&h.prototype.Nb.call(this,s)))return!1;var o=this.ea();return!(o!=s.ea()||this.nb!=null&&!this.nb.Nb(s.nb,0,o+1)||this.zq!=s.zq||this.mb!=null&&!this.mb.Nb(s.mb,0,o))&&h.prototype.Nb.call(this,s)},a.prototype.Ha=function(){return new c.TL(this)},a.prototype.dy=function(s){if(h.prototype.dy.call(this,s),this.vm())for(s=this.Ha();s.ab();)s.Ia()},a.prototype.Ap=function(s,o){if(h.prototype.Ap.call(this,s,o),this.vm())for(s=this.Ha();s.ab();)s.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(s){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(s)):(4&this.mb.read(s))!=0)},a.prototype.Kr=function(s){return this.yf?(this.zu(),this.Cj.read(s)):0},a.prototype.zu=function(){if(this.ck(1024)){var s=this.ea();this.Cj==null?this.Cj=new c.ce(s):this.Cj.size!=s&&this.Cj.resize(s),s=new c.Ex(0);for(var o=new c.Ex(0),u=new c.h,p=0,f=this.Ha();f.ab();){for(o.reset(),this.D(this.Ca(f.gb),u);f.Ia();)o.add(f.ia().Sx(u.x,u.y));s.add(o.tm());var m=p++;this.Cj.write(m,o.tm())}this.tq=s.tm(),this.Nf(1024,!1)}},a.prototype.AR=function(){if(this.yf){this.hm();for(var s=this.ea(),o=0;o<s;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.ck(8)){this.zu();var s=this.ea();(this.mb==null||this.mb.size<s)&&(this.mb=c.Zc.Or(s+1));for(var o=1,u=0;u<s;u++){var p=this.Cj.read(u);u==0&&(o=0<p?1:-1),0<p*o?this.mb.uJ(u,4):this.mb.FE(u,4)}this.Nf(8,!1)}},a.prototype.nz=function(s){var o=this.gb,u=this.ea();if(0<=o&&o<u){if(s<this.Wc(o)){if(s>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<u&&s>=this.Ca(o)&&s<this.Wc(o))return this.gb=o}if(5>u){for(o=0;o<u;o++)if(s<this.Wc(o))return this.gb=o;throw c.i.ga("corrupted geometry")}for(o=0,--u;u>o;){var p=o+(u-o>>1);if(s<this.Ca(p))u=p-1;else{if(!(s>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var s=this.I();if(!this.yf){s-=this.ea();for(var o=0,u=this.ea();o<u;o++)this.ec(o)&&s++}return s},a.prototype.tv=function(s){var o=this.Ka(s);return this.ec(s)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.LJ=function(s){this.nb=s,this.Qc(16777215)},a.prototype.QR=function(){return this.vx(),this.Se},a.prototype.ER=function(){return this.vx(),this.mb},a.prototype.KJ=function(s){this.mb=s,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(s){return this.nb.read(s+1)},a.prototype.Ka=function(s){return this.nb.read(s+1)-this.nb.read(s)},a.prototype.Ca=function(s){return this.nb.read(s)},a.prototype.nu=function(s,o){this.Cb==null&&(this.Cb=new c.Wk),o=c.Mx.kW(o);var u=this.Cb.Hk;if(u!=null){if(!(u.Kk<s||o>u.MR()))return!0;this.Cb.tD(null)}return u=c.Mx.create(this,s,o),this.Cb.tD(u),!0},a.prototype.dc=function(){var s=h.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Cn(s,0,o+1),this.mb!=null&&this.mb.Cn(s,0,o)}return s},a.prototype.UF=function(s){return this.Se!=null?this.Se.read(s):1},a.prototype.cc=function(s,o,u){var p=this.nz(s);if(s==this.Wc(p)-1&&!this.ec(p))throw c.i.ga("index out of bounds");this.oc();var f=this.Se,m=1;if(f!=null&&(m=7&f.read(s)),m!==1)throw c.i.Ra();if(o.Qr(),o=o.get(),u?o.Pf(c.fe.pg()):o.Pf(this.description),p=s==this.Wc(p)-1&&this.ec(p)?this.Ca(p):s+1,f=new c.h,this.D(s,f),o.Ec(f),this.D(p,f),o.Rc(f),!u)for(u=1,f=this.description.Ba;u<f;u++){m=this.description.Fd(u);for(var b=c.sa.Wa(m),_=0;_<b;_++){var M=this.Vc(m,s,_);o.TB(m,_,M),M=this.Vc(m,p,_),o.JB(m,_,M)}}},a.prototype.Tj=function(s,o){if(s>=this.ea())throw c.i.O();if(this.B())o.Pa();else{if(this.Av(s))throw c.i.ga("not implemented");var u=this.vb(0),p=new c.h,f=new c.l;f.Pa();var m=this.Ca(s);for(s=this.Wc(s);m<s;m++)u.uc(2*m,p),f.$b(p);o.L(f)}},a.prototype.hj=function(s){return this.Cb==null&&(this.Cb=new c.Wk),!(s==0||16>this.I())&&(s=c.ua.iE(this),this.Cb.RM(s),!0)},a.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new c.Wk),this.Cb.Bo==null){this.Cb.sD(null);var s=c.ua.TN(this);this.Cb.sD(s)}},a.prototype.$o=function(s){this.zq=s},a.prototype.Kn=function(){return this.zq},a.prototype.yD=function(s){if(this==s)throw c.i.ga("MultiPathImpl.add");for(var o=this.ea(),u=0;u<s.ea();u++)this.addPath(s,u,!0),this.xU(o),o++},a.prototype.fO=function(s){var o=this.nz(s),u=this.Ca(o);if(u!=s){if(s>=(o=this.Wc(o))||s<u)throw c.i.ga("change_ring_start_point");for(var p=0,f=this.description.Ba;p<f;p++){var m=this.description.ld(p);m=c.sa.Wa(m),this.Aa[p].rotate(u*m,s*m,o*m)}}},a}(c.Fx);c.Xk=w}(H||(H={})),function(c){var C=function(w){function h(a){var s=w.call(this)||this;if(a!==void 0){if(a==null)throw c.i.O();s.description=a}else s.description=c.fe.pg();return s.xa=0,s}return At(h,w),h.prototype.Ja=function(){return new h(this.description)},h.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},h.prototype.Du=function(a,s){this.resize(this.xa+1);var o=new c.h;o.na(a,s),this.Db(this.xa-1,o)},h.prototype.Gd=function(a,s,o){if(o=0>o?a.I():o,0>s||s>a.I()||o<s)throw c.i.O();if(s!=o){this.Ll(a.description),o-=s;var u=this.xa;this.resize(this.xa+o),this.oc();for(var p=0,f=a.description.Ba;p<f;p++){var m=a.description.Fd(p),b=c.sa.Wa(m),_=this.vb(m);m=a.vb(m),_.On(u*b,m,s*b,o*b,!0,1,u*b)}}},h.prototype.CD=function(a,s){var o=a.length;if(s=0>s?o:s,0>o||0>s)throw c.i.O();if(s!=0){o=s-0,s=this.xa,this.resize(this.xa+o);for(var u=0;u<o;u++)this.Db(s+u,a[0+u])}},h.prototype.yB=function(a){if(0>a||a>=this.I())throw c.i.ga("index out of bounds");this.oc();for(var s=0,o=this.description.Ba;s<o;s++)if(this.Aa[s]!=null){var u=c.sa.Wa(this.description.Fd(s));this.Aa[s].Gn(u*a,u,u*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},h.prototype.resize=function(a){this.fm(a)},h.prototype.qp=function(){},h.prototype.Pa=function(){w.prototype.rD.call(this)},h.prototype.Pc=function(a){if(a instanceof c.Ed){if(this.B())return;this.oc();for(var s=this.Aa[0],o=new c.h,u=0;u<this.xa;u++)o.x=s.read(2*u),o.y=s.read(2*u+1),a.Gh(o,o),s.write(2*u,o.x),s.write(2*u+1,o.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),s=this.Aa[0],o=this.Aa[1];var p=new c.Od;for(u=0;u<this.xa;u++){p.x=s.read(2*u),p.y=s.read(2*u+1),p.z=o.read(u);var f=a.hp(p);s.write(2*u,f.x),s.write(2*u+1,f.y),o.write(u,f.z)}}this.Qc(1993)},h.prototype.Eb=function(){return 0},h.prototype.K=function(){return 550},h.prototype.He=function(){return 0},h.prototype.Rb=function(){return 0},h.prototype.Nb=function(a){return a==this||a instanceof h&&w.prototype.Nb.call(this,a)},h.prototype.gW=function(a,s){var o=this.xa;if(o=Math.min(o,s+1e3),0>s||s>=this.xa||o<s||a.length!=1e3)throw c.i.O();var u=o-s,p=[];for(this.vb(0).Xw(2*s,2*u,p,0,!0),s=0;s<u;s++)a[s]=c.h.construct(p[2*s],p[2*s+1]);return o},h.prototype.Zx=function(){},h.prototype.ey=function(){},h.prototype.nu=function(){return!1},h.prototype.hj=function(){return!1},h.prototype.ng=function(){return null},h}(c.Fx);c.ee=C}(H||(H={})),function(c){var C;(C=c.dL||(c.dL={}))[C.NotDetermined=0]="NotDetermined",C[C.Structure=1]="Structure",C[C.DegenerateSegments=2]="DegenerateSegments",C[C.Clustering=3]="Clustering",C[C.Cracking=4]="Cracking",C[C.CrossOver=5]="CrossOver",C[C.RingOrientation=6]="RingOrientation",C[C.RingOrder=7]="RingOrder",C[C.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",C[C.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",C[C.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function h(a,s,o){a===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=a,this.Lo=s,this.Mo=o)}return h.prototype.Yt=function(a){this.Lj=a.Lj,this.Lo=a.Lo,this.Mo=a.Mo},h}();c.Nd=w}(H||(H={})),function(c){c.P=function(){function C(){}return C.assert=function(w){if(w===!1)throw c.i.BK()},C.XJ=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},C.Hu=function(w){var h;h===void 0&&(h=0);for(var a=[],s=0;s<w;s++)a[s]=C.mg(2,h);return a},C.mg=function(w,h){h===void 0&&(h=0);for(var a=[],s=0;s<w;s++)a[s]=h;return a},C.bv=function(w,h){var a,s;for(a===void 0&&(a=0),s===void 0&&(s=w.length-1);a<=s;a++)w[a]=h},C.Tk=function(w,h,a){return w<h?h:w>a?a:w},C.Vh=function(w,h){var a=5381;return((a=((a=((a=h!==void 0?(h<<5)+h+(255&w):(a<<5)+a+(255&w))<<5)+a+(w>>8&255))<<5)+a+(w>>16&255))<<5)+a+(w>>24&255)&2147483647},C.wj=function(){throw Error("Not Implemented")},C.XA=function(w){return C.WT(w)+12345&2147483647},C.SG=function(w){var h=32,a=w%C.Px|0,s=w/C.Px|0;return(h&=63)==0?w:(32>h?(w=a>>>h|s<<32-h,h=s>>h):(w=s>>h-32,h=0<=s?0:-1),h*C.Px+(w>>>0))},C.WT=function(w){var h=1103515245,a=65535&h;return((h-a)*(w|=0)|0)+(a*w|0)|0},C.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},C.MAX_SAFE_INTEGER=Math.pow(2,53)-1,C.MIN_SAFE_INTEGER=-C.MAX_SAFE_INTEGER,C.QC=65536,C.Px=C.QC*C.QC,C}()}(H||(H={})),function(c){var C;(C=c.xL||(c.xL={}))[C.Project=0]="Project",C[C.Union=1]="Union",C[C.Difference=2]="Difference",C[C.Proximity2D=3]="Proximity2D",C[C.Relate=4]="Relate",C[C.Equals=5]="Equals",C[C.Disjoint=6]="Disjoint",C[C.Intersects=7]="Intersects",C[C.Within=8]="Within",C[C.Contains=9]="Contains",C[C.Crosses=10]="Crosses",C[C.Touches=11]="Touches",C[C.Overlaps=12]="Overlaps",C[C.Buffer=13]="Buffer",C[C.Distance=14]="Distance",C[C.Intersection=15]="Intersection",C[C.Clip=16]="Clip",C[C.Cut=17]="Cut",C[C.DensifyByLength=18]="DensifyByLength",C[C.DensifyByAngle=19]="DensifyByAngle",C[C.LabelPoint=20]="LabelPoint",C[C.GeodesicBuffer=21]="GeodesicBuffer",C[C.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",C[C.ShapePreservingDensify=23]="ShapePreservingDensify",C[C.GeodeticLength=24]="GeodeticLength",C[C.GeodeticArea=25]="GeodeticArea",C[C.Simplify=26]="Simplify",C[C.SimplifyOGC=27]="SimplifyOGC",C[C.Offset=28]="Offset",C[C.Generalize=29]="Generalize",C[C.SymmetricDifference=30]="SymmetricDifference",C[C.ConvexHull=31]="ConvexHull",C[C.Boundary=32]="Boundary",C[C.SimpleRelation=33]="SimpleRelation";var w=function(){function h(){}return h.prototype.K=function(){return null},h.prototype.yn=function(){},h.prototype.Ku=function(){return!1},h}();c.Ge=w}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 13},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p){return a instanceof c.ba?(p=new c.$c(a),this.W(p,s,[o],!1,u).next()):u===!0?(o=new c.wC(a,s,o,!1,p),c.Ih.local().W(o,s,p)):new c.wC(a,s,o,!1,p)},h.instance=null,h}(c.Ge);c.vC=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o,u){this.za=-1,this.Sd=h,this.Vz=a,this.Es=s,this.nT=new c.l,this.nT.Pa(),this.ho=-1,this.Vb=u}return w.prototype.next=function(){for(var h;(h=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(h,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.buffer=function(h,a){return c.CK.buffer(h,a,this.Vz,NaN,96,this.Vb)},w.prototype.re=function(){},w}();c.wC=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 16},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u).next()):new c.gL(a,s,o,u)},h.instance=null,h}(c.Ge);c.fL=C}(H||(H={})),function(c){var C=function(){function w(h,a,s){if(this.za=-1,h==null)throw c.i.O();this.aa=a,this.Ak=h,this.ra=c.ua.Xd(s,a,!1)}return w.prototype.next=function(){var h;return(h=this.Ak.next())!=null?(this.za=this.Ak.Ma(),c.Vd.clip(h,this.aa,this.ra,0)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.gL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 31},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o){return a instanceof c.ba?c.yC.mE(a):new c.yC(s,a,o)},h.instance=null,h}(c.Ge);c.xC=C}(H||(H={})),function(c){var C=function(){function w(h,a,s){if(this.pA=new c.au,this.za=-1,a==null)throw c.i.O();this.YG=h,this.Jc=!1,this.Ak=a,this.Vb=s}return w.prototype.next=function(){if(this.YG){if(!this.Jc){var h=this.ZN(this.Ak);return this.Jc=!0,h}return null}if(!this.Jc){if((h=this.Ak.next())!=null)return this.za=this.Ak.Ma(),w.mE(h);this.Jc=!0}return null},w.prototype.Ma=function(){return this.za},w.prototype.ZN=function(h){for(var a;(a=h.next())!=null;)this.pA.Ib(a);return this.pA.YQ()},w.prototype.re=function(){if(!this.Jc){if(!this.YG)throw c.i.ga("Invalid call for non merging convex hull.");var h=this.Ak.next();if(h==null)throw c.i.ga("Expects a non-null geometry.");this.pA.Ib(h)}},w.mE=function(h){if(w.QS(h))return h;var a=h.K();if(c.Xk.zd(a))return(a=new c.Ua(h.description)).pc(h,!0),a;if(a==550&&h.I()==2){var s=new c.Ta;return a=new c.Ua(h.description),h.we(0,s),a.nf(s),h.we(1,s),a.lineTo(s),a}return c.au.MO(h)},w.QS=function(h){if(h.B())return!0;var a=h.K();return a==33||a==197||!c.Xk.zd(a)&&(a==550?h.I()==1:a==1607?h.ea()==1&&2>=h.I():h.ea()==1&&(2>=h.I()||c.au.EG(h,0)))},w}();c.yC=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 17},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p){return new c.iL(a,s,o,u,p)},h.instance=null,h}(c.Ge);c.hL=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o,u){if(this.Vf=null,a==null||s==null)throw c.i.ga("invalid argument");this.kT=h,this.iA=a,this.gH=s,h=c.ua.ov(a,s),this.ra=c.ua.Xd(o,h,!0),this.fH=-1,this.od=u}return w.prototype.Ma=function(){return 0},w.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},w.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},w.prototype.OQ=function(){var h=new c.Ua,a=new c.Ua,s=new c.Ua;this.Vf.push(h),this.Vf.push(a);var o=[];c.GK.EK(this.kT,this.iA,this.gH,this.ra,o,this.od);for(var u=0;u<o.length;u++){var p=o[u];if(p.ct==0)h.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Vf.push(p.Y);else{if(p.ct!=4)throw c.i.ga("internal");s.add(p.Y,!1)}}s.B()||h.B()&&a.B()&&!(3<=this.Vf.length)||this.Vf.push(s),h.B()&&a.B()&&3>this.Vf.length&&(this.Vf.length=0)},w.prototype.NQ=function(){var h=new c.ja(0),a=new c.hd,s=a.WE(),o=a.Ib(this.iA),u=a.Ib(this.gH),p=new c.Hg;try{p.Gt(a,this.ra,this.od),p.fl(s,o,u,h);var f=a.Ke(o),m=new c.Ea,b=new c.Ea;for(this.Vf.length=0,this.Vf.push(m),this.Vf.push(b),o=0;o<h.size;o++){var _=new c.hd,M=_.Ib(f),T=_.Ib(a.Ke(h.get(o)));p.fr(_,this.od);var A=p.Cv(M,T),O=_.Ke(A);if(!O.B()){var R=a.FF(h.get(o),s);R==2?m.add(O,!1):R==1?b.add(O,!1):this.Vf.push(O);var j=new c.hd;M=j.Ib(f),T=j.Ib(a.Ke(h.get(o))),p.fr(j,this.od),f=j.Ke(p.km(M,T))}}!f.B()&&0<h.size&&this.Vf.push(f),m.B()&&b.B()&&(this.Vf.length=0)}finally{p.Wg()}},w.prototype.re=function(){},w}();c.iL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o){if(a instanceof c.ba)return a=new c.$c(a),this.W(a,s,o).next();if(0>=s)throw c.i.O();return new c.jL(a,s,o)},h.instance=null,h}(c.Ge);c.Zl=C}(H||(H={})),function(c){var C=function(){function w(h,a){this.za=-1,this.Sd=h,this.Rs=a}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){var h;return(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(h)):null},w.prototype.IP=function(h){if(h.B()||1>h.Eb())return h;var a=h.K();if(a==1736||a==1607)return this.Iy(h);if(c.ba.zd(a))return this.KP(h);if(a==197)return this.JP(h);throw c.i.Ra()},w.prototype.KP=function(h){if(h.Rb()<=this.Rs)return h;var a=new c.Ua(h.description);return a.pc(h,!0),this.Iy(a)},w.prototype.JP=function(h){var a=new c.Ea(h.description);a.bd(h,!1);var s=new c.l;return h.A(s),h=s.da(),s.S()<=this.Rs&&h<=this.Rs?a:this.Iy(a)},w.prototype.Iy=function(h){for(var a=h.Ja(),s=h.Ha();s.ab();)for(var o=!0;s.Ia();){var u=s.ia();if(u.K()!=322)throw c.i.ga("not implemented");var p=s.Qn(),f=u.Rb();if(f>this.Rs){var m=Math.ceil(f/this.Rs);f=new c.Ta(h.description),o&&(u.Vo(f),a.nf(f));var b=o=1/m,_=0;for(--m;_<m;_++)u.Vw(b,f),a.lineTo(f),b+=o;p?a.Cp():(u.Ro(f),a.lineTo(f))}else p?a.Cp():a.pc(u,o);o=!1}return a},w.prototype.re=function(){},w}();c.jL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.K=function(){return 2},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),s=new c.$c(s),this.W(a,s,o,u).next()):new c.kL(a,s,o,u)},h.km=function(a,s,o,u){if(a.B()||s.B())return a;var p=a.Eb(),f=s.Eb();if(p>f)return a;var m=a.K(),b=s.K(),_=new c.l,M=new c.l,T=new c.l;a.A(_),s.A(M),T.L(_),T.$b(M);var A=(T=c.ua.Xd(o,T,!0))*Math.sqrt(2)*1.00001,O=new c.l;if(O.L(_),O.X(A,A),!O.isIntersecting(M))return a;if(p==1&&f==2)return h.FV(a,s,b,o,u);if(m==33)switch(c.Xk.zd(b)?(o=new c.Ua(s.description),o.pc(s,!0)):o=s,b){case 1736:return h.SU(a,o,T);case 1607:return h.TU(a,o,T);case 550:return h.QU(a,o,T);case 197:return h.PU(a,o,T);case 33:return h.RU(a,o,T);default:throw c.i.O()}else if(m==550)switch(b){case 1736:return h.iU(a,s,T);case 197:return h.gU(a,s,T);case 33:return h.hU(a,s,T)}return c.Hg.km(a,s,o,u)},h.SU=function(a,s,o){return c.jd.FG(s,a,o)==0?a:a.Ja()},h.TU=function(a,s,o){var u=a.D();s=s.Ha();for(var p=o*Math.sqrt(2)*1.00001,f=p*p,m=new c.l;s.ab();)for(;s.Ia();){var b=s.ia();if(b.A(m),m.X(p,p),m.contains(u)){if(b.ss(u,o))return a.Ja();var _=b.bc();if(c.h.zc(u,_)<=f||(_=b.xc(),c.h.zc(u,_)<=f))return a.Ja()}}return a},h.QU=function(a,s,o){var u=s.vb(0);s=s.I();var p=a.D(),f=new c.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var m=0;m<s;m++)if(u.uc(2*m,f),c.h.zc(f,p)<=o)return a.Ja();return a},h.PU=function(a,s,o){var u=new c.l;return s.A(u),u.X(o,o),s=a.D(),u.contains(s)?a.Ja():a},h.RU=function(a,s,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D();return s=s.D(),c.h.zc(u,s)<=o?a.Ja():a},h.iU=function(a,s,o){var u=new c.l;s.A(u),u.X(o,o);for(var p=a.I(),f=!1,m=[],b=0;b<p;b++)m[b]=!1;var _=new c.h;for(b=0;b<p;b++)a.D(b,_),u.contains(_)&&c.jd.Zd(s,_,o)!=0&&(f=!0,m[b]=!0);if(!f)return a;for(s=a.Ja(),b=0;b<p;b++)m[b]||s.Gd(a,b,b+1);return s},h.gU=function(a,s,o){var u=new c.l;s.A(u),u.X(o,o),s=a.I();var p=!1;o=[];for(var f=0;f<s;f++)o[f]=!1;var m=new c.h;for(f=0;f<s;f++)a.D(f,m),u.contains(m)&&(p=!0,o[f]=!0);if(!p)return a;for(u=a.Ja(),f=0;f<s;f++)o[f]||u.Gd(a,f,f+1);return u},h.hU=function(a,s,o){var u=a.vb(0),p=a.I(),f=s.D(),m=new c.h,b=!1;s=[];for(var _=0;_<p;_++)s[_]=!1;for(o=(_=o*Math.sqrt(2)*1.00001)*_,_=0;_<p;_++)u.uc(2*_,m),c.h.zc(m,f)<=o&&(b=!0,s[_]=!0);if(!b)return a;for(u=a.Ja(),_=0;_<p;_++)s[_]||u.Gd(a,_,_+1);return u},h.FV=function(a,s,o,u,p){var f=new c.Hh;a.dn(f);var m=new c.l;return s.A(m),f.$b(m),f.X(.1*f.S(),.1*f.da()),(m=new c.Ea).bd(f,!1),o==1736?m.add(s,!0):m.bd(s,!0),c.Zj.local().W(a,m,u,p)},h.instance=null,h}(c.Ge);c.mp=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o){this.vs=a==null,this.za=-1,this.Sd=h,this.Vz=s,this.rT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.mp.km(h,this.rT,this.Vz,this.Vb)):null;var h},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.kL=C}(H||(H={})),function(c){var C=function(){function h(a){this.od=a,this.Dj=new c.l,this.Dj.Pa(),this.qh=new c.l,this.qh.Pa()}return h.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},h.prototype.$P=function(a,s){if(this.od!=null&&!this.od.progress(-1,-1))throw c.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return c.ba.Ic(a.K())&&c.ba.Ic(s.K())?a.I()>s.I()?this.bE(a,s,o):(this.Pt(),a=this.bE(s,a,o),this.Pt(),a):a.K()==550&&c.ba.Ic(s.K())?(a=this.cE(s,a,o),this.Pt(),a):s.K()==550&&c.ba.Ic(a.K())?this.cE(a,s,o):a.K()==550&&s.K()==550?a.I()>s.I()?this.dE(a,s):(this.Pt(),a=this.dE(s,a),this.Pt(),a):0},h.prototype.bE=function(a,s,o){var u=a.Ha(),p=s.Ha(),f=new c.l,m=new c.l,b=17976931348623157e292;if(!o&&this.lY(a,s,u,p))return 0;for(;u.ab();)for(;u.Ia();)if((a=u.ia()).A(f),!(f.px(this.qh)>b)){for(;p.ab();)for(;p.Ia();)if((s=p.ia()).A(m),f.px(m)<b&&(s=a.ub(s,o),(s*=s)<b)){if(s==0)return 0;b=s}p.aj()}return Math.sqrt(b)},h.prototype.cE=function(a,s,o){var u=a.Ha(),p=new c.l,f=17976931348623157e292,m=new c.h,b=s.I();for(o=!o&&a.K()==1736;u.ab();)for(;u.Ia();){var _=u.ia();if(_.A(p),!(1<b&&p.px(this.qh)>f)){for(var M=0;M<b;M++){if(s.D(M,m),o&&c.jd.Zd(a,m,0)!=0)return 0;var T=_.ge(m,!1);if(m.sub(_.ic(T)),(T=m.Uk())<f){if(T==0)return 0;f=T}}o=!1}}return Math.sqrt(f)},h.prototype.dE=function(a,s){for(var o,u=17976931348623157e292,p=new c.h,f=new c.h,m=a.I(),b=s.I(),_=0;_<m;_++)if(a.D(_,p),!(1<b&&this.qh.dK(p)>u)){for(var M=0;M<b;M++)if(s.D(M,f),(o=c.h.zc(p,f))<u){if(o==0)return 0;u=o}}return Math.sqrt(u)},h.prototype.lY=function(a,s,o,u){if(a.K()==1736){for(;u.ab();)if(u.Ia()){var p=u.ia();if(c.jd.Zd(a,p.xc(),0)!=0)return!0}u.aj()}if(s.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),c.jd.Zd(s,a.xc(),0)!=0))return!0;o.aj()}return!1},h.prototype.im=function(a,s){return a.B()||s.B()?NaN:(a.A(this.Dj),s.A(this.qh),this.$P(a,s))},h}(),w=function(h){function a(){return h!==null&&h.apply(this,arguments)||this}return At(a,h),a.prototype.W=function(s,o,u){if(s==null||o==null)throw c.i.O();if(s.B()||o.B())return NaN;var p=s.K(),f=o.K();if(p==33){if(f==33)return c.h.ub(s.D(),o.D());if(f==197)return u=new c.l,o.A(u),u.ub(s.D());(p=new c.ee).add(s),s=p}else if(p==197){if(f==197)return f=new c.l,s.A(f),u=new c.l,o.A(u),u.ub(f);(p=new c.Ea).bd(s,!1),s=p}return f==33?((f=new c.ee).add(o),o=f):f==197&&((f=new c.Ea).bd(o,!1),o=f),new C(u).im(s,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(c.Ge);c.lL=w}(H||(H={})),function(c){var C=function(){function w(h,a,s,o){this.uH=h,this.yH=a,this.od=o,this.VG=s}return w.prototype.next=function(){var h=this.uH.next();return h==null?null:this.uC(h)},w.prototype.Ma=function(){return this.uH.Ma()},w.prototype.uC=function(h){var a=h.K();if(c.ba.Tn(a))return h;if(a==197)return(a=new c.Ea(h.description)).bd(h,!1),this.uC(a);if(h.B())return h;if(h==null)throw c.i.Ra();a=h.Ja();for(var s=new c.zb,o=0,u=h.ea();o<u;o++)this.OK(h,o,a,s);return a},w.prototype.OK=function(h,a,s,o){if(!(2>h.Ka(a))){var u=h.Ca(a),p=h.Wc(a)-1,f=h.vb(0),m=h.ec(a),b=new c.ja(0);b.Jb(h.Ka(a)+1);var _=new c.ja(0);for(_.Jb(h.Ka(a)+1),b.add(m?u:p),b.add(u),u=new c.h;1<b.size;){var M=b.Gc();b.Jf();var T=b.Gc();h.D(M,u),o.Ec(u),h.D(T,u),o.Rc(u),0<=(T=this.NK(o,u,f,M,T,p))?(b.add(T),b.add(M)):_.add(M)}if(m||_.add(b.get(0)),_.size==b.size)s.addPath(h,a,!0);else if(2<=_.size&&(!this.VG||_.size!=2||!(m||c.h.ub(h.Oa(_.get(0)),h.Oa(_.get(1)))<=this.yH))){for(a=new c.Ta,o=0,p=_.size;o<p;o++)h.we(_.get(o),a),o==0?s.nf(a):s.lineTo(a);m&&(this.VG||_.size!=2||s.lineTo(a),s.Cp())}}},w.prototype.NK=function(h,a,s,o,u,p){var f=u-1;for(u<=o&&(f=p),p=u=-1,o+=1;o<=f;o++){s.uc(2*o,a);var m=a.x,b=a.y;h.ic(h.ge(a,!1),a),a.x-=m,a.y-=b,(m=a.length())>this.yH&&m>p&&(u=o,p=m)}return u},w.prototype.re=function(){},w}();c.mL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 29},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u).next()):new c.mL(a,s,o,u)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(c.Ge);c.zC=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 21},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p,f,m,b){return a instanceof c.ba?(b=new c.$c(a),this.W(b,s,o,[u],p,f,!1,m).next()):m===!0?(o=new c.BC(a,s,o,u,p,!1,!1,b),c.Ih.local().W(o,s,b)):new c.BC(a,s,o,u,p,!1,!1,b)},h.instance=null,h}(c.Ge);c.AC=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o,u,p,f,m){if(p)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=h,this.wg=a,this.Ae=s,this.Es=o,this.bo=u,this.ho=-1,this.Vb=m,this.oT=new c.l,this.oT.Pa()}return w.prototype.next=function(){for(var h;(h=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(h,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.VQ=function(h,a){return c.QK.buffer(h,this.wg,this.Ae,a,this.bo,this.Vb)},w.prototype.re=function(){},w}();c.BC=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 24},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o){if(s==null)throw c.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw c.i.Fe();var u=c.cb.tc(s),p=c.cb.xv(u),f=c.cb.gv(u);p*=2-p;var m=u.Id().ci,b=a.K();if(b==1736||b==197)var _=a.ng();else c.ba.zd(b)?(_=new c.Ua(a.description)).pc(a,!0):_=a;if(u.Nb(s)==0){if(c.cb.Xc(s)){_=c.Jh.nj(_,s),b==1607&&_==a&&(_=c.ba.kg(a)),a=new c.Oc,c.cb.ih(s).en(a),b=0;for(var M=_.I();b<M;b++){var T=_.Oa(b);T.x=c.Jh.an(T.x,a),_.Db(b,T)}}a=_.Ja(),_=c.Jh.RI(s,u,_,a)?a:c.cb.Bh(_,s,u)}return this.cQ(_,o,f,p,m)},h.prototype.cQ=function(a,s,o,u,p){var f=new c.ha(0),m=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var b=a.ia(),_=b.bc();b=b.xc(),_.scale(p),b.scale(p),c.kb.xd(o,u,_.x,_.y,b.x,b.y,f,null,null,s),m+=f.u}return m},h.instance=null,h}(c.Ge);c.qL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 18},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u,p).next()):new c.oL(a,o,u,s,-1,-1,p)},h.instance=null,h}(c.Ge);c.nL=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o,u,p){if(0<p||s!=4&&0<u)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=h,this.wg=a,this.Ae=s,this.yT=o,this.xT=u}return w.prototype.next=function(){for(var h;(h=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(h);return null},w.prototype.Ma=function(){return this.za},w.prototype.Uy=function(h){return c.ej.Sr(h,this.wg,this.Ae,this.yT,this.xT,this.Vb)},w.prototype.re=function(){},w}();c.oL=C}(H||(H={})),function(c){(function(C){C[C.Unknown=0]="Unknown",C[C.Contains=1]="Contains",C[C.Within=2]="Within",C[C.Equals=3]="Equals",C[C.Disjoint=4]="Disjoint",C[C.Touches=8]="Touches",C[C.Crosses=16]="Crosses",C[C.Overlaps=32]="Overlaps",C[C.NoThisRelation=64]="NoThisRelation",C[C.Intersects=1073741824]="Intersects",C[C.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(c.YK||(c.YK={})),c.rL=function(){function C(){}return C.iW=function(w,h){var a=w.K(),s=h.K();if(c.ba.zj(a)){var o=w.Cb;if(o!=null&&(o=o.Hk)!=null){if(s==33){var u=h.D();o=o.Uo(u.x,u.y)}else u=new c.l,h.A(u),o=o.To(u);if(o==1)return 1;if(o==0)return 4}}if(c.ba.zj(s)&&(o=h.Cb)!=null&&(o=o.Hk)!=null){if(a==33?(w=w.D(),o=o.Uo(w.x,w.y)):(h=new c.l,w.A(h),o=o.To(h)),o==1)return 2;if(o==0)return 4}return 0},C}()}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.K=function(){return 15},h.prototype.W=function(a,s,o,u,p){return a instanceof c.ba?(a=new c.$c(a),s=new c.$c(s),this.W(a,s,o,u,p===void 0?-1:p).next()):p===void 0?new c.CC(a,s,o,u,-1):new c.CC(a,s,o,u,p)},h.prototype.yn=function(a,s,o){this.Ku(a)&&(s=c.ua.mj(s,a,!1),a.hj(o)||a.nu(s,o))},h.prototype.Ku=function(a){return c.Mx.uE(a)},h.instance=null,h}(c.Ge);c.Zj=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o,u){if(this.vs=a==null,this.za=-1,this.Sd=h,this.wg=s,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=u,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw c.i.O("bad dimension mask")}return w.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var h=this.Bw.next();if(h!=null)return h;this.Bw=null}for(;(h=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?h=this.Fa(h):(this.Bw=this.KS(h),h=this.Bw.next()),h;return null},w.prototype.Ma=function(){return this.za},w.prototype.Fa=function(h){var a=this.uK(h);if(a!=null)return a;a=c.ua.ov(this.Pe,h);var s=c.ua.Xd(this.wg,a,!0);a=new c.l,this.Pe.A(a);var o=new c.l;return h.A(o),a.X(2*s,2*s),a.Fa(o),a.X(100*s,100*s),s=c.Vd.clip(this.Pe,a,0,0),h=c.Vd.clip(h,a,0,0),c.Hg.Cv(h,s,this.wg,this.Vb)},w.prototype.KI=function(h,a,s){var o=0;if(1&a)s[0]==null&&(s[0]=new c.ee(h)),o++;else for(var u=0;u<s.length-1;u++)s[u]=s[u+1];if(2&a)s[o]==null&&(s[o]=new c.Ua(h)),o++;else for(u=o;u<s.length-1;u++)s[u]=s[u+1];if(4&a)s[o]==null&&(s[o]=new c.Ea(h)),o++;else for(u=o;u<s.length-1;u++)s[u]=s[u+1];if(o!=3){for(h=[],u=0;u<o;u++)h[u]=s[u];return new c.$c(h)}return new c.$c(s)},w.prototype.KS=function(h){var a=this.uK(h);if(a!=null){var s=[null,null,null];return s[a.Eb()]=a,this.KI(h.description,this.Hi,s)}a=c.ua.ov(this.Pe,h),s=c.ua.Xd(this.wg,a,!0),a=new c.l,this.Pe.A(a),a.X(2*s,2*s);var o=new c.l;return h.A(o),a.Fa(o),a.X(100*s,100*s),s=c.Vd.clip(this.Pe,a,0,0),a=c.Vd.clip(h,a,0,0),s=c.Hg.Kz(a,s,this.wg,this.Vb),this.KI(h.description,this.Hi,s)},w.prototype.uK=function(h){var a=c.ua.ov(h,this.Pe),s=c.ua.Xd(this.wg,a,!0);a=h.K();var o=h.B(),u=this.Pe.B();if(!(u=o||u)){u=new c.l,h.A(u);var p=new c.l;this.Pe.A(p),p.X(2*s,2*s),u=!u.isIntersecting(p)}if(!u)if((p=c.rL.iW(this.Pe,h))==4)u=!0;else{if(2&p)return this.Pe;if(1&p)return h}if(u)return(s=c.ba.uf(a))<(u=c.ba.uf(this.Fj))?w.CB(h,o):s>u||s==0&&a==550&&this.Fj==33?this.iJ():w.CB(h,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return s=this.Pe,a=new c.l,h.A(a),o=new c.l,s.A(o),a.Fa(o),s=new c.Hh,h.copyTo(s),s.Zo(a),s;if(a==197&&c.ba.uf(this.Fj)==0||this.Fj==197&&c.ba.uf(a)==0)return o=a==197?h:this.Pe,h=a==197?this.Pe:h,a=new c.l,o.A(a),c.Vd.clip(h,a,s,0);if(c.ba.uf(a)==0&&0<c.ba.uf(this.Fj)||0<c.ba.uf(a)&&c.ba.uf(this.Fj)==0){if(s=c.ua.mj(this.wg,h,!1),a==550||a==33)return c.Hg.uG(h,this.Pe,s);if(this.Fj==550||this.Fj==33)return c.Hg.uG(this.Pe,h,s);throw c.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.rK(this.Pe,h):this.rK(h,this.Pe)},w.prototype.rK=function(h,a){var s=h,o=a,u=c.ua.mj(this.wg,a,!1),p=new c.l;o.A(p);var f=new c.l;s.A(f),f.X(2*u,2*u),p.Fa(f),p.X(10*u,10*u),s=h=c.Vd.clip(h,p,0,0),f=new c.ja(0);var m=-1,b=o.Cb;if(b!=null){var _=b.Hk;if(_!=null){m=0,f.Jb(s.I()+s.ea());for(var M=new c.l,T=s.Ha();T.ab();)for(;T.Ia();){T.ia().A(M);var A=_.To(M);A==1?f.add(1):A==0?f.add(0):(f.add(-1),m++)}}}if(5<a.I()&&(b=(o=a=c.Vd.clip(a,p,0,0)).Cb),0>m&&(m=s.sz()),p=s.I()+o.I(),m*o.I()>Math.log(p)*p*4)return null;p=null,m=o.Ha(),b!=null&&b.Gb!=null&&(p=b.Gb),p==null&&20<o.I()&&(p=c.ua.iE(o)),h=h.Ja(),o=null,b=s.Ha(),_=[0,0,0,0,0,0,0,0,0],M=new c.ce(0),T=new c.jg,A=-1;for(var O=0,R=0,j=0<f.size,z=-1;b.ab();){z=b.gb;var V=0;for(A=-1,O=0;b.Ia();){var F=j?c.P.truncate(f.get(R)):-1;R++;var G=b.ia();if(0>F){if(p!=null)for(o==null?o=p.qR(G,u):o.Wo(G,u),F=o.next();F!=-1;F=o.next()){m.Wb(p.ka(F)),F=m.ia();var Z=G.Fa(F,null,_,null,u);for(F=0;F<Z;F++)M.add(_[F])}else for(m.aj();m.ab();)for(;m.Ia();)for(F=m.ia(),Z=G.Fa(F,null,_,null,u),F=0;F<Z;F++)M.add(_[F]);if(0<M.size){M.Wd(0,M.size,function(ye,pe){return ye-pe});var K=0;M.add(1),Z=-1,F=0;for(var re=M.size;F<re;F++){var te=M.get(F);if(te!=K){var he=!1;if(K!=0||te!=1?(G.dh(K,te,T),K=T.get()):(K=G,he=!0),2<=V){if(h.Fr(s,z,A,O,V==3),this.LD(a,K.bc(),u)!=1&&this.MD(a,K,u)!=1)return null;h.pc(K,!1),V=1,O=0}else switch(Z=this.MD(a,K,u),Z){case 1:he?2>V?(A=b.xb()-s.Ca(z),O=1,V=V==0?3:2):O++:(h.pc(K,V==0),V=1);break;case 0:V=0,A=-1,O=0;break;default:return null}K=te}}}else{if(0>(F=this.LD(a,G.bc(),u)))return null;F==1?(2>V&&(A=b.xb()-s.Ca(z),V=V==0?3:2),O++):(A=-1,O=0)}M.clear(!1)}else F!=0&&F==1&&(V==0?(V=3,A=b.xb()-s.Ca(z)):V==1?(V=2,A=b.xb()-s.Ca(z)):O++)}2<=V&&(h.Fr(s,z,A,O,V==3),A=-1)}return h},w.prototype.LD=function(h,a,s){return c.Fg.ym(h,a,s)},w.prototype.MD=function(h,a,s){var o=a.bc();a=a.xc();var u=c.Fg.ym(h,o,s),p=c.Fg.ym(h,a,s);return u==1&&p==0||u==0&&p==1?-1:u==0||p==0?0:u==1||p==1?1:((u=new c.h).add(o,a),u.scale(.5),(h=c.Fg.ym(h,u,s))==0?0:h==1?1:-1)},w.CB=function(h,a){return a?h:h.Ja()},w.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},w.prototype.re=function(){},w}();c.CC=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 28},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u,p,f,m){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u,p,f,m).next()):new c.sL(a,s,o,u,p,f,m)},h.instance=null,h}(c.Ge);c.DC=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o,u,p,f){this.za=-1,this.Sd=h,this.Oj=a,this.La=s,this.Mi=o,this.xA=u,this.pH=p,this.od=f}return w.prototype.next=function(){var h=this.Sd.next();return h!=null?(this.za=this.Sd.Ma(),this.eL(h)):null},w.prototype.Ma=function(){return this.za},w.prototype.eL=function(h){var a=0>=this.pH?c.ua.mj(this.Oj,h,!1):this.pH;return c.DK.W(h,this.La,this.Mi,this.xA,a,this.od)},w.prototype.re=function(){},w}();c.sL=C}(H||(H={})),function(c){var C;(C=c.IK||(c.IK={}))[C.clipToDomainOnly=1]="clipToDomainOnly",C[C.clipWithHorizon=2]="clipWithHorizon",C[C.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(h){function a(){return h!==null&&h.apply(this,arguments)||this}return At(a,h),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(s,o,u){return s instanceof c.ba?(s=new c.$c(s),this.W(s,o,u).next()):new c.tL(s,o,u)},a.prototype.transform=function(s,o,u,p){return c.du.transform(s,o,u,p,!0)},a.prototype.St=function(s,o,u,p){return c.du.St(s,o,u,p)},a.instance=null,a}(c.Ge);c.Gx=w}(H||(H={})),function(c){var C=function(){function w(h,a,s){this.za=-1,this.Sd=h,this.HT=a,this.od=s}return w.prototype.next=function(){var h=this.Sd.next();return h!=null?(this.za=this.Sd.Ma(),c.du.Bh(h,this.HT,this.od)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.tL=C}(H||(H={})),function(c){var C=function(){function h(){}return h.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},h.prototype.vQ=function(a,s,o){for(a.Wb(s,o);a.Ia();){var u=a.ia();if((u=u.Rb())!=0)return a.xb()}for(a.Wb(s,o);a.zz();)if((u=(u=a.ni()).Rb())!=0)return a.xb();return-1},h.prototype.wQ=function(a,s){for(a.Wb(s,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},h.prototype.uQ=function(a,s){for(a.Wb(s,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},h.prototype.tQ=function(a,s,o,u){if(this.zk=this.vQ(s,o,u),this.zk!=-1){s.Wb(this.zk,-1);var p=s.ia(),f=p.ic(p.ge(a,!1));if(o=c.h.zc(f,a),(u=new c.h).N(f),u.sub(p.bc()),(f=new c.h).N(a),f.sub(p.bc()),this.mq=0>u.yi(f),this.rh=this.uQ(s,this.zk),this.rh!=-1){s.Wb(this.rh,-1);var m=(p=s.ia()).ge(a,!1);m=p.ic(m);var b=c.h.zc(m,a);b>o?this.rh=-1:(u.N(m),u.sub(p.bc()),f.N(a),f.sub(p.bc()),this.ws=0>u.yi(f))}this.rh==-1&&(this.rh=this.wQ(s,this.zk),this.rh!=-1&&(s.Wb(this.rh,-1),m=(p=s.ia()).ge(a,!1),m=p.ic(m),(b=c.h.zc(m,a))>o?this.rh=-1:(u.N(m),u.sub(p.bc()),f.N(a),f.sub(p.bc()),this.ws=0>u.yi(f),a=this.zk,this.zk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},h.prototype.YN=function(a,s,o,u,p){return o=o.Ha(),this.tQ(a,o,u,p),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.zk,-1),a=o.ia().lg(),o.Wb(this.rh,-1),s=o.ia().lg(),0<=a.yi(s)):s},h}(),w=function(h){function a(){return h!==null&&h.apply(this,arguments)||this}return At(a,h),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(s,o,u){var p;if(p===void 0&&(p=!1),s.B())return new c.bm;o=o.D();var f=s,m=s.K();switch(m==197&&((f=new c.Ea).bd(s,!1),m=1736),m){case 33:return this.sI(f,o);case 550:return this.eI(f,o);case 1607:case 1736:return this.XT(f,o,u,p);default:throw c.i.ga("not implemented")}},a.prototype.jz=function(s,o){if(s.B())return new c.bm;o=o.D();var u=s,p=s.K();switch(p==197&&((u=new c.Ea).bd(s,!1),p=1736),p){case 33:return this.sI(u,o);case 550:case 1607:case 1736:return this.eI(u,o);default:throw c.i.ga("not implemented")}},a.prototype.kz=function(s,o,u,p){if(0>p)throw c.i.O();if(s.B())return[];o=o.D();var f=s,m=s.K();switch(m==197&&((f=new c.Ea).bd(s,!1),m=1736),m){case 33:return this.OU(f,o,u,p);case 550:case 1607:case 1736:return this.oU(f,o,u,p);default:throw c.i.ga("not implemented")}},a.prototype.XT=function(s,o,u,p){if(s.K()==1736&&u&&(u=new c.l,s.A(u),u=c.ua.Xd(null,u,!1),(p?c.jd.Zd(s,o,0):c.jd.Zd(s,o,u))!=0)){var f=new c.bm(o,0,0);return p&&f.RJ(!0),f}var m=s.Ha();f=new c.h;for(var b=u=-1,_=17976931348623157e292,M=0;m.ab();)for(;m.Ia();){var T=m.ia();T=T.ic(T.ge(o,!1));var A=c.h.zc(T,o);A<_?(M=1,f=T,u=m.xb(),b=m.gb,_=A):A==_&&M++}return f=new c.bm(f,u,Math.sqrt(_)),p&&(m.Wb(u,b),T=m.ia(),p=0>c.h.Wq(o,T.bc(),T.xc()),1<M&&((M=new C).reset(),p=M.YN(o,p,s,u,b)),f.RJ(p)),f},a.prototype.sI=function(s,o){return s=s.D(),o=c.h.ub(s,o),new c.bm(s,0,o)},a.prototype.eI=function(s,o){for(var u=s.vb(0),p=s.I(),f=s=0,m=0,b=17976931348623157e292,_=0;_<p;_++){var M=new c.h;u.uc(2*_,M);var T=c.h.zc(M,o);T<b&&(f=M.x,m=M.y,s=_,b=T)}return(o=new c.bm).by(f,m,s,Math.sqrt(b)),o},a.prototype.OU=function(s,o,u,p){return p==0?[]:(u*=u,s=s.D(),(o=c.h.zc(s,o))<=u?(u=[],(p=new c.bm).by(s.x,s.y,0,Math.sqrt(o)),u[0]=p):u=[],u)},a.prototype.oU=function(s,o,u,p){if(p==0)return[];var f=s.vb(0),m=s.I();s=[],u*=u;for(var b=0;b<m;b++){var _=f.read(2*b),M=f.read(2*b+1),T=o.x-_,A=o.y-M;(T=T*T+A*A)<=u&&((A=new c.bm).by(_,M,b,Math.sqrt(T)),s.push(A))}return o=s.length,s.sort(function(O,R){return O.La<R.La?-1:O.La==R.La?0:1}),p>=o||(s.length=p),s.slice(0)},a.instance=null,a}(c.Ge);c.Hx=w}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 4},h.prototype.W=function(a,s,o,u,p){return c.cm.tB(a,s,o,u,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Ku=function(a){return c.Xt.ry(a)},h.prototype.yn=function(a,s,o){c.Xt.xD(a,s,o)},h.instance=null,h}(c.Ge);c.uL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 33},h.prototype.W=function(a,s,o,u,p){return a===1073741824?!c.vd.uB(s,o,u,4,p):c.vd.uB(s,o,u,a,p)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.Ku=function(a){return c.Xt.ry(a)},h.prototype.yn=function(a,s,o){c.Xt.xD(a,s,o)},h.instance=null,h}(c.Ge);c.fj=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o){if(this.od=o,this.lT=s,this.za=-1,h==null)throw c.i.O();this.Ak=h,this.Oj=a}return w.prototype.next=function(){var h;if((h=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw c.i.hu("user_canceled");return this.$B(h)}return null},w.prototype.Ma=function(){return this.za},w.prototype.$B=function(h){if(h==null)throw c.i.O();return c.Ix.YJ(h,this.Oj,this.lT,this.od)},w.prototype.re=function(){},w}();c.vL=C}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 26},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),this.W(a,s,o,u).next()):new c.vL(a,s,o,u)},h.prototype.ts=function(a,s,o,u,p){return 0<(u!==void 0?c.Ix.ts(a,s,o,u,p):c.Ix.ts(a,s,!1,null,o))},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(c.Ge);c.$l=C}(H||(H={})),function(c){var C=function(){function p(){this.Aq=0}return p.prototype.iX=function(f){this.Aq&=-2,this.Aq|=f?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.SF=function(){return this.Yp()?0:1},p}();c.tY=C;var w=function(){},h=function(p,f,m,b){this.x=p,this.y=f,this.Ci=m,this.zm=b},a=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,m,b){return f=f.ka(b),m=this.Ce.lf.read(2*m),0>(m-=f=this.Ce.lf.read(2*f))?-1:0<m?1:0},p}(),s=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,m,b){m=this.Ce.hb[m],f=this.Ce.hb[f.ka(b)];var _=m.Yp(),M=f.Yp();b=m.oe.Me(this.Ce.Oo,0);var T=f.oe.Me(this.Ce.Oo,0);return b==T&&((_=.5*((b=Math.min(_?m.oe.oa:m.oe.ma,M?f.oe.oa:f.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(_=b),b=m.oe.Me(_,0),T=f.oe.Me(_,0)),b<T?-1:b>T?1:0},p}(),o=function(){function p(f,m){this.TI=new c.h,this.parent=f,this.ZR=m}return p.prototype.qr=function(f,m,b){var _=this.parent,M=this.ZR;b.Wd(f,m,function(T,A){return _.Oh(T,A,M)})},p.prototype.bq=function(f){return f=this.parent.ii.get(f),this.parent.lf.uc(2*(f>>1),this.TI),this.TI.y+(1&f?this.parent.Qj:-this.parent.Qj)},p}(),u=function(){function p(f,m,b,_,M){this.iH=f.description,this.Y=f,this.Sg=m,this.Qj=c.ua.mj(this.Sg,f,!1),this.Do=c.ua.mj(this.Sg,f,!0),this.sA=b,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new c.lp,this.fb=new c.$j,this.le=new c.Nd,this.UG=this.sl=M}return p.prototype.$S=function(){return this.UG=!0,(!c.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?c.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},p.prototype.fC=function(f,m){var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var _=this.lf.read(2*m);m=this.lf.read(2*m+1);var M=!c.$t.Ev(b,f,_,m,this.Qj*this.Qj);return M||this.Y.Eb()!=0&&b==_&&f==m},p.prototype.BE=function(){for(var f=this.Y,m=f.yf?3:2,b=0,_=f.ea();b<_;b++)if(f.Ka(b)<m)return this.le=new c.Nd(1,b,0),!1;return!0},p.prototype.yE=function(f){var m=this.Y,b=m.Ha(),_=m.hasAttribute(1);for(m=_?c.ua.rE(this.Sg,m,!1):0;b.ab();)for(;b.Ia();){var M=b.ia();if(!(M.Rb()>this.Qj)){if(f&&_){var T=M.yv(1,0);if(M=M.yv(1,0),Math.abs(M-T)>m)continue}return this.le=new c.Nd(2,b.xb(),-1),!1}}return!0},p.prototype.hO=function(){var f=this.Y,m=null;c.ba.Ic(this.Y.K())&&(m=this.Y);var b=(this.UG||this.sl)&&m!=null,_=f.I();this.lf=f.vb(0),this.ii=new c.ja(0),this.ii.Jb(2*_),this.hi=new c.ja(0),this.hi.Jb(2*_),b&&(this.Hl==null&&(this.Hl=new c.ja(0)),this.Hl.Jb(_));for(var M=f=0;M<_;M++)if(this.ii.add(2*M),this.ii.add(2*M+1),this.hi.add(2*M),this.hi.add(2*M+1),b){for(;M>=m.Wc(f);)f++;this.Hl.add(f)}for(new c.Zt().sort(this.hi,0,2*_,new o(this,b)),this.fb.clear(),this.fb.Xo(new a(this)),this.fb.Ee(_),m=0,_*=2;m<_;m++)if(b=this.hi.get(m),b=(f=this.ii.get(b))>>1,(1&f)==0){if(f=this.fb.addElement(b,-1),(M=this.fb.xe(f))!=-1&&!this.fC(this.fb.ka(M),b))return this.le=new c.Nd(3,b,this.fb.ka(M)),!1;var T=this.fb.lb(f);if(T!=-1&&!this.fC(this.fb.ka(T),b))return this.le=new c.Nd(3,b,this.fb.ka(T)),!1}else if(f=this.fb.search(b,-1),M=this.fb.xe(f),T=this.fb.lb(f),this.fb.wd(f,-1),M!=-1&&T!=-1&&!this.fC(this.fb.ka(M),this.fb.ka(T)))return this.le=new c.Nd(3,this.fb.ka(M),this.fb.ka(T)),!1;return!0},p.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},p.prototype.jO=function(){var f=new c.hd;f.Ib(this.Y);var m=new c.Nd;return!c.bu.fI(!1,f,this.Qj,m,this.od)||(m.Lo=f.Va(m.Lo),m.Mo=f.Va(m.Mo),this.le.Yt(m),!1)},p.prototype.iO=function(){var f=this.Y,m=f.Ha();for(f=f.Ha();m.ab();)for(;m.Ia();){var b=m.ia();if(!m.Sn()||!m.VS()){f.wW(m);do for(;f.Ia();){var _=f.ia();if((_=b.Br(_,this.Qj,!0))!=0)return this.le=new c.Nd(_==2?5:4,m.xb(),f.xb()),!1}while(f.ab())}}return!0},p.prototype.nO=function(){var f=this.Y;this.hb.length=0,this.ro.length=0,this.ag=f.Ha(),this.ag.EB();var m=new c.ja(0);m.Jb(10);var b=NaN,_=0,M=0;for(f=2*f.I();M<f;M++){var T=this.hi.get(M);if(!(1&(T=this.ii.get(T)))){T>>=1;var A=this.lf.read(2*T),O=this.lf.read(2*T+1);if(m.size!=0&&(A!=b||O!=_)){if(!this.LI(m))return!1;m!=null&&m.clear(!1)}m.add(T),b=A,_=O}}return!!this.LI(m)},p.prototype.mO=function(){for(var f=this.Y,m=Array(f.ea()),b=0,_=f.ea();b<_;b++)m[b]=f.Pn(b);_=new w;var M=new c.h;b=this.hi.get(0);var T=(b=this.ii.get(b))>>1;this.lf.uc(2*T,M);var A=m[b=this.Hl.get(T)],O=f.Ca(b),R=f.Wc(b)-1;_.gl=T==O||T==R,_.jy=this.sl?!A&&_.gl:_.gl,_.Ci=b,_.x=M.x,_.y=M.y,_.zm=T;for(var j=new w,z=1,V=this.hi.size;z<V;z++)if(b=this.hi.get(z),(1&(b=this.ii.get(b)))==0){T=b>>1,this.lf.uc(2*T,M),(b=this.Hl.get(T))!=_.Ci&&(A=m[b],O=f.Ca(b),R=f.Wc(b)-1);var F=T==O||T==R,G=this.sl?!A&&_.gl:_.gl;if(j.x=M.x,j.y=M.y,j.Ci=b,j.zm=T,j.jy=G,j.gl=F,j.x==_.x&&j.y==_.y){if(this.sl){if(!(j.jy&&_.jy||j.Ci==_.Ci&&(j.gl||_.gl)))return this.le=new c.Nd(8,j.zm,_.zm),!1}else if(!j.gl||!_.gl)return this.le=new c.Nd(5,j.zm,_.zm),!1}b=_,_=j,j=b}return!0},p.prototype.EE=function(){for(var f=this.Y,m=[],b=-1,_=!1,M=0,T=f.ea();M<T;M++)f.Gv(M)&&(_=!1,b++,M<T-1&&(f.Gv(M+1)||(_=!0))),m[M]=_?b:-1;_=new c.h,M=this.hi.get(0);var A=(M=this.ii.get(M))>>1;this.lf.uc(2*A,_),M=this.Hl.get(A),b=new h(_.x,_.y,M,A,m[M]),f=[];var O=1;for(T=this.hi.size;O<T;O++)if(M=this.hi.get(O),(1&(M=this.ii.get(M)))==0){if(A=M>>1,this.lf.uc(2*A,_),M=this.Hl.get(A),(M=new h(_.x,_.y,M,A,m[M])).x==b.x&&M.y==b.y){if(M.Ci==b.Ci)return this.le=new c.Nd(9,M.zm,b.zm),!1;0<=m[M.Ci]&&m[M.Ci]==m[b.Ci]&&(f.length!=0&&f[f.length-1]==b||f.push(b),f.push(M))}b=M}if(f.length==0)return!0;for(M=new c.lp(!0),c.P.bv(m,-1),_=-1,(O=new c.h).Sc(),b=0,T=f.length;b<T;b++){(A=f[b]).x==O.x&&A.y==O.y||(_=M.Rh(0),O.x=A.x,O.y=A.y);var R=m[A.Ci];R==-1&&(R=M.Rh(2),m[A.Ci]=R),M.addElement(R,_),M.addElement(_,R)}for((T=new c.ja(0)).Jb(10),b=M.ke;b!=-1;b=M.lz(b))if(!(1&(f=M.KF(b)))&&2&f){for(f=-1,T.add(b),T.add(-1);0<T.size;){if(_=T.Gc(),T.Jf(),O=T.Gc(),T.Jf(),(1&(A=M.KF(O)))!=0){f=2&A?O:_;break}for(M.aX(O,1|A),A=M.sc(O);A!=-1;A=M.lb(A))(R=M.getData(A))!=_&&(T.add(R),T.add(O))}if(f!=-1){for(M=-1,b=0,T=m.length;b<T;b++)if(m[b]==f){M=b;break}return this.le=new c.Nd(10,M,-1),!1}}return!0},p.prototype.oO=function(){var f=this.Y;if(0>=f.He())return this.le=new c.Nd(6,f.ea()==1?1:-1,-1),0;if(f.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=c.ja.rf(f.ea(),0),this.EA=c.ja.rf(f.ea(),-1);for(var m=-1,b=0,_=0,M=f.ea();_<M;_++){var T=f.Kr(_);if(this.vo.write(_,0>T?0:256),0<T)m=_,b=T;else{if(T==0)return this.le=new c.Nd(6,_,-1),0;if((0>m||b<Math.abs(T))&&(this.le=new c.Nd(7,_,-1),this.sl))return 0;this.EA.write(_,m)}}for(this.et=f.ea(),this.Qm=new c.ja(0),this.Qm.Jb(10),M=f.I(),this.Oo=NaN,(f=new c.ja(0)).Jb(10),this.Sq=c.ja.rf(M,-1),this.Jw=c.ja.rf(M,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new c.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new s(this)),m=0,M*=2;0<this.et&&m<M;m++)if(b=this.hi.get(m),(1&(b=this.ii.get(b)))==0){if(b>>=1,(_=this.lf.read(2*b+1))!=this.Oo&&f.size!=0){if(!this.vt(f))return 0;f!=null&&f.clear(!1)}f.add(b),this.Oo=_}return 0<this.et&&!this.vt(f)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},p.prototype.LI=function(f){if(f.size==1)return!0;for(var m=0,b=f.size;m<b;m++){var _=f.get(m);this.ag.Wb(_);var M=this.ag.ni();this.hb.push(this.Uu(M,_,this.ag.gb,!0)),this.ag.ia(),M=this.ag.ia(),this.hb.push(this.Uu(M,_,this.ag.gb,!1))}var T=this;for(this.hb.sort(function(R,j){return T.SP(R,j)}),(_=this.oh.ke)==-1&&(_=this.oh.Rh(0)),this.oh.hn(this.hb.length),m=0,b=this.hb.length;m<b;m++)this.oh.addElement(_,m);m=!0;for(var A=b=-1;m&&(m=!1,(M=this.oh.sc(_))!=-1);)for(var O=this.oh.lb(M);O!=-1;)if(b=this.oh.getData(M),A=this.oh.getData(O),(b=this.hb[b].Ko)!=(A=this.hb[A].Ko))M=O,O=this.oh.lb(M);else if(m=!0,this.oh.kd(_,M),M=this.oh.xe(O),(O=this.oh.kd(_,O))==-1||M==-1)break;if(m=this.oh.ds(_),this.oh.GE(_),0<m)return this.le=new c.Nd(5,b,A),!1;for(m=0,b=f.size;m<b;m++)this.qB(this.hb[m]);return this.hb.length=0,!0},p.prototype.vt=function(f){for(var m=0,b=f.size;m<b;m++){var _=f.get(m),M=this.Sq.read(_);if(M!=-1){var T=this.fb.ka(M);this.Bj.add(T),this.fb.wd(M,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Sq.write(_,-1)}(M=this.Jw.read(_))!=-1&&(T=this.fb.ka(M),this.Bj.add(T),this.fb.wd(M,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Jw.write(_,-1))}for(m=0,b=f.size;m<b;m++){if(_=f.get(m),this.ag.Wb(_),(M=this.ag.ni()).oa>M.ma){var A=this.ag.xb(),O=this.Uu(M,_,this.ag.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),M=this.fb.addElement(T,-1),this.Sq.read(A)==-1?this.Sq.write(A,M):this.Jw.write(A,M),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(M)}this.ag.ia(),(M=this.ag.ia()).oa<M.ma&&(A=this.ag.kk(),O=this.Uu(M,_,this.ag.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),M=this.fb.addElement(T,-1),this.Sq.read(A)==-1?this.Sq.write(A,M):this.Jw.write(A,M),!(3&this.vo.read(this.ag.gb))&&this.Qm.add(M))}for(m=0,b=this.Qm.size;m<b&&0<this.et;m++)if(M=this.Qm.get(m),(3&this.vo.read(this.hb[this.fb.ka(M)].DA))==0){f=-1,_=this.fb.xe(M);var R=M;O=null,T=-1;for(var j=0;_!=-1&&(T=this.fb.ka(_),T=(O=this.hb[T]).DA,(3&(j=this.vo.read(T)))==0);)R=_,_=this.fb.xe(_);_==-1?(A=1,_=R):(f=(3&j)==1?T:this.EA.read(T),A=O.SF()!=0?0:1,_=this.fb.lb(_));do{if(T=this.fb.ka(_),T=(O=this.hb[T]).DA,(3&(R=this.vo.read(T)))==0){if(A!=O.SF())return this.le=new c.Nd(6,T,-1),!1;if(R=252&R|(j=A==0||O.Yp()?2:1),this.vo.write(T,j),j==2&&this.le.Lj==0&&this.EA.read(T)!=f&&(this.le=new c.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&R)==1&&(f=T),R=_,_=this.fb.lb(_),A=A!=0?0:1}while(R!=M)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new c.ja(0),!0},p.prototype.Uu=function(f,m,b,_){if(f.K()!=322)throw c.i.Ra();return(f=this.nP(f)).Ko=m,f.DA=b,f.Aq=0,f.iX(_),f},p.prototype.nP=function(f){if(0<this.ro.length){var m=this.ro[this.ro.length-1];--this.ro.length,f.copyTo(m.oe)}else(m=new C).oe=c.NC.kg(f);return m},p.prototype.qB=function(f){f.oe.K()==322&&this.ro.push(f)},p.prototype.fU=function(){for(var f=this.Y.I(),m=new c.ja(0),b=0;b<f;b++)m.add(b);var _=this;for(m.Wd(0,f,function(M,T){return _.Qu(M,T)}),b=1;b<f;b++)if(this.Qu(m.get(b-1),m.get(b))==0)return this.le=new c.Nd(3,m.get(b-1),m.get(b)),0;return 2},p.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},p.prototype.jV=function(){return this.$S()},p.prototype.kU=function(){for(var f=this.Y.I(),m=new c.ja(0),b=0;b<f;b++)m.add(b);var _=this;m.Wd(0,f,function(R,j){return _.KO(R,j)});var M=Array(f);for(c.P.bv(M,!1),M[m.get(0)]=!0,b=1;b<f;b++){var T=m.get(b-1),A=m.get(b);this.Qu(T,A)==0?M[A]=!1:M[A]=!0}m=this.Y.Ja(),T=this.Y,A=0;var O=1;for(b=0;b<f;b++)M[b]?O=b+1:(A<O&&m.Gd(T,A,O),A=b+1);return A<O&&m.Gd(T,A,O),m.Eh(2,this.Do),m},p.prototype.IV=function(){var f=this.Y,m=f.Ha(),b=f.Ha(),_=this.Y.Ja(),M=this.Y,T=f.hasAttribute(1),A=T?c.ua.rE(this.Sg,f,!0):0,O=new c.ja(0),R=new c.ja(0);for(O.Jb(c.P.truncate(f.I()/2+1)),R.Jb(c.P.truncate(f.I()/2+1));m.ab();)if(b.ab(),!(2>f.Ka(m.gb))){b.yW();for(var j,z,V=!0;m.Ia();){var F=m.ia(),G=b.ni();if(m.xb()>b.xb())break;V&&(O.add(m.xb()),R.add(b.kk()),V=!1),z=O.Gc();var Z=m.kk();if(1<Z-z){var K=new c.h;K.vc(f.Oa(z),f.Oa(Z)),j=K.length()}else j=F.Rb();z=R.Gc(),1<(Z=b.xb())-z?((K=new c.h).vc(f.Oa(z),f.Oa(Z)),z=K.length()):z=G.Rb(),j>this.Do?O.add(m.kk()):T&&(j=f.Vc(1,O.Gc(),0),F=F.jv(1,0),Math.abs(F-j)>A&&O.add(m.kk())),z>this.Do?R.add(b.xb()):T&&(j=f.Vc(1,R.Gc(),0),F=G.jv(1,0),Math.abs(F-j)>A&&R.add(b.xb()))}if(O.Gc()<R.Gc()?O.size>R.size?O.Jf():R.Jf():(O.Gc()!=R.Gc()&&R.Jf(),R.Jf()),2<=R.size+O.size){for(V=new c.Ta,G=0,F=O.size;G<F;G++)M.we(O.get(G),V),G==0?_.nf(V):_.lineTo(V);for(G=R.size-1;0<G;G--)M.we(R.get(G),V),_.lineTo(V);M.ec(m.gb)?_.Cp():0<R.size&&(M.we(R.get(0),V),_.lineTo(V))}O!=null&&O.clear(!1),R!=null&&R.clear(!1)}return _.Eh(2,this.Do),_},p.prototype.mV=function(){return this.zX()},p.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?c.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new c.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&c.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&c.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},p.ts=function(f,m,b,_,M){if(_!=null&&(_.Lj=0,_.Lo=-1,_.Mo=-1),f.B())return 1;var T=f.K();if(T==33)return 1;var A=c.ua.mj(m,f,!1);if(T==197)return m=new c.l,f.A(m),m.Di(A)?(_!=null&&(_.Lj=2,_.Lo=-1,_.Mo=-1),0):1;if(c.ba.zd(T))return(A=new c.Ua(f.description)).pc(f,!0),p.ts(A,m,b,_,M);var O=f.qm(A);if((b=b?-1:O)!=-1)return b;if(m=new p(f,m,b,M,!1),T==550)b=m.fU();else if(T==1607)b=m.EV();else{if(T!=1736)throw c.i.Ra();b=m.jV()}return f.Eh(b,A),_!=null&&b==0&&_.Yt(m.le),b},p.YJ=function(f,m,b,_){if(f.B())return f;var M=f.K();if(M==33)return f;var T=c.ua.mj(m,f,!1);if(M==197)return m=new c.l,f.A(m),m.Di(T)?f.Ja():f;if(c.ba.zd(M))return(M=new c.Ua(f.description)).pc(f,!0),p.YJ(M,m,b,_);if(T=f.qm(T),(b=b?-1:T)==2)return f;if(f=new p(f,m,b,_,!1),M==550)f=f.kU();else if(M==1607)f=f.IV();else{if(M!=1736)throw c.i.Ra();f=f.mV()}return f},p.prototype.Oh=function(f,m,b){if(f==m)return 0;f=this.ii.get(f);var _=this.ii.get(m);m=f>>1;var M=_>>1,T=new c.h,A=new c.h;return this.lf.uc(2*m,T),T.y+=1&f?this.Qj:-this.Qj,this.lf.uc(2*M,A),A.y+=1&_?this.Qj:-this.Qj,(f=T.compare(A))==0&&b?0>(b=this.Hl.get(m)-this.Hl.get(M))?-1:0<b?1:0:f},p.prototype.Qu=function(f,m){if(f==m)return 0;var b=this.Y,_=b.Oa(f),M=b.Oa(m);if(_.x<M.x)return-1;if(_.x>M.x)return 1;if(_.y<M.y)return-1;if(_.y>M.y)return 1;for(_=1;_<this.jT;_++){M=this.iH.ld(_);for(var T=c.sa.Wa(M),A=0;A<T;A++){var O=b.Vc(M,f,A),R=b.Vc(M,m,A);if(O<R)return-1;if(O>R)return 1}}return 0},p.prototype.KO=function(f,m){var b=this.Qu(f,m);return b==0?f<m?-1:1:b},p.prototype.SP=function(f,m){if(f===m)return 0;var b=f.oe.lg();f.Yp()&&b.Uq(),f=m.oe.lg(),m.Yp()&&f.Uq(),m=b.su();var _=f.su();return _==m?(m=b.yi(f),Math.abs(m)<=8881784197001252e-31*(Math.abs(f.x*b.y)+Math.abs(f.y*b.x))&&(m--,m++),0>m?1:0<m?-1:0):m<_?-1:1},p}();c.Ix=u}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 30},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.W=function(a,s,o,u){return a instanceof c.ba?(a=new c.$c(a),s=new c.$c(s),this.W(a,s,o,u).next()):new c.wL(a,s,o,u)},h.gp=function(a,s,o,u){var p=a.Eb(),f=s.Eb();if(a.B()&&s.B())return p>f?a:s;if(a.B())return s;if(s.B())return a;var m=new c.l,b=new c.l,_=new c.l;return a.A(m),s.A(b),_.L(m),_.$b(b),m=c.ua.Xd(o,_,!0),b=a.K(),_=s.K(),b==33&&_==33?h.WU(a,s,m):b!=_?0<p||0<f?p>f?a:s:b==550?h.dI(a,s,m):h.dI(s,a,m):c.Hg.gp(a,s,o,u)},h.WU=function(a,s,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D(),p=s.D(),f=new c.ee(a.description);return c.h.zc(u,p)>o&&(f.add(a),f.add(s)),f},h.dI=function(a,s,o){var u=a.vb(0),p=a.I(),f=s.D(),m=a.Ja();o=o*Math.sqrt(2)*1.00001;var b=new c.l;if(a.A(b),b.X(o,o),b.contains(f)){o*=o,b=!1;for(var _=[],M=0;M<p;M++)_[M]=!1;for(M=0;M<p;M++){var T=u.read(2*M),A=u.read(2*M+1);(T-=f.x)*T+(A-=f.y)*A<=o&&(b=!0,_[M]=!0)}if(b)for(M=0;M<p;M++)_[M]||m.Gd(a,M,M+1);else m.Gd(a,0,p),m.add(s)}else m.Gd(a,0,p),m.add(s);return m},h.instance=null,h}(c.Ge);c.Jx=C}(H||(H={})),function(c){var C=function(){function w(h,a,s,o){this.vs=a==null,this.za=-1,this.Sd=h,this.wg=s,this.IT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(h=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.Jx.gp(h,this.IT,this.wg,this.Vb)):null;var h},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();c.wL=C}(H||(H={})),function(c){var C=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},a}(),w=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.kN=function(s){this.Ir+=s.zx,this.rj.push(s)},a.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(s){return s===this},a}(),h=function(){function a(s,o,u){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=s,this.wg=o,this.Vb=u}return a.ZD=function(s){var o=[],u=0;for(s=Object.keys(s);u<s.length;u++)o.push(Number(s[u]));return o.sort(function(p,f){return p-f}),o},a.prototype.aG=function(s){var o=this.Fo[s],u=a.ZD(o)[0],p=o[u],f=p.iy().Vy;return p=p.iy().vK,delete o[u],p&&(f=c.$l.local().W(f,this.wg,!1,this.Vb),s==0&&f.K()==33&&(s=new c.ee(f.description),f.B()||s.add(f),f=s)),f},a.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw c.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},a.prototype.Ma=function(){return this.za},a.prototype.lK=function(){if(this.Jc)return!0;var s=null;if(this.Sd!=null&&(s=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),c.op.Bp(this.Vb),s!=null){var o=s.Eb();this.vH[o]=!0,o>=this.Bk&&!this.eA&&(this.HD(o,!1,s),o>this.Bk&&!this.eA&&this.uW(o))}if(0<this.kq)for(o=0;o<=this.Bk;o++)for(;1<this.wq[o]&&(s=this.AO(o)).length!=0;)s=c.Hg.QP(s,this.wg,this.Vb),this.HD(o,!0,s);return this.Jc},a.prototype.AO=function(s){for(var o=[],u=[],p=this.Fo[s],f=a.ZD(p),m=0;m<f.length;m++){var b=f[m],_=p[b];if(this.Jc||1e4<_.Ir&&1<_.rj.length){for(this.wq[s]-=_.rj.length,this.kq-=_.rj.length;0<_.rj.length;)o.push(_.iy().Vy),_.OV();u.push(b)}}for(m=0;m<u.length;m++)delete p[u[m]];return o},a.prototype.uW=function(s){for(var o=0;o<s;o++)this.Fo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.HD=function(s,o,u){var p=new C;if(p.Az(),p.Vy=u,u=a.$R(u),p.zx=u,u=a.YR(u),s+1>this.Fo.length)for(var f=0,m=Math.max(2,s+1);f<m;f++)this.Fo.push([]);(f=this.Fo[s][u])===void 0&&(f=new w,this.Fo[s][u]=f),p.vK=o,f.kN(p),this.wq[s]++,this.kq++,this.Bk=Math.max(this.Bk,s)},a.YR=function(s){return 0<s?c.P.truncate(Math.log(s)/Math.log(4)+.5):0},a.$R=function(s){var o=s.K();if(c.ba.zj(o))return s.I();if(o==33)return 1;if(o==197)return 4;if(c.ba.zd(o))return 2;throw c.i.Ra()},a.prototype.re=function(){this.lK()},a}();c.yL=h}(H||(H={})),function(c){var C=function(w){function h(){return w!==null&&w.apply(this,arguments)||this}return At(h,w),h.prototype.K=function(){return 1},h.prototype.W=function(a,s,o,u){return u===void 0?new c.yL(a,s,o):this.bQ(a,s,o,u)},h.prototype.bQ=function(a,s,o,u){return a=new c.$c([a,s]),this.W(a,o,u).next()},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.instance=null,h}(c.Ge);c.Ih=C}(H||(H={})),function(c){var C,w;(w=C||(C={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",C=function(){function h(a,s,o,u){this.Vs=new c.l,this.BT=a,this.CT=s,this.oq=u,this.wo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,u?this.wo=s.ea():this.td=s.Ha()),this.tl||(p=s.Cb)!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,u?this.wo=a.ea():this.td=a.Ha()),this.tl||(this.ei=u?c.ua.hR(a,s,o,1<=a.qm(0),1<=s.qm(0)):c.ua.gR(a,s,o))}return h.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.sU();break;case 1:a=this.tU();break;case 2:a=this.Pz();break;default:throw c.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},h.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},h.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},h.prototype.oz=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},h.prototype.Wy=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},h.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},h.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Wo(a,this.ra),this.Yb=2,!0},h.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},h}(),c.am=C}(H||(H={})),function(c){(c=c.JL||(c.JL={}))[c.enumClosed=1]="enumClosed",c[c.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",c[c.enumOGCStartPolygon=4]="enumOGCStartPolygon",c[c.enumCalcMask=4]="enumCalcMask"}(H||(H={})),function(c){c.LC=function(){function C(){}return C.ub=function(w,h,a,s,o,u,p,f,m){var b=[0,0,0],_=[0,0,0],M=[0,0,0],T=[0,0,0,0],A=new c.ha(0),O=new c.ha(0),R=new c.ha(0);if(p!=null||f!=null||m!=null)if(c.s.vi(h))c.$g.ub(w,a,s,o,u,p,f,m);else{o=c.F.ca(o),a=c.F.ca(a);var j=c.F.ca(o-a);if(c.s.$(s,u)&&(c.s.$(a,o)||c.s.$(c.s.R(s),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(c.s.$(s,-u)){if(c.s.$(c.s.R(s),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0<s?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<s?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(j),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(w,h)),f!=null&&(f.u=0),m!=null&&(m.u=0))}else if(c.s.$(c.s.R(s),1.570796326794897)||c.s.$(c.s.R(u),1.570796326794897)||c.s.$(a,o)||c.s.$(c.s.R(j),3.141592653589793)||c.s.Dd(s))return void c.Yk.ub(w,h,a,s,o,u,p,f,m);var z=Math.sqrt(1-h);o=c.F.ca(o-a),a=0,c.F.el(1,h,s,a,0,A,O,R),b[0]=A.u,b[1]=O.u,b[2]=R.u,c.F.el(1,h,u,o,0,A,O,R),_[0]=A.u,_[1]=O.u,_[2]=R.u,M[0]=0,M[1]=0,M[2]=-1*h*c.F.n(1,h,s)*Math.sin(s),0>o?c.F.Yq(M,_,b,T,0):c.F.Yq(M,b,_,T,0),O=[0,0,0],R=[0,0,0];var V=[0,0,0];b=[0,0,0],A=[0,0,0];var F=Math.acos(T[2]/1),G=1-h,Z=Math.tan(F),K=1+Z*Z/G,re=2*M[2]*Z/G;for(G=(-re+(Z=Math.sqrt(re*re-4*K*(M[2]*M[2]/G-1))))/(K*=2),re=(-re-Z)/K,Z=Math.tan(F),F=(G+re)/2,M=((K=Z*G+M[2])+(Z*re+M[2]))/2,Z=c.F.ip(G-F,K-M),G=M/z*1.570796326794897,re=0;100>re&&(K=(K=c.F.w(h,G))*K/Math.cos(G)*(Math.sin(G)-M*K/(1-h)),!c.s.Dd(K));re++)G-=K;M=c.F.n(1,h,G)*Math.cos(G),Z=1-Z/(M=Math.sqrt((M-F)*(M+F))),Z*=2-Z,K=c.F.qn(O),F=c.F.qn(R),G=c.F.qn(V);var te=c.F.Ut(V,O);re=c.F.Ut(V,R),c.F.yx(V,O,b),c.F.yx(V,R,A),O=Math.acos(te/(G*K)),R=Math.acos(re/(G*F)),R*=c.s.Mb(1,c.F.Ut(b,A)),(1.570796326794897<=c.s.R(O)&&1.570796326794897<=c.s.R(R)||3.141592653589793<c.s.R(O-R))&&(O=(3.141592653589793-c.s.R(O))*c.s.Mb(1,O),R=(3.141592653589793-c.s.R(R))*c.s.Mb(1,R)),b=c.F.Sj(Z,R),A=c.F.q(M,Z,c.F.Sj(Z,O)),b=c.F.q(M,Z,b),b=c.s.R(b-A)*w,O=new c.ha(0),R=new c.ha(0),V=T[1]/1,V*=-c.s.Mb(1,j),A=Math.acos(V)*c.s.Mb(1,j),C.sf(w,h,a,s,b,A,O,R),c.s.$(o,O.u)&&c.s.$(u,R.u)||(Z=c.F.ip(c.F.ca(o-O.u),u-R.u),C.sf(w,h,a,s,b,c.F.ca(A+3.141592653589793),O,R),(K=c.F.ip(c.F.ca(o-O.u),u-R.u))<Z&&(A=c.F.ca(A+3.141592653589793))),O=[0,0,0,0],R=[0,0,0,0],Z=[0,0,0],w=[0,0,0],a=[0,0,0],s=[0,0,0],V=[0,0,0],(M=[0,0,0])[0]=0,M[1]=0,M[2]=z,Z[0]=0,Z[1]=0,Z[2]=0,c.F.Yq(Z,M,_,O,0),c.s.Dd(u)?(w[0]=_[0],w[1]=_[1],w[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(h=c.F.n(1,h,u)*Math.cos(u),w[0]=0,w[1]=0,_[2]+=Math.tan(1.570796326794897-c.s.R(u))*h*c.s.Mb(1,u),a[0]=h*Math.cos(o)-h*Math.sin(o),a[1]=h*Math.sin(o)+h*Math.cos(o)),a[2]=_[2],c.F.Yq(_,a,w,R,1),c.F.yx(R,O,s),c.F.yx(R,T,V),V=c.F.Ut(s,V)/(c.F.qn(s)*c.F.qn(V)),V*=c.s.Mb(1,j),o=Math.acos(V)*-c.s.Mb(1,j),(0<A&&0<o||0>A&&0>o)&&(o=c.F.ca(o+3.141592653589793)),p!=null&&(p.u=b),f!=null&&(f.u=A),m!=null&&(m.u=o)}}},C.sf=function(w,h,a,s,o,u,p,f){var m=[0,0,0],b=[0,0,0],_=[0,0,0],M=[0,0,0],T=[0,0,0],A=[0,0,0],O=[0,0,0],R=[0,0,0,0],j=new c.ha(0),z=new c.ha(0),V=new c.ha(0),F=new c.ha(0),G=new c.ha(0),Z=new c.ha(0);if(p!=null&&f!=null)if(c.s.vi(h))c.$g.sf(w,a,s,o,u,p,f);else if(c.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=s);else if(u=c.F.ca(u),0>o&&(o=c.s.R(o),u=c.F.ca(u+3.141592653589793)),a=c.F.ca(a),s=c.F.ca(s),1.570796326794897<c.s.R(s)&&(a=c.F.ca(a+3.141592653589793),s=c.s.Mb(3.141592653589793,s)-s),c.s.$(c.s.R(s),1.570796326794897)||c.s.Dd(s)||c.s.Dd(u)||c.s.$(c.s.R(u),3.141592653589793))c.Yk.sf(w,h,a,s,o,u,p,f);else{var K=Math.sqrt(1-h);for(w=o/w,c.F.el(1,h,s,0,0,F,G,Z),m[0]=F.u,m[1]=G.u,m[2]=G.u,O[0]=0,O[1]=0,O[2]=-1*h*c.F.n(1,h,s)*Math.sin(s),F=c.F.n(1,h,s),G=c.F.ca(1.570796326794897-u),Z=Math.sin(G),o=Math.cos(s),s=Math.sin(s),T[0]=F*o-s*Z,T[1]=Math.cos(G),T[2]=(1-h)*F*s+o*Z,0>u?c.F.Yq(O,T,m,R,0):c.F.Yq(O,m,T,R,0),m=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),s=1-h,G=1+(T=Math.tan(m))*T/s,s=(-(F=2*O[2]*T/s)+(T=Math.sqrt(F*F-4*G*(O[2]*O[2]/s-1))))/(G*=2),F=(-F-T)/G,T=Math.tan(m),m=(s+F)/2,O=((G=T*s+O[2])+(T*F+O[2]))/2,T=c.F.ip(s-m,G-O),K=O/K*1.570796326794897,s=0;100>s&&(F=(F=c.F.w(h,K))*F/Math.cos(K)*(Math.sin(K)-O*F/(1-h)),!c.s.Dd(F));s++)K-=F;K=c.F.n(1,h,K)*Math.cos(K),O=1-T/(K=Math.sqrt((K-m)*(K+m))),O*=2-O,A=Math.acos(c.F.Ut(A,b)/(c.F.qn(A)*c.F.qn(b))),A*=c.s.Mb(1,b[0]),u=(c.F.q(K,O,c.F.Sj(O,A))+w*c.s.Mb(1,u))/c.F.Ch(K,O),u=c.F.ca(1.570796326794897*u),u=c.F.Tq(O,u),c.F.n(K,O,u),T=c.F.ca(R+a),a=Math.cos(T),u=Math.sin(T),_[0]=M[0]*a+M[1]*-u,_[1]=M[0]*u+M[1]*a,_[2]=M[2],c.F.eO(h,_[0],_[1],_[2],V,z,j),p!=null&&(p.u=z.u),f!=null&&(f.u=V.u)}},C}()}(H||(H={})),function(c){var C=function(){function o(u){this.Za=null,this.xt=new c.h,this.yt=new c.h,this.g=u}return o.prototype.compare=function(u,p,f){return this.g.Hc(p,this.xt),this.g.Hc(u.ka(f),this.yt),this.xt.compare(this.yt)},o}(),w=function(){function o(u){this.Cf=new c.h,this.Fk=new c.h,this.g=u}return o.prototype.Fh=function(u){this.Cf.N(u)},o.prototype.compare=function(u,p){return this.g.Hc(u.ka(p),this.Fk),this.Cf.compare(this.Fk)},o}(),h=function(o){function u(p){var f=o.call(this,p.g,p.ra,!1)||this;return f.ib=p,f}return At(u,o),u.prototype.compare=function(p,f,m){if(this.sg)return-1;var b=this.ib.Rd.Ln(this.ib.Th(f));p=p.ka(m);var _=this.ib.Rd.Ln(this.ib.Th(p));return this.Fm=m,this.ME(f,b,p,_)},u}(c.PC),a=function(o){function u(p){var f=o.call(this,p.g,p.ra)||this;return f.ib=p,f}return At(u,o),u.prototype.compare=function(p,f){return this.sg?-1:(p=this.ib.Rd.Ln(this.ib.Th(p.ka(f))),this.Fm=f,this.NE(f,p))},u}(c.WL),s=function(){function o(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new c.h,this.Ri=new c.h,this.hb=new c.ad(8),this.Ad=new c.ad(5),this.nh=new c.cu,this.Rd=new c.cu,this.Pg=!1,this.xh=new c.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new c.$j,this.Nc=new c.$j,this.ph=new c.ja(0),this.Ik=new c.OC,this.Gf=new c.ja(0),this.Ck=new c.ja(0),this.lo=new c.Ta}return o.prototype.LX=function(u,p){var f=new c.Ed;return f.VB(),u.Pc(f),this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,p=this.eC(),u.Pc(f),p||(this.lQ(),p||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},o.prototype.PX=function(u,p){this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,this.Pg=!1,this.eC(),this.Pg||(this.Pg=u.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.qg=function(u,p){return this.hb.U(u,0+p)},o.prototype.GB=function(u,p,f){this.hb.T(u,0+p,f)},o.prototype.Th=function(u){return this.hb.U(u,2)},o.prototype.UW=function(u,p){this.hb.T(u,2,p)},o.prototype.MF=function(u,p){return this.hb.U(u,3+p)},o.prototype.Rp=function(u){return this.hb.U(u,7)},o.prototype.Rl=function(u,p){this.hb.T(u,7,p)},o.prototype.Tp=function(u,p){return this.hb.U(u,3+this.Qp(u,p))},o.prototype.hr=function(u,p,f){this.hb.T(u,3+this.Qp(u,p),f)},o.prototype.IR=function(u,p){return this.hb.U(u,5+this.Qp(u,p))},o.prototype.jr=function(u,p,f){this.hb.T(u,5+this.Qp(u,p),f)},o.prototype.Ur=function(u){return this.Ad.U(u,0)},o.prototype.PW=function(u,p){this.Ad.T(u,0,p)},o.prototype.$y=function(u){return this.Ad.U(u,4)},o.prototype.er=function(u,p){this.Ad.T(u,4,p)},o.prototype.kl=function(u){return this.Ad.U(u,1)},o.prototype.nn=function(u,p){this.Ad.T(u,1,p)},o.prototype.Zy=function(u){return this.Ad.U(u,3)},o.prototype.Ft=function(u,p){this.Ad.T(u,3,p)},o.prototype.$m=function(u){var p=this.Ad.De(),f=this.nh.Rh();return this.PW(p,f),u!=-1?(this.nh.addElement(f,u),this.g.Sa(u,this.zh,p),this.er(p,this.g.Va(u))):this.er(p,-1),p},o.prototype.CP=function(u){this.Ad.kd(u)},o.prototype.FD=function(u,p){this.nh.addElement(this.Ur(u),p),this.g.Sa(p,this.zh,u)},o.prototype.ot=function(u){var p=this.hb.De(),f=this.Rd.Rh();return this.UW(p,f),u!=-1&&this.Rd.addElement(f,u),p},o.prototype.GD=function(u,p){this.Rd.addElement(this.Th(u),p)},o.prototype.Wu=function(u){this.hb.kd(u),0<=(u=this.ph.gF(u))&&this.ph.NV(u)},o.prototype.jj=function(u,p){if(this.qg(u,0)==-1)this.GB(u,0,p);else{if(this.qg(u,1)!=-1)throw c.i.Ra();this.GB(u,1,p)}this.gy(u,p)},o.prototype.gy=function(u,p){var f=this.kl(p);if(f!=-1){var m=this.Tp(f,p);this.jr(m,p,u),this.hr(u,p,m),this.hr(f,p,u),this.jr(u,p,f)}else this.jr(u,p,u),this.hr(u,p,u),this.nn(p,u)},o.prototype.Qp=function(u,p){return this.qg(u,0)==p?0:1},o.prototype.Zm=function(u,p){var f,m=this.Zy(p);if(m!=-1&&(this.df.wd(m,-1),this.Ft(p,-1)),(m=this.kl(p))!=-1){var b=f=m;do{var _=!1,M=this.Qp(f,p),T=this.MF(f,M);if(this.qg(f,M+1&1)==u){if(this.Zu(f),this.Rd.eh(this.Th(f)),this.Wu(f),f==T){m=-1;break}m==f&&(m=this.kl(p),b=T,_=!0)}f=T}while(f!=b||_);if(m!=-1){do M=this.Qp(f,p),T=this.MF(f,M),this.GB(f,M,u),f=T;while(f!=b);(f=this.kl(u))!=-1?(b=this.Tp(f,u),_=this.Tp(m,u),b==f?(this.nn(u,m),this.gy(f,u),this.nn(u,f)):_==m&&this.gy(m,u),this.hr(m,u,b),this.jr(b,u,m),this.hr(f,u,_),this.jr(_,u,f)):this.nn(u,m)}}for(m=this.Ur(u),f=this.Ur(p),b=this.nh.sc(f);b!=-1;b=this.nh.lb(b))this.g.Sa(this.nh.ka(b),this.zh,u);this.nh.Cy(m,f),this.CP(p)},o.prototype.PT=function(u,p){var f=this.qg(u,0),m=this.qg(u,1),b=this.qg(p,0),_=this.qg(p,1);this.Rd.Cy(this.Th(u),this.Th(p)),p==this.kl(f)&&this.nn(f,u),p==this.kl(m)&&this.nn(m,u),this.Zu(p),this.Wu(p),f==b&&m==_||m==b&&f==_||(this.Jn(f,this.Ao),this.Jn(b,this.Ri),this.Ao.rb(this.Ri)?(f!=b&&this.Zm(f,b),m!=_&&this.Zm(m,_)):(m!=b&&this.Zm(m,b),f!=_&&this.Zm(f,_)))},o.prototype.Zu=function(u){var p=this.qg(u,1);this.ZE(u,this.qg(u,0)),this.ZE(u,p)},o.prototype.ZE=function(u,p){var f=this.Tp(u,p),m=this.IR(u,p),b=this.kl(p);f!=u?(this.hr(m,p,f),this.jr(f,p,m),b==u&&this.nn(p,f)):this.nn(p,-1)},o.prototype.RD=function(u,p,f){var m=this.Rd.sc(u),b=this.Rd.ka(m);u=this.Ie(b);var _=this.Ie(this.g.V(b));for(this.g.lr(b,p,f,!0),m=this.Rd.lb(m);m!=-1;m=this.Rd.lb(m)){b=this.Rd.ka(m);var M=this.Ie(b)==u;this.g.lr(b,p,f,M)}m=p.Xp(f,0).bc(),p=p.Xp(f,p.ql(f)-1).xc(),this.wK(u,m),this.wK(_,p)},o.prototype.UE=function(u,p,f){var m=this.Th(u),b=this.qg(u,0),_=this.qg(u,1),M=this.ot(-1);for(this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,b),u=1,p=p.ql(f);u<p;u++)f=this.$m(-1),this.Ck.add(f),this.Gf.add(f),this.jj(M,f),M=this.ot(-1),this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,f);for(this.jj(M,_),m=this.Rd.sc(m);m!=-1;m=this.Rd.lb(m))if(_=this.Rd.ka(m),this.Ie(_)==b){u=0;do 0<u&&(M=this.Gf.get(u-1),this.FD(M,_),this.$y(M)==-1&&this.er(M,this.g.Va(_))),M=this.Gf.get(u),u+=2,this.GD(M,_),_=this.g.V(_);while(u<this.Gf.size)}else{u=this.Gf.size-1;do u<this.Gf.size-2&&(M=this.Gf.get(u+1),this.FD(M,_),0>this.$y(M)&&this.er(M,this.g.Va(_))),M=this.Gf.get(u),u-=2,this.GD(M,_),_=this.g.V(_);while(0<=u)}this.Gf.clear(!1)},o.prototype.Ie=function(u){return this.g.Qa(u,this.zh)},o.prototype.NI=function(u,p,f){var m=this.qg(p,0),b=new c.h;this.Jn(m,b);var _=new c.h,M=this.qg(p,1);this.Jn(M,_);var T=f.ql(u),A=f.Xp(u,0),O=new c.h;if(A.$p(O),!b.rb(O)){if(!this.Pg){var R=b.compare(this.xh);0>R*(O=O.compare(this.xh))&&(this.Pg=!0)}this.qF(m,this.Gf),this.Ck.add(m)}for(!this.Pg&&1<T&&(R=b.compare(_),A=A.xc(),(b.compare(A)!=R||A.compare(_)!=R||0>A.compare(this.xh))&&(this.Pg=!0)),u=(A=f.Xp(u,T-1)).xc(),_.rb(u)||(this.Pg||0>(R=_.compare(this.xh))*(O=u.compare(this.xh))&&(this.Pg=!0),this.qF(M,this.Gf),this.Ck.add(M)),this.Gf.add(p),_=0,M=this.Gf.size;_<M;_++)u=this.Gf.get(_),f=this.Rp(u),c.ad.GG(f)&&(this.Nc.wd(f,-1),this.Rl(u,-1)),u!=p&&this.Rp(u)!=-3&&(this.ph.add(u),this.Rl(u,-3));this.Gf.clear(!1)},o.prototype.gO=function(u,p){this.ae.compare(this.Nc,this.Nc.ka(u),p),this.ae.sg&&(this.ae.Mr(),this.jF(u,p))},o.prototype.jF=function(u,p){this.Yn=!0,u=this.Nc.ka(u),p=this.Nc.ka(p);var f=this.Rd.Ln(this.Th(u)),m=this.Rd.Ln(this.Th(p)),b=this.g.cc(f);b==null&&(this.je==null&&(this.je=new c.zb),this.g.fd(f,this.je),b=this.je),(f=this.g.cc(m))==null&&(this.Pm==null&&(this.Pm=new c.zb),this.g.fd(m,this.Pm),f=this.Pm),this.Ik.Qo(b),this.Ik.Qo(f),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(u,p,-1,this.Ik),this.Ik.clear()},o.prototype.BQ=function(u,p){this.Yn=!0,p=this.Nc.ka(p);var f=this.Rd.Ln(this.Th(p)),m=this.g.cc(f);m==null&&(this.je==null&&(this.je=new c.zb),this.g.fd(f,this.je),m=this.je),f=this.wF(u),this.Ik.Qo(m),this.g.Xi(f,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(p,-1,u,this.Ik),this.Ik.clear()},o.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var u=this.ph.Gc();this.ph.Jf(),this.Rl(u,-1),this.RS(u)!=-1&&this.rS(u),this.Xn=!1}},o.prototype.rS=function(u){if(this.Xn){var p=this.Nc.Bu(this.HH,this.BH,u,!0);this.Xn=!1}else p=this.Nc.ED(u);p==-1?this.PT(this.Nc.ka(this.Nc.AF()),u):(this.Rl(u,p),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,p)))},o.prototype.RS=function(u){var p=this.qg(u,0);if(u=this.qg(u,1),this.Jn(p,this.Ao),this.Jn(u,this.Ri),c.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var f=this.Ao.compare(this.xh),m=this.Ri.compare(this.xh);return 0>=f&&0<m?u:0>=m&&0<f?p:-1},o.prototype.jQ=function(){var u=new c.ja(0);u.Jb(this.g.gd);for(var p=this.g.$q(),f=p.next();f!=-1;f=p.next())this.g.Qa(f,this.zh)!=-1&&u.add(f);this.g.nx(u,u.size),this.kQ(u)},o.prototype.kQ=function(u){this.df.clear(),this.df.Ee(u.size),this.df.Xo(new C(this.g));var p=new c.h;p.Sc();for(var f=-1,m=new c.h,b=0,_=u.size;b<_;b++){var M=u.get(b);this.g.Hc(M,m),m.rb(p)?(M=this.g.Qa(M,this.zh),this.Zm(f,M)):(f=this.Ie(M),this.g.Hc(M,p),M=this.df.zn(M),this.Ft(f,M))}},o.prototype.lQ=function(){var u=new c.ja(0);u.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))u.add(this.df.ka(p));this.df.clear(),this.g.nx(u,u.size),p=0;for(var f=u.size;p<f;p++){var m=u.get(p),b=this.Ie(m);m=this.df.zn(m),this.Ft(b,m)}},o.prototype.qF=function(u,p){var f=this.kl(u);if(f!=-1){var m=f;do c.ad.GG(this.Rp(m))&&p.add(m),m=this.Tp(m,u);while(m!=f)}},o.prototype.wK=function(u,p){for(u=this.nh.sc(this.Ur(u));u!=-1;u=this.nh.lb(u))this.g.mf(this.nh.ka(u),p)},o.prototype.cK=function(u,p,f,m){this.Zu(u),p!=-1&&this.Zu(p),this.NI(0,u,m),p!=-1&&this.NI(1,p,m),f!=-1&&(m.Cf.D(this.Ao),this.Jn(f,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(f)),f=0;for(var b=this.Ck.size;f<b;f++){var _=this.Ck.get(f),M=this.Zy(_);M!=-1&&(this.df.wd(M,-1),this.Ft(_,-1))}for(f=this.Th(u),b=p!=-1?this.Th(p):-1,this.RD(f,m,0),p!=-1&&this.RD(b,m,1),this.UE(u,m,0),p!=-1&&this.UE(p,m,1),this.Rd.eh(f),this.Wu(u),p!=-1&&(this.Rd.eh(b),this.Wu(p)),f=0,b=this.Ck.size;f<b;f++)(_=this.Ck.get(f))==this.Lq&&(this.Zv=!0),(M=this.Zy(_))==-1&&((M=this.df.ED(this.wF(_)))==-1?(u=this.Ie(this.df.ka(this.df.AF())),this.Zm(u,_)):this.Ft(_,M));this.Ck.clear(!1)},o.prototype.Jn=function(u,p){this.g.ZF(this.$y(u),p)},o.prototype.wF=function(u){return this.nh.Ln(this.Ur(u))},o.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new h(this),this.Nc.ao=this.ae);var u=new c.ja(0),p=null,f=null;this.BH=this.HH=-1,this.Xn=!1;for(var m=this.df.sc(-1);m!=-1;){this.Xn=!1;var b=this.df.ka(m);this.Lq=this.Ie(b),this.g.Hc(b,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var _=this.kl(this.Lq),M=_==-1;if(!M){b=_;do{var T=this.Rp(b);T==-1?(this.ph.add(b),this.Rl(b,-3)):T!=-3&&u.add(T),b=this.Tp(b,this.Lq)}while(b!=_)}if(0<u.size){for(this.Xn=u.size==1&&this.ph.size==1,M=0,_=u.size;M<_;M++)b=this.Nc.ka(u.get(M)),this.Rl(b,-2);var A=-2,O=-2;for(M=0,_=u.size;M<_;M++){if(T=u.get(M),A==-2){var R=this.Nc.xe(T);R!=-1?(b=this.Nc.ka(R),(b=this.Rp(b))!=-2&&(A=R)):A=-1}if(O==-2&&((T=this.Nc.lb(T))!=-1?(b=this.Nc.ka(T),(b=this.Rp(b))!=-2&&(O=T)):O=-1),A!=-2&&O!=-2)break}for(M=0,_=u.size;M<_;M++)T=u.get(M),b=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(b,-1);u.clear(!1),this.HH=A!=-1?A:-1,this.BH=O!=-1?O:-1,A!=-1&&O!=-1?this.Xn||this.gO(A,O):A==-1&&O==-1&&(this.Xn=!1)}else M&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.pJ(p),p.sg&&(p.Mr(),this.BQ(this.Lq,p.Fm)));this.sS(),this.Zv?(this.Zv=!1,f==null&&(f=new w(this.g)),f.Fh(this.xh),m=this.df.pJ(f)):m=this.df.lb(m)}return this.Yn},o.prototype.gr=function(u){for(this.g=u,this.zh=this.g.Hd(),this.hb.Ee(u.gd+32),this.Ad.Ee(u.gd),this.nh.Bt(u.gd),this.nh.hn(u.gd),this.Rd.Bt(u.gd+32),this.Rd.hn(u.gd+32),u=this.g.md;u!=-1;u=this.g.ve(u))if(c.ba.Ic(this.g.jc(u)))for(T=this.g.Ob(u);T!=-1;T=this.g.Sb(T)){var p=this.g.Ka(T),f=this.g.Ya(T),m=this.$m(f),b=this.ot(f);for(this.jj(b,m),A=this.g.V(f),f=0,p-=2;f<p;f++){var _=this.g.V(A),M=this.$m(A);this.jj(b,M),b=this.ot(A),this.jj(b,M),A=_}this.g.ec(T)?(M=this.$m(A),this.jj(b,M),b=this.ot(A),this.jj(b,M),this.jj(b,m)):(M=this.$m(A),this.jj(b,M))}else for(var T=this.g.Ob(u);T!=-1;T=this.g.Sb(T)){var A=this.g.Ya(T);for(m=0,p=this.g.Ka(T);m<p;m++)this.$m(A),A=this.g.V(A)}this.jQ()},o}();c.MC=s}(H||(H={})),function(c){var C=function(w){function h(a,s,o){var u=w.call(this)||this;if(a!==void 0)if(o!==void 0){u.description=c.fe.pg();var p=new c.Od;p.L(a,s,o),u.ZB(p)}else if(s!==void 0)u.description=c.fe.pg(),u.Db(a,s);else if(a instanceof c.sa)u.description=a;else if(a instanceof c.h)u.description=c.fe.pg(),u.Db(a);else{if(!(a instanceof h))throw c.i.O();u.description=a.description,u.Db(a.Ng(),a.kh()),a.la!==null&&(u.la=a.la.slice(0))}else u.description=c.fe.pg();return u}return At(h,w),h.prototype.D=function(a){if(a===void 0){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return(a=new c.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},h.prototype.Db=function(a,s){typeof a=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=a,this.la[1]=s):(this.wc(),this.Db(a.x,a.y))},h.prototype.xz=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");var a=new c.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.dG()?this.la[2]:c.sa.te(1),a},h.prototype.ZB=function(a){this.wc();var s=this.hasAttribute(1);s||c.sa.yG(1,a.z)||(this.se(1),s=!0),this.la==null&&this.wn(),this.la[0]=a.x,this.la[1]=a.y,s&&(this.la[2]=a.z)},h.prototype.Ng=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},h.prototype.YB=function(a){this.setAttribute(0,0,a)},h.prototype.kh=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},h.prototype.WJ=function(a){this.setAttribute(0,1,a)},h.prototype.XR=function(){return this.Vc(1,0)},h.prototype.sX=function(a){this.setAttribute(1,0,a)},h.prototype.uR=function(){return this.Vc(2,0)},h.prototype.cX=function(a){this.setAttribute(2,0,a)},h.prototype.Fc=function(){return this.tF(3,0)},h.prototype.GJ=function(a){this.setAttribute(3,0,a)},h.prototype.Vc=function(a,s){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+s]:c.sa.te(a)},h.prototype.tF=function(a,s){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+s]:c.sa.te(a)},h.prototype.setAttribute=function(a,s,o){this.wc();var u=this.description.Rf(a);0>u&&(this.se(a),u=this.description.Rf(a)),this.la==null&&this.wn(),this.la[this.description.bk(u)+s]=o},h.prototype.K=function(){return 33},h.prototype.Eb=function(){return 0},h.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},h.prototype.un=function(a){if(this.la!=null){for(var s=c.fe.Kw(a,this.description),o=[],u=0,p=0,f=a.Ba;p<f;p++){var m=a.ld(p),b=c.sa.Wa(m);if(s[p]==-1){var _=c.sa.te(m);for(m=0;m<b;m++)o[u]=_,u++}else for(_=this.description.bk(s[p]),m=0;m<b;m++)o[u]=this.la[_],u++,_++}this.la=o}this.description=a},h.prototype.wn=function(){this.gJ(this.description.Be.length),h.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},h.prototype.Pc=function(a){if(a instanceof c.Ed){if(!this.Bc()){var s=this.D();a.Gh(s,s),this.Db(s)}}else this.Bc()||(this.se(1),s=this.xz(),this.ZB(a.hp(s)))},h.prototype.copyTo=function(a){if(a.K()!=33)throw c.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.Pf(this.description)):(a.Pf(this.description),a.gJ(this.description.Be.length),h.YD(this.la,a.la,this.description.Be.length))},h.prototype.Ja=function(){return new h(this.description)},h.prototype.B=function(){return this.Bc()},h.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},h.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.Pf(this.description),a.$b(this)},h.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},h.prototype.So=function(a){if(this.Bc())a.Pa();else{var s=this.xz();a.v=s.x,a.G=s.y,a.Xe=s.z,a.C=s.x,a.H=s.y,a.Dg=s.z}},h.prototype.Vg=function(a,s){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,s),o.pa=a,o.wa=a,o)},h.prototype.gJ=function(a){if(this.la==null)this.la=c.P.mg(a);else if(this.la.length<a){for(var s=this.la.slice(0),o=this.la.length;o<a;o++)s[o]=0;this.la=s}},h.YD=function(a,s,o){if(0<o)for(o=0;o<a.length;o++)s[o]=a[o]},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var s=0,o=this.description.Be.length;s<o;s++)if(this.la[s]!=a.la[s])return!1;return!0},h.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var s=0,o=this.description.Be.length;s<o;s++){var u=this.la[s];u=c.P.truncate(u^u>>>32),a=c.P.Vh(u,a)}return a},h.prototype.ng=function(){return null},h}(c.ba);c.Ta=C}(H||(H={})),function(c){var C=function(){function w(h,a,s){h!==void 0&&(this.x=h,this.y=a,this.z=s)}return w.construct=function(h,a,s){var o=new w;return o.x=h,o.y=a,o.z=s,o},w.prototype.L=function(h,a,s){this.x=h,this.y=a,this.z=s},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var h=this.length();h==0&&(this.x/=h,this.y/=h,this.z/=h)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(h){return new w(this.x-h.x,this.y-h.y,this.z-h.z)},w.prototype.Bg=function(h){new w(this.x*h,this.y*h,this.z*h)},w.prototype.Sh=function(h){return this.x*h.x+this.y*h.y+this.z*h.z},w}();c.Od=C}(H||(H={})),function(c){var C=function(){function w(h,a,s){this.Iw=this.yA=null,this.Zf=a,this.AT=a.y-s,this.zT=a.y+s,this.Gw=0,this.Zz=h,this.ra=s,this.MT=s*s,this.$z=s!=0,this.Nv=!1}return w.prototype.result=function(){return this.Gw!=0?1:0},w.prototype.UM=function(h){return h=h.ic(h.ge(this.Zf,!1)),c.h.zc(h,this.Zf)<=this.MT},w.prototype.aF=function(h){if(!this.$z&&(this.Zz&&this.Zf.rb(h.bc())||this.Zf.rb(h.xc())))this.Nv=!0;else if(h.oa==this.Zf.y&&h.oa==h.ma){if(this.Zz&&!this.$z){var a=Math.max(h.ta,h.qa);this.Zf.x>Math.min(h.ta,h.qa)&&this.Zf.x<a&&(this.Nv=!0)}}else{var s=!1;if(a=Math.max(h.ta,h.qa),this.Zf.x>a?s=!0:this.Zf.x>=Math.min(h.ta,h.qa)&&(s=0<h.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),s){if(this.Zf.y==h.bc().y){if(this.Zf.y<h.xc().y)return}else if(this.Zf.y==h.xc().y&&this.Zf.y<h.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(h.bc().y>h.xc().y?1:-1)}}},w.prototype.MI=function(h){var a=h.Vg(0,1);if(a.pa>this.zT||a.wa<this.AT)return!1;if(this.$z&&this.UM(h))return!0;if(a.pa>this.Zf.y||a.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=h.$F()))for(h=0;h<a;h++){var s=this.yA[h].get();if(this.aF(s),this.Nv)return!0}else if(this.aF(h),this.Nv)return!0;return!1},w.KM=function(h,a,s){for(a=new w(h.Kn()==0,a,s),h=h.Ha();h.ab();)for(;h.Ia();)if(s=h.ia(),a.MI(s))return-1;return a.result()},w.LM=function(h,a,s,o){var u=new c.l;h.yc(u),u.X(o,o);var p=new w(h.Kn()==0,s,o);h=h.Ha();var f=new c.l;for(f.L(u),f.C=s.x+o,f.G=s.y-o,f.H=s.y+o,o=(s=a.HF(f,o)).next();o!=-1;o=s.next())if(h.Wb(a.ka(o)),h.Ia()&&(o=h.ia(),p.MI(o)))return-1;return p.result()},w.ym=function(h,a,s){if(h.B())return 0;var o=new c.l;if(h.yc(o),o.X(s,s),!o.contains(a))return 0;if((o=h.Cb)!=null){var u=o.Hk;if(u!=null){if((u=u.Uo(a.x,a.y))==1)return 1;if(u==0)return 0}if((o=o.Gb)!=null)return w.LM(h,o,a,s)}return w.KM(h,a,s)},w.XS=function(h,a,s){return a.B()?0:w.ym(h,a.D(),s)},w.Ol=function(h,a){return!(16>(h=h.I()))&&2*h+Math.log(h)/Math.log(2)*a<1*h*a},w}();c.Fg=C}(H||(H={})),function(c){var C=function(w){function h(a){return w.call(this,!0,a)||this}return At(h,w),h.prototype.Ja=function(){return new h(this.description)},h.prototype.Eb=function(){return 2},h.prototype.K=function(){return 1736},h.prototype.sG=function(a,s,o){this.ES(a,s,o)},h.prototype.kR=function(){this.AR()},h}(c.Xk);c.Ea=C}(H||(H={})),function(c){(function(C){C[C.PiPOutside=0]="PiPOutside",C[C.PiPInside=1]="PiPInside",C[C.PiPBoundary=2]="PiPBoundary"})(c.ML||(c.ML={})),c.jd=function(){function C(){}return C.FG=function(w,h,a){return(w=c.Fg.XS(w,h,a))==0?0:w==1?1:2},C.Zd=function(w,h,a){return(w=c.Fg.ym(w,h,a))==0?0:w==1?1:2},C.SX=function(w,h,a,s,o){if(h.length<a||o.length<a)throw c.i.O();for(var u=0;u<a;u++)o[u]=C.Zd(w,h[u],s)},C.nK=function(w,h,a,s,o){if(w.K()==1736)C.SX(w,h,a,s,o);else{if(w.K()!=197)throw c.i.ga("invalid_call");var u=new c.l;w.A(u),C.VM(u,h,a,s,o)}},C.VM=function(w,h,a,s,o){if(h.length<a||o.length<a)throw c.i.O();if(w.B())for(s=0;s<a;s++)o[s]=0;else for(w.X(.5*-s,.5*-s),w.X(.5*s,.5*s),s=0;s<a;s++)w.contains(h[s])?o[s]=1:w.contains(h[s])?o[s]=2:o[s]=0},C.UX=function(w,h,a,s,o){for(var u=0;u<a;u++)o[u]=w.ss(h[u],s)?2:0},C.TX=function(w,h,a,s,o){var u=w.Cb,p=null;u!=null&&(p=u.Hk),u=a;for(var f=0;f<a;f++)if(o[f]=1,p!=null){var m=h[f];p.Uo(m.x,m.y)==0&&(o[f]=0,u--)}if(u!=0)for(w=w.Ha();w.ab()&&u!=0;)for(;w.Ia()&&u!=0;)for(p=w.ia(),f=0;f<a&&u!=0;f++)o[f]==1&&p.ss(h[f],s)&&(o[f]=2,u--);for(f=0;f<a;f++)o[f]==1&&(o[f]=0)},C.oK=function(w,h,a,s,o){var u=w.K();if(u==1607)C.TX(w,h,a,s,o);else{if(!c.ba.zd(u))throw c.i.ga("Invalid call.");C.UX(w,h,a,s,o)}},C}()}(H||(H={})),function(c){var C=function(w){function h(a,s){if(arguments.length==2){var o=w.call(this,!1,a.description)||this;o.nf(a),o.lineTo(s)}else o=w.call(this,!1,a)||this;return o}return At(h,w),h.prototype.Ja=function(){return new h(this.description)},h.prototype.Eb=function(){return 1},h.prototype.K=function(){return 1607},h.prototype.sG=function(a,s,o){this.FS(a,s,o)},h}(c.Xk);c.Ua=C}(H||(H={})),function(c){var C=function(){function w(){}return w.prototype.progress=function(){return!0},w.Bp=function(h){if(h!=null&&!h.progress(-1,-1))throw c.i.RC()},w}();c.op=C}(H||(H={})),function(c){var C;(C=c.KK||(c.KK={}))[C.clipWithInputHorizon=1]="clipWithInputHorizon",C[C.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function s(){this.Mg=3,this.Xu=this.Lr=NaN}return s.prototype.KW=function(o){this.LB(1,o)},s.prototype.LW=function(o){this.LB(2,o)},s.prototype.cS=function(){return this.ks(1)},s.prototype.dS=function(){return this.ks(2)},s.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},s.prototype.ks=function(o){return(this.Mg&o)!=0},s.prototype.Qf=function(){var o=new s;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},s}();c.tC=w,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(c.LK||(c.LK={}));var h=function(){function s(){this.Mg=0}return s.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},s.prototype.ks=function(o){return(this.Mg&o)!=0},s.kg=function(o){var u=new s;return u.Mg=o.Mg,u},s.prototype.hM=function(o){this.Mg=o.Mg},s}();c.wY=h;var a=function(){function s(o,u,p){this.ef=o,this.$f=u,this.Wf=new c.l,this.Wf.L(p),this.vT=o.dc()+u.dc()+this.Wf.dc().toString()}return s.prototype.dc=function(){return this.vT},s.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.$f.Nb(o.$f)&&this.Wf.Nb(o.Wf)},s}();c.BY=a,a=function(){function s(){this.$f=this.ef=null,this.mH=new w,this.nH=new h,this.yw=this.Yf=null,this.ow=this.Vn=!0}return s.Pr=function(o,u,p,f){var m;f===void 0&&(f=null),m===void 0&&(m=null);var b=new s;return b.sp(o,u,p,f,m),b},s.prototype.sp=function(o,u,p,f,m){if(o==null||u==null)throw c.i.ga("invalidArgument");if(this.ef=o,this.$f=u,this.ow=this.Vn=!1,f!=null&&(this.mH=f.Qf()),m!=null&&this.nH.hM(m),m=!1,u.Tb()==1&&f!=null&&(f=f.Lr,isNaN(f)||f==0||(m=!0)),o==u)this.Vn=!m,this.ow=!0;else{f=o.Tb();var b=u.Tb();if(f==0||b==0){if(p!=null)throw c.i.O();o.Id()!=null&&u.Id()!=null&&(this.Vn=o.Id().Nb(u.Id()))}else f==3||b==3?this.Vn=o.Nb(u):this.ef.fS(this.$f)?this.Vn=!m:this.Vn=!1,this.Yf=p,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},s.prototype.isIdentity=function(){return this.Vn},s.prototype.iR=function(){return this.mH.Qf()},s.prototype.Nb=function(o){return o==this||!!(o instanceof s&&this.ef.Nb(o.ef)&&this.$f.Nb(o.$f))&&(this.Yf==o.Yf||!(this.Yf==null||o.Yf==null||!this.Yf.Nb(o.Yf)))},s.prototype.kY=function(){this.yw=new c.du(this)},s}(),c.xr=a}(H||(H={})),function(c){var C=function(){function w(){}return w.Ep=function(h){return h*w.jW},w.mx=function(h,a){return w.bP(a-h)},w.cP=function(h){return-360<=h&&720>h?(0>h?h+=360:360<=h&&(h-=360),h):(0>(h=c.mc.MK(h))&&(h+=360),h)},w.bP=function(h){return 180<(h=w.cP(h))&&(h-=360),h},w.jW=57.29577951308232,w}();c.sr=C,c.Jh=function(){function w(){}return w.nj=function(h,a){var s=new c.l;h.A(s);var o=c.cb.ih(a),u=new c.l;return u.L(o),u.v=s.v,u.C=s.C,u.X(.01*u.da(),0),a=c.ua.Xd(a,s,!1),u.contains(s)?h:c.Vd.clip(h,u,a,0)},w.ms=function(h,a,s,o,u){if(!c.cb.Xc(a))throw c.i.O();var p=c.ua.mj(a,h,!1),f=c.cb.ih(a),m=c.cb.tc(a),b=m.Id().ci,_=c.cb.xv(m);m=c.cb.gv(m),_*=2-_;var M=new c.Oc;f.en(M);var T=[[0,0],[0,0]];if(c.Gg.Tb(a)==2?o?(T[0][0]=w.an(u,M),T[0][1]=f.Lp(),c.cb.wt(),f=T[0][0]*b):(T[0][0]=f.ik(),T[0][1]=u,c.cb.wt(),f=T[0][1]*b):f=u*b,!o&&f!=0)throw c.i.O();var A=new c.ha,O=new c.hd;h=O.Ib(h);for(var R=[0],j=new c.h,z=new c.h,V=new c.h,F=new c.h,G=new c.h,Z=new c.h,K=O.Ob(h);K!=-1;K=O.Sb(K)){var re=O.Ya(K);O.D(re,V);for(var te=!1,he=re=O.V(re);he!=-1;he=O.V(he)){if(he==re){if(te)break;te=!0}if(O.D(he,F),o&&p<u-V.x&&F.x-u>p||p<u-F.x&&V.x-u>p||!o&&p<-V.y&&F.y>p||p<-F.y&&V.y>p)do if(!(Math.abs(V.x-F.x)>=.5*M.S())){if(c.Gg.Tb(a)==2?(T[0][0]=w.an(V.x,M),T[0][1]=V.y,T[1][0]=w.an(F.x,M),T[1][1]=F.y,c.cb.ZV(),G.x=T[0][0]*b,G.y=T[0][1]*b,Z.x=T[1][0]*b,Z.y=T[1][1]*b):(G.x=V.x*b,G.y=V.y*b,Z.x=F.x*b,Z.y=F.y*b),Z.x=6.283185307179586*(F.x-V.x)/M.S()+G.x,o){if(z.x=f,z.y=w.Iz(m,_,G,Z,f,s),isNaN(z.y))break}else{if(z.x=w.Gz(m,_,G,Z,s),isNaN(z.x))break;z.y=0}c.kb.xd(m,_,G.x,G.y,Z.x,Z.y,A,null,null,s);var ye=A.u;c.kb.xd(m,_,G.x,G.y,z.x,z.y,A,null,null,s);var pe=A.u;c.Gg.Tb(a)==2?(T[0][0]=z.x/b,T[0][1]=z.y/b,c.cb.XQ(),o?(j.y=T[0][1],j.x=u):(j.x=w.qs(T[0][0],V.x,F.x,M),j.y=u)):o?(j.x=u,j.y=z.y/b):(j.x=w.qs(z.x/b,V.x,F.x,M),j.y=u),R[0]=0<ye?c.P.Tk(pe/ye,0,1):.5,R[0]!=0&&R[0]!=1&&(ye=O.Na(he),O.Wl(ye,R,1),O.Db(O.V(ye),j.x,j.y))}while(0);V.N(F)}}return O.Ke(h)},w.Hn=function(h,a,s,o,u){if(h.B())return h;var p=c.cb.bf(a);return w.Jp(h,s-180*p,360*p,a,o,u,!0)},w.Iz=function(h,a,s,o,u,p){if(3.141592653589793<=Math.abs(s.x-o.x)||!w.Un(s.x,o.x,u))return NaN;if(s.x>o.x)var f=o;else f=s,s=o;o=new c.ha(0);var m=new c.ha(0),b=new c.ha(0);c.kb.xd(h,a,f.x,f.y,s.x,s.y,m,o,null,p);var _=m.u,M=0,T=1,A=new c.h;for(A.N(f);_*(T-M)>1e-12*h;){var O=.5*(M+T);if(c.kb.qj(h,a,f.x,f.y,_*O,o.u,m,b,p),A.x=m.u,A.y=b.u,A.x==u)break;if(w.Un(f.x,A.x,u))T=O;else{if(!w.Un(s.x,A.x,u))return NaN;M=O}}return A.y},w.Un=function(h,a,s){return h=C.Ep(h),a=C.mx(h,C.Ep(a)),(s=C.mx(h,C.Ep(s)))==0||0<a&&0<s&&s<=a||0>a&&0>s&&s>=a},w.an=function(h,a){var s=a.wa-a.pa;return a.Kt(h-Math.floor((h-a.pa)/s)*s)},w.qs=function(h,a,s,o){var u=new c.Oc;for(u.L(a,s),s=o.S(),h=Math.floor((h-a)/s)*s+h,u=u.tf();Math.abs(h-u)>Math.abs(h+s-u);)h+=s;return h},w.Gz=function(h,a,s,o,u){if(s.y>o.y)var p=o;else p=s,s=o;if((o=new c.Oc).L(p.y,s.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-s.x))return NaN;if(p.x==s.x)return p.x;var f=new c.ha(0),m=new c.ha(0),b=new c.ha(0);c.kb.xd(h,a,p.x,p.y,s.x,s.y,m,f,null,u);var _=m.u,M=0,T=1,A=new c.h;for(A.N(p);_*(T-M)>1e-12*h;){var O=.5*(M+T);if(c.kb.qj(h,a,p.x,p.y,_*O,f.u,m,b,u),A.x=m.u,A.y=b.u,o.L(p.y,A.y),A.y==0)break;if(o.contains(0))T=O;else{if(o.L(s.y,A.y),!o.contains(0))return NaN;M=O}}return A.x},w.Jp=function(h,a,s,o,u,p,f){var m=new c.l;if(h.A(m),m.B())return h;var b=new c.Oc;m.en(b);var _=new c.Oc;if(_.L(a,a+s),_.contains(b)&&_.wa!=b.wa)return h;var M=new c.l;M.L(m);var T=h.K();if(T==33)return((m=(M=u?h:h.Qf()).Ng())<_.pa||m>=_.wa||f&&m==_.wa)&&(m+=Math.ceil((_.pa-m)/s)*s,m=_.Kt(m),M.YB(m)),M;if(T==550){for(o=(M=u?h:h.Qf()).vb(0),T=2*M.I(),h=!1,u=0;u<T;u+=2)((m=o.read(u))<_.pa||m>=_.wa||f&&m==_.wa)&&(h=!0,m+=Math.ceil((_.pa-m)/s)*s,m=_.Kt(m),o.write(u,m));return h&&M.Qc(1993),M}if(_.contains(b))return h;if(T==197)return s=u?h:h.Qf(),m.Fa(M),s.Zo(m),s;var A=.1*Math.max(m.da(),m.S());for(M.X(0,A),f=h,_=o.Yd(0),h=c.Ih.local(),u=new c.Ed;;){var O=Math.floor((b.pa-a)/s),R=Math.ceil((b.wa-a)/s);if(!(3<R-O))break;O=Math.floor(.5*(R+O)),M.v=m.v-A,M.C=a+s*O;var j=c.Vd.clip(f,M,_,p);M.v=M.C,M.C=m.C+A;var z=c.Vd.clip(f,M,_,p);u.ig((O-R)*s,0),z.Pc(u),T==1736?f=h.W(j,z,o,null):(f=j).add(z,!1),f.A(m),m.en(b)}for(M.v=a,M.C=a+s,(a=new c.l).L(M),a.X(_,0),(a=Math.floor((m.v-M.v)/s)*s)!=0?(M.move(a,0),u.ig(-a,0)):u.MB(),a=T==1607?new c.Ua(f.description):new c.Ea(f.description),p=new c.l,b=new c.l;m.C>M.v;)(A=c.Vd.clip(f,M,_,0)).A(b),(T==1607?!A.B()&&(b.S()>_||b.da()>_):!A.B()&&(T!=1736||b.S()>_))&&(A.Pc(u),A.A(b),a.A(p),p.X(_,_),p.isIntersecting(b)&&T==1736?a=h.W(a,A,o,null):a.add(A,!1)),M.move(s,0),u.shift(-s,0);return a},w.RI=function(h,a,s,o){var u=new c.ee(s.description);u.Gd(s,0,-1),u=c.cb.Bh(u,h,a);var p=s.I();if(o.Pa(),!c.cb.Xc(h)||p!=u.I())return!1;var f=new c.l;s.A(f);var m=new c.l;if(u.A(m),f=f.S(),m=m.S(),f!=0&&m!=0){if(m/=f,h=c.cb.ih(a).S()/c.cb.ih(h).S(),1e-10<Math.abs(m/h-1))return!1}else if(f!=0||m!=0)return!1;for(o.add(s,!1),s=0;s<p;s++)h=u.Oa(s),o.Db(s,h);return!0},w.Jz=function(){throw c.i.Fe()},w}()}(H||(H={})),function(c){var C,w,h;(w=C=c.ui||(c.ui={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(h=c.RK||(c.RK={})),c.Ab=function(){function a(){}return a.zv=function(s,o,u){if(u||0<o){for(s=s.toString(c.Tc.PE_STR_NAME_CANON|c.Tc.PE_STR_AUTH_NONE),o=[],u=0;u<s.length;u++)o[u]="a"<=s[u]&&"z">=s[u]?o[u]=s[u].toUpperCase():s[u];return o.join()}return s.toString(c.Tc.PE_STR_AUTH_TOP)},a.wr=function(s,o,u,p){var f=p.length,m=u.I();if(m!=0){var b=u.vb(0),_=Math.min(m,f),M=0,T=s.gh();isNaN(o)&&(o=0);for(var A=s.Xc(),O=179*(s=A?s.tc().Le().S():0)/360;0<m;){if(b.pB(M<<1,_,p),c.gj.projToGeogCenter(T,_,p,o),A)for(var R=0;R<_;R++){var j=p[R][0]-o,z=c.mc.sign(j),V=b.read(2*(M+R));0>z*c.mc.sign(V)&&Math.abs(j)>O&&(p[R][0]+=-z*s)}b.pC(M<<1,_,p),M+=_,m-=_,_=Math.min(m,f)}u.Qc(1993)}},a.DL=function(s,o,u,p){var f=0,m=s.gh();isNaN(f)&&(f=0);var b=s.Xc(),_=s.bf();s=360*_,_*=179;for(var M=p.length,T=0;T<u;){for(var A=T;A<u&&o[A].isNaN();++A)T++;var O=Math.min(M,u-T);if(0<O){A=1;for(var R=T+1;A<O;++A,++R)if(o[R].isNaN()){O=A;break}if(c.ua.Ey(p,o,T,O),c.gj.projToGeogCenter(m,O,p,f),b)for(A=0,R=T;A<O;++A,++R){var j=o[R].x,z=p[A][0]-f,V=c.mc.sign(z);0>V*c.mc.sign(j)&&Math.abs(z)>_&&(p[A][0]-=V*s)}c.ua.Dy(o,T,p,O),T+=O}}},a.Kx=function(s,o,u){var p=u.length,f=o.I();if(!(1>f)){var m=o.vb(0),b=Math.min(f,p),_=0,M=s.gh(),T=s.Xc(),A=T?s.Le().S():0,O=179*A/360,R=0;for(T&&(R=s.Bi());0<f;){if(m.pB(_<<1,b,u),c.gj.geogToProj(M,b,u),T)for(s=0;s<b;s++){var j=u[s][0],z=c.mc.sign(j),V=m.read(2*(_+s))-R;0>z*c.mc.sign(V)&&Math.abs(j)>O&&(u[s][0]+=-z*A)}m.pC(_<<1,b,u),_+=b,f-=b,b=Math.min(f,p)}o.Qc(1993)}},a.CL=function(s,o,u,p){if(u!=0){var f=s.gh(),m=s.Xc(),b=m?s.Le().S():0,_=179*b/360,M=0;for(m&&(M=s.Bi()),s=0;s<u;){for(var T=s;T<u&&o[T].isNaN();++T)s++;var A=Math.min(p.length,u-s);if(0<A){T=1;for(var O=s+1;T<A;++T,++O)if(o[O].isNaN()){A=T;break}if(c.ua.Ey(p,o,s,A),c.gj.geogToProj(f,A,p),m)for(T=0,O=s;T<A;T++){var R=p[T][0],j=c.mc.sign(R);0>j*c.mc.sign(o[O].x-M)&&Math.abs(R)>_&&(p[T][0]-=j*b)}c.ua.Dy(o,s,p,A),s+=A}}}},a.vr=function(s,o,u,p){var f=o.I();if(f!=0){var m=o.vb(0),b=s.ef,_=s.$f,M=b.tc().Sp(),T=_.tc().Sp(),A=b.bf(),O=_.bf();if((s=s.Yf)==null||s.count()==0){for(u=M/T,p=(b.Wp()-_.Wp())*O,T=-90*A,s=90*A,M=!1,O=1,b=2*f;O<b;)A=m.get(O),(_=c.P.Tk(A,T,s))!=A&&(m.set(O,_),M=!0),O+=2;if(p!=0||u!=1)for(M=!0,T=new c.h,O=0;O<f;O++)m.uc(2*O,T),T.x*=u,T.x+=p,T.y*=u,m.Vt(2*O,T);M&&o.Qc(1993)}else{b=p.length,_=Math.min(f,b);var R=c.P.mg(_),j=null,z=0,V=NaN,F=NaN,G=360*O,Z=O/A;u&&(F=90*O,V=89.9*A,j=c.P.mg(_));for(var K=!0,re=0;f!=0;){for(A=!1,m.pB(z<<1,_,p),O=0;O<_;O++)R[O]=p[O][0];if(u)for(O=0;O<_;O++){var te=Math.abs(p[O][1])-V;0<te&&(A=p[O][1],p[O][1]=c.mc.En(V,A),j[O]=c.mc.En(te,A),A=!0)}for(O=p[0][0],s.transform(p,_,M,T),K&&(re=p[0][0]-Z*O,K=!1),O=0;O<_;O++)te=p[O][0]-R[O]*Z-re,200<Math.abs(te)&&(p[O][0]=0<te?p[O][0]-G:p[O][0]+G);if(A){for(O=0;O<_;O++)j[O]!=0&&(p[O][1]+=Z*j[O],p[O][1]>F?p[O][1]=F:p[O][1]<-F&&(p[O][1]=-F));for(A=0;A<_;A++)j[A]=0}m.pC(z<<1,_,p),z+=_,f-=_,_=Math.min(f,b)}o.Qc(1993)}}},a.BL=function(s,o,u,p){if(s.ow)p=90*s.ef.bf(),c.ua.ZJ(o,u,-p,p);else{var f=s.Yf,m=s.ef,b=s.$f;s=m.Zr();var _=b.Zr(),M=m.bf(),T=90*M,A=b.bf();if(f==null||f.count()==0){if(p=s/_,f=(m.Wp()-b.Wp())*A,c.ua.ZJ(o,u,-T,T),f!=0||p!=1)for(A=0;A<u;A++)o[A].x*=p,o[A].x+=f,o[A].y*=p}else{m=Math.min(u,p.length),T=c.P.mg(m),b=360*A,M=A/M;for(var O=!0,R=0,j=0;u!=0;){for(A=0;A<m;A++)T[A]=o[A+j].x;for(A=o[0].x,c.ua.Ey(p,o,j,m),f.transform(p,m,s,_),c.ua.Dy(o,j,p,m),O&&(R=o[0].x-M*A,O=!1),A=0;A<m;A++){var z=o[j+A].x-T[A]*M-R;200<Math.abs(z)&&(o[j+A].x=0<z?o[j+A].x-b:o[j+A].x+b)}j+=m,u-=m,m=Math.min(u,p.length)}}}},a.fv=function(s,o){return s=s.ih(),isNaN(o)||s.Lu(o,0),s},a.PQ=function(s,o,u,p,f,m,b,_){for(var M=a.fv(p,f),T=M.S(),A=T/360,O=a.kE*A,R=s.vb(0),j=o.Xc(),z=j?T/o.Le().S():0,V=!1,F=new c.Ea(u.description),G=0,Z=u.ea();G<Z;++G){var K=j,re=new c.Ua(u.description);if(re.addPath(u,G,!0),b!=0){var te=a.KD(!0,re,M.H-_,M.H,b);(V=V||te)&&(K=!1)}var he=-1;K&&(he=s.Ca(G));var ye=re.vb(0),pe=re.I(),De=0,Se=ye.read(0),Qe=0;te=3*p.Yd(0);var We=!1,Ce=new c.h;Ce.Sc();var Zt=new c.h;Zt.Sc();for(var ji=!1,Qt=1;Qt<pe;++Qt){var Tt=c.h.construct(ye.gg(2*Qt),ye.gg(2*Qt+1)),It=Tt.x,pt=It+De,ai=pt-Se;if(Tt.x=pt,Math.abs(ai)>O){if(K){var dt=he+(Qt+1<pe?Qt:0),qs=R.read(2*(he+Qt-1));dt=(R.read(2*dt)-qs)*z,Math.abs(ai-dt)>1*A&&(K=!1)}K||(pt=It+(De-=c.mc.En(T,pt-Se)),++Qe,ji=De!=0,Tt.x=pt)}else We||c.ua.vG(Zt,Ce,Tt,te)&&(We=!0);ji&&ye.write(2*Qt,pt),Se=pt,Zt.N(Ce),Ce.N(Tt)}0<Qe&&re.Qc(1993),K=re.Oa(0),pe=re.Oa(pe-1),re=c.h.ub(K,pe)<te?a.pQ(re,p,f,m,We):a.qQ(s,G,re,p,f),F.add(re,!1)}return f=p.Yd(0),u=M.S()/180,a.Lt(F,M,.1*f,!1),F=F!=(f=c.ti.clip(F,M,f,u,m)),s=s.He(),b=0,0<(_=f.He())&&0>s?b=1:0>=_&&0<s&&(_==0?(_=NaN,o.Tb()==2?_=o.ol().He():o.Tb()==1&&(_=o.Le().rF()),s>.99*_&&(b=-1)):b=-1),b!=0&&((o=new c.Ea(f.description)).vp(M),(o=c.Zl.local().W(o,u,m)).add(f,!1),F=!0,f=o),F&&(f=c.$l.local().W(f,p,!1,m)),f},a.qQ=function(s,o,u,p,f){var m=u.I(),b=u.Oa(0),_=u.Oa(m-1);f=(p=a.fv(p,f)).S(),b=c.mc.sign(_.x-b.x);var M=new c.l;u.yc(M);var T=p.ik();if(_=T-f,T+=f,0<=b){var A=Math.ceil((_-M.v)/f);for(A*=f;_>M.v+A;)A+=f;for(;_<M.C+A;)A-=f;var O=A;720<M.S()&&(T=_+360*Math.ceil(M.S()/360))}else{for(A=Math.ceil((T-M.C)/f),A*=f;T<M.C+A;)A-=f;for(;T>M.v+A;)A+=f;O=A,720<M.S()&&(_=T-360*Math.ceil(M.S()/360))}A=b*f;var R=c.l.construct(M.v,M.G,M.C,M.H);R.move(O,0);var j=new c.Ed;j.ig(O,0),u.Pc(j),(M=new c.Ua(u.description)).add(u,!1),O=u.Oa(m-1),f=0;for(var z=M.Oa(0).x,V=0;0<b?R.C<T:R.v>_;)1024<=V&&(V=0),R.move(A,0),j.Lb=A,u.Pc(j),z+=A,p.v<=z&&p.C>=z&&(f=M.I()-1),u.Db(0,O),O=u.Oa(m-1),M.Fr(u,0,0,m-1,!1);return u=new c.Ea(M.description),m=0<s.Kr(o),u.add(M,!1),s=M.Oa(0),_=M.Oa(M.I()-1),o=u.ea()-1,(0>b?m:!m)?(b=c.h.construct(_.x,p.H),u.Ei(b),b=c.h.construct(p.ik(),p.H),u.Ei(b),p=c.h.construct(s.x,p.H)):(b=c.h.construct(_.x,p.G),u.Ei(b),b=c.h.construct(p.ik(),p.G),u.Ei(b),p=c.h.construct(s.x,p.G)),u.Ei(p),u.sG(0,o,0),u.fO(f),u},a.pQ=function(s,o,u,p,f){var m=new c.Ea(s.description);m.add(s,!1),m.yB(0,m.I()-1);var b=new c.l;m.yc(b);var _=(u=a.fv(o,u)).S(),M=Math.ceil((u.v-b.v)/_);for(M*=_;u.v>b.v+M;)M+=_;for(;u.v<b.C+M;)M-=_;if((M+=_)!=0){b.move(M,0);var T=new c.Ed;T.ig(M,0),m.Pc(T)}if(u.v<=b.v&&u.C>b.C)return f&&(f=m.He(),o=(m=c.$l.local().W(m,o,!0,p)).He(),(o=c.mc.sign(f)!=c.mc.sign(o))&&m.jJ()),m;for((s=new c.Ea(s.description)).add(m,!1),f=f||b.S()>_-o.Yd(0);b.v<u.C;)b.move(_,0),(T=new c.Ed).ig(_,0),m.Pc(T),s.add(m,!1);return f&&(f=s.He(),s.$o(1),o=(s=c.$l.local().W(s,o,!0,p)).He(),(o=c.mc.sign(f)!=c.mc.sign(o))&&s.jJ()),s},a.KD=function(s,o,u,p,f){for(var m=o.vb(0),b=o.I(),_=!1,M=0;M<b;M++){var T=c.h.construct(m.gg(2*M),m.gg(2*M+1));if(1&f&&T.y>=u){_=!0;break}if(2&f&&T.y<=-u){_=!0;break}}if(!_)return!1;m=!1,s&&(m=o.Pn(0)),b=(s=new c.hd).Ib(o),_=s.Ob(b);var A=-1,O=!0,R=new c.h;R.Sc(),M=new c.Ta;for(var j=-1,z=s.Ya(_);z!=-1;z=s.V(z)){T=s.Oa(z);var V=1&f&&90<=T.y?1:0;if(V|=2&f&&T.y<=-u?2:0,0<A&&A!=V){if(R.x!=T.x){R.x=T.x,s.Xi(s.Na(z),M);var F=s.yj(_,z,M);s.mf(F,R)}if(m)for(j=j!=-1?s.V(j):s.Ya(_),F=s.Na(z);j!=F;)j=s.qd(j,!1);j=-1}0<V&&(T.y=c.mc.En(p,T.y),s.mf(z,T),O||A==V||(T.x!=R.x?(s.Xi(z,M),F=s.yj(_,z,M),s.Db(F,R.x,T.y),j=F):j=z)),A=V,R=T,O=!1}if(m){if(j!=-1)for(j=s.V(j);j!=-1;)j=s.qd(j,!1);u=s.Ya(_),s.hq(u,s.tj(_))||(s.Xi(u,M),s.yj(_,-1,M))}return s.Ke(b).copyTo(o),!0},a.Hz=function(s,o,u,p){var f=s;if(f.B()||u==C.DontClip)return f;var m=f.K();if(m==33)return f=[(p=f).D()],a.tG(f,1,o,u),f[0].isNaN()?p.Pa():p.Db(f[0]),s;var b=(s=o.tc()).bf(),_=90*b,M=180*b,T=360*b,A=o.Bi(),O=.5*b,R=new c.l;f.A(R);var j=o.Xr(),z=o.KQ(),V=j.K()==197;if(o=new c.l,j.A(o),u==C.PannableFold&&(u=s.Le().S(),o.v=A-.5*u,o.C=o.v+u),R.G<-_||R.H>_){if(new c.l().L(R.v-b,-_,R.C+b,_),(f=c.ti.Pu(f,o,s,NaN,0,p)).B())return f;f.A(R)}if(z&&(o.H<R.G||o.G>R.H))return f.Ja();if(R.S()>T&&(f=a.Jp(f,A-M,T,s,!0,0,!0,p)).A(R),(_=a.$N(R.v,R.C,o.v,o.C,T))!=0&&R.move(_,0),R.C>o.C||R.v<o.v){if(R.C>o.C)for(;R.v>=o.C;)R.move(-T,0),_-=T;for(;R.v<o.C-T;)R.move(T,0),_+=T}if(u=c.ua.Ju(s,j),_!=0&&((b=new c.Ed).ig(_,0),f.Pc(b)),z){if(V&&o.contains(R))return f;for(z=[null,null],_=0;2>_;_++){if(V?b=c.ba.Ic(m)?c.ti.clip(f,o,u,O,p):c.ti.clip(f,o,u,0,p):(b=c.Zj.local().W(f,j,s,p))==j&&(b=c.ba.kg(b)),o.v<=R.v&&o.C>=R.C||o.v>=R.v&&o.C<=R.C)return b;z[_]=b,_==0&&(R.move(-T,0),(b=new c.Ed).ig(-T,0),f.Pc(b))}if(m==550)z[0].Gd(z[1],0,-1);else if(c.ba.Ic(m))z[0].add(z[1],!1);else{if(m!=33)throw c.i.ga("intersect_with_GCS_horizon: unexpected geometry type");z[0].B()&&(z[0]=z[1])}return z[0]}if(o.H<R.G||o.G>R.H)return f;for(m=0;!f.B()&&R.C>o.v;)m!=0&&((b=new c.Ed).ig(m,0),f.Pc(b)),c.fj.local().W(4,f,j,s,p)||j==(f=c.mp.local().W(f,j,s,p))&&(f=c.ba.kg(f)),m!=0&&((O=new c.Ed).ig(-m,0),f.Pc(O)),m-=T,R.move(-T,0);return f},a.tG=function(s,o,u,p){if(o!=0&&p!=C.DontClip)if(p==C.PannableFold){p=u.CR();for(var f=o,m=0;m<o;m++)(s[m].y>p.H||s[m].y<p.G)&&(s[m].Sc(),f--);f!=0&&a.cv(s,o,p.v,p.S())}else{var b=90*(p=u.bf()),_=180*p;for(p*=360,f=o,m=0;m<o;m++)(s[m].y>b||s[m].y<-b)&&(s[m].Sc(),f--);if(f!=0){(f=new c.l).bx(s,o),b=u.Xr();var M=u.kv();m=b.K()==197;var T=new c.l;if(b.A(T),!M||!(T.H<f.G||T.G>f.H))if(M)if(a.cv(s,o,T.ik()-_,p),f=o,m)for(m=0;m<o;m++)T.contains(s[m])||(s[m].Sc(),f--);else for(u=c.ua.Ju(u.tc(),b),m=0;m<o;m++)(_=c.jd.Zd(b,s[m],u)!=0)||(s[m].Sc(),f--);else for(a.cv(s,o,-_,p),f=o,u=c.ua.Ju(u.tc(),b),m=0;m<o;m++)(_=s[m]).isNaN()&&f--,M=a.oE(_.x,T.v,T.C,p),_.x+=M,(_=c.jd.Zd(b,_,u)!=0)&&(s[m].Sc(),f--)}}},a.Jp=function(s,o,u,p,f,m,b,_){var M=s.K(),T=o+u;if(M===33){var A=(p=f?s:s.Qf()).Ng();return(A<o||A>=T||b&&A==T)&&(A+=Math.ceil((o-A)/u)*u,A=c.P.Tk(A,o,T),p.YB(A)),p}if(s.B()||(A=new c.l,s.A(A),A.B()))return s;var O=new c.Oc;A.en(O);var R=new c.Oc;if(R.L(o,T),R.contains(O))return s;if((T=new c.l).L(A),M===550){for(_=(p=f?s:s.Qf()).vb(0),M=2*p.I(),T=!1,o=0;o<M;o+=2)((A=_.read(o))<R.pa||A>=R.wa||b&&A==R.wa)&&(T=!0,A+=Math.ceil((R.pa-A)/u)*u,A=R.Kt(A),_.write(o,A));return T&&p.Qc(1993),p}if(M==197)return u=f?s:s.Qf(),A.Fa(T),u.Zo(A),u;var j=.1*Math.max(A.da(),A.S());for(T.X(0,j),b=s,R=p.Yd(0),s=c.Ih.local(),f=new c.Ed;;){var z=Math.floor((O.pa-o)/u),V=Math.ceil((O.wa-o)/u);if(!(3<V-z))break;z=Math.floor(.5*(V+z)),T.v=A.v-j,T.C=o+u*z;var F=c.ti.clip(b,T,R,m,_);T.v=T.C,T.C=A.C+j;var G=c.ti.clip(b,T,R,m,_);f.ig((z-V)*u,0),G.Pc(f),M==1736?b=s.W(F,G,p,null):(b=F).add(G,!1),b.A(A),A.en(O)}for(T.v=o,T.C=o+u,(o=new c.l).L(T),o.X(R,0),(o=Math.floor((A.v-T.v)/u)*u)!=0?(T.move(o,0),f.ig(-o,0)):f.MB(),o=M==1607?new c.Ua(b.description):new c.Ea(b.description),m=new c.l,O=new c.l;A.C>T.v;)(j=c.ti.clip(b,T,R,0,_)).A(O),(M==1607?!j.B()&&(O.S()>R||O.da()>R):!j.B()&&(M!=1736||O.S()>R))&&(j.Pc(f),j.A(O),o.A(m),m.X(R,R),m.isIntersecting(O)&&M==1736?o=s.W(o,j,p,null):o.add(j,!1)),T.move(u,0),f.shift(-u,0);return o},a.cv=function(s,o,u,p){for(var f=u+p,m=0;m<o;m++){var b=s[m].x;u<=b&&b<f||!(b<u||b>f||b==f)||(b+=Math.ceil((u-b)/p)*p,b=c.P.Tk(b,u,f),s[m].x=b)}},a.Hn=function(s,o,u,p,f,m){if(!o.Xc())throw c.i.ga("fold_into_360_degree_range");if(s.B())return s;if(o.Tb()==2){u=o.rv();var b=o.qv()-u}else{var _=o.bf();b=360*_,u-=180*_}return a.Jp(s,u,b,o,p,f,!0,m)},a.lF=function(s,o,u,p){if(u.Tb()==2)p=u.rv(),u=u.qv()-p;else{var f=u.bf();u=360*f,p-=180*f}a.cv(s,o,p,u)},a.nj=function(s,o){var u=o.Le();if(s.K()==33){var p=s.kh();return u.G<=p&&p<=u.H?s:s.Ja()}p=new c.l,s.A(p);var f=new c.l;return f.L(u),f.v=p.v,f.C=p.C,f.X(.01*f.da(),0),u=c.ua.py(o,p),f.contains(p)?s:c.ti.clip(s,f,u,0,null)},a.kr=function(s,o,u){return s>o.C&&s-o.C<u?o.C:s<o.v&&o.v-s<u?o.v:s},a.BX=function(s,o,u,p){p.x=a.kr(s.x,o,u),p.y=s.y},a.AX=function(s,o,u,p){for(var f=0;f<o;f++)s[f].y<u.G||s[f].y>u.H?s[f].Sc():s[f].x=a.kr(s[f].x,u,p)},a.Lt=function(s,o,u,p){if(!s.B()){var f=s.K();if(!p||f!=1736)if(c.ba.zj(f)){p=s.vb(0),f=0;for(var m=s.I();f<m;f++){var b=p.read(2*f),_=a.kr(b,o,u);_!=b&&p.write(2*f,_)}s.Qc(1993)}else if(f==197)p=new c.l,s.A(p),p.v=a.kr(p.v,o,u),p.C=a.kr(p.C,o,u),s.Zo(p);else{if(f!=33)throw c.i.ga("internal error");s.YB(a.kr(s.Ng(),o,u))}}},a.pS=function(s,o,u,p){var f=new c.hd,m=f.Ib(s);return s=c.ua.Ju(o,s),a.ms(f,m,o,s,u,!0,p),f.Ke(m)},a.ms=function(s,o,u,p,f,m,b){if(!u.Xc())throw c.i.O("invalid call");var _=u.Le(),M=u.tc(),T=M.gh().getDatum().getSpheroid();M=M.Id().ci;var A=T.getFlattening();T=T.getAxis(),A*=2-A;var O=new c.Oc;_.en(O);var R=null,j=[[0,0],[0,0]];if(u.Tb()==2?(R=u.gh(),m?(j[0][0]=a.an(b,O),j[0][1]=_.Lp(),c.gj.projToGeog(R,1,j),_=j[0][0]*M):(j[0][0]=_.ik(),j[0][1]=b,c.gj.projToGeog(R,1,j),_=j[0][1]*M)):_=b*M,!m&&_!=0&&f!=h.GreatElliptic)throw c.i.ga("invalid argument");var z=new c.ha,V=[0],F=new c.h,G=new c.h,Z=new c.h,K=[null,null],re=new c.h,te=new c.h,he=new c.h,ye=new c.h;for(o=s.Ob(o);o!=-1;o=s.Sb(o)){var pe=s.Ya(o);s.D(pe,re);for(var De=!1,Se=pe=s.V(pe);Se!=-1;Se=s.V(Se)){if(Se==pe){if(De)break;De=!0}if(s.D(Se,te),m&&(p<b-re.x&&te.x-b>p||p<b-te.x&&re.x-b>p)||!m&&(b!=0||p<-re.y&&te.y>p||p<-te.y&&re.y>p))do if(!(Math.abs(re.x-te.x)>=.5*O.S())){if(u.Tb()==2?(j[0][0]=a.an(re.x,O),j[0][1]=re.y,j[1][0]=a.an(te.x,O),j[1][1]=te.y,c.gj.projToGeogCenter(R,2,j,0),he.x=j[0][0]*M,he.y=j[0][1]*M,ye.y=j[1][1]*M):(he.x=re.x*M,he.y=re.y*M,ye.y=te.y*M),ye.x=2*(te.x-re.x)*Math.PI/O.S()+he.x,m){if(G.x=_,G.y=a.Iz(T,A,he,ye,_,f),isNaN(G.y))break;K[0]=G;var Qe=1}else if(f==h.GreatElliptic){var We=[0,0];if((Qe=c.Nx.Jz(A,he,ye,_,We))==0)break;G.x=We[0],G.y=_,K[0]=G,Qe==2&&(Z.x=We[1],Z.y=_,K[1]=Z)}else{if(G.x=a.Gz(T,A,he,ye,f),isNaN(G.x))break;G.y=0,K[0]=G,Qe=1}var Ce=-1;for(We=0;We<Qe;We++){c.kb.xd(T,A,he.x,he.y,ye.x,ye.y,z,null,null,f);var Zt=z.u;c.kb.xd(T,A,he.x,he.y,K[We].x,K[We].y,z,null,null,f);var ji=z.u;if(u.Tb()==2?(j[0][0]=K[We].x/M,j[0][1]=K[We].y/M,c.gj.geogToProj(R,1,j),m?(F.y=j[0][1],F.x=b):(F.x=a.qs(j[0][0],re.x,te.x,O),F.y=b)):m?(F.x=b,F.y=K[We].y/M):(F.x=a.qs(K[We].x/M,re.x,te.x,O),F.y=b),V[0]=0<Zt?c.P.Tk(ji/Zt,0,1):.5,V[0]==0||V[0]==1)break;Ce>V[0]||(Ce=s.Na(Se),s.Wl(Ce,V,1),s.Db(s.V(Ce),F.x,F.y),Ce=V[0])}}while(0);re.N(te)}}},a.an=function(s,o){var u=o.wa-o.pa;return o.Kt(s-Math.floor((s-o.pa)/u)*u)},a.qs=function(s,o,u,p){var f=new c.Oc;for(f.L(o,u),u=p.S(),s=Math.floor((s-o)/u)*u+s,f=f.tf();Math.abs(s-f)>Math.abs(s+u-f);)s+=u;return s},a.Un=function(s,o,u){return s=c.sr.Ep(s),o=c.sr.mx(s,c.sr.Ep(o)),(u=c.sr.mx(s,c.sr.Ep(u)))==0||0<o&&0<u&&u<=o||0>o&&0>u&&u>=o},a.Iz=function(s,o,u,p,f,m){if(m==h.GreatElliptic)return c.Nx.NS(o,u,p,f);if(Math.abs(u.x-p.x)>=Math.PI||!a.Un(u.x,p.x,f))return NaN;if(u.x>p.x)var b=p;else b=u,u=p;p=new c.ha;var _=new c.ha,M=new c.ha;c.kb.xd(s,o,b.x,b.y,u.x,u.y,_,p,null,m);var T=_.u,A=0,O=1,R=new c.h;for(R.N(b);T*(O-A)>1e-12*s;){var j=.5*(A+O);if(c.kb.qj(s,o,b.x,b.y,T*j,p.u,_,M,m),R.x=_.u,R.y=M.u,R.x==f)break;if(a.Un(b.x,R.x,f))O=j;else{if(!a.Un(u.x,R.x,f))return NaN;A=j}}return R.y},a.Gz=function(s,o,u,p,f){if(f==h.GreatElliptic)return s=[0,0],c.Nx.Jz(o,u,p,0,s),s[0];if(u.y>p.y)var m=p;else m=u,u=p;if((p=new c.Oc).L(m.y,u.y),!p.contains(0)||Math.abs(m.x-u.x)>=Math.PI)return NaN;if(m.x==u.x)return m.x;var b=new c.ha,_=new c.ha,M=new c.ha;c.kb.xd(s,o,m.x,m.y,u.x,u.y,_,b,null,f);var T=_.u,A=0,O=1,R=new c.h;for(R.N(m);T*(O-A)>1e-12*s;){var j=.5*(A+O);if(c.kb.qj(s,o,m.x,m.y,T*j,b.u,_,M,f),R.x=_.u,R.y=M.u,p.L(m.y,R.y),R.y==0)break;if(p.contains(0))O=j;else{if(p.L(u.y,R.y),!p.contains(0))return NaN;A=j}}return R.x},a.RI=function(s,o,u,p){if(!s.ef.Xc())return!1;var f=new c.ee(o.description);if(f.Gd(o,0,-1),p=c.Gx.local().W(f,s,p),f=o.I(),u.Pa(),f!=p.I())return!1;var m=new c.l;o.A(m);var b=new c.l;if(p.A(b),m=m.S(),b=b.S(),m!=0&&b!=0){if(b/=m,s=s.$f.ih().S()/s.ef.ih().S(),1e-10<Math.abs(b/s-1))return!1}else if(m!=0||b!=0)return!1;for(u.add(o,!1),o=new c.h,s=0;s<f;s++)p.D(s,o),u.Db(s,o);return!0},a.lN=function(s,o){return(s%=360*o)>=180*o&&(s-=360*o),s},a.OI=function(s,o,u,p){if(u==C.Clip){var f=o.ol();f.K()==197?(u=new c.l,f.A(u),f=c.ua.py(o,u),s=c.ti.clip(s,u,f,5e4*o.rm(),p)):c.fj.local().W(1,f,s,o,p)||(s=c.Zj.local().W(s,f,o,p))==f&&(s=c.Xk.kg(s))}else o.Xc()&&(p=new c.l,s.yc(p),o.Le().contains(p)||(a.Lt(s,o.Le(),o.Yd(0),!0),u==C.PannableFold&&(s=a.nj(s,o)),s=a.Hn(s,o,0,!0,1e5*o.rm(),null)));return s},a.SD=function(s,o,u){var p=o.Yr();if(p==null)return s;var f=(o=o.tc()).Le().S(),m=new c.l;s.yc(m);var b=new c.Oc;m.en(b),m=p.Ha(),p=null;for(var _=new c.Ed;m.ab();)for(;m.Ia();){var M=m.ia(),T=M.Vg(0,0),A=new c.Oc;for(A.L(T.pa,T.wa),T=0;A.wa>b.pa;)A.move(-f),--T;for(;A.pa<=b.wa;){if(A.isIntersecting(b)){p==null&&(p=new c.Ua);var O=c.zb.YO(M.bc(),M.xc());T!=0&&(_.ig(T*f,0),O.Pc(_)),p.pc(O,!0)}A.move(f),++T}}return p!=null?(o=c.ua.bO(o,p),o=c.ua.Gr(o),c.bu.gP(s,p,o,u)):s},a.$N=function(s,o,u,p,f){return s>=u&&o<=p?0:a.oE(.5*(o+s),u,p,f)},a.oE=function(s,o,u,p){return c.mc.round((.5*(u+o)-s)/p)*p},a.QQ=function(s,o,u,p,f,m,b,_){var M=a.fv(p,f),T=M.S(),A=T/360,O=a.kE*A,R=s.vb(0),j=o.Xc(),z=j?T/o.Le().S():0;o=s.Ja();for(var V=0,F=u.ea();V<F;++V){var G=j,Z=new c.Ua(u.description);Z.addPath(u,V,!0);var K=u.ec(V);b!=0&&(K=a.KD(K,Z,M.H-_,M.H,b))&&(G=!1);var re=-1;K=Z.I();var te=!1;G&&(re=s.Ca(V),te=s.ec(V));var he=Z.vb(0),ye=0,pe=he.read(0),De=0,Se=3*p.Yd(0),Qe=!1,We=new c.h;We.Sc();var Ce=new c.h;Ce.Sc();for(var Zt=!1,ji=1;ji<K;++ji){var Qt=c.h.construct(he.gg(2*ji),he.gg(2*ji+1)),Tt=Qt.x,It=Tt+ye,pt=It-pe;if(Qt.x=It,Math.abs(pt)>O){if(G){var ai=re+ji-1,dt=re;(!te||ji+1<K)&&(dt+=ji),ai=R.read(2*ai),dt=(R.read(2*dt)-ai)*z,Math.abs(pt-dt)>1*A&&(j=!1)}G||(It=Tt+(ye-=c.mc.En(T,It-pe)),++De,Zt=ye!=0,Qt.x=It)}else Qe||c.ua.vG(We,Ce,Qt,Se)&&(Qe=!0);Zt&&he.write(2*ji,It),pe=It,We.N(Ce),Ce.N(Qt)}De!=0&&Z.Qc(1993),G=Z.Oa(0),K=Z.Oa(K-1),c.h.ub(G,K),Z=a.rQ(Z,p,isNaN(f)?0:f,m),o.add(Z,!1)}return s=p.Yd(0),u=M.S()/180,a.Lt(o,M,.1*s,!1),c.ti.clip(o,M,s,u,m)},a.rQ=function(s,o,u,p){return a.Hn(s,o,u,!0,0,p)},a.JS=function(s,o,u,p){var f=s.K();if(f==1736)for(o=o!=null?o.Yd(0):0,f=0;f<p;f++)c.jd.Zd(s,u[f],o)!=1&&u[f].Sc();else{if(f!=197)throw c.i.O();for(f=0;f<p;f++)s.ZO(u[f])||u[f].Sc()}},a.bl=function(s,o,u,p){if(32>u)for(var f=new c.Ta,m=0;m<u;m++)f.Db(o[m]),s.bl(f,p).D(o[m]);else{var b=new c.ee;for(b.se(3),b.CD(o,u),f=b.vb(3),m=0;m<u;m++)f.write(m,m);for(m=s.bl(b,p),s=m.vb(0),f=m.vb(3),p=c.h.construct(NaN,NaN),b=0;b<u;b++)o[b]=p;for(u=m.I(),m=0;m<u;m++)p=f.read(m),s.uc(2*m,o[p])}},a.al=function(s,o,u,p){if(32>u)for(var f=new c.Ta,m=0;m<u;m++)f.Db(o[m]),s.al(f,p).D(o[m]);else{var b=new c.ee;for(b.se(3),b.CD(o,u),f=b.vb(3),m=0;m<u;m++)f.write(m,m);for(m=s.al(b,p),s=m.vb(0),f=m.vb(3),p=c.h.construct(NaN,NaN),b=0;b<u;b++)o[b]=p;for(u=m.I(),m=0;m<u;m++)p=f.read(m),s.uc(2*m,o[p])}},a.kE=210,a}()}(H||(H={})),function(c){var C;(C=c.PL||(c.PL={}))[C.rightSide=1]="rightSide";var w=function(){function h(a,s,o){this.Ds=new c.h,a===void 0?this.Ko=-1:(this.Ds.N(a),this.Ko=s,this.La=o,this.pw=0)}return h.prototype.RJ=function(a){this.pw=a?1|this.pw:-2&this.pw},h.prototype.B=function(){return 0>this.Ko},h.prototype.az=function(){if(this.B())throw c.i.ga("invalid call");return new c.Ta(this.Ds.x,this.Ds.y)},h.prototype.Va=function(){if(this.B())throw c.i.ga("invalid call");return this.Ko},h.prototype.cz=function(){if(this.B())throw c.i.ga("invalid call");return this.La},h.prototype.Nz=function(){return(1&this.pw)!=0},h.prototype.by=function(a,s,o,u){this.Ds.x=a,this.Ds.y=s,this.Ko=o,this.La=u},h}();c.bm=w}(H||(H={})),function(c){var C=function(){function h(){}return h.prototype.Wo=function(a,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,a.yc(this.Gk),this.Gk.X(s,s),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=c.ba.zd(a.K()))?(this.OH=a.bc(),this.NH=a.xc(),this.ra=s):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},h.prototype.Zi=function(a,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(a),this.Gk.X(s,s),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},h.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var a=null,s=null,o=null,u=null;this.xs&&(a=new c.h,s=new c.h,o=new c.l);for(var p=!1;!p;){for(;this.vk!=-1;){var f=this.Gb.Xy(this.Gb.hv(this.vk));if(f.isIntersecting(this.Gk)){if(!this.xs){p=!0;break}if(a.N(this.OH),s.N(this.NH),o.L(f),o.X(this.ra,this.ra),0<o.uy(a,s)){p=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){f=this.vh.Gc();var m=this.Ki[this.Ki.length-1];for(u==null&&((u=[])[0]=new c.l,u[1]=new c.l,u[2]=new c.l,u[3]=new c.l),w.zJ(m,u),this.vh.Jf(),--this.Ki.length,m=0;4>m;m++){var b=this.Gb.Np(f,m);if(b!=-1&&0<this.Gb.RR(b)&&u[m].isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),s.N(this.NH),o.L(u[m]),o.X(this.ra,this.ra),0<o.uy(a,s)){var _=new c.l;_.L(u[m]),this.vh.add(b),this.Ki.push(_)}}else(_=new c.l).L(u[m]),this.vh.add(b),this.Ki.push(_)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},h.XO=function(a,s,o){var u=new h;return u.Gb=a,u.Gk=new c.l,u.vh=new c.ja(0),u.Ki=[],u.Wo(s,o),u},h.WO=function(a,s,o){var u=new h;return u.Gb=a,u.Gk=new c.l,u.vh=new c.ja(0),u.Ki=[],u.Zi(s,o),u},h.VO=function(a){var s=new h;return s.Gb=a,s.Gk=new c.l,s.vh=new c.ja(0),s.Ki=[],s},h}();c.CY=C;var w=function(){function h(a,s){this.jf=new c.ad(11),this.ai=new c.ad(5),this.ys=[],this.iw=new c.ja(0),this.Da=new c.l,this.Pk(a,s)}return h.prototype.reset=function(a,s){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(a,s)},h.prototype.xj=function(a,s){return this.Bv(a,s,0,this.Da,this.kf,!1,-1)},h.prototype.Ez=function(a,s,o){o=o==-1?this.kf:this.RF(o);var u=this.da(o),p=this.jR(o);return this.Bv(a,s,u,p,o,!1,-1)},h.prototype.ka=function(a){return this.eR(a)},h.prototype.BF=function(a){return this.Xy(this.hv(a))},h.prototype.da=function(a){return this.lv(a)},h.prototype.jR=function(a){var s=new c.l;s.L(this.Da);var o=this.lv(a);a=this.LF(a);for(var u=0;u<2*o;u+=2){var p=c.P.truncate(3&a>>u);p==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):p==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(p==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},h.prototype.RR=function(a){return this.vz(a)},h.prototype.qR=function(a,s){return C.XO(this,a,s)},h.prototype.HF=function(a,s){return C.WO(this,a,s)},h.prototype.getIterator=function(){return C.VO(this)},h.prototype.Pk=function(a,s){if(0>s||32<2*s)throw c.i.O("invalid height");this.wT=s,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},h.prototype.Bv=function(a,s,o,u,p,f,m){if(!u.contains(s))return o==0?-1:this.Bv(a,s,0,this.Da,this.kf,f,m);if(!f)for(var b=p;b!=-1;b=this.DR(b))this.jx(b,this.vz(b)+1);(b=new c.l).L(u),u=p;var _=[];for(_[0]=new c.l,_[1]=new c.l,_[2]=new c.l,_[3]=new c.l;o<this.wT&&this.dO(u);o++){h.zJ(b,_);for(var M=!1,T=0;4>T;T++)if(_[T].contains(s)){M=!0;var A=this.Np(u,T);A==-1&&(A=this.mP(u,T)),this.jx(A,this.vz(A)+1),u=A,b.L(_[T]);break}if(!M)break}return this.nS(a,s,o,b,u,f,p,m)},h.prototype.nS=function(a,s,o,u,p,f,m,b){var _=this.IF(p);if(f){if(p==m)return b;this.NP(b),f=b}else f=this.oP(),this.IB(f,a),this.FW(this.hv(f),s);return this.hX(f,p),_!=-1?(this.hx(f,_),this.ex(_,f)):this.BJ(p,f),this.NB(p,f),this.dx(p,this.nv(p)+1),this.cO(p)&&this.HQ(o,u,p),f},h.prototype.NP=function(a){var s=this.RF(a),o=this.IF(s),u=this.JR(a),p=this.pv(a);this.Wr(s)==a?(p!=-1?this.hx(p,-1):this.NB(s,-1),this.BJ(s,p)):o==a?(this.ex(u,-1),this.NB(s,u)):(this.hx(p,u),this.ex(u,p)),this.hx(a,-1),this.ex(a,-1),this.dx(s,this.nv(s)-1)},h.zJ=function(a,s){var o=.5*(a.v+a.C),u=.5*(a.G+a.H);s[0].L(o,u,a.C,a.H),s[1].L(a.v,u,o,a.H),s[2].L(a.v,a.G,o,u),s[3].L(o,a.G,a.C,u)},h.prototype.cO=function(a){return this.nv(a)==8&&!this.bG(a)},h.prototype.HQ=function(a,s,o){var u=this.Wr(o);do{var p=this.hv(u),f=this.ai.U(u,0);p=this.Xy(p),this.Bv(f,p,a,s,o,!0,u),u=f=this.pv(u)}while(u!=-1)},h.prototype.dO=function(a){return 8<=this.nv(a)||this.bG(a)},h.prototype.bG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},h.prototype.mP=function(a,s){var o=this.jf.De();return this.JW(a,s,o),this.jx(o,0),this.dx(o,0),this.Rk(o,a),this.FJ(o,this.lv(a)+1),this.IJ(o,s<<2*this.lv(a)|this.LF(a)),o},h.prototype.oP=function(){var a=this.ai.De();if(0<this.iw.size){var s=this.iw.Gc();this.iw.Jf()}else s=this.ys.length,this.ys.push(new c.l);return this.GW(a,s),a},h.prototype.Np=function(a,s){return this.jf.U(a,s)},h.prototype.JW=function(a,s,o){this.jf.T(a,s,o)},h.prototype.Wr=function(a){return this.jf.U(a,4)},h.prototype.BJ=function(a,s){this.jf.T(a,4,s)},h.prototype.IF=function(a){return this.jf.U(a,5)},h.prototype.NB=function(a,s){this.jf.T(a,5,s)},h.prototype.LF=function(a){return this.jf.U(a,6)},h.prototype.IJ=function(a,s){this.jf.T(a,6,s)},h.prototype.nv=function(a){return this.jf.U(a,7)},h.prototype.vz=function(a){return this.jf.U(a,8)},h.prototype.dx=function(a,s){this.jf.T(a,7,s)},h.prototype.jx=function(a,s){this.jf.T(a,8,s)},h.prototype.DR=function(a){return this.jf.U(a,9)},h.prototype.Rk=function(a,s){this.jf.T(a,9,s)},h.prototype.lv=function(a){return this.jf.U(a,10)},h.prototype.FJ=function(a,s){this.jf.T(a,10,s)},h.prototype.eR=function(a){return this.ai.U(a,0)},h.prototype.IB=function(a,s){this.ai.T(a,0,s)},h.prototype.JR=function(a){return this.ai.U(a,1)},h.prototype.pv=function(a){return this.ai.U(a,2)},h.prototype.hx=function(a,s){this.ai.T(a,1,s)},h.prototype.ex=function(a,s){this.ai.T(a,2,s)},h.prototype.RF=function(a){return this.ai.U(a,3)},h.prototype.hX=function(a,s){this.ai.T(a,3,s)},h.prototype.hv=function(a){return this.ai.U(a,4)},h.prototype.GW=function(a,s){this.ai.T(a,4,s)},h.prototype.Xy=function(a){return this.ys[a]},h.prototype.FW=function(a,s){this.ys[a].L(s)},h}();c.fu=w}(H||(H={})),function(c){var C;(C=c.WK||(c.WK={}))[C.Outside=0]="Outside",C[C.Inside=1]="Inside",C[C.Border=2]="Border";var w=function(){function a(s,o){this.KT=o,this.Xh=s}return a.prototype.ax=function(s,o){this.dH!=o&&s.flush(),this.dH=o},a.prototype.bF=function(s,o){for(var u=0;u<o;)for(var p=s[u++],f=s[u++],m=s[u++]*this.KT;p<f;p++)this.Xh[m+(p>>4)]|=this.dH<<2*(15&p)},a}();c.DY=w;var h=function(){function a(s,o,u){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(s,o,u)}return a.create=function(s,o,u){if(!a.uE(s))throw c.i.O();return a.rP(s,o,u)},a.kW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw c.i.ga("Internal Error")}return s},a.uE=function(s){return!(s.B()||s.K()!=1607&&s.K()!=1736)},a.prototype.mQ=function(s,o){o=o.Ha();for(var u=new c.h,p=new c.h;o.ab();)for(;o.Ia();){var f=o.ia();if(f.K()!=322)throw c.i.ga("Internal Error");s.Gh(f.bc(),u),s.Gh(f.xc(),p),this.Ti.fy(u.x,u.y,p.x,p.y)}this.Ti.dJ(c.Ox.Bx)},a.prototype.nQ=function(){throw c.i.ga("Internal Error")},a.prototype.My=function(s,o){for(var u=1;4>u;u++)s.fy(o[u-1].x,o[u-1].y,o[u].x,o[u].y);s.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.dJ(c.Ox.Bx)},a.prototype.mK=function(s,o,u){for(var p=[null,null,null,null],f=0;f<p.length;f++)p[f]=new c.h;o=o.Ha(),u=this.Lk.$X(u)+1.5,f=new c.h;for(var m=new c.h,b=new c.h,_=new c.h,M=new c.h,T=new c.l,A=new c.h;o.ab();){var O=!1,R=!0;for(A.na(0,0);o.Ia();){var j=o.ia();if(_.x=j.ta,_.y=j.oa,M.x=j.qa,M.y=j.ma,T.Pa(),T.$b(_.x,_.y),T.Nk(M.x,M.y),this.xl.CG(T)){this.Lk.Gh(M,M),R?(this.Lk.Gh(_,_),A.N(_),R=!1):_.N(A),f.vc(M,_);var z=.5>(j=f.length());j==0?f.na(1,0):(z||A.N(M),f.scale(u/j),m.na(-f.y,f.x),b.na(f.y,-f.x),_.sub(f),M.add(f),p[0].add(_,m),p[1].add(_,b),p[2].add(M,b),p[3].add(M,m),z?O=!0:this.My(s,p))}else O&&(this.My(s,p),O=!1),R=!0}O&&this.My(s,p)}},a.prototype.nC=function(s){return c.P.truncate(s*this.lH+this.WH)},a.prototype.oC=function(s){return c.P.truncate(s*this.Gs+this.YH)},a.rP=function(s,o,u){return new a(s,o,u)},a.prototype.Az=function(s,o,u){this.Hf=Math.max(c.P.truncate(2*Math.sqrt(u)+.5),64),this.Wm=c.P.truncate((2*this.Hf+31)/32),this.xl=new c.l,this.Kk=o,u=0;for(var p=this.Hf,f=this.Wm;8<=p;)u+=p*f,p=c.P.truncate(p/2),f=c.P.truncate((2*p+31)/32);this.Xh=c.P.mg(u,0),this.Ti=new c.Ox,u=new w(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,u),s.A(this.xl),this.xl.X(o,o),p=new c.l;var m=o*(f=c.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=f.da(),p.L(this.xl.tf(),Math.max(m,this.xl.S()),Math.max(o,this.xl.da())),this.NA=this.Kk,this.Lk=new c.Ed,this.Lk.kS(p,f),new c.Ed,s.K()){case 550:u.ax(this.Ti,2),this.nQ();break;case 1607:u.ax(this.Ti,2),this.mK(this.Ti,s,this.NA);break;case 1736:u.ax(this.Ti,1),this.mQ(this.Lk,s),u.ax(this.Ti,2),this.mK(this.Ti,s,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},a.prototype.SN=function(){this.Ti.flush();for(var s=0,o=this.Hf*this.Wm,u=this.Hf,p=c.P.truncate(this.Hf/2),f=this.Wm,m=c.P.truncate((2*p+31)/32);8<u;){for(u=0;u<p;u++)for(var b=2*u,_=2*u+1,M=0;M<p;M++){var T=2*M,A=2*M+1,O=T>>4;T=2*(15&T);var R=A>>4;A=2*(15&A);var j=this.Xh[s+f*b+O]>>T&3;j|=this.Xh[s+f*b+R]>>A&3,j|=this.Xh[s+f*_+O]>>T&3,j|=this.Xh[s+f*_+R]>>A&3,this.Xh[o+m*u+(M>>4)]|=j<<2*(15&M)}u=p,f=m,s=o,p=c.P.truncate(u/2),m=c.P.truncate((2*p+31)/32),o=s+f*u}},a.prototype.Uo=function(s,o){return this.xl.contains(s,o)?(s=this.nC(s),o=this.oC(o),0>s||s>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(s>>4)]>>2*(15&s)&3)==0?0:o==1?1:2):0},a.prototype.To=function(s){if(!s.Fa(this.xl))return 0;var o=this.nC(s.v),u=this.nC(s.C),p=this.oC(s.G);if(s=this.oC(s.H),0>o&&(o=0),0>p&&(p=0),u>=this.Hf&&(u=this.Hf-1),s>=this.Hf&&(s=this.Hf-1),o>u||p>s)return 0;for(var f=Math.max(u-o,1)*Math.max(s-p,1),m=0,b=this.Wm,_=this.Hf,M=0;;){if(32>f||16>_){for(f=p;f<=s;f++)for(var T=o;T<=u;T++)if(1<(M=this.Xh[m+b*f+(T>>4)]>>2*(15&T)&3))return 2;if(M==0)return 0;if(M==1)return 1}m+=b*_,_=c.P.truncate(_/2),b=c.P.truncate((2*_+31)/32),o=c.P.truncate(o/2),p=c.P.truncate(p/2),u=c.P.truncate(u/2),s=c.P.truncate(s/2),f=Math.max(u-o,1)*Math.max(s-p,1)}},a.prototype.MR=function(){return this.Hf*this.Wm},a}();c.Mx=h}(H||(H={})),function(c){var C;(C=c.QL||(c.QL={}))[C.contains=1]="contains",C[C.within=2]="within",C[C.equals=3]="equals",C[C.disjoint=4]="disjoint",C[C.touches=8]="touches",C[C.crosses=16]="crosses",C[C.overlaps=32]="overlaps",C[C.unknown=0]="unknown",C[C.intersects=1073741824]="intersects";var w=function(){function a(){}return a.construct=function(s,o,u,p,f,m,b,_){var M=new a;return M.rw=s,M.Om=o,M.Mj=u,M.Ui=p,M.wH=f,M.OY=m,M.PY=b,M.QY=_,M},a}();c.Xt=function(){function a(){}return a.xD=function(s,o,u){if(a.ry(s)){var p=c.ua.mj(o,s,!1);o=!1,c.Wk.xE(s)&&(o=o||s.nu(p,u)),(p=s.K())!=1736&&p!=1607||!c.Wk.vE(s)||u==0||(o=o||s.hj(u)),p!=1736&&p!=1607||!c.Wk.wE(s)||u==0||o||s.cM()}},a.ry=function(s){return c.Wk.xE(s)||c.Wk.vE(s)||c.Wk.wE(s)},a}();var h=function(){function a(){this.th=[]}return a.uB=function(s,o,u,p,f){var m=s.K(),b=o.K();if(m==197){if(b==197)return a.oW(s,o,u,p);if(b==33)return p==2?p=1:p==1&&(p=2),a.cJ(o,s,u,p)}else if(m==33){if(b==197)return a.cJ(s,o,u,p);if(b==33)return a.qW(s,o,u,p)}if(s.B()||o.B())return p==4;var _=new c.l;s.A(_);var M=new c.l;o.A(M);var T=new c.l;if(T.L(_),T.$b(M),u=c.ua.Xd(u,T,!1),a.fk(_,M,u))return p==4;switch(_=!1,c.Xk.zd(m)&&((m=new c.Ua(s.description)).pc(s,!0),s=m,m=1607),c.Xk.zd(b)&&((b=new c.Ua(o.description)).pc(o,!0),o=b,b=1607),m!=197&&b!=197?(s.Eb()<o.Eb()||m==33&&b==550)&&(p==2?p=1:p==1&&(p=2)):m!=1736&&b!=197&&(p==2?p=1:p==1&&(p=2)),m){case 1736:switch(b){case 1736:_=a.st(s,o,u,p,f);break;case 1607:_=a.bn(s,o,u,p,f);break;case 33:_=a.rt(s,o,u,p);break;case 550:_=a.qt(s,o,u,p,f);break;case 197:_=a.BI(s,o,u,p,f)}break;case 1607:switch(b){case 1736:_=a.bn(o,s,u,p,f);break;case 1607:_=a.bB(s,o,u,p,f);break;case 33:_=a.ut(s,o,u,p,f);break;case 550:_=a.tt(s,o,u,p,f);break;case 197:_=a.HI(s,o,u,p)}break;case 33:switch(b){case 1736:_=a.rt(o,s,u,p);break;case 1607:_=a.ut(o,s,u,p,f);break;case 550:_=a.mt(o,s,u,p)}break;case 550:switch(b){case 1736:_=a.qt(o,s,u,p,f);break;case 1607:_=a.tt(o,s,u,p,f);break;case 550:_=a.UA(s,o,u,p,f);break;case 33:_=a.mt(s,o,u,p);break;case 197:_=a.cI(s,o,u,p)}break;case 197:switch(b){case 1736:_=a.BI(o,s,u,p,f);break;case 1607:_=a.HI(o,s,u,p);break;case 550:_=a.cI(o,s,u,p)}}return _},a.oW=function(s,o,u,p){if(s.B()||o.B())return p==4;var f=new c.l,m=new c.l,b=new c.l;switch(s.A(f),o.A(m),b.L(f),b.$b(m),s=c.ua.Xd(u,b,!1),p){case 4:return a.fk(f,m,s);case 2:return a.eF(m,f,s);case 1:return a.eF(f,m,s);case 3:return a.gk(f,m,s);case 8:return a.YP(f,m,s);case 32:return a.XP(f,m,s);case 16:return a.WP(f,m,s)}return!1},a.cJ=function(s,o,u,p){if(s.B()||o.B())return p==4;s=s.D();var f=new c.l,m=new c.l;switch(o.A(f),m.L(s),m.$b(f),o=c.ua.Xd(u,m,!1),p){case 4:return a.Tw(s,f,o);case 2:return a.$A(s,f,o);case 1:return a.MU(s,f,o);case 3:return a.qI(s,f,o);case 8:return a.ZA(s,f,o)}return!1},a.qW=function(s,o,u,p){if(s.B()||o.B())return p==4;s=s.D(),o=o.D();var f=new c.l;switch(f.L(s),f.$b(o),u=c.ua.Xd(u,f,!1),p){case 4:return a.NU(s,o,u);case 2:return a.pI(o,s,u);case 1:return a.pI(s,o,u);case 3:return a.rI(s,o,u)}return!1},a.st=function(s,o,u,p,f){switch(p){case 4:return a.fV(s,o,u);case 2:return a.Uw(o,s,u,f);case 1:return a.Uw(s,o,u,f);case 3:return a.iV(s,o,u);case 8:return a.qV(s,o,u);case 32:return a.lV(s,o,u,f)}return!1},a.bn=function(s,o,u,p,f){switch(p){case 4:return a.gV(s,o,u);case 1:return a.aB(s,o,u,f);case 8:return a.rV(s,o,u,f);case 16:return a.bV(s,o,u)}return!1},a.rt=function(s,o,u,p){switch(p){case 4:return a.eV(s,o,u);case 1:return a.ZU(s,o,u);case 8:return a.pV(s,o,u)}return!1},a.qt=function(s,o,u,p){switch(p){case 4:return a.dV(s,o,u);case 1:return a.YU(s,o,u);case 8:return a.oV(s,o,u);case 16:return a.aV(s,o,u)}return!1},a.BI=function(s,o,u,p,f){if(a.cV(s,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.sV(s,o,u);case 1:return a.XU(s,o,u);case 3:return a.hV(s,o,u);case 8:return a.nV(s,o,u,f);case 32:return a.kV(s,o,u,f);case 16:return a.$U(s,o,u,f)}return!1},a.bB=function(s,o,u,p){switch(p){case 4:return a.BV(s,o,u);case 2:return a.FI(o,s,u);case 1:return a.FI(s,o,u);case 3:return a.DV(s,o,u);case 8:return a.II(s,o,u);case 32:return a.HV(s,o,u);case 16:return a.GI(s,o,u)}return!1},a.ut=function(s,o,u,p){switch(p){case 4:return a.AV(s,o,u);case 1:return a.vV(s,o,u);case 8:return a.LV(s,o,u)}return!1},a.tt=function(s,o,u,p){switch(p){case 4:return a.zV(s,o,u);case 1:return a.uV(s,o,u);case 8:return a.KV(s,o,u);case 16:return a.xV(s,o,u)}return!1},a.HI=function(s,o,u,p){if(a.yV(s,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.MV(s,o,u);case 1:return a.tV(s,o,u);case 3:return a.CV(s,o,u);case 8:return a.JV(s,o,u);case 32:return a.GV(s,o,u);case 16:return a.wV(s,o,u)}return!1},a.UA=function(s,o,u,p){switch(p){case 4:return a.bU(s,o,u);case 2:return a.$H(o,s,u);case 1:return a.$H(s,o,u);case 3:return a.dU(s,o,u);case 32:return a.jU(s,o,u)}return!1},a.mt=function(s,o,u,p){switch(p){case 4:return a.aI(s,o,u);case 2:return a.nU(s,o,u);case 1:return a.ZT(s,o,u);case 3:return a.Pw(s,o,u)}return!1},a.cI=function(s,o,u,p){switch(p){case 4:return a.aU(s,o,u);case 2:return a.mU(s,o,u);case 1:return a.YT(s,o,u);case 3:return a.cU(s,o,u);case 8:return a.lU(s,o,u);case 16:return a.$T(s,o,u)}return!1},a.iV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.gk(p,f,u)&&(p=a.rc(s,o,!1))!=4&&p!=1&&p!=2&&(!!a.ZH(s,o,u)||(p=s.Rb(),f=o.Rb(),!(Math.abs(p-f)>4*Math.max(s.I(),o.I())*u)&&a.Rz(s,o,u,!0)))},a.fV=function(s,o,u){var p=a.rc(s,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.zI(s,o,u)},a.qV=function(s,o,u){var p=a.rc(s,o,!1);return p!=4&&p!=1&&p!=2&&a.DI(s,o,u,null)},a.lV=function(s,o,u,p){var f=a.rc(s,o,!1);return f!=4&&f!=1&&f!=2&&a.AI(s,o,u,p)},a.Uw=function(s,o,u,p){var f=new c.l,m=new c.l;return s.A(f),o.A(m),!!a.Ac(f,m,u)&&(f=a.rc(s,o,!1))!=4&&f!=2&&(f==1||a.wI(s,o,u,p))},a.gV=function(s,o,u){var p=a.rc(s,o,!0);return p==4||p!=1&&p!=1073741824&&a.zI(s,o,u)},a.rV=function(s,o,u,p){var f=a.rc(s,o,!1);return f!=4&&f!=1&&a.EI(s,o,u,p)},a.bV=function(s,o,u){var p=a.rc(s,o,!1);return p!=4&&p!=1&&a.yI(s,o,u,null)},a.aB=function(s,o,u,p){var f=new c.l,m=new c.l;return s.A(f),o.A(m),!!a.Ac(f,m,u)&&(f=a.rc(s,o,!1))!=4&&(f==1||a.xI(s,o,u,p))},a.eV=function(s,o,u){return c.jd.FG(s,o,u)==0},a.pV=function(s,o,u){return o=o.D(),a.CI(s,o,u)},a.ZU=function(s,o,u){return o=o.D(),a.vI(s,o,u)},a.dV=function(s,o,u){var p=a.rc(s,o,!1);if(p==4)return!0;if(p==1)return!1;p=new c.l,s.A(p),p.X(u,u);for(var f=new c.h,m=0;m<o.I();m++)if(o.D(m,f),p.contains(f)){var b=c.jd.Zd(s,f,u);if(b==1||b==2)return!1}return!0},a.oV=function(s,o,u){var p=this.rc(s,o,!1);if(p==4||p==1)return!1;p=new c.l,s.A(p),p.X(u,u);for(var f=!1,m=s,b=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(p.contains(M)){if((M=c.jd.Zd(m,M,u))==2)f=!0;else if(M==1)return!1}b||(!c.Fg.Ol(s,o.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?m=s:(m=new c.Ea,s.copyTo(m),m.hj(1)),b=!0)}return!!f},a.aV=function(s,o,u){var p=this.rc(s,o,!1);if(p==4||p==1)return!1;var f=new c.l;p=new c.l;var m=new c.l;s.A(f),o.A(m),p.L(f),p.X(u,u),m=f=!1;for(var b=s,_=!1,M=0;M<o.I();M++){var T=o.Oa(M);if(p.contains(T)?(T=c.jd.Zd(b,T,u))==0?m=!0:T==1&&(f=!0):m=!0,f&&m)return!0;_||(!c.Fg.Ol(s,o.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?b=s:(b=new c.Ea,s.copyTo(b),b.hj(1)),_=!0)}return!1},a.YU=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),!this.Ac(p,f,u)||(f=this.rc(s,o,!1))==4)return!1;if(f==1)return!0;f=!1;for(var m=s,b=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(!p.contains(M))return!1;if((M=c.jd.Zd(m,M,u))==1)f=!0;else if(M==0)return!1;b||(!c.Fg.Ol(s,o.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?m=s:(m=new c.Ea,s.copyTo(m),m.hj(1)),b=!0)}return f},a.hV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.gk(p,f,u)&&((p=new c.Ea).bd(o,!1),a.Rz(s,p,u,!0))},a.cV=function(s,o,u){var p=a.rc(s,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var f=new c.l;if(p=new c.l,s.A(f),o.A(p),a.Ac(p,f,u)||(f=new c.h,p.fn(f),(o=c.jd.Zd(s,f,u))!=0)||(p.VI(f),(o=c.jd.Zd(s,f,u))!=0)||(p.gn(f),(o=c.jd.Zd(s,f,u))!=0)||(p.YI(f),(o=c.jd.Zd(s,f,u))!=0))return!1;o=s.vb(0),(f=new c.l).L(p),f.X(u,u);for(var m=0,b=s.I();m<b;m++){var _=o.read(2*m),M=o.read(2*m+1);if(f.contains(_,M))return!1}return!a.NG(s,p,u)},a.nV=function(s,o,u,p){var f=a.rc(s,o,!1);if(f==4||f==1||f==2)return!1;f=new c.l;var m=new c.l;return s.A(f),o.A(m),!a.Ac(m,f,u)&&(m.S()<=u&&m.da()<=u?(o=o.Kp(),a.CI(s,o,u)):m.S()<=u||m.da()<=u?(f=new c.Ua,m=new c.Ta,o.If(0,m),f.nf(m),o.If(2,m),f.lineTo(m),a.EI(s,f,u,p)):((f=new c.Ea).bd(o,!1),a.DI(s,f,u,p)))},a.kV=function(s,o,u,p){var f=a.rc(s,o,!1);if(f==4||f==1||f==2)return!1;f=new c.l;var m=new c.l;return s.A(f),o.A(m),!(a.Ac(m,f,u)||m.S()<=u||m.da()<=u)&&((f=new c.Ea).bd(o,!1),a.AI(s,f,u,p))},a.sV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),a.Ac(f,p,u)},a.XU=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.Ac(p,f,u)&&(p=a.rc(s,o,!1))!=4&&p!=2&&(p==1||(f.S()<=u&&f.da()<=u?(o=o.Kp(),a.vI(s,o,u)):f.S()<=u||f.da()<=u?(f=new c.Ua,p=new c.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.xI(s,f,u,null)):((f=new c.Ea).bd(o,!1),a.wI(s,f,u,null))))},a.$U=function(s,o,u,p){var f=new c.l,m=new c.l;return s.A(f),o.A(m),!(a.Ac(m,f,u)||m.da()>u&&m.S()>u||m.da()<=u&&m.S()<=u)&&(f=new c.Ua,m=new c.Ta,o.If(0,m),f.nf(m),o.If(2,m),f.lineTo(m),a.yI(s,f,u,p))},a.DV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.gk(p,f,u)||a.rc(s,o,!1)==4)&&(!!a.ZH(s,o,u)||a.Rz(s,o,u,!1))},a.BV=function(s,o,u){return this.rc(s,o,!1)==4||!!new c.am(s,o,u,!0).next()&&!this.OG(s,o,u)},a.II=function(s,o,u){if(a.rc(s,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(s,o,u,p)!=0)return!1;for(var f=new c.ee,m=0;m<p.size;m+=2){var b=p.read(m),_=p.read(m+1);f.Du(b,_)}return s=s.ng(),o=o.ng(),s.Gd(o,0,o.I()),a.Ow(s,f,u)},a.GI=function(s,o,u){if(a.rc(s,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(s,o,u,p)!=0)return!1;for(var f=new c.ee,m=0;m<p.size;m+=2){var b=p.read(m),_=p.read(m+1);f.Du(b,_)}return s=s.ng(),o=o.ng(),s.Gd(o,0,o.I()),!a.Ow(s,f,u)},a.HV=function(s,o,u){return a.rc(s,o,!1)!=4&&a.QG(s,o,u)},a.FI=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.Ac(p,f,u)||a.rc(s,o,!1)==4)&&a.Am(o,s,u,!1)},a.AV=function(s,o,u){return a.rc(s,o,!1)==4||(o=o.D(),!a.Tz(s,o,u))},a.LV=function(s,o,u){return a.rc(s,o,!1)!=4&&(o=o.D(),a.Uz(s,o,u))},a.vV=function(s,o,u){return a.rc(s,o,!1)!=4&&(o=o.D(),a.MG(s,o,u))},a.zV=function(s,o,u){return a.rc(s,o,!1)==4||!a.PG(s,o,u,!1)},a.KV=function(s,o,u){if(this.rc(s,o,!1)==4)return!1;var p=s.Ha(),f=new c.l,m=new c.l,b=new c.l;s.A(f),o.A(m),f.X(u,u),m.X(u,u),b.L(f),b.Fa(m),f=null;var _=s.Cb;if(_!=null){var M=_.Gb;f=_.Bo,M==null&&(M=_=c.ua.lj(s,b))}else M=_=c.ua.lj(s,b);var T=M.getIterator(),A=null;f!=null&&(A=f.getIterator());var O=new c.h,R=new c.h,j=!1,z=u*u;for(f=new c.rn(o.I()),_=0;_<o.I();_++)f.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,O),b.contains(O)){if(m.L(O.x,O.y,O.x,O.y),A!=null&&(A.Zi(m,u),A.next()==-1))continue;T.Zi(m,u);for(var V=T.next();V!=-1;V=T.next())if(p.Wb(M.ka(V)),(V=p.ia()).ic(V.ge(O,!1),R),c.h.zc(O,R)<=z){f.write(_,1),j=!0;break}}if(!j)return!1;for(s=s.ng(),p=new c.ee,m=new c.h,_=0;_<o.I();_++)f.read(_)!=0&&(o.D(_,m),p.Du(m.x,m.y));return this.Ow(s,p,u)},a.xV=function(s,o,u){if(this.rc(s,o,!1)==4)return!1;var p=s.Ha(),f=new c.l,m=new c.l,b=new c.l;s.A(f),o.A(m),f.X(u,u),m.X(u,u),b.L(f),b.Fa(m),f=null;var _=s.Cb;if(_!=null){var M=_.Gb;f=_.Bo,M==null&&(M=_=c.ua.lj(s,b))}else M=_=c.ua.lj(s,b);var T=M.getIterator(),A=null;f!=null&&(A=f.getIterator());var O=new c.h,R=new c.h,j=!1,z=!1,V=u*u;for(f=new c.rn(o.I()),_=0;_<o.I();_++)f.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,O),b.contains(O)){if(m.L(O.x,O.y,O.x,O.y),A!=null&&(A.Zi(m,u),A.next()==-1)){z=!0;continue}T.Zi(m,u);for(var F=!1,G=T.next();G!=-1;G=T.next())if(p.Wb(M.ka(G)),(G=p.ia()).ic(G.ge(O,!1),R),c.h.zc(O,R)<=V){f.write(_,1),F=j=!0;break}F||(z=!0)}else z=!0;if(!j||!z)return!1;for(s=s.ng(),p=new c.ee,m=new c.h,_=0;_<o.I();_++)f.read(_)!=0&&(o.D(_,m),p.Du(m.x,m.y));return!this.Ow(s,p,u)},a.uV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.Ac(p,f,u)||a.rc(s,o,!1)==4||!a.PG(s,o,u,!0))&&(s=s.ng(),!a.bI(s,o,u))},a.CV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(f.da()>u&&f.S()>u)&&a.gk(p,f,u)},a.yV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!a.Ac(f,p,u)&&!a.NG(s,f,u)},a.JV=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),f.da()<=u&&f.S()<=u)return f=o.Kp(),a.Uz(s,f,u);if(f.da()<=u||f.S()<=u)return f=new c.Ua,p=new c.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.II(s,f,u);s=s.Ha(),o=new c.l,p=new c.l,o.L(f),p.L(f),o.X(-u,-u),p.X(u,u),f=!1;for(var m=new c.l,b=new c.l;s.ab();)for(;s.Ia();){if(s.ia().A(m),b.L(o),b.Fa(m),!b.B()&&(b.da()>u||b.S()>u))return!1;b.L(p),b.Fa(m),b.B()||(f=!0)}return f},a.GV=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(a.Ac(p,f,u)||a.Ac(f,p,u)||a.Ac(f,p,u)||f.da()>u&&f.S()>u||f.da()<=u&&f.S()<=u)&&(p=new c.Ua,f=new c.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.QG(s,p,u))},a.MV=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),!a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return a.Ac(f,p,u);s=s.Ha(),(o=new c.l).L(f),o.X(-u,-u),f=!1,p=new c.l;for(var m=new c.l;s.ab();)for(;s.Ia();)s.ia().A(p),o.jm(p)?f=!0:(m.L(o),m.Fa(p),!m.B()&&(m.da()>u||m.S()>u)&&(f=!0));return f},a.tV=function(s,o,u){var p=new c.l,f=new c.l;return o.A(f),s.A(p),!(!a.Ac(p,f,u)||f.da()>u&&f.S()>u)&&(f.da()<=u&&f.S()<=u?(o=o.Kp(),a.MG(s,o,u)):(p=new c.Ua,f=new c.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.Am(p,s,u,!1)))},a.wV=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return p=new c.Ua,f=new c.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.GI(s,p,u);s=s.Ha(),o=new c.l,(p=new c.l).L(f),o.L(f),p.X(-u,-u),o.X(u,u);for(var m=f=!1,b=new c.l,_=new c.l;s.ab();)for(;s.Ia();)if(s.ia().A(b),m||o.contains(b)||(m=!0),f||(_.L(p),_.Fa(b),!_.B()&&(_.da()>u||_.S()>u)&&(f=!0)),f&&m)return!0;return!1},a.dU=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.gk(p,f,u)&&(!!a.eU(s,o,u)||a.TA(s,o,u,!1,!0,!1))},a.bU=function(s,o,u){return!a.bI(s,o,u)},a.jU=function(s,o,u){return a.TA(s,o,u,!1,!1,!0)},a.$H=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!!a.Ac(p,f,u)&&a.TA(o,s,u,!0,!1,!1)},a.Ow=function(s,o,u){u*=u;for(var p=new c.h,f=new c.h,m=0;m<o.I();m++){o.D(m,f);for(var b=!1,_=0;_<s.I();_++)if(s.D(_,p),c.h.zc(p,f)<=u){b=!0;break}if(!b)return!1}return!0},a.Pw=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),a.gk(p,f,u)},a.aI=function(s,o,u){return o=o.D(),a.lt(s,o,u)},a.nU=function(s,o,u){return a.Pw(s,o,u)},a.ZT=function(s,o,u){return!a.aI(s,o,u)},a.cU=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(f.da()>u||f.S()>u)&&a.gk(p,f,u)},a.aU=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),a.Ac(f,p,u))return!1;for((o=new c.l).L(f),o.X(u,u),u=new c.h,f=0;f<s.I();f++)if(s.D(f,u),o.contains(u))return!1;return!0},a.lU=function(s,o,u){var p=new c.l,f=new c.l,m=new c.l;if(o.A(p),p.da()<=u&&p.S()<=u)return!1;if(p.da()<=u||p.S()<=u){o=new c.h;var b=!1;f.L(p),m.L(p),f.X(u,u),p.da()>u?m.X(0,-u):m.X(-u,0);for(var _=0;_<s.I();_++)if(s.D(_,o),f.contains(o)){if(p.da()>u){if(o.y>m.G&&o.y<m.H)return!1}else if(o.x>m.v&&o.x<m.C)return!1;b=!0}return b}for(f.L(p),m.L(p),f.X(u,u),m.X(-u,-u),o=new c.h,b=!1,_=0;_<s.I();_++)if(s.D(_,o),f.contains(o)){if(m.jm(o))return!1;b=!0}return b},a.mU=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),!a.Ac(f,p,u))return!1;if(f.da()<=u&&f.S()<=u)return a.gk(p,f,u);if(f.da()<=u||f.S()<=u){o=!1,p=new c.l;var m=new c.l;p.L(f),m.L(f),f.da()>u?p.X(0,-u):p.X(-u,0),m.X(u,u);for(var b=new c.h,_=0;_<s.I();_++){if(s.D(_,b),!m.contains(b))return!1;f.da()>u?b.y>p.G&&b.y<p.H&&(o=!0):b.x>p.v&&b.x<p.C&&(o=!0)}return o}for(o=!1,p=new c.l,m=new c.l,p.L(f),m.L(f),p.X(-u,-u),m.X(u,u),b=new c.h,_=0;_<s.I();_++){if(s.D(_,b),!m.contains(b))return!1;p.jm(b)&&(o=!0)}return o},a.YT=function(s,o,u){var p=new c.l,f=new c.l;return s.A(p),o.A(f),!(!a.Ac(p,f,u)||f.da()>u||f.S()>u)&&(o=o.Kp(),!a.lt(s,o,u))},a.$T=function(s,o,u){var p=new c.l,f=new c.l;if(s.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u){o=new c.l,p=new c.l,o.L(f),f.da()>u?o.X(0,-u):o.X(-u,0),p.L(f),p.X(u,u);for(var m=new c.h,b=!1,_=!1,M=0;M<s.I();M++)if(s.D(M,m),b||(f.da()>u?m.y>o.G&&m.y<o.H&&(b=!0):m.x>o.v&&m.x<o.C&&(b=!0)),_||p.contains(m)||(_=!0),b&&_)return!0;return!1}for(o=new c.l,p=new c.l,o.L(f),o.X(-u,-u),p.L(f),p.X(u,u),m=new c.h,_=b=!1,M=0;M<s.I();M++)if(s.D(M,m),!b&&o.jm(m)&&(b=!0),_||p.contains(m)||(_=!0),b&&_)return!0;return!1},a.rI=function(s,o,u){return c.h.zc(s,o)<=u*u},a.NU=function(s,o,u){return c.h.zc(s,o)>u*u},a.pI=function(s,o,u){return a.rI(s,o,u)},a.qI=function(s,o,u){var p=new c.l;return p.L(s),a.gk(p,o,u)},a.Tw=function(s,o,u){var p=new c.l;return p.L(o),p.X(u,u),!p.contains(s)},a.ZA=function(s,o,u){if(o.da()<=u&&o.S()<=u)return!1;var p=new c.l,f=new c.l;if(p.L(o),p.X(u,u),!p.contains(s))return!1;if(o.da()<=u||o.S()<=u){if(f.L(o),o.da()>u?f.X(0,-u):f.X(-u,0),o.da()>u){if(s.y>f.G&&s.y<f.H)return!1}else if(s.x>f.v&&s.x<f.C)return!1;return!0}return f.L(o),f.X(-u,-u),!f.jm(s)},a.$A=function(s,o,u){if(o.da()<=u&&o.S()<=u)return!0;if(o.da()<=u||o.S()<=u){var p=new c.l;p.L(o),o.da()>u?p.X(0,-u):p.X(-u,0);var f=!1;return o.da()>u?s.y>p.G&&s.y<p.H&&(f=!0):s.x>p.v&&s.x<p.C&&(f=!0),f}return(p=new c.l).L(o),p.X(-u,-u),p.jm(s)},a.MU=function(s,o,u){return a.qI(s,o,u)},a.gk=function(s,o,u){return a.Ac(s,o,u)&&a.Ac(o,s,u)},a.fk=function(s,o,u){var p=new c.l;return p.L(o),p.X(u,u),!s.isIntersecting(p)},a.YP=function(s,o,u){if(s.da()<=u&&s.S()<=u){var p=s.tf();return a.ZA(p,o,u)}if(o.da()<=u&&o.S()<=u)return p=o.tf(),a.ZA(p,s,u);if(s.da()>u&&s.S()>u&&(o.da()<=u||o.S()<=u)?p=o:(p=s,s=o),p.da()<=u||p.S()<=u){if(s.da()<=u||s.S()<=u){o=new c.zb;var f=new c.zb,m=[0,0],b=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),s.fn(_),f.Ec(_),s.gn(_),f.Rc(_),o.Fa(f,null,m,b,u),o.Fa(f,null,null,null,u)==1&&(m[0]==0||m[1]==1||b[0]==0||b[1]==1)}return o=new c.l,f=new c.l,o.L(s),o.X(-u,-u),f.L(o),f.Fa(p),!(!f.B()&&(f.da()>u||f.S()>u))}return s.X(u,u),(f=new c.l).L(p),f.Fa(s),!(f.B()||!f.B()&&f.da()>u&&f.S()>u)},a.XP=function(s,o,u){if(a.Ac(s,o,u)||a.Ac(o,s,u)||s.da()<=u&&s.S()<=u||o.da()<=u&&o.S()<=u)return!1;if(s.da()<=u||s.S()<=u){if(o.da()>u&&o.S()>u)return!1;var p=new c.zb,f=new c.zb,m=[0,0],b=[0,0],_=new c.h;return s.fn(_),p.Ec(_),s.gn(_),p.Rc(_),o.fn(_),f.Ec(_),o.gn(_),f.Rc(_),p.Fa(f,null,m,b,u),p.Fa(f,null,null,null,u)==2&&(0<m[0]||1>m[1])&&(0<b[0]||1>b[1])}return!(o.da()<=u||o.S()<=u)&&((p=new c.l).L(s),p.Fa(o),!(p.B()||p.da()<=u||p.S()<=u))},a.eF=function(s,o,u){if(!a.Ac(s,o,u))return!1;if(s.da()<=u&&s.S()<=u)return s=s.tf(),a.$A(s,o,u);if(o.da()<=u&&o.S()<=u)return o=o.tf(),a.$A(o,s,u);if(s.da()<=u||s.S()<=u)return a.Ac(s,o,u);if(o.da()<=u||o.S()<=u){var p=new c.l;return p.L(s),p.X(-u,-u),p.jm(o)?!0:((s=new c.l).L(p),s.Fa(o),!(s.B()||s.da()<=u&&s.S()<=u))}return a.Ac(s,o,u)},a.WP=function(s,o,u){if(a.Ac(s,o,u)||a.Ac(o,s,u)||s.da()<=u&&s.S()<=u||o.da()<=u&&o.S()<=u||o.da()>u&&o.S()>u&&s.da()>u&&s.S()>u)return!1;if(s.da()>u&&s.S()>u)var p=o;else p=s,s=o;if(s.da()>u&&s.S()>u){o=new c.l;var f=new c.l;return f.L(s),f.X(-u,-u),o.L(f),o.Fa(p),!(o.B()||o.da()<=u&&o.S()<=u)}o=new c.zb,f=new c.zb;var m=[0,0],b=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),s.fn(_),f.Ec(_),s.gn(_),f.Rc(_),o.Fa(f,null,m,b,u),o.Fa(f,null,null,null,u)==1&&0<m[0]&&1>m[1]&&0<b[0]&&1>b[1]},a.zI=function(s,o,u){var p=new c.l,f=new c.l,m=new c.am(s,o,u,!0);if(!m.next())return!0;if(this.OG(s,o,u))return!1;var b=s,_=null;o.K()==1736&&(_=o);var M=!1,T=!1;do{var A=m.pl(),O=m.jl();if(O=o.Oa(o.Ca(O)),p.L(m.oz()),p.X(u,u),p.contains(O)&&(O=c.jd.Zd(b,O,0))!=0||o.K()==1736&&(A=s.Oa(s.Ca(A)),f.L(m.Wy()),f.X(u,u),f.contains(A)&&(O=c.jd.Zd(_,A,0))!=0))return!1;M||(!c.Fg.Ol(s,o.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?b=s:(b=new c.Ea,s.copyTo(b),b.hj(1)),M=!0),o.K()!=1736||T||(T=o,!c.Fg.Ol(T,s.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(_=new c.Ea,T.copyTo(_),_.hj(1)),T=!0)}while(m.next());return!0},a.Ac=function(s,o,u){var p=new c.l;return p.L(s),p.X(u,u),p.contains(o)},a.ns=function(s,o,u){var p=new c.l;return p.L(o),p.X(u,u),o=new c.h,s.fn(o),!p.contains(o)||(s.VI(o),!p.contains(o)||(s.YI(o),!p.contains(o)||(s.gn(o),!p.contains(o))))},a.ZH=function(s,o,u){if(s.ea()!=o.ea()||s.I()!=o.I())return!1;var p=new c.h,f=new c.h,m=!0;u*=u;for(var b=0;b<s.ea();b++){if(s.Wc(b)!=o.Wc(b)){m=!1;break}for(var _=s.Ca(b);_<o.Wc(b);_++)if(s.D(_,p),o.D(_,f),c.h.zc(p,f)>u){m=!1;break}if(!m)break}return!!m},a.eU=function(s,o,u){if(s.I()!=o.I())return!1;var p=new c.h,f=new c.h,m=!0;u*=u;for(var b=0;b<s.I();b++)if(s.D(b,p),o.D(b,f),c.h.zc(p,f)>u){m=!1;break}return!!m},a.TA=function(s,o,u,p,f,m){var b=!1;if(s.I()>o.I()){p&&(p=!1,b=!0);var _=o}else _=s,s=o;if(o=null,f||m||b){o=new c.rn(s.I());for(var M=0;M<s.I();M++)o.write(M,0)}M=new c.l;var T=new c.l,A=new c.l;_.A(M),s.A(T),M.X(u,u),T.X(u,u),A.L(M),A.Fa(T),T=new c.h;for(var O=new c.h,R=!0,j=c.ua.jE(s,A),z=j.getIterator(),V=u*u,F=0;F<_.I();F++)if(_.D(F,T),A.contains(T)){var G=!1;M.L(T.x,T.y,T.x,T.y),z.Zi(M,u);for(var Z=z.next();Z!=-1&&(Z=j.ka(Z),s.D(Z,O),!(c.h.zc(T,O)<=V&&((f||m||b)&&o.write(Z,1),G=!0,p)));Z=z.next());if(!G&&(R=!1,f||p))return!1}else{if(f||p)return!1;R=!1}if(m&&R)return!1;if(p)return!0;for(M=0;M<s.I();M++)if(o.read(M)==1){if(m)return!0}else if(f||b)return!1;return!m},a.bI=function(s,o,u){if(s.I()>o.I())var p=o;else p=s,s=o;o=new c.l;var f=new c.l,m=new c.l;p.A(o),s.A(f),o.X(u,u),f.X(u,u),m.L(o),m.Fa(f),f=new c.h;for(var b=new c.h,_=u*u,M=c.ua.jE(s,m),T=M.getIterator(),A=0;A<p.I();A++)if(p.D(A,f),m.contains(f)){o.L(f.x,f.y,f.x,f.y),T.Zi(o,u);for(var O=T.next();O!=-1;O=T.next())if(s.D(M.ka(O),b),c.h.zc(f,b)<=_)return!0}return!1},a.Rz=function(s,o,u,p){return a.Am(s,o,u,p)&&a.Am(o,s,u,p)},a.Am=function(s,o,u,p){function f(De,Se){return O.LE(De,Se)}var m,b=!0,_=[0,0],M=[0,0],T=0,A=new c.ja(0),O=new a,R=new c.l,j=new c.l,z=new c.l;s.A(R),o.A(j),R.X(u,u),j.X(u,u),z.L(R),z.Fa(j),s=s.Ha(),j=o.Ha();var V=null,F=V=null,G=o.Cb;for(G!=null?(V=G.Gb,F=G.Bo,V==null&&(V=c.ua.lj(o,z))):V=c.ua.lj(o,z),o=V.getIterator(),G=null,F!=null&&(G=F.getIterator());s.ab();)for(;s.Ia();){var Z=!1,K=s.ia();if(K.A(R),!R.isIntersecting(z)||G!=null&&(G.Zi(R,u),G.next()==-1))return!1;for(F=K.Rb(),o.Wo(K,u),m=o.next();m!=-1;m=o.next()){j.Wb(V.ka(m)),m=j.ia();var re=K.Fa(m,null,_,M,u);if(re==2&&(!p||M[0]<=M[1])){re=_[0];var te=_[1],he=M[0],ye=M[1];if(re*F<=u&&(1-te)*F<=u){Z=!0,T=0,A.resize(0),O.th.length=0;var pe=s.xb();for(he=!0;he;){if(s.Ia()){if(F=(K=s.ia()).Rb(),(re=K.Fa(m,null,_,M,u))==2&&(!p||M[0]<=M[1])&&(re=_[0],te=_[1],re*F<=u&&(1-te)*F<=u)){pe=s.xb();continue}if(j.Ia()&&(m=j.ia(),(re=K.Fa(m,null,_,M,u))==2&&(!p||M[0]<=M[1])&&(re=_[0],te=_[1],re*F<=u&&(1-te)*F<=u))){pe=s.xb();continue}}he=!1}pe!=s.xb()&&(s.Wb(pe),s.ia());break}pe=s.xb(),m=w.construct(pe,s.gb,re,te,j.xb(),j.gb,he,ye),O.th.push(m),A.add(A.size)}}if(!Z){if(T==O.th.length)return!1;for(1<A.size-T&&A.Wd(T,A.size,f),Z=0;T<O.th.length;T++)if(!((m=O.th[A.get(T)]).Mj<Z&&m.Ui<Z)){if(F*(m.Mj-Z)>u)return!1;if(F*(1-(Z=m.Ui))<=u||Z==1)break}if(F*(1-Z)>u)return!1;T=0,A.resize(0),O.th.length=0}}return b},a.QG=function(s,o,u){if(1>a.Sz(s,o,u,null))return!1;var p=new c.l,f=new c.l;s.A(p),o.A(f);var m=a.ns(p,f,u);return p=a.ns(f,p,u),!(!m||!p)||(m&&!p?!a.Am(o,s,u,!1):p&&!m?!a.Am(s,o,u,!1):!a.Am(s,o,u,!1)&&!a.Am(o,s,u,!1))},a.Sz=function(s,o,u,p){function f(Ce,Zt){return R.LE(Ce,Zt)}if(s.sz()>o.sz())var m=o,b=s;else m=s,b=o;s=m.Ha(),o=b.Ha();var _=[0,0],M=[0,0],T=-1,A=0,O=new c.ja(0),R=new a,j=new c.l,z=new c.l,V=new c.l;m.A(j),b.A(z),j.X(u,u),z.X(u,u),V.L(j),V.Fa(z),m=null,p!=null&&(m=new c.h);var F=z=z=null,G=b.Cb;for(G!=null?(z=G.Gb,F=G.Bo,z==null&&(z=c.ua.lj(b,V))):z=c.ua.lj(b,V),b=z.getIterator(),G=null,F!=null&&(G=F.getIterator());s.ab();)for(F=0;s.Ia();){var Z=s.ia();if(Z.A(j),j.isIntersecting(V)){if(G!=null&&(G.Zi(j,u),G.next()==-1))continue;var K=Z.Rb();b.Wo(Z,u);for(var re=b.next();re!=-1;re=b.next()){var te=z.ka(re);o.Wb(te);var he=o.ia(),ye=he.Rb(),pe=Z.Fa(he,null,_,M,u);if(0<pe){re=_[0],T=M[0];var De=pe==2?_[1]:NaN,Se=pe==2?M[1]:NaN;if(pe==2){if(K*(De-re)>u)return 1;var Qe=K*(De-re);if(o.Ia()){if(he=o.ia(),(pe=Z.Fa(he,null,_,null,u))==2){pe=_[0];var We=_[1];if(Qe+(pe=K*(We-pe))>u)return 1}o.Wb(te),o.ia()}if(!o.xm()){if(o.ni(),he=o.ni(),(pe=Z.Fa(he,null,_,null,u))==2&&(pe=_[0],Qe+(pe=K*((We=_[1])-pe))>u))return 1;o.Wb(te),o.ia()}if(s.Ia()){if(te=s.xb(),(pe=(Z=s.ia()).Fa(he,null,_,null,u))==2&&(pe=_[0],Qe+(pe=K*((We=_[1])-pe))>u))return 1;s.Wb(te),s.ia()}if(!s.xm()){if(te=s.xb(),s.ni(),(pe=(Z=s.ni()).Fa(he,null,_,null,u))==2&&(pe=_[0],Qe+(pe=ye*((We=_[1])-pe))>u))return 1;s.Wb(te),s.ia()}he=w.construct(s.xb(),s.gb,re,De,o.xb(),o.gb,T,Se),R.th.push(he),O.add(O.size)}T=0,p!=null&&(Z.ic(re,m),p.add(m.x),p.add(m.y))}}if(A<R.th.length){for(O.Wd(A,O.size,f),Z=0,re=R.th[O.get(A)].Om;A<R.th.length;A++)if(!((he=R.th[O.get(A)]).Mj<Z&&he.Ui<Z))if(K*(he.Mj-Z)>u)F=K*(he.Ui-he.Mj),Z=he.Ui,re=he.Om;else{if(he.Om!=re?(F=K*(he.Ui-he.Mj),re=he.Om):F+=K*(he.Ui-he.Mj),F>u)return 1;if((Z=he.Ui)==1)break}K*(1-Z)>u&&(F=0),A=0,O.resize(0),R.th.length=0}}}return T},a.OG=function(s,o,u){var p=s.Ha(),f=o.Ha();for(s=new c.am(s,o,u,!1);s.next();){o=s.pl();var m=s.jl();if(p.Wb(o),f.Wb(m),o=p.ia(),0<f.ia().Fa(o,null,null,null,u))return!0}return!1},a.PG=function(s,o,u,p){var f=s.Ha(),m=new c.l,b=new c.l,_=new c.l;s.A(m),o.A(b),m.X(u,u),m.contains(b),b.X(u,u),_.L(m),_.Fa(b),(m=s.Cb)!=null?(m=m.Gb)==null&&(m=c.ua.lj(s,_)):m=c.ua.lj(s,_),s=m.getIterator();for(var M=new c.h,T=new c.h,A=u*u,O=0;O<o.I();O++)if(o.D(O,M),_.contains(M)){b.L(M.x,M.y,M.x,M.y),s.Zi(b,u);for(var R=!1,j=s.next();j!=-1;j=s.next())if(f.Wb(m.ka(j)),(j=f.ia()).ic(j.ge(M,!1),T),c.h.zc(T,M)<=A){R=!0;break}if(p){if(!R)return!1}else if(R)return!0}return!!p},a.Tz=function(s,o,u){var p=new c.h,f=u*u,m=s.Ha();if((s=s.Cb)!=null&&(s=s.Gb)!=null){var b=new c.l;for(b.L(o),b=(u=s.HF(b,u)).next();b!=-1;b=u.next())if(m.Wb(s.ka(b)),m.Ia()){var _=(b=m.ia()).ge(o,!1);if(b.ic(_,p),c.h.zc(o,p)<=f)return!0}return!1}for(s=new c.l;m.ab();)for(;m.Ia();)if((b=m.ia()).A(s),s.X(u,u),s.contains(o)&&(_=b.ge(o,!1),b.ic(_,p),c.h.zc(o,p)<=f))return!0;return!1},a.MG=function(s,o,u){return a.Tz(s,o,u)&&!a.Uz(s,o,u)},a.Uz=function(s,o,u){return s=s.ng(),!a.lt(s,o,u)},a.NG=function(s,o,u){if(s.vm()){var p=new c.zb(o.v,o.G,o.v,o.H),f=new c.zb(o.v,o.H,o.C,o.H),m=new c.zb(o.C,o.H,o.C,o.G);for(o=new c.zb(o.C,o.G,o.v,o.G),s=s.Ha();s.ab();)for(;s.Ia();){var b=s.ia();if(b.isIntersecting(p,u)||b.isIntersecting(f,u)||b.isIntersecting(m,u)||b.isIntersecting(o,u))return!0}}else{(p=new c.l).L(o),p.X(u,u),u=s.vb(0),f=new c.h,m=new c.h,o=new c.h,b=new c.h;for(var _=0,M=s.ea();_<M;_++)for(var T=!0,A=s.Ca(_),O=s.Wc(_);A<O;A++)if(T)u.uc(2*A,m),T=!1;else{if(u.uc(2*A,f),o.N(m),b.N(f),p.uy(o,b)!=0)return!0;m.N(f)}}return!1},a.rc=function(s,o,u){var p=s.K(),f=o.K();if(c.ba.zj(p)){var m=s.Cb;if(m!=null&&(m=m.Hk)!=null)if(f==33){var b=o.D();if((b=m.Uo(b.x,b.y))==1)return 1;if(b==0)return 4}else{if(b=new c.l,o.A(b),(b=m.To(b))==1)return 1;if(b==0)return 4;if(u&&c.ba.zj(f)&&a.CE(o,m))return 1073741824}}if(c.ba.zj(f)&&(m=o.Cb)!=null&&(m=m.Hk)!=null)if(p==33){if(s=s.D(),(b=m.Uo(s.x,s.y))==1)return 2;if(b==0)return 4}else{if(o=new c.l,s.A(o),(b=m.To(o))==1)return 2;if(b==0)return 4;if(u&&c.ba.zj(p)&&a.CE(s,m))return 1073741824}return 0},a.CE=function(s,o){for(var u=s.I(),p=new c.h,f=0;f<u;f++)if(s.D(f,p),o.Uo(p.x,p.y)==1)return!0;return!1},a.DI=function(s,o,u,p){for(var f=1<=s.qm(0)&&1<=o.qm(0),m=s.Ha(),b=o.Ha(),_=[0,0],M=[0,0],T=new c.am(s,o,u,!1),A=!1;T.next();){var O=T.pl(),R=T.jl();if(m.Wb(O),b.Wb(R),O=m.ia(),(R=b.ia().Fa(O,null,M,_,u))==2){if(A=_[0],R=_[1],O=O.Rb(),f&&(R-A)*O>u)return!1;A=!0}else if(R!=0){if(A=_[0],O=M[0],0<A&&1>A&&0<O&&1>O)return!1;A=!0}}return!!A&&(m=new c.l,b=new c.l,f=new c.l,s.A(m),o.A(b),m.X(1e3*u,1e3*u),b.X(1e3*u,1e3*u),f.L(m),f.Fa(b),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B())||10<o.I()&&(o=c.Vd.clip(o,f,u,0),o.B()))&&c.cm.st(s,o,u,"F********",p))},a.AI=function(s,o,u,p){var f=1<=s.qm(0)&&1<=o.qm(0),m=new c.l,b=new c.l,_=new c.l;s.A(m),o.A(b);for(var M=!1,T=a.ns(m,b,u),A=a.ns(b,m,u),O=s.Ha(),R=o.Ha(),j=[0,0],z=[0,0],V=new c.am(s,o,u,!1);V.next();){var F=V.pl(),G=V.jl();if(O.Wb(F),R.Wb(G),G=O.ia(),(F=R.ia().Fa(G,null,z,j,u))==2){F=j[0];var Z=j[1];if(G=G.Rb(),f&&(Z-F)*G>u&&(M=!0,T&&A))return!0}else if(F!=0&&(F=j[0],G=z[0],0<F&&1>F&&0<G&&1>G))return!0}if(f=new c.l,O=new c.l,f.L(m),f.X(1e3*u,1e3*u),O.L(b),O.X(1e3*u,1e3*u),_.L(f),_.Fa(O),m="",m=M?m+"**":m+"T*",T){if(10<o.I()&&(o=c.Vd.clip(o,_,u,0)).B())return!1;m+="****"}else m+="T***";if(A){if(10<s.I()&&(s=c.Vd.clip(s,_,u,0)).B())return!1;m+="***"}else m+="T**";return c.cm.st(s,o,u,m.toString(),p)},a.wI=function(s,o,u,p){var f=[!1],m=a.uI(s,o,u,f);return f[0]?m:(f=new c.l,o.A(f),f.X(1e3*u,1e3*u),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B()))&&c.cm.Uw(s,o,u,p))},a.uI=function(s,o,u,p){p[0]=!1;for(var f=s.Ha(),m=o.Ha(),b=[0,0],_=[0,0],M=new c.am(s,o,u,!1),T=!1;M.next();){var A=M.pl(),O=M.jl();if(f.Wb(A,-1),m.Wb(O,-1),A=f.ia(),(A=m.ia().Fa(A,null,_,b,u))!=0&&(T=!0,A==1&&(A=b[0],O=_[0],0<A&&1>A&&0<O&&1>O)))return p[0]=!0,!1}if(!T){for(p[0]=!0,b=new c.l,s.A(b),b.X(u,u),M=s,T=!1,_=new c.l,p=0,f=o.ea();p<f;p++)if(0<o.Ka(p)){if(o.Tj(p,_),!b.isIntersecting(_)||(m=o.Oa(o.Ca(p)),(m=c.Fg.ym(M,m,0))==0))return!1;T||(!c.Fg.Ol(s,o.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?M=s:(m=new c.Ea,s.copyTo(m),m.hj(1),M=m),T=!0)}if(s.ea()==1||o.K()==1607)return!0;for(b=new c.l,o.A(b),b.X(u,u),_=o,M=!1,u=new c.l,p=0,f=s.ea();p<f;p++)if(0<s.Ka(p)){if(s.Tj(p,u),b.isIntersecting(u)&&(m=s.Oa(s.Ca(p)),(m=c.Fg.ym(_,m,0))==1))return!1;M||(!c.Fg.Ol(o,s.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(m=new c.Ea,o.copyTo(m),m.hj(1),_=m),M=!0)}return!0}return!1},a.EI=function(s,o,u,p){for(var f=s.Ha(),m=o.Ha(),b=[0,0],_=[0,0],M=new c.am(s,o,u,!1),T=!1;M.next();){var A=M.pl(),O=M.jl();if(f.Wb(A),m.Wb(O),A=f.ia(),(A=m.ia().Fa(A,null,_,b,u))==2)T=!0;else if(A!=0){if(T=b[0],A=_[0],0<T&&1>T&&0<A&&1>A)return!1;T=!0}}return!!T&&(m=new c.l,b=new c.l,f=new c.l,s.A(m),o.A(b),m.X(1e3*u,1e3*u),b.X(1e3*u,1e3*u),f.L(m),f.Fa(b),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B())||10<o.I()&&(o=c.Vd.clip(o,f,u,0),o.B()))&&c.cm.bn(s,o,u,"F********",p))},a.yI=function(s,o,u,p){for(var f=s.Ha(),m=o.Ha(),b=[0,0],_=[0,0],M=new c.am(s,o,u,!1),T=!1;M.next();){var A=M.pl(),O=M.jl();if(f.Wb(A),m.Wb(O),A=f.ia(),(A=m.ia().Fa(A,null,_,b,u))==2)T=!0;else if(A!=0){if(T=b[0],A=_[0],0<T&&1>T&&0<A&&1>A)return!0;T=!0}}return!!T&&(m=new c.l,b=new c.l,_=new c.l,M=new c.l,f=new c.l,s.A(m),o.A(b),a.ns(b,m,u)?(_.L(m),_.X(1e3*u,1e3*u),M.L(b),M.X(1e3*u,1e3*u),f.L(_),f.Fa(M),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B())||10<o.I()&&(o=c.Vd.clip(o,f,u,0),o.B()))&&(u=c.cm.bn(s,o,u,"T********",p))):u=c.cm.bn(s,o,u,"T*****T**",p))},a.xI=function(s,o,u,p){var f=[!1],m=a.uI(s,o,u,f);return f[0]?m:(f=new c.l,o.A(f),f.X(1e3*u,1e3*u),!(10<s.I()&&(s=c.Vd.clip(s,f,u,0),s.B()))&&c.cm.aB(s,o,u,p))},a.vI=function(s,o,u){return c.jd.Zd(s,o,u)==1},a.CI=function(s,o,u){return c.jd.Zd(s,o,u)==2},a.lt=function(s,o,u){var p=new c.h;u*=u;for(var f=0;f<s.I();f++)if(s.D(f,p),c.h.zc(p,o)<=u)return!1;return!0},a.prototype.LE=function(s,o){return s=this.th[s],o=this.th[o],s.Om<o.Om||s.Om==o.Om&&(s.rw<o.rw||s.rw==o.rw&&(s.Mj<o.Mj||s.Mj==o.Mj&&(s.Ui<o.Ui||s.Ui==o.Ui&&s.wH<o.wH)))?-1:1},a}();c.vd=h}(H||(H={})),function(c){var C,w,h;(w=C||(C={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(h||(h={})),C=function(){function a(){this.me=0,this.j=new c.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.tB=function(s,o,u,p,f){if(p.length!=9)throw c.i.ga("relation string length has to be 9 characters");for(var m=0;9>m;m++){var b=p.charAt(m);if(b!="*"&&b!="T"&&b!="F"&&b!="0"&&b!="1"&&b!="2")throw c.i.ga("relation string")}if((m=this.HR(p,s.Eb(),o.Eb()))!=0)return c.vd.uB(s,o,u,m,f);m=new c.l,s.A(m),b=new c.l,o.A(b);var _=new c.l;if(_.L(m),_.$b(b),u=c.ua.Xd(u,_,!1),s=this.RE(s,u),o=this.RE(o,u),s.B()||o.B())return this.pW(s,o,p);switch(m=o.K(),b=!1,s.K()){case 1736:switch(m){case 1736:b=this.st(s,o,u,p,f);break;case 1607:b=this.bn(s,o,u,p,f);break;case 33:b=this.rt(s,o,u,p);break;case 550:b=this.qt(s,o,u,p,f)}break;case 1607:switch(m){case 1736:b=this.bn(o,s,u,this.aq(p),f);break;case 1607:b=this.bB(s,o,u,p,f);break;case 33:b=this.ut(s,o,u,p,f);break;case 550:b=this.tt(s,o,u,p,f)}break;case 33:switch(m){case 1736:b=this.rt(o,s,u,this.aq(p));break;case 1607:b=this.ut(o,s,u,this.aq(p),f);break;case 33:b=this.VU(s,o,u,p);break;case 550:b=this.mt(o,s,u,this.aq(p))}break;case 550:switch(m){case 1736:b=this.qt(o,s,u,this.aq(p),f);break;case 1607:b=this.tt(o,s,u,this.aq(p),f);break;case 550:b=this.UA(s,o,u,p,f);break;case 33:b=this.mt(s,o,u,p)}break;default:b=!1}return b},a.st=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.sJ();var b=new c.l,_=new c.l;return s.A(b),o.A(_),p=!1,c.vd.fk(b,_,u)&&(m.Eu(s,o),p=!0),p||((b=c.vd.rc(s,o,!1))==4?(m.Eu(s,o),p=!0):b==1?(m.hy(o),p=!0):b==2&&(m.UD(s),p=!0)),p||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.Dp(s,o),m.j.Wg()),a.hg(m.J,m.Yc)},a.Uw=function(s,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.sJ();var m=new c.l,b=new c.l;s.A(m),o.A(b);var _=!1;return c.vd.fk(m,b,u)&&(f.Eu(s,o),_=!0),_||((m=c.vd.rc(s,o,!1))==4?(f.Eu(s,o),_=!0):m==1?(f.hy(o),_=!0):m==2&&(f.UD(s),_=!0)),_?this.hg(f.J,f.Yc):(s=(_=new c.hd).Ib(s),m=_.Ib(o),c.Vk.W(_,u,p,!1),u=_.Ke(m).ng(),_.Ip(0,!0,!0),c.tn.W(_,s,-1,!1,p),_.I(s)!=0&&(c.tn.W(_,m,-1,!1,p),f.gr(_,p),(o=_.I(m)==0)||(f.Dp(s,m),f.j.Wg(),m=this.hg(f.J,f.Yc))?(s=_.Ke(s),s=(_=new c.hd).Ib(s),m=_.Ib(u),f.gr(_,p),f.me=0,f.$i(),f.dj(o?"T*****F**":"******F**"),f.DB(),f.Dp(s,m),f.j.Wg(),this.hg(f.J,f.Yc)):m))},a.bn=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.DB();var b=new c.l,_=new c.l;return s.A(b),o.A(_),p=!1,c.vd.fk(b,_,u)&&(m.Fu(s,o),p=!0),p||((b=c.vd.rc(s,o,!1))==4?(m.Fu(s,o),p=!0):b==1&&(m.VD(o),p=!0)),p||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.mh=m.j.Fp(),a.Lw(o,m.j,m.mh),m.Dp(s,o),m.j.Gp(m.mh),m.j.Wg()),a.hg(m.J,m.Yc)},a.aB=function(s,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.DB();var m=new c.l,b=new c.l;s.A(m),o.A(b);var _=!1;return c.vd.fk(m,b,u)&&(f.Fu(s,o),_=!0),_||((m=c.vd.rc(s,o,!1))==4?(f.Fu(s,o),_=!0):m==1&&(f.VD(o),_=!0)),_?this.hg(f.J,f.Yc):(s=(_=new c.hd).Ib(s),o=_.Ib(o),f.Yo(_,u,p),_.I(s)!=0&&(f.Dp(s,o),f.j.Wg(),this.hg(f.J,f.Yc)))},a.qt=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.tJ();var b=new c.l,_=new c.l;return s.A(b),o.A(_),p=!1,c.vd.fk(b,_,u)&&(m.Gu(s),p=!0),p||((b=c.vd.rc(s,o,!1))==4?(m.Gu(s),p=!0):b==1&&(m.uN(),p=!0)),p||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.By(s,o),m.j.Wg()),a.hg(m.J,m.Yc)},a.bB=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.$W(),p=new c.l;var b=new c.l;s.A(p),o.A(b);var _=!1;return c.vd.fk(p,b,u)&&(m.KG(s,o),_=!0),_||c.vd.rc(s,o,!1)!=4||(m.KG(s,o),_=!0),_||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.$h=m.j.Fp(),m.mh=m.j.Fp(),a.Lw(s,m.j,m.$h),a.Lw(o,m.j,m.mh),m.Dp(s,o),m.j.Gp(m.$h),m.j.Gp(m.mh),m.j.Wg()),a.hg(m.J,m.Yc)},a.tt=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.HJ(),p=new c.l;var b=new c.l;s.A(p),o.A(b);var _=!1;return c.vd.fk(p,b,u)&&(m.Qz(s),_=!0),_||c.vd.rc(s,o,!1)!=4||(m.Qz(s),_=!0),_||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.$h=m.j.Fp(),a.Lw(s,m.j,m.$h),m.By(s,o),m.j.Gp(m.$h),m.j.Wg()),a.hg(m.J,m.Yc)},a.UA=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.MJ(),p=new c.l;var b=new c.l;s.A(p),o.A(b);var _=!1;return c.vd.fk(p,b,u)&&(m.tI(),_=!0),_||(s=(p=new c.hd).Ib(s),o=p.Ib(o),m.Yo(p,u,f),m.By(s,o),m.j.Wg()),a.hg(m.J,m.Yc)},a.rt=function(s,o,u,p){var f=new a;f.$i(),f.dj(p),f.tJ();var m=new c.l;s.A(m),o=o.D();var b=!1;return c.vd.Tw(o,m,u)&&(f.Gu(s),b=!0),b||((u=c.jd.Zd(s,o,u))==1?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):u==2?(f.J[6]=-1,s.He()!=0?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=-1,f.J[5]=-1,u=new c.l,s.A(u),f.J[2]=u.da()==0&&u.S()==0?-1:1)):f.Gu(s)),this.hg(f.J,p)},a.ut=function(s,o,u,p,f){var m=new a;m.$i(),m.dj(p),m.HJ();var b=new c.l;s.A(b),p=o.D();var _=!1;if(c.vd.Tw(p,b,u)&&(m.Qz(s),_=!0),!_){b=null;var M=_=!1;(m.fa[0]||m.fa[6])&&(c.vd.Tz(s,p,u)?(m.fa[0]&&(b=c.si.im(s,f),M=!c.vd.lt(b,p,u),_=!0,m.J[0]=M?-1:0),m.J[6]=-1):(m.J[0]=-1,m.J[6]=0)),m.fa[3]&&(b!=null&&b.B()?m.J[3]=-1:(_||(b==null&&(b=c.si.im(s,f)),M=!c.vd.lt(b,p,u),_=!0),m.J[3]=M?0:-1)),m.fa[5]&&(b!=null&&b.B()?m.J[5]=-1:_&&!M?m.J[5]=0:(b==null&&(b=c.si.im(s,f)),f=c.vd.Pw(b,o,u),m.J[5]=f?-1:0)),m.fa[2]&&(s.Rb()!=0?m.J[2]=1:((f=new c.ee(s.description)).Gd(s,0,s.I()),s=c.vd.Pw(f,o,u),m.J[2]=s?-1:0))}return this.hg(m.J,m.Yc)},a.mt=function(s,o,u,p){var f=new a;f.$i(),f.dj(p),f.MJ();var m=new c.l;s.A(m),o=o.D();var b=!1;if(c.vd.Tw(o,m,u)&&(f.tI(),b=!0),!b){m=!1,b=!0,u*=u;for(var _=0;_<s.I();_++){var M=s.Oa(_);if(c.h.zc(M,o)<=u?m=!0:b=!1,m&&!b)break}m?(f.J[0]=0,f.J[2]=b?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=0,f.J[6]=0)}return a.hg(f.J,p)},a.VU=function(s,o,u,p){s=s.D(),o=o.D();for(var f=[],m=0;9>m;m++)f[m]=-1;return c.h.zc(s,o)<=u*u?f[0]=0:(f[2]=0,f[6]=0),f[8]=2,a.hg(f,p)},a.hg=function(s,o){for(var u=0;9>u;u++)switch(o.charAt(u)){case"T":if(s[u]==-1)return!1;break;case"F":if(s[u]!=-1)return!1;break;case"0":if(s[u]!=0)return!1;break;case"1":if(s[u]!=1)return!1;break;case"2":if(s[u]!=2)return!1}return!0},a.pW=function(s,o,u){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&o.B()){for(var f=0;9>f;f++)p[f]=-1;return this.hg(p,u)}return f=!1,s.B()&&(s=o,f=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=s.K(),c.ba.Ic(o)?o==1736?s.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new c.l,s.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=s.Rb()!=0,p[2]=o?1:0,p[5]=c.si.cq(s)?0:-1):(p[2]=0,p[5]=-1),f&&this.qK(p),this.hg(p,u)},a.HR=function(s,o,u){return a.ZP(s)?3:a.PP(s)?4:a.ZX(s,o,u)?8:a.xP(s,o,u)?16:a.$O(s)?1:a.zU(s,o,u)?32:0},a.ZP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},a.PP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},a.ZX=function(s,o,u){return(o!=0||u!=0)&&((o!=2||u!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||o==1&&u==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||u!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},a.xP=function(s,o,u){return o>u?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":o==1&&u==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},a.$O=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},a.zU=function(s,o,u){if(o==u){if(o!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},a.Lw=function(s,o,u){s=o.Ma(s);for(var p=o.Oe;p!=-1;p=o.Tf(p))if(o.yd(p)&s){var f=o.Je(p);if(f==-1)o.pn(p,u,0);else{var m=f,b=0;do o.fh(m)&s&&b++,m=o.kc(o.ya(m));while(m!=f);o.pn(p,u,b)}}},a.aq=function(s){var o=""+s.charAt(0);return o+=s.charAt(3),o+=s.charAt(6),o+=s.charAt(1),o+=s.charAt(4),o+=s.charAt(7),o+=s.charAt(2),(o+=s.charAt(5))+s.charAt(8)},a.prototype.$i=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.$a[s]=-2},a.qK=function(s){var o=s[1],u=s[2],p=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=o,s[6]=u,s[7]=p},a.prototype.dj=function(s){for(this.Yc=s,s=0;9>s;s++)this.Yc.charAt(s)!="*"?(this.fa[s]=!0,this.me++):this.fa[s]=!1},a.prototype.PJ=function(){for(var s=0;9>s;s++)this.fa[s]&&this.J[s]==-2&&(this.J[s]=-1,this.fa[s]=!1)},a.prototype.qc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.fa[s]=!1,this.me--,!0):this.Yc.charAt(s)!="T"&&this.Yc.charAt(s)!="F"?!(this.J[s]<this.$a[s])&&(this.fa[s]=!1,this.me--,!0):(this.fa[s]=!1,this.me--,!0))},a.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.sN=function(s,o,u){var p=!0;return this.fa[0]&&(this.xS(s,o,u),p=p&&this.qc(0)),this.fa[1]&&(this.nG(s,o,1),p=p&&this.qc(1)),this.fa[2]&&(this.oG(s,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.nG(s,u,3),p=p&&this.qc(3)),this.fa[4]&&(this.wN(s,o,u),p=p&&this.qc(4)),this.fa[5]&&(this.$D(s,u,5),p=p&&this.qc(5)),this.fa[6]&&(this.oG(s,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.$D(s,o,7),p=p&&this.qc(7)),p},a.prototype.Eu=function(s,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(s,o,u,p,f){o==-1&&p==-1||((u!="T"&&u!="F"&&o!=-1||f!="T"&&f!="F"&&p!=-1)&&s.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(u=new c.l,s.A(u),this.J[o]=u.da()==0&&u.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(s,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.UD=function(s){this.hy(s),a.qK(this.J)},a.prototype.Fu=function(s,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var u=this.Yc.charAt(6);u=u=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0}this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1),this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.VD=function(s){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||s.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(s=c.si.cq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.KG=function(s,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var u=this.Yc.charAt(2);u=u=="T"||u=="F"||s.Rb()!=0,this.J[2]=u?1:0}this.fa[5]&&(s=c.si.cq(s),this.J[5]=s?0:-1),this.fa[6]&&(u=(u=this.Yc.charAt(6))=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0),this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||s.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(s=c.si.cq(s),this.J[5]=s?0:-1),this.J[6]=0},a.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.tN=function(s,o,u){var p=!0;return this.fa[0]&&(this.yS(s,o),p=p&&this.qc(0)),this.fa[1]&&(this.uS(s,o,u,this.mh),p=p&&this.qc(1)),this.fa[2]&&(this.vS(s,o),p=p&&this.qc(2)),this.fa[3]&&(this.AN(s,o,u,this.mh),p=p&&this.qc(3)),this.fa[4]&&(this.xN(s,o,u,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.yN(s,o,u),p=p&&this.qc(5)),this.fa[6]&&(this.gQ(s,o),p=p&&this.qc(6)),this.fa[7]&&(this.fQ(s,o,u,this.mh),p=p&&this.qc(7)),p},a.prototype.hT=function(s,o,u){var p=!0;return this.fa[0]&&(this.BS(s,o,u,this.$h,this.mh),p=p&&this.qc(0)),this.fa[1]&&(this.pG(s,o,u,this.$h,this.mh,1),p=p&&this.qc(1)),this.fa[2]&&(this.qG(s,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.pG(s,u,o,this.mh,this.$h,3),p=p&&this.qc(3)),this.fa[4]&&(this.CN(s,o,u,this.$h,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.aE(s,u,this.$h,5),p=p&&this.qc(5)),this.fa[6]&&(this.qG(s,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.aE(s,o,this.mh,7),p=p&&this.qc(7)),p},a.prototype.WD=function(s,o,u){var p=!0;return this.fa[0]&&(this.zS(s,o),p=p&&this.qc(0)),this.fa[2]&&(this.wS(s,o),p=p&&this.qc(2)),this.fa[3]&&(this.BN(s,o,u),p=p&&this.qc(3)),this.fa[5]&&(this.zN(s,o),p=p&&this.qc(5)),this.fa[6]&&(this.hQ(s,o),p=p&&this.qc(6)),p},a.prototype.LG=function(s,o,u){var p=!0;return this.fa[0]&&(this.CS(s,o,u,this.$h),p=p&&this.qc(0)),this.fa[2]&&(this.AS(s,u),p=p&&this.qc(2)),this.fa[3]&&(this.EN(s,o,u,this.$h),p=p&&this.qc(3)),this.fa[5]&&(this.DN(s,o,u,this.$h),p=p&&this.qc(5)),this.fa[6]&&(this.iQ(s,o,u),p=p&&this.qc(6)),p},a.prototype.UU=function(s,o,u){var p=!0;return this.fa[0]&&(this.DS(s,o,u),p=p&&this.qc(0)),this.fa[2]&&(this.rG(s,o,u,2),p=p&&this.qc(2)),this.fa[6]&&(this.rG(s,u,o,6),p=p&&this.qc(6)),p},a.prototype.xS=function(s,o,u){this.J[0]!=2&&(s=this.j.af(s))&o&&s&u&&(this.J[0]=2)},a.prototype.nG=function(s,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(s));this.j.af(s)&o&&p&o&&(this.J[u]=1)}},a.prototype.oG=function(s,o,u,p){this.J[p]!=2&&(s=this.j.af(s))&o&&!(s&u)&&(this.J[p]=2)},a.prototype.wN=function(s,o,u){if(this.J[4]!=1){var p=this.j.fh(s);p&o&&p&u?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.yd(this.j.vf(s)))&o&&s&u&&(this.J[4]=0)}},a.prototype.$D=function(s,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(s));!(this.j.af(s)&o)&&!(p&o)&&(this.J[u]=1)}},a.prototype.yS=function(s,o){if(this.J[0]!=1){var u=this.j.af(this.j.ya(s));this.j.af(s)&o&&u&o&&(this.J[0]=1)}},a.prototype.uS=function(s,o,u,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var f=this.j.vf(s),m=this.j.yd(f);!(m&o)&&this.j.af(s)&o&&(s=this.j.og(f,p),m&u&&s%2!=0&&(this.J[1]=0))}},a.prototype.vS=function(s,o){this.J[2]!=2&&this.j.fh(s)&o&&(this.J[2]=2)},a.prototype.AN=function(s,o,u,p){if(this.J[3]!=1){var f=this.j.fh(s);f&o&&f&u?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(f=this.j.vf(s),(s=this.j.yd(f))&o&&(o=this.j.og(f,p),s&u&&o%2==0&&(this.J[3]=0)))}},a.prototype.xN=function(s,o,u,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var f=this.j.vf(s);(s=this.j.yd(f))&o&&(o=this.j.og(f,p),s&u&&o%2!=0&&(this.J[4]=0))}},a.prototype.yN=function(s,o,u){this.J[5]!=1&&(s=this.j.fh(s))&o&&!(s&u)&&(this.J[5]=1)},a.prototype.gQ=function(s,o){if(this.J[6]!=1){var u=this.j.af(this.j.ya(s));!(this.j.af(s)&o)&&!(u&o)&&(this.J[6]=1)}},a.prototype.fQ=function(s,o,u,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var f=this.j.vf(s),m=this.j.yd(f);!(m&o)&&!(this.j.af(s)&o)&&(s=this.j.og(f,p),m&u&&s%2!=0&&(this.J[7]=0))}},a.prototype.BS=function(s,o,u,p,f){if(this.J[0]!=1){var m=this.j.fh(s);m&o&&m&u?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),(m=this.j.yd(s))&o&&m&u&&(o=this.j.og(s,p),f=this.j.og(s,f),o%2==0&&f%2==0&&(this.J[0]=0)))}},a.prototype.pG=function(s,o,u,p,f,m){if(this.J[m]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var b=this.j.yd(s);b&o&&b&u&&(o=this.j.og(s,p),f=this.j.og(s,f),o%2==0&&f%2!=0&&(this.J[m]=0))}},a.prototype.qG=function(s,o,u,p){this.J[p]!=1&&(s=this.j.fh(s))&o&&!(s&u)&&(this.J[p]=1)},a.prototype.CN=function(s,o,u,p,f){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var m=this.j.yd(s);m&o&&m&u&&(o=this.j.og(s,p),f=this.j.og(s,f),o%2!=0&&f%2!=0&&(this.J[4]=0))}},a.prototype.aE=function(s,o,u,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),!(this.j.yd(s)&o)&&this.j.og(s,u)%2!=0&&(this.J[p]=0))},a.prototype.zS=function(s,o){this.J[0]!=0&&!(this.j.yd(s)&o)&&this.j.jk(this.j.Yy(s))&o&&(this.J[0]=0)},a.prototype.wS=function(s,o){this.J[2]!=2&&this.j.yd(s)&o&&(this.J[2]=2)},a.prototype.BN=function(s,o,u){this.J[3]!=0&&(s=this.j.yd(s))&o&&s&u&&(this.J[3]=0)},a.prototype.zN=function(s,o){this.J[5]!=1&&this.j.yd(s)&o&&(this.J[5]=1)},a.prototype.hQ=function(s,o){this.J[6]!=0&&!(this.j.yd(s)&o)&&!(this.j.jk(this.j.Yy(s))&o)&&(this.J[6]=0)},a.prototype.CS=function(s,o,u,p){if(this.J[0]!=0){var f=this.j.yd(s);f&o&&f&u&&this.j.og(s,p)%2==0&&(this.J[0]=0)}},a.prototype.AS=function(s,o){this.J[2]!=1&&(this.j.Je(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(s)&o)&&(this.J[2]=0))},a.prototype.EN=function(s,o,u,p){if(this.J[3]!=0){var f=this.j.yd(s);f&o&&f&u&&this.j.og(s,p)%2!=0&&(this.J[3]=0)}},a.prototype.DN=function(s,o,u,p){if(this.J[5]!=0){var f=this.j.yd(s);f&o&&!(f&u)&&this.j.og(s,p)%2!=0&&(this.J[5]=0)}},a.prototype.iQ=function(s,o,u){this.J[6]!=0&&!((s=this.j.yd(s))&o)&&s&u&&(this.J[6]=0)},a.prototype.DS=function(s,o,u){this.J[0]!=0&&(s=this.j.yd(s))&o&&s&u&&(this.J[0]=0)},a.prototype.rG=function(s,o,u,p){this.J[p]!=0&&(s=this.j.yd(s))&o&&!(s&u)&&(this.J[p]=0)},a.prototype.Dp=function(s,o){var u=!1;s=this.j.Ma(s),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){var f=this.j.Je(p);if(f==-1){if(this.Um!=-1)switch(this.Um){case 3:u=this.WD(p,s,o);break;case 4:u=this.LG(p,s,o);break;default:throw c.i.ga("internal error")}}else{var m=f;do{var b=m;if(this.j.Bb(b,this.Wi)!=1)do{switch(this.xw){case 0:u=this.sN(b,s,o);break;case 1:u=this.tN(b,s,o);break;case 2:u=this.hT(b,s,o);break;default:throw c.i.ga("internal error")}if(u)break;this.j.Kb(b,this.Wi,1),b=this.j.kc(b)}while(b!=m&&!u);if(u)break;m=this.j.kc(this.j.ya(b))}while(m!=f);if(u)break}}u||this.PJ(),this.j.Lg(this.Wi)},a.prototype.By=function(s,o){var u=!1;s=this.j.Ma(s),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){switch(this.Um){case 3:u=this.WD(p,s,o);break;case 4:u=this.LG(p,s,o);break;case 5:u=this.UU(p,s,o);break;default:throw c.i.Ra()}if(u)break}u||this.PJ()},a.prototype.gr=function(s,o){this.j.fr(s,o)},a.prototype.Yo=function(s,o,u){this.TP(s,o,u),this.gr(s,u)},a.prototype.TP=function(s,o,u){for(c.Vk.W(s,o,u,!1),s.Ip(0,!0,!0),o=s.md;o!=-1;o=s.ve(o))s.jc(o)==1736&&c.tn.W(s,o,-1,!1,u)},a.RE=function(s,o){var u=s.K();return c.ba.zd(u)?((o=new c.Ua(s.description)).pc(s,!0),o):u==197?(u=new c.l,s.A(u),u.da()<=o&&u.S()<=o?(o=new c.Ta(s.description),s.tf(o),o):u.da()<=o||u.S()<=o?(o=new c.Ua(s.description),u=new c.Ta,s.If(0,u),o.nf(u),s.If(2,u),o.lineTo(u),o):((o=new c.Ea(s.description)).bd(s,!1),o)):s},a}(),c.cm=C}(H||(H={})),function(c){var C=function(){function a(s){this.Gm=new c.ja(0),this.fw=new c.ja(0),this.xt=new c.h,this.yt=new c.h,this.g=s,this.Js=-1}return a.prototype.cc=function(s){return this.g.cc(this.uz(s))},a.prototype.Dv=function(s){var o=this.dz(s);if(s=this.CF(s),this.g.Na(o)==s){var u=o;o=s,s=u}return this.g.Hc(o,this.xt),this.g.Hc(s,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(s){var o=this.dz(s);return s=this.CF(s),this.g.V(o)==s?o:s},a.prototype.dz=function(s){return this.Gm.get(s)},a.prototype.CF=function(s){return this.fw.get(s)},a.prototype.mF=function(s){this.Gm.set(s,this.Js),this.Js=s},a.prototype.iI=function(s){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,s),this.fw.set(o,this.g.V(s)),o}return this.Gm==null&&(this.Gm=new c.ja(0),this.fw=new c.ja(0)),o=this.Gm.size,this.Gm.add(s),this.fw.add(this.g.V(s)),o},a.prototype.mz=function(s){return this.g.cd(this.dz(s))},a}();c.uY=C;var w=function(){function a(s){this.Ce=s,this.je=new c.zb,this.Pm=new c.zb,this.xH=0,this.Co=null,this.tA=-1}return a.prototype.compare=function(s,o,u){u=s.ka(u);var p=this.Ce.hb;if(this.tA==o)var f=this.xH;else this.Co=p.cc(o),this.Co==null?((s=p.g).fd(p.uz(o),this.je),this.Co=this.je,f=this.je.Me(this.Ce.Ah,0)):f=this.Co.Me(this.Ce.Ah,0),this.xH=f,this.tA=o;if((s=p.cc(u))==null){(s=p.g).fd(p.uz(u),this.Pm),s=this.Pm;var m=this.Pm.Me(this.Ce.Ah,0)}else m=s.Me(this.Ce.Ah,0);return f==m&&(o=p.Dv(o),u=p.Dv(u),(o=.5*((u=Math.min(o?this.Co.ma:this.Co.oa,u?s.ma:s.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=u),f=this.Co.Me(o,0),m=s.Me(o,0)),f<m?-1:f>m?1:0},a.prototype.reset=function(){this.tA=-1},a}(),h=function(){function a(){this.Ym=this.Il=null,this.fb=new c.$j,this.fb.MP(),this.ae=new w(this),this.fb.Xo(this.ae)}return a.prototype.CQ=function(){var s=!1;if(this.hw&&(s=this.DQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return s=this.g.qz(o),this.g.KB(o,!0),0>s&&(s=this.g.Ya(o),this.g.kJ(s),this.g.Yg(o,this.g.Na(s)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.yo,-1);o=new c.ja(0),this.Ah=NaN;var u=new c.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.ke);p!=-1;p=this.Il.lb(p)){var f=this.Il.getData(p);if(this.g.Hc(f,u),u.y!=this.Ah&&o.size!=0&&(s=this.vt(o)||s,this.ae.reset(),o.clear(!1)),o.add(f),this.Ah=u.y,this.ft==0)break}for(0<this.ft&&(s=this.vt(o)||s,o.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.KB(o,!0),u=o,o=this.g.uj(o,this.yo);o!=-1;)p=this.g.uj(o,this.yo),this.g.UT(this.Y,this.g.Sb(u),o),u=o,o=p;o=this.g.Sb(u)}else this.g.KB(o,!1),o=this.g.Sb(o);return this.g.xB(this.Gl),this.g.xB(this.yo),s},a.prototype.vt=function(s){return this.VV(s)},a.prototype.VV=function(s){var o=!1;this.hb==null&&(this.hb=new C(this.g)),this.Ym==null?(this.Ym=new c.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(s);for(var u=0,p=s.size;u<p;u++){var f=s.get(u);f!=-1&&this.jG(f,-1)}for(u=0;u<this.Ym.size&&0<this.ft;u++)if(s=this.Ym.get(u),f=this.hb.mz(this.fb.ka(s)),p=-1,this.g.uj(f,this.Gl)==0){f=this.fb.xe(s);for(var m,b=s;f!=-1;){var _=this.fb.ka(f),M=this.hb.mz(_),T=this.g.uj(M,this.Gl);if(T!=0){p=M;break}b=f,f=this.fb.xe(f)}f==-1?(m=!0,f=b):(_=this.fb.ka(f),m=this.hb.Dv(_),f=this.fb.lb(f),m=!m);do{if(_=this.fb.ka(f),M=this.hb.mz(_),(T=this.g.uj(M,this.Gl))==0&&(m!=this.hb.Dv(_)&&(o=this.g.Ya(M),this.g.kJ(o),this.g.Yg(M,this.g.Na(o)),o=!0),this.g.ir(M,this.Gl,m?3:2),m||(b=this.g.uj(p,this.yo),this.g.ir(p,this.yo,M),this.g.ir(M,this.yo,b)),this.ft--,this.ft==0))return o;p=M,b=f,f=this.fb.lb(f),m=!m}while(b!=s)}return o},a.prototype.UV=function(s){for(var o=0,u=s.size;o<u;o++){var p=s.get(o),f=this.g.Qa(p,this.to),m=this.g.Qa(p,this.Ts);if(f!=-1){var b=this.fb.ka(f);this.hb.mF(b),this.g.Sa(p,this.to,-1)}m!=-1&&(b=this.fb.ka(m),this.hb.mF(b),this.g.Sa(p,this.Ts,-1)),b=-1,f!=-1&&m!=-1?(this.fb.wd(f,-1),this.fb.wd(m,-1),s.set(o,-1)):b=f!=-1?f:m,b!=-1&&(this.jG(p,b)||this.fb.wd(b,-1),s.set(o,-1))}},a.prototype.jG=function(s,o){var u=new c.h,p=new c.h;this.g.Hc(s,u);var f=this.g.V(s);this.g.Hc(f,p);var m=!1;if(u.y<p.y){m=!0;var b=this.hb.iI(s);if(o==-1)var _=this.fb.addElement(b,-1);else _=o,this.fb.Uj(_,b);(b=this.g.Qa(f,this.to))==-1?this.g.Sa(f,this.to,_):this.g.Sa(f,this.Ts,_),f=this.g.cd(s),this.g.uj(f,this.Gl)==0&&this.Ym.add(_)}return f=this.g.Na(s),this.g.Hc(f,p),u.y<p.y&&(m=!0,b=this.hb.iI(f),o==-1?_=this.fb.addElement(b,-1):(_=o,this.fb.Uj(_,b)),(b=this.g.Qa(f,this.to))==-1?this.g.Sa(f,this.to,_):this.g.Sa(f,this.Ts,_),f=this.g.cd(s),this.g.uj(f,this.Gl)==0&&this.Ym.add(_)),m},a.W=function(s,o,u,p){var f=new a;return f.g=s,f.Y=o,f.Il=u,f.hw=p,f.CQ()},a.prototype.DQ=function(){var s=new c.ja(0),o=new c.ja(0),u=-1,p=-1,f=new c.h;f.Sc();for(var m=-1,b=-1,_=-1,M=new c.h,T=this.Il.sc(this.Il.ke);T!=-1;T=this.Il.lb(T)){var A=this.Il.getData(T);this.g.Hc(A,M);var O=this.g.cd(A);f.rb(M)&&b==O?(p==-1&&(u=this.g.Fy(),p=this.g.Hd()),_==-1&&(_=o.size,this.g.Sa(m,p,_),o.add(1),this.g.uj(O,u)==-1&&(this.g.ir(O,u,m),s.add(O))),this.g.Sa(A,p,_),o.XW(o.Gc()+1)):(_=-1,f.N(M)),m=A,b=O}if(s.size==0)return!1;for(f=new c.ja(0),m=new c.ja(0),b=0,_=s.size;b<_;b++){O=s.get(b);var R=this.g.uj(O,u);for(A=this.g.Qa(R,p),f.clear(!1),m.clear(!1),f.add(R),m.add(A),A=this.g.V(R);A!=R;A=this.g.V(A)){var j=A;if((M=this.g.Qa(j,p))!=-1)if(m.size==0)m.add(M),f.add(j);else if(m.Gc()==M){T=f.Gc();var z=this.g.V(T);R=this.g.V(j),this.g.Cc(T,R),this.g.Dc(R,T),this.g.Cc(j,z),this.g.Dc(z,j),j=[!1],z=this.g.iG(this.Y,z,this.g.Ya(O),j),this.g.Sa(A,p,-1),j[0]&&this.g.Kf(O,R),A=this.g.Ka(O),A-=R=this.g.Ka(z),this.g.Xj(O,A),o.set(M,o.get(M)-1),o.get(M)==1&&(o.set(M,0),m.Jf(),f.Jf()),A=R=T}else f.add(A),m.add(M)}}return this.g.xB(u),this.g.Ud(p),!0},a}();c.RL=h}(H||(H={})),function(c){var C=function(){function w(){}return w.prototype.jg=function(){this.KA=this.tb=null},w.prototype.get=function(){return this.KA},w.prototype.set=function(h){if(this.KA=h,h!=null)throw h.K()==322&&(this.tb=h),c.i.Ra()},w.prototype.create=function(h){if(h!=322)throw c.i.ga("Not Implemented");this.Qr()},w.prototype.Qr=function(){this.tb==null&&(this.tb=new c.zb),this.KA=this.tb},w}();c.jg=C}(H||(H={})),function(c){(c=c.SL||(c.SL={}))[c.enumLineSeg=1]="enumLineSeg",c[c.enumBezierSeg=2]="enumBezierSeg",c[c.enumArcSeg=4]="enumArcSeg",c[c.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",c[c.enumSegmentMask=7]="enumSegmentMask",c[c.enumDensified=8]="enumDensified"}(H||(H={})),function(c){var C=function(h){this.bj=h,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},w=function(){function h(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new c.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return h.prototype.rB=function(a){if(a!=null){for(var s=0,o=a.length;s<o;s++)this.mW(a[s]);a.length=0}},h.prototype.mW=function(a){a.bj=null,this.Kq.push(a)},h.prototype.Qw=function(a){if(this.Kq.length===0)var s=new C(a);else(s=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return s},h.prototype.NR=function(a,s){return a==0?this.bt[s]:this.Aw[s]},h.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new c.jg);var a=this.HA[this.Ew];return this.Ew++,a},h.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},h.prototype.Qo=function(a){this.oo.push(this.Qw(a))},h.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},h.prototype.Xp=function(a,s){return this.NR(a,s).bj},h.prototype.Fa=function(a,s){if(this.oo.length!=2)throw c.i.Ra();this.ra=a;var o=c.mc.ox(.01*a),u=!1,p=this.oo[0],f=this.oo[1];if(s||5&p.bj.Br(f.bj,a,!0)){if(p.bj.K()==322){var m=p.bj;if(f.bj.K()==322){s=f.bj;var b=c.zb.Yx(m,s,null,this.Hq,this.Dk,a);if(b==0)throw c.zb.Yx(m,s,null,this.Hq,this.Dk,a),c.i.Ra();a=Array(9),c.P.bv(a,null);for(var _=0;_<b;_++){var M=this.Hq[_],T=this.Dk[_],A=p.nB,O=1;M==0?(A=p.oB,O=p.mC):M==1&&(A=p.mB,O=p.lC);var R=f.nB,j=1;T==0?(R=f.oB,j=f.mC):T==1&&(R=f.mB,j=f.lC);var z=new c.h;A==R?(A=new c.h,m.ic(M,A),M=new c.h,s.ic(T,M),j/=T=O+j,c.mc.JG(A,M,j,z),c.h.zc(z,A)+c.h.zc(z,M)>o&&(u=!0)):A>R?(m.ic(M,z),M=new c.h,s.ic(T,M),c.h.zc(z,M)>o&&(u=!0)):(s.ic(T,z),A=new c.h,m.ic(M,A),c.h.zc(z,A)>o&&(u=!0)),a[_]=z}for(p=0,f=-1,_=0;_<=b;_++)(j=_<b?this.Hq[_]:1)!=p&&(o=this.WA(),m.dh(p,j,o),f!=-1&&o.get().Ec(a[f]),_!=b&&o.get().Rc(a[_]),p=j,this.bt.push(this.Qw(o.get()))),f=_;for(m=[0,0,0,0,0,0,0,0,0],_=0;_<b;_++)m[_]=_;for(1<b&&this.Dk[0]>this.Dk[1]&&(j=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=j,_=m[0],m[0]=m[1],m[1]=_),p=0,f=-1,_=0;_<=b;_++)(j=_<b?this.Dk[_]:1)!=p&&(o=this.WA(),s.dh(p,j,o),f!=-1&&(p=m[f],o.get().Ec(a[p])),_!=b&&(p=m[_],o.get().Rc(a[p])),p=j,this.Aw.push(this.Qw(o.get()))),f=_;return u}}throw c.i.Ra()}return!1},h.prototype.Fz=function(a,s,o){if(s.copyTo(this.Cf),this.oo.length!=1)throw c.i.Ra();this.ra=a;var u=this.oo[0];if(o||u.bj.tu(s.D(),a,!0)){if(u.bj.K()!=322)throw c.i.Ra();var p=(a=u.bj).ge(s.D(),!1);this.Hq[0]=p;var f=u.nB;for(o=1,p==0?(f=u.oB,o=u.mC):p==1&&(f=u.mB,o=u.lC),u=new c.h,f==0?(f=new c.h,a.ic(p,f),s=s.D(),c.mc.JG(f,s,1/(o+1),u)):0<f?(u=new c.h,a.ic(p,u)):u=s.D(),o=0,p=-1,f=0;1>=f;f++){if((s=1>f?this.Hq[f]:1)!=o){var m=this.WA();a.dh(o,s,m),p!=-1&&m.get().Ec(u),f!=1&&m.get().Rc(u),o=s,this.bt.push(this.Qw(m.get()))}p=f}this.Cf.Db(u)}},h}();c.OC=w}(H||(H={})),function(c){var C=function(){function w(h){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=h,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new c.h}return w.prototype.wW=function(h){if(this.ib!=h.ib)throw c.i.Hb();this.Af=h.Af,this.Kd=h.Kd,this.gb=h.gb,this.El=h.El,this.cg=h.cg,this.Bm=h.Bm,this.tk=null},w.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw c.i.de();this.Kd++}return this.tk},w.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw c.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},w.prototype.xW=function(){this.Af=-1,this.Kd=0},w.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},w.prototype.Wb=function(h,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var s=this.DM();if(h>=s&&h<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=h-s)}a=0<=a&&a<this.ib.ea()&&h>=this.ib.Ca(a)&&h<this.ib.Wc(a)?a:this.ib.nz(h),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=h-this.ib.Ca(a),this.cg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},w.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},w.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},w.prototype.Vx=function(h){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(h)&&(a=0),this.ib.Ka(h)-a},w.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},w.prototype.EB=function(){this.Bm=!0},w.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},w.prototype.DM=function(){return this.ib.Ca(this.gb)},w.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},w.prototype.xm=function(){return this.Af==0},w.prototype.Sn=function(){return this.Af==this.cg-1},w.prototype.Ia=function(){return this.Kd<this.cg},w.prototype.zz=function(){return 0<this.Kd},w.prototype.Qf=function(){var h=new w(this.ib);return h.Af=this.Af,h.Kd=this.Kd,h.cg=this.cg,h.gb=this.gb,h.El=this.El,h.ib=this.ib,h.Bm=this.Bm,h},w.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw c.i.de();this.Af=this.Kd;var h=this.xb();this.ib.oc();var a=this.ib.Se,s=1;switch(a!=null&&(s=7&a.read(h)),a=this.ib.description,s){case 1:this.tb==null&&(this.tb=new c.zb),this.tk=this.tb;break;case 2:throw c.i.ga("internal error");default:throw c.i.Ra()}this.tk.Pf(a),s=this.kk(),this.ib.Hc(h,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(s,this.Fs),this.tk.Rc(this.Fs);for(var o=1,u=a.Ba;o<u;o++)for(var p=a.ld(o),f=c.sa.Wa(p),m=0;m<f;m++){var b=this.ib.Vc(p,h,m);this.tk.TB(p,m,b),b=this.ib.Vc(p,s,m),this.tk.JB(p,m,b)}},w.prototype.VS=function(){return this.gb==this.ib.ea()-1},w.prototype.Rn=function(){var h=this.ib.QR();return h!=null&&(7&h.read(this.Af))!=1},w}();c.TL=C}(H||(H={})),function(c){var C=function(){function w(h){h instanceof c.ba?(this.sH=h,this.za=-1,this.Gi=1):(this.qT=h.slice(0),this.za=-1,this.Gi=h.length)}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},w.prototype.re=function(){},w}();c.$c=C}(H||(H={})),function(c){var C=function(){this.next=null},w=function(){function h(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return h.prototype.wX=function(a,s,o){this.ri=a,this.rl=s,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=c.P.mg(384,0)),this.iK()},h.prototype.S=function(){return this.ri},h.prototype.da=function(){return this.rl},h.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},h.prototype.iK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var s=this.Yl[a];s!=null;){var o=s;s=s.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},h.prototype.dJ=function(a){for(this.fF=a==h.Bx,a=this.Nw;a<=this.Mw;a++)this.nN(),this.gN(a),this.UP();this.iK()},h.prototype.fy=function(a,s,o,u){if(s!=u){var p=1;if(s>u&&(p=a,a=o,o=p,p=s,s=u,u=p,p=-1),!(0>u||s>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var f=(o-a)/(u-s);u>this.rl&&(o=f*((u=this.rl)-s)+a),0>s&&(a=f*(0-s)+a,s=0);var m=Math.max(this.ri+1,8388607);-8388607>a?(s=(0-a)/f+s,a=0):a>m&&(s=(this.ri-a)/f+s,a=this.ri),-8388607>o?u=(0-a)/f+s:o>m&&(u=(this.ri-a)/f+s),(s=c.P.truncate(s))!=(u=c.P.truncate(u))&&((o=new C).x=c.P.truncate(4294967296*a),o.y=s,o.H=u,o.RP=c.P.truncate(4294967296*f),o.dir=p,this.Yl==null&&(this.Yl=c.P.mg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},h.prototype.nN=function(){if(this.Lh!=null){for(var a=!1,s=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var u=o;o=o.next,s!=null?s.next=o:this.Lh=o,u.next=null}else o.x+=o.RP,s!=null&&s.x>o.x&&(a=!0),s=o,o=o.next;a&&(this.Lh=this.aK(this.Lh))}},h.prototype.gN=function(a){if(!(a>=this.rl)){var s=this.Yl[a];if(s!=null){this.Yl[a]=null,s=this.aK(s),this.Vq-=this.bK,a=this.Lh;for(var o=!0,u=s,p=null;a!=null&&u!=null;)a.x>u.x?(o&&(this.Lh=u),o=u.next,u.next=a,p!=null&&(p.next=u),p=u,u=o):(o=a.next,a.next=u,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=s)}}},h.$J=function(a,s){return 0>a?0:a>s?s:a},h.prototype.UP=function(){if(this.Lh!=null){for(var a=0,s=this.Lh,o=c.P.truncate(c.P.SG(s.x)),u=s.next;u!=null;u=u.next)if(a=this.fF?1^a:a+u.dir,u.x>s.x){var p=c.P.truncate(c.P.SG(u.x));a!=0&&(s=h.$J(o,this.ri),(o=h.$J(p,this.ri))>s&&s<this.ri&&(this.jn[this.Ql++]=s,this.jn[this.Ql++]=o,this.jn[this.Ql++]=u.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),s=u,o=p}}},h.prototype.aK=function(a){for(var s=0,o=a;o!=null;o=o.next)s++;if(this.bK=s,s==1)return a;this.Lf==null?this.Lf=c.P.mg(Math.max(s,16),null):this.Lf.length<s&&(this.Lf=c.P.mg(Math.max(s,2*this.Lf.length),null));var u=0;for(o=a;o!=null;o=o.next)this.Lf[u++]=o;for(s==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):h.vN(this.Lf,s,function(p,f){return p==f?0:p.x<f.x?-1:p.x>f.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,u=1;u<s;u++)o.next=this.Lf[u],o=this.Lf[u],this.Lf[u]=null;return o.next=null,a},h.vN=function(a,s,o){if(s==a.length)a.sort(o);else{var u=a.slice(0,0),p=a.slice(s);s=a.slice(0,s).sort(o),a.length=0,a.push.apply(a,u.concat(s).concat(p))}},h.Bx=0,h}();c.Ox=w}(H||(H={})),function(c){var C=function(){function w(){}return w.prototype.wi=function(h,a){var s=this.g.Qa(h,this.Rq);if(this.Fl==s&&(this.Fl=this.pe.lb(this.Fl)),this.jo==s&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,s),this.dk(h),a&&(a=this.g.cd(h))!=-1&&this.g.Ya(a)==h){var o=this.g.V(h);if(o!=h){if((s=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(h))!=h&&(s=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},w.prototype.kD=function(){for(var h=!1,a=new c.h;;){this.Yh==null?(this.Yh=new c.ja(0),this.Bs=new c.ja(0),this.ye=new c.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var s=this.jo,o=0,u=!0;s!=this.Fl;){var p=this.pe.getData(s),f=new c.h;this.g.Hc(p,f),u&&(this.g.Hc(p,a),u=!1),f=this.g.Na(p);var m=this.g.V(p);this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(m,this.Ag)!=-559038737&&(this.Yh.add(m),this.g.Sa(m,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),s=this.pe.lb(s)}if(2>this.Yh.size)break;var b=this;for(this.ye.Wd(0,this.ye.size,function(_,M){return b.kM(_,M)}),s=0,o=this.ye.size;s<o;s++)u=this.ye.get(s),u=this.Yh.get(u),this.g.Sa(u,this.Ag,s),f=new c.h,this.g.Hc(u,f);for(f=this.OM(a),s=0,o=this.ye.size;s<o;s++)(u=this.ye.get(s))!=-1&&(u=this.Yh.get(u),this.g.Sa(u,this.Ag,-1));if(!f)break;h=!0}return h},w.prototype.OM=function(h){for(var a=!1,s=!0;s;){s=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++){var m=this.ye.get(o);u=this.ye.get(u),m=this.Yh.get(m),u=this.Yh.get(u);var b=this.g.V(m);this.g.Fv(b,h)||(b=this.g.Na(m));var _=this.g.V(u);this.g.Fv(_,h)||(_=this.g.Na(u));var M=this.ru(b,m),T=this.ru(_,u),A=M?this.g.Na(b):this.g.V(b),O=T?this.g.Na(_):this.g.V(_),R=!1;(this.up(b)||this.up(_)||this.up(m)||this.up(u)||this.up(A)||this.up(O))&&(R=!0),!R&&this.g.hq(m,u)&&(R=!0,this.oD(M,T,b,m,_,u)),!R&&this.g.hq(A,O)&&(R=!0,this.oD(!M,!T,b,A,_,O)),R&&(a=!0),s=s||R,o=this.em(o),u=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++)m=this.ye.get(o),u=this.ye.get(u),m=this.Yh.get(m),u=this.Yh.get(u),b=this.g.V(m),this.g.Fv(b,h)||(b=this.g.Na(m)),_=this.g.V(u),this.g.Fv(_,h)||(_=this.g.Na(u)),M=this.ru(b,m),T=this.ru(_,u),A=M?this.g.Na(b):this.g.V(b),O=T?this.g.Na(_):this.g.V(_),this.yM(M,T,m,b,A,u,_,O)&&(a=!0),o=this.em(o),u=this.em(o);return a},w.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new c.Hg().HU(this.hw,this.g,this.Y,this.od);var h=!1,a=!0;this.Ag=this.Rq=-1;var s=this.g.I(this.Y),o=new c.ja(0);o.Jb(s);for(var u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,m=this.g.Ka(u);f<m;f++)o.add(p),p=this.g.V(p);var b=this.g.ud.o,_=this.g.ud.Mf;this.g.wb.oc();var M=this.g.wb.Aa[0].o;for(o.Wd(0,s,function(A,O){var R=b[_*A],j=b[_*O],z=M[2*R];R=M[2*R+1];var V=M[2*j];return(z=R<(j=M[2*j+1])?-1:R>j?1:z<V?-1:z>V?1:0)==0&&(z=(A=b[_*A+3])<(O=b[_*O+3])?-1:A==O?0:1),z}),this.Rq=this.g.Hd(),this.pe=new c.lp,this.MA=this.pe.Rh(0),this.pe.hn(s),u=0;u<s;u++)p=o.get(u),f=this.pe.addElement(this.MA,p),this.g.Sa(p,this.Rq,f);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(h=!0);a;){a=!1,s=0,o=!1;do{o=!1,this.jo=-1,m=0,u=new c.h,f=new c.h;for(var T=this.pe.sc(this.MA);T!=-1;)p=this.pe.getData(T),this.jo!=-1?(this.g.Hc(p,f),u.rb(f)?m++:(u.N(f),this.Fl=T,0<m&&(p=this.kD())&&(o=!0,this.Fl!=-1&&(p=this.pe.getData(this.Fl),this.g.Hc(p,u))),this.jo=T=this.Fl,m=0)):(this.jo=T,this.g.Hc(this.pe.getData(T),u),m=0),T!=-1&&(T=this.pe.lb(T));if(this.Fl=-1,0<m&&(p=this.kD())&&(o=!0),10<s++)throw c.i.Ra();o&&this.BM(),this.YC()&&(o=!0),a=a||o&&!1,h=h||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),c.RL.W(this.g,this.Y,this.pe,this.hw)||h},w.prototype.ru=function(h,a){return this.g.V(a)!=h},w.prototype.yM=function(h,a,s,o,u,p,f,m){if(o==f)return this.dk(s),this.dk(p),!1;var b=this.g.Qa(s,this.Ag),_=this.g.Qa(u,this.Ag),M=this.g.Qa(p,this.Ag),T=this.g.Qa(m,this.Ag),A=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,A[0]=b,s[1]=0,A[1]=_,s[2]=1,A[2]=M,s[3]=1,A[3]=T,b=1;4>b;b++){for(_=A[b],M=s[b],T=b-1;0<=T&&A[T]>_;)A[T+1]=A[T],s[T+1]=s[T],T--;A[T+1]=_,s[T+1]=M}return A=0,s[0]!=0&&(A|=1),s[1]!=0&&(A|=2),s[2]!=0&&(A|=4),s[3]!=0&&(A|=8),(A==5||A==10)&&(h==a?h?(this.g.Cc(m,o),this.g.Dc(o,m),this.g.Cc(u,f),this.g.Dc(f,u)):(this.g.Dc(m,o),this.g.Cc(o,m),this.g.Dc(u,f),this.g.Cc(f,u)):h?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(f,u),this.g.Cc(u,f)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(f,u),this.g.Dc(u,f)),!0)},w.prototype.oD=function(h,a,s,o,u,p){this.IY?this.QM():this.PM(h,a,s,o,u,p)},w.prototype.QM=function(){throw c.i.ga("not implemented.")},w.prototype.PM=function(h,a,s,o,u,p){if(h!=a)h?(this.g.Cc(s,u),this.g.Dc(u,s),this.g.Cc(p,o),this.g.Dc(o,p),this.xn(u,s),this.wi(u,!0),this.g.oi(u,!0),this.dk(s),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(u,s),this.g.Dc(s,u),this.g.Cc(o,p),this.g.Dc(p,o),this.xn(u,s),this.wi(u,!0),this.g.oi(u,!1),this.dk(s),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.dk(o);else{var f=h?s:o,m=a?u:p;for(h=h?o:s,a=a?p:u,u=!1,this.g.Cc(f,m),this.g.Cc(m,f),this.g.Dc(h,a),this.g.Dc(a,h),p=a;p!=m;)s=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,s),u=u||p==f,p=o;u||(s=this.g.Na(m),o=this.g.V(m),this.g.Dc(m,o),this.g.Cc(m,s)),this.xn(m,f),this.wi(m,!0),this.g.oi(m,!1),this.dk(f),this.xn(a,h),this.wi(a,!0),this.g.oi(a,!1),this.dk(h)}},w.prototype.YC=function(){for(var h=!1,a=this.g.Ob(this.Y);a!=-1;){for(var s=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u&&1<u;){var p=this.g.Na(s),f=this.g.V(s);this.g.hq(p,f)?(h=!0,this.wi(s,!1),this.g.qd(s,!0),this.wi(f,!1),this.g.qd(f,!0),s=p,o=0,u=this.g.Ka(a)):(s=f,o++)}if(2>this.g.Ka(a)){for(h=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++)this.wi(h,!1),h=this.g.V(h);a=this.g.ar(a),h=!0}else a=this.g.Sb(a)}return h},w.prototype.up=function(h){for(var a=!1;;){var s=this.g.V(h),o=this.g.Na(h);if(s==h)return this.wi(h,!0),this.g.oi(h,!1),!0;if(!this.g.hq(s,o)||(a=!0,this.dk(o),this.dk(s),this.wi(h,!0),this.g.oi(h,!1),this.xn(s,o),this.wi(s,!0),this.g.oi(s,!0),s==o))break;h=o}return a},w.prototype.BM=function(){for(var h=0,a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a)){var s=this.pe.getData(a);this.g.cj(s,-1)}for(var o=0,u=this.g.Ob(this.Y);u!=-1;)if((a=this.g.Ya(u))==-1||this.g.cd(a)!=-1)s=u,u=this.g.Sb(u),this.g.br(s);else{this.g.cj(a,u);var p=1;for(s=this.g.V(a);s!=a;s=this.g.V(s))this.g.cj(s,u),p++;this.g.fp(u,!1),this.g.Xj(u,p),this.g.Yg(u,this.g.Na(a)),o+=p,h++,u=this.g.Sb(u)}for(a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a))s=this.pe.getData(a),this.g.cd(s)==-1&&(u=this.g.iG(this.Y,s,s,null),o+=this.g.Ka(u),h++);for(this.g.Tl(this.Y,h),this.g.Vj(this.Y,o),h=0,o=this.g.md;o!=-1;o=this.g.ve(o))h+=this.g.I(o);this.g.XB(h)},w.prototype.em=function(h){for(var a=0,s=this.ye.size-1;a<s;a++)if(h=(h+1)%this.ye.size,this.ye.get(h)!=-1)return h;return-1},w.prototype.xn=function(h,a){var s=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.Ag);this.g.gC(h,a),this.g.Sa(a,this.Rq,s),this.g.Sa(a,this.Ag,o)},w.prototype.dk=function(h){var a=this.g.Qa(h,this.Ag);a!=-1&&(this.ye.set(a,-1),this.g.Sa(h,this.Ag,-1))},w.W=function(h,a,s,o,u){var p=new w;return p.g=h,p.Y=a,p.sA=s,p.hw=o,p.od=u,p.SM()},w.prototype.kM=function(h,a){var s=this.Yh.get(h),o=new c.h;this.g.Hc(s,o),s=new c.h;var u=this.Yh.get(a);return this.g.Hc(u,s),o.rb(s)?0:(u=this.Bs.get(h),h=new c.h,this.g.Hc(u,h),u=this.Bs.get(a),a=new c.h,this.g.Hc(u,a),(u=new c.h).vc(o,h),(o=new c.h).vc(s,a),c.h.pu(u,o))},w}();c.tn=C}(H||(H={})),function(c){var C;(C=c.VL||(c.VL={}))[C.Local=0]="Local",C[C.Geographic=1]="Geographic",C[C.Projected=2]="Projected",C[C.Image=3]="Image",C[C.Unknown=4]="Unknown",function(h){h[h.Integer32=0]="Integer32",h[h.Integer64=1]="Integer64",h[h.FloatingPoint=2]="FloatingPoint"}(c.OL||(c.OL={}));var w=function(){function h(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return h.prototype.Fc=function(){return this.fg},h.prototype.QF=function(){return 1},h.prototype.QW=function(a){this.hA=a},h.prototype.Yd=function(){if(this.hA!==null)return this.hA;var a=.001;return this.fg!=0?a=c.yr.xQ(this.fg):this.yh!=null&&(a=c.SC.yQ(this.yh)),a},h.prototype.wz=function(){return this.yh},h.prototype.Id=function(){return this.fg!=0?c.Uc.ah(c.yr.Ny(this.fg)):this.yh!=null?c.SC.zQ(this.yh):void 0},h.Tb=function(a){if(a.fg!=0){if(c.yr.US(a.fg)===!0)return 1;if(c.yr.WS(a.fg)===!0)return 2}return 4},h.prototype.cs=function(){var a=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=c.yr.AK(a),this.Jo!=-1?this.Jo:a)},h.create=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var s=new h;return s.fg=a,s},h.lP=function(a){if(a==null||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var s=new h;return s.yh=a,s},h.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.fg==a.fg&&(this.fg!=0||this.yh===a.yh)},h.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},h.prototype.dc=function(){if(this.rp!=="")return this.rp;var a=this.toString();if(Array.prototype.reduce)return this.rp="S"+a.split("").reduce(function(u,p){return(u=(u<<5)-u+p.charCodeAt(0))&u},0);var s=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)s=(s<<5)-s+a.charCodeAt(o),s&=s;return this.rp="S"+s},h.prototype.Mn=function(){return this.Yd(0)},h.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=c.iu.tP(this)},h.UN=2147483645,h.VN=9007199254740990,h}();c.Gg=w}(H||(H={})),function(c){var C=function(w){function h(){var a=w!==null&&w.apply(this,arguments)||this;return a.Li=null,a.NT=null,a.Jq=new c.UL,a.Go=null,a.lw=null,a}return At(h,w),h.tP=function(a){var s=new h;if(s.fg=a.fg,s.Jo=a.Jo,s.UH=a.UH,s.yh=a.yh,s.yh!==""&&s.yh!==null){a=h.fM(s.yh);var o=h.dM(s.yh);s.Jq.Wx(a,o,c.ju.Integer64),s.ay(a),s.cy(o),s.fg=a.cs()}else a=h.eM(s.fg),s.ay(a),s.cy(null),s.Jq.Wx(a,null,c.ju.Integer64);return s},h.prototype.Yd=function(a){return this.Jq.Mn(a)},h.dM=function(a){if(0>=a.length)throw c.i.O();var s=null;try{s=c.IC.fromString(a)}catch{s=null}return s==null?null:h.XC(s,!0)},h.prototype.ay=function(a){this.Ld=a,this.Go=this.Ld.Id()},h.prototype.cy=function(a){this.FH=a,this.NT=this.FH!=null?this.FH.Go:null},h.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},h.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},h.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},h.prototype.rm=function(){return this.Ld.rm()},h.prototype.bf=function(){return this.Ld.bf()},h.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},h.prototype.Wp=function(){return this.Ld.Wp()},h.prototype.Yr=function(){return this.Ld.Yr()},h.prototype.mk=function(){return this.Ld.mk()},h.prototype.fS=function(a){return c.JC.Ky(this.Ld,a.Ld)},h.prototype.ol=function(){return this.Ld.ol()},h.prototype.Xr=function(){return this.Ld.Xr()},h.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},h.prototype.ih=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.ih(a),a},h.prototype.Le=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.uo},h.prototype.CR=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.BR(a),a},h.prototype.rv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.rv()},h.prototype.qv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.qv()},h.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},h.prototype.KQ=function(){return this.Ld.kv()},h.prototype.Sp=function(){return this.Go.getUnitFactor()},h.prototype.pz=function(a){return this.Jq.pz(a)},h.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.hk().tc();if(a==0||a===4)throw c.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw c.i.Ra();return this.lw=h.XE(a,this.Jq.QF())},h.XE=function(a,s){if(a==null)throw c.i.O("null pointer.");var o=new h;return a=h.ou(a,!0),o.Jq.Wx(a,null,s),o.ay(a),o.cy(null),o.fg=a.cs(),o},h.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case c.Tc.PE_TYPE_GEOGCS:return 1;case c.Tc.PE_TYPE_PROJCS:return 2}return 4},h.prototype.kv=function(){return this.Ld.kv()},h.ou=function(a,s){var o=a.getCode();if(0>=o&&0<(o=c.qf.getCode(a))){if((a=c.qf.coordsys(o))==null)throw c.i.O("Text to wkid mapping had failed: "+o);return h.ou(a,s)}if(s&&0<o&&(s=h.qx[o]))return s;s=c.Ab.zv(a,o,!1);var u=h.gK[s];return u||(a=0>=o?a:c.qf.coordsys(o),a=new c.JC(a),h.gK[s]=a,0<o&&(h.qx[o]=a),a)},h.eM=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var s=h.qx[a];if(s!=null)return s;if((s=c.qf.coordsys(a))==null)throw c.i.O("Invalid or unsupported wkid: "+a);return(s=h.ou(s,!1)).cs()!=a&&(h.qx[a]=s),s},h.fM=function(a){if(a==null||a===void 0||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var s=null;try{s=c.qf.fromString(c.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw c.i.O("Cannot create SpatialReference from text. "+o.message)}if(s===null)throw c.i.O("Cannot create SpatialReference from text. ");return h.ou(s,!0)},h.XC=function(a,s){var o,u=a.getCode();if(0>=u&&0<(u=c.qf.getCode(a))){if((u=c.qf.vertcs(u))===null)throw c.i.O();return h.XC(u,s)}if(s&&0<u&&(s=h.fK[u])||(a=c.Ab.zv(a,u,!1),s=h.hK[a]))return s;if(0>=u||(o=c.qf.vertcs(u)),o===null)throw c.i.O();return o=new c.KL(o),h.hK[a]=o,0<u&&(h.fK[u]=o),o},h.nI=function(a,s){if(s===null||s.B())return null;var o=new c.l;if(s!==null&&a.Tb()!=1){var u=a.tc(),p=u.gh();a=c.xr.Pr(a,u,null,null),(s=c.Gx.local().W(s,a,null)).A(o)}else p=a.gh(),s.A(o);return s=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new c.GC(o.v,o.G,o.C,o.H,s,p)},h.gD=function(a){var s={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var u=a[o],p={HY:!1,VY:"",UY:-1,geogtran:null};u.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var f=u.getGeogtran().getCode();-1<f?p.wkid=f:p.wkt=u.getGeogtran().toString(),s.steps.push(p)}return s},h.SR=function(a,s,o,u){return o===void 0&&(o=null),o=h.nI(u,o),a=c.np.getGTlist(a.gh(),s.gh(),2,c.np.PE_GTLIST_OPTS_COMMON,o,1),s=null,a&&0<a.length&&(s=this.gD(a[0]),c.Lx.destroy(a)),o!==null&&o.destroy(),s},h.TR=function(a,s,o,u){var p;if(o===void 0&&(o=null),u===void 0&&(u=null),p===void 0&&(p=30),o=h.nI(u,o),a=c.np.getGTlist(a.gh(),s.gh(),2,c.np.PE_GTLIST_OPTS_COMMON,o,p),s=[],a&&0<a.length){for(p=0;p<a.length;p++)s.push(this.gD(a[p]));c.Lx.destroy(a)}return o!==null&&o.destroy(),s},h.qx={},h.gK={},h.fK={},h.hK={},h}(c.Gg);c.iu=C}(H||(H={})),function(c){var C,w;(w=C=c.ju||(c.ju={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var h=function(){function a(){this.sp()}return a.prototype.assign=function(s){this.Hm=s.Hm,this.Im=s.Im,this.Rj=s.Rj,this.nA=s.nA,this.Ho=s.Ho,this.mA=s.mA,this.Kk=s.Kk,this.Oq=s.Oq,this.Nq=s.Nq,this.Tm=s.Tm},a.prototype.QF=function(){return this.Tm},a.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=C.FloatingPoint},a.prototype.Wx=function(s,o,u){if(this.sp(),this.Tm=u,u!=C.FloatingPoint){var p=new c.l;s.cR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=s.Re.getType())==c.Tc.PE_TYPE_GEOGCS?(p=(u==C.Integer64?1e-9:1/18e5)*s.bf(),this.Rj=1/p):p==c.Tc.PE_TYPE_PROJCS&&(p=(u==C.Integer64?1e-4:.001)*s.rm(),this.Rj=1/p),o!=null?(p=(u==C.Integer32?.001:1e-4)*o.DH,this.Ho=1/p):this.Ho=1e4,this.TM(),this.Kk=s.uw,this.Oq=o!=null?.001*o.DH:.001,this.Nq=2220446049250313e-29},a.prototype.TM=function(){if(this.Tm!=C.FloatingPoint){var s=this.Tm==C.Integer64?c.Gg.VN:c.Gg.UN,o=s/this.Rj,u=this.Hm+o,p=c.P.truncate((u-this.Hm)*this.Rj);p>s&&(this.Rj=s/(u-this.Hm)),o=this.Im+o,(p=c.P.truncate((o-this.Im)*this.Rj))>s&&(this.Rj=s/(o-this.Im))}},a.prototype.WB=function(s){switch(s){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Mn=function(s){switch(s){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(s){if(this.Tm==C.FloatingPoint)return 0;switch(s){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},a.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Kk.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();c.UL=h}(H||(H={})),function(c){function C(u,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*u,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function w(u,p,f){return u=u/6378137*57.29577951308232,f?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function h(u,p,f){var m=u.Qf();if(u.K()===33)p=p(m.Ng(),m.kh()),m.Db(p[0],p[1]);else if(u.K()===197){var b=p(u.gs(),u.js(),f);p=p(u.fs(),u.hs(),f),m.L(b[0],b[1],p[0],p[1])}else for(b=new c.h,u=0;u<m.I();u++){m.D(u,b);var _=p(b.x,b.y,f);b.na(_[0],_[1]),m.Db(u,b)}return m}function a(u){return h(u,w,!0)}function s(u){return h(u,C,!0)}var o=Math.PI/180;c.PK=function(){function u(){}return u.xu=function(p){var f=Math.sqrt(.006694379990197414),m=Math.sin(p.y*o);return c.h.construct(6378137*p.x*o,3.1677196636462314e6*(m/(1-.006694379990197414*m*m)-1/(2*f)*Math.log((1-f*m)/(1+f*m))))},u.Ux=function(p,f,m,b){var _=.0033528106647474805,M=Math.sin(m);m=Math.cos(m);var T=(1-_)*Math.tan(p),A=T*(p=1/Math.sqrt(1+T*T)),O=Math.atan2(T,m),R=(T=p*M)*T,j=1-R,z=27233160610754688e-5*j/4040829998466145e-2,V=1+z/16384*(4096+z*(z*(320-175*z)-768)),F=z/1024*(256+z*(z*(74-47*z)-128));z=b/(635675231424518e-8*V);for(var G,Z,K,re=2*Math.PI;1e-12<Math.abs(z-re);)K=Math.cos(2*O+z),re=z,z=b/(635675231424518e-8*V)+F*(G=Math.sin(z))*(K+F/4*((Z=Math.cos(z))*(2*K*K-1)-F/6*K*(4*G*G-3)*(4*K*K-3)));return b=A*G-p*Z*m,j=_/16*j*(4+_*(4-3*j)),c.h.construct((f+(Math.atan2(G*M,p*Z-A*G*m)-(1-j)*_*T*(z+j*G*(K+j*Z*(2*K*K-1)))))/o,Math.atan2(A*Z+p*G*m,(1-_)*Math.sqrt(R+b*b))/o)},u.HM=function(p,f,m,b){var _=.0033528106647474805,M=b-f,T=Math.atan((1-_)*Math.tan(p)),A=Math.atan((1-_)*Math.tan(m)),O=Math.sin(T);T=Math.cos(T);var R=Math.sin(A);A=Math.cos(A);var j=M,z=1e3;do{var V=Math.sin(j),F=Math.cos(j),G=Math.sqrt(A*V*A*V+(T*R-O*A*F)*(T*R-O*A*F));if(G===0)return 0;F=O*R+T*A*F;var Z=Math.atan2(G,F),K=T*A*V/G,re=1-K*K;V=F-2*O*R/re,isNaN(V)&&(V=0);var te=_/16*re*(4+_*(4-3*re)),he=j;j=M+(1-te)*_*K*(Z+te*G*(V+te*F*(2*V*V-1)))}while(1e-12<Math.abs(j-he)&&0<--z);return z===0?(O=b-f,{azimuth:Math.atan2(Math.sin(O)*Math.cos(m),Math.cos(p)*Math.sin(m)-Math.sin(p)*Math.cos(m)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(m)+Math.cos(p)*Math.cos(m)*Math.cos(b-f))}):(f=(p=27233160610754688e-5*re/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(A*Math.sin(j),T*R-O*A*Math.cos(j)),TQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(Z-f*G*(V+f/4*(F*(2*V*V-1)-f/6*V*(4*G*G-3)*(4*V*V-3)))),TY:Math.atan2(T*Math.sin(j),T*R*Math.cos(j)-O*A)})},u.eQ=function(p){var f=p.hasAttribute(1),m=p.hasAttribute(2),b=[],_=p.ea(),M=null,T=null;f&&(M=p.vb(1)),m&&(T=p.vb(2));for(var A=new c.h,O=0;O<_;O++){for(var R=p.Ca(O),j=p.Ka(O),z=0,V=0,F=NaN,G=NaN,Z=NaN,K=NaN,re=p.ec(O),te=[],he=R;he<R+j;he++){p.D(he,A),K=Z=NaN;var ye=[A.x,A.y];f&&(Z=M.get(he),ye.push(Z)),m&&(_=T.get(he),ye.push(K)),he==R&&re&&(z=A.x,V=A.y,F=Z,G=K),te.push(ye)}!re||z==A.x&&V==A.y&&(!f||isNaN(F)&&isNaN(Z)||F==Z)&&(!m||isNaN(G)&&isNaN(K)||G==K)||te.push(te[0].slice(0)),b.push(te)}return b},u.Ry=function(p,f){p=u.eQ(p),637.100877141506>f&&(f=637.100877141506);for(var m,b=[],_=0;_<p.length;_++){var M,T,A=p[_];b.push(m=[]),m.push([A[0][0],A[0][1]]);var O=A[0][0]*o,R=A[0][1]*o;for(M=0;M<A.length-1;M++){var j=A[M+1][0]*o,z=A[M+1][1]*o;if(O!==j||R!==z){j=(z=u.HM(R,O,z,j)).azimuth;var V=(z=z.TQ)/f;if(1<V){for(T=1;T<=V-1;T++){var F=u.Ux(R,O,j,T*f);m.push([F.x,F.y])}T=u.Ux(R,O,j,(z+Math.floor(V-1)*f)/2),m.push([T.x,T.y])}R=u.Ux(R,O,j,z),m.push([R.x,R.y]),O=R.x*o,R=R.y*o}}}return{lJ:b}},u.SQ=function(p){for(var f=[],m=0;m<p.length;m++){var b=p[m];b=u.Ry(b,1e4),f.push(b)}p=[];for(var _=0;_<f.length;_++){b=f[_];var M=0;for(m=0;m<b.lJ.length;m++){var T,A=b.lJ[m],O=u.xu(c.h.construct(A[0][0],A[0][1])),R=u.xu(c.h.construct(A[A.length-1][0],A[A.length-1][1])),j=R.x*O.y-O.x*R.y;for(T=0;T<A.length-1;T++)O=u.xu(c.h.construct(A[T+1][0],A[T+1][1])),j+=(R=u.xu(c.h.construct(A[T][0],A[T][1]))).x*O.y-O.x*R.y;M+=j}M/=1,p.push(M/-2)}return p},u}(),c.cb=function(){function u(){}return u.sB=function(p,f,m,b,_,M,T){u.bD[p.dc()]=f,isNaN(m)==0&&(u.hD[p.dc()]=m),isNaN(b)==0&&(u.uD[p.dc()]=b),isNaN(_)==0&&(u.WC[p.dc()]=_),u.iD[p.dc()]=M,T!==null&&(u.jD[p.dc()]=T)},u.Yw=function(p,f,m){u.nD[p.dc()+"-"+f.dc()]=m},u.tc=function(p){if((p=u.bD[p.dc()])==null)throw c.i.Fe();return p},u.bf=function(p){if((p=u.hD[p.dc()])==null)throw c.i.Fe();return p},u.xv=function(p){if((p=u.uD[p.dc()])==null)throw c.i.Fe();return p},u.gv=function(p){if((p=u.WC[p.dc()])==null)throw c.i.Fe();return p},u.ih=function(p){if((p=u.jD[p.dc()])==null)throw c.i.Fe();return c.l.construct(p[0],p[1],p[2],p[3])},u.Xc=function(p){if((p=u.iD[p.dc()])==null)throw c.i.Fe();return p},u.Bh=function(p,f,m){if(f.Nb(m))return p;var b=u.nD[f.dc()+"-"+m.dc()];if(b!==void 0)return b(p,f,m);throw c.i.Fe()},u.wt=function(){throw c.i.Fe()},u.XQ=function(){throw c.i.Fe()},u.ZV=function(){throw c.i.Fe()},u.ol=function(){throw c.i.Fe()},u.nW=function(){var p=c.Gg.create(102100),f=c.Gg.create(3857),m=c.Gg.create(4326);c.cb.sB(p,m,NaN,NaN,NaN,!1,null),c.cb.sB(m,m,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),c.cb.sB(f,m,NaN,NaN,NaN,!1,null),c.cb.Yw(p,m,a),c.cb.Yw(m,p,s),c.cb.Yw(f,m,a),c.cb.Yw(m,f,s)},u.bD=[],u.hD=[],u.uD=[],u.WC=[],u.iD=[],u.jD=[],u.nD=[],u}()}(H||(H={})),H.cb.nW(),function(c){var C=function(){function w(h){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=h}return w.prototype.kd=function(h){h<this.Dl?(this.o[h*this.Mf]=this.ko,this.ko=h):this.Dl--,this.size--},w.prototype.U=function(h,a){return this.o[h*this.Mf+a]},w.prototype.T=function(h,a,s){this.o[h*this.Mf+a]=s},w.prototype.De=function(){var h=this.ko;if(h==-1){if(this.Dl==this.Jg){if(2147483647<(h=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(h=2147483647),h==this.Jg)throw c.i.de();this.yz(h)}h=this.Dl,this.Dl++}else this.ko=this.o[h*this.Mf];this.size++;for(var a=h*this.Mf;a<h*this.Mf+this.Mf;a++)this.o[a]=-1;return h},w.prototype.Nl=function(h){var a=this.ko;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw c.i.de();this.yz(a)}a=this.Dl,this.Dl++}else this.ko=this.o[a*this.Mf];this.size++;for(var s=a*this.Mf,o=0;o<h.length;o++)this.o[s+o]=h[o];return a},w.prototype.oj=function(h){this.ko=-1,this.size=this.Dl=0,h&&(this.o=null,this.Jg=0)},w.prototype.Ee=function(h){h>this.Jg&&this.yz(h)},w.prototype.sx=function(h,a){h*=this.Mf,a*=this.Mf;for(var s=0;s<this.Mf;s++){var o=this.o[a+s];this.o[a+s]=this.o[h+s],this.o[h+s]=o}},w.prototype.bC=function(h,a,s){var o=this.o[this.Mf*a+s];this.o[this.Mf*a+s]=this.o[this.Mf*h+s],this.o[this.Mf*h+s]=o},w.GG=function(h){return 0<=h},w.prototype.yz=function(h){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*h);a.set(this.o,0),this.o=a,this.Jg=h},w}();c.ad=C}(H||(H={})),function(c){var C,w;(w=C||(C={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var h=function(){function s(o){this.Ce=o,this.Ah=NaN,this.$G=new c.jg,this.aH=new c.jg,this.os=new c.Oc,this.ps=new c.Oc}return s.prototype.compare=function(o,u,p){if(o=o.ka(p),this.Ce.kB(u,this.$G),this.Ce.kB(o,this.aH),u=this.$G.get(),o=this.aH.get(),this.os.L(u.ta,u.qa),this.ps.L(o.ta,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=u.oa==u.ma;var f=o.oa==o.ma;if(p||f){if(p&&f)return 0;if(u.oa==o.oa&&u.ta==o.ta)return p?1:-1;if(u.ma==o.ma&&u.qa==o.qa)return p?-1:1}return(p=u.Me(this.Ah,this.os.pa))==(f=o.Me(this.Ah,this.ps.pa))&&((f=.5*((p=Math.min(u.ma,o.ma))+this.Ah))==this.Ah&&(f=p),p=u.Me(f,this.os.pa),f=o.Me(f,this.ps.pa)),p<f?-1:p>f?1:0},s.prototype.WJ=function(o){this.Ah=o},s}(),a=function(){function s(o){this.ib=o,this.RH=new c.jg,this.Cf=new c.h,this.rA=new c.Oc}return s.prototype.fX=function(o){this.Cf.N(o)},s.prototype.compare=function(o,u){return this.ib.kB(o.ka(u),this.RH),o=this.RH.get(),this.rA.L(o.ta,o.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},s}();C=function(){function s(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new c.Nd,this.XN=2147483647,this.WN=c.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return s.prototype.ty=function(o){this.gA=o},s.prototype.$m=function(){this.he==null&&(this.he=new c.ad(8));var o=this.he.De();return this.he.T(o,1,0),o},s.prototype.qU=function(){this.Lc==null&&(this.Lc=new c.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var u=this.Lc.De();return this.Lc.T(u,2,0),this.Lc.T(u,3,0),this.EJ(o,u),this.EJ(u,o),o},s.prototype.hI=function(){this.ze==null&&(this.ze=new c.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},s.prototype.OW=function(o,u){this.he.T(o,7,u)},s.prototype.on=function(o,u){this.he.T(o,2,u)},s.prototype.NW=function(o,u){this.he.T(o,1,u)},s.prototype.gX=function(o,u){this.he.T(o,3,u)},s.prototype.dX=function(o,u){this.he.T(o,4,u)},s.prototype.er=function(o,u){this.he.T(o,5,u)},s.prototype.$Q=function(o){return this.he.U(o,5)},s.prototype.MW=function(o,u){this.he.T(o,6,u)},s.prototype.YM=function(o,u){this.MW(u,o)},s.prototype.DJ=function(o,u){this.Lc.T(o,1,u)},s.prototype.EJ=function(o,u){this.Lc.T(o,4,u)},s.prototype.Vl=function(o,u){this.Lc.T(o,5,u)},s.prototype.Ul=function(o,u){this.Lc.T(o,6,u)},s.prototype.VW=function(o,u){this.Lc.T(o,2,u)},s.prototype.cx=function(o,u){this.Lc.T(o,3,u)},s.prototype.GF=function(o){return this.Lc.U(o,3)},s.prototype.Ht=function(o,u){this.Lc.T(o,7,u)},s.prototype.zK=function(o,u){if(this.om(o)!=-1)for(u=u?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,u)},s.prototype.xx=function(o,u){o!=-1&&(this.zK(o,u),this.zK(this.ya(o),u))},s.prototype.Et=function(o,u){this.ze.T(o,1,u)},s.prototype.Xg=function(o,u){this.ze.T(o,2,u)},s.prototype.ln=function(o,u){this.ze.T(o,3,u),this.IW(o,this.ZQ(u)),this.HW(u,o)},s.prototype.HW=function(o,u){this.ze.T(o,4,u)},s.prototype.IW=function(o,u){this.ze.T(o,5,u)},s.prototype.yJ=function(o,u){this.ze.T(o,6,u)},s.prototype.wJ=function(o,u){this.ze.T(o,7,u)},s.prototype.vJ=function(o,u){this.$n.write(o,u)},s.prototype.xJ=function(o,u){this.fA.write(o,u)},s.prototype.gY=function(o){var u=0,p=0,f=this.vF(o),m=new c.h,b=new c.h,_=new c.h;this.$r(f,m),b.N(m);var M=f;do this.nm(M,_),p+=c.h.ub(b,_),this.$e(this.ya(M))!=o&&(u+=(_.x-m.x-(b.x-m.x))*(_.y-m.y+(b.y-m.y))*.5),b.N(_),M=this.kc(M);while(M!=f);this.$n.write(o,u),this.fA.write(o,p)},s.prototype.KU=function(o,u){var p=new h(this),f=new c.$j;f.Ee(c.P.truncate(this.xa/2)),f.Xo(p);for(var m=new c.ja(0),b=this.bh(),_=null,M=0,T=new c.h,A=this.Oe;A!=-1;A=this.Tf(A)){if(!(255&++M)&&u!=null&&!u.progress(-1,-1))throw c.i.RC();var O=this.Je(A);if(O!=-1){if(m.Dh(0),!this.cY(f,b,m,O)){this.D(A,T),p.WJ(T.y);var R=O;do{var j=this.Bb(R,b);j!=-1&&(f.wd(j,-1),this.Kb(R,b,-2)),R=this.kc(this.ya(R))}while(O!=R);R=O;do(j=this.Bb(R,b))==-1&&(j=f.addElement(R,-1),m.add(j)),R=this.kc(this.ya(R));while(O!=R)}for(O=m.size-1;0<=O;O--)j=m.get(O),R=f.ka(j),this.Kb(this.ya(R),b,j),this.JU(f,j,o)}else this.Yy(A)==-1&&(_==null&&(_=new a(this)),this.D(A,T),_.fX(T),R=f.DW(_),O=this.Jl,R!=-1&&(j=f.ka(R),this.$e(j)==this.$e(this.ya(j))&&(j=this.JF(f,R)),j!=-1&&(O=this.$e(j))),this.YM(O,A))}this.Lg(b)},s.prototype.JU=function(o,u,p){var f=o.ka(u),m=this.$e(f);if(this.In(m)==-1){var b=this.JF(o,u),_=this.ya(f),M=this.$e(_);this.Mp(m),this.Mp(M);var T=this.In(m),A=this.In(M);if(b==-1&&T==-1&&(M==m?(this.ln(M,this.Jl),T=A=this.Jl):(A==-1&&(this.ln(M,this.Jl),A=this.Jl),this.ln(m,M),T=M)),b!=-1){var O=this.$e(b);A==-1&&(0>=this.Mp(O)?(A=this.In(O),this.ln(M,A)):(this.ln(M,O),A=O),M==m&&(T=A))}T==-1&&this.dY(m,M),p==0?this.eW(o,u,f,b,m,M):p==5?this.fW(o,u,f,_,m,M):p==4&&this.dW(f,b,m,M)}},s.prototype.eW=function(o,u,p,f,m,b){var _=this.jk(m);if(f!=-1){var M=this.jk(b),T=this.jk(this.$e(f));f=_&M&T,T^=T&this.fh(p),(T|=f)!=0&&(this.Xg(b,M|T),this.Xg(m,T|_),_=_||T)}for(u=o.lb(u);u!=-1&&(f=o.ka(u),p=this.$e(this.ya(f)),m=this.jk(p),b=this.fh(f),M=this.$e(f),f=m&(T=this.jk(M))&_,_^=_&b,(_|=f)!=0);u=o.lb(u))this.Xg(p,m|_),this.Xg(M,T|_)},s.prototype.fW=function(o,u,p,f,m,b){if(m!=b){p=this.Bb(p,this.eg),p+=this.Bb(f,this.eg),f=0;var _=new c.ja(0),M=new c.ja(0);M.add(0);for(var T=o.sc(-1);T!=u;T=o.lb(T)){var A=o.ka(T),O=this.ya(A),R=this.$e(A),j=this.$e(O);if(R!=j){if(A=this.Bb(A,this.eg),f+=A+=this.Bb(O,this.eg),O=!1,_.size!=0&&_.Gc()==j&&(M.Jf(),_.Jf(),O=!0),this.In(j)==-1)throw c.i.Ra();O&&this.In(j)==R||(M.add(f),_.add(R))}}f+=p,_.size!=0&&_.Gc()==b&&(M.Jf(),_.Jf()),f!=0?M.Gc()==0&&(o=this.g.md,o=this.Ma(o),this.Xg(m,o)):M.Gc()!=0&&(o=this.g.md,o=this.Ma(o),this.Xg(m,o))}},s.prototype.dW=function(o,u,p,f){var m=this.Ma(this.g.md);if(u==-1)this.Xg(f,this.Io),1&(o=this.Bb(o,this.yg))?this.Xg(p,m):this.Xg(p,this.Io);else{var b=this.jk(f);b==0?(b=this.jk(this.$e(u)),this.Xg(f,b),1&(o=this.Bb(o,this.yg))?this.Xg(p,b==m?this.Io:m):this.Xg(p,b)):1&(o=this.Bb(o,this.yg))?this.Xg(p,b==m?this.Io:m):this.Xg(p,b)}},s.prototype.cY=function(o,u,p,f){var m=f,b=-1,_=-1,M=0;do{if(M==2)return!1;var T=this.Bb(m,u);if(T!=-1){if(b!=-1)return!1;b=T}else{if(_!=-1)return!1;_=m}M++,m=this.kc(this.ya(m))}while(f!=m);return _!=-1&&b!=-1&&(this.Kb(o.ka(b),u,-2),o.Uj(b,_),p.add(b),!0)},s.prototype.dY=function(o,u){var p=this.Mp(o);if(p!=0){var f=this.Mp(u);0<p&&0>f||0>p&&0<f?this.ln(o,u):(u=this.In(u))!=-1&&this.ln(o,u)}},s.prototype.qP=function(o,u){this.Eq=this.g.Hd();for(var p=0,f=u.size;p<f;p++){var m=u.get(p),b=this.g.Qa(m,this.Em),_=this.g.Sf(this.g.cd(m)),M=this.g.jc(_);if(c.ba.Ic(M)){var T=this.g.V(m);if(T!=-1){var A=this.g.Qa(T,this.Em);if(b!=A){var O=this.qU(),R=this.ya(O),j=this.lh.De();this.lh.T(j,0,m),this.lh.T(j,1,-1),this.Ht(O,j),this.DJ(O,b),(j=this.Je(b))==-1?(this.on(b,O),this.Vl(O,R),this.Ul(R,O)):(b=this.ue(j),this.Vl(j,R),this.Ul(R,j),this.Ul(b,O),this.Vl(O,b)),this.DJ(R,A),(b=this.Je(A))==-1?(this.on(A,R),this.Ul(O,R),this.Vl(R,O)):(A=this.ue(b),this.Vl(b,O),this.Ul(O,b),this.Ul(A,R),this.Vl(R,A)),_=this.Ma(_),o==0?(this.Kb(R,this.be,0),this.Kb(O,this.be,M==1736?_:0)):o==5?(A=new c.h,this.g.D(m,A),m=new c.h,this.g.D(T,m),b=T=0,0>A.compare(m)?T=1:b=-1,this.Kb(R,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.eg,T),this.Kb(R,this.eg,b)):o==7?(this.Kb(R,this.be,this.Io),this.Kb(O,this.be,M==1736?_:0)):o==4&&(this.Kb(R,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.yg,1),this.Kb(R,this.yg,1)),M=M==1736?this.WN:0,this.cx(O,_|M),this.cx(R,_|M)}}}}},s.prototype.QT=function(o,u){var p=this.om(u);if(p!=-1){var f=this.om(o);this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1)}o=this.ya(o),u=this.ya(u),(p=this.om(u))!=-1&&(f=this.om(o),this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1))},s.prototype.EX=function(o){function u(Z,K){return f.CO(Z,K)}var p=new c.ja(0);p.Jb(10);for(var f=this,m=this.Oe;m!=-1;m=this.Tf(m)){p.clear(!1);var b=this.Je(m);if(b!=-1){var _=b;do p.add(_),_=this.kc(this.ya(_));while(_!=b);if(1<p.size){if(_=!0,2<p.size)p.Wd(0,p.size,u),p.add(p.get(0));else if(0<this.BO(p.get(0),p.get(1))){var M=p.get(0);p.set(0,p.get(1)),p.set(1,M)}else _=!1;for(var T=M=p.get(0),A=this.vf(T),O=this.ya(T),R=-1,j=1,z=p.size;j<z;j++){var V=p.get(j),F=this.ya(V),G=this.lk(F);if(G==A&&V!=T){if(o==0)R=this.GF(T)|this.GF(V),this.cx(T,R),this.cx(O,R),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(V,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(F,this.be));else if(this.eg!=-1)R=this.Bb(T,this.eg)+this.Bb(V,this.eg),F=this.Bb(O,this.eg)+this.Bb(F,this.eg),this.Kb(T,this.eg,R),this.Kb(O,this.eg,F);else{if(o==7)return void(this.Pi=new c.Nd(5,m,-1));this.yg!=-1&&(R=this.Bb(T,this.yg)+this.Bb(V,this.yg),F=this.Bb(O,this.yg)+this.Bb(F,this.yg),this.Kb(T,this.yg,R),this.Kb(O,this.yg,F))}this.QT(T,V),this.Gy(V),R=T,p.set(j,-1),V==M&&(p.set(0,-1),M=-1)}else this.xx(R,!1),R=-1,T=V,A=G,O=F}if(this.xx(R,!1),R=-1,_){for(M=-1,j=0,z=p.size;j<z;j++)if((V=p.get(j))!=-1){if(M==-1)T=M=V,A=this.vf(T),O=this.ya(T);else if(V!=T&&(F=this.ya(V),G=this.lk(F),this.Ul(O,V),this.Vl(V,O),T=V,A=G,O=F,o==7&&(this.Bb(V,this.be)|this.Bb(this.ue(V),this.be))==(1|this.Io)))return void(this.Pi=new c.Nd(5,m,-1))}this.on(m,M)}else{for(M=-1,j=0,z=p.size;j<z;j++)if((V=p.get(j))!=-1){M=V;break}b!=M&&this.on(m,M)}}}}},s.prototype.RN=function(){for(var o=-1,u=this.bh(),p=this.Oe;p!=-1;p=this.Tf(p)){var f=this.Je(p);if(f!=-1){var m=f;do{if(this.Bb(m,u)!=1){var b=this.hI();this.Et(b,m),this.wJ(b,o),o!=-1&&this.yJ(o,b),o=b;var _=0,M=m;do _|=this.Bb(M,this.be),this.VW(M,b),this.Kb(M,u,1),M=this.kc(M);while(M!=m);this.Xg(b,_)}m=this.kc(this.ya(m))}while(m!=f)}}b=this.hI(),this.Et(b,-1),this.wJ(b,o),o!=-1&&this.yJ(o,b),this.Jl=b,this.$n=c.ce.rf(this.ze.size,NaN),this.fA=c.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(u)},s.prototype.mR=function(o,u,p){if((u=u!=-1?u:this.Je(o))==-1)return-1;for(o=u;;){if(this.Bb(u,p)!=1)return u;if((u=this.kc(this.ya(u)))==o)return-1}},s.prototype.tW=function(){for(var o=this.bh(),u=this.Oe;u!=-1;u=this.Tf(u))for(var p=-1;;){var f=this.mR(u,p,o);if(f==-1)break;p=this.kc(this.ya(f));for(var m=f;;){var b=this.kc(m),_=this.ue(m),M=this.ya(m);if(_==M){if(this.DP(m),p!=m&&p!=M||(p=-1),m==f||_==f){if(m==(f=b)||_==f)break;m=b;continue}}else this.Kb(m,o,1);if((m=b)==f)break}}this.Lg(o)},s.prototype.HB=function(o,u,p,f,m){this.Wg(),this.bH=m,this.g=o,this.Dq=this.g.WE(),(o=new c.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var b=0,_=1,M=p!=null?p.get(0):this.g.md;for(m=1;M!=-1;){this.g.CJ(M,this.Dq,_),_<<=1;for(var T=this.g.Ob(M);T!=-1;T=this.g.Sb(T))for(var A=this.g.Ya(T),O=0,R=this.g.Ka(T);O<R;O++)o.add(A),A=this.g.V(A);c.ba.Tn(this.g.jc(M))||(b+=this.g.ea(M)),p!=null?(M=m<p.size?p.get(m):-1,m++):M=this.g.ve(M)}for(this.Io=_,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new c.ad(2),this.he=new c.ad(8),this.Lc=new c.ad(8),this.ze=new c.ad(8)),this.lh.Ee(this.xa),c.op.Bp(f),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,b)),this.Em=this.g.Hd(),p=new c.h,m=0,b=new c.h,p.Sc(),_=0;_<=this.xa;_++)if(_<this.xa?(A=o.get(_),this.g.D(A,b)):b.Sc(),!p.rb(b)){if(m<_){for(A=this.$m(),R=O=-1;m<_;m++)R=o.get(m),this.g.Sa(R,this.Em,A),M=this.lh.De(),this.lh.T(M,0,R),this.lh.T(M,1,O),O=M,T=this.g.cd(R),M=this.g.Sf(T),M=this.Ma(M),this.NW(A,this.yd(A)|M);this.OW(A,O),this.er(A,this.g.Va(R)),this.Qs!=-1&&this.dX(this.Qs,A),this.gX(A,this.Qs),this.Qs=A,this.Oe==-1&&(this.Oe=A)}m=_,p.N(b)}c.op.Bp(f),this.be=this.bh(),u==5&&(this.eg=this.bh()),u==4&&(this.yg=this.bh()),this.qP(u,o),this.Pi.Lj==0&&(this.EX(u),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(u,f))):this.kA=!0))},s.prototype.Gy=function(o){var u=this.kc(o),p=this.ue(o),f=this.ya(o),m=this.kc(f),b=this.ue(f);u!=f&&(this.Ul(b,u),this.Vl(u,b)),p!=f&&(this.Ul(p,m),this.Vl(m,p)),p=this.lk(o),this.Je(p)==o&&(m!=o?this.on(p,m):this.on(p,-1)),m=this.lk(f),this.Je(m)==f&&(u!=f?this.on(m,u):this.on(m,-1)),this.Lc.kd(o),this.Lc.kd(f)},s.prototype.JF=function(o,u){for(;;){if((u=o.xe(u))==-1)return-1;var p=o.ka(u);if(this.$e(p)!=this.$e(this.ya(p)))return p}},s.prototype.fr=function(o,u){var p;p===void 0&&(p=!0),this.HB(o,0,null,u,p)},s.prototype.qJ=function(o,u,p){var f=new c.ja(0);f.add(u),this.HB(o,4,f,p,o.jc(u)==1736)},s.prototype.rJ=function(o,u,p){var f=new c.ja(0);f.add(u),this.HB(o,5,f,p,!0)},s.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},s.prototype.Je=function(o){return this.he.U(o,2)},s.prototype.D=function(o,u){this.g.ZF(this.$Q(o),u)},s.prototype.yd=function(o){return this.he.U(o,1)},s.prototype.Tf=function(o){return this.he.U(o,4)},s.prototype.Yy=function(o){return this.he.U(o,6)},s.prototype.mm=function(o){return this.he.U(o,7)},s.prototype.ls=function(o){return this.lh.U(o,1)},s.prototype.vj=function(o){return this.lh.U(o,0)},s.prototype.og=function(o,u){return(u=this.Fi[u]).size<=o?-1:u.read(o)},s.prototype.pn=function(o,u,p){(u=this.Fi[u]).size<=o&&u.resize(this.he.size,-1),u.write(o,p)},s.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=c.ja.rf(this.he.Jg,-1),u=0,p=this.Fi.length;u<p;u++)if(this.Fi[u]==null)return this.Fi[u]=o,u;return this.Fi.push(o),this.Fi.length-1},s.prototype.Gp=function(o){this.Fi[o]=null},s.prototype.lk=function(o){return this.Lc.U(o,1)},s.prototype.vf=function(o){return this.lk(this.ya(o))},s.prototype.ya=function(o){return this.Lc.U(o,4)},s.prototype.ue=function(o){return this.Lc.U(o,5)},s.prototype.kc=function(o){return this.Lc.U(o,6)},s.prototype.$e=function(o){return this.Lc.U(o,2)},s.prototype.af=function(o){return this.jk(this.Lc.U(o,2))},s.prototype.om=function(o){return this.Lc.U(o,7)},s.prototype.$r=function(o,u){this.D(this.lk(o),u)},s.prototype.nm=function(o,u){this.D(this.vf(o),u)},s.prototype.fh=function(o){return this.Lc.U(o,3)&this.XN},s.prototype.Bb=function(o,u){return(u=this.Ii[u]).size<=o?-1:u.read(o)},s.prototype.Kb=function(o,u,p){(u=this.Ii[u]).size<=o&&u.resize(this.Lc.size,-1),u.write(o,p)},s.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=c.ja.rf(this.Lc.Jg,-1),u=0,p=this.Ii.length;u<p;u++)if(this.Ii[u]==null)return this.Ii[u]=o,u;return this.Ii.push(o),this.Ii.length-1},s.prototype.Lg=function(o){this.Ii[o]=null},s.prototype.DP=function(o){var u=this.$e(o),p=this.ya(o),f=this.kc(o);f==p&&(f=this.kc(f))==o&&(f=-1);var m=this.vF(u);m!==o&&m!=p||this.Et(u,f),p=this.$n.read(u),isNaN(p)||(this.vJ(u,NaN),this.xJ(u,NaN)),this.xx(o,!0),this.Gy(o)},s.prototype.EP=function(o){for(var u=0,p=o.size;u<p;u++){var f=o.get(u),m=this.$e(this.ya(f));this.Et(this.$e(f),-1),this.Et(m,-1),this.xx(f,!0),this.Gy(f)}},s.prototype.vF=function(o){return this.ze.U(o,1)},s.prototype.jk=function(o){return this.ze.U(o,2)},s.prototype.In=function(o){return this.ze.U(o,3)},s.prototype.ZQ=function(o){return this.ze.U(o,4)},s.prototype.Mp=function(o){var u=this.$n.read(o);return isNaN(u)&&(this.gY(o),u=this.$n.read(o)),u},s.prototype.Ma=function(o){return this.g.FF(o,this.Dq)},s.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},s.prototype.oR=function(o){return this.g.Qa(o,this.Eq)},s.prototype.nR=function(o,u){var p=this.Je(o);if(p==-1)return-1;var f=p,m=-1,b=-1;do{if(this.vf(f)==u)return f;if(m==-1){if((m=this.Je(u))==-1)break;b=m}if(this.vf(b)==o)return this.ya(b);f=this.kc(this.ya(f)),b=this.kc(this.ya(b))}while(f!=p&&b!=m);return-1},s.prototype.kB=function(o,u){u.Qr(),u=u.get();var p=new c.h;this.$r(o,p),u.Ec(p),this.nm(o,p),u.Rc(p)},s.prototype.CO=function(o,u){if(o==u)return 0;var p=new c.h;this.nm(o,p);var f=new c.h;return this.nm(u,f),p.rb(f)?0:(u=new c.h,this.$r(o,u),(o=new c.h).vc(p,u),(p=new c.h).vc(f,u),c.h.pu(o,p))},s.prototype.BO=function(o,u){if(o==u)return 0;var p=new c.h;this.nm(o,p);var f=new c.h;return this.nm(u,f),p.rb(f)?0:(u=new c.h,this.$r(o,u),(o=new c.h).vc(p,u),(p=new c.h).vc(f,u),0<=p.y&&0<o.y?c.h.pu(o,p):0)},s.prototype.sO=function(){for(var o=c.mc.ox(this.gA),u=new c.h,p=new c.h,f=new c.h,m=new c.h,b=new c.h,_=this.Oe;_!=-1;_=this.Tf(_)){var M=this.Je(_);if(M!=-1){var T=M;this.$r(T,u),this.nm(T,p),b.vc(p,u);var A=b.Uk();do{var O=T;if((T=this.kc(this.ya(T)))!=O){this.nm(T,f),m.vc(f,u),O=m.Uk();var R=m.yi(b);if(R*R/(O*A)*Math.min(O,A)<=o)return!1;b.N(m),A=O,p.N(f)}}while(T!=M)}}return!0},s}(),c.ku=C}(H||(H={})),function(c){var C=function(){function w(){this.j=null,this.jH=new c.h,this.kH=new c.h,this.Ij=null,this.Ov=!1,this.vl=-1}return w.prototype.cf=function(h){return h<this.Ij.length&&this.Ij[h]},w.prototype.fl=function(h,a,s,o){var u=c.ba.uf(this.j.g.jc(s));if(c.ba.uf(this.j.g.jc(a))!=2||u!=1)throw c.i.Ra();this.AP(h,a,s,o)},w.prototype.fr=function(h,a){this.j==null&&(this.j=new c.ku),this.j.fr(h,a)},w.prototype.Gt=function(h,a,s){for(c.Vk.W(h,a,s,!0),a=h.md;a!=-1;a=h.ve(a))h.jc(a)==1736&&c.tn.W(h,a,-1,this.Ov,s);this.fr(h,s)},w.prototype.HE=function(h,a,s,o,u){var p=this.j.g;if(p.jc(h)==1736)for(h=p.Ob(h);h!=-1;h=p.Sb(h)){var f=p.Ya(h);this.j.Ie(f),this.j.Ie(p.V(f));var m=this.j.oR(f);if(m!=-1){var b=this.j.Bb(m,s);if(b!=1&&b!=2)if(this.cf(this.j.af(m))){this.j.Kb(m,s,1),b=p.wf(a,-1);var _=m,M=this.j.Ie(f),T=1;do{var A=this.um(f,u);p.kj(b,A),o!=-1&&this.j.pn(M,o,1),this.j.Kb(_,s,1),_=this.j.kc(_);do var O=(A=T==1?p.V(f):p.Na(f))!=-1?this.j.Ie(A):-1;while(O==M);var R=this.j.lk(_);if(R!=O){do O=(A=T==1?p.Na(f):p.V(f))!=-1?this.j.Ie(A):-1;while(O==M);R!=O?(O=R,A=this.j.vj(this.j.mm(O))):T=-T}M=O,f=A}while(_!=m);p.mn(b,!0)}else this.j.Kb(m,s,2)}}},w.prototype.$E=function(){for(var h=this.j.bh(),a=new c.ja(0),s=this.j.Oe;s!=-1;s=this.j.Tf(s)){var o=this.j.Je(s),u=o;if(o!=-1)do{if(this.j.Bb(u,h)!=1){var p=this.j.ya(u);this.j.Kb(p,h,1),this.j.Kb(u,h,1),this.cf(this.j.af(u))&&this.cf(this.j.af(p))&&a.add(u)}u=this.j.kc(this.j.ya(u))}while(u!=o)}this.j.Lg(h),this.j.EP(a)},w.prototype.um=function(h,a){return a==-1?h:this.WR(h,a)},w.prototype.WR=function(h,a){var s=this.j.g,o=this.j.mm(this.j.Ie(h));do{var u=this.j.vj(o);if(s.Sf(s.cd(u))==a)return u;o=this.j.ls(o)}while(o!=-1);return h},w.prototype.Qt=function(h,a,s){this.$E();var o=this.j.g,u=o.Kg(1736),p=this.j.bh();return this.pK(h,a,u,s,p,-1),this.j.Lg(p),c.tn.W(o,u,1,this.Ov,null),u},w.prototype.pK=function(h,a,s,o,u,p){for(this.HE(h,s,u,p,o),a!=-1&&this.HE(a,s,u,p,o),h=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Tf(a)){var f=this.j.Je(a);if(f!=-1){var m=f;do{var b=this.j.Bb(m,u);if(b!=1&&b!=2)if(this.cf(this.j.af(m))){b=h.wf(s,-1);var _=m;do{var M=this.j.om(_);M!=-1?M=this.j.vj(M):(M=this.j.vj(this.j.om(this.j.ya(_))),M=this.j.g.V(M)),M=this.um(M,o),h.kj(b,M),this.j.Kb(_,u,1),p!=-1&&(M=this.j.Ie(M),this.j.pn(M,p,1)),_=this.j.kc(_)}while(_!=m);h.mn(b,!0)}else this.j.Kb(m,u,2);m=this.j.kc(this.j.ya(m))}while(m!=f)}}},w.prototype.XX=function(h,a,s){var o=this.j.g,u=o.Kg(1736),p=o.Kg(1607),f=o.Kg(550);this.$E();var m=-1,b=this.j.bh(),_=this.j.Fp();for(this.pK(h,a,u,s,b,_),h=this.j.Oe;h!=-1;h=this.j.Tf(h))if((a=this.j.Je(h))!=-1){var M=a;do{var T=this.j.Bb(M,b),A=this.j.Bb(this.j.ya(M),b);if((T|=A)==2)if(T=this.j.fh(M),this.cf(T)){var O=o.wf(p,-1),R=M;T=this.$w(h,o),T=this.um(T,s),o.kj(O,T),this.j.pn(h,_,1);do{if(T=this.j.vf(R),A=this.$w(T,o),A=this.um(A,s),o.kj(O,A),this.j.Kb(R,b,1),this.j.Kb(this.j.ya(R),b,1),this.j.pn(T,_,1),R=this.j.kc(R),T=this.j.Bb(R,b),(T|=A=this.j.Bb(this.j.ya(R),b))!=2)break;if(T=this.j.fh(R),!this.cf(T)){this.j.Kb(R,b,1),this.j.Kb(this.j.ya(R),b,1);break}}while(R!=M)}else this.j.Kb(M,b,1),this.j.Kb(this.j.ya(M),b,1);M=this.j.kc(this.j.ya(M))}while(M!=a)}for(h=this.j.Oe;h!=-1;h=this.j.Tf(h))(T=this.j.og(h,_))!=1&&(T=this.j.yd(h),this.cf(T)&&(m==-1&&(m=o.wf(f,-1)),(a=this.j.mm(h))!=-1&&(a=this.j.vj(a),T=this.um(a,s),o.kj(m,T))));return this.j.Gp(_),this.j.Lg(b),c.tn.W(o,u,1,this.Ov,null),(s=[])[0]=f,s[1]=p,s[2]=u,s},w.prototype.$w=function(h,a){var s=-1;for(h=this.j.mm(h);h!=-1;h=this.j.ls(h)){var o=this.j.vj(h);s==-1&&(s=o);var u=this.j.Ma(a.Sf(a.cd(o)));if(this.cf(u)){s=o;break}}return s},w.prototype.gB=function(h,a){for(var s=this.ll(a),o=this.j.lk(a),u=this.j.vf(a),p=0,f=0,m=this.j.mm(o);m!=-1;m=this.j.ls(m)){var b=this.j.vj(m),_=h.cd(b),M=this.j.Ma(h.Sf(_));_=h.Ya(_),(M=(M&s)!=0)&&_==b&&(this.vl=a);var T=h.V(b);T!=-1&&this.j.Ie(T)==u?(p++,M&&(this.vl===-1&&_==T&&(b=this.j.kc(a),this.cf(this.ll(b))&&(this.vl=b)),f++)):(b=h.Na(b))!=-1&&this.j.Ie(b)==u&&(p--,M&&(this.vl===-1&&_===b&&(b=this.j.kc(a),this.cf(this.ll(b))&&(this.vl=b)),f--))}return this.j.D(o,this.jH),this.j.D(u,this.kH),(f!=0?f:p)*(h=c.h.ub(this.jH,this.kH))},w.prototype.ll=function(h){return this.j.fh(h)|this.j.af(h)|this.j.af(this.j.ya(h))},w.prototype.sK=function(h){for(var a=this.j.ya(this.j.ue(h)),s=-1;a!=h;){if(this.cf(this.ll(a))){if(s!=-1)return-1;s=a}a=this.j.ya(this.j.ue(a))}return s!=-1?this.j.ya(s):-1},w.prototype.tK=function(h){for(var a=this.j.ya(this.j.kc(h)),s=-1;a!=h;){if(this.cf(this.ll(a))){if(s!=-1)return-1;s=a}a=this.j.ya(this.j.kc(a))}return s!=-1?this.j.ya(s):-1},w.prototype.hJ=function(h,a,s,o,u){var p=this.j.g,f=h,m=this.j.ya(f);this.j.Kb(f,s,1),this.j.Kb(m,s,1),this.vl=-1;for(var b=this.gB(p,f),_=f,M=-1,T=!1,A=1;;){var O=this.j.ue(f);if(O==m)break;if(m=this.j.kc(m),this.j.ya(O)!=m){if((f=this.sK(f))==-1){T=!0;break}m=this.j.ya(f)}else f=O;if(f==h){M=h;break}if(O=this.ll(f),!this.cf(O))break;this.j.Kb(f,s,1),this.j.Kb(m,s,1),_=f,b+=this.gB(p,f),A++}if(M==-1)for(f=h,m=this.j.ya(f),M=f;(h=this.j.kc(f))!=m;){if(m=this.j.ue(m),this.j.ya(h)!=m){if((f=this.tK(f))==-1){T=!0;break}m=this.j.ya(f)}else f=h;if(O=this.ll(f),!this.cf(O))break;this.j.Kb(f,s,1),this.j.Kb(m,s,1),M=f,b+=this.gB(p,f),A++}else if(this.vl!=-1&&(_=this.vl,M=this.j.ue(this.vl),this.j.ya(M)!=this.j.kc(this.j.ya(_))&&(M=this.sK(_))==-1))throw c.i.Ra();for(0<=b||(f=M,M=this.j.ya(_),_=this.j.ya(f)),s=p.wf(a,-1),f=_,_=this.j.lk(_),T=this.j.vf(M)==_&&T,b=this.$w(_,p),b=this.um(b,u),p.kj(s,b),o!=-1&&this.j.pn(_,o,1),_=0,A=T?c.P.truncate((A+1)/2):-1;h=this.j.vf(f),b=this.$w(h,p),b=this.um(b,u),p.kj(s,b),_++,o!=-1&&this.j.pn(h,o,1),T&&_==A&&(s=p.wf(a,-1),p.kj(s,b)),f!=M;)if(h=this.j.kc(f),this.j.ue(this.j.ya(f))!=this.j.ya(h)){if((f=this.tK(f))==-1)throw c.i.Ra()}else f=h},w.prototype.Rt=function(h){for(var a=this.j.g.Kg(1607),s=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var u=this.j.Je(o),p=u;do this.j.Bb(p,s)!=1&&this.cf(this.ll(p))&&this.hJ(p,a,s,-1,h),p=this.j.kc(this.j.ya(p));while(p!=u)}return this.j.Lg(s),a},w.prototype.YX=function(h){for(var a=this.j.g,s=a.Kg(1607),o=a.Kg(550),u=this.j.bh(),p=this.j.Fp(),f=-1,m=this.j.Oe;m!=-1;m=this.j.Tf(m)){var b=this.j.Je(m),_=b;do{var M=this.j.Bb(_,u);M!=1&&(M=this.ll(_),this.cf(M)&&this.hJ(_,s,u,p,h)),_=this.j.kc(this.j.ya(_))}while(_!=b)}for(m=this.j.Oe;m!=-1;m=this.j.Tf(m))(M=this.j.og(m,p))!=1&&(M=this.j.yd(m),this.cf(M)&&(f==-1&&(f=a.wf(o,-1)),(b=this.j.mm(m))!=-1&&(b=this.j.vj(b),b=this.um(b,h),a.kj(f,b))));return this.j.Lg(u),this.j.Gp(p),(h=[])[0]=o,h[1]=s,h},w.prototype.pr=function(){for(var h=this.j.g,a=h.Kg(550),s=h.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Tf(o))if(this.cf(this.j.yd(o))){for(var u=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var f=this.j.vj(p);u==-1&&(u=f);var m=this.j.Ma(h.Sf(h.cd(f)));if(this.cf(m)){u=f;break}}h.kj(s,u)}return a},w.prototype.eq=function(h){this.Ij=[];for(var a=0;a<h;a++)this.Ij[a]=!1},w.WV=function(h,a,s){var o=h.Ja(),u=Array(1e3);c.P.bv(u,null);var p=c.P.mg(1e3,0),f=h.I(),m=!0,b=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();for(var _=0;_<f;){var M=c.P.truncate(h.gW(u,_)-_);b?c.jd.nK(a,u,M,s,p):c.jd.oK(a,u,M,s,p);for(var T=0,A=0;A<M;A++)p[A]==0&&(m&&(m=!1,o.Gd(h,0,_)),T!=A&&o.Gd(h,_+T,_+A),T=A+1);m||T==M||o.Gd(h,_+T,_+M),_+=M}return m?h:o},w.uG=function(h,a,s){return h instanceof c.ee?w.WV(h,a,s):a instanceof c.Ta?h.B()||a.B()?h.Ja():c.Vk.uU(s,h,a)?c.Vk.xO(h,a):h.Ja():w.XV(h,a,s)},w.Cv=function(h,a,s,o){var u=new c.l;h.A(u);var p=new c.l;a.A(p);var f=new c.l;if(f.L(u),f.$b(p),s=c.ua.Xd(s,f,!0),(f=new c.l).L(p),p=c.ua.Gr(s),f.X(p,p),!u.isIntersecting(f)){if(h.Eb()<=a.Eb())return w.mi(w.Ue(h.Ja()),h,"&");if(h.Eb()>a.Eb())return w.mi(w.Ue(a.Ja()),h,"&")}return p=new w,f=(u=new c.hd).Ib(w.Ue(h)),a=u.Ib(w.Ue(a)),p.Gt(u,s,o),o=p.Cv(f,a),h=w.mi(u.Ke(o),h,"&"),c.ba.Ic(h.K())&&(h.Eh(2,s),h.K()==1736&&h.hm()),h},w.XV=function(h,a,s){if(h.B()||a.B())return h.Ja();var o=[null],u=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();return o[0]=h.D(),p?c.jd.nK(a,o,1,s,u):c.jd.oK(a,o,1,s,u),u[0]==0?h.Ja():h},w.prototype.GU=function(h,a,s,o,u){if(h.B())return h;var p=new c.hd;return h=p.Ib(h),this.Ok(p,h,a,s,o,u)},w.prototype.IU=function(h,a,s,o,u,p){if(u&&h.jc(a)!=550){var f=new c.MC;f.PX(h,s),f.Pg?(c.Vk.W(h,s,p,!0),u=!1):this.j.ty(s)}else c.Vk.W(h,s,p,!0),u=!1;if(o&&h.jc(a)!=550?this.j.rJ(h,a,p):this.j.qJ(h,a,p),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(h,a,s,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,h.jc(a)==1736||o&&h.jc(a)!=550)return h.$o(a,0),a=this.Qt(a,-1,-1),(h=h.Ke(a)).$o(0),u?h.Eh(1,0):(h.Eh(2,s),h.hm()),h;if(h.jc(a)==1607)return a=this.Rt(-1),h=h.Ke(a),u||h.Eh(2,s),h;if(h.jc(a)==550)return a=this.pr(),h=h.Ke(a),u||h.Eh(2,s),h;throw c.i.Ra()},w.prototype.Ok=function(h,a,s,o,u,p){this.j=new c.ku;try{return this.IU(h,a,s,o,u,p)}finally{this.j.Wg()}},w.Ok=function(h,a,s,o,u){return new w().GU(h,a,s,o,u)},w.prototype.HU=function(h,a,s,o){this.Ov=h,this.j=new c.ku,h=a.Kn(s);var u=a.jc(s);if(h!=1||u==550?this.j.qJ(a,s,o):this.j.rJ(a,s,o),!this.j.kA)if(this.j.ty(NaN),o=this.j.Ma(s),this.eq(o+1),this.Ij[o]=!0,a.jc(s)==1736||h==1&&a.jc(s)!=550)a.$o(s,0),o=this.Qt(s,-1,-1),a.cC(o,s),a.wB(o);else if(a.jc(s)==1607)o=this.Rt(-1),a.cC(o,s),a.wB(o);else{if(a.jc(s)!=550)throw c.i.ga("internal error");o=this.pr(),a.cC(o,s),a.wB(o)}},w.prototype.km=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a));if(s>o)return h;var u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)]=!0,s==2&&o==2)return this.Qt(h,a,-1);if(s==1&&o==2||s==1&&o==1)return this.Rt(-1);if(s==0)return this.pr();throw c.i.Ra()},w.prototype.Cv=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a)),u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=h),s==2&&o==2)return this.Qt(h,a,u);if(s==1&&0<o||o==1&&0<s)return this.Rt(u);if(s==0||o==0)return this.pr();throw c.i.Ra()},w.prototype.Kz=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a)),u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=h),s==2&&o==2)return this.XX(h,a,u);if(s==1&&0<o||o==1&&0<s)return this.YX(u);if(s==0||o==0)return(h=[])[0]=this.pr(),h;throw c.i.Ra()},w.prototype.gp=function(h,a){var s=c.ba.uf(this.j.g.jc(h)),o=c.ba.uf(this.j.g.jc(a)),u=this.j.Ma(h),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(h)]=!0,this.Ij[this.j.Ma(a)]=!0,s==2&&o==2)return this.Qt(h,a,-1);if(s==1&&o==1)return this.Rt(-1);if(s==0&&o==0)return this.pr();throw c.i.Ra()},w.Ue=function(h){var a=h.K();return a==197?(a=new c.Ea(h.description),h.B()||a.bd(h,!1),a):a==33?(a=new c.ee(h.description),h.B()||a.add(h),a):a==322?(a=new c.Ua(h.description),h.B()||a.pc(h,!0),a):h},w.mi=function(h,a,s){var o=h.K();return o==197?(a=new c.Ea(h.description),h.B()||a.bd(h,!1),a):o!=33||s!="|"&&s!="^"?o==322?(a=new c.Ua(h.description),h.B()||a.pc(h,!0),a):o==33&&s=="-"&&a.K()==33||o==550&&s=="&"&&a.K()==33?(a=new c.Ta(h.description),h.B()||h.we(0,a),a):h:(a=new c.ee(h.description),h.B()||a.add(h),a)},w.km=function(h,a,s,o){if(h.B()||a.B()||h.Eb()>a.Eb())return w.mi(w.Ue(h),h,"-");var u=new c.l;h.A(u);var p=new c.l;if(a.A(p),!u.isIntersecting(p))return w.mi(w.Ue(h),h,"-");var f=new c.l;return f.L(u),f.$b(p),s=c.ua.Xd(s,f,!0),p=new w,f=(u=new c.hd).Ib(w.Ue(h)),a=u.Ib(w.Ue(a)),p.Gt(u,s,o),o=p.km(f,a),o=u.Ke(o),h=w.mi(o,h,"-"),c.ba.Ic(h.K())&&(h.Eh(2,s),h.K()==1736&&h.hm()),h},w.QP=function(h,a,s){if(2>h.length)throw c.i.O("not enough geometries to dissolve");for(var o=0,u=0,p=h.length;u<p;u++)o=Math.max(h[u].Eb(),o);var f=new c.l;f.Pa();var m=new c.hd,b=-1,_=0,M=-1;for(u=0,p=h.length;u<p;u++)if(h[u].Eb()==o)if(h[u].B())M==-1&&(M=u);else{M=u,b==-1?b=m.Ib(w.Ue(h[u])):m.pN(b,w.Ue(h[u]));var T=new c.l;h[u].yc(T),f.$b(T),_++}return 2>_?w.Ue(h[M]):(h=o==2,a=c.ua.Xd(o==0?a:null,f,!0),new w().Ok(m,b,a,h,!0,s))},w.Kz=function(h,a,s,o){var u=[null,null,null],p=new c.l;h.A(p);var f=new c.l;a.A(f);var m=new c.l;if(m.L(p),m.$b(f),s=c.ua.Xd(s,m,!0),(m=new c.l).L(f),f=c.ua.Gr(s),m.X(f,f),!p.isIntersecting(m)){if(h.Eb()<=a.Eb())return u[(h=w.mi(w.Ue(h.Ja()),h,"&")).Eb()]=h,u;if(h.Eb()>a.Eb())return u[(h=w.mi(w.Ue(a.Ja()),h,"&")).Eb()]=h,u}for(f=new w,m=(p=new c.hd).Ib(w.Ue(h)),a=p.Ib(w.Ue(a)),f.Gt(p,s,o),o=f.Kz(m,a),a=0;a<o.length;a++)f=w.mi(p.Ke(o[a]),h,"&"),c.ba.Ic(f.K())&&(f.Eh(2,s),f.K()==1736&&f.hm()),u[f.Eb()]=f;return u},w.gp=function(h,a,s,o){if(h.Eb()>a.Eb())return w.mi(w.Ue(h),h,"^");if(h.Eb()<a.Eb()||h.B())return w.mi(w.Ue(a),h,"^");if(a.B())return w.mi(w.Ue(h),h,"^");var u=new c.l;h.A(u);var p=new c.l;a.A(p);var f=new c.l;return f.L(u),f.$b(p),s=c.ua.Xd(s,f,!0),p=new w,f=(u=new c.hd).Ib(w.Ue(h)),a=u.Ib(w.Ue(a)),p.Gt(u,s,o),o=p.gp(f,a),h=w.mi(u.Ke(o),h,"^"),c.ba.Ic(h.K())&&(h.Eh(2,s),h.K()==1736&&h.hm()),h},w.prototype.GQ=function(h,a){var s=this.j.g;h=s.wf(h,-1);for(var o=a.size,u=0;u<o;u++){var p=a.get(u);s.kj(h,p)}s.mn(h,!0)},w.prototype.WW=function(h,a){for(var s=this.j.g,o=s.md;o!=-1;o=s.ve(o))if(o==a)for(var u=s.Ob(o);u!=-1;u=s.Sb(u)){var p=s.Ya(u);if(p!=-1)for(var f=s.V(p);f!=-1;){p=this.j.Ie(p);var m=this.j.Ie(f);(p=this.j.nR(p,m))!=-1&&(m=this.j.ya(p),this.j.Kb(p,h,1),this.j.Kb(m,h,2)),p=f,f=s.V(p)}}},w.prototype.YV=function(h,a,s,o){s=this.j.Ma(s),o=this.j.Ma(o);var u=new c.ja(0);u.Jb(256);for(var p=this.j.g,f=this.j.bh(),m=this.j.Oe;m!=-1;m=this.j.Tf(m)){var b=this.j.Je(m);if(b!=-1){var _=b;do{if(this.j.Bb(_,f)!=1){var M=_,T=_,A=!1,O=0;do{if(this.j.Kb(M,f,1),!A){var R=this.j.fh(M);R&o&&this.j.af(M)&s&&(T=M,A=!0)}A&&(u.add(this.j.vj(this.j.mm(this.j.lk(M)))),h!=-1&&(R=this.j.fh(M))&o&&(O|=R=this.j.Bb(M,h))),M=this.j.kc(M)}while(M!=T);A&&0<this.j.Mp(this.j.$e(T))&&(M=p.Kg(1736),this.GQ(M,u),a!=-1&&p.CJ(M,a,O)),u.clear(!1)}_=this.j.kc(this.j.ya(_))}while(_!=b)}}this.j.Lg(f)},w.prototype.AP=function(h,a,s,o){this.j.tW();var u=-1;h!=-1&&(u=this.j.bh(),this.WW(u,s)),this.YV(u,h,a,s),u!=-1&&(this.j.Lg(u),u=-1);var p=this.j.g;for(h=0,u=p.md;u!=-1;u=p.ve(u))u!=a&&u!=s&&(o.add(u),h++);o.Wd(0,h,function(f,m){return(f=p.qz(p.Ob(f)))<(m=p.qz(p.Ob(m)))?-1:f==m?0:1})},w.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},w}();c.Hg=C}(H||(H={})),function(c){var C=function(){function w(h){h!==void 0?this.Jt(h):this.MB()}return w.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},w.prototype.Nb=function(h){return this==h||h instanceof w&&this.eb==h.eb&&this.jb==h.jb&&this.Lb==h.Lb&&this.qb==h.qb&&this.bb==h.bb&&this.Qb==h.Qb},w.prototype.dc=function(){return c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj()},w.prototype.Gh=function(h,a){var s=this.qb*h.x+this.bb*h.y+this.Qb;a.x=this.eb*h.x+this.jb*h.y+this.Lb,a.y=s},w.prototype.aY=function(h,a,s){for(var o=0;o<a;o++){var u=h[o].x,p=h[o].y,f=this.eb*u+this.jb*p+this.Lb;u=this.qb*u+this.bb*p+this.Qb,s[o]!=null?s[o].na(f,u):s[o]=c.h.construct(f,u)}},w.prototype.multiply=function(h){w.multiply(this,h,this)},w.multiply=function(h,a,s){var o=h.eb*a.eb+h.qb*a.jb,u=h.jb*a.eb+h.bb*a.jb,p=h.Lb*a.eb+h.Qb*a.jb+a.Lb,f=h.eb*a.qb+h.qb*a.bb,m=h.jb*a.qb+h.bb*a.bb;h=h.Lb*a.qb+h.Qb*a.bb+a.Qb,s.eb=o,s.jb=u,s.Lb=p,s.qb=f,s.bb=m,s.Qb=h},w.prototype.Qf=function(){var h=new w;return h.eb=this.eb,h.jb=this.jb,h.Lb=this.Lb,h.qb=this.qb,h.bb=this.bb,h.Qb=this.Qb,h},w.prototype.hC=function(h){if(!h.B()){for(var a=[],s=0;4>s;s++)a[s]=new c.h;h.iB(a),this.bY(a,a),h.bx(a,4)}},w.prototype.bY=function(h,a){for(var s=0;s<h.length;s++){var o=new c.h,u=h[s];o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.Qb,a[s]=o}},w.prototype.kS=function(h,a){h.B()||a.B()||h.S()==0||h.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/h.S(),this.bb=a.da()/h.da(),this.Lb=a.v-h.v*this.eb,this.Qb=a.G-h.G*this.bb)},w.prototype.$X=function(h){var a=new c.h,s=new c.h;a.na(this.eb,this.qb),s.na(this.jb,this.bb),a.sub(a);var o=.5*a.Uk();return a.na(this.eb,this.qb),s.na(this.jb,this.bb),a.add(s),h*(o>(a=.5*a.Uk())?Math.sqrt(o):Math.sqrt(a))},w.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},w.prototype.isIdentity=function(h){if(h!==void 0){var a=c.h.construct(0,1);return this.Gh(a,a),a.sub(c.h.construct(0,1)),a.Uk()>h*h?!1:(a.na(0,0),this.Gh(a,a),!(a.Uk()>h*h)&&(a.na(1,0),this.Gh(a,a),a.sub(c.h.construct(1,0)),a.Uk()<=h*h))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},w.prototype.Di=function(h){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*h*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},w.prototype.ig=function(h,a){this.eb=1,this.jb=0,this.Lb=h,this.qb=0,this.bb=1,this.Qb=a},w.prototype.Jt=function(h,a){a!==void 0?(this.eb=h,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(h,h)},w.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},w.prototype.kX=function(h){this.lX(Math.cos(h),Math.sin(h))},w.prototype.lX=function(h,a){this.eb=h,this.jb=-a,this.Lb=0,this.qb=a,this.bb=h,this.Qb=0},w.prototype.shift=function(h,a){this.Lb+=h,this.Qb+=a},w.prototype.scale=function(h,a){this.eb*=h,this.jb*=h,this.Lb*=h,this.qb*=a,this.bb*=a,this.Qb*=a},w.prototype.flipX=function(h,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=h+a-this.Lb},w.prototype.flipY=function(h,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=h+a-this.Qb},w.prototype.rotate=function(h){var a=new w;a.kX(h),this.multiply(a)},w.prototype.inverse=function(h){if(h!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?h.lx():(a=1/a,h.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,h.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,h.eb=this.bb*a,h.jb=-this.jb*a,h.qb=-this.qb*a,h.bb=this.eb*a)}else this.inverse(this)},w}();c.Ed=C}(H||(H={})),function(c){var C=function(){function w(){}return w.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},w.prototype.Jt=function(h,a){this.eb=h,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},w.prototype.translate=function(h,a,s){this.Lb+=h,this.Qb+=a,this.Cg+=s},w.prototype.hC=function(h){if(!h.B()){for(var a=new c.Od[8],s=0;8>s;s++)a[s]=new c.Od;h.iB(a),this.transform(a,8,a),h.bx(a)}},w.prototype.transform=function(h,a,s){for(var o=0;o<a;o++){var u=new c.Od,p=h[o];u.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,u.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,u.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,s[o]=u}},w.prototype.hp=function(h){var a=new c.Od;return a.x=this.eb*h.x+this.jb*h.y+this.Ve*h.z+this.Lb,a.y=this.qb*h.x+this.bb*h.y+this.We*h.z+this.Qb,a.z=this.pf*h.x+this.Ye*h.y+this.Ze*h.z+this.Cg,a},w.prototype.Bg=function(h){w.multiply(this,h,this)},w.multiply=function(h,a,s){var o=h.eb*a.eb+h.qb*a.jb+h.pf*a.Ve,u=h.eb*a.qb+h.qb*a.bb+h.pf*a.We,p=h.eb*a.pf+h.qb*a.Ye+h.pf*a.Ze,f=h.jb*a.eb+h.bb*a.jb+h.Ye*a.Ve,m=h.jb*a.qb+h.bb*a.bb+h.Ye*a.We,b=h.jb*a.pf+h.bb*a.Ye+h.Ye*a.Ze,_=h.Ve*a.eb+h.We*a.jb+h.Ze*a.Ve,M=h.Ve*a.qb+h.We*a.bb+h.Ze*a.We,T=h.Ve*a.pf+h.We*a.Ye+h.Ze*a.Ze,A=h.Lb*a.eb+h.Qb*a.jb+h.Cg*a.Ve+a.Lb,O=h.Lb*a.qb+h.Qb*a.bb+h.Cg*a.We+a.Qb;h=h.Lb*a.pf+h.Qb*a.Ye+h.Cg*a.Ze+a.Cg,s.eb=o,s.qb=u,s.pf=p,s.jb=f,s.bb=m,s.Ye=b,s.Ve=_,s.We=M,s.Ze=T,s.Lb=A,s.Qb=O,s.Cg=h},w.inverse=function(h,a){var s=h.eb*(h.bb*h.Ze-h.Ye*h.We)-h.qb*(h.jb*h.Ze-h.Ye*h.Ve)+h.pf*(h.jb*h.We-h.bb*h.Ve);if(s==0)throw c.i.ga("math singularity");var o=1/s;s=(h.bb*h.Ze-h.Ye*h.We)*o;var u=-(h.jb*h.Ze-h.Ye*h.Ve)*o,p=(h.jb*h.We-h.bb*h.Ve)*o,f=-(h.qb*h.Ze-h.We*h.pf)*o,m=(h.eb*h.Ze-h.pf*h.Ve)*o,b=-(h.eb*h.We-h.qb*h.Ve)*o,_=(h.qb*h.Ye-h.pf*h.bb)*o,M=-(h.eb*h.Ye-h.pf*h.jb)*o;o*=h.eb*h.bb-h.qb*h.jb;var T=-(h.Lb*s+h.Qb*u+h.Cg*p),A=-(h.Lb*f+h.Qb*m+h.Cg*b);h=-(h.Lb*_+h.Qb*M+h.Cg*o),a.eb=s,a.qb=f,a.pf=_,a.jb=u,a.bb=m,a.Ye=M,a.Ve=p,a.We=b,a.Ze=o,a.Lb=T,a.Qb=A,a.Cg=h},w.prototype.Qf=function(){var h=new w;return h.eb=this.eb,h.qb=this.qb,h.pf=this.pf,h.jb=this.jb,h.bb=this.bb,h.Ye=this.Ye,h.Ve=this.Ve,h.We=this.We,h.Ze=this.Ze,h.Lb=this.Lb,h.Qb=this.Qb,h.Cg=this.Cg,h},w}();c.FY=C}(H||(H={})),function(c){var C=function(h){function a(s){if(s!==void 0)s=h.call(this,s.dc(),s)||this;else{(s=h.call(this)||this).dg=[],s.dg[0]=0,s.Ba=1,s.wh=[];for(var o=0;10>o;o++)s.wh[o]=-1;s.wh[s.dg[0]]=0}return s.lq=!0,s}return At(a,h),a.prototype.se=function(s){this.hasAttribute(s)||(this.wh[s]=0,this.eD())},a.prototype.removeAttribute=function(s){if(s==0)throw c.i.O("Position attribue cannot be removed");this.hasAttribute(s)&&(this.wh[s]=-1,this.eD())},a.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var s=0;s<this.wh.length;s++)this.wh[s]=-1;this.wh[this.dg[0]]=0,this.lq=!0},a.prototype.zF=function(){return w.fz().add(this)},a.pg=function(){return w.fz().VR()},a.prototype.oM=function(){var s=this.dc();return new c.sa(s,this)},a.prototype.eD=function(){for(var s=this.Ba=0,o=0;10>s;s++)0<=this.wh[s]&&(this.dg[o]=s,this.wh[s]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},a.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof a)||s.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=s.dg[o])return!1;return this.lq==s.lq},a.prototype.BG=function(s){if(s.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=s.dg[o])return!1;return!0},a.Kw=function(s,o){for(var u=[],p=0;p<s.Ba;p++)u[p]=-1;p=0;for(var f=s.Ba;p<f;p++)u[p]=o.Rf(s.ld(p));return u},a.wR=function(s,o){return(s=new a(s)).se(o),s.zF()},a.xR=function(s,o){for(var u=null,p=0;10>p;p++)!s.hasAttribute(p)&&o.hasAttribute(p)&&(u==null&&(u=new a(s)),u.se(p));return u!=null?u.zF():s},a}(c.sa);c.fe=C;var w=function(){function h(){this.map=[];var a=new C;this.add(a),(a=new C).se(1),this.add(a)}return h.fz=function(){return h.XK},h.prototype.VR=function(){return h.gt},h.prototype.add=function(a){var s=a.dc();if(h.gt!=null&&h.gt.dc()==s&&a.BG(h.gt))return h.gt;if(h.Fw!=null&&h.Fw.dc()==s&&a.BG(h.Fw))return h.Fw;var o=null;return this.map[s]!==void 0&&(o=this.map[s]),o==null&&((o=a.oM()).Ba==1?h.gt=o:o.Ba==2&&o.ld(1)==1?h.Fw=o:this.map[s]=o),o},h.XK=new h,h}()}(H||(H={}));var no={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},cg={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Ja=new(function(){function c(){this.MM=50,this.pp=new Map,this.ij=[]}return c.prototype.clear=function(){this.ij.length=0,this.pp.clear()},c.prototype.delete=function(C){return!!this.pp.delete(C)&&(this.ij.splice(this.ij.indexOf(C),1),!0)},c.prototype.get=function(C){var w=this.pp.get(C);if(w!==void 0)return this.ij[0]!==C&&(this.ij.splice(this.ij.indexOf(C),1),this.ij.unshift(C)),w},c.prototype.has=function(C){return this.pp.has(C)},c.prototype.set=function(C,w){return this.get(C)!==void 0&&this.delete(C),this.ij.unshift(C),this.pp.set(C,w),this.jM(),this},c.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var C=this.ij.pop();this.pp.delete(C)}},c}()),Ie=((Yi={}).convertJSONToGeometry=function(c){return H.ac.aP(c)},Yi.hasM=function(c){return c.hasAttribute(H.Kh.M)},Yi.hasZ=function(c){return c.hasAttribute(H.Kh.Z)},Yi.getPointX=function(c){return c.Ng()},Yi.getPointY=function(c){return c.kh()},Yi.getPointZ=function(c){return c.XR()},Yi.getPointM=function(c){return c.uR()},Yi.getXMin=function(c){return c.gs()},Yi.getYMin=function(c){return c.js()},Yi.getXMax=function(c){return c.fs()},Yi.getYMax=function(c){return c.hs()},Yi.getZExtent=function(c){return c.Vg(H.Kh.Z,0)},Yi.getMExtent=function(c){return c.Vg(H.Kh.M,0)},Yi.exportPaths=function(c){var C=[],w=c.ea(),h=null,a=null,s=c.hasAttribute(H.Kh.Z),o=c.hasAttribute(H.Kh.M);s&&(h=c.vb(H.Kh.Z)),o&&(a=c.vb(H.Kh.M));for(var u=new H.h,p=0;p<w;p++){for(var f=c.Ca(p),m=c.Ka(p),b=0,_=0,M=NaN,T=NaN,A=NaN,O=NaN,R=c.ec(p),j=[],z=f;z<f+m;z++){c.D(z,u),O=A=NaN;var V=[u.x,u.y];s&&(A=h.get(z),V.push(A)),o&&(O=a.get(z),V.push(O)),z==f&&R&&(b=u.x,_=u.y,M=A,T=O),j.push(V)}!R||b==u.x&&_==u.y&&(!s||isNaN(M)&&isNaN(A)||M==A)&&(!o||isNaN(T)&&isNaN(O)||T==O)||j.push(j[0].slice(0)),C.push(j)}return C},Yi.exportPathsFlat=function(){},Yi.exportPoints=function(c){var C=c.hasAttribute(H.Kh.Z),w=c.hasAttribute(H.Kh.M),h=null,a=null;C&&(h=c.vb(H.Kh.Z)),w&&(a=c.vb(H.Kh.M));for(var s=new H.h,o=c.I(),u=[],p=0;p<o;p++){c.D(p,s);var f=[s.x,s.y];C&&f.push(h.get(p)),w&&f.push(a.get(p)),u.push(f)}return u},Yi.exportPointsFlat=function(){},Yi),tu=new Map;return function(){function c(){}return c.buffer=ni,c.clip=k,c.contains=D,c.convexHull=we,c.crosses=L,c.cut=P,c.densify=vn,c.difference=$e,c.disjoint=ie,c.distance=N,c.equals=B,c.extendedSpatialReferenceInfo=E,c.generalize=Es,c.geodesicArea=lg,c.geodesicBuffer=Ze,c.geodesicDensify=Yd,c.geodesicLength=r3,c.intersect=Ge,c.intersects=W,c.isSimple=de,c.nearestCoordinate=oi,c.nearestVertex=to,c.nearestVertices=io,c.offset=ht,c.overlaps=se,c.planarArea=Tf,c.planarLength=If,c.relate=ue,c.simplify=be,c.symmetricDifference=ke,c.touches=q,c.union=Fe,c.within=Y,c.rotate=H.Dx.rotate,c.flipHorizontal=H.Dx.EQ,c.flipVertical=H.Dx.FQ,c.intersectLinesToPoints=h3,c.ExtendedParams=H.tC,c.clearDefaultSpatialReferenceTolerance=u3,c.changeDefaultSpatialReferenceTolerance=l3,c._enableProjection=s3,c._project=a3,c._getTransformation=n3,c._getTransformationBySuitability=o3,c}()}var r=i();r!==void 0&&(t.exports=r)}(Zb,Zb.exports);var IU=Zb.exports;const vt=aN(IU),k_e=A_e({__proto__:null,default:vt},[IU]),P_e=Object.freeze(Object.defineProperty({__proto__:null,G:vt,g:k_e},Symbol.toStringTag,{value:"Module"})),Dt={convertToGEGeometry:C_e,exportPoint:O_e,exportPolygon:L_e,exportPolyline:D_e,exportMultipoint:R_e,exportExtent:j_e};function C_e(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function O_e(t,e,i){const r=t.hasZ(e),n=t.hasM(e),l=new lt({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return r&&(l.z=t.getPointZ(e)),n&&(l.m=t.getPointM(e)),l.cache._geVersion=e,l}function L_e(t,e,i){const r=new Va({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return r.cache._geVersion=e,r}function D_e(t,e,i){const r=new cn({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return r.cache._geVersion=e,r}function R_e(t,e,i){const r=new km({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return r.cache._geVersion=e,r}function j_e(t,e,i){const r=t.hasZ(e),n=t.hasM(e),l=new Ct({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(r){const d=t.getZExtent(e);l.zmin=d.vmin,l.zmax=d.vmax}if(n){const d=t.getMExtent(e);l.mmin=d.vmin,l.mmax=d.vmax}return l.cache._geVersion=e,l}const F_e=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Dt},Symbol.toStringTag,{value:"Module"}));function Bt(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function N_e(t){return vt.extendedSpatialReferenceInfo(t)}function z_e(t,e){return vt.clip(Dt,Bt(t),t,e)}function V_e(t,e){return vt.cut(Dt,Bt(t),t,e)}function B_e(t,e){return vt.contains(Dt,Bt(t),t,e)}function G_e(t,e){return vt.crosses(Dt,Bt(t),t,e)}function U_e(t,e,i){return vt.distance(Dt,Bt(t),t,e,i)}function q_e(t,e){return vt.equals(Dt,Bt(t),t,e)}function H_e(t,e){return vt.intersects(Dt,Bt(t),t,e)}function W_e(t,e){return vt.touches(Dt,Bt(t),t,e)}function J_e(t,e){return vt.within(Dt,Bt(t),t,e)}function Y_e(t,e){return vt.disjoint(Dt,Bt(t),t,e)}function K_e(t,e){return vt.overlaps(Dt,Bt(t),t,e)}function Z_e(t,e,i){return vt.relate(Dt,Bt(t),t,e,i)}function X_e(t){return vt.isSimple(Dt,Bt(t),t)}function Q_e(t){return vt.simplify(Dt,Bt(t),t)}function e3e(t,e=!1){return vt.convexHull(Dt,Bt(t),t,e)}function t3e(t,e){return vt.difference(Dt,Bt(t),t,e)}function i3e(t,e){return vt.symmetricDifference(Dt,Bt(t),t,e)}function r3e(t,e){return vt.intersect(Dt,Bt(t),t,e)}function s3e(t,e=null){return vt.union(Dt,Bt(t),t,e)}function n3e(t,e,i,r,n,l){return vt.offset(Dt,Bt(t),t,e,i,r,n,l)}function o3e(t,e,i,r=!1){return vt.buffer(Dt,Bt(t),t,e,i,r)}function a3e(t,e,i,r,n,l){return vt.geodesicBuffer(Dt,Bt(t),t,e,i,r,n,l)}function l3e(t,e,i=!0){return vt.nearestCoordinate(Dt,Bt(t),t,e,i)}function u3e(t,e){return vt.nearestVertex(Dt,Bt(t),t,e)}function h3e(t,e,i,r){return vt.nearestVertices(Dt,Bt(t),t,e,i,r)}function xT(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function c3e(t,e,i){if(t==null)throw new Q0;const r=t.spatialReference;if((i=i??xT(t))==null)throw new Q0;const n=t.constructor.fromJSON(vt.rotate(t,e,i));return n.spatialReference=r,n}function d3e(t,e){if(t==null)throw new Q0;const i=t.spatialReference;if((e=e??xT(t))==null)throw new Q0;const r=t.constructor.fromJSON(vt.flipHorizontal(t,e));return r.spatialReference=i,r}function p3e(t,e){if(t==null)throw new Q0;const i=t.spatialReference;if((e=e??xT(t))==null)throw new Q0;const r=t.constructor.fromJSON(vt.flipVertical(t,e));return r.spatialReference=i,r}function f3e(t,e,i,r){return vt.generalize(Dt,Bt(t),t,e,i,r)}function y3e(t,e,i){return vt.densify(Dt,Bt(t),t,e,i)}function EU(t,e,i,r=0){return vt.geodesicDensify(Dt,Bt(t),t,e,i,r)}function m3e(t,e){return vt.planarArea(Dt,Bt(t),t,e)}function g3e(t,e){return vt.planarLength(Dt,Bt(t),t,e)}function v3e(t,e,i){return vt.geodesicArea(Dt,Bt(t),t,e,i)}function b3e(t,e,i){return vt.geodesicLength(Dt,Bt(t),t,e,i)}function w3e(t,e){return vt.intersectLinesToPoints(Dt,Bt(t),t,e)}function _3e(t,e){vt.changeDefaultSpatialReferenceTolerance(t,e)}function x3e(t){vt.clearDefaultSpatialReferenceTolerance(t)}let Q0=class extends Error{constructor(){super("Illegal Argument Exception")}};const uTe=Object.freeze(Object.defineProperty({__proto__:null,buffer:o3e,changeDefaultSpatialReferenceTolerance:_3e,clearDefaultSpatialReferenceTolerance:x3e,clip:z_e,contains:B_e,convexHull:e3e,crosses:G_e,cut:V_e,densify:y3e,difference:t3e,disjoint:Y_e,distance:U_e,equals:q_e,extendedSpatialReferenceInfo:N_e,flipHorizontal:d3e,flipVertical:p3e,generalize:f3e,geodesicArea:v3e,geodesicBuffer:a3e,geodesicDensify:EU,geodesicLength:b3e,intersect:r3e,intersectLinesToPoints:w3e,intersects:H_e,isSimple:X_e,nearestCoordinate:l3e,nearestVertex:u3e,nearestVertices:h3e,offset:n3e,overlaps:K_e,planarArea:m3e,planarLength:g3e,relate:Z_e,rotate:c3e,simplify:Q_e,symmetricDifference:i3e,touches:W_e,union:s3e,within:J_e},Symbol.toStringTag,{value:"Module"}));var fM;let Pi=fM=class extends ge{static from(t){return Id(fM,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};g([S({type:Number,json:{write:!0}})],Pi.prototype,"dpi",void 0),g([S()],Pi.prototype,"floors",void 0),g([S({type:String,json:{write:!0}})],Pi.prototype,"gdbVersion",void 0),g([S({types:Vh,json:{read:Ul,write:!0}})],Pi.prototype,"geometry",void 0),g([S({type:Number,json:{write:!0}})],Pi.prototype,"geometryPrecision",void 0),g([S({type:Number,json:{write:!0}})],Pi.prototype,"height",void 0),g([S({type:[Number],json:{write:!0}})],Pi.prototype,"layerIds",void 0),g([S({type:["top","visible","all","popup"],json:{write:!0}})],Pi.prototype,"layerOption",void 0),g([S({type:Ct,json:{write:!0}})],Pi.prototype,"mapExtent",void 0),g([S({type:Number,json:{write:!0}})],Pi.prototype,"maxAllowableOffset",void 0),g([S({type:Boolean,json:{write:!0}})],Pi.prototype,"returnFieldName",void 0),g([S({type:Boolean,json:{write:!0}})],Pi.prototype,"returnGeometry",void 0),g([S({type:Boolean,json:{write:!0}})],Pi.prototype,"returnM",void 0),g([S({type:Boolean,json:{write:!0}})],Pi.prototype,"returnUnformattedValues",void 0),g([S({type:Boolean,json:{write:!0}})],Pi.prototype,"returnZ",void 0),g([S({type:ut,json:{write:!0}})],Pi.prototype,"spatialReference",void 0),g([S()],Pi.prototype,"sublayers",void 0),g([S({type:eo,json:{write:!0}})],Pi.prototype,"timeExtent",void 0),g([S({type:Number,json:{write:!0}})],Pi.prototype,"tolerance",void 0),g([S({type:Number,json:{write:!0}})],Pi.prototype,"width",void 0),Pi=fM=g([J("esri.rest.support.IdentifyParameters")],Pi);const AU=Pi,kU=96;function PU(t,e){const i=e||t.extent,r=t.width,n=Zl(i&&i.spatialReference);return i&&r?i.width/r*n*SO*kU:0}function hTe(t,e){return t/(Zl(e)*SO*kU)}function cTe(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?CU(t.view.floors,e.floorInfo.floorField):null}function L2(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?CU(t,e.floorInfo.floorField):null}function CU(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function zP(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!LU(t,e)}function OU(t,e,i){return!!t.some(r=>{const n=r.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i))||r.originIdOf("renderer")>Le.SERVICE||r.originIdOf("labelingInfo")>Le.SERVICE||r.originIdOf("opacity")>Le.SERVICE||r.originIdOf("labelsVisible")>Le.SERVICE})||!LU(t,e)}function LU(t,e){if(!t||!t.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).map(l=>l.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:l}of t){for(;r<n&&i[r]!==l;)r++;if(r>=n)return!1}return!0}function S3e(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition&&e.layerDefinition.minScale!=null)}const VP=t=>t.spatialReference.wkid||JSON.stringify(t.spatialReference);function M3e(t,e){const{dpi:i,gdbVersion:r,geometry:n,geometryPrecision:l,height:d,layerOption:y,mapExtent:v,maxAllowableOffset:x,returnFieldName:$,returnGeometry:E,returnUnformattedValues:k,returnZ:P,spatialReference:D,timeExtent:L,tolerance:N,width:B}=t.toJSON(),{dynamicLayers:W,layerDefs:q,layerIds:Y}=$3e(t),ie=e&&e.geometry!=null?e.geometry:null,se={geometryPrecision:l,maxAllowableOffset:x,returnFieldName:$,returnGeometry:E,returnUnformattedValues:k,returnZ:P,tolerance:N},ue=ie&&ie.toJSON()||n;if(se.imageDisplay=`${B},${d},${i}`,r&&(se.gdbVersion=r),ue&&(delete ue.spatialReference,se.geometry=JSON.stringify(ue),se.geometryType=Pm(ue)),D?se.sr=D.wkid||JSON.stringify(D):ue&&ue.spatialReference?se.sr=VP(ue):v&&v.spatialReference&&(se.sr=VP(v)),se.time=L?[L.start,L.end].join(","):null,v){const{xmin:de,ymin:be,xmax:we,ymax:$e}=v;se.mapExtent=`${de},${be},${we},${$e}`}return q&&(se.layerDefs=q),W&&!q&&(se.dynamicLayers=W),se.layers=y==="popup"?"visible":y,Y&&!W&&(se.layers+=`:${Y.join(",")}`),se}function $3e(t){var D,L;const{mapExtent:e,floors:i,width:r,sublayers:n,layerIds:l,layerOption:d,gdbVersion:y}=t,v=(L=(D=n==null?void 0:n.find(N=>N.layer!=null))==null?void 0:D.layer)==null?void 0:L.serviceSublayers,x=d==="popup",$={},E=PU({extent:e,width:r,spatialReference:e==null?void 0:e.spatialReference}),k=[],P=N=>{const B=E===0,W=N.minScale===0||E<=N.minScale,q=N.maxScale===0||E>=N.maxScale;if(N.visible&&(B||W&&q))if(N.sublayers)N.sublayers.forEach(P);else{if((l==null?void 0:l.includes(N.id))===!1||x&&(!N.popupTemplate||!N.popupEnabled))return;k.unshift(N)}};if(n==null||n.forEach(P),n&&!k.length)$.layerIds=[];else{const N=OU(k,v,y),B=k.map(W=>{const q=L2(i,W);return W.toExportImageJSON(q)});if(N)$.dynamicLayers=JSON.stringify(B);else{if(n){let q=k.map(({id:Y})=>Y);l&&(q=q.filter(Y=>l.includes(Y))),$.layerIds=q}else l!=null&&l.length&&($.layerIds=l);const W=T3e(i,k);if(W!=null&&W.length){const q={};for(const Y of W)Y.definitionExpression&&(q[Y.id]=Y.definitionExpression);Object.keys(q).length&&($.layerDefs=JSON.stringify(q))}}}return $}function T3e(t,e){const i=!!(t!=null&&t.length),r=e.filter(n=>n.definitionExpression!=null||i&&n.floorInfo!=null);return r.length?r.map(n=>{const l=L2(t,n),d=K_(l,n.definitionExpression);return{id:n.id,definitionExpression:d??void 0}}):null}let Sl=class extends ge{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,i){return ur.fromJSON({attributes:{...i.attributes},geometry:{...i.geometry}})}writeFeature(e,i){if(!e)return;const{attributes:r,geometry:n}=e;r&&(i.attributes={...r}),n!=null&&(i.geometry=n.toJSON(),i.geometryType=Aw.toJSON(n.type))}};g([S({type:String,json:{write:!0}})],Sl.prototype,"displayFieldName",void 0),g([S({type:ur})],Sl.prototype,"feature",void 0),g([xe("feature",["attributes","geometry"])],Sl.prototype,"readFeature",null),g([Ae("feature")],Sl.prototype,"writeFeature",null),g([S({type:Number,json:{write:!0}})],Sl.prototype,"layerId",void 0),g([S({type:String,json:{write:!0}})],Sl.prototype,"layerName",void 0),Sl=g([J("esri.rest.support.IdentifyResult")],Sl);const I3e=Sl;async function E3e(t,e,i){const r=(e=k3e(e)).geometry?[e.geometry]:[],n=Yh(t);return n.path+="/identify",R$(r).then(l=>{const d=M3e(e,{geometry:l&&l[0]}),y=TV({...n.query,f:"json",...d}),v=Ofe(y,i);return Ht(n.path,v).then(A3e).then(x=>P3e(x,e.sublayers))})}function A3e(t){const e=t.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map(i=>I3e.fromJSON(i)),e}function k3e(t){return t=AU.from(t)}function P3e(t,e){if(!(e!=null&&e.length))return t;const i=new Map;function r(n){i.set(n.id,n),n.sublayers&&n.sublayers.forEach(r)}e.forEach(r);for(const n of t.results)n.feature.sourceLayer=i.get(n.layerId);return t}let cs=class extends ge{constructor(t){super(t),this.contains=!0,this.dynamicLayerInfos=null,this.gdbVersion=null,this.geometryPrecision=null,this.layerDefinitions=null,this.layerIds=null,this.maxAllowableOffset=null,this.outSpatialReference=null,this.returnGeometry=!1,this.searchFields=null,this.searchText=null}};g([S({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],cs.prototype,"contains",void 0),g([S({type:[Object],json:{read:{source:"dynamicLayers"},write:{target:"dynamicLayers"}}})],cs.prototype,"dynamicLayerInfos",void 0),g([S({type:String,json:{write:!0}})],cs.prototype,"gdbVersion",void 0),g([S({type:Number,json:{write:!0}})],cs.prototype,"geometryPrecision",void 0),g([S({type:[Object],json:{write:!0}})],cs.prototype,"layerDefinitions",void 0),g([S({type:[Number],json:{write:!0}})],cs.prototype,"layerIds",void 0),g([S({type:Number,json:{write:!0}})],cs.prototype,"maxAllowableOffset",void 0),g([S({type:ut,json:{read:{source:"outSR"},write:{target:"outSR"}}})],cs.prototype,"outSpatialReference",void 0),g([S({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],cs.prototype,"returnGeometry",void 0),g([S({type:[String],json:{write:!0}})],cs.prototype,"searchFields",void 0),g([S({type:String,json:{write:!0}})],cs.prototype,"searchText",void 0),cs=g([J("esri.rest.support.FindParameters")],cs),cs.from=Di(cs);let ha=class extends ge{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.foundFieldName=null,this.layerId=null,this.layerName=null,this.value=void 0}readFeature(e,i){const r={attributes:{}};return i.attributes&&(r.attributes=i.attributes),i.geometry&&(r.geometry=i.geometry),ur.fromJSON(r)}writeFeature(e,i){if(!e)return;const{attributes:r,geometry:n}=e;r&&(i.attributes={...r}),n!=null&&(i.geometry=n.toJSON(),i.geometryType=Aw.toJSON(n.type))}};g([S({type:String,json:{write:!0}})],ha.prototype,"displayFieldName",void 0),g([S({type:ur})],ha.prototype,"feature",void 0),g([xe("feature",["attributes","geometry"])],ha.prototype,"readFeature",null),g([Ae("feature")],ha.prototype,"writeFeature",null),g([S({type:String,json:{write:!0}})],ha.prototype,"foundFieldName",void 0),g([S({type:Number,json:{write:!0}})],ha.prototype,"layerId",void 0),g([S({type:String,json:{write:!0}})],ha.prototype,"layerName",void 0),g([S({json:{write:!0}})],ha.prototype,"value",void 0),ha=g([J("esri.rest.support.FindResult")],ha);const C3e=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,r){const n=r.capabilities&&r.capabilities.split(",").map(W=>W.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const l=this.type,d=l!=="tile"&&!!r.supportsDynamicLayers,y=n.includes("query"),v=n.includes("map"),x=!!r.exportTilesAllowed,$=n.includes("tilemap"),E=n.includes("data"),k=l!=="tile"&&(!r.tileInfo||d),P=l!=="tile"&&(!r.tileInfo||d),D=l!=="tile",L=r.cimVersion&&A2.parse(r.cimVersion),N=(L==null?void 0:L.since(1,4))??!1,B=(L==null?void 0:L.since(2,0))??!1;return{operations:{supportsExportMap:v,supportsExportTiles:x,supportsIdentify:y,supportsQuery:E,supportsTileMap:$},exportMap:v?{supportsArcadeExpressionForLabeling:N,supportsSublayersChanges:D,supportsDynamicLayers:d,supportsSublayerVisibility:k,supportsSublayerDefinitionExpression:P,supportsCIMSymbols:B}:null,exportTiles:x?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let n=r.currentVersion;return n||(n=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchRelatedService(i){const r=this.portalItem;if(!r||!nP(r))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(l=>l.find(d=>d.type==="Feature Service")??null,()=>null));const n=await this._relatedFeatureServicePromise;return hi(i),n?{itemId:n.id,url:n.url}:null}async fetchSublayerInfo(i,r){const{source:n}=i;if(this!=null&&this.portalItem&&this.type==="tile"&&(n==null?void 0:n.type)==="map-layer"&&nP(this.portalItem)&&i.originIdOf("url")<Le.SERVICE){const y=await this.fetchRelatedService(r);y&&(i.url=Gl(y.url,n.mapLayerId.toString()),i.layerItemId=y.itemId)}const{url:l}=i;let d;if(n.type==="data-layer")d=(await Ht(l,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...r})).data;else if(l&&i.originIdOf("url")>Le.SERVICE)try{d=(await this._fetchAllLayersAndTablesFromService(l)).get(n.mapLayerId)}catch{}else{let y=i.id;(n==null?void 0:n.type)==="map-layer"&&(y=n.mapLayerId);try{d=(await this.fetchAllLayersAndTables(r)).get(y)}catch{}}return d}async fetchAllLayersAndTables(i){var r;return this._fetchAllLayersAndTablesFromService((r=this.parsedUrl)==null?void 0:r.path,i)}async _fetchAllLayersAndTablesFromService(i,r){await this.load(r),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const n=Jd(i),l=xM(this._allLayersAndTablesMap,n==null?void 0:n.url.path,()=>Ht(Gl(n==null?void 0:n.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(y=>{const v=new Map;for(const x of y.data.layers)v.set(x.id,x);return{result:v}},y=>({error:y}))),d=await l;if(hi(r),"result"in d)return d.result;throw d.error}};return g([S({readOnly:!0})],e.prototype,"capabilities",void 0),g([xe("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],e.prototype,"readCapabilities",null),g([S({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),g([S({type:Ct})],e.prototype,"fullExtent",void 0),g([S(fG)],e.prototype,"id",void 0),g([S({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),g([S(Z_)],e.prototype,"popupEnabled",void 0),g([S({type:ut})],e.prototype,"spatialReference",void 0),g([S({readOnly:!0})],e.prototype,"version",void 0),g([xe("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=g([J("esri.layers.mixins.ArcGISMapService")],e),e};async function O3e(t,e,i){const r=Yh(t);return yye(r,lr.from(e),{...i}).then(n=>n.data.count)}async function L3e(t,e,i){const r=Yh(t);return mye(r,lr.from(e),{...i}).then(n=>({count:n.data.count,extent:Ct.fromJSON(n.data.extent)}))}async function D3e(t,e,i){const r=Yh(t);return fye(r,lr.from(e),{...i}).then(n=>n.data.objectIds)}function R3e(t,e){return e}function ST(t,e,i,r){switch(i){case 0:return Sm(t,e+r,0);case 1:return t.originPosition==="lowerLeft"?Sm(t,e+r,1):N3e(t,e+r,1)}}function DU(t,e,i,r){return i===2?Sm(t,e,2):ST(t,e,i,r)}function j3e(t,e,i,r){return i===2?Sm(t,e,3):ST(t,e,i,r)}function F3e(t,e,i,r){return i===3?Sm(t,e,3):DU(t,e,i,r)}function Sm({translate:t,scale:e},i,r){return t[r]+i*e[r]}function N3e({translate:t,scale:e},i,r){return t[r]-i*e[r]}let z3e=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=R3e,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=G7(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(i!=null)for(const r of e.features)i(r.geometry)}createSpatialReference(){return{}}addField(e,i){const r=e.fields;Vd(r),r.push(i);const n=r.map(l=>l.name);this._attributesConstructor=function(){for(const l of n)this[l]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,n)=>this.addCoordinatePoint(i,r,n),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,n)=>this._addCoordinatePolygon(i,r,n),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,n)=>this._addCoordinatePolyline(i,r,n),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,n)=>this._addCoordinateMultipoint(i,r,n),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:r,queryGeometryType:n}=i,l=KS(r.clone(),r,!1,!1,this._transform),d=YV(l,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...d}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,r){const n=br(this._transform,"transform");switch(i=this._applyTransform(n,i,r,0),r){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const n=br(this._transform,"transform");return this._applyTransform(n,e,i,r)}_addCoordinatePolyline(e,i,r){this._dehydratedAddPointsCoordinate(e.paths,i,r)}_addCoordinatePolygon(e,i,r){this._dehydratedAddPointsCoordinate(e.rings,i,r)}_addCoordinateMultipoint(e,i,r){r===0&&e.points.push([]);const n=this._transformPathLikeValue(i,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,r){r===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(i,r),l=e[e.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),l.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:i,hasM:r}=e;return i&&r?F3e:i?DU:r?j3e:ST}};async function V3e(t,e,i){const r=Yh(t),n={...i},l=lr.from(e),d=!l.quantizationParameters,{data:y}=await dye(r,l,new z3e({sourceSpatialReference:l.sourceSpatialReference,applyTransform:d}),n);return y}let Rn=class extends Be{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return Wi(this.url)}async execute(t,e){const i=await this.executeJSON(t,e);return this.featureSetFromJSON(t,i,e)}async executeJSON(t,e){var y;const i=this._normalizeQuery(t),r=((y=t.outStatistics)==null?void 0:y[0])!=null,n=ce("featurelayer-pbf-statistics"),l=!r||n;let d;if(this.pbfSupported&&l)try{d=await V3e(this.url,i,e)}catch(v){if(v.name!=="query:parsing-pbf")throw v;this.pbfSupported=!1}return this.pbfSupported&&l||(d=await DV(this.url,i,e)),this._normalizeFields(d.fields),d}async featureSetFromJSON(t,e,i){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!e.features)return tg.fromJSON(e);const{meshFeatureSetFromJSON:r}=await Ia(le(()=>import("./meshFeatureSet-a4fbc662.js").then(n=>n.b),["assets/meshFeatureSet-a4fbc662.js","assets/georeference-f963d9cd.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-debab8b1.js","assets/MeshLocalVertexSpace-f6b9ff28.js","assets/MeshGeoreferencedRelativeVertexSpace-c3f61512.js","assets/quat-f980ec23.js","assets/quatf64-3363c48e.js","assets/vec32-fd00a1c3.js","assets/BufferView-f6835a9d.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-27ea47a3.js","assets/Indices-aed44d11.js","assets/deduplicate-7bf32266.js","assets/External-ee9e5610.js"]),i);return r(t,this.infoFor3D,e)}executeForCount(t,e){return O3e(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return L3e(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return D3e(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:i},{executeRelationshipQuery:r}]=await Ia(Promise.all([le(()=>Promise.resolve().then(()=>GA),void 0),le(()=>import("./executeRelationshipQuery-03c90970.js"),[])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),r(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:i},{executeRelationshipQueryForCount:r}]=await Ia(Promise.all([le(()=>Promise.resolve().then(()=>GA),void 0),le(()=>import("./executeRelationshipQuery-03c90970.js"),[])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),r(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:i,fetchAttachments:r,processAttachmentQueryResult:n}=await Ia(le(()=>import("./queryAttachments-59a3ee5e.js"),[]),e),l=Yh(this.url);return n(l,await(this.queryAttachmentsSupported?i(l,t,e):r(l,t,e)))}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:i}=await Ia(le(()=>import("./executeTopFeaturesQuery-2fdfa108.js"),["assets/executeTopFeaturesQuery-2fdfa108.js","assets/queryTopFeatures-357eddb6.js"]),e);return i(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:i}=await Ia(le(()=>import("./executeForTopIds-98db00c6.js"),["assets/executeForTopIds-98db00c6.js","assets/queryTopFeatures-357eddb6.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:i}=await Ia(le(()=>import("./executeForTopExtents-ed9efa91.js"),["assets/executeForTopExtents-ed9efa91.js","assets/queryTopFeatures-357eddb6.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:i}=await Ia(le(()=>import("./executeForTopCount-5dea1eed.js"),["assets/executeForTopCount-5dea1eed.js","assets/queryTopFeatures-357eddb6.js"]),e);return i(this.parsedUrl,t,e)}_normalizeQuery(t){let e=lr.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?ws.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:r,queryFormats:n}=i,l=t9("model/gltf-binary",r)??i9("glb",r),d=t9("model/gltf+json",r)??i9("gtlf",r);for(const y of n){if(y===l){e.formatOf3DObjects=y;break}y!==d||e.formatOf3DObjects||(e.formatOf3DObjects=y)}if(!e.formatOf3DObjects)throw new ne("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(e.outFields==null||!e.outFields.includes("*")){e=e===t?e.clone():e,e.outFields==null&&(e.outFields=[]);const{originX:y,originY:v,originZ:x,translationX:$,translationY:E,translationZ:k,scaleX:P,scaleY:D,scaleZ:L,rotationX:N,rotationY:B,rotationZ:W,rotationDeg:q}=i.transformFieldRoles;e.outFields.push(y,v,x,$,E,k,P,D,L,N,B,W,q)}}return e}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const e of t){const i=this.fieldsIndex.get(e.name);i&&Object.assign(e,i.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};g([S({type:ws})],Rn.prototype,"dynamicDataSource",void 0),g([S()],Rn.prototype,"fieldsIndex",void 0),g([S()],Rn.prototype,"gdbVersion",void 0),g([S()],Rn.prototype,"infoFor3D",void 0),g([S({readOnly:!0})],Rn.prototype,"parsedUrl",null),g([S()],Rn.prototype,"pbfSupported",void 0),g([S()],Rn.prototype,"queryAttachmentsSupported",void 0),g([S()],Rn.prototype,"sourceSpatialReference",void 0),g([S({type:String})],Rn.prototype,"url",void 0),Rn=g([J("esri.tasks.QueryTask")],Rn);const B3e=Rn;var Xb;function mx(t){return t!=null&&t.type==="esriSMS"}function gx(t,e,i){var n;const r=this.originIdOf(e)>=Ss(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&((n=i.layer)==null?void 0:n.type)==="map-image"&&(i.writeSublayerStructure||r)}}function vx(t,e,i){var r;return{enabled:!!i&&((r=i.layer)==null?void 0:r.type)==="tile"&&(i.origin&&this.originIdOf(e)>=Ss(i.origin)||this._isOverridden(e))}}function Sn(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function Tv(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(e)>=Ss(i.origin))}}let G3e=0;const Yc=new Set;Yc.add("layer"),Yc.add("parent"),Yc.add("loaded"),Yc.add("loadStatus"),Yc.add("loadError"),Yc.add("loadWarnings");let it=Xb=class extends ra(Y_(Bh(Zo))){constructor(t){super(t),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(t){return this.addResolvingPromise((async()=>{const{layer:e,url:i}=this;if(!e&&!i)throw new ne("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const r=e?await e.fetchSublayerInfo(this,t):(await Ht(i,{responseType:"json",query:{f:"json"},...t})).data;r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(t,e){e=e.layerDefinition||e;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:n},data:{supportsAttachment:l}}=aT(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:l},query:{supportsFormatPBF:n}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get fieldsIndex(){return new X$(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,e){if((e=e.layerDefinition||e).globalIdField)return e.globalIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??G3e++}set id(t){var e,i,r;this._get("id")!==t&&(((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.exportMap)==null?void 0:r.supportsDynamicLayers)!==!1?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,e,i,r){t&&t.length&&(e.layerDefinition={drawingInfo:{labelingInfo:t.map(n=>n.write({},r))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(e=>e.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,e){return e.minScale||e.layerDefinition&&e.layerDefinition.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,e){return e.maxScale||e.layerDefinition&&e.layerDefinition.maxScale||0}readObjectIdFieldFromService(t,e){if((e=e.layerDefinition||e).objectIdField)return e.objectIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,e){var r;const i=e.layerDefinition;return 1-.01*(((i==null?void 0:i.transparency)!=null?i.transparency:(r=i==null?void 0:i.drawingInfo)==null?void 0:r.transparency)??0)}writeOpacity(t,e,i,r){e.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,e){this.parent&&this.parent!==this.layer?e.parentLayerId=H2(this.parent.id):e.parentLayerId=-1}get queryTask(){var d;if(!this.layer)return null;const{spatialReference:t}=this.layer,e="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:r}=this,n=ce("featurelayer-pbf")&&(i==null?void 0:i.query.supportsFormatPBF),l=((d=i==null?void 0:i.operations)==null?void 0:d.supportsQueryAttachments)??!1;return new B3e({url:this.url,pbfSupported:n,fieldsIndex:r,gdbVersion:e,sourceSpatialReference:t,queryAttachmentsSupported:l})}set renderer(t){if(t){for(const e of t.getSymbols())if(Wl(e)){ve.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new kl({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return Di(ze.ofType(Xb),t)}writeSublayers(t,e,i){var r;(r=this.sublayers)!=null&&r.length&&(e[i]=this.sublayers.map(n=>n.id).toArray().reverse())}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){var r;const t=((r=this.layer)==null?void 0:r.parsedUrl)??this._lastParsedUrl,e=this.source;if(!t)return null;if(this._lastParsedUrl=t,(e==null?void 0:e.type)==="map-layer")return`${t.path}/${e.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${L0(i)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,e,i,r){e[i]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=_r(this),e=new Xb;return _r(e).store=t.clone(Yc),this.commitProperty("url"),e._lastParsedUrl=this._lastParsedUrl,e}createPopupTemplate(t){return WG(this,t)}createQuery(){return new lr({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var r;if(this.hasOwnProperty("sublayers"))return null;const{layer:t}=this,e=t==null?void 0:t.parsedUrl,i=new(await le(()=>Promise.resolve().then(()=>Bwe),void 0)).default({url:e==null?void 0:e.path});return e&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),(t==null?void 0:t.refreshInterval)!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=ae(this.floorInfo)),this.originIdOf("labelingInfo")>Le.SERVICE&&(i.labelingInfo=ae(this.labelingInfo)),this.originIdOf("labelsVisible")>Le.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>Le.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>Le.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>Le.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>Le.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>Le.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>Le.DEFAULTS&&(i.popupTemplate=ae(this.popupTemplate)),this.originIdOf("renderer")>Le.SERVICE&&(i.renderer=ae(this.renderer)),((r=this.source)==null?void 0:r.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>Le.DEFAULTS&&(i.title=this.title),(t==null?void 0:t.type)==="map-image"&&t.originIdOf("customParameters")>Le.DEFAULTS&&(i.customParameters=t.customParameters),(t==null?void 0:t.type)==="tile"&&t.originIdOf("customParameters")>Le.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let n=null;return i==null||i.some(l=>{const{id:d}=l;return d!=null&&(d.toString()===r.toString()&&(n=l),!!n)}),n}getFieldDomain(t,e){const i=e&&e.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[t];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(t)}async queryAttachments(t,e){var $,E;await this.load(),t=b2.from(t);const i=this.capabilities;if(!(($=i==null?void 0:i.data)!=null&&$.supportsAttachment))throw new ne("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:n,globalIds:l,num:d,size:y,start:v,where:x}=t;if(!((E=i==null?void 0:i.operations)!=null&&E.supportsQueryAttachments)&&((r==null?void 0:r.length)>0||(l==null?void 0:l.length)>0||(y==null?void 0:y.length)>0||d||v||x))throw new ne("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(n!=null&&n.length||l!=null&&l.length||x))throw new ne("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return this.queryTask.executeAttachmentQuery(t,e)}async queryFeatures(t=this.createQuery(),e){var r,n;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ne("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new ne("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(t,{...e,query:{...(r=this.layer)==null?void 0:r.customParameters,token:(n=this.layer)==null?void 0:n.apiKey}});if(i!=null&&i.features)for(const l of i.features)l.sourceLayer=this;return i}toExportImageJSON(t){var l;const e={id:this.id,source:((l=this.source)==null?void 0:l.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=K_(t,this.definitionExpression);i!=null&&(e.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((d,y)=>(d[y]=this.originIdOf(y),d),{});if(Object.keys(r).some(d=>r[d]>Le.SERVICE)){const d=e.drawingInfo={};if(r.renderer>Le.SERVICE&&(d.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>Le.SERVICE&&(d.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>Le.SERVICE){!this.loaded&&this.labelingInfo.some(v=>!v.labelPlacement)&&ve.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let y=this.labelingInfo;this.geometryType!=null&&(y=kwe(this.labelingInfo,Ew.toJSON(this.geometryType))),d.labelingInfo=y.filter(v=>v.labelPlacement).map(v=>v.toJSON({origin:"service",layer:this.layer})),d.showLabels=!0}r.opacity>Le.SERVICE&&(d.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(d.renderer)}return e}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,e=>{e.color||e.style!=="esriSMSX"&&e.style!=="esriSMSCross"||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,e){if(t){const i=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const r of i)mx(r.symbol)&&e(r.symbol);"symbol"in t&&mx(t.symbol)&&e(t.symbol),"defaultSymbol"in t&&mx(t.defaultSymbol)&&e(t.defaultSymbol)}}_setAndNotifyLayer(t,e){var y,v,x,$;const i=this.layer,r=this._get(t);let n,l;switch(t){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",l="supportsModification"}const d=_r(this).getDefaultOrigin();if(d!=="service"){if(n&&((x=(v=(y=this.layer)==null?void 0:y.capabilities)==null?void 0:v.exportMap)==null?void 0:x[n])===!1)return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${n}'`);if(l&&(($=this.capabilities)==null?void 0:$.exportMap[l])===!1)return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${l}'`)}t!=="source"||this.loadStatus==="not-loaded"?(this._set(t,e),d!=="service"&&r!==e&&i&&i.emit&&i.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,e){e&&(e.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),t&&(t.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),t.on("before-changes",i=>{var n,l,d;const r=(d=(l=(n=this.layer)==null?void 0:n.capabilities)==null?void 0:l.exportMap)==null?void 0:d.supportsSublayersChanges;r==null||r||(ve.getLogger(this).error(new ne("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(t,e){const{layer:i,declaredClass:r}=this;ve.getLogger(r).error(new ne("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${i==null?void 0:i.id}'`,{reason:e,sublayer:this,layer:i}))}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}};it.test={isMapImageLayerOverridePolicy:t=>t===Sn||t===gx,isTileImageLayerOverridePolicy:t=>t===vx},g([S({readOnly:!0})],it.prototype,"capabilities",void 0),g([xe("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],it.prototype,"readCapabilities",null),g([S()],it.prototype,"defaultPopupTemplate",null),g([S({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:gx}}})],it.prototype,"definitionExpression",null),g([S({readOnly:!0})],it.prototype,"effectiveScaleRange",null),g([S({type:[F_],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],it.prototype,"fields",void 0),g([S({readOnly:!0})],it.prototype,"fieldsIndex",null),g([S({type:vG,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:gx},origins:{"web-scene":{read:!1,write:!1}}}})],it.prototype,"floorInfo",null),g([S({type:Ct,json:{read:{source:"layerDefinition.extent"}}})],it.prototype,"fullExtent",void 0),g([S({type:Ew.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:Ew.read}}}}})],it.prototype,"geometryType",void 0),g([S({type:String})],it.prototype,"globalIdField",void 0),g([xe("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],it.prototype,"readGlobalIdFieldFromService",null),g([S({type:Lt,json:{write:{ignoreOrigin:!0}}})],it.prototype,"id",null),g([S({value:null,type:[og],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:Sn}}})],it.prototype,"labelingInfo",null),g([Ae("labelingInfo")],it.prototype,"writeLabelingInfo",null),g([S({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Sn}}})],it.prototype,"labelsVisible",null),g([S({value:null})],it.prototype,"layer",null),g([S({type:String,json:{write:{overridePolicy:vx}}})],it.prototype,"layerItemId",void 0),g([S({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Tv}}})],it.prototype,"legendEnabled",void 0),g([S({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],it.prototype,"listMode",null),g([S({type:Number,value:0,json:{write:{overridePolicy:Sn}}})],it.prototype,"minScale",null),g([xe("minScale",["minScale","layerDefinition.minScale"])],it.prototype,"readMinScale",null),g([S({type:Number,value:0,json:{write:{overridePolicy:Sn}}})],it.prototype,"maxScale",null),g([xe("maxScale",["maxScale","layerDefinition.maxScale"])],it.prototype,"readMaxScale",null),g([S({type:String})],it.prototype,"objectIdField",void 0),g([xe("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],it.prototype,"readObjectIdFieldFromService",null),g([S({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Sn}}})],it.prototype,"opacity",null),g([xe("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],it.prototype,"readOpacity",null),g([Ae("opacity")],it.prototype,"writeOpacity",null),g([S({json:{type:Lt,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:Sn}}})],it.prototype,"parent",void 0),g([Ae("parent")],it.prototype,"writeParent",null),g([S({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:Tv,writer(t,e,i){e[i]=!t}}}})],it.prototype,"popupEnabled",void 0),g([S({type:df,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Tv}}})],it.prototype,"popupTemplate",void 0),g([S({readOnly:!0})],it.prototype,"queryTask",null),g([S({types:sg,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Sn},origins:{"web-scene":{types:KB,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Sn}}}}})],it.prototype,"renderer",null),g([S({types:{key:"type",base:null,typeMap:{"data-layer":ws,"map-layer":kl}},cast(t){if(t){if("mapLayerId"in t)return Id(kl,t);if("dataSource"in t)return Id(ws,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:Sn}}})],it.prototype,"source",null),g([S()],it.prototype,"sourceJSON",void 0),g([S({value:null,json:{type:[Lt],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Sn}}})],it.prototype,"sublayers",null),g([St("sublayers")],it.prototype,"castSublayers",null),g([Ae("sublayers")],it.prototype,"writeSublayers",null),g([S({type:String,json:{name:"name",write:{overridePolicy:Tv}}})],it.prototype,"title",void 0),g([S({type:String})],it.prototype,"typeIdField",void 0),g([xe("typeIdField",["layerDefinition.typeIdField"])],it.prototype,"readTypeIdField",null),g([S({type:[pT],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],it.prototype,"types",void 0),g([S({type:String,json:{name:"layerUrl",write:{overridePolicy:vx}}})],it.prototype,"url",null),g([S({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Sn}}})],it.prototype,"visible",null),g([Ae("visible")],it.prototype,"writeVisible",null),it=Xb=g([J("esri.layers.support.Sublayer")],it);const i3=it,U3e=ve.getLogger("esri.layers.TileLayer");function q3e(t,e){const i=[],r={};return t&&t.forEach(n=>{const l=new i3;if(l.read(n,e),r[l.id]=l,n.parentLayerId!=null&&n.parentLayerId!==-1){const d=r[n.parentLayerId];d.sublayers||(d.sublayers=[]),d.sublayers.unshift(l)}else i.unshift(l)}),i}const bx=ze.ofType(i3);function RU(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&RU(i.sublayers,e)})}const H3e=t=>{let e=class extends t{constructor(...i){super(...i),this.allSublayers=new F0({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[Le.SERVICE]:{},[Le.PORTAL_ITEM]:{},[Le.WEB_SCENE]:{},[Le.WEB_MAP]:{}},this.addHandles(me(()=>this.sublayers,(r,n)=>this._handleSublayersChange(r,n),qd))}destroy(){this.allSublayers.destroy()}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:n}=this,l=Ss(r.origin);if(l<Le.SERVICE||(n[l]={context:r,visibleLayers:i.visibleLayers||n[l].visibleLayers,layers:i.layers||n[l].layers},l>Le.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:d,origin:y}=this.createSublayersForOrigin("web-document"),v=_r(this);v.setDefaultOrigin(y),this._set("sublayers",new bx(d)),v.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=Ss(i==="web-document"?"web-map":i);let n=Le.SERVICE,l=this.sublayersSourceJSON[Le.SERVICE].layers,d=this.sublayersSourceJSON[Le.SERVICE].context,y=null;const v=[Le.PORTAL_ITEM,Le.WEB_SCENE,Le.WEB_MAP].filter(D=>D<=r);for(const D of v){const L=this.sublayersSourceJSON[D];S3e(L.layers)&&(n=D,l=L.layers,d=L.context,L.visibleLayers&&(y={visibleLayers:L.visibleLayers,context:L.context}))}const x=[Le.PORTAL_ITEM,Le.WEB_SCENE,Le.WEB_MAP].filter(D=>D>n&&D<=r);let $=null;for(const D of x){const{layers:L,visibleLayers:N,context:B}=this.sublayersSourceJSON[D];L&&($={layers:L,context:B}),N&&(y={visibleLayers:N,context:B})}const E=q3e(l,d),k=new Map,P=new Set;if($)for(const D of $.layers)k.set(D.id,D);if(y!=null&&y.visibleLayers)for(const D of y.visibleLayers)P.add(D);return RU(E,D=>{$&&D.read(k.get(D.id),$.context),y&&D.read({defaultVisibility:P.has(D.id)},y.context)}),{origin:W1(n),sublayers:new bx({items:E})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(n=>{n.parent=null,n.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(n=>{n.parent=this,n.layer=this}),this.addHandles([i.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),i.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",n=>{U3e.error(new ne("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return g([S({readOnly:!0})],e.prototype,"allSublayers",void 0),g([S({readOnly:!0,type:ze.ofType(i3)})],e.prototype,"serviceSublayers",void 0),g([S({value:null,type:bx,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0),g([S({readOnly:!0})],e.prototype,"sublayersSourceJSON",void 0),e=g([J("esri.layers.mixins.SublayersOwner")],e),e},W3e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let en=class extends ra(Be){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=L2(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&OU(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(W3e[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||e&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,l)=>{const d=L2(this.floors,l),y=K_(d,l.definitionExpression);return y!=null&&(n[l.id]=y),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=l=>{const d=this.scale,y=d===0,v=l.minScale===0||d<=l.minScale,x=l.maxScale===0||d>=l.maxScale;l.visible&&(y||v&&x)&&(l.sublayers?l.sublayers.forEach(r):e.unshift(l))};i&&i.forEach(r);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((l,d)=>e[d]!==l)?e:n}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};g([S({readOnly:!0})],en.prototype,"dynamicLayers",null),g([S()],en.prototype,"floors",void 0),g([S({readOnly:!0})],en.prototype,"hasDynamicLayers",null),g([S()],en.prototype,"layer",null),g([S({readOnly:!0})],en.prototype,"layers",null),g([S({readOnly:!0})],en.prototype,"layerDefs",null),g([S({type:Number})],en.prototype,"scale",void 0),g([S(Jve)],en.prototype,"timeExtent",void 0),g([S({readOnly:!0})],en.prototype,"version",null),g([S({readOnly:!0})],en.prototype,"visibleSublayers",null),en=g([J("esri.layers.mixins.ExportImageParameters")],en);async function J3e(t,e,i){let r;try{r=await createImageBitmap(t)}catch(n){throw new ne("request:server",`Unable to load ${e}`,{url:e,error:n})}return hi(i),r}async function mTe(t,e,i,r,n){let l;try{l=await createImageBitmap(t)}catch(d){throw new ne("request:server",`Unable to load tile ${e}/${i}/${r}`,{error:d,level:e,row:i,col:r})}return hi(n),l}let Ci=class extends aG(qG(BG(H3e(C3e(oG(LG(jG(Y_(VG(nG(lG(ra(im))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(Nn).then(()=>this._fetchService(e))),Promise.resolve(this)}readImageFormat(t,e){const i=e.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(t,e,i,r){var x;if(!this.loaded||!t)return;const n=t.slice().reverse().flatten(({sublayers:$})=>$&&$.toArray().reverse()).toArray();let l=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((x=this.capabilities.exportMap)!=null&&x.supportsDynamicLayers)){const $=Ss(r.origin);if($===Le.PORTAL_ITEM){const E=this.createSublayersForOrigin("service").sublayers;l=zP(n,E,Le.SERVICE)}else if($>Le.PORTAL_ITEM){const E=this.createSublayersForOrigin("portal-item");l=zP(n,E.sublayers,Ss(E.origin))}}const d=[],y={writeSublayerStructure:l,...r};let v=l;n.forEach($=>{const E=$.write({},y);d.push(E),v=v||$.originOf("visible")==="user"}),d.some($=>Object.keys($).length>1)&&(e.layers=d),v&&(e.visibleLayers=n.filter($=>$.visible).map($=>$.id))}createExportImageParameters(t,e,i,r){const n=r&&r.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const l=new en({layer:this,floors:r==null?void 0:r.floors,scale:PU({extent:t,width:e})*n}),d=l.toJSON();l.destroy();const y=!r||!r.rotation||this.version<10.3?{}:{rotation:-r.rotation},v=t&&t.spatialReference,x=v.wkid||JSON.stringify(v.toJSON());d.dpi*=n;const $={};if(r!=null&&r.timeExtent){const{start:E,end:k}=r.timeExtent.toJSON();$.time=E&&k&&E===k?""+E:`${E??"null"},${k??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&($.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:x,imageSR:x,size:e+","+i,...d,...y,...$}}async fetchImage(t,e,i,r){const{data:n}=await this._fetchImage("image",t,e,i,r);return n}async fetchImageBitmap(t,e,i,r){const{data:n,url:l}=await this._fetchImage("blob",t,e,i,r);return J3e(n,l,r==null?void 0:r.signal)}async fetchRecomputedExtents(t={}){const e={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await Ht(this.url,e),{extent:r,fullExtent:n,timeExtent:l}=i,d=r||n;return{fullExtent:d&&Ct.fromJSON(d),timeExtent:l&&eo.fromJSON({start:l[0],end:l[1]})}}loadAll(){return kM(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return HG(this,t)}async _fetchImage(t,e,i,r,n){var y,v,x;const l={responseType:t,signal:(n==null?void 0:n.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,i,r,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},d=this.parsedUrl.path+"/export";if(((y=l.query)==null?void 0:y.dynamicLayers)!=null&&!((x=(v=this.capabilities)==null?void 0:v.exportMap)!=null&&x.supportsDynamicLayers))throw new ne("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:l.query});try{const{data:$}=await Ht(d,l);return{data:$,url:d}}catch($){throw Is($)?$:new ne("mapimagelayer:image-fetch-error",`Unable to load image: ${d}`,{error:$})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:e,ssl:i}=await Ht(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=e,this.read(e,{origin:"service",url:this.parsedUrl})}};g([S({type:Dh})],Ci.prototype,"dateFieldsTimeReference",void 0),g([S({type:Boolean})],Ci.prototype,"datesInUnknownTimezone",void 0),g([S()],Ci.prototype,"dpi",void 0),g([S()],Ci.prototype,"gdbVersion",void 0),g([S()],Ci.prototype,"imageFormat",void 0),g([xe("imageFormat",["supportedImageFormatTypes"])],Ci.prototype,"readImageFormat",null),g([S({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Ci.prototype,"imageMaxHeight",void 0),g([S({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Ci.prototype,"imageMaxWidth",void 0),g([S()],Ci.prototype,"imageTransparency",void 0),g([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ci.prototype,"isReference",void 0),g([S({json:{read:!1,write:!1}})],Ci.prototype,"labelsVisible",void 0),g([S({type:["ArcGISMapServiceLayer"]})],Ci.prototype,"operationalLayerType",void 0),g([S({json:{read:!1,write:!1}})],Ci.prototype,"popupEnabled",void 0),g([S({type:Dh})],Ci.prototype,"preferredTimeReference",void 0),g([S()],Ci.prototype,"sourceJSON",void 0),g([S({json:{write:{ignoreOrigin:!0}}})],Ci.prototype,"sublayers",void 0),g([Ae("sublayers",{layers:{type:[i3]},visibleLayers:{type:[Lt]}})],Ci.prototype,"writeSublayers",null),g([S({type:["show","hide","hide-children"]})],Ci.prototype,"listMode",void 0),g([S({json:{read:!1},readOnly:!0,value:"map-image"})],Ci.prototype,"type",void 0),g([S(dG)],Ci.prototype,"url",void 0),Ci=g([J("esri.layers.MapImageLayer")],Ci);const jU=Ci,gTe=Object.freeze(Object.defineProperty({__proto__:null,default:jU},Symbol.toStringTag,{value:"Module"}));let ka=class extends Zo{constructor(e){super(e),this.type="csv",this.refresh=f0(async i=>{await this.load();const{extent:r,timeExtent:n}=await this._connection.invoke("refresh",i);return r&&(this.sourceJSON.extent=r),n&&(this.sourceJSON.timeInfo.timeExtent=[n.start,n.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return tg.fromJSON(r)}async queryFeaturesJSON(e,i={}){return await this.load(i),this._connection.invoke("queryFeatures",e?e.toJSON():null,i)}async queryFeatureCount(e,i={}){return await this.load(i),this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i)}async queryObjectIds(e,i={}){return await this.load(i),this._connection.invoke("queryObjectIds",e?e.toJSON():null,i)}async queryExtent(e,i={}){await this.load(i);const r=await this._connection.invoke("queryExtent",e?e.toJSON():null,i);return{count:r.count,extent:Ct.fromJSON(r.extent)}}async querySnapping(e,i={}){return await this.load(i),this._connection.invoke("querySnapping",e,i)}async _startWorker(e){this._connection=await ZR("CSVSourceWorker",{strategy:ce("feature-layers-workers")?"dedicated":"local",signal:e});const{url:i,delimiter:r,fields:n,latitudeField:l,longitudeField:d,spatialReference:y,timeInfo:v}=this.loadOptions,x=await this._connection.invoke("load",{url:i,customParameters:this.customParameters,parsingOptions:{delimiter:r,fields:n==null?void 0:n.map($=>$.toJSON()),latitudeField:l,longitudeField:d,spatialReference:y==null?void 0:y.toJSON(),timeInfo:v==null?void 0:v.toJSON()}},{signal:e});this.locationInfo=x.locationInfo,this.sourceJSON=x.layerDefinition,this.delimiter=x.delimiter}};g([S()],ka.prototype,"type",void 0),g([S()],ka.prototype,"loadOptions",void 0),g([S()],ka.prototype,"customParameters",void 0),g([S()],ka.prototype,"locationInfo",void 0),g([S()],ka.prototype,"sourceJSON",void 0),g([S()],ka.prototype,"delimiter",void 0),ka=g([J("esri.layers.graphics.sources.CSVSource")],ka);const Y3e={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function bTe(t){return{renderer:{type:"simple",symbol:t==="esriGeometryPoint"||t==="esriGeometryMultipoint"?SG:t==="esriGeometryPolyline"?MG:$G}}}const K3e=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let Z3e=1;function wTe(t,e){if(ce("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let i=`this.${e} = null;`;for(const n in t)i+=`this${K3e.test(n)?`.${n}`:`["${n}"]`} = ${JSON.stringify(t[n])};`;const r=new Function(`
      return class AttributesClass$${Z3e++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[e]:null,...t})}}function _Te(t={}){return[{name:"New Feature",description:"",prototype:{attributes:ae(t)}}]}function X3e(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:Y3e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}function BP(t,e){throw new ne(e,`CSVLayer (title: ${t.title}, id: ${t.id}) cannot be saved to a portal item`)}let mr=class extends fT{constructor(...t){super(...t),this.geometryType="point",this.capabilities=X3e(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=ut.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null,i=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},t).catch(Nn).then(async()=>this.initLayerProperties(await this.createGraphicsSource(e)));return this.addResolvingPromise(i),Promise.resolve(this)}get isTable(){return this.loaded&&this.geometryType==null}readWebMapLabelsVisible(t,e){return e.showLabels!=null?e.showLabels:!!(e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.labelingInfo)}set url(t){if(!t)return void this._set("url",t);const e=Wi(t);this._set("url",e.path),e.query&&(this.customParameters={...this.customParameters,...e.query})}async createGraphicsSource(t){const e=new ka({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField??void 0,longitudeField:this.longitudeField??void 0,spatialReference:this.spatialReference??void 0,timeInfo:this.timeInfo??void 0,url:this.url},customParameters:this.customParameters??void 0});return this._set("source",e),await e.load({signal:t}),this.read({locationInfo:e.locationInfo,columnDelimiter:e.delimiter},{origin:"service",url:this.parsedUrl}),e}queryFeatures(t,e){return this.load().then(()=>this.source.queryFeatures(lr.from(t)||this.createQuery())).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(t,e){return this.load().then(()=>this.source.queryObjectIds(lr.from(t)||this.createQuery()))}queryFeatureCount(t,e){return this.load().then(()=>this.source.queryFeatureCount(lr.from(t)||this.createQuery()))}queryExtent(t,e){return this.load().then(()=>this.source.queryExtent(lr.from(t)||this.createQuery()))}read(t,e){super.read(t,e),e&&e.origin==="service"&&this.revert(["latitudeField","longitudeField"],"service")}write(t,e){return super.write(t,{...e,writeLayerSchema:!0})}clone(){throw new ne("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}async save(t){return BP(this,"csv-layer:save")}async saveAs(t,e){return BP(this,"csv-layer:save-as")}async hasDataChanged(){try{const{dataChanged:t,updates:e}=await this.source.refresh(this.customParameters);return e!=null&&this.read(e,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),t}catch{}return!1}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};g([S({readOnly:!0,json:{read:!1,write:!1}})],mr.prototype,"capabilities",void 0),g([S({type:[","," ",";","|","	"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],mr.prototype,"delimiter",void 0),g([S({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],mr.prototype,"editingEnabled",void 0),g([S({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],mr.prototype,"fields",void 0),g([S({type:Boolean,readOnly:!0})],mr.prototype,"isTable",null),g([xe("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],mr.prototype,"readWebMapLabelsVisible",null),g([S({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],mr.prototype,"latitudeField",void 0),g([S({type:["show","hide"]})],mr.prototype,"listMode",void 0),g([S({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],mr.prototype,"locationType",void 0),g([S({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],mr.prototype,"longitudeField",void 0),g([S({type:["CSV"]})],mr.prototype,"operationalLayerType",void 0),g([S()],mr.prototype,"outFields",void 0),g([S({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],mr.prototype,"path",void 0),g([S({json:{read:!1},cast:null,type:ka,readOnly:!0})],mr.prototype,"source",void 0),g([S({json:{read:!1},value:"csv",readOnly:!0})],mr.prototype,"type",void 0),g([S({json:{read:p_,write:{isRequired:!0,ignoreOrigin:!0,writer:kh}}})],mr.prototype,"url",null),mr=g([J("esri.layers.CSVLayer")],mr);const Q3e=mr,xTe=Object.freeze(Object.defineProperty({__proto__:null,default:Q3e},Symbol.toStringTag,{value:"Module"})),FU="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps/MapServer",e5e={url:FU,title:"USA Supply Chain Network",sublayers:[{id:0,visible:!0}]},MT=new jU(e5e),t5e=()=>[MT],i5e=1e3,r5e=t=>{me(()=>t.updating,e=>{})};let El;const s5e=t=>{const e=document.getElementById("feature-node");t.when(()=>{t.on("click",i=>o5e(i,t,e)),El=new AU,El.tolerance=3,El.layerIds=[0],El.layerOption="top",El.width=t.width,El.height=t.height})},n5e={1:"Supplier",2:"Consignee",3:"Supplier and Consignee"},o5e=(t,e,i)=>{El.geometry=t.mapPoint,El.mapExtent=e.extent,E3e(FU,El).then(function(r){r.results.map(function(l){const{Address:d,lat:y,long:v,type:x,Id:$,routes:E}=l.feature.attributes,k=l.layerName,P=n5e[x],D=`ID:<br/>${$} <br/> <br/> Layer Name: ${k} <br/> type code: <b>${P}</b> <br/><br/> Address :${d}<br/>Lat Lng: ${y},${v}`;i.innerHTML=D,l5e(JSON.parse(E),e)})})},a5e={2:"1",1:"2"},l5e=(t,e)=>{const i=new Set,r=t.map(l=>{const d=[],y=l.split(",");i.add(y[0]+";"+y[2]),i.add(y[1]+";"+a5e[y[2]]);const v=y[0].split(";"),x=y[1].split(";");d.push([v,x]);var $=new cn({paths:d,spatialReference:{wkid:4326}}),E=EU($,i5e);return new ur({geometry:E,symbol:d5e(y[2],y[3])})});e.graphics.removeAll();const n=MT.sublayers.at(0);n.visible=!1,console.log("Points:::",i),f5e(e,Array.from(i)),e.graphics.addMany(r),console.log("total routes::",r.length)},u5e=2,NU=1,zU={type:"simple-line",cap:"round",join:"round",marker:{color:"green",placement:"begin",style:"arrow"}},VU={...zU,color:[150,75,0],style:"short-dot",width:u5e},h5e={...zU,color:[4,90,141],width:NU},BU={...VU,marker:{color:"red",placement:"begin-end",style:"arrow"}},c5e={...BU,color:[4,90,141],width:NU},d5e=(t,e)=>{let i;return e==1&&t==1?i=VU:e==1&&t==2?i=h5e:e==2&&t==1?i=BU:i=c5e,i},p5e=t=>{t.ui.add(["clearBtn"],"top-left");var e=document.getElementById("clearBtn");e.addEventListener("click",i=>{console.log("view.graphics",t.graphics.length),t.graphics.length>0&&t.graphics.removeAll();const r=MT.sublayers.at(0);r.visible=!0})},f5e=(t,e)=>{const i=e.map(r=>{console.log(r);const n=r.split(";"),l={type:"point",longitude:n[0],latitude:n[1]},d={type:"simple-marker",color:n[2]=="1"?[0,204,0]:[46,204,230],outline:{color:n[2]=="1"?[255,255,0]:[0,255,220],width:1}};return new ur({geometry:l,symbol:d})});return t.graphics.addMany(i),i},y5e=!0;console.warn=(t,e)=>{console.log("%c "+t+"  "+e,"color: red; font-weight:bold")};console.warn("The develop mode::",y5e);(async()=>await le(()=>Promise.resolve({}),["assets/mapfromonline-31fe072e.css"]))();const GP={zoom:2,baseMapID:"hybrid",center:[18.4208,-33.91815998]};const m5e=new GL({basemap:"streets-vector",layers:t5e()}),Qp=new ide({container:"viewDiv",map:m5e,zoom:GP.zoom,center:GP.center,popupEnabled:!0});Qp.when(()=>{const t=new Xde({view:Qp});p5e(Qp),Qp.ui.add(t,"top-right"),s5e(Qp)});r5e(Qp);export{p6e as $,O0 as A,st as B,Yn as C,zs as D,AM as E,xxe as F,Ht as G,d6e as H,f6e as I,h6e as J,xN as K,E6e as L,tS as M,mhe as N,x6e as O,k6e as P,_6e as Q,M6e as R,mce as S,b6e as T,fce as U,g6e as V,v6e as W,BN as X,c6e as Y,$6e as Z,le as _,ia as a,cJ as a$,$ce as a0,Tce as a1,w6e as a2,$s as a3,Cwe as a4,f1 as a5,ze as a6,ve as a7,lt as a8,u9e as a9,df as aA,f$e as aB,J_ as aC,ur as aD,Yo as aE,tO as aF,qd as aG,Ed as aH,Be as aI,f0 as aJ,Ct as aK,Ww as aL,Tl as aM,Jve as aN,lr as aO,KF as aP,J0 as aQ,ule as aR,l$ as aS,fae as aT,kae as aU,zue as aV,ese as aW,YF as aX,XK as aY,Oh as aZ,ut as a_,za as aa,Zl as ab,p9e as ac,Q2 as ad,cj as ae,Jh as af,l9e as ag,Vd as ah,Ia as ai,Nn as aj,Qre as ak,K2 as al,km as am,cn as an,LZ as ao,M1 as ap,Yae as aq,ESe as ar,kSe as as,Ji as at,Is as au,jd as av,g as aw,S as ax,J as ay,tg as az,r_ as b,ea as b$,OM as b0,Yh as b1,L0 as b2,Am as b3,G2 as b4,Y5e as b5,en as b6,Vs as b7,Vl as b8,Hh as b9,_$ as bA,Sh as bB,i_ as bC,oL as bD,Ra as bE,A_ as bF,W9e as bG,FF as bH,SF as bI,NF as bJ,_ae as bK,ySe as bL,Cae as bM,dm as bN,mSe as bO,F0 as bP,M5e as bQ,Va as bR,Pm as bS,HMe as bT,md as bU,SZ as bV,f9e as bW,UV as bX,QMe as bY,BA as bZ,BV as b_,xM as ba,E3e as bb,hTe as bc,AU as bd,rm as be,L2 as bf,ql as bg,Ui as bh,Xn as bi,Uxe as bj,Ar as bk,Ms as bl,jMe as bm,Uo as bn,jO as bo,WJ as bp,Ix as bq,US as br,Hn as bs,Ei as bt,qF as bu,Vt as bv,qxe as bw,QF as bx,Ha as by,ra as bz,ZF as c,sC as c$,e2 as c0,y9e as c1,a9e as c2,v9e as c3,Bh as c4,CZ as c5,OZ as c6,u7 as c7,VL as c8,r9e as c9,k9e as cA,C9e as cB,fn as cC,LX as cD,WO as cE,ae as cF,CG as cG,OG as cH,F$e as cI,hwe as cJ,lwe as cK,jw as cL,Ioe as cM,td as cN,Pt as cO,eve as cP,K_ as cQ,kwe as cR,_5e as cS,x5e as cT,xt as cU,b3 as cV,fV as cW,C5e as cX,Ele as cY,Qge as cZ,rC as c_,l7 as ca,a7 as cb,R$e as cc,j$e as cd,D$e as ce,Rve as cf,D2 as cg,xe as ch,s$e as ci,i$e as cj,uh as ck,br as cl,Qw as cm,mw as cn,p0 as co,ZR as cp,vr as cq,K$ as cr,fm as cs,jve as ct,d7 as cu,E9e as cv,cTe as cw,L9e as cx,A9e as cy,P9e as cz,QM as d,e0 as d$,nq as d0,aN as d1,$5e as d2,hW as d3,Ne as d4,d3 as d5,Pye as d6,WV as d7,t9e as d8,gZ as d9,IA as dA,TA as dB,yMe as dC,mMe as dD,Nh as dE,d_ as dF,x2 as dG,pMe as dH,fMe as dI,h9e as dJ,_Me as dK,I9e as dL,F0e as dM,N0e as dN,bM as dO,hV as dP,dMe as dQ,R0e as dR,z0e as dS,uMe as dT,aMe as dU,c7 as dV,kd as dW,sv as dX,IV as dY,xZ as dZ,cd as d_,b9e as da,s9e as db,s7 as dc,IL as dd,bZ as de,Wx as df,RZ as dg,TZ as dh,i9e as di,o9e as dj,u4e as dk,wF as dl,tle as dm,Oa as dn,W0 as dp,Gm as dq,PZ as dr,cMe as ds,xMe as dt,Ba as du,vMe as dv,gMe as dw,bMe as dx,wMe as dy,$A as dz,cb as e,Vw as e$,c1 as e0,Cr as e1,Ov as e2,C4 as e3,I_ as e4,WB as e5,cve as e6,tT as e7,JB as e8,os as e9,X1 as eA,Hl as eB,yt as eC,Cm as eD,ss as eE,zne as eF,hhe as eG,y6e as eH,S6e as eI,gce as eJ,A6e as eK,RG as eL,Vxe as eM,im as eN,hSe as eO,ge as eP,zh as eQ,hN as eR,Y2 as eS,O9e as eT,St as eU,Hd as eV,Jl as eW,$4 as eX,bi as eY,M4 as eZ,I4 as e_,Wi as ea,_U as eb,Ah as ec,hve as ed,u_e as ee,EP as ef,qbe as eg,Hbe as eh,Wbe as ei,Ko as ej,YV as ek,Ul as el,JV as em,KMe as en,X$ as eo,WMe as ep,qfe as eq,i7e as er,KS as es,w0 as et,lV as eu,c0e as ev,d0e as ew,Et as ex,hMe as ey,Bd as ez,lle as f,fT as f$,uj as f0,sxe as f1,_t as f2,P7 as f3,iE as f4,w9e as f5,e4e as f6,a4e as f7,xre as f8,lK as f9,Tm as fA,Bn as fB,Pxe as fC,tj as fD,Zo as fE,B3e as fF,Pve as fG,eo as fH,yF as fI,Gl as fJ,bTe as fK,ns as fL,Axe as fM,Mxe as fN,u6e as fO,e9e as fP,D5 as fQ,R2 as fR,i9 as fS,t9 as fT,x$e as fU,_$e as fV,_Y as fW,R$ as fX,KM as fY,N$e as fZ,T5e as f_,sle as fa,ole as fb,as as fc,si as fd,bd as fe,Ae as ff,Ue as fg,rTe as fh,ag as fi,iTe as fj,ed as fk,I6e as fl,T6e as fm,Or as fn,Dr as fo,X as fp,Oo as fq,Uw as fr,d2 as fs,nC as ft,D0 as fu,g0 as fv,vxe as fw,uW as fx,Bo as fy,Z2 as fz,ce as g,OMe as g$,Jd as g0,V$e as g1,z$e as g2,vwe as g3,Bxe as g4,rq as g5,oG as g6,LG as g7,jG as g8,Y_ as g9,efe as gA,oMe as gB,kMe as gC,CMe as gD,gn as gE,Wl as gF,t2 as gG,MMe as gH,Kz as gI,bfe as gJ,Ype as gK,Eh as gL,qh as gM,vY as gN,b_ as gO,mfe as gP,gfe as gQ,oTe as gR,Le as gS,Cxe as gT,Mfe as gU,LMe as gV,TS as gW,sTe as gX,e3 as gY,nTe as gZ,Tfe as g_,w5e as ga,T_ as gb,dG as gc,RT as gd,O5e as ge,E5e as gf,fd as gg,v2 as gh,Q5e as gi,Sxe as gj,coe as gk,_xe as gl,Lh as gm,Jj as gn,pU as go,fU as gp,J2e as gq,dU as gr,X2e as gs,Q2e as gt,e_e as gu,wV as gv,ii as gw,O$ as gx,AMe as gy,H_ as gz,_M as h,B$ as h$,DMe as h0,wfe as h1,PMe as h2,xr as h3,S_e as h4,age as h5,IX as h6,xfe as h7,GO as h8,VO as h9,yi as hA,w7e as hB,d7e as hC,n6 as hD,Te as hE,r6 as hF,s6 as hG,aB as hH,z1e as hI,Iv as hJ,C7e as hK,$t as hL,J1e as hM,xs as hN,eB as hO,s1e as hP,j1e as hQ,t1e as hR,u1e as hS,Ti as hT,_7e as hU,Sd as hV,or as hW,v7e as hX,ZA as hY,T2 as hZ,y7e as h_,G4 as ha,kr as hb,I$ as hc,Q6e as hd,i_e as he,un as hf,L1e as hg,jl as hh,w1e as hi,rt as hj,Q1e as hk,et as hl,ln as hm,ah as hn,Gi as ho,ig as hp,Vp as hq,z1 as hr,T0 as hs,gu as ht,nn as hu,Bs as hv,N1 as hw,Ab as hx,er as hy,V1e as hz,XU as i,e7 as i$,g7e as i0,i1e as i1,d1e as i2,dn as i3,m7e as i4,b7e as i5,P6e as i6,m6e as i7,yfe as i8,cM as i9,$Me as iA,vte as iB,nF as iC,xx as iD,JMe as iE,QP as iF,m9e as iG,t7e as iH,EO as iI,wO as iJ,GMe as iK,qV as iL,NV as iM,UJ as iN,ZJ as iO,e_ as iP,Dxe as iQ,Wn as iR,S5e as iS,wue as iT,A5e as iU,aL as iV,Mw as iW,hL as iX,Wxe as iY,gK as iZ,iK as i_,tTe as ia,K0e as ib,SMe as ic,s0 as id,B0e as ie,lMe as ig,j5e as ih,BW as ii,n$e as ij,Wge as ik,vt as il,iX as im,vX as io,wTe as ip,Rh as iq,GW as ir,o4e as is,e7e as it,D9e as iu,NL as iv,_9e as iw,n9e as ix,q0e as iy,Y3e as iz,I5e as j,F9e as j$,$w as j0,rL as j1,Gxe as j2,TK as j3,sq as j4,bL as j5,FY as j6,NY as j7,zY as j8,DY as j9,IK as jA,OK as jB,FK as jC,vL as jD,mL as jE,gL as jF,jK as jG,GK as jH,UK as jI,SK as jJ,t_ as jK,R0 as jL,S$e as jM,pxe as jN,mye as jO,dye as jP,zMe as jQ,ZMe as jR,cye as jS,yye as jT,d9e as jU,Gve as jV,Afe as jW,_Te as jX,qMe as jY,f7 as jZ,j9e as j_,LY as ja,Jie as jb,QR as jc,aK as jd,lre as je,Qo as jf,Gre as jg,ile as jh,Lxe as ji,Ixe as jj,BM as jk,UM as jl,mle as jm,$le as jn,jY as jo,ure as jp,yK as jq,ej as jr,Oie as js,Mn as jt,HW as ju,_O as jv,xO as jw,WW as jx,Qn as jy,$K as jz,cN as k,NM as k$,R9e as k0,Jxe as k1,G7 as k2,F_ as k3,Zxe as k4,u1 as k5,lye as k6,Zfe as k7,iye as k8,pye as k9,uL as kA,nw as kB,pae as kC,RY as kD,Rge as kE,W_ as kF,Mf as kG,Nie as kH,Yxe as kI,v5e as kJ,EW as kK,FM as kL,KU as kM,Ew as kN,_s as kO,Di as kP,Ofe as kQ,Rfe as kR,Kl as kS,$L as kT,dO as kU,i4e as kV,l4e as kW,kh as kX,Nm as kY,Id as kZ,Rre as k_,XMe as ka,lie as kb,u$e as kc,Dq as kd,R5 as ke,j5 as kf,UMe as kg,Xt as kh,FMe as ki,$ue as kj,bte as kk,YMe as kl,PV as km,P5e as kn,uK as ko,Lt as kp,k0 as kq,Xpe as kr,Bw as ks,wT as kt,Qme as ku,ege as kv,vI as kw,lL as kx,rK as ky,QY as kz,hle as l,_r as l$,RM as l0,TI as l1,Qxe as l2,AV as l3,K0 as l4,gxe as l5,rpe as l6,nv as l7,qS as l8,aG as l9,Em as lA,Xte as lB,zn as lC,lj as lD,X3e as lE,mwe as lF,lG,dwe as lH,Fve as lI,qG as lJ,II as lK,qL as lL,sT as lM,og as lN,uP as lO,X6 as lP,sg as lQ,Uve as lR,dT as lS,pT as lT,Q1 as lU,Us as lV,g_ as lW,KZ as lX,YZ as lY,fZ as lZ,mI as l_,BG as la,VG as lb,mTe as lc,Yu as ld,M$e as le,Ok as lf,WG as lg,KB as lh,Z_ as li,Twe as lj,Kn as lk,nW as ll,dR as lm,bN as ln,nG as lo,kM as lp,$$e as lq,qve as lr,Hve as ls,fG as lt,doe as lu,e$ as lv,foe as lw,yoe as lx,mM as ly,gM as lz,V2 as m,tm as m$,hJ as m0,uJ as m1,kxe as m2,TV as m3,Vh as m4,Z1 as m5,J3e as m6,D3e as m7,O3e as m8,fH as m9,ZU as mA,C7 as mB,t4e as mC,Q9e as mD,vve as mE,Ph as mF,zE as mG,yf as mH,c9e as mI,g9e as mJ,SI as mK,nle as mL,Qoe as mM,Joe as mN,h7 as mO,bxe as mP,Aw as mQ,Na as mR,Jn as mS,hR as mT,yO as mU,_m as mV,Dve as mW,p$e as mX,$h as mY,eP as mZ,vG as m_,HG as ma,xf as mb,Y$ as mc,xB as md,pfe as me,bge as mf,ffe as mg,IB as mh,LB as mi,E2 as mj,iT as mk,vB as ml,G1 as mm,poe as mn,Cre as mo,VC as mp,N2 as mq,p_ as mr,om as ms,Ss as mt,pn as mu,Pte as mv,X2 as mw,Cte as mx,h4e as my,F5e as mz,ar as n,r4e as n$,oT as n0,Kve as n1,Yve as n2,D$ as n3,rf as n4,cbe as n5,kve as n6,eu as n7,L$e as n8,O$e as n9,Hxe as nA,nL as nB,sL as nC,Wve as nD,PU as nE,cSe as nF,YH as nG,U as nH,Exe as nI,r$e as nJ,cT as nK,T9e as nL,Zn as nM,i0 as nN,wG as nO,PG as nP,cp as nQ,V3e as nR,DV as nS,ws as nT,LV as nU,Ole as nV,Lle as nW,Ale as nX,_K as nY,tC as nZ,fJ as n_,C$e as na,kbe as nb,fbe as nc,mbe as nd,Xve as ne,Qve as nf,ebe as ng,ibe as nh,rbe as ni,sbe as nj,nbe as nk,obe as nl,abe as nm,lbe as nn,ube as no,hbe as np,UG as nq,H3e as nr,C3e as ns,i3 as nt,tf as nu,iC as nv,mxe as nw,YT as nx,$R as ny,UY as nz,r6e as o,s4e as o0,cre as o1,hre as o2,Cie as o3,Kw as o4,A2 as o5,n4e as o6,D5e as o7,R5e as o8,L5e as o9,$W as oa,zie as ob,Lie as oc,iL as od,wxe as oe,Kxe as of,XSe as og,PJ as oh,$4e as oi,q_ as oj,e$e as ok,Bwe as ol,uTe as om,gTe as on,xTe as oo,Ii as p,ne as q,Hm as r,hi as s,b5e as t,Vr as u,Gs as v,i6e as w,ri as x,H1 as y,me as z};
